var W5=Object.defineProperty;var q5=(it,g,et)=>g in it?W5(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et;var Ur=(it,g,et)=>(q5(it,typeof g!="symbol"?g+"":g,et),et),i3=(it,g,et)=>{if(!g.has(it))throw TypeError("Cannot "+et)};var Ut=(it,g,et)=>(i3(it,g,"read from private field"),et?et.call(it):g.get(it)),Rn=(it,g,et)=>{if(g.has(it))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(it):g.set(it,et)},In=(it,g,et,ot)=>(i3(it,g,"write to private field"),ot?ot.call(it,et):g.set(it,et),et);var Ko=(it,g,et,ot)=>({set _(ut){In(it,g,ut,et)},get _(){return Ut(it,g,ot)}}),Xn=(it,g,et)=>(i3(it,g,"access private method"),et);function _mergeNamespaces(it,g){for(var et=0;et<g.length;et++){const ot=g[et];if(typeof ot!="string"&&!Array.isArray(ot)){for(const ut in ot)if(ut!=="default"&&!(ut in it)){const ct=Object.getOwnPropertyDescriptor(ot,ut);ct&&Object.defineProperty(it,ut,ct.get?ct:{enumerable:!0,get:()=>ot[ut]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const ut of document.querySelectorAll('link[rel="modulepreload"]'))ot(ut);new MutationObserver(ut=>{for(const ct of ut)if(ct.type==="childList")for(const dt of ct.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&ot(dt)}).observe(document,{childList:!0,subtree:!0});function et(ut){const ct={};return ut.integrity&&(ct.integrity=ut.integrity),ut.referrerPolicy&&(ct.referrerPolicy=ut.referrerPolicy),ut.crossOrigin==="use-credentials"?ct.credentials="include":ut.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function ot(ut){if(ut.ep)return;ut.ep=!0;const ct=et(ut);fetch(ut.href,ct)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}function getAugmentedNamespace(it){if(it.__esModule)return it;var g=it.default;if(typeof g=="function"){var et=function ot(){return this instanceof ot?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};et.prototype=g.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(it).forEach(function(ot){var ut=Object.getOwnPropertyDescriptor(it,ot);Object.defineProperty(et,ot,ut.get?ut:{enumerable:!0,get:function(){return it[ot]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$5=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(it){return it===null||typeof it!="object"?null:(it=z$2&&it[z$2]||it["@@iterator"],typeof it=="function"?it:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$2={};function E$3(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(it,g){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,g,"setState")};E$3.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$2(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$5(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(it,g,et){var ot,ut={},ct=null,dt=null;if(g!=null)for(ot in g.ref!==void 0&&(dt=g.ref),g.key!==void 0&&(ct=""+g.key),g)J$2.call(g,ot)&&!L$4.hasOwnProperty(ot)&&(ut[ot]=g[ot]);var ft=arguments.length-2;if(ft===1)ut.children=et;else if(1<ft){for(var St=Array(ft),kt=0;kt<ft;kt++)St[kt]=arguments[kt+2];ut.children=St}if(it&&it.defaultProps)for(ot in ft=it.defaultProps,ft)ut[ot]===void 0&&(ut[ot]=ft[ot]);return{$$typeof:l$4,type:it,key:ct,ref:dt,props:ut,_owner:K$3.current}}function N$3(it,g){return{$$typeof:l$4,type:it.type,key:g,ref:it.ref,props:it.props,_owner:it._owner}}function O$5(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$4}function escape$1(it){var g={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(et){return g[et]})}var P$4=/\/+/g;function Q$2(it,g){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):g.toString(36)}function R$4(it,g,et,ot,ut){var ct=typeof it;(ct==="undefined"||ct==="boolean")&&(it=null);var dt=!1;if(it===null)dt=!0;else switch(ct){case"string":case"number":dt=!0;break;case"object":switch(it.$$typeof){case l$4:case n$5:dt=!0}}if(dt)return dt=it,ut=ut(dt),it=ot===""?"."+Q$2(dt,0):ot,I$5(ut)?(et="",it!=null&&(et=it.replace(P$4,"$&/")+"/"),R$4(ut,g,et,"",function(kt){return kt})):ut!=null&&(O$5(ut)&&(ut=N$3(ut,et+(!ut.key||dt&&dt.key===ut.key?"":(""+ut.key).replace(P$4,"$&/")+"/")+it)),g.push(ut)),1;if(dt=0,ot=ot===""?".":ot+":",I$5(it))for(var ft=0;ft<it.length;ft++){ct=it[ft];var St=ot+Q$2(ct,ft);dt+=R$4(ct,g,et,St,ut)}else if(St=A$3(it),typeof St=="function")for(it=St.call(it),ft=0;!(ct=it.next()).done;)ct=ct.value,St=ot+Q$2(ct,ft++),dt+=R$4(ct,g,et,St,ut);else if(ct==="object")throw g=String(it),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$4(it,g,et){if(it==null)return it;var ot=[],ut=0;return R$4(it,ot,"","",function(ct){return g.call(et,ct,ut++)}),ot}function T$4(it){if(it._status===-1){var g=it._result;g=g(),g.then(function(et){(it._status===0||it._status===-1)&&(it._status=1,it._result=et)},function(et){(it._status===0||it._status===-1)&&(it._status=2,it._result=et)}),it._status===-1&&(it._status=0,it._result=g)}if(it._status===1)return it._result.default;throw it._result}var U$5={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(it,g,et){S$4(it,function(){g.apply(this,arguments)},et)},count:function(it){var g=0;return S$4(it,function(){g++}),g},toArray:function(it){return S$4(it,function(g){return g})||[]},only:function(it){if(!O$5(it))throw Error("React.Children.only expected to receive a single React element child.");return it}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(it,g,et){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var ot=C$5({},it.props),ut=it.key,ct=it.ref,dt=it._owner;if(g!=null){if(g.ref!==void 0&&(ct=g.ref,dt=K$3.current),g.key!==void 0&&(ut=""+g.key),it.type&&it.type.defaultProps)var ft=it.type.defaultProps;for(St in g)J$2.call(g,St)&&!L$4.hasOwnProperty(St)&&(ot[St]=g[St]===void 0&&ft!==void 0?ft[St]:g[St])}var St=arguments.length-2;if(St===1)ot.children=et;else if(1<St){ft=Array(St);for(var kt=0;kt<St;kt++)ft[kt]=arguments[kt+2];ot.children=ft}return{$$typeof:l$4,type:it.type,key:ut,ref:ct,props:ot,_owner:dt}};react_production_min.createContext=function(it){return it={$$typeof:u$6,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$6,_context:it},it.Consumer=it};react_production_min.createElement=M$4;react_production_min.createFactory=function(it){var g=M$4.bind(null,it);return g.type=it,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(it){return{$$typeof:v$3,render:it}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(it){return{$$typeof:y$5,_payload:{_status:-1,_result:it},_init:T$4}};react_production_min.memo=function(it,g){return{$$typeof:x$3,type:it,compare:g===void 0?null:g}};react_production_min.startTransition=function(it){var g=V$3.transition;V$3.transition={};try{it()}finally{V$3.transition=g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(it,g){return U$5.current.useCallback(it,g)};react_production_min.useContext=function(it){return U$5.current.useContext(it)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(it){return U$5.current.useDeferredValue(it)};react_production_min.useEffect=function(it,g){return U$5.current.useEffect(it,g)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(it,g,et){return U$5.current.useImperativeHandle(it,g,et)};react_production_min.useInsertionEffect=function(it,g){return U$5.current.useInsertionEffect(it,g)};react_production_min.useLayoutEffect=function(it,g){return U$5.current.useLayoutEffect(it,g)};react_production_min.useMemo=function(it,g){return U$5.current.useMemo(it,g)};react_production_min.useReducer=function(it,g,et){return U$5.current.useReducer(it,g,et)};react_production_min.useRef=function(it){return U$5.current.useRef(it)};react_production_min.useState=function(it){return U$5.current.useState(it)};react_production_min.useSyncExternalStore=function(it,g,et){return U$5.current.useSyncExternalStore(it,g,et)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$3=getDefaultExportFromCjs(reactExports),t$5=_mergeNamespaces({__proto__:null,default:React$3},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$4=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q(it,g,et){var ot,ut={},ct=null,dt=null;et!==void 0&&(ct=""+et),g.key!==void 0&&(ct=""+g.key),g.ref!==void 0&&(dt=g.ref);for(ot in g)m$6.call(g,ot)&&!p$4.hasOwnProperty(ot)&&(ut[ot]=g[ot]);if(it&&it.defaultProps)for(ot in g=it.defaultProps,g)ut[ot]===void 0&&(ut[ot]=g[ot]);return{$$typeof:k$1,type:it,key:ct,ref:dt,props:ut,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(it){function g(yn,vn){var On=yn.length;yn.push(vn);e:for(;0<On;){var Cn=On-1>>>1,Vn=yn[Cn];if(0<ut(Vn,vn))yn[Cn]=vn,yn[On]=Vn,On=Cn;else break e}}function et(yn){return yn.length===0?null:yn[0]}function ot(yn){if(yn.length===0)return null;var vn=yn[0],On=yn.pop();if(On!==vn){yn[0]=On;e:for(var Cn=0,Vn=yn.length,Qn=Vn>>>1;Cn<Qn;){var ir=2*(Cn+1)-1,ar=yn[ir],rr=ir+1,hr=yn[rr];if(0>ut(ar,On))rr<Vn&&0>ut(hr,ar)?(yn[Cn]=hr,yn[rr]=On,Cn=rr):(yn[Cn]=ar,yn[ir]=On,Cn=ir);else if(rr<Vn&&0>ut(hr,On))yn[Cn]=hr,yn[rr]=On,Cn=rr;else break e}}return vn}function ut(yn,vn){var On=yn.sortIndex-vn.sortIndex;return On!==0?On:yn.id-vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;it.unstable_now=function(){return ct.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,jt=3,Ft=!1,Bt=!1,Ht=!1,Yt=typeof setTimeout=="function"?setTimeout:null,zt=typeof clearTimeout=="function"?clearTimeout:null,Kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function en(yn){for(var vn=et(kt);vn!==null;){if(vn.callback===null)ot(kt);else if(vn.startTime<=yn)ot(kt),vn.sortIndex=vn.expirationTime,g(St,vn);else break;vn=et(kt)}}function tn(yn){if(Ht=!1,en(yn),!Bt)if(et(St)!==null)Bt=!0,gn(on);else{var vn=et(kt);vn!==null&&Mn(tn,vn.startTime-yn)}}function on(yn,vn){Bt=!1,Ht&&(Ht=!1,zt(dn),dn=-1),Ft=!0;var On=jt;try{for(en(vn),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>vn)||yn&&!bn());){var Cn=Rt.callback;if(typeof Cn=="function"){Rt.callback=null,jt=Rt.priorityLevel;var Vn=Cn(Rt.expirationTime<=vn);vn=it.unstable_now(),typeof Vn=="function"?Rt.callback=Vn:Rt===et(St)&&ot(St),en(vn)}else ot(St);Rt=et(St)}if(Rt!==null)var Qn=!0;else{var ir=et(kt);ir!==null&&Mn(tn,ir.startTime-vn),Qn=!1}return Qn}finally{Rt=null,jt=On,Ft=!1}}var an=!1,un=null,dn=-1,Sn=5,mn=-1;function bn(){return!(it.unstable_now()-mn<Sn)}function En(){if(un!==null){var yn=it.unstable_now();mn=yn;var vn=!0;try{vn=un(!0,yn)}finally{vn?kn():(an=!1,un=null)}}else an=!1}var kn;if(typeof Kt=="function")kn=function(){Kt(En)};else if(typeof MessageChannel<"u"){var Pn=new MessageChannel,Ln=Pn.port2;Pn.port1.onmessage=En,kn=function(){Ln.postMessage(null)}}else kn=function(){Yt(En,0)};function gn(yn){un=yn,an||(an=!0,kn())}function Mn(yn,vn){dn=Yt(function(){yn(it.unstable_now())},vn)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(yn){yn.callback=null},it.unstable_continueExecution=function(){Bt||Ft||(Bt=!0,gn(on))},it.unstable_forceFrameRate=function(yn){0>yn||125<yn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Sn=0<yn?Math.floor(1e3/yn):5},it.unstable_getCurrentPriorityLevel=function(){return jt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(yn){switch(jt){case 1:case 2:case 3:var vn=3;break;default:vn=jt}var On=jt;jt=vn;try{return yn()}finally{jt=On}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(yn,vn){switch(yn){case 1:case 2:case 3:case 4:case 5:break;default:yn=3}var On=jt;jt=yn;try{return vn()}finally{jt=On}},it.unstable_scheduleCallback=function(yn,vn,On){var Cn=it.unstable_now();switch(typeof On=="object"&&On!==null?(On=On.delay,On=typeof On=="number"&&0<On?Cn+On:Cn):On=Cn,yn){case 1:var Vn=-1;break;case 2:Vn=250;break;case 5:Vn=1073741823;break;case 4:Vn=1e4;break;default:Vn=5e3}return Vn=On+Vn,yn={id:Tt++,callback:vn,priorityLevel:yn,startTime:On,expirationTime:Vn,sortIndex:-1},On>Cn?(yn.sortIndex=On,g(kt,yn),et(St)===null&&yn===et(kt)&&(Ht?(zt(dn),dn=-1):Ht=!0,Mn(tn,On-Cn))):(yn.sortIndex=Vn,g(St,yn),Bt||Ft||(Bt=!0,gn(on))),yn},it.unstable_shouldYield=bn,it.unstable_wrapCallback=function(yn){var vn=jt;return function(){var On=jt;jt=vn;try{return yn.apply(this,arguments)}finally{jt=On}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(it){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+it,et=1;et<arguments.length;et++)g+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+it+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(it,g){ha(it,g),ha(it+"Capture",g)}function ha(it,g){for(ea[it]=g,it=0;it<g.length;it++)da.add(g[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,g,et,ot){if(et!==null&&et.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return ot?!1:et!==null?!et.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,g,et,ot){if(g===null||typeof g>"u"||pa(it,g,et,ot))return!0;if(ot)return!1;if(et!==null)switch(et.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2(it,g,et,ot,ut,ct,dt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=ot,this.attributeNamespace=ut,this.mustUseProperty=et,this.propertyName=it,this.type=g,this.sanitizeURL=ct,this.removeEmptyString=dt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$1[it]=new v$2(it,0,!1,it,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var g=it[0];z$1[g]=new v$2(g,1,!1,it[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$1[it]=new v$2(it,3,!1,it.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(it){z$1[it]=new v$2(it,3,!0,it,null,!1,!1)});["capture","download"].forEach(function(it){z$1[it]=new v$2(it,4,!1,it,null,!1,!1)});["cols","rows","size","span"].forEach(function(it){z$1[it]=new v$2(it,6,!1,it,null,!1,!1)});["rowSpan","start"].forEach(function(it){z$1[it]=new v$2(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta$1(it,g,et,ot){var ut=z$1.hasOwnProperty(g)?z$1[g]:null;(ut!==null?ut.type!==0:ot||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,et,ut,ot)&&(et=null),ot||ut===null?oa(g)&&(et===null?it.removeAttribute(g):it.setAttribute(g,""+et)):ut.mustUseProperty?it[ut.propertyName]=et===null?ut.type===3?!1:"":et:(g=ut.attributeName,ot=ut.attributeNamespace,et===null?it.removeAttribute(g):(ut=ut.type,et=ut===3||ut===4&&et===!0?"":""+et,ot?it.setAttributeNS(ot,g,et):it.setAttribute(g,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$2=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(et){var g=et.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+it}var Na=!1;function Oa(it,g){if(!it||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(kt){var ot=kt}Reflect.construct(it,[],g)}else{try{g.call()}catch(kt){ot=kt}it.call(g.prototype)}else{try{throw Error()}catch(kt){ot=kt}it()}}catch(kt){if(kt&&ot&&typeof kt.stack=="string"){for(var ut=kt.stack.split(`
`),ct=ot.stack.split(`
`),dt=ut.length-1,ft=ct.length-1;1<=dt&&0<=ft&&ut[dt]!==ct[ft];)ft--;for(;1<=dt&&0<=ft;dt--,ft--)if(ut[dt]!==ct[ft]){if(dt!==1||ft!==1)do if(dt--,ft--,0>ft||ut[dt]!==ct[ft]){var St=`
`+ut[dt].replace(" at new "," at ");return it.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",it.displayName)),St}while(1<=dt&&0<=ft);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var g=it.render;return it=it.displayName,it||(it=g.displayName||g.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return g=it.displayName||null,g!==null?g:Qa(it.type)||"Memo";case Ha:g=it._payload,it=it._init;try{return Qa(it(g))}catch{}}return null}function Ra(it){var g=it.type;switch(it.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=g.render,it=it.displayName||it.name||"",g.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var g=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(it){var g=Ta(it)?"checked":"value",et=Object.getOwnPropertyDescriptor(it.constructor.prototype,g),ot=""+it[g];if(!it.hasOwnProperty(g)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ut=et.get,ct=et.set;return Object.defineProperty(it,g,{configurable:!0,get:function(){return ut.call(this)},set:function(dt){ot=""+dt,ct.call(this,dt)}}),Object.defineProperty(it,g,{enumerable:et.enumerable}),{getValue:function(){return ot},setValue:function(dt){ot=""+dt},stopTracking:function(){it._valueTracker=null,delete it[g]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var g=it._valueTracker;if(!g)return!0;var et=g.getValue(),ot="";return it&&(ot=Ta(it)?it.checked?"true":"false":it.value),it=ot,it!==et?(g.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,g){var et=g.checked;return A$2({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??it._wrapperState.initialChecked})}function Za(it,g){var et=g.defaultValue==null?"":g.defaultValue,ot=g.checked!=null?g.checked:g.defaultChecked;et=Sa(g.value!=null?g.value:et),it._wrapperState={initialChecked:ot,initialValue:et,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(it,g){g=g.checked,g!=null&&ta$1(it,"checked",g,!1)}function bb(it,g){ab(it,g);var et=Sa(g.value),ot=g.type;if(et!=null)ot==="number"?(et===0&&it.value===""||it.value!=et)&&(it.value=""+et):it.value!==""+et&&(it.value=""+et);else if(ot==="submit"||ot==="reset"){it.removeAttribute("value");return}g.hasOwnProperty("value")?cb(it,g.type,et):g.hasOwnProperty("defaultValue")&&cb(it,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(it.defaultChecked=!!g.defaultChecked)}function db(it,g,et){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var ot=g.type;if(!(ot!=="submit"&&ot!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+it._wrapperState.initialValue,et||g===it.value||(it.value=g),it.defaultValue=g}et=it.name,et!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,et!==""&&(it.name=et)}function cb(it,g,et){(g!=="number"||Xa(it.ownerDocument)!==it)&&(et==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+et&&(it.defaultValue=""+et))}var eb=Array.isArray;function fb(it,g,et,ot){if(it=it.options,g){g={};for(var ut=0;ut<et.length;ut++)g["$"+et[ut]]=!0;for(et=0;et<it.length;et++)ut=g.hasOwnProperty("$"+it[et].value),it[et].selected!==ut&&(it[et].selected=ut),ut&&ot&&(it[et].defaultSelected=!0)}else{for(et=""+Sa(et),g=null,ut=0;ut<it.length;ut++){if(it[ut].value===et){it[ut].selected=!0,ot&&(it[ut].defaultSelected=!0);return}g!==null||it[ut].disabled||(g=it[ut])}g!==null&&(g.selected=!0)}}function gb(it,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},g,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,g){var et=g.value;if(et==null){if(et=g.children,g=g.defaultValue,et!=null){if(g!=null)throw Error(p$3(92));if(eb(et)){if(1<et.length)throw Error(p$3(93));et=et[0]}g=et}g==null&&(g=""),et=g}it._wrapperState={initialValue:Sa(et)}}function ib(it,g){var et=Sa(g.value),ot=Sa(g.defaultValue);et!=null&&(et=""+et,et!==it.value&&(it.value=et),g.defaultValue==null&&it.defaultValue!==et&&(it.defaultValue=et)),ot!=null&&(it.defaultValue=""+ot)}function jb(it){var g=it.textContent;g===it._wrapperState.initialValue&&g!==""&&g!==null&&(it.value=g)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,g){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(g):it==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,et,ot,ut){MSApp.execUnsafeLocalFunction(function(){return it(g,et,ot,ut)})}:it}(function(it,g){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;g.firstChild;)it.appendChild(g.firstChild)}});function ob(it,g){if(g){var et=it.firstChild;if(et&&et===it.lastChild&&et.nodeType===3){et.nodeValue=g;return}}it.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(g){g=g+it.charAt(0).toUpperCase()+it.substring(1),pb[g]=pb[it]})});function rb(it,g,et){return g==null||typeof g=="boolean"||g===""?"":et||typeof g!="number"||g===0||pb.hasOwnProperty(it)&&pb[it]?(""+g).trim():g+"px"}function sb(it,g){it=it.style;for(var et in g)if(g.hasOwnProperty(et)){var ot=et.indexOf("--")===0,ut=rb(et,g[et],ot);et==="float"&&(et="cssFloat"),ot?it.setProperty(et,ut):it[et]=ut}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,g){if(g){if(tb[it]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,it));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$3(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$3(62))}}function vb(it,g){if(it.indexOf("-")===-1)return typeof g.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$3(280));var g=it.stateNode;g&&(g=Db(g),yb(it.stateNode,it.type,g))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,g=Ab;if(Ab=zb=null,Bb(it),g)for(it=0;it<g.length;it++)Bb(g[it])}}function Gb(it,g){return it(g)}function Hb(){}var Ib=!1;function Jb(it,g,et){if(Ib)return it(g,et);Ib=!0;try{return Gb(it,g,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,g){var et=it.stateNode;if(et===null)return null;var ot=Db(et);if(ot===null)return null;et=ot[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ot=!ot.disabled)||(it=it.type,ot=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!ot;break e;default:it=!1}if(it)return null;if(et&&typeof et!="function")throw Error(p$3(231,g,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,g,et,ot,ut,ct,dt,ft,St){var kt=Array.prototype.slice.call(arguments,3);try{g.apply(et,kt)}catch(Tt){this.onError(Tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,g,et,ot,ut,ct,dt,ft,St){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,g,et,ot,ut,ct,dt,ft,St){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=kt)}}function Vb(it){var g=it,et=it;if(it.alternate)for(;g.return;)g=g.return;else{it=g;do g=it,g.flags&4098&&(et=g.return),it=g.return;while(it)}return g.tag===3?et:null}function Wb(it){if(it.tag===13){var g=it.memoizedState;if(g===null&&(it=it.alternate,it!==null&&(g=it.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$3(188))}function Yb(it){var g=it.alternate;if(!g){if(g=Vb(it),g===null)throw Error(p$3(188));return g!==it?null:it}for(var et=it,ot=g;;){var ut=et.return;if(ut===null)break;var ct=ut.alternate;if(ct===null){if(ot=ut.return,ot!==null){et=ot;continue}break}if(ut.child===ct.child){for(ct=ut.child;ct;){if(ct===et)return Xb(ut),it;if(ct===ot)return Xb(ut),g;ct=ct.sibling}throw Error(p$3(188))}if(et.return!==ot.return)et=ut,ot=ct;else{for(var dt=!1,ft=ut.child;ft;){if(ft===et){dt=!0,et=ut,ot=ct;break}if(ft===ot){dt=!0,ot=ut,et=ct;break}ft=ft.sibling}if(!dt){for(ft=ct.child;ft;){if(ft===et){dt=!0,et=ct,ot=ut;break}if(ft===ot){dt=!0,ot=ct,et=ut;break}ft=ft.sibling}if(!dt)throw Error(p$3(189))}}if(et.alternate!==ot)throw Error(p$3(190))}if(et.tag!==3)throw Error(p$3(188));return et.stateNode.current===et?it:g}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var g=$b(it);if(g!==null)return g;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(it){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,g){var et=it.pendingLanes;if(et===0)return 0;var ot=0,ut=it.suspendedLanes,ct=it.pingedLanes,dt=et&268435455;if(dt!==0){var ft=dt&~ut;ft!==0?ot=tc(ft):(ct&=dt,ct!==0&&(ot=tc(ct)))}else dt=et&~ut,dt!==0?ot=tc(dt):ct!==0&&(ot=tc(ct));if(ot===0)return 0;if(g!==0&&g!==ot&&!(g&ut)&&(ut=ot&-ot,ct=g&-g,ut>=ct||ut===16&&(ct&4194240)!==0))return g;if(ot&4&&(ot|=et&16),g=it.entangledLanes,g!==0)for(it=it.entanglements,g&=ot;0<g;)et=31-oc(g),ut=1<<et,ot|=it[et],g&=~ut;return ot}function vc(it,g){switch(it){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,g){for(var et=it.suspendedLanes,ot=it.pingedLanes,ut=it.expirationTimes,ct=it.pendingLanes;0<ct;){var dt=31-oc(ct),ft=1<<dt,St=ut[dt];St===-1?(!(ft&et)||ft&ot)&&(ut[dt]=vc(ft,g)):St<=g&&(it.expiredLanes|=ft),ct&=~ft}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,!(rc&4194240)&&(rc=64),it}function zc(it){for(var g=[],et=0;31>et;et++)g.push(it);return g}function Ac(it,g,et){it.pendingLanes|=g,g!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,g=31-oc(g),it[g]=et}function Bc(it,g){var et=it.pendingLanes&~g;it.pendingLanes=g,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=g,it.mutableReadLanes&=g,it.entangledLanes&=g,g=it.entanglements;var ot=it.eventTimes;for(it=it.expirationTimes;0<et;){var ut=31-oc(et),ct=1<<ut;g[ut]=0,ot[ut]=-1,it[ut]=-1,et&=~ct}}function Cc(it,g){var et=it.entangledLanes|=g;for(it=it.entanglements;et;){var ot=31-oc(et),ut=1<<ot;ut&g|it[ot]&g&&(it[ot]|=g),et&=~ut}}var C$4=0;function Dc(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,g){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(it,g,et,ot,ut,ct){return it===null||it.nativeEvent!==ct?(it={blockedOn:g,domEventName:et,eventSystemFlags:ot,nativeEvent:ct,targetContainers:[ut]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),it):(it.eventSystemFlags|=ot,g=it.targetContainers,ut!==null&&g.indexOf(ut)===-1&&g.push(ut),it)}function Uc(it,g,et,ot,ut){switch(g){case"focusin":return Lc=Tc(Lc,it,g,et,ot,ut),!0;case"dragenter":return Mc=Tc(Mc,it,g,et,ot,ut),!0;case"mouseover":return Nc=Tc(Nc,it,g,et,ot,ut),!0;case"pointerover":var ct=ut.pointerId;return Oc.set(ct,Tc(Oc.get(ct)||null,it,g,et,ot,ut)),!0;case"gotpointercapture":return ct=ut.pointerId,Pc.set(ct,Tc(Pc.get(ct)||null,it,g,et,ot,ut)),!0}return!1}function Vc(it){var g=Wc(it.target);if(g!==null){var et=Vb(g);if(et!==null){if(g=et.tag,g===13){if(g=Wb(et),g!==null){it.blockedOn=g,Ic(it.priority,function(){Gc(et)});return}}else if(g===3&&et.stateNode.current.memoizedState.isDehydrated){it.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var g=it.targetContainers;0<g.length;){var et=Yc(it.domEventName,it.eventSystemFlags,g[0],it.nativeEvent);if(et===null){et=it.nativeEvent;var ot=new et.constructor(et.type,et);wb=ot,et.target.dispatchEvent(ot),wb=null}else return g=Cb(et),g!==null&&Fc(g),it.blockedOn=et,!1;g.shift()}return!0}function Zc(it,g,et){Xc(it)&&et.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,g){it.blockedOn===g&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function g(ut){return ad(ut,it)}if(0<Kc.length){ad(Kc[0],it);for(var et=1;et<Kc.length;et++){var ot=Kc[et];ot.blockedOn===it&&(ot.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(g),Pc.forEach(g),et=0;et<Qc.length;et++)ot=Qc[et],ot.blockedOn===it&&(ot.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,g,et,ot){var ut=C$4,ct=cd.transition;cd.transition=null;try{C$4=1,fd(it,g,et,ot)}finally{C$4=ut,cd.transition=ct}}function gd(it,g,et,ot){var ut=C$4,ct=cd.transition;cd.transition=null;try{C$4=4,fd(it,g,et,ot)}finally{C$4=ut,cd.transition=ct}}function fd(it,g,et,ot){if(dd){var ut=Yc(it,g,et,ot);if(ut===null)hd(it,g,ot,id$2,et),Sc(it,ot);else if(Uc(ut,it,g,et,ot))ot.stopPropagation();else if(Sc(it,ot),g&4&&-1<Rc.indexOf(it)){for(;ut!==null;){var ct=Cb(ut);if(ct!==null&&Ec(ct),ct=Yc(it,g,et,ot),ct===null&&hd(it,g,ot,id$2,et),ct===ut)break;ut=ct}ut!==null&&ot.stopPropagation()}else hd(it,g,ot,null,et)}}var id$2=null;function Yc(it,g,et,ot){if(id$2=null,it=xb(ot),it=Wc(it),it!==null)if(g=Vb(it),g===null)it=null;else if(et=g.tag,et===13){if(it=Wb(g),it!==null)return it;it=null}else if(et===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;it=null}else g!==it&&(it=null);return id$2=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,g=ld,et=g.length,ot,ut="value"in kd?kd.value:kd.textContent,ct=ut.length;for(it=0;it<et&&g[it]===ut[it];it++);var dt=et-it;for(ot=1;ot<=dt&&g[et-ot]===ut[ct-ot];ot++);return md=ut.slice(it,1<ot?1-ot:void 0)}function od(it){var g=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&g===13&&(it=13)):it=g,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function g(et,ot,ut,ct,dt){this._reactName=et,this._targetInst=ut,this.type=ot,this.nativeEvent=ct,this.target=dt,this.currentTarget=null;for(var ft in it)it.hasOwnProperty(ft)&&(et=it[ft],this[ft]=et?et(ct):ct[ft]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(it):(it=Od[it])?!!g[it]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(it){if(it.key){var g=Md[it.key]||it.key;if(g!=="Unidentified")return g}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe$1=!1;function ge(it,g){switch(it){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie$2=!1;function je$1(it,g){switch(it){case"compositionend":return he$1(g);case"keypress":return g.which!==32?null:(fe$1=!0,ee$1);case"textInput":return it=g.data,it===ee$1&&fe$1?null:it;default:return null}}function ke$1(it,g){if(ie$2)return it==="compositionend"||!ae&&ge(it,g)?(it=nd(),md=ld=kd=null,ie$2=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de$1&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g==="input"?!!le[it.type]:g==="textarea"}function ne(it,g,et,ot){Eb(ot),g=oe(g,"onChange"),0<g.length&&(et=new td("onChange","change",null,et,ot),it.push({event:et,listeners:g}))}var pe=null,qe=null;function re$2(it){se(it,0)}function te$2(it){var g=ue$1(it);if(Wa(g))return it}function ve(it,g){if(it==="change")return g}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe=pe=null)}function Be$1(it){if(it.propertyName==="value"&&te$2(qe)){var g=[];ne(g,qe,it,xb(it)),Jb(re$2,g)}}function Ce(it,g,et){it==="focusin"?(Ae$1(),pe=g,qe=et,pe.attachEvent("onpropertychange",Be$1)):it==="focusout"&&Ae$1()}function De$1(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$2(qe)}function Ee(it,g){if(it==="click")return te$2(g)}function Fe$1(it,g){if(it==="input"||it==="change")return te$2(g)}function Ge$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(it,g){if(He$2(it,g))return!0;if(typeof it!="object"||it===null||typeof g!="object"||g===null)return!1;var et=Object.keys(it),ot=Object.keys(g);if(et.length!==ot.length)return!1;for(ot=0;ot<et.length;ot++){var ut=et[ot];if(!ja.call(g,ut)||!He$2(it[ut],g[ut]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,g){var et=Je(it);it=0;for(var ot;et;){if(et.nodeType===3){if(ot=it+et.textContent.length,it<=g&&ot>=g)return{node:et,offset:g-it};it=ot}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le$1(it,g){return it&&g?it===g?!0:it&&it.nodeType===3?!1:g&&g.nodeType===3?Le$1(it,g.parentNode):"contains"in it?it.contains(g):it.compareDocumentPosition?!!(it.compareDocumentPosition(g)&16):!1:!1}function Me$1(){for(var it=window,g=Xa();g instanceof it.HTMLIFrameElement;){try{var et=typeof g.contentWindow.location.href=="string"}catch{et=!1}if(et)it=g.contentWindow;else break;g=Xa(it.document)}return g}function Ne$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g&&(g==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||g==="textarea"||it.contentEditable==="true")}function Oe$1(it){var g=Me$1(),et=it.focusedElem,ot=it.selectionRange;if(g!==et&&et&&et.ownerDocument&&Le$1(et.ownerDocument.documentElement,et)){if(ot!==null&&Ne$1(et)){if(g=ot.start,it=ot.end,it===void 0&&(it=g),"selectionStart"in et)et.selectionStart=g,et.selectionEnd=Math.min(it,et.value.length);else if(it=(g=et.ownerDocument||document)&&g.defaultView||window,it.getSelection){it=it.getSelection();var ut=et.textContent.length,ct=Math.min(ot.start,ut);ot=ot.end===void 0?ct:Math.min(ot.end,ut),!it.extend&&ct>ot&&(ut=ot,ot=ct,ct=ut),ut=Ke(et,ct);var dt=Ke(et,ot);ut&&dt&&(it.rangeCount!==1||it.anchorNode!==ut.node||it.anchorOffset!==ut.offset||it.focusNode!==dt.node||it.focusOffset!==dt.offset)&&(g=g.createRange(),g.setStart(ut.node,ut.offset),it.removeAllRanges(),ct>ot?(it.addRange(g),it.extend(dt.node,dt.offset)):(g.setEnd(dt.node,dt.offset),it.addRange(g)))}}for(g=[],it=et;it=it.parentNode;)it.nodeType===1&&g.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<g.length;et++)it=g[et],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(it,g,et){var ot=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(ot)||(ot=Qe,"selectionStart"in ot&&Ne$1(ot)?ot={start:ot.selectionStart,end:ot.selectionEnd}:(ot=(ot.ownerDocument&&ot.ownerDocument.defaultView||window).getSelection(),ot={anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}),Se$1&&Ie$2(Se$1,ot)||(Se$1=ot,ot=oe(Re,"onSelect"),0<ot.length&&(g=new td("onSelect","select",null,g,et),it.push({event:g,listeners:ot}),g.target=Qe)))}function Ve(it,g){var et={};return et[it.toLowerCase()]=g.toLowerCase(),et["Webkit"+it]="webkit"+g,et["Moz"+it]="moz"+g,et}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We$1[it])return it;var g=We$1[it],et;for(et in g)if(g.hasOwnProperty(et)&&et in Ye$1)return Xe[it]=g[et];return it}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,g){df.set(it,g),fa(g,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,g,et){var ot=it.type||"unknown-event";it.currentTarget=et,Ub(ot,g,void 0,it),it.currentTarget=null}function se(it,g){g=(g&4)!==0;for(var et=0;et<it.length;et++){var ot=it[et],ut=ot.event;ot=ot.listeners;e:{var ct=void 0;if(g)for(var dt=ot.length-1;0<=dt;dt--){var ft=ot[dt],St=ft.instance,kt=ft.currentTarget;if(ft=ft.listener,St!==ct&&ut.isPropagationStopped())break e;nf(ut,ft,kt),ct=St}else for(dt=0;dt<ot.length;dt++){if(ft=ot[dt],St=ft.instance,kt=ft.currentTarget,ft=ft.listener,St!==ct&&ut.isPropagationStopped())break e;nf(ut,ft,kt),ct=St}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$1(it,g){var et=g[of];et===void 0&&(et=g[of]=new Set);var ot=it+"__bubble";et.has(ot)||(pf(g,it,2,!1),et.add(ot))}function qf(it,g,et){var ot=0;g&&(ot|=4),pf(et,it,ot,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,it),qf(et,!0,it))});var g=it.nodeType===9?it:it.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(it,g,et,ot){switch(jd(g)){case 1:var ut=ed;break;case 4:ut=gd;break;default:ut=fd}et=ut.bind(null,g,et,it),ut=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(ut=!0),ot?ut!==void 0?it.addEventListener(g,et,{capture:!0,passive:ut}):it.addEventListener(g,et,!0):ut!==void 0?it.addEventListener(g,et,{passive:ut}):it.addEventListener(g,et,!1)}function hd(it,g,et,ot,ut){var ct=ot;if(!(g&1)&&!(g&2)&&ot!==null)e:for(;;){if(ot===null)return;var dt=ot.tag;if(dt===3||dt===4){var ft=ot.stateNode.containerInfo;if(ft===ut||ft.nodeType===8&&ft.parentNode===ut)break;if(dt===4)for(dt=ot.return;dt!==null;){var St=dt.tag;if((St===3||St===4)&&(St=dt.stateNode.containerInfo,St===ut||St.nodeType===8&&St.parentNode===ut))return;dt=dt.return}for(;ft!==null;){if(dt=Wc(ft),dt===null)return;if(St=dt.tag,St===5||St===6){ot=ct=dt;continue e}ft=ft.parentNode}}ot=ot.return}Jb(function(){var kt=ct,Tt=xb(et),Rt=[];e:{var jt=df.get(it);if(jt!==void 0){var Ft=td,Bt=it;switch(it){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":Ft=Rd;break;case"focusin":Bt="focus",Ft=Fd;break;case"focusout":Bt="blur",Ft=Fd;break;case"beforeblur":case"afterblur":Ft=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ft=Vd;break;case $e$1:case af:case bf:Ft=Hd;break;case cf:Ft=Xd;break;case"scroll":Ft=vd;break;case"wheel":Ft=Zd;break;case"copy":case"cut":case"paste":Ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ft=Td}var Ht=(g&4)!==0,Yt=!Ht&&it==="scroll",zt=Ht?jt!==null?jt+"Capture":null:jt;Ht=[];for(var Kt=kt,en;Kt!==null;){en=Kt;var tn=en.stateNode;if(en.tag===5&&tn!==null&&(en=tn,zt!==null&&(tn=Kb(Kt,zt),tn!=null&&Ht.push(tf(Kt,tn,en)))),Yt)break;Kt=Kt.return}0<Ht.length&&(jt=new Ft(jt,Bt,null,et,Tt),Rt.push({event:jt,listeners:Ht}))}}if(!(g&7)){e:{if(jt=it==="mouseover"||it==="pointerover",Ft=it==="mouseout"||it==="pointerout",jt&&et!==wb&&(Bt=et.relatedTarget||et.fromElement)&&(Wc(Bt)||Bt[uf]))break e;if((Ft||jt)&&(jt=Tt.window===Tt?Tt:(jt=Tt.ownerDocument)?jt.defaultView||jt.parentWindow:window,Ft?(Bt=et.relatedTarget||et.toElement,Ft=kt,Bt=Bt?Wc(Bt):null,Bt!==null&&(Yt=Vb(Bt),Bt!==Yt||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Ft=null,Bt=kt),Ft!==Bt)){if(Ht=Bd,tn="onMouseLeave",zt="onMouseEnter",Kt="mouse",(it==="pointerout"||it==="pointerover")&&(Ht=Td,tn="onPointerLeave",zt="onPointerEnter",Kt="pointer"),Yt=Ft==null?jt:ue$1(Ft),en=Bt==null?jt:ue$1(Bt),jt=new Ht(tn,Kt+"leave",Ft,et,Tt),jt.target=Yt,jt.relatedTarget=en,tn=null,Wc(Tt)===kt&&(Ht=new Ht(zt,Kt+"enter",Bt,et,Tt),Ht.target=en,Ht.relatedTarget=Yt,tn=Ht),Yt=tn,Ft&&Bt)t:{for(Ht=Ft,zt=Bt,Kt=0,en=Ht;en;en=vf(en))Kt++;for(en=0,tn=zt;tn;tn=vf(tn))en++;for(;0<Kt-en;)Ht=vf(Ht),Kt--;for(;0<en-Kt;)zt=vf(zt),en--;for(;Kt--;){if(Ht===zt||zt!==null&&Ht===zt.alternate)break t;Ht=vf(Ht),zt=vf(zt)}Ht=null}else Ht=null;Ft!==null&&wf(Rt,jt,Ft,Ht,!1),Bt!==null&&Yt!==null&&wf(Rt,Yt,Bt,Ht,!0)}}e:{if(jt=kt?ue$1(kt):window,Ft=jt.nodeName&&jt.nodeName.toLowerCase(),Ft==="select"||Ft==="input"&&jt.type==="file")var on=ve;else if(me$1(jt))if(we$1)on=Fe$1;else{on=De$1;var an=Ce}else(Ft=jt.nodeName)&&Ft.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(on=Ee);if(on&&(on=on(it,kt))){ne(Rt,on,et,Tt);break e}an&&an(it,jt,kt),it==="focusout"&&(an=jt._wrapperState)&&an.controlled&&jt.type==="number"&&cb(jt,"number",jt.value)}switch(an=kt?ue$1(kt):window,it){case"focusin":(me$1(an)||an.contentEditable==="true")&&(Qe=an,Re=kt,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(Rt,et,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(Rt,et,Tt)}var un;if(ae)e:{switch(it){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else ie$2?ge(it,et)&&(dn="onCompositionEnd"):it==="keydown"&&et.keyCode===229&&(dn="onCompositionStart");dn&&(de$1&&et.locale!=="ko"&&(ie$2||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&ie$2&&(un=nd()):(kd=Tt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),an=oe(kt,dn),0<an.length&&(dn=new Ld(dn,it,null,et,Tt),Rt.push({event:dn,listeners:an}),un?dn.data=un:(un=he$1(et),un!==null&&(dn.data=un)))),(un=ce?je$1(it,et):ke$1(it,et))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Tt=new Ld("onBeforeInput","beforeinput",null,et,Tt),Rt.push({event:Tt,listeners:kt}),Tt.data=un))}se(Rt,g)})}function tf(it,g,et){return{instance:it,listener:g,currentTarget:et}}function oe(it,g){for(var et=g+"Capture",ot=[];it!==null;){var ut=it,ct=ut.stateNode;ut.tag===5&&ct!==null&&(ut=ct,ct=Kb(it,et),ct!=null&&ot.unshift(tf(it,ct,ut)),ct=Kb(it,g),ct!=null&&ot.push(tf(it,ct,ut))),it=it.return}return ot}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,g,et,ot,ut){for(var ct=g._reactName,dt=[];et!==null&&et!==ot;){var ft=et,St=ft.alternate,kt=ft.stateNode;if(St!==null&&St===ot)break;ft.tag===5&&kt!==null&&(ft=kt,ut?(St=Kb(et,ct),St!=null&&dt.unshift(tf(et,St,ft))):ut||(St=Kb(et,ct),St!=null&&dt.push(tf(et,St,ft)))),et=et.return}dt.length!==0&&it.push({event:g,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,g,et){if(g=zf(g),zf(it)!==g&&et)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,g){return it==="textarea"||it==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,g){var et=g,ot=0;do{var ut=et.nextSibling;if(it.removeChild(et),ut&&ut.nodeType===8)if(et=ut.data,et==="/$"){if(ot===0){it.removeChild(ut),bd(g);return}ot--}else et!=="$"&&et!=="$?"&&et!=="$!"||ot++;et=ut}while(et);bd(g)}function Lf(it){for(;it!=null;it=it.nextSibling){var g=it.nodeType;if(g===1||g===3)break;if(g===8){if(g=it.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="$"||et==="$!"||et==="$?"){if(g===0)return it;g--}else et==="/$"&&g++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var g=it[Of];if(g)return g;for(var et=it.parentNode;et;){if(g=et[uf]||et[Of]){if(et=g.alternate,g.child!==null||et!==null&&et.child!==null)for(it=Mf(it);it!==null;){if(et=it[Of])return et;it=Mf(it)}return g}it=et,et=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue$1(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$3(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$2(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,g){Tf++,Sf[Tf]=it.current,it.current=g}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,g){var et=it.type.contextTypes;if(!et)return Vf;var ot=it.stateNode;if(ot&&ot.__reactInternalMemoizedUnmaskedChildContext===g)return ot.__reactInternalMemoizedMaskedChildContext;var ut={},ct;for(ct in et)ut[ct]=g[ct];return ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=g,it.__reactInternalMemoizedMaskedChildContext=ut),ut}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(it,g,et){if(H$3.current!==Vf)throw Error(p$3(168));G$1(H$3,g),G$1(Wf,et)}function bg(it,g,et){var ot=it.stateNode;if(g=g.childContextTypes,typeof ot.getChildContext!="function")return et;ot=ot.getChildContext();for(var ut in ot)if(!(ut in g))throw Error(p$3(108,Ra(it)||"Unknown",ut));return A$2({},et,ot)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$1(H$3,it),G$1(Wf,Wf.current),!0}function dg(it,g,et){var ot=it.stateNode;if(!ot)throw Error(p$3(169));et?(it=bg(it,g,Xf),ot.__reactInternalMemoizedMergedChildContext=it,E$2(Wf),E$2(H$3),G$1(H$3,it)):E$2(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,g=C$4;try{var et=eg;for(C$4=1;it<et.length;it++){var ot=et[it];do ot=ot(!0);while(ot!==null)}eg=null,fg=!1}catch(ut){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),ut}finally{C$4=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,g){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=g}function ug(it,g,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var ot=rg;it=sg;var ut=32-oc(ot)-1;ot&=~(1<<ut),et+=1;var ct=32-oc(g)+ut;if(30<ct){var dt=ut-ut%5;ct=(ot&(1<<dt)-1).toString(32),ot>>=dt,ut-=dt,rg=1<<32-oc(g)+ut|et<<ut|ot,sg=ct+it}else rg=1<<ct|et<<ut|ot,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(it,g){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=g,et.return=it,g=it.deletions,g===null?(it.deletions=[et],it.flags|=16):g.push(et)}function Cg(it,g){switch(it.tag){case 5:var et=it.type;return g=g.nodeType!==1||et.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(it.stateNode=g,xg=it,yg=Lf(g.firstChild),!0):!1;case 6:return g=it.pendingProps===""||g.nodeType!==3?null:g,g!==null?(it.stateNode=g,xg=it,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(et=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:g,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=g,et.return=it,it.child=et,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$4){var g=yg;if(g){var et=g;if(!Cg(it,g)){if(Dg(it))throw Error(p$3(418));g=Lf(et.nextSibling);var ot=xg;g&&Cg(it,g)?Ag(ot,et):(it.flags=it.flags&-4097|2,I$4=!1,xg=it)}}else{if(Dg(it))throw Error(p$3(418));it.flags=it.flags&-4097|2,I$4=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$4)return Fg(it),I$4=!0,!1;var g;if((g=it.tag!==3)&&!(g=it.tag!==5)&&(g=it.type,g=g!=="head"&&g!=="body"&&!Ef(it.type,it.memoizedProps)),g&&(g=yg)){if(Dg(it))throw Hg(),Error(p$3(418));for(;g;)Ag(it,g),g=Lf(g.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));e:{for(it=it.nextSibling,g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="/$"){if(g===0){yg=Lf(it.nextSibling);break e}g--}else et!=="$"&&et!=="$!"&&et!=="$?"||g++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,g,et){if(it=et.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$3(309));var ot=et.stateNode}if(!ot)throw Error(p$3(147,it));var ut=ot,ct=""+it;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===ct?g.ref:(g=function(dt){var ft=ut.refs;dt===null?delete ft[ct]:ft[ct]=dt},g._stringRef=ct,g)}if(typeof it!="string")throw Error(p$3(284));if(!et._owner)throw Error(p$3(290,it))}return it}function Mg(it,g){throw it=Object.prototype.toString.call(g),Error(p$3(31,it==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":it))}function Ng(it){var g=it._init;return g(it._payload)}function Og(it){function g(zt,Kt){if(it){var en=zt.deletions;en===null?(zt.deletions=[Kt],zt.flags|=16):en.push(Kt)}}function et(zt,Kt){if(!it)return null;for(;Kt!==null;)g(zt,Kt),Kt=Kt.sibling;return null}function ot(zt,Kt){for(zt=new Map;Kt!==null;)Kt.key!==null?zt.set(Kt.key,Kt):zt.set(Kt.index,Kt),Kt=Kt.sibling;return zt}function ut(zt,Kt){return zt=Pg(zt,Kt),zt.index=0,zt.sibling=null,zt}function ct(zt,Kt,en){return zt.index=en,it?(en=zt.alternate,en!==null?(en=en.index,en<Kt?(zt.flags|=2,Kt):en):(zt.flags|=2,Kt)):(zt.flags|=1048576,Kt)}function dt(zt){return it&&zt.alternate===null&&(zt.flags|=2),zt}function ft(zt,Kt,en,tn){return Kt===null||Kt.tag!==6?(Kt=Qg(en,zt.mode,tn),Kt.return=zt,Kt):(Kt=ut(Kt,en),Kt.return=zt,Kt)}function St(zt,Kt,en,tn){var on=en.type;return on===ya?Tt(zt,Kt,en.props.children,tn,en.key):Kt!==null&&(Kt.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Ha&&Ng(on)===Kt.type)?(tn=ut(Kt,en.props),tn.ref=Lg(zt,Kt,en),tn.return=zt,tn):(tn=Rg(en.type,en.key,en.props,null,zt.mode,tn),tn.ref=Lg(zt,Kt,en),tn.return=zt,tn)}function kt(zt,Kt,en,tn){return Kt===null||Kt.tag!==4||Kt.stateNode.containerInfo!==en.containerInfo||Kt.stateNode.implementation!==en.implementation?(Kt=Sg(en,zt.mode,tn),Kt.return=zt,Kt):(Kt=ut(Kt,en.children||[]),Kt.return=zt,Kt)}function Tt(zt,Kt,en,tn,on){return Kt===null||Kt.tag!==7?(Kt=Tg(en,zt.mode,tn,on),Kt.return=zt,Kt):(Kt=ut(Kt,en),Kt.return=zt,Kt)}function Rt(zt,Kt,en){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number")return Kt=Qg(""+Kt,zt.mode,en),Kt.return=zt,Kt;if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case va:return en=Rg(Kt.type,Kt.key,Kt.props,null,zt.mode,en),en.ref=Lg(zt,null,Kt),en.return=zt,en;case wa:return Kt=Sg(Kt,zt.mode,en),Kt.return=zt,Kt;case Ha:var tn=Kt._init;return Rt(zt,tn(Kt._payload),en)}if(eb(Kt)||Ka(Kt))return Kt=Tg(Kt,zt.mode,en,null),Kt.return=zt,Kt;Mg(zt,Kt)}return null}function jt(zt,Kt,en,tn){var on=Kt!==null?Kt.key:null;if(typeof en=="string"&&en!==""||typeof en=="number")return on!==null?null:ft(zt,Kt,""+en,tn);if(typeof en=="object"&&en!==null){switch(en.$$typeof){case va:return en.key===on?St(zt,Kt,en,tn):null;case wa:return en.key===on?kt(zt,Kt,en,tn):null;case Ha:return on=en._init,jt(zt,Kt,on(en._payload),tn)}if(eb(en)||Ka(en))return on!==null?null:Tt(zt,Kt,en,tn,null);Mg(zt,en)}return null}function Ft(zt,Kt,en,tn,on){if(typeof tn=="string"&&tn!==""||typeof tn=="number")return zt=zt.get(en)||null,ft(Kt,zt,""+tn,on);if(typeof tn=="object"&&tn!==null){switch(tn.$$typeof){case va:return zt=zt.get(tn.key===null?en:tn.key)||null,St(Kt,zt,tn,on);case wa:return zt=zt.get(tn.key===null?en:tn.key)||null,kt(Kt,zt,tn,on);case Ha:var an=tn._init;return Ft(zt,Kt,en,an(tn._payload),on)}if(eb(tn)||Ka(tn))return zt=zt.get(en)||null,Tt(Kt,zt,tn,on,null);Mg(Kt,tn)}return null}function Bt(zt,Kt,en,tn){for(var on=null,an=null,un=Kt,dn=Kt=0,Sn=null;un!==null&&dn<en.length;dn++){un.index>dn?(Sn=un,un=null):Sn=un.sibling;var mn=jt(zt,un,en[dn],tn);if(mn===null){un===null&&(un=Sn);break}it&&un&&mn.alternate===null&&g(zt,un),Kt=ct(mn,Kt,dn),an===null?on=mn:an.sibling=mn,an=mn,un=Sn}if(dn===en.length)return et(zt,un),I$4&&tg(zt,dn),on;if(un===null){for(;dn<en.length;dn++)un=Rt(zt,en[dn],tn),un!==null&&(Kt=ct(un,Kt,dn),an===null?on=un:an.sibling=un,an=un);return I$4&&tg(zt,dn),on}for(un=ot(zt,un);dn<en.length;dn++)Sn=Ft(un,zt,dn,en[dn],tn),Sn!==null&&(it&&Sn.alternate!==null&&un.delete(Sn.key===null?dn:Sn.key),Kt=ct(Sn,Kt,dn),an===null?on=Sn:an.sibling=Sn,an=Sn);return it&&un.forEach(function(bn){return g(zt,bn)}),I$4&&tg(zt,dn),on}function Ht(zt,Kt,en,tn){var on=Ka(en);if(typeof on!="function")throw Error(p$3(150));if(en=on.call(en),en==null)throw Error(p$3(151));for(var an=on=null,un=Kt,dn=Kt=0,Sn=null,mn=en.next();un!==null&&!mn.done;dn++,mn=en.next()){un.index>dn?(Sn=un,un=null):Sn=un.sibling;var bn=jt(zt,un,mn.value,tn);if(bn===null){un===null&&(un=Sn);break}it&&un&&bn.alternate===null&&g(zt,un),Kt=ct(bn,Kt,dn),an===null?on=bn:an.sibling=bn,an=bn,un=Sn}if(mn.done)return et(zt,un),I$4&&tg(zt,dn),on;if(un===null){for(;!mn.done;dn++,mn=en.next())mn=Rt(zt,mn.value,tn),mn!==null&&(Kt=ct(mn,Kt,dn),an===null?on=mn:an.sibling=mn,an=mn);return I$4&&tg(zt,dn),on}for(un=ot(zt,un);!mn.done;dn++,mn=en.next())mn=Ft(un,zt,dn,mn.value,tn),mn!==null&&(it&&mn.alternate!==null&&un.delete(mn.key===null?dn:mn.key),Kt=ct(mn,Kt,dn),an===null?on=mn:an.sibling=mn,an=mn);return it&&un.forEach(function(En){return g(zt,En)}),I$4&&tg(zt,dn),on}function Yt(zt,Kt,en,tn){if(typeof en=="object"&&en!==null&&en.type===ya&&en.key===null&&(en=en.props.children),typeof en=="object"&&en!==null){switch(en.$$typeof){case va:e:{for(var on=en.key,an=Kt;an!==null;){if(an.key===on){if(on=en.type,on===ya){if(an.tag===7){et(zt,an.sibling),Kt=ut(an,en.props.children),Kt.return=zt,zt=Kt;break e}}else if(an.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Ha&&Ng(on)===an.type){et(zt,an.sibling),Kt=ut(an,en.props),Kt.ref=Lg(zt,an,en),Kt.return=zt,zt=Kt;break e}et(zt,an);break}else g(zt,an);an=an.sibling}en.type===ya?(Kt=Tg(en.props.children,zt.mode,tn,en.key),Kt.return=zt,zt=Kt):(tn=Rg(en.type,en.key,en.props,null,zt.mode,tn),tn.ref=Lg(zt,Kt,en),tn.return=zt,zt=tn)}return dt(zt);case wa:e:{for(an=en.key;Kt!==null;){if(Kt.key===an)if(Kt.tag===4&&Kt.stateNode.containerInfo===en.containerInfo&&Kt.stateNode.implementation===en.implementation){et(zt,Kt.sibling),Kt=ut(Kt,en.children||[]),Kt.return=zt,zt=Kt;break e}else{et(zt,Kt);break}else g(zt,Kt);Kt=Kt.sibling}Kt=Sg(en,zt.mode,tn),Kt.return=zt,zt=Kt}return dt(zt);case Ha:return an=en._init,Yt(zt,Kt,an(en._payload),tn)}if(eb(en))return Bt(zt,Kt,en,tn);if(Ka(en))return Ht(zt,Kt,en,tn);Mg(zt,en)}return typeof en=="string"&&en!==""||typeof en=="number"?(en=""+en,Kt!==null&&Kt.tag===6?(et(zt,Kt.sibling),Kt=ut(Kt,en),Kt.return=zt,zt=Kt):(et(zt,Kt),Kt=Qg(en,zt.mode,tn),Kt.return=zt,zt=Kt),dt(zt)):et(zt,Kt)}return Yt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(it){var g=Wg.current;E$2(Wg),it._currentValue=g}function bh(it,g,et){for(;it!==null;){var ot=it.alternate;if((it.childLanes&g)!==g?(it.childLanes|=g,ot!==null&&(ot.childLanes|=g)):ot!==null&&(ot.childLanes&g)!==g&&(ot.childLanes|=g),it===et)break;it=it.return}}function ch(it,g){Xg=it,Zg=Yg=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&g&&(dh=!0),it.firstContext=null)}function eh(it){var g=it._currentValue;if(Zg!==it)if(it={context:it,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=it,Xg.dependencies={lanes:0,firstContext:it}}else Yg=Yg.next=it;return g}var fh=null;function gh(it){fh===null?fh=[it]:fh.push(it)}function hh(it,g,et,ot){var ut=g.interleaved;return ut===null?(et.next=et,gh(g)):(et.next=ut.next,ut.next=et),g.interleaved=et,ih(it,ot)}function ih(it,g){it.lanes|=g;var et=it.alternate;for(et!==null&&(et.lanes|=g),et=it,it=it.return;it!==null;)it.childLanes|=g,et=it.alternate,et!==null&&(et.childLanes|=g),et=it,it=it.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(it,g){it=it.updateQueue,g.updateQueue===it&&(g.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function mh(it,g){return{eventTime:it,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(it,g,et){var ot=it.updateQueue;if(ot===null)return null;if(ot=ot.shared,K$2&2){var ut=ot.pending;return ut===null?g.next=g:(g.next=ut.next,ut.next=g),ot.pending=g,ih(it,et)}return ut=ot.interleaved,ut===null?(g.next=g,gh(ot)):(g.next=ut.next,ut.next=g),ot.interleaved=g,ih(it,et)}function oh(it,g,et){if(g=g.updateQueue,g!==null&&(g=g.shared,(et&4194240)!==0)){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}function ph(it,g){var et=it.updateQueue,ot=it.alternate;if(ot!==null&&(ot=ot.updateQueue,et===ot)){var ut=null,ct=null;if(et=et.firstBaseUpdate,et!==null){do{var dt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};ct===null?ut=ct=dt:ct=ct.next=dt,et=et.next}while(et!==null);ct===null?ut=ct=g:ct=ct.next=g}else ut=ct=g;et={baseState:ot.baseState,firstBaseUpdate:ut,lastBaseUpdate:ct,shared:ot.shared,effects:ot.effects},it.updateQueue=et;return}it=et.lastBaseUpdate,it===null?et.firstBaseUpdate=g:it.next=g,et.lastBaseUpdate=g}function qh(it,g,et,ot){var ut=it.updateQueue;jh=!1;var ct=ut.firstBaseUpdate,dt=ut.lastBaseUpdate,ft=ut.shared.pending;if(ft!==null){ut.shared.pending=null;var St=ft,kt=St.next;St.next=null,dt===null?ct=kt:dt.next=kt,dt=St;var Tt=it.alternate;Tt!==null&&(Tt=Tt.updateQueue,ft=Tt.lastBaseUpdate,ft!==dt&&(ft===null?Tt.firstBaseUpdate=kt:ft.next=kt,Tt.lastBaseUpdate=St))}if(ct!==null){var Rt=ut.baseState;dt=0,Tt=kt=St=null,ft=ct;do{var jt=ft.lane,Ft=ft.eventTime;if((ot&jt)===jt){Tt!==null&&(Tt=Tt.next={eventTime:Ft,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var Bt=it,Ht=ft;switch(jt=g,Ft=et,Ht.tag){case 1:if(Bt=Ht.payload,typeof Bt=="function"){Rt=Bt.call(Ft,Rt,jt);break e}Rt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Ht.payload,jt=typeof Bt=="function"?Bt.call(Ft,Rt,jt):Bt,jt==null)break e;Rt=A$2({},Rt,jt);break e;case 2:jh=!0}}ft.callback!==null&&ft.lane!==0&&(it.flags|=64,jt=ut.effects,jt===null?ut.effects=[ft]:jt.push(ft))}else Ft={eventTime:Ft,lane:jt,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Tt===null?(kt=Tt=Ft,St=Rt):Tt=Tt.next=Ft,dt|=jt;if(ft=ft.next,ft===null){if(ft=ut.shared.pending,ft===null)break;jt=ft,ft=jt.next,jt.next=null,ut.lastBaseUpdate=jt,ut.shared.pending=null}}while(1);if(Tt===null&&(St=Rt),ut.baseState=St,ut.firstBaseUpdate=kt,ut.lastBaseUpdate=Tt,g=ut.shared.interleaved,g!==null){ut=g;do dt|=ut.lane,ut=ut.next;while(ut!==g)}else ct===null&&(ut.shared.lanes=0);rh|=dt,it.lanes=dt,it.memoizedState=Rt}}function sh(it,g,et){if(it=g.effects,g.effects=null,it!==null)for(g=0;g<it.length;g++){var ot=it[g],ut=ot.callback;if(ut!==null){if(ot.callback=null,ot=et,typeof ut!="function")throw Error(p$3(191,ut));ut.call(ot)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(it){if(it===th)throw Error(p$3(174));return it}function yh(it,g){switch(G$1(wh,g),G$1(vh$1,it),G$1(uh,th),it=g.nodeType,it){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:it=it===8?g.parentNode:g,g=it.namespaceURI||null,it=it.tagName,g=lb(g,it)}E$2(uh),G$1(uh,g)}function zh(){E$2(uh),E$2(vh$1),E$2(wh)}function Ah(it){xh(wh.current);var g=xh(uh.current),et=lb(g,it.type);g!==et&&(G$1(vh$1,it),G$1(uh,et))}function Bh(it){vh$1.current===it&&(E$2(uh),E$2(vh$1))}var L$3=Uf(0);function Ch(it){for(var g=it;g!==null;){if(g.tag===13){var et=g.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var it=0;it<Dh.length;it++)Dh[it]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$2=null,O$4=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(it,g){if(g===null)return!1;for(var et=0;et<g.length&&et<it.length;et++)if(!He$2(it[et],g[et]))return!1;return!0}function Nh(it,g,et,ot,ut,ct){if(Hh=ct,M$3=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=it===null||it.memoizedState===null?Oh:Ph,it=et(ot,ut),Jh){ct=0;do{if(Jh=!1,Kh=0,25<=ct)throw Error(p$3(301));ct+=1,O$4=N$2=null,g.updateQueue=null,Fh.current=Qh,it=et(ot,ut)}while(Jh)}if(Fh.current=Rh,g=N$2!==null&&N$2.next!==null,Hh=0,O$4=N$2=M$3=null,Ih=!1,g)throw Error(p$3(300));return it}function Sh(){var it=Kh!==0;return Kh=0,it}function Th(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it,O$4}function Uh(){if(N$2===null){var it=M$3.alternate;it=it!==null?it.memoizedState:null}else it=N$2.next;var g=O$4===null?M$3.memoizedState:O$4.next;if(g!==null)O$4=g,N$2=it;else{if(it===null)throw Error(p$3(310));N$2=it,it={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it}return O$4}function Vh(it,g){return typeof g=="function"?g(it):g}function Wh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=N$2,ut=ot.baseQueue,ct=et.pending;if(ct!==null){if(ut!==null){var dt=ut.next;ut.next=ct.next,ct.next=dt}ot.baseQueue=ut=ct,et.pending=null}if(ut!==null){ct=ut.next,ot=ot.baseState;var ft=dt=null,St=null,kt=ct;do{var Tt=kt.lane;if((Hh&Tt)===Tt)St!==null&&(St=St.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ot=kt.hasEagerState?kt.eagerState:it(ot,kt.action);else{var Rt={lane:Tt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};St===null?(ft=St=Rt,dt=ot):St=St.next=Rt,M$3.lanes|=Tt,rh|=Tt}kt=kt.next}while(kt!==null&&kt!==ct);St===null?dt=ot:St.next=ft,He$2(ot,g.memoizedState)||(dh=!0),g.memoizedState=ot,g.baseState=dt,g.baseQueue=St,et.lastRenderedState=ot}if(it=et.interleaved,it!==null){ut=it;do ct=ut.lane,M$3.lanes|=ct,rh|=ct,ut=ut.next;while(ut!==it)}else ut===null&&(et.lanes=0);return[g.memoizedState,et.dispatch]}function Xh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=et.dispatch,ut=et.pending,ct=g.memoizedState;if(ut!==null){et.pending=null;var dt=ut=ut.next;do ct=it(ct,dt.action),dt=dt.next;while(dt!==ut);He$2(ct,g.memoizedState)||(dh=!0),g.memoizedState=ct,g.baseQueue===null&&(g.baseState=ct),et.lastRenderedState=ct}return[ct,ot]}function Yh(){}function Zh(it,g){var et=M$3,ot=Uh(),ut=g(),ct=!He$2(ot.memoizedState,ut);if(ct&&(ot.memoizedState=ut,dh=!0),ot=ot.queue,$h(ai.bind(null,et,ot,it),[it]),ot.getSnapshot!==g||ct||O$4!==null&&O$4.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,ot,ut,g),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(et,g,ut)}return ut}function di(it,g,et){it.flags|=16384,it={getSnapshot:g,value:et},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.stores=[it]):(et=g.stores,et===null?g.stores=[it]:et.push(it))}function ci(it,g,et,ot){g.value=et,g.getSnapshot=ot,ei(g)&&fi(it)}function ai(it,g,et){return et(function(){ei(g)&&fi(it)})}function ei(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!He$2(it,et)}catch{return!0}}function fi(it){var g=ih(it,1);g!==null&&gi(g,it,1,-1)}function hi(it){var g=Th();return typeof it=="function"&&(it=it()),g.memoizedState=g.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:it},g.queue=it,it=it.dispatch=ii.bind(null,M$3,it),[g.memoizedState,it]}function bi(it,g,et,ot){return it={tag:it,create:g,destroy:et,deps:ot,next:null},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.lastEffect=it.next=it):(et=g.lastEffect,et===null?g.lastEffect=it.next=it:(ot=et.next,et.next=it,it.next=ot,g.lastEffect=it)),it}function ji(){return Uh().memoizedState}function ki(it,g,et,ot){var ut=Th();M$3.flags|=it,ut.memoizedState=bi(1|g,et,void 0,ot===void 0?null:ot)}function li(it,g,et,ot){var ut=Uh();ot=ot===void 0?null:ot;var ct=void 0;if(N$2!==null){var dt=N$2.memoizedState;if(ct=dt.destroy,ot!==null&&Mh(ot,dt.deps)){ut.memoizedState=bi(g,et,ct,ot);return}}M$3.flags|=it,ut.memoizedState=bi(1|g,et,ct,ot)}function mi(it,g){return ki(8390656,8,it,g)}function $h(it,g){return li(2048,8,it,g)}function ni(it,g){return li(4,2,it,g)}function oi(it,g){return li(4,4,it,g)}function pi(it,g){if(typeof g=="function")return it=it(),g(it),function(){g(null)};if(g!=null)return it=it(),g.current=it,function(){g.current=null}}function qi(it,g,et){return et=et!=null?et.concat([it]):null,li(4,4,pi.bind(null,g,it),et)}function ri(){}function si(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(et.memoizedState=[it,g],it)}function ti(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(it=it(),et.memoizedState=[it,g],it)}function ui(it,g,et){return Hh&21?(He$2(et,g)||(et=yc(),M$3.lanes|=et,rh|=et,it.baseState=!0),g):(it.baseState&&(it.baseState=!1,dh=!0),it.memoizedState=et)}function vi(it,g){var et=C$4;C$4=et!==0&&4>et?et:4,it(!0);var ot=Gh.transition;Gh.transition={};try{it(!1),g()}finally{C$4=et,Gh.transition=ot}}function wi(){return Uh().memoizedState}function xi(it,g,et){var ot=yi(it);if(et={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null},zi(it))Ai(g,et);else if(et=hh(it,g,et,ot),et!==null){var ut=R$3();gi(et,it,ot,ut),Bi(et,g,ot)}}function ii(it,g,et){var ot=yi(it),ut={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(it))Ai(g,ut);else{var ct=it.alternate;if(it.lanes===0&&(ct===null||ct.lanes===0)&&(ct=g.lastRenderedReducer,ct!==null))try{var dt=g.lastRenderedState,ft=ct(dt,et);if(ut.hasEagerState=!0,ut.eagerState=ft,He$2(ft,dt)){var St=g.interleaved;St===null?(ut.next=ut,gh(g)):(ut.next=St.next,St.next=ut),g.interleaved=ut;return}}catch{}finally{}et=hh(it,g,ut,ot),et!==null&&(ut=R$3(),gi(et,it,ot,ut),Bi(et,g,ot))}}function zi(it){var g=it.alternate;return it===M$3||g!==null&&g===M$3}function Ai(it,g){Jh=Ih=!0;var et=it.pending;et===null?g.next=g:(g.next=et.next,et.next=g),it.pending=g}function Bi(it,g,et){if(et&4194240){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(it,g){return Th().memoizedState=[it,g===void 0?null:g],it},useContext:eh,useEffect:mi,useImperativeHandle:function(it,g,et){return et=et!=null?et.concat([it]):null,ki(4194308,4,pi.bind(null,g,it),et)},useLayoutEffect:function(it,g){return ki(4194308,4,it,g)},useInsertionEffect:function(it,g){return ki(4,2,it,g)},useMemo:function(it,g){var et=Th();return g=g===void 0?null:g,it=it(),et.memoizedState=[it,g],it},useReducer:function(it,g,et){var ot=Th();return g=et!==void 0?et(g):g,ot.memoizedState=ot.baseState=g,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:g},ot.queue=it,it=it.dispatch=xi.bind(null,M$3,it),[ot.memoizedState,it]},useRef:function(it){var g=Th();return it={current:it},g.memoizedState=it},useState:hi,useDebugValue:ri,useDeferredValue:function(it){return Th().memoizedState=it},useTransition:function(){var it=hi(!1),g=it[0];return it=vi.bind(null,it[1]),Th().memoizedState=it,[g,it]},useMutableSource:function(){},useSyncExternalStore:function(it,g,et){var ot=M$3,ut=Th();if(I$4){if(et===void 0)throw Error(p$3(407));et=et()}else{if(et=g(),Q$1===null)throw Error(p$3(349));Hh&30||di(ot,g,et)}ut.memoizedState=et;var ct={value:et,getSnapshot:g};return ut.queue=ct,mi(ai.bind(null,ot,ct,it),[it]),ot.flags|=2048,bi(9,ci.bind(null,ot,ct,et,g),void 0,null),et},useId:function(){var it=Th(),g=Q$1.identifierPrefix;if(I$4){var et=sg,ot=rg;et=(ot&~(1<<32-oc(ot)-1)).toString(32)+et,g=":"+g+"R"+et,et=Kh++,0<et&&(g+="H"+et.toString(32)),g+=":"}else et=Lh++,g=":"+g+"r"+et.toString(32)+":";return it.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Wh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return N$2===null?g.memoizedState=it:ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Xh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(it,g){if(it&&it.defaultProps){g=A$2({},g),it=it.defaultProps;for(var et in it)g[et]===void 0&&(g[et]=it[et]);return g}return g}function Di(it,g,et,ot){g=it.memoizedState,et=et(ot,g),et=et==null?g:A$2({},g,et),it.memoizedState=et,it.lanes===0&&(it.updateQueue.baseState=et)}var Ei={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ut=yi(it),ct=mh(ot,ut);ct.payload=g,et!=null&&(ct.callback=et),g=nh(it,ct,ut),g!==null&&(gi(g,it,ut,ot),oh(g,it,ut))},enqueueReplaceState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ut=yi(it),ct=mh(ot,ut);ct.tag=1,ct.payload=g,et!=null&&(ct.callback=et),g=nh(it,ct,ut),g!==null&&(gi(g,it,ut,ot),oh(g,it,ut))},enqueueForceUpdate:function(it,g){it=it._reactInternals;var et=R$3(),ot=yi(it),ut=mh(et,ot);ut.tag=2,g!=null&&(ut.callback=g),g=nh(it,ut,ot),g!==null&&(gi(g,it,ot,et),oh(g,it,ot))}};function Fi(it,g,et,ot,ut,ct,dt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(ot,ct,dt):g.prototype&&g.prototype.isPureReactComponent?!Ie$2(et,ot)||!Ie$2(ut,ct):!0}function Gi(it,g,et){var ot=!1,ut=Vf,ct=g.contextType;return typeof ct=="object"&&ct!==null?ct=eh(ct):(ut=Zf(g)?Xf:H$3.current,ot=g.contextTypes,ct=(ot=ot!=null)?Yf(it,ut):Vf),g=new g(et,ct),it.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,it.stateNode=g,g._reactInternals=it,ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=ut,it.__reactInternalMemoizedMaskedChildContext=ct),g}function Hi(it,g,et,ot){it=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(et,ot),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(et,ot),g.state!==it&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(it,g,et,ot){var ut=it.stateNode;ut.props=et,ut.state=it.memoizedState,ut.refs={},kh(it);var ct=g.contextType;typeof ct=="object"&&ct!==null?ut.context=eh(ct):(ct=Zf(g)?Xf:H$3.current,ut.context=Yf(it,ct)),ut.state=it.memoizedState,ct=g.getDerivedStateFromProps,typeof ct=="function"&&(Di(it,g,ct,et),ut.state=it.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof ut.getSnapshotBeforeUpdate=="function"||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(g=ut.state,typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount(),g!==ut.state&&Ei.enqueueReplaceState(ut,ut.state,null),qh(it,et,ut,ot),ut.state=it.memoizedState),typeof ut.componentDidMount=="function"&&(it.flags|=4194308)}function Ji(it,g){try{var et="",ot=g;do et+=Pa(ot),ot=ot.return;while(ot);var ut=et}catch(ct){ut=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:it,source:g,stack:ut,digest:null}}function Ki(it,g,et){return{value:it,source:null,stack:et??null,digest:g??null}}function Li(it,g){try{console.error(g.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(it,g,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var ot=g.value;return et.callback=function(){Oi||(Oi=!0,Pi=ot),Li(it,g)},et}function Qi(it,g,et){et=mh(-1,et),et.tag=3;var ot=it.type.getDerivedStateFromError;if(typeof ot=="function"){var ut=g.value;et.payload=function(){return ot(ut)},et.callback=function(){Li(it,g)}}var ct=it.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(et.callback=function(){Li(it,g),typeof ot!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var dt=g.stack;this.componentDidCatch(g.value,{componentStack:dt!==null?dt:""})}),et}function Si(it,g,et){var ot=it.pingCache;if(ot===null){ot=it.pingCache=new Mi;var ut=new Set;ot.set(g,ut)}else ut=ot.get(g),ut===void 0&&(ut=new Set,ot.set(g,ut));ut.has(et)||(ut.add(et),it=Ti.bind(null,it,g,et),g.then(it,it))}function Ui(it){do{var g;if((g=it.tag===13)&&(g=it.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return it;it=it.return}while(it!==null);return null}function Vi(it,g,et,ot,ut){return it.mode&1?(it.flags|=65536,it.lanes=ut,it):(it===g?it.flags|=65536:(it.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(g=mh(-1,1),g.tag=2,nh(et,g,1))),et.lanes|=1),it)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(it,g,et,ot){g.child=it===null?Vg(g,null,et,ot):Ug(g,it.child,et,ot)}function Yi(it,g,et,ot,ut){et=et.render;var ct=g.ref;return ch(g,ut),ot=Nh(it,g,et,ot,ct,ut),et=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ut,Zi(it,g,ut)):(I$4&&et&&vg(g),g.flags|=1,Xi(it,g,ot,ut),g.child)}function $i(it,g,et,ot,ut){if(it===null){var ct=et.type;return typeof ct=="function"&&!aj(ct)&&ct.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(g.tag=15,g.type=ct,bj(it,g,ct,ot,ut)):(it=Rg(et.type,null,ot,g,g.mode,ut),it.ref=g.ref,it.return=g,g.child=it)}if(ct=it.child,!(it.lanes&ut)){var dt=ct.memoizedProps;if(et=et.compare,et=et!==null?et:Ie$2,et(dt,ot)&&it.ref===g.ref)return Zi(it,g,ut)}return g.flags|=1,it=Pg(ct,ot),it.ref=g.ref,it.return=g,g.child=it}function bj(it,g,et,ot,ut){if(it!==null){var ct=it.memoizedProps;if(Ie$2(ct,ot)&&it.ref===g.ref)if(dh=!1,g.pendingProps=ot=ct,(it.lanes&ut)!==0)it.flags&131072&&(dh=!0);else return g.lanes=it.lanes,Zi(it,g,ut)}return cj(it,g,et,ot,ut)}function dj(it,g,et){var ot=g.pendingProps,ut=ot.children,ct=it!==null?it.memoizedState:null;if(ot.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=et;else{if(!(et&1073741824))return it=ct!==null?ct.baseLanes|et:et,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:it,cachePool:null,transitions:null},g.updateQueue=null,G$1(ej,fj),fj|=it,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot=ct!==null?ct.baseLanes:et,G$1(ej,fj),fj|=ot}else ct!==null?(ot=ct.baseLanes|et,g.memoizedState=null):ot=et,G$1(ej,fj),fj|=ot;return Xi(it,g,ut,et),g.child}function gj(it,g){var et=g.ref;(it===null&&et!==null||it!==null&&it.ref!==et)&&(g.flags|=512,g.flags|=2097152)}function cj(it,g,et,ot,ut){var ct=Zf(et)?Xf:H$3.current;return ct=Yf(g,ct),ch(g,ut),et=Nh(it,g,et,ot,ct,ut),ot=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ut,Zi(it,g,ut)):(I$4&&ot&&vg(g),g.flags|=1,Xi(it,g,et,ut),g.child)}function hj(it,g,et,ot,ut){if(Zf(et)){var ct=!0;cg(g)}else ct=!1;if(ch(g,ut),g.stateNode===null)ij(it,g),Gi(g,et,ot),Ii(g,et,ot,ut),ot=!0;else if(it===null){var dt=g.stateNode,ft=g.memoizedProps;dt.props=ft;var St=dt.context,kt=et.contextType;typeof kt=="object"&&kt!==null?kt=eh(kt):(kt=Zf(et)?Xf:H$3.current,kt=Yf(g,kt));var Tt=et.getDerivedStateFromProps,Rt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";Rt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==ot||St!==kt)&&Hi(g,dt,ot,kt),jh=!1;var jt=g.memoizedState;dt.state=jt,qh(g,ot,dt,ut),St=g.memoizedState,ft!==ot||jt!==St||Wf.current||jh?(typeof Tt=="function"&&(Di(g,et,Tt,ot),St=g.memoizedState),(ft=jh||Fi(g,et,ft,ot,jt,St,kt))?(Rt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=ot,g.memoizedState=St),dt.props=ot,dt.state=St,dt.context=kt,ot=ft):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),ot=!1)}else{dt=g.stateNode,lh(it,g),ft=g.memoizedProps,kt=g.type===g.elementType?ft:Ci(g.type,ft),dt.props=kt,Rt=g.pendingProps,jt=dt.context,St=et.contextType,typeof St=="object"&&St!==null?St=eh(St):(St=Zf(et)?Xf:H$3.current,St=Yf(g,St));var Ft=et.getDerivedStateFromProps;(Tt=typeof Ft=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==Rt||jt!==St)&&Hi(g,dt,ot,St),jh=!1,jt=g.memoizedState,dt.state=jt,qh(g,ot,dt,ut);var Bt=g.memoizedState;ft!==Rt||jt!==Bt||Wf.current||jh?(typeof Ft=="function"&&(Di(g,et,Ft,ot),Bt=g.memoizedState),(kt=jh||Fi(g,et,kt,ot,jt,Bt,St)||!1)?(Tt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(ot,Bt,St),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(ot,Bt,St)),typeof dt.componentDidUpdate=="function"&&(g.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),g.memoizedProps=ot,g.memoizedState=Bt),dt.props=ot,dt.state=Bt,dt.context=St,ot=kt):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),ot=!1)}return jj(it,g,et,ot,ct,ut)}function jj(it,g,et,ot,ut,ct){gj(it,g);var dt=(g.flags&128)!==0;if(!ot&&!dt)return ut&&dg(g,et,!1),Zi(it,g,ct);ot=g.stateNode,Wi.current=g;var ft=dt&&typeof et.getDerivedStateFromError!="function"?null:ot.render();return g.flags|=1,it!==null&&dt?(g.child=Ug(g,it.child,null,ct),g.child=Ug(g,null,ft,ct)):Xi(it,g,ft,ct),g.memoizedState=ot.state,ut&&dg(g,et,!0),g.child}function kj(it){var g=it.stateNode;g.pendingContext?ag(it,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(it,g.context,!1),yh(it,g.containerInfo)}function lj(it,g,et,ot,ut){return Ig(),Jg(ut),g.flags|=256,Xi(it,g,et,ot),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(it){return{baseLanes:it,cachePool:null,transitions:null}}function oj(it,g,et){var ot=g.pendingProps,ut=L$3.current,ct=!1,dt=(g.flags&128)!==0,ft;if((ft=dt)||(ft=it!==null&&it.memoizedState===null?!1:(ut&2)!==0),ft?(ct=!0,g.flags&=-129):(it===null||it.memoizedState!==null)&&(ut|=1),G$1(L$3,ut&1),it===null)return Eg(g),it=g.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(g.mode&1?it.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(dt=ot.children,it=ot.fallback,ct?(ot=g.mode,ct=g.child,dt={mode:"hidden",children:dt},!(ot&1)&&ct!==null?(ct.childLanes=0,ct.pendingProps=dt):ct=pj(dt,ot,0,null),it=Tg(it,ot,et,null),ct.return=g,it.return=g,ct.sibling=it,g.child=ct,g.child.memoizedState=nj(et),g.memoizedState=mj,it):qj(g,dt));if(ut=it.memoizedState,ut!==null&&(ft=ut.dehydrated,ft!==null))return rj(it,g,dt,ot,ft,ut,et);if(ct){ct=ot.fallback,dt=g.mode,ut=it.child,ft=ut.sibling;var St={mode:"hidden",children:ot.children};return!(dt&1)&&g.child!==ut?(ot=g.child,ot.childLanes=0,ot.pendingProps=St,g.deletions=null):(ot=Pg(ut,St),ot.subtreeFlags=ut.subtreeFlags&14680064),ft!==null?ct=Pg(ft,ct):(ct=Tg(ct,dt,et,null),ct.flags|=2),ct.return=g,ot.return=g,ot.sibling=ct,g.child=ot,ot=ct,ct=g.child,dt=it.child.memoizedState,dt=dt===null?nj(et):{baseLanes:dt.baseLanes|et,cachePool:null,transitions:dt.transitions},ct.memoizedState=dt,ct.childLanes=it.childLanes&~et,g.memoizedState=mj,ot}return ct=it.child,it=ct.sibling,ot=Pg(ct,{mode:"visible",children:ot.children}),!(g.mode&1)&&(ot.lanes=et),ot.return=g,ot.sibling=null,it!==null&&(et=g.deletions,et===null?(g.deletions=[it],g.flags|=16):et.push(it)),g.child=ot,g.memoizedState=null,ot}function qj(it,g){return g=pj({mode:"visible",children:g},it.mode,0,null),g.return=it,it.child=g}function sj(it,g,et,ot){return ot!==null&&Jg(ot),Ug(g,it.child,null,et),it=qj(g,g.pendingProps.children),it.flags|=2,g.memoizedState=null,it}function rj(it,g,et,ot,ut,ct,dt){if(et)return g.flags&256?(g.flags&=-257,ot=Ki(Error(p$3(422))),sj(it,g,dt,ot)):g.memoizedState!==null?(g.child=it.child,g.flags|=128,null):(ct=ot.fallback,ut=g.mode,ot=pj({mode:"visible",children:ot.children},ut,0,null),ct=Tg(ct,ut,dt,null),ct.flags|=2,ot.return=g,ct.return=g,ot.sibling=ct,g.child=ot,g.mode&1&&Ug(g,it.child,null,dt),g.child.memoizedState=nj(dt),g.memoizedState=mj,ct);if(!(g.mode&1))return sj(it,g,dt,null);if(ut.data==="$!"){if(ot=ut.nextSibling&&ut.nextSibling.dataset,ot)var ft=ot.dgst;return ot=ft,ct=Error(p$3(419)),ot=Ki(ct,ot,void 0),sj(it,g,dt,ot)}if(ft=(dt&it.childLanes)!==0,dh||ft){if(ot=Q$1,ot!==null){switch(dt&-dt){case 4:ut=2;break;case 16:ut=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ut=32;break;case 536870912:ut=268435456;break;default:ut=0}ut=ut&(ot.suspendedLanes|dt)?0:ut,ut!==0&&ut!==ct.retryLane&&(ct.retryLane=ut,ih(it,ut),gi(ot,it,ut,-1))}return tj(),ot=Ki(Error(p$3(421))),sj(it,g,dt,ot)}return ut.data==="$?"?(g.flags|=128,g.child=it.child,g=uj.bind(null,it),ut._reactRetry=g,null):(it=ct.treeContext,yg=Lf(ut.nextSibling),xg=g,I$4=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=g),g=qj(g,ot.children),g.flags|=4096,g)}function vj(it,g,et){it.lanes|=g;var ot=it.alternate;ot!==null&&(ot.lanes|=g),bh(it.return,g,et)}function wj(it,g,et,ot,ut){var ct=it.memoizedState;ct===null?it.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:ot,tail:et,tailMode:ut}:(ct.isBackwards=g,ct.rendering=null,ct.renderingStartTime=0,ct.last=ot,ct.tail=et,ct.tailMode=ut)}function xj(it,g,et){var ot=g.pendingProps,ut=ot.revealOrder,ct=ot.tail;if(Xi(it,g,ot.children,et),ot=L$3.current,ot&2)ot=ot&1|2,g.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=g.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&vj(it,et,g);else if(it.tag===19)vj(it,et,g);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===g)break e;for(;it.sibling===null;){if(it.return===null||it.return===g)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}ot&=1}if(G$1(L$3,ot),!(g.mode&1))g.memoizedState=null;else switch(ut){case"forwards":for(et=g.child,ut=null;et!==null;)it=et.alternate,it!==null&&Ch(it)===null&&(ut=et),et=et.sibling;et=ut,et===null?(ut=g.child,g.child=null):(ut=et.sibling,et.sibling=null),wj(g,!1,ut,et,ct);break;case"backwards":for(et=null,ut=g.child,g.child=null;ut!==null;){if(it=ut.alternate,it!==null&&Ch(it)===null){g.child=ut;break}it=ut.sibling,ut.sibling=et,et=ut,ut=it}wj(g,!0,et,null,ct);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(it,g){!(g.mode&1)&&it!==null&&(it.alternate=null,g.alternate=null,g.flags|=2)}function Zi(it,g,et){if(it!==null&&(g.dependencies=it.dependencies),rh|=g.lanes,!(et&g.childLanes))return null;if(it!==null&&g.child!==it.child)throw Error(p$3(153));if(g.child!==null){for(it=g.child,et=Pg(it,it.pendingProps),g.child=et,et.return=g;it.sibling!==null;)it=it.sibling,et=et.sibling=Pg(it,it.pendingProps),et.return=g;et.sibling=null}return g.child}function yj(it,g,et){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var ot=g.type._context,ut=g.memoizedProps.value;G$1(Wg,ot._currentValue),ot._currentValue=ut;break;case 13:if(ot=g.memoizedState,ot!==null)return ot.dehydrated!==null?(G$1(L$3,L$3.current&1),g.flags|=128,null):et&g.child.childLanes?oj(it,g,et):(G$1(L$3,L$3.current&1),it=Zi(it,g,et),it!==null?it.sibling:null);G$1(L$3,L$3.current&1);break;case 19:if(ot=(et&g.childLanes)!==0,it.flags&128){if(ot)return xj(it,g,et);g.flags|=128}if(ut=g.memoizedState,ut!==null&&(ut.rendering=null,ut.tail=null,ut.lastEffect=null),G$1(L$3,L$3.current),ot)break;return null;case 22:case 23:return g.lanes=0,dj(it,g,et)}return Zi(it,g,et)}var zj,Aj,Bj,Cj;zj=function(it,g){for(var et=g.child;et!==null;){if(et.tag===5||et.tag===6)it.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===g)break;for(;et.sibling===null;){if(et.return===null||et.return===g)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(it,g,et,ot){var ut=it.memoizedProps;if(ut!==ot){it=g.stateNode,xh(uh.current);var ct=null;switch(et){case"input":ut=Ya(it,ut),ot=Ya(it,ot),ct=[];break;case"select":ut=A$2({},ut,{value:void 0}),ot=A$2({},ot,{value:void 0}),ct=[];break;case"textarea":ut=gb(it,ut),ot=gb(it,ot),ct=[];break;default:typeof ut.onClick!="function"&&typeof ot.onClick=="function"&&(it.onclick=Bf)}ub(et,ot);var dt;et=null;for(kt in ut)if(!ot.hasOwnProperty(kt)&&ut.hasOwnProperty(kt)&&ut[kt]!=null)if(kt==="style"){var ft=ut[kt];for(dt in ft)ft.hasOwnProperty(dt)&&(et||(et={}),et[dt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?ct||(ct=[]):(ct=ct||[]).push(kt,null));for(kt in ot){var St=ot[kt];if(ft=ut!=null?ut[kt]:void 0,ot.hasOwnProperty(kt)&&St!==ft&&(St!=null||ft!=null))if(kt==="style")if(ft){for(dt in ft)!ft.hasOwnProperty(dt)||St&&St.hasOwnProperty(dt)||(et||(et={}),et[dt]="");for(dt in St)St.hasOwnProperty(dt)&&ft[dt]!==St[dt]&&(et||(et={}),et[dt]=St[dt])}else et||(ct||(ct=[]),ct.push(kt,et)),et=St;else kt==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,ft=ft?ft.__html:void 0,St!=null&&ft!==St&&(ct=ct||[]).push(kt,St)):kt==="children"?typeof St!="string"&&typeof St!="number"||(ct=ct||[]).push(kt,""+St):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(St!=null&&kt==="onScroll"&&D$1("scroll",it),ct||ft===St||(ct=[])):(ct=ct||[]).push(kt,St))}et&&(ct=ct||[]).push("style",et);var kt=ct;(g.updateQueue=kt)&&(g.flags|=4)}};Cj=function(it,g,et,ot){et!==ot&&(g.flags|=4)};function Dj(it,g){if(!I$4)switch(it.tailMode){case"hidden":g=it.tail;for(var et=null;g!==null;)g.alternate!==null&&(et=g),g=g.sibling;et===null?it.tail=null:et.sibling=null;break;case"collapsed":et=it.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?g||it.tail===null?it.tail=null:it.tail.sibling=null:ot.sibling=null}}function S$3(it){var g=it.alternate!==null&&it.alternate.child===it.child,et=0,ot=0;if(g)for(var ut=it.child;ut!==null;)et|=ut.lanes|ut.childLanes,ot|=ut.subtreeFlags&14680064,ot|=ut.flags&14680064,ut.return=it,ut=ut.sibling;else for(ut=it.child;ut!==null;)et|=ut.lanes|ut.childLanes,ot|=ut.subtreeFlags,ot|=ut.flags,ut.return=it,ut=ut.sibling;return it.subtreeFlags|=ot,it.childLanes=et,g}function Ej(it,g,et){var ot=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(g),null;case 1:return Zf(g.type)&&$f(),S$3(g),null;case 3:return ot=g.stateNode,zh(),E$2(Wf),E$2(H$3),Eh(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(it===null||it.child===null)&&(Gg(g)?g.flags|=4:it===null||it.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(it,g),S$3(g),null;case 5:Bh(g);var ut=xh(wh.current);if(et=g.type,it!==null&&g.stateNode!=null)Bj(it,g,et,ot,ut),it.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!ot){if(g.stateNode===null)throw Error(p$3(166));return S$3(g),null}if(it=xh(uh.current),Gg(g)){ot=g.stateNode,et=g.type;var ct=g.memoizedProps;switch(ot[Of]=g,ot[Pf]=ct,it=(g.mode&1)!==0,et){case"dialog":D$1("cancel",ot),D$1("close",ot);break;case"iframe":case"object":case"embed":D$1("load",ot);break;case"video":case"audio":for(ut=0;ut<lf.length;ut++)D$1(lf[ut],ot);break;case"source":D$1("error",ot);break;case"img":case"image":case"link":D$1("error",ot),D$1("load",ot);break;case"details":D$1("toggle",ot);break;case"input":Za(ot,ct),D$1("invalid",ot);break;case"select":ot._wrapperState={wasMultiple:!!ct.multiple},D$1("invalid",ot);break;case"textarea":hb(ot,ct),D$1("invalid",ot)}ub(et,ct),ut=null;for(var dt in ct)if(ct.hasOwnProperty(dt)){var ft=ct[dt];dt==="children"?typeof ft=="string"?ot.textContent!==ft&&(ct.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ut=["children",ft]):typeof ft=="number"&&ot.textContent!==""+ft&&(ct.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ut=["children",""+ft]):ea.hasOwnProperty(dt)&&ft!=null&&dt==="onScroll"&&D$1("scroll",ot)}switch(et){case"input":Va(ot),db(ot,ct,!0);break;case"textarea":Va(ot),jb(ot);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(ot.onclick=Bf)}ot=ut,g.updateQueue=ot,ot!==null&&(g.flags|=4)}else{dt=ut.nodeType===9?ut:ut.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(et)),it==="http://www.w3.org/1999/xhtml"?et==="script"?(it=dt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof ot.is=="string"?it=dt.createElement(et,{is:ot.is}):(it=dt.createElement(et),et==="select"&&(dt=it,ot.multiple?dt.multiple=!0:ot.size&&(dt.size=ot.size))):it=dt.createElementNS(it,et),it[Of]=g,it[Pf]=ot,zj(it,g,!1,!1),g.stateNode=it;e:{switch(dt=vb(et,ot),et){case"dialog":D$1("cancel",it),D$1("close",it),ut=ot;break;case"iframe":case"object":case"embed":D$1("load",it),ut=ot;break;case"video":case"audio":for(ut=0;ut<lf.length;ut++)D$1(lf[ut],it);ut=ot;break;case"source":D$1("error",it),ut=ot;break;case"img":case"image":case"link":D$1("error",it),D$1("load",it),ut=ot;break;case"details":D$1("toggle",it),ut=ot;break;case"input":Za(it,ot),ut=Ya(it,ot),D$1("invalid",it);break;case"option":ut=ot;break;case"select":it._wrapperState={wasMultiple:!!ot.multiple},ut=A$2({},ot,{value:void 0}),D$1("invalid",it);break;case"textarea":hb(it,ot),ut=gb(it,ot),D$1("invalid",it);break;default:ut=ot}ub(et,ut),ft=ut;for(ct in ft)if(ft.hasOwnProperty(ct)){var St=ft[ct];ct==="style"?sb(it,St):ct==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,St!=null&&nb(it,St)):ct==="children"?typeof St=="string"?(et!=="textarea"||St!=="")&&ob(it,St):typeof St=="number"&&ob(it,""+St):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?St!=null&&ct==="onScroll"&&D$1("scroll",it):St!=null&&ta$1(it,ct,St,dt))}switch(et){case"input":Va(it),db(it,ot,!1);break;case"textarea":Va(it),jb(it);break;case"option":ot.value!=null&&it.setAttribute("value",""+Sa(ot.value));break;case"select":it.multiple=!!ot.multiple,ct=ot.value,ct!=null?fb(it,!!ot.multiple,ct,!1):ot.defaultValue!=null&&fb(it,!!ot.multiple,ot.defaultValue,!0);break;default:typeof ut.onClick=="function"&&(it.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":ot=!!ot.autoFocus;break e;case"img":ot=!0;break e;default:ot=!1}}ot&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S$3(g),null;case 6:if(it&&g.stateNode!=null)Cj(it,g,it.memoizedProps,ot);else{if(typeof ot!="string"&&g.stateNode===null)throw Error(p$3(166));if(et=xh(wh.current),xh(uh.current),Gg(g)){if(ot=g.stateNode,et=g.memoizedProps,ot[Of]=g,(ct=ot.nodeValue!==et)&&(it=xg,it!==null))switch(it.tag){case 3:Af(ot.nodeValue,et,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(ot.nodeValue,et,(it.mode&1)!==0)}ct&&(g.flags|=4)}else ot=(et.nodeType===9?et:et.ownerDocument).createTextNode(ot),ot[Of]=g,g.stateNode=ot}return S$3(g),null;case 13:if(E$2(L$3),ot=g.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,ct=!1;else if(ct=Gg(g),ot!==null&&ot.dehydrated!==null){if(it===null){if(!ct)throw Error(p$3(318));if(ct=g.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$3(317));ct[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S$3(g),ct=!1}else zg!==null&&(Fj(zg),zg=null),ct=!0;if(!ct)return g.flags&65536?g:null}return g.flags&128?(g.lanes=et,g):(ot=ot!==null,ot!==(it!==null&&it.memoizedState!==null)&&ot&&(g.child.flags|=8192,g.mode&1&&(it===null||L$3.current&1?T$3===0&&(T$3=3):tj())),g.updateQueue!==null&&(g.flags|=4),S$3(g),null);case 4:return zh(),Aj(it,g),it===null&&sf(g.stateNode.containerInfo),S$3(g),null;case 10:return ah(g.type._context),S$3(g),null;case 17:return Zf(g.type)&&$f(),S$3(g),null;case 19:if(E$2(L$3),ct=g.memoizedState,ct===null)return S$3(g),null;if(ot=(g.flags&128)!==0,dt=ct.rendering,dt===null)if(ot)Dj(ct,!1);else{if(T$3!==0||it!==null&&it.flags&128)for(it=g.child;it!==null;){if(dt=Ch(it),dt!==null){for(g.flags|=128,Dj(ct,!1),ot=dt.updateQueue,ot!==null&&(g.updateQueue=ot,g.flags|=4),g.subtreeFlags=0,ot=et,et=g.child;et!==null;)ct=et,it=ot,ct.flags&=14680066,dt=ct.alternate,dt===null?(ct.childLanes=0,ct.lanes=it,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=dt.childLanes,ct.lanes=dt.lanes,ct.child=dt.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=dt.memoizedProps,ct.memoizedState=dt.memoizedState,ct.updateQueue=dt.updateQueue,ct.type=dt.type,it=dt.dependencies,ct.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),et=et.sibling;return G$1(L$3,L$3.current&1|2),g.child}it=it.sibling}ct.tail!==null&&B$1()>Gj&&(g.flags|=128,ot=!0,Dj(ct,!1),g.lanes=4194304)}else{if(!ot)if(it=Ch(dt),it!==null){if(g.flags|=128,ot=!0,et=it.updateQueue,et!==null&&(g.updateQueue=et,g.flags|=4),Dj(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!dt.alternate&&!I$4)return S$3(g),null}else 2*B$1()-ct.renderingStartTime>Gj&&et!==1073741824&&(g.flags|=128,ot=!0,Dj(ct,!1),g.lanes=4194304);ct.isBackwards?(dt.sibling=g.child,g.child=dt):(et=ct.last,et!==null?et.sibling=dt:g.child=dt,ct.last=dt)}return ct.tail!==null?(g=ct.tail,ct.rendering=g,ct.tail=g.sibling,ct.renderingStartTime=B$1(),g.sibling=null,et=L$3.current,G$1(L$3,ot?et&1|2:et&1),g):(S$3(g),null);case 22:case 23:return Hj(),ot=g.memoizedState!==null,it!==null&&it.memoizedState!==null!==ot&&(g.flags|=8192),ot&&g.mode&1?fj&1073741824&&(S$3(g),g.subtreeFlags&6&&(g.flags|=8192)):S$3(g),null;case 24:return null;case 25:return null}throw Error(p$3(156,g.tag))}function Ij(it,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 3:return zh(),E$2(Wf),E$2(H$3),Eh(),it=g.flags,it&65536&&!(it&128)?(g.flags=it&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E$2(L$3),it=g.memoizedState,it!==null&&it.dehydrated!==null){if(g.alternate===null)throw Error(p$3(340));Ig()}return it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(it,g){var et=it.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(ot){W$2(it,g,ot)}else et.current=null}function Mj(it,g,et){try{et()}catch(ot){W$2(it,g,ot)}}var Nj=!1;function Oj(it,g){if(Cf=dd,it=Me$1(),Ne$1(it)){if("selectionStart"in it)var et={start:it.selectionStart,end:it.selectionEnd};else e:{et=(et=it.ownerDocument)&&et.defaultView||window;var ot=et.getSelection&&et.getSelection();if(ot&&ot.rangeCount!==0){et=ot.anchorNode;var ut=ot.anchorOffset,ct=ot.focusNode;ot=ot.focusOffset;try{et.nodeType,ct.nodeType}catch{et=null;break e}var dt=0,ft=-1,St=-1,kt=0,Tt=0,Rt=it,jt=null;t:for(;;){for(var Ft;Rt!==et||ut!==0&&Rt.nodeType!==3||(ft=dt+ut),Rt!==ct||ot!==0&&Rt.nodeType!==3||(St=dt+ot),Rt.nodeType===3&&(dt+=Rt.nodeValue.length),(Ft=Rt.firstChild)!==null;)jt=Rt,Rt=Ft;for(;;){if(Rt===it)break t;if(jt===et&&++kt===ut&&(ft=dt),jt===ct&&++Tt===ot&&(St=dt),(Ft=Rt.nextSibling)!==null)break;Rt=jt,jt=Rt.parentNode}Rt=Ft}et=ft===-1||St===-1?null:{start:ft,end:St}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:it,selectionRange:et},dd=!1,V$2=g;V$2!==null;)if(g=V$2,it=g.child,(g.subtreeFlags&1028)!==0&&it!==null)it.return=g,V$2=it;else for(;V$2!==null;){g=V$2;try{var Bt=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Ht=Bt.memoizedProps,Yt=Bt.memoizedState,zt=g.stateNode,Kt=zt.getSnapshotBeforeUpdate(g.elementType===g.type?Ht:Ci(g.type,Ht),Yt);zt.__reactInternalSnapshotBeforeUpdate=Kt}break;case 3:var en=g.stateNode.containerInfo;en.nodeType===1?en.textContent="":en.nodeType===9&&en.documentElement&&en.removeChild(en.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(tn){W$2(g,g.return,tn)}if(it=g.sibling,it!==null){it.return=g.return,V$2=it;break}V$2=g.return}return Bt=Nj,Nj=!1,Bt}function Pj(it,g,et){var ot=g.updateQueue;if(ot=ot!==null?ot.lastEffect:null,ot!==null){var ut=ot=ot.next;do{if((ut.tag&it)===it){var ct=ut.destroy;ut.destroy=void 0,ct!==void 0&&Mj(g,et,ct)}ut=ut.next}while(ut!==ot)}}function Qj(it,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var et=g=g.next;do{if((et.tag&it)===it){var ot=et.create;et.destroy=ot()}et=et.next}while(et!==g)}}function Rj(it){var g=it.ref;if(g!==null){var et=it.stateNode;switch(it.tag){case 5:it=et;break;default:it=et}typeof g=="function"?g(it):g.current=it}}function Sj(it){var g=it.alternate;g!==null&&(it.alternate=null,Sj(g)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(g=it.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Tj(it){return it.tag===5||it.tag===3||it.tag===4}function Uj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Tj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Vj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.nodeType===8?et.parentNode.insertBefore(it,g):et.insertBefore(it,g):(et.nodeType===8?(g=et.parentNode,g.insertBefore(it,et)):(g=et,g.appendChild(it)),et=et._reactRootContainer,et!=null||g.onclick!==null||(g.onclick=Bf));else if(ot!==4&&(it=it.child,it!==null))for(Vj(it,g,et),it=it.sibling;it!==null;)Vj(it,g,et),it=it.sibling}function Wj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.insertBefore(it,g):et.appendChild(it);else if(ot!==4&&(it=it.child,it!==null))for(Wj(it,g,et),it=it.sibling;it!==null;)Wj(it,g,et),it=it.sibling}var X$4=null,Xj=!1;function Yj(it,g,et){for(et=et.child;et!==null;)Zj(it,g,et),et=et.sibling}function Zj(it,g,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$4||Lj(et,g);case 6:var ot=X$4,ut=Xj;X$4=null,Yj(it,g,et),X$4=ot,Xj=ut,X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?it.parentNode.removeChild(et):it.removeChild(et)):X$4.removeChild(et.stateNode));break;case 18:X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?Kf(it.parentNode,et):it.nodeType===1&&Kf(it,et),bd(it)):Kf(X$4,et.stateNode));break;case 4:ot=X$4,ut=Xj,X$4=et.stateNode.containerInfo,Xj=!0,Yj(it,g,et),X$4=ot,Xj=ut;break;case 0:case 11:case 14:case 15:if(!U$4&&(ot=et.updateQueue,ot!==null&&(ot=ot.lastEffect,ot!==null))){ut=ot=ot.next;do{var ct=ut,dt=ct.destroy;ct=ct.tag,dt!==void 0&&(ct&2||ct&4)&&Mj(et,g,dt),ut=ut.next}while(ut!==ot)}Yj(it,g,et);break;case 1:if(!U$4&&(Lj(et,g),ot=et.stateNode,typeof ot.componentWillUnmount=="function"))try{ot.props=et.memoizedProps,ot.state=et.memoizedState,ot.componentWillUnmount()}catch(ft){W$2(et,g,ft)}Yj(it,g,et);break;case 21:Yj(it,g,et);break;case 22:et.mode&1?(U$4=(ot=U$4)||et.memoizedState!==null,Yj(it,g,et),U$4=ot):Yj(it,g,et);break;default:Yj(it,g,et)}}function ak(it){var g=it.updateQueue;if(g!==null){it.updateQueue=null;var et=it.stateNode;et===null&&(et=it.stateNode=new Kj),g.forEach(function(ot){var ut=bk.bind(null,it,ot);et.has(ot)||(et.add(ot),ot.then(ut,ut))})}}function ck(it,g){var et=g.deletions;if(et!==null)for(var ot=0;ot<et.length;ot++){var ut=et[ot];try{var ct=it,dt=g,ft=dt;e:for(;ft!==null;){switch(ft.tag){case 5:X$4=ft.stateNode,Xj=!1;break e;case 3:X$4=ft.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=ft.stateNode.containerInfo,Xj=!0;break e}ft=ft.return}if(X$4===null)throw Error(p$3(160));Zj(ct,dt,ut),X$4=null,Xj=!1;var St=ut.alternate;St!==null&&(St.return=null),ut.return=null}catch(kt){W$2(ut,g,kt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,it),g=g.sibling}function dk(it,g){var et=it.alternate,ot=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ck(g,it),ek(it),ot&4){try{Pj(3,it,it.return),Qj(3,it)}catch(Ht){W$2(it,it.return,Ht)}try{Pj(5,it,it.return)}catch(Ht){W$2(it,it.return,Ht)}}break;case 1:ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return),it.flags&32){var ut=it.stateNode;try{ob(ut,"")}catch(Ht){W$2(it,it.return,Ht)}}if(ot&4&&(ut=it.stateNode,ut!=null)){var ct=it.memoizedProps,dt=et!==null?et.memoizedProps:ct,ft=it.type,St=it.updateQueue;if(it.updateQueue=null,St!==null)try{ft==="input"&&ct.type==="radio"&&ct.name!=null&&ab(ut,ct),vb(ft,dt);var kt=vb(ft,ct);for(dt=0;dt<St.length;dt+=2){var Tt=St[dt],Rt=St[dt+1];Tt==="style"?sb(ut,Rt):Tt==="dangerouslySetInnerHTML"?nb(ut,Rt):Tt==="children"?ob(ut,Rt):ta$1(ut,Tt,Rt,kt)}switch(ft){case"input":bb(ut,ct);break;case"textarea":ib(ut,ct);break;case"select":var jt=ut._wrapperState.wasMultiple;ut._wrapperState.wasMultiple=!!ct.multiple;var Ft=ct.value;Ft!=null?fb(ut,!!ct.multiple,Ft,!1):jt!==!!ct.multiple&&(ct.defaultValue!=null?fb(ut,!!ct.multiple,ct.defaultValue,!0):fb(ut,!!ct.multiple,ct.multiple?[]:"",!1))}ut[Pf]=ct}catch(Ht){W$2(it,it.return,Ht)}}break;case 6:if(ck(g,it),ek(it),ot&4){if(it.stateNode===null)throw Error(p$3(162));ut=it.stateNode,ct=it.memoizedProps;try{ut.nodeValue=ct}catch(Ht){W$2(it,it.return,Ht)}}break;case 3:if(ck(g,it),ek(it),ot&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(Ht){W$2(it,it.return,Ht)}break;case 4:ck(g,it),ek(it);break;case 13:ck(g,it),ek(it),ut=it.child,ut.flags&8192&&(ct=ut.memoizedState!==null,ut.stateNode.isHidden=ct,!ct||ut.alternate!==null&&ut.alternate.memoizedState!==null||(fk=B$1())),ot&4&&ak(it);break;case 22:if(Tt=et!==null&&et.memoizedState!==null,it.mode&1?(U$4=(kt=U$4)||Tt,ck(g,it),U$4=kt):ck(g,it),ek(it),ot&8192){if(kt=it.memoizedState!==null,(it.stateNode.isHidden=kt)&&!Tt&&it.mode&1)for(V$2=it,Tt=it.child;Tt!==null;){for(Rt=V$2=Tt;V$2!==null;){switch(jt=V$2,Ft=jt.child,jt.tag){case 0:case 11:case 14:case 15:Pj(4,jt,jt.return);break;case 1:Lj(jt,jt.return);var Bt=jt.stateNode;if(typeof Bt.componentWillUnmount=="function"){ot=jt,et=jt.return;try{g=ot,Bt.props=g.memoizedProps,Bt.state=g.memoizedState,Bt.componentWillUnmount()}catch(Ht){W$2(ot,et,Ht)}}break;case 5:Lj(jt,jt.return);break;case 22:if(jt.memoizedState!==null){gk(Rt);continue}}Ft!==null?(Ft.return=jt,V$2=Ft):gk(Rt)}Tt=Tt.sibling}e:for(Tt=null,Rt=it;;){if(Rt.tag===5){if(Tt===null){Tt=Rt;try{ut=Rt.stateNode,kt?(ct=ut.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(ft=Rt.stateNode,St=Rt.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null,ft.style.display=rb("display",dt))}catch(Ht){W$2(it,it.return,Ht)}}}else if(Rt.tag===6){if(Tt===null)try{Rt.stateNode.nodeValue=kt?"":Rt.memoizedProps}catch(Ht){W$2(it,it.return,Ht)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===it)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===it)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===it)break e;Tt===Rt&&(Tt=null),Rt=Rt.return}Tt===Rt&&(Tt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ck(g,it),ek(it),ot&4&&ak(it);break;case 21:break;default:ck(g,it),ek(it)}}function ek(it){var g=it.flags;if(g&2){try{e:{for(var et=it.return;et!==null;){if(Tj(et)){var ot=et;break e}et=et.return}throw Error(p$3(160))}switch(ot.tag){case 5:var ut=ot.stateNode;ot.flags&32&&(ob(ut,""),ot.flags&=-33);var ct=Uj(it);Wj(it,ct,ut);break;case 3:case 4:var dt=ot.stateNode.containerInfo,ft=Uj(it);Vj(it,ft,dt);break;default:throw Error(p$3(161))}}catch(St){W$2(it,it.return,St)}it.flags&=-3}g&4096&&(it.flags&=-4097)}function hk(it,g,et){V$2=it,ik(it)}function ik(it,g,et){for(var ot=(it.mode&1)!==0;V$2!==null;){var ut=V$2,ct=ut.child;if(ut.tag===22&&ot){var dt=ut.memoizedState!==null||Jj;if(!dt){var ft=ut.alternate,St=ft!==null&&ft.memoizedState!==null||U$4;ft=Jj;var kt=U$4;if(Jj=dt,(U$4=St)&&!kt)for(V$2=ut;V$2!==null;)dt=V$2,St=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(ut):St!==null?(St.return=dt,V$2=St):jk(ut);for(;ct!==null;)V$2=ct,ik(ct),ct=ct.sibling;V$2=ut,Jj=ft,U$4=kt}kk(it)}else ut.subtreeFlags&8772&&ct!==null?(ct.return=ut,V$2=ct):kk(it)}}function kk(it){for(;V$2!==null;){var g=V$2;if(g.flags&8772){var et=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U$4||Qj(5,g);break;case 1:var ot=g.stateNode;if(g.flags&4&&!U$4)if(et===null)ot.componentDidMount();else{var ut=g.elementType===g.type?et.memoizedProps:Ci(g.type,et.memoizedProps);ot.componentDidUpdate(ut,et.memoizedState,ot.__reactInternalSnapshotBeforeUpdate)}var ct=g.updateQueue;ct!==null&&sh(g,ct,ot);break;case 3:var dt=g.updateQueue;if(dt!==null){if(et=null,g.child!==null)switch(g.child.tag){case 5:et=g.child.stateNode;break;case 1:et=g.child.stateNode}sh(g,dt,et)}break;case 5:var ft=g.stateNode;if(et===null&&g.flags&4){et=ft;var St=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":St.autoFocus&&et.focus();break;case"img":St.src&&(et.src=St.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var kt=g.alternate;if(kt!==null){var Tt=kt.memoizedState;if(Tt!==null){var Rt=Tt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||g.flags&512&&Rj(g)}catch(jt){W$2(g,g.return,jt)}}if(g===it){V$2=null;break}if(et=g.sibling,et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function gk(it){for(;V$2!==null;){var g=V$2;if(g===it){V$2=null;break}var et=g.sibling;if(et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function jk(it){for(;V$2!==null;){var g=V$2;try{switch(g.tag){case 0:case 11:case 15:var et=g.return;try{Qj(4,g)}catch(St){W$2(g,et,St)}break;case 1:var ot=g.stateNode;if(typeof ot.componentDidMount=="function"){var ut=g.return;try{ot.componentDidMount()}catch(St){W$2(g,ut,St)}}var ct=g.return;try{Rj(g)}catch(St){W$2(g,ct,St)}break;case 5:var dt=g.return;try{Rj(g)}catch(St){W$2(g,dt,St)}}}catch(St){W$2(g,g.return,St)}if(g===it){V$2=null;break}var ft=g.sibling;if(ft!==null){ft.return=g.return,V$2=ft;break}V$2=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$2=0,Q$1=null,Y=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$3(){return K$2&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(it){return it.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(it=C$4,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it):1}function gi(it,g,et,ot){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(it,et,ot),(!(K$2&2)||it!==Q$1)&&(it===Q$1&&(!(K$2&2)&&(qk|=et),T$3===4&&Ck(it,Z$2)),Dk(it,ot),et===1&&K$2===0&&!(g.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(it,g){var et=it.callbackNode;wc(it,g);var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)et!==null&&bc(et),it.callbackNode=null,it.callbackPriority=0;else if(g=ot&-ot,it.callbackPriority!==g){if(et!=null&&bc(et),g===1)it.tag===0?ig(Ek.bind(null,it)):hg(Ek.bind(null,it)),Jf(function(){!(K$2&6)&&jg()}),et=null;else{switch(Dc(ot)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,it))}it.callbackPriority=g,it.callbackNode=et}}function Gk(it,g){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var et=it.callbackNode;if(Hk()&&it.callbackNode!==et)return null;var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)return null;if(ot&30||ot&it.expiredLanes||g)g=Ik(it,ot);else{g=ot;var ut=K$2;K$2|=2;var ct=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Gj=B$1()+500,Kk(it,g));do try{Lk();break}catch(ft){Mk(it,ft)}while(1);$g(),mk.current=ct,K$2=ut,Y!==null?g=0:(Q$1=null,Z$2=0,g=T$3)}if(g!==0){if(g===2&&(ut=xc(it),ut!==0&&(ot=ut,g=Nk(it,ut))),g===1)throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;if(g===6)Ck(it,ot);else{if(ut=it.current.alternate,!(ot&30)&&!Ok(ut)&&(g=Ik(it,ot),g===2&&(ct=xc(it),ct!==0&&(ot=ct,g=Nk(it,ct))),g===1))throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;switch(it.finishedWork=ut,it.finishedLanes=ot,g){case 0:case 1:throw Error(p$3(345));case 2:Pk(it,tk$1,uk);break;case 3:if(Ck(it,ot),(ot&130023424)===ot&&(g=fk+500-B$1(),10<g)){if(uc(it,0)!==0)break;if(ut=it.suspendedLanes,(ut&ot)!==ot){R$3(),it.pingedLanes|=it.suspendedLanes&ut;break}it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),g);break}Pk(it,tk$1,uk);break;case 4:if(Ck(it,ot),(ot&4194240)===ot)break;for(g=it.eventTimes,ut=-1;0<ot;){var dt=31-oc(ot);ct=1<<dt,dt=g[dt],dt>ut&&(ut=dt),ot&=~ct}if(ot=ut,ot=B$1()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*lk(ot/1960))-ot,10<ot){it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),ot);break}Pk(it,tk$1,uk);break;case 5:Pk(it,tk$1,uk);break;default:throw Error(p$3(329))}}}return Dk(it,B$1()),it.callbackNode===et?Gk.bind(null,it):null}function Nk(it,g){var et=sk;return it.current.memoizedState.isDehydrated&&(Kk(it,g).flags|=256),it=Ik(it,g),it!==2&&(g=tk$1,tk$1=et,g!==null&&Fj(g)),it}function Fj(it){tk$1===null?tk$1=it:tk$1.push.apply(tk$1,it)}function Ok(it){for(var g=it;;){if(g.flags&16384){var et=g.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var ot=0;ot<et.length;ot++){var ut=et[ot],ct=ut.getSnapshot;ut=ut.value;try{if(!He$2(ct(),ut))return!1}catch{return!1}}}if(et=g.child,g.subtreeFlags&16384&&et!==null)et.return=g,g=et;else{if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(it,g){for(g&=~rk,g&=~qk,it.suspendedLanes|=g,it.pingedLanes&=~g,it=it.expirationTimes;0<g;){var et=31-oc(g),ot=1<<et;it[et]=-1,g&=~ot}}function Ek(it){if(K$2&6)throw Error(p$3(327));Hk();var g=uc(it,0);if(!(g&1))return Dk(it,B$1()),null;var et=Ik(it,g);if(it.tag!==0&&et===2){var ot=xc(it);ot!==0&&(g=ot,et=Nk(it,ot))}if(et===1)throw et=pk,Kk(it,0),Ck(it,g),Dk(it,B$1()),et;if(et===6)throw Error(p$3(345));return it.finishedWork=it.current.alternate,it.finishedLanes=g,Pk(it,tk$1,uk),Dk(it,B$1()),null}function Qk(it,g){var et=K$2;K$2|=1;try{return it(g)}finally{K$2=et,K$2===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(it){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var g=K$2;K$2|=1;var et=ok.transition,ot=C$4;try{if(ok.transition=null,C$4=1,it)return it()}finally{C$4=ot,ok.transition=et,K$2=g,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(it,g){it.finishedWork=null,it.finishedLanes=0;var et=it.timeoutHandle;if(et!==-1&&(it.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var ot=et;switch(wg(ot),ot.tag){case 1:ot=ot.type.childContextTypes,ot!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$3),Eh();break;case 5:Bh(ot);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(ot.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q$1=it,Y=it=Pg(it.current,null),Z$2=fj=g,T$3=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(et=fh[g],ot=et.interleaved,ot!==null){et.interleaved=null;var ut=ot.next,ct=et.pending;if(ct!==null){var dt=ct.next;ct.next=ut,ot.next=dt}et.pending=ot}fh=null}return it}function Mk(it,g){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var ot=M$3.memoizedState;ot!==null;){var ut=ot.queue;ut!==null&&(ut.pending=null),ot=ot.next}Ih=!1}if(Hh=0,O$4=N$2=M$3=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$3=1,pk=g,Y=null;break}e:{var ct=it,dt=et.return,ft=et,St=g;if(g=Z$2,ft.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var kt=St,Tt=ft,Rt=Tt.tag;if(!(Tt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var jt=Tt.alternate;jt?(Tt.updateQueue=jt.updateQueue,Tt.memoizedState=jt.memoizedState,Tt.lanes=jt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Ft=Ui(dt);if(Ft!==null){Ft.flags&=-257,Vi(Ft,dt,ft,ct,g),Ft.mode&1&&Si(ct,kt,g),g=Ft,St=kt;var Bt=g.updateQueue;if(Bt===null){var Ht=new Set;Ht.add(St),g.updateQueue=Ht}else Bt.add(St);break e}else{if(!(g&1)){Si(ct,kt,g),tj();break e}St=Error(p$3(426))}}else if(I$4&&ft.mode&1){var Yt=Ui(dt);if(Yt!==null){!(Yt.flags&65536)&&(Yt.flags|=256),Vi(Yt,dt,ft,ct,g),Jg(Ji(St,ft));break e}}ct=St=Ji(St,ft),T$3!==4&&(T$3=2),sk===null?sk=[ct]:sk.push(ct),ct=dt;do{switch(ct.tag){case 3:ct.flags|=65536,g&=-g,ct.lanes|=g;var zt=Ni(ct,St,g);ph(ct,zt);break e;case 1:ft=St;var Kt=ct.type,en=ct.stateNode;if(!(ct.flags&128)&&(typeof Kt.getDerivedStateFromError=="function"||en!==null&&typeof en.componentDidCatch=="function"&&(Ri===null||!Ri.has(en)))){ct.flags|=65536,g&=-g,ct.lanes|=g;var tn=Qi(ct,ft,g);ph(ct,tn);break e}}ct=ct.return}while(ct!==null)}Sk(et)}catch(on){g=on,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Jk(){var it=mk.current;return mk.current=Rh,it===null?Rh:it}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(it,g){var et=K$2;K$2|=2;var ot=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Kk(it,g));do try{Tk();break}catch(ut){Mk(it,ut)}while(1);if($g(),K$2=et,mk.current=ot,Y!==null)throw Error(p$3(261));return Q$1=null,Z$2=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(it){var g=Vk(it.alternate,it,fj);it.memoizedProps=it.pendingProps,g===null?Sk(it):Y=g,nk.current=null}function Sk(it){var g=it;do{var et=g.alternate;if(it=g.return,g.flags&32768){if(et=Ij(et,g),et!==null){et.flags&=32767,Y=et;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$3=6,Y=null;return}}else if(et=Ej(et,g,fj),et!==null){Y=et;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=it}while(g!==null);T$3===0&&(T$3=5)}function Pk(it,g,et){var ot=C$4,ut=ok.transition;try{ok.transition=null,C$4=1,Wk(it,g,et,ot)}finally{ok.transition=ut,C$4=ot}return null}function Wk(it,g,et,ot){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));et=it.finishedWork;var ut=it.finishedLanes;if(et===null)return null;if(it.finishedWork=null,it.finishedLanes=0,et===it.current)throw Error(p$3(177));it.callbackNode=null,it.callbackPriority=0;var ct=et.lanes|et.childLanes;if(Bc(it,ct),it===Q$1&&(Y=Q$1=null,Z$2=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ct=(et.flags&15990)!==0,et.subtreeFlags&15990||ct){ct=ok.transition,ok.transition=null;var dt=C$4;C$4=1;var ft=K$2;K$2|=4,nk.current=null,Oj(it,et),dk(et,it),Oe$1(Df),dd=!!Cf,Df=Cf=null,it.current=et,hk(et),dc(),K$2=ft,C$4=dt,ok.transition=ct}else it.current=et;if(vk&&(vk=!1,wk=it,xk=ut),ct=it.pendingLanes,ct===0&&(Ri=null),mc(et.stateNode),Dk(it,B$1()),g!==null)for(ot=it.onRecoverableError,et=0;et<g.length;et++)ut=g[et],ot(ut.value,{componentStack:ut.stack,digest:ut.digest});if(Oi)throw Oi=!1,it=Pi,Pi=null,it;return xk&1&&it.tag!==0&&Hk(),ct=it.pendingLanes,ct&1?it===zk?yk++:(yk=0,zk=it):yk=0,jg(),null}function Hk(){if(wk!==null){var it=Dc(xk),g=ok.transition,et=C$4;try{if(ok.transition=null,C$4=16>it?16:it,wk===null)var ot=!1;else{if(it=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var ut=K$2;for(K$2|=4,V$2=it.current;V$2!==null;){var ct=V$2,dt=ct.child;if(V$2.flags&16){var ft=ct.deletions;if(ft!==null){for(var St=0;St<ft.length;St++){var kt=ft[St];for(V$2=kt;V$2!==null;){var Tt=V$2;switch(Tt.tag){case 0:case 11:case 15:Pj(8,Tt,ct)}var Rt=Tt.child;if(Rt!==null)Rt.return=Tt,V$2=Rt;else for(;V$2!==null;){Tt=V$2;var jt=Tt.sibling,Ft=Tt.return;if(Sj(Tt),Tt===kt){V$2=null;break}if(jt!==null){jt.return=Ft,V$2=jt;break}V$2=Ft}}}var Bt=ct.alternate;if(Bt!==null){var Ht=Bt.child;if(Ht!==null){Bt.child=null;do{var Yt=Ht.sibling;Ht.sibling=null,Ht=Yt}while(Ht!==null)}}V$2=ct}}if(ct.subtreeFlags&2064&&dt!==null)dt.return=ct,V$2=dt;else e:for(;V$2!==null;){if(ct=V$2,ct.flags&2048)switch(ct.tag){case 0:case 11:case 15:Pj(9,ct,ct.return)}var zt=ct.sibling;if(zt!==null){zt.return=ct.return,V$2=zt;break e}V$2=ct.return}}var Kt=it.current;for(V$2=Kt;V$2!==null;){dt=V$2;var en=dt.child;if(dt.subtreeFlags&2064&&en!==null)en.return=dt,V$2=en;else e:for(dt=Kt;V$2!==null;){if(ft=V$2,ft.flags&2048)try{switch(ft.tag){case 0:case 11:case 15:Qj(9,ft)}}catch(on){W$2(ft,ft.return,on)}if(ft===dt){V$2=null;break e}var tn=ft.sibling;if(tn!==null){tn.return=ft.return,V$2=tn;break e}V$2=ft.return}}if(K$2=ut,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,it)}catch{}ot=!0}return ot}finally{C$4=et,ok.transition=g}}return!1}function Xk(it,g,et){g=Ji(et,g),g=Ni(it,g,1),it=nh(it,g,1),g=R$3(),it!==null&&(Ac(it,1,g),Dk(it,g))}function W$2(it,g,et){if(it.tag===3)Xk(it,it,et);else for(;g!==null;){if(g.tag===3){Xk(g,it,et);break}else if(g.tag===1){var ot=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof ot.componentDidCatch=="function"&&(Ri===null||!Ri.has(ot))){it=Ji(et,it),it=Qi(g,it,1),g=nh(g,it,1),it=R$3(),g!==null&&(Ac(g,1,it),Dk(g,it));break}}g=g.return}}function Ti(it,g,et){var ot=it.pingCache;ot!==null&&ot.delete(g),g=R$3(),it.pingedLanes|=it.suspendedLanes&et,Q$1===it&&(Z$2&et)===et&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(it,0):rk|=et),Dk(it,g)}function Yk(it,g){g===0&&(it.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var et=R$3();it=ih(it,g),it!==null&&(Ac(it,g,et),Dk(it,et))}function uj(it){var g=it.memoizedState,et=0;g!==null&&(et=g.retryLane),Yk(it,et)}function bk(it,g){var et=0;switch(it.tag){case 13:var ot=it.stateNode,ut=it.memoizedState;ut!==null&&(et=ut.retryLane);break;case 19:ot=it.stateNode;break;default:throw Error(p$3(314))}ot!==null&&ot.delete(g),Yk(it,et)}var Vk;Vk=function(it,g,et){if(it!==null)if(it.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(it.lanes&et)&&!(g.flags&128))return dh=!1,yj(it,g,et);dh=!!(it.flags&131072)}else dh=!1,I$4&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var ot=g.type;ij(it,g),it=g.pendingProps;var ut=Yf(g,H$3.current);ch(g,et),ut=Nh(null,g,ot,it,ut,et);var ct=Sh();return g.flags|=1,typeof ut=="object"&&ut!==null&&typeof ut.render=="function"&&ut.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(ot)?(ct=!0,cg(g)):ct=!1,g.memoizedState=ut.state!==null&&ut.state!==void 0?ut.state:null,kh(g),ut.updater=Ei,g.stateNode=ut,ut._reactInternals=g,Ii(g,ot,it,et),g=jj(null,g,ot,!0,ct,et)):(g.tag=0,I$4&&ct&&vg(g),Xi(null,g,ut,et),g=g.child),g;case 16:ot=g.elementType;e:{switch(ij(it,g),it=g.pendingProps,ut=ot._init,ot=ut(ot._payload),g.type=ot,ut=g.tag=Zk(ot),it=Ci(ot,it),ut){case 0:g=cj(null,g,ot,it,et);break e;case 1:g=hj(null,g,ot,it,et);break e;case 11:g=Yi(null,g,ot,it,et);break e;case 14:g=$i(null,g,ot,Ci(ot.type,it),et);break e}throw Error(p$3(306,ot,""))}return g;case 0:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),cj(it,g,ot,ut,et);case 1:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),hj(it,g,ot,ut,et);case 3:e:{if(kj(g),it===null)throw Error(p$3(387));ot=g.pendingProps,ct=g.memoizedState,ut=ct.element,lh(it,g),qh(g,ot,null,et);var dt=g.memoizedState;if(ot=dt.element,ct.isDehydrated)if(ct={element:ot,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},g.updateQueue.baseState=ct,g.memoizedState=ct,g.flags&256){ut=Ji(Error(p$3(423)),g),g=lj(it,g,ot,et,ut);break e}else if(ot!==ut){ut=Ji(Error(p$3(424)),g),g=lj(it,g,ot,et,ut);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I$4=!0,zg=null,et=Vg(g,null,ot,et),g.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),ot===ut){g=Zi(it,g,et);break e}Xi(it,g,ot,et)}g=g.child}return g;case 5:return Ah(g),it===null&&Eg(g),ot=g.type,ut=g.pendingProps,ct=it!==null?it.memoizedProps:null,dt=ut.children,Ef(ot,ut)?dt=null:ct!==null&&Ef(ot,ct)&&(g.flags|=32),gj(it,g),Xi(it,g,dt,et),g.child;case 6:return it===null&&Eg(g),null;case 13:return oj(it,g,et);case 4:return yh(g,g.stateNode.containerInfo),ot=g.pendingProps,it===null?g.child=Ug(g,null,ot,et):Xi(it,g,ot,et),g.child;case 11:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),Yi(it,g,ot,ut,et);case 7:return Xi(it,g,g.pendingProps,et),g.child;case 8:return Xi(it,g,g.pendingProps.children,et),g.child;case 12:return Xi(it,g,g.pendingProps.children,et),g.child;case 10:e:{if(ot=g.type._context,ut=g.pendingProps,ct=g.memoizedProps,dt=ut.value,G$1(Wg,ot._currentValue),ot._currentValue=dt,ct!==null)if(He$2(ct.value,dt)){if(ct.children===ut.children&&!Wf.current){g=Zi(it,g,et);break e}}else for(ct=g.child,ct!==null&&(ct.return=g);ct!==null;){var ft=ct.dependencies;if(ft!==null){dt=ct.child;for(var St=ft.firstContext;St!==null;){if(St.context===ot){if(ct.tag===1){St=mh(-1,et&-et),St.tag=2;var kt=ct.updateQueue;if(kt!==null){kt=kt.shared;var Tt=kt.pending;Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),kt.pending=St}}ct.lanes|=et,St=ct.alternate,St!==null&&(St.lanes|=et),bh(ct.return,et,g),ft.lanes|=et;break}St=St.next}}else if(ct.tag===10)dt=ct.type===g.type?null:ct.child;else if(ct.tag===18){if(dt=ct.return,dt===null)throw Error(p$3(341));dt.lanes|=et,ft=dt.alternate,ft!==null&&(ft.lanes|=et),bh(dt,et,g),dt=ct.sibling}else dt=ct.child;if(dt!==null)dt.return=ct;else for(dt=ct;dt!==null;){if(dt===g){dt=null;break}if(ct=dt.sibling,ct!==null){ct.return=dt.return,dt=ct;break}dt=dt.return}ct=dt}Xi(it,g,ut.children,et),g=g.child}return g;case 9:return ut=g.type,ot=g.pendingProps.children,ch(g,et),ut=eh(ut),ot=ot(ut),g.flags|=1,Xi(it,g,ot,et),g.child;case 14:return ot=g.type,ut=Ci(ot,g.pendingProps),ut=Ci(ot.type,ut),$i(it,g,ot,ut,et);case 15:return bj(it,g,g.type,g.pendingProps,et);case 17:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),ij(it,g),g.tag=1,Zf(ot)?(it=!0,cg(g)):it=!1,ch(g,et),Gi(g,ot,ut),Ii(g,ot,ut,et),jj(null,g,ot,!0,it,et);case 19:return xj(it,g,et);case 22:return dj(it,g,et)}throw Error(p$3(156,g.tag))};function Fk(it,g){return ac(it,g)}function $k(it,g,et,ot){this.tag=it,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ot,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,g,et,ot){return new $k(it,g,et,ot)}function aj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function Zk(it){if(typeof it=="function")return aj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function Pg(it,g){var et=it.alternate;return et===null?(et=Bg(it.tag,g,it.key,it.mode),et.elementType=it.elementType,et.type=it.type,et.stateNode=it.stateNode,et.alternate=it,it.alternate=et):(et.pendingProps=g,et.type=it.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=it.flags&14680064,et.childLanes=it.childLanes,et.lanes=it.lanes,et.child=it.child,et.memoizedProps=it.memoizedProps,et.memoizedState=it.memoizedState,et.updateQueue=it.updateQueue,g=it.dependencies,et.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},et.sibling=it.sibling,et.index=it.index,et.ref=it.ref,et}function Rg(it,g,et,ot,ut,ct){var dt=2;if(ot=it,typeof it=="function")aj(it)&&(dt=1);else if(typeof it=="string")dt=5;else e:switch(it){case ya:return Tg(et.children,ut,ct,g);case za:dt=8,ut|=8;break;case Aa:return it=Bg(12,et,g,ut|2),it.elementType=Aa,it.lanes=ct,it;case Ea:return it=Bg(13,et,g,ut),it.elementType=Ea,it.lanes=ct,it;case Fa:return it=Bg(19,et,g,ut),it.elementType=Fa,it.lanes=ct,it;case Ia:return pj(et,ut,ct,g);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:dt=10;break e;case Ca:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,ot=null;break e}throw Error(p$3(130,it==null?it:typeof it,""))}return g=Bg(dt,et,g,ut),g.elementType=it,g.type=ot,g.lanes=ct,g}function Tg(it,g,et,ot){return it=Bg(7,it,ot,g),it.lanes=et,it}function pj(it,g,et,ot){return it=Bg(22,it,ot,g),it.elementType=Ia,it.lanes=et,it.stateNode={isHidden:!1},it}function Qg(it,g,et){return it=Bg(6,it,null,g),it.lanes=et,it}function Sg(it,g,et){return g=Bg(4,it.children!==null?it.children:[],it.key,g),g.lanes=et,g.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},g}function al(it,g,et,ot,ut){this.tag=g,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ot,this.onRecoverableError=ut,this.mutableSourceEagerHydrationData=null}function bl(it,g,et,ot,ut,ct,dt,ft,St){return it=new al(it,g,et,ft,St),g===1?(g=1,ct===!0&&(g|=8)):g=0,ct=Bg(3,null,null,g),it.current=ct,ct.stateNode=it,ct.memoizedState={element:ot,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ct),it}function cl(it,g,et){var ot=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ot==null?null:""+ot,children:it,containerInfo:g,implementation:et}}function dl(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$3(170));var g=it;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$3(171))}if(it.tag===1){var et=it.type;if(Zf(et))return bg(it,et,g)}return g}function el(it,g,et,ot,ut,ct,dt,ft,St){return it=bl(et,ot,!0,it,ut,ct,dt,ft,St),it.context=dl(null),et=it.current,ot=R$3(),ut=yi(et),ct=mh(ot,ut),ct.callback=g??null,nh(et,ct,ut),it.current.lanes=ut,Ac(it,ut,ot),Dk(it,ot),it}function fl(it,g,et,ot){var ut=g.current,ct=R$3(),dt=yi(ut);return et=dl(et),g.context===null?g.context=et:g.pendingContext=et,g=mh(ct,dt),g.payload={element:it},ot=ot===void 0?null:ot,ot!==null&&(g.callback=ot),it=nh(ut,g,dt),it!==null&&(gi(it,ut,dt,ct),oh(it,ut,dt)),dt}function gl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function hl(it,g){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var et=it.retryLane;it.retryLane=et!==0&&et<g?et:g}}function il(it,g){hl(it,g),(it=it.alternate)&&hl(it,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(it){console.error(it)};function ll(it){this._internalRoot=it}ml.prototype.render=ll.prototype.render=function(it){var g=this._internalRoot;if(g===null)throw Error(p$3(409));fl(it,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var g=it.containerInfo;Rk(function(){fl(null,it,null,null)}),g[uf]=null}};function ml(it){this._internalRoot=it}ml.prototype.unstable_scheduleHydration=function(it){if(it){var g=Hc();it={blockedOn:null,target:it,priority:g};for(var et=0;et<Qc.length&&g!==0&&g<Qc[et].priority;et++);Qc.splice(et,0,it),et===0&&Vc(it)}};function nl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(it,g,et,ot,ut){if(ut){if(typeof ot=="function"){var ct=ot;ot=function(){var kt=gl(dt);ct.call(kt)}}var dt=el(g,ot,it,0,null,!1,!1,"",pl);return it._reactRootContainer=dt,it[uf]=dt.current,sf(it.nodeType===8?it.parentNode:it),Rk(),dt}for(;ut=it.lastChild;)it.removeChild(ut);if(typeof ot=="function"){var ft=ot;ot=function(){var kt=gl(St);ft.call(kt)}}var St=bl(it,0,!1,null,null,!1,!1,"",pl);return it._reactRootContainer=St,it[uf]=St.current,sf(it.nodeType===8?it.parentNode:it),Rk(function(){fl(g,St,et,ot)}),St}function rl(it,g,et,ot,ut){var ct=et._reactRootContainer;if(ct){var dt=ct;if(typeof ut=="function"){var ft=ut;ut=function(){var St=gl(dt);ft.call(St)}}fl(g,dt,it,ut)}else dt=ql(et,g,it,ut,ot);return gl(dt)}Ec=function(it){switch(it.tag){case 3:var g=it.stateNode;if(g.current.memoizedState.isDehydrated){var et=tc(g.pendingLanes);et!==0&&(Cc(g,et|1),Dk(g,B$1()),!(K$2&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ot=ih(it,1);if(ot!==null){var ut=R$3();gi(ot,it,1,ut)}}),il(it,1)}};Fc=function(it){if(it.tag===13){var g=ih(it,134217728);if(g!==null){var et=R$3();gi(g,it,134217728,et)}il(it,134217728)}};Gc=function(it){if(it.tag===13){var g=yi(it),et=ih(it,g);if(et!==null){var ot=R$3();gi(et,it,g,ot)}il(it,g)}};Hc=function(){return C$4};Ic=function(it,g){var et=C$4;try{return C$4=it,g()}finally{C$4=et}};yb=function(it,g,et){switch(g){case"input":if(bb(it,et),g=et.name,et.type==="radio"&&g!=null){for(et=it;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<et.length;g++){var ot=et[g];if(ot!==it&&ot.form===it.form){var ut=Db(ot);if(!ut)throw Error(p$3(90));Wa(ot),bb(ot,ut)}}}break;case"textarea":ib(it,et);break;case"select":g=et.value,g!=null&&fb(it,!!et.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(it,g){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$3(200));return cl(it,g,null,et)};reactDom_production_min.createRoot=function(it,g){if(!nl(it))throw Error(p$3(299));var et=!1,ot="",ut=kl;return g!=null&&(g.unstable_strictMode===!0&&(et=!0),g.identifierPrefix!==void 0&&(ot=g.identifierPrefix),g.onRecoverableError!==void 0&&(ut=g.onRecoverableError)),g=bl(it,1,!1,null,null,et,!1,ot,ut),it[uf]=g.current,sf(it.nodeType===8?it.parentNode:it),new ll(g)};reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var g=it._reactInternals;if(g===void 0)throw typeof it.render=="function"?Error(p$3(188)):(it=Object.keys(it).join(","),Error(p$3(268,it)));return it=Zb(g),it=it===null?null:it.stateNode,it};reactDom_production_min.flushSync=function(it){return Rk(it)};reactDom_production_min.hydrate=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!0,et)};reactDom_production_min.hydrateRoot=function(it,g,et){if(!nl(it))throw Error(p$3(405));var ot=et!=null&&et.hydratedSources||null,ut=!1,ct="",dt=kl;if(et!=null&&(et.unstable_strictMode===!0&&(ut=!0),et.identifierPrefix!==void 0&&(ct=et.identifierPrefix),et.onRecoverableError!==void 0&&(dt=et.onRecoverableError)),g=el(g,null,it,1,et??null,ut,!1,ct,dt),it[uf]=g.current,sf(it),ot)for(it=0;it<ot.length;it++)et=ot[it],ut=et._getVersion,ut=ut(et._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[et,ut]:g.mutableSourceEagerHydrationData.push(et,ut);return new ml(g)};reactDom_production_min.render=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!1,et)};reactDom_production_min.unmountComponentAtNode=function(it){if(!ol(it))throw Error(p$3(40));return it._reactRootContainer?(Rk(function(){rl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,g,et,ot){if(!ol(et))throw Error(p$3(200));if(it==null||it._reactInternals===void 0)throw Error(p$3(38));return rl(it,g,et,!1,ot)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(it){console.error(it)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$5=reactDomExports;createRoot=m$5.createRoot,m$5.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$2.apply(this,arguments)}var Action;(function(it){it.Pop="POP",it.Push="PUSH",it.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(it){it===void 0&&(it={});function g(ot,ut){let{pathname:ct,search:dt,hash:ft}=ot.location;return createLocation("",{pathname:ct,search:dt,hash:ft},ut.state&&ut.state.usr||null,ut.state&&ut.state.key||"default")}function et(ot,ut){return typeof ut=="string"?ut:createPath(ut)}return getUrlBasedHistory(g,et,null,it)}function invariant$2(it,g){if(it===!1||it===null||typeof it>"u")throw new Error(g)}function warning$2(it,g){if(!it){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(it,g){return{usr:it.state,key:it.key,idx:g}}function createLocation(it,g,et,ot){return et===void 0&&(et=null),_extends$2({pathname:typeof it=="string"?it:it.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:et,key:g&&g.key||ot||createKey$1()})}function createPath(it){let{pathname:g="/",search:et="",hash:ot=""}=it;return et&&et!=="?"&&(g+=et.charAt(0)==="?"?et:"?"+et),ot&&ot!=="#"&&(g+=ot.charAt(0)==="#"?ot:"#"+ot),g}function parsePath(it){let g={};if(it){let et=it.indexOf("#");et>=0&&(g.hash=it.substr(et),it=it.substr(0,et));let ot=it.indexOf("?");ot>=0&&(g.search=it.substr(ot),it=it.substr(0,ot)),it&&(g.pathname=it)}return g}function getUrlBasedHistory(it,g,et,ot){ot===void 0&&(ot={});let{window:ut=document.defaultView,v5Compat:ct=!1}=ot,dt=ut.history,ft=Action.Pop,St=null,kt=Tt();kt==null&&(kt=0,dt.replaceState(_extends$2({},dt.state,{idx:kt}),""));function Tt(){return(dt.state||{idx:null}).idx}function Rt(){ft=Action.Pop;let Yt=Tt(),zt=Yt==null?null:Yt-kt;kt=Yt,St&&St({action:ft,location:Ht.location,delta:zt})}function jt(Yt,zt){ft=Action.Push;let Kt=createLocation(Ht.location,Yt,zt);et&&et(Kt,Yt),kt=Tt()+1;let en=getHistoryState(Kt,kt),tn=Ht.createHref(Kt);try{dt.pushState(en,"",tn)}catch(on){if(on instanceof DOMException&&on.name==="DataCloneError")throw on;ut.location.assign(tn)}ct&&St&&St({action:ft,location:Ht.location,delta:1})}function Ft(Yt,zt){ft=Action.Replace;let Kt=createLocation(Ht.location,Yt,zt);et&&et(Kt,Yt),kt=Tt();let en=getHistoryState(Kt,kt),tn=Ht.createHref(Kt);dt.replaceState(en,"",tn),ct&&St&&St({action:ft,location:Ht.location,delta:0})}function Bt(Yt){let zt=ut.location.origin!=="null"?ut.location.origin:ut.location.href,Kt=typeof Yt=="string"?Yt:createPath(Yt);return Kt=Kt.replace(/ $/,"%20"),invariant$2(zt,"No window.location.(origin|href) available to create URL for href: "+Kt),new URL(Kt,zt)}let Ht={get action(){return ft},get location(){return it(ut,dt)},listen(Yt){if(St)throw new Error("A history only accepts one active listener");return ut.addEventListener(PopStateEventType,Rt),St=Yt,()=>{ut.removeEventListener(PopStateEventType,Rt),St=null}},createHref(Yt){return g(ut,Yt)},createURL:Bt,encodeLocation(Yt){let zt=Bt(Yt);return{pathname:zt.pathname,search:zt.search,hash:zt.hash}},push:jt,replace:Ft,go(Yt){return dt.go(Yt)}};return Ht}var ResultType;(function(it){it.data="data",it.deferred="deferred",it.redirect="redirect",it.error="error"})(ResultType||(ResultType={}));function matchRoutes(it,g,et){return et===void 0&&(et="/"),matchRoutesImpl(it,g,et,!1)}function matchRoutesImpl(it,g,et,ot){let ut=typeof g=="string"?parsePath(g):g,ct=stripBasename(ut.pathname||"/",et);if(ct==null)return null;let dt=flattenRoutes(it);rankRouteBranches(dt);let ft=null;for(let St=0;ft==null&&St<dt.length;++St){let kt=decodePath(ct);ft=matchRouteBranch(dt[St],kt,ot)}return ft}function flattenRoutes(it,g,et,ot){g===void 0&&(g=[]),et===void 0&&(et=[]),ot===void 0&&(ot="");let ut=(ct,dt,ft)=>{let St={relativePath:ft===void 0?ct.path||"":ft,caseSensitive:ct.caseSensitive===!0,childrenIndex:dt,route:ct};St.relativePath.startsWith("/")&&(invariant$2(St.relativePath.startsWith(ot),'Absolute route path "'+St.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),St.relativePath=St.relativePath.slice(ot.length));let kt=joinPaths([ot,St.relativePath]),Tt=et.concat(St);ct.children&&ct.children.length>0&&(invariant$2(ct.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+kt+'".')),flattenRoutes(ct.children,g,Tt,kt)),!(ct.path==null&&!ct.index)&&g.push({path:kt,score:computeScore(kt,ct.index),routesMeta:Tt})};return it.forEach((ct,dt)=>{var ft;if(ct.path===""||!((ft=ct.path)!=null&&ft.includes("?")))ut(ct,dt);else for(let St of explodeOptionalSegments(ct.path))ut(ct,dt,St)}),g}function explodeOptionalSegments(it){let g=it.split("/");if(g.length===0)return[];let[et,...ot]=g,ut=et.endsWith("?"),ct=et.replace(/\?$/,"");if(ot.length===0)return ut?[ct,""]:[ct];let dt=explodeOptionalSegments(ot.join("/")),ft=[];return ft.push(...dt.map(St=>St===""?ct:[ct,St].join("/"))),ut&&ft.push(...dt),ft.map(St=>it.startsWith("/")&&St===""?"/":St)}function rankRouteBranches(it){it.sort((g,et)=>g.score!==et.score?et.score-g.score:compareIndexes(g.routesMeta.map(ot=>ot.childrenIndex),et.routesMeta.map(ot=>ot.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=it=>it==="*";function computeScore(it,g){let et=it.split("/"),ot=et.length;return et.some(isSplat)&&(ot+=splatPenalty),g&&(ot+=indexRouteValue),et.filter(ut=>!isSplat(ut)).reduce((ut,ct)=>ut+(paramRe.test(ct)?dynamicSegmentValue:ct===""?emptySegmentValue:staticSegmentValue),ot)}function compareIndexes(it,g){return it.length===g.length&&it.slice(0,-1).every((ot,ut)=>ot===g[ut])?it[it.length-1]-g[g.length-1]:0}function matchRouteBranch(it,g,et){et===void 0&&(et=!1);let{routesMeta:ot}=it,ut={},ct="/",dt=[];for(let ft=0;ft<ot.length;++ft){let St=ot[ft],kt=ft===ot.length-1,Tt=ct==="/"?g:g.slice(ct.length)||"/",Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:kt},Tt),jt=St.route;if(!Rt&&kt&&et&&!ot[ot.length-1].route.index&&(Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:!1},Tt)),!Rt)return null;Object.assign(ut,Rt.params),dt.push({params:ut,pathname:joinPaths([ct,Rt.pathname]),pathnameBase:normalizePathname(joinPaths([ct,Rt.pathnameBase])),route:jt}),Rt.pathnameBase!=="/"&&(ct=joinPaths([ct,Rt.pathnameBase]))}return dt}function matchPath(it,g){typeof it=="string"&&(it={path:it,caseSensitive:!1,end:!0});let[et,ot]=compilePath(it.path,it.caseSensitive,it.end),ut=g.match(et);if(!ut)return null;let ct=ut[0],dt=ct.replace(/(.)\/+$/,"$1"),ft=ut.slice(1);return{params:ot.reduce((kt,Tt,Rt)=>{let{paramName:jt,isOptional:Ft}=Tt;if(jt==="*"){let Ht=ft[Rt]||"";dt=ct.slice(0,ct.length-Ht.length).replace(/(.)\/+$/,"$1")}const Bt=ft[Rt];return Ft&&!Bt?kt[jt]=void 0:kt[jt]=(Bt||"").replace(/%2F/g,"/"),kt},{}),pathname:ct,pathnameBase:dt,pattern:it}}function compilePath(it,g,et){g===void 0&&(g=!1),et===void 0&&(et=!0),warning$2(it==="*"||!it.endsWith("*")||it.endsWith("/*"),'Route path "'+it+'" will be treated as if it were '+('"'+it.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+it.replace(/\*$/,"/*")+'".'));let ot=[],ut="^"+it.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,ft,St)=>(ot.push({paramName:ft,isOptional:St!=null}),St?"/?([^\\/]+)?":"/([^\\/]+)"));return it.endsWith("*")?(ot.push({paramName:"*"}),ut+=it==="*"||it==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ut+="\\/*$":it!==""&&it!=="/"&&(ut+="(?:(?=\\/|$))"),[new RegExp(ut,g?void 0:"i"),ot]}function decodePath(it){try{return it.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning$2(!1,'The URL path "'+it+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),it}}function stripBasename(it,g){if(g==="/")return it;if(!it.toLowerCase().startsWith(g.toLowerCase()))return null;let et=g.endsWith("/")?g.length-1:g.length,ot=it.charAt(et);return ot&&ot!=="/"?null:it.slice(et)||"/"}function resolvePath(it,g){g===void 0&&(g="/");let{pathname:et,search:ot="",hash:ut=""}=typeof it=="string"?parsePath(it):it;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,g):g,search:normalizeSearch(ot),hash:normalizeHash(ut)}}function resolvePathname(it,g){let et=g.replace(/\/+$/,"").split("/");return it.split("/").forEach(ut=>{ut===".."?et.length>1&&et.pop():ut!=="."&&et.push(ut)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(it,g,et,ot){return"Cannot include a '"+it+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(it){return it.filter((g,et)=>et===0||g.route.path&&g.route.path.length>0)}function getResolveToMatches(it,g){let et=getPathContributingMatches(it);return g?et.map((ot,ut)=>ut===et.length-1?ot.pathname:ot.pathnameBase):et.map(ot=>ot.pathnameBase)}function resolveTo(it,g,et,ot){ot===void 0&&(ot=!1);let ut;typeof it=="string"?ut=parsePath(it):(ut=_extends$2({},it),invariant$2(!ut.pathname||!ut.pathname.includes("?"),getInvalidPathError("?","pathname","search",ut)),invariant$2(!ut.pathname||!ut.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ut)),invariant$2(!ut.search||!ut.search.includes("#"),getInvalidPathError("#","search","hash",ut)));let ct=it===""||ut.pathname==="",dt=ct?"/":ut.pathname,ft;if(dt==null)ft=et;else{let Rt=g.length-1;if(!ot&&dt.startsWith("..")){let jt=dt.split("/");for(;jt[0]==="..";)jt.shift(),Rt-=1;ut.pathname=jt.join("/")}ft=Rt>=0?g[Rt]:"/"}let St=resolvePath(ut,ft),kt=dt&&dt!=="/"&&dt.endsWith("/"),Tt=(ct||dt===".")&&et.endsWith("/");return!St.pathname.endsWith("/")&&(kt||Tt)&&(St.pathname+="/"),St}const joinPaths=it=>it.join("/").replace(/\/\/+/g,"/"),normalizePathname=it=>it.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=it=>!it||it==="?"?"":it.startsWith("?")?it:"?"+it,normalizeHash=it=>!it||it==="#"?"":it.startsWith("#")?it:"#"+it;function isRouteErrorResponse(it){return it!=null&&typeof it.status=="number"&&typeof it.statusText=="string"&&typeof it.internal=="boolean"&&"data"in it}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(it,g){let{relative:et}=g===void 0?{}:g;useInRouterContext()||invariant$2(!1);let{basename:ot,navigator:ut}=reactExports.useContext(NavigationContext),{hash:ct,pathname:dt,search:ft}=useResolvedPath(it,{relative:et}),St=dt;return ot!=="/"&&(St=dt==="/"?ot:joinPaths([ot,dt])),ut.createHref({pathname:St,search:ft,hash:ct})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(it){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(it)}function useNavigate(){let{isDataRoute:it}=reactExports.useContext(RouteContext);return it?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let it=reactExports.useContext(DataRouterContext),{basename:g,future:et,navigator:ot}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),dt=JSON.stringify(getResolveToMatches(ut,et.v7_relativeSplatPath)),ft=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{ft.current=!0}),reactExports.useCallback(function(kt,Tt){if(Tt===void 0&&(Tt={}),!ft.current)return;if(typeof kt=="number"){ot.go(kt);return}let Rt=resolveTo(kt,JSON.parse(dt),ct,Tt.relative==="path");it==null&&g!=="/"&&(Rt.pathname=Rt.pathname==="/"?g:joinPaths([g,Rt.pathname])),(Tt.replace?ot.replace:ot.push)(Rt,Tt.state,Tt)},[g,ot,dt,ct,it])}function useResolvedPath(it,g){let{relative:et}=g===void 0?{}:g,{future:ot}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),dt=JSON.stringify(getResolveToMatches(ut,ot.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(it,JSON.parse(dt),ct,et==="path"),[it,dt,ct,et])}function useRoutes(it,g){return useRoutesImpl(it,g)}function useRoutesImpl(it,g,et,ot){useInRouterContext()||invariant$2(!1);let{navigator:ut}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),dt=ct[ct.length-1],ft=dt?dt.params:{};dt&&dt.pathname;let St=dt?dt.pathnameBase:"/";dt&&dt.route;let kt=useLocation(),Tt;if(g){var Rt;let Yt=typeof g=="string"?parsePath(g):g;St==="/"||(Rt=Yt.pathname)!=null&&Rt.startsWith(St)||invariant$2(!1),Tt=Yt}else Tt=kt;let jt=Tt.pathname||"/",Ft=jt;if(St!=="/"){let Yt=St.replace(/^\//,"").split("/");Ft="/"+jt.replace(/^\//,"").split("/").slice(Yt.length).join("/")}let Bt=matchRoutes(it,{pathname:Ft}),Ht=_renderMatches(Bt&&Bt.map(Yt=>Object.assign({},Yt,{params:Object.assign({},ft,Yt.params),pathname:joinPaths([St,ut.encodeLocation?ut.encodeLocation(Yt.pathname).pathname:Yt.pathname]),pathnameBase:Yt.pathnameBase==="/"?St:joinPaths([St,ut.encodeLocation?ut.encodeLocation(Yt.pathnameBase).pathname:Yt.pathnameBase])})),ct,et,ot);return g&&Ht?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Tt),navigationType:Action.Pop}},Ht):Ht}function DefaultErrorComponent(){let it=useRouteError(),g=isRouteErrorResponse(it)?it.status+" "+it.statusText:it instanceof Error?it.message:JSON.stringify(it),et=it instanceof Error?it.stack:null,ut={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},ct=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),et?reactExports.createElement("pre",{style:ut},et):null,ct)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,et){return et.location!==g.location||et.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:et.error,location:et.location,revalidation:g.revalidation||et.revalidation}}componentDidCatch(g,et){console.error("React Router caught the following error during render",g,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(it){let{routeContext:g,match:et,children:ot}=it,ut=reactExports.useContext(DataRouterContext);return ut&&ut.static&&ut.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ut.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:g},ot)}function _renderMatches(it,g,et,ot){var ut;if(g===void 0&&(g=[]),et===void 0&&(et=null),ot===void 0&&(ot=null),it==null){var ct;if(!et)return null;if(et.errors)it=et.matches;else if((ct=ot)!=null&&ct.v7_partialHydration&&g.length===0&&!et.initialized&&et.matches.length>0)it=et.matches;else return null}let dt=it,ft=(ut=et)==null?void 0:ut.errors;if(ft!=null){let Tt=dt.findIndex(Rt=>Rt.route.id&&(ft==null?void 0:ft[Rt.route.id])!==void 0);Tt>=0||invariant$2(!1),dt=dt.slice(0,Math.min(dt.length,Tt+1))}let St=!1,kt=-1;if(et&&ot&&ot.v7_partialHydration)for(let Tt=0;Tt<dt.length;Tt++){let Rt=dt[Tt];if((Rt.route.HydrateFallback||Rt.route.hydrateFallbackElement)&&(kt=Tt),Rt.route.id){let{loaderData:jt,errors:Ft}=et,Bt=Rt.route.loader&&jt[Rt.route.id]===void 0&&(!Ft||Ft[Rt.route.id]===void 0);if(Rt.route.lazy||Bt){St=!0,kt>=0?dt=dt.slice(0,kt+1):dt=[dt[0]];break}}}return dt.reduceRight((Tt,Rt,jt)=>{let Ft,Bt=!1,Ht=null,Yt=null;et&&(Ft=ft&&Rt.route.id?ft[Rt.route.id]:void 0,Ht=Rt.route.errorElement||defaultErrorElement,St&&(kt<0&&jt===0?(warningOnce("route-fallback",!1),Bt=!0,Yt=null):kt===jt&&(Bt=!0,Yt=Rt.route.hydrateFallbackElement||null)));let zt=g.concat(dt.slice(0,jt+1)),Kt=()=>{let en;return Ft?en=Ht:Bt?en=Yt:Rt.route.Component?en=reactExports.createElement(Rt.route.Component,null):Rt.route.element?en=Rt.route.element:en=Tt,reactExports.createElement(RenderedRoute,{match:Rt,routeContext:{outlet:Tt,matches:zt,isDataRoute:et!=null},children:en})};return et&&(Rt.route.ErrorBoundary||Rt.route.errorElement||jt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:Ht,error:Ft,children:Kt(),routeContext:{outlet:null,matches:zt,isDataRoute:!0}}):Kt()},null)}var DataRouterHook$1=function(it){return it.UseBlocker="useBlocker",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it}(DataRouterHook$1||{}),DataRouterStateHook$1=function(it){return it.UseBlocker="useBlocker",it.UseLoaderData="useLoaderData",it.UseActionData="useActionData",it.UseRouteError="useRouteError",it.UseNavigation="useNavigation",it.UseRouteLoaderData="useRouteLoaderData",it.UseMatches="useMatches",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it.UseRouteId="useRouteId",it}(DataRouterStateHook$1||{});function useDataRouterContext(it){let g=reactExports.useContext(DataRouterContext);return g||invariant$2(!1),g}function useDataRouterState(it){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$2(!1),g}function useRouteContext(it){let g=reactExports.useContext(RouteContext);return g||invariant$2(!1),g}function useCurrentRouteId(it){let g=useRouteContext(),et=g.matches[g.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useRouteError(){var it;let g=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),ot=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(it=et.errors)==null?void 0:it[ot]}function useNavigateStable(){let{router:it}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),g=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{et.current=!0}),reactExports.useCallback(function(ut,ct){ct===void 0&&(ct={}),et.current&&(typeof ut=="number"?it.navigate(ut):it.navigate(ut,_extends$1({fromRouteId:g},ct)))},[it,g])}const alreadyWarned$1={};function warningOnce(it,g,et){!g&&!alreadyWarned$1[it]&&(alreadyWarned$1[it]=!0)}const alreadyWarned={};function warnOnce(it,g){alreadyWarned[g]||(alreadyWarned[g]=!0,console.warn(g))}const logDeprecation=(it,g,et)=>warnOnce(it," React Router Future Flag Warning: "+g+". "+("You can use the `"+it+"` future flag to opt-in early. ")+("For more information, see "+et+"."));function logV6DeprecationWarnings(it,g){(it==null?void 0:it.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(it==null?void 0:it.v7_relativeSplatPath)===void 0&&(!g||!g.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),g&&(g.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),g.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),g.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),g.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(it){let{to:g,replace:et,state:ot,relative:ut}=it;useInRouterContext()||invariant$2(!1);let{future:ct,static:dt}=reactExports.useContext(NavigationContext),{matches:ft}=reactExports.useContext(RouteContext),{pathname:St}=useLocation(),kt=useNavigate(),Tt=resolveTo(g,getResolveToMatches(ft,ct.v7_relativeSplatPath),St,ut==="path"),Rt=JSON.stringify(Tt);return reactExports.useEffect(()=>kt(JSON.parse(Rt),{replace:et,state:ot,relative:ut}),[kt,Rt,ut,et,ot]),null}function Route(it){invariant$2(!1)}function Router(it){let{basename:g="/",children:et=null,location:ot,navigationType:ut=Action.Pop,navigator:ct,static:dt=!1,future:ft}=it;useInRouterContext()&&invariant$2(!1);let St=g.replace(/^\/*/,"/"),kt=reactExports.useMemo(()=>({basename:St,navigator:ct,static:dt,future:_extends$1({v7_relativeSplatPath:!1},ft)}),[St,ft,ct,dt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:Tt="/",search:Rt="",hash:jt="",state:Ft=null,key:Bt="default"}=ot,Ht=reactExports.useMemo(()=>{let Yt=stripBasename(Tt,St);return Yt==null?null:{location:{pathname:Yt,search:Rt,hash:jt,state:Ft,key:Bt},navigationType:ut}},[St,Tt,Rt,jt,Ft,Bt,ut]);return Ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:kt},reactExports.createElement(LocationContext.Provider,{children:et,value:Ht}))}function Routes(it){let{children:g,location:et}=it;return useRoutes(createRoutesFromChildren(g),et)}new Promise(()=>{});function createRoutesFromChildren(it,g){g===void 0&&(g=[]);let et=[];return reactExports.Children.forEach(it,(ot,ut)=>{if(!reactExports.isValidElement(ot))return;let ct=[...g,ut];if(ot.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(ot.props.children,ct));return}ot.type!==Route&&invariant$2(!1),!ot.props.index||!ot.props.children||invariant$2(!1);let dt={id:ot.props.id||ct.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(dt.children=createRoutesFromChildren(ot.props.children,ct)),et.push(dt)}),et}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ut,ct;for(ct=0;ct<ot.length;ct++)ut=ot[ct],!(g.indexOf(ut)>=0)&&(et[ut]=it[ut]);return et}function isModifiedEvent(it){return!!(it.metaKey||it.altKey||it.ctrlKey||it.shiftKey)}function shouldProcessLinkClick(it,g){return it.button===0&&(!g||g==="_self")&&!isModifiedEvent(it)}function createSearchParams(it){return it===void 0&&(it=""),new URLSearchParams(typeof it=="string"||Array.isArray(it)||it instanceof URLSearchParams?it:Object.keys(it).reduce((g,et)=>{let ot=it[et];return g.concat(Array.isArray(ot)?ot.map(ut=>[et,ut]):[[et,ot]])},[]))}function getSearchParamsForLocation(it,g){let et=createSearchParams(it);return g&&g.forEach((ot,ut)=>{et.has(ut)||g.getAll(ut).forEach(ct=>{et.append(ut,ct)})}),et}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$5[START_TRANSITION];function BrowserRouter(it){let{basename:g,children:et,future:ot,window:ut}=it,ct=reactExports.useRef();ct.current==null&&(ct.current=createBrowserHistory({window:ut,v5Compat:!0}));let dt=ct.current,[ft,St]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:kt}=ot||{},Tt=reactExports.useCallback(Rt=>{kt&&startTransitionImpl?startTransitionImpl(()=>St(Rt)):St(Rt)},[St,kt]);return reactExports.useLayoutEffect(()=>dt.listen(Tt),[dt,Tt]),reactExports.useEffect(()=>logV6DeprecationWarnings(ot),[ot]),reactExports.createElement(Router,{basename:g,children:et,location:ft.location,navigationType:ft.action,navigator:dt,future:ot})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(g,et){let{onClick:ot,relative:ut,reloadDocument:ct,replace:dt,state:ft,target:St,to:kt,preventScrollReset:Tt,viewTransition:Rt}=g,jt=_objectWithoutPropertiesLoose$1(g,_excluded$2),{basename:Ft}=reactExports.useContext(NavigationContext),Bt,Ht=!1;if(typeof kt=="string"&&ABSOLUTE_URL_REGEX.test(kt)&&(Bt=kt,isBrowser$2))try{let en=new URL(window.location.href),tn=kt.startsWith("//")?new URL(en.protocol+kt):new URL(kt),on=stripBasename(tn.pathname,Ft);tn.origin===en.origin&&on!=null?kt=on+tn.search+tn.hash:Ht=!0}catch{}let Yt=useHref(kt,{relative:ut}),zt=useLinkClickHandler(kt,{replace:dt,state:ft,target:St,preventScrollReset:Tt,relative:ut,viewTransition:Rt});function Kt(en){ot&&ot(en),en.defaultPrevented||zt(en)}return reactExports.createElement("a",_extends({},jt,{href:Bt||Yt,onClick:Ht||ct?ot:Kt,ref:et,target:St}))});var DataRouterHook;(function(it){it.UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(it){it.UseFetcher="useFetcher",it.UseFetchers="useFetchers",it.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(it,g){let{target:et,replace:ot,state:ut,preventScrollReset:ct,relative:dt,viewTransition:ft}=g===void 0?{}:g,St=useNavigate(),kt=useLocation(),Tt=useResolvedPath(it,{relative:dt});return reactExports.useCallback(Rt=>{if(shouldProcessLinkClick(Rt,et)){Rt.preventDefault();let jt=ot!==void 0?ot:createPath(kt)===createPath(Tt);St(it,{replace:jt,state:ut,preventScrollReset:ct,relative:dt,viewTransition:ft})}},[kt,St,Tt,ot,ut,et,it,ct,dt,ft])}function useSearchParams(it){let g=reactExports.useRef(createSearchParams(it)),et=reactExports.useRef(!1),ot=useLocation(),ut=reactExports.useMemo(()=>getSearchParamsForLocation(ot.search,et.current?null:g.current),[ot.search]),ct=useNavigate(),dt=reactExports.useCallback((ft,St)=>{const kt=createSearchParams(typeof ft=="function"?ft(ut):ft);et.current=!0,ct("?"+kt,St)},[ct,ut]);return[ut,dt]}function createDOMMotionComponentProxy(it){if(typeof Proxy>"u")return it;const g=new Map,et=(...ot)=>it(...ot);return new Proxy(et,{get:(ot,ut)=>ut==="create"?it:(g.has(ut)||g.set(ut,it(ut)),g.get(ut))})}function isAnimationControls(it){return it!==null&&typeof it=="object"&&typeof it.start=="function"}const isKeyframesTarget=it=>Array.isArray(it);function shallowCompare(it,g){if(!Array.isArray(g))return!1;const et=g.length;if(et!==it.length)return!1;for(let ot=0;ot<et;ot++)if(g[ot]!==it[ot])return!1;return!0}function isVariantLabel(it){return typeof it=="string"||Array.isArray(it)}function getValueState(it){const g=[{},{}];return it==null||it.values.forEach((et,ot)=>{g[0][ot]=et.get(),g[1][ot]=et.getVelocity()}),g}function resolveVariantFromProps(it,g,et,ot){if(typeof g=="function"){const[ut,ct]=getValueState(ot);g=g(et!==void 0?et:it.custom,ut,ct)}if(typeof g=="string"&&(g=it.variants&&it.variants[g]),typeof g=="function"){const[ut,ct]=getValueState(ot);g=g(et!==void 0?et:it.custom,ut,ct)}return g}function resolveVariant(it,g,et){const ot=it.getProps();return resolveVariantFromProps(ot,g,et!==void 0?et:ot.custom,it)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=it=>it*1e3,millisecondsToSeconds=it=>it/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=it=>({type:"spring",stiffness:550,damping:it===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(it,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(it)?it.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(it,g){return it?it[g]||it.default||it:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=it=>it!==null;function getFinalKeyframe(it,{repeat:g,repeatType:et="loop"},ot){const ut=it.filter(isNotNull),ct=g&&et!=="loop"&&g%2===1?0:ut.length-1;return!ct||ot===void 0?ut[ct]:ot}const noop$2=it=>it;let invariant$1=noop$2;function createRenderStep(it){let g=new Set,et=new Set,ot=!1,ut=!1;const ct=new WeakSet;let dt={delta:0,timestamp:0,isProcessing:!1};function ft(kt){ct.has(kt)&&(St.schedule(kt),it()),kt(dt)}const St={schedule:(kt,Tt=!1,Rt=!1)=>{const Ft=Rt&&ot?g:et;return Tt&&ct.add(kt),Ft.has(kt)||Ft.add(kt),kt},cancel:kt=>{et.delete(kt),ct.delete(kt)},process:kt=>{if(dt=kt,ot){ut=!0;return}ot=!0,[g,et]=[et,g],g.forEach(ft),g.clear(),ot=!1,ut&&(ut=!1,St.process(kt))}};return St}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(it,g){let et=!1,ot=!0;const ut={delta:0,timestamp:0,isProcessing:!1},ct=()=>et=!0,dt=stepsOrder.reduce((zt,Kt)=>(zt[Kt]=createRenderStep(ct),zt),{}),{read:ft,resolveKeyframes:St,update:kt,preRender:Tt,render:Rt,postRender:jt}=dt,Ft=()=>{const zt=performance.now();et=!1,ut.delta=ot?1e3/60:Math.max(Math.min(zt-ut.timestamp,maxElapsed),1),ut.timestamp=zt,ut.isProcessing=!0,ft.process(ut),St.process(ut),kt.process(ut),Tt.process(ut),Rt.process(ut),jt.process(ut),ut.isProcessing=!1,et&&g&&(ot=!1,it(Ft))},Bt=()=>{et=!0,ot=!0,ut.isProcessing||it(Ft)};return{schedule:stepsOrder.reduce((zt,Kt)=>{const en=dt[Kt];return zt[Kt]=(tn,on=!1,an=!1)=>(et||Bt(),en.schedule(tn,on,an)),zt},{}),cancel:zt=>{for(let Kt=0;Kt<stepsOrder.length;Kt++)dt[stepsOrder[Kt]].cancel(zt)},state:ut,steps:dt}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),calcBezier=(it,g,et)=>(((1-3*et+3*g)*it+(3*et-6*g))*it+3*g)*it,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(it,g,et,ot,ut){let ct,dt,ft=0;do dt=g+(et-g)/2,ct=calcBezier(dt,ot,ut)-it,ct>0?et=dt:g=dt;while(Math.abs(ct)>subdivisionPrecision&&++ft<subdivisionMaxIterations);return dt}function cubicBezier(it,g,et,ot){if(it===g&&et===ot)return noop$2;const ut=ct=>binarySubdivide(ct,0,1,it,et);return ct=>ct===0||ct===1?ct:calcBezier(ut(ct),g,ot)}const mirrorEasing=it=>g=>g<=.5?it(2*g)/2:(2-it(2*(1-g)))/2,reverseEasing=it=>g=>1-it(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=it=>(it*=2)<1?.5*backIn(it):.5*(2-Math.pow(2,-10*(it-1))),circIn=it=>1-Math.sin(Math.acos(it)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=it=>/^0[^.\s]+$/u.test(it);function isNone(it){return typeof it=="number"?it===0:it!==null?it==="none"||it==="0"||isZeroValueString(it):!0}const isNumericalString=it=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(it),checkStringStartsWith=it=>g=>typeof g=="string"&&g.startsWith(it),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=it=>startsAsVariableToken(it)?singleCssVariableRegex.test(it.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(it){const g=splitCSSVariableRegex.exec(it);if(!g)return[,];const[,et,ot,ut]=g;return[`--${et??ot}`,ut]}function getVariableValue(it,g,et=1){const[ot,ut]=parseCSSVariable(it);if(!ot)return;const ct=window.getComputedStyle(g).getPropertyValue(ot);if(ct){const dt=ct.trim();return isNumericalString(dt)?parseFloat(dt):dt}return isCSSVariableToken(ut)?getVariableValue(ut,g,et+1):ut}const clamp=(it,g,et)=>et>g?g:et<it?it:et,number={test:it=>typeof it=="number",parse:parseFloat,transform:it=>it},alpha$1={...number,transform:it=>clamp(0,1,it)},scale={...number,default:1},createUnitType=it=>({test:g=>typeof g=="string"&&g.endsWith(it)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${it}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:it=>percent.parse(it)/100,transform:it=>percent.transform(it*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=it=>it===number||it===px,getPosFromMatrix=(it,g)=>parseFloat(it.split(", ")[g]),getTranslateFromMatrix=(it,g)=>(et,{transform:ot})=>{if(ot==="none"||!ot)return 0;const ut=ot.match(/^matrix3d\((.+)\)$/u);if(ut)return getPosFromMatrix(ut[1],g);{const ct=ot.match(/^matrix\((.+)\)$/u);return ct?getPosFromMatrix(ct[1],it):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(it=>!transformKeys.has(it));function removeNonTranslationalTransform(it){const g=[];return nonTranslationalTransformKeys.forEach(et=>{const ot=it.getValue(et);ot!==void 0&&(g.push([et,ot.get()]),ot.set(et.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:it},{paddingLeft:g="0",paddingRight:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),height:({y:it},{paddingTop:g="0",paddingBottom:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),top:(it,{top:g})=>parseFloat(g),left:(it,{left:g})=>parseFloat(g),bottom:({y:it},{top:g})=>parseFloat(g)+(it.max-it.min),right:({x:it},{left:g})=>parseFloat(g)+(it.max-it.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=it=>g=>g.test(it),auto={test:it=>it==="auto",parse:it=>it},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=it=>dimensionValueTypes.find(testValueType(it)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const it=Array.from(toResolve).filter(ot=>ot.needsMeasurement),g=new Set(it.map(ot=>ot.element)),et=new Map;g.forEach(ot=>{const ut=removeNonTranslationalTransform(ot);ut.length&&(et.set(ot,ut),ot.render())}),it.forEach(ot=>ot.measureInitialState()),g.forEach(ot=>{ot.render();const ut=et.get(ot);ut&&ut.forEach(([ct,dt])=>{var ft;(ft=ot.getValue(ct))===null||ft===void 0||ft.set(dt)})}),it.forEach(ot=>ot.measureEndState()),it.forEach(ot=>{ot.suspendedScrollY!==void 0&&window.scrollTo(0,ot.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(it=>it.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(it=>{it.readKeyframes(),it.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,et,ot,ut,ct,dt=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=et,this.name=ot,this.motionValue=ut,this.element=ct,this.isAsync=dt}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:et,element:ot,motionValue:ut}=this;for(let ct=0;ct<g.length;ct++)if(g[ct]===null)if(ct===0){const dt=ut==null?void 0:ut.get(),ft=g[g.length-1];if(dt!==void 0)g[0]=dt;else if(ot&&et){const St=ot.readValue(et,ft);St!=null&&(g[0]=St)}g[0]===void 0&&(g[0]=ft),ut&&dt===void 0&&ut.set(g[0])}else g[ct]=g[ct-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=it=>Math.round(it*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(it){return it==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(it,g)=>et=>!!(typeof et=="string"&&singleColorRegex.test(et)&&et.startsWith(it)||g&&!isNullish(et)&&Object.prototype.hasOwnProperty.call(et,g)),splitColor=(it,g,et)=>ot=>{if(typeof ot!="string")return ot;const[ut,ct,dt,ft]=ot.match(floatRegex);return{[it]:parseFloat(ut),[g]:parseFloat(ct),[et]:parseFloat(dt),alpha:ft!==void 0?parseFloat(ft):1}},clampRgbUnit=it=>clamp(0,255,it),rgbUnit={...number,transform:it=>Math.round(clampRgbUnit(it))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:it,green:g,blue:et,alpha:ot=1})=>"rgba("+rgbUnit.transform(it)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(et)+", "+sanitize(alpha$1.transform(ot))+")"};function parseHex(it){let g="",et="",ot="",ut="";return it.length>5?(g=it.substring(1,3),et=it.substring(3,5),ot=it.substring(5,7),ut=it.substring(7,9)):(g=it.substring(1,2),et=it.substring(2,3),ot=it.substring(3,4),ut=it.substring(4,5),g+=g,et+=et,ot+=ot,ut+=ut),{red:parseInt(g,16),green:parseInt(et,16),blue:parseInt(ot,16),alpha:ut?parseInt(ut,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:it,saturation:g,lightness:et,alpha:ot=1})=>"hsla("+Math.round(it)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(et))+", "+sanitize(alpha$1.transform(ot))+")"},color={test:it=>rgba.test(it)||hex.test(it)||hsla.test(it),parse:it=>rgba.test(it)?rgba.parse(it):hsla.test(it)?hsla.parse(it):hex.parse(it),transform:it=>typeof it=="string"?it:it.hasOwnProperty("red")?rgba.transform(it):hsla.transform(it)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(it){var g,et;return isNaN(it)&&typeof it=="string"&&(((g=it.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((et=it.match(colorRegex))===null||et===void 0?void 0:et.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(it){const g=it.toString(),et=[],ot={color:[],number:[],var:[]},ut=[];let ct=0;const ft=g.replace(complexRegex,St=>(color.test(St)?(ot.color.push(ct),ut.push(COLOR_TOKEN),et.push(color.parse(St))):St.startsWith(VAR_FUNCTION_TOKEN)?(ot.var.push(ct),ut.push(VAR_TOKEN),et.push(St)):(ot.number.push(ct),ut.push(NUMBER_TOKEN),et.push(parseFloat(St))),++ct,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:et,split:ft,indexes:ot,types:ut}}function parseComplexValue(it){return analyseComplexValue(it).values}function createTransformer(it){const{split:g,types:et}=analyseComplexValue(it),ot=g.length;return ut=>{let ct="";for(let dt=0;dt<ot;dt++)if(ct+=g[dt],ut[dt]!==void 0){const ft=et[dt];ft===NUMBER_TOKEN?ct+=sanitize(ut[dt]):ft===COLOR_TOKEN?ct+=color.transform(ut[dt]):ct+=ut[dt]}return ct}}const convertNumbersToZero=it=>typeof it=="number"?0:it;function getAnimatableNone$1(it){const g=parseComplexValue(it);return createTransformer(it)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(it){const[g,et]=it.slice(0,-1).split("(");if(g==="drop-shadow")return it;const[ot]=et.match(floatRegex)||[];if(!ot)return it;const ut=et.replace(ot,"");let ct=maxDefaults.has(g)?1:0;return ot!==et&&(ct*=100),g+"("+ct+ut+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:it=>{const g=it.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):it}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=it=>defaultValueTypes[it];function getAnimatableNone(it,g){let et=getDefaultValueType(it);return et!==filter&&(et=complex),et.getAnimatableNone?et.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(it,g,et){let ot=0,ut;for(;ot<it.length&&!ut;){const ct=it[ot];typeof ct=="string"&&!invalidTemplates.has(ct)&&analyseComplexValue(ct).values.length&&(ut=it[ot]),ot++}if(ut&&et)for(const ct of g)it[ct]=getAnimatableNone(et,ut)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,et,ot,ut,ct){super(g,et,ot,ut,ct,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:et,name:ot}=this;if(!et||!et.current)return;super.readKeyframes();for(let St=0;St<g.length;St++){let kt=g[St];if(typeof kt=="string"&&(kt=kt.trim(),isCSSVariableToken(kt))){const Tt=getVariableValue(kt,et.current);Tt!==void 0&&(g[St]=Tt),St===g.length-1&&(this.finalKeyframe=kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(ot)||g.length!==2)return;const[ut,ct]=g,dt=findDimensionValueType(ut),ft=findDimensionValueType(ct);if(dt!==ft)if(isNumOrPxType(dt)&&isNumOrPxType(ft))for(let St=0;St<g.length;St++){const kt=g[St];typeof kt=="string"&&(g[St]=parseFloat(kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:et}=this,ot=[];for(let ut=0;ut<g.length;ut++)isNone(g[ut])&&ot.push(ut);ot.length&&makeNoneKeyframesAnimatable(g,ot,et)}measureInitialState(){const{element:g,unresolvedKeyframes:et,name:ot}=this;if(!g||!g.current)return;ot==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[ot](g.measureViewportBox(),window.getComputedStyle(g.current)),et[0]=this.measuredOrigin;const ut=et[et.length-1];ut!==void 0&&g.getValue(ot,ut).jump(ut,!1)}measureEndState(){var g;const{element:et,name:ot,unresolvedKeyframes:ut}=this;if(!et||!et.current)return;const ct=et.getValue(ot);ct&&ct.jump(this.measuredOrigin,!1);const dt=ut.length-1,ft=ut[dt];ut[dt]=positionalValues[ot](et.measureViewportBox(),window.getComputedStyle(et.current)),ft!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ft),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([St,kt])=>{et.getValue(St).set(kt)}),this.resolveNoneKeyframes()}}function isGenerator(it){return typeof it=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:it=>{now$1=it,queueMicrotask(clearTime)}},isAnimatable=(it,g)=>g==="zIndex"?!1:!!(typeof it=="number"||Array.isArray(it)||typeof it=="string"&&(complex.test(it)||it==="0")&&!it.startsWith("url("));function hasKeyframesChanged(it){const g=it[0];if(it.length===1)return!0;for(let et=0;et<it.length;et++)if(it[et]!==g)return!0}function canAnimate(it,g,et,ot){const ut=it[0];if(ut===null)return!1;if(g==="display"||g==="visibility")return!0;const ct=it[it.length-1],dt=isAnimatable(ut,g),ft=isAnimatable(ct,g);return!dt||!ft?!1:hasKeyframesChanged(it)||(et==="spring"||isGenerator(et))&&ot}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:et=0,type:ot="keyframes",repeat:ut=0,repeatDelay:ct=0,repeatType:dt="loop",...ft}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:et,type:ot,repeat:ut,repeatDelay:ct,repeatType:dt,...ft},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,et){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:ot,type:ut,velocity:ct,delay:dt,onComplete:ft,onUpdate:St,isGenerator:kt}=this.options;if(!kt&&!canAnimate(g,ot,ut,ct))if(dt)this.options.duration=0;else{St==null||St(getFinalKeyframe(g,this.options,et)),ft==null||ft(),this.resolveFinishedPromise();return}const Tt=this.initPlayback(g,et);Tt!==!1&&(this._resolved={keyframes:g,finalKeyframe:et,...Tt},this.onPostResolved())}onPostResolved(){}then(g,et){return this.currentFinishedPromise.then(g,et)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}const progress=(it,g,et)=>{const ot=g-it;return ot===0?1:(et-it)/ot},generateLinearEasing=(it,g,et=10)=>{let ot="";const ut=Math.max(Math.round(g/et),2);for(let ct=0;ct<ut;ct++)ot+=it(progress(0,ut-1,ct))+", ";return`linear(${ot.substring(0,ot.length-2)})`};function velocityPerSecond(it,g){return g?it*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(it,g,et){const ot=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(et-it(ot),g-ot)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:it=springDefaults.duration,bounce:g=springDefaults.bounce,velocity:et=springDefaults.velocity,mass:ot=springDefaults.mass}){let ut,ct,dt=1-g;dt=clamp(springDefaults.minDamping,springDefaults.maxDamping,dt),it=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(it)),dt<1?(ut=kt=>{const Tt=kt*dt,Rt=Tt*it,jt=Tt-et,Ft=calcAngularFreq(kt,dt),Bt=Math.exp(-Rt);return safeMin-jt/Ft*Bt},ct=kt=>{const Rt=kt*dt*it,jt=Rt*et+et,Ft=Math.pow(dt,2)*Math.pow(kt,2)*it,Bt=Math.exp(-Rt),Ht=calcAngularFreq(Math.pow(kt,2),dt);return(-ut(kt)+safeMin>0?-1:1)*((jt-Ft)*Bt)/Ht}):(ut=kt=>{const Tt=Math.exp(-kt*it),Rt=(kt-et)*it+1;return-safeMin+Tt*Rt},ct=kt=>{const Tt=Math.exp(-kt*it),Rt=(et-kt)*(it*it);return Tt*Rt});const ft=5/it,St=approximateRoot(ut,ct,ft);if(it=secondsToMilliseconds(it),isNaN(St))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:it};{const kt=Math.pow(St,2)*ot;return{stiffness:kt,damping:dt*2*Math.sqrt(ot*kt),duration:it}}}const rootIterations=12;function approximateRoot(it,g,et){let ot=et;for(let ut=1;ut<rootIterations;ut++)ot=ot-it(ot)/g(ot);return ot}function calcAngularFreq(it,g){return it*Math.sqrt(1-g*g)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(it){let g=0;const et=50;let ot=it.next(g);for(;!ot.done&&g<maxGeneratorDuration;)g+=et,ot=it.next(g);return g>=maxGeneratorDuration?1/0:g}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(it,g){return g.some(et=>it[et]!==void 0)}function getSpringOptions(it){let g={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...it};if(!isSpringType(it,physicsKeys)&&isSpringType(it,durationKeys))if(it.visualDuration){const et=it.visualDuration,ot=2*Math.PI/(et*1.2),ut=ot*ot,ct=2*clamp(.05,1,1-it.bounce)*Math.sqrt(ut);g={...g,mass:springDefaults.mass,stiffness:ut,damping:ct}}else{const et=findSpring(it);g={...g,...et,mass:springDefaults.mass},g.isResolvedFromDuration=!0}return g}function spring(it=springDefaults.visualDuration,g=springDefaults.bounce){const et=typeof it!="object"?{visualDuration:it,keyframes:[0,1],bounce:g}:it;let{restSpeed:ot,restDelta:ut}=et;const ct=et.keyframes[0],dt=et.keyframes[et.keyframes.length-1],ft={done:!1,value:ct},{stiffness:St,damping:kt,mass:Tt,duration:Rt,velocity:jt,isResolvedFromDuration:Ft}=getSpringOptions({...et,velocity:-millisecondsToSeconds(et.velocity||0)}),Bt=jt||0,Ht=kt/(2*Math.sqrt(St*Tt)),Yt=dt-ct,zt=millisecondsToSeconds(Math.sqrt(St/Tt)),Kt=Math.abs(Yt)<5;ot||(ot=Kt?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),ut||(ut=Kt?springDefaults.restDelta.granular:springDefaults.restDelta.default);let en;if(Ht<1){const on=calcAngularFreq(zt,Ht);en=an=>{const un=Math.exp(-Ht*zt*an);return dt-un*((Bt+Ht*zt*Yt)/on*Math.sin(on*an)+Yt*Math.cos(on*an))}}else if(Ht===1)en=on=>dt-Math.exp(-zt*on)*(Yt+(Bt+zt*Yt)*on);else{const on=zt*Math.sqrt(Ht*Ht-1);en=an=>{const un=Math.exp(-Ht*zt*an),dn=Math.min(on*an,300);return dt-un*((Bt+Ht*zt*Yt)*Math.sinh(dn)+on*Yt*Math.cosh(dn))/on}}const tn={calculatedDuration:Ft&&Rt||null,next:on=>{const an=en(on);if(Ft)ft.done=on>=Rt;else{let un=0;Ht<1&&(un=on===0?secondsToMilliseconds(Bt):calcGeneratorVelocity(en,on,an));const dn=Math.abs(un)<=ot,Sn=Math.abs(dt-an)<=ut;ft.done=dn&&Sn}return ft.value=ft.done?dt:an,ft},toString:()=>{const on=Math.min(calcGeneratorDuration(tn),maxGeneratorDuration),an=generateLinearEasing(un=>tn.next(on*un).value,on,30);return on+"ms "+an}};return tn}function inertia({keyframes:it,velocity:g=0,power:et=.8,timeConstant:ot=325,bounceDamping:ut=10,bounceStiffness:ct=500,modifyTarget:dt,min:ft,max:St,restDelta:kt=.5,restSpeed:Tt}){const Rt=it[0],jt={done:!1,value:Rt},Ft=dn=>ft!==void 0&&dn<ft||St!==void 0&&dn>St,Bt=dn=>ft===void 0?St:St===void 0||Math.abs(ft-dn)<Math.abs(St-dn)?ft:St;let Ht=et*g;const Yt=Rt+Ht,zt=dt===void 0?Yt:dt(Yt);zt!==Yt&&(Ht=zt-Rt);const Kt=dn=>-Ht*Math.exp(-dn/ot),en=dn=>zt+Kt(dn),tn=dn=>{const Sn=Kt(dn),mn=en(dn);jt.done=Math.abs(Sn)<=kt,jt.value=jt.done?zt:mn};let on,an;const un=dn=>{Ft(jt.value)&&(on=dn,an=spring({keyframes:[jt.value,Bt(jt.value)],velocity:calcGeneratorVelocity(en,dn,jt.value),damping:ut,stiffness:ct,restDelta:kt,restSpeed:Tt}))};return un(0),{calculatedDuration:null,next:dn=>{let Sn=!1;return!an&&on===void 0&&(Sn=!0,tn(dn),un(dn)),on!==void 0&&dn>=on?an.next(dn-on):(!Sn&&tn(dn),jt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=it=>Array.isArray(it)&&typeof it[0]!="number",isBezierDefinition=it=>Array.isArray(it)&&typeof it[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=it=>{if(isBezierDefinition(it)){invariant$1(it.length===4);const[g,et,ot,ut]=it;return cubicBezier(g,et,ot,ut)}else if(typeof it=="string")return easingLookup[it];return it},combineFunctions=(it,g)=>et=>g(it(et)),pipe=(...it)=>it.reduce(combineFunctions),mixNumber$1=(it,g,et)=>it+(g-it)*et;function hueToRgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslaToRgba({hue:it,saturation:g,lightness:et,alpha:ot}){it/=360,g/=100,et/=100;let ut=0,ct=0,dt=0;if(!g)ut=ct=dt=et;else{const ft=et<.5?et*(1+g):et+g-et*g,St=2*et-ft;ut=hueToRgb(St,ft,it+1/3),ct=hueToRgb(St,ft,it),dt=hueToRgb(St,ft,it-1/3)}return{red:Math.round(ut*255),green:Math.round(ct*255),blue:Math.round(dt*255),alpha:ot}}function mixImmediate(it,g){return et=>et>0?g:it}const mixLinearColor=(it,g,et)=>{const ot=it*it,ut=et*(g*g-ot)+ot;return ut<0?0:Math.sqrt(ut)},colorTypes=[hex,rgba,hsla],getColorType=it=>colorTypes.find(g=>g.test(it));function asRGBA(it){const g=getColorType(it);if(!g)return!1;let et=g.parse(it);return g===hsla&&(et=hslaToRgba(et)),et}const mixColor=(it,g)=>{const et=asRGBA(it),ot=asRGBA(g);if(!et||!ot)return mixImmediate(it,g);const ut={...et};return ct=>(ut.red=mixLinearColor(et.red,ot.red,ct),ut.green=mixLinearColor(et.green,ot.green,ct),ut.blue=mixLinearColor(et.blue,ot.blue,ct),ut.alpha=mixNumber$1(et.alpha,ot.alpha,ct),rgba.transform(ut))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(it,g){return invisibleValues.has(it)?et=>et<=0?it:g:et=>et>=1?g:it}function mixNumber(it,g){return et=>mixNumber$1(it,g,et)}function getMixer(it){return typeof it=="number"?mixNumber:typeof it=="string"?isCSSVariableToken(it)?mixImmediate:color.test(it)?mixColor:mixComplex:Array.isArray(it)?mixArray:typeof it=="object"?color.test(it)?mixColor:mixObject:mixImmediate}function mixArray(it,g){const et=[...it],ot=et.length,ut=it.map((ct,dt)=>getMixer(ct)(ct,g[dt]));return ct=>{for(let dt=0;dt<ot;dt++)et[dt]=ut[dt](ct);return et}}function mixObject(it,g){const et={...it,...g},ot={};for(const ut in et)it[ut]!==void 0&&g[ut]!==void 0&&(ot[ut]=getMixer(it[ut])(it[ut],g[ut]));return ut=>{for(const ct in ot)et[ct]=ot[ct](ut);return et}}function matchOrder(it,g){var et;const ot=[],ut={color:0,var:0,number:0};for(let ct=0;ct<g.values.length;ct++){const dt=g.types[ct],ft=it.indexes[dt][ut[dt]],St=(et=it.values[ft])!==null&&et!==void 0?et:0;ot[ct]=St,ut[dt]++}return ot}const mixComplex=(it,g)=>{const et=complex.createTransformer(g),ot=analyseComplexValue(it),ut=analyseComplexValue(g);return ot.indexes.var.length===ut.indexes.var.length&&ot.indexes.color.length===ut.indexes.color.length&&ot.indexes.number.length>=ut.indexes.number.length?invisibleValues.has(it)&&!ut.values.length||invisibleValues.has(g)&&!ot.values.length?mixVisibility(it,g):pipe(mixArray(matchOrder(ot,ut),ut.values),et):mixImmediate(it,g)};function mix(it,g,et){return typeof it=="number"&&typeof g=="number"&&typeof et=="number"?mixNumber$1(it,g,et):getMixer(it)(it,g)}function createMixers(it,g,et){const ot=[],ut=et||mix,ct=it.length-1;for(let dt=0;dt<ct;dt++){let ft=ut(it[dt],it[dt+1]);if(g){const St=Array.isArray(g)?g[dt]||noop$2:g;ft=pipe(St,ft)}ot.push(ft)}return ot}function interpolate(it,g,{clamp:et=!0,ease:ot,mixer:ut}={}){const ct=it.length;if(invariant$1(ct===g.length),ct===1)return()=>g[0];if(ct===2&&it[0]===it[1])return()=>g[1];it[0]>it[ct-1]&&(it=[...it].reverse(),g=[...g].reverse());const dt=createMixers(g,ot,ut),ft=dt.length,St=kt=>{let Tt=0;if(ft>1)for(;Tt<it.length-2&&!(kt<it[Tt+1]);Tt++);const Rt=progress(it[Tt],it[Tt+1],kt);return dt[Tt](Rt)};return et?kt=>St(clamp(it[0],it[ct-1],kt)):St}function fillOffset(it,g){const et=it[it.length-1];for(let ot=1;ot<=g;ot++){const ut=progress(0,g,ot);it.push(mixNumber$1(et,1,ut))}}function defaultOffset(it){const g=[0];return fillOffset(g,it.length-1),g}function convertOffsetToTimes(it,g){return it.map(et=>et*g)}function defaultEasing(it,g){return it.map(()=>g||easeInOut).splice(0,it.length-1)}function keyframes({duration:it=300,keyframes:g,times:et,ease:ot="easeInOut"}){const ut=isEasingArray(ot)?ot.map(easingDefinitionToFunction):easingDefinitionToFunction(ot),ct={done:!1,value:g[0]},dt=convertOffsetToTimes(et&&et.length===g.length?et:defaultOffset(g),it),ft=interpolate(dt,g,{ease:Array.isArray(ut)?ut:defaultEasing(g,ut)});return{calculatedDuration:it,next:St=>(ct.value=ft(St),ct.done=St>=it,ct)}}const frameloopDriver=it=>{const g=({timestamp:et})=>it(et);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=it=>it/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:St}=this.options;St&&St()};const{name:et,motionValue:ot,element:ut,keyframes:ct}=this.options,dt=(ut==null?void 0:ut.KeyframeResolver)||KeyframeResolver,ft=(St,kt)=>this.onKeyframesResolved(St,kt);this.resolver=new dt(ct,ft,et,ot,ut),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:et="keyframes",repeat:ot=0,repeatDelay:ut=0,repeatType:ct,velocity:dt=0}=this.options,ft=isGenerator(et)?et:generators[et]||keyframes;let St,kt;ft!==keyframes&&typeof g[0]!="number"&&(St=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const Tt=ft({...this.options,keyframes:g});ct==="mirror"&&(kt=ft({...this.options,keyframes:[...g].reverse(),velocity:-dt})),Tt.calculatedDuration===null&&(Tt.calculatedDuration=calcGeneratorDuration(Tt));const{calculatedDuration:Rt}=Tt,jt=Rt+ut,Ft=jt*(ot+1)-ut;return{generator:Tt,mirroredGenerator:kt,mapPercentToKeyframes:St,calculatedDuration:Rt,resolvedDuration:jt,totalDuration:Ft}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,et=!1){const{resolved:ot}=this;if(!ot){const{keyframes:dn}=this.options;return{done:!0,value:dn[dn.length-1]}}const{finalKeyframe:ut,generator:ct,mirroredGenerator:dt,mapPercentToKeyframes:ft,keyframes:St,calculatedDuration:kt,totalDuration:Tt,resolvedDuration:Rt}=ot;if(this.startTime===null)return ct.next(0);const{delay:jt,repeat:Ft,repeatType:Bt,repeatDelay:Ht,onUpdate:Yt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-Tt/this.speed,this.startTime)),et?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const zt=this.currentTime-jt*(this.speed>=0?1:-1),Kt=this.speed>=0?zt<0:zt>Tt;this.currentTime=Math.max(zt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Tt);let en=this.currentTime,tn=ct;if(Ft){const dn=Math.min(this.currentTime,Tt)/Rt;let Sn=Math.floor(dn),mn=dn%1;!mn&&dn>=1&&(mn=1),mn===1&&Sn--,Sn=Math.min(Sn,Ft+1),!!(Sn%2)&&(Bt==="reverse"?(mn=1-mn,Ht&&(mn-=Ht/Rt)):Bt==="mirror"&&(tn=dt)),en=clamp(0,1,mn)*Rt}const on=Kt?{done:!1,value:St[0]}:tn.next(en);ft&&(on.value=ft(on.value));let{done:an}=on;!Kt&&kt!==null&&(an=this.speed>=0?this.currentTime>=Tt:this.currentTime<=0);const un=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&an);return un&&ut!==void 0&&(on.value=getFinalKeyframe(St,this.options,ut)),Yt&&Yt(on.value),un&&this.finish(),on}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const et=this.playbackSpeed!==g;this.playbackSpeed=g,et&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:et,startTime:ot}=this.options;this.driver||(this.driver=g(ct=>this.tick(ct))),et&&et();const ut=this.driver.now();this.holdTime!==null?this.startTime=ut-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=ut):this.startTime=ot??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(it){return new MainThreadAnimation(it)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(it){let g;return()=>(g===void 0&&(g=it()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(it,g){const et=memo(it);return()=>{var ot;return(ot=supportsFlags[g])!==null&&ot!==void 0?ot:et()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(it){return!!(typeof it=="function"&&supportsLinearEasing()||!it||typeof it=="string"&&(it in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(it)||Array.isArray(it)&&it.every(isWaapiSupportedEasing))}const cubicBezierAsString=([it,g,et,ot])=>`cubic-bezier(${it}, ${g}, ${et}, ${ot})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(it,g){if(it)return typeof it=="function"&&supportsLinearEasing()?generateLinearEasing(it,g):isBezierDefinition(it)?cubicBezierAsString(it):Array.isArray(it)?it.map(et=>mapEasingToNativeEasing(et,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[it]}function startWaapiAnimation(it,g,et,{delay:ot=0,duration:ut=300,repeat:ct=0,repeatType:dt="loop",ease:ft="easeInOut",times:St}={}){const kt={[g]:et};St&&(kt.offset=St);const Tt=mapEasingToNativeEasing(ft,ut);return Array.isArray(Tt)&&(kt.easing=Tt),it.animate(kt,{delay:ot,duration:ut,easing:Array.isArray(Tt)?"linear":Tt,fill:"both",iterations:ct+1,direction:dt==="reverse"?"alternate":"normal"})}function attachTimeline(it,g){it.timeline=g,it.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(it){return isGenerator(it.type)||it.type==="spring"||!isWaapiSupportedEasing(it.ease)}function pregenerateKeyframes(it,g){const et=new MainThreadAnimation({...g,keyframes:it,repeat:0,delay:0,isGenerator:!0});let ot={done:!1,value:it[0]};const ut=[];let ct=0;for(;!ot.done&&ct<maxDuration;)ot=et.sample(ct),ut.push(ot.value),ct+=sampleDelta;return{times:void 0,keyframes:ut,duration:ct-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(it){return it in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:et,motionValue:ot,element:ut,keyframes:ct}=this.options;this.resolver=new DOMKeyframesResolver(ct,(dt,ft)=>this.onKeyframesResolved(dt,ft),et,ot,ut),this.resolver.scheduleResolve()}initPlayback(g,et){var ot;let{duration:ut=300,times:ct,ease:dt,type:ft,motionValue:St,name:kt,startTime:Tt}=this.options;if(!(!((ot=St.owner)===null||ot===void 0)&&ot.current))return!1;if(typeof dt=="string"&&supportsLinearEasing()&&isUnsupportedEase(dt)&&(dt=unsupportedEasingFunctions[dt]),requiresPregeneratedKeyframes(this.options)){const{onComplete:jt,onUpdate:Ft,motionValue:Bt,element:Ht,...Yt}=this.options,zt=pregenerateKeyframes(g,Yt);g=zt.keyframes,g.length===1&&(g[1]=g[0]),ut=zt.duration,ct=zt.times,dt=zt.ease,ft="keyframes"}const Rt=startWaapiAnimation(St.owner.current,kt,g,{...this.options,duration:ut,times:ct,ease:dt});return Rt.startTime=Tt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Rt,this.pendingTimeline),this.pendingTimeline=void 0):Rt.onfinish=()=>{const{onComplete:jt}=this.options;St.set(getFinalKeyframe(g,this.options,et)),jt&&jt(),this.cancel(),this.resolveFinishedPromise()},{animation:Rt,duration:ut,times:ct,type:ft,ease:dt,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:et}=g;return millisecondsToSeconds(et)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:et}=g;return millisecondsToSeconds(et.currentTime||0)}set time(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:et}=g;return et.playbackRate}set speed(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:et}=g;return et.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:et}=g;return et.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:et}=this;if(!et)return noop$2;const{animation:ot}=et;attachTimeline(ot,g)}return noop$2}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.playState==="finished"&&this.updateFinishedPromise(),et.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:et,keyframes:ot,duration:ut,type:ct,ease:dt,times:ft}=g;if(et.playState==="idle"||et.playState==="finished")return;if(this.time){const{motionValue:kt,onUpdate:Tt,onComplete:Rt,element:jt,...Ft}=this.options,Bt=new MainThreadAnimation({...Ft,keyframes:ot,duration:ut,type:ct,ease:dt,times:ft,isGenerator:!0}),Ht=secondsToMilliseconds(this.time);kt.setWithVelocity(Bt.sample(Ht-sampleDelta).value,Bt.sample(Ht).value,sampleDelta)}const{onStop:St}=this.options;St&&St(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:et,name:ot,repeatDelay:ut,repeatType:ct,damping:dt,type:ft}=g;return supportsWaapi()&&ot&&acceleratedValues.has(ot)&&et&&et.owner&&et.owner.current instanceof HTMLElement&&!et.owner.getProps().onUpdate&&!ut&&ct!=="mirror"&&dt!==0&&ft!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,et){return Promise.all(this.animations).then(g).catch(et)}getAll(g){return this.animations[0][g]}setAll(g,et){for(let ot=0;ot<this.animations.length;ot++)this.animations[ot][g]=et}attachTimeline(g,et){const ot=this.animations.map(ut=>supportsScrollTimeline()&&ut.attachTimeline?ut.attachTimeline(g):et(ut));return()=>{ot.forEach((ut,ct)=>{ut&&ut(),this.animations[ct].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let et=0;et<this.animations.length;et++)g=Math.max(g,this.animations[et].duration);return g}runAll(g){this.animations.forEach(et=>et[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:it,delay:g,delayChildren:et,staggerChildren:ot,staggerDirection:ut,repeat:ct,repeatType:dt,repeatDelay:ft,from:St,elapsed:kt,...Tt}){return!!Object.keys(Tt).length}const animateMotionValue=(it,g,et,ot={},ut,ct)=>dt=>{const ft=getValueTransition(ot,it)||{},St=ft.delay||ot.delay||0;let{elapsed:kt=0}=ot;kt=kt-secondsToMilliseconds(St);let Tt={keyframes:Array.isArray(et)?et:[null,et],ease:"easeOut",velocity:g.getVelocity(),...ft,delay:-kt,onUpdate:jt=>{g.set(jt),ft.onUpdate&&ft.onUpdate(jt)},onComplete:()=>{dt(),ft.onComplete&&ft.onComplete()},name:it,motionValue:g,element:ct?void 0:ut};isTransitionDefined(ft)||(Tt={...Tt,...getDefaultTransition(it,Tt)}),Tt.duration&&(Tt.duration=secondsToMilliseconds(Tt.duration)),Tt.repeatDelay&&(Tt.repeatDelay=secondsToMilliseconds(Tt.repeatDelay)),Tt.from!==void 0&&(Tt.keyframes[0]=Tt.from);let Rt=!1;if((Tt.type===!1||Tt.duration===0&&!Tt.repeatDelay)&&(Tt.duration=0,Tt.delay===0&&(Rt=!0)),Rt&&!ct&&g.get()!==void 0){const jt=getFinalKeyframe(Tt.keyframes,ft);if(jt!==void 0)return frame.update(()=>{Tt.onUpdate(jt),Tt.onComplete()}),new GroupPlaybackControls([])}return!ct&&AcceleratedAnimation.supports(Tt)?new AcceleratedAnimation(Tt):new MainThreadAnimation(Tt)},isCustomValue=it=>!!(it&&typeof it=="object"&&it.mix&&it.toValue),resolveFinalValueInKeyframes=it=>isKeyframesTarget(it)?it[it.length-1]||0:it;function addUniqueItem(it,g){it.indexOf(g)===-1&&it.push(g)}function removeItem(it,g){const et=it.indexOf(g);et>-1&&it.splice(et,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,et,ot){const ut=this.subscriptions.length;if(ut)if(ut===1)this.subscriptions[0](g,et,ot);else for(let ct=0;ct<ut;ct++){const dt=this.subscriptions[ct];dt&&dt(g,et,ot)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=it=>!isNaN(parseFloat(it));class MotionValue{constructor(g,et={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(ot,ut=!0)=>{const ct=time.now();this.updatedAt!==ct&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(ot),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),ut&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=et.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,et){this.events[g]||(this.events[g]=new SubscriptionManager);const ot=this.events[g].add(et);return g==="change"?()=>{ot(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:ot}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,et){this.passiveEffect=g,this.stopPassiveEffect=et}set(g,et=!0){!et||!this.passiveEffect?this.updateAndNotify(g,et):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,et,ot){this.set(et),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-ot}jump(g,et=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,et&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const et=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),et)}start(g){return this.stop(),new Promise(et=>{this.hasAnimated=!0,this.animation=g(et),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(it,g){return new MotionValue(it,g)}function setMotionValue(it,g,et){it.hasValue(g)?it.getValue(g).set(et):it.addValue(g,motionValue(et))}function setTarget(it,g){const et=resolveVariant(it,g);let{transitionEnd:ot={},transition:ut={},...ct}=et||{};ct={...ct,...ot};for(const dt in ct){const ft=resolveFinalValueInKeyframes(ct[dt]);setMotionValue(it,dt,ft)}}const camelToDash=it=>it.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(it){return it.props[optimizedAppearDataAttribute]}const isMotionValue=it=>!!(it&&it.getVelocity);function isWillChangeMotionValue(it){return!!(isMotionValue(it)&&it.add)}function addValueToWillChange(it,g){const et=it.getValue("willChange");if(isWillChangeMotionValue(et))return et.add(g)}function shouldBlockAnimation({protectedKeys:it,needsAnimating:g},et){const ot=it.hasOwnProperty(et)&&g[et]!==!0;return g[et]=!1,ot}function animateTarget(it,g,{delay:et=0,transitionOverride:ot,type:ut}={}){var ct;let{transition:dt=it.getDefaultTransition(),transitionEnd:ft,...St}=g;ot&&(dt=ot);const kt=[],Tt=ut&&it.animationState&&it.animationState.getState()[ut];for(const Rt in St){const jt=it.getValue(Rt,(ct=it.latestValues[Rt])!==null&&ct!==void 0?ct:null),Ft=St[Rt];if(Ft===void 0||Tt&&shouldBlockAnimation(Tt,Rt))continue;const Bt={delay:et,...getValueTransition(dt||{},Rt)};let Ht=!1;if(window.MotionHandoffAnimation){const zt=getOptimisedAppearId(it);if(zt){const Kt=window.MotionHandoffAnimation(zt,Rt,frame);Kt!==null&&(Bt.startTime=Kt,Ht=!0)}}addValueToWillChange(it,Rt),jt.start(animateMotionValue(Rt,jt,Ft,it.shouldReduceMotion&&transformProps.has(Rt)?{type:!1}:Bt,it,Ht));const Yt=jt.animation;Yt&&kt.push(Yt)}return ft&&Promise.all(kt).then(()=>{frame.update(()=>{ft&&setTarget(it,ft)})}),kt}function animateVariant(it,g,et={}){var ot;const ut=resolveVariant(it,g,et.type==="exit"?(ot=it.presenceContext)===null||ot===void 0?void 0:ot.custom:void 0);let{transition:ct=it.getDefaultTransition()||{}}=ut||{};et.transitionOverride&&(ct=et.transitionOverride);const dt=ut?()=>Promise.all(animateTarget(it,ut,et)):()=>Promise.resolve(),ft=it.variantChildren&&it.variantChildren.size?(kt=0)=>{const{delayChildren:Tt=0,staggerChildren:Rt,staggerDirection:jt}=ct;return animateChildren(it,g,Tt+kt,Rt,jt,et)}:()=>Promise.resolve(),{when:St}=ct;if(St){const[kt,Tt]=St==="beforeChildren"?[dt,ft]:[ft,dt];return kt().then(()=>Tt())}else return Promise.all([dt(),ft(et.delay)])}function animateChildren(it,g,et=0,ot=0,ut=1,ct){const dt=[],ft=(it.variantChildren.size-1)*ot,St=ut===1?(kt=0)=>kt*ot:(kt=0)=>ft-kt*ot;return Array.from(it.variantChildren).sort(sortByTreeOrder).forEach((kt,Tt)=>{kt.notify("AnimationStart",g),dt.push(animateVariant(kt,g,{...ct,delay:et+St(Tt)}).then(()=>kt.notify("AnimationComplete",g)))}),Promise.all(dt)}function sortByTreeOrder(it,g){return it.sortNodePosition(g)}function animateVisualElement(it,g,et={}){it.notify("AnimationStart",g);let ot;if(Array.isArray(g)){const ut=g.map(ct=>animateVariant(it,ct,et));ot=Promise.all(ut)}else if(typeof g=="string")ot=animateVariant(it,g,et);else{const ut=typeof g=="function"?resolveVariant(it,g,et.custom):g;ot=Promise.all(animateTarget(it,ut,et))}return ot.then(()=>{it.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(it){if(!it)return;if(!it.isControllingVariants){const et=it.parent?getVariantContext(it.parent)||{}:{};return it.props.initial!==void 0&&(et.initial=it.props.initial),et}const g={};for(let et=0;et<numVariantProps;et++){const ot=variantProps[et],ut=it.props[ot];(isVariantLabel(ut)||ut===!1)&&(g[ot]=ut)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(it){return g=>Promise.all(g.map(({animation:et,options:ot})=>animateVisualElement(it,et,ot)))}function createAnimationState(it){let g=animateList(it),et=createState(),ot=!0;const ut=St=>(kt,Tt)=>{var Rt;const jt=resolveVariant(it,Tt,St==="exit"?(Rt=it.presenceContext)===null||Rt===void 0?void 0:Rt.custom:void 0);if(jt){const{transition:Ft,transitionEnd:Bt,...Ht}=jt;kt={...kt,...Ht,...Bt}}return kt};function ct(St){g=St(it)}function dt(St){const{props:kt}=it,Tt=getVariantContext(it.parent)||{},Rt=[],jt=new Set;let Ft={},Bt=1/0;for(let Yt=0;Yt<numAnimationTypes;Yt++){const zt=reversePriorityOrder[Yt],Kt=et[zt],en=kt[zt]!==void 0?kt[zt]:Tt[zt],tn=isVariantLabel(en),on=zt===St?Kt.isActive:null;on===!1&&(Bt=Yt);let an=en===Tt[zt]&&en!==kt[zt]&&tn;if(an&&ot&&it.manuallyAnimateOnMount&&(an=!1),Kt.protectedKeys={...Ft},!Kt.isActive&&on===null||!en&&!Kt.prevProp||isAnimationControls(en)||typeof en=="boolean")continue;const un=checkVariantsDidChange(Kt.prevProp,en);let dn=un||zt===St&&Kt.isActive&&!an&&tn||Yt>Bt&&tn,Sn=!1;const mn=Array.isArray(en)?en:[en];let bn=mn.reduce(ut(zt),{});on===!1&&(bn={});const{prevResolvedValues:En={}}=Kt,kn={...En,...bn},Pn=Mn=>{dn=!0,jt.has(Mn)&&(Sn=!0,jt.delete(Mn)),Kt.needsAnimating[Mn]=!0;const yn=it.getValue(Mn);yn&&(yn.liveStyle=!1)};for(const Mn in kn){const yn=bn[Mn],vn=En[Mn];if(Ft.hasOwnProperty(Mn))continue;let On=!1;isKeyframesTarget(yn)&&isKeyframesTarget(vn)?On=!shallowCompare(yn,vn):On=yn!==vn,On?yn!=null?Pn(Mn):jt.add(Mn):yn!==void 0&&jt.has(Mn)?Pn(Mn):Kt.protectedKeys[Mn]=!0}Kt.prevProp=en,Kt.prevResolvedValues=bn,Kt.isActive&&(Ft={...Ft,...bn}),ot&&it.blockInitialAnimation&&(dn=!1),dn&&(!(an&&un)||Sn)&&Rt.push(...mn.map(Mn=>({animation:Mn,options:{type:zt}})))}if(jt.size){const Yt={};jt.forEach(zt=>{const Kt=it.getBaseTarget(zt),en=it.getValue(zt);en&&(en.liveStyle=!0),Yt[zt]=Kt??null}),Rt.push({animation:Yt})}let Ht=!!Rt.length;return ot&&(kt.initial===!1||kt.initial===kt.animate)&&!it.manuallyAnimateOnMount&&(Ht=!1),ot=!1,Ht?g(Rt):Promise.resolve()}function ft(St,kt){var Tt;if(et[St].isActive===kt)return Promise.resolve();(Tt=it.variantChildren)===null||Tt===void 0||Tt.forEach(jt=>{var Ft;return(Ft=jt.animationState)===null||Ft===void 0?void 0:Ft.setActive(St,kt)}),et[St].isActive=kt;const Rt=dt(St);for(const jt in et)et[jt].protectedKeys={};return Rt}return{animateChanges:dt,setActive:ft,setAnimateFunction:ct,getState:()=>et,reset:()=>{et=createState(),ot=!0}}}function checkVariantsDidChange(it,g){return typeof g=="string"?g!==it:Array.isArray(g)?!shallowCompare(g,it):!1}function createTypeState(it=!1){return{isActive:it,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:et}=this.node.prevProps||{};g!==et&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:et}=this.node.presenceContext,{isPresent:ot}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===ot)return;const ut=this.node.animationState.setActive("exit",!g);et&&!g&&ut.then(()=>et(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(it,g,et){var ot;if(it instanceof Element)return[it];if(typeof it=="string"){let ut=document;g&&(ut=g.current);const ct=(ot=et==null?void 0:et[it])!==null&&ot!==void 0?ot:ut.querySelectorAll(it);return ct?Array.from(ct):[]}return Array.from(it)}function setupGesture(it,g){const et=resolveElements(it),ot=new AbortController,ut={passive:!0,...g,signal:ot.signal};return[et,ut,()=>ot.abort()]}function filterEvents$1(it){return g=>{g.pointerType==="touch"||isDragActive()||it(g)}}function hover(it,g,et={}){const[ot,ut,ct]=setupGesture(it,et),dt=filterEvents$1(ft=>{const{target:St}=ft,kt=g(ft);if(!kt||!St)return;const Tt=filterEvents$1(Rt=>{kt(Rt),St.removeEventListener("pointerleave",Tt)});St.addEventListener("pointerleave",Tt,ut)});return ot.forEach(ft=>{ft.addEventListener("pointerenter",dt,ut)}),ct}const isPrimaryPointer=it=>it.pointerType==="mouse"?typeof it.button!="number"||it.button<=0:it.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(it){return g=>{g.key==="Enter"&&it(g)}}function firePointerEvent(it,g){it.dispatchEvent(new PointerEvent("pointer"+g,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(it,g)=>{const et=it.currentTarget;if(!et)return;const ot=filterEvents(()=>{if(isPressing.has(et))return;firePointerEvent(et,"down");const ut=filterEvents(()=>{firePointerEvent(et,"up")}),ct=()=>firePointerEvent(et,"cancel");et.addEventListener("keyup",ut,g),et.addEventListener("blur",ct,g)});et.addEventListener("keydown",ot,g),et.addEventListener("blur",()=>et.removeEventListener("keydown",ot),g)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(it){return focusableElements.has(it.tagName)||it.tabIndex!==-1}const isNodeOrChild=(it,g)=>g?it===g?!0:isNodeOrChild(it,g.parentElement):!1;function isValidPressEvent(it){return isPrimaryPointer(it)&&!isDragActive()}function press(it,g,et={}){const[ot,ut,ct]=setupGesture(it,et),dt=ft=>{const St=ft.currentTarget;if(!isValidPressEvent(ft)||isPressing.has(St))return;isPressing.add(St);const kt=g(ft),Tt=(Ft,Bt)=>{window.removeEventListener("pointerup",Rt),window.removeEventListener("pointercancel",jt),!(!isValidPressEvent(Ft)||!isPressing.has(St))&&(isPressing.delete(St),kt&&kt(Ft,{success:Bt}))},Rt=Ft=>{Tt(Ft,et.useGlobalTarget||isNodeOrChild(St,Ft.target))},jt=Ft=>{Tt(Ft,!1)};window.addEventListener("pointerup",Rt,ut),window.addEventListener("pointercancel",jt,ut)};return ot.forEach(ft=>{isElementKeyboardAccessible(ft)||(ft.tabIndex=0),(et.useGlobalTarget?window:ft).addEventListener("pointerdown",dt,ut),ft.addEventListener("focus",kt=>enableKeyboardPress(kt,ut),ut)}),ct}function setDragLock(it){return it==="x"||it==="y"?isDragging[it]?null:(isDragging[it]=!0,()=>{isDragging[it]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(it){return{point:{x:it.pageX,y:it.pageY}}}const addPointerInfo=it=>g=>isPrimaryPointer(g)&&it(g,extractEventInfo(g));function addDomEvent(it,g,et,ot={passive:!0}){return it.addEventListener(g,et,ot),()=>it.removeEventListener(g,et)}function addPointerEvent(it,g,et,ot){return addDomEvent(it,g,addPointerInfo(et),ot)}const distance=(it,g)=>Math.abs(it-g);function distance2D(it,g){const et=distance(it.x,g.x),ot=distance(it.y,g.y);return Math.sqrt(et**2+ot**2)}class PanSession{constructor(g,et,{transformPagePoint:ot,contextWindow:ut,dragSnapToOrigin:ct=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Rt=getPanInfo(this.lastMoveEventInfo,this.history),jt=this.startEvent!==null,Ft=distance2D(Rt.offset,{x:0,y:0})>=3;if(!jt&&!Ft)return;const{point:Bt}=Rt,{timestamp:Ht}=frameData;this.history.push({...Bt,timestamp:Ht});const{onStart:Yt,onMove:zt}=this.handlers;jt||(Yt&&Yt(this.lastMoveEvent,Rt),this.startEvent=this.lastMoveEvent),zt&&zt(this.lastMoveEvent,Rt)},this.handlePointerMove=(Rt,jt)=>{this.lastMoveEvent=Rt,this.lastMoveEventInfo=transformPoint(jt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Rt,jt)=>{this.end();const{onEnd:Ft,onSessionEnd:Bt,resumeAnimation:Ht}=this.handlers;if(this.dragSnapToOrigin&&Ht&&Ht(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Yt=getPanInfo(Rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(jt,this.transformPagePoint),this.history);this.startEvent&&Ft&&Ft(Rt,Yt),Bt&&Bt(Rt,Yt)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=ct,this.handlers=et,this.transformPagePoint=ot,this.contextWindow=ut||window;const dt=extractEventInfo(g),ft=transformPoint(dt,this.transformPagePoint),{point:St}=ft,{timestamp:kt}=frameData;this.history=[{...St,timestamp:kt}];const{onSessionStart:Tt}=et;Tt&&Tt(g,getPanInfo(ft,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(it,g){return g?{point:g(it.point)}:it}function subtractPoint(it,g){return{x:it.x-g.x,y:it.y-g.y}}function getPanInfo({point:it},g){return{point:it,delta:subtractPoint(it,lastDevicePoint(g)),offset:subtractPoint(it,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(it){return it[0]}function lastDevicePoint(it){return it[it.length-1]}function getVelocity(it,g){if(it.length<2)return{x:0,y:0};let et=it.length-1,ot=null;const ut=lastDevicePoint(it);for(;et>=0&&(ot=it[et],!(ut.timestamp-ot.timestamp>secondsToMilliseconds(g)));)et--;if(!ot)return{x:0,y:0};const ct=millisecondsToSeconds(ut.timestamp-ot.timestamp);if(ct===0)return{x:0,y:0};const dt={x:(ut.x-ot.x)/ct,y:(ut.y-ot.y)/ct};return dt.x===1/0&&(dt.x=0),dt.y===1/0&&(dt.y=0),dt}function isRefObject(it){return it&&typeof it=="object"&&Object.prototype.hasOwnProperty.call(it,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(it){return it.max-it.min}function isNear$1(it,g,et){return Math.abs(it-g)<=et}function calcAxisDelta(it,g,et,ot=.5){it.origin=ot,it.originPoint=mixNumber$1(g.min,g.max,it.origin),it.scale=calcLength(et)/calcLength(g),it.translate=mixNumber$1(et.min,et.max,it.origin)-it.originPoint,(it.scale>=SCALE_MIN&&it.scale<=SCALE_MAX||isNaN(it.scale))&&(it.scale=1),(it.translate>=TRANSLATE_MIN&&it.translate<=TRANSLATE_MAX||isNaN(it.translate))&&(it.translate=0)}function calcBoxDelta(it,g,et,ot){calcAxisDelta(it.x,g.x,et.x,ot?ot.originX:void 0),calcAxisDelta(it.y,g.y,et.y,ot?ot.originY:void 0)}function calcRelativeAxis(it,g,et){it.min=et.min+g.min,it.max=it.min+calcLength(g)}function calcRelativeBox(it,g,et){calcRelativeAxis(it.x,g.x,et.x),calcRelativeAxis(it.y,g.y,et.y)}function calcRelativeAxisPosition(it,g,et){it.min=g.min-et.min,it.max=it.min+calcLength(g)}function calcRelativePosition(it,g,et){calcRelativeAxisPosition(it.x,g.x,et.x),calcRelativeAxisPosition(it.y,g.y,et.y)}function applyConstraints(it,{min:g,max:et},ot){return g!==void 0&&it<g?it=ot?mixNumber$1(g,it,ot.min):Math.max(it,g):et!==void 0&&it>et&&(it=ot?mixNumber$1(et,it,ot.max):Math.min(it,et)),it}function calcRelativeAxisConstraints(it,g,et){return{min:g!==void 0?it.min+g:void 0,max:et!==void 0?it.max+et-(it.max-it.min):void 0}}function calcRelativeConstraints(it,{top:g,left:et,bottom:ot,right:ut}){return{x:calcRelativeAxisConstraints(it.x,et,ut),y:calcRelativeAxisConstraints(it.y,g,ot)}}function calcViewportAxisConstraints(it,g){let et=g.min-it.min,ot=g.max-it.max;return g.max-g.min<it.max-it.min&&([et,ot]=[ot,et]),{min:et,max:ot}}function calcViewportConstraints(it,g){return{x:calcViewportAxisConstraints(it.x,g.x),y:calcViewportAxisConstraints(it.y,g.y)}}function calcOrigin$1(it,g){let et=.5;const ot=calcLength(it),ut=calcLength(g);return ut>ot?et=progress(g.min,g.max-ot,it.min):ot>ut&&(et=progress(it.min,it.max-ut,g.min)),clamp(0,1,et)}function rebaseAxisConstraints(it,g){const et={};return g.min!==void 0&&(et.min=g.min-it.min),g.max!==void 0&&(et.max=g.max-it.min),et}const defaultElastic=.35;function resolveDragElastic(it=defaultElastic){return it===!1?it=0:it===!0&&(it=defaultElastic),{x:resolveAxisElastic(it,"left","right"),y:resolveAxisElastic(it,"top","bottom")}}function resolveAxisElastic(it,g,et){return{min:resolvePointElastic(it,g),max:resolvePointElastic(it,et)}}function resolvePointElastic(it,g){return typeof it=="number"?it:it[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(it){return[it("x"),it("y")]}function convertBoundingBoxToBox({top:it,left:g,right:et,bottom:ot}){return{x:{min:g,max:et},y:{min:it,max:ot}}}function convertBoxToBoundingBox({x:it,y:g}){return{top:g.min,right:it.max,bottom:g.max,left:it.min}}function transformBoxPoints(it,g){if(!g)return it;const et=g({x:it.left,y:it.top}),ot=g({x:it.right,y:it.bottom});return{top:et.y,left:et.x,bottom:ot.y,right:ot.x}}function isIdentityScale(it){return it===void 0||it===1}function hasScale({scale:it,scaleX:g,scaleY:et}){return!isIdentityScale(it)||!isIdentityScale(g)||!isIdentityScale(et)}function hasTransform(it){return hasScale(it)||has2DTranslate(it)||it.z||it.rotate||it.rotateX||it.rotateY||it.skewX||it.skewY}function has2DTranslate(it){return is2DTranslate(it.x)||is2DTranslate(it.y)}function is2DTranslate(it){return it&&it!=="0%"}function scalePoint(it,g,et){const ot=it-et,ut=g*ot;return et+ut}function applyPointDelta(it,g,et,ot,ut){return ut!==void 0&&(it=scalePoint(it,ut,ot)),scalePoint(it,et,ot)+g}function applyAxisDelta(it,g=0,et=1,ot,ut){it.min=applyPointDelta(it.min,g,et,ot,ut),it.max=applyPointDelta(it.max,g,et,ot,ut)}function applyBoxDelta(it,{x:g,y:et}){applyAxisDelta(it.x,g.translate,g.scale,g.originPoint),applyAxisDelta(it.y,et.translate,et.scale,et.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(it,g,et,ot=!1){const ut=et.length;if(!ut)return;g.x=g.y=1;let ct,dt;for(let ft=0;ft<ut;ft++){ct=et[ft],dt=ct.projectionDelta;const{visualElement:St}=ct.options;St&&St.props.style&&St.props.style.display==="contents"||(ot&&ct.options.layoutScroll&&ct.scroll&&ct!==ct.root&&transformBox(it,{x:-ct.scroll.offset.x,y:-ct.scroll.offset.y}),dt&&(g.x*=dt.x.scale,g.y*=dt.y.scale,applyBoxDelta(it,dt)),ot&&hasTransform(ct.latestValues)&&transformBox(it,ct.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(it,g){it.min=it.min+g,it.max=it.max+g}function transformAxis(it,g,et,ot,ut=.5){const ct=mixNumber$1(it.min,it.max,ut);applyAxisDelta(it,g,et,ct,ot)}function transformBox(it,g){transformAxis(it.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(it.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(it,g){return convertBoundingBoxToBox(transformBoxPoints(it.getBoundingClientRect(),g))}function measurePageBox(it,g,et){const ot=measureViewportBox(it,et),{scroll:ut}=g;return ut&&(translateAxis(ot.x,ut.offset.x),translateAxis(ot.y,ut.offset.y)),ot}const getContextWindow=({current:it})=>it?it.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:et=!1}={}){const{presenceContext:ot}=this.visualElement;if(ot&&ot.isPresent===!1)return;const ut=Tt=>{const{dragSnapToOrigin:Rt}=this.getProps();Rt?this.pauseAnimation():this.stopAnimation(),et&&this.snapToCursor(extractEventInfo(Tt).point)},ct=(Tt,Rt)=>{const{drag:jt,dragPropagation:Ft,onDragStart:Bt}=this.getProps();if(jt&&!Ft&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(jt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Yt=>{let zt=this.getAxisMotionValue(Yt).get()||0;if(percent.test(zt)){const{projection:Kt}=this.visualElement;if(Kt&&Kt.layout){const en=Kt.layout.layoutBox[Yt];en&&(zt=calcLength(en)*(parseFloat(zt)/100))}}this.originPoint[Yt]=zt}),Bt&&frame.postRender(()=>Bt(Tt,Rt)),addValueToWillChange(this.visualElement,"transform");const{animationState:Ht}=this.visualElement;Ht&&Ht.setActive("whileDrag",!0)},dt=(Tt,Rt)=>{const{dragPropagation:jt,dragDirectionLock:Ft,onDirectionLock:Bt,onDrag:Ht}=this.getProps();if(!jt&&!this.openDragLock)return;const{offset:Yt}=Rt;if(Ft&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Yt),this.currentDirection!==null&&Bt&&Bt(this.currentDirection);return}this.updateAxis("x",Rt.point,Yt),this.updateAxis("y",Rt.point,Yt),this.visualElement.render(),Ht&&Ht(Tt,Rt)},ft=(Tt,Rt)=>this.stop(Tt,Rt),St=()=>eachAxis(Tt=>{var Rt;return this.getAnimationState(Tt)==="paused"&&((Rt=this.getAxisMotionValue(Tt).animation)===null||Rt===void 0?void 0:Rt.play())}),{dragSnapToOrigin:kt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:ut,onStart:ct,onMove:dt,onSessionEnd:ft,resumeAnimation:St},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:kt,contextWindow:getContextWindow(this.visualElement)})}stop(g,et){const ot=this.isDragging;if(this.cancel(),!ot)return;const{velocity:ut}=et;this.startAnimation(ut);const{onDragEnd:ct}=this.getProps();ct&&frame.postRender(()=>ct(g,et))}cancel(){this.isDragging=!1;const{projection:g,animationState:et}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:ot}=this.getProps();!ot&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),et&&et.setActive("whileDrag",!1)}updateAxis(g,et,ot){const{drag:ut}=this.getProps();if(!ot||!shouldDrag(g,ut,this.currentDirection))return;const ct=this.getAxisMotionValue(g);let dt=this.originPoint[g]+ot[g];this.constraints&&this.constraints[g]&&(dt=applyConstraints(dt,this.constraints[g],this.elastic[g])),ct.set(dt)}resolveConstraints(){var g;const{dragConstraints:et,dragElastic:ot}=this.getProps(),ut=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,ct=this.constraints;et&&isRefObject(et)?this.constraints||(this.constraints=this.resolveRefConstraints()):et&&ut?this.constraints=calcRelativeConstraints(ut.layoutBox,et):this.constraints=!1,this.elastic=resolveDragElastic(ot),ct!==this.constraints&&ut&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(dt=>{this.constraints!==!1&&this.getAxisMotionValue(dt)&&(this.constraints[dt]=rebaseAxisConstraints(ut.layoutBox[dt],this.constraints[dt]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:et}=this.getProps();if(!g||!isRefObject(g))return!1;const ot=g.current,{projection:ut}=this.visualElement;if(!ut||!ut.layout)return!1;const ct=measurePageBox(ot,ut.root,this.visualElement.getTransformPagePoint());let dt=calcViewportConstraints(ut.layout.layoutBox,ct);if(et){const ft=et(convertBoxToBoundingBox(dt));this.hasMutatedConstraints=!!ft,ft&&(dt=convertBoundingBoxToBox(ft))}return dt}startAnimation(g){const{drag:et,dragMomentum:ot,dragElastic:ut,dragTransition:ct,dragSnapToOrigin:dt,onDragTransitionEnd:ft}=this.getProps(),St=this.constraints||{},kt=eachAxis(Tt=>{if(!shouldDrag(Tt,et,this.currentDirection))return;let Rt=St&&St[Tt]||{};dt&&(Rt={min:0,max:0});const jt=ut?200:1e6,Ft=ut?40:1e7,Bt={type:"inertia",velocity:ot?g[Tt]:0,bounceStiffness:jt,bounceDamping:Ft,timeConstant:750,restDelta:1,restSpeed:10,...ct,...Rt};return this.startAxisValueAnimation(Tt,Bt)});return Promise.all(kt).then(ft)}startAxisValueAnimation(g,et){const ot=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),ot.start(animateMotionValue(g,ot,0,et,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.pause()})}getAnimationState(g){var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.state}getAxisMotionValue(g){const et=`_drag${g.toUpperCase()}`,ot=this.visualElement.getProps(),ut=ot[et];return ut||this.visualElement.getValue(g,(ot.initial?ot.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(et=>{const{drag:ot}=this.getProps();if(!shouldDrag(et,ot,this.currentDirection))return;const{projection:ut}=this.visualElement,ct=this.getAxisMotionValue(et);if(ut&&ut.layout){const{min:dt,max:ft}=ut.layout.layoutBox[et];ct.set(g[et]-mixNumber$1(dt,ft,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:et}=this.getProps(),{projection:ot}=this.visualElement;if(!isRefObject(et)||!ot||!this.constraints)return;this.stopAnimation();const ut={x:0,y:0};eachAxis(dt=>{const ft=this.getAxisMotionValue(dt);if(ft&&this.constraints!==!1){const St=ft.get();ut[dt]=calcOrigin$1({min:St,max:St},this.constraints[dt])}});const{transformTemplate:ct}=this.visualElement.getProps();this.visualElement.current.style.transform=ct?ct({},""):"none",ot.root&&ot.root.updateScroll(),ot.updateLayout(),this.resolveConstraints(),eachAxis(dt=>{if(!shouldDrag(dt,g,null))return;const ft=this.getAxisMotionValue(dt),{min:St,max:kt}=this.constraints[dt];ft.set(mixNumber$1(St,kt,ut[dt]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,et=addPointerEvent(g,"pointerdown",St=>{const{drag:kt,dragListener:Tt=!0}=this.getProps();kt&&Tt&&this.start(St)}),ot=()=>{const{dragConstraints:St}=this.getProps();isRefObject(St)&&St.current&&(this.constraints=this.resolveRefConstraints())},{projection:ut}=this.visualElement,ct=ut.addEventListener("measure",ot);ut&&!ut.layout&&(ut.root&&ut.root.updateScroll(),ut.updateLayout()),frame.read(ot);const dt=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ft=ut.addEventListener("didUpdate",({delta:St,hasLayoutChanged:kt})=>{this.isDragging&&kt&&(eachAxis(Tt=>{const Rt=this.getAxisMotionValue(Tt);Rt&&(this.originPoint[Tt]+=St[Tt].translate,Rt.set(Rt.get()+St[Tt].translate))}),this.visualElement.render())});return()=>{dt(),et(),ct(),ft&&ft()}}getProps(){const g=this.visualElement.getProps(),{drag:et=!1,dragDirectionLock:ot=!1,dragPropagation:ut=!1,dragConstraints:ct=!1,dragElastic:dt=defaultElastic,dragMomentum:ft=!0}=g;return{...g,drag:et,dragDirectionLock:ot,dragPropagation:ut,dragConstraints:ct,dragElastic:dt,dragMomentum:ft}}}function shouldDrag(it,g,et){return(g===!0||g===it)&&(et===null||et===it)}function getCurrentDirection(it,g=10){let et=null;return Math.abs(it.y)>g?et="y":Math.abs(it.x)>g&&(et="x"),et}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=it=>(g,et)=>{it&&frame.postRender(()=>it(g,et))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:et,onPan:ot,onPanEnd:ut}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(et),onMove:ot,onEnd:(ct,dt)=>{delete this.session,ut&&frame.postRender(()=>ut(ct,dt))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const it=reactExports.useContext(PresenceContext);if(it===null)return[!0,null];const{isPresent:g,onExitComplete:et,register:ot}=it,ut=reactExports.useId();reactExports.useEffect(()=>ot(ut),[]);const ct=reactExports.useCallback(()=>et&&et(ut),[ut,et]);return!g&&et?[!1,ct]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(it,g){return g.max===g.min?0:it/(g.max-g.min)*100}const correctBorderRadius={correct:(it,g)=>{if(!g.target)return it;if(typeof it=="string")if(px.test(it))it=parseFloat(it);else return it;const et=pixelsToPercent(it,g.target.x),ot=pixelsToPercent(it,g.target.y);return`${et}% ${ot}%`}},correctBoxShadow={correct:(it,{treeScale:g,projectionDelta:et})=>{const ot=it,ut=complex.parse(it);if(ut.length>5)return ot;const ct=complex.createTransformer(it),dt=typeof ut[0]!="number"?1:0,ft=et.x.scale*g.x,St=et.y.scale*g.y;ut[0+dt]/=ft,ut[1+dt]/=St;const kt=mixNumber$1(ft,St,.5);return typeof ut[2+dt]=="number"&&(ut[2+dt]/=kt),typeof ut[3+dt]=="number"&&(ut[3+dt]/=kt),ct(ut)}},scaleCorrectors={};function addScaleCorrector(it){Object.assign(scaleCorrectors,it)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot,layoutId:ut}=this.props,{projection:ct}=g;addScaleCorrector(defaultScaleCorrectors),ct&&(et.group&&et.group.add(ct),ot&&ot.register&&ut&&ot.register(ct),ct.root.didUpdate(),ct.addEventListener("animationComplete",()=>{this.safeToRemove()}),ct.setOptions({...ct.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:et,visualElement:ot,drag:ut,isPresent:ct}=this.props,dt=ot.projection;return dt&&(dt.isPresent=ct,ut||g.layoutDependency!==et||et===void 0?dt.willUpdate():this.safeToRemove(),g.isPresent!==ct&&(ct?dt.promote():dt.relegate()||frame.postRender(()=>{const ft=dt.getStack();(!ft||!ft.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot}=this.props,{projection:ut}=g;ut&&(ut.scheduleCheckAfterUnmount(),et&&et.group&&et.group.remove(ut),ot&&ot.deregister&&ot.deregister(ut))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(it){const[g,et]=usePresence(),ot=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...it,layoutGroup:ot,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:et})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=it=>typeof it=="string"?parseFloat(it):it,isPx=it=>typeof it=="number"||px.test(it);function mixValues(it,g,et,ot,ut,ct){ut?(it.opacity=mixNumber$1(0,et.opacity!==void 0?et.opacity:1,easeCrossfadeIn(ot)),it.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(ot))):ct&&(it.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,et.opacity!==void 0?et.opacity:1,ot));for(let dt=0;dt<numBorders;dt++){const ft=`border${borders[dt]}Radius`;let St=getRadius(g,ft),kt=getRadius(et,ft);if(St===void 0&&kt===void 0)continue;St||(St=0),kt||(kt=0),St===0||kt===0||isPx(St)===isPx(kt)?(it[ft]=Math.max(mixNumber$1(asNumber(St),asNumber(kt),ot),0),(percent.test(kt)||percent.test(St))&&(it[ft]+="%")):it[ft]=kt}(g.rotate||et.rotate)&&(it.rotate=mixNumber$1(g.rotate||0,et.rotate||0,ot))}function getRadius(it,g){return it[g]!==void 0?it[g]:it.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(it,g,et){return ot=>ot<it?0:ot>g?1:et(progress(it,g,ot))}function copyAxisInto(it,g){it.min=g.min,it.max=g.max}function copyBoxInto(it,g){copyAxisInto(it.x,g.x),copyAxisInto(it.y,g.y)}function copyAxisDeltaInto(it,g){it.translate=g.translate,it.scale=g.scale,it.originPoint=g.originPoint,it.origin=g.origin}function removePointDelta(it,g,et,ot,ut){return it-=g,it=scalePoint(it,1/et,ot),ut!==void 0&&(it=scalePoint(it,1/ut,ot)),it}function removeAxisDelta(it,g=0,et=1,ot=.5,ut,ct=it,dt=it){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(dt.min,dt.max,g/100)-dt.min),typeof g!="number")return;let ft=mixNumber$1(ct.min,ct.max,ot);it===ct&&(ft-=g),it.min=removePointDelta(it.min,g,et,ft,ut),it.max=removePointDelta(it.max,g,et,ft,ut)}function removeAxisTransforms(it,g,[et,ot,ut],ct,dt){removeAxisDelta(it,g[et],g[ot],g[ut],g.scale,ct,dt)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(it,g,et,ot){removeAxisTransforms(it.x,g,xKeys,et?et.x:void 0,ot?ot.x:void 0),removeAxisTransforms(it.y,g,yKeys,et?et.y:void 0,ot?ot.y:void 0)}function isAxisDeltaZero(it){return it.translate===0&&it.scale===1}function isDeltaZero(it){return isAxisDeltaZero(it.x)&&isAxisDeltaZero(it.y)}function axisEquals(it,g){return it.min===g.min&&it.max===g.max}function boxEquals(it,g){return axisEquals(it.x,g.x)&&axisEquals(it.y,g.y)}function axisEqualsRounded(it,g){return Math.round(it.min)===Math.round(g.min)&&Math.round(it.max)===Math.round(g.max)}function boxEqualsRounded(it,g){return axisEqualsRounded(it.x,g.x)&&axisEqualsRounded(it.y,g.y)}function aspectRatio(it){return calcLength(it.x)/calcLength(it.y)}function axisDeltaEquals(it,g){return it.translate===g.translate&&it.scale===g.scale&&it.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const et=this.members[this.members.length-1];et&&this.promote(et)}}relegate(g){const et=this.members.findIndex(ut=>g===ut);if(et===0)return!1;let ot;for(let ut=et;ut>=0;ut--){const ct=this.members[ut];if(ct.isPresent!==!1){ot=ct;break}}return ot?(this.promote(ot),!0):!1}promote(g,et){const ot=this.lead;if(g!==ot&&(this.prevLead=ot,this.lead=g,g.show(),ot)){ot.instance&&ot.scheduleRender(),g.scheduleRender(),g.resumeFrom=ot,et&&(g.resumeFrom.preserveOpacity=!0),ot.snapshot&&(g.snapshot=ot.snapshot,g.snapshot.latestValues=ot.animationValues||ot.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:ut}=g.options;ut===!1&&ot.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:et,resumingFrom:ot}=g;et.onExitComplete&&et.onExitComplete(),ot&&ot.options.onExitComplete&&ot.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(it,g,et){let ot="";const ut=it.x.translate/g.x,ct=it.y.translate/g.y,dt=(et==null?void 0:et.z)||0;if((ut||ct||dt)&&(ot=`translate3d(${ut}px, ${ct}px, ${dt}px) `),(g.x!==1||g.y!==1)&&(ot+=`scale(${1/g.x}, ${1/g.y}) `),et){const{transformPerspective:kt,rotate:Tt,rotateX:Rt,rotateY:jt,skewX:Ft,skewY:Bt}=et;kt&&(ot=`perspective(${kt}px) ${ot}`),Tt&&(ot+=`rotate(${Tt}deg) `),Rt&&(ot+=`rotateX(${Rt}deg) `),jt&&(ot+=`rotateY(${jt}deg) `),Ft&&(ot+=`skewX(${Ft}deg) `),Bt&&(ot+=`skewY(${Bt}deg) `)}const ft=it.x.scale*g.x,St=it.y.scale*g.y;return(ft!==1||St!==1)&&(ot+=`scale(${ft}, ${St})`),ot||"none"}const compareByDepth=(it,g)=>it.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(it){const g=isMotionValue(it)?it.get():it;return isCustomValue(g)?g.toValue():g}function delay(it,g){const et=time.now(),ot=({timestamp:ut})=>{const ct=ut-et;ct>=g&&(cancelFrame(ot),it(ct-g))};return frame.read(ot,!0),()=>cancelFrame(ot)}function isSVGElement(it){return it instanceof SVGElement&&it.tagName!=="svg"}function animateSingleValue(it,g,et){const ot=isMotionValue(it)?it:motionValue(it);return ot.start(animateMotionValue("",ot,g,et)),ot.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(it,g,et,ot){const{latestValues:ut}=g;ut[it]&&(et[it]=ut[it],g.setStaticValue(it,0),ot&&(ot[it]=0))}function cancelTreeOptimisedTransformAnimations(it){if(it.hasCheckedOptimisedAppear=!0,it.root===it)return;const{visualElement:g}=it.options;if(!g)return;const et=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(et,"transform")){const{layout:ut,layoutId:ct}=it.options;window.MotionCancelOptimisedAnimation(et,"transform",frame,!(ut||ct))}const{parent:ot}=it;ot&&!ot.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(ot)}function createProjectionNode$1({attachResizeListener:it,defaultParent:g,measureScroll:et,checkIsScrollRoot:ot,resetTransform:ut}){return class{constructor(dt={},ft=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=dt,this.root=ft?ft.root||ft:this,this.path=ft?[...ft.path,ft]:[],this.parent=ft,this.depth=ft?ft.depth+1:0;for(let St=0;St<this.path.length;St++)this.path[St].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(dt,ft){return this.eventHandlers.has(dt)||this.eventHandlers.set(dt,new SubscriptionManager),this.eventHandlers.get(dt).add(ft)}notifyListeners(dt,...ft){const St=this.eventHandlers.get(dt);St&&St.notify(...ft)}hasListeners(dt){return this.eventHandlers.has(dt)}mount(dt,ft=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(dt),this.instance=dt;const{layoutId:St,layout:kt,visualElement:Tt}=this.options;if(Tt&&!Tt.current&&Tt.mount(dt),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ft&&(kt||St)&&(this.isLayoutDirty=!0),it){let Rt;const jt=()=>this.root.updateBlockedByResize=!1;it(dt,()=>{this.root.updateBlockedByResize=!0,Rt&&Rt(),Rt=delay(jt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}St&&this.root.registerSharedNode(St,this),this.options.animate!==!1&&Tt&&(St||kt)&&this.addEventListener("didUpdate",({delta:Rt,hasLayoutChanged:jt,hasRelativeTargetChanged:Ft,layout:Bt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Ht=this.options.transition||Tt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Yt,onLayoutAnimationComplete:zt}=Tt.getProps(),Kt=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Bt)||Ft,en=!jt&&Ft;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||en||jt&&(Kt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Rt,en);const tn={...getValueTransition(Ht,"layout"),onPlay:Yt,onComplete:zt};(Tt.shouldReduceMotion||this.options.layoutRoot)&&(tn.delay=0,tn.type=!1),this.startAnimation(tn)}else jt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Bt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const dt=this.getStack();dt&&dt.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:dt}=this.options;return dt&&dt.getProps().transformTemplate}willUpdate(dt=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Tt=0;Tt<this.path.length;Tt++){const Rt=this.path[Tt];Rt.shouldResetTransform=!0,Rt.updateScroll("snapshot"),Rt.options.layoutRoot&&Rt.willUpdate(!1)}const{layoutId:ft,layout:St}=this.options;if(ft===void 0&&!St)return;const kt=this.getTransformTemplate();this.prevTransformTemplateValue=kt?kt(this.latestValues,""):void 0,this.updateSnapshot(),dt&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ft=time.now();frameData.delta=clamp(0,1e3/60,ft-frameData.timestamp),frameData.timestamp=ft,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let St=0;St<this.path.length;St++)this.path[St].updateScroll();const dt=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ft}=this.options;ft&&ft.notify("LayoutMeasure",this.layout.layoutBox,dt?dt.layoutBox:void 0)}updateScroll(dt="measure"){let ft=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===dt&&(ft=!1),ft){const St=ot(this.instance);this.scroll={animationId:this.root.animationId,phase:dt,isRoot:St,offset:et(this.instance),wasRoot:this.scroll?this.scroll.isRoot:St}}}resetTransform(){if(!ut)return;const dt=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ft=this.projectionDelta&&!isDeltaZero(this.projectionDelta),St=this.getTransformTemplate(),kt=St?St(this.latestValues,""):void 0,Tt=kt!==this.prevTransformTemplateValue;dt&&(ft||hasTransform(this.latestValues)||Tt)&&(ut(this.instance,kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(dt=!0){const ft=this.measurePageBox();let St=this.removeElementScroll(ft);return dt&&(St=this.removeTransform(St)),roundBox(St),{animationId:this.root.animationId,measuredBox:ft,layoutBox:St,latestValues:{},source:this.id}}measurePageBox(){var dt;const{visualElement:ft}=this.options;if(!ft)return createBox();const St=ft.measureViewportBox();if(!(((dt=this.scroll)===null||dt===void 0?void 0:dt.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Tt}=this.root;Tt&&(translateAxis(St.x,Tt.offset.x),translateAxis(St.y,Tt.offset.y))}return St}removeElementScroll(dt){var ft;const St=createBox();if(copyBoxInto(St,dt),!((ft=this.scroll)===null||ft===void 0)&&ft.wasRoot)return St;for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt],{scroll:Rt,options:jt}=Tt;Tt!==this.root&&Rt&&jt.layoutScroll&&(Rt.wasRoot&&copyBoxInto(St,dt),translateAxis(St.x,Rt.offset.x),translateAxis(St.y,Rt.offset.y))}return St}applyTransform(dt,ft=!1){const St=createBox();copyBoxInto(St,dt);for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt];!ft&&Tt.options.layoutScroll&&Tt.scroll&&Tt!==Tt.root&&transformBox(St,{x:-Tt.scroll.offset.x,y:-Tt.scroll.offset.y}),hasTransform(Tt.latestValues)&&transformBox(St,Tt.latestValues)}return hasTransform(this.latestValues)&&transformBox(St,this.latestValues),St}removeTransform(dt){const ft=createBox();copyBoxInto(ft,dt);for(let St=0;St<this.path.length;St++){const kt=this.path[St];if(!kt.instance||!hasTransform(kt.latestValues))continue;hasScale(kt.latestValues)&&kt.updateSnapshot();const Tt=createBox(),Rt=kt.measurePageBox();copyBoxInto(Tt,Rt),removeBoxTransforms(ft,kt.latestValues,kt.snapshot?kt.snapshot.layoutBox:void 0,Tt)}return hasTransform(this.latestValues)&&removeBoxTransforms(ft,this.latestValues),ft}setTargetDelta(dt){this.targetDelta=dt,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(dt){this.options={...this.options,...dt,crossfade:dt.crossfade!==void 0?dt.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(dt=!1){var ft;const St=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=St.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=St.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=St.isSharedProjectionDirty);const kt=!!this.resumingFrom||this!==St;if(!(dt||kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ft=this.parent)===null||ft===void 0)&&ft.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Rt,layoutId:jt}=this.options;if(!(!this.layout||!(Rt||jt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Ft=this.getClosestProjectingParent();Ft&&Ft.layout&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Ft.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Ft=this.getClosestProjectingParent();Ft&&!!Ft.resumingFrom==!!this.resumingFrom&&!Ft.options.layoutScroll&&Ft.target&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Ft.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var dt;const ft=this.getLead(),St=!!this.resumingFrom||this!==ft;let kt=!0;if((this.isProjectionDirty||!((dt=this.parent)===null||dt===void 0)&&dt.isProjectionDirty)&&(kt=!1),St&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(kt=!1),kt)return;const{layout:Tt,layoutId:Rt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Tt||Rt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const jt=this.treeScale.x,Ft=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,St),ft.layout&&!ft.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ft.target=ft.layout.layoutBox,ft.targetWithTransforms=createBox());const{target:Bt}=ft;if(!Bt){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Bt,this.latestValues),(this.treeScale.x!==jt||this.treeScale.y!==Ft||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Bt)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(dt=!0){var ft;if((ft=this.options.visualElement)===null||ft===void 0||ft.scheduleRender(),dt){const St=this.getStack();St&&St.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(dt,ft=!1){const St=this.snapshot,kt=St?St.latestValues:{},Tt={...this.latestValues},Rt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ft;const jt=createBox(),Ft=St?St.source:void 0,Bt=this.layout?this.layout.source:void 0,Ht=Ft!==Bt,Yt=this.getStack(),zt=!Yt||Yt.members.length<=1,Kt=!!(Ht&&!zt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let en;this.mixTargetDelta=tn=>{const on=tn/1e3;mixAxisDelta(Rt.x,dt.x,on),mixAxisDelta(Rt.y,dt.y,on),this.setTargetDelta(Rt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(jt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,jt,on),en&&boxEquals(this.relativeTarget,en)&&(this.isProjectionDirty=!1),en||(en=createBox()),copyBoxInto(en,this.relativeTarget)),Ht&&(this.animationValues=Tt,mixValues(Tt,kt,this.latestValues,on,Kt,zt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=on},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(dt){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...dt,onUpdate:ft=>{this.mixTargetDelta(ft),dt.onUpdate&&dt.onUpdate(ft)},onComplete:()=>{dt.onComplete&&dt.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const dt=this.getStack();dt&&dt.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const dt=this.getLead();let{targetWithTransforms:ft,target:St,layout:kt,latestValues:Tt}=dt;if(!(!ft||!St||!kt)){if(this!==dt&&this.layout&&kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,kt.layoutBox)){St=this.target||createBox();const Rt=calcLength(this.layout.layoutBox.x);St.x.min=dt.target.x.min,St.x.max=St.x.min+Rt;const jt=calcLength(this.layout.layoutBox.y);St.y.min=dt.target.y.min,St.y.max=St.y.min+jt}copyBoxInto(ft,St),transformBox(ft,Tt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ft,Tt)}}registerSharedNode(dt,ft){this.sharedNodes.has(dt)||this.sharedNodes.set(dt,new NodeStack),this.sharedNodes.get(dt).add(ft);const kt=ft.options.initialPromotionConfig;ft.promote({transition:kt?kt.transition:void 0,preserveFollowOpacity:kt&&kt.shouldPreserveFollowOpacity?kt.shouldPreserveFollowOpacity(ft):void 0})}isLead(){const dt=this.getStack();return dt?dt.lead===this:!0}getLead(){var dt;const{layoutId:ft}=this.options;return ft?((dt=this.getStack())===null||dt===void 0?void 0:dt.lead)||this:this}getPrevLead(){var dt;const{layoutId:ft}=this.options;return ft?(dt=this.getStack())===null||dt===void 0?void 0:dt.prevLead:void 0}getStack(){const{layoutId:dt}=this.options;if(dt)return this.root.sharedNodes.get(dt)}promote({needsReset:dt,transition:ft,preserveFollowOpacity:St}={}){const kt=this.getStack();kt&&kt.promote(this,St),dt&&(this.projectionDelta=void 0,this.needsReset=!0),ft&&this.setOptions({transition:ft})}relegate(){const dt=this.getStack();return dt?dt.relegate(this):!1}resetSkewAndRotation(){const{visualElement:dt}=this.options;if(!dt)return;let ft=!1;const{latestValues:St}=dt;if((St.z||St.rotate||St.rotateX||St.rotateY||St.rotateZ||St.skewX||St.skewY)&&(ft=!0),!ft)return;const kt={};St.z&&resetDistortingTransform("z",dt,kt,this.animationValues);for(let Tt=0;Tt<transformAxes.length;Tt++)resetDistortingTransform(`rotate${transformAxes[Tt]}`,dt,kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Tt]}`,dt,kt,this.animationValues);dt.render();for(const Tt in kt)dt.setStaticValue(Tt,kt[Tt]),this.animationValues&&(this.animationValues[Tt]=kt[Tt]);dt.scheduleRender()}getProjectionStyles(dt){var ft,St;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const kt={visibility:""},Tt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,kt.opacity="",kt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"",kt.transform=Tt?Tt(this.latestValues,""):"none",kt;const Rt=this.getLead();if(!this.projectionDelta||!this.layout||!Rt.target){const Ht={};return this.options.layoutId&&(Ht.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Ht.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(Ht.transform=Tt?Tt({},""):"none",this.hasProjected=!1),Ht}const jt=Rt.animationValues||Rt.latestValues;this.applyTransformsToTarget(),kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,jt),Tt&&(kt.transform=Tt(jt,kt.transform));const{x:Ft,y:Bt}=this.projectionDelta;kt.transformOrigin=`${Ft.origin*100}% ${Bt.origin*100}% 0`,Rt.animationValues?kt.opacity=Rt===this?(St=(ft=jt.opacity)!==null&&ft!==void 0?ft:this.latestValues.opacity)!==null&&St!==void 0?St:1:this.preserveOpacity?this.latestValues.opacity:jt.opacityExit:kt.opacity=Rt===this?jt.opacity!==void 0?jt.opacity:"":jt.opacityExit!==void 0?jt.opacityExit:0;for(const Ht in scaleCorrectors){if(jt[Ht]===void 0)continue;const{correct:Yt,applyTo:zt}=scaleCorrectors[Ht],Kt=kt.transform==="none"?jt[Ht]:Yt(jt[Ht],Rt);if(zt){const en=zt.length;for(let tn=0;tn<en;tn++)kt[zt[tn]]=Kt}else kt[Ht]=Kt}return this.options.layoutId&&(kt.pointerEvents=Rt===this?resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"":"none"),kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(dt=>{var ft;return(ft=dt.currentAnimation)===null||ft===void 0?void 0:ft.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(it){it.updateLayout()}function notifyLayoutUpdate(it){var g;const et=((g=it.resumeFrom)===null||g===void 0?void 0:g.snapshot)||it.snapshot;if(it.isLead()&&it.layout&&et&&it.hasListeners("didUpdate")){const{layoutBox:ot,measuredBox:ut}=it.layout,{animationType:ct}=it.options,dt=et.source!==it.layout.source;ct==="size"?eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],Ft=calcLength(jt);jt.min=ot[Rt].min,jt.max=jt.min+Ft}):shouldAnimatePositionOnly(ct,et.layoutBox,ot)&&eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],Ft=calcLength(ot[Rt]);jt.max=jt.min+Ft,it.relativeTarget&&!it.currentAnimation&&(it.isProjectionDirty=!0,it.relativeTarget[Rt].max=it.relativeTarget[Rt].min+Ft)});const ft=createDelta();calcBoxDelta(ft,ot,et.layoutBox);const St=createDelta();dt?calcBoxDelta(St,it.applyTransform(ut,!0),et.measuredBox):calcBoxDelta(St,ot,et.layoutBox);const kt=!isDeltaZero(ft);let Tt=!1;if(!it.resumeFrom){const Rt=it.getClosestProjectingParent();if(Rt&&!Rt.resumeFrom){const{snapshot:jt,layout:Ft}=Rt;if(jt&&Ft){const Bt=createBox();calcRelativePosition(Bt,et.layoutBox,jt.layoutBox);const Ht=createBox();calcRelativePosition(Ht,ot,Ft.layoutBox),boxEqualsRounded(Bt,Ht)||(Tt=!0),Rt.options.layoutRoot&&(it.relativeTarget=Ht,it.relativeTargetOrigin=Bt,it.relativeParent=Rt)}}}it.notifyListeners("didUpdate",{layout:ot,snapshot:et,delta:St,layoutDelta:ft,hasLayoutChanged:kt,hasRelativeTargetChanged:Tt})}else if(it.isLead()){const{onExitComplete:ot}=it.options;ot&&ot()}it.options.transition=void 0}function propagateDirtyNodes(it){isDebug&&metrics.totalNodes++,it.parent&&(it.isProjecting()||(it.isProjectionDirty=it.parent.isProjectionDirty),it.isSharedProjectionDirty||(it.isSharedProjectionDirty=!!(it.isProjectionDirty||it.parent.isProjectionDirty||it.parent.isSharedProjectionDirty)),it.isTransformDirty||(it.isTransformDirty=it.parent.isTransformDirty))}function cleanDirtyNodes(it){it.isProjectionDirty=it.isSharedProjectionDirty=it.isTransformDirty=!1}function clearSnapshot(it){it.clearSnapshot()}function clearMeasurements(it){it.clearMeasurements()}function clearIsLayoutDirty(it){it.isLayoutDirty=!1}function resetTransformStyle(it){const{visualElement:g}=it.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),it.resetTransform()}function finishAnimation(it){it.finishAnimation(),it.targetDelta=it.relativeTarget=it.target=void 0,it.isProjectionDirty=!0}function resolveTargetDelta(it){it.resolveTargetDelta()}function calcProjection(it){it.calcProjection()}function resetSkewAndRotation(it){it.resetSkewAndRotation()}function removeLeadSnapshots(it){it.removeLeadSnapshot()}function mixAxisDelta(it,g,et){it.translate=mixNumber$1(g.translate,0,et),it.scale=mixNumber$1(g.scale,1,et),it.origin=g.origin,it.originPoint=g.originPoint}function mixAxis(it,g,et,ot){it.min=mixNumber$1(g.min,et.min,ot),it.max=mixNumber$1(g.max,et.max,ot)}function mixBox(it,g,et,ot){mixAxis(it.x,g.x,et.x,ot),mixAxis(it.y,g.y,et.y,ot)}function hasOpacityCrossfade(it){return it.animationValues&&it.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=it=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(it),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(it){it.min=roundPoint(it.min),it.max=roundPoint(it.max)}function roundBox(it){roundAxis(it.x),roundAxis(it.y)}function shouldAnimatePositionOnly(it,g,et){return it==="position"||it==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(et),.2)}function checkNodeWasScrollRoot(it){var g;return it!==it.root&&((g=it.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(it,g)=>addDomEvent(it,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:it=>({x:it.scrollLeft,y:it.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const it=new DocumentProjectionNode({});it.mount(window),it.setOptions({layoutScroll:!0}),rootProjectionNode.current=it}return rootProjectionNode.current},resetTransform:(it,g)=>{it.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:it=>window.getComputedStyle(it).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileHover&&it.animationState.setActive("whileHover",et==="Start");const ut="onHover"+et,ct=ot[ut];ct&&frame.postRender(()=>ct(g,extractEventInfo(g)))}class HoverGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=hover(g,et=>(handleHoverEvent(this.node,et,"Start"),ot=>handleHoverEvent(this.node,ot,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileTap&&it.animationState.setActive("whileTap",et==="Start");const ut="onTap"+(et==="End"?"":et),ct=ot[ut];ct&&frame.postRender(()=>ct(g,extractEventInfo(g)))}class PressGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=press(g,et=>(handlePressEvent(this.node,et,"Start"),(ot,{success:ut})=>handlePressEvent(this.node,ot,ut?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=it=>{const g=observerCallbacks.get(it.target);g&&g(it)},fireAllObserverCallbacks=it=>{it.forEach(fireObserverCallback)};function initIntersectionObserver({root:it,...g}){const et=it||document;observers.has(et)||observers.set(et,{});const ot=observers.get(et),ut=JSON.stringify(g);return ot[ut]||(ot[ut]=new IntersectionObserver(fireAllObserverCallbacks,{root:it,...g})),ot[ut]}function observeIntersection(it,g,et){const ot=initIntersectionObserver(g);return observerCallbacks.set(it,et),ot.observe(it),()=>{observerCallbacks.delete(it),ot.unobserve(it)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:et,margin:ot,amount:ut="some",once:ct}=g,dt={root:et?et.current:void 0,rootMargin:ot,threshold:typeof ut=="number"?ut:thresholdNames[ut]},ft=St=>{const{isIntersecting:kt}=St;if(this.isInView===kt||(this.isInView=kt,ct&&!kt&&this.hasEnteredView))return;kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",kt);const{onViewportEnter:Tt,onViewportLeave:Rt}=this.node.getProps(),jt=kt?Tt:Rt;jt&&jt(St)};return observeIntersection(this.node.current,dt,ft)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:et}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,et))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:it={}},{viewport:g={}}={}){return et=>it[et]!==g[et]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:it=>it,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(it,g,et,ot,ut){var ct,dt;const{visualElement:ft}=reactExports.useContext(MotionContext),St=reactExports.useContext(LazyContext),kt=reactExports.useContext(PresenceContext),Tt=reactExports.useContext(MotionConfigContext).reducedMotion,Rt=reactExports.useRef(null);ot=ot||St.renderer,!Rt.current&&ot&&(Rt.current=ot(it,{visualState:g,parent:ft,props:et,presenceContext:kt,blockInitialAnimation:kt?kt.initial===!1:!1,reducedMotionConfig:Tt}));const jt=Rt.current,Ft=reactExports.useContext(SwitchLayoutGroupContext);jt&&!jt.projection&&ut&&(jt.type==="html"||jt.type==="svg")&&createProjectionNode(Rt.current,et,ut,Ft);const Bt=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{jt&&Bt.current&&jt.update(et,kt)});const Ht=et[optimizedAppearDataAttribute],Yt=reactExports.useRef(!!Ht&&!(!((ct=window.MotionHandoffIsComplete)===null||ct===void 0)&&ct.call(window,Ht))&&((dt=window.MotionHasOptimisedAnimation)===null||dt===void 0?void 0:dt.call(window,Ht)));return useIsomorphicLayoutEffect$1(()=>{jt&&(Bt.current=!0,window.MotionIsMounted=!0,jt.updateFeatures(),microtask.render(jt.render),Yt.current&&jt.animationState&&jt.animationState.animateChanges())}),reactExports.useEffect(()=>{jt&&(!Yt.current&&jt.animationState&&jt.animationState.animateChanges(),Yt.current&&(queueMicrotask(()=>{var zt;(zt=window.MotionHandoffMarkAsComplete)===null||zt===void 0||zt.call(window,Ht)}),Yt.current=!1))}),jt}function createProjectionNode(it,g,et,ot){const{layoutId:ut,layout:ct,drag:dt,dragConstraints:ft,layoutScroll:St,layoutRoot:kt}=g;it.projection=new et(it.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(it.parent)),it.projection.setOptions({layoutId:ut,layout:ct,alwaysMeasureLayout:!!dt||ft&&isRefObject(ft),visualElement:it,animationType:typeof ct=="string"?ct:"both",initialPromotionConfig:ot,layoutScroll:St,layoutRoot:kt})}function getClosestProjectingNode(it){if(it)return it.options.allowProjection!==!1?it.projection:getClosestProjectingNode(it.parent)}function useMotionRef(it,g,et){return reactExports.useCallback(ot=>{ot&&it.mount&&it.mount(ot),g&&(ot?g.mount(ot):g.unmount()),et&&(typeof et=="function"?et(ot):isRefObject(et)&&(et.current=ot))},[g])}function isControllingVariants(it){return isAnimationControls(it.animate)||variantProps.some(g=>isVariantLabel(it[g]))}function isVariantNode(it){return!!(isControllingVariants(it)||it.variants)}function getCurrentTreeVariants(it,g){if(isControllingVariants(it)){const{initial:et,animate:ot}=it;return{initial:et===!1||isVariantLabel(et)?et:void 0,animate:isVariantLabel(ot)?ot:void 0}}return it.inherit!==!1?g:{}}function useCreateMotionContext(it){const{initial:g,animate:et}=getCurrentTreeVariants(it,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:et}),[variantLabelsAsDependency(g),variantLabelsAsDependency(et)])}function variantLabelsAsDependency(it){return Array.isArray(it)?it.join(" "):it}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const it in featureProps)featureDefinitions[it]={isEnabled:g=>featureProps[it].some(et=>!!g[et])};function loadFeatures(it){for(const g in it)featureDefinitions[g]={...featureDefinitions[g],...it[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:it,createVisualElement:g,useRender:et,useVisualState:ot,Component:ut}){it&&loadFeatures(it);function ct(ft,St){let kt;const Tt={...reactExports.useContext(MotionConfigContext),...ft,layoutId:useLayoutId(ft)},{isStatic:Rt}=Tt,jt=useCreateMotionContext(ft),Ft=ot(ft,Rt);if(!Rt&&isBrowser$1){useStrictMode();const Bt=getProjectionFunctionality(Tt);kt=Bt.MeasureLayout,jt.visualElement=useVisualElement(ut,Ft,Tt,g,Bt.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:jt,children:[kt&&jt.visualElement?jsxRuntimeExports.jsx(kt,{visualElement:jt.visualElement,...Tt}):null,et(ut,ft,useMotionRef(Ft,jt.visualElement,St),Ft,Rt,jt.visualElement)]})}const dt=reactExports.forwardRef(ct);return dt[motionComponentSymbol]=ut,dt}function useLayoutId({layoutId:it}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&it!==void 0?g+"-"+it:it}function useStrictMode(it,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(it){const{drag:g,layout:et}=featureDefinitions;if(!g&&!et)return{};const ot={...g,...et};return{MeasureLayout:g!=null&&g.isEnabled(it)||et!=null&&et.isEnabled(it)?ot.MeasureLayout:void 0,ProjectionNode:ot.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(it){return typeof it!="string"||it.includes("-")?!1:!!(lowercaseSVGElements.indexOf(it)>-1||/[A-Z]/u.test(it))}function renderHTML(it,{style:g,vars:et},ot,ut){Object.assign(it.style,g,ut&&ut.getProjectionStyles(ot));for(const ct in et)it.style.setProperty(ct,et[ct])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(it,g,et,ot){renderHTML(it,g,void 0,ot);for(const ut in g.attrs)it.setAttribute(camelCaseAttributes.has(ut)?ut:camelToDash(ut),g.attrs[ut])}function isForcedMotionValue(it,{layout:g,layoutId:et}){return transformProps.has(it)||it.startsWith("origin")||(g||et!==void 0)&&(!!scaleCorrectors[it]||it==="opacity")}function scrapeMotionValuesFromProps$1(it,g,et){var ot;const{style:ut}=it,ct={};for(const dt in ut)(isMotionValue(ut[dt])||g.style&&isMotionValue(g.style[dt])||isForcedMotionValue(dt,it)||((ot=et==null?void 0:et.getValue(dt))===null||ot===void 0?void 0:ot.liveStyle)!==void 0)&&(ct[dt]=ut[dt]);return ct}function scrapeMotionValuesFromProps(it,g,et){const ot=scrapeMotionValuesFromProps$1(it,g,et);for(const ut in it)if(isMotionValue(it[ut])||isMotionValue(g[ut])){const ct=transformPropOrder.indexOf(ut)!==-1?"attr"+ut.charAt(0).toUpperCase()+ut.substring(1):ut;ot[ct]=it[ut]}return ot}function useConstant(it){const g=reactExports.useRef(null);return g.current===null&&(g.current=it()),g.current}function makeState$1({scrapeMotionValuesFromProps:it,createRenderState:g,onMount:et},ot,ut,ct){const dt={latestValues:makeLatestValues(ot,ut,ct,it),renderState:g()};return et&&(dt.mount=ft=>et(ot,ft,dt)),dt}const makeUseVisualState=it=>(g,et)=>{const ot=reactExports.useContext(MotionContext),ut=reactExports.useContext(PresenceContext),ct=()=>makeState$1(it,g,ot,ut);return et?ct():useConstant(ct)};function makeLatestValues(it,g,et,ot){const ut={},ct=ot(it,{});for(const jt in ct)ut[jt]=resolveMotionValue(ct[jt]);let{initial:dt,animate:ft}=it;const St=isControllingVariants(it),kt=isVariantNode(it);g&&kt&&!St&&it.inherit!==!1&&(dt===void 0&&(dt=g.initial),ft===void 0&&(ft=g.animate));let Tt=et?et.initial===!1:!1;Tt=Tt||dt===!1;const Rt=Tt?ft:dt;if(Rt&&typeof Rt!="boolean"&&!isAnimationControls(Rt)){const jt=Array.isArray(Rt)?Rt:[Rt];for(let Ft=0;Ft<jt.length;Ft++){const Bt=resolveVariantFromProps(it,jt[Ft]);if(Bt){const{transitionEnd:Ht,transition:Yt,...zt}=Bt;for(const Kt in zt){let en=zt[Kt];if(Array.isArray(en)){const tn=Tt?en.length-1:0;en=en[tn]}en!==null&&(ut[Kt]=en)}for(const Kt in Ht)ut[Kt]=Ht[Kt]}}}return ut}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(it,g)=>g&&typeof it=="number"?g.transform(it):it,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(it,g,et){let ot="",ut=!0;for(let ct=0;ct<numTransforms;ct++){const dt=transformPropOrder[ct],ft=it[dt];if(ft===void 0)continue;let St=!0;if(typeof ft=="number"?St=ft===(dt.startsWith("scale")?1:0):St=parseFloat(ft)===0,!St||et){const kt=getValueAsType(ft,numberValueTypes[dt]);if(!St){ut=!1;const Tt=translateAlias[dt]||dt;ot+=`${Tt}(${kt}) `}et&&(g[dt]=kt)}}return ot=ot.trim(),et?ot=et(g,ut?"":ot):ut&&(ot="none"),ot}function buildHTMLStyles(it,g,et){const{style:ot,vars:ut,transformOrigin:ct}=it;let dt=!1,ft=!1;for(const St in g){const kt=g[St];if(transformProps.has(St)){dt=!0;continue}else if(isCSSVariableName(St)){ut[St]=kt;continue}else{const Tt=getValueAsType(kt,numberValueTypes[St]);St.startsWith("origin")?(ft=!0,ct[St]=Tt):ot[St]=Tt}}if(g.transform||(dt||et?ot.transform=buildTransform(g,it.transform,et):ot.transform&&(ot.transform="none")),ft){const{originX:St="50%",originY:kt="50%",originZ:Tt=0}=ct;ot.transformOrigin=`${St} ${kt} ${Tt}`}}function calcOrigin(it,g,et){return typeof it=="string"?it:px.transform(g+et*it)}function calcSVGTransformOrigin(it,g,et){const ot=calcOrigin(g,it.x,it.width),ut=calcOrigin(et,it.y,it.height);return`${ot} ${ut}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(it,g,et=1,ot=0,ut=!0){it.pathLength=1;const ct=ut?dashKeys:camelKeys;it[ct.offset]=px.transform(-ot);const dt=px.transform(g),ft=px.transform(et);it[ct.array]=`${dt} ${ft}`}function buildSVGAttrs(it,{attrX:g,attrY:et,attrScale:ot,originX:ut,originY:ct,pathLength:dt,pathSpacing:ft=1,pathOffset:St=0,...kt},Tt,Rt){if(buildHTMLStyles(it,kt,Rt),Tt){it.style.viewBox&&(it.attrs.viewBox=it.style.viewBox);return}it.attrs=it.style,it.style={};const{attrs:jt,style:Ft,dimensions:Bt}=it;jt.transform&&(Bt&&(Ft.transform=jt.transform),delete jt.transform),Bt&&(ut!==void 0||ct!==void 0||Ft.transform)&&(Ft.transformOrigin=calcSVGTransformOrigin(Bt,ut!==void 0?ut:.5,ct!==void 0?ct:.5)),g!==void 0&&(jt.x=g),et!==void 0&&(jt.y=et),ot!==void 0&&(jt.scale=ot),dt!==void 0&&buildSVGPath(jt,dt,ft,St,!1)}const isSVGTag=it=>typeof it=="string"&&it.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(it,g,{renderState:et,latestValues:ot})=>{frame.read(()=>{try{et.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{et.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(et,ot,isSVGTag(g.tagName),it.transformTemplate),renderSVG(g,et)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(it,g,et){for(const ot in g)!isMotionValue(g[ot])&&!isForcedMotionValue(ot,et)&&(it[ot]=g[ot])}function useInitialMotionValues({transformTemplate:it},g){return reactExports.useMemo(()=>{const et=createHtmlRenderState();return buildHTMLStyles(et,g,it),Object.assign({},et.vars,et.style)},[g])}function useStyle(it,g){const et=it.style||{},ot={};return copyRawValuesOnly(ot,et,it),Object.assign(ot,useInitialMotionValues(it,g)),ot}function useHTMLProps(it,g){const et={},ot=useStyle(it,g);return it.drag&&it.dragListener!==!1&&(et.draggable=!1,ot.userSelect=ot.WebkitUserSelect=ot.WebkitTouchCallout="none",ot.touchAction=it.drag===!0?"none":`pan-${it.drag==="x"?"y":"x"}`),it.tabIndex===void 0&&(it.onTap||it.onTapStart||it.whileTap)&&(et.tabIndex=0),et.style=ot,et}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(it){return it.startsWith("while")||it.startsWith("drag")&&it!=="draggable"||it.startsWith("layout")||it.startsWith("onTap")||it.startsWith("onPan")||it.startsWith("onLayout")||validMotionProps.has(it)}let shouldForward=it=>!isValidMotionProp(it);function loadExternalIsValidProp(it){it&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):it(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(it,g,et){const ot={};for(const ut in it)ut==="values"&&typeof it.values=="object"||(shouldForward(ut)||et===!0&&isValidMotionProp(ut)||!g&&!isValidMotionProp(ut)||it.draggable&&ut.startsWith("onDrag"))&&(ot[ut]=it[ut]);return ot}function useSVGProps(it,g,et,ot){const ut=reactExports.useMemo(()=>{const ct=createSvgRenderState();return buildSVGAttrs(ct,g,isSVGTag(ot),it.transformTemplate),{...ct.attrs,style:{...ct.style}}},[g]);if(it.style){const ct={};copyRawValuesOnly(ct,it.style,it),ut.style={...ct,...ut.style}}return ut}function createUseRender(it=!1){return(et,ot,ut,{latestValues:ct},dt)=>{const St=(isSVGComponent(et)?useSVGProps:useHTMLProps)(ot,ct,dt,et),kt=filterProps(ot,typeof et=="string",it),Tt=et!==reactExports.Fragment?{...kt,...St,ref:ut}:{},{children:Rt}=ot,jt=reactExports.useMemo(()=>isMotionValue(Rt)?Rt.get():Rt,[Rt]);return reactExports.createElement(et,{...Tt,children:jt})}}function createMotionComponentFactory(it,g){return function(ot,{forwardMotionProps:ut}={forwardMotionProps:!1}){const dt={...isSVGComponent(ot)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:it,useRender:createUseRender(ut),createVisualElement:g,Component:ot};return createRendererMotionComponent(dt)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const it=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=it.matches;it.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(it,g,et){for(const ot in g){const ut=g[ot],ct=et[ot];if(isMotionValue(ut))it.addValue(ot,ut);else if(isMotionValue(ct))it.addValue(ot,motionValue(ut,{owner:it}));else if(ct!==ut)if(it.hasValue(ot)){const dt=it.getValue(ot);dt.liveStyle===!0?dt.jump(ut):dt.hasAnimated||dt.set(ut)}else{const dt=it.getStaticValue(ot);it.addValue(ot,motionValue(dt!==void 0?dt:ut,{owner:it}))}}for(const ot in et)g[ot]===void 0&&it.removeValue(ot);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=it=>valueTypes.find(testValueType(it)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,et,ot){return{}}constructor({parent:g,props:et,presenceContext:ot,reducedMotionConfig:ut,blockInitialAnimation:ct,visualState:dt},ft={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const jt=time.now();this.renderScheduledAt<jt&&(this.renderScheduledAt=jt,frame.render(this.render,!1,!0))};const{latestValues:St,renderState:kt}=dt;this.latestValues=St,this.baseTarget={...St},this.initialValues=et.initial?{...St}:{},this.renderState=kt,this.parent=g,this.props=et,this.presenceContext=ot,this.depth=g?g.depth+1:0,this.reducedMotionConfig=ut,this.options=ft,this.blockInitialAnimation=!!ct,this.isControllingVariants=isControllingVariants(et),this.isVariantNode=isVariantNode(et),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:Tt,...Rt}=this.scrapeMotionValuesFromProps(et,{},this);for(const jt in Rt){const Ft=Rt[jt];St[jt]!==void 0&&isMotionValue(Ft)&&Ft.set(St[jt],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((et,ot)=>this.bindToMotionValue(ot,et)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const et=this.features[g];et&&(et.unmount(),et.isMounted=!1)}this.current=null}bindToMotionValue(g,et){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const ot=transformProps.has(g),ut=et.on("change",ft=>{this.latestValues[g]=ft,this.props.onUpdate&&frame.preRender(this.notifyUpdate),ot&&this.projection&&(this.projection.isTransformDirty=!0)}),ct=et.on("renderRequest",this.scheduleRender);let dt;window.MotionCheckAppearSync&&(dt=window.MotionCheckAppearSync(this,g,et)),this.valueSubscriptions.set(g,()=>{ut(),ct(),dt&&dt(),et.owner&&et.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const et=featureDefinitions[g];if(!et)continue;const{isEnabled:ot,Feature:ut}=et;if(!this.features[g]&&ut&&ot(this.props)&&(this.features[g]=new ut(this)),this.features[g]){const ct=this.features[g];ct.isMounted?ct.update():(ct.mount(),ct.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,et){this.latestValues[g]=et}update(g,et){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=et;for(let ot=0;ot<propEventHandlers.length;ot++){const ut=propEventHandlers[ot];this.propEventSubscriptions[ut]&&(this.propEventSubscriptions[ut](),delete this.propEventSubscriptions[ut]);const ct="on"+ut,dt=g[ct];dt&&(this.propEventSubscriptions[ut]=this.on(ut,dt))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const et=this.getClosestVariantNode();if(et)return et.variantChildren&&et.variantChildren.add(g),()=>et.variantChildren.delete(g)}addValue(g,et){const ot=this.values.get(g);et!==ot&&(ot&&this.removeValue(g),this.bindToMotionValue(g,et),this.values.set(g,et),this.latestValues[g]=et.get())}removeValue(g){this.values.delete(g);const et=this.valueSubscriptions.get(g);et&&(et(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,et){if(this.props.values&&this.props.values[g])return this.props.values[g];let ot=this.values.get(g);return ot===void 0&&et!==void 0&&(ot=motionValue(et===null?void 0:et,{owner:this}),this.addValue(g,ot)),ot}readValue(g,et){var ot;let ut=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(ot=this.getBaseTargetFromProps(this.props,g))!==null&&ot!==void 0?ot:this.readValueFromInstance(this.current,g,this.options);return ut!=null&&(typeof ut=="string"&&(isNumericalString(ut)||isZeroValueString(ut))?ut=parseFloat(ut):!findValueType(ut)&&complex.test(et)&&(ut=getAnimatableNone(g,et)),this.setBaseTarget(g,isMotionValue(ut)?ut.get():ut)),isMotionValue(ut)?ut.get():ut}setBaseTarget(g,et){this.baseTarget[g]=et}getBaseTarget(g){var et;const{initial:ot}=this.props;let ut;if(typeof ot=="string"||typeof ot=="object"){const dt=resolveVariantFromProps(this.props,ot,(et=this.presenceContext)===null||et===void 0?void 0:et.custom);dt&&(ut=dt[g])}if(ot&&ut!==void 0)return ut;const ct=this.getBaseTargetFromProps(this.props,g);return ct!==void 0&&!isMotionValue(ct)?ct:this.initialValues[g]!==void 0&&ut===void 0?void 0:this.baseTarget[g]}on(g,et){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(et)}notify(g,...et){this.events[g]&&this.events[g].notify(...et)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,et){return g.compareDocumentPosition(et)&2?1:-1}getBaseTargetFromProps(g,et){return g.style?g.style[et]:void 0}removeValueFromRenderState(g,{vars:et,style:ot}){delete et[g],delete ot[g]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",et=>{this.current&&(this.current.textContent=`${et}`)}))}}function getComputedStyle$1(it){return window.getComputedStyle(it)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}else{const ot=getComputedStyle$1(g),ut=(isCSSVariableName(et)?ot.getPropertyValue(et):ot[et])||0;return typeof ut=="string"?ut.trim():ut}}measureInstanceViewportBox(g,{transformPagePoint:et}){return measureViewportBox(g,et)}build(g,et,ot){buildHTMLStyles(g,et,ot.transformTemplate)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps$1(g,et,ot)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,et){return g[et]}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}return et=camelCaseAttributes.has(et)?et:camelToDash(et),g.getAttribute(et)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps(g,et,ot)}build(g,et,ot){buildSVGAttrs(g,et,this.isSVGTag,ot.transformTemplate)}renderInstance(g,et,ot,ut){renderSVG(g,et,ot,ut)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(it,g)=>isSVGComponent(it)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:it!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const et=this.props.childRef.current;if(et&&g.isPresent&&!this.props.isPresent){const ot=this.props.sizeRef.current;ot.height=et.offsetHeight||0,ot.width=et.offsetWidth||0,ot.top=et.offsetTop,ot.left=et.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:it,isPresent:g}){const et=reactExports.useId(),ot=reactExports.useRef(null),ut=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:ct}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:dt,height:ft,top:St,left:kt}=ut.current;if(g||!ot.current||!dt||!ft)return;ot.current.dataset.motionPopId=et;const Tt=document.createElement("style");return ct&&(Tt.nonce=ct),document.head.appendChild(Tt),Tt.sheet&&Tt.sheet.insertRule(`
          [data-motion-pop-id="${et}"] {
            position: absolute !important;
            width: ${dt}px !important;
            height: ${ft}px !important;
            top: ${St}px !important;
            left: ${kt}px !important;
          }
        `),()=>{document.head.removeChild(Tt)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:ot,sizeRef:ut,children:reactExports.cloneElement(it,{ref:ot})})}const PresenceChild=({children:it,initial:g,isPresent:et,onExitComplete:ot,custom:ut,presenceAffectsLayout:ct,mode:dt})=>{const ft=useConstant(newChildrenMap),St=reactExports.useId(),kt=reactExports.useCallback(Rt=>{ft.set(Rt,!0);for(const jt of ft.values())if(!jt)return;ot&&ot()},[ft,ot]),Tt=reactExports.useMemo(()=>({id:St,initial:g,isPresent:et,custom:ut,onExitComplete:kt,register:Rt=>(ft.set(Rt,!1),()=>ft.delete(Rt))}),ct?[Math.random(),kt]:[et,kt]);return reactExports.useMemo(()=>{ft.forEach((Rt,jt)=>ft.set(jt,!1))},[et]),reactExports.useEffect(()=>{!et&&!ft.size&&ot&&ot()},[et]),dt==="popLayout"&&(it=jsxRuntimeExports.jsx(PopChild,{isPresent:et,children:it})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Tt,children:it})};function newChildrenMap(){return new Map}const getChildKey=it=>it.key||"";function onlyElements(it){const g=[];return reactExports.Children.forEach(it,et=>{reactExports.isValidElement(et)&&g.push(et)}),g}const AnimatePresence=({children:it,exitBeforeEnter:g,custom:et,initial:ot=!0,onExitComplete:ut,presenceAffectsLayout:ct=!0,mode:dt="sync"})=>{const ft=reactExports.useMemo(()=>onlyElements(it),[it]),St=ft.map(getChildKey),kt=reactExports.useRef(!0),Tt=reactExports.useRef(ft),Rt=useConstant(()=>new Map),[jt,Ft]=reactExports.useState(ft),[Bt,Ht]=reactExports.useState(ft);useIsomorphicLayoutEffect$1(()=>{kt.current=!1,Tt.current=ft;for(let Kt=0;Kt<Bt.length;Kt++){const en=getChildKey(Bt[Kt]);St.includes(en)?Rt.delete(en):Rt.get(en)!==!0&&Rt.set(en,!1)}},[Bt,St.length,St.join("-")]);const Yt=[];if(ft!==jt){let Kt=[...ft];for(let en=0;en<Bt.length;en++){const tn=Bt[en],on=getChildKey(tn);St.includes(on)||(Kt.splice(en,0,tn),Yt.push(tn))}dt==="wait"&&Yt.length&&(Kt=Yt),Ht(onlyElements(Kt)),Ft(ft);return}const{forceRender:zt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Bt.map(Kt=>{const en=getChildKey(Kt),tn=ft===Bt||St.includes(en),on=()=>{if(Rt.has(en))Rt.set(en,!0);else return;let an=!0;Rt.forEach(un=>{un||(an=!1)}),an&&(zt==null||zt(),Ht(Tt.current),ut&&ut())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:tn,initial:!kt.current||ot?void 0:!1,custom:tn?void 0:et,presenceAffectsLayout:ct,mode:dt,onExitComplete:tn?void 0:on,children:Kt},en)})})};function useMotionValue(it){const g=useConstant(()=>motionValue(it)),{isStatic:et}=reactExports.useContext(MotionConfigContext);if(et){const[,ot]=reactExports.useState(it);reactExports.useEffect(()=>g.on("change",ot),[])}return g}function toNumber(it){return typeof it=="number"?it:parseFloat(it)}function useSpring(it,g={}){const{isStatic:et}=reactExports.useContext(MotionConfigContext),ot=reactExports.useRef(null),ut=useMotionValue(isMotionValue(it)?toNumber(it.get()):it),ct=reactExports.useRef(ut.get()),dt=reactExports.useRef(()=>{}),ft=()=>{const kt=ot.current;kt&&kt.time===0&&kt.sample(frameData.delta),St(),ot.current=animateValue({keyframes:[ut.get(),ct.current],velocity:ut.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:dt.current})},St=()=>{ot.current&&ot.current.stop()};return reactExports.useInsertionEffect(()=>ut.attach((kt,Tt)=>et?Tt(kt):(ct.current=kt,dt.current=Tt,frame.update(ft),ut.get()),St),[JSON.stringify(g)]),useIsomorphicLayoutEffect$1(()=>{if(isMotionValue(it))return it.on("change",kt=>ut.set(toNumber(kt)))},[ut]),ut}function bind$1(it,g){return function(){return it.apply(g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(it=>g=>{const et=toString.call(g);return it[et]||(it[et]=et.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=it=>(it=it.toLowerCase(),g=>kindOf(g)===it),typeOfTest=it=>g=>typeof g===it,{isArray:isArray$4}=Array,isUndefined=typeOfTest("undefined");function isBuffer$3(it){return it!==null&&!isUndefined(it)&&it.constructor!==null&&!isUndefined(it.constructor)&&isFunction$4(it.constructor.isBuffer)&&it.constructor.isBuffer(it)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(it){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(it):g=it&&it.buffer&&isArrayBuffer$1(it.buffer),g}const isString$1=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=it=>it!==null&&typeof it=="object",isBoolean=it=>it===!0||it===!1,isPlainObject$1=it=>{if(kindOf(it)!=="object")return!1;const g=getPrototypeOf(it);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in it)&&!(Symbol.iterator in it)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=it=>isObject$3(it)&&isFunction$4(it.pipe),isFormData=it=>{let g;return it&&(typeof FormData=="function"&&it instanceof FormData||isFunction$4(it.append)&&((g=kindOf(it))==="formdata"||g==="object"&&isFunction$4(it.toString)&&it.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=it=>it.trim?it.trim():it.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(it,g,{allOwnKeys:et=!1}={}){if(it===null||typeof it>"u")return;let ot,ut;if(typeof it!="object"&&(it=[it]),isArray$4(it))for(ot=0,ut=it.length;ot<ut;ot++)g.call(null,it[ot],ot,it);else{const ct=et?Object.getOwnPropertyNames(it):Object.keys(it),dt=ct.length;let ft;for(ot=0;ot<dt;ot++)ft=ct[ot],g.call(null,it[ft],ft,it)}}function findKey(it,g){g=g.toLowerCase();const et=Object.keys(it);let ot=et.length,ut;for(;ot-- >0;)if(ut=et[ot],g===ut.toLowerCase())return ut;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=it=>!isUndefined(it)&&it!==_global;function merge(){const{caseless:it}=isContextDefined(this)&&this||{},g={},et=(ot,ut)=>{const ct=it&&findKey(g,ut)||ut;isPlainObject$1(g[ct])&&isPlainObject$1(ot)?g[ct]=merge(g[ct],ot):isPlainObject$1(ot)?g[ct]=merge({},ot):isArray$4(ot)?g[ct]=ot.slice():g[ct]=ot};for(let ot=0,ut=arguments.length;ot<ut;ot++)arguments[ot]&&forEach$1(arguments[ot],et);return g}const extend=(it,g,et,{allOwnKeys:ot}={})=>(forEach$1(g,(ut,ct)=>{et&&isFunction$4(ut)?it[ct]=bind$1(ut,et):it[ct]=ut},{allOwnKeys:ot}),it),stripBOM=it=>(it.charCodeAt(0)===65279&&(it=it.slice(1)),it),inherits=(it,g,et,ot)=>{it.prototype=Object.create(g.prototype,ot),it.prototype.constructor=it,Object.defineProperty(it,"super",{value:g.prototype}),et&&Object.assign(it.prototype,et)},toFlatObject=(it,g,et,ot)=>{let ut,ct,dt;const ft={};if(g=g||{},it==null)return g;do{for(ut=Object.getOwnPropertyNames(it),ct=ut.length;ct-- >0;)dt=ut[ct],(!ot||ot(dt,it,g))&&!ft[dt]&&(g[dt]=it[dt],ft[dt]=!0);it=et!==!1&&getPrototypeOf(it)}while(it&&(!et||et(it,g))&&it!==Object.prototype);return g},endsWith=(it,g,et)=>{it=String(it),(et===void 0||et>it.length)&&(et=it.length),et-=g.length;const ot=it.indexOf(g,et);return ot!==-1&&ot===et},toArray=it=>{if(!it)return null;if(isArray$4(it))return it;let g=it.length;if(!isNumber$1(g))return null;const et=new Array(g);for(;g-- >0;)et[g]=it[g];return et},isTypedArray$3=(it=>g=>it&&g instanceof it)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(it,g)=>{const ot=(it&&it[Symbol.iterator]).call(it);let ut;for(;(ut=ot.next())&&!ut.done;){const ct=ut.value;g.call(it,ct[0],ct[1])}},matchAll=(it,g)=>{let et;const ot=[];for(;(et=it.exec(g))!==null;)ot.push(et);return ot},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=it=>it.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(et,ot,ut){return ot.toUpperCase()+ut}),hasOwnProperty$9=(({hasOwnProperty:it})=>(g,et)=>it.call(g,et))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(it,g)=>{const et=Object.getOwnPropertyDescriptors(it),ot={};forEach$1(et,(ut,ct)=>{let dt;(dt=g(ut,ct,it))!==!1&&(ot[ct]=dt||ut)}),Object.defineProperties(it,ot)},freezeMethods=it=>{reduceDescriptors(it,(g,et)=>{if(isFunction$4(it)&&["arguments","caller","callee"].indexOf(et)!==-1)return!1;const ot=it[et];if(isFunction$4(ot)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+et+"'")})}})},toObjectSet=(it,g)=>{const et={},ot=ut=>{ut.forEach(ct=>{et[ct]=!0})};return isArray$4(it)?ot(it):ot(String(it).split(g)),et},noop$1=()=>{},toFiniteNumber=(it,g)=>it!=null&&Number.isFinite(it=+it)?it:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(it=16,g=ALPHABET.ALPHA_DIGIT)=>{let et="";const{length:ot}=g;for(;it--;)et+=g[Math.random()*ot|0];return et};function isSpecCompliantForm(it){return!!(it&&isFunction$4(it.append)&&it[Symbol.toStringTag]==="FormData"&&it[Symbol.iterator])}const toJSONObject=it=>{const g=new Array(10),et=(ot,ut)=>{if(isObject$3(ot)){if(g.indexOf(ot)>=0)return;if(!("toJSON"in ot)){g[ut]=ot;const ct=isArray$4(ot)?[]:{};return forEach$1(ot,(dt,ft)=>{const St=et(dt,ut+1);!isUndefined(St)&&(ct[ft]=St)}),g[ut]=void 0,ct}}return ot};return et(it,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=it=>it&&(isObject$3(it)||isFunction$4(it))&&isFunction$4(it.then)&&isFunction$4(it.catch),_setImmediate=((it,g)=>it?setImmediate:g?((et,ot)=>(_global.addEventListener("message",({source:ut,data:ct})=>{ut===_global&&ct===et&&ot.length&&ot.shift()()},!1),ut=>{ot.push(ut),_global.postMessage(et,"*")}))(`axios@${Math.random()}`,[]):et=>setTimeout(et))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$4,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(it,g,et,ot,ut){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=it,this.name="AxiosError",g&&(this.code=g),et&&(this.config=et),ot&&(this.request=ot),ut&&(this.response=ut,this.status=ut.status?ut.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(it=>{descriptors[it]={value:it}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(it,g,et,ot,ut,ct)=>{const dt=Object.create(prototype$1);return utils$1.toFlatObject(it,dt,function(St){return St!==Error.prototype},ft=>ft!=="isAxiosError"),AxiosError.call(dt,it.message,g,et,ot,ut),dt.cause=it,dt.name=it.name,ct&&Object.assign(dt,ct),dt};const httpAdapter=null;function isVisitable(it){return utils$1.isPlainObject(it)||utils$1.isArray(it)}function removeBrackets(it){return utils$1.endsWith(it,"[]")?it.slice(0,-2):it}function renderKey(it,g,et){return it?it.concat(g).map(function(ut,ct){return ut=removeBrackets(ut),!et&&ct?"["+ut+"]":ut}).join(et?".":""):g}function isFlatArray(it){return utils$1.isArray(it)&&!it.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(it,g,et){if(!utils$1.isObject(it))throw new TypeError("target must be an object");g=g||new FormData,et=utils$1.toFlatObject(et,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ht,Yt){return!utils$1.isUndefined(Yt[Ht])});const ot=et.metaTokens,ut=et.visitor||Tt,ct=et.dots,dt=et.indexes,St=(et.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(g);if(!utils$1.isFunction(ut))throw new TypeError("visitor must be a function");function kt(Bt){if(Bt===null)return"";if(utils$1.isDate(Bt))return Bt.toISOString();if(!St&&utils$1.isBlob(Bt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Bt)||utils$1.isTypedArray(Bt)?St&&typeof Blob=="function"?new Blob([Bt]):Buffer.from(Bt):Bt}function Tt(Bt,Ht,Yt){let zt=Bt;if(Bt&&!Yt&&typeof Bt=="object"){if(utils$1.endsWith(Ht,"{}"))Ht=ot?Ht:Ht.slice(0,-2),Bt=JSON.stringify(Bt);else if(utils$1.isArray(Bt)&&isFlatArray(Bt)||(utils$1.isFileList(Bt)||utils$1.endsWith(Ht,"[]"))&&(zt=utils$1.toArray(Bt)))return Ht=removeBrackets(Ht),zt.forEach(function(en,tn){!(utils$1.isUndefined(en)||en===null)&&g.append(dt===!0?renderKey([Ht],tn,ct):dt===null?Ht:Ht+"[]",kt(en))}),!1}return isVisitable(Bt)?!0:(g.append(renderKey(Yt,Ht,ct),kt(Bt)),!1)}const Rt=[],jt=Object.assign(predicates,{defaultVisitor:Tt,convertValue:kt,isVisitable});function Ft(Bt,Ht){if(!utils$1.isUndefined(Bt)){if(Rt.indexOf(Bt)!==-1)throw Error("Circular reference detected in "+Ht.join("."));Rt.push(Bt),utils$1.forEach(Bt,function(zt,Kt){(!(utils$1.isUndefined(zt)||zt===null)&&ut.call(g,zt,utils$1.isString(Kt)?Kt.trim():Kt,Ht,jt))===!0&&Ft(zt,Ht?Ht.concat(Kt):[Kt])}),Rt.pop()}}if(!utils$1.isObject(it))throw new TypeError("data must be an object");return Ft(it),g}function encode$1(it){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(it).replace(/[!'()~]|%20|%00/g,function(ot){return g[ot]})}function AxiosURLSearchParams(it,g){this._pairs=[],it&&toFormData(it,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,et){this._pairs.push([g,et])};prototype.toString=function(g){const et=g?function(ot){return g.call(this,ot,encode$1)}:encode$1;return this._pairs.map(function(ut){return et(ut[0])+"="+et(ut[1])},"").join("&")};function encode(it){return encodeURIComponent(it).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(it,g,et){if(!g)return it;const ot=et&&et.encode||encode;utils$1.isFunction(et)&&(et={serialize:et});const ut=et&&et.serialize;let ct;if(ut?ct=ut(g,et):ct=utils$1.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,et).toString(ot),ct){const dt=it.indexOf("#");dt!==-1&&(it=it.slice(0,dt)),it+=(it.indexOf("?")===-1?"?":"&")+ct}return it}class InterceptorManager{constructor(){this.handlers=[]}use(g,et,ot){return this.handlers.push({fulfilled:g,rejected:et,synchronous:ot?ot.synchronous:!1,runWhen:ot?ot.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$1.forEach(this.handlers,function(ot){ot!==null&&g(ot)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(it,g){return toFormData(it,new platform.classes.URLSearchParams,Object.assign({visitor:function(et,ot,ut,ct){return platform.isNode&&utils$1.isBuffer(et)?(this.append(ot,et.toString("base64")),!1):ct.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(it){return utils$1.matchAll(/\w+|\[(\w*)]/g,it).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(it){const g={},et=Object.keys(it);let ot;const ut=et.length;let ct;for(ot=0;ot<ut;ot++)ct=et[ot],g[ct]=it[ct];return g}function formDataToJSON(it){function g(et,ot,ut,ct){let dt=et[ct++];if(dt==="__proto__")return!0;const ft=Number.isFinite(+dt),St=ct>=et.length;return dt=!dt&&utils$1.isArray(ut)?ut.length:dt,St?(utils$1.hasOwnProp(ut,dt)?ut[dt]=[ut[dt],ot]:ut[dt]=ot,!ft):((!ut[dt]||!utils$1.isObject(ut[dt]))&&(ut[dt]=[]),g(et,ot,ut[dt],ct)&&utils$1.isArray(ut[dt])&&(ut[dt]=arrayToObject(ut[dt])),!ft)}if(utils$1.isFormData(it)&&utils$1.isFunction(it.entries)){const et={};return utils$1.forEachEntry(it,(ot,ut)=>{g(parsePropPath(ot),ut,et,0)}),et}return null}function stringifySafely(it,g,et){if(utils$1.isString(it))try{return(g||JSON.parse)(it),utils$1.trim(it)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(et||JSON.stringify)(it)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,et){const ot=et.getContentType()||"",ut=ot.indexOf("application/json")>-1,ct=utils$1.isObject(g);if(ct&&utils$1.isHTMLForm(g)&&(g=new FormData(g)),utils$1.isFormData(g))return ut?JSON.stringify(formDataToJSON(g)):g;if(utils$1.isArrayBuffer(g)||utils$1.isBuffer(g)||utils$1.isStream(g)||utils$1.isFile(g)||utils$1.isBlob(g)||utils$1.isReadableStream(g))return g;if(utils$1.isArrayBufferView(g))return g.buffer;if(utils$1.isURLSearchParams(g))return et.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let ft;if(ct){if(ot.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((ft=utils$1.isFileList(g))||ot.indexOf("multipart/form-data")>-1){const St=this.env&&this.env.FormData;return toFormData(ft?{"files[]":g}:g,St&&new St,this.formSerializer)}}return ct||ut?(et.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const et=this.transitional||defaults$1.transitional,ot=et&&et.forcedJSONParsing,ut=this.responseType==="json";if(utils$1.isResponse(g)||utils$1.isReadableStream(g))return g;if(g&&utils$1.isString(g)&&(ot&&!this.responseType||ut)){const dt=!(et&&et.silentJSONParsing)&&ut;try{return JSON.parse(g)}catch(ft){if(dt)throw ft.name==="SyntaxError"?AxiosError.from(ft,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):ft}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],it=>{defaults$1.headers[it]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=it=>{const g={};let et,ot,ut;return it&&it.split(`
`).forEach(function(dt){ut=dt.indexOf(":"),et=dt.substring(0,ut).trim().toLowerCase(),ot=dt.substring(ut+1).trim(),!(!et||g[et]&&ignoreDuplicateOf[et])&&(et==="set-cookie"?g[et]?g[et].push(ot):g[et]=[ot]:g[et]=g[et]?g[et]+", "+ot:ot)}),g},$internals=Symbol("internals");function normalizeHeader(it){return it&&String(it).trim().toLowerCase()}function normalizeValue(it){return it===!1||it==null?it:utils$1.isArray(it)?it.map(normalizeValue):String(it)}function parseTokens(it){const g=Object.create(null),et=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ot;for(;ot=et.exec(it);)g[ot[1]]=ot[2];return g}const isValidHeaderName=it=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(it.trim());function matchHeaderValue(it,g,et,ot,ut){if(utils$1.isFunction(ot))return ot.call(this,g,et);if(ut&&(g=et),!!utils$1.isString(g)){if(utils$1.isString(ot))return g.indexOf(ot)!==-1;if(utils$1.isRegExp(ot))return ot.test(g)}}function formatHeader(it){return it.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,et,ot)=>et.toUpperCase()+ot)}function buildAccessors(it,g){const et=utils$1.toCamelCase(" "+g);["get","set","has"].forEach(ot=>{Object.defineProperty(it,ot+et,{value:function(ut,ct,dt){return this[ot].call(this,g,ut,ct,dt)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,et,ot){const ut=this;function ct(ft,St,kt){const Tt=normalizeHeader(St);if(!Tt)throw new Error("header name must be a non-empty string");const Rt=utils$1.findKey(ut,Tt);(!Rt||ut[Rt]===void 0||kt===!0||kt===void 0&&ut[Rt]!==!1)&&(ut[Rt||St]=normalizeValue(ft))}const dt=(ft,St)=>utils$1.forEach(ft,(kt,Tt)=>ct(kt,Tt,St));if(utils$1.isPlainObject(g)||g instanceof this.constructor)dt(g,et);else if(utils$1.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))dt(parseHeaders(g),et);else if(utils$1.isHeaders(g))for(const[ft,St]of g.entries())ct(St,ft,ot);else g!=null&&ct(et,g,ot);return this}get(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);if(ot){const ut=this[ot];if(!et)return ut;if(et===!0)return parseTokens(ut);if(utils$1.isFunction(et))return et.call(this,ut,ot);if(utils$1.isRegExp(et))return et.exec(ut);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);return!!(ot&&this[ot]!==void 0&&(!et||matchHeaderValue(this,this[ot],ot,et)))}return!1}delete(g,et){const ot=this;let ut=!1;function ct(dt){if(dt=normalizeHeader(dt),dt){const ft=utils$1.findKey(ot,dt);ft&&(!et||matchHeaderValue(ot,ot[ft],ft,et))&&(delete ot[ft],ut=!0)}}return utils$1.isArray(g)?g.forEach(ct):ct(g),ut}clear(g){const et=Object.keys(this);let ot=et.length,ut=!1;for(;ot--;){const ct=et[ot];(!g||matchHeaderValue(this,this[ct],ct,g,!0))&&(delete this[ct],ut=!0)}return ut}normalize(g){const et=this,ot={};return utils$1.forEach(this,(ut,ct)=>{const dt=utils$1.findKey(ot,ct);if(dt){et[dt]=normalizeValue(ut),delete et[ct];return}const ft=g?formatHeader(ct):String(ct).trim();ft!==ct&&delete et[ct],et[ft]=normalizeValue(ut),ot[ft]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const et=Object.create(null);return utils$1.forEach(this,(ot,ut)=>{ot!=null&&ot!==!1&&(et[ut]=g&&utils$1.isArray(ot)?ot.join(", "):ot)}),et}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,et])=>g+": "+et).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...et){const ot=new this(g);return et.forEach(ut=>ot.set(ut)),ot}static accessor(g){const ot=(this[$internals]=this[$internals]={accessors:{}}).accessors,ut=this.prototype;function ct(dt){const ft=normalizeHeader(dt);ot[ft]||(buildAccessors(ut,dt),ot[ft]=!0)}return utils$1.isArray(g)?g.forEach(ct):ct(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:it},g)=>{let et=g[0].toUpperCase()+g.slice(1);return{get:()=>it,set(ot){this[et]=ot}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(it,g){const et=this||defaults$2,ot=g||et,ut=AxiosHeaders$1.from(ot.headers);let ct=ot.data;return utils$1.forEach(it,function(ft){ct=ft.call(et,ct,ut.normalize(),g?g.status:void 0)}),ut.normalize(),ct}function isCancel(it){return!!(it&&it.__CANCEL__)}function CanceledError(it,g,et){AxiosError.call(this,it??"canceled",AxiosError.ERR_CANCELED,g,et),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(it,g,et){const ot=et.config.validateStatus;!et.status||!ot||ot(et.status)?it(et):g(new AxiosError("Request failed with status code "+et.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(et.status/100)-4],et.config,et.request,et))}function parseProtocol(it){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(it);return g&&g[1]||""}function speedometer(it,g){it=it||10;const et=new Array(it),ot=new Array(it);let ut=0,ct=0,dt;return g=g!==void 0?g:1e3,function(St){const kt=Date.now(),Tt=ot[ct];dt||(dt=kt),et[ut]=St,ot[ut]=kt;let Rt=ct,jt=0;for(;Rt!==ut;)jt+=et[Rt++],Rt=Rt%it;if(ut=(ut+1)%it,ut===ct&&(ct=(ct+1)%it),kt-dt<g)return;const Ft=Tt&&kt-Tt;return Ft?Math.round(jt*1e3/Ft):void 0}}function throttle(it,g){let et=0,ot=1e3/g,ut,ct;const dt=(kt,Tt=Date.now())=>{et=Tt,ut=null,ct&&(clearTimeout(ct),ct=null),it.apply(null,kt)};return[(...kt)=>{const Tt=Date.now(),Rt=Tt-et;Rt>=ot?dt(kt,Tt):(ut=kt,ct||(ct=setTimeout(()=>{ct=null,dt(ut)},ot-Rt)))},()=>ut&&dt(ut)]}const progressEventReducer=(it,g,et=3)=>{let ot=0;const ut=speedometer(50,250);return throttle(ct=>{const dt=ct.loaded,ft=ct.lengthComputable?ct.total:void 0,St=dt-ot,kt=ut(St),Tt=dt<=ft;ot=dt;const Rt={loaded:dt,total:ft,progress:ft?dt/ft:void 0,bytes:St,rate:kt||void 0,estimated:kt&&ft&&Tt?(ft-dt)/kt:void 0,event:ct,lengthComputable:ft!=null,[g?"download":"upload"]:!0};it(Rt)},et)},progressEventDecorator=(it,g)=>{const et=it!=null;return[ot=>g[0]({lengthComputable:et,total:it,loaded:ot}),g[1]]},asyncDecorator=it=>(...g)=>utils$1.asap(()=>it(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?((it,g)=>et=>(et=new URL(et,platform.origin),it.protocol===et.protocol&&it.host===et.host&&(g||it.port===et.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(it,g,et,ot,ut,ct){const dt=[it+"="+encodeURIComponent(g)];utils$1.isNumber(et)&&dt.push("expires="+new Date(et).toGMTString()),utils$1.isString(ot)&&dt.push("path="+ot),utils$1.isString(ut)&&dt.push("domain="+ut),ct===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(it){const g=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(it){this.write(it,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(it){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(it)}function combineURLs(it,g){return g?it.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):it}function buildFullPath(it,g){return it&&!isAbsoluteURL(g)?combineURLs(it,g):g}const headersToObject=it=>it instanceof AxiosHeaders$1?{...it}:it;function mergeConfig(it,g){g=g||{};const et={};function ot(kt,Tt,Rt,jt){return utils$1.isPlainObject(kt)&&utils$1.isPlainObject(Tt)?utils$1.merge.call({caseless:jt},kt,Tt):utils$1.isPlainObject(Tt)?utils$1.merge({},Tt):utils$1.isArray(Tt)?Tt.slice():Tt}function ut(kt,Tt,Rt,jt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt,Rt,jt)}else return ot(kt,Tt,Rt,jt)}function ct(kt,Tt){if(!utils$1.isUndefined(Tt))return ot(void 0,Tt)}function dt(kt,Tt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt)}else return ot(void 0,Tt)}function ft(kt,Tt,Rt){if(Rt in g)return ot(kt,Tt);if(Rt in it)return ot(void 0,kt)}const St={url:ct,method:ct,data:ct,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:ft,headers:(kt,Tt,Rt)=>ut(headersToObject(kt),headersToObject(Tt),Rt,!0)};return utils$1.forEach(Object.keys(Object.assign({},it,g)),function(Tt){const Rt=St[Tt]||ut,jt=Rt(it[Tt],g[Tt],Tt);utils$1.isUndefined(jt)&&Rt!==ft||(et[Tt]=jt)}),et}const resolveConfig=it=>{const g=mergeConfig({},it);let{data:et,withXSRFToken:ot,xsrfHeaderName:ut,xsrfCookieName:ct,headers:dt,auth:ft}=g;g.headers=dt=AxiosHeaders$1.from(dt),g.url=buildURL(buildFullPath(g.baseURL,g.url),it.params,it.paramsSerializer),ft&&dt.set("Authorization","Basic "+btoa((ft.username||"")+":"+(ft.password?unescape(encodeURIComponent(ft.password)):"")));let St;if(utils$1.isFormData(et)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((St=dt.getContentType())!==!1){const[kt,...Tt]=St?St.split(";").map(Rt=>Rt.trim()).filter(Boolean):[];dt.setContentType([kt||"multipart/form-data",...Tt].join("; "))}}if(platform.hasStandardBrowserEnv&&(ot&&utils$1.isFunction(ot)&&(ot=ot(g)),ot||ot!==!1&&isURLSameOrigin(g.url))){const kt=ut&&ct&&cookies.read(ct);kt&&dt.set(ut,kt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(it){return new Promise(function(et,ot){const ut=resolveConfig(it);let ct=ut.data;const dt=AxiosHeaders$1.from(ut.headers).normalize();let{responseType:ft,onUploadProgress:St,onDownloadProgress:kt}=ut,Tt,Rt,jt,Ft,Bt;function Ht(){Ft&&Ft(),Bt&&Bt(),ut.cancelToken&&ut.cancelToken.unsubscribe(Tt),ut.signal&&ut.signal.removeEventListener("abort",Tt)}let Yt=new XMLHttpRequest;Yt.open(ut.method.toUpperCase(),ut.url,!0),Yt.timeout=ut.timeout;function zt(){if(!Yt)return;const en=AxiosHeaders$1.from("getAllResponseHeaders"in Yt&&Yt.getAllResponseHeaders()),on={data:!ft||ft==="text"||ft==="json"?Yt.responseText:Yt.response,status:Yt.status,statusText:Yt.statusText,headers:en,config:it,request:Yt};settle(function(un){et(un),Ht()},function(un){ot(un),Ht()},on),Yt=null}"onloadend"in Yt?Yt.onloadend=zt:Yt.onreadystatechange=function(){!Yt||Yt.readyState!==4||Yt.status===0&&!(Yt.responseURL&&Yt.responseURL.indexOf("file:")===0)||setTimeout(zt)},Yt.onabort=function(){Yt&&(ot(new AxiosError("Request aborted",AxiosError.ECONNABORTED,it,Yt)),Yt=null)},Yt.onerror=function(){ot(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Yt)),Yt=null},Yt.ontimeout=function(){let tn=ut.timeout?"timeout of "+ut.timeout+"ms exceeded":"timeout exceeded";const on=ut.transitional||transitionalDefaults;ut.timeoutErrorMessage&&(tn=ut.timeoutErrorMessage),ot(new AxiosError(tn,on.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,it,Yt)),Yt=null},ct===void 0&&dt.setContentType(null),"setRequestHeader"in Yt&&utils$1.forEach(dt.toJSON(),function(tn,on){Yt.setRequestHeader(on,tn)}),utils$1.isUndefined(ut.withCredentials)||(Yt.withCredentials=!!ut.withCredentials),ft&&ft!=="json"&&(Yt.responseType=ut.responseType),kt&&([jt,Bt]=progressEventReducer(kt,!0),Yt.addEventListener("progress",jt)),St&&Yt.upload&&([Rt,Ft]=progressEventReducer(St),Yt.upload.addEventListener("progress",Rt),Yt.upload.addEventListener("loadend",Ft)),(ut.cancelToken||ut.signal)&&(Tt=en=>{Yt&&(ot(!en||en.type?new CanceledError(null,it,Yt):en),Yt.abort(),Yt=null)},ut.cancelToken&&ut.cancelToken.subscribe(Tt),ut.signal&&(ut.signal.aborted?Tt():ut.signal.addEventListener("abort",Tt)));const Kt=parseProtocol(ut.url);if(Kt&&platform.protocols.indexOf(Kt)===-1){ot(new AxiosError("Unsupported protocol "+Kt+":",AxiosError.ERR_BAD_REQUEST,it));return}Yt.send(ct||null)})},composeSignals=(it,g)=>{const{length:et}=it=it?it.filter(Boolean):[];if(g||et){let ot=new AbortController,ut;const ct=function(kt){if(!ut){ut=!0,ft();const Tt=kt instanceof Error?kt:this.reason;ot.abort(Tt instanceof AxiosError?Tt:new CanceledError(Tt instanceof Error?Tt.message:Tt))}};let dt=g&&setTimeout(()=>{dt=null,ct(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const ft=()=>{it&&(dt&&clearTimeout(dt),dt=null,it.forEach(kt=>{kt.unsubscribe?kt.unsubscribe(ct):kt.removeEventListener("abort",ct)}),it=null)};it.forEach(kt=>kt.addEventListener("abort",ct));const{signal:St}=ot;return St.unsubscribe=()=>utils$1.asap(ft),St}},composeSignals$1=composeSignals,streamChunk=function*(it,g){let et=it.byteLength;if(!g||et<g){yield it;return}let ot=0,ut;for(;ot<et;)ut=ot+g,yield it.slice(ot,ut),ot=ut},readBytes=async function*(it,g){for await(const et of readStream(it))yield*streamChunk(et,g)},readStream=async function*(it){if(it[Symbol.asyncIterator]){yield*it;return}const g=it.getReader();try{for(;;){const{done:et,value:ot}=await g.read();if(et)break;yield ot}}finally{await g.cancel()}},trackStream=(it,g,et,ot)=>{const ut=readBytes(it,g);let ct=0,dt,ft=St=>{dt||(dt=!0,ot&&ot(St))};return new ReadableStream({async pull(St){try{const{done:kt,value:Tt}=await ut.next();if(kt){ft(),St.close();return}let Rt=Tt.byteLength;if(et){let jt=ct+=Rt;et(jt)}St.enqueue(new Uint8Array(Tt))}catch(kt){throw ft(kt),kt}},cancel(St){return ft(St),ut.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(it=>g=>it.encode(g))(new TextEncoder):async it=>new Uint8Array(await new Response(it).arrayBuffer())),test=(it,...g)=>{try{return!!it(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let it=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return it=!0,"half"}}).headers.has("Content-Type");return it&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(it=>it.body)};isFetchSupported&&(it=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$1.isFunction(it[g])?et=>et[g]():(et,ot)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,ot)})})})(new Response);const getBodyLength=async it=>{if(it==null)return 0;if(utils$1.isBlob(it))return it.size;if(utils$1.isSpecCompliantForm(it))return(await new Request(platform.origin,{method:"POST",body:it}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(it)||utils$1.isArrayBuffer(it))return it.byteLength;if(utils$1.isURLSearchParams(it)&&(it=it+""),utils$1.isString(it))return(await encodeText(it)).byteLength},resolveBodyLength=async(it,g)=>{const et=utils$1.toFiniteNumber(it.getContentLength());return et??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async it=>{let{url:g,method:et,data:ot,signal:ut,cancelToken:ct,timeout:dt,onDownloadProgress:ft,onUploadProgress:St,responseType:kt,headers:Tt,withCredentials:Rt="same-origin",fetchOptions:jt}=resolveConfig(it);kt=kt?(kt+"").toLowerCase():"text";let Ft=composeSignals$1([ut,ct&&ct.toAbortSignal()],dt),Bt;const Ht=Ft&&Ft.unsubscribe&&(()=>{Ft.unsubscribe()});let Yt;try{if(St&&supportsRequestStream&&et!=="get"&&et!=="head"&&(Yt=await resolveBodyLength(Tt,ot))!==0){let on=new Request(g,{method:"POST",body:ot,duplex:"half"}),an;if(utils$1.isFormData(ot)&&(an=on.headers.get("content-type"))&&Tt.setContentType(an),on.body){const[un,dn]=progressEventDecorator(Yt,progressEventReducer(asyncDecorator(St)));ot=trackStream(on.body,DEFAULT_CHUNK_SIZE,un,dn)}}utils$1.isString(Rt)||(Rt=Rt?"include":"omit");const zt="credentials"in Request.prototype;Bt=new Request(g,{...jt,signal:Ft,method:et.toUpperCase(),headers:Tt.normalize().toJSON(),body:ot,duplex:"half",credentials:zt?Rt:void 0});let Kt=await fetch(Bt);const en=supportsResponseStream&&(kt==="stream"||kt==="response");if(supportsResponseStream&&(ft||en&&Ht)){const on={};["status","statusText","headers"].forEach(Sn=>{on[Sn]=Kt[Sn]});const an=utils$1.toFiniteNumber(Kt.headers.get("content-length")),[un,dn]=ft&&progressEventDecorator(an,progressEventReducer(asyncDecorator(ft),!0))||[];Kt=new Response(trackStream(Kt.body,DEFAULT_CHUNK_SIZE,un,()=>{dn&&dn(),Ht&&Ht()}),on)}kt=kt||"text";let tn=await resolvers[utils$1.findKey(resolvers,kt)||"text"](Kt,it);return!en&&Ht&&Ht(),await new Promise((on,an)=>{settle(on,an,{data:tn,headers:AxiosHeaders$1.from(Kt.headers),status:Kt.status,statusText:Kt.statusText,config:it,request:Bt})})}catch(zt){throw Ht&&Ht(),zt&&zt.name==="TypeError"&&/fetch/i.test(zt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Bt),{cause:zt.cause||zt}):AxiosError.from(zt,zt&&zt.code,it,Bt)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(it,g)=>{if(it){try{Object.defineProperty(it,"name",{value:g})}catch{}Object.defineProperty(it,"adapterName",{value:g})}});const renderReason=it=>`- ${it}`,isResolvedHandle=it=>utils$1.isFunction(it)||it===null||it===!1,adapters={getAdapter:it=>{it=utils$1.isArray(it)?it:[it];const{length:g}=it;let et,ot;const ut={};for(let ct=0;ct<g;ct++){et=it[ct];let dt;if(ot=et,!isResolvedHandle(et)&&(ot=knownAdapters[(dt=String(et)).toLowerCase()],ot===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(ot)break;ut[dt||"#"+ct]=ot}if(!ot){const ct=Object.entries(ut).map(([ft,St])=>`adapter ${ft} `+(St===!1?"is not supported by the environment":"is not available in the build"));let dt=g?ct.length>1?`since :
`+ct.map(renderReason).join(`
`):" "+renderReason(ct[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return ot},adapters:knownAdapters};function throwIfCancellationRequested(it){if(it.cancelToken&&it.cancelToken.throwIfRequested(),it.signal&&it.signal.aborted)throw new CanceledError(null,it)}function dispatchRequest(it){return throwIfCancellationRequested(it),it.headers=AxiosHeaders$1.from(it.headers),it.data=transformData.call(it,it.transformRequest),["post","put","patch"].indexOf(it.method)!==-1&&it.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(it.adapter||defaults$2.adapter)(it).then(function(ot){return throwIfCancellationRequested(it),ot.data=transformData.call(it,it.transformResponse,ot),ot.headers=AxiosHeaders$1.from(ot.headers),ot},function(ot){return isCancel(ot)||(throwIfCancellationRequested(it),ot&&ot.response&&(ot.response.data=transformData.call(it,it.transformResponse,ot.response),ot.response.headers=AxiosHeaders$1.from(ot.response.headers))),Promise.reject(ot)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((it,g)=>{validators$1[it]=function(ot){return typeof ot===it||"a"+(g<1?"n ":" ")+it}});const deprecatedWarnings={};validators$1.transitional=function(g,et,ot){function ut(ct,dt){return"[Axios v"+VERSION+"] Transitional option '"+ct+"'"+dt+(ot?". "+ot:"")}return(ct,dt,ft)=>{if(g===!1)throw new AxiosError(ut(dt," has been removed"+(et?" in "+et:"")),AxiosError.ERR_DEPRECATED);return et&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(ut(dt," has been deprecated since v"+et+" and will be removed in the near future"))),g?g(ct,dt,ft):!0}};validators$1.spelling=function(g){return(et,ot)=>(console.warn(`${ot} is likely a misspelling of ${g}`),!0)};function assertOptions(it,g,et){if(typeof it!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ot=Object.keys(it);let ut=ot.length;for(;ut-- >0;){const ct=ot[ut],dt=g[ct];if(dt){const ft=it[ct],St=ft===void 0||dt(ft,ct,it);if(St!==!0)throw new AxiosError("option "+ct+" must be "+St,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(et!==!0)throw new AxiosError("Unknown option "+ct,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(g,et){try{return await this._request(g,et)}catch(ot){if(ot instanceof Error){let ut={};Error.captureStackTrace?Error.captureStackTrace(ut):ut=new Error;const ct=ut.stack?ut.stack.replace(/^.+\n/,""):"";try{ot.stack?ct&&!String(ot.stack).endsWith(ct.replace(/^.+\n.+\n/,""))&&(ot.stack+=`
`+ct):ot.stack=ct}catch{}}throw ot}}_request(g,et){typeof g=="string"?(et=et||{},et.url=g):et=g||{},et=mergeConfig(this.defaults,et);const{transitional:ot,paramsSerializer:ut,headers:ct}=et;ot!==void 0&&validator.assertOptions(ot,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ut!=null&&(utils$1.isFunction(ut)?et.paramsSerializer={serialize:ut}:validator.assertOptions(ut,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(et,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),et.method=(et.method||this.defaults.method||"get").toLowerCase();let dt=ct&&utils$1.merge(ct.common,ct[et.method]);ct&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Bt=>{delete ct[Bt]}),et.headers=AxiosHeaders$1.concat(dt,ct);const ft=[];let St=!0;this.interceptors.request.forEach(function(Ht){typeof Ht.runWhen=="function"&&Ht.runWhen(et)===!1||(St=St&&Ht.synchronous,ft.unshift(Ht.fulfilled,Ht.rejected))});const kt=[];this.interceptors.response.forEach(function(Ht){kt.push(Ht.fulfilled,Ht.rejected)});let Tt,Rt=0,jt;if(!St){const Bt=[dispatchRequest.bind(this),void 0];for(Bt.unshift.apply(Bt,ft),Bt.push.apply(Bt,kt),jt=Bt.length,Tt=Promise.resolve(et);Rt<jt;)Tt=Tt.then(Bt[Rt++],Bt[Rt++]);return Tt}jt=ft.length;let Ft=et;for(Rt=0;Rt<jt;){const Bt=ft[Rt++],Ht=ft[Rt++];try{Ft=Bt(Ft)}catch(Yt){Ht.call(this,Yt);break}}try{Tt=dispatchRequest.call(this,Ft)}catch(Bt){return Promise.reject(Bt)}for(Rt=0,jt=kt.length;Rt<jt;)Tt=Tt.then(kt[Rt++],kt[Rt++]);return Tt}getUri(g){g=mergeConfig(this.defaults,g);const et=buildFullPath(g.baseURL,g.url);return buildURL(et,g.params,g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(et,ot){return this.request(mergeConfig(ot||{},{method:g,url:et,data:(ot||{}).data}))}});utils$1.forEach(["post","put","patch"],function(g){function et(ot){return function(ct,dt,ft){return this.request(mergeConfig(ft||{},{method:g,headers:ot?{"Content-Type":"multipart/form-data"}:{},url:ct,data:dt}))}}Axios.prototype[g]=et(),Axios.prototype[g+"Form"]=et(!0)});const Axios$1=Axios;class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let et;this.promise=new Promise(function(ct){et=ct});const ot=this;this.promise.then(ut=>{if(!ot._listeners)return;let ct=ot._listeners.length;for(;ct-- >0;)ot._listeners[ct](ut);ot._listeners=null}),this.promise.then=ut=>{let ct;const dt=new Promise(ft=>{ot.subscribe(ft),ct=ft}).then(ut);return dt.cancel=function(){ot.unsubscribe(ct)},dt},g(function(ct,dt,ft){ot.reason||(ot.reason=new CanceledError(ct,dt,ft),et(ot.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const et=this._listeners.indexOf(g);et!==-1&&this._listeners.splice(et,1)}toAbortSignal(){const g=new AbortController,et=ot=>{g.abort(ot)};return this.subscribe(et),g.signal.unsubscribe=()=>this.unsubscribe(et),g.signal}static source(){let g;return{token:new CancelToken(function(ut){g=ut}),cancel:g}}}const CancelToken$1=CancelToken;function spread(it){return function(et){return it.apply(null,et)}}function isAxiosError(it){return utils$1.isObject(it)&&it.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([it,g])=>{HttpStatusCode[g]=it});const HttpStatusCode$1=HttpStatusCode;function createInstance$1(it){const g=new Axios$1(it),et=bind$1(Axios$1.prototype.request,g);return utils$1.extend(et,Axios$1.prototype,g,{allOwnKeys:!0}),utils$1.extend(et,g,null,{allOwnKeys:!0}),et.create=function(ut){return createInstance$1(mergeConfig(it,ut))},et}const axios=createInstance$1(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=it=>formDataToJSON(utils$1.isHTMLForm(it)?new FormData(it):it);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(it){var g,et,ot="";if(typeof it=="string"||typeof it=="number")ot+=it;else if(typeof it=="object")if(Array.isArray(it)){var ut=it.length;for(g=0;g<ut;g++)it[g]&&(et=r$3(it[g]))&&(ot&&(ot+=" "),ot+=et)}else for(et in it)it[et]&&(ot&&(ot+=" "),ot+=et);return ot}function clsx(){for(var it,g,et=0,ot="",ut=arguments.length;et<ut;et++)(it=arguments[et])&&(g=r$3(it))&&(ot&&(ot+=" "),ot+=g);return ot}function Mt(it){if(!it||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",g.firstChild?g.insertBefore(et,g.firstChild):g.appendChild(et),et.styleSheet?et.styleSheet.cssText=it:et.appendChild(document.createTextNode(it))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$2=it=>typeof it=="number"&&!isNaN(it),N$1=it=>typeof it=="string",P$2=it=>typeof it=="function",mt=it=>N$1(it)||L$2(it),B=it=>N$1(it)||P$2(it)?it:null,pt=(it,g)=>it===!1||L$2(it)&&it>0?it:g,z=it=>reactExports.isValidElement(it)||N$1(it)||P$2(it)||L$2(it);function Z$1(it,g,et=300){let{scrollHeight:ot,style:ut}=it;requestAnimationFrame(()=>{ut.minHeight="initial",ut.height=ot+"px",ut.transition=`all ${et}ms`,requestAnimationFrame(()=>{ut.height="0",ut.padding="0",ut.margin="0",setTimeout(g,et)})})}function $$2({enter:it,exit:g,appendPosition:et=!1,collapse:ot=!0,collapseDuration:ut=300}){return function({children:ct,position:dt,preventExitTransition:ft,done:St,nodeRef:kt,isIn:Tt,playToast:Rt}){let jt=et?`${it}--${dt}`:it,Ft=et?`${g}--${dt}`:g,Bt=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let Ht=kt.current,Yt=jt.split(" "),zt=Kt=>{Kt.target===kt.current&&(Rt(),Ht.removeEventListener("animationend",zt),Ht.removeEventListener("animationcancel",zt),Bt.current===0&&Kt.type!=="animationcancel"&&Ht.classList.remove(...Yt))};Ht.classList.add(...Yt),Ht.addEventListener("animationend",zt),Ht.addEventListener("animationcancel",zt)},[]),reactExports.useEffect(()=>{let Ht=kt.current,Yt=()=>{Ht.removeEventListener("animationend",Yt),ot?Z$1(Ht,St,ut):St()};Tt||(ft?Yt():(Bt.current=1,Ht.className+=` ${Ft}`,Ht.addEventListener("animationend",Yt)))},[Tt]),React$3.createElement(React$3.Fragment,null,ct)}}function J$1(it,g){return{content:tt$1(it.content,it.props),containerId:it.props.containerId,id:it.props.toastId,theme:it.props.theme,type:it.props.type,data:it.props.data||{},isLoading:it.props.isLoading,icon:it.props.icon,reason:it.removalReason,status:g}}function tt$1(it,g,et=!1){return reactExports.isValidElement(it)&&!N$1(it.type)?reactExports.cloneElement(it,{closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):P$2(it)?it({closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):it}function yt$1({closeToast:it,theme:g,ariaLabel:et="close"}){return React$3.createElement("button",{className:`Toastify__close-button Toastify__close-button--${g}`,type:"button",onClick:ot=>{ot.stopPropagation(),it(!0)},"aria-label":et},React$3.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$3.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:it,isRunning:g,closeToast:et,type:ot="default",hide:ut,className:ct,controlledProgress:dt,progress:ft,rtl:St,isIn:kt,theme:Tt}){let Rt=ut||dt&&ft===0,jt={animationDuration:`${it}ms`,animationPlayState:g?"running":"paused"};dt&&(jt.transform=`scaleX(${ft})`);let Ft=clsx("Toastify__progress-bar",dt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Tt}`,`Toastify__progress-bar--${ot}`,{"Toastify__progress-bar--rtl":St}),Bt=P$2(ct)?ct({rtl:St,type:ot,defaultClassName:Ft}):clsx(Ft,ct),Ht={[dt&&ft>=1?"onTransitionEnd":"onAnimationEnd"]:dt&&ft<1?null:()=>{kt&&et()}};return React$3.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Rt},React$3.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Tt} Toastify__progress-bar--${ot}`}),React$3.createElement("div",{role:"progressbar","aria-hidden":Rt?"true":"false","aria-label":"notification timer",className:Bt,style:jt,...Ht}))}var Xt=1,at=()=>`${Xt++}`;function _t(it,g,et){let ot=1,ut=0,ct=[],dt=[],ft=g,St=new Map,kt=new Set,Tt=Kt=>(kt.add(Kt),()=>kt.delete(Kt)),Rt=()=>{dt=Array.from(St.values()),kt.forEach(Kt=>Kt())},jt=({containerId:Kt,toastId:en,updateId:tn})=>{let on=Kt?Kt!==it:it!==1,an=St.has(en)&&tn==null;return on||an},Ft=(Kt,en)=>{St.forEach(tn=>{var on;(en==null||en===tn.props.toastId)&&((on=tn.toggle)==null||on.call(tn,Kt))})},Bt=Kt=>{var en,tn;(tn=(en=Kt.props)==null?void 0:en.onClose)==null||tn.call(en,Kt.removalReason),Kt.isActive=!1},Ht=Kt=>{if(Kt==null)St.forEach(Bt);else{let en=St.get(Kt);en&&Bt(en)}Rt()},Yt=()=>{ut-=ct.length,ct=[]},zt=Kt=>{var en,tn;let{toastId:on,updateId:an}=Kt.props,un=an==null;Kt.staleId&&St.delete(Kt.staleId),Kt.isActive=!0,St.set(on,Kt),Rt(),et(J$1(Kt,un?"added":"updated")),un&&((tn=(en=Kt.props).onOpen)==null||tn.call(en))};return{id:it,props:ft,observe:Tt,toggle:Ft,removeToast:Ht,toasts:St,clearQueue:Yt,buildToast:(Kt,en)=>{if(jt(en))return;let{toastId:tn,updateId:on,data:an,staleId:un,delay:dn}=en,Sn=on==null;Sn&&ut++;let mn={...ft,style:ft.toastStyle,key:ot++,...Object.fromEntries(Object.entries(en).filter(([En,kn])=>kn!=null)),toastId:tn,updateId:on,data:an,isIn:!1,className:B(en.className||ft.toastClassName),progressClassName:B(en.progressClassName||ft.progressClassName),autoClose:en.isLoading?!1:pt(en.autoClose,ft.autoClose),closeToast(En){St.get(tn).removalReason=En,Ht(tn)},deleteToast(){let En=St.get(tn);if(En!=null){if(et(J$1(En,"removed")),St.delete(tn),ut--,ut<0&&(ut=0),ct.length>0){zt(ct.shift());return}Rt()}}};mn.closeButton=ft.closeButton,en.closeButton===!1||z(en.closeButton)?mn.closeButton=en.closeButton:en.closeButton===!0&&(mn.closeButton=z(ft.closeButton)?ft.closeButton:!0);let bn={content:Kt,props:mn,staleId:un};ft.limit&&ft.limit>0&&ut>ft.limit&&Sn?ct.push(bn):L$2(dn)?setTimeout(()=>{zt(bn)},dn):zt(bn)},setProps(Kt){ft=Kt},setToggle:(Kt,en)=>{let tn=St.get(Kt);tn&&(tn.toggle=en)},isToastActive:Kt=>{var en;return(en=St.get(Kt))==null?void 0:en.isActive},getSnapshot:()=>dt}}var I$3=new Map,F$2=[],st=new Set,Vt=it=>st.forEach(g=>g(it)),bt=()=>I$3.size>0;function Qt(){F$2.forEach(it=>nt(it.content,it.options)),F$2=[]}var vt=(it,{containerId:g})=>{var et;return(et=I$3.get(g||1))==null?void 0:et.toasts.get(it)};function X$3(it,g){var et;if(g)return!!((et=I$3.get(g))!=null&&et.isToastActive(it));let ot=!1;return I$3.forEach(ut=>{ut.isToastActive(it)&&(ot=!0)}),ot}function ht(it){if(!bt()){F$2=F$2.filter(g=>it!=null&&g.options.toastId!==it);return}if(it==null||mt(it))I$3.forEach(g=>{g.removeToast(it)});else if(it&&("containerId"in it||"id"in it)){let g=I$3.get(it.containerId);g?g.removeToast(it.id):I$3.forEach(et=>{et.removeToast(it.id)})}}var Ct=(it={})=>{I$3.forEach(g=>{g.props.limit&&(!it.containerId||g.id===it.containerId)&&g.clearQueue()})};function nt(it,g){z(it)&&(bt()||F$2.push({content:it,options:g}),I$3.forEach(et=>{et.buildToast(it,g)}))}function xt(it){var g;(g=I$3.get(it.containerId||1))==null||g.setToggle(it.id,it.fn)}function rt(it,g){I$3.forEach(et=>{(g==null||!(g!=null&&g.containerId)||(g==null?void 0:g.containerId)===et.id)&&et.toggle(it,g==null?void 0:g.id)})}function Et(it){let g=it.containerId||1;return{subscribe(et){let ot=_t(g,it,Vt);I$3.set(g,ot);let ut=ot.observe(et);return Qt(),()=>{ut(),I$3.delete(g)}},setProps(et){var ot;(ot=I$3.get(g))==null||ot.setProps(et)},getSnapshot(){var et;return(et=I$3.get(g))==null?void 0:et.getSnapshot()}}}function Pt(it){return st.add(it),()=>{st.delete(it)}}function Wt(it){return it&&(N$1(it.toastId)||L$2(it.toastId))?it.toastId:at()}function U$3(it,g){return nt(it,g),g.toastId}function V$1(it,g){return{...g,type:g&&g.type||it,toastId:Wt(g)}}function Q(it){return(g,et)=>U$3(g,V$1(it,et))}function y$4(it,g){return U$3(it,V$1("default",g))}y$4.loading=(it,g)=>U$3(it,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...g}));function Gt(it,{pending:g,error:et,success:ot},ut){let ct;g&&(ct=N$1(g)?y$4.loading(g,ut):y$4.loading(g.render,{...ut,...g}));let dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(kt,Tt,Rt)=>{if(Tt==null){y$4.dismiss(ct);return}let jt={type:kt,...dt,...ut,data:Rt},Ft=N$1(Tt)?{render:Tt}:Tt;return ct?y$4.update(ct,{...jt,...Ft}):y$4(Ft.render,{...jt,...Ft}),Rt},St=P$2(it)?it():it;return St.then(kt=>ft("success",ot,kt)).catch(kt=>ft("error",et,kt)),St}y$4.promise=Gt;y$4.success=Q("success");y$4.info=Q("info");y$4.error=Q("error");y$4.warning=Q("warning");y$4.warn=y$4.warning;y$4.dark=(it,g)=>U$3(it,V$1("default",{theme:"dark",...g}));function qt(it){ht(it)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$3;y$4.update=(it,g={})=>{let et=vt(it,g);if(et){let{props:ot,content:ut}=et,ct={delay:100,...ot,...g,toastId:g.toastId||it,updateId:at()};ct.toastId!==it&&(ct.staleId=it);let dt=ct.render||ut;delete ct.render,U$3(dt,ct)}};y$4.done=it=>{y$4.update(it,{progress:1})};y$4.onChange=Pt;y$4.play=it=>rt(!0,it);y$4.pause=it=>rt(!1,it);function It(it){var g;let{subscribe:et,getSnapshot:ot,setProps:ut}=reactExports.useRef(Et(it)).current;ut(it);let ct=(g=reactExports.useSyncExternalStore(et,ot,ot))==null?void 0:g.slice();function dt(ft){if(!ct)return[];let St=new Map;return it.newestOnTop&&ct.reverse(),ct.forEach(kt=>{let{position:Tt}=kt.props;St.has(Tt)||St.set(Tt,[]),St.get(Tt).push(kt)}),Array.from(St,kt=>ft(kt[0],kt[1]))}return{getToastToRender:dt,isToastActive:X$3,count:ct==null?void 0:ct.length}}function At(it){let[g,et]=reactExports.useState(!1),[ot,ut]=reactExports.useState(!1),ct=reactExports.useRef(null),dt=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:ft,pauseOnHover:St,closeToast:kt,onClick:Tt,closeOnClick:Rt}=it;xt({id:it.toastId,containerId:it.containerId,fn:et}),reactExports.useEffect(()=>{if(it.pauseOnFocusLoss)return jt(),()=>{Ft()}},[it.pauseOnFocusLoss]);function jt(){document.hasFocus()||zt(),window.addEventListener("focus",Yt),window.addEventListener("blur",zt)}function Ft(){window.removeEventListener("focus",Yt),window.removeEventListener("blur",zt)}function Bt(un){if(it.draggable===!0||it.draggable===un.pointerType){Kt();let dn=ct.current;dt.canCloseOnClick=!0,dt.canDrag=!0,dn.style.transition="none",it.draggableDirection==="x"?(dt.start=un.clientX,dt.removalDistance=dn.offsetWidth*(it.draggablePercent/100)):(dt.start=un.clientY,dt.removalDistance=dn.offsetHeight*(it.draggablePercent===80?it.draggablePercent*1.5:it.draggablePercent)/100)}}function Ht(un){let{top:dn,bottom:Sn,left:mn,right:bn}=ct.current.getBoundingClientRect();un.nativeEvent.type!=="touchend"&&it.pauseOnHover&&un.clientX>=mn&&un.clientX<=bn&&un.clientY>=dn&&un.clientY<=Sn?zt():Yt()}function Yt(){et(!0)}function zt(){et(!1)}function Kt(){dt.didMove=!1,document.addEventListener("pointermove",tn),document.addEventListener("pointerup",on)}function en(){document.removeEventListener("pointermove",tn),document.removeEventListener("pointerup",on)}function tn(un){let dn=ct.current;if(dt.canDrag&&dn){dt.didMove=!0,g&&zt(),it.draggableDirection==="x"?dt.delta=un.clientX-dt.start:dt.delta=un.clientY-dt.start,dt.start!==un.clientX&&(dt.canCloseOnClick=!1);let Sn=it.draggableDirection==="x"?`${dt.delta}px, var(--y)`:`0, calc(${dt.delta}px + var(--y))`;dn.style.transform=`translate3d(${Sn},0)`,dn.style.opacity=`${1-Math.abs(dt.delta/dt.removalDistance)}`}}function on(){en();let un=ct.current;if(dt.canDrag&&dt.didMove&&un){if(dt.canDrag=!1,Math.abs(dt.delta)>dt.removalDistance){ut(!0),it.closeToast(!0),it.collapseAll();return}un.style.transition="transform 0.2s, opacity 0.2s",un.style.removeProperty("transform"),un.style.removeProperty("opacity")}}let an={onPointerDown:Bt,onPointerUp:Ht};return ft&&St&&(an.onMouseEnter=zt,it.stacked||(an.onMouseLeave=Yt)),Rt&&(an.onClick=un=>{Tt&&Tt(un),dt.canCloseOnClick&&kt(!0)}),{playToast:Yt,pauseToast:zt,isRunning:g,preventExitTransition:ot,toastRef:ct,eventHandlers:an}}var Ot=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:it,type:g,isLoading:et,...ot})=>React$3.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:it==="colored"?"currentColor":`var(--toastify-icon-color-${g})`,...ot});function ao(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$3.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=it=>it in W$1;function Nt({theme:it,type:g,isLoading:et,icon:ot}){let ut=null,ct={theme:it,type:g};return ot===!1||(P$2(ot)?ut=ot({...ct,isLoading:et}):reactExports.isValidElement(ot)?ut=reactExports.cloneElement(ot,ct):et?ut=W$1.spinner():lo(g)&&(ut=W$1[g](ct))),ut}var wt=it=>{let{isRunning:g,preventExitTransition:et,toastRef:ot,eventHandlers:ut,playToast:ct}=At(it),{closeButton:dt,children:ft,autoClose:St,onClick:kt,type:Tt,hideProgressBar:Rt,closeToast:jt,transition:Ft,position:Bt,className:Ht,style:Yt,progressClassName:zt,updateId:Kt,role:en,progress:tn,rtl:on,toastId:an,deleteToast:un,isIn:dn,isLoading:Sn,closeOnClick:mn,theme:bn,ariaLabel:En}=it,kn=clsx("Toastify__toast",`Toastify__toast-theme--${bn}`,`Toastify__toast--${Tt}`,{"Toastify__toast--rtl":on},{"Toastify__toast--close-on-click":mn}),Pn=P$2(Ht)?Ht({rtl:on,position:Bt,type:Tt,defaultClassName:kn}):clsx(kn,Ht),Ln=Nt(it),gn=!!tn||!St,Mn={closeToast:jt,type:Tt,theme:bn},yn=null;return dt===!1||(P$2(dt)?yn=dt(Mn):reactExports.isValidElement(dt)?yn=reactExports.cloneElement(dt,Mn):yn=yt$1(Mn)),React$3.createElement(Ft,{isIn:dn,done:un,position:Bt,preventExitTransition:et,nodeRef:ot,playToast:ct},React$3.createElement("div",{id:an,tabIndex:0,onClick:kt,"data-in":dn,className:Pn,...ut,style:Yt,ref:ot,...dn&&{role:en,"aria-label":En}},Ln!=null&&React$3.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Sn})},Ln),tt$1(ft,it,!g),yn,!it.customProgressBar&&React$3.createElement(gt,{...Kt&&!gn?{key:`p-${Kt}`}:{},rtl:on,theme:bn,delay:St,isRunning:g,isIn:dn,closeToast:jt,hide:Rt,type:Tt,className:zt,controlledProgress:gn,progress:tn||0})))},K$1=(it,g=!1)=>({enter:`Toastify--animate Toastify__${it}-enter`,exit:`Toastify--animate Toastify__${it}-exit`,appendPosition:g}),lt=$$2(K$1("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:it=>it.altKey&&it.code==="KeyT"};function Lt(it){let g={..._o,...it},et=it.stacked,[ot,ut]=reactExports.useState(!0),ct=reactExports.useRef(null),{getToastToRender:dt,isToastActive:ft,count:St}=It(g),{className:kt,style:Tt,rtl:Rt,containerId:jt,hotKeys:Ft}=g;function Bt(Yt){let zt=clsx("Toastify__toast-container",`Toastify__toast-container--${Yt}`,{"Toastify__toast-container--rtl":Rt});return P$2(kt)?kt({position:Yt,rtl:Rt,defaultClassName:zt}):clsx(zt,B(kt))}function Ht(){et&&(ut(!0),y$4.play())}return Ot(()=>{var Yt;if(et){let zt=ct.current.querySelectorAll('[data-in="true"]'),Kt=12,en=(Yt=g.position)==null?void 0:Yt.includes("top"),tn=0,on=0;Array.from(zt).reverse().forEach((an,un)=>{let dn=an;dn.classList.add("Toastify__toast--stacked"),un>0&&(dn.dataset.collapsed=`${ot}`),dn.dataset.pos||(dn.dataset.pos=en?"top":"bot");let Sn=tn*(ot?.2:1)+(ot?0:Kt*un);dn.style.setProperty("--y",`${en?Sn:Sn*-1}px`),dn.style.setProperty("--g",`${Kt}`),dn.style.setProperty("--s",`${1-(ot?on:0)}`),tn+=dn.offsetHeight,on+=.025})}},[ot,St,et]),reactExports.useEffect(()=>{function Yt(zt){var Kt;let en=ct.current;Ft(zt)&&((Kt=en.querySelector('[tabIndex="0"]'))==null||Kt.focus(),ut(!1),y$4.pause()),zt.key==="Escape"&&(document.activeElement===en||en!=null&&en.contains(document.activeElement))&&(ut(!0),y$4.play())}return document.addEventListener("keydown",Yt),()=>{document.removeEventListener("keydown",Yt)}},[Ft]),React$3.createElement("section",{ref:ct,className:"Toastify",id:jt,onMouseEnter:()=>{et&&(ut(!1),y$4.pause())},onMouseLeave:Ht,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":g["aria-label"]},dt((Yt,zt)=>{let Kt=zt.length?{...Tt}:{...Tt,pointerEvents:"none"};return React$3.createElement("div",{tabIndex:-1,className:Bt(Yt),"data-stacked":et,style:Kt,key:`c-${Yt}`},zt.map(({content:en,props:tn})=>React$3.createElement(wt,{...tn,stacked:et,collapseAll:Ht,isIn:ft(tn.toastId,tn.containerId),key:`t-${tn.key}`},en)))}))}const BASE_URL="https://cre8tlystudio.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});console.log("Base URL:",axiosInstance.defaults.baseURL);let isRefreshing=!1,refreshSubscribers=[];function onRefreshed(it){refreshSubscribers.forEach(g=>g(it)),refreshSubscribers=[]}axiosInstance.interceptors.request.use(it=>{const g=localStorage.getItem("accessToken");return g&&(it.headers.Authorization=`Bearer ${g}`),it});async function refreshToken(){if(isRefreshing)return new Promise(it=>{refreshSubscribers.push(it)});isRefreshing=!0;try{const it=localStorage.getItem("refreshToken");if(!it)throw new Error("No refresh token found");const g=await axios$1.post(`${BASE_URL}/auth/refresh`,{token:it}),{accessToken:et,refreshToken:ot}=g.data;return localStorage.setItem("accessToken",et),ot&&localStorage.setItem("refreshToken",ot),axiosInstance.defaults.headers.Authorization=`Bearer ${et}`,onRefreshed(et),et}catch(it){throw console.error("Token refresh failed:",it),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),it}finally{isRefreshing=!1}}axiosInstance.interceptors.response.use(it=>it,async it=>{var et;const g=it.config;if(((et=it.response)==null?void 0:et.status)===401&&!g._retry){g._retry=!0;try{const ot=await refreshToken();return ot?(g.headers.Authorization=`Bearer ${ot}`,axiosInstance(g)):new Promise(ut=>{refreshSubscribers.push(ct=>{g.headers.Authorization=`Bearer ${ct}`,ut(axiosInstance(g))})})}catch(ot){return console.error("Refresh retry failed:",ot),Promise.reject(ot)}}return Promise.reject(it)});axiosInstance.interceptors.response.use(it=>it,it=>{var g;return((g=it.response)==null?void 0:g.status)===403&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(it)});const AuthContext=reactExports.createContext();function AuthProvider({children:it,navigate:g}){const[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0);function St(Ft,Bt,Ht){ot(Ft),ct(Bt),localStorage.setItem("user",JSON.stringify(Ft)),localStorage.setItem("accessToken",Bt),Ht&&localStorage.setItem("refreshToken",Ht)}async function kt(Ft,Bt){try{const Yt=(await axiosInstance.post("/auth/login",{email:Ft,password:Bt})).data;St(Yt.user,Yt.accessToken,Yt.refreshToken);try{const zt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Yt.accessToken}`}});ot(zt.data),localStorage.setItem("user",JSON.stringify(zt.data))}catch(zt){console.error("Failed to fetch fresh user data after login:",zt)}}catch(Ht){throw Ht}}async function Tt(){var Bt,Ht;const Ft=localStorage.getItem("refreshToken");if(!Ft)return null;try{const zt=(await axiosInstance.post("/auth/refresh",{token:Ft})).data;return ct(zt.accessToken),localStorage.setItem("accessToken",zt.accessToken),zt.refreshToken&&localStorage.setItem("refreshToken",zt.refreshToken),zt.accessToken}catch(Yt){return console.error("Refresh failed:",Yt),(((Bt=Yt.response)==null?void 0:Bt.status)===401||((Ht=Yt.response)==null?void 0:Ht.status)===403)&&Rt(),null}}function Rt(){try{axiosInstance.post("/auth/logout")}catch{}ot(null),ct(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),g("/")}reactExports.useEffect(()=>{const Ft=setTimeout(()=>Tt(),1500);return()=>clearTimeout(Ft)},[]),reactExports.useEffect(()=>{async function Ft(){try{const Bt=localStorage.getItem("user"),Ht=localStorage.getItem("accessToken"),Yt=localStorage.getItem("refreshToken");if(Bt&&ot(JSON.parse(Bt)),Ht&&ct(Ht),!Ht&&Yt){const zt=await Tt();if(zt){const Kt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${zt}`}});ot(Kt.data),localStorage.setItem("user",JSON.stringify(Kt.data))}}}catch(Bt){console.error("Failed to restore user:",Bt)}finally{ft(!1)}}Ft()},[]);async function jt(){try{const Ft=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${ut}`}});return ot(Ft.data),localStorage.setItem("user",JSON.stringify(Ft.data)),Ft.data}catch(Ft){return console.error("Failed to refresh user data:",Ft),y$4.error("Failed to refresh user data"),null}}return reactExports.useEffect(()=>{const Ft=setInterval(()=>{Tt()},72e4);return()=>clearInterval(Ft)},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:et,setUser:ot,accessToken:ut,authLoading:dt,login:kt,logout:Rt,refreshAccessToken:Tt,refreshUser:jt},children:it})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:it}){const g=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:g,children:it})}const MagnetContext=reactExports.createContext();function MagnetProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState({magnets:[],summary:{}}),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const Tt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Rt=Array.isArray(Tt)?{magnets:Tt,summary:{}}:Tt;ot(Rt)}catch(kt){console.error("Error fetching lead magnets:",kt),ft(kt)}finally{ct(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Rt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,jt=Array.isArray(Rt)?{magnets:Rt,summary:{}}:Rt;ot(Ft=>JSON.stringify(Ft)===JSON.stringify(jt)?Ft:jt)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(MagnetContext.Provider,{value:{magnets:et,setMagnets:ot,fetchMagnets:St,loading:ut,error:dt},children:it})}function useMagnets(){return reactExports.useContext(MagnetContext)}function LoadingOverlay(){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-purple-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-white font-semibold",children:"Restoring your session..."})]})})}function PrivateRoute({children:it,role:g}){const{user:et,authLoading:ot}=useAuth();return ot?jsxRuntimeExports.jsx(LoadingOverlay,{}):et?g&&!(Array.isArray(g)?g:[g]).includes(et.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):it:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(it,g){module.exports=g()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(g){_useWebWorker=!!g},getWebWorker=function(){return _useWebWorker},setLocationHref=function(g){locationHref=g},getLocationHref=function(){return locationHref};function createTag(it){return document.createElement(it)}function extendPrototype(it,g){var et,ot=it.length,ut;for(et=0;et<ot;et+=1){ut=it[et].prototype;for(var ct in ut)Object.prototype.hasOwnProperty.call(ut,ct)&&(g.prototype[ct]=ut[ct])}}function getDescriptor(it,g){return Object.getOwnPropertyDescriptor(it,g)}function createProxyFunction(it){function g(){}return g.prototype=it,g}var audioControllerFactory=function(){function it(g){this.audios=[],this.audioFactory=g,this._volume=1,this._isMuted=!1}return it.prototype={addAudio:function(et){this.audios.push(et)},pause:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].pause()},resume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].resume()},setRate:function(et){var ot,ut=this.audios.length;for(ot=0;ot<ut;ot+=1)this.audios[ot].setRate(et)},createAudio:function(et){return this.audioFactory?this.audioFactory(et):window.Howl?new window.Howl({src:[et]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(et){this.audioFactory=et},setVolume:function(et){this._volume=et,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].volume(this._volume*(this._isMuted?0:1))}},function(){return new it}}(),createTypedArray=function(){function it(et,ot){var ut=0,ct=[],dt;switch(et){case"int16":case"uint8c":dt=1;break;default:dt=1.1;break}for(ut=0;ut<ot;ut+=1)ct.push(dt);return ct}function g(et,ot){return et==="float32"?new Float32Array(ot):et==="int16"?new Int16Array(ot):et==="uint8c"?new Uint8ClampedArray(ot):it(et,ot)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?g:it}();function createSizedArray(it){return Array.apply(null,{length:it})}function _typeof$6(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(et){return typeof et}:_typeof$6=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(it)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var it=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],g,et=it.length;for(g=0;g<et;g+=1)BMMath[it[g]]=Math[it[g]]})(),BMMath.random=Math.random,BMMath.abs=function(it){var g=_typeof$6(it);if(g==="object"&&it.length){var et=createSizedArray(it.length),ot,ut=it.length;for(ot=0;ot<ut;ot+=1)et[ot]=Math.abs(it[ot]);return et}return Math.abs(it)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(it){it.style.position="absolute",it.style.top=0,it.style.left=0,it.style.display="block",it.style.transformOrigin="0 0",it.style.webkitTransformOrigin="0 0",it.style.backfaceVisibility="visible",it.style.webkitBackfaceVisibility="visible",it.style.transformStyle="preserve-3d",it.style.webkitTransformStyle="preserve-3d",it.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(it,g,et,ot){this.type=it,this.currentTime=g,this.totalTime=et,this.direction=ot<0?-1:1}function BMCompleteEvent(it,g){this.type=it,this.direction=g<0?-1:1}function BMCompleteLoopEvent(it,g,et,ot){this.type=it,this.currentLoop=et,this.totalLoops=g,this.direction=ot<0?-1:1}function BMSegmentStartEvent(it,g,et){this.type=it,this.firstFrame=g,this.totalFrames=et}function BMDestroyEvent(it,g){this.type=it,this.target=g}function BMRenderFrameErrorEvent(it,g){this.type="renderFrameError",this.nativeError=it,this.currentTime=g}function BMConfigErrorEvent(it){this.type="configError",this.nativeError=it}var createElementID=function(){var it=0;return function(){return it+=1,idPrefix$1+"__lottie_element_"+it}}();function HSVtoRGB(it,g,et){var ot,ut,ct,dt,ft,St,kt,Tt;switch(dt=Math.floor(it*6),ft=it*6-dt,St=et*(1-g),kt=et*(1-ft*g),Tt=et*(1-(1-ft)*g),dt%6){case 0:ot=et,ut=Tt,ct=St;break;case 1:ot=kt,ut=et,ct=St;break;case 2:ot=St,ut=et,ct=Tt;break;case 3:ot=St,ut=kt,ct=et;break;case 4:ot=Tt,ut=St,ct=et;break;case 5:ot=et,ut=St,ct=kt;break}return[ot,ut,ct]}function RGBtoHSV(it,g,et){var ot=Math.max(it,g,et),ut=Math.min(it,g,et),ct=ot-ut,dt,ft=ot===0?0:ct/ot,St=ot/255;switch(ot){case ut:dt=0;break;case it:dt=g-et+ct*(g<et?6:0),dt/=6*ct;break;case g:dt=et-it+ct*2,dt/=6*ct;break;case et:dt=it-g+ct*4,dt/=6*ct;break}return[dt,ft,St]}function addSaturationToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[1]+=g,et[1]>1?et[1]=1:et[1]<=0&&(et[1]=0),HSVtoRGB(et[0],et[1],et[2])}function addBrightnessToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[2]+=g,et[2]>1?et[2]=1:et[2]<0&&(et[2]=0),HSVtoRGB(et[0],et[1],et[2])}function addHueToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[0]+=g/360,et[0]>1?et[0]-=1:et[0]<0&&(et[0]+=1),HSVtoRGB(et[0],et[1],et[2])}var rgbToHex=function(){var it=[],g,et;for(g=0;g<256;g+=1)et=g.toString(16),it[g]=et.length===1?"0"+et:et;return function(ot,ut,ct){return ot<0&&(ot=0),ut<0&&(ut=0),ct<0&&(ct=0),"#"+it[ot]+it[ut]+it[ct]}}(),setSubframeEnabled=function(g){subframeEnabled=!!g},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(g){expressionsPlugin=g},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(g){expressionsInterfaces=g},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(g){defaultCurveSegments=g},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(g){idPrefix$1=g};function createNS(it){return document.createElementNS(svgNS,it)}function _typeof$5(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(et){return typeof et}:_typeof$5=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(it)}var dataManager=function(){var it=1,g=[],et,ot,ut={onmessage:function(){},postMessage:function(Ft){et({data:Ft})}},ct={postMessage:function(Ft){ut.onmessage({data:Ft})}};function dt(jt){if(window.Worker&&window.Blob&&getWebWorker()){var Ft=new Blob(["var _workerSelf = self; self.onmessage = ",jt.toString()],{type:"text/javascript"}),Bt=URL.createObjectURL(Ft);return new Worker(Bt)}return et=jt,ut}function ft(){ot||(ot=dt(function(Ft){function Bt(){function Yt(Ln,gn){var Mn,yn,vn=Ln.length,On,Cn,Vn,Qn;for(yn=0;yn<vn;yn+=1)if(Mn=Ln[yn],"ks"in Mn&&!Mn.completed){if(Mn.completed=!0,Mn.hasMask){var ir=Mn.masksProperties;for(Cn=ir.length,On=0;On<Cn;On+=1)if(ir[On].pt.k.i)on(ir[On].pt.k);else for(Qn=ir[On].pt.k.length,Vn=0;Vn<Qn;Vn+=1)ir[On].pt.k[Vn].s&&on(ir[On].pt.k[Vn].s[0]),ir[On].pt.k[Vn].e&&on(ir[On].pt.k[Vn].e[0])}Mn.ty===0?(Mn.layers=en(Mn.refId,gn),Yt(Mn.layers,gn)):Mn.ty===4?tn(Mn.shapes):Mn.ty===5&&kn(Mn)}}function zt(Ln,gn){if(Ln){var Mn=0,yn=Ln.length;for(Mn=0;Mn<yn;Mn+=1)Ln[Mn].t===1&&(Ln[Mn].data.layers=en(Ln[Mn].data.refId,gn),Yt(Ln[Mn].data.layers,gn))}}function Kt(Ln,gn){for(var Mn=0,yn=gn.length;Mn<yn;){if(gn[Mn].id===Ln)return gn[Mn];Mn+=1}return null}function en(Ln,gn){var Mn=Kt(Ln,gn);return Mn?Mn.layers.__used?JSON.parse(JSON.stringify(Mn.layers)):(Mn.layers.__used=!0,Mn.layers):null}function tn(Ln){var gn,Mn=Ln.length,yn,vn;for(gn=Mn-1;gn>=0;gn-=1)if(Ln[gn].ty==="sh")if(Ln[gn].ks.k.i)on(Ln[gn].ks.k);else for(vn=Ln[gn].ks.k.length,yn=0;yn<vn;yn+=1)Ln[gn].ks.k[yn].s&&on(Ln[gn].ks.k[yn].s[0]),Ln[gn].ks.k[yn].e&&on(Ln[gn].ks.k[yn].e[0]);else Ln[gn].ty==="gr"&&tn(Ln[gn].it)}function on(Ln){var gn,Mn=Ln.i.length;for(gn=0;gn<Mn;gn+=1)Ln.i[gn][0]+=Ln.v[gn][0],Ln.i[gn][1]+=Ln.v[gn][1],Ln.o[gn][0]+=Ln.v[gn][0],Ln.o[gn][1]+=Ln.v[gn][1]}function an(Ln,gn){var Mn=gn?gn.split("."):[100,100,100];return Ln[0]>Mn[0]?!0:Mn[0]>Ln[0]?!1:Ln[1]>Mn[1]?!0:Mn[1]>Ln[1]?!1:Ln[2]>Mn[2]?!0:Mn[2]>Ln[2]?!1:null}var un=function(){var Ln=[4,4,14];function gn(yn){var vn=yn.t.d;yn.t.d={k:[{s:vn,t:0}]}}function Mn(yn){var vn,On=yn.length;for(vn=0;vn<On;vn+=1)yn[vn].ty===5&&gn(yn[vn])}return function(yn){if(an(Ln,yn.v)&&(Mn(yn.layers),yn.assets)){var vn,On=yn.assets.length;for(vn=0;vn<On;vn+=1)yn.assets[vn].layers&&Mn(yn.assets[vn].layers)}}}(),dn=function(){var Ln=[4,7,99];return function(gn){if(gn.chars&&!an(Ln,gn.v)){var Mn,yn=gn.chars.length;for(Mn=0;Mn<yn;Mn+=1){var vn=gn.chars[Mn];vn.data&&vn.data.shapes&&(tn(vn.data.shapes),vn.data.ip=0,vn.data.op=99999,vn.data.st=0,vn.data.sr=1,vn.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},gn.chars[Mn].t||(vn.data.shapes.push({ty:"no"}),vn.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Sn=function(){var Ln=[5,7,15];function gn(yn){var vn=yn.t.p;typeof vn.a=="number"&&(vn.a={a:0,k:vn.a}),typeof vn.p=="number"&&(vn.p={a:0,k:vn.p}),typeof vn.r=="number"&&(vn.r={a:0,k:vn.r})}function Mn(yn){var vn,On=yn.length;for(vn=0;vn<On;vn+=1)yn[vn].ty===5&&gn(yn[vn])}return function(yn){if(an(Ln,yn.v)&&(Mn(yn.layers),yn.assets)){var vn,On=yn.assets.length;for(vn=0;vn<On;vn+=1)yn.assets[vn].layers&&Mn(yn.assets[vn].layers)}}}(),mn=function(){var Ln=[4,1,9];function gn(yn){var vn,On=yn.length,Cn,Vn;for(vn=0;vn<On;vn+=1)if(yn[vn].ty==="gr")gn(yn[vn].it);else if(yn[vn].ty==="fl"||yn[vn].ty==="st")if(yn[vn].c.k&&yn[vn].c.k[0].i)for(Vn=yn[vn].c.k.length,Cn=0;Cn<Vn;Cn+=1)yn[vn].c.k[Cn].s&&(yn[vn].c.k[Cn].s[0]/=255,yn[vn].c.k[Cn].s[1]/=255,yn[vn].c.k[Cn].s[2]/=255,yn[vn].c.k[Cn].s[3]/=255),yn[vn].c.k[Cn].e&&(yn[vn].c.k[Cn].e[0]/=255,yn[vn].c.k[Cn].e[1]/=255,yn[vn].c.k[Cn].e[2]/=255,yn[vn].c.k[Cn].e[3]/=255);else yn[vn].c.k[0]/=255,yn[vn].c.k[1]/=255,yn[vn].c.k[2]/=255,yn[vn].c.k[3]/=255}function Mn(yn){var vn,On=yn.length;for(vn=0;vn<On;vn+=1)yn[vn].ty===4&&gn(yn[vn].shapes)}return function(yn){if(an(Ln,yn.v)&&(Mn(yn.layers),yn.assets)){var vn,On=yn.assets.length;for(vn=0;vn<On;vn+=1)yn.assets[vn].layers&&Mn(yn.assets[vn].layers)}}}(),bn=function(){var Ln=[4,4,18];function gn(yn){var vn,On=yn.length,Cn,Vn;for(vn=On-1;vn>=0;vn-=1)if(yn[vn].ty==="sh")if(yn[vn].ks.k.i)yn[vn].ks.k.c=yn[vn].closed;else for(Vn=yn[vn].ks.k.length,Cn=0;Cn<Vn;Cn+=1)yn[vn].ks.k[Cn].s&&(yn[vn].ks.k[Cn].s[0].c=yn[vn].closed),yn[vn].ks.k[Cn].e&&(yn[vn].ks.k[Cn].e[0].c=yn[vn].closed);else yn[vn].ty==="gr"&&gn(yn[vn].it)}function Mn(yn){var vn,On,Cn=yn.length,Vn,Qn,ir,ar;for(On=0;On<Cn;On+=1){if(vn=yn[On],vn.hasMask){var rr=vn.masksProperties;for(Qn=rr.length,Vn=0;Vn<Qn;Vn+=1)if(rr[Vn].pt.k.i)rr[Vn].pt.k.c=rr[Vn].cl;else for(ar=rr[Vn].pt.k.length,ir=0;ir<ar;ir+=1)rr[Vn].pt.k[ir].s&&(rr[Vn].pt.k[ir].s[0].c=rr[Vn].cl),rr[Vn].pt.k[ir].e&&(rr[Vn].pt.k[ir].e[0].c=rr[Vn].cl)}vn.ty===4&&gn(vn.shapes)}}return function(yn){if(an(Ln,yn.v)&&(Mn(yn.layers),yn.assets)){var vn,On=yn.assets.length;for(vn=0;vn<On;vn+=1)yn.assets[vn].layers&&Mn(yn.assets[vn].layers)}}}();function En(Ln){Ln.__complete||(mn(Ln),un(Ln),dn(Ln),Sn(Ln),bn(Ln),Yt(Ln.layers,Ln.assets),zt(Ln.chars,Ln.assets),Ln.__complete=!0)}function kn(Ln){Ln.t.a.length===0&&"m"in Ln.t.p}var Pn={};return Pn.completeData=En,Pn.checkColors=mn,Pn.checkChars=dn,Pn.checkPathProperties=Sn,Pn.checkShapes=bn,Pn.completeLayers=Yt,Pn}if(ct.dataManager||(ct.dataManager=Bt()),ct.assetLoader||(ct.assetLoader=function(){function Yt(Kt){var en=Kt.getResponseHeader("content-type");return en&&Kt.responseType==="json"&&en.indexOf("json")!==-1||Kt.response&&_typeof$5(Kt.response)==="object"?Kt.response:Kt.response&&typeof Kt.response=="string"?JSON.parse(Kt.response):Kt.responseText?JSON.parse(Kt.responseText):null}function zt(Kt,en,tn,on){var an,un=new XMLHttpRequest;try{un.responseType="json"}catch{}un.onreadystatechange=function(){if(un.readyState===4)if(un.status===200)an=Yt(un),tn(an);else try{an=Yt(un),tn(an)}catch(dn){on&&on(dn)}};try{un.open(["G","E","T"].join(""),Kt,!0)}catch{un.open(["G","E","T"].join(""),en+"/"+Kt,!0)}un.send()}return{load:zt}}()),Ft.data.type==="loadAnimation")ct.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Yt){ct.dataManager.completeData(Yt),ct.postMessage({id:Ft.data.id,payload:Yt,status:"success"})},function(){ct.postMessage({id:Ft.data.id,status:"error"})});else if(Ft.data.type==="complete"){var Ht=Ft.data.animation;ct.dataManager.completeData(Ht),ct.postMessage({id:Ft.data.id,payload:Ht,status:"success"})}else Ft.data.type==="loadData"&&ct.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Yt){ct.postMessage({id:Ft.data.id,payload:Yt,status:"success"})},function(){ct.postMessage({id:Ft.data.id,status:"error"})})}),ot.onmessage=function(jt){var Ft=jt.data,Bt=Ft.id,Ht=g[Bt];g[Bt]=null,Ft.status==="success"?Ht.onComplete(Ft.payload):Ht.onError&&Ht.onError()})}function St(jt,Ft){it+=1;var Bt="processId_"+it;return g[Bt]={onComplete:jt,onError:Ft},Bt}function kt(jt,Ft,Bt){ft();var Ht=St(Ft,Bt);ot.postMessage({type:"loadAnimation",path:jt,fullPath:window.location.origin+window.location.pathname,id:Ht})}function Tt(jt,Ft,Bt){ft();var Ht=St(Ft,Bt);ot.postMessage({type:"loadData",path:jt,fullPath:window.location.origin+window.location.pathname,id:Ht})}function Rt(jt,Ft,Bt){ft();var Ht=St(Ft,Bt);ot.postMessage({type:"complete",animation:jt,id:Ht})}return{loadAnimation:kt,loadData:Tt,completeAnimation:Rt}}(),ImagePreloader=function(){var it=function(){var zt=createTag("canvas");zt.width=1,zt.height=1;var Kt=zt.getContext("2d");return Kt.fillStyle="rgba(0,0,0,0)",Kt.fillRect(0,0,1,1),zt}();function g(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function et(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ot(zt,Kt,en){var tn="";if(zt.e)tn=zt.p;else if(Kt){var on=zt.p;on.indexOf("images/")!==-1&&(on=on.split("/")[1]),tn=Kt+on}else tn=en,tn+=zt.u?zt.u:"",tn+=zt.p;return tn}function ut(zt){var Kt=0,en=setInterval((function(){var tn=zt.getBBox();(tn.width||Kt>500)&&(this._imageLoaded(),clearInterval(en)),Kt+=1}).bind(this),50)}function ct(zt){var Kt=ot(zt,this.assetsPath,this.path),en=createNS("image");isSafari?this.testImageLoaded(en):en.addEventListener("load",this._imageLoaded,!1),en.addEventListener("error",(function(){tn.img=it,this._imageLoaded()}).bind(this),!1),en.setAttributeNS("http://www.w3.org/1999/xlink","href",Kt),this._elementHelper.append?this._elementHelper.append(en):this._elementHelper.appendChild(en);var tn={img:en,assetData:zt};return tn}function dt(zt){var Kt=ot(zt,this.assetsPath,this.path),en=createTag("img");en.crossOrigin="anonymous",en.addEventListener("load",this._imageLoaded,!1),en.addEventListener("error",(function(){tn.img=it,this._imageLoaded()}).bind(this),!1),en.src=Kt;var tn={img:en,assetData:zt};return tn}function ft(zt){var Kt={assetData:zt},en=ot(zt,this.assetsPath,this.path);return dataManager.loadData(en,(function(tn){Kt.img=tn,this._footageLoaded()}).bind(this),(function(){Kt.img={},this._footageLoaded()}).bind(this)),Kt}function St(zt,Kt){this.imagesLoadedCb=Kt;var en,tn=zt.length;for(en=0;en<tn;en+=1)zt[en].layers||(!zt[en].t||zt[en].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(zt[en]))):zt[en].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(zt[en]))))}function kt(zt){this.path=zt||""}function Tt(zt){this.assetsPath=zt||""}function Rt(zt){for(var Kt=0,en=this.images.length;Kt<en;){if(this.images[Kt].assetData===zt)return this.images[Kt].img;Kt+=1}return null}function jt(){this.imagesLoadedCb=null,this.images.length=0}function Ft(){return this.totalImages===this.loadedAssets}function Bt(){return this.totalFootages===this.loadedFootagesCount}function Ht(zt,Kt){zt==="svg"?(this._elementHelper=Kt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Yt(){this._imageLoaded=g.bind(this),this._footageLoaded=et.bind(this),this.testImageLoaded=ut.bind(this),this.createFootageData=ft.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Yt.prototype={loadAssets:St,setAssetsPath:Tt,setPath:kt,loadedImages:Ft,loadedFootages:Bt,destroy:jt,getAsset:Rt,createImgData:dt,createImageData:ct,imageLoaded:g,footageLoaded:et,setCacheType:Ht},Yt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(g,et){if(this._cbs[g])for(var ot=this._cbs[g],ut=0;ut<ot.length;ut+=1)ot[ut](et)},addEventListener:function(g,et){return this._cbs[g]||(this._cbs[g]=[]),this._cbs[g].push(et),(function(){this.removeEventListener(g,et)}).bind(this)},removeEventListener:function(g,et){if(!et)this._cbs[g]=null;else if(this._cbs[g]){for(var ot=0,ut=this._cbs[g].length;ot<ut;)this._cbs[g][ot]===et&&(this._cbs[g].splice(ot,1),ot-=1,ut-=1),ot+=1;this._cbs[g].length||(this._cbs[g]=null)}}};var markerParser=function(){function it(g){for(var et=g.split(`\r
`),ot={},ut,ct=0,dt=0;dt<et.length;dt+=1)ut=et[dt].split(":"),ut.length===2&&(ot[ut[0]]=ut[1].trim(),ct+=1);if(ct===0)throw new Error;return ot}return function(g){for(var et=[],ot=0;ot<g.length;ot+=1){var ut=g[ot],ct={time:ut.tm,duration:ut.dr};try{ct.payload=JSON.parse(g[ot].cm)}catch{try{ct.payload=it(g[ot].cm)}catch{ct.payload={name:g[ot].cm}}}et.push(ct)}return et}}(),ProjectInterface=function(){function it(g){this.compositions.push(g)}return function(){function g(et){for(var ot=0,ut=this.compositions.length;ot<ut;){if(this.compositions[ot].data&&this.compositions[ot].data.nm===et)return this.compositions[ot].prepareFrame&&this.compositions[ot].data.xt&&this.compositions[ot].prepareFrame(this.currentFrame),this.compositions[ot].compInterface;ot+=1}return null}return g.compositions=[],g.currentFrame=0,g.registerComposition=it,g}}(),renderers={},registerRenderer=function(g,et){renderers[g]=et};function getRenderer(it){return renderers[it]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var it in renderers)if(renderers[it])return it;return""}function _typeof$4(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(et){return typeof et}:_typeof$4=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(it)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(it){(it.wrapper||it.container)&&(this.wrapper=it.wrapper||it.container);var g="svg";it.animType?g=it.animType:it.renderer&&(g=it.renderer);var et=getRenderer(g);this.renderer=new et(this,it.rendererSettings),this.imagePreloader.setCacheType(g,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=g,it.loop===""||it.loop===null||it.loop===void 0||it.loop===!0?this.loop=!0:it.loop===!1?this.loop=!1:this.loop=parseInt(it.loop,10),this.autoplay="autoplay"in it?it.autoplay:!0,this.name=it.name?it.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(it,"autoloadSegments")?it.autoloadSegments:!0,this.assetsPath=it.assetsPath,this.initialSegment=it.initialSegment,it.audioFactory&&this.audioController.setAudioFactory(it.audioFactory),it.animationData?this.setupAnimation(it.animationData):it.path&&(it.path.lastIndexOf("\\")!==-1?this.path=it.path.substr(0,it.path.lastIndexOf("\\")+1):this.path=it.path.substr(0,it.path.lastIndexOf("/")+1),this.fileName=it.path.substr(it.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(it.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(it){dataManager.completeAnimation(it,this.configAnimation)},AnimationItem.prototype.setData=function(it,g){g&&_typeof$4(g)!=="object"&&(g=JSON.parse(g));var et={wrapper:it,animationData:g},ot=it.attributes;et.path=ot.getNamedItem("data-animation-path")?ot.getNamedItem("data-animation-path").value:ot.getNamedItem("data-bm-path")?ot.getNamedItem("data-bm-path").value:ot.getNamedItem("bm-path")?ot.getNamedItem("bm-path").value:"",et.animType=ot.getNamedItem("data-anim-type")?ot.getNamedItem("data-anim-type").value:ot.getNamedItem("data-bm-type")?ot.getNamedItem("data-bm-type").value:ot.getNamedItem("bm-type")?ot.getNamedItem("bm-type").value:ot.getNamedItem("data-bm-renderer")?ot.getNamedItem("data-bm-renderer").value:ot.getNamedItem("bm-renderer")?ot.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ut=ot.getNamedItem("data-anim-loop")?ot.getNamedItem("data-anim-loop").value:ot.getNamedItem("data-bm-loop")?ot.getNamedItem("data-bm-loop").value:ot.getNamedItem("bm-loop")?ot.getNamedItem("bm-loop").value:"";ut==="false"?et.loop=!1:ut==="true"?et.loop=!0:ut!==""&&(et.loop=parseInt(ut,10));var ct=ot.getNamedItem("data-anim-autoplay")?ot.getNamedItem("data-anim-autoplay").value:ot.getNamedItem("data-bm-autoplay")?ot.getNamedItem("data-bm-autoplay").value:ot.getNamedItem("bm-autoplay")?ot.getNamedItem("bm-autoplay").value:!0;et.autoplay=ct!=="false",et.name=ot.getNamedItem("data-name")?ot.getNamedItem("data-name").value:ot.getNamedItem("data-bm-name")?ot.getNamedItem("data-bm-name").value:ot.getNamedItem("bm-name")?ot.getNamedItem("bm-name").value:"";var dt=ot.getNamedItem("data-anim-prerender")?ot.getNamedItem("data-anim-prerender").value:ot.getNamedItem("data-bm-prerender")?ot.getNamedItem("data-bm-prerender").value:ot.getNamedItem("bm-prerender")?ot.getNamedItem("bm-prerender").value:"";dt==="false"&&(et.prerender=!1),et.path?this.setParams(et):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(it){it.op>this.animationData.op&&(this.animationData.op=it.op,this.totalFrames=Math.floor(it.op-this.animationData.ip));var g=this.animationData.layers,et,ot=g.length,ut=it.layers,ct,dt=ut.length;for(ct=0;ct<dt;ct+=1)for(et=0;et<ot;){if(g[et].id===ut[ct].id){g[et]=ut[ct];break}et+=1}if((it.chars||it.fonts)&&(this.renderer.globalData.fontManager.addChars(it.chars),this.renderer.globalData.fontManager.addFonts(it.fonts,this.renderer.globalData.defs)),it.assets)for(ot=it.assets.length,et=0;et<ot;et+=1)this.animationData.assets.push(it.assets[et]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(it){this.animationData=it;var g=getExpressionsPlugin();g&&g.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var it=this.animationData.segments;if(!it||it.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var g=it.shift();this.timeCompleted=g.time*this.frameRate;var et=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(et,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var it=this.animationData.segments;it||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(it){if(this.renderer)try{this.animationData=it,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(it),it.assets||(it.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(it.assets),this.markers=markerParser(it.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(g){this.triggerConfigError(g)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var it=getExpressionsPlugin();it&&it.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(it,g){var et=typeof it=="number"?it:void 0,ot=typeof g=="number"?g:void 0;this.renderer.updateContainerSize(et,ot)},AnimationItem.prototype.setSubframe=function(it){this.isSubframeEnabled=!!it},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(it){this.triggerRenderFrameError(it)}},AnimationItem.prototype.play=function(it){it&&this.name!==it||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(it){it&&this.name!==it||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(it){it&&this.name!==it||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(it){it&&this.name!==it||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(it){for(var g,et=0;et<this.markers.length;et+=1)if(g=this.markers[et],g.payload&&g.payload.name===it)return g;return null},AnimationItem.prototype.goToAndStop=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ut=this.getMarkerData(it);ut&&this.goToAndStop(ut.time,!0)}else g?this.setCurrentRawFrameValue(it):this.setCurrentRawFrameValue(it*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ut=this.getMarkerData(it);ut&&(ut.duration?this.playSegments([ut.time,ut.time+ut.duration],!0):this.goToAndStop(ut.time,!0))}else this.goToAndStop(ot,g,et);this.play()}},AnimationItem.prototype.advanceTime=function(it){if(!(this.isPaused===!0||this.isLoaded===!1)){var g=this.currentRawFrame+it*this.frameModifier,et=!1;g>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(g>this.totalFrames?g%this.totalFrames:0)||(et=!0,g=this.totalFrames-1):g>=this.totalFrames?(this.playCount+=1,this.checkSegments(g%this.totalFrames)||(this.setCurrentRawFrameValue(g%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(g):g<0?this.checkSegments(g%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+g%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(et=!0,g=0)):this.setCurrentRawFrameValue(g),et&&(this.setCurrentRawFrameValue(g),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(it,g){this.playCount=0,it[1]<it[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=it[0]-it[1],this.timeCompleted=this.totalFrames,this.firstFrame=it[1],this.setCurrentRawFrameValue(this.totalFrames-.001-g)):it[1]>it[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=it[1]-it[0],this.timeCompleted=this.totalFrames,this.firstFrame=it[0],this.setCurrentRawFrameValue(.001+g)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(it,g){var et=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<it?et=it:this.currentRawFrame+this.firstFrame>g&&(et=g-it)),this.firstFrame=it,this.totalFrames=g-it,this.timeCompleted=this.totalFrames,et!==-1&&this.goToAndStop(et,!0)},AnimationItem.prototype.playSegments=function(it,g){if(g&&(this.segments.length=0),_typeof$4(it[0])==="object"){var et,ot=it.length;for(et=0;et<ot;et+=1)this.segments.push(it[et])}else this.segments.push(it);this.segments.length&&g&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(it){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),it&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(it){return this.segments.length?(this.adjustSegment(this.segments.shift(),it),!0):!1},AnimationItem.prototype.destroy=function(it){it&&this.name!==it||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(it){this.currentRawFrame=it,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(it){this.playSpeed=it,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(it){this.playDirection=it<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(it){this.loop=it},AnimationItem.prototype.setVolume=function(it,g){g&&this.name!==g||this.audioController.setVolume(it)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(it){it&&this.name!==it||this.audioController.mute()},AnimationItem.prototype.unmute=function(it){it&&this.name!==it||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(it){var g="";if(it.e)g=it.p;else if(this.assetsPath){var et=it.p;et.indexOf("images/")!==-1&&(et=et.split("/")[1]),g=this.assetsPath+et}else g=this.path,g+=it.u?it.u:"",g+=it.p;return g},AnimationItem.prototype.getAssetData=function(it){for(var g=0,et=this.assets.length;g<et;){if(it===this.assets[g].id)return this.assets[g];g+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(it){return it?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(it,g,et){try{var ot=this.renderer.getElementByPath(it);ot.updateDocumentData(g,et)}catch{}},AnimationItem.prototype.trigger=function(it){if(this._cbs&&this._cbs[it])switch(it){case"enterFrame":this.triggerEvent(it,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(it,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(it,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(it,new BMCompleteEvent(it,this.frameMult));break;case"segmentStart":this.triggerEvent(it,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(it,new BMDestroyEvent(it,this));break;default:this.triggerEvent(it)}it==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameMult)),it==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult)),it==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(it,this.frameMult)),it==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames)),it==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(it,this))},AnimationItem.prototype.triggerRenderFrameError=function(it){var g=new BMRenderFrameErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)},AnimationItem.prototype.triggerConfigError=function(it){var g=new BMConfigErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)};var animationManager=function(){var it={},g=[],et=0,ot=0,ut=0,ct=!0,dt=!1;function ft(gn){for(var Mn=0,yn=gn.target;Mn<ot;)g[Mn].animation===yn&&(g.splice(Mn,1),Mn-=1,ot-=1,yn.isPaused||Rt()),Mn+=1}function St(gn,Mn){if(!gn)return null;for(var yn=0;yn<ot;){if(g[yn].elem===gn&&g[yn].elem!==null)return g[yn].animation;yn+=1}var vn=new AnimationItem;return jt(vn,gn),vn.setData(gn,Mn),vn}function kt(){var gn,Mn=g.length,yn=[];for(gn=0;gn<Mn;gn+=1)yn.push(g[gn].animation);return yn}function Tt(){ut+=1,mn()}function Rt(){ut-=1}function jt(gn,Mn){gn.addEventListener("destroy",ft),gn.addEventListener("_active",Tt),gn.addEventListener("_idle",Rt),g.push({elem:Mn,animation:gn}),ot+=1}function Ft(gn){var Mn=new AnimationItem;return jt(Mn,null),Mn.setParams(gn),Mn}function Bt(gn,Mn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.setSpeed(gn,Mn)}function Ht(gn,Mn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.setDirection(gn,Mn)}function Yt(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.play(gn)}function zt(gn){var Mn=gn-et,yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.advanceTime(Mn);et=gn,ut&&!dt?window.requestAnimationFrame(zt):ct=!0}function Kt(gn){et=gn,window.requestAnimationFrame(zt)}function en(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.pause(gn)}function tn(gn,Mn,yn){var vn;for(vn=0;vn<ot;vn+=1)g[vn].animation.goToAndStop(gn,Mn,yn)}function on(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.stop(gn)}function an(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.togglePause(gn)}function un(gn){var Mn;for(Mn=ot-1;Mn>=0;Mn-=1)g[Mn].animation.destroy(gn)}function dn(gn,Mn,yn){var vn=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),On,Cn=vn.length;for(On=0;On<Cn;On+=1)yn&&vn[On].setAttribute("data-bm-type",yn),St(vn[On],gn);if(Mn&&Cn===0){yn||(yn="svg");var Vn=document.getElementsByTagName("body")[0];Vn.innerText="";var Qn=createTag("div");Qn.style.width="100%",Qn.style.height="100%",Qn.setAttribute("data-bm-type",yn),Vn.appendChild(Qn),St(Qn,gn)}}function Sn(){var gn;for(gn=0;gn<ot;gn+=1)g[gn].animation.resize()}function mn(){!dt&&ut&&ct&&(window.requestAnimationFrame(Kt),ct=!1)}function bn(){dt=!0}function En(){dt=!1,mn()}function kn(gn,Mn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.setVolume(gn,Mn)}function Pn(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.mute(gn)}function Ln(gn){var Mn;for(Mn=0;Mn<ot;Mn+=1)g[Mn].animation.unmute(gn)}return it.registerAnimation=St,it.loadAnimation=Ft,it.setSpeed=Bt,it.setDirection=Ht,it.play=Yt,it.pause=en,it.stop=on,it.togglePause=an,it.searchAnimations=dn,it.resize=Sn,it.goToAndStop=tn,it.destroy=un,it.freeze=bn,it.unfreeze=En,it.setVolume=kn,it.mute=Pn,it.unmute=Ln,it.getRegisteredAnimations=kt,it}(),BezierFactory=function(){var it={};it.getBezierEasing=et;var g={};function et(Kt,en,tn,on,an){var un=an||("bez_"+Kt+"_"+en+"_"+tn+"_"+on).replace(/\./g,"p");if(g[un])return g[un];var dn=new zt([Kt,en,tn,on]);return g[un]=dn,dn}var ot=4,ut=.001,ct=1e-7,dt=10,ft=11,St=1/(ft-1),kt=typeof Float32Array=="function";function Tt(Kt,en){return 1-3*en+3*Kt}function Rt(Kt,en){return 3*en-6*Kt}function jt(Kt){return 3*Kt}function Ft(Kt,en,tn){return((Tt(en,tn)*Kt+Rt(en,tn))*Kt+jt(en))*Kt}function Bt(Kt,en,tn){return 3*Tt(en,tn)*Kt*Kt+2*Rt(en,tn)*Kt+jt(en)}function Ht(Kt,en,tn,on,an){var un,dn,Sn=0;do dn=en+(tn-en)/2,un=Ft(dn,on,an)-Kt,un>0?tn=dn:en=dn;while(Math.abs(un)>ct&&++Sn<dt);return dn}function Yt(Kt,en,tn,on){for(var an=0;an<ot;++an){var un=Bt(en,tn,on);if(un===0)return en;var dn=Ft(en,tn,on)-Kt;en-=dn/un}return en}function zt(Kt){this._p=Kt,this._mSampleValues=kt?new Float32Array(ft):new Array(ft),this._precomputed=!1,this.get=this.get.bind(this)}return zt.prototype={get:function(en){var tn=this._p[0],on=this._p[1],an=this._p[2],un=this._p[3];return this._precomputed||this._precompute(),tn===on&&an===un?en:en===0?0:en===1?1:Ft(this._getTForX(en),on,un)},_precompute:function(){var en=this._p[0],tn=this._p[1],on=this._p[2],an=this._p[3];this._precomputed=!0,(en!==tn||on!==an)&&this._calcSampleValues()},_calcSampleValues:function(){for(var en=this._p[0],tn=this._p[2],on=0;on<ft;++on)this._mSampleValues[on]=Ft(on*St,en,tn)},_getTForX:function(en){for(var tn=this._p[0],on=this._p[2],an=this._mSampleValues,un=0,dn=1,Sn=ft-1;dn!==Sn&&an[dn]<=en;++dn)un+=St;--dn;var mn=(en-an[dn])/(an[dn+1]-an[dn]),bn=un+mn*St,En=Bt(bn,tn,on);return En>=ut?Yt(en,bn,tn,on):En===0?bn:Ht(en,un,un+St,tn,on)}},it}(),pooling=function(){function it(g){return g.concat(createSizedArray(g.length))}return{double:it}}(),poolFactory=function(){return function(it,g,et){var ot=0,ut=it,ct=createSizedArray(ut),dt={newElement:ft,release:St};function ft(){var kt;return ot?(ot-=1,kt=ct[ot]):kt=g(),kt}function St(kt){ot===ut&&(ct=pooling.double(ct),ut*=2),et&&et(kt),ct[ot]=kt,ot+=1}return dt}}(),bezierLengthPool=function(){function it(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,it)}(),segmentsLengthPool=function(){function it(){return{lengths:[],totalLength:0}}function g(et){var ot,ut=et.lengths.length;for(ot=0;ot<ut;ot+=1)bezierLengthPool.release(et.lengths[ot]);et.lengths.length=0}return poolFactory(8,it,g)}();function bezFunction(){var it=Math;function g(jt,Ft,Bt,Ht,Yt,zt){var Kt=jt*Ht+Ft*Yt+Bt*zt-Yt*Ht-zt*jt-Bt*Ft;return Kt>-.001&&Kt<.001}function et(jt,Ft,Bt,Ht,Yt,zt,Kt,en,tn){if(Bt===0&&zt===0&&tn===0)return g(jt,Ft,Ht,Yt,Kt,en);var on=it.sqrt(it.pow(Ht-jt,2)+it.pow(Yt-Ft,2)+it.pow(zt-Bt,2)),an=it.sqrt(it.pow(Kt-jt,2)+it.pow(en-Ft,2)+it.pow(tn-Bt,2)),un=it.sqrt(it.pow(Kt-Ht,2)+it.pow(en-Yt,2)+it.pow(tn-zt,2)),dn;return on>an?on>un?dn=on-an-un:dn=un-an-on:un>an?dn=un-an-on:dn=an-on-un,dn>-1e-4&&dn<1e-4}var ot=function(){return function(jt,Ft,Bt,Ht){var Yt=getDefaultCurveSegments(),zt,Kt,en,tn,on,an=0,un,dn=[],Sn=[],mn=bezierLengthPool.newElement();for(en=Bt.length,zt=0;zt<Yt;zt+=1){for(on=zt/(Yt-1),un=0,Kt=0;Kt<en;Kt+=1)tn=bmPow(1-on,3)*jt[Kt]+3*bmPow(1-on,2)*on*Bt[Kt]+3*(1-on)*bmPow(on,2)*Ht[Kt]+bmPow(on,3)*Ft[Kt],dn[Kt]=tn,Sn[Kt]!==null&&(un+=bmPow(dn[Kt]-Sn[Kt],2)),Sn[Kt]=dn[Kt];un&&(un=bmSqrt(un),an+=un),mn.percents[zt]=on,mn.lengths[zt]=an}return mn.addedLength=an,mn}}();function ut(jt){var Ft=segmentsLengthPool.newElement(),Bt=jt.c,Ht=jt.v,Yt=jt.o,zt=jt.i,Kt,en=jt._length,tn=Ft.lengths,on=0;for(Kt=0;Kt<en-1;Kt+=1)tn[Kt]=ot(Ht[Kt],Ht[Kt+1],Yt[Kt],zt[Kt+1]),on+=tn[Kt].addedLength;return Bt&&en&&(tn[Kt]=ot(Ht[Kt],Ht[0],Yt[Kt],zt[0]),on+=tn[Kt].addedLength),Ft.totalLength=on,Ft}function ct(jt){this.segmentLength=0,this.points=new Array(jt)}function dt(jt,Ft){this.partialLength=jt,this.point=Ft}var ft=function(){var jt={};return function(Ft,Bt,Ht,Yt){var zt=(Ft[0]+"_"+Ft[1]+"_"+Bt[0]+"_"+Bt[1]+"_"+Ht[0]+"_"+Ht[1]+"_"+Yt[0]+"_"+Yt[1]).replace(/\./g,"p");if(!jt[zt]){var Kt=getDefaultCurveSegments(),en,tn,on,an,un,dn=0,Sn,mn,bn=null;Ft.length===2&&(Ft[0]!==Bt[0]||Ft[1]!==Bt[1])&&g(Ft[0],Ft[1],Bt[0],Bt[1],Ft[0]+Ht[0],Ft[1]+Ht[1])&&g(Ft[0],Ft[1],Bt[0],Bt[1],Bt[0]+Yt[0],Bt[1]+Yt[1])&&(Kt=2);var En=new ct(Kt);for(on=Ht.length,en=0;en<Kt;en+=1){for(mn=createSizedArray(on),un=en/(Kt-1),Sn=0,tn=0;tn<on;tn+=1)an=bmPow(1-un,3)*Ft[tn]+3*bmPow(1-un,2)*un*(Ft[tn]+Ht[tn])+3*(1-un)*bmPow(un,2)*(Bt[tn]+Yt[tn])+bmPow(un,3)*Bt[tn],mn[tn]=an,bn!==null&&(Sn+=bmPow(mn[tn]-bn[tn],2));Sn=bmSqrt(Sn),dn+=Sn,En.points[en]=new dt(Sn,mn),bn=mn}En.segmentLength=dn,jt[zt]=En}return jt[zt]}}();function St(jt,Ft){var Bt=Ft.percents,Ht=Ft.lengths,Yt=Bt.length,zt=bmFloor((Yt-1)*jt),Kt=jt*Ft.addedLength,en=0;if(zt===Yt-1||zt===0||Kt===Ht[zt])return Bt[zt];for(var tn=Ht[zt]>Kt?-1:1,on=!0;on;)if(Ht[zt]<=Kt&&Ht[zt+1]>Kt?(en=(Kt-Ht[zt])/(Ht[zt+1]-Ht[zt]),on=!1):zt+=tn,zt<0||zt>=Yt-1){if(zt===Yt-1)return Bt[zt];on=!1}return Bt[zt]+(Bt[zt+1]-Bt[zt])*en}function kt(jt,Ft,Bt,Ht,Yt,zt){var Kt=St(Yt,zt),en=1-Kt,tn=it.round((en*en*en*jt[0]+(Kt*en*en+en*Kt*en+en*en*Kt)*Bt[0]+(Kt*Kt*en+en*Kt*Kt+Kt*en*Kt)*Ht[0]+Kt*Kt*Kt*Ft[0])*1e3)/1e3,on=it.round((en*en*en*jt[1]+(Kt*en*en+en*Kt*en+en*en*Kt)*Bt[1]+(Kt*Kt*en+en*Kt*Kt+Kt*en*Kt)*Ht[1]+Kt*Kt*Kt*Ft[1])*1e3)/1e3;return[tn,on]}var Tt=createTypedArray("float32",8);function Rt(jt,Ft,Bt,Ht,Yt,zt,Kt){Yt<0?Yt=0:Yt>1&&(Yt=1);var en=St(Yt,Kt);zt=zt>1?1:zt;var tn=St(zt,Kt),on,an=jt.length,un=1-en,dn=1-tn,Sn=un*un*un,mn=en*un*un*3,bn=en*en*un*3,En=en*en*en,kn=un*un*dn,Pn=en*un*dn+un*en*dn+un*un*tn,Ln=en*en*dn+un*en*tn+en*un*tn,gn=en*en*tn,Mn=un*dn*dn,yn=en*dn*dn+un*tn*dn+un*dn*tn,vn=en*tn*dn+un*tn*tn+en*dn*tn,On=en*tn*tn,Cn=dn*dn*dn,Vn=tn*dn*dn+dn*tn*dn+dn*dn*tn,Qn=tn*tn*dn+dn*tn*tn+tn*dn*tn,ir=tn*tn*tn;for(on=0;on<an;on+=1)Tt[on*4]=it.round((Sn*jt[on]+mn*Bt[on]+bn*Ht[on]+En*Ft[on])*1e3)/1e3,Tt[on*4+1]=it.round((kn*jt[on]+Pn*Bt[on]+Ln*Ht[on]+gn*Ft[on])*1e3)/1e3,Tt[on*4+2]=it.round((Mn*jt[on]+yn*Bt[on]+vn*Ht[on]+On*Ft[on])*1e3)/1e3,Tt[on*4+3]=it.round((Cn*jt[on]+Vn*Bt[on]+Qn*Ht[on]+ir*Ft[on])*1e3)/1e3;return Tt}return{getSegmentsLength:ut,getNewSegment:Rt,getPointInSegment:kt,buildBezierData:ft,pointOnLine2D:g,pointOnLine3D:et}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(it,g){var et=this.offsetTime,ot;this.propType==="multidimensional"&&(ot=createTypedArray("float32",this.pv.length));for(var ut=g.lastIndex,ct=ut,dt=this.keyframes.length-1,ft=!0,St,kt,Tt;ft;){if(St=this.keyframes[ct],kt=this.keyframes[ct+1],ct===dt-1&&it>=kt.t-et){St.h&&(St=kt),ut=0;break}if(kt.t-et>it){ut=ct;break}ct<dt-1?ct+=1:(ut=0,ft=!1)}Tt=this.keyframesMetadata[ct]||{};var Rt,jt,Ft,Bt,Ht,Yt,zt=kt.t-et,Kt=St.t-et,en;if(St.to){Tt.bezierData||(Tt.bezierData=bez.buildBezierData(St.s,kt.s||St.e,St.to,St.ti));var tn=Tt.bezierData;if(it>=zt||it<Kt){var on=it>=zt?tn.points.length-1:0;for(jt=tn.points[on].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=tn.points[on].point[Rt]}else{Tt.__fnct?Yt=Tt.__fnct:(Yt=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y,St.n).get,Tt.__fnct=Yt),Ft=Yt((it-Kt)/(zt-Kt));var an=tn.segmentLength*Ft,un,dn=g.lastFrame<it&&g._lastKeyframeIndex===ct?g._lastAddedLength:0;for(Ht=g.lastFrame<it&&g._lastKeyframeIndex===ct?g._lastPoint:0,ft=!0,Bt=tn.points.length;ft;){if(dn+=tn.points[Ht].partialLength,an===0||Ft===0||Ht===tn.points.length-1){for(jt=tn.points[Ht].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=tn.points[Ht].point[Rt];break}else if(an>=dn&&an<dn+tn.points[Ht+1].partialLength){for(un=(an-dn)/tn.points[Ht+1].partialLength,jt=tn.points[Ht].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=tn.points[Ht].point[Rt]+(tn.points[Ht+1].point[Rt]-tn.points[Ht].point[Rt])*un;break}Ht<Bt-1?Ht+=1:ft=!1}g._lastPoint=Ht,g._lastAddedLength=dn-tn.points[Ht].partialLength,g._lastKeyframeIndex=ct}}else{var Sn,mn,bn,En,kn;if(dt=St.s.length,en=kt.s||St.e,this.sh&&St.h!==1)if(it>=zt)ot[0]=en[0],ot[1]=en[1],ot[2]=en[2];else if(it<=Kt)ot[0]=St.s[0],ot[1]=St.s[1],ot[2]=St.s[2];else{var Pn=createQuaternion(St.s),Ln=createQuaternion(en),gn=(it-Kt)/(zt-Kt);quaternionToEuler(ot,slerp(Pn,Ln,gn))}else for(ct=0;ct<dt;ct+=1)St.h!==1&&(it>=zt?Ft=1:it<Kt?Ft=0:(St.o.x.constructor===Array?(Tt.__fnct||(Tt.__fnct=[]),Tt.__fnct[ct]?Yt=Tt.__fnct[ct]:(Sn=St.o.x[ct]===void 0?St.o.x[0]:St.o.x[ct],mn=St.o.y[ct]===void 0?St.o.y[0]:St.o.y[ct],bn=St.i.x[ct]===void 0?St.i.x[0]:St.i.x[ct],En=St.i.y[ct]===void 0?St.i.y[0]:St.i.y[ct],Yt=BezierFactory.getBezierEasing(Sn,mn,bn,En).get,Tt.__fnct[ct]=Yt)):Tt.__fnct?Yt=Tt.__fnct:(Sn=St.o.x,mn=St.o.y,bn=St.i.x,En=St.i.y,Yt=BezierFactory.getBezierEasing(Sn,mn,bn,En).get,St.keyframeMetadata=Yt),Ft=Yt((it-Kt)/(zt-Kt)))),en=kt.s||St.e,kn=St.h===1?St.s[ct]:St.s[ct]+(en[ct]-St.s[ct])*Ft,this.propType==="multidimensional"?ot[ct]=kn:ot=kn}return g.lastIndex=ut,ot}function slerp(it,g,et){var ot=[],ut=it[0],ct=it[1],dt=it[2],ft=it[3],St=g[0],kt=g[1],Tt=g[2],Rt=g[3],jt,Ft,Bt,Ht,Yt;return Ft=ut*St+ct*kt+dt*Tt+ft*Rt,Ft<0&&(Ft=-Ft,St=-St,kt=-kt,Tt=-Tt,Rt=-Rt),1-Ft>1e-6?(jt=Math.acos(Ft),Bt=Math.sin(jt),Ht=Math.sin((1-et)*jt)/Bt,Yt=Math.sin(et*jt)/Bt):(Ht=1-et,Yt=et),ot[0]=Ht*ut+Yt*St,ot[1]=Ht*ct+Yt*kt,ot[2]=Ht*dt+Yt*Tt,ot[3]=Ht*ft+Yt*Rt,ot}function quaternionToEuler(it,g){var et=g[0],ot=g[1],ut=g[2],ct=g[3],dt=Math.atan2(2*ot*ct-2*et*ut,1-2*ot*ot-2*ut*ut),ft=Math.asin(2*et*ot+2*ut*ct),St=Math.atan2(2*et*ct-2*ot*ut,1-2*et*et-2*ut*ut);it[0]=dt/degToRads,it[1]=ft/degToRads,it[2]=St/degToRads}function createQuaternion(it){var g=it[0]*degToRads,et=it[1]*degToRads,ot=it[2]*degToRads,ut=Math.cos(g/2),ct=Math.cos(et/2),dt=Math.cos(ot/2),ft=Math.sin(g/2),St=Math.sin(et/2),kt=Math.sin(ot/2),Tt=ut*ct*dt-ft*St*kt,Rt=ft*St*dt+ut*ct*kt,jt=ft*ct*dt+ut*St*kt,Ft=ut*St*dt-ft*ct*kt;return[Rt,jt,Ft,Tt]}function getValueAtCurrentTime(){var it=this.comp.renderedFrame-this.offsetTime,g=this.keyframes[0].t-this.offsetTime,et=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(it===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=et&&it>=et||this._caching.lastFrame<g&&it<g))){this._caching.lastFrame>=it&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ot=this.interpolateValue(it,this._caching);this.pv=ot}return this._caching.lastFrame=it,this.pv}function setVValue(it){var g;if(this.propType==="unidimensional")g=it*this.mult,mathAbs(this.v-g)>1e-5&&(this.v=g,this._mdf=!0);else for(var et=0,ot=this.v.length;et<ot;)g=it[et]*this.mult,mathAbs(this.v[et]-g)>1e-5&&(this.v[et]=g,this._mdf=!0),et+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var it,g=this.effectsSequence.length,et=this.kf?this.pv:this.data.k;for(it=0;it<g;it+=1)et=this.effectsSequence[it](et);this.setVValue(et),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(it){this.effectsSequence.push(it),this.container.addDynamicProperty(this)}function ValueProperty(it,g,et,ot){this.propType="unidimensional",this.mult=et||1,this.data=g,this.v=et?g.k*et:g.k,this.pv=g.k,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(it,g,et,ot){this.propType="multidimensional",this.mult=et||1,this.data=g,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ut,ct=g.k.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),this.vel=createTypedArray("float32",ct),ut=0;ut<ct;ut+=1)this.v[ut]=g.k[ut]*this.mult,this.pv[ut]=g.k[ut];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(it,g,et,ot){this.propType="unidimensional",this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=g,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(it,g,et,ot){this.propType="multidimensional";var ut,ct=g.k.length,dt,ft,St,kt;for(ut=0;ut<ct-1;ut+=1)g.k[ut].to&&g.k[ut].s&&g.k[ut+1]&&g.k[ut+1].s&&(dt=g.k[ut].s,ft=g.k[ut+1].s,St=g.k[ut].to,kt=g.k[ut].ti,(dt.length===2&&!(dt[0]===ft[0]&&dt[1]===ft[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],dt[0]+St[0],dt[1]+St[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],ft[0]+kt[0],ft[1]+kt[1])||dt.length===3&&!(dt[0]===ft[0]&&dt[1]===ft[1]&&dt[2]===ft[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],dt[0]+St[0],dt[1]+St[1],dt[2]+St[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],ft[0]+kt[0],ft[1]+kt[1],ft[2]+kt[2]))&&(g.k[ut].to=null,g.k[ut].ti=null),dt[0]===ft[0]&&dt[1]===ft[1]&&St[0]===0&&St[1]===0&&kt[0]===0&&kt[1]===0&&(dt.length===2||dt[2]===ft[2]&&St[2]===0&&kt[2]===0)&&(g.k[ut].to=null,g.k[ut].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=g,this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Tt=g.k[0].s.length;for(this.v=createTypedArray("float32",Tt),this.pv=createTypedArray("float32",Tt),ut=0;ut<Tt;ut+=1)this.v[ut]=initFrame,this.pv[ut]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Tt)},this.addEffect=addEffect}var PropertyFactory=function(){function it(et,ot,ut,ct,dt){ot.sid&&(ot=et.globalData.slotManager.getProp(ot));var ft;if(!ot.k.length)ft=new ValueProperty(et,ot,ct,dt);else if(typeof ot.k[0]=="number")ft=new MultiDimensionalProperty(et,ot,ct,dt);else switch(ut){case 0:ft=new KeyframedValueProperty(et,ot,ct,dt);break;case 1:ft=new KeyframedMultidimensionalProperty(et,ot,ct,dt);break}return ft.effectsSequence.length&&dt.addDynamicProperty(ft),ft}var g={getProp:it};return g}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&(this.dynamicProperties.push(g),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var g,et=this.dynamicProperties.length;for(g=0;g<et;g+=1)this.dynamicProperties[g].getValue(),this.dynamicProperties[g]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(g){this.container=g,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function it(){return createTypedArray("float32",2)}return poolFactory(8,it)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(it,g){this.c=it,this.setLength(g);for(var et=0;et<g;)this.v[et]=pointPool.newElement(),this.o[et]=pointPool.newElement(),this.i[et]=pointPool.newElement(),et+=1},ShapePath.prototype.setLength=function(it){for(;this._maxLength<it;)this.doubleArrayLength();this._length=it},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(it,g,et,ot,ut){var ct;switch(this._length=Math.max(this._length,ot+1),this._length>=this._maxLength&&this.doubleArrayLength(),et){case"v":ct=this.v;break;case"i":ct=this.i;break;case"o":ct=this.o;break;default:ct=[];break}(!ct[ot]||ct[ot]&&!ut)&&(ct[ot]=pointPool.newElement()),ct[ot][0]=it,ct[ot][1]=g},ShapePath.prototype.setTripleAt=function(it,g,et,ot,ut,ct,dt,ft){this.setXYAt(it,g,"v",dt,ft),this.setXYAt(et,ot,"o",dt,ft),this.setXYAt(ut,ct,"i",dt,ft)},ShapePath.prototype.reverse=function(){var it=new ShapePath;it.setPathData(this.c,this._length);var g=this.v,et=this.o,ot=this.i,ut=0;this.c&&(it.setTripleAt(g[0][0],g[0][1],ot[0][0],ot[0][1],et[0][0],et[0][1],0,!1),ut=1);var ct=this._length-1,dt=this._length,ft;for(ft=ut;ft<dt;ft+=1)it.setTripleAt(g[ct][0],g[ct][1],ot[ct][0],ot[ct][1],et[ct][0],et[ct][1],ft,!1),ct-=1;return it},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function it(){return new ShapePath}function g(ut){var ct=ut._length,dt;for(dt=0;dt<ct;dt+=1)pointPool.release(ut.v[dt]),pointPool.release(ut.i[dt]),pointPool.release(ut.o[dt]),ut.v[dt]=null,ut.i[dt]=null,ut.o[dt]=null;ut._length=0,ut.c=!1}function et(ut){var ct=ot.newElement(),dt,ft=ut._length===void 0?ut.v.length:ut._length;for(ct.setLength(ft),ct.c=ut.c,dt=0;dt<ft;dt+=1)ct.setTripleAt(ut.v[dt][0],ut.v[dt][1],ut.o[dt][0],ut.o[dt][1],ut.i[dt][0],ut.i[dt][1],dt);return ct}var ot=poolFactory(4,it,g);return ot.clone=et,ot}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(it){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=it,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var it;for(it=0;it<this._length;it+=1)shapePool.release(this.shapes[it]);this._length=0};var shapeCollectionPool=function(){var it={newShapeCollection:ut,release:ct},g=0,et=4,ot=createSizedArray(et);function ut(){var dt;return g?(g-=1,dt=ot[g]):dt=new ShapeCollection,dt}function ct(dt){var ft,St=dt._length;for(ft=0;ft<St;ft+=1)shapePool.release(dt.shapes[ft]);dt._length=0,g===et&&(ot=pooling.double(ot),et*=2),ot[g]=dt,g+=1}return it}(),ShapePropertyFactory=function(){var it=-999999;function g(zt,Kt,en){var tn=en.lastIndex,on,an,un,dn,Sn,mn,bn,En,kn,Pn=this.keyframes;if(zt<Pn[0].t-this.offsetTime)on=Pn[0].s[0],un=!0,tn=0;else if(zt>=Pn[Pn.length-1].t-this.offsetTime)on=Pn[Pn.length-1].s?Pn[Pn.length-1].s[0]:Pn[Pn.length-2].e[0],un=!0;else{for(var Ln=tn,gn=Pn.length-1,Mn=!0,yn,vn,On;Mn&&(yn=Pn[Ln],vn=Pn[Ln+1],!(vn.t-this.offsetTime>zt));)Ln<gn-1?Ln+=1:Mn=!1;if(On=this.keyframesMetadata[Ln]||{},un=yn.h===1,tn=Ln,!un){if(zt>=vn.t-this.offsetTime)En=1;else if(zt<yn.t-this.offsetTime)En=0;else{var Cn;On.__fnct?Cn=On.__fnct:(Cn=BezierFactory.getBezierEasing(yn.o.x,yn.o.y,yn.i.x,yn.i.y).get,On.__fnct=Cn),En=Cn((zt-(yn.t-this.offsetTime))/(vn.t-this.offsetTime-(yn.t-this.offsetTime)))}an=vn.s?vn.s[0]:yn.e[0]}on=yn.s[0]}for(mn=Kt._length,bn=on.i[0].length,en.lastIndex=tn,dn=0;dn<mn;dn+=1)for(Sn=0;Sn<bn;Sn+=1)kn=un?on.i[dn][Sn]:on.i[dn][Sn]+(an.i[dn][Sn]-on.i[dn][Sn])*En,Kt.i[dn][Sn]=kn,kn=un?on.o[dn][Sn]:on.o[dn][Sn]+(an.o[dn][Sn]-on.o[dn][Sn])*En,Kt.o[dn][Sn]=kn,kn=un?on.v[dn][Sn]:on.v[dn][Sn]+(an.v[dn][Sn]-on.v[dn][Sn])*En,Kt.v[dn][Sn]=kn}function et(){var zt=this.comp.renderedFrame-this.offsetTime,Kt=this.keyframes[0].t-this.offsetTime,en=this.keyframes[this.keyframes.length-1].t-this.offsetTime,tn=this._caching.lastFrame;return tn!==it&&(tn<Kt&&zt<Kt||tn>en&&zt>en)||(this._caching.lastIndex=tn<zt?this._caching.lastIndex:0,this.interpolateShape(zt,this.pv,this._caching)),this._caching.lastFrame=zt,this.pv}function ot(){this.paths=this.localShapeCollection}function ut(zt,Kt){if(zt._length!==Kt._length||zt.c!==Kt.c)return!1;var en,tn=zt._length;for(en=0;en<tn;en+=1)if(zt.v[en][0]!==Kt.v[en][0]||zt.v[en][1]!==Kt.v[en][1]||zt.o[en][0]!==Kt.o[en][0]||zt.o[en][1]!==Kt.o[en][1]||zt.i[en][0]!==Kt.i[en][0]||zt.i[en][1]!==Kt.i[en][1])return!1;return!0}function ct(zt){ut(this.v,zt)||(this.v=shapePool.clone(zt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function dt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var zt;this.kf?zt=this.pv:this.data.ks?zt=this.data.ks.k:zt=this.data.pt.k;var Kt,en=this.effectsSequence.length;for(Kt=0;Kt<en;Kt+=1)zt=this.effectsSequence[Kt](zt);this.setVValue(zt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ft(zt,Kt,en){this.propType="shape",this.comp=zt.comp,this.container=zt,this.elem=zt,this.data=Kt,this.k=!1,this.kf=!1,this._mdf=!1;var tn=en===3?Kt.pt.k:Kt.ks.k;this.v=shapePool.clone(tn),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ot,this.effectsSequence=[]}function St(zt){this.effectsSequence.push(zt),this.container.addDynamicProperty(this)}ft.prototype.interpolateShape=g,ft.prototype.getValue=dt,ft.prototype.setVValue=ct,ft.prototype.addEffect=St;function kt(zt,Kt,en){this.propType="shape",this.comp=zt.comp,this.elem=zt,this.container=zt,this.offsetTime=zt.data.st,this.keyframes=en===3?Kt.pt.k:Kt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var tn=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,tn),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=it,this.reset=ot,this._caching={lastFrame:it,lastIndex:0},this.effectsSequence=[et.bind(this)]}kt.prototype.getValue=dt,kt.prototype.interpolateShape=g,kt.prototype.setVValue=ct,kt.prototype.addEffect=St;var Tt=function(){var zt=roundCorner;function Kt(en,tn){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=tn.d,this.elem=en,this.comp=en.comp,this.frameId=-1,this.initDynamicPropertyContainer(en),this.p=PropertyFactory.getProp(en,tn.p,1,0,this),this.s=PropertyFactory.getProp(en,tn.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Kt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var tn=this.p.v[0],on=this.p.v[1],an=this.s.v[0]/2,un=this.s.v[1]/2,dn=this.d!==3,Sn=this.v;Sn.v[0][0]=tn,Sn.v[0][1]=on-un,Sn.v[1][0]=dn?tn+an:tn-an,Sn.v[1][1]=on,Sn.v[2][0]=tn,Sn.v[2][1]=on+un,Sn.v[3][0]=dn?tn-an:tn+an,Sn.v[3][1]=on,Sn.i[0][0]=dn?tn-an*zt:tn+an*zt,Sn.i[0][1]=on-un,Sn.i[1][0]=dn?tn+an:tn-an,Sn.i[1][1]=on-un*zt,Sn.i[2][0]=dn?tn+an*zt:tn-an*zt,Sn.i[2][1]=on+un,Sn.i[3][0]=dn?tn-an:tn+an,Sn.i[3][1]=on+un*zt,Sn.o[0][0]=dn?tn+an*zt:tn-an*zt,Sn.o[0][1]=on-un,Sn.o[1][0]=dn?tn+an:tn-an,Sn.o[1][1]=on+un*zt,Sn.o[2][0]=dn?tn-an*zt:tn+an*zt,Sn.o[2][1]=on+un,Sn.o[3][0]=dn?tn-an:tn+an,Sn.o[3][1]=on-un*zt}},extendPrototype([DynamicPropertyContainer],Kt),Kt}(),Rt=function(){function zt(Kt,en){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Kt,this.comp=Kt.comp,this.data=en,this.frameId=-1,this.d=en.d,this.initDynamicPropertyContainer(Kt),en.sy===1?(this.ir=PropertyFactory.getProp(Kt,en.ir,0,0,this),this.is=PropertyFactory.getProp(Kt,en.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Kt,en.pt,0,0,this),this.p=PropertyFactory.getProp(Kt,en.p,1,0,this),this.r=PropertyFactory.getProp(Kt,en.r,0,degToRads,this),this.or=PropertyFactory.getProp(Kt,en.or,0,0,this),this.os=PropertyFactory.getProp(Kt,en.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return zt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var en=Math.floor(this.pt.v)*2,tn=Math.PI*2/en,on=!0,an=this.or.v,un=this.ir.v,dn=this.os.v,Sn=this.is.v,mn=2*Math.PI*an/(en*2),bn=2*Math.PI*un/(en*2),En,kn,Pn,Ln,gn=-Math.PI/2;gn+=this.r.v;var Mn=this.data.d===3?-1:1;for(this.v._length=0,En=0;En<en;En+=1){kn=on?an:un,Pn=on?dn:Sn,Ln=on?mn:bn;var yn=kn*Math.cos(gn),vn=kn*Math.sin(gn),On=yn===0&&vn===0?0:vn/Math.sqrt(yn*yn+vn*vn),Cn=yn===0&&vn===0?0:-yn/Math.sqrt(yn*yn+vn*vn);yn+=+this.p.v[0],vn+=+this.p.v[1],this.v.setTripleAt(yn,vn,yn-On*Ln*Pn*Mn,vn-Cn*Ln*Pn*Mn,yn+On*Ln*Pn*Mn,vn+Cn*Ln*Pn*Mn,En,!0),on=!on,gn+=tn*Mn}},convertPolygonToPath:function(){var en=Math.floor(this.pt.v),tn=Math.PI*2/en,on=this.or.v,an=this.os.v,un=2*Math.PI*on/(en*4),dn,Sn=-Math.PI*.5,mn=this.data.d===3?-1:1;for(Sn+=this.r.v,this.v._length=0,dn=0;dn<en;dn+=1){var bn=on*Math.cos(Sn),En=on*Math.sin(Sn),kn=bn===0&&En===0?0:En/Math.sqrt(bn*bn+En*En),Pn=bn===0&&En===0?0:-bn/Math.sqrt(bn*bn+En*En);bn+=+this.p.v[0],En+=+this.p.v[1],this.v.setTripleAt(bn,En,bn-kn*un*an*mn,En-Pn*un*an*mn,bn+kn*un*an*mn,En+Pn*un*an*mn,dn,!0),Sn+=tn*mn}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],zt),zt}(),jt=function(){function zt(Kt,en){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Kt,this.comp=Kt.comp,this.frameId=-1,this.d=en.d,this.initDynamicPropertyContainer(Kt),this.p=PropertyFactory.getProp(Kt,en.p,1,0,this),this.s=PropertyFactory.getProp(Kt,en.s,1,0,this),this.r=PropertyFactory.getProp(Kt,en.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return zt.prototype={convertRectToPath:function(){var en=this.p.v[0],tn=this.p.v[1],on=this.s.v[0]/2,an=this.s.v[1]/2,un=bmMin(on,an,this.r.v),dn=un*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(en+on,tn-an+un,en+on,tn-an+un,en+on,tn-an+dn,0,!0),this.v.setTripleAt(en+on,tn+an-un,en+on,tn+an-dn,en+on,tn+an-un,1,!0),un!==0?(this.v.setTripleAt(en+on-un,tn+an,en+on-un,tn+an,en+on-dn,tn+an,2,!0),this.v.setTripleAt(en-on+un,tn+an,en-on+dn,tn+an,en-on+un,tn+an,3,!0),this.v.setTripleAt(en-on,tn+an-un,en-on,tn+an-un,en-on,tn+an-dn,4,!0),this.v.setTripleAt(en-on,tn-an+un,en-on,tn-an+dn,en-on,tn-an+un,5,!0),this.v.setTripleAt(en-on+un,tn-an,en-on+un,tn-an,en-on+dn,tn-an,6,!0),this.v.setTripleAt(en+on-un,tn-an,en+on-dn,tn-an,en+on-un,tn-an,7,!0)):(this.v.setTripleAt(en-on,tn+an,en-on+dn,tn+an,en-on,tn+an,2),this.v.setTripleAt(en-on,tn-an,en-on,tn-an+dn,en-on,tn-an,3))):(this.v.setTripleAt(en+on,tn-an+un,en+on,tn-an+dn,en+on,tn-an+un,0,!0),un!==0?(this.v.setTripleAt(en+on-un,tn-an,en+on-un,tn-an,en+on-dn,tn-an,1,!0),this.v.setTripleAt(en-on+un,tn-an,en-on+dn,tn-an,en-on+un,tn-an,2,!0),this.v.setTripleAt(en-on,tn-an+un,en-on,tn-an+un,en-on,tn-an+dn,3,!0),this.v.setTripleAt(en-on,tn+an-un,en-on,tn+an-dn,en-on,tn+an-un,4,!0),this.v.setTripleAt(en-on+un,tn+an,en-on+un,tn+an,en-on+dn,tn+an,5,!0),this.v.setTripleAt(en+on-un,tn+an,en+on-dn,tn+an,en+on-un,tn+an,6,!0),this.v.setTripleAt(en+on,tn+an-un,en+on,tn+an-un,en+on,tn+an-dn,7,!0)):(this.v.setTripleAt(en-on,tn-an,en-on+dn,tn-an,en-on,tn-an,1,!0),this.v.setTripleAt(en-on,tn+an,en-on,tn+an-dn,en-on,tn+an,2,!0),this.v.setTripleAt(en+on,tn+an,en+on-dn,tn+an,en+on,tn+an,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ot},extendPrototype([DynamicPropertyContainer],zt),zt}();function Ft(zt,Kt,en){var tn;if(en===3||en===4){var on=en===3?Kt.pt:Kt.ks,an=on.k;an.length?tn=new kt(zt,Kt,en):tn=new ft(zt,Kt,en)}else en===5?tn=new jt(zt,Kt):en===6?tn=new Tt(zt,Kt):en===7&&(tn=new Rt(zt,Kt));return tn.k&&zt.addDynamicProperty(tn),tn}function Bt(){return ft}function Ht(){return kt}var Yt={};return Yt.getShapeProp=Ft,Yt.getConstructorFunction=Bt,Yt.getKeyframedConstructorFunction=Ht,Yt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var it=Math.cos,g=Math.sin,et=Math.tan,ot=Math.round;function ut(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ct(yn){if(yn===0)return this;var vn=it(yn),On=g(yn);return this._t(vn,-On,0,0,On,vn,0,0,0,0,1,0,0,0,0,1)}function dt(yn){if(yn===0)return this;var vn=it(yn),On=g(yn);return this._t(1,0,0,0,0,vn,-On,0,0,On,vn,0,0,0,0,1)}function ft(yn){if(yn===0)return this;var vn=it(yn),On=g(yn);return this._t(vn,0,On,0,0,1,0,0,-On,0,vn,0,0,0,0,1)}function St(yn){if(yn===0)return this;var vn=it(yn),On=g(yn);return this._t(vn,-On,0,0,On,vn,0,0,0,0,1,0,0,0,0,1)}function kt(yn,vn){return this._t(1,vn,yn,1,0,0)}function Tt(yn,vn){return this.shear(et(yn),et(vn))}function Rt(yn,vn){var On=it(vn),Cn=g(vn);return this._t(On,Cn,0,0,-Cn,On,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,et(yn),1,0,0,0,0,1,0,0,0,0,1)._t(On,-Cn,0,0,Cn,On,0,0,0,0,1,0,0,0,0,1)}function jt(yn,vn,On){return!On&&On!==0&&(On=1),yn===1&&vn===1&&On===1?this:this._t(yn,0,0,0,0,vn,0,0,0,0,On,0,0,0,0,1)}function Ft(yn,vn,On,Cn,Vn,Qn,ir,ar,rr,hr,_r,xr,wr,Ir,_i,Br){return this.props[0]=yn,this.props[1]=vn,this.props[2]=On,this.props[3]=Cn,this.props[4]=Vn,this.props[5]=Qn,this.props[6]=ir,this.props[7]=ar,this.props[8]=rr,this.props[9]=hr,this.props[10]=_r,this.props[11]=xr,this.props[12]=wr,this.props[13]=Ir,this.props[14]=_i,this.props[15]=Br,this}function Bt(yn,vn,On){return On=On||0,yn!==0||vn!==0||On!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,yn,vn,On,1):this}function Ht(yn,vn,On,Cn,Vn,Qn,ir,ar,rr,hr,_r,xr,wr,Ir,_i,Br){var Fr=this.props;if(yn===1&&vn===0&&On===0&&Cn===0&&Vn===0&&Qn===1&&ir===0&&ar===0&&rr===0&&hr===0&&_r===1&&xr===0)return Fr[12]=Fr[12]*yn+Fr[15]*wr,Fr[13]=Fr[13]*Qn+Fr[15]*Ir,Fr[14]=Fr[14]*_r+Fr[15]*_i,Fr[15]*=Br,this._identityCalculated=!1,this;var cs=Fr[0],Cs=Fr[1],Ts=Fr[2],Rr=Fr[3],Lr=Fr[4],Gr=Fr[5],zr=Fr[6],Vr=Fr[7],rs=Fr[8],fs=Fr[9],Kr=Fr[10],$t=Fr[11],Jt=Fr[12],sn=Fr[13],ln=Fr[14],cn=Fr[15];return Fr[0]=cs*yn+Cs*Vn+Ts*rr+Rr*wr,Fr[1]=cs*vn+Cs*Qn+Ts*hr+Rr*Ir,Fr[2]=cs*On+Cs*ir+Ts*_r+Rr*_i,Fr[3]=cs*Cn+Cs*ar+Ts*xr+Rr*Br,Fr[4]=Lr*yn+Gr*Vn+zr*rr+Vr*wr,Fr[5]=Lr*vn+Gr*Qn+zr*hr+Vr*Ir,Fr[6]=Lr*On+Gr*ir+zr*_r+Vr*_i,Fr[7]=Lr*Cn+Gr*ar+zr*xr+Vr*Br,Fr[8]=rs*yn+fs*Vn+Kr*rr+$t*wr,Fr[9]=rs*vn+fs*Qn+Kr*hr+$t*Ir,Fr[10]=rs*On+fs*ir+Kr*_r+$t*_i,Fr[11]=rs*Cn+fs*ar+Kr*xr+$t*Br,Fr[12]=Jt*yn+sn*Vn+ln*rr+cn*wr,Fr[13]=Jt*vn+sn*Qn+ln*hr+cn*Ir,Fr[14]=Jt*On+sn*ir+ln*_r+cn*_i,Fr[15]=Jt*Cn+sn*ar+ln*xr+cn*Br,this._identityCalculated=!1,this}function Yt(yn){var vn=yn.props;return this.transform(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],vn[8],vn[9],vn[10],vn[11],vn[12],vn[13],vn[14],vn[15])}function zt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Kt(yn){for(var vn=0;vn<16;){if(yn.props[vn]!==this.props[vn])return!1;vn+=1}return!0}function en(yn){var vn;for(vn=0;vn<16;vn+=1)yn.props[vn]=this.props[vn];return yn}function tn(yn){var vn;for(vn=0;vn<16;vn+=1)this.props[vn]=yn[vn]}function on(yn,vn,On){return{x:yn*this.props[0]+vn*this.props[4]+On*this.props[8]+this.props[12],y:yn*this.props[1]+vn*this.props[5]+On*this.props[9]+this.props[13],z:yn*this.props[2]+vn*this.props[6]+On*this.props[10]+this.props[14]}}function an(yn,vn,On){return yn*this.props[0]+vn*this.props[4]+On*this.props[8]+this.props[12]}function un(yn,vn,On){return yn*this.props[1]+vn*this.props[5]+On*this.props[9]+this.props[13]}function dn(yn,vn,On){return yn*this.props[2]+vn*this.props[6]+On*this.props[10]+this.props[14]}function Sn(){var yn=this.props[0]*this.props[5]-this.props[1]*this.props[4],vn=this.props[5]/yn,On=-this.props[1]/yn,Cn=-this.props[4]/yn,Vn=this.props[0]/yn,Qn=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/yn,ir=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/yn,ar=new Matrix;return ar.props[0]=vn,ar.props[1]=On,ar.props[4]=Cn,ar.props[5]=Vn,ar.props[12]=Qn,ar.props[13]=ir,ar}function mn(yn){var vn=this.getInverseMatrix();return vn.applyToPointArray(yn[0],yn[1],yn[2]||0)}function bn(yn){var vn,On=yn.length,Cn=[];for(vn=0;vn<On;vn+=1)Cn[vn]=mn(yn[vn]);return Cn}function En(yn,vn,On){var Cn=createTypedArray("float32",6);if(this.isIdentity())Cn[0]=yn[0],Cn[1]=yn[1],Cn[2]=vn[0],Cn[3]=vn[1],Cn[4]=On[0],Cn[5]=On[1];else{var Vn=this.props[0],Qn=this.props[1],ir=this.props[4],ar=this.props[5],rr=this.props[12],hr=this.props[13];Cn[0]=yn[0]*Vn+yn[1]*ir+rr,Cn[1]=yn[0]*Qn+yn[1]*ar+hr,Cn[2]=vn[0]*Vn+vn[1]*ir+rr,Cn[3]=vn[0]*Qn+vn[1]*ar+hr,Cn[4]=On[0]*Vn+On[1]*ir+rr,Cn[5]=On[0]*Qn+On[1]*ar+hr}return Cn}function kn(yn,vn,On){var Cn;return this.isIdentity()?Cn=[yn,vn,On]:Cn=[yn*this.props[0]+vn*this.props[4]+On*this.props[8]+this.props[12],yn*this.props[1]+vn*this.props[5]+On*this.props[9]+this.props[13],yn*this.props[2]+vn*this.props[6]+On*this.props[10]+this.props[14]],Cn}function Pn(yn,vn){if(this.isIdentity())return yn+","+vn;var On=this.props;return Math.round((yn*On[0]+vn*On[4]+On[12])*100)/100+","+Math.round((yn*On[1]+vn*On[5]+On[13])*100)/100}function Ln(){for(var yn=0,vn=this.props,On="matrix3d(",Cn=1e4;yn<16;)On+=ot(vn[yn]*Cn)/Cn,On+=yn===15?")":",",yn+=1;return On}function gn(yn){var vn=1e4;return yn<1e-6&&yn>0||yn>-1e-6&&yn<0?ot(yn*vn)/vn:yn}function Mn(){var yn=this.props,vn=gn(yn[0]),On=gn(yn[1]),Cn=gn(yn[4]),Vn=gn(yn[5]),Qn=gn(yn[12]),ir=gn(yn[13]);return"matrix("+vn+","+On+","+Cn+","+Vn+","+Qn+","+ir+")"}return function(){this.reset=ut,this.rotate=ct,this.rotateX=dt,this.rotateY=ft,this.rotateZ=St,this.skew=Tt,this.skewFromAxis=Rt,this.shear=kt,this.scale=jt,this.setTransform=Ft,this.translate=Bt,this.transform=Ht,this.multiply=Yt,this.applyToPoint=on,this.applyToX=an,this.applyToY=un,this.applyToZ=dn,this.applyToPointArray=kn,this.applyToTriplePoints=En,this.applyToPointStringified=Pn,this.toCSS=Ln,this.to2dCSS=Mn,this.clone=en,this.cloneFromProps=tn,this.equals=Kt,this.inversePoints=bn,this.inversePoint=mn,this.getInverseMatrix=Sn,this._t=this.transform,this.isIdentity=zt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(et){return typeof et}:_typeof$3=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(it)}var lottie={};function setLocation(it){setLocationHref(it)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(it){setSubframeEnabled(it)}function setPrefix(it){setIdPrefix(it)}function loadAnimation(it){return animationManager.loadAnimation(it)}function setQuality(it){if(typeof it=="string")switch(it){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(it)&&it>1&&setDefaultCurveSegments(it)}function inBrowser(){return typeof navigator<"u"}function installPlugin(it,g){it==="expressions"&&setExpressionsPlugin(g)}function getFactory(it){switch(it){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(it){for(var g=queryString.split("&"),et=0;et<g.length;et+=1){var ot=g[et].split("=");if(decodeURIComponent(ot[0])==it)return decodeURIComponent(ot[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(it){}var ShapeModifiers=function(){var it={},g={};it.registerModifier=et,it.getModifier=ot;function et(ut,ct){g[ut]||(g[ut]=ct)}function ot(ut,ct,dt){return new g[ut](ct,dt)}return it}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(it){if(!this.closed){it.sh.container.addDynamicProperty(it.sh);var g={shape:it.sh,data:it,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(g),this.addShapeToModifier(g),this._isAnimated&&it.setAsAnimated()}},ShapeModifier.prototype.init=function(it,g){this.shapes=[],this.elem=it,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(it,g){this.s=PropertyFactory.getProp(it,g.s,0,.01,this),this.e=PropertyFactory.getProp(it,g.e,0,.01,this),this.o=PropertyFactory.getProp(it,g.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=g.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(it){it.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(it,g,et,ot,ut){var ct=[];g<=1?ct.push({s:it,e:g}):it>=1?ct.push({s:it-1,e:g-1}):(ct.push({s:it,e:1}),ct.push({s:0,e:g-1}));var dt=[],ft,St=ct.length,kt;for(ft=0;ft<St;ft+=1)if(kt=ct[ft],!(kt.e*ut<ot||kt.s*ut>ot+et)){var Tt,Rt;kt.s*ut<=ot?Tt=0:Tt=(kt.s*ut-ot)/et,kt.e*ut>=ot+et?Rt=1:Rt=(kt.e*ut-ot)/et,dt.push([Tt,Rt])}return dt.length||dt.push([0,0]),dt},TrimModifier.prototype.releasePathsData=function(it){var g,et=it.length;for(g=0;g<et;g+=1)segmentsLengthPool.release(it[g]);return it.length=0,it},TrimModifier.prototype.processShapes=function(it){var g,et;if(this._mdf||it){var ot=this.o.v%360/360;if(ot<0&&(ot+=1),this.s.v>1?g=1+ot:this.s.v<0?g=0+ot:g=this.s.v+ot,this.e.v>1?et=1+ot:this.e.v<0?et=0+ot:et=this.e.v+ot,g>et){var ut=g;g=et,et=ut}g=Math.round(g*1e4)*1e-4,et=Math.round(et*1e4)*1e-4,this.sValue=g,this.eValue=et}else g=this.sValue,et=this.eValue;var ct,dt,ft=this.shapes.length,St,kt,Tt,Rt,jt,Ft=0;if(et===g)for(dt=0;dt<ft;dt+=1)this.shapes[dt].localShapeCollection.releaseShapes(),this.shapes[dt].shape._mdf=!0,this.shapes[dt].shape.paths=this.shapes[dt].localShapeCollection,this._mdf&&(this.shapes[dt].pathsData.length=0);else if(et===1&&g===0||et===0&&g===1){if(this._mdf)for(dt=0;dt<ft;dt+=1)this.shapes[dt].pathsData.length=0,this.shapes[dt].shape._mdf=!0}else{var Bt=[],Ht,Yt;for(dt=0;dt<ft;dt+=1)if(Ht=this.shapes[dt],!Ht.shape._mdf&&!this._mdf&&!it&&this.m!==2)Ht.shape.paths=Ht.localShapeCollection;else{if(ct=Ht.shape.paths,kt=ct._length,jt=0,!Ht.shape._mdf&&Ht.pathsData.length)jt=Ht.totalShapeLength;else{for(Tt=this.releasePathsData(Ht.pathsData),St=0;St<kt;St+=1)Rt=bez.getSegmentsLength(ct.shapes[St]),Tt.push(Rt),jt+=Rt.totalLength;Ht.totalShapeLength=jt,Ht.pathsData=Tt}Ft+=jt,Ht.shape._mdf=!0}var zt=g,Kt=et,en=0,tn;for(dt=ft-1;dt>=0;dt-=1)if(Ht=this.shapes[dt],Ht.shape._mdf){for(Yt=Ht.localShapeCollection,Yt.releaseShapes(),this.m===2&&ft>1?(tn=this.calculateShapeEdges(g,et,Ht.totalShapeLength,en,Ft),en+=Ht.totalShapeLength):tn=[[zt,Kt]],kt=tn.length,St=0;St<kt;St+=1){zt=tn[St][0],Kt=tn[St][1],Bt.length=0,Kt<=1?Bt.push({s:Ht.totalShapeLength*zt,e:Ht.totalShapeLength*Kt}):zt>=1?Bt.push({s:Ht.totalShapeLength*(zt-1),e:Ht.totalShapeLength*(Kt-1)}):(Bt.push({s:Ht.totalShapeLength*zt,e:Ht.totalShapeLength}),Bt.push({s:0,e:Ht.totalShapeLength*(Kt-1)}));var on=this.addShapes(Ht,Bt[0]);if(Bt[0].s!==Bt[0].e){if(Bt.length>1){var an=Ht.shape.paths.shapes[Ht.shape.paths._length-1];if(an.c){var un=on.pop();this.addPaths(on,Yt),on=this.addShapes(Ht,Bt[1],un)}else this.addPaths(on,Yt),on=this.addShapes(Ht,Bt[1])}this.addPaths(on,Yt)}}Ht.shape.paths=Yt}}},TrimModifier.prototype.addPaths=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g.addShape(it[et])},TrimModifier.prototype.addSegment=function(it,g,et,ot,ut,ct,dt){ut.setXYAt(g[0],g[1],"o",ct),ut.setXYAt(et[0],et[1],"i",ct+1),dt&&ut.setXYAt(it[0],it[1],"v",ct),ut.setXYAt(ot[0],ot[1],"v",ct+1)},TrimModifier.prototype.addSegmentFromArray=function(it,g,et,ot){g.setXYAt(it[1],it[5],"o",et),g.setXYAt(it[2],it[6],"i",et+1),ot&&g.setXYAt(it[0],it[4],"v",et),g.setXYAt(it[3],it[7],"v",et+1)},TrimModifier.prototype.addShapes=function(it,g,et){var ot=it.pathsData,ut=it.shape.paths.shapes,ct,dt=it.shape.paths._length,ft,St,kt=0,Tt,Rt,jt,Ft,Bt=[],Ht,Yt=!0;for(et?(Rt=et._length,Ht=et._length):(et=shapePool.newElement(),Rt=0,Ht=0),Bt.push(et),ct=0;ct<dt;ct+=1){for(jt=ot[ct].lengths,et.c=ut[ct].c,St=ut[ct].c?jt.length:jt.length+1,ft=1;ft<St;ft+=1)if(Tt=jt[ft-1],kt+Tt.addedLength<g.s)kt+=Tt.addedLength,et.c=!1;else if(kt>g.e){et.c=!1;break}else g.s<=kt&&g.e>=kt+Tt.addedLength?(this.addSegment(ut[ct].v[ft-1],ut[ct].o[ft-1],ut[ct].i[ft],ut[ct].v[ft],et,Rt,Yt),Yt=!1):(Ft=bez.getNewSegment(ut[ct].v[ft-1],ut[ct].v[ft],ut[ct].o[ft-1],ut[ct].i[ft],(g.s-kt)/Tt.addedLength,(g.e-kt)/Tt.addedLength,jt[ft-1]),this.addSegmentFromArray(Ft,et,Rt,Yt),Yt=!1,et.c=!1),kt+=Tt.addedLength,Rt+=1;if(ut[ct].c&&jt.length){if(Tt=jt[ft-1],kt<=g.e){var zt=jt[ft-1].addedLength;g.s<=kt&&g.e>=kt+zt?(this.addSegment(ut[ct].v[ft-1],ut[ct].o[ft-1],ut[ct].i[0],ut[ct].v[0],et,Rt,Yt),Yt=!1):(Ft=bez.getNewSegment(ut[ct].v[ft-1],ut[ct].v[0],ut[ct].o[ft-1],ut[ct].i[0],(g.s-kt)/zt,(g.e-kt)/zt,jt[ft-1]),this.addSegmentFromArray(Ft,et,Rt,Yt),Yt=!1,et.c=!1)}else et.c=!1;kt+=Tt.addedLength,Rt+=1}if(et._length&&(et.setXYAt(et.v[Ht][0],et.v[Ht][1],"i",Ht),et.setXYAt(et.v[et._length-1][0],et.v[et._length-1][1],"o",et._length-1)),kt>g.e)break;ct<dt-1&&(et=shapePool.newElement(),Yt=!0,Bt.push(et),Rt=0)}return Bt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(it,g){var et=g/100,ot=[0,0],ut=it._length,ct=0;for(ct=0;ct<ut;ct+=1)ot[0]+=it.v[ct][0],ot[1]+=it.v[ct][1];ot[0]/=ut,ot[1]/=ut;var dt=shapePool.newElement();dt.c=it.c;var ft,St,kt,Tt,Rt,jt;for(ct=0;ct<ut;ct+=1)ft=it.v[ct][0]+(ot[0]-it.v[ct][0])*et,St=it.v[ct][1]+(ot[1]-it.v[ct][1])*et,kt=it.o[ct][0]+(ot[0]-it.o[ct][0])*-et,Tt=it.o[ct][1]+(ot[1]-it.o[ct][1])*-et,Rt=it.i[ct][0]+(ot[0]-it.i[ct][0])*-et,jt=it.i[ct][1]+(ot[1]-it.i[ct][1])*-et,dt.setTripleAt(ft,St,kt,Tt,Rt,jt,ct);return dt},PuckerAndBloatModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amount.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ct=ft.shape.paths._length,ut=0;ut<ct;ut+=1)St.addShape(this.processPath(g[ut],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var it=[0,0];function g(St){var kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||kt,this.a&&St.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&St.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&St.skewFromAxis(-this.sk.v,this.sa.v),this.r?St.rotate(-this.r.v):St.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?St.translate(this.px.v,this.py.v,-this.pz.v):St.translate(this.px.v,this.py.v,0):St.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function et(St){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||St){var kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Tt,Rt;if(kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Tt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/kt,0),Rt=this.p.getValueAtTime(this.p.keyframes[0].t/kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Tt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/kt,0),Rt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/kt,0)):(Tt=this.p.pv,Rt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Tt=[],Rt=[];var jt=this.px,Ft=this.py;jt._caching.lastFrame+jt.offsetTime<=jt.keyframes[0].t?(Tt[0]=jt.getValueAtTime((jt.keyframes[0].t+.01)/kt,0),Tt[1]=Ft.getValueAtTime((Ft.keyframes[0].t+.01)/kt,0),Rt[0]=jt.getValueAtTime(jt.keyframes[0].t/kt,0),Rt[1]=Ft.getValueAtTime(Ft.keyframes[0].t/kt,0)):jt._caching.lastFrame+jt.offsetTime>=jt.keyframes[jt.keyframes.length-1].t?(Tt[0]=jt.getValueAtTime(jt.keyframes[jt.keyframes.length-1].t/kt,0),Tt[1]=Ft.getValueAtTime(Ft.keyframes[Ft.keyframes.length-1].t/kt,0),Rt[0]=jt.getValueAtTime((jt.keyframes[jt.keyframes.length-1].t-.01)/kt,0),Rt[1]=Ft.getValueAtTime((Ft.keyframes[Ft.keyframes.length-1].t-.01)/kt,0)):(Tt=[jt.pv,Ft.pv],Rt[0]=jt.getValueAtTime((jt._caching.lastFrame+jt.offsetTime-.01)/kt,jt.offsetTime),Rt[1]=Ft.getValueAtTime((Ft._caching.lastFrame+Ft.offsetTime-.01)/kt,Ft.offsetTime))}else Rt=it,Tt=Rt;this.v.rotate(-Math.atan2(Tt[1]-Rt[1],Tt[0]-Rt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ot(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ut(){}function ct(St){this._addDynamicProperty(St),this.elem.addDynamicProperty(St),this._isDirty=!0}function dt(St,kt,Tt){if(this.elem=St,this.frameId=-1,this.propType="transform",this.data=kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Tt||St),kt.p&&kt.p.s?(this.px=PropertyFactory.getProp(St,kt.p.x,0,0,this),this.py=PropertyFactory.getProp(St,kt.p.y,0,0,this),kt.p.z&&(this.pz=PropertyFactory.getProp(St,kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(St,kt.p||{k:[0,0,0]},1,0,this),kt.rx){if(this.rx=PropertyFactory.getProp(St,kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(St,kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(St,kt.rz,0,degToRads,this),kt.or.k[0].ti){var Rt,jt=kt.or.k.length;for(Rt=0;Rt<jt;Rt+=1)kt.or.k[Rt].to=null,kt.or.k[Rt].ti=null}this.or=PropertyFactory.getProp(St,kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(St,kt.r||{k:0},0,degToRads,this);kt.sk&&(this.sk=PropertyFactory.getProp(St,kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(St,kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(St,kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(St,kt.s||{k:[100,100,100]},1,.01,this),kt.o?this.o=PropertyFactory.getProp(St,kt.o,0,.01,St):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}dt.prototype={applyToMatrix:g,getValue:et,precalculateMatrix:ot,autoOrient:ut},extendPrototype([DynamicPropertyContainer],dt),dt.prototype.addDynamicProperty=ct,dt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ft(St,kt,Tt){return new dt(St,kt,Tt)}return{getTransformProperty:ft}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(it,g.c,0,null,this),this.o=PropertyFactory.getProp(it,g.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(it,g.tr,this),this.so=PropertyFactory.getProp(it,g.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(it,g.tr.eo,0,.01,this),this.data=g,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(it,g,et,ot,ut,ct){var dt=ct?-1:1,ft=ot.s.v[0]+(1-ot.s.v[0])*(1-ut),St=ot.s.v[1]+(1-ot.s.v[1])*(1-ut);it.translate(ot.p.v[0]*dt*ut,ot.p.v[1]*dt*ut,ot.p.v[2]),g.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),g.rotate(-ot.r.v*dt*ut),g.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2]),et.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),et.scale(ct?1/ft:ft,ct?1/St:St),et.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])},RepeaterModifier.prototype.init=function(it,g,et,ot){for(this.elem=it,this.arr=g,this.pos=et,this.elemsData=ot,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g[et]);et>0;)et-=1,this._elements.unshift(g[et]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g]._processed=!1,it[g].ty==="gr"&&this.resetElements(it[g].it)},RepeaterModifier.prototype.cloneElements=function(it){var g=JSON.parse(JSON.stringify(it));return this.resetElements(g),g},RepeaterModifier.prototype.changeGroupRender=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]._render=g,it[et].ty==="gr"&&this.changeGroupRender(it[et].it,g)},RepeaterModifier.prototype.processShapes=function(it){var g,et,ot,ut,ct,dt=!1;if(this._mdf||it){var ft=Math.ceil(this.c.v);if(this._groups.length<ft){for(;this._groups.length<ft;){var St={it:this.cloneElements(this._elements),ty:"gr"};St.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,St),this._groups.splice(0,0,St),this._currentCopies+=1}this.elem.reloadShapes(),dt=!0}ct=0;var kt;for(ot=0;ot<=this._groups.length-1;ot+=1){if(kt=ct<ft,this._groups[ot]._render=kt,this.changeGroupRender(this._groups[ot].it,kt),!kt){var Tt=this.elemsData[ot].it,Rt=Tt[Tt.length-1];Rt.transform.op.v!==0?(Rt.transform.op._mdf=!0,Rt.transform.op.v=0):Rt.transform.op._mdf=!1}ct+=1}this._currentCopies=ft;var jt=this.o.v,Ft=jt%1,Bt=jt>0?Math.floor(jt):Math.ceil(jt),Ht=this.pMatrix.props,Yt=this.rMatrix.props,zt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Kt=0;if(jt>0){for(;Kt<Bt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Kt+=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Ft,!1),Kt+=Ft)}else if(jt<0){for(;Kt>Bt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Kt-=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Ft,!0),Kt-=Ft)}ot=this.data.m===1?0:this._currentCopies-1,ut=this.data.m===1?1:-1,ct=this._currentCopies;for(var en,tn;ct;){if(g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,tn=et.length,g[g.length-1].transform.mProps._mdf=!0,g[g.length-1].transform.op._mdf=!0,g[g.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ot/(this._currentCopies-1)),Kt!==0){for((ot!==0&&ut===1||ot!==this._currentCopies-1&&ut===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Yt[0],Yt[1],Yt[2],Yt[3],Yt[4],Yt[5],Yt[6],Yt[7],Yt[8],Yt[9],Yt[10],Yt[11],Yt[12],Yt[13],Yt[14],Yt[15]),this.matrix.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6],zt[7],zt[8],zt[9],zt[10],zt[11],zt[12],zt[13],zt[14],zt[15]),this.matrix.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15]),en=0;en<tn;en+=1)et[en]=this.matrix.props[en];this.matrix.reset()}else for(this.matrix.reset(),en=0;en<tn;en+=1)et[en]=this.matrix.props[en];Kt+=1,ct-=1,ot+=ut}}else for(ct=this._currentCopies,ot=0,ut=1;ct;)g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,g[g.length-1].transform.mProps._mdf=!1,g[g.length-1].transform.op._mdf=!1,ct-=1,ot+=ut;return dt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(it,g.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(it,g){var et=shapePool.newElement();et.c=it.c;var ot,ut=it._length,ct,dt,ft,St,kt,Tt,Rt=0,jt,Ft,Bt,Ht,Yt,zt;for(ot=0;ot<ut;ot+=1)ct=it.v[ot],ft=it.o[ot],dt=it.i[ot],ct[0]===ft[0]&&ct[1]===ft[1]&&ct[0]===dt[0]&&ct[1]===dt[1]?(ot===0||ot===ut-1)&&!it.c?(et.setTripleAt(ct[0],ct[1],ft[0],ft[1],dt[0],dt[1],Rt),Rt+=1):(ot===0?St=it.v[ut-1]:St=it.v[ot-1],kt=Math.sqrt(Math.pow(ct[0]-St[0],2)+Math.pow(ct[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Yt=ct[0]+(St[0]-ct[0])*Tt,jt=Yt,zt=ct[1]-(ct[1]-St[1])*Tt,Ft=zt,Bt=jt-(jt-ct[0])*roundCorner,Ht=Ft-(Ft-ct[1])*roundCorner,et.setTripleAt(jt,Ft,Bt,Ht,Yt,zt,Rt),Rt+=1,ot===ut-1?St=it.v[0]:St=it.v[ot+1],kt=Math.sqrt(Math.pow(ct[0]-St[0],2)+Math.pow(ct[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Bt=ct[0]+(St[0]-ct[0])*Tt,jt=Bt,Ht=ct[1]+(St[1]-ct[1])*Tt,Ft=Ht,Yt=jt-(jt-ct[0])*roundCorner,zt=Ft-(Ft-ct[1])*roundCorner,et.setTripleAt(jt,Ft,Bt,Ht,Yt,zt,Rt),Rt+=1):(et.setTripleAt(it.v[ot][0],it.v[ot][1],it.o[ot][0],it.o[ot][1],it.i[ot][0],it.i[ot][1],Rt),Rt+=1);return et},RoundCornersModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.rd.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ct=ft.shape.paths._length,ut=0;ut<ct;ut+=1)St.addShape(this.processPath(g[ut],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(it,g){return Math.abs(it-g)*1e5<=Math.min(Math.abs(it),Math.abs(g))}function floatZero(it){return Math.abs(it)<=1e-5}function lerp(it,g,et){return it*(1-et)+g*et}function lerpPoint(it,g,et){return[lerp(it[0],g[0],et),lerp(it[1],g[1],et)]}function quadRoots(it,g,et){if(it===0)return[];var ot=g*g-4*it*et;if(ot<0)return[];var ut=-g/(2*it);if(ot===0)return[ut];var ct=Math.sqrt(ot)/(2*it);return[ut-ct,ut+ct]}function polynomialCoefficients(it,g,et,ot){return[-it+3*g-3*et+ot,3*it-6*g+3*et,-3*it+3*g,it]}function singlePoint(it){return new PolynomialBezier(it,it,it,it,!1)}function PolynomialBezier(it,g,et,ot,ut){ut&&pointEqual(it,g)&&(g=lerpPoint(it,ot,1/3)),ut&&pointEqual(et,ot)&&(et=lerpPoint(it,ot,2/3));var ct=polynomialCoefficients(it[0],g[0],et[0],ot[0]),dt=polynomialCoefficients(it[1],g[1],et[1],ot[1]);this.a=[ct[0],dt[0]],this.b=[ct[1],dt[1]],this.c=[ct[2],dt[2]],this.d=[ct[3],dt[3]],this.points=[it,g,et,ot]}PolynomialBezier.prototype.point=function(it){return[((this.a[0]*it+this.b[0])*it+this.c[0])*it+this.d[0],((this.a[1]*it+this.b[1])*it+this.c[1])*it+this.d[1]]},PolynomialBezier.prototype.derivative=function(it){return[(3*it*this.a[0]+2*this.b[0])*it+this.c[0],(3*it*this.a[1]+2*this.b[1])*it+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(it){var g=this.derivative(it);return Math.atan2(g[1],g[0])},PolynomialBezier.prototype.normalAngle=function(it){var g=this.derivative(it);return Math.atan2(g[0],g[1])},PolynomialBezier.prototype.inflectionPoints=function(){var it=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(it))return[];var g=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/it,et=g*g-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/it;if(et<0)return[];var ot=Math.sqrt(et);return floatZero(ot)?ot>0&&ot<1?[g]:[]:[g-ot,g+ot].filter(function(ut){return ut>0&&ut<1})},PolynomialBezier.prototype.split=function(it){if(it<=0)return[singlePoint(this.points[0]),this];if(it>=1)return[this,singlePoint(this.points[this.points.length-1])];var g=lerpPoint(this.points[0],this.points[1],it),et=lerpPoint(this.points[1],this.points[2],it),ot=lerpPoint(this.points[2],this.points[3],it),ut=lerpPoint(g,et,it),ct=lerpPoint(et,ot,it),dt=lerpPoint(ut,ct,it);return[new PolynomialBezier(this.points[0],g,ut,dt,!0),new PolynomialBezier(dt,ct,ot,this.points[3],!0)]};function extrema(it,g){var et=it.points[0][g],ot=it.points[it.points.length-1][g];if(et>ot){var ut=ot;ot=et,et=ut}for(var ct=quadRoots(3*it.a[g],2*it.b[g],it.c[g]),dt=0;dt<ct.length;dt+=1)if(ct[dt]>0&&ct[dt]<1){var ft=it.point(ct[dt])[g];ft<et?et=ft:ft>ot&&(ot=ft)}return{min:et,max:ot}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var it=this.bounds();return{left:it.x.min,right:it.x.max,top:it.y.min,bottom:it.y.max,width:it.x.max-it.x.min,height:it.y.max-it.y.min,cx:(it.x.max+it.x.min)/2,cy:(it.y.max+it.y.min)/2}};function intersectData(it,g,et){var ot=it.boundingBox();return{cx:ot.cx,cy:ot.cy,width:ot.width,height:ot.height,bez:it,t:(g+et)/2,t1:g,t2:et}}function splitData(it){var g=it.bez.split(.5);return[intersectData(g[0],it.t1,it.t),intersectData(g[1],it.t,it.t2)]}function boxIntersect(it,g){return Math.abs(it.cx-g.cx)*2<it.width+g.width&&Math.abs(it.cy-g.cy)*2<it.height+g.height}function intersectsImpl(it,g,et,ot,ut,ct){if(boxIntersect(it,g)){if(et>=ct||it.width<=ot&&it.height<=ot&&g.width<=ot&&g.height<=ot){ut.push([it.t,g.t]);return}var dt=splitData(it),ft=splitData(g);intersectsImpl(dt[0],ft[0],et+1,ot,ut,ct),intersectsImpl(dt[0],ft[1],et+1,ot,ut,ct),intersectsImpl(dt[1],ft[0],et+1,ot,ut,ct),intersectsImpl(dt[1],ft[1],et+1,ot,ut,ct)}}PolynomialBezier.prototype.intersections=function(it,g,et){g===void 0&&(g=2),et===void 0&&(et=7);var ot=[];return intersectsImpl(intersectData(this,0,1),intersectData(it,0,1),0,g,ot,et),ot},PolynomialBezier.shapeSegment=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[g],it.o[g],it.i[et],it.v[et],!0)},PolynomialBezier.shapeSegmentInverted=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[et],it.i[et],it.o[g],it.v[g],!0)};function crossProduct(it,g){return[it[1]*g[2]-it[2]*g[1],it[2]*g[0]-it[0]*g[2],it[0]*g[1]-it[1]*g[0]]}function lineIntersection(it,g,et,ot){var ut=[it[0],it[1],1],ct=[g[0],g[1],1],dt=[et[0],et[1],1],ft=[ot[0],ot[1],1],St=crossProduct(crossProduct(ut,ct),crossProduct(dt,ft));return floatZero(St[2])?null:[St[0]/St[2],St[1]/St[2]]}function polarOffset(it,g,et){return[it[0]+Math.cos(g)*et,it[1]-Math.sin(g)*et]}function pointDistance(it,g){return Math.hypot(it[0]-g[0],it[1]-g[1])}function pointEqual(it,g){return floatEqual(it[0],g[0])&&floatEqual(it[1],g[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(it,g.s,0,null,this),this.frequency=PropertyFactory.getProp(it,g.r,0,null,this),this.pointsType=PropertyFactory.getProp(it,g.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(it,g,et,ot,ut,ct,dt){var ft=et-Math.PI/2,St=et+Math.PI/2,kt=g[0]+Math.cos(et)*ot*ut,Tt=g[1]-Math.sin(et)*ot*ut;it.setTripleAt(kt,Tt,kt+Math.cos(ft)*ct,Tt-Math.sin(ft)*ct,kt+Math.cos(St)*dt,Tt-Math.sin(St)*dt,it.length())}function getPerpendicularVector(it,g){var et=[g[0]-it[0],g[1]-it[1]],ot=-Math.PI*.5,ut=[Math.cos(ot)*et[0]-Math.sin(ot)*et[1],Math.sin(ot)*et[0]+Math.cos(ot)*et[1]];return ut}function getProjectingAngle(it,g){var et=g===0?it.length()-1:g-1,ot=(g+1)%it.length(),ut=it.v[et],ct=it.v[ot],dt=getPerpendicularVector(ut,ct);return Math.atan2(0,1)-Math.atan2(dt[1],dt[0])}function zigZagCorner(it,g,et,ot,ut,ct,dt){var ft=getProjectingAngle(g,et),St=g.v[et%g._length],kt=g.v[et===0?g._length-1:et-1],Tt=g.v[(et+1)%g._length],Rt=ct===2?Math.sqrt(Math.pow(St[0]-kt[0],2)+Math.pow(St[1]-kt[1],2)):0,jt=ct===2?Math.sqrt(Math.pow(St[0]-Tt[0],2)+Math.pow(St[1]-Tt[1],2)):0;setPoint(it,g.v[et%g._length],ft,dt,ot,jt/((ut+1)*2),Rt/((ut+1)*2))}function zigZagSegment(it,g,et,ot,ut,ct){for(var dt=0;dt<ot;dt+=1){var ft=(dt+1)/(ot+1),St=ut===2?Math.sqrt(Math.pow(g.points[3][0]-g.points[0][0],2)+Math.pow(g.points[3][1]-g.points[0][1],2)):0,kt=g.normalAngle(ft),Tt=g.point(ft);setPoint(it,Tt,kt,ct,et,St/((ot+1)*2),St/((ot+1)*2)),ct=-ct}return ct}ZigZagModifier.prototype.processPath=function(it,g,et,ot){var ut=it._length,ct=shapePool.newElement();if(ct.c=it.c,it.c||(ut-=1),ut===0)return ct;var dt=-1,ft=PolynomialBezier.shapeSegment(it,0);zigZagCorner(ct,it,0,g,et,ot,dt);for(var St=0;St<ut;St+=1)dt=zigZagSegment(ct,ft,g,et,ot,-dt),St===ut-1&&!it.c?ft=null:ft=PolynomialBezier.shapeSegment(it,(St+1)%ut),zigZagCorner(ct,it,St+1,g,et,ot,dt);return ct},ZigZagModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amplitude.v,ft=Math.max(0,Math.round(this.frequency.v)),St=this.pointsType.v;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ct=kt.shape.paths._length,ut=0;ut<ct;ut+=1)Tt.addShape(this.processPath(g[ut],dt,ft,St));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(it,g,et){var ot=Math.atan2(g[0]-it[0],g[1]-it[1]);return[polarOffset(it,ot,et),polarOffset(g,ot,et)]}function offsetSegment(it,g){var et,ot,ut,ct,dt,ft,St;St=linearOffset(it.points[0],it.points[1],g),et=St[0],ot=St[1],St=linearOffset(it.points[1],it.points[2],g),ut=St[0],ct=St[1],St=linearOffset(it.points[2],it.points[3],g),dt=St[0],ft=St[1];var kt=lineIntersection(et,ot,ut,ct);kt===null&&(kt=ot);var Tt=lineIntersection(dt,ft,ut,ct);return Tt===null&&(Tt=dt),new PolynomialBezier(et,kt,Tt,ft)}function joinLines(it,g,et,ot,ut){var ct=g.points[3],dt=et.points[0];if(ot===3||pointEqual(ct,dt))return ct;if(ot===2){var ft=-g.tangentAngle(1),St=-et.tangentAngle(0)+Math.PI,kt=lineIntersection(ct,polarOffset(ct,ft+Math.PI/2,100),dt,polarOffset(dt,ft+Math.PI/2,100)),Tt=kt?pointDistance(kt,ct):pointDistance(ct,dt)/2,Rt=polarOffset(ct,ft,2*Tt*roundCorner);return it.setXYAt(Rt[0],Rt[1],"o",it.length()-1),Rt=polarOffset(dt,St,2*Tt*roundCorner),it.setTripleAt(dt[0],dt[1],dt[0],dt[1],Rt[0],Rt[1],it.length()),dt}var jt=pointEqual(ct,g.points[2])?g.points[0]:g.points[2],Ft=pointEqual(dt,et.points[1])?et.points[3]:et.points[1],Bt=lineIntersection(jt,ct,dt,Ft);return Bt&&pointDistance(Bt,ct)<ut?(it.setTripleAt(Bt[0],Bt[1],Bt[0],Bt[1],Bt[0],Bt[1],it.length()),Bt):ct}function getIntersection(it,g){var et=it.intersections(g);return et.length&&floatEqual(et[0][0],1)&&et.shift(),et.length?et[0]:null}function pruneSegmentIntersection(it,g){var et=it.slice(),ot=g.slice(),ut=getIntersection(it[it.length-1],g[0]);return ut&&(et[it.length-1]=it[it.length-1].split(ut[0])[0],ot[0]=g[0].split(ut[1])[1]),it.length>1&&g.length>1&&(ut=getIntersection(it[0],g[g.length-1]),ut)?[[it[0].split(ut[0])[0]],[g[g.length-1].split(ut[1])[1]]]:[et,ot]}function pruneIntersections(it){for(var g,et=1;et<it.length;et+=1)g=pruneSegmentIntersection(it[et-1],it[et]),it[et-1]=g[0],it[et]=g[1];return it.length>1&&(g=pruneSegmentIntersection(it[it.length-1],it[0]),it[it.length-1]=g[0],it[0]=g[1]),it}function offsetSegmentSplit(it,g){var et=it.inflectionPoints(),ot,ut,ct,dt;if(et.length===0)return[offsetSegment(it,g)];if(et.length===1||floatEqual(et[1],1))return ct=it.split(et[0]),ot=ct[0],ut=ct[1],[offsetSegment(ot,g),offsetSegment(ut,g)];ct=it.split(et[0]),ot=ct[0];var ft=(et[1]-et[0])/(1-et[0]);return ct=ct[1].split(ft),dt=ct[0],ut=ct[1],[offsetSegment(ot,g),offsetSegment(dt,g),offsetSegment(ut,g)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this.miterLimit=PropertyFactory.getProp(it,g.ml,0,null,this),this.lineJoin=g.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(it,g,et,ot){var ut=shapePool.newElement();ut.c=it.c;var ct=it.length();it.c||(ct-=1);var dt,ft,St,kt=[];for(dt=0;dt<ct;dt+=1)St=PolynomialBezier.shapeSegment(it,dt),kt.push(offsetSegmentSplit(St,g));if(!it.c)for(dt=ct-1;dt>=0;dt-=1)St=PolynomialBezier.shapeSegmentInverted(it,dt),kt.push(offsetSegmentSplit(St,g));kt=pruneIntersections(kt);var Tt=null,Rt=null;for(dt=0;dt<kt.length;dt+=1){var jt=kt[dt];for(Rt&&(Tt=joinLines(ut,Rt,jt[0],et,ot)),Rt=jt[jt.length-1],ft=0;ft<jt.length;ft+=1)St=jt[ft],Tt&&pointEqual(St.points[0],Tt)?ut.setXYAt(St.points[1][0],St.points[1][1],"o",ut.length()-1):ut.setTripleAt(St.points[0][0],St.points[0][1],St.points[1][0],St.points[1][1],St.points[0][0],St.points[0][1],ut.length()),ut.setTripleAt(St.points[3][0],St.points[3][1],St.points[3][0],St.points[3][1],St.points[2][0],St.points[2][1],ut.length()),Tt=St.points[3]}return kt.length&&joinLines(ut,Rt,kt[0][0],et,ot),ut},OffsetPathModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amount.v,ft=this.miterLimit.v,St=this.lineJoin;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ct=kt.shape.paths._length,ut=0;ut<ct;ut+=1)Tt.addShape(this.processPath(g[ut],dt,St,ft));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(it){for(var g=it.fStyle?it.fStyle.split(" "):[],et="normal",ot="normal",ut=g.length,ct,dt=0;dt<ut;dt+=1)switch(ct=g[dt].toLowerCase(),ct){case"italic":ot="italic";break;case"bold":et="700";break;case"black":et="900";break;case"medium":et="500";break;case"regular":case"normal":et="400";break;case"light":case"thin":et="200";break}return{style:ot,weight:it.fWeight||et}}var FontManager=function(){var it=5e3,g={w:0,size:0,shapes:[],data:{shapes:[]}},et=[];et=et.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ot=127988,ut=917631,ct=917601,dt=917626,ft=65039,St=8205,kt=127462,Tt=127487,Rt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function jt(gn){var Mn=gn.split(","),yn,vn=Mn.length,On=[];for(yn=0;yn<vn;yn+=1)Mn[yn]!=="sans-serif"&&Mn[yn]!=="monospace"&&On.push(Mn[yn]);return On.join(",")}function Ft(gn,Mn){var yn=createTag("span");yn.setAttribute("aria-hidden",!0),yn.style.fontFamily=Mn;var vn=createTag("span");vn.innerText="giItT1WQy@!-/#",yn.style.position="absolute",yn.style.left="-10000px",yn.style.top="-10000px",yn.style.fontSize="300px",yn.style.fontVariant="normal",yn.style.fontStyle="normal",yn.style.fontWeight="normal",yn.style.letterSpacing="0",yn.appendChild(vn),document.body.appendChild(yn);var On=vn.offsetWidth;return vn.style.fontFamily=jt(gn)+", "+Mn,{node:vn,w:On,parent:yn}}function Bt(){var gn,Mn=this.fonts.length,yn,vn,On=Mn;for(gn=0;gn<Mn;gn+=1)this.fonts[gn].loaded?On-=1:this.fonts[gn].fOrigin==="n"||this.fonts[gn].origin===0?this.fonts[gn].loaded=!0:(yn=this.fonts[gn].monoCase.node,vn=this.fonts[gn].monoCase.w,yn.offsetWidth!==vn?(On-=1,this.fonts[gn].loaded=!0):(yn=this.fonts[gn].sansCase.node,vn=this.fonts[gn].sansCase.w,yn.offsetWidth!==vn&&(On-=1,this.fonts[gn].loaded=!0)),this.fonts[gn].loaded&&(this.fonts[gn].sansCase.parent.parentNode.removeChild(this.fonts[gn].sansCase.parent),this.fonts[gn].monoCase.parent.parentNode.removeChild(this.fonts[gn].monoCase.parent)));On!==0&&Date.now()-this.initTime<it?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function Ht(gn,Mn){var yn=document.body&&Mn?"svg":"canvas",vn,On=getFontProperties(gn);if(yn==="svg"){var Cn=createNS("text");Cn.style.fontSize="100px",Cn.setAttribute("font-family",gn.fFamily),Cn.setAttribute("font-style",On.style),Cn.setAttribute("font-weight",On.weight),Cn.textContent="1",gn.fClass?(Cn.style.fontFamily="inherit",Cn.setAttribute("class",gn.fClass)):Cn.style.fontFamily=gn.fFamily,Mn.appendChild(Cn),vn=Cn}else{var Vn=new OffscreenCanvas(500,500).getContext("2d");Vn.font=On.style+" "+On.weight+" 100px "+gn.fFamily,vn=Vn}function Qn(ir){return yn==="svg"?(vn.textContent=ir,vn.getComputedTextLength()):vn.measureText(ir).width}return{measureText:Qn}}function Yt(gn,Mn){if(!gn){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=gn.list;return}if(!document.body){this.isLoaded=!0,gn.list.forEach(function(_r){_r.helper=Ht(_r),_r.cache={}}),this.fonts=gn.list;return}var yn=gn.list,vn,On=yn.length,Cn=On;for(vn=0;vn<On;vn+=1){var Vn=!0,Qn,ir;if(yn[vn].loaded=!1,yn[vn].monoCase=Ft(yn[vn].fFamily,"monospace"),yn[vn].sansCase=Ft(yn[vn].fFamily,"sans-serif"),!yn[vn].fPath)yn[vn].loaded=!0,Cn-=1;else if(yn[vn].fOrigin==="p"||yn[vn].origin===3){if(Qn=document.querySelectorAll('style[f-forigin="p"][f-family="'+yn[vn].fFamily+'"], style[f-origin="3"][f-family="'+yn[vn].fFamily+'"]'),Qn.length>0&&(Vn=!1),Vn){var ar=createTag("style");ar.setAttribute("f-forigin",yn[vn].fOrigin),ar.setAttribute("f-origin",yn[vn].origin),ar.setAttribute("f-family",yn[vn].fFamily),ar.type="text/css",ar.innerText="@font-face {font-family: "+yn[vn].fFamily+"; font-style: normal; src: url('"+yn[vn].fPath+"');}",Mn.appendChild(ar)}}else if(yn[vn].fOrigin==="g"||yn[vn].origin===1){for(Qn=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ir=0;ir<Qn.length;ir+=1)Qn[ir].href.indexOf(yn[vn].fPath)!==-1&&(Vn=!1);if(Vn){var rr=createTag("link");rr.setAttribute("f-forigin",yn[vn].fOrigin),rr.setAttribute("f-origin",yn[vn].origin),rr.type="text/css",rr.rel="stylesheet",rr.href=yn[vn].fPath,document.body.appendChild(rr)}}else if(yn[vn].fOrigin==="t"||yn[vn].origin===2){for(Qn=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ir=0;ir<Qn.length;ir+=1)yn[vn].fPath===Qn[ir].src&&(Vn=!1);if(Vn){var hr=createTag("link");hr.setAttribute("f-forigin",yn[vn].fOrigin),hr.setAttribute("f-origin",yn[vn].origin),hr.setAttribute("rel","stylesheet"),hr.setAttribute("href",yn[vn].fPath),Mn.appendChild(hr)}}yn[vn].helper=Ht(yn[vn],Mn),yn[vn].cache={},this.fonts.push(yn[vn])}Cn===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function zt(gn){if(gn){this.chars||(this.chars=[]);var Mn,yn=gn.length,vn,On=this.chars.length,Cn;for(Mn=0;Mn<yn;Mn+=1){for(vn=0,Cn=!1;vn<On;)this.chars[vn].style===gn[Mn].style&&this.chars[vn].fFamily===gn[Mn].fFamily&&this.chars[vn].ch===gn[Mn].ch&&(Cn=!0),vn+=1;Cn||(this.chars.push(gn[Mn]),On+=1)}}}function Kt(gn,Mn,yn){for(var vn=0,On=this.chars.length;vn<On;){if(this.chars[vn].ch===gn&&this.chars[vn].style===Mn&&this.chars[vn].fFamily===yn)return this.chars[vn];vn+=1}return(typeof gn=="string"&&gn.charCodeAt(0)!==13||!gn)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",gn,Mn,yn)),g}function en(gn,Mn,yn){var vn=this.getFontByName(Mn),On=gn;if(!vn.cache[On]){var Cn=vn.helper;if(gn===" "){var Vn=Cn.measureText("|"+gn+"|"),Qn=Cn.measureText("||");vn.cache[On]=(Vn-Qn)/100}else vn.cache[On]=Cn.measureText(gn)/100}return vn.cache[On]*yn}function tn(gn){for(var Mn=0,yn=this.fonts.length;Mn<yn;){if(this.fonts[Mn].fName===gn)return this.fonts[Mn];Mn+=1}return this.fonts[0]}function on(gn){var Mn=0,yn=gn.charCodeAt(0);if(yn>=55296&&yn<=56319){var vn=gn.charCodeAt(1);vn>=56320&&vn<=57343&&(Mn=(yn-55296)*1024+vn-56320+65536)}return Mn}function an(gn,Mn){var yn=gn.toString(16)+Mn.toString(16);return Rt.indexOf(yn)!==-1}function un(gn){return gn===St}function dn(gn){return gn===ft}function Sn(gn){var Mn=on(gn);return Mn>=kt&&Mn<=Tt}function mn(gn){return Sn(gn.substr(0,2))&&Sn(gn.substr(2,2))}function bn(gn){return et.indexOf(gn)!==-1}function En(gn,Mn){var yn=on(gn.substr(Mn,2));if(yn!==ot)return!1;var vn=0;for(Mn+=2;vn<5;){if(yn=on(gn.substr(Mn,2)),yn<ct||yn>dt)return!1;vn+=1,Mn+=2}return on(gn.substr(Mn,2))===ut}function kn(){this.isLoaded=!0}var Pn=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Pn.isModifier=an,Pn.isZeroWidthJoiner=un,Pn.isFlagEmoji=mn,Pn.isRegionalCode=Sn,Pn.isCombinedCharacter=bn,Pn.isRegionalFlag=En,Pn.isVariationSelector=dn,Pn.BLACK_FLAG_CODE_POINT=ot;var Ln={addChars:zt,addFonts:Yt,getCharData:Kt,getFontByName:tn,measureText:en,checkLoadedFonts:Bt,setIsLoaded:kn};return Pn.prototype=Ln,Pn}();function SlotManager(it){this.animationData=it}SlotManager.prototype.getProp=function(it){return this.animationData.slots&&this.animationData.slots[it.sid]?Object.assign(it,this.animationData.slots[it.sid].p):it};function slotFactory(it){return new SlotManager(it)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(g){this.renderableComponents.indexOf(g)===-1&&this.renderableComponents.push(g)},removeRenderableComponent:function(g){this.renderableComponents.indexOf(g)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(g),1)},prepareRenderableFrame:function(g){this.checkLayerLimits(g)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(g){this.data.ip-this.data.st<=g&&this.data.op-this.data.st>g?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var g,et=this.renderableComponents.length;for(g=0;g<et;g+=1)this.renderableComponents[g].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var it={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(g){return it[g]||""}}();function SliderEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function AngleEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function ColorEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function PointEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function LayerIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function MaskIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function CheckboxEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function NoValueEffect(){this.p={}}function EffectsManager(it,g){var et=it.ef||[];this.effectElements=[];var ot,ut=et.length,ct;for(ot=0;ot<ut;ot+=1)ct=new GroupEffect(et[ot],g),this.effectElements.push(ct)}function GroupEffect(it,g){this.init(it,g)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(it,g){this.data=it,this.effectElements=[],this.initDynamicPropertyContainer(g);var et,ot=this.data.ef.length,ut,ct=this.data.ef;for(et=0;et<ot;et+=1){switch(ut=null,ct[et].ty){case 0:ut=new SliderEffect(ct[et],g,this);break;case 1:ut=new AngleEffect(ct[et],g,this);break;case 2:ut=new ColorEffect(ct[et],g,this);break;case 3:ut=new PointEffect(ct[et],g,this);break;case 4:case 7:ut=new CheckboxEffect(ct[et],g,this);break;case 10:ut=new LayerIndexEffect(ct[et],g,this);break;case 11:ut=new MaskIndexEffect(ct[et],g,this);break;case 5:ut=new EffectsManager(ct[et],g);break;default:ut=new NoValueEffect(ct[et]);break}ut&&this.effectElements.push(ut)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var g=0,et=this.data.masksProperties.length;g<et;){if(this.data.masksProperties[g].mode!=="n"&&this.data.masksProperties[g].cl!==!1)return!0;g+=1}return!1},initExpressions:function(){var g=getExpressionInterfaces();if(g){var et=g("layer"),ot=g("effects"),ut=g("shape"),ct=g("text"),dt=g("comp");this.layerInterface=et(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ft=ot.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ft),this.data.ty===0||this.data.xt?this.compInterface=dt(this):this.data.ty===4?(this.layerInterface.shapeInterface=ut(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ct(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var g=getBlendMode(this.data.bm),et=this.baseElement||this.layerElement;et.style["mix-blend-mode"]=g},initBaseData:function(g,et,ot){this.globalData=et,this.comp=ot,this.data=g,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(g,et){var ot,ut=this.dynamicProperties.length;for(ot=0;ot<ut;ot+=1)(et||this._isParent&&this.dynamicProperties[ot].propType==="transform")&&(this.dynamicProperties[ot].getValue(),this.dynamicProperties[ot]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&this.dynamicProperties.push(g)}};function FootageElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.footageData=g.imageLoader.getAsset(this.assetData),this.initBaseData(it,g,et)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var it=getExpressionInterfaces();if(it){var g=it("footage");this.layerInterface=g(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.initBaseData(it,g,et),this._isPlaying=!1,this._canPlay=!1;var ot=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ot),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,it.au&&it.au.lv?it.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(it){if(this.prepareRenderableFrame(it,!0),this.prepareProperties(it,!0),this.tm._placeholder)this._currentTime=it/this.data.sr;else{var g=this.tm.v;this._currentTime=g}this._volume=this.lv.v[0];var et=this._volume*this._volumeMultiplier;this._previousVolume!==et&&(this._previousVolume=et,this.audio.volume(et))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(it){this.audio.rate(it)},AudioElement.prototype.volume=function(it){this._volumeMultiplier=it,this._previousVolume=it*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(it){var g,et=this.layers.length,ot;for(this.completeLayers=!0,g=et-1;g>=0;g-=1)this.elements[g]||(ot=this.layers[g],ot.ip-ot.st<=it-this.layers[g].st&&ot.op-ot.st>it-this.layers[g].st&&this.buildItem(g)),this.completeLayers=this.elements[g]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(it){switch(it.ty){case 2:return this.createImage(it);case 0:return this.createComp(it);case 1:return this.createSolid(it);case 3:return this.createNull(it);case 4:return this.createShape(it);case 5:return this.createText(it);case 6:return this.createAudio(it);case 13:return this.createCamera(it);case 15:return this.createFootage(it);default:return this.createNull(it)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(it){return new AudioElement(it,this.globalData,this)},BaseRenderer.prototype.createFootage=function(it){return new FootageElement(it,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.buildItem(it);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(it){this.completeLayers=!1;var g,et=it.length,ot,ut=this.layers.length;for(g=0;g<et;g+=1)for(ot=0;ot<ut;){if(this.layers[ot].id===it[g].id){this.layers[ot]=it[g];break}ot+=1}},BaseRenderer.prototype.setProjectInterface=function(it){this.globalData.projectInterface=it},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(it,g,et){for(var ot=this.elements,ut=this.layers,ct=0,dt=ut.length;ct<dt;)ut[ct].ind==g&&(!ot[ct]||ot[ct]===!0?(this.buildItem(ct),this.addPendingElement(it)):(et.push(ot[ct]),ot[ct].setAsParent(),ut[ct].parent!==void 0?this.buildElementParenting(it,ut[ct].parent,et):it.setHierarchy(et))),ct+=1},BaseRenderer.prototype.addPendingElement=function(it){this.pendingElements.push(it)},BaseRenderer.prototype.searchExtraCompositions=function(it){var g,et=it.length;for(g=0;g<et;g+=1)if(it[g].xt){var ot=this.createComp(it[g]);ot.initExpressions(),this.globalData.projectInterface.registerComposition(ot)}},BaseRenderer.prototype.getElementById=function(it){var g,et=this.elements.length;for(g=0;g<et;g+=1)if(this.elements[g].data.ind===it)return this.elements[g];return null},BaseRenderer.prototype.getElementByPath=function(it){var g=it.shift(),et;if(typeof g=="number")et=this.elements[g];else{var ot,ut=this.elements.length;for(ot=0;ot<ut;ot+=1)if(this.elements[ot].data.nm===g){et=this.elements[ot];break}}return it.length===0?et:et.getElementByPath(it)},BaseRenderer.prototype.setupGlobalData=function(it,g){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(it),this.globalData.fontManager.addChars(it.chars),this.globalData.fontManager.addFonts(it.fonts,g),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=it.fr,this.globalData.nm=it.nm,this.globalData.compSize={w:it.w,h:it.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var g=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:g,localMat:g,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var g,et=this.finalTransform.mat,ot=0,ut=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ot<ut;){if(this.hierarchy[ot].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ot+=1}if(this.finalTransform._matMdf)for(g=this.finalTransform.mProp.v.props,et.cloneFromProps(g),ot=0;ot<ut;ot+=1)et.multiply(this.hierarchy[ot].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var g=0,et=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;g<et;)this.localTransforms[g]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[g]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),g+=1;if(this.finalTransform._localMatMdf){var ot=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ot),g=1;g<et;g+=1){var ut=this.localTransforms[g].matrix;ot.multiply(ut)}ot.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ct=this.finalTransform.localOpacity;for(g=0;g<et;g+=1)ct*=this.localTransforms[g].opacity*.01;this.finalTransform.localOpacity=ct}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var g=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(g.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var et=0,ot=g.length;for(et=0;et<ot;et+=1)this.localTransforms.push(g[et])}}},globalToLocal:function(g){var et=[];et.push(this.finalTransform);for(var ot=!0,ut=this.comp;ot;)ut.finalTransform?(ut.data.hasMask&&et.splice(0,0,ut.finalTransform),ut=ut.comp):ot=!1;var ct,dt=et.length,ft;for(ct=0;ct<dt;ct+=1)ft=et[ct].mat.applyToPointArray(0,0,0),g=[g[0]-ft[0],g[1]-ft[1],0];return g},mHelper:new Matrix};function MaskElement(it,g,et){this.data=it,this.element=g,this.globalData=et,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ot=this.globalData.defs,ut,ct=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ct),this.solidPath="";var dt,ft=this.masksProperties,St=0,kt=[],Tt,Rt,jt=createElementID(),Ft,Bt,Ht,Yt,zt="clipPath",Kt="clip-path";for(ut=0;ut<ct;ut+=1)if((ft[ut].mode!=="a"&&ft[ut].mode!=="n"||ft[ut].inv||ft[ut].o.k!==100||ft[ut].o.x)&&(zt="mask",Kt="mask"),(ft[ut].mode==="s"||ft[ut].mode==="i")&&St===0?(Ft=createNS("rect"),Ft.setAttribute("fill","#ffffff"),Ft.setAttribute("width",this.element.comp.data.w||0),Ft.setAttribute("height",this.element.comp.data.h||0),kt.push(Ft)):Ft=null,dt=createNS("path"),ft[ut].mode==="n")this.viewData[ut]={op:PropertyFactory.getProp(this.element,ft[ut].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ut],3),elem:dt,lastPath:""},ot.appendChild(dt);else{St+=1,dt.setAttribute("fill",ft[ut].mode==="s"?"#000000":"#ffffff"),dt.setAttribute("clip-rule","nonzero");var en;if(ft[ut].x.k!==0?(zt="mask",Kt="mask",Yt=PropertyFactory.getProp(this.element,ft[ut].x,0,null,this.element),en=createElementID(),Bt=createNS("filter"),Bt.setAttribute("id",en),Ht=createNS("feMorphology"),Ht.setAttribute("operator","erode"),Ht.setAttribute("in","SourceGraphic"),Ht.setAttribute("radius","0"),Bt.appendChild(Ht),ot.appendChild(Bt),dt.setAttribute("stroke",ft[ut].mode==="s"?"#000000":"#ffffff")):(Ht=null,Yt=null),this.storedData[ut]={elem:dt,x:Yt,expan:Ht,lastPath:"",lastOperator:"",filterId:en,lastRadius:0},ft[ut].mode==="i"){Rt=kt.length;var tn=createNS("g");for(Tt=0;Tt<Rt;Tt+=1)tn.appendChild(kt[Tt]);var on=createNS("mask");on.setAttribute("mask-type","alpha"),on.setAttribute("id",jt+"_"+St),on.appendChild(dt),ot.appendChild(on),tn.setAttribute("mask","url("+getLocationHref()+"#"+jt+"_"+St+")"),kt.length=0,kt.push(tn)}else kt.push(dt);ft[ut].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ut]={elem:dt,lastPath:"",op:PropertyFactory.getProp(this.element,ft[ut].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ut],3),invRect:Ft},this.viewData[ut].prop.k||this.drawPath(ft[ut],this.viewData[ut].prop.v,this.viewData[ut])}for(this.maskElement=createNS(zt),ct=kt.length,ut=0;ut<ct;ut+=1)this.maskElement.appendChild(kt[ut]);St>0&&(this.maskElement.setAttribute("id",jt),this.element.maskedElement.setAttribute(Kt,"url("+getLocationHref()+"#"+jt+")"),ot.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(it){return this.viewData[it].prop},MaskElement.prototype.renderFrame=function(it){var g=this.element.finalTransform.mat,et,ot=this.masksProperties.length;for(et=0;et<ot;et+=1)if((this.viewData[et].prop._mdf||it)&&this.drawPath(this.masksProperties[et],this.viewData[et].prop.v,this.viewData[et]),(this.viewData[et].op._mdf||it)&&this.viewData[et].elem.setAttribute("fill-opacity",this.viewData[et].op.v),this.masksProperties[et].mode!=="n"&&(this.viewData[et].invRect&&(this.element.finalTransform.mProp._mdf||it)&&this.viewData[et].invRect.setAttribute("transform",g.getInverseMatrix().to2dCSS()),this.storedData[et].x&&(this.storedData[et].x._mdf||it))){var ut=this.storedData[et].expan;this.storedData[et].x.v<0?(this.storedData[et].lastOperator!=="erode"&&(this.storedData[et].lastOperator="erode",this.storedData[et].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[et].filterId+")")),ut.setAttribute("radius",-this.storedData[et].x.v)):(this.storedData[et].lastOperator!=="dilate"&&(this.storedData[et].lastOperator="dilate",this.storedData[et].elem.setAttribute("filter",null)),this.storedData[et].elem.setAttribute("stroke-width",this.storedData[et].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var it="M0,0 ";return it+=" h"+this.globalData.compSize.w,it+=" v"+this.globalData.compSize.h,it+=" h-"+this.globalData.compSize.w,it+=" v-"+this.globalData.compSize.h+" ",it},MaskElement.prototype.drawPath=function(it,g,et){var ot=" M"+g.v[0][0]+","+g.v[0][1],ut,ct;for(ct=g._length,ut=1;ut<ct;ut+=1)ot+=" C"+g.o[ut-1][0]+","+g.o[ut-1][1]+" "+g.i[ut][0]+","+g.i[ut][1]+" "+g.v[ut][0]+","+g.v[ut][1];if(g.c&&ct>1&&(ot+=" C"+g.o[ut-1][0]+","+g.o[ut-1][1]+" "+g.i[0][0]+","+g.i[0][1]+" "+g.v[0][0]+","+g.v[0][1]),et.lastPath!==ot){var dt="";et.elem&&(g.c&&(dt=it.inv?this.solidPath+ot:ot),et.elem.setAttribute("d",dt)),et.lastPath=ot}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var it={};it.createFilter=g,it.createAlphaToLuminanceFilter=et;function g(ot,ut){var ct=createNS("filter");return ct.setAttribute("id",ot),ut!==!0&&(ct.setAttribute("filterUnits","objectBoundingBox"),ct.setAttribute("x","0%"),ct.setAttribute("y","0%"),ct.setAttribute("width","100%"),ct.setAttribute("height","100%")),ct}function et(){var ot=createNS("feColorMatrix");return ot.setAttribute("type","matrix"),ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ot}return it}(),featureSupport=function(){var it={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(it.maskType=!1),/firefox/i.test(navigator.userAgent)&&(it.svgLumaHidden=!1),it}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(it){var g,et="SourceGraphic",ot=it.data.ef?it.data.ef.length:0,ut=createElementID(),ct=filtersFactory.createFilter(ut,!0),dt=0;this.filters=[];var ft;for(g=0;g<ot;g+=1){ft=null;var St=it.data.ef[g].ty;if(registeredEffects$1[St]){var kt=registeredEffects$1[St].effect;ft=new kt(ct,it.effectsManager.effectElements[g],it,idPrefix+dt,et),et=idPrefix+dt,registeredEffects$1[St].countsAsEffect&&(dt+=1)}ft&&this.filters.push(ft)}dt&&(it.globalData.defs.appendChild(ct),it.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ut+")")),this.filters.length&&it.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},SVGEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect$1(it,g,et){registeredEffects$1[it]={effect:g,countsAsEffect:et}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var g=null;if(this.data.td){this.matteMasks={};var et=createNS("g");et.setAttribute("id",this.layerId),et.appendChild(this.layerElement),g=et,this.globalData.defs.appendChild(et)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),g=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ot=createNS("clipPath"),ut=createNS("path");ut.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ct=createElementID();if(ot.setAttribute("id",ct),ot.appendChild(ut),this.globalData.defs.appendChild(ot),this.checkMasks()){var dt=createNS("g");dt.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),dt.appendChild(this.layerElement),this.transformedElement=dt,g?g.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(g){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[g]){var et=this.layerId+"_"+g,ot,ut,ct,dt;if(g===1||g===3){var ft=createNS("mask");ft.setAttribute("id",et),ft.setAttribute("mask-type",g===3?"luminance":"alpha"),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ct),this.globalData.defs.appendChild(ft),!featureSupport.maskType&&g===1&&(ft.setAttribute("mask-type","luminance"),ot=createElementID(),ut=filtersFactory.createFilter(ot),this.globalData.defs.appendChild(ut),ut.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),dt.appendChild(ct),ft.appendChild(dt),dt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"))}else if(g===2){var St=createNS("mask");St.setAttribute("id",et),St.setAttribute("mask-type","alpha");var kt=createNS("g");St.appendChild(kt),ot=createElementID(),ut=filtersFactory.createFilter(ot);var Tt=createNS("feComponentTransfer");Tt.setAttribute("in","SourceGraphic"),ut.appendChild(Tt);var Rt=createNS("feFuncA");Rt.setAttribute("type","table"),Rt.setAttribute("tableValues","1.0 0.0"),Tt.appendChild(Rt),this.globalData.defs.appendChild(ut);var jt=createNS("rect");jt.setAttribute("width",this.comp.data.w),jt.setAttribute("height",this.comp.data.h),jt.setAttribute("x","0"),jt.setAttribute("y","0"),jt.setAttribute("fill","#ffffff"),jt.setAttribute("opacity","0"),kt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"),kt.appendChild(jt),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),kt.appendChild(ct),featureSupport.maskType||(St.setAttribute("mask-type","luminance"),ut.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),kt.appendChild(jt),dt.appendChild(this.layerElement),kt.appendChild(dt)),this.globalData.defs.appendChild(St)}this.matteMasks[g]=et}return this.matteMasks[g]},setMatte:function(g){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+g+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(g){this.hierarchy=g},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var it={initElement:function(et,ot,ut){this.initFrame(),this.initBaseData(et,ot,ut),this.initTransform(et,ot,ut),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var et=this.baseElement||this.layerElement;et.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var et=this.baseElement||this.layerElement;et.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(it)],RenderableDOMElement)})();function IImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.assetData&&this.assetData.sid&&(this.assetData=g.slotManager.getProp(this.assetData)),this.initElement(it,g,et),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(it,g){this.elem=it,this.pos=g}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(g){var et,ot=this.shapeModifiers.length;for(et=0;et<ot;et+=1)this.shapeModifiers[et].addShape(g)},isShapeInAnimatedModifiers:function(g){for(var et=0,ot=this.shapeModifiers.length;et<ot;)if(this.shapeModifiers[et].isAnimatedWithShape(g))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var g,et=this.shapes.length;for(g=0;g<et;g+=1)this.shapes[g].sh.reset();et=this.shapeModifiers.length;var ot;for(g=et-1;g>=0&&(ot=this.shapeModifiers[g].processShapes(this._isFirstFrame),!ot);g-=1);}},searchProcessedElement:function(g){for(var et=this.processedElements,ot=0,ut=et.length;ot<ut;){if(et[ot].elem===g)return et[ot].pos;ot+=1}return 0},addProcessedElement:function(g,et){for(var ot=this.processedElements,ut=ot.length;ut;)if(ut-=1,ot[ut].elem===g){ot[ut].pos=et;return}ot.push(new ProcessedElement(g,et))},prepareFrame:function(g){this.prepareRenderableFrame(g),this.prepareProperties(g,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(it,g,et){this.caches=[],this.styles=[],this.transformers=it,this.lStr="",this.sh=et,this.lvl=g,this._isAnimated=!!et.k;for(var ot=0,ut=it.length;ot<ut;){if(it[ot].mProps.dynamicProperties.length){this._isAnimated=!0;break}ot+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(it,g){this.data=it,this.type=it.ty,this.d="",this.lvl=g,this._mdf=!1,this.closed=it.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(it,g,et,ot){this.elem=it,this.frameId=-1,this.dataProps=createSizedArray(g.length),this.renderer=et,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",g.length?g.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ot);var ut,ct=g.length||0,dt;for(ut=0;ut<ct;ut+=1)dt=PropertyFactory.getProp(it,g[ut].v,0,0,this),this.k=dt.k||this.k,this.dataProps[ut]={n:g[ut].n,p:dt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(it){if(!(this.elem.globalData.frameId===this.frameId&&!it)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||it,this._mdf)){var g=0,et=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),g=0;g<et;g+=1)this.dataProps[g].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[g].p.v:this.dashArray[g]=this.dataProps[g].p.v:this.dashoffset[0]=this.dataProps[g].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.style=et}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(it,g,et){this.data=g,this.c=createTypedArray("uint8c",g.p*4);var ot=g.k.k[0].s?g.k.k[0].s.length-g.p*4:g.k.k.length-g.p*4;this.o=createTypedArray("float32",ot),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ot,this.initDynamicPropertyContainer(et),this.prop=PropertyFactory.getProp(it,g.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(it,g){for(var et=0,ot=this.o.length/2,ut;et<ot;){if(ut=Math.abs(it[et*4]-it[g*4+et*2]),ut>.01)return!1;et+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var it=0,g=this.data.k.k.length;it<g;){if(!this.comparePoints(this.data.k.k[it].s,this.data.p))return!1;it+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(it){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||it){var g,et=this.data.p*4,ot,ut;for(g=0;g<et;g+=1)ot=g%4===0?100:255,ut=Math.round(this.prop.v[g]*ot),this.c[g]!==ut&&(this.c[g]=ut,this._cmdf=!it);if(this.o.length)for(et=this.prop.v.length,g=this.data.p*4;g<et;g+=1)ot=g%2===0?100:1,ut=g%2===0?Math.round(this.prop.v[g]*100):this.prop.v[g],this.o[g-this.data.p*4]!==ut&&(this.o[g-this.data.p*4]=ut,this._omdf=!it);this._mdf=!it}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.initGradientData(it,g,et)}SVGGradientFillStyleData.prototype.initGradientData=function(it,g,et){this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.s=PropertyFactory.getProp(it,g.s,1,null,this),this.e=PropertyFactory.getProp(it,g.e,1,null,this),this.h=PropertyFactory.getProp(it,g.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(it,g.a||{k:0},0,degToRads,this),this.g=new GradientProperty(it,g.g,this),this.style=et,this.stops=[],this.setGradientData(et.pElem,g),this.setGradientOpacity(g,et),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(it,g){var et=createElementID(),ot=createNS(g.t===1?"linearGradient":"radialGradient");ot.setAttribute("id",et),ot.setAttribute("spreadMethod","pad"),ot.setAttribute("gradientUnits","userSpaceOnUse");var ut=[],ct,dt,ft;for(ft=g.g.p*4,dt=0;dt<ft;dt+=4)ct=createNS("stop"),ot.appendChild(ct),ut.push(ct);it.setAttribute(g.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+et+")"),this.gf=ot,this.cst=ut},SVGGradientFillStyleData.prototype.setGradientOpacity=function(it,g){if(this.g._hasOpacity&&!this.g._collapsable){var et,ot,ut,ct=createNS("mask"),dt=createNS("path");ct.appendChild(dt);var ft=createElementID(),St=createElementID();ct.setAttribute("id",St);var kt=createNS(it.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",ft),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse"),ut=it.g.k.k[0].s?it.g.k.k[0].s.length:it.g.k.k.length;var Tt=this.stops;for(ot=it.g.p*4;ot<ut;ot+=2)et=createNS("stop"),et.setAttribute("stop-color","rgb(255,255,255)"),kt.appendChild(et),Tt.push(et);dt.setAttribute(it.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ft+")"),it.ty==="gs"&&(dt.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),dt.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),it.lj===1&&dt.setAttribute("stroke-miterlimit",it.ml)),this.of=kt,this.ms=ct,this.ost=Tt,this.maskId=St,g.msElem=dt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.initGradientData(it,g,et),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(it,g,et){this.transform={mProps:it,op:g,container:et},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(g,et,ot,ut){if(et===0)return"";var ct=g.o,dt=g.i,ft=g.v,St,kt=" M"+ut.applyToPointStringified(ft[0][0],ft[0][1]);for(St=1;St<et;St+=1)kt+=" C"+ut.applyToPointStringified(ct[St-1][0],ct[St-1][1])+" "+ut.applyToPointStringified(dt[St][0],dt[St][1])+" "+ut.applyToPointStringified(ft[St][0],ft[St][1]);return ot&&et&&(kt+=" C"+ut.applyToPointStringified(ct[St-1][0],ct[St-1][1])+" "+ut.applyToPointStringified(dt[0][0],dt[0][1])+" "+ut.applyToPointStringified(ft[0][0],ft[0][1]),kt+="z"),kt},SVGElementsRenderer=function(){var it=new Matrix,g=new Matrix,et={createRenderFunction:ot};function ot(Rt){switch(Rt.ty){case"fl":return ft;case"gf":return kt;case"gs":return St;case"st":return Tt;case"sh":case"el":case"rc":case"sr":return dt;case"tr":return ut;case"no":return ct;default:return null}}function ut(Rt,jt,Ft){(Ft||jt.transform.op._mdf)&&jt.transform.container.setAttribute("opacity",jt.transform.op.v),(Ft||jt.transform.mProps._mdf)&&jt.transform.container.setAttribute("transform",jt.transform.mProps.v.to2dCSS())}function ct(){}function dt(Rt,jt,Ft){var Bt,Ht,Yt,zt,Kt,en,tn=jt.styles.length,on=jt.lvl,an,un,dn,Sn;for(en=0;en<tn;en+=1){if(zt=jt.sh._mdf||Ft,jt.styles[en].lvl<on){for(un=g.reset(),dn=on-jt.styles[en].lvl,Sn=jt.transformers.length-1;!zt&&dn>0;)zt=jt.transformers[Sn].mProps._mdf||zt,dn-=1,Sn-=1;if(zt)for(dn=on-jt.styles[en].lvl,Sn=jt.transformers.length-1;dn>0;)un.multiply(jt.transformers[Sn].mProps.v),dn-=1,Sn-=1}else un=it;if(an=jt.sh.paths,Ht=an._length,zt){for(Yt="",Bt=0;Bt<Ht;Bt+=1)Kt=an.shapes[Bt],Kt&&Kt._length&&(Yt+=buildShapeString(Kt,Kt._length,Kt.c,un));jt.caches[en]=Yt}else Yt=jt.caches[en];jt.styles[en].d+=Rt.hd===!0?"":Yt,jt.styles[en]._mdf=zt||jt.styles[en]._mdf}}function ft(Rt,jt,Ft){var Bt=jt.style;(jt.c._mdf||Ft)&&Bt.pElem.setAttribute("fill","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||Ft)&&Bt.pElem.setAttribute("fill-opacity",jt.o.v)}function St(Rt,jt,Ft){kt(Rt,jt,Ft),Tt(Rt,jt,Ft)}function kt(Rt,jt,Ft){var Bt=jt.gf,Ht=jt.g._hasOpacity,Yt=jt.s.v,zt=jt.e.v;if(jt.o._mdf||Ft){var Kt=Rt.ty==="gf"?"fill-opacity":"stroke-opacity";jt.style.pElem.setAttribute(Kt,jt.o.v)}if(jt.s._mdf||Ft){var en=Rt.t===1?"x1":"cx",tn=en==="x1"?"y1":"cy";Bt.setAttribute(en,Yt[0]),Bt.setAttribute(tn,Yt[1]),Ht&&!jt.g._collapsable&&(jt.of.setAttribute(en,Yt[0]),jt.of.setAttribute(tn,Yt[1]))}var on,an,un,dn;if(jt.g._cmdf||Ft){on=jt.cst;var Sn=jt.g.c;for(un=on.length,an=0;an<un;an+=1)dn=on[an],dn.setAttribute("offset",Sn[an*4]+"%"),dn.setAttribute("stop-color","rgb("+Sn[an*4+1]+","+Sn[an*4+2]+","+Sn[an*4+3]+")")}if(Ht&&(jt.g._omdf||Ft)){var mn=jt.g.o;for(jt.g._collapsable?on=jt.cst:on=jt.ost,un=on.length,an=0;an<un;an+=1)dn=on[an],jt.g._collapsable||dn.setAttribute("offset",mn[an*2]+"%"),dn.setAttribute("stop-opacity",mn[an*2+1])}if(Rt.t===1)(jt.e._mdf||Ft)&&(Bt.setAttribute("x2",zt[0]),Bt.setAttribute("y2",zt[1]),Ht&&!jt.g._collapsable&&(jt.of.setAttribute("x2",zt[0]),jt.of.setAttribute("y2",zt[1])));else{var bn;if((jt.s._mdf||jt.e._mdf||Ft)&&(bn=Math.sqrt(Math.pow(Yt[0]-zt[0],2)+Math.pow(Yt[1]-zt[1],2)),Bt.setAttribute("r",bn),Ht&&!jt.g._collapsable&&jt.of.setAttribute("r",bn)),jt.e._mdf||jt.h._mdf||jt.a._mdf||Ft){bn||(bn=Math.sqrt(Math.pow(Yt[0]-zt[0],2)+Math.pow(Yt[1]-zt[1],2)));var En=Math.atan2(zt[1]-Yt[1],zt[0]-Yt[0]),kn=jt.h.v;kn>=1?kn=.99:kn<=-1&&(kn=-.99);var Pn=bn*kn,Ln=Math.cos(En+jt.a.v)*Pn+Yt[0],gn=Math.sin(En+jt.a.v)*Pn+Yt[1];Bt.setAttribute("fx",Ln),Bt.setAttribute("fy",gn),Ht&&!jt.g._collapsable&&(jt.of.setAttribute("fx",Ln),jt.of.setAttribute("fy",gn))}}}function Tt(Rt,jt,Ft){var Bt=jt.style,Ht=jt.d;Ht&&(Ht._mdf||Ft)&&Ht.dashStr&&(Bt.pElem.setAttribute("stroke-dasharray",Ht.dashStr),Bt.pElem.setAttribute("stroke-dashoffset",Ht.dashoffset[0])),jt.c&&(jt.c._mdf||Ft)&&Bt.pElem.setAttribute("stroke","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||Ft)&&Bt.pElem.setAttribute("stroke-opacity",jt.o.v),(jt.w._mdf||Ft)&&(Bt.pElem.setAttribute("stroke-width",jt.w.v),Bt.msElem&&Bt.msElem.setAttribute("stroke-width",jt.w.v))}return et}();function SVGShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(it,g,et),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var it,g=this.shapes.length,et,ot,ut=this.stylesList.length,ct,dt=[],ft=!1;for(ot=0;ot<ut;ot+=1){for(ct=this.stylesList[ot],ft=!1,dt.length=0,it=0;it<g;it+=1)et=this.shapes[it],et.styles.indexOf(ct)!==-1&&(dt.push(et),ft=et._isAnimated||ft);dt.length>1&&ft&&this.setShapesAsAnimated(dt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(it,g){var et,ot=new SVGStyleData(it,g),ut=ot.pElem;if(it.ty==="st")et=new SVGStrokeStyleData(this,it,ot);else if(it.ty==="fl")et=new SVGFillStyleData(this,it,ot);else if(it.ty==="gf"||it.ty==="gs"){var ct=it.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;et=new ct(this,it,ot),this.globalData.defs.appendChild(et.gf),et.maskId&&(this.globalData.defs.appendChild(et.ms),this.globalData.defs.appendChild(et.of),ut.setAttribute("mask","url("+getLocationHref()+"#"+et.maskId+")"))}else it.ty==="no"&&(et=new SVGNoStyleData(this,it,ot));return(it.ty==="st"||it.ty==="gs")&&(ut.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),ut.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),ut.setAttribute("fill-opacity","0"),it.lj===1&&ut.setAttribute("stroke-miterlimit",it.ml)),it.r===2&&ut.setAttribute("fill-rule","evenodd"),it.ln&&ut.setAttribute("id",it.ln),it.cl&&ut.setAttribute("class",it.cl),it.bm&&(ut.style["mix-blend-mode"]=getBlendMode(it.bm)),this.stylesList.push(ot),this.addToAnimatedContents(it,et),et},SVGShapeElement.prototype.createGroupElement=function(it){var g=new ShapeGroupData;return it.ln&&g.gr.setAttribute("id",it.ln),it.cl&&g.gr.setAttribute("class",it.cl),it.bm&&(g.gr.style["mix-blend-mode"]=getBlendMode(it.bm)),g},SVGShapeElement.prototype.createTransformElement=function(it,g){var et=TransformPropertyFactory.getTransformProperty(this,it,this),ot=new SVGTransformData(et,et.o,g);return this.addToAnimatedContents(it,ot),ot},SVGShapeElement.prototype.createShapeElement=function(it,g,et){var ot=4;it.ty==="rc"?ot=5:it.ty==="el"?ot=6:it.ty==="sr"&&(ot=7);var ut=ShapePropertyFactory.getShapeProp(this,it,ot,this),ct=new SVGShapeData(g,et,ut);return this.shapes.push(ct),this.addShapeToModifiers(ct),this.addToAnimatedContents(it,ct),ct},SVGShapeElement.prototype.addToAnimatedContents=function(it,g){for(var et=0,ot=this.animatedContents.length;et<ot;){if(this.animatedContents[et].element===g)return;et+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(it),element:g,data:it})},SVGShapeElement.prototype.setElementStyles=function(it){var g=it.styles,et,ot=this.stylesList.length;for(et=0;et<ot;et+=1)this.stylesList[et].closed||g.push(this.stylesList[et])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(it,g,et,ot,ut,ct,dt){var ft=[].concat(ct),St,kt=it.length-1,Tt,Rt,jt=[],Ft=[],Bt,Ht,Yt;for(St=kt;St>=0;St-=1){if(Yt=this.searchProcessedElement(it[St]),Yt?g[St]=et[Yt-1]:it[St]._render=dt,it[St].ty==="fl"||it[St].ty==="st"||it[St].ty==="gf"||it[St].ty==="gs"||it[St].ty==="no")Yt?g[St].style.closed=!1:g[St]=this.createStyleElement(it[St],ut),it[St]._render&&g[St].style.pElem.parentNode!==ot&&ot.appendChild(g[St].style.pElem),jt.push(g[St].style);else if(it[St].ty==="gr"){if(!Yt)g[St]=this.createGroupElement(it[St]);else for(Rt=g[St].it.length,Tt=0;Tt<Rt;Tt+=1)g[St].prevViewData[Tt]=g[St].it[Tt];this.searchShapes(it[St].it,g[St].it,g[St].prevViewData,g[St].gr,ut+1,ft,dt),it[St]._render&&g[St].gr.parentNode!==ot&&ot.appendChild(g[St].gr)}else it[St].ty==="tr"?(Yt||(g[St]=this.createTransformElement(it[St],ot)),Bt=g[St].transform,ft.push(Bt)):it[St].ty==="sh"||it[St].ty==="rc"||it[St].ty==="el"||it[St].ty==="sr"?(Yt||(g[St]=this.createShapeElement(it[St],ft,ut)),this.setElementStyles(g[St])):it[St].ty==="tm"||it[St].ty==="rd"||it[St].ty==="ms"||it[St].ty==="pb"||it[St].ty==="zz"||it[St].ty==="op"?(Yt?(Ht=g[St],Ht.closed=!1):(Ht=ShapeModifiers.getModifier(it[St].ty),Ht.init(this,it[St]),g[St]=Ht,this.shapeModifiers.push(Ht)),Ft.push(Ht)):it[St].ty==="rp"&&(Yt?(Ht=g[St],Ht.closed=!0):(Ht=ShapeModifiers.getModifier(it[St].ty),g[St]=Ht,Ht.init(this,it,St,g),this.shapeModifiers.push(Ht),dt=!1),Ft.push(Ht));this.addProcessedElement(it[St],St+1)}for(kt=jt.length,St=0;St<kt;St+=1)jt[St].closed=!0;for(kt=Ft.length,St=0;St<kt;St+=1)Ft[St].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].reset();for(this.renderShape(),it=0;it<g;it+=1)(this.stylesList[it]._mdf||this._isFirstFrame)&&(this.stylesList[it].msElem&&(this.stylesList[it].msElem.setAttribute("d",this.stylesList[it].d),this.stylesList[it].d="M0 0"+this.stylesList[it].d),this.stylesList[it].pElem.setAttribute("d",this.stylesList[it].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var it,g=this.animatedContents.length,et;for(it=0;it<g;it+=1)et=this.animatedContents[it],(this._isFirstFrame||et.element._isAnimated)&&et.data!==!0&&et.fn(et.data,et.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(it,g,et,ot,ut,ct){this.o=it,this.sw=g,this.sc=et,this.fc=ot,this.m=ut,this.p=ct,this._mdf={o:!0,sw:!!g,sc:!!et,fc:!!ot,m:!0,p:!0}}LetterProps.prototype.update=function(it,g,et,ot,ut,ct){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var dt=!1;return this.o!==it&&(this.o=it,this._mdf.o=!0,dt=!0),this.sw!==g&&(this.sw=g,this._mdf.sw=!0,dt=!0),this.sc!==et&&(this.sc=et,this._mdf.sc=!0,dt=!0),this.fc!==ot&&(this.fc=ot,this._mdf.fc=!0,dt=!0),this.m!==ut&&(this.m=ut,this._mdf.m=!0,dt=!0),ct.length&&(this.p[0]!==ct[0]||this.p[1]!==ct[1]||this.p[4]!==ct[4]||this.p[5]!==ct[5]||this.p[12]!==ct[12]||this.p[13]!==ct[13])&&(this.p=ct,this._mdf.p=!0,dt=!0),dt};function TextProperty(it,g){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,g.d&&g.d.sid&&(g.d=it.globalData.slotManager.getProp(g.d)),this.data=g,this.elem=it,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(it,g){for(var et in g)Object.prototype.hasOwnProperty.call(g,et)&&(it[et]=g[et]);return it},TextProperty.prototype.setCurrentData=function(it){it.__complete||this.completeTextData(it),this.currentData=it,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(it){this.effectsSequence.push(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(it){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!it)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var g=this.currentData,et=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ot,ut=this.effectsSequence.length,ct=it||this.data.d.k[this.keysIndex].s;for(ot=0;ot<ut;ot+=1)et!==this.keysIndex?ct=this.effectsSequence[ot](ct,ct.t):ct=this.effectsSequence[ot](this.currentData,ct.t);g!==ct&&this.setCurrentData(ct),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var it=this.data.d.k,g=this.elem.comp.renderedFrame,et=0,ot=it.length;et<=ot-1&&!(et===ot-1||it[et+1].t>g);)et+=1;return this.keysIndex!==et&&(this.keysIndex=et),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(it){for(var g=[],et=0,ot=it.length,ut,ct,dt=!1,ft=!1,St="";et<ot;)dt=ft,ft=!1,ut=it.charCodeAt(et),St=it.charAt(et),FontManager.isCombinedCharacter(ut)?dt=!0:ut>=55296&&ut<=56319?FontManager.isRegionalFlag(it,et)?St=it.substr(et,14):(ct=it.charCodeAt(et+1),ct>=56320&&ct<=57343&&(FontManager.isModifier(ut,ct)?(St=it.substr(et,2),dt=!0):FontManager.isFlagEmoji(it.substr(et,4))?St=it.substr(et,4):St=it.substr(et,2))):ut>56319?(ct=it.charCodeAt(et+1),FontManager.isVariationSelector(ut)&&(dt=!0)):FontManager.isZeroWidthJoiner(ut)&&(dt=!0,ft=!0),dt?(g[g.length-1]+=St,dt=!1):g.push(St),et+=St.length;return g},TextProperty.prototype.completeTextData=function(it){it.__complete=!0;var g=this.elem.globalData.fontManager,et=this.data,ot=[],ut,ct,dt,ft=0,St,kt=et.m.g,Tt=0,Rt=0,jt=0,Ft=[],Bt=0,Ht=0,Yt,zt,Kt=g.getFontByName(it.f),en,tn=0,on=getFontProperties(Kt);it.fWeight=on.weight,it.fStyle=on.style,it.finalSize=it.s,it.finalText=this.buildFinalText(it.t),ct=it.finalText.length,it.finalLineHeight=it.lh;var an=it.tr/1e3*it.finalSize,un;if(it.sz)for(var dn=!0,Sn=it.sz[0],mn=it.sz[1],bn,En;dn;){En=this.buildFinalText(it.t),bn=0,Bt=0,ct=En.length,an=it.tr/1e3*it.finalSize;var kn=-1;for(ut=0;ut<ct;ut+=1)un=En[ut].charCodeAt(0),dt=!1,En[ut]===" "?kn=ut:(un===13||un===3)&&(Bt=0,dt=!0,bn+=it.finalLineHeight||it.finalSize*1.2),g.chars?(en=g.getCharData(En[ut],Kt.fStyle,Kt.fFamily),tn=dt?0:en.w*it.finalSize/100):tn=g.measureText(En[ut],it.f,it.finalSize),Bt+tn>Sn&&En[ut]!==" "?(kn===-1?ct+=1:ut=kn,bn+=it.finalLineHeight||it.finalSize*1.2,En.splice(ut,kn===ut?1:0,"\r"),kn=-1,Bt=0):(Bt+=tn,Bt+=an);bn+=Kt.ascent*it.finalSize/100,this.canResize&&it.finalSize>this.minimumFontSize&&mn<bn?(it.finalSize-=1,it.finalLineHeight=it.finalSize*it.lh/it.s):(it.finalText=En,ct=it.finalText.length,dn=!1)}Bt=-an,tn=0;var Pn=0,Ln;for(ut=0;ut<ct;ut+=1)if(dt=!1,Ln=it.finalText[ut],un=Ln.charCodeAt(0),un===13||un===3?(Pn=0,Ft.push(Bt),Ht=Bt>Ht?Bt:Ht,Bt=-2*an,St="",dt=!0,jt+=1):St=Ln,g.chars?(en=g.getCharData(Ln,Kt.fStyle,g.getFontByName(it.f).fFamily),tn=dt?0:en.w*it.finalSize/100):tn=g.measureText(St,it.f,it.finalSize),Ln===" "?Pn+=tn+an:(Bt+=tn+an+Pn,Pn=0),ot.push({l:tn,an:tn,add:Tt,n:dt,anIndexes:[],val:St,line:jt,animatorJustifyOffset:0}),kt==2){if(Tt+=tn,St===""||St===" "||ut===ct-1){for((St===""||St===" ")&&(Tt-=tn);Rt<=ut;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=tn,Rt+=1;ft+=1,Tt=0}}else if(kt==3){if(Tt+=tn,St===""||ut===ct-1){for(St===""&&(Tt-=tn);Rt<=ut;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=tn,Rt+=1;Tt=0,ft+=1}}else ot[ft].ind=ft,ot[ft].extra=0,ft+=1;if(it.l=ot,Ht=Bt>Ht?Bt:Ht,Ft.push(Bt),it.sz)it.boxWidth=it.sz[0],it.justifyOffset=0;else switch(it.boxWidth=Ht,it.j){case 1:it.justifyOffset=-it.boxWidth;break;case 2:it.justifyOffset=-it.boxWidth/2;break;default:it.justifyOffset=0}it.lineWidths=Ft;var gn=et.a,Mn,yn;zt=gn.length;var vn,On,Cn=[];for(Yt=0;Yt<zt;Yt+=1){for(Mn=gn[Yt],Mn.a.sc&&(it.strokeColorAnim=!0),Mn.a.sw&&(it.strokeWidthAnim=!0),(Mn.a.fc||Mn.a.fh||Mn.a.fs||Mn.a.fb)&&(it.fillColorAnim=!0),On=0,vn=Mn.s.b,ut=0;ut<ct;ut+=1)yn=ot[ut],yn.anIndexes[Yt]=On,(vn==1&&yn.val!==""||vn==2&&yn.val!==""&&yn.val!==" "||vn==3&&(yn.n||yn.val==" "||ut==ct-1)||vn==4&&(yn.n||ut==ct-1))&&(Mn.s.rn===1&&Cn.push(On),On+=1);et.a[Yt].s.totalChars=On;var Vn=-1,Qn;if(Mn.s.rn===1)for(ut=0;ut<ct;ut+=1)yn=ot[ut],Vn!=yn.anIndexes[Yt]&&(Vn=yn.anIndexes[Yt],Qn=Cn.splice(Math.floor(Math.random()*Cn.length),1)[0]),yn.anIndexes[Yt]=Qn}it.yOffset=it.finalLineHeight||it.finalSize*1.2,it.ls=it.ls||0,it.ascent=Kt.ascent*it.finalSize/100},TextProperty.prototype.updateDocumentData=function(it,g){g=g===void 0?this.keysIndex:g;var et=this.copyData({},this.data.d.k[g].s);et=this.copyData(et,it),this.data.d.k[g].s=et,this.recalculate(g),this.setCurrentData(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(it){var g=this.data.d.k[it].s;g.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(g)},TextProperty.prototype.canResizeFont=function(it){this.canResize=it,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(it){this.minimumFontSize=Math.floor(it)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var it=Math.max,g=Math.min,et=Math.floor;function ot(ct,dt){this._currentTextLength=-1,this.k=!1,this.data=dt,this.elem=ct,this.comp=ct.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ct),this.s=PropertyFactory.getProp(ct,dt.s||{k:0},0,0,this),"e"in dt?this.e=PropertyFactory.getProp(ct,dt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ct,dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ct,dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ct,dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ct,dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ct,dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ot.prototype={getMult:function(dt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ft=0,St=0,kt=1,Tt=1;this.ne.v>0?ft=this.ne.v/100:St=-this.ne.v/100,this.xe.v>0?kt=1-this.xe.v/100:Tt=1+this.xe.v/100;var Rt=BezierFactory.getBezierEasing(ft,St,kt,Tt).get,jt=0,Ft=this.finalS,Bt=this.finalE,Ht=this.data.sh;if(Ht===2)Bt===Ft?jt=dt>=Bt?1:0:jt=it(0,g(.5/(Bt-Ft)+(dt-Ft)/(Bt-Ft),1)),jt=Rt(jt);else if(Ht===3)Bt===Ft?jt=dt>=Bt?0:1:jt=1-it(0,g(.5/(Bt-Ft)+(dt-Ft)/(Bt-Ft),1)),jt=Rt(jt);else if(Ht===4)Bt===Ft?jt=0:(jt=it(0,g(.5/(Bt-Ft)+(dt-Ft)/(Bt-Ft),1)),jt<.5?jt*=2:jt=1-2*(jt-.5)),jt=Rt(jt);else if(Ht===5){if(Bt===Ft)jt=0;else{var Yt=Bt-Ft;dt=g(it(0,dt+.5-Ft),Bt-Ft);var zt=-Yt/2+dt,Kt=Yt/2;jt=Math.sqrt(1-zt*zt/(Kt*Kt))}jt=Rt(jt)}else Ht===6?(Bt===Ft?jt=0:(dt=g(it(0,dt+.5-Ft),Bt-Ft),jt=(1+Math.cos(Math.PI+Math.PI*2*dt/(Bt-Ft)))/2),jt=Rt(jt)):(dt>=et(Ft)&&(dt-Ft<0?jt=it(0,g(g(Bt,1)-(Ft-dt),1)):jt=it(0,g(Bt-dt,1))),jt=Rt(jt));if(this.sm.v!==100){var en=this.sm.v*.01;en===0&&(en=1e-8);var tn=.5-en*.5;jt<tn?jt=0:(jt=(jt-tn)/en,jt>1&&(jt=1))}return jt*this.a.v},getValue:function(dt){this.iterateDynamicProperties(),this._mdf=dt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,dt&&this.data.r===2&&(this.e.v=this._currentTextLength);var ft=this.data.r===2?1:100/this.data.totalChars,St=this.o.v/ft,kt=this.s.v/ft+St,Tt=this.e.v/ft+St;if(kt>Tt){var Rt=kt;kt=Tt,Tt=Rt}this.finalS=kt,this.finalE=Tt}},extendPrototype([DynamicPropertyContainer],ot);function ut(ct,dt,ft){return new ot(ct,dt)}return{getTextSelectorProp:ut}}();function TextAnimatorDataProperty(it,g,et){var ot={propType:!1},ut=PropertyFactory.getProp,ct=g.a;this.a={r:ct.r?ut(it,ct.r,0,degToRads,et):ot,rx:ct.rx?ut(it,ct.rx,0,degToRads,et):ot,ry:ct.ry?ut(it,ct.ry,0,degToRads,et):ot,sk:ct.sk?ut(it,ct.sk,0,degToRads,et):ot,sa:ct.sa?ut(it,ct.sa,0,degToRads,et):ot,s:ct.s?ut(it,ct.s,1,.01,et):ot,a:ct.a?ut(it,ct.a,1,0,et):ot,o:ct.o?ut(it,ct.o,0,.01,et):ot,p:ct.p?ut(it,ct.p,1,0,et):ot,sw:ct.sw?ut(it,ct.sw,0,0,et):ot,sc:ct.sc?ut(it,ct.sc,1,0,et):ot,fc:ct.fc?ut(it,ct.fc,1,0,et):ot,fh:ct.fh?ut(it,ct.fh,0,0,et):ot,fs:ct.fs?ut(it,ct.fs,0,.01,et):ot,fb:ct.fb?ut(it,ct.fb,0,.01,et):ot,t:ct.t?ut(it,ct.t,0,0,et):ot},this.s=TextSelectorProp.getTextSelectorProp(it,g.s,et),this.s.t=g.s.t}function TextAnimatorProperty(it,g,et){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=it,this._renderType=g,this._elem=et,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(et)}TextAnimatorProperty.prototype.searchProperties=function(){var it,g=this._textData.a.length,et,ot=PropertyFactory.getProp;for(it=0;it<g;it+=1)et=this._textData.a[it],this._animatorsData[it]=new TextAnimatorDataProperty(this._elem,et,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ot(this._elem,this._textData.p.a,0,0,this),f:ot(this._elem,this._textData.p.f,0,0,this),l:ot(this._elem,this._textData.p.l,0,0,this),r:ot(this._elem,this._textData.p.r,0,0,this),p:ot(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ot(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(it,g){if(this.lettersChangedFlag=g,!(!this._mdf&&!this._isFirstFrame&&!g&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var et=this._moreOptions.alignment.v,ot=this._animatorsData,ut=this._textData,ct=this.mHelper,dt=this._renderType,ft=this.renderedLetters.length,St,kt,Tt,Rt,jt=it.l,Ft,Bt,Ht,Yt,zt,Kt,en,tn,on,an,un,dn,Sn,mn,bn;if(this._hasMaskedPath){if(bn=this._pathData.m,!this._pathData.n||this._pathData._mdf){var En=bn.v;this._pathData.r.v&&(En=En.reverse()),Ft={tLength:0,segments:[]},Rt=En._length-1;var kn;for(dn=0,Tt=0;Tt<Rt;Tt+=1)kn=bez.buildBezierData(En.v[Tt],En.v[Tt+1],[En.o[Tt][0]-En.v[Tt][0],En.o[Tt][1]-En.v[Tt][1]],[En.i[Tt+1][0]-En.v[Tt+1][0],En.i[Tt+1][1]-En.v[Tt+1][1]]),Ft.tLength+=kn.segmentLength,Ft.segments.push(kn),dn+=kn.segmentLength;Tt=Rt,bn.v.c&&(kn=bez.buildBezierData(En.v[Tt],En.v[0],[En.o[Tt][0]-En.v[Tt][0],En.o[Tt][1]-En.v[Tt][1]],[En.i[0][0]-En.v[0][0],En.i[0][1]-En.v[0][1]]),Ft.tLength+=kn.segmentLength,Ft.segments.push(kn),dn+=kn.segmentLength),this._pathData.pi=Ft}if(Ft=this._pathData.pi,Bt=this._pathData.f.v,en=0,Kt=1,Yt=0,zt=!0,an=Ft.segments,Bt<0&&bn.v.c)for(Ft.tLength<Math.abs(Bt)&&(Bt=-Math.abs(Bt)%Ft.tLength),en=an.length-1,on=an[en].points,Kt=on.length-1;Bt<0;)Bt+=on[Kt].partialLength,Kt-=1,Kt<0&&(en-=1,on=an[en].points,Kt=on.length-1);on=an[en].points,tn=on[Kt-1],Ht=on[Kt],un=Ht.partialLength}Rt=jt.length,St=0,kt=0;var Pn=it.finalSize*1.2*.714,Ln=!0,gn,Mn,yn,vn,On;vn=ot.length;var Cn,Vn=-1,Qn,ir,ar,rr=Bt,hr=en,_r=Kt,xr=-1,wr,Ir,_i,Br,Fr,cs,Cs,Ts,Rr="",Lr=this.defaultPropsArray,Gr;if(it.j===2||it.j===1){var zr=0,Vr=0,rs=it.j===2?-.5:-1,fs=0,Kr=!0;for(Tt=0;Tt<Rt;Tt+=1)if(jt[Tt].n){for(zr&&(zr+=Vr);fs<Tt;)jt[fs].animatorJustifyOffset=zr,fs+=1;zr=0,Kr=!0}else{for(yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.t.propType&&(Kr&&it.j===2&&(Vr+=gn.t.v*rs),Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),Cn.length?zr+=gn.t.v*Cn[0]*rs:zr+=gn.t.v*Cn*rs);Kr=!1}for(zr&&(zr+=Vr);fs<Tt;)jt[fs].animatorJustifyOffset=zr,fs+=1}for(Tt=0;Tt<Rt;Tt+=1){if(ct.reset(),wr=1,jt[Tt].n)St=0,kt+=it.yOffset,kt+=Ln?1:0,Bt=rr,Ln=!1,this._hasMaskedPath&&(en=hr,Kt=_r,on=an[en].points,tn=on[Kt-1],Ht=on[Kt],un=Ht.partialLength,Yt=0),Rr="",Ts="",cs="",Gr="",Lr=this.defaultPropsArray;else{if(this._hasMaskedPath){if(xr!==jt[Tt].line){switch(it.j){case 1:Bt+=dn-it.lineWidths[jt[Tt].line];break;case 2:Bt+=(dn-it.lineWidths[jt[Tt].line])/2;break}xr=jt[Tt].line}Vn!==jt[Tt].ind&&(jt[Vn]&&(Bt+=jt[Vn].extra),Bt+=jt[Tt].an/2,Vn=jt[Tt].ind),Bt+=et[0]*jt[Tt].an*.005;var $t=0;for(yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.p.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),Cn.length?$t+=gn.p.v[0]*Cn[0]:$t+=gn.p.v[0]*Cn),gn.a.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),Cn.length?$t+=gn.a.v[0]*Cn[0]:$t+=gn.a.v[0]*Cn);for(zt=!0,this._pathData.a.v&&(Bt=jt[0].an*.5+(dn-this._pathData.f.v-jt[0].an*.5-jt[jt.length-1].an*.5)*Vn/(Rt-1),Bt+=this._pathData.f.v);zt;)Yt+un>=Bt+$t||!on?(Sn=(Bt+$t-Yt)/Ht.partialLength,ir=tn.point[0]+(Ht.point[0]-tn.point[0])*Sn,ar=tn.point[1]+(Ht.point[1]-tn.point[1])*Sn,ct.translate(-et[0]*jt[Tt].an*.005,-(et[1]*Pn)*.01),zt=!1):on&&(Yt+=Ht.partialLength,Kt+=1,Kt>=on.length&&(Kt=0,en+=1,an[en]?on=an[en].points:bn.v.c?(Kt=0,en=0,on=an[en].points):(Yt-=Ht.partialLength,on=null)),on&&(tn=Ht,Ht=on[Kt],un=Ht.partialLength));Qn=jt[Tt].an/2-jt[Tt].add,ct.translate(-Qn,0,0)}else Qn=jt[Tt].an/2-jt[Tt].add,ct.translate(-Qn,0,0),ct.translate(-et[0]*jt[Tt].an*.005,-et[1]*Pn*.01,0);for(yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.t.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),(St!==0||it.j!==0)&&(this._hasMaskedPath?Cn.length?Bt+=gn.t.v*Cn[0]:Bt+=gn.t.v*Cn:Cn.length?St+=gn.t.v*Cn[0]:St+=gn.t.v*Cn));for(it.strokeWidthAnim&&(_i=it.sw||0),it.strokeColorAnim&&(it.sc?Ir=[it.sc[0],it.sc[1],it.sc[2]]:Ir=[0,0,0]),it.fillColorAnim&&it.fc&&(Br=[it.fc[0],it.fc[1],it.fc[2]]),yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.a.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),Cn.length?ct.translate(-gn.a.v[0]*Cn[0],-gn.a.v[1]*Cn[1],gn.a.v[2]*Cn[2]):ct.translate(-gn.a.v[0]*Cn,-gn.a.v[1]*Cn,gn.a.v[2]*Cn));for(yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.s.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),Cn.length?ct.scale(1+(gn.s.v[0]-1)*Cn[0],1+(gn.s.v[1]-1)*Cn[1],1):ct.scale(1+(gn.s.v[0]-1)*Cn,1+(gn.s.v[1]-1)*Cn,1));for(yn=0;yn<vn;yn+=1){if(gn=ot[yn].a,Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),gn.sk.propType&&(Cn.length?ct.skewFromAxis(-gn.sk.v*Cn[0],gn.sa.v*Cn[1]):ct.skewFromAxis(-gn.sk.v*Cn,gn.sa.v*Cn)),gn.r.propType&&(Cn.length?ct.rotateZ(-gn.r.v*Cn[2]):ct.rotateZ(-gn.r.v*Cn)),gn.ry.propType&&(Cn.length?ct.rotateY(gn.ry.v*Cn[1]):ct.rotateY(gn.ry.v*Cn)),gn.rx.propType&&(Cn.length?ct.rotateX(gn.rx.v*Cn[0]):ct.rotateX(gn.rx.v*Cn)),gn.o.propType&&(Cn.length?wr+=(gn.o.v*Cn[0]-wr)*Cn[0]:wr+=(gn.o.v*Cn-wr)*Cn),it.strokeWidthAnim&&gn.sw.propType&&(Cn.length?_i+=gn.sw.v*Cn[0]:_i+=gn.sw.v*Cn),it.strokeColorAnim&&gn.sc.propType)for(Fr=0;Fr<3;Fr+=1)Cn.length?Ir[Fr]+=(gn.sc.v[Fr]-Ir[Fr])*Cn[0]:Ir[Fr]+=(gn.sc.v[Fr]-Ir[Fr])*Cn;if(it.fillColorAnim&&it.fc){if(gn.fc.propType)for(Fr=0;Fr<3;Fr+=1)Cn.length?Br[Fr]+=(gn.fc.v[Fr]-Br[Fr])*Cn[0]:Br[Fr]+=(gn.fc.v[Fr]-Br[Fr])*Cn;gn.fh.propType&&(Cn.length?Br=addHueToRGB(Br,gn.fh.v*Cn[0]):Br=addHueToRGB(Br,gn.fh.v*Cn)),gn.fs.propType&&(Cn.length?Br=addSaturationToRGB(Br,gn.fs.v*Cn[0]):Br=addSaturationToRGB(Br,gn.fs.v*Cn)),gn.fb.propType&&(Cn.length?Br=addBrightnessToRGB(Br,gn.fb.v*Cn[0]):Br=addBrightnessToRGB(Br,gn.fb.v*Cn))}}for(yn=0;yn<vn;yn+=1)gn=ot[yn].a,gn.p.propType&&(Mn=ot[yn].s,Cn=Mn.getMult(jt[Tt].anIndexes[yn],ut.a[yn].s.totalChars),this._hasMaskedPath?Cn.length?ct.translate(0,gn.p.v[1]*Cn[0],-gn.p.v[2]*Cn[1]):ct.translate(0,gn.p.v[1]*Cn,-gn.p.v[2]*Cn):Cn.length?ct.translate(gn.p.v[0]*Cn[0],gn.p.v[1]*Cn[1],-gn.p.v[2]*Cn[2]):ct.translate(gn.p.v[0]*Cn,gn.p.v[1]*Cn,-gn.p.v[2]*Cn));if(it.strokeWidthAnim&&(cs=_i<0?0:_i),it.strokeColorAnim&&(Cs="rgb("+Math.round(Ir[0]*255)+","+Math.round(Ir[1]*255)+","+Math.round(Ir[2]*255)+")"),it.fillColorAnim&&it.fc&&(Ts="rgb("+Math.round(Br[0]*255)+","+Math.round(Br[1]*255)+","+Math.round(Br[2]*255)+")"),this._hasMaskedPath){if(ct.translate(0,-it.ls),ct.translate(0,et[1]*Pn*.01+kt,0),this._pathData.p.v){mn=(Ht.point[1]-tn.point[1])/(Ht.point[0]-tn.point[0]);var Jt=Math.atan(mn)*180/Math.PI;Ht.point[0]<tn.point[0]&&(Jt+=180),ct.rotate(-Jt*Math.PI/180)}ct.translate(ir,ar,0),Bt-=et[0]*jt[Tt].an*.005,jt[Tt+1]&&Vn!==jt[Tt+1].ind&&(Bt+=jt[Tt].an/2,Bt+=it.tr*.001*it.finalSize)}else{switch(ct.translate(St,kt,0),it.ps&&ct.translate(it.ps[0],it.ps[1]+it.ascent,0),it.j){case 1:ct.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line]),0,0);break;case 2:ct.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line])/2,0,0);break}ct.translate(0,-it.ls),ct.translate(Qn,0,0),ct.translate(et[0]*jt[Tt].an*.005,et[1]*Pn*.01,0),St+=jt[Tt].l+it.tr*.001*it.finalSize}dt==="html"?Rr=ct.toCSS():dt==="svg"?Rr=ct.to2dCSS():Lr=[ct.props[0],ct.props[1],ct.props[2],ct.props[3],ct.props[4],ct.props[5],ct.props[6],ct.props[7],ct.props[8],ct.props[9],ct.props[10],ct.props[11],ct.props[12],ct.props[13],ct.props[14],ct.props[15]],Gr=wr}ft<=Tt?(On=new LetterProps(Gr,cs,Cs,Ts,Rr,Lr),this.renderedLetters.push(On),ft+=1,this.lettersChangedFlag=!0):(On=this.renderedLetters[Tt],this.lettersChangedFlag=On.update(Gr,cs,Cs,Ts,Rr,Lr)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(it,g,et){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(it,g,et),this.textProperty=new TextProperty(this,it.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(it.t,this.renderType,this),this.initTransform(it,g,et),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange)},ITextElement.prototype.createPathShape=function(it,g){var et,ot=g.length,ut,ct="";for(et=0;et<ot;et+=1)g[et].ty==="sh"&&(ut=g[et].ks.k,ct+=buildShapeString(ut,ut.i.length,!0,it));return ct},ITextElement.prototype.updateDocumentData=function(it,g){this.textProperty.updateDocumentData(it,g)},ITextElement.prototype.canResizeFont=function(it){this.textProperty.canResizeFont(it)},ITextElement.prototype.setMinimumFontSize=function(it){this.textProperty.setMinimumFontSize(it)},ITextElement.prototype.applyTextPropertiesToMatrix=function(it,g,et,ot,ut){switch(it.ps&&g.translate(it.ps[0],it.ps[1]+it.ascent,0),g.translate(0,-it.ls,0),it.j){case 1:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et]),0,0);break;case 2:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et])/2,0,0);break}g.translate(ot,ut,0)},ITextElement.prototype.buildColor=function(it){return"rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(it,g,et){this.textSpans=[],this.renderType="svg",this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(it){for(var g=0,et=it.length,ot=[],ut="";g<et;)it[g]===String.fromCharCode(13)||it[g]===String.fromCharCode(3)?(ot.push(ut),ut=""):ut+=it[g],g+=1;return ot.push(ut),ot},SVGTextLottieElement.prototype.buildShapeData=function(it,g){if(it.shapes&&it.shapes.length){var et=it.shapes[0];if(et.it){var ot=et.it[et.it.length-1];ot.s&&(ot.s.k[0]=g,ot.s.k[1]=g)}}return it},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var it,g,et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et?et.l.length:0),et.fc?this.layerElement.setAttribute("fill",this.buildColor(et.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),et.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(et.sc)),this.layerElement.setAttribute("stroke-width",et.sw)),this.layerElement.setAttribute("font-size",et.finalSize);var ot=this.globalData.fontManager.getFontByName(et.f);if(ot.fClass)this.layerElement.setAttribute("class",ot.fClass);else{this.layerElement.setAttribute("font-family",ot.fFamily);var ut=et.fWeight,ct=et.fStyle;this.layerElement.setAttribute("font-style",ct),this.layerElement.setAttribute("font-weight",ut)}this.layerElement.setAttribute("aria-label",et.t);var dt=et.l||[],ft=!!this.globalData.fontManager.chars;g=dt.length;var St,kt=this.mHelper,Tt="",Rt=this.data.singleShape,jt=0,Ft=0,Bt=!0,Ht=et.tr*.001*et.finalSize;if(Rt&&!ft&&!et.sz){var Yt=this.textContainer,zt="start";switch(et.j){case 1:zt="end";break;case 2:zt="middle";break;default:zt="start";break}Yt.setAttribute("text-anchor",zt),Yt.setAttribute("letter-spacing",Ht);var Kt=this.buildTextContents(et.finalText);for(g=Kt.length,Ft=et.ps?et.ps[1]+et.ascent:0,it=0;it<g;it+=1)St=this.textSpans[it].span||createNS("tspan"),St.textContent=Kt[it],St.setAttribute("x",0),St.setAttribute("y",Ft),St.style.display="inherit",Yt.appendChild(St),this.textSpans[it]||(this.textSpans[it]={span:null,glyph:null}),this.textSpans[it].span=St,Ft+=et.finalLineHeight;this.layerElement.appendChild(Yt)}else{var en=this.textSpans.length,tn;for(it=0;it<g;it+=1){if(this.textSpans[it]||(this.textSpans[it]={span:null,childSpan:null,glyph:null}),!ft||!Rt||it===0){if(St=en>it?this.textSpans[it].span:createNS(ft?"g":"text"),en<=it){if(St.setAttribute("stroke-linecap","butt"),St.setAttribute("stroke-linejoin","round"),St.setAttribute("stroke-miterlimit","4"),this.textSpans[it].span=St,ft){var on=createNS("g");St.appendChild(on),this.textSpans[it].childSpan=on}this.textSpans[it].span=St,this.layerElement.appendChild(St)}St.style.display="inherit"}if(kt.reset(),Rt&&(dt[it].n&&(jt=-Ht,Ft+=et.yOffset,Ft+=Bt?1:0,Bt=!1),this.applyTextPropertiesToMatrix(et,kt,dt[it].line,jt,Ft),jt+=dt[it].l||0,jt+=Ht),ft){tn=this.globalData.fontManager.getCharData(et.finalText[it],ot.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily);var an;if(tn.t===1)an=new SVGCompElement(tn.data,this.globalData,this);else{var un=emptyShapeData;tn.data&&tn.data.shapes&&(un=this.buildShapeData(tn.data,et.finalSize)),an=new SVGShapeElement(un,this.globalData,this)}if(this.textSpans[it].glyph){var dn=this.textSpans[it].glyph;this.textSpans[it].childSpan.removeChild(dn.layerElement),dn.destroy()}this.textSpans[it].glyph=an,an._debug=!0,an.prepareFrame(0),an.renderFrame(),this.textSpans[it].childSpan.appendChild(an.layerElement),tn.t===1&&this.textSpans[it].childSpan.setAttribute("transform","scale("+et.finalSize/100+","+et.finalSize/100+")")}else Rt&&St.setAttribute("transform","translate("+kt.props[12]+","+kt.props[13]+")"),St.textContent=dt[it].val,St.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Rt&&St&&St.setAttribute("d",Tt)}for(;it<this.textSpans.length;)this.textSpans[it].span.style.display="none",it+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var it=this.layerElement.getBBox();this.bbox={top:it.y,left:it.x,width:it.width,height:it.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var it,g=this.textSpans.length,et;for(this.renderedFrame=this.comp.renderedFrame,it=0;it<g;it+=1)et=this.textSpans[it].glyph,et&&(et.prepareFrame(this.comp.renderedFrame-this.data.st),et._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var it,g,et=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;g=ot.length;var ut,ct,dt;for(it=0;it<g;it+=1)ot[it].n||(ut=et[it],ct=this.textSpans[it].span,dt=this.textSpans[it].glyph,dt&&dt.renderFrame(),ut._mdf.m&&ct.setAttribute("transform",ut.m),ut._mdf.o&&ct.setAttribute("opacity",ut.o),ut._mdf.sw&&ct.setAttribute("stroke-width",ut.sw),ut._mdf.sc&&ct.setAttribute("stroke",ut.sc),ut._mdf.fc&&ct.setAttribute("fill",ut.fc))}};function ISolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var it=createNS("rect");it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.layerElement.appendChild(it)};function NullElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initFrame(),this.initTransform(it,g,et),this.initHierarchy()}NullElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(it){return new NullElement(it,this.globalData,this)},SVGRendererBase.prototype.createShape=function(it){return new SVGShapeElement(it,this.globalData,this)},SVGRendererBase.prototype.createText=function(it){return new SVGTextLottieElement(it,this.globalData,this)},SVGRendererBase.prototype.createImage=function(it){return new IImageElement(it,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(it){return new ISolidElement(it,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(it){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+it.w+" "+it.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",it.w),this.svgElement.setAttribute("height",it.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var g=this.globalData.defs;this.setupGlobalData(it,g),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=it;var et=createNS("clipPath"),ot=createNS("rect");ot.setAttribute("width",it.w),ot.setAttribute("height",it.h),ot.setAttribute("x",0),ot.setAttribute("y",0);var ut=createElementID();et.setAttribute("id",ut),et.appendChild(ot),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")"),g.appendChild(et),this.layers=it.layers,this.elements=createSizedArray(it.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(it){var g=0,et=this.layers.length;for(g=0;g<et;g+=1)if(this.layers[g].ind===it)return g;return-1},SVGRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){g[it]=!0;var et=this.createItem(this.layers[it]);if(g[it]=et,getExpressionsPlugin()&&(this.layers[it].ty===0&&this.globalData.projectInterface.registerComposition(et),et.initExpressions()),this.appendElementInPos(et,it),this.layers[it].tt){var ot="tp"in this.layers[it]?this.findIndexByInd(this.layers[it].tp):it-1;if(ot===-1)return;if(!this.elements[ot]||this.elements[ot]===!0)this.buildItem(ot),this.addPendingElement(et);else{var ut=g[ot],ct=ut.getMatte(this.layers[it].tt);et.setMatte(ct)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();if(it.checkParenting(),it.data.tt)for(var g=0,et=this.elements.length;g<et;){if(this.elements[g]===it){var ot="tp"in it.data?this.findIndexByInd(it.data.tp):g-1,ut=this.elements[ot],ct=ut.getMatte(this.layers[g].tt);it.setMatte(ct);break}g+=1}}},SVGRendererBase.prototype.renderFrame=function(it){if(!(this.renderedFrame===it||this.destroyed)){it===null?it=this.renderedFrame:this.renderedFrame=it,this.globalData.frameNum=it,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=it,this.globalData._mdf=!1;var g,et=this.layers.length;for(this.completeLayers||this.checkLayers(it),g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].prepareFrame(it-this.layers[g].st);if(this.globalData._mdf)for(g=0;g<et;g+=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){for(var ot=0,ut;ot<g;)this.elements[ot]&&this.elements[ot]!==!0&&this.elements[ot].getBaseElement()&&(ut=this.elements[ot].getBaseElement()),ot+=1;ut?this.layerElement.insertBefore(et,ut):this.layerElement.appendChild(et)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initTransform(it,g,et),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!g.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(it){if(this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=it/this.data.sr;else{var g=this.tm.v;g===this.data.op&&(g=this.data.op-1),this.renderedFrame=g}var et,ot=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&(this.elements[et].prepareFrame(this.renderedFrame-this.layers[et].st),this.elements[et]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame()},ICompElement.prototype.setElements=function(it){this.elements=it},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(it,g,et){this.layers=it.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function SVGRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var et="";if(g&&g.title){var ot=createNS("title"),ut=createElementID();ot.setAttribute("id",ut),ot.textContent=g.title,this.svgElement.appendChild(ot),et+=ut}if(g&&g.description){var ct=createNS("desc"),dt=createElementID();ct.setAttribute("id",dt),ct.textContent=g.description,this.svgElement.appendChild(ct),et+=" "+dt}et&&this.svgElement.setAttribute("aria-labelledby",et);var ft=createNS("defs");this.svgElement.appendChild(ft);var St=createNS("g");this.svgElement.appendChild(St),this.layerElement=St,this.renderConfig={preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",progressiveLoad:g&&g.progressiveLoad||!1,hideOnTransparent:!(g&&g.hideOnTransparent===!1),viewBoxOnly:g&&g.viewBoxOnly||!1,viewBoxSize:g&&g.viewBoxSize||!1,className:g&&g.className||"",id:g&&g.id||"",focusable:g&&g.focusable,filterSize:{width:g&&g.filterSize&&g.filterSize.width||"100%",height:g&&g.filterSize&&g.filterSize.height||"100%",x:g&&g.filterSize&&g.filterSize.x||"0%",y:g&&g.filterSize&&g.filterSize.y||"0%"},width:g&&g.width,height:g&&g.height,runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(g){var et,ot=g.length,ut="_";for(et=0;et<ot;et+=1)ut+=g[et].transform.key+"_";var ct=this.sequences[ut];return ct||(ct={transforms:[].concat(g),finalTransform:new Matrix,_mdf:!1},this.sequences[ut]=ct,this.sequenceList.push(ct)),ct},processSequence:function(g,et){for(var ot=0,ut=g.transforms.length,ct=et;ot<ut&&!et;){if(g.transforms[ot].transform.mProps._mdf){ct=!0;break}ot+=1}if(ct)for(g.finalTransform.reset(),ot=ut-1;ot>=0;ot-=1)g.finalTransform.multiply(g.transforms[ot].transform.mProps.v);g._mdf=ct},processSequences:function(g){var et,ot=this.sequenceList.length;for(et=0;et<ot;et+=1)this.processSequence(this.sequenceList[et],g)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var g="__lottie_element_luma_buffer",et=null,ot=null,ut=null;function ct(){var St=createNS("svg"),kt=createNS("filter"),Tt=createNS("feColorMatrix");return kt.setAttribute("id",g),Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),kt.appendChild(Tt),St.appendChild(kt),St.setAttribute("id",g+"_svg"),featureSupport.svgLumaHidden&&(St.style.display="none"),St}function dt(){et||(ut=ct(),document.body.appendChild(ut),et=createTag("canvas"),ot=et.getContext("2d"),ot.filter="url(#"+g+")",ot.fillStyle="rgba(0,0,0,0)",ot.fillRect(0,0,1,1))}function ft(St){return et||dt(),et.width=St.width,et.height=St.height,ot.filter="url(#"+g+")",et}return{load:dt,get:ft}};function createCanvas(it,g){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(it,g);var et=createTag("canvas");return et.width=it,et.height=g,et}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(it){var g,et=it.data.ef?it.data.ef.length:0;this.filters=[];var ot;for(g=0;g<et;g+=1){ot=null;var ut=it.data.ef[g].ty;if(registeredEffects[ut]){var ct=registeredEffects[ut].effect;ot=new ct(it.effectsManager.effectElements[g],it)}ot&&this.filters.push(ot)}this.filters.length&&it.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},CVEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect(it,g){registeredEffects[it]={effect:g}}function CVMaskElement(it,g){this.data=it,this.element=g,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var et,ot=this.masksProperties.length,ut=!1;for(et=0;et<ot;et+=1)this.masksProperties[et].mode!=="n"&&(ut=!0),this.viewData[et]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[et],3);this.hasMasks=ut,ut&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var it=this.element.finalTransform.mat,g=this.element.canvasContext,et,ot=this.masksProperties.length,ut,ct,dt;for(g.beginPath(),et=0;et<ot;et+=1)if(this.masksProperties[et].mode!=="n"){this.masksProperties[et].inv&&(g.moveTo(0,0),g.lineTo(this.element.globalData.compSize.w,0),g.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),g.lineTo(0,this.element.globalData.compSize.h),g.lineTo(0,0)),dt=this.viewData[et].v,ut=it.applyToPointArray(dt.v[0][0],dt.v[0][1],0),g.moveTo(ut[0],ut[1]);var ft,St=dt._length;for(ft=1;ft<St;ft+=1)ct=it.applyToTriplePoints(dt.o[ft-1],dt.i[ft],dt.v[ft]),g.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);ct=it.applyToTriplePoints(dt.o[ft-1],dt.i[0],dt.v[0]),g.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5])}this.element.globalData.renderer.save(!0),g.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var g=this.globalData.canvasContext,et=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(et);var ot=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(ot),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var g=this.globalData;if(g.blendMode!==this.data.bm){g.blendMode=this.data.bm;var et=getBlendMode(this.data.bm);g.canvasContext.globalCompositeOperation=et}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(g){g.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var g=this.buffers[0],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var g=this.buffers[1],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ot=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ot.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ut=assetLoader.getLumaCanvas(this.canvasContext.canvas),ct=ut.getContext("2d");ct.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ut,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(g,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(g){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!g)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var et=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(et),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(et),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(it,g,et,ot){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ut=4;g.ty==="rc"?ut=5:g.ty==="el"?ut=6:g.ty==="sr"&&(ut=7),this.sh=ShapePropertyFactory.getShapeProp(it,g,ut,it);var ct,dt=et.length,ft;for(ct=0;ct<dt;ct+=1)et[ct].closed||(ft={transforms:ot.addTransformSequence(et[ct].transforms),trNodes:[]},this.styledShapes.push(ft),et[ct].elements.push(ft))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(it,g){var et={data:it,type:it.ty,preTransforms:this.transformsManager.addTransformSequence(g),transforms:[],elements:[],closed:it.hd===!0},ot={};if(it.ty==="fl"||it.ty==="st"?(ot.c=PropertyFactory.getProp(this,it.c,1,255,this),ot.c.k||(et.co="rgb("+bmFloor(ot.c.v[0])+","+bmFloor(ot.c.v[1])+","+bmFloor(ot.c.v[2])+")")):(it.ty==="gf"||it.ty==="gs")&&(ot.s=PropertyFactory.getProp(this,it.s,1,null,this),ot.e=PropertyFactory.getProp(this,it.e,1,null,this),ot.h=PropertyFactory.getProp(this,it.h||{k:0},0,.01,this),ot.a=PropertyFactory.getProp(this,it.a||{k:0},0,degToRads,this),ot.g=new GradientProperty(this,it.g,this)),ot.o=PropertyFactory.getProp(this,it.o,0,.01,this),it.ty==="st"||it.ty==="gs"){if(et.lc=lineCapEnum[it.lc||2],et.lj=lineJoinEnum[it.lj||2],it.lj==1&&(et.ml=it.ml),ot.w=PropertyFactory.getProp(this,it.w,0,null,this),ot.w.k||(et.wi=ot.w.v),it.d){var ut=new DashProperty(this,it.d,"canvas",this);ot.d=ut,ot.d.k||(et.da=ot.d.dashArray,et.do=ot.d.dashoffset[0])}}else et.r=it.r===2?"evenodd":"nonzero";return this.stylesList.push(et),ot.style=et,ot},CVShapeElement.prototype.createGroupElement=function(){var it={it:[],prevViewData:[]};return it},CVShapeElement.prototype.createTransformElement=function(it){var g={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,it.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,it,this)}};return g},CVShapeElement.prototype.createShapeElement=function(it){var g=new CVShapeData(this,it,this.stylesList,this.transformsManager);return this.shapes.push(g),this.addShapeToModifiers(g),g},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(it){var g,et=this.stylesList.length;for(g=0;g<et;g+=1)this.stylesList[g].closed||this.stylesList[g].transforms.push(it)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].closed||this.stylesList[it].transforms.pop()},CVShapeElement.prototype.closeStyles=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].closed=!0},CVShapeElement.prototype.searchShapes=function(it,g,et,ot,ut){var ct,dt=it.length-1,ft,St,kt=[],Tt=[],Rt,jt,Ft,Bt=[].concat(ut);for(ct=dt;ct>=0;ct-=1){if(Rt=this.searchProcessedElement(it[ct]),Rt?g[ct]=et[Rt-1]:it[ct]._shouldRender=ot,it[ct].ty==="fl"||it[ct].ty==="st"||it[ct].ty==="gf"||it[ct].ty==="gs")Rt?g[ct].style.closed=!1:g[ct]=this.createStyleElement(it[ct],Bt),kt.push(g[ct].style);else if(it[ct].ty==="gr"){if(!Rt)g[ct]=this.createGroupElement(it[ct]);else for(St=g[ct].it.length,ft=0;ft<St;ft+=1)g[ct].prevViewData[ft]=g[ct].it[ft];this.searchShapes(it[ct].it,g[ct].it,g[ct].prevViewData,ot,Bt)}else it[ct].ty==="tr"?(Rt||(Ft=this.createTransformElement(it[ct]),g[ct]=Ft),Bt.push(g[ct]),this.addTransformToStyleList(g[ct])):it[ct].ty==="sh"||it[ct].ty==="rc"||it[ct].ty==="el"||it[ct].ty==="sr"?Rt||(g[ct]=this.createShapeElement(it[ct])):it[ct].ty==="tm"||it[ct].ty==="rd"||it[ct].ty==="pb"||it[ct].ty==="zz"||it[ct].ty==="op"?(Rt?(jt=g[ct],jt.closed=!1):(jt=ShapeModifiers.getModifier(it[ct].ty),jt.init(this,it[ct]),g[ct]=jt,this.shapeModifiers.push(jt)),Tt.push(jt)):it[ct].ty==="rp"&&(Rt?(jt=g[ct],jt.closed=!0):(jt=ShapeModifiers.getModifier(it[ct].ty),g[ct]=jt,jt.init(this,it,ct,g),this.shapeModifiers.push(jt),ot=!1),Tt.push(jt));this.addProcessedElement(it[ct],ct+1)}for(this.removeTransformFromStyleList(),this.closeStyles(kt),dt=Tt.length,ct=0;ct<dt;ct+=1)Tt[ct].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(it,g){(it._opMdf||g.op._mdf||this._isFirstFrame)&&(g.opacity=it.opacity,g.opacity*=g.op.v,g._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var it,g=this.stylesList.length,et,ot,ut,ct,dt,ft,St=this.globalData.renderer,kt=this.globalData.canvasContext,Tt,Rt;for(it=0;it<g;it+=1)if(Rt=this.stylesList[it],Tt=Rt.type,!((Tt==="st"||Tt==="gs")&&Rt.wi===0||!Rt.data._shouldRender||Rt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(St.save(),dt=Rt.elements,Tt==="st"||Tt==="gs"?(St.ctxStrokeStyle(Tt==="st"?Rt.co:Rt.grd),St.ctxLineWidth(Rt.wi),St.ctxLineCap(Rt.lc),St.ctxLineJoin(Rt.lj),St.ctxMiterLimit(Rt.ml||0)):St.ctxFillStyle(Tt==="fl"?Rt.co:Rt.grd),St.ctxOpacity(Rt.coOp),Tt!=="st"&&Tt!=="gs"&&kt.beginPath(),St.ctxTransform(Rt.preTransforms.finalTransform.props),ot=dt.length,et=0;et<ot;et+=1){for((Tt==="st"||Tt==="gs")&&(kt.beginPath(),Rt.da&&(kt.setLineDash(Rt.da),kt.lineDashOffset=Rt.do)),ft=dt[et].trNodes,ct=ft.length,ut=0;ut<ct;ut+=1)ft[ut].t==="m"?kt.moveTo(ft[ut].p[0],ft[ut].p[1]):ft[ut].t==="c"?kt.bezierCurveTo(ft[ut].pts[0],ft[ut].pts[1],ft[ut].pts[2],ft[ut].pts[3],ft[ut].pts[4],ft[ut].pts[5]):kt.closePath();(Tt==="st"||Tt==="gs")&&(St.ctxStroke(),Rt.da&&kt.setLineDash(this.dashResetter))}Tt!=="st"&&Tt!=="gs"&&this.globalData.renderer.ctxFill(Rt.r),St.restore()}},CVShapeElement.prototype.renderShape=function(it,g,et,ot){var ut,ct=g.length-1,dt;for(dt=it,ut=ct;ut>=0;ut-=1)g[ut].ty==="tr"?(dt=et[ut].transform,this.renderShapeTransform(it,dt)):g[ut].ty==="sh"||g[ut].ty==="el"||g[ut].ty==="rc"||g[ut].ty==="sr"?this.renderPath(g[ut],et[ut]):g[ut].ty==="fl"?this.renderFill(g[ut],et[ut],dt):g[ut].ty==="st"?this.renderStroke(g[ut],et[ut],dt):g[ut].ty==="gf"||g[ut].ty==="gs"?this.renderGradientFill(g[ut],et[ut],dt):g[ut].ty==="gr"?this.renderShape(dt,g[ut].it,et[ut].it):g[ut].ty;ot&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(it,g){if(this._isFirstFrame||g._mdf||it.transforms._mdf){var et=it.trNodes,ot=g.paths,ut,ct,dt,ft=ot._length;et.length=0;var St=it.transforms.finalTransform;for(dt=0;dt<ft;dt+=1){var kt=ot.shapes[dt];if(kt&&kt.v){for(ct=kt._length,ut=1;ut<ct;ut+=1)ut===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ut-1],kt.i[ut],kt.v[ut])});ct===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),kt.c&&ct&&(et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ut-1],kt.i[0],kt.v[0])}),et.push({t:"z"}))}}it.trNodes=et}},CVShapeElement.prototype.renderPath=function(it,g){if(it.hd!==!0&&it._shouldRender){var et,ot=g.styledShapes.length;for(et=0;et<ot;et+=1)this.renderStyledShape(g.styledShapes[et],g.sh)}},CVShapeElement.prototype.renderFill=function(it,g,et){var ot=g.style;(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity)},CVShapeElement.prototype.renderGradientFill=function(it,g,et){var ot=g.style,ut;if(!ot.grd||g.g._mdf||g.s._mdf||g.e._mdf||it.t!==1&&(g.h._mdf||g.a._mdf)){var ct=this.globalData.canvasContext,dt=g.s.v,ft=g.e.v;if(it.t===1)ut=ct.createLinearGradient(dt[0],dt[1],ft[0],ft[1]);else{var St=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),kt=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Tt=g.h.v;Tt>=1?Tt=.99:Tt<=-1&&(Tt=-.99);var Rt=St*Tt,jt=Math.cos(kt+g.a.v)*Rt+dt[0],Ft=Math.sin(kt+g.a.v)*Rt+dt[1];ut=ct.createRadialGradient(jt,Ft,0,dt[0],dt[1],St)}var Bt,Ht=it.g.p,Yt=g.g.c,zt=1;for(Bt=0;Bt<Ht;Bt+=1)g.g._hasOpacity&&g.g._collapsable&&(zt=g.g.o[Bt*2+1]),ut.addColorStop(Yt[Bt*4]/100,"rgba("+Yt[Bt*4+1]+","+Yt[Bt*4+2]+","+Yt[Bt*4+3]+","+zt+")");ot.grd=ut}ot.coOp=g.o.v*et.opacity},CVShapeElement.prototype.renderStroke=function(it,g,et){var ot=g.style,ut=g.d;ut&&(ut._mdf||this._isFirstFrame)&&(ot.da=ut.dashArray,ot.do=ut.dashoffset[0]),(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity),(g.w._mdf||this._isFirstFrame)&&(ot.wi=g.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(it,g,et){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=!1;it.fc?(g=!0,this.values.fill=this.buildColor(it.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=g;var et=!1;it.sc&&(et=!0,this.values.stroke=this.buildColor(it.sc),this.values.sWidth=it.sw);var ot=this.globalData.fontManager.getFontByName(it.f),ut,ct,dt=it.l,ft=this.mHelper;this.stroke=et,this.values.fValue=it.finalSize+"px "+this.globalData.fontManager.getFontByName(it.f).fFamily,ct=it.finalText.length;var St,kt,Tt,Rt,jt,Ft,Bt,Ht,Yt,zt,Kt=this.data.singleShape,en=it.tr*.001*it.finalSize,tn=0,on=0,an=!0,un=0;for(ut=0;ut<ct;ut+=1){St=this.globalData.fontManager.getCharData(it.finalText[ut],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),kt=St&&St.data||{},ft.reset(),Kt&&dt[ut].n&&(tn=-en,on+=it.yOffset,on+=an?1:0,an=!1),jt=kt.shapes?kt.shapes[0].it:[],Bt=jt.length,ft.scale(it.finalSize/100,it.finalSize/100),Kt&&this.applyTextPropertiesToMatrix(it,ft,dt[ut].line,tn,on),Yt=createSizedArray(Bt-1);var dn=0;for(Ft=0;Ft<Bt;Ft+=1)if(jt[Ft].ty==="sh"){for(Rt=jt[Ft].ks.k.i.length,Ht=jt[Ft].ks.k,zt=[],Tt=1;Tt<Rt;Tt+=1)Tt===1&&zt.push(ft.applyToX(Ht.v[0][0],Ht.v[0][1],0),ft.applyToY(Ht.v[0][0],Ht.v[0][1],0)),zt.push(ft.applyToX(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToY(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToX(Ht.i[Tt][0],Ht.i[Tt][1],0),ft.applyToY(Ht.i[Tt][0],Ht.i[Tt][1],0),ft.applyToX(Ht.v[Tt][0],Ht.v[Tt][1],0),ft.applyToY(Ht.v[Tt][0],Ht.v[Tt][1],0));zt.push(ft.applyToX(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToY(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToX(Ht.i[0][0],Ht.i[0][1],0),ft.applyToY(Ht.i[0][0],Ht.i[0][1],0),ft.applyToX(Ht.v[0][0],Ht.v[0][1],0),ft.applyToY(Ht.v[0][0],Ht.v[0][1],0)),Yt[dn]=zt,dn+=1}Kt&&(tn+=dt[ut].l,tn+=en),this.textSpans[un]?this.textSpans[un].elem=Yt:this.textSpans[un]={elem:Yt},un+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var it=this.canvasContext;it.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var g,et,ot,ut,ct,dt,ft=this.textAnimator.renderedLetters,St=this.textProperty.currentData.l;et=St.length;var kt,Tt=null,Rt=null,jt=null,Ft,Bt,Ht=this.globalData.renderer;for(g=0;g<et;g+=1)if(!St[g].n){if(kt=ft[g],kt&&(Ht.save(),Ht.ctxTransform(kt.p),Ht.ctxOpacity(kt.o)),this.fill){for(kt&&kt.fc?Tt!==kt.fc&&(Ht.ctxFillStyle(kt.fc),Tt=kt.fc):Tt!==this.values.fill&&(Tt=this.values.fill,Ht.ctxFillStyle(this.values.fill)),Ft=this.textSpans[g].elem,ut=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ut;ot+=1)for(Bt=Ft[ot],dt=Bt.length,this.globalData.canvasContext.moveTo(Bt[0],Bt[1]),ct=2;ct<dt;ct+=6)this.globalData.canvasContext.bezierCurveTo(Bt[ct],Bt[ct+1],Bt[ct+2],Bt[ct+3],Bt[ct+4],Bt[ct+5]);this.globalData.canvasContext.closePath(),Ht.ctxFill()}if(this.stroke){for(kt&&kt.sw?jt!==kt.sw&&(jt=kt.sw,Ht.ctxLineWidth(kt.sw)):jt!==this.values.sWidth&&(jt=this.values.sWidth,Ht.ctxLineWidth(this.values.sWidth)),kt&&kt.sc?Rt!==kt.sc&&(Rt=kt.sc,Ht.ctxStrokeStyle(kt.sc)):Rt!==this.values.stroke&&(Rt=this.values.stroke,Ht.ctxStrokeStyle(this.values.stroke)),Ft=this.textSpans[g].elem,ut=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ut;ot+=1)for(Bt=Ft[ot],dt=Bt.length,this.globalData.canvasContext.moveTo(Bt[0],Bt[1]),ct=2;ct<dt;ct+=6)this.globalData.canvasContext.bezierCurveTo(Bt[ct],Bt[ct+1],Bt[ct+2],Bt[ct+3],Bt[ct+4],Bt[ct+5]);this.globalData.canvasContext.closePath(),Ht.ctxStroke()}kt&&this.globalData.renderer.restore()}};function CVImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.img=g.imageLoader.getAsset(this.assetData),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var it=createTag("canvas");it.width=this.assetData.w,it.height=this.assetData.h;var g=it.getContext("2d"),et=this.img.width,ot=this.img.height,ut=et/ot,ct=this.assetData.w/this.assetData.h,dt,ft,St=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ut>ct&&St==="xMidYMid slice"||ut<ct&&St!=="xMidYMid slice"?(ft=ot,dt=ft*ct):(dt=et,ft=dt/ct),g.drawImage(this.img,(et-dt)/2,(ot-ft)/2,dt,ft,0,0,this.assetData.w,this.assetData.h),this.img=it}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(it){return new CVShapeElement(it,this.globalData,this)},CanvasRendererBase.prototype.createText=function(it){return new CVTextElement(it,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(it){return new CVImageElement(it,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(it){return new CVSolidElement(it,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(it){it[0]===1&&it[1]===0&&it[4]===0&&it[5]===1&&it[12]===0&&it[13]===0||this.canvasContext.transform(it[0],it[1],it[4],it[5],it[12],it[13])},CanvasRendererBase.prototype.ctxOpacity=function(it){this.canvasContext.globalAlpha*=it<0?0:it},CanvasRendererBase.prototype.ctxFillStyle=function(it){this.canvasContext.fillStyle=it},CanvasRendererBase.prototype.ctxStrokeStyle=function(it){this.canvasContext.strokeStyle=it},CanvasRendererBase.prototype.ctxLineWidth=function(it){this.canvasContext.lineWidth=it},CanvasRendererBase.prototype.ctxLineCap=function(it){this.canvasContext.lineCap=it},CanvasRendererBase.prototype.ctxLineJoin=function(it){this.canvasContext.lineJoin=it},CanvasRendererBase.prototype.ctxMiterLimit=function(it){this.canvasContext.miterLimit=it},CanvasRendererBase.prototype.ctxFill=function(it){this.canvasContext.fill(it)},CanvasRendererBase.prototype.ctxFillRect=function(it,g,et,ot){this.canvasContext.fillRect(it,g,et,ot)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(it){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}it&&(this.globalData.blendMode="source-over"),this.contextData.restore(it)},CanvasRendererBase.prototype.configAnimation=function(it){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var g=this.animationItem.container.style;g.width="100%",g.height="100%";var et="0px 0px 0px";g.transformOrigin=et,g.mozTransformOrigin=et,g.webkitTransformOrigin=et,g["-webkit-transform"]=et,g.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=it,this.layers=it.layers,this.transformCanvas={w:it.w,h:it.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(it,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(it.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(it,g){this.reset();var et,ot;it?(et=it,ot=g,this.canvasContext.canvas.width=et,this.canvasContext.canvas.height=ot):(this.animationItem.wrapper&&this.animationItem.container?(et=this.animationItem.wrapper.offsetWidth,ot=this.animationItem.wrapper.offsetHeight):(et=this.canvasContext.canvas.width,ot=this.canvasContext.canvas.height),this.canvasContext.canvas.width=et*this.renderConfig.dpr,this.canvasContext.canvas.height=ot*this.renderConfig.dpr);var ut,ct;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var dt=this.renderConfig.preserveAspectRatio.split(" "),ft=dt[1]||"meet",St=dt[0]||"xMidYMid",kt=St.substr(0,4),Tt=St.substr(4);ut=et/ot,ct=this.transformCanvas.w/this.transformCanvas.h,ct>ut&&ft==="meet"||ct<ut&&ft==="slice"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=et/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr)),kt==="xMid"&&(ct<ut&&ft==="meet"||ct>ut&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))/2*this.renderConfig.dpr:kt==="xMax"&&(ct<ut&&ft==="meet"||ct>ut&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Tt==="YMid"&&(ct>ut&&ft==="meet"||ct<ut&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))/2*this.renderConfig.dpr:Tt==="YMax"&&(ct>ut&&ft==="meet"||ct<ut&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var it,g=this.layers?this.layers.length:0;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(it,g){if(!(this.renderedFrame===it&&this.renderConfig.clearCanvas===!0&&!g||this.destroyed||it===-1)){this.renderedFrame=it,this.globalData.frameNum=it-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||g,this.globalData.projectInterface.currentFrame=it;var et,ot=this.layers.length;for(this.completeLayers||this.checkLayers(it),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(it-this.layers[et].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){var et=this.createItem(this.layers[it],this,this.globalData);g[it]=et,et.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var it,g=15;for(it=0;it<g;it+=1){var et=new CanvasContext;this.stack[it]=et}this._length=g,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var it=this._length*2,g=0;for(g=this._length;g<it;g+=1)this.stack[g]=new CanvasContext;this._length=it},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(it){this.cArrPos-=1;var g=this.stack[this.cArrPos],et=g.transform,ot,ut=this.cTr.props;for(ot=0;ot<16;ot+=1)ut[ot]=et[ot];if(it){this.nativeContext.restore();var ct=this.stack[this.cArrPos+1];this.appliedFillStyle=ct.fillStyle,this.appliedStrokeStyle=ct.strokeStyle,this.appliedLineWidth=ct.lineWidth,this.appliedLineCap=ct.lineCap,this.appliedLineJoin=ct.lineJoin,this.appliedMiterLimit=ct.miterLimit}this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13]),(it||g.opacity!==-1&&this.currentOpacity!==g.opacity)&&(this.nativeContext.globalAlpha=g.opacity,this.currentOpacity=g.opacity),this.currentFillStyle=g.fillStyle,this.currentStrokeStyle=g.strokeStyle,this.currentLineWidth=g.lineWidth,this.currentLineCap=g.lineCap,this.currentLineJoin=g.lineJoin,this.currentMiterLimit=g.miterLimit},CVContextData.prototype.save=function(it){it&&this.nativeContext.save();var g=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var et=this.stack[this.cArrPos],ot;for(ot=0;ot<16;ot+=1)et.transform[ot]=g[ot];this.cArrPos+=1;var ut=this.stack[this.cArrPos];ut.opacity=et.opacity,ut.fillStyle=et.fillStyle,ut.strokeStyle=et.strokeStyle,ut.lineWidth=et.lineWidth,ut.lineCap=et.lineCap,ut.lineJoin=et.lineJoin,ut.miterLimit=et.miterLimit},CVContextData.prototype.setOpacity=function(it){this.stack[this.cArrPos].opacity=it},CVContextData.prototype.setContext=function(it){this.nativeContext=it},CVContextData.prototype.fillStyle=function(it){this.stack[this.cArrPos].fillStyle!==it&&(this.currentFillStyle=it,this.stack[this.cArrPos].fillStyle=it)},CVContextData.prototype.strokeStyle=function(it){this.stack[this.cArrPos].strokeStyle!==it&&(this.currentStrokeStyle=it,this.stack[this.cArrPos].strokeStyle=it)},CVContextData.prototype.lineWidth=function(it){this.stack[this.cArrPos].lineWidth!==it&&(this.currentLineWidth=it,this.stack[this.cArrPos].lineWidth=it)},CVContextData.prototype.lineCap=function(it){this.stack[this.cArrPos].lineCap!==it&&(this.currentLineCap=it,this.stack[this.cArrPos].lineCap=it)},CVContextData.prototype.lineJoin=function(it){this.stack[this.cArrPos].lineJoin!==it&&(this.currentLineJoin=it,this.stack[this.cArrPos].lineJoin=it)},CVContextData.prototype.miterLimit=function(it){this.stack[this.cArrPos].miterLimit!==it&&(this.currentMiterLimit=it,this.stack[this.cArrPos].miterLimit=it)},CVContextData.prototype.transform=function(it){this.transformMat.cloneFromProps(it);var g=this.cTr;this.transformMat.multiply(g),g.cloneFromProps(this.transformMat.props);var et=g.props;this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13])},CVContextData.prototype.opacity=function(it){var g=this.stack[this.cArrPos].opacity;g*=it<0?0:it,this.stack[this.cArrPos].opacity!==g&&(this.currentOpacity!==it&&(this.nativeContext.globalAlpha=it,this.currentOpacity=it),this.stack[this.cArrPos].opacity=g)},CVContextData.prototype.fill=function(it){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(it)},CVContextData.prototype.fillRect=function(it,g,et,ot){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(it,g,et,ot)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(it,g,et){this.completeLayers=!1,this.layers=it.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var it=this.canvasContext;it.beginPath(),it.moveTo(0,0),it.lineTo(this.data.w,0),it.lineTo(this.data.w,this.data.h),it.lineTo(0,this.data.h),it.lineTo(0,0),it.clip();var g,et=this.layers.length;for(g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()},CVCompElement.prototype.destroy=function(){var it,g=this.layers.length;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function CanvasRenderer(it,g){this.animationItem=it,this.renderConfig={clearCanvas:g&&g.clearCanvas!==void 0?g.clearCanvas:!0,context:g&&g.context||null,progressiveLoad:g&&g.progressiveLoad||!1,preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",className:g&&g.className||"",id:g&&g.id||"",runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.renderConfig.dpr=g&&g.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=g&&g.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var g=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var et=this.finalTransform.mat.toCSS();g.transform=et,g.webkitTransform=et}this.finalTransform._opMdf&&(g.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var it;this.data.hasMask?(it=createNS("rect"),it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(it=createTag("div"),it.style.width=this.data.sw+"px",it.style.height=this.data.sh+"px",it.style.backgroundColor=this.data.sc),this.layerElement.appendChild(it)};function HShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(it,g,et),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var it;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),it=this.svgElement;else{it=createNS("svg");var g=this.comp.data?this.comp.data:this.globalData.compSize;it.setAttribute("width",g.w),it.setAttribute("height",g.h),it.appendChild(this.shapesContainer),this.layerElement.appendChild(it)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=it},HShapeElement.prototype.getTransformedPoint=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g=it[et].mProps.v.applyToPointArray(g[0],g[1],0);return g},HShapeElement.prototype.calculateShapeBoundingBox=function(it,g){var et=it.sh.v,ot=it.transformers,ut,ct=et._length,dt,ft,St,kt;if(!(ct<=1)){for(ut=0;ut<ct-1;ut+=1)dt=this.getTransformedPoint(ot,et.v[ut]),ft=this.getTransformedPoint(ot,et.o[ut]),St=this.getTransformedPoint(ot,et.i[ut+1]),kt=this.getTransformedPoint(ot,et.v[ut+1]),this.checkBounds(dt,ft,St,kt,g);et.c&&(dt=this.getTransformedPoint(ot,et.v[ut]),ft=this.getTransformedPoint(ot,et.o[ut]),St=this.getTransformedPoint(ot,et.i[0]),kt=this.getTransformedPoint(ot,et.v[0]),this.checkBounds(dt,ft,St,kt,g))}},HShapeElement.prototype.checkBounds=function(it,g,et,ot,ut){this.getBoundsOfCurve(it,g,et,ot);var ct=this.shapeBoundingBox;ut.x=bmMin(ct.left,ut.x),ut.xMax=bmMax(ct.right,ut.xMax),ut.y=bmMin(ct.top,ut.y),ut.yMax=bmMax(ct.bottom,ut.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(it,g,et,ot){for(var ut=[[it[0],ot[0]],[it[1],ot[1]]],ct,dt,ft,St,kt,Tt,Rt,jt=0;jt<2;++jt)dt=6*it[jt]-12*g[jt]+6*et[jt],ct=-3*it[jt]+9*g[jt]-9*et[jt]+3*ot[jt],ft=3*g[jt]-3*it[jt],dt|=0,ct|=0,ft|=0,ct===0&&dt===0||(ct===0?(St=-ft/dt,St>0&&St<1&&ut[jt].push(this.calculateF(St,it,g,et,ot,jt))):(kt=dt*dt-4*ft*ct,kt>=0&&(Tt=(-dt+bmSqrt(kt))/(2*ct),Tt>0&&Tt<1&&ut[jt].push(this.calculateF(Tt,it,g,et,ot,jt)),Rt=(-dt-bmSqrt(kt))/(2*ct),Rt>0&&Rt<1&&ut[jt].push(this.calculateF(Rt,it,g,et,ot,jt)))));this.shapeBoundingBox.left=bmMin.apply(null,ut[0]),this.shapeBoundingBox.top=bmMin.apply(null,ut[1]),this.shapeBoundingBox.right=bmMax.apply(null,ut[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ut[1])},HShapeElement.prototype.calculateF=function(it,g,et,ot,ut,ct){return bmPow(1-it,3)*g[ct]+3*bmPow(1-it,2)*it*et[ct]+3*(1-it)*bmPow(it,2)*ot[ct]+bmPow(it,3)*ut[ct]},HShapeElement.prototype.calculateBoundingBox=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]&&it[et].sh?this.calculateShapeBoundingBox(it[et],g):it[et]&&it[et].it?this.calculateBoundingBox(it[et].it,g):it[et]&&it[et].style&&it[et].w&&this.expandStrokeBoundingBox(it[et].w,g)},HShapeElement.prototype.expandStrokeBoundingBox=function(it,g){var et=0;if(it.keyframes){for(var ot=0;ot<it.keyframes.length;ot+=1){var ut=it.keyframes[ot].s;ut>et&&(et=ut)}et*=it.mult}else et=it.v*it.mult;g.x-=et,g.xMax+=et,g.y-=et,g.yMax+=et},HShapeElement.prototype.currentBoxContains=function(it){return this.currentBBox.x<=it.x&&this.currentBBox.y<=it.y&&this.currentBBox.width+this.currentBBox.x>=it.x+it.width&&this.currentBBox.height+this.currentBBox.y>=it.y+it.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var it=this.tempBoundingBox,g=999999;if(it.x=g,it.xMax=-g,it.y=g,it.yMax=-g,this.calculateBoundingBox(this.itemsData,it),it.width=it.xMax<it.x?0:it.xMax-it.x,it.height=it.yMax<it.y?0:it.yMax-it.y,this.currentBoxContains(it))return;var et=!1;if(this.currentBBox.w!==it.width&&(this.currentBBox.w=it.width,this.shapeCont.setAttribute("width",it.width),et=!0),this.currentBBox.h!==it.height&&(this.currentBBox.h=it.height,this.shapeCont.setAttribute("height",it.height),et=!0),et||this.currentBBox.x!==it.x||this.currentBBox.y!==it.y){this.currentBBox.w=it.width,this.currentBBox.h=it.height,this.currentBBox.x=it.x,this.currentBBox.y=it.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ot=this.shapeCont.style,ut="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ot.transform=ut,ot.webkitTransform=ut}}};function HTextElement(it,g,et){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var it=createNS("g");this.maskedElement.appendChild(it),this.innerElem=it}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=this.innerElem.style,et=it.fc?this.buildColor(it.fc):"rgba(0,0,0,0)";g.fill=et,g.color=et,it.sc&&(g.stroke=this.buildColor(it.sc),g.strokeWidth=it.sw+"px");var ot=this.globalData.fontManager.getFontByName(it.f);if(!this.globalData.fontManager.chars)if(g.fontSize=it.finalSize+"px",g.lineHeight=it.finalSize+"px",ot.fClass)this.innerElem.className=ot.fClass;else{g.fontFamily=ot.fFamily;var ut=it.fWeight,ct=it.fStyle;g.fontStyle=ct,g.fontWeight=ut}var dt,ft,St=it.l;ft=St.length;var kt,Tt,Rt,jt=this.mHelper,Ft,Bt="",Ht=0;for(dt=0;dt<ft;dt+=1){if(this.globalData.fontManager.chars?(this.textPaths[Ht]?kt=this.textPaths[Ht]:(kt=createNS("path"),kt.setAttribute("stroke-linecap",lineCapEnum[1]),kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Ht]?(Tt=this.textSpans[Ht],Rt=Tt.children[0]):(Tt=createTag("div"),Tt.style.lineHeight=0,Rt=createNS("svg"),Rt.appendChild(kt),styleDiv(Tt)))):this.isMasked?kt=this.textPaths[Ht]?this.textPaths[Ht]:createNS("text"):this.textSpans[Ht]?(Tt=this.textSpans[Ht],kt=this.textPaths[Ht]):(Tt=createTag("span"),styleDiv(Tt),kt=createTag("span"),styleDiv(kt),Tt.appendChild(kt)),this.globalData.fontManager.chars){var Yt=this.globalData.fontManager.getCharData(it.finalText[dt],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),zt;if(Yt?zt=Yt.data:zt=null,jt.reset(),zt&&zt.shapes&&zt.shapes.length&&(Ft=zt.shapes[0].it,jt.scale(it.finalSize/100,it.finalSize/100),Bt=this.createPathShape(jt,Ft),kt.setAttribute("d",Bt)),this.isMasked)this.innerElem.appendChild(kt);else{if(this.innerElem.appendChild(Tt),zt&&zt.shapes){document.body.appendChild(Rt);var Kt=Rt.getBBox();Rt.setAttribute("width",Kt.width+2),Rt.setAttribute("height",Kt.height+2),Rt.setAttribute("viewBox",Kt.x-1+" "+(Kt.y-1)+" "+(Kt.width+2)+" "+(Kt.height+2));var en=Rt.style,tn="translate("+(Kt.x-1)+"px,"+(Kt.y-1)+"px)";en.transform=tn,en.webkitTransform=tn,St[dt].yOffset=Kt.y-1}else Rt.setAttribute("width",1),Rt.setAttribute("height",1);Tt.appendChild(Rt)}}else if(kt.textContent=St[dt].val,kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(kt);else{this.innerElem.appendChild(Tt);var on=kt.style,an="translate3d(0,"+-it.finalSize/1.2+"px,0)";on.transform=an,on.webkitTransform=an}this.isMasked?this.textSpans[Ht]=kt:this.textSpans[Ht]=Tt,this.textSpans[Ht].style.display="block",this.textPaths[Ht]=kt,Ht+=1}for(;Ht<this.textSpans.length;)this.textSpans[Ht].style.display="none",Ht+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var it;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),it=this.svgElement.style;var g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";it.transform=g,it.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var et,ot,ut=0,ct=this.textAnimator.renderedLetters,dt=this.textProperty.currentData.l;ot=dt.length;var ft,St,kt;for(et=0;et<ot;et+=1)dt[et].n?ut+=1:(St=this.textSpans[et],kt=this.textPaths[et],ft=ct[ut],ut+=1,ft._mdf.m&&(this.isMasked?St.setAttribute("transform",ft.m):(St.style.webkitTransform=ft.m,St.style.transform=ft.m)),St.style.opacity=ft.o,ft.sw&&ft._mdf.sw&&kt.setAttribute("stroke-width",ft.sw),ft.sc&&ft._mdf.sc&&kt.setAttribute("stroke",ft.sc),ft.fc&&ft._mdf.fc&&(kt.setAttribute("fill",ft.fc),kt.style.color=ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Tt=this.innerElem.getBBox();this.currentBBox.w!==Tt.width&&(this.currentBBox.w=Tt.width,this.svgElement.setAttribute("width",Tt.width)),this.currentBBox.h!==Tt.height&&(this.currentBBox.h=Tt.height,this.svgElement.setAttribute("height",Tt.height));var Rt=1;if(this.currentBBox.w!==Tt.width+Rt*2||this.currentBBox.h!==Tt.height+Rt*2||this.currentBBox.x!==Tt.x-Rt||this.currentBBox.y!==Tt.y-Rt){this.currentBBox.w=Tt.width+Rt*2,this.currentBBox.h=Tt.height+Rt*2,this.currentBBox.x=Tt.x-Rt,this.currentBBox.y=Tt.y-Rt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),it=this.svgElement.style;var jt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";it.transform=jt,it.webkitTransform=jt}}}};function HCameraElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initHierarchy();var ot=PropertyFactory.getProp;if(this.pe=ot(this,it.pe,0,0,this),it.ks.p.s?(this.px=ot(this,it.ks.p.x,1,0,this),this.py=ot(this,it.ks.p.y,1,0,this),this.pz=ot(this,it.ks.p.z,1,0,this)):this.p=ot(this,it.ks.p,1,0,this),it.ks.a&&(this.a=ot(this,it.ks.a,1,0,this)),it.ks.or.k.length&&it.ks.or.k[0].to){var ut,ct=it.ks.or.k.length;for(ut=0;ut<ct;ut+=1)it.ks.or.k[ut].to=null,it.ks.or.k[ut].ti=null}this.or=ot(this,it.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ot(this,it.ks.rx,0,degToRads,this),this.ry=ot(this,it.ks.ry,0,degToRads,this),this.rz=ot(this,it.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var it,g=this.comp.threeDElements.length,et,ot,ut;for(it=0;it<g;it+=1)if(et=this.comp.threeDElements[it],et.type==="3d"){ot=et.perspectiveElem.style,ut=et.container.style;var ct=this.pe.v+"px",dt="0px 0px 0px",ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ot.perspective=ct,ot.webkitPerspective=ct,ut.transformOrigin=dt,ut.mozTransformOrigin=dt,ut.webkitTransformOrigin=dt,ot.transform=ft,ot.webkitTransform=ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var it=this._isFirstFrame,g,et;if(this.hierarchy)for(et=this.hierarchy.length,g=0;g<et;g+=1)it=this.hierarchy[g].finalTransform.mProp._mdf||it;if(it||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(et=this.hierarchy.length-1,g=et;g>=0;g-=1){var ot=this.hierarchy[g].finalTransform.mProp;this.mat.translate(-ot.p.v[0],-ot.p.v[1],ot.p.v[2]),this.mat.rotateX(-ot.or.v[0]).rotateY(-ot.or.v[1]).rotateZ(ot.or.v[2]),this.mat.rotateX(-ot.rx.v).rotateY(-ot.ry.v).rotateZ(ot.rz.v),this.mat.scale(1/ot.s.v[0],1/ot.s.v[1],1/ot.s.v[2]),this.mat.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ut;this.p?ut=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ut=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ct=Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)),dt=[ut[0]/ct,ut[1]/ct,ut[2]/ct],ft=Math.sqrt(dt[2]*dt[2]+dt[0]*dt[0]),St=Math.atan2(dt[1],ft),kt=Math.atan2(dt[0],-dt[2]);this.mat.rotateY(kt).rotateX(-St)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Tt=!this._prevMat.equals(this.mat);if((Tt||this.pe._mdf)&&this.comp.threeDElements){et=this.comp.threeDElements.length;var Rt,jt,Ft;for(g=0;g<et;g+=1)if(Rt=this.comp.threeDElements[g],Rt.type==="3d"){if(Tt){var Bt=this.mat.toCSS();Ft=Rt.container.style,Ft.transform=Bt,Ft.webkitTransform=Bt}this.pe._mdf&&(jt=Rt.perspectiveElem.style,jt.perspective=this.pe.v+"px",jt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData),g=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(g),g.crossOrigin="anonymous",g.src=it,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){var ot=this.layers[g];if(!ot.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(et,g);else{for(var ut=0,ct,dt,ft;ut<g;)this.elements[ut]&&this.elements[ut]!==!0&&this.elements[ut].getBaseElement&&(dt=this.elements[ut],ft=this.layers[ut].ddd?this.getThreeDContainerByPos(ut):dt.getBaseElement(),ct=ft||ct),ut+=1;ct?(!ot.ddd||!this.supports3d)&&this.layerElement.insertBefore(et,ct):(!ot.ddd||!this.supports3d)&&this.layerElement.appendChild(et)}else this.addTo3dContainer(et,g)}},HybridRendererBase.prototype.createShape=function(it){return this.supports3d?new HShapeElement(it,this.globalData,this):new SVGShapeElement(it,this.globalData,this)},HybridRendererBase.prototype.createText=function(it){return this.supports3d?new HTextElement(it,this.globalData,this):new SVGTextLottieElement(it,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(it){return this.camera=new HCameraElement(it,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(it){return this.supports3d?new HImageElement(it,this.globalData,this):new IImageElement(it,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(it){return this.supports3d?new HSolidElement(it,this.globalData,this):new ISolidElement(it,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(it){for(var g=0,et=this.threeDElements.length;g<et;){if(this.threeDElements[g].startPos<=it&&this.threeDElements[g].endPos>=it)return this.threeDElements[g].perspectiveElem;g+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(it,g){var et=createTag("div"),ot,ut;styleDiv(et);var ct=createTag("div");if(styleDiv(ct),g==="3d"){ot=et.style,ot.width=this.globalData.compSize.w+"px",ot.height=this.globalData.compSize.h+"px";var dt="50% 50%";ot.webkitTransformOrigin=dt,ot.mozTransformOrigin=dt,ot.transformOrigin=dt,ut=ct.style;var ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ut.transform=ft,ut.webkitTransform=ft}et.appendChild(ct);var St={container:ct,perspectiveElem:et,startPos:it,endPos:it,type:g};return this.threeDElements.push(St),St},HybridRendererBase.prototype.build3dContainers=function(){var it,g=this.layers.length,et,ot="";for(it=0;it<g;it+=1)this.layers[it].ddd&&this.layers[it].ty!==3?(ot!=="3d"&&(ot="3d",et=this.createThreeDContainer(it,"3d")),et.endPos=Math.max(et.endPos,it)):(ot!=="2d"&&(ot="2d",et=this.createThreeDContainer(it,"2d")),et.endPos=Math.max(et.endPos,it));for(g=this.threeDElements.length,it=g-1;it>=0;it-=1)this.resizerElem.appendChild(this.threeDElements[it].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(it,g){for(var et=0,ot=this.threeDElements.length;et<ot;){if(g<=this.threeDElements[et].endPos){for(var ut=this.threeDElements[et].startPos,ct;ut<g;)this.elements[ut]&&this.elements[ut].getBaseElement&&(ct=this.elements[ut].getBaseElement()),ut+=1;ct?this.threeDElements[et].container.insertBefore(it,ct):this.threeDElements[et].container.appendChild(it);break}et+=1}},HybridRendererBase.prototype.configAnimation=function(it){var g=createTag("div"),et=this.animationItem.wrapper,ot=g.style;ot.width=it.w+"px",ot.height=it.h+"px",this.resizerElem=g,styleDiv(g),ot.transformStyle="flat",ot.mozTransformStyle="flat",ot.webkitTransformStyle="flat",this.renderConfig.className&&g.setAttribute("class",this.renderConfig.className),et.appendChild(g),ot.overflow="hidden";var ut=createNS("svg");ut.setAttribute("width","1"),ut.setAttribute("height","1"),styleDiv(ut),this.resizerElem.appendChild(ut);var ct=createNS("defs");ut.appendChild(ct),this.data=it,this.setupGlobalData(it,ut),this.globalData.defs=ct,this.layers=it.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var it=this.animationItem.wrapper.offsetWidth,g=this.animationItem.wrapper.offsetHeight,et=it/g,ot=this.globalData.compSize.w/this.globalData.compSize.h,ut,ct,dt,ft;ot>et?(ut=it/this.globalData.compSize.w,ct=it/this.globalData.compSize.w,dt=0,ft=(g-this.globalData.compSize.h*(it/this.globalData.compSize.w))/2):(ut=g/this.globalData.compSize.h,ct=g/this.globalData.compSize.h,dt=(it-this.globalData.compSize.w*(g/this.globalData.compSize.h))/2,ft=0);var St=this.resizerElem.style;St.webkitTransform="matrix3d("+ut+",0,0,0,0,"+ct+",0,0,0,0,1,0,"+dt+","+ft+",0,1)",St.transform=St.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var it=this.globalData.compSize.w,g=this.globalData.compSize.h,et,ot=this.threeDElements.length;for(et=0;et<ot;et+=1){var ut=this.threeDElements[et].perspectiveElem.style;ut.webkitPerspective=Math.sqrt(Math.pow(it,2)+Math.pow(g,2))+"px",ut.perspective=ut.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(it){var g,et=it.length,ot=createTag("div");for(g=0;g<et;g+=1)if(it[g].xt){var ut=this.createComp(it[g],ot,this.globalData.comp,null);ut.initExpressions(),this.globalData.projectInterface.registerComposition(ut)}};function HCompElement(it,g,et){this.layers=it.layers,this.supports3d=!it.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(it,g){for(var et=0,ot;et<g;)this.elements[et]&&this.elements[et].getBaseElement&&(ot=this.elements[et].getBaseElement()),et+=1;ot?this.layerElement.insertBefore(it,ot):this.layerElement.appendChild(it)},HCompElement.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};function HybridRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"},runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};var CompExpressionInterface=function(){return function(it){function g(et){for(var ot=0,ut=it.layers.length;ot<ut;){if(it.layers[ot].nm===et||it.layers[ot].ind===et)return it.elements[ot].layerInterface;ot+=1}return null}return Object.defineProperty(g,"_name",{value:it.data.nm}),g.layer=g,g.pixelAspect=1,g.height=it.data.h||it.globalData.compSize.h,g.width=it.data.w||it.globalData.compSize.w,g.pixelAspect=1,g.frameDuration=1/it.globalData.frameRate,g.displayStartTime=0,g.numLayers=it.layers.length,g}}();function _typeof$2(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(et){return typeof et}:_typeof$2=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(it)}function seedRandom(it,g){var et=this,ot=256,ut=6,ct=52,dt="random",ft=g.pow(ot,ut),St=g.pow(2,ct),kt=St*2,Tt=ot-1,Rt;function jt(en,tn,on){var an=[];tn=tn===!0?{entropy:!0}:tn||{};var un=Yt(Ht(tn.entropy?[en,Kt(it)]:en===null?zt():en,3),an),dn=new Ft(an),Sn=function(){for(var bn=dn.g(ut),En=ft,kn=0;bn<St;)bn=(bn+kn)*ot,En*=ot,kn=dn.g(1);for(;bn>=kt;)bn/=2,En/=2,kn>>>=1;return(bn+kn)/En};return Sn.int32=function(){return dn.g(4)|0},Sn.quick=function(){return dn.g(4)/4294967296},Sn.double=Sn,Yt(Kt(dn.S),it),(tn.pass||on||function(mn,bn,En,kn){return kn&&(kn.S&&Bt(kn,dn),mn.state=function(){return Bt(dn,{})}),En?(g[dt]=mn,bn):mn})(Sn,un,"global"in tn?tn.global:this==g,tn.state)}g["seed"+dt]=jt;function Ft(en){var tn,on=en.length,an=this,un=0,dn=an.i=an.j=0,Sn=an.S=[];for(on||(en=[on++]);un<ot;)Sn[un]=un++;for(un=0;un<ot;un++)Sn[un]=Sn[dn=Tt&dn+en[un%on]+(tn=Sn[un])],Sn[dn]=tn;an.g=function(mn){for(var bn,En=0,kn=an.i,Pn=an.j,Ln=an.S;mn--;)bn=Ln[kn=Tt&kn+1],En=En*ot+Ln[Tt&(Ln[kn]=Ln[Pn=Tt&Pn+bn])+(Ln[Pn]=bn)];return an.i=kn,an.j=Pn,En}}function Bt(en,tn){return tn.i=en.i,tn.j=en.j,tn.S=en.S.slice(),tn}function Ht(en,tn){var on=[],an=_typeof$2(en),un;if(tn&&an=="object")for(un in en)try{on.push(Ht(en[un],tn-1))}catch{}return on.length?on:an=="string"?en:en+"\0"}function Yt(en,tn){for(var on=en+"",an,un=0;un<on.length;)tn[Tt&un]=Tt&(an^=tn[Tt&un]*19)+on.charCodeAt(un++);return Kt(tn)}function zt(){try{var en=new Uint8Array(ot);return(et.crypto||et.msCrypto).getRandomValues(en),Kt(en)}catch{var tn=et.navigator,on=tn&&tn.plugins;return[+new Date,et,on,et.screen,Kt(it)]}}function Kt(en){return String.fromCharCode.apply(0,en)}Yt(g.random(),it)}function initialize$2(it){seedRandom([],it)}var propTypes={SHAPE:"shape"};function _typeof$1(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(et){return typeof et}:_typeof$1=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(it)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(it){return it.constructor===Array||it.constructor===Float32Array}function isNumerable(it,g){return it==="number"||g instanceof Number||it==="boolean"||it==="string"}function $bm_neg(it){var g=_typeof$1(it);if(g==="number"||it instanceof Number||g==="boolean")return-it;if($bm_isInstanceOfArray(it)){var et,ot=it.length,ut=[];for(et=0;et<ot;et+=1)ut[et]=-it[et];return ut}return it.propType?it.v:-it}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g)||et==="string"||ot==="string")return it+g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]+=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it+g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ut=0,ct=it.length,dt=g.length,ft=[];ut<ct||ut<dt;)(typeof it[ut]=="number"||it[ut]instanceof Number)&&(typeof g[ut]=="number"||g[ut]instanceof Number)?ft[ut]=it[ut]+g[ut]:ft[ut]=g[ut]===void 0?it[ut]:it[ut]||g[ut],ut+=1;return ft}return 0}var add=sum;function sub(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g))return et==="string"&&(it=parseInt(it,10)),ot==="string"&&(g=parseInt(g,10)),it-g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]-=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it-g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ut=0,ct=it.length,dt=g.length,ft=[];ut<ct||ut<dt;)(typeof it[ut]=="number"||it[ut]instanceof Number)&&(typeof g[ut]=="number"||g[ut]instanceof Number)?ft[ut]=it[ut]-g[ut]:ft[ut]=g[ut]===void 0?it[ut]:it[ut]||g[ut],ut+=1;return ft}return 0}function mul(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ut;if(isNumerable(et,it)&&isNumerable(ot,g))return it*g;var ct,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it[ct]*g;return ut}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it*g[ct];return ut}return 0}function div(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ut;if(isNumerable(et,it)&&isNumerable(ot,g))return it/g;var ct,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it[ct]/g;return ut}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it/g[ct];return ut}return 0}function mod(it,g){return typeof it=="string"&&(it=parseInt(it,10)),typeof g=="string"&&(g=parseInt(g,10)),it%g}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(it,g,et){if(g>et){var ot=et;et=g,g=ot}return Math.min(Math.max(it,g),et)}function radiansToDegrees(it){return it/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(it){return it*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(it,g){if(typeof it=="number"||it instanceof Number)return g=g||0,Math.abs(it-g);g||(g=helperLengthArray);var et,ot=Math.min(it.length,g.length),ut=0;for(et=0;et<ot;et+=1)ut+=Math.pow(g[et]-it[et],2);return Math.sqrt(ut)}function normalize(it){return div(it,length(it))}function rgbToHsl(it){var g=it[0],et=it[1],ot=it[2],ut=Math.max(g,et,ot),ct=Math.min(g,et,ot),dt,ft,St=(ut+ct)/2;if(ut===ct)dt=0,ft=0;else{var kt=ut-ct;switch(ft=St>.5?kt/(2-ut-ct):kt/(ut+ct),ut){case g:dt=(et-ot)/kt+(et<ot?6:0);break;case et:dt=(ot-g)/kt+2;break;case ot:dt=(g-et)/kt+4;break}dt/=6}return[dt,ft,St,it[3]]}function hue2rgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslToRgb(it){var g=it[0],et=it[1],ot=it[2],ut,ct,dt;if(et===0)ut=ot,dt=ot,ct=ot;else{var ft=ot<.5?ot*(1+et):ot+et-ot*et,St=2*ot-ft;ut=hue2rgb(St,ft,g+1/3),ct=hue2rgb(St,ft,g),dt=hue2rgb(St,ft,g-1/3)}return[ut,ct,dt,it[3]]}function linear(it,g,et,ot,ut){if((ot===void 0||ut===void 0)&&(ot=g,ut=et,g=0,et=1),et<g){var ct=et;et=g,g=ct}if(it<=g)return ot;if(it>=et)return ut;var dt=et===g?0:(it-g)/(et-g);if(!ot.length)return ot+(ut-ot)*dt;var ft,St=ot.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=ot[ft]+(ut[ft]-ot[ft])*dt;return kt}function random(it,g){if(g===void 0&&(it===void 0?(it=0,g=1):(g=it,it=void 0)),g.length){var et,ot=g.length;it||(it=createTypedArray("float32",ot));var ut=createTypedArray("float32",ot),ct=BMMath.random();for(et=0;et<ot;et+=1)ut[et]=it[et]+ct*(g[et]-it[et]);return ut}it===void 0&&(it=0);var dt=BMMath.random();return it+dt*(g-it)}function createPath(it,g,et,ot){var ut,ct=it.length,dt=shapePool.newElement();dt.setPathData(!!ot,ct);var ft=[0,0],St,kt;for(ut=0;ut<ct;ut+=1)St=g&&g[ut]?g[ut]:ft,kt=et&&et[ut]?et[ut]:ft,dt.setTripleAt(it[ut][0],it[ut][1],kt[0]+it[ut][0],kt[1]+it[ut][1],St[0]+it[ut][0],St[1]+it[ut][1],ut,!0);return dt}function initiateExpression(elem,data,property){function noOp(it){return it}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function it(g,et){var ot,ut,ct=this.pv.length?this.pv.length:1,dt=createTypedArray("float32",ct);g=5;var ft=Math.floor(time*g);for(ot=0,ut=0;ot<ft;){for(ut=0;ut<ct;ut+=1)dt[ut]+=-et+et*2*BMMath.random();ot+=1}var St=time*g,kt=St-Math.floor(St),Tt=createTypedArray("float32",ct);if(ct>1){for(ut=0;ut<ct;ut+=1)Tt[ut]=this.pv[ut]+dt[ut]+(-et+et*2*BMMath.random())*kt;return Tt}return this.pv+dt[0]+(-et+et*2*BMMath.random())*kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(it,g){return loopIn(it,g,!0)}function loopOutDuration(it,g){return loopOut(it,g,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(it,g){var et=[g[0]-it[0],g[1]-it[1],g[2]-it[2]],ot=Math.atan2(et[0],Math.sqrt(et[1]*et[1]+et[2]*et[2]))/degToRads,ut=-Math.atan2(et[1],et[2])/degToRads;return[ut,ot,0]}function easeOut(it,g,et,ot,ut){return applyEase(easeOutBez,it,g,et,ot,ut)}function easeIn(it,g,et,ot,ut){return applyEase(easeInBez,it,g,et,ot,ut)}function ease(it,g,et,ot,ut){return applyEase(easeInOutBez,it,g,et,ot,ut)}function applyEase(it,g,et,ot,ut,ct){ut===void 0?(ut=et,ct=ot):g=(g-et)/(ot-et),g>1?g=1:g<0&&(g=0);var dt=it(g);if($bm_isInstanceOfArray(ut)){var ft,St=ut.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=(ct[ft]-ut[ft])*dt+ut[ft];return kt}return(ct-ut)*dt+ut}function nearestKey(it){var g,et=data.k.length,ot,ut;if(!data.k.length||typeof data.k[0]=="number")ot=0,ut=0;else if(ot=-1,it*=elem.comp.globalData.frameRate,it<data.k[0].t)ot=1,ut=data.k[0].t;else{for(g=0;g<et-1;g+=1)if(it===data.k[g].t){ot=g+1,ut=data.k[g].t;break}else if(it>data.k[g].t&&it<data.k[g+1].t){it-data.k[g].t>data.k[g+1].t-it?(ot=g+2,ut=data.k[g+1].t):(ot=g+1,ut=data.k[g].t);break}ot===-1&&(ot=g+1,ut=data.k[g].t)}var ct={};return ct.index=ot,ct.time=ut/elem.comp.globalData.frameRate,ct}function key(it){var g,et,ot;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+it);it-=1,g={time:data.k[it].t/elem.comp.globalData.frameRate,value:[]};var ut=Object.prototype.hasOwnProperty.call(data.k[it],"s")?data.k[it].s:data.k[it-1].e;for(ot=ut.length,et=0;et<ot;et+=1)g[et]=ut[et],g.value[et]=ut[et];return g}function framesToTime(it,g){return g||(g=elem.comp.globalData.frameRate),it/g}function timeToFrames(it,g){return!it&&it!==0&&(it=time),g||(g=elem.comp.globalData.frameRate),it*g}function seedRandom(it){BMMath.seedrandom(randSeed+it)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(it,g){return typeof value=="string"?g===void 0?value.substring(it):value.substring(it,g):""}function substr(it,g){return typeof value=="string"?g===void 0?value.substr(it):value.substr(it,g):""}function posterizeTime(it){time=it===0?0:Math.floor(time*it)/it,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(it){return value=it,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var it={};it.initExpressions=g,it.resetFrame=ExpressionManager.resetFrame;function g(et){var ot=0,ut=[];function ct(){ot+=1}function dt(){ot-=1,ot===0&&St()}function ft(kt){ut.indexOf(kt)===-1&&ut.push(kt)}function St(){var kt,Tt=ut.length;for(kt=0;kt<Tt;kt+=1)ut[kt].release();ut.length=0}et.renderer.compInterface=CompExpressionInterface(et.renderer),et.renderer.globalData.projectInterface.registerComposition(et.renderer),et.renderer.globalData.pushExpression=ct,et.renderer.globalData.popExpression=dt,et.renderer.globalData.registerExpressionProperty=ft}return it}(),MaskManagerInterface=function(){function it(et,ot){this._mask=et,this._data=ot}Object.defineProperty(it.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(it.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var g=function(ot){var ut=createSizedArray(ot.viewData.length),ct,dt=ot.viewData.length;for(ct=0;ct<dt;ct+=1)ut[ct]=new it(ot.viewData[ct],ot.masksProperties[ct]);var ft=function(kt){for(ct=0;ct<dt;){if(ot.masksProperties[ct].nm===kt)return ut[ct];ct+=1}return null};return ft};return g}(),ExpressionPropertyInterface=function(){var it={pv:0,v:0,mult:1},g={pv:[0,0,0],v:[0,0,0],mult:1};function et(dt,ft,St){Object.defineProperty(dt,"velocity",{get:function(){return ft.getVelocityAtTime(ft.comp.currentFrame)}}),dt.numKeys=ft.keyframes?ft.keyframes.length:0,dt.key=function(kt){if(!dt.numKeys)return 0;var Tt="";"s"in ft.keyframes[kt-1]?Tt=ft.keyframes[kt-1].s:"e"in ft.keyframes[kt-2]?Tt=ft.keyframes[kt-2].e:Tt=ft.keyframes[kt-2].s;var Rt=St==="unidimensional"?new Number(Tt):Object.assign({},Tt);return Rt.time=ft.keyframes[kt-1].t/ft.elem.comp.globalData.frameRate,Rt.value=St==="unidimensional"?Tt[0]:Tt,Rt},dt.valueAtTime=ft.getValueAtTime,dt.speedAtTime=ft.getSpeedAtTime,dt.velocityAtTime=ft.getVelocityAtTime,dt.propertyGroup=ft.propertyGroup}function ot(dt){(!dt||!("pv"in dt))&&(dt=it);var ft=1/dt.mult,St=dt.pv*ft,kt=new Number(St);return kt.value=St,et(kt,dt,"unidimensional"),function(){return dt.k&&dt.getValue(),St=dt.v*ft,kt.value!==St&&(kt=new Number(St),kt.value=St,et(kt,dt,"unidimensional")),kt}}function ut(dt){(!dt||!("pv"in dt))&&(dt=g);var ft=1/dt.mult,St=dt.data&&dt.data.l||dt.pv.length,kt=createTypedArray("float32",St),Tt=createTypedArray("float32",St);return kt.value=Tt,et(kt,dt,"multidimensional"),function(){dt.k&&dt.getValue();for(var Rt=0;Rt<St;Rt+=1)Tt[Rt]=dt.v[Rt]*ft,kt[Rt]=Tt[Rt];return kt}}function ct(){return it}return function(dt){return dt?dt.propType==="unidimensional"?ot(dt):ut(dt):ct}}(),TransformExpressionInterface=function(){return function(it){function g(dt){switch(dt){case"scale":case"Scale":case"ADBE Scale":case 6:return g.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return g.rotation;case"ADBE Rotate X":return g.xRotation;case"ADBE Rotate Y":return g.yRotation;case"position":case"Position":case"ADBE Position":case 2:return g.position;case"ADBE Position_0":return g.xPosition;case"ADBE Position_1":return g.yPosition;case"ADBE Position_2":return g.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return g.anchorPoint;case"opacity":case"Opacity":case 11:return g.opacity;default:return null}}Object.defineProperty(g,"rotation",{get:ExpressionPropertyInterface(it.r||it.rz)}),Object.defineProperty(g,"zRotation",{get:ExpressionPropertyInterface(it.rz||it.r)}),Object.defineProperty(g,"xRotation",{get:ExpressionPropertyInterface(it.rx)}),Object.defineProperty(g,"yRotation",{get:ExpressionPropertyInterface(it.ry)}),Object.defineProperty(g,"scale",{get:ExpressionPropertyInterface(it.s)});var et,ot,ut,ct;return it.p?ct=ExpressionPropertyInterface(it.p):(et=ExpressionPropertyInterface(it.px),ot=ExpressionPropertyInterface(it.py),it.pz&&(ut=ExpressionPropertyInterface(it.pz))),Object.defineProperty(g,"position",{get:function(){return it.p?ct():[et(),ot(),ut?ut():0]}}),Object.defineProperty(g,"xPosition",{get:ExpressionPropertyInterface(it.px)}),Object.defineProperty(g,"yPosition",{get:ExpressionPropertyInterface(it.py)}),Object.defineProperty(g,"zPosition",{get:ExpressionPropertyInterface(it.pz)}),Object.defineProperty(g,"anchorPoint",{get:ExpressionPropertyInterface(it.a)}),Object.defineProperty(g,"opacity",{get:ExpressionPropertyInterface(it.o)}),Object.defineProperty(g,"skew",{get:ExpressionPropertyInterface(it.sk)}),Object.defineProperty(g,"skewAxis",{get:ExpressionPropertyInterface(it.sa)}),Object.defineProperty(g,"orientation",{get:ExpressionPropertyInterface(it.or)}),g}}(),LayerExpressionInterface=function(){function it(kt){var Tt=new Matrix;if(kt!==void 0){var Rt=this._elem.finalTransform.mProp.getValueAtTime(kt);Rt.clone(Tt)}else{var jt=this._elem.finalTransform.mProp;jt.applyToMatrix(Tt)}return Tt}function g(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.applyPoint(Rt,kt)}function et(kt,Tt){var Rt=this.getMatrix(Tt);return this.applyPoint(Rt,kt)}function ot(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.invertPoint(Rt,kt)}function ut(kt,Tt){var Rt=this.getMatrix(Tt);return this.invertPoint(Rt,kt)}function ct(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.applyToPointArray(Tt[0],Tt[1],Tt[2]||0)}function dt(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.inversePoint(Tt)}function ft(kt){var Tt=new Matrix;if(Tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Tt),this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(Tt);return Tt.inversePoint(kt)}return Tt.inversePoint(kt)}function St(){return[1,1,1,1]}return function(kt){var Tt;function Rt(Ht){Ft.mask=new MaskManagerInterface(Ht,kt)}function jt(Ht){Ft.effect=Ht}function Ft(Ht){switch(Ht){case"ADBE Root Vectors Group":case"Contents":case 2:return Ft.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Ft.effect;case"ADBE Text Properties":return Ft.textInterface;default:return null}}Ft.getMatrix=it,Ft.invertPoint=dt,Ft.applyPoint=ct,Ft.toWorld=et,Ft.toWorldVec=g,Ft.fromWorld=ut,Ft.fromWorldVec=ot,Ft.toComp=et,Ft.fromComp=ft,Ft.sampleImage=St,Ft.sourceRectAtTime=kt.sourceRectAtTime.bind(kt),Ft._elem=kt,Tt=TransformExpressionInterface(kt.finalTransform.mProp);var Bt=getDescriptor(Tt,"anchorPoint");return Object.defineProperties(Ft,{hasParent:{get:function(){return kt.hierarchy.length}},parent:{get:function(){return kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Tt,"rotation"),scale:getDescriptor(Tt,"scale"),position:getDescriptor(Tt,"position"),opacity:getDescriptor(Tt,"opacity"),anchorPoint:Bt,anchor_point:Bt,transform:{get:function(){return Tt}},active:{get:function(){return kt.isInRange}}}),Ft.startTime=kt.data.st,Ft.index=kt.data.ind,Ft.source=kt.data.refId,Ft.height=kt.data.ty===0?kt.data.h:100,Ft.width=kt.data.ty===0?kt.data.w:100,Ft.inPoint=kt.data.ip/kt.comp.globalData.frameRate,Ft.outPoint=kt.data.op/kt.comp.globalData.frameRate,Ft._name=kt.data.nm,Ft.registerMaskInterface=Rt,Ft.registerEffectsInterface=jt,Ft}}(),propertyGroupFactory=function(){return function(it,g){return function(et){return et=et===void 0?1:et,et<=0?it:g(et-1)}}}(),PropertyInterface=function(){return function(it,g){var et={_name:it};function ot(ut){return ut=ut===void 0?1:ut,ut<=0?et:g(ut-1)}return ot}}(),EffectsExpressionInterface=function(){var it={createEffectsInterface:g};function g(ut,ct){if(ut.effectsManager){var dt=[],ft=ut.data.ef,St,kt=ut.effectsManager.effectElements.length;for(St=0;St<kt;St+=1)dt.push(et(ft[St],ut.effectsManager.effectElements[St],ct,ut));var Tt=ut.data.ef||[],Rt=function(Ft){for(St=0,kt=Tt.length;St<kt;){if(Ft===Tt[St].nm||Ft===Tt[St].mn||Ft===Tt[St].ix)return dt[St];St+=1}return null};return Object.defineProperty(Rt,"numProperties",{get:function(){return Tt.length}}),Rt}return null}function et(ut,ct,dt,ft){function St(Ft){for(var Bt=ut.ef,Ht=0,Yt=Bt.length;Ht<Yt;){if(Ft===Bt[Ht].nm||Ft===Bt[Ht].mn||Ft===Bt[Ht].ix)return Bt[Ht].ty===5?Tt[Ht]:Tt[Ht]();Ht+=1}throw new Error}var kt=propertyGroupFactory(St,dt),Tt=[],Rt,jt=ut.ef.length;for(Rt=0;Rt<jt;Rt+=1)ut.ef[Rt].ty===5?Tt.push(et(ut.ef[Rt],ct.effectElements[Rt],ct.effectElements[Rt].propertyGroup,ft)):Tt.push(ot(ct.effectElements[Rt],ut.ef[Rt].ty,ft,kt));return ut.mn==="ADBE Color Control"&&Object.defineProperty(St,"color",{get:function(){return Tt[0]()}}),Object.defineProperties(St,{numProperties:{get:function(){return ut.np}},_name:{value:ut.nm},propertyGroup:{value:kt}}),St.enabled=ut.en!==0,St.active=St.enabled,St}function ot(ut,ct,dt,ft){var St=ExpressionPropertyInterface(ut.p);function kt(){return ct===10?dt.comp.compInterface(ut.p.v):St()}return ut.p.setGroupProperty&&ut.p.setGroupProperty(PropertyInterface("",ft)),kt}return it}(),ShapePathInterface=function(){return function(g,et,ot){var ut=et.sh;function ct(ft){return ft==="Shape"||ft==="shape"||ft==="Path"||ft==="path"||ft==="ADBE Vector Shape"||ft===2?ct.path:null}var dt=propertyGroupFactory(ct,ot);return ut.setGroupProperty(PropertyInterface("Path",dt)),Object.defineProperties(ct,{path:{get:function(){return ut.k&&ut.getValue(),ut}},shape:{get:function(){return ut.k&&ut.getValue(),ut}},_name:{value:g.nm},ix:{value:g.ix},propertyIndex:{value:g.ix},mn:{value:g.mn},propertyGroup:{value:ot}}),ct}}(),ShapeExpressionInterface=function(){function it(Bt,Ht,Yt){var zt=[],Kt,en=Bt?Bt.length:0;for(Kt=0;Kt<en;Kt+=1)Bt[Kt].ty==="gr"?zt.push(et(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="fl"?zt.push(ot(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="st"?zt.push(dt(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="tm"?zt.push(ft(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="tr"||(Bt[Kt].ty==="el"?zt.push(kt(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="sr"?zt.push(Tt(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="sh"?zt.push(ShapePathInterface(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="rc"?zt.push(Rt(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="rd"?zt.push(jt(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="rp"?zt.push(Ft(Bt[Kt],Ht[Kt],Yt)):Bt[Kt].ty==="gf"?zt.push(ut(Bt[Kt],Ht[Kt],Yt)):zt.push(ct(Bt[Kt],Ht[Kt])));return zt}function g(Bt,Ht,Yt){var zt,Kt=function(on){for(var an=0,un=zt.length;an<un;){if(zt[an]._name===on||zt[an].mn===on||zt[an].propertyIndex===on||zt[an].ix===on||zt[an].ind===on)return zt[an];an+=1}return typeof on=="number"?zt[on-1]:null};Kt.propertyGroup=propertyGroupFactory(Kt,Yt),zt=it(Bt.it,Ht.it,Kt.propertyGroup),Kt.numProperties=zt.length;var en=St(Bt.it[Bt.it.length-1],Ht.it[Ht.it.length-1],Kt.propertyGroup);return Kt.transform=en,Kt.propertyIndex=Bt.cix,Kt._name=Bt.nm,Kt}function et(Bt,Ht,Yt){var zt=function(on){switch(on){case"ADBE Vectors Group":case"Contents":case 2:return zt.content;default:return zt.transform}};zt.propertyGroup=propertyGroupFactory(zt,Yt);var Kt=g(Bt,Ht,zt.propertyGroup),en=St(Bt.it[Bt.it.length-1],Ht.it[Ht.it.length-1],zt.propertyGroup);return zt.content=Kt,zt.transform=en,Object.defineProperty(zt,"_name",{get:function(){return Bt.nm}}),zt.numProperties=Bt.np,zt.propertyIndex=Bt.ix,zt.nm=Bt.nm,zt.mn=Bt.mn,zt}function ot(Bt,Ht,Yt){function zt(Kt){return Kt==="Color"||Kt==="color"?zt.color:Kt==="Opacity"||Kt==="opacity"?zt.opacity:null}return Object.defineProperties(zt,{color:{get:ExpressionPropertyInterface(Ht.c)},opacity:{get:ExpressionPropertyInterface(Ht.o)},_name:{value:Bt.nm},mn:{value:Bt.mn}}),Ht.c.setGroupProperty(PropertyInterface("Color",Yt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",Yt)),zt}function ut(Bt,Ht,Yt){function zt(Kt){return Kt==="Start Point"||Kt==="start point"?zt.startPoint:Kt==="End Point"||Kt==="end point"?zt.endPoint:Kt==="Opacity"||Kt==="opacity"?zt.opacity:null}return Object.defineProperties(zt,{startPoint:{get:ExpressionPropertyInterface(Ht.s)},endPoint:{get:ExpressionPropertyInterface(Ht.e)},opacity:{get:ExpressionPropertyInterface(Ht.o)},type:{get:function(){return"a"}},_name:{value:Bt.nm},mn:{value:Bt.mn}}),Ht.s.setGroupProperty(PropertyInterface("Start Point",Yt)),Ht.e.setGroupProperty(PropertyInterface("End Point",Yt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",Yt)),zt}function ct(){function Bt(){return null}return Bt}function dt(Bt,Ht,Yt){var zt=propertyGroupFactory(un,Yt),Kt=propertyGroupFactory(an,zt);function en(dn){Object.defineProperty(an,Bt.d[dn].nm,{get:ExpressionPropertyInterface(Ht.d.dataProps[dn].p)})}var tn,on=Bt.d?Bt.d.length:0,an={};for(tn=0;tn<on;tn+=1)en(tn),Ht.d.dataProps[tn].p.setGroupProperty(Kt);function un(dn){return dn==="Color"||dn==="color"?un.color:dn==="Opacity"||dn==="opacity"?un.opacity:dn==="Stroke Width"||dn==="stroke width"?un.strokeWidth:null}return Object.defineProperties(un,{color:{get:ExpressionPropertyInterface(Ht.c)},opacity:{get:ExpressionPropertyInterface(Ht.o)},strokeWidth:{get:ExpressionPropertyInterface(Ht.w)},dash:{get:function(){return an}},_name:{value:Bt.nm},mn:{value:Bt.mn}}),Ht.c.setGroupProperty(PropertyInterface("Color",zt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",zt)),Ht.w.setGroupProperty(PropertyInterface("Stroke Width",zt)),un}function ft(Bt,Ht,Yt){function zt(en){return en===Bt.e.ix||en==="End"||en==="end"?zt.end:en===Bt.s.ix?zt.start:en===Bt.o.ix?zt.offset:null}var Kt=propertyGroupFactory(zt,Yt);return zt.propertyIndex=Bt.ix,Ht.s.setGroupProperty(PropertyInterface("Start",Kt)),Ht.e.setGroupProperty(PropertyInterface("End",Kt)),Ht.o.setGroupProperty(PropertyInterface("Offset",Kt)),zt.propertyIndex=Bt.ix,zt.propertyGroup=Yt,Object.defineProperties(zt,{start:{get:ExpressionPropertyInterface(Ht.s)},end:{get:ExpressionPropertyInterface(Ht.e)},offset:{get:ExpressionPropertyInterface(Ht.o)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}function St(Bt,Ht,Yt){function zt(en){return Bt.a.ix===en||en==="Anchor Point"?zt.anchorPoint:Bt.o.ix===en||en==="Opacity"?zt.opacity:Bt.p.ix===en||en==="Position"?zt.position:Bt.r.ix===en||en==="Rotation"||en==="ADBE Vector Rotation"?zt.rotation:Bt.s.ix===en||en==="Scale"?zt.scale:Bt.sk&&Bt.sk.ix===en||en==="Skew"?zt.skew:Bt.sa&&Bt.sa.ix===en||en==="Skew Axis"?zt.skewAxis:null}var Kt=propertyGroupFactory(zt,Yt);return Ht.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Kt)),Ht.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Kt)),Ht.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Kt)),Ht.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Kt)),Ht.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Kt)),Ht.transform.mProps.sk&&(Ht.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Kt)),Ht.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Kt))),Ht.transform.op.setGroupProperty(PropertyInterface("Opacity",Kt)),Object.defineProperties(zt,{opacity:{get:ExpressionPropertyInterface(Ht.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Ht.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Ht.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Ht.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Ht.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Ht.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Ht.transform.mProps.sa)},_name:{value:Bt.nm}}),zt.ty="tr",zt.mn=Bt.mn,zt.propertyGroup=Yt,zt}function kt(Bt,Ht,Yt){function zt(tn){return Bt.p.ix===tn?zt.position:Bt.s.ix===tn?zt.size:null}var Kt=propertyGroupFactory(zt,Yt);zt.propertyIndex=Bt.ix;var en=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return en.s.setGroupProperty(PropertyInterface("Size",Kt)),en.p.setGroupProperty(PropertyInterface("Position",Kt)),Object.defineProperties(zt,{size:{get:ExpressionPropertyInterface(en.s)},position:{get:ExpressionPropertyInterface(en.p)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}function Tt(Bt,Ht,Yt){function zt(tn){return Bt.p.ix===tn?zt.position:Bt.r.ix===tn?zt.rotation:Bt.pt.ix===tn?zt.points:Bt.or.ix===tn||tn==="ADBE Vector Star Outer Radius"?zt.outerRadius:Bt.os.ix===tn?zt.outerRoundness:Bt.ir&&(Bt.ir.ix===tn||tn==="ADBE Vector Star Inner Radius")?zt.innerRadius:Bt.is&&Bt.is.ix===tn?zt.innerRoundness:null}var Kt=propertyGroupFactory(zt,Yt),en=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return zt.propertyIndex=Bt.ix,en.or.setGroupProperty(PropertyInterface("Outer Radius",Kt)),en.os.setGroupProperty(PropertyInterface("Outer Roundness",Kt)),en.pt.setGroupProperty(PropertyInterface("Points",Kt)),en.p.setGroupProperty(PropertyInterface("Position",Kt)),en.r.setGroupProperty(PropertyInterface("Rotation",Kt)),Bt.ir&&(en.ir.setGroupProperty(PropertyInterface("Inner Radius",Kt)),en.is.setGroupProperty(PropertyInterface("Inner Roundness",Kt))),Object.defineProperties(zt,{position:{get:ExpressionPropertyInterface(en.p)},rotation:{get:ExpressionPropertyInterface(en.r)},points:{get:ExpressionPropertyInterface(en.pt)},outerRadius:{get:ExpressionPropertyInterface(en.or)},outerRoundness:{get:ExpressionPropertyInterface(en.os)},innerRadius:{get:ExpressionPropertyInterface(en.ir)},innerRoundness:{get:ExpressionPropertyInterface(en.is)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}function Rt(Bt,Ht,Yt){function zt(tn){return Bt.p.ix===tn?zt.position:Bt.r.ix===tn?zt.roundness:Bt.s.ix===tn||tn==="Size"||tn==="ADBE Vector Rect Size"?zt.size:null}var Kt=propertyGroupFactory(zt,Yt),en=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return zt.propertyIndex=Bt.ix,en.p.setGroupProperty(PropertyInterface("Position",Kt)),en.s.setGroupProperty(PropertyInterface("Size",Kt)),en.r.setGroupProperty(PropertyInterface("Rotation",Kt)),Object.defineProperties(zt,{position:{get:ExpressionPropertyInterface(en.p)},roundness:{get:ExpressionPropertyInterface(en.r)},size:{get:ExpressionPropertyInterface(en.s)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}function jt(Bt,Ht,Yt){function zt(tn){return Bt.r.ix===tn||tn==="Round Corners 1"?zt.radius:null}var Kt=propertyGroupFactory(zt,Yt),en=Ht;return zt.propertyIndex=Bt.ix,en.rd.setGroupProperty(PropertyInterface("Radius",Kt)),Object.defineProperties(zt,{radius:{get:ExpressionPropertyInterface(en.rd)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}function Ft(Bt,Ht,Yt){function zt(tn){return Bt.c.ix===tn||tn==="Copies"?zt.copies:Bt.o.ix===tn||tn==="Offset"?zt.offset:null}var Kt=propertyGroupFactory(zt,Yt),en=Ht;return zt.propertyIndex=Bt.ix,en.c.setGroupProperty(PropertyInterface("Copies",Kt)),en.o.setGroupProperty(PropertyInterface("Offset",Kt)),Object.defineProperties(zt,{copies:{get:ExpressionPropertyInterface(en.c)},offset:{get:ExpressionPropertyInterface(en.o)},_name:{value:Bt.nm}}),zt.mn=Bt.mn,zt}return function(Bt,Ht,Yt){var zt;function Kt(tn){if(typeof tn=="number")return tn=tn===void 0?1:tn,tn===0?Yt:zt[tn-1];for(var on=0,an=zt.length;on<an;){if(zt[on]._name===tn)return zt[on];on+=1}return null}function en(){return Yt}return Kt.propertyGroup=propertyGroupFactory(Kt,en),zt=it(Bt,Ht,Kt.propertyGroup),Kt.numProperties=zt.length,Kt._name="Contents",Kt}}(),TextExpressionInterface=function(){return function(it){var g;function et(ot){switch(ot){case"ADBE Text Document":return et.sourceText;default:return null}}return Object.defineProperty(et,"sourceText",{get:function(){it.textProperty.getValue();var ut=it.textProperty.currentData.t;return(!g||ut!==g.value)&&(g=new String(ut),g.value=ut||new String(ut),Object.defineProperty(g,"style",{get:function(){return{fillColor:it.textProperty.currentData.fc}}})),g}}),et}}();function _typeof(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(it)}var FootageInterface=function(){var it=function(ot){var ut="",ct=ot.getFootageData();function dt(){return ut="",ct=ot.getFootageData(),ft}function ft(St){if(ct[St])return ut=St,ct=ct[St],_typeof(ct)==="object"?ft:ct;var kt=St.indexOf(ut);if(kt!==-1){var Tt=parseInt(St.substr(kt+ut.length),10);return ct=ct[Tt],_typeof(ct)==="object"?ft:ct}return""}return dt},g=function(ot){function ut(ct){return ct==="Outline"?ut.outlineInterface():null}return ut._name="Outline",ut.outlineInterface=it(ot),ut};return function(et){function ot(ut){return ut==="Data"?ot.dataInterface:null}return ot._name="Data",ot.dataInterface=g(et),ot}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(it){return interfaces[it]||null}var expressionHelpers=function(){function it(dt,ft,St){ft.x&&(St.k=!0,St.x=!0,St.initiateExpression=ExpressionManager.initiateExpression,St.effectsSequence.push(St.initiateExpression(dt,ft,St).bind(St)))}function g(dt){return dt*=this.elem.globalData.frameRate,dt-=this.offsetTime,dt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<dt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(dt,this._cachingAtTime),this._cachingAtTime.lastFrame=dt),this._cachingAtTime.value}function et(dt){var ft=-.01,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt=0;if(St.length){var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt+=Math.pow(kt[Rt]-St[Rt],2);Tt=Math.sqrt(Tt)*100}else Tt=0;return Tt}function ot(dt){if(this.vel!==void 0)return this.vel;var ft=-.001,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt;if(St.length){Tt=createTypedArray("float32",St.length);var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt[Rt]=(kt[Rt]-St[Rt])/ft}else Tt=(kt-St)/ft;return Tt}function ut(){return this.pv}function ct(dt){this.propertyGroup=dt}return{searchExpressions:it,getSpeedAtTime:et,getVelocityAtTime:ot,getValueAtTime:g,getStaticValueAtTime:ut,setGroupProperty:ct}}();function addPropertyDecorator(){function it(jt,Ft,Bt){if(!this.k||!this.keyframes)return this.pv;jt=jt?jt.toLowerCase():"";var Ht=this.comp.renderedFrame,Yt=this.keyframes,zt=Yt[Yt.length-1].t;if(Ht<=zt)return this.pv;var Kt,en;Bt?(Ft?Kt=Math.abs(zt-this.elem.comp.globalData.frameRate*Ft):Kt=Math.max(0,zt-this.elem.data.ip),en=zt-Kt):((!Ft||Ft>Yt.length-1)&&(Ft=Yt.length-1),en=Yt[Yt.length-1-Ft].t,Kt=zt-en);var tn,on,an;if(jt==="pingpong"){var un=Math.floor((Ht-en)/Kt);if(un%2!==0)return this.getValueAtTime((Kt-(Ht-en)%Kt+en)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var dn=this.getValueAtTime(en/this.comp.globalData.frameRate,0),Sn=this.getValueAtTime(zt/this.comp.globalData.frameRate,0),mn=this.getValueAtTime(((Ht-en)%Kt+en)/this.comp.globalData.frameRate,0),bn=Math.floor((Ht-en)/Kt);if(this.pv.length){for(an=new Array(dn.length),on=an.length,tn=0;tn<on;tn+=1)an[tn]=(Sn[tn]-dn[tn])*bn+mn[tn];return an}return(Sn-dn)*bn+mn}else if(jt==="continue"){var En=this.getValueAtTime(zt/this.comp.globalData.frameRate,0),kn=this.getValueAtTime((zt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(an=new Array(En.length),on=an.length,tn=0;tn<on;tn+=1)an[tn]=En[tn]+(En[tn]-kn[tn])*((Ht-zt)/this.comp.globalData.frameRate)/5e-4;return an}return En+(En-kn)*((Ht-zt)/.001)}return this.getValueAtTime(((Ht-en)%Kt+en)/this.comp.globalData.frameRate,0)}function g(jt,Ft,Bt){if(!this.k)return this.pv;jt=jt?jt.toLowerCase():"";var Ht=this.comp.renderedFrame,Yt=this.keyframes,zt=Yt[0].t;if(Ht>=zt)return this.pv;var Kt,en;Bt?(Ft?Kt=Math.abs(this.elem.comp.globalData.frameRate*Ft):Kt=Math.max(0,this.elem.data.op-zt),en=zt+Kt):((!Ft||Ft>Yt.length-1)&&(Ft=Yt.length-1),en=Yt[Ft].t,Kt=en-zt);var tn,on,an;if(jt==="pingpong"){var un=Math.floor((zt-Ht)/Kt);if(un%2===0)return this.getValueAtTime(((zt-Ht)%Kt+zt)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var dn=this.getValueAtTime(zt/this.comp.globalData.frameRate,0),Sn=this.getValueAtTime(en/this.comp.globalData.frameRate,0),mn=this.getValueAtTime((Kt-(zt-Ht)%Kt+zt)/this.comp.globalData.frameRate,0),bn=Math.floor((zt-Ht)/Kt)+1;if(this.pv.length){for(an=new Array(dn.length),on=an.length,tn=0;tn<on;tn+=1)an[tn]=mn[tn]-(Sn[tn]-dn[tn])*bn;return an}return mn-(Sn-dn)*bn}else if(jt==="continue"){var En=this.getValueAtTime(zt/this.comp.globalData.frameRate,0),kn=this.getValueAtTime((zt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(an=new Array(En.length),on=an.length,tn=0;tn<on;tn+=1)an[tn]=En[tn]+(En[tn]-kn[tn])*(zt-Ht)/.001;return an}return En+(En-kn)*(zt-Ht)/.001}return this.getValueAtTime((Kt-((zt-Ht)%Kt+zt))/this.comp.globalData.frameRate,0)}function et(jt,Ft){if(!this.k)return this.pv;if(jt=(jt||.4)*.5,Ft=Math.floor(Ft||5),Ft<=1)return this.pv;var Bt=this.comp.renderedFrame/this.comp.globalData.frameRate,Ht=Bt-jt,Yt=Bt+jt,zt=Ft>1?(Yt-Ht)/(Ft-1):1,Kt=0,en=0,tn;this.pv.length?tn=createTypedArray("float32",this.pv.length):tn=0;for(var on;Kt<Ft;){if(on=this.getValueAtTime(Ht+Kt*zt),this.pv.length)for(en=0;en<this.pv.length;en+=1)tn[en]+=on[en];else tn+=on;Kt+=1}if(this.pv.length)for(en=0;en<this.pv.length;en+=1)tn[en]/=Ft;else tn/=Ft;return tn}function ot(jt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Ft=this._transformCachingAtTime.v;if(Ft.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Bt=this.a.getValueAtTime(jt);Ft.translate(-Bt[0]*this.a.mult,-Bt[1]*this.a.mult,Bt[2]*this.a.mult)}if(this.appliedTransformations<2){var Ht=this.s.getValueAtTime(jt);Ft.scale(Ht[0]*this.s.mult,Ht[1]*this.s.mult,Ht[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Yt=this.sk.getValueAtTime(jt),zt=this.sa.getValueAtTime(jt);Ft.skewFromAxis(-Yt*this.sk.mult,zt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Kt=this.r.getValueAtTime(jt);Ft.rotate(-Kt*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var en=this.rz.getValueAtTime(jt),tn=this.ry.getValueAtTime(jt),on=this.rx.getValueAtTime(jt),an=this.or.getValueAtTime(jt);Ft.rotateZ(-en*this.rz.mult).rotateY(tn*this.ry.mult).rotateX(on*this.rx.mult).rotateZ(-an[2]*this.or.mult).rotateY(an[1]*this.or.mult).rotateX(an[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var un=this.px.getValueAtTime(jt),dn=this.py.getValueAtTime(jt);if(this.data.p.z){var Sn=this.pz.getValueAtTime(jt);Ft.translate(un*this.px.mult,dn*this.py.mult,-Sn*this.pz.mult)}else Ft.translate(un*this.px.mult,dn*this.py.mult,0)}else{var mn=this.p.getValueAtTime(jt);Ft.translate(mn[0]*this.p.mult,mn[1]*this.p.mult,-mn[2]*this.p.mult)}return Ft}function ut(){return this.v.clone(new Matrix)}var ct=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(jt,Ft,Bt){var Ht=ct(jt,Ft,Bt);return Ht.dynamicProperties.length?Ht.getValueAtTime=ot.bind(Ht):Ht.getValueAtTime=ut.bind(Ht),Ht.setGroupProperty=expressionHelpers.setGroupProperty,Ht};var dt=PropertyFactory.getProp;PropertyFactory.getProp=function(jt,Ft,Bt,Ht,Yt){var zt=dt(jt,Ft,Bt,Ht,Yt);zt.kf?zt.getValueAtTime=expressionHelpers.getValueAtTime.bind(zt):zt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(zt),zt.setGroupProperty=expressionHelpers.setGroupProperty,zt.loopOut=it,zt.loopIn=g,zt.smooth=et,zt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(zt),zt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(zt),zt.numKeys=Ft.a===1?Ft.k.length:0,zt.propertyIndex=Ft.ix;var Kt=0;return Bt!==0&&(Kt=createTypedArray("float32",Ft.a===1?Ft.k[0].s.length:Ft.k.length)),zt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Kt},expressionHelpers.searchExpressions(jt,Ft,zt),zt.k&&Yt.addDynamicProperty(zt),zt};function ft(jt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),jt*=this.elem.globalData.frameRate,jt-=this.offsetTime,jt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<jt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=jt,this.interpolateShape(jt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var St=ShapePropertyFactory.getConstructorFunction(),kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Tt(){}Tt.prototype={vertices:function(Ft,Bt){this.k&&this.getValue();var Ht=this.v;Bt!==void 0&&(Ht=this.getValueAtTime(Bt,0));var Yt,zt=Ht._length,Kt=Ht[Ft],en=Ht.v,tn=createSizedArray(zt);for(Yt=0;Yt<zt;Yt+=1)Ft==="i"||Ft==="o"?tn[Yt]=[Kt[Yt][0]-en[Yt][0],Kt[Yt][1]-en[Yt][1]]:tn[Yt]=[Kt[Yt][0],Kt[Yt][1]];return tn},points:function(Ft){return this.vertices("v",Ft)},inTangents:function(Ft){return this.vertices("i",Ft)},outTangents:function(Ft){return this.vertices("o",Ft)},isClosed:function(){return this.v.c},pointOnPath:function(Ft,Bt){var Ht=this.v;Bt!==void 0&&(Ht=this.getValueAtTime(Bt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Ht));for(var Yt=this._segmentsLength,zt=Yt.lengths,Kt=Yt.totalLength*Ft,en=0,tn=zt.length,on=0,an;en<tn;){if(on+zt[en].addedLength>Kt){var un=en,dn=Ht.c&&en===tn-1?0:en+1,Sn=(Kt-on)/zt[en].addedLength;an=bez.getPointInSegment(Ht.v[un],Ht.v[dn],Ht.o[un],Ht.i[dn],Sn,zt[en]);break}else on+=zt[en].addedLength;en+=1}return an||(an=Ht.c?[Ht.v[0][0],Ht.v[0][1]]:[Ht.v[Ht._length-1][0],Ht.v[Ht._length-1][1]]),an},vectorOnPath:function(Ft,Bt,Ht){Ft==1?Ft=this.v.c:Ft==0&&(Ft=.999);var Yt=this.pointOnPath(Ft,Bt),zt=this.pointOnPath(Ft+.001,Bt),Kt=zt[0]-Yt[0],en=zt[1]-Yt[1],tn=Math.sqrt(Math.pow(Kt,2)+Math.pow(en,2));if(tn===0)return[0,0];var on=Ht==="tangent"?[Kt/tn,en/tn]:[-en/tn,Kt/tn];return on},tangentOnPath:function(Ft,Bt){return this.vectorOnPath(Ft,Bt,"tangent")},normalOnPath:function(Ft,Bt){return this.vectorOnPath(Ft,Bt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Tt],St),extendPrototype([Tt],kt),kt.prototype.getValueAtTime=ft,kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Rt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(jt,Ft,Bt,Ht,Yt){var zt=Rt(jt,Ft,Bt,Ht,Yt);return zt.propertyIndex=Ft.ix,zt.lock=!1,Bt===3?expressionHelpers.searchExpressions(jt,Ft.pt,zt):Bt===4&&expressionHelpers.searchExpressions(jt,Ft.ks,zt),zt.k&&jt.addDynamicProperty(zt),zt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function it(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(g,et){var ot=this.calculateExpression(et);if(g.t!==ot){var ut={};return this.copyData(ut,g),ut.t=ot.toString(),ut.__complete=!1,ut}return g},TextProperty.prototype.searchProperty=function(){var g=this.searchKeyframes(),et=this.searchExpressions();return this.kf=g||et,this.kf},TextProperty.prototype.searchExpressions=it}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function it(g,et){var ot=createNS("feMerge");ot.setAttribute("result",g);var ut,ct;for(ct=0;ct<et.length;ct+=1)ut=createNS("feMergeNode"),ut.setAttribute("in",et[ct]),ot.appendChild(ut),ot.appendChild(ut);return ot}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(it,g,et,ot,ut){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ct,ct.setAttribute("result",ot+"_tint_1"),it.appendChild(ct),ct=createNS("feColorMatrix"),ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",ot+"_tint_2"),it.appendChild(ct),this.matrixFilter=ct;var dt=this.createMergeNode(ot,[ut,ot+"_tint_1",ot+"_tint_2"]);it.appendChild(dt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ot+" 0"),this.matrixFilter.setAttribute("values",et[0]-g[0]+" 0 0 0 "+g[0]+" "+(et[1]-g[1])+" 0 0 0 "+g[1]+" "+(et[2]-g[2])+" 0 0 0 "+g[2]+" 0 0 0 1 0")}};function SVGFillFilter(it,g,et,ot){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ut.setAttribute("result",ot),it.appendChild(ut),this.matrixFilter=ut}SVGFillFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[2].p.v,et=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+g[0]+" 0 0 0 0 "+g[1]+" 0 0 0 0 "+g[2]+" 0 0 0 "+et+" 0")}};function SVGStrokeEffect(it,g,et){this.initialized=!1,this.filterManager=g,this.elem=et,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var it=this.elem.layerElement.children||this.elem.layerElement.childNodes,g,et,ot,ut;for(this.filterManager.effectElements[1].p.v===1?(ut=this.elem.maskManager.masksProperties.length,ot=0):(ot=this.filterManager.effectElements[0].p.v-1,ut=ot+1),et=createNS("g"),et.setAttribute("fill","none"),et.setAttribute("stroke-linecap","round"),et.setAttribute("stroke-dashoffset",1),ot;ot<ut;ot+=1)g=createNS("path"),et.appendChild(g),this.paths.push({p:g,m:ot});if(this.filterManager.effectElements[10].p.v===3){var ct=createNS("mask"),dt=createElementID();ct.setAttribute("id",dt),ct.setAttribute("mask-type","alpha"),ct.appendChild(et),this.elem.globalData.defs.appendChild(ct);var ft=createNS("g");for(ft.setAttribute("mask","url("+getLocationHref()+"#"+dt+")");it[0];)ft.appendChild(it[0]);this.elem.layerElement.appendChild(ft),this.masker=ct,et.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(it=this.elem.layerElement.children||this.elem.layerElement.childNodes;it.length;)this.elem.layerElement.removeChild(it[0]);this.elem.layerElement.appendChild(et),this.elem.layerElement.removeAttribute("mask"),et.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=et},SVGStrokeEffect.prototype.renderFrame=function(it){this.initialized||this.initialize();var g,et=this.paths.length,ot,ut;for(g=0;g<et;g+=1)if(this.paths[g].m!==-1&&(ot=this.elem.maskManager.viewData[this.paths[g].m],ut=this.paths[g].p,(it||this.filterManager._mdf||ot.prop._mdf)&&ut.setAttribute("d",ot.lastPath),it||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ot.prop._mdf)){var ct;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var dt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ft=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,St=ut.getTotalLength();ct="0 0 0 "+St*dt+" ";var kt=St*(ft-dt),Tt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Rt=Math.floor(kt/Tt),jt;for(jt=0;jt<Rt;jt+=1)ct+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ct+="0 "+St*10+" 0 0"}else ct="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ut.setAttribute("stroke-dasharray",ct)}if((it||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(it||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(it||this.filterManager.effectElements[3].p._mdf)){var Ft=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Ft[0]*255)+","+bmFloor(Ft[1]*255)+","+bmFloor(Ft[2]*255)+")")}};function SVGTritoneFilter(it,g,et,ot){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","linearRGB"),ut.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),it.appendChild(ut);var ct=createNS("feComponentTransfer");ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",ot),this.matrixFilter=ct;var dt=createNS("feFuncR");dt.setAttribute("type","table"),ct.appendChild(dt),this.feFuncR=dt;var ft=createNS("feFuncG");ft.setAttribute("type","table"),ct.appendChild(ft),this.feFuncG=ft;var St=createNS("feFuncB");St.setAttribute("type","table"),ct.appendChild(St),this.feFuncB=St,it.appendChild(ct)}SVGTritoneFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v,ut=ot[0]+" "+et[0]+" "+g[0],ct=ot[1]+" "+et[1]+" "+g[1],dt=ot[2]+" "+et[2]+" "+g[2];this.feFuncR.setAttribute("tableValues",ut),this.feFuncG.setAttribute("tableValues",ct),this.feFuncB.setAttribute("tableValues",dt)}};function SVGProLevelsFilter(it,g,et,ot){this.filterManager=g;var ut=this.filterManager.effectElements,ct=createNS("feComponentTransfer");(ut[10].p.k||ut[10].p.v!==0||ut[11].p.k||ut[11].p.v!==1||ut[12].p.k||ut[12].p.v!==1||ut[13].p.k||ut[13].p.v!==0||ut[14].p.k||ut[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ct)),(ut[17].p.k||ut[17].p.v!==0||ut[18].p.k||ut[18].p.v!==1||ut[19].p.k||ut[19].p.v!==1||ut[20].p.k||ut[20].p.v!==0||ut[21].p.k||ut[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ct)),(ut[24].p.k||ut[24].p.v!==0||ut[25].p.k||ut[25].p.v!==1||ut[26].p.k||ut[26].p.v!==1||ut[27].p.k||ut[27].p.v!==0||ut[28].p.k||ut[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ct)),(ut[31].p.k||ut[31].p.v!==0||ut[32].p.k||ut[32].p.v!==1||ut[33].p.k||ut[33].p.v!==1||ut[34].p.k||ut[34].p.v!==0||ut[35].p.k||ut[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ct)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ct.setAttribute("color-interpolation-filters","sRGB"),it.appendChild(ct)),(ut[3].p.k||ut[3].p.v!==0||ut[4].p.k||ut[4].p.v!==1||ut[5].p.k||ut[5].p.v!==1||ut[6].p.k||ut[6].p.v!==0||ut[7].p.k||ut[7].p.v!==1)&&(ct=createNS("feComponentTransfer"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",ot),it.appendChild(ct),this.feFuncRComposed=this.createFeFunc("feFuncR",ct),this.feFuncGComposed=this.createFeFunc("feFuncG",ct),this.feFuncBComposed=this.createFeFunc("feFuncB",ct))}SVGProLevelsFilter.prototype.createFeFunc=function(it,g){var et=createNS(it);return et.setAttribute("type","table"),g.appendChild(et),et},SVGProLevelsFilter.prototype.getTableValue=function(it,g,et,ot,ut){for(var ct=0,dt=256,ft,St=Math.min(it,g),kt=Math.max(it,g),Tt=Array.call(null,{length:dt}),Rt,jt=0,Ft=ut-ot,Bt=g-it;ct<=256;)ft=ct/256,ft<=St?Rt=Bt<0?ut:ot:ft>=kt?Rt=Bt<0?ot:ut:Rt=ot+Ft*Math.pow((ft-it)/Bt,1/et),Tt[jt]=Rt,jt+=1,ct+=256/(dt-1);return Tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g,et=this.filterManager.effectElements;this.feFuncRComposed&&(it||et[3].p._mdf||et[4].p._mdf||et[5].p._mdf||et[6].p._mdf||et[7].p._mdf)&&(g=this.getTableValue(et[3].p.v,et[4].p.v,et[5].p.v,et[6].p.v,et[7].p.v),this.feFuncRComposed.setAttribute("tableValues",g),this.feFuncGComposed.setAttribute("tableValues",g),this.feFuncBComposed.setAttribute("tableValues",g)),this.feFuncR&&(it||et[10].p._mdf||et[11].p._mdf||et[12].p._mdf||et[13].p._mdf||et[14].p._mdf)&&(g=this.getTableValue(et[10].p.v,et[11].p.v,et[12].p.v,et[13].p.v,et[14].p.v),this.feFuncR.setAttribute("tableValues",g)),this.feFuncG&&(it||et[17].p._mdf||et[18].p._mdf||et[19].p._mdf||et[20].p._mdf||et[21].p._mdf)&&(g=this.getTableValue(et[17].p.v,et[18].p.v,et[19].p.v,et[20].p.v,et[21].p.v),this.feFuncG.setAttribute("tableValues",g)),this.feFuncB&&(it||et[24].p._mdf||et[25].p._mdf||et[26].p._mdf||et[27].p._mdf||et[28].p._mdf)&&(g=this.getTableValue(et[24].p.v,et[25].p.v,et[26].p.v,et[27].p.v,et[28].p.v),this.feFuncB.setAttribute("tableValues",g)),this.feFuncA&&(it||et[31].p._mdf||et[32].p._mdf||et[33].p._mdf||et[34].p._mdf||et[35].p._mdf)&&(g=this.getTableValue(et[31].p.v,et[32].p.v,et[33].p.v,et[34].p.v,et[35].p.v),this.feFuncA.setAttribute("tableValues",g))}};function SVGDropShadowEffect(it,g,et,ot,ut){var ct=g.container.globalData.renderConfig.filterSize,dt=g.data.fs||ct;it.setAttribute("x",dt.x||ct.x),it.setAttribute("y",dt.y||ct.y),it.setAttribute("width",dt.width||ct.width),it.setAttribute("height",dt.height||ct.height),this.filterManager=g;var ft=createNS("feGaussianBlur");ft.setAttribute("in","SourceAlpha"),ft.setAttribute("result",ot+"_drop_shadow_1"),ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=ft,it.appendChild(ft);var St=createNS("feOffset");St.setAttribute("dx","25"),St.setAttribute("dy","0"),St.setAttribute("in",ot+"_drop_shadow_1"),St.setAttribute("result",ot+"_drop_shadow_2"),this.feOffset=St,it.appendChild(St);var kt=createNS("feFlood");kt.setAttribute("flood-color","#00ff00"),kt.setAttribute("flood-opacity","1"),kt.setAttribute("result",ot+"_drop_shadow_3"),this.feFlood=kt,it.appendChild(kt);var Tt=createNS("feComposite");Tt.setAttribute("in",ot+"_drop_shadow_3"),Tt.setAttribute("in2",ot+"_drop_shadow_2"),Tt.setAttribute("operator","in"),Tt.setAttribute("result",ot+"_drop_shadow_4"),it.appendChild(Tt);var Rt=this.createMergeNode(ot,[ot+"_drop_shadow_4",ut]);it.appendChild(Rt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){if((it||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),it||this.filterManager.effectElements[0].p._mdf){var g=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(g[0]*255),Math.round(g[1]*255),Math.round(g[2]*255)))}if((it||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),it||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var et=this.filterManager.effectElements[3].p.v,ot=(this.filterManager.effectElements[2].p.v-90)*degToRads,ut=et*Math.cos(ot),ct=et*Math.sin(ot);this.feOffset.setAttribute("dx",ut),this.feOffset.setAttribute("dy",ct)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(it,g,et){this.initialized=!1,this.filterManager=g,this.filterElem=it,this.elem=et,et.matteElement=createNS("g"),et.matteElement.appendChild(et.layerElement),et.matteElement.appendChild(et.transformedElement),et.baseElement=et.matteElement}SVGMatte3Effect.prototype.findSymbol=function(it){for(var g=0,et=_svgMatteSymbols.length;g<et;){if(_svgMatteSymbols[g]===it)return _svgMatteSymbols[g];g+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(it,g){var et=it.layerElement.parentNode;if(et){for(var ot=et.children,ut=0,ct=ot.length;ut<ct&&ot[ut]!==it.layerElement;)ut+=1;var dt;ut<=ct-2&&(dt=ot[ut+1]);var ft=createNS("use");ft.setAttribute("href","#"+g),dt?et.insertBefore(ft,dt):et.appendChild(ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(it,g){if(!this.findSymbol(g)){var et=createElementID(),ot=createNS("mask");ot.setAttribute("id",g.layerId),ot.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(g);var ut=it.globalData.defs;ut.appendChild(ot);var ct=createNS("symbol");ct.setAttribute("id",et),this.replaceInParent(g,et),ct.appendChild(g.layerElement),ut.appendChild(ct);var dt=createNS("use");dt.setAttribute("href","#"+et),ot.appendChild(dt),g.data.hd=!1,g.show()}it.setMatte(g.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var it=this.filterManager.effectElements[0].p.v,g=this.elem.comp.elements,et=0,ot=g.length;et<ot;)g[et]&&g[et].data.ind===it&&this.setElementAsMask(this.elem,g[et]),et+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(it,g,et,ot){it.setAttribute("x","-100%"),it.setAttribute("y","-100%"),it.setAttribute("width","300%"),it.setAttribute("height","300%"),this.filterManager=g;var ut=createNS("feGaussianBlur");ut.setAttribute("result",ot),it.appendChild(ut),this.feGaussianBlur=ut}SVGGaussianBlurEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=.3,et=this.filterManager.effectElements[0].p.v*g,ot=this.filterManager.effectElements[1].p.v,ut=ot==3?0:et,ct=ot==2?0:et;this.feGaussianBlur.setAttribute("stdDeviation",ut+" "+ct);var dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",dt)}};function TransformEffect(){}TransformEffect.prototype.init=function(it){this.effectsManager=it,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(it){if(this._opMdf=!1,this._mdf=!1,it||this.effectsManager._mdf){var g=this.effectsManager.effectElements,et=g[0].p.v,ot=g[1].p.v,ut=g[2].p.v===1,ct=g[3].p.v,dt=ut?ct:g[4].p.v,ft=g[5].p.v,St=g[6].p.v,kt=g[7].p.v;this.matrix.reset(),this.matrix.translate(-et[0],-et[1],et[2]),this.matrix.scale(dt*.01,ct*.01,1),this.matrix.rotate(-kt*degToRads),this.matrix.skewFromAxis(-ft*degToRads,(St+90)*degToRads),this.matrix.translate(ot[0],ot[1],0),this._mdf=!0,this.opacity!==g[8].p.v&&(this.opacity=g[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(it,g){this.init(g)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(it){this.init(it)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(it,g){var et=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(et!=null){var ot,ut,ct,dt,ft=[],St=!0,kt=!1;try{if(ct=(et=et.call(it)).next,g===0){if(Object(et)!==et)return;St=!1}else for(;!(St=(ot=ct.call(et)).done)&&(ft.push(ot.value),ft.length!==g);St=!0);}catch(Tt){kt=!0,ut=Tt}finally{try{if(!St&&et.return!=null&&(dt=et.return(),Object(dt)!==dt))return}finally{if(kt)throw ut}}return ft}}function ownKeys(it,g){var et=Object.keys(it);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(it);g&&(ot=ot.filter(function(ut){return Object.getOwnPropertyDescriptor(it,ut).enumerable})),et.push.apply(et,ot)}return et}function _objectSpread2(it){for(var g=1;g<arguments.length;g++){var et=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(et),!0).forEach(function(ot){_defineProperty(it,ot,et[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(ot){Object.defineProperty(it,ot,Object.getOwnPropertyDescriptor(et,ot))})}return it}function _defineProperty(it,g,et){return g=_toPropertyKey(g),g in it?Object.defineProperty(it,g,{value:et,enumerable:!0,configurable:!0,writable:!0}):it[g]=et,it}function _objectWithoutPropertiesLoose(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ut,ct;for(ct=0;ct<ot.length;ct++)ut=ot[ct],!(g.indexOf(ut)>=0)&&(et[ut]=it[ut]);return et}function _objectWithoutProperties(it,g){if(it==null)return{};var et=_objectWithoutPropertiesLoose(it,g),ot,ut;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(it);for(ut=0;ut<ct.length;ut++)ot=ct[ut],!(g.indexOf(ot)>=0)&&Object.prototype.propertyIsEnumerable.call(it,ot)&&(et[ot]=it[ot])}return et}function _slicedToArray(it,g){return _arrayWithHoles(it)||_iterableToArrayLimit(it,g)||_unsupportedIterableToArray(it,g)||_nonIterableRest()}function _arrayWithHoles(it){if(Array.isArray(it))return it}function _unsupportedIterableToArray(it,g){if(it){if(typeof it=="string")return _arrayLikeToArray(it,g);var et=Object.prototype.toString.call(it).slice(8,-1);if(et==="Object"&&it.constructor&&(et=it.constructor.name),et==="Map"||et==="Set")return Array.from(it);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(it,g)}}function _arrayLikeToArray(it,g){(g==null||g>it.length)&&(g=it.length);for(var et=0,ot=new Array(g);et<g;et++)ot[et]=it[et];return ot}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(it,g){if(typeof it!="object"||it===null)return it;var et=it[Symbol.toPrimitive];if(et!==void 0){var ot=et.call(it,g||"default");if(typeof ot!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(it)}function _toPropertyKey(it){var g=_toPrimitive(it,"string");return typeof g=="symbol"?g:String(g)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function it(g,et){var ot=g.animationData,ut=g.loop,ct=g.autoplay,dt=g.initialSegment,ft=g.onComplete,St=g.onLoopComplete,kt=g.onEnterFrame,Tt=g.onSegmentStart,Rt=g.onConfigReady,jt=g.onDataReady,Ft=g.onDataFailed,Bt=g.onLoadedImages,Ht=g.onDOMLoaded,Yt=g.onDestroy;g.lottieRef,g.renderer,g.name,g.assetsPath,g.rendererSettings;var zt=_objectWithoutProperties(g,_excluded$1),Kt=reactExports.useState(!1),en=_slicedToArray(Kt,2),tn=en[0],on=en[1],an=reactExports.useRef(),un=reactExports.useRef(null),dn=function(){var Vn;(Vn=an.current)===null||Vn===void 0||Vn.play()},Sn=function(){var Vn;(Vn=an.current)===null||Vn===void 0||Vn.stop()},mn=function(){var Vn;(Vn=an.current)===null||Vn===void 0||Vn.pause()},bn=function(Vn){var Qn;(Qn=an.current)===null||Qn===void 0||Qn.setSpeed(Vn)},En=function(Vn,Qn){var ir;(ir=an.current)===null||ir===void 0||ir.goToAndPlay(Vn,Qn)},kn=function(Vn,Qn){var ir;(ir=an.current)===null||ir===void 0||ir.goToAndStop(Vn,Qn)},Pn=function(Vn){var Qn;(Qn=an.current)===null||Qn===void 0||Qn.setDirection(Vn)},Ln=function(Vn,Qn){var ir;(ir=an.current)===null||ir===void 0||ir.playSegments(Vn,Qn)},gn=function(Vn){var Qn;(Qn=an.current)===null||Qn===void 0||Qn.setSubframe(Vn)},Mn=function(Vn){var Qn;return(Qn=an.current)===null||Qn===void 0?void 0:Qn.getDuration(Vn)},yn=function(){var Vn;(Vn=an.current)===null||Vn===void 0||Vn.destroy(),an.current=void 0},vn=function(){var Vn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Qn;if(un.current){(Qn=an.current)===null||Qn===void 0||Qn.destroy();var ir=_objectSpread2(_objectSpread2(_objectSpread2({},g),Vn),{},{container:un.current});return an.current=lottie.loadAnimation(ir),on(!!an.current),function(){var ar;(ar=an.current)===null||ar===void 0||ar.destroy(),an.current=void 0}}};reactExports.useEffect(function(){var Cn=vn();return function(){return Cn==null?void 0:Cn()}},[ot,ut]),reactExports.useEffect(function(){an.current&&(an.current.autoplay=!!ct)},[ct]),reactExports.useEffect(function(){if(an.current){if(!dt){an.current.resetSegments(!0);return}!Array.isArray(dt)||!dt.length||((an.current.currentRawFrame<dt[0]||an.current.currentRawFrame>dt[1])&&(an.current.currentRawFrame=dt[0]),an.current.setSegment(dt[0],dt[1]))}},[dt]),reactExports.useEffect(function(){var Cn=[{name:"complete",handler:ft},{name:"loopComplete",handler:St},{name:"enterFrame",handler:kt},{name:"segmentStart",handler:Tt},{name:"config_ready",handler:Rt},{name:"data_ready",handler:jt},{name:"data_failed",handler:Ft},{name:"loaded_images",handler:Bt},{name:"DOMLoaded",handler:Ht},{name:"destroy",handler:Yt}],Vn=Cn.filter(function(ir){return ir.handler!=null});if(Vn.length){var Qn=Vn.map(function(ir){var ar;return(ar=an.current)===null||ar===void 0||ar.addEventListener(ir.name,ir.handler),function(){var rr;(rr=an.current)===null||rr===void 0||rr.removeEventListener(ir.name,ir.handler)}});return function(){Qn.forEach(function(ir){return ir()})}}},[ft,St,kt,Tt,Rt,jt,Ft,Bt,Ht,Yt]);var On=React$3.createElement("div",_objectSpread2({style:et,ref:un},zt));return{View:On,play:dn,stop:Sn,pause:mn,setSpeed:bn,goToAndStop:kn,goToAndPlay:En,setDirection:Pn,playSegments:Ln,setSubframe:gn,getDuration:Mn,destroy:yn,animationContainerRef:un,animationLoaded:tn,animationItem:an.current}};function getContainerVisibility(it){var g=it.getBoundingClientRect(),et=g.top,ot=g.height,ut=window.innerHeight-et,ct=window.innerHeight+ot;return ut/ct}function getContainerCursorPosition(it,g,et){var ot=it.getBoundingClientRect(),ut=ot.top,ct=ot.left,dt=ot.width,ft=ot.height,St=(g-ct)/dt,kt=(et-ut)/ft;return{x:St,y:kt}}var useInitInteractivity=function it(g){var et=g.wrapperRef,ot=g.animationItem,ut=g.mode,ct=g.actions;reactExports.useEffect(function(){var dt=et.current;if(!(!dt||!ot||!ct.length)){ot.stop();var ft=function(){var Tt=null,Rt=function(){var Ft=getContainerVisibility(dt),Bt=ct.find(function(Yt){var zt=Yt.visibility;return zt&&Ft>=zt[0]&&Ft<=zt[1]});if(Bt){if(Bt.type==="seek"&&Bt.visibility&&Bt.frames.length===2){var Ht=Bt.frames[0]+Math.ceil((Ft-Bt.visibility[0])/(Bt.visibility[1]-Bt.visibility[0])*Bt.frames[1]);//! goToAndStop must be relative to the start of the current segment
ot.goToAndStop(Ht-ot.firstFrame-1,!0)}Bt.type==="loop"&&(Tt===null||Tt!==Bt.frames||ot.isPaused)&&(ot.playSegments(Bt.frames,!0),Tt=Bt.frames),Bt.type==="play"&&ot.isPaused&&(ot.resetSegments(!0),ot.play()),Bt.type==="stop"&&ot.goToAndStop(Bt.frames[0]-ot.firstFrame-1,!0)}};return document.addEventListener("scroll",Rt),function(){document.removeEventListener("scroll",Rt)}},St=function(){var Tt=function(Bt,Ht){var Yt=Bt,zt=Ht;if(Yt!==-1&&zt!==-1){var Kt=getContainerCursorPosition(dt,Yt,zt);Yt=Kt.x,zt=Kt.y}var en=ct.find(function(an){var un=an.position;return un&&Array.isArray(un.x)&&Array.isArray(un.y)?Yt>=un.x[0]&&Yt<=un.x[1]&&zt>=un.y[0]&&zt<=un.y[1]:un&&!Number.isNaN(un.x)&&!Number.isNaN(un.y)?Yt===un.x&&zt===un.y:!1});if(en){if(en.type==="seek"&&en.position&&Array.isArray(en.position.x)&&Array.isArray(en.position.y)&&en.frames.length===2){var tn=(Yt-en.position.x[0])/(en.position.x[1]-en.position.x[0]),on=(zt-en.position.y[0])/(en.position.y[1]-en.position.y[0]);ot.playSegments(en.frames,!0),ot.goToAndStop(Math.ceil((tn+on)/2*(en.frames[1]-en.frames[0])),!0)}en.type==="loop"&&ot.playSegments(en.frames,!0),en.type==="play"&&(ot.isPaused&&ot.resetSegments(!1),ot.playSegments(en.frames)),en.type==="stop"&&ot.goToAndStop(en.frames[0],!0)}},Rt=function(Bt){Tt(Bt.clientX,Bt.clientY)},jt=function(){Tt(-1,-1)};return dt.addEventListener("mousemove",Rt),dt.addEventListener("mouseout",jt),function(){dt.removeEventListener("mousemove",Rt),dt.removeEventListener("mouseout",jt)}};switch(ut){case"scroll":return ft();case"cursor":return St()}}},[ut,ot])},useLottieInteractivity=function it(g){var et=g.actions,ot=g.mode,ut=g.lottieObj,ct=ut.animationItem,dt=ut.View,ft=ut.animationContainerRef;return useInitInteractivity({actions:et,animationItem:ct,mode:ot,wrapperRef:ft}),dt},_excluded=["style","interactivity"],Lottie=function it(g){var et,ot,ut,ct=g.style,dt=g.interactivity,ft=_objectWithoutProperties(g,_excluded),St=useLottie(ft,ct),kt=St.View,Tt=St.play,Rt=St.stop,jt=St.pause,Ft=St.setSpeed,Bt=St.goToAndStop,Ht=St.goToAndPlay,Yt=St.setDirection,zt=St.playSegments,Kt=St.setSubframe,en=St.getDuration,tn=St.destroy,on=St.animationContainerRef,an=St.animationLoaded,un=St.animationItem;return reactExports.useEffect(function(){g.lottieRef&&(g.lottieRef.current={play:Tt,stop:Rt,pause:jt,setSpeed:Ft,goToAndPlay:Ht,goToAndStop:Bt,setDirection:Yt,playSegments:zt,setSubframe:Kt,getDuration:en,destroy:tn,animationContainerRef:on,animationLoaded:an,animationItem:un})},[(et=g.lottieRef)===null||et===void 0?void 0:et.current]),useLottieInteractivity({lottieObj:{View:kt,play:Tt,stop:Rt,pause:jt,setSpeed:Ft,goToAndStop:Bt,goToAndPlay:Ht,setDirection:Yt,playSegments:zt,setSubframe:Kt,getDuration:en,destroy:tn,animationContainerRef:on,animationLoaded:an,animationItem:un},actions:(ot=dt==null?void 0:dt.actions)!==null&&ot!==void 0?ot:[],mode:(ut=dt==null?void 0:dt.mode)!==null&&ut!==void 0?ut:"scroll"})};const nm="error",ddd=0,h$4=495,w$4=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$1="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$4,w:w$4,meta,layers,v:v$1,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$1,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:it}=useLocation(),g=reactExports.useMemo(()=>new URLSearchParams(it).get("session_id"),[it]),et=g?`/api/downloads/${g}`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-slate-300",children:["Your download is ready",et?"":", but we couldnt find a session id","."]}),et?jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:et,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold bg-phlokkGreen text-black hover:opacity-90 transition",children:"Download Now"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["We expected a URL like ",jsxRuntimeExports.jsx("code",{children:"/thank-you?session_id=cs_..."}),"."]}),jsxRuntimeExports.jsx(Link$1,{to:"/",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Go Home"})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the Cre8tly Studio website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by Cre8tly Studio or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, Cre8tly Studio, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using Cre8tly Studios Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At Cre8tly Studio, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content, ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how Cre8tly Studio (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});function PromptPage(){const[it]=useSearchParams(),g=it.get("session_id"),et=reactExports.useRef(null),[ot,ut]=reactExports.useState(!0),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[Ft,Bt]=reactExports.useState(null);reactExports.useEffect(()=>{if(ft&&et.current){const Yt=et.current.getEditor();setTimeout(()=>{Yt.root.scrollTop=0,Yt.root.dispatchEvent(new Event("input"))},100)}},[ft]),reactExports.useEffect(()=>{g?(async()=>{var zt;try{const Kt=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Kt.data&&(dt(!0),Kt.data.status==="completed"&&Kt.data.pdf_url&&(Bt(Kt.data.pdf_url),jt(!0)))}catch(Kt){console.error("Invalid session:",((zt=Kt.response)==null?void 0:zt.data)||Kt.message),dt(!1)}finally{ut(!1)}})():ut(!1)},[g]);const Ht=async()=>{var Yt;if(ft.trim()){Tt(!0);try{await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{sessionId:g,prompt:ft}),jt(!0);const zt=setInterval(async()=>{try{const Kt=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Kt.data.status==="completed"&&Kt.data.pdf_url&&(Bt(Kt.data.pdf_url),clearInterval(zt))}catch(Kt){console.error("Polling failed:",Kt.message)}},5e3)}catch(zt){console.error(" Request failed:",((Yt=zt.response)==null?void 0:Yt.data)||zt.message)}finally{Tt(!1)}}};return ot?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-gray-400",children:"Validating session..."}):ct?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-20 px-6 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Enter Your Prompt"}),Rt?jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-green mb-6",children:" Your prompt was submitted!"}),Ft?jsxRuntimeExports.jsx("a",{href:Ft,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-gradient-to-r from-[#1DA1F2] to-purple-600 text-white px-8 py-4 rounded-xl shadow-lg hover:opacity-90 transition",children:"Download PDF"}):jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your PDF is being generated... Please wait."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:ft,onChange:Yt=>St(Yt.target.value),placeholder:"Describe your audience or offer...",className:"w-full h-[500px] bg-white text-black text-left rounded-lg p-4 leading-relaxed font-montserrat border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner resize-none overflow-y-auto"}),jsxRuntimeExports.jsx("button",{onClick:Ht,disabled:kt||!ft||ft.trim()==="<p><br></p>",className:`w-full py-4 rounded-xl font-semibold text-lg transition shadow-lg ${kt||!ft?"bg-gray-600 cursor-not-allowed":"bg-black border border-green-400 text-white hover:opacity-90"}`,children:kt?"Generating...":"Generate PDF"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invalid or expired session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Please purchase a lead magnet to access this page."})]})}const headerLogo="/assets/cre8tly-logo-ab122ab2.svg",ebookCover="/assets/ultimate-branding-d456799d.jpg",Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly Studio Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital. All rights reserved"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$1,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/cookie-policy",className:"hover:text-white transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/refund-policy",className:"hover:text-white transition-colors",children:"Refunds"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/40",children:["Designed by"," ",jsxRuntimeExports.jsx("a",{href:"https://aluredigital.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Alure Digital"})]})]})]})});function CustomCursor(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!1),ut=useMotionValue(-100),ct=useMotionValue(-100),dt=useSpring(ut,{stiffness:225,damping:30}),ft=useSpring(ct,{stiffness:225,damping:30});return reactExports.useEffect(()=>{const St=Tt=>{et||ot(!0),ut.set(Tt.clientX),ct.set(Tt.clientY)};window.addEventListener("mousemove",St);const kt=document.querySelectorAll("a, button, .clickable");return kt.forEach(Tt=>{Tt.addEventListener("mouseenter",()=>g(!0)),Tt.addEventListener("mouseleave",()=>g(!1))}),()=>{window.removeEventListener("mousemove",St),kt.forEach(Tt=>{Tt.removeEventListener("mouseenter",()=>g(!0)),Tt.removeEventListener("mouseleave",()=>g(!1))})}},[et]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 z-[9999] pointer-events-none",initial:{opacity:0,scale:.6},animate:{opacity:et?1:0,scale:et?1:.6},transition:{duration:.6,ease:"easeOut"},style:{translateX:dt,translateY:ft},children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-200 ${it?"bg-[#7bed9f]/80 shadow-[0_0_15px_rgba(123,237,159,0.5)]":"bg-[#7bed9f]/70 shadow-[0_0_10px_rgba(123,237,159,0.5)]"}`})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=it=>it.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=it=>it.replace(/^([A-Z])|[\s-_]+(\w)/g,(g,et,ot)=>ot?ot.toUpperCase():et.toLowerCase()),toPascalCase=it=>{const g=toCamelCase(it);return g.charAt(0).toUpperCase()+g.slice(1)},mergeClasses=(...it)=>it.filter((g,et,ot)=>!!g&&g.trim()!==""&&ot.indexOf(g)===et).join(" ").trim(),hasA11yProp=it=>{for(const g in it)if(g.startsWith("aria-")||g==="role"||g==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:it="currentColor",size:g=24,strokeWidth:et=2,absoluteStrokeWidth:ot,className:ut="",children:ct,iconNode:dt,...ft},St)=>reactExports.createElement("svg",{ref:St,...defaultAttributes,width:g,height:g,stroke:it,strokeWidth:ot?Number(et)*24/Number(g):et,className:mergeClasses("lucide",ut),...!ct&&!hasA11yProp(ft)&&{"aria-hidden":"true"},...ft},[...dt.map(([kt,Tt])=>reactExports.createElement(kt,Tt)),...Array.isArray(ct)?ct:[ct]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(it,g)=>{const et=reactExports.forwardRef(({className:ot,...ut},ct)=>reactExports.createElement(Icon,{ref:ct,iconNode:g,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(it))}`,`lucide-${it}`,ot),...ut}));return et.displayName=toPascalCase(it),et};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$N);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle$1=createLucideIcon("circle",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]],Combine=createLucideIcon("combine",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["circle",{cx:"12",cy:"6",r:"1",key:"1bh7o1"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}],["circle",{cx:"12",cy:"18",r:"1",key:"lqb9t5"}]],Divide=createLucideIcon("divide",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$4=createLucideIcon("image",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],Slash=createLucideIcon("slash",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],SquareTerminal=createLucideIcon("square-terminal",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);function SignupPage(){const{login:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=useNavigate(),[ut,ct]=reactExports.useState({name:"",email:"",password:""}),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState("");reactExports.useEffect(()=>{if(St){const jt=setTimeout(()=>kt(""),5e3);return()=>clearTimeout(jt)}},[St]);const Tt=jt=>ct({...ut,[jt.target.name]:jt.target.value}),Rt=async jt=>{var Ft,Bt;jt.preventDefault(),ft(!0),kt("");try{const Ht=await axios$1.post("https://cre8tlystudio.com/api/auth/signup",ut);Ht.status===201?(await it(ut.email,ut.password),ot("/dashboard")):kt(Ht.data.message||"Something went wrong")}catch(Ht){(Bt=(Ft=Ht.response)==null?void 0:Ft.data)!=null&&Bt.message?kt(Ht.response.data.message):kt("Signup failed. Please try again later.")}finally{ft(!1)}};return jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Join Cre8tly Studio and start creating digital products instantly."}),St&&jsxRuntimeExports.jsx("div",{className:"bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:ut.name,onChange:Tt,placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:ut.email,onChange:Tt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:g?"text":"password",name:"password",value:ut.password,onChange:Tt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":g?"Hide password":"Show password",children:g?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:dt,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:dt?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Log In"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}var i$4=Object.defineProperty,d$2=(it,g,et)=>g in it?i$4(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,r$2=(it,g,et)=>(d$2(it,typeof g!="symbol"?g+"":g,et),et);let o$4=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(g){this.current!==g&&(this.handoffState="pending",this.currentId=0,this.current=g)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$4;function u$5(it){return s$5.isServer?null:it instanceof Node?it.ownerDocument:it!=null&&it.hasOwnProperty("current")&&it.current instanceof Node?it.current.ownerDocument:document}function t$4(it){typeof queueMicrotask=="function"?queueMicrotask(it):Promise.resolve().then(it).catch(g=>setTimeout(()=>{throw g}))}function o$3(){let it=[],g={addEventListener(et,ot,ut,ct){return et.addEventListener(ot,ut,ct),g.add(()=>et.removeEventListener(ot,ut,ct))},requestAnimationFrame(...et){let ot=requestAnimationFrame(...et);return g.add(()=>cancelAnimationFrame(ot))},nextFrame(...et){return g.requestAnimationFrame(()=>g.requestAnimationFrame(...et))},setTimeout(...et){let ot=setTimeout(...et);return g.add(()=>clearTimeout(ot))},microTask(...et){let ot={current:!0};return t$4(()=>{ot.current&&et[0]()}),g.add(()=>{ot.current=!1})},style(et,ot,ut){let ct=et.style.getPropertyValue(ot);return Object.assign(et.style,{[ot]:ut}),this.add(()=>{Object.assign(et.style,{[ot]:ct})})},group(et){let ot=o$3();return et(ot),this.add(()=>ot.dispose())},add(et){return it.includes(et)||it.push(et),()=>{let ot=it.indexOf(et);if(ot>=0)for(let ut of it.splice(ot,1))ut()}},dispose(){for(let et of it.splice(0))et()}};return g}function p$2(){let[it]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>it.dispose(),[it]),it}let n$3=(it,g)=>{s$5.isServer?reactExports.useEffect(it,g):reactExports.useLayoutEffect(it,g)};function s$4(it){let g=reactExports.useRef(it);return n$3(()=>{g.current=it},[it]),g}let o$2=function(it){let g=s$4(it);return React$3.useCallback((...et)=>g.current(...et),[g])},e$3=reactExports.createContext(void 0);function a$a(){return reactExports.useContext(e$3)}function t$3(...it){return Array.from(new Set(it.flatMap(g=>typeof g=="string"?g.split(" "):[]))).filter(Boolean).join(" ")}function u$4(it,g,...et){if(it in g){let ut=g[it];return typeof ut=="function"?ut(...et):ut}let ot=new Error(`Tried to handle "${it}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map(ut=>`"${ut}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(ot,u$4),ot}var O$3=(it=>(it[it.None=0]="None",it[it.RenderStrategy=1]="RenderStrategy",it[it.Static=2]="Static",it))(O$3||{}),A$1=(it=>(it[it.Unmount=0]="Unmount",it[it.Hidden=1]="Hidden",it))(A$1||{});function L$1(){let it=U$2();return reactExports.useCallback(g=>C$3({mergeRefs:it,...g}),[it])}function C$3({ourProps:it,theirProps:g,slot:et,defaultTag:ot,features:ut,visible:ct=!0,name:dt,mergeRefs:ft}){ft=ft??$$1;let St=P$1(g,it);if(ct)return F$1(St,et,ot,dt,ft);let kt=ut??0;if(kt&2){let{static:Tt=!1,...Rt}=St;if(Tt)return F$1(Rt,et,ot,dt,ft)}if(kt&1){let{unmount:Tt=!0,...Rt}=St;return u$4(Tt?0:1,{0(){return null},1(){return F$1({...Rt,hidden:!0,style:{display:"none"}},et,ot,dt,ft)}})}return F$1(St,et,ot,dt,ft)}function F$1(it,g={},et,ot,ut){let{as:ct=et,children:dt,refName:ft="ref",...St}=h$3(it,["unmount","static"]),kt=it.ref!==void 0?{[ft]:it.ref}:{},Tt=typeof dt=="function"?dt(g):dt;"className"in St&&St.className&&typeof St.className=="function"&&(St.className=St.className(g)),St["aria-labelledby"]&&St["aria-labelledby"]===St.id&&(St["aria-labelledby"]=void 0);let Rt={};if(g){let jt=!1,Ft=[];for(let[Bt,Ht]of Object.entries(g))typeof Ht=="boolean"&&(jt=!0),Ht===!0&&Ft.push(Bt.replace(/([A-Z])/g,Yt=>`-${Yt.toLowerCase()}`));if(jt){Rt["data-headlessui-state"]=Ft.join(" ");for(let Bt of Ft)Rt[`data-${Bt}`]=""}}if(ct===reactExports.Fragment&&(Object.keys(m$4(St)).length>0||Object.keys(m$4(Rt)).length>0))if(!reactExports.isValidElement(Tt)||Array.isArray(Tt)&&Tt.length>1){if(Object.keys(m$4(St)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${ot} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$4(St)).concat(Object.keys(m$4(Rt))).map(jt=>`  - ${jt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(jt=>`  - ${jt}`).join(`
`)].join(`
`))}else{let jt=Tt.props,Ft=jt==null?void 0:jt.className,Bt=typeof Ft=="function"?(...zt)=>t$3(Ft(...zt),St.className):t$3(Ft,St.className),Ht=Bt?{className:Bt}:{},Yt=P$1(Tt.props,m$4(h$3(St,["ref"])));for(let zt in Rt)zt in Yt&&delete Rt[zt];return reactExports.cloneElement(Tt,Object.assign({},Yt,Rt,kt,{ref:ut(H$2(Tt),kt.ref)},Ht))}return reactExports.createElement(ct,Object.assign({},h$3(St,["ref"]),ct!==reactExports.Fragment&&kt,ct!==reactExports.Fragment&&Rt),Tt)}function U$2(){let it=reactExports.useRef([]),g=reactExports.useCallback(et=>{for(let ot of it.current)ot!=null&&(typeof ot=="function"?ot(et):ot.current=et)},[]);return(...et)=>{if(!et.every(ot=>ot==null))return it.current=et,g}}function $$1(...it){return it.every(g=>g==null)?void 0:g=>{for(let et of it)et!=null&&(typeof et=="function"?et(g):et.current=g)}}function P$1(...it){if(it.length===0)return{};if(it.length===1)return it[0];let g={},et={};for(let ot of it)for(let ut in ot)ut.startsWith("on")&&typeof ot[ut]=="function"?(et[ut]!=null||(et[ut]=[]),et[ut].push(ot[ut])):g[ut]=ot[ut];if(g.disabled||g["aria-disabled"])for(let ot in et)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(ot)&&(et[ot]=[ut=>{var ct;return(ct=ut==null?void 0:ut.preventDefault)==null?void 0:ct.call(ut)}]);for(let ot in et)Object.assign(g,{[ot](ut,...ct){let dt=et[ot];for(let ft of dt){if((ut instanceof Event||(ut==null?void 0:ut.nativeEvent)instanceof Event)&&ut.defaultPrevented)return;ft(ut,...ct)}}});return g}function K(it){var g;return Object.assign(reactExports.forwardRef(it),{displayName:(g=it.displayName)!=null?g:it.name})}function m$4(it){let g=Object.assign({},it);for(let et in g)g[et]===void 0&&delete g[et];return g}function h$3(it,g=[]){let et=Object.assign({},it);for(let ot of g)ot in et&&delete et[ot];return et}function H$2(it){return React$3.version.split(".")[0]>="19"?it.props.ref:it.ref}let a$9="span";var s$3=(it=>(it[it.None=1]="None",it[it.Focusable=2]="Focusable",it[it.Hidden=4]="Hidden",it))(s$3||{});function l$2(it,g){var et;let{features:ot=1,...ut}=it,ct={ref:g,"aria-hidden":(ot&2)===2?!0:(et=ut["aria-hidden"])!=null?et:void 0,hidden:(ot&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(ot&4)===4&&(ot&2)!==2&&{display:"none"}}};return L$1()({ourProps:ct,theirProps:ut,slot:{},defaultTag:a$9,name:"Hidden"})}let f$6=K(l$2),u$3=Symbol();function T$2(it,g=!0){return Object.assign(it,{[u$3]:g})}function y$3(...it){let g=reactExports.useRef(it);reactExports.useEffect(()=>{g.current=it},[it]);let et=o$2(ot=>{for(let ut of g.current)ut!=null&&(typeof ut=="function"?ut(ot):ut.current=ot)});return it.every(ot=>ot==null||(ot==null?void 0:ot[u$3]))?void 0:et}let a$8=reactExports.createContext(null);a$8.displayName="DescriptionContext";function f$5(){let it=reactExports.useContext(a$8);if(it===null){let g=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(g,f$5),g}return it}function w$3(){let[it,g]=reactExports.useState([]);return[it.length>0?it.join(" "):void 0,reactExports.useMemo(()=>function(et){let ot=o$2(ct=>(g(dt=>[...dt,ct]),()=>g(dt=>{let ft=dt.slice(),St=ft.indexOf(ct);return St!==-1&&ft.splice(St,1),ft}))),ut=reactExports.useMemo(()=>({register:ot,slot:et.slot,name:et.name,props:et.props,value:et.value}),[ot,et.slot,et.name,et.props,et.value]);return React$3.createElement(a$8.Provider,{value:ut},et.children)},[g])]}let S$2="p";function C$2(it,g){let et=reactExports.useId(),ot=a$a(),{id:ut=`headlessui-description-${et}`,...ct}=it,dt=f$5(),ft=y$3(g);n$3(()=>dt.register(ut),[ut,dt.register]);let St=ot||!1,kt=reactExports.useMemo(()=>({...dt.slot,disabled:St}),[dt.slot,St]),Tt={ref:ft,...dt.props,id:ut};return L$1()({ourProps:Tt,theirProps:ct,slot:kt,defaultTag:S$2,name:dt.name||"Description"})}let _$1=K(C$2),H$1=Object.assign(_$1,{});var o$1=(it=>(it.Space=" ",it.Enter="Enter",it.Escape="Escape",it.Backspace="Backspace",it.Delete="Delete",it.ArrowLeft="ArrowLeft",it.ArrowUp="ArrowUp",it.ArrowRight="ArrowRight",it.ArrowDown="ArrowDown",it.Home="Home",it.End="End",it.PageUp="PageUp",it.PageDown="PageDown",it.Tab="Tab",it))(o$1||{});let e$2=reactExports.createContext(()=>{});function C$1({value:it,children:g}){return React$3.createElement(e$2.Provider,{value:it},g)}let a$7=class extends Map{constructor(g){super(),this.factory=g}get(g){let et=super.get(g);return et===void 0&&(et=this.factory(g),this.set(g,et)),et}};function a$6(it,g){let et=it(),ot=new Set;return{getSnapshot(){return et},subscribe(ut){return ot.add(ut),()=>ot.delete(ut)},dispatch(ut,...ct){let dt=g[ut].call(et,...ct);dt&&(et=dt,ot.forEach(ft=>ft()))}}}function o(it){return reactExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getSnapshot)}let p$1=new a$7(()=>a$6(()=>[],{ADD(it){return this.includes(it)?this:[...this,it]},REMOVE(it){let g=this.indexOf(it);if(g===-1)return this;let et=this.slice();return et.splice(g,1),et}}));function x$2(it,g){let et=p$1.get(g),ot=reactExports.useId(),ut=o(et);if(n$3(()=>{if(it)return et.dispatch("ADD",ot),()=>et.dispatch("REMOVE",ot)},[et,it]),!it)return!1;let ct=ut.indexOf(ot),dt=ut.length;return ct===-1&&(ct=dt,dt+=1),ct===dt-1}let f$4=new Map,u$2=new Map;function h$2(it){var g;let et=(g=u$2.get(it))!=null?g:0;return u$2.set(it,et+1),et!==0?()=>m$3(it):(f$4.set(it,{"aria-hidden":it.getAttribute("aria-hidden"),inert:it.inert}),it.setAttribute("aria-hidden","true"),it.inert=!0,()=>m$3(it))}function m$3(it){var g;let et=(g=u$2.get(it))!=null?g:1;if(et===1?u$2.delete(it):u$2.set(it,et-1),et!==1)return;let ot=f$4.get(it);ot&&(ot["aria-hidden"]===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",ot["aria-hidden"]),it.inert=ot.inert,f$4.delete(it))}function y$2(it,{allowed:g,disallowed:et}={}){let ot=x$2(it,"inert-others");n$3(()=>{var ut,ct;if(!ot)return;let dt=o$3();for(let St of(ut=et==null?void 0:et())!=null?ut:[])St&&dt.add(h$2(St));let ft=(ct=g==null?void 0:g())!=null?ct:[];for(let St of ft){if(!St)continue;let kt=u$5(St);if(!kt)continue;let Tt=St.parentElement;for(;Tt&&Tt!==kt.body;){for(let Rt of Tt.children)ft.some(jt=>Rt.contains(jt))||dt.add(h$2(Rt));Tt=Tt.parentElement}}return dt.dispose},[ot,g,et])}function m$2(it,g,et){let ot=s$4(ut=>{let ct=ut.getBoundingClientRect();ct.x===0&&ct.y===0&&ct.width===0&&ct.height===0&&et()});reactExports.useEffect(()=>{if(!it)return;let ut=g===null?null:g instanceof HTMLElement?g:g.current;if(!ut)return;let ct=o$3();if(typeof ResizeObserver<"u"){let dt=new ResizeObserver(()=>ot.current(ut));dt.observe(ut),ct.add(()=>dt.disconnect())}if(typeof IntersectionObserver<"u"){let dt=new IntersectionObserver(()=>ot.current(ut));dt.observe(ut),ct.add(()=>dt.disconnect())}return()=>ct.dispose()},[g,ot,it])}let f$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(it=>`${it}:not([tabindex='-1'])`).join(","),p=["[data-autofocus]"].map(it=>`${it}:not([tabindex='-1'])`).join(",");var F=(it=>(it[it.First=1]="First",it[it.Previous=2]="Previous",it[it.Next=4]="Next",it[it.Last=8]="Last",it[it.WrapAround=16]="WrapAround",it[it.NoScroll=32]="NoScroll",it[it.AutoFocus=64]="AutoFocus",it))(F||{}),T$1=(it=>(it[it.Error=0]="Error",it[it.Overflow=1]="Overflow",it[it.Success=2]="Success",it[it.Underflow=3]="Underflow",it))(T$1||{}),y$1=(it=>(it[it.Previous=-1]="Previous",it[it.Next=1]="Next",it))(y$1||{});function b$2(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(f$3)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$1(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(p)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}var h$1=(it=>(it[it.Strict=0]="Strict",it[it.Loose=1]="Loose",it))(h$1||{});function A(it,g=0){var et;return it===((et=u$5(it))==null?void 0:et.body)?!1:u$4(g,{0(){return it.matches(f$3)},1(){let ot=it;for(;ot!==null;){if(ot.matches(f$3))return!0;ot=ot.parentElement}return!1}})}var H=(it=>(it[it.Keyboard=0]="Keyboard",it[it.Mouse=1]="Mouse",it))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",it=>{it.metaKey||it.altKey||it.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",it=>{it.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:it.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$2(it){it==null||it.focus({preventScroll:!0})}let w$2=["textarea","input"].join(",");function O$2(it){var g,et;return(et=(g=it==null?void 0:it.matches)==null?void 0:g.call(it,w$2))!=null?et:!1}function _(it,g=et=>et){return it.slice().sort((et,ot)=>{let ut=g(et),ct=g(ot);if(ut===null||ct===null)return 0;let dt=ut.compareDocumentPosition(ct);return dt&Node.DOCUMENT_POSITION_FOLLOWING?-1:dt&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P(it,g,{sorted:et=!0,relativeTo:ot=null,skipElements:ut=[]}={}){let ct=Array.isArray(it)?it.length>0?it[0].ownerDocument:document:it.ownerDocument,dt=Array.isArray(it)?et?_(it):it:g&64?S$1(it):b$2(it);ut.length>0&&dt.length>1&&(dt=dt.filter(Ft=>!ut.some(Bt=>Bt!=null&&"current"in Bt?(Bt==null?void 0:Bt.current)===Ft:Bt===Ft))),ot=ot??ct.activeElement;let ft=(()=>{if(g&5)return 1;if(g&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),St=(()=>{if(g&1)return 0;if(g&2)return Math.max(0,dt.indexOf(ot))-1;if(g&4)return Math.max(0,dt.indexOf(ot))+1;if(g&8)return dt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),kt=g&32?{preventScroll:!0}:{},Tt=0,Rt=dt.length,jt;do{if(Tt>=Rt||Tt+Rt<=0)return 0;let Ft=St+Tt;if(g&16)Ft=(Ft+Rt)%Rt;else{if(Ft<0)return 3;if(Ft>=Rt)return 1}jt=dt[Ft],jt==null||jt.focus(kt),Tt+=ft}while(jt!==ct.activeElement);return g&6&&O$2(jt)&&jt.select(),2}function t$2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$2()||i$3()}function i$2(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ct(dt){ut.current(dt)}return document.addEventListener(g,ct,ot),()=>document.removeEventListener(g,ct,ot)},[it,g,ot])}function s$2(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ct(dt){ut.current(dt)}return window.addEventListener(g,ct,ot),()=>window.removeEventListener(g,ct,ot)},[it,g,ot])}const E$1=30;function R$2(it,g,et){let ot=x$2(it,"outside-click"),ut=s$4(et),ct=reactExports.useCallback(function(St,kt){if(St.defaultPrevented)return;let Tt=kt(St);if(Tt===null||!Tt.getRootNode().contains(Tt)||!Tt.isConnected)return;let Rt=function jt(Ft){return typeof Ft=="function"?jt(Ft()):Array.isArray(Ft)||Ft instanceof Set?Ft:[Ft]}(g);for(let jt of Rt)if(jt!==null&&(jt.contains(Tt)||St.composed&&St.composedPath().includes(jt)))return;return!A(Tt,h$1.Loose)&&Tt.tabIndex!==-1&&St.preventDefault(),ut.current(St,Tt)},[ut,g]),dt=reactExports.useRef(null);i$2(ot,"pointerdown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"mousedown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"click",St=>{n$2()||dt.current&&(ct(St,()=>dt.current),dt.current=null)},!0);let ft=reactExports.useRef({x:0,y:0});i$2(ot,"touchstart",St=>{ft.current.x=St.touches[0].clientX,ft.current.y=St.touches[0].clientY},!0),i$2(ot,"touchend",St=>{let kt={x:St.changedTouches[0].clientX,y:St.changedTouches[0].clientY};if(!(Math.abs(kt.x-ft.current.x)>=E$1||Math.abs(kt.y-ft.current.y)>=E$1))return ct(St,()=>St.target instanceof HTMLElement?St.target:null)},!0),s$2(ot,"blur",St=>ct(St,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(...it){return reactExports.useMemo(()=>u$5(...it),[...it])}function E(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{it=it??window;function ct(dt){ut.current(dt)}return it.addEventListener(g,ct,ot),()=>it.removeEventListener(g,ct,ot)},[it,g,ot])}function d$1(){let it;return{before({doc:g}){var et;let ot=g.documentElement,ut=(et=g.defaultView)!=null?et:window;it=Math.max(0,ut.innerWidth-ot.clientWidth)},after({doc:g,d:et}){let ot=g.documentElement,ut=Math.max(0,ot.clientWidth-ot.offsetWidth),ct=Math.max(0,it-ut);et.style(ot,"paddingRight",`${ct}px`)}}}function d(){return t$2()?{before({doc:it,d:g,meta:et}){function ot(ut){return et.containers.flatMap(ct=>ct()).some(ct=>ct.contains(ut))}g.microTask(()=>{var ut;if(window.getComputedStyle(it.documentElement).scrollBehavior!=="auto"){let ft=o$3();ft.style(it.documentElement,"scrollBehavior","auto"),g.add(()=>g.microTask(()=>ft.dispose()))}let ct=(ut=window.scrollY)!=null?ut:window.pageYOffset,dt=null;g.addEventListener(it,"click",ft=>{if(ft.target instanceof HTMLElement)try{let St=ft.target.closest("a");if(!St)return;let{hash:kt}=new URL(St.href),Tt=it.querySelector(kt);Tt&&!ot(Tt)&&(dt=Tt)}catch{}},!0),g.addEventListener(it,"touchstart",ft=>{if(ft.target instanceof HTMLElement)if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&ot(St.parentElement);)St=St.parentElement;g.style(St,"overscrollBehavior","contain")}else g.style(ft.target,"touchAction","none")}),g.addEventListener(it,"touchmove",ft=>{if(ft.target instanceof HTMLElement){if(ft.target.tagName==="INPUT")return;if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&St.dataset.headlessuiPortal!==""&&!(St.scrollHeight>St.clientHeight||St.scrollWidth>St.clientWidth);)St=St.parentElement;St.dataset.headlessuiPortal===""&&ft.preventDefault()}else ft.preventDefault()}},{passive:!1}),g.add(()=>{var ft;let St=(ft=window.scrollY)!=null?ft:window.pageYOffset;ct!==St&&window.scrollTo(0,ct),dt&&dt.isConnected&&(dt.scrollIntoView({block:"nearest"}),dt=null)})})}}:{}}function r$1(){return{before({doc:it,d:g}){g.style(it.documentElement,"overflow","hidden")}}}function m$1(it){let g={};for(let et of it)Object.assign(g,et(g));return g}let a$5=a$6(()=>new Map,{PUSH(it,g){var et;let ot=(et=this.get(it))!=null?et:{doc:it,count:0,d:o$3(),meta:new Set};return ot.count++,ot.meta.add(g),this.set(it,ot),this},POP(it,g){let et=this.get(it);return et&&(et.count--,et.meta.delete(g)),this},SCROLL_PREVENT({doc:it,d:g,meta:et}){let ot={doc:it,d:g,meta:m$1(et)},ut=[d(),d$1(),r$1()];ut.forEach(({before:ct})=>ct==null?void 0:ct(ot)),ut.forEach(({after:ct})=>ct==null?void 0:ct(ot))},SCROLL_ALLOW({d:it}){it.dispose()},TEARDOWN({doc:it}){this.delete(it)}});a$5.subscribe(()=>{let it=a$5.getSnapshot(),g=new Map;for(let[et]of it)g.set(et,et.documentElement.style.overflow);for(let et of it.values()){let ot=g.get(et.doc)==="hidden",ut=et.count!==0;(ut&&!ot||!ut&&ot)&&a$5.dispatch(et.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",et),et.count===0&&a$5.dispatch("TEARDOWN",et)}});function a$4(it,g,et=()=>({containers:[]})){let ot=o(a$5),ut=g?ot.get(g):void 0,ct=ut?ut.count>0:!1;return n$3(()=>{if(!(!g||!it))return a$5.dispatch("PUSH",g,et),()=>a$5.dispatch("POP",g,et)},[it,g]),ct}function f$2(it,g,et=()=>[document.body]){let ot=x$2(it,"scroll-lock");a$4(ot,g,ut=>{var ct;return{containers:[...(ct=ut.containers)!=null?ct:[],et]}})}function c$2(it=0){let[g,et]=reactExports.useState(it),ot=reactExports.useCallback(St=>et(St),[g]),ut=reactExports.useCallback(St=>et(kt=>kt|St),[g]),ct=reactExports.useCallback(St=>(g&St)===St,[g]),dt=reactExports.useCallback(St=>et(kt=>kt&~St),[et]),ft=reactExports.useCallback(St=>et(kt=>kt^St),[et]);return{flags:g,setFlag:ot,addFlag:ut,hasFlag:ct,removeFlag:dt,toggleFlag:ft}}var T,b$1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T=process==null?void 0:process.env)==null?void 0:T.NODE_ENV)==="test"&&typeof((b$1=Element==null?void 0:Element.prototype)==null?void 0:b$1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L=(it=>(it[it.None=0]="None",it[it.Closed=1]="Closed",it[it.Enter=2]="Enter",it[it.Leave=4]="Leave",it))(L||{});function R$1(it){let g={};for(let et in it)it[et]===!0&&(g[`data-${et}`]="");return g}function x$1(it,g,et,ot){let[ut,ct]=reactExports.useState(et),{hasFlag:dt,addFlag:ft,removeFlag:St}=c$2(it&&ut?3:0),kt=reactExports.useRef(!1),Tt=reactExports.useRef(!1),Rt=p$2();return n$3(()=>{var jt;if(it){if(et&&ct(!0),!g){et&&ft(3);return}return(jt=ot==null?void 0:ot.start)==null||jt.call(ot,et),C(g,{inFlight:kt,prepare(){Tt.current?Tt.current=!1:Tt.current=kt.current,kt.current=!0,!Tt.current&&(et?(ft(3),St(4)):(ft(4),St(2)))},run(){Tt.current?et?(St(3),ft(4)):(St(4),ft(3)):et?St(1):ft(1)},done(){var Ft;Tt.current&&typeof g.getAnimations=="function"&&g.getAnimations().length>0||(kt.current=!1,St(7),et||ct(!1),(Ft=ot==null?void 0:ot.end)==null||Ft.call(ot,et))}})}},[it,et,g,Rt]),it?[ut,{closed:dt(1),enter:dt(2),leave:dt(4),transition:dt(2)||dt(4)}]:[et,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(it,{prepare:g,run:et,done:ot,inFlight:ut}){let ct=o$3();return j$1(it,{prepare:g,inFlight:ut}),ct.nextFrame(()=>{et(),ct.requestAnimationFrame(()=>{ct.add(M$2(it,ot))})}),ct.dispose}function M$2(it,g){var et,ot;let ut=o$3();if(!it)return ut.dispose;let ct=!1;ut.add(()=>{ct=!0});let dt=(ot=(et=it.getAnimations)==null?void 0:et.call(it).filter(ft=>ft instanceof CSSTransition))!=null?ot:[];return dt.length===0?(g(),ut.dispose):(Promise.allSettled(dt.map(ft=>ft.finished)).then(()=>{ct||g()}),ut.dispose)}function j$1(it,{inFlight:g,prepare:et}){if(g!=null&&g.current){et();return}let ot=it.style.transition;it.style.transition="none",et(),it.offsetHeight,it.style.transition=ot}function m(it,g){let et=reactExports.useRef([]),ot=o$2(it);reactExports.useEffect(()=>{let ut=[...et.current];for(let[ct,dt]of g.entries())if(et.current[ct]!==dt){let ft=ot(g,ut);return et.current=g,ft}},[ot,...g])}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i$1=(it=>(it[it.Open=1]="Open",it[it.Closed=2]="Closed",it[it.Closing=4]="Closing",it[it.Opening=8]="Opening",it))(i$1||{});function u$1(){return reactExports.useContext(n)}function c$1({value:it,children:g}){return React$3.createElement(n.Provider,{value:it},g)}function s$1({children:it}){return React$3.createElement(n.Provider,{value:null},it)}function t$1(it){function g(){document.readyState!=="loading"&&(it(),document.removeEventListener("DOMContentLoaded",g))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",g),g())}let r=[];t$1(()=>{function it(g){if(!(g.target instanceof HTMLElement)||g.target===document.body||r[0]===g.target)return;let et=g.target;et=et.closest(f$3),r.unshift(et??g.target),r=r.filter(ot=>ot!=null&&ot.isConnected),r.splice(10)}window.addEventListener("click",it,{capture:!0}),window.addEventListener("mousedown",it,{capture:!0}),window.addEventListener("focus",it,{capture:!0}),document.body.addEventListener("click",it,{capture:!0}),document.body.addEventListener("mousedown",it,{capture:!0}),document.body.addEventListener("focus",it,{capture:!0})});function c(it){let g=o$2(it),et=reactExports.useRef(!1);reactExports.useEffect(()=>(et.current=!1,()=>{et.current=!0,t$4(()=>{et.current&&g()})}),[g])}function s(){let it=typeof document>"u";return"useSyncExternalStore"in t$5?(g=>g.useSyncExternalStore)(t$5)(()=>()=>{},()=>!1,()=>!it):!1}function l$1(){let it=s(),[g,et]=reactExports.useState(s$5.isHandoffComplete);return g&&s$5.isHandoffComplete===!1&&et(!1),reactExports.useEffect(()=>{g!==!0&&et(!0)},[g]),reactExports.useEffect(()=>s$5.handoff(),[]),it?!1:g}let e$1=reactExports.createContext(!1);function a$3(){return reactExports.useContext(e$1)}function l(it){return React$3.createElement(e$1.Provider,{value:it.force},it.children)}function N(it){let g=a$3(),et=reactExports.useContext(v),ot=n$1(it),[ut,ct]=reactExports.useState(()=>{var dt;if(!g&&et!==null)return(dt=et.current)!=null?dt:null;if(s$5.isServer)return null;let ft=ot==null?void 0:ot.getElementById("headlessui-portal-root");if(ft)return ft;if(ot===null)return null;let St=ot.createElement("div");return St.setAttribute("id","headlessui-portal-root"),ot.body.appendChild(St)});return reactExports.useEffect(()=>{ut!==null&&(ot!=null&&ot.body.contains(ut)||ot==null||ot.body.appendChild(ut))},[ut,ot]),reactExports.useEffect(()=>{g||et!==null&&ct(et.current)},[et,ct,g]),ut}let M$1=reactExports.Fragment,S=K(function(it,g){let et=it,ot=reactExports.useRef(null),ut=y$3(T$2(Rt=>{ot.current=Rt}),g),ct=n$1(ot),dt=N(ot),[ft]=reactExports.useState(()=>{var Rt;return s$5.isServer?null:(Rt=ct==null?void 0:ct.createElement("div"))!=null?Rt:null}),St=reactExports.useContext(y),kt=l$1();n$3(()=>{!dt||!ft||dt.contains(ft)||(ft.setAttribute("data-headlessui-portal",""),dt.appendChild(ft))},[dt,ft]),n$3(()=>{if(ft&&St)return St.register(ft)},[St,ft]),c(()=>{var Rt;!dt||!ft||(ft instanceof Node&&dt.contains(ft)&&dt.removeChild(ft),dt.childNodes.length<=0&&((Rt=dt.parentElement)==null||Rt.removeChild(dt)))});let Tt=L$1();return kt?!dt||!ft?null:reactDomExports.createPortal(Tt({ourProps:{ref:ut},theirProps:et,slot:{},defaultTag:M$1,name:"Portal"}),ft):null});function j(it,g){let et=y$3(g),{enabled:ot=!0,...ut}=it,ct=L$1();return ot?React$3.createElement(S,{...ut,ref:et}):ct({ourProps:{ref:et},theirProps:ut,slot:{},defaultTag:M$1,name:"Portal"})}let W=reactExports.Fragment,v=reactExports.createContext(null);function I$1(it,g){let{target:et,...ot}=it,ut={ref:y$3(g)},ct=L$1();return React$3.createElement(v.Provider,{value:et},ct({ourProps:ut,theirProps:ot,defaultTag:W,name:"Popover.Group"}))}let y=reactExports.createContext(null);function te$1(){let it=reactExports.useContext(y),g=reactExports.useRef([]),et=o$2(ct=>(g.current.push(ct),it&&it.register(ct),()=>ot(ct))),ot=o$2(ct=>{let dt=g.current.indexOf(ct);dt!==-1&&g.current.splice(dt,1),it&&it.unregister(ct)}),ut=reactExports.useMemo(()=>({register:et,unregister:ot,portals:g}),[et,ot,g]);return[g,reactExports.useMemo(()=>function({children:ct}){return React$3.createElement(y.Provider,{value:ut},ct)},[ut])]}let J=K(j),X$1=K(I$1),re$1=Object.assign(J,{Group:X$1});function a$2(it,g=typeof document<"u"?document.defaultView:null,et){let ot=x$2(it,"escape");E(g,"keydown",ut=>{ot&&(ut.defaultPrevented||ut.key===o$1.Escape&&et(ut))})}function f$1(){var it;let[g]=reactExports.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[et,ot]=reactExports.useState((it=g==null?void 0:g.matches)!=null?it:!1);return n$3(()=>{if(!g)return;function ut(ct){ot(ct.matches)}return g.addEventListener("change",ut),()=>g.removeEventListener("change",ut)},[g]),et}function R({defaultContainers:it=[],portals:g,mainTreeNode:et}={}){let ot=n$1(et),ut=o$2(()=>{var ct,dt;let ft=[];for(let St of it)St!==null&&(St instanceof HTMLElement?ft.push(St):"current"in St&&St.current instanceof HTMLElement&&ft.push(St.current));if(g!=null&&g.current)for(let St of g.current)ft.push(St);for(let St of(ct=ot==null?void 0:ot.querySelectorAll("html > *, body > *"))!=null?ct:[])St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St.id!=="headlessui-portal-root"&&(et&&(St.contains(et)||St.contains((dt=et==null?void 0:et.getRootNode())==null?void 0:dt.host))||ft.some(kt=>St.contains(kt))||ft.push(St));return ft});return{resolveContainers:ut,contains:o$2(ct=>ut().some(dt=>dt.contains(ct)))}}let a$1=reactExports.createContext(null);function O$1({children:it,node:g}){let[et,ot]=reactExports.useState(null),ut=b(g??et);return React$3.createElement(a$1.Provider,{value:ut},it,ut===null&&React$3.createElement(f$6,{features:s$3.Hidden,ref:ct=>{var dt,ft;if(ct){for(let St of(ft=(dt=u$5(ct))==null?void 0:dt.querySelectorAll("html > *, body > *"))!=null?ft:[])if(St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St!=null&&St.contains(ct)){ot(St);break}}}}))}function b(it=null){var g;return(g=reactExports.useContext(a$1))!=null?g:it}function f(){let it=reactExports.useRef(!1);return n$3(()=>(it.current=!0,()=>{it.current=!1}),[]),it}var a=(it=>(it[it.Forwards=0]="Forwards",it[it.Backwards=1]="Backwards",it))(a||{});function u(){let it=reactExports.useRef(0);return s$2(!0,"keydown",g=>{g.key==="Tab"&&(it.current=g.shiftKey?1:0)},!0),it}function U$1(it){if(!it)return new Set;if(typeof it=="function")return new Set(it());let g=new Set;for(let et of it.current)et.current instanceof HTMLElement&&g.add(et.current);return g}let Z="div";var x=(it=>(it[it.None=0]="None",it[it.InitialFocus=1]="InitialFocus",it[it.TabLock=2]="TabLock",it[it.FocusLock=4]="FocusLock",it[it.RestoreFocus=8]="RestoreFocus",it[it.AutoFocus=16]="AutoFocus",it))(x||{});function $(it,g){let et=reactExports.useRef(null),ot=y$3(et,g),{initialFocus:ut,initialFocusFallback:ct,containers:dt,features:ft=15,...St}=it;l$1()||(ft=0);let kt=n$1(et);ee(ft,{ownerDocument:kt});let Tt=te(ft,{ownerDocument:kt,container:et,initialFocus:ut,initialFocusFallback:ct});re(ft,{ownerDocument:kt,container:et,containers:dt,previousActiveElement:Tt});let Rt=u(),jt=o$2(Kt=>{let en=et.current;en&&(tn=>tn())(()=>{u$4(Rt.current,{[a.Forwards]:()=>{P(en,F.First,{skipElements:[Kt.relatedTarget,ct]})},[a.Backwards]:()=>{P(en,F.Last,{skipElements:[Kt.relatedTarget,ct]})}})})}),Ft=x$2(!!(ft&2),"focus-trap#tab-lock"),Bt=p$2(),Ht=reactExports.useRef(!1),Yt={ref:ot,onKeyDown(Kt){Kt.key=="Tab"&&(Ht.current=!0,Bt.requestAnimationFrame(()=>{Ht.current=!1}))},onBlur(Kt){if(!(ft&4))return;let en=U$1(dt);et.current instanceof HTMLElement&&en.add(et.current);let tn=Kt.relatedTarget;tn instanceof HTMLElement&&tn.dataset.headlessuiFocusGuard!=="true"&&(I(en,tn)||(Ht.current?P(et.current,u$4(Rt.current,{[a.Forwards]:()=>F.Next,[a.Backwards]:()=>F.Previous})|F.WrapAround,{relativeTo:Kt.target}):Kt.target instanceof HTMLElement&&I$2(Kt.target)))}},zt=L$1();return React$3.createElement(React$3.Fragment,null,Ft&&React$3.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}),zt({ourProps:Yt,theirProps:St,defaultTag:Z,name:"FocusTrap"}),Ft&&React$3.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}))}let D=K($),ye=Object.assign(D,{features:x});function w$1(it=!0){let g=reactExports.useRef(r.slice());return m(([et],[ot])=>{ot===!0&&et===!1&&t$4(()=>{g.current.splice(0)}),ot===!1&&et===!0&&(g.current=r.slice())},[it,r,g]),o$2(()=>{var et;return(et=g.current.find(ot=>ot!=null&&ot.isConnected))!=null?et:null})}function ee(it,{ownerDocument:g}){let et=!!(it&8),ot=w$1(et);m(()=>{et||(g==null?void 0:g.activeElement)===(g==null?void 0:g.body)&&I$2(ot())},[et]),c(()=>{et&&I$2(ot())})}function te(it,{ownerDocument:g,container:et,initialFocus:ot,initialFocusFallback:ut}){let ct=reactExports.useRef(null),dt=x$2(!!(it&1),"focus-trap#initial-focus"),ft=f();return m(()=>{if(it===0)return;if(!dt){ut!=null&&ut.current&&I$2(ut.current);return}let St=et.current;St&&t$4(()=>{if(!ft.current)return;let kt=g==null?void 0:g.activeElement;if(ot!=null&&ot.current){if((ot==null?void 0:ot.current)===kt){ct.current=kt;return}}else if(St.contains(kt)){ct.current=kt;return}if(ot!=null&&ot.current)I$2(ot.current);else{if(it&16){if(P(St,F.First|F.AutoFocus)!==T$1.Error)return}else if(P(St,F.First)!==T$1.Error)return;if(ut!=null&&ut.current&&(I$2(ut.current),(g==null?void 0:g.activeElement)===ut.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}ct.current=g==null?void 0:g.activeElement})},[ut,dt,it]),ct}function re(it,{ownerDocument:g,container:et,containers:ot,previousActiveElement:ut}){let ct=f(),dt=!!(it&4);E(g==null?void 0:g.defaultView,"focus",ft=>{if(!dt||!ct.current)return;let St=U$1(ot);et.current instanceof HTMLElement&&St.add(et.current);let kt=ut.current;if(!kt)return;let Tt=ft.target;Tt&&Tt instanceof HTMLElement?I(St,Tt)?(ut.current=Tt,I$2(Tt)):(ft.preventDefault(),ft.stopPropagation(),I$2(kt)):I$2(ut.current)},!0)}function I(it,g){for(let et of it)if(et.contains(g))return!0;return!1}function ue(it){var g;return!!(it.enter||it.enterFrom||it.enterTo||it.leave||it.leaveFrom||it.leaveTo)||((g=it.as)!=null?g:de)!==reactExports.Fragment||React$3.Children.count(it.children)===1}let w=reactExports.createContext(null);w.displayName="TransitionContext";var _e=(it=>(it.Visible="visible",it.Hidden="hidden",it))(_e||{});function De(){let it=reactExports.useContext(w);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}function He$1(){let it=reactExports.useContext(M);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}let M=reactExports.createContext(null);M.displayName="NestingContext";function U(it){return"children"in it?U(it.children):it.current.filter(({el:g})=>g.current!==null).filter(({state:g})=>g==="visible").length>0}function Te(it,g){let et=s$4(it),ot=reactExports.useRef([]),ut=f(),ct=p$2(),dt=o$2((Ft,Bt=A$1.Hidden)=>{let Ht=ot.current.findIndex(({el:Yt})=>Yt===Ft);Ht!==-1&&(u$4(Bt,{[A$1.Unmount](){ot.current.splice(Ht,1)},[A$1.Hidden](){ot.current[Ht].state="hidden"}}),ct.microTask(()=>{var Yt;!U(ot)&&ut.current&&((Yt=et.current)==null||Yt.call(et))}))}),ft=o$2(Ft=>{let Bt=ot.current.find(({el:Ht})=>Ht===Ft);return Bt?Bt.state!=="visible"&&(Bt.state="visible"):ot.current.push({el:Ft,state:"visible"}),()=>dt(Ft,A$1.Unmount)}),St=reactExports.useRef([]),kt=reactExports.useRef(Promise.resolve()),Tt=reactExports.useRef({enter:[],leave:[]}),Rt=o$2((Ft,Bt,Ht)=>{St.current.splice(0),g&&(g.chains.current[Bt]=g.chains.current[Bt].filter(([Yt])=>Yt!==Ft)),g==null||g.chains.current[Bt].push([Ft,new Promise(Yt=>{St.current.push(Yt)})]),g==null||g.chains.current[Bt].push([Ft,new Promise(Yt=>{Promise.all(Tt.current[Bt].map(([zt,Kt])=>Kt)).then(()=>Yt())})]),Bt==="enter"?kt.current=kt.current.then(()=>g==null?void 0:g.wait.current).then(()=>Ht(Bt)):Ht(Bt)}),jt=o$2((Ft,Bt,Ht)=>{Promise.all(Tt.current[Bt].splice(0).map(([Yt,zt])=>zt)).then(()=>{var Yt;(Yt=St.current.shift())==null||Yt()}).then(()=>Ht(Bt))});return reactExports.useMemo(()=>({children:ot,register:ft,unregister:dt,onStart:Rt,onStop:jt,wait:kt,chains:Tt}),[ft,dt,ot,Rt,jt,Tt,kt])}let de=reactExports.Fragment,fe=O$3.RenderStrategy;function Ae(it,g){var et,ot;let{transition:ut=!0,beforeEnter:ct,afterEnter:dt,beforeLeave:ft,afterLeave:St,enter:kt,enterFrom:Tt,enterTo:Rt,entered:jt,leave:Ft,leaveFrom:Bt,leaveTo:Ht,...Yt}=it,[zt,Kt]=reactExports.useState(null),en=reactExports.useRef(null),tn=ue(it),on=y$3(...tn?[en,g,Kt]:g===null?[]:[g]),an=(et=Yt.unmount)==null||et?A$1.Unmount:A$1.Hidden,{show:un,appear:dn,initial:Sn}=De(),[mn,bn]=reactExports.useState(un?"visible":"hidden"),En=He$1(),{register:kn,unregister:Pn}=En;n$3(()=>kn(en),[kn,en]),n$3(()=>{if(an===A$1.Hidden&&en.current){if(un&&mn!=="visible"){bn("visible");return}return u$4(mn,{hidden:()=>Pn(en),visible:()=>kn(en)})}},[mn,en,kn,Pn,un,an]);let Ln=l$1();n$3(()=>{if(tn&&Ln&&mn==="visible"&&en.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[en,mn,Ln,tn]);let gn=Sn&&!dn,Mn=dn&&un&&Sn,yn=reactExports.useRef(!1),vn=Te(()=>{yn.current||(bn("hidden"),Pn(en))},En),On=o$2(hr=>{yn.current=!0;let _r=hr?"enter":"leave";vn.onStart(en,_r,xr=>{xr==="enter"?ct==null||ct():xr==="leave"&&(ft==null||ft())})}),Cn=o$2(hr=>{let _r=hr?"enter":"leave";yn.current=!1,vn.onStop(en,_r,xr=>{xr==="enter"?dt==null||dt():xr==="leave"&&(St==null||St())}),_r==="leave"&&!U(vn)&&(bn("hidden"),Pn(en))});reactExports.useEffect(()=>{tn&&ut||(On(un),Cn(un))},[un,tn,ut]);let Vn=(()=>!(!ut||!tn||!Ln||gn))(),[,Qn]=x$1(Vn,zt,un,{start:On,end:Cn}),ir=m$4({ref:on,className:((ot=t$3(Yt.className,Mn&&kt,Mn&&Tt,Qn.enter&&kt,Qn.enter&&Qn.closed&&Tt,Qn.enter&&!Qn.closed&&Rt,Qn.leave&&Ft,Qn.leave&&!Qn.closed&&Bt,Qn.leave&&Qn.closed&&Ht,!Qn.transition&&un&&jt))==null?void 0:ot.trim())||void 0,...R$1(Qn)}),ar=0;mn==="visible"&&(ar|=i$1.Open),mn==="hidden"&&(ar|=i$1.Closed),Qn.enter&&(ar|=i$1.Opening),Qn.leave&&(ar|=i$1.Closing);let rr=L$1();return React$3.createElement(M.Provider,{value:vn},React$3.createElement(c$1,{value:ar},rr({ourProps:ir,theirProps:Yt,defaultTag:de,features:fe,visible:mn==="visible",name:"Transition.Child"})))}function Ie$1(it,g){let{show:et,appear:ot=!1,unmount:ut=!0,...ct}=it,dt=reactExports.useRef(null),ft=ue(it),St=y$3(...ft?[dt,g]:g===null?[]:[g]);l$1();let kt=u$1();if(et===void 0&&kt!==null&&(et=(kt&i$1.Open)===i$1.Open),et===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Tt,Rt]=reactExports.useState(et?"visible":"hidden"),jt=Te(()=>{et||Rt("hidden")}),[Ft,Bt]=reactExports.useState(!0),Ht=reactExports.useRef([et]);n$3(()=>{Ft!==!1&&Ht.current[Ht.current.length-1]!==et&&(Ht.current.push(et),Bt(!1))},[Ht,et]);let Yt=reactExports.useMemo(()=>({show:et,appear:ot,initial:Ft}),[et,ot,Ft]);n$3(()=>{et?Rt("visible"):!U(jt)&&dt.current!==null&&Rt("hidden")},[et,jt]);let zt={unmount:ut},Kt=o$2(()=>{var on;Ft&&Bt(!1),(on=it.beforeEnter)==null||on.call(it)}),en=o$2(()=>{var on;Ft&&Bt(!1),(on=it.beforeLeave)==null||on.call(it)}),tn=L$1();return React$3.createElement(M.Provider,{value:jt},React$3.createElement(w.Provider,{value:Yt},tn({ourProps:{...zt,as:reactExports.Fragment,children:React$3.createElement(me,{ref:St,...zt,...ct,beforeEnter:Kt,beforeLeave:en})},theirProps:{},defaultTag:reactExports.Fragment,features:fe,visible:Tt==="visible",name:"Transition"})))}function Le(it,g){let et=reactExports.useContext(w)!==null,ot=u$1()!==null;return React$3.createElement(React$3.Fragment,null,!et&&ot?React$3.createElement(X,{ref:g,...it}):React$3.createElement(me,{ref:g,...it}))}let X=K(Ie$1),me=K(Ae),Fe=K(Le),ze=Object.assign(X,{Child:Fe,Root:X});var Oe=(it=>(it[it.Open=0]="Open",it[it.Closed=1]="Closed",it))(Oe||{}),he=(it=>(it[it.SetTitleId=0]="SetTitleId",it))(he||{});let Se={0(it,g){return it.titleId===g.id?it:{...it,titleId:g.id}}},k=reactExports.createContext(null);k.displayName="DialogContext";function O(it){let g=reactExports.useContext(k);if(g===null){let et=new Error(`<${it} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,O),et}return g}function Ie(it,g){return u$4(g.type,Se,it,g)}let V=K(function(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-${et}`,open:ut,onClose:ct,initialFocus:dt,role:ft="dialog",autoFocus:St=!0,__demoMode:kt=!1,unmount:Tt=!1,...Rt}=it,jt=reactExports.useRef(!1);ft=function(){return ft==="dialog"||ft==="alertdialog"?ft:(jt.current||(jt.current=!0,console.warn(`Invalid role [${ft}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let Ft=u$1();ut===void 0&&Ft!==null&&(ut=(Ft&i$1.Open)===i$1.Open);let Bt=reactExports.useRef(null),Ht=y$3(Bt,g),Yt=n$1(Bt),zt=ut?0:1,[Kt,en]=reactExports.useReducer(Ie,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),tn=o$2(()=>ct(!1)),on=o$2(Cn=>en({type:0,id:Cn})),an=l$1()?zt===0:!1,[un,dn]=te$1(),Sn={get current(){var Cn;return(Cn=Kt.panelRef.current)!=null?Cn:Bt.current}},mn=b(),{resolveContainers:bn}=R({mainTreeNode:mn,portals:un,defaultContainers:[Sn]}),En=Ft!==null?(Ft&i$1.Closing)===i$1.Closing:!1;y$2(kt||En?!1:an,{allowed:o$2(()=>{var Cn,Vn;return[(Vn=(Cn=Bt.current)==null?void 0:Cn.closest("[data-headlessui-portal]"))!=null?Vn:null]}),disallowed:o$2(()=>{var Cn;return[(Cn=mn==null?void 0:mn.closest("body > *:not(#headlessui-portal-root)"))!=null?Cn:null]})}),R$2(an,bn,Cn=>{Cn.preventDefault(),tn()}),a$2(an,Yt==null?void 0:Yt.defaultView,Cn=>{Cn.preventDefault(),Cn.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),tn()}),f$2(kt||En?!1:an,Yt,bn),m$2(an,Bt,tn);let[kn,Pn]=w$3(),Ln=reactExports.useMemo(()=>[{dialogState:zt,close:tn,setTitleId:on,unmount:Tt},Kt],[zt,Kt,tn,on,Tt]),gn=reactExports.useMemo(()=>({open:zt===0}),[zt]),Mn={ref:Ht,id:ot,role:ft,tabIndex:-1,"aria-modal":kt?void 0:zt===0?!0:void 0,"aria-labelledby":Kt.titleId,"aria-describedby":kn,unmount:Tt},yn=!f$1(),vn=x.None;an&&!kt&&(vn|=x.RestoreFocus,vn|=x.TabLock,St&&(vn|=x.AutoFocus),yn&&(vn|=x.InitialFocus));let On=L$1();return React$3.createElement(s$1,null,React$3.createElement(l,{force:!0},React$3.createElement(re$1,null,React$3.createElement(k.Provider,{value:Ln},React$3.createElement(X$1,{target:Bt},React$3.createElement(l,{force:!1},React$3.createElement(Pn,{slot:gn},React$3.createElement(dn,null,React$3.createElement(ye,{initialFocus:dt,initialFocusFallback:Bt,containers:bn,features:vn},React$3.createElement(C$1,{value:tn},On({ourProps:Mn,theirProps:Rt,slot:gn,defaultTag:Me,features:Ge,visible:zt===0,name:"Dialog"})))))))))))}),Me="div",Ge=O$3.RenderStrategy|O$3.Static;function ke(it,g){let{transition:et=!1,open:ot,...ut}=it,ct=u$1(),dt=it.hasOwnProperty("open")||ct!==null,ft=it.hasOwnProperty("onClose");if(!dt&&!ft)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!dt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!ft)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!ct&&typeof it.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${it.open}`);if(typeof it.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${it.onClose}`);return(ot!==void 0||et)&&!ut.static?React$3.createElement(O$1,null,React$3.createElement(ze,{show:ot,transition:et,unmount:ut.unmount},React$3.createElement(V,{ref:g,...ut}))):React$3.createElement(O$1,null,React$3.createElement(V,{ref:g,open:ot,...ut}))}let we="div";function Be(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-panel-${et}`,transition:ut=!1,...ct}=it,[{dialogState:dt,unmount:ft},St]=O("Dialog.Panel"),kt=y$3(g,St.panelRef),Tt=reactExports.useMemo(()=>({open:dt===0}),[dt]),Rt=o$2(Yt=>{Yt.stopPropagation()}),jt={ref:kt,id:ot,onClick:Rt},Ft=ut?Fe:reactExports.Fragment,Bt=ut?{unmount:ft}:{},Ht=L$1();return React$3.createElement(Ft,{...Bt},Ht({ourProps:jt,theirProps:ct,slot:Tt,defaultTag:we,name:"Dialog.Panel"}))}let Ue="div";function He(it,g){let{transition:et=!1,...ot}=it,[{dialogState:ut,unmount:ct}]=O("Dialog.Backdrop"),dt=reactExports.useMemo(()=>({open:ut===0}),[ut]),ft={ref:g,"aria-hidden":!0},St=et?Fe:reactExports.Fragment,kt=et?{unmount:ct}:{},Tt=L$1();return React$3.createElement(St,{...kt},Tt({ourProps:ft,theirProps:ot,slot:dt,defaultTag:Ue,name:"Dialog.Backdrop"}))}let Ne="h2";function We(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-title-${et}`,...ut}=it,[{dialogState:ct,setTitleId:dt}]=O("Dialog.Title"),ft=y$3(g);reactExports.useEffect(()=>(dt(ot),()=>dt(null)),[ot,dt]);let St=reactExports.useMemo(()=>({open:ct===0}),[ct]),kt={ref:ft,id:ot};return L$1()({ourProps:kt,theirProps:ut,slot:St,defaultTag:Ne,name:"Dialog.Title"})}let $e=K(ke),je=K(Be),Dt=K(He),Ye=K(We),yt=Object.assign($e,{Panel:je,Title:Ye,Description:H$1});const navLinks=[{href:"/",label:"Home"},{href:"sign-up",label:"Sign Up"},{href:"contact",label:"Contact Us"},{href:"shop",label:"Shop"},{href:"login",label:"Login"}],cannedPrompts={beginner:[{label:" Social Media Growth Guide",text:"Write a 5-page lead magnet teaching small business owners how to grow their social media following with organic content, engagement, and consistency strategies."},{label:" Email Marketing Mastery",text:"Create a detailed guide on building and nurturing an email list that converts leads into loyal customers with proven automation techniques."},{label:" Personal Branding Blueprint",text:"Write a 5-page blueprint showing entrepreneurs how to define their brand identity, build authority online, and attract ideal clients."},{label:" Design Secrets for Non-Designers",text:"Generate a lead magnet teaching beginners how to design professional graphics using free tools like Canva, including typography and color tips."},{label:" Content Creation Starter Pack",text:"Write a detailed guide helping creators build a content calendar, repurpose videos, and plan content for multiple platforms efficiently."},{label:" The Beginners Guide to Digital Products",text:"Create a 5-page guide explaining how to turn skills into profitable digital products like eBooks, courses, or templates."},{label:" Productivity Hacks for Creators",text:"Generate a guide full of time-saving systems, tools, and automation tricks that help creators stay consistent and organized."},{label:" 7 Steps to Launch Your Online Business",text:"Write a step-by-step roadmap for beginners to start an online business, from idea validation to first sale."},{label:" The Ultimate AI Prompt Guide",text:"Create a 5-page lead magnet showing users how to craft better AI prompts for marketing, writing, and design workflows."},{label:" Monetize Your Music Online",text:"Write a guide showing independent musicians how to sell music, build fanbases, and create recurring revenue from digital content."}],professional:[{label:" Build Your First Website",text:"Create a simple 5-page beginner guide teaching small businesses how to plan, design, and launch their first website using modern no-code tools."},{label:" Create & Sell Digital Templates",text:"Write a guide explaining how to design and sell Canva, Notion, or Google Docs templates that bring consistent passive income."},{label:" Mastering Video Marketing",text:"Generate a 5-page lead magnet teaching creators how to plan, shoot, and promote short-form videos that build trust and conversions."},{label:" Branding Psychology 101",text:"Write a lead magnet breaking down the psychology of color, typography, and emotion in brand design."},{label:" Freelancer Success Playbook",text:"Create a guide showing freelancers how to price their services, close clients, and scale into an agency model."},{label:" The Digital Marketing Roadmap",text:"Write a complete 5-step roadmap for entrepreneurs to master content, SEO, ads, and email marketing for consistent traffic."},{label:" Copywriting for Conversions",text:"Generate a guide that teaches beginners the art of persuasive writing  from headlines to calls-to-action."},{label:" Funnel Building Simplified",text:"Write a 5-page walkthrough on building high-converting funnels using lead magnets, tripwires, and upsells."},{label:" Automate Your Business",text:"Create a guide showing small business owners how to automate repetitive tasks using Zapier, AI, and scheduling tools."},{label:" Data-Driven Marketing",text:"Write a beginner-friendly guide teaching business owners how to track analytics, interpret data, and improve conversions."}],expert:[{label:" The Psychology of Persuasion in Marketing",text:"Write a 5-page academic-style guide exploring how cognitive biases, emotional triggers, and storytelling affect consumer decision-making in marketing and branding."},{label:" The Science of Habit-Building for Creators",text:"Develop a 5-page guide teaching creators how to build long-term consistency by applying behavioral science and habit-formation frameworks to their creative routines."},{label:" The Economics of Attention",text:"Write a thought-provoking lead magnet analyzing how attention has become a modern currency, explaining scarcity, virality, and monetization in the digital economy."},{label:" Design Thinking for Business Innovation",text:"Generate a 5-page teaching resource showing entrepreneurs how to use design thinking methodology to solve business problems and create user-centered products."},{label:" Strategic Positioning for Small Brands",text:"Write an MBA-level breakdown of how to position a brand within competitive markets using differentiation, value perception, and storytelling."},{label:" The Art of Thought Leadership",text:"Create a guide for experts on how to transform knowledge into influence by publishing insights, frameworks, and educational content that attract authority."},{label:" The Systems of Scale",text:"Write a detailed 5-page framework teaching small teams how to transition from chaos to structure using documented workflows, automation, and SOPs."},{label:" Pricing Psychology & Value Perception",text:"Develop a lead magnet explaining how anchoring, decoy pricing, and perceived value shape buyer decisions  with real-world examples and ethical applications."},{label:" The Future of AI in Creative Work",text:"Write an educational report exploring how AI tools are transforming creative industries, ethics, and productivity  with actionable guidance for adaptation."},{label:" Web Design Principles That Convert",text:"Generate a professional-level guide that breaks down visual hierarchy, white space, and conversion-driven design for modern web experiences."},{label:" The Strategic Content Framework",text:"Write a 5-page plan teaching creators how to map content pillars, storytelling arcs, and audience journeys for consistent long-term growth."},{label:" The History of Branding  and What It Teaches Modern Creators",text:"Develop a mini-course-style lead magnet that compares legacy branding (Coca-Cola, Nike, Apple) with modern personal branding on social platforms."},{label:" Ethics & Authenticity in Digital Marketing",text:"Write a reflective guide on maintaining authenticity, transparency, and trust in a world of automation, influencer deals, and AI content."},{label:" Business Models for the Digital Age",text:"Create a 5-page breakdown of proven online business models  subscription, affiliate, info-products, SaaS  including their pros, cons, and margins."},{label:" The Creators Intellectual Property Handbook",text:"Write a guide explaining copyright, licensing, and how creators can protect their work legally when distributing digital products and media."},{label:" Storytelling Frameworks That Sell",text:"Generate a 5-page educational guide unpacking narrative structures like the Heros Journey, PAS, and StoryBrand for use in sales pages and videos."},{label:" The Analytics of Growth",text:"Teach business owners how to interpret engagement metrics, user cohorts, and conversion funnels like a data scientist to make smarter creative decisions."},{label:" Building Community-Driven Brands",text:"Write a 5-page resource on fostering belonging, trust, and shared identity around a brand or product using modern community platforms."},{label:" The Architecture of Influence",text:"Develop a high-level guide mapping how influence spreads through networks, social proof, and credibility  with tactics for ethical persuasion."},{label:" The Modern Creative MBA",text:"Write a 5-page masterclass that condenses key principles of marketing, finance, operations, and leadership for modern digital creators running personal brands."}]},themes=[{label:"Modern Minimal",value:"modern",textColor:"#ffffff",bg:"#fefefe"},{label:"Classic Elegant",value:"classic",textColor:"#ffffff",bg:"#000000"},{label:"Bold Creative",value:"bold",textColor:"#fff",bg:"#0f0f0f"}],themeStyles=[],colorThemes=[{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"dark",label:"Dark",preview:"#030712"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"lime",label:"Lime",preview:"#65a30d"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"steel",label:"Steel",preview:"#475569"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"mocha",label:"Mocha",preview:"#78350f"},{name:"slate",label:"Slate",preview:"#334155"},{name:"sapphire",label:"Sapphire",preview:"#0ea5e9"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"}],fontThemes={modern:{name:"Montserrat",file:"/fonts/Montserrat-Regular.ttf"},classic:{name:"AdobeArabic",file:"/fonts/AdobeArabic-Regular.ttf"},bold:{name:"Bebas Neue",file:"/fonts/Roboto-Regular.ttf"}},Nav=()=>{const{user:it,logout:g}=useAuth(),et=useNavigate(),[ot,ut]=reactExports.useState(!1),ct=useLocation();if(reactExports.useEffect(()=>{ot?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[ot]),["/dashboard","/books","/settings","/prompts","/notifications","/canvas-editor"].includes(ct.pathname))return null;const dt=navLinks.filter(ft=>!(ft.label==="Home"&&ct.pathname==="/home"||ft.label==="Contact Us"&&ct.pathname==="/contact"));return jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:ft=>ft.stopPropagation(),className:"flex items-center justify-between px-4 h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Link$1,{to:"/",preventScrollReset:!0,children:jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:4.5,delay:2}})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block relative",onMouseEnter:()=>ut(!0),onMouseLeave:()=>ut(!1),children:[jsxRuntimeExports.jsx("button",{type:"button",className:`p-3 bg-muteGrey hover:bg-gray-800 text-white shadow-md transition
      ${ot?"rounded-t-lg":"rounded-lg"}`,children:jsxRuntimeExports.jsx(Cog,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`absolute right-0 top-full flex flex-col items-center gap-2 
                 bg-muteGrey  shadow-xl
                py-2 px-1 mt-[-2px] z-50
                transition-all duration-150 ease-out rounded-b-lg 
                ${ot?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/home"),className:"p-2 hover:bg-gray-800/60  transition",title:"Home",children:jsxRuntimeExports.jsx(House,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),it?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/dashboard"),className:"p-2 hover:bg-gray-800/60  transition",title:"Dashboard",children:jsxRuntimeExports.jsx(LayoutDashboard,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Help",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g(),className:"p-2 hover:bg-gray-800/60  transition",title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/sign-up"),className:"p-2 hover:bg-gray-800/60  transition",title:"Sign Up",children:jsxRuntimeExports.jsx(Crown,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/shop"),className:"p-2 hover:bg-gray-800/60  transition",title:"Shop",children:jsxRuntimeExports.jsx(Store,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/login"),className:"p-2 hover:bg-gray-800/60  transition",title:"Login",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Contact",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>ut(!ot),className:"text-white focus:outline-none z-50 relative",children:ot?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze,{show:ot&&window.innerWidth<768,enter:"transition duration-300 ease-out",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition duration-200 ease-in",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:ft=>jsxRuntimeExports.jsxs("div",{ref:ft,className:"md:hidden fixed top-0 left-0 w-full h-screen bg-bioModal z-40 flex flex-col items-center pt-24 space-y-4 lead-text",children:[dt.map(St=>St.label==="Home"&&ct.pathname==="/home"||it&&(St.label==="Sign Up"||St.label==="Contact Us"||St.label==="Shop")?null:St.label==="Login"&&it?jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",onClick:()=>ut(!1),className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Dashboard"},"user-dashboard"):jsxRuntimeExports.jsx("a",{href:St.href,onClick:kt=>handleNavClick(kt,St.href),className:"font-montserrat text-md text-white-400 hover:text-white transition-all cursor-pointer",children:St.label},St.label)),it&&jsxRuntimeExports.jsx("button",{onClick:()=>{g(),ut(!1)},className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Logout"})]})})]})};function OutOfSlotsModal({open:it,onClose:g,onRefresh:et,isFirstTime:ot=!1}){if(!it)return null;const ut=ot?"Welcome to Cre8tly Studio":"Out of Lead Magnet Slots",ct=ot?`Welcome to Cre8tly Studio, your creative command center for building
       high-converting lead magnets in minutes. 
       To start creating, visit Cre8tlyStudio.com in your browser and
       purchase your first token pack. 
       Once purchased, click below to refresh your account and begin.`:`Youve reached your current plans limit.
       To purchase more tokens or lifetime unlocks, visit Cre8tlyStudio.com
       in your browser and log in with the same account.
       Once purchased, click below to refresh your slots instantly.`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:ut}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:ct}),jsxRuntimeExports.jsx("button",{onClick:async()=>{et&&await et(),g&&g()},className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:ot?"Ive Purchased My First Pack":"Ive Purchased Tokens"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"block mx-auto mt-4 text-sm text-gray-400 hover:text-white transition",children:"Cancel"})]})]})})}const PricingSection=()=>{const{user:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=()=>{window.location.href="/sign-up"};return jsxRuntimeExports.jsxs("section",{id:"pricing",className:"px-6 py-24 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-10 design-text",children:"Simple Pricing"}),jsxRuntimeExports.jsxs(motion.div,{className:"relative rounded-2xl max-w-md mx-auto overflow-hidden",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 p-[2px] rounded-2xl 
              bg-[linear-gradient(90deg,#00ff99,#7bed9f,#00ff99)] 
              bg-[length:200%_200%] 
              animate-gradientPulse`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-2xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-10 border border-transparent rounded-2xl shadow-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-blue to-purple-500 bg-clip-text text-white design-text",children:"$47"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 type-text",children:"One-time payment for 5 lead magnet slots"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-full bg-royalPurple 
                text-white text-xl font-semibold py-4 rounded-xl 
                hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)]
                transition shadow-lg design-text`,children:"Sign Up"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-silver mt-3",children:" Secure checkout"})]}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:g,onClose:()=>et(!1),isFirstTime:!it||!it.slot_count||it.slot_count===0})]})},steps=[{icon:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-4,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},children:jsxRuntimeExports.jsx(SquareTerminal,{className:"w-10 h-10 text-white drop-shadow-[0_0_6px_rgba(255,255,255,0.5)]"})}),title:"1. Add Your Prompt",desc:"Describe your audience, product, or idea in one line, our AI expands it into full content instantly."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2.8,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Bot,{className:"w-10 h-10 text-white drop-shadow-[0_0_8px_rgba(103,15,231,0.6)]"})}),title:"2. AI Creates Your Digital Product",desc:"We generate up to 50 full A4 pages with examples, insights, and structure, styled with professional themes."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Download,{className:"w-10 h-10 text-green drop-shadow-[0_0_8px_rgba(123,237,159,0.6)]"})}),title:"3. Download & Launch",desc:"Receive a polished PDF ready to use instantly, perfect for selling, sharing, or capturing new leads."}];function HowItWorks(){return jsxRuntimeExports.jsxs("section",{id:"how",className:"px-6 py-24 text-center bg-metalBlack relative overflow-hidden rounded-2xl",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-br from-[#0b0f1a] via-[#111827] to-[#0b0f1a] opacity-40",animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{repeat:1/0,duration:20,ease:"linear"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-16 text-white font-semibold design-text",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid gap-10 sm:grid-cols-3",children:steps.map((it,g)=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},className:"relative rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl p-[2px] 
                bg-[linear-gradient(270deg,#7bed9f,#670fe7,#7bed9f)] 
                bg-[length:300%_300%] animate-shine`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-800 mb-6 mx-auto shadow-[0_0_20px_rgba(100,255,200,0.25)]",children:it.icon}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-white lead-text",children:it.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed lead-text",children:it.desc})]})]},g))}),jsxRuntimeExports.jsx(PricingSection,{})]})]})}function VideoPlayer(){const it=reactExports.useRef(null),[g,et]=reactExports.useState(!0),[ot,ut]=reactExports.useState(!1),ct=()=>et(St=>!St),dt=async()=>{const St=it.current;if(St)if(St.requestFullscreen){await St.requestFullscreen(),ut(!0);try{await screen.orientation.lock("landscape")}catch{}}else St.webkitEnterFullscreen&&(St.webkitEnterFullscreen(),ut(!0))},ft=()=>{const St=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ut(!!St)};return typeof window<"u"&&(document.onfullscreenchange=ft,document.onwebkitfullscreenchange=ft),jsxRuntimeExports.jsxs("section",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800 mt-10",children:[jsxRuntimeExports.jsxs("video",{ref:it,className:"w-full h-full object-cover rounded-2xl",autoPlay:!0,loop:!0,playsInline:!0,muted:g,preload:"metadata",poster:"/assets/video-thumbnail.jpg",children:[jsxRuntimeExports.jsx("source",{src:"https://cre8tlystudio.nyc3.cdn.digitaloceanspaces.com/Videos/new_cre8tly_video_v2.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:ct,className:"bg-black/60 text-white px-4 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:g?" Unmute":" Mute"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black/60 text-white px-3 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:ot?" Exit":" Fullscreen"})]})]})}function PremiumEbooksCTA(){return jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"relative mt-28 mb-20 rounded-2xl overflow-hidden bg-metalBlack p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 blur-3xl opacity-40"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-10 text-center lg:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl sm:text-5xl font-extrabold mb-6 bg-white bg-clip-text text-transparent design-text leading-[1.25] pb-1",children:"Ready to Go Deeper?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:["Unlock our full library of"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"premium guides"})," ","designed to help entrepreneurs, marketers, and creators dominate their niche. Each guide is downloadable instantly."]}),jsxRuntimeExports.jsx("a",{href:"/shop",className:"inline-block px-8 py-4 bg-royalPurple text-white text-xl font-semibold rounded-lg shadow-lg hover:opacity-90 transition-all duration-300 transform hover:scale-[1.03] design-text",children:" Browse Premium Guides"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full lg:w-auto",children:jsxRuntimeExports.jsx("img",{src:ebookCover,alt:"Ebook Collection Preview",className:"rounded-xl w-80 sm:w-96 border border-white/10 "})})]})]})}function AnimatedLogo(){return jsxRuntimeExports.jsx(motion.img,{src:headerLogo,alt:"Logo",className:"w-32 h-32 relative z-10",initial:{scale:.98,filter:"drop-shadow(0 0 0px rgba(0,255,204,0))"},animate:{scale:[1,1.05,1],filter:["drop-shadow(0 0 0px rgba(0,255,204,0))","drop-shadow(0 0 12px rgba(24, 0, 156, 1))","drop-shadow(0 0 0px rgba(0,255,204,0))"]},transition:{duration:5,ease:"easeInOut",repeat:1/0},whileHover:{scale:1.1,filter:"drop-shadow(0 0 16px rgba(0,255,204,1))",transition:{type:"spring",stiffness:150}}})}const Landing=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full text-white flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-32 relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedLogo,{}),jsxRuntimeExports.jsxs("h1",{className:"relative inline-block text-white text-3xl sm:text-6xl lg:text-8xl font-extrabold design-text ",children:["Cre8tly Studio",jsxRuntimeExports.jsx("span",{className:"absolute -top-2 sm:-top-1 -right-8 sm:-right-10 text-green text-2xl sm:text-3xl font-bold lead-text",children:"AI"})]}),jsxRuntimeExports.jsx(motion.h2,{className:"text-5xl sm:text-7xl font-extrabold leading-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:"Create High-Converting Lead Magnets in Seconds"}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-6 text-xl sm:text-2xl text-gray-300 max-w-2xl lead-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["The fastest way to turn your idea into a",jsxRuntimeExports.jsx("br",{})," sellable digital product."]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-8 text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto font-light leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Cre8tly Studio is an ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"AI-powered  digital product builder"})," that helps ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"creators, coaches, and entrepreneurs"})," design professional digital products, eBooks, and brand assets in seconds. Boost conversions, grow your email list, and sell faster with ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"automated content creation"}),", pro-level cover design, and ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"instant PDF generation"})," all in one platform built for modern online businesses."]}),jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl mt-12 rounded-2xl overflow-hidden",children:jsxRuntimeExports.jsx(VideoPlayer,{})})]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-16 mb-10 text-3xl sm:text-4xl text-center font-semibold leading-snug text-green tracking-tight max-w-4xl mx-auto design-text",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:["Creators dont dream about success",jsxRuntimeExports.jsx("br",{})," they generate it"]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 60",className:"w-56 sm:w-72 mx-auto mt-2 mb-20",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"underline-gradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("path",{d:"M10 25 Q200 -10 390 25",stroke:"url(#underline-gradient)",strokeWidth:"5",fill:"transparent",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(PremiumEbooksCTA,{})]});function LoginPage(){const{login:it}=useAuth(),g=useNavigate(),[et,ot]=reactExports.useState({email:"",password:""}),[ut,ct]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(!1),jt=Bt=>{ot({...et,[Bt.target.name]:Bt.target.value})},Ft=async Bt=>{var Ht,Yt;Bt.preventDefault(),ct(!0),kt("");try{await it(et.email,et.password),g("/dashboard")}catch(zt){(Yt=(Ht=zt.response)==null?void 0:Ht.data)!=null&&Yt.message?kt(zt.response.data.message):kt("Login failed. Please try again later.")}finally{ct(!1)}};return reactExports.useEffect(()=>{if(St){Rt(!1);const Bt=setTimeout(()=>Rt(!0),4e3),Ht=setTimeout(()=>kt(""),5e3);return()=>{clearTimeout(Bt),clearTimeout(Ht)}}},[St]),jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Log in to your account to continue creating and managing your digital products."}),St&&jsxRuntimeExports.jsx("div",{className:`bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Tt?"opacity-0":"opacity-100"}`,children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:jt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:et.password,onChange:jt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ut,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ut?"Logging In...":"Log In"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"text-green hover:underline",children:"Forgot Password?"})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Dont have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/sign-up",className:"text-green hover:underline",children:"Sign Up"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(it,g){return it===g||it!==it&&g!==g}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(it,g){for(var et=it.length;et--;)if(eq$1(it[et][0],g))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(it){var g=this.__data__,et=assocIndexOf$3(g,it);if(et<0)return!1;var ot=g.length-1;return et==ot?g.pop():splice.call(g,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(it){var g=this.__data__,et=assocIndexOf$2(g,it);return et<0?void 0:g[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(it){return assocIndexOf$1(this.__data__,it)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(it,g){var et=this.__data__,ot=assocIndexOf(et,it);return ot<0?(++this.size,et.push([it,g])):et[ot][1]=g,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(it){var g=this.__data__,et=g.delete(it);return this.size=g.size,et}var _stackDelete=stackDelete$1;function stackGet$1(it){return this.__data__.get(it)}var _stackGet=stackGet$1;function stackHas$1(it){return this.__data__.has(it)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(it){var g=hasOwnProperty$8.call(it,symToStringTag$1),et=it[symToStringTag$1];try{it[symToStringTag$1]=void 0;var ot=!0}catch{}var ut=nativeObjectToString$1.call(it);return ot&&(g?it[symToStringTag$1]=et:delete it[symToStringTag$1]),ut}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(it){return nativeObjectToString.call(it)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(it){return it==null?it===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(it)?getRawTag(it):objectToString(it)}var _baseGetTag=baseGetTag$4;function isObject$2(it){var g=typeof it;return it!=null&&(g=="object"||g=="function")}var isObject_1=isObject$2,baseGetTag$3=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(it){if(!isObject$1(it))return!1;var g=baseGetTag$3(it);return g==funcTag$1||g==genTag||g==asyncTag||g==proxyTag}var isFunction_1=isFunction$3,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var it=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function isMasked$1(it){return!!maskSrcKey&&maskSrcKey in it}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(it){if(it!=null){try{return funcToString$1.call(it)}catch{}try{return it+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(it){if(!isObject(it)||isMasked(it))return!1;var g=isFunction$2(it)?reIsNative:reIsHostCtor;return g.test(toSource$1(it))}var _baseIsNative=baseIsNative$1;function getValue$1(it,g){return it==null?void 0:it[g]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(it,g){var et=getValue(it,g);return baseIsNative(et)?et:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(it){var g=this.has(it)&&delete this.__data__[it];return this.size-=g?1:0,g}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(it){var g=this.__data__;if(nativeCreate$2){var et=g[it];return et===HASH_UNDEFINED$2?void 0:et}return hasOwnProperty$6.call(g,it)?g[it]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(it){var g=this.__data__;return nativeCreate$1?g[it]!==void 0:hasOwnProperty$5.call(g,it)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(it,g){var et=this.__data__;return this.size+=this.has(it)?0:1,et[it]=nativeCreate&&g===void 0?HASH_UNDEFINED$1:g,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(it){var g=typeof it;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?it!=="__proto__":it===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(it,g){var et=it.__data__;return isKeyable(g)?et[typeof g=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(it){var g=getMapData$3(this,it).delete(it);return this.size-=g?1:0,g}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(it){return getMapData$2(this,it).get(it)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(it){return getMapData$1(this,it).has(it)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(it,g){var et=getMapData(this,it),ot=et.size;return et.set(it,g),this.size+=et.size==ot?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(it,g){var et=this.__data__;if(et instanceof ListCache$1){var ot=et.__data__;if(!Map$2||ot.length<LARGE_ARRAY_SIZE-1)return ot.push([it,g]),this.size=++et.size,this;et=this.__data__=new MapCache$1(ot)}return et.set(it,g),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(it){var g=this.__data__=new ListCache(it);this.size=g.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(it){return this.__data__.set(it,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(it){return this.__data__.has(it)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(it){var g=-1,et=it==null?0:it.length;for(this.__data__=new MapCache;++g<et;)this.add(it[g])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(it,g){for(var et=-1,ot=it==null?0:it.length;++et<ot;)if(g(it[et],et,it))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(it,g){return it.has(g)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(it,g,et,ot,ut,ct){var dt=et&COMPARE_PARTIAL_FLAG$3,ft=it.length,St=g.length;if(ft!=St&&!(dt&&St>ft))return!1;var kt=ct.get(it),Tt=ct.get(g);if(kt&&Tt)return kt==g&&Tt==it;var Rt=-1,jt=!0,Ft=et&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ct.set(it,g),ct.set(g,it);++Rt<ft;){var Bt=it[Rt],Ht=g[Rt];if(ot)var Yt=dt?ot(Ht,Bt,Rt,g,it,ct):ot(Bt,Ht,Rt,it,g,ct);if(Yt!==void 0){if(Yt)continue;jt=!1;break}if(Ft){if(!arraySome(g,function(zt,Kt){if(!cacheHas(Ft,Kt)&&(Bt===zt||ut(Bt,zt,et,ot,ct)))return Ft.push(Kt)})){jt=!1;break}}else if(!(Bt===Ht||ut(Bt,Ht,et,ot,ct))){jt=!1;break}}return ct.delete(it),ct.delete(g),jt}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot,ut){et[++g]=[ut,ot]}),et}var _mapToArray=mapToArray$1;function setToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot){et[++g]=ot}),et}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(it,g,et,ot,ut,ct,dt){switch(et){case dataViewTag$2:if(it.byteLength!=g.byteLength||it.byteOffset!=g.byteOffset)return!1;it=it.buffer,g=g.buffer;case arrayBufferTag$1:return!(it.byteLength!=g.byteLength||!ct(new Uint8Array$1(it),new Uint8Array$1(g)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+it,+g);case errorTag$1:return it.name==g.name&&it.message==g.message;case regexpTag$1:case stringTag$1:return it==g+"";case mapTag$2:var ft=mapToArray;case setTag$2:var St=ot&COMPARE_PARTIAL_FLAG$2;if(ft||(ft=setToArray),it.size!=g.size&&!St)return!1;var kt=dt.get(it);if(kt)return kt==g;ot|=COMPARE_UNORDERED_FLAG,dt.set(it,g);var Tt=equalArrays$1(ft(it),ft(g),ot,ut,ct,dt);return dt.delete(it),Tt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(it)==symbolValueOf.call(g)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(it,g){for(var et=-1,ot=g.length,ut=it.length;++et<ot;)it[ut+et]=g[et];return it}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(it,g,et){var ot=g(it);return isArray$2(it)?ot:arrayPush(ot,et(it))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(it,g){for(var et=-1,ot=it==null?0:it.length,ut=0,ct=[];++et<ot;){var dt=it[et];g(dt,et,it)&&(ct[ut++]=dt)}return ct}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(it){return it==null?[]:(it=Object(it),arrayFilter(nativeGetSymbols(it),function(g){return propertyIsEnumerable$1.call(it,g)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(it,g){for(var et=-1,ot=Array(it);++et<it;)ot[et]=g(et);return ot}var _baseTimes=baseTimes$1;function isObjectLike$4(it){return it!=null&&typeof it=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(it){return isObjectLike$3(it)&&baseGetTag$2(it)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(it){return isObjectLike$2(it)&&hasOwnProperty$4.call(it,"callee")&&!propertyIsEnumerable.call(it,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(it,g){var et=_root,ot=stubFalse_1,ut=g&&!g.nodeType&&g,ct=ut&&!0&&it&&!it.nodeType&&it,dt=ct&&ct.exports===ut,ft=dt?et.Buffer:void 0,St=ft?ft.isBuffer:void 0,kt=St||ot;it.exports=kt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(it,g){var et=typeof it;return g=g??MAX_SAFE_INTEGER$2,!!g&&(et=="number"||et!="symbol"&&reIsUint.test(it))&&it>-1&&it%1==0&&it<g}var _isIndex=isIndex$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(it){return isObjectLike$1(it)&&isLength$1(it.length)&&!!typedArrayTags[baseGetTag$1(it)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(it){return function(g){return it(g)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(it,g){var et=_freeGlobal,ot=g&&!g.nodeType&&g,ut=ot&&!0&&it&&!it.nodeType&&it,ct=ut&&ut.exports===ot,dt=ct&&et.process,ft=function(){try{var St=ut&&ut.require&&ut.require("util").types;return St||dt&&dt.binding&&dt.binding("util")}catch{}}();it.exports=ft})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(it,g){var et=isArray$1(it),ot=!et&&isArguments(it),ut=!et&&!ot&&isBuffer$1(it),ct=!et&&!ot&&!ut&&isTypedArray$1(it),dt=et||ot||ut||ct,ft=dt?baseTimes(it.length,String):[],St=ft.length;for(var kt in it)(g||hasOwnProperty$3.call(it,kt))&&!(dt&&(kt=="length"||ut&&(kt=="offset"||kt=="parent")||ct&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||isIndex(kt,St)))&&ft.push(kt);return ft}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(it){var g=it&&it.constructor,et=typeof g=="function"&&g.prototype||objectProto$3;return it===et}var _isPrototype=isPrototype$1;function overArg$1(it,g){return function(et){return it(g(et))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(it){if(!isPrototype(it))return nativeKeys(it);var g=[];for(var et in Object(it))hasOwnProperty$2.call(it,et)&&et!="constructor"&&g.push(et);return g}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength=isLength_1;function isArrayLike$1(it){return it!=null&&isLength(it.length)&&!isFunction$1(it)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$2(it){return isArrayLike(it)?arrayLikeKeys(it):baseKeys(it)}var keys_1=keys$2,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(it){return baseGetAllKeys(it,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(it,g,et,ot,ut,ct){var dt=et&COMPARE_PARTIAL_FLAG$1,ft=getAllKeys(it),St=ft.length,kt=getAllKeys(g),Tt=kt.length;if(St!=Tt&&!dt)return!1;for(var Rt=St;Rt--;){var jt=ft[Rt];if(!(dt?jt in g:hasOwnProperty$1.call(g,jt)))return!1}var Ft=ct.get(it),Bt=ct.get(g);if(Ft&&Bt)return Ft==g&&Bt==it;var Ht=!0;ct.set(it,g),ct.set(g,it);for(var Yt=dt;++Rt<St;){jt=ft[Rt];var zt=it[jt],Kt=g[jt];if(ot)var en=dt?ot(Kt,zt,jt,g,it,ct):ot(zt,Kt,jt,it,g,ct);if(!(en===void 0?zt===Kt||ut(zt,Kt,et,ot,ct):en)){Ht=!1;break}Yt||(Yt=jt=="constructor")}if(Ht&&!Yt){var tn=it.constructor,on=g.constructor;tn!=on&&"constructor"in it&&"constructor"in g&&!(typeof tn=="function"&&tn instanceof tn&&typeof on=="function"&&on instanceof on)&&(Ht=!1)}return ct.delete(it),ct.delete(g),Ht}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(it){var g=baseGetTag(it),et=g==objectTag$1?it.constructor:void 0,ot=et?toSource(et):"";if(ot)switch(ot){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return g});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(it,g,et,ot,ut,ct){var dt=isArray(it),ft=isArray(g),St=dt?arrayTag:getTag(it),kt=ft?arrayTag:getTag(g);St=St==argsTag?objectTag:St,kt=kt==argsTag?objectTag:kt;var Tt=St==objectTag,Rt=kt==objectTag,jt=St==kt;if(jt&&isBuffer(it)){if(!isBuffer(g))return!1;dt=!0,Tt=!1}if(jt&&!Tt)return ct||(ct=new Stack),dt||isTypedArray(it)?equalArrays(it,g,et,ot,ut,ct):equalByTag(it,g,St,et,ot,ut,ct);if(!(et&COMPARE_PARTIAL_FLAG)){var Ft=Tt&&hasOwnProperty.call(it,"__wrapped__"),Bt=Rt&&hasOwnProperty.call(g,"__wrapped__");if(Ft||Bt){var Ht=Ft?it.value():it,Yt=Bt?g.value():g;return ct||(ct=new Stack),ut(Ht,Yt,et,ot,ct)}}return jt?(ct||(ct=new Stack),equalObjects(it,g,et,ot,ut,ct)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(it,g,et,ot,ut){return it===g?!0:it==null||g==null||!isObjectLike(it)&&!isObjectLike(g)?it!==it&&g!==g:baseIsEqualDeep(it,g,et,ot,baseIsEqual$1,ut)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(it,g){return baseIsEqual(it,g)}var isEqual_1$1=isEqual,quill={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(it,g){(function(ot,ut){it.exports=ut()})(typeof self<"u"?self:commonjsGlobal,function(){return function(et){var ot={};function ut(ct){if(ot[ct])return ot[ct].exports;var dt=ot[ct]={i:ct,l:!1,exports:{}};return et[ct].call(dt.exports,dt,dt.exports,ut),dt.l=!0,dt.exports}return ut.m=et,ut.c=ot,ut.d=function(ct,dt,ft){ut.o(ct,dt)||Object.defineProperty(ct,dt,{configurable:!1,enumerable:!0,get:ft})},ut.n=function(ct){var dt=ct&&ct.__esModule?function(){return ct.default}:function(){return ct};return ut.d(dt,"a",dt),dt},ut.o=function(ct,dt){return Object.prototype.hasOwnProperty.call(ct,dt)},ut.p="",ut(ut.s=109)}([function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(17),dt=ut(18),ft=ut(19),St=ut(45),kt=ut(46),Tt=ut(47),Rt=ut(48),jt=ut(49),Ft=ut(12),Bt=ut(32),Ht=ut(33),Yt=ut(31),zt=ut(1),Kt={Scope:zt.Scope,create:zt.create,find:zt.find,query:zt.query,register:zt.register,Container:ct.default,Format:dt.default,Leaf:ft.default,Embed:Rt.default,Scroll:St.default,Block:Tt.default,Inline:kt.default,Text:jt.default,Attributor:{Attribute:Ft.default,Class:Bt.default,Style:Ht.default,Store:Yt.default}};ot.default=Kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(zt,Kt){zt.__proto__=Kt}||function(zt,Kt){for(var en in Kt)Kt.hasOwnProperty(en)&&(zt[en]=Kt[en])};return function(zt,Kt){Yt(zt,Kt);function en(){this.constructor=zt}zt.prototype=Kt===null?Object.create(Kt):(en.prototype=Kt.prototype,new en)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=function(Yt){ct(zt,Yt);function zt(Kt){var en=this;return Kt="[Parchment] "+Kt,en=Yt.call(this,Kt)||this,en.message=Kt,en.name=en.constructor.name,en}return zt}(Error);ot.ParchmentError=dt;var ft={},St={},kt={},Tt={};ot.DATA_KEY="__blot";var Rt;(function(Yt){Yt[Yt.TYPE=3]="TYPE",Yt[Yt.LEVEL=12]="LEVEL",Yt[Yt.ATTRIBUTE=13]="ATTRIBUTE",Yt[Yt.BLOT=14]="BLOT",Yt[Yt.INLINE=7]="INLINE",Yt[Yt.BLOCK=11]="BLOCK",Yt[Yt.BLOCK_BLOT=10]="BLOCK_BLOT",Yt[Yt.INLINE_BLOT=6]="INLINE_BLOT",Yt[Yt.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Yt[Yt.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Yt[Yt.ANY=15]="ANY"})(Rt=ot.Scope||(ot.Scope={}));function jt(Yt,zt){var Kt=Bt(Yt);if(Kt==null)throw new dt("Unable to create "+Yt+" blot");var en=Kt,tn=Yt instanceof Node||Yt.nodeType===Node.TEXT_NODE?Yt:en.create(zt);return new en(tn,zt)}ot.create=jt;function Ft(Yt,zt){return zt===void 0&&(zt=!1),Yt==null?null:Yt[ot.DATA_KEY]!=null?Yt[ot.DATA_KEY].blot:zt?Ft(Yt.parentNode,zt):null}ot.find=Ft;function Bt(Yt,zt){zt===void 0&&(zt=Rt.ANY);var Kt;if(typeof Yt=="string")Kt=Tt[Yt]||ft[Yt];else if(Yt instanceof Text||Yt.nodeType===Node.TEXT_NODE)Kt=Tt.text;else if(typeof Yt=="number")Yt&Rt.LEVEL&Rt.BLOCK?Kt=Tt.block:Yt&Rt.LEVEL&Rt.INLINE&&(Kt=Tt.inline);else if(Yt instanceof HTMLElement){var en=(Yt.getAttribute("class")||"").split(/\s+/);for(var tn in en)if(Kt=St[en[tn]],Kt)break;Kt=Kt||kt[Yt.tagName]}return Kt==null?null:zt&Rt.LEVEL&Kt.scope&&zt&Rt.TYPE&Kt.scope?Kt:null}ot.query=Bt;function Ht(){for(var Yt=[],zt=0;zt<arguments.length;zt++)Yt[zt]=arguments[zt];if(Yt.length>1)return Yt.map(function(tn){return Ht(tn)});var Kt=Yt[0];if(typeof Kt.blotName!="string"&&typeof Kt.attrName!="string")throw new dt("Invalid definition");if(Kt.blotName==="abstract")throw new dt("Cannot register abstract class");if(Tt[Kt.blotName||Kt.attrName]=Kt,typeof Kt.keyName=="string")ft[Kt.keyName]=Kt;else if(Kt.className!=null&&(St[Kt.className]=Kt),Kt.tagName!=null){Array.isArray(Kt.tagName)?Kt.tagName=Kt.tagName.map(function(tn){return tn.toUpperCase()}):Kt.tagName=Kt.tagName.toUpperCase();var en=Array.isArray(Kt.tagName)?Kt.tagName:[Kt.tagName];en.forEach(function(tn){(kt[tn]==null||Kt.className==null)&&(kt[tn]=Kt)})}return Kt}ot.register=Ht},function(et,ot,ut){var ct=ut(51),dt=ut(11),ft=ut(3),St=ut(20),kt=String.fromCharCode(0),Tt=function(Rt){Array.isArray(Rt)?this.ops=Rt:Rt!=null&&Array.isArray(Rt.ops)?this.ops=Rt.ops:this.ops=[]};Tt.prototype.insert=function(Rt,jt){var Ft={};return Rt.length===0?this:(Ft.insert=Rt,jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&(Ft.attributes=jt),this.push(Ft))},Tt.prototype.delete=function(Rt){return Rt<=0?this:this.push({delete:Rt})},Tt.prototype.retain=function(Rt,jt){if(Rt<=0)return this;var Ft={retain:Rt};return jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&(Ft.attributes=jt),this.push(Ft)},Tt.prototype.push=function(Rt){var jt=this.ops.length,Ft=this.ops[jt-1];if(Rt=ft(!0,{},Rt),typeof Ft=="object"){if(typeof Rt.delete=="number"&&typeof Ft.delete=="number")return this.ops[jt-1]={delete:Ft.delete+Rt.delete},this;if(typeof Ft.delete=="number"&&Rt.insert!=null&&(jt-=1,Ft=this.ops[jt-1],typeof Ft!="object"))return this.ops.unshift(Rt),this;if(dt(Rt.attributes,Ft.attributes)){if(typeof Rt.insert=="string"&&typeof Ft.insert=="string")return this.ops[jt-1]={insert:Ft.insert+Rt.insert},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this;if(typeof Rt.retain=="number"&&typeof Ft.retain=="number")return this.ops[jt-1]={retain:Ft.retain+Rt.retain},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this}}return jt===this.ops.length?this.ops.push(Rt):this.ops.splice(jt,0,Rt),this},Tt.prototype.chop=function(){var Rt=this.ops[this.ops.length-1];return Rt&&Rt.retain&&!Rt.attributes&&this.ops.pop(),this},Tt.prototype.filter=function(Rt){return this.ops.filter(Rt)},Tt.prototype.forEach=function(Rt){this.ops.forEach(Rt)},Tt.prototype.map=function(Rt){return this.ops.map(Rt)},Tt.prototype.partition=function(Rt){var jt=[],Ft=[];return this.forEach(function(Bt){var Ht=Rt(Bt)?jt:Ft;Ht.push(Bt)}),[jt,Ft]},Tt.prototype.reduce=function(Rt,jt){return this.ops.reduce(Rt,jt)},Tt.prototype.changeLength=function(){return this.reduce(function(Rt,jt){return jt.insert?Rt+St.length(jt):jt.delete?Rt-jt.delete:Rt},0)},Tt.prototype.length=function(){return this.reduce(function(Rt,jt){return Rt+St.length(jt)},0)},Tt.prototype.slice=function(Rt,jt){Rt=Rt||0,typeof jt!="number"&&(jt=1/0);for(var Ft=[],Bt=St.iterator(this.ops),Ht=0;Ht<jt&&Bt.hasNext();){var Yt;Ht<Rt?Yt=Bt.next(Rt-Ht):(Yt=Bt.next(jt-Ht),Ft.push(Yt)),Ht+=St.length(Yt)}return new Tt(Ft)},Tt.prototype.compose=function(Rt){var jt=St.iterator(this.ops),Ft=St.iterator(Rt.ops),Bt=[],Ht=Ft.peek();if(Ht!=null&&typeof Ht.retain=="number"&&Ht.attributes==null){for(var Yt=Ht.retain;jt.peekType()==="insert"&&jt.peekLength()<=Yt;)Yt-=jt.peekLength(),Bt.push(jt.next());Ht.retain-Yt>0&&Ft.next(Ht.retain-Yt)}for(var zt=new Tt(Bt);jt.hasNext()||Ft.hasNext();)if(Ft.peekType()==="insert")zt.push(Ft.next());else if(jt.peekType()==="delete")zt.push(jt.next());else{var Kt=Math.min(jt.peekLength(),Ft.peekLength()),en=jt.next(Kt),tn=Ft.next(Kt);if(typeof tn.retain=="number"){var on={};typeof en.retain=="number"?on.retain=Kt:on.insert=en.insert;var an=St.attributes.compose(en.attributes,tn.attributes,typeof en.retain=="number");if(an&&(on.attributes=an),zt.push(on),!Ft.hasNext()&&dt(zt.ops[zt.ops.length-1],on)){var un=new Tt(jt.rest());return zt.concat(un).chop()}}else typeof tn.delete=="number"&&typeof en.retain=="number"&&zt.push(tn)}return zt.chop()},Tt.prototype.concat=function(Rt){var jt=new Tt(this.ops.slice());return Rt.ops.length>0&&(jt.push(Rt.ops[0]),jt.ops=jt.ops.concat(Rt.ops.slice(1))),jt},Tt.prototype.diff=function(Rt,jt){if(this.ops===Rt.ops)return new Tt;var Ft=[this,Rt].map(function(Kt){return Kt.map(function(en){if(en.insert!=null)return typeof en.insert=="string"?en.insert:kt;var tn=Kt===Rt?"on":"with";throw new Error("diff() called "+tn+" non-document")}).join("")}),Bt=new Tt,Ht=ct(Ft[0],Ft[1],jt),Yt=St.iterator(this.ops),zt=St.iterator(Rt.ops);return Ht.forEach(function(Kt){for(var en=Kt[1].length;en>0;){var tn=0;switch(Kt[0]){case ct.INSERT:tn=Math.min(zt.peekLength(),en),Bt.push(zt.next(tn));break;case ct.DELETE:tn=Math.min(en,Yt.peekLength()),Yt.next(tn),Bt.delete(tn);break;case ct.EQUAL:tn=Math.min(Yt.peekLength(),zt.peekLength(),en);var on=Yt.next(tn),an=zt.next(tn);dt(on.insert,an.insert)?Bt.retain(tn,St.attributes.diff(on.attributes,an.attributes)):Bt.push(an).delete(tn);break}en-=tn}}),Bt.chop()},Tt.prototype.eachLine=function(Rt,jt){jt=jt||`
`;for(var Ft=St.iterator(this.ops),Bt=new Tt,Ht=0;Ft.hasNext();){if(Ft.peekType()!=="insert")return;var Yt=Ft.peek(),zt=St.length(Yt)-Ft.peekLength(),Kt=typeof Yt.insert=="string"?Yt.insert.indexOf(jt,zt)-zt:-1;if(Kt<0)Bt.push(Ft.next());else if(Kt>0)Bt.push(Ft.next(Kt));else{if(Rt(Bt,Ft.next(1).attributes||{},Ht)===!1)return;Ht+=1,Bt=new Tt}}Bt.length()>0&&Rt(Bt,{},Ht)},Tt.prototype.transform=function(Rt,jt){if(jt=!!jt,typeof Rt=="number")return this.transformPosition(Rt,jt);for(var Ft=St.iterator(this.ops),Bt=St.iterator(Rt.ops),Ht=new Tt;Ft.hasNext()||Bt.hasNext();)if(Ft.peekType()==="insert"&&(jt||Bt.peekType()!=="insert"))Ht.retain(St.length(Ft.next()));else if(Bt.peekType()==="insert")Ht.push(Bt.next());else{var Yt=Math.min(Ft.peekLength(),Bt.peekLength()),zt=Ft.next(Yt),Kt=Bt.next(Yt);if(zt.delete)continue;Kt.delete?Ht.push(Kt):Ht.retain(Yt,St.attributes.transform(zt.attributes,Kt.attributes,jt))}return Ht.chop()},Tt.prototype.transformPosition=function(Rt,jt){jt=!!jt;for(var Ft=St.iterator(this.ops),Bt=0;Ft.hasNext()&&Bt<=Rt;){var Ht=Ft.peekLength(),Yt=Ft.peekType();if(Ft.next(),Yt==="delete"){Rt-=Math.min(Ht,Rt-Bt);continue}else Yt==="insert"&&(Bt<Rt||!jt)&&(Rt+=Ht);Bt+=Ht}return Rt},et.exports=Tt},function(et,ot){var ut=Object.prototype.hasOwnProperty,ct=Object.prototype.toString,dt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,St=function(Ft){return typeof Array.isArray=="function"?Array.isArray(Ft):ct.call(Ft)==="[object Array]"},kt=function(Ft){if(!Ft||ct.call(Ft)!=="[object Object]")return!1;var Bt=ut.call(Ft,"constructor"),Ht=Ft.constructor&&Ft.constructor.prototype&&ut.call(Ft.constructor.prototype,"isPrototypeOf");if(Ft.constructor&&!Bt&&!Ht)return!1;var Yt;for(Yt in Ft);return typeof Yt>"u"||ut.call(Ft,Yt)},Tt=function(Ft,Bt){dt&&Bt.name==="__proto__"?dt(Ft,Bt.name,{enumerable:!0,configurable:!0,value:Bt.newValue,writable:!0}):Ft[Bt.name]=Bt.newValue},Rt=function(Ft,Bt){if(Bt==="__proto__")if(ut.call(Ft,Bt)){if(ft)return ft(Ft,Bt).value}else return;return Ft[Bt]};et.exports=function jt(){var Ft,Bt,Ht,Yt,zt,Kt,en=arguments[0],tn=1,on=arguments.length,an=!1;for(typeof en=="boolean"&&(an=en,en=arguments[1]||{},tn=2),(en==null||typeof en!="object"&&typeof en!="function")&&(en={});tn<on;++tn)if(Ft=arguments[tn],Ft!=null)for(Bt in Ft)Ht=Rt(en,Bt),Yt=Rt(Ft,Bt),en!==Yt&&(an&&Yt&&(kt(Yt)||(zt=St(Yt)))?(zt?(zt=!1,Kt=Ht&&St(Ht)?Ht:[]):Kt=Ht&&kt(Ht)?Ht:{},Tt(en,{name:Bt,newValue:jt(an,Kt,Yt)})):typeof Yt<"u"&&Tt(en,{name:Bt,newValue:Yt}));return en}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BlockEmbed=ot.bubbleFormats=void 0;var ct=function(){function bn(En,kn){for(var Pn=0;Pn<kn.length;Pn++){var Ln=kn[Pn];Ln.enumerable=Ln.enumerable||!1,Ln.configurable=!0,"value"in Ln&&(Ln.writable=!0),Object.defineProperty(En,Ln.key,Ln)}}return function(En,kn,Pn){return kn&&bn(En.prototype,kn),Pn&&bn(En,Pn),En}}(),dt=function bn(En,kn,Pn){En===null&&(En=Function.prototype);var Ln=Object.getOwnPropertyDescriptor(En,kn);if(Ln===void 0){var gn=Object.getPrototypeOf(En);return gn===null?void 0:bn(gn,kn,Pn)}else{if("value"in Ln)return Ln.value;var Mn=Ln.get;return Mn===void 0?void 0:Mn.call(Pn)}},ft=ut(3),St=en(ft),kt=ut(2),Tt=en(kt),Rt=ut(0),jt=en(Rt),Ft=ut(16),Bt=en(Ft),Ht=ut(6),Yt=en(Ht),zt=ut(7),Kt=en(zt);function en(bn){return bn&&bn.__esModule?bn:{default:bn}}function tn(bn,En){if(!(bn instanceof En))throw new TypeError("Cannot call a class as a function")}function on(bn,En){if(!bn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return En&&(typeof En=="object"||typeof En=="function")?En:bn}function an(bn,En){if(typeof En!="function"&&En!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof En);bn.prototype=Object.create(En&&En.prototype,{constructor:{value:bn,enumerable:!1,writable:!0,configurable:!0}}),En&&(Object.setPrototypeOf?Object.setPrototypeOf(bn,En):bn.__proto__=En)}var un=1,dn=function(bn){an(En,bn);function En(){return tn(this,En),on(this,(En.__proto__||Object.getPrototypeOf(En)).apply(this,arguments))}return ct(En,[{key:"attach",value:function(){dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"attach",this).call(this),this.attributes=new jt.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new Tt.default().insert(this.value(),(0,St.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Pn,Ln){var gn=jt.default.query(Pn,jt.default.Scope.BLOCK_ATTRIBUTE);gn!=null&&this.attributes.attribute(gn,Ln)}},{key:"formatAt",value:function(Pn,Ln,gn,Mn){this.format(gn,Mn)}},{key:"insertAt",value:function(Pn,Ln,gn){if(typeof Ln=="string"&&Ln.endsWith(`
`)){var Mn=jt.default.create(Sn.blotName);this.parent.insertBefore(Mn,Pn===0?this:this.next),Mn.insertAt(0,Ln.slice(0,-1))}else dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"insertAt",this).call(this,Pn,Ln,gn)}}]),En}(jt.default.Embed);dn.scope=jt.default.Scope.BLOCK_BLOT;var Sn=function(bn){an(En,bn);function En(kn){tn(this,En);var Pn=on(this,(En.__proto__||Object.getPrototypeOf(En)).call(this,kn));return Pn.cache={},Pn}return ct(En,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(jt.default.Leaf).reduce(function(Pn,Ln){return Ln.length()===0?Pn:Pn.insert(Ln.value(),mn(Ln))},new Tt.default).insert(`
`,mn(this))),this.cache.delta}},{key:"deleteAt",value:function(Pn,Ln){dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"deleteAt",this).call(this,Pn,Ln),this.cache={}}},{key:"formatAt",value:function(Pn,Ln,gn,Mn){Ln<=0||(jt.default.query(gn,jt.default.Scope.BLOCK)?Pn+Ln===this.length()&&this.format(gn,Mn):dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"formatAt",this).call(this,Pn,Math.min(Ln,this.length()-Pn-1),gn,Mn),this.cache={})}},{key:"insertAt",value:function(Pn,Ln,gn){if(gn!=null)return dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"insertAt",this).call(this,Pn,Ln,gn);if(Ln.length!==0){var Mn=Ln.split(`
`),yn=Mn.shift();yn.length>0&&(Pn<this.length()-1||this.children.tail==null?dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"insertAt",this).call(this,Math.min(Pn,this.length()-1),yn):this.children.tail.insertAt(this.children.tail.length(),yn),this.cache={});var vn=this;Mn.reduce(function(On,Cn){return vn=vn.split(On,!0),vn.insertAt(0,Cn),Cn.length},Pn+yn.length)}}},{key:"insertBefore",value:function(Pn,Ln){var gn=this.children.head;dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"insertBefore",this).call(this,Pn,Ln),gn instanceof Bt.default&&gn.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"length",this).call(this)+un),this.cache.length}},{key:"moveChildren",value:function(Pn,Ln){dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"moveChildren",this).call(this,Pn,Ln),this.cache={}}},{key:"optimize",value:function(Pn){dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"optimize",this).call(this,Pn),this.cache={}}},{key:"path",value:function(Pn){return dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"path",this).call(this,Pn,!0)}},{key:"removeChild",value:function(Pn){dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"removeChild",this).call(this,Pn),this.cache={}}},{key:"split",value:function(Pn){var Ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ln&&(Pn===0||Pn>=this.length()-un)){var gn=this.clone();return Pn===0?(this.parent.insertBefore(gn,this),this):(this.parent.insertBefore(gn,this.next),gn)}else{var Mn=dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"split",this).call(this,Pn,Ln);return this.cache={},Mn}}}]),En}(jt.default.Block);Sn.blotName="block",Sn.tagName="P",Sn.defaultChild="break",Sn.allowedChildren=[Yt.default,jt.default.Embed,Kt.default];function mn(bn){var En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bn==null||(typeof bn.formats=="function"&&(En=(0,St.default)(En,bn.formats())),bn.parent==null||bn.parent.blotName=="scroll"||bn.parent.statics.scope!==bn.statics.scope)?En:mn(bn.parent,En)}ot.bubbleFormats=mn,ot.BlockEmbed=dn,ot.default=Sn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.overload=ot.expandConfig=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vn){return typeof vn}:function(vn){return vn&&typeof Symbol=="function"&&vn.constructor===Symbol&&vn!==Symbol.prototype?"symbol":typeof vn},dt=function(){function vn(On,Cn){var Vn=[],Qn=!0,ir=!1,ar=void 0;try{for(var rr=On[Symbol.iterator](),hr;!(Qn=(hr=rr.next()).done)&&(Vn.push(hr.value),!(Cn&&Vn.length===Cn));Qn=!0);}catch(_r){ir=!0,ar=_r}finally{try{!Qn&&rr.return&&rr.return()}finally{if(ir)throw ar}}return Vn}return function(On,Cn){if(Array.isArray(On))return On;if(Symbol.iterator in Object(On))return vn(On,Cn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function vn(On,Cn){for(var Vn=0;Vn<Cn.length;Vn++){var Qn=Cn[Vn];Qn.enumerable=Qn.enumerable||!1,Qn.configurable=!0,"value"in Qn&&(Qn.writable=!0),Object.defineProperty(On,Qn.key,Qn)}}return function(On,Cn,Vn){return Cn&&vn(On.prototype,Cn),Vn&&vn(On,Vn),On}}();ut(50);var St=ut(2),kt=mn(St),Tt=ut(14),Rt=mn(Tt),jt=ut(8),Ft=mn(jt),Bt=ut(9),Ht=mn(Bt),Yt=ut(0),zt=mn(Yt),Kt=ut(15),en=mn(Kt),tn=ut(3),on=mn(tn),an=ut(10),un=mn(an),dn=ut(34),Sn=mn(dn);function mn(vn){return vn&&vn.__esModule?vn:{default:vn}}function bn(vn,On,Cn){return On in vn?Object.defineProperty(vn,On,{value:Cn,enumerable:!0,configurable:!0,writable:!0}):vn[On]=Cn,vn}function En(vn,On){if(!(vn instanceof On))throw new TypeError("Cannot call a class as a function")}var kn=(0,un.default)("quill"),Pn=function(){ft(vn,null,[{key:"debug",value:function(Cn){Cn===!0&&(Cn="log"),un.default.level(Cn)}},{key:"find",value:function(Cn){return Cn.__quill||zt.default.find(Cn)}},{key:"import",value:function(Cn){return this.imports[Cn]==null&&kn.error("Cannot import "+Cn+". Are you sure it was registered?"),this.imports[Cn]}},{key:"register",value:function(Cn,Vn){var Qn=this,ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof Cn!="string"){var ar=Cn.attrName||Cn.blotName;typeof ar=="string"?this.register("formats/"+ar,Cn,Vn):Object.keys(Cn).forEach(function(rr){Qn.register(rr,Cn[rr],Vn)})}else this.imports[Cn]!=null&&!ir&&kn.warn("Overwriting "+Cn+" with",Vn),this.imports[Cn]=Vn,(Cn.startsWith("blots/")||Cn.startsWith("formats/"))&&Vn.blotName!=="abstract"?zt.default.register(Vn):Cn.startsWith("modules")&&typeof Vn.register=="function"&&Vn.register()}}]);function vn(On){var Cn=this,Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(En(this,vn),this.options=Ln(On,Vn),this.container=this.options.container,this.container==null)return kn.error("Invalid Quill container",On);this.options.debug&&vn.debug(this.options.debug);var Qn=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Ft.default,this.scroll=zt.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Rt.default(this.scroll),this.selection=new en.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Ft.default.events.EDITOR_CHANGE,function(ar){ar===Ft.default.events.TEXT_CHANGE&&Cn.root.classList.toggle("ql-blank",Cn.editor.isBlank())}),this.emitter.on(Ft.default.events.SCROLL_UPDATE,function(ar,rr){var hr=Cn.selection.lastRange,_r=hr&&hr.length===0?hr.index:void 0;gn.call(Cn,function(){return Cn.editor.update(null,rr,_r)},ar)});var ir=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Qn+"<p><br></p></div>");this.setContents(ir),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ft(vn,[{key:"addContainer",value:function(Cn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof Cn=="string"){var Qn=Cn;Cn=document.createElement("div"),Cn.classList.add(Qn)}return this.container.insertBefore(Cn,Vn),Cn}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(Cn,Vn,Qn){var ir=this,ar=Mn(Cn,Vn,Qn),rr=dt(ar,4);return Cn=rr[0],Vn=rr[1],Qn=rr[3],gn.call(this,function(){return ir.editor.deleteText(Cn,Vn)},Qn,Cn,-1*Vn)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(Cn),this.container.classList.toggle("ql-disabled",!Cn)}},{key:"focus",value:function(){var Cn=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=Cn,this.scrollIntoView()}},{key:"format",value:function(Cn,Vn){var Qn=this,ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft.default.sources.API;return gn.call(this,function(){var ar=Qn.getSelection(!0),rr=new kt.default;if(ar==null)return rr;if(zt.default.query(Cn,zt.default.Scope.BLOCK))rr=Qn.editor.formatLine(ar.index,ar.length,bn({},Cn,Vn));else{if(ar.length===0)return Qn.selection.format(Cn,Vn),rr;rr=Qn.editor.formatText(ar.index,ar.length,bn({},Cn,Vn))}return Qn.setSelection(ar,Ft.default.sources.SILENT),rr},ir)}},{key:"formatLine",value:function(Cn,Vn,Qn,ir,ar){var rr=this,hr=void 0,_r=Mn(Cn,Vn,Qn,ir,ar),xr=dt(_r,4);return Cn=xr[0],Vn=xr[1],hr=xr[2],ar=xr[3],gn.call(this,function(){return rr.editor.formatLine(Cn,Vn,hr)},ar,Cn,0)}},{key:"formatText",value:function(Cn,Vn,Qn,ir,ar){var rr=this,hr=void 0,_r=Mn(Cn,Vn,Qn,ir,ar),xr=dt(_r,4);return Cn=xr[0],Vn=xr[1],hr=xr[2],ar=xr[3],gn.call(this,function(){return rr.editor.formatText(Cn,Vn,hr)},ar,Cn,0)}},{key:"getBounds",value:function(Cn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Qn=void 0;typeof Cn=="number"?Qn=this.selection.getBounds(Cn,Vn):Qn=this.selection.getBounds(Cn.index,Cn.length);var ir=this.container.getBoundingClientRect();return{bottom:Qn.bottom-ir.top,height:Qn.height,left:Qn.left-ir.left,right:Qn.right-ir.left,top:Qn.top-ir.top,width:Qn.width}}},{key:"getContents",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Cn,Qn=Mn(Cn,Vn),ir=dt(Qn,2);return Cn=ir[0],Vn=ir[1],this.editor.getContents(Cn,Vn)}},{key:"getFormat",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof Cn=="number"?this.editor.getFormat(Cn,Vn):this.editor.getFormat(Cn.index,Cn.length)}},{key:"getIndex",value:function(Cn){return Cn.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(Cn){return this.scroll.leaf(Cn)}},{key:"getLine",value:function(Cn){return this.scroll.line(Cn)}},{key:"getLines",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof Cn!="number"?this.scroll.lines(Cn.index,Cn.length):this.scroll.lines(Cn,Vn)}},{key:"getModule",value:function(Cn){return this.theme.modules[Cn]}},{key:"getSelection",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Cn&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Cn,Qn=Mn(Cn,Vn),ir=dt(Qn,2);return Cn=ir[0],Vn=ir[1],this.editor.getText(Cn,Vn)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(Cn,Vn,Qn){var ir=this,ar=arguments.length>3&&arguments[3]!==void 0?arguments[3]:vn.sources.API;return gn.call(this,function(){return ir.editor.insertEmbed(Cn,Vn,Qn)},ar,Cn)}},{key:"insertText",value:function(Cn,Vn,Qn,ir,ar){var rr=this,hr=void 0,_r=Mn(Cn,0,Qn,ir,ar),xr=dt(_r,4);return Cn=xr[0],hr=xr[2],ar=xr[3],gn.call(this,function(){return rr.editor.insertText(Cn,Vn,hr)},ar,Cn,Vn.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(Cn,Vn,Qn){this.clipboard.dangerouslyPasteHTML(Cn,Vn,Qn)}},{key:"removeFormat",value:function(Cn,Vn,Qn){var ir=this,ar=Mn(Cn,Vn,Qn),rr=dt(ar,4);return Cn=rr[0],Vn=rr[1],Qn=rr[3],gn.call(this,function(){return ir.editor.removeFormat(Cn,Vn)},Qn,Cn)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(Cn){var Vn=this,Qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return gn.call(this,function(){Cn=new kt.default(Cn);var ir=Vn.getLength(),ar=Vn.editor.deleteText(0,ir),rr=Vn.editor.applyDelta(Cn),hr=rr.ops[rr.ops.length-1];hr!=null&&typeof hr.insert=="string"&&hr.insert[hr.insert.length-1]===`
`&&(Vn.editor.deleteText(Vn.getLength()-1,1),rr.delete(1));var _r=ar.compose(rr);return _r},Qn)}},{key:"setSelection",value:function(Cn,Vn,Qn){if(Cn==null)this.selection.setRange(null,Vn||vn.sources.API);else{var ir=Mn(Cn,Vn,Qn),ar=dt(ir,4);Cn=ar[0],Vn=ar[1],Qn=ar[3],this.selection.setRange(new Kt.Range(Cn,Vn),Qn),Qn!==Ft.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(Cn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API,Qn=new kt.default().insert(Cn);return this.setContents(Qn,Vn)}},{key:"update",value:function(){var Cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ft.default.sources.USER,Vn=this.scroll.update(Cn);return this.selection.update(Cn),Vn}},{key:"updateContents",value:function(Cn){var Vn=this,Qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return gn.call(this,function(){return Cn=new kt.default(Cn),Vn.editor.applyDelta(Cn,Qn)},Qn,!0)}}]),vn}();Pn.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Pn.events=Ft.default.events,Pn.sources=Ft.default.sources,Pn.version="1.3.7",Pn.imports={delta:kt.default,parchment:zt.default,"core/module":Ht.default,"core/theme":Sn.default};function Ln(vn,On){if(On=(0,on.default)(!0,{container:vn,modules:{clipboard:!0,keyboard:!0,history:!0}},On),!On.theme||On.theme===Pn.DEFAULTS.theme)On.theme=Sn.default;else if(On.theme=Pn.import("themes/"+On.theme),On.theme==null)throw new Error("Invalid theme "+On.theme+". Did you register it?");var Cn=(0,on.default)(!0,{},On.theme.DEFAULTS);[Cn,On].forEach(function(ir){ir.modules=ir.modules||{},Object.keys(ir.modules).forEach(function(ar){ir.modules[ar]===!0&&(ir.modules[ar]={})})});var Vn=Object.keys(Cn.modules).concat(Object.keys(On.modules)),Qn=Vn.reduce(function(ir,ar){var rr=Pn.import("modules/"+ar);return rr==null?kn.error("Cannot load "+ar+" module. Are you sure you registered it?"):ir[ar]=rr.DEFAULTS||{},ir},{});return On.modules!=null&&On.modules.toolbar&&On.modules.toolbar.constructor!==Object&&(On.modules.toolbar={container:On.modules.toolbar}),On=(0,on.default)(!0,{},Pn.DEFAULTS,{modules:Qn},Cn,On),["bounds","container","scrollingContainer"].forEach(function(ir){typeof On[ir]=="string"&&(On[ir]=document.querySelector(On[ir]))}),On.modules=Object.keys(On.modules).reduce(function(ir,ar){return On.modules[ar]&&(ir[ar]=On.modules[ar]),ir},{}),On}function gn(vn,On,Cn,Vn){if(this.options.strict&&!this.isEnabled()&&On===Ft.default.sources.USER)return new kt.default;var Qn=Cn==null?null:this.getSelection(),ir=this.editor.delta,ar=vn();if(Qn!=null&&(Cn===!0&&(Cn=Qn.index),Vn==null?Qn=yn(Qn,ar,On):Vn!==0&&(Qn=yn(Qn,Cn,Vn,On)),this.setSelection(Qn,Ft.default.sources.SILENT)),ar.length()>0){var rr,hr=[Ft.default.events.TEXT_CHANGE,ar,ir,On];if((rr=this.emitter).emit.apply(rr,[Ft.default.events.EDITOR_CHANGE].concat(hr)),On!==Ft.default.sources.SILENT){var _r;(_r=this.emitter).emit.apply(_r,hr)}}return ar}function Mn(vn,On,Cn,Vn,Qn){var ir={};return typeof vn.index=="number"&&typeof vn.length=="number"?typeof On!="number"?(Qn=Vn,Vn=Cn,Cn=On,On=vn.length,vn=vn.index):(On=vn.length,vn=vn.index):typeof On!="number"&&(Qn=Vn,Vn=Cn,Cn=On,On=0),(typeof Cn>"u"?"undefined":ct(Cn))==="object"?(ir=Cn,Qn=Vn):typeof Cn=="string"&&(Vn!=null?ir[Cn]=Vn:Qn=Cn),Qn=Qn||Ft.default.sources.API,[vn,On,ir,Qn]}function yn(vn,On,Cn,Vn){if(vn==null)return null;var Qn=void 0,ir=void 0;if(On instanceof kt.default){var ar=[vn.index,vn.index+vn.length].map(function(xr){return On.transformPosition(xr,Vn!==Ft.default.sources.USER)}),rr=dt(ar,2);Qn=rr[0],ir=rr[1]}else{var hr=[vn.index,vn.index+vn.length].map(function(xr){return xr<On||xr===On&&Vn===Ft.default.sources.USER?xr:Cn>=0?xr+Cn:Math.max(On,xr+Cn)}),_r=dt(hr,2);Qn=_r[0],ir=_r[1]}return new Kt.Range(Qn,ir-Qn)}ot.expandConfig=Ln,ot.overload=Mn,ot.default=Pn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Yt(zt,Kt){for(var en=0;en<Kt.length;en++){var tn=Kt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(zt,tn.key,tn)}}return function(zt,Kt,en){return Kt&&Yt(zt.prototype,Kt),en&&Yt(zt,en),zt}}(),dt=function Yt(zt,Kt,en){zt===null&&(zt=Function.prototype);var tn=Object.getOwnPropertyDescriptor(zt,Kt);if(tn===void 0){var on=Object.getPrototypeOf(zt);return on===null?void 0:Yt(on,Kt,en)}else{if("value"in tn)return tn.value;var an=tn.get;return an===void 0?void 0:an.call(en)}},ft=ut(7),St=Rt(ft),kt=ut(0),Tt=Rt(kt);function Rt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function jt(Yt,zt){if(!(Yt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Ft(Yt,zt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Yt}function Bt(Yt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Yt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,zt):Yt.__proto__=zt)}var Ht=function(Yt){Bt(zt,Yt);function zt(){return jt(this,zt),Ft(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"formatAt",value:function(en,tn,on,an){if(zt.compare(this.statics.blotName,on)<0&&Tt.default.query(on,Tt.default.Scope.BLOT)){var un=this.isolate(en,tn);an&&un.wrap(on,an)}else dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"formatAt",this).call(this,en,tn,on,an)}},{key:"optimize",value:function(en){if(dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"optimize",this).call(this,en),this.parent instanceof zt&&zt.compare(this.statics.blotName,this.parent.statics.blotName)>0){var tn=this.parent.isolate(this.offset(),this.length());this.moveChildren(tn),tn.wrap(this)}}}],[{key:"compare",value:function(en,tn){var on=zt.order.indexOf(en),an=zt.order.indexOf(tn);return on>=0||an>=0?on-an:en===tn?0:en<tn?-1:1}}]),zt}(Tt.default.Inline);Ht.allowedChildren=[Ht,Tt.default.Embed,St.default],Ht.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default.Text);ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Kt(en,tn){for(var on=0;on<tn.length;on++){var an=tn[on];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(en,an.key,an)}}return function(en,tn,on){return tn&&Kt(en.prototype,tn),on&&Kt(en,on),en}}(),dt=function Kt(en,tn,on){en===null&&(en=Function.prototype);var an=Object.getOwnPropertyDescriptor(en,tn);if(an===void 0){var un=Object.getPrototypeOf(en);return un===null?void 0:Kt(un,tn,on)}else{if("value"in an)return an.value;var dn=an.get;return dn===void 0?void 0:dn.call(on)}},ft=ut(54),St=Rt(ft),kt=ut(10),Tt=Rt(kt);function Rt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function jt(Kt,en){if(!(Kt instanceof en))throw new TypeError("Cannot call a class as a function")}function Ft(Kt,en){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&(typeof en=="object"||typeof en=="function")?en:Kt}function Bt(Kt,en){if(typeof en!="function"&&en!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof en);Kt.prototype=Object.create(en&&en.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,en):Kt.__proto__=en)}var Ht=(0,Tt.default)("quill:events"),Yt=["selectionchange","mousedown","mouseup","click"];Yt.forEach(function(Kt){document.addEventListener(Kt,function(){for(var en=arguments.length,tn=Array(en),on=0;on<en;on++)tn[on]=arguments[on];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(an){if(an.__quill&&an.__quill.emitter){var un;(un=an.__quill.emitter).handleDOM.apply(un,tn)}})})});var zt=function(Kt){Bt(en,Kt);function en(){jt(this,en);var tn=Ft(this,(en.__proto__||Object.getPrototypeOf(en)).call(this));return tn.listeners={},tn.on("error",Ht.error),tn}return ct(en,[{key:"emit",value:function(){Ht.log.apply(Ht,arguments),dt(en.prototype.__proto__||Object.getPrototypeOf(en.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(on){for(var an=arguments.length,un=Array(an>1?an-1:0),dn=1;dn<an;dn++)un[dn-1]=arguments[dn];(this.listeners[on.type]||[]).forEach(function(Sn){var mn=Sn.node,bn=Sn.handler;(on.target===mn||mn.contains(on.target))&&bn.apply(void 0,[on].concat(un))})}},{key:"listenDOM",value:function(on,an,un){this.listeners[on]||(this.listeners[on]=[]),this.listeners[on].push({node:an,handler:un})}}]),en}(St.default);zt.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},zt.sources={API:"api",SILENT:"silent",USER:"user"},ot.default=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});function ct(ft,St){if(!(ft instanceof St))throw new TypeError("Cannot call a class as a function")}var dt=function ft(St){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ct(this,ft),this.quill=St,this.options=kt};dt.DEFAULTS={},ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=["error","warn","log","info"],dt="warn";function ft(kt){if(ct.indexOf(kt)<=ct.indexOf(dt)){for(var Tt,Rt=arguments.length,jt=Array(Rt>1?Rt-1:0),Ft=1;Ft<Rt;Ft++)jt[Ft-1]=arguments[Ft];(Tt=console)[kt].apply(Tt,jt)}}function St(kt){return ct.reduce(function(Tt,Rt){return Tt[Rt]=ft.bind(console,Rt,kt),Tt},{})}ft.level=St.level=function(kt){dt=kt},ot.default=St},function(et,ot,ut){var ct=Array.prototype.slice,dt=ut(52),ft=ut(53),St=et.exports=function(jt,Ft,Bt){return Bt||(Bt={}),jt===Ft?!0:jt instanceof Date&&Ft instanceof Date?jt.getTime()===Ft.getTime():!jt||!Ft||typeof jt!="object"&&typeof Ft!="object"?Bt.strict?jt===Ft:jt==Ft:Rt(jt,Ft,Bt)};function kt(jt){return jt==null}function Tt(jt){return!(!jt||typeof jt!="object"||typeof jt.length!="number"||typeof jt.copy!="function"||typeof jt.slice!="function"||jt.length>0&&typeof jt[0]!="number")}function Rt(jt,Ft,Bt){var Ht,Yt;if(kt(jt)||kt(Ft)||jt.prototype!==Ft.prototype)return!1;if(ft(jt))return ft(Ft)?(jt=ct.call(jt),Ft=ct.call(Ft),St(jt,Ft,Bt)):!1;if(Tt(jt)){if(!Tt(Ft)||jt.length!==Ft.length)return!1;for(Ht=0;Ht<jt.length;Ht++)if(jt[Ht]!==Ft[Ht])return!1;return!0}try{var zt=dt(jt),Kt=dt(Ft)}catch{return!1}if(zt.length!=Kt.length)return!1;for(zt.sort(),Kt.sort(),Ht=zt.length-1;Ht>=0;Ht--)if(zt[Ht]!=Kt[Ht])return!1;for(Ht=zt.length-1;Ht>=0;Ht--)if(Yt=zt[Ht],!St(jt[Yt],Ft[Yt],Bt))return!1;return typeof jt==typeof Ft}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(1),dt=function(){function ft(St,kt,Tt){Tt===void 0&&(Tt={}),this.attrName=St,this.keyName=kt;var Rt=ct.Scope.TYPE&ct.Scope.ATTRIBUTE;Tt.scope!=null?this.scope=Tt.scope&ct.Scope.LEVEL|Rt:this.scope=ct.Scope.ATTRIBUTE,Tt.whitelist!=null&&(this.whitelist=Tt.whitelist)}return ft.keys=function(St){return[].map.call(St.attributes,function(kt){return kt.name})},ft.prototype.add=function(St,kt){return this.canAdd(St,kt)?(St.setAttribute(this.keyName,kt),!0):!1},ft.prototype.canAdd=function(St,kt){var Tt=ct.query(St,ct.Scope.BLOT&(this.scope|ct.Scope.TYPE));return Tt==null?!1:this.whitelist==null?!0:typeof kt=="string"?this.whitelist.indexOf(kt.replace(/["']/g,""))>-1:this.whitelist.indexOf(kt)>-1},ft.prototype.remove=function(St){St.removeAttribute(this.keyName)},ft.prototype.value=function(St){var kt=St.getAttribute(this.keyName);return this.canAdd(St,kt)&&kt?kt:""},ft}();ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Code=void 0;var ct=function(){function dn(Sn,mn){var bn=[],En=!0,kn=!1,Pn=void 0;try{for(var Ln=Sn[Symbol.iterator](),gn;!(En=(gn=Ln.next()).done)&&(bn.push(gn.value),!(mn&&bn.length===mn));En=!0);}catch(Mn){kn=!0,Pn=Mn}finally{try{!En&&Ln.return&&Ln.return()}finally{if(kn)throw Pn}}return bn}return function(Sn,mn){if(Array.isArray(Sn))return Sn;if(Symbol.iterator in Object(Sn))return dn(Sn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function dn(Sn,mn){for(var bn=0;bn<mn.length;bn++){var En=mn[bn];En.enumerable=En.enumerable||!1,En.configurable=!0,"value"in En&&(En.writable=!0),Object.defineProperty(Sn,En.key,En)}}return function(Sn,mn,bn){return mn&&dn(Sn.prototype,mn),bn&&dn(Sn,bn),Sn}}(),ft=function dn(Sn,mn,bn){Sn===null&&(Sn=Function.prototype);var En=Object.getOwnPropertyDescriptor(Sn,mn);if(En===void 0){var kn=Object.getPrototypeOf(Sn);return kn===null?void 0:dn(kn,mn,bn)}else{if("value"in En)return En.value;var Pn=En.get;return Pn===void 0?void 0:Pn.call(bn)}},St=ut(2),kt=Kt(St),Tt=ut(0),Rt=Kt(Tt),jt=ut(4),Ft=Kt(jt),Bt=ut(6),Ht=Kt(Bt),Yt=ut(7),zt=Kt(Yt);function Kt(dn){return dn&&dn.__esModule?dn:{default:dn}}function en(dn,Sn){if(!(dn instanceof Sn))throw new TypeError("Cannot call a class as a function")}function tn(dn,Sn){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Sn&&(typeof Sn=="object"||typeof Sn=="function")?Sn:dn}function on(dn,Sn){if(typeof Sn!="function"&&Sn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Sn);dn.prototype=Object.create(Sn&&Sn.prototype,{constructor:{value:dn,enumerable:!1,writable:!0,configurable:!0}}),Sn&&(Object.setPrototypeOf?Object.setPrototypeOf(dn,Sn):dn.__proto__=Sn)}var an=function(dn){on(Sn,dn);function Sn(){return en(this,Sn),tn(this,(Sn.__proto__||Object.getPrototypeOf(Sn)).apply(this,arguments))}return Sn}(Ht.default);an.blotName="code",an.tagName="CODE";var un=function(dn){on(Sn,dn);function Sn(){return en(this,Sn),tn(this,(Sn.__proto__||Object.getPrototypeOf(Sn)).apply(this,arguments))}return dt(Sn,[{key:"delta",value:function(){var bn=this,En=this.domNode.textContent;return En.endsWith(`
`)&&(En=En.slice(0,-1)),En.split(`
`).reduce(function(kn,Pn){return kn.insert(Pn).insert(`
`,bn.formats())},new kt.default)}},{key:"format",value:function(bn,En){if(!(bn===this.statics.blotName&&En)){var kn=this.descendant(zt.default,this.length()-1),Pn=ct(kn,1),Ln=Pn[0];Ln!=null&&Ln.deleteAt(Ln.length()-1,1),ft(Sn.prototype.__proto__||Object.getPrototypeOf(Sn.prototype),"format",this).call(this,bn,En)}}},{key:"formatAt",value:function(bn,En,kn,Pn){if(En!==0&&!(Rt.default.query(kn,Rt.default.Scope.BLOCK)==null||kn===this.statics.blotName&&Pn===this.statics.formats(this.domNode))){var Ln=this.newlineIndex(bn);if(!(Ln<0||Ln>=bn+En)){var gn=this.newlineIndex(bn,!0)+1,Mn=Ln-gn+1,yn=this.isolate(gn,Mn),vn=yn.next;yn.format(kn,Pn),vn instanceof Sn&&vn.formatAt(0,bn-gn+En-Mn,kn,Pn)}}}},{key:"insertAt",value:function(bn,En,kn){if(kn==null){var Pn=this.descendant(zt.default,bn),Ln=ct(Pn,2),gn=Ln[0],Mn=Ln[1];gn.insertAt(Mn,En)}}},{key:"length",value:function(){var bn=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?bn:bn+1}},{key:"newlineIndex",value:function(bn){var En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(En)return this.domNode.textContent.slice(0,bn).lastIndexOf(`
`);var kn=this.domNode.textContent.slice(bn).indexOf(`
`);return kn>-1?bn+kn:-1}},{key:"optimize",value:function(bn){this.domNode.textContent.endsWith(`
`)||this.appendChild(Rt.default.create("text",`
`)),ft(Sn.prototype.__proto__||Object.getPrototypeOf(Sn.prototype),"optimize",this).call(this,bn);var En=this.next;En!=null&&En.prev===this&&En.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===En.statics.formats(En.domNode)&&(En.optimize(bn),En.moveChildren(this),En.remove())}},{key:"replace",value:function(bn){ft(Sn.prototype.__proto__||Object.getPrototypeOf(Sn.prototype),"replace",this).call(this,bn),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(En){var kn=Rt.default.find(En);kn==null?En.parentNode.removeChild(En):kn instanceof Rt.default.Embed?kn.remove():kn.unwrap()})}}],[{key:"create",value:function(bn){var En=ft(Sn.__proto__||Object.getPrototypeOf(Sn),"create",this).call(this,bn);return En.setAttribute("spellcheck",!1),En}},{key:"formats",value:function(){return!0}}]),Sn}(Ft.default);un.blotName="code-block",un.tagName="PRE",un.TAB="  ",ot.Code=an,ot.default=un},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vn){return typeof vn}:function(vn){return vn&&typeof Symbol=="function"&&vn.constructor===Symbol&&vn!==Symbol.prototype?"symbol":typeof vn},dt=function(){function vn(On,Cn){var Vn=[],Qn=!0,ir=!1,ar=void 0;try{for(var rr=On[Symbol.iterator](),hr;!(Qn=(hr=rr.next()).done)&&(Vn.push(hr.value),!(Cn&&Vn.length===Cn));Qn=!0);}catch(_r){ir=!0,ar=_r}finally{try{!Qn&&rr.return&&rr.return()}finally{if(ir)throw ar}}return Vn}return function(On,Cn){if(Array.isArray(On))return On;if(Symbol.iterator in Object(On))return vn(On,Cn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function vn(On,Cn){for(var Vn=0;Vn<Cn.length;Vn++){var Qn=Cn[Vn];Qn.enumerable=Qn.enumerable||!1,Qn.configurable=!0,"value"in Qn&&(Qn.writable=!0),Object.defineProperty(On,Qn.key,Qn)}}return function(On,Cn,Vn){return Cn&&vn(On.prototype,Cn),Vn&&vn(On,Vn),On}}(),St=ut(2),kt=En(St),Tt=ut(20),Rt=En(Tt),jt=ut(0),Ft=En(jt),Bt=ut(13),Ht=En(Bt),Yt=ut(24),zt=En(Yt),Kt=ut(4),en=En(Kt),tn=ut(16),on=En(tn),an=ut(21),un=En(an),dn=ut(11),Sn=En(dn),mn=ut(3),bn=En(mn);function En(vn){return vn&&vn.__esModule?vn:{default:vn}}function kn(vn,On,Cn){return On in vn?Object.defineProperty(vn,On,{value:Cn,enumerable:!0,configurable:!0,writable:!0}):vn[On]=Cn,vn}function Pn(vn,On){if(!(vn instanceof On))throw new TypeError("Cannot call a class as a function")}var Ln=/^[ -~]*$/,gn=function(){function vn(On){Pn(this,vn),this.scroll=On,this.delta=this.getDelta()}return ft(vn,[{key:"applyDelta",value:function(Cn){var Vn=this,Qn=!1;this.scroll.update();var ir=this.scroll.length();return this.scroll.batchStart(),Cn=yn(Cn),Cn.reduce(function(ar,rr){var hr=rr.retain||rr.delete||rr.insert.length||1,_r=rr.attributes||{};if(rr.insert!=null){if(typeof rr.insert=="string"){var xr=rr.insert;xr.endsWith(`
`)&&Qn&&(Qn=!1,xr=xr.slice(0,-1)),ar>=ir&&!xr.endsWith(`
`)&&(Qn=!0),Vn.scroll.insertAt(ar,xr);var wr=Vn.scroll.line(ar),Ir=dt(wr,2),_i=Ir[0],Br=Ir[1],Fr=(0,bn.default)({},(0,Kt.bubbleFormats)(_i));if(_i instanceof en.default){var cs=_i.descendant(Ft.default.Leaf,Br),Cs=dt(cs,1),Ts=Cs[0];Fr=(0,bn.default)(Fr,(0,Kt.bubbleFormats)(Ts))}_r=Rt.default.attributes.diff(Fr,_r)||{}}else if(ct(rr.insert)==="object"){var Rr=Object.keys(rr.insert)[0];if(Rr==null)return ar;Vn.scroll.insertAt(ar,Rr,rr.insert[Rr])}ir+=hr}return Object.keys(_r).forEach(function(Lr){Vn.scroll.formatAt(ar,hr,Lr,_r[Lr])}),ar+hr},0),Cn.reduce(function(ar,rr){return typeof rr.delete=="number"?(Vn.scroll.deleteAt(ar,rr.delete),ar):ar+(rr.retain||rr.insert.length||1)},0),this.scroll.batchEnd(),this.update(Cn)}},{key:"deleteText",value:function(Cn,Vn){return this.scroll.deleteAt(Cn,Vn),this.update(new kt.default().retain(Cn).delete(Vn))}},{key:"formatLine",value:function(Cn,Vn){var Qn=this,ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ir).forEach(function(ar){if(!(Qn.scroll.whitelist!=null&&!Qn.scroll.whitelist[ar])){var rr=Qn.scroll.lines(Cn,Math.max(Vn,1)),hr=Vn;rr.forEach(function(_r){var xr=_r.length();if(!(_r instanceof Ht.default))_r.format(ar,ir[ar]);else{var wr=Cn-_r.offset(Qn.scroll),Ir=_r.newlineIndex(wr+hr)-wr+1;_r.formatAt(wr,Ir,ar,ir[ar])}hr-=xr})}}),this.scroll.optimize(),this.update(new kt.default().retain(Cn).retain(Vn,(0,un.default)(ir)))}},{key:"formatText",value:function(Cn,Vn){var Qn=this,ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ir).forEach(function(ar){Qn.scroll.formatAt(Cn,Vn,ar,ir[ar])}),this.update(new kt.default().retain(Cn).retain(Vn,(0,un.default)(ir)))}},{key:"getContents",value:function(Cn,Vn){return this.delta.slice(Cn,Cn+Vn)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(Cn,Vn){return Cn.concat(Vn.delta())},new kt.default)}},{key:"getFormat",value:function(Cn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Qn=[],ir=[];Vn===0?this.scroll.path(Cn).forEach(function(rr){var hr=dt(rr,1),_r=hr[0];_r instanceof en.default?Qn.push(_r):_r instanceof Ft.default.Leaf&&ir.push(_r)}):(Qn=this.scroll.lines(Cn,Vn),ir=this.scroll.descendants(Ft.default.Leaf,Cn,Vn));var ar=[Qn,ir].map(function(rr){if(rr.length===0)return{};for(var hr=(0,Kt.bubbleFormats)(rr.shift());Object.keys(hr).length>0;){var _r=rr.shift();if(_r==null)return hr;hr=Mn((0,Kt.bubbleFormats)(_r),hr)}return hr});return bn.default.apply(bn.default,ar)}},{key:"getText",value:function(Cn,Vn){return this.getContents(Cn,Vn).filter(function(Qn){return typeof Qn.insert=="string"}).map(function(Qn){return Qn.insert}).join("")}},{key:"insertEmbed",value:function(Cn,Vn,Qn){return this.scroll.insertAt(Cn,Vn,Qn),this.update(new kt.default().retain(Cn).insert(kn({},Vn,Qn)))}},{key:"insertText",value:function(Cn,Vn){var Qn=this,ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Vn=Vn.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(Cn,Vn),Object.keys(ir).forEach(function(ar){Qn.scroll.formatAt(Cn,Vn.length,ar,ir[ar])}),this.update(new kt.default().retain(Cn).insert(Vn,(0,un.default)(ir)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var Cn=this.scroll.children.head;return Cn.statics.blotName!==en.default.blotName||Cn.children.length>1?!1:Cn.children.head instanceof on.default}},{key:"removeFormat",value:function(Cn,Vn){var Qn=this.getText(Cn,Vn),ir=this.scroll.line(Cn+Vn),ar=dt(ir,2),rr=ar[0],hr=ar[1],_r=0,xr=new kt.default;rr!=null&&(rr instanceof Ht.default?_r=rr.newlineIndex(hr)-hr+1:_r=rr.length()-hr,xr=rr.delta().slice(hr,hr+_r-1).insert(`
`));var wr=this.getContents(Cn,Vn+_r),Ir=wr.diff(new kt.default().insert(Qn).concat(xr)),_i=new kt.default().retain(Cn).concat(Ir);return this.applyDelta(_i)}},{key:"update",value:function(Cn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Qn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ir=this.delta;if(Vn.length===1&&Vn[0].type==="characterData"&&Vn[0].target.data.match(Ln)&&Ft.default.find(Vn[0].target)){var ar=Ft.default.find(Vn[0].target),rr=(0,Kt.bubbleFormats)(ar),hr=ar.offset(this.scroll),_r=Vn[0].oldValue.replace(zt.default.CONTENTS,""),xr=new kt.default().insert(_r),wr=new kt.default().insert(ar.value()),Ir=new kt.default().retain(hr).concat(xr.diff(wr,Qn));Cn=Ir.reduce(function(_i,Br){return Br.insert?_i.insert(Br.insert,rr):_i.push(Br)},new kt.default),this.delta=ir.compose(Cn)}else this.delta=this.getDelta(),(!Cn||!(0,Sn.default)(ir.compose(Cn),this.delta))&&(Cn=ir.diff(this.delta,Qn));return Cn}}]),vn}();function Mn(vn,On){return Object.keys(On).reduce(function(Cn,Vn){return vn[Vn]==null||(On[Vn]===vn[Vn]?Cn[Vn]=On[Vn]:Array.isArray(On[Vn])?On[Vn].indexOf(vn[Vn])<0&&(Cn[Vn]=On[Vn].concat([vn[Vn]])):Cn[Vn]=[On[Vn],vn[Vn]]),Cn},{})}function yn(vn){return vn.reduce(function(On,Cn){if(Cn.insert===1){var Vn=(0,un.default)(Cn.attributes);return delete Vn.image,On.insert({image:Cn.attributes.image},Vn)}if(Cn.attributes!=null&&(Cn.attributes.list===!0||Cn.attributes.bullet===!0)&&(Cn=(0,un.default)(Cn),Cn.attributes.list?Cn.attributes.list="ordered":(Cn.attributes.list="bullet",delete Cn.attributes.bullet)),typeof Cn.insert=="string"){var Qn=Cn.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return On.insert(Qn,Cn.attributes)}return On.push(Cn)},new kt.default)}ot.default=gn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Range=void 0;var ct=function(){function dn(Sn,mn){var bn=[],En=!0,kn=!1,Pn=void 0;try{for(var Ln=Sn[Symbol.iterator](),gn;!(En=(gn=Ln.next()).done)&&(bn.push(gn.value),!(mn&&bn.length===mn));En=!0);}catch(Mn){kn=!0,Pn=Mn}finally{try{!En&&Ln.return&&Ln.return()}finally{if(kn)throw Pn}}return bn}return function(Sn,mn){if(Array.isArray(Sn))return Sn;if(Symbol.iterator in Object(Sn))return dn(Sn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function dn(Sn,mn){for(var bn=0;bn<mn.length;bn++){var En=mn[bn];En.enumerable=En.enumerable||!1,En.configurable=!0,"value"in En&&(En.writable=!0),Object.defineProperty(Sn,En.key,En)}}return function(Sn,mn,bn){return mn&&dn(Sn.prototype,mn),bn&&dn(Sn,bn),Sn}}(),ft=ut(0),St=zt(ft),kt=ut(21),Tt=zt(kt),Rt=ut(11),jt=zt(Rt),Ft=ut(8),Bt=zt(Ft),Ht=ut(10),Yt=zt(Ht);function zt(dn){return dn&&dn.__esModule?dn:{default:dn}}function Kt(dn){if(Array.isArray(dn)){for(var Sn=0,mn=Array(dn.length);Sn<dn.length;Sn++)mn[Sn]=dn[Sn];return mn}else return Array.from(dn)}function en(dn,Sn){if(!(dn instanceof Sn))throw new TypeError("Cannot call a class as a function")}var tn=(0,Yt.default)("quill:selection"),on=function dn(Sn){var mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;en(this,dn),this.index=Sn,this.length=mn},an=function(){function dn(Sn,mn){var bn=this;en(this,dn),this.emitter=mn,this.scroll=Sn,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=St.default.create("cursor",this),this.lastRange=this.savedRange=new on(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){bn.mouseDown||setTimeout(bn.update.bind(bn,Bt.default.sources.USER),1)}),this.emitter.on(Bt.default.events.EDITOR_CHANGE,function(En,kn){En===Bt.default.events.TEXT_CHANGE&&kn.length()>0&&bn.update(Bt.default.sources.SILENT)}),this.emitter.on(Bt.default.events.SCROLL_BEFORE_UPDATE,function(){if(bn.hasFocus()){var En=bn.getNativeRange();En!=null&&En.start.node!==bn.cursor.textNode&&bn.emitter.once(Bt.default.events.SCROLL_UPDATE,function(){try{bn.setNativeRange(En.start.node,En.start.offset,En.end.node,En.end.offset)}catch{}})}}),this.emitter.on(Bt.default.events.SCROLL_OPTIMIZE,function(En,kn){if(kn.range){var Pn=kn.range,Ln=Pn.startNode,gn=Pn.startOffset,Mn=Pn.endNode,yn=Pn.endOffset;bn.setNativeRange(Ln,gn,Mn,yn)}}),this.update(Bt.default.sources.SILENT)}return dt(dn,[{key:"handleComposition",value:function(){var mn=this;this.root.addEventListener("compositionstart",function(){mn.composing=!0}),this.root.addEventListener("compositionend",function(){if(mn.composing=!1,mn.cursor.parent){var bn=mn.cursor.restore();if(!bn)return;setTimeout(function(){mn.setNativeRange(bn.startNode,bn.startOffset,bn.endNode,bn.endOffset)},1)}})}},{key:"handleDragging",value:function(){var mn=this;this.emitter.listenDOM("mousedown",document.body,function(){mn.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){mn.mouseDown=!1,mn.update(Bt.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(mn,bn){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[mn])){this.scroll.update();var En=this.getNativeRange();if(!(En==null||!En.native.collapsed||St.default.query(mn,St.default.Scope.BLOCK))){if(En.start.node!==this.cursor.textNode){var kn=St.default.find(En.start.node,!1);if(kn==null)return;if(kn instanceof St.default.Leaf){var Pn=kn.split(En.start.offset);kn.parent.insertBefore(this.cursor,Pn)}else kn.insertBefore(this.cursor,En.start.node);this.cursor.attach()}this.cursor.format(mn,bn),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(mn){var bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,En=this.scroll.length();mn=Math.min(mn,En-1),bn=Math.min(mn+bn,En-1)-mn;var kn=void 0,Pn=this.scroll.leaf(mn),Ln=ct(Pn,2),gn=Ln[0],Mn=Ln[1];if(gn==null)return null;var yn=gn.position(Mn,!0),vn=ct(yn,2);kn=vn[0],Mn=vn[1];var On=document.createRange();if(bn>0){On.setStart(kn,Mn);var Cn=this.scroll.leaf(mn+bn),Vn=ct(Cn,2);if(gn=Vn[0],Mn=Vn[1],gn==null)return null;var Qn=gn.position(Mn,!0),ir=ct(Qn,2);return kn=ir[0],Mn=ir[1],On.setEnd(kn,Mn),On.getBoundingClientRect()}else{var ar="left",rr=void 0;return kn instanceof Text?(Mn<kn.data.length?(On.setStart(kn,Mn),On.setEnd(kn,Mn+1)):(On.setStart(kn,Mn-1),On.setEnd(kn,Mn),ar="right"),rr=On.getBoundingClientRect()):(rr=gn.domNode.getBoundingClientRect(),Mn>0&&(ar="right")),{bottom:rr.top+rr.height,height:rr.height,left:rr[ar],right:rr[ar],top:rr.top,width:0}}}},{key:"getNativeRange",value:function(){var mn=document.getSelection();if(mn==null||mn.rangeCount<=0)return null;var bn=mn.getRangeAt(0);if(bn==null)return null;var En=this.normalizeNative(bn);return tn.info("getNativeRange",En),En}},{key:"getRange",value:function(){var mn=this.getNativeRange();if(mn==null)return[null,null];var bn=this.normalizedToRange(mn);return[bn,mn]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(mn){var bn=this,En=[[mn.start.node,mn.start.offset]];mn.native.collapsed||En.push([mn.end.node,mn.end.offset]);var kn=En.map(function(gn){var Mn=ct(gn,2),yn=Mn[0],vn=Mn[1],On=St.default.find(yn,!0),Cn=On.offset(bn.scroll);return vn===0?Cn:On instanceof St.default.Container?Cn+On.length():Cn+On.index(yn,vn)}),Pn=Math.min(Math.max.apply(Math,Kt(kn)),this.scroll.length()-1),Ln=Math.min.apply(Math,[Pn].concat(Kt(kn)));return new on(Ln,Pn-Ln)}},{key:"normalizeNative",value:function(mn){if(!un(this.root,mn.startContainer)||!mn.collapsed&&!un(this.root,mn.endContainer))return null;var bn={start:{node:mn.startContainer,offset:mn.startOffset},end:{node:mn.endContainer,offset:mn.endOffset},native:mn};return[bn.start,bn.end].forEach(function(En){for(var kn=En.node,Pn=En.offset;!(kn instanceof Text)&&kn.childNodes.length>0;)if(kn.childNodes.length>Pn)kn=kn.childNodes[Pn],Pn=0;else if(kn.childNodes.length===Pn)kn=kn.lastChild,Pn=kn instanceof Text?kn.data.length:kn.childNodes.length+1;else break;En.node=kn,En.offset=Pn}),bn}},{key:"rangeToNative",value:function(mn){var bn=this,En=mn.collapsed?[mn.index]:[mn.index,mn.index+mn.length],kn=[],Pn=this.scroll.length();return En.forEach(function(Ln,gn){Ln=Math.min(Pn-1,Ln);var Mn=void 0,yn=bn.scroll.leaf(Ln),vn=ct(yn,2),On=vn[0],Cn=vn[1],Vn=On.position(Cn,gn!==0),Qn=ct(Vn,2);Mn=Qn[0],Cn=Qn[1],kn.push(Mn,Cn)}),kn.length<2&&(kn=kn.concat(kn)),kn}},{key:"scrollIntoView",value:function(mn){var bn=this.lastRange;if(bn!=null){var En=this.getBounds(bn.index,bn.length);if(En!=null){var kn=this.scroll.length()-1,Pn=this.scroll.line(Math.min(bn.index,kn)),Ln=ct(Pn,1),gn=Ln[0],Mn=gn;if(bn.length>0){var yn=this.scroll.line(Math.min(bn.index+bn.length,kn)),vn=ct(yn,1);Mn=vn[0]}if(!(gn==null||Mn==null)){var On=mn.getBoundingClientRect();En.top<On.top?mn.scrollTop-=On.top-En.top:En.bottom>On.bottom&&(mn.scrollTop+=En.bottom-On.bottom)}}}}},{key:"setNativeRange",value:function(mn,bn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mn,kn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:bn,Pn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(tn.info("setNativeRange",mn,bn,En,kn),!(mn!=null&&(this.root.parentNode==null||mn.parentNode==null||En.parentNode==null))){var Ln=document.getSelection();if(Ln!=null)if(mn!=null){this.hasFocus()||this.root.focus();var gn=(this.getNativeRange()||{}).native;if(gn==null||Pn||mn!==gn.startContainer||bn!==gn.startOffset||En!==gn.endContainer||kn!==gn.endOffset){mn.tagName=="BR"&&(bn=[].indexOf.call(mn.parentNode.childNodes,mn),mn=mn.parentNode),En.tagName=="BR"&&(kn=[].indexOf.call(En.parentNode.childNodes,En),En=En.parentNode);var Mn=document.createRange();Mn.setStart(mn,bn),Mn.setEnd(En,kn),Ln.removeAllRanges(),Ln.addRange(Mn)}}else Ln.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(mn){var bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bt.default.sources.API;if(typeof bn=="string"&&(En=bn,bn=!1),tn.info("setRange",mn),mn!=null){var kn=this.rangeToNative(mn);this.setNativeRange.apply(this,Kt(kn).concat([bn]))}else this.setNativeRange(null);this.update(En)}},{key:"update",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bt.default.sources.USER,bn=this.lastRange,En=this.getRange(),kn=ct(En,2),Pn=kn[0],Ln=kn[1];if(this.lastRange=Pn,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,jt.default)(bn,this.lastRange)){var gn;!this.composing&&Ln!=null&&Ln.native.collapsed&&Ln.start.node!==this.cursor.textNode&&this.cursor.restore();var Mn=[Bt.default.events.SELECTION_CHANGE,(0,Tt.default)(this.lastRange),(0,Tt.default)(bn),mn];if((gn=this.emitter).emit.apply(gn,[Bt.default.events.EDITOR_CHANGE].concat(Mn)),mn!==Bt.default.sources.SILENT){var yn;(yn=this.emitter).emit.apply(yn,Mn)}}}}]),dn}();function un(dn,Sn){try{Sn.parentNode}catch{return!1}return Sn instanceof Text&&(Sn=Sn.parentNode),dn.contains(Sn)}ot.Range=on,ot.default=an},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(Ht,Yt){for(var zt=0;zt<Yt.length;zt++){var Kt=Yt[zt];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ht,Kt.key,Kt)}}return function(Ht,Yt,zt){return Yt&&Bt(Ht.prototype,Yt),zt&&Bt(Ht,zt),Ht}}(),dt=function Bt(Ht,Yt,zt){Ht===null&&(Ht=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(Ht,Yt);if(Kt===void 0){var en=Object.getPrototypeOf(Ht);return en===null?void 0:Bt(en,Yt,zt)}else{if("value"in Kt)return Kt.value;var tn=Kt.get;return tn===void 0?void 0:tn.call(zt)}},ft=ut(0),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ct(Ht,[{key:"insertInto",value:function(zt,Kt){zt.children.length===0?dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"insertInto",this).call(this,zt,Kt):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),Ht}(St.default.Embed);Ft.blotName="break",Ft.tagName="BR",ot.default=Ft},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var Bt in Ft)Ft.hasOwnProperty(Bt)&&(jt[Bt]=Ft[Bt])};return function(jt,Ft){Rt(jt,Ft);function Bt(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):(Bt.prototype=Ft.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(44),ft=ut(30),St=ut(1),kt=function(Rt){ct(jt,Rt);function jt(Ft){var Bt=Rt.call(this,Ft)||this;return Bt.build(),Bt}return jt.prototype.appendChild=function(Ft){this.insertBefore(Ft)},jt.prototype.attach=function(){Rt.prototype.attach.call(this),this.children.forEach(function(Ft){Ft.attach()})},jt.prototype.build=function(){var Ft=this;this.children=new dt.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Bt){try{var Ht=Tt(Bt);Ft.insertBefore(Ht,Ft.children.head||void 0)}catch(Yt){if(Yt instanceof St.ParchmentError)return;throw Yt}})},jt.prototype.deleteAt=function(Ft,Bt){if(Ft===0&&Bt===this.length())return this.remove();this.children.forEachAt(Ft,Bt,function(Ht,Yt,zt){Ht.deleteAt(Yt,zt)})},jt.prototype.descendant=function(Ft,Bt){var Ht=this.children.find(Bt),Yt=Ht[0],zt=Ht[1];return Ft.blotName==null&&Ft(Yt)||Ft.blotName!=null&&Yt instanceof Ft?[Yt,zt]:Yt instanceof jt?Yt.descendant(Ft,zt):[null,-1]},jt.prototype.descendants=function(Ft,Bt,Ht){Bt===void 0&&(Bt=0),Ht===void 0&&(Ht=Number.MAX_VALUE);var Yt=[],zt=Ht;return this.children.forEachAt(Bt,Ht,function(Kt,en,tn){(Ft.blotName==null&&Ft(Kt)||Ft.blotName!=null&&Kt instanceof Ft)&&Yt.push(Kt),Kt instanceof jt&&(Yt=Yt.concat(Kt.descendants(Ft,en,zt))),zt-=tn}),Yt},jt.prototype.detach=function(){this.children.forEach(function(Ft){Ft.detach()}),Rt.prototype.detach.call(this)},jt.prototype.formatAt=function(Ft,Bt,Ht,Yt){this.children.forEachAt(Ft,Bt,function(zt,Kt,en){zt.formatAt(Kt,en,Ht,Yt)})},jt.prototype.insertAt=function(Ft,Bt,Ht){var Yt=this.children.find(Ft),zt=Yt[0],Kt=Yt[1];if(zt)zt.insertAt(Kt,Bt,Ht);else{var en=Ht==null?St.create("text",Bt):St.create(Bt,Ht);this.appendChild(en)}},jt.prototype.insertBefore=function(Ft,Bt){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(Ht){return Ft instanceof Ht}))throw new St.ParchmentError("Cannot insert "+Ft.statics.blotName+" into "+this.statics.blotName);Ft.insertInto(this,Bt)},jt.prototype.length=function(){return this.children.reduce(function(Ft,Bt){return Ft+Bt.length()},0)},jt.prototype.moveChildren=function(Ft,Bt){this.children.forEach(function(Ht){Ft.insertBefore(Ht,Bt)})},jt.prototype.optimize=function(Ft){if(Rt.prototype.optimize.call(this,Ft),this.children.length===0)if(this.statics.defaultChild!=null){var Bt=St.create(this.statics.defaultChild);this.appendChild(Bt),Bt.optimize(Ft)}else this.remove()},jt.prototype.path=function(Ft,Bt){Bt===void 0&&(Bt=!1);var Ht=this.children.find(Ft,Bt),Yt=Ht[0],zt=Ht[1],Kt=[[this,Ft]];return Yt instanceof jt?Kt.concat(Yt.path(zt,Bt)):(Yt!=null&&Kt.push([Yt,zt]),Kt)},jt.prototype.removeChild=function(Ft){this.children.remove(Ft)},jt.prototype.replace=function(Ft){Ft instanceof jt&&Ft.moveChildren(this),Rt.prototype.replace.call(this,Ft)},jt.prototype.split=function(Ft,Bt){if(Bt===void 0&&(Bt=!1),!Bt){if(Ft===0)return this;if(Ft===this.length())return this.next}var Ht=this.clone();return this.parent.insertBefore(Ht,this.next),this.children.forEachAt(Ft,this.length(),function(Yt,zt,Kt){Yt=Yt.split(zt,Bt),Ht.appendChild(Yt)}),Ht},jt.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},jt.prototype.update=function(Ft,Bt){var Ht=this,Yt=[],zt=[];Ft.forEach(function(Kt){Kt.target===Ht.domNode&&Kt.type==="childList"&&(Yt.push.apply(Yt,Kt.addedNodes),zt.push.apply(zt,Kt.removedNodes))}),zt.forEach(function(Kt){if(!(Kt.parentNode!=null&&Kt.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Kt)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var en=St.find(Kt);en!=null&&(en.domNode.parentNode==null||en.domNode.parentNode===Ht.domNode)&&en.detach()}}),Yt.filter(function(Kt){return Kt.parentNode==Ht.domNode}).sort(function(Kt,en){return Kt===en?0:Kt.compareDocumentPosition(en)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Kt){var en=null;Kt.nextSibling!=null&&(en=St.find(Kt.nextSibling));var tn=Tt(Kt);(tn.next!=en||tn.next==null)&&(tn.parent!=null&&tn.parent.removeChild(Ht),Ht.insertBefore(tn,en||void 0))})},jt}(ft.default);function Tt(Rt){var jt=St.find(Rt);if(jt==null)try{jt=St.create(Rt)}catch{jt=St.create(St.Scope.INLINE),[].slice.call(Rt.childNodes).forEach(function(Bt){jt.domNode.appendChild(Bt)}),Rt.parentNode&&Rt.parentNode.replaceChild(jt.domNode,Rt),jt.attach()}return jt}ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var Bt in Ft)Ft.hasOwnProperty(Bt)&&(jt[Bt]=Ft[Bt])};return function(jt,Ft){Rt(jt,Ft);function Bt(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):(Bt.prototype=Ft.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12),ft=ut(31),St=ut(17),kt=ut(1),Tt=function(Rt){ct(jt,Rt);function jt(Ft){var Bt=Rt.call(this,Ft)||this;return Bt.attributes=new ft.default(Bt.domNode),Bt}return jt.formats=function(Ft){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return Ft.tagName.toLowerCase()},jt.prototype.format=function(Ft,Bt){var Ht=kt.query(Ft);Ht instanceof dt.default?this.attributes.attribute(Ht,Bt):Bt&&Ht!=null&&(Ft!==this.statics.blotName||this.formats()[Ft]!==Bt)&&this.replaceWith(Ft,Bt)},jt.prototype.formats=function(){var Ft=this.attributes.values(),Bt=this.statics.formats(this.domNode);return Bt!=null&&(Ft[this.statics.blotName]=Bt),Ft},jt.prototype.replaceWith=function(Ft,Bt){var Ht=Rt.prototype.replaceWith.call(this,Ft,Bt);return this.attributes.copy(Ht),Ht},jt.prototype.update=function(Ft,Bt){var Ht=this;Rt.prototype.update.call(this,Ft,Bt),Ft.some(function(Yt){return Yt.target===Ht.domNode&&Yt.type==="attributes"})&&this.attributes.build()},jt.prototype.wrap=function(Ft,Bt){var Ht=Rt.prototype.wrap.call(this,Ft,Bt);return Ht instanceof jt&&Ht.statics.scope===this.statics.scope&&this.attributes.move(Ht),Ht},jt}(St.default);ot.default=Tt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(30),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.value=function(Rt){return!0},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt||this.domNode.compareDocumentPosition(Rt)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(jt,1):-1},Tt.prototype.position=function(Rt,jt){var Ft=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return Rt>0&&(Ft+=1),[this.parent.domNode,Ft]},Tt.prototype.value=function(){var Rt;return Rt={},Rt[this.statics.blotName]=this.statics.value(this.domNode)||!0,Rt},Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=ut(11),dt=ut(3),ft={attributes:{compose:function(kt,Tt,Rt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var jt=dt(!0,{},Tt);Rt||(jt=Object.keys(jt).reduce(function(Bt,Ht){return jt[Ht]!=null&&(Bt[Ht]=jt[Ht]),Bt},{}));for(var Ft in kt)kt[Ft]!==void 0&&Tt[Ft]===void 0&&(jt[Ft]=kt[Ft]);return Object.keys(jt).length>0?jt:void 0},diff:function(kt,Tt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Rt=Object.keys(kt).concat(Object.keys(Tt)).reduce(function(jt,Ft){return ct(kt[Ft],Tt[Ft])||(jt[Ft]=Tt[Ft]===void 0?null:Tt[Ft]),jt},{});return Object.keys(Rt).length>0?Rt:void 0},transform:function(kt,Tt,Rt){if(typeof kt!="object")return Tt;if(typeof Tt=="object"){if(!Rt)return Tt;var jt=Object.keys(Tt).reduce(function(Ft,Bt){return kt[Bt]===void 0&&(Ft[Bt]=Tt[Bt]),Ft},{});return Object.keys(jt).length>0?jt:void 0}}},iterator:function(kt){return new St(kt)},length:function(kt){return typeof kt.delete=="number"?kt.delete:typeof kt.retain=="number"?kt.retain:typeof kt.insert=="string"?kt.insert.length:1}};function St(kt){this.ops=kt,this.index=0,this.offset=0}St.prototype.hasNext=function(){return this.peekLength()<1/0},St.prototype.next=function(kt){kt||(kt=1/0);var Tt=this.ops[this.index];if(Tt){var Rt=this.offset,jt=ft.length(Tt);if(kt>=jt-Rt?(kt=jt-Rt,this.index+=1,this.offset=0):this.offset+=kt,typeof Tt.delete=="number")return{delete:kt};var Ft={};return Tt.attributes&&(Ft.attributes=Tt.attributes),typeof Tt.retain=="number"?Ft.retain=kt:typeof Tt.insert=="string"?Ft.insert=Tt.insert.substr(Rt,kt):Ft.insert=Tt.insert,Ft}else return{retain:1/0}},St.prototype.peek=function(){return this.ops[this.index]},St.prototype.peekLength=function(){return this.ops[this.index]?ft.length(this.ops[this.index])-this.offset:1/0},St.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},St.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var kt=this.offset,Tt=this.index,Rt=this.next(),jt=this.ops.slice(this.index);return this.offset=kt,this.index=Tt,[Rt].concat(jt)}else return[]},et.exports=ft},function(et,ot){var ut=function(){function ct(Ht,Yt){return Yt!=null&&Ht instanceof Yt}var dt;try{dt=Map}catch{dt=function(){}}var ft;try{ft=Set}catch{ft=function(){}}var St;try{St=Promise}catch{St=function(){}}function kt(Ht,Yt,zt,Kt,en){typeof Yt=="object"&&(zt=Yt.depth,Kt=Yt.prototype,en=Yt.includeNonEnumerable,Yt=Yt.circular);var tn=[],on=[],an=typeof Buffer<"u";typeof Yt>"u"&&(Yt=!0),typeof zt>"u"&&(zt=1/0);function un(dn,Sn){if(dn===null)return null;if(Sn===0)return dn;var mn,bn;if(typeof dn!="object")return dn;if(ct(dn,dt))mn=new dt;else if(ct(dn,ft))mn=new ft;else if(ct(dn,St))mn=new St(function(On,Cn){dn.then(function(Vn){On(un(Vn,Sn-1))},function(Vn){Cn(un(Vn,Sn-1))})});else if(kt.__isArray(dn))mn=[];else if(kt.__isRegExp(dn))mn=new RegExp(dn.source,Bt(dn)),dn.lastIndex&&(mn.lastIndex=dn.lastIndex);else if(kt.__isDate(dn))mn=new Date(dn.getTime());else{if(an&&Buffer.isBuffer(dn))return Buffer.allocUnsafe?mn=Buffer.allocUnsafe(dn.length):mn=new Buffer(dn.length),dn.copy(mn),mn;ct(dn,Error)?mn=Object.create(dn):typeof Kt>"u"?(bn=Object.getPrototypeOf(dn),mn=Object.create(bn)):(mn=Object.create(Kt),bn=Kt)}if(Yt){var En=tn.indexOf(dn);if(En!=-1)return on[En];tn.push(dn),on.push(mn)}ct(dn,dt)&&dn.forEach(function(On,Cn){var Vn=un(Cn,Sn-1),Qn=un(On,Sn-1);mn.set(Vn,Qn)}),ct(dn,ft)&&dn.forEach(function(On){var Cn=un(On,Sn-1);mn.add(Cn)});for(var kn in dn){var Pn;bn&&(Pn=Object.getOwnPropertyDescriptor(bn,kn)),!(Pn&&Pn.set==null)&&(mn[kn]=un(dn[kn],Sn-1))}if(Object.getOwnPropertySymbols)for(var Ln=Object.getOwnPropertySymbols(dn),kn=0;kn<Ln.length;kn++){var gn=Ln[kn],Mn=Object.getOwnPropertyDescriptor(dn,gn);Mn&&!Mn.enumerable&&!en||(mn[gn]=un(dn[gn],Sn-1),Mn.enumerable||Object.defineProperty(mn,gn,{enumerable:!1}))}if(en)for(var yn=Object.getOwnPropertyNames(dn),kn=0;kn<yn.length;kn++){var vn=yn[kn],Mn=Object.getOwnPropertyDescriptor(dn,vn);Mn&&Mn.enumerable||(mn[vn]=un(dn[vn],Sn-1),Object.defineProperty(mn,vn,{enumerable:!1}))}return mn}return un(Ht,zt)}kt.clonePrototype=function(Yt){if(Yt===null)return null;var zt=function(){};return zt.prototype=Yt,new zt};function Tt(Ht){return Object.prototype.toString.call(Ht)}kt.__objToStr=Tt;function Rt(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object Date]"}kt.__isDate=Rt;function jt(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object Array]"}kt.__isArray=jt;function Ft(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object RegExp]"}kt.__isRegExp=Ft;function Bt(Ht){var Yt="";return Ht.global&&(Yt+="g"),Ht.ignoreCase&&(Yt+="i"),Ht.multiline&&(Yt+="m"),Yt}return kt.__getRegExpFlags=Bt,kt}();typeof et=="object"&&et.exports&&(et.exports=ut)},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function mn(bn,En){var kn=[],Pn=!0,Ln=!1,gn=void 0;try{for(var Mn=bn[Symbol.iterator](),yn;!(Pn=(yn=Mn.next()).done)&&(kn.push(yn.value),!(En&&kn.length===En));Pn=!0);}catch(vn){Ln=!0,gn=vn}finally{try{!Pn&&Mn.return&&Mn.return()}finally{if(Ln)throw gn}}return kn}return function(bn,En){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return mn(bn,En);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function mn(bn,En){for(var kn=0;kn<En.length;kn++){var Pn=En[kn];Pn.enumerable=Pn.enumerable||!1,Pn.configurable=!0,"value"in Pn&&(Pn.writable=!0),Object.defineProperty(bn,Pn.key,Pn)}}return function(bn,En,kn){return En&&mn(bn.prototype,En),kn&&mn(bn,kn),bn}}(),ft=function mn(bn,En,kn){bn===null&&(bn=Function.prototype);var Pn=Object.getOwnPropertyDescriptor(bn,En);if(Pn===void 0){var Ln=Object.getPrototypeOf(bn);return Ln===null?void 0:mn(Ln,En,kn)}else{if("value"in Pn)return Pn.value;var gn=Pn.get;return gn===void 0?void 0:gn.call(kn)}},St=ut(0),kt=tn(St),Tt=ut(8),Rt=tn(Tt),jt=ut(4),Ft=tn(jt),Bt=ut(16),Ht=tn(Bt),Yt=ut(13),zt=tn(Yt),Kt=ut(25),en=tn(Kt);function tn(mn){return mn&&mn.__esModule?mn:{default:mn}}function on(mn,bn){if(!(mn instanceof bn))throw new TypeError("Cannot call a class as a function")}function an(mn,bn){if(!mn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bn&&(typeof bn=="object"||typeof bn=="function")?bn:mn}function un(mn,bn){if(typeof bn!="function"&&bn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof bn);mn.prototype=Object.create(bn&&bn.prototype,{constructor:{value:mn,enumerable:!1,writable:!0,configurable:!0}}),bn&&(Object.setPrototypeOf?Object.setPrototypeOf(mn,bn):mn.__proto__=bn)}function dn(mn){return mn instanceof Ft.default||mn instanceof jt.BlockEmbed}var Sn=function(mn){un(bn,mn);function bn(En,kn){on(this,bn);var Pn=an(this,(bn.__proto__||Object.getPrototypeOf(bn)).call(this,En));return Pn.emitter=kn.emitter,Array.isArray(kn.whitelist)&&(Pn.whitelist=kn.whitelist.reduce(function(Ln,gn){return Ln[gn]=!0,Ln},{})),Pn.domNode.addEventListener("DOMNodeInserted",function(){}),Pn.optimize(),Pn.enable(),Pn}return dt(bn,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(kn,Pn){var Ln=this.line(kn),gn=ct(Ln,2),Mn=gn[0],yn=gn[1],vn=this.line(kn+Pn),On=ct(vn,1),Cn=On[0];if(ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"deleteAt",this).call(this,kn,Pn),Cn!=null&&Mn!==Cn&&yn>0){if(Mn instanceof jt.BlockEmbed||Cn instanceof jt.BlockEmbed){this.optimize();return}if(Mn instanceof zt.default){var Vn=Mn.newlineIndex(Mn.length(),!0);if(Vn>-1&&(Mn=Mn.split(Vn+1),Mn===Cn)){this.optimize();return}}else if(Cn instanceof zt.default){var Qn=Cn.newlineIndex(0);Qn>-1&&Cn.split(Qn+1)}var ir=Cn.children.head instanceof Ht.default?null:Cn.children.head;Mn.moveChildren(Cn,ir),Mn.remove()}this.optimize()}},{key:"enable",value:function(){var kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",kn)}},{key:"formatAt",value:function(kn,Pn,Ln,gn){this.whitelist!=null&&!this.whitelist[Ln]||(ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"formatAt",this).call(this,kn,Pn,Ln,gn),this.optimize())}},{key:"insertAt",value:function(kn,Pn,Ln){if(!(Ln!=null&&this.whitelist!=null&&!this.whitelist[Pn])){if(kn>=this.length())if(Ln==null||kt.default.query(Pn,kt.default.Scope.BLOCK)==null){var gn=kt.default.create(this.statics.defaultChild);this.appendChild(gn),Ln==null&&Pn.endsWith(`
`)&&(Pn=Pn.slice(0,-1)),gn.insertAt(0,Pn,Ln)}else{var Mn=kt.default.create(Pn,Ln);this.appendChild(Mn)}else ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"insertAt",this).call(this,kn,Pn,Ln);this.optimize()}}},{key:"insertBefore",value:function(kn,Pn){if(kn.statics.scope===kt.default.Scope.INLINE_BLOT){var Ln=kt.default.create(this.statics.defaultChild);Ln.appendChild(kn),kn=Ln}ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"insertBefore",this).call(this,kn,Pn)}},{key:"leaf",value:function(kn){return this.path(kn).pop()||[null,-1]}},{key:"line",value:function(kn){return kn===this.length()?this.line(kn-1):this.descendant(dn,kn)}},{key:"lines",value:function(){var kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Ln=function gn(Mn,yn,vn){var On=[],Cn=vn;return Mn.children.forEachAt(yn,vn,function(Vn,Qn,ir){dn(Vn)?On.push(Vn):Vn instanceof kt.default.Container&&(On=On.concat(gn(Vn,Qn,Cn))),Cn-=ir}),On};return Ln(this,kn,Pn)}},{key:"optimize",value:function(){var kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"optimize",this).call(this,kn,Pn),kn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_OPTIMIZE,kn,Pn))}},{key:"path",value:function(kn){return ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"path",this).call(this,kn).slice(1)}},{key:"update",value:function(kn){if(this.batch!==!0){var Pn=Rt.default.sources.USER;typeof kn=="string"&&(Pn=kn),Array.isArray(kn)||(kn=this.observer.takeRecords()),kn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_BEFORE_UPDATE,Pn,kn),ft(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"update",this).call(this,kn.concat([])),kn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_UPDATE,Pn,kn)}}}]),bn}(kt.default.Scroll);Sn.blotName="scroll",Sn.className="ql-editor",Sn.tagName="DIV",Sn.defaultChild="block",Sn.allowedChildren=[Ft.default,jt.BlockEmbed,en.default],ot.default=Sn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SHORTKEY=ot.default=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rr){return typeof rr}:function(rr){return rr&&typeof Symbol=="function"&&rr.constructor===Symbol&&rr!==Symbol.prototype?"symbol":typeof rr},dt=function(){function rr(hr,_r){var xr=[],wr=!0,Ir=!1,_i=void 0;try{for(var Br=hr[Symbol.iterator](),Fr;!(wr=(Fr=Br.next()).done)&&(xr.push(Fr.value),!(_r&&xr.length===_r));wr=!0);}catch(cs){Ir=!0,_i=cs}finally{try{!wr&&Br.return&&Br.return()}finally{if(Ir)throw _i}}return xr}return function(hr,_r){if(Array.isArray(hr))return hr;if(Symbol.iterator in Object(hr))return rr(hr,_r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function rr(hr,_r){for(var xr=0;xr<_r.length;xr++){var wr=_r[xr];wr.enumerable=wr.enumerable||!1,wr.configurable=!0,"value"in wr&&(wr.writable=!0),Object.defineProperty(hr,wr.key,wr)}}return function(hr,_r,xr){return _r&&rr(hr.prototype,_r),xr&&rr(hr,xr),hr}}(),St=ut(21),kt=mn(St),Tt=ut(11),Rt=mn(Tt),jt=ut(3),Ft=mn(jt),Bt=ut(2),Ht=mn(Bt),Yt=ut(20),zt=mn(Yt),Kt=ut(0),en=mn(Kt),tn=ut(5),on=mn(tn),an=ut(10),un=mn(an),dn=ut(9),Sn=mn(dn);function mn(rr){return rr&&rr.__esModule?rr:{default:rr}}function bn(rr,hr,_r){return hr in rr?Object.defineProperty(rr,hr,{value:_r,enumerable:!0,configurable:!0,writable:!0}):rr[hr]=_r,rr}function En(rr,hr){if(!(rr instanceof hr))throw new TypeError("Cannot call a class as a function")}function kn(rr,hr){if(!rr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return hr&&(typeof hr=="object"||typeof hr=="function")?hr:rr}function Pn(rr,hr){if(typeof hr!="function"&&hr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof hr);rr.prototype=Object.create(hr&&hr.prototype,{constructor:{value:rr,enumerable:!1,writable:!0,configurable:!0}}),hr&&(Object.setPrototypeOf?Object.setPrototypeOf(rr,hr):rr.__proto__=hr)}var Ln=(0,un.default)("quill:keyboard"),gn=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Mn=function(rr){Pn(hr,rr),ft(hr,null,[{key:"match",value:function(xr,wr){return wr=ar(wr),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ir){return!!wr[Ir]!==xr[Ir]&&wr[Ir]!==null})?!1:wr.key===(xr.which||xr.keyCode)}}]);function hr(_r,xr){En(this,hr);var wr=kn(this,(hr.__proto__||Object.getPrototypeOf(hr)).call(this,_r,xr));return wr.bindings={},Object.keys(wr.options.bindings).forEach(function(Ir){Ir==="list autofill"&&_r.scroll.whitelist!=null&&!_r.scroll.whitelist.list||wr.options.bindings[Ir]&&wr.addBinding(wr.options.bindings[Ir])}),wr.addBinding({key:hr.keys.ENTER,shiftKey:null},Vn),wr.addBinding({key:hr.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(wr.addBinding({key:hr.keys.BACKSPACE},{collapsed:!0},vn),wr.addBinding({key:hr.keys.DELETE},{collapsed:!0},On)):(wr.addBinding({key:hr.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},vn),wr.addBinding({key:hr.keys.DELETE},{collapsed:!0,suffix:/^.?$/},On)),wr.addBinding({key:hr.keys.BACKSPACE},{collapsed:!1},Cn),wr.addBinding({key:hr.keys.DELETE},{collapsed:!1},Cn),wr.addBinding({key:hr.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},vn),wr.listen(),wr}return ft(hr,[{key:"addBinding",value:function(xr){var wr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_i=ar(xr);if(_i==null||_i.key==null)return Ln.warn("Attempted to add invalid keyboard binding",_i);typeof wr=="function"&&(wr={handler:wr}),typeof Ir=="function"&&(Ir={handler:Ir}),_i=(0,Ft.default)(_i,wr,Ir),this.bindings[_i.key]=this.bindings[_i.key]||[],this.bindings[_i.key].push(_i)}},{key:"listen",value:function(){var xr=this;this.quill.root.addEventListener("keydown",function(wr){if(!wr.defaultPrevented){var Ir=wr.which||wr.keyCode,_i=(xr.bindings[Ir]||[]).filter(function(cn){return hr.match(wr,cn)});if(_i.length!==0){var Br=xr.quill.getSelection();if(!(Br==null||!xr.quill.hasFocus())){var Fr=xr.quill.getLine(Br.index),cs=dt(Fr,2),Cs=cs[0],Ts=cs[1],Rr=xr.quill.getLeaf(Br.index),Lr=dt(Rr,2),Gr=Lr[0],zr=Lr[1],Vr=Br.length===0?[Gr,zr]:xr.quill.getLeaf(Br.index+Br.length),rs=dt(Vr,2),fs=rs[0],Kr=rs[1],$t=Gr instanceof en.default.Text?Gr.value().slice(0,zr):"",Jt=fs instanceof en.default.Text?fs.value().slice(Kr):"",sn={collapsed:Br.length===0,empty:Br.length===0&&Cs.length()<=1,format:xr.quill.getFormat(Br),offset:Ts,prefix:$t,suffix:Jt},ln=_i.some(function(cn){if(cn.collapsed!=null&&cn.collapsed!==sn.collapsed||cn.empty!=null&&cn.empty!==sn.empty||cn.offset!=null&&cn.offset!==sn.offset)return!1;if(Array.isArray(cn.format)){if(cn.format.every(function(fn){return sn.format[fn]==null}))return!1}else if(ct(cn.format)==="object"&&!Object.keys(cn.format).every(function(fn){return cn.format[fn]===!0?sn.format[fn]!=null:cn.format[fn]===!1?sn.format[fn]==null:(0,Rt.default)(cn.format[fn],sn.format[fn])}))return!1;return cn.prefix!=null&&!cn.prefix.test(sn.prefix)||cn.suffix!=null&&!cn.suffix.test(sn.suffix)?!1:cn.handler.call(xr,Br,sn)!==!0});ln&&wr.preventDefault()}}}})}}]),hr}(Sn.default);Mn.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Mn.DEFAULTS={bindings:{bold:ir("bold"),italic:ir("italic"),underline:ir("underline"),indent:{key:Mn.keys.TAB,format:["blockquote","indent","list"],handler:function(hr,_r){if(_r.collapsed&&_r.offset!==0)return!0;this.quill.format("indent","+1",on.default.sources.USER)}},outdent:{key:Mn.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(hr,_r){if(_r.collapsed&&_r.offset!==0)return!0;this.quill.format("indent","-1",on.default.sources.USER)}},"outdent backspace":{key:Mn.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(hr,_r){_r.format.indent!=null?this.quill.format("indent","-1",on.default.sources.USER):_r.format.list!=null&&this.quill.format("list",!1,on.default.sources.USER)}},"indent code-block":Qn(!0),"outdent code-block":Qn(!1),"remove tab":{key:Mn.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(hr){this.quill.deleteText(hr.index-1,1,on.default.sources.USER)}},tab:{key:Mn.keys.TAB,handler:function(hr){this.quill.history.cutoff();var _r=new Ht.default().retain(hr.index).delete(hr.length).insert("	");this.quill.updateContents(_r,on.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(hr.index+1,on.default.sources.SILENT)}},"list empty enter":{key:Mn.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(hr,_r){this.quill.format("list",!1,on.default.sources.USER),_r.format.indent&&this.quill.format("indent",!1,on.default.sources.USER)}},"checklist enter":{key:Mn.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(hr){var _r=this.quill.getLine(hr.index),xr=dt(_r,2),wr=xr[0],Ir=xr[1],_i=(0,Ft.default)({},wr.formats(),{list:"checked"}),Br=new Ht.default().retain(hr.index).insert(`
`,_i).retain(wr.length()-Ir-1).retain(1,{list:"unchecked"});this.quill.updateContents(Br,on.default.sources.USER),this.quill.setSelection(hr.index+1,on.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Mn.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(hr,_r){var xr=this.quill.getLine(hr.index),wr=dt(xr,2),Ir=wr[0],_i=wr[1],Br=new Ht.default().retain(hr.index).insert(`
`,_r.format).retain(Ir.length()-_i-1).retain(1,{header:null});this.quill.updateContents(Br,on.default.sources.USER),this.quill.setSelection(hr.index+1,on.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(hr,_r){var xr=_r.prefix.length,wr=this.quill.getLine(hr.index),Ir=dt(wr,2),_i=Ir[0],Br=Ir[1];if(Br>xr)return!0;var Fr=void 0;switch(_r.prefix.trim()){case"[]":case"[ ]":Fr="unchecked";break;case"[x]":Fr="checked";break;case"-":case"*":Fr="bullet";break;default:Fr="ordered"}this.quill.insertText(hr.index," ",on.default.sources.USER),this.quill.history.cutoff();var cs=new Ht.default().retain(hr.index-Br).delete(xr+1).retain(_i.length()-2-Br).retain(1,{list:Fr});this.quill.updateContents(cs,on.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(hr.index-xr,on.default.sources.SILENT)}},"code exit":{key:Mn.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(hr){var _r=this.quill.getLine(hr.index),xr=dt(_r,2),wr=xr[0],Ir=xr[1],_i=new Ht.default().retain(hr.index+wr.length()-Ir-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(_i,on.default.sources.USER)}},"embed left":yn(Mn.keys.LEFT,!1),"embed left shift":yn(Mn.keys.LEFT,!0),"embed right":yn(Mn.keys.RIGHT,!1),"embed right shift":yn(Mn.keys.RIGHT,!0)}};function yn(rr,hr){var _r,xr=rr===Mn.keys.LEFT?"prefix":"suffix";return _r={key:rr,shiftKey:hr,altKey:null},bn(_r,xr,/^$/),bn(_r,"handler",function(Ir){var _i=Ir.index;rr===Mn.keys.RIGHT&&(_i+=Ir.length+1);var Br=this.quill.getLeaf(_i),Fr=dt(Br,1),cs=Fr[0];return cs instanceof en.default.Embed?(rr===Mn.keys.LEFT?hr?this.quill.setSelection(Ir.index-1,Ir.length+1,on.default.sources.USER):this.quill.setSelection(Ir.index-1,on.default.sources.USER):hr?this.quill.setSelection(Ir.index,Ir.length+1,on.default.sources.USER):this.quill.setSelection(Ir.index+Ir.length+1,on.default.sources.USER),!1):!0}),_r}function vn(rr,hr){if(!(rr.index===0||this.quill.getLength()<=1)){var _r=this.quill.getLine(rr.index),xr=dt(_r,1),wr=xr[0],Ir={};if(hr.offset===0){var _i=this.quill.getLine(rr.index-1),Br=dt(_i,1),Fr=Br[0];if(Fr!=null&&Fr.length()>1){var cs=wr.formats(),Cs=this.quill.getFormat(rr.index-1,1);Ir=zt.default.attributes.diff(cs,Cs)||{}}}var Ts=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(hr.prefix)?2:1;this.quill.deleteText(rr.index-Ts,Ts,on.default.sources.USER),Object.keys(Ir).length>0&&this.quill.formatLine(rr.index-Ts,Ts,Ir,on.default.sources.USER),this.quill.focus()}}function On(rr,hr){var _r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(hr.suffix)?2:1;if(!(rr.index>=this.quill.getLength()-_r)){var xr={},wr=0,Ir=this.quill.getLine(rr.index),_i=dt(Ir,1),Br=_i[0];if(hr.offset>=Br.length()-1){var Fr=this.quill.getLine(rr.index+1),cs=dt(Fr,1),Cs=cs[0];if(Cs){var Ts=Br.formats(),Rr=this.quill.getFormat(rr.index,1);xr=zt.default.attributes.diff(Ts,Rr)||{},wr=Cs.length()}}this.quill.deleteText(rr.index,_r,on.default.sources.USER),Object.keys(xr).length>0&&this.quill.formatLine(rr.index+wr-1,_r,xr,on.default.sources.USER)}}function Cn(rr){var hr=this.quill.getLines(rr),_r={};if(hr.length>1){var xr=hr[0].formats(),wr=hr[hr.length-1].formats();_r=zt.default.attributes.diff(wr,xr)||{}}this.quill.deleteText(rr,on.default.sources.USER),Object.keys(_r).length>0&&this.quill.formatLine(rr.index,1,_r,on.default.sources.USER),this.quill.setSelection(rr.index,on.default.sources.SILENT),this.quill.focus()}function Vn(rr,hr){var _r=this;rr.length>0&&this.quill.scroll.deleteAt(rr.index,rr.length);var xr=Object.keys(hr.format).reduce(function(wr,Ir){return en.default.query(Ir,en.default.Scope.BLOCK)&&!Array.isArray(hr.format[Ir])&&(wr[Ir]=hr.format[Ir]),wr},{});this.quill.insertText(rr.index,`
`,xr,on.default.sources.USER),this.quill.setSelection(rr.index+1,on.default.sources.SILENT),this.quill.focus(),Object.keys(hr.format).forEach(function(wr){xr[wr]==null&&(Array.isArray(hr.format[wr])||wr!=="link"&&_r.quill.format(wr,hr.format[wr],on.default.sources.USER))})}function Qn(rr){return{key:Mn.keys.TAB,shiftKey:!rr,format:{"code-block":!0},handler:function(_r){var xr=en.default.query("code-block"),wr=_r.index,Ir=_r.length,_i=this.quill.scroll.descendant(xr,wr),Br=dt(_i,2),Fr=Br[0],cs=Br[1];if(Fr!=null){var Cs=this.quill.getIndex(Fr),Ts=Fr.newlineIndex(cs,!0)+1,Rr=Fr.newlineIndex(Cs+cs+Ir),Lr=Fr.domNode.textContent.slice(Ts,Rr).split(`
`);cs=0,Lr.forEach(function(Gr,zr){rr?(Fr.insertAt(Ts+cs,xr.TAB),cs+=xr.TAB.length,zr===0?wr+=xr.TAB.length:Ir+=xr.TAB.length):Gr.startsWith(xr.TAB)&&(Fr.deleteAt(Ts+cs,xr.TAB.length),cs-=xr.TAB.length,zr===0?wr-=xr.TAB.length:Ir-=xr.TAB.length),cs+=Gr.length+1}),this.quill.update(on.default.sources.USER),this.quill.setSelection(wr,Ir,on.default.sources.SILENT)}}}}function ir(rr){return{key:rr[0].toUpperCase(),shortKey:!0,handler:function(_r,xr){this.quill.format(rr,!xr.format[rr],on.default.sources.USER)}}}function ar(rr){if(typeof rr=="string"||typeof rr=="number")return ar({key:rr});if((typeof rr>"u"?"undefined":ct(rr))==="object"&&(rr=(0,kt.default)(rr,!1)),typeof rr.key=="string")if(Mn.keys[rr.key.toUpperCase()]!=null)rr.key=Mn.keys[rr.key.toUpperCase()];else if(rr.key.length===1)rr.key=rr.key.toUpperCase().charCodeAt(0);else return null;return rr.shortKey&&(rr[gn]=rr.shortKey,delete rr.shortKey),rr}ot.default=Mn,ot.SHORTKEY=gn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function zt(Kt,en){var tn=[],on=!0,an=!1,un=void 0;try{for(var dn=Kt[Symbol.iterator](),Sn;!(on=(Sn=dn.next()).done)&&(tn.push(Sn.value),!(en&&tn.length===en));on=!0);}catch(mn){an=!0,un=mn}finally{try{!on&&dn.return&&dn.return()}finally{if(an)throw un}}return tn}return function(Kt,en){if(Array.isArray(Kt))return Kt;if(Symbol.iterator in Object(Kt))return zt(Kt,en);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function zt(Kt,en,tn){Kt===null&&(Kt=Function.prototype);var on=Object.getOwnPropertyDescriptor(Kt,en);if(on===void 0){var an=Object.getPrototypeOf(Kt);return an===null?void 0:zt(an,en,tn)}else{if("value"in on)return on.value;var un=on.get;return un===void 0?void 0:un.call(tn)}},ft=function(){function zt(Kt,en){for(var tn=0;tn<en.length;tn++){var on=en[tn];on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(Kt,on.key,on)}}return function(Kt,en,tn){return en&&zt(Kt.prototype,en),tn&&zt(Kt,tn),Kt}}(),St=ut(0),kt=jt(St),Tt=ut(7),Rt=jt(Tt);function jt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Ft(zt,Kt){if(!(zt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Bt(zt,Kt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:zt}function Ht(zt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);zt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Kt):zt.__proto__=Kt)}var Yt=function(zt){Ht(Kt,zt),ft(Kt,null,[{key:"value",value:function(){}}]);function Kt(en,tn){Ft(this,Kt);var on=Bt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,en));return on.selection=tn,on.textNode=document.createTextNode(Kt.CONTENTS),on.domNode.appendChild(on.textNode),on._length=0,on}return ft(Kt,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(tn,on){if(this._length!==0)return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"format",this).call(this,tn,on);for(var an=this,un=0;an!=null&&an.statics.scope!==kt.default.Scope.BLOCK_BLOT;)un+=an.offset(an.parent),an=an.parent;an!=null&&(this._length=Kt.CONTENTS.length,an.optimize(),an.formatAt(un,Kt.CONTENTS.length,tn,on),this._length=0)}},{key:"index",value:function(tn,on){return tn===this.textNode?0:dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"index",this).call(this,tn,on)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var tn=this.textNode,on=this.selection.getNativeRange(),an=void 0,un=void 0,dn=void 0;if(on!=null&&on.start.node===tn&&on.end.node===tn){var Sn=[tn,on.start.offset,on.end.offset];an=Sn[0],un=Sn[1],dn=Sn[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Kt.CONTENTS){var mn=this.textNode.data.split(Kt.CONTENTS).join("");this.next instanceof Rt.default?(an=this.next.domNode,this.next.insertAt(0,mn),this.textNode.data=Kt.CONTENTS):(this.textNode.data=mn,this.parent.insertBefore(kt.default.create(this.textNode),this),this.textNode=document.createTextNode(Kt.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),un!=null){var bn=[un,dn].map(function(kn){return Math.max(0,Math.min(an.data.length,kn-1))}),En=ct(bn,2);return un=En[0],dn=En[1],{startNode:an,startOffset:un,endNode:an,endOffset:dn}}}}},{key:"update",value:function(tn,on){var an=this;if(tn.some(function(dn){return dn.type==="characterData"&&dn.target===an.textNode})){var un=this.restore();un&&(on.range=un)}}},{key:"value",value:function(){return""}}]),Kt}(kt.default.Embed);Yt.blotName="cursor",Yt.className="ql-cursor",Yt.tagName="span",Yt.CONTENTS="\uFEFF",ot.default=Yt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=kt(ct),ft=ut(4),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return Ht}(dt.default.Container);Ft.allowedChildren=[St.default,ft.BlockEmbed,Ft],ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.ColorStyle=ot.ColorClass=ot.ColorAttributor=void 0;var ct=function(){function Yt(zt,Kt){for(var en=0;en<Kt.length;en++){var tn=Kt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(zt,tn.key,tn)}}return function(zt,Kt,en){return Kt&&Yt(zt.prototype,Kt),en&&Yt(zt,en),zt}}(),dt=function Yt(zt,Kt,en){zt===null&&(zt=Function.prototype);var tn=Object.getOwnPropertyDescriptor(zt,Kt);if(tn===void 0){var on=Object.getPrototypeOf(zt);return on===null?void 0:Yt(on,Kt,en)}else{if("value"in tn)return tn.value;var an=tn.get;return an===void 0?void 0:an.call(en)}},ft=ut(0),St=kt(ft);function kt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function Tt(Yt,zt){if(!(Yt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Yt,zt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Yt}function jt(Yt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Yt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,zt):Yt.__proto__=zt)}var Ft=function(Yt){jt(zt,Yt);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"value",value:function(en){var tn=dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"value",this).call(this,en);return tn.startsWith("rgb(")?(tn=tn.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+tn.split(",").map(function(on){return("00"+parseInt(on).toString(16)).slice(-2)}).join("")):tn}}]),zt}(St.default.Attributor.Style),Bt=new St.default.Attributor.Class("color","ql-color",{scope:St.default.Scope.INLINE}),Ht=new Ft("color","color",{scope:St.default.Scope.INLINE});ot.ColorAttributor=Ft,ot.ColorClass=Bt,ot.ColorStyle=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.sanitize=ot.default=void 0;var ct=function(){function Ht(Yt,zt){for(var Kt=0;Kt<zt.length;Kt++){var en=zt[Kt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Yt,en.key,en)}}return function(Yt,zt,Kt){return zt&&Ht(Yt.prototype,zt),Kt&&Ht(Yt,Kt),Yt}}(),dt=function Ht(Yt,zt,Kt){Yt===null&&(Yt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Yt,zt);if(en===void 0){var tn=Object.getPrototypeOf(Yt);return tn===null?void 0:Ht(tn,zt,Kt)}else{if("value"in en)return en.value;var on=en.get;return on===void 0?void 0:on.call(Kt)}},ft=ut(6),St=kt(ft);function kt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Tt(Ht,Yt){if(!(Ht instanceof Yt))throw new TypeError("Cannot call a class as a function")}function Rt(Ht,Yt){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt&&(typeof Yt=="object"||typeof Yt=="function")?Yt:Ht}function jt(Ht,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Yt);Ht.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Yt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Yt):Ht.__proto__=Yt)}var Ft=function(Ht){jt(Yt,Ht);function Yt(){return Tt(this,Yt),Rt(this,(Yt.__proto__||Object.getPrototypeOf(Yt)).apply(this,arguments))}return ct(Yt,[{key:"format",value:function(Kt,en){if(Kt!==this.statics.blotName||!en)return dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"format",this).call(this,Kt,en);en=this.constructor.sanitize(en),this.domNode.setAttribute("href",en)}}],[{key:"create",value:function(Kt){var en=dt(Yt.__proto__||Object.getPrototypeOf(Yt),"create",this).call(this,Kt);return Kt=this.sanitize(Kt),en.setAttribute("href",Kt),en.setAttribute("rel","noopener noreferrer"),en.setAttribute("target","_blank"),en}},{key:"formats",value:function(Kt){return Kt.getAttribute("href")}},{key:"sanitize",value:function(Kt){return Bt(Kt,this.PROTOCOL_WHITELIST)?Kt:this.SANITIZED_URL}}]),Yt}(St.default);Ft.blotName="link",Ft.tagName="A",Ft.SANITIZED_URL="about:blank",Ft.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Bt(Ht,Yt){var zt=document.createElement("a");zt.href=Ht;var Kt=zt.href.slice(0,zt.href.indexOf(":"));return Yt.indexOf(Kt)>-1}ot.default=Ft,ot.sanitize=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Yt){return typeof Yt}:function(Yt){return Yt&&typeof Symbol=="function"&&Yt.constructor===Symbol&&Yt!==Symbol.prototype?"symbol":typeof Yt},dt=function(){function Yt(zt,Kt){for(var en=0;en<Kt.length;en++){var tn=Kt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(zt,tn.key,tn)}}return function(zt,Kt,en){return Kt&&Yt(zt.prototype,Kt),en&&Yt(zt,en),zt}}(),ft=ut(23),St=Rt(ft),kt=ut(107),Tt=Rt(kt);function Rt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function jt(Yt,zt){if(!(Yt instanceof zt))throw new TypeError("Cannot call a class as a function")}var Ft=0;function Bt(Yt,zt){Yt.setAttribute(zt,Yt.getAttribute(zt)!=="true")}var Ht=function(){function Yt(zt){var Kt=this;jt(this,Yt),this.select=zt,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Kt.togglePicker()}),this.label.addEventListener("keydown",function(en){switch(en.keyCode){case St.default.keys.ENTER:Kt.togglePicker();break;case St.default.keys.ESCAPE:Kt.escape(),en.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return dt(Yt,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),Bt(this.label,"aria-expanded"),Bt(this.options,"aria-hidden")}},{key:"buildItem",value:function(Kt){var en=this,tn=document.createElement("span");return tn.tabIndex="0",tn.setAttribute("role","button"),tn.classList.add("ql-picker-item"),Kt.hasAttribute("value")&&tn.setAttribute("data-value",Kt.getAttribute("value")),Kt.textContent&&tn.setAttribute("data-label",Kt.textContent),tn.addEventListener("click",function(){en.selectItem(tn,!0)}),tn.addEventListener("keydown",function(on){switch(on.keyCode){case St.default.keys.ENTER:en.selectItem(tn,!0),on.preventDefault();break;case St.default.keys.ESCAPE:en.escape(),on.preventDefault();break}}),tn}},{key:"buildLabel",value:function(){var Kt=document.createElement("span");return Kt.classList.add("ql-picker-label"),Kt.innerHTML=Tt.default,Kt.tabIndex="0",Kt.setAttribute("role","button"),Kt.setAttribute("aria-expanded","false"),this.container.appendChild(Kt),Kt}},{key:"buildOptions",value:function(){var Kt=this,en=document.createElement("span");en.classList.add("ql-picker-options"),en.setAttribute("aria-hidden","true"),en.tabIndex="-1",en.id="ql-picker-options-"+Ft,Ft+=1,this.label.setAttribute("aria-controls",en.id),this.options=en,[].slice.call(this.select.options).forEach(function(tn){var on=Kt.buildItem(tn);en.appendChild(on),tn.selected===!0&&Kt.selectItem(on)}),this.container.appendChild(en)}},{key:"buildPicker",value:function(){var Kt=this;[].slice.call(this.select.attributes).forEach(function(en){Kt.container.setAttribute(en.name,en.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Kt=this;this.close(),setTimeout(function(){return Kt.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Kt){var en=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,tn=this.container.querySelector(".ql-selected");if(Kt!==tn&&(tn!=null&&tn.classList.remove("ql-selected"),Kt!=null&&(Kt.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Kt.parentNode.children,Kt),Kt.hasAttribute("data-value")?this.label.setAttribute("data-value",Kt.getAttribute("data-value")):this.label.removeAttribute("data-value"),Kt.hasAttribute("data-label")?this.label.setAttribute("data-label",Kt.getAttribute("data-label")):this.label.removeAttribute("data-label"),en))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ct(Event))==="object"){var on=document.createEvent("Event");on.initEvent("change",!0,!0),this.select.dispatchEvent(on)}this.close()}}},{key:"update",value:function(){var Kt=void 0;if(this.select.selectedIndex>-1){var en=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Kt=this.select.options[this.select.selectedIndex],this.selectItem(en)}else this.selectItem(null);var tn=Kt!=null&&Kt!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",tn)}}]),Yt}();ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=Ln(ct),ft=ut(5),St=Ln(ft),kt=ut(4),Tt=Ln(kt),Rt=ut(16),jt=Ln(Rt),Ft=ut(25),Bt=Ln(Ft),Ht=ut(24),Yt=Ln(Ht),zt=ut(35),Kt=Ln(zt),en=ut(6),tn=Ln(en),on=ut(22),an=Ln(on),un=ut(7),dn=Ln(un),Sn=ut(55),mn=Ln(Sn),bn=ut(42),En=Ln(bn),kn=ut(23),Pn=Ln(kn);function Ln(gn){return gn&&gn.__esModule?gn:{default:gn}}St.default.register({"blots/block":Tt.default,"blots/block/embed":kt.BlockEmbed,"blots/break":jt.default,"blots/container":Bt.default,"blots/cursor":Yt.default,"blots/embed":Kt.default,"blots/inline":tn.default,"blots/scroll":an.default,"blots/text":dn.default,"modules/clipboard":mn.default,"modules/history":En.default,"modules/keyboard":Pn.default}),dt.default.register(Tt.default,jt.default,Yt.default,tn.default,an.default,dn.default),ot.default=St.default},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(1),dt=function(){function ft(St){this.domNode=St,this.domNode[ct.DATA_KEY]={blot:this}}return Object.defineProperty(ft.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ft.create=function(St){if(this.tagName==null)throw new ct.ParchmentError("Blot definition missing tagName");var kt;return Array.isArray(this.tagName)?(typeof St=="string"&&(St=St.toUpperCase(),parseInt(St).toString()===St&&(St=parseInt(St))),typeof St=="number"?kt=document.createElement(this.tagName[St-1]):this.tagName.indexOf(St)>-1?kt=document.createElement(St):kt=document.createElement(this.tagName[0])):kt=document.createElement(this.tagName),this.className&&kt.classList.add(this.className),kt},ft.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},ft.prototype.clone=function(){var St=this.domNode.cloneNode(!1);return ct.create(St)},ft.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ct.DATA_KEY]},ft.prototype.deleteAt=function(St,kt){var Tt=this.isolate(St,kt);Tt.remove()},ft.prototype.formatAt=function(St,kt,Tt,Rt){var jt=this.isolate(St,kt);if(ct.query(Tt,ct.Scope.BLOT)!=null&&Rt)jt.wrap(Tt,Rt);else if(ct.query(Tt,ct.Scope.ATTRIBUTE)!=null){var Ft=ct.create(this.statics.scope);jt.wrap(Ft),Ft.format(Tt,Rt)}},ft.prototype.insertAt=function(St,kt,Tt){var Rt=Tt==null?ct.create("text",kt):ct.create(kt,Tt),jt=this.split(St);this.parent.insertBefore(Rt,jt)},ft.prototype.insertInto=function(St,kt){kt===void 0&&(kt=null),this.parent!=null&&this.parent.children.remove(this);var Tt=null;St.children.insertBefore(this,kt),kt!=null&&(Tt=kt.domNode),(this.domNode.parentNode!=St.domNode||this.domNode.nextSibling!=Tt)&&St.domNode.insertBefore(this.domNode,Tt),this.parent=St,this.attach()},ft.prototype.isolate=function(St,kt){var Tt=this.split(St);return Tt.split(kt),Tt},ft.prototype.length=function(){return 1},ft.prototype.offset=function(St){return St===void 0&&(St=this.parent),this.parent==null||this==St?0:this.parent.children.offset(this)+this.parent.offset(St)},ft.prototype.optimize=function(St){this.domNode[ct.DATA_KEY]!=null&&delete this.domNode[ct.DATA_KEY].mutations},ft.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ft.prototype.replace=function(St){St.parent!=null&&(St.parent.insertBefore(this,St.next),St.remove())},ft.prototype.replaceWith=function(St,kt){var Tt=typeof St=="string"?ct.create(St,kt):St;return Tt.replace(this),Tt},ft.prototype.split=function(St,kt){return St===0?this:this.next},ft.prototype.update=function(St,kt){},ft.prototype.wrap=function(St,kt){var Tt=typeof St=="string"?ct.create(St,kt):St;return this.parent!=null&&this.parent.insertBefore(Tt,this.next),Tt.appendChild(this),Tt},ft.blotName="abstract",ft}();ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(12),dt=ut(32),ft=ut(33),St=ut(1),kt=function(){function Tt(Rt){this.attributes={},this.domNode=Rt,this.build()}return Tt.prototype.attribute=function(Rt,jt){jt?Rt.add(this.domNode,jt)&&(Rt.value(this.domNode)!=null?this.attributes[Rt.attrName]=Rt:delete this.attributes[Rt.attrName]):(Rt.remove(this.domNode),delete this.attributes[Rt.attrName])},Tt.prototype.build=function(){var Rt=this;this.attributes={};var jt=ct.default.keys(this.domNode),Ft=dt.default.keys(this.domNode),Bt=ft.default.keys(this.domNode);jt.concat(Ft).concat(Bt).forEach(function(Ht){var Yt=St.query(Ht,St.Scope.ATTRIBUTE);Yt instanceof ct.default&&(Rt.attributes[Yt.attrName]=Yt)})},Tt.prototype.copy=function(Rt){var jt=this;Object.keys(this.attributes).forEach(function(Ft){var Bt=jt.attributes[Ft].value(jt.domNode);Rt.format(Ft,Bt)})},Tt.prototype.move=function(Rt){var jt=this;this.copy(Rt),Object.keys(this.attributes).forEach(function(Ft){jt.attributes[Ft].remove(jt.domNode)}),this.attributes={}},Tt.prototype.values=function(){var Rt=this;return Object.keys(this.attributes).reduce(function(jt,Ft){return jt[Ft]=Rt.attributes[Ft].value(Rt.domNode),jt},{})},Tt}();ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12);function ft(kt,Tt){var Rt=kt.getAttribute("class")||"";return Rt.split(/\s+/).filter(function(jt){return jt.indexOf(Tt+"-")===0})}var St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("class")||"").split(/\s+/).map(function(jt){return jt.split("-").slice(0,-1).join("-")})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(this.remove(Rt),Rt.classList.add(this.keyName+"-"+jt),!0):!1},Tt.prototype.remove=function(Rt){var jt=ft(Rt,this.keyName);jt.forEach(function(Ft){Rt.classList.remove(Ft)}),Rt.classList.length===0&&Rt.removeAttribute("class")},Tt.prototype.value=function(Rt){var jt=ft(Rt,this.keyName)[0]||"",Ft=jt.slice(this.keyName.length+1);return this.canAdd(Rt,Ft)?Ft:""},Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12);function ft(kt){var Tt=kt.split("-"),Rt=Tt.slice(1).map(function(jt){return jt[0].toUpperCase()+jt.slice(1)}).join("");return Tt[0]+Rt}var St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("style")||"").split(";").map(function(jt){var Ft=jt.split(":");return Ft[0].trim()})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(Rt.style[ft(this.keyName)]=jt,!0):!1},Tt.prototype.remove=function(Rt){Rt.style[ft(this.keyName)]="",Rt.getAttribute("style")||Rt.removeAttribute("style")},Tt.prototype.value=function(Rt){var jt=Rt.style[ft(this.keyName)];return this.canAdd(Rt,jt)?jt:""},Tt}(dt.default);ot.default=St},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){dt(this,St),this.quill=kt,this.options=Tt,this.modules={}}return ct(St,[{key:"init",value:function(){var Tt=this;Object.keys(this.options.modules).forEach(function(Rt){Tt.modules[Rt]==null&&Tt.addModule(Rt)})}},{key:"addModule",value:function(Tt){var Rt=this.quill.constructor.import("modules/"+Tt);return this.modules[Tt]=new Rt(this.quill,this.options.modules[Tt]||{}),this.modules[Tt]}}]),St}();ft.DEFAULTS={modules:{}},ft.themes={default:ft},ot.default=ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function zt(Kt,en){for(var tn=0;tn<en.length;tn++){var on=en[tn];on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(Kt,on.key,on)}}return function(Kt,en,tn){return en&&zt(Kt.prototype,en),tn&&zt(Kt,tn),Kt}}(),dt=function zt(Kt,en,tn){Kt===null&&(Kt=Function.prototype);var on=Object.getOwnPropertyDescriptor(Kt,en);if(on===void 0){var an=Object.getPrototypeOf(Kt);return an===null?void 0:zt(an,en,tn)}else{if("value"in on)return on.value;var un=on.get;return un===void 0?void 0:un.call(tn)}},ft=ut(0),St=Rt(ft),kt=ut(7),Tt=Rt(kt);function Rt(zt){return zt&&zt.__esModule?zt:{default:zt}}function jt(zt,Kt){if(!(zt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Ft(zt,Kt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:zt}function Bt(zt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);zt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Kt):zt.__proto__=Kt)}var Ht="\uFEFF",Yt=function(zt){Bt(Kt,zt);function Kt(en){jt(this,Kt);var tn=Ft(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,en));return tn.contentNode=document.createElement("span"),tn.contentNode.setAttribute("contenteditable",!1),[].slice.call(tn.domNode.childNodes).forEach(function(on){tn.contentNode.appendChild(on)}),tn.leftGuard=document.createTextNode(Ht),tn.rightGuard=document.createTextNode(Ht),tn.domNode.appendChild(tn.leftGuard),tn.domNode.appendChild(tn.contentNode),tn.domNode.appendChild(tn.rightGuard),tn}return ct(Kt,[{key:"index",value:function(tn,on){return tn===this.leftGuard?0:tn===this.rightGuard?1:dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"index",this).call(this,tn,on)}},{key:"restore",value:function(tn){var on=void 0,an=void 0,un=tn.data.split(Ht).join("");if(tn===this.leftGuard)if(this.prev instanceof Tt.default){var dn=this.prev.length();this.prev.insertAt(dn,un),on={startNode:this.prev.domNode,startOffset:dn+un.length}}else an=document.createTextNode(un),this.parent.insertBefore(St.default.create(an),this),on={startNode:an,startOffset:un.length};else tn===this.rightGuard&&(this.next instanceof Tt.default?(this.next.insertAt(0,un),on={startNode:this.next.domNode,startOffset:un.length}):(an=document.createTextNode(un),this.parent.insertBefore(St.default.create(an),this.next),on={startNode:an,startOffset:un.length}));return tn.data=Ht,on}},{key:"update",value:function(tn,on){var an=this;tn.forEach(function(un){if(un.type==="characterData"&&(un.target===an.leftGuard||un.target===an.rightGuard)){var dn=an.restore(un.target);dn&&(on.range=dn)}})}}]),Kt}(St.default.Embed);ot.default=Yt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.AlignStyle=ot.AlignClass=ot.AlignAttribute=void 0;var ct=ut(0),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["right","center","justify"]},kt=new dt.default.Attributor.Attribute("align","align",St),Tt=new dt.default.Attributor.Class("align","ql-align",St),Rt=new dt.default.Attributor.Style("align","text-align",St);ot.AlignAttribute=kt,ot.AlignClass=Tt,ot.AlignStyle=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.BackgroundStyle=ot.BackgroundClass=void 0;var ct=ut(0),dt=St(ct),ft=ut(26);function St(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var kt=new dt.default.Attributor.Class("background","ql-bg",{scope:dt.default.Scope.INLINE}),Tt=new ft.ColorAttributor("background","background-color",{scope:dt.default.Scope.INLINE});ot.BackgroundClass=kt,ot.BackgroundStyle=Tt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DirectionStyle=ot.DirectionClass=ot.DirectionAttribute=void 0;var ct=ut(0),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["rtl"]},kt=new dt.default.Attributor.Attribute("direction","dir",St),Tt=new dt.default.Attributor.Class("direction","ql-direction",St),Rt=new dt.default.Attributor.Style("direction","direction",St);ot.DirectionAttribute=kt,ot.DirectionClass=Tt,ot.DirectionStyle=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.FontClass=ot.FontStyle=void 0;var ct=function(){function zt(Kt,en){for(var tn=0;tn<en.length;tn++){var on=en[tn];on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(Kt,on.key,on)}}return function(Kt,en,tn){return en&&zt(Kt.prototype,en),tn&&zt(Kt,tn),Kt}}(),dt=function zt(Kt,en,tn){Kt===null&&(Kt=Function.prototype);var on=Object.getOwnPropertyDescriptor(Kt,en);if(on===void 0){var an=Object.getPrototypeOf(Kt);return an===null?void 0:zt(an,en,tn)}else{if("value"in on)return on.value;var un=on.get;return un===void 0?void 0:un.call(tn)}},ft=ut(0),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Kt){if(!(zt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Rt(zt,Kt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:zt}function jt(zt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);zt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Kt):zt.__proto__=Kt)}var Ft={scope:St.default.Scope.INLINE,whitelist:["serif","monospace"]},Bt=new St.default.Attributor.Class("font","ql-font",Ft),Ht=function(zt){jt(Kt,zt);function Kt(){return Tt(this,Kt),Rt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ct(Kt,[{key:"value",value:function(tn){return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"value",this).call(this,tn).replace(/["']/g,"")}}]),Kt}(St.default.Attributor.Style),Yt=new Ht("font","font-family",Ft);ot.FontStyle=Yt,ot.FontClass=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SizeStyle=ot.SizeClass=void 0;var ct=ut(0),dt=ft(ct);function ft(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}}var St=new dt.default.Attributor.Class("size","ql-size",{scope:dt.default.Scope.INLINE,whitelist:["small","large","huge"]}),kt=new dt.default.Attributor.Style("size","font-size",{scope:dt.default.Scope.INLINE,whitelist:["10px","18px","32px"]});ot.SizeClass=St,ot.SizeStyle=kt},function(et,ot,ut){et.exports={align:{"":ut(76),center:ut(77),right:ut(78),justify:ut(79)},background:ut(80),blockquote:ut(81),bold:ut(82),clean:ut(83),code:ut(58),"code-block":ut(58),color:ut(84),direction:{"":ut(85),rtl:ut(86)},float:{center:ut(87),full:ut(88),left:ut(89),right:ut(90)},formula:ut(91),header:{1:ut(92),2:ut(93)},italic:ut(94),image:ut(95),indent:{"+1":ut(96),"-1":ut(97)},link:ut(98),list:{ordered:ut(99),bullet:ut(100),check:ut(101)},script:{sub:ut(102),super:ut(103)},strike:ut(104),underline:ut(105),video:ut(106)}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.getLastChangeIndex=ot.default=void 0;var ct=function(){function en(tn,on){for(var an=0;an<on.length;an++){var un=on[an];un.enumerable=un.enumerable||!1,un.configurable=!0,"value"in un&&(un.writable=!0),Object.defineProperty(tn,un.key,un)}}return function(tn,on,an){return on&&en(tn.prototype,on),an&&en(tn,an),tn}}(),dt=ut(0),ft=jt(dt),St=ut(5),kt=jt(St),Tt=ut(9),Rt=jt(Tt);function jt(en){return en&&en.__esModule?en:{default:en}}function Ft(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}function Bt(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&(typeof tn=="object"||typeof tn=="function")?tn:en}function Ht(en,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}var Yt=function(en){Ht(tn,en);function tn(on,an){Ft(this,tn);var un=Bt(this,(tn.__proto__||Object.getPrototypeOf(tn)).call(this,on,an));return un.lastRecorded=0,un.ignoreChange=!1,un.clear(),un.quill.on(kt.default.events.EDITOR_CHANGE,function(dn,Sn,mn,bn){dn!==kt.default.events.TEXT_CHANGE||un.ignoreChange||(!un.options.userOnly||bn===kt.default.sources.USER?un.record(Sn,mn):un.transform(Sn))}),un.quill.keyboard.addBinding({key:"Z",shortKey:!0},un.undo.bind(un)),un.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},un.redo.bind(un)),/Win/i.test(navigator.platform)&&un.quill.keyboard.addBinding({key:"Y",shortKey:!0},un.redo.bind(un)),un}return ct(tn,[{key:"change",value:function(an,un){if(this.stack[an].length!==0){var dn=this.stack[an].pop();this.stack[un].push(dn),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(dn[an],kt.default.sources.USER),this.ignoreChange=!1;var Sn=Kt(dn[an]);this.quill.setSelection(Sn)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(an,un){if(an.ops.length!==0){this.stack.redo=[];var dn=this.quill.getContents().diff(un),Sn=Date.now();if(this.lastRecorded+this.options.delay>Sn&&this.stack.undo.length>0){var mn=this.stack.undo.pop();dn=dn.compose(mn.undo),an=mn.redo.compose(an)}else this.lastRecorded=Sn;this.stack.undo.push({redo:an,undo:dn}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(an){this.stack.undo.forEach(function(un){un.undo=an.transform(un.undo,!0),un.redo=an.transform(un.redo,!0)}),this.stack.redo.forEach(function(un){un.undo=an.transform(un.undo,!0),un.redo=an.transform(un.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),tn}(Rt.default);Yt.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function zt(en){var tn=en.ops[en.ops.length-1];return tn==null?!1:tn.insert!=null?typeof tn.insert=="string"&&tn.insert.endsWith(`
`):tn.attributes!=null?Object.keys(tn.attributes).some(function(on){return ft.default.query(on,ft.default.Scope.BLOCK)!=null}):!1}function Kt(en){var tn=en.reduce(function(an,un){return an+=un.delete||0,an},0),on=en.length()-tn;return zt(en)&&(on-=1),on}ot.default=Yt,ot.getLastChangeIndex=Kt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BaseTooltip=void 0;var ct=function(){function Vn(Qn,ir){for(var ar=0;ar<ir.length;ar++){var rr=ir[ar];rr.enumerable=rr.enumerable||!1,rr.configurable=!0,"value"in rr&&(rr.writable=!0),Object.defineProperty(Qn,rr.key,rr)}}return function(Qn,ir,ar){return ir&&Vn(Qn.prototype,ir),ar&&Vn(Qn,ar),Qn}}(),dt=function Vn(Qn,ir,ar){Qn===null&&(Qn=Function.prototype);var rr=Object.getOwnPropertyDescriptor(Qn,ir);if(rr===void 0){var hr=Object.getPrototypeOf(Qn);return hr===null?void 0:Vn(hr,ir,ar)}else{if("value"in rr)return rr.value;var _r=rr.get;return _r===void 0?void 0:_r.call(ar)}},ft=ut(3),St=Sn(ft),kt=ut(2),Tt=Sn(kt),Rt=ut(8),jt=Sn(Rt),Ft=ut(23),Bt=Sn(Ft),Ht=ut(34),Yt=Sn(Ht),zt=ut(59),Kt=Sn(zt),en=ut(60),tn=Sn(en),on=ut(28),an=Sn(on),un=ut(61),dn=Sn(un);function Sn(Vn){return Vn&&Vn.__esModule?Vn:{default:Vn}}function mn(Vn,Qn){if(!(Vn instanceof Qn))throw new TypeError("Cannot call a class as a function")}function bn(Vn,Qn){if(!Vn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qn&&(typeof Qn=="object"||typeof Qn=="function")?Qn:Vn}function En(Vn,Qn){if(typeof Qn!="function"&&Qn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Qn);Vn.prototype=Object.create(Qn&&Qn.prototype,{constructor:{value:Vn,enumerable:!1,writable:!0,configurable:!0}}),Qn&&(Object.setPrototypeOf?Object.setPrototypeOf(Vn,Qn):Vn.__proto__=Qn)}var kn=[!1,"center","right","justify"],Pn=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ln=[!1,"serif","monospace"],gn=["1","2","3",!1],Mn=["small",!1,"large","huge"],yn=function(Vn){En(Qn,Vn);function Qn(ir,ar){mn(this,Qn);var rr=bn(this,(Qn.__proto__||Object.getPrototypeOf(Qn)).call(this,ir,ar)),hr=function _r(xr){if(!document.body.contains(ir.root))return document.body.removeEventListener("click",_r);rr.tooltip!=null&&!rr.tooltip.root.contains(xr.target)&&document.activeElement!==rr.tooltip.textbox&&!rr.quill.hasFocus()&&rr.tooltip.hide(),rr.pickers!=null&&rr.pickers.forEach(function(wr){wr.container.contains(xr.target)||wr.close()})};return ir.emitter.listenDOM("click",document.body,hr),rr}return ct(Qn,[{key:"addModule",value:function(ar){var rr=dt(Qn.prototype.__proto__||Object.getPrototypeOf(Qn.prototype),"addModule",this).call(this,ar);return ar==="toolbar"&&this.extendToolbar(rr),rr}},{key:"buildButtons",value:function(ar,rr){ar.forEach(function(hr){var _r=hr.getAttribute("class")||"";_r.split(/\s+/).forEach(function(xr){if(xr.startsWith("ql-")&&(xr=xr.slice(3),rr[xr]!=null))if(xr==="direction")hr.innerHTML=rr[xr][""]+rr[xr].rtl;else if(typeof rr[xr]=="string")hr.innerHTML=rr[xr];else{var wr=hr.value||"";wr!=null&&rr[xr][wr]&&(hr.innerHTML=rr[xr][wr])}})})}},{key:"buildPickers",value:function(ar,rr){var hr=this;this.pickers=ar.map(function(xr){if(xr.classList.contains("ql-align"))return xr.querySelector("option")==null&&Cn(xr,kn),new tn.default(xr,rr.align);if(xr.classList.contains("ql-background")||xr.classList.contains("ql-color")){var wr=xr.classList.contains("ql-background")?"background":"color";return xr.querySelector("option")==null&&Cn(xr,Pn,wr==="background"?"#ffffff":"#000000"),new Kt.default(xr,rr[wr])}else return xr.querySelector("option")==null&&(xr.classList.contains("ql-font")?Cn(xr,Ln):xr.classList.contains("ql-header")?Cn(xr,gn):xr.classList.contains("ql-size")&&Cn(xr,Mn)),new an.default(xr)});var _r=function(){hr.pickers.forEach(function(wr){wr.update()})};this.quill.on(jt.default.events.EDITOR_CHANGE,_r)}}]),Qn}(Yt.default);yn.DEFAULTS=(0,St.default)(!0,{},Yt.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var Qn=this,ir=this.container.querySelector("input.ql-image[type=file]");ir==null&&(ir=document.createElement("input"),ir.setAttribute("type","file"),ir.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ir.classList.add("ql-image"),ir.addEventListener("change",function(){if(ir.files!=null&&ir.files[0]!=null){var ar=new FileReader;ar.onload=function(rr){var hr=Qn.quill.getSelection(!0);Qn.quill.updateContents(new Tt.default().retain(hr.index).delete(hr.length).insert({image:rr.target.result}),jt.default.sources.USER),Qn.quill.setSelection(hr.index+1,jt.default.sources.SILENT),ir.value=""},ar.readAsDataURL(ir.files[0])}}),this.container.appendChild(ir)),ir.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var vn=function(Vn){En(Qn,Vn);function Qn(ir,ar){mn(this,Qn);var rr=bn(this,(Qn.__proto__||Object.getPrototypeOf(Qn)).call(this,ir,ar));return rr.textbox=rr.root.querySelector('input[type="text"]'),rr.listen(),rr}return ct(Qn,[{key:"listen",value:function(){var ar=this;this.textbox.addEventListener("keydown",function(rr){Bt.default.match(rr,"enter")?(ar.save(),rr.preventDefault()):Bt.default.match(rr,"escape")&&(ar.cancel(),rr.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ar=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),rr!=null?this.textbox.value=rr:ar!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ar)||""),this.root.setAttribute("data-mode",ar)}},{key:"restoreFocus",value:function(){var ar=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ar}},{key:"save",value:function(){var ar=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var rr=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ar,jt.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ar,jt.default.sources.USER)),this.quill.root.scrollTop=rr;break}case"video":ar=On(ar);case"formula":{if(!ar)break;var hr=this.quill.getSelection(!0);if(hr!=null){var _r=hr.index+hr.length;this.quill.insertEmbed(_r,this.root.getAttribute("data-mode"),ar,jt.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(_r+1," ",jt.default.sources.USER),this.quill.setSelection(_r+2,jt.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),Qn}(dn.default);function On(Vn){var Qn=Vn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||Vn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Qn?(Qn[1]||"https")+"://www.youtube.com/embed/"+Qn[2]+"?showinfo=0":(Qn=Vn.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Qn[1]||"https")+"://player.vimeo.com/video/"+Qn[2]+"/":Vn}function Cn(Vn,Qn){var ir=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Qn.forEach(function(ar){var rr=document.createElement("option");ar===ir?rr.setAttribute("selected","selected"):rr.setAttribute("value",ar),Vn.appendChild(rr)})}ot.BaseTooltip=vn,ot.default=yn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function dt(){this.head=this.tail=null,this.length=0}return dt.prototype.append=function(){for(var ft=[],St=0;St<arguments.length;St++)ft[St]=arguments[St];this.insertBefore(ft[0],null),ft.length>1&&this.append.apply(this,ft.slice(1))},dt.prototype.contains=function(ft){for(var St,kt=this.iterator();St=kt();)if(St===ft)return!0;return!1},dt.prototype.insertBefore=function(ft,St){ft&&(ft.next=St,St!=null?(ft.prev=St.prev,St.prev!=null&&(St.prev.next=ft),St.prev=ft,St===this.head&&(this.head=ft)):this.tail!=null?(this.tail.next=ft,ft.prev=this.tail,this.tail=ft):(ft.prev=null,this.head=this.tail=ft),this.length+=1)},dt.prototype.offset=function(ft){for(var St=0,kt=this.head;kt!=null;){if(kt===ft)return St;St+=kt.length(),kt=kt.next}return-1},dt.prototype.remove=function(ft){this.contains(ft)&&(ft.prev!=null&&(ft.prev.next=ft.next),ft.next!=null&&(ft.next.prev=ft.prev),ft===this.head&&(this.head=ft.next),ft===this.tail&&(this.tail=ft.prev),this.length-=1)},dt.prototype.iterator=function(ft){return ft===void 0&&(ft=this.head),function(){var St=ft;return ft!=null&&(ft=ft.next),St}},dt.prototype.find=function(ft,St){St===void 0&&(St=!1);for(var kt,Tt=this.iterator();kt=Tt();){var Rt=kt.length();if(ft<Rt||St&&ft===Rt&&(kt.next==null||kt.next.length()!==0))return[kt,ft];ft-=Rt}return[null,0]},dt.prototype.forEach=function(ft){for(var St,kt=this.iterator();St=kt();)ft(St)},dt.prototype.forEachAt=function(ft,St,kt){if(!(St<=0))for(var Tt=this.find(ft),Rt=Tt[0],jt=Tt[1],Ft,Bt=ft-jt,Ht=this.iterator(Rt);(Ft=Ht())&&Bt<ft+St;){var Yt=Ft.length();ft>Bt?kt(Ft,ft-Bt,Math.min(St,Bt+Yt-ft)):kt(Ft,0,Math.min(Yt,ft+St-Bt)),Bt+=Yt}},dt.prototype.map=function(ft){return this.reduce(function(St,kt){return St.push(ft(kt)),St},[])},dt.prototype.reduce=function(ft,St){for(var kt,Tt=this.iterator();kt=Tt();)St=ft(St,kt);return St},dt}();ot.default=ct},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var Bt in Ft)Ft.hasOwnProperty(Bt)&&(jt[Bt]=Ft[Bt])};return function(jt,Ft){Rt(jt,Ft);function Bt(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):(Bt.prototype=Ft.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(17),ft=ut(1),St={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},kt=100,Tt=function(Rt){ct(jt,Rt);function jt(Ft){var Bt=Rt.call(this,Ft)||this;return Bt.scroll=Bt,Bt.observer=new MutationObserver(function(Ht){Bt.update(Ht)}),Bt.observer.observe(Bt.domNode,St),Bt.attach(),Bt}return jt.prototype.detach=function(){Rt.prototype.detach.call(this),this.observer.disconnect()},jt.prototype.deleteAt=function(Ft,Bt){this.update(),Ft===0&&Bt===this.length()?this.children.forEach(function(Ht){Ht.remove()}):Rt.prototype.deleteAt.call(this,Ft,Bt)},jt.prototype.formatAt=function(Ft,Bt,Ht,Yt){this.update(),Rt.prototype.formatAt.call(this,Ft,Bt,Ht,Yt)},jt.prototype.insertAt=function(Ft,Bt,Ht){this.update(),Rt.prototype.insertAt.call(this,Ft,Bt,Ht)},jt.prototype.optimize=function(Ft,Bt){var Ht=this;Ft===void 0&&(Ft=[]),Bt===void 0&&(Bt={}),Rt.prototype.optimize.call(this,Bt);for(var Yt=[].slice.call(this.observer.takeRecords());Yt.length>0;)Ft.push(Yt.pop());for(var zt=function(on,an){an===void 0&&(an=!0),!(on==null||on===Ht)&&on.domNode.parentNode!=null&&(on.domNode[ft.DATA_KEY].mutations==null&&(on.domNode[ft.DATA_KEY].mutations=[]),an&&zt(on.parent))},Kt=function(on){on.domNode[ft.DATA_KEY]==null||on.domNode[ft.DATA_KEY].mutations==null||(on instanceof dt.default&&on.children.forEach(Kt),on.optimize(Bt))},en=Ft,tn=0;en.length>0;tn+=1){if(tn>=kt)throw new Error("[Parchment] Maximum optimize iterations reached");for(en.forEach(function(on){var an=ft.find(on.target,!0);an!=null&&(an.domNode===on.target&&(on.type==="childList"?(zt(ft.find(on.previousSibling,!1)),[].forEach.call(on.addedNodes,function(un){var dn=ft.find(un,!1);zt(dn,!1),dn instanceof dt.default&&dn.children.forEach(function(Sn){zt(Sn,!1)})})):on.type==="attributes"&&zt(an.prev)),zt(an))}),this.children.forEach(Kt),en=[].slice.call(this.observer.takeRecords()),Yt=en.slice();Yt.length>0;)Ft.push(Yt.pop())}},jt.prototype.update=function(Ft,Bt){var Ht=this;Bt===void 0&&(Bt={}),Ft=Ft||this.observer.takeRecords(),Ft.map(function(Yt){var zt=ft.find(Yt.target,!0);return zt==null?null:zt.domNode[ft.DATA_KEY].mutations==null?(zt.domNode[ft.DATA_KEY].mutations=[Yt],zt):(zt.domNode[ft.DATA_KEY].mutations.push(Yt),null)}).forEach(function(Yt){Yt==null||Yt===Ht||Yt.domNode[ft.DATA_KEY]==null||Yt.update(Yt.domNode[ft.DATA_KEY].mutations||[],Bt)}),this.domNode[ft.DATA_KEY].mutations!=null&&Rt.prototype.update.call(this,this.domNode[ft.DATA_KEY].mutations,Bt),this.optimize(Ft,Bt)},jt.blotName="scroll",jt.defaultChild="block",jt.scope=ft.Scope.BLOCK_BLOT,jt.tagName="DIV",jt}(dt.default);ot.default=Tt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,jt){Rt.__proto__=jt}||function(Rt,jt){for(var Ft in jt)jt.hasOwnProperty(Ft)&&(Rt[Ft]=jt[Ft])};return function(Rt,jt){Tt(Rt,jt);function Ft(){this.constructor=Rt}Rt.prototype=jt===null?Object.create(jt):(Ft.prototype=jt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(18),ft=ut(1);function St(Tt,Rt){if(Object.keys(Tt).length!==Object.keys(Rt).length)return!1;for(var jt in Tt)if(Tt[jt]!==Rt[jt])return!1;return!0}var kt=function(Tt){ct(Rt,Tt);function Rt(){return Tt!==null&&Tt.apply(this,arguments)||this}return Rt.formats=function(jt){if(jt.tagName!==Rt.tagName)return Tt.formats.call(this,jt)},Rt.prototype.format=function(jt,Ft){var Bt=this;jt===this.statics.blotName&&!Ft?(this.children.forEach(function(Ht){Ht instanceof dt.default||(Ht=Ht.wrap(Rt.blotName,!0)),Bt.attributes.copy(Ht)}),this.unwrap()):Tt.prototype.format.call(this,jt,Ft)},Rt.prototype.formatAt=function(jt,Ft,Bt,Ht){if(this.formats()[Bt]!=null||ft.query(Bt,ft.Scope.ATTRIBUTE)){var Yt=this.isolate(jt,Ft);Yt.format(Bt,Ht)}else Tt.prototype.formatAt.call(this,jt,Ft,Bt,Ht)},Rt.prototype.optimize=function(jt){Tt.prototype.optimize.call(this,jt);var Ft=this.formats();if(Object.keys(Ft).length===0)return this.unwrap();var Bt=this.next;Bt instanceof Rt&&Bt.prev===this&&St(Ft,Bt.formats())&&(Bt.moveChildren(this),Bt.remove())},Rt.blotName="inline",Rt.scope=ft.Scope.INLINE_BLOT,Rt.tagName="SPAN",Rt}(dt.default);ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(18),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.formats=function(Rt){var jt=ft.query(Tt.blotName).tagName;if(Rt.tagName!==jt)return kt.formats.call(this,Rt)},Tt.prototype.format=function(Rt,jt){ft.query(Rt,ft.Scope.BLOCK)!=null&&(Rt===this.statics.blotName&&!jt?this.replaceWith(Tt.blotName):kt.prototype.format.call(this,Rt,jt))},Tt.prototype.formatAt=function(Rt,jt,Ft,Bt){ft.query(Ft,ft.Scope.BLOCK)!=null?this.format(Ft,Bt):kt.prototype.formatAt.call(this,Rt,jt,Ft,Bt)},Tt.prototype.insertAt=function(Rt,jt,Ft){if(Ft==null||ft.query(jt,ft.Scope.INLINE)!=null)kt.prototype.insertAt.call(this,Rt,jt,Ft);else{var Bt=this.split(Rt),Ht=ft.create(jt,Ft);Bt.parent.insertBefore(Ht,Bt)}},Tt.prototype.update=function(Rt,jt){navigator.userAgent.match(/Trident/)?this.build():kt.prototype.update.call(this,Rt,jt)},Tt.blotName="block",Tt.scope=ft.Scope.BLOCK_BLOT,Tt.tagName="P",Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=this&&this.__extends||function(){var St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,Tt){kt.__proto__=Tt}||function(kt,Tt){for(var Rt in Tt)Tt.hasOwnProperty(Rt)&&(kt[Rt]=Tt[Rt])};return function(kt,Tt){St(kt,Tt);function Rt(){this.constructor=kt}kt.prototype=Tt===null?Object.create(Tt):(Rt.prototype=Tt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(19),ft=function(St){ct(kt,St);function kt(){return St!==null&&St.apply(this,arguments)||this}return kt.formats=function(Tt){},kt.prototype.format=function(Tt,Rt){St.prototype.formatAt.call(this,0,this.length(),Tt,Rt)},kt.prototype.formatAt=function(Tt,Rt,jt,Ft){Tt===0&&Rt===this.length()?this.format(jt,Ft):St.prototype.formatAt.call(this,Tt,Rt,jt,Ft)},kt.prototype.formats=function(){return this.statics.formats(this.domNode)},kt}(dt.default);ot.default=ft},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(19),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(Rt){var jt=kt.call(this,Rt)||this;return jt.text=jt.statics.value(jt.domNode),jt}return Tt.create=function(Rt){return document.createTextNode(Rt)},Tt.value=function(Rt){var jt=Rt.data;return jt.normalize&&(jt=jt.normalize()),jt},Tt.prototype.deleteAt=function(Rt,jt){this.domNode.data=this.text=this.text.slice(0,Rt)+this.text.slice(Rt+jt)},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt?jt:-1},Tt.prototype.insertAt=function(Rt,jt,Ft){Ft==null?(this.text=this.text.slice(0,Rt)+jt+this.text.slice(Rt),this.domNode.data=this.text):kt.prototype.insertAt.call(this,Rt,jt,Ft)},Tt.prototype.length=function(){return this.text.length},Tt.prototype.optimize=function(Rt){kt.prototype.optimize.call(this,Rt),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Tt&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},Tt.prototype.position=function(Rt,jt){return[this.domNode,Rt]},Tt.prototype.split=function(Rt,jt){if(jt===void 0&&(jt=!1),!jt){if(Rt===0)return this;if(Rt===this.length())return this.next}var Ft=ft.create(this.domNode.splitText(Rt));return this.parent.insertBefore(Ft,this.next),this.text=this.statics.value(this.domNode),Ft},Tt.prototype.update=function(Rt,jt){var Ft=this;Rt.some(function(Bt){return Bt.type==="characterData"&&Bt.target===Ft.domNode})&&(this.text=this.statics.value(this.domNode))},Tt.prototype.value=function(){return this.text},Tt.blotName="text",Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=document.createElement("div");if(ct.classList.toggle("test-class",!1),ct.classList.contains("test-class")){var dt=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ft,St){return arguments.length>1&&!this.contains(ft)==!St?St:dt.call(this,ft)}}String.prototype.startsWith||(String.prototype.startsWith=function(ft,St){return St=St||0,this.substr(St,ft.length)===ft}),String.prototype.endsWith||(String.prototype.endsWith=function(ft,St){var kt=this.toString();(typeof St!="number"||!isFinite(St)||Math.floor(St)!==St||St>kt.length)&&(St=kt.length),St-=ft.length;var Tt=kt.indexOf(ft,St);return Tt!==-1&&Tt===St}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(St){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof St!="function")throw new TypeError("predicate must be a function");for(var kt=Object(this),Tt=kt.length>>>0,Rt=arguments[1],jt,Ft=0;Ft<Tt;Ft++)if(jt=kt[Ft],St.call(Rt,jt,Ft,kt))return jt}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(et,ot){var ut=-1,ct=1,dt=0;function ft(tn,on,an){if(tn==on)return tn?[[dt,tn]]:[];(an<0||tn.length<an)&&(an=null);var un=Rt(tn,on),dn=tn.substring(0,un);tn=tn.substring(un),on=on.substring(un),un=jt(tn,on);var Sn=tn.substring(tn.length-un);tn=tn.substring(0,tn.length-un),on=on.substring(0,on.length-un);var mn=St(tn,on);return dn&&mn.unshift([dt,dn]),Sn&&mn.push([dt,Sn]),Bt(mn),an!=null&&(mn=zt(mn,an)),mn=Kt(mn),mn}function St(tn,on){var an;if(!tn)return[[ct,on]];if(!on)return[[ut,tn]];var un=tn.length>on.length?tn:on,dn=tn.length>on.length?on:tn,Sn=un.indexOf(dn);if(Sn!=-1)return an=[[ct,un.substring(0,Sn)],[dt,dn],[ct,un.substring(Sn+dn.length)]],tn.length>on.length&&(an[0][0]=an[2][0]=ut),an;if(dn.length==1)return[[ut,tn],[ct,on]];var mn=Ft(tn,on);if(mn){var bn=mn[0],En=mn[1],kn=mn[2],Pn=mn[3],Ln=mn[4],gn=ft(bn,kn),Mn=ft(En,Pn);return gn.concat([[dt,Ln]],Mn)}return kt(tn,on)}function kt(tn,on){for(var an=tn.length,un=on.length,dn=Math.ceil((an+un)/2),Sn=dn,mn=2*dn,bn=new Array(mn),En=new Array(mn),kn=0;kn<mn;kn++)bn[kn]=-1,En[kn]=-1;bn[Sn+1]=0,En[Sn+1]=0;for(var Pn=an-un,Ln=Pn%2!=0,gn=0,Mn=0,yn=0,vn=0,On=0;On<dn;On++){for(var Cn=-On+gn;Cn<=On-Mn;Cn+=2){var Vn=Sn+Cn,Qn;Cn==-On||Cn!=On&&bn[Vn-1]<bn[Vn+1]?Qn=bn[Vn+1]:Qn=bn[Vn-1]+1;for(var ir=Qn-Cn;Qn<an&&ir<un&&tn.charAt(Qn)==on.charAt(ir);)Qn++,ir++;if(bn[Vn]=Qn,Qn>an)Mn+=2;else if(ir>un)gn+=2;else if(Ln){var ar=Sn+Pn-Cn;if(ar>=0&&ar<mn&&En[ar]!=-1){var rr=an-En[ar];if(Qn>=rr)return Tt(tn,on,Qn,ir)}}}for(var hr=-On+yn;hr<=On-vn;hr+=2){var ar=Sn+hr,rr;hr==-On||hr!=On&&En[ar-1]<En[ar+1]?rr=En[ar+1]:rr=En[ar-1]+1;for(var _r=rr-hr;rr<an&&_r<un&&tn.charAt(an-rr-1)==on.charAt(un-_r-1);)rr++,_r++;if(En[ar]=rr,rr>an)vn+=2;else if(_r>un)yn+=2;else if(!Ln){var Vn=Sn+Pn-hr;if(Vn>=0&&Vn<mn&&bn[Vn]!=-1){var Qn=bn[Vn],ir=Sn+Qn-Vn;if(rr=an-rr,Qn>=rr)return Tt(tn,on,Qn,ir)}}}}return[[ut,tn],[ct,on]]}function Tt(tn,on,an,un){var dn=tn.substring(0,an),Sn=on.substring(0,un),mn=tn.substring(an),bn=on.substring(un),En=ft(dn,Sn),kn=ft(mn,bn);return En.concat(kn)}function Rt(tn,on){if(!tn||!on||tn.charAt(0)!=on.charAt(0))return 0;for(var an=0,un=Math.min(tn.length,on.length),dn=un,Sn=0;an<dn;)tn.substring(Sn,dn)==on.substring(Sn,dn)?(an=dn,Sn=an):un=dn,dn=Math.floor((un-an)/2+an);return dn}function jt(tn,on){if(!tn||!on||tn.charAt(tn.length-1)!=on.charAt(on.length-1))return 0;for(var an=0,un=Math.min(tn.length,on.length),dn=un,Sn=0;an<dn;)tn.substring(tn.length-dn,tn.length-Sn)==on.substring(on.length-dn,on.length-Sn)?(an=dn,Sn=an):un=dn,dn=Math.floor((un-an)/2+an);return dn}function Ft(tn,on){var an=tn.length>on.length?tn:on,un=tn.length>on.length?on:tn;if(an.length<4||un.length*2<an.length)return null;function dn(Mn,yn,vn){for(var On=Mn.substring(vn,vn+Math.floor(Mn.length/4)),Cn=-1,Vn="",Qn,ir,ar,rr;(Cn=yn.indexOf(On,Cn+1))!=-1;){var hr=Rt(Mn.substring(vn),yn.substring(Cn)),_r=jt(Mn.substring(0,vn),yn.substring(0,Cn));Vn.length<_r+hr&&(Vn=yn.substring(Cn-_r,Cn)+yn.substring(Cn,Cn+hr),Qn=Mn.substring(0,vn-_r),ir=Mn.substring(vn+hr),ar=yn.substring(0,Cn-_r),rr=yn.substring(Cn+hr))}return Vn.length*2>=Mn.length?[Qn,ir,ar,rr,Vn]:null}var Sn=dn(an,un,Math.ceil(an.length/4)),mn=dn(an,un,Math.ceil(an.length/2)),bn;if(!Sn&&!mn)return null;mn?Sn?bn=Sn[4].length>mn[4].length?Sn:mn:bn=mn:bn=Sn;var En,kn,Pn,Ln;tn.length>on.length?(En=bn[0],kn=bn[1],Pn=bn[2],Ln=bn[3]):(Pn=bn[0],Ln=bn[1],En=bn[2],kn=bn[3]);var gn=bn[4];return[En,kn,Pn,Ln,gn]}function Bt(tn){tn.push([dt,""]);for(var on=0,an=0,un=0,dn="",Sn="",mn;on<tn.length;)switch(tn[on][0]){case ct:un++,Sn+=tn[on][1],on++;break;case ut:an++,dn+=tn[on][1],on++;break;case dt:an+un>1?(an!==0&&un!==0&&(mn=Rt(Sn,dn),mn!==0&&(on-an-un>0&&tn[on-an-un-1][0]==dt?tn[on-an-un-1][1]+=Sn.substring(0,mn):(tn.splice(0,0,[dt,Sn.substring(0,mn)]),on++),Sn=Sn.substring(mn),dn=dn.substring(mn)),mn=jt(Sn,dn),mn!==0&&(tn[on][1]=Sn.substring(Sn.length-mn)+tn[on][1],Sn=Sn.substring(0,Sn.length-mn),dn=dn.substring(0,dn.length-mn))),an===0?tn.splice(on-un,an+un,[ct,Sn]):un===0?tn.splice(on-an,an+un,[ut,dn]):tn.splice(on-an-un,an+un,[ut,dn],[ct,Sn]),on=on-an-un+(an?1:0)+(un?1:0)+1):on!==0&&tn[on-1][0]==dt?(tn[on-1][1]+=tn[on][1],tn.splice(on,1)):on++,un=0,an=0,dn="",Sn="";break}tn[tn.length-1][1]===""&&tn.pop();var bn=!1;for(on=1;on<tn.length-1;)tn[on-1][0]==dt&&tn[on+1][0]==dt&&(tn[on][1].substring(tn[on][1].length-tn[on-1][1].length)==tn[on-1][1]?(tn[on][1]=tn[on-1][1]+tn[on][1].substring(0,tn[on][1].length-tn[on-1][1].length),tn[on+1][1]=tn[on-1][1]+tn[on+1][1],tn.splice(on-1,1),bn=!0):tn[on][1].substring(0,tn[on+1][1].length)==tn[on+1][1]&&(tn[on-1][1]+=tn[on+1][1],tn[on][1]=tn[on][1].substring(tn[on+1][1].length)+tn[on+1][1],tn.splice(on+1,1),bn=!0)),on++;bn&&Bt(tn)}var Ht=ft;Ht.INSERT=ct,Ht.DELETE=ut,Ht.EQUAL=dt,et.exports=Ht;function Yt(tn,on){if(on===0)return[dt,tn];for(var an=0,un=0;un<tn.length;un++){var dn=tn[un];if(dn[0]===ut||dn[0]===dt){var Sn=an+dn[1].length;if(on===Sn)return[un+1,tn];if(on<Sn){tn=tn.slice();var mn=on-an,bn=[dn[0],dn[1].slice(0,mn)],En=[dn[0],dn[1].slice(mn)];return tn.splice(un,1,bn,En),[un+1,tn]}else an=Sn}}throw new Error("cursor_pos is out of bounds!")}function zt(tn,on){var an=Yt(tn,on),un=an[1],dn=an[0],Sn=un[dn],mn=un[dn+1];if(Sn==null)return tn;if(Sn[0]!==dt)return tn;if(mn!=null&&Sn[1]+mn[1]===mn[1]+Sn[1])return un.splice(dn,2,mn,Sn),en(un,dn,2);if(mn!=null&&mn[1].indexOf(Sn[1])===0){un.splice(dn,2,[mn[0],Sn[1]],[0,Sn[1]]);var bn=mn[1].slice(Sn[1].length);return bn.length>0&&un.splice(dn+2,0,[mn[0],bn]),en(un,dn,3)}else return tn}function Kt(tn){for(var on=!1,an=function(mn){return mn.charCodeAt(0)>=56320&&mn.charCodeAt(0)<=57343},un=function(mn){return mn.charCodeAt(mn.length-1)>=55296&&mn.charCodeAt(mn.length-1)<=56319},dn=2;dn<tn.length;dn+=1)tn[dn-2][0]===dt&&un(tn[dn-2][1])&&tn[dn-1][0]===ut&&an(tn[dn-1][1])&&tn[dn][0]===ct&&an(tn[dn][1])&&(on=!0,tn[dn-1][1]=tn[dn-2][1].slice(-1)+tn[dn-1][1],tn[dn][1]=tn[dn-2][1].slice(-1)+tn[dn][1],tn[dn-2][1]=tn[dn-2][1].slice(0,-1));if(!on)return tn;for(var Sn=[],dn=0;dn<tn.length;dn+=1)tn[dn][1].length>0&&Sn.push(tn[dn]);return Sn}function en(tn,on,an){for(var un=on+an-1;un>=0&&un>=on-1;un--)if(un+1<tn.length){var dn=tn[un],Sn=tn[un+1];dn[0]===Sn[1]&&tn.splice(un,2,[dn[0],dn[1]+Sn[1]])}return tn}},function(et,ot){ot=et.exports=typeof Object.keys=="function"?Object.keys:ut,ot.shim=ut;function ut(ct){var dt=[];for(var ft in ct)dt.push(ft);return dt}},function(et,ot){var ut=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";ot=et.exports=ut?ct:dt,ot.supported=ct;function ct(ft){return Object.prototype.toString.call(ft)=="[object Arguments]"}ot.unsupported=dt;function dt(ft){return ft&&typeof ft=="object"&&typeof ft.length=="number"&&Object.prototype.hasOwnProperty.call(ft,"callee")&&!Object.prototype.propertyIsEnumerable.call(ft,"callee")||!1}},function(et,ot){var ut=Object.prototype.hasOwnProperty,ct="~";function dt(){}Object.create&&(dt.prototype=Object.create(null),new dt().__proto__||(ct=!1));function ft(kt,Tt,Rt){this.fn=kt,this.context=Tt,this.once=Rt||!1}function St(){this._events=new dt,this._eventsCount=0}St.prototype.eventNames=function(){var Tt=[],Rt,jt;if(this._eventsCount===0)return Tt;for(jt in Rt=this._events)ut.call(Rt,jt)&&Tt.push(ct?jt.slice(1):jt);return Object.getOwnPropertySymbols?Tt.concat(Object.getOwnPropertySymbols(Rt)):Tt},St.prototype.listeners=function(Tt,Rt){var jt=ct?ct+Tt:Tt,Ft=this._events[jt];if(Rt)return!!Ft;if(!Ft)return[];if(Ft.fn)return[Ft.fn];for(var Bt=0,Ht=Ft.length,Yt=new Array(Ht);Bt<Ht;Bt++)Yt[Bt]=Ft[Bt].fn;return Yt},St.prototype.emit=function(Tt,Rt,jt,Ft,Bt,Ht){var Yt=ct?ct+Tt:Tt;if(!this._events[Yt])return!1;var zt=this._events[Yt],Kt=arguments.length,en,tn;if(zt.fn){switch(zt.once&&this.removeListener(Tt,zt.fn,void 0,!0),Kt){case 1:return zt.fn.call(zt.context),!0;case 2:return zt.fn.call(zt.context,Rt),!0;case 3:return zt.fn.call(zt.context,Rt,jt),!0;case 4:return zt.fn.call(zt.context,Rt,jt,Ft),!0;case 5:return zt.fn.call(zt.context,Rt,jt,Ft,Bt),!0;case 6:return zt.fn.call(zt.context,Rt,jt,Ft,Bt,Ht),!0}for(tn=1,en=new Array(Kt-1);tn<Kt;tn++)en[tn-1]=arguments[tn];zt.fn.apply(zt.context,en)}else{var on=zt.length,an;for(tn=0;tn<on;tn++)switch(zt[tn].once&&this.removeListener(Tt,zt[tn].fn,void 0,!0),Kt){case 1:zt[tn].fn.call(zt[tn].context);break;case 2:zt[tn].fn.call(zt[tn].context,Rt);break;case 3:zt[tn].fn.call(zt[tn].context,Rt,jt);break;case 4:zt[tn].fn.call(zt[tn].context,Rt,jt,Ft);break;default:if(!en)for(an=1,en=new Array(Kt-1);an<Kt;an++)en[an-1]=arguments[an];zt[tn].fn.apply(zt[tn].context,en)}}return!0},St.prototype.on=function(Tt,Rt,jt){var Ft=new ft(Rt,jt||this),Bt=ct?ct+Tt:Tt;return this._events[Bt]?this._events[Bt].fn?this._events[Bt]=[this._events[Bt],Ft]:this._events[Bt].push(Ft):(this._events[Bt]=Ft,this._eventsCount++),this},St.prototype.once=function(Tt,Rt,jt){var Ft=new ft(Rt,jt||this,!0),Bt=ct?ct+Tt:Tt;return this._events[Bt]?this._events[Bt].fn?this._events[Bt]=[this._events[Bt],Ft]:this._events[Bt].push(Ft):(this._events[Bt]=Ft,this._eventsCount++),this},St.prototype.removeListener=function(Tt,Rt,jt,Ft){var Bt=ct?ct+Tt:Tt;if(!this._events[Bt])return this;if(!Rt)return--this._eventsCount===0?this._events=new dt:delete this._events[Bt],this;var Ht=this._events[Bt];if(Ht.fn)Ht.fn===Rt&&(!Ft||Ht.once)&&(!jt||Ht.context===jt)&&(--this._eventsCount===0?this._events=new dt:delete this._events[Bt]);else{for(var Yt=0,zt=[],Kt=Ht.length;Yt<Kt;Yt++)(Ht[Yt].fn!==Rt||Ft&&!Ht[Yt].once||jt&&Ht[Yt].context!==jt)&&zt.push(Ht[Yt]);zt.length?this._events[Bt]=zt.length===1?zt[0]:zt:--this._eventsCount===0?this._events=new dt:delete this._events[Bt]}return this},St.prototype.removeAllListeners=function(Tt){var Rt;return Tt?(Rt=ct?ct+Tt:Tt,this._events[Rt]&&(--this._eventsCount===0?this._events=new dt:delete this._events[Rt])):(this._events=new dt,this._eventsCount=0),this},St.prototype.off=St.prototype.removeListener,St.prototype.addListener=St.prototype.on,St.prototype.setMaxListeners=function(){return this},St.prefixed=ct,St.EventEmitter=St,typeof et<"u"&&(et.exports=St)},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchText=ot.matchSpacing=ot.matchNewline=ot.matchBlot=ot.matchAttributor=ot.default=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rr){return typeof Rr}:function(Rr){return Rr&&typeof Symbol=="function"&&Rr.constructor===Symbol&&Rr!==Symbol.prototype?"symbol":typeof Rr},dt=function(){function Rr(Lr,Gr){var zr=[],Vr=!0,rs=!1,fs=void 0;try{for(var Kr=Lr[Symbol.iterator](),$t;!(Vr=($t=Kr.next()).done)&&(zr.push($t.value),!(Gr&&zr.length===Gr));Vr=!0);}catch(Jt){rs=!0,fs=Jt}finally{try{!Vr&&Kr.return&&Kr.return()}finally{if(rs)throw fs}}return zr}return function(Lr,Gr){if(Array.isArray(Lr))return Lr;if(Symbol.iterator in Object(Lr))return Rr(Lr,Gr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Rr(Lr,Gr){for(var zr=0;zr<Gr.length;zr++){var Vr=Gr[zr];Vr.enumerable=Vr.enumerable||!1,Vr.configurable=!0,"value"in Vr&&(Vr.writable=!0),Object.defineProperty(Lr,Vr.key,Vr)}}return function(Lr,Gr,zr){return Gr&&Rr(Lr.prototype,Gr),zr&&Rr(Lr,zr),Lr}}(),St=ut(3),kt=En(St),Tt=ut(2),Rt=En(Tt),jt=ut(0),Ft=En(jt),Bt=ut(5),Ht=En(Bt),Yt=ut(10),zt=En(Yt),Kt=ut(9),en=En(Kt),tn=ut(36),on=ut(37),an=ut(13),un=En(an),dn=ut(26),Sn=ut(38),mn=ut(39),bn=ut(40);function En(Rr){return Rr&&Rr.__esModule?Rr:{default:Rr}}function kn(Rr,Lr,Gr){return Lr in Rr?Object.defineProperty(Rr,Lr,{value:Gr,enumerable:!0,configurable:!0,writable:!0}):Rr[Lr]=Gr,Rr}function Pn(Rr,Lr){if(!(Rr instanceof Lr))throw new TypeError("Cannot call a class as a function")}function Ln(Rr,Lr){if(!Rr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Lr&&(typeof Lr=="object"||typeof Lr=="function")?Lr:Rr}function gn(Rr,Lr){if(typeof Lr!="function"&&Lr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Lr);Rr.prototype=Object.create(Lr&&Lr.prototype,{constructor:{value:Rr,enumerable:!1,writable:!0,configurable:!0}}),Lr&&(Object.setPrototypeOf?Object.setPrototypeOf(Rr,Lr):Rr.__proto__=Lr)}var Mn=(0,zt.default)("quill:clipboard"),yn="__ql-matcher",vn=[[Node.TEXT_NODE,Ts],[Node.TEXT_NODE,Fr],["br",Ir],[Node.ELEMENT_NODE,Fr],[Node.ELEMENT_NODE,wr],[Node.ELEMENT_NODE,cs],[Node.ELEMENT_NODE,xr],[Node.ELEMENT_NODE,Cs],["li",Br],["b",_r.bind(_r,"bold")],["i",_r.bind(_r,"italic")],["style",_i]],On=[tn.AlignAttribute,Sn.DirectionAttribute].reduce(function(Rr,Lr){return Rr[Lr.keyName]=Lr,Rr},{}),Cn=[tn.AlignStyle,on.BackgroundStyle,dn.ColorStyle,Sn.DirectionStyle,mn.FontStyle,bn.SizeStyle].reduce(function(Rr,Lr){return Rr[Lr.keyName]=Lr,Rr},{}),Vn=function(Rr){gn(Lr,Rr);function Lr(Gr,zr){Pn(this,Lr);var Vr=Ln(this,(Lr.__proto__||Object.getPrototypeOf(Lr)).call(this,Gr,zr));return Vr.quill.root.addEventListener("paste",Vr.onPaste.bind(Vr)),Vr.container=Vr.quill.addContainer("ql-clipboard"),Vr.container.setAttribute("contenteditable",!0),Vr.container.setAttribute("tabindex",-1),Vr.matchers=[],vn.concat(Vr.options.matchers).forEach(function(rs){var fs=dt(rs,2),Kr=fs[0],$t=fs[1];!zr.matchVisual&&$t===cs||Vr.addMatcher(Kr,$t)}),Vr}return ft(Lr,[{key:"addMatcher",value:function(zr,Vr){this.matchers.push([zr,Vr])}},{key:"convert",value:function(zr){if(typeof zr=="string")return this.container.innerHTML=zr.replace(/\>\r?\n +\</g,"><"),this.convert();var Vr=this.quill.getFormat(this.quill.selection.savedRange.index);if(Vr[un.default.blotName]){var rs=this.container.innerText;return this.container.innerHTML="",new Rt.default().insert(rs,kn({},un.default.blotName,Vr[un.default.blotName]))}var fs=this.prepareMatching(),Kr=dt(fs,2),$t=Kr[0],Jt=Kr[1],sn=hr(this.container,$t,Jt);return ar(sn,`
`)&&sn.ops[sn.ops.length-1].attributes==null&&(sn=sn.compose(new Rt.default().retain(sn.length()-1).delete(1))),Mn.log("convert",this.container.innerHTML,sn),this.container.innerHTML="",sn}},{key:"dangerouslyPasteHTML",value:function(zr,Vr){var rs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ht.default.sources.API;if(typeof zr=="string")this.quill.setContents(this.convert(zr),Vr),this.quill.setSelection(0,Ht.default.sources.SILENT);else{var fs=this.convert(Vr);this.quill.updateContents(new Rt.default().retain(zr).concat(fs),rs),this.quill.setSelection(zr+fs.length(),Ht.default.sources.SILENT)}}},{key:"onPaste",value:function(zr){var Vr=this;if(!(zr.defaultPrevented||!this.quill.isEnabled())){var rs=this.quill.getSelection(),fs=new Rt.default().retain(rs.index),Kr=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(Ht.default.sources.SILENT),setTimeout(function(){fs=fs.concat(Vr.convert()).delete(rs.length),Vr.quill.updateContents(fs,Ht.default.sources.USER),Vr.quill.setSelection(fs.length()-rs.length,Ht.default.sources.SILENT),Vr.quill.scrollingContainer.scrollTop=Kr,Vr.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var zr=this,Vr=[],rs=[];return this.matchers.forEach(function(fs){var Kr=dt(fs,2),$t=Kr[0],Jt=Kr[1];switch($t){case Node.TEXT_NODE:rs.push(Jt);break;case Node.ELEMENT_NODE:Vr.push(Jt);break;default:[].forEach.call(zr.container.querySelectorAll($t),function(sn){sn[yn]=sn[yn]||[],sn[yn].push(Jt)});break}}),[Vr,rs]}}]),Lr}(en.default);Vn.DEFAULTS={matchers:[],matchVisual:!0};function Qn(Rr,Lr,Gr){return(typeof Lr>"u"?"undefined":ct(Lr))==="object"?Object.keys(Lr).reduce(function(zr,Vr){return Qn(zr,Vr,Lr[Vr])},Rr):Rr.reduce(function(zr,Vr){return Vr.attributes&&Vr.attributes[Lr]?zr.push(Vr):zr.insert(Vr.insert,(0,kt.default)({},kn({},Lr,Gr),Vr.attributes))},new Rt.default)}function ir(Rr){if(Rr.nodeType!==Node.ELEMENT_NODE)return{};var Lr="__ql-computed-style";return Rr[Lr]||(Rr[Lr]=window.getComputedStyle(Rr))}function ar(Rr,Lr){for(var Gr="",zr=Rr.ops.length-1;zr>=0&&Gr.length<Lr.length;--zr){var Vr=Rr.ops[zr];if(typeof Vr.insert!="string")break;Gr=Vr.insert+Gr}return Gr.slice(-1*Lr.length)===Lr}function rr(Rr){if(Rr.childNodes.length===0)return!1;var Lr=ir(Rr);return["block","list-item"].indexOf(Lr.display)>-1}function hr(Rr,Lr,Gr){return Rr.nodeType===Rr.TEXT_NODE?Gr.reduce(function(zr,Vr){return Vr(Rr,zr)},new Rt.default):Rr.nodeType===Rr.ELEMENT_NODE?[].reduce.call(Rr.childNodes||[],function(zr,Vr){var rs=hr(Vr,Lr,Gr);return Vr.nodeType===Rr.ELEMENT_NODE&&(rs=Lr.reduce(function(fs,Kr){return Kr(Vr,fs)},rs),rs=(Vr[yn]||[]).reduce(function(fs,Kr){return Kr(Vr,fs)},rs)),zr.concat(rs)},new Rt.default):new Rt.default}function _r(Rr,Lr,Gr){return Qn(Gr,Rr,!0)}function xr(Rr,Lr){var Gr=Ft.default.Attributor.Attribute.keys(Rr),zr=Ft.default.Attributor.Class.keys(Rr),Vr=Ft.default.Attributor.Style.keys(Rr),rs={};return Gr.concat(zr).concat(Vr).forEach(function(fs){var Kr=Ft.default.query(fs,Ft.default.Scope.ATTRIBUTE);Kr!=null&&(rs[Kr.attrName]=Kr.value(Rr),rs[Kr.attrName])||(Kr=On[fs],Kr!=null&&(Kr.attrName===fs||Kr.keyName===fs)&&(rs[Kr.attrName]=Kr.value(Rr)||void 0),Kr=Cn[fs],Kr!=null&&(Kr.attrName===fs||Kr.keyName===fs)&&(Kr=Cn[fs],rs[Kr.attrName]=Kr.value(Rr)||void 0))}),Object.keys(rs).length>0&&(Lr=Qn(Lr,rs)),Lr}function wr(Rr,Lr){var Gr=Ft.default.query(Rr);if(Gr==null)return Lr;if(Gr.prototype instanceof Ft.default.Embed){var zr={},Vr=Gr.value(Rr);Vr!=null&&(zr[Gr.blotName]=Vr,Lr=new Rt.default().insert(zr,Gr.formats(Rr)))}else typeof Gr.formats=="function"&&(Lr=Qn(Lr,Gr.blotName,Gr.formats(Rr)));return Lr}function Ir(Rr,Lr){return ar(Lr,`
`)||Lr.insert(`
`),Lr}function _i(){return new Rt.default}function Br(Rr,Lr){var Gr=Ft.default.query(Rr);if(Gr==null||Gr.blotName!=="list-item"||!ar(Lr,`
`))return Lr;for(var zr=-1,Vr=Rr.parentNode;!Vr.classList.contains("ql-clipboard");)(Ft.default.query(Vr)||{}).blotName==="list"&&(zr+=1),Vr=Vr.parentNode;return zr<=0?Lr:Lr.compose(new Rt.default().retain(Lr.length()-1).retain(1,{indent:zr}))}function Fr(Rr,Lr){return ar(Lr,`
`)||(rr(Rr)||Lr.length()>0&&Rr.nextSibling&&rr(Rr.nextSibling))&&Lr.insert(`
`),Lr}function cs(Rr,Lr){if(rr(Rr)&&Rr.nextElementSibling!=null&&!ar(Lr,`

`)){var Gr=Rr.offsetHeight+parseFloat(ir(Rr).marginTop)+parseFloat(ir(Rr).marginBottom);Rr.nextElementSibling.offsetTop>Rr.offsetTop+Gr*1.5&&Lr.insert(`
`)}return Lr}function Cs(Rr,Lr){var Gr={},zr=Rr.style||{};return zr.fontStyle&&ir(Rr).fontStyle==="italic"&&(Gr.italic=!0),zr.fontWeight&&(ir(Rr).fontWeight.startsWith("bold")||parseInt(ir(Rr).fontWeight)>=700)&&(Gr.bold=!0),Object.keys(Gr).length>0&&(Lr=Qn(Lr,Gr)),parseFloat(zr.textIndent||0)>0&&(Lr=new Rt.default().insert("	").concat(Lr)),Lr}function Ts(Rr,Lr){var Gr=Rr.data;if(Rr.parentNode.tagName==="O:P")return Lr.insert(Gr.trim());if(Gr.trim().length===0&&Rr.parentNode.classList.contains("ql-clipboard"))return Lr;if(!ir(Rr.parentNode).whiteSpace.startsWith("pre")){var zr=function(rs,fs){return fs=fs.replace(/[^\u00a0]/g,""),fs.length<1&&rs?" ":fs};Gr=Gr.replace(/\r\n/g," ").replace(/\n/g," "),Gr=Gr.replace(/\s\s+/g,zr.bind(zr,!0)),(Rr.previousSibling==null&&rr(Rr.parentNode)||Rr.previousSibling!=null&&rr(Rr.previousSibling))&&(Gr=Gr.replace(/^\s+/,zr.bind(zr,!1))),(Rr.nextSibling==null&&rr(Rr.parentNode)||Rr.nextSibling!=null&&rr(Rr.nextSibling))&&(Gr=Gr.replace(/\s+$/,zr.bind(zr,!1)))}return Lr.insert(Gr)}ot.default=Vn,ot.matchAttributor=xr,ot.matchBlot=wr,ot.matchNewline=Fr,ot.matchSpacing=cs,ot.matchText=Ts},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(Ht,Yt){for(var zt=0;zt<Yt.length;zt++){var Kt=Yt[zt];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ht,Kt.key,Kt)}}return function(Ht,Yt,zt){return Yt&&Bt(Ht.prototype,Yt),zt&&Bt(Ht,zt),Ht}}(),dt=function Bt(Ht,Yt,zt){Ht===null&&(Ht=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(Ht,Yt);if(Kt===void 0){var en=Object.getPrototypeOf(Ht);return en===null?void 0:Bt(en,Yt,zt)}else{if("value"in Kt)return Kt.value;var tn=Kt.get;return tn===void 0?void 0:tn.call(zt)}},ft=ut(6),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ct(Ht,[{key:"optimize",value:function(zt){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"optimize",this).call(this,zt),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return dt(Ht.__proto__||Object.getPrototypeOf(Ht),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),Ht}(St.default);Ft.blotName="bold",Ft.tagName=["STRONG","B"],ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.addControls=ot.default=void 0;var ct=function(){function bn(En,kn){var Pn=[],Ln=!0,gn=!1,Mn=void 0;try{for(var yn=En[Symbol.iterator](),vn;!(Ln=(vn=yn.next()).done)&&(Pn.push(vn.value),!(kn&&Pn.length===kn));Ln=!0);}catch(On){gn=!0,Mn=On}finally{try{!Ln&&yn.return&&yn.return()}finally{if(gn)throw Mn}}return Pn}return function(En,kn){if(Array.isArray(En))return En;if(Symbol.iterator in Object(En))return bn(En,kn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function bn(En,kn){for(var Pn=0;Pn<kn.length;Pn++){var Ln=kn[Pn];Ln.enumerable=Ln.enumerable||!1,Ln.configurable=!0,"value"in Ln&&(Ln.writable=!0),Object.defineProperty(En,Ln.key,Ln)}}return function(En,kn,Pn){return kn&&bn(En.prototype,kn),Pn&&bn(En,Pn),En}}(),ft=ut(2),St=zt(ft),kt=ut(0),Tt=zt(kt),Rt=ut(5),jt=zt(Rt),Ft=ut(10),Bt=zt(Ft),Ht=ut(9),Yt=zt(Ht);function zt(bn){return bn&&bn.__esModule?bn:{default:bn}}function Kt(bn,En,kn){return En in bn?Object.defineProperty(bn,En,{value:kn,enumerable:!0,configurable:!0,writable:!0}):bn[En]=kn,bn}function en(bn,En){if(!(bn instanceof En))throw new TypeError("Cannot call a class as a function")}function tn(bn,En){if(!bn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return En&&(typeof En=="object"||typeof En=="function")?En:bn}function on(bn,En){if(typeof En!="function"&&En!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof En);bn.prototype=Object.create(En&&En.prototype,{constructor:{value:bn,enumerable:!1,writable:!0,configurable:!0}}),En&&(Object.setPrototypeOf?Object.setPrototypeOf(bn,En):bn.__proto__=En)}var an=(0,Bt.default)("quill:toolbar"),un=function(bn){on(En,bn);function En(kn,Pn){en(this,En);var Ln=tn(this,(En.__proto__||Object.getPrototypeOf(En)).call(this,kn,Pn));if(Array.isArray(Ln.options.container)){var gn=document.createElement("div");Sn(gn,Ln.options.container),kn.container.parentNode.insertBefore(gn,kn.container),Ln.container=gn}else typeof Ln.options.container=="string"?Ln.container=document.querySelector(Ln.options.container):Ln.container=Ln.options.container;if(!(Ln.container instanceof HTMLElement)){var Mn;return Mn=an.error("Container required for toolbar",Ln.options),tn(Ln,Mn)}return Ln.container.classList.add("ql-toolbar"),Ln.controls=[],Ln.handlers={},Object.keys(Ln.options.handlers).forEach(function(yn){Ln.addHandler(yn,Ln.options.handlers[yn])}),[].forEach.call(Ln.container.querySelectorAll("button, select"),function(yn){Ln.attach(yn)}),Ln.quill.on(jt.default.events.EDITOR_CHANGE,function(yn,vn){yn===jt.default.events.SELECTION_CHANGE&&Ln.update(vn)}),Ln.quill.on(jt.default.events.SCROLL_OPTIMIZE,function(){var yn=Ln.quill.selection.getRange(),vn=ct(yn,1),On=vn[0];Ln.update(On)}),Ln}return dt(En,[{key:"addHandler",value:function(Pn,Ln){this.handlers[Pn]=Ln}},{key:"attach",value:function(Pn){var Ln=this,gn=[].find.call(Pn.classList,function(yn){return yn.indexOf("ql-")===0});if(gn){if(gn=gn.slice(3),Pn.tagName==="BUTTON"&&Pn.setAttribute("type","button"),this.handlers[gn]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[gn]==null){an.warn("ignoring attaching to disabled format",gn,Pn);return}if(Tt.default.query(gn)==null){an.warn("ignoring attaching to nonexistent format",gn,Pn);return}}var Mn=Pn.tagName==="SELECT"?"change":"click";Pn.addEventListener(Mn,function(yn){var vn=void 0;if(Pn.tagName==="SELECT"){if(Pn.selectedIndex<0)return;var On=Pn.options[Pn.selectedIndex];On.hasAttribute("selected")?vn=!1:vn=On.value||!1}else Pn.classList.contains("ql-active")?vn=!1:vn=Pn.value||!Pn.hasAttribute("value"),yn.preventDefault();Ln.quill.focus();var Cn=Ln.quill.selection.getRange(),Vn=ct(Cn,1),Qn=Vn[0];if(Ln.handlers[gn]!=null)Ln.handlers[gn].call(Ln,vn);else if(Tt.default.query(gn).prototype instanceof Tt.default.Embed){if(vn=prompt("Enter "+gn),!vn)return;Ln.quill.updateContents(new St.default().retain(Qn.index).delete(Qn.length).insert(Kt({},gn,vn)),jt.default.sources.USER)}else Ln.quill.format(gn,vn,jt.default.sources.USER);Ln.update(Qn)}),this.controls.push([gn,Pn])}}},{key:"update",value:function(Pn){var Ln=Pn==null?{}:this.quill.getFormat(Pn);this.controls.forEach(function(gn){var Mn=ct(gn,2),yn=Mn[0],vn=Mn[1];if(vn.tagName==="SELECT"){var On=void 0;if(Pn==null)On=null;else if(Ln[yn]==null)On=vn.querySelector("option[selected]");else if(!Array.isArray(Ln[yn])){var Cn=Ln[yn];typeof Cn=="string"&&(Cn=Cn.replace(/\"/g,'\\"')),On=vn.querySelector('option[value="'+Cn+'"]')}On==null?(vn.value="",vn.selectedIndex=-1):On.selected=!0}else if(Pn==null)vn.classList.remove("ql-active");else if(vn.hasAttribute("value")){var Vn=Ln[yn]===vn.getAttribute("value")||Ln[yn]!=null&&Ln[yn].toString()===vn.getAttribute("value")||Ln[yn]==null&&!vn.getAttribute("value");vn.classList.toggle("ql-active",Vn)}else vn.classList.toggle("ql-active",Ln[yn]!=null)})}}]),En}(Yt.default);un.DEFAULTS={};function dn(bn,En,kn){var Pn=document.createElement("button");Pn.setAttribute("type","button"),Pn.classList.add("ql-"+En),kn!=null&&(Pn.value=kn),bn.appendChild(Pn)}function Sn(bn,En){Array.isArray(En[0])||(En=[En]),En.forEach(function(kn){var Pn=document.createElement("span");Pn.classList.add("ql-formats"),kn.forEach(function(Ln){if(typeof Ln=="string")dn(Pn,Ln);else{var gn=Object.keys(Ln)[0],Mn=Ln[gn];Array.isArray(Mn)?mn(Pn,gn,Mn):dn(Pn,gn,Mn)}}),bn.appendChild(Pn)})}function mn(bn,En,kn){var Pn=document.createElement("select");Pn.classList.add("ql-"+En),kn.forEach(function(Ln){var gn=document.createElement("option");Ln!==!1?gn.setAttribute("value",Ln):gn.setAttribute("selected","selected"),Pn.appendChild(gn)}),bn.appendChild(Pn)}un.DEFAULTS={container:null,handlers:{clean:function(){var En=this,kn=this.quill.getSelection();if(kn!=null)if(kn.length==0){var Pn=this.quill.getFormat();Object.keys(Pn).forEach(function(Ln){Tt.default.query(Ln,Tt.default.Scope.INLINE)!=null&&En.quill.format(Ln,!1)})}else this.quill.removeFormat(kn,jt.default.sources.USER)},direction:function(En){var kn=this.quill.getFormat().align;En==="rtl"&&kn==null?this.quill.format("align","right",jt.default.sources.USER):!En&&kn==="right"&&this.quill.format("align",!1,jt.default.sources.USER),this.quill.format("direction",En,jt.default.sources.USER)},indent:function(En){var kn=this.quill.getSelection(),Pn=this.quill.getFormat(kn),Ln=parseInt(Pn.indent||0);if(En==="+1"||En==="-1"){var gn=En==="+1"?1:-1;Pn.direction==="rtl"&&(gn*=-1),this.quill.format("indent",Ln+gn,jt.default.sources.USER)}},link:function(En){En===!0&&(En=prompt("Enter link URL:")),this.quill.format("link",En,jt.default.sources.USER)},list:function(En){var kn=this.quill.getSelection(),Pn=this.quill.getFormat(kn);En==="check"?Pn.list==="checked"||Pn.list==="unchecked"?this.quill.format("list",!1,jt.default.sources.USER):this.quill.format("list","unchecked",jt.default.sources.USER):this.quill.format("list",En,jt.default.sources.USER)}}},ot.default=un,ot.addControls=Sn},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(Ht,Yt){for(var zt=0;zt<Yt.length;zt++){var Kt=Yt[zt];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ht,Kt.key,Kt)}}return function(Ht,Yt,zt){return Yt&&Bt(Ht.prototype,Yt),zt&&Bt(Ht,zt),Ht}}(),dt=function Bt(Ht,Yt,zt){Ht===null&&(Ht=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(Ht,Yt);if(Kt===void 0){var en=Object.getPrototypeOf(Ht);return en===null?void 0:Bt(en,Yt,zt)}else{if("value"in Kt)return Kt.value;var tn=Kt.get;return tn===void 0?void 0:tn.call(zt)}},ft=ut(28),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(Yt,zt){Tt(this,Ht);var Kt=Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Yt));return Kt.label.innerHTML=zt,Kt.container.classList.add("ql-color-picker"),[].slice.call(Kt.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(en){en.classList.add("ql-primary")}),Kt}return ct(Ht,[{key:"buildItem",value:function(zt){var Kt=dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"buildItem",this).call(this,zt);return Kt.style.backgroundColor=zt.getAttribute("value")||"",Kt}},{key:"selectItem",value:function(zt,Kt){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"selectItem",this).call(this,zt,Kt);var en=this.label.querySelector(".ql-color-label"),tn=zt&&zt.getAttribute("data-value")||"";en&&(en.tagName==="line"?en.style.stroke=tn:en.style.fill=tn)}}]),Ht}(St.default);ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(Ht,Yt){for(var zt=0;zt<Yt.length;zt++){var Kt=Yt[zt];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ht,Kt.key,Kt)}}return function(Ht,Yt,zt){return Yt&&Bt(Ht.prototype,Yt),zt&&Bt(Ht,zt),Ht}}(),dt=function Bt(Ht,Yt,zt){Ht===null&&(Ht=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(Ht,Yt);if(Kt===void 0){var en=Object.getPrototypeOf(Ht);return en===null?void 0:Bt(en,Yt,zt)}else{if("value"in Kt)return Kt.value;var tn=Kt.get;return tn===void 0?void 0:tn.call(zt)}},ft=ut(28),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(Yt,zt){Tt(this,Ht);var Kt=Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Yt));return Kt.container.classList.add("ql-icon-picker"),[].forEach.call(Kt.container.querySelectorAll(".ql-picker-item"),function(en){en.innerHTML=zt[en.getAttribute("data-value")||""]}),Kt.defaultItem=Kt.container.querySelector(".ql-selected"),Kt.selectItem(Kt.defaultItem),Kt}return ct(Ht,[{key:"selectItem",value:function(zt,Kt){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"selectItem",this).call(this,zt,Kt),zt=zt||this.defaultItem,this.label.innerHTML=zt.innerHTML}}]),Ht}(St.default);ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){var Rt=this;dt(this,St),this.quill=kt,this.boundsContainer=Tt||document.body,this.root=kt.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){Rt.root.style.marginTop=-1*Rt.quill.root.scrollTop+"px"}),this.hide()}return ct(St,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(Tt){var Rt=Tt.left+Tt.width/2-this.root.offsetWidth/2,jt=Tt.bottom+this.quill.root.scrollTop;this.root.style.left=Rt+"px",this.root.style.top=jt+"px",this.root.classList.remove("ql-flip");var Ft=this.boundsContainer.getBoundingClientRect(),Bt=this.root.getBoundingClientRect(),Ht=0;if(Bt.right>Ft.right&&(Ht=Ft.right-Bt.right,this.root.style.left=Rt+Ht+"px"),Bt.left<Ft.left&&(Ht=Ft.left-Bt.left,this.root.style.left=Rt+Ht+"px"),Bt.bottom>Ft.bottom){var Yt=Bt.bottom-Bt.top,zt=Tt.bottom-Tt.top+Yt;this.root.style.top=jt-zt+"px",this.root.classList.add("ql-flip")}return Ht}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),St}();ot.default=ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function mn(bn,En){var kn=[],Pn=!0,Ln=!1,gn=void 0;try{for(var Mn=bn[Symbol.iterator](),yn;!(Pn=(yn=Mn.next()).done)&&(kn.push(yn.value),!(En&&kn.length===En));Pn=!0);}catch(vn){Ln=!0,gn=vn}finally{try{!Pn&&Mn.return&&Mn.return()}finally{if(Ln)throw gn}}return kn}return function(bn,En){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return mn(bn,En);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function mn(bn,En,kn){bn===null&&(bn=Function.prototype);var Pn=Object.getOwnPropertyDescriptor(bn,En);if(Pn===void 0){var Ln=Object.getPrototypeOf(bn);return Ln===null?void 0:mn(Ln,En,kn)}else{if("value"in Pn)return Pn.value;var gn=Pn.get;return gn===void 0?void 0:gn.call(kn)}},ft=function(){function mn(bn,En){for(var kn=0;kn<En.length;kn++){var Pn=En[kn];Pn.enumerable=Pn.enumerable||!1,Pn.configurable=!0,"value"in Pn&&(Pn.writable=!0),Object.defineProperty(bn,Pn.key,Pn)}}return function(bn,En,kn){return En&&mn(bn.prototype,En),kn&&mn(bn,kn),bn}}(),St=ut(3),kt=en(St),Tt=ut(8),Rt=en(Tt),jt=ut(43),Ft=en(jt),Bt=ut(27),Ht=en(Bt),Yt=ut(15),zt=ut(41),Kt=en(zt);function en(mn){return mn&&mn.__esModule?mn:{default:mn}}function tn(mn,bn){if(!(mn instanceof bn))throw new TypeError("Cannot call a class as a function")}function on(mn,bn){if(!mn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bn&&(typeof bn=="object"||typeof bn=="function")?bn:mn}function an(mn,bn){if(typeof bn!="function"&&bn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof bn);mn.prototype=Object.create(bn&&bn.prototype,{constructor:{value:mn,enumerable:!1,writable:!0,configurable:!0}}),bn&&(Object.setPrototypeOf?Object.setPrototypeOf(mn,bn):mn.__proto__=bn)}var un=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],dn=function(mn){an(bn,mn);function bn(En,kn){tn(this,bn),kn.modules.toolbar!=null&&kn.modules.toolbar.container==null&&(kn.modules.toolbar.container=un);var Pn=on(this,(bn.__proto__||Object.getPrototypeOf(bn)).call(this,En,kn));return Pn.quill.container.classList.add("ql-snow"),Pn}return ft(bn,[{key:"extendToolbar",value:function(kn){kn.container.classList.add("ql-snow"),this.buildButtons([].slice.call(kn.container.querySelectorAll("button")),Kt.default),this.buildPickers([].slice.call(kn.container.querySelectorAll("select")),Kt.default),this.tooltip=new Sn(this.quill,this.options.bounds),kn.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Pn,Ln){kn.handlers.link.call(kn,!Ln.format.link)})}}]),bn}(Ft.default);dn.DEFAULTS=(0,kt.default)(!0,{},Ft.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(bn){if(bn){var En=this.quill.getSelection();if(En==null||En.length==0)return;var kn=this.quill.getText(En);/^\S+@\S+\.\S+$/.test(kn)&&kn.indexOf("mailto:")!==0&&(kn="mailto:"+kn);var Pn=this.quill.theme.tooltip;Pn.edit("link",kn)}else this.quill.format("link",!1)}}}}});var Sn=function(mn){an(bn,mn);function bn(En,kn){tn(this,bn);var Pn=on(this,(bn.__proto__||Object.getPrototypeOf(bn)).call(this,En,kn));return Pn.preview=Pn.root.querySelector("a.ql-preview"),Pn}return ft(bn,[{key:"listen",value:function(){var kn=this;dt(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Pn){kn.root.classList.contains("ql-editing")?kn.save():kn.edit("link",kn.preview.textContent),Pn.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Pn){if(kn.linkRange!=null){var Ln=kn.linkRange;kn.restoreFocus(),kn.quill.formatText(Ln,"link",!1,Rt.default.sources.USER),delete kn.linkRange}Pn.preventDefault(),kn.hide()}),this.quill.on(Rt.default.events.SELECTION_CHANGE,function(Pn,Ln,gn){if(Pn!=null){if(Pn.length===0&&gn===Rt.default.sources.USER){var Mn=kn.quill.scroll.descendant(Ht.default,Pn.index),yn=ct(Mn,2),vn=yn[0],On=yn[1];if(vn!=null){kn.linkRange=new Yt.Range(Pn.index-On,vn.length());var Cn=Ht.default.formats(vn.domNode);kn.preview.textContent=Cn,kn.preview.setAttribute("href",Cn),kn.show(),kn.position(kn.quill.getBounds(kn.linkRange));return}}else delete kn.linkRange;kn.hide()}})}},{key:"show",value:function(){dt(bn.prototype.__proto__||Object.getPrototypeOf(bn.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),bn}(jt.BaseTooltip);Sn.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),ot.default=dn},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(29),dt=Vr(ct),ft=ut(36),St=ut(38),kt=ut(64),Tt=ut(65),Rt=Vr(Tt),jt=ut(66),Ft=Vr(jt),Bt=ut(67),Ht=Vr(Bt),Yt=ut(37),zt=ut(26),Kt=ut(39),en=ut(40),tn=ut(56),on=Vr(tn),an=ut(68),un=Vr(an),dn=ut(27),Sn=Vr(dn),mn=ut(69),bn=Vr(mn),En=ut(70),kn=Vr(En),Pn=ut(71),Ln=Vr(Pn),gn=ut(72),Mn=Vr(gn),yn=ut(73),vn=Vr(yn),On=ut(13),Cn=Vr(On),Vn=ut(74),Qn=Vr(Vn),ir=ut(75),ar=Vr(ir),rr=ut(57),hr=Vr(rr),_r=ut(41),xr=Vr(_r),wr=ut(28),Ir=Vr(wr),_i=ut(59),Br=Vr(_i),Fr=ut(60),cs=Vr(Fr),Cs=ut(61),Ts=Vr(Cs),Rr=ut(108),Lr=Vr(Rr),Gr=ut(62),zr=Vr(Gr);function Vr(rs){return rs&&rs.__esModule?rs:{default:rs}}dt.default.register({"attributors/attribute/direction":St.DirectionAttribute,"attributors/class/align":ft.AlignClass,"attributors/class/background":Yt.BackgroundClass,"attributors/class/color":zt.ColorClass,"attributors/class/direction":St.DirectionClass,"attributors/class/font":Kt.FontClass,"attributors/class/size":en.SizeClass,"attributors/style/align":ft.AlignStyle,"attributors/style/background":Yt.BackgroundStyle,"attributors/style/color":zt.ColorStyle,"attributors/style/direction":St.DirectionStyle,"attributors/style/font":Kt.FontStyle,"attributors/style/size":en.SizeStyle},!0),dt.default.register({"formats/align":ft.AlignClass,"formats/direction":St.DirectionClass,"formats/indent":kt.IndentClass,"formats/background":Yt.BackgroundStyle,"formats/color":zt.ColorStyle,"formats/font":Kt.FontClass,"formats/size":en.SizeClass,"formats/blockquote":Rt.default,"formats/code-block":Cn.default,"formats/header":Ft.default,"formats/list":Ht.default,"formats/bold":on.default,"formats/code":On.Code,"formats/italic":un.default,"formats/link":Sn.default,"formats/script":bn.default,"formats/strike":kn.default,"formats/underline":Ln.default,"formats/image":Mn.default,"formats/video":vn.default,"formats/list/item":Bt.ListItem,"modules/formula":Qn.default,"modules/syntax":ar.default,"modules/toolbar":hr.default,"themes/bubble":Lr.default,"themes/snow":zr.default,"ui/icons":xr.default,"ui/picker":Ir.default,"ui/icon-picker":cs.default,"ui/color-picker":Br.default,"ui/tooltip":Ts.default},!0),ot.default=dt.default},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.IndentClass=void 0;var ct=function(){function Ht(Yt,zt){for(var Kt=0;Kt<zt.length;Kt++){var en=zt[Kt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Yt,en.key,en)}}return function(Yt,zt,Kt){return zt&&Ht(Yt.prototype,zt),Kt&&Ht(Yt,Kt),Yt}}(),dt=function Ht(Yt,zt,Kt){Yt===null&&(Yt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Yt,zt);if(en===void 0){var tn=Object.getPrototypeOf(Yt);return tn===null?void 0:Ht(tn,zt,Kt)}else{if("value"in en)return en.value;var on=en.get;return on===void 0?void 0:on.call(Kt)}},ft=ut(0),St=kt(ft);function kt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Tt(Ht,Yt){if(!(Ht instanceof Yt))throw new TypeError("Cannot call a class as a function")}function Rt(Ht,Yt){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt&&(typeof Yt=="object"||typeof Yt=="function")?Yt:Ht}function jt(Ht,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Yt);Ht.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Yt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Yt):Ht.__proto__=Yt)}var Ft=function(Ht){jt(Yt,Ht);function Yt(){return Tt(this,Yt),Rt(this,(Yt.__proto__||Object.getPrototypeOf(Yt)).apply(this,arguments))}return ct(Yt,[{key:"add",value:function(Kt,en){if(en==="+1"||en==="-1"){var tn=this.value(Kt)||0;en=en==="+1"?tn+1:tn-1}return en===0?(this.remove(Kt),!0):dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"add",this).call(this,Kt,en)}},{key:"canAdd",value:function(Kt,en){return dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"canAdd",this).call(this,Kt,en)||dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"canAdd",this).call(this,Kt,parseInt(en))}},{key:"value",value:function(Kt){return parseInt(dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"value",this).call(this,Kt))||void 0}}]),Yt}(St.default.Attributor.Class),Bt=new Ft("indent","ql-indent",{scope:St.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});ot.IndentClass=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(4),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="blockquote",Rt.tagName="blockquote",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ft(Bt,Ht){for(var Yt=0;Yt<Ht.length;Yt++){var zt=Ht[Yt];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(Bt,zt.key,zt)}}return function(Bt,Ht,Yt){return Ht&&Ft(Bt.prototype,Ht),Yt&&Ft(Bt,Yt),Bt}}(),dt=ut(4),ft=St(dt);function St(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function kt(Ft,Bt){if(!(Ft instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Tt(Ft,Bt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Ft}function Rt(Ft,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Ft.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Bt):Ft.__proto__=Bt)}var jt=function(Ft){Rt(Bt,Ft);function Bt(){return kt(this,Bt),Tt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ct(Bt,null,[{key:"formats",value:function(Yt){return this.tagName.indexOf(Yt.tagName)+1}}]),Bt}(ft.default);jt.blotName="header",jt.tagName=["H1","H2","H3","H4","H5","H6"],ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.ListItem=void 0;var ct=function(){function tn(on,an){for(var un=0;un<an.length;un++){var dn=an[un];dn.enumerable=dn.enumerable||!1,dn.configurable=!0,"value"in dn&&(dn.writable=!0),Object.defineProperty(on,dn.key,dn)}}return function(on,an,un){return an&&tn(on.prototype,an),un&&tn(on,un),on}}(),dt=function tn(on,an,un){on===null&&(on=Function.prototype);var dn=Object.getOwnPropertyDescriptor(on,an);if(dn===void 0){var Sn=Object.getPrototypeOf(on);return Sn===null?void 0:tn(Sn,an,un)}else{if("value"in dn)return dn.value;var mn=dn.get;return mn===void 0?void 0:mn.call(un)}},ft=ut(0),St=Ft(ft),kt=ut(4),Tt=Ft(kt),Rt=ut(25),jt=Ft(Rt);function Ft(tn){return tn&&tn.__esModule?tn:{default:tn}}function Bt(tn,on,an){return on in tn?Object.defineProperty(tn,on,{value:an,enumerable:!0,configurable:!0,writable:!0}):tn[on]=an,tn}function Ht(tn,on){if(!(tn instanceof on))throw new TypeError("Cannot call a class as a function")}function Yt(tn,on){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&(typeof on=="object"||typeof on=="function")?on:tn}function zt(tn,on){if(typeof on!="function"&&on!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof on);tn.prototype=Object.create(on&&on.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,on):tn.__proto__=on)}var Kt=function(tn){zt(on,tn);function on(){return Ht(this,on),Yt(this,(on.__proto__||Object.getPrototypeOf(on)).apply(this,arguments))}return ct(on,[{key:"format",value:function(un,dn){un===en.blotName&&!dn?this.replaceWith(St.default.create(this.statics.scope)):dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"format",this).call(this,un,dn)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(un,dn){return this.parent.isolate(this.offset(this.parent),this.length()),un===this.parent.statics.blotName?(this.parent.replaceWith(un,dn),this):(this.parent.unwrap(),dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"replaceWith",this).call(this,un,dn))}}],[{key:"formats",value:function(un){return un.tagName===this.tagName?void 0:dt(on.__proto__||Object.getPrototypeOf(on),"formats",this).call(this,un)}}]),on}(Tt.default);Kt.blotName="list-item",Kt.tagName="LI";var en=function(tn){zt(on,tn),ct(on,null,[{key:"create",value:function(un){var dn=un==="ordered"?"OL":"UL",Sn=dt(on.__proto__||Object.getPrototypeOf(on),"create",this).call(this,dn);return(un==="checked"||un==="unchecked")&&Sn.setAttribute("data-checked",un==="checked"),Sn}},{key:"formats",value:function(un){if(un.tagName==="OL")return"ordered";if(un.tagName==="UL")return un.hasAttribute("data-checked")?un.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function on(an){Ht(this,on);var un=Yt(this,(on.__proto__||Object.getPrototypeOf(on)).call(this,an)),dn=function(mn){if(mn.target.parentNode===an){var bn=un.statics.formats(an),En=St.default.find(mn.target);bn==="checked"?En.format("list","unchecked"):bn==="unchecked"&&En.format("list","checked")}};return an.addEventListener("touchstart",dn),an.addEventListener("mousedown",dn),un}return ct(on,[{key:"format",value:function(un,dn){this.children.length>0&&this.children.tail.format(un,dn)}},{key:"formats",value:function(){return Bt({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(un,dn){if(un instanceof Kt)dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"insertBefore",this).call(this,un,dn);else{var Sn=dn==null?this.length():dn.offset(this),mn=this.split(Sn);mn.parent.insertBefore(un,mn)}}},{key:"optimize",value:function(un){dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"optimize",this).call(this,un);var dn=this.next;dn!=null&&dn.prev===this&&dn.statics.blotName===this.statics.blotName&&dn.domNode.tagName===this.domNode.tagName&&dn.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(dn.moveChildren(this),dn.remove())}},{key:"replace",value:function(un){if(un.statics.blotName!==this.statics.blotName){var dn=St.default.create(this.statics.defaultChild);un.moveChildren(dn),this.appendChild(dn)}dt(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"replace",this).call(this,un)}}]),on}(jt.default);en.blotName="list",en.scope=St.default.Scope.BLOCK_BLOT,en.tagName=["OL","UL"],en.defaultChild="list-item",en.allowedChildren=[Kt],ot.ListItem=Kt,ot.default=en},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(56),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="italic",Rt.tagName=["EM","I"],ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(Ht,Yt){for(var zt=0;zt<Yt.length;zt++){var Kt=Yt[zt];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ht,Kt.key,Kt)}}return function(Ht,Yt,zt){return Yt&&Bt(Ht.prototype,Yt),zt&&Bt(Ht,zt),Ht}}(),dt=function Bt(Ht,Yt,zt){Ht===null&&(Ht=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(Ht,Yt);if(Kt===void 0){var en=Object.getPrototypeOf(Ht);return en===null?void 0:Bt(en,Yt,zt)}else{if("value"in Kt)return Kt.value;var tn=Kt.get;return tn===void 0?void 0:tn.call(zt)}},ft=ut(6),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft=function(Bt){jt(Ht,Bt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ct(Ht,null,[{key:"create",value:function(zt){return zt==="super"?document.createElement("sup"):zt==="sub"?document.createElement("sub"):dt(Ht.__proto__||Object.getPrototypeOf(Ht),"create",this).call(this,zt)}},{key:"formats",value:function(zt){if(zt.tagName==="SUB")return"sub";if(zt.tagName==="SUP")return"super"}}]),Ht}(St.default);Ft.blotName="script",Ft.tagName=["SUB","SUP"],ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(6),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="strike",Rt.tagName="S",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(6),dt=ft(ct);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="underline",Rt.tagName="U",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Yt(zt,Kt){for(var en=0;en<Kt.length;en++){var tn=Kt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(zt,tn.key,tn)}}return function(zt,Kt,en){return Kt&&Yt(zt.prototype,Kt),en&&Yt(zt,en),zt}}(),dt=function Yt(zt,Kt,en){zt===null&&(zt=Function.prototype);var tn=Object.getOwnPropertyDescriptor(zt,Kt);if(tn===void 0){var on=Object.getPrototypeOf(zt);return on===null?void 0:Yt(on,Kt,en)}else{if("value"in tn)return tn.value;var an=tn.get;return an===void 0?void 0:an.call(en)}},ft=ut(0),St=Tt(ft),kt=ut(27);function Tt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function Rt(Yt,zt){if(!(Yt instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt(Yt,zt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Yt}function Ft(Yt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Yt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,zt):Yt.__proto__=zt)}var Bt=["alt","height","width"],Ht=function(Yt){Ft(zt,Yt);function zt(){return Rt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"format",value:function(en,tn){Bt.indexOf(en)>-1?tn?this.domNode.setAttribute(en,tn):this.domNode.removeAttribute(en):dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"format",this).call(this,en,tn)}}],[{key:"create",value:function(en){var tn=dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this,en);return typeof en=="string"&&tn.setAttribute("src",this.sanitize(en)),tn}},{key:"formats",value:function(en){return Bt.reduce(function(tn,on){return en.hasAttribute(on)&&(tn[on]=en.getAttribute(on)),tn},{})}},{key:"match",value:function(en){return/\.(jpe?g|gif|png)$/.test(en)||/^data:image\/.+;base64/.test(en)}},{key:"sanitize",value:function(en){return(0,kt.sanitize)(en,["http","https","data"])?en:"//:0"}},{key:"value",value:function(en){return en.getAttribute("src")}}]),zt}(St.default.Embed);Ht.blotName="image",Ht.tagName="IMG",ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Yt(zt,Kt){for(var en=0;en<Kt.length;en++){var tn=Kt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(zt,tn.key,tn)}}return function(zt,Kt,en){return Kt&&Yt(zt.prototype,Kt),en&&Yt(zt,en),zt}}(),dt=function Yt(zt,Kt,en){zt===null&&(zt=Function.prototype);var tn=Object.getOwnPropertyDescriptor(zt,Kt);if(tn===void 0){var on=Object.getPrototypeOf(zt);return on===null?void 0:Yt(on,Kt,en)}else{if("value"in tn)return tn.value;var an=tn.get;return an===void 0?void 0:an.call(en)}},ft=ut(4),St=ut(27),kt=Tt(St);function Tt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function Rt(Yt,zt){if(!(Yt instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt(Yt,zt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Yt}function Ft(Yt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Yt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,zt):Yt.__proto__=zt)}var Bt=["height","width"],Ht=function(Yt){Ft(zt,Yt);function zt(){return Rt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"format",value:function(en,tn){Bt.indexOf(en)>-1?tn?this.domNode.setAttribute(en,tn):this.domNode.removeAttribute(en):dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"format",this).call(this,en,tn)}}],[{key:"create",value:function(en){var tn=dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this,en);return tn.setAttribute("frameborder","0"),tn.setAttribute("allowfullscreen",!0),tn.setAttribute("src",this.sanitize(en)),tn}},{key:"formats",value:function(en){return Bt.reduce(function(tn,on){return en.hasAttribute(on)&&(tn[on]=en.getAttribute(on)),tn},{})}},{key:"sanitize",value:function(en){return kt.default.sanitize(en)}},{key:"value",value:function(en){return en.getAttribute("src")}}]),zt}(ft.BlockEmbed);Ht.blotName="video",Ht.className="ql-video",Ht.tagName="IFRAME",ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.FormulaBlot=void 0;var ct=function(){function en(tn,on){for(var an=0;an<on.length;an++){var un=on[an];un.enumerable=un.enumerable||!1,un.configurable=!0,"value"in un&&(un.writable=!0),Object.defineProperty(tn,un.key,un)}}return function(tn,on,an){return on&&en(tn.prototype,on),an&&en(tn,an),tn}}(),dt=function en(tn,on,an){tn===null&&(tn=Function.prototype);var un=Object.getOwnPropertyDescriptor(tn,on);if(un===void 0){var dn=Object.getPrototypeOf(tn);return dn===null?void 0:en(dn,on,an)}else{if("value"in un)return un.value;var Sn=un.get;return Sn===void 0?void 0:Sn.call(an)}},ft=ut(35),St=Ft(ft),kt=ut(5),Tt=Ft(kt),Rt=ut(9),jt=Ft(Rt);function Ft(en){return en&&en.__esModule?en:{default:en}}function Bt(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}function Ht(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&(typeof tn=="object"||typeof tn=="function")?tn:en}function Yt(en,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}var zt=function(en){Yt(tn,en);function tn(){return Bt(this,tn),Ht(this,(tn.__proto__||Object.getPrototypeOf(tn)).apply(this,arguments))}return ct(tn,null,[{key:"create",value:function(an){var un=dt(tn.__proto__||Object.getPrototypeOf(tn),"create",this).call(this,an);return typeof an=="string"&&(window.katex.render(an,un,{throwOnError:!1,errorColor:"#f00"}),un.setAttribute("data-value",an)),un}},{key:"value",value:function(an){return an.getAttribute("data-value")}}]),tn}(St.default);zt.blotName="formula",zt.className="ql-formula",zt.tagName="SPAN";var Kt=function(en){Yt(tn,en),ct(tn,null,[{key:"register",value:function(){Tt.default.register(zt,!0)}}]);function tn(){Bt(this,tn);var on=Ht(this,(tn.__proto__||Object.getPrototypeOf(tn)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return on}return tn}(jt.default);ot.FormulaBlot=zt,ot.default=Kt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.CodeToken=ot.CodeBlock=void 0;var ct=function(){function an(un,dn){for(var Sn=0;Sn<dn.length;Sn++){var mn=dn[Sn];mn.enumerable=mn.enumerable||!1,mn.configurable=!0,"value"in mn&&(mn.writable=!0),Object.defineProperty(un,mn.key,mn)}}return function(un,dn,Sn){return dn&&an(un.prototype,dn),Sn&&an(un,Sn),un}}(),dt=function an(un,dn,Sn){un===null&&(un=Function.prototype);var mn=Object.getOwnPropertyDescriptor(un,dn);if(mn===void 0){var bn=Object.getPrototypeOf(un);return bn===null?void 0:an(bn,dn,Sn)}else{if("value"in mn)return mn.value;var En=mn.get;return En===void 0?void 0:En.call(Sn)}},ft=ut(0),St=Ht(ft),kt=ut(5),Tt=Ht(kt),Rt=ut(9),jt=Ht(Rt),Ft=ut(13),Bt=Ht(Ft);function Ht(an){return an&&an.__esModule?an:{default:an}}function Yt(an,un){if(!(an instanceof un))throw new TypeError("Cannot call a class as a function")}function zt(an,un){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&(typeof un=="object"||typeof un=="function")?un:an}function Kt(an,un){if(typeof un!="function"&&un!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof un);an.prototype=Object.create(un&&un.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(an,un):an.__proto__=un)}var en=function(an){Kt(un,an);function un(){return Yt(this,un),zt(this,(un.__proto__||Object.getPrototypeOf(un)).apply(this,arguments))}return ct(un,[{key:"replaceWith",value:function(Sn){this.domNode.textContent=this.domNode.textContent,this.attach(),dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"replaceWith",this).call(this,Sn)}},{key:"highlight",value:function(Sn){var mn=this.domNode.textContent;this.cachedText!==mn&&((mn.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=Sn(mn),this.domNode.normalize(),this.attach()),this.cachedText=mn)}}]),un}(Bt.default);en.className="ql-syntax";var tn=new St.default.Attributor.Class("token","hljs",{scope:St.default.Scope.INLINE}),on=function(an){Kt(un,an),ct(un,null,[{key:"register",value:function(){Tt.default.register(tn,!0),Tt.default.register(en,!0)}}]);function un(dn,Sn){Yt(this,un);var mn=zt(this,(un.__proto__||Object.getPrototypeOf(un)).call(this,dn,Sn));if(typeof mn.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var bn=null;return mn.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(bn),bn=setTimeout(function(){mn.highlight(),bn=null},mn.options.interval)}),mn.highlight(),mn}return ct(un,[{key:"highlight",value:function(){var Sn=this;if(!this.quill.selection.composing){this.quill.update(Tt.default.sources.USER);var mn=this.quill.getSelection();this.quill.scroll.descendants(en).forEach(function(bn){bn.highlight(Sn.options.highlight)}),this.quill.update(Tt.default.sources.SILENT),mn!=null&&this.quill.setSelection(mn,Tt.default.sources.SILENT)}}}]),un}(jt.default);on.DEFAULTS={highlight:function(){return window.hljs==null?null:function(an){var un=window.hljs.highlightAuto(an);return un.value}}(),interval:1e3},ot.CodeBlock=en,ot.CodeToken=tn,ot.default=on},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BubbleTooltip=void 0;var ct=function un(dn,Sn,mn){dn===null&&(dn=Function.prototype);var bn=Object.getOwnPropertyDescriptor(dn,Sn);if(bn===void 0){var En=Object.getPrototypeOf(dn);return En===null?void 0:un(En,Sn,mn)}else{if("value"in bn)return bn.value;var kn=bn.get;return kn===void 0?void 0:kn.call(mn)}},dt=function(){function un(dn,Sn){for(var mn=0;mn<Sn.length;mn++){var bn=Sn[mn];bn.enumerable=bn.enumerable||!1,bn.configurable=!0,"value"in bn&&(bn.writable=!0),Object.defineProperty(dn,bn.key,bn)}}return function(dn,Sn,mn){return Sn&&un(dn.prototype,Sn),mn&&un(dn,mn),dn}}(),ft=ut(3),St=Yt(ft),kt=ut(8),Tt=Yt(kt),Rt=ut(43),jt=Yt(Rt),Ft=ut(15),Bt=ut(41),Ht=Yt(Bt);function Yt(un){return un&&un.__esModule?un:{default:un}}function zt(un,dn){if(!(un instanceof dn))throw new TypeError("Cannot call a class as a function")}function Kt(un,dn){if(!un)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&(typeof dn=="object"||typeof dn=="function")?dn:un}function en(un,dn){if(typeof dn!="function"&&dn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof dn);un.prototype=Object.create(dn&&dn.prototype,{constructor:{value:un,enumerable:!1,writable:!0,configurable:!0}}),dn&&(Object.setPrototypeOf?Object.setPrototypeOf(un,dn):un.__proto__=dn)}var tn=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],on=function(un){en(dn,un);function dn(Sn,mn){zt(this,dn),mn.modules.toolbar!=null&&mn.modules.toolbar.container==null&&(mn.modules.toolbar.container=tn);var bn=Kt(this,(dn.__proto__||Object.getPrototypeOf(dn)).call(this,Sn,mn));return bn.quill.container.classList.add("ql-bubble"),bn}return dt(dn,[{key:"extendToolbar",value:function(mn){this.tooltip=new an(this.quill,this.options.bounds),this.tooltip.root.appendChild(mn.container),this.buildButtons([].slice.call(mn.container.querySelectorAll("button")),Ht.default),this.buildPickers([].slice.call(mn.container.querySelectorAll("select")),Ht.default)}}]),dn}(jt.default);on.DEFAULTS=(0,St.default)(!0,{},jt.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(dn){dn?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var an=function(un){en(dn,un);function dn(Sn,mn){zt(this,dn);var bn=Kt(this,(dn.__proto__||Object.getPrototypeOf(dn)).call(this,Sn,mn));return bn.quill.on(Tt.default.events.EDITOR_CHANGE,function(En,kn,Pn,Ln){if(En===Tt.default.events.SELECTION_CHANGE)if(kn!=null&&kn.length>0&&Ln===Tt.default.sources.USER){bn.show(),bn.root.style.left="0px",bn.root.style.width="",bn.root.style.width=bn.root.offsetWidth+"px";var gn=bn.quill.getLines(kn.index,kn.length);if(gn.length===1)bn.position(bn.quill.getBounds(kn));else{var Mn=gn[gn.length-1],yn=bn.quill.getIndex(Mn),vn=Math.min(Mn.length()-1,kn.index+kn.length-yn),On=bn.quill.getBounds(new Ft.Range(yn,vn));bn.position(On)}}else document.activeElement!==bn.textbox&&bn.quill.hasFocus()&&bn.hide()}),bn}return dt(dn,[{key:"listen",value:function(){var mn=this;ct(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){mn.root.classList.remove("ql-editing")}),this.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!mn.root.classList.contains("ql-hidden")){var bn=mn.quill.getSelection();bn!=null&&mn.position(mn.quill.getBounds(bn))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(mn){var bn=ct(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"position",this).call(this,mn),En=this.root.querySelector(".ql-tooltip-arrow");if(En.style.marginLeft="",bn===0)return bn;En.style.marginLeft=-1*bn-En.offsetWidth/2+"px"}}]),dn}(Rt.BaseTooltip);an.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),ot.BubbleTooltip=an,ot.default=on},function(et,ot,ut){et.exports=ut(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var it=function(g,et){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ut){ot.__proto__=ut}||function(ot,ut){for(var ct in ut)ut.hasOwnProperty(ct)&&(ot[ct]=ut[ct])},it(g,et)};return function(g,et){it(g,et);function ot(){this.constructor=g}g.prototype=et===null?Object.create(et):(ot.prototype=et.prototype,new ot)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(it){for(var g,et=1,ot=arguments.length;et<ot;et++){g=arguments[et];for(var ut in g)Object.prototype.hasOwnProperty.call(g,ut)&&(it[ut]=g[ut])}return it},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ut=0,g=0;g<et;g++)for(var ct=arguments[g],dt=0,ft=ct.length;dt<ft;dt++,ut++)ot[ut]=ct[dt];return ot},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(it){__extends(g,it);function g(et){var ot=it.call(this,et)||this;ot.dirtyProps=["modules","formats","bounds","theme","children"],ot.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],ot.state={generation:0},ot.selection=null,ot.onEditorChange=function(ct,dt,ft,St){var kt,Tt,Rt,jt;ct==="text-change"?(Tt=(kt=ot).onEditorChangeText)===null||Tt===void 0||Tt.call(kt,ot.editor.root.innerHTML,dt,St,ot.unprivilegedEditor):ct==="selection-change"&&((jt=(Rt=ot).onEditorChangeSelection)===null||jt===void 0||jt.call(Rt,dt,St,ot.unprivilegedEditor))};var ut=ot.isControlled()?et.value:et.defaultValue;return ot.value=ut??"",ot}return g.prototype.validateProps=function(et){var ot;if(react_1.default.Children.count(et.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(et.children)){var ut=react_1.default.Children.only(et.children);if(((ot=ut)===null||ot===void 0?void 0:ot.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&et.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(et,ot){var ut=this,ct;if(this.validateProps(et),!this.editor||this.state.generation!==ot.generation)return!0;if("value"in et){var dt=this.getEditorContents(),ft=(ct=et.value,ct??"");this.isEqualValue(ft,dt)||this.setEditorContents(this.editor,ft)}return et.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,et.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(St){return!isEqual_1.default(et[St],ut.props[St])})},g.prototype.shouldComponentRegenerate=function(et){var ot=this;return this.dirtyProps.some(function(ut){return!isEqual_1.default(et[ut],ot.props[ut])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(et,ot){var ut=this;if(this.editor&&this.shouldComponentRegenerate(et)){var ct=this.editor.getContents(),dt=this.editor.getSelection();this.regenerationSnapshot={delta:ct,selection:dt},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==ot.generation){var ft=this.regenerationSnapshot,ct=ft.delta,St=ft.selection;delete this.regenerationSnapshot,this.instantiateEditor();var kt=this.editor;kt.setContents(ct),postpone(function(){return ut.setEditorSelection(kt,St)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(et,ot){var ut=new quill_1.default(et,ot);return ot.tabIndex!=null&&this.setEditorTabIndex(ut,ot.tabIndex),this.hookEditor(ut),ut},g.prototype.hookEditor=function(et){this.unprivilegedEditor=this.makeUnprivilegedEditor(et),et.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(et){et.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(et){return et&&et.ops},g.prototype.isEqualValue=function(et,ot){return this.isDelta(et)&&this.isDelta(ot)?isEqual_1.default(et.ops,ot.ops):isEqual_1.default(et,ot)},g.prototype.setEditorContents=function(et,ot){var ut=this;this.value=ot;var ct=this.getEditorSelection();typeof ot=="string"?et.setContents(et.clipboard.convert(ot)):et.setContents(ot),postpone(function(){return ut.setEditorSelection(et,ct)})},g.prototype.setEditorSelection=function(et,ot){if(this.selection=ot,ot){var ut=et.getLength();ot.index=Math.max(0,Math.min(ot.index,ut-1)),ot.length=Math.max(0,Math.min(ot.length,ut-1-ot.index)),et.setSelection(ot)}},g.prototype.setEditorTabIndex=function(et,ot){var ut,ct;!((ct=(ut=et)===null||ut===void 0?void 0:ut.scroll)===null||ct===void 0)&&ct.domNode&&(et.scroll.domNode.tabIndex=ot)},g.prototype.setEditorReadOnly=function(et,ot){ot?et.disable():et.enable()},g.prototype.makeUnprivilegedEditor=function(et){var ot=et;return{getHTML:function(){return ot.root.innerHTML},getLength:ot.getLength.bind(ot),getText:ot.getText.bind(ot),getContents:ot.getContents.bind(ot),getSelection:ot.getSelection.bind(ot),getBounds:ot.getBounds.bind(ot)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var et=react_dom_1.default.findDOMNode(this.editingArea);if(!et)throw new Error("Cannot find element for editing area");if(et.nodeType===3)throw new Error("Editing area cannot be a text node");return et},g.prototype.renderEditingArea=function(){var et=this,ot=this.props,ut=ot.children,ct=ot.preserveWhitespace,dt=this.state.generation,ft={key:dt,ref:function(St){et.editingArea=St}};return react_1.default.Children.count(ut)?react_1.default.cloneElement(react_1.default.Children.only(ut),ft):ct?react_1.default.createElement("pre",__assign({},ft)):react_1.default.createElement("div",__assign({},ft))},g.prototype.render=function(){var et;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(et=this.props.className,et??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(et,ot,ut,ct){var dt,ft;if(this.editor){var St=this.isDelta(this.value)?ct.getContents():ct.getHTML();St!==this.getEditorContents()&&(this.lastDeltaChangeSet=ot,this.value=St,(ft=(dt=this.props).onChange)===null||ft===void 0||ft.call(dt,et,ot,ut,ct))}},g.prototype.onEditorChangeSelection=function(et,ot,ut){var ct,dt,ft,St,kt,Tt;if(this.editor){var Rt=this.getEditorSelection(),jt=!Rt&&et,Ft=Rt&&!et;isEqual_1.default(et,Rt)||(this.selection=et,(dt=(ct=this.props).onChangeSelection)===null||dt===void 0||dt.call(ct,et,ot,ut),jt?(St=(ft=this.props).onFocus)===null||St===void 0||St.call(ft,et,ot,ut):Ft&&((Tt=(kt=this.props).onBlur)===null||Tt===void 0||Tt.call(kt,Rt,ot,ut)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=quill_1.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(react_1.default.Component);function postpone(it){Promise.resolve().then(it)}var lib=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib),quill_snow="";function LogoUploader({logoPreview:it,setLogo:g,setLogoPreview:et}){const ot=reactExports.useRef(null),ut=dt=>{const ft=dt.target.files[0];if(!ft)return;if(ft.size>2*1024*1024){y$4.error("File must be less than 2MB"),dt.target.value="";return}const St=new Image;St.onload=()=>{if(St.width>512||St.height>512){y$4.warning("Logo too large! Please use up to 512512 px."),dt.target.value="";return}const kt=new FileReader;kt.onloadend=()=>{g(kt.result),et(kt.result)},kt.readAsDataURL(ft)},St.src=URL.createObjectURL(ft)},ct=()=>{g(null),et(null),ot.current&&(ot.current.value=""),y$4.info("Logo removed")};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Brand Logo (Max 512512  2 MB)"}),jsxRuntimeExports.jsx("input",{ref:ot,type:"file",accept:"image/png, image/jpeg, image/webp",onChange:ut,className:`block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0 file:font-semibold
                   file:bg-royalPurple file:text-white hover:file:opacity-80`}),it&&jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-col items-center space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:it,alt:"Logo preview",className:"w-20 h-20 object-contain border border-gray-700 rounded-md"}),jsxRuntimeExports.jsx("button",{onClick:ct,type:"button",className:"absolute -top-2 -right-2 bg-gray-900 rounded-full p-1 hover:bg-gray-800",title:"Remove",children:jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400 hover:text-red-300"})})]})})]})}function UnsplashImagePicker({onSelect:it}){const[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState([]),[ct,dt]=reactExports.useState(1),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),Rt=reactExports.useRef(null);async function jt(Bt=1,Ht=!1){if(g.trim()){St(!0);try{const Yt=await axiosInstance.get(`https://cre8tlystudio.com/api/unsplash/search?query=${encodeURIComponent(g)}&per_page=30&page=${Bt}`),zt=Yt.data.results||Yt.data;(!zt||zt.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),ut(Kt=>Ht?[...Kt,...zt]:zt),Tt(zt.length>0),dt(Bt)}catch(Yt){console.error("Unsplash fetch failed:",Yt),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{St(!1)}}}const Ft=()=>{ut([]),dt(1),jt(1,!1)};return reactExports.useEffect(()=>{if(!Rt.current)return;const Bt=new IntersectionObserver(Ht=>{Ht[0].isIntersecting&&kt&&!ft&&jt(ct+1,!0)});return Bt.observe(Rt.current),()=>Bt.disconnect()},[kt,ft,ct,g]),jsxRuntimeExports.jsxs("div",{className:"space-y-4 bg-[#111] p-4 rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{value:g,onChange:Bt=>et(Bt.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:"flex-1 bg-gray-900 text-white p-2 rounded-lg border border-gray-700"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ft,disabled:ft,className:"bg-green text-black font-bold px-4 py-2 rounded-lg transition hover:bg-green-400",children:ft?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto relative",style:{maxHeight:"400px"},children:[ot.map(Bt=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>it(Bt.urls.full,Bt),children:[jsxRuntimeExports.jsx("img",{src:Bt.urls.small,alt:Bt.alt_description,className:"rounded-lg w-full h-40 object-cover group-hover:opacity-75 transition"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/60 px-1 rounded text-white",children:Bt.user.name})]},Bt.id)),kt&&!ft&&jsxRuntimeExports.jsx("div",{ref:Rt,className:"col-span-full h-8"}),ft&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-green rounded-full animate-spin"})})]})]})}function CoverUpload({setCover:it}){const[g,et]=reactExports.useState(null),[ot,ut]=reactExports.useState(null),{user:ct}=useAuth(),dt=reactExports.useRef(null),ft=useNavigate(),St=!(ct!=null&&ct.pro_covers),kt=jt=>{const Ft=jt.target.files[0];if(!Ft)return;if(Ft.size>1e3*1024*1024){y$4.error("File too large. Maximum 1GB allowed.");return}const Bt=new FileReader;Bt.onloadend=()=>{it(Bt.result),et(Bt.result),ut(null)},Bt.readAsDataURL(Ft)},Tt=()=>ft("/plans"),Rt=(jt,Ft)=>{it(jt),et(Ft.urls.small),ut({name:Ft.user.name,profile:Ft.user.links.html}),y$4.success("Cover image selected!")};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6 border border-gray-700 rounded-xl p-4 bg-gray-900/60 overflow-hidden",children:[St&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Tt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Unlock Pro Covers"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-300 font-semibold text-lg tracking-wide",children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                     text-black font-semibold text-xs px-3 py-1 rounded-full
                     shadow-[0_0_10px_rgba(168,130,255,0.6)]
                     border border-[#d2b6ff]/60 uppercase tracking-wider
                     ${St?"opacity-60":""}`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:dt,type:"file",accept:"image/*",onChange:kt,className:"hidden",disabled:St}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!St&&dt.current.click(),disabled:St,className:`px-5 py-2 rounded-md font-semibold text-sm shadow-md transition cursor-pointer flex items-center gap-2 
          ${St?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-green"}`,children:[jsxRuntimeExports.jsx(Image$4,{size:16})," Choose File"]}),!St&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Rt})}),g&&!St&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cover will appear before your first page."}),ot&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:ot.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:ot.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:"Unsplash"})]})]})]})}function PromptSelect({setText:it}){const[g,et]=reactExports.useState(!1),ot=(ut,ct)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-widest text-gray-300 bg-[#0a0a0a] sticky top-0 z-10 border-b border-gray-800",children:ut}),ct.map((dt,ft)=>jsxRuntimeExports.jsx("li",{onClick:()=>{it(dt.text),et(!1)},className:"px-4 py-2 text-gray-200 bg-[#0a0a0a] hover:bg-gradient-to-r from-[#00e07a] to-[#670fe7] hover:text-white cursor-pointer transition",children:dt.label},ft))]});return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Choose a Pre-Made Prompt"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>et(!g),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 text-left flex justify-between items-center hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx("span",{children:"Select a pre-made prompt..."}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),g&&jsxRuntimeExports.jsxs("ul",{className:`absolute z-50 mt-1 w-full max-h-60 overflow-y-auto 
                     rounded-lg border border-gray-700 shadow-lg
                     scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900`,style:{backgroundColor:"#0a0a0a",boxShadow:"0 0 25px rgba(0,0,0,0.7)"},children:[ot("Beginner",cannedPrompts.beginner),ot("Professional",cannedPrompts.professional),ot("Advanced",cannedPrompts.expert)]})]})}function ColorThemeChooser({bgTheme:it,setBgTheme:g}){const et=colorThemes.find(ot=>ot.name===it)||colorThemes[0];return jsxRuntimeExports.jsxs("div",{className:"mt-6 w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3 font-medium",children:"Theme Color"}),jsxRuntimeExports.jsx("div",{className:"h-14 w-full rounded-lg border border-gray-700 mb-4 shadow-inner transition-all duration-300",style:{backgroundColor:et.preview}}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 overflow-y-auto rounded-lg border border-gray-800 p-2",style:{maxHeight:"300px"},children:colorThemes.map(ot=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(ot.name),className:`relative w-full h-12 rounded-lg transition-all duration-200 focus:outline-none border shadow-[inset_0_1px_3px_rgba(255,255,255,0.2)] 
              ${it===ot.name?"border-green-400 ring-2 ring-green-500/60 scale-[1.05]":"border-gray-700 hover:border-green-300 hover:scale-[1.02]"}`,style:{background:ot.preview},children:[jsxRuntimeExports.jsx("div",{className:"glossy-overlay"}),jsxRuntimeExports.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide ${ot.name==="dark"||ot.name==="graphite"||ot.name==="royal"?"text-white":"text-black"}`,children:ot.label})]},ot.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Click a color to set your PDF background theme."})]})}function ThemeSelector({theme:it,setTheme:g}){return jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Font Style"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:themes.map(et=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(et.value),className:`p-4 rounded-xl border font-semibold shadow-md transition-transform duration-200 ease-out ${it===et.value?"border-green ring-2 ring-green/60 scale-[1.01]":"border-gray-700 hover:ring-1 hover:ring-green/40 hover:scale-[1.01]"}`,style:{background:"#111",color:et.textColor,fontFamily:et.value==="modern"?"Montserrat":et.value==="classic"?"AdobeArabic":"Bebas Neue"},children:jsxRuntimeExports.jsx("p",{className:"text-base",children:et.label})},et.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Each style uses a unique font in your final PDF."})]})}function PromptForm({text:it,setText:g,title:et,setTitle:ot,theme:ut,setTheme:ct,bgTheme:dt,setBgTheme:ft,pages:St,setPages:kt,setLogo:Tt,logoPreview:Rt,setLogoPreview:jt,link:Ft,setLink:Bt,cover:Ht,setCover:Yt,cta:zt,setCta:Kt,onSubmit:en,loading:tn,contentType:on}){const{user:an}=useAuth(),[un,dn]=reactExports.useState(""),[Sn,mn]=reactExports.useState(0),[bn,En]=reactExports.useState(!1),[kn,Pn]=reactExports.useState("");reactExports.useEffect(()=>{an!=null&&an.cta&&(!zt||zt.trim()==="")&&Kt(an.cta)},[an,an==null?void 0:an.cta]),reactExports.useEffect(()=>{const Mn=((it==null?void 0:it.replace(/<[^>]+>/g,"").trim())||"").length,yn=1e5,vn=yn*.9;mn(Mn),Mn>yn?(bn||y$4.error(`Your prompt is too long (${Mn.toLocaleString()} / ${yn.toLocaleString()} characters). Please shorten it before submitting.`,{autoClose:6e3}),En(!0),dn(" Your prompt exceeds the limit. Please shorten it.")):Mn>vn?(En(!1),dn(`Approaching limit  ${Mn.toLocaleString()} / ${yn.toLocaleString()} characters.`)):(En(!1),dn(""))},[it]);const Ln=gn=>{if(gn.preventDefault(),!it.replace(/<[^>]+>/g,"").trim()){Pn("Prompt is required before submission."),y$4.error("Please enter a prompt before submitting.");return}Pn(""),en(gn,on)};return jsxRuntimeExports.jsxs("form",{onSubmit:Ln,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages (25 max)"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"25",value:St??"",onChange:gn=>{const Mn=gn.target.value;kt(Mn===""?"":Math.min(25,Math.max(1,Number(Mn))))},className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg appearance-none"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-y-0 right-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(gn=>Math.max(1,Number(gn||1)-1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(gn=>Math.min(25,Number(gn||1)+1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""})]})]})]}),jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 mt-4 font-medium",children:"Document Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter a title for your project or document...",value:et,onChange:gn=>ot(gn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This title will appear at the top of your generated document."})]}),jsxRuntimeExports.jsx(PromptSelect,{setText:g}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-[250px] overflow-hidden rounded-lg border border-gray-600 bg-white",style:{color:"#111"},children:jsxRuntimeExports.jsx(ReactQuill$1,{theme:"snow",value:it,onChange:gn=>{g(gn),kn&&Pn("")},modules:{toolbar:!1},placeholder:"Write your prompt...",className:"h-[250px]"})}),kn&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium",children:kn}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-2",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium ${un.includes("")?"text-red-500":un?"text-yellow-500":"text-gray-400"}`,children:un||" "}),jsxRuntimeExports.jsxs("p",{className:`text-xs ${bn?"text-red-500":"text-gray-400"}`,children:[Sn.toLocaleString()," / 100,000"]})]})]}),jsxRuntimeExports.jsx(CoverUpload,{cover:Ht,setCover:Yt}),jsxRuntimeExports.jsx(LogoUploader,{logoPreview:Rt,setLogo:Tt,setLogoPreview:jt}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:dt,setBgTheme:ft}),jsxRuntimeExports.jsx(ThemeSelector,{theme:ut,setTheme:ct}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Add a Closing Message or Call-to-Action"}),(an==null?void 0:an.cta)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("select",{onChange:gn=>{const Mn=gn.target.value;Mn==="saved"?Kt(an.cta):Mn==="custom"&&Kt("")},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Choose CTA"}),jsxRuntimeExports.jsx("option",{value:"saved",children:"Use My Saved CTA"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Write New CTA"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic ml-2",children:zt===an.cta?"Using saved CTA":""})]}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter...`,value:zt,onChange:gn=>Kt(gn.target.value),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This message will appear at the end of your lead magnet."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Link or Call-to-Action"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:Ft,onChange:gn=>Bt(gn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This link will appear at the bottom of your PDF as a button."})]}),!tn&&jsxRuntimeExports.jsx("button",{disabled:!it.trim()||it==="<p><br></p>"||bn,type:"submit",className:`w-full px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${!it.trim()||it==="<p><br></p>"||bn?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-green font-semibold text-black hover:opacity-90"}`,children:" Submit Prompt"})]})}function SmartPromptBuilder({onPromptReady:it}){const[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState(""),[ct,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),{user:Rt,accessToken:jt}=useAuth(),Ft=async()=>{if(!g||!ot||!ct){y$4.error("Please fill out all required fields.");return}if(!(Rt!=null&&Rt.id)){y$4.error("You must be logged in to generate prompts.");return}Tt(!0);try{const Bt=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt-builder",{userId:Rt.id,audience:g,pain:ot,promise:ct,offer:ft},{headers:{Authorization:`Bearer ${jt}`}});it(Bt.data.prompt)}catch(Bt){console.error(Bt),y$4.error("Failed to generate prompt. Try again.")}finally{Tt(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-xl border border-gray-700 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Smart Prompt Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Answer a few quick questions so we can craft a personalized lead magnet prompt for you."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Who is this for?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: entrepreneurs, creators, small business owners",value:g,onChange:Bt=>et(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What problem are they facing?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: struggling to grow an email list or convert leads",value:ot,onChange:Bt=>ut(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What transformation or result do they want?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: consistently attract qualified leads every week",value:ct,onChange:Bt=>dt(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Whats your offer or next step? (optional)"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: join my course, book a free strategy call",value:ft,onChange:Bt=>St(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6 space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:kt,className:"flex-1 px-6 py-2 bg-green text-black font-semibold rounded hover:bg-green-500 transition",children:kt?"Generating...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(""),disabled:kt,className:"flex-1 px-6 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition",children:"Skip"})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$2=reactExports;function is$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$2.useState,useEffect$1=React$2.useEffect,useLayoutEffect=React$2.useLayoutEffect,useDebugValue$1=React$2.useDebugValue;function useSyncExternalStore$2(it,g){var et=g(),ot=useState({inst:{value:et,getSnapshot:g}}),ut=ot[0].inst,ct=ot[1];return useLayoutEffect(function(){ut.value=et,ut.getSnapshot=g,checkIfSnapshotChanged(ut)&&ct({inst:ut})},[it,et,g]),useEffect$1(function(){return checkIfSnapshotChanged(ut)&&ct({inst:ut}),it(function(){checkIfSnapshotChanged(ut)&&ct({inst:ut})})},[it]),useDebugValue$1(et),et}function checkIfSnapshotChanged(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!objectIs$1(it,et)}catch{return!0}}function useSyncExternalStore$1(it,g){return g()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$2.useSyncExternalStore!==void 0?React$2.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(it){this.content=it}OrderedMap.prototype={constructor:OrderedMap,find:function(it){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===it)return g;return-1},get:function(it){var g=this.find(it);return g==-1?void 0:this.content[g+1]},update:function(it,g,et){var ot=et&&et!=it?this.remove(et):this,ut=ot.find(it),ct=ot.content.slice();return ut==-1?ct.push(et||it,g):(ct[ut+1]=g,et&&(ct[ut]=et)),new OrderedMap(ct)},remove:function(it){var g=this.find(it);if(g==-1)return this;var et=this.content.slice();return et.splice(g,2),new OrderedMap(et)},addToStart:function(it,g){return new OrderedMap([it,g].concat(this.remove(it).content))},addToEnd:function(it,g){var et=this.remove(it).content.slice();return et.push(it,g),new OrderedMap(et)},addBefore:function(it,g,et){var ot=this.remove(g),ut=ot.content.slice(),ct=ot.find(it);return ut.splice(ct==-1?ut.length:ct,0,g,et),new OrderedMap(ut)},forEach:function(it){for(var g=0;g<this.content.length;g+=2)it(this.content[g],this.content[g+1])},prepend:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(it.content.concat(this.subtract(it).content)):this},append:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(this.subtract(it).content.concat(it.content)):this},subtract:function(it){var g=this;it=OrderedMap.from(it);for(var et=0;et<it.content.length;et+=2)g=g.remove(it.content[et]);return g},toObject:function(){var it={};return this.forEach(function(g,et){it[g]=et}),it},get size(){return this.content.length>>1}};OrderedMap.from=function(it){if(it instanceof OrderedMap)return it;var g=[];if(it)for(var et in it)g.push(et,it[et]);return new OrderedMap(g)};function findDiffStart(it,g,et){for(let ot=0;;ot++){if(ot==it.childCount||ot==g.childCount)return it.childCount==g.childCount?null:et;let ut=it.child(ot),ct=g.child(ot);if(ut==ct){et+=ut.nodeSize;continue}if(!ut.sameMarkup(ct))return et;if(ut.isText&&ut.text!=ct.text){for(let dt=0;ut.text[dt]==ct.text[dt];dt++)et++;return et}if(ut.content.size||ct.content.size){let dt=findDiffStart(ut.content,ct.content,et+1);if(dt!=null)return dt}et+=ut.nodeSize}}function findDiffEnd(it,g,et,ot){for(let ut=it.childCount,ct=g.childCount;;){if(ut==0||ct==0)return ut==ct?null:{a:et,b:ot};let dt=it.child(--ut),ft=g.child(--ct),St=dt.nodeSize;if(dt==ft){et-=St,ot-=St;continue}if(!dt.sameMarkup(ft))return{a:et,b:ot};if(dt.isText&&dt.text!=ft.text){let kt=0,Tt=Math.min(dt.text.length,ft.text.length);for(;kt<Tt&&dt.text[dt.text.length-kt-1]==ft.text[ft.text.length-kt-1];)kt++,et--,ot--;return{a:et,b:ot}}if(dt.content.size||ft.content.size){let kt=findDiffEnd(dt.content,ft.content,et-1,ot-1);if(kt)return kt}et-=St,ot-=St}}class Fragment{constructor(g,et){if(this.content=g,this.size=et||0,et==null)for(let ot=0;ot<g.length;ot++)this.size+=g[ot].nodeSize}nodesBetween(g,et,ot,ut=0,ct){for(let dt=0,ft=0;ft<et;dt++){let St=this.content[dt],kt=ft+St.nodeSize;if(kt>g&&ot(St,ut+ft,ct||null,dt)!==!1&&St.content.size){let Tt=ft+1;St.nodesBetween(Math.max(0,g-Tt),Math.min(St.content.size,et-Tt),ot,ut+Tt)}ft=kt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,et,ot,ut){let ct="",dt=!0;return this.nodesBetween(g,et,(ft,St)=>{let kt=ft.isText?ft.text.slice(Math.max(g,St)-St,et-St):ft.isLeaf?ut?typeof ut=="function"?ut(ft):ut:ft.type.spec.leafText?ft.type.spec.leafText(ft):"":"";ft.isBlock&&(ft.isLeaf&&kt||ft.isTextblock)&&ot&&(dt?dt=!1:ct+=ot),ct+=kt},0),ct}append(g){if(!g.size)return this;if(!this.size)return g;let et=this.lastChild,ot=g.firstChild,ut=this.content.slice(),ct=0;for(et.isText&&et.sameMarkup(ot)&&(ut[ut.length-1]=et.withText(et.text+ot.text),ct=1);ct<g.content.length;ct++)ut.push(g.content[ct]);return new Fragment(ut,this.size+g.size)}cut(g,et=this.size){if(g==0&&et==this.size)return this;let ot=[],ut=0;if(et>g)for(let ct=0,dt=0;dt<et;ct++){let ft=this.content[ct],St=dt+ft.nodeSize;St>g&&((dt<g||St>et)&&(ft.isText?ft=ft.cut(Math.max(0,g-dt),Math.min(ft.text.length,et-dt)):ft=ft.cut(Math.max(0,g-dt-1),Math.min(ft.content.size,et-dt-1))),ot.push(ft),ut+=ft.nodeSize),dt=St}return new Fragment(ot,ut)}cutByIndex(g,et){return g==et?Fragment.empty:g==0&&et==this.content.length?this:new Fragment(this.content.slice(g,et))}replaceChild(g,et){let ot=this.content[g];if(ot==et)return this;let ut=this.content.slice(),ct=this.size+et.nodeSize-ot.nodeSize;return ut[g]=et,new Fragment(ut,ct)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let et=0;et<this.content.length;et++)if(!this.content[et].eq(g.content[et]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let et=this.content[g];if(!et)throw new RangeError("Index "+g+" out of range for "+this);return et}maybeChild(g){return this.content[g]||null}forEach(g){for(let et=0,ot=0;et<this.content.length;et++){let ut=this.content[et];g(ut,ot,et),ot+=ut.nodeSize}}findDiffStart(g,et=0){return findDiffStart(this,g,et)}findDiffEnd(g,et=this.size,ot=g.size){return findDiffEnd(this,g,et,ot)}findIndex(g){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let et=0,ot=0;;et++){let ut=this.child(et),ct=ot+ut.nodeSize;if(ct>=g)return ct==g?retIndex(et+1,ct):retIndex(et,ot);ot=ct}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,et){if(!et)return Fragment.empty;if(!Array.isArray(et))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(et.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let et,ot=0;for(let ut=0;ut<g.length;ut++){let ct=g[ut];ot+=ct.nodeSize,ut&&ct.isText&&g[ut-1].sameMarkup(ct)?(et||(et=g.slice(0,ut)),et[et.length-1]=ct.withText(et[et.length-1].text+ct.text)):et&&et.push(ct)}return new Fragment(et||g,ot)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(it,g){return found.index=it,found.offset=g,found}function compareDeep(it,g){if(it===g)return!0;if(!(it&&typeof it=="object")||!(g&&typeof g=="object"))return!1;let et=Array.isArray(it);if(Array.isArray(g)!=et)return!1;if(et){if(it.length!=g.length)return!1;for(let ot=0;ot<it.length;ot++)if(!compareDeep(it[ot],g[ot]))return!1}else{for(let ot in it)if(!(ot in g)||!compareDeep(it[ot],g[ot]))return!1;for(let ot in g)if(!(ot in it))return!1}return!0}let Mark$1=class s3{constructor(g,et){this.type=g,this.attrs=et}addToSet(g){let et,ot=!1;for(let ut=0;ut<g.length;ut++){let ct=g[ut];if(this.eq(ct))return g;if(this.type.excludes(ct.type))et||(et=g.slice(0,ut));else{if(ct.type.excludes(this.type))return g;!ot&&ct.type.rank>this.type.rank&&(et||(et=g.slice(0,ut)),et.push(this),ot=!0),et&&et.push(ct)}}return et||(et=g.slice()),ot||et.push(this),et}removeFromSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return g.slice(0,et).concat(g.slice(et+1));return g}isInSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Mark.fromJSON");let ot=g.marks[et.type];if(!ot)throw new RangeError(`There is no mark type ${et.type} in this schema`);let ut=ot.create(et.attrs);return ot.checkAttrs(ut.attrs),ut}static sameSet(g,et){if(g==et)return!0;if(g.length!=et.length)return!1;for(let ot=0;ot<g.length;ot++)if(!g[ot].eq(et[ot]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return s3.none;if(g instanceof s3)return[g];let et=g.slice();return et.sort((ot,ut)=>ot.type.rank-ut.type.rank),et}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,et,ot){this.content=g,this.openStart=et,this.openEnd=ot}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,et){let ot=insertInto(this.content,g+this.openStart,et);return ot&&new Slice(ot,this.openStart,this.openEnd)}removeBetween(g,et){return new Slice(removeRange(this.content,g+this.openStart,et+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,et){if(!et)return Slice.empty;let ot=et.openStart||0,ut=et.openEnd||0;if(typeof ot!="number"||typeof ut!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,et.content),ot,ut)}static maxOpen(g,et=!0){let ot=0,ut=0;for(let ct=g.firstChild;ct&&!ct.isLeaf&&(et||!ct.type.spec.isolating);ct=ct.firstChild)ot++;for(let ct=g.lastChild;ct&&!ct.isLeaf&&(et||!ct.type.spec.isolating);ct=ct.lastChild)ut++;return new Slice(g,ot,ut)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(it,g,et){let{index:ot,offset:ut}=it.findIndex(g),ct=it.maybeChild(ot),{index:dt,offset:ft}=it.findIndex(et);if(ut==g||ct.isText){if(ft!=et&&!it.child(dt).isText)throw new RangeError("Removing non-flat range");return it.cut(0,g).append(it.cut(et))}if(ot!=dt)throw new RangeError("Removing non-flat range");return it.replaceChild(ot,ct.copy(removeRange(ct.content,g-ut-1,et-ut-1)))}function insertInto(it,g,et,ot){let{index:ut,offset:ct}=it.findIndex(g),dt=it.maybeChild(ut);if(ct==g||dt.isText)return ot&&!ot.canReplace(ut,ut,et)?null:it.cut(0,g).append(et).append(it.cut(g));let ft=insertInto(dt.content,g-ct-1,et,dt);return ft&&it.replaceChild(ut,dt.copy(ft))}function replace(it,g,et){if(et.openStart>it.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(it.depth-et.openStart!=g.depth-et.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(it,g,et,0)}function replaceOuter(it,g,et,ot){let ut=it.index(ot),ct=it.node(ot);if(ut==g.index(ot)&&ot<it.depth-et.openStart){let dt=replaceOuter(it,g,et,ot+1);return ct.copy(ct.content.replaceChild(ut,dt))}else if(et.content.size)if(!et.openStart&&!et.openEnd&&it.depth==ot&&g.depth==ot){let dt=it.parent,ft=dt.content;return close(dt,ft.cut(0,it.parentOffset).append(et.content).append(ft.cut(g.parentOffset)))}else{let{start:dt,end:ft}=prepareSliceForReplace(et,it);return close(ct,replaceThreeWay(it,dt,ft,g,ot))}else return close(ct,replaceTwoWay(it,g,ot))}function checkJoin(it,g){if(!g.type.compatibleContent(it.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+it.type.name)}function joinable$1(it,g,et){let ot=it.node(et);return checkJoin(ot,g.node(et)),ot}function addNode(it,g){let et=g.length-1;et>=0&&it.isText&&it.sameMarkup(g[et])?g[et]=it.withText(g[et].text+it.text):g.push(it)}function addRange(it,g,et,ot){let ut=(g||it).node(et),ct=0,dt=g?g.index(et):ut.childCount;it&&(ct=it.index(et),it.depth>et?ct++:it.textOffset&&(addNode(it.nodeAfter,ot),ct++));for(let ft=ct;ft<dt;ft++)addNode(ut.child(ft),ot);g&&g.depth==et&&g.textOffset&&addNode(g.nodeBefore,ot)}function close(it,g){return it.type.checkContent(g),it.copy(g)}function replaceThreeWay(it,g,et,ot,ut){let ct=it.depth>ut&&joinable$1(it,g,ut+1),dt=ot.depth>ut&&joinable$1(et,ot,ut+1),ft=[];return addRange(null,it,ut,ft),ct&&dt&&g.index(ut)==et.index(ut)?(checkJoin(ct,dt),addNode(close(ct,replaceThreeWay(it,g,et,ot,ut+1)),ft)):(ct&&addNode(close(ct,replaceTwoWay(it,g,ut+1)),ft),addRange(g,et,ut,ft),dt&&addNode(close(dt,replaceTwoWay(et,ot,ut+1)),ft)),addRange(ot,null,ut,ft),new Fragment(ft)}function replaceTwoWay(it,g,et){let ot=[];if(addRange(null,it,et,ot),it.depth>et){let ut=joinable$1(it,g,et+1);addNode(close(ut,replaceTwoWay(it,g,et+1)),ot)}return addRange(g,null,et,ot),new Fragment(ot)}function prepareSliceForReplace(it,g){let et=g.depth-it.openStart,ut=g.node(et).copy(it.content);for(let ct=et-1;ct>=0;ct--)ut=g.node(ct).copy(Fragment.from(ut));return{start:ut.resolveNoCache(it.openStart+et),end:ut.resolveNoCache(ut.content.size-it.openEnd-et)}}class ResolvedPos{constructor(g,et,ot){this.pos=g,this.path=et,this.parentOffset=ot,this.depth=et.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,et=this.index(this.depth);if(et==g.childCount)return null;let ot=this.pos-this.path[this.path.length-1],ut=g.child(et);return ot?g.child(et).cut(ot):ut}get nodeBefore(){let g=this.index(this.depth),et=this.pos-this.path[this.path.length-1];return et?this.parent.child(g).cut(0,et):g==0?null:this.parent.child(g-1)}posAtIndex(g,et){et=this.resolveDepth(et);let ot=this.path[et*3],ut=et==0?0:this.path[et*3-1]+1;for(let ct=0;ct<g;ct++)ut+=ot.child(ct).nodeSize;return ut}marks(){let g=this.parent,et=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(et).marks;let ot=g.maybeChild(et-1),ut=g.maybeChild(et);if(!ot){let ft=ot;ot=ut,ut=ft}let ct=ot.marks;for(var dt=0;dt<ct.length;dt++)ct[dt].type.spec.inclusive===!1&&(!ut||!ct[dt].isInSet(ut.marks))&&(ct=ct[dt--].removeFromSet(ct));return ct}marksAcross(g){let et=this.parent.maybeChild(this.index());if(!et||!et.isInline)return null;let ot=et.marks,ut=g.parent.maybeChild(g.index());for(var ct=0;ct<ot.length;ct++)ot[ct].type.spec.inclusive===!1&&(!ut||!ot[ct].isInSet(ut.marks))&&(ot=ot[ct--].removeFromSet(ot));return ot}sharedDepth(g){for(let et=this.depth;et>0;et--)if(this.start(et)<=g&&this.end(et)>=g)return et;return 0}blockRange(g=this,et){if(g.pos<this.pos)return g.blockRange(this);for(let ot=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);ot>=0;ot--)if(g.pos<=this.end(ot)&&(!et||et(this.node(ot))))return new NodeRange(this,g,ot);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let et=1;et<=this.depth;et++)g+=(g?"/":"")+this.node(et).type.name+"_"+this.index(et-1);return g+":"+this.parentOffset}static resolve(g,et){if(!(et>=0&&et<=g.content.size))throw new RangeError("Position "+et+" out of range");let ot=[],ut=0,ct=et;for(let dt=g;;){let{index:ft,offset:St}=dt.content.findIndex(ct),kt=ct-St;if(ot.push(dt,ft,ut+St),!kt||(dt=dt.child(ft),dt.isText))break;ct=kt-1,ut+=St+1}return new ResolvedPos(et,ot,ct)}static resolveCached(g,et){let ot=resolveCache.get(g);if(ot)for(let ct=0;ct<ot.elts.length;ct++){let dt=ot.elts[ct];if(dt.pos==et)return dt}else resolveCache.set(g,ot=new ResolveCache);let ut=ot.elts[ot.i]=ResolvedPos.resolve(g,et);return ot.i=(ot.i+1)%resolveCacheSize,ut}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,et,ot){this.$from=g,this.$to=et,this.depth=ot}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class a3{constructor(g,et,ot,ut=Mark$1.none){this.type=g,this.attrs=et,this.marks=ut,this.content=ot||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,et,ot,ut=0){this.content.nodesBetween(g,et,ot,ut,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,et,ot,ut){return this.content.textBetween(g,et,ot,ut)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,et,ot){return this.type==g&&compareDeep(this.attrs,et||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,ot||Mark$1.none)}copy(g=null){return g==this.content?this:new a3(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new a3(this.type,this.attrs,this.content,g)}cut(g,et=this.content.size){return g==0&&et==this.content.size?this:this.copy(this.content.cut(g,et))}slice(g,et=this.content.size,ot=!1){if(g==et)return Slice.empty;let ut=this.resolve(g),ct=this.resolve(et),dt=ot?0:ut.sharedDepth(et),ft=ut.start(dt),kt=ut.node(dt).content.cut(ut.pos-ft,ct.pos-ft);return new Slice(kt,ut.depth-dt,ct.depth-dt)}replace(g,et,ot){return replace(this.resolve(g),this.resolve(et),ot)}nodeAt(g){for(let et=this;;){let{index:ot,offset:ut}=et.content.findIndex(g);if(et=et.maybeChild(ot),!et)return null;if(ut==g||et.isText)return et;g-=ut+1}}childAfter(g){let{index:et,offset:ot}=this.content.findIndex(g);return{node:this.content.maybeChild(et),index:et,offset:ot}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:et,offset:ot}=this.content.findIndex(g);if(ot<g)return{node:this.content.child(et),index:et,offset:ot};let ut=this.content.child(et-1);return{node:ut,index:et-1,offset:ot-ut.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,et,ot){let ut=!1;return et>g&&this.nodesBetween(g,et,ct=>(ot.isInSet(ct.marks)&&(ut=!0),!ut)),ut}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let et=this.type.contentMatch.matchFragment(this.content,0,g);if(!et)throw new Error("Called contentMatchAt on a node with invalid content");return et}canReplace(g,et,ot=Fragment.empty,ut=0,ct=ot.childCount){let dt=this.contentMatchAt(g).matchFragment(ot,ut,ct),ft=dt&&dt.matchFragment(this.content,et);if(!ft||!ft.validEnd)return!1;for(let St=ut;St<ct;St++)if(!this.type.allowsMarks(ot.child(St).marks))return!1;return!0}canReplaceWith(g,et,ot,ut){if(ut&&!this.type.allowsMarks(ut))return!1;let ct=this.contentMatchAt(g).matchType(ot),dt=ct&&ct.matchFragment(this.content,et);return dt?dt.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let et=0;et<this.marks.length;et++){let ot=this.marks[et];ot.type.checkAttrs(ot.attrs),g=ot.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(et=>et.type.name)}`);this.content.forEach(et=>et.check())}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(et=>et.toJSON())),g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Node.fromJSON");let ot;if(et.marks){if(!Array.isArray(et.marks))throw new RangeError("Invalid mark data for Node.fromJSON");ot=et.marks.map(g.markFromJSON)}if(et.type=="text"){if(typeof et.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(et.text,ot)}let ut=Fragment.fromJSON(g,et.content),ct=g.nodeType(et.type).create(et.attrs,ut,ot);return ct.type.checkAttrs(ct.attrs),ct}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(g,et,ot,ut){if(super(g,et,null,ut),!ot)throw new RangeError("Empty text nodes are not allowed");this.text=ot}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,et){return this.text.slice(g,et)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,et=this.text.length){return g==0&&et==this.text.length?this:this.withText(this.text.slice(g,et))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(it,g){for(let et=it.length-1;et>=0;et--)g=it[et].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,et){let ot=new TokenStream(g,et);if(ot.next==null)return ContentMatch.empty;let ut=parseExpr(ot);ot.next&&ot.err("Unexpected trailing text");let ct=dfa(nfa(ut));return checkForDeadEnds(ct,ot),ct}matchType(g){for(let et=0;et<this.next.length;et++)if(this.next[et].type==g)return this.next[et].next;return null}matchFragment(g,et=0,ot=g.childCount){let ut=this;for(let ct=et;ut&&ct<ot;ct++)ut=ut.matchType(g.child(ct).type);return ut}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:et}=this.next[g];if(!(et.isText||et.hasRequiredAttrs()))return et}return null}compatible(g){for(let et=0;et<this.next.length;et++)for(let ot=0;ot<g.next.length;ot++)if(this.next[et].type==g.next[ot].type)return!0;return!1}fillBefore(g,et=!1,ot=0){let ut=[this];function ct(dt,ft){let St=dt.matchFragment(g,ot);if(St&&(!et||St.validEnd))return Fragment.from(ft.map(kt=>kt.createAndFill()));for(let kt=0;kt<dt.next.length;kt++){let{type:Tt,next:Rt}=dt.next[kt];if(!(Tt.isText||Tt.hasRequiredAttrs())&&ut.indexOf(Rt)==-1){ut.push(Rt);let jt=ct(Rt,ft.concat(Tt));if(jt)return jt}}return null}return ct(this,[])}findWrapping(g){for(let ot=0;ot<this.wrapCache.length;ot+=2)if(this.wrapCache[ot]==g)return this.wrapCache[ot+1];let et=this.computeWrapping(g);return this.wrapCache.push(g,et),et}computeWrapping(g){let et=Object.create(null),ot=[{match:this,type:null,via:null}];for(;ot.length;){let ut=ot.shift(),ct=ut.match;if(ct.matchType(g)){let dt=[];for(let ft=ut;ft.type;ft=ft.via)dt.push(ft.type);return dt.reverse()}for(let dt=0;dt<ct.next.length;dt++){let{type:ft,next:St}=ct.next[dt];!ft.isLeaf&&!ft.hasRequiredAttrs()&&!(ft.name in et)&&(!ut.type||St.validEnd)&&(ot.push({match:ft.contentMatch,type:ft,via:ut}),et[ft.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function et(ot){g.push(ot);for(let ut=0;ut<ot.next.length;ut++)g.indexOf(ot.next[ut].next)==-1&&et(ot.next[ut].next)}return et(this),g.map((ot,ut)=>{let ct=ut+(ot.validEnd?"*":" ")+" ";for(let dt=0;dt<ot.next.length;dt++)ct+=(dt?", ":"")+ot.next[dt].type.name+"->"+g.indexOf(ot.next[dt].next);return ct}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,et){this.string=g,this.nodeTypes=et,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(it){let g=[];do g.push(parseExprSeq(it));while(it.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(it){let g=[];do g.push(parseExprSubscript(it));while(it.next&&it.next!=")"&&it.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(it){let g=parseExprAtom(it);for(;;)if(it.eat("+"))g={type:"plus",expr:g};else if(it.eat("*"))g={type:"star",expr:g};else if(it.eat("?"))g={type:"opt",expr:g};else if(it.eat("{"))g=parseExprRange(it,g);else break;return g}function parseNum(it){/\D/.test(it.next)&&it.err("Expected number, got '"+it.next+"'");let g=Number(it.next);return it.pos++,g}function parseExprRange(it,g){let et=parseNum(it),ot=et;return it.eat(",")&&(it.next!="}"?ot=parseNum(it):ot=-1),it.eat("}")||it.err("Unclosed braced range"),{type:"range",min:et,max:ot,expr:g}}function resolveName(it,g){let et=it.nodeTypes,ot=et[g];if(ot)return[ot];let ut=[];for(let ct in et){let dt=et[ct];dt.isInGroup(g)&&ut.push(dt)}return ut.length==0&&it.err("No node type or group '"+g+"' found"),ut}function parseExprAtom(it){if(it.eat("(")){let g=parseExpr(it);return it.eat(")")||it.err("Missing closing paren"),g}else if(/\W/.test(it.next))it.err("Unexpected token '"+it.next+"'");else{let g=resolveName(it,it.next).map(et=>(it.inline==null?it.inline=et.isInline:it.inline!=et.isInline&&it.err("Mixing inline and block content"),{type:"name",value:et}));return it.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(it){let g=[[]];return ut(ct(it,0),et()),g;function et(){return g.push([])-1}function ot(dt,ft,St){let kt={term:St,to:ft};return g[dt].push(kt),kt}function ut(dt,ft){dt.forEach(St=>St.to=ft)}function ct(dt,ft){if(dt.type=="choice")return dt.exprs.reduce((St,kt)=>St.concat(ct(kt,ft)),[]);if(dt.type=="seq")for(let St=0;;St++){let kt=ct(dt.exprs[St],ft);if(St==dt.exprs.length-1)return kt;ut(kt,ft=et())}else if(dt.type=="star"){let St=et();return ot(ft,St),ut(ct(dt.expr,St),St),[ot(St)]}else if(dt.type=="plus"){let St=et();return ut(ct(dt.expr,ft),St),ut(ct(dt.expr,St),St),[ot(St)]}else{if(dt.type=="opt")return[ot(ft)].concat(ct(dt.expr,ft));if(dt.type=="range"){let St=ft;for(let kt=0;kt<dt.min;kt++){let Tt=et();ut(ct(dt.expr,St),Tt),St=Tt}if(dt.max==-1)ut(ct(dt.expr,St),St);else for(let kt=dt.min;kt<dt.max;kt++){let Tt=et();ot(St,Tt),ut(ct(dt.expr,St),Tt),St=Tt}return[ot(St)]}else{if(dt.type=="name")return[ot(ft,void 0,dt.value)];throw new Error("Unknown expr type")}}}}function cmp(it,g){return g-it}function nullFrom(it,g){let et=[];return ot(g),et.sort(cmp);function ot(ut){let ct=it[ut];if(ct.length==1&&!ct[0].term)return ot(ct[0].to);et.push(ut);for(let dt=0;dt<ct.length;dt++){let{term:ft,to:St}=ct[dt];!ft&&et.indexOf(St)==-1&&ot(St)}}}function dfa(it){let g=Object.create(null);return et(nullFrom(it,0));function et(ot){let ut=[];ot.forEach(dt=>{it[dt].forEach(({term:ft,to:St})=>{if(!ft)return;let kt;for(let Tt=0;Tt<ut.length;Tt++)ut[Tt][0]==ft&&(kt=ut[Tt][1]);nullFrom(it,St).forEach(Tt=>{kt||ut.push([ft,kt=[]]),kt.indexOf(Tt)==-1&&kt.push(Tt)})})});let ct=g[ot.join(",")]=new ContentMatch(ot.indexOf(it.length-1)>-1);for(let dt=0;dt<ut.length;dt++){let ft=ut[dt][1].sort(cmp);ct.next.push({type:ut[dt][0],next:g[ft.join(",")]||et(ft)})}return ct}}function checkForDeadEnds(it,g){for(let et=0,ot=[it];et<ot.length;et++){let ut=ot[et],ct=!ut.validEnd,dt=[];for(let ft=0;ft<ut.next.length;ft++){let{type:St,next:kt}=ut.next[ft];dt.push(St.name),ct&&!(St.isText||St.hasRequiredAttrs())&&(ct=!1),ot.indexOf(kt)==-1&&ot.push(kt)}ct&&g.err("Only non-generatable nodes ("+dt.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(it){let g=Object.create(null);for(let et in it){let ot=it[et];if(!ot.hasDefault)return null;g[et]=ot.default}return g}function computeAttrs(it,g){let et=Object.create(null);for(let ot in it){let ut=g&&g[ot];if(ut===void 0){let ct=it[ot];if(ct.hasDefault)ut=ct.default;else throw new RangeError("No value supplied for attribute "+ot)}et[ot]=ut}return et}function checkAttrs(it,g,et,ot){for(let ut in g)if(!(ut in it))throw new RangeError(`Unsupported attribute ${ut} for ${et} of type ${ut}`);for(let ut in it){let ct=it[ut];ct.validate&&ct.validate(g[ut])}}function initAttrs(it,g){let et=Object.create(null);if(g)for(let ot in g)et[ot]=new Attribute(it,ot,g[ot]);return et}let NodeType$1=class OR{constructor(g,et,ot){this.name=g,this.schema=et,this.spec=ot,this.markSet=null,this.groups=ot.group?ot.group.split(" "):[],this.attrs=initAttrs(g,ot.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(ot.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,et,ot){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(g),Fragment.from(et),Mark$1.setFrom(ot))}createChecked(g=null,et,ot){return et=Fragment.from(et),this.checkContent(et),new Node$2(this,this.computeAttrs(g),et,Mark$1.setFrom(ot))}createAndFill(g=null,et,ot){if(g=this.computeAttrs(g),et=Fragment.from(et),et.size){let dt=this.contentMatch.fillBefore(et);if(!dt)return null;et=dt.append(et)}let ut=this.contentMatch.matchFragment(et),ct=ut&&ut.fillBefore(Fragment.empty,!0);return ct?new Node$2(this,g,et.append(ct),Mark$1.setFrom(ot)):null}validContent(g){let et=this.contentMatch.matchFragment(g);if(!et||!et.validEnd)return!1;for(let ot=0;ot<g.childCount;ot++)if(!this.allowsMarks(g.child(ot).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let et=0;et<g.length;et++)if(!this.allowsMarkType(g[et].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let et;for(let ot=0;ot<g.length;ot++)this.allowsMarkType(g[ot].type)?et&&et.push(g[ot]):et||(et=g.slice(0,ot));return et?et.length?et:Mark$1.none:g}static compile(g,et){let ot=Object.create(null);g.forEach((ct,dt)=>ot[ct]=new OR(ct,et,dt));let ut=et.spec.topNode||"doc";if(!ot[ut])throw new RangeError("Schema is missing its top node type ('"+ut+"')");if(!ot.text)throw new RangeError("Every schema needs a 'text' type");for(let ct in ot.text.attrs)throw new RangeError("The text node type should not have attributes");return ot}};function validateType(it,g,et){let ot=et.split("|");return ut=>{let ct=ut===null?"null":typeof ut;if(ot.indexOf(ct)<0)throw new RangeError(`Expected value of type ${ot} for attribute ${g} on type ${it}, got ${ct}`)}}class Attribute{constructor(g,et,ot){this.hasDefault=Object.prototype.hasOwnProperty.call(ot,"default"),this.default=ot.default,this.validate=typeof ot.validate=="string"?validateType(g,et,ot.validate):ot.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,et,ot,ut){this.name=g,this.rank=et,this.schema=ot,this.spec=ut,this.attrs=initAttrs(g,ut.attrs),this.excluded=null;let ct=defaultAttrs(this.attrs);this.instance=ct?new Mark$1(this,ct):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,et){let ot=Object.create(null),ut=0;return g.forEach((ct,dt)=>ot[ct]=new MarkType(ct,ut++,et,dt)),ot}removeFromSet(g){for(var et=0;et<g.length;et++)g[et].type==this&&(g=g.slice(0,et).concat(g.slice(et+1)),et--);return g}isInSet(g){for(let et=0;et<g.length;et++)if(g[et].type==this)return g[et]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let et=this.spec={};for(let ut in g)et[ut]=g[ut];et.nodes=OrderedMap.from(g.nodes),et.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let ot=Object.create(null);for(let ut in this.nodes){if(ut in this.marks)throw new RangeError(ut+" can not be both a node and a mark");let ct=this.nodes[ut],dt=ct.spec.content||"",ft=ct.spec.marks;if(ct.contentMatch=ot[dt]||(ot[dt]=ContentMatch.parse(dt,this.nodes)),ct.inlineContent=ct.contentMatch.inlineContent,ct.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!ct.isInline||!ct.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=ct}ct.markSet=ft=="_"?null:ft?gatherMarks(this,ft.split(" ")):ft==""||!ct.inlineContent?[]:null}for(let ut in this.marks){let ct=this.marks[ut],dt=ct.spec.excludes;ct.excluded=dt==null?[ct]:dt==""?[]:gatherMarks(this,dt.split(" "))}this.nodeFromJSON=ut=>Node$2.fromJSON(this,ut),this.markFromJSON=ut=>Mark$1.fromJSON(this,ut),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,et=null,ot,ut){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(et,ot,ut)}text(g,et){let ot=this.nodes.text;return new TextNode(ot,ot.defaultAttrs,g,Mark$1.setFrom(et))}mark(g,et){return typeof g=="string"&&(g=this.marks[g]),g.create(et)}nodeType(g){let et=this.nodes[g];if(!et)throw new RangeError("Unknown node type: "+g);return et}}function gatherMarks(it,g){let et=[];for(let ot=0;ot<g.length;ot++){let ut=g[ot],ct=it.marks[ut],dt=ct;if(ct)et.push(ct);else for(let ft in it.marks){let St=it.marks[ft];(ut=="_"||St.spec.group&&St.spec.group.split(" ").indexOf(ut)>-1)&&et.push(dt=St)}if(!dt)throw new SyntaxError("Unknown mark type: '"+g[ot]+"'")}return et}function isTagRule(it){return it.tag!=null}function isStyleRule(it){return it.style!=null}class DOMParser{constructor(g,et){this.schema=g,this.rules=et,this.tags=[],this.styles=[];let ot=this.matchedStyles=[];et.forEach(ut=>{if(isTagRule(ut))this.tags.push(ut);else if(isStyleRule(ut)){let ct=/[^=]*/.exec(ut.style)[0];ot.indexOf(ct)<0&&ot.push(ct),this.styles.push(ut)}}),this.normalizeLists=!this.tags.some(ut=>{if(!/^(ul|ol)\b/.test(ut.tag)||!ut.node)return!1;let ct=g.nodes[ut.node];return ct.contentMatch.matchType(ct)})}parse(g,et={}){let ot=new ParseContext(this,et,!1);return ot.addAll(g,Mark$1.none,et.from,et.to),ot.finish()}parseSlice(g,et={}){let ot=new ParseContext(this,et,!0);return ot.addAll(g,Mark$1.none,et.from,et.to),Slice.maxOpen(ot.finish())}matchTag(g,et,ot){for(let ut=ot?this.tags.indexOf(ot)+1:0;ut<this.tags.length;ut++){let ct=this.tags[ut];if(matches(g,ct.tag)&&(ct.namespace===void 0||g.namespaceURI==ct.namespace)&&(!ct.context||et.matchesContext(ct.context))){if(ct.getAttrs){let dt=ct.getAttrs(g);if(dt===!1)continue;ct.attrs=dt||void 0}return ct}}}matchStyle(g,et,ot,ut){for(let ct=ut?this.styles.indexOf(ut)+1:0;ct<this.styles.length;ct++){let dt=this.styles[ct],ft=dt.style;if(!(ft.indexOf(g)!=0||dt.context&&!ot.matchesContext(dt.context)||ft.length>g.length&&(ft.charCodeAt(g.length)!=61||ft.slice(g.length+1)!=et))){if(dt.getAttrs){let St=dt.getAttrs(et);if(St===!1)continue;dt.attrs=St||void 0}return dt}}}static schemaRules(g){let et=[];function ot(ut){let ct=ut.priority==null?50:ut.priority,dt=0;for(;dt<et.length;dt++){let ft=et[dt];if((ft.priority==null?50:ft.priority)<ct)break}et.splice(dt,0,ut)}for(let ut in g.marks){let ct=g.marks[ut].spec.parseDOM;ct&&ct.forEach(dt=>{ot(dt=copy(dt)),dt.mark||dt.ignore||dt.clearMark||(dt.mark=ut)})}for(let ut in g.nodes){let ct=g.nodes[ut].spec.parseDOM;ct&&ct.forEach(dt=>{ot(dt=copy(dt)),dt.node||dt.ignore||dt.mark||(dt.node=ut)})}return et}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(it,g,et){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):it&&it.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:et&~OPT_OPEN_LEFT}class NodeContext{constructor(g,et,ot,ut,ct,dt){this.type=g,this.attrs=et,this.marks=ot,this.solid=ut,this.options=dt,this.content=[],this.activeMarks=Mark$1.none,this.match=ct||(dt&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let et=this.type.contentMatch.fillBefore(Fragment.from(g));if(et)this.match=this.type.contentMatch.matchFragment(et);else{let ot=this.type.contentMatch,ut;return(ut=ot.findWrapping(g.type))?(this.match=ot,ut):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let ot=this.content[this.content.length-1],ut;if(ot&&ot.isText&&(ut=/[ \t\r\n\u000c]+$/.exec(ot.text))){let ct=ot;ot.text.length==ut[0].length?this.content.pop():this.content[this.content.length-1]=ct.withText(ct.text.slice(0,ct.text.length-ut[0].length))}}let et=Fragment.from(this.content);return!g&&this.match&&(et=et.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,et,this.marks):et}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,et,ot){this.parser=g,this.options=et,this.isOpen=ot,this.open=0,this.localPreserveWS=!1;let ut=et.topNode,ct,dt=wsOptionsFor(null,et.preserveWhitespace,0)|(ot?OPT_OPEN_LEFT:0);ut?ct=new NodeContext(ut.type,ut.attrs,Mark$1.none,!0,et.topMatch||ut.type.contentMatch,dt):ot?ct=new NodeContext(null,null,Mark$1.none,!0,null,dt):ct=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,dt),this.nodes=[ct],this.find=et.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,et){g.nodeType==3?this.addTextNode(g,et):g.nodeType==1&&this.addElement(g,et)}addTextNode(g,et){let ot=g.nodeValue,ut=this.top,ct=ut.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ut.options&OPT_PRESERVE_WS)>0;if(ct==="full"||ut.inlineContext(g)||/[^ \t\r\n\u000c]/.test(ot)){if(ct)ct!=="full"?ot=ot.replace(/\r?\n|\r/g," "):ot=ot.replace(/\r\n?/g,`
`);else if(ot=ot.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(ot)&&this.open==this.nodes.length-1){let dt=ut.content[ut.content.length-1],ft=g.previousSibling;(!dt||ft&&ft.nodeName=="BR"||dt.isText&&/[ \t\r\n\u000c]$/.test(dt.text))&&(ot=ot.slice(1))}ot&&this.insertNode(this.parser.schema.text(ot),et,!/\S/.test(ot)),this.findInText(g)}else this.findInside(g)}addElement(g,et,ot){let ut=this.localPreserveWS,ct=this.top;(g.tagName=="PRE"||/pre/.test(g.style&&g.style.whiteSpace))&&(this.localPreserveWS=!0);let dt=g.nodeName.toLowerCase(),ft;listTags.hasOwnProperty(dt)&&this.parser.normalizeLists&&normalizeList(g);let St=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(ft=this.parser.matchTag(g,this,ot));e:if(St?St.ignore:ignoreTags.hasOwnProperty(dt))this.findInside(g),this.ignoreFallback(g,et);else if(!St||St.skip||St.closeParent){St&&St.closeParent?this.open=Math.max(0,this.open-1):St&&St.skip.nodeType&&(g=St.skip);let kt,Tt=this.needsBlock;if(blockTags.hasOwnProperty(dt))ct.content.length&&ct.content[0].isInline&&this.open&&(this.open--,ct=this.top),kt=!0,ct.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,et);break e}let Rt=St&&St.skip?et:this.readStyles(g,et);Rt&&this.addAll(g,Rt),kt&&this.sync(ct),this.needsBlock=Tt}else{let kt=this.readStyles(g,et);kt&&this.addElementByRule(g,St,kt,St.consuming===!1?ft:void 0)}this.localPreserveWS=ut}leafFallback(g,et){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),et)}ignoreFallback(g,et){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),et,!0)}readStyles(g,et){let ot=g.style;if(ot&&ot.length)for(let ut=0;ut<this.parser.matchedStyles.length;ut++){let ct=this.parser.matchedStyles[ut],dt=ot.getPropertyValue(ct);if(dt)for(let ft=void 0;;){let St=this.parser.matchStyle(ct,dt,this,ft);if(!St)break;if(St.ignore)return null;if(St.clearMark?et=et.filter(kt=>!St.clearMark(kt)):et=et.concat(this.parser.schema.marks[St.mark].create(St.attrs)),St.consuming===!1)ft=St;else break}}return et}addElementByRule(g,et,ot,ut){let ct,dt;if(et.node)if(dt=this.parser.schema.nodes[et.node],dt.isLeaf)this.insertNode(dt.create(et.attrs),ot,g.nodeName=="BR")||this.leafFallback(g,ot);else{let St=this.enter(dt,et.attrs||null,ot,et.preserveWhitespace);St&&(ct=!0,ot=St)}else{let St=this.parser.schema.marks[et.mark];ot=ot.concat(St.create(et.attrs))}let ft=this.top;if(dt&&dt.isLeaf)this.findInside(g);else if(ut)this.addElement(g,ot,ut);else if(et.getContent)this.findInside(g),et.getContent(g,this.parser.schema).forEach(St=>this.insertNode(St,ot,!1));else{let St=g;typeof et.contentElement=="string"?St=g.querySelector(et.contentElement):typeof et.contentElement=="function"?St=et.contentElement(g):et.contentElement&&(St=et.contentElement),this.findAround(g,St,!0),this.addAll(St,ot),this.findAround(g,St,!1)}ct&&this.sync(ft)&&this.open--}addAll(g,et,ot,ut){let ct=ot||0;for(let dt=ot?g.childNodes[ot]:g.firstChild,ft=ut==null?null:g.childNodes[ut];dt!=ft;dt=dt.nextSibling,++ct)this.findAtPoint(g,ct),this.addDOM(dt,et);this.findAtPoint(g,ct)}findPlace(g,et,ot){let ut,ct;for(let dt=this.open,ft=0;dt>=0;dt--){let St=this.nodes[dt],kt=St.findWrapping(g);if(kt&&(!ut||ut.length>kt.length+ft)&&(ut=kt,ct=St,!kt.length))break;if(St.solid){if(ot)break;ft+=2}}if(!ut)return null;this.sync(ct);for(let dt=0;dt<ut.length;dt++)et=this.enterInner(ut[dt],null,et,!1);return et}insertNode(g,et,ot){if(g.isInline&&this.needsBlock&&!this.top.type){let ct=this.textblockFromContext();ct&&(et=this.enterInner(ct,null,et))}let ut=this.findPlace(g,et,ot);if(ut){this.closeExtra();let ct=this.top;ct.match&&(ct.match=ct.match.matchType(g.type));let dt=Mark$1.none;for(let ft of ut.concat(g.marks))(ct.type?ct.type.allowsMarkType(ft.type):markMayApply(ft.type,g.type))&&(dt=ft.addToSet(dt));return ct.content.push(g.mark(dt)),!0}return!1}enter(g,et,ot,ut){let ct=this.findPlace(g.create(et),ot,!1);return ct&&(ct=this.enterInner(g,et,ot,!0,ut)),ct}enterInner(g,et,ot,ut=!1,ct){this.closeExtra();let dt=this.top;dt.match=dt.match&&dt.match.matchType(g);let ft=wsOptionsFor(g,ct,dt.options);dt.options&OPT_OPEN_LEFT&&dt.content.length==0&&(ft|=OPT_OPEN_LEFT);let St=Mark$1.none;return ot=ot.filter(kt=>(dt.type?dt.type.allowsMarkType(kt.type):markMayApply(kt.type,g))?(St=kt.addToSet(St),!1):!0),this.nodes.push(new NodeContext(g,et,St,ut,null,ft)),this.open++,ot}closeExtra(g=!1){let et=this.nodes.length-1;if(et>this.open){for(;et>this.open;et--)this.nodes[et-1].content.push(this.nodes[et].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(g){for(let et=this.open;et>=0;et--){if(this.nodes[et]==g)return this.open=et,!0;this.localPreserveWS&&(this.nodes[et].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let g=0;for(let et=this.open;et>=0;et--){let ot=this.nodes[et].content;for(let ut=ot.length-1;ut>=0;ut--)g+=ot[ut].nodeSize;et&&g++}return g}findAtPoint(g,et){if(this.find)for(let ot=0;ot<this.find.length;ot++)this.find[ot].node==g&&this.find[ot].offset==et&&(this.find[ot].pos=this.currentPos)}findInside(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].pos==null&&g.nodeType==1&&g.contains(this.find[et].node)&&(this.find[et].pos=this.currentPos)}findAround(g,et,ot){if(g!=et&&this.find)for(let ut=0;ut<this.find.length;ut++)this.find[ut].pos==null&&g.nodeType==1&&g.contains(this.find[ut].node)&&et.compareDocumentPosition(this.find[ut].node)&(ot?2:4)&&(this.find[ut].pos=this.currentPos)}findInText(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].node==g&&(this.find[et].pos=this.currentPos-(g.nodeValue.length-this.find[et].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let et=g.split("/"),ot=this.options.context,ut=!this.isOpen&&(!ot||ot.parent.type==this.nodes[0].type),ct=-(ot?ot.depth+1:0)+(ut?0:1),dt=(ft,St)=>{for(;ft>=0;ft--){let kt=et[ft];if(kt==""){if(ft==et.length-1||ft==0)continue;for(;St>=ct;St--)if(dt(ft-1,St))return!0;return!1}else{let Tt=St>0||St==0&&ut?this.nodes[St].type:ot&&St>=ct?ot.node(St-ct).type:null;if(!Tt||Tt.name!=kt&&!Tt.isInGroup(kt))return!1;St--}}return!0};return dt(et.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let et=g.depth;et>=0;et--){let ot=g.node(et).contentMatchAt(g.indexAfter(et)).defaultType;if(ot&&ot.isTextblock&&ot.defaultAttrs)return ot}for(let et in this.parser.schema.nodes){let ot=this.parser.schema.nodes[et];if(ot.isTextblock&&ot.defaultAttrs)return ot}}}function normalizeList(it){for(let g=it.firstChild,et=null;g;g=g.nextSibling){let ot=g.nodeType==1?g.nodeName.toLowerCase():null;ot&&listTags.hasOwnProperty(ot)&&et?(et.appendChild(g),g=et):ot=="li"?et=g:ot&&(et=null)}}function matches(it,g){return(it.matches||it.msMatchesSelector||it.webkitMatchesSelector||it.mozMatchesSelector).call(it,g)}function copy(it){let g={};for(let et in it)g[et]=it[et];return g}function markMayApply(it,g){let et=g.schema.nodes;for(let ot in et){let ut=et[ot];if(!ut.allowsMarkType(it))continue;let ct=[],dt=ft=>{ct.push(ft);for(let St=0;St<ft.edgeCount;St++){let{type:kt,next:Tt}=ft.edge(St);if(kt==g||ct.indexOf(Tt)<0&&dt(Tt))return!0}};if(dt(ut.contentMatch))return!0}}class DOMSerializer{constructor(g,et){this.nodes=g,this.marks=et}serializeFragment(g,et={},ot){ot||(ot=doc$1(et).createDocumentFragment());let ut=ot,ct=[];return g.forEach(dt=>{if(ct.length||dt.marks.length){let ft=0,St=0;for(;ft<ct.length&&St<dt.marks.length;){let kt=dt.marks[St];if(!this.marks[kt.type.name]){St++;continue}if(!kt.eq(ct[ft][0])||kt.type.spec.spanning===!1)break;ft++,St++}for(;ft<ct.length;)ut=ct.pop()[1];for(;St<dt.marks.length;){let kt=dt.marks[St++],Tt=this.serializeMark(kt,dt.isInline,et);Tt&&(ct.push([kt,ut]),ut.appendChild(Tt.dom),ut=Tt.contentDOM||Tt.dom)}}ut.appendChild(this.serializeNodeInner(dt,et))}),ot}serializeNodeInner(g,et){let{dom:ot,contentDOM:ut}=renderSpec(doc$1(et),this.nodes[g.type.name](g),null,g.attrs);if(ut){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,et,ut)}return ot}serializeNode(g,et={}){let ot=this.serializeNodeInner(g,et);for(let ut=g.marks.length-1;ut>=0;ut--){let ct=this.serializeMark(g.marks[ut],g.isInline,et);ct&&((ct.contentDOM||ct.dom).appendChild(ot),ot=ct.dom)}return ot}serializeMark(g,et,ot={}){let ut=this.marks[g.type.name];return ut&&renderSpec(doc$1(ot),ut(g,et),null,g.attrs)}static renderSpec(g,et,ot=null,ut){return renderSpec(g,et,ot,ut)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let et=gatherToDOM(g.nodes);return et.text||(et.text=ot=>ot.text),et}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(it){let g={};for(let et in it){let ot=it[et].spec.toDOM;ot&&(g[et]=ot)}return g}function doc$1(it){return it.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(it){let g=suspiciousAttributeCache.get(it);return g===void 0&&suspiciousAttributeCache.set(it,g=suspiciousAttributesInner(it)),g}function suspiciousAttributesInner(it){let g=null;function et(ot){if(ot&&typeof ot=="object")if(Array.isArray(ot))if(typeof ot[0]=="string")g||(g=[]),g.push(ot);else for(let ut=0;ut<ot.length;ut++)et(ot[ut]);else for(let ut in ot)et(ot[ut])}return et(it),g}function renderSpec(it,g,et,ot){if(typeof g=="string")return{dom:it.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let ut=g[0],ct;if(typeof ut!="string")throw new RangeError("Invalid array passed to renderSpec");if(ot&&(ct=suspiciousAttributes(ot))&&ct.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let dt=ut.indexOf(" ");dt>0&&(et=ut.slice(0,dt),ut=ut.slice(dt+1));let ft,St=et?it.createElementNS(et,ut):it.createElement(ut),kt=g[1],Tt=1;if(kt&&typeof kt=="object"&&kt.nodeType==null&&!Array.isArray(kt)){Tt=2;for(let Rt in kt)if(kt[Rt]!=null){let jt=Rt.indexOf(" ");jt>0?St.setAttributeNS(Rt.slice(0,jt),Rt.slice(jt+1),kt[Rt]):Rt=="style"&&St.style?St.style.cssText=kt[Rt]:St.setAttribute(Rt,kt[Rt])}}for(let Rt=Tt;Rt<g.length;Rt++){let jt=g[Rt];if(jt===0){if(Rt<g.length-1||Rt>Tt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:St,contentDOM:St}}else{let{dom:Ft,contentDOM:Bt}=renderSpec(it,jt,et,ot);if(St.appendChild(Ft),Bt){if(ft)throw new RangeError("Multiple content holes");ft=Bt}}}return{dom:St,contentDOM:ft}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(it,g){return it+g*factor16}function recoverIndex(it){return it&lower16}function recoverOffset(it){return(it-(it&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,et,ot){this.pos=g,this.delInfo=et,this.recover=ot}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,et=!1){if(this.ranges=g,this.inverted=et,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let et=0,ot=recoverIndex(g);if(!this.inverted)for(let ut=0;ut<ot;ut++)et+=this.ranges[ut*3+2]-this.ranges[ut*3+1];return this.ranges[ot*3]+et+recoverOffset(g)}mapResult(g,et=1){return this._map(g,et,!1)}map(g,et=1){return this._map(g,et,!0)}_map(g,et,ot){let ut=0,ct=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ut:0);if(St>g)break;let kt=this.ranges[ft+ct],Tt=this.ranges[ft+dt],Rt=St+kt;if(g<=Rt){let jt=kt?g==St?-1:g==Rt?1:et:et,Ft=St+ut+(jt<0?0:Tt);if(ot)return Ft;let Bt=g==(et<0?St:Rt)?null:makeRecover(ft/3,g-St),Ht=g==St?DEL_AFTER:g==Rt?DEL_BEFORE:DEL_ACROSS;return(et<0?g!=St:g!=Rt)&&(Ht|=DEL_SIDE),new MapResult(Ft,Ht,Bt)}ut+=Tt-kt}return ot?g+ut:new MapResult(g+ut,0,null)}touches(g,et){let ot=0,ut=recoverIndex(et),ct=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ot:0);if(St>g)break;let kt=this.ranges[ft+ct],Tt=St+kt;if(g<=Tt&&ft==ut*3)return!0;ot+=this.ranges[ft+dt]-kt}return!1}forEach(g){let et=this.inverted?2:1,ot=this.inverted?1:2;for(let ut=0,ct=0;ut<this.ranges.length;ut+=3){let dt=this.ranges[ut],ft=dt-(this.inverted?ct:0),St=dt+(this.inverted?0:ct),kt=this.ranges[ut+et],Tt=this.ranges[ut+ot];g(ft,ft+kt,St,St+Tt),ct+=Tt-kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g,et,ot=0,ut=g?g.length:0){this.mirror=et,this.from=ot,this.to=ut,this._maps=g||[],this.ownData=!(g||et)}get maps(){return this._maps}slice(g=0,et=this.maps.length){return new Mapping(this._maps,this.mirror,g,et)}appendMap(g,et){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),et!=null&&this.setMirror(this._maps.length-1,et)}appendMapping(g){for(let et=0,ot=this._maps.length;et<g._maps.length;et++){let ut=g.getMirror(et);this.appendMap(g._maps[et],ut!=null&&ut<et?ot+ut:void 0)}}getMirror(g){if(this.mirror){for(let et=0;et<this.mirror.length;et++)if(this.mirror[et]==g)return this.mirror[et+(et%2?-1:1)]}}setMirror(g,et){this.mirror||(this.mirror=[]),this.mirror.push(g,et)}appendMappingInverted(g){for(let et=g.maps.length-1,ot=this._maps.length+g._maps.length;et>=0;et--){let ut=g.getMirror(et);this.appendMap(g._maps[et].invert(),ut!=null&&ut>et?ot-ut-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,et=1){if(this.mirror)return this._map(g,et,!0);for(let ot=this.from;ot<this.to;ot++)g=this._maps[ot].map(g,et);return g}mapResult(g,et=1){return this._map(g,et,!1)}_map(g,et,ot){let ut=0;for(let ct=this.from;ct<this.to;ct++){let dt=this._maps[ct],ft=dt.mapResult(g,et);if(ft.recover!=null){let St=this.getMirror(ct);if(St!=null&&St>ct&&St<this.to){ct=St,g=this._maps[St].recover(ft.recover);continue}}ut|=ft.delInfo,g=ft.pos}return ot?g:new MapResult(g,ut,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,et){if(!et||!et.stepType)throw new RangeError("Invalid input for Step.fromJSON");let ot=stepsByID[et.stepType];if(!ot)throw new RangeError(`No step type ${et.stepType} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=et,et.prototype.jsonID=g,et}}class StepResult{constructor(g,et){this.doc=g,this.failed=et}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,et,ot,ut){try{return StepResult.ok(g.replace(et,ot,ut))}catch(ct){if(ct instanceof ReplaceError)return StepResult.fail(ct.message);throw ct}}}function mapFragment(it,g,et){let ot=[];for(let ut=0;ut<it.childCount;ut++){let ct=it.child(ut);ct.content.size&&(ct=ct.copy(mapFragment(ct.content,g,ct))),ct.isInline&&(ct=g(ct,et,ut)),ot.push(ct)}return Fragment.fromArray(ot)}class AddMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=g.resolve(this.from),ut=ot.node(ot.sharedDepth(this.to)),ct=new Slice(mapFragment(et.content,(dt,ft)=>!dt.isAtom||!ft.type.allowsMarkType(this.mark.type)?dt:dt.mark(this.mark.addToSet(dt.marks)),ut),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ct)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new AddMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=new Slice(mapFragment(et.content,ut=>ut.mark(this.mark.removeFromSet(ut.marks)),g),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ot)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new RemoveMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.addToSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);if(et){let ot=this.mark.addToSet(et.marks);if(ot.length==et.marks.length){for(let ut=0;ut<et.marks.length;ut++)if(!et.marks[ut].isInSet(ot))return new AddNodeMarkStep(this.pos,et.marks[ut]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AddNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.removeFromSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);return!et||!this.mark.isInSet(et.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new RemoveNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,et,ot,ut=!1){super(),this.from=g,this.to=et,this.slice=ot,this.structure=ut}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deletedAcross&&ot.deletedAcross?null:new ReplaceStep(et.pos,Math.max(et.pos,ot.pos),this.slice,this.structure)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),et,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,et,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(et.from,et.to,Slice.fromJSON(g,et.slice),!!et.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,et,ot,ut,ct,dt,ft=!1){super(),this.from=g,this.to=et,this.gapFrom=ot,this.gapTo=ut,this.slice=ct,this.insert=dt,this.structure=ft}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let et=g.slice(this.gapFrom,this.gapTo);if(et.openStart||et.openEnd)return StepResult.fail("Gap is not a flat range");let ot=this.slice.insertAt(this.insert,et.content);return ot?StepResult.fromReplace(g,this.from,this.to,ot):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let et=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+et,this.from+this.insert,this.from+this.insert+et,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1),ut=this.from==this.gapFrom?et.pos:g.map(this.gapFrom,-1),ct=this.to==this.gapTo?ot.pos:g.map(this.gapTo,1);return et.deletedAcross&&ot.deletedAcross||ut<et.pos||ct>ot.pos?null:new ReplaceAroundStep(et.pos,ot.pos,ut,ct,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number"||typeof et.gapFrom!="number"||typeof et.gapTo!="number"||typeof et.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(et.from,et.to,et.gapFrom,et.gapTo,Slice.fromJSON(g,et.slice),et.insert,!!et.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(it,g,et){let ot=it.resolve(g),ut=et-g,ct=ot.depth;for(;ut>0&&ct>0&&ot.indexAfter(ct)==ot.node(ct).childCount;)ct--,ut--;if(ut>0){let dt=ot.node(ct).maybeChild(ot.indexAfter(ct));for(;ut>0;){if(!dt||dt.isLeaf)return!0;dt=dt.firstChild,ut--}}return!1}function addMark(it,g,et,ot){let ut=[],ct=[],dt,ft;it.doc.nodesBetween(g,et,(St,kt,Tt)=>{if(!St.isInline)return;let Rt=St.marks;if(!ot.isInSet(Rt)&&Tt.type.allowsMarkType(ot.type)){let jt=Math.max(kt,g),Ft=Math.min(kt+St.nodeSize,et),Bt=ot.addToSet(Rt);for(let Ht=0;Ht<Rt.length;Ht++)Rt[Ht].isInSet(Bt)||(dt&&dt.to==jt&&dt.mark.eq(Rt[Ht])?dt.to=Ft:ut.push(dt=new RemoveMarkStep(jt,Ft,Rt[Ht])));ft&&ft.to==jt?ft.to=Ft:ct.push(ft=new AddMarkStep(jt,Ft,ot))}}),ut.forEach(St=>it.step(St)),ct.forEach(St=>it.step(St))}function removeMark(it,g,et,ot){let ut=[],ct=0;it.doc.nodesBetween(g,et,(dt,ft)=>{if(!dt.isInline)return;ct++;let St=null;if(ot instanceof MarkType){let kt=dt.marks,Tt;for(;Tt=ot.isInSet(kt);)(St||(St=[])).push(Tt),kt=Tt.removeFromSet(kt)}else ot?ot.isInSet(dt.marks)&&(St=[ot]):St=dt.marks;if(St&&St.length){let kt=Math.min(ft+dt.nodeSize,et);for(let Tt=0;Tt<St.length;Tt++){let Rt=St[Tt],jt;for(let Ft=0;Ft<ut.length;Ft++){let Bt=ut[Ft];Bt.step==ct-1&&Rt.eq(ut[Ft].style)&&(jt=Bt)}jt?(jt.to=kt,jt.step=ct):ut.push({style:Rt,from:Math.max(ft,g),to:kt,step:ct})}}}),ut.forEach(dt=>it.step(new RemoveMarkStep(dt.from,dt.to,dt.style)))}function clearIncompatible(it,g,et,ot=et.contentMatch,ut=!0){let ct=it.doc.nodeAt(g),dt=[],ft=g+1;for(let St=0;St<ct.childCount;St++){let kt=ct.child(St),Tt=ft+kt.nodeSize,Rt=ot.matchType(kt.type);if(!Rt)dt.push(new ReplaceStep(ft,Tt,Slice.empty));else{ot=Rt;for(let jt=0;jt<kt.marks.length;jt++)et.allowsMarkType(kt.marks[jt].type)||it.step(new RemoveMarkStep(ft,Tt,kt.marks[jt]));if(ut&&kt.isText&&et.whitespace!="pre"){let jt,Ft=/\r?\n|\r/g,Bt;for(;jt=Ft.exec(kt.text);)Bt||(Bt=new Slice(Fragment.from(et.schema.text(" ",et.allowedMarks(kt.marks))),0,0)),dt.push(new ReplaceStep(ft+jt.index,ft+jt.index+jt[0].length,Bt))}}ft=Tt}if(!ot.validEnd){let St=ot.fillBefore(Fragment.empty,!0);it.replace(ft,ft,new Slice(St,0,0))}for(let St=dt.length-1;St>=0;St--)it.step(dt[St])}function canCut(it,g,et){return(g==0||it.canReplace(g,it.childCount))&&(et==it.childCount||it.canReplace(0,et))}function liftTarget(it){let et=it.parent.content.cutByIndex(it.startIndex,it.endIndex);for(let ot=it.depth;;--ot){let ut=it.$from.node(ot),ct=it.$from.index(ot),dt=it.$to.indexAfter(ot);if(ot<it.depth&&ut.canReplace(ct,dt,et))return ot;if(ot==0||ut.type.spec.isolating||!canCut(ut,ct,dt))break}return null}function lift$2(it,g,et){let{$from:ot,$to:ut,depth:ct}=g,dt=ot.before(ct+1),ft=ut.after(ct+1),St=dt,kt=ft,Tt=Fragment.empty,Rt=0;for(let Bt=ct,Ht=!1;Bt>et;Bt--)Ht||ot.index(Bt)>0?(Ht=!0,Tt=Fragment.from(ot.node(Bt).copy(Tt)),Rt++):St--;let jt=Fragment.empty,Ft=0;for(let Bt=ct,Ht=!1;Bt>et;Bt--)Ht||ut.after(Bt+1)<ut.end(Bt)?(Ht=!0,jt=Fragment.from(ut.node(Bt).copy(jt)),Ft++):kt++;it.step(new ReplaceAroundStep(St,kt,dt,ft,new Slice(Tt.append(jt),Rt,Ft),Tt.size-Rt,!0))}function findWrapping(it,g,et=null,ot=it){let ut=findWrappingOutside(it,g),ct=ut&&findWrappingInside(ot,g);return ct?ut.map(withAttrs).concat({type:g,attrs:et}).concat(ct.map(withAttrs)):null}function withAttrs(it){return{type:it,attrs:null}}function findWrappingOutside(it,g){let{parent:et,startIndex:ot,endIndex:ut}=it,ct=et.contentMatchAt(ot).findWrapping(g);if(!ct)return null;let dt=ct.length?ct[0]:g;return et.canReplaceWith(ot,ut,dt)?ct:null}function findWrappingInside(it,g){let{parent:et,startIndex:ot,endIndex:ut}=it,ct=et.child(ot),dt=g.contentMatch.findWrapping(ct.type);if(!dt)return null;let St=(dt.length?dt[dt.length-1]:g).contentMatch;for(let kt=ot;St&&kt<ut;kt++)St=St.matchType(et.child(kt).type);return!St||!St.validEnd?null:dt}function wrap(it,g,et){let ot=Fragment.empty;for(let dt=et.length-1;dt>=0;dt--){if(ot.size){let ft=et[dt].type.contentMatch.matchFragment(ot);if(!ft||!ft.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}ot=Fragment.from(et[dt].type.create(et[dt].attrs,ot))}let ut=g.start,ct=g.end;it.step(new ReplaceAroundStep(ut,ct,ut,ct,new Slice(ot,0,0),et.length,!0))}function setBlockType$1(it,g,et,ot,ut){if(!ot.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let ct=it.steps.length;it.doc.nodesBetween(g,et,(dt,ft)=>{let St=typeof ut=="function"?ut(dt):ut;if(dt.isTextblock&&!dt.hasMarkup(ot,St)&&canChangeType(it.doc,it.mapping.slice(ct).map(ft),ot)){let kt=null;if(ot.schema.linebreakReplacement){let Ft=ot.whitespace=="pre",Bt=!!ot.contentMatch.matchType(ot.schema.linebreakReplacement);Ft&&!Bt?kt=!1:!Ft&&Bt&&(kt=!0)}kt===!1&&replaceLinebreaks(it,dt,ft,ct),clearIncompatible(it,it.mapping.slice(ct).map(ft,1),ot,void 0,kt===null);let Tt=it.mapping.slice(ct),Rt=Tt.map(ft,1),jt=Tt.map(ft+dt.nodeSize,1);return it.step(new ReplaceAroundStep(Rt,jt,Rt+1,jt-1,new Slice(Fragment.from(ot.create(St,null,dt.marks)),0,0),1,!0)),kt===!0&&replaceNewlines(it,dt,ft,ct),!1}})}function replaceNewlines(it,g,et,ot){g.forEach((ut,ct)=>{if(ut.isText){let dt,ft=/\r?\n|\r/g;for(;dt=ft.exec(ut.text);){let St=it.mapping.slice(ot).map(et+1+ct+dt.index);it.replaceWith(St,St+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(it,g,et,ot){g.forEach((ut,ct)=>{if(ut.type==ut.type.schema.linebreakReplacement){let dt=it.mapping.slice(ot).map(et+1+ct);it.replaceWith(dt,dt+1,g.type.schema.text(`
`))}})}function canChangeType(it,g,et){let ot=it.resolve(g),ut=ot.index();return ot.parent.canReplaceWith(ut,ut+1,et)}function setNodeMarkup(it,g,et,ot,ut){let ct=it.doc.nodeAt(g);if(!ct)throw new RangeError("No node at given position");et||(et=ct.type);let dt=et.create(ot,null,ut||ct.marks);if(ct.isLeaf)return it.replaceWith(g,g+ct.nodeSize,dt);if(!et.validContent(ct.content))throw new RangeError("Invalid content for node type "+et.name);it.step(new ReplaceAroundStep(g,g+ct.nodeSize,g+1,g+ct.nodeSize-1,new Slice(Fragment.from(dt),0,0),1,!0))}function canSplit(it,g,et=1,ot){let ut=it.resolve(g),ct=ut.depth-et,dt=ot&&ot[ot.length-1]||ut.parent;if(ct<0||ut.parent.type.spec.isolating||!ut.parent.canReplace(ut.index(),ut.parent.childCount)||!dt.type.validContent(ut.parent.content.cutByIndex(ut.index(),ut.parent.childCount)))return!1;for(let kt=ut.depth-1,Tt=et-2;kt>ct;kt--,Tt--){let Rt=ut.node(kt),jt=ut.index(kt);if(Rt.type.spec.isolating)return!1;let Ft=Rt.content.cutByIndex(jt,Rt.childCount),Bt=ot&&ot[Tt+1];Bt&&(Ft=Ft.replaceChild(0,Bt.type.create(Bt.attrs)));let Ht=ot&&ot[Tt]||Rt;if(!Rt.canReplace(jt+1,Rt.childCount)||!Ht.type.validContent(Ft))return!1}let ft=ut.indexAfter(ct),St=ot&&ot[0];return ut.node(ct).canReplaceWith(ft,ft,St?St.type:ut.node(ct+1).type)}function split(it,g,et=1,ot){let ut=it.doc.resolve(g),ct=Fragment.empty,dt=Fragment.empty;for(let ft=ut.depth,St=ut.depth-et,kt=et-1;ft>St;ft--,kt--){ct=Fragment.from(ut.node(ft).copy(ct));let Tt=ot&&ot[kt];dt=Fragment.from(Tt?Tt.type.create(Tt.attrs,dt):ut.node(ft).copy(dt))}it.step(new ReplaceStep(g,g,new Slice(ct.append(dt),et,et),!0))}function canJoin(it,g){let et=it.resolve(g),ot=et.index();return joinable(et.nodeBefore,et.nodeAfter)&&et.parent.canReplace(ot,ot+1)}function canAppendWithSubstitutedLinebreaks(it,g){g.content.size||it.type.compatibleContent(g.type);let et=it.contentMatchAt(it.childCount),{linebreakReplacement:ot}=it.type.schema;for(let ut=0;ut<g.childCount;ut++){let ct=g.child(ut),dt=ct.type==ot?it.type.schema.nodes.text:ct.type;if(et=et.matchType(dt),!et||!it.type.allowsMarks(ct.marks))return!1}return et.validEnd}function joinable(it,g){return!!(it&&g&&!it.isLeaf&&canAppendWithSubstitutedLinebreaks(it,g))}function joinPoint(it,g,et=-1){let ot=it.resolve(g);for(let ut=ot.depth;;ut--){let ct,dt,ft=ot.index(ut);if(ut==ot.depth?(ct=ot.nodeBefore,dt=ot.nodeAfter):et>0?(ct=ot.node(ut+1),ft++,dt=ot.node(ut).maybeChild(ft)):(ct=ot.node(ut).maybeChild(ft-1),dt=ot.node(ut+1)),ct&&!ct.isTextblock&&joinable(ct,dt)&&ot.node(ut).canReplace(ft,ft+1))return g;if(ut==0)break;g=et<0?ot.before(ut):ot.after(ut)}}function join(it,g,et){let ot=null,{linebreakReplacement:ut}=it.doc.type.schema,ct=it.doc.resolve(g-et),dt=ct.node().type;if(ut&&dt.inlineContent){let Tt=dt.whitespace=="pre",Rt=!!dt.contentMatch.matchType(ut);Tt&&!Rt?ot=!1:!Tt&&Rt&&(ot=!0)}let ft=it.steps.length;if(ot===!1){let Tt=it.doc.resolve(g+et);replaceLinebreaks(it,Tt.node(),Tt.before(),ft)}dt.inlineContent&&clearIncompatible(it,g+et-1,dt,ct.node().contentMatchAt(ct.index()),ot==null);let St=it.mapping.slice(ft),kt=St.map(g-et);if(it.step(new ReplaceStep(kt,St.map(g+et,-1),Slice.empty,!0)),ot===!0){let Tt=it.doc.resolve(kt);replaceNewlines(it,Tt.node(),Tt.before(),it.steps.length)}return it}function insertPoint(it,g,et){let ot=it.resolve(g);if(ot.parent.canReplaceWith(ot.index(),ot.index(),et))return g;if(ot.parentOffset==0)for(let ut=ot.depth-1;ut>=0;ut--){let ct=ot.index(ut);if(ot.node(ut).canReplaceWith(ct,ct,et))return ot.before(ut+1);if(ct>0)return null}if(ot.parentOffset==ot.parent.content.size)for(let ut=ot.depth-1;ut>=0;ut--){let ct=ot.indexAfter(ut);if(ot.node(ut).canReplaceWith(ct,ct,et))return ot.after(ut+1);if(ct<ot.node(ut).childCount)return null}return null}function dropPoint(it,g,et){let ot=it.resolve(g);if(!et.content.size)return g;let ut=et.content;for(let ct=0;ct<et.openStart;ct++)ut=ut.firstChild.content;for(let ct=1;ct<=(et.openStart==0&&et.size?2:1);ct++)for(let dt=ot.depth;dt>=0;dt--){let ft=dt==ot.depth?0:ot.pos<=(ot.start(dt+1)+ot.end(dt+1))/2?-1:1,St=ot.index(dt)+(ft>0?1:0),kt=ot.node(dt),Tt=!1;if(ct==1)Tt=kt.canReplace(St,St,ut);else{let Rt=kt.contentMatchAt(St).findWrapping(ut.firstChild.type);Tt=Rt&&kt.canReplaceWith(St,St,Rt[0])}if(Tt)return ft==0?ot.pos:ft<0?ot.before(dt+1):ot.after(dt+1)}return null}function replaceStep(it,g,et=g,ot=Slice.empty){if(g==et&&!ot.size)return null;let ut=it.resolve(g),ct=it.resolve(et);return fitsTrivially(ut,ct,ot)?new ReplaceStep(g,et,ot):new Fitter(ut,ct,ot).fit()}function fitsTrivially(it,g,et){return!et.openStart&&!et.openEnd&&it.start()==g.start()&&it.parent.canReplace(it.index(),g.index(),et.content)}class Fitter{constructor(g,et,ot){this.$from=g,this.$to=et,this.unplaced=ot,this.frontier=[],this.placed=Fragment.empty;for(let ut=0;ut<=g.depth;ut++){let ct=g.node(ut);this.frontier.push({type:ct.type,match:ct.contentMatchAt(g.indexAfter(ut))})}for(let ut=g.depth;ut>0;ut--)this.placed=Fragment.from(g.node(ut).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let kt=this.findFittable();kt?this.placeNodes(kt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),et=this.placed.size-this.depth-this.$from.depth,ot=this.$from,ut=this.close(g<0?this.$to:ot.doc.resolve(g));if(!ut)return null;let ct=this.placed,dt=ot.depth,ft=ut.depth;for(;dt&&ft&&ct.childCount==1;)ct=ct.firstChild.content,dt--,ft--;let St=new Slice(ct,dt,ft);return g>-1?new ReplaceAroundStep(ot.pos,g,this.$to.pos,this.$to.end(),St,et):St.size||ot.pos!=this.$to.pos?new ReplaceStep(ot.pos,ut.pos,St):null}findFittable(){let g=this.unplaced.openStart;for(let et=this.unplaced.content,ot=0,ut=this.unplaced.openEnd;ot<g;ot++){let ct=et.firstChild;if(et.childCount>1&&(ut=0),ct.type.spec.isolating&&ut<=ot){g=ot;break}et=ct.content}for(let et=1;et<=2;et++)for(let ot=et==1?g:this.unplaced.openStart;ot>=0;ot--){let ut,ct=null;ot?(ct=contentAt(this.unplaced.content,ot-1).firstChild,ut=ct.content):ut=this.unplaced.content;let dt=ut.firstChild;for(let ft=this.depth;ft>=0;ft--){let{type:St,match:kt}=this.frontier[ft],Tt,Rt=null;if(et==1&&(dt?kt.matchType(dt.type)||(Rt=kt.fillBefore(Fragment.from(dt),!1)):ct&&St.compatibleContent(ct.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ct,inject:Rt};if(et==2&&dt&&(Tt=kt.findWrapping(dt.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ct,wrap:Tt};if(ct&&kt.matchType(ct.type))break}}}openMore(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ut=contentAt(g,et);return!ut.childCount||ut.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,et+1,Math.max(ot,ut.size+et>=g.size-ot?et+1:0)),!0)}dropNode(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ut=contentAt(g,et);if(ut.childCount<=1&&et>0){let ct=g.size-et<=et+ut.size;this.unplaced=new Slice(dropFromFragment(g,et-1,1),et-1,ct?et-1:ot)}else this.unplaced=new Slice(dropFromFragment(g,et,1),et,ot)}placeNodes({sliceDepth:g,frontierDepth:et,parent:ot,inject:ut,wrap:ct}){for(;this.depth>et;)this.closeFrontierNode();if(ct)for(let Ht=0;Ht<ct.length;Ht++)this.openFrontierNode(ct[Ht]);let dt=this.unplaced,ft=ot?ot.content:dt.content,St=dt.openStart-g,kt=0,Tt=[],{match:Rt,type:jt}=this.frontier[et];if(ut){for(let Ht=0;Ht<ut.childCount;Ht++)Tt.push(ut.child(Ht));Rt=Rt.matchFragment(ut)}let Ft=ft.size+g-(dt.content.size-dt.openEnd);for(;kt<ft.childCount;){let Ht=ft.child(kt),Yt=Rt.matchType(Ht.type);if(!Yt)break;kt++,(kt>1||St==0||Ht.content.size)&&(Rt=Yt,Tt.push(closeNodeStart(Ht.mark(jt.allowedMarks(Ht.marks)),kt==1?St:0,kt==ft.childCount?Ft:-1)))}let Bt=kt==ft.childCount;Bt||(Ft=-1),this.placed=addToFragment(this.placed,et,Fragment.from(Tt)),this.frontier[et].match=Rt,Bt&&Ft<0&&ot&&ot.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ht=0,Yt=ft;Ht<Ft;Ht++){let zt=Yt.lastChild;this.frontier.push({type:zt.type,match:zt.contentMatchAt(zt.childCount)}),Yt=zt.content}this.unplaced=Bt?g==0?Slice.empty:new Slice(dropFromFragment(dt.content,g-1,1),g-1,Ft<0?dt.openEnd:g-1):new Slice(dropFromFragment(dt.content,g,kt),dt.openStart,dt.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],et;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(et=this.findCloseLevel(this.$to))&&et.depth==this.depth)return-1;let{depth:ot}=this.$to,ut=this.$to.after(ot);for(;ot>1&&ut==this.$to.end(--ot);)++ut;return ut}findCloseLevel(g){e:for(let et=Math.min(this.depth,g.depth);et>=0;et--){let{match:ot,type:ut}=this.frontier[et],ct=et<g.depth&&g.end(et+1)==g.pos+(g.depth-(et+1)),dt=contentAfterFits(g,et,ut,ot,ct);if(dt){for(let ft=et-1;ft>=0;ft--){let{match:St,type:kt}=this.frontier[ft],Tt=contentAfterFits(g,ft,kt,St,!0);if(!Tt||Tt.childCount)continue e}return{depth:et,fit:dt,move:ct?g.doc.resolve(g.after(et+1)):g}}}}close(g){let et=this.findCloseLevel(g);if(!et)return null;for(;this.depth>et.depth;)this.closeFrontierNode();et.fit.childCount&&(this.placed=addToFragment(this.placed,et.depth,et.fit)),g=et.move;for(let ot=et.depth+1;ot<=g.depth;ot++){let ut=g.node(ot),ct=ut.type.contentMatch.fillBefore(ut.content,!0,g.index(ot));this.openFrontierNode(ut.type,ut.attrs,ct)}return g}openFrontierNode(g,et=null,ot){let ut=this.frontier[this.depth];ut.match=ut.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(et,ot))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let et=this.frontier.pop().match.fillBefore(Fragment.empty,!0);et.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,et))}}function dropFromFragment(it,g,et){return g==0?it.cutByIndex(et,it.childCount):it.replaceChild(0,it.firstChild.copy(dropFromFragment(it.firstChild.content,g-1,et)))}function addToFragment(it,g,et){return g==0?it.append(et):it.replaceChild(it.childCount-1,it.lastChild.copy(addToFragment(it.lastChild.content,g-1,et)))}function contentAt(it,g){for(let et=0;et<g;et++)it=it.firstChild.content;return it}function closeNodeStart(it,g,et){if(g<=0)return it;let ot=it.content;return g>1&&(ot=ot.replaceChild(0,closeNodeStart(ot.firstChild,g-1,ot.childCount==1?et-1:0))),g>0&&(ot=it.type.contentMatch.fillBefore(ot).append(ot),et<=0&&(ot=ot.append(it.type.contentMatch.matchFragment(ot).fillBefore(Fragment.empty,!0)))),it.copy(ot)}function contentAfterFits(it,g,et,ot,ut){let ct=it.node(g),dt=ut?it.indexAfter(g):it.index(g);if(dt==ct.childCount&&!et.compatibleContent(ct.type))return null;let ft=ot.fillBefore(ct.content,!0,dt);return ft&&!invalidMarks(et,ct.content,dt)?ft:null}function invalidMarks(it,g,et){for(let ot=et;ot<g.childCount;ot++)if(!it.allowsMarks(g.child(ot).marks))return!0;return!1}function definesContent(it){return it.spec.defining||it.spec.definingForContent}function replaceRange(it,g,et,ot){if(!ot.size)return it.deleteRange(g,et);let ut=it.doc.resolve(g),ct=it.doc.resolve(et);if(fitsTrivially(ut,ct,ot))return it.step(new ReplaceStep(g,et,ot));let dt=coveredDepths(ut,it.doc.resolve(et));dt[dt.length-1]==0&&dt.pop();let ft=-(ut.depth+1);dt.unshift(ft);for(let jt=ut.depth,Ft=ut.pos-1;jt>0;jt--,Ft--){let Bt=ut.node(jt).type.spec;if(Bt.defining||Bt.definingAsContext||Bt.isolating)break;dt.indexOf(jt)>-1?ft=jt:ut.before(jt)==Ft&&dt.splice(1,0,-jt)}let St=dt.indexOf(ft),kt=[],Tt=ot.openStart;for(let jt=ot.content,Ft=0;;Ft++){let Bt=jt.firstChild;if(kt.push(Bt),Ft==ot.openStart)break;jt=Bt.content}for(let jt=Tt-1;jt>=0;jt--){let Ft=kt[jt],Bt=definesContent(Ft.type);if(Bt&&!Ft.sameMarkup(ut.node(Math.abs(ft)-1)))Tt=jt;else if(Bt||!Ft.type.isTextblock)break}for(let jt=ot.openStart;jt>=0;jt--){let Ft=(jt+Tt+1)%(ot.openStart+1),Bt=kt[Ft];if(Bt)for(let Ht=0;Ht<dt.length;Ht++){let Yt=dt[(Ht+St)%dt.length],zt=!0;Yt<0&&(zt=!1,Yt=-Yt);let Kt=ut.node(Yt-1),en=ut.index(Yt-1);if(Kt.canReplaceWith(en,en,Bt.type,Bt.marks))return it.replace(ut.before(Yt),zt?ct.after(Yt):et,new Slice(closeFragment(ot.content,0,ot.openStart,Ft),Ft,ot.openEnd))}}let Rt=it.steps.length;for(let jt=dt.length-1;jt>=0&&(it.replace(g,et,ot),!(it.steps.length>Rt));jt--){let Ft=dt[jt];Ft<0||(g=ut.before(Ft),et=ct.after(Ft))}}function closeFragment(it,g,et,ot,ut){if(g<et){let ct=it.firstChild;it=it.replaceChild(0,ct.copy(closeFragment(ct.content,g+1,et,ot,ct)))}if(g>ot){let ct=ut.contentMatchAt(0),dt=ct.fillBefore(it).append(it);it=dt.append(ct.matchFragment(dt).fillBefore(Fragment.empty,!0))}return it}function replaceRangeWith(it,g,et,ot){if(!ot.isInline&&g==et&&it.doc.resolve(g).parent.content.size){let ut=insertPoint(it.doc,g,ot.type);ut!=null&&(g=et=ut)}it.replaceRange(g,et,new Slice(Fragment.from(ot),0,0))}function deleteRange$1(it,g,et){let ot=it.doc.resolve(g),ut=it.doc.resolve(et),ct=coveredDepths(ot,ut);for(let dt=0;dt<ct.length;dt++){let ft=ct[dt],St=dt==ct.length-1;if(St&&ft==0||ot.node(ft).type.contentMatch.validEnd)return it.delete(ot.start(ft),ut.end(ft));if(ft>0&&(St||ot.node(ft-1).canReplace(ot.index(ft-1),ut.indexAfter(ft-1))))return it.delete(ot.before(ft),ut.after(ft))}for(let dt=1;dt<=ot.depth&&dt<=ut.depth;dt++)if(g-ot.start(dt)==ot.depth-dt&&et>ot.end(dt)&&ut.end(dt)-et!=ut.depth-dt&&ot.start(dt-1)==ut.start(dt-1)&&ot.node(dt-1).canReplace(ot.index(dt-1),ut.index(dt-1)))return it.delete(ot.before(dt),et);it.delete(g,et)}function coveredDepths(it,g){let et=[],ot=Math.min(it.depth,g.depth);for(let ut=ot;ut>=0;ut--){let ct=it.start(ut);if(ct<it.pos-(it.depth-ut)||g.end(ut)>g.pos+(g.depth-ut)||it.node(ut).type.spec.isolating||g.node(ut).type.spec.isolating)break;(ct==g.start(ut)||ut==it.depth&&ut==g.depth&&it.parent.inlineContent&&g.parent.inlineContent&&ut&&g.start(ut-1)==ct-1)&&et.push(ut)}return et}class AttrStep extends Step{constructor(g,et,ot){super(),this.pos=g,this.attr=et,this.value=ot}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at attribute step's position");let ot=Object.create(null);for(let ct in et.attrs)ot[ct]=et.attrs[ct];ot[this.attr]=this.value;let ut=et.type.create(ot,null,et.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ut),0,et.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AttrStep(et.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.pos!="number"||typeof et.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(et.pos,et.attr,et.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,et){super(),this.attr=g,this.value=et}apply(g){let et=Object.create(null);for(let ut in g.attrs)et[ut]=g.attrs[ut];et[this.attr]=this.value;let ot=g.type.create(et,g.content,g.marks);return StepResult.ok(ot)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(et.attr,et.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function it(g){let et=Error.call(this,g);return et.__proto__=it.prototype,et};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let et=this.maybeStep(g);if(et.failed)throw new TransformError(et.failed);return this}maybeStep(g){let et=g.apply(this.doc);return et.failed||this.addStep(g,et.doc),et}get docChanged(){return this.steps.length>0}addStep(g,et){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=et}replace(g,et=g,ot=Slice.empty){let ut=replaceStep(this.doc,g,et,ot);return ut&&this.step(ut),this}replaceWith(g,et,ot){return this.replace(g,et,new Slice(Fragment.from(ot),0,0))}delete(g,et){return this.replace(g,et,Slice.empty)}insert(g,et){return this.replaceWith(g,g,et)}replaceRange(g,et,ot){return replaceRange(this,g,et,ot),this}replaceRangeWith(g,et,ot){return replaceRangeWith(this,g,et,ot),this}deleteRange(g,et){return deleteRange$1(this,g,et),this}lift(g,et){return lift$2(this,g,et),this}join(g,et=1){return join(this,g,et),this}wrap(g,et){return wrap(this,g,et),this}setBlockType(g,et=g,ot,ut=null){return setBlockType$1(this,g,et,ot,ut),this}setNodeMarkup(g,et,ot=null,ut){return setNodeMarkup(this,g,et,ot,ut),this}setNodeAttribute(g,et,ot){return this.step(new AttrStep(g,et,ot)),this}setDocAttribute(g,et){return this.step(new DocAttrStep(g,et)),this}addNodeMark(g,et){return this.step(new AddNodeMarkStep(g,et)),this}removeNodeMark(g,et){let ot=this.doc.nodeAt(g);if(!ot)throw new RangeError("No node at position "+g);if(et instanceof Mark$1)et.isInSet(ot.marks)&&this.step(new RemoveNodeMarkStep(g,et));else{let ut=ot.marks,ct,dt=[];for(;ct=et.isInSet(ut);)dt.push(new RemoveNodeMarkStep(g,ct)),ut=ct.removeFromSet(ut);for(let ft=dt.length-1;ft>=0;ft--)this.step(dt[ft])}return this}split(g,et=1,ot){return split(this,g,et,ot),this}addMark(g,et,ot){return addMark(this,g,et,ot),this}removeMark(g,et,ot){return removeMark(this,g,et,ot),this}clearIncompatible(g,et,ot){return clearIncompatible(this,g,et,ot),this}};const classesById=Object.create(null);class Selection{constructor(g,et,ot){this.$anchor=g,this.$head=et,this.ranges=ot||[new SelectionRange(g.min(et),g.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let et=0;et<g.length;et++)if(g[et].$from.pos!=g[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,et=Slice.empty){let ot=et.content.lastChild,ut=null;for(let ft=0;ft<et.openEnd;ft++)ut=ot,ot=ot.lastChild;let ct=g.steps.length,dt=this.ranges;for(let ft=0;ft<dt.length;ft++){let{$from:St,$to:kt}=dt[ft],Tt=g.mapping.slice(ct);g.replaceRange(Tt.map(St.pos),Tt.map(kt.pos),ft?Slice.empty:et),ft==0&&selectionToInsertionEnd$1(g,ct,(ot?ot.isInline:ut&&ut.isTextblock)?-1:1)}}replaceWith(g,et){let ot=g.steps.length,ut=this.ranges;for(let ct=0;ct<ut.length;ct++){let{$from:dt,$to:ft}=ut[ct],St=g.mapping.slice(ot),kt=St.map(dt.pos),Tt=St.map(ft.pos);ct?g.deleteRange(kt,Tt):(g.replaceRangeWith(kt,Tt,et),selectionToInsertionEnd$1(g,ot,et.isInline?-1:1))}}static findFrom(g,et,ot=!1){let ut=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),et,ot);if(ut)return ut;for(let ct=g.depth-1;ct>=0;ct--){let dt=et<0?findSelectionIn(g.node(0),g.node(ct),g.before(ct+1),g.index(ct),et,ot):findSelectionIn(g.node(0),g.node(ct),g.after(ct+1),g.index(ct)+1,et,ot);if(dt)return dt}return null}static near(g,et=1){return this.findFrom(g,et)||this.findFrom(g,-et)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=classesById[et.type];if(!ot)throw new RangeError(`No selection type ${et.type} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=et,et.prototype.jsonID=g,et}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,et){this.$from=g,this.$to=et}}let warnedAboutTextSelection=!1;function checkTextSelection(it){!warnedAboutTextSelection&&!it.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+it.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,et=g){checkTextSelection(g),checkTextSelection(et),super(g,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,et){let ot=g.resolve(et.map(this.head));if(!ot.parent.inlineContent)return Selection.near(ot);let ut=g.resolve(et.map(this.anchor));return new TextSelection(ut.parent.inlineContent?ut:ot,ot)}replace(g,et=Slice.empty){if(super.replace(g,et),et==Slice.empty){let ot=this.$from.marksAcross(this.$to);ot&&g.ensureMarks(ot)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,et){if(typeof et.anchor!="number"||typeof et.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(et.anchor),g.resolve(et.head))}static create(g,et,ot=et){let ut=g.resolve(et);return new this(ut,ot==et?ut:g.resolve(ot))}static between(g,et,ot){let ut=g.pos-et.pos;if((!ot||ut)&&(ot=ut>=0?1:-1),!et.parent.inlineContent){let ct=Selection.findFrom(et,ot,!0)||Selection.findFrom(et,-ot,!0);if(ct)et=ct.$head;else return Selection.near(et,ot)}return g.parent.inlineContent||(ut==0?g=et:(g=(Selection.findFrom(g,-ot,!0)||Selection.findFrom(g,ot,!0)).$anchor,g.pos<et.pos!=ut<0&&(g=et))),new TextSelection(g,et)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,et){this.anchor=g,this.head=et}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let et=g.nodeAfter,ot=g.node(0).resolve(g.pos+et.nodeSize);super(g,ot),this.node=et}map(g,et){let{deleted:ot,pos:ut}=et.mapResult(this.anchor),ct=g.resolve(ut);return ot?Selection.near(ct):new NodeSelection(ct)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,et){if(typeof et.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(et.anchor))}static create(g,et){return new NodeSelection(g.resolve(et))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:et,pos:ot}=g.mapResult(this.anchor);return et?new TextBookmark(ot,ot):new NodeBookmark(ot)}resolve(g){let et=g.resolve(this.anchor),ot=et.nodeAfter;return ot&&NodeSelection.isSelectable(ot)?new NodeSelection(et):Selection.near(et)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,et=Slice.empty){if(et==Slice.empty){g.delete(0,g.doc.content.size);let ot=Selection.atStart(g.doc);ot.eq(g.selection)||g.setSelection(ot)}else super.replace(g,et)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(it){return new AllSelection(it)}};function findSelectionIn(it,g,et,ot,ut,ct=!1){if(g.inlineContent)return TextSelection.create(it,et);for(let dt=ot-(ut>0?0:1);ut>0?dt<g.childCount:dt>=0;dt+=ut){let ft=g.child(dt);if(ft.isAtom){if(!ct&&NodeSelection.isSelectable(ft))return NodeSelection.create(it,et-(ut<0?ft.nodeSize:0))}else{let St=findSelectionIn(it,ft,et+ut,ut<0?ft.childCount:0,ut,ct);if(St)return St}et+=ft.nodeSize*ut}return null}function selectionToInsertionEnd$1(it,g,et){let ot=it.steps.length-1;if(ot<g)return;let ut=it.steps[ot];if(!(ut instanceof ReplaceStep||ut instanceof ReplaceAroundStep))return;let ct=it.mapping.maps[ot],dt;ct.forEach((ft,St,kt,Tt)=>{dt==null&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,et){super.addStep(g,et),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,et=!0){let ot=this.selection;return et&&(g=g.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||Mark$1.none))),ot.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,et,ot){let ut=this.doc.type.schema;if(et==null)return g?this.replaceSelectionWith(ut.text(g),!0):this.deleteSelection();{if(ot==null&&(ot=et),ot=ot??et,!g)return this.deleteRange(et,ot);let ct=this.storedMarks;if(!ct){let dt=this.doc.resolve(et);ct=ot==et?dt.marks():dt.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(et,ot,ut.text(g,ct)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,et){return this.meta[typeof g=="string"?g:g.key]=et,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(it,g){return!g||!it?it:it.bind(g)}class FieldDesc{constructor(g,et,ot){this.name=g,this.init=bind(et.init,ot),this.apply=bind(et.apply,ot)}}const baseFields=[new FieldDesc("doc",{init(it){return it.doc||it.schema.topNodeType.createAndFill()},apply(it){return it.doc}}),new FieldDesc("selection",{init(it,g){return it.selection||Selection.atStart(g.doc)},apply(it){return it.selection}}),new FieldDesc("storedMarks",{init(it){return it.storedMarks||null},apply(it,g,et,ot){return ot.selection.$cursor?it.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(it,g){return it.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,et){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),et&&et.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new FieldDesc(ot.key,ot.spec.state,ot))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,et=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=et){let ut=this.config.plugins[ot];if(ut.spec.filterTransaction&&!ut.spec.filterTransaction.call(ut,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let et=[g],ot=this.applyInner(g),ut=null;for(;;){let ct=!1;for(let dt=0;dt<this.config.plugins.length;dt++){let ft=this.config.plugins[dt];if(ft.spec.appendTransaction){let St=ut?ut[dt].n:0,kt=ut?ut[dt].state:this,Tt=St<et.length&&ft.spec.appendTransaction.call(ft,St?et.slice(St):et,kt,ot);if(Tt&&ot.filterTransaction(Tt,dt)){if(Tt.setMeta("appendedTransaction",g),!ut){ut=[];for(let Rt=0;Rt<this.config.plugins.length;Rt++)ut.push(Rt<dt?{state:ot,n:et.length}:{state:this,n:0})}et.push(Tt),ot=ot.applyInner(Tt),ct=!0}ut&&(ut[dt]={state:ot,n:et.length})}}if(!ct)return{state:ot,transactions:et}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new EditorState(this.config),ot=this.config.fields;for(let ut=0;ut<ot.length;ut++){let ct=ot[ut];et[ct.name]=ct.apply(g,this[ct.name],this,et)}return et}get tr(){return new Transaction(this)}static create(g){let et=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),ot=new EditorState(et);for(let ut=0;ut<et.fields.length;ut++)ot[et.fields[ut].name]=et.fields[ut].init(g,ot);return ot}reconfigure(g){let et=new Configuration(this.schema,g.plugins),ot=et.fields,ut=new EditorState(et);for(let ct=0;ct<ot.length;ct++){let dt=ot[ct].name;ut[dt]=this.hasOwnProperty(dt)?this[dt]:ot[ct].init(g,ut)}return ut}toJSON(g){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),g&&typeof g=="object")for(let ot in g){if(ot=="doc"||ot=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ut=g[ot],ct=ut.spec.state;ct&&ct.toJSON&&(et[ot]=ct.toJSON.call(ut,this[ut.key]))}return et}static fromJSON(g,et,ot){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let ut=new Configuration(g.schema,g.plugins),ct=new EditorState(ut);return ut.fields.forEach(dt=>{if(dt.name=="doc")ct.doc=Node$2.fromJSON(g.schema,et.doc);else if(dt.name=="selection")ct.selection=Selection.fromJSON(ct.doc,et.selection);else if(dt.name=="storedMarks")et.storedMarks&&(ct.storedMarks=et.storedMarks.map(g.schema.markFromJSON));else{if(ot)for(let ft in ot){let St=ot[ft],kt=St.spec.state;if(St.key==dt.name&&kt&&kt.fromJSON&&Object.prototype.hasOwnProperty.call(et,ft)){ct[dt.name]=kt.fromJSON.call(St,g,et[ft],ct);return}}ct[dt.name]=dt.init(g,ct)}}),ct}}function bindProps(it,g,et){for(let ot in it){let ut=it[ot];ut instanceof Function?ut=ut.bind(g):ot=="handleDOMEvents"&&(ut=bindProps(ut,g,{})),et[ot]=ut}return et}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(it){return it in keys?it+"$"+ ++keys[it]:(keys[it]=0,it+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const deleteSelection$1=(it,g)=>it.selection.empty?!1:(g&&g(it.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("backward",it):et.parentOffset>0)?null:et}const joinBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ut=findCutBefore(ot);if(!ut){let dt=ot.blockRange(),ft=dt&&liftTarget(dt);return ft==null?!1:(g&&g(it.tr.lift(dt,ft).scrollIntoView()),!0)}let ct=ut.nodeBefore;if(deleteBarrier(it,ut,g,-1))return!0;if(ot.parent.content.size==0&&(textblockAt(ct,"end")||NodeSelection.isSelectable(ct)))for(let dt=ot.depth;;dt--){let ft=replaceStep(it.doc,ot.before(dt),ot.after(dt),Slice.empty);if(ft&&ft.slice.size<ft.to-ft.from){if(g){let St=it.tr.step(ft);St.setSelection(textblockAt(ct,"end")?Selection.findFrom(St.doc.resolve(St.mapping.map(ut.pos,-1)),-1):NodeSelection.create(St.doc,ut.pos-ct.nodeSize)),g(St.scrollIntoView())}return!0}if(dt==1||ot.node(dt-1).childCount>1)break}return ct.isAtom&&ut.depth==ot.depth-1?(g&&g(it.tr.delete(ut.pos-ct.nodeSize,ut.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ut=findCutBefore(ot);return ut?joinTextblocksAround(it,ut,g):!1},joinTextblockForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ut=findCutAfter(ot);return ut?joinTextblocksAround(it,ut,g):!1};function joinTextblocksAround(it,g,et){let ot=g.nodeBefore,ut=ot,ct=g.pos-1;for(;!ut.isTextblock;ct--){if(ut.type.spec.isolating)return!1;let Tt=ut.lastChild;if(!Tt)return!1;ut=Tt}let dt=g.nodeAfter,ft=dt,St=g.pos+1;for(;!ft.isTextblock;St++){if(ft.type.spec.isolating)return!1;let Tt=ft.firstChild;if(!Tt)return!1;ft=Tt}let kt=replaceStep(it.doc,ct,St,Slice.empty);if(!kt||kt.from!=ct||kt instanceof ReplaceStep&&kt.slice.size>=St-ct)return!1;if(et){let Tt=it.tr.step(kt);Tt.setSelection(TextSelection.create(Tt.doc,ct)),et(Tt.scrollIntoView())}return!0}function textblockAt(it,g,et=!1){for(let ot=it;ot;ot=g=="start"?ot.firstChild:ot.lastChild){if(ot.isTextblock)return!0;if(et&&ot.childCount!=1)return!1}return!1}const selectNodeBackward$1=(it,g,et)=>{let{$head:ot,empty:ut}=it.selection,ct=ot;if(!ut)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("backward",it):ot.parentOffset>0)return!1;ct=findCutBefore(ot)}let dt=ct&&ct.nodeBefore;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct.pos-dt.nodeSize)).scrollIntoView()),!0)};function findCutBefore(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){if(it.index(g)>0)return it.doc.resolve(it.before(g+1));if(it.node(g).type.spec.isolating)break}return null}function atBlockEnd(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("forward",it):et.parentOffset<et.parent.content.size)?null:et}const joinForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ut=findCutAfter(ot);if(!ut)return!1;let ct=ut.nodeAfter;if(deleteBarrier(it,ut,g,1))return!0;if(ot.parent.content.size==0&&(textblockAt(ct,"start")||NodeSelection.isSelectable(ct))){let dt=replaceStep(it.doc,ot.before(),ot.after(),Slice.empty);if(dt&&dt.slice.size<dt.to-dt.from){if(g){let ft=it.tr.step(dt);ft.setSelection(textblockAt(ct,"start")?Selection.findFrom(ft.doc.resolve(ft.mapping.map(ut.pos)),1):NodeSelection.create(ft.doc,ft.mapping.map(ut.pos))),g(ft.scrollIntoView())}return!0}}return ct.isAtom&&ut.depth==ot.depth-1?(g&&g(it.tr.delete(ut.pos,ut.pos+ct.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(it,g,et)=>{let{$head:ot,empty:ut}=it.selection,ct=ot;if(!ut)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("forward",it):ot.parentOffset<ot.parent.content.size)return!1;ct=findCutAfter(ot)}let dt=ct&&ct.nodeAfter;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct.pos)).scrollIntoView()),!0)};function findCutAfter(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){let et=it.node(g);if(it.index(g)+1<et.childCount)return it.doc.resolve(it.after(g+1));if(et.type.spec.isolating)break}return null}const joinUp$1=(it,g)=>{let et=it.selection,ot=et instanceof NodeSelection,ut;if(ot){if(et.node.isTextblock||!canJoin(it.doc,et.from))return!1;ut=et.from}else if(ut=joinPoint(it.doc,et.from,-1),ut==null)return!1;if(g){let ct=it.tr.join(ut);ot&&ct.setSelection(NodeSelection.create(ct.doc,ut-it.doc.resolve(ut).nodeBefore.nodeSize)),g(ct.scrollIntoView())}return!0},joinDown$1=(it,g)=>{let et=it.selection,ot;if(et instanceof NodeSelection){if(et.node.isTextblock||!canJoin(it.doc,et.to))return!1;ot=et.to}else if(ot=joinPoint(it.doc,et.to,1),ot==null)return!1;return g&&g(it.tr.join(ot).scrollIntoView()),!0},lift$1=(it,g)=>{let{$from:et,$to:ot}=it.selection,ut=et.blockRange(ot),ct=ut&&liftTarget(ut);return ct==null?!1:(g&&g(it.tr.lift(ut,ct).scrollIntoView()),!0)},newlineInCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;return!et.parent.type.spec.code||!et.sameParent(ot)?!1:(g&&g(it.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(it){for(let g=0;g<it.edgeCount;g++){let{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}const exitCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;if(!et.parent.type.spec.code||!et.sameParent(ot))return!1;let ut=et.node(-1),ct=et.indexAfter(-1),dt=defaultBlockAt$1(ut.contentMatchAt(ct));if(!dt||!ut.canReplaceWith(ct,ct,dt))return!1;if(g){let ft=et.after(),St=it.tr.replaceWith(ft,ft,dt.createAndFill());St.setSelection(Selection.near(St.doc.resolve(ft),1)),g(St.scrollIntoView())}return!0},createParagraphNear$1=(it,g)=>{let et=it.selection,{$from:ot,$to:ut}=et;if(et instanceof AllSelection||ot.parent.inlineContent||ut.parent.inlineContent)return!1;let ct=defaultBlockAt$1(ut.parent.contentMatchAt(ut.indexAfter()));if(!ct||!ct.isTextblock)return!1;if(g){let dt=(!ot.parentOffset&&ut.index()<ut.parent.childCount?ot:ut).pos,ft=it.tr.insert(dt,ct.createAndFill());ft.setSelection(TextSelection.create(ft.doc,dt+1)),g(ft.scrollIntoView())}return!0},liftEmptyBlock$1=(it,g)=>{let{$cursor:et}=it.selection;if(!et||et.parent.content.size)return!1;if(et.depth>1&&et.after()!=et.end(-1)){let ct=et.before();if(canSplit(it.doc,ct))return g&&g(it.tr.split(ct).scrollIntoView()),!0}let ot=et.blockRange(),ut=ot&&liftTarget(ot);return ut==null?!1:(g&&g(it.tr.lift(ot,ut).scrollIntoView()),!0)},selectParentNode$1=(it,g)=>{let{$from:et,to:ot}=it.selection,ut,ct=et.sharedDepth(ot);return ct==0?!1:(ut=et.before(ct),g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut))),!0)};function joinMaybeClear(it,g,et){let ot=g.nodeBefore,ut=g.nodeAfter,ct=g.index();return!ot||!ut||!ot.type.compatibleContent(ut.type)?!1:!ot.content.size&&g.parent.canReplace(ct-1,ct)?(et&&et(it.tr.delete(g.pos-ot.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(ct,ct+1)||!(ut.isTextblock||canJoin(it.doc,g.pos))?!1:(et&&et(it.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(it,g,et,ot){let ut=g.nodeBefore,ct=g.nodeAfter,dt,ft,St=ut.type.spec.isolating||ct.type.spec.isolating;if(!St&&joinMaybeClear(it,g,et))return!0;let kt=!St&&g.parent.canReplace(g.index(),g.index()+1);if(kt&&(dt=(ft=ut.contentMatchAt(ut.childCount)).findWrapping(ct.type))&&ft.matchType(dt[0]||ct.type).validEnd){if(et){let Ft=g.pos+ct.nodeSize,Bt=Fragment.empty;for(let zt=dt.length-1;zt>=0;zt--)Bt=Fragment.from(dt[zt].create(null,Bt));Bt=Fragment.from(ut.copy(Bt));let Ht=it.tr.step(new ReplaceAroundStep(g.pos-1,Ft,g.pos,Ft,new Slice(Bt,1,0),dt.length,!0)),Yt=Ht.doc.resolve(Ft+2*dt.length);Yt.nodeAfter&&Yt.nodeAfter.type==ut.type&&canJoin(Ht.doc,Yt.pos)&&Ht.join(Yt.pos),et(Ht.scrollIntoView())}return!0}let Tt=ct.type.spec.isolating||ot>0&&St?null:Selection.findFrom(g,1),Rt=Tt&&Tt.$from.blockRange(Tt.$to),jt=Rt&&liftTarget(Rt);if(jt!=null&&jt>=g.depth)return et&&et(it.tr.lift(Rt,jt).scrollIntoView()),!0;if(kt&&textblockAt(ct,"start",!0)&&textblockAt(ut,"end")){let Ft=ut,Bt=[];for(;Bt.push(Ft),!Ft.isTextblock;)Ft=Ft.lastChild;let Ht=ct,Yt=1;for(;!Ht.isTextblock;Ht=Ht.firstChild)Yt++;if(Ft.canReplace(Ft.childCount,Ft.childCount,Ht.content)){if(et){let zt=Fragment.empty;for(let en=Bt.length-1;en>=0;en--)zt=Fragment.from(Bt[en].copy(zt));let Kt=it.tr.step(new ReplaceAroundStep(g.pos-Bt.length,g.pos+ct.nodeSize,g.pos+Yt,g.pos+ct.nodeSize-Yt,new Slice(zt,Bt.length,0),0,!0));et(Kt.scrollIntoView())}return!0}}return!1}function selectTextblockSide(it){return function(g,et){let ot=g.selection,ut=it<0?ot.$from:ot.$to,ct=ut.depth;for(;ut.node(ct).isInline;){if(!ct)return!1;ct--}return ut.node(ct).isTextblock?(et&&et(g.tr.setSelection(TextSelection.create(g.doc,it<0?ut.start(ct):ut.end(ct)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(it,g=null){return function(et,ot){let{$from:ut,$to:ct}=et.selection,dt=ut.blockRange(ct),ft=dt&&findWrapping(dt,it,g);return ft?(ot&&ot(et.tr.wrap(dt,ft).scrollIntoView()),!0):!1}}function setBlockType(it,g=null){return function(et,ot){let ut=!1;for(let ct=0;ct<et.selection.ranges.length&&!ut;ct++){let{$from:{pos:dt},$to:{pos:ft}}=et.selection.ranges[ct];et.doc.nodesBetween(dt,ft,(St,kt)=>{if(ut)return!1;if(!(!St.isTextblock||St.hasMarkup(it,g)))if(St.type==it)ut=!0;else{let Tt=et.doc.resolve(kt),Rt=Tt.index();ut=Tt.parent.canReplaceWith(Rt,Rt+1,it)}})}if(!ut)return!1;if(ot){let ct=et.tr;for(let dt=0;dt<et.selection.ranges.length;dt++){let{$from:{pos:ft},$to:{pos:St}}=et.selection.ranges[dt];ct.setBlockType(ft,St,it,g)}ot(ct.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(it,g=null){return function(et,ot){let{$from:ut,$to:ct}=et.selection,dt=ut.blockRange(ct);if(!dt)return!1;let ft=ot?et.tr:null;return wrapRangeInList(ft,dt,it,g)?(ot&&ot(ft.scrollIntoView()),!0):!1}}function wrapRangeInList(it,g,et,ot=null){let ut=!1,ct=g,dt=g.$from.doc;if(g.depth>=2&&g.$from.node(g.depth-1).type.compatibleContent(et)&&g.startIndex==0){if(g.$from.index(g.depth-1)==0)return!1;let St=dt.resolve(g.start-2);ct=new NodeRange(St,St,g.depth),g.endIndex<g.parent.childCount&&(g=new NodeRange(g.$from,dt.resolve(g.$to.end(g.depth)),g.depth)),ut=!0}let ft=findWrapping(ct,et,ot,g);return ft?(it&&doWrapInList(it,g,ft,ut,et),!0):!1}function doWrapInList(it,g,et,ot,ut){let ct=Fragment.empty;for(let Tt=et.length-1;Tt>=0;Tt--)ct=Fragment.from(et[Tt].type.create(et[Tt].attrs,ct));it.step(new ReplaceAroundStep(g.start-(ot?2:0),g.end,g.start,g.end,new Slice(ct,0,0),et.length,!0));let dt=0;for(let Tt=0;Tt<et.length;Tt++)et[Tt].type==ut&&(dt=Tt+1);let ft=et.length-dt,St=g.start+et.length-(ot?2:0),kt=g.parent;for(let Tt=g.startIndex,Rt=g.endIndex,jt=!0;Tt<Rt;Tt++,jt=!1)!jt&&canSplit(it.doc,St,ft)&&(it.split(St,ft),St+=2*ft),St+=kt.child(Tt).nodeSize;return it}function liftListItem$1(it){return function(g,et){let{$from:ot,$to:ut}=g.selection,ct=ot.blockRange(ut,dt=>dt.childCount>0&&dt.firstChild.type==it);return ct?et?ot.node(ct.depth-1).type==it?liftToOuterList(g,et,it,ct):liftOutOfList(g,et,ct):!0:!1}}function liftToOuterList(it,g,et,ot){let ut=it.tr,ct=ot.end,dt=ot.$to.end(ot.depth);ct<dt&&(ut.step(new ReplaceAroundStep(ct-1,dt,ct,dt,new Slice(Fragment.from(et.create(null,ot.parent.copy())),1,0),1,!0)),ot=new NodeRange(ut.doc.resolve(ot.$from.pos),ut.doc.resolve(dt),ot.depth));const ft=liftTarget(ot);if(ft==null)return!1;ut.lift(ot,ft);let St=ut.doc.resolve(ut.mapping.map(ct,-1)-1);return canJoin(ut.doc,St.pos)&&St.nodeBefore.type==St.nodeAfter.type&&ut.join(St.pos),g(ut.scrollIntoView()),!0}function liftOutOfList(it,g,et){let ot=it.tr,ut=et.parent;for(let Ft=et.end,Bt=et.endIndex-1,Ht=et.startIndex;Bt>Ht;Bt--)Ft-=ut.child(Bt).nodeSize,ot.delete(Ft-1,Ft+1);let ct=ot.doc.resolve(et.start),dt=ct.nodeAfter;if(ot.mapping.map(et.end)!=et.start+ct.nodeAfter.nodeSize)return!1;let ft=et.startIndex==0,St=et.endIndex==ut.childCount,kt=ct.node(-1),Tt=ct.index(-1);if(!kt.canReplace(Tt+(ft?0:1),Tt+1,dt.content.append(St?Fragment.empty:Fragment.from(ut))))return!1;let Rt=ct.pos,jt=Rt+dt.nodeSize;return ot.step(new ReplaceAroundStep(Rt-(ft?1:0),jt+(St?1:0),Rt+1,jt-1,new Slice((ft?Fragment.empty:Fragment.from(ut.copy(Fragment.empty))).append(St?Fragment.empty:Fragment.from(ut.copy(Fragment.empty))),ft?0:1,St?0:1),ft?0:1)),g(ot.scrollIntoView()),!0}function sinkListItem$1(it){return function(g,et){let{$from:ot,$to:ut}=g.selection,ct=ot.blockRange(ut,kt=>kt.childCount>0&&kt.firstChild.type==it);if(!ct)return!1;let dt=ct.startIndex;if(dt==0)return!1;let ft=ct.parent,St=ft.child(dt-1);if(St.type!=it)return!1;if(et){let kt=St.lastChild&&St.lastChild.type==ft.type,Tt=Fragment.from(kt?it.create():null),Rt=new Slice(Fragment.from(it.create(null,Fragment.from(ft.type.create(null,Tt)))),kt?3:1,0),jt=ct.start,Ft=ct.end;et(g.tr.step(new ReplaceAroundStep(jt-(kt?3:1),Ft,jt,Ft,Rt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(it){for(var g=0;;g++)if(it=it.previousSibling,!it)return g},parentNode=function(it){let g=it.assignedSlot||it.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(it,g,et){let ot=reusedRange||(reusedRange=document.createRange());return ot.setEnd(it,et??it.nodeValue.length),ot.setStart(it,g||0),ot},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(it,g,et,ot){return et&&(scanFor(it,g,et,ot,-1)||scanFor(it,g,et,ot,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(it,g,et,ot,ut){for(var ct;;){if(it==et&&g==ot)return!0;if(g==(ut<0?0:nodeSize(it))){let dt=it.parentNode;if(!dt||dt.nodeType!=1||hasBlockDesc(it)||atomElements.test(it.nodeName)||it.contentEditable=="false")return!1;g=domIndex(it)+(ut<0?0:1),it=dt}else if(it.nodeType==1){let dt=it.childNodes[g+(ut<0?-1:0)];if(dt.nodeType==1&&dt.contentEditable=="false")if(!((ct=dt.pmViewDesc)===null||ct===void 0)&&ct.ignoreForSelection)g+=ut;else return!1;else it=dt,g=ut<0?nodeSize(it):0}else return!1}}function nodeSize(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function textNodeBefore$1(it,g){for(;;){if(it.nodeType==3&&g)return it;if(it.nodeType==1&&g>0){if(it.contentEditable=="false")return null;it=it.childNodes[g-1],g=nodeSize(it)}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it),it=it.parentNode;else return null}}function textNodeAfter$1(it,g){for(;;){if(it.nodeType==3&&g<it.nodeValue.length)return it;if(it.nodeType==1&&g<it.childNodes.length){if(it.contentEditable=="false")return null;it=it.childNodes[g],g=0}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it)+1,it=it.parentNode;else return null}}function isOnEdge(it,g,et){for(let ot=g==0,ut=g==nodeSize(it);ot||ut;){if(it==et)return!0;let ct=domIndex(it);if(it=it.parentNode,!it)return!1;ot=ot&&ct==0,ut=ut&&ct==nodeSize(it)}}function hasBlockDesc(it){let g;for(let et=it;et&&!(g=et.pmViewDesc);et=et.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==it||g.contentDOM==it)}const selectionCollapsed=function(it){return it.focusNode&&isEquivalentPosition(it.focusNode,it.focusOffset,it.anchorNode,it.anchorOffset)};function keyEvent(it,g){let et=document.createEvent("Event");return et.initEvent("keydown",!0,!0),et.keyCode=it,et.key=et.code=g,et}function deepActiveElement(it){let g=it.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(it,g,et){if(it.caretPositionFromPoint)try{let ot=it.caretPositionFromPoint(g,et);if(ot)return{node:ot.offsetNode,offset:Math.min(nodeSize(ot.offsetNode),ot.offset)}}catch{}if(it.caretRangeFromPoint){let ot=it.caretRangeFromPoint(g,et);if(ot)return{node:ot.startContainer,offset:Math.min(nodeSize(ot.startContainer),ot.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(it){let g=it.defaultView&&it.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:it.documentElement.clientWidth,top:0,bottom:it.documentElement.clientHeight}}function getSide(it,g){return typeof it=="number"?it:it[g]}function clientRect(it){let g=it.getBoundingClientRect(),et=g.width/it.offsetWidth||1,ot=g.height/it.offsetHeight||1;return{left:g.left,right:g.left+it.clientWidth*et,top:g.top,bottom:g.top+it.clientHeight*ot}}function scrollRectIntoView(it,g,et){let ot=it.someProp("scrollThreshold")||0,ut=it.someProp("scrollMargin")||5,ct=it.dom.ownerDocument;for(let dt=et||it.dom;dt;){if(dt.nodeType!=1){dt=parentNode(dt);continue}let ft=dt,St=ft==ct.body,kt=St?windowRect(ct):clientRect(ft),Tt=0,Rt=0;if(g.top<kt.top+getSide(ot,"top")?Rt=-(kt.top-g.top+getSide(ut,"top")):g.bottom>kt.bottom-getSide(ot,"bottom")&&(Rt=g.bottom-g.top>kt.bottom-kt.top?g.top+getSide(ut,"top")-kt.top:g.bottom-kt.bottom+getSide(ut,"bottom")),g.left<kt.left+getSide(ot,"left")?Tt=-(kt.left-g.left+getSide(ut,"left")):g.right>kt.right-getSide(ot,"right")&&(Tt=g.right-kt.right+getSide(ut,"right")),Tt||Rt)if(St)ct.defaultView.scrollBy(Tt,Rt);else{let Ft=ft.scrollLeft,Bt=ft.scrollTop;Rt&&(ft.scrollTop+=Rt),Tt&&(ft.scrollLeft+=Tt);let Ht=ft.scrollLeft-Ft,Yt=ft.scrollTop-Bt;g={left:g.left-Ht,top:g.top-Yt,right:g.right-Ht,bottom:g.bottom-Yt}}let jt=St?"fixed":getComputedStyle(dt).position;if(/^(fixed|sticky)$/.test(jt))break;dt=jt=="absolute"?dt.offsetParent:parentNode(dt)}}function storeScrollPos(it){let g=it.dom.getBoundingClientRect(),et=Math.max(0,g.top),ot,ut;for(let ct=(g.left+g.right)/2,dt=et+1;dt<Math.min(innerHeight,g.bottom);dt+=5){let ft=it.root.elementFromPoint(ct,dt);if(!ft||ft==it.dom||!it.dom.contains(ft))continue;let St=ft.getBoundingClientRect();if(St.top>=et-20){ot=ft,ut=St.top;break}}return{refDOM:ot,refTop:ut,stack:scrollStack(it.dom)}}function scrollStack(it){let g=[],et=it.ownerDocument;for(let ot=it;ot&&(g.push({dom:ot,top:ot.scrollTop,left:ot.scrollLeft}),it!=et);ot=parentNode(ot));return g}function resetScrollPos({refDOM:it,refTop:g,stack:et}){let ot=it?it.getBoundingClientRect().top:0;restoreScrollStack(et,ot==0?0:ot-g)}function restoreScrollStack(it,g){for(let et=0;et<it.length;et++){let{dom:ot,top:ut,left:ct}=it[et];ot.scrollTop!=ut+g&&(ot.scrollTop=ut+g),ot.scrollLeft!=ct&&(ot.scrollLeft=ct)}}let preventScrollSupported=null;function focusPreventScroll(it){if(it.setActive)return it.setActive();if(preventScrollSupported)return it.focus(preventScrollSupported);let g=scrollStack(it);it.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(it,g){let et,ot=2e8,ut,ct=0,dt=g.top,ft=g.top,St,kt;for(let Tt=it.firstChild,Rt=0;Tt;Tt=Tt.nextSibling,Rt++){let jt;if(Tt.nodeType==1)jt=Tt.getClientRects();else if(Tt.nodeType==3)jt=textRange(Tt).getClientRects();else continue;for(let Ft=0;Ft<jt.length;Ft++){let Bt=jt[Ft];if(Bt.top<=dt&&Bt.bottom>=ft){dt=Math.max(Bt.bottom,dt),ft=Math.min(Bt.top,ft);let Ht=Bt.left>g.left?Bt.left-g.left:Bt.right<g.left?g.left-Bt.right:0;if(Ht<ot){et=Tt,ot=Ht,ut=Ht&&et.nodeType==3?{left:Bt.right<g.left?Bt.right:Bt.left,top:g.top}:g,Tt.nodeType==1&&Ht&&(ct=Rt+(g.left>=(Bt.left+Bt.right)/2?1:0));continue}}else Bt.top>g.top&&!St&&Bt.left<=g.left&&Bt.right>=g.left&&(St=Tt,kt={left:Math.max(Bt.left,Math.min(Bt.right,g.left)),top:Bt.top});!et&&(g.left>=Bt.right&&g.top>=Bt.top||g.left>=Bt.left&&g.top>=Bt.bottom)&&(ct=Rt+1)}}return!et&&St&&(et=St,ut=kt,ot=0),et&&et.nodeType==3?findOffsetInText(et,ut):!et||ot&&et.nodeType==1?{node:it,offset:ct}:findOffsetInNode(et,ut)}function findOffsetInText(it,g){let et=it.nodeValue.length,ot=document.createRange();for(let ut=0;ut<et;ut++){ot.setEnd(it,ut+1),ot.setStart(it,ut);let ct=singleRect(ot,1);if(ct.top!=ct.bottom&&inRect(g,ct))return{node:it,offset:ut+(g.left>=(ct.left+ct.right)/2?1:0)}}return{node:it,offset:0}}function inRect(it,g){return it.left>=g.left-1&&it.left<=g.right+1&&it.top>=g.top-1&&it.top<=g.bottom+1}function targetKludge(it,g){let et=it.parentNode;return et&&/^li$/i.test(et.nodeName)&&g.left<it.getBoundingClientRect().left?et:it}function posFromElement(it,g,et){let{node:ot,offset:ut}=findOffsetInNode(g,et),ct=-1;if(ot.nodeType==1&&!ot.firstChild){let dt=ot.getBoundingClientRect();ct=dt.left!=dt.right&&et.left>(dt.left+dt.right)/2?1:-1}return it.docView.posFromDOM(ot,ut,ct)}function posFromCaret(it,g,et,ot){let ut=-1;for(let ct=g,dt=!1;ct!=it.dom;){let ft=it.docView.nearestDesc(ct,!0),St;if(!ft)return null;if(ft.dom.nodeType==1&&(ft.node.isBlock&&ft.parent||!ft.contentDOM)&&((St=ft.dom.getBoundingClientRect()).width||St.height)&&(ft.node.isBlock&&ft.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(ft.dom.nodeName)&&(!dt&&St.left>ot.left||St.top>ot.top?ut=ft.posBefore:(!dt&&St.right<ot.left||St.bottom<ot.top)&&(ut=ft.posAfter),dt=!0),!ft.contentDOM&&ut<0&&!ft.node.isText))return(ft.node.isBlock?ot.top<(St.top+St.bottom)/2:ot.left<(St.left+St.right)/2)?ft.posBefore:ft.posAfter;ct=ft.dom.parentNode}return ut>-1?ut:it.docView.posFromDOM(g,et,-1)}function elementFromPoint(it,g,et){let ot=it.childNodes.length;if(ot&&et.top<et.bottom)for(let ut=Math.max(0,Math.min(ot-1,Math.floor(ot*(g.top-et.top)/(et.bottom-et.top))-2)),ct=ut;;){let dt=it.childNodes[ct];if(dt.nodeType==1){let ft=dt.getClientRects();for(let St=0;St<ft.length;St++){let kt=ft[St];if(inRect(g,kt))return elementFromPoint(dt,g,kt)}}if((ct=(ct+1)%ot)==ut)break}return it}function posAtCoords(it,g){let et=it.dom.ownerDocument,ot,ut=0,ct=caretFromPoint(et,g.left,g.top);ct&&({node:ot,offset:ut}=ct);let dt=(it.root.elementFromPoint?it.root:et).elementFromPoint(g.left,g.top),ft;if(!dt||!it.dom.contains(dt.nodeType!=1?dt.parentNode:dt)){let kt=it.dom.getBoundingClientRect();if(!inRect(g,kt)||(dt=elementFromPoint(it.dom,g,kt),!dt))return null}if(safari)for(let kt=dt;ot&&kt;kt=parentNode(kt))kt.draggable&&(ot=void 0);if(dt=targetKludge(dt,g),ot){if(gecko&&ot.nodeType==1&&(ut=Math.min(ut,ot.childNodes.length),ut<ot.childNodes.length)){let Tt=ot.childNodes[ut],Rt;Tt.nodeName=="IMG"&&(Rt=Tt.getBoundingClientRect()).right<=g.left&&Rt.bottom>g.top&&ut++}let kt;webkit&&ut&&ot.nodeType==1&&(kt=ot.childNodes[ut-1]).nodeType==1&&kt.contentEditable=="false"&&kt.getBoundingClientRect().top>=g.top&&ut--,ot==it.dom&&ut==ot.childNodes.length-1&&ot.lastChild.nodeType==1&&g.top>ot.lastChild.getBoundingClientRect().bottom?ft=it.state.doc.content.size:(ut==0||ot.nodeType!=1||ot.childNodes[ut-1].nodeName!="BR")&&(ft=posFromCaret(it,ot,ut,g))}ft==null&&(ft=posFromElement(it,dt,g));let St=it.docView.nearestDesc(dt,!0);return{pos:ft,inside:St?St.posAtStart-St.border:-1}}function nonZero(it){return it.top<it.bottom||it.left<it.right}function singleRect(it,g){let et=it.getClientRects();if(et.length){let ot=et[g<0?0:et.length-1];if(nonZero(ot))return ot}return Array.prototype.find.call(et,nonZero)||it.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(it,g,et){let{node:ot,offset:ut,atom:ct}=it.docView.domFromPos(g,et<0?-1:1),dt=webkit||gecko;if(ot.nodeType==3)if(dt&&(BIDI.test(ot.nodeValue)||(et<0?!ut:ut==ot.nodeValue.length))){let St=singleRect(textRange(ot,ut,ut),et);if(gecko&&ut&&/\s/.test(ot.nodeValue[ut-1])&&ut<ot.nodeValue.length){let kt=singleRect(textRange(ot,ut-1,ut-1),-1);if(kt.top==St.top){let Tt=singleRect(textRange(ot,ut,ut+1),-1);if(Tt.top!=St.top)return flattenV(Tt,Tt.left<kt.left)}}return St}else{let St=ut,kt=ut,Tt=et<0?1:-1;return et<0&&!ut?(kt++,Tt=-1):et>=0&&ut==ot.nodeValue.length?(St--,Tt=1):et<0?St--:kt++,flattenV(singleRect(textRange(ot,St,kt),Tt),Tt<0)}if(!it.state.doc.resolve(g-(ct||0)).parent.inlineContent){if(ct==null&&ut&&(et<0||ut==nodeSize(ot))){let St=ot.childNodes[ut-1];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!1)}if(ct==null&&ut<nodeSize(ot)){let St=ot.childNodes[ut];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!0)}return flattenH(ot.getBoundingClientRect(),et>=0)}if(ct==null&&ut&&(et<0||ut==nodeSize(ot))){let St=ot.childNodes[ut-1],kt=St.nodeType==3?textRange(St,nodeSize(St)-(dt?0:1)):St.nodeType==1&&(St.nodeName!="BR"||!St.nextSibling)?St:null;if(kt)return flattenV(singleRect(kt,1),!1)}if(ct==null&&ut<nodeSize(ot)){let St=ot.childNodes[ut];for(;St.pmViewDesc&&St.pmViewDesc.ignoreForCoords;)St=St.nextSibling;let kt=St?St.nodeType==3?textRange(St,0,dt?0:1):St.nodeType==1?St:null:null;if(kt)return flattenV(singleRect(kt,-1),!0)}return flattenV(singleRect(ot.nodeType==3?textRange(ot):ot,-et),et>=0)}function flattenV(it,g){if(it.width==0)return it;let et=g?it.left:it.right;return{top:it.top,bottom:it.bottom,left:et,right:et}}function flattenH(it,g){if(it.height==0)return it;let et=g?it.top:it.bottom;return{top:et,bottom:et,left:it.left,right:it.right}}function withFlushedState(it,g,et){let ot=it.state,ut=it.root.activeElement;ot!=g&&it.updateState(g),ut!=it.dom&&it.focus();try{return et()}finally{ot!=g&&it.updateState(ot),ut!=it.dom&&ut&&ut.focus()}}function endOfTextblockVertical(it,g,et){let ot=g.selection,ut=et=="up"?ot.$from:ot.$to;return withFlushedState(it,g,()=>{let{node:ct}=it.docView.domFromPos(ut.pos,et=="up"?-1:1);for(;;){let ft=it.docView.nearestDesc(ct,!0);if(!ft)break;if(ft.node.isBlock){ct=ft.contentDOM||ft.dom;break}ct=ft.dom.parentNode}let dt=coordsAtPos(it,ut.pos,1);for(let ft=ct.firstChild;ft;ft=ft.nextSibling){let St;if(ft.nodeType==1)St=ft.getClientRects();else if(ft.nodeType==3)St=textRange(ft,0,ft.nodeValue.length).getClientRects();else continue;for(let kt=0;kt<St.length;kt++){let Tt=St[kt];if(Tt.bottom>Tt.top+1&&(et=="up"?dt.top-Tt.top>(Tt.bottom-dt.top)*2:Tt.bottom-dt.bottom>(dt.bottom-Tt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(it,g,et){let{$head:ot}=g.selection;if(!ot.parent.isTextblock)return!1;let ut=ot.parentOffset,ct=!ut,dt=ut==ot.parent.content.size,ft=it.domSelection();return ft?!maybeRTL.test(ot.parent.textContent)||!ft.modify?et=="left"||et=="backward"?ct:dt:withFlushedState(it,g,()=>{let{focusNode:St,focusOffset:kt,anchorNode:Tt,anchorOffset:Rt}=it.domSelectionRange(),jt=ft.caretBidiLevel;ft.modify("move",et,"character");let Ft=ot.depth?it.docView.domAfterPos(ot.before()):it.dom,{focusNode:Bt,focusOffset:Ht}=it.domSelectionRange(),Yt=Bt&&!Ft.contains(Bt.nodeType==1?Bt:Bt.parentNode)||St==Bt&&kt==Ht;try{ft.collapse(Tt,Rt),St&&(St!=Tt||kt!=Rt)&&ft.extend&&ft.extend(St,kt)}catch{}return jt!=null&&(ft.caretBidiLevel=jt),Yt}):ot.pos==ot.start()||ot.pos==ot.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(it,g,et){return cachedState==g&&cachedDir==et?cachedResult:(cachedState=g,cachedDir=et,cachedResult=et=="up"||et=="down"?endOfTextblockVertical(it,g,et):endOfTextblockHorizontal(it,g,et))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,et,ot,ut){this.parent=g,this.children=et,this.dom=ot,this.contentDOM=ut,this.dirty=NOT_DIRTY,ot.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,et,ot){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let et=0;et<this.children.length;et++)g+=this.children[et].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let et=0,ot=this.posAtStart;;et++){let ut=this.children[et];if(ut==g)return ot;ot+=ut.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,et,ot){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(ot<0){let ct,dt;if(g==this.contentDOM)ct=g.childNodes[et-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ct=g.previousSibling}for(;ct&&!((dt=ct.pmViewDesc)&&dt.parent==this);)ct=ct.previousSibling;return ct?this.posBeforeChild(dt)+dt.size:this.posAtStart}else{let ct,dt;if(g==this.contentDOM)ct=g.childNodes[et];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ct=g.nextSibling}for(;ct&&!((dt=ct.pmViewDesc)&&dt.parent==this);)ct=ct.nextSibling;return ct?this.posBeforeChild(dt):this.posAtEnd}let ut;if(g==this.dom&&this.contentDOM)ut=et>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ut=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(et==0)for(let ct=g;;ct=ct.parentNode){if(ct==this.dom){ut=!1;break}if(ct.previousSibling)break}if(ut==null&&et==g.childNodes.length)for(let ct=g;;ct=ct.parentNode){if(ct==this.dom){ut=!0;break}if(ct.nextSibling)break}}return ut??ot>0?this.posAtEnd:this.posAtStart}nearestDesc(g,et=!1){for(let ot=!0,ut=g;ut;ut=ut.parentNode){let ct=this.getDesc(ut),dt;if(ct&&(!et||ct.node))if(ot&&(dt=ct.nodeDOM)&&!(dt.nodeType==1?dt.contains(g.nodeType==1?g:g.parentNode):dt==g))ot=!1;else return ct}}getDesc(g){let et=g.pmViewDesc;for(let ot=et;ot;ot=ot.parent)if(ot==this)return et}posFromDOM(g,et,ot){for(let ut=g;ut;ut=ut.parentNode){let ct=this.getDesc(ut);if(ct)return ct.localPosFromDOM(g,et,ot)}return-1}descAt(g){for(let et=0,ot=0;et<this.children.length;et++){let ut=this.children[et],ct=ot+ut.size;if(ot==g&&ct!=ot){for(;!ut.border&&ut.children.length;)for(let dt=0;dt<ut.children.length;dt++){let ft=ut.children[dt];if(ft.size){ut=ft;break}}return ut}if(g<ct)return ut.descAt(g-ot-ut.border);ot=ct}}domFromPos(g,et){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let ot=0,ut=0;for(let ct=0;ot<this.children.length;ot++){let dt=this.children[ot],ft=ct+dt.size;if(ft>g||dt instanceof TrailingHackViewDesc){ut=g-ct;break}ct=ft}if(ut)return this.children[ot].domFromPos(ut-this.children[ot].border,et);for(let ct;ot&&!(ct=this.children[ot-1]).size&&ct instanceof WidgetViewDesc&&ct.side>=0;ot--);if(et<=0){let ct,dt=!0;for(;ct=ot?this.children[ot-1]:null,!(!ct||ct.dom.parentNode==this.contentDOM);ot--,dt=!1);return ct&&et&&dt&&!ct.border&&!ct.domAtom?ct.domFromPos(ct.size,et):{node:this.contentDOM,offset:ct?domIndex(ct.dom)+1:0}}else{let ct,dt=!0;for(;ct=ot<this.children.length?this.children[ot]:null,!(!ct||ct.dom.parentNode==this.contentDOM);ot++,dt=!1);return ct&&dt&&!ct.border&&!ct.domAtom?ct.domFromPos(0,et):{node:this.contentDOM,offset:ct?domIndex(ct.dom):this.contentDOM.childNodes.length}}}parseRange(g,et,ot=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:et,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ut=-1,ct=-1;for(let dt=ot,ft=0;;ft++){let St=this.children[ft],kt=dt+St.size;if(ut==-1&&g<=kt){let Tt=dt+St.border;if(g>=Tt&&et<=kt-St.border&&St.node&&St.contentDOM&&this.contentDOM.contains(St.contentDOM))return St.parseRange(g,et,Tt);g=dt;for(let Rt=ft;Rt>0;Rt--){let jt=this.children[Rt-1];if(jt.size&&jt.dom.parentNode==this.contentDOM&&!jt.emptyChildAt(1)){ut=domIndex(jt.dom)+1;break}g-=jt.size}ut==-1&&(ut=0)}if(ut>-1&&(kt>et||ft==this.children.length-1)){et=kt;for(let Tt=ft+1;Tt<this.children.length;Tt++){let Rt=this.children[Tt];if(Rt.size&&Rt.dom.parentNode==this.contentDOM&&!Rt.emptyChildAt(-1)){ct=domIndex(Rt.dom);break}et+=Rt.size}ct==-1&&(ct=this.contentDOM.childNodes.length);break}dt=kt}return{node:this.contentDOM,from:g,to:et,fromOffset:ut,toOffset:ct}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let et=this.children[g<0?0:this.children.length-1];return et.size==0||et.emptyChildAt(g)}domAfterPos(g){let{node:et,offset:ot}=this.domFromPos(g,0);if(et.nodeType!=1||ot==et.childNodes.length)throw new RangeError("No node after pos "+g);return et.childNodes[ot]}setSelection(g,et,ot,ut=!1){let ct=Math.min(g,et),dt=Math.max(g,et);for(let Ft=0,Bt=0;Ft<this.children.length;Ft++){let Ht=this.children[Ft],Yt=Bt+Ht.size;if(ct>Bt&&dt<Yt)return Ht.setSelection(g-Bt-Ht.border,et-Bt-Ht.border,ot,ut);Bt=Yt}let ft=this.domFromPos(g,g?-1:1),St=et==g?ft:this.domFromPos(et,et?-1:1),kt=ot.root.getSelection(),Tt=ot.domSelectionRange(),Rt=!1;if((gecko||safari)&&g==et){let{node:Ft,offset:Bt}=ft;if(Ft.nodeType==3){if(Rt=!!(Bt&&Ft.nodeValue[Bt-1]==`
`),Rt&&Bt==Ft.nodeValue.length)for(let Ht=Ft,Yt;Ht;Ht=Ht.parentNode){if(Yt=Ht.nextSibling){Yt.nodeName=="BR"&&(ft=St={node:Yt.parentNode,offset:domIndex(Yt)+1});break}let zt=Ht.pmViewDesc;if(zt&&zt.node&&zt.node.isBlock)break}}else{let Ht=Ft.childNodes[Bt-1];Rt=Ht&&(Ht.nodeName=="BR"||Ht.contentEditable=="false")}}if(gecko&&Tt.focusNode&&Tt.focusNode!=St.node&&Tt.focusNode.nodeType==1){let Ft=Tt.focusNode.childNodes[Tt.focusOffset];Ft&&Ft.contentEditable=="false"&&(ut=!0)}if(!(ut||Rt&&safari)&&isEquivalentPosition(ft.node,ft.offset,Tt.anchorNode,Tt.anchorOffset)&&isEquivalentPosition(St.node,St.offset,Tt.focusNode,Tt.focusOffset))return;let jt=!1;if((kt.extend||g==et)&&!(Rt&&gecko)){kt.collapse(ft.node,ft.offset);try{g!=et&&kt.extend(St.node,St.offset),jt=!0}catch{}}if(!jt){if(g>et){let Bt=ft;ft=St,St=Bt}let Ft=document.createRange();Ft.setEnd(St.node,St.offset),Ft.setStart(ft.node,ft.offset),kt.removeAllRanges(),kt.addRange(Ft)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,et){for(let ot=0,ut=0;ut<this.children.length;ut++){let ct=this.children[ut],dt=ot+ct.size;if(ot==dt?g<=dt&&et>=ot:g<dt&&et>ot){let ft=ot+ct.border,St=dt-ct.border;if(g>=ft&&et<=St){this.dirty=g==ot||et==dt?CONTENT_DIRTY:CHILD_DIRTY,g==ft&&et==St&&(ct.contentLost||ct.dom.parentNode!=this.contentDOM)?ct.dirty=NODE_DIRTY:ct.markDirty(g-ft,et-ft);return}else ct.dirty=ct.dom==ct.contentDOM&&ct.dom.parentNode==this.contentDOM&&!ct.children.length?CONTENT_DIRTY:NODE_DIRTY}ot=dt}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let et=this.parent;et;et=et.parent,g++){let ot=g==1?CONTENT_DIRTY:CHILD_DIRTY;et.dirty<ot&&(et.dirty=ot)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,et,ot,ut){let ct,dt=et.type.toDOM;if(typeof dt=="function"&&(dt=dt(ot,()=>{if(!ct)return ut;if(ct.parent)return ct.parent.posBeforeChild(ct)})),!et.type.spec.raw){if(dt.nodeType!=1){let ft=document.createElement("span");ft.appendChild(dt),dt=ft}dt.contentEditable="false",dt.classList.add("ProseMirror-widget")}super(g,[],dt,null),this.widget=et,this.widget=et,ct=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let et=this.widget.spec.stopEvent;return et?et(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,et,ot,ut){super(g,[],et,null),this.textDOM=ot,this.text=ut}get size(){return this.text.length}localPosFromDOM(g,et){return g!=this.textDOM?this.posAtStart+(et?this.size:0):this.posAtStart+et}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,et,ot,ut,ct){super(g,[],ot,ut),this.mark=et,this.spec=ct}static create(g,et,ot,ut){let ct=ut.nodeViews[et.type.name],dt=ct&&ct(et,ut,ot);return(!dt||!dt.dom)&&(dt=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et,ot),null,et.attrs)),new MarkViewDesc(g,et,dt.dom,dt.contentDOM||dt.dom,dt)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,et){if(super.markDirty(g,et),this.dirty!=NOT_DIRTY){let ot=this.parent;for(;!ot.node;)ot=ot.parent;ot.dirty<this.dirty&&(ot.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,et,ot){let ut=MarkViewDesc.create(this.parent,this.mark,!0,ot),ct=this.children,dt=this.size;et<dt&&(ct=replaceNodes(ct,et,dt,ot)),g>0&&(ct=replaceNodes(ct,0,g,ot));for(let ft=0;ft<ct.length;ft++)ct[ft].parent=ut;return ut.children=ct,ut}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(g,et,ot,ut,ct,dt,ft,St,kt){super(g,[],ct,dt),this.node=et,this.outerDeco=ot,this.innerDeco=ut,this.nodeDOM=ft}static create(g,et,ot,ut,ct,dt){let ft=ct.nodeViews[et.type.name],St,kt=ft&&ft(et,ct,()=>{if(!St)return dt;if(St.parent)return St.parent.posBeforeChild(St)},ot,ut),Tt=kt&&kt.dom,Rt=kt&&kt.contentDOM;if(et.isText){if(!Tt)Tt=document.createTextNode(et.text);else if(Tt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Tt||({dom:Tt,contentDOM:Rt}=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et),null,et.attrs));!Rt&&!et.isText&&Tt.nodeName!="BR"&&(Tt.hasAttribute("contenteditable")||(Tt.contentEditable="false"),et.type.spec.draggable&&(Tt.draggable=!0));let jt=Tt;return Tt=applyOuterDeco(Tt,ot,et),kt?St=new CustomNodeViewDesc(g,et,ot,ut,Tt,Rt||null,jt,kt,ct,dt+1):et.isText?new TextViewDesc(g,et,ot,ut,Tt,jt,ct):new NodeViewDesc(g,et,ot,ut,Tt,Rt||null,jt,ct,dt+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let et=this.children.length-1;et>=0;et--){let ot=this.children[et];if(this.dom.contains(ot.dom.parentNode)){g.contentElement=ot.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,et,ot){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(et,this.outerDeco)&&ot.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,et){let ot=this.node.inlineContent,ut=et,ct=g.composing?this.localCompositionInfo(g,et):null,dt=ct&&ct.pos>-1?ct:null,ft=ct&&ct.pos<0,St=new ViewTreeUpdater(this,dt&&dt.node,g);iterDeco(this.node,this.innerDeco,(kt,Tt,Rt)=>{kt.spec.marks?St.syncToMarks(kt.spec.marks,ot,g):kt.type.side>=0&&!Rt&&St.syncToMarks(Tt==this.node.childCount?Mark$1.none:this.node.child(Tt).marks,ot,g),St.placeWidget(kt,g,ut)},(kt,Tt,Rt,jt)=>{St.syncToMarks(kt.marks,ot,g);let Ft;St.findNodeMatch(kt,Tt,Rt,jt)||ft&&g.state.selection.from>ut&&g.state.selection.to<ut+kt.nodeSize&&(Ft=St.findIndexWithChild(ct.node))>-1&&St.updateNodeAt(kt,Tt,Rt,Ft,g)||St.updateNextNode(kt,Tt,Rt,g,jt,ut)||St.addNode(kt,Tt,Rt,g,ut),ut+=kt.nodeSize}),St.syncToMarks([],ot,g),this.node.isTextblock&&St.addTextblockHacks(),St.destroyRest(),(St.changed||this.dirty==CONTENT_DIRTY)&&(dt&&this.protectLocalComposition(g,dt),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,et){let{from:ot,to:ut}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||ot<et||ut>et+this.node.content.size)return null;let ct=g.input.compositionNode;if(!ct||!this.dom.contains(ct.parentNode))return null;if(this.node.inlineContent){let dt=ct.nodeValue,ft=findTextInFragment(this.node.content,dt,ot-et,ut-et);return ft<0?null:{node:ct,pos:ft,text:dt}}else return{node:ct,pos:-1,text:""}}protectLocalComposition(g,{node:et,pos:ot,text:ut}){if(this.getDesc(et))return;let ct=et;for(;ct.parentNode!=this.contentDOM;ct=ct.parentNode){for(;ct.previousSibling;)ct.parentNode.removeChild(ct.previousSibling);for(;ct.nextSibling;)ct.parentNode.removeChild(ct.nextSibling);ct.pmViewDesc&&(ct.pmViewDesc=void 0)}let dt=new CompositionViewDesc(this,ct,et,ut);g.input.compositionNodes.push(dt),this.children=replaceNodes(this.children,ot,ot+ut.length,g,dt)}update(g,et,ot,ut){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,et,ot,ut),!0)}updateInner(g,et,ot,ut){this.updateOuterDeco(et),this.node=g,this.innerDeco=ot,this.contentDOM&&this.updateChildren(ut,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let et=this.nodeDOM.nodeType!=1,ot=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,et),computeOuterDeco(g,this.node,et)),this.dom!=ot&&(ot.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(it,g,et,ot,ut){applyOuterDeco(ot,g,it);let ct=new NodeViewDesc(void 0,it,g,et,ot,ot,ot,ut,0);return ct.contentDOM&&ct.updateChildren(ut,0),ct}class TextViewDesc extends NodeViewDesc{constructor(g,et,ot,ut,ct,dt,ft){super(g,et,ot,ut,ct,null,dt,ft,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,et,ot,ut){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(et),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,ut.trackWrites==this.nodeDOM&&(ut.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let et=this.nodeDOM;et;et=et.parentNode)if(et==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,et,ot){return g==this.nodeDOM?this.posAtStart+Math.min(et,this.node.text.length):super.localPosFromDOM(g,et,ot)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,et,ot){let ut=this.node.cut(g,et),ct=document.createTextNode(ut.text);return new TextViewDesc(this.parent,ut,this.outerDeco,this.innerDeco,ct,ct,ot)}markDirty(g,et){super.markDirty(g,et),this.dom!=this.nodeDOM&&(g==0||et==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,et,ot,ut,ct,dt,ft,St,kt,Tt){super(g,et,ot,ut,ct,dt,ft,kt,Tt),this.spec=St}update(g,et,ot,ut){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==g.type||this.spec.multiType)){let ct=this.spec.update(g,et,ot);return ct&&this.updateInner(g,et,ot,ut),ct}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,et,ot,ut)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,et,ot,ut){this.spec.setSelection?this.spec.setSelection(g,et,ot.root):super.setSelection(g,et,ot,ut)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(it,g,et){let ot=it.firstChild,ut=!1;for(let ct=0;ct<g.length;ct++){let dt=g[ct],ft=dt.dom;if(ft.parentNode==it){for(;ft!=ot;)ot=rm(ot),ut=!0;ot=ot.nextSibling}else ut=!0,it.insertBefore(ft,ot);if(dt instanceof MarkViewDesc){let St=ot?ot.previousSibling:it.lastChild;renderDescs(dt.contentDOM,dt.children,et),ot=St?St.nextSibling:it.firstChild}}for(;ot;)ot=rm(ot),ut=!0;ut&&et.trackWrites==it&&(et.trackWrites=null)}const OuterDecoLevel=function(it){it&&(this.nodeName=it)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(it,g,et){if(it.length==0)return noDeco;let ot=et?noDeco[0]:new OuterDecoLevel,ut=[ot];for(let ct=0;ct<it.length;ct++){let dt=it[ct].type.attrs;if(dt){dt.nodeName&&ut.push(ot=new OuterDecoLevel(dt.nodeName));for(let ft in dt){let St=dt[ft];St!=null&&(et&&ut.length==1&&ut.push(ot=new OuterDecoLevel(g.isInline?"span":"div")),ft=="class"?ot.class=(ot.class?ot.class+" ":"")+St:ft=="style"?ot.style=(ot.style?ot.style+";":"")+St:ft!="nodeName"&&(ot[ft]=St))}}}return ut}function patchOuterDeco(it,g,et,ot){if(et==noDeco&&ot==noDeco)return g;let ut=g;for(let ct=0;ct<ot.length;ct++){let dt=ot[ct],ft=et[ct];if(ct){let St;ft&&ft.nodeName==dt.nodeName&&ut!=it&&(St=ut.parentNode)&&St.nodeName.toLowerCase()==dt.nodeName||(St=document.createElement(dt.nodeName),St.pmIsDeco=!0,St.appendChild(ut),ft=noDeco[0]),ut=St}patchAttributes(ut,ft||noDeco[0],dt)}return ut}function patchAttributes(it,g,et){for(let ot in g)ot!="class"&&ot!="style"&&ot!="nodeName"&&!(ot in et)&&it.removeAttribute(ot);for(let ot in et)ot!="class"&&ot!="style"&&ot!="nodeName"&&et[ot]!=g[ot]&&it.setAttribute(ot,et[ot]);if(g.class!=et.class){let ot=g.class?g.class.split(" ").filter(Boolean):[],ut=et.class?et.class.split(" ").filter(Boolean):[];for(let ct=0;ct<ot.length;ct++)ut.indexOf(ot[ct])==-1&&it.classList.remove(ot[ct]);for(let ct=0;ct<ut.length;ct++)ot.indexOf(ut[ct])==-1&&it.classList.add(ut[ct]);it.classList.length==0&&it.removeAttribute("class")}if(g.style!=et.style){if(g.style){let ot=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ut;for(;ut=ot.exec(g.style);)it.style.removeProperty(ut[1])}et.style&&(it.style.cssText+=et.style)}}function applyOuterDeco(it,g,et){return patchOuterDeco(it,it,noDeco,computeOuterDeco(g,et,it.nodeType!=1))}function sameOuterDeco(it,g){if(it.length!=g.length)return!1;for(let et=0;et<it.length;et++)if(!it[et].type.eq(g[et].type))return!1;return!0}function rm(it){let g=it.nextSibling;return it.parentNode.removeChild(it),g}class ViewTreeUpdater{constructor(g,et,ot){this.lock=et,this.view=ot,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,et){if(g!=et){for(let ot=g;ot<et;ot++)this.top.children[ot].destroy();this.top.children.splice(g,et-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,et,ot){let ut=0,ct=this.stack.length>>1,dt=Math.min(ct,g.length);for(;ut<dt&&(ut==ct-1?this.top:this.stack[ut+1<<1]).matchesMark(g[ut])&&g[ut].type.spec.spanning!==!1;)ut++;for(;ut<ct;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),ct--;for(;ct<g.length;){this.stack.push(this.top,this.index+1);let ft=-1;for(let St=this.index;St<Math.min(this.index+3,this.top.children.length);St++){let kt=this.top.children[St];if(kt.matchesMark(g[ct])&&!this.isLocked(kt.dom)){ft=St;break}}if(ft>-1)ft>this.index&&(this.changed=!0,this.destroyBetween(this.index,ft)),this.top=this.top.children[this.index];else{let St=MarkViewDesc.create(this.top,g[ct],et,ot);this.top.children.splice(this.index,0,St),this.top=St,this.changed=!0}this.index=0,ct++}}findNodeMatch(g,et,ot,ut){let ct=-1,dt;if(ut>=this.preMatch.index&&(dt=this.preMatch.matches[ut-this.preMatch.index]).parent==this.top&&dt.matchesNode(g,et,ot))ct=this.top.children.indexOf(dt,this.index);else for(let ft=this.index,St=Math.min(this.top.children.length,ft+5);ft<St;ft++){let kt=this.top.children[ft];if(kt.matchesNode(g,et,ot)&&!this.preMatch.matched.has(kt)){ct=ft;break}}return ct<0?!1:(this.destroyBetween(this.index,ct),this.index++,!0)}updateNodeAt(g,et,ot,ut,ct){let dt=this.top.children[ut];return dt.dirty==NODE_DIRTY&&dt.dom==dt.contentDOM&&(dt.dirty=CONTENT_DIRTY),dt.update(g,et,ot,ct)?(this.destroyBetween(this.index,ut),this.index++,!0):!1}findIndexWithChild(g){for(;;){let et=g.parentNode;if(!et)return-1;if(et==this.top.contentDOM){let ot=g.pmViewDesc;if(ot){for(let ut=this.index;ut<this.top.children.length;ut++)if(this.top.children[ut]==ot)return ut}return-1}g=et}}updateNextNode(g,et,ot,ut,ct,dt){for(let ft=this.index;ft<this.top.children.length;ft++){let St=this.top.children[ft];if(St instanceof NodeViewDesc){let kt=this.preMatch.matched.get(St);if(kt!=null&&kt!=ct)return!1;let Tt=St.dom,Rt,jt=this.isLocked(Tt)&&!(g.isText&&St.node&&St.node.isText&&St.nodeDOM.nodeValue==g.text&&St.dirty!=NODE_DIRTY&&sameOuterDeco(et,St.outerDeco));if(!jt&&St.update(g,et,ot,ut))return this.destroyBetween(this.index,ft),St.dom!=Tt&&(this.changed=!0),this.index++,!0;if(!jt&&(Rt=this.recreateWrapper(St,g,et,ot,ut,dt)))return this.destroyBetween(this.index,ft),this.top.children[this.index]=Rt,Rt.contentDOM&&(Rt.dirty=CONTENT_DIRTY,Rt.updateChildren(ut,dt+1),Rt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,et,ot,ut,ct,dt){if(g.dirty||et.isAtom||!g.children.length||!g.node.content.eq(et.content)||!sameOuterDeco(ot,g.outerDeco)||!ut.eq(g.innerDeco))return null;let ft=NodeViewDesc.create(this.top,et,ot,ut,ct,dt);if(ft.contentDOM){ft.children=g.children,g.children=[];for(let St of ft.children)St.parent=ft}return g.destroy(),ft}addNode(g,et,ot,ut,ct){let dt=NodeViewDesc.create(this.top,g,et,ot,ut,ct);dt.contentDOM&&dt.updateChildren(ut,ct+1),this.top.children.splice(this.index++,0,dt),this.changed=!0}placeWidget(g,et,ot){let ut=this.index<this.top.children.length?this.top.children[this.index]:null;if(ut&&ut.matchesWidget(g)&&(g==ut.widget||!ut.widget.type.toDOM.parentNode))this.index++;else{let ct=new WidgetViewDesc(this.top,g,et,ot);this.top.children.splice(this.index++,0,ct),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],et=this.top;for(;g instanceof MarkViewDesc;)et=g,g=et.children[et.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",et),this.addHackNode("BR",this.top))}addHackNode(g,et){if(et==this.top&&this.index<et.children.length&&et.children[this.index].matchesHack(g))this.index++;else{let ot=document.createElement(g);g=="IMG"&&(ot.className="ProseMirror-separator",ot.alt=""),g=="BR"&&(ot.className="ProseMirror-trailingBreak");let ut=new TrailingHackViewDesc(this.top,[],ot,null);et!=this.top?et.children.push(ut):et.children.splice(this.index++,0,ut),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(it,g){let et=g,ot=et.children.length,ut=it.childCount,ct=new Map,dt=[];e:for(;ut>0;){let ft;for(;;)if(ot){let kt=et.children[ot-1];if(kt instanceof MarkViewDesc)et=kt,ot=kt.children.length;else{ft=kt,ot--;break}}else{if(et==g)break e;ot=et.parent.children.indexOf(et),et=et.parent}let St=ft.node;if(St){if(St!=it.child(ut-1))break;--ut,ct.set(ft,ut),dt.push(ft)}}return{index:ut,matched:ct,matches:dt.reverse()}}function compareSide(it,g){return it.type.side-g.type.side}function iterDeco(it,g,et,ot){let ut=g.locals(it),ct=0;if(ut.length==0){for(let kt=0;kt<it.childCount;kt++){let Tt=it.child(kt);ot(Tt,ut,g.forChild(ct,Tt),kt),ct+=Tt.nodeSize}return}let dt=0,ft=[],St=null;for(let kt=0;;){let Tt,Rt;for(;dt<ut.length&&ut[dt].to==ct;){let Yt=ut[dt++];Yt.widget&&(Tt?(Rt||(Rt=[Tt])).push(Yt):Tt=Yt)}if(Tt)if(Rt){Rt.sort(compareSide);for(let Yt=0;Yt<Rt.length;Yt++)et(Rt[Yt],kt,!!St)}else et(Tt,kt,!!St);let jt,Ft;if(St)Ft=-1,jt=St,St=null;else if(kt<it.childCount)Ft=kt,jt=it.child(kt++);else break;for(let Yt=0;Yt<ft.length;Yt++)ft[Yt].to<=ct&&ft.splice(Yt--,1);for(;dt<ut.length&&ut[dt].from<=ct&&ut[dt].to>ct;)ft.push(ut[dt++]);let Bt=ct+jt.nodeSize;if(jt.isText){let Yt=Bt;dt<ut.length&&ut[dt].from<Yt&&(Yt=ut[dt].from);for(let zt=0;zt<ft.length;zt++)ft[zt].to<Yt&&(Yt=ft[zt].to);Yt<Bt&&(St=jt.cut(Yt-ct),jt=jt.cut(0,Yt-ct),Bt=Yt,Ft=-1)}else for(;dt<ut.length&&ut[dt].to<Bt;)dt++;let Ht=jt.isInline&&!jt.isLeaf?ft.filter(Yt=>!Yt.inline):ft.slice();ot(jt,Ht,g.forChild(ct,jt),Ft),ct=Bt}}function iosHacks(it){if(it.nodeName=="UL"||it.nodeName=="OL"){let g=it.style.cssText;it.style.cssText=g+"; list-style: square !important",window.getComputedStyle(it).listStyle,it.style.cssText=g}}function findTextInFragment(it,g,et,ot){for(let ut=0,ct=0;ut<it.childCount&&ct<=ot;){let dt=it.child(ut++),ft=ct;if(ct+=dt.nodeSize,!dt.isText)continue;let St=dt.text;for(;ut<it.childCount;){let kt=it.child(ut++);if(ct+=kt.nodeSize,!kt.isText)break;St+=kt.text}if(ct>=et){if(ct>=ot&&St.slice(ot-g.length-ft,ot-ft)==g)return ot-g.length;let kt=ft<ot?St.lastIndexOf(g,ot-ft-1):-1;if(kt>=0&&kt+g.length+ft>=et)return ft+kt;if(et==ot&&St.length>=ot+g.length-ft&&St.slice(ot-ft,ot-ft+g.length)==g)return ot}}return-1}function replaceNodes(it,g,et,ot,ut){let ct=[];for(let dt=0,ft=0;dt<it.length;dt++){let St=it[dt],kt=ft,Tt=ft+=St.size;kt>=et||Tt<=g?ct.push(St):(kt<g&&ct.push(St.slice(0,g-kt,ot)),ut&&(ct.push(ut),ut=void 0),Tt>et&&ct.push(St.slice(et-kt,St.size,ot)))}return ct}function selectionFromDOM(it,g=null){let et=it.domSelectionRange(),ot=it.state.doc;if(!et.focusNode)return null;let ut=it.docView.nearestDesc(et.focusNode),ct=ut&&ut.size==0,dt=it.docView.posFromDOM(et.focusNode,et.focusOffset,1);if(dt<0)return null;let ft=ot.resolve(dt),St,kt;if(selectionCollapsed(et)){for(St=dt;ut&&!ut.node;)ut=ut.parent;let Rt=ut.node;if(ut&&Rt.isAtom&&NodeSelection.isSelectable(Rt)&&ut.parent&&!(Rt.isInline&&isOnEdge(et.focusNode,et.focusOffset,ut.dom))){let jt=ut.posBefore;kt=new NodeSelection(dt==jt?ft:ot.resolve(jt))}}else{if(et instanceof it.dom.ownerDocument.defaultView.Selection&&et.rangeCount>1){let Rt=dt,jt=dt;for(let Ft=0;Ft<et.rangeCount;Ft++){let Bt=et.getRangeAt(Ft);Rt=Math.min(Rt,it.docView.posFromDOM(Bt.startContainer,Bt.startOffset,1)),jt=Math.max(jt,it.docView.posFromDOM(Bt.endContainer,Bt.endOffset,-1))}if(Rt<0)return null;[St,dt]=jt==it.state.selection.anchor?[jt,Rt]:[Rt,jt],ft=ot.resolve(dt)}else St=it.docView.posFromDOM(et.anchorNode,et.anchorOffset,1);if(St<0)return null}let Tt=ot.resolve(St);if(!kt){let Rt=g=="pointer"||it.state.selection.head<ft.pos&&!ct?1:-1;kt=selectionBetween(it,Tt,ft,Rt)}return kt}function editorOwnsSelection(it){return it.editable?it.hasFocus():hasSelection(it)&&document.activeElement&&document.activeElement.contains(it.dom)}function selectionToDOM(it,g=!1){let et=it.state.selection;if(syncNodeSelection(it,et),!!editorOwnsSelection(it)){if(!g&&it.input.mouseDown&&it.input.mouseDown.allowDefault&&chrome){let ot=it.domSelectionRange(),ut=it.domObserver.currentSelection;if(ot.anchorNode&&ut.anchorNode&&isEquivalentPosition(ot.anchorNode,ot.anchorOffset,ut.anchorNode,ut.anchorOffset)){it.input.mouseDown.delayedSelectionSync=!0,it.domObserver.setCurSelection();return}}if(it.domObserver.disconnectSelection(),it.cursorWrapper)selectCursorWrapper(it);else{let{anchor:ot,head:ut}=et,ct,dt;brokenSelectBetweenUneditable&&!(et instanceof TextSelection)&&(et.$from.parent.inlineContent||(ct=temporarilyEditableNear(it,et.from)),!et.empty&&!et.$from.parent.inlineContent&&(dt=temporarilyEditableNear(it,et.to))),it.docView.setSelection(ot,ut,it,g),brokenSelectBetweenUneditable&&(ct&&resetEditable(ct),dt&&resetEditable(dt)),et.visible?it.dom.classList.remove("ProseMirror-hideselection"):(it.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(it))}it.domObserver.setCurSelection(),it.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(it,g){let{node:et,offset:ot}=it.docView.domFromPos(g,0),ut=ot<et.childNodes.length?et.childNodes[ot]:null,ct=ot?et.childNodes[ot-1]:null;if(safari&&ut&&ut.contentEditable=="false")return setEditable(ut);if((!ut||ut.contentEditable=="false")&&(!ct||ct.contentEditable=="false")){if(ut)return setEditable(ut);if(ct)return setEditable(ct)}}function setEditable(it){return it.contentEditable="true",safari&&it.draggable&&(it.draggable=!1,it.wasDraggable=!0),it}function resetEditable(it){it.contentEditable="false",it.wasDraggable&&(it.draggable=!0,it.wasDraggable=null)}function removeClassOnSelectionChange(it){let g=it.dom.ownerDocument;g.removeEventListener("selectionchange",it.input.hideSelectionGuard);let et=it.domSelectionRange(),ot=et.anchorNode,ut=et.anchorOffset;g.addEventListener("selectionchange",it.input.hideSelectionGuard=()=>{(et.anchorNode!=ot||et.anchorOffset!=ut)&&(g.removeEventListener("selectionchange",it.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(it)||it.state.selection.visible)&&it.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(it){let g=it.domSelection();if(!g)return;let et=it.cursorWrapper.dom,ot=et.nodeName=="IMG";ot?g.collapse(et.parentNode,domIndex(et)+1):g.collapse(et,0),!ot&&!it.state.selection.visible&&ie$1&&ie_version<=11&&(et.disabled=!0,et.disabled=!1)}function syncNodeSelection(it,g){if(g instanceof NodeSelection){let et=it.docView.descAt(g.from);et!=it.lastSelectedViewDesc&&(clearNodeSelection(it),et&&et.selectNode(),it.lastSelectedViewDesc=et)}else clearNodeSelection(it)}function clearNodeSelection(it){it.lastSelectedViewDesc&&(it.lastSelectedViewDesc.parent&&it.lastSelectedViewDesc.deselectNode(),it.lastSelectedViewDesc=void 0)}function selectionBetween(it,g,et,ot){return it.someProp("createSelectionBetween",ut=>ut(it,g,et))||TextSelection.between(g,et,ot)}function hasFocusAndSelection(it){return it.editable&&!it.hasFocus()?!1:hasSelection(it)}function hasSelection(it){let g=it.domSelectionRange();if(!g.anchorNode)return!1;try{return it.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(it.editable||it.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(it){let g=it.docView.domFromPos(it.state.selection.anchor,0),et=it.domSelectionRange();return isEquivalentPosition(g.node,g.offset,et.anchorNode,et.anchorOffset)}function moveSelectionBlock(it,g){let{$anchor:et,$head:ot}=it.selection,ut=g>0?et.max(ot):et.min(ot),ct=ut.parent.inlineContent?ut.depth?it.doc.resolve(g>0?ut.after():ut.before()):null:ut;return ct&&Selection.findFrom(ct,g)}function apply(it,g){return it.dispatch(it.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection)if(et.indexOf("s")>-1){let{$head:ut}=ot,ct=ut.textOffset?null:g<0?ut.nodeBefore:ut.nodeAfter;if(!ct||ct.isText||!ct.isLeaf)return!1;let dt=it.state.doc.resolve(ut.pos+ct.nodeSize*(g<0?-1:1));return apply(it,new TextSelection(ot.$anchor,dt))}else if(ot.empty){if(it.endOfTextblock(g>0?"forward":"backward")){let ut=moveSelectionBlock(it.state,g);return ut&&ut instanceof NodeSelection?apply(it,ut):!1}else if(!(mac$2&&et.indexOf("m")>-1)){let ut=ot.$head,ct=ut.textOffset?null:g<0?ut.nodeBefore:ut.nodeAfter,dt;if(!ct||ct.isText)return!1;let ft=g<0?ut.pos-ct.nodeSize:ut.pos;return ct.isAtom||(dt=it.docView.descAt(ft))&&!dt.contentDOM?NodeSelection.isSelectable(ct)?apply(it,new NodeSelection(g<0?it.state.doc.resolve(ut.pos-ct.nodeSize):ut)):webkit?apply(it,new TextSelection(it.state.doc.resolve(g<0?ft:ft+ct.nodeSize))):!1:!1}}else return!1;else{if(ot instanceof NodeSelection&&ot.node.isInline)return apply(it,new TextSelection(g>0?ot.$to:ot.$from));{let ut=moveSelectionBlock(it.state,g);return ut?apply(it,ut):!1}}}function nodeLen(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function isIgnorable(it,g){let et=it.pmViewDesc;return et&&et.size==0&&(g<0||it.nextSibling||it.nodeName!="BR")}function skipIgnoredNodes(it,g){return g<0?skipIgnoredNodesBefore(it):skipIgnoredNodesAfter(it)}function skipIgnoredNodesBefore(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ut,ct,dt=!1;for(gecko&&et.nodeType==1&&ot<nodeLen(et)&&isIgnorable(et.childNodes[ot],-1)&&(dt=!0);;)if(ot>0){if(et.nodeType!=1)break;{let ft=et.childNodes[ot-1];if(isIgnorable(ft,-1))ut=et,ct=--ot;else if(ft.nodeType==3)et=ft,ot=et.nodeValue.length;else break}}else{if(isBlockNode(et))break;{let ft=et.previousSibling;for(;ft&&isIgnorable(ft,-1);)ut=et.parentNode,ct=domIndex(ft),ft=ft.previousSibling;if(ft)et=ft,ot=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=0}}}dt?setSelFocus(it,et,ot):ut&&setSelFocus(it,ut,ct)}function skipIgnoredNodesAfter(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ut=nodeLen(et),ct,dt;for(;;)if(ot<ut){if(et.nodeType!=1)break;let ft=et.childNodes[ot];if(isIgnorable(ft,1))ct=et,dt=++ot;else break}else{if(isBlockNode(et))break;{let ft=et.nextSibling;for(;ft&&isIgnorable(ft,1);)ct=ft.parentNode,dt=domIndex(ft)+1,ft=ft.nextSibling;if(ft)et=ft,ot=0,ut=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=ut=0}}}ct&&setSelFocus(it,ct,dt)}function isBlockNode(it){let g=it.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(it,g){for(;it&&g==it.childNodes.length&&!hasBlockDesc(it);)g=domIndex(it)+1,it=it.parentNode;for(;it&&g<it.childNodes.length;){let et=it.childNodes[g];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=0}}function textNodeBefore(it,g){for(;it&&!g&&!hasBlockDesc(it);)g=domIndex(it),it=it.parentNode;for(;it&&g;){let et=it.childNodes[g-1];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=it.childNodes.length}}function setSelFocus(it,g,et){if(g.nodeType!=3){let ct,dt;(dt=textNodeAfter(g,et))?(g=dt,et=0):(ct=textNodeBefore(g,et))&&(g=ct,et=ct.nodeValue.length)}let ot=it.domSelection();if(!ot)return;if(selectionCollapsed(ot)){let ct=document.createRange();ct.setEnd(g,et),ct.setStart(g,et),ot.removeAllRanges(),ot.addRange(ct)}else ot.extend&&ot.extend(g,et);it.domObserver.setCurSelection();let{state:ut}=it;setTimeout(()=>{it.state==ut&&selectionToDOM(it)},50)}function findDirection(it,g){let et=it.state.doc.resolve(g);if(!(chrome||windows$1)&&et.parent.inlineContent){let ut=it.coordsAtPos(g);if(g>et.start()){let ct=it.coordsAtPos(g-1),dt=(ct.top+ct.bottom)/2;if(dt>ut.top&&dt<ut.bottom&&Math.abs(ct.left-ut.left)>1)return ct.left<ut.left?"ltr":"rtl"}if(g<et.end()){let ct=it.coordsAtPos(g+1),dt=(ct.top+ct.bottom)/2;if(dt>ut.top&&dt<ut.bottom&&Math.abs(ct.left-ut.left)>1)return ct.left>ut.left?"ltr":"rtl"}}return getComputedStyle(it.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection&&!ot.empty||et.indexOf("s")>-1||mac$2&&et.indexOf("m")>-1)return!1;let{$from:ut,$to:ct}=ot;if(!ut.parent.inlineContent||it.endOfTextblock(g<0?"up":"down")){let dt=moveSelectionBlock(it.state,g);if(dt&&dt instanceof NodeSelection)return apply(it,dt)}if(!ut.parent.inlineContent){let dt=g<0?ut:ct,ft=ot instanceof AllSelection?Selection.near(dt,g):Selection.findFrom(dt,g);return ft?apply(it,ft):!1}return!1}function stopNativeHorizontalDelete(it,g){if(!(it.state.selection instanceof TextSelection))return!0;let{$head:et,$anchor:ot,empty:ut}=it.state.selection;if(!et.sameParent(ot))return!0;if(!ut)return!1;if(it.endOfTextblock(g>0?"forward":"backward"))return!0;let ct=!et.textOffset&&(g<0?et.nodeBefore:et.nodeAfter);if(ct&&!ct.isText){let dt=it.state.tr;return g<0?dt.delete(et.pos-ct.nodeSize,et.pos):dt.delete(et.pos,et.pos+ct.nodeSize),it.dispatch(dt),!0}return!1}function switchEditable(it,g,et){it.domObserver.stop(),g.contentEditable=et,it.domObserver.start()}function safariDownArrowBug(it){if(!safari||it.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:et}=it.domSelectionRange();if(g&&g.nodeType==1&&et==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let ot=g.firstChild;switchEditable(it,ot,"true"),setTimeout(()=>switchEditable(it,ot,"false"),20)}return!1}function getMods(it){let g="";return it.ctrlKey&&(g+="c"),it.metaKey&&(g+="m"),it.altKey&&(g+="a"),it.shiftKey&&(g+="s"),g}function captureKeyDown(it,g){let et=g.keyCode,ot=getMods(g);if(et==8||mac$2&&et==72&&ot=="c")return stopNativeHorizontalDelete(it,-1)||skipIgnoredNodes(it,-1);if(et==46&&!g.shiftKey||mac$2&&et==68&&ot=="c")return stopNativeHorizontalDelete(it,1)||skipIgnoredNodes(it,1);if(et==13||et==27)return!0;if(et==37||mac$2&&et==66&&ot=="c"){let ut=et==37?findDirection(it,it.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(it,ut,ot)||skipIgnoredNodes(it,ut)}else if(et==39||mac$2&&et==70&&ot=="c"){let ut=et==39?findDirection(it,it.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(it,ut,ot)||skipIgnoredNodes(it,ut)}else{if(et==38||mac$2&&et==80&&ot=="c")return selectVertically(it,-1,ot)||skipIgnoredNodes(it,-1);if(et==40||mac$2&&et==78&&ot=="c")return safariDownArrowBug(it)||selectVertically(it,1,ot)||skipIgnoredNodes(it,1);if(ot==(mac$2?"m":"c")&&(et==66||et==73||et==89||et==90))return!0}return!1}function serializeForClipboard(it,g){it.someProp("transformCopied",Ft=>{g=Ft(g,it)});let et=[],{content:ot,openStart:ut,openEnd:ct}=g;for(;ut>1&&ct>1&&ot.childCount==1&&ot.firstChild.childCount==1;){ut--,ct--;let Ft=ot.firstChild;et.push(Ft.type.name,Ft.attrs!=Ft.type.defaultAttrs?Ft.attrs:null),ot=Ft.content}let dt=it.someProp("clipboardSerializer")||DOMSerializer.fromSchema(it.state.schema),ft=detachedDoc(),St=ft.createElement("div");St.appendChild(dt.serializeFragment(ot,{document:ft}));let kt=St.firstChild,Tt,Rt=0;for(;kt&&kt.nodeType==1&&(Tt=wrapMap[kt.nodeName.toLowerCase()]);){for(let Ft=Tt.length-1;Ft>=0;Ft--){let Bt=ft.createElement(Tt[Ft]);for(;St.firstChild;)Bt.appendChild(St.firstChild);St.appendChild(Bt),Rt++}kt=St.firstChild}kt&&kt.nodeType==1&&kt.setAttribute("data-pm-slice",`${ut} ${ct}${Rt?` -${Rt}`:""} ${JSON.stringify(et)}`);let jt=it.someProp("clipboardTextSerializer",Ft=>Ft(g,it))||g.content.textBetween(0,g.content.size,`

`);return{dom:St,text:jt,slice:g}}function parseFromClipboard(it,g,et,ot,ut){let ct=ut.parent.type.spec.code,dt,ft;if(!et&&!g)return null;let St=!!g&&(ot||ct||!et);if(St){if(it.someProp("transformPastedText",jt=>{g=jt(g,ct||ot,it)}),ct)return ft=new Slice(Fragment.from(it.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0),it.someProp("transformPasted",jt=>{ft=jt(ft,it,!0)}),ft;let Rt=it.someProp("clipboardTextParser",jt=>jt(g,ut,ot,it));if(Rt)ft=Rt;else{let jt=ut.marks(),{schema:Ft}=it.state,Bt=DOMSerializer.fromSchema(Ft);dt=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(Ht=>{let Yt=dt.appendChild(document.createElement("p"));Ht&&Yt.appendChild(Bt.serializeNode(Ft.text(Ht,jt)))})}}else it.someProp("transformPastedHTML",Rt=>{et=Rt(et,it)}),dt=readHTML(et),webkit&&restoreReplacedSpaces(dt);let kt=dt&&dt.querySelector("[data-pm-slice]"),Tt=kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(kt.getAttribute("data-pm-slice")||"");if(Tt&&Tt[3])for(let Rt=+Tt[3];Rt>0;Rt--){let jt=dt.firstChild;for(;jt&&jt.nodeType!=1;)jt=jt.nextSibling;if(!jt)break;dt=jt}if(ft||(ft=(it.someProp("clipboardParser")||it.someProp("domParser")||DOMParser.fromSchema(it.state.schema)).parseSlice(dt,{preserveWhitespace:!!(St||Tt),context:ut,ruleFromNode(jt){return jt.nodeName=="BR"&&!jt.nextSibling&&jt.parentNode&&!inlineParents.test(jt.parentNode.nodeName)?{ignore:!0}:null}})),Tt)ft=addContext(closeSlice(ft,+Tt[1],+Tt[2]),Tt[4]);else if(ft=Slice.maxOpen(normalizeSiblings(ft.content,ut),!0),ft.openStart||ft.openEnd){let Rt=0,jt=0;for(let Ft=ft.content.firstChild;Rt<ft.openStart&&!Ft.type.spec.isolating;Rt++,Ft=Ft.firstChild);for(let Ft=ft.content.lastChild;jt<ft.openEnd&&!Ft.type.spec.isolating;jt++,Ft=Ft.lastChild);ft=closeSlice(ft,Rt,jt)}return it.someProp("transformPasted",Rt=>{ft=Rt(ft,it,St)}),ft}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(it,g){if(it.childCount<2)return it;for(let et=g.depth;et>=0;et--){let ut=g.node(et).contentMatchAt(g.index(et)),ct,dt=[];if(it.forEach(ft=>{if(!dt)return;let St=ut.findWrapping(ft.type),kt;if(!St)return dt=null;if(kt=dt.length&&ct.length&&addToSibling(St,ct,ft,dt[dt.length-1],0))dt[dt.length-1]=kt;else{dt.length&&(dt[dt.length-1]=closeRight(dt[dt.length-1],ct.length));let Tt=withWrappers(ft,St);dt.push(Tt),ut=ut.matchType(Tt.type),ct=St}}),dt)return Fragment.from(dt)}return it}function withWrappers(it,g,et=0){for(let ot=g.length-1;ot>=et;ot--)it=g[ot].create(null,Fragment.from(it));return it}function addToSibling(it,g,et,ot,ut){if(ut<it.length&&ut<g.length&&it[ut]==g[ut]){let ct=addToSibling(it,g,et,ot.lastChild,ut+1);if(ct)return ot.copy(ot.content.replaceChild(ot.childCount-1,ct));if(ot.contentMatchAt(ot.childCount).matchType(ut==it.length-1?et.type:it[ut+1]))return ot.copy(ot.content.append(Fragment.from(withWrappers(et,it,ut+1))))}}function closeRight(it,g){if(g==0)return it;let et=it.content.replaceChild(it.childCount-1,closeRight(it.lastChild,g-1)),ot=it.contentMatchAt(it.childCount).fillBefore(Fragment.empty,!0);return it.copy(et.append(ot))}function closeRange(it,g,et,ot,ut,ct){let dt=g<0?it.firstChild:it.lastChild,ft=dt.content;return it.childCount>1&&(ct=0),ut<ot-1&&(ft=closeRange(ft,g,et,ot,ut+1,ct)),ut>=et&&(ft=g<0?dt.contentMatchAt(0).fillBefore(ft,ct<=ut).append(ft):ft.append(dt.contentMatchAt(dt.childCount).fillBefore(Fragment.empty,!0))),it.replaceChild(g<0?0:it.childCount-1,dt.copy(ft))}function closeSlice(it,g,et){return g<it.openStart&&(it=new Slice(closeRange(it.content,-1,g,it.openStart,0,it.openEnd),g,it.openEnd)),et<it.openEnd&&(it=new Slice(closeRange(it.content,1,et,it.openEnd,0,0),it.openStart,et)),it}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(it){let g=window.trustedTypes;return g?(_policy||(_policy=g.defaultPolicy||g.createPolicy("ProseMirrorClipboard",{createHTML:et=>et})),_policy.createHTML(it)):it}function readHTML(it){let g=/^(\s*<meta [^>]*>)*/.exec(it);g&&(it=it.slice(g[0].length));let et=detachedDoc().createElement("div"),ot=/<([a-z][^>\s]+)/i.exec(it),ut;if((ut=ot&&wrapMap[ot[1].toLowerCase()])&&(it=ut.map(ct=>"<"+ct+">").join("")+it+ut.map(ct=>"</"+ct+">").reverse().join("")),et.innerHTML=maybeWrapTrusted(it),ut)for(let ct=0;ct<ut.length;ct++)et=et.querySelector(ut[ct])||et;return et}function restoreReplacedSpaces(it){let g=it.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let et=0;et<g.length;et++){let ot=g[et];ot.childNodes.length==1&&ot.textContent==""&&ot.parentNode&&ot.parentNode.replaceChild(it.ownerDocument.createTextNode(" "),ot)}}function addContext(it,g){if(!it.size)return it;let et=it.content.firstChild.type.schema,ot;try{ot=JSON.parse(g)}catch{return it}let{content:ut,openStart:ct,openEnd:dt}=it;for(let ft=ot.length-2;ft>=0;ft-=2){let St=et.nodes[ot[ft]];if(!St||St.hasRequiredAttrs())break;ut=Fragment.from(St.create(ot[ft+1],ut)),ct++,dt++}return new Slice(ut,ct,dt)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(it){for(let g in handlers){let et=handlers[g];it.dom.addEventListener(g,it.input.eventHandlers[g]=ot=>{eventBelongsToView(it,ot)&&!runCustomHandler(it,ot)&&(it.editable||!(ot.type in editHandlers))&&et(it,ot)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&it.dom.addEventListener("input",()=>null),ensureListeners(it)}function setSelectionOrigin(it,g){it.input.lastSelectionOrigin=g,it.input.lastSelectionTime=Date.now()}function destroyInput(it){it.domObserver.stop();for(let g in it.input.eventHandlers)it.dom.removeEventListener(g,it.input.eventHandlers[g]);clearTimeout(it.input.composingTimeout),clearTimeout(it.input.lastIOSEnterFallbackTimeout)}function ensureListeners(it){it.someProp("handleDOMEvents",g=>{for(let et in g)it.input.eventHandlers[et]||it.dom.addEventListener(et,it.input.eventHandlers[et]=ot=>runCustomHandler(it,ot))})}function runCustomHandler(it,g){return it.someProp("handleDOMEvents",et=>{let ot=et[g.type];return ot?ot(it,g)||g.defaultPrevented:!1})}function eventBelongsToView(it,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let et=g.target;et!=it.dom;et=et.parentNode)if(!et||et.nodeType==11||et.pmViewDesc&&et.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(it,g){!runCustomHandler(it,g)&&handlers[g.type]&&(it.editable||!(g.type in editHandlers))&&handlers[g.type](it,g)}editHandlers.keydown=(it,g)=>{let et=g;if(it.input.shiftKey=et.keyCode==16||et.shiftKey,!inOrNearComposition(it,et)&&(it.input.lastKeyCode=et.keyCode,it.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&et.keyCode==13)))if(et.keyCode!=229&&it.domObserver.forceFlush(),ios&&et.keyCode==13&&!et.ctrlKey&&!et.altKey&&!et.metaKey){let ot=Date.now();it.input.lastIOSEnter=ot,it.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{it.input.lastIOSEnter==ot&&(it.someProp("handleKeyDown",ut=>ut(it,keyEvent(13,"Enter"))),it.input.lastIOSEnter=0)},200)}else it.someProp("handleKeyDown",ot=>ot(it,et))||captureKeyDown(it,et)?et.preventDefault():setSelectionOrigin(it,"key")};editHandlers.keyup=(it,g)=>{g.keyCode==16&&(it.input.shiftKey=!1)};editHandlers.keypress=(it,g)=>{let et=g;if(inOrNearComposition(it,et)||!et.charCode||et.ctrlKey&&!et.altKey||mac$2&&et.metaKey)return;if(it.someProp("handleKeyPress",ut=>ut(it,et))){et.preventDefault();return}let ot=it.state.selection;if(!(ot instanceof TextSelection)||!ot.$from.sameParent(ot.$to)){let ut=String.fromCharCode(et.charCode),ct=()=>it.state.tr.insertText(ut).scrollIntoView();!/[\r\n]/.test(ut)&&!it.someProp("handleTextInput",dt=>dt(it,ot.$from.pos,ot.$to.pos,ut,ct))&&it.dispatch(ct()),et.preventDefault()}};function eventCoords(it){return{left:it.clientX,top:it.clientY}}function isNear(it,g){let et=g.x-it.clientX,ot=g.y-it.clientY;return et*et+ot*ot<100}function runHandlerOnContext(it,g,et,ot,ut){if(ot==-1)return!1;let ct=it.state.doc.resolve(ot);for(let dt=ct.depth+1;dt>0;dt--)if(it.someProp(g,ft=>dt>ct.depth?ft(it,et,ct.nodeAfter,ct.before(dt),ut,!0):ft(it,et,ct.node(dt),ct.before(dt),ut,!1)))return!0;return!1}function updateSelection(it,g,et){if(it.focused||it.focus(),it.state.selection.eq(g))return;let ot=it.state.tr.setSelection(g);et=="pointer"&&ot.setMeta("pointer",!0),it.dispatch(ot)}function selectClickedLeaf(it,g){if(g==-1)return!1;let et=it.state.doc.resolve(g),ot=et.nodeAfter;return ot&&ot.isAtom&&NodeSelection.isSelectable(ot)?(updateSelection(it,new NodeSelection(et),"pointer"),!0):!1}function selectClickedNode(it,g){if(g==-1)return!1;let et=it.state.selection,ot,ut;et instanceof NodeSelection&&(ot=et.node);let ct=it.state.doc.resolve(g);for(let dt=ct.depth+1;dt>0;dt--){let ft=dt>ct.depth?ct.nodeAfter:ct.node(dt);if(NodeSelection.isSelectable(ft)){ot&&et.$from.depth>0&&dt>=et.$from.depth&&ct.before(et.$from.depth+1)==et.$from.pos?ut=ct.before(et.$from.depth):ut=ct.before(dt);break}}return ut!=null?(updateSelection(it,NodeSelection.create(it.state.doc,ut),"pointer"),!0):!1}function handleSingleClick(it,g,et,ot,ut){return runHandlerOnContext(it,"handleClickOn",g,et,ot)||it.someProp("handleClick",ct=>ct(it,g,ot))||(ut?selectClickedNode(it,et):selectClickedLeaf(it,et))}function handleDoubleClick(it,g,et,ot){return runHandlerOnContext(it,"handleDoubleClickOn",g,et,ot)||it.someProp("handleDoubleClick",ut=>ut(it,g,ot))}function handleTripleClick(it,g,et,ot){return runHandlerOnContext(it,"handleTripleClickOn",g,et,ot)||it.someProp("handleTripleClick",ut=>ut(it,g,ot))||defaultTripleClick(it,et,ot)}function defaultTripleClick(it,g,et){if(et.button!=0)return!1;let ot=it.state.doc;if(g==-1)return ot.inlineContent?(updateSelection(it,TextSelection.create(ot,0,ot.content.size),"pointer"),!0):!1;let ut=ot.resolve(g);for(let ct=ut.depth+1;ct>0;ct--){let dt=ct>ut.depth?ut.nodeAfter:ut.node(ct),ft=ut.before(ct);if(dt.inlineContent)updateSelection(it,TextSelection.create(ot,ft+1,ft+1+dt.content.size),"pointer");else if(NodeSelection.isSelectable(dt))updateSelection(it,NodeSelection.create(ot,ft),"pointer");else continue;return!0}}function forceDOMFlush(it){return endComposition(it)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(it,g)=>{let et=g;it.input.shiftKey=et.shiftKey;let ot=forceDOMFlush(it),ut=Date.now(),ct="singleClick";ut-it.input.lastClick.time<500&&isNear(et,it.input.lastClick)&&!et[selectNodeModifier]&&it.input.lastClick.button==et.button&&(it.input.lastClick.type=="singleClick"?ct="doubleClick":it.input.lastClick.type=="doubleClick"&&(ct="tripleClick")),it.input.lastClick={time:ut,x:et.clientX,y:et.clientY,type:ct,button:et.button};let dt=it.posAtCoords(eventCoords(et));dt&&(ct=="singleClick"?(it.input.mouseDown&&it.input.mouseDown.done(),it.input.mouseDown=new MouseDown(it,dt,et,!!ot)):(ct=="doubleClick"?handleDoubleClick:handleTripleClick)(it,dt.pos,dt.inside,et)?et.preventDefault():setSelectionOrigin(it,"pointer"))};class MouseDown{constructor(g,et,ot,ut){this.view=g,this.pos=et,this.event=ot,this.flushed=ut,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!ot[selectNodeModifier],this.allowDefault=ot.shiftKey;let ct,dt;if(et.inside>-1)ct=g.state.doc.nodeAt(et.inside),dt=et.inside;else{let Tt=g.state.doc.resolve(et.pos);ct=Tt.parent,dt=Tt.depth?Tt.before():0}const ft=ut?null:ot.target,St=ft?g.docView.nearestDesc(ft,!0):null;this.target=St&&St.nodeDOM.nodeType==1?St.nodeDOM:null;let{selection:kt}=g.state;(ot.button==0&&ct.type.spec.draggable&&ct.type.spec.selectable!==!1||kt instanceof NodeSelection&&kt.from<=dt&&kt.to>dt)&&(this.mightDrag={node:ct,pos:dt,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let et=this.pos;this.view.state.doc!=this.startDoc&&(et=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!et?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,et.pos,et.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(et.pos-this.view.state.selection.from),Math.abs(et.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(et.pos)),"pointer"),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=it=>{it.input.lastTouch=Date.now(),forceDOMFlush(it),setSelectionOrigin(it,"pointer")};handlers.touchmove=it=>{it.input.lastTouch=Date.now(),setSelectionOrigin(it,"pointer")};handlers.contextmenu=it=>forceDOMFlush(it);function inOrNearComposition(it,g){return it.composing?!0:safari&&Math.abs(g.timeStamp-it.input.compositionEndedAt)<500?(it.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=it=>{if(!it.composing){it.domObserver.flush();let{state:g}=it,et=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!et.textOffset&&et.parentOffset&&et.nodeBefore.marks.some(ot=>ot.type.spec.inclusive===!1)))it.markCursor=it.state.storedMarks||et.marks(),endComposition(it,!0),it.markCursor=null;else if(endComposition(it,!g.selection.empty),gecko&&g.selection.empty&&et.parentOffset&&!et.textOffset&&et.nodeBefore.marks.length){let ot=it.domSelectionRange();for(let ut=ot.focusNode,ct=ot.focusOffset;ut&&ut.nodeType==1&&ct!=0;){let dt=ct<0?ut.lastChild:ut.childNodes[ct-1];if(!dt)break;if(dt.nodeType==3){let ft=it.domSelection();ft&&ft.collapse(dt,dt.nodeValue.length);break}else ut=dt,ct=-1}}it.input.composing=!0}scheduleComposeEnd(it,timeoutComposition)};editHandlers.compositionend=(it,g)=>{it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=g.timeStamp,it.input.compositionPendingChanges=it.domObserver.pendingRecords().length?it.input.compositionID:0,it.input.compositionNode=null,it.input.compositionPendingChanges&&Promise.resolve().then(()=>it.domObserver.flush()),it.input.compositionID++,scheduleComposeEnd(it,20))};function scheduleComposeEnd(it,g){clearTimeout(it.input.composingTimeout),g>-1&&(it.input.composingTimeout=setTimeout(()=>endComposition(it),g))}function clearComposition(it){for(it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=timestampFromCustomEvent());it.input.compositionNodes.length>0;)it.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(it){let g=it.domSelectionRange();if(!g.focusNode)return null;let et=textNodeBefore$1(g.focusNode,g.focusOffset),ot=textNodeAfter$1(g.focusNode,g.focusOffset);if(et&&ot&&et!=ot){let ut=ot.pmViewDesc,ct=it.domObserver.lastChangedTextNode;if(et==ct||ot==ct)return ct;if(!ut||!ut.isText(ot.nodeValue))return ot;if(it.input.compositionNode==ot){let dt=et.pmViewDesc;if(!(!dt||!dt.isText(et.nodeValue)))return ot}}return et||ot}function timestampFromCustomEvent(){let it=document.createEvent("Event");return it.initEvent("event",!0,!0),it.timeStamp}function endComposition(it,g=!1){if(!(android&&it.domObserver.flushingSoon>=0)){if(it.domObserver.forceFlush(),clearComposition(it),g||it.docView&&it.docView.dirty){let et=selectionFromDOM(it),ot=it.state.selection;return et&&!et.eq(ot)?it.dispatch(it.state.tr.setSelection(et)):(it.markCursor||g)&&!ot.$from.node(ot.$from.sharedDepth(ot.to)).inlineContent?it.dispatch(it.state.tr.deleteSelection()):it.updateState(it.state),!0}return!1}}function captureCopy(it,g){if(!it.dom.parentNode)return;let et=it.dom.parentNode.appendChild(document.createElement("div"));et.appendChild(g),et.style.cssText="position: fixed; left: -10000px; top: 10px";let ot=getSelection(),ut=document.createRange();ut.selectNodeContents(g),it.dom.blur(),ot.removeAllRanges(),ot.addRange(ut),setTimeout(()=>{et.parentNode&&et.parentNode.removeChild(et),it.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(it,g)=>{let et=g,ot=it.state.selection,ut=et.type=="cut";if(ot.empty)return;let ct=brokenClipboardAPI?null:et.clipboardData,dt=ot.content(),{dom:ft,text:St}=serializeForClipboard(it,dt);ct?(et.preventDefault(),ct.clearData(),ct.setData("text/html",ft.innerHTML),ct.setData("text/plain",St)):captureCopy(it,ft),ut&&it.dispatch(it.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(it){return it.openStart==0&&it.openEnd==0&&it.content.childCount==1?it.content.firstChild:null}function capturePaste(it,g){if(!it.dom.parentNode)return;let et=it.input.shiftKey||it.state.selection.$from.parent.type.spec.code,ot=it.dom.parentNode.appendChild(document.createElement(et?"textarea":"div"));et||(ot.contentEditable="true"),ot.style.cssText="position: fixed; left: -10000px; top: 10px",ot.focus();let ut=it.input.shiftKey&&it.input.lastKeyCode!=45;setTimeout(()=>{it.focus(),ot.parentNode&&ot.parentNode.removeChild(ot),et?doPaste(it,ot.value,null,ut,g):doPaste(it,ot.textContent,ot.innerHTML,ut,g)},50)}function doPaste(it,g,et,ot,ut){let ct=parseFromClipboard(it,g,et,ot,it.state.selection.$from);if(it.someProp("handlePaste",St=>St(it,ut,ct||Slice.empty)))return!0;if(!ct)return!1;let dt=sliceSingleNode(ct),ft=dt?it.state.tr.replaceSelectionWith(dt,ot):it.state.tr.replaceSelection(ct);return it.dispatch(ft.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(it){let g=it.getData("text/plain")||it.getData("Text");if(g)return g;let et=it.getData("text/uri-list");return et?et.replace(/\r?\n/g," "):""}editHandlers.paste=(it,g)=>{let et=g;if(it.composing&&!android)return;let ot=brokenClipboardAPI?null:et.clipboardData,ut=it.input.shiftKey&&it.input.lastKeyCode!=45;ot&&doPaste(it,getText$1(ot),ot.getData("text/html"),ut,et)?et.preventDefault():capturePaste(it,et)};class Dragging{constructor(g,et,ot){this.slice=g,this.move=et,this.node=ot}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(it,g){let et=it.someProp("dragCopies",ot=>!ot(g));return et??!g[dragCopyModifier]}handlers.dragstart=(it,g)=>{let et=g,ot=it.input.mouseDown;if(ot&&ot.done(),!et.dataTransfer)return;let ut=it.state.selection,ct=ut.empty?null:it.posAtCoords(eventCoords(et)),dt;if(!(ct&&ct.pos>=ut.from&&ct.pos<=(ut instanceof NodeSelection?ut.to-1:ut.to))){if(ot&&ot.mightDrag)dt=NodeSelection.create(it.state.doc,ot.mightDrag.pos);else if(et.target&&et.target.nodeType==1){let Rt=it.docView.nearestDesc(et.target,!0);Rt&&Rt.node.type.spec.draggable&&Rt!=it.docView&&(dt=NodeSelection.create(it.state.doc,Rt.posBefore))}}let ft=(dt||it.state.selection).content(),{dom:St,text:kt,slice:Tt}=serializeForClipboard(it,ft);(!et.dataTransfer.files.length||!chrome||chrome_version>120)&&et.dataTransfer.clearData(),et.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",St.innerHTML),et.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||et.dataTransfer.setData("text/plain",kt),it.dragging=new Dragging(Tt,dragMoves(it,et),dt)};handlers.dragend=it=>{let g=it.dragging;window.setTimeout(()=>{it.dragging==g&&(it.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(it,g)=>g.preventDefault();editHandlers.drop=(it,g)=>{let et=g,ot=it.dragging;if(it.dragging=null,!et.dataTransfer)return;let ut=it.posAtCoords(eventCoords(et));if(!ut)return;let ct=it.state.doc.resolve(ut.pos),dt=ot&&ot.slice;dt?it.someProp("transformPasted",Bt=>{dt=Bt(dt,it,!1)}):dt=parseFromClipboard(it,getText$1(et.dataTransfer),brokenClipboardAPI?null:et.dataTransfer.getData("text/html"),!1,ct);let ft=!!(ot&&dragMoves(it,et));if(it.someProp("handleDrop",Bt=>Bt(it,et,dt||Slice.empty,ft))){et.preventDefault();return}if(!dt)return;et.preventDefault();let St=dt?dropPoint(it.state.doc,ct.pos,dt):ct.pos;St==null&&(St=ct.pos);let kt=it.state.tr;if(ft){let{node:Bt}=ot;Bt?Bt.replace(kt):kt.deleteSelection()}let Tt=kt.mapping.map(St),Rt=dt.openStart==0&&dt.openEnd==0&&dt.content.childCount==1,jt=kt.doc;if(Rt?kt.replaceRangeWith(Tt,Tt,dt.content.firstChild):kt.replaceRange(Tt,Tt,dt),kt.doc.eq(jt))return;let Ft=kt.doc.resolve(Tt);if(Rt&&NodeSelection.isSelectable(dt.content.firstChild)&&Ft.nodeAfter&&Ft.nodeAfter.sameMarkup(dt.content.firstChild))kt.setSelection(new NodeSelection(Ft));else{let Bt=kt.mapping.map(St);kt.mapping.maps[kt.mapping.maps.length-1].forEach((Ht,Yt,zt,Kt)=>Bt=Kt),kt.setSelection(selectionBetween(it,Ft,kt.doc.resolve(Bt)))}it.focus(),it.dispatch(kt.setMeta("uiEvent","drop"))};handlers.focus=it=>{it.input.lastFocus=Date.now(),it.focused||(it.domObserver.stop(),it.dom.classList.add("ProseMirror-focused"),it.domObserver.start(),it.focused=!0,setTimeout(()=>{it.docView&&it.hasFocus()&&!it.domObserver.currentSelection.eq(it.domSelectionRange())&&selectionToDOM(it)},20))};handlers.blur=(it,g)=>{let et=g;it.focused&&(it.domObserver.stop(),it.dom.classList.remove("ProseMirror-focused"),it.domObserver.start(),et.relatedTarget&&it.dom.contains(et.relatedTarget)&&it.domObserver.currentSelection.clear(),it.focused=!1)};handlers.beforeinput=(it,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){it.domObserver.flushSoon();let{domChangeCount:ot}=it.input;setTimeout(()=>{if(it.input.domChangeCount!=ot||(it.dom.blur(),it.focus(),it.someProp("handleKeyDown",ct=>ct(it,keyEvent(8,"Backspace")))))return;let{$cursor:ut}=it.state.selection;ut&&ut.pos>0&&it.dispatch(it.state.tr.delete(ut.pos-1,ut.pos).scrollIntoView())},50)}};for(let it in editHandlers)handlers[it]=editHandlers[it];function compareObjs(it,g){if(it==g)return!0;for(let et in it)if(it[et]!==g[et])return!1;for(let et in g)if(!(et in it))return!1;return!0}class WidgetType{constructor(g,et){this.toDOM=g,this.spec=et||noSpec,this.side=this.spec.side||0}map(g,et,ot,ut){let{pos:ct,deleted:dt}=g.mapResult(et.from+ut,this.side<0?-1:1);return dt?null:new Decoration(ct-ot,ct-ot,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ut){let ct=g.map(et.from+ut,this.spec.inclusiveStart?-1:1)-ot,dt=g.map(et.to+ut,this.spec.inclusiveEnd?1:-1)-ot;return ct>=dt?null:new Decoration(ct,dt,this)}valid(g,et){return et.from<et.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ut){let ct=g.mapResult(et.from+ut,1);if(ct.deleted)return null;let dt=g.mapResult(et.to+ut,-1);return dt.deleted||dt.pos<=ct.pos?null:new Decoration(ct.pos-ot,dt.pos-ot,this)}valid(g,et){let{index:ot,offset:ut}=g.content.findIndex(et.from),ct;return ut==et.from&&!(ct=g.child(ot)).isText&&ut+ct.nodeSize==et.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,et,ot){this.from=g,this.to=et,this.type=ot}copy(g,et){return new Decoration(g,et,this.type)}eq(g,et=0){return this.type.eq(g.type)&&this.from+et==g.from&&this.to+et==g.to}map(g,et,ot){return this.type.map(g,this,et,ot)}static widget(g,et,ot){return new Decoration(g,g,new WidgetType(et,ot))}static inline(g,et,ot,ut){return new Decoration(g,et,new InlineType(ot,ut))}static node(g,et,ot,ut){return new Decoration(g,et,new NodeType(ot,ut))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,et){this.local=g.length?g:none,this.children=et.length?et:none}static create(g,et){return et.length?buildTree(et,g,0,noSpec):empty}find(g,et,ot){let ut=[];return this.findInner(g??0,et??1e9,ut,0,ot),ut}findInner(g,et,ot,ut,ct){for(let dt=0;dt<this.local.length;dt++){let ft=this.local[dt];ft.from<=et&&ft.to>=g&&(!ct||ct(ft.spec))&&ot.push(ft.copy(ft.from+ut,ft.to+ut))}for(let dt=0;dt<this.children.length;dt+=3)if(this.children[dt]<et&&this.children[dt+1]>g){let ft=this.children[dt]+1;this.children[dt+2].findInner(g-ft,et-ft,ot,ut+ft,ct)}}map(g,et,ot){return this==empty||g.maps.length==0?this:this.mapInner(g,et,0,0,ot||noSpec)}mapInner(g,et,ot,ut,ct){let dt;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft].map(g,ot,ut);St&&St.type.valid(et,St)?(dt||(dt=[])).push(St):ct.onRemove&&ct.onRemove(this.local[ft].spec)}return this.children.length?mapChildren(this.children,dt||[],g,et,ot,ut,ct):dt?new DecorationSet(dt.sort(byPos),none):empty}add(g,et){return et.length?this==empty?DecorationSet.create(g,et):this.addInner(g,et,0):this}addInner(g,et,ot){let ut,ct=0;g.forEach((ft,St)=>{let kt=St+ot,Tt;if(Tt=takeSpansForNode(et,ft,kt)){for(ut||(ut=this.children.slice());ct<ut.length&&ut[ct]<St;)ct+=3;ut[ct]==St?ut[ct+2]=ut[ct+2].addInner(ft,Tt,kt+1):ut.splice(ct,0,St,St+ft.nodeSize,buildTree(Tt,ft,kt+1,noSpec)),ct+=3}});let dt=moveSpans(ct?withoutNulls(et):et,-ot);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||dt.splice(ft--,1);return new DecorationSet(dt.length?this.local.concat(dt).sort(byPos):this.local,ut||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,et){let ot=this.children,ut=this.local;for(let ct=0;ct<ot.length;ct+=3){let dt,ft=ot[ct]+et,St=ot[ct+1]+et;for(let Tt=0,Rt;Tt<g.length;Tt++)(Rt=g[Tt])&&Rt.from>ft&&Rt.to<St&&(g[Tt]=null,(dt||(dt=[])).push(Rt));if(!dt)continue;ot==this.children&&(ot=this.children.slice());let kt=ot[ct+2].removeInner(dt,ft+1);kt!=empty?ot[ct+2]=kt:(ot.splice(ct,3),ct-=3)}if(ut.length){for(let ct=0,dt;ct<g.length;ct++)if(dt=g[ct])for(let ft=0;ft<ut.length;ft++)ut[ft].eq(dt,et)&&(ut==this.local&&(ut=this.local.slice()),ut.splice(ft--,1))}return ot==this.children&&ut==this.local?this:ut.length||ot.length?new DecorationSet(ut,ot):empty}forChild(g,et){if(this==empty)return this;if(et.isLeaf)return DecorationSet.empty;let ot,ut;for(let ft=0;ft<this.children.length;ft+=3)if(this.children[ft]>=g){this.children[ft]==g&&(ot=this.children[ft+2]);break}let ct=g+1,dt=ct+et.content.size;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft];if(St.from<dt&&St.to>ct&&St.type instanceof InlineType){let kt=Math.max(ct,St.from)-ct,Tt=Math.min(dt,St.to)-ct;kt<Tt&&(ut||(ut=[])).push(St.copy(kt,Tt))}}if(ut){let ft=new DecorationSet(ut.sort(byPos),none);return ot?new DecorationGroup([ft,ot]):ft}return ot||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let et=0;et<this.local.length;et++)if(!this.local[et].eq(g.local[et]))return!1;for(let et=0;et<this.children.length;et+=3)if(this.children[et]!=g.children[et]||this.children[et+1]!=g.children[et+1]||!this.children[et+2].eq(g.children[et+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let et=[];for(let ot=0;ot<this.local.length;ot++)this.local[ot].type instanceof InlineType||et.push(this.local[ot]);return et}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,et){const ot=this.members.map(ut=>ut.map(g,et,noSpec));return DecorationGroup.from(ot)}forChild(g,et){if(et.isLeaf)return DecorationSet.empty;let ot=[];for(let ut=0;ut<this.members.length;ut++){let ct=this.members[ut].forChild(g,et);ct!=empty&&(ct instanceof DecorationGroup?ot=ot.concat(ct.members):ot.push(ct))}return DecorationGroup.from(ot)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let et=0;et<this.members.length;et++)if(!this.members[et].eq(g.members[et]))return!1;return!0}locals(g){let et,ot=!0;for(let ut=0;ut<this.members.length;ut++){let ct=this.members[ut].localsInner(g);if(ct.length)if(!et)et=ct;else{ot&&(et=et.slice(),ot=!1);for(let dt=0;dt<ct.length;dt++)et.push(ct[dt])}}return et?removeOverlap(ot?et:et.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(et=>et instanceof DecorationSet)?g:g.reduce((et,ot)=>et.concat(ot instanceof DecorationSet?ot:ot.members),[]))}}forEachSet(g){for(let et=0;et<this.members.length;et++)this.members[et].forEachSet(g)}}function mapChildren(it,g,et,ot,ut,ct,dt){let ft=it.slice();for(let kt=0,Tt=ct;kt<et.maps.length;kt++){let Rt=0;et.maps[kt].forEach((jt,Ft,Bt,Ht)=>{let Yt=Ht-Bt-(Ft-jt);for(let zt=0;zt<ft.length;zt+=3){let Kt=ft[zt+1];if(Kt<0||jt>Kt+Tt-Rt)continue;let en=ft[zt]+Tt-Rt;Ft>=en?ft[zt+1]=jt<=en?-2:-1:jt>=Tt&&Yt&&(ft[zt]+=Yt,ft[zt+1]+=Yt)}Rt+=Yt}),Tt=et.maps[kt].map(Tt,-1)}let St=!1;for(let kt=0;kt<ft.length;kt+=3)if(ft[kt+1]<0){if(ft[kt+1]==-2){St=!0,ft[kt+1]=-1;continue}let Tt=et.map(it[kt]+ct),Rt=Tt-ut;if(Rt<0||Rt>=ot.content.size){St=!0;continue}let jt=et.map(it[kt+1]+ct,-1),Ft=jt-ut,{index:Bt,offset:Ht}=ot.content.findIndex(Rt),Yt=ot.maybeChild(Bt);if(Yt&&Ht==Rt&&Ht+Yt.nodeSize==Ft){let zt=ft[kt+2].mapInner(et,Yt,Tt+1,it[kt]+ct+1,dt);zt!=empty?(ft[kt]=Rt,ft[kt+1]=Ft,ft[kt+2]=zt):(ft[kt+1]=-2,St=!0)}else St=!0}if(St){let kt=mapAndGatherRemainingDecorations(ft,it,g,et,ut,ct,dt),Tt=buildTree(kt,ot,0,dt);g=Tt.local;for(let Rt=0;Rt<ft.length;Rt+=3)ft[Rt+1]<0&&(ft.splice(Rt,3),Rt-=3);for(let Rt=0,jt=0;Rt<Tt.children.length;Rt+=3){let Ft=Tt.children[Rt];for(;jt<ft.length&&ft[jt]<Ft;)jt+=3;ft.splice(jt,0,Tt.children[Rt],Tt.children[Rt+1],Tt.children[Rt+2])}}return new DecorationSet(g.sort(byPos),ft)}function moveSpans(it,g){if(!g||!it.length)return it;let et=[];for(let ot=0;ot<it.length;ot++){let ut=it[ot];et.push(new Decoration(ut.from+g,ut.to+g,ut.type))}return et}function mapAndGatherRemainingDecorations(it,g,et,ot,ut,ct,dt){function ft(St,kt){for(let Tt=0;Tt<St.local.length;Tt++){let Rt=St.local[Tt].map(ot,ut,kt);Rt?et.push(Rt):dt.onRemove&&dt.onRemove(St.local[Tt].spec)}for(let Tt=0;Tt<St.children.length;Tt+=3)ft(St.children[Tt+2],St.children[Tt]+kt+1)}for(let St=0;St<it.length;St+=3)it[St+1]==-1&&ft(it[St+2],g[St]+ct+1);return et}function takeSpansForNode(it,g,et){if(g.isLeaf)return null;let ot=et+g.nodeSize,ut=null;for(let ct=0,dt;ct<it.length;ct++)(dt=it[ct])&&dt.from>et&&dt.to<ot&&((ut||(ut=[])).push(dt),it[ct]=null);return ut}function withoutNulls(it){let g=[];for(let et=0;et<it.length;et++)it[et]!=null&&g.push(it[et]);return g}function buildTree(it,g,et,ot){let ut=[],ct=!1;g.forEach((ft,St)=>{let kt=takeSpansForNode(it,ft,St+et);if(kt){ct=!0;let Tt=buildTree(kt,ft,et+St+1,ot);Tt!=empty&&ut.push(St,St+ft.nodeSize,Tt)}});let dt=moveSpans(ct?withoutNulls(it):it,-et).sort(byPos);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||(ot.onRemove&&ot.onRemove(dt[ft].spec),dt.splice(ft--,1));return dt.length||ut.length?new DecorationSet(dt,ut):empty}function byPos(it,g){return it.from-g.from||it.to-g.to}function removeOverlap(it){let g=it;for(let et=0;et<g.length-1;et++){let ot=g[et];if(ot.from!=ot.to)for(let ut=et+1;ut<g.length;ut++){let ct=g[ut];if(ct.from==ot.from){ct.to!=ot.to&&(g==it&&(g=it.slice()),g[ut]=ct.copy(ct.from,ot.to),insertAhead(g,ut+1,ct.copy(ot.to,ct.to)));continue}else{ct.from<ot.to&&(g==it&&(g=it.slice()),g[et]=ot.copy(ot.from,ct.from),insertAhead(g,ut,ot.copy(ct.from,ot.to)));break}}}return g}function insertAhead(it,g,et){for(;g<it.length&&byPos(et,it[g])>0;)g++;it.splice(g,0,et)}function viewDecorations(it){let g=[];return it.someProp("decorations",et=>{let ot=et(it.state);ot&&ot!=empty&&g.push(ot)}),it.cursorWrapper&&g.push(DecorationSet.create(it.state.doc,[it.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,et){this.view=g,this.handleDOMChange=et,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(ot=>{for(let ut=0;ut<ot.length;ut++)this.queue.push(ot[ut]);ie$1&&ie_version<=11&&ot.some(ut=>ut.type=="childList"&&ut.removedNodes.length||ut.type=="characterData"&&ut.oldValue.length>ut.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=ot=>{this.queue.push({target:ot.target,type:"characterData",oldValue:ot.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let et=0;et<g.length;et++)this.queue.push(g[et]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let et=new Set,ot;for(let ct=g.focusNode;ct;ct=parentNode(ct))et.add(ct);for(let ct=g.anchorNode;ct;ct=parentNode(ct))if(et.has(ct)){ot=ct;break}let ut=ot&&this.view.docView.nearestDesc(ot);if(ut&&ut.ignoreMutation({type:"selection",target:ot.nodeType==3?ot.parentNode:ot}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let et=this.pendingRecords();et.length&&(this.queue=[]);let ot=g.domSelectionRange(),ut=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(ot)&&hasFocusAndSelection(g)&&!this.ignoreSelectionChange(ot),ct=-1,dt=-1,ft=!1,St=[];if(g.editable)for(let Tt=0;Tt<et.length;Tt++){let Rt=this.registerMutation(et[Tt],St);Rt&&(ct=ct<0?Rt.from:Math.min(Rt.from,ct),dt=dt<0?Rt.to:Math.max(Rt.to,dt),Rt.typeOver&&(ft=!0))}if(gecko&&St.length){let Tt=St.filter(Rt=>Rt.nodeName=="BR");if(Tt.length==2){let[Rt,jt]=Tt;Rt.parentNode&&Rt.parentNode.parentNode==jt.parentNode?jt.remove():Rt.remove()}else{let{focusNode:Rt}=this.currentSelection;for(let jt of Tt){let Ft=jt.parentNode;Ft&&Ft.nodeName=="LI"&&(!Rt||blockParent(g,Rt)!=Ft)&&jt.remove()}}}let kt=null;ct<0&&ut&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(ot)&&(kt=selectionFromDOM(g))&&kt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(ot),g.scrollToSelection()):(ct>-1||ut)&&(ct>-1&&(g.docView.markDirty(ct,dt),checkCSS(g)),this.handleDOMChange(ct,dt,ft,St),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(ot)||selectionToDOM(g),this.currentSelection.set(ot))}registerMutation(g,et){if(et.indexOf(g.target)>-1)return null;let ot=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(ot==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!ot||ot.ignoreMutation(g))return null;if(g.type=="childList"){for(let Tt=0;Tt<g.addedNodes.length;Tt++){let Rt=g.addedNodes[Tt];et.push(Rt),Rt.nodeType==3&&(this.lastChangedTextNode=Rt)}if(ot.contentDOM&&ot.contentDOM!=ot.dom&&!ot.contentDOM.contains(g.target))return{from:ot.posBefore,to:ot.posAfter};let ut=g.previousSibling,ct=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let Tt=0;Tt<g.addedNodes.length;Tt++){let{previousSibling:Rt,nextSibling:jt}=g.addedNodes[Tt];(!Rt||Array.prototype.indexOf.call(g.addedNodes,Rt)<0)&&(ut=Rt),(!jt||Array.prototype.indexOf.call(g.addedNodes,jt)<0)&&(ct=jt)}let dt=ut&&ut.parentNode==g.target?domIndex(ut)+1:0,ft=ot.localPosFromDOM(g.target,dt,-1),St=ct&&ct.parentNode==g.target?domIndex(ct):g.target.childNodes.length,kt=ot.localPosFromDOM(g.target,St,1);return{from:ft,to:kt}}else return g.type=="attributes"?{from:ot.posAtStart-ot.border,to:ot.posAtEnd+ot.border}:(this.lastChangedTextNode=g.target,{from:ot.posAtStart,to:ot.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(it){if(!cssChecked.has(it)&&(cssChecked.set(it,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(it.dom).whiteSpace)!==-1)){if(it.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(it,g){let et=g.startContainer,ot=g.startOffset,ut=g.endContainer,ct=g.endOffset,dt=it.domAtPos(it.state.selection.anchor);return isEquivalentPosition(dt.node,dt.offset,ut,ct)&&([et,ot,ut,ct]=[ut,ct,et,ot]),{anchorNode:et,anchorOffset:ot,focusNode:ut,focusOffset:ct}}function safariShadowSelectionRange(it,g){if(g.getComposedRanges){let ut=g.getComposedRanges(it.root)[0];if(ut)return rangeToSelectionRange(it,ut)}let et;function ot(ut){ut.preventDefault(),ut.stopImmediatePropagation(),et=ut.getTargetRanges()[0]}return it.dom.addEventListener("beforeinput",ot,!0),document.execCommand("indent"),it.dom.removeEventListener("beforeinput",ot,!0),et?rangeToSelectionRange(it,et):null}function blockParent(it,g){for(let et=g.parentNode;et&&et!=it.dom;et=et.parentNode){let ot=it.docView.nearestDesc(et,!0);if(ot&&ot.node.isBlock)return et}return null}function parseBetween(it,g,et){let{node:ot,fromOffset:ut,toOffset:ct,from:dt,to:ft}=it.docView.parseRange(g,et),St=it.domSelectionRange(),kt,Tt=St.anchorNode;if(Tt&&it.dom.contains(Tt.nodeType==1?Tt:Tt.parentNode)&&(kt=[{node:Tt,offset:St.anchorOffset}],selectionCollapsed(St)||kt.push({node:St.focusNode,offset:St.focusOffset})),chrome&&it.input.lastKeyCode===8)for(let Yt=ct;Yt>ut;Yt--){let zt=ot.childNodes[Yt-1],Kt=zt.pmViewDesc;if(zt.nodeName=="BR"&&!Kt){ct=Yt;break}if(!Kt||Kt.size)break}let Rt=it.state.doc,jt=it.someProp("domParser")||DOMParser.fromSchema(it.state.schema),Ft=Rt.resolve(dt),Bt=null,Ht=jt.parse(ot,{topNode:Ft.parent,topMatch:Ft.parent.contentMatchAt(Ft.index()),topOpen:!0,from:ut,to:ct,preserveWhitespace:Ft.parent.type.whitespace=="pre"?"full":!0,findPositions:kt,ruleFromNode,context:Ft});if(kt&&kt[0].pos!=null){let Yt=kt[0].pos,zt=kt[1]&&kt[1].pos;zt==null&&(zt=Yt),Bt={anchor:Yt+dt,head:zt+dt}}return{doc:Ht,sel:Bt,from:dt,to:ft}}function ruleFromNode(it){let g=it.pmViewDesc;if(g)return g.parseRule();if(it.nodeName=="BR"&&it.parentNode){if(safari&&/^(ul|ol)$/i.test(it.parentNode.nodeName)){let et=document.createElement("div");return et.appendChild(document.createElement("li")),{skip:et}}else if(it.parentNode.lastChild==it||safari&&/^(tr|table)$/i.test(it.parentNode.nodeName))return{ignore:!0}}else if(it.nodeName=="IMG"&&it.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(it,g,et,ot,ut){let ct=it.input.compositionPendingChanges||(it.composing?it.input.compositionID:0);if(it.input.compositionPendingChanges=0,g<0){let un=it.input.lastSelectionTime>Date.now()-50?it.input.lastSelectionOrigin:null,dn=selectionFromDOM(it,un);if(dn&&!it.state.selection.eq(dn)){if(chrome&&android&&it.input.lastKeyCode===13&&Date.now()-100<it.input.lastKeyCodeTime&&it.someProp("handleKeyDown",mn=>mn(it,keyEvent(13,"Enter"))))return;let Sn=it.state.tr.setSelection(dn);un=="pointer"?Sn.setMeta("pointer",!0):un=="key"&&Sn.scrollIntoView(),ct&&Sn.setMeta("composition",ct),it.dispatch(Sn)}return}let dt=it.state.doc.resolve(g),ft=dt.sharedDepth(et);g=dt.before(ft+1),et=it.state.doc.resolve(et).after(ft+1);let St=it.state.selection,kt=parseBetween(it,g,et),Tt=it.state.doc,Rt=Tt.slice(kt.from,kt.to),jt,Ft;it.input.lastKeyCode===8&&Date.now()-100<it.input.lastKeyCodeTime?(jt=it.state.selection.to,Ft="end"):(jt=it.state.selection.from,Ft="start"),it.input.lastKeyCode=null;let Bt=findDiff(Rt.content,kt.doc.content,kt.from,jt,Ft);if(Bt&&it.input.domChangeCount++,(ios&&it.input.lastIOSEnter>Date.now()-225||android)&&ut.some(un=>un.nodeType==1&&!isInline.test(un.nodeName))&&(!Bt||Bt.endA>=Bt.endB)&&it.someProp("handleKeyDown",un=>un(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(!Bt)if(ot&&St instanceof TextSelection&&!St.empty&&St.$head.sameParent(St.$anchor)&&!it.composing&&!(kt.sel&&kt.sel.anchor!=kt.sel.head))Bt={start:St.from,endA:St.to,endB:St.to};else{if(kt.sel){let un=resolveSelection(it,it.state.doc,kt.sel);if(un&&!un.eq(it.state.selection)){let dn=it.state.tr.setSelection(un);ct&&dn.setMeta("composition",ct),it.dispatch(dn)}}return}it.state.selection.from<it.state.selection.to&&Bt.start==Bt.endB&&it.state.selection instanceof TextSelection&&(Bt.start>it.state.selection.from&&Bt.start<=it.state.selection.from+2&&it.state.selection.from>=kt.from?Bt.start=it.state.selection.from:Bt.endA<it.state.selection.to&&Bt.endA>=it.state.selection.to-2&&it.state.selection.to<=kt.to&&(Bt.endB+=it.state.selection.to-Bt.endA,Bt.endA=it.state.selection.to)),ie$1&&ie_version<=11&&Bt.endB==Bt.start+1&&Bt.endA==Bt.start&&Bt.start>kt.from&&kt.doc.textBetween(Bt.start-kt.from-1,Bt.start-kt.from+1)==" "&&(Bt.start--,Bt.endA--,Bt.endB--);let Ht=kt.doc.resolveNoCache(Bt.start-kt.from),Yt=kt.doc.resolveNoCache(Bt.endB-kt.from),zt=Tt.resolve(Bt.start),Kt=Ht.sameParent(Yt)&&Ht.parent.inlineContent&&zt.end()>=Bt.endA;if((ios&&it.input.lastIOSEnter>Date.now()-225&&(!Kt||ut.some(un=>un.nodeName=="DIV"||un.nodeName=="P"))||!Kt&&Ht.pos<kt.doc.content.size&&(!Ht.sameParent(Yt)||!Ht.parent.inlineContent)&&Ht.pos<Yt.pos&&!/\S/.test(kt.doc.textBetween(Ht.pos,Yt.pos,"","")))&&it.someProp("handleKeyDown",un=>un(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(it.state.selection.anchor>Bt.start&&looksLikeBackspace(Tt,Bt.start,Bt.endA,Ht,Yt)&&it.someProp("handleKeyDown",un=>un(it,keyEvent(8,"Backspace")))){android&&chrome&&it.domObserver.suppressSelectionUpdates();return}chrome&&Bt.endB==Bt.start&&(it.input.lastChromeDelete=Date.now()),android&&!Kt&&Ht.start()!=Yt.start()&&Yt.parentOffset==0&&Ht.depth==Yt.depth&&kt.sel&&kt.sel.anchor==kt.sel.head&&kt.sel.head==Bt.endA&&(Bt.endB-=2,Yt=kt.doc.resolveNoCache(Bt.endB-kt.from),setTimeout(()=>{it.someProp("handleKeyDown",function(un){return un(it,keyEvent(13,"Enter"))})},20));let en=Bt.start,tn=Bt.endA,on=un=>{let dn=un||it.state.tr.replace(en,tn,kt.doc.slice(Bt.start-kt.from,Bt.endB-kt.from));if(kt.sel){let Sn=resolveSelection(it,dn.doc,kt.sel);Sn&&!(chrome&&it.composing&&Sn.empty&&(Bt.start!=Bt.endB||it.input.lastChromeDelete<Date.now()-100)&&(Sn.head==en||Sn.head==dn.mapping.map(tn)-1)||ie$1&&Sn.empty&&Sn.head==en)&&dn.setSelection(Sn)}return ct&&dn.setMeta("composition",ct),dn.scrollIntoView()},an;if(Kt)if(Ht.pos==Yt.pos){ie$1&&ie_version<=11&&Ht.parentOffset==0&&(it.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(it),20));let un=on(it.state.tr.delete(en,tn)),dn=Tt.resolve(Bt.start).marksAcross(Tt.resolve(Bt.endA));dn&&un.ensureMarks(dn),it.dispatch(un)}else if(Bt.endA==Bt.endB&&(an=isMarkChange(Ht.parent.content.cut(Ht.parentOffset,Yt.parentOffset),zt.parent.content.cut(zt.parentOffset,Bt.endA-zt.start())))){let un=on(it.state.tr);an.type=="add"?un.addMark(en,tn,an.mark):un.removeMark(en,tn,an.mark),it.dispatch(un)}else if(Ht.parent.child(Ht.index()).isText&&Ht.index()==Yt.index()-(Yt.textOffset?0:1)){let un=Ht.parent.textBetween(Ht.parentOffset,Yt.parentOffset),dn=()=>on(it.state.tr.insertText(un,en,tn));it.someProp("handleTextInput",Sn=>Sn(it,en,tn,un,dn))||it.dispatch(dn())}else it.dispatch(on());else it.dispatch(on())}function resolveSelection(it,g,et){return Math.max(et.anchor,et.head)>g.content.size?null:selectionBetween(it,g.resolve(et.anchor),g.resolve(et.head))}function isMarkChange(it,g){let et=it.firstChild.marks,ot=g.firstChild.marks,ut=et,ct=ot,dt,ft,St;for(let Tt=0;Tt<ot.length;Tt++)ut=ot[Tt].removeFromSet(ut);for(let Tt=0;Tt<et.length;Tt++)ct=et[Tt].removeFromSet(ct);if(ut.length==1&&ct.length==0)ft=ut[0],dt="add",St=Tt=>Tt.mark(ft.addToSet(Tt.marks));else if(ut.length==0&&ct.length==1)ft=ct[0],dt="remove",St=Tt=>Tt.mark(ft.removeFromSet(Tt.marks));else return null;let kt=[];for(let Tt=0;Tt<g.childCount;Tt++)kt.push(St(g.child(Tt)));if(Fragment.from(kt).eq(it))return{mark:ft,type:dt}}function looksLikeBackspace(it,g,et,ot,ut){if(et-g<=ut.pos-ot.pos||skipClosingAndOpening(ot,!0,!1)<ut.pos)return!1;let ct=it.resolve(g);if(!ot.parent.isTextblock){let ft=ct.nodeAfter;return ft!=null&&et==g+ft.nodeSize}if(ct.parentOffset<ct.parent.content.size||!ct.parent.isTextblock)return!1;let dt=it.resolve(skipClosingAndOpening(ct,!0,!0));return!dt.parent.isTextblock||dt.pos>et||skipClosingAndOpening(dt,!0,!1)<et?!1:ot.parent.content.cut(ot.parentOffset).eq(dt.parent.content)}function skipClosingAndOpening(it,g,et){let ot=it.depth,ut=g?it.end():it.pos;for(;ot>0&&(g||it.indexAfter(ot)==it.node(ot).childCount);)ot--,ut++,g=!1;if(et){let ct=it.node(ot).maybeChild(it.indexAfter(ot));for(;ct&&!ct.isLeaf;)ct=ct.firstChild,ut++}return ut}function findDiff(it,g,et,ot,ut){let ct=it.findDiffStart(g,et);if(ct==null)return null;let{a:dt,b:ft}=it.findDiffEnd(g,et+it.size,et+g.size);if(ut=="end"){let St=Math.max(0,ct-Math.min(dt,ft));ot-=dt+St-ct}if(dt<ct&&it.size<g.size){let St=ot<=ct&&ot>=dt?ct-ot:0;ct-=St,ct&&ct<g.size&&isSurrogatePair(g.textBetween(ct-1,ct+1))&&(ct+=St?1:-1),ft=ct+(ft-dt),dt=ct}else if(ft<ct){let St=ot<=ct&&ot>=ft?ct-ot:0;ct-=St,ct&&ct<it.size&&isSurrogatePair(it.textBetween(ct-1,ct+1))&&(ct+=St?1:-1),dt=ct+(dt-ft),ft=ct}return{start:ct,endA:dt,endB:ft}}function isSurrogatePair(it){if(it.length!=2)return!1;let g=it.charCodeAt(0),et=it.charCodeAt(1);return g>=56320&&g<=57343&&et>=55296&&et<=56319}class EditorView{constructor(g,et){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=et,this.state=et.state,this.directPlugins=et.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(ot,ut,ct,dt)=>readDOMChange(this,ot,ut,ct,dt)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let et in g)this._props[et]=g[et];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let et=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,et)}setProps(g){let et={};for(let ot in this._props)et[ot]=this._props[ot];et.state=this.state;for(let ot in g)et[ot]=g[ot];this.update(et)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,et){var ot;let ut=this.state,ct=!1,dt=!1;g.storedMarks&&this.composing&&(clearComposition(this),dt=!0),this.state=g;let ft=ut.plugins!=g.plugins||this._props.plugins!=et.plugins;if(ft||this._props.plugins!=et.plugins||this._props.nodeViews!=et.nodeViews){let Ft=buildNodeViews(this);changedNodeViews(Ft,this.nodeViews)&&(this.nodeViews=Ft,ct=!0)}(ft||et.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let St=viewDecorations(this),kt=computeDocDeco(this),Tt=ut.plugins!=g.plugins&&!ut.doc.eq(g.doc)?"reset":g.scrollToSelection>ut.scrollToSelection?"to selection":"preserve",Rt=ct||!this.docView.matchesNode(g.doc,kt,St);(Rt||!g.selection.eq(ut.selection))&&(dt=!0);let jt=Tt=="preserve"&&dt&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(dt){this.domObserver.stop();let Ft=Rt&&(ie$1||chrome)&&!this.composing&&!ut.selection.empty&&!g.selection.empty&&selectionContextChanged(ut.selection,g.selection);if(Rt){let Bt=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(ct||!this.docView.update(g.doc,kt,St,this))&&(this.docView.updateOuterDeco(kt),this.docView.destroy(),this.docView=docViewDesc(g.doc,kt,St,this.dom,this)),Bt&&!this.trackWrites&&(Ft=!0)}Ft||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,Ft):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ut),!((ot=this.dragging)===null||ot===void 0)&&ot.node&&!ut.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,ut),Tt=="reset"?this.dom.scrollTop=0:Tt=="to selection"?this.scrollToSelection():jt&&resetScrollPos(jt)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!(!g||!this.dom.contains(g.nodeType==1?g:g.parentNode))){if(!this.someProp("handleScrollToSelection",et=>et(this)))if(this.state.selection instanceof NodeSelection){let et=this.docView.domAfterPos(this.state.selection.from);et.nodeType==1&&scrollRectIntoView(this,et.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let et=0;et<this.directPlugins.length;et++){let ot=this.directPlugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}for(let et=0;et<this.state.plugins.length;et++){let ot=this.state.plugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}}else for(let et=0;et<this.pluginViews.length;et++){let ot=this.pluginViews[et];ot.update&&ot.update(this,g)}}updateDraggedNode(g,et){let ot=g.node,ut=-1;if(this.state.doc.nodeAt(ot.from)==ot.node)ut=ot.from;else{let ct=ot.from+(this.state.doc.content.size-et.doc.content.size);(ct>0&&this.state.doc.nodeAt(ct))==ot.node&&(ut=ct)}this.dragging=new Dragging(g.slice,g.move,ut<0?void 0:NodeSelection.create(this.state.doc,ut))}someProp(g,et){let ot=this._props&&this._props[g],ut;if(ot!=null&&(ut=et?et(ot):ot))return ut;for(let dt=0;dt<this.directPlugins.length;dt++){let ft=this.directPlugins[dt].props[g];if(ft!=null&&(ut=et?et(ft):ft))return ut}let ct=this.state.plugins;if(ct)for(let dt=0;dt<ct.length;dt++){let ft=ct[dt].props[g];if(ft!=null&&(ut=et?et(ft):ft))return ut}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let et=this.dom.parentNode;et;et=et.parentNode)if(et.nodeType==9||et.nodeType==11&&et.host)return et.getSelection||(Object.getPrototypeOf(et).getSelection=()=>et.ownerDocument.getSelection()),this._root=et}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,et=1){return coordsAtPos(this,g,et)}domAtPos(g,et=0){return this.docView.domFromPos(g,et)}nodeDOM(g){let et=this.docView.descAt(g);return et?et.nodeDOM:null}posAtDOM(g,et,ot=-1){let ut=this.docView.posFromDOM(g,et,ot);if(ut==null)throw new RangeError("DOM position not inside the editor");return ut}endOfTextblock(g,et){return endOfTextblock(this,et||this.state,g)}pasteHTML(g,et){return doPaste(this,"",g,!1,et||new ClipboardEvent("paste"))}pasteText(g,et){return doPaste(this,g,null,!0,et||new ClipboardEvent("paste"))}serializeForClipboard(g){return serializeForClipboard(this,g)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(it){let g=this._props.dispatchTransaction;g?g.call(this,it):this.updateState(this.state.apply(it))};function computeDocDeco(it){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(it.editable),it.someProp("attributes",et=>{if(typeof et=="function"&&(et=et(it.state)),et)for(let ot in et)ot=="class"?g.class+=" "+et[ot]:ot=="style"?g.style=(g.style?g.style+";":"")+et[ot]:!g[ot]&&ot!="contenteditable"&&ot!="nodeName"&&(g[ot]=String(et[ot]))}),g.translate||(g.translate="no"),[Decoration.node(0,it.state.doc.content.size,g)]}function updateCursorWrapper(it){if(it.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),it.cursorWrapper={dom:g,deco:Decoration.widget(it.state.selection.from,g,{raw:!0,marks:it.markCursor})}}else it.cursorWrapper=null}function getEditable(it){return!it.someProp("editable",g=>g(it.state)===!1)}function selectionContextChanged(it,g){let et=Math.min(it.$anchor.sharedDepth(it.head),g.$anchor.sharedDepth(g.head));return it.$anchor.start(et)!=g.$anchor.start(et)}function buildNodeViews(it){let g=Object.create(null);function et(ot){for(let ut in ot)Object.prototype.hasOwnProperty.call(g,ut)||(g[ut]=ot[ut])}return it.someProp("nodeViews",et),it.someProp("markViews",et),g}function changedNodeViews(it,g){let et=0,ot=0;for(let ut in it){if(it[ut]!=g[ut])return!0;et++}for(let ut in g)ot++;return et!=ot}function checkStateComponent(it){if(it.spec.state||it.spec.filterTransaction||it.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(it){var g=mac$1&&it.metaKey&&it.shiftKey&&!it.ctrlKey&&!it.altKey||ie&&it.shiftKey&&it.key&&it.key.length==1||it.key=="Unidentified",et=!g&&it.key||(it.shiftKey?shift:base)[it.keyCode]||it.key||"Unidentified";return et=="Esc"&&(et="Escape"),et=="Del"&&(et="Delete"),et=="Left"&&(et="ArrowLeft"),et=="Up"&&(et="ArrowUp"),et=="Right"&&(et="ArrowRight"),et=="Down"&&(et="ArrowDown"),et}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(it){let g=it.split(/-(?!$)/),et=g[g.length-1];et=="Space"&&(et=" ");let ot,ut,ct,dt;for(let ft=0;ft<g.length-1;ft++){let St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ut=!0;else if(/^s(hift)?$/i.test(St))ct=!0;else if(/^mod$/i.test(St))mac?dt=!0:ut=!0;else throw new Error("Unrecognized modifier name: "+St)}return ot&&(et="Alt-"+et),ut&&(et="Ctrl-"+et),dt&&(et="Meta-"+et),ct&&(et="Shift-"+et),et}function normalize(it){let g=Object.create(null);for(let et in it)g[normalizeKeyName$1(et)]=it[et];return g}function modifiers(it,g,et=!0){return g.altKey&&(it="Alt-"+it),g.ctrlKey&&(it="Ctrl-"+it),g.metaKey&&(it="Meta-"+it),et&&g.shiftKey&&(it="Shift-"+it),it}function keymap(it){return new Plugin({props:{handleKeyDown:keydownHandler(it)}})}function keydownHandler(it){let g=normalize(it);return function(et,ot){let ut=keyName(ot),ct,dt=g[modifiers(ut,ot)];if(dt&&dt(et.state,et.dispatch,et))return!0;if(ut.length==1&&ut!=" "){if(ot.shiftKey){let ft=g[modifiers(ut,ot,!1)];if(ft&&ft(et.state,et.dispatch,et))return!0}if((ot.altKey||ot.metaKey||ot.ctrlKey)&&!(windows&&ot.ctrlKey&&ot.altKey)&&(ct=base[ot.keyCode])&&ct!=ut){let ft=g[modifiers(ct,ot)];if(ft&&ft(et.state,et.dispatch,et))return!0}}return!1}}var __defProp$2=Object.defineProperty,__export$1=(it,g)=>{for(var et in g)__defProp$2(it,et,{get:g[et],enumerable:!0})};function createChainableState(it){const{state:g,transaction:et}=it;let{selection:ot}=et,{doc:ut}=et,{storedMarks:ct}=et;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return ct},get selection(){return ot},get doc(){return ut},get tr(){return ot=et.selection,ut=et.doc,ct=et.storedMarks,et}}}var CommandManager$1=class{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:et,state:ot}=this,{view:ut}=et,{tr:ct}=ot,dt=this.buildProps(ct);return Object.fromEntries(Object.entries(g).map(([ft,St])=>[ft,(...Tt)=>{const Rt=St(...Tt)(dt);return!ct.getMeta("preventDispatch")&&!this.hasCustomState&&ut.dispatch(ct),Rt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,et=!0){const{rawCommands:ot,editor:ut,state:ct}=this,{view:dt}=ut,ft=[],St=!!g,kt=g||ct.tr,Tt=()=>(!St&&et&&!kt.getMeta("preventDispatch")&&!this.hasCustomState&&dt.dispatch(kt),ft.every(jt=>jt===!0)),Rt={...Object.fromEntries(Object.entries(ot).map(([jt,Ft])=>[jt,(...Ht)=>{const Yt=this.buildProps(kt,et),zt=Ft(...Ht)(Yt);return ft.push(zt),Rt}])),run:Tt};return Rt}createCan(g){const{rawCommands:et,state:ot}=this,ut=!1,ct=g||ot.tr,dt=this.buildProps(ct,ut);return{...Object.fromEntries(Object.entries(et).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)({...dt,dispatch:void 0})])),chain:()=>this.createChain(ct,ut)}}buildProps(g,et=!0){const{rawCommands:ot,editor:ut,state:ct}=this,{view:dt}=ut,ft={tr:g,editor:ut,view:dt,state:createChainableState({state:ct,transaction:g}),dispatch:et?()=>{}:void 0,chain:()=>this.createChain(g,et),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(ot).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)(ft)]))}};return ft}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:it,view:g})=>(requestAnimationFrame(()=>{var et;it.isDestroyed||(g.dom.blur(),(et=window==null?void 0:window.getSelection())==null||et.removeAllRanges())}),!0),clearContent=(it=!0)=>({commands:g})=>g.setContent("",{emitUpdate:it}),clearNodes=()=>({state:it,tr:g,dispatch:et})=>{const{selection:ot}=g,{ranges:ut}=ot;return et&&ut.forEach(({$from:ct,$to:dt})=>{it.doc.nodesBetween(ct.pos,dt.pos,(ft,St)=>{if(ft.type.isText)return;const{doc:kt,mapping:Tt}=g,Rt=kt.resolve(Tt.map(St)),jt=kt.resolve(Tt.map(St+ft.nodeSize)),Ft=Rt.blockRange(jt);if(!Ft)return;const Bt=liftTarget(Ft);if(ft.type.isTextblock){const{defaultType:Ht}=Rt.parent.contentMatchAt(Rt.index());g.setNodeMarkup(Ft.start,Ht)}(Bt||Bt===0)&&g.lift(Ft,Bt)})}),!0},command=it=>g=>it(g),createParagraphNear=()=>({state:it,dispatch:g})=>createParagraphNear$1(it,g),cut=(it,g)=>({editor:et,tr:ot})=>{const{state:ut}=et,ct=ut.doc.slice(it.from,it.to);ot.deleteRange(it.from,it.to);const dt=ot.mapping.map(g);return ot.insert(dt,ct.content),ot.setSelection(new TextSelection(ot.doc.resolve(Math.max(dt-1,0)))),!0},deleteCurrentNode=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,ot=et.$anchor.node();if(ot.content.size>0)return!1;const ut=it.selection.$anchor;for(let ct=ut.depth;ct>0;ct-=1)if(ut.node(ct).type===ot.type){if(g){const ft=ut.before(ct),St=ut.after(ct);it.delete(ft,St).scrollIntoView()}return!0}return!1};function getNodeType(it,g){if(typeof it=="string"){if(!g.nodes[it])throw Error(`There is no node type named '${it}'. Maybe you forgot to add the extension?`);return g.nodes[it]}return it}var deleteNode=it=>({tr:g,state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema),ct=g.selection.$anchor;for(let dt=ct.depth;dt>0;dt-=1)if(ct.node(dt).type===ut){if(ot){const St=ct.before(dt),kt=ct.after(dt);g.delete(St,kt).scrollIntoView()}return!0}return!1},deleteRange=it=>({tr:g,dispatch:et})=>{const{from:ot,to:ut}=it;return et&&g.delete(ot,ut),!0},deleteSelection=()=>({state:it,dispatch:g})=>deleteSelection$1(it,g),enter=()=>({commands:it})=>it.keyboardShortcut("Enter"),exitCode=()=>({state:it,dispatch:g})=>exitCode$1(it,g);function isRegExp(it){return Object.prototype.toString.call(it)==="[object RegExp]"}function objectIncludes(it,g,et={strict:!0}){const ot=Object.keys(g);return ot.length?ot.every(ut=>et.strict?g[ut]===it[ut]:isRegExp(g[ut])?g[ut].test(it[ut]):g[ut]===it[ut]):!0}function findMarkInSet(it,g,et={}){return it.find(ot=>ot.type===g&&objectIncludes(Object.fromEntries(Object.keys(et).map(ut=>[ut,ot.attrs[ut]])),et))}function isMarkInSet(it,g,et={}){return!!findMarkInSet(it,g,et)}function getMarkRange(it,g,et){var ot;if(!it||!g)return;let ut=it.parent.childAfter(it.parentOffset);if((!ut.node||!ut.node.marks.some(Tt=>Tt.type===g))&&(ut=it.parent.childBefore(it.parentOffset)),!ut.node||!ut.node.marks.some(Tt=>Tt.type===g)||(et=et||((ot=ut.node.marks[0])==null?void 0:ot.attrs),!findMarkInSet([...ut.node.marks],g,et)))return;let dt=ut.index,ft=it.start()+ut.offset,St=dt+1,kt=ft+ut.node.nodeSize;for(;dt>0&&isMarkInSet([...it.parent.child(dt-1).marks],g,et);)dt-=1,ft-=it.parent.child(dt).nodeSize;for(;St<it.parent.childCount&&isMarkInSet([...it.parent.child(St).marks],g,et);)kt+=it.parent.child(St).nodeSize,St+=1;return{from:ft,to:kt}}function getMarkType(it,g){if(typeof it=="string"){if(!g.marks[it])throw Error(`There is no mark type named '${it}'. Maybe you forgot to add the extension?`);return g.marks[it]}return it}var extendMarkRange=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{const ct=getMarkType(it,ot.schema),{doc:dt,selection:ft}=et,{$from:St,from:kt,to:Tt}=ft;if(ut){const Rt=getMarkRange(St,ct,g);if(Rt&&Rt.from<=kt&&Rt.to>=Tt){const jt=TextSelection.create(dt,Rt.from,Rt.to);et.setSelection(jt)}}return!0},first=it=>g=>{const et=typeof it=="function"?it(g):it;for(let ot=0;ot<et.length;ot+=1)if(et[ot](g))return!0;return!1};function isTextSelection(it){return it instanceof TextSelection}function minMax(it=0,g=0,et=0){return Math.min(Math.max(it,g),et)}function resolveFocusPosition(it,g=null){if(!g)return null;const et=Selection.atStart(it),ot=Selection.atEnd(it);if(g==="start"||g===!0)return et;if(g==="end")return ot;const ut=et.from,ct=ot.to;return g==="all"?TextSelection.create(it,minMax(0,ut,ct),minMax(it.content.size,ut,ct)):TextSelection.create(it,minMax(g,ut,ct),minMax(g,ut,ct))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(it=null,g={})=>({editor:et,view:ot,tr:ut,dispatch:ct})=>{g={scrollIntoView:!0,...g};const dt=()=>{(isiOS()||isAndroid())&&ot.dom.focus(),requestAnimationFrame(()=>{et.isDestroyed||(ot.focus(),g!=null&&g.scrollIntoView&&et.commands.scrollIntoView())})};if(ot.hasFocus()&&it===null||it===!1)return!0;if(ct&&it===null&&!isTextSelection(et.state.selection))return dt(),!0;const ft=resolveFocusPosition(ut.doc,it)||et.state.selection,St=et.state.selection.eq(ft);return ct&&(St||ut.setSelection(ft),St&&ut.storedMarks&&ut.setStoredMarks(ut.storedMarks),dt()),!0},forEach=(it,g)=>et=>it.every((ot,ut)=>g(ot,{...et,index:ut})),insertContent=(it,g)=>({tr:et,commands:ot})=>ot.insertContentAt({from:et.selection.from,to:et.selection.to},it,g),removeWhitespaces=it=>{const g=it.childNodes;for(let et=g.length-1;et>=0;et-=1){const ot=g[et];ot.nodeType===3&&ot.nodeValue&&/^(\n\s\s|\n)$/.test(ot.nodeValue)?it.removeChild(ot):ot.nodeType===1&&removeWhitespaces(ot)}return it};function elementFromString(it){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const g=`<body>${it}</body>`,et=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(et)}function createNodeFromContent(it,g,et){if(it instanceof Node$2||it instanceof Fragment)return it;et={slice:!0,parseOptions:{},...et};const ot=typeof it=="object"&&it!==null,ut=typeof it=="string";if(ot)try{if(Array.isArray(it)&&it.length>0)return Fragment.fromArray(it.map(ft=>g.nodeFromJSON(ft)));const dt=g.nodeFromJSON(it);return et.errorOnInvalidContent&&dt.check(),dt}catch(ct){if(et.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:ct});return console.warn("[tiptap warn]: Invalid content.","Passed value:",it,"Error:",ct),createNodeFromContent("",g,et)}if(ut){if(et.errorOnInvalidContent){let dt=!1,ft="";const St=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:kt=>(dt=!0,ft=typeof kt=="string"?kt:kt.outerHTML,null)}]}})});if(et.slice?DOMParser.fromSchema(St).parseSlice(elementFromString(it),et.parseOptions):DOMParser.fromSchema(St).parse(elementFromString(it),et.parseOptions),et.errorOnInvalidContent&&dt)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ft}`)})}const ct=DOMParser.fromSchema(g);return et.slice?ct.parseSlice(elementFromString(it),et.parseOptions).content:ct.parse(elementFromString(it),et.parseOptions)}return createNodeFromContent("",g,et)}function selectionToInsertionEnd(it,g,et){const ot=it.steps.length-1;if(ot<g)return;const ut=it.steps[ot];if(!(ut instanceof ReplaceStep||ut instanceof ReplaceAroundStep))return;const ct=it.mapping.maps[ot];let dt=0;ct.forEach((ft,St,kt,Tt)=>{dt===0&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}var isFragment=it=>!("type"in it),insertContentAt=(it,g,et)=>({tr:ot,dispatch:ut,editor:ct})=>{var dt;if(ut){et={parseOptions:ct.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...et};let ft;const St=Yt=>{ct.emit("contentError",{editor:ct,error:Yt,disableCollaboration:()=>{"collaboration"in ct.storage&&typeof ct.storage.collaboration=="object"&&ct.storage.collaboration&&(ct.storage.collaboration.isDisabled=!0)}})},kt={preserveWhitespace:"full",...et.parseOptions};if(!et.errorOnInvalidContent&&!ct.options.enableContentCheck&&ct.options.emitContentError)try{createNodeFromContent(g,ct.schema,{parseOptions:kt,errorOnInvalidContent:!0})}catch(Yt){St(Yt)}try{ft=createNodeFromContent(g,ct.schema,{parseOptions:kt,errorOnInvalidContent:(dt=et.errorOnInvalidContent)!=null?dt:ct.options.enableContentCheck})}catch(Yt){return St(Yt),!1}let{from:Tt,to:Rt}=typeof it=="number"?{from:it,to:it}:{from:it.from,to:it.to},jt=!0,Ft=!0;if((isFragment(ft)?ft:[ft]).forEach(Yt=>{Yt.check(),jt=jt?Yt.isText&&Yt.marks.length===0:!1,Ft=Ft?Yt.isBlock:!1}),Tt===Rt&&Ft){const{parent:Yt}=ot.doc.resolve(Tt);Yt.isTextblock&&!Yt.type.spec.code&&!Yt.childCount&&(Tt-=1,Rt+=1)}let Ht;if(jt){if(Array.isArray(g))Ht=g.map(Yt=>Yt.text||"").join("");else if(g instanceof Fragment){let Yt="";g.forEach(zt=>{zt.text&&(Yt+=zt.text)}),Ht=Yt}else typeof g=="object"&&g&&g.text?Ht=g.text:Ht=g;ot.insertText(Ht,Tt,Rt)}else{Ht=ft;const Yt=ot.doc.resolve(Tt),zt=Yt.node(),Kt=Yt.parentOffset===0,en=zt.isText||zt.isTextblock,tn=zt.content.size>0;Kt&&en&&tn&&(Tt=Math.max(0,Tt-1)),ot.replaceWith(Tt,Rt,Ht)}et.updateSelection&&selectionToInsertionEnd(ot,ot.steps.length-1,-1),et.applyInputRules&&ot.setMeta("applyInputRules",{from:Tt,text:Ht}),et.applyPasteRules&&ot.setMeta("applyPasteRules",{from:Tt,text:Ht})}return!0},joinUp=()=>({state:it,dispatch:g})=>joinUp$1(it,g),joinDown=()=>({state:it,dispatch:g})=>joinDown$1(it,g),joinBackward=()=>({state:it,dispatch:g})=>joinBackward$1(it,g),joinForward=()=>({state:it,dispatch:g})=>joinForward$1(it,g),joinItemBackward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,-1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinItemForward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinTextblockBackward=()=>({state:it,dispatch:g})=>joinTextblockBackward$1(it,g),joinTextblockForward=()=>({state:it,dispatch:g})=>joinTextblockForward$1(it,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(it){const g=it.split(/-(?!$)/);let et=g[g.length-1];et==="Space"&&(et=" ");let ot,ut,ct,dt;for(let ft=0;ft<g.length-1;ft+=1){const St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ut=!0;else if(/^s(hift)?$/i.test(St))ct=!0;else if(/^mod$/i.test(St))isiOS()||isMacOS()?dt=!0:ut=!0;else throw new Error(`Unrecognized modifier name: ${St}`)}return ot&&(et=`Alt-${et}`),ut&&(et=`Ctrl-${et}`),dt&&(et=`Meta-${et}`),ct&&(et=`Shift-${et}`),et}var keyboardShortcut=it=>({editor:g,view:et,tr:ot,dispatch:ut})=>{const ct=normalizeKeyName(it).split(/-(?!$)/),dt=ct.find(kt=>!["Alt","Ctrl","Meta","Shift"].includes(kt)),ft=new KeyboardEvent("keydown",{key:dt==="Space"?" ":dt,altKey:ct.includes("Alt"),ctrlKey:ct.includes("Ctrl"),metaKey:ct.includes("Meta"),shiftKey:ct.includes("Shift"),bubbles:!0,cancelable:!0}),St=g.captureTransaction(()=>{et.someProp("handleKeyDown",kt=>kt(et,ft))});return St==null||St.steps.forEach(kt=>{const Tt=kt.map(ot.mapping);Tt&&ut&&ot.maybeStep(Tt)}),!0};function isNodeActive(it,g,et={}){const{from:ot,to:ut,empty:ct}=it.selection,dt=g?getNodeType(g,it.schema):null,ft=[];it.doc.nodesBetween(ot,ut,(Rt,jt)=>{if(Rt.isText)return;const Ft=Math.max(ot,jt),Bt=Math.min(ut,jt+Rt.nodeSize);ft.push({node:Rt,from:Ft,to:Bt})});const St=ut-ot,kt=ft.filter(Rt=>dt?dt.name===Rt.node.type.name:!0).filter(Rt=>objectIncludes(Rt.node.attrs,et,{strict:!1}));return ct?!!kt.length:kt.reduce((Rt,jt)=>Rt+jt.to-jt.from,0)>=St}var lift=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return isNodeActive(et,ut,g)?lift$1(et,ot):!1},liftEmptyBlock=()=>({state:it,dispatch:g})=>liftEmptyBlock$1(it,g),liftListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return liftListItem$1(ot)(g,et)},newlineInCode=()=>({state:it,dispatch:g})=>newlineInCode$1(it,g);function getSchemaTypeNameByName(it,g){return g.nodes[it]?"node":g.marks[it]?"mark":null}function deleteProps(it,g){const et=typeof g=="string"?[g]:g;return Object.keys(it).reduce((ot,ut)=>(et.includes(ut)||(ot[ut]=it[ut]),ot),{})}var resetAttributes=(it,g)=>({tr:et,state:ot,dispatch:ut})=>{let ct=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ct=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ut&&et.selection.ranges.forEach(St=>{ot.doc.nodesBetween(St.$from.pos,St.$to.pos,(kt,Tt)=>{ct&&ct===kt.type&&et.setNodeMarkup(Tt,void 0,deleteProps(kt.attrs,g)),dt&&kt.marks.length&&kt.marks.forEach(Rt=>{dt===Rt.type&&et.addMark(Tt,Tt+kt.nodeSize,dt.create(deleteProps(Rt.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:it,dispatch:g})=>(g&&it.scrollIntoView(),!0),selectAll=()=>({tr:it,dispatch:g})=>{if(g){const et=new AllSelection(it.doc);it.setSelection(et)}return!0},selectNodeBackward=()=>({state:it,dispatch:g})=>selectNodeBackward$1(it,g),selectNodeForward=()=>({state:it,dispatch:g})=>selectNodeForward$1(it,g),selectParentNode=()=>({state:it,dispatch:g})=>selectParentNode$1(it,g),selectTextblockEnd=()=>({state:it,dispatch:g})=>selectTextblockEnd$1(it,g),selectTextblockStart=()=>({state:it,dispatch:g})=>selectTextblockStart$1(it,g);function createDocument(it,g,et={},ot={}){return createNodeFromContent(it,g,{slice:!1,parseOptions:et,errorOnInvalidContent:ot.errorOnInvalidContent})}var setContent=(it,{errorOnInvalidContent:g,emitUpdate:et=!0,parseOptions:ot={}}={})=>({editor:ut,tr:ct,dispatch:dt,commands:ft})=>{const{doc:St}=ct;if(ot.preserveWhitespace!=="full"){const kt=createDocument(it,ut.schema,ot,{errorOnInvalidContent:g??ut.options.enableContentCheck});return dt&&ct.replaceWith(0,St.content.size,kt).setMeta("preventUpdate",!et),!0}return dt&&ct.setMeta("preventUpdate",!et),ft.insertContentAt({from:0,to:St.content.size},it,{parseOptions:ot,errorOnInvalidContent:g??ut.options.enableContentCheck})};function getMarkAttributes(it,g){const et=getMarkType(g,it.schema),{from:ot,to:ut,empty:ct}=it.selection,dt=[];ct?(it.storedMarks&&dt.push(...it.storedMarks),dt.push(...it.selection.$head.marks())):it.doc.nodesBetween(ot,ut,St=>{dt.push(...St.marks)});const ft=dt.find(St=>St.type.name===et.name);return ft?{...ft.attrs}:{}}function combineTransactionSteps(it,g){const et=new Transform$1(it);return g.forEach(ot=>{ot.steps.forEach(ut=>{et.step(ut)})}),et}function defaultBlockAt(it){for(let g=0;g<it.edgeCount;g+=1){const{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}function findChildrenInRange(it,g,et){const ot=[];return it.nodesBetween(g.from,g.to,(ut,ct)=>{et(ut)&&ot.push({node:ut,pos:ct})}),ot}function findParentNodeClosestToPos(it,g){for(let et=it.depth;et>0;et-=1){const ot=it.node(et);if(g(ot))return{pos:et>0?it.before(et):0,start:it.start(et),depth:et,node:ot}}}function findParentNode(it){return g=>findParentNodeClosestToPos(g.$from,it)}function getExtensionField(it,g,et){return it.config[g]===void 0&&it.parent?getExtensionField(it.parent,g,et):typeof it.config[g]=="function"?it.config[g].bind({...et,parent:it.parent?getExtensionField(it.parent,g,et):null}):it.config[g]}function flattenExtensions(it){return it.map(g=>{const et={name:g.name,options:g.options,storage:g.storage},ot=getExtensionField(g,"addExtensions",et);return ot?[g,...flattenExtensions(ot())]:g}).flat(10)}function getHTMLFromFragment(it,g){const et=DOMSerializer.fromSchema(g).serializeFragment(it),ut=document.implementation.createHTMLDocument().createElement("div");return ut.appendChild(et),ut.innerHTML}function isFunction(it){return typeof it=="function"}function callOrReturn(it,g=void 0,...et){return isFunction(it)?g?it.bind(g)(...et):it(...et):it}function isEmptyObject(it={}){return Object.keys(it).length===0&&it.constructor===Object}function splitExtensions(it){const g=it.filter(ut=>ut.type==="extension"),et=it.filter(ut=>ut.type==="node"),ot=it.filter(ut=>ut.type==="mark");return{baseExtensions:g,nodeExtensions:et,markExtensions:ot}}function getAttributesFromExtensions(it){const g=[],{nodeExtensions:et,markExtensions:ot}=splitExtensions(it),ut=[...et,...ot],ct={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return it.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage,extensions:ut},St=getExtensionField(dt,"addGlobalAttributes",ft);if(!St)return;St().forEach(Tt=>{Tt.types.forEach(Rt=>{Object.entries(Tt.attributes).forEach(([jt,Ft])=>{g.push({type:Rt,name:jt,attribute:{...ct,...Ft}})})})})}),ut.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage},St=getExtensionField(dt,"addAttributes",ft);if(!St)return;const kt=St();Object.entries(kt).forEach(([Tt,Rt])=>{const jt={...ct,...Rt};typeof(jt==null?void 0:jt.default)=="function"&&(jt.default=jt.default()),jt!=null&&jt.isRequired&&(jt==null?void 0:jt.default)===void 0&&delete jt.default,g.push({type:dt.name,name:Tt,attribute:jt})})}),g}function mergeAttributes(...it){return it.filter(g=>!!g).reduce((g,et)=>{const ot={...g};return Object.entries(et).forEach(([ut,ct])=>{if(!ot[ut]){ot[ut]=ct;return}if(ut==="class"){const ft=ct?String(ct).split(" "):[],St=ot[ut]?ot[ut].split(" "):[],kt=ft.filter(Tt=>!St.includes(Tt));ot[ut]=[...St,...kt].join(" ")}else if(ut==="style"){const ft=ct?ct.split(";").map(Tt=>Tt.trim()).filter(Boolean):[],St=ot[ut]?ot[ut].split(";").map(Tt=>Tt.trim()).filter(Boolean):[],kt=new Map;St.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(Rt,jt)}),ft.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(Rt,jt)}),ot[ut]=Array.from(kt.entries()).map(([Tt,Rt])=>`${Tt}: ${Rt}`).join("; ")}else ot[ut]=ct}),ot},{})}function getRenderedAttributes(it,g){return g.filter(et=>et.type===it.type.name).filter(et=>et.attribute.rendered).map(et=>et.attribute.renderHTML?et.attribute.renderHTML(it.attrs)||{}:{[et.name]:it.attrs[et.name]}).reduce((et,ot)=>mergeAttributes(et,ot),{})}function fromString(it){return typeof it!="string"?it:it.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(it):it==="true"?!0:it==="false"?!1:it}function injectExtensionAttributesToParseRule(it,g){return"style"in it?it:{...it,getAttrs:et=>{const ot=it.getAttrs?it.getAttrs(et):it.attrs;if(ot===!1)return!1;const ut=g.reduce((ct,dt)=>{const ft=dt.attribute.parseHTML?dt.attribute.parseHTML(et):fromString(et.getAttribute(dt.name));return ft==null?ct:{...ct,[dt.name]:ft}},{});return{...ot,...ut}}}}function cleanUpSchemaItem(it){return Object.fromEntries(Object.entries(it).filter(([g,et])=>g==="attrs"&&isEmptyObject(et)?!1:et!=null))}function getSchemaByResolvedExtensions(it,g){var et;const ot=getAttributesFromExtensions(it),{nodeExtensions:ut,markExtensions:ct}=splitExtensions(it),dt=(et=ut.find(kt=>getExtensionField(kt,"topNode")))==null?void 0:et.name,ft=Object.fromEntries(ut.map(kt=>{const Tt=ot.filter(zt=>zt.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((zt,Kt)=>{const en=getExtensionField(Kt,"extendNodeSchema",Rt);return{...zt,...en?en(kt):{}}},{}),Ft=cleanUpSchemaItem({...jt,content:callOrReturn(getExtensionField(kt,"content",Rt)),marks:callOrReturn(getExtensionField(kt,"marks",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),inline:callOrReturn(getExtensionField(kt,"inline",Rt)),atom:callOrReturn(getExtensionField(kt,"atom",Rt)),selectable:callOrReturn(getExtensionField(kt,"selectable",Rt)),draggable:callOrReturn(getExtensionField(kt,"draggable",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),whitespace:callOrReturn(getExtensionField(kt,"whitespace",Rt)),linebreakReplacement:callOrReturn(getExtensionField(kt,"linebreakReplacement",Rt)),defining:callOrReturn(getExtensionField(kt,"defining",Rt)),isolating:callOrReturn(getExtensionField(kt,"isolating",Rt)),attrs:Object.fromEntries(Tt.map(zt=>{var Kt,en;return[zt.name,{default:(Kt=zt==null?void 0:zt.attribute)==null?void 0:Kt.default,validate:(en=zt==null?void 0:zt.attribute)==null?void 0:en.validate}]}))}),Bt=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Bt&&(Ft.parseDOM=Bt.map(zt=>injectExtensionAttributesToParseRule(zt,Tt)));const Ht=getExtensionField(kt,"renderHTML",Rt);Ht&&(Ft.toDOM=zt=>Ht({node:zt,HTMLAttributes:getRenderedAttributes(zt,Tt)}));const Yt=getExtensionField(kt,"renderText",Rt);return Yt&&(Ft.toText=Yt),[kt.name,Ft]})),St=Object.fromEntries(ct.map(kt=>{const Tt=ot.filter(Yt=>Yt.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((Yt,zt)=>{const Kt=getExtensionField(zt,"extendMarkSchema",Rt);return{...Yt,...Kt?Kt(kt):{}}},{}),Ft=cleanUpSchemaItem({...jt,inclusive:callOrReturn(getExtensionField(kt,"inclusive",Rt)),excludes:callOrReturn(getExtensionField(kt,"excludes",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),spanning:callOrReturn(getExtensionField(kt,"spanning",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),attrs:Object.fromEntries(Tt.map(Yt=>{var zt,Kt;return[Yt.name,{default:(zt=Yt==null?void 0:Yt.attribute)==null?void 0:zt.default,validate:(Kt=Yt==null?void 0:Yt.attribute)==null?void 0:Kt.validate}]}))}),Bt=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Bt&&(Ft.parseDOM=Bt.map(Yt=>injectExtensionAttributesToParseRule(Yt,Tt)));const Ht=getExtensionField(kt,"renderHTML",Rt);return Ht&&(Ft.toDOM=Yt=>Ht({mark:Yt,HTMLAttributes:getRenderedAttributes(Yt,Tt)})),[kt.name,Ft]}));return new Schema({topNode:dt,nodes:ft,marks:St})}function findDuplicates(it){const g=it.filter((et,ot)=>it.indexOf(et)!==ot);return Array.from(new Set(g))}function sortExtensions(it){return it.sort((et,ot)=>{const ut=getExtensionField(et,"priority")||100,ct=getExtensionField(ot,"priority")||100;return ut>ct?-1:ut<ct?1:0})}function resolveExtensions(it){const g=sortExtensions(flattenExtensions(it)),et=findDuplicates(g.map(ot=>ot.name));return et.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${et.map(ot=>`'${ot}'`).join(", ")}]. This can lead to issues.`),g}function getTextBetween(it,g,et){const{from:ot,to:ut}=g,{blockSeparator:ct=`

`,textSerializers:dt={}}=et||{};let ft="";return it.nodesBetween(ot,ut,(St,kt,Tt,Rt)=>{var jt;St.isBlock&&kt>ot&&(ft+=ct);const Ft=dt==null?void 0:dt[St.type.name];if(Ft)return Tt&&(ft+=Ft({node:St,pos:kt,parent:Tt,index:Rt,range:g})),!1;St.isText&&(ft+=(jt=St==null?void 0:St.text)==null?void 0:jt.slice(Math.max(ot,kt)-kt,ut-kt))}),ft}function getText(it,g){const et={from:0,to:it.content.size};return getTextBetween(it,et,g)}function getTextSerializersFromSchema(it){return Object.fromEntries(Object.entries(it.nodes).filter(([,g])=>g.spec.toText).map(([g,et])=>[g,et.spec.toText]))}function getNodeAttributes(it,g){const et=getNodeType(g,it.schema),{from:ot,to:ut}=it.selection,ct=[];it.doc.nodesBetween(ot,ut,ft=>{ct.push(ft)});const dt=ct.reverse().find(ft=>ft.type.name===et.name);return dt?{...dt.attrs}:{}}function getAttributes$1(it,g){const et=getSchemaTypeNameByName(typeof g=="string"?g:g.name,it.schema);return et==="node"?getNodeAttributes(it,g):et==="mark"?getMarkAttributes(it,g):{}}function removeDuplicates(it,g=JSON.stringify){const et={};return it.filter(ot=>{const ut=g(ot);return Object.prototype.hasOwnProperty.call(et,ut)?!1:et[ut]=!0})}function simplifyChangedRanges(it){const g=removeDuplicates(it);return g.length===1?g:g.filter((et,ot)=>!g.filter((ct,dt)=>dt!==ot).some(ct=>et.oldRange.from>=ct.oldRange.from&&et.oldRange.to<=ct.oldRange.to&&et.newRange.from>=ct.newRange.from&&et.newRange.to<=ct.newRange.to))}function getChangedRanges(it){const{mapping:g,steps:et}=it,ot=[];return g.maps.forEach((ut,ct)=>{const dt=[];if(ut.ranges.length)ut.forEach((ft,St)=>{dt.push({from:ft,to:St})});else{const{from:ft,to:St}=et[ct];if(ft===void 0||St===void 0)return;dt.push({from:ft,to:St})}dt.forEach(({from:ft,to:St})=>{const kt=g.slice(ct).map(ft,-1),Tt=g.slice(ct).map(St),Rt=g.invert().map(kt,-1),jt=g.invert().map(Tt);ot.push({oldRange:{from:Rt,to:jt},newRange:{from:kt,to:Tt}})})}),simplifyChangedRanges(ot)}function getMarksBetween(it,g,et){const ot=[];return it===g?et.resolve(it).marks().forEach(ut=>{const ct=et.resolve(it),dt=getMarkRange(ct,ut.type);dt&&ot.push({mark:ut,...dt})}):et.nodesBetween(it,g,(ut,ct)=>{!ut||(ut==null?void 0:ut.nodeSize)===void 0||ot.push(...ut.marks.map(dt=>({from:ct,to:ct+ut.nodeSize,mark:dt})))}),ot}var getNodeAtPosition=(it,g,et,ot=20)=>{const ut=it.doc.resolve(et);let ct=ot,dt=null;for(;ct>0&&dt===null;){const ft=ut.node(ct);(ft==null?void 0:ft.type.name)===g?dt=ft:ct-=1}return[dt,ct]};function getSchemaTypeByName(it,g){return g.nodes[it]||g.marks[it]||null}function getSplittedAttributes(it,g,et){return Object.fromEntries(Object.entries(et).filter(([ot])=>{const ut=it.find(ct=>ct.type===g&&ct.name===ot);return ut?ut.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(it,g=500)=>{let et="";const ot=it.parentOffset;return it.parent.nodesBetween(Math.max(0,ot-g),ot,(ut,ct,dt,ft)=>{var St,kt;const Tt=((kt=(St=ut.type.spec).toText)==null?void 0:kt.call(St,{node:ut,pos:ct,parent:dt,index:ft}))||ut.textContent||"%leaf%";et+=ut.isAtom&&!ut.isText?Tt:Tt.slice(0,Math.max(0,ot-ct))}),et};function isMarkActive(it,g,et={}){const{empty:ot,ranges:ut}=it.selection,ct=g?getMarkType(g,it.schema):null;if(ot)return!!(it.storedMarks||it.selection.$from.marks()).filter(Rt=>ct?ct.name===Rt.type.name:!0).find(Rt=>objectIncludes(Rt.attrs,et,{strict:!1}));let dt=0;const ft=[];if(ut.forEach(({$from:Rt,$to:jt})=>{const Ft=Rt.pos,Bt=jt.pos;it.doc.nodesBetween(Ft,Bt,(Ht,Yt)=>{if(!Ht.isText&&!Ht.marks.length)return;const zt=Math.max(Ft,Yt),Kt=Math.min(Bt,Yt+Ht.nodeSize),en=Kt-zt;dt+=en,ft.push(...Ht.marks.map(tn=>({mark:tn,from:zt,to:Kt})))})}),dt===0)return!1;const St=ft.filter(Rt=>ct?ct.name===Rt.mark.type.name:!0).filter(Rt=>objectIncludes(Rt.mark.attrs,et,{strict:!1})).reduce((Rt,jt)=>Rt+jt.to-jt.from,0),kt=ft.filter(Rt=>ct?Rt.mark.type!==ct&&Rt.mark.type.excludes(ct):!0).reduce((Rt,jt)=>Rt+jt.to-jt.from,0);return(St>0?St+kt:St)>=dt}function isActive(it,g,et={}){if(!g)return isNodeActive(it,null,et)||isMarkActive(it,null,et);const ot=getSchemaTypeNameByName(g,it.schema);return ot==="node"?isNodeActive(it,g,et):ot==="mark"?isMarkActive(it,g,et):!1}var isAtEndOfNode=(it,g)=>{const{$from:et,$to:ot,$anchor:ut}=it.selection;if(g){const ct=findParentNode(ft=>ft.type.name===g)(it.selection);if(!ct)return!1;const dt=it.doc.resolve(ct.pos+1);return ut.pos+1===dt.end()}return!(ot.parentOffset<ot.parent.nodeSize-2||et.pos!==ot.pos)},isAtStartOfNode=it=>{const{$from:g,$to:et}=it.selection;return!(g.parentOffset>0||g.pos!==et.pos)};function isExtensionRulesEnabled(it,g){return Array.isArray(g)?g.some(et=>(typeof et=="string"?et:et.name)===it.name):g}function isList(it,g){const{nodeExtensions:et}=splitExtensions(g),ot=et.find(dt=>dt.name===it);if(!ot)return!1;const ut={name:ot.name,options:ot.options,storage:ot.storage},ct=callOrReturn(getExtensionField(ot,"group",ut));return typeof ct!="string"?!1:ct.split(" ").includes("list")}function isNodeEmpty(it,{checkChildren:g=!0,ignoreWhitespace:et=!1}={}){var ot;if(et){if(it.type.name==="hardBreak")return!0;if(it.isText)return/^\s*$/m.test((ot=it.text)!=null?ot:"")}if(it.isText)return!it.text;if(it.isAtom||it.isLeaf)return!1;if(it.content.childCount===0)return!0;if(g){let ut=!0;return it.content.forEach(ct=>{ut!==!1&&(isNodeEmpty(ct,{ignoreWhitespace:et,checkChildren:g})||(ut=!1))}),ut}return!1}function isNodeSelection(it){return it instanceof NodeSelection}function canSetMark(it,g,et){var ot;const{selection:ut}=g;let ct=null;if(isTextSelection(ut)&&(ct=ut.$cursor),ct){const ft=(ot=it.storedMarks)!=null?ot:ct.marks();return ct.parent.type.allowsMarkType(et)&&(!!et.isInSet(ft)||!ft.some(kt=>kt.type.excludes(et)))}const{ranges:dt}=ut;return dt.some(({$from:ft,$to:St})=>{let kt=ft.depth===0?it.doc.inlineContent&&it.doc.type.allowsMarkType(et):!1;return it.doc.nodesBetween(ft.pos,St.pos,(Tt,Rt,jt)=>{if(kt)return!1;if(Tt.isInline){const Ft=!jt||jt.type.allowsMarkType(et),Bt=!!et.isInSet(Tt.marks)||!Tt.marks.some(Ht=>Ht.type.excludes(et));kt=Ft&&Bt}return!kt}),kt})}var setMark=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{const{selection:ct}=et,{empty:dt,ranges:ft}=ct,St=getMarkType(it,ot.schema);if(ut)if(dt){const kt=getMarkAttributes(ot,St);et.addStoredMark(St.create({...kt,...g}))}else ft.forEach(kt=>{const Tt=kt.$from.pos,Rt=kt.$to.pos;ot.doc.nodesBetween(Tt,Rt,(jt,Ft)=>{const Bt=Math.max(Ft,Tt),Ht=Math.min(Ft+jt.nodeSize,Rt);jt.marks.find(zt=>zt.type===St)?jt.marks.forEach(zt=>{St===zt.type&&et.addMark(Bt,Ht,St.create({...zt.attrs,...g}))}):et.addMark(Bt,Ht,St.create(g))})});return canSetMark(ot,et,St)},setMeta=(it,g)=>({tr:et})=>(et.setMeta(it,g),!0),setNode=(it,g={})=>({state:et,dispatch:ot,chain:ut})=>{const ct=getNodeType(it,et.schema);let dt;return et.selection.$anchor.sameParent(et.selection.$head)&&(dt=et.selection.$anchor.parent.attrs),ct.isTextblock?ut().command(({commands:ft})=>setBlockType(ct,{...dt,...g})(et)?!0:ft.clearNodes()).command(({state:ft})=>setBlockType(ct,{...dt,...g})(ft,ot)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,ut=minMax(it,0,ot.content.size),ct=NodeSelection.create(ot,ut);g.setSelection(ct)}return!0},setTextSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,{from:ut,to:ct}=typeof it=="number"?{from:it,to:it}:it,dt=TextSelection.atStart(ot).from,ft=TextSelection.atEnd(ot).to,St=minMax(ut,dt,ft),kt=minMax(ct,dt,ft),Tt=TextSelection.create(ot,St,kt);g.setSelection(Tt)}return!0},sinkListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return sinkListItem$1(ot)(g,et)};function ensureMarks(it,g){const et=it.storedMarks||it.selection.$to.parentOffset&&it.selection.$from.marks();if(et){const ot=et.filter(ut=>g==null?void 0:g.includes(ut.type.name));it.tr.ensureMarks(ot)}}var splitBlock=({keepMarks:it=!0}={})=>({tr:g,state:et,dispatch:ot,editor:ut})=>{const{selection:ct,doc:dt}=g,{$from:ft,$to:St}=ct,kt=ut.extensionManager.attributes,Tt=getSplittedAttributes(kt,ft.node().type.name,ft.node().attrs);if(ct instanceof NodeSelection&&ct.node.isBlock)return!ft.parentOffset||!canSplit(dt,ft.pos)?!1:(ot&&(it&&ensureMarks(et,ut.extensionManager.splittableMarks),g.split(ft.pos).scrollIntoView()),!0);if(!ft.parent.isBlock)return!1;const Rt=St.parentOffset===St.parent.content.size,jt=ft.depth===0?void 0:defaultBlockAt(ft.node(-1).contentMatchAt(ft.indexAfter(-1)));let Ft=Rt&&jt?[{type:jt,attrs:Tt}]:void 0,Bt=canSplit(g.doc,g.mapping.map(ft.pos),1,Ft);if(!Ft&&!Bt&&canSplit(g.doc,g.mapping.map(ft.pos),1,jt?[{type:jt}]:void 0)&&(Bt=!0,Ft=jt?[{type:jt,attrs:Tt}]:void 0),ot){if(Bt&&(ct instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(ft.pos),1,Ft),jt&&!Rt&&!ft.parentOffset&&ft.parent.type!==jt)){const Ht=g.mapping.map(ft.before()),Yt=g.doc.resolve(Ht);ft.node(-1).canReplaceWith(Yt.index(),Yt.index()+1,jt)&&g.setNodeMarkup(g.mapping.map(ft.before()),jt)}it&&ensureMarks(et,ut.extensionManager.splittableMarks),g.scrollIntoView()}return Bt},splitListItem=(it,g={})=>({tr:et,state:ot,dispatch:ut,editor:ct})=>{var dt;const ft=getNodeType(it,ot.schema),{$from:St,$to:kt}=ot.selection,Tt=ot.selection.node;if(Tt&&Tt.isBlock||St.depth<2||!St.sameParent(kt))return!1;const Rt=St.node(-1);if(Rt.type!==ft)return!1;const jt=ct.extensionManager.attributes;if(St.parent.content.size===0&&St.node(-1).childCount===St.indexAfter(-1)){if(St.depth===2||St.node(-3).type!==ft||St.index(-2)!==St.node(-2).childCount-1)return!1;if(ut){let zt=Fragment.empty;const Kt=St.index(-1)?1:St.index(-2)?2:3;for(let dn=St.depth-Kt;dn>=St.depth-3;dn-=1)zt=Fragment.from(St.node(dn).copy(zt));const en=St.indexAfter(-1)<St.node(-2).childCount?1:St.indexAfter(-2)<St.node(-3).childCount?2:3,tn={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g},on=((dt=ft.contentMatch.defaultType)==null?void 0:dt.createAndFill(tn))||void 0;zt=zt.append(Fragment.from(ft.createAndFill(null,on)||void 0));const an=St.before(St.depth-(Kt-1));et.replace(an,St.after(-en),new Slice(zt,4-Kt,0));let un=-1;et.doc.nodesBetween(an,et.doc.content.size,(dn,Sn)=>{if(un>-1)return!1;dn.isTextblock&&dn.content.size===0&&(un=Sn+1)}),un>-1&&et.setSelection(TextSelection.near(et.doc.resolve(un))),et.scrollIntoView()}return!0}const Ft=kt.pos===St.end()?Rt.contentMatchAt(0).defaultType:null,Bt={...getSplittedAttributes(jt,Rt.type.name,Rt.attrs),...g},Ht={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g};et.delete(St.pos,kt.pos);const Yt=Ft?[{type:ft,attrs:Bt},{type:Ft,attrs:Ht}]:[{type:ft,attrs:Bt}];if(!canSplit(et.doc,St.pos,2))return!1;if(ut){const{selection:zt,storedMarks:Kt}=ot,{splittableMarks:en}=ct.extensionManager,tn=Kt||zt.$to.parentOffset&&zt.$from.marks();if(et.split(St.pos,2,Yt).scrollIntoView(),!tn||!ut)return!0;const on=tn.filter(an=>en.includes(an.type.name));et.ensureMarks(on)}return!0},joinListBackwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(Math.max(0,et.pos-1)).before(et.depth);if(ot===void 0)return!0;const ut=it.doc.nodeAt(ot);return et.node.type===(ut==null?void 0:ut.type)&&canJoin(it.doc,et.pos)&&it.join(et.pos),!0},joinListForwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(et.start).after(et.depth);if(ot===void 0)return!0;const ut=it.doc.nodeAt(ot);return et.node.type===(ut==null?void 0:ut.type)&&canJoin(it.doc,ot)&&it.join(ot),!0},toggleList=(it,g,et,ot={})=>({editor:ut,tr:ct,state:dt,dispatch:ft,chain:St,commands:kt,can:Tt})=>{const{extensions:Rt,splittableMarks:jt}=ut.extensionManager,Ft=getNodeType(it,dt.schema),Bt=getNodeType(g,dt.schema),{selection:Ht,storedMarks:Yt}=dt,{$from:zt,$to:Kt}=Ht,en=zt.blockRange(Kt),tn=Yt||Ht.$to.parentOffset&&Ht.$from.marks();if(!en)return!1;const on=findParentNode(an=>isList(an.type.name,Rt))(Ht);if(en.depth>=1&&on&&en.depth-on.depth<=1){if(on.node.type===Ft)return kt.liftListItem(Bt);if(isList(on.node.type.name,Rt)&&Ft.validContent(on.node.content)&&ft)return St().command(()=>(ct.setNodeMarkup(on.pos,Ft),!0)).command(()=>joinListBackwards(ct,Ft)).command(()=>joinListForwards(ct,Ft)).run()}return!et||!tn||!ft?St().command(()=>Tt().wrapInList(Ft,ot)?!0:kt.clearNodes()).wrapInList(Ft,ot).command(()=>joinListBackwards(ct,Ft)).command(()=>joinListForwards(ct,Ft)).run():St().command(()=>{const an=Tt().wrapInList(Ft,ot),un=tn.filter(dn=>jt.includes(dn.type.name));return ct.ensureMarks(un),an?!0:kt.clearNodes()}).wrapInList(Ft,ot).command(()=>joinListBackwards(ct,Ft)).command(()=>joinListForwards(ct,Ft)).run()},toggleMark=(it,g={},et={})=>({state:ot,commands:ut})=>{const{extendEmptyMarkRange:ct=!1}=et,dt=getMarkType(it,ot.schema);return isMarkActive(ot,dt,g)?ut.unsetMark(dt,{extendEmptyMarkRange:ct}):ut.setMark(dt,g)},toggleNode=(it,g,et={})=>({state:ot,commands:ut})=>{const ct=getNodeType(it,ot.schema),dt=getNodeType(g,ot.schema),ft=isNodeActive(ot,ct,et);let St;return ot.selection.$anchor.sameParent(ot.selection.$head)&&(St=ot.selection.$anchor.parent.attrs),ft?ut.setNode(dt,St):ut.setNode(ct,{...St,...et})},toggleWrap=(it,g={})=>({state:et,commands:ot})=>{const ut=getNodeType(it,et.schema);return isNodeActive(et,ut,g)?ot.lift(ut):ot.wrapIn(ut,g)},undoInputRule=()=>({state:it,dispatch:g})=>{const et=it.plugins;for(let ot=0;ot<et.length;ot+=1){const ut=et[ot];let ct;if(ut.spec.isInputRules&&(ct=ut.getState(it))){if(g){const dt=it.tr,ft=ct.transform;for(let St=ft.steps.length-1;St>=0;St-=1)dt.step(ft.steps[St].invert(ft.docs[St]));if(ct.text){const St=dt.doc.resolve(ct.from).marks();dt.replaceWith(ct.from,ct.to,it.schema.text(ct.text,St))}else dt.delete(ct.from,ct.to)}return!0}}return!1},unsetAllMarks=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,{empty:ot,ranges:ut}=et;return ot||g&&ut.forEach(ct=>{it.removeMark(ct.$from.pos,ct.$to.pos)}),!0},unsetMark=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{var ct;const{extendEmptyMarkRange:dt=!1}=g,{selection:ft}=et,St=getMarkType(it,ot.schema),{$from:kt,empty:Tt,ranges:Rt}=ft;if(!ut)return!0;if(Tt&&dt){let{from:jt,to:Ft}=ft;const Bt=(ct=kt.marks().find(Yt=>Yt.type===St))==null?void 0:ct.attrs,Ht=getMarkRange(kt,St,Bt);Ht&&(jt=Ht.from,Ft=Ht.to),et.removeMark(jt,Ft,St)}else Rt.forEach(jt=>{et.removeMark(jt.$from.pos,jt.$to.pos,St)});return et.removeStoredMark(St),!0},updateAttributes=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{let ct=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ct=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ut&&et.selection.ranges.forEach(St=>{const kt=St.$from.pos,Tt=St.$to.pos;let Rt,jt,Ft,Bt;et.selection.empty?ot.doc.nodesBetween(kt,Tt,(Ht,Yt)=>{ct&&ct===Ht.type&&(Ft=Math.max(Yt,kt),Bt=Math.min(Yt+Ht.nodeSize,Tt),Rt=Yt,jt=Ht)}):ot.doc.nodesBetween(kt,Tt,(Ht,Yt)=>{Yt<kt&&ct&&ct===Ht.type&&(Ft=Math.max(Yt,kt),Bt=Math.min(Yt+Ht.nodeSize,Tt),Rt=Yt,jt=Ht),Yt>=kt&&Yt<=Tt&&(ct&&ct===Ht.type&&et.setNodeMarkup(Yt,void 0,{...Ht.attrs,...g}),dt&&Ht.marks.length&&Ht.marks.forEach(zt=>{if(dt===zt.type){const Kt=Math.max(Yt,kt),en=Math.min(Yt+Ht.nodeSize,Tt);et.addMark(Kt,en,dt.create({...zt.attrs,...g}))}}))}),jt&&(Rt!==void 0&&et.setNodeMarkup(Rt,void 0,{...jt.attrs,...g}),dt&&jt.marks.length&&jt.marks.forEach(Ht=>{dt===Ht.type&&et.addMark(Ft,Bt,dt.create({...Ht.attrs,...g}))}))}),!0):!1},wrapIn=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return wrapIn$1(ut,g)(et,ot)},wrapInList=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return wrapInList$1(ut,g)(et,ot)},EventEmitter=class{constructor(){this.callbacks={}}on(it,g){return this.callbacks[it]||(this.callbacks[it]=[]),this.callbacks[it].push(g),this}emit(it,...g){const et=this.callbacks[it];return et&&et.forEach(ot=>ot.apply(this,g)),this}off(it,g){const et=this.callbacks[it];return et&&(g?this.callbacks[it]=et.filter(ot=>ot!==g):delete this.callbacks[it]),this}once(it,g){const et=(...ot)=>{this.off(it,et),g.apply(this,ot)};return this.on(it,et)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(it){var g;this.find=it.find,this.handler=it.handler,this.undoable=(g=it.undoable)!=null?g:!0}},inputRuleMatcherHandler=(it,g)=>{if(isRegExp(g))return g.exec(it);const et=g(it);if(!et)return null;const ot=[et.text];return ot.index=et.index,ot.input=it,ot.data=et.data,et.replaceWith&&(et.text.includes(et.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),ot.push(et.replaceWith)),ot};function run$2(it){var g;const{editor:et,from:ot,to:ut,text:ct,rules:dt,plugin:ft}=it,{view:St}=et;if(St.composing)return!1;const kt=St.state.doc.resolve(ot);if(kt.parent.type.spec.code||(g=kt.nodeBefore||kt.nodeAfter)!=null&&g.marks.find(jt=>jt.type.spec.code))return!1;let Tt=!1;const Rt=getTextContentFromNodes(kt)+ct;return dt.forEach(jt=>{if(Tt)return;const Ft=inputRuleMatcherHandler(Rt,jt.find);if(!Ft)return;const Bt=St.state.tr,Ht=createChainableState({state:St.state,transaction:Bt}),Yt={from:ot-(Ft[0].length-ct.length),to:ut},{commands:zt,chain:Kt,can:en}=new CommandManager$1({editor:et,state:Ht});jt.handler({state:Ht,range:Yt,match:Ft,commands:zt,chain:Kt,can:en})===null||!Bt.steps.length||(jt.undoable&&Bt.setMeta(ft,{transform:Bt,from:ot,to:ut,text:ct}),St.dispatch(Bt),Tt=!0)}),Tt}function inputRulesPlugin(it){const{editor:g,rules:et}=it,ot=new Plugin({state:{init(){return null},apply(ut,ct,dt){const ft=ut.getMeta(ot);if(ft)return ft;const St=ut.getMeta("applyInputRules");return!!St&&setTimeout(()=>{let{text:Tt}=St;typeof Tt=="string"?Tt=Tt:Tt=getHTMLFromFragment(Fragment.from(Tt),dt.schema);const{from:Rt}=St,jt=Rt+Tt.length;run$2({editor:g,from:Rt,to:jt,text:Tt,rules:et,plugin:ot})}),ut.selectionSet||ut.docChanged?null:ct}},props:{handleTextInput(ut,ct,dt,ft){return run$2({editor:g,from:ct,to:dt,text:ft,rules:et,plugin:ot})},handleDOMEvents:{compositionend:ut=>(setTimeout(()=>{const{$cursor:ct}=ut.state.selection;ct&&run$2({editor:g,from:ct.pos,to:ct.pos,text:"",rules:et,plugin:ot})}),!1)},handleKeyDown(ut,ct){if(ct.key!=="Enter")return!1;const{$cursor:dt}=ut.state.selection;return dt?run$2({editor:g,from:dt.pos,to:dt.pos,text:`
`,rules:et,plugin:ot}):!1}},isInputRules:!0});return ot}function getType(it){return Object.prototype.toString.call(it).slice(8,-1)}function isPlainObject(it){return getType(it)!=="Object"?!1:it.constructor===Object&&Object.getPrototypeOf(it)===Object.prototype}function mergeDeep(it,g){const et={...it};return isPlainObject(it)&&isPlainObject(g)&&Object.keys(g).forEach(ot=>{isPlainObject(g[ot])&&isPlainObject(it[ot])?et[ot]=mergeDeep(it[ot],g[ot]):et[ot]=g[ot]}),et}var Extendable=class{constructor(it={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...it},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(it={}){const g=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,it)});return g.name=this.name,g.parent=this.parent,g}extend(it={}){const g=new this.constructor({...this.config,...it});return g.parent=this,this.child=g,g.name="name"in it?it.name:g.parent.name,g}},Mark=class LR extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(g={}){const et=typeof g=="function"?g():g;return new LR(et)}static handleExit({editor:g,mark:et}){const{tr:ot}=g.state,ut=g.state.selection.$from;if(ut.pos===ut.end()){const dt=ut.marks();if(!!!dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name))return!1;const St=dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name);return St&&ot.removeStoredMark(St),ot.insertText(" ",ut.pos),g.view.dispatch(ot),!0}return!1}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function isNumber(it){return typeof it=="number"}var PasteRule=class{constructor(it){this.find=it.find,this.handler=it.handler}},pasteRuleMatcherHandler=(it,g,et)=>{if(isRegExp(g))return[...it.matchAll(g)];const ot=g(it,et);return ot?ot.map(ut=>{const ct=[ut.text];return ct.index=ut.index,ct.input=it,ct.data=ut.data,ut.replaceWith&&(ut.text.includes(ut.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),ct.push(ut.replaceWith)),ct}):[]};function run2(it){const{editor:g,state:et,from:ot,to:ut,rule:ct,pasteEvent:dt,dropEvent:ft}=it,{commands:St,chain:kt,can:Tt}=new CommandManager$1({editor:g,state:et}),Rt=[];return et.doc.nodesBetween(ot,ut,(Ft,Bt)=>{var Ht,Yt,zt,Kt,en;if((Yt=(Ht=Ft.type)==null?void 0:Ht.spec)!=null&&Yt.code||!(Ft.isText||Ft.isTextblock||Ft.isInline))return;const tn=(en=(Kt=(zt=Ft.content)==null?void 0:zt.size)!=null?Kt:Ft.nodeSize)!=null?en:0,on=Math.max(ot,Bt),an=Math.min(ut,Bt+tn);if(on>=an)return;const un=Ft.isText?Ft.text||"":Ft.textBetween(on-Bt,an-Bt,void 0,"");pasteRuleMatcherHandler(un,ct.find,dt).forEach(Sn=>{if(Sn.index===void 0)return;const mn=on+Sn.index+1,bn=mn+Sn[0].length,En={from:et.tr.mapping.map(mn),to:et.tr.mapping.map(bn)},kn=ct.handler({state:et,range:En,match:Sn,commands:St,chain:kt,can:Tt,pasteEvent:dt,dropEvent:ft});Rt.push(kn)})}),Rt.every(Ft=>Ft!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=it=>{var g;const et=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=et.clipboardData)==null||g.setData("text/html",it),et};function pasteRulesPlugin(it){const{editor:g,rules:et}=it;let ot=null,ut=!1,ct=!1,dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ft;try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}const St=({state:Tt,from:Rt,to:jt,rule:Ft,pasteEvt:Bt})=>{const Ht=Tt.tr,Yt=createChainableState({state:Tt,transaction:Ht});if(!(!run2({editor:g,state:Yt,from:Math.max(Rt-1,0),to:jt.b-1,rule:Ft,pasteEvent:Bt,dropEvent:ft})||!Ht.steps.length)){try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}return dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ht}};return et.map(Tt=>new Plugin({view(Rt){const jt=Bt=>{var Ht;ot=(Ht=Rt.dom.parentElement)!=null&&Ht.contains(Bt.target)?Rt.dom.parentElement:null,ot&&(tiptapDragFromOtherEditor=g)},Ft=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",jt),window.addEventListener("dragend",Ft),{destroy(){window.removeEventListener("dragstart",jt),window.removeEventListener("dragend",Ft)}}},props:{handleDOMEvents:{drop:(Rt,jt)=>{if(ct=ot===Rt.dom.parentElement,ft=jt,!ct){const Ft=tiptapDragFromOtherEditor;Ft!=null&&Ft.isEditable&&setTimeout(()=>{const Bt=Ft.state.selection;Bt&&Ft.commands.deleteRange({from:Bt.from,to:Bt.to})},10)}return!1},paste:(Rt,jt)=>{var Ft;const Bt=(Ft=jt.clipboardData)==null?void 0:Ft.getData("text/html");return dt=jt,ut=!!(Bt!=null&&Bt.includes("data-pm-slice")),!1}}},appendTransaction:(Rt,jt,Ft)=>{const Bt=Rt[0],Ht=Bt.getMeta("uiEvent")==="paste"&&!ut,Yt=Bt.getMeta("uiEvent")==="drop"&&!ct,zt=Bt.getMeta("applyPasteRules"),Kt=!!zt;if(!Ht&&!Yt&&!Kt)return;if(Kt){let{text:on}=zt;typeof on=="string"?on=on:on=getHTMLFromFragment(Fragment.from(on),Ft.schema);const{from:an}=zt,un=an+on.length,dn=createClipboardPasteEvent(on);return St({rule:Tt,state:Ft,from:an,to:{b:un},pasteEvt:dn})}const en=jt.doc.content.findDiffStart(Ft.doc.content),tn=jt.doc.content.findDiffEnd(Ft.doc.content);if(!(!isNumber(en)||!tn||en===tn.b))return St({rule:Tt,state:Ft,from:en,to:tn,pasteEvt:dt})}}))}var ExtensionManager=class{constructor(it,g){this.splittableMarks=[],this.editor=g,this.baseExtensions=it,this.extensions=resolveExtensions(it),this.schema=getSchemaByResolvedExtensions(this.extensions,g),this.setupExtensions()}get commands(){return this.extensions.reduce((it,g)=>{const et={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)},ot=getExtensionField(g,"addCommands",et);return ot?{...it,...ot()}:it},{})}get plugins(){const{editor:it}=this;return sortExtensions([...this.extensions].reverse()).flatMap(ot=>{const ut={name:ot.name,options:ot.options,storage:this.editor.extensionStorage[ot.name],editor:it,type:getSchemaTypeByName(ot.name,this.schema)},ct=[],dt=getExtensionField(ot,"addKeyboardShortcuts",ut);let ft={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ut)&&(ft.ArrowRight=()=>Mark.handleExit({editor:it,mark:ot})),dt){const jt=Object.fromEntries(Object.entries(dt()).map(([Ft,Bt])=>[Ft,()=>Bt({editor:it})]));ft={...ft,...jt}}const St=keymap(ft);ct.push(St);const kt=getExtensionField(ot,"addInputRules",ut);if(isExtensionRulesEnabled(ot,it.options.enableInputRules)&&kt){const jt=kt();if(jt&&jt.length){const Ft=inputRulesPlugin({editor:it,rules:jt}),Bt=Array.isArray(Ft)?Ft:[Ft];ct.push(...Bt)}}const Tt=getExtensionField(ot,"addPasteRules",ut);if(isExtensionRulesEnabled(ot,it.options.enablePasteRules)&&Tt){const jt=Tt();if(jt&&jt.length){const Ft=pasteRulesPlugin({editor:it,rules:jt});ct.push(...Ft)}}const Rt=getExtensionField(ot,"addProseMirrorPlugins",ut);if(Rt){const jt=Rt();ct.push(...jt)}return ct})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:it}=this,{nodeExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addNodeView")).map(et=>{const ot=this.attributes.filter(St=>St.type===et.name),ut={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getNodeType(et.name,this.schema)},ct=getExtensionField(et,"addNodeView",ut);if(!ct)return[];const dt=ct();if(!dt)return[];const ft=(St,kt,Tt,Rt,jt)=>{const Ft=getRenderedAttributes(St,ot);return dt({node:St,view:kt,getPos:Tt,decorations:Rt,innerDecorations:jt,editor:it,extension:et,HTMLAttributes:Ft})};return[et.name,ft]}))}get markViews(){const{editor:it}=this,{markExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addMarkView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ut={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getMarkType(et.name,this.schema)},ct=getExtensionField(et,"addMarkView",ut);if(!ct)return[];const dt=(ft,St,kt)=>{const Tt=getRenderedAttributes(ft,ot);return ct()({mark:ft,view:St,inline:kt,editor:it,extension:et,HTMLAttributes:Tt,updateAttributes:Rt=>{updateMarkViewAttributes(ft,it,Rt)}})};return[et.name,dt]}))}setupExtensions(){const it=this.extensions;this.editor.extensionStorage=Object.fromEntries(it.map(g=>[g.name,g.storage])),it.forEach(g=>{var et;const ot={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&((et=callOrReturn(getExtensionField(g,"keepOnSplit",ot)))==null||et)&&this.splittableMarks.push(g.name);const ut=getExtensionField(g,"onBeforeCreate",ot),ct=getExtensionField(g,"onCreate",ot),dt=getExtensionField(g,"onUpdate",ot),ft=getExtensionField(g,"onSelectionUpdate",ot),St=getExtensionField(g,"onTransaction",ot),kt=getExtensionField(g,"onFocus",ot),Tt=getExtensionField(g,"onBlur",ot),Rt=getExtensionField(g,"onDestroy",ot);ut&&this.editor.on("beforeCreate",ut),ct&&this.editor.on("create",ct),dt&&this.editor.on("update",dt),ft&&this.editor.on("selectionUpdate",ft),St&&this.editor.on("transaction",St),kt&&this.editor.on("focus",kt),Tt&&this.editor.on("blur",Tt),Rt&&this.editor.on("destroy",Rt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class DR extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(g={}){const et=typeof g=="function"?g():g;return new DR(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:it}=this,{state:g,schema:et}=it,{doc:ot,selection:ut}=g,{ranges:ct}=ut,dt=Math.min(...ct.map(Tt=>Tt.$from.pos)),ft=Math.max(...ct.map(Tt=>Tt.$to.pos)),St=getTextSerializersFromSchema(et);return getTextBetween(ot,{from:dt,to:ft},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:St})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:it,appendedTransactions:g}){var et,ot,ut;const ct=()=>{var dt,ft,St,kt;if((kt=(St=(ft=(dt=this.editor.options.coreExtensionOptions)==null?void 0:dt.delete)==null?void 0:ft.filterTransaction)==null?void 0:St.call(ft,it))!=null?kt:it.getMeta("y-sync$"))return;const Tt=combineTransactionSteps(it.before,[it,...g]);getChangedRanges(Tt).forEach(Ft=>{Tt.mapping.mapResult(Ft.oldRange.from).deletedAfter&&Tt.mapping.mapResult(Ft.oldRange.to).deletedBefore&&Tt.before.nodesBetween(Ft.oldRange.from,Ft.oldRange.to,(Bt,Ht)=>{const Yt=Ht+Bt.nodeSize-2,zt=Ft.oldRange.from<=Ht&&Yt<=Ft.oldRange.to;this.editor.emit("delete",{type:"node",node:Bt,from:Ht,to:Yt,newFrom:Tt.mapping.map(Ht),newTo:Tt.mapping.map(Yt),deletedRange:Ft.oldRange,newRange:Ft.newRange,partial:!zt,editor:this.editor,transaction:it,combinedTransform:Tt})})});const jt=Tt.mapping;Tt.steps.forEach((Ft,Bt)=>{var Ht,Yt;if(Ft instanceof RemoveMarkStep){const zt=jt.slice(Bt).map(Ft.from,-1),Kt=jt.slice(Bt).map(Ft.to),en=jt.invert().map(zt,-1),tn=jt.invert().map(Kt),on=(Ht=Tt.doc.nodeAt(zt-1))==null?void 0:Ht.marks.some(un=>un.eq(Ft.mark)),an=(Yt=Tt.doc.nodeAt(Kt))==null?void 0:Yt.marks.some(un=>un.eq(Ft.mark));this.editor.emit("delete",{type:"mark",mark:Ft.mark,from:Ft.from,to:Ft.to,deletedRange:{from:en,to:tn},newRange:{from:zt,to:Kt},partial:!!(an||on),editor:this.editor,transaction:it,combinedTransform:Tt})}})};(ut=(ot=(et=this.editor.options.coreExtensionOptions)==null?void 0:et.delete)==null?void 0:ot.async)==null||ut?setTimeout(ct,0):ct()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(it,g,et,ot)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:et,moved:ot})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:it}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(g,et)=>{it.isFocused=!0;const ot=it.state.tr.setMeta("focus",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1},blur:(g,et)=>{it.isFocused=!1;const ot=it.state.tr.setMeta("blur",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const it=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.undoInputRule(),()=>dt.command(({tr:ft})=>{const{selection:St,doc:kt}=ft,{empty:Tt,$anchor:Rt}=St,{pos:jt,parent:Ft}=Rt,Bt=Rt.parent.isTextblock&&jt>0?ft.doc.resolve(jt-1):Rt,Ht=Bt.parent.type.spec.isolating,Yt=Rt.pos-Rt.parentOffset,zt=Ht&&Bt.parent.childCount===1?Yt===Rt.pos:Selection.atStart(kt).from===jt;return!Tt||!Ft.type.isTextblock||Ft.textContent.length||!zt||zt&&Rt.parent.type.name==="paragraph"?!1:dt.clearNodes()}),()=>dt.deleteSelection(),()=>dt.joinBackward(),()=>dt.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.deleteSelection(),()=>dt.deleteCurrentNode(),()=>dt.joinForward(),()=>dt.selectNodeForward()]),ot={Enter:()=>this.editor.commands.first(({commands:dt})=>[()=>dt.newlineInCode(),()=>dt.createParagraphNear(),()=>dt.liftEmptyBlock(),()=>dt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:it,"Mod-Backspace":it,"Shift-Backspace":it,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},ut={...ot},ct={...ot,"Ctrl-h":it,"Alt-Backspace":it,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?ct:ut},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(it,g,et)=>{if(it.some(Ht=>Ht.getMeta("composition")))return;const ot=it.some(Ht=>Ht.docChanged)&&!g.doc.eq(et.doc),ut=it.some(Ht=>Ht.getMeta("preventClearDocument"));if(!ot||ut)return;const{empty:ct,from:dt,to:ft}=g.selection,St=Selection.atStart(g.doc).from,kt=Selection.atEnd(g.doc).to;if(ct||!(dt===St&&ft===kt)||!isNodeEmpty(et.doc))return;const jt=et.tr,Ft=createChainableState({state:et,transaction:jt}),{commands:Bt}=new CommandManager$1({editor:this.editor,state:Ft});if(Bt.clearNodes(),!!jt.steps.length)return jt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(it,g,et)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:et})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),NodePos=class Kv{constructor(g,et,ot=!1,ut=null){this.currentNode=null,this.actualDepth=null,this.isBlock=ot,this.resolvedPos=g,this.editor=et,this.currentNode=ut}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!=null?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let et=this.from,ot=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}et=this.from+1,ot=this.to-1}this.editor.commands.insertContentAt({from:et,to:ot},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),et=this.resolvedPos.doc.resolve(g);return new Kv(et,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new Kv(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new Kv(g,this.editor)}get children(){const g=[];return this.node.content.forEach((et,ot)=>{const ut=et.isBlock&&!et.isTextblock,ct=et.isAtom&&!et.isText,dt=this.pos+ot+(ct?0:1);if(dt<0||dt>this.resolvedPos.doc.nodeSize-2)return;const ft=this.resolvedPos.doc.resolve(dt);if(!ut&&ft.depth<=this.depth)return;const St=new Kv(ft,this.editor,ut,ut?et:null);ut&&(St.actualDepth=this.depth+1),g.push(new Kv(ft,this.editor,ut,ut?et:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,et={}){let ot=null,ut=this.parent;for(;ut&&!ot;){if(ut.node.type.name===g)if(Object.keys(et).length>0){const ct=ut.node.attrs,dt=Object.keys(et);for(let ft=0;ft<dt.length;ft+=1){const St=dt[ft];if(ct[St]!==et[St])break}}else ot=ut;ut=ut.parent}return ot}querySelector(g,et={}){return this.querySelectorAll(g,et,!0)[0]||null}querySelectorAll(g,et={},ot=!1){let ut=[];if(!this.children||this.children.length===0)return ut;const ct=Object.keys(et);return this.children.forEach(dt=>{ot&&ut.length>0||(dt.node.type.name===g&&ct.every(St=>et[St]===dt.node.attrs[St])&&ut.push(dt),!(ot&&ut.length>0)&&(ut=ut.concat(dt.querySelectorAll(g,et,ot))))}),ut}setAttribute(g){const{tr:et}=this.editor.state;et.setNodeMarkup(this.from,void 0,{...this.node.attrs,...g}),this.editor.view.dispatch(et)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(it,g,et){const ot=document.querySelector(`style[data-tiptap-style${et?`-${et}`:""}]`);if(ot!==null)return ot;const ut=document.createElement("style");return g&&ut.setAttribute("nonce",g),ut.setAttribute(`data-tiptap-style${et?`-${et}`:""}`,""),ut.innerHTML=it,document.getElementsByTagName("head")[0].appendChild(ut),ut}var Editor=class extends EventEmitter{constructor(it={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:ot})=>{throw ot},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(it),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:ot,slice:ut,moved:ct})=>this.options.onDrop(ot,ut,ct)),this.on("paste",({event:ot,slice:ut})=>this.options.onPaste(ot,ut)),this.on("delete",this.options.onDelete);const g=this.createDoc(),et=resolveFocusPosition(g,this.options.autofocus);this.editorState=EditorState.create({doc:g,schema:this.schema,selection:et||void 0}),this.options.element&&this.mount(this.options.element)}mount(it){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(it),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const it=this.editorView.dom;it!=null&&it.editor&&delete it.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(it){console.warn("Failed to remove CSS element:",it)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(it={}){this.options={...this.options,...it},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(it,g=!0){this.setOptions({editable:it}),g&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:it=>{this.editorState=it},dispatch:it=>{this.dispatchTransaction(it)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(it,g)=>{if(this.editorView)return this.editorView[g];if(g==="state")return this.editorState;if(g in it)return Reflect.get(it,g);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${g}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(it,g){const et=isFunction(g)?g(it,[...this.state.plugins]):[...this.state.plugins,it],ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}unregisterPlugin(it){if(this.isDestroyed)return;const g=this.state.plugins;let et=g;if([].concat(it).forEach(ut=>{const ct=typeof ut=="string"?`${ut}$`:ut.key;et=et.filter(dt=>!dt.key.startsWith(ct))}),g.length===et.length)return;const ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}createExtensionManager(){var it,g;const ot=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(g=(it=this.options.coreExtensionOptions)==null?void 0:it.clipboardTextSerializer)==null?void 0:g.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete].filter(ut=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[ut.name]!==!1:!0):[],...this.options.extensions].filter(ut=>["extension","node","mark"].includes(ut==null?void 0:ut.type));this.extensionManager=new ExtensionManager(ot,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let it;try{it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return it}createView(it){var g;this.editorView=new EditorView(it,{...this.options.editorProps,attributes:{role:"textbox",...(g=this.options.editorProps)==null?void 0:g.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const et=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(et),this.prependClass(),this.injectCSS();const ot=this.view.dom;ot.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(it){this.isCapturingTransaction=!0,it(),this.isCapturingTransaction=!1;const g=this.capturedTransaction;return this.capturedTransaction=null,g}dispatchTransaction(it){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=it;return}it.steps.forEach(kt=>{var Tt;return(Tt=this.capturedTransaction)==null?void 0:Tt.step(kt)});return}const{state:g,transactions:et}=this.state.applyTransaction(it),ot=!this.state.selection.eq(g.selection),ut=et.includes(it),ct=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:it,nextState:g}),!ut)return;this.view.updateState(g),this.emit("transaction",{editor:this,transaction:it,appendedTransactions:et.slice(1)}),ot&&this.emit("selectionUpdate",{editor:this,transaction:it});const dt=et.findLast(kt=>kt.getMeta("focus")||kt.getMeta("blur")),ft=dt==null?void 0:dt.getMeta("focus"),St=dt==null?void 0:dt.getMeta("blur");ft&&this.emit("focus",{editor:this,event:ft.event,transaction:dt}),St&&this.emit("blur",{editor:this,event:St.event,transaction:dt}),!(it.getMeta("preventUpdate")||!et.some(kt=>kt.docChanged)||ct.doc.eq(g.doc))&&this.emit("update",{editor:this,transaction:it,appendedTransactions:et.slice(1)})}getAttributes(it){return getAttributes$1(this.state,it)}isActive(it,g){const et=typeof it=="string"?it:null,ot=typeof it=="string"?g:it;return isActive(this.state,et,ot)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(it){const{blockSeparator:g=`

`,textSerializers:et={}}=it||{};return getText(this.state.doc,{blockSeparator:g,textSerializers:{...getTextSerializersFromSchema(this.schema),...et}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var it,g;return(g=(it=this.editorView)==null?void 0:it.isDestroyed)!=null?g:!0}$node(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelector(it,g))||null}$nodes(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelectorAll(it,g))||null}$pos(it){const g=this.state.doc.resolve(it);return new NodePos(g,this)}get $doc(){return this.$pos(0)}};function markInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=callOrReturn(it.getAttributes,void 0,ot);if(ut===!1||ut===null)return null;const{tr:ct}=g,dt=ot[ot.length-1],ft=ot[0];if(dt){const St=ft.search(/\S/),kt=et.from+ft.indexOf(dt),Tt=kt+dt.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Ft=>Ft.mark.type.excluded.find(Ht=>Ht===it.type&&Ht!==Ft.mark.type)).filter(Ft=>Ft.to>kt).length)return null;Tt<et.to&&ct.delete(Tt,et.to),kt>et.from&&ct.delete(et.from+St,kt);const jt=et.from+St+dt.length;ct.addMark(et.from+St,jt,it.type.create(ut||{})),ct.removeStoredMark(it.type)}},undoable:it.undoable})}function nodeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=callOrReturn(it.getAttributes,void 0,ot)||{},{tr:ct}=g,dt=et.from;let ft=et.to;const St=it.type.create(ut);if(ot[1]){const kt=ot[0].lastIndexOf(ot[1]);let Tt=dt+kt;Tt>ft?Tt=ft:ft=Tt+ot[1].length;const Rt=ot[0][ot[0].length-1];ct.insertText(Rt,dt+ot[0].length-1),ct.replaceWith(Tt,ft,St)}else if(ot[0]){const kt=it.type.isInline?dt:dt-1;ct.insert(kt,it.type.create(ut)).delete(ct.mapping.map(dt),ct.mapping.map(ft))}ct.scrollIntoView()},undoable:it.undoable})}function textblockTypeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=g.doc.resolve(et.from),ct=callOrReturn(it.getAttributes,void 0,ot)||{};if(!ut.node(-1).canReplaceWith(ut.index(-1),ut.indexAfter(-1),it.type))return null;g.tr.delete(et.from,et.to).setBlockType(et.from,et.from,it.type,ct)},undoable:it.undoable})}function wrappingInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot,chain:ut})=>{const ct=callOrReturn(it.getAttributes,void 0,ot)||{},dt=g.tr.delete(et.from,et.to),St=dt.doc.resolve(et.from).blockRange(),kt=St&&findWrapping(St,it.type,ct);if(!kt)return null;if(dt.wrap(St,kt),it.keepMarks&&it.editor){const{selection:Rt,storedMarks:jt}=g,{splittableMarks:Ft}=it.editor.extensionManager,Bt=jt||Rt.$to.parentOffset&&Rt.$from.marks();if(Bt){const Ht=Bt.filter(Yt=>Ft.includes(Yt.type.name));dt.ensureMarks(Ht)}}if(it.keepAttributes){const Rt=it.type.name==="bulletList"||it.type.name==="orderedList"?"listItem":"taskList";ut().updateAttributes(Rt,ct).run()}const Tt=dt.doc.resolve(et.from-1).nodeBefore;Tt&&Tt.type===it.type&&canJoin(dt.doc,et.from-1)&&(!it.joinPredicate||it.joinPredicate(ot,Tt))&&dt.join(et.from-1)},undoable:it.undoable})}function canInsertNode(it,g){const{selection:et}=it,{$from:ot}=et;if(et instanceof NodeSelection){const ct=ot.index();return ot.parent.canReplaceWith(ct,ct+1,g)}let ut=ot.depth;for(;ut>=0;){const ct=ot.index(ut);if(ot.node(ut).contentMatchAt(ct).matchType(g))return!0;ut-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(it){if(!(it!=null&&it.trim()))return{};const g={},et=[],ot=it.replace(/["']([^"']*)["']/g,kt=>(et.push(kt),`__QUOTED_${et.length-1}__`)),ut=ot.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(ut){const kt=ut.map(Tt=>Tt.trim().slice(1));g.class=kt.join(" ")}const ct=ot.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);ct&&(g.id=ct[1]);const dt=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(ot.matchAll(dt)).forEach(([,kt,Tt])=>{var Rt;const jt=parseInt(((Rt=Tt.match(/__QUOTED_(\d+)__/))==null?void 0:Rt[1])||"0",10),Ft=et[jt];Ft&&(g[kt]=Ft.slice(1,-1))});const St=ot.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return St&&St.split(/\s+/).filter(Boolean).forEach(Tt=>{Tt.match(/^[a-zA-Z][\w-]*$/)&&(g[Tt]=!0)}),g}function serializeAttributes(it){if(!it||Object.keys(it).length===0)return"";const g=[];return it.class&&String(it.class).split(/\s+/).filter(Boolean).forEach(ot=>g.push(`.${ot}`)),it.id&&g.push(`#${it.id}`),Object.entries(it).forEach(([et,ot])=>{et==="class"||et==="id"||(ot===!0?g.push(et):ot!==!1&&ot!=null&&g.push(`${et}="${String(ot)}"`))}),g.join(" ")}function createAtomBlockMarkdownSpec(it){const{nodeName:g,name:et,parseAttributes:ot=parseAttributes,serializeAttributes:ut=serializeAttributes,defaultAttributes:ct={},requiredAttributes:dt=[],allowedAttributes:ft}=it,St=et||g,kt=Tt=>{if(!ft)return Tt;const Rt={};return ft.forEach(jt=>{jt in Tt&&(Rt[jt]=Tt[jt])}),Rt};return{parseMarkdown:(Tt,Rt)=>{const jt={...ct,...Tt.attributes};return Rt.createNode(g,jt,[])},markdownTokenizer:{name:g,level:"block",start(Tt){var Rt;const jt=new RegExp(`^:::${St}(?:\\s|$)`,"m"),Ft=(Rt=Tt.match(jt))==null?void 0:Rt.index;return Ft!==void 0?Ft:-1},tokenize(Tt,Rt,jt){const Ft=new RegExp(`^:::${St}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),Bt=Tt.match(Ft);if(!Bt)return;const Ht=Bt[1]||"",Yt=ot(Ht);if(!dt.find(Kt=>!(Kt in Yt)))return{type:g,raw:Bt[0],attributes:Yt}}},renderMarkdown:Tt=>{const Rt=kt(Tt.attrs||{}),jt=ut(Rt),Ft=jt?` {${jt}}`:"";return`:::${St}${Ft} :::`}}}function createBlockMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ut=parseAttributes,serializeAttributes:ct=serializeAttributes,defaultAttributes:dt={},content:ft="block",allowedAttributes:St}=it,kt=et||g,Tt=Rt=>{if(!St)return Rt;const jt={};return St.forEach(Ft=>{Ft in Rt&&(jt[Ft]=Rt[Ft])}),jt};return{parseMarkdown:(Rt,jt)=>{let Ft;if(ot){const Ht=ot(Rt);Ft=typeof Ht=="string"?[{type:"text",text:Ht}]:Ht}else ft==="block"?Ft=jt.parseChildren(Rt.tokens||[]):Ft=jt.parseInline(Rt.tokens||[]);const Bt={...dt,...Rt.attributes};return jt.createNode(g,Bt,Ft)},markdownTokenizer:{name:g,level:"block",start(Rt){var jt;const Ft=new RegExp(`^:::${kt}`,"m"),Bt=(jt=Rt.match(Ft))==null?void 0:jt.index;return Bt!==void 0?Bt:-1},tokenize(Rt,jt,Ft){var Bt;const Ht=new RegExp(`^:::${kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),Yt=Rt.match(Ht);if(!Yt)return;const[zt,Kt=""]=Yt,en=ut(Kt);let tn=1;const on=zt.length;let an="";const un=/^:::([\w-]*)(\s.*)?/gm,dn=Rt.slice(on);for(un.lastIndex=0;;){const Sn=un.exec(dn);if(Sn===null)break;const mn=Sn.index,bn=Sn[1];if(!((Bt=Sn[2])!=null&&Bt.endsWith(":::"))){if(bn)tn+=1;else if(tn-=1,tn===0){const En=dn.slice(0,mn);an=En.trim();const kn=Rt.slice(0,on+mn+Sn[0].length);let Pn=[];if(an)if(ft==="block")for(Pn=Ft.blockTokens(En),Pn.forEach(Ln=>{Ln.text&&(!Ln.tokens||Ln.tokens.length===0)&&(Ln.tokens=Ft.inlineTokens(Ln.text))});Pn.length>0;){const Ln=Pn[Pn.length-1];if(Ln.type==="paragraph"&&(!Ln.text||Ln.text.trim()===""))Pn.pop();else break}else Pn=Ft.inlineTokens(an);return{type:g,raw:kn,attributes:en,content:an,tokens:Pn}}}}}},renderMarkdown:(Rt,jt)=>{const Ft=Tt(Rt.attrs||{}),Bt=ct(Ft),Ht=Bt?` {${Bt}}`:"",Yt=jt.renderChildren(Rt.content||[],`

`);return`:::${kt}${Ht}

${Yt}

:::`}}}function parseShortcodeAttributes(it){if(!it.trim())return{};const g={},et=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let ot=et.exec(it);for(;ot!==null;){const[,ut,ct,dt]=ot;g[ut]=ct||dt,ot=et.exec(it)}return g}function serializeShortcodeAttributes(it){return Object.entries(it).filter(([,g])=>g!=null).map(([g,et])=>`${g}="${et}"`).join(" ")}function createInlineMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ut=parseShortcodeAttributes,serializeAttributes:ct=serializeShortcodeAttributes,defaultAttributes:dt={},selfClosing:ft=!1,allowedAttributes:St}=it,kt=et||g,Tt=jt=>{if(!St)return jt;const Ft={};return St.forEach(Bt=>{Bt in jt&&(Ft[Bt]=jt[Bt])}),Ft},Rt=kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(jt,Ft)=>{const Bt={...dt,...jt.attributes};if(ft)return Ft.createNode(g,Bt);const Ht=ot?ot(jt):jt.content||"";return Ht?Ft.createNode(g,Bt,[Ft.createTextNode(Ht)]):Ft.createNode(g,Bt,[])},markdownTokenizer:{name:g,level:"inline",start(jt){const Ft=ft?new RegExp(`\\[${Rt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Rt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Rt}\\]`),Bt=jt.match(Ft),Ht=Bt==null?void 0:Bt.index;return Ht!==void 0?Ht:-1},tokenize(jt,Ft,Bt){const Ht=ft?new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Rt}\\]`),Yt=jt.match(Ht);if(!Yt)return;let zt="",Kt="";if(ft){const[,tn]=Yt;Kt=tn}else{const[,tn,on]=Yt;Kt=tn,zt=on||""}const en=ut(Kt.trim());return{type:g,raw:Yt[0],content:zt.trim(),attributes:en}}},renderMarkdown:jt=>{let Ft="";ot?Ft=ot(jt):jt.content&&jt.content.length>0&&(Ft=jt.content.filter(zt=>zt.type==="text").map(zt=>zt.text).join(""));const Bt=Tt(jt.attrs||{}),Ht=ct(Bt),Yt=Ht?` ${Ht}`:"";return ft?`[${kt}${Yt}]`:`[${kt}${Yt}]${Ft}[/${kt}]`}}}function parseIndentedBlocks(it,g,et){var ot,ut,ct,dt;const ft=it.split(`
`),St=[];let kt="",Tt=0;const Rt=g.baseIndentSize||2;for(;Tt<ft.length;){const jt=ft[Tt],Ft=jt.match(g.itemPattern);if(!Ft){if(St.length>0)break;if(jt.trim()===""){Tt+=1;continue}else return}const Bt=g.extractItemData(Ft),{indentLevel:Ht,mainContent:Yt}=Bt;kt=`${kt}${jt}
`;const zt=[Yt];for(Tt+=1;Tt<ft.length;){const on=ft[Tt];if(on.trim()===""){const un=ft.slice(Tt+1).findIndex(mn=>mn.trim()!=="");if(un===-1)break;if((((ut=(ot=ft[Tt+1+un].match(/^(\s*)/))==null?void 0:ot[1])==null?void 0:ut.length)||0)>Ht){zt.push(on),kt=`${kt}${on}
`,Tt+=1;continue}else break}if((((dt=(ct=on.match(/^(\s*)/))==null?void 0:ct[1])==null?void 0:dt.length)||0)>Ht)zt.push(on),kt=`${kt}${on}
`,Tt+=1;else break}let Kt;const en=zt.slice(1);if(en.length>0){const on=en.map(an=>an.slice(Ht+Rt)).join(`
`);on.trim()&&(g.customNestedParser?Kt=g.customNestedParser(on):Kt=et.blockTokens(on))}const tn=g.createToken(Bt,Kt);St.push(tn)}if(St.length!==0)return{items:St,raw:kt.trim()}}function renderNestedMarkdownContent(it,g,et,ot){if(!it||!Array.isArray(it.content))return"";const ut=typeof et=="function"?et(ot):et,[ct,...dt]=it.content,ft=g.renderChildren([ct]),St=[`${ut}${ft}`];return dt&&dt.length>0&&dt.forEach(kt=>{const Tt=g.renderChildren([kt]);if(Tt){const Rt=Tt.split(`
`).map(jt=>jt?g.indent(jt):"").join(`
`);St.push(Rt)}}),St.join(`
`)}function updateMarkViewAttributes(it,g,et={}){const{state:ot}=g,{doc:ut,tr:ct}=ot,dt=it;ut.descendants((ft,St)=>{const kt=ct.mapping.map(St),Tt=ct.mapping.map(St)+ft.nodeSize;let Rt=null;if(ft.marks.forEach(Ft=>{if(Ft!==dt)return!1;Rt=Ft}),!Rt)return;let jt=!1;if(Object.keys(et).forEach(Ft=>{et[Ft]!==Rt.attrs[Ft]&&(jt=!0)}),jt){const Ft=it.type.create({...it.attrs,...et});ct.removeMark(kt,Tt,it.type),ct.addMark(kt,Tt,Ft)}}),ct.docChanged&&g.view.dispatch(ct)}var Node3=class jR extends Extendable{constructor(){super(...arguments),this.type="node"}static create(g={}){const et=typeof g=="function"?g():g;return new jR(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function markPasteRule(it){return new PasteRule({find:it.find,handler:({state:g,range:et,match:ot,pasteEvent:ut})=>{const ct=callOrReturn(it.getAttributes,void 0,ot,ut);if(ct===!1||ct===null)return null;const{tr:dt}=g,ft=ot[ot.length-1],St=ot[0];let kt=et.to;if(ft){const Tt=St.search(/\S/),Rt=et.from+St.indexOf(ft),jt=Rt+ft.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Bt=>Bt.mark.type.excluded.find(Yt=>Yt===it.type&&Yt!==Bt.mark.type)).filter(Bt=>Bt.to>Rt).length)return null;jt<et.to&&dt.delete(jt,et.to),Rt>et.from&&dt.delete(et.from+Tt,Rt),kt=et.from+Tt+ft.length,dt.addMark(et.from+Tt,kt,it.type.create(ct||{})),dt.removeStoredMark(it.type)}}})}var react=function it(g,et){if(g===et)return!0;if(g&&et&&typeof g=="object"&&typeof et=="object"){if(g.constructor!==et.constructor)return!1;var ot,ut,ct;if(Array.isArray(g)){if(ot=g.length,ot!=et.length)return!1;for(ut=ot;ut--!==0;)if(!it(g[ut],et[ut]))return!1;return!0}if(g instanceof Map&&et instanceof Map){if(g.size!==et.size)return!1;for(ut of g.entries())if(!et.has(ut[0]))return!1;for(ut of g.entries())if(!it(ut[1],et.get(ut[0])))return!1;return!0}if(g instanceof Set&&et instanceof Set){if(g.size!==et.size)return!1;for(ut of g.entries())if(!et.has(ut[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(et)){if(ot=g.length,ot!=et.length)return!1;for(ut=ot;ut--!==0;)if(g[ut]!==et[ut])return!1;return!0}if(g.constructor===RegExp)return g.source===et.source&&g.flags===et.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===et.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===et.toString();if(ct=Object.keys(g),ot=ct.length,ot!==Object.keys(et).length)return!1;for(ut=ot;ut--!==0;)if(!Object.prototype.hasOwnProperty.call(et,ct[ut]))return!1;for(ut=ot;ut--!==0;){var dt=ct[ut];if(!(dt==="_owner"&&g.$$typeof)&&!it(g[dt],et[dt]))return!1}return!0}return g!==g&&et!==et};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports,shim=shimExports;function is(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React$1.useRef,useEffect=React$1.useEffect,useMemo=React$1.useMemo,useDebugValue=React$1.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(it,g,et,ot,ut){var ct=useRef(null);if(ct.current===null){var dt={hasValue:!1,value:null};ct.current=dt}else dt=ct.current;ct=useMemo(function(){function St(Ft){if(!kt){if(kt=!0,Tt=Ft,Ft=ot(Ft),ut!==void 0&&dt.hasValue){var Bt=dt.value;if(ut(Bt,Ft))return Rt=Bt}return Rt=Ft}if(Bt=Rt,objectIs(Tt,Ft))return Bt;var Ht=ot(Ft);return ut!==void 0&&ut(Bt,Ht)?(Tt=Ft,Bt):(Tt=Ft,Rt=Ht)}var kt=!1,Tt,Rt,jt=et===void 0?null:et;return[function(){return St(g())},jt===null?void 0:function(){return St(jt())}]},[g,et,ot,ut]);var ft=useSyncExternalStore(it,ct[0],ct[1]);return useEffect(function(){dt.hasValue=!0,dt.value=ft},[ft]),useDebugValue(ft),ft};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...it)=>g=>{it.forEach(et=>{typeof et=="function"?et(g):et&&(et.current=g)})},Portals=({contentComponent:it})=>{const g=shimExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(g)})};function getInstance(){const it=new Set;let g={};return{subscribe(et){return it.add(et),()=>{it.delete(et)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(et,ot){g={...g,[et]:ReactDOM.createPortal(ot.reactElement,ot.element,et)},it.forEach(ut=>ut())},removeRenderer(et){const ot={...g};delete ot[et],g=ot,it.forEach(ut=>ut())}}}var PureEditorContent=class extends React$3.Component{constructor(it){var g;super(it),this.editorContentRef=React$3.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((g=it.editor)!=null&&g.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const it=this.props.editor;if(it&&!it.isDestroyed&&it.options.element){if(it.contentComponent)return;const g=this.editorContentRef.current;g.append(it.view.dom),it.setOptions({element:g}),it.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=it.contentComponent.subscribe(()=>{this.setState(et=>et.hasContentComponentInitialized?et:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),it.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var it;const g=this.props.editor;if(g){this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null;try{if(!((it=g.view.dom)!=null&&it.firstChild))return;const et=document.createElement("div");et.append(g.view.dom),g.setOptions({element:et})}catch{}}}render(){const{editor:it,innerRef:g,...et}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(g,this.editorContentRef),...et}),(it==null?void 0:it.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:it.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((it,g)=>{const et=React$3.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[it.editor]);return React$3.createElement(PureEditorContent,{key:et,innerRef:g,...it})}),EditorContent=React$3.memo(EditorContentWithKey),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(it){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=it,this.lastSnapshot={editor:it,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(it){return this.subscribers.add(it),()=>{this.subscribers.delete(it)}}watch(it){if(this.editor=it,this.editor){const g=()=>{this.transactionNumber+=1,this.subscribers.forEach(ot=>ot())},et=this.editor;return et.on("transaction",g),()=>{et.off("transaction",g)}}}};function useEditorState(it){var g;const[et]=reactExports.useState(()=>new EditorStateManager(it.editor)),ot=withSelectorExports.useSyncExternalStoreWithSelector(et.subscribe,et.getSnapshot,et.getServerSnapshot,it.selector,(g=it.equalityFn)!=null?g:deepEqual);return useIsomorphicLayoutEffect(()=>et.watch(it.editor),[it.editor,et]),reactExports.useDebugValue(ot),ot}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class FR{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(et=>et())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onBeforeCreate)==null?void 0:ct.call(ut,...ot)},onBlur:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onBlur)==null?void 0:ct.call(ut,...ot)},onCreate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onCreate)==null?void 0:ct.call(ut,...ot)},onDestroy:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDestroy)==null?void 0:ct.call(ut,...ot)},onFocus:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onFocus)==null?void 0:ct.call(ut,...ot)},onSelectionUpdate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onSelectionUpdate)==null?void 0:ct.call(ut,...ot)},onTransaction:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onTransaction)==null?void 0:ct.call(ut,...ot)},onUpdate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onUpdate)==null?void 0:ct.call(ut,...ot)},onContentError:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onContentError)==null?void 0:ct.call(ut,...ot)},onDrop:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDrop)==null?void 0:ct.call(ut,...ot)},onPaste:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onPaste)==null?void 0:ct.call(ut,...ot)},onDelete:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDelete)==null?void 0:ct.call(ut,...ot)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}static compareOptions(g,et){return Object.keys(g).every(ot=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(ot)?!0:ot==="extensions"&&g.extensions&&et.extensions?g.extensions.length!==et.extensions.length?!1:g.extensions.every((ut,ct)=>{var dt;return ut===((dt=et.extensions)==null?void 0:dt[ct])}):g[ot]===et[ot])}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?FR.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((ot,ut)=>ot===g[ut]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,et=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){et&&et.setOptions(this.options.current);return}et&&!et.isDestroyed&&(et.destroy(),this.instanceId===g&&this.setEditor(null))},1)}};function useEditor(it={},g=[]){const et=reactExports.useRef(it);et.current=it;const[ot]=reactExports.useState(()=>new EditorInstanceManager(et)),ut=shimExports.useSyncExternalStore(ot.subscribe,ot.getEditor,ot.getServerSnapshot);return reactExports.useDebugValue(ut),reactExports.useEffect(ot.onRender(g)),useEditorState({editor:ut,selector:({transactionNumber:ct})=>it.shouldRerenderOnTransaction===!1||it.shouldRerenderOnTransaction===void 0?null:it.immediatelyRender&&ct===0?0:ct+1}),ut}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$3.forwardRef((it,g)=>{const{onDragStart:et}=useReactNodeView(),ot=it.as||"div";return jsxRuntimeExports.jsx(ot,{...it,ref:g,"data-node-view-wrapper":"",onDragStart:et,style:{whiteSpace:"normal",...it.style}})});React$3.createContext({markViewContentRef:()=>{}});var h=(it,g)=>{if(it==="slot")return 0;if(it instanceof Function)return it(g);const{children:et,...ot}=g??{};if(it==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[it,ot,et]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:it}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:it})=>it.wrapIn(this.name),toggleBlockquote:()=>({commands:it})=>it.toggleWrap(this.name),unsetBlockquote:()=>({commands:it})=>it.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$a=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:it=>it.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:it=>it.type.name===this.name},{style:"font-weight",getAttrs:it=>/^(bold(er)?|[5-9]\d{2,})$/.test(it)&&null}]},renderHTML({HTMLAttributes:it}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:it})=>it.setMark(this.name),toggleBold:()=>({commands:it})=>it.toggleMark(this.name),unsetBold:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:it}){return["code",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setCode:()=>({commands:it})=>it.setMark(this.name),toggleCode:()=>({commands:it})=>it.toggleMark(this.name),unsetCode:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:it=>{var g;const{languageClassPrefix:et}=this.options;if(!et)return null;const ct=[...((g=it.firstElementChild)==null?void 0:g.classList)||[]].filter(dt=>dt.startsWith(et)).map(dt=>dt.replace(et,""))[0];return ct||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:it,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:it.attrs.language?this.options.languageClassPrefix+it.attrs.language:null},0]]},addCommands(){return{setCodeBlock:it=>({commands:g})=>g.setNode(this.name,it),toggleCodeBlock:it=>({commands:g})=>g.toggleNode(this.name,"paragraph",it)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:it,$anchor:g}=this.editor.state.selection,et=g.pos===1;return!it||g.parent.type.name!==this.name?!1:et||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ut}=ot,{$from:ct,empty:dt}=ut;if(ct.parent.type!==this.type)return!1;const ft=" ".repeat(et);return dt?it.commands.insertContent(ft):it.commands.command(({tr:St})=>{const{from:kt,to:Tt}=ut,Ft=ot.doc.textBetween(kt,Tt,`
`,`
`).split(`
`).map(Bt=>ft+Bt).join(`
`);return St.replaceWith(kt,Tt,ot.schema.text(Ft)),!0})},"Shift-Tab":({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ut}=ot,{$from:ct,empty:dt}=ut;return ct.parent.type!==this.type?!1:dt?it.commands.command(({tr:ft})=>{var St;const{pos:kt}=ct,Tt=ct.start(),Rt=ct.end(),Ft=ot.doc.textBetween(Tt,Rt,`
`,`
`).split(`
`);let Bt=0,Ht=0;const Yt=kt-Tt;for(let an=0;an<Ft.length;an+=1){if(Ht+Ft[an].length>=Yt){Bt=an;break}Ht+=Ft[an].length+1}const Kt=((St=Ft[Bt].match(/^ */))==null?void 0:St[0])||"",en=Math.min(Kt.length,et);if(en===0)return!0;let tn=Tt;for(let an=0;an<Bt;an+=1)tn+=Ft[an].length+1;return ft.delete(tn,tn+en),kt-tn<=en&&ft.setSelection(TextSelection.create(ft.doc,tn)),!0}):it.commands.command(({tr:ft})=>{const{from:St,to:kt}=ut,jt=ot.doc.textBetween(St,kt,`
`,`
`).split(`
`).map(Ft=>{var Bt;const Ht=((Bt=Ft.match(/^ */))==null?void 0:Bt[0])||"",Yt=Math.min(Ht.length,et);return Ft.slice(Yt)}).join(`
`);return ft.replaceWith(St,kt,ot.schema.text(jt)),!0})},Enter:({editor:it})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=it,{selection:et}=g,{$from:ot,empty:ut}=et;if(!ut||ot.parent.type!==this.type)return!1;const ct=ot.parentOffset===ot.parent.nodeSize-2,dt=ot.parent.textContent.endsWith(`

`);return!ct||!dt?!1:it.chain().command(({tr:ft})=>(ft.delete(ot.pos-2,ot.pos),!0)).exitCode().run()},ArrowDown:({editor:it})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=it,{selection:et,doc:ot}=g,{$from:ut,empty:ct}=et;if(!ct||ut.parent.type!==this.type||!(ut.parentOffset===ut.parent.nodeSize-2))return!1;const ft=ut.after();return ft===void 0?!1:ot.nodeAt(ft)?it.commands.command(({tr:kt})=>(kt.setSelection(Selection.near(ot.resolve(ft))),!0)):it.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:it=>({language:it[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:it=>({language:it[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(it,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const et=g.clipboardData.getData("text/plain"),ot=g.clipboardData.getData("vscode-editor-data"),ut=ot?JSON.parse(ot):void 0,ct=ut==null?void 0:ut.mode;if(!et||!ct)return!1;const{tr:dt,schema:ft}=it.state,St=ft.text(et.replace(/\r\n?/g,`
`));return dt.replaceSelectionWith(this.type.create({language:ct},St)),dt.selection.$from.parent.type!==this.type&&dt.setSelection(TextSelection.near(dt.doc.resolve(Math.max(0,dt.selection.from-2)))),dt.setMeta("paste",!0),it.dispatch(dt),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:it}){return["br",mergeAttributes(this.options.HTMLAttributes,it)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:it,chain:g,state:et,editor:ot})=>it.first([()=>it.exitCode(),()=>it.command(()=>{const{selection:ut,storedMarks:ct}=et;if(ut.$from.parent.type.spec.isolating)return!1;const{keepMarks:dt}=this.options,{splittableMarks:ft}=ot.extensionManager,St=ct||ut.$to.parentOffset&&ut.$from.marks();return g().insertContent({type:this.name}).command(({tr:kt,dispatch:Tt})=>{if(Tt&&St&&dt){const Rt=St.filter(jt=>ft.includes(jt.type.name));kt.ensureMarks(Rt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(it=>({tag:`h${it}`,attrs:{level:it}}))},renderHTML({node:it,HTMLAttributes:g}){return[`h${this.options.levels.includes(it.attrs.level)?it.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.setNode(this.name,it):!1,toggleHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.toggleNode(this.name,"paragraph",it):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((it,g)=>({...it,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(it=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${it}})\\s$`),type:this.type,getAttributes:{level:it}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:it}){return["hr",mergeAttributes(this.options.HTMLAttributes,it)]},addCommands(){return{setHorizontalRule:()=>({chain:it,state:g})=>{if(!canInsertNode(g,g.schema.nodes[this.name]))return!1;const{selection:et}=g,{$to:ot}=et,ut=it();return isNodeSelection(et)?ut.insertContentAt(ot.pos,{type:this.name}):ut.insertContent({type:this.name}),ut.command(({state:ct,tr:dt,dispatch:ft})=>{if(ft){const{$to:St}=dt.selection,kt=St.end();if(St.nodeAfter)St.nodeAfter.isTextblock?dt.setSelection(TextSelection.create(dt.doc,St.pos+1)):St.nodeAfter.isBlock?dt.setSelection(NodeSelection.create(dt.doc,St.pos)):dt.setSelection(TextSelection.create(dt.doc,St.pos));else{const Tt=ct.schema.nodes[this.options.nextNodeType]||St.parent.type.contentMatch.defaultType,Rt=Tt==null?void 0:Tt.create();Rt&&(dt.insert(kt,Rt),dt.setSelection(TextSelection.create(dt.doc,kt+1)))}dt.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:it=>it.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:it=>it.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:it}){return["em",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setItalic:()=>({commands:it})=>it.setMark(this.name),toggleItalic:()=>({commands:it})=>it.toggleMark(this.name),unsetItalic:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(it,g){return it in g||(g[it]=[]),g[it]}function addToGroups(it,g,et){g[numeric]&&(g[asciinumeric]=!0,g[alphanumeric]=!0),g[ascii]&&(g[asciinumeric]=!0,g[alpha]=!0),g[asciinumeric]&&(g[alphanumeric]=!0),g[alpha]&&(g[alphanumeric]=!0),g[alphanumeric]&&(g[domain]=!0),g[emoji]&&(g[domain]=!0);for(const ot in g){const ut=registerGroup(ot,et);ut.indexOf(it)<0&&ut.push(it)}}function flagsForToken(it,g){const et={};for(const ot in g)g[ot].indexOf(it)>=0&&(et[ot]=!0);return et}function State(it=null){this.j={},this.jr=[],this.jd=null,this.t=it}State.groups={};State.prototype={accepts(){return!!this.t},go(it){const g=this,et=g.j[it];if(et)return et;for(let ot=0;ot<g.jr.length;ot++){const ut=g.jr[ot][0],ct=g.jr[ot][1];if(ct&&ut.test(it))return ct}return g.jd},has(it,g=!1){return g?it in this.j:!!this.go(it)},ta(it,g,et,ot){for(let ut=0;ut<it.length;ut++)this.tt(it[ut],g,et,ot)},tr(it,g,et,ot){ot=ot||State.groups;let ut;return g&&g.j?ut=g:(ut=new State(g),et&&ot&&addToGroups(g,et,ot)),this.jr.push([it,ut]),ut},ts(it,g,et,ot){let ut=this;const ct=it.length;if(!ct)return ut;for(let dt=0;dt<ct-1;dt++)ut=ut.tt(it[dt]);return ut.tt(it[ct-1],g,et,ot)},tt(it,g,et,ot){ot=ot||State.groups;const ut=this;if(g&&g.j)return ut.j[it]=g,g;const ct=g;let dt,ft=ut.go(it);if(ft?(dt=new State,Object.assign(dt.j,ft.j),dt.jr.push.apply(dt.jr,ft.jr),dt.jd=ft.jd,dt.t=ft.t):dt=new State,ct){if(ot)if(dt.t&&typeof dt.t=="string"){const St=Object.assign(flagsForToken(dt.t,ot),et);addToGroups(ct,St,ot)}else et&&addToGroups(ct,et,ot);dt.t=ct}return ut.j[it]=dt,dt}};const ta=(it,g,et,ot,ut)=>it.ta(g,et,ot,ut),tr=(it,g,et,ot,ut)=>it.tr(g,et,ot,ut),ts=(it,g,et,ot,ut)=>it.ts(g,et,ot,ut),tt=(it,g,et,ot,ut)=>it.tt(g,et,ot,ut),WORD$1="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA$1="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS$1="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA:COMMA$1,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS:EQUALS$1,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD:WORD$1,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE$2=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(it=[]){const g={};State.groups=g;const et=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(et,"'",APOSTROPHE),tt(et,"{",OPENBRACE),tt(et,"}",CLOSEBRACE),tt(et,"[",OPENBRACKET),tt(et,"]",CLOSEBRACKET),tt(et,"(",OPENPAREN),tt(et,")",CLOSEPAREN),tt(et,"<",OPENANGLEBRACKET),tt(et,">",CLOSEANGLEBRACKET),tt(et,"",FULLWIDTHLEFTPAREN),tt(et,"",FULLWIDTHRIGHTPAREN),tt(et,"",LEFTCORNERBRACKET),tt(et,"",RIGHTCORNERBRACKET),tt(et,"",LEFTWHITECORNERBRACKET),tt(et,"",RIGHTWHITECORNERBRACKET),tt(et,"",FULLWIDTHLESSTHAN),tt(et,"",FULLWIDTHGREATERTHAN),tt(et,"&",AMPERSAND),tt(et,"*",ASTERISK),tt(et,"@",AT),tt(et,"`",BACKTICK),tt(et,"^",CARET),tt(et,":",COLON),tt(et,",",COMMA$1),tt(et,"$",DOLLAR),tt(et,".",DOT),tt(et,"=",EQUALS$1),tt(et,"!",EXCLAMATION),tt(et,"-",HYPHEN),tt(et,"%",PERCENT),tt(et,"|",PIPE),tt(et,"+",PLUS),tt(et,"#",POUND),tt(et,"?",QUERY),tt(et,'"',QUOTE),tt(et,"/",SLASH),tt(et,";",SEMI),tt(et,"~",TILDE),tt(et,"_",UNDERSCORE),tt(et,"\\",BACKSLASH),tt(et,"",FULLWIDTHMIDDLEDOT);const ot=tr(et,DIGIT,NUM,{[numeric]:!0});tr(ot,DIGIT,ot);const ut=tr(ot,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),ct=tr(ot,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),dt=tr(et,ASCII_LETTER,WORD$1,{[ascii]:!0});tr(dt,DIGIT,ut),tr(dt,ASCII_LETTER,dt),tr(ut,DIGIT,ut),tr(ut,ASCII_LETTER,ut);const ft=tr(et,LETTER,UWORD,{[alpha]:!0});tr(ft,ASCII_LETTER),tr(ft,DIGIT,ct),tr(ft,LETTER,ft),tr(ct,DIGIT,ct),tr(ct,ASCII_LETTER),tr(ct,LETTER,ct);const St=tt(et,LF,NL,{[whitespace]:!0}),kt=tt(et,CR,WS,{[whitespace]:!0}),Tt=tr(et,SPACE$2,WS,{[whitespace]:!0});tt(et,OBJECT_REPLACEMENT,Tt),tt(kt,LF,St),tt(kt,OBJECT_REPLACEMENT,Tt),tr(kt,SPACE$2,Tt),tt(Tt,CR),tt(Tt,LF),tr(Tt,SPACE$2,Tt),tt(Tt,OBJECT_REPLACEMENT,Tt);const Rt=tr(et,EMOJI,EMOJI$1,{[emoji]:!0});tt(Rt,"#"),tr(Rt,EMOJI,Rt),tt(Rt,EMOJI_VARIATION,Rt);const jt=tt(Rt,EMOJI_JOINER);tt(jt,"#"),tr(jt,EMOJI,Rt);const Ft=[[ASCII_LETTER,dt],[DIGIT,ut]],Bt=[[ASCII_LETTER,null],[LETTER,ft],[DIGIT,ct]];for(let Ht=0;Ht<tlds.length;Ht++)fastts(et,tlds[Ht],TLD,WORD$1,Ft);for(let Ht=0;Ht<utlds.length;Ht++)fastts(et,utlds[Ht],UTLD,UWORD,Bt);addToGroups(TLD,{tld:!0,ascii:!0},g),addToGroups(UTLD,{utld:!0,alpha:!0},g),fastts(et,"file",SCHEME,WORD$1,Ft),fastts(et,"mailto",SCHEME,WORD$1,Ft),fastts(et,"http",SLASH_SCHEME,WORD$1,Ft),fastts(et,"https",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftp",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftps",SLASH_SCHEME,WORD$1,Ft),addToGroups(SCHEME,{scheme:!0,ascii:!0},g),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},g),it=it.sort((Ht,Yt)=>Ht[0]>Yt[0]?1:-1);for(let Ht=0;Ht<it.length;Ht++){const Yt=it[Ht][0],Kt=it[Ht][1]?{[scheme]:!0}:{[slashscheme]:!0};Yt.indexOf("-")>=0?Kt[domain]=!0:ASCII_LETTER.test(Yt)?DIGIT.test(Yt)?Kt[asciinumeric]=!0:Kt[ascii]=!0:Kt[numeric]=!0,ts(et,Yt,Yt,Kt)}return ts(et,"localhost",LOCALHOST,{ascii:!0}),et.jd=new State(SYM),{start:et,tokens:Object.assign({groups:g},tk)}}function run$1(it,g){const et=stringToArray$1(g.replace(/[A-Z]/g,ft=>ft.toLowerCase())),ot=et.length,ut=[];let ct=0,dt=0;for(;dt<ot;){let ft=it,St=null,kt=0,Tt=null,Rt=-1,jt=-1;for(;dt<ot&&(St=ft.go(et[dt]));)ft=St,ft.accepts()?(Rt=0,jt=0,Tt=ft):Rt>=0&&(Rt+=et[dt].length,jt++),kt+=et[dt].length,ct+=et[dt].length,dt++;ct-=Rt,dt-=jt,kt-=Rt,ut.push({t:Tt.t,v:g.slice(ct-kt,ct),s:ct-kt,e:ct})}return ut}function stringToArray$1(it){const g=[],et=it.length;let ot=0;for(;ot<et;){let ut=it.charCodeAt(ot),ct,dt=ut<55296||ut>56319||ot+1===et||(ct=it.charCodeAt(ot+1))<56320||ct>57343?it[ot]:it.slice(ot,ot+2);g.push(dt),ot+=dt.length}return g}function fastts(it,g,et,ot,ut){let ct;const dt=g.length;for(let ft=0;ft<dt-1;ft++){const St=g[ft];it.j[St]?ct=it.j[St]:(ct=new State(ot),ct.jr=ut.slice(),it.j[St]=ct),it=ct}return ct=new State(et),ct.jr=ut.slice(),it.j[g[dt-1]]=ct,ct}function decodeTlds(it){const g=[],et=[];let ot=0,ut="0123456789";for(;ot<it.length;){let ct=0;for(;ut.indexOf(it[ot+ct])>=0;)ct++;if(ct>0){g.push(et.join(""));for(let dt=parseInt(it.substring(ot,ot+ct),10);dt>0;dt--)et.pop();ot+=ct}else et.push(it[ot]),ot++}return g}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(it,g=null){let et=Object.assign({},defaults);it&&(et=Object.assign(et,it instanceof Options?it.o:it));const ot=et.ignoreTags,ut=[];for(let ct=0;ct<ot.length;ct++)ut.push(ot[ct].toUpperCase());this.o=et,g&&(this.defaultRender=g),this.ignoreTags=ut}Options.prototype={o:defaults,ignoreTags:[],defaultRender(it){return it},check(it){return this.get("validate",it.toString(),it)},get(it,g,et){const ot=g!=null;let ut=this.o[it];return ut&&(typeof ut=="object"?(ut=et.t in ut?ut[et.t]:defaults[it],typeof ut=="function"&&ot&&(ut=ut(g,et))):typeof ut=="function"&&ot&&(ut=ut(g,et.t,et)),ut)},getObj(it,g,et){let ot=this.o[it];return typeof ot=="function"&&g!=null&&(ot=ot(g,et.t,et)),ot},render(it){const g=it.render(this);return(this.get("render",null,it)||this.defaultRender)(g,it.t,it)}};function noop(it){return it}function MultiToken(it,g){this.t="token",this.v=it,this.tk=g}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(it){return this.toString()},toFormattedString(it){const g=this.toString(),et=it.get("truncate",g,this),ot=it.get("format",g,this);return et&&ot.length>et?ot.substring(0,et)+"":ot},toFormattedHref(it){return it.get("formatHref",this.toHref(it.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(it=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(it),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(it){return{type:this.t,value:this.toFormattedString(it),isLink:this.isLink,href:this.toFormattedHref(it),start:this.startIndex(),end:this.endIndex()}},validate(it){return it.get("validate",this.toString(),this)},render(it){const g=this,et=this.toHref(it.get("defaultProtocol")),ot=it.get("formatHref",et,this),ut=it.get("tagName",et,g),ct=this.toFormattedString(it),dt={},ft=it.get("className",et,g),St=it.get("target",et,g),kt=it.get("rel",et,g),Tt=it.getObj("attributes",et,g),Rt=it.getObj("events",et,g);return dt.href=ot,ft&&(dt.class=ft),St&&(dt.target=St),kt&&(dt.rel=kt),Tt&&Object.assign(dt,Tt),{tagName:ut,attributes:dt,content:ct,eventListeners:Rt}}};function createTokenClass(it,g){class et extends MultiToken{constructor(ut,ct){super(ut,ct),this.t=it}}for(const ot in g)et.prototype[ot]=g[ot];return et.t=it,et}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$4=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(it=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${it}://${this.v}`},hasProtocol(){const it=this.tk;return it.length>=2&&it[0].t!==LOCALHOST&&it[1].t===COLON}}),makeState=it=>new State(it);function init$1({groups:it}){const g=it.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),et=[APOSTROPHE,COLON,COMMA$1,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],ot=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ut=makeState(),ct=tt(ut,TILDE);ta(ct,ot,ct),ta(ct,it.domain,ct);const dt=makeState(),ft=makeState(),St=makeState();ta(ut,it.domain,dt),ta(ut,it.scheme,ft),ta(ut,it.slashscheme,St),ta(dt,ot,ct),ta(dt,it.domain,dt);const kt=tt(dt,AT);tt(ct,AT,kt),tt(ft,AT,kt),tt(St,AT,kt);const Tt=tt(ct,DOT);ta(Tt,ot,ct),ta(Tt,it.domain,ct);const Rt=makeState();ta(kt,it.domain,Rt),ta(Rt,it.domain,Rt);const jt=tt(Rt,DOT);ta(jt,it.domain,Rt);const Ft=makeState(Email);ta(jt,it.tld,Ft),ta(jt,it.utld,Ft),tt(kt,LOCALHOST,Ft);const Bt=tt(Rt,HYPHEN);tt(Bt,HYPHEN,Bt),ta(Bt,it.domain,Rt),ta(Ft,it.domain,Rt),tt(Ft,DOT,jt),tt(Ft,HYPHEN,Bt);const Ht=tt(Ft,COLON);ta(Ht,it.numeric,Email);const Yt=tt(dt,HYPHEN),zt=tt(dt,DOT);tt(Yt,HYPHEN,Yt),ta(Yt,it.domain,dt),ta(zt,ot,ct),ta(zt,it.domain,dt);const Kt=makeState(Url);ta(zt,it.tld,Kt),ta(zt,it.utld,Kt),ta(Kt,it.domain,dt),ta(Kt,ot,ct),tt(Kt,DOT,zt),tt(Kt,HYPHEN,Yt),tt(Kt,AT,kt);const en=tt(Kt,COLON),tn=makeState(Url);ta(en,it.numeric,tn);const on=makeState(Url),an=makeState();ta(on,g,on),ta(on,et,an),ta(an,g,on),ta(an,et,an),tt(Kt,SLASH,on),tt(tn,SLASH,on);const un=tt(ft,COLON),dn=tt(St,COLON),Sn=tt(dn,SLASH),mn=tt(Sn,SLASH);ta(ft,it.domain,dt),tt(ft,DOT,zt),tt(ft,HYPHEN,Yt),ta(St,it.domain,dt),tt(St,DOT,zt),tt(St,HYPHEN,Yt),ta(un,it.domain,on),tt(un,SLASH,on),tt(un,QUERY,on),ta(mn,it.domain,on),ta(mn,g,on),tt(mn,SLASH,on);const bn=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let En=0;En<bn.length;En++){const[kn,Pn]=bn[En],Ln=tt(on,kn);tt(an,kn,Ln),tt(Ln,Pn,on);const gn=makeState(Url);ta(Ln,g,gn);const Mn=makeState();ta(Ln,et),ta(gn,g,gn),ta(gn,et,Mn),ta(Mn,g,gn),ta(Mn,et,Mn),tt(gn,Pn,on),tt(Mn,Pn,on)}return tt(ut,LOCALHOST,Kt),tt(ut,NL,Nl),{start:ut,tokens:tk}}function run(it,g,et){let ot=et.length,ut=0,ct=[],dt=[];for(;ut<ot;){let ft=it,St=null,kt=null,Tt=0,Rt=null,jt=-1;for(;ut<ot&&!(St=ft.go(et[ut].t));)dt.push(et[ut++]);for(;ut<ot&&(kt=St||ft.go(et[ut].t));)St=null,ft=kt,ft.accepts()?(jt=0,Rt=ft):jt>=0&&jt++,ut++,Tt++;if(jt<0)ut-=Tt,ut<ot&&(dt.push(et[ut]),ut++);else{dt.length>0&&(ct.push(initMultiToken(Text$4,g,dt)),dt=[]),ut-=jt,Tt-=jt;const Ft=Rt.t,Bt=et.slice(ut-Tt,ut);ct.push(initMultiToken(Ft,g,Bt))}}return dt.length>0&&ct.push(initMultiToken(Text$4,g,dt)),ct}function initMultiToken(it,g,et){const ot=et[0].s,ut=et[et.length-1].e,ct=g.slice(ot,ut);return new it(ct,et)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(it,g=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${it}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(it))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([it,g])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let it=0;it<INIT.tokenQueue.length;it++)INIT.tokenQueue[it][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let it=0;it<INIT.pluginQueue.length;it++)INIT.pluginQueue[it][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(it){return INIT.initialized||init(),run(INIT.parser.start,it,run$1(INIT.scanner.start,it))}tokenize.scan=run$1;function find$1(it,g=null,et=null){if(g&&typeof g=="object"){if(et)throw Error(`linkifyjs: Invalid link type ${g}; must be a string`);et=g,g=null}const ot=new Options(et),ut=tokenize(it),ct=[];for(let dt=0;dt<ut.length;dt++){const ft=ut[dt];ft.isLink&&(!g||ft.t===g)&&ot.check(ft)&&ct.push(ft.toFormattedObject(ot))}return ct}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(it){return it.length===1?it[0].isLink:it.length===3&&it[1].isLink?["()","[]"].includes(it[0].value+it[2].value):!1}function autolink(it){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(g,et,ot)=>{const ut=g.some(kt=>kt.docChanged)&&!et.doc.eq(ot.doc),ct=g.some(kt=>kt.getMeta("preventAutolink"));if(!ut||ct)return;const{tr:dt}=ot,ft=combineTransactionSteps(et.doc,[...g]);if(getChangedRanges(ft).forEach(({newRange:kt})=>{const Tt=findChildrenInRange(ot.doc,kt,Ft=>Ft.isTextblock);let Rt,jt;if(Tt.length>1)Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,Rt.pos+Rt.node.nodeSize,void 0," ");else if(Tt.length){const Ft=ot.doc.textBetween(kt.from,kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(Ft))return;Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,kt.to,void 0," ")}if(Rt&&jt){const Ft=jt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(Ft.length<=0)return!1;const Bt=Ft[Ft.length-1],Ht=Rt.pos+jt.lastIndexOf(Bt);if(!Bt)return!1;const Yt=tokenize(Bt).map(zt=>zt.toObject(it.defaultProtocol));if(!isValidLinkStructure(Yt))return!1;Yt.filter(zt=>zt.isLink).map(zt=>({...zt,from:Ht+zt.start+1,to:Ht+zt.end+1})).filter(zt=>ot.schema.marks.code?!ot.doc.rangeHasMark(zt.from,zt.to,ot.schema.marks.code):!0).filter(zt=>it.validate(zt.value)).filter(zt=>it.shouldAutoLink(zt.value)).forEach(zt=>{getMarksBetween(zt.from,zt.to,ot.doc).some(Kt=>Kt.mark.type===it.type)||dt.addMark(zt.from,zt.to,it.type.create({href:zt.href}))})}}),!!dt.steps.length)return dt}})}function clickHandler(it){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(g,et,ot)=>{var ut,ct;if(ot.button!==0||!g.editable)return!1;let dt=null;if(ot.target instanceof HTMLAnchorElement)dt=ot.target;else{let Tt=ot.target;const Rt=[];for(;Tt.nodeName!=="DIV";)Rt.push(Tt),Tt=Tt.parentNode;dt=Rt.find(jt=>jt.nodeName==="A")}if(!dt)return!1;const ft=getAttributes$1(g.state,it.type.name),St=(ut=dt==null?void 0:dt.href)!=null?ut:ft.href,kt=(ct=dt==null?void 0:dt.target)!=null?ct:ft.target;return it.enableClickSelection&&it.editor.commands.extendMarkRange(it.type.name),dt&&St?(window.open(St,kt),!0):!1}}})}function pasteHandler(it){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(g,et,ot)=>{const{state:ut}=g,{selection:ct}=ut,{empty:dt}=ct;if(dt)return!1;let ft="";ot.content.forEach(kt=>{ft+=kt.textContent});const St=find$1(ft,{defaultProtocol:it.defaultProtocol}).find(kt=>kt.isLink&&kt.value===ft);return!ft||!St?!1:it.editor.commands.setMark(it.type,{href:St.href})}}})}function isAllowedUri(it,g){const et=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return g&&g.forEach(ot=>{const ut=typeof ot=="string"?ot:ot.scheme;ut&&et.push(ut)}),!it||it.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${et.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(it=>{if(typeof it=="string"){registerCustomProtocol(it);return}registerCustomProtocol(it.scheme,it.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(it,g)=>!!isAllowedUri(it,g.protocols),validate:it=>!!it,shouldAutoLink:it=>!!it}},addAttributes(){return{href:{default:null,parseHTML(it){return it.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:it=>{const g=it.getAttribute("href");return!g||!this.options.isAllowedUri(g,{defaultValidate:et=>!!isAllowedUri(et,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:it}){return this.options.isAllowedUri(it.href,{defaultValidate:g=>!!isAllowedUri(g,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,it),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...it,href:""}),0]},addCommands(){return{setLink:it=>({chain:g})=>{const{href:et}=it;return this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?g().setMark(this.name,it).setMeta("preventAutolink",!0).run():!1},toggleLink:it=>({chain:g})=>{const{href:et}=it||{};return et&&!this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:g().toggleMark(this.name,it,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:it})=>it().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:it=>{const g=[];if(it){const{protocols:et,defaultProtocol:ot}=this.options,ut=find$1(it).filter(ct=>ct.isLink&&this.options.isAllowedUri(ct.value,{defaultValidate:dt=>!!isAllowedUri(dt,et),protocols:et,defaultProtocol:ot}));ut.length&&ut.forEach(ct=>g.push({text:ct.value,data:{href:ct.href},index:ct.start}))}return g},type:this.type,getAttributes:it=>{var g;return{href:(g=it.data)==null?void 0:g.href}}})]},addProseMirrorPlugins(){const it=[],{protocols:g,defaultProtocol:et}=this.options;return this.options.autolink&&it.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:ot=>this.options.isAllowedUri(ot,{defaultValidate:ut=>!!isAllowedUri(ut,g),protocols:g,defaultProtocol:et}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&it.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&it.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),it}}),index_default$9=Link,__defProp$1=Object.defineProperty,__export=(it,g)=>{for(var et in g)__defProp$1(it,et,{get:g[et],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleBulletList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let it=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[it]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:it}){return["li",mergeAttributes(this.options.HTMLAttributes,it),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(it,g)=>{const{$from:et}=g.selection,ot=getNodeType(it,g.schema);let ut=null,ct=et.depth,dt=et.pos,ft=null;for(;ct>0&&ft===null;)ut=et.node(ct),ut.type===ot?ft=ct:(ct-=1,dt-=1);return ft===null?null:{$pos:g.doc.resolve(dt),depth:ft}},getNextListDepth=(it,g)=>{const et=findListItemPos(it,g);if(!et)return!1;const[,ot]=getNodeAtPosition(g,it,et.$pos.pos+4);return ot},hasListBefore=(it,g,et)=>{const{$anchor:ot}=it.selection,ut=Math.max(0,ot.pos-2),ct=it.doc.resolve(ut).node();return!(!ct||!et.includes(ct.type.name))},hasListItemBefore=(it,g)=>{var et;const{$anchor:ot}=g.selection,ut=g.doc.resolve(ot.pos-2);return!(ut.index()===0||((et=ut.nodeBefore)==null?void 0:et.type.name)!==it)},listItemHasSubList=(it,g,et)=>{if(!et)return!1;const ot=getNodeType(it,g.schema);let ut=!1;return et.descendants(ct=>{ct.type===ot&&(ut=!0)}),ut},handleBackspace=(it,g,et)=>{if(it.commands.undoInputRule())return!0;if(it.state.selection.from!==it.state.selection.to)return!1;if(!isNodeActive(it.state,g)&&hasListBefore(it.state,g,et)){const{$anchor:ft}=it.state.selection,St=it.state.doc.resolve(ft.before()-1),kt=[];St.node().descendants((jt,Ft)=>{jt.type.name===g&&kt.push({node:jt,pos:Ft})});const Tt=kt.at(-1);if(!Tt)return!1;const Rt=it.state.doc.resolve(St.start()+Tt.pos+1);return it.chain().cut({from:ft.start()-1,to:ft.end()+1},Rt.end()).joinForward().run()}if(!isNodeActive(it.state,g)||!isAtStartOfNode(it.state))return!1;const ot=findListItemPos(g,it.state);if(!ot)return!1;const ct=it.state.doc.resolve(ot.$pos.pos-2).node(ot.depth),dt=listItemHasSubList(g,it.state,ct);return hasListItemBefore(g,it.state)&&!dt?it.commands.joinItemBackward():it.chain().liftListItem(g).run()},nextListIsDeeper=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et>ot.depth},nextListIsHigher=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et<ot.depth},handleDelete=(it,g)=>{if(!isNodeActive(it.state,g)||!isAtEndOfNode(it.state,g))return!1;const{selection:et}=it.state,{$from:ot,$to:ut}=et;return!et.empty&&ot.sameParent(ut)?!1:nextListIsDeeper(g,it.state)?it.chain().focus(it.state.selection.from+4).lift(g).joinBackward().run():nextListIsHigher(g,it.state)?it.chain().joinForward().joinBackward().run():it.commands.joinItemForward()},hasListItemAfter=(it,g)=>{var et;const{$anchor:ot}=g.selection,ut=g.doc.resolve(ot.pos-ot.parentOffset-2);return!(ut.index()===ut.parent.childCount-1||((et=ut.nodeAfter)==null?void 0:et.type.name)!==it)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},"Mod-Delete":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},Backspace:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g},"Mod-Backspace":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:it=>it.hasAttribute("start")?parseInt(it.getAttribute("start")||"",10):1},type:{default:null,parseHTML:it=>it.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:it}){const{start:g,...et}=it;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,et),0]:["ol",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleOrderedList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let it=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1],editor:this.editor})),[it]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:it=>{const g=it.getAttribute("data-checked");return g===""||g==="true"},renderHTML:it=>({"data-checked":it.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:it,HTMLAttributes:g}){return["li",mergeAttributes(this.options.HTMLAttributes,g,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:it.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const it={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...it,Tab:()=>this.editor.commands.sinkListItem(this.name)}:it},addNodeView(){return({node:it,HTMLAttributes:g,getPos:et,editor:ot})=>{const ut=document.createElement("li"),ct=document.createElement("label"),dt=document.createElement("span"),ft=document.createElement("input"),St=document.createElement("div"),kt=Tt=>{var Rt,jt;ft.ariaLabel=((jt=(Rt=this.options.a11y)==null?void 0:Rt.checkboxLabel)==null?void 0:jt.call(Rt,Tt,ft.checked))||`Task item checkbox for ${Tt.textContent||"empty task item"}`};return kt(it),ct.contentEditable="false",ft.type="checkbox",ft.addEventListener("mousedown",Tt=>Tt.preventDefault()),ft.addEventListener("change",Tt=>{if(!ot.isEditable&&!this.options.onReadOnlyChecked){ft.checked=!ft.checked;return}const{checked:Rt}=Tt.target;ot.isEditable&&typeof et=="function"&&ot.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:jt})=>{const Ft=et();if(typeof Ft!="number")return!1;const Bt=jt.doc.nodeAt(Ft);return jt.setNodeMarkup(Ft,void 0,{...Bt==null?void 0:Bt.attrs,checked:Rt}),!0}).run(),!ot.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(it,Rt)||(ft.checked=!ft.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Tt,Rt])=>{ut.setAttribute(Tt,Rt)}),ut.dataset.checked=it.attrs.checked,ft.checked=it.attrs.checked,ct.append(ft,dt),ut.append(ct,St),Object.entries(g).forEach(([Tt,Rt])=>{ut.setAttribute(Tt,Rt)}),{dom:ut,contentDOM:St,update:Tt=>Tt.type!==this.type?!1:(ut.dataset.checked=Tt.attrs.checked,ft.checked=Tt.attrs.checked,kt(Tt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:it=>({checked:it[it.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:it})=>it.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const it=[];return this.options.bulletList!==!1&&it.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&it.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&it.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&it.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&it.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&it.push(TaskList.configure(this.options.taskList)),it}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:it}){return["p",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setParagraph:()=>({commands:it})=>it.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["s",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setStrike:()=>({commands:it})=>it.setMark(this.name),toggleStrike:()=>({commands:it})=>it.toggleMark(this.name),unsetStrike:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$3=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["u",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setUnderline:()=>({commands:it})=>it.setMark(this.name),toggleUnderline:()=>({commands:it})=>it.toggleMark(this.name),unsetUnderline:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$8=Underline;function dropCursor(it={}){return new Plugin({view(g){return new DropCursorView(g,it)}})}class DropCursorView{constructor(g,et){var ot;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(ot=et.width)!==null&&ot!==void 0?ot:1,this.color=et.color===!1?void 0:et.color||"black",this.class=et.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ut=>{let ct=dt=>{this[ut](dt)};return g.dom.addEventListener(ut,ct),{name:ut,handler:ct}})}destroy(){this.handlers.forEach(({name:g,handler:et})=>this.editorView.dom.removeEventListener(g,et))}update(g,et){this.cursorPos!=null&&et.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),et=!g.parent.inlineContent,ot,ut=this.editorView.dom,ct=ut.getBoundingClientRect(),dt=ct.width/ut.offsetWidth,ft=ct.height/ut.offsetHeight;if(et){let Rt=g.nodeBefore,jt=g.nodeAfter;if(Rt||jt){let Ft=this.editorView.nodeDOM(this.cursorPos-(Rt?Rt.nodeSize:0));if(Ft){let Bt=Ft.getBoundingClientRect(),Ht=Rt?Bt.bottom:Bt.top;Rt&&jt&&(Ht=(Ht+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Yt=this.width/2*ft;ot={left:Bt.left,right:Bt.right,top:Ht-Yt,bottom:Ht+Yt}}}}if(!ot){let Rt=this.editorView.coordsAtPos(this.cursorPos),jt=this.width/2*dt;ot={left:Rt.left-jt,right:Rt.left+jt,top:Rt.top,bottom:Rt.bottom}}let St=this.editorView.dom.offsetParent;this.element||(this.element=St.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",et),this.element.classList.toggle("prosemirror-dropcursor-inline",!et);let kt,Tt;if(!St||St==document.body&&getComputedStyle(St).position=="static")kt=-pageXOffset,Tt=-pageYOffset;else{let Rt=St.getBoundingClientRect(),jt=Rt.width/St.offsetWidth,Ft=Rt.height/St.offsetHeight;kt=Rt.left-St.scrollLeft*jt,Tt=Rt.top-St.scrollTop*Ft}this.element.style.left=(ot.left-kt)/dt+"px",this.element.style.top=(ot.top-Tt)/ft+"px",this.element.style.width=(ot.right-ot.left)/dt+"px",this.element.style.height=(ot.bottom-ot.top)/ft+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let et=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),ot=et&&et.inside>=0&&this.editorView.state.doc.nodeAt(et.inside),ut=ot&&ot.type.spec.disableDropCursor,ct=typeof ut=="function"?ut(this.editorView,et,g):ut;if(et&&!ct){let dt=et.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ft=dropPoint(this.editorView.state.doc,dt,this.editorView.dragging.slice);ft!=null&&(dt=ft)}this.setCursor(dt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){this.editorView.dom.contains(g.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(g){super(g,g)}map(g,et){let ot=g.resolve(et.map(this.head));return GapCursor.valid(ot)?new GapCursor(ot):Selection.near(ot)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(et.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let et=g.parent;if(et.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let ot=et.type.spec.allowGapCursor;if(ot!=null)return ot;let ut=et.contentMatchAt(g.index()).defaultType;return ut&&ut.isTextblock}static findGapCursorFrom(g,et,ot=!1){e:for(;;){if(!ot&&GapCursor.valid(g))return g;let ut=g.pos,ct=null;for(let dt=g.depth;;dt--){let ft=g.node(dt);if(et>0?g.indexAfter(dt)<ft.childCount:g.index(dt)>0){ct=ft.child(et>0?g.indexAfter(dt):g.index(dt)-1);break}else if(dt==0)return null;ut+=et;let St=g.doc.resolve(ut);if(GapCursor.valid(St))return St}for(;;){let dt=et>0?ct.firstChild:ct.lastChild;if(!dt){if(ct.isAtom&&!ct.isText&&!NodeSelection.isSelectable(ct)){g=g.doc.resolve(ut+ct.nodeSize*et),ot=!1;continue e}break}ct=dt,ut+=et;let ft=g.doc.resolve(ut);if(GapCursor.valid(ft))return ft}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let et=g.resolve(this.pos);return GapCursor.valid(et)?new GapCursor(et):Selection.near(et)}}function closedBefore(it){for(let g=it.depth;g>=0;g--){let et=it.index(g),ot=it.node(g);if(et==0){if(ot.type.spec.isolating)return!0;continue}for(let ut=ot.child(et-1);;ut=ut.lastChild){if(ut.childCount==0&&!ut.inlineContent||ut.isAtom||ut.type.spec.isolating)return!0;if(ut.inlineContent)return!1}}return!0}function closedAfter(it){for(let g=it.depth;g>=0;g--){let et=it.indexAfter(g),ot=it.node(g);if(et==ot.childCount){if(ot.type.spec.isolating)return!0;continue}for(let ut=ot.child(et);;ut=ut.firstChild){if(ut.childCount==0&&!ut.inlineContent||ut.isAtom||ut.type.spec.isolating)return!0;if(ut.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(it,g,et){return g.pos==et.pos&&GapCursor.valid(et)?new GapCursor(et):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(it,g){const et=it=="vert"?g>0?"down":"up":g>0?"right":"left";return function(ot,ut,ct){let dt=ot.selection,ft=g>0?dt.$to:dt.$from,St=dt.empty;if(dt instanceof TextSelection){if(!ct.endOfTextblock(et)||ft.depth==0)return!1;St=!1,ft=ot.doc.resolve(g>0?ft.after():ft.before())}let kt=GapCursor.findGapCursorFrom(ft,g,St);return kt?(ut&&ut(ot.tr.setSelection(new GapCursor(kt))),!0):!1}}function handleClick(it,g,et){if(!it||!it.editable)return!1;let ot=it.state.doc.resolve(g);if(!GapCursor.valid(ot))return!1;let ut=it.posAtCoords({left:et.clientX,top:et.clientY});return ut&&ut.inside>-1&&NodeSelection.isSelectable(it.state.doc.nodeAt(ut.inside))?!1:(it.dispatch(it.state.tr.setSelection(new GapCursor(ot))),!0)}function beforeinput(it,g){if(g.inputType!="insertCompositionText"||!(it.state.selection instanceof GapCursor))return!1;let{$from:et}=it.state.selection,ot=et.parent.contentMatchAt(et.index()).findWrapping(it.state.schema.nodes.text);if(!ot)return!1;let ut=Fragment.empty;for(let dt=ot.length-1;dt>=0;dt--)ut=Fragment.from(ot[dt].createAndFill(null,ut));let ct=it.state.tr.replace(et.pos,et.pos,new Slice(ut,0,0));return ct.setSelection(TextSelection.near(ct.doc.resolve(et.pos+1))),it.dispatch(ct),!1}function drawGapCursor(it){if(!(it.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(it.doc,[Decoration.widget(it.selection.head,g,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function it(){};RopeSequence.prototype.append=function it(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function it(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function it(g){return new Append(this,g)};RopeSequence.prototype.slice=function it(g,et){return g===void 0&&(g=0),et===void 0&&(et=this.length),g>=et?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,et))};RopeSequence.prototype.get=function it(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length),et<=ot?this.forEachInner(g,et,ot,0):this.forEachInvertedInner(g,et,ot,0)};RopeSequence.prototype.map=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length);var ut=[];return this.forEach(function(ct,dt){return ut.push(g(ct,dt))},et,ot),ut};RopeSequence.from=function it(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(it){function g(ot){it.call(this),this.values=ot}it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g;var et={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function(ut,ct){return ut==0&&ct==this.length?this:new g(this.values.slice(ut,ct))},g.prototype.getInner=function(ut){return this.values[ut]},g.prototype.forEachInner=function(ut,ct,dt,ft){for(var St=ct;St<dt;St++)if(ut(this.values[St],ft+St)===!1)return!1},g.prototype.forEachInvertedInner=function(ut,ct,dt,ft){for(var St=ct-1;St>=dt;St--)if(ut(this.values[St],ft+St)===!1)return!1},g.prototype.leafAppend=function(ut){if(this.length+ut.length<=GOOD_LEAF_SIZE)return new g(this.values.concat(ut.flatten()))},g.prototype.leafPrepend=function(ut){if(this.length+ut.length<=GOOD_LEAF_SIZE)return new g(ut.flatten().concat(this.values))},et.length.get=function(){return this.values.length},et.depth.get=function(){return 0},Object.defineProperties(g.prototype,et),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(it){function g(et,ot){it.call(this),this.left=et,this.right=ot,this.length=et.length+ot.length,this.depth=Math.max(et.depth,ot.depth)+1}return it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(ot){return ot<this.left.length?this.left.get(ot):this.right.get(ot-this.left.length)},g.prototype.forEachInner=function(ot,ut,ct,dt){var ft=this.left.length;if(ut<ft&&this.left.forEachInner(ot,ut,Math.min(ct,ft),dt)===!1||ct>ft&&this.right.forEachInner(ot,Math.max(ut-ft,0),Math.min(this.length,ct)-ft,dt+ft)===!1)return!1},g.prototype.forEachInvertedInner=function(ot,ut,ct,dt){var ft=this.left.length;if(ut>ft&&this.right.forEachInvertedInner(ot,ut-ft,Math.max(ct,ft)-ft,dt+ft)===!1||ct<ft&&this.left.forEachInvertedInner(ot,Math.min(ut,ft),ct,dt)===!1)return!1},g.prototype.sliceInner=function(ot,ut){if(ot==0&&ut==this.length)return this;var ct=this.left.length;return ut<=ct?this.left.slice(ot,ut):ot>=ct?this.right.slice(ot-ct,ut-ct):this.left.slice(ot,ct).append(this.right.slice(0,ut-ct))},g.prototype.leafAppend=function(ot){var ut=this.right.leafAppend(ot);if(ut)return new g(this.left,ut)},g.prototype.leafPrepend=function(ot){var ut=this.left.leafPrepend(ot);if(ut)return new g(ut,this.right)},g.prototype.appendInner=function(ot){return this.left.depth>=Math.max(this.right.depth,ot.depth)+1?new g(this.left,new g(this.right,ot)):new g(this,ot)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,et){this.items=g,this.eventCount=et}popEvent(g,et){if(this.eventCount==0)return null;let ot=this.items.length;for(;;ot--)if(this.items.get(ot-1).selection){--ot;break}let ut,ct;et&&(ut=this.remapping(ot,this.items.length),ct=ut.maps.length);let dt=g.tr,ft,St,kt=[],Tt=[];return this.items.forEach((Rt,jt)=>{if(!Rt.step){ut||(ut=this.remapping(ot,jt+1),ct=ut.maps.length),ct--,Tt.push(Rt);return}if(ut){Tt.push(new Item(Rt.map));let Ft=Rt.step.map(ut.slice(ct)),Bt;Ft&&dt.maybeStep(Ft).doc&&(Bt=dt.mapping.maps[dt.mapping.maps.length-1],kt.push(new Item(Bt,void 0,void 0,kt.length+Tt.length))),ct--,Bt&&ut.appendMap(Bt,ct)}else dt.maybeStep(Rt.step);if(Rt.selection)return ft=ut?Rt.selection.map(ut.slice(ct)):Rt.selection,St=new Branch(this.items.slice(0,ot).append(Tt.reverse().concat(kt)),this.eventCount-1),!1},this.items.length,0),{remaining:St,transform:dt,selection:ft}}addTransform(g,et,ot,ut){let ct=[],dt=this.eventCount,ft=this.items,St=!ut&&ft.length?ft.get(ft.length-1):null;for(let Tt=0;Tt<g.steps.length;Tt++){let Rt=g.steps[Tt].invert(g.docs[Tt]),jt=new Item(g.mapping.maps[Tt],Rt,et),Ft;(Ft=St&&St.merge(jt))&&(jt=Ft,Tt?ct.pop():ft=ft.slice(0,ft.length-1)),ct.push(jt),et&&(dt++,et=void 0),ut||(St=jt)}let kt=dt-ot.depth;return kt>DEPTH_OVERFLOW&&(ft=cutOffEvents(ft,kt),dt-=kt),new Branch(ft.append(ct),dt)}remapping(g,et){let ot=new Mapping;return this.items.forEach((ut,ct)=>{let dt=ut.mirrorOffset!=null&&ct-ut.mirrorOffset>=g?ot.maps.length-ut.mirrorOffset:void 0;ot.appendMap(ut.map,dt)},g,et),ot}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(et=>new Item(et))),this.eventCount)}rebased(g,et){if(!this.eventCount)return this;let ot=[],ut=Math.max(0,this.items.length-et),ct=g.mapping,dt=g.steps.length,ft=this.eventCount;this.items.forEach(jt=>{jt.selection&&ft--},ut);let St=et;this.items.forEach(jt=>{let Ft=ct.getMirror(--St);if(Ft==null)return;dt=Math.min(dt,Ft);let Bt=ct.maps[Ft];if(jt.step){let Ht=g.steps[Ft].invert(g.docs[Ft]),Yt=jt.selection&&jt.selection.map(ct.slice(St+1,Ft));Yt&&ft++,ot.push(new Item(Bt,Ht,Yt))}else ot.push(new Item(Bt))},ut);let kt=[];for(let jt=et;jt<dt;jt++)kt.push(new Item(ct.maps[jt]));let Tt=this.items.slice(0,ut).append(kt).append(ot),Rt=new Branch(Tt,ft);return Rt.emptyItemCount()>max_empty_items&&(Rt=Rt.compress(this.items.length-ot.length)),Rt}emptyItemCount(){let g=0;return this.items.forEach(et=>{et.step||g++}),g}compress(g=this.items.length){let et=this.remapping(0,g),ot=et.maps.length,ut=[],ct=0;return this.items.forEach((dt,ft)=>{if(ft>=g)ut.push(dt),dt.selection&&ct++;else if(dt.step){let St=dt.step.map(et.slice(ot)),kt=St&&St.getMap();if(ot--,kt&&et.appendMap(kt,ot),St){let Tt=dt.selection&&dt.selection.map(et.slice(ot));Tt&&ct++;let Rt=new Item(kt.invert(),St,Tt),jt,Ft=ut.length-1;(jt=ut.length&&ut[Ft].merge(Rt))?ut[Ft]=jt:ut.push(Rt)}}else dt.map&&ot--},this.items.length,0),new Branch(RopeSequence.from(ut.reverse()),ct)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(it,g){let et;return it.forEach((ot,ut)=>{if(ot.selection&&g--==0)return et=ut,!1}),it.slice(et)}class Item{constructor(g,et,ot,ut){this.map=g,this.step=et,this.selection=ot,this.mirrorOffset=ut}merge(g){if(this.step&&g.step&&!g.selection){let et=g.step.merge(this.step);if(et)return new Item(et.getMap().invert(),et,this.selection)}}}class HistoryState{constructor(g,et,ot,ut,ct){this.done=g,this.undone=et,this.prevRanges=ot,this.prevTime=ut,this.prevComposition=ct}}const DEPTH_OVERFLOW=20;function applyTransaction(it,g,et,ot){let ut=et.getMeta(historyKey),ct;if(ut)return ut.historyState;et.getMeta(closeHistoryKey)&&(it=new HistoryState(it.done,it.undone,null,0,-1));let dt=et.getMeta("appendedTransaction");if(et.steps.length==0)return it;if(dt&&dt.getMeta(historyKey))return dt.getMeta(historyKey).redo?new HistoryState(it.done.addTransform(et,void 0,ot,mustPreserveItems(g)),it.undone,rangesFor(et.mapping.maps),it.prevTime,it.prevComposition):new HistoryState(it.done,it.undone.addTransform(et,void 0,ot,mustPreserveItems(g)),null,it.prevTime,it.prevComposition);if(et.getMeta("addToHistory")!==!1&&!(dt&&dt.getMeta("addToHistory")===!1)){let ft=et.getMeta("composition"),St=it.prevTime==0||!dt&&it.prevComposition!=ft&&(it.prevTime<(et.time||0)-ot.newGroupDelay||!isAdjacentTo(et,it.prevRanges)),kt=dt?mapRanges(it.prevRanges,et.mapping):rangesFor(et.mapping.maps);return new HistoryState(it.done.addTransform(et,St?g.selection.getBookmark():void 0,ot,mustPreserveItems(g)),Branch.empty,kt,et.time,ft??it.prevComposition)}else return(ct=et.getMeta("rebased"))?new HistoryState(it.done.rebased(et,ct),it.undone.rebased(et,ct),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition):new HistoryState(it.done.addMaps(et.mapping.maps),it.undone.addMaps(et.mapping.maps),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition)}function isAdjacentTo(it,g){if(!g)return!1;if(!it.docChanged)return!0;let et=!1;return it.mapping.maps[0].forEach((ot,ut)=>{for(let ct=0;ct<g.length;ct+=2)ot<=g[ct+1]&&ut>=g[ct]&&(et=!0)}),et}function rangesFor(it){let g=[];for(let et=it.length-1;et>=0&&g.length==0;et--)it[et].forEach((ot,ut,ct,dt)=>g.push(ct,dt));return g}function mapRanges(it,g){if(!it)return null;let et=[];for(let ot=0;ot<it.length;ot+=2){let ut=g.map(it[ot],1),ct=g.map(it[ot+1],-1);ut<=ct&&et.push(ut,ct)}return et}function histTransaction(it,g,et){let ot=mustPreserveItems(g),ut=historyKey.get(g).spec.config,ct=(et?it.undone:it.done).popEvent(g,ot);if(!ct)return null;let dt=ct.selection.resolve(ct.transform.doc),ft=(et?it.done:it.undone).addTransform(ct.transform,g.selection.getBookmark(),ut,ot),St=new HistoryState(et?ft:ct.remaining,et?ct.remaining:ft,null,0,-1);return ct.transform.setSelection(dt).setMeta(historyKey,{redo:et,historyState:St})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(it){let g=it.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let et=0;et<g.length;et++)if(g[et].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(it={}){return it={depth:it.depth||100,newGroupDelay:it.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,et,ot){return applyTransaction(et,ot,g,it)}},config:it,props:{handleDOMEvents:{beforeinput(g,et){let ot=et.inputType,ut=ot=="historyUndo"?undo:ot=="historyRedo"?redo:null;return ut?(et.preventDefault(),ut(g.state,g.dispatch)):!1}}}})}function buildCommand(it,g){return(et,ot)=>{let ut=historyKey.getState(et);if(!ut||(it?ut.undone:ut.done).eventCount==0)return!1;if(ot){let ct=histTransaction(ut,et,it);ct&&ot(g?ct.scrollIntoView():ct)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:it=>it.length,wordCounter:it=>it.split(" ").filter(g=>g!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc;if(((it==null?void 0:it.mode)||this.options.mode)==="textSize"){const ot=g.textBetween(0,g.content.size,void 0," ");return this.options.textCounter(ot)}return g.nodeSize},this.storage.words=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc,et=g.textBetween(0,g.content.size," "," ");return this.options.wordCounter(et)}},addProseMirrorPlugins(){let it=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(g,et,ot)=>{if(it)return;const ut=this.options.limit;if(ut==null||ut===0){it=!0;return}const ct=this.storage.characters({node:ot.doc});if(ct>ut){const dt=ct-ut,ft=0,St=dt;console.warn(`[CharacterCount] Initial content exceeded limit of ${ut} characters. Content was automatically trimmed.`);const kt=ot.tr.deleteRange(ft,St);return it=!0,kt}it=!0},filterTransaction:(g,et)=>{const ot=this.options.limit;if(!g.docChanged||ot===0||ot===null||ot===void 0)return!0;const ut=this.storage.characters({node:et.doc}),ct=this.storage.characters({node:g.doc});if(ct<=ot||ut>ot&&ct>ot&&ct<=ut)return!0;if(ut>ot&&ct>ot&&ct>ut||!g.getMeta("paste"))return!1;const ft=g.selection.$head.pos,St=ct-ot,kt=ft-St,Tt=ft;return g.deleteRange(kt,Tt),!(this.storage.characters({node:g.doc})>ot)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:it,selection:g})=>{const{isEditable:et,isFocused:ot}=this.editor,{anchor:ut}=g,ct=[];if(!et||!ot)return DecorationSet.create(it,[]);let dt=0;this.options.mode==="deepest"&&it.descendants((St,kt)=>{if(St.isText)return;if(!(ut>=kt&&ut<=kt+St.nodeSize-1))return!1;dt+=1});let ft=0;return it.descendants((St,kt)=>{if(St.isText||!(ut>=kt&&ut<=kt+St.nodeSize-1))return!1;if(ft+=1,this.options.mode==="deepest"&&dt-ft>0||this.options.mode==="shallowest"&&ft>1)return this.options.mode==="deepest";ct.push(Decoration.node(kt,kt+St.nodeSize,{class:this.options.className}))}),DecorationSet.create(it,ct)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(it){var g;const et={name:it.name,options:it.options,storage:it.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(it,"allowGapCursor",et)))!=null?g:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:it,selection:g})=>{const et=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:ot}=g,ut=[];if(!et)return null;const ct=this.editor.isEmpty;return it.descendants((dt,ft)=>{const St=ot>=ft&&ot<=ft+dt.nodeSize,kt=!dt.isLeaf&&isNodeEmpty(dt);if((St||!this.options.showOnlyCurrent)&&kt){const Tt=[this.options.emptyNodeClass];ct&&Tt.push(this.options.emptyEditorClass);const Rt=Decoration.node(ft,ft+dt.nodeSize,{class:Tt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:dt,pos:ft,hasAnchor:St}):this.options.placeholder});ut.push(Rt)}return this.options.includeChildren}),DecorationSet.create(it,ut)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:it,options:g}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(et){return et.selection.empty||it.isFocused||!it.isEditable||isNodeSelection(et.selection)||it.view.dragging?null:DecorationSet.create(et.doc,[Decoration.inline(et.selection.from,et.selection.to,{class:g.className})])}}})]}});function nodeEqualsType({types:it,node:g}){return g&&Array.isArray(it)&&it.includes(g.type)||(g==null?void 0:g.type)===it}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const it=new PluginKey(this.name),g=Object.entries(this.editor.schema.nodes).map(([,et])=>et).filter(et=>(this.options.notAfter||[]).concat(this.options.node).includes(et.name));return[new Plugin({key:it,appendTransaction:(et,ot,ut)=>{const{doc:ct,tr:dt,schema:ft}=ut,St=it.getState(ut),kt=ct.content.size,Tt=ft.nodes[this.options.node];if(St)return dt.insert(kt,Tt.create())},state:{init:(et,ot)=>{const ut=ot.tr.doc.lastChild;return!nodeEqualsType({node:ut,types:g})},apply:(et,ot)=>{if(!et.docChanged)return ot;const ut=et.doc.lastChild;return!nodeEqualsType({node:ut,types:g})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:it,dispatch:g})=>undo(it,g),redo:()=>({state:it,dispatch:g})=>redo(it,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var it,g,et,ot;const ut=[];return this.options.bold!==!1&&ut.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ut.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ut.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ut.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ut.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ut.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&ut.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ut.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ut.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ut.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&ut.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&ut.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ut.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ut.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&ut.push(ListKeymap.configure((it=this.options)==null?void 0:it.listKeymap)),this.options.link!==!1&&ut.push(Link.configure((g=this.options)==null?void 0:g.link)),this.options.orderedList!==!1&&ut.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ut.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ut.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ut.push(Text$3.configure(this.options.text)),this.options.underline!==!1&&ut.push(Underline.configure((et=this.options)==null?void 0:et.underline)),this.options.trailingNode!==!1&&ut.push(TrailingNode.configure((ot=this.options)==null?void 0:ot.trailingNode)),ut}}),index_default$7=StarterKit,index_default$6=ListItem,index_default$5=BulletList,index_default$4=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:it=>it.getAttribute("data-color")||it.style.backgroundColor,renderHTML:it=>it.color?{"data-color":it.color,style:`background-color: ${it.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:it}){return["mark",mergeAttributes(this.options.HTMLAttributes,it),0]},renderMarkdown:(it,g)=>`==${g.renderChildren(it)}==`,parseMarkdown:(it,g)=>g.applyMark("highlight",g.parseInline(it.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:it=>it.indexOf("=="),tokenize(it,g,et){const ut=/^(==)([^=]+)(==)/.exec(it);if(ut){const ct=ut[2].trim(),dt=et.inlineTokens(ct);return{type:"highlight",raw:ut[0],text:ct,tokens:dt}}}},addCommands(){return{setHighlight:it=>({commands:g})=>g.setMark(this.name,it),toggleHighlight:it=>({commands:g})=>g.toggleMark(this.name,it),unsetHighlight:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$3=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:it=>{const g=it.style.textAlign;return this.options.alignments.includes(g)?g:this.options.defaultAlignment},renderHTML:it=>it.textAlign?{style:`text-align: ${it.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:it=>({commands:g})=>this.options.alignments.includes(it)?this.options.types.map(et=>g.updateAttributes(et,{textAlign:it})).every(et=>et):!1,unsetTextAlign:()=>({commands:it})=>this.options.types.map(g=>it.resetAttributes(g,"textAlign")).every(g=>g),toggleTextAlign:it=>({editor:g,commands:et})=>this.options.alignments.includes(it)?g.isActive({textAlign:it})?et.unsetTextAlign():et.setTextAlign(it):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$2=TextAlign,index_default$1=Placeholder;const githubDark="";function BookEditor({content:it,setContent:g}){const et=reactExports.useRef(null),ot=useEditor({extensions:[index_default$6,index_default$5.configure({keepMarks:!0,keepAttributes:!0}),index_default$4.configure({keepMarks:!0,keepAttributes:!0}),index_default$a,index_default$7.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$8,index_default$3,index_default$9.configure({openOnClick:!1}),index_default$2.configure({types:["heading","paragraph","listItem","blockquote"]}),index_default$1.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{class:"focus:outline-none prose prose-invert prose-lg max-w-none text-white leading-relaxed"}},content:it,onUpdate:({editor:ut})=>g(ut.getHTML())});return reactExports.useEffect(()=>{ot&&it!==ot.getHTML()&&ot.commands.setContent(it||"",!1)},[it,ot]),ot&&(window.__EDITOR=ot),reactExports.useEffect(()=>{et.current=ot},[ot]),ot?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 bg-[#111] px-6 py-3 flex flex-wrap items-center gap-6 border-b border-gray-800 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBold().run(),className:`font-semibold text-lg ${ot.isActive("bold")?"text-green-400":"text-gray-300"} hover:text-white`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleItalic().run(),className:`italic text-lg ${ot.isActive("italic")?"text-green-400":"text-gray-300"} hover:text-white`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleUnderline().run(),className:`underline text-lg ${ot.isActive("underline")?"text-green-400":"text-gray-300"} hover:text-white`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded text-sm ${ot.isActive("highlight")?"bg-yellow-400 text-black":"text-gray-300"} hover:text-white`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${ot.isActive("bulletList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${ot.isActive("orderedList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBlockquote().run(),className:`${ot.isActive("blockquote")?"text-green-400":"text-gray-300"} hover:text-white`,children:" Quote"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 ml-auto border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().undo().run(),className:"text-gray-300 hover:text-white",children:" Undo"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().redo().run(),className:"text-gray-300 hover:text-white",children:" Redo"})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:ot,className:`prose prose-invert max-w-none 
             bg-[#0f0f0f] text-white type-text 
             min-h-[70vh] max-h-[90vh]
             resize-y overflow-auto
             border border-gray-700 rounded-lg 
             p-8 focus:outline-none focus:ring-2 focus:ring-green-500/50`})]}):null}function BookPromptForm({text:it,setText:g,pages:et,setPages:ot,link:ut,setLink:ct,cover:dt,setCover:ft,title:St,setTitle:kt,authorName:Tt,bookName:Rt,setBookName:jt,bookType:Ft,setBookType:Bt,loading:Ht,bookId:Yt,setBookId:zt,partLocked:Kt,partNumber:en,onClose:tn,setShowGenerating:on,setProgress:an}){const[un,dn]=reactExports.useState(!1),[Sn,mn]=reactExports.useState(!1),[bn,En]=reactExports.useState(null),{accessToken:kn}=useAuth(),[Pn,Ln]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[gn,Mn]=reactExports.useState(Tt||"");reactExports.useEffect(()=>{async function Cn(){var Vn,Qn;if(Yt)try{const ir=en>1?`https://cre8tlystudio.com/api/books/${Yt}/part/${en}/draft`:`https://cre8tlystudio.com/api/books/draft/${Yt}`,ar=await axiosInstance.get(ir,{headers:{Authorization:`Bearer ${kn}`}});(Vn=ar.data)!=null&&Vn.draft_text?(g(ar.data.draft_text),ar.data.title&&jt(ar.data.title),ar.data.link&&ct(ar.data.link),ar.data.last_saved_at&&En(ar.data.last_saved_at),ar.data.author_name&&Mn(ar.data.author_name),ar.data.book_type&&Bt(ar.data.book_type),Pn||(mn(!0),y$4.info("Loaded saved draft "),setTimeout(()=>mn(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),Ln(!0))):console.log("No saved draft found for this book or part.")}catch(ir){((Qn=ir.response)==null?void 0:Qn.status)!==404&&console.error("Failed to load draft:",ir)}}Cn()},[Yt,en]);async function yn(){if(!(it!=null&&it.trim())){y$4.warn("Write something before saving!");return}dn(!0);try{const Cn=en>1?`https://cre8tlystudio.com/api/books/${Yt}/part/${en}/draft`:"https://cre8tlystudio.com/api/books/draft",Vn=await axiosInstance.post(Cn,{bookId:Yt,draftText:it,book_name:Rt,link:ut,author_name:gn||Tt,book_type:Ft},{headers:{Authorization:`Bearer ${kn}`}});Vn.data.id&&typeof zt=="function"&&zt(Vn.data.id),y$4.success("Draft saved successfully ")}catch(Cn){console.error("Save draft failed:",Cn),y$4.error("Failed to save draft")}finally{dn(!1)}}async function vn(Cn){Cn.preventDefault();try{on(!0),an(0),tn();let Vn=0;const Qn=setInterval(()=>{Vn+=Vn<60?Math.random()*4.5:Vn<85?Math.random()*2.5:Math.random()*1.2,Vn>=96&&(Vn=96),an(Vn)},200),ir={bookId:Yt,book_name:Rt,prompt:it,pages:et,link:ut,cover:dt,bookName:Rt,authorName:Tt,bookType:Ft,title:St},ar=await axiosInstance.post("https://cre8tlystudio.com/api/books/prompt",ir);clearInterval(Qn),an(100),y$4.success("Chapter generation successful! "),setTimeout(()=>on(!1),1500),localStorage.removeItem("bookDraftLocal"),console.log("Book generated:",ar.data)}catch(Vn){console.error("Book generation failed:",Vn),y$4.error("Failed to generate book"),on(!1)}}function On(Cn){if(!Cn)return null;const Vn=new Date(Cn),Qn=Date.now()-Vn.getTime(),ir=Math.floor(Qn/6e4);if(ir<1)return"just now";if(ir<60)return`${ir} minute${ir!==1?"s":""} ago`;const ar=Math.floor(ir/60);if(ar<24)return`${ar} hour${ar!==1?"s":""} ago`;const rr=Math.floor(ar/24);return`${rr} day${rr!==1?"s":""} ago`}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Sn&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",bn&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",On(bn),")"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:vn,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Clockmakers Secret",value:Rt,readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is your books main title."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:gn||Tt||"",readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:Ft,readOnly:!0,className:"w-full px-4 py-3 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Chapter Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Midnight Promise",value:St,onChange:Cn=>kt(Cn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:ring-2 focus:ring-green focus:outline-none"})]}),jsxRuntimeExports.jsx("div",{className:"border border-gray-700 rounded-xl",children:jsxRuntimeExports.jsx(BookEditor,{content:it,setContent:g})}),jsxRuntimeExports.jsx(CoverUpload,{cover:dt,setCover:ft}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:et??"",onChange:Cn=>ot(Number(Cn.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Website or Author Link"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:ut,onChange:Cn=>ct(Cn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!Kt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:yn,disabled:un,className:`flex-1 px-6 py-3 rounded-xl bg-green text-black font-semibold text-lg shadow-lg transition ${un?"opacity-70 cursor-not-allowed":"hover:bg-green hover:text-black"}`,children:un?"Saving...":"Save Draft"}),!Ht&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-royalPurple text-white font-semibold text-lg shadow-lg hover:opacity-90 transition",children:" Generate Book PDF"})]})]})]})}function PromptModal({isOpen:it,onClose:g,magnetId:et,accessToken:ot,contentType:ut,onSubmitted:ct,setShowGenerating:dt,setProgress:ft}){const[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(""),[jt,Ft]=reactExports.useState("modern"),[Bt,Ht]=reactExports.useState(5),[Yt,zt]=reactExports.useState(null),[Kt,en]=reactExports.useState(null),[tn,on]=reactExports.useState(""),[an,un]=reactExports.useState(!1),[dn,Sn]=reactExports.useState(!1),[mn,bn]=reactExports.useState(null),[En,kn]=reactExports.useState(""),[Pn,Ln]=reactExports.useState("questions"),[gn,Mn]=reactExports.useState("#ffffff");reactExports.useEffect(()=>{it||(kt(""),Rt(""),Ft("modern"),Ht(5),zt(null),en(null),on(""),bn(null),ft(0),un(!1)),Ln("questions")},[it]);const yn=()=>g();async function vn(Cn,Vn){var ir,ar,rr;Cn.preventDefault(),Sn(!0),ft(0),dt(!0),g();let Qn;try{let hr=0;Qn=setInterval(()=>{hr+=hr<60?Math.random()*4.5:hr<85?Math.random()*2.5:Math.random()*1.2,hr>=96&&(hr=96),ft(hr)},200);const _r=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{magnetId:et,prompt:St,title:Tt,theme:jt,bgTheme:gn,pages:Bt,logo:Yt,link:tn,coverImage:mn,cta:En,contentType:Vn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(Qn),ft(100),y$4.success(" Your digital asset has been generated successfully!"),dt(!1),g(),await new Promise(xr=>setTimeout(xr,1e3)),setTimeout(()=>{typeof ct=="function"&&ct(et,St,jt)},2e3)}catch(hr){if(clearInterval(Qn),ft(0),Sn(!1),dt(!1),console.error(" Prompt submission error:",hr),hr.code==="ECONNABORTED"||(ir=hr.message)!=null&&ir.includes("timeout"))y$4.info(" Please wait  your document is still being created. It will appear shortly.");else if(hr.response){const{status:_r,data:xr}=hr.response;_r===413?y$4.error(xr.message||"Your input is too long. Please shorten it."):_r===400?y$4.error(xr.message||"Missing required fields."):_r===429?y$4.error("Rate limit reached. Please wait a moment and try again."):(ar=xr.message)!=null&&ar.includes("context_length_exceeded")||(rr=xr.message)!=null&&rr.includes("too large")?y$4.error(" This document is too large. Try fewer pages or smaller content."):y$4.info(" Your document is still generating  it will appear soon.")}else y$4.info(" Document generation still in progress. Please refresh your dashboard shortly.");g(),typeof ct=="function"&&setTimeout(()=>ct(et,St,jt),5e3)}finally{Sn(!1)}}async function On(Cn){Cn.preventDefault(),Sn(!0),ft(0),dt(!0),g();let Vn;try{let Qn=0;Vn=setInterval(()=>{Qn+=Qn<60?Math.random()*4.5:Qn<85?Math.random()*2.5:Math.random()*1.2,Qn>=96&&(Qn=96),ft(Qn)},200);const ir=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{prompt:St,theme:jt,pages:Bt,logo:Yt,link:tn,coverImage:mn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(Vn),ft(100),y$4.success(" Your book was generated successfully!"),await new Promise(ar=>setTimeout(ar,800)),dt(!1),g()}catch(Qn){console.error(" Book generation error:",Qn),clearInterval(Vn),ft(0),Sn(!1),dt(!1),y$4.error("Something went wrong while generating your book.")}finally{Sn(!1)}}return jsxRuntimeExports.jsx(ze,{show:it,appear:!0,children:jsxRuntimeExports.jsxs(yt,{className:"relative z-50",onClose:()=>{an||g()},children:[jsxRuntimeExports.jsx(Dt,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(je,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-gray-900 p-8 shadow-2xl border border-gray-700",children:[jsxRuntimeExports.jsx(Ye,{className:"text-2xl font-bold text-white mb-6 text-center",children:" Create Your Lead Magnet"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[Pn==="questions"&&jsxRuntimeExports.jsx(SmartPromptBuilder,{onPromptReady:Cn=>{kt(Cn),Ln("generator")}}),Pn==="generator"&&jsxRuntimeExports.jsx("div",{className:`transition-all duration-300 ${dn?"pointer-events-none blur-sm opacity-50":""}`,children:jsxRuntimeExports.jsx(PromptForm,{text:St,setText:kt,title:Tt,setTitle:Rt,theme:jt,setTheme:Ft,bgTheme:gn,setBgTheme:Mn,pages:Bt,setPages:Ht,logo:Yt,setLogo:zt,logoPreview:Kt,setLogoPreview:en,link:tn,setLink:on,cover:mn,setCover:bn,cta:En,setCta:kn,showPreview:an,setShowPreview:un,onSubmit:vn,loading:dn,contentType:ut})}),Pn==="bookBuilder"&&jsxRuntimeExports.jsxs("div",{className:`transition-all duration-300 ${dn?"pointer-events-none blur-sm opacity-50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ln("selection"),className:"text-sm text-gray-400 underline hover:text-gray-200 transition",children:" Back to Selection"})}),jsxRuntimeExports.jsx(BookPromptForm,{text:St,setText:kt,theme:jt,setTheme:Ft,pages:Bt,setPages:Ht,logo:Yt,setLogo:zt,logoPreview:Kt,setLogoPreview:en,link:tn,setLink:on,cover:mn,setCover:bn,cta:En,setCta:kn,showPreview:an,setShowPreview:un,onSubmit:On,loading:dn})]})]}),Pn!=="questions"&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Ln("questions"),className:"absolute top-4 left-4 flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-green text-black rounded-lg shadow-md transition-all hover:bg-green/90 hover:text-white active:scale-95 z-20",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx("button",{onClick:dn?void 0:yn,className:`absolute top-4 right-4 text-white text-xl transition ${dn?"opacity-30 cursor-not-allowed":"hover:text-red-400"}`,disabled:dn,children:""})]})})]})})}function DashboardHeader({items:it=[],onCheckout:g,type:et="magnet"}){var Tt;const{user:ot}=useAuth(),ut=Array.isArray(it.magnets)?it.magnets:it,ct=it.summary||{},dt=et==="book"?(ot==null?void 0:ot.book_slots)??0:ct.total_slots??(ot==null?void 0:ot.magnet_slots)??0,ft=et==="book"?ut.filter(Rt=>Rt.pages>=750).length:ct.used_slots??ut.filter(Rt=>Rt.status==="completed").length,St=ct.available_slots??Math.max(dt-ft,0),kt=et==="book"?"My Books":"My Digital Products";return jsxRuntimeExports.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:kt}),ot&&jsxRuntimeExports.jsxs("div",{className:"text-[14px] text-gray-400 mt-1 mb-2",children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold tracking-wide",children:((Tt=ot==null?void 0:ot.name)==null?void 0:Tt.split(" ")[0])||"User"})]}),jsxRuntimeExports.jsxs("p",{className:"text-silver mt-1",children:["You currently have ",St," of ",dt," slots remaining."]}),St===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]})})}function LoadingState(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:"Loading your lead magnets..."})]})}function EmptyState({onCheckout:it,type:g="magnet"}){const et=g==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver mb-6",children:et?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("button",{onClick:it,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:et?"Write My First Book":"Generate My First Lead Magnet"})]})}const scriptRel="modulepreload",assetsURL=function(it){return"/"+it},seen={},__vitePreload=function it(g,et,ot){if(!et||et.length===0)return g();const ut=document.getElementsByTagName("link");return Promise.all(et.map(ct=>{if(ct=assetsURL(ct),ct in seen)return;seen[ct]=!0;const dt=ct.endsWith(".css"),ft=dt?'[rel="stylesheet"]':"";if(!!ot)for(let Tt=ut.length-1;Tt>=0;Tt--){const Rt=ut[Tt];if(Rt.href===ct&&(!dt||Rt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ct}"]${ft}`))return;const kt=document.createElement("link");if(kt.rel=dt?"stylesheet":scriptRel,dt||(kt.as="script",kt.crossOrigin=""),kt.href=ct,document.head.appendChild(kt),dt)return new Promise((Tt,Rt)=>{kt.addEventListener("load",Tt),kt.addEventListener("error",()=>Rt(new Error(`Unable to preload CSS for ${ct}`)))})})).then(()=>g()).catch(ct=>{const dt=new Event("vite:preloadError",{cancelable:!0});if(dt.payload=ct,window.dispatchEvent(dt),!dt.defaultPrevented)throw ct})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(it){Number.isInteger(it)&&(verbosity=it)}function getVerbosityLevel(){return verbosity}function info(it){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${it}`)}function warn(it){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${it}`)}function unreachable(it){throw new Error(it)}function assert(it,g){it||unreachable(g)}function _isValidProtocol(it){switch(it==null?void 0:it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(it,g=null,et=null){if(!it)return null;if(et&&typeof it=="string"){if(et.addDefaultProtocol&&it.startsWith("www.")){const ut=it.match(/\./g);(ut==null?void 0:ut.length)>=2&&(it=`http://${it}`)}if(et.tryConvertEncoding)try{it=stringToUTF8String(it)}catch{}}const ot=g?URL.parse(it,g):URL.parse(it);return _isValidProtocol(ot)?ot:null}function updateUrlHash(it,g,et=!1){const ot=URL.parse(it);return ot?(ot.hash=g,ot.href):et&&createValidAbsoluteUrl(it,"http://example.com")?it.split("#",1)[0]+`${g?`#${g}`:""}`:""}function shadow(it,g,et,ot=!1){return Object.defineProperty(it,g,{value:et,enumerable:!ot,configurable:!0,writable:!1}),et}const BaseException=function it(){function g(et,ot){this.message=et,this.name=ot}return g.prototype=new Error,g.constructor=g,g}();class PasswordException extends BaseException{constructor(g,et){super(g,"PasswordException"),this.code=et}}class UnknownErrorException extends BaseException{constructor(g,et){super(g,"UnknownErrorException"),this.details=et}}class InvalidPDFException extends BaseException{constructor(g){super(g,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(g,et,ot){super(g,"ResponseException"),this.status=et,this.missing=ot}}class FormatError extends BaseException{constructor(g){super(g,"FormatError")}}class AbortException extends BaseException{constructor(g){super(g,"AbortException")}}function bytesToString(it){(typeof it!="object"||(it==null?void 0:it.length)===void 0)&&unreachable("Invalid argument for bytesToString");const g=it.length,et=8192;if(g<et)return String.fromCharCode.apply(null,it);const ot=[];for(let ut=0;ut<g;ut+=et){const ct=Math.min(ut+et,g),dt=it.subarray(ut,ct);ot.push(String.fromCharCode.apply(null,dt))}return ot.join("")}function stringToBytes(it){typeof it!="string"&&unreachable("Invalid argument for stringToBytes");const g=it.length,et=new Uint8Array(g);for(let ot=0;ot<g;++ot)et[ot]=it.charCodeAt(ot)&255;return et}function string32(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function isLittleEndian(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:g,userAgent:et}=navigator;return shadow(this,"platform",{isAndroid:et.includes("Android"),isLinux:g.includes("Linux"),isMac:g.includes("Mac"),isWindows:g.includes("Win"),isFirefox:et.includes("Firefox")})}static get isCSSRoundSupported(){var g,et;return shadow(this,"isCSSRoundSupported",(et=(g=globalThis.CSS)==null?void 0:g.supports)==null?void 0:et.call(g,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),it=>it.toString(16).padStart(2,"0"));var sx,Zw,eC,W_,o3;let Util$1=(Zw=class{static makeHexColor(g,et,ot){return`#${hexNumbers[g]}${hexNumbers[et]}${hexNumbers[ot]}`}static domMatrixToTransform(g){return[g.a,g.b,g.c,g.d,g.e,g.f]}static scaleMinMax(g,et){let ot;g[0]?(g[0]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[0],et[2]*=g[0],g[3]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[3],et[3]*=g[3]):(ot=et[0],et[0]=et[1],et[1]=ot,ot=et[2],et[2]=et[3],et[3]=ot,g[1]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[1],et[3]*=g[1],g[2]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[2],et[2]*=g[2]),et[0]+=g[4],et[1]+=g[5],et[2]+=g[4],et[3]+=g[5]}static transform(g,et){return[g[0]*et[0]+g[2]*et[1],g[1]*et[0]+g[3]*et[1],g[0]*et[2]+g[2]*et[3],g[1]*et[2]+g[3]*et[3],g[0]*et[4]+g[2]*et[5]+g[4],g[1]*et[4]+g[3]*et[5]+g[5]]}static multiplyByDOMMatrix(g,et){return[g[0]*et.a+g[2]*et.b,g[1]*et.a+g[3]*et.b,g[0]*et.c+g[2]*et.d,g[1]*et.c+g[3]*et.d,g[0]*et.e+g[2]*et.f+g[4],g[1]*et.e+g[3]*et.f+g[5]]}static applyTransform(g,et,ot=0){const ut=g[ot],ct=g[ot+1];g[ot]=ut*et[0]+ct*et[2]+et[4],g[ot+1]=ut*et[1]+ct*et[3]+et[5]}static applyTransformToBezier(g,et,ot=0){const ut=et[0],ct=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5];for(let Tt=0;Tt<6;Tt+=2){const Rt=g[ot+Tt],jt=g[ot+Tt+1];g[ot+Tt]=Rt*ut+jt*dt+St,g[ot+Tt+1]=Rt*ct+jt*ft+kt}}static applyInverseTransform(g,et){const ot=g[0],ut=g[1],ct=et[0]*et[3]-et[1]*et[2];g[0]=(ot*et[3]-ut*et[2]+et[2]*et[5]-et[4]*et[3])/ct,g[1]=(-ot*et[1]+ut*et[0]+et[4]*et[1]-et[5]*et[0])/ct}static axialAlignedBoundingBox(g,et,ot){const ut=et[0],ct=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5],Tt=g[0],Rt=g[1],jt=g[2],Ft=g[3];let Bt=ut*Tt+St,Ht=Bt,Yt=ut*jt+St,zt=Yt,Kt=ft*Rt+kt,en=Kt,tn=ft*Ft+kt,on=tn;if(ct!==0||dt!==0){const an=ct*Tt,un=ct*jt,dn=dt*Rt,Sn=dt*Ft;Bt+=dn,zt+=dn,Yt+=Sn,Ht+=Sn,Kt+=an,on+=an,tn+=un,en+=un}ot[0]=Math.min(ot[0],Bt,Yt,Ht,zt),ot[1]=Math.min(ot[1],Kt,tn,en,on),ot[2]=Math.max(ot[2],Bt,Yt,Ht,zt),ot[3]=Math.max(ot[3],Kt,tn,en,on)}static inverseTransform(g){const et=g[0]*g[3]-g[1]*g[2];return[g[3]/et,-g[1]/et,-g[2]/et,g[0]/et,(g[2]*g[5]-g[4]*g[3])/et,(g[4]*g[1]-g[5]*g[0])/et]}static singularValueDecompose2dScale(g,et){const ot=g[0],ut=g[1],ct=g[2],dt=g[3],ft=ot**2+ut**2,St=ot*ct+ut*dt,kt=ct**2+dt**2,Tt=(ft+kt)/2,Rt=Math.sqrt(Tt**2-(ft*kt-St**2));et[0]=Math.sqrt(Tt+Rt||1),et[1]=Math.sqrt(Tt-Rt||1)}static normalizeRect(g){const et=g.slice(0);return g[0]>g[2]&&(et[0]=g[2],et[2]=g[0]),g[1]>g[3]&&(et[1]=g[3],et[3]=g[1]),et}static intersect(g,et){const ot=Math.max(Math.min(g[0],g[2]),Math.min(et[0],et[2])),ut=Math.min(Math.max(g[0],g[2]),Math.max(et[0],et[2]));if(ot>ut)return null;const ct=Math.max(Math.min(g[1],g[3]),Math.min(et[1],et[3])),dt=Math.min(Math.max(g[1],g[3]),Math.max(et[1],et[3]));return ct>dt?null:[ot,ct,ut,dt]}static pointBoundingBox(g,et,ot){ot[0]=Math.min(ot[0],g),ot[1]=Math.min(ot[1],et),ot[2]=Math.max(ot[2],g),ot[3]=Math.max(ot[3],et)}static rectBoundingBox(g,et,ot,ut,ct){ct[0]=Math.min(ct[0],g,ot),ct[1]=Math.min(ct[1],et,ut),ct[2]=Math.max(ct[2],g,ot),ct[3]=Math.max(ct[3],et,ut)}static bezierBoundingBox(g,et,ot,ut,ct,dt,ft,St,kt){kt[0]=Math.min(kt[0],g,ft),kt[1]=Math.min(kt[1],et,St),kt[2]=Math.max(kt[2],g,ft),kt[3]=Math.max(kt[3],et,St),Xn(this,W_,o3).call(this,g,ot,ct,ft,et,ut,dt,St,3*(-g+3*(ot-ct)+ft),6*(g-2*ot+ct),3*(ot-g),kt),Xn(this,W_,o3).call(this,g,ot,ct,ft,et,ut,dt,St,3*(-et+3*(ut-dt)+St),6*(et-2*ut+dt),3*(ut-et),kt)}},sx=new WeakSet,eC=function(g,et,ot,ut,ct,dt,ft,St,kt,Tt){if(kt<=0||kt>=1)return;const Rt=1-kt,jt=kt*kt,Ft=jt*kt,Bt=Rt*(Rt*(Rt*g+3*kt*et)+3*jt*ot)+Ft*ut,Ht=Rt*(Rt*(Rt*ct+3*kt*dt)+3*jt*ft)+Ft*St;Tt[0]=Math.min(Tt[0],Bt),Tt[1]=Math.min(Tt[1],Ht),Tt[2]=Math.max(Tt[2],Bt),Tt[3]=Math.max(Tt[3],Ht)},W_=new WeakSet,o3=function(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,jt){if(Math.abs(kt)<1e-12){Math.abs(Tt)>=1e-12&&Xn(this,sx,eC).call(this,g,et,ot,ut,ct,dt,ft,St,-Rt/Tt,jt);return}const Ft=Tt**2-4*Rt*kt;if(Ft<0)return;const Bt=Math.sqrt(Ft),Ht=2*kt;Xn(this,sx,eC).call(this,g,et,ot,ut,ct,dt,ft,St,(-Tt+Bt)/Ht,jt),Xn(this,sx,eC).call(this,g,et,ot,ut,ct,dt,ft,St,(-Tt-Bt)/Ht,jt)},Rn(Zw,sx),Rn(Zw,W_),Zw);function stringToUTF8String(it){return decodeURIComponent(escape(it))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(it){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),it.replaceAll(NormalizeRegex,(g,et,ot)=>et?et.normalize("NFKC"):NormalizationMap.get(ot))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);return crypto.getRandomValues(it),bytesToString(it)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(it,g,et){if(!Array.isArray(et)||et.length<2)return!1;const[ot,ut,...ct]=et;if(!it(ot)&&!Number.isInteger(ot)||!g(ut))return!1;const dt=ct.length;let ft=!0;switch(ut.name){case"XYZ":if(dt<2||dt>3)return!1;break;case"Fit":case"FitB":return dt===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(dt>1)return!1;break;case"FitR":if(dt!==4)return!1;ft=!1;break;default:return!1}for(const St of ct)if(!(typeof St=="number"||ft&&St===null))return!1;return!0}function MathClamp(it,g,et){return Math.min(Math.max(it,g),et)}function toBase64Util(it){return Uint8Array.prototype.toBase64?it.toBase64():btoa(bytesToString(it))}function fromBase64Util(it){return Uint8Array.fromBase64?Uint8Array.fromBase64(it):stringToBytes(atob(it))}typeof Promise.try!="function"&&(Promise.try=function(it,...g){return new Promise(et=>{et(it(...g))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(it){return it.reduce((g,et)=>g+et,0)});class XfaText{static textContent(g){const et=[],ot={items:et,styles:Object.create(null)};function ut(ct){var St;if(!ct)return;let dt=null;const ft=ct.name;if(ft==="#text")dt=ct.value;else if(XfaText.shouldBuildText(ft))(St=ct==null?void 0:ct.attributes)!=null&&St.textContent?dt=ct.attributes.textContent:ct.value&&(dt=ct.value);else return;if(dt!==null&&et.push({str:dt}),!!ct.children)for(const kt of ct.children)ut(kt)}return ut(g),ot}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}class XfaLayer{static setupStorage(g,et,ot,ut,ct){const dt=ut.getValue(et,{value:null});switch(ot.name){case"textarea":if(dt.value!==null&&(g.textContent=dt.value),ct==="print")break;g.addEventListener("input",ft=>{ut.setValue(et,{value:ft.target.value})});break;case"input":if(ot.attributes.type==="radio"||ot.attributes.type==="checkbox"){if(dt.value===ot.attributes.xfaOn?g.setAttribute("checked",!0):dt.value===ot.attributes.xfaOff&&g.removeAttribute("checked"),ct==="print")break;g.addEventListener("change",ft=>{ut.setValue(et,{value:ft.target.checked?ft.target.getAttribute("xfaOn"):ft.target.getAttribute("xfaOff")})})}else{if(dt.value!==null&&g.setAttribute("value",dt.value),ct==="print")break;g.addEventListener("input",ft=>{ut.setValue(et,{value:ft.target.value})})}break;case"select":if(dt.value!==null){g.setAttribute("value",dt.value);for(const ft of ot.children)ft.attributes.value===dt.value?ft.attributes.selected=!0:ft.attributes.hasOwnProperty("selected")&&delete ft.attributes.selected}g.addEventListener("input",ft=>{const St=ft.target.options,kt=St.selectedIndex===-1?"":St[St.selectedIndex].value;ut.setValue(et,{value:kt})});break}}static setAttributes({html:g,element:et,storage:ot=null,intent:ut,linkService:ct}){const{attributes:dt}=et,ft=g instanceof HTMLAnchorElement;dt.type==="radio"&&(dt.name=`${dt.name}-${ut}`);for(const[St,kt]of Object.entries(dt))if(kt!=null)switch(St){case"class":kt.length&&g.setAttribute(St,kt.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",kt);break;case"style":Object.assign(g.style,kt);break;case"textContent":g.textContent=kt;break;default:(!ft||St!=="href"&&St!=="newWindow")&&g.setAttribute(St,kt)}ft&&ct.addLinkAttributes(g,dt.href,dt.newWindow),ot&&dt.dataId&&this.setupStorage(g,dt.dataId,et,ot)}static render(g){var Rt,jt;const et=g.annotationStorage,ot=g.linkService,ut=g.xfaHtml,ct=g.intent||"display",dt=document.createElement(ut.name);ut.attributes&&this.setAttributes({html:dt,element:ut,intent:ct,linkService:ot});const ft=ct!=="richText",St=g.div;if(St.append(dt),g.viewport){const Ft=`matrix(${g.viewport.transform.join(",")})`;St.style.transform=Ft}ft&&St.setAttribute("class","xfaLayer xfaFont");const kt=[];if(ut.children.length===0){if(ut.value){const Ft=document.createTextNode(ut.value);dt.append(Ft),ft&&XfaText.shouldBuildText(ut.name)&&kt.push(Ft)}return{textDivs:kt}}const Tt=[[ut,-1,dt]];for(;Tt.length>0;){const[Ft,Bt,Ht]=Tt.at(-1);if(Bt+1===Ft.children.length){Tt.pop();continue}const Yt=Ft.children[++Tt.at(-1)[1]];if(Yt===null)continue;const{name:zt}=Yt;if(zt==="#text"){const en=document.createTextNode(Yt.value);kt.push(en),Ht.append(en);continue}const Kt=(Rt=Yt==null?void 0:Yt.attributes)!=null&&Rt.xmlns?document.createElementNS(Yt.attributes.xmlns,zt):document.createElement(zt);if(Ht.append(Kt),Yt.attributes&&this.setAttributes({html:Kt,element:Yt,storage:et,intent:ct,linkService:ot}),((jt=Yt.children)==null?void 0:jt.length)>0)Tt.push([Yt,-1,Kt]);else if(Yt.value){const en=document.createTextNode(Yt.value);ft&&XfaText.shouldBuildText(zt)&&kt.push(en),Kt.append(en)}}for(const Ft of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ft.setAttribute("readOnly",!0);return{textDivs:kt}}static update(g){const et=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=et,g.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",s1=class s1{};Ur(s1,"CSS",96),Ur(s1,"PDF",72),Ur(s1,"PDF_TO_CSS_UNITS",s1.CSS/s1.PDF);let PixelsPerInch=s1;async function fetchData(it,g="text"){if(isValidFetchUrl(it,document.baseURI)){const et=await fetch(it);if(!et.ok)throw new Error(et.statusText);switch(g){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"json":return et.json()}return et.text()}return new Promise((et,ot)=>{const ut=new XMLHttpRequest;ut.open("GET",it,!0),ut.responseType=g,ut.onreadystatechange=()=>{if(ut.readyState===XMLHttpRequest.DONE){if(ut.status===200||ut.status===0){switch(g){case"arraybuffer":case"blob":case"json":et(ut.response);return}et(ut.responseText);return}ot(new Error(ut.statusText))}},ut.send(null)})}class PageViewport{constructor({viewBox:g,userUnit:et,scale:ot,rotation:ut,offsetX:ct=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=g,this.userUnit=et,this.scale=ot,this.rotation=ut,this.offsetX=ct,this.offsetY=dt,ot*=et;const St=(g[2]+g[0])/2,kt=(g[3]+g[1])/2;let Tt,Rt,jt,Ft;switch(ut%=360,ut<0&&(ut+=360),ut){case 180:Tt=-1,Rt=0,jt=0,Ft=1;break;case 90:Tt=0,Rt=1,jt=1,Ft=0;break;case 270:Tt=0,Rt=-1,jt=-1,Ft=0;break;case 0:Tt=1,Rt=0,jt=0,Ft=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(jt=-jt,Ft=-Ft);let Bt,Ht,Yt,zt;Tt===0?(Bt=Math.abs(kt-g[1])*ot+ct,Ht=Math.abs(St-g[0])*ot+dt,Yt=(g[3]-g[1])*ot,zt=(g[2]-g[0])*ot):(Bt=Math.abs(St-g[0])*ot+ct,Ht=Math.abs(kt-g[1])*ot+dt,Yt=(g[2]-g[0])*ot,zt=(g[3]-g[1])*ot),this.transform=[Tt*ot,Rt*ot,jt*ot,Ft*ot,Bt-Tt*ot*St-jt*ot*kt,Ht-Rt*ot*St-Ft*ot*kt],this.width=Yt,this.height=zt}get rawDims(){const g=this.viewBox;return shadow(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:et=this.rotation,offsetX:ot=this.offsetX,offsetY:ut=this.offsetY,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ut,dontFlip:ct})}convertToViewportPoint(g,et){const ot=[g,et];return Util$1.applyTransform(ot,this.transform),ot}convertToViewportRectangle(g){const et=[g[0],g[1]];Util$1.applyTransform(et,this.transform);const ot=[g[2],g[3]];return Util$1.applyTransform(ot,this.transform),[et[0],et[1],ot[0],ot[1]]}convertToPdfPoint(g,et){const ot=[g,et];return Util$1.applyInverseTransform(ot,this.transform),ot}}class RenderingCancelledException extends BaseException{constructor(g,et=0){super(g,"RenderingCancelledException"),this.extraDelay=et}}function isDataScheme(it){const g=it.length;let et=0;for(;et<g&&it[et].trim()==="";)et++;return it.substring(et,et+5).toLowerCase()==="data:"}function isPdfFile(it){return typeof it=="string"&&/\.pdf$/i.test(it)}function getFilenameFromUrl(it){return[it]=it.split(/[#?]/,1),it.substring(it.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(it,g="document.pdf"){if(typeof it!="string")return g;if(isDataScheme(it))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const ot=(ft=>{try{return new URL(ft)}catch{try{return new URL(decodeURIComponent(ft))}catch{try{return new URL(ft,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(ft),"https://foo.bar")}catch{return null}}}}})(it);if(!ot)return g;const ut=ft=>{try{let St=decodeURIComponent(ft);return St.includes("/")?(St=St.split("/").at(-1),St.test(/^\.pdf$/i)?St:ft):St}catch{return ft}},ct=/\.pdf$/i,dt=ot.pathname.split("/").at(-1);if(ct.test(dt))return ut(dt);if(ot.searchParams.size>0){const ft=Array.from(ot.searchParams.values()).reverse();for(const kt of ft)if(ct.test(kt))return ut(kt);const St=Array.from(ot.searchParams.keys()).reverse();for(const kt of St)if(ct.test(kt))return ut(kt)}if(ot.hash){const St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(ot.hash);if(St)return ut(St[0])}return g}class StatTimer{constructor(){Ur(this,"started",Object.create(null));Ur(this,"times",[])}time(g){g in this.started&&warn(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||warn(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let et=0;for(const{name:ot}of this.times)et=Math.max(ot.length,et);for(const{name:ot,start:ut,end:ct}of this.times)g.push(`${ot.padEnd(et)} ${ct-ut}ms
`);return g.join("")}}function isValidFetchUrl(it,g){const et=g?URL.parse(it,g):URL.parse(it);return(et==null?void 0:et.protocol)==="http:"||(et==null?void 0:et.protocol)==="https:"}function noContextMenu(it){it.preventDefault()}function stopEvent(it){it.preventDefault(),it.stopPropagation()}function deprecated(it){console.log("Deprecated API usage: "+it)}var q_;class PDFDateString{static toDateObject(g){if(g instanceof Date)return g;if(!g||typeof g!="string")return null;Ut(this,q_)||In(this,q_,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=Ut(this,q_).exec(g);if(!et)return null;const ot=parseInt(et[1],10);let ut=parseInt(et[2],10);ut=ut>=1&&ut<=12?ut-1:0;let ct=parseInt(et[3],10);ct=ct>=1&&ct<=31?ct:1;let dt=parseInt(et[4],10);dt=dt>=0&&dt<=23?dt:0;let ft=parseInt(et[5],10);ft=ft>=0&&ft<=59?ft:0;let St=parseInt(et[6],10);St=St>=0&&St<=59?St:0;const kt=et[7]||"Z";let Tt=parseInt(et[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Rt=parseInt(et[9],10)||0;return Rt=Rt>=0&&Rt<=59?Rt:0,kt==="-"?(dt+=Tt,ft+=Rt):kt==="+"&&(dt-=Tt,ft-=Rt),new Date(Date.UTC(ot,ut,ct,dt,ft,St))}}q_=new WeakMap,Rn(PDFDateString,q_,void 0);function getXfaPageViewport(it,{scale:g=1,rotation:et=0}){const{width:ot,height:ut}=it.attributes.style,ct=[0,0,parseInt(ot),parseInt(ut)];return new PageViewport({viewBox:ct,userUnit:1,scale:g,rotation:et})}function getRGB(it){if(it.startsWith("#")){const g=parseInt(it.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return it.startsWith("rgb(")?it.slice(4,-1).split(",").map(g=>parseInt(g)):it.startsWith("rgba(")?it.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):(warn(`Not a valid color format: "${it}"`),[0,0,0])}function getColorValues(it){const g=document.createElement("span");g.style.visibility="hidden",g.style.colorScheme="only light",document.body.append(g);for(const et of it.keys()){g.style.color=et;const ot=window.getComputedStyle(g).color;it.set(et,getRGB(ot))}g.remove()}function getCurrentTransform(it){const{a:g,b:et,c:ot,d:ut,e:ct,f:dt}=it.getTransform();return[g,et,ot,ut,ct,dt]}function getCurrentTransformInverse(it){const{a:g,b:et,c:ot,d:ut,e:ct,f:dt}=it.getTransform().invertSelf();return[g,et,ot,ut,ct,dt]}function setLayerDimensions(it,g,et=!1,ot=!0){if(g instanceof PageViewport){const{pageWidth:ut,pageHeight:ct}=g.rawDims,{style:dt}=it,ft=util_FeatureTest.isCSSRoundSupported,St=`var(--total-scale-factor) * ${ut}px`,kt=`var(--total-scale-factor) * ${ct}px`,Tt=ft?`round(down, ${St}, var(--scale-round-x))`:`calc(${St})`,Rt=ft?`round(down, ${kt}, var(--scale-round-y))`:`calc(${kt})`;!et||g.rotation%180===0?(dt.width=Tt,dt.height=Rt):(dt.width=Rt,dt.height=Tt)}ot&&it.setAttribute("data-main-rotation",g.rotation)}class OutputScale{constructor(){const{pixelRatio:g}=OutputScale;this.sx=g,this.sy=g}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(g,et,ot,ut,ct=-1){let dt=1/0,ft=1/0,St=1/0;ot=OutputScale.capPixels(ot,ct),ot>0&&(dt=Math.sqrt(ot/(g*et))),ut!==-1&&(ft=ut/g,St=ut/et);const kt=Math.min(dt,ft,St);return this.sx>kt||this.sy>kt?(this.sx=kt,this.sy=kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(g,et){if(et>=0){const ot=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+et/100));return g>0?Math.min(g,ot):ot}return g}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var g;return shadow(this,"isDarkMode",!!((g=window==null?void 0:window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const g=document.createElement("span");g.classList.add("comment","sidebar");const{style:et}=g;et.width=et.height="0",et.display="none",et.color="var(--comment-fg-color)",document.body.append(g);const{color:ot}=window.getComputedStyle(g);return g.remove(),shadow(this,"commentForegroundColor",getRGB(ot))}}function applyOpacity(it,g,et,ot){ot=Math.min(Math.max(ot??1,0),1);const ut=255*(1-ot);return it=Math.round(it*ot+ut),g=Math.round(g*ot+ut),et=Math.round(et*ot+ut),[it,g,et]}function RGBToHSL(it,g){const et=it[0]/255,ot=it[1]/255,ut=it[2]/255,ct=Math.max(et,ot,ut),dt=Math.min(et,ot,ut),ft=(ct+dt)/2;if(ct===dt)g[0]=g[1]=0;else{const St=ct-dt;switch(g[1]=ft<.5?St/(ct+dt):St/(2-ct-dt),ct){case et:g[0]=((ot-ut)/St+(ot<ut?6:0))*60;break;case ot:g[0]=((ut-et)/St+2)*60;break;case ut:g[0]=((et-ot)/St+4)*60;break}}g[2]=ft}function HSLToRGB(it,g){const et=it[0],ot=it[1],ut=it[2],ct=(1-Math.abs(2*ut-1))*ot,dt=ct*(1-Math.abs(et/60%2-1)),ft=ut-ct/2;switch(Math.floor(et/60)){case 0:g[0]=ct+ft,g[1]=dt+ft,g[2]=ft;break;case 1:g[0]=dt+ft,g[1]=ct+ft,g[2]=ft;break;case 2:g[0]=ft,g[1]=ct+ft,g[2]=dt+ft;break;case 3:g[0]=ft,g[1]=dt+ft,g[2]=ct+ft;break;case 4:g[0]=dt+ft,g[1]=ft,g[2]=ct+ft;break;case 5:case 6:g[0]=ct+ft,g[1]=ft,g[2]=dt+ft;break}}function computeLuminance(it){return it<=.03928?it/12.92:((it+.055)/1.055)**2.4}function contrastRatio(it,g,et){HSLToRGB(it,et),et.map(computeLuminance);const ot=.2126*et[0]+.7152*et[1]+.0722*et[2];HSLToRGB(g,et),et.map(computeLuminance);const ut=.2126*et[0]+.7152*et[1]+.0722*et[2];return ot>ut?(ot+.05)/(ut+.05):(ut+.05)/(ot+.05)}const contrastCache=new Map;function findContrastColor(it,g){const et=it[0]+it[1]*256+it[2]*65536+g[0]*16777216+g[1]*4294967296+g[2]*1099511627776;let ot=contrastCache.get(et);if(ot)return ot;const ut=new Float32Array(9),ct=ut.subarray(0,3),dt=ut.subarray(3,6);RGBToHSL(it,dt);const ft=ut.subarray(6,9);RGBToHSL(g,ft);const St=ft[2]<.5,kt=St?12:4.5;if(dt[2]=St?Math.sqrt(dt[2]):1-Math.sqrt(1-dt[2]),contrastRatio(dt,ft,ct)<kt){let Tt,Rt;St?(Tt=dt[2],Rt=1):(Tt=0,Rt=dt[2]);const jt=.005;for(;Rt-Tt>jt;){const Ft=dt[2]=(Tt+Rt)/2;St===contrastRatio(dt,ft,ct)<kt?Tt=Ft:Rt=Ft}dt[2]=St?Rt:Tt}return HSLToRGB(dt,ct),ot=Util$1.makeHexColor(Math.round(ct[0]*255),Math.round(ct[1]*255),Math.round(ct[2]*255)),contrastCache.set(et,ot),ot}function renderRichText({html:it,dir:g,className:et},ot){const ut=document.createDocumentFragment();if(typeof it=="string"){const ct=document.createElement("p");ct.dir=g||"auto";const dt=it.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const kt=dt[ft];ct.append(document.createTextNode(kt)),ft<St-1&&ct.append(document.createElement("br"))}ut.append(ct)}else XfaLayer.render({xfaHtml:it,div:ut,intent:"richText"});ut.firstChild.classList.add("richText",et),ot.append(ut)}var D0,j0,dp,fp,K_,F0,ax,ox,Y_,MC,$R,IC,BR,OC,VR,$0,Yv,l1,A_;const Vm=class Vm{constructor(g){Rn(this,IC);Rn(this,OC);Rn(this,$0);Rn(this,l1);Rn(this,D0,null);Rn(this,j0,null);Rn(this,dp,void 0);Rn(this,fp,null);Rn(this,K_,null);Rn(this,F0,null);Rn(this,ax,null);Rn(this,ox,null);In(this,dp,g),Ut(Vm,Y_)||In(Vm,Y_,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const g=In(this,D0,document.createElement("div"));g.classList.add("editToolbar","hidden"),g.setAttribute("role","toolbar");const et=Ut(this,dp)._uiManager._signal;et instanceof AbortSignal&&!et.aborted&&(g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.addEventListener("pointerdown",Xn(Vm,MC,$R),{signal:et}));const ot=In(this,fp,document.createElement("div"));ot.className="buttons",g.append(ot);const ut=Ut(this,dp).toolbarPosition;if(ut){const{style:ct}=g,dt=Ut(this,dp)._uiManager.direction==="ltr"?1-ut[0]:ut[0];ct.insetInlineEnd=`${100*dt}%`,ct.top=`calc(${100*ut[1]}% + var(--editor-toolbar-vert-offset))`}return g}get div(){return Ut(this,D0)}hide(){var g;Ut(this,D0).classList.add("hidden"),(g=Ut(this,j0))==null||g.hideDropdown()}show(){var g,et;Ut(this,D0).classList.remove("hidden"),(g=Ut(this,K_))==null||g.shown(),(et=Ut(this,F0))==null||et.shown()}addDeleteButton(){const{editorType:g,_uiManager:et}=Ut(this,dp),ot=document.createElement("button");ot.classList.add("basic","deleteButton"),ot.tabIndex=0,ot.setAttribute("data-l10n-id",Ut(Vm,Y_)[g]),Xn(this,$0,Yv).call(this,ot)&&ot.addEventListener("click",ut=>{et.delete()},{signal:et._signal}),Ut(this,fp).append(ot)}async addAltText(g){const et=await g.render();Xn(this,$0,Yv).call(this,et),Ut(this,fp).append(et,Ut(this,l1,A_)),In(this,K_,g)}addComment(g,et=null){if(Ut(this,F0))return;const ot=g.renderForToolbar();if(!ot)return;Xn(this,$0,Yv).call(this,ot);const ut=In(this,ax,Ut(this,l1,A_));et?(Ut(this,fp).insertBefore(ot,et),Ut(this,fp).insertBefore(ut,et)):Ut(this,fp).append(ot,ut),In(this,F0,g),g.toolbar=this}addColorPicker(g){if(Ut(this,j0))return;In(this,j0,g);const et=g.renderButton();Xn(this,$0,Yv).call(this,et),Ut(this,fp).append(et,Ut(this,l1,A_))}async addEditSignatureButton(g){const et=In(this,ox,await g.renderEditButton(Ut(this,dp)));Xn(this,$0,Yv).call(this,et),Ut(this,fp).append(et,Ut(this,l1,A_))}removeButton(g){var et,ot;switch(g){case"comment":(et=Ut(this,F0))==null||et.removeToolbarCommentButton(),In(this,F0,null),(ot=Ut(this,ax))==null||ot.remove(),In(this,ax,null);break}}async addButton(g,et){switch(g){case"colorPicker":this.addColorPicker(et);break;case"altText":await this.addAltText(et);break;case"editSignature":await this.addEditSignatureButton(et);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(et);break}}async addButtonBefore(g,et,ot){const ut=Ut(this,fp).querySelector(ot);ut&&g==="comment"&&this.addComment(et,ut)}updateEditSignatureButton(g){Ut(this,ox)&&(Ut(this,ox).title=g)}remove(){var g;Ut(this,D0).remove(),(g=Ut(this,j0))==null||g.destroy(),In(this,j0,null)}};D0=new WeakMap,j0=new WeakMap,dp=new WeakMap,fp=new WeakMap,K_=new WeakMap,F0=new WeakMap,ax=new WeakMap,ox=new WeakMap,Y_=new WeakMap,MC=new WeakSet,$R=function(g){g.stopPropagation()},IC=new WeakSet,BR=function(g){Ut(this,dp)._focusEventsAllowed=!1,stopEvent(g)},OC=new WeakSet,VR=function(g){Ut(this,dp)._focusEventsAllowed=!0,stopEvent(g)},$0=new WeakSet,Yv=function(g){const et=Ut(this,dp)._uiManager._signal;return!(et instanceof AbortSignal)||et.aborted?!1:(g.addEventListener("focusin",Xn(this,IC,BR).bind(this),{capture:!0,signal:et}),g.addEventListener("focusout",Xn(this,OC,VR).bind(this),{capture:!0,signal:et}),g.addEventListener("contextmenu",noContextMenu,{signal:et}),!0)},l1=new WeakSet,A_=function(){const g=document.createElement("div");return g.className="divider",g},Rn(Vm,MC),Rn(Vm,Y_,null);let EditorToolbar=Vm;var X_,u1,Hm,LC,zR,DC,HR,J_,l3;class FloatingToolbar{constructor(g){Rn(this,LC);Rn(this,DC);Rn(this,J_);Rn(this,X_,null);Rn(this,u1,null);Rn(this,Hm,void 0);In(this,Hm,g)}show(g,et,ot){const[ut,ct]=Xn(this,DC,HR).call(this,et,ot),{style:dt}=Ut(this,u1)||In(this,u1,Xn(this,LC,zR).call(this));g.append(Ut(this,u1)),dt.insetInlineEnd=`${100*ut}%`,dt.top=`calc(${100*ct}% + var(--editor-toolbar-vert-offset))`}hide(){Ut(this,u1).remove()}}X_=new WeakMap,u1=new WeakMap,Hm=new WeakMap,LC=new WeakSet,zR=function(){const g=In(this,u1,document.createElement("div"));g.className="editToolbar",g.setAttribute("role","toolbar");const et=Ut(this,Hm)._signal;et instanceof AbortSignal&&!et.aborted&&g.addEventListener("contextmenu",noContextMenu,{signal:et});const ot=In(this,X_,document.createElement("div"));return ot.className="buttons",g.append(ot),Ut(this,Hm).hasCommentManager()&&Xn(this,J_,l3).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Ut(this,Hm).commentSelection("floating_button")}),Xn(this,J_,l3).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Ut(this,Hm).highlightSelection("floating_button")}),g},DC=new WeakSet,HR=function(g,et){let ot=0,ut=0;for(const ct of g){const dt=ct.y+ct.height;if(dt<ot)continue;const ft=ct.x+(et?ct.width:0);if(dt>ot){ut=ft,ot=dt;continue}et?ft>ut&&(ut=ft):ft<ut&&(ut=ft)}return[et?1-ut:ut,ot]},J_=new WeakSet,l3=function(g,et,ot,ut){const ct=document.createElement("button");ct.classList.add("basic",g),ct.tabIndex=0,ct.setAttribute("data-l10n-id",et);const dt=document.createElement("span");ct.append(dt),dt.className="visuallyHidden",dt.setAttribute("data-l10n-id",ot);const ft=Ut(this,Hm)._signal;ft instanceof AbortSignal&&!ft.aborted&&(ct.addEventListener("contextmenu",noContextMenu,{signal:ft}),ct.addEventListener("click",ut,{signal:ft})),Ut(this,X_).append(ct)};function bindEvents(it,g,et){for(const ot of et)g.addEventListener(ot,it[ot].bind(it))}var jC;class IdManager{constructor(){Rn(this,jC,0)}get id(){return`${AnnotationEditorPrefix}${Ko(this,jC)._++}`}}jC=new WeakMap;var lx,Q_,Yl,ux,tC;const hP=class hP{constructor(){Rn(this,ux);Rn(this,lx,getUuid());Rn(this,Q_,0);Rn(this,Yl,null)}static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ot=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ut=new Image;ut.src=g;const ct=ut.decode().then(()=>(ot.drawImage(ut,0,0,1,1,0,0,1,3),new Uint32Array(ot.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ct)}async getFromFile(g){const{lastModified:et,name:ot,size:ut,type:ct}=g;return Xn(this,ux,tC).call(this,`${et}_${ot}_${ut}_${ct}`,g)}async getFromUrl(g){return Xn(this,ux,tC).call(this,g,g)}async getFromBlob(g,et){const ot=await et;return Xn(this,ux,tC).call(this,g,ot)}async getFromId(g){Ut(this,Yl)||In(this,Yl,new Map);const et=Ut(this,Yl).get(g);if(!et)return null;if(et.bitmap)return et.refCounter+=1,et;if(et.file)return this.getFromFile(et.file);if(et.blobPromise){const{blobPromise:ot}=et;return delete et.blobPromise,this.getFromBlob(et.id,ot)}return this.getFromUrl(et.url)}getFromCanvas(g,et){Ut(this,Yl)||In(this,Yl,new Map);let ot=Ut(this,Yl).get(g);if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;const ut=new OffscreenCanvas(et.width,et.height);return ut.getContext("2d").drawImage(et,0,0),ot={bitmap:ut.transferToImageBitmap(),id:`image_${Ut(this,lx)}_${Ko(this,Q_)._++}`,refCounter:1,isSvg:!1},Ut(this,Yl).set(g,ot),Ut(this,Yl).set(ot.id,ot),ot}getSvgUrl(g){const et=Ut(this,Yl).get(g);return et!=null&&et.isSvg?et.svgUrl:null}deleteId(g){var ut;Ut(this,Yl)||In(this,Yl,new Map);const et=Ut(this,Yl).get(g);if(!et||(et.refCounter-=1,et.refCounter!==0))return;const{bitmap:ot}=et;if(!et.url&&!et.file){const ct=new OffscreenCanvas(ot.width,ot.height);ct.getContext("bitmaprenderer").transferFromImageBitmap(ot),et.blobPromise=ct.convertToBlob()}(ut=ot.close)==null||ut.call(ot),et.bitmap=null}isValidId(g){return g.startsWith(`image_${Ut(this,lx)}_`)}};lx=new WeakMap,Q_=new WeakMap,Yl=new WeakMap,ux=new WeakSet,tC=async function(g,et){Ut(this,Yl)||In(this,Yl,new Map);let ot=Ut(this,Yl).get(g);if(ot===null)return null;if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;try{ot||(ot={bitmap:null,id:`image_${Ut(this,lx)}_${Ko(this,Q_)._++}`,refCounter:0,isSvg:!1});let ut;if(typeof et=="string"?(ot.url=et,ut=await fetchData(et,"blob")):et instanceof File?ut=ot.file=et:et instanceof Blob&&(ut=et),ut.type==="image/svg+xml"){const ct=hP._isSVGFittingCanvas,dt=new FileReader,ft=new Image,St=new Promise((kt,Tt)=>{ft.onload=()=>{ot.bitmap=ft,ot.isSvg=!0,kt()},dt.onload=async()=>{const Rt=ot.svgUrl=dt.result;ft.src=await ct?`${Rt}#svgView(preserveAspectRatio(none))`:Rt},ft.onerror=dt.onerror=Tt});dt.readAsDataURL(ut),await St}else ot.bitmap=await createImageBitmap(ut);ot.refCounter=1}catch(ut){warn(ut),ot=null}return Ut(this,Yl).set(g,ot),ot&&Ut(this,Yl).set(ot.id,ot),ot};let ImageManager=hP;var Fo,B0,Z_,To;class CommandManager{constructor(g=128){Rn(this,Fo,[]);Rn(this,B0,!1);Rn(this,Z_,void 0);Rn(this,To,-1);In(this,Z_,g)}add({cmd:g,undo:et,post:ot,mustExec:ut,type:ct=NaN,overwriteIfSameType:dt=!1,keepUndo:ft=!1}){if(ut&&g(),Ut(this,B0))return;const St={cmd:g,undo:et,post:ot,type:ct};if(Ut(this,To)===-1){Ut(this,Fo).length>0&&(Ut(this,Fo).length=0),In(this,To,0),Ut(this,Fo).push(St);return}if(dt&&Ut(this,Fo)[Ut(this,To)].type===ct){ft&&(St.undo=Ut(this,Fo)[Ut(this,To)].undo),Ut(this,Fo)[Ut(this,To)]=St;return}const kt=Ut(this,To)+1;kt===Ut(this,Z_)?Ut(this,Fo).splice(0,1):(In(this,To,kt),kt<Ut(this,Fo).length&&Ut(this,Fo).splice(kt)),Ut(this,Fo).push(St)}undo(){if(Ut(this,To)===-1)return;In(this,B0,!0);const{undo:g,post:et}=Ut(this,Fo)[Ut(this,To)];g(),et==null||et(),In(this,B0,!1),In(this,To,Ut(this,To)-1)}redo(){if(Ut(this,To)<Ut(this,Fo).length-1){In(this,To,Ut(this,To)+1),In(this,B0,!0);const{cmd:g,post:et}=Ut(this,Fo)[Ut(this,To)];g(),et==null||et(),In(this,B0,!1)}}hasSomethingToUndo(){return Ut(this,To)!==-1}hasSomethingToRedo(){return Ut(this,To)<Ut(this,Fo).length-1}cleanType(g){if(Ut(this,To)!==-1){for(let et=Ut(this,To);et>=0;et--)if(Ut(this,Fo)[et].type!==g){Ut(this,Fo).splice(et+1,Ut(this,To)-et),In(this,To,et);return}Ut(this,Fo).length=0,In(this,To,-1)}}destroy(){In(this,Fo,null)}}Fo=new WeakMap,B0=new WeakMap,Z_=new WeakMap,To=new WeakMap;var FC,UR;class KeyboardManager{constructor(g){Rn(this,FC);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:et}=util_FeatureTest.platform;for(const[ot,ut,ct={}]of g)for(const dt of ot){const ft=dt.startsWith("mac+");et&&ft?(this.callbacks.set(dt.slice(4),{callback:ut,options:ct}),this.allKeys.add(dt.split("+").at(-1))):!et&&!ft&&(this.callbacks.set(dt,{callback:ut,options:ct}),this.allKeys.add(dt.split("+").at(-1)))}}exec(g,et){if(!this.allKeys.has(et.key))return;const ot=this.callbacks.get(Xn(this,FC,UR).call(this,et));if(!ot)return;const{callback:ut,options:{bubbles:ct=!1,args:dt=[],checker:ft=null}}=ot;ft&&!ft(g,et)||(ut.bind(g,...dt,et)(),ct||stopEvent(et))}}FC=new WeakSet,UR=function(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const et=this.buffer.join("+");return this.buffer.length=0,et};const $C=class $C{get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(g),shadow(this,"_colors",g)}convert(g){const et=getRGB(g);if(!window.matchMedia("(forced-colors: active)").matches)return et;for(const[ot,ut]of this._colors)if(ut.every((ct,dt)=>ct===et[dt]))return $C._colorsMapping.get(ot);return et}getHexCode(g){const et=this._colors.get(g);return et?Util$1.makeHexColor(...et):g}};Ur($C,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=$C;var cx,Bu,hx,Mo,Xo,dx,pp,fx,mp,Xl,V0,z0,mx,H0,tm,gp,c1,e2,t2,gx,n2,im,U0,yx,G0,sm,BC,W0,vx,r2,q0,h1,xx,K0,i2,Ho,qs,Um,Y0,X0,s2,bx,a2,J0,am,Gm,o2,l2,yp,Ex,nC,u2,u3,VC,GR,zC,WR,d1,T_,HC,qR,UC,KR,GC,YR,c2,c3,WC,XR,h2,h3,d2,d3,qC,JR,Ll,su,Mp,$m,KC,QR,YC,ZR,f2,f3,XC,e4,f1,P_,p2,p3;const tx=class tx{constructor(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,jt,Ft,Bt,Ht,Yt){Rn(this,Ex);Rn(this,u2);Rn(this,VC);Rn(this,zC);Rn(this,d1);Rn(this,HC);Rn(this,UC);Rn(this,GC);Rn(this,c2);Rn(this,WC);Rn(this,h2);Rn(this,d2);Rn(this,qC);Rn(this,Ll);Rn(this,Mp);Rn(this,KC);Rn(this,YC);Rn(this,f2);Rn(this,XC);Rn(this,f1);Rn(this,p2);Rn(this,cx,new AbortController);Rn(this,Bu,null);Rn(this,hx,null);Rn(this,Mo,new Map);Rn(this,Xo,new Map);Rn(this,dx,null);Rn(this,pp,null);Rn(this,fx,null);Rn(this,mp,new CommandManager);Rn(this,Xl,null);Rn(this,V0,null);Rn(this,z0,null);Rn(this,mx,0);Rn(this,H0,new Set);Rn(this,tm,null);Rn(this,gp,null);Rn(this,c1,new Set);Ur(this,"_editorUndoBar",null);Rn(this,e2,!1);Rn(this,t2,!1);Rn(this,gx,!1);Rn(this,n2,null);Rn(this,im,null);Rn(this,U0,null);Rn(this,yx,null);Rn(this,G0,!1);Rn(this,sm,null);Rn(this,BC,new IdManager);Rn(this,W0,!1);Rn(this,vx,!1);Rn(this,r2,!1);Rn(this,q0,null);Rn(this,h1,null);Rn(this,xx,null);Rn(this,K0,null);Rn(this,i2,null);Rn(this,Ho,AnnotationEditorType.NONE);Rn(this,qs,new Set);Rn(this,Um,null);Rn(this,Y0,null);Rn(this,X0,null);Rn(this,s2,null);Rn(this,bx,null);Rn(this,a2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Rn(this,J0,[0,0]);Rn(this,am,null);Rn(this,Gm,null);Rn(this,o2,null);Rn(this,l2,null);Rn(this,yp,null);const zt=this._signal=Ut(this,cx).signal;In(this,Gm,g),In(this,o2,et),In(this,l2,ot),In(this,dx,ut),In(this,Xl,ct),In(this,Y0,dt),In(this,bx,St),this._eventBus=ft,ft._on("editingaction",this.onEditingAction.bind(this),{signal:zt}),ft._on("pagechanging",this.onPageChanging.bind(this),{signal:zt}),ft._on("scalechanging",this.onScaleChanging.bind(this),{signal:zt}),ft._on("rotationchanging",this.onRotationChanging.bind(this),{signal:zt}),ft._on("setpreference",this.onSetPreference.bind(this),{signal:zt}),ft._on("switchannotationeditorparams",Kt=>this.updateParams(Kt.type,Kt.value),{signal:zt}),window.addEventListener("pointerdown",()=>{In(this,vx,!0)},{capture:!0,signal:zt}),window.addEventListener("pointerup",()=>{In(this,vx,!1)},{capture:!0,signal:zt}),Xn(this,HC,qR).call(this),Xn(this,qC,JR).call(this),Xn(this,c2,c3).call(this),In(this,pp,St.annotationStorage),In(this,n2,St.filterFactory),In(this,X0,kt),In(this,yx,Tt||null),In(this,e2,Rt),In(this,t2,jt),In(this,gx,Ft),In(this,i2,Bt||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=Ht||null,this._supportsPinchToZoom=Yt!==!1,ct==null||ct.setSidebarUiManager(this)}static get _keyboardManager(){const g=tx.prototype,et=dt=>Ut(dt,Gm).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&dt.hasSomethingToControl(),ot=(dt,{target:ft})=>{if(ft instanceof HTMLInputElement){const{type:St}=ft;return St!=="text"&&St!=="number"}return!0},ut=this.TRANSLATE_SMALL,ct=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],g.selectAll,{checker:ot}],[["ctrl+z","mac+meta+z"],g.undo,{checker:ot}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo,{checker:ot}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete,{checker:ot}],[["Enter","mac+Enter"],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Ut(dt,Gm).contains(ft)&&!dt.isEnterHandled}],[[" ","mac+ "],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Ut(dt,Gm).contains(document.activeElement)}],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-ut,0],checker:et}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-ct,0],checker:et}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[ut,0],checker:et}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[ct,0],checker:et}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-ut],checker:et}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-ct],checker:et}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,ut],checker:et}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,ct],checker:et}]]))}destroy(){var g,et,ot,ut,ct,dt,ft,St,kt;(g=Ut(this,yp))==null||g.resolve(),In(this,yp,null),(et=Ut(this,cx))==null||et.abort(),In(this,cx,null),this._signal=null;for(const Tt of Ut(this,Xo).values())Tt.destroy();Ut(this,Xo).clear(),Ut(this,Mo).clear(),Ut(this,c1).clear(),(ot=Ut(this,K0))==null||ot.clear(),In(this,Bu,null),Ut(this,qs).clear(),Ut(this,mp).destroy(),(ut=Ut(this,dx))==null||ut.destroy(),(ct=Ut(this,Xl))==null||ct.destroy(),(dt=Ut(this,Y0))==null||dt.destroy(),(ft=Ut(this,sm))==null||ft.hide(),In(this,sm,null),(St=Ut(this,xx))==null||St.destroy(),In(this,xx,null),In(this,hx,null),Ut(this,im)&&(clearTimeout(Ut(this,im)),In(this,im,null)),Ut(this,am)&&(clearTimeout(Ut(this,am)),In(this,am,null)),(kt=this._editorUndoBar)==null||kt.destroy(),In(this,bx,null)}combinedSignal(g){return AbortSignal.any([this._signal,g.signal])}get mlManager(){return Ut(this,i2)}get useNewAltTextFlow(){return Ut(this,t2)}get useNewAltTextWhenAddingImage(){return Ut(this,gx)}get hcmFilter(){return shadow(this,"hcmFilter",Ut(this,X0)?Ut(this,n2).addHCMFilter(Ut(this,X0).foreground,Ut(this,X0).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(Ut(this,Gm)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",Ut(this,yx)?new Map(Ut(this,yx).split(",").map(g=>(g=g.split("=").map(et=>et.trim()),g[1]=g[1].toUpperCase(),g))):null)}get highlightColors(){const{_highlightColors:g}=this;if(!g)return shadow(this,"highlightColors",null);const et=new Map,ot=!!Ut(this,X0);for(const[ut,ct]of g){const dt=ut.endsWith("_HCM");if(ot&&dt){et.set(ut.replace("_HCM",""),ct);continue}!ot&&!dt&&et.set(ut,ct)}return shadow(this,"highlightColors",et)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,g=>g.reverse())):null)}getNonHCMColor(g){if(!this._highlightColors)return g;const et=this.highlightColorNames.get(g);return this._highlightColors.get(et)||g}getNonHCMColorName(g){return this.highlightColorNames.get(g)||g}setCurrentDrawingSession(g){g?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),In(this,z0,g)}setMainHighlightColorPicker(g){In(this,xx,g)}editAltText(g,et=!1){var ot;(ot=Ut(this,dx))==null||ot.editAltText(this,g,et)}hasCommentManager(){return!!Ut(this,Xl)}editComment(g,et,ot,ut){var ct;(ct=Ut(this,Xl))==null||ct.showDialog(this,g,et,ot,ut)}selectComment(g,et){const ot=Ut(this,Xo).get(g),ut=ot==null?void 0:ot.getEditorByUID(et);ut==null||ut.toggleComment(!0,!0)}updateComment(g){var et;(et=Ut(this,Xl))==null||et.updateComment(g.getData())}updatePopupColor(g){var et;(et=Ut(this,Xl))==null||et.updatePopupColor(g)}removeComment(g){var et;(et=Ut(this,Xl))==null||et.removeComments([g.uid])}toggleComment(g,et,ot=void 0){var ut;(ut=Ut(this,Xl))==null||ut.toggleCommentPopup(g,et,ot)}makeCommentColor(g,et){var ot;return g&&((ot=Ut(this,Xl))==null?void 0:ot.makeCommentColor(g,et))||null}getCommentDialogElement(){var g;return((g=Ut(this,Xl))==null?void 0:g.dialogElement)||null}async waitForEditorsRendered(g){if(Ut(this,Xo).has(g-1))return;const{resolve:et,promise:ot}=Promise.withResolvers(),ut=ct=>{ct.pageNumber===g&&(this._eventBus._off("editorsrendered",ut),et())};this._eventBus.on("editorsrendered",ut),await ot}getSignature(g){var et;(et=Ut(this,Y0))==null||et.getSignature({uiManager:this,editor:g})}get signatureManager(){return Ut(this,Y0)}switchToMode(g,et){this._eventBus.on("annotationeditormodechanged",et,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:g})}setPreference(g,et){this._eventBus.dispatch("setpreference",{source:this,name:g,value:et})}onSetPreference({name:g,value:et}){switch(g){case"enableNewAltTextWhenAddingImage":In(this,gx,et);break}}onPageChanging({pageNumber:g}){In(this,mx,g-1)}focusMainContainer(){Ut(this,Gm).focus()}findParent(g,et){for(const ot of Ut(this,Xo).values()){const{x:ut,y:ct,width:dt,height:ft}=ot.div.getBoundingClientRect();if(g>=ut&&g<=ut+dt&&et>=ct&&et<=ct+ft)return ot}return null}disableUserSelect(g=!1){Ut(this,o2).classList.toggle("noUserSelect",g)}addShouldRescale(g){Ut(this,c1).add(g)}removeShouldRescale(g){Ut(this,c1).delete(g)}onScaleChanging({scale:g}){var et;this.commitOrRemove(),this.viewParameters.realScale=g*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ot of Ut(this,c1))ot.onScaleChanging();(et=Ut(this,z0))==null||et.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}highlightSelection(g="",et=!1){const ot=document.getSelection();if(!ot||ot.isCollapsed)return;const{anchorNode:ut,anchorOffset:ct,focusNode:dt,focusOffset:ft}=ot,St=ot.toString(),Tt=Xn(this,Ex,nC).call(this,ot).closest(".textLayer"),Rt=this.getSelectionBoxes(Tt);if(!Rt)return;ot.empty();const jt=Xn(this,u2,u3).call(this,Tt),Ft=Ut(this,Ho)===AnnotationEditorType.NONE,Bt=()=>{const Ht=jt==null?void 0:jt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:g,boxes:Rt,anchorNode:ut,anchorOffset:ct,focusNode:dt,focusOffset:ft,text:St});Ft&&this.showAllEditors("highlight",!0,!0),et&&(Ht==null||Ht.editComment())};if(Ft){this.switchToMode(AnnotationEditorType.HIGHLIGHT,Bt);return}Bt()}commentSelection(g=""){this.highlightSelection(g,!0)}getAndRemoveDataFromAnnotationStorage(g){if(!Ut(this,pp))return null;const et=`${AnnotationEditorPrefix}${g}`,ot=Ut(this,pp).getRawValue(et);return ot&&Ut(this,pp).remove(et),ot}addToAnnotationStorage(g){!g.isEmpty()&&Ut(this,pp)&&!Ut(this,pp).has(g.id)&&Ut(this,pp).setValue(g.id,g)}a11yAlert(g,et=null){const ot=Ut(this,l2);ot&&(ot.setAttribute("data-l10n-id",g),et?ot.setAttribute("data-l10n-args",JSON.stringify(et)):ot.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Ut(this,G0)&&(In(this,G0,!1),Xn(this,d1,T_).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:g}=document;for(const et of Ut(this,qs))if(et.div.contains(g)){In(this,h1,[et,g]),et._focusEventsAllowed=!1;break}}focus(){if(!Ut(this,h1))return;const[g,et]=Ut(this,h1);In(this,h1,null),et.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:this._signal}),et.focus()}addEditListeners(){Xn(this,c2,c3).call(this),Xn(this,h2,h3).call(this)}removeEditListeners(){Xn(this,WC,XR).call(this),Xn(this,d2,d3).call(this)}dragOver(g){for(const{type:et}of g.dataTransfer.items)for(const ot of Ut(this,gp))if(ot.isHandlingMimeForPasting(et)){g.dataTransfer.dropEffect="copy",g.preventDefault();return}}drop(g){for(const et of g.dataTransfer.items)for(const ot of Ut(this,gp))if(ot.isHandlingMimeForPasting(et.type)){ot.paste(et,this.currentLayer),g.preventDefault();return}}copy(g){var ot;if(g.preventDefault(),(ot=Ut(this,Bu))==null||ot.commitOrRemove(),!this.hasSelection)return;const et=[];for(const ut of Ut(this,qs)){const ct=ut.serialize(!0);ct&&et.push(ct)}et.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(et))}cut(g){this.copy(g),this.delete()}async paste(g){g.preventDefault();const{clipboardData:et}=g;for(const ct of et.items)for(const dt of Ut(this,gp))if(dt.isHandlingMimeForPasting(ct.type)){dt.paste(ct,this.currentLayer);return}let ot=et.getData("application/pdfjs");if(!ot)return;try{ot=JSON.parse(ot)}catch(ct){warn(`paste: "${ct.message}".`);return}if(!Array.isArray(ot))return;this.unselectAll();const ut=this.currentLayer;try{const ct=[];for(const St of ot){const kt=await ut.deserialize(St);if(!kt)return;ct.push(kt)}const dt=()=>{for(const St of ct)Xn(this,f2,f3).call(this,St);Xn(this,p2,p3).call(this,ct)},ft=()=>{for(const St of ct)St.remove()};this.addCommands({cmd:dt,undo:ft,mustExec:!0})}catch(ct){warn(`paste: "${ct.message}".`)}}keydown(g){!this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!0),Ut(this,Ho)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&tx._keyboardManager.exec(this,g)}keyup(g){this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!1,Ut(this,G0)&&(In(this,G0,!1),Xn(this,d1,T_).call(this,"main_toolbar")))}onEditingAction({name:g}){switch(g){case"undo":case"redo":case"delete":case"selectAll":this[g]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(g){g?(Xn(this,UC,KR).call(this),Xn(this,h2,h3).call(this),Xn(this,Ll,su).call(this,{isEditing:Ut(this,Ho)!==AnnotationEditorType.NONE,isEmpty:Xn(this,f1,P_).call(this),hasSomethingToUndo:Ut(this,mp).hasSomethingToUndo(),hasSomethingToRedo:Ut(this,mp).hasSomethingToRedo(),hasSelectedEditor:!1})):(Xn(this,GC,YR).call(this),Xn(this,d2,d3).call(this),Xn(this,Ll,su).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!Ut(this,gp)){In(this,gp,g);for(const et of Ut(this,gp))Xn(this,Mp,$m).call(this,et.defaultPropertiesToUpdate)}}getId(){return Ut(this,BC).id}get currentLayer(){return Ut(this,Xo).get(Ut(this,mx))}getLayer(g){return Ut(this,Xo).get(g)}get currentPageIndex(){return Ut(this,mx)}addLayer(g){Ut(this,Xo).set(g.pageIndex,g),Ut(this,W0)?g.enable():g.disable()}removeLayer(g){Ut(this,Xo).delete(g.pageIndex)}async updateMode(g,et=null,ot=!1,ut=!1,ct=!1){var dt,ft,St,kt,Tt,Rt;if(Ut(this,Ho)!==g&&!(Ut(this,yp)&&(await Ut(this,yp).promise,!Ut(this,yp)))){if(In(this,yp,Promise.withResolvers()),(dt=Ut(this,z0))==null||dt.commitOrRemove(),Ut(this,Ho)===AnnotationEditorType.POPUP&&((ft=Ut(this,Xl))==null||ft.hideSidebar()),(St=Ut(this,Xl))==null||St.destroyPopup(),In(this,Ho,g),g===AnnotationEditorType.NONE){this.setEditingState(!1),Xn(this,YC,ZR).call(this);for(const jt of Ut(this,Mo).values())jt.hideStandaloneCommentButton();(kt=this._editorUndoBar)==null||kt.hide(),this.toggleComment(null),Ut(this,yp).resolve();return}for(const jt of Ut(this,Mo).values())jt.addStandaloneCommentButton();g===AnnotationEditorType.SIGNATURE&&await((Tt=Ut(this,Y0))==null?void 0:Tt.loadSignatures()),this.setEditingState(!0),await Xn(this,KC,QR).call(this),this.unselectAll();for(const jt of Ut(this,Xo).values())jt.updateMode(g);if(g===AnnotationEditorType.POPUP){Ut(this,hx)||In(this,hx,await Ut(this,bx).getAnnotationsByType(new Set(Ut(this,gp).map(Bt=>Bt._editorType))));const jt=new Set,Ft=[];for(const Bt of Ut(this,Mo).values()){const{annotationElementId:Ht,hasComment:Yt,deleted:zt}=Bt;Ht&&jt.add(Ht),Yt&&!zt&&Ft.push(Bt.getData())}for(const Bt of Ut(this,hx)){const{id:Ht,popupRef:Yt,contentsObj:zt}=Bt;Yt&&(zt!=null&&zt.str)&&!jt.has(Ht)&&!Ut(this,H0).has(Ht)&&Ft.push(Bt)}(Rt=Ut(this,Xl))==null||Rt.showSidebar(Ft)}if(!et){ot&&this.addNewEditorFromKeyboard(),Ut(this,yp).resolve();return}for(const jt of Ut(this,Mo).values())jt.uid===et?(this.setSelected(jt),ct?jt.editComment():ut?jt.enterInEditMode():jt.focus()):jt.unselect();Ut(this,yp).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(g){g.mode!==Ut(this,Ho)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...g})}updateParams(g,et){if(Ut(this,gp)){switch(g){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(et);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Ut(this,s2)||In(this,s2,new Map)).set(g,et),this.showAllEditors("highlight",et);break}if(this.hasSelection)for(const ot of Ut(this,qs))ot.updateParams(g,et);else for(const ot of Ut(this,gp))ot.updateDefaultParams(g,et)}}showAllEditors(g,et,ot=!1){var ct;for(const dt of Ut(this,Mo).values())dt.editorType===g&&dt.show(et);(((ct=Ut(this,s2))==null?void 0:ct.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==et&&Xn(this,Mp,$m).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,et]])}enableWaiting(g=!1){if(Ut(this,r2)!==g){In(this,r2,g);for(const et of Ut(this,Xo).values())g?et.disableClick():et.enableClick(),et.div.classList.toggle("waiting",g)}}*getEditors(g){for(const et of Ut(this,Mo).values())et.pageIndex===g&&(yield et)}getEditor(g){return Ut(this,Mo).get(g)}addEditor(g){Ut(this,Mo).set(g.id,g)}removeEditor(g){var et,ot;g.div.contains(document.activeElement)&&(Ut(this,im)&&clearTimeout(Ut(this,im)),In(this,im,setTimeout(()=>{this.focusMainContainer(),In(this,im,null)},0))),Ut(this,Mo).delete(g.id),g.annotationElementId&&((et=Ut(this,K0))==null||et.delete(g.annotationElementId)),this.unselect(g),(!g.annotationElementId||!Ut(this,H0).has(g.annotationElementId))&&((ot=Ut(this,pp))==null||ot.remove(g.id))}addDeletedAnnotationElement(g){Ut(this,H0).add(g.annotationElementId),this.addChangedExistingAnnotation(g),g.deleted=!0}isDeletedAnnotationElement(g){return Ut(this,H0).has(g)}removeDeletedAnnotationElement(g){Ut(this,H0).delete(g.annotationElementId),this.removeChangedExistingAnnotation(g),g.deleted=!1}setActiveEditor(g){Ut(this,Bu)!==g&&(In(this,Bu,g),g&&Xn(this,Mp,$m).call(this,g.propertiesToUpdate))}updateUI(g){Ut(this,XC,e4)===g&&Xn(this,Mp,$m).call(this,g.propertiesToUpdate)}updateUIForDefaultProperties(g){Xn(this,Mp,$m).call(this,g.defaultPropertiesToUpdate)}toggleSelected(g){if(Ut(this,qs).has(g)){Ut(this,qs).delete(g),g.unselect(),Xn(this,Ll,su).call(this,{hasSelectedEditor:this.hasSelection});return}Ut(this,qs).add(g),g.select(),Xn(this,Mp,$m).call(this,g.propertiesToUpdate),Xn(this,Ll,su).call(this,{hasSelectedEditor:!0})}setSelected(g){var et;this.updateToolbar({mode:g.mode,editId:g.id}),(et=Ut(this,z0))==null||et.commitOrRemove();for(const ot of Ut(this,qs))ot!==g&&ot.unselect();Ut(this,qs).clear(),Ut(this,qs).add(g),g.select(),Xn(this,Mp,$m).call(this,g.propertiesToUpdate),Xn(this,Ll,su).call(this,{hasSelectedEditor:!0})}isSelected(g){return Ut(this,qs).has(g)}get firstSelectedEditor(){return Ut(this,qs).values().next().value}unselect(g){g.unselect(),Ut(this,qs).delete(g),Xn(this,Ll,su).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Ut(this,qs).size!==0}get isEnterHandled(){return Ut(this,qs).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var g;Ut(this,mp).undo(),Xn(this,Ll,su).call(this,{hasSomethingToUndo:Ut(this,mp).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Xn(this,f1,P_).call(this)}),(g=this._editorUndoBar)==null||g.hide()}redo(){Ut(this,mp).redo(),Xn(this,Ll,su).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Ut(this,mp).hasSomethingToRedo(),isEmpty:Xn(this,f1,P_).call(this)})}addCommands(g){Ut(this,mp).add(g),Xn(this,Ll,su).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Xn(this,f1,P_).call(this)})}cleanUndoStack(g){Ut(this,mp).cleanType(g)}delete(){var ct;this.commitOrRemove();const g=(ct=this.currentLayer)==null?void 0:ct.endDrawingSession(!0);if(!this.hasSelection&&!g)return;const et=g?[g]:[...Ut(this,qs)],ot=()=>{var dt;(dt=this._editorUndoBar)==null||dt.show(ut,et.length===1?et[0].editorType:et.length);for(const ft of et)ft.remove()},ut=()=>{for(const dt of et)Xn(this,f2,f3).call(this,dt)};this.addCommands({cmd:ot,undo:ut,mustExec:!0})}commitOrRemove(){var g;(g=Ut(this,Bu))==null||g.commitOrRemove()}hasSomethingToControl(){return Ut(this,Bu)||this.hasSelection}selectAll(){for(const g of Ut(this,qs))g.commit();Xn(this,p2,p3).call(this,Ut(this,Mo).values())}unselectAll(){var g;if(!(Ut(this,Bu)&&(Ut(this,Bu).commitOrRemove(),Ut(this,Ho)!==AnnotationEditorType.NONE))&&!((g=Ut(this,z0))!=null&&g.commitOrRemove())&&this.hasSelection){for(const et of Ut(this,qs))et.unselect();Ut(this,qs).clear(),Xn(this,Ll,su).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(g,et,ot=!1){if(ot||this.commitOrRemove(),!this.hasSelection)return;Ut(this,J0)[0]+=g,Ut(this,J0)[1]+=et;const[ut,ct]=Ut(this,J0),dt=[...Ut(this,qs)],ft=1e3;Ut(this,am)&&clearTimeout(Ut(this,am)),In(this,am,setTimeout(()=>{In(this,am,null),Ut(this,J0)[0]=Ut(this,J0)[1]=0,this.addCommands({cmd:()=>{for(const St of dt)Ut(this,Mo).has(St.id)&&(St.translateInPage(ut,ct),St.translationDone())},undo:()=>{for(const St of dt)Ut(this,Mo).has(St.id)&&(St.translateInPage(-ut,-ct),St.translationDone())},mustExec:!1})},ft));for(const St of dt)St.translateInPage(g,et),St.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),In(this,tm,new Map);for(const g of Ut(this,qs))Ut(this,tm).set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Ut(this,tm))return!1;this.disableUserSelect(!1);const g=Ut(this,tm);In(this,tm,null);let et=!1;for(const[{x:ut,y:ct,pageIndex:dt},ft]of g)ft.newX=ut,ft.newY=ct,ft.newPageIndex=dt,et||(et=ut!==ft.savedX||ct!==ft.savedY||dt!==ft.savedPageIndex);if(!et)return!1;const ot=(ut,ct,dt,ft)=>{if(Ut(this,Mo).has(ut.id)){const St=Ut(this,Xo).get(ft);St?ut._setParentAndPosition(St,ct,dt):(ut.pageIndex=ft,ut.x=ct,ut.y=dt)}};return this.addCommands({cmd:()=>{for(const[ut,{newX:ct,newY:dt,newPageIndex:ft}]of g)ot(ut,ct,dt,ft)},undo:()=>{for(const[ut,{savedX:ct,savedY:dt,savedPageIndex:ft}]of g)ot(ut,ct,dt,ft)},mustExec:!0}),!0}dragSelectedEditors(g,et){if(Ut(this,tm))for(const ot of Ut(this,tm).keys())ot.drag(g,et)}rebuild(g){if(g.parent===null){const et=this.getLayer(g.pageIndex);et?(et.changeParent(g),et.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}get isEditorHandlingKeyboard(){var g;return((g=this.getActive())==null?void 0:g.shouldGetKeyboardEvents())||Ut(this,qs).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(g){return Ut(this,Bu)===g}getActive(){return Ut(this,Bu)}getMode(){return Ut(this,Ho)}isEditingMode(){return Ut(this,Ho)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(g){if(!g)return null;const et=document.getSelection();for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++)if(!g.contains(et.getRangeAt(kt).commonAncestorContainer))return null;const{x:ot,y:ut,width:ct,height:dt}=g.getBoundingClientRect();let ft;switch(g.getAttribute("data-main-rotation")){case"90":ft=(kt,Tt,Rt,jt)=>({x:(Tt-ut)/dt,y:1-(kt+Rt-ot)/ct,width:jt/dt,height:Rt/ct});break;case"180":ft=(kt,Tt,Rt,jt)=>({x:1-(kt+Rt-ot)/ct,y:1-(Tt+jt-ut)/dt,width:Rt/ct,height:jt/dt});break;case"270":ft=(kt,Tt,Rt,jt)=>({x:1-(Tt+jt-ut)/dt,y:(kt-ot)/ct,width:jt/dt,height:Rt/ct});break;default:ft=(kt,Tt,Rt,jt)=>({x:(kt-ot)/ct,y:(Tt-ut)/dt,width:Rt/ct,height:jt/dt});break}const St=[];for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++){const Rt=et.getRangeAt(kt);if(!Rt.collapsed)for(const{x:jt,y:Ft,width:Bt,height:Ht}of Rt.getClientRects())Bt===0||Ht===0||St.push(ft(jt,Ft,Bt,Ht))}return St.length===0?null:St}addChangedExistingAnnotation({annotationElementId:g,id:et}){(Ut(this,fx)||In(this,fx,new Map)).set(g,et)}removeChangedExistingAnnotation({annotationElementId:g}){var et;(et=Ut(this,fx))==null||et.delete(g)}renderAnnotationElement(g){var ut;const et=(ut=Ut(this,fx))==null?void 0:ut.get(g.data.id);if(!et)return;const ot=Ut(this,pp).getRawValue(et);ot&&(Ut(this,Ho)===AnnotationEditorType.NONE&&!ot.hasBeenModified||ot.renderAnnotationElement(g))}setMissingCanvas(g,et,ot){var ct;const ut=(ct=Ut(this,K0))==null?void 0:ct.get(g);ut&&(ut.setCanvas(et,ot),Ut(this,K0).delete(g))}addMissingCanvas(g,et){(Ut(this,K0)||In(this,K0,new Map)).set(g,et)}};cx=new WeakMap,Bu=new WeakMap,hx=new WeakMap,Mo=new WeakMap,Xo=new WeakMap,dx=new WeakMap,pp=new WeakMap,fx=new WeakMap,mp=new WeakMap,Xl=new WeakMap,V0=new WeakMap,z0=new WeakMap,mx=new WeakMap,H0=new WeakMap,tm=new WeakMap,gp=new WeakMap,c1=new WeakMap,e2=new WeakMap,t2=new WeakMap,gx=new WeakMap,n2=new WeakMap,im=new WeakMap,U0=new WeakMap,yx=new WeakMap,G0=new WeakMap,sm=new WeakMap,BC=new WeakMap,W0=new WeakMap,vx=new WeakMap,r2=new WeakMap,q0=new WeakMap,h1=new WeakMap,xx=new WeakMap,K0=new WeakMap,i2=new WeakMap,Ho=new WeakMap,qs=new WeakMap,Um=new WeakMap,Y0=new WeakMap,X0=new WeakMap,s2=new WeakMap,bx=new WeakMap,a2=new WeakMap,J0=new WeakMap,am=new WeakMap,Gm=new WeakMap,o2=new WeakMap,l2=new WeakMap,yp=new WeakMap,Ex=new WeakSet,nC=function({anchorNode:g}){return g.nodeType===Node.TEXT_NODE?g.parentElement:g},u2=new WeakSet,u3=function(g){const{currentLayer:et}=this;if(et.hasTextLayer(g))return et;for(const ot of Ut(this,Xo).values())if(ot.hasTextLayer(g))return ot;return null},VC=new WeakSet,GR=function(){const g=document.getSelection();if(!g||g.isCollapsed)return;const ot=Xn(this,Ex,nC).call(this,g).closest(".textLayer"),ut=this.getSelectionBoxes(ot);ut&&(Ut(this,sm)||In(this,sm,new FloatingToolbar(this)),Ut(this,sm).show(ot,ut,this.direction==="ltr"))},zC=new WeakSet,WR=function(){var ct,dt,ft;const g=document.getSelection();if(!g||g.isCollapsed){Ut(this,Um)&&((ct=Ut(this,sm))==null||ct.hide(),In(this,Um,null),Xn(this,Ll,su).call(this,{hasSelectedText:!1}));return}const{anchorNode:et}=g;if(et===Ut(this,Um))return;const ut=Xn(this,Ex,nC).call(this,g).closest(".textLayer");if(!ut){Ut(this,Um)&&((dt=Ut(this,sm))==null||dt.hide(),In(this,Um,null),Xn(this,Ll,su).call(this,{hasSelectedText:!1}));return}if((ft=Ut(this,sm))==null||ft.hide(),In(this,Um,et),Xn(this,Ll,su).call(this,{hasSelectedText:!0}),!(Ut(this,Ho)!==AnnotationEditorType.HIGHLIGHT&&Ut(this,Ho)!==AnnotationEditorType.NONE)&&(Ut(this,Ho)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),In(this,G0,this.isShiftKeyDown),!this.isShiftKeyDown)){const St=Ut(this,Ho)===AnnotationEditorType.HIGHLIGHT?Xn(this,u2,u3).call(this,ut):null;if(St==null||St.toggleDrawing(),Ut(this,vx)){const kt=new AbortController,Tt=this.combinedSignal(kt),Rt=jt=>{jt.type==="pointerup"&&jt.button!==0||(kt.abort(),St==null||St.toggleDrawing(!0),jt.type==="pointerup"&&Xn(this,d1,T_).call(this,"main_toolbar"))};window.addEventListener("pointerup",Rt,{signal:Tt}),window.addEventListener("blur",Rt,{signal:Tt})}else St==null||St.toggleDrawing(!0),Xn(this,d1,T_).call(this,"main_toolbar")}},d1=new WeakSet,T_=function(g=""){Ut(this,Ho)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(g):Ut(this,e2)&&Xn(this,VC,GR).call(this)},HC=new WeakSet,qR=function(){document.addEventListener("selectionchange",Xn(this,zC,WR).bind(this),{signal:this._signal})},UC=new WeakSet,KR=function(){if(Ut(this,U0))return;In(this,U0,new AbortController);const g=this.combinedSignal(Ut(this,U0));window.addEventListener("focus",this.focus.bind(this),{signal:g}),window.addEventListener("blur",this.blur.bind(this),{signal:g})},GC=new WeakSet,YR=function(){var g;(g=Ut(this,U0))==null||g.abort(),In(this,U0,null)},c2=new WeakSet,c3=function(){if(Ut(this,q0))return;In(this,q0,new AbortController);const g=this.combinedSignal(Ut(this,q0));window.addEventListener("keydown",this.keydown.bind(this),{signal:g}),window.addEventListener("keyup",this.keyup.bind(this),{signal:g})},WC=new WeakSet,XR=function(){var g;(g=Ut(this,q0))==null||g.abort(),In(this,q0,null)},h2=new WeakSet,h3=function(){if(Ut(this,V0))return;In(this,V0,new AbortController);const g=this.combinedSignal(Ut(this,V0));document.addEventListener("copy",this.copy.bind(this),{signal:g}),document.addEventListener("cut",this.cut.bind(this),{signal:g}),document.addEventListener("paste",this.paste.bind(this),{signal:g})},d2=new WeakSet,d3=function(){var g;(g=Ut(this,V0))==null||g.abort(),In(this,V0,null)},qC=new WeakSet,JR=function(){const g=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:g}),document.addEventListener("drop",this.drop.bind(this),{signal:g})},Ll=new WeakSet,su=function(g){Object.entries(g).some(([ot,ut])=>Ut(this,a2)[ot]!==ut)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Ut(this,a2),g)}),Ut(this,Ho)===AnnotationEditorType.HIGHLIGHT&&g.hasSelectedEditor===!1&&Xn(this,Mp,$m).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Mp=new WeakSet,$m=function(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})},KC=new WeakSet,QR=async function(){if(!Ut(this,W0)){In(this,W0,!0);const g=[];for(const et of Ut(this,Xo).values())g.push(et.enable());await Promise.all(g);for(const et of Ut(this,Mo).values())et.enable()}},YC=new WeakSet,ZR=function(){if(this.unselectAll(),Ut(this,W0)){In(this,W0,!1);for(const g of Ut(this,Xo).values())g.disable();for(const g of Ut(this,Mo).values())g.disable()}},f2=new WeakSet,f3=function(g){const et=Ut(this,Xo).get(g.pageIndex);et?et.addOrRebuild(g):(this.addEditor(g),this.addToAnnotationStorage(g))},XC=new WeakSet,e4=function(){let g=null;for(g of Ut(this,qs));return g},f1=new WeakSet,P_=function(){if(Ut(this,Mo).size===0)return!0;if(Ut(this,Mo).size===1)for(const g of Ut(this,Mo).values())return g.isEmpty();return!1},p2=new WeakSet,p3=function(g){for(const et of Ut(this,qs))et.unselect();Ut(this,qs).clear();for(const et of g)et.isEmpty()||(Ut(this,qs).add(et),et.select());Xn(this,Ll,su).call(this,{hasSelectedEditor:this.hasSelection})},Ur(tx,"TRANSLATE_SMALL",1),Ur(tx,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=tx;var xl,om,Ip,_x,lm,Vu,Sx,um,Cu,Wm,p1,cm,Q0,m1,R_,wx,rC;const au=class au{constructor(g){Rn(this,m1);Rn(this,wx);Rn(this,xl,null);Rn(this,om,!1);Rn(this,Ip,null);Rn(this,_x,null);Rn(this,lm,null);Rn(this,Vu,null);Rn(this,Sx,!1);Rn(this,um,null);Rn(this,Cu,null);Rn(this,Wm,null);Rn(this,p1,null);Rn(this,cm,!1);In(this,Cu,g),In(this,cm,g._uiManager.useNewAltTextFlow),Ut(au,Q0)||In(au,Q0,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(g){au._l10n??(au._l10n=g)}async render(){const g=In(this,Ip,document.createElement("button"));g.className="altText",g.tabIndex="0";const et=In(this,_x,document.createElement("span"));g.append(et),Ut(this,cm)?(g.classList.add("new"),g.setAttribute("data-l10n-id",Ut(au,Q0).missing),et.setAttribute("data-l10n-id",Ut(au,Q0)["missing-label"])):(g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const ot=Ut(this,Cu)._uiManager._signal;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),g.addEventListener("pointerdown",ct=>ct.stopPropagation(),{signal:ot});const ut=ct=>{ct.preventDefault(),Ut(this,Cu)._uiManager.editAltText(Ut(this,Cu)),Ut(this,cm)&&Ut(this,Cu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Ut(this,m1,R_)}})};return g.addEventListener("click",ut,{capture:!0,signal:ot}),g.addEventListener("keydown",ct=>{ct.target===g&&ct.key==="Enter"&&(In(this,Sx,!0),ut(ct))},{signal:ot}),await Xn(this,wx,rC).call(this),g}finish(){Ut(this,Ip)&&(Ut(this,Ip).focus({focusVisible:Ut(this,Sx)}),In(this,Sx,!1))}isEmpty(){return Ut(this,cm)?Ut(this,xl)===null:!Ut(this,xl)&&!Ut(this,om)}hasData(){return Ut(this,cm)?Ut(this,xl)!==null||!!Ut(this,Wm):this.isEmpty()}get guessedText(){return Ut(this,Wm)}async setGuessedText(g){Ut(this,xl)===null&&(In(this,Wm,g),In(this,p1,await au._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:g})),Xn(this,wx,rC).call(this))}toggleAltTextBadge(g=!1){var et;if(!Ut(this,cm)||Ut(this,xl)){(et=Ut(this,um))==null||et.remove(),In(this,um,null);return}if(!Ut(this,um)){const ot=In(this,um,document.createElement("div"));ot.className="noAltTextBadge",Ut(this,Cu).div.append(ot)}Ut(this,um).classList.toggle("hidden",!g)}serialize(g){let et=Ut(this,xl);return!g&&Ut(this,Wm)===et&&(et=Ut(this,p1)),{altText:et,decorative:Ut(this,om),guessedText:Ut(this,Wm),textWithDisclaimer:Ut(this,p1)}}get data(){return{altText:Ut(this,xl),decorative:Ut(this,om)}}set data({altText:g,decorative:et,guessedText:ot,textWithDisclaimer:ut,cancel:ct=!1}){ot&&(In(this,Wm,ot),In(this,p1,ut)),!(Ut(this,xl)===g&&Ut(this,om)===et)&&(ct||(In(this,xl,g),In(this,om,et)),Xn(this,wx,rC).call(this))}toggle(g=!1){Ut(this,Ip)&&(!g&&Ut(this,Vu)&&(clearTimeout(Ut(this,Vu)),In(this,Vu,null)),Ut(this,Ip).disabled=!g)}shown(){Ut(this,Cu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Ut(this,m1,R_)}})}destroy(){var g,et;(g=Ut(this,Ip))==null||g.remove(),In(this,Ip,null),In(this,_x,null),In(this,lm,null),(et=Ut(this,um))==null||et.remove(),In(this,um,null)}};xl=new WeakMap,om=new WeakMap,Ip=new WeakMap,_x=new WeakMap,lm=new WeakMap,Vu=new WeakMap,Sx=new WeakMap,um=new WeakMap,Cu=new WeakMap,Wm=new WeakMap,p1=new WeakMap,cm=new WeakMap,Q0=new WeakMap,m1=new WeakSet,R_=function(){return Ut(this,xl)&&"added"||Ut(this,xl)===null&&this.guessedText&&"review"||"missing"},wx=new WeakSet,rC=async function(){var ut,ct,dt;const g=Ut(this,Ip);if(!g)return;if(Ut(this,cm)){if(g.classList.toggle("done",!!Ut(this,xl)),g.setAttribute("data-l10n-id",Ut(au,Q0)[Ut(this,m1,R_)]),(ut=Ut(this,_x))==null||ut.setAttribute("data-l10n-id",Ut(au,Q0)[`${Ut(this,m1,R_)}-label`]),!Ut(this,xl)){(ct=Ut(this,lm))==null||ct.remove();return}}else{if(!Ut(this,xl)&&!Ut(this,om)){g.classList.remove("done"),(dt=Ut(this,lm))==null||dt.remove();return}g.classList.add("done"),g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let et=Ut(this,lm);if(!et){In(this,lm,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip"),et.id=`alt-text-tooltip-${Ut(this,Cu).id}`;const ft=100,St=Ut(this,Cu)._uiManager._signal;St.addEventListener("abort",()=>{clearTimeout(Ut(this,Vu)),In(this,Vu,null)},{once:!0}),g.addEventListener("mouseenter",()=>{In(this,Vu,setTimeout(()=>{In(this,Vu,null),Ut(this,lm).classList.add("show"),Ut(this,Cu)._reportTelemetry({action:"alt_text_tooltip"})},ft))},{signal:St}),g.addEventListener("mouseleave",()=>{var kt;Ut(this,Vu)&&(clearTimeout(Ut(this,Vu)),In(this,Vu,null)),(kt=Ut(this,lm))==null||kt.classList.remove("show")},{signal:St})}Ut(this,om)?et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(et.removeAttribute("data-l10n-id"),et.textContent=Ut(this,xl)),et.parentNode||g.append(et);const ot=Ut(this,Cu).getElementForAltText();ot==null||ot.setAttribute("aria-describedby",et.id)},Rn(au,Q0,null),Ur(au,"_l10n",null);let AltText=au;var Dl,vp,g1,po,m2,y1,Op,v1,x1,b1,g2,m3;class Comment{constructor(g){Rn(this,g2);Rn(this,Dl,null);Rn(this,vp,null);Rn(this,g1,!1);Rn(this,po,null);Rn(this,m2,null);Rn(this,y1,null);Rn(this,Op,null);Rn(this,v1,null);Rn(this,x1,!1);Rn(this,b1,null);In(this,po,g)}renderForToolbar(){const g=In(this,vp,document.createElement("button"));return g.className="comment",Xn(this,g2,m3).call(this,g,!1)}renderForStandalone(){const g=In(this,Dl,document.createElement("button"));g.className="annotationCommentButton";const et=Ut(this,po).commentButtonPosition;if(et){const{style:ot}=g;ot.insetInlineEnd=`calc(${100*(Ut(this,po)._uiManager.direction==="ltr"?1-et[0]:et[0])}% - var(--comment-button-dim))`,ot.top=`calc(${100*et[1]}% - var(--comment-button-dim))`;const ut=Ut(this,po).commentButtonColor;ut&&(ot.backgroundColor=ut)}return Xn(this,g2,m3).call(this,g,!0)}focusButton(){setTimeout(()=>{var g;(g=Ut(this,Dl)??Ut(this,vp))==null||g.focus()},0)}onUpdatedColor(){if(!Ut(this,Dl))return;const g=Ut(this,po).commentButtonColor;g&&(Ut(this,Dl).style.backgroundColor=g),Ut(this,po)._uiManager.updatePopupColor(Ut(this,po))}get commentButtonWidth(){var g;return(((g=Ut(this,Dl))==null?void 0:g.getBoundingClientRect().width)??0)/Ut(this,po).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Ut(this,b1))return Ut(this,b1);if(!Ut(this,Dl))return null;const{x:g,y:et,height:ot}=Ut(this,Dl).getBoundingClientRect(),{x:ut,y:ct,width:dt,height:ft}=Ut(this,po).parent.boundingClientRect;return[(g-ut)/dt,(et+ot-ct)/ft]}set commentPopupPositionInLayer(g){In(this,b1,g)}hasDefaultPopupPosition(){return Ut(this,b1)===null}removeStandaloneCommentButton(){var g;(g=Ut(this,Dl))==null||g.remove(),In(this,Dl,null)}removeToolbarCommentButton(){var g;(g=Ut(this,vp))==null||g.remove(),In(this,vp,null)}setCommentButtonStates({selected:g,hasPopup:et}){Ut(this,Dl)&&(Ut(this,Dl).classList.toggle("selected",g),Ut(this,Dl).ariaExpanded=et)}edit(g){const et=this.commentPopupPositionInLayer;let ot,ut;if(et)[ot,ut]=et;else{[ot,ut]=Ut(this,po).commentButtonPosition;const{width:Tt,height:Rt,x:jt,y:Ft}=Ut(this,po);ot=jt+ot*Tt,ut=Ft+ut*Rt}const ct=Ut(this,po).parent.boundingClientRect,{x:dt,y:ft,width:St,height:kt}=ct;Ut(this,po)._uiManager.editComment(Ut(this,po),dt+ot*St,ft+ut*kt,{...g,parentDimensions:ct})}finish(){Ut(this,vp)&&(Ut(this,vp).focus({focusVisible:Ut(this,g1)}),In(this,g1,!1))}isDeleted(){return Ut(this,x1)||Ut(this,Op)===""}isEmpty(){return Ut(this,Op)===null}hasBeenEdited(){return this.isDeleted()||Ut(this,Op)!==Ut(this,m2)}serialize(){return this.data}get data(){return{text:Ut(this,Op),richText:Ut(this,y1),date:Ut(this,v1),deleted:this.isDeleted()}}set data(g){if(g!==Ut(this,Op)&&In(this,y1,null),g===null){In(this,Op,""),In(this,x1,!0);return}In(this,Op,g),In(this,v1,new Date),In(this,x1,!1)}setInitialText(g,et=null){In(this,m2,g),this.data=g,In(this,v1,null),In(this,y1,et)}shown(){}destroy(){var g,et;(g=Ut(this,vp))==null||g.remove(),In(this,vp,null),(et=Ut(this,Dl))==null||et.remove(),In(this,Dl,null),In(this,Op,""),In(this,y1,null),In(this,v1,null),In(this,po,null),In(this,g1,!1),In(this,x1,!1)}}Dl=new WeakMap,vp=new WeakMap,g1=new WeakMap,po=new WeakMap,m2=new WeakMap,y1=new WeakMap,Op=new WeakMap,v1=new WeakMap,x1=new WeakMap,b1=new WeakMap,g2=new WeakSet,m3=function(g,et){if(!Ut(this,po)._uiManager.hasCommentManager())return null;g.tabIndex="0",g.ariaHasPopup="dialog",et?(g.ariaControls="commentPopup",g.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(g.ariaControlsElements=[Ut(this,po)._uiManager.getCommentDialogElement()],g.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const ot=Ut(this,po)._uiManager._signal;if(!(ot instanceof AbortSignal)||ot.aborted)return g;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),et&&(g.addEventListener("focusin",ct=>{Ut(this,po)._focusEventsAllowed=!1,stopEvent(ct)},{capture:!0,signal:ot}),g.addEventListener("focusout",ct=>{Ut(this,po)._focusEventsAllowed=!0,stopEvent(ct)},{capture:!0,signal:ot})),g.addEventListener("pointerdown",ct=>ct.stopPropagation(),{signal:ot});const ut=ct=>{ct.preventDefault(),g===Ut(this,vp)?this.edit():Ut(this,po).toggleComment(!0)};return g.addEventListener("click",ut,{capture:!0,signal:ot}),g.addEventListener("keydown",ct=>{ct.target===g&&ct.key==="Enter"&&(In(this,g1,!0),ut(ct))},{signal:ot}),g.addEventListener("pointerenter",()=>{Ut(this,po).toggleComment(!1,!0)},{signal:ot}),g.addEventListener("pointerleave",()=>{Ut(this,po).toggleComment(!1,!1)},{signal:ot}),g};var Cx,E1,y2,v2,x2,b2,E2,qm,_1,Km,S1,Ym,JC,t4,QC,n4,ZC,r4;const dP=class dP{constructor({container:g,isPinchingDisabled:et=null,isPinchingStopped:ot=null,onPinchStart:ut=null,onPinching:ct=null,onPinchEnd:dt=null,signal:ft}){Rn(this,JC);Rn(this,QC);Rn(this,ZC);Rn(this,Cx,void 0);Rn(this,E1,!1);Rn(this,y2,null);Rn(this,v2,void 0);Rn(this,x2,void 0);Rn(this,b2,void 0);Rn(this,E2,void 0);Rn(this,qm,null);Rn(this,_1,void 0);Rn(this,Km,null);Rn(this,S1,void 0);Rn(this,Ym,null);In(this,Cx,g),In(this,y2,ot),In(this,v2,et),In(this,x2,ut),In(this,b2,ct),In(this,E2,dt),In(this,S1,new AbortController),In(this,_1,AbortSignal.any([ft,Ut(this,S1).signal])),g.addEventListener("touchstart",Xn(this,JC,t4).bind(this),{passive:!1,signal:Ut(this,_1)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var g,et;(g=Ut(this,S1))==null||g.abort(),In(this,S1,null),(et=Ut(this,qm))==null||et.abort(),In(this,qm,null)}};Cx=new WeakMap,E1=new WeakMap,y2=new WeakMap,v2=new WeakMap,x2=new WeakMap,b2=new WeakMap,E2=new WeakMap,qm=new WeakMap,_1=new WeakMap,Km=new WeakMap,S1=new WeakMap,Ym=new WeakMap,JC=new WeakSet,t4=function(g){var ut,ct,dt;if((ut=Ut(this,v2))!=null&&ut.call(this))return;if(g.touches.length===1){if(Ut(this,qm))return;const ft=In(this,qm,new AbortController),St=AbortSignal.any([Ut(this,_1),ft.signal]),kt=Ut(this,Cx),Tt={capture:!0,signal:St,passive:!1},Rt=jt=>{var Ft;jt.pointerType==="touch"&&((Ft=Ut(this,qm))==null||Ft.abort(),In(this,qm,null))};kt.addEventListener("pointerdown",jt=>{jt.pointerType==="touch"&&(stopEvent(jt),Rt(jt))},Tt),kt.addEventListener("pointerup",Rt,Tt),kt.addEventListener("pointercancel",Rt,Tt);return}if(!Ut(this,Ym)){In(this,Ym,new AbortController);const ft=AbortSignal.any([Ut(this,_1),Ut(this,Ym).signal]),St=Ut(this,Cx),kt={signal:ft,capture:!1,passive:!1};St.addEventListener("touchmove",Xn(this,QC,n4).bind(this),kt);const Tt=Xn(this,ZC,r4).bind(this);St.addEventListener("touchend",Tt,kt),St.addEventListener("touchcancel",Tt,kt),kt.capture=!0,St.addEventListener("pointerdown",stopEvent,kt),St.addEventListener("pointermove",stopEvent,kt),St.addEventListener("pointercancel",stopEvent,kt),St.addEventListener("pointerup",stopEvent,kt),(ct=Ut(this,x2))==null||ct.call(this)}if(stopEvent(g),g.touches.length!==2||(dt=Ut(this,y2))!=null&&dt.call(this)){In(this,Km,null);return}let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]),In(this,Km,{touch0X:et.screenX,touch0Y:et.screenY,touch1X:ot.screenX,touch1Y:ot.screenY})},QC=new WeakSet,n4=function(g){var tn;if(!Ut(this,Km)||g.touches.length!==2)return;stopEvent(g);let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]);const{screenX:ut,screenY:ct}=et,{screenX:dt,screenY:ft}=ot,St=Ut(this,Km),{touch0X:kt,touch0Y:Tt,touch1X:Rt,touch1Y:jt}=St,Ft=Rt-kt,Bt=jt-Tt,Ht=dt-ut,Yt=ft-ct,zt=Math.hypot(Ht,Yt)||1,Kt=Math.hypot(Ft,Bt)||1;if(!Ut(this,E1)&&Math.abs(Kt-zt)<=dP.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(St.touch0X=ut,St.touch0Y=ct,St.touch1X=dt,St.touch1Y=ft,!Ut(this,E1)){In(this,E1,!0);return}const en=[(ut+dt)/2,(ct+ft)/2];(tn=Ut(this,b2))==null||tn.call(this,en,Kt,zt)},ZC=new WeakSet,r4=function(g){var et;g.touches.length>=2||(Ut(this,Ym)&&(Ut(this,Ym).abort(),In(this,Ym,null),(et=Ut(this,E2))==null||et.call(this)),Ut(this,Km)&&(stopEvent(g),In(this,Km,null),In(this,E1,!1)))};let TouchManager=dP;var w1,Lp,So,to,Xm,kx,Z0,_2,Fl,C1,Jm,hm,ey,S2,k1,zu,w2,A1,Qm,dm,Ax,Tx,xp,T1,C2,_k,k2,g3,A2,y3,Px,iC,eA,i4,tA,s4,T2,v3,Rx,sC,P2,x3,nA,a4,rA,o4,iA,l4,R2,b3,sA,u4,N2,E3,aA,c4,oA,h4,lA,d4,M2,_3,P1,N_;const Is=class Is{constructor(g){Rn(this,k2);Rn(this,Px);Rn(this,eA);Rn(this,tA);Rn(this,T2);Rn(this,Rx);Rn(this,P2);Rn(this,nA);Rn(this,rA);Rn(this,iA);Rn(this,R2);Rn(this,sA);Rn(this,N2);Rn(this,aA);Rn(this,oA);Rn(this,lA);Rn(this,M2);Rn(this,P1);Rn(this,w1,null);Rn(this,Lp,null);Rn(this,So,null);Rn(this,to,null);Rn(this,Xm,null);Rn(this,kx,!1);Rn(this,Z0,null);Rn(this,_2,"");Rn(this,Fl,null);Rn(this,C1,null);Rn(this,Jm,null);Rn(this,hm,null);Rn(this,ey,null);Rn(this,S2,"");Rn(this,k1,!1);Rn(this,zu,null);Rn(this,w2,!1);Rn(this,A1,!1);Rn(this,Qm,!1);Rn(this,dm,null);Rn(this,Ax,0);Rn(this,Tx,0);Rn(this,xp,null);Rn(this,T1,null);Ur(this,"isSelected",!1);Ur(this,"_isCopy",!1);Ur(this,"_editToolbar",null);Ur(this,"_initialOptions",Object.create(null));Ur(this,"_initialData",null);Ur(this,"_isVisible",!0);Ur(this,"_uiManager",null);Ur(this,"_focusEventsAllowed",!0);Rn(this,C2,!1);Rn(this,_k,Is._zIndex++);this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null,this.annotationElementId=g.annotationElementId||null,this.creationDate=g.creationDate||new Date,this.modificationDate=g.modificationDate||null;const{rotation:et,rawDims:{pageWidth:ot,pageHeight:ut,pageX:ct,pageY:dt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,ut],this.pageTranslation=[ct,dt];const[ft,St]=this.parentDimensions;this.x=g.x/ft,this.y=g.y/St,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=Is.prototype._resizeWithKeyboard,et=AnnotationEditorUIManager.TRANSLATE_SMALL,ot=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-ot,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[ot,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-ot]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,ot]}],[["Escape","mac+Escape"],Is.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const et=new FakeEditor({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});et.annotationElementId=g.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(g,et){if(Is._l10n??(Is._l10n=g),Is._l10nResizer||(Is._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Is._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);Is._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,et){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Ut(this,C2)}set _isDraggable(g){var et;In(this,C2,g),(et=this.div)==null||et.classList.toggle("draggable",g)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[g,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(g*2),this.y+=this.width*g/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(g*2),this.y-=this.width*g/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ut(this,_k)}setParent(g){var et;g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):(Xn(this,P1,N_).call(this),(et=Ut(this,hm))==null||et.remove(),In(this,hm,null)),this.parent=g}focusin(g){this._focusEventsAllowed&&(Ut(this,k1)?In(this,k1,!1):this.parent.setSelected(this))}focusout(g){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const et=g.relatedTarget;et!=null&&et.closest(`#${this.id}`)||(g.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,et,ot,ut){const[ct,dt]=this.parentDimensions;[ot,ut]=this.screenToPageTranslation(ot,ut),this.x=(g+ot)/ct,this.y=(et+ut)/dt,this.fixAndSetPosition()}_moveAfterPaste(g,et){const[ot,ut]=this.parentDimensions;this.setAt(g*ot,et*ut,this.width*ot,this.height*ut),this._onTranslated()}translate(g,et){Xn(this,k2,g3).call(this,this.parentDimensions,g,et)}translateInPage(g,et){Ut(this,zu)||In(this,zu,[this.x,this.y,this.width,this.height]),Xn(this,k2,g3).call(this,this.pageDimensions,g,et),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(g,et){Ut(this,zu)||In(this,zu,[this.x,this.y,this.width,this.height]);const{div:ot,parentDimensions:[ut,ct]}=this;if(this.x+=g/ut,this.y+=et/ct,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Rt,y:jt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Rt,jt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:dt,y:ft}=this;const[St,kt]=this.getBaseTranslation();dt+=St,ft+=kt;const{style:Tt}=ot;Tt.left=`${(100*dt).toFixed(2)}%`,Tt.top=`${(100*ft).toFixed(2)}%`,this._onTranslating(dt,ft),ot.scrollIntoView({block:"nearest"})}_onTranslating(g,et){}_onTranslated(g,et){}get _hasBeenMoved(){return!!Ut(this,zu)&&(Ut(this,zu)[0]!==this.x||Ut(this,zu)[1]!==this.y)}get _hasBeenResized(){return!!Ut(this,zu)&&(Ut(this,zu)[2]!==this.width||Ut(this,zu)[3]!==this.height)}getBaseTranslation(){const[g,et]=this.parentDimensions,{_borderLineWidth:ot}=Is,ut=ot/g,ct=ot/et;switch(this.rotation){case 90:return[-ut,ct];case 180:return[ut,ct];case 270:return[ut,-ct];default:return[-ut,-ct]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const{div:{style:et},pageDimensions:[ot,ut]}=this;let{x:ct,y:dt,width:ft,height:St}=this;if(ft*=ot,St*=ut,ct*=ot,dt*=ut,this._mustFixPosition)switch(g){case 0:ct=MathClamp(ct,0,ot-ft),dt=MathClamp(dt,0,ut-St);break;case 90:ct=MathClamp(ct,0,ot-St),dt=MathClamp(dt,ft,ut);break;case 180:ct=MathClamp(ct,ft,ot),dt=MathClamp(dt,St,ut);break;case 270:ct=MathClamp(ct,St,ot),dt=MathClamp(dt,0,ut-ft);break}this.x=ct/=ot,this.y=dt/=ut;const[kt,Tt]=this.getBaseTranslation();ct+=kt,dt+=Tt,et.left=`${(100*ct).toFixed(2)}%`,et.top=`${(100*dt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,et){var ot;return Xn(ot=Is,A2,y3).call(ot,g,et,this.parentRotation)}pageTranslationToScreen(g,et){var ot;return Xn(ot=Is,A2,y3).call(ot,g,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[et,ot]}=this;return[et*g,ot*g]}setDims(){const{div:{style:g},width:et,height:ot}=this;g.width=`${(100*et).toFixed(2)}%`,g.height=`${(100*ot).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(g){return Math.round(g*1e4)/1e4}_onResizing(){}altTextFinish(){var g;(g=Ut(this,So))==null||g.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Ut(this,A1))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:g}=this;if(g)for(const[et,ot]of g)await this._editToolbar.addButton(et,ot);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var g;(g=this._editToolbar)==null||g.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var g;(g=this._editToolbar)==null||g.removeButton("comment")}removeEditToolbar(){var g,et;(g=this._editToolbar)==null||g.remove(),this._editToolbar=null,(et=Ut(this,So))==null||et.destroy()}addContainer(g){var ot;const et=(ot=this._editToolbar)==null?void 0:ot.div;et?et.before(g):this.div.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Ut(this,So)||(AltText.initialize(Is._l10n),In(this,So,new AltText(this)),Ut(this,w1)&&(Ut(this,So).data=Ut(this,w1),In(this,w1,null))),Ut(this,So)}get altTextData(){var g;return(g=Ut(this,So))==null?void 0:g.data}set altTextData(g){Ut(this,So)&&(Ut(this,So).data=g)}get guessedAltText(){var g;return(g=Ut(this,So))==null?void 0:g.guessedText}async setGuessedAltText(g){var et;await((et=Ut(this,So))==null?void 0:et.setGuessedText(g))}serializeAltText(g){var et;return(et=Ut(this,So))==null?void 0:et.serialize(g)}hasAltText(){return!!Ut(this,So)&&!Ut(this,So).isEmpty()}hasAltTextData(){var g;return((g=Ut(this,So))==null?void 0:g.hasData())??!1}focusCommentButton(){var g;(g=Ut(this,to))==null||g.focusButton()}addCommentButton(){return Ut(this,to)||In(this,to,new Comment(this))}addStandaloneCommentButton(){if(Ut(this,Xm)){this._uiManager.isEditingMode()&&Ut(this,Xm).classList.remove("hidden");return}this.hasComment&&(In(this,Xm,Ut(this,to).renderForStandalone()),this.div.append(Ut(this,Xm)))}removeStandaloneCommentButton(){Ut(this,to).removeStandaloneCommentButton(),In(this,Xm,null)}hideStandaloneCommentButton(){var g;(g=Ut(this,Xm))==null||g.classList.add("hidden")}get comment(){const{data:{richText:g,text:et,date:ot,deleted:ut}}=Ut(this,to);return{text:et,richText:g,date:ot,deleted:ut,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(g){Ut(this,to)||In(this,to,new Comment(this)),Ut(this,to).data=g,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:g,popupRef:et,richText:ot}){if(!et||(Ut(this,to)||In(this,to,new Comment(this)),Ut(this,to).setInitialText(g,ot),!this.annotationElementId))return;const ut=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ut&&this.updateFromAnnotationLayer(ut)}get hasEditedComment(){var g;return(g=Ut(this,to))==null?void 0:g.hasBeenEdited()}get hasDeletedComment(){var g;return(g=Ut(this,to))==null?void 0:g.isDeleted()}get hasComment(){return!!Ut(this,to)&&!Ut(this,to).isEmpty()&&!Ut(this,to).isDeleted()}async editComment(g){Ut(this,to)||In(this,to,new Comment(this)),Ut(this,to).edit(g)}toggleComment(g,et=void 0){this.hasComment&&this._uiManager.toggleComment(this,g,et)}setSelectedCommentButton(g){Ut(this,to).setSelectedButton(g)}addComment(g){if(this.hasEditedComment){const[,,,ut]=g.rect,[ct]=this.pageDimensions,[dt]=this.pageTranslation,ft=dt+ct+1,St=ut-100,kt=ft+180;g.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[ft,St,kt,ut]}}}updateFromAnnotationLayer({popup:{contents:g,deleted:et}}){Ut(this,to).data=et?null:g}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var dt;const g=this.div=document.createElement("div");g.setAttribute("data-editor-rotation",(360-this.rotation)%360),g.className=this.name,g.setAttribute("id",this.id),g.tabIndex=Ut(this,kx)?-1:0,g.setAttribute("role","application"),this.defaultL10nId&&g.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||g.classList.add("hidden"),this.setInForeground(),Xn(this,N2,E3).call(this);const[et,ot]=this.parentDimensions;this.parentRotation%180!==0&&(g.style.maxWidth=`${(100*ot/et).toFixed(2)}%`,g.style.maxHeight=`${(100*et/ot).toFixed(2)}%`);const[ut,ct]=this.getInitialTranslation();return this.translate(ut,ct),bindEvents(this,g,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Ut(this,T1)||In(this,T1,new TouchManager({container:g,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Xn(this,nA,a4).bind(this),onPinching:Xn(this,rA,o4).bind(this),onPinchEnd:Xn(this,iA,l4).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(dt=this._uiManager._editorUndoBar)==null||dt.hide(),g}pointerdown(g){const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et){g.preventDefault();return}if(In(this,k1,!0),this._isDraggable){Xn(this,sA,u4).call(this,g);return}Xn(this,R2,b3).call(this,g)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Ut(this,dm)&&clearTimeout(Ut(this,dm)),In(this,dm,setTimeout(()=>{var g;In(this,dm,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,et,ot){g.changeParent(this),this.x=et,this.y=ot,this.fixAndSetPosition(),this._onTranslated()}getRect(g,et,ot=this.rotation){const ut=this.parentScale,[ct,dt]=this.pageDimensions,[ft,St]=this.pageTranslation,kt=g/ut,Tt=et/ut,Rt=this.x*ct,jt=this.y*dt,Ft=this.width*ct,Bt=this.height*dt;switch(ot){case 0:return[Rt+kt+ft,dt-jt-Tt-Bt+St,Rt+kt+Ft+ft,dt-jt-Tt+St];case 90:return[Rt+Tt+ft,dt-jt+kt+St,Rt+Tt+Bt+ft,dt-jt+kt+Ft+St];case 180:return[Rt-kt-Ft+ft,dt-jt+Tt+St,Rt-kt+ft,dt-jt+Tt+Bt+St];case 270:return[Rt-Tt-Bt+ft,dt-jt-kt-Ft+St,Rt-Tt+ft,dt-jt-kt+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,et){const[ot,ut,ct,dt]=g,ft=ct-ot,St=dt-ut;switch(this.rotation){case 0:return[ot,et-dt,ft,St];case 90:return[ot,et-ut,St,ft];case 180:return[ct,et-ut,ft,St];case 270:return[ct,et-dt,St,ft];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Is._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var g;(g=Ut(this,to))==null||g.onUpdatedColor()}getData(){const{comment:{text:g,color:et,date:ot,opacity:ut,deleted:ct,richText:dt},uid:ft,pageIndex:St,creationDate:kt,modificationDate:Tt}=this;return{id:ft,pageIndex:St,rect:this.getPDFRect(),richText:dt,contentsObj:{str:g},creationDate:kt,modificationDate:ot||Tt,popupRef:!ct,color:et,opacity:ut}}onceAdded(g){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),In(this,A1,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),In(this,A1,!1),!0):!1}isInEditMode(){return Ut(this,A1)}shouldGetKeyboardEvents(){return Ut(this,Qm)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:g,left:et,bottom:ot,right:ut}=this.getClientDimensions(),{innerHeight:ct,innerWidth:dt}=window;return et<dt&&ut>0&&g<ct&&ot>0}rebuild(){Xn(this,N2,E3).call(this)}rotate(g){}resize(){}serializeDeleted(){var g;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((g=this._initialData)==null?void 0:g.popupRef)||""}}serialize(g=!1,et=null){var ot;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((ot=this._initialData)==null?void 0:ot.popupRef)||""}}static async deserialize(g,et,ot){const ut=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ot,annotationElementId:g.annotationElementId,creationDate:g.creationDate,modificationDate:g.modificationDate});ut.rotation=g.rotation,In(ut,w1,g.accessibilityData),ut._isCopy=g.isCopy||!1;const[ct,dt]=ut.pageDimensions,[ft,St,kt,Tt]=ut.getRectInCurrentCoords(g.rect,dt);return ut.x=ft/ct,ut.y=St/dt,ut.width=kt/ct,ut.height=Tt/dt,ut}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var g,et;if((g=Ut(this,ey))==null||g.abort(),In(this,ey,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Ut(this,dm)&&(clearTimeout(Ut(this,dm)),In(this,dm,null)),Xn(this,P1,N_).call(this),this.removeEditToolbar(),Ut(this,xp)){for(const ot of Ut(this,xp).values())clearTimeout(ot);In(this,xp,null)}this.parent=null,(et=Ut(this,T1))==null||et.destroy(),In(this,T1,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Xn(this,eA,i4).call(this),Ut(this,Fl).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[g,et]}=this,[ot,ut,ct,dt]=this.getPDFRect();return[Is._round(ot+(ct-ot)*g),Is._round(ut+(dt-ut)*(1-et))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Ut(this,to).commentPopupPositionInLayer}set commentPopupPosition(g){Ut(this,to).commentPopupPositionInLayer=g}hasDefaultPopupPosition(){return Ut(this,to).hasDefaultPopupPosition()}get commentButtonWidth(){return Ut(this,to).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(g){Ut(this,to).setCommentButtonStates(g)}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),In(this,Jm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=Ut(this,Fl).children;if(!Ut(this,Lp)){In(this,Lp,Array.from(et));const dt=Xn(this,aA,c4).bind(this),ft=Xn(this,oA,h4).bind(this),St=this._uiManager._signal;for(const kt of Ut(this,Lp)){const Tt=kt.getAttribute("data-resizer-name");kt.setAttribute("role","spinbutton"),kt.addEventListener("keydown",dt,{signal:St}),kt.addEventListener("blur",ft,{signal:St}),kt.addEventListener("focus",Xn(this,lA,d4).bind(this,Tt),{signal:St}),kt.setAttribute("data-l10n-id",Is._l10nResizer[Tt])}}const ot=Ut(this,Lp)[0];let ut=0;for(const dt of et){if(dt===ot)break;ut++}const ct=(360-this.rotation+this.parentRotation)%360/90*(Ut(this,Lp).length/4);if(ct!==ut){if(ct<ut)for(let ft=0;ft<ut-ct;ft++)Ut(this,Fl).append(Ut(this,Fl).firstChild);else if(ct>ut)for(let ft=0;ft<ct-ut;ft++)Ut(this,Fl).firstChild.before(Ut(this,Fl).lastChild);let dt=0;for(const ft of et){const kt=Ut(this,Lp)[dt++].getAttribute("data-resizer-name");ft.setAttribute("data-l10n-id",Is._l10nResizer[kt])}}Xn(this,M2,_3).call(this,0),In(this,Qm,!0),Ut(this,Fl).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,et){Ut(this,Qm)&&Xn(this,P2,x3).call(this,Ut(this,S2),{deltaX:g,deltaY:et,fromKeyboard:!0})}_stopResizingWithKeyboard(){Xn(this,P1,N_).call(this),this.div.focus()}select(){var g,et,ot;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ut,ct;(ut=this.div)!=null&&ut.classList.contains("selectedEditor")&&((ct=this._editToolbar)==null||ct.show())});return}(et=this._editToolbar)==null||et.show(),(ot=Ut(this,So))==null||ot.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var g;return(g=this.div)==null?void 0:g.focus({preventScroll:!0})},0)}unselect(){var g,et,ot,ut,ct;this.isSelected&&(this.isSelected=!1,(g=Ut(this,Fl))==null||g.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ut=this._editToolbar)==null||ut.hide(),(ct=Ut(this,So))==null||ct.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(g,et){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(g){g.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Ut(this,w2)}set isEditing(g){In(this,w2,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,et=!1){if(et){Ut(this,xp)||In(this,xp,new Map);const{action:ot}=g;let ut=Ut(this,xp).get(ot);ut&&clearTimeout(ut),ut=setTimeout(()=>{this._reportTelemetry(g),Ut(this,xp).delete(ot),Ut(this,xp).size===0&&In(this,xp,null)},Is._telemetryTimeout),Ut(this,xp).set(ot,ut);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),In(this,kx,!1)}disable(){this.div&&(this.div.tabIndex=-1),In(this,kx,!0)}updateFakeAnnotationElement(g){if(!Ut(this,hm)&&!this.deleted){In(this,hm,g.addFakeAnnotation(this));return}if(this.deleted){Ut(this,hm).remove(),In(this,hm,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Ut(this,hm).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(g){if(this.deleted)return g.hide(),null;let et=g.container.querySelector(".annotationContent");if(!et)et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),g.container.prepend(et);else if(et.nodeName==="CANVAS"){const ot=et;et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),ot.before(et)}return et}resetAnnotationElement(g){const{firstChild:et}=g.container;(et==null?void 0:et.nodeName)==="DIV"&&et.classList.contains("annotationContent")&&et.remove()}};w1=new WeakMap,Lp=new WeakMap,So=new WeakMap,to=new WeakMap,Xm=new WeakMap,kx=new WeakMap,Z0=new WeakMap,_2=new WeakMap,Fl=new WeakMap,C1=new WeakMap,Jm=new WeakMap,hm=new WeakMap,ey=new WeakMap,S2=new WeakMap,k1=new WeakMap,zu=new WeakMap,w2=new WeakMap,A1=new WeakMap,Qm=new WeakMap,dm=new WeakMap,Ax=new WeakMap,Tx=new WeakMap,xp=new WeakMap,T1=new WeakMap,C2=new WeakMap,_k=new WeakMap,k2=new WeakSet,g3=function([g,et],ot,ut){[ot,ut]=this.screenToPageTranslation(ot,ut),this.x+=ot/g,this.y+=ut/et,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},A2=new WeakSet,y3=function(g,et,ot){switch(ot){case 90:return[et,-g];case 180:return[-g,-et];case 270:return[-et,g];default:return[g,et]}},Px=new WeakSet,iC=function(g){switch(g){case 90:{const[et,ot]=this.pageDimensions;return[0,-et/ot,ot/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ot]=this.pageDimensions;return[0,et/ot,-ot/et,0]}default:return[1,0,0,1]}},eA=new WeakSet,i4=function(){if(Ut(this,Fl))return;In(this,Fl,document.createElement("div")),Ut(this,Fl).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],et=this._uiManager._signal;for(const ot of g){const ut=document.createElement("div");Ut(this,Fl).append(ut),ut.classList.add("resizer",ot),ut.setAttribute("data-resizer-name",ot),ut.addEventListener("pointerdown",Xn(this,tA,s4).bind(this,ot),{signal:et}),ut.addEventListener("contextmenu",noContextMenu,{signal:et}),ut.tabIndex=-1}this.div.prepend(Ut(this,Fl))},tA=new WeakSet,s4=function(g,et){var Tt;et.preventDefault();const{isMac:ot}=util_FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ot)return;(Tt=Ut(this,So))==null||Tt.toggle(!1);const ut=this._isDraggable;this._isDraggable=!1,In(this,C1,[et.screenX,et.screenY]);const ct=new AbortController,dt=this._uiManager.combinedSignal(ct);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Xn(this,P2,x3).bind(this,g),{passive:!0,capture:!0,signal:dt}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:dt}),window.addEventListener("contextmenu",noContextMenu,{signal:dt}),In(this,Jm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ft=this.parent.div.style.cursor,St=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const kt=()=>{var Rt;ct.abort(),this.parent.togglePointerEvents(!0),(Rt=Ut(this,So))==null||Rt.toggle(!0),this._isDraggable=ut,this.parent.div.style.cursor=ft,this.div.style.cursor=St,Xn(this,Rx,sC).call(this)};window.addEventListener("pointerup",kt,{signal:dt}),window.addEventListener("blur",kt,{signal:dt})},T2=new WeakSet,v3=function(g,et,ot,ut){this.width=ot,this.height=ut,this.x=g,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResized()},Rx=new WeakSet,sC=function(){if(!Ut(this,Jm))return;const{savedX:g,savedY:et,savedWidth:ot,savedHeight:ut}=Ut(this,Jm);In(this,Jm,null);const ct=this.x,dt=this.y,ft=this.width,St=this.height;ct===g&&dt===et&&ft===ot&&St===ut||this.addCommands({cmd:Xn(this,T2,v3).bind(this,ct,dt,ft,St),undo:Xn(this,T2,v3).bind(this,g,et,ot,ut),mustExec:!0})},P2=new WeakSet,x3=function(g,et){const[ot,ut]=this.parentDimensions,ct=this.x,dt=this.y,ft=this.width,St=this.height,kt=Is.MIN_SIZE/ot,Tt=Is.MIN_SIZE/ut,Rt=Xn(this,Px,iC).call(this,this.rotation),jt=(gn,Mn)=>[Rt[0]*gn+Rt[2]*Mn,Rt[1]*gn+Rt[3]*Mn],Ft=Xn(this,Px,iC).call(this,360-this.rotation),Bt=(gn,Mn)=>[Ft[0]*gn+Ft[2]*Mn,Ft[1]*gn+Ft[3]*Mn];let Ht,Yt,zt=!1,Kt=!1;switch(g){case"topLeft":zt=!0,Ht=(gn,Mn)=>[0,0],Yt=(gn,Mn)=>[gn,Mn];break;case"topMiddle":Ht=(gn,Mn)=>[gn/2,0],Yt=(gn,Mn)=>[gn/2,Mn];break;case"topRight":zt=!0,Ht=(gn,Mn)=>[gn,0],Yt=(gn,Mn)=>[0,Mn];break;case"middleRight":Kt=!0,Ht=(gn,Mn)=>[gn,Mn/2],Yt=(gn,Mn)=>[0,Mn/2];break;case"bottomRight":zt=!0,Ht=(gn,Mn)=>[gn,Mn],Yt=(gn,Mn)=>[0,0];break;case"bottomMiddle":Ht=(gn,Mn)=>[gn/2,Mn],Yt=(gn,Mn)=>[gn/2,0];break;case"bottomLeft":zt=!0,Ht=(gn,Mn)=>[0,Mn],Yt=(gn,Mn)=>[gn,0];break;case"middleLeft":Kt=!0,Ht=(gn,Mn)=>[0,Mn/2],Yt=(gn,Mn)=>[gn,Mn/2];break}const en=Ht(ft,St),tn=Yt(ft,St);let on=jt(...tn);const an=Is._round(ct+on[0]),un=Is._round(dt+on[1]);let dn=1,Sn=1,mn,bn;if(et.fromKeyboard)({deltaX:mn,deltaY:bn}=et);else{const{screenX:gn,screenY:Mn}=et,[yn,vn]=Ut(this,C1);[mn,bn]=this.screenToPageTranslation(gn-yn,Mn-vn),Ut(this,C1)[0]=gn,Ut(this,C1)[1]=Mn}if([mn,bn]=Bt(mn/ot,bn/ut),zt){const gn=Math.hypot(ft,St);dn=Sn=Math.max(Math.min(Math.hypot(tn[0]-en[0]-mn,tn[1]-en[1]-bn)/gn,1/ft,1/St),kt/ft,Tt/St)}else Kt?dn=MathClamp(Math.abs(tn[0]-en[0]-mn),kt,1)/ft:Sn=MathClamp(Math.abs(tn[1]-en[1]-bn),Tt,1)/St;const En=Is._round(ft*dn),kn=Is._round(St*Sn);on=jt(...Yt(En,kn));const Pn=an-on[0],Ln=un-on[1];Ut(this,zu)||In(this,zu,[this.x,this.y,this.width,this.height]),this.width=En,this.height=kn,this.x=Pn,this.y=Ln,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nA=new WeakSet,a4=function(){var g;In(this,Jm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(g=Ut(this,So))==null||g.toggle(!1),this.parent.togglePointerEvents(!1)},rA=new WeakSet,o4=function(g,et,ot){let ct=.7*(ot/et)+1-.7;if(ct===1)return;const dt=Xn(this,Px,iC).call(this,this.rotation),ft=(an,un)=>[dt[0]*an+dt[2]*un,dt[1]*an+dt[3]*un],[St,kt]=this.parentDimensions,Tt=this.x,Rt=this.y,jt=this.width,Ft=this.height,Bt=Is.MIN_SIZE/St,Ht=Is.MIN_SIZE/kt;ct=Math.max(Math.min(ct,1/jt,1/Ft),Bt/jt,Ht/Ft);const Yt=Is._round(jt*ct),zt=Is._round(Ft*ct);if(Yt===jt&&zt===Ft)return;Ut(this,zu)||In(this,zu,[Tt,Rt,jt,Ft]);const Kt=ft(jt/2,Ft/2),en=Is._round(Tt+Kt[0]),tn=Is._round(Rt+Kt[1]),on=ft(Yt/2,zt/2);this.x=en-on[0],this.y=tn-on[1],this.width=Yt,this.height=zt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iA=new WeakSet,l4=function(){var g;(g=Ut(this,So))==null||g.toggle(!0),this.parent.togglePointerEvents(!0),Xn(this,Rx,sC).call(this)},R2=new WeakSet,b3=function(g){const{isMac:et}=util_FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},sA=new WeakSet,u4=function(g){const{isSelected:et}=this;this._uiManager.setUpDragSession();let ot=!1;const ut=new AbortController,ct=this._uiManager.combinedSignal(ut),dt={capture:!0,passive:!1,signal:ct},ft=kt=>{ut.abort(),In(this,Z0,null),In(this,k1,!1),this._uiManager.endDragSession()||Xn(this,R2,b3).call(this,kt),ot&&this._onStopDragging()};et&&(In(this,Ax,g.clientX),In(this,Tx,g.clientY),In(this,Z0,g.pointerId),In(this,_2,g.pointerType),window.addEventListener("pointermove",kt=>{ot||(ot=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Tt,clientY:Rt,pointerId:jt}=kt;if(jt!==Ut(this,Z0)){stopEvent(kt);return}const[Ft,Bt]=this.screenToPageTranslation(Tt-Ut(this,Ax),Rt-Ut(this,Tx));In(this,Ax,Tt),In(this,Tx,Rt),this._uiManager.dragSelectedEditors(Ft,Bt)},dt),window.addEventListener("touchmove",stopEvent,dt),window.addEventListener("pointerdown",kt=>{kt.pointerType===Ut(this,_2)&&(Ut(this,T1)||kt.isPrimary)&&ft(kt),stopEvent(kt)},dt));const St=kt=>{if(!Ut(this,Z0)||Ut(this,Z0)===kt.pointerId){ft(kt);return}stopEvent(kt)};window.addEventListener("pointerup",St,{signal:ct}),window.addEventListener("blur",St,{signal:ct})},N2=new WeakSet,E3=function(){if(Ut(this,ey)||!this.div)return;In(this,ey,new AbortController);const g=this._uiManager.combinedSignal(Ut(this,ey));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:g}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:g})},aA=new WeakSet,c4=function(g){Is._resizerKeyboardManager.exec(this,g)},oA=new WeakSet,h4=function(g){var et;Ut(this,Qm)&&((et=g.relatedTarget)==null?void 0:et.parentNode)!==Ut(this,Fl)&&Xn(this,P1,N_).call(this)},lA=new WeakSet,d4=function(g){In(this,S2,Ut(this,Qm)?g:"")},M2=new WeakSet,_3=function(g){if(Ut(this,Lp))for(const et of Ut(this,Lp))et.tabIndex=g},P1=new WeakSet,N_=function(){In(this,Qm,!1),Xn(this,M2,_3).call(this,-1),Xn(this,Rx,sC).call(this)},Rn(Is,A2),Ur(Is,"_l10n",null),Ur(Is,"_l10nResizer",null),Ur(Is,"_borderLineWidth",-1),Ur(Is,"_colorManager",new ColorManager),Ur(Is,"_zIndex",1),Ur(Is,"_telemetryTimeout",1e3);let AnnotationEditor=Is;class FakeEditor extends AnnotationEditor{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(g){this.h1=g?g&4294967295:SEED,this.h2=g?g&4294967295:SEED}update(g){let et,ot;if(typeof g=="string"){et=new Uint8Array(g.length*2),ot=0;for(let Ht=0,Yt=g.length;Ht<Yt;Ht++){const zt=g.charCodeAt(Ht);zt<=255?et[ot++]=zt:(et[ot++]=zt>>>8,et[ot++]=zt&255)}}else if(ArrayBuffer.isView(g))et=g.slice(),ot=et.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ut=ot>>2,ct=ot-ut*4,dt=new Uint32Array(et.buffer,0,ut);let ft=0,St=0,kt=this.h1,Tt=this.h2;const Rt=3432918353,jt=461845907,Ft=Rt&MASK_LOW,Bt=jt&MASK_LOW;for(let Ht=0;Ht<ut;Ht++)Ht&1?(ft=dt[Ht],ft=ft*Rt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*Bt&MASK_LOW,kt^=ft,kt=kt<<13|kt>>>19,kt=kt*5+3864292196):(St=dt[Ht],St=St*Rt&MASK_HIGH|St*Ft&MASK_LOW,St=St<<15|St>>>17,St=St*jt&MASK_HIGH|St*Bt&MASK_LOW,Tt^=St,Tt=Tt<<13|Tt>>>19,Tt=Tt*5+3864292196);switch(ft=0,ct){case 3:ft^=et[ut*4+2]<<16;case 2:ft^=et[ut*4+1]<<8;case 1:ft^=et[ut*4],ft=ft*Rt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*Bt&MASK_LOW,ut&1?kt^=ft:Tt^=ft}this.h1=kt,this.h2=Tt}hexdigest(){let g=this.h1,et=this.h2;return g^=et>>>1,g=g*3981806797&MASK_HIGH|g*36045&MASK_LOW,et=et*4283543511&MASK_HIGH|((et<<16|g>>>16)*2950163797&MASK_HIGH)>>>16,g^=et>>>1,g=g*444984403&MASK_HIGH|g*60499&MASK_LOW,et=et*3301882366&MASK_HIGH|((et<<16|g>>>16)*3120437893&MASK_HIGH)>>>16,g^=et>>>1,(g>>>0).toString(16).padStart(8,"0")+(et>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var R1,N1,Zm,$l,uA,f4;class AnnotationStorage{constructor(){Rn(this,uA);Rn(this,R1,!1);Rn(this,N1,null);Rn(this,Zm,null);Rn(this,$l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,et){const ot=Ut(this,$l).get(g);return ot===void 0?et:Object.assign(et,ot)}getRawValue(g){return Ut(this,$l).get(g)}remove(g){const et=Ut(this,$l).get(g);if(et!==void 0&&(et instanceof AnnotationEditor&&Ut(this,Zm).delete(et.annotationElementId),Ut(this,$l).delete(g),Ut(this,$l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const ot of Ut(this,$l).values())if(ot instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,et){const ot=Ut(this,$l).get(g);let ut=!1;if(ot!==void 0)for(const[ct,dt]of Object.entries(et))ot[ct]!==dt&&(ut=!0,ot[ct]=dt);else ut=!0,Ut(this,$l).set(g,et);ut&&Xn(this,uA,f4).call(this),et instanceof AnnotationEditor&&((Ut(this,Zm)||In(this,Zm,new Map)).set(et.annotationElementId,et),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type))}has(g){return Ut(this,$l).has(g)}get size(){return Ut(this,$l).size}resetModified(){Ut(this,R1)&&(In(this,R1,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(Ut(this,$l).size===0)return SerializableEmpty;const g=new Map,et=new MurmurHash3_64,ot=[],ut=Object.create(null);let ct=!1;for(const[dt,ft]of Ut(this,$l)){const St=ft instanceof AnnotationEditor?ft.serialize(!1,ut):ft;St&&(g.set(dt,St),et.update(`${dt}:${JSON.stringify(St)}`),ct||(ct=!!St.bitmap))}if(ct)for(const dt of g.values())dt.bitmap&&ot.push(dt.bitmap);return g.size>0?{map:g,hash:et.hexdigest(),transfer:ot}:SerializableEmpty}get editorStats(){let g=null;const et=new Map;let ot=0,ut=0;for(const ct of Ut(this,$l).values()){if(!(ct instanceof AnnotationEditor)){ct.popup&&(ct.popup.deleted?ut+=1:ot+=1);continue}ct.isCommentDeleted?ut+=1:ct.hasEditedComment&&(ot+=1);const dt=ct.telemetryFinalData;if(!dt)continue;const{type:ft}=dt;et.has(ft)||et.set(ft,Object.getPrototypeOf(ct).constructor),g||(g=Object.create(null));const St=g[ft]||(g[ft]=new Map);for(const[kt,Tt]of Object.entries(dt)){if(kt==="type")continue;let Rt=St.get(kt);Rt||(Rt=new Map,St.set(kt,Rt));const jt=Rt.get(Tt)??0;Rt.set(Tt,jt+1)}}if((ut>0||ot>0)&&(g||(g=Object.create(null)),g.comments={deleted:ut,edited:ot}),!g)return null;for(const[ct,dt]of et)g[ct]=dt.computeTelemetryFinalData(g[ct]);return g}resetModifiedIds(){In(this,N1,null)}updateEditor(g,et){var ut;const ot=(ut=Ut(this,Zm))==null?void 0:ut.get(g);return ot?(ot.updateFromAnnotationLayer(et),!0):!1}getEditor(g){var et;return((et=Ut(this,Zm))==null?void 0:et.get(g))||null}get modifiedIds(){if(Ut(this,N1))return Ut(this,N1);const g=[];if(Ut(this,Zm))for(const et of Ut(this,Zm).values())et.serialize()&&g.push(et.annotationElementId);return In(this,N1,{ids:new Set(g),hash:g.join(",")})}[Symbol.iterator](){return Ut(this,$l).entries()}}R1=new WeakMap,N1=new WeakMap,Zm=new WeakMap,$l=new WeakMap,uA=new WeakSet,f4=function(){Ut(this,R1)||(In(this,R1,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var I2;class PrintAnnotationStorage extends AnnotationStorage{constructor(et){super();Rn(this,I2,void 0);const{map:ot,hash:ut,transfer:ct}=et.serializable,dt=structuredClone(ot,ct?{transfer:ct}:null);In(this,I2,{map:dt,hash:ut,transfer:ct})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return Ut(this,I2)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}I2=new WeakMap;var Nx;class FontLoader{constructor({ownerDocument:g=globalThis.document,styleElement:et=null}){Rn(this,Nx,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const et=this.styleElement.sheet;et.insertRule(g,et.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),Ut(this,Nx).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:g,disableFontFace:et,_inspectFont:ot}){if(!(!g||Ut(this,Nx).has(g.loadedName))){if(assert(!et,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ut,src:ct,style:dt}=g,ft=new FontFace(ut,ct,dt);this.addNativeFontFace(ft);try{await ft.load(),Ut(this,Nx).add(ut),ot==null||ot(g)}catch{warn(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ft)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g);return}if(this.isFontLoadingAPISupported){const ot=g.createNativeFontFace();if(ot){this.addNativeFontFace(ot);try{await ot.loaded}catch(ut){throw warn(`Failed to load font '${ot.family}': '${ut}'.`),g.disableFontFace=!0,ut}}return}const et=g.createFontFaceRule();if(et){if(this.insertRule(et),this.isSyncFontLoadingSupported)return;await new Promise(ot=>{const ut=this._queueLoadingCallback(ot);this._prepareFontLoadEvent(g,ut)})}}get isFontLoadingAPISupported(){var et;const g=!!((et=this._document)!=null&&et.fonts);return shadow(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(g){function et(){for(assert(!ut.done,"completeRequest() cannot be called twice."),ut.done=!0;ot.length>0&&ot[0].done;){const ct=ot.shift();setTimeout(ct.callback,0)}}const{loadingRequests:ot}=this,ut={done:!1,complete:et,callback:g};return ot.push(ut),ut}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,et){function ot(tn,on){return tn.charCodeAt(on)<<24|tn.charCodeAt(on+1)<<16|tn.charCodeAt(on+2)<<8|tn.charCodeAt(on+3)&255}function ut(tn,on,an,un){const dn=tn.substring(0,on),Sn=tn.substring(on+an);return dn+un+Sn}let ct,dt;const ft=this._document.createElement("canvas");ft.width=1,ft.height=1;const St=ft.getContext("2d");let kt=0;function Tt(tn,on){if(++kt>30){warn("Load test font never loaded."),on();return}if(St.font="30px "+tn,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){on();return}setTimeout(Tt.bind(null,tn,on))}const Rt=`lt${Date.now()}${this.loadTestFontId++}`;let jt=this._loadTestFont;jt=ut(jt,976,Rt.length,Rt);const Bt=16,Ht=1482184792;let Yt=ot(jt,Bt);for(ct=0,dt=Rt.length-3;ct<dt;ct+=4)Yt=Yt-Ht+ot(Rt,ct)|0;ct<Rt.length&&(Yt=Yt-Ht+ot(Rt+"XXX",ct)|0),jt=ut(jt,Bt,4,string32(Yt));const zt=`url(data:font/opentype;base64,${btoa(jt)});`,Kt=`@font-face {font-family:"${Rt}";src:${zt}}`;this.insertRule(Kt);const en=this._document.createElement("div");en.style.visibility="hidden",en.style.width=en.style.height="10px",en.style.position="absolute",en.style.top=en.style.left="0px";for(const tn of[g.loadedName,Rt]){const on=this._document.createElement("span");on.textContent="Hi",on.style.fontFamily=tn,en.append(on)}this._document.body.append(en),Tt(Rt,()=>{en.remove(),et.complete()})}}Nx=new WeakMap;var Js;class FontFaceObject{constructor(g,et=null,ot,ut){Rn(this,Js,void 0);this.compiledGlyphs=Object.create(null),In(this,Js,g),this._inspectFont=et,ot&&Object.assign(this,ot),ut&&(this.charProcOperatorList=ut)}createNativeFontFace(){var et;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const ot={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ot.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,ot)}return(et=this._inspectFont)==null||et.call(this,this),g}createFontFaceRule(){var ot;if(!this.data||this.disableFontFace)return null;const g=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let et;if(!this.cssFontInfo)et=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ut=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ut+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),et=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ut}src:${g}}`}return(ot=this._inspectFont)==null||ot.call(this,this,g),et}getPathGenerator(g,et){if(this.compiledGlyphs[et]!==void 0)return this.compiledGlyphs[et];const ot=this.loadedName+"_path_"+et;let ut;try{ut=g.get(ot)}catch(dt){warn(`getPathGenerator - ignoring character: "${dt}".`)}const ct=new Path2D(ut||"");return this.fontExtraProperties||g.delete(ot),this.compiledGlyphs[et]=ct}get black(){return Ut(this,Js).black}get bold(){return Ut(this,Js).bold}get disableFontFace(){return Ut(this,Js).disableFontFace??!1}get fontExtraProperties(){return Ut(this,Js).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Ut(this,Js).isInvalidPDFjsFont}get isType3Font(){return Ut(this,Js).isType3Font}get italic(){return Ut(this,Js).italic}get missingFile(){return Ut(this,Js).missingFile}get remeasure(){return Ut(this,Js).remeasure}get vertical(){return Ut(this,Js).vertical}get ascent(){return Ut(this,Js).ascent}get defaultWidth(){return Ut(this,Js).defaultWidth}get descent(){return Ut(this,Js).descent}get bbox(){return Ut(this,Js).bbox}get fontMatrix(){return Ut(this,Js).fontMatrix}get fallbackName(){return Ut(this,Js).fallbackName}get loadedName(){return Ut(this,Js).loadedName}get mimetype(){return Ut(this,Js).mimetype}get name(){return Ut(this,Js).name}get data(){return Ut(this,Js).data}clearData(){Ut(this,Js).clearData()}get cssFontInfo(){return Ut(this,Js).cssFontInfo}get systemFontInfo(){return Ut(this,Js).systemFontInfo}get defaultVMetrics(){return Ut(this,Js).defaultVMetrics}}Js=new WeakMap;function getUrlProp(it){if(it instanceof URL)return it.href;if(typeof it=="string"){if(isNodeJS)return it;const g=URL.parse(it,window.location);if(g)return g.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return stringToBytes(it);if(it instanceof ArrayBuffer||ArrayBuffer.isView(it)||typeof it=="object"&&!isNaN(it==null?void 0:it.length))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(it){if(typeof it!="string")return null;if(it.endsWith("/"))return it;throw new Error(`Invalid factory url: "${it}" must include trailing slash.`)}const isRefProxy=it=>typeof it=="object"&&Number.isInteger(it==null?void 0:it.num)&&it.num>=0&&Number.isInteger(it==null?void 0:it.gen)&&it.gen>=0,isNameProxy=it=>typeof it=="object"&&typeof(it==null?void 0:it.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var _g,cA;class LoopbackPort{constructor(){Rn(this,_g,new Map);Rn(this,cA,Promise.resolve())}postMessage(g,et){const ot={data:structuredClone(g,et?{transfer:et}:null)};Ut(this,cA).then(()=>{for(const[ut]of Ut(this,_g))ut.call(this,ot)})}addEventListener(g,et,ot=null){let ut=null;if((ot==null?void 0:ot.signal)instanceof AbortSignal){const{signal:ct}=ot;if(ct.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const dt=()=>this.removeEventListener(g,et);ut=()=>ct.removeEventListener("abort",dt),ct.addEventListener("abort",dt)}Ut(this,_g).set(et,ut)}removeEventListener(g,et){const ot=Ut(this,_g).get(et);ot==null||ot(),Ut(this,_g).delete(et)}terminate(){for(const[,g]of Ut(this,_g))g==null||g();Ut(this,_g).clear()}}_g=new WeakMap,cA=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(it){if(it instanceof AbortException||it instanceof InvalidPDFException||it instanceof PasswordException||it instanceof ResponseException||it instanceof UnknownErrorException)return it;switch(it instanceof Error||typeof it=="object"&&it!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new AbortException(it.message);case"InvalidPDFException":return new InvalidPDFException(it.message);case"PasswordException":return new PasswordException(it.message,it.code);case"ResponseException":return new ResponseException(it.message,it.status,it.missing);case"UnknownErrorException":return new UnknownErrorException(it.message,it.details)}return new UnknownErrorException(it.message,it.toString())}var Mx,hA,p4,dA,m4,fA,g4,Ix,aC;class MessageHandler{constructor(g,et,ot){Rn(this,hA);Rn(this,dA);Rn(this,fA);Rn(this,Ix);Rn(this,Mx,new AbortController);this.sourceName=g,this.targetName=et,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),ot.addEventListener("message",Xn(this,hA,p4).bind(this),{signal:Ut(this,Mx).signal})}on(g,et){const ot=this.actionHandler;if(ot[g])throw new Error(`There is already an actionName called "${g}"`);ot[g]=et}send(g,et,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:et},ot)}sendWithPromise(g,et,ot){const ut=this.callbackId++,ct=Promise.withResolvers();this.callbackCapabilities[ut]=ct;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:ut,data:et},ot)}catch(dt){ct.reject(dt)}return ct.promise}sendWithStream(g,et,ot,ut){const ct=this.streamId++,dt=this.sourceName,ft=this.targetName,St=this.comObj;return new ReadableStream({start:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ct]={controller:kt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:dt,targetName:ft,action:g,streamId:ct,data:et,desiredSize:kt.desiredSize},ut),Tt.promise},pull:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ct].pullCall=Tt,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.PULL,streamId:ct,desiredSize:kt.desiredSize}),Tt.promise},cancel:kt=>{assert(kt instanceof Error,"cancel must have a valid reason");const Tt=Promise.withResolvers();return this.streamControllers[ct].cancelCall=Tt,this.streamControllers[ct].isClosed=!0,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.CANCEL,streamId:ct,reason:wrapReason(kt)}),Tt.promise}},ot)}destroy(){var g;(g=Ut(this,Mx))==null||g.abort(),In(this,Mx,null)}}Mx=new WeakMap,hA=new WeakSet,p4=function({data:g}){if(g.targetName!==this.sourceName)return;if(g.stream){Xn(this,fA,g4).call(this,g);return}if(g.callback){const ot=g.callbackId,ut=this.callbackCapabilities[ot];if(!ut)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],g.callback===CallbackKind.DATA)ut.resolve(g.data);else if(g.callback===CallbackKind.ERROR)ut.reject(wrapReason(g.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[g.action];if(!et)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const ot=this.sourceName,ut=g.sourceName,ct=this.comObj;Promise.try(et,g.data).then(function(dt){ct.postMessage({sourceName:ot,targetName:ut,callback:CallbackKind.DATA,callbackId:g.callbackId,data:dt})},function(dt){ct.postMessage({sourceName:ot,targetName:ut,callback:CallbackKind.ERROR,callbackId:g.callbackId,reason:wrapReason(dt)})});return}if(g.streamId){Xn(this,dA,m4).call(this,g);return}et(g.data)},dA=new WeakSet,m4=function(g){const et=g.streamId,ot=this.sourceName,ut=g.sourceName,ct=this.comObj,dt=this,ft=this.actionHandler[g.action],St={enqueue(kt,Tt=1,Rt){if(this.isCancelled)return;const jt=this.desiredSize;this.desiredSize-=Tt,jt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.ENQUEUE,streamId:et,chunk:kt},Rt)},close(){this.isCancelled||(this.isCancelled=!0,ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CLOSE,streamId:et}),delete dt.streamSinks[et])},error(kt){assert(kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.ERROR,streamId:et,reason:wrapReason(kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[et]=St,Promise.try(ft,g.data,St).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.START_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.START_COMPLETE,streamId:et,reason:wrapReason(kt)})})},fA=new WeakSet,g4=function(g){const et=g.streamId,ot=this.sourceName,ut=g.sourceName,ct=this.comObj,dt=this.streamControllers[et],ft=this.streamSinks[et];switch(g.stream){case StreamKind.START_COMPLETE:g.success?dt.startCall.resolve():dt.startCall.reject(wrapReason(g.reason));break;case StreamKind.PULL_COMPLETE:g.success?dt.pullCall.resolve():dt.pullCall.reject(wrapReason(g.reason));break;case StreamKind.PULL:if(!ft){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0});break}ft.desiredSize<=0&&g.desiredSize>0&&ft.sinkCapability.resolve(),ft.desiredSize=g.desiredSize,Promise.try(ft.onPull||onFn).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,reason:wrapReason(kt)})});break;case StreamKind.ENQUEUE:if(assert(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(g.chunk);break;case StreamKind.CLOSE:if(assert(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),Xn(this,Ix,aC).call(this,dt,et);break;case StreamKind.ERROR:assert(dt,"error should have stream controller"),dt.controller.error(wrapReason(g.reason)),Xn(this,Ix,aC).call(this,dt,et);break;case StreamKind.CANCEL_COMPLETE:g.success?dt.cancelCall.resolve():dt.cancelCall.reject(wrapReason(g.reason)),Xn(this,Ix,aC).call(this,dt,et);break;case StreamKind.CANCEL:if(!ft)break;const St=wrapReason(g.reason);Promise.try(ft.onCancel||onFn,St).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CANCEL_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CANCEL_COMPLETE,streamId:et,reason:wrapReason(kt)})}),ft.sinkCapability.reject(St),ft.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},Ix=new WeakSet,aC=async function(g,et){var ot,ut,ct;await Promise.allSettled([(ot=g.startCall)==null?void 0:ot.promise,(ut=g.pullCall)==null?void 0:ut.promise,(ct=g.cancelCall)==null?void 0:ct.promise]),delete this.streamControllers[et]};var O2;class BaseCanvasFactory{constructor({enableHWA:g=!1}){Rn(this,O2,!1);In(this,O2,g)}create(g,et){if(g<=0||et<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(g,et);return{canvas:ot,context:ot.getContext("2d",{willReadFrequently:!Ut(this,O2)})}}reset(g,et,ot){if(!g.canvas)throw new Error("Canvas is not specified");if(et<=0||ot<=0)throw new Error("Invalid canvas size");g.canvas.width=et,g.canvas.height=ot}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,et){unreachable("Abstract method `_createCanvas` called.")}}O2=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document,enableHWA:et=!1}){super({enableHWA:et}),this._document=g}_createCanvas(g,et){const ot=this._document.createElement("canvas");return ot.width=g,ot.height=et,ot}}class BaseCMapReaderFactory{constructor({baseUrl:g=null,isCompressed:et=!0}){this.baseUrl=g,this.isCompressed=et}async fetch({name:g}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!g)throw new Error("CMap name must be specified.");const et=this.baseUrl+g+(this.isCompressed?".bcmap":"");return this._fetch(et).then(ot=>({cMapData:ot,isCompressed:this.isCompressed})).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){const et=await fetchData(g,this.isCompressed?"arraybuffer":"text");return et instanceof ArrayBuffer?new Uint8Array(et):stringToBytes(et)}}class BaseFilterFactory{addFilter(g){return"none"}addHCMFilter(g,et){return"none"}addAlphaFilter(g){return"none"}addLuminosityFilter(g){return"none"}addHighlightHCMFilter(g,et,ot,ut,ct){return"none"}destroy(g=!1){}}var M1,Ox,e0,t0,Jl,I1,O1,El,Kl,L1,M_,ty,Xv,Lx,oC,ny,Jv,pA,y4,L2,S3,ry,Qv,D1,I_,j1,O_,D2,w3,F1,L_;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:et,ownerDocument:ot=globalThis.document}){super();Rn(this,El);Rn(this,L1);Rn(this,ty);Rn(this,Lx);Rn(this,ny);Rn(this,pA);Rn(this,L2);Rn(this,ry);Rn(this,D1);Rn(this,j1);Rn(this,D2);Rn(this,F1);Rn(this,M1,void 0);Rn(this,Ox,void 0);Rn(this,e0,void 0);Rn(this,t0,void 0);Rn(this,Jl,void 0);Rn(this,I1,void 0);Rn(this,O1,0);In(this,t0,et),In(this,Jl,ot)}addFilter(et){if(!et)return"none";let ot=Ut(this,El,Kl).get(et);if(ot)return ot;const[ut,ct,dt]=Xn(this,Lx,oC).call(this,et),ft=et.length===1?ut:`${ut}${ct}${dt}`;if(ot=Ut(this,El,Kl).get(ft),ot)return Ut(this,El,Kl).set(et,ot),ot;const St=`g_${Ut(this,t0)}_transfer_map_${Ko(this,O1)._++}`,kt=Xn(this,ny,Jv).call(this,St);Ut(this,El,Kl).set(et,kt),Ut(this,El,Kl).set(ft,kt);const Tt=Xn(this,ry,Qv).call(this,St);return Xn(this,j1,O_).call(this,ut,ct,dt,Tt),kt}addHCMFilter(et,ot){var Bt;const ut=`${et}-${ot}`,ct="base";let dt=Ut(this,L1,M_).get(ct);if((dt==null?void 0:dt.key)===ut||(dt?((Bt=dt.filter)==null||Bt.remove(),dt.key=ut,dt.url="none",dt.filter=null):(dt={key:ut,url:"none",filter:null},Ut(this,L1,M_).set(ct,dt)),!et||!ot))return dt.url;const ft=Xn(this,F1,L_).call(this,et);et=Util$1.makeHexColor(...ft);const St=Xn(this,F1,L_).call(this,ot);if(ot=Util$1.makeHexColor(...St),Ut(this,ty,Xv).style.color="",et==="#000000"&&ot==="#ffffff"||et===ot)return dt.url;const kt=new Array(256);for(let Ht=0;Ht<=255;Ht++){const Yt=Ht/255;kt[Ht]=Yt<=.03928?Yt/12.92:((Yt+.055)/1.055)**2.4}const Tt=kt.join(","),Rt=`g_${Ut(this,t0)}_hcm_filter`,jt=dt.filter=Xn(this,ry,Qv).call(this,Rt);Xn(this,j1,O_).call(this,Tt,Tt,Tt,jt),Xn(this,L2,S3).call(this,jt);const Ft=(Ht,Yt)=>{const zt=ft[Ht]/255,Kt=St[Ht]/255,en=new Array(Yt+1);for(let tn=0;tn<=Yt;tn++)en[tn]=zt+tn/Yt*(Kt-zt);return en.join(",")};return Xn(this,j1,O_).call(this,Ft(0,5),Ft(1,5),Ft(2,5),jt),dt.url=Xn(this,ny,Jv).call(this,Rt),dt.url}addAlphaFilter(et){let ot=Ut(this,El,Kl).get(et);if(ot)return ot;const[ut]=Xn(this,Lx,oC).call(this,[et]),ct=`alpha_${ut}`;if(ot=Ut(this,El,Kl).get(ct),ot)return Ut(this,El,Kl).set(et,ot),ot;const dt=`g_${Ut(this,t0)}_alpha_map_${Ko(this,O1)._++}`,ft=Xn(this,ny,Jv).call(this,dt);Ut(this,El,Kl).set(et,ft),Ut(this,El,Kl).set(ct,ft);const St=Xn(this,ry,Qv).call(this,dt);return Xn(this,D2,w3).call(this,ut,St),ft}addLuminosityFilter(et){let ot=Ut(this,El,Kl).get(et||"luminosity");if(ot)return ot;let ut,ct;if(et?([ut]=Xn(this,Lx,oC).call(this,[et]),ct=`luminosity_${ut}`):ct="luminosity",ot=Ut(this,El,Kl).get(ct),ot)return Ut(this,El,Kl).set(et,ot),ot;const dt=`g_${Ut(this,t0)}_luminosity_map_${Ko(this,O1)._++}`,ft=Xn(this,ny,Jv).call(this,dt);Ut(this,El,Kl).set(et,ft),Ut(this,El,Kl).set(ct,ft);const St=Xn(this,ry,Qv).call(this,dt);return Xn(this,pA,y4).call(this,St),et&&Xn(this,D2,w3).call(this,ut,St),ft}addHighlightHCMFilter(et,ot,ut,ct,dt){var Kt;const ft=`${ot}-${ut}-${ct}-${dt}`;let St=Ut(this,L1,M_).get(et);if((St==null?void 0:St.key)===ft||(St?((Kt=St.filter)==null||Kt.remove(),St.key=ft,St.url="none",St.filter=null):(St={key:ft,url:"none",filter:null},Ut(this,L1,M_).set(et,St)),!ot||!ut))return St.url;const[kt,Tt]=[ot,ut].map(Xn(this,F1,L_).bind(this));let Rt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),jt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[Ft,Bt]=[ct,dt].map(Xn(this,F1,L_).bind(this));jt<Rt&&([Rt,jt,Ft,Bt]=[jt,Rt,Bt,Ft]),Ut(this,ty,Xv).style.color="";const Ht=(en,tn,on)=>{const an=new Array(256),un=(jt-Rt)/on,dn=en/255,Sn=(tn-en)/(255*on);let mn=0;for(let bn=0;bn<=on;bn++){const En=Math.round(Rt+bn*un),kn=dn+bn*Sn;for(let Pn=mn;Pn<=En;Pn++)an[Pn]=kn;mn=En+1}for(let bn=mn;bn<256;bn++)an[bn]=an[mn-1];return an.join(",")},Yt=`g_${Ut(this,t0)}_hcm_${et}_filter`,zt=St.filter=Xn(this,ry,Qv).call(this,Yt);return Xn(this,L2,S3).call(this,zt),Xn(this,j1,O_).call(this,Ht(Ft[0],Bt[0],5),Ht(Ft[1],Bt[1],5),Ht(Ft[2],Bt[2],5),zt),St.url=Xn(this,ny,Jv).call(this,Yt),St.url}destroy(et=!1){var ot,ut,ct,dt;et&&((ot=Ut(this,I1))!=null&&ot.size)||((ut=Ut(this,e0))==null||ut.parentNode.parentNode.remove(),In(this,e0,null),(ct=Ut(this,Ox))==null||ct.clear(),In(this,Ox,null),(dt=Ut(this,I1))==null||dt.clear(),In(this,I1,null),In(this,O1,0))}}M1=new WeakMap,Ox=new WeakMap,e0=new WeakMap,t0=new WeakMap,Jl=new WeakMap,I1=new WeakMap,O1=new WeakMap,El=new WeakSet,Kl=function(){return Ut(this,Ox)||In(this,Ox,new Map)},L1=new WeakSet,M_=function(){return Ut(this,I1)||In(this,I1,new Map)},ty=new WeakSet,Xv=function(){if(!Ut(this,e0)){const et=Ut(this,Jl).createElement("div"),{style:ot}=et;ot.visibility="hidden",ot.contain="strict",ot.width=ot.height=0,ot.position="absolute",ot.top=ot.left=0,ot.zIndex=-1;const ut=Ut(this,Jl).createElementNS(SVG_NS,"svg");ut.setAttribute("width",0),ut.setAttribute("height",0),In(this,e0,Ut(this,Jl).createElementNS(SVG_NS,"defs")),et.append(ut),ut.append(Ut(this,e0)),Ut(this,Jl).body.append(et)}return Ut(this,e0)},Lx=new WeakSet,oC=function(et){if(et.length===1){const kt=et[0],Tt=new Array(256);for(let jt=0;jt<256;jt++)Tt[jt]=kt[jt]/255;const Rt=Tt.join(",");return[Rt,Rt,Rt]}const[ot,ut,ct]=et,dt=new Array(256),ft=new Array(256),St=new Array(256);for(let kt=0;kt<256;kt++)dt[kt]=ot[kt]/255,ft[kt]=ut[kt]/255,St[kt]=ct[kt]/255;return[dt.join(","),ft.join(","),St.join(",")]},ny=new WeakSet,Jv=function(et){if(Ut(this,M1)===void 0){In(this,M1,"");const ot=Ut(this,Jl).URL;ot!==Ut(this,Jl).baseURI&&(isDataScheme(ot)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):In(this,M1,updateUrlHash(ot,"")))}return`url(${Ut(this,M1)}#${et})`},pA=new WeakSet,y4=function(et){const ot=Ut(this,Jl).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),et.append(ot)},L2=new WeakSet,S3=function(et){const ot=Ut(this,Jl).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot)},ry=new WeakSet,Qv=function(et){const ot=Ut(this,Jl).createElementNS(SVG_NS,"filter");return ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("id",et),Ut(this,ty,Xv).append(ot),ot},D1=new WeakSet,I_=function(et,ot,ut){const ct=Ut(this,Jl).createElementNS(SVG_NS,ot);ct.setAttribute("type","discrete"),ct.setAttribute("tableValues",ut),et.append(ct)},j1=new WeakSet,O_=function(et,ot,ut,ct){const dt=Ut(this,Jl).createElementNS(SVG_NS,"feComponentTransfer");ct.append(dt),Xn(this,D1,I_).call(this,dt,"feFuncR",et),Xn(this,D1,I_).call(this,dt,"feFuncG",ot),Xn(this,D1,I_).call(this,dt,"feFuncB",ut)},D2=new WeakSet,w3=function(et,ot){const ut=Ut(this,Jl).createElementNS(SVG_NS,"feComponentTransfer");ot.append(ut),Xn(this,D1,I_).call(this,ut,"feFuncA",et)},F1=new WeakSet,L_=function(et){return Ut(this,ty,Xv).style.color=et,getRGB(getComputedStyle(Ut(this,ty,Xv)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!g)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load font data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}class BaseWasmFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!g)throw new Error("Wasm filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load wasm data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(it){const et=await process.getBuiltinModule("fs").promises.readFile(it);return new Uint8Array(et)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(g,et){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(g,et)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(g){return node_utils_fetchData(g)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(it,g,et,ot,ut,ct){it[g*4+0]=Math.min(it[g*4+0],et),it[g*4+1]=Math.min(it[g*4+1],ot),it[g*4+2]=Math.max(it[g*4+2],ut),it[g*4+3]=Math.max(it[g*4+3],ct)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Dx,iy;class BBoxReader{constructor(g,et){Rn(this,Dx,void 0);Rn(this,iy,void 0);In(this,Dx,g),In(this,iy,et)}get length(){return Ut(this,Dx).length}isEmpty(g){return Ut(this,Dx)[g]===EMPTY_BBOX}minX(g){return Ut(this,iy)[g*4+0]/256}minY(g){return Ut(this,iy)[g*4+1]/256}maxX(g){return(Ut(this,iy)[g*4+2]+1)/256}maxY(g){return(Ut(this,iy)[g*4+3]+1)/256}}Dx=new WeakMap,iy=new WeakMap;const ensureDebugMetadata=(it,g)=>{if(!it)return;let et=it.get(g);return et||(et={dependencies:new Set,isRenderingOperation:!1},it.set(g,et)),et};var ku,Au,$1,Dp,B1,n0,Ks,Qs,r0,Tu,j2,jx,V1,z1,i0,Ql,fm,F2,C3;class CanvasDependencyTracker{constructor(g,et,ot=!1){Rn(this,F2);Rn(this,ku,{__proto__:null});Rn(this,Au,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});Rn(this,$1,new Map);Rn(this,Dp,[]);Rn(this,B1,[]);Rn(this,n0,[[1,0,0,1,0,0]]);Rn(this,Ks,[-1/0,-1/0,1/0,1/0]);Rn(this,Qs,new Float64Array([1/0,1/0,-1/0,-1/0]));Rn(this,r0,-1);Rn(this,Tu,new Set);Rn(this,j2,new Map);Rn(this,jx,new Map);Rn(this,V1,void 0);Rn(this,z1,void 0);Rn(this,i0,void 0);Rn(this,Ql,void 0);Rn(this,fm,void 0);In(this,V1,g.width),In(this,z1,g.height),Xn(this,F2,C3).call(this,et),ot&&In(this,fm,new Map)}growOperationsCount(g){g>=Ut(this,Ql).length&&Xn(this,F2,C3).call(this,g,Ut(this,Ql))}save(g){return In(this,ku,{__proto__:Ut(this,ku)}),In(this,Au,{__proto__:Ut(this,Au),transform:{__proto__:Ut(this,Au).transform},moveText:{__proto__:Ut(this,Au).moveText},sameLineText:{__proto__:Ut(this,Au).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:Ut(this,Au)[FORCED_DEPENDENCY_LABEL]}}),In(this,Ks,{__proto__:Ut(this,Ks)}),Ut(this,Dp).push(g),this}restore(g){var ut;const et=Object.getPrototypeOf(Ut(this,ku));if(et===null)return this;In(this,ku,et),In(this,Au,Object.getPrototypeOf(Ut(this,Au))),In(this,Ks,Object.getPrototypeOf(Ut(this,Ks)));const ot=Ut(this,Dp).pop();return ot!==void 0&&((ut=ensureDebugMetadata(Ut(this,fm),g))==null||ut.dependencies.add(ot),Ut(this,Ql)[g]=Ut(this,Ql)[ot]),this}recordOpenMarker(g){return Ut(this,Dp).push(g),this}getOpenMarker(){return Ut(this,Dp).length===0?null:Ut(this,Dp).at(-1)}recordCloseMarker(g){var ot;const et=Ut(this,Dp).pop();return et!==void 0&&((ot=ensureDebugMetadata(Ut(this,fm),g))==null||ot.dependencies.add(et),Ut(this,Ql)[g]=Ut(this,Ql)[et]),this}beginMarkedContent(g){return Ut(this,B1).push(g),this}endMarkedContent(g){var ot;const et=Ut(this,B1).pop();return et!==void 0&&((ot=ensureDebugMetadata(Ut(this,fm),g))==null||ot.dependencies.add(et),Ut(this,Ql)[g]=Ut(this,Ql)[et]),this}pushBaseTransform(g){return Ut(this,n0).push(Util$1.multiplyByDOMMatrix(Ut(this,n0).at(-1),g.getTransform())),this}popBaseTransform(){return Ut(this,n0).length>1&&Ut(this,n0).pop(),this}recordSimpleData(g,et){return Ut(this,ku)[g]=et,this}recordIncrementalData(g,et){return Ut(this,Au)[g].push(et),this}resetIncrementalData(g,et){return Ut(this,Au)[g].length=0,this}recordNamedData(g,et){return Ut(this,$1).set(g,et),this}recordSimpleDataFromNamed(g,et,ot){Ut(this,ku)[g]=Ut(this,$1).get(et)??ot}recordFutureForcedDependency(g,et){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,et),this}inheritSimpleDataAsFutureForcedDependencies(g){for(const et of g)et in Ut(this,ku)&&this.recordFutureForcedDependency(et,Ut(this,ku)[et]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const g of Ut(this,Tu))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,g);return this}resetBBox(g){return Ut(this,r0)!==g&&(In(this,r0,g),Ut(this,Qs)[0]=1/0,Ut(this,Qs)[1]=1/0,Ut(this,Qs)[2]=-1/0,Ut(this,Qs)[3]=-1/0),this}recordClipBox(g,et,ot,ut,ct,dt){const ft=Util$1.multiplyByDOMMatrix(Ut(this,n0).at(-1),et.getTransform()),St=[1/0,1/0,-1/0,-1/0];Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],ft,St);const kt=Util$1.intersect(Ut(this,Ks),St);return kt?(Ut(this,Ks)[0]=kt[0],Ut(this,Ks)[1]=kt[1],Ut(this,Ks)[2]=kt[2],Ut(this,Ks)[3]=kt[3]):(Ut(this,Ks)[0]=Ut(this,Ks)[1]=1/0,Ut(this,Ks)[2]=Ut(this,Ks)[3]=-1/0),this}recordBBox(g,et,ot,ut,ct,dt){const ft=Ut(this,Ks);if(ft[0]===1/0)return this;const St=Util$1.multiplyByDOMMatrix(Ut(this,n0).at(-1),et.getTransform());if(ft[0]===-1/0)return Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],St,Ut(this,Qs)),this;const kt=[1/0,1/0,-1/0,-1/0];return Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],St,kt),Ut(this,Qs)[0]=Math.min(Ut(this,Qs)[0],Math.max(kt[0],ft[0])),Ut(this,Qs)[1]=Math.min(Ut(this,Qs)[1],Math.max(kt[1],ft[1])),Ut(this,Qs)[2]=Math.max(Ut(this,Qs)[2],Math.min(kt[2],ft[2])),Ut(this,Qs)[3]=Math.max(Ut(this,Qs)[3],Math.min(kt[3],ft[3])),this}recordCharacterBBox(g,et,ot,ut=1,ct=0,dt=0,ft){const St=ot.bbox;let kt,Tt;if(St&&(kt=St[2]!==St[0]&&St[3]!==St[1]&&Ut(this,jx).get(ot),kt!==!1&&(Tt=[0,0,0,0],Util$1.axialAlignedBoundingBox(St,ot.fontMatrix,Tt),(ut!==1||ct!==0||dt!==0)&&Util$1.scaleMinMax([ut,0,0,-ut,ct,dt],Tt),kt)))return this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]);if(!ft)return this.recordFullPageBBox(g);const Rt=ft();return St&&Tt&&kt===void 0&&(kt=Tt[0]<=ct-Rt.actualBoundingBoxLeft&&Tt[2]>=ct+Rt.actualBoundingBoxRight&&Tt[1]<=dt-Rt.actualBoundingBoxAscent&&Tt[3]>=dt+Rt.actualBoundingBoxDescent,Ut(this,jx).set(ot,kt),kt)?this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]):this.recordBBox(g,et,ct-Rt.actualBoundingBoxLeft,ct+Rt.actualBoundingBoxRight,dt-Rt.actualBoundingBoxAscent,dt+Rt.actualBoundingBoxDescent)}recordFullPageBBox(g){return Ut(this,Qs)[0]=Math.max(0,Ut(this,Ks)[0]),Ut(this,Qs)[1]=Math.max(0,Ut(this,Ks)[1]),Ut(this,Qs)[2]=Math.min(Ut(this,V1),Ut(this,Ks)[2]),Ut(this,Qs)[3]=Math.min(Ut(this,z1),Ut(this,Ks)[3]),this}getSimpleIndex(g){return Ut(this,ku)[g]}recordDependencies(g,et){const ot=Ut(this,Tu),ut=Ut(this,ku),ct=Ut(this,Au);for(const dt of et)dt in Ut(this,ku)?ot.add(ut[dt]):dt in ct&&ct[dt].forEach(ot.add,ot);return this}recordNamedDependency(g,et){return Ut(this,$1).has(et)&&Ut(this,Tu).add(Ut(this,$1).get(et)),this}recordOperation(g,et=!1){if(this.recordDependencies(g,[FORCED_DEPENDENCY_LABEL]),Ut(this,fm)){const ot=ensureDebugMetadata(Ut(this,fm),g),{dependencies:ut}=ot;Ut(this,Tu).forEach(ut.add,ut),Ut(this,Dp).forEach(ut.add,ut),Ut(this,B1).forEach(ut.add,ut),ut.delete(g),ot.isRenderingOperation=!0}if(Ut(this,r0)===g){const ot=floor(Ut(this,Qs)[0]*256/Ut(this,V1)),ut=floor(Ut(this,Qs)[1]*256/Ut(this,z1)),ct=ceil(Ut(this,Qs)[2]*256/Ut(this,V1)),dt=ceil(Ut(this,Qs)[3]*256/Ut(this,z1));expandBBox(Ut(this,i0),g,ot,ut,ct,dt);for(const ft of Ut(this,Tu))ft!==g&&expandBBox(Ut(this,i0),ft,ot,ut,ct,dt);for(const ft of Ut(this,Dp))ft!==g&&expandBBox(Ut(this,i0),ft,ot,ut,ct,dt);for(const ft of Ut(this,B1))ft!==g&&expandBBox(Ut(this,i0),ft,ot,ut,ct,dt);et||(Ut(this,Tu).clear(),In(this,r0,-1))}return this}recordShowTextOperation(g,et=!1){const ot=Array.from(Ut(this,Tu));this.recordOperation(g,et),this.recordIncrementalData("sameLineText",g);for(const ut of ot)this.recordIncrementalData("sameLineText",ut);return this}bboxToClipBoxDropOperation(g,et=!1){return Ut(this,r0)===g&&(In(this,r0,-1),Ut(this,Ks)[0]=Math.max(Ut(this,Ks)[0],Ut(this,Qs)[0]),Ut(this,Ks)[1]=Math.max(Ut(this,Ks)[1],Ut(this,Qs)[1]),Ut(this,Ks)[2]=Math.min(Ut(this,Ks)[2],Ut(this,Qs)[2]),Ut(this,Ks)[3]=Math.min(Ut(this,Ks)[3],Ut(this,Qs)[3]),et||Ut(this,Tu).clear()),this}_takePendingDependencies(){const g=Ut(this,Tu);return In(this,Tu,new Set),g}_extractOperation(g){const et=Ut(this,j2).get(g);return Ut(this,j2).delete(g),et}_pushPendingDependencies(g){for(const et of g)Ut(this,Tu).add(et)}take(){return Ut(this,jx).clear(),new BBoxReader(Ut(this,Ql),Ut(this,i0))}takeDebugMetadata(){return Ut(this,fm)}}ku=new WeakMap,Au=new WeakMap,$1=new WeakMap,Dp=new WeakMap,B1=new WeakMap,n0=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,r0=new WeakMap,Tu=new WeakMap,j2=new WeakMap,jx=new WeakMap,V1=new WeakMap,z1=new WeakMap,i0=new WeakMap,Ql=new WeakMap,fm=new WeakMap,F2=new WeakSet,C3=function(g,et){const ot=new ArrayBuffer(g*4);In(this,i0,new Uint8ClampedArray(ot)),In(this,Ql,new Uint32Array(ot)),et&&et.length>0?(Ut(this,Ql).set(et),Ut(this,Ql).fill(EMPTY_BBOX,et.length)):Ut(this,Ql).fill(EMPTY_BBOX)};var oo,Io,jp,Fx,$x;const fP=class fP{constructor(g,et,ot){Rn(this,oo,void 0);Rn(this,Io,void 0);Rn(this,jp,void 0);Rn(this,Fx,0);Rn(this,$x,0);if(g instanceof fP&&Ut(g,jp)===!!ot)return g;In(this,oo,g),In(this,Io,et),In(this,jp,!!ot)}growOperationsCount(){throw new Error("Unreachable")}save(g){return Ko(this,$x)._++,Ut(this,oo).save(Ut(this,Io)),this}restore(g){return Ut(this,$x)>0&&(Ut(this,oo).restore(Ut(this,Io)),Ko(this,$x)._--),this}recordOpenMarker(g){return Ko(this,Fx)._++,this}getOpenMarker(){return Ut(this,Fx)>0?Ut(this,Io):Ut(this,oo).getOpenMarker()}recordCloseMarker(g){return Ko(this,Fx)._--,this}beginMarkedContent(g){return this}endMarkedContent(g){return this}pushBaseTransform(g){return Ut(this,oo).pushBaseTransform(g),this}popBaseTransform(){return Ut(this,oo).popBaseTransform(),this}recordSimpleData(g,et){return Ut(this,oo).recordSimpleData(g,Ut(this,Io)),this}recordIncrementalData(g,et){return Ut(this,oo).recordIncrementalData(g,Ut(this,Io)),this}resetIncrementalData(g,et){return Ut(this,oo).resetIncrementalData(g,Ut(this,Io)),this}recordNamedData(g,et){return this}recordSimpleDataFromNamed(g,et,ot){return Ut(this,oo).recordSimpleDataFromNamed(g,et,Ut(this,Io)),this}recordFutureForcedDependency(g,et){return Ut(this,oo).recordFutureForcedDependency(g,Ut(this,Io)),this}inheritSimpleDataAsFutureForcedDependencies(g){return Ut(this,oo).inheritSimpleDataAsFutureForcedDependencies(g),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Ut(this,oo).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(g){return Ut(this,jp)||Ut(this,oo).resetBBox(Ut(this,Io)),this}recordClipBox(g,et,ot,ut,ct,dt){return Ut(this,jp)||Ut(this,oo).recordClipBox(Ut(this,Io),et,ot,ut,ct,dt),this}recordBBox(g,et,ot,ut,ct,dt){return Ut(this,jp)||Ut(this,oo).recordBBox(Ut(this,Io),et,ot,ut,ct,dt),this}recordCharacterBBox(g,et,ot,ut,ct,dt,ft){return Ut(this,jp)||Ut(this,oo).recordCharacterBBox(Ut(this,Io),et,ot,ut,ct,dt,ft),this}recordFullPageBBox(g){return Ut(this,jp)||Ut(this,oo).recordFullPageBBox(Ut(this,Io)),this}getSimpleIndex(g){return Ut(this,oo).getSimpleIndex(g)}recordDependencies(g,et){return Ut(this,oo).recordDependencies(Ut(this,Io),et),this}recordNamedDependency(g,et){return Ut(this,oo).recordNamedDependency(Ut(this,Io),et),this}recordOperation(g){return Ut(this,oo).recordOperation(Ut(this,Io),!0),this}recordShowTextOperation(g){return Ut(this,oo).recordShowTextOperation(Ut(this,Io),!0),this}bboxToClipBoxDropOperation(g){return Ut(this,jp)||Ut(this,oo).bboxToClipBoxDropOperation(Ut(this,Io),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};oo=new WeakMap,Io=new WeakMap,jp=new WeakMap,Fx=new WeakMap,$x=new WeakMap;let CanvasNestedDependencyTracker=fP;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(it,g){if(!g)return;const et=g[2]-g[0],ot=g[3]-g[1],ut=new Path2D;ut.rect(g[0],g[1],et,ot),it.clip(ut)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let et;this._type==="axial"?et=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ot of this._colorStops)et.addColorStop(ot[0],ot[1]);return et}getPattern(g,et,ot,ut){let ct;if(ut===PathType.STROKE||ut===PathType.FILL){const dt=et.current.getClippedPathBoundingBox(ut,getCurrentTransform(g))||[0,0,0,0],ft=Math.ceil(dt[2]-dt[0])||1,St=Math.ceil(dt[3]-dt[1])||1,kt=et.cachedCanvases.getCanvas("pattern",ft,St),Tt=kt.context;Tt.clearRect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.beginPath(),Tt.rect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.translate(-dt[0],-dt[1]),ot=Util$1.transform(ot,[1,0,0,1,dt[0],dt[1]]),Tt.transform(...et.baseTransform),this.matrix&&Tt.transform(...this.matrix),applyBoundingBox(Tt,this._bbox),Tt.fillStyle=this._createGradient(Tt),Tt.fill(),ct=g.createPattern(kt.canvas,"no-repeat");const Rt=new DOMMatrix(ot);ct.setTransform(Rt)}else applyBoundingBox(g,this._bbox),ct=this._createGradient(g);return ct}}function drawTriangle(it,g,et,ot,ut,ct,dt,ft){const St=g.coords,kt=g.colors,Tt=it.data,Rt=it.width*4;let jt;St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ct,ct=dt,dt=jt),St[ot+1]>St[ut+1]&&(jt=ot,ot=ut,ut=jt,jt=dt,dt=ft,ft=jt),St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ct,ct=dt,dt=jt);const Ft=(St[et]+g.offsetX)*g.scaleX,Bt=(St[et+1]+g.offsetY)*g.scaleY,Ht=(St[ot]+g.offsetX)*g.scaleX,Yt=(St[ot+1]+g.offsetY)*g.scaleY,zt=(St[ut]+g.offsetX)*g.scaleX,Kt=(St[ut+1]+g.offsetY)*g.scaleY;if(Bt>=Kt)return;const en=kt[ct],tn=kt[ct+1],on=kt[ct+2],an=kt[dt],un=kt[dt+1],dn=kt[dt+2],Sn=kt[ft],mn=kt[ft+1],bn=kt[ft+2],En=Math.round(Bt),kn=Math.round(Kt);let Pn,Ln,gn,Mn,yn,vn,On,Cn;for(let Vn=En;Vn<=kn;Vn++){if(Vn<Yt){const hr=Vn<Bt?0:(Bt-Vn)/(Bt-Yt);Pn=Ft-(Ft-Ht)*hr,Ln=en-(en-an)*hr,gn=tn-(tn-un)*hr,Mn=on-(on-dn)*hr}else{let hr;Vn>Kt?hr=1:Yt===Kt?hr=0:hr=(Yt-Vn)/(Yt-Kt),Pn=Ht-(Ht-zt)*hr,Ln=an-(an-Sn)*hr,gn=un-(un-mn)*hr,Mn=dn-(dn-bn)*hr}let Qn;Vn<Bt?Qn=0:Vn>Kt?Qn=1:Qn=(Bt-Vn)/(Bt-Kt),yn=Ft-(Ft-zt)*Qn,vn=en-(en-Sn)*Qn,On=tn-(tn-mn)*Qn,Cn=on-(on-bn)*Qn;const ir=Math.round(Math.min(Pn,yn)),ar=Math.round(Math.max(Pn,yn));let rr=Rt*Vn+ir*4;for(let hr=ir;hr<=ar;hr++)Qn=(Pn-hr)/(Pn-yn),Qn<0?Qn=0:Qn>1&&(Qn=1),Tt[rr++]=Ln-(Ln-vn)*Qn|0,Tt[rr++]=gn-(gn-On)*Qn|0,Tt[rr++]=Mn-(Mn-Cn)*Qn|0,Tt[rr++]=255}}function drawFigure(it,g,et){const ot=g.coords,ut=g.colors;let ct,dt;switch(g.type){case"lattice":const ft=g.verticesPerRow,St=Math.floor(ot.length/ft)-1,kt=ft-1;for(ct=0;ct<St;ct++){let Tt=ct*ft;for(let Rt=0;Rt<kt;Rt++,Tt++)drawTriangle(it,et,ot[Tt],ot[Tt+1],ot[Tt+ft],ut[Tt],ut[Tt+1],ut[Tt+ft]),drawTriangle(it,et,ot[Tt+ft+1],ot[Tt+1],ot[Tt+ft],ut[Tt+ft+1],ut[Tt+1],ut[Tt+ft])}break;case"triangles":for(ct=0,dt=ot.length;ct<dt;ct+=3)drawTriangle(it,et,ot[ct],ot[ct+1],ot[ct+2],ut[ct],ut[ct+1],ut[ct+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[6],this._background=g[7],this.matrix=null}_createMeshCanvas(g,et,ot){const ft=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),kt=Math.ceil(this._bounds[2])-ft,Tt=Math.ceil(this._bounds[3])-St,Rt=Math.min(Math.ceil(Math.abs(kt*g[0]*1.1)),3e3),jt=Math.min(Math.ceil(Math.abs(Tt*g[1]*1.1)),3e3),Ft=kt/Rt,Bt=Tt/jt,Ht={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-St,scaleX:1/Ft,scaleY:1/Bt},Yt=Rt+2*2,zt=jt+2*2,Kt=ot.getCanvas("mesh",Yt,zt),en=Kt.context,tn=en.createImageData(Rt,jt);if(et){const an=tn.data;for(let un=0,dn=an.length;un<dn;un+=4)an[un]=et[0],an[un+1]=et[1],an[un+2]=et[2],an[un+3]=255}for(const an of this._figures)drawFigure(tn,an,Ht);return en.putImageData(tn,2,2),{canvas:Kt.canvas,offsetX:ft-2*Ft,offsetY:St-2*Bt,scaleX:Ft,scaleY:Bt}}isModifyingCurrentTransform(){return!0}getPattern(g,et,ot,ut){applyBoundingBox(g,this._bbox);const ct=new Float32Array(2);if(ut===PathType.SHADING)Util$1.singularValueDecompose2dScale(getCurrentTransform(g),ct);else if(this.matrix){Util$1.singularValueDecompose2dScale(this.matrix,ct);const[ft,St]=ct;Util$1.singularValueDecompose2dScale(et.baseTransform,ct),ct[0]*=ft,ct[1]*=St}else Util$1.singularValueDecompose2dScale(et.baseTransform,ct);const dt=this._createMeshCanvas(ct,ut===PathType.SHADING?null:this._background,et.cachedCanvases);return ut!==PathType.SHADING&&(g.setTransform(...et.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(dt.offsetX,dt.offsetY),g.scale(dt.scaleX,dt.scaleY),g.createPattern(dt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(it){switch(it[0]){case"RadialAxial":return new RadialAxialShadingPattern(it);case"Mesh":return new MeshShadingPattern(it);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${it[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},mA=class mA{constructor(g,et,ot,ut){this.color=g[1],this.operatorList=g[2],this.matrix=g[3],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.ctx=et,this.canvasGraphicsFactory=ot,this.baseTransform=ut}createPatternCanvas(g,et){var vn,On;const{bbox:ot,operatorList:ut,paintType:ct,tilingType:dt,color:ft,canvasGraphicsFactory:St}=this;let{xstep:kt,ystep:Tt}=this;kt=Math.abs(kt),Tt=Math.abs(Tt),info("TilingType: "+dt);const Rt=ot[0],jt=ot[1],Ft=ot[2],Bt=ot[3],Ht=Ft-Rt,Yt=Bt-jt,zt=new Float32Array(2);Util$1.singularValueDecompose2dScale(this.matrix,zt);const[Kt,en]=zt;Util$1.singularValueDecompose2dScale(this.baseTransform,zt);const tn=Kt*zt[0],on=en*zt[1];let an=Ht,un=Yt,dn=!1,Sn=!1;const mn=Math.ceil(kt*tn),bn=Math.ceil(Tt*on),En=Math.ceil(Ht*tn),kn=Math.ceil(Yt*on);mn>=En?an=kt:dn=!0,bn>=kn?un=Tt:Sn=!0;const Pn=this.getSizeAndScale(an,this.ctx.canvas.width,tn),Ln=this.getSizeAndScale(un,this.ctx.canvas.height,on),gn=g.cachedCanvases.getCanvas("pattern",Pn.size,Ln.size),Mn=gn.context,yn=St.createCanvasGraphics(Mn,et);if(yn.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(yn,ct,ft),Mn.translate(-Pn.scale*Rt,-Ln.scale*jt),yn.transform(0,Pn.scale,0,0,Ln.scale,0,0),Mn.save(),(vn=yn.dependencyTracker)==null||vn.save(),this.clipBbox(yn,Rt,jt,Ft,Bt),yn.baseTransform=getCurrentTransform(yn.ctx),yn.executeOperatorList(ut),yn.endDrawing(),(On=yn.dependencyTracker)==null||On.restore(),Mn.restore(),dn||Sn){const Cn=gn.canvas;dn&&(an=kt),Sn&&(un=Tt);const Vn=this.getSizeAndScale(an,this.ctx.canvas.width,tn),Qn=this.getSizeAndScale(un,this.ctx.canvas.height,on),ir=Vn.size,ar=Qn.size,rr=g.cachedCanvases.getCanvas("pattern-workaround",ir,ar),hr=rr.context,_r=dn?Math.floor(Ht/kt):0,xr=Sn?Math.floor(Yt/Tt):0;for(let wr=0;wr<=_r;wr++)for(let Ir=0;Ir<=xr;Ir++)hr.drawImage(Cn,ir*wr,ar*Ir,ir,ar,0,0,ir,ar);return{canvas:rr.canvas,scaleX:Vn.scale,scaleY:Qn.scale,offsetX:Rt,offsetY:jt}}return{canvas:gn.canvas,scaleX:Pn.scale,scaleY:Ln.scale,offsetX:Rt,offsetY:jt}}getSizeAndScale(g,et,ot){const ut=Math.max(mA.MAX_PATTERN_SIZE,et);let ct=Math.ceil(g*ot);return ct>=ut?ct=ut:ot=ct/g,{scale:ot,size:ct}}clipBbox(g,et,ot,ut,ct){const dt=ut-et,ft=ct-ot;g.ctx.rect(et,ot,dt,ft),Util$1.axialAlignedBoundingBox([et,ot,ut,ct],getCurrentTransform(g.ctx),g.current.minMax),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,et,ot){const ut=g.ctx,ct=g.current;switch(et){case PaintType.COLORED:const{fillStyle:dt,strokeStyle:ft}=this.ctx;ut.fillStyle=ct.fillColor=dt,ut.strokeStyle=ct.strokeColor=ft;break;case PaintType.UNCOLORED:ut.fillStyle=ut.strokeStyle=ot,ct.fillColor=ct.strokeColor=ot;break;default:throw new FormatError(`Unsupported paint type: ${et}`)}}isModifyingCurrentTransform(){return!1}getPattern(g,et,ot,ut,ct){let dt=ot;ut!==PathType.SHADING&&(dt=Util$1.transform(dt,et.baseTransform),this.matrix&&(dt=Util$1.transform(dt,this.matrix)));const ft=this.createPatternCanvas(et,ct);let St=new DOMMatrix(dt);St=St.translate(ft.offsetX,ft.offsetY),St=St.scale(1/ft.scaleX,1/ft.scaleY);const kt=g.createPattern(ft.canvas,"repeat");return kt.setTransform(St),kt}};Ur(mA,"MAX_PATTERN_SIZE",3e3);let TilingPattern=mA;function convertBlackAndWhiteToRGBA({src:it,srcPos:g=0,dest:et,width:ot,height:ut,nonBlackColor:ct=4294967295,inverseDecode:dt=!1}){const ft=util_FeatureTest.isLittleEndian?4278190080:255,[St,kt]=dt?[ct,ft]:[ft,ct],Tt=ot>>3,Rt=ot&7,jt=it.length;et=new Uint32Array(et.buffer);let Ft=0;for(let Bt=0;Bt<ut;Bt++){for(const Yt=g+Tt;g<Yt;g++){const zt=g<jt?it[g]:255;et[Ft++]=zt&128?kt:St,et[Ft++]=zt&64?kt:St,et[Ft++]=zt&32?kt:St,et[Ft++]=zt&16?kt:St,et[Ft++]=zt&8?kt:St,et[Ft++]=zt&4?kt:St,et[Ft++]=zt&2?kt:St,et[Ft++]=zt&1?kt:St}if(Rt===0)continue;const Ht=g<jt?it[g++]:255;for(let Yt=0;Yt<Rt;Yt++)et[Ft++]=Ht&1<<7-Yt?kt:St}return{srcPos:g,destPos:Ft}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(it,g){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){g.save(),this.__originalSave()},it.restore=function(){g.restore(),this.__originalRestore()},it.translate=function(et,ot){g.translate(et,ot),this.__originalTranslate(et,ot)},it.scale=function(et,ot){g.scale(et,ot),this.__originalScale(et,ot)},it.transform=function(et,ot,ut,ct,dt,ft){g.transform(et,ot,ut,ct,dt,ft),this.__originalTransform(et,ot,ut,ct,dt,ft)},it.setTransform=function(et,ot,ut,ct,dt,ft){g.setTransform(et,ot,ut,ct,dt,ft),this.__originalSetTransform(et,ot,ut,ct,dt,ft)},it.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},it.rotate=function(et){g.rotate(et),this.__originalRotate(et)},it.clip=function(et){g.clip(et),this.__originalClip(et)},it.moveTo=function(et,ot){g.moveTo(et,ot),this.__originalMoveTo(et,ot)},it.lineTo=function(et,ot){g.lineTo(et,ot),this.__originalLineTo(et,ot)},it.bezierCurveTo=function(et,ot,ut,ct,dt,ft){g.bezierCurveTo(et,ot,ut,ct,dt,ft),this.__originalBezierCurveTo(et,ot,ut,ct,dt,ft)},it.rect=function(et,ot,ut,ct){g.rect(et,ot,ut,ct),this.__originalRect(et,ot,ut,ct)},it.closePath=function(){g.closePath(),this.__originalClosePath()},it.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,et,ot){let ut;return this.cache[g]!==void 0?(ut=this.cache[g],this.canvasFactory.reset(ut,et,ot)):(ut=this.canvasFactory.create(et,ot),this.cache[g]=ut),ut}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const et=this.cache[g];this.canvasFactory.destroy(et),delete this.cache[g]}}}function drawImageAtIntegerCoords(it,g,et,ot,ut,ct,dt,ft,St,kt){const[Tt,Rt,jt,Ft,Bt,Ht]=getCurrentTransform(it);if(Rt===0&&jt===0){const Kt=dt*Tt+Bt,en=Math.round(Kt),tn=ft*Ft+Ht,on=Math.round(tn),an=(dt+St)*Tt+Bt,un=Math.abs(Math.round(an)-en)||1,dn=(ft+kt)*Ft+Ht,Sn=Math.abs(Math.round(dn)-on)||1;return it.setTransform(Math.sign(Tt),0,0,Math.sign(Ft),en,on),it.drawImage(g,et,ot,ut,ct,0,0,un,Sn),it.setTransform(Tt,Rt,jt,Ft,Bt,Ht),[un,Sn]}if(Tt===0&&Ft===0){const Kt=ft*jt+Bt,en=Math.round(Kt),tn=dt*Rt+Ht,on=Math.round(tn),an=(ft+kt)*jt+Bt,un=Math.abs(Math.round(an)-en)||1,dn=(dt+St)*Rt+Ht,Sn=Math.abs(Math.round(dn)-on)||1;return it.setTransform(0,Math.sign(Rt),Math.sign(jt),0,en,on),it.drawImage(g,et,ot,ut,ct,0,0,Sn,un),it.setTransform(Tt,Rt,jt,Ft,Bt,Ht),[Sn,un]}it.drawImage(g,et,ot,ut,ct,dt,ft,St,kt);const Yt=Math.hypot(Tt,Rt),zt=Math.hypot(jt,Ft);return[Yt*St,zt*kt]}class CanvasExtraState{constructor(g,et,ot){Ur(this,"alphaIsShape",!1);Ur(this,"fontSize",0);Ur(this,"fontSizeScale",1);Ur(this,"textMatrix",null);Ur(this,"textMatrixScale",1);Ur(this,"fontMatrix",FONT_IDENTITY_MATRIX);Ur(this,"leading",0);Ur(this,"x",0);Ur(this,"y",0);Ur(this,"lineX",0);Ur(this,"lineY",0);Ur(this,"charSpacing",0);Ur(this,"wordSpacing",0);Ur(this,"textHScale",1);Ur(this,"textRenderingMode",TextRenderingMode.FILL);Ur(this,"textRise",0);Ur(this,"fillColor","#000000");Ur(this,"strokeColor","#000000");Ur(this,"patternFill",!1);Ur(this,"patternStroke",!1);Ur(this,"fillAlpha",1);Ur(this,"strokeAlpha",1);Ur(this,"lineWidth",1);Ur(this,"activeSMask",null);Ur(this,"transferMaps","none");ot==null||ot(this),this.clipBox=new Float32Array([0,0,g,et]),this.minMax=MIN_MAX_INIT.slice()}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g.minMax=this.minMax.slice(),g}getPathBoundingBox(g=PathType.FILL,et=null){const ot=this.minMax.slice();if(g===PathType.STROKE){et||unreachable("Stroke bounding box must include transform."),Util$1.singularValueDecompose2dScale(et,XY);const ut=XY[0]*this.lineWidth/2,ct=XY[1]*this.lineWidth/2;ot[0]-=ut,ot[1]-=ct,ot[2]+=ut,ot[3]+=ct}return ot}updateClipFromPath(){const g=Util$1.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(g){this.clipBox.set(g,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(g=PathType.FILL,et=null){return Util$1.intersect(this.clipBox,this.getPathBoundingBox(g,et))}}function putBinaryImageData(it,g){if(g instanceof ImageData){it.putImageData(g,0,0);return}const et=g.height,ot=g.width,ut=et%FULL_CHUNK_HEIGHT,ct=(et-ut)/FULL_CHUNK_HEIGHT,dt=ut===0?ct:ct+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0,kt;const Tt=g.data,Rt=ft.data;let jt,Ft,Bt,Ht;if(g.kind===util_ImageKind.GRAYSCALE_1BPP){const Yt=Tt.byteLength,zt=new Uint32Array(Rt.buffer,0,Rt.byteLength>>2),Kt=zt.length,en=ot+7>>3,tn=4294967295,on=util_FeatureTest.isLittleEndian?4278190080:255;for(jt=0;jt<dt;jt++){for(Bt=jt<ct?FULL_CHUNK_HEIGHT:ut,kt=0,Ft=0;Ft<Bt;Ft++){const an=Yt-St;let un=0;const dn=an>en?ot:an*8-7,Sn=dn&-8;let mn=0,bn=0;for(;un<Sn;un+=8)bn=Tt[St++],zt[kt++]=bn&128?tn:on,zt[kt++]=bn&64?tn:on,zt[kt++]=bn&32?tn:on,zt[kt++]=bn&16?tn:on,zt[kt++]=bn&8?tn:on,zt[kt++]=bn&4?tn:on,zt[kt++]=bn&2?tn:on,zt[kt++]=bn&1?tn:on;for(;un<dn;un++)mn===0&&(bn=Tt[St++],mn=128),zt[kt++]=bn&mn?tn:on,mn>>=1}for(;kt<Kt;)zt[kt++]=0;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}}else if(g.kind===util_ImageKind.RGBA_32BPP){for(Ft=0,Ht=ot*FULL_CHUNK_HEIGHT*4,jt=0;jt<ct;jt++)Rt.set(Tt.subarray(St,St+Ht)),St+=Ht,it.putImageData(ft,0,Ft),Ft+=FULL_CHUNK_HEIGHT;jt<dt&&(Ht=ot*ut*4,Rt.set(Tt.subarray(St,St+Ht)),it.putImageData(ft,0,Ft))}else if(g.kind===util_ImageKind.RGB_24BPP)for(Bt=FULL_CHUNK_HEIGHT,Ht=ot*Bt,jt=0;jt<dt;jt++){for(jt>=ct&&(Bt=ut,Ht=ot*Bt),kt=0,Ft=Ht;Ft--;)Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=255;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${g.kind}`)}function putBinaryImageMask(it,g){if(g.bitmap){it.drawImage(g.bitmap,0,0);return}const et=g.height,ot=g.width,ut=et%FULL_CHUNK_HEIGHT,ct=(et-ut)/FULL_CHUNK_HEIGHT,dt=ut===0?ct:ct+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0;const kt=g.data,Tt=ft.data;for(let Rt=0;Rt<dt;Rt++){const jt=Rt<ct?FULL_CHUNK_HEIGHT:ut;({srcPos:St}=convertBlackAndWhiteToRGBA({src:kt,srcPos:St,dest:Tt,width:ot,height:jt,nonBlackColor:0})),it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}}function copyCtxState(it,g){const et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ot of et)it[ot]!==void 0&&(g[ot]=it[ot]);it.setLineDash!==void 0&&(g.setLineDash(it.getLineDash()),g.lineDashOffset=it.lineDashOffset)}function resetCtxToDefault(it){it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0);const{filter:g}=it;g!=="none"&&g!==""&&(it.filter="none")}function getImageSmoothingEnabled(it,g){if(g)return!0;Util$1.singularValueDecompose2dScale(it,XY);const et=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=et&&XY[1]<=et}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var $2,k3,B2,A3,V2,T3;const pP=class pP{constructor(g,et,ot,ut,ct,{optionalContentConfig:dt,markedContentStack:ft=null},St,kt,Tt){Rn(this,$2);Rn(this,B2);Rn(this,V2);this.ctx=g,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=et,this.objs=ot,this.canvasFactory=ut,this.filterFactory=ct,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ft||[],this.optionalContentConfig=dt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=St,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Tt??null}getObject(g,et,ot=null){var ut;return typeof et=="string"?((ut=this.dependencyTracker)==null||ut.recordNamedDependency(g,et),et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et)):ot}beginDrawing({transform:g,viewport:et,transparency:ot=!1,background:ut=null}){const ct=this.ctx.canvas.width,dt=this.ctx.canvas.height,ft=this.ctx.fillStyle;if(this.ctx.fillStyle=ut||"#ffffff",this.ctx.fillRect(0,0,ct,dt),this.ctx.fillStyle=ft,ot){const St=this.cachedCanvases.getCanvas("transparent",ct,dt);this.compositeCtx=this.ctx,this.transparentCanvas=St.canvas,this.ctx=St.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...et.transform),this.viewportScale=et.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(g,et,ot,ut,ct){var zt;const dt=g.argsArray,ft=g.fnArray;let St=et||0;const kt=dt.length;if(kt===St)return St;const Tt=kt-St>EXECUTION_STEPS&&typeof ot=="function",Rt=Tt?Date.now()+EXECUTION_TIME:0;let jt=0;const Ft=this.commonObjs,Bt=this.objs;let Ht,Yt;for(;;){if(ut!==void 0&&St===ut.nextBreakPoint)return ut.breakIt(St,ot),St;if(!ct||ct(St))if(Ht=ft[St],Yt=dt[St]??null,Ht!==OPS.dependency)Yt===null?this[Ht](St):this[Ht](St,...Yt);else for(const Kt of Yt){(zt=this.dependencyTracker)==null||zt.recordNamedData(Kt,St);const en=Kt.startsWith("g_")?Ft:Bt;if(!en.has(Kt))return en.get(Kt,ot),St}if(St++,St===kt)return St;if(Tt&&++jt>EXECUTION_STEPS){if(Date.now()>Rt)return ot(),St;jt=0}}}endDrawing(){Xn(this,$2,k3).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const et of g.values())typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&(et.width=et.height=0);g.clear()}this._cachedBitmapsMap.clear(),Xn(this,B2,A3).call(this)}_scaleImage(g,et){const ot=g.width??g.displayWidth,ut=g.height??g.displayHeight;let ct=Math.max(Math.hypot(et[0],et[1]),1),dt=Math.max(Math.hypot(et[2],et[3]),1),ft=ot,St=ut,kt="prescale1",Tt,Rt;for(;ct>2&&ft>1||dt>2&&St>1;){let jt=ft,Ft=St;ct>2&&ft>1&&(jt=ft>=16384?Math.floor(ft/2)-1||1:Math.ceil(ft/2),ct/=ft/jt),dt>2&&St>1&&(Ft=St>=16384?Math.floor(St/2)-1||1:Math.ceil(St)/2,dt/=St/Ft),Tt=this.cachedCanvases.getCanvas(kt,jt,Ft),Rt=Tt.context,Rt.clearRect(0,0,jt,Ft),Rt.drawImage(g,0,0,ft,St,0,0,jt,Ft),g=Tt.canvas,ft=jt,St=Ft,kt=kt==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ft,paintHeight:St}}_createMaskCanvas(g,et){var mn,bn;const ot=this.ctx,{width:ut,height:ct}=et,dt=this.current.fillColor,ft=this.current.patternFill,St=getCurrentTransform(ot);let kt,Tt,Rt,jt;if((et.bitmap||et.data)&&et.count>1){const En=et.bitmap||et.data.buffer;Tt=JSON.stringify(ft?St:[St.slice(0,4),dt]),kt=this._cachedBitmapsMap.get(En),kt||(kt=new Map,this._cachedBitmapsMap.set(En,kt));const kn=kt.get(Tt);if(kn&&!ft){const Pn=Math.round(Math.min(St[0],St[2])+St[4]),Ln=Math.round(Math.min(St[1],St[3])+St[5]);return(mn=this.dependencyTracker)==null||mn.recordDependencies(g,Dependencies.transformAndFill),{canvas:kn,offsetX:Pn,offsetY:Ln}}Rt=kn}Rt||(jt=this.cachedCanvases.getCanvas("maskCanvas",ut,ct),putBinaryImageMask(jt.context,et));let Ft=Util$1.transform(St,[1/ut,0,0,-1/ct,0,0]);Ft=Util$1.transform(Ft,[1,0,0,1,0,-ct]);const Bt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ut,ct],Ft,Bt);const[Ht,Yt,zt,Kt]=Bt,en=Math.round(zt-Ht)||1,tn=Math.round(Kt-Yt)||1,on=this.cachedCanvases.getCanvas("fillCanvas",en,tn),an=on.context,un=Ht,dn=Yt;an.translate(-un,-dn),an.transform(...Ft),Rt||(Rt=this._scaleImage(jt.canvas,getCurrentTransformInverse(an)),Rt=Rt.img,kt&&ft&&kt.set(Tt,Rt)),an.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(an),et.interpolate),drawImageAtIntegerCoords(an,Rt,0,0,Rt.width,Rt.height,0,0,ut,ct),an.globalCompositeOperation="source-in";const Sn=Util$1.transform(getCurrentTransformInverse(an),[1,0,0,1,-un,-dn]);return an.fillStyle=ft?dt.getPattern(ot,this,Sn,PathType.FILL,g):dt,an.fillRect(0,0,ut,ct),kt&&!ft&&(this.cachedCanvases.delete("fillCanvas"),kt.set(Tt,on.canvas)),(bn=this.dependencyTracker)==null||bn.recordDependencies(g,Dependencies.transformAndFill),{canvas:on.canvas,offsetX:Math.round(un),offsetY:Math.round(dn)}}setLineWidth(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineWidth",g),et!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=et,this.ctx.lineWidth=et}setLineCap(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineCap",g),this.ctx.lineCap=LINE_CAP_STYLES[et]}setLineJoin(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineJoin",g),this.ctx.lineJoin=LINE_JOIN_STYLES[et]}setMiterLimit(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("miterLimit",g),this.ctx.miterLimit=et}setDash(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.recordSimpleData("dash",g);const ut=this.ctx;ut.setLineDash!==void 0&&(ut.setLineDash(et),ut.lineDashOffset=ot)}setRenderingIntent(g,et){}setFlatness(g,et){}setGState(g,et){var ot,ut,ct,dt,ft;for(const[St,kt]of et)switch(St){case"LW":this.setLineWidth(g,kt);break;case"LC":this.setLineCap(g,kt);break;case"LJ":this.setLineJoin(g,kt);break;case"ML":this.setMiterLimit(g,kt);break;case"D":this.setDash(g,kt[0],kt[1]);break;case"RI":this.setRenderingIntent(g,kt);break;case"FL":this.setFlatness(g,kt);break;case"Font":this.setFont(g,kt[0],kt[1]);break;case"CA":(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeAlpha",g),this.current.strokeAlpha=kt;break;case"ca":(ut=this.dependencyTracker)==null||ut.recordSimpleData("fillAlpha",g),this.ctx.globalAlpha=this.current.fillAlpha=kt;break;case"BM":(ct=this.dependencyTracker)==null||ct.recordSimpleData("globalCompositeOperation",g),this.ctx.globalCompositeOperation=kt;break;case"SMask":(dt=this.dependencyTracker)==null||dt.recordSimpleData("SMask",g),this.current.activeSMask=kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(ft=this.dependencyTracker)==null||ft.recordSimpleData("filter",g),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(g){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const et=this.ctx.canvas.width,ot=this.ctx.canvas.height,ut="smaskGroupAt"+this.groupLevel,ct=this.cachedCanvases.getCanvas(ut,et,ot);this.suspendedCtx=this.ctx;const dt=this.ctx=ct.context;dt.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,dt),mirrorContextOperations(dt,this.suspendedCtx),this.setGState(g,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const et=this.current.activeSMask,ot=this.suspendedCtx;this.composeSMask(ot,et,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(g,et,ot,ut){const ct=ut[0],dt=ut[1],ft=ut[2]-ct,St=ut[3]-dt;ft===0||St===0||(this.genericComposeSMask(et.context,ot,ft,St,et.subtype,et.backdrop,et.transferMap,ct,dt,et.offsetX,et.offsetY),g.save(),g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),g.drawImage(ot.canvas,0,0),g.restore())}genericComposeSMask(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt){let jt=g.canvas,Ft=St-Tt,Bt=kt-Rt;if(dt)if(Ft<0||Bt<0||Ft+ot>jt.width||Bt+ut>jt.height){const Yt=this.cachedCanvases.getCanvas("maskExtension",ot,ut),zt=Yt.context;zt.drawImage(jt,-Ft,-Bt),zt.globalCompositeOperation="destination-atop",zt.fillStyle=dt,zt.fillRect(0,0,ot,ut),zt.globalCompositeOperation="source-over",jt=Yt.canvas,Ft=Bt=0}else{g.save(),g.globalAlpha=1,g.setTransform(1,0,0,1,0,0);const Yt=new Path2D;Yt.rect(Ft,Bt,ot,ut),g.clip(Yt),g.globalCompositeOperation="destination-atop",g.fillStyle=dt,g.fillRect(Ft,Bt,ot,ut),g.restore()}et.save(),et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),ct==="Alpha"&&ft?et.filter=this.filterFactory.addAlphaFilter(ft):ct==="Luminosity"&&(et.filter=this.filterFactory.addLuminosityFilter(ft));const Ht=new Path2D;Ht.rect(St,kt,ot,ut),et.clip(Ht),et.globalCompositeOperation="destination-in",et.drawImage(jt,Ft,Bt,ot,ut,St,kt,ot,ut),et.restore()}save(g){var ot;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const et=this.current;this.stateStack.push(et),this.current=et.clone(),(ot=this.dependencyTracker)==null||ot.save(g)}restore(g){var et;if((et=this.dependencyTracker)==null||et.restore(g),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(g,et,ot,ut,ct,dt,ft){var St;(St=this.dependencyTracker)==null||St.recordIncrementalData("transform",g),this.ctx.transform(et,ot,ut,ct,dt,ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,et,ot,ut){let[ct]=ot;if(!ut){ct||(ct=ot[0]=new Path2D),this[et](g,ct);return}if(this.dependencyTracker!==null){const dt=et===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(g).recordBBox(g,this.ctx,ut[0]-dt,ut[2]+dt,ut[1]-dt,ut[3]+dt).recordDependencies(g,["transform"])}if(!(ct instanceof Path2D)){const dt=ot[0]=new Path2D;for(let ft=0,St=ct.length;ft<St;)switch(ct[ft++]){case DrawOPS.moveTo:dt.moveTo(ct[ft++],ct[ft++]);break;case DrawOPS.lineTo:dt.lineTo(ct[ft++],ct[ft++]);break;case DrawOPS.curveTo:dt.bezierCurveTo(ct[ft++],ct[ft++],ct[ft++],ct[ft++],ct[ft++],ct[ft++]);break;case DrawOPS.closePath:dt.closePath();break;default:warn(`Unrecognized drawing path operator: ${ct[ft-1]}`);break}ct=dt}Util$1.axialAlignedBoundingBox(ut,getCurrentTransform(this.ctx),this.current.minMax),this[et](g,ct),this._pathStartIdx=g}closePath(g){this.ctx.closePath()}stroke(g,et,ot=!0){var dt;const ut=this.ctx,ct=this.current.strokeColor;if(ut.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ct=="object"&&(ct!=null&&ct.getPattern)){const ft=ct.isModifyingCurrentTransform()?ut.getTransform():null;if(ut.save(),ut.strokeStyle=ct.getPattern(ut,this,getCurrentTransformInverse(ut),PathType.STROKE,g),ft){const St=new Path2D;St.addPath(et,ut.getTransform().invertSelf().multiplySelf(ft)),et=St}this.rescaleAndStroke(et,!1),ut.restore()}else this.rescaleAndStroke(et,!0);(dt=this.dependencyTracker)==null||dt.recordDependencies(g,Dependencies.stroke),ot&&this.consumePath(g,et,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ut.globalAlpha=this.current.fillAlpha}closeStroke(g,et){this.stroke(g,et)}fill(g,et,ot=!0){var kt,Tt,Rt;const ut=this.ctx,ct=this.current.fillColor,dt=this.current.patternFill;let ft=!1;if(dt){const jt=ct.isModifyingCurrentTransform()?ut.getTransform():null;if((kt=this.dependencyTracker)==null||kt.save(g),ut.save(),ut.fillStyle=ct.getPattern(ut,this,getCurrentTransformInverse(ut),PathType.FILL,g),jt){const Ft=new Path2D;Ft.addPath(et,ut.getTransform().invertSelf().multiplySelf(jt)),et=Ft}ft=!0}const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ut.fill(et,"evenodd"),this.pendingEOFill=!1):ut.fill(et)),(Tt=this.dependencyTracker)==null||Tt.recordDependencies(g,Dependencies.fill),ft&&(ut.restore(),(Rt=this.dependencyTracker)==null||Rt.restore(g)),ot&&this.consumePath(g,et,St)}eoFill(g,et){this.pendingEOFill=!0,this.fill(g,et)}fillStroke(g,et){this.fill(g,et,!1),this.stroke(g,et,!1),this.consumePath(g,et)}eoFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}closeFillStroke(g,et){this.fillStroke(g,et)}closeEOFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}endPath(g,et){this.consumePath(g,et)}rawFillPath(g,et){var ot;this.ctx.fill(et),(ot=this.dependencyTracker)==null||ot.recordDependencies(g,Dependencies.rawFillPath).recordOperation(g)}clip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=NORMAL_CLIP}eoClip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=EO_CLIP}beginText(g){var et;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(et=this.dependencyTracker)==null||et.recordOpenMarker(g).resetIncrementalData("sameLineText").resetIncrementalData("moveText",g)}endText(g){const et=this.pendingTextPaths,ot=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ut}=this;et!==void 0&&ut.recordFutureForcedDependency("textClip",ut.getOpenMarker()).recordFutureForcedDependency("textClip",g),ut.recordCloseMarker(g)}if(et!==void 0){const ut=new Path2D,ct=ot.getTransform().invertSelf();for(const{transform:dt,x:ft,y:St,fontSize:kt,path:Tt}of et)Tt&&ut.addPath(Tt,new DOMMatrix(dt).preMultiplySelf(ct).translate(ft,St).scale(kt,-kt));ot.clip(ut)}delete this.pendingTextPaths}setCharSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("charSpacing",g),this.current.charSpacing=et}setWordSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("wordSpacing",g),this.current.wordSpacing=et}setHScale(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("hScale",g),this.current.textHScale=et/100}setLeading(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("leading",g),this.current.leading=-et}setFont(g,et,ot){var Rt,jt;(Rt=this.dependencyTracker)==null||Rt.recordSimpleData("font",g).recordSimpleDataFromNamed("fontObj",et,g);const ut=this.commonObjs.get(et),ct=this.current;if(!ut)throw new Error(`Can't find font for ${et}`);if(ct.fontMatrix=ut.fontMatrix||FONT_IDENTITY_MATRIX,(ct.fontMatrix[0]===0||ct.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+et),ot<0?(ot=-ot,ct.fontDirection=-1):ct.fontDirection=1,this.current.font=ut,this.current.fontSize=ot,ut.isType3Font)return;const dt=ut.loadedName||"sans-serif",ft=((jt=ut.systemFontInfo)==null?void 0:jt.css)||`"${dt}", ${ut.fallbackName}`;let St="normal";ut.black?St="900":ut.bold&&(St="bold");const kt=ut.italic?"italic":"normal";let Tt=ot;ot<MIN_FONT_SIZE?Tt=MIN_FONT_SIZE:ot>MAX_FONT_SIZE&&(Tt=MAX_FONT_SIZE),this.current.fontSizeScale=ot/Tt,this.ctx.font=`${kt} ${St} ${Tt}px ${ft}`}setTextRenderingMode(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRenderingMode",g),this.current.textRenderingMode=et}setTextRise(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRise",g),this.current.textRise=et}moveText(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.resetIncrementalData("sameLineText").recordIncrementalData("moveText",g),this.current.x=this.current.lineX+=et,this.current.y=this.current.lineY+=ot}setLeadingMoveText(g,et,ot){this.setLeading(g,-ot),this.moveText(g,et,ot)}setTextMatrix(g,et){var ut;(ut=this.dependencyTracker)==null||ut.recordSimpleData("textMatrix",g);const{current:ot}=this;ot.textMatrix=et,ot.textMatrixScale=Math.hypot(et[0],et[1]),ot.x=ot.lineX=0,ot.y=ot.lineY=0}nextLine(g){var et;this.moveText(g,0,this.current.leading),(et=this.dependencyTracker)==null||et.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??g)}paintChar(g,et,ot,ut,ct,dt){var zt,Kt,en,tn;const ft=this.ctx,St=this.current,kt=St.font,Tt=St.textRenderingMode,Rt=St.fontSize/St.fontSizeScale,jt=Tt&TextRenderingMode.FILL_STROKE_MASK,Ft=!!(Tt&TextRenderingMode.ADD_TO_PATH_FLAG),Bt=St.patternFill&&!kt.missingFile,Ht=St.patternStroke&&!kt.missingFile;let Yt;if((kt.disableFontFace||Ft||Bt||Ht)&&!kt.missingFile&&(Yt=kt.getPathGenerator(this.commonObjs,et)),Yt&&(kt.disableFontFace||Bt||Ht)){ft.save(),ft.translate(ot,ut),ft.scale(Rt,-Rt),(zt=this.dependencyTracker)==null||zt.recordCharacterBBox(g,ft,kt);let on;if(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)if(ct){on=ft.getTransform(),ft.setTransform(...ct);const an=Xn(this,V2,T3).call(this,Yt,on,ct);ft.fill(an)}else ft.fill(Yt);if(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)if(dt){on||(on=ft.getTransform()),ft.setTransform(...dt);const{a:an,b:un,c:dn,d:Sn}=on,mn=Util$1.inverseTransform(dt),bn=Util$1.transform([an,un,dn,Sn,0,0],mn);Util$1.singularValueDecompose2dScale(bn,XY),ft.lineWidth*=Math.max(XY[0],XY[1])/Rt,ft.stroke(Xn(this,V2,T3).call(this,Yt,on,dt))}else ft.lineWidth/=Rt,ft.stroke(Yt);ft.restore()}else(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)&&(ft.fillText(et,ot,ut),(Kt=this.dependencyTracker)==null||Kt.recordCharacterBBox(g,ft,kt,Rt,ot,ut,()=>ft.measureText(et))),(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((en=this.dependencyTracker)==null||en.recordCharacterBBox(g,ft,kt,Rt,ot,ut,()=>ft.measureText(et)).recordDependencies(g,Dependencies.stroke)),ft.strokeText(et,ot,ut));Ft&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ft),x:ot,y:ut,fontSize:Rt,path:Yt}),(tn=this.dependencyTracker)==null||tn.recordCharacterBBox(g,ft,kt,Rt,ot,ut))}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const et=g.getImageData(0,0,10,10).data;let ot=!1;for(let ut=3;ut<et.length;ut+=4)if(et[ut]>0&&et[ut]<255){ot=!0;break}return shadow(this,"isFontSubpixelAAEnabled",ot)}showText(g,et){var dn,Sn,mn,bn;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(g,Dependencies.showText).resetBBox(g),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",g).inheritPendingDependenciesAsFutureForcedDependencies());const ot=this.current,ut=ot.font;if(ut.isType3Font){this.showType3Text(g,et),(dn=this.dependencyTracker)==null||dn.recordShowTextOperation(g);return}const ct=ot.fontSize;if(ct===0){(Sn=this.dependencyTracker)==null||Sn.recordOperation(g);return}const dt=this.ctx,ft=ot.fontSizeScale,St=ot.charSpacing,kt=ot.wordSpacing,Tt=ot.fontDirection,Rt=ot.textHScale*Tt,jt=et.length,Ft=ut.vertical,Bt=Ft?1:-1,Ht=ut.defaultVMetrics,Yt=ct*ot.fontMatrix[0],zt=ot.textRenderingMode===TextRenderingMode.FILL&&!ut.disableFontFace&&!ot.patternFill;dt.save(),ot.textMatrix&&dt.transform(...ot.textMatrix),dt.translate(ot.x,ot.y+ot.textRise),Tt>0?dt.scale(Rt,-1):dt.scale(Rt,1);let Kt,en;if(ot.patternFill){dt.save();const En=ot.fillColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.FILL,g);Kt=getCurrentTransform(dt),dt.restore(),dt.fillStyle=En}if(ot.patternStroke){dt.save();const En=ot.strokeColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.STROKE,g);en=getCurrentTransform(dt),dt.restore(),dt.strokeStyle=En}let tn=ot.lineWidth;const on=ot.textMatrixScale;if(on===0||tn===0){const En=ot.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(En===TextRenderingMode.STROKE||En===TextRenderingMode.FILL_STROKE)&&(tn=this.getSinglePixelWidth())}else tn/=on;if(ft!==1&&(dt.scale(ft,ft),tn/=ft),dt.lineWidth=tn,ut.isInvalidPDFjsFont){const En=[];let kn=0;for(const Ln of et)En.push(Ln.unicode),kn+=Ln.width;const Pn=En.join("");if(dt.fillText(Pn,0,0),this.dependencyTracker!==null){const Ln=dt.measureText(Pn);this.dependencyTracker.recordBBox(g,this.ctx,-Ln.actualBoundingBoxLeft,Ln.actualBoundingBoxRight,-Ln.actualBoundingBoxAscent,Ln.actualBoundingBoxDescent).recordShowTextOperation(g)}ot.x+=kn*Yt*Rt,dt.restore(),this.compose();return}let an=0,un;for(un=0;un<jt;++un){const En=et[un];if(typeof En=="number"){an+=Bt*En*ct/1e3;continue}let kn=!1;const Pn=(En.isSpace?kt:0)+St,Ln=En.fontChar,gn=En.accent;let Mn,yn,vn=En.width;if(Ft){const Vn=En.vmetric||Ht,Qn=-(En.vmetric?Vn[1]:vn*.5)*Yt,ir=Vn[2]*Yt;vn=Vn?-Vn[0]:vn,Mn=Qn/ft,yn=(an+ir)/ft}else Mn=an/ft,yn=0;let On;if(ut.remeasure&&vn>0){On=dt.measureText(Ln);const Vn=On.width*1e3/ct*ft;if(vn<Vn&&this.isFontSubpixelAAEnabled){const Qn=vn/Vn;kn=!0,dt.save(),dt.scale(Qn,1),Mn/=Qn}else vn!==Vn&&(Mn+=(vn-Vn)/2e3*ct/ft)}if(this.contentVisible&&(En.isInFont||ut.missingFile)){if(zt&&!gn)dt.fillText(Ln,Mn,yn),(mn=this.dependencyTracker)==null||mn.recordCharacterBBox(g,dt,On?{bbox:null}:ut,ct/ft,Mn,yn,()=>On??dt.measureText(Ln));else if(this.paintChar(g,Ln,Mn,yn,Kt,en),gn){const Vn=Mn+ct*gn.offset.x/ft,Qn=yn-ct*gn.offset.y/ft;this.paintChar(g,gn.fontChar,Vn,Qn,Kt,en)}}const Cn=Ft?vn*Yt-Pn*Tt:vn*Yt+Pn*Tt;an+=Cn,kn&&dt.restore()}Ft?ot.y-=an:ot.x+=an*Rt,dt.restore(),this.compose(),(bn=this.dependencyTracker)==null||bn.recordShowTextOperation(g)}showType3Text(g,et){const ot=this.ctx,ut=this.current,ct=ut.font,dt=ut.fontSize,ft=ut.fontDirection,St=ct.vertical?1:-1,kt=ut.charSpacing,Tt=ut.wordSpacing,Rt=ut.textHScale*ft,jt=ut.fontMatrix||FONT_IDENTITY_MATRIX,Ft=et.length,Bt=ut.textRenderingMode===TextRenderingMode.INVISIBLE;let Ht,Yt,zt,Kt;if(Bt||dt===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ot.save(),ut.textMatrix&&ot.transform(...ut.textMatrix),ot.translate(ut.x,ut.y+ut.textRise),ot.scale(Rt,ft);const en=this.dependencyTracker;for(this.dependencyTracker=en?new CanvasNestedDependencyTracker(en,g):null,Ht=0;Ht<Ft;++Ht){if(Yt=et[Ht],typeof Yt=="number"){Kt=St*Yt*dt/1e3,this.ctx.translate(Kt,0),ut.x+=Kt*Rt;continue}const tn=(Yt.isSpace?Tt:0)+kt,on=ct.charProcOperatorList[Yt.operatorListId];on?this.contentVisible&&(this.save(),ot.scale(dt,dt),ot.transform(...jt),this.executeOperatorList(on),this.restore()):warn(`Type3 character "${Yt.operatorListId}" is not available.`);const an=[Yt.width,0];Util$1.applyTransform(an,jt),zt=an[0]*dt+tn,ot.translate(zt,0),ut.x+=zt*Rt}ot.restore(),en&&(this.dependencyTracker=en)}setCharWidth(g,et,ot){}setCharWidthAndBounds(g,et,ot,ut,ct,dt,ft){var kt;const St=new Path2D;St.rect(ut,ct,dt-ut,ft-ct),this.ctx.clip(St),(kt=this.dependencyTracker)==null||kt.recordBBox(g,this.ctx,ut,dt,ct,ft).recordClipBox(g,this.ctx,ut,dt,ct,ft),this.endPath(g)}getColorN_Pattern(g,et){let ot;if(et[0]==="TilingPattern"){const ut=this.baseTransform||getCurrentTransform(this.ctx),ct={createCanvasGraphics:(dt,ft)=>new pP(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,ft,!0):null)};ot=new TilingPattern(et,this.ctx,ct,ut)}else ot=this._getPattern(g,et[1],et[2]);return ot}setStrokeColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.current.strokeColor=this.getColorN_Pattern(g,et),this.current.patternStroke=!0}setFillColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.current.fillColor=this.getColorN_Pattern(g,et),this.current.patternFill=!0}setStrokeRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor=et,this.current.patternStroke=!1}setStrokeTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor=et,this.current.patternFill=!1}setFillTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(g,et,ot=null){let ut;return this.cachedPatterns.has(et)?ut=this.cachedPatterns.get(et):(ut=getShadingPattern(this.getObject(g,et)),this.cachedPatterns.set(et,ut)),ot&&(ut.matrix=ot),ut}shadingFill(g,et){var dt;if(!this.contentVisible)return;const ot=this.ctx;this.save(g);const ut=this._getPattern(g,et);ot.fillStyle=ut.getPattern(ot,this,getCurrentTransformInverse(ot),PathType.SHADING,g);const ct=getCurrentTransformInverse(ot);if(ct){const{width:ft,height:St}=ot.canvas,kt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ft,St],ct,kt);const[Tt,Rt,jt,Ft]=kt;this.ctx.fillRect(Tt,Rt,jt-Tt,Ft-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordFullPageBBox(g).recordDependencies(g,Dependencies.transform).recordDependencies(g,Dependencies.fill).recordOperation(g),this.compose(this.current.getClippedPathBoundingBox()),this.restore(g)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(g,et,ot){var ut;if(this.contentVisible&&(this.save(g),this.baseTransformStack.push(this.baseTransform),et&&this.transform(g,...et),this.baseTransform=getCurrentTransform(this.ctx),ot)){Util$1.axialAlignedBoundingBox(ot,this.baseTransform,this.current.minMax);const[ct,dt,ft,St]=ot,kt=new Path2D;kt.rect(ct,dt,ft-ct,St-dt),this.ctx.clip(kt),(ut=this.dependencyTracker)==null||ut.recordClipBox(g,this.ctx,ct,ft,dt,St),this.endPath(g)}}paintFormXObjectEnd(g){this.contentVisible&&(this.restore(g),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g,et){var en;if(!this.contentVisible)return;this.save(g),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ot=this.ctx;et.isolated||info("TODO: Support non-isolated groups."),et.knockout&&warn("Knockout groups not supported.");const ut=getCurrentTransform(ot);if(et.matrix&&ot.transform(...et.matrix),!et.bbox)throw new Error("Bounding box is required.");let ct=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox(et.bbox,getCurrentTransform(ot),ct);const dt=[0,0,ot.canvas.width,ot.canvas.height];ct=Util$1.intersect(ct,dt)||[0,0,0,0];const ft=Math.floor(ct[0]),St=Math.floor(ct[1]),kt=Math.max(Math.ceil(ct[2])-ft,1),Tt=Math.max(Math.ceil(ct[3])-St,1);this.current.startNewPathAndClipBox([0,0,kt,Tt]);let Rt="groupAt"+this.groupLevel;et.smask&&(Rt+="_smask_"+this.smaskCounter++%2);const jt=this.cachedCanvases.getCanvas(Rt,kt,Tt),Ft=jt.context;Ft.translate(-ft,-St),Ft.transform(...ut);let Bt=new Path2D;const[Ht,Yt,zt,Kt]=et.bbox;if(Bt.rect(Ht,Yt,zt-Ht,Kt-Yt),et.matrix){const tn=new Path2D;tn.addPath(Bt,new DOMMatrix(et.matrix)),Bt=tn}Ft.clip(Bt),et.smask&&this.smaskStack.push({canvas:jt.canvas,context:Ft,offsetX:ft,offsetY:St,subtype:et.smask.subtype,backdrop:et.smask.backdrop,transferMap:et.smask.transferMap||null,startTransformInverse:null}),(!et.smask||this.dependencyTracker)&&(ot.setTransform(1,0,0,1,0,0),ot.translate(ft,St),ot.save()),copyCtxState(ot,Ft),this.ctx=Ft,(en=this.dependencyTracker)==null||en.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(ot),this.setGState(g,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ot),this.groupLevel++}endGroup(g,et){var ct;if(!this.contentVisible)return;this.groupLevel--;const ot=this.ctx,ut=this.groupStack.pop();if(this.ctx=ut,this.ctx.imageSmoothingEnabled=!1,(ct=this.dependencyTracker)==null||ct.popBaseTransform(),et.smask)this.tempSMask=this.smaskStack.pop(),this.restore(g),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const dt=getCurrentTransform(this.ctx);this.restore(g),this.ctx.save(),this.ctx.setTransform(...dt);const ft=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ot.canvas.width,ot.canvas.height],dt,ft),this.ctx.drawImage(ot.canvas,0,0),this.ctx.restore(),this.compose(ft)}}beginAnnotation(g,et,ot,ut,ct,dt){if(Xn(this,$2,k3).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(g),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ot){const ft=ot[2]-ot[0],St=ot[3]-ot[1];if(dt&&this.annotationCanvasMap){ut=ut.slice(),ut[4]-=ot[0],ut[5]-=ot[1],ot=ot.slice(),ot[0]=ot[1]=0,ot[2]=ft,ot[3]=St,Util$1.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:kt}=this,Tt=Math.ceil(ft*this.outputScaleX*kt),Rt=Math.ceil(St*this.outputScaleY*kt);this.annotationCanvas=this.canvasFactory.create(Tt,Rt);const{canvas:jt,context:Ft}=this.annotationCanvas;this.annotationCanvasMap.set(et,jt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ft,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,St*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(g);const kt=new Path2D;kt.rect(ot[0],ot[1],ft,St),this.ctx.clip(kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(g,...ut),this.transform(g,...ct)}endAnnotation(g){this.annotationCanvas&&(this.ctx.restore(),Xn(this,B2,A3).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g,et){var ft;if(!this.contentVisible)return;const ot=et.count;et=this.getObject(g,et.data,et),et.count=ot;const ut=this.ctx,ct=this._createMaskCanvas(g,et),dt=ct.canvas;ut.save(),ut.setTransform(1,0,0,1,0,0),ut.drawImage(dt,ct.offsetX,ct.offsetY),(ft=this.dependencyTracker)==null||ft.resetBBox(g).recordBBox(g,this.ctx,ct.offsetX,ct.offsetX+dt.width,ct.offsetY,ct.offsetY+dt.height).recordOperation(g),ut.restore(),this.compose()}paintImageMaskXObjectRepeat(g,et,ot,ut=0,ct=0,dt,ft){var Rt,jt,Ft;if(!this.contentVisible)return;et=this.getObject(g,et.data,et);const St=this.ctx;St.save();const kt=getCurrentTransform(St);St.transform(ot,ut,ct,dt,0,0);const Tt=this._createMaskCanvas(g,et);St.setTransform(1,0,0,1,Tt.offsetX-kt[4],Tt.offsetY-kt[5]),(Rt=this.dependencyTracker)==null||Rt.resetBBox(g);for(let Bt=0,Ht=ft.length;Bt<Ht;Bt+=2){const Yt=Util$1.transform(kt,[ot,ut,ct,dt,ft[Bt],ft[Bt+1]]);St.drawImage(Tt.canvas,Yt[4],Yt[5]),(jt=this.dependencyTracker)==null||jt.recordBBox(g,this.ctx,Yt[4],Yt[4]+Tt.canvas.width,Yt[5],Yt[5]+Tt.canvas.height)}St.restore(),this.compose(),(Ft=this.dependencyTracker)==null||Ft.recordOperation(g)}paintImageMaskXObjectGroup(g,et){var dt,ft,St;if(!this.contentVisible)return;const ot=this.ctx,ut=this.current.fillColor,ct=this.current.patternFill;(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordDependencies(g,Dependencies.transformAndFill);for(const kt of et){const{data:Tt,width:Rt,height:jt,transform:Ft}=kt,Bt=this.cachedCanvases.getCanvas("maskCanvas",Rt,jt),Ht=Bt.context;Ht.save();const Yt=this.getObject(g,Tt,kt);putBinaryImageMask(Ht,Yt),Ht.globalCompositeOperation="source-in",Ht.fillStyle=ct?ut.getPattern(Ht,this,getCurrentTransformInverse(ot),PathType.FILL,g):ut,Ht.fillRect(0,0,Rt,jt),Ht.restore(),ot.save(),ot.transform(...Ft),ot.scale(1,-1),drawImageAtIntegerCoords(ot,Bt.canvas,0,0,Rt,jt,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ot,0,Rt,0,jt),ot.restore()}this.compose(),(St=this.dependencyTracker)==null||St.recordOperation(g)}paintImageXObject(g,et){if(!this.contentVisible)return;const ot=this.getObject(g,et);if(!ot){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g,ot)}paintImageXObjectRepeat(g,et,ot,ut,ct){if(!this.contentVisible)return;const dt=this.getObject(g,et);if(!dt){warn("Dependent image isn't ready yet");return}const ft=dt.width,St=dt.height,kt=[];for(let Tt=0,Rt=ct.length;Tt<Rt;Tt+=2)kt.push({transform:[ot,0,0,ut,ct[Tt],ct[Tt+1]],x:0,y:0,w:ft,h:St});this.paintInlineImageXObjectGroup(g,dt,kt)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:et,width:ot,height:ut}=g,ct=this.cachedCanvases.getCanvas("inlineImage",ot,ut),dt=ct.context;return dt.filter=this.current.transferMaps,dt.drawImage(et,0,0),dt.filter="none",ct.canvas}paintInlineImageXObject(g,et){var kt;if(!this.contentVisible)return;const ot=et.width,ut=et.height,ct=this.ctx;this.save(g);const{filter:dt}=ct;dt!=="none"&&dt!==""&&(ct.filter="none"),ct.scale(1/ot,-1/ut);let ft;if(et.bitmap)ft=this.applyTransferMapsToBitmap(et);else if(typeof HTMLElement=="function"&&et instanceof HTMLElement||!et.data)ft=et;else{const Rt=this.cachedCanvases.getCanvas("inlineImage",ot,ut).context;putBinaryImageData(Rt,et),ft=this.applyTransferMapsToCanvas(Rt)}const St=this._scaleImage(ft,getCurrentTransformInverse(ct));ct.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ct),et.interpolate),(kt=this.dependencyTracker)==null||kt.resetBBox(g).recordBBox(g,ct,0,ot,-ut,0).recordDependencies(g,Dependencies.imageXObject).recordOperation(g),drawImageAtIntegerCoords(ct,St.img,0,0,St.paintWidth,St.paintHeight,0,-ut,ot,ut),this.compose(),this.restore(g)}paintInlineImageXObjectGroup(g,et,ot){var dt,ft,St;if(!this.contentVisible)return;const ut=this.ctx;let ct;if(et.bitmap)ct=et.bitmap;else{const kt=et.width,Tt=et.height,jt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(jt,et),ct=this.applyTransferMapsToCanvas(jt)}(dt=this.dependencyTracker)==null||dt.resetBBox(g);for(const kt of ot)ut.save(),ut.transform(...kt.transform),ut.scale(1,-1),drawImageAtIntegerCoords(ut,ct,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ut,0,1,-1,0),ut.restore();(St=this.dependencyTracker)==null||St.recordOperation(g),this.compose()}paintSolidColorImageMask(g){var et;this.contentVisible&&((et=this.dependencyTracker)==null||et.resetBBox(g).recordBBox(g,this.ctx,0,1,0,1).recordDependencies(g,Dependencies.fill).recordOperation(g),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g,et){}markPointProps(g,et,ot){}beginMarkedContent(g,et){var ot;(ot=this.dependencyTracker)==null||ot.beginMarkedContent(g),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.beginMarkedContent(g),et==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ot)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(g){var et;(et=this.dependencyTracker)==null||et.endMarkedContent(g),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(g){}endCompat(g){}consumePath(g,et,ot){var dt,ft;const ut=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ot);const ct=this.ctx;this.pendingClip?(ut||(this.pendingClip===EO_CLIP?ct.clip(et,"evenodd"):ct.clip(et)),this.pendingClip=null,(dt=this.dependencyTracker)==null||dt.bboxToClipBoxDropOperation(g).recordFutureForcedDependency("clipPath",g)):(ft=this.dependencyTracker)==null||ft.recordOperation(g),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=getCurrentTransform(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const et=Math.abs(g[0]*g[3]-g[2]*g[1]),ot=Math.hypot(g[0],g[2]),ut=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(ot,ut)/et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:et,b:ot,c:ut,d:ct}=this.ctx.getTransform();let dt,ft;if(ot===0&&ut===0){const St=Math.abs(et),kt=Math.abs(ct);if(St===kt)if(g===0)dt=ft=1/St;else{const Tt=St*g;dt=ft=Tt<1?1/Tt:1}else if(g===0)dt=1/St,ft=1/kt;else{const Tt=St*g,Rt=kt*g;dt=Tt<1?1/Tt:1,ft=Rt<1?1/Rt:1}}else{const St=Math.abs(et*ct-ot*ut),kt=Math.hypot(et,ot),Tt=Math.hypot(ut,ct);if(g===0)dt=Tt/St,ft=kt/St;else{const Rt=g*St;dt=Tt>Rt?Tt/Rt:1,ft=kt>Rt?kt/Rt:1}}this._cachedScaleForStroking[0]=dt,this._cachedScaleForStroking[1]=ft}return this._cachedScaleForStroking}rescaleAndStroke(g,et){const{ctx:ot,current:{lineWidth:ut}}=this,[ct,dt]=this.getScaleForStroking();if(ct===dt){ot.lineWidth=(ut||1)*ct,ot.stroke(g);return}const ft=ot.getLineDash();et&&ot.save(),ot.scale(ct,dt),SCALE_MATRIX.a=1/ct,SCALE_MATRIX.d=1/dt;const St=new Path2D;if(St.addPath(g,SCALE_MATRIX),ft.length>0){const kt=Math.max(ct,dt);ot.setLineDash(ft.map(Tt=>Tt/kt)),ot.lineDashOffset/=kt}ot.lineWidth=ut||1,ot.stroke(St),et&&ot.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};$2=new WeakSet,k3=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},B2=new WeakSet,A3=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const et=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=et}}},V2=new WeakSet,T3=function(g,et,ot){const ut=new Path2D;return ut.addPath(g,new DOMMatrix(ot).invertSelf().multiplySelf(et)),ut};let CanvasGraphics=pP;for(const it in OPS)CanvasGraphics.prototype[it]!==void 0&&(CanvasGraphics.prototype[OPS[it]]=CanvasGraphics.prototype[it]);var Bx,Vx,z2,zx,lC;const nx=class nx{constructor(g){Rn(this,zx);Rn(this,Bx,void 0);Rn(this,Vx,void 0);Rn(this,z2,void 0);In(this,Bx,g),In(this,Vx,new DataView(Ut(this,Bx))),In(this,z2,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ut=0;for(const kt of nx.strings){const Tt=et.encode(g[kt]);ot[kt]=Tt,ut+=4+Tt.length}const ct=new ArrayBuffer(ut),dt=new Uint8Array(ct),ft=new DataView(ct);let St=0;for(const kt of nx.strings){const Tt=ot[kt],Rt=Tt.length;ft.setUint32(St,Rt),dt.set(Tt,St+4),St+=4+Rt}return assert(St===ct.byteLength,"CssFontInfo.write: Buffer overflow"),ct}get fontFamily(){return Xn(this,zx,lC).call(this,0)}get fontWeight(){return Xn(this,zx,lC).call(this,1)}get italicAngle(){return Xn(this,zx,lC).call(this,2)}};Bx=new WeakMap,Vx=new WeakMap,z2=new WeakMap,zx=new WeakSet,lC=function(g){assert(g<nx.strings.length,"Invalid string index");let et=0;for(let ut=0;ut<g;ut++)et+=Ut(this,Vx).getUint32(et)+4;const ot=Ut(this,Vx).getUint32(et);return Ut(this,z2).decode(new Uint8Array(Ut(this,Bx),et+4,ot))},Ur(nx,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=nx;var sy,pm,H1,U1,D_;const rx=class rx{constructor(g){Rn(this,U1);Rn(this,sy,void 0);Rn(this,pm,void 0);Rn(this,H1,void 0);In(this,sy,g),In(this,pm,new DataView(Ut(this,sy))),In(this,H1,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ut=0;for(const jt of rx.strings){const Ft=et.encode(g[jt]);ot[jt]=Ft,ut+=4+Ft.length}ut+=4;let ct,dt,ft=1+ut;g.style&&(ct=et.encode(g.style.style),dt=et.encode(g.style.weight),ft+=4+ct.length+4+dt.length);const St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;Tt.setUint8(Rt++,g.guessFallback?1:0),Tt.setUint32(Rt,0),Rt+=4,ut=0;for(const jt of rx.strings){const Ft=ot[jt],Bt=Ft.length;ut+=4+Bt,Tt.setUint32(Rt,Bt),kt.set(Ft,Rt+4),Rt+=4+Bt}return Tt.setUint32(Rt-ut-4,ut),g.style&&(Tt.setUint32(Rt,ct.length),kt.set(ct,Rt+4),Rt+=4+ct.length,Tt.setUint32(Rt,dt.length),kt.set(dt,Rt+4),Rt+=4+dt.length),assert(Rt<=St.byteLength,"SubstitionInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}get guessFallback(){return Ut(this,pm).getUint8(0)!==0}get css(){return Xn(this,U1,D_).call(this,0)}get loadedName(){return Xn(this,U1,D_).call(this,1)}get baseFontName(){return Xn(this,U1,D_).call(this,2)}get src(){return Xn(this,U1,D_).call(this,3)}get style(){let g=1;g+=4+Ut(this,pm).getUint32(g);const et=Ut(this,pm).getUint32(g),ot=Ut(this,H1).decode(new Uint8Array(Ut(this,sy),g+4,et));g+=4+et;const ut=Ut(this,pm).getUint32(g),ct=Ut(this,H1).decode(new Uint8Array(Ut(this,sy),g+4,ut));return{style:ot,weight:ct}}};sy=new WeakMap,pm=new WeakMap,H1=new WeakMap,U1=new WeakSet,D_=function(g){assert(g<rx.strings.length,"Invalid string index");let et=5;for(let ut=0;ut<g;ut++)et+=Ut(this,pm).getUint32(et)+4;const ot=Ut(this,pm).getUint32(et);return Ut(this,H1).decode(new Uint8Array(Ut(this,sy),et+4,ot))},Ur(rx,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=rx;var Hx,Ux,Gx,Wx,Hu,mm,H2,Zs,Uu,Rp,qx,uC,G1,j_;const Ls=class Ls{constructor({data:g,extra:et}){Rn(this,Uu);Rn(this,qx);Rn(this,G1);Rn(this,mm,void 0);Rn(this,H2,void 0);Rn(this,Zs,void 0);In(this,mm,g),In(this,H2,new TextDecoder),In(this,Zs,new DataView(Ut(this,mm))),et&&Object.assign(this,et)}get black(){return Xn(this,Uu,Rp).call(this,0)}get bold(){return Xn(this,Uu,Rp).call(this,1)}get disableFontFace(){return Xn(this,Uu,Rp).call(this,2)}get fontExtraProperties(){return Xn(this,Uu,Rp).call(this,3)}get isInvalidPDFjsFont(){return Xn(this,Uu,Rp).call(this,4)}get isType3Font(){return Xn(this,Uu,Rp).call(this,5)}get italic(){return Xn(this,Uu,Rp).call(this,6)}get missingFile(){return Xn(this,Uu,Rp).call(this,7)}get remeasure(){return Xn(this,Uu,Rp).call(this,8)}get vertical(){return Xn(this,Uu,Rp).call(this,9)}get ascent(){return Xn(this,qx,uC).call(this,0)}get defaultWidth(){return Xn(this,qx,uC).call(this,1)}get descent(){return Xn(this,qx,uC).call(this,2)}get bbox(){let g=Ut(Ls,Ux);if(Ut(this,Zs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<4;ut++)ot.push(Ut(this,Zs).getInt16(g,!0)),g+=2;return ot}get fontMatrix(){let g=Ut(Ls,Gx);if(Ut(this,Zs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<6;ut++)ot.push(Ut(this,Zs).getFloat64(g,!0)),g+=8;return ot}get defaultVMetrics(){let g=Ut(Ls,Wx);if(Ut(this,Zs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<3;ut++)ot.push(Ut(this,Zs).getInt16(g,!0)),g+=2;return ot}get fallbackName(){return Xn(this,G1,j_).call(this,0)}get loadedName(){return Xn(this,G1,j_).call(this,1)}get mimetype(){return Xn(this,G1,j_).call(this,2)}get name(){return Xn(this,G1,j_).call(this,3)}get data(){let g=Ut(Ls,Hu);const et=Ut(this,Zs).getUint32(g);g+=4+et;const ot=Ut(this,Zs).getUint32(g);g+=4+ot;const ut=Ut(this,Zs).getUint32(g);g+=4+ut;const ct=Ut(this,Zs).getUint32(g);if(ct!==0)return new Uint8Array(Ut(this,mm),g+4,ct)}clearData(){let g=Ut(Ls,Hu);const et=Ut(this,Zs).getUint32(g);g+=4+et;const ot=Ut(this,Zs).getUint32(g);g+=4+ot;const ut=Ut(this,Zs).getUint32(g);g+=4+ut;const ct=Ut(this,Zs).getUint32(g);new Uint8Array(Ut(this,mm),g+4,ct).fill(0),Ut(this,Zs).setUint32(g,0)}get cssFontInfo(){let g=Ut(Ls,Hu);const et=Ut(this,Zs).getUint32(g);g+=4+et;const ot=Ut(this,Zs).getUint32(g);g+=4+ot;const ut=Ut(this,Zs).getUint32(g);if(ut===0)return null;const ct=new Uint8Array(ut);return ct.set(new Uint8Array(Ut(this,mm),g+4,ut)),new CssFontInfo(ct.buffer)}get systemFontInfo(){let g=Ut(Ls,Hu);const et=Ut(this,Zs).getUint32(g);g+=4+et;const ot=Ut(this,Zs).getUint32(g);if(ot===0)return null;const ut=new Uint8Array(ot);return ut.set(new Uint8Array(Ut(this,mm),g+4,ot)),new SystemFontInfo(ut.buffer)}static write(g){const et=g.systemFontInfo?SystemFontInfo.write(g.systemFontInfo):null,ot=g.cssFontInfo?CssFontInfo.write(g.cssFontInfo):null,ut=new TextEncoder,ct={};let dt=0;for(const Ht of Ls.strings)ct[Ht]=ut.encode(g[Ht]),dt+=4+ct[Ht].length;const ft=Ut(Ls,Hu)+4+dt+4+(et?et.byteLength:0)+4+(ot?ot.byteLength:0)+4+(g.data?g.data.length:0),St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;const jt=Ls.bools.length;let Ft=0,Bt=0;for(let Ht=0;Ht<jt;Ht++){const Yt=g[Ls.bools[Ht]];Ft|=(Yt===void 0?0:Yt?2:1)<<Bt,Bt+=2,(Bt===8||Ht===jt-1)&&(Tt.setUint8(Rt++,Ft),Ft=0,Bt=0)}assert(Rt===Ut(Ls,Hx),"FontInfo.write: Boolean properties offset mismatch");for(const Ht of Ls.numbers)Tt.setFloat64(Rt,g[Ht]),Rt+=8;if(assert(Rt===Ut(Ls,Ux),"FontInfo.write: Number properties offset mismatch"),g.bbox){Tt.setUint8(Rt++,4);for(const Ht of g.bbox)Tt.setInt16(Rt,Ht,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=2*4;if(assert(Rt===Ut(Ls,Gx),"FontInfo.write: BBox properties offset mismatch"),g.fontMatrix){Tt.setUint8(Rt++,6);for(const Ht of g.fontMatrix)Tt.setFloat64(Rt,Ht,!0),Rt+=8}else Tt.setUint8(Rt++,0),Rt+=8*6;if(assert(Rt===Ut(Ls,Wx),"FontInfo.write: FontMatrix properties offset mismatch"),g.defaultVMetrics){Tt.setUint8(Rt++,1);for(const Ht of g.defaultVMetrics)Tt.setInt16(Rt,Ht,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=3*2;assert(Rt===Ut(Ls,Hu),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Tt.setUint32(Ut(Ls,Hu),0),Rt+=4;for(const Ht of Ls.strings){const Yt=ct[Ht],zt=Yt.length;Tt.setUint32(Rt,zt),kt.set(Yt,Rt+4),Rt+=4+zt}if(Tt.setUint32(Ut(Ls,Hu),Rt-Ut(Ls,Hu)-4),!et)Tt.setUint32(Rt,0),Rt+=4;else{const Ht=et.byteLength;Tt.setUint32(Rt,Ht),assert(Rt+4+Ht<=St.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),kt.set(new Uint8Array(et),Rt+4),Rt+=4+Ht}if(!ot)Tt.setUint32(Rt,0),Rt+=4;else{const Ht=ot.byteLength;Tt.setUint32(Rt,Ht),assert(Rt+4+Ht<=St.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),kt.set(new Uint8Array(ot),Rt+4),Rt+=4+Ht}return g.data===void 0?(Tt.setUint32(Rt,0),Rt+=4):(Tt.setUint32(Rt,g.data.length),kt.set(g.data,Rt+4),Rt+=4+g.data.length),assert(Rt<=St.byteLength,"FontInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}};Hx=new WeakMap,Ux=new WeakMap,Gx=new WeakMap,Wx=new WeakMap,Hu=new WeakMap,mm=new WeakMap,H2=new WeakMap,Zs=new WeakMap,Uu=new WeakSet,Rp=function(g){assert(g<Ls.bools.length,"Invalid boolean index");const et=Math.floor(g/4),ot=g*2%8,ut=Ut(this,Zs).getUint8(et)>>ot&3;return ut===0?void 0:ut===2},qx=new WeakSet,uC=function(g){return assert(g<Ls.numbers.length,"Invalid number index"),Ut(this,Zs).getFloat64(Ut(Ls,Hx)+g*8)},G1=new WeakSet,j_=function(g){assert(g<Ls.strings.length,"Invalid string index");let et=Ut(Ls,Hu)+4;for(let ct=0;ct<g;ct++)et+=Ut(this,Zs).getUint32(et)+4;const ot=Ut(this,Zs).getUint32(et),ut=new Uint8Array(ot);return ut.set(new Uint8Array(Ut(this,mm),et+4,ot)),Ut(this,H2).decode(ut)},Ur(Ls,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Ur(Ls,"numbers",["ascent","defaultWidth","descent"]),Ur(Ls,"strings",["fallbackName","loadedName","mimetype","name"]),Rn(Ls,Hx,Math.ceil(Ls.bools.length*2/8)),Rn(Ls,Ux,Ut(Ls,Hx)+Ls.numbers.length*8),Rn(Ls,Gx,Ut(Ls,Ux)+1+2*4),Rn(Ls,Wx,Ut(Ls,Gx)+1+8*6),Rn(Ls,Hu,Ut(Ls,Wx)+1+2*3);let FontInfo=Ls;var U2,G2;class GlobalWorkerOptions{static get workerPort(){return Ut(this,U2)}static set workerPort(g){if(!(typeof Worker<"u"&&g instanceof Worker)&&g!==null)throw new Error("Invalid `workerPort` type.");In(this,U2,g)}static get workerSrc(){return Ut(this,G2)}static set workerSrc(g){if(typeof g!="string")throw new Error("Invalid `workerSrc` type.");In(this,G2,g)}}U2=new WeakMap,G2=new WeakMap,Rn(GlobalWorkerOptions,U2,null),Rn(GlobalWorkerOptions,G2,"");var Kx,W2;class Metadata{constructor({parsedData:g,rawData:et}){Rn(this,Kx,void 0);Rn(this,W2,void 0);In(this,Kx,g),In(this,W2,et)}getRaw(){return Ut(this,W2)}get(g){return Ut(this,Kx).get(g)??null}[Symbol.iterator](){return Ut(this,Kx).entries()}}Kx=new WeakMap,W2=new WeakMap;const INTERNAL=Symbol("INTERNAL");var q2,K2,Y2,Yx;class OptionalContentGroup{constructor(g,{name:et,intent:ot,usage:ut,rbGroups:ct}){Rn(this,q2,!1);Rn(this,K2,!1);Rn(this,Y2,!1);Rn(this,Yx,!0);In(this,q2,!!(g&RenderingIntentFlag.DISPLAY)),In(this,K2,!!(g&RenderingIntentFlag.PRINT)),this.name=et,this.intent=ot,this.usage=ut,this.rbGroups=ct}get visible(){if(Ut(this,Y2))return Ut(this,Yx);if(!Ut(this,Yx))return!1;const{print:g,view:et}=this.usage;return Ut(this,q2)?(et==null?void 0:et.viewState)!=="OFF":Ut(this,K2)?(g==null?void 0:g.printState)!=="OFF":!0}_setVisible(g,et,ot=!1){g!==INTERNAL&&unreachable("Internal method `_setVisible` called."),In(this,Y2,ot),In(this,Yx,et)}}q2=new WeakMap,K2=new WeakMap,Y2=new WeakMap,Yx=new WeakMap;var ay,na,Xx,Jx,X2,P3;class OptionalContentConfig{constructor(g,et=RenderingIntentFlag.DISPLAY){Rn(this,X2);Rn(this,ay,null);Rn(this,na,new Map);Rn(this,Xx,null);Rn(this,Jx,null);if(this.renderingIntent=et,this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,In(this,Jx,g.order);for(const ot of g.groups)Ut(this,na).set(ot.id,new OptionalContentGroup(et,ot));if(g.baseState==="OFF")for(const ot of Ut(this,na).values())ot._setVisible(INTERNAL,!1);for(const ot of g.on)Ut(this,na).get(ot)._setVisible(INTERNAL,!0);for(const ot of g.off)Ut(this,na).get(ot)._setVisible(INTERNAL,!1);In(this,Xx,this.getHash())}}isVisible(g){if(Ut(this,na).size===0)return!0;if(!g)return info("Optional content group not defined."),!0;if(g.type==="OCG")return Ut(this,na).has(g.id)?Ut(this,na).get(g.id).visible:(warn(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return Xn(this,X2,P3).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const et of g.ids){if(!Ut(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Ut(this,na).get(et).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const et of g.ids){if(!Ut(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Ut(this,na).get(et).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const et of g.ids){if(!Ut(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Ut(this,na).get(et).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const et of g.ids){if(!Ut(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Ut(this,na).get(et).visible)return!1}return!0}return warn(`Unknown optional content policy ${g.policy}.`),!0}return warn(`Unknown group type ${g.type}.`),!0}setVisibility(g,et=!0,ot=!0){var ct;const ut=Ut(this,na).get(g);if(!ut){warn(`Optional content group not found: ${g}`);return}if(ot&&et&&ut.rbGroups.length)for(const dt of ut.rbGroups)for(const ft of dt)ft!==g&&((ct=Ut(this,na).get(ft))==null||ct._setVisible(INTERNAL,!1,!0));ut._setVisible(INTERNAL,!!et,!0),In(this,ay,null)}setOCGState({state:g,preserveRB:et}){let ot;for(const ut of g){switch(ut){case"ON":case"OFF":case"Toggle":ot=ut;continue}const ct=Ut(this,na).get(ut);if(ct)switch(ot){case"ON":this.setVisibility(ut,!0,et);break;case"OFF":this.setVisibility(ut,!1,et);break;case"Toggle":this.setVisibility(ut,!ct.visible,et);break}}In(this,ay,null)}get hasInitialVisibility(){return Ut(this,Xx)===null||this.getHash()===Ut(this,Xx)}getOrder(){return Ut(this,na).size?Ut(this,Jx)?Ut(this,Jx).slice():[...Ut(this,na).keys()]:null}getGroup(g){return Ut(this,na).get(g)||null}getHash(){if(Ut(this,ay)!==null)return Ut(this,ay);const g=new MurmurHash3_64;for(const[et,ot]of Ut(this,na))g.update(`${et}:${ot.visible}`);return In(this,ay,g.hexdigest())}[Symbol.iterator](){return Ut(this,na).entries()}}ay=new WeakMap,na=new WeakMap,Xx=new WeakMap,Jx=new WeakMap,X2=new WeakSet,P3=function(g){const et=g.length;if(et<2)return!0;const ot=g[0];for(let ut=1;ut<et;ut++){const ct=g[ut];let dt;if(Array.isArray(ct))dt=Xn(this,X2,P3).call(this,ct);else if(Ut(this,na).has(ct))dt=Ut(this,na).get(ct).visible;else return warn(`Optional content group not found: ${ct}`),!0;switch(ot){case"And":if(!dt)return!1;break;case"Or":if(dt)return!0;break;case"Not":return!dt;default:return!0}}return ot==="And"};class PDFDataTransportStream{constructor(g,{disableRange:et=!1,disableStream:ot=!1}){assert(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ut,initialData:ct,progressiveDone:dt,contentDispositionFilename:ft}=g;if(this._queuedChunks=[],this._progressiveDone=dt,this._contentDispositionFilename=ft,(ct==null?void 0:ct.length)>0){const St=ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength?ct.buffer:new Uint8Array(ct).buffer;this._queuedChunks.push(St)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!ot,this._isRangeSupported=!et,this._contentLength=ut,this._fullRequestReader=null,this._rangeReaders=[],g.addRangeListener((St,kt)=>{this._onReceiveData({begin:St,chunk:kt})}),g.addProgressListener((St,kt)=>{this._onProgress({loaded:St,total:kt})}),g.addProgressiveReadListener(St=>{this._onReceiveData({chunk:St})}),g.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),g.transportReady()}_onReceiveData({begin:g,chunk:et}){const ot=et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength?et.buffer:new Uint8Array(et).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ot):this._queuedChunks.push(ot);else{const ut=this._rangeReaders.some(function(ct){return ct._begin!==g?!1:(ct._enqueue(ot),!0)});assert(ut,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var et,ot,ut,ct;g.total===void 0?(ot=(et=this._rangeReaders[0])==null?void 0:et.onProgress)==null||ot.call(et,{loaded:g.loaded}):(ct=(ut=this._fullRequestReader)==null?void 0:ut.onProgress)==null||ct.call(ut,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const et=this._rangeReaders.indexOf(g);et>=0&&this._rangeReaders.splice(et,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFDataTransportStreamRangeReader(this,g,et);return this._pdfDataRangeTransport.requestDataRange(g,et),this._rangeReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeReaders.slice(0))ot.cancel(g);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(g,et,ot=!1,ut=null){this._stream=g,this._done=ot||!1,this._filename=isPdfFile(ut)?ut:null,this._queuedChunks=et||[],this._loaded=0;for(const ct of this._queuedChunks)this._loaded+=ct.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(g,et,ot){this._stream=g,this._begin=et,this._end=ot,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(it){let g=!0,et=ot("filename\\*","i").exec(it);if(et){et=et[1];let Tt=ft(et);return Tt=unescape(Tt),Tt=St(Tt),Tt=kt(Tt),ct(Tt)}if(et=dt(it),et){const Tt=kt(et);return ct(Tt)}if(et=ot("filename","i").exec(it),et){et=et[1];let Tt=ft(et);return Tt=kt(Tt),ct(Tt)}function ot(Tt,Rt){return new RegExp("(?:^|;)\\s*"+Tt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Rt)}function ut(Tt,Rt){if(Tt){if(!/^[\x00-\xFF]+$/.test(Rt))return Rt;try{const jt=new TextDecoder(Tt,{fatal:!0}),Ft=stringToBytes(Rt);Rt=jt.decode(Ft),g=!1}catch{}}return Rt}function ct(Tt){return g&&/[\x80-\xff]/.test(Tt)&&(Tt=ut("utf-8",Tt),g&&(Tt=ut("iso-8859-1",Tt))),Tt}function dt(Tt){const Rt=[];let jt;const Ft=ot("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(jt=Ft.exec(Tt))!==null;){let[,Ht,Yt,zt]=jt;if(Ht=parseInt(Ht,10),Ht in Rt){if(Ht===0)break;continue}Rt[Ht]=[Yt,zt]}const Bt=[];for(let Ht=0;Ht<Rt.length&&Ht in Rt;++Ht){let[Yt,zt]=Rt[Ht];zt=ft(zt),Yt&&(zt=unescape(zt),Ht===0&&(zt=St(zt))),Bt.push(zt)}return Bt.join("")}function ft(Tt){if(Tt.startsWith('"')){const Rt=Tt.slice(1).split('\\"');for(let jt=0;jt<Rt.length;++jt){const Ft=Rt[jt].indexOf('"');Ft!==-1&&(Rt[jt]=Rt[jt].slice(0,Ft),Rt.length=jt+1),Rt[jt]=Rt[jt].replaceAll(/\\(.)/g,"$1")}Tt=Rt.join('"')}return Tt}function St(Tt){const Rt=Tt.indexOf("'");if(Rt===-1)return Tt;const jt=Tt.slice(0,Rt),Bt=Tt.slice(Rt+1).replace(/^[^']*'/,"");return ut(jt,Bt)}function kt(Tt){return!Tt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tt)?Tt:Tt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Rt,jt,Ft,Bt){if(Ft==="q"||Ft==="Q")return Bt=Bt.replaceAll("_"," "),Bt=Bt.replaceAll(/=([0-9a-fA-F]{2})/g,function(Ht,Yt){return String.fromCharCode(parseInt(Yt,16))}),ut(jt,Bt);try{Bt=atob(Bt)}catch{}return ut(jt,Bt)})}return""}function createHeaders(it,g){const et=new Headers;if(!it||!g||typeof g!="object")return et;for(const ot in g){const ut=g[ot];ut!==void 0&&et.append(ot,ut)}return et}function getResponseOrigin(it){var g;return((g=URL.parse(it))==null?void 0:g.origin)??null}function validateRangeRequestCapabilities({responseHeaders:it,isHttp:g,rangeChunkSize:et,disableRange:ot}){const ut={allowRangeRequests:!1,suggestedLength:void 0},ct=parseInt(it.get("Content-Length"),10);return!Number.isInteger(ct)||(ut.suggestedLength=ct,ct<=2*et)||ot||!g||it.get("Accept-Ranges")!=="bytes"||(it.get("Content-Encoding")||"identity")!=="identity"||(ut.allowRangeRequests=!0),ut}function extractFilenameFromHeader(it){const g=it.get("Content-Disposition");if(g){let et=getFilenameFromContentDispositionHeader(g);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if(isPdfFile(et))return et}return null}function createResponseError(it,g){return new ResponseException(`Unexpected server response (${it}) while retrieving PDF "${g}".`,it,it===404||it===0&&g.startsWith("file:"))}function validateResponseStatus(it){return it===200||it===206}function createFetchOptions(it,g,et){return{method:"GET",headers:it,signal:et.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(it){return it instanceof Uint8Array?it.buffer:it instanceof ArrayBuffer?it:(warn(`getArrayBuffer - unexpected data format: ${it}`),new Uint8Array(it).buffer)}class PDFFetchStream{constructor(g){Ur(this,"_responseOrigin",null);this.source=g,this.isHttp=/^https?:/i.test(g.url),this.headers=createHeaders(this.isHttp,g.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFFetchStreamRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFFetchStreamReader{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const et=g.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange;const ot=new Headers(g.headers),ut=et.url;fetch(ut,createFetchOptions(ot,this._withCredentials,this._abortController)).then(ct=>{if(g._responseOrigin=getResponseOrigin(ct.url),!validateResponseStatus(ct.status))throw createResponseError(ct.status,ut);this._reader=ct.body.getReader(),this._headersCapability.resolve();const dt=ct.headers,{allowRangeRequests:ft,suggestedLength:St}=validateRangeRequestCapabilities({responseHeaders:dt,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=St||this._contentLength,this._filename=extractFilenameFromHeader(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(g,et,ot){this._stream=g,this._reader=null,this._loaded=0;const ut=g.source;this._withCredentials=ut.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ut.disableStream,this._abortController=new AbortController;const ct=new Headers(g.headers);ct.append("Range",`bytes=${et}-${ot-1}`);const dt=ut.url;fetch(dt,createFetchOptions(ct,this._withCredentials,this._abortController)).then(ft=>{const St=getResponseOrigin(ft.url);if(St!==g._responseOrigin)throw new Error(`Expected range response-origin "${St}" to match "${g._responseOrigin}".`);if(!validateResponseStatus(ft.status))throw createResponseError(ft.status,dt);this._readCapability.resolve(),this._reader=ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(it){const g=it.response;return typeof g!="string"?g:stringToBytes(g).buffer}class NetworkManager{constructor({url:g,httpHeaders:et,withCredentials:ot}){Ur(this,"_responseOrigin",null);this.url=g,this.isHttp=/^https?:/i.test(g),this.headers=createHeaders(this.isHttp,et),this.withCredentials=ot||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(g){const et=new XMLHttpRequest,ot=this.currXhrId++,ut=this.pendingRequests[ot]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const[ct,dt]of this.headers)et.setRequestHeader(ct,dt);return this.isHttp&&"begin"in g&&"end"in g?(et.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),ut.expectedStatus=PARTIAL_CONTENT_RESPONSE):ut.expectedStatus=OK_RESPONSE,et.responseType="arraybuffer",assert(g.onError,"Expected `onError` callback to be provided."),et.onerror=()=>{g.onError(et.status)},et.onreadystatechange=this.onStateChange.bind(this,ot),et.onprogress=this.onProgress.bind(this,ot),ut.onHeadersReceived=g.onHeadersReceived,ut.onDone=g.onDone,ut.onError=g.onError,ut.onProgress=g.onProgress,et.send(null),ot}onProgress(g,et){var ut;const ot=this.pendingRequests[g];ot&&((ut=ot.onProgress)==null||ut.call(ot,et))}onStateChange(g,et){const ot=this.pendingRequests[g];if(!ot)return;const ut=ot.xhr;if(ut.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),ut.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],ut.status===0&&this.isHttp){ot.onError(ut.status);return}const ct=ut.status||OK_RESPONSE;if(!(ct===OK_RESPONSE&&ot.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ct!==ot.expectedStatus){ot.onError(ut.status);return}const ft=network_getArrayBuffer(ut);if(ct===PARTIAL_CONTENT_RESPONSE){const St=ut.getResponseHeader("Content-Range"),kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(St);kt?ot.onDone({begin:parseInt(kt[1],10),chunk:ft}):(warn('Missing or invalid "Content-Range" header.'),ot.onError(0))}else ft?ot.onDone({begin:0,chunk:ft}):ot.onError(ut.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const et=this.pendingRequests[g].xhr;delete this.pendingRequests[g],et.abort()}}class PDFNetworkStream{constructor(g){this._source=g,this._manager=new NetworkManager(g),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const et=this._rangeRequestReaders.indexOf(g);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(g,et){const ot=new PDFNetworkStreamRangeRequestReader(this._manager,g,et);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNetworkStreamFullRequestReader{constructor(g,et){this._manager=g,this._url=et.url,this._fullRequestId=g.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,et=this._manager.getRequestXhr(g);this._manager._responseOrigin=getResponseOrigin(et.responseURL);const ot=et.getAllResponseHeaders(),ut=new Headers(ot?ot.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(ft=>{const[St,...kt]=ft.split(": ");return[St,kt.join(": ")]}):[]),{allowRangeRequests:ct,suggestedLength:dt}=validateRangeRequestCapabilities({responseHeaders:ut,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ct&&(this._isRangeSupported=!0),this._contentLength=dt||this._contentLength,this._filename=extractFilenameFromHeader(ut),this._isRangeSupported&&this._manager.abortRequest(g),this._headersCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=createResponseError(g,this._url),this._headersCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var et;(et=this.onProgress)==null||et.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersCapability.reject(g);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(g,et,ot){this._manager=g,this._url=g.url,this._requestId=g.request({begin:et,end:ot,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var et;const g=getResponseOrigin((et=this._manager.getRequestXhr(this._requestId))==null?void 0:et.responseURL);g!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${g}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const et=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError??(this._storedError=createResponseError(g,this._url));for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(it){if(urlRegex.test(it))return new URL(it);const g=process.getBuiltinModule("url");return new URL(g.pathToFileURL(it))}class PDFNodeStream{constructor(g){this.source=g,this.url=parseUrlOrPath(g.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFNodeStreamFsRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNodeStreamFsFullReader{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=g.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const ot=process.getBuiltinModule("fs");ot.promises.lstat(this._url).then(ut=>{this._contentLength=ut.size,this._setReadableStream(ot.createReadStream(this._url)),this._headersCapability.resolve()},ut=>{ut.code==="ENOENT"&&(ut=createResponseError(0,this._url.href)),this._storedError=ut,this._headersCapability.reject(ut)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(g,et,ot){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ut=g.source;this._isStreamingSupported=!ut.disableStream;const ct=process.getBuiltinModule("fs");this._setReadableStream(ct.createReadStream(this._url,{start:et,end:ot-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var Gu,J2,R3;class PDFObjects{constructor(){Rn(this,J2);Rn(this,Gu,Object.create(null))}get(g,et=null){if(et){const ut=Xn(this,J2,R3).call(this,g);return ut.promise.then(()=>et(ut.data)),null}const ot=Ut(this,Gu)[g];if(!ot||ot.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${g}.`);return ot.data}has(g){const et=Ut(this,Gu)[g];return!!et&&et.data!==INITIAL_DATA}delete(g){const et=Ut(this,Gu)[g];return!et||et.data===INITIAL_DATA?!1:(delete Ut(this,Gu)[g],!0)}resolve(g,et=null){const ot=Xn(this,J2,R3).call(this,g);ot.data=et,ot.resolve()}clear(){var g;for(const et in Ut(this,Gu)){const{data:ot}=Ut(this,Gu)[et];(g=ot==null?void 0:ot.bitmap)==null||g.close()}In(this,Gu,Object.create(null))}*[Symbol.iterator](){for(const g in Ut(this,Gu)){const{data:et}=Ut(this,Gu)[g];et!==INITIAL_DATA&&(yield[g,et])}}}Gu=new WeakMap,J2=new WeakSet,R3=function(g){var et;return(et=Ut(this,Gu))[g]||(et[g]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var MR,oy,Pu,Q2,Z2,W1,s0,eS,tS,q1,Qx,Zx,ly,eE,nS,tE,K1,rS,iS,Co,nE,Y1,sS,uy,rE,gA,v4,yA,x4,aS,N3,iE,cC,oS,M3,vA,b4,xA,E4;let TextLayer$1=(Co=class{constructor({textContentSource:g,container:et,viewport:ot}){Rn(this,gA);Rn(this,yA);Rn(this,aS);Rn(this,oy,Promise.withResolvers());Rn(this,Pu,null);Rn(this,Q2,!1);Rn(this,Z2,!!((MR=globalThis.FontInspector)!=null&&MR.enabled));Rn(this,W1,null);Rn(this,s0,null);Rn(this,eS,0);Rn(this,tS,0);Rn(this,q1,null);Rn(this,Qx,null);Rn(this,Zx,0);Rn(this,ly,0);Rn(this,eE,Object.create(null));Rn(this,nS,[]);Rn(this,tE,null);Rn(this,K1,[]);Rn(this,rS,new WeakMap);Rn(this,iS,null);var St;if(g instanceof ReadableStream)In(this,tE,g);else if(typeof g=="object")In(this,tE,new ReadableStream({start(kt){kt.enqueue(g),kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');In(this,Pu,In(this,Qx,et)),In(this,ly,ot.scale*OutputScale.pixelRatio),In(this,Zx,ot.rotation),In(this,s0,{div:null,properties:null,ctx:null});const{pageWidth:ut,pageHeight:ct,pageX:dt,pageY:ft}=ot.rawDims;In(this,iS,[1,0,0,-1,-dt,ft+ct]),In(this,tS,ut),In(this,eS,ct),Xn(St=Co,vA,b4).call(St),setLayerDimensions(et,ot),Ut(this,oy).promise.finally(()=>{Ut(Co,rE).delete(this),In(this,s0,null),In(this,eE,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:g,isFirefox:et}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${g&&et?"Calibri, ":""}sans-serif`],["monospace",`${g&&et?"Lucida Console, ":""}monospace`]]))}render(){const g=()=>{Ut(this,q1).read().then(({value:et,done:ot})=>{if(ot){Ut(this,oy).resolve();return}Ut(this,W1)??In(this,W1,et.lang),Object.assign(Ut(this,eE),et.styles),Xn(this,gA,v4).call(this,et.items),g()},Ut(this,oy).reject)};return In(this,q1,Ut(this,tE).getReader()),Ut(Co,rE).add(this),g(),Ut(this,oy).promise}update({viewport:g,onBefore:et=null}){var ct;const ot=g.scale*OutputScale.pixelRatio,ut=g.rotation;if(ut!==Ut(this,Zx)&&(et==null||et(),In(this,Zx,ut),setLayerDimensions(Ut(this,Qx),{rotation:ut})),ot!==Ut(this,ly)){et==null||et(),In(this,ly,ot);const dt={div:null,properties:null,ctx:Xn(ct=Co,iE,cC).call(ct,Ut(this,W1))};for(const ft of Ut(this,K1))dt.properties=Ut(this,rS).get(ft),dt.div=ft,Xn(this,aS,N3).call(this,dt)}}cancel(){var et;const g=new AbortException("TextLayer task cancelled.");(et=Ut(this,q1))==null||et.cancel(g).catch(()=>{}),In(this,q1,null),Ut(this,oy).reject(g)}get textDivs(){return Ut(this,K1)}get textContentItemsStr(){return Ut(this,nS)}static cleanup(){if(!(Ut(this,rE).size>0)){Ut(this,nE).clear();for(const{canvas:g}of Ut(this,Y1).values())g.remove();Ut(this,Y1).clear()}}},oy=new WeakMap,Pu=new WeakMap,Q2=new WeakMap,Z2=new WeakMap,W1=new WeakMap,s0=new WeakMap,eS=new WeakMap,tS=new WeakMap,q1=new WeakMap,Qx=new WeakMap,Zx=new WeakMap,ly=new WeakMap,eE=new WeakMap,nS=new WeakMap,tE=new WeakMap,K1=new WeakMap,rS=new WeakMap,iS=new WeakMap,nE=new WeakMap,Y1=new WeakMap,sS=new WeakMap,uy=new WeakMap,rE=new WeakMap,gA=new WeakSet,v4=function(g){var ut,ct;if(Ut(this,Q2))return;(ct=Ut(this,s0)).ctx??(ct.ctx=Xn(ut=Co,iE,cC).call(ut,Ut(this,W1)));const et=Ut(this,K1),ot=Ut(this,nS);for(const dt of g){if(et.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),In(this,Q2,!0);return}if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ft=Ut(this,Pu);In(this,Pu,document.createElement("span")),Ut(this,Pu).classList.add("markedContent"),dt.id&&Ut(this,Pu).setAttribute("id",`${dt.id}`),ft.append(Ut(this,Pu))}else dt.type==="endMarkedContent"&&In(this,Pu,Ut(this,Pu).parentNode);continue}ot.push(dt.str),Xn(this,yA,x4).call(this,dt)}},yA=new WeakSet,x4=function(g){var Ht;const et=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};Ut(this,K1).push(et);const ut=Util$1.transform(Ut(this,iS),g.transform);let ct=Math.atan2(ut[1],ut[0]);const dt=Ut(this,eE)[g.fontName];dt.vertical&&(ct+=Math.PI/2);let ft=Ut(this,Z2)&&dt.fontSubstitution||dt.fontFamily;ft=Co.fontFamilyMap.get(ft)||ft;const St=Math.hypot(ut[2],ut[3]),kt=St*Xn(Ht=Co,xA,E4).call(Ht,ft,dt,Ut(this,W1));let Tt,Rt;ct===0?(Tt=ut[4],Rt=ut[5]-kt):(Tt=ut[4]+kt*Math.sin(ct),Rt=ut[5]-kt*Math.cos(ct));const jt="calc(var(--total-scale-factor) *",Ft=et.style;Ut(this,Pu)===Ut(this,Qx)?(Ft.left=`${(100*Tt/Ut(this,tS)).toFixed(2)}%`,Ft.top=`${(100*Rt/Ut(this,eS)).toFixed(2)}%`):(Ft.left=`${jt}${Tt.toFixed(2)}px)`,Ft.top=`${jt}${Rt.toFixed(2)}px)`),Ft.fontSize=`${jt}${(Ut(Co,uy)*St).toFixed(2)}px)`,Ft.fontFamily=ft,ot.fontSize=St,et.setAttribute("role","presentation"),et.textContent=g.str,et.dir=g.dir,Ut(this,Z2)&&(et.dataset.fontName=dt.fontSubstitutionLoadedName||g.fontName),ct!==0&&(ot.angle=ct*(180/Math.PI));let Bt=!1;if(g.str.length>1)Bt=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const Yt=Math.abs(g.transform[0]),zt=Math.abs(g.transform[3]);Yt!==zt&&Math.max(Yt,zt)/Math.min(Yt,zt)>1.5&&(Bt=!0)}if(Bt&&(ot.canvasWidth=dt.vertical?g.height:g.width),Ut(this,rS).set(et,ot),Ut(this,s0).div=et,Ut(this,s0).properties=ot,Xn(this,aS,N3).call(this,Ut(this,s0)),ot.hasText&&Ut(this,Pu).append(et),ot.hasEOL){const Yt=document.createElement("br");Yt.setAttribute("role","presentation"),Ut(this,Pu).append(Yt)}},aS=new WeakSet,N3=function(g){var ft;const{div:et,properties:ot,ctx:ut}=g,{style:ct}=et;let dt="";if(Ut(Co,uy)>1&&(dt=`scale(${1/Ut(Co,uy)})`),ot.canvasWidth!==0&&ot.hasText){const{fontFamily:St}=ct,{canvasWidth:kt,fontSize:Tt}=ot;Xn(ft=Co,oS,M3).call(ft,ut,Tt*Ut(this,ly),St);const{width:Rt}=ut.measureText(et.textContent);Rt>0&&(dt=`scaleX(${kt*Ut(this,ly)/Rt}) ${dt}`)}ot.angle!==0&&(dt=`rotate(${ot.angle}deg) ${dt}`),dt.length>0&&(ct.transform=dt)},iE=new WeakSet,cC=function(g=null){let et=Ut(this,Y1).get(g||(g=""));if(!et){const ot=document.createElement("canvas");ot.className="hiddenCanvasElement",ot.lang=g,document.body.append(ot),et=ot.getContext("2d",{alpha:!1,willReadFrequently:!0}),Ut(this,Y1).set(g,et),Ut(this,sS).set(et,{size:0,family:""})}return et},oS=new WeakSet,M3=function(g,et,ot){const ut=Ut(this,sS).get(g);et===ut.size&&ot===ut.family||(g.font=`${et}px ${ot}`,ut.size=et,ut.family=ot)},vA=new WeakSet,b4=function(){if(Ut(this,uy)!==null)return;const g=document.createElement("div");g.style.opacity=0,g.style.lineHeight=1,g.style.fontSize="1px",g.style.position="absolute",g.textContent="X",document.body.append(g),In(this,uy,g.getBoundingClientRect().height),g.remove()},xA=new WeakSet,E4=function(g,et,ot){const ut=Ut(this,nE).get(g);if(ut)return ut;const ct=Xn(this,iE,cC).call(this,ot);ct.canvas.width=ct.canvas.height=DEFAULT_FONT_SIZE,Xn(this,oS,M3).call(this,ct,DEFAULT_FONT_SIZE,g);const dt=ct.measureText(""),ft=dt.fontBoundingBoxAscent,St=Math.abs(dt.fontBoundingBoxDescent);ct.canvas.width=ct.canvas.height=0;let kt=.8;return ft?kt=ft/(ft+St):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),et.ascent?kt=et.ascent:et.descent&&(kt=1+et.descent)),Ut(this,nE).set(g,kt),kt},Rn(Co,iE),Rn(Co,oS),Rn(Co,vA),Rn(Co,xA),Rn(Co,nE,new Map),Rn(Co,Y1,new Map),Rn(Co,sS,new WeakMap),Rn(Co,uy,null),Rn(Co,rE,new Set),Co);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(it={}){typeof it=="string"||it instanceof URL?it={url:it}:(it instanceof ArrayBuffer||ArrayBuffer.isView(it))&&(it={data:it});const g=new PDFDocumentLoadingTask,{docId:et}=g,ot=it.url?getUrlProp(it.url):null,ut=it.data?getDataProp(it.data):null,ct=it.httpHeaders||null,dt=it.withCredentials===!0,ft=it.password??null,St=it.range instanceof PDFDataRangeTransport$1?it.range:null,kt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:2**16;let Tt=it.worker instanceof PDFWorker?it.worker:null;const Rt=it.verbosity,jt=typeof it.docBaseUrl=="string"&&!isDataScheme(it.docBaseUrl)?it.docBaseUrl:null,Ft=getFactoryUrlProp(it.cMapUrl),Bt=it.cMapPacked!==!1,Ht=it.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Yt=getFactoryUrlProp(it.iccUrl),zt=getFactoryUrlProp(it.standardFontDataUrl),Kt=it.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),en=getFactoryUrlProp(it.wasmUrl),tn=it.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),on=it.stopAtErrors!==!0,an=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,un=it.isEvalSupported!==!1,dn=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!isNodeJS,Sn=typeof it.isImageDecoderSupported=="boolean"?it.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),mn=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,bn=typeof it.disableFontFace=="boolean"?it.disableFontFace:isNodeJS,En=it.fontExtraProperties===!0,kn=it.enableXfa===!0,Pn=it.ownerDocument||globalThis.document,Ln=it.disableRange===!0,gn=it.disableStream===!0,Mn=it.disableAutoFetch===!0,yn=it.pdfBug===!0,vn=it.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),On=it.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),Cn=it.enableHWA===!0,Vn=it.useWasm!==!1,Qn=St?St.length:it.length??NaN,ir=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!isNodeJS&&!bn,ar=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:!!(Ht===DOMCMapReaderFactory&&Kt===DOMStandardFontDataFactory&&tn===DOMWasmFactory&&Ft&&zt&&en&&isValidFetchUrl(Ft,document.baseURI)&&isValidFetchUrl(zt,document.baseURI)&&isValidFetchUrl(en,document.baseURI)),rr=null;setVerbosityLevel(Rt);const hr={canvasFactory:new vn({ownerDocument:Pn,enableHWA:Cn}),filterFactory:new On({docId:et,ownerDocument:Pn}),cMapReaderFactory:ar?null:new Ht({baseUrl:Ft,isCompressed:Bt}),standardFontDataFactory:ar?null:new Kt({baseUrl:zt}),wasmFactory:ar?null:new tn({baseUrl:en})};Tt||(Tt=PDFWorker.create({verbosity:Rt,port:GlobalWorkerOptions.workerPort}),g._worker=Tt);const _r={docId:et,apiVersion:"5.4.296",data:ut,password:ft,disableAutoFetch:Mn,rangeChunkSize:kt,length:Qn,docBaseUrl:jt,enableXfa:kn,evaluatorOptions:{maxImageSize:an,disableFontFace:bn,ignoreErrors:on,isEvalSupported:un,isOffscreenCanvasSupported:dn,isImageDecoderSupported:Sn,canvasMaxAreaInBytes:mn,fontExtraProperties:En,useSystemFonts:ir,useWasm:Vn,useWorkerFetch:ar,cMapUrl:Ft,iccUrl:Yt,standardFontDataUrl:zt,wasmUrl:en}},xr={ownerDocument:Pn,pdfBug:yn,styleElement:rr,loadingParams:{disableAutoFetch:Mn,enableXfa:kn}};return Tt.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const wr=Tt.messageHandler.sendWithPromise("GetDocRequest",_r,ut?[ut.buffer]:null);let Ir;if(St)Ir=new PDFDataTransportStream(St,{disableRange:Ln,disableStream:gn});else if(!ut){if(!ot)throw new Error("getDocument - no `url` parameter provided.");const _i=isValidFetchUrl(ot)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;Ir=new _i({url:ot,length:Qn,httpHeaders:ct,withCredentials:dt,rangeChunkSize:kt,disableRange:Ln,disableStream:gn})}return wr.then(_i=>{if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const Br=new MessageHandler(et,_i,Tt.port),Fr=new WorkerTransport(Br,g,Ir,xr,hr,Cn);g._transport=Fr,Br.send("Ready",null)})}).catch(g._capability.reject),g}var bA;const EA=class EA{constructor(){Ur(this,"_capability",Promise.withResolvers());Ur(this,"_transport",null);Ur(this,"_worker",null);Ur(this,"docId",`d${Ko(EA,bA)._++}`);Ur(this,"destroyed",!1);Ur(this,"onPassword",null);Ur(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var g,et,ot,ut;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((et=this._transport)==null?void 0:et.destroy())}catch(ct){throw(ot=this._worker)!=null&&ot.port&&delete this._worker._pendingDestroy,ct}this._transport=null,(ut=this._worker)==null||ut.destroy(),this._worker=null}async getData(){return this._transport.getData()}};bA=new WeakMap,Rn(EA,bA,0);let PDFDocumentLoadingTask=EA;var X1,lS,uS,cS,hS,IR;let PDFDataRangeTransport$1=(IR=class{constructor(g,et,ot=!1,ut=null){Rn(this,X1,Promise.withResolvers());Rn(this,lS,[]);Rn(this,uS,[]);Rn(this,cS,[]);Rn(this,hS,[]);this.length=g,this.initialData=et,this.progressiveDone=ot,this.contentDispositionFilename=ut}addRangeListener(g){Ut(this,hS).push(g)}addProgressListener(g){Ut(this,cS).push(g)}addProgressiveReadListener(g){Ut(this,uS).push(g)}addProgressiveDoneListener(g){Ut(this,lS).push(g)}onDataRange(g,et){for(const ot of Ut(this,hS))ot(g,et)}onDataProgress(g,et){Ut(this,X1).promise.then(()=>{for(const ot of Ut(this,cS))ot(g,et)})}onDataProgressiveRead(g){Ut(this,X1).promise.then(()=>{for(const et of Ut(this,uS))et(g)})}onDataProgressiveDone(){Ut(this,X1).promise.then(()=>{for(const g of Ut(this,lS))g()})}transportReady(){Ut(this,X1).resolve()}requestDataRange(g,et){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},X1=new WeakMap,lS=new WeakMap,uS=new WeakMap,cS=new WeakMap,hS=new WeakMap,IR);class PDFDocumentProxy{constructor(g,et){this._pdfInfo=g,this._transport=et}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(g,et){return this._transport.getAnnotationsByType(g,et)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getOptionalContentConfig(et)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(g){return this._transport.cachedPageNumber(g)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var a0,J1,F_;class PDFPageProxy{constructor(g,et,ot,ut=!1){Rn(this,J1);Rn(this,a0,!1);this._pageIndex=g,this._pageInfo=et,this._transport=ot,this._stats=ut?new StatTimer:null,this._pdfBug=ut,this.commonObjs=ot.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:et=this.rotate,offsetX:ot=0,offsetY:ut=0,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ut,dontFlip:ct})}getAnnotations({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,et)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,canvas:et=g.canvas,viewport:ot,intent:ut="display",annotationMode:ct=AnnotationMode.ENABLE,transform:dt=null,background:ft=null,optionalContentConfigPromise:St=null,annotationCanvasMap:kt=null,pageColors:Tt=null,printAnnotationStorage:Rt=null,isEditing:jt=!1,recordOperations:Ft=!1,operationsFilter:Bt=null}){var Sn,mn,bn;(Sn=this._stats)==null||Sn.time("Overall");const Ht=this._transport.getRenderingIntent(ut,ct,Rt,jt),{renderingIntent:Yt,cacheKey:zt}=Ht;In(this,a0,!1),St||(St=this._transport.getOptionalContentConfig(Yt));let Kt=this._intentStates.get(zt);Kt||(Kt=Object.create(null),this._intentStates.set(zt,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const en=!!(Yt&RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=Promise.withResolvers(),Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(mn=this._stats)==null||mn.time("Page Request"),this._pumpOperatorList(Ht));const tn=!!(this._pdfBug&&((bn=globalThis.StepperManager)!=null&&bn.enabled)),on=!this.recordedBBoxes&&(Ft||tn),an=En=>{var kn,Pn;if(Kt.renderTasks.delete(un),on){const Ln=(kn=un.gfx)==null?void 0:kn.dependencyTracker.take();Ln&&(un.stepper&&un.stepper.setOperatorBBoxes(Ln,un.gfx.dependencyTracker.takeDebugMetadata()),Ft&&(this.recordedBBoxes=Ln))}en&&In(this,a0,!0),Xn(this,J1,F_).call(this),En?(un.capability.reject(En),this._abortOperatorList({intentState:Kt,reason:En instanceof Error?En:new Error(En)})):un.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Pn=globalThis.Stats)!=null&&Pn.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},un=new InternalRenderTask({callback:an,params:{canvas:et,canvasContext:g,dependencyTracker:on?new CanvasDependencyTracker(et,Kt.operatorList.length,tn):null,viewport:ot,transform:dt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!en,pdfBug:this._pdfBug,pageColors:Tt,enableHWA:this._transport.enableHWA,operationsFilter:Bt});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(un);const dn=un.task;return Promise.all([Kt.displayReadyCapability.promise,St]).then(([En,kn])=>{var Pn;if(this.destroyed){an();return}if((Pn=this._stats)==null||Pn.time("Rendering"),!(kn.renderingIntent&Yt))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");un.initializeGraphics({transparency:En,optionalContentConfig:kn}),un.operatorListChanged()}).catch(an),dn}getOperatorList({intent:g="display",annotationMode:et=AnnotationMode.ENABLE,printAnnotationStorage:ot=null,isEditing:ut=!1}={}){var kt;function ct(){ft.operatorList.lastChunk&&(ft.opListReadCapability.resolve(ft.operatorList),ft.renderTasks.delete(St))}const dt=this._transport.getRenderingIntent(g,et,ot,ut,!0);let ft=this._intentStates.get(dt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(dt.cacheKey,ft));let St;return ft.opListReadCapability||(St=Object.create(null),St.operatorListChanged=ct,ft.opListReadCapability=Promise.withResolvers(),(ft.renderTasks||(ft.renderTasks=new Set)).add(St),ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(kt=this._stats)==null||kt.time("Page Request"),this._pumpOperatorList(dt)),ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:et===!0},{highWaterMark:100,size(ut){return ut.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(ot=>XfaText.textContent(ot));const et=this.streamTextContent(g);return new Promise(function(ot,ut){function ct(){dt.read().then(function({value:St,done:kt}){if(kt){ot(ft);return}ft.lang??(ft.lang=St.lang),Object.assign(ft.styles,St.styles),ft.items.push(...St.items),ct()},ut)}const dt=et.getReader(),ft={items:[],styles:Object.create(null),lang:null};ct()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const et of this._intentStates.values())if(this._abortOperatorList({intentState:et,reason:new Error("Page was destroyed."),force:!0}),!et.opListReadCapability)for(const ot of et.renderTasks)g.push(ot.completed),ot.cancel();return this.objs.clear(),In(this,a0,!1),Promise.all(g)}cleanup(g=!1){In(this,a0,!0);const et=Xn(this,J1,F_).call(this);return g&&et&&this._stats&&(this._stats=new StatTimer),et}_startRenderPage(g,et){var ut,ct;const ot=this._intentStates.get(et);ot&&((ut=this._stats)==null||ut.timeEnd("Page Request"),(ct=ot.displayReadyCapability)==null||ct.resolve(g))}_renderPageChunk(g,et){for(let ot=0,ut=g.length;ot<ut;ot++)et.operatorList.fnArray.push(g.fnArray[ot]),et.operatorList.argsArray.push(g.argsArray[ot]);et.operatorList.lastChunk=g.lastChunk,et.operatorList.separateAnnots=g.separateAnnots;for(const ot of et.renderTasks)ot.operatorListChanged();g.lastChunk&&Xn(this,J1,F_).call(this)}_pumpOperatorList({renderingIntent:g,cacheKey:et,annotationStorageSerializable:ot,modifiedIds:ut}){const{map:ct,transfer:dt}=ot,St=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:et,annotationStorage:ct,modifiedIds:ut},dt).getReader(),kt=this._intentStates.get(et);kt.streamReader=St;const Tt=()=>{St.read().then(({value:Rt,done:jt})=>{if(jt){kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Rt,kt),Tt())},Rt=>{if(kt.streamReader=null,!this._transport.destroyed){if(kt.operatorList){kt.operatorList.lastChunk=!0;for(const jt of kt.renderTasks)jt.operatorListChanged();Xn(this,J1,F_).call(this)}if(kt.displayReadyCapability)kt.displayReadyCapability.reject(Rt);else if(kt.opListReadCapability)kt.opListReadCapability.reject(Rt);else throw Rt}})};Tt()}_abortOperatorList({intentState:g,reason:et,force:ot=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!ot){if(g.renderTasks.size>0)return;if(et instanceof RenderingCancelledException){let ut=RENDERING_CANCELLED_TIMEOUT;et.extraDelay>0&&et.extraDelay<1e3&&(ut+=et.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:et,force:!0})},ut);return}}if(g.streamReader.cancel(new AbortException(et.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ut,ct]of this._intentStates)if(ct===g){this._intentStates.delete(ut);break}this.cleanup()}}}get stats(){return this._stats}}a0=new WeakMap,J1=new WeakSet,F_=function(){if(!Ut(this,a0)||this.destroyed)return!1;for(const{renderTasks:g,operatorList:et}of this._intentStates.values())if(g.size>0||!et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),In(this,a0,!1),!0};var cy,Fp,o0,Q1,_A,Z1,ev,sE,hC,SA,_4,wA,S4,tv,$_,aE,dC;const Eo=class Eo{constructor({name:g=null,port:et=null,verbosity:ot=getVerbosityLevel()}={}){Rn(this,sE);Rn(this,SA);Rn(this,wA);Rn(this,tv);Rn(this,cy,Promise.withResolvers());Rn(this,Fp,null);Rn(this,o0,null);Rn(this,Q1,null);if(this.name=g,this.destroyed=!1,this.verbosity=ot,et){if(Ut(Eo,ev).has(et))throw new Error("Cannot use more than one PDFWorker per port.");Ut(Eo,ev).set(et,this),Xn(this,SA,_4).call(this,et)}else Xn(this,wA,S4).call(this)}get promise(){return Ut(this,cy).promise}get port(){return Ut(this,o0)}get messageHandler(){return Ut(this,Fp)}destroy(){var g,et;this.destroyed=!0,(g=Ut(this,Q1))==null||g.terminate(),In(this,Q1,null),Ut(Eo,ev).delete(Ut(this,o0)),In(this,o0,null),(et=Ut(this,Fp))==null||et.destroy(),In(this,Fp,null)}static create(g){const et=Ut(this,ev).get(g==null?void 0:g.port);if(et){if(et._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return et}return new Eo(g)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Ut(this,aE,dC)?Ut(this,aE,dC):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};cy=new WeakMap,Fp=new WeakMap,o0=new WeakMap,Q1=new WeakMap,_A=new WeakMap,Z1=new WeakMap,ev=new WeakMap,sE=new WeakSet,hC=function(){Ut(this,cy).resolve(),Ut(this,Fp).send("configure",{verbosity:this.verbosity})},SA=new WeakSet,_4=function(g){In(this,o0,g),In(this,Fp,new MessageHandler("main","worker",g)),Ut(this,Fp).on("ready",()=>{}),Xn(this,sE,hC).call(this)},wA=new WeakSet,S4=function(){if(Ut(Eo,Z1)||Ut(Eo,aE,dC)){Xn(this,tv,$_).call(this);return}let{workerSrc:g}=Eo;try{Eo._isSameOrigin(window.location,g)||(g=Eo._createCDNWrapper(new URL(g,window.location).href));const et=new Worker(g,{type:"module"}),ot=new MessageHandler("main","worker",et),ut=()=>{ct.abort(),ot.destroy(),et.terminate(),this.destroyed?Ut(this,cy).reject(new Error("Worker was destroyed")):Xn(this,tv,$_).call(this)},ct=new AbortController;et.addEventListener("error",()=>{Ut(this,Q1)||ut()},{signal:ct.signal}),ot.on("test",ft=>{if(ct.abort(),this.destroyed||!ft){ut();return}In(this,Fp,ot),In(this,o0,et),In(this,Q1,et),Xn(this,sE,hC).call(this)}),ot.on("ready",ft=>{if(ct.abort(),this.destroyed){ut();return}try{dt()}catch{Xn(this,tv,$_).call(this)}});const dt=()=>{const ft=new Uint8Array;ot.send("test",ft,[ft.buffer])};dt();return}catch{info("The worker has been disabled.")}Xn(this,tv,$_).call(this)},tv=new WeakSet,$_=function(){Ut(Eo,Z1)||(warn("Setting up fake worker."),In(Eo,Z1,!0)),Eo._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){Ut(this,cy).reject(new Error("Worker was destroyed"));return}const et=new LoopbackPort;In(this,o0,et);const ot=`fake${Ko(Eo,_A)._++}`,ut=new MessageHandler(ot+"_worker",ot,et);g.setup(ut,et),In(this,Fp,new MessageHandler(ot,ot+"_worker",et)),Xn(this,sE,hC).call(this)}).catch(g=>{Ut(this,cy).reject(new Error(`Setting up fake worker failed: "${g.message}".`))})},aE=new WeakSet,dC=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},Rn(Eo,aE),Rn(Eo,_A,0),Rn(Eo,Z1,!1),Rn(Eo,ev,new WeakMap),isNodeJS&&(In(Eo,Z1,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Eo._isSameOrigin=(g,et)=>{const ot=URL.parse(g);if(!(ot!=null&&ot.origin)||ot.origin==="null")return!1;const ut=new URL(et,ot);return ot.origin===ut.origin},Eo._createCDNWrapper=g=>{const et=`await import("${g}");`;return URL.createObjectURL(new Blob([et],{type:"text/javascript"}))},Eo.fromPort=g=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Eo.create(g)};let PDFWorker=Eo;var l0,gm,oE,lE,u0,nv,B_;class WorkerTransport{constructor(g,et,ot,ut,ct,dt){Rn(this,nv);Rn(this,l0,new Map);Rn(this,gm,new Map);Rn(this,oE,new Map);Rn(this,lE,new Map);Rn(this,u0,null);this.messageHandler=g,this.loadingTask=et,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ut.ownerDocument,styleElement:ut.styleElement}),this.loadingParams=ut.loadingParams,this._params=ut,this.canvasFactory=ct.canvasFactory,this.filterFactory=ct.filterFactory,this.cMapReaderFactory=ct.cMapReaderFactory,this.standardFontDataFactory=ct.standardFontDataFactory,this.wasmFactory=ct.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ot,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=dt,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(g,et=AnnotationMode.ENABLE,ot=null,ut=!1,ct=!1){let dt=RenderingIntentFlag.DISPLAY,ft=SerializableEmpty;switch(g){case"any":dt=RenderingIntentFlag.ANY;break;case"display":break;case"print":dt=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${g}`)}const St=dt&RenderingIntentFlag.PRINT&&ot instanceof PrintAnnotationStorage?ot:this.annotationStorage;switch(et){case AnnotationMode.DISABLE:dt+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:dt+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:dt+=RenderingIntentFlag.ANNOTATIONS_STORAGE,ft=St.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${et}`)}ut&&(dt+=RenderingIntentFlag.IS_EDITING),ct&&(dt+=RenderingIntentFlag.OPLIST);const{ids:kt,hash:Tt}=St.modifiedIds,Rt=[dt,ft.hash,Tt];return{renderingIntent:dt,cacheKey:Rt.join("_"),annotationStorageSerializable:ft,modifiedIds:kt}}destroy(){var ot;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(ot=Ut(this,u0))==null||ot.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ut of Ut(this,gm).values())g.push(ut._destroy());Ut(this,gm).clear(),Ut(this,oE).clear(),Ut(this,lE).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const et=this.messageHandler.sendWithPromise("Terminate",null);return g.push(et),Promise.all(g).then(()=>{var ut,ct;this.commonObjs.clear(),this.fontLoader.clear(),Ut(this,l0).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ut=this._networkStream)==null||ut.cancelAllRequests(new AbortException("Worker was terminated.")),(ct=this.messageHandler)==null||ct.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:et}=this;g.on("GetReader",(ot,ut)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ct=>{this._lastProgress={loaded:ct.loaded,total:ct.total}},ut.onPull=()=>{this._fullReader.read().then(function({value:ct,done:dt}){if(dt){ut.close();return}assert(ct instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ut.enqueue(new Uint8Array(ct),1,[ct])}).catch(ct=>{ut.error(ct)})},ut.onCancel=ct=>{this._fullReader.cancel(ct),ut.ready.catch(dt=>{if(!this.destroyed)throw dt})}}),g.on("ReaderHeadersReady",async ot=>{var ft;await this._fullReader.headersReady;const{isStreamingSupported:ut,isRangeSupported:ct,contentLength:dt}=this._fullReader;return(!ut||!ct)&&(this._lastProgress&&((ft=et.onProgress)==null||ft.call(et,this._lastProgress)),this._fullReader.onProgress=St=>{var kt;(kt=et.onProgress)==null||kt.call(et,{loaded:St.loaded,total:St.total})}),{isStreamingSupported:ut,isRangeSupported:ct,contentLength:dt}}),g.on("GetRangeReader",(ot,ut)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ct=this._networkStream.getRangeReader(ot.begin,ot.end);if(!ct){ut.close();return}ut.onPull=()=>{ct.read().then(function({value:dt,done:ft}){if(ft){ut.close();return}assert(dt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ut.enqueue(new Uint8Array(dt),1,[dt])}).catch(dt=>{ut.error(dt)})},ut.onCancel=dt=>{ct.cancel(dt),ut.ready.catch(ft=>{if(!this.destroyed)throw ft})}}),g.on("GetDoc",({pdfInfo:ot})=>{this._numPages=ot.numPages,this._htmlForXfa=ot.htmlForXfa,delete ot.htmlForXfa,et._capability.resolve(new PDFDocumentProxy(ot,this))}),g.on("DocException",ot=>{et._capability.reject(wrapReason(ot))}),g.on("PasswordRequest",ot=>{In(this,u0,Promise.withResolvers());try{if(!et.onPassword)throw wrapReason(ot);const ut=ct=>{ct instanceof Error?Ut(this,u0).reject(ct):Ut(this,u0).resolve({password:ct})};et.onPassword(ut,ot.code)}catch(ut){Ut(this,u0).reject(ut)}return Ut(this,u0).promise}),g.on("DataLoaded",ot=>{var ut;(ut=et.onProgress)==null||ut.call(et,{loaded:ot.length,total:ot.length}),this.downloadInfoCapability.resolve(ot)}),g.on("StartRenderPage",ot=>{if(this.destroyed)return;Ut(this,gm).get(ot.pageIndex)._startRenderPage(ot.transparency,ot.cacheKey)}),g.on("commonobj",([ot,ut,ct])=>{var dt;if(this.destroyed||this.commonObjs.has(ot))return null;switch(ut){case"Font":if("error"in ct){const Rt=ct.error;warn(`Error during font loading: ${Rt}`),this.commonObjs.resolve(ot,Rt);break}const ft=new FontInfo(ct),St=this._params.pdfBug&&((dt=globalThis.FontInspector)!=null&&dt.enabled)?(Rt,jt)=>globalThis.FontInspector.fontAdded(Rt,jt):null,kt=new FontFaceObject(ft,St,ct.extra,ct.charProcOperatorList);this.fontLoader.bind(kt).catch(()=>g.sendWithPromise("FontFallback",{id:ot})).finally(()=>{!kt.fontExtraProperties&&kt.data&&kt.clearData(),this.commonObjs.resolve(ot,kt)});break;case"CopyLocalImage":const{imageRef:Tt}=ct;assert(Tt,"The imageRef must be defined.");for(const Rt of Ut(this,gm).values())for(const[,jt]of Rt.objs)if((jt==null?void 0:jt.ref)===Tt)return jt.dataLen?(this.commonObjs.resolve(ot,structuredClone(jt)),jt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ot,ct);break;default:throw new Error(`Got unknown common object type ${ut}`)}return null}),g.on("obj",([ot,ut,ct,dt])=>{var St;if(this.destroyed)return;const ft=Ut(this,gm).get(ut);if(!ft.objs.has(ot)){if(ft._intentStates.size===0){(St=dt==null?void 0:dt.bitmap)==null||St.close();return}switch(ct){case"Image":case"Pattern":ft.objs.resolve(ot,dt);break;default:throw new Error(`Got unknown object type ${ct}`)}}}),g.on("DocProgress",ot=>{var ut;this.destroyed||(ut=et.onProgress)==null||ut.call(et,{loaded:ot.loaded,total:ot.total})}),g.on("FetchBinaryData",async ot=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ut=this[ot.type];if(!ut)throw new Error(`${ot.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ut.fetch(ot)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ot;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((ot=this._fullReader)==null?void 0:ot.filename)??null},et).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const et=g-1,ot=Ut(this,oE).get(et);if(ot)return ot;const ut=this.messageHandler.sendWithPromise("GetPage",{pageIndex:et}).then(ct=>{if(this.destroyed)throw new Error("Transport destroyed");ct.refStr&&Ut(this,lE).set(ct.refStr,g);const dt=new PDFPageProxy(et,ct,this,this._params.pdfBug);return Ut(this,gm).set(et,dt),dt});return Ut(this,oE).set(et,ut),ut}getPageIndex(g){return isRefProxy(g)?this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(g,et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:et})}getFieldObjects(){return Xn(this,nv,B_).call(this,"GetFieldObjects")}hasJSActions(){return Xn(this,nv,B_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(g,et){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:g,pageIndexesToSkip:et})}getDocJSActions(){return Xn(this,nv,B_).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(g){return Xn(this,nv,B_).call(this,"GetOptionalContentConfig").then(et=>new OptionalContentConfig(et,g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",et=Ut(this,l0).get(g);if(et)return et;const ot=this.messageHandler.sendWithPromise(g,null).then(ut=>{var ct,dt;return{info:ut[0],metadata:ut[1]?new Metadata(ut[1]):null,contentDispositionFilename:((ct=this._fullReader)==null?void 0:ct.filename)??null,contentLength:((dt=this._fullReader)==null?void 0:dt.contentLength)??null}});return Ut(this,l0).set(g,ot),ot}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const et of Ut(this,gm).values())if(!et.cleanup())throw new Error(`startCleanup: Page ${et.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),Ut(this,l0).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(g){if(!isRefProxy(g))return null;const et=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return Ut(this,lE).get(et)??null}}l0=new WeakMap,gm=new WeakMap,oE=new WeakMap,lE=new WeakMap,u0=new WeakMap,nv=new WeakSet,B_=function(g,et=null){const ot=Ut(this,l0).get(g);if(ot)return ot;const ut=this.messageHandler.sendWithPromise(g,et);return Ut(this,l0).set(g,ut),ut};var hy;class RenderTask{constructor(g){Rn(this,hy,null);Ur(this,"onContinue",null);Ur(this,"onError",null);In(this,hy,g)}get promise(){return Ut(this,hy).capability.promise}cancel(g=0){Ut(this,hy).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=Ut(this,hy).operatorList;if(!g)return!1;const{annotationCanvasMap:et}=Ut(this,hy);return g.form||g.canvas&&(et==null?void 0:et.size)>0}}hy=new WeakMap;var dy,rv;const a1=class a1{constructor({callback:g,params:et,objs:ot,commonObjs:ut,annotationCanvasMap:ct,operatorList:dt,pageIndex:ft,canvasFactory:St,filterFactory:kt,useRequestAnimationFrame:Tt=!1,pdfBug:Rt=!1,pageColors:jt=null,enableHWA:Ft=!1,operationsFilter:Bt=null}){Rn(this,dy,null);this.callback=g,this.params=et,this.objs=ot,this.commonObjs=ut,this.annotationCanvasMap=ct,this.operatorListIdx=null,this.operatorList=dt,this._pageIndex=ft,this.canvasFactory=St,this.filterFactory=kt,this._pdfBug=Rt,this.pageColors=jt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=et.canvas,this._canvasContext=et.canvas?null:et.canvasContext,this._enableHWA=Ft,this._dependencyTracker=et.dependencyTracker,this._operationsFilter=Bt}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:et}){var St,kt;if(this.cancelled)return;if(this._canvas){if(Ut(a1,rv).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ut(a1,rv).add(this._canvas)}this._pdfBug&&((St=globalThis.StepperManager)!=null&&St.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:ot,transform:ut,background:ct,dependencyTracker:dt}=this.params,ft=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:et},this.annotationCanvasMap,this.pageColors,dt),this.gfx.beginDrawing({transform:ut,viewport:ot,transparency:g,background:ct}),this.operatorListIdx=0,this.graphicsReady=!0,(kt=this.graphicsReadyCallback)==null||kt.call(this)}cancel(g=null,et=0){var ot,ut,ct;this.running=!1,this.cancelled=!0,(ot=this.gfx)==null||ot.endDrawing(),Ut(this,dy)&&(window.cancelAnimationFrame(Ut(this,dy)),In(this,dy,null)),Ut(a1,rv).delete(this._canvas),g||(g=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,et)),this.callback(g),(ct=(ut=this.task).onError)==null||ct.call(ut,g)}operatorListChanged(){var g,et;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.gfx.dependencyTracker)==null||g.growOperationsCount(this.operatorList.fnArray.length),(et=this.stepper)==null||et.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?In(this,dy,window.requestAnimationFrame(()=>{In(this,dy,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ut(a1,rv).delete(this._canvas),this.callback())))}};dy=new WeakMap,rv=new WeakMap,Rn(a1,rv,new WeakSet);let InternalRenderTask=a1;const version="5.4.296",build="f56dc8601";var Wu,iv,uE,Jo,dS,cE,c0,fS,fy,$p,pS,mS,I3,gS,O3,yS,L3,h0,n1,CA,w4,ym,L0;const wu=class wu{constructor({editor:g=null,uiManager:et=null}){Rn(this,mS);Rn(this,gS);Rn(this,yS);Rn(this,h0);Rn(this,CA);Rn(this,ym);Rn(this,Wu,null);Rn(this,iv,null);Rn(this,uE,void 0);Rn(this,Jo,null);Rn(this,dS,!1);Rn(this,cE,!1);Rn(this,c0,null);Rn(this,fS,void 0);Rn(this,fy,null);Rn(this,$p,null);var ot,ut;g?(In(this,cE,!1),In(this,c0,g)):In(this,cE,!0),In(this,$p,(g==null?void 0:g._uiManager)||et),In(this,fS,Ut(this,$p)._eventBus),In(this,uE,((ot=g==null?void 0:g.color)==null?void 0:ot.toUpperCase())||((ut=Ut(this,$p))==null?void 0:ut.highlightColors.values().next().value)||"#FFFF98"),Ut(wu,pS)||In(wu,pS,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],wu.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wu.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wu.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wu.prototype._moveToPrevious],[["Home","mac+Home"],wu.prototype._moveToBeginning],[["End","mac+End"],wu.prototype._moveToEnd]]))}renderButton(){const g=In(this,Wu,document.createElement("button"));g.className="colorPicker",g.tabIndex="0",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),g.ariaHasPopup="true",Ut(this,c0)&&(g.ariaControls=`${Ut(this,c0).id}_colorpicker_dropdown`);const et=Ut(this,$p)._signal;g.addEventListener("click",Xn(this,h0,n1).bind(this),{signal:et}),g.addEventListener("keydown",Xn(this,yS,L3).bind(this),{signal:et});const ot=In(this,iv,document.createElement("span"));return ot.className="swatch",ot.ariaHidden="true",ot.style.backgroundColor=Ut(this,uE),g.append(ot),g}renderMainDropdown(){const g=In(this,Jo,Xn(this,mS,I3).call(this));return g.ariaOrientation="horizontal",g.ariaLabelledBy="highlightColorPickerLabel",g}_colorSelectFromKeyboard(g){if(g.target===Ut(this,Wu)){Xn(this,h0,n1).call(this,g);return}const et=g.target.getAttribute("data-color");et&&Xn(this,gS,O3).call(this,et,g)}_moveToNext(g){var et,ot;if(!Ut(this,ym,L0)){Xn(this,h0,n1).call(this,g);return}if(g.target===Ut(this,Wu)){(et=Ut(this,Jo).firstChild)==null||et.focus();return}(ot=g.target.nextSibling)==null||ot.focus()}_moveToPrevious(g){var et,ot;if(g.target===((et=Ut(this,Jo))==null?void 0:et.firstChild)||g.target===Ut(this,Wu)){Ut(this,ym,L0)&&this._hideDropdownFromKeyboard();return}Ut(this,ym,L0)||Xn(this,h0,n1).call(this,g),(ot=g.target.previousSibling)==null||ot.focus()}_moveToBeginning(g){var et;if(!Ut(this,ym,L0)){Xn(this,h0,n1).call(this,g);return}(et=Ut(this,Jo).firstChild)==null||et.focus()}_moveToEnd(g){var et;if(!Ut(this,ym,L0)){Xn(this,h0,n1).call(this,g);return}(et=Ut(this,Jo).lastChild)==null||et.focus()}hideDropdown(){var g,et;(g=Ut(this,Jo))==null||g.classList.add("hidden"),Ut(this,Wu).ariaExpanded="false",(et=Ut(this,fy))==null||et.abort(),In(this,fy,null)}_hideDropdownFromKeyboard(){var g;if(!Ut(this,cE)){if(!Ut(this,ym,L0)){(g=Ut(this,c0))==null||g.unselect();return}this.hideDropdown(),Ut(this,Wu).focus({preventScroll:!0,focusVisible:Ut(this,dS)})}}updateColor(g){if(Ut(this,iv)&&(Ut(this,iv).style.backgroundColor=g),!Ut(this,Jo))return;const et=Ut(this,$p).highlightColors.values();for(const ot of Ut(this,Jo).children)ot.ariaSelected=et.next().value===g.toUpperCase()}destroy(){var g,et;(g=Ut(this,Wu))==null||g.remove(),In(this,Wu,null),In(this,iv,null),(et=Ut(this,Jo))==null||et.remove(),In(this,Jo,null)}};Wu=new WeakMap,iv=new WeakMap,uE=new WeakMap,Jo=new WeakMap,dS=new WeakMap,cE=new WeakMap,c0=new WeakMap,fS=new WeakMap,fy=new WeakMap,$p=new WeakMap,pS=new WeakMap,mS=new WeakSet,I3=function(){const g=document.createElement("div"),et=Ut(this,$p)._signal;g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.className="dropdown",g.role="listbox",g.ariaMultiSelectable="false",g.ariaOrientation="vertical",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Ut(this,c0)&&(g.id=`${Ut(this,c0).id}_colorpicker_dropdown`);for(const[ot,ut]of Ut(this,$p).highlightColors){const ct=document.createElement("button");ct.tabIndex="0",ct.role="option",ct.setAttribute("data-color",ut),ct.title=ot,ct.setAttribute("data-l10n-id",Ut(wu,pS)[ot]);const dt=document.createElement("span");ct.append(dt),dt.className="swatch",dt.style.backgroundColor=ut,ct.ariaSelected=ut===Ut(this,uE),ct.addEventListener("click",Xn(this,gS,O3).bind(this,ut),{signal:et}),g.append(ct)}return g.addEventListener("keydown",Xn(this,yS,L3).bind(this),{signal:et}),g},gS=new WeakSet,O3=function(g,et){et.stopPropagation(),Ut(this,fS).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:g}),this.updateColor(g)},yS=new WeakSet,L3=function(g){wu._keyboardManager.exec(this,g)},h0=new WeakSet,n1=function(g){if(Ut(this,ym,L0)){this.hideDropdown();return}if(In(this,dS,g.detail===0),Ut(this,fy)||(In(this,fy,new AbortController),window.addEventListener("pointerdown",Xn(this,CA,w4).bind(this),{signal:Ut(this,$p).combinedSignal(Ut(this,fy))})),Ut(this,Wu).ariaExpanded="true",Ut(this,Jo)){Ut(this,Jo).classList.remove("hidden");return}const et=In(this,Jo,Xn(this,mS,I3).call(this));Ut(this,Wu).append(et)},CA=new WeakSet,w4=function(g){var et;(et=Ut(this,Jo))!=null&&et.contains(g.target)||this.hideDropdown()},ym=new WeakSet,L0=function(){return Ut(this,Jo)&&!Ut(this,Jo).classList.contains("hidden")},Rn(wu,pS,null);let ColorPicker=wu;var vm,vS,hE,xS;const o1=class o1{constructor(g){Rn(this,vm,null);Rn(this,vS,null);Rn(this,hE,null);In(this,vS,g),In(this,hE,g._uiManager),Ut(o1,xS)||In(o1,xS,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Ut(this,vm))return Ut(this,vm);const{editorType:g,colorType:et,colorValue:ot}=Ut(this,vS),ut=In(this,vm,document.createElement("input"));return ut.type="color",ut.value=ot||"#000000",ut.className="basicColorPicker",ut.tabIndex=0,ut.setAttribute("data-l10n-id",Ut(o1,xS)[g]),ut.addEventListener("input",()=>{Ut(this,hE).updateParams(et,ut.value)},{signal:Ut(this,hE)._signal}),ut}update(g){Ut(this,vm)&&(Ut(this,vm).value=g)}destroy(){var g;(g=Ut(this,vm))==null||g.remove(),In(this,vm,null)}hideDropdown(){}};vm=new WeakMap,vS=new WeakMap,hE=new WeakMap,xS=new WeakMap,Rn(o1,xS,null);let BasicColorPicker=o1;function makeColorComp(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function scaleAndClamp(it){return Math.max(0,Math.min(255,255*it))}class ColorConverters{static CMYK_G([g,et,ot,ut]){return["G",1-Math.min(1,.3*g+.59*ot+.11*et+ut)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=scaleAndClamp(g),[g,g,g]}static G_HTML([g]){const et=makeColorComp(g);return`#${et}${et}${et}`}static RGB_G([g,et,ot]){return["G",.3*g+.59*et+.11*ot]}static RGB_rgb(g){return g.map(scaleAndClamp)}static RGB_HTML(g){return`#${g.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,et,ot,ut]){return["RGB",1-Math.min(1,g+ut),1-Math.min(1,ot+ut),1-Math.min(1,et+ut)]}static CMYK_rgb([g,et,ot,ut]){return[scaleAndClamp(1-Math.min(1,g+ut)),scaleAndClamp(1-Math.min(1,ot+ut)),scaleAndClamp(1-Math.min(1,et+ut))]}static CMYK_HTML(g){const et=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(et)}static RGB_CMYK([g,et,ot]){const ut=1-g,ct=1-et,dt=1-ot,ft=Math.min(ut,ct,dt);return["CMYK",ut,ct,dt,ft]}}class BaseSVGFactory{create(g,et,ot=!1){if(g<=0||et<=0)throw new Error("Invalid SVG dimensions");const ut=this._createSVG("svg:svg");return ut.setAttribute("version","1.1"),ot||(ut.setAttribute("width",`${g}px`),ut.setAttribute("height",`${et}px`)),ut.setAttribute("preserveAspectRatio","none"),ut.setAttribute("viewBox",`0 0 ${g} ${et}`),ut}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(g){return document.createElementNS(SVG_NS,g)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(g){switch(g.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(g);case AnnotationType.TEXT:return new TextAnnotationElement(g);case AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(g);case"Btn":return g.data.radioButton?new RadioButtonWidgetAnnotationElement(g):g.data.checkBox?new CheckboxWidgetAnnotationElement(g):new PushButtonWidgetAnnotationElement(g);case"Ch":return new ChoiceWidgetAnnotationElement(g);case"Sig":return new SignatureWidgetAnnotationElement(g)}return new WidgetAnnotationElement(g);case AnnotationType.POPUP:return new PopupAnnotationElement(g);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(g);case AnnotationType.LINE:return new LineAnnotationElement(g);case AnnotationType.SQUARE:return new SquareAnnotationElement(g);case AnnotationType.CIRCLE:return new CircleAnnotationElement(g);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(g);case AnnotationType.CARET:return new CaretAnnotationElement(g);case AnnotationType.INK:return new InkAnnotationElement(g);case AnnotationType.POLYGON:return new PolygonAnnotationElement(g);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(g);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(g);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(g);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(g);case AnnotationType.STAMP:return new StampAnnotationElement(g);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(g);default:return new AnnotationElement(g)}}}var sv,dE,bp,bS,D3;const mP=class mP{constructor(g,{isRenderable:et=!1,ignoreBorder:ot=!1,createQuadrilaterals:ut=!1}={}){Rn(this,bS);Rn(this,sv,null);Rn(this,dE,!1);Rn(this,bp,null);this.isRenderable=et,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableComment=g.enableComment,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,et&&(this.container=this._createContainer(ot)),ut&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:g,richText:et}){return!!(g!=null&&g.str||et!=null&&et.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return mP._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var ot;const{data:g}=this,et=(ot=this.annotationStorage)==null?void 0:ot.getEditor(g.id);return et?et.getData():g}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var ft;const g=(ft=this.annotationStorage)==null?void 0:ft.getEditor(this.data.id);if(g)return g.commentButtonPositionInPage;const{quadPoints:et,inkLists:ot,rect:ut}=this.data;let ct=-1/0,dt=-1/0;if((et==null?void 0:et.length)>=8){for(let St=0;St<et.length;St+=8)et[St+1]>dt?(dt=et[St+1],ct=et[St+2]):et[St+1]===dt&&(ct=Math.max(ct,et[St+2]));return[ct,dt]}if((ot==null?void 0:ot.length)>=1){for(const St of ot)for(let kt=0,Tt=St.length;kt<Tt;kt+=2)St[kt+1]>dt?(dt=St[kt+1],ct=St[kt]):St[kt+1]===dt&&(ct=Math.max(ct,St[kt]));if(ct!==1/0)return[ct,dt]}return ut?[ut[2],ut[3]]:null}_normalizePoint(g){const{page:{view:et},viewport:{rawDims:{pageWidth:ot,pageHeight:ut,pageX:ct,pageY:dt}}}=this.parent;return g[1]=et[3]-g[1]+et[1],g[0]=100*(g[0]-ct)/ot,g[1]=100*(g[1]-dt)/ut,g}get commentText(){var et,ot,ut;const{data:g}=this;return((ot=(et=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${g.id}`))==null?void 0:et.popup)==null?void 0:ot.contents)||((ut=g.contentsObj)==null?void 0:ut.str)||""}set commentText(g){const{data:et}=this,ot={deleted:!g,contents:g||""};this.annotationStorage.updateEditor(et.id,{popup:ot})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${et.id}`,{id:et.id,annotationType:et.annotationType,pageIndex:this.parent.page._pageIndex,popup:ot,popupRef:et.popupRef,modificationDate:new Date}),g||this.removePopup()}removePopup(){var g,et;(et=((g=Ut(this,bp))==null?void 0:g.popup)||this.popup)==null||et.remove(),In(this,bp,this.popup=null)}updateEdited(g){var ct;if(!this.container)return;g.rect&&(Ut(this,sv)||In(this,sv,{rect:this.data.rect.slice(0)}));const{rect:et,popup:ot}=g;et&&Xn(this,bS,D3).call(this,et);let ut=((ct=Ut(this,bp))==null?void 0:ct.popup)||this.popup;!ut&&(ot!=null&&ot.text)&&(this._createPopup(ot),ut=Ut(this,bp).popup),ut&&(ut.updateEdited(g),ot!=null&&ot.deleted&&(ut.remove(),In(this,bp,null),this.popup=null))}resetEdited(){var g;Ut(this,sv)&&(Xn(this,bS,D3).call(this,Ut(this,sv).rect),(g=Ut(this,bp))==null||g.popup.resetEdited(),In(this,sv,null))}_createContainer(g){const{data:et,parent:{page:ot,viewport:ut}}=this,ct=document.createElement("section");ct.setAttribute("data-annotation-id",et.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ct.tabIndex=0);const{style:dt}=ct;if(dt.zIndex=this.parent.zIndex,this.parent.zIndex+=2,et.alternativeText&&(ct.title=et.alternativeText),et.noRotate&&ct.classList.add("norotate"),!et.rect||this instanceof PopupAnnotationElement){const{rotation:Ht}=et;return!et.hasOwnCanvas&&Ht!==0&&this.setRotation(Ht,ct),ct}const{width:ft,height:St}=this;if(!g&&et.borderStyle.width>0){dt.borderWidth=`${et.borderStyle.width}px`;const Ht=et.borderStyle.horizontalCornerRadius,Yt=et.borderStyle.verticalCornerRadius;if(Ht>0||Yt>0){const Kt=`calc(${Ht}px * var(--total-scale-factor)) / calc(${Yt}px * var(--total-scale-factor))`;dt.borderRadius=Kt}else if(this instanceof RadioButtonWidgetAnnotationElement){const Kt=`calc(${ft}px * var(--total-scale-factor)) / calc(${St}px * var(--total-scale-factor))`;dt.borderRadius=Kt}switch(et.borderStyle.style){case AnnotationBorderStyleType.SOLID:dt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:dt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:dt.borderBottomStyle="solid";break}const zt=et.borderColor||null;zt?(In(this,dE,!0),dt.borderColor=Util$1.makeHexColor(zt[0]|0,zt[1]|0,zt[2]|0)):dt.borderWidth=0}const kt=Util$1.normalizeRect([et.rect[0],ot.view[3]-et.rect[1]+ot.view[1],et.rect[2],ot.view[3]-et.rect[3]+ot.view[1]]),{pageWidth:Tt,pageHeight:Rt,pageX:jt,pageY:Ft}=ut.rawDims;dt.left=`${100*(kt[0]-jt)/Tt}%`,dt.top=`${100*(kt[1]-Ft)/Rt}%`;const{rotation:Bt}=et;return et.hasOwnCanvas||Bt===0?(dt.width=`${100*ft/Tt}%`,dt.height=`${100*St/Rt}%`):this.setRotation(Bt,ct),ct}setRotation(g,et=this.container){if(!this.data.rect)return;const{pageWidth:ot,pageHeight:ut}=this.parent.viewport.rawDims;let{width:ct,height:dt}=this;g%180!==0&&([ct,dt]=[dt,ct]),et.style.width=`${100*ct/ot}%`,et.style.height=`${100*dt/ut}%`,et.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(et,ot,ut)=>{const ct=ut.detail[et],dt=ct[0],ft=ct.slice(1);ut.target.style[ot]=ColorConverters[`${dt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[ot]:ColorConverters[`${dt}_rgb`](ft)})};return shadow(this,"_commonActions",{display:et=>{const{display:ot}=et.detail,ut=ot%2===1;this.container.style.visibility=ut?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ut,noPrint:ot===1||ot===2})},print:et=>{this.annotationStorage.setValue(this.data.id,{noPrint:!et.detail.print})},hidden:et=>{const{hidden:ot}=et.detail;this.container.style.visibility=ot?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ot,noView:ot})},focus:et=>{setTimeout(()=>et.target.focus({preventScroll:!1}),0)},userName:et=>{et.target.title=et.detail.userName},readonly:et=>{et.target.disabled=et.detail.readonly},required:et=>{this._setRequired(et.target,et.detail.required)},bgColor:et=>{g("bgColor","backgroundColor",et)},fillColor:et=>{g("fillColor","backgroundColor",et)},fgColor:et=>{g("fgColor","color",et)},textColor:et=>{g("textColor","color",et)},borderColor:et=>{g("borderColor","borderColor",et)},strokeColor:et=>{g("strokeColor","borderColor",et)},rotation:et=>{const ot=et.detail.rotation;this.setRotation(ot),this.annotationStorage.setValue(this.data.id,{rotation:ot})}})}_dispatchEventFromSandbox(g,et){const ot=this._commonActions;for(const ut of Object.keys(et.detail)){const ct=g[ut]||ot[ut];ct==null||ct(et)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const et=this.annotationStorage.getRawValue(this.data.id);if(!et)return;const ot=this._commonActions;for(const[ut,ct]of Object.entries(et)){const dt=ot[ut];if(dt){const ft={detail:{[ut]:ct},target:g};dt(ft),delete et[ut]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[et,ot,ut,ct]=this.data.rect.map(Ht=>Math.fround(Ht));if(g.length===8){const[Ht,Yt,zt,Kt]=g.subarray(2,6);if(ut===Ht&&ct===Yt&&et===zt&&ot===Kt)return}const{style:dt}=this.container;let ft;if(Ut(this,dE)){const{borderColor:Ht,borderWidth:Yt}=dt;dt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ht}" stroke-width="${Yt}">`],this.container.classList.add("hasBorder")}const St=ut-et,kt=ct-ot,{svgFactory:Tt}=this,Rt=Tt.createElement("svg");Rt.classList.add("quadrilateralsContainer"),Rt.setAttribute("width",0),Rt.setAttribute("height",0),Rt.role="none";const jt=Tt.createElement("defs");Rt.append(jt);const Ft=Tt.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Ft.setAttribute("id",Bt),Ft.setAttribute("clipPathUnits","objectBoundingBox"),jt.append(Ft);for(let Ht=2,Yt=g.length;Ht<Yt;Ht+=8){const zt=g[Ht],Kt=g[Ht+1],en=g[Ht+2],tn=g[Ht+3],on=Tt.createElement("rect"),an=(en-et)/St,un=(ct-Kt)/kt,dn=(zt-en)/St,Sn=(Kt-tn)/kt;on.setAttribute("x",an),on.setAttribute("y",un),on.setAttribute("width",dn),on.setAttribute("height",Sn),Ft.append(on),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${an}" y="${un}" width="${dn}" height="${Sn}"/>`)}Ut(this,dE)&&(ft.push("</g></svg>')"),dt.backgroundImage=ft.join("")),this.container.append(Rt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(g=null){const{data:et}=this;let ot,ut;g?(ot={str:g.text},ut=g.date):(ot=et.contentsObj,ut=et.modificationDate);const ct=In(this,bp,new PopupAnnotationElement({data:{color:et.color,titleObj:et.titleObj,modificationDate:ut,contentsObj:ot,richText:et.richText,parentRect:et.rect,borderStyle:0,id:`popup_${et.id}`,rotation:et.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ct.render())}get hasPopupElement(){return!!(Ut(this,bp)||this.popup||this.data.popupRef)}get extraPopupElement(){return Ut(this,bp)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,et=null){const ot=[];if(this._fieldObjects){const ut=this._fieldObjects[g];if(ut)for(const{page:ct,id:dt,exportValues:ft}of ut){if(ct===-1||dt===et)continue;const St=typeof ft=="string"?ft:null,kt=document.querySelector(`[data-element-id="${dt}"]`);if(kt&&!GetElementsByNameSet.has(kt)){warn(`_getElementsByName - element not allowed: ${dt}`);continue}ot.push({id:dt,exportValue:St,domElement:kt})}return ot}for(const ut of document.getElementsByName(g)){const{exportValue:ct}=ut,dt=ut.getAttribute("data-element-id");dt!==et&&GetElementsByNameSet.has(ut)&&ot.push({id:dt,exportValue:ct,domElement:ut})}return ot}show(){var g;this.container&&(this.container.hidden=!1),(g=this.popup)==null||g.maybeShow()}hide(){var g;this.container&&(this.container.hidden=!0),(g=this.popup)==null||g.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const et of g)et.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:g,data:{id:et}}=this;this.container.addEventListener("dblclick",()=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("switchannotationeditormode",{source:this,mode:g,editId:et,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};sv=new WeakMap,dE=new WeakMap,bp=new WeakMap,bS=new WeakSet,D3=function(g){const{container:{style:et},data:{rect:ot,rotation:ut},parent:{viewport:{rawDims:{pageWidth:ct,pageHeight:dt,pageX:ft,pageY:St}}}}=this;ot==null||ot.splice(0,4,...g),et.left=`${100*(g[0]-ft)/ct}%`,et.top=`${100*(dt-g[3]+St)/dt}%`,ut===0?(et.width=`${100*(g[2]-g[0])/ct}%`,et.height=`${100*(g[3]-g[1])/dt}%`):this.setRotation(ut)};let AnnotationElement=mP;class EditorAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.editor=g.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:g}=this;g.hasComment&&(this._createPopup(g.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(g){this.editor.comment=g,g||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var d0,r1,kA,C4,AA,k4;class LinkAnnotationElement extends AnnotationElement{constructor(et,ot=null){super(et,{isRenderable:!0,ignoreBorder:!!(ot!=null&&ot.ignoreBorder),createQuadrilaterals:!0});Rn(this,d0);Rn(this,kA);Rn(this,AA);this.isTooltipOnly=et.data.isTooltipOnly}render(){const{data:et,linkService:ot}=this,ut=document.createElement("a");ut.setAttribute("data-element-id",et.id);let ct=!1;return et.url?(ot.addLinkAttributes(ut,et.url,et.newWindow),ct=!0):et.action?(this._bindNamedAction(ut,et.action,et.overlaidText),ct=!0):et.attachment?(Xn(this,kA,C4).call(this,ut,et.attachment,et.overlaidText,et.attachmentDest),ct=!0):et.setOCGState?(Xn(this,AA,k4).call(this,ut,et.setOCGState,et.overlaidText),ct=!0):et.dest?(this._bindLink(ut,et.dest,et.overlaidText),ct=!0):(et.actions&&(et.actions.Action||et.actions["Mouse Up"]||et.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ut,et),ct=!0),et.resetForm?(this._bindResetFormAction(ut,et.resetForm),ct=!0):this.isTooltipOnly&&!ct&&(this._bindLink(ut,""),ct=!0)),this.container.classList.add("linkAnnotation"),ct&&this.container.append(ut),this.container}_bindLink(et,ot,ut=""){et.href=this.linkService.getDestinationHash(ot),et.onclick=()=>(ot&&this.linkService.goToDestination(ot),!1),(ot||ot==="")&&Xn(this,d0,r1).call(this),ut&&(et.title=ut)}_bindNamedAction(et,ot,ut=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeNamedAction(ot),!1),ut&&(et.title=ut),Xn(this,d0,r1).call(this)}_bindJSAction(et,ot){et.href=this.linkService.getAnchorUrl("");const ut=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ct of Object.keys(ot.actions)){const dt=ut.get(ct);dt&&(et[dt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ot.id,name:ct}}),!1})}ot.overlaidText&&(et.title=ot.overlaidText),et.onclick||(et.onclick=()=>!1),Xn(this,d0,r1).call(this)}_bindResetFormAction(et,ot){const ut=et.onclick;if(ut||(et.href=this.linkService.getAnchorUrl("")),Xn(this,d0,r1).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ut||(et.onclick=()=>!1);return}et.onclick=()=>{var Rt;ut==null||ut();const{fields:ct,refs:dt,include:ft}=ot,St=[];if(ct.length!==0||dt.length!==0){const jt=new Set(dt);for(const Ft of ct){const Bt=this._fieldObjects[Ft]||[];for(const{id:Ht}of Bt)jt.add(Ht)}for(const Ft of Object.values(this._fieldObjects))for(const Bt of Ft)jt.has(Bt.id)===ft&&St.push(Bt)}else for(const jt of Object.values(this._fieldObjects))St.push(...jt);const kt=this.annotationStorage,Tt=[];for(const jt of St){const{id:Ft}=jt;switch(Tt.push(Ft),jt.type){case"text":{const Ht=jt.defaultValue||"";kt.setValue(Ft,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=jt.defaultValue===jt.exportValues;kt.setValue(Ft,{value:Ht});break}case"combobox":case"listbox":{const Ht=jt.defaultValue||"";kt.setValue(Ft,{value:Ht});break}default:continue}const Bt=document.querySelector(`[data-element-id="${Ft}"]`);if(Bt){if(!GetElementsByNameSet.has(Bt)){warn(`_bindResetFormAction - element not allowed: ${Ft}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}d0=new WeakSet,r1=function(){this.container.setAttribute("data-internal-link","")},kA=new WeakSet,C4=function(et,ot,ut="",ct=null){et.href=this.linkService.getAnchorUrl(""),ot.description?et.title=ot.description:ut&&(et.title=ut),et.onclick=()=>{var dt;return(dt=this.downloadManager)==null||dt.openOrDownloadData(ot.content,ot.filename,ct),!1},Xn(this,d0,r1).call(this)},AA=new WeakSet,k4=function(et,ot,ut=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeSetOCGState(ot),!1),ut&&(et.title=ut),Xn(this,d0,r1).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),g.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(g){var et;this.data.hasOwnCanvas&&(((et=g.previousSibling)==null?void 0:et.nodeName)==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){return util_FeatureTest.platform.isMac?g.metaKey:g.ctrlKey}_setEventListener(g,et,ot,ut,ct){ot.includes("mouse")?g.addEventListener(ot,dt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ut,value:ct(dt),shift:dt.shiftKey,modifier:this._getKeyModifier(dt)}})}):g.addEventListener(ot,dt=>{var ft;if(ot==="blur"){if(!et.focused||!dt.relatedTarget)return;et.focused=!1}else if(ot==="focus"){if(et.focused)return;et.focused=!0}ct&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ut,value:ct(dt)}}))})}_setEventListeners(g,et,ot,ut){var ct,dt,ft;for(const[St,kt]of ot)(kt==="Action"||(ct=this.data.actions)!=null&&ct[kt])&&((kt==="Focus"||kt==="Blur")&&(et||(et={focused:!1})),this._setEventListener(g,et,St,kt,ut),kt==="Focus"&&!((dt=this.data.actions)!=null&&dt.Blur)?this._setEventListener(g,et,"blur","Blur",null):kt==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(g,et,"focus","Focus",null))}_setBackgroundColor(g){const et=this.data.backgroundColor||null;g.style.backgroundColor=et===null?"transparent":Util$1.makeHexColor(et[0],et[1],et[2])}_setTextStyle(g){const et=["left","center","right"],{fontColor:ot}=this.data.defaultAppearanceData,ut=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ct=g.style;let dt;const ft=2,St=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Tt=Math.round(kt/(LINE_FACTOR*ut))||1,Rt=kt/Tt;dt=Math.min(ut,St(Rt/LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);dt=Math.min(ut,St(kt/LINE_FACTOR))}ct.fontSize=`calc(${dt}px * var(--total-scale-factor))`,ct.color=Util$1.makeHexColor(ot[0],ot[1],ot[2]),this.data.textAlignment!==null&&(ct.textAlign=et[this.data.textAlignment])}_setRequired(g,et){et?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",et)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){const et=g.renderForms||g.data.hasOwnCanvas||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:et})}setPropertyOnSiblings(g,et,ot,ut){const ct=this.annotationStorage;for(const dt of this._getElementsByName(g.name,g.id))dt.domElement&&(dt.domElement[et]=ot),ct.setValue(dt.id,{[ut]:ot})}render(){var ut,ct;const g=this.annotationStorage,et=this.data.id;this.container.classList.add("textWidgetAnnotation");let ot=null;if(this.renderForms){const dt=g.getValue(et,{value:this.data.fieldValue});let ft=dt.value||"";const St=g.getValue(et,{charLimit:this.data.maxLen}).charLimit;St&&ft.length>St&&(ft=ft.slice(0,St));let kt=dt.formattedValue||((ut=this.data.textContent)==null?void 0:ut.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:ft,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ot=document.createElement("textarea"),ot.textContent=kt??ft,this.data.doNotScroll&&(ot.style.overflowY="hidden")):(ot=document.createElement("input"),ot.type=this.data.password?"password":"text",ot.setAttribute("value",kt??ft),this.data.doNotScroll&&(ot.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ot.hidden=!0),GetElementsByNameSet.add(ot),ot.setAttribute("data-element-id",et),ot.disabled=this.data.readOnly,ot.name=this.data.fieldName,ot.tabIndex=0;const{datetimeFormat:Rt,datetimeType:jt,timeStep:Ft}=this.data,Bt=!!jt&&this.enableScripting;Rt&&(ot.title=Rt),this._setRequired(ot,this.data.required),St&&(ot.maxLength=St),ot.addEventListener("input",Yt=>{g.setValue(et,{value:Yt.target.value}),this.setPropertyOnSiblings(ot,"value",Yt.target.value,"value"),Tt.formattedValue=null}),ot.addEventListener("resetform",Yt=>{const zt=this.data.defaultFieldValue??"";ot.value=Tt.userValue=zt,Tt.formattedValue=null});let Ht=Yt=>{const{formattedValue:zt}=Tt;zt!=null&&(Yt.target.value=zt),Yt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ot.addEventListener("focus",zt=>{var en;if(Tt.focused)return;const{target:Kt}=zt;if(Bt&&(Kt.type=jt,Ft&&(Kt.step=Ft)),Tt.userValue){const tn=Tt.userValue;if(Bt)if(jt==="time"){const on=new Date(tn),an=[on.getHours(),on.getMinutes(),on.getSeconds()];Kt.value=an.map(un=>un.toString().padStart(2,"0")).join(":")}else Kt.value=new Date(tn-TIMEZONE_OFFSET).toISOString().split(jt==="date"?"T":".",1)[0];else Kt.value=tn}Tt.lastCommittedValue=Kt.value,Tt.commitKey=1,(en=this.data.actions)!=null&&en.Focus||(Tt.focused=!0)}),ot.addEventListener("updatefromsandbox",zt=>{this.showElementAndHideCanvas(zt.target);const Kt={value(en){Tt.userValue=en.detail.value??"",Bt||g.setValue(et,{value:Tt.userValue.toString()}),en.target.value=Tt.userValue},formattedValue(en){const{formattedValue:tn}=en.detail;Tt.formattedValue=tn,tn!=null&&en.target!==document.activeElement&&(en.target.value=tn);const on={formattedValue:tn};Bt&&(on.value=tn),g.setValue(et,on)},selRange(en){en.target.setSelectionRange(...en.detail.selRange)},charLimit:en=>{var un;const{charLimit:tn}=en.detail,{target:on}=en;if(tn===0){on.removeAttribute("maxLength");return}on.setAttribute("maxLength",tn);let an=Tt.userValue;!an||an.length<=tn||(an=an.slice(0,tn),on.value=Tt.userValue=an,g.setValue(et,{value:an}),(un=this.linkService.eventBus)==null||un.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:an,willCommit:!0,commitKey:1,selStart:on.selectionStart,selEnd:on.selectionEnd}}))}};this._dispatchEventFromSandbox(Kt,zt)}),ot.addEventListener("keydown",zt=>{var tn;Tt.commitKey=1;let Kt=-1;if(zt.key==="Escape"?Kt=0:zt.key==="Enter"&&!this.data.multiLine?Kt=2:zt.key==="Tab"&&(Tt.commitKey=3),Kt===-1)return;const{value:en}=zt.target;Tt.lastCommittedValue!==en&&(Tt.lastCommittedValue=en,Tt.userValue=en,(tn=this.linkService.eventBus)==null||tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:en,willCommit:!0,commitKey:Kt,selStart:zt.target.selectionStart,selEnd:zt.target.selectionEnd}}))});const Yt=Ht;Ht=null,ot.addEventListener("blur",zt=>{var tn,on;if(!Tt.focused||!zt.relatedTarget)return;(tn=this.data.actions)!=null&&tn.Blur||(Tt.focused=!1);const{target:Kt}=zt;let{value:en}=Kt;if(Bt){if(en&&jt==="time"){const an=en.split(":").map(un=>parseInt(un,10));en=new Date(2e3,0,1,an[0],an[1],an[2]||0).valueOf(),Kt.step=""}else en.includes("T")||(en=`${en}T00:00`),en=new Date(en).valueOf();Kt.type="text"}Tt.userValue=en,Tt.lastCommittedValue!==en&&((on=this.linkService.eventBus)==null||on.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:en,willCommit:!0,commitKey:Tt.commitKey,selStart:zt.target.selectionStart,selEnd:zt.target.selectionEnd}})),Yt(zt)}),(ct=this.data.actions)!=null&&ct.Keystroke&&ot.addEventListener("beforeinput",zt=>{var Sn;Tt.lastCommittedValue=null;const{data:Kt,target:en}=zt,{value:tn,selectionStart:on,selectionEnd:an}=en;let un=on,dn=an;switch(zt.inputType){case"deleteWordBackward":{const mn=tn.substring(0,on).match(/\w*[^\w]*$/);mn&&(un-=mn[0].length);break}case"deleteWordForward":{const mn=tn.substring(on).match(/^[^\w]*\w*/);mn&&(dn+=mn[0].length);break}case"deleteContentBackward":on===an&&(un-=1);break;case"deleteContentForward":on===an&&(dn+=1);break}zt.preventDefault(),(Sn=this.linkService.eventBus)==null||Sn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:tn,change:Kt||"",willCommit:!1,selStart:un,selEnd:dn}})}),this._setEventListeners(ot,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],zt=>zt.target.value)}if(Ht&&ot.addEventListener("blur",Ht),this.data.comb){const zt=(this.data.rect[2]-this.data.rect[0])/St;ot.classList.add("comb"),ot.style.letterSpacing=`calc(${zt}px * var(--total-scale-factor) - 1ch)`}}else ot=document.createElement("div"),ot.textContent=this.data.fieldValue,ot.style.verticalAlign="middle",ot.style.display="table-cell",this.data.hasOwnCanvas&&(ot.hidden=!0);return this._setTextStyle(ot),this._setBackgroundColor(ot),this._setDefaultPropertiesFromJS(ot),this.container.append(ot),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,et=this.data,ot=et.id;let ut=g.getValue(ot,{value:et.exportValue===et.fieldValue}).value;typeof ut=="string"&&(ut=ut!=="Off",g.setValue(ot,{value:ut})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ct=document.createElement("input");return GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",ot),ct.disabled=et.readOnly,this._setRequired(ct,this.data.required),ct.type="checkbox",ct.name=et.fieldName,ut&&ct.setAttribute("checked",!0),ct.setAttribute("exportValue",et.exportValue),ct.tabIndex=0,ct.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot)){const Tt=St&&kt.exportValue===et.exportValue;kt.domElement&&(kt.domElement.checked=Tt),g.setValue(kt.id,{value:Tt})}g.setValue(ot,{value:St})}),ct.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue||"Off";dt.target.checked=ft===et.exportValue}),this.enableScripting&&this.hasJSActions&&(ct.addEventListener("updatefromsandbox",dt=>{const ft={value(St){St.target.checked=St.detail.value!=="Off",g.setValue(ot,{value:St.target.checked})}};this._dispatchEventFromSandbox(ft,dt)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,et=this.data,ot=et.id;let ut=g.getValue(ot,{value:et.fieldValue===et.buttonValue}).value;if(typeof ut=="string"&&(ut=ut!==et.buttonValue,g.setValue(ot,{value:ut})),ut)for(const dt of this._getElementsByName(et.fieldName,ot))g.setValue(dt.id,{value:!1});const ct=document.createElement("input");if(GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",ot),ct.disabled=et.readOnly,this._setRequired(ct,this.data.required),ct.type="radio",ct.name=et.fieldName,ut&&ct.setAttribute("checked",!0),ct.tabIndex=0,ct.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot))g.setValue(kt.id,{value:!1});g.setValue(ot,{value:St})}),ct.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue;dt.target.checked=ft!=null&&ft===et.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=et.buttonValue;ct.addEventListener("updatefromsandbox",ft=>{const St={value:kt=>{const Tt=dt===kt.detail.value;for(const Rt of this._getElementsByName(kt.target.name)){const jt=Tt&&Rt.id===ot;Rt.domElement&&(Rt.domElement.checked=jt),g.setValue(Rt.id,{value:jt})}}};this._dispatchEventFromSandbox(St,ft)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton");const et=g.lastChild;return this.enableScripting&&this.hasJSActions&&et&&(this._setDefaultPropertiesFromJS(et),et.addEventListener("updatefromsandbox",ot=>{this._dispatchEventFromSandbox({},ot)})),g}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,et=this.data.id,ot=g.getValue(et,{value:this.data.fieldValue}),ut=document.createElement("select");GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",et),ut.disabled=this.data.readOnly,this._setRequired(ut,this.data.required),ut.name=this.data.fieldName,ut.tabIndex=0;let ct=this.data.combo&&this.data.options.length>0;this.data.combo||(ut.size=this.data.options.length,this.data.multiSelect&&(ut.multiple=!0)),ut.addEventListener("resetform",Tt=>{const Rt=this.data.defaultFieldValue;for(const jt of ut.options)jt.selected=jt.value===Rt});for(const Tt of this.data.options){const Rt=document.createElement("option");Rt.textContent=Tt.displayValue,Rt.value=Tt.exportValue,ot.value.includes(Tt.exportValue)&&(Rt.setAttribute("selected",!0),ct=!1),ut.append(Rt)}let dt=null;if(ct){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ut.prepend(Tt),dt=()=>{Tt.remove(),ut.removeEventListener("input",dt),dt=null},ut.addEventListener("input",dt)}const ft=Tt=>{const Rt=Tt?"value":"textContent",{options:jt,multiple:Ft}=ut;return Ft?Array.prototype.filter.call(jt,Bt=>Bt.selected).map(Bt=>Bt[Rt]):jt.selectedIndex===-1?null:jt[jt.selectedIndex][Rt]};let St=ft(!1);const kt=Tt=>{const Rt=Tt.target.options;return Array.prototype.map.call(Rt,jt=>({displayValue:jt.textContent,exportValue:jt.value}))};return this.enableScripting&&this.hasJSActions?(ut.addEventListener("updatefromsandbox",Tt=>{const Rt={value(jt){dt==null||dt();const Ft=jt.detail.value,Bt=new Set(Array.isArray(Ft)?Ft:[Ft]);for(const Ht of ut.options)Ht.selected=Bt.has(Ht.value);g.setValue(et,{value:ft(!0)}),St=ft(!1)},multipleSelection(jt){ut.multiple=!0},remove(jt){const Ft=ut.options,Bt=jt.detail.remove;Ft[Bt].selected=!1,ut.remove(Bt),Ft.length>0&&Array.prototype.findIndex.call(Ft,Yt=>Yt.selected)===-1&&(Ft[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},clear(jt){for(;ut.length!==0;)ut.remove(0);g.setValue(et,{value:null,items:[]}),St=ft(!1)},insert(jt){const{index:Ft,displayValue:Bt,exportValue:Ht}=jt.detail.insert,Yt=ut.children[Ft],zt=document.createElement("option");zt.textContent=Bt,zt.value=Ht,Yt?Yt.before(zt):ut.append(zt),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},items(jt){const{items:Ft}=jt.detail;for(;ut.length!==0;)ut.remove(0);for(const Bt of Ft){const{displayValue:Ht,exportValue:Yt}=Bt,zt=document.createElement("option");zt.textContent=Ht,zt.value=Yt,ut.append(zt)}ut.options.length>0&&(ut.options[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},indices(jt){const Ft=new Set(jt.detail.indices);for(const Bt of jt.target.options)Bt.selected=Ft.has(Bt.index);g.setValue(et,{value:ft(!0)}),St=ft(!1)},editable(jt){jt.target.disabled=!jt.detail.editable}};this._dispatchEventFromSandbox(Rt,Tt)}),ut.addEventListener("input",Tt=>{var Ft;const Rt=ft(!0),jt=ft(!1);g.setValue(et,{value:Rt}),Tt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:St,change:jt,changeEx:Rt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ut,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ut.addEventListener("input",function(Tt){g.setValue(et,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(ut),this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}var ES,j3;class PopupAnnotationElement extends AnnotationElement{constructor(et){const{data:ot,elements:ut,parent:ct}=et,dt=!!ct._commentManager;super(et,{isRenderable:!dt&&AnnotationElement._hasPopupData(ot)});Rn(this,ES);if(this.elements=ut,dt&&AnnotationElement._hasPopupData(ot)){const ft=this.popup=Xn(this,ES,j3).call(this);for(const St of ut)St.popup=ft}else this.popup=null}render(){const{container:et}=this;et.classList.add("popupAnnotation"),et.role="comment";const ot=this.popup=Xn(this,ES,j3).call(this),ut=[];for(const ct of this.elements)ct.popup=ot,ct.container.ariaHasPopup="dialog",ut.push(ct.data.id),ct.addHighlightArea();return this.container.setAttribute("aria-controls",ut.map(ct=>`${AnnotationPrefix}${ct}`).join(",")),this.container}}ES=new WeakSet,j3=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var qu,py,TA,PA,fE,pE,Oo,xm,my,av,mE,gE,bm,Ku,f0,p0,_l,m0,gy,_S,g0,yE,ov,yy,Zl,vy,vE,fC,SS,F3,wS,$3,CS,B3,xE,pC,kS,V3,RA,A4,NA,T4,MA,P4,IA,R4,bE,mC,EE,gC,AS,z3;class PopupElement{constructor({container:g,color:et,elements:ot,titleObj:ut,modificationDate:ct,contentsObj:dt,richText:ft,parent:St,rect:kt,parentRect:Tt,open:Rt,commentManager:jt=null}){Rn(this,vE);Rn(this,SS);Rn(this,wS);Rn(this,CS);Rn(this,xE);Rn(this,kS);Rn(this,RA);Rn(this,NA);Rn(this,MA);Rn(this,IA);Rn(this,bE);Rn(this,EE);Rn(this,AS);Rn(this,qu,null);Rn(this,py,Xn(this,MA,P4).bind(this));Rn(this,TA,Xn(this,AS,z3).bind(this));Rn(this,PA,Xn(this,EE,gC).bind(this));Rn(this,fE,Xn(this,bE,mC).bind(this));Rn(this,pE,null);Rn(this,Oo,null);Rn(this,xm,null);Rn(this,my,null);Rn(this,av,null);Rn(this,mE,null);Rn(this,gE,null);Rn(this,bm,!1);Rn(this,Ku,null);Rn(this,f0,null);Rn(this,p0,null);Rn(this,_l,null);Rn(this,m0,null);Rn(this,gy,null);Rn(this,_S,null);Rn(this,g0,null);Rn(this,yE,null);Rn(this,ov,null);Rn(this,yy,!1);Rn(this,Zl,null);Rn(this,vy,null);In(this,Oo,g),In(this,yE,ut),In(this,xm,dt),In(this,g0,ft),In(this,mE,St),In(this,pE,et),In(this,_S,kt),In(this,gE,Tt),In(this,av,ot),In(this,qu,jt),In(this,Zl,ot[0]),In(this,my,PDFDateString.toDateObject(ct)),this.trigger=ot.flatMap(Ft=>Ft.getElementsToTriggerPopup()),jt?this.renderCommentButton():(Xn(this,vE,fC).call(this),Ut(this,Oo).hidden=!0,Rt&&Xn(this,bE,mC).call(this))}renderCommentButton(){if(Ut(this,_l)||(Ut(this,m0)||Xn(this,SS,F3).call(this),!Ut(this,m0)))return;const{signal:g}=In(this,f0,new AbortController),et=!!Ut(this,Zl).extraPopupElement,ot=()=>{Ut(this,qu).toggleCommentPopup(this,!0,void 0,!et)},ut=()=>{Ut(this,qu).toggleCommentPopup(this,!1,!0,!et)},ct=()=>{Ut(this,qu).toggleCommentPopup(this,!1,!1)};if(et){In(this,_l,Ut(this,Zl).container);for(const dt of this.trigger)dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.addEventListener("keydown",Ut(this,py),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ut,{signal:g}),dt.addEventListener("pointerleave",ct,{signal:g}),dt.classList.add("popupTriggerArea")}else{const dt=In(this,_l,document.createElement("button"));dt.className="annotationCommentButton";const ft=Ut(this,Zl).container;dt.style.zIndex=ft.style.zIndex+1,dt.tabIndex=0,dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Xn(this,CS,B3).call(this),Xn(this,wS,$3).call(this),dt.addEventListener("keydown",Ut(this,py),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ut,{signal:g}),dt.addEventListener("pointerleave",ct,{signal:g}),ft.after(dt)}}get commentButtonColor(){const{color:g,opacity:et}=Ut(this,Zl).commentData;return g?Ut(this,mE)._commentManager.makeCommentColor(g,et):null}focusCommentButton(){setTimeout(()=>{var g;(g=Ut(this,_l))==null||g.focus()},0)}getData(){const{richText:g,color:et,opacity:ot,creationDate:ut,modificationDate:ct}=Ut(this,Zl).commentData;return{contentsObj:{str:this.comment},richText:g,color:et,opacity:ot,creationDate:ut,modificationDate:ct}}get elementBeforePopup(){return Ut(this,_l)}get comment(){return Ut(this,vy)||In(this,vy,Ut(this,Zl).commentText),Ut(this,vy)}set comment(g){g!==this.comment&&(Ut(this,Zl).commentText=In(this,vy,g))}get parentBoundingClientRect(){return Ut(this,Zl).layer.getBoundingClientRect()}setCommentButtonStates({selected:g,hasPopup:et}){Ut(this,_l)&&(Ut(this,_l).classList.toggle("selected",g),Ut(this,_l).ariaExpanded=et)}setSelectedCommentButton(g){Ut(this,_l).classList.toggle("selected",g)}get commentPopupPosition(){if(Ut(this,gy))return Ut(this,gy);const{x:g,y:et,height:ot}=Ut(this,_l).getBoundingClientRect(),{x:ut,y:ct,width:dt,height:ft}=Ut(this,Zl).layer.getBoundingClientRect();return[(g-ut)/dt,(et+ot-ct)/ft]}set commentPopupPosition(g){In(this,gy,g)}hasDefaultPopupPosition(){return Ut(this,gy)===null}get commentButtonPosition(){return Ut(this,m0)}get commentButtonWidth(){return Ut(this,_l).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(g){const[et,ot]=Ut(this,gy)||this.commentButtonPosition.map(kt=>kt/100),ut=this.parentBoundingClientRect,{x:ct,y:dt,width:ft,height:St}=ut;Ut(this,qu).showDialog(null,this,ct+et*ft,dt+ot*St,{...g,parentDimensions:ut})}render(){var ot,ut;if(Ut(this,Ku))return;const g=In(this,Ku,document.createElement("div"));if(g.className="popup",Ut(this,pE)){const ct=g.style.outlineColor=Util$1.makeHexColor(...Ut(this,pE));g.style.backgroundColor=`color-mix(in srgb, ${ct} 30%, white)`}const et=document.createElement("span");if(et.className="header",(ot=Ut(this,yE))!=null&&ot.str){const ct=document.createElement("span");ct.className="title",et.append(ct),{dir:ct.dir,str:ct.textContent}=Ut(this,yE)}if(g.append(et),Ut(this,my)){const ct=document.createElement("time");ct.className="popupDate",ct.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ct.setAttribute("data-l10n-args",JSON.stringify({dateObj:Ut(this,my).valueOf()})),ct.dateTime=Ut(this,my).toISOString(),et.append(ct)}renderRichText({html:Ut(this,xE,pC)||Ut(this,xm).str,dir:(ut=Ut(this,xm))==null?void 0:ut.dir,className:"popupContent"},g),Ut(this,Oo).append(g)}updateEdited({rect:g,popup:et,deleted:ot}){var ut;if(Ut(this,qu)){ot?(this.remove(),In(this,vy,null)):et&&(et.deleted?this.remove():(Xn(this,CS,B3).call(this),In(this,vy,et.text))),g&&(In(this,m0,null),Xn(this,SS,F3).call(this),Xn(this,wS,$3).call(this));return}if(ot||et!=null&&et.deleted){this.remove();return}Xn(this,vE,fC).call(this),Ut(this,ov)||In(this,ov,{contentsObj:Ut(this,xm),richText:Ut(this,g0)}),g&&In(this,p0,null),et&&et.text&&(In(this,g0,Xn(this,NA,T4).call(this,et.text)),In(this,my,PDFDateString.toDateObject(et.date)),In(this,xm,null)),(ut=Ut(this,Ku))==null||ut.remove(),In(this,Ku,null)}resetEdited(){var g;Ut(this,ov)&&({contentsObj:Ko(this,xm)._,richText:Ko(this,g0)._}=Ut(this,ov),In(this,ov,null),(g=Ut(this,Ku))==null||g.remove(),In(this,Ku,null),In(this,p0,null))}remove(){var g,et,ot;if((g=Ut(this,f0))==null||g.abort(),In(this,f0,null),(et=Ut(this,Ku))==null||et.remove(),In(this,Ku,null),In(this,yy,!1),In(this,bm,!1),(ot=Ut(this,_l))==null||ot.remove(),In(this,_l,null),this.trigger)for(const ut of this.trigger)ut.classList.remove("popupTriggerArea")}forceHide(){In(this,yy,this.isVisible),Ut(this,yy)&&(Ut(this,Oo).hidden=!0)}maybeShow(){Ut(this,qu)||(Xn(this,vE,fC).call(this),Ut(this,yy)&&(Ut(this,Ku)||Xn(this,EE,gC).call(this),In(this,yy,!1),Ut(this,Oo).hidden=!1))}get isVisible(){return Ut(this,qu)?!1:Ut(this,Oo).hidden===!1}}qu=new WeakMap,py=new WeakMap,TA=new WeakMap,PA=new WeakMap,fE=new WeakMap,pE=new WeakMap,Oo=new WeakMap,xm=new WeakMap,my=new WeakMap,av=new WeakMap,mE=new WeakMap,gE=new WeakMap,bm=new WeakMap,Ku=new WeakMap,f0=new WeakMap,p0=new WeakMap,_l=new WeakMap,m0=new WeakMap,gy=new WeakMap,_S=new WeakMap,g0=new WeakMap,yE=new WeakMap,ov=new WeakMap,yy=new WeakMap,Zl=new WeakMap,vy=new WeakMap,vE=new WeakSet,fC=function(){var et;if(Ut(this,f0))return;In(this,f0,new AbortController);const{signal:g}=Ut(this,f0);for(const ot of this.trigger)ot.addEventListener("click",Ut(this,fE),{signal:g}),ot.addEventListener("pointerenter",Ut(this,PA),{signal:g}),ot.addEventListener("pointerleave",Ut(this,TA),{signal:g}),ot.classList.add("popupTriggerArea");for(const ot of Ut(this,av))(et=ot.container)==null||et.addEventListener("keydown",Ut(this,py),{signal:g})},SS=new WeakSet,F3=function(){const g=Ut(this,av).find(et=>et.hasCommentButton);g&&In(this,m0,g._normalizePoint(g.commentButtonPosition))},wS=new WeakSet,$3=function(){if(Ut(this,Zl).extraPopupElement&&!Ut(this,Zl).editor)return;this.renderCommentButton();const[g,et]=Ut(this,m0),{style:ot}=Ut(this,_l);ot.left=`calc(${g}%)`,ot.top=`calc(${et}% - var(--comment-button-dim))`},CS=new WeakSet,B3=function(){Ut(this,Zl).extraPopupElement||(this.renderCommentButton(),Ut(this,_l).style.backgroundColor=this.commentButtonColor||"")},xE=new WeakSet,pC=function(){const g=Ut(this,g0),et=Ut(this,xm);return g!=null&&g.str&&(!(et!=null&&et.str)||et.str===g.str)&&Ut(this,g0).html||null},kS=new WeakSet,V3=function(){var g,et,ot;return((ot=(et=(g=Ut(this,xE,pC))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.fontSize)||0},RA=new WeakSet,A4=function(){var g,et,ot;return((ot=(et=(g=Ut(this,xE,pC))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.color)||null},NA=new WeakSet,T4=function(g){const et=[],ot={str:g,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:et}]}},ut={style:{color:Ut(this,RA,A4),fontSize:Ut(this,kS,V3)?`calc(${Ut(this,kS,V3)}px * var(--total-scale-factor))`:""}};for(const ct of g.split(`
`))et.push({name:"span",value:ct,attributes:ut});return ot},MA=new WeakSet,P4=function(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&Ut(this,bm))&&Xn(this,bE,mC).call(this)},IA=new WeakSet,R4=function(){if(Ut(this,p0)!==null)return;const{page:{view:g},viewport:{rawDims:{pageWidth:et,pageHeight:ot,pageX:ut,pageY:ct}}}=Ut(this,mE);let dt=!!Ut(this,gE),ft=dt?Ut(this,gE):Ut(this,_S);for(const Bt of Ut(this,av))if(!ft||Util$1.intersect(Bt.data.rect,ft)!==null){ft=Bt.data.rect,dt=!0;break}const St=Util$1.normalizeRect([ft[0],g[3]-ft[1]+g[1],ft[2],g[3]-ft[3]+g[1]]),kt=5,Tt=dt?ft[2]-ft[0]+kt:0,Rt=St[0]+Tt,jt=St[1];In(this,p0,[100*(Rt-ut)/et,100*(jt-ct)/ot]);const{style:Ft}=Ut(this,Oo);Ft.left=`${Ut(this,p0)[0]}%`,Ft.top=`${Ut(this,p0)[1]}%`},bE=new WeakSet,mC=function(){if(Ut(this,qu)){Ut(this,qu).toggleCommentPopup(this,!1);return}In(this,bm,!Ut(this,bm)),Ut(this,bm)?(Xn(this,EE,gC).call(this),Ut(this,Oo).addEventListener("click",Ut(this,fE)),Ut(this,Oo).addEventListener("keydown",Ut(this,py))):(Xn(this,AS,z3).call(this),Ut(this,Oo).removeEventListener("click",Ut(this,fE)),Ut(this,Oo).removeEventListener("keydown",Ut(this,py)))},EE=new WeakSet,gC=function(){Ut(this,Ku)||this.render(),this.isVisible?Ut(this,bm)&&Ut(this,Oo).classList.add("focused"):(Xn(this,IA,R4).call(this),Ut(this,Oo).hidden=!1,Ut(this,Oo).style.zIndex=parseInt(Ut(this,Oo).style.zIndex)+1e3)},AS=new WeakSet,z3=function(){Ut(this,Oo).classList.remove("focused"),!(Ut(this,bm)||!this.isVisible)&&(Ut(this,Oo).hidden=!0,Ut(this,Oo).style.zIndex=parseInt(Ut(this,Oo).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const et of this.textContent){const ot=document.createElement("span");ot.textContent=et,g.append(ot)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var TS;class LineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Rn(this,TS,null)}render(){this.container.classList.add("lineAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=In(this,TS,this.svgFactory.createElement("svg:line"));return dt.setAttribute("x1",et.rect[2]-et.lineCoordinates[0]),dt.setAttribute("y1",et.rect[3]-et.lineCoordinates[1]),dt.setAttribute("x2",et.rect[2]-et.lineCoordinates[2]),dt.setAttribute("y2",et.rect[3]-et.lineCoordinates[3]),dt.setAttribute("stroke-width",et.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),ct.append(dt),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ut(this,TS)}addHighlightArea(){this.container.classList.add("highlightArea")}}TS=new WeakMap;var PS;class SquareAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Rn(this,PS,null)}render(){this.container.classList.add("squareAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=et.borderStyle.width,ft=In(this,PS,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",dt/2),ft.setAttribute("y",dt/2),ft.setAttribute("width",ot-dt),ft.setAttribute("height",ut-dt),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ct.append(ft),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ut(this,PS)}addHighlightArea(){this.container.classList.add("highlightArea")}}PS=new WeakMap;var RS;class CircleAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Rn(this,RS,null)}render(){this.container.classList.add("circleAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=et.borderStyle.width,ft=In(this,RS,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",ot/2),ft.setAttribute("cy",ut/2),ft.setAttribute("rx",ot/2-dt/2),ft.setAttribute("ry",ut/2-dt/2),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ct.append(ft),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ut(this,RS)}addHighlightArea(){this.container.classList.add("highlightArea")}}RS=new WeakMap;var NS;class PolylineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Rn(this,NS,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,vertices:ot,borderStyle:ut,popupRef:ct},width:dt,height:ft}=this;if(!ot)return this.container;const St=this.svgFactory.create(dt,ft,!0);let kt=[];for(let Rt=0,jt=ot.length;Rt<jt;Rt+=2){const Ft=ot[Rt]-et[0],Bt=et[3]-ot[Rt+1];kt.push(`${Ft},${Bt}`)}kt=kt.join(" ");const Tt=In(this,NS,this.svgFactory.createElement(this.svgElementName));return Tt.setAttribute("points",kt),Tt.setAttribute("stroke-width",ut.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),St.append(Tt),this.container.append(St),!ct&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ut(this,NS)}addHighlightArea(){this.container.classList.add("highlightArea")}}NS=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var MS,lv,IS,H3;class InkAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Rn(this,IS);Rn(this,MS,null);Rn(this,lv,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,rotation:ot,inkLists:ut,borderStyle:ct,popupRef:dt}}=this,{transform:ft,width:St,height:kt}=Xn(this,IS,H3).call(this,ot,et),Tt=this.svgFactory.create(St,kt,!0),Rt=In(this,MS,this.svgFactory.createElement("svg:g"));Tt.append(Rt),Rt.setAttribute("stroke-width",ct.width||1),Rt.setAttribute("stroke-linecap","round"),Rt.setAttribute("stroke-linejoin","round"),Rt.setAttribute("stroke-miterlimit",10),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),Rt.setAttribute("transform",ft);for(let jt=0,Ft=ut.length;jt<Ft;jt++){const Bt=this.svgFactory.createElement(this.svgElementName);Ut(this,lv).push(Bt),Bt.setAttribute("points",ut[jt].join(",")),Rt.append(Bt)}return!dt&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this._editOnDoubleClick(),this.container}updateEdited(et){super.updateEdited(et);const{thickness:ot,points:ut,rect:ct}=et,dt=Ut(this,MS);if(ot>=0&&dt.setAttribute("stroke-width",ot||1),ut)for(let ft=0,St=Ut(this,lv).length;ft<St;ft++)Ut(this,lv)[ft].setAttribute("points",ut[ft].join(","));if(ct){const{transform:ft,width:St,height:kt}=Xn(this,IS,H3).call(this,this.data.rotation,ct);dt.parentElement.setAttribute("viewBox",`0 0 ${St} ${kt}`),dt.setAttribute("transform",ft)}}getElementsToTriggerPopup(){return Ut(this,lv)}addHighlightArea(){this.container.classList.add("highlightArea")}}MS=new WeakMap,lv=new WeakMap,IS=new WeakSet,H3=function(et,ot){switch(et){case 90:return{transform:`rotate(90) translate(${-ot[0]},${ot[1]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};case 180:return{transform:`rotate(180) translate(${-ot[2]},${ot[1]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]};case 270:return{transform:`rotate(270) translate(${-ot[2]},${ot[3]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};default:return{transform:`translate(${-ot[0]},${ot[3]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),g){const ot=document.createElement("mark");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),g){const ot=document.createElement("s");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var OS,LS,U3;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(et){var ut;super(et,{isRenderable:!0});Rn(this,LS);Rn(this,OS,null);const{file:ot}=this.data;this.filename=ot.filename,this.content=ot.content,(ut=this.linkService.eventBus)==null||ut.dispatch("fileattachmentannotation",{source:this,...ot})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:et,data:ot}=this;let ut;ot.hasAppearance||ot.fillAlpha===0?ut=document.createElement("div"):(ut=document.createElement("img"),ut.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ot.name)?"paperclip":"pushpin"}.svg`,ot.fillAlpha&&ot.fillAlpha<1&&(ut.style=`filter: opacity(${Math.round(ot.fillAlpha*100)}%);`)),ut.addEventListener("dblclick",Xn(this,LS,U3).bind(this)),In(this,OS,ut);const{isMac:ct}=util_FeatureTest.platform;return et.addEventListener("keydown",dt=>{dt.key==="Enter"&&(ct?dt.metaKey:dt.ctrlKey)&&Xn(this,LS,U3).call(this)}),!ot.popupRef&&this.hasPopupData?this._createPopup():ut.classList.add("popupTriggerArea"),et.append(ut),et}getElementsToTriggerPopup(){return Ut(this,OS)}addHighlightArea(){this.container.classList.add("highlightArea")}}OS=new WeakMap,LS=new WeakSet,U3=function(){var et;(et=this.downloadManager)==null||et.openOrDownloadData(this.content,this.filename)};var _E,uv,SE,xy,DS,cv,jS,G3,FS,W3,$S;let AnnotationLayer$1=($S=class{constructor({div:g,accessibilityManager:et,annotationCanvasMap:ot,annotationEditorUIManager:ut,page:ct,viewport:dt,structTreeLayer:ft,commentManager:St,linkService:kt,annotationStorage:Tt}){Rn(this,jS);Rn(this,FS);Rn(this,_E,null);Rn(this,uv,null);Rn(this,SE,null);Rn(this,xy,new Map);Rn(this,DS,null);Rn(this,cv,null);this.div=g,In(this,_E,et),In(this,uv,ot),In(this,DS,ft||null),In(this,cv,kt||null),In(this,SE,Tt||new AnnotationStorage),this.page=ct,this.viewport=dt,this.zIndex=0,this._annotationEditorUIManager=ut,this._commentManager=St||null}hasEditableAnnotations(){return Ut(this,xy).size>0}async render(g){var dt,ft,St;const{annotations:et}=g,ot=this.div;setLayerDimensions(ot,this.viewport);const ut=new Map,ct={data:null,layer:ot,linkService:Ut(this,cv),downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:Ut(this,SE),enableComment:g.enableComment===!0,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const kt of et){if(kt.noHTML)continue;const Tt=kt.annotationType===AnnotationType.POPUP;if(Tt){const Ft=ut.get(kt.id);if(!Ft)continue;ct.elements=Ft}else if(kt.rect[2]===kt.rect[0]||kt.rect[3]===kt.rect[1])continue;ct.data=kt;const Rt=AnnotationElementFactory.create(ct);if(!Rt.isRenderable)continue;if(!Tt&&kt.popupRef){const Ft=ut.get(kt.popupRef);Ft?Ft.push(Rt):ut.set(kt.popupRef,[Rt])}const jt=Rt.render();kt.hidden&&(jt.style.visibility="hidden"),await Xn(this,jS,G3).call(this,jt,kt.id,ct.elements),(ft=(dt=Rt.extraPopupElement)==null?void 0:dt.popup)==null||ft.renderCommentButton(),Rt._isEditable&&(Ut(this,xy).set(Rt.data.id,Rt),(St=this._annotationEditorUIManager)==null||St.renderAnnotationElement(Rt))}Xn(this,FS,W3).call(this)}async addLinkAnnotations(g){const et={data:null,layer:this.div,linkService:Ut(this,cv),svgFactory:new DOMSVGFactory,parent:this};for(const ot of g){ot.borderStyle||(ot.borderStyle=$S._defaultBorderStyle),et.data=ot;const ut=AnnotationElementFactory.create(et);if(!ut.isRenderable)continue;const ct=ut.render();await Xn(this,jS,G3).call(this,ct,ot.id,null)}}update({viewport:g}){const et=this.div;this.viewport=g,setLayerDimensions(et,{rotation:g.rotation}),Xn(this,FS,W3).call(this),et.hidden=!1}getEditableAnnotations(){return Array.from(Ut(this,xy).values())}getEditableAnnotation(g){return Ut(this,xy).get(g)}addFakeAnnotation(g){var ft;const{div:et}=this,{id:ot,rotation:ut}=g,ct=new EditorAnnotationElement({data:{id:ot,rect:g.getPDFRect(),rotation:ut},editor:g,layer:et,parent:this,enableComment:!!this._commentManager,linkService:Ut(this,cv),annotationStorage:Ut(this,SE)}),dt=ct.render();return et.append(dt),(ft=Ut(this,_E))==null||ft.moveElementInDOM(et,dt,dt,!1),ct.createOrUpdatePopup(),ct}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},_E=new WeakMap,uv=new WeakMap,SE=new WeakMap,xy=new WeakMap,DS=new WeakMap,cv=new WeakMap,jS=new WeakSet,G3=async function(g,et,ot){var ft,St;const ut=g.firstChild||g,ct=ut.id=`${AnnotationPrefix}${et}`,dt=await((ft=Ut(this,DS))==null?void 0:ft.getAriaAttributes(ct));if(dt)for(const[kt,Tt]of dt)ut.setAttribute(kt,Tt);ot?ot.at(-1).container.after(g):(this.div.append(g),(St=Ut(this,_E))==null||St.moveElementInDOM(this.div,g,ut,!1))},FS=new WeakSet,W3=function(){var et;if(!Ut(this,uv))return;const g=this.div;for(const[ot,ut]of Ut(this,uv)){const ct=g.querySelector(`[data-annotation-id="${ot}"]`);if(!ct)continue;ut.className="annotationContent";const{firstChild:dt}=ct;dt?dt.nodeName==="CANVAS"?dt.replaceWith(ut):dt.classList.contains("annotationContent")?dt.after(ut):dt.before(ut):ct.append(ut);const ft=Ut(this,xy).get(ot);ft&&(ft._hasNoCanvas?((et=this._annotationEditorUIManager)==null||et.setMissingCanvas(ot,ct.id,ut),ft._hasNoCanvas=!1):ft.canvas=ut)}Ut(this,uv).clear()},$S);const EOL_PATTERN=/\r\n?|\n/g;var Yu,BS,hv,Xu,OA,N4,LA,M4,DA,I4,wE,yC,CE,vC,kE,xC,jA,O4,VS,q3,FA,L4;const fo=class fo extends AnnotationEditor{constructor(et){super({...et,name:"freeTextEditor"});Rn(this,OA);Rn(this,LA);Rn(this,DA);Rn(this,wE);Rn(this,kE);Rn(this,jA);Rn(this,FA);Rn(this,Yu,"");Rn(this,BS,`${this.id}-editor`);Rn(this,hv,null);Rn(this,Xu,void 0);Ur(this,"_colorPicker",null);this.color=et.color||fo._defaultColor||AnnotationEditor._defaultLineColor,In(this,Xu,et.fontSize||fo._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const et=fo.prototype,ot=dt=>dt.isEmpty(),ut=AnnotationEditorUIManager.TRANSLATE_SMALL,ct=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],et._translateEmpty,{args:[-ut,0],checker:ot}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et._translateEmpty,{args:[-ct,0],checker:ot}],[["ArrowRight","mac+ArrowRight"],et._translateEmpty,{args:[ut,0],checker:ot}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et._translateEmpty,{args:[ct,0],checker:ot}],[["ArrowUp","mac+ArrowUp"],et._translateEmpty,{args:[0,-ut],checker:ot}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et._translateEmpty,{args:[0,-ct],checker:ot}],[["ArrowDown","mac+ArrowDown"],et._translateEmpty,{args:[0,ut],checker:ot}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et._translateEmpty,{args:[0,ct],checker:ot}]]))}static initialize(et,ot){AnnotationEditor.initialize(et,ot);const ut=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ut.getPropertyValue("--freetext-padding"))}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:fo._defaultFontSize=ot;break;case AnnotationEditorParamsType.FREETEXT_COLOR:fo._defaultColor=ot;break}}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:Xn(this,OA,N4).call(this,ot);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Xn(this,LA,M4).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,fo._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,fo._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Ut(this,Xu)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var et;this.editorDiv.style.color=this.color,(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_translateEmpty(et,ot){this._uiManager.translateSelectedEditors(et,ot,!0)}getInitialTranslation(){const et=this.parentScale;return[-fo._internalPadding*et,-(fo._internalPadding+Ut(this,Xu))*et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),In(this,hv,new AbortController);const et=this._uiManager.combinedSignal(Ut(this,hv));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:et}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:et}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:et}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:et}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:et}),!0}disableEditMode(){var et;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Ut(this,BS)),this._isDraggable=!0,(et=Ut(this,hv))==null||et.abort(),In(this,hv,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(et){this._focusEventsAllowed&&(super.focusin(et),et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(et){var ot;this.width||(this.enableEditMode(),et&&this.editorDiv.focus(),(ot=this._initialOptions)!=null&&ot.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const et=Ut(this,Yu),ot=In(this,Yu,Xn(this,DA,I4).call(this).trimEnd());if(et===ot)return;const ut=ct=>{if(In(this,Yu,ct),!ct){this.remove();return}Xn(this,kE,xC).call(this),this._uiManager.rebuild(this),Xn(this,wE,yC).call(this)};this.addCommands({cmd:()=>{ut(ot)},undo:()=>{ut(et)},mustExec:!1}),Xn(this,wE,yC).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(et){et.target===this.div&&et.key==="Enter"&&(this.enterInEditMode(),et.preventDefault())}editorDivKeydown(et){fo._keyboardManager.exec(this,et)}editorDivFocus(et){this.isEditing=!0}editorDivBlur(et){this.isEditing=!1}editorDivInput(et){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let et,ot;(this._isCopy||this.annotationElementId)&&(et=this.x,ot=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Ut(this,BS)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ut}=this.editorDiv;if(ut.fontSize=`calc(${Ut(this,Xu)}px * var(--total-scale-factor))`,ut.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ct,dt]=this.parentDimensions;if(this.annotationElementId){const{position:ft}=this._initialData;let[St,kt]=this.getInitialTranslation();[St,kt]=this.pageTranslationToScreen(St,kt);const[Tt,Rt]=this.pageDimensions,[jt,Ft]=this.pageTranslation;let Bt,Ht;switch(this.rotation){case 0:Bt=et+(ft[0]-jt)/Tt,Ht=ot+this.height-(ft[1]-Ft)/Rt;break;case 90:Bt=et+(ft[0]-jt)/Tt,Ht=ot-(ft[1]-Ft)/Rt,[St,kt]=[kt,-St];break;case 180:Bt=et-this.width+(ft[0]-jt)/Tt,Ht=ot-(ft[1]-Ft)/Rt,[St,kt]=[-St,-kt];break;case 270:Bt=et+(ft[0]-jt-this.height*Rt)/Tt,Ht=ot+(ft[1]-Ft-this.width*Tt)/Rt,[St,kt]=[-kt,St];break}this.setAt(Bt*ct,Ht*dt,St,kt)}else this._moveAfterPaste(et,ot);Xn(this,kE,xC).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(et){var Bt,Ht,Yt;const ot=et.clipboardData||window.clipboardData,{types:ut}=ot;if(ut.length===1&&ut[0]==="text/plain")return;et.preventDefault();const ct=Xn(Bt=fo,VS,q3).call(Bt,ot.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ct)return;const dt=window.getSelection();if(!dt.rangeCount)return;this.editorDiv.normalize(),dt.deleteFromDocument();const ft=dt.getRangeAt(0);if(!ct.includes(`
`)){ft.insertNode(document.createTextNode(ct)),this.editorDiv.normalize(),dt.collapseToStart();return}const{startContainer:St,startOffset:kt}=ft,Tt=[],Rt=[];if(St.nodeType===Node.TEXT_NODE){const zt=St.parentElement;if(Rt.push(St.nodeValue.slice(kt).replaceAll(EOL_PATTERN,"")),zt!==this.editorDiv){let Kt=Tt;for(const en of this.editorDiv.childNodes){if(en===zt){Kt=Rt;continue}Kt.push(Xn(Ht=fo,CE,vC).call(Ht,en))}}Tt.push(St.nodeValue.slice(0,kt).replaceAll(EOL_PATTERN,""))}else if(St===this.editorDiv){let zt=Tt,Kt=0;for(const en of this.editorDiv.childNodes)Kt++===kt&&(zt=Rt),zt.push(Xn(Yt=fo,CE,vC).call(Yt,en))}In(this,Yu,`${Tt.join(`
`)}${ct}${Rt.join(`
`)}`),Xn(this,kE,xC).call(this);const jt=new Range;let Ft=Math.sumPrecise(Tt.map(zt=>zt.length));for(const{firstChild:zt}of this.editorDiv.childNodes)if(zt.nodeType===Node.TEXT_NODE){const Kt=zt.nodeValue.length;if(Ft<=Kt){jt.setStart(zt,Ft),jt.setEnd(zt,Ft);break}Ft-=Kt}dt.removeAllRanges(),dt.addRange(jt)}get contentDiv(){return this.editorDiv}getPDFRect(){const et=fo._internalPadding*this.parentScale;return this.getRect(et,et)}static async deserialize(et,ot,ut){var ft;let ct=null;if(et instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:St,fontColor:kt},rect:Tt,rotation:Rt,id:jt,popupRef:Ft,richText:Bt,contentsObj:Ht,creationDate:Yt,modificationDate:zt},textContent:Kt,textPosition:en,parent:{page:{pageNumber:tn}}}=et;if(!Kt||Kt.length===0)return null;ct=et={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:St,value:Kt.join(`
`),position:en,pageIndex:tn-1,rect:Tt.slice(0),rotation:Rt,annotationElementId:jt,id:jt,deleted:!1,popupRef:Ft,comment:(Ht==null?void 0:Ht.str)||null,richText:Bt,creationDate:Yt,modificationDate:zt}}const dt=await super.deserialize(et,ot,ut);return In(dt,Xu,et.fontSize),dt.color=Util$1.makeHexColor(...et.color),In(dt,Yu,Xn(ft=fo,VS,q3).call(ft,et.value)),dt._initialData=ct,et.comment&&dt.setCommentData(et),dt}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ut=Object.assign(super.serialize(et),{color:ot,fontSize:Ut(this,Xu),value:Xn(this,jA,O4).call(this)});return this.addComment(ut),et?(ut.isCopy=!0,ut):this.annotationElementId&&!Xn(this,FA,L4).call(this,ut)?null:(ut.id=this.annotationElementId,ut)}renderAnnotationElement(et){const ot=super.renderAnnotationElement(et);if(!ot)return null;const{style:ut}=ot;ut.fontSize=`calc(${Ut(this,Xu)}px * var(--total-scale-factor))`,ut.color=this.color,ot.replaceChildren();for(const ct of Ut(this,Yu).split(`
`)){const dt=document.createElement("div");dt.append(ct?document.createTextNode(ct):document.createElement("br")),ot.append(dt)}return et.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Ut(this,Yu)}}),ot}resetAnnotationElement(et){super.resetAnnotationElement(et),et.resetEdited()}};Yu=new WeakMap,BS=new WeakMap,hv=new WeakMap,Xu=new WeakMap,OA=new WeakSet,N4=function(et){const ot=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--total-scale-factor))`,this.translate(0,-(ct-Ut(this,Xu))*this.parentScale),In(this,Xu,ct),Xn(this,wE,yC).call(this)},ut=Ut(this,Xu);this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},LA=new WeakSet,M4=function(et){const ot=ct=>{this.color=ct,this.onUpdatedColor()},ut=this.color;this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},DA=new WeakSet,I4=function(){var ut;const et=[];this.editorDiv.normalize();let ot=null;for(const ct of this.editorDiv.childNodes)(ot==null?void 0:ot.nodeType)===Node.TEXT_NODE&&ct.nodeName==="BR"||(et.push(Xn(ut=fo,CE,vC).call(ut,ct)),ot=ct);return et.join(`
`)},wE=new WeakSet,yC=function(){const[et,ot]=this.parentDimensions;let ut;if(this.isAttachedToDOM)ut=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:dt}=this,ft=dt.style.display,St=dt.classList.contains("hidden");dt.classList.remove("hidden"),dt.style.display="hidden",ct.div.append(this.div),ut=dt.getBoundingClientRect(),dt.remove(),dt.style.display=ft,dt.classList.toggle("hidden",St)}this.rotation%180===this.parentRotation%180?(this.width=ut.width/et,this.height=ut.height/ot):(this.width=ut.height/et,this.height=ut.width/ot),this.fixAndSetPosition()},CE=new WeakSet,vC=function(et){return(et.nodeType===Node.TEXT_NODE?et.nodeValue:et.innerText).replaceAll(EOL_PATTERN,"")},kE=new WeakSet,xC=function(){if(this.editorDiv.replaceChildren(),!!Ut(this,Yu))for(const et of Ut(this,Yu).split(`
`)){const ot=document.createElement("div");ot.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ot)}},jA=new WeakSet,O4=function(){return Ut(this,Yu).replaceAll(""," ")},VS=new WeakSet,q3=function(et){return et.replaceAll(" ","")},FA=new WeakSet,L4=function(et){const{value:ot,fontSize:ut,color:ct,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||et.value!==ot||et.fontSize!==ut||et.color.some((ft,St)=>ft!==ct[St])||et.pageIndex!==dt},Rn(fo,CE),Rn(fo,VS),Ur(fo,"_freeTextDefaultContent",""),Ur(fo,"_internalPadding",0),Ur(fo,"_defaultColor",null),Ur(fo,"_defaultFontSize",10),Ur(fo,"_type","freetext"),Ur(fo,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=fo;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(g,et){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(g,et,ot,ut,ct,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft]*ut,dt[ft+1]=ot+g[ft+1]*ct;return dt}static _rescaleAndSwap(g,et,ot,ut,ct,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft+1]*ut,dt[ft+1]=ot+g[ft]*ct;return dt}static _translate(g,et,ot,ut){ut||(ut=new Float32Array(g.length));for(let ct=0,dt=g.length;ct<dt;ct+=2)ut[ct]=et+g[ct],ut[ct+1]=ot+g[ct+1];return ut}static svgRound(g){return Math.round(g*1e4)}static _normalizePoint(g,et,ot,ut,ct){switch(ct){case 90:return[1-et/ot,g/ut];case 180:return[1-g/ot,1-et/ut];case 270:return[et/ot,1-g/ut];default:return[g/ot,et/ut]}}static _normalizePagePoint(g,et,ot){switch(ot){case 90:return[1-et,g];case 180:return[1-g,1-et];case 270:return[et,1-g];default:return[g,et]}}static createBezierPoints(g,et,ot,ut,ct,dt){return[(g+5*ot)/6,(et+5*ut)/6,(5*ot+ct)/6,(5*ut+dt)/6,(ot+ct)/2,(ut+dt)/2]}}Ur(Outline,"PRECISION",1e-4);var Ju,Bp,AE,TE,Em,Bs,dv,fv,zS,HS,PE,RE,by,US,$A,BA,pv,V_,VA,D4,zA,j4,HA,F4,UA,$4,GA,B4,WA,V4;const zm=class zm{constructor({x:g,y:et},ot,ut,ct,dt,ft=0){Rn(this,pv);Rn(this,VA);Rn(this,zA);Rn(this,HA);Rn(this,UA);Rn(this,GA);Rn(this,WA);Rn(this,Ju,void 0);Rn(this,Bp,[]);Rn(this,AE,void 0);Rn(this,TE,void 0);Rn(this,Em,[]);Rn(this,Bs,new Float32Array(18));Rn(this,dv,void 0);Rn(this,fv,void 0);Rn(this,zS,void 0);Rn(this,HS,void 0);Rn(this,PE,void 0);Rn(this,RE,void 0);Rn(this,by,[]);In(this,Ju,ot),In(this,RE,ct*ut),In(this,TE,dt),Ut(this,Bs).set([NaN,NaN,NaN,NaN,g,et],6),In(this,AE,ft),In(this,HS,Ut(zm,US)*ut),In(this,zS,Ut(zm,BA)*ut),In(this,PE,ut),Ut(this,by).push(g,et)}isEmpty(){return isNaN(Ut(this,Bs)[8])}add({x:g,y:et}){var Sn;In(this,dv,g),In(this,fv,et);const[ot,ut,ct,dt]=Ut(this,Ju);let[ft,St,kt,Tt]=Ut(this,Bs).subarray(8,12);const Rt=g-kt,jt=et-Tt,Ft=Math.hypot(Rt,jt);if(Ft<Ut(this,zS))return!1;const Bt=Ft-Ut(this,HS),Ht=Bt/Ft,Yt=Ht*Rt,zt=Ht*jt;let Kt=ft,en=St;ft=kt,St=Tt,kt+=Yt,Tt+=zt,(Sn=Ut(this,by))==null||Sn.push(g,et);const tn=-zt/Bt,on=Yt/Bt,an=tn*Ut(this,RE),un=on*Ut(this,RE);return Ut(this,Bs).set(Ut(this,Bs).subarray(2,8),0),Ut(this,Bs).set([kt+an,Tt+un],4),Ut(this,Bs).set(Ut(this,Bs).subarray(14,18),12),Ut(this,Bs).set([kt-an,Tt-un],16),isNaN(Ut(this,Bs)[6])?(Ut(this,Em).length===0&&(Ut(this,Bs).set([ft+an,St+un],2),Ut(this,Em).push(NaN,NaN,NaN,NaN,(ft+an-ot)/ct,(St+un-ut)/dt),Ut(this,Bs).set([ft-an,St-un],14),Ut(this,Bp).push(NaN,NaN,NaN,NaN,(ft-an-ot)/ct,(St-un-ut)/dt)),Ut(this,Bs).set([Kt,en,ft,St,kt,Tt],6),!this.isEmpty()):(Ut(this,Bs).set([Kt,en,ft,St,kt,Tt],6),Math.abs(Math.atan2(en-St,Kt-ft)-Math.atan2(zt,Yt))<Math.PI/2?([ft,St,kt,Tt]=Ut(this,Bs).subarray(2,6),Ut(this,Em).push(NaN,NaN,NaN,NaN,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),[ft,St,Kt,en]=Ut(this,Bs).subarray(14,18),Ut(this,Bp).push(NaN,NaN,NaN,NaN,((Kt+ft)/2-ot)/ct,((en+St)/2-ut)/dt),!0):([Kt,en,ft,St,kt,Tt]=Ut(this,Bs).subarray(0,6),Ut(this,Em).push(((Kt+5*ft)/6-ot)/ct,((en+5*St)/6-ut)/dt,((5*ft+kt)/6-ot)/ct,((5*St+Tt)/6-ut)/dt,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),[kt,Tt,ft,St,Kt,en]=Ut(this,Bs).subarray(12,18),Ut(this,Bp).push(((Kt+5*ft)/6-ot)/ct,((en+5*St)/6-ut)/dt,((5*ft+kt)/6-ot)/ct,((5*St+Tt)/6-ut)/dt,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),!0))}toSVGPath(){if(this.isEmpty())return"";const g=Ut(this,Em),et=Ut(this,Bp);if(isNaN(Ut(this,Bs)[6])&&!this.isEmpty())return Xn(this,VA,D4).call(this);const ot=[];ot.push(`M${g[4]} ${g[5]}`);for(let ut=6;ut<g.length;ut+=6)isNaN(g[ut])?ot.push(`L${g[ut+4]} ${g[ut+5]}`):ot.push(`C${g[ut]} ${g[ut+1]} ${g[ut+2]} ${g[ut+3]} ${g[ut+4]} ${g[ut+5]}`);Xn(this,HA,F4).call(this,ot);for(let ut=et.length-6;ut>=6;ut-=6)isNaN(et[ut])?ot.push(`L${et[ut+4]} ${et[ut+5]}`):ot.push(`C${et[ut]} ${et[ut+1]} ${et[ut+2]} ${et[ut+3]} ${et[ut+4]} ${et[ut+5]}`);return Xn(this,zA,j4).call(this,ot),ot.join(" ")}newFreeDrawOutline(g,et,ot,ut,ct,dt){return new FreeDrawOutline(g,et,ot,ut,ct,dt)}getOutlines(){var Rt;const g=Ut(this,Em),et=Ut(this,Bp),ot=Ut(this,Bs),[ut,ct,dt,ft]=Ut(this,Ju),St=new Float32Array((((Rt=Ut(this,by))==null?void 0:Rt.length)??0)+2);for(let jt=0,Ft=St.length-2;jt<Ft;jt+=2)St[jt]=(Ut(this,by)[jt]-ut)/dt,St[jt+1]=(Ut(this,by)[jt+1]-ct)/ft;if(St[St.length-2]=(Ut(this,dv)-ut)/dt,St[St.length-1]=(Ut(this,fv)-ct)/ft,isNaN(ot[6])&&!this.isEmpty())return Xn(this,UA,$4).call(this,St);const kt=new Float32Array(Ut(this,Em).length+24+Ut(this,Bp).length);let Tt=g.length;for(let jt=0;jt<Tt;jt+=2){if(isNaN(g[jt])){kt[jt]=kt[jt+1]=NaN;continue}kt[jt]=g[jt],kt[jt+1]=g[jt+1]}Tt=Xn(this,WA,V4).call(this,kt,Tt);for(let jt=et.length-6;jt>=6;jt-=6)for(let Ft=0;Ft<6;Ft+=2){if(isNaN(et[jt+Ft])){kt[Tt]=kt[Tt+1]=NaN,Tt+=2;continue}kt[Tt]=et[jt+Ft],kt[Tt+1]=et[jt+Ft+1],Tt+=2}return Xn(this,GA,B4).call(this,kt,Tt),this.newFreeDrawOutline(kt,St,Ut(this,Ju),Ut(this,PE),Ut(this,AE),Ut(this,TE))}};Ju=new WeakMap,Bp=new WeakMap,AE=new WeakMap,TE=new WeakMap,Em=new WeakMap,Bs=new WeakMap,dv=new WeakMap,fv=new WeakMap,zS=new WeakMap,HS=new WeakMap,PE=new WeakMap,RE=new WeakMap,by=new WeakMap,US=new WeakMap,$A=new WeakMap,BA=new WeakMap,pv=new WeakSet,V_=function(){const g=Ut(this,Bs).subarray(4,6),et=Ut(this,Bs).subarray(16,18),[ot,ut,ct,dt]=Ut(this,Ju);return[(Ut(this,dv)+(g[0]-et[0])/2-ot)/ct,(Ut(this,fv)+(g[1]-et[1])/2-ut)/dt,(Ut(this,dv)+(et[0]-g[0])/2-ot)/ct,(Ut(this,fv)+(et[1]-g[1])/2-ut)/dt]},VA=new WeakSet,D4=function(){const[g,et,ot,ut]=Ut(this,Ju),[ct,dt,ft,St]=Xn(this,pv,V_).call(this);return`M${(Ut(this,Bs)[2]-g)/ot} ${(Ut(this,Bs)[3]-et)/ut} L${(Ut(this,Bs)[4]-g)/ot} ${(Ut(this,Bs)[5]-et)/ut} L${ct} ${dt} L${ft} ${St} L${(Ut(this,Bs)[16]-g)/ot} ${(Ut(this,Bs)[17]-et)/ut} L${(Ut(this,Bs)[14]-g)/ot} ${(Ut(this,Bs)[15]-et)/ut} Z`},zA=new WeakSet,j4=function(g){const et=Ut(this,Bp);g.push(`L${et[4]} ${et[5]} Z`)},HA=new WeakSet,F4=function(g){const[et,ot,ut,ct]=Ut(this,Ju),dt=Ut(this,Bs).subarray(4,6),ft=Ut(this,Bs).subarray(16,18),[St,kt,Tt,Rt]=Xn(this,pv,V_).call(this);g.push(`L${(dt[0]-et)/ut} ${(dt[1]-ot)/ct} L${St} ${kt} L${Tt} ${Rt} L${(ft[0]-et)/ut} ${(ft[1]-ot)/ct}`)},UA=new WeakSet,$4=function(g){const et=Ut(this,Bs),[ot,ut,ct,dt]=Ut(this,Ju),[ft,St,kt,Tt]=Xn(this,pv,V_).call(this),Rt=new Float32Array(36);return Rt.set([NaN,NaN,NaN,NaN,(et[2]-ot)/ct,(et[3]-ut)/dt,NaN,NaN,NaN,NaN,(et[4]-ot)/ct,(et[5]-ut)/dt,NaN,NaN,NaN,NaN,ft,St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,(et[16]-ot)/ct,(et[17]-ut)/dt,NaN,NaN,NaN,NaN,(et[14]-ot)/ct,(et[15]-ut)/dt],0),this.newFreeDrawOutline(Rt,g,Ut(this,Ju),Ut(this,PE),Ut(this,AE),Ut(this,TE))},GA=new WeakSet,B4=function(g,et){const ot=Ut(this,Bp);return g.set([NaN,NaN,NaN,NaN,ot[4],ot[5]],et),et+=6},WA=new WeakSet,V4=function(g,et){const ot=Ut(this,Bs).subarray(4,6),ut=Ut(this,Bs).subarray(16,18),[ct,dt,ft,St]=Ut(this,Ju),[kt,Tt,Rt,jt]=Xn(this,pv,V_).call(this);return g.set([NaN,NaN,NaN,NaN,(ot[0]-ct)/ft,(ot[1]-dt)/St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,Rt,jt,NaN,NaN,NaN,NaN,(ut[0]-ct)/ft,(ut[1]-dt)/St],et),et+=24},Rn(zm,US,8),Rn(zm,$A,2),Rn(zm,BA,Ut(zm,US)+Ut(zm,$A));let FreeDrawOutliner=zm;var NE,mv,y0,GS,Qu,qS,$o,qA,z4;class FreeDrawOutline extends Outline{constructor(et,ot,ut,ct,dt,ft){super();Rn(this,qA);Rn(this,NE,void 0);Rn(this,mv,new Float32Array(4));Rn(this,y0,void 0);Rn(this,GS,void 0);Rn(this,Qu,void 0);Rn(this,qS,void 0);Rn(this,$o,void 0);In(this,$o,et),In(this,Qu,ot),In(this,NE,ut),In(this,qS,ct),In(this,y0,dt),In(this,GS,ft),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Xn(this,qA,z4).call(this,ft);const[St,kt,Tt,Rt]=Ut(this,mv);for(let jt=0,Ft=et.length;jt<Ft;jt+=2)et[jt]=(et[jt]-St)/Tt,et[jt+1]=(et[jt+1]-kt)/Rt;for(let jt=0,Ft=ot.length;jt<Ft;jt+=2)ot[jt]=(ot[jt]-St)/Tt,ot[jt+1]=(ot[jt+1]-kt)/Rt}toSVGPath(){const et=[`M${Ut(this,$o)[4]} ${Ut(this,$o)[5]}`];for(let ot=6,ut=Ut(this,$o).length;ot<ut;ot+=6){if(isNaN(Ut(this,$o)[ot])){et.push(`L${Ut(this,$o)[ot+4]} ${Ut(this,$o)[ot+5]}`);continue}et.push(`C${Ut(this,$o)[ot]} ${Ut(this,$o)[ot+1]} ${Ut(this,$o)[ot+2]} ${Ut(this,$o)[ot+3]} ${Ut(this,$o)[ot+4]} ${Ut(this,$o)[ot+5]}`)}return et.push("Z"),et.join(" ")}serialize([et,ot,ut,ct],dt){const ft=ut-et,St=ct-ot;let kt,Tt;switch(dt){case 0:kt=Outline._rescale(Ut(this,$o),et,ct,ft,-St),Tt=Outline._rescale(Ut(this,Qu),et,ct,ft,-St);break;case 90:kt=Outline._rescaleAndSwap(Ut(this,$o),et,ot,ft,St),Tt=Outline._rescaleAndSwap(Ut(this,Qu),et,ot,ft,St);break;case 180:kt=Outline._rescale(Ut(this,$o),ut,ot,-ft,St),Tt=Outline._rescale(Ut(this,Qu),ut,ot,-ft,St);break;case 270:kt=Outline._rescaleAndSwap(Ut(this,$o),ut,ct,-ft,-St),Tt=Outline._rescaleAndSwap(Ut(this,Qu),ut,ct,-ft,-St);break}return{outline:Array.from(kt),points:[Array.from(Tt)]}}get box(){return Ut(this,mv)}newOutliner(et,ot,ut,ct,dt,ft=0){return new FreeDrawOutliner(et,ot,ut,ct,dt,ft)}getNewOutline(et,ot){const[ut,ct,dt,ft]=Ut(this,mv),[St,kt,Tt,Rt]=Ut(this,NE),jt=dt*Tt,Ft=ft*Rt,Bt=ut*Tt+St,Ht=ct*Rt+kt,Yt=this.newOutliner({x:Ut(this,Qu)[0]*jt+Bt,y:Ut(this,Qu)[1]*Ft+Ht},Ut(this,NE),Ut(this,qS),et,Ut(this,GS),ot??Ut(this,y0));for(let zt=2;zt<Ut(this,Qu).length;zt+=2)Yt.add({x:Ut(this,Qu)[zt]*jt+Bt,y:Ut(this,Qu)[zt+1]*Ft+Ht});return Yt.getOutlines()}}NE=new WeakMap,mv=new WeakMap,y0=new WeakMap,GS=new WeakMap,Qu=new WeakMap,qS=new WeakMap,$o=new WeakMap,qA=new WeakSet,z4=function(et){const ot=Ut(this,$o);let ut=ot[4],ct=ot[5];const dt=[ut,ct,ut,ct];let ft=ut,St=ct,kt=ut,Tt=ct;const Rt=et?Math.max:Math.min,jt=new Float32Array(4);for(let Bt=6,Ht=ot.length;Bt<Ht;Bt+=6){const Yt=ot[Bt+4],zt=ot[Bt+5];isNaN(ot[Bt])?(Util$1.pointBoundingBox(Yt,zt,dt),St>zt?(ft=Yt,St=zt):St===zt&&(ft=Rt(ft,Yt)),Tt<zt?(kt=Yt,Tt=zt):Tt===zt&&(kt=Rt(kt,Yt))):(jt[0]=jt[1]=1/0,jt[2]=jt[3]=-1/0,Util$1.bezierBoundingBox(ut,ct,...ot.slice(Bt,Bt+6),jt),Util$1.rectBoundingBox(jt[0],jt[1],jt[2],jt[3],dt),St>jt[1]?(ft=jt[0],St=jt[1]):St===jt[1]&&(ft=Rt(ft,jt[0])),Tt<jt[3]?(kt=jt[2],Tt=jt[3]):Tt===jt[3]&&(kt=Rt(kt,jt[2]))),ut=Yt,ct=zt}const Ft=Ut(this,mv);Ft[0]=dt[0]-Ut(this,y0),Ft[1]=dt[1]-Ut(this,y0),Ft[2]=dt[2]-dt[0]+2*Ut(this,y0),Ft[3]=dt[3]-dt[1]+2*Ut(this,y0),this.firstPoint=[ft,St],this.lastPoint=[kt,Tt]};var KS,YS,XS,Ey,Vp,KA,H4,ME,bC,YA,U4,XA,G4,JS,K3;class HighlightOutliner{constructor(g,et=0,ot=0,ut=!0){Rn(this,KA);Rn(this,ME);Rn(this,YA);Rn(this,XA);Rn(this,JS);Rn(this,KS,void 0);Rn(this,YS,void 0);Rn(this,XS,void 0);Rn(this,Ey,[]);Rn(this,Vp,[]);const ct=[1/0,1/0,-1/0,-1/0],ft=10**-4;for(const{x:Yt,y:zt,width:Kt,height:en}of g){const tn=Math.floor((Yt-et)/ft)*ft,on=Math.ceil((Yt+Kt+et)/ft)*ft,an=Math.floor((zt-et)/ft)*ft,un=Math.ceil((zt+en+et)/ft)*ft,dn=[tn,an,un,!0],Sn=[on,an,un,!1];Ut(this,Ey).push(dn,Sn),Util$1.rectBoundingBox(tn,an,on,un,ct)}const St=ct[2]-ct[0]+2*ot,kt=ct[3]-ct[1]+2*ot,Tt=ct[0]-ot,Rt=ct[1]-ot;let jt=ut?-1/0:1/0,Ft=1/0;const Bt=Ut(this,Ey).at(ut?-1:-2),Ht=[Bt[0],Bt[2]];for(const Yt of Ut(this,Ey)){const[zt,Kt,en,tn]=Yt;!tn&&ut?Kt<Ft?(Ft=Kt,jt=zt):Kt===Ft&&(jt=Math.max(jt,zt)):tn&&!ut&&(Kt<Ft?(Ft=Kt,jt=zt):Kt===Ft&&(jt=Math.min(jt,zt))),Yt[0]=(zt-Tt)/St,Yt[1]=(Kt-Rt)/kt,Yt[2]=(en-Rt)/kt}In(this,KS,new Float32Array([Tt,Rt,St,kt])),In(this,YS,[jt,Ft]),In(this,XS,Ht)}getOutlines(){Ut(this,Ey).sort((et,ot)=>et[0]-ot[0]||et[1]-ot[1]||et[2]-ot[2]);const g=[];for(const et of Ut(this,Ey))et[3]?(g.push(...Xn(this,JS,K3).call(this,et)),Xn(this,YA,U4).call(this,et)):(Xn(this,XA,G4).call(this,et),g.push(...Xn(this,JS,K3).call(this,et)));return Xn(this,KA,H4).call(this,g)}}KS=new WeakMap,YS=new WeakMap,XS=new WeakMap,Ey=new WeakMap,Vp=new WeakMap,KA=new WeakSet,H4=function(g){const et=[],ot=new Set;for(const dt of g){const[ft,St,kt]=dt;et.push([ft,St,dt],[ft,kt,dt])}et.sort((dt,ft)=>dt[1]-ft[1]||dt[0]-ft[0]);for(let dt=0,ft=et.length;dt<ft;dt+=2){const St=et[dt][2],kt=et[dt+1][2];St.push(kt),kt.push(St),ot.add(St),ot.add(kt)}const ut=[];let ct;for(;ot.size>0;){const dt=ot.values().next().value;let[ft,St,kt,Tt,Rt]=dt;ot.delete(dt);let jt=ft,Ft=St;for(ct=[ft,kt],ut.push(ct);;){let Bt;if(ot.has(Tt))Bt=Tt;else if(ot.has(Rt))Bt=Rt;else break;ot.delete(Bt),[ft,St,kt,Tt,Rt]=Bt,jt!==ft&&(ct.push(jt,Ft,ft,Ft===St?St:kt),jt=ft),Ft=Ft===St?kt:St}ct.push(jt,Ft)}return new HighlightOutline(ut,Ut(this,KS),Ut(this,YS),Ut(this,XS))},ME=new WeakSet,bC=function(g){const et=Ut(this,Vp);let ot=0,ut=et.length-1;for(;ot<=ut;){const ct=ot+ut>>1,dt=et[ct][0];if(dt===g)return ct;dt<g?ot=ct+1:ut=ct-1}return ut+1},YA=new WeakSet,U4=function([,g,et]){const ot=Xn(this,ME,bC).call(this,g);Ut(this,Vp).splice(ot,0,[g,et])},XA=new WeakSet,G4=function([,g,et]){const ot=Xn(this,ME,bC).call(this,g);for(let ut=ot;ut<Ut(this,Vp).length;ut++){const[ct,dt]=Ut(this,Vp)[ut];if(ct!==g)break;if(ct===g&&dt===et){Ut(this,Vp).splice(ut,1);return}}for(let ut=ot-1;ut>=0;ut--){const[ct,dt]=Ut(this,Vp)[ut];if(ct!==g)break;if(ct===g&&dt===et){Ut(this,Vp).splice(ut,1);return}}},JS=new WeakSet,K3=function(g){const[et,ot,ut]=g,ct=[[et,ot,ut]],dt=Xn(this,ME,bC).call(this,ut);for(let ft=0;ft<dt;ft++){const[St,kt]=Ut(this,Vp)[ft];for(let Tt=0,Rt=ct.length;Tt<Rt;Tt++){const[,jt,Ft]=ct[Tt];if(!(kt<=jt||Ft<=St)){if(jt>=St){if(Ft>kt)ct[Tt][1]=kt;else{if(Rt===1)return[];ct.splice(Tt,1),Tt--,Rt--}continue}ct[Tt][2]=St,Ft>kt&&ct.push([et,kt,Ft])}}}return ct};var QS,IE;class HighlightOutline extends Outline{constructor(et,ot,ut,ct){super();Rn(this,QS,void 0);Rn(this,IE,void 0);In(this,IE,et),In(this,QS,ot),this.firstPoint=ut,this.lastPoint=ct}toSVGPath(){const et=[];for(const ot of Ut(this,IE)){let[ut,ct]=ot;et.push(`M${ut} ${ct}`);for(let dt=2;dt<ot.length;dt+=2){const ft=ot[dt],St=ot[dt+1];ft===ut?(et.push(`V${St}`),ct=St):St===ct&&(et.push(`H${ft}`),ut=ft)}et.push("Z")}return et.join(" ")}serialize([et,ot,ut,ct],dt){const ft=[],St=ut-et,kt=ct-ot;for(const Tt of Ut(this,IE)){const Rt=new Array(Tt.length);for(let jt=0;jt<Tt.length;jt+=2)Rt[jt]=et+Tt[jt]*St,Rt[jt+1]=ct-Tt[jt+1]*kt;ft.push(Rt)}return ft}get box(){return Ut(this,QS)}get classNamesForOutlining(){return["highlightOutline"]}}QS=new WeakMap,IE=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(g,et,ot,ut,ct,dt){return new FreeHighlightOutline(g,et,ot,ut,ct,dt)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(g,et,ot,ut,ct,dt=0){return new FreeHighlightOutliner(g,et,ot,ut,ct,dt)}}var OE,ZS,v0,gv,ew,Ru,tw,nw,yv,Zu,_c,Bl,LE,DE,eu,jE,Ep,rw,iw,Y3,FE,EC,JA,W4,QA,q4,ZA,K4,sw,X3,x0,i1,_y,Zv,eT,Y4,$E,_C,BE,SC,tT,X4,nT,J4,rT,Q4,iT,Z4,sT,e5;const Hs=class Hs extends AnnotationEditor{constructor(et){super({...et,name:"highlightEditor"});Rn(this,iw);Rn(this,FE);Rn(this,JA);Rn(this,QA);Rn(this,ZA);Rn(this,sw);Rn(this,x0);Rn(this,eT);Rn(this,$E);Rn(this,BE);Rn(this,tT);Rn(this,nT);Rn(this,sT);Rn(this,OE,null);Rn(this,ZS,0);Rn(this,v0,void 0);Rn(this,gv,null);Rn(this,ew,null);Rn(this,Ru,null);Rn(this,tw,null);Rn(this,nw,0);Rn(this,yv,null);Rn(this,Zu,null);Rn(this,_c,null);Rn(this,Bl,!1);Rn(this,LE,null);Rn(this,DE,null);Rn(this,eu,null);Rn(this,jE,"");Rn(this,Ep,void 0);Rn(this,rw,"");this.color=et.color||Hs._defaultColor,In(this,Ep,et.thickness||Hs._defaultThickness),this.opacity=et.opacity||Hs._defaultOpacity,In(this,v0,et.boxes||null),In(this,rw,et.methodOfCreation||""),In(this,jE,et.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",et.highlightId>-1?(In(this,Bl,!0),Xn(this,FE,EC).call(this,et),Xn(this,x0,i1).call(this)):Ut(this,v0)&&(In(this,OE,et.anchorNode),In(this,ZS,et.anchorOffset),In(this,tw,et.focusNode),In(this,nw,et.focusOffset),Xn(this,iw,Y3).call(this),Xn(this,x0,i1).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const et=Hs.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],et._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],et._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],et._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],et._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Ut(this,Bl)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Ut(this,Ep),methodOfCreation:Ut(this,rw)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(et){return{numberOfColors:et.get("color").size}}static initialize(et,ot){var ut;AnnotationEditor.initialize(et,ot),Hs._defaultColor||(Hs._defaultColor=((ut=ot.highlightColors)==null?void 0:ut.values().next().value)||"#fff066")}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Hs._defaultColor=ot;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Hs._defaultThickness=ot;break}}translateInPage(et,ot){}get toolbarPosition(){return Ut(this,DE)}get commentButtonPosition(){return Ut(this,LE)}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Xn(this,JA,W4).call(this,ot);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Xn(this,QA,q4).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Hs._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Hs._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Hs._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Ut(this,Ep)||Hs._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,Ut(this,Bl)]]}onUpdatedColor(){var et,ot;(et=this.parent)==null||et.drawLayer.updateProperties(Ut(this,_c),{root:{fill:this.color,"fill-opacity":this.opacity}}),(ot=Ut(this,ew))==null||ot.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",In(this,ew,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Xn(this,BE,SC).call(this))}getBaseTranslation(){return[0,0]}getRect(et,ot){return super.getRect(et,ot,Xn(this,BE,SC).call(this))}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),et&&this.div.focus()}remove(){Xn(this,sw,X3).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Xn(this,x0,i1).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ut;let ot=!1;this.parent&&!et?Xn(this,sw,X3).call(this):et&&(Xn(this,x0,i1).call(this,et),ot=!this.parent&&((ut=this.div)==null?void 0:ut.classList.contains("selectedEditor"))),super.setParent(et),this.show(this._isVisible),ot&&this.select()}rotate(et){var ct,dt,ft;const{drawLayer:ot}=this.parent;let ut;Ut(this,Bl)?(et=(et-this.rotation+360)%360,ut=Xn(ct=Hs,_y,Zv).call(ct,Ut(this,Zu).box,et)):ut=Xn(dt=Hs,_y,Zv).call(dt,[this.x,this.y,this.width,this.height],et),ot.updateProperties(Ut(this,_c),{bbox:ut,root:{"data-main-rotation":et}}),ot.updateProperties(Ut(this,eu),{bbox:Xn(ft=Hs,_y,Zv).call(ft,Ut(this,Ru).box,et),root:{"data-main-rotation":et}})}render(){if(this.div)return this.div;const et=super.render();Ut(this,jE)&&(et.setAttribute("aria-label",Ut(this,jE)),et.setAttribute("role","mark")),Ut(this,Bl)?et.classList.add("free"):this.div.addEventListener("keydown",Xn(this,eT,Y4).bind(this),{signal:this._uiManager._signal});const ot=In(this,yv,document.createElement("div"));return et.append(ot),ot.setAttribute("aria-hidden","true"),ot.className="internal",ot.style.clipPath=Ut(this,gv),this.setDims(this.width,this.height),bindEvents(this,Ut(this,yv),["pointerover","pointerleave"]),this.enableEditing(),et}pointerover(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Ut(this,eu),{rootClass:{hovered:!0}})}pointerleave(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Ut(this,eu),{rootClass:{hovered:!1}})}_moveCaret(et){switch(this.parent.unselect(this),et){case 0:case 2:Xn(this,$E,_C).call(this,!0);break;case 1:case 3:Xn(this,$E,_C).call(this,!1);break}}select(){var et;super.select(),Ut(this,eu)&&((et=this.parent)==null||et.drawLayer.updateProperties(Ut(this,eu),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var et;super.unselect(),Ut(this,eu)&&((et=this.parent)==null||et.drawLayer.updateProperties(Ut(this,eu),{rootClass:{selected:!1}}),Ut(this,Bl)||Xn(this,$E,_C).call(this,!1))}get _mustFixPosition(){return!Ut(this,Bl)}show(et=this._isVisible){super.show(et),this.parent&&(this.parent.drawLayer.updateProperties(Ut(this,_c),{rootClass:{hidden:!et}}),this.parent.drawLayer.updateProperties(Ut(this,eu),{rootClass:{hidden:!et}}))}static startHighlighting(et,ot,{target:ut,x:ct,y:dt}){const{x:ft,y:St,width:kt,height:Tt}=ut.getBoundingClientRect(),Rt=new AbortController,jt=et.combinedSignal(Rt),Ft=Bt=>{Rt.abort(),Xn(this,iT,Z4).call(this,et,Bt)};window.addEventListener("blur",Ft,{signal:jt}),window.addEventListener("pointerup",Ft,{signal:jt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:jt}),window.addEventListener("contextmenu",noContextMenu,{signal:jt}),ut.addEventListener("pointermove",Xn(this,rT,Q4).bind(this,et),{signal:jt}),this._freeHighlight=new FreeHighlightOutliner({x:ct,y:dt},[ft,St,kt,Tt],et.scale,this._defaultThickness/2,ot,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=et.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(et,ot,ut){var Ht,Yt,zt,Kt;let ct=null;if(et instanceof HighlightAnnotationElement){const{data:{quadPoints:en,rect:tn,rotation:on,id:an,color:un,opacity:dn,popupRef:Sn,richText:mn,contentsObj:bn,creationDate:En,modificationDate:kn},parent:{page:{pageNumber:Pn}}}=et;ct=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(un),opacity:dn,quadPoints:en,boxes:null,pageIndex:Pn-1,rect:tn.slice(0),rotation:on,annotationElementId:an,id:an,deleted:!1,popupRef:Sn,richText:mn,comment:(bn==null?void 0:bn.str)||null,creationDate:En,modificationDate:kn}}else if(et instanceof InkAnnotationElement){const{data:{inkLists:en,rect:tn,rotation:on,id:an,color:un,borderStyle:{rawWidth:dn},popupRef:Sn,richText:mn,contentsObj:bn,creationDate:En,modificationDate:kn},parent:{page:{pageNumber:Pn}}}=et;ct=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(un),thickness:dn,inkLists:en,boxes:null,pageIndex:Pn-1,rect:tn.slice(0),rotation:on,annotationElementId:an,id:an,deleted:!1,popupRef:Sn,richText:mn,comment:(bn==null?void 0:bn.str)||null,creationDate:En,modificationDate:kn}}const{color:dt,quadPoints:ft,inkLists:St,opacity:kt}=et,Tt=await super.deserialize(et,ot,ut);Tt.color=Util$1.makeHexColor(...dt),Tt.opacity=kt||1,St&&In(Tt,Ep,et.thickness),Tt._initialData=ct,et.comment&&Tt.setCommentData(et);const[Rt,jt]=Tt.pageDimensions,[Ft,Bt]=Tt.pageTranslation;if(ft){const en=In(Tt,v0,[]);for(let tn=0;tn<ft.length;tn+=8)en.push({x:(ft[tn]-Ft)/Rt,y:1-(ft[tn+1]-Bt)/jt,width:(ft[tn+2]-ft[tn])/Rt,height:(ft[tn+1]-ft[tn+5])/jt});Xn(Ht=Tt,iw,Y3).call(Ht),Xn(Yt=Tt,x0,i1).call(Yt),Tt.rotate(Tt.rotation)}else if(St){In(Tt,Bl,!0);const en=St[0],tn={x:en[0]-Ft,y:jt-(en[1]-Bt)},on=new FreeHighlightOutliner(tn,[0,0,Rt,jt],1,Ut(Tt,Ep)/2,!0,.001);for(let dn=0,Sn=en.length;dn<Sn;dn+=2)tn.x=en[dn]-Ft,tn.y=jt-(en[dn+1]-Bt),on.add(tn);const{id:an,clipPathId:un}=ot.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Tt.color,"fill-opacity":Tt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:on.toSVGPath()}},!0,!0);Xn(zt=Tt,FE,EC).call(zt,{highlightOutlines:on.getOutlines(),highlightId:an,clipPathId:un}),Xn(Kt=Tt,x0,i1).call(Kt),Tt.rotate(Tt.parentRotation)}return Tt}serialize(et=!1){if(this.isEmpty()||et)return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ut=super.serialize(et);return Object.assign(ut,{color:ot,opacity:this.opacity,thickness:Ut(this,Ep),quadPoints:Xn(this,tT,X4).call(this),outlines:Xn(this,nT,J4).call(this,ut.rect)}),this.addComment(ut),this.annotationElementId&&!Xn(this,sT,e5).call(this,ut)?null:(ut.id=this.annotationElementId,ut)}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};OE=new WeakMap,ZS=new WeakMap,v0=new WeakMap,gv=new WeakMap,ew=new WeakMap,Ru=new WeakMap,tw=new WeakMap,nw=new WeakMap,yv=new WeakMap,Zu=new WeakMap,_c=new WeakMap,Bl=new WeakMap,LE=new WeakMap,DE=new WeakMap,eu=new WeakMap,jE=new WeakMap,Ep=new WeakMap,rw=new WeakMap,iw=new WeakSet,Y3=function(){const et=new HighlightOutliner(Ut(this,v0),.001);In(this,Zu,et.getOutlines()),[this.x,this.y,this.width,this.height]=Ut(this,Zu).box;const ot=new HighlightOutliner(Ut(this,v0),.0025,.001,this._uiManager.direction==="ltr");In(this,Ru,ot.getOutlines());const{firstPoint:ut}=Ut(this,Zu);In(this,LE,[(ut[0]-this.x)/this.width,(ut[1]-this.y)/this.height]);const{lastPoint:ct}=Ut(this,Ru);In(this,DE,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height])},FE=new WeakSet,EC=function({highlightOutlines:et,highlightId:ot,clipPathId:ut}){var jt,Ft;In(this,Zu,et);const ct=1.5;if(In(this,Ru,et.getNewOutline(Ut(this,Ep)/2+ct,.0025)),ot>=0)In(this,_c,ot),In(this,gv,ut),this.parent.drawLayer.finalizeDraw(ot,{bbox:et.box,path:{d:et.toSVGPath()}}),In(this,eu,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Ut(this,Ru).box,path:{d:Ut(this,Ru).toSVGPath()}},!0));else if(this.parent){const Bt=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Ut(this,_c),{bbox:Xn(jt=Hs,_y,Zv).call(jt,Ut(this,Zu).box,(Bt-this.rotation+360)%360),path:{d:et.toSVGPath()}}),this.parent.drawLayer.updateProperties(Ut(this,eu),{bbox:Xn(Ft=Hs,_y,Zv).call(Ft,Ut(this,Ru).box,Bt),path:{d:Ut(this,Ru).toSVGPath()}})}const[dt,ft,St,kt]=et.box;switch(this.rotation){case 0:this.x=dt,this.y=ft,this.width=St,this.height=kt;break;case 90:{const[Bt,Ht]=this.parentDimensions;this.x=ft,this.y=1-dt,this.width=St*Ht/Bt,this.height=kt*Bt/Ht;break}case 180:this.x=1-dt,this.y=1-ft,this.width=St,this.height=kt;break;case 270:{const[Bt,Ht]=this.parentDimensions;this.x=1-ft,this.y=dt,this.width=St*Ht/Bt,this.height=kt*Bt/Ht;break}}const{firstPoint:Tt}=et;In(this,LE,[(Tt[0]-dt)/St,(Tt[1]-ft)/kt]);const{lastPoint:Rt}=Ut(this,Ru);In(this,DE,[(Rt[0]-dt)/St,(Rt[1]-ft)/kt])},JA=new WeakSet,W4=function(et){const ot=(dt,ft)=>{this.color=dt,this.opacity=ft,this.onUpdatedColor()},ut=this.color,ct=this.opacity;this.addCommands({cmd:ot.bind(this,et,Hs._defaultOpacity),undo:ot.bind(this,ut,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(et)},!0)},QA=new WeakSet,q4=function(et){const ot=Ut(this,Ep),ut=ct=>{In(this,Ep,ct),Xn(this,ZA,K4).call(this,ct)};this.addCommands({cmd:ut.bind(this,et),undo:ut.bind(this,ot),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:et},!0)},ZA=new WeakSet,K4=function(et){Ut(this,Bl)&&(Xn(this,FE,EC).call(this,{highlightOutlines:Ut(this,Zu).getNewOutline(et/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},sw=new WeakSet,X3=function(){Ut(this,_c)===null||!this.parent||(this.parent.drawLayer.remove(Ut(this,_c)),In(this,_c,null),this.parent.drawLayer.remove(Ut(this,eu)),In(this,eu,null))},x0=new WeakSet,i1=function(et=this.parent){Ut(this,_c)===null&&({id:Ko(this,_c)._,clipPathId:Ko(this,gv)._}=et.drawLayer.draw({bbox:Ut(this,Zu).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Ut(this,Bl)},path:{d:Ut(this,Zu).toSVGPath()}},!1,!0),In(this,eu,et.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Ut(this,Bl)},bbox:Ut(this,Ru).box,path:{d:Ut(this,Ru).toSVGPath()}},Ut(this,Bl))),Ut(this,yv)&&(Ut(this,yv).style.clipPath=Ut(this,gv)))},_y=new WeakSet,Zv=function([et,ot,ut,ct],dt){switch(dt){case 90:return[1-ot-ct,et,ct,ut];case 180:return[1-et-ut,1-ot-ct,ut,ct];case 270:return[ot,1-et-ut,ct,ut]}return[et,ot,ut,ct]},eT=new WeakSet,Y4=function(et){Hs._keyboardManager.exec(this,et)},$E=new WeakSet,_C=function(et){if(!Ut(this,OE))return;const ot=window.getSelection();et?ot.setPosition(Ut(this,OE),Ut(this,ZS)):ot.setPosition(Ut(this,tw),Ut(this,nw))},BE=new WeakSet,SC=function(){return Ut(this,Bl)?this.rotation:0},tT=new WeakSet,X4=function(){if(Ut(this,Bl))return null;const[et,ot]=this.pageDimensions,[ut,ct]=this.pageTranslation,dt=Ut(this,v0),ft=new Float32Array(dt.length*8);let St=0;for(const{x:kt,y:Tt,width:Rt,height:jt}of dt){const Ft=kt*et+ut,Bt=(1-Tt)*ot+ct;ft[St]=ft[St+4]=Ft,ft[St+1]=ft[St+3]=Bt,ft[St+2]=ft[St+6]=Ft+Rt*et,ft[St+5]=ft[St+7]=Bt-jt*ot,St+=8}return ft},nT=new WeakSet,J4=function(et){return Ut(this,Zu).serialize(et,Xn(this,BE,SC).call(this))},rT=new WeakSet,Q4=function(et,ot){this._freeHighlight.add(ot)&&et.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},iT=new WeakSet,Z4=function(et,ot){this._freeHighlight.isEmpty()?et.drawLayer.remove(this._freeHighlightId):et.createAndAddNewEditor(ot,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},sT=new WeakSet,e5=function(et){const{color:ot}=this._initialData;return this.hasEditedComment||et.color.some((ut,ct)=>ut!==ot[ct])},Rn(Hs,_y),Rn(Hs,rT),Rn(Hs,iT),Ur(Hs,"_defaultColor",null),Ur(Hs,"_defaultOpacity",1),Ur(Hs,"_defaultThickness",12),Ur(Hs,"_type","highlight"),Ur(Hs,"_editorType",AnnotationEditorType.HIGHLIGHT),Ur(Hs,"_freeHighlightId",-1),Ur(Hs,"_freeHighlight",null),Ur(Hs,"_freeHighlightClipId","");let HighlightEditor=Hs;var vv;class DrawingOptions{constructor(){Rn(this,vv,Object.create(null))}updateProperty(g,et){this[g]=et,this.updateSVGProperty(g,et)}updateProperties(g){if(g)for(const[et,ot]of Object.entries(g))et.startsWith("_")||this.updateProperty(et,ot)}updateSVGProperty(g,et){Ut(this,vv)[g]=et}toSVGProperties(){const g=Ut(this,vv);return In(this,vv,Object.create(null)),{root:g}}reset(){In(this,vv,Object.create(null))}updateAll(g=this){this.updateProperties(g)}clone(){unreachable("Not implemented")}}vv=new WeakMap;var _h,VE,Sl,xv,bv,Sy,wy,Cy,Ev,aw,J3,ow,Q3,lw,Z3,_v,z_,aT,t5,zE,wC,Sv,H_,ky,ex;const ds=class ds extends AnnotationEditor{constructor(et){super(et);Rn(this,aw);Rn(this,ow);Rn(this,lw);Rn(this,_v);Rn(this,aT);Rn(this,zE);Rn(this,Sv);Rn(this,ky);Rn(this,_h,null);Rn(this,VE,void 0);Ur(this,"_colorPicker",null);Ur(this,"_drawId",null);In(this,VE,et.mustBeCommitted||!1),this._addOutlines(et)}onUpdatedColor(){var et;(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_addOutlines(et){et.drawOutlines&&(Xn(this,aw,J3).call(this,et),Xn(this,_v,z_).call(this))}static _mergeSVGProperties(et,ot){const ut=new Set(Object.keys(et));for(const[ct,dt]of Object.entries(ot))ut.has(ct)?Object.assign(et[ct],dt):et[ct]=dt;return et}static getDefaultDrawingOptions(et){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(et,ot){const ut=this.typesMap.get(et);ut&&this._defaultDrawingOptions.updateProperty(ut,ot),this._currentParent&&(Ut(ds,Sl).updateProperty(ut,ot),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(et,ot){const ut=this.constructor.typesMap.get(et);ut&&this._updateProperty(et,ut,ot)}static get defaultPropertiesToUpdate(){const et=[],ot=this._defaultDrawingOptions;for(const[ut,ct]of this.typesMap)et.push([ut,ot[ct]]);return et}get propertiesToUpdate(){const et=[],{_drawingOptions:ot}=this;for(const[ut,ct]of this.constructor.typesMap)et.push([ut,ot[ct]]);return et}_updateProperty(et,ot,ut){const ct=this._drawingOptions,dt=ct[ot],ft=St=>{var Tt;ct.updateProperty(ot,St);const kt=Ut(this,_h).updateProperty(ot,St);kt&&Xn(this,Sv,H_).call(this,kt),(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,ct.toSVGProperties()),et===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:ft.bind(this,ut),undo:ft.bind(this,dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:et,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,ds._mergeSVGProperties(Ut(this,_h).getPathResizingSVGProperties(Xn(this,zE,wC).call(this)),{bbox:Xn(this,ky,ex).call(this)}))}_onResized(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,ds._mergeSVGProperties(Ut(this,_h).getPathResizedSVGProperties(Xn(this,zE,wC).call(this)),{bbox:Xn(this,ky,ex).call(this)}))}_onTranslating(et,ot){var ut;(ut=this.parent)==null||ut.drawLayer.updateProperties(this._drawId,{bbox:Xn(this,ky,ex).call(this)})}_onTranslated(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,ds._mergeSVGProperties(Ut(this,_h).getPathTranslatedSVGProperties(Xn(this,zE,wC).call(this),this.parentDimensions),{bbox:Xn(this,ky,ex).call(this)}))}_onStartDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Ut(this,VE)&&(In(this,VE,!1),this.commit(),this.parent.setSelected(this),et&&this.isOnScreen&&this.div.focus())}remove(){Xn(this,lw,Z3).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Xn(this,_v,z_).call(this),Xn(this,Sv,H_).call(this,Ut(this,_h).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ut;let ot=!1;this.parent&&!et?(this._uiManager.removeShouldRescale(this),Xn(this,lw,Z3).call(this)):et&&(this._uiManager.addShouldRescale(this),Xn(this,_v,z_).call(this,et),ot=!this.parent&&((ut=this.div)==null?void 0:ut.classList.contains("selectedEditor"))),super.setParent(et),ot&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ds._mergeSVGProperties({bbox:Xn(this,ky,ex).call(this)},Ut(this,_h).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Xn(this,Sv,H_).call(this,Ut(this,_h).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let et,ot;this._isCopy&&(et=this.x,ot=this.y);const ut=super.render();ut.classList.add("draw");const ct=document.createElement("div");return ut.append(ct),ct.setAttribute("aria-hidden","true"),ct.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(et,ot),ut}static createDrawerInstance(et,ot,ut,ct,dt){unreachable("Not implemented")}static startDrawing(et,ot,ut,ct){var Yt;const{target:dt,offsetX:ft,offsetY:St,pointerId:kt,pointerType:Tt}=ct;if(Ut(ds,wy)&&Ut(ds,wy)!==Tt)return;const{viewport:{rotation:Rt}}=et,{width:jt,height:Ft}=dt.getBoundingClientRect(),Bt=In(ds,xv,new AbortController),Ht=et.combinedSignal(Bt);if(Ut(ds,Sy)||In(ds,Sy,kt),Ut(ds,wy)??In(ds,wy,Tt),window.addEventListener("pointerup",zt=>{var Kt;Ut(ds,Sy)===zt.pointerId?this._endDraw(zt):(Kt=Ut(ds,Cy))==null||Kt.delete(zt.pointerId)},{signal:Ht}),window.addEventListener("pointercancel",zt=>{var Kt;Ut(ds,Sy)===zt.pointerId?this._currentParent.endDrawingSession():(Kt=Ut(ds,Cy))==null||Kt.delete(zt.pointerId)},{signal:Ht}),window.addEventListener("pointerdown",zt=>{Ut(ds,wy)===zt.pointerType&&((Ut(ds,Cy)||In(ds,Cy,new Set)).add(zt.pointerId),Ut(ds,Sl).isCancellable()&&(Ut(ds,Sl).removeLastElement(),Ut(ds,Sl).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:Ht}),window.addEventListener("contextmenu",noContextMenu,{signal:Ht}),dt.addEventListener("pointermove",this._drawMove.bind(this),{signal:Ht}),dt.addEventListener("touchmove",zt=>{zt.timeStamp===Ut(ds,Ev)&&stopEvent(zt)},{signal:Ht}),et.toggleDrawing(),(Yt=ot._editorUndoBar)==null||Yt.hide(),Ut(ds,Sl)){et.drawLayer.updateProperties(this._currentDrawId,Ut(ds,Sl).startNew(ft,St,jt,Ft,Rt));return}ot.updateUIForDefaultProperties(this),In(ds,Sl,this.createDrawerInstance(ft,St,jt,Ft,Rt)),In(ds,bv,this.getDefaultDrawingOptions()),this._currentParent=et,{id:this._currentDrawId}=et.drawLayer.draw(this._mergeSVGProperties(Ut(ds,bv).toSVGProperties(),Ut(ds,Sl).defaultSVGProperties),!0,!1)}static _drawMove(et){var dt;if(In(ds,Ev,-1),!Ut(ds,Sl))return;const{offsetX:ot,offsetY:ut,pointerId:ct}=et;if(Ut(ds,Sy)===ct){if(((dt=Ut(ds,Cy))==null?void 0:dt.size)>=1){this._endDraw(et);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ut(ds,Sl).add(ot,ut)),In(ds,Ev,et.timeStamp),stopEvent(et)}}static _cleanup(et){et&&(this._currentDrawId=-1,this._currentParent=null,In(ds,Sl,null),In(ds,bv,null),In(ds,wy,null),In(ds,Ev,NaN)),Ut(ds,xv)&&(Ut(ds,xv).abort(),In(ds,xv,null),In(ds,Sy,NaN),In(ds,Cy,null))}static _endDraw(et){const ot=this._currentParent;if(ot){if(ot.toggleDrawing(!0),this._cleanup(!1),(et==null?void 0:et.target)===ot.div&&ot.drawLayer.updateProperties(this._currentDrawId,Ut(ds,Sl).end(et.offsetX,et.offsetY)),this.supportMultipleDrawings){const ut=Ut(ds,Sl),ct=this._currentDrawId,dt=ut.getLastElement();ot.addCommands({cmd:()=>{ot.drawLayer.updateProperties(ct,ut.setLastElement(dt))},undo:()=>{ot.drawLayer.updateProperties(ct,ut.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(et){const ot=this._currentParent;if(!ot)return null;if(ot.toggleDrawing(!0),ot.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!Ut(ds,Sl).isEmpty()){const{pageDimensions:[ut,ct],scale:dt}=ot,ft=ot.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ut(ds,Sl).getOutlines(ut*dt,ct*dt,dt,this._INNER_MARGIN),drawingOptions:Ut(ds,bv),mustBeCommitted:!et});return this._cleanup(!0),ft}return ot.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(et){}static deserializeDraw(et,ot,ut,ct,dt,ft){unreachable("Not implemented")}static async deserialize(et,ot,ut){var Rt,jt;const{rawDims:{pageWidth:ct,pageHeight:dt,pageX:ft,pageY:St}}=ot.viewport,kt=this.deserializeDraw(ft,St,ct,dt,this._INNER_MARGIN,et),Tt=await super.deserialize(et,ot,ut);return Tt.createDrawingOptions(et),Xn(Rt=Tt,aw,J3).call(Rt,{drawOutlines:kt}),Xn(jt=Tt,_v,z_).call(jt),Tt.onScaleChanging(),Tt.rotate(),Tt}serializeDraw(et){const[ot,ut]=this.pageTranslation,[ct,dt]=this.pageDimensions;return Ut(this,_h).serialize([ot,ut,ct,dt],et)}renderAnnotationElement(et){return et.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};_h=new WeakMap,VE=new WeakMap,Sl=new WeakMap,xv=new WeakMap,bv=new WeakMap,Sy=new WeakMap,wy=new WeakMap,Cy=new WeakMap,Ev=new WeakMap,aw=new WeakSet,J3=function({drawOutlines:et,drawId:ot,drawingOptions:ut}){In(this,_h,et),this._drawingOptions||(this._drawingOptions=ut),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),ot>=0?(this._drawId=ot,this.parent.drawLayer.finalizeDraw(ot,et.defaultProperties)):this._drawId=Xn(this,ow,Q3).call(this,et,this.parent),Xn(this,Sv,H_).call(this,et.box)},ow=new WeakSet,Q3=function(et,ot){const{id:ut}=ot.drawLayer.draw(ds._mergeSVGProperties(this._drawingOptions.toSVGProperties(),et.defaultSVGProperties),!1,!1);return ut},lw=new WeakSet,Z3=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},_v=new WeakSet,z_=function(et=this.parent){if(!(this._drawId!==null&&this.parent===et)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,et.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=Xn(this,ow,Q3).call(this,Ut(this,_h),et)}},aT=new WeakSet,t5=function([et,ot,ut,ct]){const{parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[ot,1-et,ut*(ft/dt),ct*(dt/ft)];case 180:return[1-et,1-ot,ut,ct];case 270:return[1-ot,et,ut*(ft/dt),ct*(dt/ft)];default:return[et,ot,ut,ct]}},zE=new WeakSet,wC=function(){const{x:et,y:ot,width:ut,height:ct,parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[1-ot,et,ut*(dt/ft),ct*(ft/dt)];case 180:return[1-et,1-ot,ut,ct];case 270:return[ot,1-et,ut*(dt/ft),ct*(ft/dt)];default:return[et,ot,ut,ct]}},Sv=new WeakSet,H_=function(et){[this.x,this.y,this.width,this.height]=Xn(this,aT,t5).call(this,et),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ky=new WeakSet,ex=function(){const{x:et,y:ot,width:ut,height:ct,rotation:dt,parentRotation:ft,parentDimensions:[St,kt]}=this;switch((dt*4+ft)/90){case 1:return[1-ot-ct,et,ct,ut];case 2:return[1-et-ut,1-ot-ct,ut,ct];case 3:return[ot,1-et-ut,ct,ut];case 4:return[et,ot-ut*(St/kt),ct*(kt/St),ut*(St/kt)];case 5:return[1-ot,et,ut*(St/kt),ct*(kt/St)];case 6:return[1-et-ct*(kt/St),1-ot,ct*(kt/St),ut*(St/kt)];case 7:return[ot-ut*(St/kt),1-et-ct*(kt/St),ut*(St/kt),ct*(kt/St)];case 8:return[et-ut,ot-ct,ut,ct];case 9:return[1-ot,et-ut,ct,ut];case 10:return[1-et,1-ot,ut,ct];case 11:return[ot-ct,1-et,ct,ut];case 12:return[et-ct*(kt/St),ot,ct*(kt/St),ut*(St/kt)];case 13:return[1-ot-ut*(St/kt),et-ct*(kt/St),ut*(St/kt),ct*(kt/St)];case 14:return[1-et,1-ot-ut*(St/kt),ct*(kt/St),ut*(St/kt)];case 15:return[ot,1-et,ut*(St/kt),ct*(kt/St)];default:return[et,ot,ut,ct]}},Ur(ds,"_currentDrawId",-1),Ur(ds,"_currentParent",null),Rn(ds,Sl,null),Rn(ds,xv,null),Rn(ds,bv,null),Rn(ds,Sy,NaN),Rn(ds,wy,null),Rn(ds,Cy,null),Rn(ds,Ev,NaN),Ur(ds,"_INNER_MARGIN",3);let DrawingEditor=ds;var _m,wl,Cl,wv,HE,ou,Vl,_p,Cv,kv,Av,UE,CC;class InkDrawOutliner{constructor(g,et,ot,ut,ct,dt){Rn(this,UE);Rn(this,_m,new Float64Array(6));Rn(this,wl,void 0);Rn(this,Cl,void 0);Rn(this,wv,void 0);Rn(this,HE,void 0);Rn(this,ou,void 0);Rn(this,Vl,"");Rn(this,_p,0);Rn(this,Cv,new InkDrawOutline);Rn(this,kv,void 0);Rn(this,Av,void 0);In(this,kv,ot),In(this,Av,ut),In(this,wv,ct),In(this,HE,dt),[g,et]=Xn(this,UE,CC).call(this,g,et);const ft=In(this,wl,[NaN,NaN,NaN,NaN,g,et]);In(this,ou,[g,et]),In(this,Cl,[{line:ft,points:Ut(this,ou)}]),Ut(this,_m).set(ft,0)}updateProperty(g,et){g==="stroke-width"&&In(this,HE,et)}isEmpty(){return!Ut(this,Cl)||Ut(this,Cl).length===0}isCancellable(){return Ut(this,ou).length<=10}add(g,et){[g,et]=Xn(this,UE,CC).call(this,g,et);const[ot,ut,ct,dt]=Ut(this,_m).subarray(2,6),ft=g-ct,St=et-dt;return Math.hypot(Ut(this,kv)*ft,Ut(this,Av)*St)<=2?null:(Ut(this,ou).push(g,et),isNaN(ot)?(Ut(this,_m).set([ct,dt,g,et],2),Ut(this,wl).push(NaN,NaN,NaN,NaN,g,et),{path:{d:this.toSVGPath()}}):(isNaN(Ut(this,_m)[0])&&Ut(this,wl).splice(6,6),Ut(this,_m).set([ot,ut,ct,dt,g,et],0),Ut(this,wl).push(...Outline.createBezierPoints(ot,ut,ct,dt,g,et)),{path:{d:this.toSVGPath()}}))}end(g,et){const ot=this.add(g,et);return ot||(Ut(this,ou).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(g,et,ot,ut,ct){In(this,kv,ot),In(this,Av,ut),In(this,wv,ct),[g,et]=Xn(this,UE,CC).call(this,g,et);const dt=In(this,wl,[NaN,NaN,NaN,NaN,g,et]);In(this,ou,[g,et]);const ft=Ut(this,Cl).at(-1);return ft&&(ft.line=new Float32Array(ft.line),ft.points=new Float32Array(ft.points)),Ut(this,Cl).push({line:dt,points:Ut(this,ou)}),Ut(this,_m).set(dt,0),In(this,_p,0),this.toSVGPath(),null}getLastElement(){return Ut(this,Cl).at(-1)}setLastElement(g){return Ut(this,Cl)?(Ut(this,Cl).push(g),In(this,wl,g.line),In(this,ou,g.points),In(this,_p,0),{path:{d:this.toSVGPath()}}):Ut(this,Cv).setLastElement(g)}removeLastElement(){if(!Ut(this,Cl))return Ut(this,Cv).removeLastElement();Ut(this,Cl).pop(),In(this,Vl,"");for(let g=0,et=Ut(this,Cl).length;g<et;g++){const{line:ot,points:ut}=Ut(this,Cl)[g];In(this,wl,ot),In(this,ou,ut),In(this,_p,0),this.toSVGPath()}return{path:{d:Ut(this,Vl)}}}toSVGPath(){const g=Outline.svgRound(Ut(this,wl)[4]),et=Outline.svgRound(Ut(this,wl)[5]);if(Ut(this,ou).length===2)return In(this,Vl,`${Ut(this,Vl)} M ${g} ${et} Z`),Ut(this,Vl);if(Ut(this,ou).length<=6){const ut=Ut(this,Vl).lastIndexOf("M");In(this,Vl,`${Ut(this,Vl).slice(0,ut)} M ${g} ${et}`),In(this,_p,6)}if(Ut(this,ou).length===4){const ut=Outline.svgRound(Ut(this,wl)[10]),ct=Outline.svgRound(Ut(this,wl)[11]);return In(this,Vl,`${Ut(this,Vl)} L ${ut} ${ct}`),In(this,_p,12),Ut(this,Vl)}const ot=[];Ut(this,_p)===0&&(ot.push(`M ${g} ${et}`),In(this,_p,6));for(let ut=Ut(this,_p),ct=Ut(this,wl).length;ut<ct;ut+=6){const[dt,ft,St,kt,Tt,Rt]=Ut(this,wl).slice(ut,ut+6).map(Outline.svgRound);ot.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}return In(this,Vl,Ut(this,Vl)+ot.join(" ")),In(this,_p,Ut(this,wl).length),Ut(this,Vl)}getOutlines(g,et,ot,ut){const ct=Ut(this,Cl).at(-1);return ct.line=new Float32Array(ct.line),ct.points=new Float32Array(ct.points),Ut(this,Cv).build(Ut(this,Cl),g,et,ot,Ut(this,wv),Ut(this,HE),ut),In(this,_m,null),In(this,wl,null),In(this,Cl,null),In(this,Vl,null),Ut(this,Cv)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}_m=new WeakMap,wl=new WeakMap,Cl=new WeakMap,wv=new WeakMap,HE=new WeakMap,ou=new WeakMap,Vl=new WeakMap,_p=new WeakMap,Cv=new WeakMap,kv=new WeakMap,Av=new WeakMap,UE=new WeakSet,CC=function(g,et){return Outline._normalizePoint(g,et,Ut(this,kv),Ut(this,Av),Ut(this,wv))};var lu,uw,cw,_d,Sm,wm,GE,WE,Tv,zp,Bm,oT,n5,lT,r5,uT,i5;class InkDrawOutline extends Outline{constructor(){super(...arguments);Rn(this,zp);Rn(this,oT);Rn(this,lT);Rn(this,uT);Rn(this,lu,void 0);Rn(this,uw,0);Rn(this,cw,void 0);Rn(this,_d,void 0);Rn(this,Sm,void 0);Rn(this,wm,void 0);Rn(this,GE,void 0);Rn(this,WE,void 0);Rn(this,Tv,void 0)}build(et,ot,ut,ct,dt,ft,St){In(this,Sm,ot),In(this,wm,ut),In(this,GE,ct),In(this,WE,dt),In(this,Tv,ft),In(this,cw,St??0),In(this,_d,et),Xn(this,lT,r5).call(this)}get thickness(){return Ut(this,Tv)}setLastElement(et){return Ut(this,_d).push(et),{path:{d:this.toSVGPath()}}}removeLastElement(){return Ut(this,_d).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const et=[];for(const{line:ot}of Ut(this,_d)){if(et.push(`M${Outline.svgRound(ot[4])} ${Outline.svgRound(ot[5])}`),ot.length===6){et.push("Z");continue}if(ot.length===12&&isNaN(ot[6])){et.push(`L${Outline.svgRound(ot[10])} ${Outline.svgRound(ot[11])}`);continue}for(let ut=6,ct=ot.length;ut<ct;ut+=6){const[dt,ft,St,kt,Tt,Rt]=ot.subarray(ut,ut+6).map(Outline.svgRound);et.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}}return et.join("")}serialize([et,ot,ut,ct],dt){const ft=[],St=[],[kt,Tt,Rt,jt]=Xn(this,oT,n5).call(this);let Ft,Bt,Ht,Yt,zt,Kt,en,tn,on;switch(Ut(this,WE)){case 0:on=Outline._rescale,Ft=et,Bt=ot+ct,Ht=ut,Yt=-ct,zt=et+kt*ut,Kt=ot+(1-Tt-jt)*ct,en=et+(kt+Rt)*ut,tn=ot+(1-Tt)*ct;break;case 90:on=Outline._rescaleAndSwap,Ft=et,Bt=ot,Ht=ut,Yt=ct,zt=et+Tt*ut,Kt=ot+kt*ct,en=et+(Tt+jt)*ut,tn=ot+(kt+Rt)*ct;break;case 180:on=Outline._rescale,Ft=et+ut,Bt=ot,Ht=-ut,Yt=ct,zt=et+(1-kt-Rt)*ut,Kt=ot+Tt*ct,en=et+(1-kt)*ut,tn=ot+(Tt+jt)*ct;break;case 270:on=Outline._rescaleAndSwap,Ft=et+ut,Bt=ot+ct,Ht=-ut,Yt=-ct,zt=et+(1-Tt-jt)*ut,Kt=ot+(1-kt-Rt)*ct,en=et+(1-Tt)*ut,tn=ot+(1-kt)*ct;break}for(const{line:an,points:un}of Ut(this,_d))ft.push(on(an,Ft,Bt,Ht,Yt,dt?new Array(an.length):null)),St.push(on(un,Ft,Bt,Ht,Yt,dt?new Array(un.length):null));return{lines:ft,points:St,rect:[zt,Kt,en,tn]}}static deserialize(et,ot,ut,ct,dt,{paths:{lines:ft,points:St},rotation:kt,thickness:Tt}){const Rt=[];let jt,Ft,Bt,Ht,Yt;switch(kt){case 0:Yt=Outline._rescale,jt=-et/ut,Ft=ot/ct+1,Bt=1/ut,Ht=-1/ct;break;case 90:Yt=Outline._rescaleAndSwap,jt=-ot/ct,Ft=-et/ut,Bt=1/ct,Ht=1/ut;break;case 180:Yt=Outline._rescale,jt=et/ut+1,Ft=-ot/ct,Bt=-1/ut,Ht=1/ct;break;case 270:Yt=Outline._rescaleAndSwap,jt=ot/ct+1,Ft=et/ut+1,Bt=-1/ct,Ht=-1/ut;break}if(!ft){ft=[];for(const Kt of St){const en=Kt.length;if(en===2){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Kt[0],Kt[1]]));continue}if(en===4){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Kt[0],Kt[1],NaN,NaN,NaN,NaN,Kt[2],Kt[3]]));continue}const tn=new Float32Array(3*(en-2));ft.push(tn);let[on,an,un,dn]=Kt.subarray(0,4);tn.set([NaN,NaN,NaN,NaN,on,an],0);for(let Sn=4;Sn<en;Sn+=2){const mn=Kt[Sn],bn=Kt[Sn+1];tn.set(Outline.createBezierPoints(on,an,un,dn,mn,bn),(Sn-2)*3),[on,an,un,dn]=[un,dn,mn,bn]}}}for(let Kt=0,en=ft.length;Kt<en;Kt++)Rt.push({line:Yt(ft[Kt].map(tn=>tn??NaN),jt,Ft,Bt,Ht),points:Yt(St[Kt].map(tn=>tn??NaN),jt,Ft,Bt,Ht)});const zt=new this.prototype.constructor;return zt.build(Rt,ut,ct,1,kt,Tt,dt),zt}get box(){return Ut(this,lu)}updateProperty(et,ot){return et==="stroke-width"?Xn(this,uT,i5).call(this,ot):null}updateParentDimensions([et,ot],ut){const[ct,dt]=Xn(this,zp,Bm).call(this);In(this,Sm,et),In(this,wm,ot),In(this,GE,ut);const[ft,St]=Xn(this,zp,Bm).call(this),kt=ft-ct,Tt=St-dt,Rt=Ut(this,lu);return Rt[0]-=kt,Rt[1]-=Tt,Rt[2]+=2*kt,Rt[3]+=2*Tt,Rt}updateRotation(et){return In(this,uw,et),{path:{transform:this.rotationTransform}}}get viewBox(){return Ut(this,lu).map(Outline.svgRound).join(" ")}get defaultProperties(){const[et,ot]=Ut(this,lu);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get rotationTransform(){const[,,et,ot]=Ut(this,lu);let ut=0,ct=0,dt=0,ft=0,St=0,kt=0;switch(Ut(this,uw)){case 90:ct=ot/et,dt=-et/ot,St=et;break;case 180:ut=-1,ft=-1,St=et,kt=ot;break;case 270:ct=-ot/et,dt=et/ot,kt=ot;break;default:return""}return`matrix(${ut} ${ct} ${dt} ${ft} ${Outline.svgRound(St)} ${Outline.svgRound(kt)})`}getPathResizingSVGProperties([et,ot,ut,ct]){const[dt,ft]=Xn(this,zp,Bm).call(this),[St,kt,Tt,Rt]=Ut(this,lu);if(Math.abs(Tt-dt)<=Outline.PRECISION||Math.abs(Rt-ft)<=Outline.PRECISION){const Yt=et+ut/2-(St+Tt/2),zt=ot+ct/2-(kt+Rt/2);return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:`${this.rotationTransform} translate(${Yt} ${zt})`}}}const jt=(ut-2*dt)/(Tt-2*dt),Ft=(ct-2*ft)/(Rt-2*ft),Bt=Tt/ut,Ht=Rt/ct;return{path:{"transform-origin":`${Outline.svgRound(St)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} scale(${Bt} ${Ht}) translate(${Outline.svgRound(dt)} ${Outline.svgRound(ft)}) scale(${jt} ${Ft}) translate(${Outline.svgRound(-dt)} ${Outline.svgRound(-ft)})`}}}getPathResizedSVGProperties([et,ot,ut,ct]){const[dt,ft]=Xn(this,zp,Bm).call(this),St=Ut(this,lu),[kt,Tt,Rt,jt]=St;if(St[0]=et,St[1]=ot,St[2]=ut,St[3]=ct,Math.abs(Rt-dt)<=Outline.PRECISION||Math.abs(jt-ft)<=Outline.PRECISION){const zt=et+ut/2-(kt+Rt/2),Kt=ot+ct/2-(Tt+jt/2);for(const{line:en,points:tn}of Ut(this,_d))Outline._translate(en,zt,Kt,en),Outline._translate(tn,zt,Kt,tn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const Ft=(ut-2*dt)/(Rt-2*dt),Bt=(ct-2*ft)/(jt-2*ft),Ht=-Ft*(kt+dt)+et+dt,Yt=-Bt*(Tt+ft)+ot+ft;if(Ft!==1||Bt!==1||Ht!==0||Yt!==0)for(const{line:zt,points:Kt}of Ut(this,_d))Outline._rescale(zt,Ht,Yt,Ft,Bt,zt),Outline._rescale(Kt,Ht,Yt,Ft,Bt,Kt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([et,ot],ut){const[ct,dt]=ut,ft=Ut(this,lu),St=et-ft[0],kt=ot-ft[1];if(Ut(this,Sm)===ct&&Ut(this,wm)===dt)for(const{line:Tt,points:Rt}of Ut(this,_d))Outline._translate(Tt,St,kt,Tt),Outline._translate(Rt,St,kt,Rt);else{const Tt=Ut(this,Sm)/ct,Rt=Ut(this,wm)/dt;In(this,Sm,ct),In(this,wm,dt);for(const{line:jt,points:Ft}of Ut(this,_d))Outline._rescale(jt,St,kt,Tt,Rt,jt),Outline._rescale(Ft,St,kt,Tt,Rt,Ft);ft[2]*=Tt,ft[3]*=Rt}return ft[0]=et,ft[1]=ot,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get defaultSVGProperties(){const et=Ut(this,lu);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et[0])} ${Outline.svgRound(et[1])}`,transform:this.rotationTransform||null},bbox:et}}}lu=new WeakMap,uw=new WeakMap,cw=new WeakMap,_d=new WeakMap,Sm=new WeakMap,wm=new WeakMap,GE=new WeakMap,WE=new WeakMap,Tv=new WeakMap,zp=new WeakSet,Bm=function(et=Ut(this,Tv)){const ot=Ut(this,cw)+et/2*Ut(this,GE);return Ut(this,WE)%180===0?[ot/Ut(this,Sm),ot/Ut(this,wm)]:[ot/Ut(this,wm),ot/Ut(this,Sm)]},oT=new WeakSet,n5=function(){const[et,ot,ut,ct]=Ut(this,lu),[dt,ft]=Xn(this,zp,Bm).call(this,0);return[et+dt,ot+ft,ut-2*dt,ct-2*ft]},lT=new WeakSet,r5=function(){const et=In(this,lu,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ct}of Ut(this,_d)){if(ct.length<=12){for(let St=4,kt=ct.length;St<kt;St+=6)Util$1.pointBoundingBox(ct[St],ct[St+1],et);continue}let dt=ct[4],ft=ct[5];for(let St=6,kt=ct.length;St<kt;St+=6){const[Tt,Rt,jt,Ft,Bt,Ht]=ct.subarray(St,St+6);Util$1.bezierBoundingBox(dt,ft,Tt,Rt,jt,Ft,Bt,Ht,et),dt=Bt,ft=Ht}}const[ot,ut]=Xn(this,zp,Bm).call(this);et[0]=MathClamp(et[0]-ot,0,1),et[1]=MathClamp(et[1]-ut,0,1),et[2]=MathClamp(et[2]+ot,0,1),et[3]=MathClamp(et[3]+ut,0,1),et[2]-=et[0],et[3]-=et[1]},uT=new WeakSet,i5=function(et){const[ot,ut]=Xn(this,zp,Bm).call(this);In(this,Tv,et);const[ct,dt]=Xn(this,zp,Bm).call(this),[ft,St]=[ct-ot,dt-ut],kt=Ut(this,lu);return kt[0]-=ft,kt[1]-=St,kt[2]+=2*ft,kt[3]+=2*St,kt};class InkDrawingOptions extends DrawingOptions{constructor(g){super(),this._viewParameters=g,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(g,et){g==="stroke-width"&&(et??(et=this["stroke-width"]),et*=this._viewParameters.realScale),super.updateSVGProperty(g,et)}clone(){const g=new InkDrawingOptions(this._viewParameters);return g.updateAll(this),g}}var cT,s5;const ix=class ix extends DrawingEditor{constructor(et){super({...et,name:"inkEditor"});Rn(this,cT);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new InkDrawingOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(et,ot,ut,ct,dt){return new InkDrawOutliner(et,ot,ut,ct,dt,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(et,ot,ut,ct,dt,ft){return InkDrawOutline.deserialize(et,ot,ut,ct,dt,ft)}static async deserialize(et,ot,ut){let ct=null;if(et instanceof InkAnnotationElement){const{data:{inkLists:ft,rect:St,rotation:kt,id:Tt,color:Rt,opacity:jt,borderStyle:{rawWidth:Ft},popupRef:Bt,richText:Ht,contentsObj:Yt,creationDate:zt,modificationDate:Kt},parent:{page:{pageNumber:en}}}=et;ct=et={annotationType:AnnotationEditorType.INK,color:Array.from(Rt),thickness:Ft,opacity:jt,paths:{points:ft},boxes:null,pageIndex:en-1,rect:St.slice(0),rotation:kt,annotationElementId:Tt,id:Tt,deleted:!1,popupRef:Bt,richText:Ht,comment:(Yt==null?void 0:Yt.str)||null,creationDate:zt,modificationDate:Kt}}const dt=await super.deserialize(et,ot,ut);return dt._initialData=ct,et.comment&&dt.setCommentData(et),dt}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:et,_drawingOptions:ot,parent:ut}=this;ot.updateSVGProperty("stroke-width"),ut.drawLayer.updateProperties(et,ot.toSVGProperties())}static onScaleChangingWhenDrawing(){const et=this._currentParent;et&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),et.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:et,thickness:ot,opacity:ut}){this._drawingOptions=ix.getDefaultDrawingOptions({stroke:Util$1.makeHexColor(...et),"stroke-width":ot,"stroke-opacity":ut})}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:ot,points:ut}=this.serializeDraw(et),{_drawingOptions:{stroke:ct,"stroke-opacity":dt,"stroke-width":ft}}=this,St=Object.assign(super.serialize(et),{color:AnnotationEditor._colorManager.convert(ct),opacity:dt,thickness:ft,paths:{lines:ot,points:ut}});return this.addComment(St),et?(St.isCopy=!0,St):this.annotationElementId&&!Xn(this,cT,s5).call(this,St)?null:(St.id=this.annotationElementId,St)}renderAnnotationElement(et){if(this.deleted)return et.hide(),null;const{points:ot,rect:ut}=this.serializeDraw(!1);return et.updateEdited({rect:ut,thickness:this._drawingOptions["stroke-width"],points:ot,popup:this.comment}),null}};cT=new WeakSet,s5=function(et){const{color:ot,thickness:ut,opacity:ct,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||et.color.some((ft,St)=>ft!==ot[St])||et.thickness!==ut||et.opacity!==ct||et.pageIndex!==dt},Ur(ix,"_type","ink"),Ur(ix,"_editorType",AnnotationEditorType.INK),Ur(ix,"_defaultDrawingOptions",null);let InkEditor=ix;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let g=super.toSVGPath();return g.endsWith("Z")||(g+="Z"),g}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var Pv,hw,eP,Hp,hT,a5,dT,o5,dw,tP,qE,kC,fT,l5,pT,u5,mT,c5,fw,nP,pw,rP,gT,h5;class SignatureExtractor{static extractContoursFromText(g,{fontFamily:et,fontStyle:ot,fontWeight:ut},ct,dt,ft,St){let kt=new OffscreenCanvas(1,1),Tt=kt.getContext("2d",{alpha:!1});const Rt=200,jt=Tt.font=`${ot} ${ut} ${Rt}px ${et}`,{actualBoundingBoxLeft:Ft,actualBoundingBoxRight:Bt,actualBoundingBoxAscent:Ht,actualBoundingBoxDescent:Yt,fontBoundingBoxAscent:zt,fontBoundingBoxDescent:Kt,width:en}=Tt.measureText(g),tn=1.5,on=Math.ceil(Math.max(Math.abs(Ft)+Math.abs(Bt)||0,en)*tn),an=Math.ceil(Math.max(Math.abs(Ht)+Math.abs(Yt)||Rt,Math.abs(zt)+Math.abs(Kt)||Rt)*tn);kt=new OffscreenCanvas(on,an),Tt=kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Tt.font=jt,Tt.filter="grayscale(1)",Tt.fillStyle="white",Tt.fillRect(0,0,on,an),Tt.fillStyle="black",Tt.fillText(g,on*(tn-1)/2,an*(3-tn)/2);const un=Xn(this,fw,nP).call(this,Tt.getImageData(0,0,on,an).data),dn=Xn(this,mT,c5).call(this,un),Sn=Xn(this,pw,rP).call(this,dn),mn=Xn(this,dw,tP).call(this,un,on,an,Sn);return this.processDrawnLines({lines:{curves:mn,width:on,height:an},pageWidth:ct,pageHeight:dt,rotation:ft,innerMargin:St,mustSmooth:!0,areContours:!0})}static process(g,et,ot,ut,ct){const[dt,ft,St]=Xn(this,gT,h5).call(this,g),[kt,Tt]=Xn(this,pT,u5).call(this,dt,ft,St,Math.hypot(ft,St)*Ut(this,Pv).sigmaSFactor,Ut(this,Pv).sigmaR,Ut(this,Pv).kernelSize),Rt=Xn(this,pw,rP).call(this,Tt),jt=Xn(this,dw,tP).call(this,kt,ft,St,Rt);return this.processDrawnLines({lines:{curves:jt,width:ft,height:St},pageWidth:et,pageHeight:ot,rotation:ut,innerMargin:ct,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:g,pageWidth:et,pageHeight:ot,rotation:ut,innerMargin:ct,mustSmooth:dt,areContours:ft}){ut%180!==0&&([et,ot]=[ot,et]);const{curves:St,width:kt,height:Tt}=g,Rt=g.thickness??0,jt=[],Ft=Math.min(et/kt,ot/Tt),Bt=Ft/et,Ht=Ft/ot,Yt=[];for(const{points:Kt}of St){const en=dt?Xn(this,fT,l5).call(this,Kt):Kt;if(!en)continue;Yt.push(en);const tn=en.length,on=new Float32Array(tn),an=new Float32Array(3*(tn===2?2:tn-2));if(jt.push({line:an,points:on}),tn===2){on[0]=en[0]*Bt,on[1]=en[1]*Ht,an.set([NaN,NaN,NaN,NaN,on[0],on[1]],0);continue}let[un,dn,Sn,mn]=en;un*=Bt,dn*=Ht,Sn*=Bt,mn*=Ht,on.set([un,dn,Sn,mn],0),an.set([NaN,NaN,NaN,NaN,un,dn],0);for(let bn=4;bn<tn;bn+=2){const En=on[bn]=en[bn]*Bt,kn=on[bn+1]=en[bn+1]*Ht;an.set(Outline.createBezierPoints(un,dn,Sn,mn,En,kn),(bn-2)*3),[un,dn,Sn,mn]=[Sn,mn,En,kn]}}if(jt.length===0)return null;const zt=ft?new ContourDrawOutline:new InkDrawOutline;return zt.build(jt,et,ot,1,ut,ft?0:Rt,ct),{outline:zt,newCurves:Yt,areContours:ft,thickness:Rt,width:kt,height:Tt}}static async compressSignature({outlines:g,areContours:et,thickness:ot,width:ut,height:ct}){let dt=1/0,ft=-1/0,St=0;for(const en of g){St+=en.length;for(let tn=2,on=en.length;tn<on;tn++){const an=en[tn]-en[tn-2];dt=Math.min(dt,an),ft=Math.max(ft,an)}}let kt;dt>=-128&&ft<=127?kt=Int8Array:dt>=-32768&&ft<=32767?kt=Int16Array:kt=Int32Array;const Tt=g.length,Rt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Tt,jt=new Uint32Array(Rt);let Ft=0;jt[Ft++]=Rt*Uint32Array.BYTES_PER_ELEMENT+(St-2*Tt)*kt.BYTES_PER_ELEMENT,jt[Ft++]=0,jt[Ft++]=ut,jt[Ft++]=ct,jt[Ft++]=et?0:1,jt[Ft++]=Math.max(0,Math.floor(ot??0)),jt[Ft++]=Tt,jt[Ft++]=kt.BYTES_PER_ELEMENT;for(const en of g)jt[Ft++]=en.length-2,jt[Ft++]=en[0],jt[Ft++]=en[1];const Bt=new CompressionStream("deflate-raw"),Ht=Bt.writable.getWriter();await Ht.ready,Ht.write(jt);const Yt=kt.prototype.constructor;for(const en of g){const tn=new Yt(en.length-2);for(let on=2,an=en.length;on<an;on++)tn[on-2]=en[on]-en[on-2];Ht.write(tn)}Ht.close();const zt=await new Response(Bt.readable).arrayBuffer(),Kt=new Uint8Array(zt);return toBase64Util(Kt)}static async decompressSignature(g){try{const et=fromBase64Util(g),{readable:ot,writable:ut}=new DecompressionStream("deflate-raw"),ct=ut.getWriter();await ct.ready,ct.write(et).then(async()=>{await ct.ready,await ct.close()}).catch(()=>{});let dt=null,ft=0;for await(const en of ot)dt||(dt=new Uint8Array(new Uint32Array(en.buffer,0,4)[0])),dt.set(en,ft),ft+=en.length;const St=new Uint32Array(dt.buffer,0,dt.length>>2),kt=St[1];if(kt!==0)throw new Error(`Invalid version: ${kt}`);const Tt=St[2],Rt=St[3],jt=St[4]===0,Ft=St[5],Bt=St[6],Ht=St[7],Yt=[],zt=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Bt)*Uint32Array.BYTES_PER_ELEMENT;let Kt;switch(Ht){case Int8Array.BYTES_PER_ELEMENT:Kt=new Int8Array(dt.buffer,zt);break;case Int16Array.BYTES_PER_ELEMENT:Kt=new Int16Array(dt.buffer,zt);break;case Int32Array.BYTES_PER_ELEMENT:Kt=new Int32Array(dt.buffer,zt);break}ft=0;for(let en=0;en<Bt;en++){const tn=St[POINTS_PROPERTIES_NUMBER*en+BASE_HEADER_LENGTH],on=new Float32Array(tn+2);Yt.push(on);for(let an=0;an<POINTS_PROPERTIES_NUMBER-1;an++)on[an]=St[POINTS_PROPERTIES_NUMBER*en+BASE_HEADER_LENGTH+an+1];for(let an=0;an<tn;an++)on[an+2]=on[an]+Kt[ft++]}return{areContours:jt,thickness:Ft,outlines:Yt,width:Tt,height:Rt}}catch(et){return warn(`decompressSignature: ${et}`),null}}}Pv=new WeakMap,hw=new WeakSet,eP=function(g,et,ot,ut){return ot-=g,ut-=et,ot===0?ut>0?0:4:ot===1?ut+6:2-ut},Hp=new WeakMap,hT=new WeakSet,a5=function(g,et,ot,ut,ct,dt,ft){const St=Xn(this,hw,eP).call(this,ot,ut,ct,dt);for(let kt=0;kt<8;kt++){const Tt=(-kt+St-ft+16)%8,Rt=Ut(this,Hp)[2*Tt],jt=Ut(this,Hp)[2*Tt+1];if(g[(ot+Rt)*et+(ut+jt)]!==0)return Tt}return-1},dT=new WeakSet,o5=function(g,et,ot,ut,ct,dt,ft){const St=Xn(this,hw,eP).call(this,ot,ut,ct,dt);for(let kt=0;kt<8;kt++){const Tt=(kt+St+ft+16)%8,Rt=Ut(this,Hp)[2*Tt],jt=Ut(this,Hp)[2*Tt+1];if(g[(ot+Rt)*et+(ut+jt)]!==0)return Tt}return-1},dw=new WeakSet,tP=function(g,et,ot,ut){const ct=g.length,dt=new Int32Array(ct);for(let Tt=0;Tt<ct;Tt++)dt[Tt]=g[Tt]<=ut?1:0;for(let Tt=1;Tt<ot-1;Tt++)dt[Tt*et]=dt[Tt*et+et-1]=0;for(let Tt=0;Tt<et;Tt++)dt[Tt]=dt[et*ot-1-Tt]=0;let ft=1,St;const kt=[];for(let Tt=1;Tt<ot-1;Tt++){St=1;for(let Rt=1;Rt<et-1;Rt++){const jt=Tt*et+Rt,Ft=dt[jt];if(Ft===0)continue;let Bt=Tt,Ht=Rt;if(Ft===1&&dt[jt-1]===0)ft+=1,Ht-=1;else if(Ft>=1&&dt[jt+1]===0)ft+=1,Ht+=1,Ft>1&&(St=Ft);else{Ft!==1&&(St=Math.abs(Ft));continue}const Yt=[Rt,Tt],zt=Ht===Rt+1,Kt={isHole:zt,points:Yt,id:ft,parent:0};kt.push(Kt);let en;for(const bn of kt)if(bn.id===St){en=bn;break}en?en.isHole?Kt.parent=zt?en.parent:St:Kt.parent=zt?St:en.parent:Kt.parent=zt?St:0;const tn=Xn(this,hT,a5).call(this,dt,et,Tt,Rt,Bt,Ht,0);if(tn===-1){dt[jt]=-ft,dt[jt]!==1&&(St=Math.abs(dt[jt]));continue}let on=Ut(this,Hp)[2*tn],an=Ut(this,Hp)[2*tn+1];const un=Tt+on,dn=Rt+an;Bt=un,Ht=dn;let Sn=Tt,mn=Rt;for(;;){const bn=Xn(this,dT,o5).call(this,dt,et,Sn,mn,Bt,Ht,1);on=Ut(this,Hp)[2*bn],an=Ut(this,Hp)[2*bn+1];const En=Sn+on,kn=mn+an;Yt.push(kn,En);const Pn=Sn*et+mn;if(dt[Pn+1]===0?dt[Pn]=-ft:dt[Pn]===1&&(dt[Pn]=ft),En===Tt&&kn===Rt&&Sn===un&&mn===dn){dt[jt]!==1&&(St=Math.abs(dt[jt]));break}else Bt=Sn,Ht=mn,Sn=En,mn=kn}}}return kt},qE=new WeakSet,kC=function(g,et,ot,ut){if(ot-et<=4){for(let un=et;un<ot-2;un+=2)ut.push(g[un],g[un+1]);return}const ct=g[et],dt=g[et+1],ft=g[ot-4]-ct,St=g[ot-3]-dt,kt=Math.hypot(ft,St),Tt=ft/kt,Rt=St/kt,jt=Tt*dt-Rt*ct,Ft=St/ft,Bt=1/kt,Ht=Math.atan(Ft),Yt=Math.cos(Ht),zt=Math.sin(Ht),Kt=Bt*(Math.abs(Yt)+Math.abs(zt)),en=Bt*(1-Kt+Kt**2),tn=Math.max(Math.atan(Math.abs(zt+Yt)*en),Math.atan(Math.abs(zt-Yt)*en));let on=0,an=et;for(let un=et+2;un<ot-2;un+=2){const dn=Math.abs(jt-Tt*g[un+1]+Rt*g[un]);dn>on&&(an=un,on=dn)}on>(kt*tn)**2?(Xn(this,qE,kC).call(this,g,et,an+2,ut),Xn(this,qE,kC).call(this,g,an,ot,ut)):ut.push(ct,dt)},fT=new WeakSet,l5=function(g){const et=[],ot=g.length;return Xn(this,qE,kC).call(this,g,0,ot,et),et.push(g[ot-2],g[ot-1]),et.length<=4?null:et},pT=new WeakSet,u5=function(g,et,ot,ut,ct,dt){const ft=new Float32Array(dt**2),St=-2*ut**2,kt=dt>>1;for(let Ht=0;Ht<dt;Ht++){const Yt=(Ht-kt)**2;for(let zt=0;zt<dt;zt++)ft[Ht*dt+zt]=Math.exp((Yt+(zt-kt)**2)/St)}const Tt=new Float32Array(256),Rt=-2*ct**2;for(let Ht=0;Ht<256;Ht++)Tt[Ht]=Math.exp(Ht**2/Rt);const jt=g.length,Ft=new Uint8Array(jt),Bt=new Uint32Array(256);for(let Ht=0;Ht<ot;Ht++)for(let Yt=0;Yt<et;Yt++){const zt=Ht*et+Yt,Kt=g[zt];let en=0,tn=0;for(let an=0;an<dt;an++){const un=Ht+an-kt;if(!(un<0||un>=ot))for(let dn=0;dn<dt;dn++){const Sn=Yt+dn-kt;if(Sn<0||Sn>=et)continue;const mn=g[un*et+Sn],bn=ft[an*dt+dn]*Tt[Math.abs(mn-Kt)];en+=mn*bn,tn+=bn}}const on=Ft[zt]=Math.round(en/tn);Bt[on]++}return[Ft,Bt]},mT=new WeakSet,c5=function(g){const et=new Uint32Array(256);for(const ot of g)et[ot]++;return et},fw=new WeakSet,nP=function(g){const et=g.length,ot=new Uint8ClampedArray(et>>2);let ut=-1/0,ct=1/0;for(let ft=0,St=ot.length;ft<St;ft++){const kt=ot[ft]=g[ft<<2];ut=Math.max(ut,kt),ct=Math.min(ct,kt)}const dt=255/(ut-ct);for(let ft=0,St=ot.length;ft<St;ft++)ot[ft]=(ot[ft]-ct)*dt;return ot},pw=new WeakSet,rP=function(g){let et,ot=-1/0,ut=-1/0;const ct=g.findIndex(St=>St!==0);let dt=ct,ft=ct;for(et=ct;et<256;et++){const St=g[et];St>ot&&(et-dt>ut&&(ut=et-dt,ft=et-1),ot=St,dt=et)}for(et=ft-1;et>=0&&!(g[et]>g[et+1]);et--);return et},gT=new WeakSet,h5=function(g){const et=g,{width:ot,height:ut}=g,{maxDim:ct}=Ut(this,Pv);let dt=ot,ft=ut;if(ot>ct||ut>ct){let jt=ot,Ft=ut,Bt=Math.log2(Math.max(ot,ut)/ct);const Ht=Math.floor(Bt);Bt=Bt===Ht?Ht-1:Ht;for(let zt=0;zt<Bt;zt++){dt=Math.ceil(jt/2),ft=Math.ceil(Ft/2);const Kt=new OffscreenCanvas(dt,ft);Kt.getContext("2d").drawImage(g,0,0,jt,Ft,0,0,dt,ft),jt=dt,Ft=ft,g!==et&&g.close(),g=Kt.transferToImageBitmap()}const Yt=Math.min(ct/dt,ct/ft);dt=Math.round(dt*Yt),ft=Math.round(ft*Yt)}const kt=new OffscreenCanvas(dt,ft).getContext("2d",{willReadFrequently:!0});kt.fillStyle="white",kt.fillRect(0,0,dt,ft),kt.filter="grayscale(1)",kt.drawImage(g,0,0,g.width,g.height,0,0,dt,ft);const Tt=kt.getImageData(0,0,dt,ft).data;return[Xn(this,fw,nP).call(this,Tt),dt,ft]},Rn(SignatureExtractor,hw),Rn(SignatureExtractor,hT),Rn(SignatureExtractor,dT),Rn(SignatureExtractor,dw),Rn(SignatureExtractor,qE),Rn(SignatureExtractor,fT),Rn(SignatureExtractor,pT),Rn(SignatureExtractor,mT),Rn(SignatureExtractor,fw),Rn(SignatureExtractor,pw),Rn(SignatureExtractor,gT),Rn(SignatureExtractor,Pv,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),Rn(SignatureExtractor,Hp,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const g=new SignatureOptions;return g.updateAll(this),g}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(g){super(g),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const g=new DrawnSignatureOptions(this._viewParameters);return g.updateAll(this),g}}var Ay,Cm,Ty,Rv;const $u=class $u extends DrawingEditor{constructor(et){super({...et,mustBeCommitted:!0,name:"signatureEditor"});Rn(this,Ay,!1);Rn(this,Cm,null);Rn(this,Ty,null);Rn(this,Rv,null);this._willKeepAspectRatio=!0,In(this,Ty,et.signatureData||null),In(this,Cm,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Ut(this,Cm)}}static computeTelemetryFinalData(et){const ot=et.get("hasDescription");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let et,ot;const{_isCopy:ut}=this;if(ut&&(this._isCopy=!1,et=this.x,ot=this.y),super.render(),this._drawId===null)if(Ut(this,Ty)){const{lines:ct,mustSmooth:dt,areContours:ft,description:St,uuid:kt,heightInPage:Tt}=Ut(this,Ty),{rawDims:{pageWidth:Rt,pageHeight:jt},rotation:Ft}=this.parent.viewport,Bt=SignatureExtractor.processDrawnLines({lines:ct,pageWidth:Rt,pageHeight:jt,rotation:Ft,innerMargin:$u._INNER_MARGIN,mustSmooth:dt,areContours:ft});this.addSignature(Bt,Tt,St,kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Ut(this,Cm)||""}));return ut&&(this._isCopy=!0,this._moveAfterPaste(et,ot)),this.div}setUuid(et){In(this,Rv,et),this.addEditToolbar()}getUuid(){return Ut(this,Rv)}get description(){return Ut(this,Cm)}set description(et){In(this,Cm,et),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:et})),super.addEditToolbar().then(ot=>{ot==null||ot.updateEditSignatureButton(et)}))}getSignaturePreview(){const{newCurves:et,areContours:ot,thickness:ut,width:ct,height:dt}=Ut(this,Ty),ft=Math.max(ct,dt),St=SignatureExtractor.processDrawnLines({lines:{curves:et.map(kt=>({points:kt})),thickness:ut,width:ct,height:dt},pageWidth:ft,pageHeight:ft,rotation:0,innerMargin:0,mustSmooth:!1,areContours:ot});return{areContours:ot,outline:St.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(et,ot,ut,ct){const{x:dt,y:ft}=this,{outline:St}=In(this,Ty,et);In(this,Ay,St instanceof ContourDrawOutline),this.description=ut;let kt;Ut(this,Ay)?kt=$u.getDefaultDrawingOptions():(kt=$u._defaultDrawnSignatureOptions.clone(),kt.updateProperties({"stroke-width":St.thickness})),this._addOutlines({drawOutlines:St,drawingOptions:kt});const[,Tt]=this.pageDimensions;let Rt=ot/Tt;Rt=Rt>=1?.5:Rt,this.width*=Rt/this.height,this.width>=1&&(Rt*=.9/this.width,this.width=.9),this.height=Rt,this.setDims(),this.x=dt,this.y=ft,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ct),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ct,hasDescription:!!ut}}),this.div.hidden=!1}getFromImage(et){const{rawDims:{pageWidth:ot,pageHeight:ut},rotation:ct}=this.parent.viewport;return SignatureExtractor.process(et,ot,ut,ct,$u._INNER_MARGIN)}getFromText(et,ot){const{rawDims:{pageWidth:ut,pageHeight:ct},rotation:dt}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(et,ot,ut,ct,dt,$u._INNER_MARGIN)}getDrawnSignature(et){const{rawDims:{pageWidth:ot,pageHeight:ut},rotation:ct}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:et,pageWidth:ot,pageHeight:ut,rotation:ct,innerMargin:$u._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:et,thickness:ot}){et?this._drawingOptions=$u.getDefaultDrawingOptions():(this._drawingOptions=$u._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":ot}))}serialize(et=!1){if(this.isEmpty())return null;const{lines:ot,points:ut}=this.serializeDraw(et),{_drawingOptions:{"stroke-width":ct}}=this,dt=Object.assign(super.serialize(et),{isSignature:!0,areContours:Ut(this,Ay),color:[0,0,0],thickness:Ut(this,Ay)?0:ct});return this.addComment(dt),et?(dt.paths={lines:ot,points:ut},dt.uuid=Ut(this,Rv),dt.isCopy=!0):dt.lines=ot,Ut(this,Cm)&&(dt.accessibilityData={type:"Figure",alt:Ut(this,Cm)}),dt}static deserializeDraw(et,ot,ut,ct,dt,ft){return ft.areContours?ContourDrawOutline.deserialize(et,ot,ut,ct,dt,ft):InkDrawOutline.deserialize(et,ot,ut,ct,dt,ft)}static async deserialize(et,ot,ut){var dt;const ct=await super.deserialize(et,ot,ut);return In(ct,Ay,et.areContours),ct.description=((dt=et.accessibilityData)==null?void 0:dt.alt)||"",In(ct,Rv,et.uuid),ct}};Ay=new WeakMap,Cm=new WeakMap,Ty=new WeakMap,Rv=new WeakMap,Ur($u,"_type","signature"),Ur($u,"_editorType",AnnotationEditorType.SIGNATURE),Ur($u,"_defaultDrawingOptions",null);let SignatureEditor=$u;var wo,Al,Py,b0,Ry,KE,E0,Nv,km,_f,YE,Mv,U_,Iv,G_,XE,AC,JE,TC,QE,PC,mw,iP,ZE,RC,yT,d5;class StampEditor extends AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});Rn(this,Mv);Rn(this,Iv);Rn(this,XE);Rn(this,JE);Rn(this,QE);Rn(this,mw);Rn(this,ZE);Rn(this,yT);Rn(this,wo,null);Rn(this,Al,null);Rn(this,Py,null);Rn(this,b0,null);Rn(this,Ry,null);Rn(this,KE,"");Rn(this,E0,null);Rn(this,Nv,!1);Rn(this,km,null);Rn(this,_f,!1);Rn(this,YE,!1);In(this,b0,et.bitmapUrl),In(this,Ry,et.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot)}static isHandlingMimeForPasting(et){return SupportedImageMimeTypes.includes(et)}static paste(et,ot){ot.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:et.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var et;return{type:"stamp",hasAltText:!!((et=this.altTextData)!=null&&et.altText)}}static computeTelemetryFinalData(et){const ot=et.get("hasAltText");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}async mlGuessAltText(et=null,ot=!0){if(this.hasAltTextData())return null;const{mlManager:ut}=this._uiManager;if(!ut)throw new Error("No ML.");if(!await ut.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ct,width:dt,height:ft}=et||this.copyCanvas(null,null,!0).imageData,St=await ut.guess({name:"altText",request:{data:ct,width:dt,height:ft,channels:ct.length/(dt*ft)}});if(!St)throw new Error("No response from the AI service.");if(St.error)throw new Error("Error from the AI service.");if(St.cancel)return null;if(!St.output)throw new Error("No valid response from the AI service.");const kt=St.output;return await this.setGuessedAltText(kt),ot&&!this.hasAltTextData()&&(this.altTextData={alt:kt,decorative:!1}),kt}remove(){var et;Ut(this,Al)&&(In(this,wo,null),this._uiManager.imageManager.deleteId(Ut(this,Al)),(et=Ut(this,E0))==null||et.remove(),In(this,E0,null),Ut(this,km)&&(clearTimeout(Ut(this,km)),In(this,km,null))),super.remove()}rebuild(){if(!this.parent){Ut(this,Al)&&Xn(this,XE,AC).call(this);return}super.rebuild(),this.div!==null&&(Ut(this,Al)&&Ut(this,E0)===null&&Xn(this,XE,AC).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(et){this._isDraggable=!0,et&&this.div.focus()}isEmpty(){return!(Ut(this,Py)||Ut(this,wo)||Ut(this,b0)||Ut(this,Ry)||Ut(this,Al)||Ut(this,Nv))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let et,ot;return this._isCopy&&(et=this.x,ot=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Ut(this,Nv)||(Ut(this,wo)?Xn(this,JE,TC).call(this):Xn(this,XE,AC).call(this)),this._isCopy&&this._moveAfterPaste(et,ot),this._uiManager.addShouldRescale(this),this.div}setCanvas(et,ot){const{id:ut,bitmap:ct}=this._uiManager.imageManager.getFromCanvas(et,ot);ot.remove(),ut&&this._uiManager.imageManager.isValidId(ut)&&(In(this,Al,ut),ct&&In(this,wo,ct),In(this,Nv,!1),Xn(this,JE,TC).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;Ut(this,km)!==null&&clearTimeout(Ut(this,km)),In(this,km,setTimeout(()=>{In(this,km,null),Xn(this,mw,iP).call(this)},200))}copyCanvas(et,ot,ut=!1){et||(et=224);const{width:ct,height:dt}=Ut(this,wo),ft=new OutputScale;let St=Ut(this,wo),kt=ct,Tt=dt,Rt=null;if(ot){if(ct>ot||dt>ot){const un=Math.min(ot/ct,ot/dt);kt=Math.floor(ct*un),Tt=Math.floor(dt*un)}Rt=document.createElement("canvas");const Ft=Rt.width=Math.ceil(kt*ft.sx),Bt=Rt.height=Math.ceil(Tt*ft.sy);Ut(this,_f)||(St=Xn(this,QE,PC).call(this,Ft,Bt));const Ht=Rt.getContext("2d");Ht.filter=this._uiManager.hcmFilter;let Yt="white",zt="#cfcfd8";this._uiManager.hcmFilter!=="none"?zt="black":ColorScheme.isDarkMode&&(Yt="#8f8f9d",zt="#42414d");const Kt=15,en=Kt*ft.sx,tn=Kt*ft.sy,on=new OffscreenCanvas(en*2,tn*2),an=on.getContext("2d");an.fillStyle=Yt,an.fillRect(0,0,en*2,tn*2),an.fillStyle=zt,an.fillRect(0,0,en,tn),an.fillRect(en,tn,en,tn),Ht.fillStyle=Ht.createPattern(on,"repeat"),Ht.fillRect(0,0,Ft,Bt),Ht.drawImage(St,0,0,St.width,St.height,0,0,Ft,Bt)}let jt=null;if(ut){let Ft,Bt;if(ft.symmetric&&St.width<et&&St.height<et)Ft=St.width,Bt=St.height;else if(St=Ut(this,wo),ct>et||dt>et){const zt=Math.min(et/ct,et/dt);Ft=Math.floor(ct*zt),Bt=Math.floor(dt*zt),Ut(this,_f)||(St=Xn(this,QE,PC).call(this,Ft,Bt))}const Yt=new OffscreenCanvas(Ft,Bt).getContext("2d",{willReadFrequently:!0});Yt.drawImage(St,0,0,St.width,St.height,0,0,Ft,Bt),jt={width:Ft,height:Bt,data:Yt.getImageData(0,0,Ft,Bt).data}}return{canvas:Rt,width:kt,height:Tt,imageData:jt}}static async deserialize(et,ot,ut){var Yt;let ct=null,dt=!1;if(et instanceof StampAnnotationElement){const{data:{rect:zt,rotation:Kt,id:en,structParent:tn,popupRef:on,richText:an,contentsObj:un,creationDate:dn,modificationDate:Sn},container:mn,parent:{page:{pageNumber:bn}},canvas:En}=et;let kn,Pn;En?(delete et.canvas,{id:kn,bitmap:Pn}=ut.imageManager.getFromCanvas(mn.id,En),En.remove()):(dt=!0,et._hasNoCanvas=!0);const Ln=((Yt=await ot._structTree.getAriaAttributes(`${AnnotationPrefix}${en}`))==null?void 0:Yt.get("aria-label"))||"";ct=et={annotationType:AnnotationEditorType.STAMP,bitmapId:kn,bitmap:Pn,pageIndex:bn-1,rect:zt.slice(0),rotation:Kt,annotationElementId:en,id:en,deleted:!1,accessibilityData:{decorative:!1,altText:Ln},isSvg:!1,structParent:tn,popupRef:on,richText:an,comment:(un==null?void 0:un.str)||null,creationDate:dn,modificationDate:Sn}}const ft=await super.deserialize(et,ot,ut),{rect:St,bitmap:kt,bitmapUrl:Tt,bitmapId:Rt,isSvg:jt,accessibilityData:Ft}=et;dt?(ut.addMissingCanvas(et.id,ft),In(ft,Nv,!0)):Rt&&ut.imageManager.isValidId(Rt)?(In(ft,Al,Rt),kt&&In(ft,wo,kt)):In(ft,b0,Tt),In(ft,_f,jt);const[Bt,Ht]=ft.pageDimensions;return ft.width=(St[2]-St[0])/Bt,ft.height=(St[3]-St[1])/Ht,Ft&&(ft.altTextData=Ft),ft._initialData=ct,et.comment&&ft.setCommentData(et),In(ft,YE,!!ct),ft}serialize(et=!1,ot=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ut=Object.assign(super.serialize(et),{bitmapId:Ut(this,Al),isSvg:Ut(this,_f)});if(this.addComment(ut),et)return ut.bitmapUrl=Xn(this,ZE,RC).call(this,!0),ut.accessibilityData=this.serializeAltText(!0),ut.isCopy=!0,ut;const{decorative:ct,altText:dt}=this.serializeAltText(!1);if(!ct&&dt&&(ut.accessibilityData={type:"Figure",alt:dt}),this.annotationElementId){const St=Xn(this,yT,d5).call(this,ut);return St.isSame?null:(St.isSameAltText?delete ut.accessibilityData:ut.accessibilityData.structParent=this._initialData.structParent??-1,ut.id=this.annotationElementId,delete ut.bitmapId,ut)}if(ot===null)return ut;ot.stamps||(ot.stamps=new Map);const ft=Ut(this,_f)?(ut.rect[2]-ut.rect[0])*(ut.rect[3]-ut.rect[1]):null;if(!ot.stamps.has(Ut(this,Al)))ot.stamps.set(Ut(this,Al),{area:ft,serialized:ut}),ut.bitmap=Xn(this,ZE,RC).call(this,!1);else if(Ut(this,_f)){const St=ot.stamps.get(Ut(this,Al));ft>St.area&&(St.area=ft,St.serialized.bitmap.close(),St.serialized.bitmap=Xn(this,ZE,RC).call(this,!1))}return ut}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}wo=new WeakMap,Al=new WeakMap,Py=new WeakMap,b0=new WeakMap,Ry=new WeakMap,KE=new WeakMap,E0=new WeakMap,Nv=new WeakMap,km=new WeakMap,_f=new WeakMap,YE=new WeakMap,Mv=new WeakSet,U_=function(et,ot=!1){if(!et){this.remove();return}In(this,wo,et.bitmap),ot||(In(this,Al,et.id),In(this,_f,et.isSvg)),et.file&&In(this,KE,et.file.name),Xn(this,JE,TC).call(this)},Iv=new WeakSet,G_=function(){if(In(this,Py,null),this._uiManager.enableWaiting(!1),!!Ut(this,E0)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ut(this,wo)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ut(this,wo)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},XE=new WeakSet,AC=function(){if(Ut(this,Al)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Ut(this,Al)).then(ut=>Xn(this,Mv,U_).call(this,ut,!0)).finally(()=>Xn(this,Iv,G_).call(this));return}if(Ut(this,b0)){const ut=Ut(this,b0);In(this,b0,null),this._uiManager.enableWaiting(!0),In(this,Py,this._uiManager.imageManager.getFromUrl(ut).then(ct=>Xn(this,Mv,U_).call(this,ct)).finally(()=>Xn(this,Iv,G_).call(this)));return}if(Ut(this,Ry)){const ut=Ut(this,Ry);In(this,Ry,null),this._uiManager.enableWaiting(!0),In(this,Py,this._uiManager.imageManager.getFromFile(ut).then(ct=>Xn(this,Mv,U_).call(this,ct)).finally(()=>Xn(this,Iv,G_).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=SupportedImageMimeTypes.join(",");const ot=this._uiManager._signal;In(this,Py,new Promise(ut=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(et.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Xn(this,Mv,U_).call(this,ct)}ut()},{signal:ot}),et.addEventListener("cancel",()=>{this.remove(),ut()},{signal:ot})}).finally(()=>Xn(this,Iv,G_).call(this))),et.click()},JE=new WeakSet,TC=function(){var kt;const{div:et}=this;let{width:ot,height:ut}=Ut(this,wo);const[ct,dt]=this.pageDimensions,ft=.75;if(this.width)ot=this.width*ct,ut=this.height*dt;else if(ot>ft*ct||ut>ft*dt){const Tt=Math.min(ft*ct/ot,ft*dt/ut);ot*=Tt,ut*=Tt}this._uiManager.enableWaiting(!1);const St=In(this,E0,document.createElement("canvas"));St.setAttribute("role","img"),this.addContainer(St),this.width=ot/ct,this.height=ut/dt,this.setDims(),(kt=this._initialOptions)!=null&&kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(et.hidden=!1),Xn(this,mw,iP).call(this),Ut(this,YE)||(this.parent.addUndoableEditor(this),In(this,YE,!0)),this._reportTelemetry({action:"inserted_image"}),Ut(this,KE)&&this.div.setAttribute("aria-description",Ut(this,KE)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},QE=new WeakSet,PC=function(et,ot){const{width:ut,height:ct}=Ut(this,wo);let dt=ut,ft=ct,St=Ut(this,wo);for(;dt>2*et||ft>2*ot;){const kt=dt,Tt=ft;dt>2*et&&(dt=dt>=16384?Math.floor(dt/2)-1:Math.ceil(dt/2)),ft>2*ot&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const Rt=new OffscreenCanvas(dt,ft);Rt.getContext("2d").drawImage(St,0,0,kt,Tt,0,0,dt,ft),St=Rt.transferToImageBitmap()}return St},mw=new WeakSet,iP=function(){const[et,ot]=this.parentDimensions,{width:ut,height:ct}=this,dt=new OutputScale,ft=Math.ceil(ut*et*dt.sx),St=Math.ceil(ct*ot*dt.sy),kt=Ut(this,E0);if(!kt||kt.width===ft&&kt.height===St)return;kt.width=ft,kt.height=St;const Tt=Ut(this,_f)?Ut(this,wo):Xn(this,QE,PC).call(this,ft,St),Rt=kt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Tt,0,0,Tt.width,Tt.height,0,0,ft,St)},ZE=new WeakSet,RC=function(et){if(et){if(Ut(this,_f)){const ct=this._uiManager.imageManager.getSvgUrl(Ut(this,Al));if(ct)return ct}const ot=document.createElement("canvas");return{width:ot.width,height:ot.height}=Ut(this,wo),ot.getContext("2d").drawImage(Ut(this,wo),0,0),ot.toDataURL()}if(Ut(this,_f)){const[ot,ut]=this.pageDimensions,ct=Math.round(this.width*ot*PixelsPerInch.PDF_TO_CSS_UNITS),dt=Math.round(this.height*ut*PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(ct,dt);return ft.getContext("2d").drawImage(Ut(this,wo),0,0,Ut(this,wo).width,Ut(this,wo).height,0,0,ct,dt),ft.transferToImageBitmap()}return structuredClone(Ut(this,wo))},yT=new WeakSet,d5=function(et){var ft;const{pageIndex:ot,accessibilityData:{altText:ut}}=this._initialData,ct=et.pageIndex===ot,dt=(((ft=et.accessibilityData)==null?void 0:ft.alt)||"")===ut;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ct&&dt,isSameAltText:dt}},Ur(StampEditor,"_type","stamp"),Ur(StampEditor,"_editorType",AnnotationEditorType.STAMP);var Ov,e_,Ny,My,_0,Nu,Iy,t_,n_,Up,S0,Tl,w0,Oy,r_,ms,Ly,gw,sP,vT,f5,Sp,em,yw,aP,xw,oP,i_,NC;const Np=class Np{constructor({uiManager:g,pageIndex:et,div:ot,structTreeLayer:ut,accessibilityManager:ct,annotationLayer:dt,drawLayer:ft,textLayer:St,viewport:kt,l10n:Tt}){Rn(this,gw);Rn(this,vT);Rn(this,Sp);Rn(this,yw);Rn(this,xw);Rn(this,i_);Rn(this,Ov,void 0);Rn(this,e_,!1);Rn(this,Ny,null);Rn(this,My,null);Rn(this,_0,null);Rn(this,Nu,new Map);Rn(this,Iy,!1);Rn(this,t_,!1);Rn(this,n_,!1);Rn(this,Up,null);Rn(this,S0,null);Rn(this,Tl,null);Rn(this,w0,null);Rn(this,Oy,null);Rn(this,r_,-1);Rn(this,ms,void 0);const Rt=[...Ut(Np,Ly).values()];if(!Np._initialized){Np._initialized=!0;for(const jt of Rt)jt.initialize(Tt,g)}g.registerEditorTypes(Rt),In(this,ms,g),this.pageIndex=et,this.div=ot,In(this,Ov,ct),In(this,Ny,dt),this.viewport=kt,In(this,Tl,St),this.drawLayer=ft,this._structTree=ut,Ut(this,ms).addLayer(this)}get isEmpty(){return Ut(this,Nu).size===0}get isInvisible(){return this.isEmpty&&Ut(this,ms).getMode()===AnnotationEditorType.NONE}updateToolbar(g){Ut(this,ms).updateToolbar(g)}updateMode(g=Ut(this,ms).getMode()){switch(Xn(this,i_,NC).call(this),g){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:et}=this.div;if(et.toggle("nonEditing",!1),g===AnnotationEditorType.POPUP)et.toggle("commentEditing",!0);else{et.toggle("commentEditing",!1);for(const ot of Ut(Np,Ly).values())et.toggle(`${ot._type}Editing`,g===ot._editorType)}this.div.hidden=!1}hasTextLayer(g){var et;return g===((et=Ut(this,Tl))==null?void 0:et.div)}setEditingState(g){Ut(this,ms).setEditingState(g)}addCommands(g){Ut(this,ms).addCommands(g)}cleanUndoStack(g){Ut(this,ms).cleanUndoStack(g)}toggleDrawing(g=!1){this.div.classList.toggle("drawing",!g)}togglePointerEvents(g=!1){this.div.classList.toggle("disabled",!g)}toggleAnnotationLayerPointerEvents(g=!1){var et;(et=Ut(this,Ny))==null||et.div.classList.toggle("disabled",!g)}async enable(){var ot;In(this,n_,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(ot=Ut(this,Oy))==null||ot.abort(),In(this,Oy,null);const g=new Set;for(const ut of Ut(this,gw,sP))ut.enableEditing(),ut.show(!0),ut.annotationElementId&&(Ut(this,ms).removeChangedExistingAnnotation(ut),g.add(ut.annotationElementId));const et=Ut(this,Ny);if(et)for(const ut of et.getEditableAnnotations()){if(ut.hide(),Ut(this,ms).isDeletedAnnotationElement(ut.data.id)||g.has(ut.data.id))continue;const ct=await this.deserialize(ut);ct&&(this.addOrRebuild(ct),ct.enableEditing())}In(this,n_,!1),Ut(this,ms)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var ot;if(In(this,t_,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Ut(this,Tl)&&!Ut(this,Oy)){In(this,Oy,new AbortController);const ut=Ut(this,ms).combinedSignal(Ut(this,Oy));Ut(this,Tl).div.addEventListener("pointerdown",ct=>{const{clientX:ft,clientY:St,timeStamp:kt}=ct,Tt=Ut(this,r_);if(kt-Tt>500){In(this,r_,kt);return}In(this,r_,-1);const{classList:Rt}=this.div;Rt.toggle("getElements",!0);const jt=document.elementsFromPoint(ft,St);if(Rt.toggle("getElements",!1),!this.div.contains(jt[0]))return;let Ft;const Bt=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Yt of jt)if(Bt.test(Yt.id)){Ft=Yt.id;break}if(!Ft)return;const Ht=Ut(this,Nu).get(Ft);(Ht==null?void 0:Ht.annotationElementId)===null&&(ct.stopPropagation(),ct.preventDefault(),Ht.dblclick(ct))},{signal:ut,capture:!0})}const g=Ut(this,Ny);if(g){const ut=new Map,ct=new Map;for(const ft of Ut(this,gw,sP)){if(ft.disableEditing(),!ft.annotationElementId){ft.updateFakeAnnotationElement(g);continue}if(ft.serialize()!==null){ut.set(ft.annotationElementId,ft);continue}else ct.set(ft.annotationElementId,ft);(ot=this.getEditableAnnotation(ft.annotationElementId))==null||ot.show(),ft.remove()}const dt=g.getEditableAnnotations();for(const ft of dt){const{id:St}=ft.data;if(Ut(this,ms).isDeletedAnnotationElement(St)){ft.updateEdited({deleted:!0});continue}let kt=ct.get(St);if(kt){kt.resetAnnotationElement(ft),kt.show(!1),ft.show();continue}kt=ut.get(St),kt&&(Ut(this,ms).addChangedExistingAnnotation(kt),kt.renderAnnotationElement(ft)&&kt.show(!1)),ft.show()}}Xn(this,i_,NC).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:et}=this.div;for(const ut of Ut(Np,Ly).values())et.remove(`${ut._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),In(this,t_,!1)}getEditableAnnotation(g){var et;return((et=Ut(this,Ny))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){Ut(this,ms).getActive()!==g&&Ut(this,ms).setActiveEditor(g)}enableTextSelection(){var g;if(this.div.tabIndex=-1,(g=Ut(this,Tl))!=null&&g.div&&!Ut(this,w0)){In(this,w0,new AbortController);const et=Ut(this,ms).combinedSignal(Ut(this,w0));Ut(this,Tl).div.addEventListener("pointerdown",Xn(this,vT,f5).bind(this),{signal:et}),Ut(this,Tl).div.classList.add("highlighting")}}disableTextSelection(){var g;this.div.tabIndex=0,(g=Ut(this,Tl))!=null&&g.div&&Ut(this,w0)&&(Ut(this,w0).abort(),In(this,w0,null),Ut(this,Tl).div.classList.remove("highlighting"))}enableClick(){if(Ut(this,My))return;In(this,My,new AbortController);const g=Ut(this,ms).combinedSignal(Ut(this,My));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:g});const et=this.pointerup.bind(this);this.div.addEventListener("pointerup",et,{signal:g}),this.div.addEventListener("pointercancel",et,{signal:g})}disableClick(){var g;(g=Ut(this,My))==null||g.abort(),In(this,My,null)}attach(g){Ut(this,Nu).set(g.id,g);const{annotationElementId:et}=g;et&&Ut(this,ms).isDeletedAnnotationElement(et)&&Ut(this,ms).removeDeletedAnnotationElement(g)}detach(g){var et;Ut(this,Nu).delete(g.id),(et=Ut(this,Ov))==null||et.removePointerInTextLayer(g.contentDiv),!Ut(this,t_)&&g.annotationElementId&&Ut(this,ms).addDeletedAnnotationElement(g)}remove(g){this.detach(g),Ut(this,ms).removeEditor(g),g.div.remove(),g.isAttachedToDOM=!1}changeParent(g){var et;g.parent!==this&&(g.parent&&g.annotationElementId&&(Ut(this,ms).addDeletedAnnotationElement(g.annotationElementId),AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(!(g.parent===this&&g.isAttachedToDOM)){if(this.changeParent(g),Ut(this,ms).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(!Ut(this,n_)),Ut(this,ms).addToAnnotationStorage(g),g._reportTelemetry(g.telemetryInitialData)}}moveEditorInDOM(g){var ot;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&!Ut(this,_0)&&(g._focusEventsAllowed=!1,In(this,_0,setTimeout(()=>{In(this,_0,null),g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:Ut(this,ms)._signal}),et.focus())},0))),g._structTreeParentId=(ot=Ut(this,Ov))==null?void 0:ot.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?(g.parent||(g.parent=this),g.rebuild(),g.show()):this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ot=()=>{g.remove()};this.addCommands({cmd:et,undo:ot,mustExec:!1})}getEditorByUID(g){for(const et of Ut(this,Nu).values())if(et.uid===g)return et;return null}getNextId(){return Ut(this,ms).getId()}combinedSignal(g){return Ut(this,ms).combinedSignal(g)}canCreateNewEmptyEditor(){var g;return(g=Ut(this,Sp,em))==null?void 0:g.canCreateNewEmptyEditor()}async pasteEditor(g,et){this.updateToolbar(g),await Ut(this,ms).updateMode(g.mode);const{offsetX:ot,offsetY:ut}=Xn(this,xw,oP).call(this),ct=this.getNextId(),dt=Xn(this,yw,aP).call(this,{parent:this,id:ct,x:ot,y:ut,uiManager:Ut(this,ms),isCentered:!0,...et});dt&&this.add(dt)}async deserialize(g){var et;return await((et=Ut(Np,Ly).get(g.annotationType??g.annotationEditorType))==null?void 0:et.deserialize(g,this,Ut(this,ms)))||null}createAndAddNewEditor(g,et,ot={}){const ut=this.getNextId(),ct=Xn(this,yw,aP).call(this,{parent:this,id:ut,x:g.offsetX,y:g.offsetY,uiManager:Ut(this,ms),isCentered:et,...ot});return ct&&this.add(ct),ct}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(g={}){this.createAndAddNewEditor(Xn(this,xw,oP).call(this),!0,g)}setSelected(g){Ut(this,ms).setSelected(g)}toggleSelected(g){Ut(this,ms).toggleSelected(g)}unselect(g){Ut(this,ms).unselect(g)}pointerup(g){var ut;const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div||!Ut(this,Iy)||(In(this,Iy,!1),(ut=Ut(this,Sp,em))!=null&&ut.isDrawer&&Ut(this,Sp,em).supportMultipleDrawings))return;if(!Ut(this,e_)){In(this,e_,!0);return}const ot=Ut(this,ms).getMode();if(ot===AnnotationEditorType.STAMP||ot===AnnotationEditorType.SIGNATURE){Ut(this,ms).unselectAll();return}this.createAndAddNewEditor(g,!1)}pointerdown(g){var ut;if(Ut(this,ms).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),Ut(this,Iy)){In(this,Iy,!1);return}const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;if(In(this,Iy,!0),(ut=Ut(this,Sp,em))!=null&&ut.isDrawer){this.startDrawingSession(g);return}const ot=Ut(this,ms).getActive();In(this,e_,!ot||ot.isEmpty())}startDrawingSession(g){if(this.div.focus({preventScroll:!0}),Ut(this,Up)){Ut(this,Sp,em).startDrawing(this,Ut(this,ms),!1,g);return}Ut(this,ms).setCurrentDrawingSession(this),In(this,Up,new AbortController);const et=Ut(this,ms).combinedSignal(Ut(this,Up));this.div.addEventListener("blur",({relatedTarget:ot})=>{ot&&!this.div.contains(ot)&&(In(this,S0,null),this.commitOrRemove())},{signal:et}),Ut(this,Sp,em).startDrawing(this,Ut(this,ms),!1,g)}pause(g){if(g){const{activeElement:et}=document;this.div.contains(et)&&In(this,S0,et);return}Ut(this,S0)&&setTimeout(()=>{var et;(et=Ut(this,S0))==null||et.focus(),In(this,S0,null)},0)}endDrawingSession(g=!1){return Ut(this,Up)?(Ut(this,ms).setCurrentDrawingSession(null),Ut(this,Up).abort(),In(this,Up,null),In(this,S0,null),Ut(this,Sp,em).endDrawing(g)):null}findNewParent(g,et,ot){const ut=Ut(this,ms).findParent(et,ot);return ut===null||ut===this?!1:(ut.changeParent(g),!0)}commitOrRemove(){return Ut(this,Up)?(this.endDrawingSession(),!0):!1}onScaleChanging(){Ut(this,Up)&&Ut(this,Sp,em).onScaleChangingWhenDrawing(this)}destroy(){var g,et;this.commitOrRemove(),((g=Ut(this,ms).getActive())==null?void 0:g.parent)===this&&(Ut(this,ms).commitOrRemove(),Ut(this,ms).setActiveEditor(null)),Ut(this,_0)&&(clearTimeout(Ut(this,_0)),In(this,_0,null));for(const ot of Ut(this,Nu).values())(et=Ut(this,Ov))==null||et.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,Ut(this,Nu).clear(),Ut(this,ms).removeLayer(this)}render({viewport:g}){this.viewport=g,setLayerDimensions(this.div,g);for(const et of Ut(this,ms).getEditors(this.pageIndex))this.add(et),et.rebuild();this.updateMode()}update({viewport:g}){Ut(this,ms).commitOrRemove(),Xn(this,i_,NC).call(this);const et=this.viewport.rotation,ot=g.rotation;if(this.viewport=g,setLayerDimensions(this.div,{rotation:ot}),et!==ot)for(const ut of Ut(this,Nu).values())ut.rotate(ot)}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}get scale(){return Ut(this,ms).viewParameters.realScale}};Ov=new WeakMap,e_=new WeakMap,Ny=new WeakMap,My=new WeakMap,_0=new WeakMap,Nu=new WeakMap,Iy=new WeakMap,t_=new WeakMap,n_=new WeakMap,Up=new WeakMap,S0=new WeakMap,Tl=new WeakMap,w0=new WeakMap,Oy=new WeakMap,r_=new WeakMap,ms=new WeakMap,Ly=new WeakMap,gw=new WeakSet,sP=function(){return Ut(this,Nu).size!==0?Ut(this,Nu).values():Ut(this,ms).getEditors(this.pageIndex)},vT=new WeakSet,f5=function(g){Ut(this,ms).unselectAll();const{target:et}=g;if(et===Ut(this,Tl).div||(et.getAttribute("role")==="img"||et.classList.contains("endOfContent"))&&Ut(this,Tl).div.contains(et)){const{isMac:ot}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&ot)return;Ut(this,ms).showAllEditors("highlight",!0,!0),Ut(this,Tl).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,Ut(this,ms).direction==="ltr",{target:Ut(this,Tl).div,x:g.x,y:g.y}),Ut(this,Tl).div.addEventListener("pointerup",()=>{Ut(this,Tl).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Ut(this,ms)._signal}),g.preventDefault()}},Sp=new WeakSet,em=function(){return Ut(Np,Ly).get(Ut(this,ms).getMode())},yw=new WeakSet,aP=function(g){const et=Ut(this,Sp,em);return et?new et.prototype.constructor(g):null},xw=new WeakSet,oP=function(){const{x:g,y:et,width:ot,height:ut}=this.boundingClientRect,ct=Math.max(0,g),dt=Math.max(0,et),ft=Math.min(window.innerWidth,g+ot),St=Math.min(window.innerHeight,et+ut),kt=(ct+ft)/2-g,Tt=(dt+St)/2-et,[Rt,jt]=this.viewport.rotation%180===0?[kt,Tt]:[Tt,kt];return{offsetX:Rt,offsetY:jt}},i_=new WeakSet,NC=function(){for(const g of Ut(this,Nu).values())g.isEmpty()&&g.remove()},Ur(Np,"_initialized",!1),Rn(Np,Ly,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(g=>[g._editorType,g])));let AnnotationEditorLayer=Np;var Gp,uu,Lv,bw,xT,p5,Ew,lP,bT,m5,_w,uP;const Yo=class Yo{constructor({pageIndex:g}){Rn(this,Ew);Rn(this,bT);Rn(this,_w);Rn(this,Gp,null);Rn(this,uu,new Map);Rn(this,Lv,new Map);this.pageIndex=g}setParent(g){if(!Ut(this,Gp)){In(this,Gp,g);return}if(Ut(this,Gp)!==g){if(Ut(this,uu).size>0)for(const et of Ut(this,uu).values())et.remove(),g.append(et);In(this,Gp,g)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(g,et=!1,ot=!1){const ut=Ko(Yo,bw)._++,ct=Xn(this,Ew,lP).call(this),dt=Yo._svgFactory.createElement("defs");ct.append(dt);const ft=Yo._svgFactory.createElement("path");dt.append(ft);const St=`path_p${this.pageIndex}_${ut}`;ft.setAttribute("id",St),ft.setAttribute("vector-effect","non-scaling-stroke"),et&&Ut(this,Lv).set(ut,ft);const kt=ot?Xn(this,bT,m5).call(this,dt,St):null,Tt=Yo._svgFactory.createElement("use");return ct.append(Tt),Tt.setAttribute("href",`#${St}`),this.updateProperties(ct,g),Ut(this,uu).set(ut,ct),{id:ut,clipPathId:`url(#${kt})`}}drawOutline(g,et){const ot=Ko(Yo,bw)._++,ut=Xn(this,Ew,lP).call(this),ct=Yo._svgFactory.createElement("defs");ut.append(ct);const dt=Yo._svgFactory.createElement("path");ct.append(dt);const ft=`path_p${this.pageIndex}_${ot}`;dt.setAttribute("id",ft),dt.setAttribute("vector-effect","non-scaling-stroke");let St;if(et){const Rt=Yo._svgFactory.createElement("mask");ct.append(Rt),St=`mask_p${this.pageIndex}_${ot}`,Rt.setAttribute("id",St),Rt.setAttribute("maskUnits","objectBoundingBox");const jt=Yo._svgFactory.createElement("rect");Rt.append(jt),jt.setAttribute("width","1"),jt.setAttribute("height","1"),jt.setAttribute("fill","white");const Ft=Yo._svgFactory.createElement("use");Rt.append(Ft),Ft.setAttribute("href",`#${ft}`),Ft.setAttribute("stroke","none"),Ft.setAttribute("fill","black"),Ft.setAttribute("fill-rule","nonzero"),Ft.classList.add("mask")}const kt=Yo._svgFactory.createElement("use");ut.append(kt),kt.setAttribute("href",`#${ft}`),St&&kt.setAttribute("mask",`url(#${St})`);const Tt=kt.cloneNode();return ut.append(Tt),kt.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),this.updateProperties(ut,g),Ut(this,uu).set(ot,ut),ot}finalizeDraw(g,et){Ut(this,Lv).delete(g),this.updateProperties(g,et)}updateProperties(g,et){var St;if(!et)return;const{root:ot,bbox:ut,rootClass:ct,path:dt}=et,ft=typeof g=="number"?Ut(this,uu).get(g):g;if(ft){if(ot&&Xn(this,_w,uP).call(this,ft,ot),ut&&Xn(St=Yo,xT,p5).call(St,ft,ut),ct){const{classList:kt}=ft;for(const[Tt,Rt]of Object.entries(ct))kt.toggle(Tt,Rt)}if(dt){const Tt=ft.firstChild.firstChild;Xn(this,_w,uP).call(this,Tt,dt)}}}updateParent(g,et){if(et===this)return;const ot=Ut(this,uu).get(g);ot&&(Ut(et,Gp).append(ot),Ut(this,uu).delete(g),Ut(et,uu).set(g,ot))}remove(g){Ut(this,Lv).delete(g),Ut(this,Gp)!==null&&(Ut(this,uu).get(g).remove(),Ut(this,uu).delete(g))}destroy(){In(this,Gp,null);for(const g of Ut(this,uu).values())g.remove();Ut(this,uu).clear(),Ut(this,Lv).clear()}};Gp=new WeakMap,uu=new WeakMap,Lv=new WeakMap,bw=new WeakMap,xT=new WeakSet,p5=function(g,[et,ot,ut,ct]){const{style:dt}=g;dt.top=`${100*ot}%`,dt.left=`${100*et}%`,dt.width=`${100*ut}%`,dt.height=`${100*ct}%`},Ew=new WeakSet,lP=function(){const g=Yo._svgFactory.create(1,1,!0);return Ut(this,Gp).append(g),g.setAttribute("aria-hidden",!0),g},bT=new WeakSet,m5=function(g,et){const ot=Yo._svgFactory.createElement("clipPath");g.append(ot);const ut=`clip_${et}`;ot.setAttribute("id",ut),ot.setAttribute("clipPathUnits","objectBoundingBox");const ct=Yo._svgFactory.createElement("use");return ot.append(ct),ct.setAttribute("href",`#${et}`),ct.classList.add("clip"),ut},_w=new WeakSet,uP=function(g,et){for(const[ot,ut]of Object.entries(et))ut===null?g.removeAttribute(ot):g.setAttribute(ot,ut)},Rn(Yo,xT),Rn(Yo,bw,0);let DrawLayer=Yo;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util:Util$1,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util:Util$1,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(it,g,et){for(et of it.keys())if(dequal(et,g))return et}function dequal(it,g){var et,ot,ut;if(it===g)return!0;if(it&&g&&(et=it.constructor)===g.constructor){if(et===Date)return it.getTime()===g.getTime();if(et===RegExp)return it.toString()===g.toString();if(et===Array){if((ot=it.length)===g.length)for(;ot--&&dequal(it[ot],g[ot]););return ot===-1}if(et===Set){if(it.size!==g.size)return!1;for(ot of it)if(ut=ot,ut&&typeof ut=="object"&&(ut=find(g,ut),!ut)||!g.has(ut))return!1;return!0}if(et===Map){if(it.size!==g.size)return!1;for(ot of it)if(ut=ot[0],ut&&typeof ut=="object"&&(ut=find(g,ut),!ut)||!dequal(ot[1],g.get(ut)))return!1;return!0}if(et===ArrayBuffer)it=new Uint8Array(it),g=new Uint8Array(g);else if(et===DataView){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it.getInt8(ot)===g.getInt8(ot););return ot===-1}if(ArrayBuffer.isView(it)){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it[ot]===g[ot];);return ot===-1}if(!et||typeof it=="object"){ot=0;for(et in it)if(has.call(it,et)&&++ot&&!has.call(g,et)||!(et in g)||!dequal(it[et],g[et]))return!1;return Object.keys(g).length===ot}}return it!==it&&g!==g}function makeCancellablePromise(it){let g=!1;return{promise:new Promise((ot,ut)=>{it.then(ct=>!g&&ot(ct)).catch(ct=>!g&&ut(ct))}),cancel(){g=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(it,g){const et={};for(const ot of allEvents){const ut=it[ot];ut&&(g?et[ot]=ct=>ut(ct,g(ot)):et[ot]=ut)}return et}var isProduction=!0,prefix="Invariant failed";function invariant(it,g){if(!it){if(isProduction)throw new Error(prefix);var et=typeof g=="function"?g():g,ot=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(ot)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(g){this.pdfDocument=g}setViewer(g){this.pdfViewer=g}setExternalLinkRel(g){this.externalLinkRel=g}setExternalLinkTarget(g){this.externalLinkTarget=g}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(g){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=g}get rotation(){return 0}set rotation(g){}addLinkAttributes(g,et,ot){g.href=et,g.rel=this.externalLinkRel||DEFAULT_LINK_REL,g.target=ot?"_blank":this.externalLinkTarget||""}goToDestination(g){return new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(g,"Destination is not specified."),typeof g=="string"?this.pdfDocument.getDestination(g).then(et):Array.isArray(g)?et(g):g.then(et)}).then(et=>{invariant(Array.isArray(et),`"${et}" is not a valid destination array.`);const ot=et[0];new Promise(ut=>{invariant(this.pdfDocument,"PDF document not loaded."),ot instanceof Object?this.pdfDocument.getPageIndex(ot).then(ct=>{ut(ct)}).catch(()=>{invariant(!1,`"${ot}" is not a valid page reference.`)}):typeof ot=="number"?ut(ot):invariant(!1,`"${ot}" is not a valid destination reference.`)}).then(ut=>{const ct=ut+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(ct>=1&&ct<=this.pagesCount,`"${ct}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:et,pageIndex:ut,pageNumber:ct})})})}goToPage(g){const et=g-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:et,pageNumber:g})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(g){this.goToDestination(g)}}function Message({children:it,type:g}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${g}`,children:it})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer(it,g){switch(g.type){case"RESOLVE":return{value:g.value,error:void 0};case"REJECT":return{value:!1,error:g.error};case"RESET":return{value:void 0,error:void 0};default:return it}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(it){return typeof it<"u"}function isProvided(it){return isDefined(it)&&it!==null}function isString(it){return typeof it=="string"}function isArrayBuffer(it){return it instanceof ArrayBuffer}function isBlob(it){return invariant(isBrowser,"isBlob can only be used in a browser environment"),it instanceof Blob}function isDataURI(it){return isString(it)&&/^data:/.test(it)}function dataURItoByteString(it){invariant(isDataURI(it),"Invalid data URI.");const[g="",et=""]=it.split(",");return g.split(";").indexOf("base64")!==-1?atob(et):unescape(et)}function getDevicePixelRatio$1(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(it){it!=null&&it.cancel&&it.cancel()}function makePageCallback(it,g){return Object.defineProperty(it,"width",{get(){return this.view[2]*g},configurable:!0}),Object.defineProperty(it,"height",{get(){return this.view[3]*g},configurable:!0}),Object.defineProperty(it,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(it,"originalHeight",{get(){return this.view[3]},configurable:!0}),it}function isCancelException(it){return it.name==="RenderingCancelledException"}function loadFromFile(it){return new Promise((g,et)=>{const ot=new FileReader;ot.onload=()=>{if(!ot.result)return et(new Error("Error while reading a file."));g(ot.result)},ot.onerror=ut=>{if(!ut.target)return et(new Error("Error while reading a file."));const{error:ct}=ut.target;if(!ct)return et(new Error("Error while reading a file."));switch(ct.code){case ct.NOT_FOUND_ERR:return et(new Error("Error while reading a file: File not found."));case ct.SECURITY_ERR:return et(new Error("Error while reading a file: Security error."));case ct.ABORT_ERR:return et(new Error("Error while reading a file: Aborted."));default:return et(new Error("Error while reading a file."))}},ot.readAsArrayBuffer(it)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(it,g)=>{switch(g){case PasswordResponses$1.NEED_PASSWORD:{const et=prompt("Enter the password to open this PDF file.");it(et);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const et=prompt("Invalid password. Please try again.");it(et);break}}};function isParameterObject(it){return typeof it=="object"&&it!==null&&("data"in it||"range"in it||"url"in it)}const Document=reactExports.forwardRef(function it({children:g,className:et,error:ot="Failed to load PDF file.",externalLinkRel:ut,externalLinkTarget:ct,file:dt,inputRef:ft,imageResourcesPath:St,loading:kt="Loading PDF",noData:Tt="No PDF file specified.",onItemClick:Rt,onLoadError:jt,onLoadProgress:Ft,onLoadSuccess:Bt,onPassword:Ht=defaultOnPassword,onSourceError:Yt,onSourceSuccess:zt,options:Kt,renderMode:en,rotate:tn,scale:on,...an},un){const[dn,Sn]=useResolver(),{value:mn,error:bn}=dn,[En,kn]=useResolver(),{value:Pn,error:Ln}=En,gn=reactExports.useRef(new LinkService),Mn=reactExports.useRef([]),yn=reactExports.useRef(void 0),vn=reactExports.useRef(void 0);dt&&dt!==yn.current&&isParameterObject(dt)&&(warning$1(!dequal(dt,yn.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),yn.current=dt),Kt&&Kt!==vn.current&&(warning$1(!dequal(Kt,vn.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),vn.current=Kt);const On=reactExports.useRef({scrollPageIntoView:Br=>{const{dest:Fr,pageNumber:cs,pageIndex:Cs=cs-1}=Br;if(Rt){Rt({dest:Fr,pageIndex:Cs,pageNumber:cs});return}const Ts=Mn.current[Cs];if(Ts){Ts.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${cs} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(un,()=>({linkService:gn,pages:Mn,viewer:On}),[]);function Cn(){zt&&zt()}function Vn(){bn&&(warning$1(!1,bn.toString()),Yt&&Yt(bn))}function Qn(){Sn({type:"RESET"})}reactExports.useEffect(Qn,[dt,Sn]);const ir=reactExports.useCallback(async()=>{if(!dt)return null;if(typeof dt=="string")return isDataURI(dt)?{data:dataURItoByteString(dt)}:(displayCORSWarning(),{url:dt});if(dt instanceof PDFDataRangeTransport)return{range:dt};if(isArrayBuffer(dt))return{data:dt};if(isBrowser&&isBlob(dt))return{data:await loadFromFile(dt)};if(invariant(typeof dt=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(dt),"Invalid parameter object: need either .data, .range or .url"),"url"in dt&&typeof dt.url=="string"){if(isDataURI(dt.url)){const{url:Br,...Fr}=dt;return{data:dataURItoByteString(Br),...Fr}}displayCORSWarning()}return dt},[dt]);reactExports.useEffect(()=>{const Br=makeCancellablePromise(ir());return Br.promise.then(Fr=>{Sn({type:"RESOLVE",value:Fr})}).catch(Fr=>{Sn({type:"REJECT",error:Fr})}),()=>{cancelRunningTask(Br)}},[ir,Sn]),reactExports.useEffect(()=>{if(!(typeof mn>"u")){if(mn===!1){Vn();return}Cn()}},[mn]);function ar(){Pn&&(Bt&&Bt(Pn),Mn.current=new Array(Pn.numPages),gn.current.setDocument(Pn))}function rr(){Ln&&(warning$1(!1,Ln.toString()),jt&&jt(Ln))}reactExports.useEffect(function(){kn({type:"RESET"})},[kn,mn]),reactExports.useEffect(function(){if(!mn)return;const Fr=Kt?{...mn,...Kt}:mn,cs=getDocument(Fr);Ft&&(cs.onProgress=Ft),Ht&&(cs.onPassword=Ht);const Cs=cs,Ts=Cs.promise.then(Rr=>{kn({type:"RESOLVE",value:Rr})}).catch(Rr=>{Cs.destroyed||kn({type:"REJECT",error:Rr})});return()=>{Ts.finally(()=>Cs.destroy())}},[Kt,kn,mn]),reactExports.useEffect(()=>{if(!(typeof Pn>"u")){if(Pn===!1){rr();return}ar()}},[Pn]),reactExports.useEffect(function(){gn.current.setViewer(On.current),gn.current.setExternalLinkRel(ut),gn.current.setExternalLinkTarget(ct)},[ut,ct]);const hr=reactExports.useCallback((Br,Fr)=>{Mn.current[Br]=Fr},[]),_r=reactExports.useCallback(Br=>{delete Mn.current[Br]},[]),xr=reactExports.useMemo(()=>({imageResourcesPath:St,linkService:gn.current,onItemClick:Rt,pdf:Pn,registerPage:hr,renderMode:en,rotate:tn,scale:on,unregisterPage:_r}),[St,Rt,Pn,hr,en,tn,on,_r]),wr=reactExports.useMemo(()=>makeEventProps(an,()=>Pn),[an,Pn]);function Ir(){function Br(cs){return!!(cs!=null&&cs.pdf)}if(!Br(xr))throw new Error("pdf is undefined");const Fr=typeof g=="function"?g(xr):g;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:xr,children:Fr})}function _i(){return dt?Pn==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof kt=="function"?kt():kt}):Pn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof ot=="function"?ot():ot}):Ir():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Tt=="function"?Tt():Tt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",et),ref:ft,...wr,children:_i()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];var et=it.filter(Boolean);if(et.length<=1){var ot=et[0];return ot||null}return function(ct){for(var dt=0,ft=et;dt<ft.length;dt++){var St=ft[dt];typeof St=="function"?St(ct):St&&(St.current=ct)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const it=useDocumentContext(),g=usePageContext();invariant(g,"Unable to find Page context.");const et={...it,...g},{imageResourcesPath:ot,linkService:ut,onGetAnnotationsError:ct,onGetAnnotationsSuccess:dt,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:St,page:kt,pdf:Tt,renderForms:Rt,rotate:jt,scale:Ft=1}=et;invariant(Tt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(kt,"Attempted to load page annotations, but no page was specified."),invariant(ut,"Attempted to load page annotations, but no linkService was specified.");const[Bt,Ht]=useResolver(),{value:Yt,error:zt}=Bt,Kt=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function en(){Yt&&dt&&dt(Yt)}function tn(){zt&&(warning$1(!1,zt.toString()),ct&&ct(zt))}reactExports.useEffect(function(){Ht({type:"RESET"})},[Ht,kt]),reactExports.useEffect(function(){if(!kt)return;const Sn=makeCancellablePromise(kt.getAnnotations()),mn=Sn;return Sn.promise.then(bn=>{Ht({type:"RESOLVE",value:bn})}).catch(bn=>{Ht({type:"REJECT",error:bn})}),()=>{cancelRunningTask(mn)}},[Ht,kt]),reactExports.useEffect(()=>{if(Yt!==void 0){if(Yt===!1){tn();return}en()}},[Yt]);function on(){St&&St()}function an(dn){warning$1(!1,`${dn}`),ft&&ft(dn)}const un=reactExports.useMemo(()=>kt.getViewport({scale:Ft,rotation:jt}),[kt,jt,Ft]);return reactExports.useEffect(function(){if(!Tt||!kt||!ut||!Yt)return;const{current:Sn}=Kt;if(!Sn)return;const mn=un.clone({dontFlip:!0}),bn={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Tt.annotationStorage,commentManager:null,div:Sn,l10n:null,linkService:ut,page:kt,structTreeLayer:null,viewport:mn},En={annotations:Yt,annotationStorage:Tt.annotationStorage,div:Sn,imageResourcesPath:ot,linkService:ut,page:kt,renderForms:Rt,viewport:mn};Sn.innerHTML="";try{new AnnotationLayer$1(bn).render(En),on()}catch(kn){an(kn)}return()=>{}},[Yt,ot,ut,kt,Tt,Rt,un]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Kt})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(it){return it in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(it){return"children"in it}function isStructTreeNodeWithOnlyContentChild(it){return isStructTreeNode(it)?it.children.length===1&&0 in it.children&&"id"in it.children[0]:!1}function getRoleAttributes(it){const g={};if(isStructTreeNode(it)){const{role:et}=it,ot=et.match(HEADING_PATTERN);if(ot)g.role="heading",g["aria-level"]=Number(ot[1]);else if(isPdfRole(et)){const ut=PDF_ROLE_TO_HTML_ROLE[et];ut&&(g.role=ut)}}return g}function getBaseAttributes(it){const g={};if(isStructTreeNode(it)){if(it.alt!==void 0&&(g["aria-label"]=it.alt),it.lang!==void 0&&(g.lang=it.lang),isStructTreeNodeWithOnlyContentChild(it)){const[et]=it.children;if(et){const ot=getBaseAttributes(et);return{...g,...ot}}}}else"id"in it&&(g["aria-owns"]=it.id);return g}function getAttributes(it){return it?{...getRoleAttributes(it),...getBaseAttributes(it)}:null}function StructTreeItem({className:it,node:g}){const et=reactExports.useMemo(()=>getAttributes(g),[g]),ot=reactExports.useMemo(()=>!isStructTreeNode(g)||isStructTreeNodeWithOnlyContentChild(g)?null:g.children.map((ut,ct)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ut},ct)),[g]);return jsxRuntimeExports.jsx("span",{className:it,...et,children:ot})}function StructTree(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{onGetStructTreeError:g,onGetStructTreeSuccess:et}=it,[ot,ut]=useResolver(),{value:ct,error:dt}=ot,{customTextRenderer:ft,page:St}=it;function kt(){ct&&et&&et(ct)}function Tt(){dt&&(warning$1(!1,dt.toString()),g&&g(dt))}return reactExports.useEffect(function(){ut({type:"RESET"})},[ut,St]),reactExports.useEffect(function(){if(ft||!St)return;const jt=makeCancellablePromise(St.getStructTree()),Ft=jt;return jt.promise.then(Bt=>{ut({type:"RESOLVE",value:Bt})}).catch(Bt=>{ut({type:"REJECT",error:Bt})}),()=>cancelRunningTask(Ft)},[ft,St,ut]),reactExports.useEffect(()=>{if(ct!==void 0){if(ct===!1){Tt();return}kt()}},[ct]),ct?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ct}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas$1(it){const g=usePageContext();invariant(g,"Unable to find Page context.");const et={...g,...it},{_className:ot,canvasBackground:ut,devicePixelRatio:ct=getDevicePixelRatio$1(),onRenderError:dt,onRenderSuccess:ft,page:St,renderForms:kt,renderTextLayer:Tt,rotate:Rt,scale:jt}=et,{canvasRef:Ft}=it;invariant(St,"Attempted to render page canvas, but no page was specified.");const Bt=reactExports.useRef(null);function Ht(){St&&ft&&ft(makePageCallback(St,jt))}function Yt(tn){isCancelException(tn)||(warning$1(!1,tn.toString()),dt&&dt(tn))}const zt=reactExports.useMemo(()=>St.getViewport({scale:jt*ct,rotation:Rt}),[ct,St,Rt,jt]),Kt=reactExports.useMemo(()=>St.getViewport({scale:jt,rotation:Rt}),[St,Rt,jt]);reactExports.useEffect(function(){if(!St)return;St.cleanup();const{current:on}=Bt;if(!on)return;on.width=zt.width,on.height=zt.height,on.style.width=`${Math.floor(Kt.width)}px`,on.style.height=`${Math.floor(Kt.height)}px`,on.style.visibility="hidden";const an={annotationMode:kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:on,canvasContext:on.getContext("2d",{alpha:!1}),viewport:zt};ut&&(an.background=ut);const un=St.render(an),dn=un;return un.promise.then(()=>{on.style.visibility="",Ht()}).catch(Yt),()=>cancelRunningTask(dn)},[ut,St,kt,zt,Kt]);const en=reactExports.useCallback(()=>{const{current:tn}=Bt;tn&&(tn.width=0,tn.height=0)},[]);return reactExports.useEffect(()=>en,[en]),jsxRuntimeExports.jsx("canvas",{className:`${ot}__canvas`,dir:"ltr",ref:mergeRefs(Ft,Bt),style:{display:"block",userSelect:"none"},children:Tt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(it){return"str"in it}function TextLayer(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{customTextRenderer:g,onGetTextError:et,onGetTextSuccess:ot,onRenderTextLayerError:ut,onRenderTextLayerSuccess:ct,page:dt,pageIndex:ft,pageNumber:St,rotate:kt,scale:Tt}=it;invariant(dt,"Attempted to load page text content, but no page was specified.");const[Rt,jt]=useResolver(),{value:Ft,error:Bt}=Rt,Ht=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Yt(){Ft&&ot&&ot(Ft)}function zt(){Bt&&(warning$1(!1,Bt.toString()),et&&et(Bt))}reactExports.useEffect(function(){jt({type:"RESET"})},[dt,jt]),reactExports.useEffect(function(){if(!dt)return;const dn=makeCancellablePromise(dt.getTextContent()),Sn=dn;return dn.promise.then(mn=>{jt({type:"RESOLVE",value:mn})}).catch(mn=>{jt({type:"REJECT",error:mn})}),()=>cancelRunningTask(Sn)},[dt,jt]),reactExports.useEffect(()=>{if(Ft!==void 0){if(Ft===!1){zt();return}Yt()}},[Ft]);const Kt=reactExports.useCallback(()=>{ct&&ct()},[ct]),en=reactExports.useCallback(un=>{warning$1(!1,un.toString()),ut&&ut(un)},[ut]);function tn(){const un=Ht.current;un&&un.classList.add("selecting")}function on(){const un=Ht.current;un&&un.classList.remove("selecting")}const an=reactExports.useMemo(()=>dt.getViewport({scale:Tt,rotation:kt}),[dt,kt,Tt]);return reactExports.useLayoutEffect(function(){if(!dt||!Ft)return;const{current:dn}=Ht;if(!dn)return;dn.innerHTML="";const Sn=dt.streamTextContent({includeMarkedContent:!0}),mn={container:dn,textContentSource:Sn,viewport:an},bn=new TextLayer$1(mn),En=bn;return bn.render().then(()=>{const kn=document.createElement("div");kn.className="endOfContent",dn.append(kn);const Pn=dn.querySelectorAll('[role="presentation"]');if(g){let Ln=0;Ft.items.forEach((gn,Mn)=>{if(!isTextItem(gn))return;const yn=Pn[Ln];if(!yn)return;const vn=g({pageIndex:ft,pageNumber:St,itemIndex:Mn,...gn});yn.innerHTML=vn,Ln+=gn.str&&gn.hasEOL?2:1})}Kt()}).catch(en),()=>cancelRunningTask(En)},[g,en,Kt,dt,ft,St,Ft,an]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:on,onMouseDown:tn,ref:Ht})}const defaultScale=1;function Page(it){const et={...useDocumentContext(),...it},{_className:ot="react-pdf__Page",_enableRegisterUnregisterPage:ut=!0,canvasBackground:ct,canvasRef:dt,children:ft,className:St,customRenderer:kt,customTextRenderer:Tt,devicePixelRatio:Rt,error:jt="Failed to load the page.",height:Ft,inputRef:Bt,loading:Ht="Loading page",noData:Yt="No page specified.",onGetAnnotationsError:zt,onGetAnnotationsSuccess:Kt,onGetStructTreeError:en,onGetStructTreeSuccess:tn,onGetTextError:on,onGetTextSuccess:an,onLoadError:un,onLoadSuccess:dn,onRenderAnnotationLayerError:Sn,onRenderAnnotationLayerSuccess:mn,onRenderError:bn,onRenderSuccess:En,onRenderTextLayerError:kn,onRenderTextLayerSuccess:Pn,pageIndex:Ln,pageNumber:gn,pdf:Mn,registerPage:yn,renderAnnotationLayer:vn=!0,renderForms:On=!1,renderMode:Cn="canvas",renderTextLayer:Vn=!0,rotate:Qn,scale:ir=defaultScale,unregisterPage:ar,width:rr,...hr}=et,[_r,xr]=useResolver(),{value:wr,error:Ir}=_r,_i=reactExports.useRef(null);invariant(Mn,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Br=isProvided(gn)?gn-1:Ln??null,Fr=gn??(isProvided(Ln)?Ln+1:null),cs=Qn??(wr?wr.rotate:null),Cs=reactExports.useMemo(()=>{if(!wr)return null;let Jt=1;const sn=ir??defaultScale;if(rr||Ft){const ln=wr.getViewport({scale:1,rotation:cs});rr?Jt=rr/ln.width:Ft&&(Jt=Ft/ln.height)}return sn*Jt},[Ft,wr,cs,ir,rr]);reactExports.useEffect(function(){return()=>{isProvided(Br)&&ut&&ar&&ar(Br)}},[ut,Mn,Br,ar]);function Ts(){if(dn){if(!wr||!Cs)return;dn(makePageCallback(wr,Cs))}if(ut&&yn){if(!isProvided(Br)||!_i.current)return;yn(Br,_i.current)}}function Rr(){Ir&&(warning$1(!1,Ir.toString()),un&&un(Ir))}reactExports.useEffect(function(){xr({type:"RESET"})},[xr,Mn,Br]),reactExports.useEffect(function(){if(!Mn||!Fr)return;const sn=makeCancellablePromise(Mn.getPage(Fr)),ln=sn;return sn.promise.then(cn=>{xr({type:"RESOLVE",value:cn})}).catch(cn=>{xr({type:"REJECT",error:cn})}),()=>cancelRunningTask(ln)},[xr,Mn,Fr]),reactExports.useEffect(()=>{if(wr!==void 0){if(wr===!1){Rr();return}Ts()}},[wr,Cs]);const Lr=reactExports.useMemo(()=>isProvided(Br)&&Fr&&isProvided(cs)&&isProvided(Cs)?{_className:ot,canvasBackground:ct,customTextRenderer:Tt,devicePixelRatio:Rt,onGetAnnotationsError:zt,onGetAnnotationsSuccess:Kt,onGetStructTreeError:en,onGetStructTreeSuccess:tn,onGetTextError:on,onGetTextSuccess:an,onRenderAnnotationLayerError:Sn,onRenderAnnotationLayerSuccess:mn,onRenderError:bn,onRenderSuccess:En,onRenderTextLayerError:kn,onRenderTextLayerSuccess:Pn,page:wr,pageIndex:Br,pageNumber:Fr,renderForms:On,renderTextLayer:Vn,rotate:cs,scale:Cs}:null,[ot,ct,Tt,Rt,zt,Kt,en,tn,on,an,Sn,mn,bn,En,kn,Pn,wr,Br,Fr,On,Vn,cs,Cs]),Gr=reactExports.useMemo(()=>makeEventProps(hr,()=>wr&&(Cs?makePageCallback(wr,Cs):void 0)),[hr,wr,Cs]),zr=`${Br}@${Cs}/${cs}`;function Vr(){switch(Cn){case"custom":return invariant(kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(kt,{},`${zr}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas$1,{canvasRef:dt},`${zr}_canvas`)}}function rs(){return Vn?jsxRuntimeExports.jsx(TextLayer,{},`${zr}_text`):null}function fs(){return vn?jsxRuntimeExports.jsx(AnnotationLayer,{},`${zr}_annotations`):null}function Kr(){function Jt(ln){return!!(ln!=null&&ln.page)}if(!Jt(Lr))throw new Error("page is undefined");const sn=typeof ft=="function"?ft(Lr):ft;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:Lr,children:[Vr(),rs(),fs(),sn]})}function $t(){return Fr?Mn===null||wr===void 0||wr===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof Ht=="function"?Ht():Ht}):Mn===!1||wr===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof jt=="function"?jt():jt}):Kr():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Yt=="function"?Yt():Yt})}return jsxRuntimeExports.jsx("div",{className:clsx(ot,St),"data-page-number":Fr,ref:mergeRefs(Bt,_i),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Cs}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ct||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Gr,children:$t()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:it,fileTitle:g,partNumber:et,sourceType:ot="magnet",onClose:ut}){const[ct,dt]=reactExports.useState(null),[ft,St]=reactExports.useState(1.2),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[Ft,Bt]=reactExports.useState(null),Ht=reactExports.useMemo(()=>it?{url:`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(it)}`}:null,[it]);if(!it)return null;reactExports.useEffect(()=>{if(!it)return;let zt,Kt=0;const en=async()=>{try{const tn=await fetch(Ht.url,{method:"HEAD"}),on=tn.headers.get("content-type");tn.ok&&(on!=null&&on.includes("pdf"))?Tt(!0):Kt<10?(Kt++,zt=setTimeout(en,1500)):Bt("PDF is still being finalized. Try again in a few seconds.")}catch{Kt<10?(Kt++,zt=setTimeout(en,1500)):Bt("PDF is still being finalized. Try again shortly.")}};return en(),()=>clearTimeout(zt)},[it]);const Yt=async()=>{try{jt(!0);const zt=await fetch(Ht.url);if(!zt.ok)throw new Error(`Failed: ${zt.status} ${zt.statusText}`);const Kt=await zt.blob(),en=URL.createObjectURL(Kt),tn=document.createElement("a");if(tn.href=en,ot==="book"){const on=(g||"Book").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),an=et?`_Part_${et}`:"";tn.download=`${on}${an}.pdf`}else if(ot==="magnet"){const on=(g||"Lead_Magnet").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_");tn.download=`${on}.pdf`}else tn.download="document.pdf";document.body.appendChild(tn),tn.click(),document.body.removeChild(tn),URL.revokeObjectURL(en),await new Promise(on=>setTimeout(on,2e3))}catch(zt){console.error("Download error:",zt),alert(" Download failed. Please try again.")}finally{jt(!1)}};return reactExports.useEffect(()=>{if(!it){Tt(!1),Bt(null),jt(!1),dt(null),St(1.2);return}Tt(!1),Bt(null),jt(!1),dt(null),St(1.2)},[it,ut]),reactExports.useEffect(()=>{const zt=()=>St(window.innerWidth<640?.8:1.2);return window.addEventListener("resize",zt),zt(),()=>window.removeEventListener("resize",zt)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(ft+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>St(Math.max(ft-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Yt,disabled:Rt,className:`p-2 rounded-lg transition text-white ${Rt?"bg-green-800 cursor-wait":"bg-green-600 hover:bg-green-600/90"}`,title:"Download",children:Rt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:ut,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$2,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!kt&&!Ft&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),Ft&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:Ft})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${kt?"opacity-100":"opacity-0"}`,children:kt&&!Ft&&jsxRuntimeExports.jsx(Document$1,{file:Ht,onLoadSuccess:({numPages:zt})=>dt(zt),onLoadError:zt=>{console.error("PDF load error:",zt),Bt("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(ct||0),(zt,Kt)=>jsxRuntimeExports.jsx(Page,{pageNumber:Kt+1,scale:ft,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:Math.min(window.innerWidth-40,900)},`page_${Kt+1}`))})})})]})]})}function NewContentModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ut,ct]=reactExports.useState(!1);async function dt(){if(!et){y$4.error("Please select a document type.",{position:"top-right",autoClose:2500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"});return}ct(!0),it({contentType:et})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Select Document Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:[{label:"Lead Magnet",value:"lead_magnet",description:"Generate a persuasive, marketing-focused guide designed to attract and convert readers."},{label:"Learning Document",value:"learning_doc",description:"Create a detailed, step-by-step educational document that teaches practical real-world skills."}].map(ft=>jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg border p-3 transition ${et===ft.value?"border-green bg-green/10":"border-gray-700 hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"contentType",value:ft.value,checked:et===ft.value,onChange:St=>ot(St.target.value),className:"accent-green mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-base",children:ft.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ft.description})]})]},ft.value))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:ut,className:"bg-muteGrey px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:ut?"Loading...":"Continue"})]})]})})}function MagnetCardList({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!kt.length)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[kt.map(jt=>{var Ft,Bt;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"aspect-[4/3] rounded-lg overflow-hidden border border-gray-700 mb-3",children:jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Cover",className:"object-cover w-full h-full"}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-500 italic",children:"No Preview"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate max-w-[70%]",children:jt.title||"Digital Asset"}),jt.theme?jsxRuntimeExports.jsx("span",{className:"px-2 py-[2px] rounded-full text-[10px]",style:{background:((Ft=themeStyles[jt.theme])==null?void 0:Ft.background)||"#333",color:((Bt=themeStyles[jt.theme])==null?void 0:Bt.color)||"#fff"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-[10px]",children:"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:jt.status==="completed"?"Completed":jt.status==="pending"?"Building...":jt.status==="failed"?"Failed":"Idle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function PaginationControls({currentPage:it,totalPages:g,onPageChange:et}){return g<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:it===1,onClick:()=>et(it-1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:["Page ",it," of ",g]}),jsxRuntimeExports.jsx("button",{disabled:it===g,onClick:()=>et(it+1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Next"})]})}function SupportTab(){const[it,g]=reactExports.useState(!1),et=[{q:"How do I generate a lead magnet?",a:"Fill out your prompt, upload a logo, add your link, select a theme, and click Generate. Your PDF will be automatically created and ready to download."},{q:"How long does it take?",a:"Most PDFs take between 515 seconds to generate, depending on the number of pages and theme you select."},{q:"Where can I find my generated PDFs?",a:"All completed lead magnets are available in your dashboard under My Lead Magnets. You can view, download, or regenerate them anytime."},{q:"Can I generate more than one lead magnet?",a:"Yes! You can create as many as you want. Simply open the Lead Magnet Creator and repeat the process with a new prompt or design."},{q:"Can I use my own branding?",a:"Absolutely. You can upload your own logo and link to your website or product page. Themes adjust automatically to fit your brand look."},{q:"What are Pro Covers?",a:"Pro Covers is an exclusive upgrade that lets you upload custom cover images for your lead magnets. Your uploaded cover appears as the first page of your PDF, giving your content a professional, branded presentation. In addition to uploading your own designs, Pro Covers also includes access to thousands of royalty-free Unsplash images you can instantly use as backgrounds or full covers. This gives you unlimited creative flexibility without any licensing worriesavailable only with the Pro Covers plan."},{q:"Can I edit or regenerate an existing PDF?",a:"No. Each slot is designed for a single finalized PDF to ensure fair usage and prevent system abuse. Allowing unlimited regenerations could cause performance issues and disrupt other users workflows. If youd like to create a new version, please start a new lead magnet using a fresh slot."},{q:"Do you offer refunds?",a:"Since Cre8tly Studio is a digital service that instantly generates custom content, we do not offer refunds after delivery. However, if you experience a technical issue or duplicate charge, please reach out, well make it right."},{q:"Can I upgrade my plan or buy more credits?",a:"Yes. Additional credits and premium plans are available directly from your account dashboard."},{q:"What if I reach my limit?",a:"If youve hit your plan limit, youll see a message prompting you to upgrade or purchase more credits. Youll never lose access to past PDFs."},{q:"How do I contact support?",a:"You can reach out anytime on our Contact Us page Our team typically responds within 24-48 hours, MondayFriday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),it&&jsxRuntimeExports.jsx("div",{onClick:()=>g(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:ot=>ot.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:et.map((ot,ut)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ot.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:ot.a})]},ut))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/contact",className:"text-green font-medium hover:underline",children:"Need more help? Contact Support "})})]})})]})}function GenerationOverlay({visible:it,progress:g,type:et="lead"}){return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm z-[9999] text-center p-6",children:[jsxRuntimeExports.jsx(motion.h2,{animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white text-xl sm:text-2xl font-semibold mb-4",children:et==="book"?" Generating your book...":" Creating your digital asset..."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-3/4 max-w-md mt-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full h-[3px] bg-gray-800/60 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full 
                bg-gradient-to-r from-white to-[#00E07A]
                transition-all duration-200 ease-linear animate-progressGlowGreen`,style:{width:`${g}%`,boxShadow:`
                    0 0 8px rgba(0,224,122,0.8),
                    0 0 16px rgba(0,224,122,0.7),
                    0 0 28px rgba(0,224,122,0.6),
                    0 0 45px rgba(0,224,122,0.5)
                  `}})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g>=100&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,.9,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute inset-0 bg-white/30"},"complete-flash")}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.4,duration:.6}},className:"text-gray-400 text-sm mt-4 italic",children:et==="book"?"This may take a few minutes  crafting a great story takes time ":"This might take a moment  crafting something powerful "})]},"overlay")})}function DashboardLayout({children:it}){const g=useNavigate(),et=useLocation(),{user:ot,logout:ut}=useAuth(),[ct,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(0);reactExports.useEffect(()=>{const Tt=()=>{dt(window.innerWidth>=1024)};return Tt(),window.addEventListener("resize",Tt),()=>window.removeEventListener("resize",Tt)},[]),reactExports.useEffect(()=>{if(!(ot!=null&&ot.id))return;const Tt=async()=>{try{const jt=await axiosInstance.get("/admin/messages/count");St(jt.data.count||0)}catch(jt){console.error("Failed to fetch unread count:",jt)}};Tt();const Rt=setInterval(Tt,3e4);return()=>clearInterval(Rt)},[ot==null?void 0:ot.id]);const kt=[{label:"Digital Products",path:"/dashboard",icon:jsxRuntimeExports.jsx(Package,{size:22})},{label:"Assistant",path:"/books",icon:jsxRuntimeExports.jsx(BookOpen,{size:22})},{label:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings,{size:22})},{label:"Prompt Memory",path:"/prompts",icon:jsxRuntimeExports.jsx(SquareTerminal,{size:22})},{label:"Inbox",path:"/notifications",icon:jsxRuntimeExports.jsx(Inbox$1,{size:22})},{label:"Plans",path:"/plans",icon:jsxRuntimeExports.jsx(DollarSign,{size:22})}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-[#030712] text-white relative",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("aside",{className:`fixed top-0 left-0 w-[120px] h-full bg-gray-900/95 border-r border-gray-800 
       flex flex-col justify-between transform transition-transform duration-300 z-[60]
       ${ct?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between h-full p-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 mb-4",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly",className:"w-16 h-16 mb-2"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-white text-center tracking-wide",children:"Cre8tly Studio"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"lg:hidden text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})})]}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col items-center gap-5 mt-8",children:kt.map(Tt=>{const Rt=et.pathname===Tt.path,jt=(ot==null?void 0:ot.brand_identity_file)&&Tt.path==="/settings";return jsxRuntimeExports.jsx("button",{onClick:()=>{g(Tt.path),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
            ${Rt?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[Tt.icon,Tt.path==="/notifications"&&ft>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-[18px] h-[18px] text-[10px] bg-red-600 text-white font-bold rounded-full shadow-md",children:ft>9?"9+":ft}),jt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full opacity-75 animate-ping"}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full shadow-[0_0_6px_2px_rgba(34,197,94,0.8)]"})]})]})},Tt.path)})})]}),jsxRuntimeExports.jsx("button",{onClick:ut,className:`relative flex items-center justify-center w-12 h-12 mx-auto mb-6 rounded-xl 
             bg-red-600/20 border border-red-600/40 text-red-500 hover:text-white hover:bg-red-600/40 
             hover:shadow-[0_0_12px_rgba(239,68,68,0.4)] transition-all`,title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{size:20})})]})}),ct&&window.innerWidth<1024&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 lg:hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!ct),className:"lg:hidden fixed top-4 right-4 bg-gray-800/80 p-2 rounded-lg text-gray-200 hover:text-white z-50 transition",children:jsxRuntimeExports.jsx(Menu,{size:22})}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-screen overflow-y-auto transition-all duration-300 lg:ml-[120px]",children:it})]})}async function startLeadMagnetEdit(it){var g,et,ot;try{return(await axiosInstance.post(`/edit/${it}/editor/start`)).data}catch(ut){throw console.error(" Error starting lead magnet edit:",((g=ut.response)==null?void 0:g.data)||ut.message),new Error(((ot=(et=ut.response)==null?void 0:et.data)==null?void 0:ot.error)||"Failed to start editor session.")}}async function commitLeadMagnetEdit(it,g,et){var ot,ut,ct;try{return(await axiosInstance.put(`/edit/${it}/editor/commit`,{token:g,updatedHtml:et})).data}catch(dt){throw console.error(" Error committing lead magnet edit:",((ot=dt.response)==null?void 0:ot.data)||dt.message),new Error(((ct=(ut=dt.response)==null?void 0:ut.data)==null?void 0:ct.error)||"Failed to save edited PDF.")}}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$3=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:it}){return["img",mergeAttributes(this.options.HTMLAttributes,it)]},parseMarkdown:(it,g)=>g.createNode("image",{src:it.href,title:it.title,alt:it.text}),renderMarkdown:it=>{var g,et,ot,ut,ct,dt;const ft=(et=(g=it.attrs)==null?void 0:g.src)!=null?et:"",St=(ut=(ot=it.attrs)==null?void 0:ot.alt)!=null?ut:"",kt=(dt=(ct=it.attrs)==null?void 0:ct.title)!=null?dt:"";return kt?`![${St}](${ft} "${kt}")`:`![${St}](${ft})`},addCommands(){return{setImage:it=>({commands:g})=>g.insertContent({type:this.name,attrs:it})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:it=>{const[,,g,et,ot]=it;return{src:et,alt:g,title:ot}}})]}}),index_default=Image$3;function isDarkColor(it){if(!it)return!1;const g=it.replace("#",""),et=parseInt(g.length===3?g[0]+g[0]:g.substring(0,2),16),ot=parseInt(g.length===3?g[1]+g[1]:g.substring(2,4),16),ut=parseInt(g.length===3?g[2]+g[2]:g.substring(4,6),16);return(.299*et+.587*ot+.114*ut)/255<.5}function EditorModal({leadMagnetId:it,open:g,onClose:et,onCommitted:ot}){var mn,bn,En;const[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(null),[Tt,Rt]=reactExports.useState(""),[jt,Ft]=reactExports.useState(""),[Bt,Ht]=reactExports.useState("#fff330"),Yt=reactExports.useRef(null),zt=useNavigate(),Kt=kn=>{const Pn=kn.target.value;if(Ht(Pn),!en)return;en.chain().focus().updateAttributes("highlight",{color:Pn}).run(),en.chain().focus().setHighlight({color:Pn}).run()},en=useEditor({extensions:[index_default$7,index_default,index_default$3.configure({multicolor:!0})],content:"",editable:!0});reactExports.useEffect(()=>{!g||!it||(async()=>{const kn=await startLeadMagnetEdit(it);ct(kn.token),kt(kn.meta),Rt(kn.editableHtml||""),en==null||en.commands.setContent(kn.editableHtml||"")})().catch(et)},[g,it,en]);async function tn(){ft(!0);try{const kn=(en==null?void 0:en.getHTML())||Tt,Pn=await commitLeadMagnetEdit(it,ut,kn);ot(Pn.pdf_url),et()}finally{ft(!1)}}reactExports.useEffect(()=>{if(Tt){const kn=new Blob([Tt],{type:"text/html"}),Pn=URL.createObjectURL(kn);return Ft(Pn),()=>URL.revokeObjectURL(Pn)}},[Tt]),reactExports.useEffect(()=>{var Pn,Ln,gn;const kn=((Pn=Yt.current)==null?void 0:Pn.contentDocument)||((gn=(Ln=Yt.current)==null?void 0:Ln.contentWindow)==null?void 0:gn.document);kn&&kn.documentElement.style.setProperty("--hl",Bt||"#fff330")},[Bt,jt]),reactExports.useEffect(()=>{var Cn,Vn,Qn,ir,ar;const kn=((Cn=Yt.current)==null?void 0:Cn.contentDocument)||((Qn=(Vn=Yt.current)==null?void 0:Vn.contentWindow)==null?void 0:Qn.document);if(!kn)return;const Pn=((ir=St==null?void 0:St.bgTheme)==null?void 0:ir.toLowerCase())||"",Ln=(((ar=colorThemes[Pn])==null?void 0:ar.background)||"#ffffff").trim(),yn=["dark","royal","navy","graphite","purple","lavender"].includes(Pn)||isDarkColor(Ln)?"#ffffff":"#000000";kn.documentElement.style.setProperty("--text-color",yn),kn.documentElement.style.setProperty("--hl",Bt||"#fff330"),kn.documentElement.style.setProperty("--hl-text","#000000");const vn=kn.getElementById("color-fix");vn&&vn.remove();const On=kn.createElement("style");On.id="color-fix",On.innerHTML=`
    body, .page-inner, .page, .cover-page,
    h1, h2, h3, h4, h5, h6,
    p, div, span, strong, b, em, li {
      color: var(--text-color, ${yn}) !important;
      -webkit-text-fill-color: var(--text-color, ${yn}) !important;
    }
  `,kn.head.appendChild(On)},[St==null?void 0:St.bgTheme,Bt,jt]),reactExports.useEffect(()=>{var gn;const kn=Yt.current;if(!kn||!(St!=null&&St.theme))return;const Pn=fontThemes[(gn=St.theme)==null?void 0:gn.toLowerCase()];if(!Pn)return;const Ln=async()=>{var yn;const Mn=kn.contentDocument;if(!(!Mn||!Mn.body))try{const vn=(((yn=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:yn.background)||"#ffffff").trim(),On=isDarkColor(vn);Mn.documentElement.style.setProperty("--text-color",On?"#ffffff":"#000000"),Mn.documentElement.style.setProperty("--hl",Bt||"#fff330"),Mn.documentElement.style.setProperty("--hl-text","#000000");const Vn=await(await fetch(Pn.file)).arrayBuffer(),Qn=btoa(new Uint8Array(Vn).reduce((hr,_r)=>hr+String.fromCharCode(_r),"")),ir=Mn.createElement("style");ir.id="custom-font-style",ir.innerHTML=`
        @font-face {
          font-family: '${Pn.name}';
          src: url(data:font/ttf;base64,${Qn}) format('truetype');
        }
        html, body, .page, .page-inner, .formatted-content,
        p, h1, h2, h3, h4, h5, h6, div, span, li {
          font-family: '${Pn.name}', sans-serif !important;
        }
      `,Mn.head.appendChild(ir);const ar=Mn.createElement("style");ar.id="responsive-width-fix",ar.innerHTML=`
  html, body {
    width: 100% !important;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Let the main page adapt naturally */
  .page, .page-inner {
    width: 100% !important;
    max-width: 667px !important; /* keep backend alignment on desktop */
    margin: 0 auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  .cover-page {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  width: 100% !important;
  background: transparent !important;
}

.cover-page .cover-img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  float: none !important;
}

.footer-link {
  margin-top: 60px !important;
  margin-bottom: 40px !important;
  text-align: center !important;
  padding-bottom: 40px !important;
}

.footer-link p {
  margin-bottom: 20px !important;
  font-size: 1.1rem !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

.footer-link .link-button {
  display: inline-block !important;
  padding: 12px 28px !important;
  border-radius: 30px !important;
  color: white !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  border: 2px solid white !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.25) !important;
}

.footer-link .link-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  /* Typography adjusts only if viewport is small */
  @media (max-width: 768px) {
    body {
      font-size: 90% !important; /* small font scaling only */
      line-height: 1.6 !important;
    }
    h1, h2, h3 {
      line-height: 1.3 !important;
      word-break: break-word !important;
    }
    img {
    display: block !important;
    margin: 0 auto !important;      /*  centers images horizontally */
    max-width: 100% !important;
    height: auto !important;
    float: none !important;         /*  removes any old float rules */
  }

  .cover-page {
    padding: 0 !important;
    margin-bottom: 1rem !important;
  }
  .cover-page .cover-img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
  }
      .footer-link {
    margin-top: 40px !important;
    margin-bottom: 30px !important;
    padding-bottom: 2rem !important;
  }
  .footer-link .link-button {
    font-size: 1rem !important;
  }
    pre {
  background-color: #0f0f0f;
  color: #f5f5f5;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  overflow-x: auto;
  margin: 0 0 1.5rem 0; /* remove top margin, only keep bottom spacing */
  white-space: pre-wrap;
  page-break-inside: avoid; /* keeps the block from splitting across PDF pages */
  box-decoration-break: clone;
}

pre + pre {
  margin-top: -0.25rem; /* closes any hairline gap between stacked blocks */
}

code {
  background-color: #1a1a1a;
  color: #00ff80;
  padding: 0.2rem 0.4rem;
  border-radius: 5px;
  font-family: "Courier New", monospace;
  font-size: 0.85rem;
}

/* Optional  better color contrast for multi-line snippets */
pre code {
  background: transparent; /* removes duplicate block background */
  color: #f5f5f5;
}
  }
`,Mn.head.appendChild(ar);const rr=Mn.createElement("style");rr.id="dark-preview-text",rr.innerHTML=`
  /*  Only affect text, not the background */
  body, .page-inner, p, span, div, li, strong, b, h1, h2, h3, h4, h5, h6 {
  color: var(--text-color) !important;
  -webkit-text-fill-color: var(--text-color) !important;
}

  /* Keep background untouched (retain the original white page color) */
  .page, .cover-page {
    background-color: inherit !important;
  }

  /* Highlight and links remain readable */
  a {
    color: #4FC3F7 !important;
  }
  mark {
  background-color: var(--hl, #fff330) !important;
  color: var(--hl-text, #000000) !important;
  -webkit-text-fill-color: var(--hl-text, #000000) !important;
  border-radius: 2px;
  padding: 0 2px;
}
`,Mn.head.appendChild(rr),Mn.documentElement.style.setProperty("--hl",typeof Bt=="string"&&Bt?Bt:"#fff330");try{}catch{}}catch(vn){console.error(" Font apply failed:",vn)}};return kn.addEventListener("load",Ln),()=>kn.removeEventListener("load",Ln)},[St==null?void 0:St.theme,jt]),reactExports.useEffect(()=>{if(!en||!Yt.current)return;const kn=Yt.current,Pn=()=>{var Mn;if(!(kn.contentDocument||((Mn=kn.contentWindow)==null?void 0:Mn.document)))return;const gn=()=>{var yn;try{const vn=kn.contentDocument||((yn=kn.contentWindow)==null?void 0:yn.document);if(!vn)return;let On=en.getHTML();On=On.replace(/<img[^>]+unsplash[^>]+>/gi,""),On=On.replace(/<img[^>]+base64[^>]+>/gi,"");const Cn=vn.querySelector(".page-inner");Cn?(Cn.innerHTML=On,console.log(" Updated .page-inner content live (cleaned images)")):console.warn(" .page-inner not found in iframe")}catch(vn){console.error(" Failed to update iframe:",vn)}};return en.on("update",gn),console.log(" Live preview handler attached after iframe load"),()=>en.off("update",gn)};return kn.addEventListener("load",Pn),()=>{kn.removeEventListener("load",Pn)}},[en,jt]);const[on,an]=reactExports.useState(""),[un,dn]=reactExports.useState("");function Sn(){if(!en||!on)return;const kn=en.getHTML(),Pn=on.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ln=new RegExp(Pn,"gi"),gn=kn.replace(Ln,un);en.commands.setContent(gn),y$4.success(`Replaced all "${on}" with "${un}"`)}return jsxRuntimeExports.jsxs(yt,{open:g,onClose:et,className:"fixed inset-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:jsxRuntimeExports.jsxs(je,{className:"w-full max-w-[1650px] bg-[#0f0f10] rounded-2xl p-4 sm:p-6 shadow-2xl flex flex-col gap-4 sm:gap-6 overflow-y-auto max-h-[95vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-3 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Live Editor"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-medium transition-all duration-150",onClick:()=>{const kn=St==null?void 0:St.pdf_url;if(!kn){y$4.error("No PDF found for this lead magnet.");return}zt(`/canvas-editor?pdf=${encodeURIComponent(kn)}`)},children:"Open Canvas Editor"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex-1 bg-white text-black rounded-xl overflow-y-auto min-h-[50vh] lg:h-[70vh]",children:jsxRuntimeExports.jsx(EditorContent,{editor:en})}),jsxRuntimeExports.jsx("div",{className:"w-full flex-1 relative min-h-[50vh] lg:h-[70vh] rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{ref:Yt,title:"preview",src:jt,allowTransparency:!0,className:"w-full flex-1 border border-gray-800 rounded-xl overflow-hidden min-h-[50vh] lg:h-[70vh]",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-pointer-lock allow-popups-to-escape-sandbox allow-modals",style:{position:"relative",zIndex:0,width:"100%",borderRadius:"0.75rem",background:((mn=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:mn.background)||"#fff",color:["dark","royal","navy","graphite","purple","lavender"].includes(((En=(bn=St==null?void 0:St.bgTheme)==null?void 0:bn.toLowerCase)==null?void 0:En.call(bn))||"")?"#ffffff":"#000000"}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between border border-gray-800 rounded-lg p-3 bg-[#1b1b1b]",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Find...",value:on,onChange:kn=>an(kn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Replace with...",value:un,onChange:kn=>dn(kn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("button",{onClick:Sn,disabled:!on,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:"Replace All"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Highlight color:"}),jsxRuntimeExports.jsx("input",{type:"color",value:Bt,onInput:Kt,className:"w-9 h-9 rounded-lg cursor-pointer  shadow-inner shadow-black/40 bg-[#1a1a1a] hover:scale-105 transition-transform duration-150"}),jsxRuntimeExports.jsx("button",{onClick:()=>en.chain().focus().toggleHighlight({color:Bt}).run(),className:"px-5 py-2.5 rounded-lg bg-[#1e1e1e] text-white font-medium border border-gray-700 hover:border-emerald-400 hover:text-emerald-300 transition-all duration-200 shadow-sm",children:"Highlight"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2 w-full",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-gray-700 rounded-lg w-full sm:w-auto",onClick:et,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-green rounded-lg disabled:opacity-50 text-black w-full sm:w-auto",disabled:dt,onClick:tn,children:dt?"Reprinting...":"Commit Edit"})]})]})})]})}function MagnetGrid({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!Array.isArray(kt)||kt.length===0)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:[kt.map(jt=>{var Ft,Bt,Ht;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl -z-10 transition-all",animate:{opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl flex items-center justify-center overflow-hidden border border-gray-700 relative",children:[jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Lead Magnet Cover",className:"object-cover w-full h-full rounded-xl transition-transform duration-300 group-hover:scale-105"}):jt.pdf_url?jsxRuntimeExports.jsx("img",{src:`https://cre8tlystudio.com/api/preview/${jt.id}`,alt:jt.title,className:"object-cover w-full h-full rounded-xl opacity-80"}):jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs italic",children:"No Preview"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold mt-2 truncate",children:jt.title||"Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jt.theme?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-[10px] font-semibold capitalize",style:{background:((Ft=themeStyles[jt.theme])==null?void 0:Ft.background)||"#333",color:((Bt=themeStyles[jt.theme])==null?void 0:Bt.color)||"#fff",border:((Ht=themeStyles[jt.theme])==null?void 0:Ht.border)||"none"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"N/A"}),jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs font-semibold text-center",children:jt.status==="completed"?jsxRuntimeExports.jsx("span",{className:"bg-black text-green border border-green px-3 py-[3px] rounded-full",children:"Completed"}):jt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):jt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"building..."]}):jsxRuntimeExports.jsx("span",{className:"bg-black text-purple border border-white px-4 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-[11px] text-gray-400 text-center",children:jt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(jt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(jt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function CustomerDashboard(){const{user:it,accessToken:g,refreshUser:et}=useAuth(),{magnets:ot,setMagnets:ut,fetchMagnets:ct,loading:dt}=useMagnets(),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(null),[Ft,Bt]=reactExports.useState(1),[Ht,Yt]=reactExports.useState(!1),[zt,Kt]=reactExports.useState(0),[en,tn]=reactExports.useState("lead_magnet"),[on,an]=reactExports.useState(0);function un(){Sn(null),setTimeout(()=>an(ir=>ir+1),100)}const[dn,Sn]=reactExports.useState(null);function mn(ir){Sn(ir)}const bn=(ot.magnets||[]).find(ir=>ir.id===dn),En=useLocation(),kn=useNavigate(),Pn=10;if(typeof window<"u"){const ir=new URLSearchParams(En.search);ir.get("session_id")&&(console.log(" Stripe checkout success:",ir.get("session_id")),ct(),window.history.replaceState({},document.title,"/dashboard"))}function Ln(ir,ar,rr){ut(hr=>{const _r=(hr.magnets||[]).map(xr=>xr.id===ir?{...xr,prompt:ar,status:"pending",theme:rr}:xr);return{...hr,magnets:_r}}),setTimeout(ct,3e3)}function gn(){kn("/plans")}const yn=[...(ot==null?void 0:ot.magnets)||[]].sort((ir,ar)=>(ir.slot_number||0)-(ar.slot_number||0)),vn=Math.ceil(yn.length/Pn),On=(Ft-1)*Pn,Cn=yn.slice(On,On+Pn);function Vn(ir,ar="lead_magnet"){jt(ir),tn(ar),Tt(!0)}async function Qn(){try{await et(),await ct()}catch(ir){console.error("Failed to refresh user slots:",ir)}}return reactExports.useEffect(()=>{it!=null&&it.has_book&&!(it!=null&&it.has_magnet)&&kn("/books")},[it]),jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"magnet",items:ot.magnets||[],summary:ot.summary||{},onCheckout:gn}),dt?jsxRuntimeExports.jsx(LoadingState,{}):ot.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:gn,type:"magnet"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MagnetGrid,{magnets:Cn,onAddPrompt:Vn,onOpenEditor:mn}),jsxRuntimeExports.jsx(MagnetCardList,{magnets:Cn,onAddPrompt:Vn,onOpenEditor:mn}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:Ft,totalPages:vn,onPageChange:Bt}),jsxRuntimeExports.jsx(SupportTab,{})]}),Rt&&jsxRuntimeExports.jsx(PromptModal,{isOpen:kt,onClose:()=>Tt(!1),magnetId:Rt,accessToken:g,contentType:en,setShowGenerating:Yt,setProgress:Kt,onSubmitted:Ln}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:ft,onClose:()=>St(!1),onRefresh:Qn,isFirstTime:ot.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:Ht,progress:zt,type:"lead"}),jsxRuntimeExports.jsx(EditorModal,{leadMagnetId:dn,open:!!dn,onClose:un,onCommitted:ir=>ct(),bgTheme:(bn==null?void 0:bn.bg_theme)||"modern"},on)]})})}function AdminDashboard(){const{accessToken:it}=useAuth(),[g,et]=reactExports.useState([]);return reactExports.useEffect(()=>{async function ot(){try{const ut=await axios$1.get("https://cre8tlystudio.com/api/lead-magnets/all",{headers:{Authorization:`Bearer ${it}`}});et(ut.data)}catch(ut){console.error("Error fetching all lead magnets:",ut)}}ot()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"All Lead Magnets"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.map(ot=>jsxRuntimeExports.jsxs("li",{className:"bg-charcoal p-4 rounded-lg text-white",children:[jsxRuntimeExports.jsxs("p",{children:["User: ",ot.user_id]}),jsxRuntimeExports.jsxs("p",{children:["Prompt: ",ot.prompt]}),jsxRuntimeExports.jsxs("p",{children:["Status: ",jsxRuntimeExports.jsx("span",{className:"text-green",children:ot.status})]})]},ot.id))})]})}function Contact(){const[it,g]=reactExports.useState({name:"",email:"",subject:"",message:""}),[et,ot]=reactExports.useState(!1),ut=dt=>{g({...it,[dt.target.name]:dt.target.value})},ct=async dt=>{dt.preventDefault(),ot(!0);try{await axios$1.post("https://cre8tlystudio.com/api/support/contact",it),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),g({name:"",email:"",subject:"",message:""})}catch(ft){console.error(ft),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{ot(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"min-h-screen text-white flex items-center justify-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full bg-metalBlack p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx(AnimatedLogo,{})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Have questions or need help? Fill out the form below and our support team will respond within 2448 hours."}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:it.name,onChange:ut,placeholder:"Your Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:it.email,onChange:ut,placeholder:"Email associated with your account",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:it.subject,onChange:ut,placeholder:"Subject (optional)",className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("textarea",{name:"message",value:it.message,onChange:ut,placeholder:"Write your message...",rows:6,required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white resize-none"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Message"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function PlanDetailsModal({plan:it,onClose:g}){if(!it)return null;const et={basic:{title:"Basic Creator",content:`
The Basic Creator Plan gives you 5 Lead Magnet Slots to design professional, conversion-ready lead magnets using Cre8tlys AI tools. Access standard templates, custom branding, and editable layouts so you can attract new subscribers and showcase your expertise with ease.`},pro:{title:"Pro Covers",content:`
The Pro Covers Plan includes everything in Basic, plus unlimited custom cover uploads for both books and lead magnets. Personalize your visuals with full creative controlupload, test, and update covers that match your unique style and brand. Youll also gain access to thousands of royalty-free Unsplash images, making it easy to design stunning, professional-quality covers in seconds without worrying about licensing or costs.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
The Authors Assistant is your creative co-writer, an AI partner that helps you plan your story structure, build rich scenes, and craft powerful chapters without losing your authentic voice. Generate up to 750 pages with built-in editing tools that perfect your tone, pacing, and style. Plus, enjoy unlimited custom cover uploads to bring your book to life with a professional finish.`},bundle:{title:"All-In-One Bundle",content:`
The All-In-One Bundle gives you everything in a single discounted package:  
 5 Lead Magnet Slots to grow your audience  
 Pro Covers for both books and lead magnets  
 1 Authors Assistant Book Slot (750 pages + editor)  
A full creative suite that lets you write, design, and publish with complete control from start to finish.`},prompt_memory:{title:"Prompt Memory Subscription",content:`
The Prompt Memory Plan gives you a persistent AI memory across your entire Cre8tly Studio experience.
It learns your tone, writing style, and preferences, letting you generate faster, more accurate, and
on-brand results every time. Cancel anytime, no contracts.`}},{title:ot,content:ut}=et[it]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-lg w-full text-white relative shadow-xl",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ot}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:ut}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[it,g]=reactExports.useState(null),[et,ot]=reactExports.useState(null),{user:ut}=useAuth(),ct=async dt=>{if(!ut||!ut.id){y$4.error("Please sign in before selecting a plan");return}try{g(dt);const ft=localStorage.getItem("accessToken"),St=await axiosInstance.post("/checkout",{userId:ut.id,productType:dt},{headers:{Authorization:`Bearer ${ft}`}});window.location.href=St.data.url}catch(ft){console.error("Checkout error:",ft),y$4.error("Failed to start checkout session"),g(null)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center justify-center px-6 py-16",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-12 tracking-tight text-center design-text",children:"Choose Your Plan"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl",children:[jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-purple-600 via-blue-500 to-purple-600 shadow-[0_0_25px_rgba(147,51,234,0.4)] hover:shadow-[0_0_45px_rgba(147,51,234,0.7)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-white design-text",children:"Basic Creator"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"5 digital asset slots"})," and access to all standard templates. Turn ideas into irresistible lead magnets fast."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("basic"),className:"text-blue-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-white design-text",children:"$47"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("basic"),disabled:it==="basic",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="basic"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-royalPurple hover:bg-purple-800 hover:shadow-[0_0_25px_rgba(147,51,234,0.6)] text-white design-text"}`,children:it==="basic"?"Redirecting...":"Select Basic Plan"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-400 design-text",children:"Pro Covers"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Everything in Basic plus ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"unlimited custom and unsplash cover uploads"}),". Single purchase unlocks pro covers for lifetime."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("pro"),className:"text-green-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-green-400 design-text",children:"$150"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("pro"),disabled:it==="pro",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="pro"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black design-text"}`,children:it==="pro"?"Redirecting...":"Pro Covers"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-pink-500 via-rose-400 to-pink-500 shadow-[0_0_25px_rgba(255,105,180,0.3)] hover:shadow-[0_0_45px_rgba(255,105,180,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:"AI-powered co-writer that helps you structure, write, and edit up to 750 pages while keeping your unique voice."}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("author"),className:"text-pink-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-pink-400 design-text",children:"$850 "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("author"),disabled:it==="author",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-pink-600 hover:bg-pink-700 hover:shadow-[0_0_25px_rgba(255,105,180,0.6)] text-white design-text"}`,children:it==="author"?"Redirecting...":"Authors Assistant"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 shadow-[0_0_25px_rgba(255,215,0,0.3)] hover:shadow-[0_0_45px_rgba(255,215,0,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-yellow-300 design-text",children:"All-In-One Bundle"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Basic, Pro Covers, and Authors Assistant"})," in one discounted package."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("bundle"),className:"text-yellow-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-yellow-300 design-text",children:"$999"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("bundle"),disabled:it==="bundle",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="bundle"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-yellow hover:bg-yellow hover:shadow-[0_0_25px_rgba(255,215,0,0.6)] text-black font-bold design-text"}`,children:it==="bundle"?"Redirecting...":"Get the Bundle"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-300 design-text",children:"Prompt Memory"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Unlock ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"AI Prompt Memory"})," your personalized creative memory that remembers your tone, style, and preferences across every generation. Stay consistent, save time, and build smarter prompts automatically."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("prompt_memory"),className:"text-green-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold mb-6 text-green-300 design-text",children:["$14.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-gray-400",children:" / month"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("prompt_memory"),disabled:it==="prompt_memory",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="prompt_memory"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black font-bold design-text"}`,children:it==="prompt_memory"?"Redirecting...":"Subscribe"})]})})]}),et&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:et,onClose:()=>ot(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-10 text-center",children:" Secure Checkout"})]})}function t(it,g,et){return Math.max(it,Math.min(g,et))}class Animate{advance(g){var ft;if(!this.isRunning)return;let et=!1;if(this.lerp)this.value=(ot=this.value,ut=this.to,ct=60*this.lerp,dt=g,function(St,kt,Tt){return(1-Tt)*St+Tt*kt}(ot,ut,1-Math.exp(-ct*dt))),Math.round(this.value)===this.to&&(this.value=this.to,et=!0);else{this.currentTime+=g;const St=t(0,this.currentTime/this.duration,1);et=St>=1;const kt=et?1:this.easing(St);this.value=this.from+(this.to-this.from)*kt}var ot,ut,ct,dt;(ft=this.onUpdate)==null||ft.call(this,this.value,et),et&&this.stop()}stop(){this.isRunning=!1}fromTo(g,et,{lerp:ot=.1,duration:ut=1,easing:ct=St=>St,onStart:dt,onUpdate:ft}){this.from=this.value=g,this.to=et,this.lerp=ot,this.duration=ut,this.easing=ct,this.currentTime=0,this.isRunning=!0,dt==null||dt(),this.onUpdate=ft}}class Dimensions{constructor({wrapper:g,content:et,autoResize:ot=!0,debounce:ut=250}={}){Ur(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Ur(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Ur(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=g,this.content=et,ot&&(this.debouncedResize=function(ct,dt){let ft;return function(){let St=arguments,kt=this;clearTimeout(ft),ft=setTimeout(function(){ct.apply(kt,St)},dt)}}(this.resize,ut),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var g,et;(g=this.wrapperResizeObserver)==null||g.disconnect(),(et=this.contentResizeObserver)==null||et.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(g,...et){let ot=this.events[g]||[];for(let ut=0,ct=ot.length;ut<ct;ut++)ot[ut](...et)}on(g,et){var ot;return(ot=this.events[g])!=null&&ot.push(et)||(this.events[g]=[et]),()=>{var ut;this.events[g]=(ut=this.events[g])==null?void 0:ut.filter(ct=>et!==ct)}}off(g,et){var ot;this.events[g]=(ot=this.events[g])==null?void 0:ot.filter(ut=>et!==ut)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(g,{wheelMultiplier:et=1,touchMultiplier:ot=1}){Ur(this,"onTouchStart",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:g})});Ur(this,"onTouchMove",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g,ut=-(et-this.touchStart.x)*this.touchMultiplier,ct=-(ot-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:ut,y:ct},this.emitter.emit("scroll",{deltaX:ut,deltaY:ct,event:g})});Ur(this,"onTouchEnd",g=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:g})});Ur(this,"onWheel",g=>{let{deltaX:et,deltaY:ot,deltaMode:ut}=g;et*=ut===1?e:ut===2?this.windowWidth:1,ot*=ut===1?e:ut===2?this.windowHeight:1,et*=this.wheelMultiplier,ot*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:et,deltaY:ot,event:g})});Ur(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=g,this.wheelMultiplier=et,this.touchMultiplier=ot,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(g,et){return this.emitter.on(g,et)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:g=window,content:et=document.documentElement,wheelEventsTarget:ot=g,eventsTarget:ut=ot,smoothWheel:ct=!0,syncTouch:dt=!1,syncTouchLerp:ft=.075,touchInertiaMultiplier:St=35,duration:kt,easing:Tt=en=>Math.min(1,1.001-Math.pow(2,-10*en)),lerp:Rt=!kt&&.1,infinite:jt=!1,orientation:Ft="vertical",gestureOrientation:Bt="vertical",touchMultiplier:Ht=1,wheelMultiplier:Yt=1,autoResize:zt=!0,__experimental__naiveDimensions:Kt=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:en,deltaY:tn,event:on})=>{if(on.ctrlKey)return;const an=on.type.includes("touch"),un=on.type.includes("wheel");if(this.options.syncTouch&&an&&on.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const dn=en===0&&tn===0,Sn=this.options.gestureOrientation==="vertical"&&tn===0||this.options.gestureOrientation==="horizontal"&&en===0;if(dn||Sn)return;let mn=on.composedPath();if(mn=mn.slice(0,mn.indexOf(this.rootElement)),mn.find(Pn=>{var Ln,gn,Mn,yn,vn;return((Ln=Pn.hasAttribute)===null||Ln===void 0?void 0:Ln.call(Pn,"data-lenis-prevent"))||an&&((gn=Pn.hasAttribute)===null||gn===void 0?void 0:gn.call(Pn,"data-lenis-prevent-touch"))||un&&((Mn=Pn.hasAttribute)===null||Mn===void 0?void 0:Mn.call(Pn,"data-lenis-prevent-wheel"))||((yn=Pn.classList)===null||yn===void 0?void 0:yn.contains("lenis"))&&!(!((vn=Pn.classList)===null||vn===void 0)&&vn.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void on.preventDefault();if(this.isSmooth=this.options.syncTouch&&an||this.options.smoothWheel&&un,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();on.preventDefault();let bn=tn;this.options.gestureOrientation==="both"?bn=Math.abs(tn)>Math.abs(en)?tn:en:this.options.gestureOrientation==="horizontal"&&(bn=en);const En=an&&this.options.syncTouch,kn=an&&on.type==="touchend"&&Math.abs(bn)>5;kn&&(bn=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+bn,Object.assign({programmatic:!1},En?{lerp:kn?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const en=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-en),this.emit()}},window.lenisVersion="1.0.42",g!==document.documentElement&&g!==document.body||(g=window),this.options={wrapper:g,content:et,wheelEventsTarget:ot,eventsTarget:ut,smoothWheel:ct,syncTouch:dt,syncTouchLerp:ft,touchInertiaMultiplier:St,duration:kt,easing:Tt,lerp:Rt,infinite:jt,gestureOrientation:Bt,orientation:Ft,touchMultiplier:Ht,wheelMultiplier:Yt,autoResize:zt,__experimental__naiveDimensions:Kt},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:g,content:et,autoResize:zt}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=dt||ct,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ut,{touchMultiplier:Ht,wheelMultiplier:Yt}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(g,et){return this.emitter.on(g,et)}off(g,et){return this.emitter.off(g,et)}setScroll(g){this.isHorizontal?this.rootElement.scrollLeft=g:this.rootElement.scrollTop=g}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(g){const et=g-(this.time||g);this.time=g,this.animate.advance(.001*et)}scrollTo(g,{offset:et=0,immediate:ot=!1,lock:ut=!1,duration:ct=this.options.duration,easing:dt=this.options.easing,lerp:ft=!ct&&this.options.lerp,onComplete:St,force:kt=!1,programmatic:Tt=!0}={}){if(!this.isStopped&&!this.isLocked||kt){if(["top","left","start"].includes(g))g=0;else if(["bottom","right","end"].includes(g))g=this.limit;else{let Rt;if(typeof g=="string"?Rt=document.querySelector(g):g!=null&&g.nodeType&&(Rt=g),Rt){if(this.options.wrapper!==window){const Ft=this.options.wrapper.getBoundingClientRect();et-=this.isHorizontal?Ft.left:Ft.top}const jt=Rt.getBoundingClientRect();g=(this.isHorizontal?jt.left:jt.top)+this.animatedScroll}}if(typeof g=="number"){if(g+=et,g=Math.round(g),this.options.infinite?Tt&&(this.targetScroll=this.animatedScroll=this.scroll):g=t(0,g,this.limit),ot)return this.animatedScroll=this.targetScroll=g,this.setScroll(this.scroll),this.reset(),void(St==null||St(this));if(!Tt){if(g===this.targetScroll)return;this.targetScroll=g}this.animate.fromTo(this.animatedScroll,g,{duration:ct,easing:dt,lerp:ft,onStart:()=>{ut&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(Rt,jt)=>{this.isScrolling=!0,this.velocity=Rt-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=Rt,this.setScroll(this.scroll),Tt&&(this.targetScroll=Rt),jt||this.emit(),jt&&(this.reset(),this.emit(),St==null||St(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(g=this.animatedScroll,et=this.limit,(g%et+et)%et):this.animatedScroll;var g,et}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(g){this.__isSmooth!==g&&(this.__isSmooth=g,this.toggleClassName("lenis-smooth",g))}get isScrolling(){return this.__isScrolling}set isScrolling(g){this.__isScrolling!==g&&(this.__isScrolling=g,this.toggleClassName("lenis-scrolling",g))}get isStopped(){return this.__isStopped}set isStopped(g){this.__isStopped!==g&&(this.__isStopped=g,this.toggleClassName("lenis-stopped",g))}get isLocked(){return this.__isLocked}set isLocked(g){this.__isLocked!==g&&(this.__isLocked=g,this.toggleClassName("lenis-locked",g))}get className(){let g="lenis";return this.isStopped&&(g+=" lenis-stopped"),this.isLocked&&(g+=" lenis-locked"),this.isScrolling&&(g+=" lenis-scrolling"),this.isSmooth&&(g+=" lenis-smooth"),g}toggleClassName(g,et){this.rootElement.classList.toggle(g,et),this.emitter.emit("className change",this)}}const App=()=>{const it=useLocation();return reactExports.useEffect(()=>{const g=new Lenis({duration:1.4,easing:ot=>1-Math.pow(1-ot,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function et(ot){g.raf(ot),requestAnimationFrame(et)}return requestAnimationFrame(et),g.on("scroll",({scroll:ot,limit:ut,velocity:ct,direction:dt,progress:ft})=>{}),()=>g.destroy()},[]),reactExports.useEffect(()=>{if(it.hash){const g=document.querySelector(it.hash);g&&setTimeout(()=>{g.scrollIntoView({behavior:"smooth",block:"start"})},200)}},[it]),jsxRuntimeExports.jsxs("main",{className:"relative min-h-screen bg-transparent",children:[jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("section",{id:"landing",className:"padding",children:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Footer,{})]})},ReactToastify="",index="";function ForgotPassword(){const[it,g]=reactExports.useState(""),[et,ot]=reactExports.useState(!1),ut=useNavigate(),ct=async dt=>{var ft,St;if(dt.preventDefault(),!it)return y$4.error("Please enter your email address.");ot(!0);try{console.log("sending email:",it);const kt=await axiosInstance.post("/auth/forgot-password",{email:it});y$4.success(kt.data.message),g(""),setTimeout(()=>ut("/login"),2500)}catch(kt){console.error("Forgot password error:",kt),y$4.error(((St=(ft=kt.response)==null?void 0:ft.data)==null?void 0:St.message)||"Error sending reset email.")}finally{ot(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Forgot Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your email below and well send you a link to reset your password."}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"email",value:it,onChange:dt=>g(dt.target.value),placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Reset Link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function ResetPassword(){const[it]=useSearchParams(),[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState(""),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(!1),kt=useNavigate(),Tt=it.get("token");reactExports.useEffect(()=>{Tt||(y$4.error("Invalid or missing reset token."),kt("/login"))},[Tt,kt]);const Rt=async jt=>{var Ft,Bt;if(jt.preventDefault(),!g||!ot)return y$4.error("Please enter and confirm your new password.");if(g!==ot)return y$4.error("Passwords do not match.");dt(!0);try{const Ht=await axiosInstance.post("/auth/reset-password",{token:Tt,newPassword:g});y$4.success(Ht.data.message||"Password reset successful!"),St(!0),setTimeout(()=>kt("/login"),3500)}catch(Ht){console.error("Reset password error:",Ht),y$4.error(((Bt=(Ft=Ht.response)==null?void 0:Ft.data)==null?void 0:Bt.message)||"Error resetting password.")}finally{dt(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:ft?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green mb-6",children:"Password Reset Successful"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated successfully. You can now log in with your new password."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"bg-green text-black font-semibold px-6 py-3 rounded-lg hover:opacity-90 transition-all",children:"Go to Login"})})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your new password below to reset your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"password",value:g,onChange:jt=>et(jt.target.value),placeholder:"New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"password",value:ot,onChange:jt=>ut(jt.target.value),placeholder:"Confirm New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ct?"Resetting...":"Reset Password"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-6",children:jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})})]},"form")})}),jsxRuntimeExports.jsx(Footer,{})]})}function EbookModal({ebook:it,onClose:g,onBuy:et,loadingBook:ot}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl max-w-2xl w-full shadow-xl p-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-xl",children:""}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:it.image_url,alt:it.title,className:"w-56 h-auto object-contain rounded-lg border border-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-left",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:[it.title," (guide)"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm leading-relaxed space-y-3 overflow-y-auto max-h-[300px] pr-2 mb-5 py-4",dangerouslySetInnerHTML:{__html:it.description}}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-white mb-5",children:["$",it.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>et(it),disabled:ot===it.product_type,className:`py-3 px-8 rounded-xl text-lg font-semibold shadow-lg ${ot===it.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen text-black hover:bg-green-400 transition"}`,children:ot===it.product_type?"Redirecting...":"Buy Now"})]})]})})}function EbooksStore(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0),{user:St}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const Rt=await axiosInstance.get("/ebooks");g(Rt.data)}catch(Rt){console.error("Failed to fetch ebooks:",Rt),y$4.error("Failed to load ebooks")}finally{ft(!1)}})()},[]),reactExports.useEffect(()=>{const Tt=new Lenis({duration:1.4,easing:jt=>1-Math.pow(1-jt,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function Rt(jt){Tt.raf(jt),requestAnimationFrame(Rt)}return requestAnimationFrame(Rt),Tt.on("scroll",({scroll:jt,limit:Ft,velocity:Bt,direction:Ht,progress:Yt})=>{}),()=>Tt.destroy()},[]);const kt=async Tt=>{var Rt;try{ot(Tt.product_type);const jt=localStorage.getItem("accessToken"),Ft=await axiosInstance.post("/ebooks/checkout",{userId:(St==null?void 0:St.id)||null,title:Tt.title,description:Tt.description,price:Tt.price,productType:Tt.product_type},jt?{headers:{Authorization:`Bearer ${jt}`}}:{});window.location.href=Ft.data.url}catch(jt){console.error("Checkout error:",((Rt=jt.response)==null?void 0:Rt.data)||jt.message),y$4.error("Failed to start checkout session"),ot(null)}};return dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Loading ebooks..."}):it.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"No ebooks available yet."}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-12 tracking-tight text-center lead-text",children:["Shop Our ",jsxRuntimeExports.jsx("span",{className:"text-green design-text",children:"Premium Guides"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center max-w-2xl mb-16 leading-relaxed",children:"Professionally written, conversion-focused guides generated by our software Cre8tly Studio. Instantly downloadable after purchase, no subscriptions, just pure value."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-7xl",children:it.map(Tt=>jsxRuntimeExports.jsx("div",{className:`relative rounded-3xl p-[2px] bg-gradient-to-r from-[#9ca3af] via-[#f3f4f6] to-[#9ca3af]
        shadow-[0_0_25px_rgba(255,255,255,0.15)] hover:shadow-[0_0_45px_rgba(255,255,255,0.35)]
        transition-all duration-300`,children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-[#1a1a1a] via-[#111111] to-[#0b0b0b] p-8 flex flex-col text-center shadow-[inset_0_0_20px_rgba(255,255,255,0.05)] min-h-[550px] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0.15)_40%,rgba(255,255,255,0)_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 relative",children:jsxRuntimeExports.jsx("img",{src:Tt.image_url,alt:Tt.title,className:"rounded-lg w-48 h-auto object-contain border border-gray-700 shadow-[0_4px_20px_rgba(0,0,0,0.4)]"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-3 text-white min-h-[64px] flex items-center justify-center",children:Tt.title}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 mb-5 text-sm leading-relaxed line-clamp-3 text-left",dangerouslySetInnerHTML:{__html:Tt.description}}),jsxRuntimeExports.jsx("button",{onClick:()=>ct(Tt),className:"text-gray-400 text-sm hover:text-white hover:underline mb-4 transition-colors",children:"Read More"}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-extrabold mb-5 text-white tracking-wide drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]",children:["$",Tt.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(Tt),disabled:et===Tt.product_type,className:`w-full py-3 px-6 text-lg font-semibold rounded-xl transition-all duration-300 
                ${et===Tt.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-[#d1d5db] to-[#9ca3af] text-black hover:from-white hover:to-gray-300 hover:shadow-[0_0_35px_rgba(255,255,255,0.5)]"}`,children:et===Tt.product_type?"Redirecting...":"Purchase Guide"})]})]})},Tt.id))}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-12 text-center",children:" Secure Checkout"}),ut&&jsxRuntimeExports.jsx(EbookModal,{ebook:ut,onClose:()=>ct(null),onBuy:kt,loadingBook:et})]})}const BookContext=reactExports.createContext();function BookProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState([]),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const kt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(kt.data)}catch(kt){console.error("Error fetching books:",kt),ft(kt)}finally{ct(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Tt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(Rt=>JSON.stringify(Rt)===JSON.stringify(Tt.data)?Rt:Tt.data)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:et,setBooks:ot,fetchBooks:St,loading:ut,error:dt},children:it})}function useBooks(){return reactExports.useContext(BookContext)}function BookPromptModal({isOpen:it,onClose:g,bookId:et,partNumber:ot=1,accessToken:ut,onSubmitted:ct,setShowGenerating:dt,setProgress:ft,initialBookData:St}){const[kt,Tt]=reactExports.useState(""),[Rt,jt]=reactExports.useState(10),[Ft,Bt]=reactExports.useState(""),[Ht,Yt]=reactExports.useState(null),[zt,Kt]=reactExports.useState(""),[en,tn]=reactExports.useState(!1),[on,an]=reactExports.useState(!1),[un,dn]=reactExports.useState(!1),[Sn,mn]=reactExports.useState((St==null?void 0:St.title)||""),[bn,En]=reactExports.useState((St==null?void 0:St.authorName)||""),[kn,Pn]=reactExports.useState((St==null?void 0:St.bookType)||"fiction");reactExports.useEffect(()=>{St&&(console.log(" Syncing initialBookData to state:",St),mn(St.title||""),En(St.authorName||""),Pn(St.bookType||"fiction"))},[St]),reactExports.useEffect(()=>{it||(Tt(""),jt(10),Bt(""),Yt(null),Kt(""),En(""),ft(0))},[it]),reactExports.useEffect(()=>{async function gn(){var Mn;if(et)try{const vn=(await axios$1.get(`https://cre8tlystudio.com/books/draft/${et}`)).data;vn!=null&&vn.draft_text?(Tt(vn.draft_text),vn.title&&mn(vn.title),vn.link&&Bt(vn.link),vn.author_name&&En(vn.author_name),vn.book_type&&Pn(vn.book_type),y$4.info(`Loaded last draft from ${new Date(vn.last_saved_at).toLocaleString()}`)):console.log("No draft found for this book.")}catch(yn){((Mn=yn.response)==null?void 0:Mn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",yn),y$4.error("Failed to fetch saved draft."))}}gn()},[et]),reactExports.useEffect(()=>{async function gn(){var Mn;if(et)try{const yn=ot>1?`https://cre8tlystudio.com/api/books/${et}/part/${ot}/draft`:`https://cre8tlystudio.com/api/books/draft/${et}`,On=(await axios$1.get(yn,{headers:{Authorization:`Bearer ${ut}`}})).data;On!=null&&On.draft_text?(Tt(On.draft_text),On.title&&Kt(On.title),On.link&&Bt(On.link),On.author_name&&En(On.author_name),On.book_type&&Pn(On.book_type),y$4.info(`Loaded last draft from ${new Date(On.last_saved_at||On.updated_at||Date.now()).toLocaleString()}`)):console.log("No draft found for this book or part.")}catch(yn){((Mn=yn.response)==null?void 0:Mn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",yn),y$4.error("Failed to fetch saved draft."))}}gn()},[et,ot]);async function Ln(gn){var yn,vn;if(gn.preventDefault(),!kt.trim()){y$4.error("Please enter your book idea or prompt first.");return}g(),tn(!0),ft(0),dt(!0);let Mn;try{Mn=setInterval(()=>{ft(Cn=>Cn<90?Cn+Math.random()*4:Cn)},400);const On=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{bookId:et,prompt:kt,pages:Rt,link:Ft,coverImage:Ht,title:zt,authorName:bn,bookName:Sn,partNumber:ot,bookType:kn},{headers:{Authorization:`Bearer ${ut}`},maxBodyLength:1/0,maxContentLength:1/0});clearInterval(Mn),ft(100),y$4.success(" Book section generated successfully!"),dt(!1),await new Promise(Cn=>setTimeout(Cn,1e3)),window.dispatchEvent(new Event("refreshBooks")),typeof ct=="function"&&setTimeout(()=>ct(et,kt),1e3)}catch(On){clearInterval(Mn),ft(0),dt(!1),y$4.error(((vn=(yn=On.response)==null?void 0:yn.data)==null?void 0:vn.message)||"Book generation failed. Try again."),console.error(" Book generation error:",On)}finally{tn(!1)}}return it?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#0b0b0b] text-white flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center px-6 py-5 border-b border-gray-700 bg-[#111]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-white text-center",children:[" Build Your Novel  Part ",ot]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute left-6 md:left-36 text-silver hover:text-white transition text-lg",children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:jsxRuntimeExports.jsx(BookPromptForm,{text:kt,setText:Tt,pages:Rt,setPages:jt,link:Ft,setLink:Bt,cover:Ht,setCover:Yt,title:zt,setTitle:Kt,authorName:bn,setAuthorName:En,bookName:Sn,setBookName:mn,bookType:kn,setBookType:Pn,onSubmit:Ln,loading:en,showPreview:on,setShowPreview:an,setShowGenerating:dt,bookId:et,setBookId:()=>{},partLocked:un,partNumber:ot,onClose:g,setProgress:ft})})]}):null}function BookPartsModal({bookId:it,accessToken:g,onClose:et}){const[ot,ut]=reactExports.useState([]),[ct,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(null);return reactExports.useEffect(()=>{async function kt(){try{const Rt=await(await fetch(`https://cre8tlystudio.com/api/books/${it}/parts`,{headers:{Authorization:`Bearer ${g}`}})).json();ut(Rt)}catch(Tt){console.error(" Failed to load book parts:",Tt)}finally{dt(!1)}}kt()},[it,g]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),ct?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:ot.map(kt=>jsxRuntimeExports.jsxs("li",{className:"flex justify-between items-center border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Part ",kt.part_number,": ",kt.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",kt.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(kt.created_at).toLocaleString()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St({url:kt.file_url,title:kt.title,partNumber:kt.part_number}),className:"px-3 py-1 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"})]},kt.id))}),jsxRuntimeExports.jsx("button",{onClick:et,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ft&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ft.url,fileTitle:ft.title,partNumber:ft.partNumber,sourceType:"book",onClose:()=>St(null)})]})}function BookCardList({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),{accessToken:kt}=useAuth();function Tt(Rt){St(Rt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[it.map(Rt=>jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:Rt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Rt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Rt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Rt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Rt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Rt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Rt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Rt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Rt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Rt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Rt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Rt.id,Rt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsx("button",{onClick:()=>ut({url:Rt.pdf_url,title:Rt.book_name||"Untitled",partNumber:Rt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=750?"Download Book":"Preview"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(Rt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Rt.prompt&&Rt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Rt.id,(Rt.part_number||1)+1),className:"w-full bg-gradient-to-r from-green to-royalPurple text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=740?"Finish Book":`Continue (Part ${(Rt.part_number||1)+1})`})]})]})]},Rt.id)),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:kt,onClose:()=>dt(!1)})]})}function NewBookModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ut,ct]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[St,kt]=reactExports.useState(!1);async function Tt(){if(!et||!ut||!dt){alert("Please fill in all fields, including book type.");return}it({title:et,authorName:ut,bookType:dt})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Book Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:et,onChange:Rt=>ot(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:ut,onChange:Rt=>ct(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2",children:"Select Book Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:["Fiction","Non-Fiction","Educational"].map(Rt=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:Rt.toLowerCase(),checked:dt===Rt.toLowerCase(),onChange:jt=>ft(jt.target.value),className:"accent-royalPurple"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:Rt})]},Rt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:St,className:"bg-gradient-to-r from-green to-royalPurple px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:St?"Saving...":"Continue"})]})]})})}function OnboardingGuide({steps:it=[],onFinish:g}){const[et,ot]=reactExports.useState(0),[ut,ct]=reactExports.useState(null);reactExports.useEffect(()=>{if(it.length>0&&it[et]){const kt=document.querySelector(it[et].target);if(kt){const Tt=kt.getBoundingClientRect();ct(Tt)}}},[et,it]);function dt(){et<it.length-1?ot(et+1):g==null||g()}function ft(){et>0&&ot(et-1)}if(!it.length||!ut)return null;const St=it[et];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:ut.top-8,left:ut.left-8,width:ut.width+16,height:ut.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:ut.bottom+12,left:ut.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:St.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:ft,disabled:et===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${et===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:et===it.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),{accessToken:Rt,user:jt,refreshUser:Ft}=useAuth(),Bt=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(it.length>0&&jt&&!jt.has_completed_book_onboarding){const Yt=setTimeout(()=>Tt(!0),800);return()=>clearTimeout(Yt)}},[it,jt]);function Ht(Yt){St(Yt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:it.map(Yt=>jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:"book-title text-white text-sm font-semibold truncate mb-2",children:Yt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Yt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Yt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Yt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Yt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Yt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Yt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Yt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Yt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Yt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Yt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Yt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Yt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Yt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Yt.id,Yt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create Chapter",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Yt.has_part_1===0&&(Yt.is_draft===1||Yt.draft_text)&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(Yt.id,Yt.part_number||1),className:"w-full bg-blue hover:bg-blue text-white rounded-lg py-2 text-sm font-semibold flex items-center justify-center gap-2 transition-all",title:"Continue Draft",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),Yt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut({url:Yt.pdf_url,title:Yt.book_name||"Untitled",partNumber:Yt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview Book",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Yt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Yt.pages>=750?"Download Book":"Preview"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ht(Yt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})]}),Yt.prompt&&Yt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Yt.id,(Yt.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Yt.pages>=740?"Finish Book":`Continue Story (Part ${(Yt.part_number||1)+1})`})]})]})]},Yt.id))}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:Rt,onClose:()=>dt(!1)}),kt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:Bt,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Tt(!1),await axiosInstance.post("https://cre8tlystudio.com/api/books/book-complete",{userId:jt==null?void 0:jt.id},{headers:{Authorization:`Bearer ${Rt}`}}),await Ft()}catch(Yt){console.error(" Failed to save onboarding status:",Yt)}}})]})}function BooksDashboard(){const{accessToken:it}=useAuth(),{books:g,setBooks:et,fetchBooks:ot,loading:ut}=useBooks(),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(0),[Ft,Bt]=reactExports.useState(!1),[Ht,Yt]=reactExports.useState(1),[zt,Kt]=reactExports.useState(!1),[en,tn]=reactExports.useState(null),on=useNavigate(),an=10,un=[...g].sort((Ln,gn)=>new Date(gn.created_at)-new Date(Ln.created_at)),dn=Math.ceil(un.length/an),Sn=(Ht-1)*an,mn=un.slice(Sn,Sn+an);async function bn(Ln,gn=1){let Mn=g.find(On=>On.id===Ln);try{const On=await axios$1.get(`https://cre8tlystudio.com/api/books/${Ln}`,{headers:{Authorization:`Bearer ${it}`},withCredentials:!0});On.data&&(console.log(" Fresh data from backend:",On.data),Mn={...Mn,...On.data})}catch(On){console.error(" Failed to fetch book by ID:",On),toast.error("Could not refresh book info  using cached version")}if(!Mn)return;const yn=!Mn.author_name||Mn.author_name.trim()==="",vn=!Mn.title||Mn.title.trim()===""||Mn.title==="Untitled"||Mn.title==="Untitled Book";if(yn||vn){St({id:Ln,part_number:gn}),Kt(!0);return}St({id:Mn.id,part_number:gn,title:Mn.title||Mn.book_name||"",author_name:Mn.author_name||"",book_type:Mn.bookType||Mn.book_type||"fiction"}),dt(!0)}function En(Ln,gn){et(Mn=>Mn.map(yn=>yn.id===Ln?{...yn,prompt:gn,status:"pending"}:yn)),setTimeout(ot,3e3)}function kn({title:Ln,authorName:gn,bookType:Mn}){tn({title:Ln,authorName:gn,bookType:Mn}),Kt(!1),dt(!0)}async function Pn(){try{await(await fetch("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${it}`},credentials:"include"})).json()&&ot()}catch(Ln){console.error("Failed to refresh slots:",Ln)}}return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"book",items:g,onCheckout:()=>on("/plans")}),ut?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>on("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:mn,onAddPrompt:(Ln,gn)=>bn(Ln,gn),onGenerateNext:(Ln,gn)=>bn(Ln,gn)}),jsxRuntimeExports.jsx(BookCardList,{books:mn,onAddPrompt:(Ln,gn)=>bn(Ln,gn),onGenerateNext:(Ln,gn)=>bn(Ln,gn)}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:Ht,totalPages:dn,onPageChange:Yt}),jsxRuntimeExports.jsx(SupportTab,{})]}),zt&&ft&&jsxRuntimeExports.jsx(NewBookModal,{bookId:ft.id,accessToken:it,onCreate:kn,onClose:()=>Kt(!1)}),ft&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:ct,onClose:()=>dt(!1),bookId:ft.id,partNumber:ft.part_number,accessToken:it,setShowGenerating:Tt,setProgress:jt,onSubmitted:En,initialBookData:{title:(en==null?void 0:en.title)||ft.title||"",authorName:(en==null?void 0:en.authorName)||ft.author_name||"",bookType:(en==null?void 0:en.bookType)||ft.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:Ft,onClose:()=>Bt(!1),onRefresh:Pn,isFirstTime:g.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:kt,progress:Rt,type:"book"})]})})}function DashboardSettings(){const{user:it,setUser:g}=useAuth(),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;(async()=>{try{const zt=await axiosInstance.get(`upload-data/user/settings/${it.id}`);ot(zt.data.settings)}catch(zt){console.error("Failed to load settings:",zt),y$4.error("Failed to load brand settings.")}})()},[it==null?void 0:it.id]);const Rt=async()=>{if(!ut){y$4.warning("Please select a file first.");return}const Yt=new FileReader;Yt.onloadend=async()=>{const zt=Yt.result.split(",")[1];ft(!0);try{const Kt=await axiosInstance.post("upload-data/user/settings/upload",{user_id:it.id,file_name:ut.name,file_data:zt});ot(en=>({...en,brand_identity_file:Kt.data.fileUrl})),g(en=>({...en,brand_identity_file:Kt.data.fileUrl})),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:Kt.data.fileUrl})),y$4.success("Brand file uploaded successfully!"),ct(null),Tt.current&&(Tt.current.value="")}catch(Kt){console.error(Kt),y$4.error("Upload failed. Please try again.")}finally{ft(!1)}},Yt.readAsDataURL(ut)},jt=async()=>{try{(await axiosInstance.delete(`upload-data/user/settings/remove/${it.id}`)).data.success?(ot(zt=>({...zt,brand_identity_file:null})),g(zt=>({...zt,brand_identity_file:null})),ct(null),Tt.current&&(Tt.current.value=""),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:null})),y$4.info("Brand identity file removed. Defaults restored.")):y$4.warning("Failed to remove brand file. Try again.")}catch(Yt){console.error("Error removing brand file:",Yt),y$4.error("Error removing file.")}},Ft=async()=>{try{await axiosInstance.put("upload-data/user/settings/update-cta",{userId:it.id,cta:(et==null?void 0:et.cta)||""}),g(Yt=>({...Yt,cta:et==null?void 0:et.cta})),localStorage.setItem("user",JSON.stringify({...it,cta:et==null?void 0:et.cta})),kt(!0),y$4.success("CTA saved successfully!"),setTimeout(()=>kt(!1),3e3)}catch(Yt){console.error("Failed to update CTA:",Yt),y$4.error("Failed to update CTA. Please try again.")}},Ht=(()=>{if(!it)return[];const Yt=[];return it.has_book&&Yt.push("Assistant"),it.has_magnet&&Yt.push("Magnets"),it.pro_covers&&Yt.push("Pro Covers"),Yt})();return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10 border-b border-gray-800 pb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-2xl p-8 mb-10 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),Ht.length>0?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:Ht.map(Yt=>{let zt="active",Kt=null;return Yt.includes("Assistant")?(Kt=(it==null?void 0:it.book_slots)??0,Kt<=0&&(zt="expired")):Yt.includes("Magnets")?(Kt=(it==null?void 0:it.magnet_slots)??0,Kt<=0&&(zt="expired")):Yt.includes("Pro")&&(zt=it!=null&&it.pro_covers?"lifetime":"expired"),jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col justify-between transition-all rounded-xl p-5 border shadow-inner
              ${zt==="expired"?"bg-[#0c0f18]/80 border-gray-800 opacity-70":"bg-[#111827]/80 hover:bg-[#1f2937]/80 border-gray-700 hover:border-gray-600 hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${zt==="expired"?"text-red-400 bg-red-400/10":"text-green bg-green-400/10"}`,children:Yt.includes("Pro")||zt==="active"?"Active":"Expired"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Yt.includes("Assistant")&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Yt.includes("Magnets")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Yt.includes("Pro")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-royalPurple",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:Yt})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:Yt.includes("Assistant")?"Access advanced book creation and AI writing tools.":Yt.includes("Magnets")?"Generate digital products and marketing assets.":"Unlock pro cover uploads and customization tools."}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:zt==="lifetime"?jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-gray-500 tracking-wide",children:"Lifetime"}):jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Slots remaining:"," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Kt>0?"text-gray-300":"text-red-400"}`,children:Kt})]})})]},Yt)})}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-3 shadow-lg mb-8",children:et!=null&&et.brand_identity_file?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Active Brand File"})}),jsxRuntimeExports.jsx("button",{onClick:jt,className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-md font-semibold shadow-sm transition",children:"Remove"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic",children:["Uploaded on: ",new Date().toLocaleDateString()]})]}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center",children:"No brand identity uploaded yet."})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Upload New Brand File"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted formats:"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:".pdf, .docx, .doc, .txt"})," (max 5 MB)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 w-full",children:[jsxRuntimeExports.jsx("input",{ref:Tt,type:"file",accept:".pdf,.docx,.doc,.txt",onChange:Yt=>ct(Yt.target.files[0]),className:"w-full text-sm text-gray-300 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-purple-600 hover:file:opacity-90"}),ut&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic mt-1",children:["Selected: ",jsxRuntimeExports.jsx("span",{className:"text-gray-200",children:ut.name})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Rt,disabled:dt,className:`relative w-full sm:w-auto px-6 py-2.5 rounded-lg font-semibold transition-all duration-300
    ${dt?"opacity-60 cursor-not-allowed bg-gradient-to-r from-green-700 to-green-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-400 hover:to-emerald-500 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]"}
    text-white shadow-[inset_0_0_6px_rgba(255,255,255,0.15)]`,children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:dt?"Uploading...":"Save Brand"}),!dt&&jsxRuntimeExports.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear at the end of your lead magnets or books. You can change it anytime."}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter at https://yourwebsite.com.

Lets keep this journey going together  no tech overwhelm, no burnout, just steady growth.`,value:(et==null?void 0:et.cta)||"",onChange:Yt=>ot(zt=>({...zt,cta:Yt.target.value})),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:Ft,className:"mt-3 px-6 py-2 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Save CTA"})}),it!=null&&it.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("https://cre8tlystudio.com/api/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${it==null?void 0:it.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(Yt){console.error(" Failed to reset onboarding:",Yt),y$4.error("Could not reset tour. Please try again.")}},className:"px-5 py-2.5 rounded-lg bg-[#6a5acd] text-black font-semibold hover:opacity-90 transition",children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Need an ISBN for your book? Cre8tly Studio can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-black font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside Cre8tly Studio!"),className:"flex-1 bg-gray-800 text-gray-300 font-semibold py-2.5 rounded-lg border border-gray-700 hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic mt-3",children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null]})]})})}function PromptMemoryTable({prompts:it=[]}){const[g,et]=reactExports.useState(null),[ot,ut]=reactExports.useState(!1),{user:ct,accessToken:dt}=useAuth(),ft=useNavigate();reactExports.useEffect(()=>{async function kt(){try{if(!(ct!=null&&ct.id))return;const Tt=await axiosInstance.get("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${dt}`}});ut(!!Tt.data.has_memory)}catch(Tt){console.error(" Failed to check memory access:",Tt)}}kt()},[ct,dt]);const St=async(kt,Tt)=>{try{const Rt=kt.replace(/<[^>]*>/g,"");await navigator.clipboard.writeText(Rt),et(Tt),y$4.success("Prompt copied to clipboard"),setTimeout(()=>et(null),2e3)}catch{y$4.error("Failed to copy prompt")}};return!Array.isArray(it)||it.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-gray-400 px-4",children:jsxRuntimeExports.jsx("p",{children:"No prompts found yet."})}):ot?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-2 sm:px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] w-full max-w-6xl rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-white",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-800/90",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Prompt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Copy"})]})}),jsxRuntimeExports.jsx("tbody",{children:it.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-900/60 transition",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-lg",children:jsxRuntimeExports.jsx("p",{className:"truncate text-white/90",children:kt.prompt.replace(/<[^>]*>/g,"")})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm whitespace-nowrap",children:kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(Copy,{size:18})})})]},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex flex-col divide-y divide-gray-800",children:it.map(kt=>jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm mb-2",children:kt.prompt.replace(/<[^>]*>/g,"")}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:kt.created_at_prompt?new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"N/A"}),jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:16}):jsxRuntimeExports.jsx(Copy,{size:16})})]})]},kt.id))})]})}):jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-[#111] w-full max-w-6xl overflow-hidden rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"opacity-40 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold text-lg",children:["Prompt Memory"," ",jsxRuntimeExports.jsx("span",{className:"text-[#d2b6ff] text-sm ml-2",children:"PRO Feature"})]})}),jsxRuntimeExports.jsx("div",{className:"min-h-[400px] flex items-center justify-center text-gray-500 text-sm",children:jsxRuntimeExports.jsx("p",{children:"Prompt data will appear here once unlocked."})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center backdrop-blur-md bg-black/40 rounded-xl text-center px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{size:20,className:"text-gray-300"}),jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Unlock this feature to access and reuse your previously generated prompts."}),jsxRuntimeExports.jsx("button",{onClick:()=>ft("/plans"),className:`border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                         text-black font-semibold px-5 py-2 rounded-lg hover:opacity-90 transition`,children:"Unlock Feature"})]})]})})}function PromptMemoryDashboard(){const{user:it}=useAuth(),[g,et]=reactExports.useState([]),[ot,ut]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;async function ct(){try{const dt=await axiosInstance.get(`/lead-magnets/prompt-memory/${it.id}`);et(dt.data)}catch(dt){console.error("Failed to load prompts:",dt)}finally{ut(!1)}}ct()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-8 mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2 design-text",children:"My Prompt Memory"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"View all prompts youve generated with Cre8tly Studio."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3 mb-8"}),ot?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 border border-gray-700 rounded-xl bg-gray-900/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Prompts Yet"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 max-w-md mx-auto",children:["You dont have any saved prompts yet. Create your first ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Digital Product"})," to start building your prompt memory."]})]}):jsxRuntimeExports.jsx(PromptMemoryTable,{prompts:g})]})}function Inbox(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Tt()},[]);async function Tt(){try{const Bt=await axiosInstance.get("/admin/messages");g(Bt.data||[])}catch(Bt){console.error("Failed to load messages:",Bt),y$4.error("Failed to load inbox.")}finally{ct(!1)}}async function Rt(Bt){if(ot(Bt),!Bt.read_status)try{ft(!0),await axiosInstance.post(`/admin/messages/${Bt.id}/read`),g(Ht=>Ht.map(Yt=>Yt.id===Bt.id?{...Yt,read_status:1}:Yt))}catch(Ht){console.error("Failed to mark message as read:",Ht)}finally{ft(!1)}}async function jt(Bt){y$4.dismiss(),y$4(({closeToast:Ht})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{kt(!0),await axiosInstance.delete(`/admin/messages/user/${Bt}`),g(Yt=>Yt.filter(zt=>zt.id!==Bt)),ot(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Yt){console.error("Failed to delete message:",Yt),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{kt(!1),Ht()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:Ht,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function Ft(){ot(null)}return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen bg-[#030712] text-white flex flex-col lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 lg:max-w-[380px] border-r border-gray-800 h-screen overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-800 pb-4 mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:"text-green"})]}),ut?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Loading messages..."}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:it.map(Bt=>jsxRuntimeExports.jsxs("li",{onClick:()=>Rt(Bt),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${Bt.id===(et==null?void 0:et.id)?"bg-[#111827]/80 border-green":Bt.read_status?"bg-[#0c0f18]/70 border-gray-800 hover:border-gray-700":"bg-[#111827]/80 border-green/40 hover:border-green"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${Bt.read_status?"text-gray-300":"text-white"}`,children:Bt.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date(Bt.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${Bt.read_status?"text-gray-500":"text-gray-300"}`,children:Bt.message}),!Bt.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},Bt.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto h-screen bg-[#0B0F19]",children:et?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:Ft,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:"bg-[#111827]/60 border border-gray-800 rounded-2xl p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-800 pb-4 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2 sm:mt-0",children:[jsxRuntimeExports.jsx(Calendar,{size:12}),new Date(et.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line text-sm",children:et.message}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-4 flex items-center justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>jt(et.id),disabled:St,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${St?"bg-red-900 text-gray-400 opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),St?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[jsxRuntimeExports.jsx(Mail,{size:40,className:"mb-4 text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function ut(){try{const{data:ct}=await axiosInstance.get("https://cre8tlystudio.com/api/settings/maintenance");g(ct.maintenance)}catch{g(!1)}finally{ot(!1)}}ut()},[]),{maintenance:it,loading:et}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:" Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["Cre8tly Studio is ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"Well be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital"]})})]})}const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$1={_global:glob,version:"10.0.8",isBrowser:detectBrowser(),isUnminified:/param/.test((function(it){}).toString()),dblClickWindow:400,getAngle(it){return Konva$1.angleDeg?it*PI_OVER_180:it},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$1.DD.isDragging},isTransforming(){var it,g;return(g=(it=Konva$1.Transformer)===null||it===void 0?void 0:it.isTransforming())!==null&&g!==void 0?g:!1},isDragReady(){return!!Konva$1.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(it){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=it}},_registerNode=it=>{Konva$1[it.prototype.getClassName()]=it};Konva$1._injectGlobal(Konva$1);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const et=this.m;return{x:et[0]*g.x+et[2]*g.y+et[4],y:et[1]*g.x+et[3]*g.y+et[5]}}translate(g,et){return this.m[4]+=this.m[0]*g+this.m[2]*et,this.m[5]+=this.m[1]*g+this.m[3]*et,this}scale(g,et){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=et,this.m[3]*=et,this}rotate(g){const et=Math.cos(g),ot=Math.sin(g),ut=this.m[0]*et+this.m[2]*ot,ct=this.m[1]*et+this.m[3]*ot,dt=this.m[0]*-ot+this.m[2]*et,ft=this.m[1]*-ot+this.m[3]*et;return this.m[0]=ut,this.m[1]=ct,this.m[2]=dt,this.m[3]=ft,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,et){const ot=this.m[0]+this.m[2]*et,ut=this.m[1]+this.m[3]*et,ct=this.m[2]+this.m[0]*g,dt=this.m[3]+this.m[1]*g;return this.m[0]=ot,this.m[1]=ut,this.m[2]=ct,this.m[3]=dt,this}multiply(g){const et=this.m[0]*g.m[0]+this.m[2]*g.m[1],ot=this.m[1]*g.m[0]+this.m[3]*g.m[1],ut=this.m[0]*g.m[2]+this.m[2]*g.m[3],ct=this.m[1]*g.m[2]+this.m[3]*g.m[3],dt=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],ft=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=et,this.m[1]=ot,this.m[2]=ut,this.m[3]=ct,this.m[4]=dt,this.m[5]=ft,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),et=this.m[3]*g,ot=-this.m[1]*g,ut=-this.m[2]*g,ct=this.m[0]*g,dt=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),ft=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=et,this.m[1]=ot,this.m[2]=ut,this.m[3]=ct,this.m[4]=dt,this.m[5]=ft,this}getMatrix(){return this.m}decompose(){const g=this.m[0],et=this.m[1],ot=this.m[2],ut=this.m[3],ct=this.m[4],dt=this.m[5],ft=g*ut-et*ot,St={x:ct,y:dt,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||et!=0){const kt=Math.sqrt(g*g+et*et);St.rotation=et>0?Math.acos(g/kt):-Math.acos(g/kt),St.scaleX=kt,St.scaleY=ft/kt,St.skewX=(g*ot+et*ut)/ft,St.skewY=0}else if(ot!=0||ut!=0){const kt=Math.sqrt(ot*ot+ut*ut);St.rotation=Math.PI/2-(ut>0?Math.acos(-ot/kt):-Math.acos(ot/kt)),St.scaleX=ft/kt,St.scaleY=kt,St.skewX=0,St.skewY=(g*ot+et*ut)/ft}return St.rotation=Util._getRotation(St.rotation),St}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH$1="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[];const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(it){setTimeout(it,60)},Util={_isElement(it){return!!(it&&it.nodeType==1)},_isFunction(it){return!!(it&&it.constructor&&it.call&&it.apply)},_isPlainObject(it){return!!it&&it.constructor===Object},_isArray(it){return Object.prototype.toString.call(it)===OBJECT_ARRAY},_isNumber(it){return Object.prototype.toString.call(it)===OBJECT_NUMBER&&!isNaN(it)&&isFinite(it)},_isString(it){return Object.prototype.toString.call(it)===OBJECT_STRING},_isBoolean(it){return Object.prototype.toString.call(it)===OBJECT_BOOLEAN},isObject(it){return it instanceof Object},isValidSelector(it){if(typeof it!="string")return!1;const g=it[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(it){return it===0||it>0?1:-1},requestAnimFrame(it){animQueue.push(it),animQueue.length===1&&req(function(){const g=animQueue;animQueue=[],g.forEach(function(et){et()})})},createCanvasElement(){ensureBrowser();const it=document.createElement("canvas");try{it.style=it.style||{}}catch{}return it},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(it){for(;it=it.parentNode;)if(it==document)return!0;return!1},_urlToImage(it,g){const et=Util.createImageElement();et.onload=function(){g(et)},et.src=it},_rgbToHex(it,g,et){return((1<<24)+(it<<16)+(g<<8)+et).toString(16).slice(1)},_hexToRgb(it){it=it.replace(HASH$1,EMPTY_STRING$1);const g=parseInt(it,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let it=(Math.random()*16777215<<0).toString(16);for(;it.length<6;)it=ZERO+it;return HASH$1+it},getRGB(it){let g;return it in COLORS?(g=COLORS[it],{r:g[0],g:g[1],b:g[2]}):it[0]===HASH$1?this._hexToRgb(it.substring(1)):it.substr(0,4)===RGB_PAREN?(g=RGB_REGEX.exec(it.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(it){return it=it||"black",Util._namedColorToRBA(it)||Util._hex3ColorToRGBA(it)||Util._hex4ColorToRGBA(it)||Util._hex6ColorToRGBA(it)||Util._hex8ColorToRGBA(it)||Util._rgbColorToRGBA(it)||Util._rgbaColorToRGBA(it)||Util._hslColorToRGBA(it)},_namedColorToRBA(it){const g=COLORS[it.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(it){if(it.indexOf("rgb(")===0){it=it.match(/rgb\(([^)]+)\)/)[1];const g=it.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(it){if(it.indexOf("rgba(")===0){it=it.match(/rgba\(([^)]+)\)/)[1];const g=it.split(/ *, */).map((et,ot)=>et.slice(-1)==="%"?ot===3?parseInt(et)/100:parseInt(et)/100*255:Number(et));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(it){if(it[0]==="#"&&it.length===9)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:parseInt(it.slice(7,9),16)/255}},_hex6ColorToRGBA(it){if(it[0]==="#"&&it.length===7)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:1}},_hex4ColorToRGBA(it){if(it[0]==="#"&&it.length===5)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:parseInt(it[4]+it[4],16)/255}},_hex3ColorToRGBA(it){if(it[0]==="#"&&it.length===4)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:1}},_hslColorToRGBA(it){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(it)){const[g,...et]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(it),ot=Number(et[0])/360,ut=Number(et[1])/100,ct=Number(et[2])/100;let dt,ft,St;if(ut===0)return St=ct*255,{r:Math.round(St),g:Math.round(St),b:Math.round(St),a:1};ct<.5?dt=ct*(1+ut):dt=ct+ut-ct*ut;const kt=2*ct-dt,Tt=[0,0,0];for(let Rt=0;Rt<3;Rt++)ft=ot+1/3*-(Rt-1),ft<0&&ft++,ft>1&&ft--,6*ft<1?St=kt+(dt-kt)*6*ft:2*ft<1?St=dt:3*ft<2?St=kt+(dt-kt)*(2/3-ft)*6:St=kt,Tt[Rt]=St*255;return{r:Math.round(Tt[0]),g:Math.round(Tt[1]),b:Math.round(Tt[2]),a:1}}},haveIntersection(it,g){return!(g.x>it.x+it.width||g.x+g.width<it.x||g.y>it.y+it.height||g.y+g.height<it.y)},cloneObject(it){const g={};for(const et in it)this._isPlainObject(it[et])?g[et]=this.cloneObject(it[et]):this._isArray(it[et])?g[et]=this.cloneArray(it[et]):g[et]=it[et];return g},cloneArray(it){return it.slice(0)},degToRad(it){return it*PI_OVER_DEG180},radToDeg(it){return it*DEG180_OVER_PI},_degToRad(it){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(it)},_radToDeg(it){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(it)},_getRotation(it){return Konva$1.angleDeg?Util.radToDeg(it):it},_capitalize(it){return it.charAt(0).toUpperCase()+it.slice(1)},throw(it){throw new Error(KONVA_ERROR+it)},error(it){console.error(KONVA_ERROR+it)},warn(it){Konva$1.showWarnings&&console.warn(KONVA_WARNING+it)},each(it,g){for(const et in it)g(et,it[et])},_inRange(it,g,et){return g<=it&&it<et},_getProjectionToSegment(it,g,et,ot,ut,ct){let dt,ft,St;const kt=(it-et)*(it-et)+(g-ot)*(g-ot);if(kt==0)dt=it,ft=g,St=(ut-et)*(ut-et)+(ct-ot)*(ct-ot);else{const Tt=((ut-it)*(et-it)+(ct-g)*(ot-g))/kt;Tt<0?(dt=it,ft=g,St=(it-ut)*(it-ut)+(g-ct)*(g-ct)):Tt>1?(dt=et,ft=ot,St=(et-ut)*(et-ut)+(ot-ct)*(ot-ct)):(dt=it+Tt*(et-it),ft=g+Tt*(ot-g),St=(dt-ut)*(dt-ut)+(ft-ct)*(ft-ct))}return[dt,ft,St]},_getProjectionToLine(it,g,et){const ot=Util.cloneObject(it);let ut=Number.MAX_VALUE;return g.forEach(function(ct,dt){if(!et&&dt===g.length-1)return;const ft=g[(dt+1)%g.length],St=Util._getProjectionToSegment(ct.x,ct.y,ft.x,ft.y,it.x,it.y),kt=St[0],Tt=St[1],Rt=St[2];Rt<ut&&(ot.x=kt,ot.y=Tt,ut=Rt)}),ot},_prepareArrayForTween(it,g,et){const ot=[],ut=[];if(it.length>g.length){const dt=g;g=it,it=dt}for(let dt=0;dt<it.length;dt+=2)ot.push({x:it[dt],y:it[dt+1]});for(let dt=0;dt<g.length;dt+=2)ut.push({x:g[dt],y:g[dt+1]});const ct=[];return ut.forEach(function(dt){const ft=Util._getProjectionToLine(dt,ot,et);ct.push(ft.x),ct.push(ft.y)}),ct},_prepareToStringify(it){let g;it.visitedByCircularReferenceRemoval=!0;for(const et in it)if(it.hasOwnProperty(et)&&it[et]&&typeof it[et]=="object"){if(g=Object.getOwnPropertyDescriptor(it,et),it[et].visitedByCircularReferenceRemoval||Util._isElement(it[et]))if(g.configurable)delete it[et];else return null;else if(Util._prepareToStringify(it[et])===null)if(g.configurable)delete it[et];else return null}return delete it.visitedByCircularReferenceRemoval,it},_assign(it,g){for(const et in g)it[et]=g[et];return it},_getFirstPointerId(it){return it.touches?it.changedTouches[0].identifier:it.pointerId||999},releaseCanvas(...it){Konva$1.releaseCanvasOnDestroy&&it.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(it,g,et,ot){let ut=g<0?g:0,ct=et<0?et:0;g=Math.abs(g),et=Math.abs(et);let dt=0,ft=0,St=0,kt=0;typeof ot=="number"?dt=ft=St=kt=Math.min(ot,g/2,et/2):(dt=Math.min(ot[0]||0,g/2,et/2),ft=Math.min(ot[1]||0,g/2,et/2),kt=Math.min(ot[2]||0,g/2,et/2),St=Math.min(ot[3]||0,g/2,et/2)),it.moveTo(ut+dt,ct),it.lineTo(ut+g-ft,ct),it.arc(ut+g-ft,ct+ft,ft,Math.PI*3/2,0,!1),it.lineTo(ut+g,ct+et-kt),it.arc(ut+g-kt,ct+et-kt,kt,0,Math.PI/2,!1),it.lineTo(ut+St,ct+et),it.arc(ut+St,ct+et-St,St,Math.PI/2,Math.PI,!1),it.lineTo(ut,ct+dt),it.arc(ut+dt,ct+dt,dt,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(it,g,et,ot,ut){ot=Math.abs(ot);for(let ct=0;ct<et;ct++){const dt=g[(ct-1+et)%et],ft=g[ct],St=g[(ct+1)%et],kt={x:ft.x-dt.x,y:ft.y-dt.y},Tt={x:St.x-ft.x,y:St.y-ft.y},Rt=Math.hypot(kt.x,kt.y),jt=Math.hypot(Tt.x,Tt.y);let Ft;typeof ut=="number"?Ft=ut:Ft=ct<ut.length?ut[ct]:0,Ft=ot*Math.cos(Math.PI/et)*Math.min(1,Ft/ot*2);const Ht={x:kt.x/Rt,y:kt.y/Rt},Yt={x:Tt.x/jt,y:Tt.y/jt},zt={x:ft.x-Ht.x*Ft,y:ft.y-Ht.y*Ft},Kt={x:ft.x+Yt.x*Ft,y:ft.y+Yt.y*Ft};ct===0?it.moveTo(zt.x,zt.y):it.lineTo(zt.x,zt.y),it.arcTo(ft.x,ft.y,Kt.x,Kt.y,Ft)}}};function simplifyArray(it){const g=[],et=it.length,ot=Util;for(let ut=0;ut<et;ut++){let ct=it[ut];ot._isNumber(ct)?ct=Math.round(ct*1e3)/1e3:ot._isString(ct)||(ct=ct+""),g.push(ct)}return g}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const g=Util.createCanvasElement().getContext("2d");return g?!!g&&"filter"in g:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}class Context{constructor(g){this.canvas=g,Konva$1.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,et){let ot=this.traceArr,ut=ot.length,ct="",dt,ft,St,kt;for(dt=0;dt<ut;dt++)ft=ot[dt],St=ft.method,St?(kt=ft.args,ct+=St,g?ct+=DOUBLE_PAREN:Util._isArray(kt[0])?ct+=OPEN_PAREN_BRACKET+kt.join(COMMA)+CLOSE_BRACKET_PAREN:(et&&(kt=kt.map(Tt=>typeof Tt=="number"?Math.floor(Tt):Tt)),ct+=OPEN_PAREN+kt.join(COMMA)+CLOSE_PAREN)):(ct+=ft.property,g||(ct+=EQUALS+ft.val)),ct+=SEMICOLON;return ct}clearTrace(){this.traceArr=[]}_trace(g){let et=this.traceArr,ot;et.push(g),ot=et.length,ot>=traceArrMax&&et.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const et=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,et.getWidth()/et.pixelRatio,et.getHeight()/et.pixelRatio)}_applyLineCap(g){const et=g.attrs.lineCap;et&&this.setAttr("lineCap",et)}_applyOpacity(g){const et=g.getAbsoluteOpacity();et!==1&&this.setAttr("globalAlpha",et)}_applyLineJoin(g){const et=g.attrs.lineJoin;et&&this.setAttr("lineJoin",et)}_applyMiterLimit(g){const et=g.attrs.miterLimit;et!=null&&this.setAttr("miterLimit",et)}setAttr(g,et){this._context[g]=et}arc(g,et,ot,ut,ct,dt){this._context.arc(g,et,ot,ut,ct,dt)}arcTo(g,et,ot,ut,ct){this._context.arcTo(g,et,ot,ut,ct)}beginPath(){this._context.beginPath()}bezierCurveTo(g,et,ot,ut,ct,dt){this._context.bezierCurveTo(g,et,ot,ut,ct,dt)}clearRect(g,et,ot,ut){this._context.clearRect(g,et,ot,ut)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,et){const ot=arguments;if(ot.length===2)return this._context.createImageData(g,et);if(ot.length===1)return this._context.createImageData(g)}createLinearGradient(g,et,ot,ut){return this._context.createLinearGradient(g,et,ot,ut)}createPattern(g,et){return this._context.createPattern(g,et)}createRadialGradient(g,et,ot,ut,ct,dt){return this._context.createRadialGradient(g,et,ot,ut,ct,dt)}drawImage(g,et,ot,ut,ct,dt,ft,St,kt){const Tt=arguments,Rt=this._context;Tt.length===3?Rt.drawImage(g,et,ot):Tt.length===5?Rt.drawImage(g,et,ot,ut,ct):Tt.length===9&&Rt.drawImage(g,et,ot,ut,ct,dt,ft,St,kt)}ellipse(g,et,ot,ut,ct,dt,ft,St){this._context.ellipse(g,et,ot,ut,ct,dt,ft,St)}isPointInPath(g,et,ot,ut){return ot?this._context.isPointInPath(ot,g,et,ut):this._context.isPointInPath(g,et,ut)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,et,ot,ut){this._context.fillRect(g,et,ot,ut)}strokeRect(g,et,ot,ut){this._context.strokeRect(g,et,ot,ut)}fillText(g,et,ot,ut){ut?this._context.fillText(g,et,ot,ut):this._context.fillText(g,et,ot)}measureText(g){return this._context.measureText(g)}getImageData(g,et,ot,ut){return this._context.getImageData(g,et,ot,ut)}lineTo(g,et){this._context.lineTo(g,et)}moveTo(g,et){this._context.moveTo(g,et)}rect(g,et,ot,ut){this._context.rect(g,et,ot,ut)}roundRect(g,et,ot,ut,ct){this._context.roundRect(g,et,ot,ut,ct)}putImageData(g,et,ot){this._context.putImageData(g,et,ot)}quadraticCurveTo(g,et,ot,ut){this._context.quadraticCurveTo(g,et,ot,ut)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,et){this._context.scale(g,et)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,et,ot,ut,ct,dt){this._context.setTransform(g,et,ot,ut,ct,dt)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,et,ot,ut){this._context.strokeText(g,et,ot,ut)}transform(g,et,ot,ut,ct,dt){this._context.transform(g,et,ot,ut,ct,dt)}translate(g,et){this._context.translate(g,et)}_enableTrace(){let g=this,et=CONTEXT_METHODS.length,ot=this.setAttr,ut,ct;const dt=function(ft){let St=g[ft],kt;g[ft]=function(){return ct=simplifyArray(Array.prototype.slice.call(arguments,0)),kt=St.apply(g,arguments),g._trace({method:ft,args:ct}),kt}};for(ut=0;ut<et;ut++)dt(CONTEXT_METHODS[ut]);g.setAttr=function(){ot.apply(g,arguments);const ft=arguments[0];let St=arguments[1];(ft==="shadowOffsetX"||ft==="shadowOffsetY"||ft==="shadowBlur")&&(St=St/this.canvas.getPixelRatio()),g._trace({property:ft,val:St})}}_applyGlobalCompositeOperation(g){const et=g.attrs.globalCompositeOperation;!et||et==="source-over"||this.setAttr("globalCompositeOperation",et)}}CONTEXT_PROPERTIES.forEach(function(it){Object.defineProperty(Context.prototype,it,{get(){return this._context[it]},set(g){this._context[it]=g}})});class SceneContext extends Context{constructor(g,{willReadFrequently:et=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:et})}_fillColor(g){const et=g.fill();this.setAttr("fillStyle",et),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const et=g._getLinearGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fillRadialGradient(g){const et=g._getRadialGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fill(g){const et=g.fill(),ot=g.getFillPriority();if(et&&ot==="color"){this._fillColor(g);return}const ut=g.getFillPatternImage();if(ut&&ot==="pattern"){this._fillPattern(g);return}const ct=g.getFillLinearGradientColorStops();if(ct&&ot==="linear-gradient"){this._fillLinearGradient(g);return}const dt=g.getFillRadialGradientColorStops();if(dt&&ot==="radial-gradient"){this._fillRadialGradient(g);return}et?this._fillColor(g):ut?this._fillPattern(g):ct?this._fillLinearGradient(g):dt&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const et=g.getStrokeLinearGradientStartPoint(),ot=g.getStrokeLinearGradientEndPoint(),ut=g.getStrokeLinearGradientColorStops(),ct=this.createLinearGradient(et.x,et.y,ot.x,ot.y);if(ut){for(let dt=0;dt<ut.length;dt+=2)ct.addColorStop(ut[dt],ut[dt+1]);this.setAttr("strokeStyle",ct)}}_stroke(g){const et=g.dash(),ot=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!ot){this.save();const ct=this.getCanvas().getPixelRatio();this.setTransform(ct,0,0,ct,0,0)}this._applyLineCap(g),et&&g.dashEnabled()&&(this.setLineDash(et),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),ot||this.restore()}}_applyShadow(g){var et,ot,ut;const ct=(et=g.getShadowRGBA())!==null&&et!==void 0?et:"black",dt=(ot=g.getShadowBlur())!==null&&ot!==void 0?ot:5,ft=(ut=g.getShadowOffset())!==null&&ut!==void 0?ut:{x:0,y:0},St=g.getAbsoluteScale(),kt=this.canvas.getPixelRatio(),Tt=St.x*kt,Rt=St.y*kt;this.setAttr("shadowColor",ct),this.setAttr("shadowBlur",dt*Math.min(Math.abs(Tt),Math.abs(Rt))),this.setAttr("shadowOffsetX",ft.x*Tt),this.setAttr("shadowOffsetY",ft.y*Rt)}}class HitContext extends Context{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const et=g.getStrokeScaleEnabled();if(!et){this.save();const ct=this.getCanvas().getPixelRatio();this.setTransform(ct,0,0,ct,0,0)}this._applyLineCap(g);const ot=g.hitStrokeWidth(),ut=ot==="auto"?g.strokeWidth():ot;this.setAttr("lineWidth",ut),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),et||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const it=Util.createCanvasElement(),g=it.getContext("2d");return _pixelRatio=function(){const et=Konva$1._global.devicePixelRatio||1,ot=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return et/ot}(),Util.releaseCanvas(it),_pixelRatio}class Canvas{constructor(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const ot=(g||{}).pixelRatio||Konva$1.pixelRatio||getDevicePixelRatio();this.pixelRatio=ot,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(g){const et=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/et,this.getHeight()/et)}setWidth(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}setHeight(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}getWidth(){return this.width}getHeight(){return this.height}setSize(g,et){this.setWidth(g||0),this.setHeight(et||0)}toDataURL(g,et){try{return this._canvas.toDataURL(g,et)}catch{try{return this._canvas.toDataURL()}catch(ut){return Util.error("Unable to get data URL. "+ut.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(g={width:0,height:0,willReadFrequently:!1}){super(g),this.context=new SceneContext(this,{willReadFrequently:g.willReadFrequently}),this.setSize(g.width,g.height)}}function isCanvasFarblingActive(){const it=Util.createCanvasElement();it.width=1,it.height=1;const g=it.getContext("2d",{willReadFrequently:!0});g.clearRect(0,0,1,1),g.fillStyle="rgba(255,0,255,1)",g.fillRect(0,0,1,1);const et=g.getImageData(0,0,1,1).data;return!(et[0]===255&&et[1]===0&&et[2]===255&&et[3]===255)}function isBraveBrowser(){var it,g;return typeof navigator>"u"?!1:(g=(it=navigator.brave)===null||it===void 0?void 0:it.isBrave())!==null&&g!==void 0?g:!1}let warned=!1;function checkHitCanvasSupport(){return isBraveBrowser()&&isCanvasFarblingActive()&&!warned&&(warned=!0,Util.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),isBraveBrowser()&&isCanvasFarblingActive()}class HitCanvas extends Canvas{constructor(g={width:0,height:0}){super(g),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(g.width,g.height),checkHitCanvasSupport()}}const DD={get isDragging(){let it=!1;return DD._dragElements.forEach(g=>{g.dragStatus==="dragging"&&(it=!0)}),it},justDragged:!1,get node(){let it;return DD._dragElements.forEach(g=>{it=g.node}),it},_dragElements:new Map,_drag(it){const g=[];DD._dragElements.forEach((et,ot)=>{const{node:ut}=et,ct=ut.getStage();ct.setPointersPositions(it),et.pointerId===void 0&&(et.pointerId=Util._getFirstPointerId(it));const dt=ct._changedPointerPositions.find(ft=>ft.id===et.pointerId);if(dt){if(et.dragStatus!=="dragging"){const ft=ut.dragDistance();if(Math.max(Math.abs(dt.x-et.startPointerPos.x),Math.abs(dt.y-et.startPointerPos.y))<ft||(ut.startDrag({evt:it}),!ut.isDragging()))return}ut._setDragPosition(it,et),g.push(ut)}}),g.forEach(et=>{et.fire("dragmove",{type:"dragmove",target:et,evt:it},!0)})},_endDragBefore(it){const g=[];DD._dragElements.forEach(et=>{const{node:ot}=et,ut=ot.getStage();if(it&&ut.setPointersPositions(it),!ut._changedPointerPositions.find(ft=>ft.id===et.pointerId))return;(et.dragStatus==="dragging"||et.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$1._mouseListenClick=!1,Konva$1._touchListenClick=!1,Konva$1._pointerListenClick=!1,et.dragStatus="stopped");const dt=et.node.getLayer()||et.node instanceof Konva$1.Stage&&et.node;dt&&g.indexOf(dt)===-1&&g.push(dt)}),g.forEach(et=>{et.draw()})},_endDragAfter(it){DD._dragElements.forEach((g,et)=>{g.dragStatus==="stopped"&&g.node.fire("dragend",{type:"dragend",target:g.node,evt:it},!0),g.dragStatus!=="dragging"&&DD._dragElements.delete(et)})}};Konva$1.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(it){return Util._isString(it)?'"'+it+'"':Object.prototype.toString.call(it)==="[object Number]"||Util._isBoolean(it)?it:Object.prototype.toString.call(it)}function RGBComponent(it){return it>255?255:it<0?0:Math.round(it)}function getNumberValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number.'),it}}function getNumberOrArrayOfNumbersValidator(it){if(Konva$1.isUnminified)return function(g,et){let ot=Util._isNumber(g),ut=Util._isArray(g)&&g.length==it;return!ot&&!ut&&Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be a number or Array<number>('+it+")"),g}}function getNumberOrAutoValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||it==="auto"||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number or "auto".'),it}}function getStringValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isString(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string.'),it}}function getStringOrGradientValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Util._isString(it),ot=Object.prototype.toString.call(it)==="[object CanvasGradient]"||it&&it.addColorStop;return et||ot||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string or a native gradient.'),it}}function getNumberArrayValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Int8Array?Object.getPrototypeOf(Int8Array):null;return et&&it instanceof et||(Util._isArray(it)?it.forEach(function(ot){Util._isNumber(ot)||Util.warn('"'+g+'" attribute has non numeric element '+ot+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a array of numbers.')),it}}function getBooleanValidator(){if(Konva$1.isUnminified)return function(it,g){return it===!0||it===!1||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a boolean.'),it}}function getComponentValidator(it){if(Konva$1.isUnminified)return function(g,et){return g==null||Util.isObject(g)||Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be an object with properties '+it),g}}const GET="get",SET$1="set",Factory={addGetterSetter(it,g,et,ot,ut){Factory.addGetter(it,g,et),Factory.addSetter(it,g,ot,ut),Factory.addOverloadedGetterSetter(it,g)},addGetter(it,g,et){const ot=GET+Util._capitalize(g);it.prototype[ot]=it.prototype[ot]||function(){const ut=this.attrs[g];return ut===void 0?et:ut}},addSetter(it,g,et,ot){const ut=SET$1+Util._capitalize(g);it.prototype[ut]||Factory.overWriteSetter(it,g,et,ot)},overWriteSetter(it,g,et,ot){const ut=SET$1+Util._capitalize(g);it.prototype[ut]=function(ct){return et&&ct!==void 0&&ct!==null&&(ct=et.call(this,ct,g)),this._setAttr(g,ct),ot&&ot.call(this),this}},addComponentsGetterSetter(it,g,et,ot,ut){const ct=et.length,dt=Util._capitalize,ft=GET+dt(g),St=SET$1+dt(g);it.prototype[ft]=function(){const Tt={};for(let Rt=0;Rt<ct;Rt++){const jt=et[Rt];Tt[jt]=this.getAttr(g+dt(jt))}return Tt};const kt=getComponentValidator(et);it.prototype[St]=function(Tt){const Rt=this.attrs[g];ot&&(Tt=ot.call(this,Tt,g)),kt&&kt.call(this,Tt,g);for(const jt in Tt)Tt.hasOwnProperty(jt)&&this._setAttr(g+dt(jt),Tt[jt]);return Tt||et.forEach(jt=>{this._setAttr(g+dt(jt),void 0)}),this._fireChangeEvent(g,Rt,Tt),ut&&ut.call(this),this},Factory.addOverloadedGetterSetter(it,g)},addOverloadedGetterSetter(it,g){const et=Util._capitalize(g),ot=SET$1+et,ut=GET+et;it.prototype[g]=function(){return arguments.length?(this[ot](arguments[0]),this):this[ut]()}},addDeprecatedGetterSetter(it,g,et,ot){Util.error("Adding deprecated "+g);const ut=GET+Util._capitalize(g),ct=g+" property is deprecated and will be removed soon. Look at Konva change log for more information.";it.prototype[ut]=function(){Util.error(ct);const dt=this.attrs[g];return dt===void 0?et:dt},Factory.addSetter(it,g,ot,function(){Util.error(ct)}),Factory.addOverloadedGetterSetter(it,g)},backCompat(it,g){Util.each(g,function(et,ot){const ut=it.prototype[ot],ct=GET+Util._capitalize(et),dt=SET$1+Util._capitalize(et);function ft(){ut.apply(this,arguments),Util.error('"'+et+'" method is deprecated and will be removed soon. Use ""'+ot+'" instead.')}it.prototype[et]=ft,it.prototype[ct]=ft,it.prototype[dt]=ft})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(it){const g=/(\w+)\(([^)]+)\)/g;let et;for(;(et=g.exec(it))!==null;){const[,ot,ut]=et;switch(ot){case"blur":{const ct=parseFloat(ut.replace("px",""));return function(dt){this.blurRadius(ct*.5);const ft=Konva$1.Filters;ft&&ft.Blur&&ft.Blur.call(this,dt)}}case"brightness":{const ct=ut.includes("%")?parseFloat(ut)/100:parseFloat(ut);return function(dt){this.brightness(ct);const ft=Konva$1.Filters;ft&&ft.Brightness&&ft.Brightness.call(this,dt)}}case"contrast":{const ct=parseFloat(ut);return function(dt){const ft=100*(Math.sqrt(ct)-1);this.contrast(ft);const St=Konva$1.Filters;St&&St.Contrast&&St.Contrast.call(this,dt)}}case"grayscale":return function(ct){const dt=Konva$1.Filters;dt&&dt.Grayscale&&dt.Grayscale.call(this,ct)};case"sepia":return function(ct){const dt=Konva$1.Filters;dt&&dt.Sepia&&dt.Sepia.call(this,ct)};case"invert":return function(ct){const dt=Konva$1.Filters;dt&&dt.Invert&&dt.Invert.call(this,ct)};default:Util.warn(`CSS filter "${ot}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class cP{constructor(g){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(g),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(g){(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&this._cache.get(g)?this._cache.get(g).dirty=!0:g?this._cache.delete(g):this._cache.clear()}_getCache(g,et){let ot=this._cache.get(g);return(ot===void 0||(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&ot.dirty===!0)&&(ot=et.call(this),this._cache.set(g,ot)),ot}_calculate(g,et,ot){if(!this._attachedDepsListeners.get(g)){const ut=et.map(ct=>ct+"Change.konva").join(SPACE$1);this.on(ut,()=>{this._clearCache(g)}),this._attachedDepsListeners.set(g,!0)}return this._getCache(g,ot)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(g){this._clearCache(g),g===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:g,filter:et,hit:ot,buffer:ut}=this._cache.get(CANVAS);Util.releaseCanvas(g,et,ot,ut),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(g){const et=g||{};let ot={};(et.x===void 0||et.y===void 0||et.width===void 0||et.height===void 0)&&(ot=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let ut=Math.ceil(et.width||ot.width),ct=Math.ceil(et.height||ot.height),dt=et.pixelRatio,ft=et.x===void 0?Math.floor(ot.x):et.x,St=et.y===void 0?Math.floor(ot.y):et.y,kt=et.offset||0,Tt=et.drawBorder||!1,Rt=et.hitCanvasPixelRatio||1;if(!ut||!ct){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const jt=Math.abs(Math.round(ot.x)-ft)>.5?1:0,Ft=Math.abs(Math.round(ot.y)-St)>.5?1:0;ut+=kt*2+jt,ct+=kt*2+Ft,ft-=kt,St-=kt;const Bt=new SceneCanvas({pixelRatio:dt,width:ut,height:ct}),Ht=new SceneCanvas({pixelRatio:dt,width:0,height:0,willReadFrequently:!0}),Yt=new HitCanvas({pixelRatio:Rt,width:ut,height:ct}),zt=Bt.getContext(),Kt=Yt.getContext(),en=new SceneCanvas({width:Bt.width/Bt.pixelRatio+Math.abs(ft),height:Bt.height/Bt.pixelRatio+Math.abs(St),pixelRatio:Bt.pixelRatio}),tn=en.getContext();return Yt.isCache=!0,Bt.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,et.imageSmoothingEnabled===!1&&(Bt.getContext()._context.imageSmoothingEnabled=!1,Ht.getContext()._context.imageSmoothingEnabled=!1),zt.save(),Kt.save(),tn.save(),zt.translate(-ft,-St),Kt.translate(-ft,-St),tn.translate(-ft,-St),en.x=ft,en.y=St,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(Bt,this,en),this.drawHit(Yt,this),this._isUnderCache=!1,zt.restore(),Kt.restore(),Tt&&(zt.save(),zt.beginPath(),zt.rect(0,0,ut,ct),zt.closePath(),zt.setAttr("strokeStyle","red"),zt.setAttr("lineWidth",5),zt.stroke(),zt.restore()),this._cache.set(CANVAS,{scene:Bt,filter:Ht,hit:Yt,buffer:en,x:ft,y:St}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(g){throw new Error('abstract "getClientRect" method call')}_transformedRect(g,et){const ot=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}];let ut=1/0,ct=1/0,dt=-1/0,ft=-1/0;const St=this.getAbsoluteTransform(et);return ot.forEach(function(kt){const Tt=St.point(kt);ut===void 0&&(ut=dt=Tt.x,ct=ft=Tt.y),ut=Math.min(ut,Tt.x),ct=Math.min(ct,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),{x:ut,y:ct,width:dt-ut,height:ft-ct}}_drawCachedSceneCanvas(g){g.save(),g._applyOpacity(this),g._applyGlobalCompositeOperation(this);const et=this._getCanvasCache();g.translate(et.x,et.y);const ot=this._getCachedSceneCanvas(),ut=ot.pixelRatio;g.drawImage(ot._canvas,0,0,ot.width/ut,ot.height/ut),g.restore()}_drawCachedHitCanvas(g){const et=this._getCanvasCache(),ot=et.hit;g.save(),g.translate(et.x,et.y),g.drawImage(ot._canvas,0,0,ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),g.restore()}_getCachedSceneCanvas(){let g=this.filters(),et=this._getCanvasCache(),ot=et.scene,ut=et.filter,ct=ut.getContext(),dt,ft,St,kt;if(!g||g.length===0)return ot;if(this._filterUpToDate)return ut;let Tt=!0;for(let jt=0;jt<g.length;jt++)if(typeof g[jt]=="string"&&isCSSFiltersSupported(),typeof g[jt]!="string"||!isCSSFiltersSupported()){Tt=!1;break}const Rt=ot.pixelRatio;if(ut.setSize(ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),Tt){const jt=g.join(" ");return ct.save(),ct.setAttr("filter",jt),ct.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ct.restore(),this._filterUpToDate=!0,ut}try{for(dt=g.length,ct.clear(),ct.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ft=ct.getImageData(0,0,ut.getWidth(),ut.getHeight()),St=0;St<dt;St++)kt=g[St],typeof kt=="string"&&(kt=parseCSSFilters(kt)),kt.call(this,ft),ct.putImageData(ft,0,0)}catch(jt){Util.error("Unable to apply filter. "+jt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,ut}on(g,et){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const ot=g.split(SPACE$1);for(let ut=0;ut<ot.length;ut++){const dt=ot[ut].split("."),ft=dt[0],St=dt[1]||"";this.eventListeners[ft]||(this.eventListeners[ft]=[]),this.eventListeners[ft].push({name:St,handler:et})}return this}off(g,et){let ot=(g||"").split(SPACE$1),ut=ot.length,ct,dt,ft,St,kt,Tt;if(this._cache&&this._cache.delete(ALL_LISTENERS),!g)for(dt in this.eventListeners)this._off(dt);for(ct=0;ct<ut;ct++)if(ft=ot[ct],St=ft.split("."),kt=St[0],Tt=St[1],kt)this.eventListeners[kt]&&this._off(kt,Tt,et);else for(dt in this.eventListeners)this._off(dt,Tt,et);return this}dispatchEvent(g){const et={target:this,type:g.type,evt:g};return this.fire(g.type,et),this}addEventListener(g,et){return this.on(g,function(ot){et.call(this,ot.evt)}),this}removeEventListener(g){return this.off(g),this}_delegate(g,et,ot){const ut=this;this.on(g,function(ct){const dt=ct.target.findAncestors(et,!0,ut);for(let ft=0;ft<dt.length;ft++)ct=Util.cloneObject(ct),ct.currentTarget=dt[ft],ot.call(dt[ft],ct)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const g=this.getParent();g&&g.children&&(g.children.splice(this.index,1),g._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(g){const et="get"+Util._capitalize(g);return Util._isFunction(this[et])?this[et]():this.attrs[g]}getAncestors(){let g=this.getParent(),et=[];for(;g;)et.push(g),g=g.getParent();return et}getAttrs(){return this.attrs||{}}setAttrs(g){return this._batchTransformChanges(()=>{let et,ot;if(!g)return this;for(et in g)et!==CHILDREN&&(ot=SET+Util._capitalize(et),Util._isFunction(this[ot])?this[ot](g[et]):this._setAttr(et,g[et]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(g){if(!this.listening())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isListening(g):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(g){if(!this.visible())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isVisible(g):!0}shouldDrawHit(g,et=!1){if(g)return this._isVisible(g)&&this._isListening(g);const ot=this.getLayer();let ut=!1;DD._dragElements.forEach(dt=>{dt.dragStatus==="dragging"&&(dt.node.nodeType==="Stage"||dt.node.getLayer()===ot)&&(ut=!0)});const ct=!et&&!Konva$1.hitOnDragEnabled&&(ut||Konva$1.isTransforming());return this.isListening()&&this.isVisible()&&!ct}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let g=this.getDepth(),et=this,ot=0,ut,ct,dt,ft;function St(Tt){for(ut=[],ct=Tt.length,dt=0;dt<ct;dt++)ft=Tt[dt],ot++,ft.nodeType!==SHAPE&&(ut=ut.concat(ft.getChildren().slice())),ft._id===et._id&&(dt=ct);ut.length>0&&ut[0].getDepth()<=g&&St(ut)}const kt=this.getStage();return et.nodeType!==UPPER_STAGE&&kt&&St(kt.getChildren()),ot}getDepth(){let g=0,et=this.parent;for(;et;)g++,et=et.parent;return g}_batchTransformChanges(g){this._batchingTransformChange=!0,g(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(g){return this._batchTransformChanges(()=>{this.x(g.x),this.y(g.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const g=this.getStage();if(!g)return null;const et=g.getPointerPosition();if(!et)return null;const ot=this.getAbsoluteTransform().copy();return ot.invert(),ot.point(et)}getAbsolutePosition(g){let et=!1,ot=this.parent;for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.parent}et&&!g&&(g=!0);const ut=this.getAbsoluteTransform(g).getMatrix(),ct=new Transform,dt=this.offset();return ct.m=ut.slice(),ct.translate(dt.x,dt.y),ct.getTranslation()}setAbsolutePosition(g){const{x:et,y:ot,...ut}=this._clearTransform();this.attrs.x=et,this.attrs.y=ot,this._clearCache(TRANSFORM);const ct=this._getAbsoluteTransform().copy();return ct.invert(),ct.translate(g.x,g.y),g={x:this.attrs.x+ct.getTranslation().x,y:this.attrs.y+ct.getTranslation().y},this._setTransform(ut),this.setPosition({x:g.x,y:g.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(g){let et;for(et in g)this.attrs[et]=g[et]}_clearTransform(){const g={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,g}move(g){let et=g.x,ot=g.y,ut=this.x(),ct=this.y();return et!==void 0&&(ut+=et),ot!==void 0&&(ct+=ot),this.setPosition({x:ut,y:ct}),this}_eachAncestorReverse(g,et){let ot=[],ut=this.getParent(),ct,dt;if(!(et&&et._id===this._id)){for(ot.unshift(this);ut&&(!et||ut._id!==et._id);)ot.unshift(ut),ut=ut.parent;for(ct=ot.length,dt=0;dt<ct;dt++)g(ot[dt])}}rotate(g){return this.rotation(this.rotation()+g),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.splice(g+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.splice(g-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(g){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(g<0||g>=this.parent.children.length)&&Util.warn("Unexpected value "+g+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const et=this.index;return this.parent.children.splice(et,1),this.parent.children.splice(g,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let g=this.opacity();const et=this.getParent();return et&&!et._isUnderCache&&(g*=et.getAbsoluteOpacity()),g}moveTo(g){return this.getParent()!==g&&(this._remove(),g.add(this)),this}toObject(){let g=this.getAttrs(),et,ot,ut,ct,dt;const ft={attrs:{},className:this.getClassName()};for(et in g)ot=g[et],dt=Util.isObject(ot)&&!Util._isPlainObject(ot)&&!Util._isArray(ot),!dt&&(ut=typeof this[et]=="function"&&this[et],delete g[et],ct=ut?ut.call(this):null,g[et]=ot,ct!==ot&&(ft.attrs[et]=ot));return Util._prepareToStringify(ft)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(g,et,ot){const ut=[];et&&this._isMatch(g)&&ut.push(this);let ct=this.parent;for(;ct;){if(ct===ot)return ut;ct._isMatch(g)&&ut.push(ct),ct=ct.parent}return ut}isAncestorOf(g){return!1}findAncestor(g,et,ot){return this.findAncestors(g,et,ot)[0]}_isMatch(g){if(!g)return!1;if(typeof g=="function")return g(this);let et=g.replace(/ /g,"").split(","),ot=et.length,ut,ct;for(ut=0;ut<ot;ut++)if(ct=et[ut],Util.isValidSelector(ct)||(Util.warn('Selector "'+ct+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),ct.charAt(0)==="#"){if(this.id()===ct.slice(1))return!0}else if(ct.charAt(0)==="."){if(this.hasName(ct.slice(1)))return!0}else if(this.className===ct||this.nodeType===ct)return!0;return!1}getLayer(){const g=this.getParent();return g?g.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const g=this.getParent();return g?g.getStage():null}fire(g,et={},ot){return et.target=et.target||this,ot?this._fireAndBubble(g,et):this._fire(g,et),this}getAbsoluteTransform(g){return g?this._getAbsoluteTransform(g):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(g){let et;if(g)return et=new Transform,this._eachAncestorReverse(function(ot){const ut=ot.transformsEnabled();ut==="all"?et.multiply(ot.getTransform()):ut==="position"&&et.translate(ot.x()-ot.offsetX(),ot.y()-ot.offsetY())},g),et;{et=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(et):et.reset();const ot=this.transformsEnabled();if(ot==="all")et.multiply(this.getTransform());else if(ot==="position"){const ut=this.attrs.x||0,ct=this.attrs.y||0,dt=this.attrs.offsetX||0,ft=this.attrs.offsetY||0;et.translate(ut-dt,ct-ft)}return et.dirty=!1,et}}getAbsoluteScale(g){let et=this;for(;et;)et._isUnderCache&&(g=et),et=et.getParent();const ut=this.getAbsoluteTransform(g).decompose();return{x:ut.scaleX,y:ut.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var g,et;const ot=this._cache.get(TRANSFORM)||new Transform;ot.reset();const ut=this.x(),ct=this.y(),dt=Konva$1.getAngle(this.rotation()),ft=(g=this.attrs.scaleX)!==null&&g!==void 0?g:1,St=(et=this.attrs.scaleY)!==null&&et!==void 0?et:1,kt=this.attrs.skewX||0,Tt=this.attrs.skewY||0,Rt=this.attrs.offsetX||0,jt=this.attrs.offsetY||0;return(ut!==0||ct!==0)&&ot.translate(ut,ct),dt!==0&&ot.rotate(dt),(kt!==0||Tt!==0)&&ot.skew(kt,Tt),(ft!==1||St!==1)&&ot.scale(ft,St),(Rt!==0||jt!==0)&&ot.translate(-1*Rt,-1*jt),ot.dirty=!1,ot}clone(g){let et=Util.cloneObject(this.attrs),ot,ut,ct,dt,ft;for(ot in g)et[ot]=g[ot];const St=new this.constructor(et);for(ot in this.eventListeners)for(ut=this.eventListeners[ot],ct=ut.length,dt=0;dt<ct;dt++)ft=ut[dt],ft.name.indexOf(KONVA)<0&&(St.eventListeners[ot]||(St.eventListeners[ot]=[]),St.eventListeners[ot].push(ft));return St}_toKonvaCanvas(g){g=g||{};const et=this.getClientRect(),ot=this.getStage(),ut=g.x!==void 0?g.x:Math.floor(et.x),ct=g.y!==void 0?g.y:Math.floor(et.y),dt=g.pixelRatio||1,ft=new SceneCanvas({width:g.width||Math.ceil(et.width)||(ot?ot.width():0),height:g.height||Math.ceil(et.height)||(ot?ot.height():0),pixelRatio:dt}),St=ft.getContext(),kt=new SceneCanvas({width:ft.width/ft.pixelRatio+Math.abs(ut),height:ft.height/ft.pixelRatio+Math.abs(ct),pixelRatio:ft.pixelRatio});return g.imageSmoothingEnabled===!1&&(St._context.imageSmoothingEnabled=!1),St.save(),(ut||ct)&&St.translate(-1*ut,-1*ct),this.drawScene(ft,void 0,kt),St.restore(),ft}toCanvas(g){return this._toKonvaCanvas(g)._canvas}toDataURL(g){g=g||{};const et=g.mimeType||null,ot=g.quality||null,ut=this._toKonvaCanvas(g).toDataURL(et,ot);return g.callback&&g.callback(ut),ut}toImage(g){return new Promise((et,ot)=>{try{const ut=g==null?void 0:g.callback;ut&&delete g.callback,Util._urlToImage(this.toDataURL(g),function(ct){et(ct),ut==null||ut(ct)})}catch(ut){ot(ut)}})}toBlob(g){return new Promise((et,ot)=>{try{const ut=g==null?void 0:g.callback;ut&&delete g.callback,this.toCanvas(g).toBlob(ct=>{et(ct),ut==null||ut(ct)},g==null?void 0:g.mimeType,g==null?void 0:g.quality)}catch(ut){ot(ut)}})}setSize(g){return this.width(g.width),this.height(g.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$1.dragDistance}_off(g,et,ot){let ut=this.eventListeners[g],ct,dt,ft;for(ct=0;ct<ut.length;ct++)if(dt=ut[ct].name,ft=ut[ct].handler,(dt!=="konva"||et==="konva")&&(!et||dt===et)&&(!ot||ot===ft)){if(ut.splice(ct,1),ut.length===0){delete this.eventListeners[g];break}ct--}}_fireChangeEvent(g,et,ot){this._fire(g+CHANGE,{oldVal:et,newVal:ot})}addName(g){if(!this.hasName(g)){const et=this.name(),ot=et?et+" "+g:g;this.name(ot)}return this}hasName(g){if(!g)return!1;const et=this.name();return et?(et||"").split(/\s/g).indexOf(g)!==-1:!1}removeName(g){const et=(this.name()||"").split(/\s/g),ot=et.indexOf(g);return ot!==-1&&(et.splice(ot,1),this.name(et.join(" "))),this}setAttr(g,et){const ot=this[SET+Util._capitalize(g)];return Util._isFunction(ot)?ot.call(this,et):this._setAttr(g,et),this}_requestDraw(){if(Konva$1.autoDrawEnabled){const g=this.getLayer()||this.getStage();g==null||g.batchDraw()}}_setAttr(g,et){const ot=this.attrs[g];ot===et&&!Util.isObject(et)||(et==null?delete this.attrs[g]:this.attrs[g]=et,this._shouldFireChangeEvents&&this._fireChangeEvent(g,ot,et),this._requestDraw())}_setComponentAttr(g,et,ot){let ut;ot!==void 0&&(ut=this.attrs[g],ut||(this.attrs[g]=this.getAttr(g)),this.attrs[g][et]=ot,this._fireChangeEvent(g,ut,ot))}_fireAndBubble(g,et,ot){et&&this.nodeType===SHAPE&&(et.target=this);const ut=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(ut.indexOf(g)!==-1&&(ot&&(this===ot||this.isAncestorOf&&this.isAncestorOf(ot))||this.nodeType==="Stage"&&!ot))){this._fire(g,et);const dt=ut.indexOf(g)!==-1&&ot&&ot.isAncestorOf&&ot.isAncestorOf(this)&&!ot.isAncestorOf(this.parent);(et&&!et.cancelBubble||!et)&&this.parent&&this.parent.isListening()&&!dt&&(ot&&ot.parent?this._fireAndBubble.call(this.parent,g,et,ot):this._fireAndBubble.call(this.parent,g,et))}}_getProtoListeners(g){var et,ot,ut;const ct=(et=this._cache.get(ALL_LISTENERS))!==null&&et!==void 0?et:{};let dt=ct==null?void 0:ct[g];if(dt===void 0){dt=[];let ft=Object.getPrototypeOf(this);for(;ft;){const St=(ut=(ot=ft.eventListeners)===null||ot===void 0?void 0:ot[g])!==null&&ut!==void 0?ut:[];dt.push(...St),ft=Object.getPrototypeOf(ft)}ct[g]=dt,this._cache.set(ALL_LISTENERS,ct)}return dt}_fire(g,et){et=et||{},et.currentTarget=this,et.type=g;const ot=this._getProtoListeners(g);if(ot)for(let ct=0;ct<ot.length;ct++)ot[ct].handler.call(this,et);const ut=this.eventListeners[g];if(ut)for(let ct=0;ct<ut.length;ct++)ut[ct].handler.call(this,et)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(g){const et=g?g.pointerId:void 0,ot=this.getStage(),ut=this.getAbsolutePosition();if(!ot)return;const ct=ot._getPointerById(et)||ot._changedPointerPositions[0]||ut;DD._dragElements.set(this._id,{node:this,startPointerPos:ct,offset:{x:ct.x-ut.x,y:ct.y-ut.y},dragStatus:"ready",pointerId:et})}startDrag(g,et=!0){DD._dragElements.has(this._id)||this._createDragElement(g);const ot=DD._dragElements.get(this._id);ot.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:g&&g.evt},et)}_setDragPosition(g,et){const ot=this.getStage()._getPointerById(et.pointerId);if(!ot)return;let ut={x:ot.x-et.offset.x,y:ot.y-et.offset.y};const ct=this.dragBoundFunc();if(ct!==void 0){const dt=ct.call(this,ut,g);dt?ut=dt:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==ut.x||this._lastPos.y!==ut.y)&&(this.setAbsolutePosition(ut),this._requestDraw()),this._lastPos=ut}stopDrag(g){const et=DD._dragElements.get(this._id);et&&(et.dragStatus="stopped"),DD._endDragBefore(g),DD._endDragAfter(g)}setDraggable(g){this._setAttr("draggable",g),this._dragChange()}isDragging(){const g=DD._dragElements.get(this._id);return g?g.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(g){if(!(!(g.evt.button!==void 0)||Konva$1.dragButtons.indexOf(g.evt.button)>=0)||this.isDragging())return;let ut=!1;DD._dragElements.forEach(ct=>{this.isAncestorOf(ct.node)&&(ut=!0)}),ut||this._createDragElement(g)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const et=DD._dragElements.get(this._id),ot=et&&et.dragStatus==="dragging",ut=et&&et.dragStatus==="ready";ot?this.stopDrag():ut&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(g={x:0,y:0}){const et=this.getStage();if(!et)return!1;const ot={x:-g.x,y:-g.y,width:et.width()+2*g.x,height:et.height()+2*g.y};return Util.haveIntersection(ot,this.getClientRect())}static create(g,et){return Util._isString(g)&&(g=JSON.parse(g)),this._createNode(g,et)}static _createNode(g,et){let ot=cP.prototype.getClassName.call(g),ut=g.children,ct,dt,ft;et&&(g.attrs.container=et),Konva$1[ot]||(Util.warn('Can not find a node with class name "'+ot+'". Fallback to "Shape".'),ot="Shape");const St=Konva$1[ot];if(ct=new St(g.attrs),ut)for(dt=ut.length,ft=0;ft<dt;ft++)ct.add(cP._createNode(ut[ft]));return ct}};Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(it){return this._filterUpToDate=!1,it});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(g){const et=this.children||[];return g?et.filter(g):et}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.destroy()}),this.children=[],this._requestDraw(),this}add(...g){if(g.length===0)return this;if(g.length>1){for(let ot=0;ot<g.length;ot++)this.add(g[ot]);return this}const et=g[0];return et.getParent()?(et.moveTo(this),this):(this._validateAdd(et),et.index=this.getChildren().length,et.parent=this,et._clearCaches(),this.getChildren().push(et),this._fire("add",{child:et}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(g){return this._generalFind(g,!1)}findOne(g){const et=this._generalFind(g,!0);return et.length>0?et[0]:void 0}_generalFind(g,et){const ot=[];return this._descendants(ut=>{const ct=ut._isMatch(g);return ct&&ot.push(ut),!!(ct&&et)}),ot}_descendants(g){let et=!1;const ot=this.getChildren();for(const ut of ot){if(et=g(ut),et)return!0;if(ut.hasChildren()&&(et=ut._descendants(g),et))return!0}return!1}toObject(){const g=Node$1.prototype.toObject.call(this);return g.children=[],this.getChildren().forEach(et=>{g.children.push(et.toObject())}),g}isAncestorOf(g){let et=g.getParent();for(;et;){if(et._id===this._id)return!0;et=et.getParent()}return!1}clone(g){const et=Node$1.prototype.clone.call(this,g);return this.getChildren().forEach(function(ot){et.add(ot.clone())}),et}getAllIntersections(g){const et=[];return this.find("Shape").forEach(ot=>{ot.isVisible()&&ot.intersects(g)&&et.push(ot)}),et}_clearSelfAndDescendantCache(g){var et;super._clearSelfAndDescendantCache(g),!this.isCached()&&((et=this.children)===null||et===void 0||et.forEach(function(ot){ot._clearSelfAndDescendantCache(g)}))}_setChildrenIndices(){var g;(g=this.children)===null||g===void 0||g.forEach(function(et,ot){et.index=ot}),this._requestDraw()}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut&&ut.getCanvas(),dt=ct&&ct.getContext(),ft=this._getCanvasCache(),St=ft&&ft.scene,kt=ct&&ct.isCache;if(!this.isVisible()&&!kt)return this;if(St){dt.save();const Tt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5]),this._drawCachedSceneCanvas(dt),dt.restore()}else this._drawChildren("drawScene",ct,et,ot);return this}drawHit(g,et){if(!this.shouldDrawHit(et))return this;const ot=this.getLayer(),ut=g||ot&&ot.hitCanvas,ct=ut&&ut.getContext(),dt=this._getCanvasCache();if(dt&&dt.hit){ct.save();const St=this.getAbsoluteTransform(et).getMatrix();ct.transform(St[0],St[1],St[2],St[3],St[4],St[5]),this._drawCachedHitCanvas(ct),ct.restore()}else this._drawChildren("drawHit",ut,et);return this}_drawChildren(g,et,ot,ut){var ct;const dt=et&&et.getContext(),ft=this.clipWidth(),St=this.clipHeight(),kt=this.clipFunc(),Tt=typeof ft=="number"&&typeof St=="number"||kt,Rt=ot===this;if(Tt){dt.save();const Ft=this.getAbsoluteTransform(ot);let Bt=Ft.getMatrix();dt.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]),dt.beginPath();let Ht;if(kt)Ht=kt.call(this,dt,this);else{const Yt=this.clipX(),zt=this.clipY();dt.rect(Yt||0,zt||0,ft,St)}dt.clip.apply(dt,Ht),Bt=Ft.copy().invert().getMatrix(),dt.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5])}const jt=!Rt&&this.globalCompositeOperation()!=="source-over"&&g==="drawScene";jt&&(dt.save(),dt._applyGlobalCompositeOperation(this)),(ct=this.children)===null||ct===void 0||ct.forEach(function(Ft){Ft[g](et,ot,ut)}),jt&&dt.restore(),Tt&&dt.restore()}getClientRect(g={}){var et;const ot=g.skipTransform,ut=g.relativeTo;let ct,dt,ft,St,kt={x:1/0,y:1/0,width:0,height:0};const Tt=this;(et=this.children)===null||et===void 0||et.forEach(function(Ft){if(!Ft.visible())return;const Bt=Ft.getClientRect({relativeTo:Tt,skipShadow:g.skipShadow,skipStroke:g.skipStroke});Bt.width===0&&Bt.height===0||(ct===void 0?(ct=Bt.x,dt=Bt.y,ft=Bt.x+Bt.width,St=Bt.y+Bt.height):(ct=Math.min(ct,Bt.x),dt=Math.min(dt,Bt.y),ft=Math.max(ft,Bt.x+Bt.width),St=Math.max(St,Bt.y+Bt.height)))});const Rt=this.find("Shape");let jt=!1;for(let Ft=0;Ft<Rt.length;Ft++)if(Rt[Ft]._isVisible(this)){jt=!0;break}return jt&&ct!==void 0?kt={x:ct,y:dt,width:ft-ct,height:St-dt}:kt={x:0,y:0,width:0,height:0},ot?kt:this._transformedRect(kt,ut)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$1._global.PointerEvent!==void 0;function getCapturedShape(it){return Captures.get(it)}function createEvent(it){return{evt:it,pointerId:it.pointerId}}function hasPointerCapture(it,g){return Captures.get(it)===g}function setPointerCapture(it,g){releaseCapture(it),g.getStage()&&(Captures.set(it,g),SUPPORT_POINTER_EVENTS&&g._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(it,g){const et=Captures.get(it);if(!et)return;const ot=et.getStage();ot&&ot.content,Captures.delete(it),SUPPORT_POINTER_EVENTS&&et._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=it=>it.indexOf("pointer")>=0?"pointer":it.indexOf("touch")>=0?"touch":"mouse",getEventsMap=it=>{const g=getEventType(it);if(g==="pointer")return Konva$1.pointerEventsEnabled&&EVENTS_MAP.pointer;if(g==="touch")return EVENTS_MAP.touch;if(g==="mouse")return EVENTS_MAP.mouse};function checkNoClip(it={}){return(it.clipFunc||it.clipWidth||it.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),it}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(g){super(checkNoClip(g)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(g){const et=g.getType()==="Layer",ot=g.getType()==="FastLayer";et||ot||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const g=this.visible()?"":"none";this.content.style.display=g}setContainer(g){if(typeof g===STRING){let et;if(g.charAt(0)==="."){const ot=g.slice(1);g=document.getElementsByClassName(ot)[0]}else g.charAt(0)!=="#"?et=g:et=g.slice(1),g=document.getElementById(et);if(!g)throw"Can not find container in document with id "+et}return this._setAttr("container",g),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),g.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const g=this.children,et=g.length;for(let ot=0;ot<et;ot++)g[ot].clear();return this}clone(g){return g||(g={}),g.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,g)}destroy(){super.destroy();const g=this.content;g&&Util._isInDocument(g)&&this.container().removeChild(g);const et=stages.indexOf(this);return et>-1&&stages.splice(et,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const g=this._pointerPositions[0]||this._changedPointerPositions[0];return g?{x:g.x,y:g.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(g){return this._pointerPositions.find(et=>et.id===g)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(g){g={...g},g.x=g.x||0,g.y=g.y||0,g.width=g.width||this.width(),g.height=g.height||this.height();const et=new SceneCanvas({width:g.width,height:g.height,pixelRatio:g.pixelRatio||1}),ot=et.getContext()._context,ut=this.children;return(g.x||g.y)&&ot.translate(-1*g.x,-1*g.y),ut.forEach(function(ct){if(!ct.isVisible())return;const dt=ct._toKonvaCanvas(g);ot.drawImage(dt._canvas,g.x,g.y,dt.getWidth()/dt.getPixelRatio(),dt.getHeight()/dt.getPixelRatio())}),et}getIntersection(g){if(!g)return null;const et=this.children,ot=et.length,ut=ot-1;for(let ct=ut;ct>=0;ct--){const dt=et[ct].getIntersection(g);if(dt)return dt}return null}_resizeDOM(){const g=this.width(),et=this.height();this.content&&(this.content.style.width=g+PX,this.content.style.height=et+PX),this.bufferCanvas.setSize(g,et),this.bufferHitCanvas.setSize(g,et),this.children.forEach(ot=>{ot.setSize({width:g,height:et}),ot.draw()})}add(g,...et){if(arguments.length>1){for(let ut=0;ut<arguments.length;ut++)this.add(arguments[ut]);return this}super.add(g);const ot=this.children.length;return ot>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+ot+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),g.setSize({width:this.width(),height:this.height()}),g.draw(),Konva$1.isBrowser&&this.content.appendChild(g.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}getLayers(){return this.children}_bindContentEvents(){Konva$1.isBrowser&&EVENTS.forEach(([g,et])=>{this.content.addEventListener(g,ot=>{this[et](ot)},{passive:!1})})}_pointerenter(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerenter,{evt:g,target:this,currentTarget:this})}_pointerover(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerover,{evt:g,target:this,currentTarget:this})}_getTargetShape(g){let et=this[g+"targetShape"];return et&&!et.getStage()&&(et=null),et}_pointerleave(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ut=this._getTargetShape(ot),ct=!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled;ut&&ct?(ut._fireAndBubble(et.pointerout,{evt:g}),ut._fireAndBubble(et.pointerleave,{evt:g}),this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this[ot+"targetShape"]=null):ct&&(this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this._fire(et.pointerout,{evt:g,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);let ut=!1;this._changedPointerPositions.forEach(ct=>{const dt=this.getIntersection(ct);if(DD.justDragged=!1,Konva$1["_"+ot+"ListenClick"]=!0,!dt||!dt.isListening()){this[ot+"ClickStartShape"]=void 0;return}Konva$1.capturePointerEventsEnabled&&dt.setPointerCapture(ct.id),this[ot+"ClickStartShape"]=dt,dt._fireAndBubble(et.pointerdown,{evt:g,pointerId:ct.id}),ut=!0;const ft=g.type.indexOf("touch")>=0;dt.preventDefault()&&g.cancelable&&ft&&g.preventDefault()}),ut||this._fire(et.pointerdown,{evt:g,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;const ut=g.type.indexOf("touch")>=0||g.pointerType==="touch";if(Konva$1.isDragging()&&DD.node.preventDefault()&&g.cancelable&&ut&&g.preventDefault(),this.setPointersPositions(g),!(!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled))return;const dt={};let ft=!1;const St=this._getTargetShape(ot);this._changedPointerPositions.forEach(kt=>{const Tt=getCapturedShape(kt.id)||this.getIntersection(kt),Rt=kt.id,jt={evt:g,pointerId:Rt},Ft=St!==Tt;if(Ft&&St&&(St._fireAndBubble(et.pointerout,{...jt},Tt),St._fireAndBubble(et.pointerleave,{...jt},Tt)),Tt){if(dt[Tt._id])return;dt[Tt._id]=!0}Tt&&Tt.isListening()?(ft=!0,Ft&&(Tt._fireAndBubble(et.pointerover,{...jt},St),Tt._fireAndBubble(et.pointerenter,{...jt},St),this[ot+"targetShape"]=Tt),Tt._fireAndBubble(et.pointermove,{...jt})):St&&(this._fire(et.pointerover,{evt:g,target:this,currentTarget:this,pointerId:Rt}),this[ot+"targetShape"]=null)}),ft||this._fire(et.pointermove,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ut=this[ot+"ClickStartShape"],ct=this[ot+"ClickEndShape"],dt={};let ft=!1;this._changedPointerPositions.forEach(St=>{const kt=getCapturedShape(St.id)||this.getIntersection(St);if(kt){if(kt.releaseCapture(St.id),dt[kt._id])return;dt[kt._id]=!0}const Tt=St.id,Rt={evt:g,pointerId:Tt};let jt=!1;Konva$1["_"+ot+"InDblClickWindow"]?(jt=!0,clearTimeout(this[ot+"DblTimeout"])):DD.justDragged||(Konva$1["_"+ot+"InDblClickWindow"]=!0,clearTimeout(this[ot+"DblTimeout"])),this[ot+"DblTimeout"]=setTimeout(function(){Konva$1["_"+ot+"InDblClickWindow"]=!1},Konva$1.dblClickWindow),kt&&kt.isListening()?(ft=!0,this[ot+"ClickEndShape"]=kt,kt._fireAndBubble(et.pointerup,{...Rt}),Konva$1["_"+ot+"ListenClick"]&&ut&&ut===kt&&(kt._fireAndBubble(et.pointerclick,{...Rt}),jt&&ct&&ct===kt&&kt._fireAndBubble(et.pointerdblclick,{...Rt}))):(this[ot+"ClickEndShape"]=null,ft||(this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ft=!0),Konva$1["_"+ot+"ListenClick"]&&this._fire(et.pointerclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}),jt&&this._fire(et.pointerdblclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}))}),ft||this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$1["_"+ot+"ListenClick"]=!1,g.cancelable&&ot!=="touch"&&ot!=="pointer"&&g.preventDefault()}_contextmenu(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(CONTEXTMENU,{evt:g}):this._fire(CONTEXTMENU,{evt:g,target:this,currentTarget:this})}_wheel(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(WHEEL,{evt:g}):this._fire(WHEEL,{evt:g,target:this,currentTarget:this})}_pointercancel(g){this.setPointersPositions(g);const et=getCapturedShape(g.pointerId)||this.getIntersection(this.getPointerPosition());et&&et._fireAndBubble(POINTERUP,createEvent(g)),releaseCapture(g.pointerId)}_lostpointercapture(g){releaseCapture(g.pointerId)}setPointersPositions(g){const et=this._getContentPosition();let ot=null,ut=null;g=g||window.event,g.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(g.touches,ct=>{this._pointerPositions.push({id:ct.identifier,x:(ct.clientX-et.left)/et.scaleX,y:(ct.clientY-et.top)/et.scaleY})}),Array.prototype.forEach.call(g.changedTouches||g.touches,ct=>{this._changedPointerPositions.push({id:ct.identifier,x:(ct.clientX-et.left)/et.scaleX,y:(ct.clientY-et.top)/et.scaleY})})):(ot=(g.clientX-et.left)/et.scaleX,ut=(g.clientY-et.top)/et.scaleY,this.pointerPos={x:ot,y:ut},this._pointerPositions=[{x:ot,y:ut,id:Util._getFirstPointerId(g)}],this._changedPointerPositions=[{x:ot,y:ut,id:Util._getFirstPointerId(g)}])}_setPointerPosition(g){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(g)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const g=this.content.getBoundingClientRect();return{top:g.top,left:g.left,scaleX:g.width/this.content.clientWidth||1,scaleY:g.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$1.isBrowser)return;const g=this.container();if(!g)throw"Stage has no container. A container is required.";g.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),g.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(g){g.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$1.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(it=>{it.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFunc$2(it){it.stroke()}function _fillFuncHit(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFuncHit(it){it.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(g){super(g);let et;for(;et=Util.getRandomColor(),!(et&&!(et in shapes)););this.colorKey=et,shapes[et]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const et=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(et&&et.setTransform){const ot=new Transform;ot.translate(this.fillPatternX(),this.fillPatternY()),ot.rotate(Konva$1.getAngle(this.fillPatternRotation())),ot.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),ot.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ut=ot.getMatrix(),ct=typeof DOMMatrix>"u"?{a:ut[0],b:ut[1],c:ut[2],d:ut[3],e:ut[4],f:ut[5]}:new DOMMatrix(ut);et.setTransform(ct)}return et}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const g=this.fillLinearGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillLinearGradientStartPoint(),ut=this.fillLinearGradientEndPoint(),ct=et.createLinearGradient(ot.x,ot.y,ut.x,ut.y);for(let dt=0;dt<g.length;dt+=2)ct.addColorStop(g[dt],g[dt+1]);return ct}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const g=this.fillRadialGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillRadialGradientStartPoint(),ut=this.fillRadialGradientEndPoint(),ct=et.createRadialGradient(ot.x,ot.y,this.fillRadialGradientStartRadius(),ut.x,ut.y,this.fillRadialGradientEndRadius());for(let dt=0;dt<g.length;dt+=2)ct.addColorStop(g[dt],g[dt+1]);return ct}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const g=Util.colorToRGBA(this.shadowColor());if(g)return"rgba("+g.r+","+g.g+","+g.b+","+g.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const g=this.hitStrokeWidth();return g==="auto"?this.hasStroke():this.strokeEnabled()&&!!g}intersects(g){const et=this.getStage();if(!et)return!1;const ot=et.bufferHitCanvas;return ot.getContext().clear(),this.drawHit(ot,void 0,!0),ot.context.getImageData(Math.round(g.x),Math.round(g.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(g){var et;if(!((et=this.attrs.perfectDrawEnabled)!==null&&et!==void 0?et:!0))return!1;const ut=g||this.hasFill(),ct=this.hasStroke(),dt=this.getAbsoluteOpacity()!==1;if(ut&&ct&&dt)return!0;const ft=this.hasShadow(),St=this.shadowForStrokeEnabled();return!!(ut&&ct&&ft&&St)}setStrokeHitEnabled(g){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),g?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const g=this.size();return{x:this._centroid?-g.width/2:0,y:this._centroid?-g.height/2:0,width:g.width,height:g.height}}getClientRect(g={}){let et=!1,ot=this.getParent();for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.getParent()}const ut=g.skipTransform,ct=g.relativeTo||et&&this.getStage()||void 0,dt=this.getSelfRect(),St=!g.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,kt=dt.width+St,Tt=dt.height+St,Rt=!g.skipShadow&&this.hasShadow(),jt=Rt?this.shadowOffsetX():0,Ft=Rt?this.shadowOffsetY():0,Bt=kt+Math.abs(jt),Ht=Tt+Math.abs(Ft),Yt=Rt&&this.shadowBlur()||0,zt=Bt+Yt*2,Kt=Ht+Yt*2,en={width:zt,height:Kt,x:-(St/2+Yt)+Math.min(jt,0)+dt.x,y:-(St/2+Yt)+Math.min(Ft,0)+dt.y};return ut?en:this._transformedRect(en,ct)}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut.getCanvas(),dt=ct.getContext(),ft=this._getCanvasCache(),St=this.getSceneFunc(),kt=this.hasShadow();let Tt;const Rt=!1,jt=et===this;if(!this.isVisible()&&!jt)return this;if(ft){dt.save();const Ft=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),this._drawCachedSceneCanvas(dt),dt.restore(),this}if(!St)return this;if(dt.save(),this._useBufferCanvas()&&!Rt){Tt=this.getStage();const Ft=ot||Tt.bufferCanvas,Bt=Ft.getContext();Bt.clear(),Bt.save(),Bt._applyLineJoin(this),Bt._applyMiterLimit(this);const Ht=this.getAbsoluteTransform(et).getMatrix();Bt.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5]),St.call(this,Bt,this),Bt.restore();const Yt=Ft.pixelRatio;kt&&dt._applyShadow(this),jt||(dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)),dt.drawImage(Ft._canvas,Ft.x||0,Ft.y||0,Ft.width/Yt,Ft.height/Yt)}else{if(dt._applyLineJoin(this),dt._applyMiterLimit(this),!jt){const Ft=this.getAbsoluteTransform(et).getMatrix();dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)}kt&&dt._applyShadow(this),St.call(this,dt,this)}return dt.restore(),this}drawHit(g,et,ot=!1){if(!this.shouldDrawHit(et,ot))return this;const ut=this.getLayer(),ct=g||ut.hitCanvas,dt=ct&&ct.getContext(),ft=this.hitFunc()||this.sceneFunc(),St=this._getCanvasCache(),kt=St&&St.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),kt){dt.save();const Rt=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]),this._drawCachedHitCanvas(dt),dt.restore(),this}if(!ft)return this;if(dt.save(),dt._applyLineJoin(this),dt._applyMiterLimit(this),!(this===et)){const Rt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5])}return ft.call(this,dt,this),dt.restore(),this}drawHitFromCache(g=0){const et=this._getCanvasCache(),ot=this._getCachedSceneCanvas(),ut=et.hit,ct=ut.getContext(),dt=ut.getWidth(),ft=ut.getHeight();ct.clear(),ct.drawImage(ot._canvas,0,0,dt,ft);try{const St=ct.getImageData(0,0,dt,ft),kt=St.data,Tt=kt.length,Rt=Util._hexToRgb(this.colorKey);for(let jt=0;jt<Tt;jt+=4)kt[jt+3]>g?(kt[jt]=Rt.r,kt[jt+1]=Rt.g,kt[jt+2]=Rt.b,kt[jt+3]=255):kt[jt+3]=0;ct.putImageData(St,0,0)}catch(St){Util.error("Unable to draw hit graph from cached scene canvas. "+St.message)}return this}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(g){super(g),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(g){return this.getContext().clear(g),this.getHitCanvas().getContext().clear(g),this}setZIndex(g){super.setZIndex(g);const et=this.getStage();return et&&et.content&&(et.content.removeChild(this.getNativeCanvasElement()),g<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[g+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const et=this.getStage();return!et||!et.content?!1:(et.content.removeChild(this.getNativeCanvasElement()),this.index<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[this.index+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const g=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),g&&g.parentNode&&Util._isInDocument(g)&&g.parentNode.removeChild(g),this}getStage(){return this.parent}setSize({width:g,height:et}){return this.canvas.setSize(g,et),this.hitCanvas.setSize(g,et),this._setSmoothEnabled(),this}_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(g){return g={...g},g.width=g.width||this.getWidth(),g.height=g.height||this.getHeight(),g.x=g.x!==void 0?g.x:this.x(),g.y=g.y!==void 0?g.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,g)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(g){if(!this.isListening()||!this.isVisible())return null;let et=1,ot=!1;for(;;){for(let ut=0;ut<INTERSECTION_OFFSETS_LEN;ut++){const ct=INTERSECTION_OFFSETS[ut],dt=this._getIntersection({x:g.x+ct.x*et,y:g.y+ct.y*et}),ft=dt.shape;if(ft)return ft;if(ot=!!dt.antialiased,!dt.antialiased)break}if(ot)et+=1;else return null}}_getIntersection(g){const et=this.hitCanvas.pixelRatio,ot=this.hitCanvas.context.getImageData(Math.round(g.x*et),Math.round(g.y*et),1,1).data,ut=ot[3];if(ut===255){const ct=Util._rgbToHex(ot[0],ot[1],ot[2]),dt=shapes[HASH+ct];return dt?{shape:dt}:{antialiased:!0}}else if(ut>0)return{antialiased:!0};return{}}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut&&ut.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&ct.getContext().clear(),Container.prototype.drawScene.call(this,ct,et,ot),this._fire(DRAW,{node:this}),this}drawHit(g,et){const ot=this.getLayer(),ut=g||ot&&ot.hitCanvas;return ot&&ot.clearBeforeDraw()&&ot.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,ut,et),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(g){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(g)}getHitGraphEnabled(g){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const g=this.parent;!!this.hitCanvas._canvas.parentNode?g.content.removeChild(this.hitCanvas._canvas):g.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(g){super(g),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);class Group extends Container{_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}}Group.prototype.nodeType="Group";_registerNode(Group);const now=function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}}();class Animation{constructor(g,et){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=g,this.setLayers(et)}setLayers(g){let et=[];return g&&(et=Array.isArray(g)?g:[g]),this.layers=et,this}getLayers(){return this.layers}addLayer(g){const et=this.layers,ot=et.length;for(let ut=0;ut<ot;ut++)if(et[ut]._id===g._id)return!1;return this.layers.push(g),!0}isRunning(){const et=Animation.animations,ot=et.length;for(let ut=0;ut<ot;ut++)if(et[ut].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(g){this.frame.timeDiff=g-this.frame.lastTime,this.frame.lastTime=g,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(g){this.animations.push(g),this._handleAnimation()}static _removeAnimation(g){const et=g.id,ot=this.animations,ut=ot.length;for(let ct=0;ct<ut;ct++)if(ot[ct].id===et){this.animations.splice(ct,1);break}}static _runFrames(){const g={},et=this.animations;for(let ot=0;ot<et.length;ot++){const ut=et[ot],ct=ut.layers,dt=ut.func;ut._updateFrameObject(now());const ft=ct.length;let St;if(dt?St=dt.call(ut,ut.frame)!==!1:St=!0,!!St)for(let kt=0;kt<ft;kt++){const Tt=ct[kt];Tt._id!==void 0&&(g[Tt._id]=Tt)}}for(const ot in g)g.hasOwnProperty(ot)&&g[ot].batchDraw()}static _animationLoop(){const g=Animation;g.animations.length?(g._runFrames(),Util.requestAnimFrame(g._animationLoop)):g.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(g,et,ot,ut,ct,dt,ft){this.prop=g,this.propFunc=et,this.begin=ut,this._pos=ut,this.duration=dt,this._change=0,this.prevPos=0,this.yoyo=ft,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=ot,this._change=ct-this.begin,this.pause()}fire(g){const et=this[g];et&&et()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(g):this.state===REVERSING&&this.setTime(this.duration-g)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(g){const et=this,ot=g.node,ut=ot._id,ct=g.easing||Easings.Linear,dt=!!g.yoyo;let ft,St;typeof g.duration>"u"?ft=.3:g.duration===0?ft=.001:ft=g.duration,this.node=ot,this._id=idCounter++;const kt=ot.getLayer()||(ot instanceof Konva$1.Stage?ot.getLayers():null);kt||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){et.tween.onEnterFrame()},kt),this.tween=new TweenEngine(St,function(Tt){et._tweenFunc(Tt)},ct,0,1,ft*1e3,dt),this._addListeners(),Tween.attrs[ut]||(Tween.attrs[ut]={}),Tween.attrs[ut][this._id]||(Tween.attrs[ut][this._id]={}),Tween.tweens[ut]||(Tween.tweens[ut]={});for(St in g)blacklist[St]===void 0&&this._addAttr(St,g[St]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,et){const ot=this.node,ut=ot._id;let ct,dt,ft,St,kt;const Tt=Tween.tweens[ut][g];Tt&&delete Tween.attrs[ut][Tt][g];let Rt=ot.getAttr(g);if(Util._isArray(et))if(ct=[],dt=Math.max(et.length,Rt.length),g==="points"&&et.length!==Rt.length&&(et.length>Rt.length?(St=Rt,Rt=Util._prepareArrayForTween(Rt,et,ot.closed())):(ft=et,et=Util._prepareArrayForTween(et,Rt,ot.closed()))),g.indexOf("fill")===0)for(let jt=0;jt<dt;jt++)if(jt%2===0)ct.push(et[jt]-Rt[jt]);else{const Ft=Util.colorToRGBA(Rt[jt]);kt=Util.colorToRGBA(et[jt]),Rt[jt]=Ft,ct.push({r:kt.r-Ft.r,g:kt.g-Ft.g,b:kt.b-Ft.b,a:kt.a-Ft.a})}else for(let jt=0;jt<dt;jt++)ct.push(et[jt]-Rt[jt]);else colorAttrs.indexOf(g)!==-1?(Rt=Util.colorToRGBA(Rt),kt=Util.colorToRGBA(et),ct={r:kt.r-Rt.r,g:kt.g-Rt.g,b:kt.b-Rt.b,a:kt.a-Rt.a}):ct=et-Rt;Tween.attrs[ut][this._id][g]={start:Rt,diff:ct,end:et,trueEnd:ft,trueStart:St},Tween.tweens[ut][g]=this._id}_tweenFunc(g){const et=this.node,ot=Tween.attrs[et._id][this._id];let ut,ct,dt,ft,St,kt,Tt,Rt;for(ut in ot){if(ct=ot[ut],dt=ct.start,ft=ct.diff,Rt=ct.end,Util._isArray(dt))if(St=[],Tt=Math.max(dt.length,Rt.length),ut.indexOf("fill")===0)for(kt=0;kt<Tt;kt++)kt%2===0?St.push((dt[kt]||0)+ft[kt]*g):St.push("rgba("+Math.round(dt[kt].r+ft[kt].r*g)+","+Math.round(dt[kt].g+ft[kt].g*g)+","+Math.round(dt[kt].b+ft[kt].b*g)+","+(dt[kt].a+ft[kt].a*g)+")");else for(kt=0;kt<Tt;kt++)St.push((dt[kt]||0)+ft[kt]*g);else colorAttrs.indexOf(ut)!==-1?St="rgba("+Math.round(dt.r+ft.r*g)+","+Math.round(dt.g+ft.g*g)+","+Math.round(dt.b+ft.b*g)+","+(dt.a+ft.a*g)+")":St=dt+ft*g;et.setAttr(ut,St)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueEnd&&g.setAttr("points",et.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueStart&&g.points(et.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,et=this._id,ot=Tween.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const ut in ot)delete Tween.tweens[g][ut];delete Tween.attrs[g][et],Tween.tweens[g]&&(Object.keys(Tween.tweens[g]).length===0&&delete Tween.tweens[g],Object.keys(Tween.attrs[g]).length===0&&delete Tween.attrs[g])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(it){const g=it.onFinish;it.node=this,it.onFinish=function(){this.destroy(),g&&g()},new Tween(it).play()};const Easings={BackEaseIn(it,g,et,ot){return et*(it/=ot)*it*((1.70158+1)*it-1.70158)+g},BackEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*((1.70158+1)*it+1.70158)+1)+g},BackEaseInOut(it,g,et,ot){let ut=1.70158;return(it/=ot/2)<1?et/2*(it*it*(((ut*=1.525)+1)*it-ut))+g:et/2*((it-=2)*it*(((ut*=1.525)+1)*it+ut)+2)+g},ElasticEaseIn(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ct||(ct=ot*.3),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),-(ut*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct))+g)},ElasticEaseOut(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ct||(ct=ot*.3),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),ut*Math.pow(2,-10*it)*Math.sin((it*ot-dt)*(2*Math.PI)/ct)+et+g)},ElasticEaseInOut(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot/2)===2?g+et:(ct||(ct=ot*(.3*1.5)),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),it<1?-.5*(ut*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct))+g:ut*Math.pow(2,-10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct)*.5+et+g)},BounceEaseOut(it,g,et,ot){return(it/=ot)<1/2.75?et*(7.5625*it*it)+g:it<2/2.75?et*(7.5625*(it-=1.5/2.75)*it+.75)+g:it<2.5/2.75?et*(7.5625*(it-=2.25/2.75)*it+.9375)+g:et*(7.5625*(it-=2.625/2.75)*it+.984375)+g},BounceEaseIn(it,g,et,ot){return et-Easings.BounceEaseOut(ot-it,0,et,ot)+g},BounceEaseInOut(it,g,et,ot){return it<ot/2?Easings.BounceEaseIn(it*2,0,et,ot)*.5+g:Easings.BounceEaseOut(it*2-ot,0,et,ot)*.5+et*.5+g},EaseIn(it,g,et,ot){return et*(it/=ot)*it+g},EaseOut(it,g,et,ot){return-et*(it/=ot)*(it-2)+g},EaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it+g:-et/2*(--it*(it-2)-1)+g},StrongEaseIn(it,g,et,ot){return et*(it/=ot)*it*it*it*it+g},StrongEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*it*it*it+1)+g},StrongEaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it*it*it*it+g:et/2*((it-=2)*it*it*it*it+2)+g},Linear(it,g,et,ot){return et*it/ot+g}},Konva=Util._assign(Konva$1,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group,DD,Shape,shapes,Animation,Tween,Easings,Context,Canvas});class Arc extends Shape{_sceneFunc(g){const et=Konva$1.getAngle(this.angle()),ot=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,et,ot),g.arc(0,0,this.innerRadius(),et,0,!ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),et=this.outerRadius(),ot=this.clockwise(),ut=Konva$1.getAngle(ot?360-this.angle():this.angle()),ct=Math.cos(Math.min(ut,Math.PI)),dt=1,ft=Math.sin(Math.min(Math.max(Math.PI,ut),3*Math.PI/2)),St=Math.sin(Math.min(ut,Math.PI/2)),kt=ct*(ct>0?g:et),Tt=dt*et,Rt=ft*(ft>0?g:et),jt=St*(St>0?et:g);return{x:kt,y:ot?-1*jt:Rt,width:Tt-kt,height:jt-Rt}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(it,g,et,ot,ut,ct,dt){const ft=Math.sqrt(Math.pow(et-it,2)+Math.pow(ot-g,2)),St=Math.sqrt(Math.pow(ut-et,2)+Math.pow(ct-ot,2)),kt=dt*ft/(ft+St),Tt=dt*St/(ft+St),Rt=et-kt*(ut-it),jt=ot-kt*(ct-g),Ft=et+Tt*(ut-it),Bt=ot+Tt*(ct-g);return[Rt,jt,Ft,Bt]}function expandPoints(it,g){const et=it.length,ot=[];for(let ut=2;ut<et-2;ut+=2){const ct=getControlPoints(it[ut-2],it[ut-1],it[ut],it[ut+1],it[ut+2],it[ut+3],g);isNaN(ct[0])||(ot.push(ct[0]),ot.push(ct[1]),ot.push(it[ut]),ot.push(it[ut+1]),ot.push(ct[2]),ot.push(ct[3]))}return ot}class Line extends Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const et=this.points(),ot=et.length,ut=this.tension(),ct=this.closed(),dt=this.bezier();if(!ot)return;let ft=0;if(g.beginPath(),g.moveTo(et[0],et[1]),ut!==0&&ot>4){const St=this.getTensionPoints(),kt=St.length;for(ft=ct?0:4,ct||g.quadraticCurveTo(St[0],St[1],St[2],St[3]);ft<kt-2;)g.bezierCurveTo(St[ft++],St[ft++],St[ft++],St[ft++],St[ft++],St[ft++]);ct||g.quadraticCurveTo(St[kt-2],St[kt-1],et[ot-2],et[ot-1])}else if(dt)for(ft=2;ft<ot;)g.bezierCurveTo(et[ft++],et[ft++],et[ft++],et[ft++],et[ft++],et[ft++]);else for(ft=2;ft<ot;ft+=2)g.lineTo(et[ft],et[ft+1]);ct?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),et=g.length,ot=this.tension(),ut=getControlPoints(g[et-2],g[et-1],g[0],g[1],g[2],g[3],ot),ct=getControlPoints(g[et-4],g[et-3],g[et-2],g[et-1],g[0],g[1],ot),dt=expandPoints(g,ot);return[ut[2],ut[3]].concat(dt).concat([ct[0],ct[1],g[et-2],g[et-1],ct[2],ct[3],ut[0],ut[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let et=g[0],ot=g[0],ut=g[1],ct=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ut=Math.min(ut,ft),ct=Math.max(ct,ft);return{x:et,y:ut,width:ot-et,height:ct-ut}}}Line.prototype.className="Line";Line.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line);Factory.addGetterSetter(Line,"closed",!1);Factory.addGetterSetter(Line,"bezier",!1);Factory.addGetterSetter(Line,"tension",0,getNumberValidator());Factory.addGetterSetter(Line,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(it,g,et)=>{let ot,ut;const dt=et/2;ot=0;for(let ft=0;ft<20;ft++)ut=dt*tValues[20][ft]+dt,ot+=cValues[20][ft]*BFunc(it,g,ut);return dt*ot},getQuadraticArcLength=(it,g,et)=>{et===void 0&&(et=1);const ot=it[0]-2*it[1]+it[2],ut=g[0]-2*g[1]+g[2],ct=2*it[1]-2*it[0],dt=2*g[1]-2*g[0],ft=4*(ot*ot+ut*ut),St=4*(ot*ct+ut*dt),kt=ct*ct+dt*dt;if(ft===0)return et*Math.sqrt(Math.pow(it[2]-it[0],2)+Math.pow(g[2]-g[0],2));const Tt=St/(2*ft),Rt=kt/ft,jt=et+Tt,Ft=Rt-Tt*Tt,Bt=jt*jt+Ft>0?Math.sqrt(jt*jt+Ft):0,Ht=Tt*Tt+Ft>0?Math.sqrt(Tt*Tt+Ft):0,Yt=Tt+Math.sqrt(Tt*Tt+Ft)!==0?Ft*Math.log(Math.abs((jt+Bt)/(Tt+Ht))):0;return Math.sqrt(ft)/2*(jt*Bt-Tt*Ht+Yt)};function BFunc(it,g,et){const ot=getDerivative(1,et,it),ut=getDerivative(1,et,g),ct=ot*ot+ut*ut;return Math.sqrt(ct)}const getDerivative=(it,g,et)=>{const ot=et.length-1;let ut,ct;if(ot===0)return 0;if(it===0){ct=0;for(let dt=0;dt<=ot;dt++)ct+=binomialCoefficients[ot][dt]*Math.pow(1-g,ot-dt)*Math.pow(g,dt)*et[dt];return ct}else{ut=new Array(ot);for(let dt=0;dt<ot;dt++)ut[dt]=ot*(et[dt+1]-et[dt]);return getDerivative(it-1,g,ut)}},t2length=(it,g,et)=>{let ot=1,ut=it/g,ct=(it-et(ut))/g,dt=0;for(;ot>.001;){const ft=et(ut+ct),St=Math.abs(it-ft)/g;if(St<ot)ot=St,ut+=ct;else{const kt=et(ut-ct),Tt=Math.abs(it-kt)/g;Tt<ot?(ot=Tt,ut-=ct):ct/=2}if(dt++,dt>500)break}return ut};let Path$1=class Su extends Shape{constructor(g){super(g),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Su.parsePathData(this.data()),this.pathLength=Su.getPathLength(this.dataArray)}_sceneFunc(g){const et=this.dataArray;g.beginPath();let ot=!1;for(let ut=0;ut<et.length;ut++){const ct=et[ut].command,dt=et[ut].points;switch(ct){case"L":g.lineTo(dt[0],dt[1]);break;case"M":g.moveTo(dt[0],dt[1]);break;case"C":g.bezierCurveTo(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]);break;case"Q":g.quadraticCurveTo(dt[0],dt[1],dt[2],dt[3]);break;case"A":const ft=dt[0],St=dt[1],kt=dt[2],Tt=dt[3],Rt=dt[4],jt=dt[5],Ft=dt[6],Bt=dt[7],Ht=kt>Tt?kt:Tt,Yt=kt>Tt?1:kt/Tt,zt=kt>Tt?Tt/kt:1;g.translate(ft,St),g.rotate(Ft),g.scale(Yt,zt),g.arc(0,0,Ht,Rt,Rt+jt,1-Bt),g.scale(1/Yt,1/zt),g.rotate(-Ft),g.translate(-ft,-St);break;case"z":ot=!0,g.closePath();break}}!ot&&!this.hasFill()?g.strokeShape(this):g.fillStrokeShape(this)}getSelfRect(){let g=[];this.dataArray.forEach(function(St){if(St.command==="A"){const kt=St.points[4],Tt=St.points[5],Rt=St.points[4]+Tt;let jt=Math.PI/180;if(Math.abs(kt-Rt)<jt&&(jt=Math.abs(kt-Rt)),Tt<0)for(let Ft=kt-jt;Ft>Rt;Ft-=jt){const Bt=Su.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push(Bt.x,Bt.y)}else for(let Ft=kt+jt;Ft<Rt;Ft+=jt){const Bt=Su.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push(Bt.x,Bt.y)}}else if(St.command==="C")for(let kt=0;kt<=1;kt+=.01){const Tt=Su.getPointOnCubicBezier(kt,St.start.x,St.start.y,St.points[0],St.points[1],St.points[2],St.points[3],St.points[4],St.points[5]);g.push(Tt.x,Tt.y)}else g=g.concat(St.points)});let et=g[0],ot=g[0],ut=g[1],ct=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],isNaN(dt)||(et=Math.min(et,dt),ot=Math.max(ot,dt)),isNaN(ft)||(ut=Math.min(ut,ft),ct=Math.max(ct,ft));return{x:et,y:ut,width:ot-et,height:ct-ut}}getLength(){return this.pathLength}getPointAtLength(g){return Su.getPointAtLengthOfDataArray(g,this.dataArray)}static getLineLength(g,et,ot,ut){return Math.sqrt((ot-g)*(ot-g)+(ut-et)*(ut-et))}static getPathLength(g){let et=0;for(let ot=0;ot<g.length;++ot)et+=g[ot].pathLength;return et}static getPointAtLengthOfDataArray(g,et){let ot,ut=0,ct=et.length;if(!ct)return null;for(;ut<ct&&g>et[ut].pathLength;)g-=et[ut].pathLength,++ut;if(ut===ct)return ot=et[ut-1].points.slice(-2),{x:ot[0],y:ot[1]};if(g<.01)return et[ut].command==="M"?(ot=et[ut].points.slice(0,2),{x:ot[0],y:ot[1]}):{x:et[ut].start.x,y:et[ut].start.y};const dt=et[ut],ft=dt.points;switch(dt.command){case"L":return Su.getPointOnLine(g,dt.start.x,dt.start.y,ft[0],ft[1]);case"C":return Su.getPointOnCubicBezier(t2length(g,Su.getPathLength(et),Ht=>getCubicArcLength([dt.start.x,ft[0],ft[2],ft[4]],[dt.start.y,ft[1],ft[3],ft[5]],Ht)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);case"Q":return Su.getPointOnQuadraticBezier(t2length(g,Su.getPathLength(et),Ht=>getQuadraticArcLength([dt.start.x,ft[0],ft[2]],[dt.start.y,ft[1],ft[3]],Ht)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3]);case"A":const St=ft[0],kt=ft[1],Tt=ft[2],Rt=ft[3],jt=ft[5],Ft=ft[6];let Bt=ft[4];return Bt+=jt*g/dt.pathLength,Su.getPointOnEllipticalArc(St,kt,Tt,Rt,Bt,Ft)}return null}static getPointOnLine(g,et,ot,ut,ct,dt,ft){dt=dt??et,ft=ft??ot;const St=this.getLineLength(et,ot,ut,ct);if(St<1e-10)return{x:et,y:ot};if(ut===et)return{x:dt,y:ft+(ct>ot?g:-g)};const kt=(ct-ot)/(ut-et),Tt=Math.sqrt(g*g/(1+kt*kt))*(ut<et?-1:1),Rt=kt*Tt;if(Math.abs(ft-ot-kt*(dt-et))<1e-10)return{x:dt+Tt,y:ft+Rt};const jt=((dt-et)*(ut-et)+(ft-ot)*(ct-ot))/(St*St),Ft=et+jt*(ut-et),Bt=ot+jt*(ct-ot),Ht=this.getLineLength(dt,ft,Ft,Bt),Yt=Math.sqrt(g*g-Ht*Ht),zt=Math.sqrt(Yt*Yt/(1+kt*kt))*(ut<et?-1:1),Kt=kt*zt;return{x:Ft+zt,y:Bt+Kt}}static getPointOnCubicBezier(g,et,ot,ut,ct,dt,ft,St,kt){function Tt(Yt){return Yt*Yt*Yt}function Rt(Yt){return 3*Yt*Yt*(1-Yt)}function jt(Yt){return 3*Yt*(1-Yt)*(1-Yt)}function Ft(Yt){return(1-Yt)*(1-Yt)*(1-Yt)}const Bt=St*Tt(g)+dt*Rt(g)+ut*jt(g)+et*Ft(g),Ht=kt*Tt(g)+ft*Rt(g)+ct*jt(g)+ot*Ft(g);return{x:Bt,y:Ht}}static getPointOnQuadraticBezier(g,et,ot,ut,ct,dt,ft){function St(Ft){return Ft*Ft}function kt(Ft){return 2*Ft*(1-Ft)}function Tt(Ft){return(1-Ft)*(1-Ft)}const Rt=dt*St(g)+ut*kt(g)+et*Tt(g),jt=ft*St(g)+ct*kt(g)+ot*Tt(g);return{x:Rt,y:jt}}static getPointOnEllipticalArc(g,et,ot,ut,ct,dt){const ft=Math.cos(dt),St=Math.sin(dt),kt={x:ot*Math.cos(ct),y:ut*Math.sin(ct)};return{x:g+(kt.x*ft-kt.y*St),y:et+(kt.x*St+kt.y*ft)}}static parsePathData(g){if(!g)return[];let et=g;const ot=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];et=et.replace(new RegExp(" ","g"),",");for(let Rt=0;Rt<ot.length;Rt++)et=et.replace(new RegExp(ot[Rt],"g"),"|"+ot[Rt]);const ut=et.split("|"),ct=[],dt=[];let ft=0,St=0;const kt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let Tt;for(let Rt=1;Rt<ut.length;Rt++){let jt=ut[Rt],Ft=jt.charAt(0);for(jt=jt.slice(1),dt.length=0;Tt=kt.exec(jt);)dt.push(Tt[0]);let Bt=[],Ht=Ft==="A"||Ft==="a"?0:-1;for(let Yt=0,zt=dt.length;Yt<zt;Yt++){const Kt=dt[Yt];if(Kt==="00"){Bt.push(0,0),Ht>=0&&(Ht+=2,Ht>=7&&(Ht-=7));continue}if(Ht>=0){if(Ht===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(Kt)){Bt.push(parseInt(Kt[0],10)),Bt.push(parseInt(Kt[1],10)),Bt.push(parseFloat(Kt.slice(2))),Ht+=3,Ht>=7&&(Ht-=7);continue}if(Kt==="11"||Kt==="10"||Kt==="01"){Bt.push(parseInt(Kt[0],10)),Bt.push(parseInt(Kt[1],10)),Ht+=2,Ht>=7&&(Ht-=7);continue}if(Kt==="0"||Kt==="1"){Bt.push(parseInt(Kt,10)),Ht+=1,Ht>=7&&(Ht-=7);continue}}else if(Ht===4){if(/^[01]\d+(?:\.\d+)?$/.test(Kt)){Bt.push(parseInt(Kt[0],10)),Bt.push(parseFloat(Kt.slice(1))),Ht+=2,Ht>=7&&(Ht-=7);continue}if(Kt==="0"||Kt==="1"){Bt.push(parseInt(Kt,10)),Ht+=1,Ht>=7&&(Ht-=7);continue}}const en=parseFloat(Kt);isNaN(en)?Bt.push(0):Bt.push(en),Ht+=1,Ht>=7&&(Ht-=7)}else{const en=parseFloat(Kt);isNaN(en)?Bt.push(0):Bt.push(en)}}for(;Bt.length>0&&!isNaN(Bt[0]);){let Yt="",zt=[];const Kt=ft,en=St;let tn,on,an,un,dn,Sn,mn,bn,En,kn;switch(Ft){case"l":ft+=Bt.shift(),St+=Bt.shift(),Yt="L",zt.push(ft,St);break;case"L":ft=Bt.shift(),St=Bt.shift(),zt.push(ft,St);break;case"m":const Pn=Bt.shift(),Ln=Bt.shift();if(ft+=Pn,St+=Ln,Yt="M",ct.length>2&&ct[ct.length-1].command==="z"){for(let gn=ct.length-2;gn>=0;gn--)if(ct[gn].command==="M"){ft=ct[gn].points[0]+Pn,St=ct[gn].points[1]+Ln;break}}zt.push(ft,St),Ft="l";break;case"M":ft=Bt.shift(),St=Bt.shift(),Yt="M",zt.push(ft,St),Ft="L";break;case"h":ft+=Bt.shift(),Yt="L",zt.push(ft,St);break;case"H":ft=Bt.shift(),Yt="L",zt.push(ft,St);break;case"v":St+=Bt.shift(),Yt="L",zt.push(ft,St);break;case"V":St=Bt.shift(),Yt="L",zt.push(ft,St);break;case"C":zt.push(Bt.shift(),Bt.shift(),Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),zt.push(ft,St);break;case"c":zt.push(ft+Bt.shift(),St+Bt.shift(),ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Yt="C",zt.push(ft,St);break;case"S":on=ft,an=St,tn=ct[ct.length-1],tn.command==="C"&&(on=ft+(ft-tn.points[2]),an=St+(St-tn.points[3])),zt.push(on,an,Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),Yt="C",zt.push(ft,St);break;case"s":on=ft,an=St,tn=ct[ct.length-1],tn.command==="C"&&(on=ft+(ft-tn.points[2]),an=St+(St-tn.points[3])),zt.push(on,an,ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Yt="C",zt.push(ft,St);break;case"Q":zt.push(Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),zt.push(ft,St);break;case"q":zt.push(ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Yt="Q",zt.push(ft,St);break;case"T":on=ft,an=St,tn=ct[ct.length-1],tn.command==="Q"&&(on=ft+(ft-tn.points[0]),an=St+(St-tn.points[1])),ft=Bt.shift(),St=Bt.shift(),Yt="Q",zt.push(on,an,ft,St);break;case"t":on=ft,an=St,tn=ct[ct.length-1],tn.command==="Q"&&(on=ft+(ft-tn.points[0]),an=St+(St-tn.points[1])),ft+=Bt.shift(),St+=Bt.shift(),Yt="Q",zt.push(on,an,ft,St);break;case"A":un=Bt.shift(),dn=Bt.shift(),Sn=Bt.shift(),mn=Bt.shift(),bn=Bt.shift(),En=ft,kn=St,ft=Bt.shift(),St=Bt.shift(),Yt="A",zt=this.convertEndpointToCenterParameterization(En,kn,ft,St,mn,bn,un,dn,Sn);break;case"a":un=Bt.shift(),dn=Bt.shift(),Sn=Bt.shift(),mn=Bt.shift(),bn=Bt.shift(),En=ft,kn=St,ft+=Bt.shift(),St+=Bt.shift(),Yt="A",zt=this.convertEndpointToCenterParameterization(En,kn,ft,St,mn,bn,un,dn,Sn);break}ct.push({command:Yt||Ft,points:zt,start:{x:Kt,y:en},pathLength:this.calcLength(Kt,en,Yt||Ft,zt)})}(Ft==="z"||Ft==="Z")&&ct.push({command:"z",points:[],start:void 0,pathLength:0})}return ct}static calcLength(g,et,ot,ut){let ct,dt,ft,St;const kt=Su;switch(ot){case"L":return kt.getLineLength(g,et,ut[0],ut[1]);case"C":return getCubicArcLength([g,ut[0],ut[2],ut[4]],[et,ut[1],ut[3],ut[5]],1);case"Q":return getQuadraticArcLength([g,ut[0],ut[2]],[et,ut[1],ut[3]],1);case"A":ct=0;const Tt=ut[4],Rt=ut[5],jt=ut[4]+Rt;let Ft=Math.PI/180;if(Math.abs(Tt-jt)<Ft&&(Ft=Math.abs(Tt-jt)),dt=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],Tt,0),Rt<0)for(St=Tt-Ft;St>jt;St-=Ft)ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],St,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;else for(St=Tt+Ft;St<jt;St+=Ft)ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],St,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;return ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],jt,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),ct}return 0}static convertEndpointToCenterParameterization(g,et,ot,ut,ct,dt,ft,St,kt){const Tt=kt*(Math.PI/180),Rt=Math.cos(Tt)*(g-ot)/2+Math.sin(Tt)*(et-ut)/2,jt=-1*Math.sin(Tt)*(g-ot)/2+Math.cos(Tt)*(et-ut)/2,Ft=Rt*Rt/(ft*ft)+jt*jt/(St*St);Ft>1&&(ft*=Math.sqrt(Ft),St*=Math.sqrt(Ft));let Bt=Math.sqrt((ft*ft*(St*St)-ft*ft*(jt*jt)-St*St*(Rt*Rt))/(ft*ft*(jt*jt)+St*St*(Rt*Rt)));ct===dt&&(Bt*=-1),isNaN(Bt)&&(Bt=0);const Ht=Bt*ft*jt/St,Yt=Bt*-St*Rt/ft,zt=(g+ot)/2+Math.cos(Tt)*Ht-Math.sin(Tt)*Yt,Kt=(et+ut)/2+Math.sin(Tt)*Ht+Math.cos(Tt)*Yt,en=function(mn){return Math.sqrt(mn[0]*mn[0]+mn[1]*mn[1])},tn=function(mn,bn){return(mn[0]*bn[0]+mn[1]*bn[1])/(en(mn)*en(bn))},on=function(mn,bn){return(mn[0]*bn[1]<mn[1]*bn[0]?-1:1)*Math.acos(tn(mn,bn))},an=on([1,0],[(Rt-Ht)/ft,(jt-Yt)/St]),un=[(Rt-Ht)/ft,(jt-Yt)/St],dn=[(-1*Rt-Ht)/ft,(-1*jt-Yt)/St];let Sn=on(un,dn);return tn(un,dn)<=-1&&(Sn=Math.PI),tn(un,dn)>=1&&(Sn=0),dt===0&&Sn>0&&(Sn=Sn-2*Math.PI),dt===1&&Sn<0&&(Sn=Sn+2*Math.PI),[zt,Kt,ft,St,an,Sn,Tt,dt]}};Path$1.prototype.className="Path";Path$1.prototype._attrsAffectingSize=["data"];_registerNode(Path$1);Factory.addGetterSetter(Path$1,"data");let Arrow$1=class extends Line{_sceneFunc(g){super._sceneFunc(g);const et=Math.PI*2,ot=this.points();let ut=ot;const ct=this.tension()!==0&&ot.length>4;ct&&(ut=this.getTensionPoints());const dt=this.pointerLength(),ft=ot.length;let St,kt;if(ct){const jt=[ut[ut.length-4],ut[ut.length-3],ut[ut.length-2],ut[ut.length-1],ot[ft-2],ot[ft-1]],Ft=Path$1.calcLength(ut[ut.length-4],ut[ut.length-3],"C",jt),Bt=Path$1.getPointOnQuadraticBezier(Math.min(1,1-dt/Ft),jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]);St=ot[ft-2]-Bt.x,kt=ot[ft-1]-Bt.y}else St=ot[ft-2]-ot[ft-4],kt=ot[ft-1]-ot[ft-3];const Tt=(Math.atan2(kt,St)+et)%et,Rt=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(ot[ft-2],ot[ft-1]),g.rotate(Tt),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(ot[0],ot[1]),ct?(St=(ut[0]+ut[2])/2-ot[0],kt=(ut[1]+ut[3])/2-ot[1]):(St=ot[2]-ot[0],kt=ot[3]-ot[1]),g.rotate((Math.atan2(-kt,-St)+et)%et),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const et=this.dashEnabled();et&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),et&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),et=this.pointerWidth()/2;return{x:g.x,y:g.y-et,width:g.width,height:g.height+et*2}}};Arrow$1.prototype.className="Arrow";_registerNode(Arrow$1);Factory.addGetterSetter(Arrow$1,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow$1,"pointerAtEnding",!0);class Circle extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius()!==g/2&&this.radius(g/2)}setHeight(g){this.radius()!==g/2&&this.radius(g/2)}}Circle.prototype._centroid=!0;Circle.prototype.className="Circle";Circle.prototype._attrsAffectingSize=["radius"];_registerNode(Circle);Factory.addGetterSetter(Circle,"radius",0,getNumberValidator());let Ellipse$1=class extends Shape{_sceneFunc(g){const et=this.radiusX(),ot=this.radiusY();g.beginPath(),g.save(),et!==ot&&g.scale(1,ot/et),g.arc(0,0,et,0,Math.PI*2,!1),g.restore(),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(g){this.radiusX(g/2)}setHeight(g){this.radiusY(g/2)}};Ellipse$1.prototype.className="Ellipse";Ellipse$1.prototype._centroid=!0;Ellipse$1.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse$1);Factory.addComponentsGetterSetter(Ellipse$1,"radius",["x","y"]);Factory.addGetterSetter(Ellipse$1,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse$1,"radiusY",0,getNumberValidator());let Image$2=class g5 extends Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",et=>{this._removeImageLoad(et.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),et=this.hasShadow();return g&&et?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const et=this.getWidth(),ot=this.getHeight(),ut=this.cornerRadius(),ct=this.attrs.image;let dt;if(ct){const ft=this.attrs.cropWidth,St=this.attrs.cropHeight;ft&&St?dt=[ct,this.cropX(),this.cropY(),ft,St,0,0,et,ot]:dt=[ct,0,0,et,ot]}(this.hasFill()||this.hasStroke()||ut)&&(g.beginPath(),ut?Util.drawRoundedRectPath(g,et,ot,ut):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)),ct&&(ut&&g.clip(),g.drawImage.apply(g,dt))}_hitFunc(g){const et=this.width(),ot=this.height(),ut=this.cornerRadius();g.beginPath(),ut?Util.drawRoundedRectPath(g,et,ot,ut):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,et,ot;return(ot=(g=this.attrs.width)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.width)!==null&&ot!==void 0?ot:0}getHeight(){var g,et,ot;return(ot=(g=this.attrs.height)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.height)!==null&&ot!==void 0?ot:0}static fromURL(g,et,ot=null){const ut=Util.createImageElement();ut.onload=function(){const ct=new g5({image:ut});et(ct)},ut.onerror=ot,ut.crossOrigin="Anonymous",ut.src=g}};Image$2.prototype.className="Image";Image$2.prototype._attrsAffectingSize=["image"];_registerNode(Image$2);Factory.addGetterSetter(Image$2,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$2,"image");Factory.addComponentsGetterSetter(Image$2,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$2,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group{constructor(g){super(g),this.on("add.konva",function(et){this._addListeners(et.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let et=this,ot;const ut=function(){et._sync()};for(ot=0;ot<attrChangeListLen$1;ot++)g.on(ATTR_CHANGE_LIST$2[ot]+CHANGE_KONVA$1,ut)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),et=this.getTag(),ot,ut,ct,dt,ft,St,kt;if(g&&et){switch(ot=g.width(),ut=g.height(),ct=et.pointerDirection(),dt=et.pointerWidth(),kt=et.pointerHeight(),ft=0,St=0,ct){case UP:ft=ot/2,St=-1*kt;break;case RIGHT$1:ft=ot+dt,St=ut/2;break;case DOWN:ft=ot/2,St=ut+kt;break;case LEFT$1:ft=-1*dt,St=ut/2;break}et.setAttrs({x:-1*ft,y:-1*St,width:ot,height:ut}),g.setAttrs({x:-1*ft,y:-1*St})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(g){const et=this.width(),ot=this.height(),ut=this.pointerDirection(),ct=this.pointerWidth(),dt=this.pointerHeight(),ft=this.cornerRadius();let St=0,kt=0,Tt=0,Rt=0;typeof ft=="number"?St=kt=Tt=Rt=Math.min(ft,et/2,ot/2):(St=Math.min(ft[0]||0,et/2,ot/2),kt=Math.min(ft[1]||0,et/2,ot/2),Rt=Math.min(ft[2]||0,et/2,ot/2),Tt=Math.min(ft[3]||0,et/2,ot/2)),g.beginPath(),g.moveTo(St,0),ut===UP&&(g.lineTo((et-ct)/2,0),g.lineTo(et/2,-1*dt),g.lineTo((et+ct)/2,0)),g.lineTo(et-kt,0),g.arc(et-kt,kt,kt,Math.PI*3/2,0,!1),ut===RIGHT$1&&(g.lineTo(et,(ot-dt)/2),g.lineTo(et+ct,ot/2),g.lineTo(et,(ot+dt)/2)),g.lineTo(et,ot-Rt),g.arc(et-Rt,ot-Rt,Rt,0,Math.PI/2,!1),ut===DOWN&&(g.lineTo((et+ct)/2,ot),g.lineTo(et/2,ot+dt),g.lineTo((et-ct)/2,ot)),g.lineTo(Tt,ot),g.arc(Tt,ot-Tt,Tt,Math.PI/2,Math.PI,!1),ut===LEFT$1&&(g.lineTo(0,(ot+dt)/2),g.lineTo(-1*ct,ot/2),g.lineTo(0,(ot-dt)/2)),g.lineTo(0,St),g.arc(St,St,St,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,et=0,ot=this.pointerWidth(),ut=this.pointerHeight(),ct=this.pointerDirection(),dt=this.width(),ft=this.height();return ct===UP?(et-=ut,ft+=ut):ct===DOWN?ft+=ut:ct===LEFT$1?(g-=ot*1.5,dt+=ot):ct===RIGHT$1&&(dt+=ot*1.5),{x:g,y:et,width:dt,height:ft}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$1=class extends Shape{_sceneFunc(g){const et=this.cornerRadius(),ot=this.width(),ut=this.height();g.beginPath(),et?Util.drawRoundedRectPath(g,ot,ut,et):g.rect(0,0,ot,ut),g.closePath(),g.fillStrokeShape(this)}};Rect$1.prototype.className="Rect";_registerNode(Rect$1);Factory.addGetterSetter(Rect$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(g){const et=this._getPoints(),ot=this.radius(),ut=this.sides(),ct=this.cornerRadius();if(g.beginPath(),ct)Util.drawRoundedPolygonPath(g,et,ut,ot,ct);else{g.moveTo(et[0].x,et[0].y);for(let dt=1;dt<et.length;dt++)g.lineTo(et[dt].x,et[dt].y)}g.closePath(),g.fillStrokeShape(this)}_getPoints(){const g=this.attrs.sides,et=this.attrs.radius||0,ot=[];for(let ut=0;ut<g;ut++)ot.push({x:et*Math.sin(ut*2*Math.PI/g),y:-1*et*Math.cos(ut*2*Math.PI/g)});return ot}getSelfRect(){const g=this._getPoints();let et=g[0].x,ot=g[0].y,ut=g[0].x,ct=g[0].y;return g.forEach(dt=>{et=Math.min(et,dt.x),ot=Math.max(ot,dt.x),ut=Math.min(ut,dt.y),ct=Math.max(ct,dt.y)}),{x:et,y:ut,width:ot-et,height:ct-ut}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,PIx2,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),PIx2,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(g){super(g),this._updated=!0,this.anim=new Animation(()=>{const et=this._updated;return this._updated=!1,et}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const et=this.animation(),ot=this.frameIndex(),ut=ot*4,ct=this.animations()[et],dt=this.frameOffsets(),ft=ct[ut+0],St=ct[ut+1],kt=ct[ut+2],Tt=ct[ut+3],Rt=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,kt,Tt),g.closePath(),g.fillStrokeShape(this)),Rt)if(dt){const jt=dt[et],Ft=ot*2;g.drawImage(Rt,ft,St,kt,Tt,jt[Ft+0],jt[Ft+1],kt,Tt)}else g.drawImage(Rt,ft,St,kt,Tt,0,0,kt,Tt)}_hitFunc(g){const et=this.animation(),ot=this.frameIndex(),ut=ot*4,ct=this.animations()[et],dt=this.frameOffsets(),ft=ct[ut+2],St=ct[ut+3];if(g.beginPath(),dt){const kt=dt[et],Tt=ot*2;g.rect(kt[Tt+0],kt[Tt+1],ft,St)}else g.rect(0,0,ft,St);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),et=this.animation(),ot=this.animations(),ut=ot[et],ct=ut.length/4;g<ct-1?this.frameIndex(g+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(g){const et=this.innerRadius(),ot=this.outerRadius(),ut=this.numPoints();g.beginPath(),g.moveTo(0,0-ot);for(let ct=1;ct<ut*2;ct++){const dt=ct%2===0?ot:et,ft=dt*Math.sin(ct*Math.PI/ut),St=-1*dt*Math.cos(ct*Math.PI/ut);g.lineTo(ft,St)}g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(it){return[...it].reduce((g,et,ot,ut)=>{if(/\p{Emoji}/u.test(et)){const ct=ut[ot+1];ct&&/\p{Emoji_Modifier}|\u200D/u.test(ct)?(g.push(et+ct),ut[ot+1]=""):g.push(et)}else/\p{Regional_Indicator}{2}/u.test(et+(ut[ot+1]||""))?g.push(et+ut[ot+1]):ot>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(et)?g[g.length-1]+=et:et&&g.push(et);return g},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(it){return it.split(",").map(g=>{g=g.trim();const et=g.indexOf(" ")>=0,ot=g.indexOf('"')>=0||g.indexOf("'")>=0;return et&&!ot&&(g=`"${g}"`),g}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(it){it.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(it){it.setAttr("miterLimit",2),it.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(it){return it=it||{},!it.fillLinearGradientColorStops&&!it.fillRadialGradientColorStops&&!it.fillPatternImage&&(it.fill=it.fill||"black"),it}let Text$2=class extends Shape{constructor(g){super(checkDefaultFill(g)),this._partialTextX=0,this._partialTextY=0;for(let et=0;et<attrChangeListLen;et++)this.on(ATTR_CHANGE_LIST$1[et]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(g){var et,ot;const ut=this.textArr,ct=ut.length;if(!this.text())return;let dt=this.padding(),ft=this.fontSize(),St=this.lineHeight()*ft,kt=this.verticalAlign(),Tt=this.direction(),Rt=0,jt=this.align(),Ft=this.getWidth(),Bt=this.letterSpacing(),Ht=this.charRenderFunc(),Yt=this.fill(),zt=this.textDecoration(),Kt=zt.indexOf("underline")!==-1,en=zt.indexOf("line-through")!==-1,tn;Tt=Tt===INHERIT?g.direction:Tt;let on=St/2,an=MIDDLE;if(!Konva$1.legacyTextRendering){const un=this.measureSize("M");an="alphabetic";const dn=(et=un.fontBoundingBoxAscent)!==null&&et!==void 0?et:un.actualBoundingBoxAscent,Sn=(ot=un.fontBoundingBoxDescent)!==null&&ot!==void 0?ot:un.actualBoundingBoxDescent;on=(dn-Sn)/2+St/2}for(Tt===RTL&&g.setAttr("direction",Tt),g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",an),g.setAttr("textAlign",LEFT),kt===MIDDLE?Rt=(this.getHeight()-ct*St-dt*2)/2:kt===BOTTOM&&(Rt=this.getHeight()-ct*St-dt*2),g.translate(dt,Rt+dt),tn=0;tn<ct;tn++){let un=0,dn=0;const Sn=ut[tn],mn=Sn.text,bn=Sn.width,En=Sn.lastInParagraph;if(g.save(),jt===RIGHT?un+=Ft-bn-dt*2:jt===CENTER&&(un+=(Ft-bn-dt*2)/2),Kt){g.save(),g.beginPath();const kn=Konva$1.legacyTextRendering?Math.round(ft/2):Math.round(ft/4),Pn=un,Ln=on+dn+kn;g.moveTo(Pn,Ln);const gn=jt===JUSTIFY&&!En?Ft-dt*2:bn;g.lineTo(Pn+Math.round(gn),Ln),g.lineWidth=ft/15;const Mn=this._getLinearGradient();g.strokeStyle=Mn||Yt,g.stroke(),g.restore()}if(Tt!==RTL&&(Bt!==0||jt===JUSTIFY||Ht)){const kn=mn.split(" ").length-1,Pn=stringToArray(mn);for(let Ln=0;Ln<Pn.length;Ln++){const gn=Pn[Ln];if(gn===" "&&!En&&jt===JUSTIFY&&(un+=(Ft-dt*2-bn)/kn),this._partialTextX=un,this._partialTextY=on+dn,this._partialText=gn,Ht){g.save();const yn=ut.slice(0,tn).reduce((On,Cn)=>On+stringToArray(Cn.text).length,0),vn=Ln+yn;Ht({char:gn,index:vn,x:un,y:on+dn,lineIndex:tn,column:Ln,isLastInLine:En,width:this.measureSize(gn).width,context:g})}g.fillStrokeShape(this),Ht&&g.restore(),un+=this.measureSize(gn).width+Bt}}else Bt!==0&&g.setAttr("letterSpacing",`${Bt}px`),this._partialTextX=un,this._partialTextY=on+dn,this._partialText=mn,g.fillStrokeShape(this);if(en){g.save(),g.beginPath();const kn=Konva$1.legacyTextRendering?0:-Math.round(ft/4),Pn=jt===JUSTIFY?0:un;g.moveTo(Pn,on+dn+kn);const Ln=jt===JUSTIFY&&!En?Ft-dt*2:bn;g.lineTo(Pn+Math.round(Ln),on+dn+kn),g.lineWidth=ft/15;const gn=this._getLinearGradient();g.strokeStyle=gn||Yt,g.stroke(),g.restore()}g.restore(),ct>1&&(on+=St)}}_hitFunc(g){const et=this.getWidth(),ot=this.getHeight();g.beginPath(),g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}setText(g){const et=Util._isString(g)?g:g==null?"":g+"";return this._setAttr(TEXT,et),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(g){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,jt;let Ft=getDummyContext(),Bt=this.fontSize(),Ht;Ft.save(),Ft.font=this._getContextFont(),Ht=Ft.measureText(g),Ft.restore();const Yt=Bt/100;return{actualBoundingBoxAscent:(et=Ht.actualBoundingBoxAscent)!==null&&et!==void 0?et:71.58203125*Yt,actualBoundingBoxDescent:(ot=Ht.actualBoundingBoxDescent)!==null&&ot!==void 0?ot:0,actualBoundingBoxLeft:(ut=Ht.actualBoundingBoxLeft)!==null&&ut!==void 0?ut:-7.421875*Yt,actualBoundingBoxRight:(ct=Ht.actualBoundingBoxRight)!==null&&ct!==void 0?ct:75.732421875*Yt,alphabeticBaseline:(dt=Ht.alphabeticBaseline)!==null&&dt!==void 0?dt:0,emHeightAscent:(ft=Ht.emHeightAscent)!==null&&ft!==void 0?ft:100*Yt,emHeightDescent:(St=Ht.emHeightDescent)!==null&&St!==void 0?St:-20*Yt,fontBoundingBoxAscent:(kt=Ht.fontBoundingBoxAscent)!==null&&kt!==void 0?kt:91*Yt,fontBoundingBoxDescent:(Tt=Ht.fontBoundingBoxDescent)!==null&&Tt!==void 0?Tt:21*Yt,hangingBaseline:(Rt=Ht.hangingBaseline)!==null&&Rt!==void 0?Rt:72.80000305175781*Yt,ideographicBaseline:(jt=Ht.ideographicBaseline)!==null&&jt!==void 0?jt:-21*Yt,width:Ht.width,height:Bt}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(g){this.align()===JUSTIFY&&(g=g.trim());const ot=this._getTextWidth(g);return this.textArr.push({text:g,width:ot,lastInParagraph:!1})}_getTextWidth(g){const et=this.letterSpacing(),ot=g.length;return getDummyContext().measureText(g).width+et*ot}_setTextData(){let g=this.text().split(`
`),et=+this.fontSize(),ot=0,ut=this.lineHeight()*et,ct=this.attrs.width,dt=this.attrs.height,ft=ct!==AUTO&&ct!==void 0,St=dt!==AUTO&&dt!==void 0,kt=this.padding(),Tt=ct-kt*2,Rt=dt-kt*2,jt=0,Ft=this.wrap(),Bt=Ft!==NONE,Ht=Ft!==CHAR&&Bt,Yt=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const zt=Yt?this._getTextWidth(ELLIPSIS):0;for(let Kt=0,en=g.length;Kt<en;++Kt){let tn=g[Kt],on=this._getTextWidth(tn);if(ft&&on>Tt)for(;tn.length>0;){let an=0,un=stringToArray(tn).length,dn="",Sn=0;for(;an<un;){const mn=an+un>>>1,bn=stringToArray(tn),En=bn.slice(0,mn+1).join(""),kn=this._getTextWidth(En);(Yt&&St&&jt+ut>Rt?kn+zt:kn)<=Tt?(an=mn+1,dn=En,Sn=kn):un=mn}if(dn){if(Ht){const En=stringToArray(tn),kn=stringToArray(dn),Pn=En[kn.length],Ln=Pn===SPACE||Pn===DASH;let gn;if(Ln&&Sn<=Tt)gn=kn.length;else{const Mn=kn.lastIndexOf(SPACE),yn=kn.lastIndexOf(DASH);gn=Math.max(Mn,yn)+1}gn>0&&(an=gn,dn=En.slice(0,an).join(""),Sn=this._getTextWidth(dn))}if(dn=dn.trimRight(),this._addTextLine(dn),ot=Math.max(ot,Sn),jt+=ut,this._shouldHandleEllipsis(jt)){this._tryToAddEllipsisToLastLine();break}if(tn=stringToArray(tn).slice(an).join("").trimLeft(),tn.length>0&&(on=this._getTextWidth(tn),on<=Tt)){this._addTextLine(tn),jt+=ut,ot=Math.max(ot,on);break}}else break}else this._addTextLine(tn),jt+=ut,ot=Math.max(ot,on),this._shouldHandleEllipsis(jt)&&Kt<en-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),St&&jt+ut>Rt)break}this.textHeight=et,this.textWidth=ot}_shouldHandleEllipsis(g){const et=+this.fontSize(),ot=this.lineHeight()*et,ut=this.attrs.height,ct=ut!==AUTO&&ut!==void 0,dt=this.padding(),ft=ut-dt*2;return!(this.wrap()!==NONE)||ct&&g+ot>ft}_tryToAddEllipsisToLastLine(){const g=this.attrs.width,et=g!==AUTO&&g!==void 0,ot=this.padding(),ut=g-ot*2,ct=this.ellipsis(),dt=this.textArr[this.textArr.length-1];!dt||!ct||(et&&(this._getTextWidth(dt.text+ELLIPSIS)<ut||(dt.text=dt.text.slice(0,dt.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(dt.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const g=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,et=this.hasShadow();return g&&et?!0:super._useBufferCanvas()}};Text$2.prototype._fillFunc=_fillFunc$1;Text$2.prototype._strokeFunc=_strokeFunc$1;Text$2.prototype.className=TEXT_UPPER;Text$2.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$2);Factory.overWriteSetter(Text$2,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$2,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$2,"direction",INHERIT);Factory.addGetterSetter(Text$2,"fontFamily","Arial");Factory.addGetterSetter(Text$2,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$2,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$2,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$2,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$2,"align",LEFT);Factory.addGetterSetter(Text$2,"verticalAlign",TOP);Factory.addGetterSetter(Text$2,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$2,"wrap",WORD);Factory.addGetterSetter(Text$2,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$2,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$2,"text","",getStringValidator());Factory.addGetterSetter(Text$2,"textDecoration","");Factory.addGetterSetter(Text$2,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(it){it.fillText(this.partialText,0,0)}function _strokeFunc(it){it.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(g){super(g),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path$1.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const et=this.pathLength;return g>et?null:Path$1.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=Path$1.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const et=this.textDecoration(),ot=this.fill(),ut=this.fontSize(),ct=this.glyphInfo,dt=et.indexOf("underline")!==-1,ft=et.indexOf("line-through")!==-1;dt&&g.beginPath();for(let St=0;St<ct.length;St++){g.save();const kt=ct[St].p0;g.translate(kt.x,kt.y),g.rotate(ct[St].rotation),this.partialText=ct[St].text,g.fillStrokeShape(this),dt&&(St===0&&g.moveTo(0,ut/2+1),g.lineTo(ct[St].width,ut/2+1)),g.restore()}if(dt&&(g.strokeStyle=ot,g.lineWidth=ut/20,g.stroke()),ft){g.beginPath();for(let St=0;St<ct.length;St++){g.save();const kt=ct[St].p0;g.translate(kt.x,kt.y),g.rotate(ct[St].rotation),St===0&&g.moveTo(0,0),g.lineTo(ct[St].width,0),g.restore()}g.strokeStyle=ot,g.lineWidth=ut/20,g.stroke()}g.restore()}_hitFunc(g){g.beginPath();const et=this.glyphInfo;if(et.length>=1){const ot=et[0].p0;g.moveTo(ot.x,ot.y)}for(let ot=0;ot<et.length;ot++){const ut=et[ot].p1;g.lineTo(ut.x,ut.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return Text$2.prototype.setText.call(this,g)}_getContextFont(){return Text$2.prototype._getContextFont.call(this)}_getTextSize(g){const ot=this.dummyCanvas.getContext("2d");ot.save(),ot.font=this._getContextFont();const ut=ot.measureText(g);return ot.restore(),{width:ut.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const g=stringToArray(this.text()),et=[];let ot=0;for(let Rt=0;Rt<g.length;Rt++)et.push({char:g[Rt],width:this._getTextSize(g[Rt]).width}),ot+=et[Rt].width;const{height:ut}=this._getTextSize(this.attrs.text);if(this.textWidth=ot,this.textHeight=ut,this.glyphInfo=[],!this.attrs.data)return null;const ct=this.letterSpacing(),dt=this.align(),ft=this.kerningFunc(),St=Math.max(this.textWidth+((this.attrs.text||"").length-1)*ct,0);let kt=0;dt==="center"&&(kt=Math.max(0,this.pathLength/2-St/2)),dt==="right"&&(kt=Math.max(0,this.pathLength-St));let Tt=kt;for(let Rt=0;Rt<et.length;Rt++){const jt=this._getPointAtLength(Tt);if(!jt)return;const Ft=et[Rt].char;let Bt=et[Rt].width+ct;if(Ft===" "&&dt==="justify"){const tn=this.text().split(" ").length-1;Bt+=(this.pathLength-St)/tn}const Ht=this._getPointAtLength(Tt+Bt);if(!Ht)return;const Yt=Path$1.getLineLength(jt.x,jt.y,Ht.x,Ht.y);let zt=0;if(ft)try{zt=ft(et[Rt-1].char,Ft)*this.fontSize()}catch{zt=0}jt.x+=zt,Ht.x+=zt,this.textWidth+=zt;const Kt=Path$1.getPointOnLine(zt+Yt/2,jt.x,jt.y,Ht.x,Ht.y),en=Math.atan2(Ht.y-jt.y,Ht.x-jt.x);this.glyphInfo.push({transposeX:Kt.x,transposeY:Kt.y,text:g[Rt],rotation:en,p0:jt,p1:Ht,width:Yt}),Tt+=Bt}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(kt){g.push(kt.p0.x),g.push(kt.p0.y),g.push(kt.p1.x),g.push(kt.p1.y)});let et=g[0]||0,ot=g[0]||0,ut=g[1]||0,ct=g[1]||0,dt,ft;for(let kt=0;kt<g.length/2;kt++)dt=g[kt*2],ft=g[kt*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ut=Math.min(ut,ft),ct=Math.max(ct,ft);const St=this.fontSize();return{x:et-St/2,y:ut-St/2,width:ot-et+St,height:ct-ut+St}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(it=>it+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$1._global;function getCursor(it,g,et){if(it==="rotater")return et;g+=Util.degToRad(ANGLES[it]||0);const ot=(Util.radToDeg(g)%360+360)%360;return Util._inRange(ot,315+22.5,360)||Util._inRange(ot,0,22.5)?"ns-resize":Util._inRange(ot,45-22.5,45+22.5)?"nesw-resize":Util._inRange(ot,90-22.5,90+22.5)?"ew-resize":Util._inRange(ot,135-22.5,135+22.5)?"nwse-resize":Util._inRange(ot,180-22.5,180+22.5)?"ns-resize":Util._inRange(ot,225-22.5,225+22.5)?"nesw-resize":Util._inRange(ot,270-22.5,270+22.5)?"ew-resize":Util._inRange(ot,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+ot),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],MAX_SAFE_INTEGER=1e8;function getCenter(it){return{x:it.x+it.width/2*Math.cos(it.rotation)+it.height/2*Math.sin(-it.rotation),y:it.y+it.height/2*Math.cos(it.rotation)+it.width/2*Math.sin(it.rotation)}}function rotateAroundPoint(it,g,et){const ot=et.x+(it.x-et.x)*Math.cos(g)-(it.y-et.y)*Math.sin(g),ut=et.y+(it.x-et.x)*Math.sin(g)+(it.y-et.y)*Math.cos(g);return{...it,rotation:it.rotation+g,x:ot,y:ut}}function rotateAroundCenter(it,g){const et=getCenter(it);return rotateAroundPoint(it,g,et)}function getSnap(it,g,et){let ot=g;for(let ut=0;ut<it.length;ut++){const ct=Konva$1.getAngle(it[ut]),dt=Math.abs(ct-g)%(Math.PI*2);Math.min(dt,Math.PI*2-dt)<et&&(ot=ct)}return ot}let activeTransformersCount=0,Transformer$1=class extends Group{constructor(g){super(g),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(g){return this.setNode(g),this}setNode(g){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([g])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(g=[]){this._nodes&&this._nodes.length&&this.detach();const et=g.filter(ut=>ut.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=g=et,g.length===1&&this.useSingleNodeRotation()?this.rotation(g[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(ut=>{const ct=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(ut._attrsAffectingSize.length){const dt=ut._attrsAffectingSize.map(ft=>ft+"Change."+this._getEventNamespace()).join(" ");ut.on(dt,ct)}ut.on(TRANSFORM_CHANGE_STR.map(dt=>dt+`.${this._getEventNamespace()}`).join(" "),ct),ut.on(`absoluteTransformChange.${this._getEventNamespace()}`,ct),this._proxyDrag(ut)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(g){let et;g.on(`dragstart.${this._getEventNamespace()}`,ot=>{et=g.getAbsolutePosition(),!this.isDragging()&&g!==this.findOne(".back")&&this.startDrag(ot,!1)}),g.on(`dragmove.${this._getEventNamespace()}`,ot=>{if(!et)return;const ut=g.getAbsolutePosition(),ct=ut.x-et.x,dt=ut.y-et.y;this.nodes().forEach(ft=>{if(ft===g||ft.isDragging())return;const St=ft.getAbsolutePosition();ft.setAbsolutePosition({x:St.x+ct,y:St.y+dt}),ft.startDrag(ot)}),et=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(g=>{g.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(g,et=this.rotation(),ot){const ut=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ct=g.getAbsoluteScale(ot),dt=g.getAbsolutePosition(ot),ft=ut.x*ct.x-g.offsetX()*ct.x,St=ut.y*ct.y-g.offsetY()*ct.y,kt=(Konva$1.getAngle(g.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Tt={x:dt.x+ft*Math.cos(kt)+St*Math.sin(-kt),y:dt.y+St*Math.cos(kt)+ft*Math.sin(kt),width:ut.width*ct.x,height:ut.height*ct.y,rotation:kt};return rotateAroundPoint(Tt,-Konva$1.getAngle(et),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-MAX_SAFE_INTEGER,y:-MAX_SAFE_INTEGER,width:0,height:0,rotation:0};const et=[];this.nodes().map(kt=>{const Tt=kt.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Rt=[{x:Tt.x,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y+Tt.height},{x:Tt.x,y:Tt.y+Tt.height}],jt=kt.getAbsoluteTransform();Rt.forEach(function(Ft){const Bt=jt.point(Ft);et.push(Bt)})});const ot=new Transform;ot.rotate(-Konva$1.getAngle(this.rotation()));let ut=1/0,ct=1/0,dt=-1/0,ft=-1/0;et.forEach(function(kt){const Tt=ot.point(kt);ut===void 0&&(ut=dt=Tt.x,ct=ft=Tt.y),ut=Math.min(ut,Tt.x),ct=Math.min(ct,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),ot.invert();const St=ot.point({x:ut,y:ct});return{x:St.x,y:St.y,width:dt-ut,height:ft-ct,rotation:Konva$1.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(g=>{this._createAnchor(g)}),this._createAnchor("rotater")}_createAnchor(g){const et=new Rect$1({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:g+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),ot=this;et.on("mousedown touchstart",function(ut){ot._handleMouseDown(ut)}),et.on("dragstart",ut=>{et.stopDrag(),ut.cancelBubble=!0}),et.on("dragend",ut=>{ut.cancelBubble=!0}),et.on("mouseenter",()=>{const ut=Konva$1.getAngle(this.rotation()),ct=this.rotateAnchorCursor(),dt=getCursor(g,ut,ct);et.getStage().content&&(et.getStage().content.style.cursor=dt),this._cursorChange=!0}),et.on("mouseout",()=>{et.getStage().content&&(et.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(et)}_createBack(){const g=new Shape({name:"back",width:0,height:0,sceneFunc(et,ot){const ut=ot.getParent(),ct=ut.padding();et.beginPath(),et.rect(-ct,-ct,ot.width()+ct*2,ot.height()+ct*2),et.moveTo(ot.width()/2,-ct),ut.rotateEnabled()&&ut.rotateLineVisible()&&et.lineTo(ot.width()/2,-ut.rotateAnchorOffset()*Util._sign(ot.height())-ct),et.fillStrokeShape(ot)},hitFunc:(et,ot)=>{if(!this.shouldOverdrawWholeArea())return;const ut=this.padding();et.beginPath(),et.rect(-ut,-ut,ot.width()+ut*2,ot.height()+ut*2),et.fillStrokeShape(ot)}});this.add(g),this._proxyDrag(g),g.on("dragstart",et=>{et.cancelBubble=!0}),g.on("dragmove",et=>{et.cancelBubble=!0}),g.on("dragend",et=>{et.cancelBubble=!0}),this.on("dragmove",et=>{this.update()})}_handleMouseDown(g){if(this._transforming)return;this._movingAnchorName=g.target.name().split(" ")[0];const et=this._getNodeRect(),ot=et.width,ut=et.height,ct=Math.sqrt(Math.pow(ot,2)+Math.pow(ut,2));this.sin=Math.abs(ut/ct),this.cos=Math.abs(ot/ct),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const dt=g.target.getAbsolutePosition(),ft=g.target.getStage().getPointerPosition();this._anchorDragOffset={x:ft.x-dt.x,y:ft.y-dt.y},activeTransformersCount++,this._fire("transformstart",{evt:g.evt,target:this.getNode()}),this._nodes.forEach(St=>{St._fire("transformstart",{evt:g.evt,target:St})})}_handleMouseMove(g){let et,ot,ut;const ct=this.findOne("."+this._movingAnchorName),dt=ct.getStage();dt.setPointersPositions(g);const ft=dt.getPointerPosition();let St={x:ft.x-this._anchorDragOffset.x,y:ft.y-this._anchorDragOffset.y};const kt=ct.getAbsolutePosition();this.anchorDragBoundFunc()&&(St=this.anchorDragBoundFunc()(kt,St,g)),ct.setAbsolutePosition(St);const Tt=ct.getAbsolutePosition();if(kt.x===Tt.x&&kt.y===Tt.y)return;if(this._movingAnchorName==="rotater"){const Kt=this._getNodeRect();et=ct.x()-Kt.width/2,ot=-ct.y()+Kt.height/2;let en=Math.atan2(-ot,et)+Math.PI/2;Kt.height<0&&(en-=Math.PI);const on=Konva$1.getAngle(this.rotation())+en,an=Konva$1.getAngle(this.rotationSnapTolerance()),dn=getSnap(this.rotationSnaps(),on,an)-Kt.rotation,Sn=rotateAroundCenter(Kt,dn);this._fitNodesInto(Sn,g);return}const Rt=this.shiftBehavior();let jt;Rt==="inverted"?jt=this.keepRatio()&&!g.shiftKey:Rt==="none"?jt=this.keepRatio():jt=this.keepRatio()||g.shiftKey;let Ft=this.centeredScaling()||g.altKey;if(this._movingAnchorName==="top-left"){if(jt){const Kt=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};ut=Math.sqrt(Math.pow(Kt.x-ct.x(),2)+Math.pow(Kt.y-ct.y(),2));const en=this.findOne(".top-left").x()>Kt.x?-1:1,tn=this.findOne(".top-left").y()>Kt.y?-1:1;et=ut*this.cos*en,ot=ut*this.sin*tn,this.findOne(".top-left").x(Kt.x-et),this.findOne(".top-left").y(Kt.y-ot)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ct.y());else if(this._movingAnchorName==="top-right"){if(jt){const Kt=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};ut=Math.sqrt(Math.pow(ct.x()-Kt.x,2)+Math.pow(Kt.y-ct.y(),2));const en=this.findOne(".top-right").x()<Kt.x?-1:1,tn=this.findOne(".top-right").y()>Kt.y?-1:1;et=ut*this.cos*en,ot=ut*this.sin*tn,this.findOne(".top-right").x(Kt.x+et),this.findOne(".top-right").y(Kt.y-ot)}var Bt=ct.position();this.findOne(".top-left").y(Bt.y),this.findOne(".bottom-right").x(Bt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ct.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ct.x());else if(this._movingAnchorName==="bottom-left"){if(jt){const Kt=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};ut=Math.sqrt(Math.pow(Kt.x-ct.x(),2)+Math.pow(ct.y()-Kt.y,2));const en=Kt.x<ct.x()?-1:1,tn=ct.y()<Kt.y?-1:1;et=ut*this.cos*en,ot=ut*this.sin*tn,ct.x(Kt.x-et),ct.y(Kt.y+ot)}Bt=ct.position(),this.findOne(".top-left").x(Bt.x),this.findOne(".bottom-right").y(Bt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ct.y());else if(this._movingAnchorName==="bottom-right"){if(jt){const Kt=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};ut=Math.sqrt(Math.pow(ct.x()-Kt.x,2)+Math.pow(ct.y()-Kt.y,2));const en=this.findOne(".bottom-right").x()<Kt.x?-1:1,tn=this.findOne(".bottom-right").y()<Kt.y?-1:1;et=ut*this.cos*en,ot=ut*this.sin*tn,this.findOne(".bottom-right").x(Kt.x+et),this.findOne(".bottom-right").y(Kt.y+ot)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(Ft=this.centeredScaling()||g.altKey,Ft){const Kt=this.findOne(".top-left"),en=this.findOne(".bottom-right"),tn=Kt.x(),on=Kt.y(),an=this.getWidth()-en.x(),un=this.getHeight()-en.y();en.move({x:-tn,y:-on}),Kt.move({x:an,y:un})}const Ht=this.findOne(".top-left").getAbsolutePosition();et=Ht.x,ot=Ht.y;const Yt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),zt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:et,y:ot,width:Yt,height:zt,rotation:Konva$1.getAngle(this.rotation())},g)}_handleMouseUp(g){this._removeEvents(g)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(g){var et;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const ot=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:g,target:ot}),(et=this.getLayer())===null||et===void 0||et.batchDraw(),ot&&this._nodes.forEach(ut=>{var ct;ut._fire("transformend",{evt:g,target:ut}),(ct=ut.getLayer())===null||ct===void 0||ct.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(g,et){const ot=this._getNodeRect(),ut=1;if(Util._inRange(g.width,-this.padding()*2-ut,ut)){this.update();return}if(Util._inRange(g.height,-this.padding()*2-ut,ut)){this.update();return}const ct=new Transform;if(ct.rotate(Konva$1.getAngle(this.rotation())),this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("left")>=0){const jt=ct.point({x:-this.padding()*2,y:0});g.x+=jt.x,g.y+=jt.y,g.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y}else if(this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("right")>=0){const jt=ct.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.width+=this.padding()*2}if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("top")>=0){const jt=ct.point({x:0,y:-this.padding()*2});g.x+=jt.x,g.y+=jt.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.height+=this.padding()*2}else if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const jt=ct.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.height+=this.padding()*2}if(this.boundBoxFunc()){const jt=this.boundBoxFunc()(ot,g);jt?g=jt:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const dt=1e7,ft=new Transform;ft.translate(ot.x,ot.y),ft.rotate(ot.rotation),ft.scale(ot.width/dt,ot.height/dt);const St=new Transform,kt=g.width/dt,Tt=g.height/dt;this.flipEnabled()===!1?(St.translate(g.x,g.y),St.rotate(g.rotation),St.translate(g.width<0?g.width:0,g.height<0?g.height:0),St.scale(Math.abs(kt),Math.abs(Tt))):(St.translate(g.x,g.y),St.rotate(g.rotation),St.scale(kt,Tt));const Rt=St.multiply(ft.invert());this._nodes.forEach(jt=>{var Ft;if(!jt.getStage())return;const Bt=jt.getParent().getAbsoluteTransform(),Ht=jt.getTransform().copy();Ht.translate(jt.offsetX(),jt.offsetY());const Yt=new Transform;Yt.multiply(Bt.copy().invert()).multiply(Rt).multiply(Bt).multiply(Ht);const zt=Yt.decompose();jt.setAttrs(zt),(Ft=jt.getLayer())===null||Ft===void 0||Ft.batchDraw()}),this.rotation(Util._getRotation(g.rotation)),this._nodes.forEach(jt=>{this._fire("transform",{evt:et,target:jt}),jt._fire("transform",{evt:et,target:jt})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(g,et){this.findOne(g).setAttrs(et)}update(){var g;const et=this._getNodeRect();this.rotation(Util._getRotation(et.rotation));const ot=et.width,ut=et.height,ct=this.enabledAnchors(),dt=this.resizeEnabled(),ft=this.padding(),St=this.anchorSize(),kt=this.find("._anchor");kt.forEach(Rt=>{Rt.setAttrs({width:St,height:St,offsetX:St/2,offsetY:St/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:St/2+ft,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:ot/2,y:0,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:ot,y:0,offsetX:St/2-ft,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:ut/2,offsetX:St/2+ft,visible:dt&&ct.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:ot,y:ut/2,offsetX:St/2-ft,visible:dt&&ct.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:ut,offsetX:St/2+ft,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:ot/2,y:ut,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:ot,y:ut,offsetX:St/2-ft,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:ot/2,y:-this.rotateAnchorOffset()*Util._sign(ut)-ft,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:ot,height:ut,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(Rt=>Rt.draggable()),x:0,y:0});const Tt=this.anchorStyleFunc();Tt&&kt.forEach(Rt=>{Tt(Rt)}),(g=this.getLayer())===null||g===void 0||g.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const g=this.findOne("."+this._movingAnchorName);g&&g.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(g){return Node$1.prototype.clone.call(this,g)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Transformer$1.isTransforming=()=>activeTransformersCount>0;function validateAnchors(it){return it instanceof Array||Util.warn("enabledAnchors value should be an array"),it instanceof Array&&it.forEach(function(g){ANCHORS_NAMES.indexOf(g)===-1&&Util.warn("Unknown anchor name: "+g+". Available names are: "+ANCHORS_NAMES.join(", "))}),it||[]}Transformer$1.prototype.className="Transformer";_registerNode(Transformer$1);Factory.addGetterSetter(Transformer$1,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer$1,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer$1,"resizeEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateEnabled",!0);Factory.addGetterSetter(Transformer$1,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer$1,"rotationSnaps",[]);Factory.addGetterSetter(Transformer$1,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer$1,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"anchorFill","white");Factory.addGetterSetter(Transformer$1,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderDash");Factory.addGetterSetter(Transformer$1,"keepRatio",!0);Factory.addGetterSetter(Transformer$1,"shiftBehavior","default");Factory.addGetterSetter(Transformer$1,"centeredScaling",!1);Factory.addGetterSetter(Transformer$1,"ignoreStroke",!1);Factory.addGetterSetter(Transformer$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"nodes");Factory.addGetterSetter(Transformer$1,"node");Factory.addGetterSetter(Transformer$1,"boundBoxFunc");Factory.addGetterSetter(Transformer$1,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer$1,"anchorStyleFunc");Factory.addGetterSetter(Transformer$1,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer$1,"useSingleNodeRotation",!0);Factory.backCompat(Transformer$1,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,Konva$1.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(it,g){const et=it.data,ot=it.width,ut=it.height;let ct,dt,ft,St,kt,Tt,Rt,jt,Ft,Bt,Ht,Yt,zt,Kt,en,tn,on,an,un,dn;const Sn=g+g+1,mn=ot-1,bn=ut-1,En=g+1,kn=En*(En+1)/2,Pn=new BlurStack,Ln=mul_table[g],gn=shg_table[g];let Mn=null,yn=Pn,vn=null,On=null;for(let Cn=1;Cn<Sn;Cn++)yn=yn.next=new BlurStack,Cn===En&&(Mn=yn);yn.next=Pn,ft=dt=0;for(let Cn=0;Cn<ut;Cn++){Yt=zt=Kt=en=St=kt=Tt=Rt=0,jt=En*(tn=et[dt]),Ft=En*(on=et[dt+1]),Bt=En*(an=et[dt+2]),Ht=En*(un=et[dt+3]),St+=kn*tn,kt+=kn*on,Tt+=kn*an,Rt+=kn*un,yn=Pn;for(let Vn=0;Vn<En;Vn++)yn.r=tn,yn.g=on,yn.b=an,yn.a=un,yn=yn.next;for(let Vn=1;Vn<En;Vn++)ct=dt+((mn<Vn?mn:Vn)<<2),St+=(yn.r=tn=et[ct])*(dn=En-Vn),kt+=(yn.g=on=et[ct+1])*dn,Tt+=(yn.b=an=et[ct+2])*dn,Rt+=(yn.a=un=et[ct+3])*dn,Yt+=tn,zt+=on,Kt+=an,en+=un,yn=yn.next;vn=Pn,On=Mn;for(let Vn=0;Vn<ot;Vn++)et[dt+3]=un=Rt*Ln>>gn,un!==0?(un=255/un,et[dt]=(St*Ln>>gn)*un,et[dt+1]=(kt*Ln>>gn)*un,et[dt+2]=(Tt*Ln>>gn)*un):et[dt]=et[dt+1]=et[dt+2]=0,St-=jt,kt-=Ft,Tt-=Bt,Rt-=Ht,jt-=vn.r,Ft-=vn.g,Bt-=vn.b,Ht-=vn.a,ct=ft+((ct=Vn+g+1)<mn?ct:mn)<<2,Yt+=vn.r=et[ct],zt+=vn.g=et[ct+1],Kt+=vn.b=et[ct+2],en+=vn.a=et[ct+3],St+=Yt,kt+=zt,Tt+=Kt,Rt+=en,vn=vn.next,jt+=tn=On.r,Ft+=on=On.g,Bt+=an=On.b,Ht+=un=On.a,Yt-=tn,zt-=on,Kt-=an,en-=un,On=On.next,dt+=4;ft+=ot}for(let Cn=0;Cn<ot;Cn++){zt=Kt=en=Yt=kt=Tt=Rt=St=0,dt=Cn<<2,jt=En*(tn=et[dt]),Ft=En*(on=et[dt+1]),Bt=En*(an=et[dt+2]),Ht=En*(un=et[dt+3]),St+=kn*tn,kt+=kn*on,Tt+=kn*an,Rt+=kn*un,yn=Pn;for(let Qn=0;Qn<En;Qn++)yn.r=tn,yn.g=on,yn.b=an,yn.a=un,yn=yn.next;let Vn=ot;for(let Qn=1;Qn<=g;Qn++)dt=Vn+Cn<<2,St+=(yn.r=tn=et[dt])*(dn=En-Qn),kt+=(yn.g=on=et[dt+1])*dn,Tt+=(yn.b=an=et[dt+2])*dn,Rt+=(yn.a=un=et[dt+3])*dn,Yt+=tn,zt+=on,Kt+=an,en+=un,yn=yn.next,Qn<bn&&(Vn+=ot);dt=Cn,vn=Pn,On=Mn;for(let Qn=0;Qn<ut;Qn++)ct=dt<<2,et[ct+3]=un=Rt*Ln>>gn,un>0?(un=255/un,et[ct]=(St*Ln>>gn)*un,et[ct+1]=(kt*Ln>>gn)*un,et[ct+2]=(Tt*Ln>>gn)*un):et[ct]=et[ct+1]=et[ct+2]=0,St-=jt,kt-=Ft,Tt-=Bt,Rt-=Ht,jt-=vn.r,Ft-=vn.g,Bt-=vn.b,Ht-=vn.a,ct=Cn+((ct=Qn+En)<bn?ct:bn)*ot<<2,St+=Yt+=vn.r=et[ct],kt+=zt+=vn.g=et[ct+1],Tt+=Kt+=vn.b=et[ct+2],Rt+=en+=vn.a=et[ct+3],vn=vn.next,jt+=tn=On.r,Ft+=on=On.g,Bt+=an=On.b,Ht+=un=On.a,Yt-=tn,zt-=on,Kt-=an,en-=un,On=On.next,dt+=ot}}const Blur=function it(g){const et=Math.round(this.blurRadius());et>0&&filterGaussBlurRGBA(g,et)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(it){const g=this.brightness()*255,et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=4)et[ut]+=g,et[ut+1]+=g,et[ut+2]+=g};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(it){const g=this.brightness(),et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=4)et[ut]=Math.min(255,et[ut]*g),et[ut+1]=Math.min(255,et[ut+1]*g),et[ut+2]=Math.min(255,et[ut+2]*g)},Contrast=function(it){const g=Math.pow((this.contrast()+100)/100,2),et=it.data,ot=et.length;let ut=150,ct=150,dt=150;for(let ft=0;ft<ot;ft+=4)ut=et[ft],ct=et[ft+1],dt=et[ft+2],ut/=255,ut-=.5,ut*=g,ut+=.5,ut*=255,ct/=255,ct-=.5,ct*=g,ct+=.5,ct*=255,dt/=255,dt-=.5,dt*=g,dt+=.5,dt*=255,ut=ut<0?0:ut>255?255:ut,ct=ct<0?0:ct>255?255:ct,dt=dt<0?0:dt>255?255:dt,et[ft]=ut,et[ft+1]=ct,et[ft+2]=dt};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(it){var g,et,ot,ut,ct,dt,ft,St,kt;const Tt=it.data,Rt=it.width,jt=it.height,Ft=Math.min(1,Math.max(0,(et=(g=this.embossStrength)===null||g===void 0?void 0:g.call(this))!==null&&et!==void 0?et:.5)),Bt=Math.min(1,Math.max(0,(ut=(ot=this.embossWhiteLevel)===null||ot===void 0?void 0:ot.call(this))!==null&&ut!==void 0?ut:.5)),Yt=(ft={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(dt=(ct=this.embossDirection)===null||ct===void 0?void 0:ct.call(this))!==null&&dt!==void 0?dt:"top-left"])!==null&&ft!==void 0?ft:315,zt=!!((kt=(St=this.embossBlend)===null||St===void 0?void 0:St.call(this))!==null&&kt!==void 0&&kt),Kt=Ft*10,en=Bt*255,tn=Yt*Math.PI/180,on=Math.cos(tn),an=Math.sin(tn),un=128/1020*Kt,dn=new Uint8ClampedArray(Tt),Sn=new Float32Array(Rt*jt);for(let Pn=0,Ln=0;Ln<Tt.length;Ln+=4,Pn++)Sn[Pn]=.2126*dn[Ln]+.7152*dn[Ln+1]+.0722*dn[Ln+2];const mn=[-1,0,1,-2,0,2,-1,0,1],bn=[-1,-2,-1,0,0,0,1,2,1],En=[-Rt-1,-Rt,-Rt+1,-1,0,1,Rt-1,Rt,Rt+1],kn=Pn=>Pn<0?0:Pn>255?255:Pn;for(let Pn=1;Pn<jt-1;Pn++)for(let Ln=1;Ln<Rt-1;Ln++){const gn=Pn*Rt+Ln;let Mn=0,yn=0;Mn+=Sn[gn+En[0]]*mn[0],yn+=Sn[gn+En[0]]*bn[0],Mn+=Sn[gn+En[1]]*mn[1],yn+=Sn[gn+En[1]]*bn[1],Mn+=Sn[gn+En[2]]*mn[2],yn+=Sn[gn+En[2]]*bn[2],Mn+=Sn[gn+En[3]]*mn[3],yn+=Sn[gn+En[3]]*bn[3],Mn+=Sn[gn+En[5]]*mn[5],yn+=Sn[gn+En[5]]*bn[5],Mn+=Sn[gn+En[6]]*mn[6],yn+=Sn[gn+En[6]]*bn[6],Mn+=Sn[gn+En[7]]*mn[7],yn+=Sn[gn+En[7]]*bn[7],Mn+=Sn[gn+En[8]]*mn[8],yn+=Sn[gn+En[8]]*bn[8];const vn=on*Mn+an*yn,On=kn(en+vn*un),Cn=gn*4;if(zt){const Vn=On-en;Tt[Cn]=kn(dn[Cn]+Vn),Tt[Cn+1]=kn(dn[Cn+1]+Vn),Tt[Cn+2]=kn(dn[Cn+2]+Vn),Tt[Cn+3]=dn[Cn+3]}else Tt[Cn]=Tt[Cn+1]=Tt[Cn+2]=On,Tt[Cn+3]=dn[Cn+3]}for(let Pn=0;Pn<Rt;Pn++){let Ln=Pn*4,gn=((jt-1)*Rt+Pn)*4;Tt[Ln]=dn[Ln],Tt[Ln+1]=dn[Ln+1],Tt[Ln+2]=dn[Ln+2],Tt[Ln+3]=dn[Ln+3],Tt[gn]=dn[gn],Tt[gn+1]=dn[gn+1],Tt[gn+2]=dn[gn+2],Tt[gn+3]=dn[gn+3]}for(let Pn=1;Pn<jt-1;Pn++){let Ln=Pn*Rt*4,gn=(Pn*Rt+(Rt-1))*4;Tt[Ln]=dn[Ln],Tt[Ln+1]=dn[Ln+1],Tt[Ln+2]=dn[Ln+2],Tt[Ln+3]=dn[Ln+3],Tt[gn]=dn[gn],Tt[gn+1]=dn[gn+1],Tt[gn+2]=dn[gn+2],Tt[gn+3]=dn[gn+3]}return it};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(it,g,et,ot,ut){const ct=et-g,dt=ut-ot;if(ct===0)return ot+dt/2;if(dt===0)return ot;let ft=(it-g)/ct;return ft=dt*ft+ot,ft}const Enhance=function(it){const g=it.data,et=g.length;let ot=g[0],ut=ot,ct,dt=g[1],ft=dt,St,kt=g[2],Tt=kt,Rt;const jt=this.enhance();if(jt===0)return;for(let en=0;en<et;en+=4)ct=g[en+0],ct<ot?ot=ct:ct>ut&&(ut=ct),St=g[en+1],St<dt?dt=St:St>ft&&(ft=St),Rt=g[en+2],Rt<kt?kt=Rt:Rt>Tt&&(Tt=Rt);ut===ot&&(ut=255,ot=0),ft===dt&&(ft=255,dt=0),Tt===kt&&(Tt=255,kt=0);let Ft,Bt,Ht,Yt,zt,Kt;if(jt>0)Ft=ut+jt*(255-ut),Bt=ot-jt*(ot-0),Ht=ft+jt*(255-ft),Yt=dt-jt*(dt-0),zt=Tt+jt*(255-Tt),Kt=kt-jt*(kt-0);else{const en=(ut+ot)*.5;Ft=ut+jt*(ut-en),Bt=ot+jt*(ot-en);const tn=(ft+dt)*.5;Ht=ft+jt*(ft-tn),Yt=dt+jt*(dt-tn);const on=(Tt+kt)*.5;zt=Tt+jt*(Tt-on),Kt=kt+jt*(kt-on)}for(let en=0;en<et;en+=4)g[en+0]=remap(g[en+0],ot,ut,Bt,Ft),g[en+1]=remap(g[en+1],dt,ft,Yt,Ht),g[en+2]=remap(g[en+2],kt,Tt,Kt,zt)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ut=.34*g[ot]+.5*g[ot+1]+.16*g[ot+2];g[ot]=ut,g[ot+1]=ut,g[ot+2]=ut}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(it){const g=it.data,et=g.length,ot=1,ut=Math.pow(2,this.saturation()),ct=Math.abs(this.hue()+360)%360,dt=this.luminance()*127,ft=ot*ut*Math.cos(ct*Math.PI/180),St=ot*ut*Math.sin(ct*Math.PI/180),kt=.299*ot+.701*ft+.167*St,Tt=.587*ot-.587*ft+.33*St,Rt=.114*ot-.114*ft-.497*St,jt=.299*ot-.299*ft-.328*St,Ft=.587*ot+.413*ft+.035*St,Bt=.114*ot-.114*ft+.293*St,Ht=.299*ot-.3*ft+1.25*St,Yt=.587*ot-.586*ft-1.05*St,zt=.114*ot+.886*ft-.2*St;let Kt,en,tn,on;for(let an=0;an<et;an+=4)Kt=g[an+0],en=g[an+1],tn=g[an+2],on=g[an+3],g[an+0]=kt*Kt+Tt*en+Rt*tn+dt,g[an+1]=jt*Kt+Ft*en+Bt*tn+dt,g[an+2]=Ht*Kt+Yt*en+zt*tn+dt,g[an+3]=on},HSV=function(it){const g=it.data,et=g.length,ot=Math.pow(2,this.value()),ut=Math.pow(2,this.saturation()),ct=Math.abs(this.hue()+360)%360,dt=ot*ut*Math.cos(ct*Math.PI/180),ft=ot*ut*Math.sin(ct*Math.PI/180),St=.299*ot+.701*dt+.167*ft,kt=.587*ot-.587*dt+.33*ft,Tt=.114*ot-.114*dt-.497*ft,Rt=.299*ot-.299*dt-.328*ft,jt=.587*ot+.413*dt+.035*ft,Ft=.114*ot-.114*dt+.293*ft,Bt=.299*ot-.3*dt+1.25*ft,Ht=.587*ot-.586*dt-1.05*ft,Yt=.114*ot+.886*dt-.2*ft;for(let zt=0;zt<et;zt+=4){const Kt=g[zt+0],en=g[zt+1],tn=g[zt+2],on=g[zt+3];g[zt+0]=St*Kt+kt*en+Tt*tn,g[zt+1]=Rt*Kt+jt*en+Ft*tn,g[zt+2]=Bt*Kt+Ht*en+Yt*tn,g[zt+3]=on}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4)g[ot]=255-g[ot],g[ot+1]=255-g[ot+1],g[ot+2]=255-g[ot+2]},ToPolar=function(it,g,et){const ot=it.data,ut=g.data,ct=it.width,dt=it.height,ft=et.polarCenterX||ct/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ct-ft,Rt=dt-St;const jt=Math.sqrt(Tt*Tt+Rt*Rt);kt=jt>kt?jt:kt;const Ft=dt,Bt=ct,Ht=360/Bt*Math.PI/180;for(let Yt=0;Yt<Bt;Yt+=1){const zt=Math.sin(Yt*Ht),Kt=Math.cos(Yt*Ht);for(let en=0;en<Ft;en+=1){Tt=Math.floor(ft+kt*en/Ft*Kt),Rt=Math.floor(St+kt*en/Ft*zt);let tn=(Rt*ct+Tt)*4;const on=ot[tn+0],an=ot[tn+1],un=ot[tn+2],dn=ot[tn+3];tn=(Yt+en*ct)*4,ut[tn+0]=on,ut[tn+1]=an,ut[tn+2]=un,ut[tn+3]=dn}}},FromPolar=function(it,g,et){const ot=it.data,ut=g.data,ct=it.width,dt=it.height,ft=et.polarCenterX||ct/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ct-ft,Rt=dt-St;const jt=Math.sqrt(Tt*Tt+Rt*Rt);kt=jt>kt?jt:kt;const Ft=dt,Bt=ct,Ht=et.polarRotation||0;let Yt,zt;for(Tt=0;Tt<ct;Tt+=1)for(Rt=0;Rt<dt;Rt+=1){const Kt=Tt-ft,en=Rt-St,tn=Math.sqrt(Kt*Kt+en*en)*Ft/kt;let on=(Math.atan2(en,Kt)*180/Math.PI+360+Ht)%360;on=on*Bt/360,Yt=Math.floor(on),zt=Math.floor(tn);let an=(zt*ct+Yt)*4;const un=ot[an+0],dn=ot[an+1],Sn=ot[an+2],mn=ot[an+3];an=(Rt*ct+Tt)*4,ut[an+0]=un,ut[an+1]=dn,ut[an+2]=Sn,ut[an+3]=mn}},Kaleidoscope=function(it){const g=it.width,et=it.height;let ot,ut,ct,dt,ft,St,kt,Tt,Rt,jt,Ft=Math.round(this.kaleidoscopePower());const Bt=Math.round(this.kaleidoscopeAngle()),Ht=Math.floor(g*(Bt%360)/360);if(Ft<1)return;const Yt=Util.createCanvasElement();Yt.width=g,Yt.height=et;const zt=Yt.getContext("2d").getImageData(0,0,g,et);Util.releaseCanvas(Yt),ToPolar(it,zt,{polarCenterX:g/2,polarCenterY:et/2});let Kt=g/Math.pow(2,Ft);for(;Kt<=8;)Kt=Kt*2,Ft-=1;Kt=Math.ceil(Kt);let en=Kt,tn=0,on=en,an=1;for(Ht+Kt>g&&(tn=en,on=0,an=-1),ut=0;ut<et;ut+=1)for(ot=tn;ot!==on;ot+=an)ct=Math.round(ot+Ht)%g,Rt=(g*ut+ct)*4,ft=zt.data[Rt+0],St=zt.data[Rt+1],kt=zt.data[Rt+2],Tt=zt.data[Rt+3],jt=(g*ut+ot)*4,zt.data[jt+0]=ft,zt.data[jt+1]=St,zt.data[jt+2]=kt,zt.data[jt+3]=Tt;for(ut=0;ut<et;ut+=1)for(en=Math.floor(Kt),dt=0;dt<Ft;dt+=1){for(ot=0;ot<en+1;ot+=1)Rt=(g*ut+ot)*4,ft=zt.data[Rt+0],St=zt.data[Rt+1],kt=zt.data[Rt+2],Tt=zt.data[Rt+3],jt=(g*ut+en*2-ot-1)*4,zt.data[jt+0]=ft,zt.data[jt+1]=St,zt.data[jt+2]=kt,zt.data[jt+3]=Tt;en*=2}FromPolar(zt,it,{polarRotation:0})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(it,g,et){let ot=(et*it.width+g)*4;const ut=[];return ut.push(it.data[ot++],it.data[ot++],it.data[ot++],it.data[ot++]),ut}function rgbDistance(it,g){return Math.sqrt(Math.pow(it[0]-g[0],2)+Math.pow(it[1]-g[1],2)+Math.pow(it[2]-g[2],2))}function rgbMean(it){const g=[0,0,0];for(let et=0;et<it.length;et++)g[0]+=it[et][0],g[1]+=it[et][1],g[2]+=it[et][2];return g[0]/=it.length,g[1]/=it.length,g[2]/=it.length,g}function backgroundMask(it,g){const et=pixelAt(it,0,0),ot=pixelAt(it,it.width-1,0),ut=pixelAt(it,0,it.height-1),ct=pixelAt(it,it.width-1,it.height-1),dt=g||10;if(rgbDistance(et,ot)<dt&&rgbDistance(ot,ct)<dt&&rgbDistance(ct,ut)<dt&&rgbDistance(ut,et)<dt){const ft=rgbMean([ot,et,ct,ut]),St=[];for(let kt=0;kt<it.width*it.height;kt++){const Tt=rgbDistance(ft,[it.data[kt*4],it.data[kt*4+1],it.data[kt*4+2]]);St[kt]=Tt<dt?0:255}return St}}function applyMask(it,g){for(let et=0;et<it.width*it.height;et++)it.data[4*et+3]=g[et]}function erodeMask(it,g,et){const ot=[1,1,1,1,0,1,1,1,1],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let jt=0;jt<ut;jt++){const Ft=ft+Rt-ct,Bt=St+jt-ct;if(Ft>=0&&Ft<et&&Bt>=0&&Bt<g){const Ht=Ft*g+Bt,Yt=ot[Rt*ut+jt];Tt+=it[Ht]*Yt}}dt[kt]=Tt===255*8?255:0}return dt}function dilateMask(it,g,et){const ot=[1,1,1,1,1,1,1,1,1],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let jt=0;jt<ut;jt++){const Ft=ft+Rt-ct,Bt=St+jt-ct;if(Ft>=0&&Ft<et&&Bt>=0&&Bt<g){const Ht=Ft*g+Bt,Yt=ot[Rt*ut+jt];Tt+=it[Ht]*Yt}}dt[kt]=Tt>=255*4?255:0}return dt}function smoothEdgeMask(it,g,et){const ot=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let jt=0;jt<ut;jt++){const Ft=ft+Rt-ct,Bt=St+jt-ct;if(Ft>=0&&Ft<et&&Bt>=0&&Bt<g){const Ht=Ft*g+Bt,Yt=ot[Rt*ut+jt];Tt+=it[Ht]*Yt}}dt[kt]=Tt}return dt}const Mask=function(it){const g=this.threshold();let et=backgroundMask(it,g);return et&&(et=erodeMask(et,it.width,it.height),et=dilateMask(et,it.width,it.height),et=smoothEdgeMask(et,it.width,it.height),applyMask(it,et)),it};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(it){const g=this.noise()*255,et=it.data,ot=et.length,ut=g/2;for(let ct=0;ct<ot;ct+=4)et[ct+0]+=ut-2*ut*Math.random(),et[ct+1]+=ut-2*ut*Math.random(),et[ct+2]+=ut-2*ut*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(it){let g=Math.ceil(this.pixelSize()),et=it.width,ot=it.height,ut=Math.ceil(et/g),ct=Math.ceil(ot/g),dt=it.data;if(g<=0){Util.error("pixelSize value can not be <= 0");return}for(let ft=0;ft<ut;ft+=1)for(let St=0;St<ct;St+=1){let kt=0,Tt=0,Rt=0,jt=0;const Ft=ft*g,Bt=Ft+g,Ht=St*g,Yt=Ht+g;let zt=0;for(let Kt=Ft;Kt<Bt;Kt+=1)if(!(Kt>=et))for(let en=Ht;en<Yt;en+=1){if(en>=ot)continue;const tn=(et*en+Kt)*4;kt+=dt[tn+0],Tt+=dt[tn+1],Rt+=dt[tn+2],jt+=dt[tn+3],zt+=1}kt=kt/zt,Tt=Tt/zt,Rt=Rt/zt,jt=jt/zt;for(let Kt=Ft;Kt<Bt;Kt+=1)if(!(Kt>=et))for(let en=Ht;en<Yt;en+=1){if(en>=ot)continue;const tn=(et*en+Kt)*4;dt[tn+0]=kt,dt[tn+1]=Tt,dt[tn+2]=Rt,dt[tn+3]=jt}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(it){const g=Math.round(this.levels()*254)+1,et=it.data,ot=et.length,ut=255/g;for(let ct=0;ct<ot;ct+=1)et[ct]=Math.floor(et[ct]/ut)*ut};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB=function(it){const g=it.data,et=g.length,ot=this.red(),ut=this.green(),ct=this.blue();for(let dt=0;dt<et;dt+=4){const ft=(.34*g[dt]+.5*g[dt+1]+.16*g[dt+2])/255;g[dt]=ft*ot,g[dt+1]=ft*ut,g[dt+2]=ft*ct,g[dt+3]=g[dt+3]}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(it){const g=it.data,et=g.length,ot=this.red(),ut=this.green(),ct=this.blue(),dt=this.alpha();for(let ft=0;ft<et;ft+=4){const St=1-dt;g[ft]=ot*dt+g[ft]*St,g[ft+1]=ut*dt+g[ft+1]*St,g[ft+2]=ct*dt+g[ft+2]*St}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(it){return this._filterUpToDate=!1,it>1?1:it<0?0:it});const Sepia=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ut=g[ot+0],ct=g[ot+1],dt=g[ot+2];g[ot+0]=Math.min(255,ut*.393+ct*.769+dt*.189),g[ot+1]=Math.min(255,ut*.349+ct*.686+dt*.168),g[ot+2]=Math.min(255,ut*.272+ct*.534+dt*.131)}},Solarize=function(it){const et=it.data;for(let ot=0;ot<et.length;ot+=4){const ut=et[ot],ct=et[ot+1],dt=et[ot+2];.2126*ut+.7152*ct+.0722*dt>=128&&(et[ot]=255-ut,et[ot+1]=255-ct,et[ot+2]=255-dt)}return it},Threshold=function(it){const g=this.threshold()*255,et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=1)et[ut]=et[ut]<g?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva.Util._assign(Konva,{Arc,Arrow:Arrow$1,Circle,Ellipse:Ellipse$1,Image:Image$2,Label,Tag,Line,Path:Path$1,Rect:Rect$1,RegularPolygon,Ring,Sprite,Star,Text:Text$2,TextPath,Transformer:Transformer$1,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(it){function g(yn,vn){var On=yn.length;yn.push(vn);e:for(;0<On;){var Cn=On-1>>>1,Vn=yn[Cn];if(0<ut(Vn,vn))yn[Cn]=vn,yn[On]=Vn,On=Cn;else break e}}function et(yn){return yn.length===0?null:yn[0]}function ot(yn){if(yn.length===0)return null;var vn=yn[0],On=yn.pop();if(On!==vn){yn[0]=On;e:for(var Cn=0,Vn=yn.length,Qn=Vn>>>1;Cn<Qn;){var ir=2*(Cn+1)-1,ar=yn[ir],rr=ir+1,hr=yn[rr];if(0>ut(ar,On))rr<Vn&&0>ut(hr,ar)?(yn[Cn]=hr,yn[rr]=On,Cn=rr):(yn[Cn]=ar,yn[ir]=On,Cn=ir);else if(rr<Vn&&0>ut(hr,On))yn[Cn]=hr,yn[rr]=On,Cn=rr;else break e}}return vn}function ut(yn,vn){var On=yn.sortIndex-vn.sortIndex;return On!==0?On:yn.id-vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;it.unstable_now=function(){return ct.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,jt=3,Ft=!1,Bt=!1,Ht=!1,Yt=typeof setTimeout=="function"?setTimeout:null,zt=typeof clearTimeout=="function"?clearTimeout:null,Kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function en(yn){for(var vn=et(kt);vn!==null;){if(vn.callback===null)ot(kt);else if(vn.startTime<=yn)ot(kt),vn.sortIndex=vn.expirationTime,g(St,vn);else break;vn=et(kt)}}function tn(yn){if(Ht=!1,en(yn),!Bt)if(et(St)!==null)Bt=!0,gn(on);else{var vn=et(kt);vn!==null&&Mn(tn,vn.startTime-yn)}}function on(yn,vn){Bt=!1,Ht&&(Ht=!1,zt(dn),dn=-1),Ft=!0;var On=jt;try{for(en(vn),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>vn)||yn&&!bn());){var Cn=Rt.callback;if(typeof Cn=="function"){Rt.callback=null,jt=Rt.priorityLevel;var Vn=Cn(Rt.expirationTime<=vn);vn=it.unstable_now(),typeof Vn=="function"?Rt.callback=Vn:Rt===et(St)&&ot(St),en(vn)}else ot(St);Rt=et(St)}if(Rt!==null)var Qn=!0;else{var ir=et(kt);ir!==null&&Mn(tn,ir.startTime-vn),Qn=!1}return Qn}finally{Rt=null,jt=On,Ft=!1}}var an=!1,un=null,dn=-1,Sn=5,mn=-1;function bn(){return!(it.unstable_now()-mn<Sn)}function En(){if(un!==null){var yn=it.unstable_now();mn=yn;var vn=!0;try{vn=un(!0,yn)}finally{vn?kn():(an=!1,un=null)}}else an=!1}var kn;if(typeof Kt=="function")kn=function(){Kt(En)};else if(typeof MessageChannel<"u"){var Pn=new MessageChannel,Ln=Pn.port2;Pn.port1.onmessage=En,kn=function(){Ln.postMessage(null)}}else kn=function(){Yt(En,0)};function gn(yn){un=yn,an||(an=!0,kn())}function Mn(yn,vn){dn=Yt(function(){yn(it.unstable_now())},vn)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(yn){yn.callback=null},it.unstable_continueExecution=function(){Bt||Ft||(Bt=!0,gn(on))},it.unstable_forceFrameRate=function(yn){0>yn||125<yn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Sn=0<yn?Math.floor(1e3/yn):5},it.unstable_getCurrentPriorityLevel=function(){return jt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(yn){switch(jt){case 1:case 2:case 3:var vn=3;break;default:vn=jt}var On=jt;jt=vn;try{return yn()}finally{jt=On}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(yn,vn){switch(yn){case 1:case 2:case 3:case 4:case 5:break;default:yn=3}var On=jt;jt=yn;try{return vn()}finally{jt=On}},it.unstable_scheduleCallback=function(yn,vn,On){var Cn=it.unstable_now();switch(typeof On=="object"&&On!==null?(On=On.delay,On=typeof On=="number"&&0<On?Cn+On:Cn):On=Cn,yn){case 1:var Vn=-1;break;case 2:Vn=250;break;case 5:Vn=1073741823;break;case 4:Vn=1e4;break;default:Vn=5e3}return Vn=On+Vn,yn={id:Tt++,callback:vn,priorityLevel:yn,startTime:On,expirationTime:Vn,sortIndex:-1},On>Cn?(yn.sortIndex=On,g(kt,yn),et(St)===null&&yn===et(kt)&&(Ht?(zt(dn),dn=-1):Ht=!0,Mn(tn,On-Cn))):(yn.sortIndex=Vn,g(St,yn),Bt||Ft||(Bt=!0,gn(on))),yn},it.unstable_shouldYield=bn,it.unstable_wrapCallback=function(yn){var vn=jt;return function(){var On=jt;jt=vn;try{return yn.apply(this,arguments)}finally{jt=On}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function it(g){var et={},ot=reactExports,ut=requireScheduler(),ct=Object.assign;function dt(Zt){for(var nn="https://reactjs.org/docs/error-decoder.html?invariant="+Zt,hn=1;hn<arguments.length;hn++)nn+="&args[]="+encodeURIComponent(arguments[hn]);return"Minified React error #"+Zt+"; visit "+nn+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ft=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,St=Symbol.for("react.element"),kt=Symbol.for("react.portal"),Tt=Symbol.for("react.fragment"),Rt=Symbol.for("react.strict_mode"),jt=Symbol.for("react.profiler"),Ft=Symbol.for("react.provider"),Bt=Symbol.for("react.context"),Ht=Symbol.for("react.forward_ref"),Yt=Symbol.for("react.suspense"),zt=Symbol.for("react.suspense_list"),Kt=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),tn=Symbol.for("react.offscreen"),on=Symbol.iterator;function an(Zt){return Zt===null||typeof Zt!="object"?null:(Zt=on&&Zt[on]||Zt["@@iterator"],typeof Zt=="function"?Zt:null)}function un(Zt){if(Zt==null)return null;if(typeof Zt=="function")return Zt.displayName||Zt.name||null;if(typeof Zt=="string")return Zt;switch(Zt){case Tt:return"Fragment";case kt:return"Portal";case jt:return"Profiler";case Rt:return"StrictMode";case Yt:return"Suspense";case zt:return"SuspenseList"}if(typeof Zt=="object")switch(Zt.$$typeof){case Bt:return(Zt.displayName||"Context")+".Consumer";case Ft:return(Zt._context.displayName||"Context")+".Provider";case Ht:var nn=Zt.render;return Zt=Zt.displayName,Zt||(Zt=nn.displayName||nn.name||"",Zt=Zt!==""?"ForwardRef("+Zt+")":"ForwardRef"),Zt;case Kt:return nn=Zt.displayName||null,nn!==null?nn:un(Zt.type)||"Memo";case en:nn=Zt._payload,Zt=Zt._init;try{return un(Zt(nn))}catch{}}return null}function dn(Zt){var nn=Zt.type;switch(Zt.tag){case 24:return"Cache";case 9:return(nn.displayName||"Context")+".Consumer";case 10:return(nn._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Zt=nn.render,Zt=Zt.displayName||Zt.name||"",nn.displayName||(Zt!==""?"ForwardRef("+Zt+")":"ForwardRef");case 7:return"Fragment";case 5:return nn;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return un(nn);case 8:return nn===Rt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof nn=="function")return nn.displayName||nn.name||null;if(typeof nn=="string")return nn}return null}function Sn(Zt){var nn=Zt,hn=Zt;if(Zt.alternate)for(;nn.return;)nn=nn.return;else{Zt=nn;do nn=Zt,nn.flags&4098&&(hn=nn.return),Zt=nn.return;while(Zt)}return nn.tag===3?hn:null}function mn(Zt){if(Sn(Zt)!==Zt)throw Error(dt(188))}function bn(Zt){var nn=Zt.alternate;if(!nn){if(nn=Sn(Zt),nn===null)throw Error(dt(188));return nn!==Zt?null:Zt}for(var hn=Zt,xn=nn;;){var An=hn.return;if(An===null)break;var Un=An.alternate;if(Un===null){if(xn=An.return,xn!==null){hn=xn;continue}break}if(An.child===Un.child){for(Un=An.child;Un;){if(Un===hn)return mn(An),Zt;if(Un===xn)return mn(An),nn;Un=Un.sibling}throw Error(dt(188))}if(hn.return!==xn.return)hn=An,xn=Un;else{for(var or=!1,Sr=An.child;Sr;){if(Sr===hn){or=!0,hn=An,xn=Un;break}if(Sr===xn){or=!0,xn=An,hn=Un;break}Sr=Sr.sibling}if(!or){for(Sr=Un.child;Sr;){if(Sr===hn){or=!0,hn=Un,xn=An;break}if(Sr===xn){or=!0,xn=Un,hn=An;break}Sr=Sr.sibling}if(!or)throw Error(dt(189))}}if(hn.alternate!==xn)throw Error(dt(190))}if(hn.tag!==3)throw Error(dt(188));return hn.stateNode.current===hn?Zt:nn}function En(Zt){return Zt=bn(Zt),Zt!==null?kn(Zt):null}function kn(Zt){if(Zt.tag===5||Zt.tag===6)return Zt;for(Zt=Zt.child;Zt!==null;){var nn=kn(Zt);if(nn!==null)return nn;Zt=Zt.sibling}return null}function Pn(Zt){if(Zt.tag===5||Zt.tag===6)return Zt;for(Zt=Zt.child;Zt!==null;){if(Zt.tag!==4){var nn=Pn(Zt);if(nn!==null)return nn}Zt=Zt.sibling}return null}var Ln=Array.isArray,gn=g.getPublicInstance,Mn=g.getRootHostContext,yn=g.getChildHostContext,vn=g.prepareForCommit,On=g.resetAfterCommit,Cn=g.createInstance,Vn=g.appendInitialChild,Qn=g.finalizeInitialChildren,ir=g.prepareUpdate,ar=g.shouldSetTextContent,rr=g.createTextInstance,hr=g.scheduleTimeout,_r=g.cancelTimeout,xr=g.noTimeout,wr=g.isPrimaryRenderer,Ir=g.supportsMutation,_i=g.supportsPersistence,Br=g.supportsHydration,Fr=g.getInstanceFromNode,cs=g.preparePortalMount,Cs=g.getCurrentEventPriority,Ts=g.detachDeletedInstance,Rr=g.supportsMicrotasks,Lr=g.scheduleMicrotask,Gr=g.supportsTestSelectors,zr=g.findFiberRoot,Vr=g.getBoundingRect,rs=g.getTextContent,fs=g.isHiddenSubtree,Kr=g.matchAccessibilityRole,$t=g.setFocusIfFocusable,Jt=g.setupIntersectionObserver,sn=g.appendChild,ln=g.appendChildToContainer,cn=g.commitTextUpdate,fn=g.commitMount,wn=g.commitUpdate,_n=g.insertBefore,Tn=g.insertInContainerBefore,Nn=g.removeChild,Bn=g.removeChildFromContainer,Hn=g.resetTextContent,Fn=g.hideInstance,jn=g.hideTextInstance,Jn=g.unhideInstance,Wn=g.unhideTextInstance,Kn=g.clearContainer,zn=g.cloneInstance,Gn=g.createContainerChildSet,Dn=g.appendChildToContainerChildSet,qn=g.finalizeContainerChildren,Zn=g.replaceContainerChildren,nr=g.cloneHiddenInstance,Yn=g.cloneHiddenTextInstance,sr=g.canHydrateInstance,ur=g.canHydrateTextInstance,dr=g.canHydrateSuspenseInstance,gr=g.isSuspenseInstancePending,lr=g.isSuspenseInstanceFallback,mr=g.getSuspenseInstanceFallbackErrorDetails,yr=g.registerSuspenseInstanceRetry,br=g.getNextHydratableSibling,Er=g.getFirstHydratableChild,Pr=g.getFirstHydratableChildWithinContainer,Hr=g.getFirstHydratableChildWithinSuspenseInstance,Wr=g.hydrateInstance,Xr=g.hydrateTextInstance,es=g.hydrateSuspenseInstance,Dr=g.getNextHydratableInstanceAfterSuspenseInstance,$r=g.commitHydratedContainer,Qr=g.commitHydratedSuspenseInstance,ss=g.clearSuspenseBoundary,ns=g.clearSuspenseBoundaryFromContainer,ys=g.shouldDeleteUnhydratedTailInstances,gs=g.didNotMatchHydratedContainerTextInstance,_s=g.didNotMatchHydratedTextInstance,Ss;function vs(Zt){if(Ss===void 0)try{throw Error()}catch(hn){var nn=hn.stack.trim().match(/\n( *(at )?)/);Ss=nn&&nn[1]||""}return`
`+Ss+Zt}var ga=!1;function uo(Zt,nn){if(!Zt||ga)return"";ga=!0;var hn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(nn)if(nn=function(){throw Error()},Object.defineProperty(nn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nn,[])}catch(Jr){var xn=Jr}Reflect.construct(Zt,[],nn)}else{try{nn.call()}catch(Jr){xn=Jr}Zt.call(nn.prototype)}else{try{throw Error()}catch(Jr){xn=Jr}Zt()}}catch(Jr){if(Jr&&xn&&typeof Jr.stack=="string"){for(var An=Jr.stack.split(`
`),Un=xn.stack.split(`
`),or=An.length-1,Sr=Un.length-1;1<=or&&0<=Sr&&An[or]!==Un[Sr];)Sr--;for(;1<=or&&0<=Sr;or--,Sr--)if(An[or]!==Un[Sr]){if(or!==1||Sr!==1)do if(or--,Sr--,0>Sr||An[or]!==Un[Sr]){var Mr=`
`+An[or].replace(" at new "," at ");return Zt.displayName&&Mr.includes("<anonymous>")&&(Mr=Mr.replace("<anonymous>",Zt.displayName)),Mr}while(1<=or&&0<=Sr);break}}}finally{ga=!1,Error.prepareStackTrace=hn}return(Zt=Zt?Zt.displayName||Zt.name:"")?vs(Zt):""}var Lo=Object.prototype.hasOwnProperty,Yr=[],Ds=-1;function js(Zt){return{current:Zt}}function Os(Zt){0>Ds||(Zt.current=Yr[Ds],Yr[Ds]=null,Ds--)}function ks(Zt,nn){Ds++,Yr[Ds]=Zt.current,Zt.current=nn}var vo={},xa=js(vo),Ys=js(!1),Po=vo;function ko(Zt,nn){var hn=Zt.type.contextTypes;if(!hn)return vo;var xn=Zt.stateNode;if(xn&&xn.__reactInternalMemoizedUnmaskedChildContext===nn)return xn.__reactInternalMemoizedMaskedChildContext;var An={},Un;for(Un in hn)An[Un]=nn[Un];return xn&&(Zt=Zt.stateNode,Zt.__reactInternalMemoizedUnmaskedChildContext=nn,Zt.__reactInternalMemoizedMaskedChildContext=An),An}function Ws(Zt){return Zt=Zt.childContextTypes,Zt!=null}function Ao(){Os(Ys),Os(xa)}function ba(Zt,nn,hn){if(xa.current!==vo)throw Error(dt(168));ks(xa,nn),ks(Ys,hn)}function Am(Zt,nn,hn){var xn=Zt.stateNode;if(nn=nn.childContextTypes,typeof xn.getChildContext!="function")return hn;xn=xn.getChildContext();for(var An in xn)if(!(An in nn))throw Error(dt(108,dn(Zt)||"Unknown",An));return ct({},hn,xn)}function Wp(Zt){return Zt=(Zt=Zt.stateNode)&&Zt.__reactInternalMemoizedMergedChildContext||vo,Po=xa.current,ks(xa,Zt),ks(Ys,Ys.current),!0}function Dy(Zt,nn,hn){var xn=Zt.stateNode;if(!xn)throw Error(dt(169));hn?(Zt=Am(Zt,nn,Po),xn.__reactInternalMemoizedMergedChildContext=Zt,Os(Ys),Os(xa),ks(xa,Zt)):Os(Ys),ks(Ys,hn)}var zl=Math.clz32?Math.clz32:wp,Dv=Math.log,jv=Math.LN2;function wp(Zt){return Zt>>>=0,Zt===0?32:31-(Dv(Zt)/jv|0)|0}var Cp=64,ep=4194304;function Mu(Zt){switch(Zt&-Zt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Zt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Zt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Zt}}function Hl(Zt,nn){var hn=Zt.pendingLanes;if(hn===0)return 0;var xn=0,An=Zt.suspendedLanes,Un=Zt.pingedLanes,or=hn&268435455;if(or!==0){var Sr=or&~An;Sr!==0?xn=Mu(Sr):(Un&=or,Un!==0&&(xn=Mu(Un)))}else or=hn&~An,or!==0?xn=Mu(or):Un!==0&&(xn=Mu(Un));if(xn===0)return 0;if(nn!==0&&nn!==xn&&!(nn&An)&&(An=xn&-xn,Un=nn&-nn,An>=Un||An===16&&(Un&4194240)!==0))return nn;if(xn&4&&(xn|=hn&16),nn=Zt.entangledLanes,nn!==0)for(Zt=Zt.entanglements,nn&=xn;0<nn;)hn=31-zl(nn),An=1<<hn,xn|=Zt[hn],nn&=~An;return xn}function Ps(Zt,nn){switch(Zt){case 1:case 2:case 4:return nn+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nn+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(Zt,nn){for(var hn=Zt.suspendedLanes,xn=Zt.pingedLanes,An=Zt.expirationTimes,Un=Zt.pendingLanes;0<Un;){var or=31-zl(Un),Sr=1<<or,Mr=An[or];Mr===-1?(!(Sr&hn)||Sr&xn)&&(An[or]=Ps(Sr,nn)):Mr<=nn&&(Zt.expiredLanes|=Sr),Un&=~Sr}}function Qo(Zt){return Zt=Zt.pendingLanes&-1073741825,Zt!==0?Zt:Zt&1073741824?1073741824:0}function tu(){var Zt=Cp;return Cp<<=1,!(Cp&4194240)&&(Cp=64),Zt}function Pl(Zt){for(var nn=[],hn=0;31>hn;hn++)nn.push(Zt);return nn}function hu(Zt,nn,hn){Zt.pendingLanes|=nn,nn!==536870912&&(Zt.suspendedLanes=0,Zt.pingedLanes=0),Zt=Zt.eventTimes,nn=31-zl(nn),Zt[nn]=hn}function jy(Zt,nn){var hn=Zt.pendingLanes&~nn;Zt.pendingLanes=nn,Zt.suspendedLanes=0,Zt.pingedLanes=0,Zt.expiredLanes&=nn,Zt.mutableReadLanes&=nn,Zt.entangledLanes&=nn,nn=Zt.entanglements;var xn=Zt.eventTimes;for(Zt=Zt.expirationTimes;0<hn;){var An=31-zl(hn),Un=1<<An;nn[An]=0,xn[An]=-1,Zt[An]=-1,hn&=~Un}}function Tm(Zt,nn){var hn=Zt.entangledLanes|=nn;for(Zt=Zt.entanglements;hn;){var xn=31-zl(hn),An=1<<xn;An&nn|Zt[xn]&nn&&(Zt[xn]|=nn),hn&=~An}}var rn=0;function pn(Zt){return Zt&=-Zt,1<Zt?4<Zt?Zt&268435455?16:536870912:4:1}var $n=ut.unstable_scheduleCallback,er=ut.unstable_cancelCallback,cr=ut.unstable_shouldYield,kr=ut.unstable_requestPaint,Ar=ut.unstable_now,qr=ut.unstable_ImmediatePriority,Zr=ut.unstable_UserBlockingPriority,As=ut.unstable_NormalPriority,ws=ut.unstable_IdlePriority,co=null,Bo=null;function Pm(Zt){if(Bo&&typeof Bo.onCommitFiberRoot=="function")try{Bo.onCommitFiberRoot(co,Zt,void 0,(Zt.current.flags&128)===128)}catch{}}function qp(Zt,nn){return Zt===nn&&(Zt!==0||1/Zt===1/nn)||Zt!==Zt&&nn!==nn}var Uo=typeof Object.is=="function"?Object.is:qp,Ro=null,Iu=!1,s_=!1;function a_(Zt){Ro===null?Ro=[Zt]:Ro.push(Zt)}function Fv(Zt){Iu=!0,a_(Zt)}function tp(){if(!s_&&Ro!==null){s_=!0;var Zt=0,nn=rn;try{var hn=Ro;for(rn=1;Zt<hn.length;Zt++){var xn=hn[Zt];do xn=xn(!0);while(xn!==null)}Ro=null,Iu=!1}catch(An){throw Ro!==null&&(Ro=Ro.slice(Zt+1)),$n(qr,tp),An}finally{rn=nn,s_=!1}}return null}var C0=[],Rm=0,$v=null,Fy=0,du=[],Rl=0,fu=null,pu=1,np="";function nu(Zt,nn){C0[Rm++]=Fy,C0[Rm++]=$v,$v=Zt,Fy=nn}function o_(Zt,nn,hn){du[Rl++]=pu,du[Rl++]=np,du[Rl++]=fu,fu=Zt;var xn=pu;Zt=np;var An=32-zl(xn)-1;xn&=~(1<<An),hn+=1;var Un=32-zl(nn)+An;if(30<Un){var or=An-An%5;Un=(xn&(1<<or)-1).toString(32),xn>>=or,An-=or,pu=1<<32-zl(nn)+An|hn<<An|xn,np=Un+Zt}else pu=1<<Un|hn<<An|xn,np=Zt}function No(Zt){Zt.return!==null&&(nu(Zt,1),o_(Zt,1,0))}function l_(Zt){for(;Zt===$v;)$v=C0[--Rm],C0[Rm]=null,Fy=C0[--Rm],C0[Rm]=null;for(;Zt===fu;)fu=du[--Rl],du[Rl]=null,np=du[--Rl],du[Rl]=null,pu=du[--Rl],du[Rl]=null}var Ml=null,Go=null,ho=!1,$y=!1,Ou=null;function Sw(Zt,nn){var hn=hp(5,null,null,0);hn.elementType="DELETED",hn.stateNode=nn,hn.return=Zt,nn=Zt.deletions,nn===null?(Zt.deletions=[hn],Zt.flags|=16):nn.push(hn)}function ww(Zt,nn){switch(Zt.tag){case 5:return nn=sr(nn,Zt.type,Zt.pendingProps),nn!==null?(Zt.stateNode=nn,Ml=Zt,Go=Er(nn),!0):!1;case 6:return nn=ur(nn,Zt.pendingProps),nn!==null?(Zt.stateNode=nn,Ml=Zt,Go=null,!0):!1;case 13:if(nn=dr(nn),nn!==null){var hn=fu!==null?{id:pu,overflow:np}:null;return Zt.memoizedState={dehydrated:nn,treeContext:hn,retryLane:1073741824},hn=hp(18,null,null,0),hn.stateNode=nn,hn.return=Zt,Zt.child=hn,Ml=Zt,Go=null,!0}return!1;default:return!1}}function u_(Zt){return(Zt.mode&1)!==0&&(Zt.flags&128)===0}function c_(Zt){if(ho){var nn=Go;if(nn){var hn=nn;if(!ww(Zt,nn)){if(u_(Zt))throw Error(dt(418));nn=br(hn);var xn=Ml;nn&&ww(Zt,nn)?Sw(xn,hn):(Zt.flags=Zt.flags&-4097|2,ho=!1,Ml=Zt)}}else{if(u_(Zt))throw Error(dt(418));Zt.flags=Zt.flags&-4097|2,ho=!1,Ml=Zt}}}function Cw(Zt){for(Zt=Zt.return;Zt!==null&&Zt.tag!==5&&Zt.tag!==3&&Zt.tag!==13;)Zt=Zt.return;Ml=Zt}function Bv(Zt){if(!Br||Zt!==Ml)return!1;if(!ho)return Cw(Zt),ho=!0,!1;if(Zt.tag!==3&&(Zt.tag!==5||ys(Zt.type)&&!ar(Zt.type,Zt.memoizedProps))){var nn=Go;if(nn){if(u_(Zt))throw Kp(),Error(dt(418));for(;nn;)Sw(Zt,nn),nn=br(nn)}}if(Cw(Zt),Zt.tag===13){if(!Br)throw Error(dt(316));if(Zt=Zt.memoizedState,Zt=Zt!==null?Zt.dehydrated:null,!Zt)throw Error(dt(317));Go=Dr(Zt)}else Go=Ml?br(Zt.stateNode):null;return!0}function Kp(){for(var Zt=Go;Zt;)Zt=br(Zt)}function mo(){Br&&(Go=Ml=null,$y=ho=!1)}function Vv(Zt){Ou===null?Ou=[Zt]:Ou.push(Zt)}var By=ft.ReactCurrentBatchConfig;function zv(Zt,nn){if(Uo(Zt,nn))return!0;if(typeof Zt!="object"||Zt===null||typeof nn!="object"||nn===null)return!1;var hn=Object.keys(Zt),xn=Object.keys(nn);if(hn.length!==xn.length)return!1;for(xn=0;xn<hn.length;xn++){var An=hn[xn];if(!Lo.call(nn,An)||!Uo(Zt[An],nn[An]))return!1}return!0}function kw(Zt){switch(Zt.tag){case 5:return vs(Zt.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return Zt=uo(Zt.type,!1),Zt;case 11:return Zt=uo(Zt.type.render,!1),Zt;case 1:return Zt=uo(Zt.type,!0),Zt;default:return""}}function Vy(Zt,nn,hn){if(Zt=hn.ref,Zt!==null&&typeof Zt!="function"&&typeof Zt!="object"){if(hn._owner){if(hn=hn._owner,hn){if(hn.tag!==1)throw Error(dt(309));var xn=hn.stateNode}if(!xn)throw Error(dt(147,Zt));var An=xn,Un=""+Zt;return nn!==null&&nn.ref!==null&&typeof nn.ref=="function"&&nn.ref._stringRef===Un?nn.ref:(nn=function(or){var Sr=An.refs;or===null?delete Sr[Un]:Sr[Un]=or},nn._stringRef=Un,nn)}if(typeof Zt!="string")throw Error(dt(284));if(!hn._owner)throw Error(dt(290,Zt))}return Zt}function Nm(Zt,nn){throw Zt=Object.prototype.toString.call(nn),Error(dt(31,Zt==="[object Object]"?"object with keys {"+Object.keys(nn).join(", ")+"}":Zt))}function Mm(Zt){var nn=Zt._init;return nn(Zt._payload)}function h_(Zt){function nn(Nr,Cr){if(Zt){var jr=Nr.deletions;jr===null?(Nr.deletions=[Cr],Nr.flags|=16):jr.push(Cr)}}function hn(Nr,Cr){if(!Zt)return null;for(;Cr!==null;)nn(Nr,Cr),Cr=Cr.sibling;return null}function xn(Nr,Cr){for(Nr=new Map;Cr!==null;)Cr.key!==null?Nr.set(Cr.key,Cr):Nr.set(Cr.index,Cr),Cr=Cr.sibling;return Nr}function An(Nr,Cr){return Nr=I0(Nr,Cr),Nr.index=0,Nr.sibling=null,Nr}function Un(Nr,Cr,jr){return Nr.index=jr,Zt?(jr=Nr.alternate,jr!==null?(jr=jr.index,jr<Cr?(Nr.flags|=2,Cr):jr):(Nr.flags|=2,Cr)):(Nr.flags|=1048576,Cr)}function or(Nr){return Zt&&Nr.alternate===null&&(Nr.flags|=2),Nr}function Sr(Nr,Cr,jr,ls){return Cr===null||Cr.tag!==6?(Cr=n3(jr,Nr.mode,ls),Cr.return=Nr,Cr):(Cr=An(Cr,jr),Cr.return=Nr,Cr)}function Mr(Nr,Cr,jr,ls){var Es=jr.type;return Es===Tt?ps(Nr,Cr,jr.props.children,ls,jr.key):Cr!==null&&(Cr.elementType===Es||typeof Es=="object"&&Es!==null&&Es.$$typeof===en&&Mm(Es)===Cr.type)?(ls=An(Cr,jr.props),ls.ref=Vy(Nr,Cr,jr),ls.return=Nr,ls):(ls=Xw(jr.type,jr.key,jr.props,null,Nr.mode,ls),ls.ref=Vy(Nr,Cr,jr),ls.return=Nr,ls)}function Jr(Nr,Cr,jr,ls){return Cr===null||Cr.tag!==4||Cr.stateNode.containerInfo!==jr.containerInfo||Cr.stateNode.implementation!==jr.implementation?(Cr=r3(jr,Nr.mode,ls),Cr.return=Nr,Cr):(Cr=An(Cr,jr.children||[]),Cr.return=Nr,Cr)}function ps(Nr,Cr,jr,ls,Es){return Cr===null||Cr.tag!==7?(Cr=t1(jr,Nr.mode,ls,Es),Cr.return=Nr,Cr):(Cr=An(Cr,jr),Cr.return=Nr,Cr)}function Ns(Nr,Cr,jr){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return Cr=n3(""+Cr,Nr.mode,jr),Cr.return=Nr,Cr;if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case St:return jr=Xw(Cr.type,Cr.key,Cr.props,null,Nr.mode,jr),jr.ref=Vy(Nr,null,Cr),jr.return=Nr,jr;case kt:return Cr=r3(Cr,Nr.mode,jr),Cr.return=Nr,Cr;case en:var ls=Cr._init;return Ns(Nr,ls(Cr._payload),jr)}if(Ln(Cr)||an(Cr))return Cr=t1(Cr,Nr.mode,jr,null),Cr.return=Nr,Cr;Nm(Nr,Cr)}return null}function as(Nr,Cr,jr,ls){var Es=Cr!==null?Cr.key:null;if(typeof jr=="string"&&jr!==""||typeof jr=="number")return Es!==null?null:Sr(Nr,Cr,""+jr,ls);if(typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case St:return jr.key===Es?Mr(Nr,Cr,jr,ls):null;case kt:return jr.key===Es?Jr(Nr,Cr,jr,ls):null;case en:return Es=jr._init,as(Nr,Cr,Es(jr._payload),ls)}if(Ln(jr)||an(jr))return Es!==null?null:ps(Nr,Cr,jr,ls,null);Nm(Nr,jr)}return null}function yo(Nr,Cr,jr,ls,Es){if(typeof ls=="string"&&ls!==""||typeof ls=="number")return Nr=Nr.get(jr)||null,Sr(Cr,Nr,""+ls,Es);if(typeof ls=="object"&&ls!==null){switch(ls.$$typeof){case St:return Nr=Nr.get(ls.key===null?jr:ls.key)||null,Mr(Cr,Nr,ls,Es);case kt:return Nr=Nr.get(ls.key===null?jr:ls.key)||null,Jr(Cr,Nr,ls,Es);case en:var Fs=ls._init;return yo(Nr,Cr,jr,Fs(ls._payload),Es)}if(Ln(ls)||an(ls))return Nr=Nr.get(jr)||null,ps(Cr,Nr,ls,Es,null);Nm(Cr,ls)}return null}function eo(Nr,Cr,jr,ls){for(var Es=null,Fs=null,Ms=Cr,Us=Cr=0,yl=null;Ms!==null&&Us<jr.length;Us++){Ms.index>Us?(yl=Ms,Ms=null):yl=Ms.sibling;var Gs=as(Nr,Ms,jr[Us],ls);if(Gs===null){Ms===null&&(Ms=yl);break}Zt&&Ms&&Gs.alternate===null&&nn(Nr,Ms),Cr=Un(Gs,Cr,Us),Fs===null?Es=Gs:Fs.sibling=Gs,Fs=Gs,Ms=yl}if(Us===jr.length)return hn(Nr,Ms),ho&&nu(Nr,Us),Es;if(Ms===null){for(;Us<jr.length;Us++)Ms=Ns(Nr,jr[Us],ls),Ms!==null&&(Cr=Un(Ms,Cr,Us),Fs===null?Es=Ms:Fs.sibling=Ms,Fs=Ms);return ho&&nu(Nr,Us),Es}for(Ms=xn(Nr,Ms);Us<jr.length;Us++)yl=yo(Ms,Nr,Us,jr[Us],ls),yl!==null&&(Zt&&yl.alternate!==null&&Ms.delete(yl.key===null?Us:yl.key),Cr=Un(yl,Cr,Us),Fs===null?Es=yl:Fs.sibling=yl,Fs=yl);return Zt&&Ms.forEach(function(O0){return nn(Nr,O0)}),ho&&nu(Nr,Us),Es}function _u(Nr,Cr,jr,ls){var Es=an(jr);if(typeof Es!="function")throw Error(dt(150));if(jr=Es.call(jr),jr==null)throw Error(dt(151));for(var Fs=Es=null,Ms=Cr,Us=Cr=0,yl=null,Gs=jr.next();Ms!==null&&!Gs.done;Us++,Gs=jr.next()){Ms.index>Us?(yl=Ms,Ms=null):yl=Ms.sibling;var O0=as(Nr,Ms,Gs.value,ls);if(O0===null){Ms===null&&(Ms=yl);break}Zt&&Ms&&O0.alternate===null&&nn(Nr,Ms),Cr=Un(O0,Cr,Us),Fs===null?Es=O0:Fs.sibling=O0,Fs=O0,Ms=yl}if(Gs.done)return hn(Nr,Ms),ho&&nu(Nr,Us),Es;if(Ms===null){for(;!Gs.done;Us++,Gs=jr.next())Gs=Ns(Nr,Gs.value,ls),Gs!==null&&(Cr=Un(Gs,Cr,Us),Fs===null?Es=Gs:Fs.sibling=Gs,Fs=Gs);return ho&&nu(Nr,Us),Es}for(Ms=xn(Nr,Ms);!Gs.done;Us++,Gs=jr.next())Gs=yo(Ms,Nr,Us,Gs.value,ls),Gs!==null&&(Zt&&Gs.alternate!==null&&Ms.delete(Gs.key===null?Us:Gs.key),Cr=Un(Gs,Cr,Us),Fs===null?Es=Gs:Fs.sibling=Gs,Fs=Gs);return Zt&&Ms.forEach(function(G5){return nn(Nr,G5)}),ho&&nu(Nr,Us),Es}function Fm(Nr,Cr,jr,ls){if(typeof jr=="object"&&jr!==null&&jr.type===Tt&&jr.key===null&&(jr=jr.props.children),typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case St:e:{for(var Es=jr.key,Fs=Cr;Fs!==null;){if(Fs.key===Es){if(Es=jr.type,Es===Tt){if(Fs.tag===7){hn(Nr,Fs.sibling),Cr=An(Fs,jr.props.children),Cr.return=Nr,Nr=Cr;break e}}else if(Fs.elementType===Es||typeof Es=="object"&&Es!==null&&Es.$$typeof===en&&Mm(Es)===Fs.type){hn(Nr,Fs.sibling),Cr=An(Fs,jr.props),Cr.ref=Vy(Nr,Fs,jr),Cr.return=Nr,Nr=Cr;break e}hn(Nr,Fs);break}else nn(Nr,Fs);Fs=Fs.sibling}jr.type===Tt?(Cr=t1(jr.props.children,Nr.mode,ls,jr.key),Cr.return=Nr,Nr=Cr):(ls=Xw(jr.type,jr.key,jr.props,null,Nr.mode,ls),ls.ref=Vy(Nr,Cr,jr),ls.return=Nr,Nr=ls)}return or(Nr);case kt:e:{for(Fs=jr.key;Cr!==null;){if(Cr.key===Fs)if(Cr.tag===4&&Cr.stateNode.containerInfo===jr.containerInfo&&Cr.stateNode.implementation===jr.implementation){hn(Nr,Cr.sibling),Cr=An(Cr,jr.children||[]),Cr.return=Nr,Nr=Cr;break e}else{hn(Nr,Cr);break}else nn(Nr,Cr);Cr=Cr.sibling}Cr=r3(jr,Nr.mode,ls),Cr.return=Nr,Nr=Cr}return or(Nr);case en:return Fs=jr._init,Fm(Nr,Cr,Fs(jr._payload),ls)}if(Ln(jr))return eo(Nr,Cr,jr,ls);if(an(jr))return _u(Nr,Cr,jr,ls);Nm(Nr,jr)}return typeof jr=="string"&&jr!==""||typeof jr=="number"?(jr=""+jr,Cr!==null&&Cr.tag===6?(hn(Nr,Cr.sibling),Cr=An(Cr,jr),Cr.return=Nr,Nr=Cr):(hn(Nr,Cr),Cr=n3(jr,Nr.mode,ls),Cr.return=Nr,Nr=Cr),or(Nr)):hn(Nr,Cr)}return Fm}var Im=h_(!0),zs=h_(!1),k0=js(null),zy=null,Om=null,Do=null;function rp(){Do=Om=zy=null}function Rs(Zt,nn,hn){wr?(ks(k0,nn._currentValue),nn._currentValue=hn):(ks(k0,nn._currentValue2),nn._currentValue2=hn)}function Hy(Zt){var nn=k0.current;Os(k0),wr?Zt._currentValue=nn:Zt._currentValue2=nn}function $a(Zt,nn,hn){for(;Zt!==null;){var xn=Zt.alternate;if((Zt.childLanes&nn)!==nn?(Zt.childLanes|=nn,xn!==null&&(xn.childLanes|=nn)):xn!==null&&(xn.childLanes&nn)!==nn&&(xn.childLanes|=nn),Zt===hn)break;Zt=Zt.return}}function kp(Zt,nn){zy=Zt,Do=Om=null,Zt=Zt.dependencies,Zt!==null&&Zt.firstContext!==null&&(Zt.lanes&nn&&(xu=!0),Zt.firstContext=null)}function Vo(Zt){var nn=wr?Zt._currentValue:Zt._currentValue2;if(Do!==Zt)if(Zt={context:Zt,memoizedValue:nn,next:null},Om===null){if(zy===null)throw Error(dt(308));Om=Zt,zy.dependencies={lanes:0,firstContext:Zt}}else Om=Om.next=Zt;return nn}var Xs=null;function Lu(Zt){Xs===null?Xs=[Zt]:Xs.push(Zt)}function Uy(Zt,nn,hn,xn){var An=nn.interleaved;return An===null?(hn.next=hn,Lu(nn)):(hn.next=An.next,An.next=hn),nn.interleaved=hn,sp(Zt,xn)}function sp(Zt,nn){Zt.lanes|=nn;var hn=Zt.alternate;for(hn!==null&&(hn.lanes|=nn),hn=Zt,Zt=Zt.return;Zt!==null;)Zt.childLanes|=nn,hn=Zt.alternate,hn!==null&&(hn.childLanes|=nn),hn=Zt,Zt=Zt.return;return hn.tag===3?hn.stateNode:null}var ap=!1;function d_(Zt){Zt.updateQueue={baseState:Zt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mu(Zt,nn){Zt=Zt.updateQueue,nn.updateQueue===Zt&&(nn.updateQueue={baseState:Zt.baseState,firstBaseUpdate:Zt.firstBaseUpdate,lastBaseUpdate:Zt.lastBaseUpdate,shared:Zt.shared,effects:Zt.effects})}function ru(Zt,nn){return{eventTime:Zt,lane:nn,tag:0,payload:null,callback:null,next:null}}function gu(Zt,nn,hn){var xn=Zt.updateQueue;if(xn===null)return null;if(xn=xn.shared,$s&2){var An=xn.pending;return An===null?nn.next=nn:(nn.next=An.next,An.next=nn),xn.pending=nn,sp(Zt,hn)}return An=xn.interleaved,An===null?(nn.next=nn,Lu(xn)):(nn.next=An.next,An.next=nn),xn.interleaved=nn,sp(Zt,hn)}function A0(Zt,nn,hn){if(nn=nn.updateQueue,nn!==null&&(nn=nn.shared,(hn&4194240)!==0)){var xn=nn.lanes;xn&=Zt.pendingLanes,hn|=xn,nn.lanes=hn,Tm(Zt,hn)}}function f_(Zt,nn){var hn=Zt.updateQueue,xn=Zt.alternate;if(xn!==null&&(xn=xn.updateQueue,hn===xn)){var An=null,Un=null;if(hn=hn.firstBaseUpdate,hn!==null){do{var or={eventTime:hn.eventTime,lane:hn.lane,tag:hn.tag,payload:hn.payload,callback:hn.callback,next:null};Un===null?An=Un=or:Un=Un.next=or,hn=hn.next}while(hn!==null);Un===null?An=Un=nn:Un=Un.next=nn}else An=Un=nn;hn={baseState:xn.baseState,firstBaseUpdate:An,lastBaseUpdate:Un,shared:xn.shared,effects:xn.effects},Zt.updateQueue=hn;return}Zt=hn.lastBaseUpdate,Zt===null?hn.firstBaseUpdate=nn:Zt.next=nn,hn.lastBaseUpdate=nn}function Gy(Zt,nn,hn,xn){var An=Zt.updateQueue;ap=!1;var Un=An.firstBaseUpdate,or=An.lastBaseUpdate,Sr=An.shared.pending;if(Sr!==null){An.shared.pending=null;var Mr=Sr,Jr=Mr.next;Mr.next=null,or===null?Un=Jr:or.next=Jr,or=Mr;var ps=Zt.alternate;ps!==null&&(ps=ps.updateQueue,Sr=ps.lastBaseUpdate,Sr!==or&&(Sr===null?ps.firstBaseUpdate=Jr:Sr.next=Jr,ps.lastBaseUpdate=Mr))}if(Un!==null){var Ns=An.baseState;or=0,ps=Jr=Mr=null,Sr=Un;do{var as=Sr.lane,yo=Sr.eventTime;if((xn&as)===as){ps!==null&&(ps=ps.next={eventTime:yo,lane:0,tag:Sr.tag,payload:Sr.payload,callback:Sr.callback,next:null});e:{var eo=Zt,_u=Sr;switch(as=nn,yo=hn,_u.tag){case 1:if(eo=_u.payload,typeof eo=="function"){Ns=eo.call(yo,Ns,as);break e}Ns=eo;break e;case 3:eo.flags=eo.flags&-65537|128;case 0:if(eo=_u.payload,as=typeof eo=="function"?eo.call(yo,Ns,as):eo,as==null)break e;Ns=ct({},Ns,as);break e;case 2:ap=!0}}Sr.callback!==null&&Sr.lane!==0&&(Zt.flags|=64,as=An.effects,as===null?An.effects=[Sr]:as.push(Sr))}else yo={eventTime:yo,lane:as,tag:Sr.tag,payload:Sr.payload,callback:Sr.callback,next:null},ps===null?(Jr=ps=yo,Mr=Ns):ps=ps.next=yo,or|=as;if(Sr=Sr.next,Sr===null){if(Sr=An.shared.pending,Sr===null)break;as=Sr,Sr=as.next,as.next=null,An.lastBaseUpdate=as,An.shared.pending=null}}while(1);if(ps===null&&(Mr=Ns),An.baseState=Mr,An.firstBaseUpdate=Jr,An.lastBaseUpdate=ps,nn=An.shared.interleaved,nn!==null){An=nn;do or|=An.lane,An=An.next;while(An!==nn)}else Un===null&&(An.shared.lanes=0);Jy|=or,Zt.lanes=or,Zt.memoizedState=Ns}}function Wo(Zt,nn,hn){if(Zt=nn.effects,nn.effects=null,Zt!==null)for(nn=0;nn<Zt.length;nn++){var xn=Zt[nn],An=xn.callback;if(An!==null){if(xn.callback=null,xn=hn,typeof An!="function")throw Error(dt(191,An));An.call(xn)}}}var Lm={},yu=js(Lm),Wy=js(Lm),Yp=js(Lm);function vu(Zt){if(Zt===Lm)throw Error(dt(174));return Zt}function p_(Zt,nn){ks(Yp,nn),ks(Wy,Zt),ks(yu,Lm),Zt=Mn(nn),Os(yu),ks(yu,Zt)}function lp(){Os(yu),Os(Wy),Os(Yp)}function Hv(Zt){var nn=vu(Yp.current),hn=vu(yu.current);nn=yn(hn,Zt.type,nn),hn!==nn&&(ks(Wy,Zt),ks(yu,nn))}function m_(Zt){Wy.current===Zt&&(Os(yu),Os(Wy))}var go=js(0);function qy(Zt){for(var nn=Zt;nn!==null;){if(nn.tag===13){var hn=nn.memoizedState;if(hn!==null&&(hn=hn.dehydrated,hn===null||gr(hn)||lr(hn)))return nn}else if(nn.tag===19&&nn.memoizedProps.revealOrder!==void 0){if(nn.flags&128)return nn}else if(nn.child!==null){nn.child.return=nn,nn=nn.child;continue}if(nn===Zt)break;for(;nn.sibling===null;){if(nn.return===null||nn.return===Zt)return null;nn=nn.return}nn.sibling.return=nn.return,nn=nn.sibling}return null}var Ky=[];function Yy(){for(var Zt=0;Zt<Ky.length;Zt++){var nn=Ky[Zt];wr?nn._workInProgressVersionPrimary=null:nn._workInProgressVersionSecondary=null}Ky.length=0}var Du=ft.ReactCurrentDispatcher,pr=ft.ReactCurrentBatchConfig,vr=0,Tr=null,Or=null,us=null,xs=!1,bs=!1,Vs=0,ju=0;function xo(){throw Error(dt(321))}function Xy(Zt,nn){if(nn===null)return!1;for(var hn=0;hn<nn.length&&hn<Zt.length;hn++)if(!Uo(Zt[hn],nn[hn]))return!1;return!0}function T0(Zt,nn,hn,xn,An,Un){if(vr=Un,Tr=nn,nn.memoizedState=null,nn.updateQueue=null,nn.lanes=0,Du.current=Zt===null||Zt.memoizedState===null?b5:E5,Zt=hn(xn,An),bs){Un=0;do{if(bs=!1,Vs=0,25<=Un)throw Error(dt(301));Un+=1,us=Or=null,nn.updateQueue=null,Du.current=_5,Zt=hn(xn,An)}while(bs)}if(Du.current=Pw,nn=Or!==null&&Or.next!==null,vr=0,us=Or=Tr=null,xs=!1,nn)throw Error(dt(300));return Zt}function g_(){var Zt=Vs!==0;return Vs=0,Zt}function Xp(){var Zt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?Tr.memoizedState=us=Zt:us=us.next=Zt,us}function up(){if(Or===null){var Zt=Tr.alternate;Zt=Zt!==null?Zt.memoizedState:null}else Zt=Or.next;var nn=us===null?Tr.memoizedState:us.next;if(nn!==null)us=nn,Or=Zt;else{if(Zt===null)throw Error(dt(310));Or=Zt,Zt={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},us===null?Tr.memoizedState=us=Zt:us=us.next=Zt}return us}function y_(Zt,nn){return typeof nn=="function"?nn(Zt):nn}function ET(Zt){var nn=up(),hn=nn.queue;if(hn===null)throw Error(dt(311));hn.lastRenderedReducer=Zt;var xn=Or,An=xn.baseQueue,Un=hn.pending;if(Un!==null){if(An!==null){var or=An.next;An.next=Un.next,Un.next=or}xn.baseQueue=An=Un,hn.pending=null}if(An!==null){Un=An.next,xn=xn.baseState;var Sr=or=null,Mr=null,Jr=Un;do{var ps=Jr.lane;if((vr&ps)===ps)Mr!==null&&(Mr=Mr.next={lane:0,action:Jr.action,hasEagerState:Jr.hasEagerState,eagerState:Jr.eagerState,next:null}),xn=Jr.hasEagerState?Jr.eagerState:Zt(xn,Jr.action);else{var Ns={lane:ps,action:Jr.action,hasEagerState:Jr.hasEagerState,eagerState:Jr.eagerState,next:null};Mr===null?(Sr=Mr=Ns,or=xn):Mr=Mr.next=Ns,Tr.lanes|=ps,Jy|=ps}Jr=Jr.next}while(Jr!==null&&Jr!==Un);Mr===null?or=xn:Mr.next=Sr,Uo(xn,nn.memoizedState)||(xu=!0),nn.memoizedState=xn,nn.baseState=or,nn.baseQueue=Mr,hn.lastRenderedState=xn}if(Zt=hn.interleaved,Zt!==null){An=Zt;do Un=An.lane,Tr.lanes|=Un,Jy|=Un,An=An.next;while(An!==Zt)}else An===null&&(hn.lanes=0);return[nn.memoizedState,hn.dispatch]}function _T(Zt){var nn=up(),hn=nn.queue;if(hn===null)throw Error(dt(311));hn.lastRenderedReducer=Zt;var xn=hn.dispatch,An=hn.pending,Un=nn.memoizedState;if(An!==null){hn.pending=null;var or=An=An.next;do Un=Zt(Un,or.action),or=or.next;while(or!==An);Uo(Un,nn.memoizedState)||(xu=!0),nn.memoizedState=Un,nn.baseQueue===null&&(nn.baseState=Un),hn.lastRenderedState=Un}return[Un,xn]}function gP(){}function yP(Zt,nn){var hn=Tr,xn=up(),An=nn(),Un=!Uo(xn.memoizedState,An);if(Un&&(xn.memoizedState=An,xu=!0),xn=xn.queue,ST(bP.bind(null,hn,xn,Zt),[Zt]),xn.getSnapshot!==nn||Un||us!==null&&us.memoizedState.tag&1){if(hn.flags|=2048,v_(9,xP.bind(null,hn,xn,An,nn),void 0,null),Zo===null)throw Error(dt(349));vr&30||vP(hn,nn,An)}return An}function vP(Zt,nn,hn){Zt.flags|=16384,Zt={getSnapshot:nn,value:hn},nn=Tr.updateQueue,nn===null?(nn={lastEffect:null,stores:null},Tr.updateQueue=nn,nn.stores=[Zt]):(hn=nn.stores,hn===null?nn.stores=[Zt]:hn.push(Zt))}function xP(Zt,nn,hn,xn){nn.value=hn,nn.getSnapshot=xn,EP(nn)&&_P(Zt)}function bP(Zt,nn,hn){return hn(function(){EP(nn)&&_P(Zt)})}function EP(Zt){var nn=Zt.getSnapshot;Zt=Zt.value;try{var hn=nn();return!Uo(Zt,hn)}catch{return!0}}function _P(Zt){var nn=sp(Zt,1);nn!==null&&cp(nn,Zt,1,-1)}function SP(Zt){var nn=Xp();return typeof Zt=="function"&&(Zt=Zt()),nn.memoizedState=nn.baseState=Zt,Zt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:Zt},nn.queue=Zt,Zt=Zt.dispatch=x5.bind(null,Tr,Zt),[nn.memoizedState,Zt]}function v_(Zt,nn,hn,xn){return Zt={tag:Zt,create:nn,destroy:hn,deps:xn,next:null},nn=Tr.updateQueue,nn===null?(nn={lastEffect:null,stores:null},Tr.updateQueue=nn,nn.lastEffect=Zt.next=Zt):(hn=nn.lastEffect,hn===null?nn.lastEffect=Zt.next=Zt:(xn=hn.next,hn.next=Zt,Zt.next=xn,nn.lastEffect=Zt)),Zt}function wP(){return up().memoizedState}function Aw(Zt,nn,hn,xn){var An=Xp();Tr.flags|=Zt,An.memoizedState=v_(1|nn,hn,void 0,xn===void 0?null:xn)}function Tw(Zt,nn,hn,xn){var An=up();xn=xn===void 0?null:xn;var Un=void 0;if(Or!==null){var or=Or.memoizedState;if(Un=or.destroy,xn!==null&&Xy(xn,or.deps)){An.memoizedState=v_(nn,hn,Un,xn);return}}Tr.flags|=Zt,An.memoizedState=v_(1|nn,hn,Un,xn)}function CP(Zt,nn){return Aw(8390656,8,Zt,nn)}function ST(Zt,nn){return Tw(2048,8,Zt,nn)}function kP(Zt,nn){return Tw(4,2,Zt,nn)}function AP(Zt,nn){return Tw(4,4,Zt,nn)}function TP(Zt,nn){if(typeof nn=="function")return Zt=Zt(),nn(Zt),function(){nn(null)};if(nn!=null)return Zt=Zt(),nn.current=Zt,function(){nn.current=null}}function PP(Zt,nn,hn){return hn=hn!=null?hn.concat([Zt]):null,Tw(4,4,TP.bind(null,nn,Zt),hn)}function wT(){}function RP(Zt,nn){var hn=up();nn=nn===void 0?null:nn;var xn=hn.memoizedState;return xn!==null&&nn!==null&&Xy(nn,xn[1])?xn[0]:(hn.memoizedState=[Zt,nn],Zt)}function NP(Zt,nn){var hn=up();nn=nn===void 0?null:nn;var xn=hn.memoizedState;return xn!==null&&nn!==null&&Xy(nn,xn[1])?xn[0]:(Zt=Zt(),hn.memoizedState=[Zt,nn],Zt)}function MP(Zt,nn,hn){return vr&21?(Uo(hn,nn)||(hn=tu(),Tr.lanes|=hn,Jy|=hn,Zt.baseState=!0),nn):(Zt.baseState&&(Zt.baseState=!1,xu=!0),Zt.memoizedState=hn)}function y5(Zt,nn){var hn=rn;rn=hn!==0&&4>hn?hn:4,Zt(!0);var xn=pr.transition;pr.transition={};try{Zt(!1),nn()}finally{rn=hn,pr.transition=xn}}function IP(){return up().memoizedState}function v5(Zt,nn,hn){var xn=N0(Zt);if(hn={lane:xn,action:hn,hasEagerState:!1,eagerState:null,next:null},OP(Zt))LP(nn,hn);else if(hn=Uy(Zt,nn,hn,xn),hn!==null){var An=Wl();cp(hn,Zt,xn,An),DP(hn,nn,xn)}}function x5(Zt,nn,hn){var xn=N0(Zt),An={lane:xn,action:hn,hasEagerState:!1,eagerState:null,next:null};if(OP(Zt))LP(nn,An);else{var Un=Zt.alternate;if(Zt.lanes===0&&(Un===null||Un.lanes===0)&&(Un=nn.lastRenderedReducer,Un!==null))try{var or=nn.lastRenderedState,Sr=Un(or,hn);if(An.hasEagerState=!0,An.eagerState=Sr,Uo(Sr,or)){var Mr=nn.interleaved;Mr===null?(An.next=An,Lu(nn)):(An.next=Mr.next,Mr.next=An),nn.interleaved=An;return}}catch{}finally{}hn=Uy(Zt,nn,An,xn),hn!==null&&(An=Wl(),cp(hn,Zt,xn,An),DP(hn,nn,xn))}}function OP(Zt){var nn=Zt.alternate;return Zt===Tr||nn!==null&&nn===Tr}function LP(Zt,nn){bs=xs=!0;var hn=Zt.pending;hn===null?nn.next=nn:(nn.next=hn.next,hn.next=nn),Zt.pending=nn}function DP(Zt,nn,hn){if(hn&4194240){var xn=nn.lanes;xn&=Zt.pendingLanes,hn|=xn,nn.lanes=hn,Tm(Zt,hn)}}var Pw={readContext:Vo,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},b5={readContext:Vo,useCallback:function(Zt,nn){return Xp().memoizedState=[Zt,nn===void 0?null:nn],Zt},useContext:Vo,useEffect:CP,useImperativeHandle:function(Zt,nn,hn){return hn=hn!=null?hn.concat([Zt]):null,Aw(4194308,4,TP.bind(null,nn,Zt),hn)},useLayoutEffect:function(Zt,nn){return Aw(4194308,4,Zt,nn)},useInsertionEffect:function(Zt,nn){return Aw(4,2,Zt,nn)},useMemo:function(Zt,nn){var hn=Xp();return nn=nn===void 0?null:nn,Zt=Zt(),hn.memoizedState=[Zt,nn],Zt},useReducer:function(Zt,nn,hn){var xn=Xp();return nn=hn!==void 0?hn(nn):nn,xn.memoizedState=xn.baseState=nn,Zt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zt,lastRenderedState:nn},xn.queue=Zt,Zt=Zt.dispatch=v5.bind(null,Tr,Zt),[xn.memoizedState,Zt]},useRef:function(Zt){var nn=Xp();return Zt={current:Zt},nn.memoizedState=Zt},useState:SP,useDebugValue:wT,useDeferredValue:function(Zt){return Xp().memoizedState=Zt},useTransition:function(){var Zt=SP(!1),nn=Zt[0];return Zt=y5.bind(null,Zt[1]),Xp().memoizedState=Zt,[nn,Zt]},useMutableSource:function(){},useSyncExternalStore:function(Zt,nn,hn){var xn=Tr,An=Xp();if(ho){if(hn===void 0)throw Error(dt(407));hn=hn()}else{if(hn=nn(),Zo===null)throw Error(dt(349));vr&30||vP(xn,nn,hn)}An.memoizedState=hn;var Un={value:hn,getSnapshot:nn};return An.queue=Un,CP(bP.bind(null,xn,Un,Zt),[Zt]),xn.flags|=2048,v_(9,xP.bind(null,xn,Un,hn,nn),void 0,null),hn},useId:function(){var Zt=Xp(),nn=Zo.identifierPrefix;if(ho){var hn=np,xn=pu;hn=(xn&~(1<<32-zl(xn)-1)).toString(32)+hn,nn=":"+nn+"R"+hn,hn=Vs++,0<hn&&(nn+="H"+hn.toString(32)),nn+=":"}else hn=ju++,nn=":"+nn+"r"+hn.toString(32)+":";return Zt.memoizedState=nn},unstable_isNewReconciler:!1},E5={readContext:Vo,useCallback:RP,useContext:Vo,useEffect:ST,useImperativeHandle:PP,useInsertionEffect:kP,useLayoutEffect:AP,useMemo:NP,useReducer:ET,useRef:wP,useState:function(){return ET(y_)},useDebugValue:wT,useDeferredValue:function(Zt){var nn=up();return MP(nn,Or.memoizedState,Zt)},useTransition:function(){var Zt=ET(y_)[0],nn=up().memoizedState;return[Zt,nn]},useMutableSource:gP,useSyncExternalStore:yP,useId:IP,unstable_isNewReconciler:!1},_5={readContext:Vo,useCallback:RP,useContext:Vo,useEffect:ST,useImperativeHandle:PP,useInsertionEffect:kP,useLayoutEffect:AP,useMemo:NP,useReducer:_T,useRef:wP,useState:function(){return _T(y_)},useDebugValue:wT,useDeferredValue:function(Zt){var nn=up();return Or===null?nn.memoizedState=Zt:MP(nn,Or.memoizedState,Zt)},useTransition:function(){var Zt=_T(y_)[0],nn=up().memoizedState;return[Zt,nn]},useMutableSource:gP,useSyncExternalStore:yP,useId:IP,unstable_isNewReconciler:!1};function Ap(Zt,nn){if(Zt&&Zt.defaultProps){nn=ct({},nn),Zt=Zt.defaultProps;for(var hn in Zt)nn[hn]===void 0&&(nn[hn]=Zt[hn]);return nn}return nn}function CT(Zt,nn,hn,xn){nn=Zt.memoizedState,hn=hn(xn,nn),hn=hn==null?nn:ct({},nn,hn),Zt.memoizedState=hn,Zt.lanes===0&&(Zt.updateQueue.baseState=hn)}var Rw={isMounted:function(Zt){return(Zt=Zt._reactInternals)?Sn(Zt)===Zt:!1},enqueueSetState:function(Zt,nn,hn){Zt=Zt._reactInternals;var xn=Wl(),An=N0(Zt),Un=ru(xn,An);Un.payload=nn,hn!=null&&(Un.callback=hn),nn=gu(Zt,Un,An),nn!==null&&(cp(nn,Zt,An,xn),A0(nn,Zt,An))},enqueueReplaceState:function(Zt,nn,hn){Zt=Zt._reactInternals;var xn=Wl(),An=N0(Zt),Un=ru(xn,An);Un.tag=1,Un.payload=nn,hn!=null&&(Un.callback=hn),nn=gu(Zt,Un,An),nn!==null&&(cp(nn,Zt,An,xn),A0(nn,Zt,An))},enqueueForceUpdate:function(Zt,nn){Zt=Zt._reactInternals;var hn=Wl(),xn=N0(Zt),An=ru(hn,xn);An.tag=2,nn!=null&&(An.callback=nn),nn=gu(Zt,An,xn),nn!==null&&(cp(nn,Zt,xn,hn),A0(nn,Zt,xn))}};function jP(Zt,nn,hn,xn,An,Un,or){return Zt=Zt.stateNode,typeof Zt.shouldComponentUpdate=="function"?Zt.shouldComponentUpdate(xn,Un,or):nn.prototype&&nn.prototype.isPureReactComponent?!zv(hn,xn)||!zv(An,Un):!0}function FP(Zt,nn,hn){var xn=!1,An=vo,Un=nn.contextType;return typeof Un=="object"&&Un!==null?Un=Vo(Un):(An=Ws(nn)?Po:xa.current,xn=nn.contextTypes,Un=(xn=xn!=null)?ko(Zt,An):vo),nn=new nn(hn,Un),Zt.memoizedState=nn.state!==null&&nn.state!==void 0?nn.state:null,nn.updater=Rw,Zt.stateNode=nn,nn._reactInternals=Zt,xn&&(Zt=Zt.stateNode,Zt.__reactInternalMemoizedUnmaskedChildContext=An,Zt.__reactInternalMemoizedMaskedChildContext=Un),nn}function $P(Zt,nn,hn,xn){Zt=nn.state,typeof nn.componentWillReceiveProps=="function"&&nn.componentWillReceiveProps(hn,xn),typeof nn.UNSAFE_componentWillReceiveProps=="function"&&nn.UNSAFE_componentWillReceiveProps(hn,xn),nn.state!==Zt&&Rw.enqueueReplaceState(nn,nn.state,null)}function kT(Zt,nn,hn,xn){var An=Zt.stateNode;An.props=hn,An.state=Zt.memoizedState,An.refs={},d_(Zt);var Un=nn.contextType;typeof Un=="object"&&Un!==null?An.context=Vo(Un):(Un=Ws(nn)?Po:xa.current,An.context=ko(Zt,Un)),An.state=Zt.memoizedState,Un=nn.getDerivedStateFromProps,typeof Un=="function"&&(CT(Zt,nn,Un,hn),An.state=Zt.memoizedState),typeof nn.getDerivedStateFromProps=="function"||typeof An.getSnapshotBeforeUpdate=="function"||typeof An.UNSAFE_componentWillMount!="function"&&typeof An.componentWillMount!="function"||(nn=An.state,typeof An.componentWillMount=="function"&&An.componentWillMount(),typeof An.UNSAFE_componentWillMount=="function"&&An.UNSAFE_componentWillMount(),nn!==An.state&&Rw.enqueueReplaceState(An,An.state,null),Gy(Zt,hn,An,xn),An.state=Zt.memoizedState),typeof An.componentDidMount=="function"&&(Zt.flags|=4194308)}function Uv(Zt,nn){try{var hn="",xn=nn;do hn+=kw(xn),xn=xn.return;while(xn);var An=hn}catch(Un){An=`
Error generating stack: `+Un.message+`
`+Un.stack}return{value:Zt,source:nn,stack:An,digest:null}}function TT(Zt,nn,hn){return{value:Zt,source:null,stack:hn??null,digest:nn??null}}function PT(Zt,nn){try{console.error(nn.value)}catch(hn){setTimeout(function(){throw hn})}}var S5=typeof WeakMap=="function"?WeakMap:Map;function BP(Zt,nn,hn){hn=ru(-1,hn),hn.tag=3,hn.payload={element:null};var xn=nn.value;return hn.callback=function(){Uw||(Uw=!0,YT=xn),PT(Zt,nn)},hn}function VP(Zt,nn,hn){hn=ru(-1,hn),hn.tag=3;var xn=Zt.type.getDerivedStateFromError;if(typeof xn=="function"){var An=nn.value;hn.payload=function(){return xn(An)},hn.callback=function(){PT(Zt,nn)}}var Un=Zt.stateNode;return Un!==null&&typeof Un.componentDidCatch=="function"&&(hn.callback=function(){PT(Zt,nn),typeof xn!="function"&&(P0===null?P0=new Set([this]):P0.add(this));var or=nn.stack;this.componentDidCatch(nn.value,{componentStack:or!==null?or:""})}),hn}function zP(Zt,nn,hn){var xn=Zt.pingCache;if(xn===null){xn=Zt.pingCache=new S5;var An=new Set;xn.set(nn,An)}else An=xn.get(nn),An===void 0&&(An=new Set,xn.set(nn,An));An.has(hn)||(An.add(hn),Zt=j5.bind(null,Zt,nn,hn),nn.then(Zt,Zt))}function HP(Zt){do{var nn;if((nn=Zt.tag===13)&&(nn=Zt.memoizedState,nn=nn!==null?nn.dehydrated!==null:!0),nn)return Zt;Zt=Zt.return}while(Zt!==null);return null}function GP(Zt,nn,hn,xn,An){return Zt.mode&1?(Zt.flags|=65536,Zt.lanes=An,Zt):(Zt===nn?Zt.flags|=65536:(Zt.flags|=128,hn.flags|=131072,hn.flags&=-52805,hn.tag===1&&(hn.alternate===null?hn.tag=17:(nn=ru(-1,1),nn.tag=2,gu(hn,nn,1))),hn.lanes|=1),Zt)}var w5=ft.ReactCurrentOwner,xu=!1;function iu(Zt,nn,hn,xn){nn.child=Zt===null?zs(nn,null,hn,xn):Im(nn,Zt.child,hn,xn)}function WP(Zt,nn,hn,xn,An){hn=hn.render;var Un=nn.ref;return kp(nn,An),xn=T0(Zt,nn,hn,xn,Un,An),hn=g_(),Zt!==null&&!xu?(nn.updateQueue=Zt.updateQueue,nn.flags&=-2053,Zt.lanes&=~An,Dm(Zt,nn,An)):(ho&&hn&&No(nn),nn.flags|=1,iu(Zt,nn,xn,An),nn.child)}function qP(Zt,nn,hn,xn,An){if(Zt===null){var Un=hn.type;return typeof Un=="function"&&!t3(Un)&&Un.defaultProps===void 0&&hn.compare===null&&hn.defaultProps===void 0?(nn.tag=15,nn.type=Un,KP(Zt,nn,Un,xn,An)):(Zt=Xw(hn.type,null,xn,nn,nn.mode,An),Zt.ref=nn.ref,Zt.return=nn,nn.child=Zt)}if(Un=Zt.child,!(Zt.lanes&An)){var or=Un.memoizedProps;if(hn=hn.compare,hn=hn!==null?hn:zv,hn(or,xn)&&Zt.ref===nn.ref)return Dm(Zt,nn,An)}return nn.flags|=1,Zt=I0(Un,xn),Zt.ref=nn.ref,Zt.return=nn,nn.child=Zt}function KP(Zt,nn,hn,xn,An){if(Zt!==null){var Un=Zt.memoizedProps;if(zv(Un,xn)&&Zt.ref===nn.ref)if(xu=!1,nn.pendingProps=xn=Un,(Zt.lanes&An)!==0)Zt.flags&131072&&(xu=!0);else return nn.lanes=Zt.lanes,Dm(Zt,nn,An)}return RT(Zt,nn,hn,xn,An)}function YP(Zt,nn,hn){var xn=nn.pendingProps,An=xn.children,Un=Zt!==null?Zt.memoizedState:null;if(xn.mode==="hidden")if(!(nn.mode&1))nn.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Wv,Fu),Fu|=hn;else{if(!(hn&1073741824))return Zt=Un!==null?Un.baseLanes|hn:hn,nn.lanes=nn.childLanes=1073741824,nn.memoizedState={baseLanes:Zt,cachePool:null,transitions:null},nn.updateQueue=null,ks(Wv,Fu),Fu|=Zt,null;nn.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn=Un!==null?Un.baseLanes:hn,ks(Wv,Fu),Fu|=xn}else Un!==null?(xn=Un.baseLanes|hn,nn.memoizedState=null):xn=hn,ks(Wv,Fu),Fu|=xn;return iu(Zt,nn,An,hn),nn.child}function XP(Zt,nn){var hn=nn.ref;(Zt===null&&hn!==null||Zt!==null&&Zt.ref!==hn)&&(nn.flags|=512,nn.flags|=2097152)}function RT(Zt,nn,hn,xn,An){var Un=Ws(hn)?Po:xa.current;return Un=ko(nn,Un),kp(nn,An),hn=T0(Zt,nn,hn,xn,Un,An),xn=g_(),Zt!==null&&!xu?(nn.updateQueue=Zt.updateQueue,nn.flags&=-2053,Zt.lanes&=~An,Dm(Zt,nn,An)):(ho&&xn&&No(nn),nn.flags|=1,iu(Zt,nn,hn,An),nn.child)}function JP(Zt,nn,hn,xn,An){if(Ws(hn)){var Un=!0;Wp(nn)}else Un=!1;if(kp(nn,An),nn.stateNode===null)Mw(Zt,nn),FP(nn,hn,xn),kT(nn,hn,xn,An),xn=!0;else if(Zt===null){var or=nn.stateNode,Sr=nn.memoizedProps;or.props=Sr;var Mr=or.context,Jr=hn.contextType;typeof Jr=="object"&&Jr!==null?Jr=Vo(Jr):(Jr=Ws(hn)?Po:xa.current,Jr=ko(nn,Jr));var ps=hn.getDerivedStateFromProps,Ns=typeof ps=="function"||typeof or.getSnapshotBeforeUpdate=="function";Ns||typeof or.UNSAFE_componentWillReceiveProps!="function"&&typeof or.componentWillReceiveProps!="function"||(Sr!==xn||Mr!==Jr)&&$P(nn,or,xn,Jr),ap=!1;var as=nn.memoizedState;or.state=as,Gy(nn,xn,or,An),Mr=nn.memoizedState,Sr!==xn||as!==Mr||Ys.current||ap?(typeof ps=="function"&&(CT(nn,hn,ps,xn),Mr=nn.memoizedState),(Sr=ap||jP(nn,hn,Sr,xn,as,Mr,Jr))?(Ns||typeof or.UNSAFE_componentWillMount!="function"&&typeof or.componentWillMount!="function"||(typeof or.componentWillMount=="function"&&or.componentWillMount(),typeof or.UNSAFE_componentWillMount=="function"&&or.UNSAFE_componentWillMount()),typeof or.componentDidMount=="function"&&(nn.flags|=4194308)):(typeof or.componentDidMount=="function"&&(nn.flags|=4194308),nn.memoizedProps=xn,nn.memoizedState=Mr),or.props=xn,or.state=Mr,or.context=Jr,xn=Sr):(typeof or.componentDidMount=="function"&&(nn.flags|=4194308),xn=!1)}else{or=nn.stateNode,mu(Zt,nn),Sr=nn.memoizedProps,Jr=nn.type===nn.elementType?Sr:Ap(nn.type,Sr),or.props=Jr,Ns=nn.pendingProps,as=or.context,Mr=hn.contextType,typeof Mr=="object"&&Mr!==null?Mr=Vo(Mr):(Mr=Ws(hn)?Po:xa.current,Mr=ko(nn,Mr));var yo=hn.getDerivedStateFromProps;(ps=typeof yo=="function"||typeof or.getSnapshotBeforeUpdate=="function")||typeof or.UNSAFE_componentWillReceiveProps!="function"&&typeof or.componentWillReceiveProps!="function"||(Sr!==Ns||as!==Mr)&&$P(nn,or,xn,Mr),ap=!1,as=nn.memoizedState,or.state=as,Gy(nn,xn,or,An);var eo=nn.memoizedState;Sr!==Ns||as!==eo||Ys.current||ap?(typeof yo=="function"&&(CT(nn,hn,yo,xn),eo=nn.memoizedState),(Jr=ap||jP(nn,hn,Jr,xn,as,eo,Mr)||!1)?(ps||typeof or.UNSAFE_componentWillUpdate!="function"&&typeof or.componentWillUpdate!="function"||(typeof or.componentWillUpdate=="function"&&or.componentWillUpdate(xn,eo,Mr),typeof or.UNSAFE_componentWillUpdate=="function"&&or.UNSAFE_componentWillUpdate(xn,eo,Mr)),typeof or.componentDidUpdate=="function"&&(nn.flags|=4),typeof or.getSnapshotBeforeUpdate=="function"&&(nn.flags|=1024)):(typeof or.componentDidUpdate!="function"||Sr===Zt.memoizedProps&&as===Zt.memoizedState||(nn.flags|=4),typeof or.getSnapshotBeforeUpdate!="function"||Sr===Zt.memoizedProps&&as===Zt.memoizedState||(nn.flags|=1024),nn.memoizedProps=xn,nn.memoizedState=eo),or.props=xn,or.state=eo,or.context=Mr,xn=Jr):(typeof or.componentDidUpdate!="function"||Sr===Zt.memoizedProps&&as===Zt.memoizedState||(nn.flags|=4),typeof or.getSnapshotBeforeUpdate!="function"||Sr===Zt.memoizedProps&&as===Zt.memoizedState||(nn.flags|=1024),xn=!1)}return NT(Zt,nn,hn,xn,Un,An)}function NT(Zt,nn,hn,xn,An,Un){XP(Zt,nn);var or=(nn.flags&128)!==0;if(!xn&&!or)return An&&Dy(nn,hn,!1),Dm(Zt,nn,Un);xn=nn.stateNode,w5.current=nn;var Sr=or&&typeof hn.getDerivedStateFromError!="function"?null:xn.render();return nn.flags|=1,Zt!==null&&or?(nn.child=Im(nn,Zt.child,null,Un),nn.child=Im(nn,null,Sr,Un)):iu(Zt,nn,Sr,Un),nn.memoizedState=xn.state,An&&Dy(nn,hn,!0),nn.child}function QP(Zt){var nn=Zt.stateNode;nn.pendingContext?ba(Zt,nn.pendingContext,nn.pendingContext!==nn.context):nn.context&&ba(Zt,nn.context,!1),p_(Zt,nn.containerInfo)}function ZP(Zt,nn,hn,xn,An){return mo(),Vv(An),nn.flags|=256,iu(Zt,nn,hn,xn),nn.child}var MT={dehydrated:null,treeContext:null,retryLane:0};function IT(Zt){return{baseLanes:Zt,cachePool:null,transitions:null}}function eR(Zt,nn,hn){var xn=nn.pendingProps,An=go.current,Un=!1,or=(nn.flags&128)!==0,Sr;if((Sr=or)||(Sr=Zt!==null&&Zt.memoizedState===null?!1:(An&2)!==0),Sr?(Un=!0,nn.flags&=-129):(Zt===null||Zt.memoizedState!==null)&&(An|=1),ks(go,An&1),Zt===null)return c_(nn),Zt=nn.memoizedState,Zt!==null&&(Zt=Zt.dehydrated,Zt!==null)?(nn.mode&1?lr(Zt)?nn.lanes=8:nn.lanes=1073741824:nn.lanes=1,null):(or=xn.children,Zt=xn.fallback,Un?(xn=nn.mode,Un=nn.child,or={mode:"hidden",children:or},!(xn&1)&&Un!==null?(Un.childLanes=0,Un.pendingProps=or):Un=Jw(or,xn,0,null),Zt=t1(Zt,xn,hn,null),Un.return=nn,Zt.return=nn,Un.sibling=Zt,nn.child=Un,nn.child.memoizedState=IT(hn),nn.memoizedState=MT,Zt):OT(nn,or));if(An=Zt.memoizedState,An!==null&&(Sr=An.dehydrated,Sr!==null))return C5(Zt,nn,or,xn,Sr,An,hn);if(Un){Un=xn.fallback,or=nn.mode,An=Zt.child,Sr=An.sibling;var Mr={mode:"hidden",children:xn.children};return!(or&1)&&nn.child!==An?(xn=nn.child,xn.childLanes=0,xn.pendingProps=Mr,nn.deletions=null):(xn=I0(An,Mr),xn.subtreeFlags=An.subtreeFlags&14680064),Sr!==null?Un=I0(Sr,Un):(Un=t1(Un,or,hn,null),Un.flags|=2),Un.return=nn,xn.return=nn,xn.sibling=Un,nn.child=xn,xn=Un,Un=nn.child,or=Zt.child.memoizedState,or=or===null?IT(hn):{baseLanes:or.baseLanes|hn,cachePool:null,transitions:or.transitions},Un.memoizedState=or,Un.childLanes=Zt.childLanes&~hn,nn.memoizedState=MT,xn}return Un=Zt.child,Zt=Un.sibling,xn=I0(Un,{mode:"visible",children:xn.children}),!(nn.mode&1)&&(xn.lanes=hn),xn.return=nn,xn.sibling=null,Zt!==null&&(hn=nn.deletions,hn===null?(nn.deletions=[Zt],nn.flags|=16):hn.push(Zt)),nn.child=xn,nn.memoizedState=null,xn}function OT(Zt,nn){return nn=Jw({mode:"visible",children:nn},Zt.mode,0,null),nn.return=Zt,Zt.child=nn}function Nw(Zt,nn,hn,xn){return xn!==null&&Vv(xn),Im(nn,Zt.child,null,hn),Zt=OT(nn,nn.pendingProps.children),Zt.flags|=2,nn.memoizedState=null,Zt}function C5(Zt,nn,hn,xn,An,Un,or){if(hn)return nn.flags&256?(nn.flags&=-257,xn=TT(Error(dt(422))),Nw(Zt,nn,or,xn)):nn.memoizedState!==null?(nn.child=Zt.child,nn.flags|=128,null):(Un=xn.fallback,An=nn.mode,xn=Jw({mode:"visible",children:xn.children},An,0,null),Un=t1(Un,An,or,null),Un.flags|=2,xn.return=nn,Un.return=nn,xn.sibling=Un,nn.child=xn,nn.mode&1&&Im(nn,Zt.child,null,or),nn.child.memoizedState=IT(or),nn.memoizedState=MT,Un);if(!(nn.mode&1))return Nw(Zt,nn,or,null);if(lr(An))return xn=mr(An).digest,Un=Error(dt(419)),xn=TT(Un,xn,void 0),Nw(Zt,nn,or,xn);if(hn=(or&Zt.childLanes)!==0,xu||hn){if(xn=Zo,xn!==null){switch(or&-or){case 4:An=2;break;case 16:An=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:An=32;break;case 536870912:An=268435456;break;default:An=0}An=An&(xn.suspendedLanes|or)?0:An,An!==0&&An!==Un.retryLane&&(Un.retryLane=An,sp(Zt,An),cp(xn,Zt,An,-1))}return e3(),xn=TT(Error(dt(421))),Nw(Zt,nn,or,xn)}return gr(An)?(nn.flags|=128,nn.child=Zt.child,nn=F5.bind(null,Zt),yr(An,nn),null):(Zt=Un.treeContext,Br&&(Go=Hr(An),Ml=nn,ho=!0,Ou=null,$y=!1,Zt!==null&&(du[Rl++]=pu,du[Rl++]=np,du[Rl++]=fu,pu=Zt.id,np=Zt.overflow,fu=nn)),nn=OT(nn,xn.children),nn.flags|=4096,nn)}function tR(Zt,nn,hn){Zt.lanes|=nn;var xn=Zt.alternate;xn!==null&&(xn.lanes|=nn),$a(Zt.return,nn,hn)}function LT(Zt,nn,hn,xn,An){var Un=Zt.memoizedState;Un===null?Zt.memoizedState={isBackwards:nn,rendering:null,renderingStartTime:0,last:xn,tail:hn,tailMode:An}:(Un.isBackwards=nn,Un.rendering=null,Un.renderingStartTime=0,Un.last=xn,Un.tail=hn,Un.tailMode=An)}function nR(Zt,nn,hn){var xn=nn.pendingProps,An=xn.revealOrder,Un=xn.tail;if(iu(Zt,nn,xn.children,hn),xn=go.current,xn&2)xn=xn&1|2,nn.flags|=128;else{if(Zt!==null&&Zt.flags&128)e:for(Zt=nn.child;Zt!==null;){if(Zt.tag===13)Zt.memoizedState!==null&&tR(Zt,hn,nn);else if(Zt.tag===19)tR(Zt,hn,nn);else if(Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===nn)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===nn)break e;Zt=Zt.return}Zt.sibling.return=Zt.return,Zt=Zt.sibling}xn&=1}if(ks(go,xn),!(nn.mode&1))nn.memoizedState=null;else switch(An){case"forwards":for(hn=nn.child,An=null;hn!==null;)Zt=hn.alternate,Zt!==null&&qy(Zt)===null&&(An=hn),hn=hn.sibling;hn=An,hn===null?(An=nn.child,nn.child=null):(An=hn.sibling,hn.sibling=null),LT(nn,!1,An,hn,Un);break;case"backwards":for(hn=null,An=nn.child,nn.child=null;An!==null;){if(Zt=An.alternate,Zt!==null&&qy(Zt)===null){nn.child=An;break}Zt=An.sibling,An.sibling=hn,hn=An,An=Zt}LT(nn,!0,hn,null,Un);break;case"together":LT(nn,!1,null,null,void 0);break;default:nn.memoizedState=null}return nn.child}function Mw(Zt,nn){!(nn.mode&1)&&Zt!==null&&(Zt.alternate=null,nn.alternate=null,nn.flags|=2)}function Dm(Zt,nn,hn){if(Zt!==null&&(nn.dependencies=Zt.dependencies),Jy|=nn.lanes,!(hn&nn.childLanes))return null;if(Zt!==null&&nn.child!==Zt.child)throw Error(dt(153));if(nn.child!==null){for(Zt=nn.child,hn=I0(Zt,Zt.pendingProps),nn.child=hn,hn.return=nn;Zt.sibling!==null;)Zt=Zt.sibling,hn=hn.sibling=I0(Zt,Zt.pendingProps),hn.return=nn;hn.sibling=null}return nn.child}function k5(Zt,nn,hn){switch(nn.tag){case 3:QP(nn),mo();break;case 5:Hv(nn);break;case 1:Ws(nn.type)&&Wp(nn);break;case 4:p_(nn,nn.stateNode.containerInfo);break;case 10:Rs(nn,nn.type._context,nn.memoizedProps.value);break;case 13:var xn=nn.memoizedState;if(xn!==null)return xn.dehydrated!==null?(ks(go,go.current&1),nn.flags|=128,null):hn&nn.child.childLanes?eR(Zt,nn,hn):(ks(go,go.current&1),Zt=Dm(Zt,nn,hn),Zt!==null?Zt.sibling:null);ks(go,go.current&1);break;case 19:if(xn=(hn&nn.childLanes)!==0,Zt.flags&128){if(xn)return nR(Zt,nn,hn);nn.flags|=128}var An=nn.memoizedState;if(An!==null&&(An.rendering=null,An.tail=null,An.lastEffect=null),ks(go,go.current),xn)break;return null;case 22:case 23:return nn.lanes=0,YP(Zt,nn,hn)}return Dm(Zt,nn,hn)}function Jp(Zt){Zt.flags|=4}function rR(Zt,nn){if(Zt!==null&&Zt.child===nn.child)return!0;if(nn.flags&16)return!1;for(Zt=nn.child;Zt!==null;){if(Zt.flags&12854||Zt.subtreeFlags&12854)return!1;Zt=Zt.sibling}return!0}var x_,b_,Iw,Ow;if(Ir)x_=function(Zt,nn){for(var hn=nn.child;hn!==null;){if(hn.tag===5||hn.tag===6)Vn(Zt,hn.stateNode);else if(hn.tag!==4&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===nn)break;for(;hn.sibling===null;){if(hn.return===null||hn.return===nn)return;hn=hn.return}hn.sibling.return=hn.return,hn=hn.sibling}},b_=function(){},Iw=function(Zt,nn,hn,xn,An){if(Zt=Zt.memoizedProps,Zt!==xn){var Un=nn.stateNode,or=vu(yu.current);hn=ir(Un,hn,Zt,xn,An,or),(nn.updateQueue=hn)&&Jp(nn)}},Ow=function(Zt,nn,hn,xn){hn!==xn&&Jp(nn)};else if(_i){x_=function(Zt,nn,hn,xn){for(var An=nn.child;An!==null;){if(An.tag===5){var Un=An.stateNode;hn&&xn&&(Un=nr(Un,An.type,An.memoizedProps,An)),Vn(Zt,Un)}else if(An.tag===6)Un=An.stateNode,hn&&xn&&(Un=Yn(Un,An.memoizedProps,An)),Vn(Zt,Un);else if(An.tag!==4){if(An.tag===22&&An.memoizedState!==null)Un=An.child,Un!==null&&(Un.return=An),x_(Zt,An,!0,!0);else if(An.child!==null){An.child.return=An,An=An.child;continue}}if(An===nn)break;for(;An.sibling===null;){if(An.return===null||An.return===nn)return;An=An.return}An.sibling.return=An.return,An=An.sibling}};var iR=function(Zt,nn,hn,xn){for(var An=nn.child;An!==null;){if(An.tag===5){var Un=An.stateNode;hn&&xn&&(Un=nr(Un,An.type,An.memoizedProps,An)),Dn(Zt,Un)}else if(An.tag===6)Un=An.stateNode,hn&&xn&&(Un=Yn(Un,An.memoizedProps,An)),Dn(Zt,Un);else if(An.tag!==4){if(An.tag===22&&An.memoizedState!==null)Un=An.child,Un!==null&&(Un.return=An),iR(Zt,An,!0,!0);else if(An.child!==null){An.child.return=An,An=An.child;continue}}if(An===nn)break;for(;An.sibling===null;){if(An.return===null||An.return===nn)return;An=An.return}An.sibling.return=An.return,An=An.sibling}};b_=function(Zt,nn){var hn=nn.stateNode;if(!rR(Zt,nn)){Zt=hn.containerInfo;var xn=Gn(Zt);iR(xn,nn,!1,!1),hn.pendingChildren=xn,Jp(nn),qn(Zt,xn)}},Iw=function(Zt,nn,hn,xn,An){var Un=Zt.stateNode,or=Zt.memoizedProps;if((Zt=rR(Zt,nn))&&or===xn)nn.stateNode=Un;else{var Sr=nn.stateNode,Mr=vu(yu.current),Jr=null;or!==xn&&(Jr=ir(Sr,hn,or,xn,An,Mr)),Zt&&Jr===null?nn.stateNode=Un:(Un=zn(Un,Jr,hn,or,xn,nn,Zt,Sr),Qn(Un,hn,xn,An,Mr)&&Jp(nn),nn.stateNode=Un,Zt?Jp(nn):x_(Un,nn,!1,!1))}},Ow=function(Zt,nn,hn,xn){hn!==xn?(Zt=vu(Yp.current),hn=vu(yu.current),nn.stateNode=rr(xn,Zt,hn,nn),Jp(nn)):nn.stateNode=Zt.stateNode}}else b_=function(){},Iw=function(){},Ow=function(){};function E_(Zt,nn){if(!ho)switch(Zt.tailMode){case"hidden":nn=Zt.tail;for(var hn=null;nn!==null;)nn.alternate!==null&&(hn=nn),nn=nn.sibling;hn===null?Zt.tail=null:hn.sibling=null;break;case"collapsed":hn=Zt.tail;for(var xn=null;hn!==null;)hn.alternate!==null&&(xn=hn),hn=hn.sibling;xn===null?nn||Zt.tail===null?Zt.tail=null:Zt.tail.sibling=null:xn.sibling=null}}function Ul(Zt){var nn=Zt.alternate!==null&&Zt.alternate.child===Zt.child,hn=0,xn=0;if(nn)for(var An=Zt.child;An!==null;)hn|=An.lanes|An.childLanes,xn|=An.subtreeFlags&14680064,xn|=An.flags&14680064,An.return=Zt,An=An.sibling;else for(An=Zt.child;An!==null;)hn|=An.lanes|An.childLanes,xn|=An.subtreeFlags,xn|=An.flags,An.return=Zt,An=An.sibling;return Zt.subtreeFlags|=xn,Zt.childLanes=hn,nn}function A5(Zt,nn,hn){var xn=nn.pendingProps;switch(l_(nn),nn.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ul(nn),null;case 1:return Ws(nn.type)&&Ao(),Ul(nn),null;case 3:return hn=nn.stateNode,lp(),Os(Ys),Os(xa),Yy(),hn.pendingContext&&(hn.context=hn.pendingContext,hn.pendingContext=null),(Zt===null||Zt.child===null)&&(Bv(nn)?Jp(nn):Zt===null||Zt.memoizedState.isDehydrated&&!(nn.flags&256)||(nn.flags|=1024,Ou!==null&&(QT(Ou),Ou=null))),b_(Zt,nn),Ul(nn),null;case 5:m_(nn),hn=vu(Yp.current);var An=nn.type;if(Zt!==null&&nn.stateNode!=null)Iw(Zt,nn,An,xn,hn),Zt.ref!==nn.ref&&(nn.flags|=512,nn.flags|=2097152);else{if(!xn){if(nn.stateNode===null)throw Error(dt(166));return Ul(nn),null}if(Zt=vu(yu.current),Bv(nn)){if(!Br)throw Error(dt(175));Zt=Wr(nn.stateNode,nn.type,nn.memoizedProps,hn,Zt,nn,!$y),nn.updateQueue=Zt,Zt!==null&&Jp(nn)}else{var Un=Cn(An,xn,hn,Zt,nn);x_(Un,nn,!1,!1),nn.stateNode=Un,Qn(Un,An,xn,hn,Zt)&&Jp(nn)}nn.ref!==null&&(nn.flags|=512,nn.flags|=2097152)}return Ul(nn),null;case 6:if(Zt&&nn.stateNode!=null)Ow(Zt,nn,Zt.memoizedProps,xn);else{if(typeof xn!="string"&&nn.stateNode===null)throw Error(dt(166));if(Zt=vu(Yp.current),hn=vu(yu.current),Bv(nn)){if(!Br)throw Error(dt(176));if(Zt=nn.stateNode,hn=nn.memoizedProps,(xn=Xr(Zt,hn,nn,!$y))&&(An=Ml,An!==null))switch(An.tag){case 3:gs(An.stateNode.containerInfo,Zt,hn,(An.mode&1)!==0);break;case 5:_s(An.type,An.memoizedProps,An.stateNode,Zt,hn,(An.mode&1)!==0)}xn&&Jp(nn)}else nn.stateNode=rr(xn,Zt,hn,nn)}return Ul(nn),null;case 13:if(Os(go),xn=nn.memoizedState,Zt===null||Zt.memoizedState!==null&&Zt.memoizedState.dehydrated!==null){if(ho&&Go!==null&&nn.mode&1&&!(nn.flags&128))Kp(),mo(),nn.flags|=98560,An=!1;else if(An=Bv(nn),xn!==null&&xn.dehydrated!==null){if(Zt===null){if(!An)throw Error(dt(318));if(!Br)throw Error(dt(344));if(An=nn.memoizedState,An=An!==null?An.dehydrated:null,!An)throw Error(dt(317));es(An,nn)}else mo(),!(nn.flags&128)&&(nn.memoizedState=null),nn.flags|=4;Ul(nn),An=!1}else Ou!==null&&(QT(Ou),Ou=null),An=!0;if(!An)return nn.flags&65536?nn:null}return nn.flags&128?(nn.lanes=hn,nn):(hn=xn!==null,hn!==(Zt!==null&&Zt.memoizedState!==null)&&hn&&(nn.child.flags|=8192,nn.mode&1&&(Zt===null||go.current&1?qo===0&&(qo=3):e3())),nn.updateQueue!==null&&(nn.flags|=4),Ul(nn),null);case 4:return lp(),b_(Zt,nn),Zt===null&&cs(nn.stateNode.containerInfo),Ul(nn),null;case 10:return Hy(nn.type._context),Ul(nn),null;case 17:return Ws(nn.type)&&Ao(),Ul(nn),null;case 19:if(Os(go),An=nn.memoizedState,An===null)return Ul(nn),null;if(xn=(nn.flags&128)!==0,Un=An.rendering,Un===null)if(xn)E_(An,!1);else{if(qo!==0||Zt!==null&&Zt.flags&128)for(Zt=nn.child;Zt!==null;){if(Un=qy(Zt),Un!==null){for(nn.flags|=128,E_(An,!1),Zt=Un.updateQueue,Zt!==null&&(nn.updateQueue=Zt,nn.flags|=4),nn.subtreeFlags=0,Zt=hn,hn=nn.child;hn!==null;)xn=hn,An=Zt,xn.flags&=14680066,Un=xn.alternate,Un===null?(xn.childLanes=0,xn.lanes=An,xn.child=null,xn.subtreeFlags=0,xn.memoizedProps=null,xn.memoizedState=null,xn.updateQueue=null,xn.dependencies=null,xn.stateNode=null):(xn.childLanes=Un.childLanes,xn.lanes=Un.lanes,xn.child=Un.child,xn.subtreeFlags=0,xn.deletions=null,xn.memoizedProps=Un.memoizedProps,xn.memoizedState=Un.memoizedState,xn.updateQueue=Un.updateQueue,xn.type=Un.type,An=Un.dependencies,xn.dependencies=An===null?null:{lanes:An.lanes,firstContext:An.firstContext}),hn=hn.sibling;return ks(go,go.current&1|2),nn.child}Zt=Zt.sibling}An.tail!==null&&Ar()>KT&&(nn.flags|=128,xn=!0,E_(An,!1),nn.lanes=4194304)}else{if(!xn)if(Zt=qy(Un),Zt!==null){if(nn.flags|=128,xn=!0,Zt=Zt.updateQueue,Zt!==null&&(nn.updateQueue=Zt,nn.flags|=4),E_(An,!0),An.tail===null&&An.tailMode==="hidden"&&!Un.alternate&&!ho)return Ul(nn),null}else 2*Ar()-An.renderingStartTime>KT&&hn!==1073741824&&(nn.flags|=128,xn=!0,E_(An,!1),nn.lanes=4194304);An.isBackwards?(Un.sibling=nn.child,nn.child=Un):(Zt=An.last,Zt!==null?Zt.sibling=Un:nn.child=Un,An.last=Un)}return An.tail!==null?(nn=An.tail,An.rendering=nn,An.tail=nn.sibling,An.renderingStartTime=Ar(),nn.sibling=null,Zt=go.current,ks(go,xn?Zt&1|2:Zt&1),nn):(Ul(nn),null);case 22:case 23:return ZT(),hn=nn.memoizedState!==null,Zt!==null&&Zt.memoizedState!==null!==hn&&(nn.flags|=8192),hn&&nn.mode&1?Fu&1073741824&&(Ul(nn),Ir&&nn.subtreeFlags&6&&(nn.flags|=8192)):Ul(nn),null;case 24:return null;case 25:return null}throw Error(dt(156,nn.tag))}function T5(Zt,nn){switch(l_(nn),nn.tag){case 1:return Ws(nn.type)&&Ao(),Zt=nn.flags,Zt&65536?(nn.flags=Zt&-65537|128,nn):null;case 3:return lp(),Os(Ys),Os(xa),Yy(),Zt=nn.flags,Zt&65536&&!(Zt&128)?(nn.flags=Zt&-65537|128,nn):null;case 5:return m_(nn),null;case 13:if(Os(go),Zt=nn.memoizedState,Zt!==null&&Zt.dehydrated!==null){if(nn.alternate===null)throw Error(dt(340));mo()}return Zt=nn.flags,Zt&65536?(nn.flags=Zt&-65537|128,nn):null;case 19:return Os(go),null;case 4:return lp(),null;case 10:return Hy(nn.type._context),null;case 22:case 23:return ZT(),null;case 24:return null;default:return null}}var Lw=!1,Gl=!1,P5=typeof WeakSet=="function"?WeakSet:Set,hs=null;function Gv(Zt,nn){var hn=Zt.ref;if(hn!==null)if(typeof hn=="function")try{hn(null)}catch(xn){bo(Zt,nn,xn)}else hn.current=null}function DT(Zt,nn,hn){try{hn()}catch(xn){bo(Zt,nn,xn)}}var sR=!1;function R5(Zt,nn){for(vn(Zt.containerInfo),hs=nn;hs!==null;)if(Zt=hs,nn=Zt.child,(Zt.subtreeFlags&1028)!==0&&nn!==null)nn.return=Zt,hs=nn;else for(;hs!==null;){Zt=hs;try{var hn=Zt.alternate;if(Zt.flags&1024)switch(Zt.tag){case 0:case 11:case 15:break;case 1:if(hn!==null){var xn=hn.memoizedProps,An=hn.memoizedState,Un=Zt.stateNode,or=Un.getSnapshotBeforeUpdate(Zt.elementType===Zt.type?xn:Ap(Zt.type,xn),An);Un.__reactInternalSnapshotBeforeUpdate=or}break;case 3:Ir&&Kn(Zt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(Sr){bo(Zt,Zt.return,Sr)}if(nn=Zt.sibling,nn!==null){nn.return=Zt.return,hs=nn;break}hs=Zt.return}return hn=sR,sR=!1,hn}function __(Zt,nn,hn){var xn=nn.updateQueue;if(xn=xn!==null?xn.lastEffect:null,xn!==null){var An=xn=xn.next;do{if((An.tag&Zt)===Zt){var Un=An.destroy;An.destroy=void 0,Un!==void 0&&DT(nn,hn,Un)}An=An.next}while(An!==xn)}}function Dw(Zt,nn){if(nn=nn.updateQueue,nn=nn!==null?nn.lastEffect:null,nn!==null){var hn=nn=nn.next;do{if((hn.tag&Zt)===Zt){var xn=hn.create;hn.destroy=xn()}hn=hn.next}while(hn!==nn)}}function jT(Zt){var nn=Zt.ref;if(nn!==null){var hn=Zt.stateNode;switch(Zt.tag){case 5:Zt=gn(hn);break;default:Zt=hn}typeof nn=="function"?nn(Zt):nn.current=Zt}}function aR(Zt){var nn=Zt.alternate;nn!==null&&(Zt.alternate=null,aR(nn)),Zt.child=null,Zt.deletions=null,Zt.sibling=null,Zt.tag===5&&(nn=Zt.stateNode,nn!==null&&Ts(nn)),Zt.stateNode=null,Zt.return=null,Zt.dependencies=null,Zt.memoizedProps=null,Zt.memoizedState=null,Zt.pendingProps=null,Zt.stateNode=null,Zt.updateQueue=null}function oR(Zt){return Zt.tag===5||Zt.tag===3||Zt.tag===4}function lR(Zt){e:for(;;){for(;Zt.sibling===null;){if(Zt.return===null||oR(Zt.return))return null;Zt=Zt.return}for(Zt.sibling.return=Zt.return,Zt=Zt.sibling;Zt.tag!==5&&Zt.tag!==6&&Zt.tag!==18;){if(Zt.flags&2||Zt.child===null||Zt.tag===4)continue e;Zt.child.return=Zt,Zt=Zt.child}if(!(Zt.flags&2))return Zt.stateNode}}function FT(Zt,nn,hn){var xn=Zt.tag;if(xn===5||xn===6)Zt=Zt.stateNode,nn?Tn(hn,Zt,nn):ln(hn,Zt);else if(xn!==4&&(Zt=Zt.child,Zt!==null))for(FT(Zt,nn,hn),Zt=Zt.sibling;Zt!==null;)FT(Zt,nn,hn),Zt=Zt.sibling}function $T(Zt,nn,hn){var xn=Zt.tag;if(xn===5||xn===6)Zt=Zt.stateNode,nn?_n(hn,Zt,nn):sn(hn,Zt);else if(xn!==4&&(Zt=Zt.child,Zt!==null))for($T(Zt,nn,hn),Zt=Zt.sibling;Zt!==null;)$T(Zt,nn,hn),Zt=Zt.sibling}var Il=null,Tp=!1;function Qp(Zt,nn,hn){for(hn=hn.child;hn!==null;)BT(Zt,nn,hn),hn=hn.sibling}function BT(Zt,nn,hn){if(Bo&&typeof Bo.onCommitFiberUnmount=="function")try{Bo.onCommitFiberUnmount(co,hn)}catch{}switch(hn.tag){case 5:Gl||Gv(hn,nn);case 6:if(Ir){var xn=Il,An=Tp;Il=null,Qp(Zt,nn,hn),Il=xn,Tp=An,Il!==null&&(Tp?Bn(Il,hn.stateNode):Nn(Il,hn.stateNode))}else Qp(Zt,nn,hn);break;case 18:Ir&&Il!==null&&(Tp?ns(Il,hn.stateNode):ss(Il,hn.stateNode));break;case 4:Ir?(xn=Il,An=Tp,Il=hn.stateNode.containerInfo,Tp=!0,Qp(Zt,nn,hn),Il=xn,Tp=An):(_i&&(xn=hn.stateNode.containerInfo,An=Gn(xn),Zn(xn,An)),Qp(Zt,nn,hn));break;case 0:case 11:case 14:case 15:if(!Gl&&(xn=hn.updateQueue,xn!==null&&(xn=xn.lastEffect,xn!==null))){An=xn=xn.next;do{var Un=An,or=Un.destroy;Un=Un.tag,or!==void 0&&(Un&2||Un&4)&&DT(hn,nn,or),An=An.next}while(An!==xn)}Qp(Zt,nn,hn);break;case 1:if(!Gl&&(Gv(hn,nn),xn=hn.stateNode,typeof xn.componentWillUnmount=="function"))try{xn.props=hn.memoizedProps,xn.state=hn.memoizedState,xn.componentWillUnmount()}catch(Sr){bo(hn,nn,Sr)}Qp(Zt,nn,hn);break;case 21:Qp(Zt,nn,hn);break;case 22:hn.mode&1?(Gl=(xn=Gl)||hn.memoizedState!==null,Qp(Zt,nn,hn),Gl=xn):Qp(Zt,nn,hn);break;default:Qp(Zt,nn,hn)}}function uR(Zt){var nn=Zt.updateQueue;if(nn!==null){Zt.updateQueue=null;var hn=Zt.stateNode;hn===null&&(hn=Zt.stateNode=new P5),nn.forEach(function(xn){var An=$5.bind(null,Zt,xn);hn.has(xn)||(hn.add(xn),xn.then(An,An))})}}function Pp(Zt,nn){var hn=nn.deletions;if(hn!==null)for(var xn=0;xn<hn.length;xn++){var An=hn[xn];try{var Un=Zt,or=nn;if(Ir){var Sr=or;e:for(;Sr!==null;){switch(Sr.tag){case 5:Il=Sr.stateNode,Tp=!1;break e;case 3:Il=Sr.stateNode.containerInfo,Tp=!0;break e;case 4:Il=Sr.stateNode.containerInfo,Tp=!0;break e}Sr=Sr.return}if(Il===null)throw Error(dt(160));BT(Un,or,An),Il=null,Tp=!1}else BT(Un,or,An);var Mr=An.alternate;Mr!==null&&(Mr.return=null),An.return=null}catch(Jr){bo(An,nn,Jr)}}if(nn.subtreeFlags&12854)for(nn=nn.child;nn!==null;)cR(nn,Zt),nn=nn.sibling}function cR(Zt,nn){var hn=Zt.alternate,xn=Zt.flags;switch(Zt.tag){case 0:case 11:case 14:case 15:if(Pp(nn,Zt),Zp(Zt),xn&4){try{__(3,Zt,Zt.return),Dw(3,Zt)}catch(as){bo(Zt,Zt.return,as)}try{__(5,Zt,Zt.return)}catch(as){bo(Zt,Zt.return,as)}}break;case 1:Pp(nn,Zt),Zp(Zt),xn&512&&hn!==null&&Gv(hn,hn.return);break;case 5:if(Pp(nn,Zt),Zp(Zt),xn&512&&hn!==null&&Gv(hn,hn.return),Ir){if(Zt.flags&32){var An=Zt.stateNode;try{Hn(An)}catch(as){bo(Zt,Zt.return,as)}}if(xn&4&&(An=Zt.stateNode,An!=null)){var Un=Zt.memoizedProps;if(hn=hn!==null?hn.memoizedProps:Un,xn=Zt.type,nn=Zt.updateQueue,Zt.updateQueue=null,nn!==null)try{wn(An,nn,xn,hn,Un,Zt)}catch(as){bo(Zt,Zt.return,as)}}}break;case 6:if(Pp(nn,Zt),Zp(Zt),xn&4&&Ir){if(Zt.stateNode===null)throw Error(dt(162));An=Zt.stateNode,Un=Zt.memoizedProps,hn=hn!==null?hn.memoizedProps:Un;try{cn(An,hn,Un)}catch(as){bo(Zt,Zt.return,as)}}break;case 3:if(Pp(nn,Zt),Zp(Zt),xn&4){if(Ir&&Br&&hn!==null&&hn.memoizedState.isDehydrated)try{$r(nn.containerInfo)}catch(as){bo(Zt,Zt.return,as)}if(_i){An=nn.containerInfo,Un=nn.pendingChildren;try{Zn(An,Un)}catch(as){bo(Zt,Zt.return,as)}}}break;case 4:if(Pp(nn,Zt),Zp(Zt),xn&4&&_i){Un=Zt.stateNode,An=Un.containerInfo,Un=Un.pendingChildren;try{Zn(An,Un)}catch(as){bo(Zt,Zt.return,as)}}break;case 13:Pp(nn,Zt),Zp(Zt),An=Zt.child,An.flags&8192&&(Un=An.memoizedState!==null,An.stateNode.isHidden=Un,!Un||An.alternate!==null&&An.alternate.memoizedState!==null||(qT=Ar())),xn&4&&uR(Zt);break;case 22:var or=hn!==null&&hn.memoizedState!==null;if(Zt.mode&1?(Gl=(hn=Gl)||or,Pp(nn,Zt),Gl=hn):Pp(nn,Zt),Zp(Zt),xn&8192){if(hn=Zt.memoizedState!==null,(Zt.stateNode.isHidden=hn)&&!or&&Zt.mode&1)for(hs=Zt,xn=Zt.child;xn!==null;){for(nn=hs=xn;hs!==null;){or=hs;var Sr=or.child;switch(or.tag){case 0:case 11:case 14:case 15:__(4,or,or.return);break;case 1:Gv(or,or.return);var Mr=or.stateNode;if(typeof Mr.componentWillUnmount=="function"){var Jr=or,ps=or.return;try{var Ns=Jr;Mr.props=Ns.memoizedProps,Mr.state=Ns.memoizedState,Mr.componentWillUnmount()}catch(as){bo(Jr,ps,as)}}break;case 5:Gv(or,or.return);break;case 22:if(or.memoizedState!==null){fR(nn);continue}}Sr!==null?(Sr.return=or,hs=Sr):fR(nn)}xn=xn.sibling}if(Ir){e:if(xn=null,Ir)for(nn=Zt;;){if(nn.tag===5){if(xn===null){xn=nn;try{An=nn.stateNode,hn?Fn(An):Jn(nn.stateNode,nn.memoizedProps)}catch(as){bo(Zt,Zt.return,as)}}}else if(nn.tag===6){if(xn===null)try{Un=nn.stateNode,hn?jn(Un):Wn(Un,nn.memoizedProps)}catch(as){bo(Zt,Zt.return,as)}}else if((nn.tag!==22&&nn.tag!==23||nn.memoizedState===null||nn===Zt)&&nn.child!==null){nn.child.return=nn,nn=nn.child;continue}if(nn===Zt)break e;for(;nn.sibling===null;){if(nn.return===null||nn.return===Zt)break e;xn===nn&&(xn=null),nn=nn.return}xn===nn&&(xn=null),nn.sibling.return=nn.return,nn=nn.sibling}}}break;case 19:Pp(nn,Zt),Zp(Zt),xn&4&&uR(Zt);break;case 21:break;default:Pp(nn,Zt),Zp(Zt)}}function Zp(Zt){var nn=Zt.flags;if(nn&2){try{if(Ir){e:{for(var hn=Zt.return;hn!==null;){if(oR(hn)){var xn=hn;break e}hn=hn.return}throw Error(dt(160))}switch(xn.tag){case 5:var An=xn.stateNode;xn.flags&32&&(Hn(An),xn.flags&=-33);var Un=lR(Zt);$T(Zt,Un,An);break;case 3:case 4:var or=xn.stateNode.containerInfo,Sr=lR(Zt);FT(Zt,Sr,or);break;default:throw Error(dt(161))}}}catch(Mr){bo(Zt,Zt.return,Mr)}Zt.flags&=-3}nn&4096&&(Zt.flags&=-4097)}function N5(Zt,nn,hn){hs=Zt,hR(Zt)}function hR(Zt,nn,hn){for(var xn=(Zt.mode&1)!==0;hs!==null;){var An=hs,Un=An.child;if(An.tag===22&&xn){var or=An.memoizedState!==null||Lw;if(!or){var Sr=An.alternate,Mr=Sr!==null&&Sr.memoizedState!==null||Gl;Sr=Lw;var Jr=Gl;if(Lw=or,(Gl=Mr)&&!Jr)for(hs=An;hs!==null;)or=hs,Mr=or.child,or.tag===22&&or.memoizedState!==null?pR(An):Mr!==null?(Mr.return=or,hs=Mr):pR(An);for(;Un!==null;)hs=Un,hR(Un),Un=Un.sibling;hs=An,Lw=Sr,Gl=Jr}dR(Zt)}else An.subtreeFlags&8772&&Un!==null?(Un.return=An,hs=Un):dR(Zt)}}function dR(Zt){for(;hs!==null;){var nn=hs;if(nn.flags&8772){var hn=nn.alternate;try{if(nn.flags&8772)switch(nn.tag){case 0:case 11:case 15:Gl||Dw(5,nn);break;case 1:var xn=nn.stateNode;if(nn.flags&4&&!Gl)if(hn===null)xn.componentDidMount();else{var An=nn.elementType===nn.type?hn.memoizedProps:Ap(nn.type,hn.memoizedProps);xn.componentDidUpdate(An,hn.memoizedState,xn.__reactInternalSnapshotBeforeUpdate)}var Un=nn.updateQueue;Un!==null&&Wo(nn,Un,xn);break;case 3:var or=nn.updateQueue;if(or!==null){if(hn=null,nn.child!==null)switch(nn.child.tag){case 5:hn=gn(nn.child.stateNode);break;case 1:hn=nn.child.stateNode}Wo(nn,or,hn)}break;case 5:var Sr=nn.stateNode;hn===null&&nn.flags&4&&fn(Sr,nn.type,nn.memoizedProps,nn);break;case 6:break;case 4:break;case 12:break;case 13:if(Br&&nn.memoizedState===null){var Mr=nn.alternate;if(Mr!==null){var Jr=Mr.memoizedState;if(Jr!==null){var ps=Jr.dehydrated;ps!==null&&Qr(ps)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}Gl||nn.flags&512&&jT(nn)}catch(Ns){bo(nn,nn.return,Ns)}}if(nn===Zt){hs=null;break}if(hn=nn.sibling,hn!==null){hn.return=nn.return,hs=hn;break}hs=nn.return}}function fR(Zt){for(;hs!==null;){var nn=hs;if(nn===Zt){hs=null;break}var hn=nn.sibling;if(hn!==null){hn.return=nn.return,hs=hn;break}hs=nn.return}}function pR(Zt){for(;hs!==null;){var nn=hs;try{switch(nn.tag){case 0:case 11:case 15:var hn=nn.return;try{Dw(4,nn)}catch(Mr){bo(nn,hn,Mr)}break;case 1:var xn=nn.stateNode;if(typeof xn.componentDidMount=="function"){var An=nn.return;try{xn.componentDidMount()}catch(Mr){bo(nn,An,Mr)}}var Un=nn.return;try{jT(nn)}catch(Mr){bo(nn,Un,Mr)}break;case 5:var or=nn.return;try{jT(nn)}catch(Mr){bo(nn,or,Mr)}}}catch(Mr){bo(nn,nn.return,Mr)}if(nn===Zt){hs=null;break}var Sr=nn.sibling;if(Sr!==null){Sr.return=nn.return,hs=Sr;break}hs=nn.return}}var jw=0,Fw=1,$w=2,Bw=3,Vw=4;if(typeof Symbol=="function"&&Symbol.for){var S_=Symbol.for;jw=S_("selector.component"),Fw=S_("selector.has_pseudo_class"),$w=S_("selector.role"),Bw=S_("selector.test_id"),Vw=S_("selector.text")}function VT(Zt){var nn=Fr(Zt);if(nn!=null){if(typeof nn.memoizedProps["data-testname"]!="string")throw Error(dt(364));return nn}if(Zt=zr(Zt),Zt===null)throw Error(dt(362));return Zt.stateNode.current}function zT(Zt,nn){switch(nn.$$typeof){case jw:if(Zt.type===nn.value)return!0;break;case Fw:e:{nn=nn.value,Zt=[Zt,0];for(var hn=0;hn<Zt.length;){var xn=Zt[hn++],An=Zt[hn++],Un=nn[An];if(xn.tag!==5||!fs(xn)){for(;Un!=null&&zT(xn,Un);)An++,Un=nn[An];if(An===nn.length){nn=!0;break e}else for(xn=xn.child;xn!==null;)Zt.push(xn,An),xn=xn.sibling}}nn=!1}return nn;case $w:if(Zt.tag===5&&Kr(Zt.stateNode,nn.value))return!0;break;case Vw:if((Zt.tag===5||Zt.tag===6)&&(Zt=rs(Zt),Zt!==null&&0<=Zt.indexOf(nn.value)))return!0;break;case Bw:if(Zt.tag===5&&(Zt=Zt.memoizedProps["data-testname"],typeof Zt=="string"&&Zt.toLowerCase()===nn.value.toLowerCase()))return!0;break;default:throw Error(dt(365))}return!1}function HT(Zt){switch(Zt.$$typeof){case jw:return"<"+(un(Zt.value)||"Unknown")+">";case Fw:return":has("+(HT(Zt)||"")+")";case $w:return'[role="'+Zt.value+'"]';case Vw:return'"'+Zt.value+'"';case Bw:return'[data-testname="'+Zt.value+'"]';default:throw Error(dt(365))}}function mR(Zt,nn){var hn=[];Zt=[Zt,0];for(var xn=0;xn<Zt.length;){var An=Zt[xn++],Un=Zt[xn++],or=nn[Un];if(An.tag!==5||!fs(An)){for(;or!=null&&zT(An,or);)Un++,or=nn[Un];if(Un===nn.length)hn.push(An);else for(An=An.child;An!==null;)Zt.push(An,Un),An=An.sibling}}return hn}function UT(Zt,nn){if(!Gr)throw Error(dt(363));Zt=VT(Zt),Zt=mR(Zt,nn),nn=[],Zt=Array.from(Zt);for(var hn=0;hn<Zt.length;){var xn=Zt[hn++];if(xn.tag===5)fs(xn)||nn.push(xn.stateNode);else for(xn=xn.child;xn!==null;)Zt.push(xn),xn=xn.sibling}return nn}var M5=Math.ceil,zw=ft.ReactCurrentDispatcher,GT=ft.ReactCurrentOwner,jo=ft.ReactCurrentBatchConfig,$s=0,Zo=null,zo=null,Ol=0,Fu=0,Wv=js(0),qo=0,w_=null,Jy=0,Hw=0,WT=0,C_=null,bu=null,qT=0,KT=1/0,jm=null;function qv(){KT=Ar()+500}var Uw=!1,YT=null,P0=null,Gw=!1,R0=null,Ww=0,k_=0,XT=null,qw=-1,Kw=0;function Wl(){return $s&6?Ar():qw!==-1?qw:qw=Ar()}function N0(Zt){return Zt.mode&1?$s&2&&Ol!==0?Ol&-Ol:By.transition!==null?(Kw===0&&(Kw=tu()),Kw):(Zt=rn,Zt!==0?Zt:Cs()):1}function cp(Zt,nn,hn,xn){if(50<k_)throw k_=0,XT=null,Error(dt(185));hu(Zt,hn,xn),(!($s&2)||Zt!==Zo)&&(Zt===Zo&&(!($s&2)&&(Hw|=hn),qo===4&&M0(Zt,Ol)),Eu(Zt,xn),hn===1&&$s===0&&!(nn.mode&1)&&(qv(),Iu&&tp()))}function Eu(Zt,nn){var hn=Zt.callbackNode;cu(Zt,nn);var xn=Hl(Zt,Zt===Zo?Ol:0);if(xn===0)hn!==null&&er(hn),Zt.callbackNode=null,Zt.callbackPriority=0;else if(nn=xn&-xn,Zt.callbackPriority!==nn){if(hn!=null&&er(hn),nn===1)Zt.tag===0?Fv(yR.bind(null,Zt)):a_(yR.bind(null,Zt)),Rr?Lr(function(){!($s&6)&&tp()}):$n(qr,tp),hn=null;else{switch(pn(xn)){case 1:hn=qr;break;case 4:hn=Zr;break;case 16:hn=As;break;case 536870912:hn=ws;break;default:hn=As}hn=AR(hn,gR.bind(null,Zt))}Zt.callbackPriority=nn,Zt.callbackNode=hn}}function gR(Zt,nn){if(qw=-1,Kw=0,$s&6)throw Error(dt(327));var hn=Zt.callbackNode;if(e1()&&Zt.callbackNode!==hn)return null;var xn=Hl(Zt,Zt===Zo?Ol:0);if(xn===0)return null;if(xn&30||xn&Zt.expiredLanes||nn)nn=Yw(Zt,xn);else{nn=xn;var An=$s;$s|=2;var Un=bR();(Zo!==Zt||Ol!==nn)&&(jm=null,qv(),Qy(Zt,nn));do try{L5();break}catch(Sr){xR(Zt,Sr)}while(1);rp(),zw.current=Un,$s=An,zo!==null?nn=0:(Zo=null,Ol=0,nn=qo)}if(nn!==0){if(nn===2&&(An=Qo(Zt),An!==0&&(xn=An,nn=JT(Zt,An))),nn===1)throw hn=w_,Qy(Zt,0),M0(Zt,xn),Eu(Zt,Ar()),hn;if(nn===6)M0(Zt,xn);else{if(An=Zt.current.alternate,!(xn&30)&&!I5(An)&&(nn=Yw(Zt,xn),nn===2&&(Un=Qo(Zt),Un!==0&&(xn=Un,nn=JT(Zt,Un))),nn===1))throw hn=w_,Qy(Zt,0),M0(Zt,xn),Eu(Zt,Ar()),hn;switch(Zt.finishedWork=An,Zt.finishedLanes=xn,nn){case 0:case 1:throw Error(dt(345));case 2:Zy(Zt,bu,jm);break;case 3:if(M0(Zt,xn),(xn&130023424)===xn&&(nn=qT+500-Ar(),10<nn)){if(Hl(Zt,0)!==0)break;if(An=Zt.suspendedLanes,(An&xn)!==xn){Wl(),Zt.pingedLanes|=Zt.suspendedLanes&An;break}Zt.timeoutHandle=hr(Zy.bind(null,Zt,bu,jm),nn);break}Zy(Zt,bu,jm);break;case 4:if(M0(Zt,xn),(xn&4194240)===xn)break;for(nn=Zt.eventTimes,An=-1;0<xn;){var or=31-zl(xn);Un=1<<or,or=nn[or],or>An&&(An=or),xn&=~Un}if(xn=An,xn=Ar()-xn,xn=(120>xn?120:480>xn?480:1080>xn?1080:1920>xn?1920:3e3>xn?3e3:4320>xn?4320:1960*M5(xn/1960))-xn,10<xn){Zt.timeoutHandle=hr(Zy.bind(null,Zt,bu,jm),xn);break}Zy(Zt,bu,jm);break;case 5:Zy(Zt,bu,jm);break;default:throw Error(dt(329))}}}return Eu(Zt,Ar()),Zt.callbackNode===hn?gR.bind(null,Zt):null}function JT(Zt,nn){var hn=C_;return Zt.current.memoizedState.isDehydrated&&(Qy(Zt,nn).flags|=256),Zt=Yw(Zt,nn),Zt!==2&&(nn=bu,bu=hn,nn!==null&&QT(nn)),Zt}function QT(Zt){bu===null?bu=Zt:bu.push.apply(bu,Zt)}function I5(Zt){for(var nn=Zt;;){if(nn.flags&16384){var hn=nn.updateQueue;if(hn!==null&&(hn=hn.stores,hn!==null))for(var xn=0;xn<hn.length;xn++){var An=hn[xn],Un=An.getSnapshot;An=An.value;try{if(!Uo(Un(),An))return!1}catch{return!1}}}if(hn=nn.child,nn.subtreeFlags&16384&&hn!==null)hn.return=nn,nn=hn;else{if(nn===Zt)break;for(;nn.sibling===null;){if(nn.return===null||nn.return===Zt)return!0;nn=nn.return}nn.sibling.return=nn.return,nn=nn.sibling}}return!0}function M0(Zt,nn){for(nn&=~WT,nn&=~Hw,Zt.suspendedLanes|=nn,Zt.pingedLanes&=~nn,Zt=Zt.expirationTimes;0<nn;){var hn=31-zl(nn),xn=1<<hn;Zt[hn]=-1,nn&=~xn}}function yR(Zt){if($s&6)throw Error(dt(327));e1();var nn=Hl(Zt,0);if(!(nn&1))return Eu(Zt,Ar()),null;var hn=Yw(Zt,nn);if(Zt.tag!==0&&hn===2){var xn=Qo(Zt);xn!==0&&(nn=xn,hn=JT(Zt,xn))}if(hn===1)throw hn=w_,Qy(Zt,0),M0(Zt,nn),Eu(Zt,Ar()),hn;if(hn===6)throw Error(dt(345));return Zt.finishedWork=Zt.current.alternate,Zt.finishedLanes=nn,Zy(Zt,bu,jm),Eu(Zt,Ar()),null}function vR(Zt){R0!==null&&R0.tag===0&&!($s&6)&&e1();var nn=$s;$s|=1;var hn=jo.transition,xn=rn;try{if(jo.transition=null,rn=1,Zt)return Zt()}finally{rn=xn,jo.transition=hn,$s=nn,!($s&6)&&tp()}}function ZT(){Fu=Wv.current,Os(Wv)}function Qy(Zt,nn){Zt.finishedWork=null,Zt.finishedLanes=0;var hn=Zt.timeoutHandle;if(hn!==xr&&(Zt.timeoutHandle=xr,_r(hn)),zo!==null)for(hn=zo.return;hn!==null;){var xn=hn;switch(l_(xn),xn.tag){case 1:xn=xn.type.childContextTypes,xn!=null&&Ao();break;case 3:lp(),Os(Ys),Os(xa),Yy();break;case 5:m_(xn);break;case 4:lp();break;case 13:Os(go);break;case 19:Os(go);break;case 10:Hy(xn.type._context);break;case 22:case 23:ZT()}hn=hn.return}if(Zo=Zt,zo=Zt=I0(Zt.current,null),Ol=Fu=nn,qo=0,w_=null,WT=Hw=Jy=0,bu=C_=null,Xs!==null){for(nn=0;nn<Xs.length;nn++)if(hn=Xs[nn],xn=hn.interleaved,xn!==null){hn.interleaved=null;var An=xn.next,Un=hn.pending;if(Un!==null){var or=Un.next;Un.next=An,xn.next=or}hn.pending=xn}Xs=null}return Zt}function xR(Zt,nn){do{var hn=zo;try{if(rp(),Du.current=Pw,xs){for(var xn=Tr.memoizedState;xn!==null;){var An=xn.queue;An!==null&&(An.pending=null),xn=xn.next}xs=!1}if(vr=0,us=Or=Tr=null,bs=!1,Vs=0,GT.current=null,hn===null||hn.return===null){qo=1,w_=nn,zo=null;break}e:{var Un=Zt,or=hn.return,Sr=hn,Mr=nn;if(nn=Ol,Sr.flags|=32768,Mr!==null&&typeof Mr=="object"&&typeof Mr.then=="function"){var Jr=Mr,ps=Sr,Ns=ps.tag;if(!(ps.mode&1)&&(Ns===0||Ns===11||Ns===15)){var as=ps.alternate;as?(ps.updateQueue=as.updateQueue,ps.memoizedState=as.memoizedState,ps.lanes=as.lanes):(ps.updateQueue=null,ps.memoizedState=null)}var yo=HP(or);if(yo!==null){yo.flags&=-257,GP(yo,or,Sr,Un,nn),yo.mode&1&&zP(Un,Jr,nn),nn=yo,Mr=Jr;var eo=nn.updateQueue;if(eo===null){var _u=new Set;_u.add(Mr),nn.updateQueue=_u}else eo.add(Mr);break e}else{if(!(nn&1)){zP(Un,Jr,nn),e3();break e}Mr=Error(dt(426))}}else if(ho&&Sr.mode&1){var Fm=HP(or);if(Fm!==null){!(Fm.flags&65536)&&(Fm.flags|=256),GP(Fm,or,Sr,Un,nn),Vv(Uv(Mr,Sr));break e}}Un=Mr=Uv(Mr,Sr),qo!==4&&(qo=2),C_===null?C_=[Un]:C_.push(Un),Un=or;do{switch(Un.tag){case 3:Un.flags|=65536,nn&=-nn,Un.lanes|=nn;var Nr=BP(Un,Mr,nn);f_(Un,Nr);break e;case 1:Sr=Mr;var Cr=Un.type,jr=Un.stateNode;if(!(Un.flags&128)&&(typeof Cr.getDerivedStateFromError=="function"||jr!==null&&typeof jr.componentDidCatch=="function"&&(P0===null||!P0.has(jr)))){Un.flags|=65536,nn&=-nn,Un.lanes|=nn;var ls=VP(Un,Sr,nn);f_(Un,ls);break e}}Un=Un.return}while(Un!==null)}_R(hn)}catch(Es){nn=Es,zo===hn&&hn!==null&&(zo=hn=hn.return);continue}break}while(1)}function bR(){var Zt=zw.current;return zw.current=Pw,Zt===null?Pw:Zt}function e3(){(qo===0||qo===3||qo===2)&&(qo=4),Zo===null||!(Jy&268435455)&&!(Hw&268435455)||M0(Zo,Ol)}function Yw(Zt,nn){var hn=$s;$s|=2;var xn=bR();(Zo!==Zt||Ol!==nn)&&(jm=null,Qy(Zt,nn));do try{O5();break}catch(An){xR(Zt,An)}while(1);if(rp(),$s=hn,zw.current=xn,zo!==null)throw Error(dt(261));return Zo=null,Ol=0,qo}function O5(){for(;zo!==null;)ER(zo)}function L5(){for(;zo!==null&&!cr();)ER(zo)}function ER(Zt){var nn=kR(Zt.alternate,Zt,Fu);Zt.memoizedProps=Zt.pendingProps,nn===null?_R(Zt):zo=nn,GT.current=null}function _R(Zt){var nn=Zt;do{var hn=nn.alternate;if(Zt=nn.return,nn.flags&32768){if(hn=T5(hn,nn),hn!==null){hn.flags&=32767,zo=hn;return}if(Zt!==null)Zt.flags|=32768,Zt.subtreeFlags=0,Zt.deletions=null;else{qo=6,zo=null;return}}else if(hn=A5(hn,nn,Fu),hn!==null){zo=hn;return}if(nn=nn.sibling,nn!==null){zo=nn;return}zo=nn=Zt}while(nn!==null);qo===0&&(qo=5)}function Zy(Zt,nn,hn){var xn=rn,An=jo.transition;try{jo.transition=null,rn=1,D5(Zt,nn,hn,xn)}finally{jo.transition=An,rn=xn}return null}function D5(Zt,nn,hn,xn){do e1();while(R0!==null);if($s&6)throw Error(dt(327));hn=Zt.finishedWork;var An=Zt.finishedLanes;if(hn===null)return null;if(Zt.finishedWork=null,Zt.finishedLanes=0,hn===Zt.current)throw Error(dt(177));Zt.callbackNode=null,Zt.callbackPriority=0;var Un=hn.lanes|hn.childLanes;if(jy(Zt,Un),Zt===Zo&&(zo=Zo=null,Ol=0),!(hn.subtreeFlags&2064)&&!(hn.flags&2064)||Gw||(Gw=!0,AR(As,function(){return e1(),null})),Un=(hn.flags&15990)!==0,hn.subtreeFlags&15990||Un){Un=jo.transition,jo.transition=null;var or=rn;rn=1;var Sr=$s;$s|=4,GT.current=null,R5(Zt,hn),cR(hn,Zt),On(Zt.containerInfo),Zt.current=hn,N5(hn),kr(),$s=Sr,rn=or,jo.transition=Un}else Zt.current=hn;if(Gw&&(Gw=!1,R0=Zt,Ww=An),Un=Zt.pendingLanes,Un===0&&(P0=null),Pm(hn.stateNode),Eu(Zt,Ar()),nn!==null)for(xn=Zt.onRecoverableError,hn=0;hn<nn.length;hn++)An=nn[hn],xn(An.value,{componentStack:An.stack,digest:An.digest});if(Uw)throw Uw=!1,Zt=YT,YT=null,Zt;return Ww&1&&Zt.tag!==0&&e1(),Un=Zt.pendingLanes,Un&1?Zt===XT?k_++:(k_=0,XT=Zt):k_=0,tp(),null}function e1(){if(R0!==null){var Zt=pn(Ww),nn=jo.transition,hn=rn;try{if(jo.transition=null,rn=16>Zt?16:Zt,R0===null)var xn=!1;else{if(Zt=R0,R0=null,Ww=0,$s&6)throw Error(dt(331));var An=$s;for($s|=4,hs=Zt.current;hs!==null;){var Un=hs,or=Un.child;if(hs.flags&16){var Sr=Un.deletions;if(Sr!==null){for(var Mr=0;Mr<Sr.length;Mr++){var Jr=Sr[Mr];for(hs=Jr;hs!==null;){var ps=hs;switch(ps.tag){case 0:case 11:case 15:__(8,ps,Un)}var Ns=ps.child;if(Ns!==null)Ns.return=ps,hs=Ns;else for(;hs!==null;){ps=hs;var as=ps.sibling,yo=ps.return;if(aR(ps),ps===Jr){hs=null;break}if(as!==null){as.return=yo,hs=as;break}hs=yo}}}var eo=Un.alternate;if(eo!==null){var _u=eo.child;if(_u!==null){eo.child=null;do{var Fm=_u.sibling;_u.sibling=null,_u=Fm}while(_u!==null)}}hs=Un}}if(Un.subtreeFlags&2064&&or!==null)or.return=Un,hs=or;else e:for(;hs!==null;){if(Un=hs,Un.flags&2048)switch(Un.tag){case 0:case 11:case 15:__(9,Un,Un.return)}var Nr=Un.sibling;if(Nr!==null){Nr.return=Un.return,hs=Nr;break e}hs=Un.return}}var Cr=Zt.current;for(hs=Cr;hs!==null;){or=hs;var jr=or.child;if(or.subtreeFlags&2064&&jr!==null)jr.return=or,hs=jr;else e:for(or=Cr;hs!==null;){if(Sr=hs,Sr.flags&2048)try{switch(Sr.tag){case 0:case 11:case 15:Dw(9,Sr)}}catch(Es){bo(Sr,Sr.return,Es)}if(Sr===or){hs=null;break e}var ls=Sr.sibling;if(ls!==null){ls.return=Sr.return,hs=ls;break e}hs=Sr.return}}if($s=An,tp(),Bo&&typeof Bo.onPostCommitFiberRoot=="function")try{Bo.onPostCommitFiberRoot(co,Zt)}catch{}xn=!0}return xn}finally{rn=hn,jo.transition=nn}}return!1}function SR(Zt,nn,hn){nn=Uv(hn,nn),nn=BP(Zt,nn,1),Zt=gu(Zt,nn,1),nn=Wl(),Zt!==null&&(hu(Zt,1,nn),Eu(Zt,nn))}function bo(Zt,nn,hn){if(Zt.tag===3)SR(Zt,Zt,hn);else for(;nn!==null;){if(nn.tag===3){SR(nn,Zt,hn);break}else if(nn.tag===1){var xn=nn.stateNode;if(typeof nn.type.getDerivedStateFromError=="function"||typeof xn.componentDidCatch=="function"&&(P0===null||!P0.has(xn))){Zt=Uv(hn,Zt),Zt=VP(nn,Zt,1),nn=gu(nn,Zt,1),Zt=Wl(),nn!==null&&(hu(nn,1,Zt),Eu(nn,Zt));break}}nn=nn.return}}function j5(Zt,nn,hn){var xn=Zt.pingCache;xn!==null&&xn.delete(nn),nn=Wl(),Zt.pingedLanes|=Zt.suspendedLanes&hn,Zo===Zt&&(Ol&hn)===hn&&(qo===4||qo===3&&(Ol&130023424)===Ol&&500>Ar()-qT?Qy(Zt,0):WT|=hn),Eu(Zt,nn)}function wR(Zt,nn){nn===0&&(Zt.mode&1?(nn=ep,ep<<=1,!(ep&130023424)&&(ep=4194304)):nn=1);var hn=Wl();Zt=sp(Zt,nn),Zt!==null&&(hu(Zt,nn,hn),Eu(Zt,hn))}function F5(Zt){var nn=Zt.memoizedState,hn=0;nn!==null&&(hn=nn.retryLane),wR(Zt,hn)}function $5(Zt,nn){var hn=0;switch(Zt.tag){case 13:var xn=Zt.stateNode,An=Zt.memoizedState;An!==null&&(hn=An.retryLane);break;case 19:xn=Zt.stateNode;break;default:throw Error(dt(314))}xn!==null&&xn.delete(nn),wR(Zt,hn)}var kR;kR=function(Zt,nn,hn){if(Zt!==null)if(Zt.memoizedProps!==nn.pendingProps||Ys.current)xu=!0;else{if(!(Zt.lanes&hn)&&!(nn.flags&128))return xu=!1,k5(Zt,nn,hn);xu=!!(Zt.flags&131072)}else xu=!1,ho&&nn.flags&1048576&&o_(nn,Fy,nn.index);switch(nn.lanes=0,nn.tag){case 2:var xn=nn.type;Mw(Zt,nn),Zt=nn.pendingProps;var An=ko(nn,xa.current);kp(nn,hn),An=T0(null,nn,xn,Zt,An,hn);var Un=g_();return nn.flags|=1,typeof An=="object"&&An!==null&&typeof An.render=="function"&&An.$$typeof===void 0?(nn.tag=1,nn.memoizedState=null,nn.updateQueue=null,Ws(xn)?(Un=!0,Wp(nn)):Un=!1,nn.memoizedState=An.state!==null&&An.state!==void 0?An.state:null,d_(nn),An.updater=Rw,nn.stateNode=An,An._reactInternals=nn,kT(nn,xn,Zt,hn),nn=NT(null,nn,xn,!0,Un,hn)):(nn.tag=0,ho&&Un&&No(nn),iu(null,nn,An,hn),nn=nn.child),nn;case 16:xn=nn.elementType;e:{switch(Mw(Zt,nn),Zt=nn.pendingProps,An=xn._init,xn=An(xn._payload),nn.type=xn,An=nn.tag=V5(xn),Zt=Ap(xn,Zt),An){case 0:nn=RT(null,nn,xn,Zt,hn);break e;case 1:nn=JP(null,nn,xn,Zt,hn);break e;case 11:nn=WP(null,nn,xn,Zt,hn);break e;case 14:nn=qP(null,nn,xn,Ap(xn.type,Zt),hn);break e}throw Error(dt(306,xn,""))}return nn;case 0:return xn=nn.type,An=nn.pendingProps,An=nn.elementType===xn?An:Ap(xn,An),RT(Zt,nn,xn,An,hn);case 1:return xn=nn.type,An=nn.pendingProps,An=nn.elementType===xn?An:Ap(xn,An),JP(Zt,nn,xn,An,hn);case 3:e:{if(QP(nn),Zt===null)throw Error(dt(387));xn=nn.pendingProps,Un=nn.memoizedState,An=Un.element,mu(Zt,nn),Gy(nn,xn,null,hn);var or=nn.memoizedState;if(xn=or.element,Br&&Un.isDehydrated)if(Un={element:xn,isDehydrated:!1,cache:or.cache,pendingSuspenseBoundaries:or.pendingSuspenseBoundaries,transitions:or.transitions},nn.updateQueue.baseState=Un,nn.memoizedState=Un,nn.flags&256){An=Uv(Error(dt(423)),nn),nn=ZP(Zt,nn,xn,hn,An);break e}else if(xn!==An){An=Uv(Error(dt(424)),nn),nn=ZP(Zt,nn,xn,hn,An);break e}else for(Br&&(Go=Pr(nn.stateNode.containerInfo),Ml=nn,ho=!0,Ou=null,$y=!1),hn=zs(nn,null,xn,hn),nn.child=hn;hn;)hn.flags=hn.flags&-3|4096,hn=hn.sibling;else{if(mo(),xn===An){nn=Dm(Zt,nn,hn);break e}iu(Zt,nn,xn,hn)}nn=nn.child}return nn;case 5:return Hv(nn),Zt===null&&c_(nn),xn=nn.type,An=nn.pendingProps,Un=Zt!==null?Zt.memoizedProps:null,or=An.children,ar(xn,An)?or=null:Un!==null&&ar(xn,Un)&&(nn.flags|=32),XP(Zt,nn),iu(Zt,nn,or,hn),nn.child;case 6:return Zt===null&&c_(nn),null;case 13:return eR(Zt,nn,hn);case 4:return p_(nn,nn.stateNode.containerInfo),xn=nn.pendingProps,Zt===null?nn.child=Im(nn,null,xn,hn):iu(Zt,nn,xn,hn),nn.child;case 11:return xn=nn.type,An=nn.pendingProps,An=nn.elementType===xn?An:Ap(xn,An),WP(Zt,nn,xn,An,hn);case 7:return iu(Zt,nn,nn.pendingProps,hn),nn.child;case 8:return iu(Zt,nn,nn.pendingProps.children,hn),nn.child;case 12:return iu(Zt,nn,nn.pendingProps.children,hn),nn.child;case 10:e:{if(xn=nn.type._context,An=nn.pendingProps,Un=nn.memoizedProps,or=An.value,Rs(nn,xn,or),Un!==null)if(Uo(Un.value,or)){if(Un.children===An.children&&!Ys.current){nn=Dm(Zt,nn,hn);break e}}else for(Un=nn.child,Un!==null&&(Un.return=nn);Un!==null;){var Sr=Un.dependencies;if(Sr!==null){or=Un.child;for(var Mr=Sr.firstContext;Mr!==null;){if(Mr.context===xn){if(Un.tag===1){Mr=ru(-1,hn&-hn),Mr.tag=2;var Jr=Un.updateQueue;if(Jr!==null){Jr=Jr.shared;var ps=Jr.pending;ps===null?Mr.next=Mr:(Mr.next=ps.next,ps.next=Mr),Jr.pending=Mr}}Un.lanes|=hn,Mr=Un.alternate,Mr!==null&&(Mr.lanes|=hn),$a(Un.return,hn,nn),Sr.lanes|=hn;break}Mr=Mr.next}}else if(Un.tag===10)or=Un.type===nn.type?null:Un.child;else if(Un.tag===18){if(or=Un.return,or===null)throw Error(dt(341));or.lanes|=hn,Sr=or.alternate,Sr!==null&&(Sr.lanes|=hn),$a(or,hn,nn),or=Un.sibling}else or=Un.child;if(or!==null)or.return=Un;else for(or=Un;or!==null;){if(or===nn){or=null;break}if(Un=or.sibling,Un!==null){Un.return=or.return,or=Un;break}or=or.return}Un=or}iu(Zt,nn,An.children,hn),nn=nn.child}return nn;case 9:return An=nn.type,xn=nn.pendingProps.children,kp(nn,hn),An=Vo(An),xn=xn(An),nn.flags|=1,iu(Zt,nn,xn,hn),nn.child;case 14:return xn=nn.type,An=Ap(xn,nn.pendingProps),An=Ap(xn.type,An),qP(Zt,nn,xn,An,hn);case 15:return KP(Zt,nn,nn.type,nn.pendingProps,hn);case 17:return xn=nn.type,An=nn.pendingProps,An=nn.elementType===xn?An:Ap(xn,An),Mw(Zt,nn),nn.tag=1,Ws(xn)?(Zt=!0,Wp(nn)):Zt=!1,kp(nn,hn),FP(nn,xn,An),kT(nn,xn,An,hn),NT(null,nn,xn,!0,Zt,hn);case 19:return nR(Zt,nn,hn);case 22:return YP(Zt,nn,hn)}throw Error(dt(156,nn.tag))};function AR(Zt,nn){return $n(Zt,nn)}function B5(Zt,nn,hn,xn){this.tag=Zt,this.key=hn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=nn,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hp(Zt,nn,hn,xn){return new B5(Zt,nn,hn,xn)}function t3(Zt){return Zt=Zt.prototype,!(!Zt||!Zt.isReactComponent)}function V5(Zt){if(typeof Zt=="function")return t3(Zt)?1:0;if(Zt!=null){if(Zt=Zt.$$typeof,Zt===Ht)return 11;if(Zt===Kt)return 14}return 2}function I0(Zt,nn){var hn=Zt.alternate;return hn===null?(hn=hp(Zt.tag,nn,Zt.key,Zt.mode),hn.elementType=Zt.elementType,hn.type=Zt.type,hn.stateNode=Zt.stateNode,hn.alternate=Zt,Zt.alternate=hn):(hn.pendingProps=nn,hn.type=Zt.type,hn.flags=0,hn.subtreeFlags=0,hn.deletions=null),hn.flags=Zt.flags&14680064,hn.childLanes=Zt.childLanes,hn.lanes=Zt.lanes,hn.child=Zt.child,hn.memoizedProps=Zt.memoizedProps,hn.memoizedState=Zt.memoizedState,hn.updateQueue=Zt.updateQueue,nn=Zt.dependencies,hn.dependencies=nn===null?null:{lanes:nn.lanes,firstContext:nn.firstContext},hn.sibling=Zt.sibling,hn.index=Zt.index,hn.ref=Zt.ref,hn}function Xw(Zt,nn,hn,xn,An,Un){var or=2;if(xn=Zt,typeof Zt=="function")t3(Zt)&&(or=1);else if(typeof Zt=="string")or=5;else e:switch(Zt){case Tt:return t1(hn.children,An,Un,nn);case Rt:or=8,An|=8;break;case jt:return Zt=hp(12,hn,nn,An|2),Zt.elementType=jt,Zt.lanes=Un,Zt;case Yt:return Zt=hp(13,hn,nn,An),Zt.elementType=Yt,Zt.lanes=Un,Zt;case zt:return Zt=hp(19,hn,nn,An),Zt.elementType=zt,Zt.lanes=Un,Zt;case tn:return Jw(hn,An,Un,nn);default:if(typeof Zt=="object"&&Zt!==null)switch(Zt.$$typeof){case Ft:or=10;break e;case Bt:or=9;break e;case Ht:or=11;break e;case Kt:or=14;break e;case en:or=16,xn=null;break e}throw Error(dt(130,Zt==null?Zt:typeof Zt,""))}return nn=hp(or,hn,nn,An),nn.elementType=Zt,nn.type=xn,nn.lanes=Un,nn}function t1(Zt,nn,hn,xn){return Zt=hp(7,Zt,xn,nn),Zt.lanes=hn,Zt}function Jw(Zt,nn,hn,xn){return Zt=hp(22,Zt,xn,nn),Zt.elementType=tn,Zt.lanes=hn,Zt.stateNode={isHidden:!1},Zt}function n3(Zt,nn,hn){return Zt=hp(6,Zt,null,nn),Zt.lanes=hn,Zt}function r3(Zt,nn,hn){return nn=hp(4,Zt.children!==null?Zt.children:[],Zt.key,nn),nn.lanes=hn,nn.stateNode={containerInfo:Zt.containerInfo,pendingChildren:null,implementation:Zt.implementation},nn}function z5(Zt,nn,hn,xn,An){this.tag=nn,this.containerInfo=Zt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=xn,this.onRecoverableError=An,Br&&(this.mutableSourceEagerHydrationData=null)}function TR(Zt,nn,hn,xn,An,Un,or,Sr,Mr){return Zt=new z5(Zt,nn,hn,Sr,Mr),nn===1?(nn=1,Un===!0&&(nn|=8)):nn=0,Un=hp(3,null,null,nn),Zt.current=Un,Un.stateNode=Zt,Un.memoizedState={element:xn,isDehydrated:hn,cache:null,transitions:null,pendingSuspenseBoundaries:null},d_(Un),Zt}function PR(Zt){if(!Zt)return vo;Zt=Zt._reactInternals;e:{if(Sn(Zt)!==Zt||Zt.tag!==1)throw Error(dt(170));var nn=Zt;do{switch(nn.tag){case 3:nn=nn.stateNode.context;break e;case 1:if(Ws(nn.type)){nn=nn.stateNode.__reactInternalMemoizedMergedChildContext;break e}}nn=nn.return}while(nn!==null);throw Error(dt(171))}if(Zt.tag===1){var hn=Zt.type;if(Ws(hn))return Am(Zt,hn,nn)}return nn}function RR(Zt){var nn=Zt._reactInternals;if(nn===void 0)throw typeof Zt.render=="function"?Error(dt(188)):(Zt=Object.keys(Zt).join(","),Error(dt(268,Zt)));return Zt=En(nn),Zt===null?null:Zt.stateNode}function NR(Zt,nn){if(Zt=Zt.memoizedState,Zt!==null&&Zt.dehydrated!==null){var hn=Zt.retryLane;Zt.retryLane=hn!==0&&hn<nn?hn:nn}}function Qw(Zt,nn){NR(Zt,nn),(Zt=Zt.alternate)&&NR(Zt,nn)}function H5(Zt){return Zt=En(Zt),Zt===null?null:Zt.stateNode}function U5(){return null}return et.attemptContinuousHydration=function(Zt){if(Zt.tag===13){var nn=sp(Zt,134217728);if(nn!==null){var hn=Wl();cp(nn,Zt,134217728,hn)}Qw(Zt,134217728)}},et.attemptDiscreteHydration=function(Zt){if(Zt.tag===13){var nn=sp(Zt,1);if(nn!==null){var hn=Wl();cp(nn,Zt,1,hn)}Qw(Zt,1)}},et.attemptHydrationAtCurrentPriority=function(Zt){if(Zt.tag===13){var nn=N0(Zt),hn=sp(Zt,nn);if(hn!==null){var xn=Wl();cp(hn,Zt,nn,xn)}Qw(Zt,nn)}},et.attemptSynchronousHydration=function(Zt){switch(Zt.tag){case 3:var nn=Zt.stateNode;if(nn.current.memoizedState.isDehydrated){var hn=Mu(nn.pendingLanes);hn!==0&&(Tm(nn,hn|1),Eu(nn,Ar()),!($s&6)&&(qv(),tp()))}break;case 13:vR(function(){var xn=sp(Zt,1);if(xn!==null){var An=Wl();cp(xn,Zt,1,An)}}),Qw(Zt,1)}},et.batchedUpdates=function(Zt,nn){var hn=$s;$s|=1;try{return Zt(nn)}finally{$s=hn,$s===0&&(qv(),Iu&&tp())}},et.createComponentSelector=function(Zt){return{$$typeof:jw,value:Zt}},et.createContainer=function(Zt,nn,hn,xn,An,Un,or){return TR(Zt,nn,!1,null,hn,xn,An,Un,or)},et.createHasPseudoClassSelector=function(Zt){return{$$typeof:Fw,value:Zt}},et.createHydrationContainer=function(Zt,nn,hn,xn,An,Un,or,Sr,Mr){return Zt=TR(hn,xn,!0,Zt,An,Un,or,Sr,Mr),Zt.context=PR(null),hn=Zt.current,xn=Wl(),An=N0(hn),Un=ru(xn,An),Un.callback=nn??null,gu(hn,Un,An),Zt.current.lanes=An,hu(Zt,An,xn),Eu(Zt,xn),Zt},et.createPortal=function(Zt,nn,hn){var xn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kt,key:xn==null?null:""+xn,children:Zt,containerInfo:nn,implementation:hn}},et.createRoleSelector=function(Zt){return{$$typeof:$w,value:Zt}},et.createTestNameSelector=function(Zt){return{$$typeof:Bw,value:Zt}},et.createTextSelector=function(Zt){return{$$typeof:Vw,value:Zt}},et.deferredUpdates=function(Zt){var nn=rn,hn=jo.transition;try{return jo.transition=null,rn=16,Zt()}finally{rn=nn,jo.transition=hn}},et.discreteUpdates=function(Zt,nn,hn,xn,An){var Un=rn,or=jo.transition;try{return jo.transition=null,rn=1,Zt(nn,hn,xn,An)}finally{rn=Un,jo.transition=or,$s===0&&qv()}},et.findAllNodes=UT,et.findBoundingRects=function(Zt,nn){if(!Gr)throw Error(dt(363));nn=UT(Zt,nn),Zt=[];for(var hn=0;hn<nn.length;hn++)Zt.push(Vr(nn[hn]));for(nn=Zt.length-1;0<nn;nn--){hn=Zt[nn];for(var xn=hn.x,An=xn+hn.width,Un=hn.y,or=Un+hn.height,Sr=nn-1;0<=Sr;Sr--)if(nn!==Sr){var Mr=Zt[Sr],Jr=Mr.x,ps=Jr+Mr.width,Ns=Mr.y,as=Ns+Mr.height;if(xn>=Jr&&Un>=Ns&&An<=ps&&or<=as){Zt.splice(nn,1);break}else if(xn!==Jr||hn.width!==Mr.width||as<Un||Ns>or){if(!(Un!==Ns||hn.height!==Mr.height||ps<xn||Jr>An)){Jr>xn&&(Mr.width+=Jr-xn,Mr.x=xn),ps<An&&(Mr.width=An-Jr),Zt.splice(nn,1);break}}else{Ns>Un&&(Mr.height+=Ns-Un,Mr.y=Un),as<or&&(Mr.height=or-Ns),Zt.splice(nn,1);break}}}return Zt},et.findHostInstance=RR,et.findHostInstanceWithNoPortals=function(Zt){return Zt=bn(Zt),Zt=Zt!==null?Pn(Zt):null,Zt===null?null:Zt.stateNode},et.findHostInstanceWithWarning=function(Zt){return RR(Zt)},et.flushControlled=function(Zt){var nn=$s;$s|=1;var hn=jo.transition,xn=rn;try{jo.transition=null,rn=1,Zt()}finally{rn=xn,jo.transition=hn,$s=nn,$s===0&&(qv(),tp())}},et.flushPassiveEffects=e1,et.flushSync=vR,et.focusWithin=function(Zt,nn){if(!Gr)throw Error(dt(363));for(Zt=VT(Zt),nn=mR(Zt,nn),nn=Array.from(nn),Zt=0;Zt<nn.length;){var hn=nn[Zt++];if(!fs(hn)){if(hn.tag===5&&$t(hn.stateNode))return!0;for(hn=hn.child;hn!==null;)nn.push(hn),hn=hn.sibling}}return!1},et.getCurrentUpdatePriority=function(){return rn},et.getFindAllNodesFailureDescription=function(Zt,nn){if(!Gr)throw Error(dt(363));var hn=0,xn=[];Zt=[VT(Zt),0];for(var An=0;An<Zt.length;){var Un=Zt[An++],or=Zt[An++],Sr=nn[or];if((Un.tag!==5||!fs(Un))&&(zT(Un,Sr)&&(xn.push(HT(Sr)),or++,or>hn&&(hn=or)),or<nn.length))for(Un=Un.child;Un!==null;)Zt.push(Un,or),Un=Un.sibling}if(hn<nn.length){for(Zt=[];hn<nn.length;hn++)Zt.push(HT(nn[hn]));return`findAllNodes was able to match part of the selector:
  `+(xn.join(" > ")+`

No matching component was found for:
  `)+Zt.join(" > ")}return null},et.getPublicRootInstance=function(Zt){if(Zt=Zt.current,!Zt.child)return null;switch(Zt.child.tag){case 5:return gn(Zt.child.stateNode);default:return Zt.child.stateNode}},et.injectIntoDevTools=function(Zt){if(Zt={bundleType:Zt.bundleType,version:Zt.version,rendererPackageName:Zt.rendererPackageName,rendererConfig:Zt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:H5,findFiberByHostInstance:Zt.findFiberByHostInstance||U5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Zt=!1;else{var nn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(nn.isDisabled||!nn.supportsFiber)Zt=!0;else{try{co=nn.inject(Zt),Bo=nn}catch{}Zt=!!nn.checkDCE}}return Zt},et.isAlreadyRendering=function(){return!1},et.observeVisibleRects=function(Zt,nn,hn,xn){if(!Gr)throw Error(dt(363));Zt=UT(Zt,nn);var An=Jt(Zt,hn,xn).disconnect;return{disconnect:function(){An()}}},et.registerMutableSourceForHydration=function(Zt,nn){var hn=nn._getVersion;hn=hn(nn._source),Zt.mutableSourceEagerHydrationData==null?Zt.mutableSourceEagerHydrationData=[nn,hn]:Zt.mutableSourceEagerHydrationData.push(nn,hn)},et.runWithPriority=function(Zt,nn){var hn=rn;try{return rn=Zt,nn()}finally{rn=hn}},et.shouldError=function(){return null},et.shouldSuspend=function(){return!1},et.updateContainer=function(Zt,nn,hn,xn){var An=nn.current,Un=Wl(),or=N0(An);return hn=PR(hn),nn.context===null?nn.context=hn:nn.pendingContext=hn,nn=ru(Un,or),nn.payload={element:Zt},xn=xn===void 0?null:xn,xn!==null&&(nn.callback=xn),Zt=gu(An,nn,or),Zt!==null&&(cp(Zt,An,or,Un),A0(Zt,An,or)),or},et};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(it,g,et=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in g&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&g.draggable){var ot=g.x!==void 0||g.y!==void 0,ut=g.onDragEnd||g.onDragMove;ot&&!ut&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var ct in et)if(!propsToSkip[ct]){var dt=ct.slice(0,2)==="on",ft=et[ct]!==g[ct];if(dt&&ft){var St=ct.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),it.off(St,et[ct])}var kt=!g.hasOwnProperty(ct);kt&&it.setAttr(ct,void 0)}var Tt=g._useStrictMode,Rt={},jt=!1;const Ft={};for(var ct in g)if(!propsToSkip[ct]){var dt=ct.slice(0,2)==="on",Bt=et[ct]!==g[ct];if(dt&&Bt){var St=ct.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),g[ct]&&(Ft[St]=g[ct])}!dt&&(g[ct]!==et[ct]||Tt&&g[ct]!==it.getAttr(ct))&&(jt=!0,Rt[ct]=g[ct])}jt&&(it.setAttrs(Rt),updatePicture(it));for(var St in Ft)it.on(St+EVENTS_NAMESPACE,Ft[St])}function updatePicture(it){if(!Konva$1.autoDrawEnabled){var g=it.getLayer()||it.getStage();g&&g.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;function appendInitialChild(it,g){if(typeof g=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${g}`);return}it.add(g),updatePicture(it)}function createInstance(it,g,et){let ot=Konva[it];ot||(console.error(`Konva has no node with the type ${it}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${it}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),ot=Konva.Group);const ut={},ct={};for(var dt in g){var ft=dt.slice(0,2)==="on";ft?ct[dt]=g[dt]:ut[dt]=g[dt]}const St=new ot(ut);return applyNodeProps(St,ct),St}function createTextInstance(it,g,et){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${it}"`)}function finalizeInitialChildren(it,g,et){return!1}function getPublicInstance(it){return it}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(it,g,et,ot){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(it){}function shouldDeprioritizeSubtree(it,g){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,noTimeout=-1;function shouldSetTextContent(it,g){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!0,supportsMutation=!0;function appendChild(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function appendChildToContainer(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function insertBefore(it,g,et){g._remove(),it.add(g),g.setZIndex(et.getZIndex()),updatePicture(it)}function insertInContainerBefore(it,g,et){insertBefore(it,g,et)}function removeChild(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function removeChildFromContainer(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function commitTextUpdate(it,g,et){console.error(`Text components are not yet supported in ReactKonva. You text is: "${et}"`)}function commitMount(it,g,et){}function commitUpdate(it,g,et,ot,ut){applyNodeProps(it,ut,ot)}function hideInstance(it){it.hide(),updatePicture(it)}function hideTextInstance(it){}function unhideInstance(it,g){(g.visible==null||g.visible)&&it.show()}function unhideTextInstance(it,g){}function clearContainer(it){}function detachDeletedInstance(){}const getCurrentEventPriority=()=>constantsExports.DefaultEventPriority,HostConfig=Object.freeze(Object.defineProperty({__proto__:null,appendChild,appendChildToContainer,appendInitialChild,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,noTimeout,now:schedulerExports.unstable_now,prepareForCommit,preparePortalMount,prepareUpdate,removeChild,removeChildFromContainer,resetAfterCommit,resetTextContent,run:schedulerExports.unstable_runWithPriority,scheduleTimeout,shouldDeprioritizeSubtree,shouldSetTextContent,supportsMutation,unhideInstance,unhideTextInstance,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(it,g,et)=>g in it?__defProp(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,__spreadValues=(it,g)=>{for(var et in g||(g={}))__hasOwnProp.call(g,et)&&__defNormalProp(it,et,g[et]);if(__getOwnPropSymbols)for(var et of __getOwnPropSymbols(g))__propIsEnum.call(g,et)&&__defNormalProp(it,et,g[et]);return it},__spreadProps=(it,g)=>__defProps(it,__getOwnPropDescs(g)),_a,_b;typeof window<"u"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(it,g,et){if(!it)return;if(et(it)===!0)return it;let ot=g?it.return:it.child;for(;ot;){const ut=traverseFiber(ot,g,et);if(ut)return ut;ot=g?null:ot.sibling}}function wrapContext(it){try{return Object.defineProperties(it,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return it}}const error=console.error;console.error=function(){const it=[...arguments].join("");if(it!=null&&it.startsWith("Warning:")&&it.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const it=reactExports.useContext(FiberContext);if(it===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const g=reactExports.useId();return reactExports.useMemo(()=>{for(const ot of[it,it==null?void 0:it.alternate]){if(!ot)continue;const ut=traverseFiber(ot,!1,ct=>{let dt=ct.memoizedState;for(;dt;){if(dt.memoizedState===g)return!0;dt=dt.next}});if(ut)return ut}},[it,g])}function useContextMap(){const it=useFiber(),[g]=reactExports.useState(()=>new Map);g.clear();let et=it;for(;et;){if(et.type&&typeof et.type=="object"){const ut=et.type._context===void 0&&et.type.Provider===et.type?et.type:et.type._context;ut&&ut!==FiberContext&&!g.has(ut)&&g.set(ut,reactExports.useContext(wrapContext(ut)))}et=et.return}return g}function useContextBridge(){const it=useContextMap();return reactExports.useMemo(()=>Array.from(it.keys()).reduce((g,et)=>ot=>reactExports.createElement(g,null,reactExports.createElement(et.Provider,__spreadProps(__spreadValues({},ot),{value:it.get(et)}))),g=>reactExports.createElement(FiberProvider,__spreadValues({},g))),[it])}function usePrevious(it){const g=React$3.useRef({});return React$3.useLayoutEffect(()=>{g.current=it}),React$3.useLayoutEffect(()=>()=>{g.current={}},[]),g.current}const StageWrap=it=>{const g=React$3.useRef(null),et=React$3.useRef(null),ot=React$3.useRef(null),ut=usePrevious(it),ct=useContextBridge(),dt=ft=>{const{forwardedRef:St}=it;St&&(typeof St=="function"?St(ft):St.current=ft)};return React$3.useLayoutEffect(()=>(et.current=new Konva.Stage({width:it.width,height:it.height,container:g.current}),dt(et.current),ot.current=KonvaRenderer.createContainer(et.current,constantsExports.LegacyRoot,!1,null),KonvaRenderer.updateContainer(React$3.createElement(ct,{},it.children),ot.current),()=>{Konva.isBrowser&&(dt(null),KonvaRenderer.updateContainer(null,ot.current,null),et.current.destroy())}),[]),React$3.useLayoutEffect(()=>{dt(et.current),applyNodeProps(et.current,it,ut),KonvaRenderer.updateContainer(React$3.createElement(ct,{},it.children),ot.current,null)}),React$3.createElement("div",{ref:g,id:it.id,accessKey:it.accessKey,className:it.className,role:it.role,style:it.style,tabIndex:it.tabIndex,title:it.title})},Layer="Layer",Rect="Rect",Ellipse="Ellipse",Image$1="Image",Text$1="Text",Path="Path",Arrow="Arrow",Transformer="Transformer",KonvaRenderer=ReactFiberReconciler(HostConfig);KonvaRenderer.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:React$3.version,rendererPackageName:"react-konva"});const Stage=React$3.forwardRef((it,g)=>React$3.createElement(FiberProvider,{},React$3.createElement(StageWrap,{...it,forwardedRef:g})));var React=reactExports,useImage=function it(g,et,ot){const ut=React.useRef("loading"),ct=React.useRef(),[dt,ft]=React.useState(0),St=React.useRef(),kt=React.useRef(),Tt=React.useRef();return(St.current!==g||kt.current!==et||Tt.current!==ot)&&(ut.current="loading",ct.current=void 0,St.current=g,kt.current=et,Tt.current=ot),React.useLayoutEffect(function(){if(!g)return;var Rt=document.createElement("img");function jt(){Rt.decode().catch(()=>{}).finally(()=>{ut.current="loaded",ct.current=Rt,ft(Math.random())})}function Ft(){ut.current="failed",ct.current=void 0,ft(Math.random())}return Rt.addEventListener("load",jt),Rt.addEventListener("error",Ft),et&&(Rt.crossOrigin=et),ot&&(Rt.referrerPolicy=ot),Rt.src=g,function(){Rt.removeEventListener("load",jt),Rt.removeEventListener("error",Ft)}},[g,et,ot]),[ct.current,ut.current]};const useImage$1=getDefaultExportFromCjs(useImage);function ShapePropertiesPanel({panelOpen:it,selectedIds:g=[],shapes:et,updateSelected:ot,deleteSelected:ut}){reactExports.useEffect(()=>(window.onShapeDrawn=()=>setSelectedTool(null),()=>window.onShapeDrawn=null),[]);const ct=et.filter(Ft=>g.includes(Ft.id)),dt=ct.length===1?ct[0]:null,[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(()=>{const Ft=localStorage.getItem("cre8tly_panel_position");return Ft?JSON.parse(Ft):{x:0,y:0}});reactExports.useEffect(()=>{localStorage.setItem("cre8tly_panel_position",JSON.stringify(kt))},[kt]);const Rt=reactExports.useCallback(Ft=>{Ft.stopPropagation(),St(!0)},[]),jt=reactExports.useCallback(()=>{St(!1)},[]);return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&dt&&jsxRuntimeExports.jsxs(motion.div,{drag:!ft,dragMomentum:!1,onDragEnd:(Ft,Bt)=>Tt(Ht=>({x:Ht.x+Bt.offset.x,y:Ht.y+Bt.offset.y})),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:{x:kt.x,y:kt.y},className:"absolute top-6 right-6 z-[9999] bg-[#111]/95 backdrop-blur-md border border-gray-700/60 rounded-xl p-4 flex flex-col gap-3 shadow-2xl w-72 cursor-grab active:cursor-grabbing select-none",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-sm",children:"Shape Properties"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.fill||"#000000",onMouseDown:Rt,onMouseUp:jt,onChange:Ft=>ot({fill:Ft.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.fill||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Stroke"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.stroke||"#000000",onMouseDown:Rt,onMouseUp:jt,onChange:Ft=>ot({stroke:Ft.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.stroke||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.01",onMouseDown:Rt,onMouseUp:jt,onTouchStart:Rt,onTouchEnd:jt,value:dt.strokeWidth||2,onChange:Ft=>ot({strokeWidth:parseFloat(Ft.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(dt.strokeWidth||0).toFixed(1)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",onMouseDown:Rt,onMouseUp:jt,onTouchStart:Rt,onTouchEnd:jt,value:dt.opacity??1,onChange:Ft=>ot({opacity:parseFloat(Ft.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(dt.opacity??1).toFixed(2)})]})]}),dt.type==="rect"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Rounded Corners"}),jsxRuntimeExports.jsx("input",{type:"checkbox",onMouseDown:Rt,onMouseUp:jt,onChange:Ft=>{const Bt=Ft.target.checked;ot({cornerRadius:Bt?Math.min(dt.width||0,dt.height||0)*.1:0})},checked:!!dt.cornerRadius,className:"accent-blue w-4 h-4 cursor-pointer"})]}),jsxRuntimeExports.jsx("button",{onMouseDown:Rt,onMouseUp:jt,onClick:()=>ut(g),className:"self-end mt-2 p-1 bg-white/5 hover:bg-red-700/20 text-white rounded-md flex items-center justify-center transition-all duration-150",title:"Delete shape",children:jsxRuntimeExports.jsx(Trash2,{className:"text-red-500",size:16})})]})})}function PDFOverlayCanvas({shapes:it,setShapes:g,selectedTool:et,setSelectedTool:ot,selectedIds:ut,setSelectedIds:ct}){it=Array.isArray(it)?it:[];const dt=reactExports.useRef(null),ft=reactExports.useRef(null),[St,kt]=reactExports.useState({width:0,height:0}),[Tt,Rt]=reactExports.useState(!1),[jt,Ft]=reactExports.useState(null),[Bt,Ht]=reactExports.useState(null),Yt=reactExports.useRef(null),zt=reactExports.useRef(null),Kt=`cre8tly_canvas_shapes_page_${window.currentPDFPage??0}`;reactExports.useEffect(()=>{if(!dt.current)return;const mn=new ResizeObserver(([bn])=>{const{width:En,height:kn}=bn.contentRect;kt({width:En,height:kn})});return mn.observe(dt.current),()=>mn.disconnect()},[]),reactExports.useEffect(()=>{const mn=()=>{g([])};return window.addEventListener("clearCanvasShapes",mn),()=>window.removeEventListener("clearCanvasShapes",mn)},[g]),reactExports.useEffect(()=>{function mn(){if(!dt.current)return;const{clientWidth:bn,clientHeight:En}=dt.current;kt({width:bn,height:En})}return mn(),window.addEventListener("resize",mn),()=>window.removeEventListener("resize",mn)},[]),reactExports.useEffect(()=>{const mn=bn=>{var gn;const{id:En}=bn.detail,kn=(gn=ft.current)==null?void 0:gn.getStage();if(!kn)return;const Pn=kn.findOne(`#${En}`);if(!Pn)return;const Ln={target:Pn};Pn.fire("dblclick",Ln)};return window.addEventListener("autoEditText",mn),()=>window.removeEventListener("autoEditText",mn)},[]),reactExports.useEffect(()=>{const mn=localStorage.getItem(Kt);if(mn)try{g(JSON.parse(mn)),console.log(` Restored shapes for page ${window.currentPDFPage}`)}catch(bn){console.error(" Failed to parse saved shapes:",bn)}},[Kt]),reactExports.useEffect(()=>{it.length>0?localStorage.setItem(Kt,JSON.stringify(it)):localStorage.removeItem(Kt)},[it,Kt]);const en=(mn=[])=>{mn.length&&(g(bn=>bn.filter(En=>!mn.includes(En.id))),ct([]),Rt(!1))},tn=mn=>{g(bn=>bn.map(En=>ut.includes(En.id)?{...En,...mn}:En))};reactExports.useEffect(()=>{var kn;const mn=ft.current,bn=mn==null?void 0:mn.getStage();if(!bn)return;const En=ut.map(Pn=>bn.findOne(`#${Pn}`)).filter(Boolean);mn.nodes(En),(kn=mn.getLayer())==null||kn.batchDraw()},[ut,it]),reactExports.useEffect(()=>{localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it))},[it]),reactExports.useEffect(()=>{const mn=bn=>{var En;bn.target.closest(".canvas-toolbar")||(En=dt.current)!=null&&En.contains(bn.target)||(ct([]),Rt(!1))};return document.addEventListener("mousedown",mn,!0),()=>document.removeEventListener("mousedown",mn,!0)},[]);const on=reactExports.useRef(!1),an=reactExports.useRef({x:0,y:0}),un=mn=>{const bn=mn.target.getStage(),En=mn.target===bn||mn.target.getParent()===bn.findOne("Layer"),kn=bn.getPointerPosition();if(!et&&En){Yt.current=kn,Ht({x:kn.x,y:kn.y,width:0,height:0}),on.current=!1;return}et&&En&&(on.current=!0,an.current=kn,Ft({id:"preview-shape",type:et,x:kn.x,y:kn.y,width:0,height:0,radiusX:0,radiusY:0,fill:"rgba(0,128,255,0.15)",stroke:"#00b4ff",strokeWidth:0,opacity:.6}))},dn=mn=>{const En=mn.target.getStage().getPointerPosition();if(En){if(on.current&&jt){const kn=En.x-an.current.x,Pn=En.y-an.current.y;if(jt.type==="rect"){const Ln=Math.min(an.current.x,En.x),gn=Math.min(an.current.y,En.y),Mn=Math.abs(kn),yn=Math.abs(Pn);Ft(vn=>({...vn,x:Ln,y:gn,width:Mn,height:yn}));return}if(jt.type==="circle"){const Ln=an.current.x+kn/2,gn=an.current.y+Pn/2,Mn=Math.abs(kn)/2,yn=Math.abs(Pn)/2;Ft(vn=>({...vn,x:Ln,y:gn,radiusX:Mn,radiusY:yn}));return}if(jt.type==="arrow"){Ft(Ln=>({...Ln,points:[an.current.x,an.current.y,En.x,En.y]}));return}}if(Bt&&Yt.current){const kn=Math.min(En.x,Yt.current.x),Pn=Math.min(En.y,Yt.current.y),Ln=Math.abs(En.x-Yt.current.x),gn=Math.abs(En.y-Yt.current.y);Ht({x:kn,y:Pn,width:Ln,height:gn})}}},Sn=mn=>{var En,kn;const bn=mn.target.getStage();if(Bt){const Pn=bn.scaleX(),Ln=bn.scaleY(),gn={x:Bt.x/Pn,y:Bt.y/Ln,width:Bt.width/Pn,height:Bt.height/Ln},Mn={x:Math.min(gn.x,gn.x+gn.width),y:Math.min(gn.y,gn.y+gn.height),x2:Math.max(gn.x,gn.x+gn.width),y2:Math.max(gn.y,gn.y+gn.height)},yn=it.filter(vn=>{const On=bn.findOne(`#${vn.id}`);if(!On)return console.log(" Shape node not found:",vn.id),!1;const Cn=On.getClientRect({relativeTo:bn});return!(Cn.x+Cn.width<Mn.x||Cn.x>Mn.x2||Cn.y+Cn.height<Mn.y||Cn.y>Mn.y2)}).map(vn=>vn.id);ct(yn),Rt(yn.length===1),Ht(null),Yt.current=null,yn.length===0&&console.log(" No shapes selected by box.");return}if(on.current&&jt){on.current=!1,jt.type==="rect"&&(jt.width<2||jt.height<2)||jt.type==="circle"&&(jt.radiusX<1||jt.radiusY<1)||jt.type==="arrow"&&!jt.points||g(gn=>[...gn,{...jt,id:`shape-${Date.now()}`,strokeWidth:jt.type==="arrow"?2:0}]),Ft(null),ot(null);const Ln=(kn=(En=zt.current)==null?void 0:En.getStage())==null?void 0:kn.container();Ln&&(Ln.style.cursor="default")}};return reactExports.useEffect(()=>{var bn,En;const mn=(En=(bn=zt.current)==null?void 0:bn.getStage())==null?void 0:En.container();mn&&(mn.style.cursor=et?"crosshair":"default")},[et]),reactExports.useEffect(()=>{const mn=()=>{var En,kn;if(!on.current)return;on.current=!1,Ft(null),ot(null);const bn=(kn=(En=zt.current)==null?void 0:En.getStage())==null?void 0:kn.container();bn&&(bn.style.cursor="default")};return document.addEventListener("mouseup",mn),()=>document.removeEventListener("mouseup",mn)},[ot]),jsxRuntimeExports.jsxs("div",{ref:dt,className:"absolute inset-0 pointer-events-auto",style:{zIndex:50},children:[St.width>0&&jsxRuntimeExports.jsx(Stage,{ref:zt,width:St.width,height:St.height,className:"absolute inset-0",style:{background:"transparent",cursor:et?"crosshair":"default"},onMouseDown:un,onMouseMove:dn,onMouseUp:Sn,children:jsxRuntimeExports.jsxs(Layer,{children:[it.map(mn=>{const bn=ut.includes(mn.id);switch(mn.type==="rect"&&typeof mn.cornerRadius!="number"&&(mn.cornerRadius=0),mn.type){case"circle":return jsxRuntimeExports.jsx(Ellipse,{id:mn.id.toString(),...mn,radiusX:mn.radiusX??mn.radius??50,radiusY:mn.radiusY??mn.radius??50,fill:mn.fill??"rgba(0,128,255,0.25)",stroke:mn.stroke??"#00b4ff",strokeWidth:mn.strokeWidth??2,shadowEnabled:bn,shadowColor:"#00b4ff",shadowBlur:bn?10:0,shadowOpacity:bn?.8:0,onClick:En=>{const kn=En.evt.shiftKey;Rt(!0),ct(Pn=>kn?Pn.includes(mn.id)?Pn.filter(Ln=>Ln!==mn.id):[...Pn,mn.id]:[mn.id])},draggable:!0,onDragEnd:En=>{const{x:kn,y:Pn}=En.target.position();g(Ln=>Ln.map(gn=>gn.id===mn.id?{...gn,x:kn,y:Pn}:gn))},onTransformEnd:En=>{const kn=En.target,Pn=kn.scaleX(),Ln=kn.scaleY();g(gn=>gn.map(Mn=>Mn.id===mn.id?{...Mn,x:kn.x(),y:kn.y(),radiusX:(Mn.radiusX??Mn.radius??50)*Pn,radiusY:(Mn.radiusY??Mn.radius??50)*Ln,rotation:kn.rotation()}:Mn)),kn.scaleX(1),kn.scaleY(1)}},mn.id);case"arrow":return jsxRuntimeExports.jsx(Arrow,{id:mn.id.toString(),...mn,points:mn.points??[0,0,100,0],pointerLength:mn.pointerLength??15,pointerWidth:mn.pointerWidth??15,stroke:mn.stroke??"#00b4ff",fill:mn.stroke??"#00b4ff",strokeWidth:mn.strokeWidth??3,hitStrokeWidth:20,shadowEnabled:bn,shadowColor:"#00b4ff",shadowBlur:bn?10:0,shadowOpacity:bn?.8:0,onClick:En=>{const kn=En.evt.shiftKey;Rt(!0),ct(Pn=>kn?Pn.includes(mn.id)?Pn.filter(Ln=>Ln!==mn.id):[...Pn,mn.id]:[mn.id])},draggable:!0,onDragEnd:En=>{const{x:kn,y:Pn}=En.target.position();g(Ln=>Ln.map(gn=>gn.id===mn.id?{...gn,x:kn,y:Pn}:gn))},onTransformEnd:En=>{const kn=En.target;g(Pn=>Pn.map(Ln=>Ln.id===mn.id?{...Ln,x:kn.x(),y:kn.y(),scaleX:kn.scaleX(),scaleY:kn.scaleY()}:Ln)),kn.scaleX(1),kn.scaleY(1)}},mn.id);case"text":return jsxRuntimeExports.jsx(Text$1,{id:mn.id.toString(),...mn,fill:mn.fill,stroke:mn.stroke,strokeWidth:mn.strokeWidth??1,shadowEnabled:bn,shadowColor:"#00b4ff",shadowBlur:bn?10:0,shadowOpacity:bn?.8:0,draggable:!mn.isEditing,onClick:En=>{const kn=En.evt.shiftKey;Rt(!0),ct(Pn=>kn?Pn.includes(mn.id)?Pn.filter(Ln=>Ln!==mn.id):[...Pn,mn.id]:[mn.id])},onTransformEnd:En=>{const kn=En.target;tn({x:kn.x(),y:kn.y(),rotation:kn.rotation(),scaleX:kn.scaleX(),scaleY:kn.scaleY()}),kn.scaleX(1),kn.scaleY(1)}},mn.id);case"path":return jsxRuntimeExports.jsx(Path,{id:mn.id.toString(),data:mn.data,fill:mn.fill,stroke:mn.stroke,strokeWidth:mn.strokeWidth,draggable:!0,onClick:En=>{const kn=En.evt.shiftKey;ct(Pn=>kn?[...Pn,mn.id]:[mn.id]),Rt(!0)}},mn.id);default:return jsxRuntimeExports.jsx(Rect,{id:mn.id.toString(),...mn,fill:mn.fill??"rgba(0,128,255,0.25)",stroke:mn.stroke??"#00b4ff",strokeWidth:mn.strokeWidth??2,perfectDrawEnabled:!1,strokeScaleEnabled:!1,onClick:En=>{const kn=En.evt.shiftKey;Rt(!0),ct(Pn=>kn?Pn.includes(mn.id)?Pn.filter(Ln=>Ln!==mn.id):[...Pn,mn.id]:[mn.id])},draggable:!0,onDragEnd:En=>{const{x:kn,y:Pn}=En.target.position();g(Ln=>Ln.map(gn=>gn.id===mn.id?{...gn,x:kn,y:Pn}:gn))},onTransformEnd:En=>{const kn=En.target,Pn=kn.scaleX(),Ln=kn.scaleY(),gn=Math.max(20,kn.width()*Pn),Mn=Math.max(20,kn.height()*Ln);g(yn=>yn.map(vn=>vn.id===mn.id?{...vn,x:kn.x(),y:kn.y(),width:gn,height:Mn,rotation:kn.rotation(),cornerRadius:mn.cornerRadius?Math.min(gn,Mn)*.1:0}:vn)),kn.scaleX(1),kn.scaleY(1)}},mn.id)}}),jt&&(jt.type==="rect"?jsxRuntimeExports.jsx(Rect,{...jt}):jt.type==="circle"?jsxRuntimeExports.jsx(Ellipse,{...jt}):jt.type==="arrow"?jsxRuntimeExports.jsx(Arrow,{...jt}):null),Bt&&jsxRuntimeExports.jsx(Rect,{x:Bt.x,y:Bt.y,width:Bt.width,height:Bt.height,fill:"rgba(0, 128, 255, 0.1)",stroke:"#00b4ff",strokeWidth:1,dash:[4,4]}),jsxRuntimeExports.jsx(Transformer,{ref:ft,rotateEnabled:!0,resizeEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],anchorCornerRadius:50,anchorSize:5,anchorStroke:"#00b4ff",anchorStrokeWidth:.5,anchorFill:"#ffffff",borderStroke:"#00b4ff",borderStrokeWidth:1.5,borderDash:[3,3],ignoreStroke:!1})]})}),jsxRuntimeExports.jsx(ShapePropertiesPanel,{panelOpen:Tt,selectedIds:ut,shapes:it,updateSelected:tn,deleteSelected:en})]})}function commonjsRequire(it){throw new Error('Could not dynamically require "'+it+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var paperFull={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);var acorn={exports:{}},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(it,g){(function(et,ot){ot(g)})(commonjsGlobal,function(et){var ot=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],ut=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],ct="-----------------------------------------------------------------------------------------------------------------------------------------------------",dt="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ft={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},St="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",kt={5:St,"5module":St+" export import",6:St+" const class extends export import super"},Tt=/^in(stanceof)?$/,Rt=new RegExp("["+dt+"]"),jt=new RegExp("["+dt+ct+"]");function Ft(rn,pn){for(var $n=65536,er=0;er<pn.length;er+=2){if($n+=pn[er],$n>rn)return!1;if($n+=pn[er+1],$n>=rn)return!0}return!1}function Bt(rn,pn){return rn<65?rn===36:rn<91?!0:rn<97?rn===95:rn<123?!0:rn<=65535?rn>=170&&Rt.test(String.fromCharCode(rn)):pn===!1?!1:Ft(rn,ut)}function Ht(rn,pn){return rn<48?rn===36:rn<58?!0:rn<65?!1:rn<91?!0:rn<97?rn===95:rn<123?!0:rn<=65535?rn>=170&&jt.test(String.fromCharCode(rn)):pn===!1?!1:Ft(rn,ut)||Ft(rn,ot)}var Yt=function(pn,$n){$n===void 0&&($n={}),this.label=pn,this.keyword=$n.keyword,this.beforeExpr=!!$n.beforeExpr,this.startsExpr=!!$n.startsExpr,this.isLoop=!!$n.isLoop,this.isAssign=!!$n.isAssign,this.prefix=!!$n.prefix,this.postfix=!!$n.postfix,this.binop=$n.binop||null,this.updateContext=null};function zt(rn,pn){return new Yt(rn,{beforeExpr:!0,binop:pn})}var Kt={beforeExpr:!0},en={startsExpr:!0},tn={};function on(rn,pn){return pn===void 0&&(pn={}),pn.keyword=rn,tn[rn]=new Yt(rn,pn)}var an={num:new Yt("num",en),regexp:new Yt("regexp",en),string:new Yt("string",en),name:new Yt("name",en),privateId:new Yt("privateId",en),eof:new Yt("eof"),bracketL:new Yt("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Yt("]"),braceL:new Yt("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Yt("}"),parenL:new Yt("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Yt(")"),comma:new Yt(",",Kt),semi:new Yt(";",Kt),colon:new Yt(":",Kt),dot:new Yt("."),question:new Yt("?",Kt),questionDot:new Yt("?."),arrow:new Yt("=>",Kt),template:new Yt("template"),invalidTemplate:new Yt("invalidTemplate"),ellipsis:new Yt("...",Kt),backQuote:new Yt("`",en),dollarBraceL:new Yt("${",{beforeExpr:!0,startsExpr:!0}),eq:new Yt("=",{beforeExpr:!0,isAssign:!0}),assign:new Yt("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Yt("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Yt("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:zt("||",1),logicalAND:zt("&&",2),bitwiseOR:zt("|",3),bitwiseXOR:zt("^",4),bitwiseAND:zt("&",5),equality:zt("==/!=/===/!==",6),relational:zt("</>/<=/>=",7),bitShift:zt("<</>>/>>>",8),plusMin:new Yt("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:zt("%",10),star:zt("*",10),slash:zt("/",10),starstar:new Yt("**",{beforeExpr:!0}),coalesce:zt("??",1),_break:on("break"),_case:on("case",Kt),_catch:on("catch"),_continue:on("continue"),_debugger:on("debugger"),_default:on("default",Kt),_do:on("do",{isLoop:!0,beforeExpr:!0}),_else:on("else",Kt),_finally:on("finally"),_for:on("for",{isLoop:!0}),_function:on("function",en),_if:on("if"),_return:on("return",Kt),_switch:on("switch"),_throw:on("throw",Kt),_try:on("try"),_var:on("var"),_const:on("const"),_while:on("while",{isLoop:!0}),_with:on("with"),_new:on("new",{beforeExpr:!0,startsExpr:!0}),_this:on("this",en),_super:on("super",en),_class:on("class",en),_extends:on("extends",Kt),_export:on("export"),_import:on("import",en),_null:on("null",en),_true:on("true",en),_false:on("false",en),_in:on("in",{beforeExpr:!0,binop:7}),_instanceof:on("instanceof",{beforeExpr:!0,binop:7}),_typeof:on("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:on("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:on("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},un=/\r\n?|\n|\u2028|\u2029/,dn=new RegExp(un.source,"g");function Sn(rn){return rn===10||rn===13||rn===8232||rn===8233}function mn(rn,pn,$n){$n===void 0&&($n=rn.length);for(var er=pn;er<$n;er++){var cr=rn.charCodeAt(er);if(Sn(cr))return er<$n-1&&cr===13&&rn.charCodeAt(er+1)===10?er+2:er+1}return-1}var bn=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,En=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kn=Object.prototype,Pn=kn.hasOwnProperty,Ln=kn.toString,gn=Object.hasOwn||function(rn,pn){return Pn.call(rn,pn)},Mn=Array.isArray||function(rn){return Ln.call(rn)==="[object Array]"},yn=Object.create(null);function vn(rn){return yn[rn]||(yn[rn]=new RegExp("^(?:"+rn.replace(/ /g,"|")+")$"))}function On(rn){return rn<=65535?String.fromCharCode(rn):(rn-=65536,String.fromCharCode((rn>>10)+55296,(rn&1023)+56320))}var Cn=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Vn=function(pn,$n){this.line=pn,this.column=$n};Vn.prototype.offset=function(pn){return new Vn(this.line,this.column+pn)};var Qn=function(pn,$n,er){this.start=$n,this.end=er,pn.sourceFile!==null&&(this.source=pn.sourceFile)};function ir(rn,pn){for(var $n=1,er=0;;){var cr=mn(rn,er,pn);if(cr<0)return new Vn($n,pn-er);++$n,er=cr}}var ar={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},rr=!1;function hr(rn){var pn={};for(var $n in ar)pn[$n]=rn&&gn(rn,$n)?rn[$n]:ar[$n];if(pn.ecmaVersion==="latest"?pn.ecmaVersion=1e8:pn.ecmaVersion==null?(!rr&&typeof console=="object"&&console.warn&&(rr=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),pn.ecmaVersion=11):pn.ecmaVersion>=2015&&(pn.ecmaVersion-=2009),pn.allowReserved==null&&(pn.allowReserved=pn.ecmaVersion<5),(!rn||rn.allowHashBang==null)&&(pn.allowHashBang=pn.ecmaVersion>=14),Mn(pn.onToken)){var er=pn.onToken;pn.onToken=function(cr){return er.push(cr)}}return Mn(pn.onComment)&&(pn.onComment=_r(pn,pn.onComment)),pn}function _r(rn,pn){return function($n,er,cr,kr,Ar,qr){var Zr={type:$n?"Block":"Line",value:er,start:cr,end:kr};rn.locations&&(Zr.loc=new Qn(this,Ar,qr)),rn.ranges&&(Zr.range=[cr,kr]),pn.push(Zr)}}var xr=1,wr=2,Ir=4,_i=8,Br=16,Fr=32,cs=64,Cs=128,Ts=256,Rr=xr|wr|Ts;function Lr(rn,pn){return wr|(rn?Ir:0)|(pn?_i:0)}var Gr=0,zr=1,Vr=2,rs=3,fs=4,Kr=5,$t=function(pn,$n,er){this.options=pn=hr(pn),this.sourceFile=pn.sourceFile,this.keywords=vn(kt[pn.ecmaVersion>=6?6:pn.sourceType==="module"?"5module":5]);var cr="";pn.allowReserved!==!0&&(cr=ft[pn.ecmaVersion>=6?6:pn.ecmaVersion===5?5:3],pn.sourceType==="module"&&(cr+=" await")),this.reservedWords=vn(cr);var kr=(cr?cr+" ":"")+ft.strict;this.reservedWordsStrict=vn(kr),this.reservedWordsStrictBind=vn(kr+" "+ft.strictBind),this.input=String($n),this.containsEsc=!1,er?(this.pos=er,this.lineStart=this.input.lastIndexOf(`
`,er-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(un).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=an.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=pn.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&pn.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(xr),this.regexpState=null,this.privateNameStack=[]},Jt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};$t.prototype.parse=function(){var pn=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(pn)},Jt.inFunction.get=function(){return(this.currentVarScope().flags&wr)>0},Jt.inGenerator.get=function(){return(this.currentVarScope().flags&_i)>0&&!this.currentVarScope().inClassFieldInit},Jt.inAsync.get=function(){return(this.currentVarScope().flags&Ir)>0&&!this.currentVarScope().inClassFieldInit},Jt.canAwait.get=function(){for(var rn=this.scopeStack.length-1;rn>=0;rn--){var pn=this.scopeStack[rn];if(pn.inClassFieldInit||pn.flags&Ts)return!1;if(pn.flags&wr)return(pn.flags&Ir)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Jt.allowSuper.get=function(){var rn=this.currentThisScope(),pn=rn.flags,$n=rn.inClassFieldInit;return(pn&cs)>0||$n||this.options.allowSuperOutsideMethod},Jt.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Cs)>0},Jt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Jt.allowNewDotTarget.get=function(){var rn=this.currentThisScope(),pn=rn.flags,$n=rn.inClassFieldInit;return(pn&(wr|Ts))>0||$n},Jt.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ts)>0},$t.extend=function(){for(var pn=[],$n=arguments.length;$n--;)pn[$n]=arguments[$n];for(var er=this,cr=0;cr<pn.length;cr++)er=pn[cr](er);return er},$t.parse=function(pn,$n){return new this($n,pn).parse()},$t.parseExpressionAt=function(pn,$n,er){var cr=new this(er,pn,$n);return cr.nextToken(),cr.parseExpression()},$t.tokenizer=function(pn,$n){return new this($n,pn)},Object.defineProperties($t.prototype,Jt);var sn=$t.prototype,ln=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;sn.strictDirective=function(rn){if(this.options.ecmaVersion<5)return!1;for(;;){En.lastIndex=rn,rn+=En.exec(this.input)[0].length;var pn=ln.exec(this.input.slice(rn));if(!pn)return!1;if((pn[1]||pn[2])==="use strict"){En.lastIndex=rn+pn[0].length;var $n=En.exec(this.input),er=$n.index+$n[0].length,cr=this.input.charAt(er);return cr===";"||cr==="}"||un.test($n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(cr)||cr==="!"&&this.input.charAt(er+1)==="=")}rn+=pn[0].length,En.lastIndex=rn,rn+=En.exec(this.input)[0].length,this.input[rn]===";"&&rn++}},sn.eat=function(rn){return this.type===rn?(this.next(),!0):!1},sn.isContextual=function(rn){return this.type===an.name&&this.value===rn&&!this.containsEsc},sn.eatContextual=function(rn){return this.isContextual(rn)?(this.next(),!0):!1},sn.expectContextual=function(rn){this.eatContextual(rn)||this.unexpected()},sn.canInsertSemicolon=function(){return this.type===an.eof||this.type===an.braceR||un.test(this.input.slice(this.lastTokEnd,this.start))},sn.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},sn.semicolon=function(){!this.eat(an.semi)&&!this.insertSemicolon()&&this.unexpected()},sn.afterTrailingComma=function(rn,pn){if(this.type===rn)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),pn||this.next(),!0},sn.expect=function(rn){this.eat(rn)||this.unexpected()},sn.unexpected=function(rn){this.raise(rn??this.start,"Unexpected token")};var cn=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};sn.checkPatternErrors=function(rn,pn){if(rn){rn.trailingComma>-1&&this.raiseRecoverable(rn.trailingComma,"Comma is not permitted after the rest element");var $n=pn?rn.parenthesizedAssign:rn.parenthesizedBind;$n>-1&&this.raiseRecoverable($n,pn?"Assigning to rvalue":"Parenthesized pattern")}},sn.checkExpressionErrors=function(rn,pn){if(!rn)return!1;var $n=rn.shorthandAssign,er=rn.doubleProto;if(!pn)return $n>=0||er>=0;$n>=0&&this.raise($n,"Shorthand property assignments are valid only in destructuring patterns"),er>=0&&this.raiseRecoverable(er,"Redefinition of __proto__ property")},sn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},sn.isSimpleAssignTarget=function(rn){return rn.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(rn.expression):rn.type==="Identifier"||rn.type==="MemberExpression"};var fn=$t.prototype;fn.parseTopLevel=function(rn){var pn=Object.create(null);for(rn.body||(rn.body=[]);this.type!==an.eof;){var $n=this.parseStatement(null,!0,pn);rn.body.push($n)}if(this.inModule)for(var er=0,cr=Object.keys(this.undefinedExports);er<cr.length;er+=1){var kr=cr[er];this.raiseRecoverable(this.undefinedExports[kr].start,"Export '"+kr+"' is not defined")}return this.adaptDirectivePrologue(rn.body),this.next(),rn.sourceType=this.options.sourceType,this.finishNode(rn,"Program")};var wn={kind:"loop"},_n={kind:"switch"};fn.isLet=function(rn){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;En.lastIndex=this.pos;var pn=En.exec(this.input),$n=this.pos+pn[0].length,er=this.input.charCodeAt($n);if(er===91||er===92)return!0;if(rn)return!1;if(er===123||er>55295&&er<56320)return!0;if(Bt(er,!0)){for(var cr=$n+1;Ht(er=this.input.charCodeAt(cr),!0);)++cr;if(er===92||er>55295&&er<56320)return!0;var kr=this.input.slice($n,cr);if(!Tt.test(kr))return!0}return!1},fn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;En.lastIndex=this.pos;var rn=En.exec(this.input),pn=this.pos+rn[0].length,$n;return!un.test(this.input.slice(this.pos,pn))&&this.input.slice(pn,pn+8)==="function"&&(pn+8===this.input.length||!(Ht($n=this.input.charCodeAt(pn+8))||$n>55295&&$n<56320))},fn.parseStatement=function(rn,pn,$n){var er=this.type,cr=this.startNode(),kr;switch(this.isLet(rn)&&(er=an._var,kr="let"),er){case an._break:case an._continue:return this.parseBreakContinueStatement(cr,er.keyword);case an._debugger:return this.parseDebuggerStatement(cr);case an._do:return this.parseDoStatement(cr);case an._for:return this.parseForStatement(cr);case an._function:return rn&&(this.strict||rn!=="if"&&rn!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(cr,!1,!rn);case an._class:return rn&&this.unexpected(),this.parseClass(cr,!0);case an._if:return this.parseIfStatement(cr);case an._return:return this.parseReturnStatement(cr);case an._switch:return this.parseSwitchStatement(cr);case an._throw:return this.parseThrowStatement(cr);case an._try:return this.parseTryStatement(cr);case an._const:case an._var:return kr=kr||this.value,rn&&kr!=="var"&&this.unexpected(),this.parseVarStatement(cr,kr);case an._while:return this.parseWhileStatement(cr);case an._with:return this.parseWithStatement(cr);case an.braceL:return this.parseBlock(!0,cr);case an.semi:return this.parseEmptyStatement(cr);case an._export:case an._import:if(this.options.ecmaVersion>10&&er===an._import){En.lastIndex=this.pos;var Ar=En.exec(this.input),qr=this.pos+Ar[0].length,Zr=this.input.charCodeAt(qr);if(Zr===40||Zr===46)return this.parseExpressionStatement(cr,this.parseExpression())}return this.options.allowImportExportEverywhere||(pn||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),er===an._import?this.parseImport(cr):this.parseExport(cr,$n);default:if(this.isAsyncFunction())return rn&&this.unexpected(),this.next(),this.parseFunctionStatement(cr,!0,!rn);var As=this.value,ws=this.parseExpression();return er===an.name&&ws.type==="Identifier"&&this.eat(an.colon)?this.parseLabeledStatement(cr,As,ws,rn):this.parseExpressionStatement(cr,ws)}},fn.parseBreakContinueStatement=function(rn,pn){var $n=pn==="break";this.next(),this.eat(an.semi)||this.insertSemicolon()?rn.label=null:this.type!==an.name?this.unexpected():(rn.label=this.parseIdent(),this.semicolon());for(var er=0;er<this.labels.length;++er){var cr=this.labels[er];if((rn.label==null||cr.name===rn.label.name)&&(cr.kind!=null&&($n||cr.kind==="loop")||rn.label&&$n))break}return er===this.labels.length&&this.raise(rn.start,"Unsyntactic "+pn),this.finishNode(rn,$n?"BreakStatement":"ContinueStatement")},fn.parseDebuggerStatement=function(rn){return this.next(),this.semicolon(),this.finishNode(rn,"DebuggerStatement")},fn.parseDoStatement=function(rn){return this.next(),this.labels.push(wn),rn.body=this.parseStatement("do"),this.labels.pop(),this.expect(an._while),rn.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(an.semi):this.semicolon(),this.finishNode(rn,"DoWhileStatement")},fn.parseForStatement=function(rn){this.next();var pn=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(wn),this.enterScope(0),this.expect(an.parenL),this.type===an.semi)return pn>-1&&this.unexpected(pn),this.parseFor(rn,null);var $n=this.isLet();if(this.type===an._var||this.type===an._const||$n){var er=this.startNode(),cr=$n?"let":this.value;return this.next(),this.parseVar(er,!0,cr),this.finishNode(er,"VariableDeclaration"),(this.type===an._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&er.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===an._in?pn>-1&&this.unexpected(pn):rn.await=pn>-1),this.parseForIn(rn,er)):(pn>-1&&this.unexpected(pn),this.parseFor(rn,er))}var kr=this.isContextual("let"),Ar=!1,qr=this.containsEsc,Zr=new cn,As=this.start,ws=pn>-1?this.parseExprSubscripts(Zr,"await"):this.parseExpression(!0,Zr);return this.type===an._in||(Ar=this.options.ecmaVersion>=6&&this.isContextual("of"))?(pn>-1?(this.type===an._in&&this.unexpected(pn),rn.await=!0):Ar&&this.options.ecmaVersion>=8&&(ws.start===As&&!qr&&ws.type==="Identifier"&&ws.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(rn.await=!1)),kr&&Ar&&this.raise(ws.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(ws,!1,Zr),this.checkLValPattern(ws),this.parseForIn(rn,ws)):(this.checkExpressionErrors(Zr,!0),pn>-1&&this.unexpected(pn),this.parseFor(rn,ws))},fn.parseFunctionStatement=function(rn,pn,$n){return this.next(),this.parseFunction(rn,Nn|($n?0:Bn),!1,pn)},fn.parseIfStatement=function(rn){return this.next(),rn.test=this.parseParenExpression(),rn.consequent=this.parseStatement("if"),rn.alternate=this.eat(an._else)?this.parseStatement("if"):null,this.finishNode(rn,"IfStatement")},fn.parseReturnStatement=function(rn){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(an.semi)||this.insertSemicolon()?rn.argument=null:(rn.argument=this.parseExpression(),this.semicolon()),this.finishNode(rn,"ReturnStatement")},fn.parseSwitchStatement=function(rn){this.next(),rn.discriminant=this.parseParenExpression(),rn.cases=[],this.expect(an.braceL),this.labels.push(_n),this.enterScope(0);for(var pn,$n=!1;this.type!==an.braceR;)if(this.type===an._case||this.type===an._default){var er=this.type===an._case;pn&&this.finishNode(pn,"SwitchCase"),rn.cases.push(pn=this.startNode()),pn.consequent=[],this.next(),er?pn.test=this.parseExpression():($n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),$n=!0,pn.test=null),this.expect(an.colon)}else pn||this.unexpected(),pn.consequent.push(this.parseStatement(null));return this.exitScope(),pn&&this.finishNode(pn,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(rn,"SwitchStatement")},fn.parseThrowStatement=function(rn){return this.next(),un.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),rn.argument=this.parseExpression(),this.semicolon(),this.finishNode(rn,"ThrowStatement")};var Tn=[];fn.parseCatchClauseParam=function(){var rn=this.parseBindingAtom(),pn=rn.type==="Identifier";return this.enterScope(pn?Fr:0),this.checkLValPattern(rn,pn?fs:Vr),this.expect(an.parenR),rn},fn.parseTryStatement=function(rn){if(this.next(),rn.block=this.parseBlock(),rn.handler=null,this.type===an._catch){var pn=this.startNode();this.next(),this.eat(an.parenL)?pn.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),pn.param=null,this.enterScope(0)),pn.body=this.parseBlock(!1),this.exitScope(),rn.handler=this.finishNode(pn,"CatchClause")}return rn.finalizer=this.eat(an._finally)?this.parseBlock():null,!rn.handler&&!rn.finalizer&&this.raise(rn.start,"Missing catch or finally clause"),this.finishNode(rn,"TryStatement")},fn.parseVarStatement=function(rn,pn,$n){return this.next(),this.parseVar(rn,!1,pn,$n),this.semicolon(),this.finishNode(rn,"VariableDeclaration")},fn.parseWhileStatement=function(rn){return this.next(),rn.test=this.parseParenExpression(),this.labels.push(wn),rn.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(rn,"WhileStatement")},fn.parseWithStatement=function(rn){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),rn.object=this.parseParenExpression(),rn.body=this.parseStatement("with"),this.finishNode(rn,"WithStatement")},fn.parseEmptyStatement=function(rn){return this.next(),this.finishNode(rn,"EmptyStatement")},fn.parseLabeledStatement=function(rn,pn,$n,er){for(var cr=0,kr=this.labels;cr<kr.length;cr+=1){var Ar=kr[cr];Ar.name===pn&&this.raise($n.start,"Label '"+pn+"' is already declared")}for(var qr=this.type.isLoop?"loop":this.type===an._switch?"switch":null,Zr=this.labels.length-1;Zr>=0;Zr--){var As=this.labels[Zr];if(As.statementStart===rn.start)As.statementStart=this.start,As.kind=qr;else break}return this.labels.push({name:pn,kind:qr,statementStart:this.start}),rn.body=this.parseStatement(er?er.indexOf("label")===-1?er+"label":er:"label"),this.labels.pop(),rn.label=$n,this.finishNode(rn,"LabeledStatement")},fn.parseExpressionStatement=function(rn,pn){return rn.expression=pn,this.semicolon(),this.finishNode(rn,"ExpressionStatement")},fn.parseBlock=function(rn,pn,$n){for(rn===void 0&&(rn=!0),pn===void 0&&(pn=this.startNode()),pn.body=[],this.expect(an.braceL),rn&&this.enterScope(0);this.type!==an.braceR;){var er=this.parseStatement(null);pn.body.push(er)}return $n&&(this.strict=!1),this.next(),rn&&this.exitScope(),this.finishNode(pn,"BlockStatement")},fn.parseFor=function(rn,pn){return rn.init=pn,this.expect(an.semi),rn.test=this.type===an.semi?null:this.parseExpression(),this.expect(an.semi),rn.update=this.type===an.parenR?null:this.parseExpression(),this.expect(an.parenR),rn.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(rn,"ForStatement")},fn.parseForIn=function(rn,pn){var $n=this.type===an._in;return this.next(),pn.type==="VariableDeclaration"&&pn.declarations[0].init!=null&&(!$n||this.options.ecmaVersion<8||this.strict||pn.kind!=="var"||pn.declarations[0].id.type!=="Identifier")&&this.raise(pn.start,($n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),rn.left=pn,rn.right=$n?this.parseExpression():this.parseMaybeAssign(),this.expect(an.parenR),rn.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(rn,$n?"ForInStatement":"ForOfStatement")},fn.parseVar=function(rn,pn,$n,er){for(rn.declarations=[],rn.kind=$n;;){var cr=this.startNode();if(this.parseVarId(cr,$n),this.eat(an.eq)?cr.init=this.parseMaybeAssign(pn):!er&&$n==="const"&&!(this.type===an._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!er&&cr.id.type!=="Identifier"&&!(pn&&(this.type===an._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):cr.init=null,rn.declarations.push(this.finishNode(cr,"VariableDeclarator")),!this.eat(an.comma))break}return rn},fn.parseVarId=function(rn,pn){rn.id=this.parseBindingAtom(),this.checkLValPattern(rn.id,pn==="var"?zr:Vr,!1)};var Nn=1,Bn=2,Hn=4;fn.parseFunction=function(rn,pn,$n,er,cr){this.initFunction(rn),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!er)&&(this.type===an.star&&pn&Bn&&this.unexpected(),rn.generator=this.eat(an.star)),this.options.ecmaVersion>=8&&(rn.async=!!er),pn&Nn&&(rn.id=pn&Hn&&this.type!==an.name?null:this.parseIdent(),rn.id&&!(pn&Bn)&&this.checkLValSimple(rn.id,this.strict||rn.generator||rn.async?this.treatFunctionsAsVar?zr:Vr:rs));var kr=this.yieldPos,Ar=this.awaitPos,qr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Lr(rn.async,rn.generator)),pn&Nn||(rn.id=this.type===an.name?this.parseIdent():null),this.parseFunctionParams(rn),this.parseFunctionBody(rn,$n,!1,cr),this.yieldPos=kr,this.awaitPos=Ar,this.awaitIdentPos=qr,this.finishNode(rn,pn&Nn?"FunctionDeclaration":"FunctionExpression")},fn.parseFunctionParams=function(rn){this.expect(an.parenL),rn.params=this.parseBindingList(an.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},fn.parseClass=function(rn,pn){this.next();var $n=this.strict;this.strict=!0,this.parseClassId(rn,pn),this.parseClassSuper(rn);var er=this.enterClassBody(),cr=this.startNode(),kr=!1;for(cr.body=[],this.expect(an.braceL);this.type!==an.braceR;){var Ar=this.parseClassElement(rn.superClass!==null);Ar&&(cr.body.push(Ar),Ar.type==="MethodDefinition"&&Ar.kind==="constructor"?(kr&&this.raiseRecoverable(Ar.start,"Duplicate constructor in the same class"),kr=!0):Ar.key&&Ar.key.type==="PrivateIdentifier"&&Fn(er,Ar)&&this.raiseRecoverable(Ar.key.start,"Identifier '#"+Ar.key.name+"' has already been declared"))}return this.strict=$n,this.next(),rn.body=this.finishNode(cr,"ClassBody"),this.exitClassBody(),this.finishNode(rn,pn?"ClassDeclaration":"ClassExpression")},fn.parseClassElement=function(rn){if(this.eat(an.semi))return null;var pn=this.options.ecmaVersion,$n=this.startNode(),er="",cr=!1,kr=!1,Ar="method",qr=!1;if(this.eatContextual("static")){if(pn>=13&&this.eat(an.braceL))return this.parseClassStaticBlock($n),$n;this.isClassElementNameStart()||this.type===an.star?qr=!0:er="static"}if($n.static=qr,!er&&pn>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===an.star)&&!this.canInsertSemicolon()?kr=!0:er="async"),!er&&(pn>=9||!kr)&&this.eat(an.star)&&(cr=!0),!er&&!kr&&!cr){var Zr=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Ar=Zr:er=Zr)}if(er?($n.computed=!1,$n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),$n.key.name=er,this.finishNode($n.key,"Identifier")):this.parseClassElementName($n),pn<13||this.type===an.parenL||Ar!=="method"||cr||kr){var As=!$n.static&&jn($n,"constructor"),ws=As&&rn;As&&Ar!=="method"&&this.raise($n.key.start,"Constructor can't have get/set modifier"),$n.kind=As?"constructor":Ar,this.parseClassMethod($n,cr,kr,ws)}else this.parseClassField($n);return $n},fn.isClassElementNameStart=function(){return this.type===an.name||this.type===an.privateId||this.type===an.num||this.type===an.string||this.type===an.bracketL||this.type.keyword},fn.parseClassElementName=function(rn){this.type===an.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),rn.computed=!1,rn.key=this.parsePrivateIdent()):this.parsePropertyName(rn)},fn.parseClassMethod=function(rn,pn,$n,er){var cr=rn.key;rn.kind==="constructor"?(pn&&this.raise(cr.start,"Constructor can't be a generator"),$n&&this.raise(cr.start,"Constructor can't be an async method")):rn.static&&jn(rn,"prototype")&&this.raise(cr.start,"Classes may not have a static property named prototype");var kr=rn.value=this.parseMethod(pn,$n,er);return rn.kind==="get"&&kr.params.length!==0&&this.raiseRecoverable(kr.start,"getter should have no params"),rn.kind==="set"&&kr.params.length!==1&&this.raiseRecoverable(kr.start,"setter should have exactly one param"),rn.kind==="set"&&kr.params[0].type==="RestElement"&&this.raiseRecoverable(kr.params[0].start,"Setter cannot use rest params"),this.finishNode(rn,"MethodDefinition")},fn.parseClassField=function(rn){if(jn(rn,"constructor")?this.raise(rn.key.start,"Classes can't have a field named 'constructor'"):rn.static&&jn(rn,"prototype")&&this.raise(rn.key.start,"Classes can't have a static field named 'prototype'"),this.eat(an.eq)){var pn=this.currentThisScope(),$n=pn.inClassFieldInit;pn.inClassFieldInit=!0,rn.value=this.parseMaybeAssign(),pn.inClassFieldInit=$n}else rn.value=null;return this.semicolon(),this.finishNode(rn,"PropertyDefinition")},fn.parseClassStaticBlock=function(rn){rn.body=[];var pn=this.labels;for(this.labels=[],this.enterScope(Ts|cs);this.type!==an.braceR;){var $n=this.parseStatement(null);rn.body.push($n)}return this.next(),this.exitScope(),this.labels=pn,this.finishNode(rn,"StaticBlock")},fn.parseClassId=function(rn,pn){this.type===an.name?(rn.id=this.parseIdent(),pn&&this.checkLValSimple(rn.id,Vr,!1)):(pn===!0&&this.unexpected(),rn.id=null)},fn.parseClassSuper=function(rn){rn.superClass=this.eat(an._extends)?this.parseExprSubscripts(null,!1):null},fn.enterClassBody=function(){var rn={declared:Object.create(null),used:[]};return this.privateNameStack.push(rn),rn.declared},fn.exitClassBody=function(){var rn=this.privateNameStack.pop(),pn=rn.declared,$n=rn.used;if(this.options.checkPrivateFields)for(var er=this.privateNameStack.length,cr=er===0?null:this.privateNameStack[er-1],kr=0;kr<$n.length;++kr){var Ar=$n[kr];gn(pn,Ar.name)||(cr?cr.used.push(Ar):this.raiseRecoverable(Ar.start,"Private field '#"+Ar.name+"' must be declared in an enclosing class"))}};function Fn(rn,pn){var $n=pn.key.name,er=rn[$n],cr="true";return pn.type==="MethodDefinition"&&(pn.kind==="get"||pn.kind==="set")&&(cr=(pn.static?"s":"i")+pn.kind),er==="iget"&&cr==="iset"||er==="iset"&&cr==="iget"||er==="sget"&&cr==="sset"||er==="sset"&&cr==="sget"?(rn[$n]="true",!1):er?!0:(rn[$n]=cr,!1)}function jn(rn,pn){var $n=rn.computed,er=rn.key;return!$n&&(er.type==="Identifier"&&er.name===pn||er.type==="Literal"&&er.value===pn)}fn.parseExportAllDeclaration=function(rn,pn){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(rn.exported=this.parseModuleExportName(),this.checkExport(pn,rn.exported,this.lastTokStart)):rn.exported=null),this.expectContextual("from"),this.type!==an.string&&this.unexpected(),rn.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(rn.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(rn,"ExportAllDeclaration")},fn.parseExport=function(rn,pn){if(this.next(),this.eat(an.star))return this.parseExportAllDeclaration(rn,pn);if(this.eat(an._default))return this.checkExport(pn,"default",this.lastTokStart),rn.declaration=this.parseExportDefaultDeclaration(),this.finishNode(rn,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())rn.declaration=this.parseExportDeclaration(rn),rn.declaration.type==="VariableDeclaration"?this.checkVariableExport(pn,rn.declaration.declarations):this.checkExport(pn,rn.declaration.id,rn.declaration.id.start),rn.specifiers=[],rn.source=null;else{if(rn.declaration=null,rn.specifiers=this.parseExportSpecifiers(pn),this.eatContextual("from"))this.type!==an.string&&this.unexpected(),rn.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(rn.attributes=this.parseWithClause());else{for(var $n=0,er=rn.specifiers;$n<er.length;$n+=1){var cr=er[$n];this.checkUnreserved(cr.local),this.checkLocalExport(cr.local),cr.local.type==="Literal"&&this.raise(cr.local.start,"A string literal cannot be used as an exported binding without `from`.")}rn.source=null}this.semicolon()}return this.finishNode(rn,"ExportNamedDeclaration")},fn.parseExportDeclaration=function(rn){return this.parseStatement(null)},fn.parseExportDefaultDeclaration=function(){var rn;if(this.type===an._function||(rn=this.isAsyncFunction())){var pn=this.startNode();return this.next(),rn&&this.next(),this.parseFunction(pn,Nn|Hn,!1,rn)}else if(this.type===an._class){var $n=this.startNode();return this.parseClass($n,"nullableID")}else{var er=this.parseMaybeAssign();return this.semicolon(),er}},fn.checkExport=function(rn,pn,$n){rn&&(typeof pn!="string"&&(pn=pn.type==="Identifier"?pn.name:pn.value),gn(rn,pn)&&this.raiseRecoverable($n,"Duplicate export '"+pn+"'"),rn[pn]=!0)},fn.checkPatternExport=function(rn,pn){var $n=pn.type;if($n==="Identifier")this.checkExport(rn,pn,pn.start);else if($n==="ObjectPattern")for(var er=0,cr=pn.properties;er<cr.length;er+=1){var kr=cr[er];this.checkPatternExport(rn,kr)}else if($n==="ArrayPattern")for(var Ar=0,qr=pn.elements;Ar<qr.length;Ar+=1){var Zr=qr[Ar];Zr&&this.checkPatternExport(rn,Zr)}else $n==="Property"?this.checkPatternExport(rn,pn.value):$n==="AssignmentPattern"?this.checkPatternExport(rn,pn.left):$n==="RestElement"&&this.checkPatternExport(rn,pn.argument)},fn.checkVariableExport=function(rn,pn){if(rn)for(var $n=0,er=pn;$n<er.length;$n+=1){var cr=er[$n];this.checkPatternExport(rn,cr.id)}},fn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},fn.parseExportSpecifier=function(rn){var pn=this.startNode();return pn.local=this.parseModuleExportName(),pn.exported=this.eatContextual("as")?this.parseModuleExportName():pn.local,this.checkExport(rn,pn.exported,pn.exported.start),this.finishNode(pn,"ExportSpecifier")},fn.parseExportSpecifiers=function(rn){var pn=[],$n=!0;for(this.expect(an.braceL);!this.eat(an.braceR);){if($n)$n=!1;else if(this.expect(an.comma),this.afterTrailingComma(an.braceR))break;pn.push(this.parseExportSpecifier(rn))}return pn},fn.parseImport=function(rn){return this.next(),this.type===an.string?(rn.specifiers=Tn,rn.source=this.parseExprAtom()):(rn.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),rn.source=this.type===an.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(rn.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(rn,"ImportDeclaration")},fn.parseImportSpecifier=function(){var rn=this.startNode();return rn.imported=this.parseModuleExportName(),this.eatContextual("as")?rn.local=this.parseIdent():(this.checkUnreserved(rn.imported),rn.local=rn.imported),this.checkLValSimple(rn.local,Vr),this.finishNode(rn,"ImportSpecifier")},fn.parseImportDefaultSpecifier=function(){var rn=this.startNode();return rn.local=this.parseIdent(),this.checkLValSimple(rn.local,Vr),this.finishNode(rn,"ImportDefaultSpecifier")},fn.parseImportNamespaceSpecifier=function(){var rn=this.startNode();return this.next(),this.expectContextual("as"),rn.local=this.parseIdent(),this.checkLValSimple(rn.local,Vr),this.finishNode(rn,"ImportNamespaceSpecifier")},fn.parseImportSpecifiers=function(){var rn=[],pn=!0;if(this.type===an.name&&(rn.push(this.parseImportDefaultSpecifier()),!this.eat(an.comma)))return rn;if(this.type===an.star)return rn.push(this.parseImportNamespaceSpecifier()),rn;for(this.expect(an.braceL);!this.eat(an.braceR);){if(pn)pn=!1;else if(this.expect(an.comma),this.afterTrailingComma(an.braceR))break;rn.push(this.parseImportSpecifier())}return rn},fn.parseWithClause=function(){var rn=[];if(!this.eat(an._with))return rn;this.expect(an.braceL);for(var pn={},$n=!0;!this.eat(an.braceR);){if($n)$n=!1;else if(this.expect(an.comma),this.afterTrailingComma(an.braceR))break;var er=this.parseImportAttribute(),cr=er.key.type==="Identifier"?er.key.name:er.key.value;gn(pn,cr)&&this.raiseRecoverable(er.key.start,"Duplicate attribute key '"+cr+"'"),pn[cr]=!0,rn.push(er)}return rn},fn.parseImportAttribute=function(){var rn=this.startNode();return rn.key=this.type===an.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(an.colon),this.type!==an.string&&this.unexpected(),rn.value=this.parseExprAtom(),this.finishNode(rn,"ImportAttribute")},fn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===an.string){var rn=this.parseLiteral(this.value);return Cn.test(rn.value)&&this.raise(rn.start,"An export name cannot include a lone surrogate."),rn}return this.parseIdent(!0)},fn.adaptDirectivePrologue=function(rn){for(var pn=0;pn<rn.length&&this.isDirectiveCandidate(rn[pn]);++pn)rn[pn].directive=rn[pn].expression.raw.slice(1,-1)},fn.isDirectiveCandidate=function(rn){return this.options.ecmaVersion>=5&&rn.type==="ExpressionStatement"&&rn.expression.type==="Literal"&&typeof rn.expression.value=="string"&&(this.input[rn.start]==='"'||this.input[rn.start]==="'")};var Jn=$t.prototype;Jn.toAssignable=function(rn,pn,$n){if(this.options.ecmaVersion>=6&&rn)switch(rn.type){case"Identifier":this.inAsync&&rn.name==="await"&&this.raise(rn.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":rn.type="ObjectPattern",$n&&this.checkPatternErrors($n,!0);for(var er=0,cr=rn.properties;er<cr.length;er+=1){var kr=cr[er];this.toAssignable(kr,pn),kr.type==="RestElement"&&(kr.argument.type==="ArrayPattern"||kr.argument.type==="ObjectPattern")&&this.raise(kr.argument.start,"Unexpected token")}break;case"Property":rn.kind!=="init"&&this.raise(rn.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(rn.value,pn);break;case"ArrayExpression":rn.type="ArrayPattern",$n&&this.checkPatternErrors($n,!0),this.toAssignableList(rn.elements,pn);break;case"SpreadElement":rn.type="RestElement",this.toAssignable(rn.argument,pn),rn.argument.type==="AssignmentPattern"&&this.raise(rn.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":rn.operator!=="="&&this.raise(rn.left.end,"Only '=' operator can be used for specifying default value."),rn.type="AssignmentPattern",delete rn.operator,this.toAssignable(rn.left,pn);break;case"ParenthesizedExpression":this.toAssignable(rn.expression,pn,$n);break;case"ChainExpression":this.raiseRecoverable(rn.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!pn)break;default:this.raise(rn.start,"Assigning to rvalue")}else $n&&this.checkPatternErrors($n,!0);return rn},Jn.toAssignableList=function(rn,pn){for(var $n=rn.length,er=0;er<$n;er++){var cr=rn[er];cr&&this.toAssignable(cr,pn)}if($n){var kr=rn[$n-1];this.options.ecmaVersion===6&&pn&&kr&&kr.type==="RestElement"&&kr.argument.type!=="Identifier"&&this.unexpected(kr.argument.start)}return rn},Jn.parseSpread=function(rn){var pn=this.startNode();return this.next(),pn.argument=this.parseMaybeAssign(!1,rn),this.finishNode(pn,"SpreadElement")},Jn.parseRestBinding=function(){var rn=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==an.name&&this.unexpected(),rn.argument=this.parseBindingAtom(),this.finishNode(rn,"RestElement")},Jn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case an.bracketL:var rn=this.startNode();return this.next(),rn.elements=this.parseBindingList(an.bracketR,!0,!0),this.finishNode(rn,"ArrayPattern");case an.braceL:return this.parseObj(!0)}return this.parseIdent()},Jn.parseBindingList=function(rn,pn,$n,er){for(var cr=[],kr=!0;!this.eat(rn);)if(kr?kr=!1:this.expect(an.comma),pn&&this.type===an.comma)cr.push(null);else{if($n&&this.afterTrailingComma(rn))break;if(this.type===an.ellipsis){var Ar=this.parseRestBinding();this.parseBindingListItem(Ar),cr.push(Ar),this.type===an.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(rn);break}else cr.push(this.parseAssignableListItem(er))}return cr},Jn.parseAssignableListItem=function(rn){var pn=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(pn),pn},Jn.parseBindingListItem=function(rn){return rn},Jn.parseMaybeDefault=function(rn,pn,$n){if($n=$n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(an.eq))return $n;var er=this.startNodeAt(rn,pn);return er.left=$n,er.right=this.parseMaybeAssign(),this.finishNode(er,"AssignmentPattern")},Jn.checkLValSimple=function(rn,pn,$n){pn===void 0&&(pn=Gr);var er=pn!==Gr;switch(rn.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(rn.name)&&this.raiseRecoverable(rn.start,(er?"Binding ":"Assigning to ")+rn.name+" in strict mode"),er&&(pn===Vr&&rn.name==="let"&&this.raiseRecoverable(rn.start,"let is disallowed as a lexically bound name"),$n&&(gn($n,rn.name)&&this.raiseRecoverable(rn.start,"Argument name clash"),$n[rn.name]=!0),pn!==Kr&&this.declareName(rn.name,pn,rn.start));break;case"ChainExpression":this.raiseRecoverable(rn.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":er&&this.raiseRecoverable(rn.start,"Binding member expression");break;case"ParenthesizedExpression":return er&&this.raiseRecoverable(rn.start,"Binding parenthesized expression"),this.checkLValSimple(rn.expression,pn,$n);default:this.raise(rn.start,(er?"Binding":"Assigning to")+" rvalue")}},Jn.checkLValPattern=function(rn,pn,$n){switch(pn===void 0&&(pn=Gr),rn.type){case"ObjectPattern":for(var er=0,cr=rn.properties;er<cr.length;er+=1){var kr=cr[er];this.checkLValInnerPattern(kr,pn,$n)}break;case"ArrayPattern":for(var Ar=0,qr=rn.elements;Ar<qr.length;Ar+=1){var Zr=qr[Ar];Zr&&this.checkLValInnerPattern(Zr,pn,$n)}break;default:this.checkLValSimple(rn,pn,$n)}},Jn.checkLValInnerPattern=function(rn,pn,$n){switch(pn===void 0&&(pn=Gr),rn.type){case"Property":this.checkLValInnerPattern(rn.value,pn,$n);break;case"AssignmentPattern":this.checkLValPattern(rn.left,pn,$n);break;case"RestElement":this.checkLValPattern(rn.argument,pn,$n);break;default:this.checkLValPattern(rn,pn,$n)}};var Wn=function(pn,$n,er,cr,kr){this.token=pn,this.isExpr=!!$n,this.preserveSpace=!!er,this.override=cr,this.generator=!!kr},Kn={b_stat:new Wn("{",!1),b_expr:new Wn("{",!0),b_tmpl:new Wn("${",!1),p_stat:new Wn("(",!1),p_expr:new Wn("(",!0),q_tmpl:new Wn("`",!0,!0,function(rn){return rn.tryReadTemplateToken()}),f_stat:new Wn("function",!1),f_expr:new Wn("function",!0),f_expr_gen:new Wn("function",!0,!1,null,!0),f_gen:new Wn("function",!1,!1,null,!0)},zn=$t.prototype;zn.initialContext=function(){return[Kn.b_stat]},zn.curContext=function(){return this.context[this.context.length-1]},zn.braceIsBlock=function(rn){var pn=this.curContext();return pn===Kn.f_expr||pn===Kn.f_stat?!0:rn===an.colon&&(pn===Kn.b_stat||pn===Kn.b_expr)?!pn.isExpr:rn===an._return||rn===an.name&&this.exprAllowed?un.test(this.input.slice(this.lastTokEnd,this.start)):rn===an._else||rn===an.semi||rn===an.eof||rn===an.parenR||rn===an.arrow?!0:rn===an.braceL?pn===Kn.b_stat:rn===an._var||rn===an._const||rn===an.name?!1:!this.exprAllowed},zn.inGeneratorContext=function(){for(var rn=this.context.length-1;rn>=1;rn--){var pn=this.context[rn];if(pn.token==="function")return pn.generator}return!1},zn.updateContext=function(rn){var pn,$n=this.type;$n.keyword&&rn===an.dot?this.exprAllowed=!1:(pn=$n.updateContext)?pn.call(this,rn):this.exprAllowed=$n.beforeExpr},zn.overrideContext=function(rn){this.curContext()!==rn&&(this.context[this.context.length-1]=rn)},an.parenR.updateContext=an.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var rn=this.context.pop();rn===Kn.b_stat&&this.curContext().token==="function"&&(rn=this.context.pop()),this.exprAllowed=!rn.isExpr},an.braceL.updateContext=function(rn){this.context.push(this.braceIsBlock(rn)?Kn.b_stat:Kn.b_expr),this.exprAllowed=!0},an.dollarBraceL.updateContext=function(){this.context.push(Kn.b_tmpl),this.exprAllowed=!0},an.parenL.updateContext=function(rn){var pn=rn===an._if||rn===an._for||rn===an._with||rn===an._while;this.context.push(pn?Kn.p_stat:Kn.p_expr),this.exprAllowed=!0},an.incDec.updateContext=function(){},an._function.updateContext=an._class.updateContext=function(rn){rn.beforeExpr&&rn!==an._else&&!(rn===an.semi&&this.curContext()!==Kn.p_stat)&&!(rn===an._return&&un.test(this.input.slice(this.lastTokEnd,this.start)))&&!((rn===an.colon||rn===an.braceL)&&this.curContext()===Kn.b_stat)?this.context.push(Kn.f_expr):this.context.push(Kn.f_stat),this.exprAllowed=!1},an.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},an.backQuote.updateContext=function(){this.curContext()===Kn.q_tmpl?this.context.pop():this.context.push(Kn.q_tmpl),this.exprAllowed=!1},an.star.updateContext=function(rn){if(rn===an._function){var pn=this.context.length-1;this.context[pn]===Kn.f_expr?this.context[pn]=Kn.f_expr_gen:this.context[pn]=Kn.f_gen}this.exprAllowed=!0},an.name.updateContext=function(rn){var pn=!1;this.options.ecmaVersion>=6&&rn!==an.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(pn=!0),this.exprAllowed=pn};var Gn=$t.prototype;Gn.checkPropClash=function(rn,pn,$n){if(!(this.options.ecmaVersion>=9&&rn.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(rn.computed||rn.method||rn.shorthand))){var er=rn.key,cr;switch(er.type){case"Identifier":cr=er.name;break;case"Literal":cr=String(er.value);break;default:return}var kr=rn.kind;if(this.options.ecmaVersion>=6){cr==="__proto__"&&kr==="init"&&(pn.proto&&($n?$n.doubleProto<0&&($n.doubleProto=er.start):this.raiseRecoverable(er.start,"Redefinition of __proto__ property")),pn.proto=!0);return}cr="$"+cr;var Ar=pn[cr];if(Ar){var qr;kr==="init"?qr=this.strict&&Ar.init||Ar.get||Ar.set:qr=Ar.init||Ar[kr],qr&&this.raiseRecoverable(er.start,"Redefinition of property")}else Ar=pn[cr]={init:!1,get:!1,set:!1};Ar[kr]=!0}},Gn.parseExpression=function(rn,pn){var $n=this.start,er=this.startLoc,cr=this.parseMaybeAssign(rn,pn);if(this.type===an.comma){var kr=this.startNodeAt($n,er);for(kr.expressions=[cr];this.eat(an.comma);)kr.expressions.push(this.parseMaybeAssign(rn,pn));return this.finishNode(kr,"SequenceExpression")}return cr},Gn.parseMaybeAssign=function(rn,pn,$n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(rn);this.exprAllowed=!1}var er=!1,cr=-1,kr=-1,Ar=-1;pn?(cr=pn.parenthesizedAssign,kr=pn.trailingComma,Ar=pn.doubleProto,pn.parenthesizedAssign=pn.trailingComma=-1):(pn=new cn,er=!0);var qr=this.start,Zr=this.startLoc;(this.type===an.parenL||this.type===an.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=rn==="await");var As=this.parseMaybeConditional(rn,pn);if($n&&(As=$n.call(this,As,qr,Zr)),this.type.isAssign){var ws=this.startNodeAt(qr,Zr);return ws.operator=this.value,this.type===an.eq&&(As=this.toAssignable(As,!1,pn)),er||(pn.parenthesizedAssign=pn.trailingComma=pn.doubleProto=-1),pn.shorthandAssign>=As.start&&(pn.shorthandAssign=-1),this.type===an.eq?this.checkLValPattern(As):this.checkLValSimple(As),ws.left=As,this.next(),ws.right=this.parseMaybeAssign(rn),Ar>-1&&(pn.doubleProto=Ar),this.finishNode(ws,"AssignmentExpression")}else er&&this.checkExpressionErrors(pn,!0);return cr>-1&&(pn.parenthesizedAssign=cr),kr>-1&&(pn.trailingComma=kr),As},Gn.parseMaybeConditional=function(rn,pn){var $n=this.start,er=this.startLoc,cr=this.parseExprOps(rn,pn);if(this.checkExpressionErrors(pn))return cr;if(this.eat(an.question)){var kr=this.startNodeAt($n,er);return kr.test=cr,kr.consequent=this.parseMaybeAssign(),this.expect(an.colon),kr.alternate=this.parseMaybeAssign(rn),this.finishNode(kr,"ConditionalExpression")}return cr},Gn.parseExprOps=function(rn,pn){var $n=this.start,er=this.startLoc,cr=this.parseMaybeUnary(pn,!1,!1,rn);return this.checkExpressionErrors(pn)||cr.start===$n&&cr.type==="ArrowFunctionExpression"?cr:this.parseExprOp(cr,$n,er,-1,rn)},Gn.parseExprOp=function(rn,pn,$n,er,cr){var kr=this.type.binop;if(kr!=null&&(!cr||this.type!==an._in)&&kr>er){var Ar=this.type===an.logicalOR||this.type===an.logicalAND,qr=this.type===an.coalesce;qr&&(kr=an.logicalAND.binop);var Zr=this.value;this.next();var As=this.start,ws=this.startLoc,co=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,cr),As,ws,kr,cr),Bo=this.buildBinary(pn,$n,rn,co,Zr,Ar||qr);return(Ar&&this.type===an.coalesce||qr&&(this.type===an.logicalOR||this.type===an.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Bo,pn,$n,er,cr)}return rn},Gn.buildBinary=function(rn,pn,$n,er,cr,kr){er.type==="PrivateIdentifier"&&this.raise(er.start,"Private identifier can only be left side of binary expression");var Ar=this.startNodeAt(rn,pn);return Ar.left=$n,Ar.operator=cr,Ar.right=er,this.finishNode(Ar,kr?"LogicalExpression":"BinaryExpression")},Gn.parseMaybeUnary=function(rn,pn,$n,er){var cr=this.start,kr=this.startLoc,Ar;if(this.isContextual("await")&&this.canAwait)Ar=this.parseAwait(er),pn=!0;else if(this.type.prefix){var qr=this.startNode(),Zr=this.type===an.incDec;qr.operator=this.value,qr.prefix=!0,this.next(),qr.argument=this.parseMaybeUnary(null,!0,Zr,er),this.checkExpressionErrors(rn,!0),Zr?this.checkLValSimple(qr.argument):this.strict&&qr.operator==="delete"&&Dn(qr.argument)?this.raiseRecoverable(qr.start,"Deleting local variable in strict mode"):qr.operator==="delete"&&qn(qr.argument)?this.raiseRecoverable(qr.start,"Private fields can not be deleted"):pn=!0,Ar=this.finishNode(qr,Zr?"UpdateExpression":"UnaryExpression")}else if(!pn&&this.type===an.privateId)(er||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Ar=this.parsePrivateIdent(),this.type!==an._in&&this.unexpected();else{if(Ar=this.parseExprSubscripts(rn,er),this.checkExpressionErrors(rn))return Ar;for(;this.type.postfix&&!this.canInsertSemicolon();){var As=this.startNodeAt(cr,kr);As.operator=this.value,As.prefix=!1,As.argument=Ar,this.checkLValSimple(Ar),this.next(),Ar=this.finishNode(As,"UpdateExpression")}}if(!$n&&this.eat(an.starstar))if(pn)this.unexpected(this.lastTokStart);else return this.buildBinary(cr,kr,Ar,this.parseMaybeUnary(null,!1,!1,er),"**",!1);else return Ar};function Dn(rn){return rn.type==="Identifier"||rn.type==="ParenthesizedExpression"&&Dn(rn.expression)}function qn(rn){return rn.type==="MemberExpression"&&rn.property.type==="PrivateIdentifier"||rn.type==="ChainExpression"&&qn(rn.expression)||rn.type==="ParenthesizedExpression"&&qn(rn.expression)}Gn.parseExprSubscripts=function(rn,pn){var $n=this.start,er=this.startLoc,cr=this.parseExprAtom(rn,pn);if(cr.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return cr;var kr=this.parseSubscripts(cr,$n,er,!1,pn);return rn&&kr.type==="MemberExpression"&&(rn.parenthesizedAssign>=kr.start&&(rn.parenthesizedAssign=-1),rn.parenthesizedBind>=kr.start&&(rn.parenthesizedBind=-1),rn.trailingComma>=kr.start&&(rn.trailingComma=-1)),kr},Gn.parseSubscripts=function(rn,pn,$n,er,cr){for(var kr=this.options.ecmaVersion>=8&&rn.type==="Identifier"&&rn.name==="async"&&this.lastTokEnd===rn.end&&!this.canInsertSemicolon()&&rn.end-rn.start===5&&this.potentialArrowAt===rn.start,Ar=!1;;){var qr=this.parseSubscript(rn,pn,$n,er,kr,Ar,cr);if(qr.optional&&(Ar=!0),qr===rn||qr.type==="ArrowFunctionExpression"){if(Ar){var Zr=this.startNodeAt(pn,$n);Zr.expression=qr,qr=this.finishNode(Zr,"ChainExpression")}return qr}rn=qr}},Gn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(an.arrow)},Gn.parseSubscriptAsyncArrow=function(rn,pn,$n,er){return this.parseArrowExpression(this.startNodeAt(rn,pn),$n,!0,er)},Gn.parseSubscript=function(rn,pn,$n,er,cr,kr,Ar){var qr=this.options.ecmaVersion>=11,Zr=qr&&this.eat(an.questionDot);er&&Zr&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var As=this.eat(an.bracketL);if(As||Zr&&this.type!==an.parenL&&this.type!==an.backQuote||this.eat(an.dot)){var ws=this.startNodeAt(pn,$n);ws.object=rn,As?(ws.property=this.parseExpression(),this.expect(an.bracketR)):this.type===an.privateId&&rn.type!=="Super"?ws.property=this.parsePrivateIdent():ws.property=this.parseIdent(this.options.allowReserved!=="never"),ws.computed=!!As,qr&&(ws.optional=Zr),rn=this.finishNode(ws,"MemberExpression")}else if(!er&&this.eat(an.parenL)){var co=new cn,Bo=this.yieldPos,Pm=this.awaitPos,qp=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Uo=this.parseExprList(an.parenR,this.options.ecmaVersion>=8,!1,co);if(cr&&!Zr&&this.shouldParseAsyncArrow())return this.checkPatternErrors(co,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Bo,this.awaitPos=Pm,this.awaitIdentPos=qp,this.parseSubscriptAsyncArrow(pn,$n,Uo,Ar);this.checkExpressionErrors(co,!0),this.yieldPos=Bo||this.yieldPos,this.awaitPos=Pm||this.awaitPos,this.awaitIdentPos=qp||this.awaitIdentPos;var Ro=this.startNodeAt(pn,$n);Ro.callee=rn,Ro.arguments=Uo,qr&&(Ro.optional=Zr),rn=this.finishNode(Ro,"CallExpression")}else if(this.type===an.backQuote){(Zr||kr)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Iu=this.startNodeAt(pn,$n);Iu.tag=rn,Iu.quasi=this.parseTemplate({isTagged:!0}),rn=this.finishNode(Iu,"TaggedTemplateExpression")}return rn},Gn.parseExprAtom=function(rn,pn,$n){this.type===an.slash&&this.readRegexp();var er,cr=this.potentialArrowAt===this.start;switch(this.type){case an._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),er=this.startNode(),this.next(),this.type===an.parenL&&!this.allowDirectSuper&&this.raise(er.start,"super() call outside constructor of a subclass"),this.type!==an.dot&&this.type!==an.bracketL&&this.type!==an.parenL&&this.unexpected(),this.finishNode(er,"Super");case an._this:return er=this.startNode(),this.next(),this.finishNode(er,"ThisExpression");case an.name:var kr=this.start,Ar=this.startLoc,qr=this.containsEsc,Zr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!qr&&Zr.name==="async"&&!this.canInsertSemicolon()&&this.eat(an._function))return this.overrideContext(Kn.f_expr),this.parseFunction(this.startNodeAt(kr,Ar),0,!1,!0,pn);if(cr&&!this.canInsertSemicolon()){if(this.eat(an.arrow))return this.parseArrowExpression(this.startNodeAt(kr,Ar),[Zr],!1,pn);if(this.options.ecmaVersion>=8&&Zr.name==="async"&&this.type===an.name&&!qr&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Zr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(an.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(kr,Ar),[Zr],!0,pn)}return Zr;case an.regexp:var As=this.value;return er=this.parseLiteral(As.value),er.regex={pattern:As.pattern,flags:As.flags},er;case an.num:case an.string:return this.parseLiteral(this.value);case an._null:case an._true:case an._false:return er=this.startNode(),er.value=this.type===an._null?null:this.type===an._true,er.raw=this.type.keyword,this.next(),this.finishNode(er,"Literal");case an.parenL:var ws=this.start,co=this.parseParenAndDistinguishExpression(cr,pn);return rn&&(rn.parenthesizedAssign<0&&!this.isSimpleAssignTarget(co)&&(rn.parenthesizedAssign=ws),rn.parenthesizedBind<0&&(rn.parenthesizedBind=ws)),co;case an.bracketL:return er=this.startNode(),this.next(),er.elements=this.parseExprList(an.bracketR,!0,!0,rn),this.finishNode(er,"ArrayExpression");case an.braceL:return this.overrideContext(Kn.b_expr),this.parseObj(!1,rn);case an._function:return er=this.startNode(),this.next(),this.parseFunction(er,0);case an._class:return this.parseClass(this.startNode(),!1);case an._new:return this.parseNew();case an.backQuote:return this.parseTemplate();case an._import:return this.options.ecmaVersion>=11?this.parseExprImport($n):this.unexpected();default:return this.parseExprAtomDefault()}},Gn.parseExprAtomDefault=function(){this.unexpected()},Gn.parseExprImport=function(rn){var pn=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===an.parenL&&!rn)return this.parseDynamicImport(pn);if(this.type===an.dot){var $n=this.startNodeAt(pn.start,pn.loc&&pn.loc.start);return $n.name="import",pn.meta=this.finishNode($n,"Identifier"),this.parseImportMeta(pn)}else this.unexpected()},Gn.parseDynamicImport=function(rn){if(this.next(),rn.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(an.parenR)?rn.options=null:(this.expect(an.comma),this.afterTrailingComma(an.parenR)?rn.options=null:(rn.options=this.parseMaybeAssign(),this.eat(an.parenR)||(this.expect(an.comma),this.afterTrailingComma(an.parenR)||this.unexpected())));else if(!this.eat(an.parenR)){var pn=this.start;this.eat(an.comma)&&this.eat(an.parenR)?this.raiseRecoverable(pn,"Trailing comma is not allowed in import()"):this.unexpected(pn)}return this.finishNode(rn,"ImportExpression")},Gn.parseImportMeta=function(rn){this.next();var pn=this.containsEsc;return rn.property=this.parseIdent(!0),rn.property.name!=="meta"&&this.raiseRecoverable(rn.property.start,"The only valid meta property for import is 'import.meta'"),pn&&this.raiseRecoverable(rn.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(rn.start,"Cannot use 'import.meta' outside a module"),this.finishNode(rn,"MetaProperty")},Gn.parseLiteral=function(rn){var pn=this.startNode();return pn.value=rn,pn.raw=this.input.slice(this.start,this.end),pn.raw.charCodeAt(pn.raw.length-1)===110&&(pn.bigint=pn.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(pn,"Literal")},Gn.parseParenExpression=function(){this.expect(an.parenL);var rn=this.parseExpression();return this.expect(an.parenR),rn},Gn.shouldParseArrow=function(rn){return!this.canInsertSemicolon()},Gn.parseParenAndDistinguishExpression=function(rn,pn){var $n=this.start,er=this.startLoc,cr,kr=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Ar=this.start,qr=this.startLoc,Zr=[],As=!0,ws=!1,co=new cn,Bo=this.yieldPos,Pm=this.awaitPos,qp;for(this.yieldPos=0,this.awaitPos=0;this.type!==an.parenR;)if(As?As=!1:this.expect(an.comma),kr&&this.afterTrailingComma(an.parenR,!0)){ws=!0;break}else if(this.type===an.ellipsis){qp=this.start,Zr.push(this.parseParenItem(this.parseRestBinding())),this.type===an.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Zr.push(this.parseMaybeAssign(!1,co,this.parseParenItem));var Uo=this.lastTokEnd,Ro=this.lastTokEndLoc;if(this.expect(an.parenR),rn&&this.shouldParseArrow(Zr)&&this.eat(an.arrow))return this.checkPatternErrors(co,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Bo,this.awaitPos=Pm,this.parseParenArrowList($n,er,Zr,pn);(!Zr.length||ws)&&this.unexpected(this.lastTokStart),qp&&this.unexpected(qp),this.checkExpressionErrors(co,!0),this.yieldPos=Bo||this.yieldPos,this.awaitPos=Pm||this.awaitPos,Zr.length>1?(cr=this.startNodeAt(Ar,qr),cr.expressions=Zr,this.finishNodeAt(cr,"SequenceExpression",Uo,Ro)):cr=Zr[0]}else cr=this.parseParenExpression();if(this.options.preserveParens){var Iu=this.startNodeAt($n,er);return Iu.expression=cr,this.finishNode(Iu,"ParenthesizedExpression")}else return cr},Gn.parseParenItem=function(rn){return rn},Gn.parseParenArrowList=function(rn,pn,$n,er){return this.parseArrowExpression(this.startNodeAt(rn,pn),$n,!1,er)};var Zn=[];Gn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var rn=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===an.dot){var pn=this.startNodeAt(rn.start,rn.loc&&rn.loc.start);pn.name="new",rn.meta=this.finishNode(pn,"Identifier"),this.next();var $n=this.containsEsc;return rn.property=this.parseIdent(!0),rn.property.name!=="target"&&this.raiseRecoverable(rn.property.start,"The only valid meta property for new is 'new.target'"),$n&&this.raiseRecoverable(rn.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(rn.start,"'new.target' can only be used in functions and class static block"),this.finishNode(rn,"MetaProperty")}var er=this.start,cr=this.startLoc;return rn.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),er,cr,!0,!1),this.eat(an.parenL)?rn.arguments=this.parseExprList(an.parenR,this.options.ecmaVersion>=8,!1):rn.arguments=Zn,this.finishNode(rn,"NewExpression")},Gn.parseTemplateElement=function(rn){var pn=rn.isTagged,$n=this.startNode();return this.type===an.invalidTemplate?(pn||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),$n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):$n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),$n.tail=this.type===an.backQuote,this.finishNode($n,"TemplateElement")},Gn.parseTemplate=function(rn){rn===void 0&&(rn={});var pn=rn.isTagged;pn===void 0&&(pn=!1);var $n=this.startNode();this.next(),$n.expressions=[];var er=this.parseTemplateElement({isTagged:pn});for($n.quasis=[er];!er.tail;)this.type===an.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(an.dollarBraceL),$n.expressions.push(this.parseExpression()),this.expect(an.braceR),$n.quasis.push(er=this.parseTemplateElement({isTagged:pn}));return this.next(),this.finishNode($n,"TemplateLiteral")},Gn.isAsyncProp=function(rn){return!rn.computed&&rn.key.type==="Identifier"&&rn.key.name==="async"&&(this.type===an.name||this.type===an.num||this.type===an.string||this.type===an.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===an.star)&&!un.test(this.input.slice(this.lastTokEnd,this.start))},Gn.parseObj=function(rn,pn){var $n=this.startNode(),er=!0,cr={};for($n.properties=[],this.next();!this.eat(an.braceR);){if(er)er=!1;else if(this.expect(an.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(an.braceR))break;var kr=this.parseProperty(rn,pn);rn||this.checkPropClash(kr,cr,pn),$n.properties.push(kr)}return this.finishNode($n,rn?"ObjectPattern":"ObjectExpression")},Gn.parseProperty=function(rn,pn){var $n=this.startNode(),er,cr,kr,Ar;if(this.options.ecmaVersion>=9&&this.eat(an.ellipsis))return rn?($n.argument=this.parseIdent(!1),this.type===an.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode($n,"RestElement")):($n.argument=this.parseMaybeAssign(!1,pn),this.type===an.comma&&pn&&pn.trailingComma<0&&(pn.trailingComma=this.start),this.finishNode($n,"SpreadElement"));this.options.ecmaVersion>=6&&($n.method=!1,$n.shorthand=!1,(rn||pn)&&(kr=this.start,Ar=this.startLoc),rn||(er=this.eat(an.star)));var qr=this.containsEsc;return this.parsePropertyName($n),!rn&&!qr&&this.options.ecmaVersion>=8&&!er&&this.isAsyncProp($n)?(cr=!0,er=this.options.ecmaVersion>=9&&this.eat(an.star),this.parsePropertyName($n)):cr=!1,this.parsePropertyValue($n,rn,er,cr,kr,Ar,pn,qr),this.finishNode($n,"Property")},Gn.parseGetterSetter=function(rn){rn.kind=rn.key.name,this.parsePropertyName(rn),rn.value=this.parseMethod(!1);var pn=rn.kind==="get"?0:1;if(rn.value.params.length!==pn){var $n=rn.value.start;rn.kind==="get"?this.raiseRecoverable($n,"getter should have no params"):this.raiseRecoverable($n,"setter should have exactly one param")}else rn.kind==="set"&&rn.value.params[0].type==="RestElement"&&this.raiseRecoverable(rn.value.params[0].start,"Setter cannot use rest params")},Gn.parsePropertyValue=function(rn,pn,$n,er,cr,kr,Ar,qr){($n||er)&&this.type===an.colon&&this.unexpected(),this.eat(an.colon)?(rn.value=pn?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Ar),rn.kind="init"):this.options.ecmaVersion>=6&&this.type===an.parenL?(pn&&this.unexpected(),rn.kind="init",rn.method=!0,rn.value=this.parseMethod($n,er)):!pn&&!qr&&this.options.ecmaVersion>=5&&!rn.computed&&rn.key.type==="Identifier"&&(rn.key.name==="get"||rn.key.name==="set")&&this.type!==an.comma&&this.type!==an.braceR&&this.type!==an.eq?(($n||er)&&this.unexpected(),this.parseGetterSetter(rn)):this.options.ecmaVersion>=6&&!rn.computed&&rn.key.type==="Identifier"?(($n||er)&&this.unexpected(),this.checkUnreserved(rn.key),rn.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=cr),rn.kind="init",pn?rn.value=this.parseMaybeDefault(cr,kr,this.copyNode(rn.key)):this.type===an.eq&&Ar?(Ar.shorthandAssign<0&&(Ar.shorthandAssign=this.start),rn.value=this.parseMaybeDefault(cr,kr,this.copyNode(rn.key))):rn.value=this.copyNode(rn.key),rn.shorthand=!0):this.unexpected()},Gn.parsePropertyName=function(rn){if(this.options.ecmaVersion>=6){if(this.eat(an.bracketL))return rn.computed=!0,rn.key=this.parseMaybeAssign(),this.expect(an.bracketR),rn.key;rn.computed=!1}return rn.key=this.type===an.num||this.type===an.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Gn.initFunction=function(rn){rn.id=null,this.options.ecmaVersion>=6&&(rn.generator=rn.expression=!1),this.options.ecmaVersion>=8&&(rn.async=!1)},Gn.parseMethod=function(rn,pn,$n){var er=this.startNode(),cr=this.yieldPos,kr=this.awaitPos,Ar=this.awaitIdentPos;return this.initFunction(er),this.options.ecmaVersion>=6&&(er.generator=rn),this.options.ecmaVersion>=8&&(er.async=!!pn),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Lr(pn,er.generator)|cs|($n?Cs:0)),this.expect(an.parenL),er.params=this.parseBindingList(an.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(er,!1,!0,!1),this.yieldPos=cr,this.awaitPos=kr,this.awaitIdentPos=Ar,this.finishNode(er,"FunctionExpression")},Gn.parseArrowExpression=function(rn,pn,$n,er){var cr=this.yieldPos,kr=this.awaitPos,Ar=this.awaitIdentPos;return this.enterScope(Lr($n,!1)|Br),this.initFunction(rn),this.options.ecmaVersion>=8&&(rn.async=!!$n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,rn.params=this.toAssignableList(pn,!0),this.parseFunctionBody(rn,!0,!1,er),this.yieldPos=cr,this.awaitPos=kr,this.awaitIdentPos=Ar,this.finishNode(rn,"ArrowFunctionExpression")},Gn.parseFunctionBody=function(rn,pn,$n,er){var cr=pn&&this.type!==an.braceL,kr=this.strict,Ar=!1;if(cr)rn.body=this.parseMaybeAssign(er),rn.expression=!0,this.checkParams(rn,!1);else{var qr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(rn.params);(!kr||qr)&&(Ar=this.strictDirective(this.end),Ar&&qr&&this.raiseRecoverable(rn.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Zr=this.labels;this.labels=[],Ar&&(this.strict=!0),this.checkParams(rn,!kr&&!Ar&&!pn&&!$n&&this.isSimpleParamList(rn.params)),this.strict&&rn.id&&this.checkLValSimple(rn.id,Kr),rn.body=this.parseBlock(!1,void 0,Ar&&!kr),rn.expression=!1,this.adaptDirectivePrologue(rn.body.body),this.labels=Zr}this.exitScope()},Gn.isSimpleParamList=function(rn){for(var pn=0,$n=rn;pn<$n.length;pn+=1){var er=$n[pn];if(er.type!=="Identifier")return!1}return!0},Gn.checkParams=function(rn,pn){for(var $n=Object.create(null),er=0,cr=rn.params;er<cr.length;er+=1){var kr=cr[er];this.checkLValInnerPattern(kr,zr,pn?null:$n)}},Gn.parseExprList=function(rn,pn,$n,er){for(var cr=[],kr=!0;!this.eat(rn);){if(kr)kr=!1;else if(this.expect(an.comma),pn&&this.afterTrailingComma(rn))break;var Ar=void 0;$n&&this.type===an.comma?Ar=null:this.type===an.ellipsis?(Ar=this.parseSpread(er),er&&this.type===an.comma&&er.trailingComma<0&&(er.trailingComma=this.start)):Ar=this.parseMaybeAssign(!1,er),cr.push(Ar)}return cr},Gn.checkUnreserved=function(rn){var pn=rn.start,$n=rn.end,er=rn.name;if(this.inGenerator&&er==="yield"&&this.raiseRecoverable(pn,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&er==="await"&&this.raiseRecoverable(pn,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&er==="arguments"&&this.raiseRecoverable(pn,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(er==="arguments"||er==="await")&&this.raise(pn,"Cannot use "+er+" in class static initialization block"),this.keywords.test(er)&&this.raise(pn,"Unexpected keyword '"+er+"'"),!(this.options.ecmaVersion<6&&this.input.slice(pn,$n).indexOf("\\")!==-1)){var cr=this.strict?this.reservedWordsStrict:this.reservedWords;cr.test(er)&&(!this.inAsync&&er==="await"&&this.raiseRecoverable(pn,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(pn,"The keyword '"+er+"' is reserved"))}},Gn.parseIdent=function(rn){var pn=this.parseIdentNode();return this.next(!!rn),this.finishNode(pn,"Identifier"),rn||(this.checkUnreserved(pn),pn.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=pn.start)),pn},Gn.parseIdentNode=function(){var rn=this.startNode();return this.type===an.name?rn.name=this.value:this.type.keyword?(rn.name=this.type.keyword,(rn.name==="class"||rn.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=an.name):this.unexpected(),rn},Gn.parsePrivateIdent=function(){var rn=this.startNode();return this.type===an.privateId?rn.name=this.value:this.unexpected(),this.next(),this.finishNode(rn,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(rn.start,"Private field '#"+rn.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(rn)),rn},Gn.parseYield=function(rn){this.yieldPos||(this.yieldPos=this.start);var pn=this.startNode();return this.next(),this.type===an.semi||this.canInsertSemicolon()||this.type!==an.star&&!this.type.startsExpr?(pn.delegate=!1,pn.argument=null):(pn.delegate=this.eat(an.star),pn.argument=this.parseMaybeAssign(rn)),this.finishNode(pn,"YieldExpression")},Gn.parseAwait=function(rn){this.awaitPos||(this.awaitPos=this.start);var pn=this.startNode();return this.next(),pn.argument=this.parseMaybeUnary(null,!0,!1,rn),this.finishNode(pn,"AwaitExpression")};var nr=$t.prototype;nr.raise=function(rn,pn){var $n=ir(this.input,rn);pn+=" ("+$n.line+":"+$n.column+")";var er=new SyntaxError(pn);throw er.pos=rn,er.loc=$n,er.raisedAt=this.pos,er},nr.raiseRecoverable=nr.raise,nr.curPosition=function(){if(this.options.locations)return new Vn(this.curLine,this.pos-this.lineStart)};var Yn=$t.prototype,sr=function(pn){this.flags=pn,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Yn.enterScope=function(rn){this.scopeStack.push(new sr(rn))},Yn.exitScope=function(){this.scopeStack.pop()},Yn.treatFunctionsAsVarInScope=function(rn){return rn.flags&wr||!this.inModule&&rn.flags&xr},Yn.declareName=function(rn,pn,$n){var er=!1;if(pn===Vr){var cr=this.currentScope();er=cr.lexical.indexOf(rn)>-1||cr.functions.indexOf(rn)>-1||cr.var.indexOf(rn)>-1,cr.lexical.push(rn),this.inModule&&cr.flags&xr&&delete this.undefinedExports[rn]}else if(pn===fs){var kr=this.currentScope();kr.lexical.push(rn)}else if(pn===rs){var Ar=this.currentScope();this.treatFunctionsAsVar?er=Ar.lexical.indexOf(rn)>-1:er=Ar.lexical.indexOf(rn)>-1||Ar.var.indexOf(rn)>-1,Ar.functions.push(rn)}else for(var qr=this.scopeStack.length-1;qr>=0;--qr){var Zr=this.scopeStack[qr];if(Zr.lexical.indexOf(rn)>-1&&!(Zr.flags&Fr&&Zr.lexical[0]===rn)||!this.treatFunctionsAsVarInScope(Zr)&&Zr.functions.indexOf(rn)>-1){er=!0;break}if(Zr.var.push(rn),this.inModule&&Zr.flags&xr&&delete this.undefinedExports[rn],Zr.flags&Rr)break}er&&this.raiseRecoverable($n,"Identifier '"+rn+"' has already been declared")},Yn.checkLocalExport=function(rn){this.scopeStack[0].lexical.indexOf(rn.name)===-1&&this.scopeStack[0].var.indexOf(rn.name)===-1&&(this.undefinedExports[rn.name]=rn)},Yn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Yn.currentVarScope=function(){for(var rn=this.scopeStack.length-1;;rn--){var pn=this.scopeStack[rn];if(pn.flags&Rr)return pn}},Yn.currentThisScope=function(){for(var rn=this.scopeStack.length-1;;rn--){var pn=this.scopeStack[rn];if(pn.flags&Rr&&!(pn.flags&Br))return pn}};var ur=function(pn,$n,er){this.type="",this.start=$n,this.end=0,pn.options.locations&&(this.loc=new Qn(pn,er)),pn.options.directSourceFile&&(this.sourceFile=pn.options.directSourceFile),pn.options.ranges&&(this.range=[$n,0])},dr=$t.prototype;dr.startNode=function(){return new ur(this,this.start,this.startLoc)},dr.startNodeAt=function(rn,pn){return new ur(this,rn,pn)};function gr(rn,pn,$n,er){return rn.type=pn,rn.end=$n,this.options.locations&&(rn.loc.end=er),this.options.ranges&&(rn.range[1]=$n),rn}dr.finishNode=function(rn,pn){return gr.call(this,rn,pn,this.lastTokEnd,this.lastTokEndLoc)},dr.finishNodeAt=function(rn,pn,$n,er){return gr.call(this,rn,pn,$n,er)},dr.copyNode=function(rn){var pn=new ur(this,rn.start,this.startLoc);for(var $n in rn)pn[$n]=rn[$n];return pn};var lr="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",mr="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",yr=mr+" Extended_Pictographic",br=yr,Er=br+" EBase EComp EMod EPres ExtPict",Pr=Er,Hr=Pr,Wr={9:mr,10:yr,11:br,12:Er,13:Pr,14:Hr},Xr="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",es={9:"",10:"",11:"",12:"",13:"",14:Xr},Dr="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",$r="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Qr=$r+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ss=Qr+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ns=ss+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ys=ns+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",gs=ys+" "+lr,_s={9:$r,10:Qr,11:ss,12:ns,13:ys,14:gs},Ss={};function vs(rn){var pn=Ss[rn]={binary:vn(Wr[rn]+" "+Dr),binaryOfStrings:vn(es[rn]),nonBinary:{General_Category:vn(Dr),Script:vn(_s[rn])}};pn.nonBinary.Script_Extensions=pn.nonBinary.Script,pn.nonBinary.gc=pn.nonBinary.General_Category,pn.nonBinary.sc=pn.nonBinary.Script,pn.nonBinary.scx=pn.nonBinary.Script_Extensions}for(var ga=0,uo=[9,10,11,12,13,14];ga<uo.length;ga+=1){var Lo=uo[ga];vs(Lo)}var Yr=$t.prototype,Ds=function(pn,$n){this.parent=pn,this.base=$n||this};Ds.prototype.separatedFrom=function(pn){for(var $n=this;$n;$n=$n.parent)for(var er=pn;er;er=er.parent)if($n.base===er.base&&$n!==er)return!0;return!1},Ds.prototype.sibling=function(){return new Ds(this.parent,this.base)};var js=function(pn){this.parser=pn,this.validFlags="gim"+(pn.options.ecmaVersion>=6?"uy":"")+(pn.options.ecmaVersion>=9?"s":"")+(pn.options.ecmaVersion>=13?"d":"")+(pn.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Ss[pn.options.ecmaVersion>=14?14:pn.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};js.prototype.reset=function(pn,$n,er){var cr=er.indexOf("v")!==-1,kr=er.indexOf("u")!==-1;this.start=pn|0,this.source=$n+"",this.flags=er,cr&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=kr&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=kr&&this.parser.options.ecmaVersion>=9)},js.prototype.raise=function(pn){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+pn)},js.prototype.at=function(pn,$n){$n===void 0&&($n=!1);var er=this.source,cr=er.length;if(pn>=cr)return-1;var kr=er.charCodeAt(pn);if(!($n||this.switchU)||kr<=55295||kr>=57344||pn+1>=cr)return kr;var Ar=er.charCodeAt(pn+1);return Ar>=56320&&Ar<=57343?(kr<<10)+Ar-56613888:kr},js.prototype.nextIndex=function(pn,$n){$n===void 0&&($n=!1);var er=this.source,cr=er.length;if(pn>=cr)return cr;var kr=er.charCodeAt(pn),Ar;return!($n||this.switchU)||kr<=55295||kr>=57344||pn+1>=cr||(Ar=er.charCodeAt(pn+1))<56320||Ar>57343?pn+1:pn+2},js.prototype.current=function(pn){return pn===void 0&&(pn=!1),this.at(this.pos,pn)},js.prototype.lookahead=function(pn){return pn===void 0&&(pn=!1),this.at(this.nextIndex(this.pos,pn),pn)},js.prototype.advance=function(pn){pn===void 0&&(pn=!1),this.pos=this.nextIndex(this.pos,pn)},js.prototype.eat=function(pn,$n){return $n===void 0&&($n=!1),this.current($n)===pn?(this.advance($n),!0):!1},js.prototype.eatChars=function(pn,$n){$n===void 0&&($n=!1);for(var er=this.pos,cr=0,kr=pn;cr<kr.length;cr+=1){var Ar=kr[cr],qr=this.at(er,$n);if(qr===-1||qr!==Ar)return!1;er=this.nextIndex(er,$n)}return this.pos=er,!0},Yr.validateRegExpFlags=function(rn){for(var pn=rn.validFlags,$n=rn.flags,er=!1,cr=!1,kr=0;kr<$n.length;kr++){var Ar=$n.charAt(kr);pn.indexOf(Ar)===-1&&this.raise(rn.start,"Invalid regular expression flag"),$n.indexOf(Ar,kr+1)>-1&&this.raise(rn.start,"Duplicate regular expression flag"),Ar==="u"&&(er=!0),Ar==="v"&&(cr=!0)}this.options.ecmaVersion>=15&&er&&cr&&this.raise(rn.start,"Invalid regular expression flag")};function Os(rn){for(var pn in rn)return!0;return!1}Yr.validateRegExpPattern=function(rn){this.regexp_pattern(rn),!rn.switchN&&this.options.ecmaVersion>=9&&Os(rn.groupNames)&&(rn.switchN=!0,this.regexp_pattern(rn))},Yr.regexp_pattern=function(rn){rn.pos=0,rn.lastIntValue=0,rn.lastStringValue="",rn.lastAssertionIsQuantifiable=!1,rn.numCapturingParens=0,rn.maxBackReference=0,rn.groupNames=Object.create(null),rn.backReferenceNames.length=0,rn.branchID=null,this.regexp_disjunction(rn),rn.pos!==rn.source.length&&(rn.eat(41)&&rn.raise("Unmatched ')'"),(rn.eat(93)||rn.eat(125))&&rn.raise("Lone quantifier brackets")),rn.maxBackReference>rn.numCapturingParens&&rn.raise("Invalid escape");for(var pn=0,$n=rn.backReferenceNames;pn<$n.length;pn+=1){var er=$n[pn];rn.groupNames[er]||rn.raise("Invalid named capture referenced")}},Yr.regexp_disjunction=function(rn){var pn=this.options.ecmaVersion>=16;for(pn&&(rn.branchID=new Ds(rn.branchID,null)),this.regexp_alternative(rn);rn.eat(124);)pn&&(rn.branchID=rn.branchID.sibling()),this.regexp_alternative(rn);pn&&(rn.branchID=rn.branchID.parent),this.regexp_eatQuantifier(rn,!0)&&rn.raise("Nothing to repeat"),rn.eat(123)&&rn.raise("Lone quantifier brackets")},Yr.regexp_alternative=function(rn){for(;rn.pos<rn.source.length&&this.regexp_eatTerm(rn););},Yr.regexp_eatTerm=function(rn){return this.regexp_eatAssertion(rn)?(rn.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(rn)&&rn.switchU&&rn.raise("Invalid quantifier"),!0):(rn.switchU?this.regexp_eatAtom(rn):this.regexp_eatExtendedAtom(rn))?(this.regexp_eatQuantifier(rn),!0):!1},Yr.regexp_eatAssertion=function(rn){var pn=rn.pos;if(rn.lastAssertionIsQuantifiable=!1,rn.eat(94)||rn.eat(36))return!0;if(rn.eat(92)){if(rn.eat(66)||rn.eat(98))return!0;rn.pos=pn}if(rn.eat(40)&&rn.eat(63)){var $n=!1;if(this.options.ecmaVersion>=9&&($n=rn.eat(60)),rn.eat(61)||rn.eat(33))return this.regexp_disjunction(rn),rn.eat(41)||rn.raise("Unterminated group"),rn.lastAssertionIsQuantifiable=!$n,!0}return rn.pos=pn,!1},Yr.regexp_eatQuantifier=function(rn,pn){return pn===void 0&&(pn=!1),this.regexp_eatQuantifierPrefix(rn,pn)?(rn.eat(63),!0):!1},Yr.regexp_eatQuantifierPrefix=function(rn,pn){return rn.eat(42)||rn.eat(43)||rn.eat(63)||this.regexp_eatBracedQuantifier(rn,pn)},Yr.regexp_eatBracedQuantifier=function(rn,pn){var $n=rn.pos;if(rn.eat(123)){var er=0,cr=-1;if(this.regexp_eatDecimalDigits(rn)&&(er=rn.lastIntValue,rn.eat(44)&&this.regexp_eatDecimalDigits(rn)&&(cr=rn.lastIntValue),rn.eat(125)))return cr!==-1&&cr<er&&!pn&&rn.raise("numbers out of order in {} quantifier"),!0;rn.switchU&&!pn&&rn.raise("Incomplete quantifier"),rn.pos=$n}return!1},Yr.regexp_eatAtom=function(rn){return this.regexp_eatPatternCharacters(rn)||rn.eat(46)||this.regexp_eatReverseSolidusAtomEscape(rn)||this.regexp_eatCharacterClass(rn)||this.regexp_eatUncapturingGroup(rn)||this.regexp_eatCapturingGroup(rn)},Yr.regexp_eatReverseSolidusAtomEscape=function(rn){var pn=rn.pos;if(rn.eat(92)){if(this.regexp_eatAtomEscape(rn))return!0;rn.pos=pn}return!1},Yr.regexp_eatUncapturingGroup=function(rn){var pn=rn.pos;if(rn.eat(40)){if(rn.eat(63)){if(this.options.ecmaVersion>=16){var $n=this.regexp_eatModifiers(rn),er=rn.eat(45);if($n||er){for(var cr=0;cr<$n.length;cr++){var kr=$n.charAt(cr);$n.indexOf(kr,cr+1)>-1&&rn.raise("Duplicate regular expression modifiers")}if(er){var Ar=this.regexp_eatModifiers(rn);!$n&&!Ar&&rn.current()===58&&rn.raise("Invalid regular expression modifiers");for(var qr=0;qr<Ar.length;qr++){var Zr=Ar.charAt(qr);(Ar.indexOf(Zr,qr+1)>-1||$n.indexOf(Zr)>-1)&&rn.raise("Duplicate regular expression modifiers")}}}}if(rn.eat(58)){if(this.regexp_disjunction(rn),rn.eat(41))return!0;rn.raise("Unterminated group")}}rn.pos=pn}return!1},Yr.regexp_eatCapturingGroup=function(rn){if(rn.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(rn):rn.current()===63&&rn.raise("Invalid group"),this.regexp_disjunction(rn),rn.eat(41))return rn.numCapturingParens+=1,!0;rn.raise("Unterminated group")}return!1},Yr.regexp_eatModifiers=function(rn){for(var pn="",$n=0;($n=rn.current())!==-1&&ks($n);)pn+=On($n),rn.advance();return pn};function ks(rn){return rn===105||rn===109||rn===115}Yr.regexp_eatExtendedAtom=function(rn){return rn.eat(46)||this.regexp_eatReverseSolidusAtomEscape(rn)||this.regexp_eatCharacterClass(rn)||this.regexp_eatUncapturingGroup(rn)||this.regexp_eatCapturingGroup(rn)||this.regexp_eatInvalidBracedQuantifier(rn)||this.regexp_eatExtendedPatternCharacter(rn)},Yr.regexp_eatInvalidBracedQuantifier=function(rn){return this.regexp_eatBracedQuantifier(rn,!0)&&rn.raise("Nothing to repeat"),!1},Yr.regexp_eatSyntaxCharacter=function(rn){var pn=rn.current();return vo(pn)?(rn.lastIntValue=pn,rn.advance(),!0):!1};function vo(rn){return rn===36||rn>=40&&rn<=43||rn===46||rn===63||rn>=91&&rn<=94||rn>=123&&rn<=125}Yr.regexp_eatPatternCharacters=function(rn){for(var pn=rn.pos,$n=0;($n=rn.current())!==-1&&!vo($n);)rn.advance();return rn.pos!==pn},Yr.regexp_eatExtendedPatternCharacter=function(rn){var pn=rn.current();return pn!==-1&&pn!==36&&!(pn>=40&&pn<=43)&&pn!==46&&pn!==63&&pn!==91&&pn!==94&&pn!==124?(rn.advance(),!0):!1},Yr.regexp_groupSpecifier=function(rn){if(rn.eat(63)){this.regexp_eatGroupName(rn)||rn.raise("Invalid group");var pn=this.options.ecmaVersion>=16,$n=rn.groupNames[rn.lastStringValue];if($n)if(pn)for(var er=0,cr=$n;er<cr.length;er+=1){var kr=cr[er];kr.separatedFrom(rn.branchID)||rn.raise("Duplicate capture group name")}else rn.raise("Duplicate capture group name");pn?($n||(rn.groupNames[rn.lastStringValue]=[])).push(rn.branchID):rn.groupNames[rn.lastStringValue]=!0}},Yr.regexp_eatGroupName=function(rn){if(rn.lastStringValue="",rn.eat(60)){if(this.regexp_eatRegExpIdentifierName(rn)&&rn.eat(62))return!0;rn.raise("Invalid capture group name")}return!1},Yr.regexp_eatRegExpIdentifierName=function(rn){if(rn.lastStringValue="",this.regexp_eatRegExpIdentifierStart(rn)){for(rn.lastStringValue+=On(rn.lastIntValue);this.regexp_eatRegExpIdentifierPart(rn);)rn.lastStringValue+=On(rn.lastIntValue);return!0}return!1},Yr.regexp_eatRegExpIdentifierStart=function(rn){var pn=rn.pos,$n=this.options.ecmaVersion>=11,er=rn.current($n);return rn.advance($n),er===92&&this.regexp_eatRegExpUnicodeEscapeSequence(rn,$n)&&(er=rn.lastIntValue),xa(er)?(rn.lastIntValue=er,!0):(rn.pos=pn,!1)};function xa(rn){return Bt(rn,!0)||rn===36||rn===95}Yr.regexp_eatRegExpIdentifierPart=function(rn){var pn=rn.pos,$n=this.options.ecmaVersion>=11,er=rn.current($n);return rn.advance($n),er===92&&this.regexp_eatRegExpUnicodeEscapeSequence(rn,$n)&&(er=rn.lastIntValue),Ys(er)?(rn.lastIntValue=er,!0):(rn.pos=pn,!1)};function Ys(rn){return Ht(rn,!0)||rn===36||rn===95||rn===8204||rn===8205}Yr.regexp_eatAtomEscape=function(rn){return this.regexp_eatBackReference(rn)||this.regexp_eatCharacterClassEscape(rn)||this.regexp_eatCharacterEscape(rn)||rn.switchN&&this.regexp_eatKGroupName(rn)?!0:(rn.switchU&&(rn.current()===99&&rn.raise("Invalid unicode escape"),rn.raise("Invalid escape")),!1)},Yr.regexp_eatBackReference=function(rn){var pn=rn.pos;if(this.regexp_eatDecimalEscape(rn)){var $n=rn.lastIntValue;if(rn.switchU)return $n>rn.maxBackReference&&(rn.maxBackReference=$n),!0;if($n<=rn.numCapturingParens)return!0;rn.pos=pn}return!1},Yr.regexp_eatKGroupName=function(rn){if(rn.eat(107)){if(this.regexp_eatGroupName(rn))return rn.backReferenceNames.push(rn.lastStringValue),!0;rn.raise("Invalid named reference")}return!1},Yr.regexp_eatCharacterEscape=function(rn){return this.regexp_eatControlEscape(rn)||this.regexp_eatCControlLetter(rn)||this.regexp_eatZero(rn)||this.regexp_eatHexEscapeSequence(rn)||this.regexp_eatRegExpUnicodeEscapeSequence(rn,!1)||!rn.switchU&&this.regexp_eatLegacyOctalEscapeSequence(rn)||this.regexp_eatIdentityEscape(rn)},Yr.regexp_eatCControlLetter=function(rn){var pn=rn.pos;if(rn.eat(99)){if(this.regexp_eatControlLetter(rn))return!0;rn.pos=pn}return!1},Yr.regexp_eatZero=function(rn){return rn.current()===48&&!wp(rn.lookahead())?(rn.lastIntValue=0,rn.advance(),!0):!1},Yr.regexp_eatControlEscape=function(rn){var pn=rn.current();return pn===116?(rn.lastIntValue=9,rn.advance(),!0):pn===110?(rn.lastIntValue=10,rn.advance(),!0):pn===118?(rn.lastIntValue=11,rn.advance(),!0):pn===102?(rn.lastIntValue=12,rn.advance(),!0):pn===114?(rn.lastIntValue=13,rn.advance(),!0):!1},Yr.regexp_eatControlLetter=function(rn){var pn=rn.current();return Po(pn)?(rn.lastIntValue=pn%32,rn.advance(),!0):!1};function Po(rn){return rn>=65&&rn<=90||rn>=97&&rn<=122}Yr.regexp_eatRegExpUnicodeEscapeSequence=function(rn,pn){pn===void 0&&(pn=!1);var $n=rn.pos,er=pn||rn.switchU;if(rn.eat(117)){if(this.regexp_eatFixedHexDigits(rn,4)){var cr=rn.lastIntValue;if(er&&cr>=55296&&cr<=56319){var kr=rn.pos;if(rn.eat(92)&&rn.eat(117)&&this.regexp_eatFixedHexDigits(rn,4)){var Ar=rn.lastIntValue;if(Ar>=56320&&Ar<=57343)return rn.lastIntValue=(cr-55296)*1024+(Ar-56320)+65536,!0}rn.pos=kr,rn.lastIntValue=cr}return!0}if(er&&rn.eat(123)&&this.regexp_eatHexDigits(rn)&&rn.eat(125)&&ko(rn.lastIntValue))return!0;er&&rn.raise("Invalid unicode escape"),rn.pos=$n}return!1};function ko(rn){return rn>=0&&rn<=1114111}Yr.regexp_eatIdentityEscape=function(rn){if(rn.switchU)return this.regexp_eatSyntaxCharacter(rn)?!0:rn.eat(47)?(rn.lastIntValue=47,!0):!1;var pn=rn.current();return pn!==99&&(!rn.switchN||pn!==107)?(rn.lastIntValue=pn,rn.advance(),!0):!1},Yr.regexp_eatDecimalEscape=function(rn){rn.lastIntValue=0;var pn=rn.current();if(pn>=49&&pn<=57){do rn.lastIntValue=10*rn.lastIntValue+(pn-48),rn.advance();while((pn=rn.current())>=48&&pn<=57);return!0}return!1};var Ws=0,Ao=1,ba=2;Yr.regexp_eatCharacterClassEscape=function(rn){var pn=rn.current();if(Am(pn))return rn.lastIntValue=-1,rn.advance(),Ao;var $n=!1;if(rn.switchU&&this.options.ecmaVersion>=9&&(($n=pn===80)||pn===112)){rn.lastIntValue=-1,rn.advance();var er;if(rn.eat(123)&&(er=this.regexp_eatUnicodePropertyValueExpression(rn))&&rn.eat(125))return $n&&er===ba&&rn.raise("Invalid property name"),er;rn.raise("Invalid property name")}return Ws};function Am(rn){return rn===100||rn===68||rn===115||rn===83||rn===119||rn===87}Yr.regexp_eatUnicodePropertyValueExpression=function(rn){var pn=rn.pos;if(this.regexp_eatUnicodePropertyName(rn)&&rn.eat(61)){var $n=rn.lastStringValue;if(this.regexp_eatUnicodePropertyValue(rn)){var er=rn.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(rn,$n,er),Ao}}if(rn.pos=pn,this.regexp_eatLoneUnicodePropertyNameOrValue(rn)){var cr=rn.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(rn,cr)}return Ws},Yr.regexp_validateUnicodePropertyNameAndValue=function(rn,pn,$n){gn(rn.unicodeProperties.nonBinary,pn)||rn.raise("Invalid property name"),rn.unicodeProperties.nonBinary[pn].test($n)||rn.raise("Invalid property value")},Yr.regexp_validateUnicodePropertyNameOrValue=function(rn,pn){if(rn.unicodeProperties.binary.test(pn))return Ao;if(rn.switchV&&rn.unicodeProperties.binaryOfStrings.test(pn))return ba;rn.raise("Invalid property name")},Yr.regexp_eatUnicodePropertyName=function(rn){var pn=0;for(rn.lastStringValue="";Wp(pn=rn.current());)rn.lastStringValue+=On(pn),rn.advance();return rn.lastStringValue!==""};function Wp(rn){return Po(rn)||rn===95}Yr.regexp_eatUnicodePropertyValue=function(rn){var pn=0;for(rn.lastStringValue="";Dy(pn=rn.current());)rn.lastStringValue+=On(pn),rn.advance();return rn.lastStringValue!==""};function Dy(rn){return Wp(rn)||wp(rn)}Yr.regexp_eatLoneUnicodePropertyNameOrValue=function(rn){return this.regexp_eatUnicodePropertyValue(rn)},Yr.regexp_eatCharacterClass=function(rn){if(rn.eat(91)){var pn=rn.eat(94),$n=this.regexp_classContents(rn);return rn.eat(93)||rn.raise("Unterminated character class"),pn&&$n===ba&&rn.raise("Negated character class may contain strings"),!0}return!1},Yr.regexp_classContents=function(rn){return rn.current()===93?Ao:rn.switchV?this.regexp_classSetExpression(rn):(this.regexp_nonEmptyClassRanges(rn),Ao)},Yr.regexp_nonEmptyClassRanges=function(rn){for(;this.regexp_eatClassAtom(rn);){var pn=rn.lastIntValue;if(rn.eat(45)&&this.regexp_eatClassAtom(rn)){var $n=rn.lastIntValue;rn.switchU&&(pn===-1||$n===-1)&&rn.raise("Invalid character class"),pn!==-1&&$n!==-1&&pn>$n&&rn.raise("Range out of order in character class")}}},Yr.regexp_eatClassAtom=function(rn){var pn=rn.pos;if(rn.eat(92)){if(this.regexp_eatClassEscape(rn))return!0;if(rn.switchU){var $n=rn.current();($n===99||Mu($n))&&rn.raise("Invalid class escape"),rn.raise("Invalid escape")}rn.pos=pn}var er=rn.current();return er!==93?(rn.lastIntValue=er,rn.advance(),!0):!1},Yr.regexp_eatClassEscape=function(rn){var pn=rn.pos;if(rn.eat(98))return rn.lastIntValue=8,!0;if(rn.switchU&&rn.eat(45))return rn.lastIntValue=45,!0;if(!rn.switchU&&rn.eat(99)){if(this.regexp_eatClassControlLetter(rn))return!0;rn.pos=pn}return this.regexp_eatCharacterClassEscape(rn)||this.regexp_eatCharacterEscape(rn)},Yr.regexp_classSetExpression=function(rn){var pn=Ao,$n;if(!this.regexp_eatClassSetRange(rn))if($n=this.regexp_eatClassSetOperand(rn)){$n===ba&&(pn=ba);for(var er=rn.pos;rn.eatChars([38,38]);){if(rn.current()!==38&&($n=this.regexp_eatClassSetOperand(rn))){$n!==ba&&(pn=Ao);continue}rn.raise("Invalid character in character class")}if(er!==rn.pos)return pn;for(;rn.eatChars([45,45]);)this.regexp_eatClassSetOperand(rn)||rn.raise("Invalid character in character class");if(er!==rn.pos)return pn}else rn.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(rn)){if($n=this.regexp_eatClassSetOperand(rn),!$n)return pn;$n===ba&&(pn=ba)}},Yr.regexp_eatClassSetRange=function(rn){var pn=rn.pos;if(this.regexp_eatClassSetCharacter(rn)){var $n=rn.lastIntValue;if(rn.eat(45)&&this.regexp_eatClassSetCharacter(rn)){var er=rn.lastIntValue;return $n!==-1&&er!==-1&&$n>er&&rn.raise("Range out of order in character class"),!0}rn.pos=pn}return!1},Yr.regexp_eatClassSetOperand=function(rn){return this.regexp_eatClassSetCharacter(rn)?Ao:this.regexp_eatClassStringDisjunction(rn)||this.regexp_eatNestedClass(rn)},Yr.regexp_eatNestedClass=function(rn){var pn=rn.pos;if(rn.eat(91)){var $n=rn.eat(94),er=this.regexp_classContents(rn);if(rn.eat(93))return $n&&er===ba&&rn.raise("Negated character class may contain strings"),er;rn.pos=pn}if(rn.eat(92)){var cr=this.regexp_eatCharacterClassEscape(rn);if(cr)return cr;rn.pos=pn}return null},Yr.regexp_eatClassStringDisjunction=function(rn){var pn=rn.pos;if(rn.eatChars([92,113])){if(rn.eat(123)){var $n=this.regexp_classStringDisjunctionContents(rn);if(rn.eat(125))return $n}else rn.raise("Invalid escape");rn.pos=pn}return null},Yr.regexp_classStringDisjunctionContents=function(rn){for(var pn=this.regexp_classString(rn);rn.eat(124);)this.regexp_classString(rn)===ba&&(pn=ba);return pn},Yr.regexp_classString=function(rn){for(var pn=0;this.regexp_eatClassSetCharacter(rn);)pn++;return pn===1?Ao:ba},Yr.regexp_eatClassSetCharacter=function(rn){var pn=rn.pos;if(rn.eat(92))return this.regexp_eatCharacterEscape(rn)||this.regexp_eatClassSetReservedPunctuator(rn)?!0:rn.eat(98)?(rn.lastIntValue=8,!0):(rn.pos=pn,!1);var $n=rn.current();return $n<0||$n===rn.lookahead()&&zl($n)||Dv($n)?!1:(rn.advance(),rn.lastIntValue=$n,!0)};function zl(rn){return rn===33||rn>=35&&rn<=38||rn>=42&&rn<=44||rn===46||rn>=58&&rn<=64||rn===94||rn===96||rn===126}function Dv(rn){return rn===40||rn===41||rn===45||rn===47||rn>=91&&rn<=93||rn>=123&&rn<=125}Yr.regexp_eatClassSetReservedPunctuator=function(rn){var pn=rn.current();return jv(pn)?(rn.lastIntValue=pn,rn.advance(),!0):!1};function jv(rn){return rn===33||rn===35||rn===37||rn===38||rn===44||rn===45||rn>=58&&rn<=62||rn===64||rn===96||rn===126}Yr.regexp_eatClassControlLetter=function(rn){var pn=rn.current();return wp(pn)||pn===95?(rn.lastIntValue=pn%32,rn.advance(),!0):!1},Yr.regexp_eatHexEscapeSequence=function(rn){var pn=rn.pos;if(rn.eat(120)){if(this.regexp_eatFixedHexDigits(rn,2))return!0;rn.switchU&&rn.raise("Invalid escape"),rn.pos=pn}return!1},Yr.regexp_eatDecimalDigits=function(rn){var pn=rn.pos,$n=0;for(rn.lastIntValue=0;wp($n=rn.current());)rn.lastIntValue=10*rn.lastIntValue+($n-48),rn.advance();return rn.pos!==pn};function wp(rn){return rn>=48&&rn<=57}Yr.regexp_eatHexDigits=function(rn){var pn=rn.pos,$n=0;for(rn.lastIntValue=0;Cp($n=rn.current());)rn.lastIntValue=16*rn.lastIntValue+ep($n),rn.advance();return rn.pos!==pn};function Cp(rn){return rn>=48&&rn<=57||rn>=65&&rn<=70||rn>=97&&rn<=102}function ep(rn){return rn>=65&&rn<=70?10+(rn-65):rn>=97&&rn<=102?10+(rn-97):rn-48}Yr.regexp_eatLegacyOctalEscapeSequence=function(rn){if(this.regexp_eatOctalDigit(rn)){var pn=rn.lastIntValue;if(this.regexp_eatOctalDigit(rn)){var $n=rn.lastIntValue;pn<=3&&this.regexp_eatOctalDigit(rn)?rn.lastIntValue=pn*64+$n*8+rn.lastIntValue:rn.lastIntValue=pn*8+$n}else rn.lastIntValue=pn;return!0}return!1},Yr.regexp_eatOctalDigit=function(rn){var pn=rn.current();return Mu(pn)?(rn.lastIntValue=pn-48,rn.advance(),!0):(rn.lastIntValue=0,!1)};function Mu(rn){return rn>=48&&rn<=55}Yr.regexp_eatFixedHexDigits=function(rn,pn){var $n=rn.pos;rn.lastIntValue=0;for(var er=0;er<pn;++er){var cr=rn.current();if(!Cp(cr))return rn.pos=$n,!1;rn.lastIntValue=16*rn.lastIntValue+ep(cr),rn.advance()}return!0};var Hl=function(pn){this.type=pn.type,this.value=pn.value,this.start=pn.start,this.end=pn.end,pn.options.locations&&(this.loc=new Qn(pn,pn.startLoc,pn.endLoc)),pn.options.ranges&&(this.range=[pn.start,pn.end])},Ps=$t.prototype;Ps.next=function(rn){!rn&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Hl(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ps.getToken=function(){return this.next(),new Hl(this)},typeof Symbol<"u"&&(Ps[Symbol.iterator]=function(){var rn=this;return{next:function(){var pn=rn.getToken();return{done:pn.type===an.eof,value:pn}}}}),Ps.nextToken=function(){var rn=this.curContext();if((!rn||!rn.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(an.eof);if(rn.override)return rn.override(this);this.readToken(this.fullCharCodeAtPos())},Ps.readToken=function(rn){return Bt(rn,this.options.ecmaVersion>=6)||rn===92?this.readWord():this.getTokenFromCode(rn)},Ps.fullCharCodeAtPos=function(){var rn=this.input.charCodeAt(this.pos);if(rn<=55295||rn>=56320)return rn;var pn=this.input.charCodeAt(this.pos+1);return pn<=56319||pn>=57344?rn:(rn<<10)+pn-56613888},Ps.skipBlockComment=function(){var rn=this.options.onComment&&this.curPosition(),pn=this.pos,$n=this.input.indexOf("*/",this.pos+=2);if($n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=$n+2,this.options.locations)for(var er=void 0,cr=pn;(er=mn(this.input,cr,this.pos))>-1;)++this.curLine,cr=this.lineStart=er;this.options.onComment&&this.options.onComment(!0,this.input.slice(pn+2,$n),pn,this.pos,rn,this.curPosition())},Ps.skipLineComment=function(rn){for(var pn=this.pos,$n=this.options.onComment&&this.curPosition(),er=this.input.charCodeAt(this.pos+=rn);this.pos<this.input.length&&!Sn(er);)er=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(pn+rn,this.pos),pn,this.pos,$n,this.curPosition())},Ps.skipSpace=function(){e:for(;this.pos<this.input.length;){var rn=this.input.charCodeAt(this.pos);switch(rn){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(rn>8&&rn<14||rn>=5760&&bn.test(String.fromCharCode(rn)))++this.pos;else break e}}},Ps.finishToken=function(rn,pn){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var $n=this.type;this.type=rn,this.value=pn,this.updateContext($n)},Ps.readToken_dot=function(){var rn=this.input.charCodeAt(this.pos+1);if(rn>=48&&rn<=57)return this.readNumber(!0);var pn=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&rn===46&&pn===46?(this.pos+=3,this.finishToken(an.ellipsis)):(++this.pos,this.finishToken(an.dot))},Ps.readToken_slash=function(){var rn=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):rn===61?this.finishOp(an.assign,2):this.finishOp(an.slash,1)},Ps.readToken_mult_modulo_exp=function(rn){var pn=this.input.charCodeAt(this.pos+1),$n=1,er=rn===42?an.star:an.modulo;return this.options.ecmaVersion>=7&&rn===42&&pn===42&&(++$n,er=an.starstar,pn=this.input.charCodeAt(this.pos+2)),pn===61?this.finishOp(an.assign,$n+1):this.finishOp(er,$n)},Ps.readToken_pipe_amp=function(rn){var pn=this.input.charCodeAt(this.pos+1);if(pn===rn){if(this.options.ecmaVersion>=12){var $n=this.input.charCodeAt(this.pos+2);if($n===61)return this.finishOp(an.assign,3)}return this.finishOp(rn===124?an.logicalOR:an.logicalAND,2)}return pn===61?this.finishOp(an.assign,2):this.finishOp(rn===124?an.bitwiseOR:an.bitwiseAND,1)},Ps.readToken_caret=function(){var rn=this.input.charCodeAt(this.pos+1);return rn===61?this.finishOp(an.assign,2):this.finishOp(an.bitwiseXOR,1)},Ps.readToken_plus_min=function(rn){var pn=this.input.charCodeAt(this.pos+1);return pn===rn?pn===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||un.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(an.incDec,2):pn===61?this.finishOp(an.assign,2):this.finishOp(an.plusMin,1)},Ps.readToken_lt_gt=function(rn){var pn=this.input.charCodeAt(this.pos+1),$n=1;return pn===rn?($n=rn===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+$n)===61?this.finishOp(an.assign,$n+1):this.finishOp(an.bitShift,$n)):pn===33&&rn===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(pn===61&&($n=2),this.finishOp(an.relational,$n))},Ps.readToken_eq_excl=function(rn){var pn=this.input.charCodeAt(this.pos+1);return pn===61?this.finishOp(an.equality,this.input.charCodeAt(this.pos+2)===61?3:2):rn===61&&pn===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(an.arrow)):this.finishOp(rn===61?an.eq:an.prefix,1)},Ps.readToken_question=function(){var rn=this.options.ecmaVersion;if(rn>=11){var pn=this.input.charCodeAt(this.pos+1);if(pn===46){var $n=this.input.charCodeAt(this.pos+2);if($n<48||$n>57)return this.finishOp(an.questionDot,2)}if(pn===63){if(rn>=12){var er=this.input.charCodeAt(this.pos+2);if(er===61)return this.finishOp(an.assign,3)}return this.finishOp(an.coalesce,2)}}return this.finishOp(an.question,1)},Ps.readToken_numberSign=function(){var rn=this.options.ecmaVersion,pn=35;if(rn>=13&&(++this.pos,pn=this.fullCharCodeAtPos(),Bt(pn,!0)||pn===92))return this.finishToken(an.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+On(pn)+"'")},Ps.getTokenFromCode=function(rn){switch(rn){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(an.parenL);case 41:return++this.pos,this.finishToken(an.parenR);case 59:return++this.pos,this.finishToken(an.semi);case 44:return++this.pos,this.finishToken(an.comma);case 91:return++this.pos,this.finishToken(an.bracketL);case 93:return++this.pos,this.finishToken(an.bracketR);case 123:return++this.pos,this.finishToken(an.braceL);case 125:return++this.pos,this.finishToken(an.braceR);case 58:return++this.pos,this.finishToken(an.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(an.backQuote);case 48:var pn=this.input.charCodeAt(this.pos+1);if(pn===120||pn===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(pn===111||pn===79)return this.readRadixNumber(8);if(pn===98||pn===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(rn);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(rn);case 124:case 38:return this.readToken_pipe_amp(rn);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(rn);case 60:case 62:return this.readToken_lt_gt(rn);case 61:case 33:return this.readToken_eq_excl(rn);case 63:return this.readToken_question();case 126:return this.finishOp(an.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+On(rn)+"'")},Ps.finishOp=function(rn,pn){var $n=this.input.slice(this.pos,this.pos+pn);return this.pos+=pn,this.finishToken(rn,$n)},Ps.readRegexp=function(){for(var rn,pn,$n=this.pos;;){this.pos>=this.input.length&&this.raise($n,"Unterminated regular expression");var er=this.input.charAt(this.pos);if(un.test(er)&&this.raise($n,"Unterminated regular expression"),rn)rn=!1;else{if(er==="[")pn=!0;else if(er==="]"&&pn)pn=!1;else if(er==="/"&&!pn)break;rn=er==="\\"}++this.pos}var cr=this.input.slice($n,this.pos);++this.pos;var kr=this.pos,Ar=this.readWord1();this.containsEsc&&this.unexpected(kr);var qr=this.regexpState||(this.regexpState=new js(this));qr.reset($n,cr,Ar),this.validateRegExpFlags(qr),this.validateRegExpPattern(qr);var Zr=null;try{Zr=new RegExp(cr,Ar)}catch{}return this.finishToken(an.regexp,{pattern:cr,flags:Ar,value:Zr})},Ps.readInt=function(rn,pn,$n){for(var er=this.options.ecmaVersion>=12&&pn===void 0,cr=$n&&this.input.charCodeAt(this.pos)===48,kr=this.pos,Ar=0,qr=0,Zr=0,As=pn??1/0;Zr<As;++Zr,++this.pos){var ws=this.input.charCodeAt(this.pos),co=void 0;if(er&&ws===95){cr&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),qr===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Zr===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),qr=ws;continue}if(ws>=97?co=ws-97+10:ws>=65?co=ws-65+10:ws>=48&&ws<=57?co=ws-48:co=1/0,co>=rn)break;qr=ws,Ar=Ar*rn+co}return er&&qr===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===kr||pn!=null&&this.pos-kr!==pn?null:Ar};function cu(rn,pn){return pn?parseInt(rn,8):parseFloat(rn.replace(/_/g,""))}function Qo(rn){return typeof BigInt!="function"?null:BigInt(rn.replace(/_/g,""))}Ps.readRadixNumber=function(rn){var pn=this.pos;this.pos+=2;var $n=this.readInt(rn);return $n==null&&this.raise(this.start+2,"Expected number in radix "+rn),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?($n=Qo(this.input.slice(pn,this.pos)),++this.pos):Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(an.num,$n)},Ps.readNumber=function(rn){var pn=this.pos;!rn&&this.readInt(10,void 0,!0)===null&&this.raise(pn,"Invalid number");var $n=this.pos-pn>=2&&this.input.charCodeAt(pn)===48;$n&&this.strict&&this.raise(pn,"Invalid number");var er=this.input.charCodeAt(this.pos);if(!$n&&!rn&&this.options.ecmaVersion>=11&&er===110){var cr=Qo(this.input.slice(pn,this.pos));return++this.pos,Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(an.num,cr)}$n&&/[89]/.test(this.input.slice(pn,this.pos))&&($n=!1),er===46&&!$n&&(++this.pos,this.readInt(10),er=this.input.charCodeAt(this.pos)),(er===69||er===101)&&!$n&&(er=this.input.charCodeAt(++this.pos),(er===43||er===45)&&++this.pos,this.readInt(10)===null&&this.raise(pn,"Invalid number")),Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var kr=cu(this.input.slice(pn,this.pos),$n);return this.finishToken(an.num,kr)},Ps.readCodePoint=function(){var rn=this.input.charCodeAt(this.pos),pn;if(rn===123){this.options.ecmaVersion<6&&this.unexpected();var $n=++this.pos;pn=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,pn>1114111&&this.invalidStringToken($n,"Code point out of bounds")}else pn=this.readHexChar(4);return pn},Ps.readString=function(rn){for(var pn="",$n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var er=this.input.charCodeAt(this.pos);if(er===rn)break;er===92?(pn+=this.input.slice($n,this.pos),pn+=this.readEscapedChar(!1),$n=this.pos):er===8232||er===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Sn(er)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return pn+=this.input.slice($n,this.pos++),this.finishToken(an.string,pn)};var tu={};Ps.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(rn){if(rn===tu)this.readInvalidTemplateToken();else throw rn}this.inTemplateElement=!1},Ps.invalidStringToken=function(rn,pn){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw tu;this.raise(rn,pn)},Ps.readTmplToken=function(){for(var rn="",pn=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var $n=this.input.charCodeAt(this.pos);if($n===96||$n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===an.template||this.type===an.invalidTemplate)?$n===36?(this.pos+=2,this.finishToken(an.dollarBraceL)):(++this.pos,this.finishToken(an.backQuote)):(rn+=this.input.slice(pn,this.pos),this.finishToken(an.template,rn));if($n===92)rn+=this.input.slice(pn,this.pos),rn+=this.readEscapedChar(!0),pn=this.pos;else if(Sn($n)){switch(rn+=this.input.slice(pn,this.pos),++this.pos,$n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:rn+=`
`;break;default:rn+=String.fromCharCode($n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),pn=this.pos}else++this.pos}},Ps.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(an.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Ps.readEscapedChar=function(rn){var pn=this.input.charCodeAt(++this.pos);switch(++this.pos,pn){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return On(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),rn){var $n=this.pos-1;this.invalidStringToken($n,"Invalid escape sequence in template string")}default:if(pn>=48&&pn<=55){var er=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],cr=parseInt(er,8);return cr>255&&(er=er.slice(0,-1),cr=parseInt(er,8)),this.pos+=er.length-1,pn=this.input.charCodeAt(this.pos),(er!=="0"||pn===56||pn===57)&&(this.strict||rn)&&this.invalidStringToken(this.pos-1-er.length,rn?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(cr)}return Sn(pn)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(pn)}},Ps.readHexChar=function(rn){var pn=this.pos,$n=this.readInt(16,rn);return $n===null&&this.invalidStringToken(pn,"Bad character escape sequence"),$n},Ps.readWord1=function(){this.containsEsc=!1;for(var rn="",pn=!0,$n=this.pos,er=this.options.ecmaVersion>=6;this.pos<this.input.length;){var cr=this.fullCharCodeAtPos();if(Ht(cr,er))this.pos+=cr<=65535?1:2;else if(cr===92){this.containsEsc=!0,rn+=this.input.slice($n,this.pos);var kr=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Ar=this.readCodePoint();(pn?Bt:Ht)(Ar,er)||this.invalidStringToken(kr,"Invalid Unicode escape"),rn+=On(Ar),$n=this.pos}else break;pn=!1}return rn+this.input.slice($n,this.pos)},Ps.readWord=function(){var rn=this.readWord1(),pn=an.name;return this.keywords.test(rn)&&(pn=tn[rn]),this.finishToken(pn,rn)};var Pl="8.14.0";$t.acorn={Parser:$t,version:Pl,defaultOptions:ar,Position:Vn,SourceLocation:Qn,getLineInfo:ir,Node:ur,TokenType:Yt,tokTypes:an,keywordTypes:tn,TokContext:Wn,tokContexts:Kn,isIdentifierChar:Ht,isIdentifierStart:Bt,Token:Hl,isNewLine:Sn,lineBreak:un,lineBreakG:dn,nonASCIIwhitespace:bn};function hu(rn,pn){return $t.parse(rn,pn)}function jy(rn,pn,$n){return $t.parseExpressionAt(rn,pn,$n)}function Tm(rn,pn){return $t.tokenizer(rn,pn)}et.Node=ur,et.Parser=$t,et.Position=Vn,et.SourceLocation=Qn,et.TokContext=Wn,et.Token=Hl,et.TokenType=Yt,et.defaultOptions=ar,et.getLineInfo=ir,et.isIdentifierChar=Ht,et.isIdentifierStart=Bt,et.isNewLine=Sn,et.keywordTypes=tn,et.lineBreak=un,et.lineBreakG=dn,et.nonASCIIwhitespace=bn,et.parse=hu,et.parseExpressionAt=jy,et.tokContexts=Kn,et.tokTypes=an,et.tokenizer=Tm,et.version=Pl})}(acorn,acorn.exports)),acorn.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(it){(function(g,et){g=g||require$$2;var ot=g.window,ut=g.document,ct=new function(){var $t=/^(statics|enumerable|beans|preserve)$/,Jt=[],sn=Jt.slice,ln=Object.create,cn=Object.getOwnPropertyDescriptor,fn=Object.defineProperty,wn=Jt.forEach||function(Fn,jn){for(var Jn=0,Wn=this.length;Jn<Wn;Jn++)Fn.call(jn,this[Jn],Jn,this)},_n=function(Fn,jn){for(var Jn in this)this.hasOwnProperty(Jn)&&Fn.call(jn,this[Jn],Jn,this)},Tn=Object.assign||function(Fn){for(var jn=1,Jn=arguments.length;jn<Jn;jn++){var Wn=arguments[jn];for(var Kn in Wn)Wn.hasOwnProperty(Kn)&&(Fn[Kn]=Wn[Kn])}return Fn},Nn=function(Fn,jn,Jn){if(Fn){var Wn=cn(Fn,"length");(Wn&&typeof Wn.value=="number"?wn:_n).call(Fn,jn,Jn=Jn||Fn)}return Jn};function Bn(Fn,jn,Jn,Wn,Kn){var zn={};function Gn(Yn,sr){sr=sr||(sr=cn(jn,Yn))&&(sr.get?sr:sr.value),typeof sr=="string"&&sr[0]==="#"&&(sr=Fn[sr.substring(1)]||sr);var ur=typeof sr=="function",dr=sr,gr=Kn||ur&&!sr.base?sr&&sr.get?Yn in Fn:Fn[Yn]:null,lr;(!Kn||!gr)&&(ur&&gr&&(sr.base=gr),ur&&Wn!==!1&&(lr=Yn.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(zn[lr[3].toLowerCase()+lr[4]]=lr[2]),(!dr||ur||!dr.get||typeof dr.get!="function"||!Hn.isPlainObject(dr))&&(dr={value:dr,writable:!0}),(cn(Fn,Yn)||{configurable:!0}).configurable&&(dr.configurable=!0,dr.enumerable=Jn??!lr),fn(Fn,Yn,dr))}if(jn){for(var Dn in jn)jn.hasOwnProperty(Dn)&&!$t.test(Dn)&&Gn(Dn);for(var Dn in zn){var qn=zn[Dn],Zn=Fn["set"+qn],nr=Fn["get"+qn]||Zn&&Fn["is"+qn];nr&&(Wn===!0||nr.length===0)&&Gn(Dn,{get:nr,set:Zn})}}return Fn}function Hn(){for(var Fn=0,jn=arguments.length;Fn<jn;Fn++){var Jn=arguments[Fn];Jn&&Tn(this,Jn)}return this}return Bn(Hn,{inject:function(Fn){if(Fn){var jn=Fn.statics===!0?Fn:Fn.statics,Jn=Fn.beans,Wn=Fn.preserve;jn!==Fn&&Bn(this.prototype,Fn,Fn.enumerable,Jn,Wn),Bn(this,jn,null,Jn,Wn)}for(var Kn=1,zn=arguments.length;Kn<zn;Kn++)this.inject(arguments[Kn]);return this},extend:function(){for(var Fn=this,jn,Jn,Wn=0,Kn,zn=arguments.length;Wn<zn&&!(jn&&Jn);Wn++)Kn=arguments[Wn],jn=jn||Kn.initialize,Jn=Jn||Kn.prototype;return jn=jn||function(){Fn.apply(this,arguments)},Jn=jn.prototype=Jn||ln(this.prototype),fn(Jn,"constructor",{value:jn,writable:!0,configurable:!0}),Bn(jn,this),arguments.length&&this.inject.apply(jn,arguments),jn.base=Fn,jn}}).inject({enumerable:!1,initialize:Hn,set:Hn,inject:function(){for(var Fn=0,jn=arguments.length;Fn<jn;Fn++){var Jn=arguments[Fn];Jn&&Bn(this,Jn,Jn.enumerable,Jn.beans,Jn.preserve)}return this},extend:function(){var Fn=ln(this);return Fn.inject.apply(Fn,arguments)},each:function(Fn,jn){return Nn(this,Fn,jn)},clone:function(){return new this.constructor(this)},statics:{set:Tn,each:Nn,create:ln,define:fn,describe:cn,clone:function(Fn){return Tn(new Fn.constructor,Fn)},isPlainObject:function(Fn){var jn=Fn!=null&&Fn.constructor;return jn&&(jn===Object||jn===Hn||jn.name==="Object")},pick:function(Fn,jn){return Fn!==et?Fn:jn},slice:function(Fn,jn,Jn){return sn.call(Fn,jn,Jn)}}})};it.exports=ct,ct.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+ct.each(this,function($t,Jt){if(!/^_/.test(Jt)){var sn=typeof $t;this.push(Jt+": "+(sn==="number"?Tt.instance.number($t):sn==="string"?"'"+$t+"'":$t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function($t){return ct.importJSON($t,this)},exportJSON:function($t){return ct.exportJSON(this,$t)},toJSON:function(){return ct.serialize(this)},set:function($t,Jt){return $t&&ct.filter(this,$t,Jt,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function $t(){var Jt=$t.base.apply(this,arguments),sn=Jt.prototype._class;return sn&&!ct.exports[sn]&&(ct.exports[sn]=Jt),Jt},equals:function($t,Jt){if($t===Jt)return!0;if($t&&$t.equals)return $t.equals(Jt);if(Jt&&Jt.equals)return Jt.equals($t);if($t&&Jt&&typeof $t=="object"&&typeof Jt=="object"){if(Array.isArray($t)&&Array.isArray(Jt)){var sn=$t.length;if(sn!==Jt.length)return!1;for(;sn--;)if(!ct.equals($t[sn],Jt[sn]))return!1}else{var ln=Object.keys($t),sn=ln.length;if(sn!==Object.keys(Jt).length)return!1;for(;sn--;){var cn=ln[sn];if(!(Jt.hasOwnProperty(cn)&&ct.equals($t[cn],Jt[cn])))return!1}}return!0}return!1},read:function($t,Jt,sn,ln){if(this===ct){var cn=this.peek($t,Jt);return $t.__index++,cn}var fn=this.prototype,wn=fn._readIndex,_n=Jt||wn&&$t.__index||0,Tn=$t.length,Nn=$t[_n];if(ln=ln||Tn-_n,Nn instanceof this||sn&&sn.readNull&&Nn==null&&ln<=1)return wn&&($t.__index=_n+1),Nn&&sn&&sn.clone?Nn.clone():Nn;if(Nn=ct.create(fn),wn&&(Nn.__read=!0),Nn=Nn.initialize.apply(Nn,_n>0||_n+ln<Tn?ct.slice($t,_n,_n+ln):$t)||Nn,wn){$t.__index=_n+Nn.__read;var Bn=Nn.__filtered;Bn&&($t.__filtered=Bn,Nn.__filtered=et),Nn.__read=et}return Nn},peek:function($t,Jt){return $t[$t.__index=Jt||$t.__index||0]},remain:function($t){return $t.length-($t.__index||0)},readList:function($t,Jt,sn,ln){for(var cn=[],fn,wn=Jt||0,_n=ln?wn+ln:$t.length,Tn=wn;Tn<_n;Tn++)cn.push(Array.isArray(fn=$t[Tn])?this.read(fn,0,sn):this.read($t,Tn,sn,1));return cn},readNamed:function($t,Jt,sn,ln,cn){var fn=this.getNamed($t,Jt),wn=fn!==et;if(wn){var _n=$t.__filtered;if(!_n){var Tn=this.getSource($t);_n=$t.__filtered=ct.create(Tn),_n.__unfiltered=Tn}_n[Jt]=et}return this.read(wn?[fn]:$t,sn,ln,cn)},readSupported:function($t,Jt){var sn=this.getSource($t),ln=this,cn=!1;return sn&&Object.keys(sn).forEach(function(fn){if(fn in Jt){var wn=ln.readNamed($t,fn);wn!==et&&(Jt[fn]=wn),cn=!0}}),cn},getSource:function($t){var Jt=$t.__source;if(Jt===et){var sn=$t.length===1&&$t[0];Jt=$t.__source=sn&&ct.isPlainObject(sn)?sn:null}return Jt},getNamed:function($t,Jt){var sn=this.getSource($t);if(sn)return Jt?sn[Jt]:$t.__filtered||sn},hasNamed:function($t,Jt){return!!this.getNamed($t,Jt)},filter:function($t,Jt,sn,ln){var cn;function fn(Bn){if(!(sn&&Bn in sn)&&!(cn&&Bn in cn)){var Hn=Jt[Bn];Hn!==et&&($t[Bn]=Hn)}}if(ln){for(var wn={},_n=0,Tn,Nn=ln.length;_n<Nn;_n++)(Tn=ln[_n])in Jt&&(fn(Tn),wn[Tn]=!0);cn=wn}return Object.keys(Jt.__unfiltered||Jt).forEach(fn),$t},isPlainValue:function($t,Jt){return ct.isPlainObject($t)||Array.isArray($t)||Jt&&typeof $t=="string"},serialize:function($t,Jt,sn,ln){Jt=Jt||{};var cn=!ln,fn;if(cn&&(Jt.formatter=new Tt(Jt.precision),ln={length:0,definitions:{},references:{},add:function(Hn,Fn){var jn="#"+Hn._id,Jn=this.references[jn];if(!Jn){this.length++;var Wn=Fn.call(Hn),Kn=Hn._class;Kn&&Wn[0]!==Kn&&Wn.unshift(Kn),this.definitions[jn]=Wn,Jn=this.references[jn]=[jn]}return Jn}}),$t&&$t._serialize){fn=$t._serialize(Jt,ln);var wn=$t._class;wn&&!$t._compactSerialize&&(cn||!sn)&&fn[0]!==wn&&fn.unshift(wn)}else if(Array.isArray($t)){fn=[];for(var _n=0,Tn=$t.length;_n<Tn;_n++)fn[_n]=ct.serialize($t[_n],Jt,sn,ln)}else if(ct.isPlainObject($t)){fn={};for(var Nn=Object.keys($t),_n=0,Tn=Nn.length;_n<Tn;_n++){var Bn=Nn[_n];fn[Bn]=ct.serialize($t[Bn],Jt,sn,ln)}}else typeof $t=="number"?fn=Jt.formatter.number($t,Jt.precision):fn=$t;return cn&&ln.length>0?[["dictionary",ln.definitions],fn]:fn},deserialize:function($t,Jt,sn,ln,cn){var fn=$t,wn=!sn,_n=wn&&$t&&$t.length&&$t[0][0]==="dictionary";if(sn=sn||{},Array.isArray($t)){var Tn=$t[0],Nn=Tn==="dictionary";if($t.length==1&&/^#/.test(Tn))return sn.dictionary[Tn];Tn=ct.exports[Tn],fn=[];for(var Bn=Tn?1:0,Hn=$t.length;Bn<Hn;Bn++)fn.push(ct.deserialize($t[Bn],Jt,sn,Nn,_n));if(Tn){var Fn=fn;Jt?fn=Jt(Tn,Fn,wn||cn):fn=new Tn(Fn)}}else if(ct.isPlainObject($t)){fn={},ln&&(sn.dictionary=fn);for(var jn in $t)fn[jn]=ct.deserialize($t[jn],Jt,sn)}return _n?fn[1]:fn},exportJSON:function($t,Jt){var sn=ct.serialize($t,Jt);return Jt&&Jt.asString==!1?sn:JSON.stringify(sn)},importJSON:function($t,Jt){return ct.deserialize(typeof $t=="string"?JSON.parse($t):$t,function(sn,ln,cn){var fn=cn&&Jt&&Jt.constructor===sn,wn=fn?Jt:ct.create(sn.prototype);if(ln.length===1&&wn instanceof an&&(fn||!(wn instanceof dn))){var _n=ln[0];ct.isPlainObject(_n)&&(_n.insert=!1,fn&&(ln=ln.concat([an.INSERT])))}return(fn?wn.set:sn).apply(wn,ln),fn&&(Jt=null),wn})},push:function($t,Jt){var sn=Jt.length;if(sn<4096)$t.push.apply($t,Jt);else{var ln=$t.length;$t.length+=sn;for(var cn=0;cn<sn;cn++)$t[ln+cn]=Jt[cn]}return $t},splice:function($t,Jt,sn,ln){var cn=Jt&&Jt.length,fn=sn===et;sn=fn?$t.length:sn,sn>$t.length&&(sn=$t.length);for(var wn=0;wn<cn;wn++)Jt[wn]._index=sn+wn;if(fn)return ct.push($t,Jt),[];var _n=[sn,ln];Jt&&ct.push(_n,Jt);for(var Tn=$t.splice.apply($t,_n),wn=0,Nn=Tn.length;wn<Nn;wn++)Tn[wn]._index=et;for(var wn=sn+cn,Nn=$t.length;wn<Nn;wn++)$t[wn]._index=wn;return Tn},capitalize:function($t){return $t.replace(/\b[a-z]/g,function(Jt){return Jt.toUpperCase()})},camelize:function($t){return $t.replace(/-(.)/g,function(Jt,sn){return sn.toUpperCase()})},hyphenate:function($t){return $t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var dt={on:function($t,Jt){if(typeof $t!="string")ct.each($t,function(fn,wn){this.on(wn,fn)},this);else{var sn=this._eventTypes,ln=sn&&sn[$t],cn=this._callbacks=this._callbacks||{};cn=cn[$t]=cn[$t]||[],cn.indexOf(Jt)===-1&&(cn.push(Jt),ln&&ln.install&&cn.length===1&&ln.install.call(this,$t))}return this},off:function($t,Jt){if(typeof $t!="string"){ct.each($t,function(wn,_n){this.off(_n,wn)},this);return}var sn=this._eventTypes,ln=sn&&sn[$t],cn=this._callbacks&&this._callbacks[$t],fn;return cn&&(!Jt||(fn=cn.indexOf(Jt))!==-1&&cn.length===1?(ln&&ln.uninstall&&ln.uninstall.call(this,$t),delete this._callbacks[$t]):fn!==-1&&cn.splice(fn,1)),this},once:function($t,Jt){return this.on($t,function sn(){Jt.apply(this,arguments),this.off($t,sn)})},emit:function($t,Jt){var sn=this._callbacks&&this._callbacks[$t];if(!sn)return!1;var ln=ct.slice(arguments,1),cn=Jt&&Jt.target&&!Jt.currentTarget;sn=sn.slice(),cn&&(Jt.currentTarget=this);for(var fn=0,wn=sn.length;fn<wn;fn++)if(sn[fn].apply(this,ln)==!1){Jt&&Jt.stop&&Jt.stop();break}return cn&&delete Jt.currentTarget,!0},responds:function($t){return!!(this._callbacks&&this._callbacks[$t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function($t){var Jt=this._eventTypes,sn=this._callbacks,ln=$t?"install":"uninstall";if(Jt){for(var cn in sn)if(sn[cn].length>0){var fn=Jt[cn],wn=fn&&fn[ln];wn&&wn.call(this,cn)}}},statics:{inject:function $t(Jt){var sn=Jt._events;if(sn){var ln={};ct.each(sn,function(cn,fn){var wn=typeof cn=="string",_n=wn?cn:fn,Tn=ct.capitalize(_n),Nn=_n.substring(2).toLowerCase();ln[Nn]=wn?{}:cn,_n="_"+_n,Jt["get"+Tn]=function(){return this[_n]},Jt["set"+Tn]=function(Bn){var Hn=this[_n];Hn&&this.off(Nn,Hn),Bn&&this.on(Nn,Bn),this[_n]=Bn}}),Jt._eventTypes=ln}return $t.base.apply(this,arguments)}}},ft=ct.extend({_class:"PaperScope",initialize:function $t(){Kr=this,this.settings=new ct({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=$t._id++,$t._scopes[this._id]=this;var Jt=$t.prototype;if(!this.support){var sn=zr.getContext(1,1)||{};Jt.support={nativeDash:"setLineDash"in sn||"mozDash"in sn,nativeBlendModes:Vr.nativeModes},zr.release(sn)}if(!this.agent){var ln=g.navigator.userAgent.toLowerCase(),cn=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(ln)||[])[0],fn=cn==="darwin"?"mac":cn,wn=Jt.agent=Jt.browser={platform:fn};fn&&(wn[fn]=!0),ln.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(_n,Tn,Nn,Bn,Hn){if(!wn.chrome){var Fn=Tn==="opera"?Bn:/^(node|trident)$/.test(Tn)?Hn:Nn;wn.version=Fn,wn.versionNumber=parseFloat(Fn),Tn={trident:"msie",jsdom:"node"}[Tn]||Tn,wn.name=Tn,wn[Tn]=!0}}),wn.chrome&&delete wn.webkit,wn.atom&&delete wn.chrome}},version:"0.12.18",getView:function(){var $t=this.project;return $t&&$t._view},getPaper:function(){return this},execute:function($t,Jt){var sn=Kr.PaperScript.execute($t,this,Jt);return Ir.updateFocus(),sn},install:function($t){var Jt=this;ct.each(["project","view","tool"],function(ln){ct.define($t,ln,{configurable:!0,get:function(){return Jt[ln]}})});for(var sn in this)!/^_/.test(sn)&&this[sn]&&($t[sn]=this[sn])},setup:function($t){return Kr=this,this.project=new on($t),this},createCanvas:function($t,Jt){return zr.getCanvas($t,Jt)},activate:function(){Kr=this},clear:function(){for(var $t=this.projects,Jt=this.tools,sn=$t.length-1;sn>=0;sn--)$t[sn].remove();for(var sn=Jt.length-1;sn>=0;sn--)Jt[sn].remove()},remove:function(){this.clear(),delete ft._scopes[this._id]},statics:new function(){function $t(Jt){return Jt+="Attribute",function(sn,ln){return sn[Jt](ln)||sn[Jt]("data-paper-"+ln)}}return{_scopes:{},_id:0,get:function(Jt){return this._scopes[Jt]||null},getAttribute:$t("get"),hasAttribute:$t("has")}}}),St=ct.extend(dt,{initialize:function($t){this._scope=Kr,this._index=this._scope[this._list].push(this)-1,($t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var $t=this._scope[this._reference];return $t&&$t!==this&&$t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",$t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(ct.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),kt={findItemBoundsCollisions:function($t,Jt,sn){function ln(wn){for(var _n=new Array(wn.length),Tn=0;Tn<wn.length;Tn++){var Nn=wn[Tn].getBounds();_n[Tn]=[Nn.left,Nn.top,Nn.right,Nn.bottom]}return _n}var cn=ln($t),fn=!Jt||Jt===$t?cn:ln(Jt);return this.findBoundsCollisions(cn,fn,sn||0)},findCurveBoundsCollisions:function($t,Jt,sn,ln){function cn(Fn){for(var jn=Math.min,Jn=Math.max,Wn=new Array(Fn.length),Kn=0;Kn<Fn.length;Kn++){var zn=Fn[Kn];Wn[Kn]=[jn(zn[0],zn[2],zn[4],zn[6]),jn(zn[1],zn[3],zn[5],zn[7]),Jn(zn[0],zn[2],zn[4],zn[6]),Jn(zn[1],zn[3],zn[5],zn[7])]}return Wn}var fn=cn($t),wn=!Jt||Jt===$t?fn:cn(Jt);if(ln){for(var _n=this.findBoundsCollisions(fn,wn,sn||0,!1,!0),Tn=this.findBoundsCollisions(fn,wn,sn||0,!0,!0),Nn=[],Bn=0,Hn=_n.length;Bn<Hn;Bn++)Nn[Bn]={hor:_n[Bn],ver:Tn[Bn]};return Nn}return this.findBoundsCollisions(fn,wn,sn||0)},findBoundsCollisions:function($t,Jt,sn,ln,cn){var fn=!Jt||$t===Jt,wn=fn?$t:$t.concat(Jt),_n=$t.length,Tn=wn.length;function Nn(Wr,Xr,es){for(var Dr=0,$r=Wr.length;Dr<$r;){var Qr=$r+Dr>>>1;wn[Wr[Qr]][Xr]<es?Dr=Qr+1:$r=Qr}return Dr-1}for(var Bn=ln?1:0,Hn=Bn+2,Fn=ln?0:1,jn=Fn+2,Jn=new Array(Tn),Wn=0;Wn<Tn;Wn++)Jn[Wn]=Wn;Jn.sort(function(Wr,Xr){return wn[Wr][Bn]-wn[Xr][Bn]});for(var Kn=[],zn=new Array(_n),Wn=0;Wn<Tn;Wn++){var Gn=Jn[Wn],Dn=wn[Gn],qn=fn?Gn:Gn-_n,Zn=Gn<_n,nr=fn||!Zn,Yn=Zn?[]:null;if(Kn.length){var sr=Nn(Kn,Hn,Dn[Bn]-sn)+1;if(Kn.splice(0,sr),fn&&cn){Yn=Yn.concat(Kn);for(var ur=0;ur<Kn.length;ur++){var dr=Kn[ur];zn[dr].push(qn)}}else for(var gr=Dn[jn],lr=Dn[Fn],ur=0;ur<Kn.length;ur++){var dr=Kn[ur],mr=wn[dr],yr=dr<_n,br=fn||dr>=_n;(cn||(Zn&&br||nr&&yr)&&gr>=mr[Fn]-sn&&lr<=mr[jn]+sn)&&(Zn&&br&&Yn.push(fn?dr:dr-_n),nr&&yr&&zn[dr].push(qn))}}if(Zn&&($t===Jt&&Yn.push(Gn),zn[Gn]=Yn),Kn.length){var Er=Dn[Hn],Pr=Nn(Kn,Hn,Er);Kn.splice(Pr+1,0,Gn)}else Kn.push(Gn)}for(var Wn=0;Wn<zn.length;Wn++){var Hr=zn[Wn];Hr&&Hr.sort(function(Xr,es){return Xr-es})}return zn}},Tt=ct.extend({initialize:function($t){this.precision=ct.pick($t,5),this.multiplier=Math.pow(10,this.precision)},number:function($t){return this.precision<16?Math.round($t*this.multiplier)/this.multiplier:$t},pair:function($t,Jt,sn){return this.number($t)+(sn||",")+this.number(Jt)},point:function($t,Jt){return this.number($t.x)+(Jt||",")+this.number($t.y)},size:function($t,Jt){return this.number($t.width)+(Jt||",")+this.number($t.height)},rectangle:function($t,Jt){return this.point($t,Jt)+(Jt||",")+this.size($t,Jt)}});Tt.instance=new Tt;var Rt=new function(){var $t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],Jt=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],sn=Math.abs,ln=Math.sqrt,cn=Math.pow,fn=Math.log2||function(Hn){return Math.log(Hn)*Math.LOG2E},wn=1e-12,_n=112e-18;function Tn(Hn,Fn,jn){return Hn<Fn?Fn:Hn>jn?jn:Hn}function Nn(Hn,Fn,jn){function Jn(sr){var ur=sr*134217729,dr=sr-ur,gr=dr+ur,lr=sr-gr;return[gr,lr]}var Wn=Fn*Fn-Hn*jn,Kn=Fn*Fn+Hn*jn;if(sn(Wn)*3<Kn){var zn=Jn(Hn),Gn=Jn(Fn),Dn=Jn(jn),qn=Fn*Fn,Zn=Gn[0]*Gn[0]-qn+2*Gn[0]*Gn[1]+Gn[1]*Gn[1],nr=Hn*jn,Yn=zn[0]*Dn[0]-nr+zn[0]*Dn[1]+zn[1]*Dn[0]+zn[1]*Dn[1];Wn=qn-nr+(Zn-Yn)}return Wn}function Bn(){var Hn=Math.max.apply(Math,arguments);return Hn&&(Hn<1e-8||Hn>1e8)?cn(2,-Math.round(fn(Hn))):0}return{EPSILON:wn,MACHINE_EPSILON:_n,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(ln(2)-1)/3,isZero:function(Hn){return Hn>=-wn&&Hn<=wn},isMachineZero:function(Hn){return Hn>=-_n&&Hn<=_n},clamp:Tn,integrate:function(Hn,Fn,jn,Jn){for(var Wn=$t[Jn-2],Kn=Jt[Jn-2],zn=(jn-Fn)*.5,Gn=zn+Fn,Dn=0,qn=Jn+1>>1,Zn=Jn&1?Kn[Dn++]*Hn(Gn):0;Dn<qn;){var nr=zn*Wn[Dn];Zn+=Kn[Dn++]*(Hn(Gn+nr)+Hn(Gn-nr))}return zn*Zn},findRoot:function(Hn,Fn,jn,Jn,Wn,Kn,zn){for(var Gn=0;Gn<Kn;Gn++){var Dn=Hn(jn),qn=Dn/Fn(jn),Zn=jn-qn;if(sn(qn)<zn){jn=Zn;break}Dn>0?(Wn=jn,jn=Zn<=Jn?(Jn+Wn)*.5:Zn):(Jn=jn,jn=Zn>=Wn?(Jn+Wn)*.5:Zn)}return Tn(jn,Jn,Wn)},solveQuadratic:function(Hn,Fn,jn,Jn,Wn,Kn){var zn,Gn=1/0;if(sn(Hn)<wn){if(sn(Fn)<wn)return sn(jn)<wn?-1:0;zn=-jn/Fn}else{Fn*=-.5;var Dn=Nn(Hn,Fn,jn);if(Dn&&sn(Dn)<_n){var qn=Bn(sn(Hn),sn(Fn),sn(jn));qn&&(Hn*=qn,Fn*=qn,jn*=qn,Dn=Nn(Hn,Fn,jn))}if(Dn>=-_n){var Zn=Dn<0?0:ln(Dn),nr=Fn+(Fn<0?-Zn:Zn);nr===0?(zn=jn/Hn,Gn=-zn):(zn=nr/Hn,Gn=jn/nr)}}var Yn=0,sr=Wn==null,ur=Wn-wn,dr=Kn+wn;return isFinite(zn)&&(sr||zn>ur&&zn<dr)&&(Jn[Yn++]=sr?zn:Tn(zn,Wn,Kn)),Gn!==zn&&isFinite(Gn)&&(sr||Gn>ur&&Gn<dr)&&(Jn[Yn++]=sr?Gn:Tn(Gn,Wn,Kn)),Yn},solveCubic:function(Hn,Fn,jn,Jn,Wn,Kn,zn){var Gn=Bn(sn(Hn),sn(Fn),sn(jn),sn(Jn)),Dn,qn,Zn,nr,Yn;Gn&&(Hn*=Gn,Fn*=Gn,jn*=Gn,Jn*=Gn);function sr(Pr){Dn=Pr;var Hr=Hn*Dn;qn=Hr+Fn,Zn=qn*Dn+jn,nr=(Hr+qn)*Dn+Zn,Yn=Zn*Dn+Jn}if(sn(Hn)<wn)Hn=Fn,qn=jn,Zn=Jn,Dn=1/0;else if(sn(Jn)<wn)qn=Fn,Zn=jn,Dn=0;else{sr(-(Fn/Hn)/3);var ur=Yn/Hn,dr=cn(sn(ur),1/3),gr=ur<0?-1:1,lr=-nr/Hn,mr=lr>0?1.324717957244746*Math.max(dr,ln(lr)):dr,yr=Dn-gr*mr;if(yr!==Dn){do sr(yr),yr=nr===0?Dn:Dn-Yn/nr/(1+_n);while(gr*yr>gr*Dn);sn(Hn)*Dn*Dn>sn(Jn/Dn)&&(Zn=-Jn/Dn,qn=(Zn-jn)/Dn)}}var br=Rt.solveQuadratic(Hn,qn,Zn,Wn,Kn,zn),Er=Kn==null;return isFinite(Dn)&&(br===0||br>0&&Dn!==Wn[0]&&Dn!==Wn[1])&&(Er||Dn>Kn-wn&&Dn<zn+wn)&&(Wn[br++]=Er?Dn:Tn(Dn,Kn,zn)),br}}},jt={_id:1,_pools:{},get:function($t){if($t){var Jt=this._pools[$t];return Jt||(Jt=this._pools[$t]={_id:1}),Jt._id++}else return this._id++}},Ft=ct.extend({_class:"Point",_readIndex:!0,initialize:function(Jt,sn){var ln=typeof Jt,cn=this.__read,fn=0;if(ln==="number"){var wn=typeof sn=="number";this._set(Jt,wn?sn:Jt),cn&&(fn=wn?2:1)}else if(ln==="undefined"||Jt===null)this._set(0,0),cn&&(fn=Jt===null?1:0);else{var _n=ln==="string"?Jt.split(/[\s,]+/)||[]:Jt;fn=1,Array.isArray(_n)?this._set(+_n[0],+(_n.length>1?_n[1]:_n[0])):"x"in _n?this._set(_n.x||0,_n.y||0):"width"in _n?this._set(_n.width||0,_n.height||0):"angle"in _n?(this._set(_n.length||0,0),this.setAngle(_n.angle||0)):(this._set(0,0),fn=0)}return cn&&(this.__read=fn),this},set:"#initialize",_set:function($t,Jt){return this.x=$t,this.y=Jt,this},equals:function($t){return this===$t||$t&&(this.x===$t.x&&this.y===$t.y||Array.isArray($t)&&this.x===$t[0]&&this.y===$t[1])||!1},clone:function(){return new Ft(this.x,this.y)},toString:function(){var $t=Tt.instance;return"{ x: "+$t.number(this.x)+", y: "+$t.number(this.y)+" }"},_serialize:function($t){var Jt=$t.formatter;return[Jt.number(this.x),Jt.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function($t){if(this.isZero()){var Jt=this._angle||0;this._set(Math.cos(Jt)*$t,Math.sin(Jt)*$t)}else{var sn=$t/this.getLength();Rt.isZero(sn)&&this.getAngle(),this._set(this.x*sn,this.y*sn)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function($t){this.setAngleInRadians.call(this,$t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var $t=Ft.read(arguments),Jt=this.getLength()*$t.getLength();if(Rt.isZero(Jt))return NaN;var sn=this.dot($t)/Jt;return Math.acos(sn<-1?-1:sn>1?1:sn)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function($t){if(this._angle=$t,!this.isZero()){var Jt=this.getLength();this._set(Math.cos($t)*Jt,Math.sin($t)*Jt)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var $t=Ft.read(arguments);return Math.atan2(this.cross($t),this.dot($t))*180/Math.PI},getDistance:function(){var $t=arguments,Jt=Ft.read($t),sn=Jt.x-this.x,ln=Jt.y-this.y,cn=sn*sn+ln*ln,fn=ct.read($t);return fn?cn:Math.sqrt(cn)},normalize:function($t){$t===et&&($t=1);var Jt=this.getLength(),sn=Jt!==0?$t/Jt:0,ln=new Ft(this.x*sn,this.y*sn);return sn>=0&&(ln._angle=this._angle),ln},rotate:function($t,Jt){if($t===0)return this.clone();$t=$t*Math.PI/180;var sn=Jt?this.subtract(Jt):this,ln=Math.sin($t),cn=Math.cos($t);return sn=new Ft(sn.x*cn-sn.y*ln,sn.x*ln+sn.y*cn),Jt?sn.add(Jt):sn},transform:function($t){return $t?$t._transformPoint(this):this},add:function(){var $t=Ft.read(arguments);return new Ft(this.x+$t.x,this.y+$t.y)},subtract:function(){var $t=Ft.read(arguments);return new Ft(this.x-$t.x,this.y-$t.y)},multiply:function(){var $t=Ft.read(arguments);return new Ft(this.x*$t.x,this.y*$t.y)},divide:function(){var $t=Ft.read(arguments);return new Ft(this.x/$t.x,this.y/$t.y)},modulo:function(){var $t=Ft.read(arguments);return new Ft(this.x%$t.x,this.y%$t.y)},negate:function(){return new Ft(-this.x,-this.y)},isInside:function(){return zt.read(arguments).contains(this)},isClose:function(){var $t=arguments,Jt=Ft.read($t),sn=ct.read($t);return this.getDistance(Jt)<=sn},isCollinear:function(){var $t=Ft.read(arguments);return Ft.isCollinear(this.x,this.y,$t.x,$t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var $t=Ft.read(arguments);return Ft.isOrthogonal(this.x,this.y,$t.x,$t.y)},isZero:function(){var $t=Rt.isZero;return $t(this.x)&&$t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function($t){return this.x*($t>1&&$t<4?-1:1)>=0&&this.y*($t>2?-1:1)>=0},dot:function(){var $t=Ft.read(arguments);return this.x*$t.x+this.y*$t.y},cross:function(){var $t=Ft.read(arguments);return this.x*$t.y-this.y*$t.x},project:function(){var $t=Ft.read(arguments),Jt=$t.isZero()?0:this.dot($t)/$t.dot($t);return new Ft($t.x*Jt,$t.y*Jt)},statics:{min:function(){var $t=arguments,Jt=Ft.read($t),sn=Ft.read($t);return new Ft(Math.min(Jt.x,sn.x),Math.min(Jt.y,sn.y))},max:function(){var $t=arguments,Jt=Ft.read($t),sn=Ft.read($t);return new Ft(Math.max(Jt.x,sn.x),Math.max(Jt.y,sn.y))},random:function(){return new Ft(Math.random(),Math.random())},isCollinear:function($t,Jt,sn,ln){return Math.abs($t*ln-Jt*sn)<=Math.sqrt(($t*$t+Jt*Jt)*(sn*sn+ln*ln))*1e-8},isOrthogonal:function($t,Jt,sn,ln){return Math.abs($t*sn+Jt*ln)<=Math.sqrt(($t*$t+Jt*Jt)*(sn*sn+ln*ln))*1e-8}}},ct.each(["round","ceil","floor","abs"],function($t){var Jt=Math[$t];this[$t]=function(){return new Ft(Jt(this.x),Jt(this.y))}},{})),Bt=Ft.extend({initialize:function(Jt,sn,ln,cn){this._x=Jt,this._y=sn,this._owner=ln,this._setter=cn},_set:function($t,Jt,sn){return this._x=$t,this._y=Jt,sn||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function($t){this._x=$t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function($t){this._y=$t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function($t){this._owner._changeSelection(this._getSelection(),$t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),Ht=ct.extend({_class:"Size",_readIndex:!0,initialize:function(Jt,sn){var ln=typeof Jt,cn=this.__read,fn=0;if(ln==="number"){var wn=typeof sn=="number";this._set(Jt,wn?sn:Jt),cn&&(fn=wn?2:1)}else if(ln==="undefined"||Jt===null)this._set(0,0),cn&&(fn=Jt===null?1:0);else{var _n=ln==="string"?Jt.split(/[\s,]+/)||[]:Jt;fn=1,Array.isArray(_n)?this._set(+_n[0],+(_n.length>1?_n[1]:_n[0])):"width"in _n?this._set(_n.width||0,_n.height||0):"x"in _n?this._set(_n.x||0,_n.y||0):(this._set(0,0),fn=0)}return cn&&(this.__read=fn),this},set:"#initialize",_set:function($t,Jt){return this.width=$t,this.height=Jt,this},equals:function($t){return $t===this||$t&&(this.width===$t.width&&this.height===$t.height||Array.isArray($t)&&this.width===$t[0]&&this.height===$t[1])||!1},clone:function(){return new Ht(this.width,this.height)},toString:function(){var $t=Tt.instance;return"{ width: "+$t.number(this.width)+", height: "+$t.number(this.height)+" }"},_serialize:function($t){var Jt=$t.formatter;return[Jt.number(this.width),Jt.number(this.height)]},add:function(){var $t=Ht.read(arguments);return new Ht(this.width+$t.width,this.height+$t.height)},subtract:function(){var $t=Ht.read(arguments);return new Ht(this.width-$t.width,this.height-$t.height)},multiply:function(){var $t=Ht.read(arguments);return new Ht(this.width*$t.width,this.height*$t.height)},divide:function(){var $t=Ht.read(arguments);return new Ht(this.width/$t.width,this.height/$t.height)},modulo:function(){var $t=Ht.read(arguments);return new Ht(this.width%$t.width,this.height%$t.height)},negate:function(){return new Ht(-this.width,-this.height)},isZero:function(){var $t=Rt.isZero;return $t(this.width)&&$t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function($t,Jt){return new Ht(Math.min($t.width,Jt.width),Math.min($t.height,Jt.height))},max:function($t,Jt){return new Ht(Math.max($t.width,Jt.width),Math.max($t.height,Jt.height))},random:function(){return new Ht(Math.random(),Math.random())}}},ct.each(["round","ceil","floor","abs"],function($t){var Jt=Math[$t];this[$t]=function(){return new Ht(Jt(this.width),Jt(this.height))}},{})),Yt=Ht.extend({initialize:function(Jt,sn,ln,cn){this._width=Jt,this._height=sn,this._owner=ln,this._setter=cn},_set:function($t,Jt,sn){return this._width=$t,this._height=Jt,sn||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function($t){this._width=$t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function($t){this._height=$t,this._owner[this._setter](this)}}),zt=ct.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(Jt,sn,ln,cn){var fn=arguments,wn=typeof Jt,_n;if(wn==="number"?(this._set(Jt,sn,ln,cn),_n=4):wn==="undefined"||Jt===null?(this._set(0,0,0,0),_n=Jt===null?1:0):fn.length===1&&(Array.isArray(Jt)?(this._set.apply(this,Jt),_n=1):Jt.x!==et||Jt.width!==et?(this._set(Jt.x||0,Jt.y||0,Jt.width||0,Jt.height||0),_n=1):Jt.from===et&&Jt.to===et&&(this._set(0,0,0,0),ct.readSupported(fn,this)&&(_n=1))),_n===et){var Tn=Ft.readNamed(fn,"from"),Nn=ct.peek(fn),Bn=Tn.x,Hn=Tn.y,Fn,jn;if(Nn&&Nn.x!==et||ct.hasNamed(fn,"to")){var Jn=Ft.readNamed(fn,"to");Fn=Jn.x-Bn,jn=Jn.y-Hn,Fn<0&&(Bn=Jn.x,Fn=-Fn),jn<0&&(Hn=Jn.y,jn=-jn)}else{var Wn=Ht.read(fn);Fn=Wn.width,jn=Wn.height}this._set(Bn,Hn,Fn,jn),_n=fn.__index}var Kn=fn.__filtered;return Kn&&(this.__filtered=Kn),this.__read&&(this.__read=_n),this},set:"#initialize",_set:function($t,Jt,sn,ln){return this.x=$t,this.y=Jt,this.width=sn,this.height=ln,this},clone:function(){return new zt(this.x,this.y,this.width,this.height)},equals:function($t){var Jt=ct.isPlainValue($t)?zt.read(arguments):$t;return Jt===this||Jt&&this.x===Jt.x&&this.y===Jt.y&&this.width===Jt.width&&this.height===Jt.height||!1},toString:function(){var $t=Tt.instance;return"{ x: "+$t.number(this.x)+", y: "+$t.number(this.y)+", width: "+$t.number(this.width)+", height: "+$t.number(this.height)+" }"},_serialize:function($t){var Jt=$t.formatter;return[Jt.number(this.x),Jt.number(this.y),Jt.number(this.width),Jt.number(this.height)]},getPoint:function($t){var Jt=$t?Ft:Bt;return new Jt(this.x,this.y,this,"setPoint")},setPoint:function(){var $t=Ft.read(arguments);this.x=$t.x,this.y=$t.y},getSize:function($t){var Jt=$t?Ht:Yt;return new Jt(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var $t=Ht.read(arguments),Jt=this._sx,sn=this._sy,ln=$t.width,cn=$t.height;Jt&&(this.x+=(this.width-ln)*Jt),sn&&(this.y+=(this.height-cn)*sn),this.width=ln,this.height=cn,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function($t){if(!this._fw){var Jt=$t-this.x;this.width-=this._sx===.5?Jt*2:Jt}this.x=$t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function($t){if(!this._fh){var Jt=$t-this.y;this.height-=this._sy===.5?Jt*2:Jt}this.y=$t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function($t){if(!this._fw){var Jt=$t-this.x;this.width=this._sx===.5?Jt*2:Jt}this.x=$t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function($t){if(!this._fh){var Jt=$t-this.y;this.height=this._sy===.5?Jt*2:Jt}this.y=$t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function($t){this._fw||this._sx===.5?this.x=$t-this.width/2:(this._sx&&(this.x+=($t-this.x)*2*this._sx),this.width=($t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function($t){this._fh||this._sy===.5?this.y=$t-this.height/2:(this._sy&&(this.y+=($t-this.y)*2*this._sy),this.height=($t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function($t){var Jt=$t?Ft:Bt;return new Jt(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var $t=Ft.read(arguments);return this.setCenterX($t.x),this.setCenterY($t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function($t){return $t&&$t.width!==et||(Array.isArray($t)?$t:arguments).length===4?this._containsRectangle(zt.read(arguments)):this._containsPoint(Ft.read(arguments))},_containsPoint:function($t){var Jt=$t.x,sn=$t.y;return Jt>=this.x&&sn>=this.y&&Jt<=this.x+this.width&&sn<=this.y+this.height},_containsRectangle:function($t){var Jt=$t.x,sn=$t.y;return Jt>=this.x&&sn>=this.y&&Jt+$t.width<=this.x+this.width&&sn+$t.height<=this.y+this.height},intersects:function(){var $t=zt.read(arguments),Jt=ct.read(arguments)||0;return $t.x+$t.width>this.x-Jt&&$t.y+$t.height>this.y-Jt&&$t.x<this.x+this.width+Jt&&$t.y<this.y+this.height+Jt},intersect:function(){var $t=zt.read(arguments),Jt=Math.max(this.x,$t.x),sn=Math.max(this.y,$t.y),ln=Math.min(this.x+this.width,$t.x+$t.width),cn=Math.min(this.y+this.height,$t.y+$t.height);return new zt(Jt,sn,ln-Jt,cn-sn)},unite:function(){var $t=zt.read(arguments),Jt=Math.min(this.x,$t.x),sn=Math.min(this.y,$t.y),ln=Math.max(this.x+this.width,$t.x+$t.width),cn=Math.max(this.y+this.height,$t.y+$t.height);return new zt(Jt,sn,ln-Jt,cn-sn)},include:function(){var $t=Ft.read(arguments),Jt=Math.min(this.x,$t.x),sn=Math.min(this.y,$t.y),ln=Math.max(this.x+this.width,$t.x),cn=Math.max(this.y+this.height,$t.y);return new zt(Jt,sn,ln-Jt,cn-sn)},expand:function(){var $t=Ht.read(arguments),Jt=$t.width,sn=$t.height;return new zt(this.x-Jt/2,this.y-sn/2,this.width+Jt,this.height+sn)},scale:function($t,Jt){return this.expand(this.width*$t-this.width,this.height*(Jt===et?$t:Jt)-this.height)}},ct.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function($t,Jt){var sn=$t.join(""),ln=/^[RL]/.test(sn);Jt>=4&&($t[1]+=ln?"Y":"X");var cn=$t[ln?0:1],fn=$t[ln?1:0],wn="get"+cn,_n="get"+fn,Tn="set"+cn,Nn="set"+fn,Bn="get"+sn,Hn="set"+sn;this[Bn]=function(Fn){var jn=Fn?Ft:Bt;return new jn(this[wn](),this[_n](),this,Hn)},this[Hn]=function(){var Fn=Ft.read(arguments);this[Tn](Fn.x),this[Nn](Fn.y)}},{beans:!0})),Kt=zt.extend({initialize:function(Jt,sn,ln,cn,fn,wn){this._set(Jt,sn,ln,cn,!0),this._owner=fn,this._setter=wn},_set:function($t,Jt,sn,ln,cn){return this._x=$t,this._y=Jt,this._width=sn,this._height=ln,cn||this._owner[this._setter](this),this}},new function(){var $t=zt.prototype;return ct.each(["x","y","width","height"],function(Jt){var sn=ct.capitalize(Jt),ln="_"+Jt;this["get"+sn]=function(){return this[ln]},this["set"+sn]=function(cn){this[ln]=cn,this._dontNotify||this._owner[this._setter](this)}},ct.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(Jt){var sn="set"+Jt;this[sn]=function(){this._dontNotify=!0,$t[sn].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(Jt){var sn=this._owner;sn._changeSelection&&sn._changeSelection(2,Jt)}}))}),en=ct.extend({_class:"Matrix",initialize:function $t(Jt,sn){var ln=arguments,cn=ln.length,fn=!0;if(cn>=6?this._set.apply(this,ln):cn===1||cn===2?Jt instanceof $t?this._set(Jt._a,Jt._b,Jt._c,Jt._d,Jt._tx,Jt._ty,sn):Array.isArray(Jt)?this._set.apply(this,sn?Jt.concat([sn]):Jt):fn=!1:cn?fn=!1:this.reset(),!fn)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function($t,Jt,sn,ln,cn,fn,wn){return this._a=$t,this._b=Jt,this._c=sn,this._d=ln,this._tx=cn,this._ty=fn,wn||this._changed(),this},_serialize:function($t,Jt){return ct.serialize(this.getValues(),$t,!0,Jt)},_changed:function(){var $t=this._owner;$t&&($t._applyMatrix?$t.transform(null,!0):$t._changed(25))},clone:function(){return new en(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function($t){return $t===this||$t&&this._a===$t._a&&this._b===$t._b&&this._c===$t._c&&this._d===$t._d&&this._tx===$t._tx&&this._ty===$t._ty},toString:function(){var $t=Tt.instance;return"[["+[$t.number(this._a),$t.number(this._c),$t.number(this._tx)].join(", ")+"], ["+[$t.number(this._b),$t.number(this._d),$t.number(this._ty)].join(", ")+"]]"},reset:function($t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,$t||this._changed(),this},apply:function($t,Jt){var sn=this._owner;return sn?(sn.transform(null,ct.pick($t,!0),Jt),this.isIdentity()):!1},translate:function(){var $t=Ft.read(arguments),Jt=$t.x,sn=$t.y;return this._tx+=Jt*this._a+sn*this._c,this._ty+=Jt*this._b+sn*this._d,this._changed(),this},scale:function(){var $t=arguments,Jt=Ft.read($t),sn=Ft.read($t,0,{readNull:!0});return sn&&this.translate(sn),this._a*=Jt.x,this._b*=Jt.x,this._c*=Jt.y,this._d*=Jt.y,sn&&this.translate(sn.negate()),this._changed(),this},rotate:function($t){$t*=Math.PI/180;var Jt=Ft.read(arguments,1),sn=Jt.x,ln=Jt.y,cn=Math.cos($t),fn=Math.sin($t),wn=sn-sn*cn+ln*fn,_n=ln-sn*fn-ln*cn,Tn=this._a,Nn=this._b,Bn=this._c,Hn=this._d;return this._a=cn*Tn+fn*Bn,this._b=cn*Nn+fn*Hn,this._c=-fn*Tn+cn*Bn,this._d=-fn*Nn+cn*Hn,this._tx+=wn*Tn+_n*Bn,this._ty+=wn*Nn+_n*Hn,this._changed(),this},shear:function(){var $t=arguments,Jt=Ft.read($t),sn=Ft.read($t,0,{readNull:!0});sn&&this.translate(sn);var ln=this._a,cn=this._b;return this._a+=Jt.y*this._c,this._b+=Jt.y*this._d,this._c+=Jt.x*ln,this._d+=Jt.x*cn,sn&&this.translate(sn.negate()),this._changed(),this},skew:function(){var $t=arguments,Jt=Ft.read($t),sn=Ft.read($t,0,{readNull:!0}),ln=Math.PI/180,cn=new Ft(Math.tan(Jt.x*ln),Math.tan(Jt.y*ln));return this.shear(cn,sn)},append:function($t,Jt){if($t){var sn=this._a,ln=this._b,cn=this._c,fn=this._d,wn=$t._a,_n=$t._c,Tn=$t._b,Nn=$t._d,Bn=$t._tx,Hn=$t._ty;this._a=wn*sn+Tn*cn,this._c=_n*sn+Nn*cn,this._b=wn*ln+Tn*fn,this._d=_n*ln+Nn*fn,this._tx+=Bn*sn+Hn*cn,this._ty+=Bn*ln+Hn*fn,Jt||this._changed()}return this},prepend:function($t,Jt){if($t){var sn=this._a,ln=this._b,cn=this._c,fn=this._d,wn=this._tx,_n=this._ty,Tn=$t._a,Nn=$t._c,Bn=$t._b,Hn=$t._d,Fn=$t._tx,jn=$t._ty;this._a=Tn*sn+Nn*ln,this._c=Tn*cn+Nn*fn,this._b=Bn*sn+Hn*ln,this._d=Bn*cn+Hn*fn,this._tx=Tn*wn+Nn*_n+Fn,this._ty=Bn*wn+Hn*_n+jn,Jt||this._changed()}return this},appended:function($t){return this.clone().append($t)},prepended:function($t){return this.clone().prepend($t)},invert:function(){var $t=this._a,Jt=this._b,sn=this._c,ln=this._d,cn=this._tx,fn=this._ty,wn=$t*ln-Jt*sn,_n=null;return wn&&!isNaN(wn)&&isFinite(cn)&&isFinite(fn)&&(this._a=ln/wn,this._b=-Jt/wn,this._c=-sn/wn,this._d=$t/wn,this._tx=(sn*fn-ln*cn)/wn,this._ty=(Jt*cn-$t*fn)/wn,_n=this),_n},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new en(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var $t=this._a*this._d-this._c*this._b;return $t&&!isNaN($t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function($t,Jt,sn){return arguments.length<3?this._transformPoint(Ft.read(arguments)):this._transformCoordinates($t,Jt,sn)},_transformPoint:function($t,Jt,sn){var ln=$t.x,cn=$t.y;return Jt||(Jt=new Ft),Jt._set(ln*this._a+cn*this._c+this._tx,ln*this._b+cn*this._d+this._ty,sn)},_transformCoordinates:function($t,Jt,sn){for(var ln=0,cn=2*sn;ln<cn;ln+=2){var fn=$t[ln],wn=$t[ln+1];Jt[ln]=fn*this._a+wn*this._c+this._tx,Jt[ln+1]=fn*this._b+wn*this._d+this._ty}return Jt},_transformCorners:function($t){var Jt=$t.x,sn=$t.y,ln=Jt+$t.width,cn=sn+$t.height,fn=[Jt,sn,ln,sn,ln,cn,Jt,cn];return this._transformCoordinates(fn,fn,4)},_transformBounds:function($t,Jt,sn){for(var ln=this._transformCorners($t),cn=ln.slice(0,2),fn=cn.slice(),wn=2;wn<8;wn++){var _n=ln[wn],Tn=wn&1;_n<cn[Tn]?cn[Tn]=_n:_n>fn[Tn]&&(fn[Tn]=_n)}return Jt||(Jt=new zt),Jt._set(cn[0],cn[1],fn[0]-cn[0],fn[1]-cn[1],sn)},inverseTransform:function(){return this._inverseTransform(Ft.read(arguments))},_inverseTransform:function($t,Jt,sn){var ln=this._a,cn=this._b,fn=this._c,wn=this._d,_n=this._tx,Tn=this._ty,Nn=ln*wn-cn*fn,Bn=null;if(Nn&&!isNaN(Nn)&&isFinite(_n)&&isFinite(Tn)){var Hn=$t.x-this._tx,Fn=$t.y-this._ty;Jt||(Jt=new Ft),Bn=Jt._set((Hn*wn-Fn*fn)/Nn,(Fn*ln-Hn*cn)/Nn,sn)}return Bn},decompose:function(){var $t=this._a,Jt=this._b,sn=this._c,ln=this._d,cn=$t*ln-Jt*sn,fn=Math.sqrt,wn=Math.atan2,_n=180/Math.PI,Tn,Nn,Bn;if($t!==0||Jt!==0){var Hn=fn($t*$t+Jt*Jt);Tn=Math.acos($t/Hn)*(Jt>0?1:-1),Nn=[Hn,cn/Hn],Bn=[wn($t*sn+Jt*ln,Hn*Hn),0]}else if(sn!==0||ln!==0){var Fn=fn(sn*sn+ln*ln);Tn=Math.asin(sn/Fn)*(ln>0?1:-1),Nn=[cn/Fn,Fn],Bn=[0,wn($t*sn+Jt*ln,Fn*Fn)]}else Tn=0,Bn=Nn=[0,0];return{translation:this.getTranslation(),rotation:Tn*_n,scaling:new Ft(Nn),skewing:new Ft(Bn[0]*_n,Bn[1]*_n)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new Ft(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function($t){this.isIdentity()||$t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},ct.each(["a","b","c","d","tx","ty"],function($t){var Jt=ct.capitalize($t),sn="_"+$t;this["get"+Jt]=function(){return this[sn]},this["set"+Jt]=function(ln){this[sn]=ln,this._changed()}},{})),tn=ct.extend({_class:"Line",initialize:function(Jt,sn,ln,cn,fn){var wn=!1;arguments.length>=4?(this._px=Jt,this._py=sn,this._vx=ln,this._vy=cn,wn=fn):(this._px=Jt.x,this._py=Jt.y,this._vx=sn.x,this._vy=sn.y,wn=ln),wn||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new Ft(this._px,this._py)},getVector:function(){return new Ft(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function($t,Jt){return tn.intersect(this._px,this._py,this._vx,this._vy,$t._px,$t._py,$t._vx,$t._vy,!0,Jt)},getSide:function($t,Jt){return tn.getSide(this._px,this._py,this._vx,this._vy,$t.x,$t.y,!0,Jt)},getDistance:function($t){return Math.abs(this.getSignedDistance($t))},getSignedDistance:function($t){return tn.getSignedDistance(this._px,this._py,this._vx,this._vy,$t.x,$t.y,!0)},isCollinear:function($t){return Ft.isCollinear(this._vx,this._vy,$t._vx,$t._vy)},isOrthogonal:function($t){return Ft.isOrthogonal(this._vx,this._vy,$t._vx,$t._vy)},statics:{intersect:function($t,Jt,sn,ln,cn,fn,wn,_n,Tn,Nn){Tn||(sn-=$t,ln-=Jt,wn-=cn,_n-=fn);var Bn=sn*_n-ln*wn;if(!Rt.isMachineZero(Bn)){var Hn=$t-cn,Fn=Jt-fn,jn=(wn*Fn-_n*Hn)/Bn,Jn=(sn*Fn-ln*Hn)/Bn,Wn=1e-12,Kn=-Wn,zn=1+Wn;if(Nn||Kn<jn&&jn<zn&&Kn<Jn&&Jn<zn)return Nn||(jn=jn<=0?0:jn>=1?1:jn),new Ft($t+jn*sn,Jt+jn*ln)}},getSide:function($t,Jt,sn,ln,cn,fn,wn,_n){wn||(sn-=$t,ln-=Jt);var Tn=cn-$t,Nn=fn-Jt,Bn=Tn*ln-Nn*sn;return!_n&&Rt.isMachineZero(Bn)&&(Bn=(Tn*sn+Tn*sn)/(sn*sn+ln*ln),Bn>=0&&Bn<=1&&(Bn=0)),Bn<0?-1:Bn>0?1:0},getSignedDistance:function($t,Jt,sn,ln,cn,fn,wn){return wn||(sn-=$t,ln-=Jt),sn===0?ln>0?cn-$t:$t-cn:ln===0?sn<0?fn-Jt:Jt-fn:((cn-$t)*ln-(fn-Jt)*sn)/(ln>sn?ln*Math.sqrt(1+sn*sn/(ln*ln)):sn*Math.sqrt(1+ln*ln/(sn*sn)))},getDistance:function($t,Jt,sn,ln,cn,fn,wn){return Math.abs(tn.getSignedDistance($t,Jt,sn,ln,cn,fn,wn))}}}),on=St.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(Jt){St.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new _r(null,null,this),this._view=Ir.create(this,Jt||zr.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function($t,Jt){return ct.serialize(this._children,$t,!0,Jt)},_changed:function($t,Jt){if($t&1){var sn=this._view;sn&&(sn._needsUpdate=!0,!sn._requested&&sn._autoUpdate&&sn.requestUpdate())}var ln=this._changes;if(ln&&Jt){var cn=this._changesById,fn=Jt._id,wn=cn[fn];wn?wn.flags|=$t:ln.push(cn[fn]={item:Jt,flags:$t})}},clear:function(){for(var $t=this._children,Jt=$t.length-1;Jt>=0;Jt--)$t[Jt].remove()},isEmpty:function(){return!this._children.length},remove:function $t(){return $t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function($t){this._currentStyle.set($t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new dn({project:this,insert:!0})},getSymbolDefinitions:function(){var $t=[],Jt={};return this.getItems({class:bn,match:function(sn){var ln=sn._definition,cn=ln._id;return Jt[cn]||(Jt[cn]=!0,$t.push(ln)),!1}}),$t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var $t=this._selectionItems,Jt=[];for(var sn in $t){var ln=$t[sn],cn=ln._selection;cn&1&&ln.isInserted()?Jt.push(ln):cn||this._updateSelection(ln)}return Jt},_updateSelection:function($t){var Jt=$t._id,sn=this._selectionItems;$t._selection?sn[Jt]!==$t&&(this._selectionCount++,sn[Jt]=$t):sn[Jt]===$t&&(this._selectionCount--,delete sn[Jt])},selectAll:function(){for(var $t=this._children,Jt=0,sn=$t.length;Jt<sn;Jt++)$t[Jt].setFullySelected(!0)},deselectAll:function(){var $t=this._selectionItems;for(var Jt in $t)$t[Jt].setFullySelected(!1)},addLayer:function($t){return this.insertLayer(et,$t)},insertLayer:function($t,Jt){if(Jt instanceof dn){Jt._remove(!1,!0),ct.splice(this._children,[Jt],$t,0),Jt._setProject(this,!0);var sn=Jt._name;sn&&Jt.setName(sn),this._changes&&Jt._changed(5),this._activeLayer||(this._activeLayer=Jt)}else Jt=null;return Jt},_insertItem:function($t,Jt,sn){return Jt=this.insertLayer($t,Jt)||(this._activeLayer||this._insertItem(et,new dn(an.NO_INSERT),!0)).insertChild($t,Jt),sn&&Jt.activate&&Jt.activate(),Jt},getItems:function($t){return an._getItems(this,$t)},getItem:function($t){return an._getItems(this,$t,null,null,!0)[0]||null},importJSON:function($t){this.activate();var Jt=this._activeLayer;return ct.importJSON($t,Jt&&Jt.isEmpty()&&Jt)},removeOn:function($t){var Jt=this._removeSets;if(Jt){$t==="mouseup"&&(Jt.mousedrag=null);var sn=Jt[$t];if(sn){for(var ln in sn){var cn=sn[ln];for(var fn in Jt){var wn=Jt[fn];wn&&wn!=sn&&delete wn[cn._id]}cn.remove()}Jt[$t]=null}}},draw:function($t,Jt,sn){this._updateVersion++,$t.save(),Jt.applyToContext($t);for(var ln=this._children,cn=new ct({offset:new Ft(0,0),pixelRatio:sn,viewMatrix:Jt.isIdentity()?null:Jt,matrices:[new en],updateMatrix:!0}),fn=0,wn=ln.length;fn<wn;fn++)ln[fn].draw($t,cn);if($t.restore(),this._selectionCount>0){$t.save(),$t.strokeWidth=1;var _n=this._selectionItems,Tn=this._scope.settings.handleSize,Nn=this._updateVersion;for(var Bn in _n)_n[Bn]._drawSelection($t,Jt,Tn,_n,Nn);$t.restore()}}}),an=ct.extend(dt,{statics:{extend:function $t(Jt){return Jt._serializeFields&&(Jt._serializeFields=ct.set({},this.prototype._serializeFields,Jt._serializeFields)),$t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new en,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var $t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return ct.each($t,function(Jt){this._events[Jt]={install:function(sn){this.getView()._countItemEvent(sn,1)},uninstall:function(sn){this.getView()._countItemEvent(sn,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:$t}})},{initialize:function(){},_initialize:function($t,Jt){var sn=$t&&ct.isPlainObject($t),ln=sn&&$t.internal===!0,cn=this._matrix=new en,fn=sn&&$t.project||Kr.project,wn=Kr.settings;return this._id=ln?null:jt.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&wn.applyMatrix,Jt&&cn.translate(Jt),cn._owner=this,this._style=new _r(fn._currentStyle,this,fn),ln||sn&&$t.insert==!1||!wn.insertItems&&!(sn&&$t.insert==!0)?this._setProject(fn):(sn&&$t.parent||fn)._insertItem(et,this,!0),sn&&$t!==an.NO_INSERT&&$t!==an.INSERT&&this.set($t,{internal:!0,insert:!0,project:!0,parent:!0}),sn},_serialize:function($t,Jt){var sn={},ln=this;function cn(fn){for(var wn in fn){var _n=ln[wn];ct.equals(_n,wn==="leading"?fn.fontSize*1.2:fn[wn])||(sn[wn]=ct.serialize(_n,$t,wn!=="data",Jt))}}return cn(this._serializeFields),this instanceof un||cn(this._style._defaults),[this._class,sn]},_changed:function($t){var Jt=this._symbol,sn=this._parent||Jt,ln=this._project;$t&8&&(this._bounds=this._position=this._decomposed=et),$t&16&&(this._globalMatrix=et),sn&&$t&72&&an._clearBoundsCache(sn),$t&2&&an._clearBoundsCache(this),ln&&ln._changed($t,this),Jt&&Jt._changed($t)},getId:function(){return this._id},getName:function(){return this._name},setName:function($t){if(this._name&&this._removeNamed(),$t===+$t+"")throw new Error("Names consisting only of numbers are not supported.");var Jt=this._getOwner();if($t&&Jt){var sn=Jt._children,ln=Jt._namedChildren;(ln[$t]=ln[$t]||[]).push(this),$t in sn||(sn[$t]=this)}this._name=$t||et,this._changed(256)},getStyle:function(){return this._style},setStyle:function($t){this.getStyle().set($t)}},ct.each(["locked","visible","blendMode","opacity","guide"],function($t){var Jt=ct.capitalize($t),sn="_"+$t,ln={locked:256,visible:265};this["get"+Jt]=function(){return this[sn]},this["set"+Jt]=function(cn){cn!=this[sn]&&(this[sn]=cn,this._changed(ln[$t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function($t){if($t!==this._selection){this._selection=$t;var Jt=this._project;Jt&&(Jt._updateSelection(this),this._changed(257))}},_changeSelection:function($t,Jt){var sn=this._selection;this.setSelection(Jt?sn|$t:sn&~$t)},isSelected:function(){if(this._selectChildren){for(var $t=this._children,Jt=0,sn=$t.length;Jt<sn;Jt++)if($t[Jt].isSelected())return!0}return!!(this._selection&1)},setSelected:function($t){if(this._selectChildren)for(var Jt=this._children,sn=0,ln=Jt.length;sn<ln;sn++)Jt[sn].setSelected($t);this._changeSelection(1,$t)},isFullySelected:function(){var $t=this._children,Jt=!!(this._selection&1);if($t&&Jt){for(var sn=0,ln=$t.length;sn<ln;sn++)if(!$t[sn].isFullySelected())return!1;return!0}return Jt},setFullySelected:function($t){var Jt=this._children;if(Jt)for(var sn=0,ln=Jt.length;sn<ln;sn++)Jt[sn].setFullySelected($t);this._changeSelection(1,$t)},isClipMask:function(){return this._clipMask},setClipMask:function($t){this._clipMask!=($t=!!$t)&&(this._clipMask=$t,$t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function($t){this._data=$t},getPosition:function($t){var Jt=$t?Ft:Bt,sn=this._position||(this._position=this._getPositionFromBounds());return new Jt(sn.x,sn.y,this,"setPosition")},setPosition:function(){this.translate(Ft.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function($t){return this._pivot?this._matrix._transformPoint(this._pivot):($t||this.getBounds()).getCenter(!0)},getPivot:function(){var $t=this._pivot;return $t?new Bt($t.x,$t.y,this,"setPivot"):null},setPivot:function(){this._pivot=Ft.read(arguments,0,{clone:!0,readNull:!0}),this._position=et}},ct.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function($t,Jt){this[Jt]=function(sn){return this.getBounds(sn,$t)}},{beans:!0,getBounds:function($t,Jt){var sn=Jt||$t instanceof en,ln=ct.set({},sn?Jt:$t,this._boundsOptions);(!ln.stroke||this.getStrokeScaling())&&(ln.cacheItem=this);var cn=this._getCachedBounds(sn&&$t,ln).rect;return arguments.length?cn:new Kt(cn.x,cn.y,cn.width,cn.height,this,"setBounds")},setBounds:function(){var $t=zt.read(arguments),Jt=this.getBounds(),sn=this._matrix,ln=new en,cn=$t.getCenter();ln.translate(cn),($t.width!=Jt.width||$t.height!=Jt.height)&&(sn.isInvertible()||(sn.set(sn._backup||new en().translate(sn.getTranslation())),Jt=this.getBounds()),ln.scale(Jt.width!==0?$t.width/Jt.width:0,Jt.height!==0?$t.height/Jt.height:0)),cn=Jt.getCenter(),ln.translate(-cn.x,-cn.y),this.transform(ln)},_getBounds:function($t,Jt){var sn=this._children;return!sn||!sn.length?new zt:(an._updateBoundsCache(this,Jt.cacheItem),an._getBounds(sn,$t,Jt))},_getBoundsCacheKey:function($t,Jt){return[$t.stroke?1:0,$t.handle?1:0,Jt?1:0].join("")},_getCachedBounds:function($t,Jt,sn){$t=$t&&$t._orNullIfIdentity();var ln=Jt.internal&&!sn,cn=Jt.cacheItem,fn=ln?null:this._matrix._orNullIfIdentity(),wn=cn&&(!$t||$t.equals(fn))&&this._getBoundsCacheKey(Jt,ln),_n=this._bounds;if(an._updateBoundsCache(this._parent||this._symbol,cn),wn&&_n&&wn in _n){var Tn=_n[wn];return{rect:Tn.rect.clone(),nonscaling:Tn.nonscaling}}var Nn=this._getBounds($t||fn,Jt),Bn=Nn.rect||Nn,Hn=this._style,Fn=Nn.nonscaling||Hn.hasStroke()&&!Hn.getStrokeScaling();if(wn){_n||(this._bounds=_n={});var Tn=_n[wn]={rect:Bn.clone(),nonscaling:Fn,internal:ln}}return{rect:Bn,nonscaling:Fn}},_getStrokeMatrix:function($t,Jt){var sn=this.getStrokeScaling()?null:Jt&&Jt.internal?this:this._parent||this._symbol&&this._symbol._item,ln=sn?sn.getViewMatrix().invert():$t;return ln&&ln._shiftless()},statics:{_updateBoundsCache:function($t,Jt){if($t&&Jt){var sn=Jt._id,ln=$t._boundsCache=$t._boundsCache||{ids:{},list:[]};ln.ids[sn]||(ln.list.push(Jt),ln.ids[sn]=Jt)}},_clearBoundsCache:function($t){var Jt=$t._boundsCache;if(Jt){$t._bounds=$t._position=$t._boundsCache=et;for(var sn=0,ln=Jt.list,cn=ln.length;sn<cn;sn++){var fn=ln[sn];fn!==$t&&(fn._bounds=fn._position=et,fn._boundsCache&&an._clearBoundsCache(fn))}}},_getBounds:function($t,Jt,sn){var ln=1/0,cn=-ln,fn=ln,wn=cn,_n=!1;sn=sn||{};for(var Tn=0,Nn=$t.length;Tn<Nn;Tn++){var Bn=$t[Tn];if(Bn._visible&&!Bn.isEmpty(!0)){var Hn=Bn._getCachedBounds(Jt&&Jt.appended(Bn._matrix),sn,!0),Fn=Hn.rect;ln=Math.min(Fn.x,ln),fn=Math.min(Fn.y,fn),cn=Math.max(Fn.x+Fn.width,cn),wn=Math.max(Fn.y+Fn.height,wn),Hn.nonscaling&&(_n=!0)}}return{rect:isFinite(ln)?new zt(ln,fn,cn-ln,wn-fn):new zt,nonscaling:_n}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var $t=this._decompose();return $t?$t.rotation:0},setRotation:function($t){var Jt=this.getRotation();if(Jt!=null&&$t!=null){var sn=this._decomposed;this.rotate($t-Jt),sn&&(sn.rotation=$t,this._decomposed=sn)}},getScaling:function(){var $t=this._decompose(),Jt=$t&&$t.scaling;return new Bt(Jt?Jt.x:1,Jt?Jt.y:1,this,"setScaling")},setScaling:function(){var $t=this.getScaling(),Jt=Ft.read(arguments,0,{clone:!0,readNull:!0});if($t&&Jt&&!$t.equals(Jt)){var sn=this.getRotation(),ln=this._decomposed,cn=new en,fn=Rt.isZero;if(fn($t.x)||fn($t.y))cn.translate(ln.translation),sn&&cn.rotate(sn),cn.scale(Jt.x,Jt.y),this._matrix.set(cn);else{var wn=this.getPosition(!0);cn.translate(wn),sn&&cn.rotate(sn),cn.scale(Jt.x/$t.x,Jt.y/$t.y),sn&&cn.rotate(-sn),cn.translate(wn.negate()),this.transform(cn)}ln&&(ln.scaling=Jt,this._decomposed=ln)}},getMatrix:function(){return this._matrix},setMatrix:function(){var $t=this._matrix;$t.set.apply($t,arguments)},getGlobalMatrix:function($t){var Jt=this._globalMatrix;if(Jt)for(var sn=this._parent,ln=[];sn;){if(!sn._globalMatrix){Jt=null;for(var cn=0,fn=ln.length;cn<fn;cn++)ln[cn]._globalMatrix=null;break}ln.push(sn),sn=sn._parent}if(!Jt){Jt=this._globalMatrix=this._matrix.clone();var sn=this._parent;sn&&Jt.prepend(sn.getGlobalMatrix(!0))}return $t?Jt:Jt.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function($t){(this._applyMatrix=this._canApplyMatrix&&!!$t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function($t,Jt){if(this._project!==$t){this._project&&this._installEvents(!1),this._project=$t;for(var sn=this._children,ln=0,cn=sn&&sn.length;ln<cn;ln++)sn[ln]._setProject($t);Jt=!0}Jt&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function $t(Jt){$t.base.call(this,Jt);for(var sn=this._children,ln=0,cn=sn&&sn.length;ln<cn;ln++)sn[ln]._installEvents(Jt)},getLayer:function(){for(var $t=this;$t=$t._parent;)if($t instanceof dn)return $t;return null},getParent:function(){return this._parent},setParent:function($t){return $t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function($t){this.removeChildren(),this.addChildren($t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var $t=this._getOwner();return $t&&$t._children[this._index+1]||null},getPreviousSibling:function(){var $t=this._getOwner();return $t&&$t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function($t){var Jt=this._parent,sn=Jt&&Jt._children;sn&&Jt.insertChildren($t in sn?$t:et,[this])},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._style.equals($t._style)&&this._matrix.equals($t._matrix)&&this._locked===$t._locked&&this._visible===$t._visible&&this._blendMode===$t._blendMode&&this._opacity===$t._opacity&&this._clipMask===$t._clipMask&&this._guide===$t._guide&&this._equals($t)||!1},_equals:function($t){return ct.equals(this._children,$t._children)},clone:function($t){var Jt=new this.constructor(an.NO_INSERT),sn=this._children,ln=ct.pick($t?$t.insert:et,$t===et||$t===!0),cn=ct.pick($t?$t.deep:et,!0);sn&&Jt.copyAttributes(this),(!sn||cn)&&Jt.copyContent(this),sn||Jt.copyAttributes(this),ln&&Jt.insertAbove(this);var fn=this._name,wn=this._parent;if(fn&&wn){for(var sn=wn._children,_n=fn,Tn=1;sn[fn];)fn=_n+" "+Tn++;fn!==_n&&Jt.setName(fn)}return Jt},copyContent:function($t){for(var Jt=$t._children,sn=0,ln=Jt&&Jt.length;sn<ln;sn++)this.addChild(Jt[sn].clone(!1),!0)},copyAttributes:function($t,Jt){this.setStyle($t._style);for(var sn=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],ln=0,cn=sn.length;ln<cn;ln++){var fn=sn[ln];$t.hasOwnProperty(fn)&&(this[fn]=$t[fn])}Jt||this._matrix.set($t._matrix,!0),this.setApplyMatrix($t._applyMatrix),this.setPivot($t._pivot),this.setSelection($t._selection);var wn=$t._data,_n=$t._name;this._data=wn?ct.clone(wn):null,_n&&this.setName(_n)},rasterize:function($t,Jt){var sn,ln,cn;ct.isPlainObject($t)?(sn=$t.resolution,ln=$t.insert,cn=$t.raster):(sn=$t,ln=Jt),cn||(cn=new mn(an.NO_INSERT));var fn=this.getStrokeBounds(),wn=(sn||this.getView().getResolution())/72,_n=fn.getTopLeft().floor(),Tn=fn.getBottomRight().ceil(),Nn=new Ht(Tn.subtract(_n)),Bn=Nn.multiply(wn);if(cn.setSize(Bn,!0),!Bn.isZero()){var Hn=cn.getContext(!0),Fn=new en().scale(wn).translate(_n.negate());Hn.save(),Fn.applyToContext(Hn),this.draw(Hn,new ct({matrices:[Fn]})),Hn.restore()}return cn._matrix.set(new en().translate(_n.add(Nn.divide(2))).scale(1/wn)),(ln===et||ln)&&cn.insertAbove(this),cn},contains:function(){var $t=this._matrix;return $t.isInvertible()&&!!this._contains($t._inverseTransform(Ft.read(arguments)))},_contains:function($t){var Jt=this._children;if(Jt){for(var sn=Jt.length-1;sn>=0;sn--)if(Jt[sn].contains($t))return!0;return!1}return $t.isInside(this.getInternalBounds())},isInside:function(){return zt.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new vn.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function($t,Jt){return $t instanceof an?this._asPathItem().getIntersections($t._asPathItem(),null,Jt,!0).length>0:!1}},new function(){function $t(){var ln=arguments;return this._hitTest(Ft.read(ln),kn.getOptions(ln))}function Jt(){var ln=arguments,cn=Ft.read(ln),fn=kn.getOptions(ln),wn=[];return this._hitTest(cn,new ct({all:wn},fn)),wn}function sn(ln,cn,fn,wn){var _n=this._children;if(_n)for(var Tn=_n.length-1;Tn>=0;Tn--){var Nn=_n[Tn],Bn=Nn!==wn&&Nn._hitTest(ln,cn,fn);if(Bn&&!cn.all)return Bn}return null}return on.inject({hitTest:$t,hitTestAll:Jt,_hitTest:sn}),{hitTest:$t,hitTestAll:Jt,_hitTestChildren:sn}},{_hitTest:function($t,Jt,sn){if(this._locked||!this._visible||this._guide&&!Jt.guides||this.isEmpty())return null;var ln=this._matrix,cn=sn?sn.appended(ln):this.getGlobalMatrix().prepend(this.getView()._matrix),fn=Math.max(Jt.tolerance,1e-12),wn=Jt._tolerancePadding=new Ht(vn._getStrokePadding(fn,ln._shiftless().invert()));if($t=ln._inverseTransform($t),!$t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(wn.multiply(2))._containsPoint($t))return null;var _n=!(Jt.guides&&!this._guide||Jt.selected&&!this.isSelected()||Jt.type&&Jt.type!==ct.hyphenate(this._class)||Jt.class&&!(this instanceof Jt.class)),Tn=Jt.match,Nn=this,Bn,Hn;function Fn(Dn){return Dn&&Tn&&!Tn(Dn)&&(Dn=null),Dn&&Jt.all&&Jt.all.push(Dn),Dn}function jn(Dn,qn){var Zn=qn?Bn["get"+qn]():Nn.getPosition();if($t.subtract(Zn).divide(wn).length<=1)return new kn(Dn,Nn,{name:qn?ct.hyphenate(qn):Dn,point:Zn})}var Jn=Jt.position,Wn=Jt.center,Kn=Jt.bounds;if(_n&&this._parent&&(Jn||Wn||Kn)){if((Wn||Kn)&&(Bn=this.getInternalBounds()),Hn=Jn&&jn("position")||Wn&&jn("center","Center"),!Hn&&Kn)for(var zn=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Gn=0;Gn<8&&!Hn;Gn++)Hn=jn("bounds",zn[Gn]);Hn=Fn(Hn)}return Hn||(Hn=this._hitTestChildren($t,Jt,cn)||_n&&Fn(this._hitTestSelf($t,Jt,cn,this.getStrokeScaling()?null:cn._shiftless().invert()))||null),Hn&&Hn.point&&(Hn.point=ln.transform(Hn.point)),Hn},_hitTestSelf:function($t,Jt){if(Jt.fill&&this.hasFill()&&this._contains($t))return new kn("fill",this)},matches:function($t,Jt){function sn(wn,_n){for(var Tn in wn)if(wn.hasOwnProperty(Tn)){var Nn=wn[Tn],Bn=_n[Tn];if(ct.isPlainObject(Nn)&&ct.isPlainObject(Bn)){if(!sn(Nn,Bn))return!1}else if(!ct.equals(Nn,Bn))return!1}return!0}var ln=typeof $t;if(ln==="object"){for(var cn in $t)if($t.hasOwnProperty(cn)&&!this.matches(cn,$t[cn]))return!1;return!0}else{if(ln==="function")return $t(this);if($t==="match")return Jt(this);var fn=/^(empty|editable)$/.test($t)?this["is"+ct.capitalize($t)]():$t==="type"?ct.hyphenate(this._class):this[$t];if($t==="class"){if(typeof Jt=="function")return this instanceof Jt;fn=this._class}if(typeof Jt=="function")return!!Jt(fn);if(Jt){if(Jt.test)return Jt.test(fn);if(ct.isPlainObject(Jt))return sn(Jt,fn)}return ct.equals(fn,Jt)}},getItems:function($t){return an._getItems(this,$t,this._matrix)},getItem:function($t){return an._getItems(this,$t,this._matrix,null,!0)[0]||null},statics:{_getItems:function $t(Jt,sn,ln,cn,fn){if(!cn){var wn=typeof sn=="object"&&sn,_n=wn&&wn.overlapping,Tn=wn&&wn.inside,Nn=_n||Tn,Fn=Nn&&zt.read([Nn]);cn={items:[],recursive:wn&&wn.recursive!==!1,inside:!!Tn,overlapping:!!_n,rect:Fn,path:_n&&new vn.Rectangle({rectangle:Fn,insert:!1})},wn&&(sn=ct.filter({},sn,{recursive:!0,inside:!0,overlapping:!0}))}var Bn=Jt._children,Hn=cn.items,Fn=cn.rect;ln=Fn&&(ln||new en);for(var jn=0,Jn=Bn&&Bn.length;jn<Jn;jn++){var Wn=Bn[jn],Kn=ln&&ln.appended(Wn._matrix),zn=!0;if(Fn){var Nn=Wn.getBounds(Kn);if(!Fn.intersects(Nn))continue;Fn.contains(Nn)||cn.overlapping&&(Nn.contains(Fn)||cn.path.intersects(Wn,Kn))||(zn=!1)}if(zn&&Wn.matches(sn)&&(Hn.push(Wn),fn)||(cn.recursive!==!1&&$t(Wn,sn,Kn,cn,fn),fn&&Hn.length>0))break}return Hn}}},{importJSON:function($t){var Jt=ct.importJSON($t,this);return Jt!==this?this.addChild(Jt):Jt},addChild:function($t){return this.insertChild(et,$t)},insertChild:function($t,Jt){var sn=Jt?this.insertChildren($t,[Jt]):null;return sn&&sn[0]},addChildren:function($t){return this.insertChildren(this._children.length,$t)},insertChildren:function($t,Jt){var sn=this._children;if(sn&&Jt&&Jt.length>0){Jt=ct.slice(Jt);for(var ln={},cn=Jt.length-1;cn>=0;cn--){var fn=Jt[cn],wn=fn&&fn._id;!fn||ln[wn]?Jt.splice(cn,1):(fn._remove(!1,!0),ln[wn]=!0)}ct.splice(sn,Jt,$t,0);for(var _n=this._project,Tn=_n._changes,cn=0,Nn=Jt.length;cn<Nn;cn++){var fn=Jt[cn],Bn=fn._name;fn._parent=this,fn._setProject(_n,!0),Bn&&fn.setName(Bn),Tn&&fn._changed(5)}this._changed(11)}else Jt=null;return Jt},_insertItem:"#insertChild",_insertAt:function($t,Jt){var sn=$t&&$t._getOwner(),ln=$t!==this&&sn?this:null;return ln&&(ln._remove(!1,!0),sn._insertItem($t._index+Jt,ln)),ln},insertAbove:function($t){return this._insertAt($t,1)},insertBelow:function($t){return this._insertAt($t,0)},sendToBack:function(){var $t=this._getOwner();return $t?$t._insertItem(0,this):null},bringToFront:function(){var $t=this._getOwner();return $t?$t._insertItem(et,this):null},appendTop:"#addChild",appendBottom:function($t){return this.insertChild(0,$t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function($t){return $t._insertItem(et,this)},copyTo:function($t){return this.clone(!1).addTo($t)},reduce:function($t){var Jt=this._children;if(Jt&&Jt.length===1){var sn=Jt[0].reduce($t);return this._parent?(sn.insertAbove(this),this.remove()):sn.remove(),sn}return this},_removeNamed:function(){var $t=this._getOwner();if($t){var Jt=$t._children,sn=$t._namedChildren,ln=this._name,cn=sn[ln],fn=cn?cn.indexOf(this):-1;fn!==-1&&(Jt[ln]==this&&delete Jt[ln],cn.splice(fn,1),cn.length?Jt[ln]=cn[0]:delete sn[ln])}},_remove:function($t,Jt){var sn=this._getOwner(),ln=this._project,cn=this._index;return this._style&&this._style._dispose(),sn?(this._name&&this._removeNamed(),cn!=null&&(ln._activeLayer===this&&(ln._activeLayer=this.getNextSibling()||this.getPreviousSibling()),ct.splice(sn._children,null,cn,1)),this._installEvents(!1),$t&&ln._changes&&this._changed(5),Jt&&sn._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function($t){var Jt=$t&&$t.insertBelow(this);return Jt&&this.remove(),Jt},removeChildren:function($t,Jt){if(!this._children)return null;$t=$t||0,Jt=ct.pick(Jt,this._children.length);for(var sn=ct.splice(this._children,null,$t,Jt-$t),ln=sn.length-1;ln>=0;ln--)sn[ln]._remove(!0,!1);return sn.length>0&&this._changed(11),sn},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var $t=0,Jt=this._children.length;$t<Jt;$t++)this._children[$t]._index=$t;this._changed(11)}},isEmpty:function($t){var Jt=this._children,sn=Jt?Jt.length:0;if($t){for(var ln=0;ln<sn;ln++)if(!Jt[ln].isEmpty($t))return!1;return!0}return!sn},isEditable:function(){for(var $t=this;$t;){if(!$t._visible||$t._locked)return!1;$t=$t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function($t){function Jt(wn){var _n=[];do _n.unshift(wn);while(wn=wn._parent);return _n}for(var sn=Jt(this),ln=Jt($t),cn=0,fn=Math.min(sn.length,ln.length);cn<fn;cn++)if(sn[cn]!=ln[cn])return sn[cn]._index<ln[cn]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function($t){return this._getOrder($t)===-1},isBelow:function($t){return this._getOrder($t)===1},isParent:function($t){return this._parent===$t},isChild:function($t){return $t&&$t._parent===this},isDescendant:function($t){for(var Jt=this;Jt=Jt._parent;)if(Jt===$t)return!0;return!1},isAncestor:function($t){return $t?$t.isDescendant(this):!1},isSibling:function($t){return this._parent===$t._parent},isGroupedWith:function($t){for(var Jt=this._parent;Jt;){if(Jt._parent&&/^(Group|Layer|CompoundPath)$/.test(Jt._class)&&$t.isDescendant(Jt))return!0;Jt=Jt._parent}return!1}},ct.each(["rotate","scale","shear","skew"],function($t){var Jt=$t==="rotate";this[$t]=function(){var sn=arguments,ln=(Jt?ct:Ft).read(sn),cn=Ft.read(sn,0,{readNull:!0});return this.transform(new en()[$t](ln,cn||this.getPosition(!0)))}},{translate:function(){var $t=new en;return this.transform($t.translate.apply($t,arguments))},transform:function($t,Jt,sn){var ln=this._matrix,cn=$t&&!$t.isIdentity(),fn=sn&&this._canApplyMatrix||this._applyMatrix&&(cn||!ln.isIdentity()||Jt&&this._children);if(!cn&&!fn)return this;if(cn){!$t.isInvertible()&&ln.isInvertible()&&(ln._backup=ln.getValues()),ln.prepend($t,!0);var wn=this._style,_n=wn.getFillColor(!0),Tn=wn.getStrokeColor(!0);_n&&_n.transform($t),Tn&&Tn.transform($t)}if(fn&&(fn=this._transformContent(ln,Jt,sn))){var Nn=this._pivot;Nn&&ln._transformPoint(Nn,Nn,!0),ln.reset(!0),sn&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Bn=this._bounds,Hn=this._position;(cn||fn)&&this._changed(25);var Fn=cn&&Bn&&$t.decompose();if(Fn&&Fn.skewing.isZero()&&Fn.rotation%90===0){for(var jn in Bn){var Jn=Bn[jn];if(Jn.nonscaling)delete Bn[jn];else if(fn||!Jn.internal){var Wn=Jn.rect;$t._transformBounds(Wn,Wn)}}this._bounds=Bn;var Kn=Bn[this._getBoundsCacheKey(this._boundsOptions||{})];Kn&&(this._position=this._getPositionFromBounds(Kn.rect))}else cn&&Hn&&this._pivot&&(this._position=$t._transformPoint(Hn,Hn));return this},_transformContent:function($t,Jt,sn){var ln=this._children;if(ln){for(var cn=0,fn=ln.length;cn<fn;cn++)ln[cn].transform($t,Jt,sn);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(Ft.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(Ft.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(Ft.read(arguments))},localToParent:function(){return this._matrix._transformPoint(Ft.read(arguments))},fitBounds:function($t,Jt){$t=zt.read(arguments);var sn=this.getBounds(),ln=sn.height/sn.width,cn=$t.height/$t.width,fn=(Jt?ln>cn:ln<cn)?$t.width/sn.width:$t.height/sn.height,wn=new zt(new Ft,new Ht(sn.width*fn,sn.height*fn));wn.setCenter($t.getCenter()),this.setBounds(wn)}}),{_setStyles:function($t,Jt,sn){var ln=this._style,cn=this._matrix;if(ln.hasFill()&&($t.fillStyle=ln.getFillColor().toCanvasStyle($t,cn)),ln.hasStroke()){$t.strokeStyle=ln.getStrokeColor().toCanvasStyle($t,cn),$t.lineWidth=ln.getStrokeWidth();var fn=ln.getStrokeJoin(),wn=ln.getStrokeCap(),_n=ln.getMiterLimit();if(fn&&($t.lineJoin=fn),wn&&($t.lineCap=wn),_n&&($t.miterLimit=_n),Kr.support.nativeDash){var Tn=ln.getDashArray(),Nn=ln.getDashOffset();Tn&&Tn.length&&("setLineDash"in $t?($t.setLineDash(Tn),$t.lineDashOffset=Nn):($t.mozDash=Tn,$t.mozDashOffset=Nn))}}if(ln.hasShadow()){var Bn=Jt.pixelRatio||1,Hn=sn._shiftless().prepend(new en().scale(Bn,Bn)),Fn=Hn.transform(new Ft(ln.getShadowBlur(),0)),jn=Hn.transform(this.getShadowOffset());$t.shadowColor=ln.getShadowColor().toCanvasStyle($t),$t.shadowBlur=Fn.getLength(),$t.shadowOffsetX=jn.x,$t.shadowOffsetY=jn.y}},draw:function($t,Jt,sn){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var ln=Jt.matrices,cn=Jt.viewMatrix,fn=this._matrix,wn=ln[ln.length-1].appended(fn);if(wn.isInvertible()){cn=cn?cn.appended(wn):wn,ln.push(wn),Jt.updateMatrix&&(this._globalMatrix=wn);var _n=this._blendMode,Tn=Rt.clamp(this._opacity,0,1),Nn=_n==="normal",Bn=Vr.nativeModes[_n],Hn=Nn&&Tn===1||Jt.dontStart||Jt.clip||(Bn||Nn&&Tn<1)&&this._canComposite(),Fn=Jt.pixelRatio||1,jn,Jn,Wn;if(!Hn){var Kn=this.getStrokeBounds(cn);if(!Kn.width||!Kn.height){ln.pop();return}Wn=Jt.offset,Jn=Jt.offset=Kn.getTopLeft().floor(),jn=$t,$t=zr.getContext(Kn.getSize().ceil().add(1).multiply(Fn)),Fn!==1&&$t.scale(Fn,Fn)}$t.save();var zn=sn?sn.appended(fn):this._canScaleStroke&&!this.getStrokeScaling(!0)&&cn,Gn=!Hn&&Jt.clipItem,Dn=!zn||Gn;if(Hn?($t.globalAlpha=Tn,Bn&&($t.globalCompositeOperation=_n)):Dn&&$t.translate(-Jn.x,-Jn.y),Dn&&(Hn?fn:cn).applyToContext($t),Gn&&Jt.clipItem.draw($t,Jt.extend({clip:!0})),zn){$t.setTransform(Fn,0,0,Fn,0,0);var qn=Jt.offset;qn&&$t.translate(-qn.x,-qn.y)}this._draw($t,Jt,cn,zn),$t.restore(),ln.pop(),Jt.clip&&!Jt.dontFinish&&$t.clip(this.getFillRule()),Hn||(Vr.process(_n,$t,jn,Tn,Jn.subtract(Wn).multiply(Fn)),zr.release($t),Jt.offset=Wn)}}},_isUpdated:function($t){var Jt=this._parent;if(Jt instanceof On)return Jt._isUpdated($t);var sn=this._updateVersion===$t;return!sn&&Jt&&Jt._visible&&Jt._isUpdated($t)&&(this._updateVersion=$t,sn=!0),sn},_drawSelection:function($t,Jt,sn,ln,cn){var fn=this._selection,wn=fn&1,_n=fn&2||wn&&this._selectBounds,Tn=fn&4;if(this._drawSelected||(wn=!1),(wn||_n||Tn)&&this._isUpdated(cn)){var Nn,Bn=this.getSelectedColor(!0)||(Nn=this.getLayer())&&Nn.getSelectedColor(!0),Hn=Jt.appended(this.getGlobalMatrix(!0)),Fn=sn/2;if($t.strokeStyle=$t.fillStyle=Bn?Bn.toCanvasStyle($t):"#009dec",wn&&this._drawSelected($t,Hn,ln),Tn){var jn=this.getPosition(!0),Jn=this._parent,Wn=Jn?Jn.localToGlobal(jn):jn,Kn=Wn.x,zn=Wn.y;$t.beginPath(),$t.arc(Kn,zn,Fn,0,Math.PI*2,!0),$t.stroke();for(var Gn=[[0,-1],[1,0],[0,1],[-1,0]],Dn=Fn,qn=sn+1,Zn=0;Zn<4;Zn++){var nr=Gn[Zn],Yn=nr[0],sr=nr[1];$t.moveTo(Kn+Yn*Dn,zn+sr*Dn),$t.lineTo(Kn+Yn*qn,zn+sr*qn),$t.stroke()}}if(_n){var ur=Hn._transformCorners(this.getInternalBounds());$t.beginPath();for(var Zn=0;Zn<8;Zn++)$t[Zn?"lineTo":"moveTo"](ur[Zn],ur[++Zn]);$t.closePath(),$t.stroke();for(var Zn=0;Zn<8;Zn++)$t.fillRect(ur[Zn]-Fn,ur[++Zn]-Fn,sn,sn)}}},_canComposite:function(){return!1}},ct.each(["down","drag","up","move"],function($t){this["removeOn"+ct.capitalize($t)]=function(){var Jt={};return Jt[$t]=!0,this.removeOn(Jt)}},{removeOn:function($t){for(var Jt in $t)if($t[Jt]){var sn="mouse"+Jt,ln=this._project,cn=ln._removeSets=ln._removeSets||{};cn[sn]=cn[sn]||{},cn[sn][this._id]=this}return this}}),{tween:function($t,Jt,sn){sn||(sn=Jt,Jt=$t,$t=null,sn||(sn=Jt,Jt=null));var ln=sn&&sn.easing,cn=sn&&sn.start,fn=sn!=null&&(typeof sn=="number"?sn:sn.duration),wn=new Lr(this,$t,Jt,fn,ln,cn);function _n(Tn){wn._handleFrame(Tn.time*1e3),wn.running||this.off("frame",_n)}return fn&&this.on("frame",_n),wn},tweenTo:function($t,Jt){return this.tween(null,$t,Jt)},tweenFrom:function($t,Jt){return this.tween($t,null,Jt)}}),un=an.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(Jt){this._children=[],this._namedChildren={},this._initialize(Jt)||this.addChildren(Array.isArray(Jt)?Jt:arguments)},_changed:function $t(Jt){$t.base.call(this,Jt),Jt&2050&&(this._clipItem=et)},_getClipItem:function(){var $t=this._clipItem;if($t===et){$t=null;for(var Jt=this._children,sn=0,ln=Jt.length;sn<ln;sn++)if(Jt[sn]._clipMask){$t=Jt[sn];break}this._clipItem=$t}return $t},isClipped:function(){return!!this._getClipItem()},setClipped:function($t){var Jt=this.getFirstChild();Jt&&Jt.setClipMask($t)},_getBounds:function $t(Jt,sn){var ln=this._getClipItem();return ln?ln._getCachedBounds(ln._matrix.prepended(Jt),ct.set({},sn,{stroke:!1})):$t.base.call(this,Jt,sn)},_hitTestChildren:function $t(Jt,sn,ln){var cn=this._getClipItem();return(!cn||cn.contains(Jt))&&$t.base.call(this,Jt,sn,ln,cn)},_draw:function($t,Jt){var sn=Jt.clip,ln=!sn&&this._getClipItem();Jt=Jt.extend({clipItem:ln,clip:!1}),sn?($t.beginPath(),Jt.dontStart=Jt.dontFinish=!0):ln&&ln.draw($t,Jt.extend({clip:!0}));for(var cn=this._children,fn=0,wn=cn.length;fn<wn;fn++){var _n=cn[fn];_n!==ln&&_n.draw($t,Jt)}}}),dn=un.extend({_class:"Layer",initialize:function(){un.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function $t(){return this._parent?$t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Sn=an.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(Jt,sn){this._initialize(Jt,sn)},_equals:function($t){return this._type===$t._type&&this._size.equals($t._size)&&ct.equals(this._radius,$t._radius)},copyContent:function($t){this.setType($t._type),this.setSize($t._size),this.setRadius($t._radius)},getType:function(){return this._type},setType:function($t){this._type=$t},getShape:"#getType",setShape:"#setType",getSize:function(){var $t=this._size;return new Yt($t.width,$t.height,this,"setSize")},setSize:function(){var $t=Ht.read(arguments);if(!this._size)this._size=$t.clone();else if(!this._size.equals($t)){var Jt=this._type,sn=$t.width,ln=$t.height;Jt==="rectangle"?this._radius.set(Ht.min(this._radius,$t.divide(2).abs())):Jt==="circle"?(sn=ln=(sn+ln)/2,this._radius=sn/2):Jt==="ellipse"&&this._radius._set(sn/2,ln/2),this._size._set(sn,ln),this._changed(9)}},getRadius:function(){var $t=this._radius;return this._type==="circle"?$t:new Yt($t.width,$t.height,this,"setRadius")},setRadius:function($t){var Jt=this._type;if(Jt==="circle"){if($t===this._radius)return;var sn=$t*2;this._radius=$t,this._size._set(sn,sn)}else if($t=Ht.read(arguments),!this._radius)this._radius=$t.clone();else{if(this._radius.equals($t))return;if(this._radius.set($t),Jt==="rectangle"){var sn=Ht.max(this._size,$t.multiply(2));this._size.set(sn)}else Jt==="ellipse"&&this._size._set($t.width*2,$t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function($t){var Jt=new vn[ct.capitalize(this._type)]({center:new Ft,size:this._size,radius:this._radius,insert:!1});return Jt.copyAttributes(this),Kr.settings.applyMatrix&&Jt.setApplyMatrix(!0),($t===et||$t)&&Jt.insertAbove(this),Jt},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function($t,Jt,sn,ln){var cn=this._style,fn=cn.hasFill(),wn=cn.hasStroke(),_n=Jt.dontFinish||Jt.clip,Tn=!ln;if(fn||wn||_n){var Nn=this._type,Bn=this._radius,Hn=Nn==="circle";if(Jt.dontStart||$t.beginPath(),Tn&&Hn)$t.arc(0,0,Bn,0,Math.PI*2,!0);else{var Fn=Hn?Bn:Bn.width,jn=Hn?Bn:Bn.height,Jn=this._size,Wn=Jn.width,Kn=Jn.height;if(Tn&&Nn==="rectangle"&&Fn===0&&jn===0)$t.rect(-Wn/2,-Kn/2,Wn,Kn);else{var zn=Wn/2,Gn=Kn/2,Dn=1-.5522847498307936,qn=Fn*Dn,Zn=jn*Dn,nr=[-zn,-Gn+jn,-zn,-Gn+Zn,-zn+qn,-Gn,-zn+Fn,-Gn,zn-Fn,-Gn,zn-qn,-Gn,zn,-Gn+Zn,zn,-Gn+jn,zn,Gn-jn,zn,Gn-Zn,zn-qn,Gn,zn-Fn,Gn,-zn+Fn,Gn,-zn+qn,Gn,-zn,Gn-Zn,-zn,Gn-jn];ln&&ln.transform(nr,nr,32),$t.moveTo(nr[0],nr[1]),$t.bezierCurveTo(nr[2],nr[3],nr[4],nr[5],nr[6],nr[7]),zn!==Fn&&$t.lineTo(nr[8],nr[9]),$t.bezierCurveTo(nr[10],nr[11],nr[12],nr[13],nr[14],nr[15]),Gn!==jn&&$t.lineTo(nr[16],nr[17]),$t.bezierCurveTo(nr[18],nr[19],nr[20],nr[21],nr[22],nr[23]),zn!==Fn&&$t.lineTo(nr[24],nr[25]),$t.bezierCurveTo(nr[26],nr[27],nr[28],nr[29],nr[30],nr[31])}}$t.closePath()}!_n&&(fn||wn)&&(this._setStyles($t,Jt,sn),fn&&($t.fill(cn.getFillRule()),$t.shadowColor="rgba(0,0,0,0)"),wn&&$t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function($t,Jt){var sn=new zt(this._size).setCenter(0,0),ln=this._style,cn=Jt.stroke&&ln.hasStroke()&&ln.getStrokeWidth();return $t&&(sn=$t._transformBounds(sn)),cn?sn.expand(vn._getStrokePadding(cn,this._getStrokeMatrix($t,Jt))):sn}},new function(){function $t(sn,ln,cn){var fn=sn._radius;if(!fn.isZero())for(var wn=sn._size.divide(2),_n=1;_n<=4;_n++){var Tn=new Ft(_n>1&&_n<4?-1:1,_n>2?-1:1),Nn=Tn.multiply(wn),Bn=Nn.subtract(Tn.multiply(fn)),Hn=new zt(cn?Nn.add(Tn.multiply(cn)):Nn,Bn);if(Hn.contains(ln))return{point:Bn,quadrant:_n}}}function Jt(sn,ln,cn,fn){var wn=sn.divide(ln);return(!fn||wn.isInQuadrant(fn))&&wn.subtract(wn.normalize()).multiply(ln).divide(cn).length<=1}return{_contains:function sn(ln){if(this._type==="rectangle"){var cn=$t(this,ln);return cn?ln.subtract(cn.point).divide(this._radius).getLength()<=1:sn.base.call(this,ln)}else return ln.divide(this.size).getLength()<=.5},_hitTestSelf:function sn(ln,cn,fn,wn){var _n=!1,Tn=this._style,Nn=cn.stroke&&Tn.hasStroke(),Bn=cn.fill&&Tn.hasFill();if(Nn||Bn){var Hn=this._type,Fn=this._radius,jn=Nn?Tn.getStrokeWidth()/2:0,Jn=cn._tolerancePadding.add(vn._getStrokePadding(jn,!Tn.getStrokeScaling()&&wn));if(Hn==="rectangle"){var Wn=Jn.multiply(2),Kn=$t(this,ln,Wn);if(Kn)_n=Jt(ln.subtract(Kn.point),Fn,Jn,Kn.quadrant);else{var zn=new zt(this._size).setCenter(0,0),Gn=zn.expand(Wn),Dn=zn.expand(Wn.negate());_n=Gn._containsPoint(ln)&&!Dn._containsPoint(ln)}}else _n=Jt(ln,Fn,Jn)}return _n?new kn(Nn?"stroke":"fill",this):sn.base.apply(this,arguments)}}},{statics:new function(){function $t(Jt,sn,ln,cn,fn){var wn=ct.create(Sn.prototype);return wn._type=Jt,wn._size=ln,wn._radius=cn,wn._initialize(ct.getNamed(fn),sn),wn}return{Circle:function(){var Jt=arguments,sn=Ft.readNamed(Jt,"center"),ln=ct.readNamed(Jt,"radius");return $t("circle",sn,new Ht(ln*2),ln,Jt)},Rectangle:function(){var Jt=arguments,sn=zt.readNamed(Jt,"rectangle"),ln=Ht.min(Ht.readNamed(Jt,"radius"),sn.getSize(!0).divide(2));return $t("rectangle",sn.getCenter(!0),sn.getSize(!0),ln,Jt)},Ellipse:function(){var Jt=arguments,sn=Sn._readEllipse(Jt),ln=sn.radius;return $t("ellipse",sn.center,ln.multiply(2),ln,Jt)},_readEllipse:function(Jt){var sn,ln;if(ct.hasNamed(Jt,"radius"))sn=Ft.readNamed(Jt,"center"),ln=Ht.readNamed(Jt,"radius");else{var cn=zt.readNamed(Jt,"rectangle");sn=cn.getCenter(!0),ln=cn.getSize(!0).divide(2)}return{center:sn,radius:ln}}}}}),mn=an.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(Jt,sn){if(!this._initialize(Jt,sn!==et&&Ft.read(arguments))){var ln,cn=typeof Jt,fn=cn==="string"?ut.getElementById(Jt):cn==="object"?Jt:null;if(fn&&fn!==an.NO_INSERT){if(fn.getContext||fn.naturalHeight!=null)ln=fn;else if(fn){var wn=Ht.read(arguments);wn.isZero()||(ln=zr.getCanvas(wn))}}ln?this.setImage(ln):this.setSource(Jt)}this._size||(this._size=new Ht,this._loaded=!1)},_equals:function($t){return this.getSource()===$t.getSource()},copyContent:function($t){var Jt=$t._image,sn=$t._canvas;if(Jt)this._setImage(Jt);else if(sn){var ln=zr.getCanvas($t._size);ln.getContext("2d").drawImage(sn,0,0),this._setImage(ln)}this._crossOrigin=$t._crossOrigin},getSize:function(){var $t=this._size;return new Yt($t?$t.width:0,$t?$t.height:0,this,"setSize")},setSize:function($t,Jt){var sn=Ht.read(arguments);if(sn.equals(this._size))Jt&&this.clear();else if(sn.width>0&&sn.height>0){var ln=!Jt&&this.getElement();this._setImage(zr.getCanvas(sn)),ln&&this.getContext(!0).drawImage(ln,0,0,sn.width,sn.height)}else this._canvas&&zr.release(this._canvas),this._size=sn.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function($t){this.setSize($t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function($t){this.setSize(this.getWidth(),$t)},getLoaded:function(){return this._loaded},isEmpty:function(){var $t=this._size;return!$t||$t.width===0&&$t.height===0},getResolution:function(){var $t=this._matrix,Jt=new Ft(0,0).transform($t),sn=new Ft(1,0).transform($t).subtract(Jt),ln=new Ft(0,1).transform($t).subtract(Jt);return new Ht(72/sn.getLength(),72/ln.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function($t){var Jt=this;function sn(ln){var cn=Jt.getView(),fn=ln&&ln.type||"load";cn&&Jt.responds(fn)&&(Kr=cn._scope,Jt.emit(fn,new Br(ln)))}this._setImage($t),this._loaded?setTimeout(sn,0):$t&&wr.add($t,{load:function(ln){Jt._setImage($t),sn(ln)},error:sn})},_setImage:function($t){this._canvas&&zr.release(this._canvas),$t&&$t.getContext?(this._image=null,this._canvas=$t,this._loaded=!0):(this._image=$t,this._canvas=null,this._loaded=!!($t&&$t.src&&$t.complete)),this._size=new Ht($t?$t.naturalWidth||$t.width:0,$t?$t.naturalHeight||$t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var $t=zr.getContext(this._size);try{this._image&&$t.drawImage(this._image,0,0),this._canvas=$t.canvas}catch{zr.release($t)}}return this._canvas},setCanvas:"#setImage",getContext:function($t){return this._context||(this._context=this.getCanvas().getContext("2d")),$t&&(this._image=null,this._changed(1025)),this._context},setContext:function($t){this._context=$t},getSource:function(){var $t=this._image;return $t&&$t.src||this.toDataURL()},setSource:function($t){var Jt=new g.Image,sn=this._crossOrigin;sn&&(Jt.crossOrigin=sn),$t&&(Jt.src=$t),this.setImage(Jt)},getCrossOrigin:function(){var $t=this._image;return $t&&$t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function($t){this._crossOrigin=$t;var Jt=this._image;Jt&&(Jt.crossOrigin=$t)},getSmoothing:function(){return this._smoothing},setSmoothing:function($t){this._smoothing=typeof $t=="string"?$t:$t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var $t=zt.read(arguments),Jt=zr.getContext($t.getSize());return Jt.drawImage(this.getCanvas(),$t.x,$t.y,$t.width,$t.height,0,0,$t.width,$t.height),Jt.canvas},getSubRaster:function(){var $t=zt.read(arguments),Jt=new mn(an.NO_INSERT);return Jt._setImage(this.getSubCanvas($t)),Jt.translate($t.getCenter().subtract(this.getSize().divide(2))),Jt._matrix.prepend(this._matrix),Jt.insertAbove(this),Jt},toDataURL:function(){var $t=this._image,Jt=$t&&$t.src;if(/^data:/.test(Jt))return Jt;var sn=this.getCanvas();return sn?sn.toDataURL.apply(sn,arguments):null},drawImage:function($t){var Jt=Ft.read(arguments,1);this.getContext(!0).drawImage($t,Jt.x,Jt.y)},getAverageColor:function($t){var Jt,sn;if($t?$t instanceof yn?(sn=$t,Jt=$t.getBounds()):typeof $t=="object"&&("width"in $t?Jt=new zt($t):"x"in $t&&(Jt=new zt($t.x-.5,$t.y-.5,1,1))):Jt=this.getBounds(),!Jt)return null;var ln=32,cn=Math.min(Jt.width,ln),fn=Math.min(Jt.height,ln),wn=mn._sampleContext;wn?wn.clearRect(0,0,ln+1,ln+1):wn=mn._sampleContext=zr.getContext(new Ht(ln)),wn.save();var _n=new en().scale(cn/Jt.width,fn/Jt.height).translate(-Jt.x,-Jt.y);_n.applyToContext(wn),sn&&sn.draw(wn,new ct({clip:!0,matrices:[_n]})),this._matrix.applyToContext(wn);var Tn=this.getElement(),Nn=this._size;Tn&&wn.drawImage(Tn,-Nn.width/2,-Nn.height/2),wn.restore();for(var Bn=wn.getImageData(.5,.5,Math.ceil(cn),Math.ceil(fn)).data,Hn=[0,0,0],Fn=0,jn=0,Jn=Bn.length;jn<Jn;jn+=4){var Wn=Bn[jn+3];Fn+=Wn,Wn/=255,Hn[0]+=Bn[jn]*Wn,Hn[1]+=Bn[jn+1]*Wn,Hn[2]+=Bn[jn+2]*Wn}for(var jn=0;jn<3;jn++)Hn[jn]/=Fn;return Fn?ar.read(Hn):null},getPixel:function(){var $t=Ft.read(arguments),Jt=this.getContext().getImageData($t.x,$t.y,1,1).data;return new ar("rgb",[Jt[0]/255,Jt[1]/255,Jt[2]/255],Jt[3]/255)},setPixel:function(){var $t=arguments,Jt=Ft.read($t),sn=ar.read($t),ln=sn._convert("rgb"),cn=sn._alpha,fn=this.getContext(!0),wn=fn.createImageData(1,1),_n=wn.data;_n[0]=ln[0]*255,_n[1]=ln[1]*255,_n[2]=ln[2]*255,_n[3]=cn!=null?cn*255:255,fn.putImageData(wn,Jt.x,Jt.y)},clear:function(){var $t=this._size;this.getContext(!0).clearRect(0,0,$t.width+1,$t.height+1)},createImageData:function(){var $t=Ht.read(arguments);return this.getContext().createImageData($t.width,$t.height)},getImageData:function(){var $t=zt.read(arguments);return $t.isEmpty()&&($t=new zt(this._size)),this.getContext().getImageData($t.x,$t.y,$t.width,$t.height)},putImageData:function($t){var Jt=Ft.read(arguments,1);this.getContext(!0).putImageData($t,Jt.x,Jt.y)},setImageData:function($t){this.setSize($t),this.getContext(!0).putImageData($t,0,0)},_getBounds:function($t,Jt){var sn=new zt(this._size).setCenter(0,0);return $t?$t._transformBounds(sn):sn},_hitTestSelf:function($t){if(this._contains($t)){var Jt=this;return new kn("pixel",Jt,{offset:$t.add(Jt._size.divide(2)).round(),color:{get:function(){return Jt.getPixel(this.offset)}}})}},_draw:function($t,Jt,sn){var ln=this.getElement();if(ln&&ln.width>0&&ln.height>0){$t.globalAlpha=Rt.clamp(this._opacity,0,1),this._setStyles($t,Jt,sn);var cn=this._smoothing,fn=cn==="off";xr.setPrefixed($t,fn?"imageSmoothingEnabled":"imageSmoothingQuality",fn?!1:cn),$t.drawImage(ln,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),bn=an.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(Jt,sn){this._initialize(Jt,sn!==et&&Ft.read(arguments,1))||this.setDefinition(Jt instanceof En?Jt:new En(Jt))},_equals:function($t){return this._definition===$t._definition},copyContent:function($t){this.setDefinition($t._definition)},getDefinition:function(){return this._definition},setDefinition:function($t){this._definition=$t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function($t,Jt){var sn=this._definition._item;return sn._getCachedBounds(sn._matrix.prepended($t),Jt)},_hitTestSelf:function($t,Jt,sn){var ln=Jt.extend({all:!1}),cn=this._definition._item._hitTest($t,ln,sn);return cn&&(cn.item=this),cn},_draw:function($t,Jt){this._definition._item.draw($t,Jt)}}),En=ct.extend({_class:"SymbolDefinition",initialize:function(Jt,sn){this._id=jt.get(),this.project=Kr.project,Jt&&this.setItem(Jt,sn)},_serialize:function($t,Jt){return Jt.add(this,function(){return ct.serialize([this._class,this._item],$t,!1,Jt)})},_changed:function($t){$t&8&&an._clearBoundsCache(this),$t&1&&this.project._changed($t)},getItem:function(){return this._item},setItem:function($t,Jt){$t._symbol&&($t=$t.clone()),this._item&&(this._item._symbol=null),this._item=$t,$t.remove(),$t.setSelected(!1),Jt||$t.setPosition(new Ft),$t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function($t){return new bn(this,$t)},clone:function(){return new En(this._item.clone(!1))},equals:function($t){return $t===this||$t&&this._item.equals($t._item)||!1}}),kn=ct.extend({_class:"HitResult",initialize:function(Jt,sn,ln){this.type=Jt,this.item=sn,ln&&this.inject(ln)},statics:{getOptions:function($t){var Jt=$t&&ct.read($t);return new ct({type:null,tolerance:Kr.settings.hitTolerance,fill:!Jt,stroke:!Jt,segments:!Jt,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},Jt)}}}),Pn=ct.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(Jt,sn,ln,cn,fn,wn){var _n=arguments.length,Tn,Nn,Bn,Hn;_n>0&&(Jt==null||typeof Jt=="object"?_n===1&&Jt&&"point"in Jt?(Tn=Jt.point,Nn=Jt.handleIn,Bn=Jt.handleOut,Hn=Jt.selection):(Tn=Jt,Nn=sn,Bn=ln,Hn=cn):(Tn=[Jt,sn],Nn=ln!==et?[ln,cn]:null,Bn=fn!==et?[fn,wn]:null)),new Ln(Tn,this,"_point"),new Ln(Nn,this,"_handleIn"),new Ln(Bn,this,"_handleOut"),Hn&&this.setSelection(Hn)},_serialize:function($t,Jt){var sn=this._point,ln=this._selection,cn=ln||this.hasHandles()?[sn,this._handleIn,this._handleOut]:sn;return ln&&cn.push(ln),ct.serialize(cn,$t,!0,Jt)},_changed:function($t){var Jt=this._path;if(Jt){var sn=Jt._curves,ln=this._index,cn;sn&&((!$t||$t===this._point||$t===this._handleIn)&&(cn=ln>0?sn[ln-1]:Jt._closed?sn[sn.length-1]:null)&&cn._changed(),(!$t||$t===this._point||$t===this._handleOut)&&(cn=sn[ln])&&cn._changed()),Jt._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(Ft.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(Ft.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(Ft.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var $t=this._handleIn,Jt=this._handleOut;return!$t.isZero()&&!Jt.isZero()&&$t.isCollinear(Jt)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function($t){var Jt=this._selection,sn=this._path;this._selection=$t=$t||0,sn&&$t!==Jt&&(sn._updateSelection(this,Jt,$t),sn._changed(257))},_changeSelection:function($t,Jt){var sn=this._selection;this.setSelection(Jt?sn|$t:sn&~$t)},isSelected:function(){return!!(this._selection&7)},setSelected:function($t){this._changeSelection(7,$t)},getIndex:function(){return this._index!==et?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var $t=this._path,Jt=this._index;return $t?(Jt>0&&!$t._closed&&Jt===$t._segments.length-1&&Jt--,$t.getCurves()[Jt]||null):null},getLocation:function(){var $t=this.getCurve();return $t?new Mn($t,this===$t._segment1?0:1):null},getNext:function(){var $t=this._path&&this._path._segments;return $t&&($t[this._index+1]||this._path._closed&&$t[0])||null},smooth:function($t,Jt,sn){var ln=$t||{},cn=ln.type,fn=ln.factor,wn=this.getPrevious(),_n=this.getNext(),Tn=(wn||this)._point,Nn=this._point,Bn=(_n||this)._point,Hn=Tn.getDistance(Nn),Fn=Nn.getDistance(Bn);if(!cn||cn==="catmull-rom"){var jn=fn===et?.5:fn,Jn=Math.pow(Hn,jn),Wn=Jn*Jn,Kn=Math.pow(Fn,jn),zn=Kn*Kn;if(!Jt&&wn){var Gn=2*zn+3*Kn*Jn+Wn,Dn=3*Kn*(Kn+Jn);this.setHandleIn(Dn!==0?new Ft((zn*Tn._x+Gn*Nn._x-Wn*Bn._x)/Dn-Nn._x,(zn*Tn._y+Gn*Nn._y-Wn*Bn._y)/Dn-Nn._y):new Ft)}if(!sn&&_n){var Gn=2*Wn+3*Jn*Kn+zn,Dn=3*Jn*(Jn+Kn);this.setHandleOut(Dn!==0?new Ft((Wn*Bn._x+Gn*Nn._x-zn*Tn._x)/Dn-Nn._x,(Wn*Bn._y+Gn*Nn._y-zn*Tn._y)/Dn-Nn._y):new Ft)}}else if(cn==="geometric"){if(wn&&_n){var qn=Tn.subtract(Bn),Zn=fn===et?.4:fn,nr=Zn*Hn/(Hn+Fn);Jt||this.setHandleIn(qn.multiply(nr)),sn||this.setHandleOut(qn.multiply(nr-Zn))}}else throw new Error("Smoothing method '"+cn+"' not supported.")},getPrevious:function(){var $t=this._path&&this._path._segments;return $t&&($t[this._index-1]||this._path._closed&&$t[$t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var $t=this._path;return $t&&this._index===$t._segments.length-1||!1},reverse:function(){var $t=this._handleIn,Jt=this._handleOut,sn=$t.clone();$t.set(Jt),Jt.set(sn)},reversed:function(){return new Pn(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Pn(this._point,this._handleIn,this._handleOut)},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._point.equals($t._point)&&this._handleIn.equals($t._handleIn)&&this._handleOut.equals($t._handleOut)||!1},toString:function(){var $t=["point: "+this._point];return this._handleIn.isZero()||$t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||$t.push("handleOut: "+this._handleOut),"{ "+$t.join(", ")+" }"},transform:function($t){this._transformCoordinates($t,new Array(6),!0),this._changed()},interpolate:function($t,Jt,sn){var ln=1-sn,cn=sn,fn=$t._point,wn=Jt._point,_n=$t._handleIn,Tn=Jt._handleIn,Nn=Jt._handleOut,Bn=$t._handleOut;this._point._set(ln*fn._x+cn*wn._x,ln*fn._y+cn*wn._y,!0),this._handleIn._set(ln*_n._x+cn*Tn._x,ln*_n._y+cn*Tn._y,!0),this._handleOut._set(ln*Bn._x+cn*Nn._x,ln*Bn._y+cn*Nn._y,!0),this._changed()},_transformCoordinates:function($t,Jt,sn){var ln=this._point,cn=!sn||!this._handleIn.isZero()?this._handleIn:null,fn=!sn||!this._handleOut.isZero()?this._handleOut:null,wn=ln._x,_n=ln._y,Tn=2;return Jt[0]=wn,Jt[1]=_n,cn&&(Jt[Tn++]=cn._x+wn,Jt[Tn++]=cn._y+_n),fn&&(Jt[Tn++]=fn._x+wn,Jt[Tn++]=fn._y+_n),$t&&($t._transformCoordinates(Jt,Jt,Tn/2),wn=Jt[0],_n=Jt[1],sn?(ln._x=wn,ln._y=_n,Tn=2,cn&&(cn._x=Jt[Tn++]-wn,cn._y=Jt[Tn++]-_n),fn&&(fn._x=Jt[Tn++]-wn,fn._y=Jt[Tn++]-_n)):(cn||(Jt[Tn++]=wn,Jt[Tn++]=_n),fn||(Jt[Tn++]=wn,Jt[Tn++]=_n))),Jt}}),Ln=Ft.extend({initialize:function(Jt,sn,ln){var cn,fn,wn;if(!Jt)cn=fn=0;else if((cn=Jt[0])!==et)fn=Jt[1];else{var _n=Jt;(cn=_n.x)===et&&(_n=Ft.read(arguments),cn=_n.x),fn=_n.y,wn=_n.selected}this._x=cn,this._y=fn,this._owner=sn,sn[ln]=this,wn&&this.setSelected(!0)},_set:function($t,Jt){return this._x=$t,this._y=Jt,this._owner._changed(this),this},getX:function(){return this._x},setX:function($t){this._x=$t,this._owner._changed(this)},getY:function(){return this._y},setY:function($t){this._y=$t,this._owner._changed(this)},isZero:function(){var $t=Rt.isZero;return $t(this._x)&&$t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function($t){this._owner._changeSelection(this._getSelection(),$t)},_getSelection:function(){var $t=this._owner;return this===$t._point?1:this===$t._handleIn?2:this===$t._handleOut?4:0}}),gn=ct.extend({_class:"Curve",beans:!0,initialize:function(Jt,sn,ln,cn,fn,wn,_n,Tn){var Nn=arguments.length,Bn,Hn,Fn,jn,Jn,Wn;Nn===3?(this._path=Jt,Bn=sn,Hn=ln):Nn?Nn===1?"segment1"in Jt?(Bn=new Pn(Jt.segment1),Hn=new Pn(Jt.segment2)):"point1"in Jt?(Fn=Jt.point1,Jn=Jt.handle1,Wn=Jt.handle2,jn=Jt.point2):Array.isArray(Jt)&&(Fn=[Jt[0],Jt[1]],jn=[Jt[6],Jt[7]],Jn=[Jt[2]-Jt[0],Jt[3]-Jt[1]],Wn=[Jt[4]-Jt[6],Jt[5]-Jt[7]]):Nn===2?(Bn=new Pn(Jt),Hn=new Pn(sn)):Nn===4?(Fn=Jt,Jn=sn,Wn=ln,jn=cn):Nn===8&&(Fn=[Jt,sn],jn=[_n,Tn],Jn=[ln-Jt,cn-sn],Wn=[fn-_n,wn-Tn]):(Bn=new Pn,Hn=new Pn),this._segment1=Bn||new Pn(Fn,null,Jn),this._segment2=Hn||new Pn(jn,Wn,null)},_serialize:function($t,Jt){return ct.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],$t,!0,Jt)},_changed:function(){this._length=this._bounds=et},clone:function(){return new gn(this._segment1,this._segment2)},toString:function(){var $t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||$t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||$t.push("handle2: "+this._segment2._handleIn),$t.push("point2: "+this._segment2._point),"{ "+$t.join(", ")+" }"},classify:function(){return gn.classify(this.getValues())},remove:function(){var $t=!1;if(this._path){var Jt=this._segment2,sn=Jt._handleOut;$t=Jt.remove(),$t&&this._segment1._handleOut.set(sn)}return $t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(Ft.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(Ft.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(Ft.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(Ft.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var $t=this._path&&this._path._curves;return $t&&($t[this._segment1._index+1]||this._path._closed&&$t[0])||null},getPrevious:function(){var $t=this._path&&this._path._curves;return $t&&($t[this._segment1._index-1]||this._path._closed&&$t[$t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var $t=this._path;return $t&&this._segment1._index===$t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function($t){this.getPoint1().setSelected($t),this.getHandle1().setSelected($t),this.getHandle2().setSelected($t),this.getPoint2().setSelected($t)},getValues:function($t){return gn.getValues(this._segment1,this._segment2,$t)},getPoints:function(){for(var $t=this.getValues(),Jt=[],sn=0;sn<8;sn+=2)Jt.push(new Ft($t[sn],$t[sn+1]));return Jt}},{getLength:function(){return this._length==null&&(this._length=gn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return gn.getArea(this.getValues())},getLine:function(){return new tn(this._segment1._point,this._segment2._point)},getPart:function($t,Jt){return new gn(gn.getPart(this.getValues(),$t,Jt))},getPartLength:function($t,Jt){return gn.getLength(this.getValues(),$t,Jt)},divideAt:function($t){return this.divideAtTime($t&&$t.curve===this?$t.time:this.getTimeAt($t))},divideAtTime:function($t,Jt){var sn=1e-8,ln=1-sn,cn=null;if($t>=sn&&$t<=ln){var fn=gn.subdivide(this.getValues(),$t),wn=fn[0],_n=fn[1],Tn=Jt||this.hasHandles(),Nn=this._segment1,Bn=this._segment2,Hn=this._path;Tn&&(Nn._handleOut._set(wn[2]-wn[0],wn[3]-wn[1]),Bn._handleIn._set(_n[4]-_n[6],_n[5]-_n[7]));var Fn=wn[6],jn=wn[7],Jn=new Pn(new Ft(Fn,jn),Tn&&new Ft(wn[4]-Fn,wn[5]-jn),Tn&&new Ft(_n[2]-Fn,_n[3]-jn));Hn?(Hn.insert(Nn._index+1,Jn),cn=this.getNext()):(this._segment2=Jn,this._changed(),cn=new gn(Jn,Bn))}return cn},splitAt:function($t){var Jt=this._path;return Jt?Jt.splitAt($t):null},splitAtTime:function($t){return this.splitAt(this.getLocationAtTime($t))},divide:function($t,Jt){return this.divideAtTime($t===et?.5:Jt?$t:this.getTimeAt($t))},split:function($t,Jt){return this.splitAtTime($t===et?.5:Jt?$t:this.getTimeAt($t))},reversed:function(){return new gn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function($t,Jt,sn,ln){var cn=$t._point,fn=$t._handleOut,wn=Jt._handleIn,_n=Jt._point,Tn=cn.x,Nn=cn.y,Bn=_n.x,Hn=_n.y,Fn=ln?[Tn,Nn,Tn,Nn,Bn,Hn,Bn,Hn]:[Tn,Nn,Tn+fn._x,Nn+fn._y,Bn+wn._x,Hn+wn._y,Bn,Hn];return sn&&sn._transformCoordinates(Fn,Fn,4),Fn},subdivide:function($t,Jt){var sn=$t[0],ln=$t[1],cn=$t[2],fn=$t[3],wn=$t[4],_n=$t[5],Tn=$t[6],Nn=$t[7];Jt===et&&(Jt=.5);var Bn=1-Jt,Hn=Bn*sn+Jt*cn,Fn=Bn*ln+Jt*fn,jn=Bn*cn+Jt*wn,Jn=Bn*fn+Jt*_n,Wn=Bn*wn+Jt*Tn,Kn=Bn*_n+Jt*Nn,zn=Bn*Hn+Jt*jn,Gn=Bn*Fn+Jt*Jn,Dn=Bn*jn+Jt*Wn,qn=Bn*Jn+Jt*Kn,Zn=Bn*zn+Jt*Dn,nr=Bn*Gn+Jt*qn;return[[sn,ln,Hn,Fn,zn,Gn,Zn,nr],[Zn,nr,Dn,qn,Wn,Kn,Tn,Nn]]},getMonoCurves:function($t,Jt){var sn=[],ln=Jt?0:1,cn=$t[ln+0],fn=$t[ln+2],wn=$t[ln+4],_n=$t[ln+6];if(cn>=fn==fn>=wn&&fn>=wn==wn>=_n||gn.isStraight($t))sn.push($t);else{var Tn=3*(fn-wn)-cn+_n,Nn=2*(cn+wn)-4*fn,Bn=fn-cn,Hn=1e-8,Fn=1-Hn,jn=[],Jn=Rt.solveQuadratic(Tn,Nn,Bn,jn,Hn,Fn);if(!Jn)sn.push($t);else{jn.sort();var Wn=jn[0],Kn=gn.subdivide($t,Wn);sn.push(Kn[0]),Jn>1&&(Wn=(jn[1]-Wn)/(1-Wn),Kn=gn.subdivide(Kn[1],Wn),sn.push(Kn[0])),sn.push(Kn[1])}}return sn},solveCubic:function($t,Jt,sn,ln,cn,fn){var wn=$t[Jt],_n=$t[Jt+2],Tn=$t[Jt+4],Nn=$t[Jt+6],Bn=0;if(!(wn<sn&&Nn<sn&&_n<sn&&Tn<sn||wn>sn&&Nn>sn&&_n>sn&&Tn>sn)){var Hn=3*(_n-wn),Fn=3*(Tn-_n)-Hn,jn=Nn-wn-Hn-Fn;Bn=Rt.solveCubic(jn,Fn,Hn,wn-sn,ln,cn,fn)}return Bn},getTimeOf:function($t,Jt){var sn=new Ft($t[0],$t[1]),ln=new Ft($t[6],$t[7]),cn=1e-12,fn=1e-7,wn=Jt.isClose(sn,cn)?0:Jt.isClose(ln,cn)?1:null;if(wn===null)for(var _n=[Jt.x,Jt.y],Tn=[],Nn=0;Nn<2;Nn++)for(var Bn=gn.solveCubic($t,Nn,_n[Nn],Tn,0,1),Hn=0;Hn<Bn;Hn++){var Fn=Tn[Hn];if(Jt.isClose(gn.getPoint($t,Fn),fn))return Fn}return Jt.isClose(sn,fn)?0:Jt.isClose(ln,fn)?1:null},getNearestTime:function($t,Jt){if(gn.isStraight($t)){var sn=$t[0],ln=$t[1],cn=$t[6],fn=$t[7],wn=cn-sn,_n=fn-ln,Tn=wn*wn+_n*_n;if(Tn===0)return 0;var Nn=((Jt.x-sn)*wn+(Jt.y-ln)*_n)/Tn;return Nn<1e-12?0:Nn>.999999999999?1:gn.getTimeOf($t,new Ft(sn+Nn*wn,ln+Nn*_n))}var Bn=100,Hn=1/0,Fn=0;function jn(Kn){if(Kn>=0&&Kn<=1){var zn=Jt.getDistance(gn.getPoint($t,Kn),!0);if(zn<Hn)return Hn=zn,Fn=Kn,!0}}for(var Jn=0;Jn<=Bn;Jn++)jn(Jn/Bn);for(var Wn=1/(Bn*2);Wn>1e-8;)!jn(Fn-Wn)&&!jn(Fn+Wn)&&(Wn/=2);return Fn},getPart:function($t,Jt,sn){var ln=Jt>sn;if(ln){var cn=Jt;Jt=sn,sn=cn}return Jt>0&&($t=gn.subdivide($t,Jt)[1]),sn<1&&($t=gn.subdivide($t,(sn-Jt)/(1-Jt))[0]),ln?[$t[6],$t[7],$t[4],$t[5],$t[2],$t[3],$t[0],$t[1]]:$t},isFlatEnough:function($t,Jt){var sn=$t[0],ln=$t[1],cn=$t[2],fn=$t[3],wn=$t[4],_n=$t[5],Tn=$t[6],Nn=$t[7],Bn=3*cn-2*sn-Tn,Hn=3*fn-2*ln-Nn,Fn=3*wn-2*Tn-sn,jn=3*_n-2*Nn-ln;return Math.max(Bn*Bn,Fn*Fn)+Math.max(Hn*Hn,jn*jn)<=16*Jt*Jt},getArea:function($t){var Jt=$t[0],sn=$t[1],ln=$t[2],cn=$t[3],fn=$t[4],wn=$t[5],_n=$t[6],Tn=$t[7];return 3*((Tn-sn)*(ln+fn)-(_n-Jt)*(cn+wn)+cn*(Jt-fn)-ln*(sn-wn)+Tn*(fn+Jt/3)-_n*(wn+sn/3))/20},getBounds:function($t){for(var Jt=$t.slice(0,2),sn=Jt.slice(),ln=[0,0],cn=0;cn<2;cn++)gn._addBounds($t[cn],$t[cn+2],$t[cn+4],$t[cn+6],cn,0,Jt,sn,ln);return new zt(Jt[0],Jt[1],sn[0]-Jt[0],sn[1]-Jt[1])},_addBounds:function($t,Jt,sn,ln,cn,fn,wn,_n,Tn){function Nn(Zn,nr){var Yn=Zn-nr,sr=Zn+nr;Yn<wn[cn]&&(wn[cn]=Yn),sr>_n[cn]&&(_n[cn]=sr)}fn/=2;var Bn=wn[cn]+fn,Hn=_n[cn]-fn;if($t<Bn||Jt<Bn||sn<Bn||ln<Bn||$t>Hn||Jt>Hn||sn>Hn||ln>Hn)if(Jt<$t!=Jt<ln&&sn<$t!=sn<ln)Nn($t,0),Nn(ln,0);else{var Fn=3*(Jt-sn)-$t+ln,jn=2*($t+sn)-4*Jt,Jn=Jt-$t,Wn=Rt.solveQuadratic(Fn,jn,Jn,Tn),Kn=1e-8,zn=1-Kn;Nn(ln,0);for(var Gn=0;Gn<Wn;Gn++){var Dn=Tn[Gn],qn=1-Dn;Kn<=Dn&&Dn<=zn&&Nn(qn*qn*qn*$t+3*qn*qn*Dn*Jt+3*qn*Dn*Dn*sn+Dn*Dn*Dn*ln,fn)}}}}},ct.each(["getBounds","getStrokeBounds","getHandleBounds"],function($t){this[$t]=function(){this._bounds||(this._bounds={});var Jt=this._bounds[$t];return Jt||(Jt=this._bounds[$t]=vn[$t]([this._segment1,this._segment2],!1,this._path)),Jt.clone()}},{}),ct.each({isStraight:function($t,Jt,sn,ln){if(Jt.isZero()&&sn.isZero())return!0;var cn=ln.subtract($t);if(cn.isZero())return!1;if(cn.isCollinear(Jt)&&cn.isCollinear(sn)){var fn=new tn($t,ln),wn=1e-7;if(fn.getDistance($t.add(Jt))<wn&&fn.getDistance(ln.add(sn))<wn){var _n=cn.dot(cn),Tn=cn.dot(Jt)/_n,Nn=cn.dot(sn)/_n;return Tn>=0&&Tn<=1&&Nn<=0&&Nn>=-1}}return!1},isLinear:function($t,Jt,sn,ln){var cn=ln.subtract($t).divide(3);return Jt.equals(cn)&&sn.negate().equals(cn)}},function($t,Jt){this[Jt]=function(sn){var ln=this._segment1,cn=this._segment2;return $t(ln._point,ln._handleOut,cn._handleIn,cn._point,sn)},this.statics[Jt]=function(sn,ln){var cn=sn[0],fn=sn[1],wn=sn[6],_n=sn[7];return $t(new Ft(cn,fn),new Ft(sn[2]-cn,sn[3]-fn),new Ft(sn[4]-wn,sn[5]-_n),new Ft(wn,_n),ln)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function($t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>($t||0)},isCollinear:function($t){return $t&&this.isStraight()&&$t.isStraight()&&this.getLine().isCollinear($t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function($t,Jt){return this.getLocationAtTime(Jt?$t:this.getTimeAt($t))},getLocationAtTime:function($t){return $t!=null&&$t>=0&&$t<=1?new Mn(this,$t):null},getTimeAt:function($t,Jt){return gn.getTimeAt(this.getValues(),$t,Jt)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var $t=Ft.read(arguments);return $t.isZero()?[]:gn.getTimesWithTangent(this.getValues(),$t)},getOffsetAtTime:function($t){return this.getPartLength(0,$t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(Ft.read(arguments)))},getOffsetOf:function(){var $t=this.getLocationOf.apply(this,arguments);return $t?$t.getOffset():null},getTimeOf:function(){return gn.getTimeOf(this.getValues(),Ft.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var $t=Ft.read(arguments),Jt=this.getValues(),sn=gn.getNearestTime(Jt,$t),ln=gn.getPoint(Jt,sn);return new Mn(this,sn,ln,null,$t.getDistance(ln))},getNearestPoint:function(){var $t=this.getNearestLocation.apply(this,arguments);return $t&&$t.getPoint()}},new function(){var $t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return ct.each($t,function(Jt){this[Jt+"At"]=function(sn,ln){var cn=this.getValues();return gn[Jt](cn,ln?sn:gn.getTimeAt(cn,sn))},this[Jt+"AtTime"]=function(sn){return gn[Jt](this.getValues(),sn)}},{statics:{_evaluateMethods:$t}})},new function(){function $t(ln){var cn=ln[0],fn=ln[1],wn=ln[2],_n=ln[3],Tn=ln[4],Nn=ln[5],Bn=ln[6],Hn=ln[7],Fn=9*(wn-Tn)+3*(Bn-cn),jn=6*(cn+Tn)-12*wn,Jn=3*(wn-cn),Wn=9*(_n-Nn)+3*(Hn-fn),Kn=6*(fn+Nn)-12*_n,zn=3*(_n-fn);return function(Gn){var Dn=(Fn*Gn+jn)*Gn+Jn,qn=(Wn*Gn+Kn)*Gn+zn;return Math.sqrt(Dn*Dn+qn*qn)}}function Jt(ln,cn){return Math.max(2,Math.min(16,Math.ceil(Math.abs(cn-ln)*32)))}function sn(ln,cn,fn,wn){if(cn==null||cn<0||cn>1)return null;var _n=ln[0],Tn=ln[1],Nn=ln[2],Bn=ln[3],Hn=ln[4],Fn=ln[5],jn=ln[6],Jn=ln[7],Wn=Rt.isZero;Wn(Nn-_n)&&Wn(Bn-Tn)&&(Nn=_n,Bn=Tn),Wn(Hn-jn)&&Wn(Fn-Jn)&&(Hn=jn,Fn=Jn);var Kn=3*(Nn-_n),zn=3*(Hn-Nn)-Kn,Gn=jn-_n-Kn-zn,Dn=3*(Bn-Tn),qn=3*(Fn-Bn)-Dn,Zn=Jn-Tn-Dn-qn,nr,Yn;if(fn===0)nr=cn===0?_n:cn===1?jn:((Gn*cn+zn)*cn+Kn)*cn+_n,Yn=cn===0?Tn:cn===1?Jn:((Zn*cn+qn)*cn+Dn)*cn+Tn;else{var sr=1e-8,ur=1-sr;if(cn<sr?(nr=Kn,Yn=Dn):cn>ur?(nr=3*(jn-Hn),Yn=3*(Jn-Fn)):(nr=(3*Gn*cn+2*zn)*cn+Kn,Yn=(3*Zn*cn+2*qn)*cn+Dn),wn){nr===0&&Yn===0&&(cn<sr||cn>ur)&&(nr=Hn-Nn,Yn=Fn-Bn);var dr=Math.sqrt(nr*nr+Yn*Yn);dr&&(nr/=dr,Yn/=dr)}if(fn===3){var Hn=6*Gn*cn+2*zn,Fn=6*Zn*cn+2*qn,gr=Math.pow(nr*nr+Yn*Yn,3/2);nr=gr!==0?(nr*Fn-Yn*Hn)/gr:0,Yn=0}}return fn===2?new Ft(Yn,-nr):new Ft(nr,Yn)}return{statics:{classify:function(ln){var cn=ln[0],fn=ln[1],wn=ln[2],_n=ln[3],Tn=ln[4],Nn=ln[5],Bn=ln[6],Hn=ln[7],Fn=cn*(Hn-Nn)+fn*(Tn-Bn)+Bn*Nn-Hn*Tn,jn=wn*(fn-Hn)+_n*(Bn-cn)+cn*Hn-fn*Bn,Jn=Tn*(_n-fn)+Nn*(cn-wn)+wn*fn-_n*cn,Wn=3*Jn,Kn=Wn-jn,zn=Kn-jn+Fn,Gn=Math.sqrt(zn*zn+Kn*Kn+Wn*Wn),Dn=Gn!==0?1/Gn:0,qn=Rt.isZero,Zn="serpentine";zn*=Dn,Kn*=Dn,Wn*=Dn;function nr(dr,gr,lr){var mr=gr!==et,yr=mr&&gr>0&&gr<1,br=mr&&lr>0&&lr<1;return mr&&(!(yr||br)||dr==="loop"&&!(yr&&br))&&(dr="arch",yr=br=!1),{type:dr,roots:yr||br?yr&&br?gr<lr?[gr,lr]:[lr,gr]:[yr?gr:lr]:null}}if(qn(zn))return qn(Kn)?nr(qn(Wn)?"line":"quadratic"):nr(Zn,Wn/(3*Kn));var Yn=3*Kn*Kn-4*zn*Wn;if(qn(Yn))return nr("cusp",Kn/(2*zn));var sr=Yn>0?Math.sqrt(Yn/3):Math.sqrt(-Yn),ur=2*zn;return nr(Yn>0?Zn:"loop",(Kn+sr)/ur,(Kn-sr)/ur)},getLength:function(ln,cn,fn,wn){if(cn===et&&(cn=0),fn===et&&(fn=1),gn.isStraight(ln)){var _n=ln;fn<1&&(_n=gn.subdivide(_n,fn)[0],cn/=fn),cn>0&&(_n=gn.subdivide(_n,cn)[1]);var Tn=_n[6]-_n[0],Nn=_n[7]-_n[1];return Math.sqrt(Tn*Tn+Nn*Nn)}return Rt.integrate(wn||$t(ln),cn,fn,Jt(cn,fn))},getTimeAt:function(ln,cn,fn){if(fn===et&&(fn=cn<0?1:0),cn===0)return fn;var wn=Math.abs,_n=1e-12,Tn=cn>0,Nn=Tn?fn:0,Bn=Tn?1:fn,Hn=$t(ln),Fn=gn.getLength(ln,Nn,Bn,Hn),jn=wn(cn)-Fn;if(wn(jn)<_n)return Tn?Bn:Nn;if(jn>_n)return null;var Jn=cn/Fn,Wn=0;function Kn(zn){return Wn+=Rt.integrate(Hn,fn,zn,Jt(fn,zn)),fn=zn,Wn-cn}return Rt.findRoot(Kn,Hn,fn+Jn,Nn,Bn,32,1e-12)},getPoint:function(ln,cn){return sn(ln,cn,0,!1)},getTangent:function(ln,cn){return sn(ln,cn,1,!0)},getWeightedTangent:function(ln,cn){return sn(ln,cn,1,!1)},getNormal:function(ln,cn){return sn(ln,cn,2,!0)},getWeightedNormal:function(ln,cn){return sn(ln,cn,2,!1)},getCurvature:function(ln,cn){return sn(ln,cn,3,!1).x},getPeaks:function(ln){var cn=ln[0],fn=ln[1],wn=ln[2],_n=ln[3],Tn=ln[4],Nn=ln[5],Bn=ln[6],Hn=ln[7],Fn=-cn+3*wn-3*Tn+Bn,jn=3*cn-6*wn+3*Tn,Jn=-3*cn+3*wn,Wn=-fn+3*_n-3*Nn+Hn,Kn=3*fn-6*_n+3*Nn,zn=-3*fn+3*_n,Gn=1e-8,Dn=1-Gn,qn=[];return Rt.solveCubic(9*(Fn*Fn+Wn*Wn),9*(Fn*jn+Kn*Wn),2*(jn*jn+Kn*Kn)+3*(Jn*Fn+zn*Wn),Jn*jn+Kn*zn,qn,Gn,Dn),qn.sort()}}}},new function(){function $t(jn,Jn,Wn,Kn,zn,Gn,Dn){var qn=!Dn&&Wn.getPrevious()===zn,Zn=!Dn&&Wn!==zn&&Wn.getNext()===zn,nr=1e-8,Yn=1-nr;if(Kn!==null&&Kn>=(qn?nr:0)&&Kn<=(Zn?Yn:1)&&Gn!==null&&Gn>=(Zn?nr:0)&&Gn<=(qn?Yn:1)){var sr=new Mn(Wn,Kn,null,Dn),ur=new Mn(zn,Gn,null,Dn);sr._intersection=ur,ur._intersection=sr,(!Jn||Jn(sr))&&Mn.insert(jn,sr,!0)}}function Jt(jn,Jn,Wn,Kn,zn,Gn,Dn,qn,Zn,nr,Yn,sr,ur){if(++Zn>=4096||++qn>=40)return Zn;var dr=1e-9,gr=Jn[0],lr=Jn[1],mr=Jn[6],yr=Jn[7],br=tn.getSignedDistance,Er=br(gr,lr,mr,yr,Jn[2],Jn[3]),Pr=br(gr,lr,mr,yr,Jn[4],Jn[5]),Hr=Er*Pr>0?3/4:4/9,Wr=Hr*Math.min(0,Er,Pr),Xr=Hr*Math.max(0,Er,Pr),es=br(gr,lr,mr,yr,jn[0],jn[1]),Dr=br(gr,lr,mr,yr,jn[2],jn[3]),$r=br(gr,lr,mr,yr,jn[4],jn[5]),Qr=br(gr,lr,mr,yr,jn[6],jn[7]),ss=sn(es,Dr,$r,Qr),ns=ss[0],ys=ss[1],gs,_s;if(Er===0&&Pr===0&&es===0&&Dr===0&&$r===0&&Qr===0||(gs=ln(ns,ys,Wr,Xr))==null||(_s=ln(ns.reverse(),ys.reverse(),Wr,Xr))==null)return Zn;var Ss=nr+(Yn-nr)*gs,vs=nr+(Yn-nr)*_s;if(Math.max(ur-sr,vs-Ss)<dr){var ga=(Ss+vs)/2,uo=(sr+ur)/2;$t(zn,Gn,Dn?Kn:Wn,Dn?uo:ga,Dn?Wn:Kn,Dn?ga:uo)}else{jn=gn.getPart(jn,gs,_s);var Lo=ur-sr;if(_s-gs>.8)if(vs-Ss>Lo){var Yr=gn.subdivide(jn,.5),ga=(Ss+vs)/2;Zn=Jt(Jn,Yr[0],Kn,Wn,zn,Gn,!Dn,qn,Zn,sr,ur,Ss,ga),Zn=Jt(Jn,Yr[1],Kn,Wn,zn,Gn,!Dn,qn,Zn,sr,ur,ga,vs)}else{var Yr=gn.subdivide(Jn,.5),uo=(sr+ur)/2;Zn=Jt(Yr[0],jn,Kn,Wn,zn,Gn,!Dn,qn,Zn,sr,uo,Ss,vs),Zn=Jt(Yr[1],jn,Kn,Wn,zn,Gn,!Dn,qn,Zn,uo,ur,Ss,vs)}else Lo===0||Lo>=dr?Zn=Jt(Jn,jn,Kn,Wn,zn,Gn,!Dn,qn,Zn,sr,ur,Ss,vs):Zn=Jt(jn,Jn,Wn,Kn,zn,Gn,Dn,qn,Zn,Ss,vs,sr,ur)}return Zn}function sn(jn,Jn,Wn,Kn){var zn=[0,jn],Gn=[1/3,Jn],Dn=[2/3,Wn],qn=[1,Kn],Zn=Jn-(2*jn+Kn)/3,nr=Wn-(jn+2*Kn)/3,Yn;if(Zn*nr<0)Yn=[[zn,Gn,qn],[zn,Dn,qn]];else{var sr=Zn/nr;Yn=[sr>=2?[zn,Gn,qn]:sr<=.5?[zn,Dn,qn]:[zn,Gn,Dn,qn],[zn,qn]]}return(Zn||nr)<0?Yn.reverse():Yn}function ln(jn,Jn,Wn,Kn){return jn[0][1]<Wn?cn(jn,!0,Wn):Jn[0][1]>Kn?cn(Jn,!1,Kn):jn[0][0]}function cn(jn,Jn,Wn){for(var Kn=jn[0][0],zn=jn[0][1],Gn=1,Dn=jn.length;Gn<Dn;Gn++){var qn=jn[Gn][0],Zn=jn[Gn][1];if(Jn?Zn>=Wn:Zn<=Wn)return Zn===Wn?qn:Kn+(Wn-zn)*(qn-Kn)/(Zn-zn);Kn=qn,zn=Zn}return null}function fn(jn,Jn,Wn,Kn,zn){var Gn=Rt.isZero;if(Gn(Kn)&&Gn(zn)){var Dn=gn.getTimeOf(jn,new Ft(Jn,Wn));return Dn===null?[]:[Dn]}for(var qn=Math.atan2(-zn,Kn),Zn=Math.sin(qn),nr=Math.cos(qn),Yn=[],sr=[],ur=0;ur<8;ur+=2){var dr=jn[ur]-Jn,gr=jn[ur+1]-Wn;Yn.push(dr*nr-gr*Zn,dr*Zn+gr*nr)}return gn.solveCubic(Yn,1,0,sr,0,1),sr}function wn(jn,Jn,Wn,Kn,zn,Gn,Dn){for(var qn=Jn[0],Zn=Jn[1],nr=Jn[6],Yn=Jn[7],sr=fn(jn,qn,Zn,nr-qn,Yn-Zn),ur=0,dr=sr.length;ur<dr;ur++){var gr=sr[ur],lr=gn.getPoint(jn,gr),mr=gn.getTimeOf(Jn,lr);mr!==null&&$t(zn,Gn,Dn?Kn:Wn,Dn?mr:gr,Dn?Wn:Kn,Dn?gr:mr)}}function _n(jn,Jn,Wn,Kn,zn,Gn){var Dn=tn.intersect(jn[0],jn[1],jn[6],jn[7],Jn[0],Jn[1],Jn[6],Jn[7]);Dn&&$t(zn,Gn,Wn,gn.getTimeOf(jn,Dn),Kn,gn.getTimeOf(Jn,Dn))}function Tn(jn,Jn,Wn,Kn,zn,Gn){var Dn=1e-12,qn=Math.min,Zn=Math.max;if(Zn(jn[0],jn[2],jn[4],jn[6])+Dn>qn(Jn[0],Jn[2],Jn[4],Jn[6])&&qn(jn[0],jn[2],jn[4],jn[6])-Dn<Zn(Jn[0],Jn[2],Jn[4],Jn[6])&&Zn(jn[1],jn[3],jn[5],jn[7])+Dn>qn(Jn[1],Jn[3],Jn[5],Jn[7])&&qn(jn[1],jn[3],jn[5],jn[7])-Dn<Zn(Jn[1],Jn[3],Jn[5],Jn[7])){var nr=Hn(jn,Jn);if(nr)for(var Yn=0;Yn<2;Yn++){var sr=nr[Yn];$t(zn,Gn,Wn,sr[0],Kn,sr[1],!0)}else{var ur=gn.isStraight(jn),dr=gn.isStraight(Jn),gr=ur&&dr,lr=ur&&!dr,mr=zn.length;if((gr?_n:ur||dr?wn:Jt)(lr?Jn:jn,lr?jn:Jn,lr?Kn:Wn,lr?Wn:Kn,zn,Gn,lr,0,0,0,1,0,1),!gr||zn.length===mr)for(var Yn=0;Yn<4;Yn++){var yr=Yn>>1,br=Yn&1,Er=yr*6,Pr=br*6,Hr=new Ft(jn[Er],jn[Er+1]),Wr=new Ft(Jn[Pr],Jn[Pr+1]);Hr.isClose(Wr,Dn)&&$t(zn,Gn,Wn,yr,Kn,br)}}}return zn}function Nn(jn,Jn,Wn,Kn){var zn=gn.classify(jn);if(zn.type==="loop"){var Gn=zn.roots;$t(Wn,Kn,Jn,Gn[0],Jn,Gn[1])}return Wn}function Bn(jn,Jn,Wn,Kn,zn,Gn){var Dn=1e-7,qn=!Jn;qn&&(Jn=jn);for(var Zn=jn.length,nr=Jn.length,Yn=new Array(Zn),sr=qn?Yn:new Array(nr),ur=[],dr=0;dr<Zn;dr++)Yn[dr]=jn[dr].getValues(Kn);if(!qn)for(var dr=0;dr<nr;dr++)sr[dr]=Jn[dr].getValues(zn);for(var gr=kt.findCurveBoundsCollisions(Yn,sr,Dn),lr=0;lr<Zn;lr++){var mr=jn[lr],yr=Yn[lr];qn&&Nn(yr,mr,ur,Wn);var br=gr[lr];if(br)for(var Er=0;Er<br.length;Er++){if(Gn&&ur.length)return ur;var Pr=br[Er];if(!qn||Pr>lr){var Hr=Jn[Pr],Wr=sr[Pr];Tn(yr,Wr,mr,Hr,ur,Wn)}}}return ur}function Hn(jn,Jn){function Wn(Qr){var ss=Qr[6]-Qr[0],ns=Qr[7]-Qr[1];return ss*ss+ns*ns}var Kn=Math.abs,zn=tn.getDistance,Gn=1e-8,Dn=1e-7,qn=gn.isStraight(jn),Zn=gn.isStraight(Jn),nr=qn&&Zn,Yn=Wn(jn)<Wn(Jn),sr=Yn?Jn:jn,ur=Yn?jn:Jn,dr=sr[0],gr=sr[1],lr=sr[6]-dr,mr=sr[7]-gr;if(zn(dr,gr,lr,mr,ur[0],ur[1],!0)<Dn&&zn(dr,gr,lr,mr,ur[6],ur[7],!0)<Dn)!nr&&zn(dr,gr,lr,mr,sr[2],sr[3],!0)<Dn&&zn(dr,gr,lr,mr,sr[4],sr[5],!0)<Dn&&zn(dr,gr,lr,mr,ur[2],ur[3],!0)<Dn&&zn(dr,gr,lr,mr,ur[4],ur[5],!0)<Dn&&(qn=Zn=nr=!0);else if(nr)return null;if(qn^Zn)return null;for(var yr=[jn,Jn],br=[],Er=0;Er<4&&br.length<2;Er++){var Pr=Er&1,Hr=Pr^1,Wr=Er>>1,Xr=gn.getTimeOf(yr[Pr],new Ft(yr[Hr][Wr?6:0],yr[Hr][Wr?7:1]));if(Xr!=null){var es=Pr?[Wr,Xr]:[Xr,Wr];(!br.length||Kn(es[0]-br[0][0])>Gn&&Kn(es[1]-br[0][1])>Gn)&&br.push(es)}if(Er>2&&!br.length)break}if(br.length!==2)br=null;else if(!nr){var Dr=gn.getPart(jn,br[0][0],br[1][0]),$r=gn.getPart(Jn,br[0][1],br[1][1]);(Kn($r[2]-Dr[2])>Dn||Kn($r[3]-Dr[3])>Dn||Kn($r[4]-Dr[4])>Dn||Kn($r[5]-Dr[5])>Dn)&&(br=null)}return br}function Fn(jn,Jn){var Wn=jn[0],Kn=jn[1],zn=jn[2],Gn=jn[3],Dn=jn[4],qn=jn[5],Zn=jn[6],nr=jn[7],Yn=Jn.normalize(),sr=Yn.x,ur=Yn.y,dr=3*Zn-9*Dn+9*zn-3*Wn,gr=3*nr-9*qn+9*Gn-3*Kn,lr=6*Dn-12*zn+6*Wn,mr=6*qn-12*Gn+6*Kn,yr=3*zn-3*Wn,br=3*Gn-3*Kn,Er=2*dr*ur-2*gr*sr,Pr=[];if(Math.abs(Er)<Rt.CURVETIME_EPSILON){var Hr=dr*br-gr*yr,Er=dr*mr-gr*lr;if(Er!=0){var Wr=-Hr/Er;Wr>=0&&Wr<=1&&Pr.push(Wr)}}else{var Xr=(lr*lr-4*dr*yr)*ur*ur+(-2*lr*mr+4*gr*yr+4*dr*br)*sr*ur+(mr*mr-4*gr*br)*sr*sr,es=lr*ur-mr*sr;if(Xr>=0&&Er!=0){var Dr=Math.sqrt(Xr),$r=-(es+Dr)/Er,Qr=(-es+Dr)/Er;$r>=0&&$r<=1&&Pr.push($r),Qr>=0&&Qr<=1&&Pr.push(Qr)}}return Pr}return{getIntersections:function(jn){var Jn=this.getValues(),Wn=jn&&jn!==this&&jn.getValues();return Wn?Tn(Jn,Wn,this,jn,[]):Nn(Jn,this,[])},statics:{getOverlaps:Hn,getIntersections:Bn,getCurveLineIntersections:fn,getTimesWithTangent:Fn}}}),Mn=ct.extend({_class:"CurveLocation",initialize:function(Jt,sn,ln,cn,fn){if(sn>=.99999999){var wn=Jt.getNext();wn&&(sn=0,Jt=wn)}this._setCurve(Jt),this._time=sn,this._point=ln||Jt.getPointAtTime(sn),this._overlap=cn,this._distance=fn,this._intersection=this._next=this._previous=null},_setPath:function($t){this._path=$t,this._version=$t?$t._version:0},_setCurve:function($t){this._setPath($t._path),this._curve=$t,this._segment=null,this._segment1=$t._segment1,this._segment2=$t._segment2},_setSegment:function($t){var Jt=$t.getCurve();Jt?this._setCurve(Jt):(this._setPath($t._path),this._segment1=$t,this._segment2=null),this._segment=$t,this._time=$t===this._segment1?0:1,this._point=$t._point.clone()},getSegment:function(){var $t=this._segment;if(!$t){var Jt=this.getCurve(),sn=this.getTime();sn===0?$t=Jt._segment1:sn===1?$t=Jt._segment2:sn!=null&&($t=Jt.getPartLength(0,sn)<Jt.getPartLength(sn,1)?Jt._segment1:Jt._segment2),this._segment=$t}return $t},getCurve:function(){var $t=this._path,Jt=this;$t&&$t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function sn(ln){var cn=ln&&ln.getCurve();if(cn&&(Jt._time=cn.getTimeOf(Jt._point))!=null)return Jt._setCurve(cn),cn}return this._curve||sn(this._segment)||sn(this._segment1)||sn(this._segment2.getPrevious())},getPath:function(){var $t=this.getCurve();return $t&&$t._path},getIndex:function(){var $t=this.getCurve();return $t&&$t.getIndex()},getTime:function(){var $t=this.getCurve(),Jt=this._time;return $t&&Jt==null?this._time=$t.getTimeOf(this._point):Jt},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var $t=this._offset;if($t==null){$t=0;var Jt=this.getPath(),sn=this.getIndex();if(Jt&&sn!=null)for(var ln=Jt.getCurves(),cn=0;cn<sn;cn++)$t+=ln[cn].getLength();this._offset=$t+=this.getCurveOffset()}return $t},getCurveOffset:function(){var $t=this._curveOffset;if($t==null){var Jt=this.getCurve(),sn=this.getTime();this._curveOffset=$t=sn!=null&&Jt&&Jt.getPartLength(0,sn)}return $t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var $t=this.getCurve(),Jt=$t&&$t.divideAtTime(this.getTime());return Jt&&this._setSegment(Jt._segment1),Jt},split:function(){var $t=this.getCurve(),Jt=$t._path,sn=$t&&$t.splitAtTime(this.getTime());return sn&&this._setSegment(Jt.getLastSegment()),sn},equals:function($t,Jt){var sn=this===$t;if(!sn&&$t instanceof Mn){var ln=this.getCurve(),cn=$t.getCurve(),fn=ln._path,wn=cn._path;if(fn===wn){var _n=Math.abs,Tn=1e-7,Nn=_n(this.getOffset()-$t.getOffset()),Bn=!Jt&&this._intersection,Hn=!Jt&&$t._intersection;sn=(Nn<Tn||fn&&_n(fn.getLength()-Nn)<Tn)&&(!Bn&&!Hn||Bn&&Hn&&Bn.equals(Hn,!0))}}return sn},toString:function(){var $t=[],Jt=this.getPoint(),sn=Tt.instance;Jt&&$t.push("point: "+Jt);var ln=this.getIndex();ln!=null&&$t.push("index: "+ln);var cn=this.getTime();return cn!=null&&$t.push("time: "+sn.number(cn)),this._distance!=null&&$t.push("distance: "+sn.number(this._distance)),"{ "+$t.join(", ")+" }"},isTouching:function(){var $t=this._intersection;if($t&&this.getTangent().isCollinear($t.getTangent())){var Jt=this.getCurve(),sn=$t.getCurve();return!(Jt.isStraight()&&sn.isStraight()&&Jt.getLine().intersect(sn.getLine()))}return!1},isCrossing:function(){var $t=this._intersection;if(!$t)return!1;var Jt=this.getTime(),sn=$t.getTime(),ln=1e-8,cn=1-ln,fn=Jt>=ln&&Jt<=cn,wn=sn>=ln&&sn<=cn;if(fn&&wn)return!this.isTouching();var _n=this.getCurve(),Tn=_n&&Jt<ln?_n.getPrevious():_n,Nn=$t.getCurve(),Bn=Nn&&sn<ln?Nn.getPrevious():Nn;if(Jt>cn&&(_n=_n.getNext()),sn>cn&&(Nn=Nn.getNext()),!Tn||!_n||!Bn||!Nn)return!1;var Hn=[];function Fn(sr,ur){var dr=sr.getValues(),gr=gn.classify(dr).roots||gn.getPeaks(dr),lr=gr.length,mr=gn.getLength(dr,ur&&lr?gr[lr-1]:0,!ur&&lr?gr[0]:1);Hn.push(lr?mr:mr/32)}function jn(sr,ur,dr){return ur<dr?sr>ur&&sr<dr:sr>ur||sr<dr}fn||(Fn(Tn,!0),Fn(_n,!1)),wn||(Fn(Bn,!0),Fn(Nn,!1));var Jn=this.getPoint(),Wn=Math.min.apply(Math,Hn),Kn=fn?_n.getTangentAtTime(Jt):_n.getPointAt(Wn).subtract(Jn),zn=fn?Kn.negate():Tn.getPointAt(-Wn).subtract(Jn),Gn=wn?Nn.getTangentAtTime(sn):Nn.getPointAt(Wn).subtract(Jn),Dn=wn?Gn.negate():Bn.getPointAt(-Wn).subtract(Jn),qn=zn.getAngle(),Zn=Kn.getAngle(),nr=Dn.getAngle(),Yn=Gn.getAngle();return!!(fn?jn(qn,nr,Yn)^jn(Zn,nr,Yn)&&jn(qn,Yn,nr)^jn(Zn,Yn,nr):jn(nr,qn,Zn)^jn(Yn,qn,Zn)&&jn(nr,Zn,qn)^jn(Yn,Zn,qn))},hasOverlap:function(){return!!this._overlap}},ct.each(gn._evaluateMethods,function($t){var Jt=$t+"At";this[$t]=function(){var sn=this.getCurve(),ln=this.getTime();return ln!=null&&sn&&sn[Jt](ln,!0)}},{preserve:!0}),new function(){function $t(Jt,sn,ln){var cn=Jt.length,fn=0,wn=cn-1;function _n(Jn,Wn){for(var Kn=Jn+Wn;Kn>=-1&&Kn<=cn;Kn+=Wn){var zn=Jt[(Kn%cn+cn)%cn];if(!sn.getPoint().isClose(zn.getPoint(),1e-7))break;if(sn.equals(zn))return zn}return null}for(;fn<=wn;){var Tn=fn+wn>>>1,Nn=Jt[Tn],Bn;if(ln&&(Bn=sn.equals(Nn)?Nn:_n(Tn,-1)||_n(Tn,1)))return sn._overlap&&(Bn._overlap=Bn._intersection._overlap=!0),Bn;var Hn=sn.getPath(),Fn=Nn.getPath(),jn=Hn!==Fn?Hn._id-Fn._id:sn.getIndex()+sn.getTime()-(Nn.getIndex()+Nn.getTime());jn<0?wn=Tn-1:fn=Tn+1}return Jt.splice(fn,0,sn),sn}return{statics:{insert:$t,expand:function(Jt){for(var sn=Jt.slice(),ln=Jt.length-1;ln>=0;ln--)$t(sn,Jt[ln]._intersection,!1);return sn}}}}),yn=an.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function($t){var Jt,sn,ln;if(ct.isPlainObject($t)?(sn=$t.segments,Jt=$t.pathData):Array.isArray($t)?sn=$t:typeof $t=="string"&&(Jt=$t),sn){var cn=sn[0];ln=cn&&Array.isArray(cn[0])}else Jt&&(ln=(Jt.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(Jt));var fn=ln?On:vn;return new fn($t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function($t){this.isClockwise()!=($t=!!$t)&&this.reverse()},setPathData:function($t){var Jt=$t&&$t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),sn,ln=!1,cn,fn,wn=new Ft,_n=new Ft;function Tn(Dn,qn){var Zn=+sn[Dn];return ln&&(Zn+=wn[qn]),Zn}function Nn(Dn){return new Ft(Tn(Dn,"x"),Tn(Dn+1,"y"))}this.clear();for(var Bn=0,Hn=Jt&&Jt.length;Bn<Hn;Bn++){var Fn=Jt[Bn],jn=Fn[0],Jn=jn.toLowerCase();sn=Fn.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Wn=sn&&sn.length;switch(ln=jn===Jn,cn==="z"&&!/[mz]/.test(Jn)&&this.moveTo(wn),Jn){case"m":case"l":for(var Kn=Jn==="m",zn=0;zn<Wn;zn+=2)this[Kn?"moveTo":"lineTo"](wn=Nn(zn)),Kn&&(_n=wn,Kn=!1);fn=wn;break;case"h":case"v":var Gn=Jn==="h"?"x":"y";wn=wn.clone();for(var zn=0;zn<Wn;zn++)wn[Gn]=Tn(zn,Gn),this.lineTo(wn);fn=wn;break;case"c":for(var zn=0;zn<Wn;zn+=6)this.cubicCurveTo(Nn(zn),fn=Nn(zn+2),wn=Nn(zn+4));break;case"s":for(var zn=0;zn<Wn;zn+=4)this.cubicCurveTo(/[cs]/.test(cn)?wn.multiply(2).subtract(fn):wn,fn=Nn(zn),wn=Nn(zn+2)),cn=Jn;break;case"q":for(var zn=0;zn<Wn;zn+=4)this.quadraticCurveTo(fn=Nn(zn),wn=Nn(zn+2));break;case"t":for(var zn=0;zn<Wn;zn+=2)this.quadraticCurveTo(fn=/[qt]/.test(cn)?wn.multiply(2).subtract(fn):wn,wn=Nn(zn)),cn=Jn;break;case"a":for(var zn=0;zn<Wn;zn+=7)this.arcTo(wn=Nn(zn+5),new Ht(+sn[zn],+sn[zn+1]),+sn[zn+2],+sn[zn+4],+sn[zn+3]);break;case"z":this.closePath(1e-12),wn=_n;break}cn=Jn}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function($t){var Jt=$t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding($t):{};return Jt.onPath||!!(this.getFillRule()==="evenodd"?Jt.windingL&1||Jt.windingR&1:Jt.winding)},getIntersections:function($t,Jt,sn,ln){var cn=this===$t||!$t,fn=this._matrix._orNullIfIdentity(),wn=cn?fn:(sn||$t._matrix)._orNullIfIdentity();return cn||this.getBounds(fn).intersects($t.getBounds(wn),1e-12)?gn.getIntersections(this.getCurves(),!cn&&$t.getCurves(),Jt,fn,wn,ln):[]},getCrossings:function($t){return this.getIntersections($t,function(Jt){return Jt.isCrossing()})},getNearestLocation:function(){for(var $t=Ft.read(arguments),Jt=this.getCurves(),sn=1/0,ln=null,cn=0,fn=Jt.length;cn<fn;cn++){var wn=Jt[cn].getNearestLocation($t);wn._distance<sn&&(sn=wn._distance,ln=wn)}return ln},getNearestPoint:function(){var $t=this.getNearestLocation.apply(this,arguments);return $t&&$t.getPoint()},interpolate:function($t,Jt,sn){var ln=!this._children,cn=ln?"_segments":"_children",fn=$t[cn],wn=Jt[cn],_n=this[cn];if(!fn||!wn||fn.length!==wn.length)throw new Error("Invalid operands in interpolate() call: "+$t+", "+Jt);var Tn=_n.length,Nn=wn.length;if(Tn<Nn)for(var Bn=ln?Pn:vn,Hn=Tn;Hn<Nn;Hn++)this.add(new Bn);else Tn>Nn&&this[ln?"removeSegments":"removeChildren"](Nn,Tn);for(var Hn=0;Hn<Nn;Hn++)_n[Hn].interpolate(fn[Hn],wn[Hn],sn);ln&&(this.setClosed($t._closed),this._changed(9))},compare:function($t){var Jt=!1;if($t){var sn=this._children||[this],ln=$t._children?$t._children.slice():[$t],cn=sn.length,fn=ln.length,wn=[],_n=0;Jt=!0;for(var Tn=kt.findItemBoundsCollisions(sn,ln,Rt.GEOMETRIC_EPSILON),Nn=cn-1;Nn>=0&&Jt;Nn--){var Bn=sn[Nn];Jt=!1;var Hn=Tn[Nn];if(Hn)for(var Fn=Hn.length-1;Fn>=0&&!Jt;Fn--)Bn.compare(ln[Hn[Fn]])&&(wn[Hn[Fn]]||(wn[Hn[Fn]]=!0,_n++),Jt=!0)}Jt=Jt&&_n===fn}return Jt}}),vn=yn.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(Jt){this._closed=!1,this._segments=[],this._version=0;var sn=arguments,ln=Array.isArray(Jt)?typeof Jt[0]=="object"?Jt:sn:Jt&&Jt.size===et&&(Jt.x!==et||Jt.point!==et)?sn:null;ln&&ln.length>0?this.setSegments(ln):(this._curves=et,this._segmentSelection=0,!ln&&typeof Jt=="string"&&(this.setPathData(Jt),Jt=null)),this._initialize(!ln&&Jt)},_equals:function($t){return this._closed===$t._closed&&ct.equals(this._segments,$t._segments)},copyContent:function($t){this.setSegments($t._segments),this._closed=$t._closed},_changed:function $t(Jt){if($t.base.call(this,Jt),Jt&8){if(this._length=this._area=et,Jt&32)this._version++;else if(this._curves)for(var sn=0,ln=this._curves.length;sn<ln;sn++)this._curves[sn]._changed()}else Jt&64&&(this._bounds=et)},getStyle:function(){var $t=this._parent;return($t instanceof On?$t:this)._style},getSegments:function(){return this._segments},setSegments:function($t){var Jt=this.isFullySelected(),sn=$t&&$t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=et,sn){var ln=$t[sn-1];typeof ln=="boolean"&&(this.setClosed(ln),sn--),this._add(Pn.readList($t,0,{},sn))}Jt&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var $t=this._curves,Jt=this._segments;if(!$t){var sn=this._countCurves();$t=this._curves=new Array(sn);for(var ln=0;ln<sn;ln++)$t[ln]=new gn(this,Jt[ln],Jt[ln+1]||Jt[0])}return $t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var $t=this.getCurves();return $t[$t.length-1]},isClosed:function(){return this._closed},setClosed:function($t){if(this._closed!=($t=!!$t)){if(this._closed=$t,this._curves){var Jt=this._curves.length=this._countCurves();$t&&(this._curves[Jt-1]=new gn(this,this._segments[Jt-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function($t,Jt){var sn=this._segments,ln=sn.length,cn=new Tt(Jt),fn=new Array(6),wn=!0,_n,Tn,Nn,Bn,Hn,Fn,jn,Jn,Wn=[];function Kn(Gn,Dn){if(Gn._transformCoordinates($t,fn),_n=fn[0],Tn=fn[1],wn)Wn.push("M"+cn.pair(_n,Tn)),wn=!1;else if(Hn=fn[2],Fn=fn[3],Hn===_n&&Fn===Tn&&jn===Nn&&Jn===Bn){if(!Dn){var qn=_n-Nn,Zn=Tn-Bn;Wn.push(qn===0?"v"+cn.number(Zn):Zn===0?"h"+cn.number(qn):"l"+cn.pair(qn,Zn))}}else Wn.push("c"+cn.pair(jn-Nn,Jn-Bn)+" "+cn.pair(Hn-Nn,Fn-Bn)+" "+cn.pair(_n-Nn,Tn-Bn));Nn=_n,Bn=Tn,jn=fn[4],Jn=fn[5]}if(!ln)return"";for(var zn=0;zn<ln;zn++)Kn(sn[zn]);return this._closed&&ln>0&&(Kn(sn[0],!0),Wn.push("z")),Wn.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function($t){for(var Jt=this._segments,sn=new Array(6),ln=0,cn=Jt.length;ln<cn;ln++)Jt[ln]._transformCoordinates($t,sn,!0);return!0},_add:function($t,wn){for(var sn=this._segments,ln=this._curves,cn=$t.length,fn=wn==null,wn=fn?sn.length:wn,_n=0;_n<cn;_n++){var Tn=$t[_n];Tn._path&&(Tn=$t[_n]=Tn.clone()),Tn._path=this,Tn._index=wn+_n,Tn._selection&&this._updateSelection(Tn,0,Tn._selection)}if(fn)ct.push(sn,$t);else{sn.splice.apply(sn,[wn,0].concat($t));for(var _n=wn+cn,Nn=sn.length;_n<Nn;_n++)sn[_n]._index=_n}if(ln){var Bn=this._countCurves(),Hn=wn>0&&wn+cn-1===Bn?wn-1:wn,Fn=Hn,jn=Math.min(Hn+cn,Bn);$t._curves&&(ln.splice.apply(ln,[Hn,0].concat($t._curves)),Fn+=$t._curves.length);for(var _n=Fn;_n<jn;_n++)ln.splice(_n,0,new gn(this,null,null));this._adjustCurves(Hn,jn)}return this._changed(41),$t},_adjustCurves:function($t,Jt){for(var sn=this._segments,ln=this._curves,cn,fn=$t;fn<Jt;fn++)cn=ln[fn],cn._path=this,cn._segment1=sn[fn],cn._segment2=sn[fn+1]||sn[0],cn._changed();(cn=ln[this._closed&&!$t?sn.length-1:$t-1])&&(cn._segment2=sn[$t]||sn[0],cn._changed()),(cn=ln[Jt])&&(cn._segment1=sn[Jt],cn._changed())},_countCurves:function(){var $t=this._segments.length;return!this._closed&&$t>0?$t-1:$t},add:function($t){var Jt=arguments;return Jt.length>1&&typeof $t!="number"?this._add(Pn.readList(Jt)):this._add([Pn.read(Jt)])[0]},insert:function($t,Jt){var sn=arguments;return sn.length>2&&typeof Jt!="number"?this._add(Pn.readList(sn,1),$t):this._add([Pn.read(sn,1)],$t)[0]},addSegment:function(){return this._add([Pn.read(arguments)])[0]},insertSegment:function($t){return this._add([Pn.read(arguments,1)],$t)[0]},addSegments:function($t){return this._add(Pn.readList($t))},insertSegments:function($t,Jt){return this._add(Pn.readList(Jt),$t)},removeSegment:function($t){return this.removeSegments($t,$t+1)[0]||null},removeSegments:function($t,Jt,sn){$t=$t||0,Jt=ct.pick(Jt,this._segments.length);var ln=this._segments,cn=this._curves,fn=ln.length,wn=ln.splice($t,Jt-$t),_n=wn.length;if(!_n)return wn;for(var Tn=0;Tn<_n;Tn++){var Nn=wn[Tn];Nn._selection&&this._updateSelection(Nn,Nn._selection,0),Nn._index=Nn._path=null}for(var Tn=$t,Bn=ln.length;Tn<Bn;Tn++)ln[Tn]._index=Tn;if(cn){for(var Hn=$t>0&&Jt===fn+(this._closed?1:0)?$t-1:$t,cn=cn.splice(Hn,_n),Tn=cn.length-1;Tn>=0;Tn--)cn[Tn]._path=null;sn&&(wn._curves=cn.slice(1)),this._adjustCurves(Hn,Hn)}return this._changed(41),wn},clear:"#removeSegments",hasHandles:function(){for(var $t=this._segments,Jt=0,sn=$t.length;Jt<sn;Jt++)if($t[Jt].hasHandles())return!0;return!1},clearHandles:function(){for(var $t=this._segments,Jt=0,sn=$t.length;Jt<sn;Jt++)$t[Jt].clearHandles()},getLength:function(){if(this._length==null){for(var $t=this.getCurves(),Jt=0,sn=0,ln=$t.length;sn<ln;sn++)Jt+=$t[sn].getLength();this._length=Jt}return this._length},getArea:function(){var $t=this._area;if($t==null){var Jt=this._segments,sn=this._closed;$t=0;for(var ln=0,cn=Jt.length;ln<cn;ln++){var fn=ln+1===cn;$t+=gn.getArea(gn.getValues(Jt[ln],Jt[fn?0:ln+1],null,fn&&!sn))}this._area=$t}return $t},isFullySelected:function(){var $t=this._segments.length;return this.isSelected()&&$t>0&&this._segmentSelection===$t*7},setFullySelected:function($t){$t&&this._selectSegments(!0),this.setSelected($t)},setSelection:function $t(Jt){Jt&1||this._selectSegments(!1),$t.base.call(this,Jt)},_selectSegments:function($t){var Jt=this._segments,sn=Jt.length,ln=$t?7:0;this._segmentSelection=ln*sn;for(var cn=0;cn<sn;cn++)Jt[cn]._selection=ln},_updateSelection:function($t,Jt,sn){$t._selection=sn;var ln=this._segmentSelection+=sn-Jt;ln>0&&this.setSelected(!0)},divideAt:function($t){var Jt=this.getLocationAt($t),sn;return Jt&&(sn=Jt.getCurve().divideAt(Jt.getCurveOffset()))?sn._segment1:null},splitAt:function($t){var Jt=this.getLocationAt($t),sn=Jt&&Jt.index,ln=Jt&&Jt.time,cn=1e-8,fn=1-cn;ln>fn&&(sn++,ln=0);var wn=this.getCurves();if(sn>=0&&sn<wn.length){ln>=cn&&wn[sn++].divideAtTime(ln);var _n=this.removeSegments(sn,this._segments.length,!0),Tn;return this._closed?(this.setClosed(!1),Tn=this):(Tn=new vn(an.NO_INSERT),Tn.insertAbove(this),Tn.copyAttributes(this)),Tn._add(_n,0),this.addSegment(_n[0]),Tn}return null},split:function($t,Jt){var sn,ln=Jt===et?$t:(sn=this.getCurves()[$t])&&sn.getLocationAtTime(Jt);return ln!=null?this.splitAt(ln):null},join:function($t,Jt){var sn=Jt||0;if($t&&$t!==this){var ln=$t._segments,cn=this.getLastSegment(),fn=$t.getLastSegment();if(!fn)return this;cn&&cn._point.isClose(fn._point,sn)&&$t.reverse();var wn=$t.getFirstSegment();if(cn&&cn._point.isClose(wn._point,sn))cn.setHandleOut(wn._handleOut),this._add(ln.slice(1));else{var _n=this.getFirstSegment();_n&&_n._point.isClose(wn._point,sn)&&$t.reverse(),fn=$t.getLastSegment(),_n&&_n._point.isClose(fn._point,sn)?(_n.setHandleIn(fn._handleIn),this._add(ln.slice(0,ln.length-1),0)):this._add(ln.slice())}$t._closed&&this._add([ln[0]]),$t.remove()}var Tn=this.getFirstSegment(),Nn=this.getLastSegment();return Tn!==Nn&&Tn._point.isClose(Nn._point,sn)&&(Tn.setHandleIn(Nn._handleIn),Nn.remove(),this.setClosed(!0)),this},reduce:function($t){for(var Jt=this.getCurves(),sn=$t&&$t.simplify,ln=sn?1e-7:0,cn=Jt.length-1;cn>=0;cn--){var fn=Jt[cn];!fn.hasHandles()&&(!fn.hasLength(ln)||sn&&fn.isCollinear(fn.getNext()))&&fn.remove()}return this},reverse:function(){this._segments.reverse();for(var $t=0,Jt=this._segments.length;$t<Jt;$t++){var sn=this._segments[$t],ln=sn._handleIn;sn._handleIn=sn._handleOut,sn._handleOut=ln,sn._index=$t}this._curves=null,this._changed(9)},flatten:function($t){for(var Jt=new Cn(this,$t||.25,256,!0),sn=Jt.parts,ln=sn.length,cn=[],fn=0;fn<ln;fn++)cn.push(new Pn(sn[fn].curve.slice(0,2)));!this._closed&&ln>0&&cn.push(new Pn(sn[ln-1].curve.slice(6))),this.setSegments(cn)},simplify:function($t){var Jt=new Vn(this).fit($t||2.5);return Jt&&this.setSegments(Jt),!!Jt},smooth:function($t){var Jt=this,sn=$t||{},ln=sn.type||"asymmetric",cn=this._segments,fn=cn.length,wn=this._closed;function _n(ns,ys){var gs=ns&&ns.index;if(gs!=null){var _s=ns.path;if(_s&&_s!==Jt)throw new Error(ns._class+" "+gs+" of "+_s+" is not part of "+Jt);ys&&ns instanceof gn&&gs++}else gs=typeof ns=="number"?ns:ys;return Math.min(gs<0&&wn?gs%fn:gs<0?gs+fn:gs,fn-1)}var Tn=wn&&sn.from===et&&sn.to===et,Nn=_n(sn.from,0),Bn=_n(sn.to,fn-1);if(Nn>Bn)if(wn)Nn-=fn;else{var Hn=Nn;Nn=Bn,Bn=Hn}if(/^(?:asymmetric|continuous)$/.test(ln)){var Fn=ln==="asymmetric",jn=Math.min,Jn=Bn-Nn+1,Wn=Jn-1,Kn=Tn?jn(Jn,4):1,zn=Kn,Gn=Kn,Dn=[];if(wn||(zn=jn(1,Nn),Gn=jn(1,fn-Bn-1)),Wn+=zn+Gn,Wn<=1)return;for(var qn=0,Zn=Nn-zn;qn<=Wn;qn++,Zn++)Dn[qn]=cn[(Zn<0?Zn+fn:Zn)%fn]._point;for(var nr=Dn[0]._x+2*Dn[1]._x,Yn=Dn[0]._y+2*Dn[1]._y,sr=2,ur=Wn-1,dr=[nr],gr=[Yn],lr=[sr],mr=[],yr=[],qn=1;qn<Wn;qn++){var br=qn<ur,Er=br||Fn?1:2,Pr=br?4:Fn?2:7,Hr=br?4:Fn?3:8,Wr=br?2:Fn?0:1,Xr=Er/sr;sr=lr[qn]=Pr-Xr,nr=dr[qn]=Hr*Dn[qn]._x+Wr*Dn[qn+1]._x-Xr*nr,Yn=gr[qn]=Hr*Dn[qn]._y+Wr*Dn[qn+1]._y-Xr*Yn}mr[ur]=dr[ur]/lr[ur],yr[ur]=gr[ur]/lr[ur];for(var qn=Wn-2;qn>=0;qn--)mr[qn]=(dr[qn]-mr[qn+1])/lr[qn],yr[qn]=(gr[qn]-yr[qn+1])/lr[qn];mr[Wn]=(3*Dn[Wn]._x-mr[ur])/2,yr[Wn]=(3*Dn[Wn]._y-yr[ur])/2;for(var qn=zn,es=Wn-Gn,Zn=Nn;qn<=es;qn++,Zn++){var Dr=cn[Zn<0?Zn+fn:Zn],$r=Dr._point,Qr=mr[qn]-$r._x,ss=yr[qn]-$r._y;(Tn||qn<es)&&Dr.setHandleOut(Qr,ss),(Tn||qn>zn)&&Dr.setHandleIn(-Qr,-ss)}}else for(var qn=Nn;qn<=Bn;qn++)cn[qn<0?qn+fn:qn].smooth(sn,!Tn&&qn===Nn,!Tn&&qn===Bn)},toShape:function($t){if(!this._closed)return null;var Jt=this._segments,sn,ln,cn,fn;function wn(Fn,jn){var Jn=Jt[Fn],Wn=Jn.getNext(),Kn=Jt[jn],zn=Kn.getNext();return Jn._handleOut.isZero()&&Wn._handleIn.isZero()&&Kn._handleOut.isZero()&&zn._handleIn.isZero()&&Wn._point.subtract(Jn._point).isCollinear(zn._point.subtract(Kn._point))}function _n(Fn){var jn=Jt[Fn],Jn=jn.getPrevious(),Wn=jn.getNext();return Jn._handleOut.isZero()&&jn._handleIn.isZero()&&jn._handleOut.isZero()&&Wn._handleIn.isZero()&&jn._point.subtract(Jn._point).isOrthogonal(Wn._point.subtract(jn._point))}function Tn(Fn){var jn=Jt[Fn],Jn=jn.getNext(),Wn=jn._handleOut,Kn=Jn._handleIn,zn=.5522847498307936;if(Wn.isOrthogonal(Kn)){var Gn=jn._point,Dn=Jn._point,qn=new tn(Gn,Wn,!0).intersect(new tn(Dn,Kn,!0),!0);return qn&&Rt.isZero(Wn.getLength()/qn.subtract(Gn).getLength()-zn)&&Rt.isZero(Kn.getLength()/qn.subtract(Dn).getLength()-zn)}return!1}function Nn(Fn,jn){return Jt[Fn]._point.getDistance(Jt[jn]._point)}if(!this.hasHandles()&&Jt.length===4&&wn(0,2)&&wn(1,3)&&_n(1)?(sn=Sn.Rectangle,ln=new Ht(Nn(0,3),Nn(0,1)),fn=Jt[1]._point.add(Jt[2]._point).divide(2)):Jt.length===8&&Tn(0)&&Tn(2)&&Tn(4)&&Tn(6)&&wn(1,5)&&wn(3,7)?(sn=Sn.Rectangle,ln=new Ht(Nn(1,6),Nn(0,3)),cn=ln.subtract(new Ht(Nn(0,7),Nn(1,2))).divide(2),fn=Jt[3]._point.add(Jt[4]._point).divide(2)):Jt.length===4&&Tn(0)&&Tn(1)&&Tn(2)&&Tn(3)&&(Rt.isZero(Nn(0,2)-Nn(1,3))?(sn=Sn.Circle,cn=Nn(0,2)/2):(sn=Sn.Ellipse,cn=new Ht(Nn(2,0)/2,Nn(3,1)/2)),fn=Jt[1]._point),sn){var Bn=this.getPosition(!0),Hn=new sn({center:Bn,size:ln,radius:cn,insert:!1});return Hn.copyAttributes(this,!0),Hn._matrix.prepend(this._matrix),Hn.rotate(fn.subtract(Bn).getAngle()+90),($t===et||$t)&&Hn.insertAbove(this),Hn}return null},toPath:"#clone",compare:function $t(Jt){if(!Jt||Jt instanceof On)return $t.base.call(this,Jt);var sn=this.getCurves(),ln=Jt.getCurves(),cn=sn.length,fn=ln.length;if(!cn||!fn)return cn==fn;for(var wn=sn[0].getValues(),_n=[],Tn=0,Nn,Bn=0,Hn,Fn=0;Fn<fn;Fn++){var Kn=ln[Fn].getValues();_n.push(Kn);var jn=gn.getOverlaps(wn,Kn);if(jn){Nn=!Fn&&jn[0][0]>0?fn-1:Fn,Hn=jn[0][1];break}}for(var Jn=Math.abs,Wn=1e-8,Kn=_n[Nn],zn;wn&&Kn;){var jn=gn.getOverlaps(wn,Kn);if(jn){var Gn=jn[0][0];if(Jn(Gn-Bn)<Wn){Bn=jn[1][0],Bn===1&&(wn=++Tn<cn?sn[Tn].getValues():null,Bn=0);var Dn=jn[0][1];if(Jn(Dn-Hn)<Wn){if(zn||(zn=[Nn,Dn]),Hn=jn[1][1],Hn===1&&(++Nn>=fn&&(Nn=0),Kn=_n[Nn]||ln[Nn].getValues(),Hn=0),!wn)return zn[0]===Nn&&zn[1]===Hn;continue}}}break}return!1},_hitTestSelf:function($t,Jt,sn,ln){var cn=this,fn=this.getStyle(),wn=this._segments,_n=wn.length,Tn=this._closed,Nn=Jt._tolerancePadding,Bn=Nn,Hn,Fn,jn,Jn,Wn,Kn,zn=Jt.stroke&&fn.hasStroke(),Gn=Jt.fill&&fn.hasFill(),Dn=Jt.curves,qn=zn?fn.getStrokeWidth()/2:Gn&&Jt.tolerance>0||Dn?0:null;qn!==null&&(qn>0?(Hn=fn.getStrokeJoin(),Fn=fn.getStrokeCap(),jn=fn.getMiterLimit(),Bn=Bn.add(vn._getStrokePadding(qn,ln))):Hn=Fn="round");function Zn(mr,yr){return $t.subtract(mr).divide(yr).length<=1}function nr(mr,yr,br){if(!Jt.selected||yr.isSelected()){var Er=mr._point;if(yr!==Er&&(yr=yr.add(Er)),Zn(yr,Bn))return new kn(br,cn,{segment:mr,point:yr})}}function Yn(mr,yr){return(yr||Jt.segments)&&nr(mr,mr._point,"segment")||!yr&&Jt.handles&&(nr(mr,mr._handleIn,"handle-in")||nr(mr,mr._handleOut,"handle-out"))}function sr(mr){Jn.add(mr)}function ur(mr){var yr=Tn||mr._index>0&&mr._index<_n-1;if((yr?Hn:Fn)==="round")return Zn(mr._point,Bn);if(Jn=new vn({internal:!0,closed:!0}),yr?mr.isSmooth()||vn._addBevelJoin(mr,Hn,qn,jn,null,ln,sr,!0):Fn==="square"&&vn._addSquareCap(mr,Fn,qn,null,ln,sr,!0),!Jn.isEmpty()){var br;return Jn.contains($t)||(br=Jn.getNearestLocation($t))&&Zn(br.getPoint(),Nn)}}if(Jt.ends&&!Jt.segments&&!Tn){if(Kn=Yn(wn[0],!0)||Yn(wn[_n-1],!0))return Kn}else if(Jt.segments||Jt.handles){for(var dr=0;dr<_n;dr++)if(Kn=Yn(wn[dr]))return Kn}if(qn!==null){if(Wn=this.getNearestLocation($t),Wn){var gr=Wn.getTime();gr===0||gr===1&&_n>1?ur(Wn.getSegment())||(Wn=null):Zn(Wn.getPoint(),Bn)||(Wn=null)}if(!Wn&&Hn==="miter"&&_n>1)for(var dr=0;dr<_n;dr++){var lr=wn[dr];if($t.getDistance(lr._point)<=jn*qn&&ur(lr)){Wn=lr.getLocation();break}}}return!Wn&&Gn&&this._contains($t)||Wn&&!zn&&!Dn?new kn("fill",this):Wn?new kn(zn?"stroke":"curve",this,{location:Wn,point:Wn.getPoint()}):null}},ct.each(gn._evaluateMethods,function($t){this[$t+"At"]=function(Jt){var sn=this.getLocationAt(Jt);return sn&&sn[$t]()}},{beans:!1,getLocationOf:function(){for(var $t=Ft.read(arguments),Jt=this.getCurves(),sn=0,ln=Jt.length;sn<ln;sn++){var cn=Jt[sn].getLocationOf($t);if(cn)return cn}return null},getOffsetOf:function(){var $t=this.getLocationOf.apply(this,arguments);return $t?$t.getOffset():null},getLocationAt:function($t){if(typeof $t=="number"){for(var Jt=this.getCurves(),sn=0,ln=0,cn=Jt.length;ln<cn;ln++){var fn=sn,wn=Jt[ln];if(sn+=wn.getLength(),sn>$t)return wn.getLocationAt($t-fn)}if(Jt.length>0&&$t<=this.getLength())return new Mn(Jt[Jt.length-1],1)}else if($t&&$t.getPath&&$t.getPath()===this)return $t;return null},getOffsetsWithTangent:function(){var $t=Ft.read(arguments);if($t.isZero())return[];for(var Jt=[],sn=0,ln=this.getCurves(),cn=0,fn=ln.length;cn<fn;cn++){for(var wn=ln[cn],_n=wn.getTimesWithTangent($t),Tn=0,Nn=_n.length;Tn<Nn;Tn++){var Bn=sn+wn.getOffsetAtTime(_n[Tn]);Jt.indexOf(Bn)<0&&Jt.push(Bn)}sn+=wn.length}return Jt}}),new function(){function $t(sn,ln,cn,fn){if(fn<=0)return;var wn=fn/2,_n=fn-2,Tn=wn-1,Nn=new Array(6),Bn,Hn;function Fn(Gn){var Dn=Nn[Gn],qn=Nn[Gn+1];(Bn!=Dn||Hn!=qn)&&(sn.beginPath(),sn.moveTo(Bn,Hn),sn.lineTo(Dn,qn),sn.stroke(),sn.beginPath(),sn.arc(Dn,qn,wn,0,Math.PI*2,!0),sn.fill())}for(var jn=0,Jn=ln.length;jn<Jn;jn++){var Wn=ln[jn],Kn=Wn._selection;if(Wn._transformCoordinates(cn,Nn),Bn=Nn[0],Hn=Nn[1],Kn&2&&Fn(2),Kn&4&&Fn(4),sn.fillRect(Bn-wn,Hn-wn,fn,fn),_n>0&&!(Kn&1)){var zn=sn.fillStyle;sn.fillStyle="#ffffff",sn.fillRect(Bn-Tn,Hn-Tn,_n,_n),sn.fillStyle=zn}}}function Jt(sn,ln,cn){var fn=ln._segments,wn=fn.length,_n=new Array(6),Tn=!0,Nn,Bn,Hn,Fn,jn,Jn,Wn,Kn;function zn(Dn){if(cn)Dn._transformCoordinates(cn,_n),Nn=_n[0],Bn=_n[1];else{var qn=Dn._point;Nn=qn._x,Bn=qn._y}if(Tn)sn.moveTo(Nn,Bn),Tn=!1;else{if(cn)jn=_n[2],Jn=_n[3];else{var Zn=Dn._handleIn;jn=Nn+Zn._x,Jn=Bn+Zn._y}jn===Nn&&Jn===Bn&&Wn===Hn&&Kn===Fn?sn.lineTo(Nn,Bn):sn.bezierCurveTo(Wn,Kn,jn,Jn,Nn,Bn)}if(Hn=Nn,Fn=Bn,cn)Wn=_n[4],Kn=_n[5];else{var Zn=Dn._handleOut;Wn=Hn+Zn._x,Kn=Fn+Zn._y}}for(var Gn=0;Gn<wn;Gn++)zn(fn[Gn]);ln._closed&&wn>0&&zn(fn[0])}return{_draw:function(sn,ln,cn,fn){var wn=ln.dontStart,_n=ln.dontFinish||ln.clip,Tn=this.getStyle(),Nn=Tn.hasFill(),Bn=Tn.hasStroke(),Hn=Tn.getDashArray(),Fn=!Kr.support.nativeDash&&Bn&&Hn&&Hn.length;wn||sn.beginPath(),(Nn||Bn&&!Fn||_n)&&(Jt(sn,this,fn),this._closed&&sn.closePath());function jn(Dn){return Hn[(Dn%Fn+Fn)%Fn]}if(!_n&&(Nn||Bn)&&(this._setStyles(sn,ln,cn),Nn&&(sn.fill(Tn.getFillRule()),sn.shadowColor="rgba(0,0,0,0)"),Bn)){if(Fn){wn||sn.beginPath();for(var Jn=new Cn(this,.25,32,!1,fn),Wn=Jn.length,Kn=-Tn.getDashOffset(),zn,Gn=0;Kn>0;)Kn-=jn(Gn--)+jn(Gn--);for(;Kn<Wn;)zn=Kn+jn(Gn++),(Kn>0||zn>0)&&Jn.drawPart(sn,Math.max(Kn,0),Math.max(zn,0)),Kn=zn+jn(Gn++)}sn.stroke()}},_drawSelected:function(sn,ln){sn.beginPath(),Jt(sn,this,ln),sn.stroke(),$t(sn,this._segments,ln,Kr.settings.handleSize)}}},new function(){function $t(Jt){var sn=Jt._segments;if(!sn.length)throw new Error("Use a moveTo() command first");return sn[sn.length-1]}return{moveTo:function(){var Jt=this._segments;Jt.length===1&&this.removeSegment(0),Jt.length||this._add([new Pn(Ft.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Pn(Ft.read(arguments))])},cubicCurveTo:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=Ft.read(Jt),fn=$t(this);fn.setHandleOut(sn.subtract(fn._point)),this._add([new Pn(cn,ln.subtract(cn))])},quadraticCurveTo:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=$t(this)._point;this.cubicCurveTo(sn.add(cn.subtract(sn).multiply(1/3)),sn.add(ln.subtract(sn).multiply(1/3)),ln)},curveTo:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=ct.pick(ct.read(Jt),.5),fn=1-cn,wn=$t(this)._point,_n=sn.subtract(wn.multiply(fn*fn)).subtract(ln.multiply(cn*cn)).divide(2*cn*fn);if(_n.isNaN())throw new Error("Cannot put a curve through points with parameter = "+cn);this.quadraticCurveTo(_n,ln)},arcTo:function(){var Jt=arguments,sn=Math.abs,ln=Math.sqrt,cn=$t(this),fn=cn._point,wn=Ft.read(Jt),_n,Tn=ct.peek(Jt),Nn=ct.pick(Tn,!0),Bn,Hn,Fn,jn;if(typeof Nn=="boolean")var Jn=fn.add(wn).divide(2),_n=Jn.add(Jn.subtract(fn).rotate(Nn?-90:90));else if(ct.remain(Jt)<=2)_n=wn,wn=Ft.read(Jt);else if(!fn.equals(wn)){var Wn=Ht.read(Jt),Kn=Rt.isZero;if(Kn(Wn.width)||Kn(Wn.height))return this.lineTo(wn);var zn=ct.read(Jt),Nn=!!ct.read(Jt),Gn=!!ct.read(Jt),Jn=fn.add(wn).divide(2),Dn=fn.subtract(Jn).rotate(-zn),qn=Dn.x,Zn=Dn.y,nr=sn(Wn.width),Yn=sn(Wn.height),sr=nr*nr,ur=Yn*Yn,dr=qn*qn,gr=Zn*Zn,lr=ln(dr/sr+gr/ur);if(lr>1&&(nr*=lr,Yn*=lr,sr=nr*nr,ur=Yn*Yn),lr=(sr*ur-sr*gr-ur*dr)/(sr*gr+ur*dr),sn(lr)<1e-12&&(lr=0),lr<0)throw new Error("Cannot create an arc with the given arguments");Bn=new Ft(nr*Zn/Yn,-Yn*qn/nr).multiply((Gn===Nn?-1:1)*ln(lr)).rotate(zn).add(Jn),jn=new en().translate(Bn).rotate(zn).scale(nr,Yn),Fn=jn._inverseTransform(fn),Hn=Fn.getDirectedAngle(jn._inverseTransform(wn)),!Nn&&Hn>0?Hn-=360:Nn&&Hn<0&&(Hn+=360)}if(_n){var mr=new tn(fn.add(_n).divide(2),_n.subtract(fn).rotate(90),!0),yr=new tn(_n.add(wn).divide(2),wn.subtract(_n).rotate(90),!0),br=new tn(fn,wn),Er=br.getSide(_n);if(Bn=mr.intersect(yr,!0),!Bn){if(!Er)return this.lineTo(wn);throw new Error("Cannot create an arc with the given arguments")}Fn=fn.subtract(Bn),Hn=Fn.getDirectedAngle(wn.subtract(Bn));var Pr=br.getSide(Bn,!0);Pr===0?Hn=Er*sn(Hn):Er===Pr&&(Hn+=Hn<0?360:-360)}if(Hn){for(var Hr=1e-5,Wr=sn(Hn),Xr=Wr>=360?4:Math.ceil((Wr-Hr)/90),es=Hn/Xr,Dr=es*Math.PI/360,$r=4/3*Math.sin(Dr)/(1+Math.cos(Dr)),Qr=[],ss=0;ss<=Xr;ss++){var Dn=wn,ns=null;if(ss<Xr&&(ns=Fn.rotate(90).multiply($r),jn?(Dn=jn._transformPoint(Fn),ns=jn._transformPoint(Fn.add(ns)).subtract(Dn)):Dn=Bn.add(Fn)),!ss)cn.setHandleOut(ns);else{var ys=Fn.rotate(-90).multiply($r);jn&&(ys=jn._transformPoint(Fn.add(ys)).subtract(Dn)),Qr.push(new Pn(Dn,ys,ns))}Fn=Fn.rotate(es)}this._add(Qr)}},lineBy:function(){var Jt=Ft.read(arguments),sn=$t(this)._point;this.lineTo(sn.add(Jt))},curveBy:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=ct.read(Jt),fn=$t(this)._point;this.curveTo(fn.add(sn),fn.add(ln),cn)},cubicCurveBy:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=Ft.read(Jt),fn=$t(this)._point;this.cubicCurveTo(fn.add(sn),fn.add(ln),fn.add(cn))},quadraticCurveBy:function(){var Jt=arguments,sn=Ft.read(Jt),ln=Ft.read(Jt),cn=$t(this)._point;this.quadraticCurveTo(cn.add(sn),cn.add(ln))},arcBy:function(){var Jt=arguments,sn=$t(this)._point,ln=sn.add(Ft.read(Jt)),cn=ct.pick(ct.peek(Jt),!0);typeof cn=="boolean"?this.arcTo(ln,cn):this.arcTo(ln,sn.add(Ft.read(Jt)))},closePath:function(Jt){this.setClosed(!0),this.join(this,Jt)}}},{_getBounds:function($t,Jt){var sn=Jt.handle?"getHandleBounds":Jt.stroke?"getStrokeBounds":"getBounds";return vn[sn](this._segments,this._closed,this,$t,Jt)},statics:{getBounds:function($t,Jt,sn,ln,cn,fn){var wn=$t[0];if(!wn)return new zt;var _n=new Array(6),Tn=wn._transformCoordinates(ln,new Array(6)),Nn=Tn.slice(0,2),Bn=Nn.slice(),Hn=new Array(2);function Fn(Wn){Wn._transformCoordinates(ln,_n);for(var Kn=0;Kn<2;Kn++)gn._addBounds(Tn[Kn],Tn[Kn+4],_n[Kn+2],_n[Kn],Kn,fn?fn[Kn]:0,Nn,Bn,Hn);var zn=Tn;Tn=_n,_n=zn}for(var jn=1,Jn=$t.length;jn<Jn;jn++)Fn($t[jn]);return Jt&&Fn(wn),new zt(Nn[0],Nn[1],Bn[0]-Nn[0],Bn[1]-Nn[1])},getStrokeBounds:function($t,Jt,sn,ln,cn){var fn=sn.getStyle(),wn=fn.hasStroke(),_n=fn.getStrokeWidth(),Tn=wn&&sn._getStrokeMatrix(ln,cn),Nn=wn&&vn._getStrokePadding(_n,Tn),Bn=vn.getBounds($t,Jt,sn,ln,cn,Nn);if(!wn)return Bn;var Hn=_n/2,Fn=fn.getStrokeJoin(),jn=fn.getStrokeCap(),Jn=fn.getMiterLimit(),Wn=new zt(new Ht(Nn));function Kn(nr){Bn=Bn.include(nr)}function zn(nr){Bn=Bn.unite(Wn.setCenter(nr._point.transform(ln)))}function Gn(nr,Yn){Yn==="round"||nr.isSmooth()?zn(nr):vn._addBevelJoin(nr,Yn,Hn,Jn,ln,Tn,Kn)}function Dn(nr,Yn){Yn==="round"?zn(nr):vn._addSquareCap(nr,Yn,Hn,ln,Tn,Kn)}var qn=$t.length-(Jt?0:1);if(qn>0){for(var Zn=1;Zn<qn;Zn++)Gn($t[Zn],Fn);Jt?Gn($t[0],Fn):(Dn($t[0],jn),Dn($t[$t.length-1],jn))}return Bn},_getStrokePadding:function($t,Jt){if(!Jt)return[$t,$t];var sn=new Ft($t,0).transform(Jt),ln=new Ft(0,$t).transform(Jt),cn=sn.getAngleInRadians(),fn=sn.getLength(),wn=ln.getLength(),_n=Math.sin(cn),Tn=Math.cos(cn),Nn=Math.tan(cn),Bn=Math.atan2(wn*Nn,fn),Hn=Math.atan2(wn,Nn*fn);return[Math.abs(fn*Math.cos(Bn)*Tn+wn*Math.sin(Bn)*_n),Math.abs(wn*Math.sin(Hn)*Tn+fn*Math.cos(Hn)*_n)]},_addBevelJoin:function($t,Jt,sn,ln,cn,fn,wn,_n){var Tn=$t.getCurve(),Nn=Tn.getPrevious(),Bn=Tn.getPoint1().transform(cn),Hn=Nn.getNormalAtTime(1).multiply(sn).transform(fn),Fn=Tn.getNormalAtTime(0).multiply(sn).transform(fn),jn=Hn.getDirectedAngle(Fn);if((jn<0||jn>=180)&&(Hn=Hn.negate(),Fn=Fn.negate()),_n&&wn(Bn),wn(Bn.add(Hn)),Jt==="miter"){var Jn=new tn(Bn.add(Hn),new Ft(-Hn.y,Hn.x),!0).intersect(new tn(Bn.add(Fn),new Ft(-Fn.y,Fn.x),!0),!0);Jn&&Bn.getDistance(Jn)<=ln*sn&&wn(Jn)}wn(Bn.add(Fn))},_addSquareCap:function($t,Jt,sn,ln,cn,fn,wn){var _n=$t._point.transform(ln),Tn=$t.getLocation(),Nn=Tn.getNormal().multiply(Tn.getTime()===0?sn:-sn).transform(cn);Jt==="square"&&(wn&&(fn(_n.subtract(Nn)),fn(_n.add(Nn))),_n=_n.add(Nn.rotate(-90))),fn(_n.add(Nn)),fn(_n.subtract(Nn))},getHandleBounds:function($t,Jt,sn,ln,cn){var fn=sn.getStyle(),wn=cn.stroke&&fn.hasStroke(),_n,Tn;if(wn){var Nn=sn._getStrokeMatrix(ln,cn),Bn=fn.getStrokeWidth()/2,Hn=Bn;fn.getStrokeJoin()==="miter"&&(Hn=Bn*fn.getMiterLimit()),fn.getStrokeCap()==="square"&&(Hn=Math.max(Hn,Bn*Math.SQRT2)),_n=vn._getStrokePadding(Bn,Nn),Tn=vn._getStrokePadding(Hn,Nn)}for(var Fn=new Array(6),jn=1/0,Jn=-jn,Wn=jn,Kn=Jn,zn=0,Gn=$t.length;zn<Gn;zn++){var Dn=$t[zn];Dn._transformCoordinates(ln,Fn);for(var qn=0;qn<6;qn+=2){var Zn=qn?_n:Tn,nr=Zn?Zn[0]:0,Yn=Zn?Zn[1]:0,sr=Fn[qn],ur=Fn[qn+1],dr=sr-nr,gr=sr+nr,lr=ur-Yn,mr=ur+Yn;dr<jn&&(jn=dr),gr>Jn&&(Jn=gr),lr<Wn&&(Wn=lr),mr>Kn&&(Kn=mr)}}return new zt(jn,Wn,Jn-jn,Kn-Wn)}}});vn.inject({statics:new function(){var $t=.5522847498307936,Jt=[new Pn([-1,0],[0,$t],[0,-$t]),new Pn([0,-1],[-$t,0],[$t,0]),new Pn([1,0],[0,-$t],[0,$t]),new Pn([0,1],[$t,0],[-$t,0])];function sn(cn,fn,wn){var _n=ct.getNamed(wn),Tn=new vn(_n&&(_n.insert==!0?an.INSERT:_n.insert==!1?an.NO_INSERT:null));return Tn._add(cn),Tn._closed=fn,Tn.set(_n,an.INSERT)}function ln(cn,fn,wn){for(var _n=new Array(4),Tn=0;Tn<4;Tn++){var Nn=Jt[Tn];_n[Tn]=new Pn(Nn._point.multiply(fn).add(cn),Nn._handleIn.multiply(fn),Nn._handleOut.multiply(fn))}return sn(_n,!0,wn)}return{Line:function(){var cn=arguments;return sn([new Pn(Ft.readNamed(cn,"from")),new Pn(Ft.readNamed(cn,"to"))],!1,cn)},Circle:function(){var cn=arguments,fn=Ft.readNamed(cn,"center"),wn=ct.readNamed(cn,"radius");return ln(fn,new Ht(wn),cn)},Rectangle:function(){var cn=arguments,fn=zt.readNamed(cn,"rectangle"),wn=Ht.readNamed(cn,"radius",0,{readNull:!0}),_n=fn.getBottomLeft(!0),Tn=fn.getTopLeft(!0),Nn=fn.getTopRight(!0),Bn=fn.getBottomRight(!0),Hn;if(!wn||wn.isZero())Hn=[new Pn(_n),new Pn(Tn),new Pn(Nn),new Pn(Bn)];else{wn=Ht.min(wn,fn.getSize(!0).divide(2));var Fn=wn.width,jn=wn.height,Jn=Fn*$t,Wn=jn*$t;Hn=[new Pn(_n.add(Fn,0),null,[-Jn,0]),new Pn(_n.subtract(0,jn),[0,Wn]),new Pn(Tn.add(0,jn),null,[0,-Wn]),new Pn(Tn.add(Fn,0),[-Jn,0],null),new Pn(Nn.subtract(Fn,0),null,[Jn,0]),new Pn(Nn.add(0,jn),[0,-Wn],null),new Pn(Bn.subtract(0,jn),null,[0,Wn]),new Pn(Bn.subtract(Fn,0),[Jn,0])]}return sn(Hn,!0,cn)},RoundRectangle:"#Rectangle",Ellipse:function(){var cn=arguments,fn=Sn._readEllipse(cn);return ln(fn.center,fn.radius,cn)},Oval:"#Ellipse",Arc:function(){var cn=arguments,fn=Ft.readNamed(cn,"from"),wn=Ft.readNamed(cn,"through"),_n=Ft.readNamed(cn,"to"),Tn=ct.getNamed(cn),Nn=new vn(Tn&&Tn.insert==!1&&an.NO_INSERT);return Nn.moveTo(fn),Nn.arcTo(wn,_n),Nn.set(Tn)},RegularPolygon:function(){for(var cn=arguments,fn=Ft.readNamed(cn,"center"),wn=ct.readNamed(cn,"sides"),_n=ct.readNamed(cn,"radius"),Tn=360/wn,Nn=wn%3===0,Bn=new Ft(0,Nn?-_n:_n),Hn=Nn?-1:.5,Fn=new Array(wn),jn=0;jn<wn;jn++)Fn[jn]=new Pn(fn.add(Bn.rotate((jn+Hn)*Tn)));return sn(Fn,!0,cn)},Star:function(){for(var cn=arguments,fn=Ft.readNamed(cn,"center"),wn=ct.readNamed(cn,"points")*2,_n=ct.readNamed(cn,"radius1"),Tn=ct.readNamed(cn,"radius2"),Nn=360/wn,Bn=new Ft(0,-1),Hn=new Array(wn),Fn=0;Fn<wn;Fn++)Hn[Fn]=new Pn(fn.add(Bn.rotate(Nn*Fn).multiply(Fn%2?Tn:_n)));return sn(Hn,!0,cn)}}}});var On=yn.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(Jt){this._children=[],this._namedChildren={},this._initialize(Jt)||(typeof Jt=="string"?this.setPathData(Jt):this.addChildren(Array.isArray(Jt)?Jt:arguments))},insertChildren:function $t(Jt,sn){var ln=sn,cn=ln[0];cn&&typeof cn[0]=="number"&&(ln=[ln]);for(var fn=sn.length-1;fn>=0;fn--){var wn=ln[fn];ln===sn&&!(wn instanceof vn)&&(ln=ct.slice(ln)),Array.isArray(wn)?ln[fn]=new vn({segments:wn,insert:!1}):wn instanceof On&&(ln.splice.apply(ln,[fn,1].concat(wn.removeChildren())),wn.remove())}return $t.base.call(this,Jt,ln)},reduce:function $t(Jt){for(var sn=this._children,ln=sn.length-1;ln>=0;ln--){var cn=sn[ln].reduce(Jt);cn.isEmpty()&&cn.remove()}if(!sn.length){var cn=new vn(an.NO_INSERT);return cn.copyAttributes(this),cn.insertAbove(this),this.remove(),cn}return $t.base.call(this)},isClosed:function(){for(var $t=this._children,Jt=0,sn=$t.length;Jt<sn;Jt++)if(!$t[Jt]._closed)return!1;return!0},setClosed:function($t){for(var Jt=this._children,sn=0,ln=Jt.length;sn<ln;sn++)Jt[sn].setClosed($t)},getFirstSegment:function(){var $t=this.getFirstChild();return $t&&$t.getFirstSegment()},getLastSegment:function(){var $t=this.getLastChild();return $t&&$t.getLastSegment()},getCurves:function(){for(var $t=this._children,Jt=[],sn=0,ln=$t.length;sn<ln;sn++)ct.push(Jt,$t[sn].getCurves());return Jt},getFirstCurve:function(){var $t=this.getFirstChild();return $t&&$t.getFirstCurve()},getLastCurve:function(){var $t=this.getLastChild();return $t&&$t.getLastCurve()},getArea:function(){for(var $t=this._children,Jt=0,sn=0,ln=$t.length;sn<ln;sn++)Jt+=$t[sn].getArea();return Jt},getLength:function(){for(var $t=this._children,Jt=0,sn=0,ln=$t.length;sn<ln;sn++)Jt+=$t[sn].getLength();return Jt},getPathData:function($t,Jt){for(var sn=this._children,ln=[],cn=0,fn=sn.length;cn<fn;cn++){var wn=sn[cn],_n=wn._matrix;ln.push(wn.getPathData($t&&!_n.isIdentity()?$t.appended(_n):$t,Jt))}return ln.join("")},_hitTestChildren:function $t(Jt,sn,ln){return $t.base.call(this,Jt,sn.class===vn||sn.type==="path"?sn:ct.set({},sn,{fill:!1}),ln)},_draw:function($t,Jt,sn,ln){var cn=this._children;if(cn.length){Jt=Jt.extend({dontStart:!0,dontFinish:!0}),$t.beginPath();for(var fn=0,wn=cn.length;fn<wn;fn++)cn[fn].draw($t,Jt,ln);if(!Jt.clip){this._setStyles($t,Jt,sn);var _n=this._style;_n.hasFill()&&($t.fill(_n.getFillRule()),$t.shadowColor="rgba(0,0,0,0)"),_n.hasStroke()&&$t.stroke()}}},_drawSelected:function($t,Jt,sn){for(var ln=this._children,cn=0,fn=ln.length;cn<fn;cn++){var wn=ln[cn],_n=wn._matrix;sn[wn._id]||wn._drawSelected($t,_n.isIdentity()?Jt:Jt.appended(_n))}}},new function(){function $t(Jt,sn){var ln=Jt._children;if(sn&&!ln.length)throw new Error("Use a moveTo() command first");return ln[ln.length-1]}return ct.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(Jt){this[Jt]=function(){var sn=$t(this,!0);sn[Jt].apply(sn,arguments)}},{moveTo:function(){var Jt=$t(this),sn=Jt&&Jt.isEmpty()?Jt:new vn(an.NO_INSERT);sn!==Jt&&this.addChild(sn),sn.moveTo.apply(sn,arguments)},moveBy:function(){var Jt=$t(this,!0),sn=Jt&&Jt.getLastSegment(),ln=Ft.read(arguments);this.moveTo(sn?ln.add(sn._point):ln)},closePath:function(Jt){$t(this,!0).closePath(Jt)}})},ct.each(["reverse","flatten","simplify","smooth"],function($t){this[$t]=function(Jt){for(var sn=this._children,ln,cn=0,fn=sn.length;cn<fn;cn++)ln=sn[cn][$t](Jt)||ln;return ln}},{}));yn.inject(new function(){var $t=Math.min,Jt=Math.max,sn=Math.abs,ln={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function cn(zn){return zn._children||[zn]}function fn(zn,Gn){var Dn=zn.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Gn){for(var qn=cn(Dn),Zn=0,nr=qn.length;Zn<nr;Zn++){var zn=qn[Zn];!zn._closed&&!zn.isEmpty()&&(zn.closePath(1e-12),zn.getFirstSegment().setHandleIn(0,0),zn.getLastSegment().setHandleOut(0,0))}Dn=Dn.resolveCrossings().reorient(Dn.getFillRule()==="nonzero",!0)}return Dn}function wn(zn,Gn,Dn,qn,Zn){var nr=new On(an.NO_INSERT);return nr.addChildren(zn,!0),nr=nr.reduce({simplify:Gn}),Zn&&Zn.insert==!1||nr.insertAbove(qn&&Dn.isSibling(qn)&&Dn.getIndex()<qn.getIndex()?qn:Dn),nr.copyAttributes(Dn,!0),nr}function _n(zn){return zn.hasOverlap()||zn.isCrossing()}function Tn(zn,Gn,Dn,qn){if(qn&&(qn.trace==!1||qn.stroke)&&/^(subtract|intersect)$/.test(Dn))return Nn(zn,Gn,Dn);var Zn=fn(zn,!0),nr=Gn&&zn!==Gn&&fn(Gn,!0),Yn=ln[Dn];Yn[Dn]=!0,nr&&(Yn.subtract||Yn.exclude)^(nr.isClockwise()^Zn.isClockwise())&&nr.reverse();var sr=jn(Mn.expand(Zn.getIntersections(nr,_n))),ur=cn(Zn),dr=nr&&cn(nr),gr=[],lr=[],mr;function yr(ns){for(var ys=0,gs=ns.length;ys<gs;ys++){var _s=ns[ys];ct.push(gr,_s._segments),ct.push(lr,_s.getCurves()),_s._overlapsOnly=!0}}function br(ns){for(var ys=[],gs=0,_s=ns&&ns.length;gs<_s;gs++)ys.push(lr[ns[gs]]);return ys}if(sr.length){yr(ur),dr&&yr(dr);for(var Er=new Array(lr.length),Pr=0,Hr=lr.length;Pr<Hr;Pr++)Er[Pr]=lr[Pr].getValues();for(var Wr=kt.findCurveBoundsCollisions(Er,Er,0,!0),Xr={},Pr=0;Pr<lr.length;Pr++){var es=lr[Pr],Dr=es._path._id,$r=Xr[Dr]=Xr[Dr]||{};$r[es.getIndex()]={hor:br(Wr[Pr].hor),ver:br(Wr[Pr].ver)}}for(var Pr=0,Hr=sr.length;Pr<Hr;Pr++)Wn(sr[Pr]._segment,Zn,nr,Xr,Yn);for(var Pr=0,Hr=gr.length;Pr<Hr;Pr++){var Qr=gr[Pr],ss=Qr._intersection;Qr._winding||Wn(Qr,Zn,nr,Xr,Yn),ss&&ss._overlap||(Qr._path._overlapsOnly=!1)}mr=Kn(gr,Yn)}else mr=Fn(dr?ur.concat(dr):ur.slice(),function(ns){return!!Yn[ns]});return wn(mr,!0,zn,Gn,qn)}function Nn(zn,Gn,Dn){var qn=fn(zn),Zn=fn(Gn),nr=qn.getIntersections(Zn,_n),Yn=Dn==="subtract",sr=Dn==="divide",ur={},dr=[];function gr(yr){if(!ur[yr._id]&&(sr||Zn.contains(yr.getPointAt(yr.getLength()/2))^Yn))return dr.unshift(yr),ur[yr._id]=!0}for(var lr=nr.length-1;lr>=0;lr--){var mr=nr[lr].split();mr&&(gr(mr)&&mr.getFirstSegment().setHandleIn(0,0),qn.getLastSegment().setHandleOut(0,0))}return gr(qn),wn(dr,!1,zn,Gn)}function Bn(zn,Gn){for(var Dn=zn;Dn;){if(Dn===Gn)return;Dn=Dn._previous}for(;zn._next&&zn._next!==Gn;)zn=zn._next;if(!zn._next){for(;Gn._previous;)Gn=Gn._previous;zn._next=Gn,Gn._previous=zn}}function Hn(zn){for(var Gn=zn.length-1;Gn>=0;Gn--)zn[Gn].clearHandles()}function Fn(zn,Gn,Dn){var qn=zn&&zn.length;if(qn){var Zn=ct.each(zn,function(Wr,Xr){this[Wr._id]={container:null,winding:Wr.isClockwise()?1:-1,index:Xr}},{}),nr=zn.slice().sort(function(Wr,Xr){return sn(Xr.getArea())-sn(Wr.getArea())}),Yn=nr[0],sr=kt.findItemBoundsCollisions(nr,null,Rt.GEOMETRIC_EPSILON);Dn==null&&(Dn=Yn.isClockwise());for(var ur=0;ur<qn;ur++){var dr=nr[ur],gr=Zn[dr._id],lr=0,mr=sr[ur];if(mr){for(var yr=null,br=mr.length-1;br>=0;br--)if(mr[br]<ur){yr=yr||dr.getInteriorPoint();var Er=nr[mr[br]];if(Er.contains(yr)){var Pr=Zn[Er._id];lr=Pr.winding,gr.winding+=lr,gr.container=Pr.exclude?Pr.container:Er;break}}}if(Gn(gr.winding)===Gn(lr))gr.exclude=!0,zn[gr.index]=null;else{var Hr=gr.container;dr.setClockwise(Hr?!Hr.isClockwise():Dn)}}}return zn}function jn(zn,Gn,Dn){var qn=Gn&&[],Zn=1e-8,nr=1-Zn,Yn=!1,sr=Dn||[],ur=Dn&&{},dr,gr,lr;function mr(ys){return ys._path._id+"."+ys._segment1._index}for(var yr=(Dn&&Dn.length)-1;yr>=0;yr--){var br=Dn[yr];br._path&&(ur[mr(br)]=!0)}for(var yr=zn.length-1;yr>=0;yr--){var Er=zn[yr],Pr=Er._time,Hr=Pr,Wr=Gn&&!Gn(Er),br=Er._curve,Xr;if(br&&(br!==gr?(Yn=!br.hasHandles()||ur&&ur[mr(br)],dr=[],lr=null,gr=br):lr>=Zn&&(Pr/=lr)),Wr){dr&&dr.push(Er);continue}else Gn&&qn.unshift(Er);if(lr=Hr,Pr<Zn)Xr=br._segment1;else if(Pr>nr)Xr=br._segment2;else{var es=br.divideAtTime(Pr,!0);Yn&&sr.push(br,es),Xr=es._segment1;for(var Dr=dr.length-1;Dr>=0;Dr--){var $r=dr[Dr];$r._time=($r._time-Pr)/(1-Pr)}}Er._setSegment(Xr);var Qr=Xr._intersection,ss=Er._intersection;if(Qr){Bn(Qr,ss);for(var ns=Qr;ns;)Bn(ns._intersection,Qr),ns=ns._next}else Xr._intersection=ss}return Dn||Hn(sr),qn||zn}function Jn(zn,Gn,Dn,qn,Zn){var nr=Array.isArray(Gn)?Gn:Gn[Dn?"hor":"ver"],Yn=Dn?1:0,sr=Yn^1,ur=[zn.x,zn.y],dr=ur[Yn],gr=ur[sr],lr=1e-9,mr=1e-6,yr=dr-lr,br=dr+lr,Er=0,Pr=0,Hr=0,Wr=0,Xr=!1,es=!1,Dr=1,$r=[],Qr,ss;function ns(Ds){var js=Ds[sr+0],Os=Ds[sr+6];if(!(gr<$t(js,Os)||gr>Jt(js,Os))){var ks=Ds[Yn+0],vo=Ds[Yn+2],xa=Ds[Yn+4],Ys=Ds[Yn+6];if(js===Os){(ks<br&&Ys>yr||Ys<br&&ks>yr)&&(Xr=!0);return}var Po=gr===js?0:gr===Os||yr>Jt(ks,vo,xa,Ys)||br<$t(ks,vo,xa,Ys)?1:gn.solveCubic(Ds,sr,gr,$r,0,1)>0?$r[0]:1,ko=Po===0?ks:Po===1?Ys:gn.getPoint(Ds,Po)[Dn?"y":"x"],Ws=js>Os?1:-1,Ao=Qr[sr]>Qr[sr+6]?1:-1,ba=Qr[Yn+6];return gr!==js?(ko<yr?Hr+=Ws:ko>br?Wr+=Ws:Xr=!0,ko>dr-mr&&ko<dr+mr&&(Dr/=2)):(Ws!==Ao?ks<yr?Hr+=Ws:ks>br&&(Wr+=Ws):ks!=ba&&(ba<br&&ko>br?(Wr+=Ws,Xr=!0):ba>yr&&ko<yr&&(Hr+=Ws,Xr=!0)),Dr/=4),Qr=Ds,!Zn&&ko>yr&&ko<br&&gn.getTangent(Ds,Po)[Dn?"x":"y"]===0&&Jn(zn,Gn,!Dn,qn,!0)}}function ys(Ds){var js=Ds[sr+0],Os=Ds[sr+2],ks=Ds[sr+4],vo=Ds[sr+6];if(gr<=Jt(js,Os,ks,vo)&&gr>=$t(js,Os,ks,vo)){for(var xa=Ds[Yn+0],Ys=Ds[Yn+2],Po=Ds[Yn+4],ko=Ds[Yn+6],Ws=yr>Jt(xa,Ys,Po,ko)||br<$t(xa,Ys,Po,ko)?[Ds]:gn.getMonoCurves(Ds,Dn),Ao,ba=0,Am=Ws.length;ba<Am;ba++)if(Ao=ns(Ws[ba]))return Ao}}for(var gs=0,_s=nr.length;gs<_s;gs++){var Ss=nr[gs],vs=Ss._path,ga=Ss.getValues(),uo;if((!gs||nr[gs-1]._path!==vs)&&(Qr=null,vs._closed||(ss=gn.getValues(vs.getLastCurve().getSegment2(),Ss.getSegment1(),null,!qn),ss[sr]!==ss[sr+6]&&(Qr=ss)),!Qr)){Qr=ga;for(var Lo=vs.getLastCurve();Lo&&Lo!==Ss;){var Yr=Lo.getValues();if(Yr[sr]!==Yr[sr+6]){Qr=Yr;break}Lo=Lo.getPrevious()}}if(uo=ys(ga))return uo;if(gs+1===_s||nr[gs+1]._path!==vs){if(ss&&(uo=ys(ss)))return uo;Xr&&!Hr&&!Wr&&(Hr=Wr=vs.isClockwise(qn)^Dn?1:-1),Er+=Hr,Pr+=Wr,Hr=Wr=0,Xr&&(es=!0,Xr=!1),ss=null}}return Er=sn(Er),Pr=sn(Pr),{winding:Jt(Er,Pr),windingL:Er,windingR:Pr,quality:Dr,onPath:es}}function Wn(zn,Gn,Dn,qn,Zn){var nr=[],Yn=zn,sr=0,lr;do{var ur=zn.getCurve();if(ur){var dr=ur.getLength();nr.push({segment:zn,curve:ur,length:dr}),sr+=dr}zn=zn.getNext()}while(zn&&!zn._intersection&&zn!==Yn);for(var gr=[.5,.25,.75],lr={winding:0,quality:-1},mr=.001,yr=1-mr,br=0;br<gr.length&&lr.quality<.5;br++)for(var dr=sr*gr[br],Er=0,Pr=nr.length;Er<Pr;Er++){var Hr=nr[Er],Wr=Hr.length;if(dr<=Wr){var ur=Hr.curve,Xr=ur._path,es=Xr._parent,Dr=es instanceof On?es:Xr,$r=Rt.clamp(ur.getTimeAt(dr),mr,yr),Qr=ur.getPointAtTime($r),ss=sn(ur.getTangentAtTime($r).y)<Math.SQRT1_2,ns=null;if(Zn.subtract&&Dn){var ys=Dr===Gn?Dn:Gn,gs=ys._getWinding(Qr,ss,!0);if(Dr===Gn&&gs.winding||Dr===Dn&&!gs.winding){if(gs.quality<1)continue;ns={winding:0,quality:1}}}ns=ns||Jn(Qr,qn[Xr._id][ur.getIndex()],ss,!0),ns.quality>lr.quality&&(lr=ns);break}dr-=Wr}for(var Er=nr.length-1;Er>=0;Er--)nr[Er].segment._winding=lr}function Kn(zn,Gn){var Dn=[],qn;function Zn(_s){var Ss;return!!(_s&&!_s._visited&&(!Gn||Gn[(Ss=_s._winding||{}).winding]&&!(Gn.unite&&Ss.winding===2&&Ss.windingL&&Ss.windingR)))}function nr(_s){if(_s){for(var Ss=0,vs=qn.length;Ss<vs;Ss++)if(_s===qn[Ss])return!0}return!1}function Yn(_s){for(var Ss=_s._segments,vs=0,ga=Ss.length;vs<ga;vs++)Ss[vs]._visited=!0}function sr(_s,Ss){var vs=_s._intersection,ga=vs,uo=[];Ss&&(qn=[_s]);function Lo(Yr,Ds){for(;Yr&&Yr!==Ds;){var js=Yr._segment,Os=js&&js._path;if(Os){var ks=js.getNext()||Os.getFirstSegment(),vo=ks._intersection;js!==_s&&(nr(js)||nr(ks)||ks&&Zn(js)&&(Zn(ks)||vo&&Zn(vo._segment)))&&uo.push(js),Ss&&qn.push(js)}Yr=Yr._next}}if(vs){for(Lo(vs);vs&&vs._previous;)vs=vs._previous;Lo(vs,ga)}return uo}zn.sort(function(_s,Ss){var vs=_s._intersection,ga=Ss._intersection,uo=!!(vs&&vs._overlap),Lo=!!(ga&&ga._overlap),Yr=_s._path,Ds=Ss._path;return uo^Lo?uo?1:-1:!vs^!ga?vs?1:-1:Yr!==Ds?Yr._id-Ds._id:_s._index-Ss._index});for(var ur=0,dr=zn.length;ur<dr;ur++){var gr=zn[ur],lr=Zn(gr),mr=null,yr=!1,br=!0,Er=[],Pr,Hr,Wr;if(lr&&gr._path._overlapsOnly){var Xr=gr._path,es=gr._intersection._segment._path;Xr.compare(es)&&(Xr.getArea()&&Dn.push(Xr.clone(!1)),Yn(Xr),Yn(es),lr=!1)}for(;lr;){var Dr=!mr,$r=sr(gr,Dr),Qr=$r.shift(),yr=!Dr&&(nr(gr)||nr(Qr)),ss=!yr&&Qr;if(Dr&&(mr=new vn(an.NO_INSERT),Pr=null),yr){(gr.isFirst()||gr.isLast())&&(br=gr._path._closed),gr._visited=!0;break}if(ss&&Pr&&(Er.push(Pr),Pr=null),Pr||(ss&&$r.push(gr),Pr={start:mr._segments.length,crossings:$r,visited:Hr=[],handleIn:Wr}),ss&&(gr=Qr),!Zn(gr)){mr.removeSegments(Pr.start);for(var ns=0,ys=Hr.length;ns<ys;ns++)Hr[ns]._visited=!1;Hr.length=0;do gr=Pr&&Pr.crossings.shift(),(!gr||!gr._path)&&(gr=null,Pr=Er.pop(),Pr&&(Hr=Pr.visited,Wr=Pr.handleIn));while(Pr&&!Zn(gr));if(!gr)break}var gs=gr.getNext();mr.add(new Pn(gr._point,Wr,gs&&gr._handleOut)),gr._visited=!0,Hr.push(gr),gr=gs||gr._path.getFirstSegment(),Wr=gs&&gs._handleIn}yr&&(br&&(mr.getFirstSegment().setHandleIn(Wr),mr.setClosed(br)),mr.getArea()!==0&&Dn.push(mr))}return Dn}return{_getWinding:function(zn,Gn,Dn){return Jn(zn,this.getCurves(),Gn,Dn)},unite:function(zn,Gn){return Tn(this,zn,"unite",Gn)},intersect:function(zn,Gn){return Tn(this,zn,"intersect",Gn)},subtract:function(zn,Gn){return Tn(this,zn,"subtract",Gn)},exclude:function(zn,Gn){return Tn(this,zn,"exclude",Gn)},divide:function(zn,Gn){return Gn&&(Gn.trace==!1||Gn.stroke)?Nn(this,zn,"divide"):wn([this.subtract(zn,Gn),this.intersect(zn,Gn)],!0,this,zn,Gn)},resolveCrossings:function(){var zn=this._children,Gn=zn||[this];function Dn(Pr,Hr){var Wr=Pr&&Pr._intersection;return Wr&&Wr._overlap&&Wr._path===Hr}var qn=!1,Zn=!1,nr=this.getIntersections(null,function(Pr){return Pr.hasOverlap()&&(qn=!0)||Pr.isCrossing()&&(Zn=!0)}),Yn=qn&&Zn&&[];if(nr=Mn.expand(nr),qn)for(var sr=jn(nr,function(Pr){return Pr.hasOverlap()},Yn),ur=sr.length-1;ur>=0;ur--){var dr=sr[ur],gr=dr._path,lr=dr._segment,mr=lr.getPrevious(),yr=lr.getNext();Dn(mr,gr)&&Dn(yr,gr)&&(lr.remove(),mr._handleOut._set(0,0),yr._handleIn._set(0,0),mr!==lr&&!mr.getCurve().hasLength()&&(yr._handleIn.set(mr._handleIn),mr.remove()))}Zn&&(jn(nr,qn&&function(Pr){var Hr=Pr.getCurve(),Wr=Pr.getSegment(),Xr=Pr._intersection,es=Xr._curve,Dr=Xr._segment;if(Hr&&es&&Hr._path&&es._path)return!0;Wr&&(Wr._intersection=null),Dr&&(Dr._intersection=null)},Yn),Yn&&Hn(Yn),Gn=Kn(ct.each(Gn,function(Pr){ct.push(this,Pr._segments)},[])));var br=Gn.length,Er;return br>1&&zn?(Gn!==zn&&this.setChildren(Gn),Er=this):br===1&&!zn&&(Gn[0]!==this&&this.setSegments(Gn[0].removeSegments()),Er=this),Er||(Er=new On(an.NO_INSERT),Er.addChildren(Gn),Er=Er.reduce(),Er.copyAttributes(this),this.replaceWith(Er)),Er},reorient:function(zn,Gn){var Dn=this._children;return Dn&&Dn.length?this.setChildren(Fn(this.removeChildren(),function(qn){return!!(zn?qn:qn&1)},Gn)):Gn!==et&&this.setClockwise(Gn),this},getInteriorPoint:function(){var zn=this.getBounds(),Gn=zn.getCenter(!0);if(!this.contains(Gn)){for(var Dn=this.getCurves(),qn=Gn.y,Zn=[],nr=[],Yn=0,sr=Dn.length;Yn<sr;Yn++){var ur=Dn[Yn].getValues(),dr=ur[1],gr=ur[3],lr=ur[5],mr=ur[7];if(qn>=$t(dr,gr,lr,mr)&&qn<=Jt(dr,gr,lr,mr))for(var yr=gn.getMonoCurves(ur),br=0,Er=yr.length;br<Er;br++){var Pr=yr[br],Hr=Pr[1],Wr=Pr[7];if(Hr!==Wr&&(qn>=Hr&&qn<=Wr||qn>=Wr&&qn<=Hr)){var Xr=qn===Hr?Pr[0]:qn===Wr?Pr[6]:gn.solveCubic(Pr,1,qn,nr,0,1)===1?gn.getPoint(Pr,nr[0]).x:(Pr[0]+Pr[6])/2;Zn.push(Xr)}}}Zn.length>1&&(Zn.sort(function(es,Dr){return es-Dr}),Gn.x=(Zn[0]+Zn[1])/2)}return Gn}}});var Cn=ct.extend({_class:"PathFlattener",initialize:function($t,Jt,sn,ln,cn){var fn=[],wn=[],_n=0,Tn=1/(sn||32),Nn=$t._segments,Bn=Nn[0],Hn;function Fn(Kn,zn){var Gn=gn.getValues(Kn,zn,cn);fn.push(Gn),jn(Gn,Kn._index,0,1)}function jn(Kn,zn,Gn,Dn){if(Dn-Gn>Tn&&!(ln&&gn.isStraight(Kn))&&!gn.isFlatEnough(Kn,Jt||.25)){var qn=gn.subdivide(Kn,.5),Zn=(Gn+Dn)/2;jn(qn[0],zn,Gn,Zn),jn(qn[1],zn,Zn,Dn)}else{var nr=Kn[6]-Kn[0],Yn=Kn[7]-Kn[1],sr=Math.sqrt(nr*nr+Yn*Yn);sr>0&&(_n+=sr,wn.push({offset:_n,curve:Kn,index:zn,time:Dn}))}}for(var Jn=1,Wn=Nn.length;Jn<Wn;Jn++)Hn=Nn[Jn],Fn(Bn,Hn),Bn=Hn;$t._closed&&Fn(Hn||Bn,Nn[0]),this.curves=fn,this.parts=wn,this.length=_n,this.index=0},_get:function($t){for(var Jt=this.parts,sn=Jt.length,ln,cn=this.index;ln=cn,!(!cn||Jt[--cn].offset<$t););for(;ln<sn;ln++){var fn=Jt[ln];if(fn.offset>=$t){this.index=ln;var wn=Jt[ln-1],_n=wn&&wn.index===fn.index?wn.time:0,Tn=wn?wn.offset:0;return{index:fn.index,time:_n+(fn.time-_n)*($t-Tn)/(fn.offset-Tn)}}}return{index:Jt[sn-1].index,time:1}},drawPart:function($t,Jt,sn){for(var ln=this._get(Jt),cn=this._get(sn),fn=ln.index,wn=cn.index;fn<=wn;fn++){var _n=gn.getPart(this.curves[fn],fn===ln.index?ln.time:0,fn===cn.index?cn.time:1);fn===ln.index&&$t.moveTo(_n[0],_n[1]),$t.bezierCurveTo.apply($t,_n.slice(2))}}},ct.each(gn._evaluateMethods,function($t){this[$t+"At"]=function(Jt){var sn=this._get(Jt);return gn[$t](this.curves[sn.index],sn.time)}},{})),Vn=ct.extend({initialize:function($t){for(var Jt=this.points=[],sn=$t._segments,ln=$t._closed,cn=0,fn,wn=sn.length;cn<wn;cn++){var _n=sn[cn].point;(!fn||!fn.equals(_n))&&Jt.push(fn=_n.clone())}ln&&(Jt.unshift(Jt[Jt.length-1]),Jt.push(Jt[1])),this.closed=ln},fit:function($t){var Jt=this.points,sn=Jt.length,ln=null;return sn>0&&(ln=[new Pn(Jt[0])],sn>1&&(this.fitCubic(ln,$t,0,sn-1,Jt[1].subtract(Jt[0]),Jt[sn-2].subtract(Jt[sn-1])),this.closed&&(ln.shift(),ln.pop()))),ln},fitCubic:function($t,Jt,sn,ln,cn,fn){var wn=this.points;if(ln-sn===1){var _n=wn[sn],Tn=wn[ln],Nn=_n.getDistance(Tn)/3;this.addCurve($t,[_n,_n.add(cn.normalize(Nn)),Tn.add(fn.normalize(Nn)),Tn]);return}for(var Bn=this.chordLengthParameterize(sn,ln),Hn=Math.max(Jt,Jt*Jt),Fn,jn=!0,Jn=0;Jn<=4;Jn++){var Wn=this.generateBezier(sn,ln,Bn,cn,fn),Kn=this.findMaxError(sn,ln,Wn,Bn);if(Kn.error<Jt&&jn){this.addCurve($t,Wn);return}if(Fn=Kn.index,Kn.error>=Hn)break;jn=this.reparameterize(sn,ln,Bn,Wn),Hn=Kn.error}var zn=wn[Fn-1].subtract(wn[Fn+1]);this.fitCubic($t,Jt,sn,Fn,cn,zn),this.fitCubic($t,Jt,Fn,ln,zn.negate(),fn)},addCurve:function($t,Jt){var sn=$t[$t.length-1];sn.setHandleOut(Jt[1].subtract(Jt[0])),$t.push(new Pn(Jt[3],Jt[2].subtract(Jt[3])))},generateBezier:function($t,Jt,sn,ln,cn){for(var fn=1e-12,wn=Math.abs,_n=this.points,Tn=_n[$t],Nn=_n[Jt],Bn=[[0,0],[0,0]],Hn=[0,0],Fn=0,jn=Jt-$t+1;Fn<jn;Fn++){var Jn=sn[Fn],Wn=1-Jn,Kn=3*Jn*Wn,zn=Wn*Wn*Wn,Gn=Kn*Wn,Dn=Kn*Jn,qn=Jn*Jn*Jn,Zn=ln.normalize(Gn),nr=cn.normalize(Dn),Yn=_n[$t+Fn].subtract(Tn.multiply(zn+Gn)).subtract(Nn.multiply(Dn+qn));Bn[0][0]+=Zn.dot(Zn),Bn[0][1]+=Zn.dot(nr),Bn[1][0]=Bn[0][1],Bn[1][1]+=nr.dot(nr),Hn[0]+=Zn.dot(Yn),Hn[1]+=nr.dot(Yn)}var sr=Bn[0][0]*Bn[1][1]-Bn[1][0]*Bn[0][1],ur,dr;if(wn(sr)>fn){var gr=Bn[0][0]*Hn[1]-Bn[1][0]*Hn[0],lr=Hn[0]*Bn[1][1]-Hn[1]*Bn[0][1];ur=lr/sr,dr=gr/sr}else{var mr=Bn[0][0]+Bn[0][1],yr=Bn[1][0]+Bn[1][1];ur=dr=wn(mr)>fn?Hn[0]/mr:wn(yr)>fn?Hn[1]/yr:0}var br=Nn.getDistance(Tn),Er=fn*br,Pr,Hr;if(ur<Er||dr<Er)ur=dr=br/3;else{var Wr=Nn.subtract(Tn);Pr=ln.normalize(ur),Hr=cn.normalize(dr),Pr.dot(Wr)-Hr.dot(Wr)>br*br&&(ur=dr=br/3,Pr=Hr=null)}return[Tn,Tn.add(Pr||ln.normalize(ur)),Nn.add(Hr||cn.normalize(dr)),Nn]},reparameterize:function($t,Jt,sn,ln){for(var cn=$t;cn<=Jt;cn++)sn[cn-$t]=this.findRoot(ln,this.points[cn],sn[cn-$t]);for(var cn=1,fn=sn.length;cn<fn;cn++)if(sn[cn]<=sn[cn-1])return!1;return!0},findRoot:function($t,Jt,sn){for(var ln=[],cn=[],fn=0;fn<=2;fn++)ln[fn]=$t[fn+1].subtract($t[fn]).multiply(3);for(var fn=0;fn<=1;fn++)cn[fn]=ln[fn+1].subtract(ln[fn]).multiply(2);var wn=this.evaluate(3,$t,sn),_n=this.evaluate(2,ln,sn),Tn=this.evaluate(1,cn,sn),Nn=wn.subtract(Jt),Bn=_n.dot(_n)+Nn.dot(Tn);return Rt.isMachineZero(Bn)?sn:sn-Nn.dot(_n)/Bn},evaluate:function($t,Jt,sn){for(var ln=Jt.slice(),cn=1;cn<=$t;cn++)for(var fn=0;fn<=$t-cn;fn++)ln[fn]=ln[fn].multiply(1-sn).add(ln[fn+1].multiply(sn));return ln[0]},chordLengthParameterize:function($t,Jt){for(var sn=[0],ln=$t+1;ln<=Jt;ln++)sn[ln-$t]=sn[ln-$t-1]+this.points[ln].getDistance(this.points[ln-1]);for(var ln=1,cn=Jt-$t;ln<=cn;ln++)sn[ln]/=sn[cn];return sn},findMaxError:function($t,Jt,sn,ln){for(var cn=Math.floor((Jt-$t+1)/2),fn=0,wn=$t+1;wn<Jt;wn++){var _n=this.evaluate(3,sn,ln[wn-$t]),Tn=_n.subtract(this.points[wn]),Nn=Tn.x*Tn.x+Tn.y*Tn.y;Nn>=fn&&(fn=Nn,cn=wn)}return{error:fn,index:cn}}}),Qn=an.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(Jt){this._content="",this._lines=[];var sn=Jt&&ct.isPlainObject(Jt)&&Jt.x===et&&Jt.y===et;this._initialize(sn&&Jt,!sn&&Ft.read(arguments))},_equals:function($t){return this._content===$t._content},copyContent:function($t){this.setContent($t._content)},getContent:function(){return this._content},setContent:function($t){this._content=""+$t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ir=Qn.extend({_class:"PointText",initialize:function(){Qn.apply(this,arguments)},getPoint:function(){var $t=this._matrix.getTranslation();return new Bt($t.x,$t.y,this,"setPoint")},setPoint:function(){var $t=Ft.read(arguments);this.translate($t.subtract(this._matrix.getTranslation()))},_draw:function($t,Jt,sn){if(this._content){this._setStyles($t,Jt,sn);var ln=this._lines,cn=this._style,fn=cn.hasFill(),wn=cn.hasStroke(),_n=cn.getLeading(),Tn=$t.shadowColor;$t.font=cn.getFontStyle(),$t.textAlign=cn.getJustification();for(var Nn=0,Bn=ln.length;Nn<Bn;Nn++){$t.shadowColor=Tn;var Hn=ln[Nn];fn&&($t.fillText(Hn,0,0),$t.shadowColor="rgba(0,0,0,0)"),wn&&$t.strokeText(Hn,0,0),$t.translate(0,_n)}}},_getBounds:function($t,Jt){var sn=this._style,ln=this._lines,cn=ln.length,fn=sn.getJustification(),wn=sn.getLeading(),_n=this.getView().getTextWidth(sn.getFontStyle(),ln),Tn=0;fn!=="left"&&(Tn-=_n/(fn==="center"?2:1));var Nn=new zt(Tn,cn?-.75*wn:0,_n,cn*wn);return $t?$t._transformBounds(Nn,Nn):Nn}}),ar=ct.extend(new function(){var $t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},Jt={},sn={transparent:[0,0,0,0]},ln;function cn(_n){var Tn=_n.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||_n.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),Nn="rgb",Bn;if(Tn){var Hn=Tn[4]?4:3;Bn=new Array(Hn);for(var Fn=0;Fn<Hn;Fn++){var jn=Tn[Fn+1];Bn[Fn]=parseInt(jn.length==1?jn+jn:jn,16)/255}}else if(Tn=_n.match(/^(rgb|hsl)a?\((.*)\)$/)){Nn=Tn[1],Bn=Tn[2].trim().split(/[,\s]+/g);for(var Jn=Nn==="hsl",Fn=0,Wn=Math.min(Bn.length,4);Fn<Wn;Fn++){var Kn=Bn[Fn],jn=parseFloat(Kn);if(Jn)if(Fn===0){var zn=Kn.match(/([a-z]*)$/)[1];jn*={turn:360,rad:180/Math.PI,grad:.9}[zn]||1}else Fn<3&&(jn/=100);else Fn<3&&(jn/=/%$/.test(Kn)?100:255);Bn[Fn]=jn}}else{var Gn=sn[_n];if(!Gn)if(ot){ln||(ln=zr.getContext(1,1,{willReadFrequently:!0}),ln.globalCompositeOperation="copy"),ln.fillStyle="rgba(0,0,0,0)",ln.fillStyle=_n,ln.fillRect(0,0,1,1);var Dn=ln.getImageData(0,0,1,1).data;Gn=sn[_n]=[Dn[0]/255,Dn[1]/255,Dn[2]/255]}else Gn=[0,0,0];Bn=Gn.slice()}return[Nn,Bn]}var fn=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],wn={"rgb-hsb":function(_n,Tn,Nn){var Bn=Math.max(_n,Tn,Nn),Hn=Math.min(_n,Tn,Nn),Fn=Bn-Hn,jn=Fn===0?0:(Bn==_n?(Tn-Nn)/Fn+(Tn<Nn?6:0):Bn==Tn?(Nn-_n)/Fn+2:(_n-Tn)/Fn+4)*60;return[jn,Bn===0?0:Fn/Bn,Bn]},"hsb-rgb":function(_n,Tn,Nn){_n=(_n/60%6+6)%6;var Hn=Math.floor(_n),Bn=_n-Hn,Hn=fn[Hn],Fn=[Nn,Nn*(1-Tn),Nn*(1-Tn*Bn),Nn*(1-Tn*(1-Bn))];return[Fn[Hn[0]],Fn[Hn[1]],Fn[Hn[2]]]},"rgb-hsl":function(_n,Tn,Nn){var Bn=Math.max(_n,Tn,Nn),Hn=Math.min(_n,Tn,Nn),Fn=Bn-Hn,jn=Fn===0,Jn=jn?0:(Bn==_n?(Tn-Nn)/Fn+(Tn<Nn?6:0):Bn==Tn?(Nn-_n)/Fn+2:(_n-Tn)/Fn+4)*60,Wn=(Bn+Hn)/2,Kn=jn?0:Wn<.5?Fn/(Bn+Hn):Fn/(2-Bn-Hn);return[Jn,Kn,Wn]},"hsl-rgb":function(_n,Tn,Nn){if(_n=(_n/360%1+1)%1,Tn===0)return[Nn,Nn,Nn];for(var Bn=[_n+1/3,_n,_n-1/3],Hn=Nn<.5?Nn*(1+Tn):Nn+Tn-Nn*Tn,Fn=2*Nn-Hn,jn=[],Jn=0;Jn<3;Jn++){var Wn=Bn[Jn];Wn<0&&(Wn+=1),Wn>1&&(Wn-=1),jn[Jn]=6*Wn<1?Fn+(Hn-Fn)*6*Wn:2*Wn<1?Hn:3*Wn<2?Fn+(Hn-Fn)*(2/3-Wn)*6:Fn}return jn},"rgb-gray":function(_n,Tn,Nn){return[_n*.2989+Tn*.587+Nn*.114]},"gray-rgb":function(_n){return[_n,_n,_n]},"gray-hsb":function(_n){return[0,0,_n]},"gray-hsl":function(_n){return[0,0,_n]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return ct.each($t,function(_n,Tn){Jt[Tn]=[],ct.each(_n,function(Nn,Bn){var Hn=ct.capitalize(Nn),Fn=/^(hue|saturation)$/.test(Nn),jn=Jt[Tn][Bn]=Tn==="gradient"?Nn==="gradient"?function(Jn){var Wn=this._components[0];return Jn=rr.read(Array.isArray(Jn)?Jn:arguments,0,{readNull:!0}),Wn!==Jn&&(Wn&&Wn._removeOwner(this),Jn&&Jn._addOwner(this)),Jn}:function(){return Ft.read(arguments,0,{readNull:Nn==="highlight",clone:!0})}:function(Jn){return Jn==null||isNaN(Jn)?0:+Jn};this["get"+Hn]=function(){return this._type===Tn||Fn&&/^hs[bl]$/.test(this._type)?this._components[Bn]:this._convert(Tn)[Bn]},this["set"+Hn]=function(Jn){this._type!==Tn&&!(Fn&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(Tn),this._properties=$t[Tn],this._type=Tn),this._components[Bn]=jn.call(this,Jn),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function _n(Tn){var Nn=arguments,Bn=this.__read,Hn=0,Fn,jn,Jn,Wn;Array.isArray(Tn)&&(Nn=Tn,Tn=Nn[0]);var Kn=Tn!=null&&typeof Tn;if(Kn==="string"&&Tn in $t&&(Fn=Tn,Tn=Nn[1],Array.isArray(Tn)?(jn=Tn,Jn=Nn[2]):(Bn&&(Hn=1),Nn=ct.slice(Nn,1),Kn=typeof Tn)),!jn){if(Wn=Kn==="number"?Nn:Kn==="object"&&Tn.length!=null?Tn:null,Wn){Fn||(Fn=Wn.length>=3?"rgb":"gray");var zn=$t[Fn].length;Jn=Wn[zn],Bn&&(Hn+=Wn===arguments?zn+(Jn!=null?1:0):1),Wn.length>zn&&(Wn=ct.slice(Wn,0,zn))}else if(Kn==="string"){var Gn=cn(Tn);Fn=Gn[0],jn=Gn[1],jn.length===4&&(Jn=jn[3],jn.length--)}else if(Kn==="object")if(Tn.constructor===_n){if(Fn=Tn._type,jn=Tn._components.slice(),Jn=Tn._alpha,Fn==="gradient")for(var Dn=1,qn=jn.length;Dn<qn;Dn++){var Zn=jn[Dn];Zn&&(jn[Dn]=Zn.clone())}}else if(Tn.constructor===rr)Fn="gradient",Wn=Nn;else{Fn="hue"in Tn?"lightness"in Tn?"hsl":"hsb":"gradient"in Tn||"stops"in Tn||"radial"in Tn?"gradient":"gray"in Tn?"gray":"rgb";var nr=$t[Fn],Yn=Jt[Fn];this._components=jn=[];for(var Dn=0,qn=nr.length;Dn<qn;Dn++){var sr=Tn[nr[Dn]];sr==null&&!Dn&&Fn==="gradient"&&"stops"in Tn&&(sr={stops:Tn.stops,radial:Tn.radial}),sr=Yn[Dn].call(this,sr),sr!=null&&(jn[Dn]=sr)}Jn=Tn.alpha}Bn&&Fn&&(Hn=1)}if(this._type=Fn||"rgb",!jn){this._components=jn=[];for(var Yn=Jt[this._type],Dn=0,qn=Yn.length;Dn<qn;Dn++){var sr=Yn[Dn].call(this,Wn&&Wn[Dn]);sr!=null&&(jn[Dn]=sr)}}return this._components=jn,this._properties=$t[this._type],this._alpha=Jn,Bn&&(this.__read=Hn),this},set:"#initialize",_serialize:function(_n,Tn){var Nn=this.getComponents();return ct.serialize(/^(gray|rgb)$/.test(this._type)?Nn:[this._type].concat(Nn),_n,!0,Tn)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(_n){var Tn;return this._type===_n?this._components.slice():(Tn=wn[this._type+"-"+_n])?Tn.apply(this,this._components):wn["rgb-"+_n].apply(this,wn[this._type+"-rgb"].apply(this,this._components))},convert:function(_n){return new ar(_n,this._convert(_n),this._alpha)},getType:function(){return this._type},setType:function(_n){this._components=this._convert(_n),this._properties=$t[_n],this._type=_n},getComponents:function(){var _n=this._components.slice();return this._alpha!=null&&_n.push(this._alpha),_n},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(_n){this._alpha=_n==null?null:Math.min(Math.max(_n,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(_n){var Tn=ct.isPlainValue(_n,!0)?ar.read(arguments):_n;return Tn===this||Tn&&this._class===Tn._class&&this._type===Tn._type&&this.getAlpha()===Tn.getAlpha()&&ct.equals(this._components,Tn._components)||!1},toString:function(){for(var _n=this._properties,Tn=[],Nn=this._type==="gradient",Bn=Tt.instance,Hn=0,Fn=_n.length;Hn<Fn;Hn++){var jn=this._components[Hn];jn!=null&&Tn.push(_n[Hn]+": "+(Nn?jn:Bn.number(jn)))}return this._alpha!=null&&Tn.push("alpha: "+Bn.number(this._alpha)),"{ "+Tn.join(", ")+" }"},toCSS:function(_n){var Tn=this._convert("rgb"),Nn=_n||this._alpha==null?1:this._alpha;function Bn(Hn){return Math.round((Hn<0?0:Hn>1?1:Hn)*255)}return Tn=[Bn(Tn[0]),Bn(Tn[1]),Bn(Tn[2])],Nn<1&&Tn.push(Nn<0?0:Nn),_n?"#"+((1<<24)+(Tn[0]<<16)+(Tn[1]<<8)+Tn[2]).toString(16).slice(1):(Tn.length==4?"rgba(":"rgb(")+Tn.join(",")+")"},toCanvasStyle:function(_n,Tn){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var Nn=this._components,Bn=Nn[0],Hn=Bn._stops,Fn=Nn[1],jn=Nn[2],Jn=Nn[3],Wn=Tn&&Tn.inverted(),Kn;if(Wn&&(Fn=Wn._transformPoint(Fn),jn=Wn._transformPoint(jn),Jn&&(Jn=Wn._transformPoint(Jn))),Bn._radial){var zn=jn.getDistance(Fn);if(Jn){var Gn=Jn.subtract(Fn);Gn.getLength()>zn&&(Jn=Fn.add(Gn.normalize(zn-.1)))}var Dn=Jn||Fn;Kn=_n.createRadialGradient(Dn.x,Dn.y,0,Fn.x,Fn.y,zn)}else Kn=_n.createLinearGradient(Fn.x,Fn.y,jn.x,jn.y);for(var qn=0,Zn=Hn.length;qn<Zn;qn++){var nr=Hn[qn],Yn=nr._offset;Kn.addColorStop(Yn??qn/(Zn-1),nr._color.toCanvasStyle())}return this._canvasStyle=Kn},transform:function(_n){if(this._type==="gradient"){for(var Tn=this._components,Nn=1,Bn=Tn.length;Nn<Bn;Nn++){var Hn=Tn[Nn];_n._transformPoint(Hn,Hn,!0)}this._changed()}},statics:{_types:$t,random:function(){var _n=Math.random;return new ar(_n(),_n(),_n())},_setOwner:function(_n,Tn,Nn){return _n&&(_n._owner&&Tn&&_n._owner!==Tn&&(_n=_n.clone()),!_n._owner^!Tn&&(_n._owner=Tn||null,_n._setter=Nn||null)),_n}}})},new function(){var $t={add:function(Jt,sn){return Jt+sn},subtract:function(Jt,sn){return Jt-sn},multiply:function(Jt,sn){return Jt*sn},divide:function(Jt,sn){return Jt/sn}};return ct.each($t,function(Jt,sn){this[sn]=function(ln){ln=ar.read(arguments);for(var cn=this._type,fn=this._components,wn=ln._convert(cn),_n=0,Tn=fn.length;_n<Tn;_n++)wn[_n]=Jt(fn[_n],wn[_n]);return new ar(cn,wn,this._alpha!=null?Jt(this._alpha,ln.getAlpha()):null)}},{})}),rr=ct.extend({_class:"Gradient",initialize:function(Jt,sn){this._id=jt.get(),Jt&&ct.isPlainObject(Jt)&&(this.set(Jt),Jt=sn=null),this._stops==null&&this.setStops(Jt||["white","black"]),this._radial==null&&this.setRadial(typeof sn=="string"&&sn==="radial"||sn||!1)},_serialize:function($t,Jt){return Jt.add(this,function(){return ct.serialize([this._stops,this._radial],$t,!0,Jt)})},_changed:function(){for(var $t=0,Jt=this._owners&&this._owners.length;$t<Jt;$t++)this._owners[$t]._changed()},_addOwner:function($t){this._owners||(this._owners=[]),this._owners.push($t)},_removeOwner:function($t){var Jt=this._owners?this._owners.indexOf($t):-1;Jt!=-1&&(this._owners.splice(Jt,1),this._owners.length||(this._owners=et))},clone:function(){for(var $t=[],Jt=0,sn=this._stops.length;Jt<sn;Jt++)$t[Jt]=this._stops[Jt].clone();return new rr($t,this._radial)},getStops:function(){return this._stops},setStops:function($t){if($t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var Jt=this._stops;if(Jt)for(var sn=0,ln=Jt.length;sn<ln;sn++)Jt[sn]._owner=et;Jt=this._stops=hr.readList($t,0,{clone:!0});for(var sn=0,ln=Jt.length;sn<ln;sn++)Jt[sn]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function($t){this._radial=$t,this._changed()},equals:function($t){if($t===this)return!0;if($t&&this._class===$t._class){var Jt=this._stops,sn=$t._stops,ln=Jt.length;if(ln===sn.length){for(var cn=0;cn<ln;cn++)if(!Jt[cn].equals(sn[cn]))return!1;return!0}}return!1}}),hr=ct.extend({_class:"GradientStop",initialize:function(Jt,sn){var ln=Jt,cn=sn;typeof Jt=="object"&&sn===et&&(Array.isArray(Jt)&&typeof Jt[0]!="number"?(ln=Jt[0],cn=Jt[1]):("color"in Jt||"offset"in Jt||"rampPoint"in Jt)&&(ln=Jt.color,cn=Jt.offset||Jt.rampPoint||0)),this.setColor(ln),this.setOffset(cn)},clone:function(){return new hr(this._color.clone(),this._offset)},_serialize:function($t,Jt){var sn=this._color,ln=this._offset;return ct.serialize(ln==null?[sn]:[sn,ln],$t,!0,Jt)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function($t){this._offset=$t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ar._setOwner(this._color,null),this._color=ar._setOwner(ar.read(arguments,0),this,"setColor"),this._changed()},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._color.equals($t._color)&&this._offset==$t._offset||!1}}),_r=ct.extend(new function(){var $t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new Ft,selectedColor:null},Jt=ct.set({},$t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),sn=ct.set({},Jt,{fillColor:new ar}),ln={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},cn={beans:!0},fn={_class:"Style",beans:!0,initialize:function(_n,Tn,Nn){this._values={},this._owner=Tn,this._project=Tn&&Tn._project||Nn||Kr.project,this._defaults=!Tn||Tn instanceof un?Jt:Tn instanceof Qn?sn:$t,_n&&this.set(_n)}};return ct.each(Jt,function(wn,_n){var Tn=/Color$/.test(_n),Nn=_n==="shadowOffset",Bn=ct.capitalize(_n),Hn=ln[_n],Fn="set"+Bn,jn="get"+Bn;fn[Fn]=function(Jn){var Wn=this._owner,Kn=Wn&&Wn._children,zn=Kn&&Kn.length>0&&!(Wn instanceof On);if(zn)for(var Gn=0,Dn=Kn.length;Gn<Dn;Gn++)Kn[Gn]._style[Fn](Jn);if((_n==="selectedColor"||!zn)&&_n in this._defaults){var qn=this._values[_n];qn!==Jn&&(Tn&&(qn&&(ar._setOwner(qn,null),qn._canvasStyle=null),Jn&&Jn.constructor===ar&&(Jn=ar._setOwner(Jn,Wn,zn&&Fn))),this._values[_n]=Jn,Wn&&Wn._changed(Hn||129))}},fn[jn]=function(Jn){var Wn=this._owner,Kn=Wn&&Wn._children,zn=Kn&&Kn.length>0&&!(Wn instanceof On),Gn;if(zn&&!Jn)for(var Dn=0,qn=Kn.length;Dn<qn;Dn++){var Zn=Kn[Dn]._style[jn]();if(!Dn)Gn=Zn;else if(!ct.equals(Gn,Zn))return et}else if(_n in this._defaults){var Gn=this._values[_n];if(Gn===et)Gn=this._defaults[_n],Gn&&Gn.clone&&(Gn=Gn.clone());else{var nr=Tn?ar:Nn?Ft:null;nr&&!(Gn&&Gn.constructor===nr)&&(this._values[_n]=Gn=nr.read([Gn],0,{readNull:!0,clone:!0}))}}return Gn&&Tn&&(Gn=ar._setOwner(Gn,Wn,zn&&Fn)),Gn},cn[jn]=function(Jn){return this._style[jn](Jn)},cn[Fn]=function(Jn){this._style[Fn](Jn)}}),ct.each({Font:"FontFamily",WindingRule:"FillRule"},function(wn,_n){var Tn="get"+_n,Nn="set"+_n;fn[Tn]=cn[Tn]="#get"+wn,fn[Nn]=cn[Nn]="#set"+wn}),an.inject(cn),fn},{set:function($t){var Jt=$t instanceof _r,sn=Jt?$t._values:$t;if(sn){for(var ln in sn)if(ln in this._defaults){var cn=sn[ln];this[ln]=cn&&Jt&&cn.clone?cn.clone():cn}}},equals:function($t){function Jt(sn,ln,cn){var fn=sn._values,wn=ln._values,_n=ln._defaults;for(var Tn in fn){var Nn=fn[Tn],Bn=wn[Tn];if(!(cn&&Tn in wn)&&!ct.equals(Nn,Bn===et?_n[Tn]:Bn))return!1}return!0}return $t===this||$t&&this._class===$t._class&&Jt(this,$t)&&Jt($t,this,!0)||!1},_dispose:function(){var $t;$t=this.getFillColor(),$t&&($t._canvasStyle=null),$t=this.getStrokeColor(),$t&&($t._canvasStyle=null),$t=this.getShadowColor(),$t&&($t._canvasStyle=null)},hasFill:function(){var $t=this.getFillColor();return!!$t&&$t.alpha>0},hasStroke:function(){var $t=this.getStrokeColor();return!!$t&&$t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var $t=this.getShadowColor();return!!$t&&$t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var $t=this.getFontSize();return this.getFontWeight()+" "+$t+(/[a-z]/i.test($t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function $t(){var Jt=$t.base.call(this),sn=this.getFontSize();return/pt|em|%|px/.test(sn)&&(sn=this.getView().getPixelSize(sn)),Jt??sn*1.2}}),xr=new function(){function $t(Jt,sn,ln,cn){for(var fn=["","webkit","moz","Moz","ms","o"],wn=sn[0].toUpperCase()+sn.substring(1),_n=0;_n<6;_n++){var Tn=fn[_n],Nn=Tn?Tn+wn:sn;if(Nn in Jt){if(ln)Jt[Nn]=cn;else return Jt[Nn];break}}}return{getStyles:function(Jt){var sn=Jt&&Jt.nodeType!==9?Jt.ownerDocument:Jt,ln=sn&&sn.defaultView;return ln&&ln.getComputedStyle(Jt,"")},getBounds:function(Jt,sn){var ln=Jt.ownerDocument,cn=ln.body,fn=ln.documentElement,wn;try{wn=Jt.getBoundingClientRect()}catch{wn={left:0,top:0,width:0,height:0}}var _n=wn.left-(fn.clientLeft||cn.clientLeft||0),Tn=wn.top-(fn.clientTop||cn.clientTop||0);if(!sn){var Nn=ln.defaultView;_n+=Nn.pageXOffset||fn.scrollLeft||cn.scrollLeft,Tn+=Nn.pageYOffset||fn.scrollTop||cn.scrollTop}return new zt(_n,Tn,wn.width,wn.height)},getViewportBounds:function(Jt){var sn=Jt.ownerDocument,ln=sn.defaultView,cn=sn.documentElement;return new zt(0,0,ln.innerWidth||cn.clientWidth,ln.innerHeight||cn.clientHeight)},getOffset:function(Jt,sn){return xr.getBounds(Jt,sn).getPoint()},getSize:function(Jt){return xr.getBounds(Jt,!0).getSize()},isInvisible:function(Jt){return xr.getSize(Jt).equals(new Ht(0,0))},isInView:function(Jt){return!xr.isInvisible(Jt)&&xr.getViewportBounds(Jt).intersects(xr.getBounds(Jt,!0))},isInserted:function(Jt){return ut.body.contains(Jt)},getPrefixed:function(Jt,sn){return Jt&&$t(Jt,sn)},setPrefixed:function(Jt,sn,ln){if(typeof sn=="object")for(var cn in sn)$t(Jt,cn,!0,sn[cn]);else $t(Jt,sn,!0,ln)}}},wr={add:function($t,Jt){if($t)for(var sn in Jt)for(var ln=Jt[sn],cn=sn.split(/[\s,]+/g),fn=0,wn=cn.length;fn<wn;fn++){var _n=cn[fn],Tn=$t===ut&&(_n==="touchstart"||_n==="touchmove")?{passive:!1}:!1;$t.addEventListener(_n,ln,Tn)}},remove:function($t,Jt){if($t)for(var sn in Jt)for(var ln=Jt[sn],cn=sn.split(/[\s,]+/g),fn=0,wn=cn.length;fn<wn;fn++)$t.removeEventListener(cn[fn],ln,!1)},getPoint:function($t){var Jt=$t.targetTouches?$t.targetTouches.length?$t.targetTouches[0]:$t.changedTouches[0]:$t;return new Ft(Jt.pageX||Jt.clientX+ut.documentElement.scrollLeft,Jt.pageY||Jt.clientY+ut.documentElement.scrollTop)},getTarget:function($t){return $t.target||$t.srcElement},getRelatedTarget:function($t){return $t.relatedTarget||$t.toElement},getOffset:function($t,Jt){return wr.getPoint($t).subtract(xr.getOffset(Jt||wr.getTarget($t)))}};wr.requestAnimationFrame=new function(){var $t=xr.getPrefixed(ot,"requestAnimationFrame"),Jt=!1,sn=[],ln;function cn(){var fn=sn;sn=[];for(var wn=0,_n=fn.length;wn<_n;wn++)fn[wn]();Jt=$t&&sn.length,Jt&&$t(cn)}return function(fn){sn.push(fn),$t?Jt||($t(cn),Jt=!0):ln||(ln=setInterval(cn,1e3/60))}};var Ir=ct.extend(dt,{_class:"View",initialize:function $t(Jt,sn){function ln(Hn){return sn[Hn]||parseInt(sn.getAttribute(Hn),10)}function cn(){var Hn=xr.getSize(sn);return Hn.isNaN()||Hn.isZero()?new Ht(ln("width"),ln("height")):Hn}var fn;if(ot&&sn){this._id=sn.getAttribute("id"),this._id==null&&sn.setAttribute("id",this._id="paper-view-"+$t._id++),wr.add(sn,this._viewEvents);var wn="none";if(xr.setPrefixed(sn.style,{userDrag:wn,userSelect:wn,touchCallout:wn,contentZooming:wn,tapHighlightColor:"rgba(0,0,0,0)"}),ft.hasAttribute(sn,"resize")){var _n=this;wr.add(ot,this._windowEvents={resize:function(){_n.setViewSize(cn())}})}if(fn=cn(),ft.hasAttribute(sn,"stats")&&typeof Stats<"u"){this._stats=new Stats;var Tn=this._stats.domElement,Nn=Tn.style,Bn=xr.getOffset(sn);Nn.position="absolute",Nn.left=Bn.x+"px",Nn.top=Bn.y+"px",ut.body.appendChild(Tn)}}else fn=new Ht(sn),sn=null;this._project=Jt,this._scope=Jt._scope,this._element=sn,this._pixelRatio||(this._pixelRatio=ot&&ot.devicePixelRatio||1),this._setElementSize(fn.width,fn.height),this._viewSize=fn,$t._views.push(this),$t._viewsById[this._id]=this,(this._matrix=new en)._owner=this,$t._focused||($t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Kr.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ir._focused===this&&(Ir._focused=null),Ir._views.splice(Ir._views.indexOf(this),1),delete Ir._viewsById[this._id];var $t=this._project;return $t._view===this&&($t._view=null),wr.remove(this._element,this._viewEvents),wr.remove(ot,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:ct.each(an._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function($t){this[$t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function($t){this._autoUpdate=$t,$t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var $t=this;wr.requestAnimationFrame(function(){if($t._requested=!1,$t._animate){$t.requestUpdate();var Jt=$t._element;(!xr.getPrefixed(ut,"hidden")||ft.getAttribute(Jt,"keepalive")==="true")&&xr.isInView(Jt)&&$t._handleFrame()}$t._autoUpdate&&$t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Kr=this._scope;var $t=Date.now()/1e3,Jt=this._last?$t-this._last:0;this._last=$t,this.emit("frame",new ct({delta:Jt,time:this._time+=Jt,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function($t,Jt){var sn=this._frameItems;Jt?(sn[$t._id]={item:$t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete sn[$t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function($t){for(var Jt in this._frameItems){var sn=this._frameItems[Jt];sn.item.emit("frame",new ct($t,{time:sn.time+=$t.delta,count:sn.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=et},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var $t=this._viewSize;return new Yt($t.width,$t.height,this,"setViewSize")},setViewSize:function(){var $t=Ht.read(arguments),Jt=$t.subtract(this._viewSize);Jt.isZero()||(this._setElementSize($t.width,$t.height),this._viewSize.set($t),this._changed(),this.emit("resize",{size:$t,delta:Jt}),this._autoUpdate&&this.update())},_setElementSize:function($t,Jt){var sn=this._element;sn&&(sn.width!==$t&&(sn.width=$t),sn.height!==Jt&&(sn.height=Jt))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new zt(new Ft,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return xr.isInView(this._element)},isInserted:function(){return xr.isInserted(this._element)},getPixelSize:function($t){var Jt=this._element,sn;if(Jt){var ln=Jt.parentNode,cn=ut.createElement("div");cn.style.fontSize=$t,ln.appendChild(cn),sn=parseFloat(xr.getStyles(cn).fontSize),ln.removeChild(cn)}else sn=parseFloat(sn);return sn},getTextWidth:function($t,Jt){return 0}},ct.each(["rotate","scale","shear","skew"],function($t){var Jt=$t==="rotate";this[$t]=function(){var sn=arguments,ln=(Jt?ct:Ft).read(sn),cn=Ft.read(sn,0,{readNull:!0});return this.transform(new en()[$t](ln,cn||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var $t=new en;return this.transform($t.translate.apply($t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var $t=Ft.read(arguments);this.translate(this.getCenter().subtract($t))},getZoom:function(){var $t=this._decompose().scaling;return($t.x+$t.y)/2},setZoom:function($t){this.transform(new en().scale($t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function($t){var Jt=this.getRotation();Jt!=null&&$t!=null&&this.rotate($t-Jt)},getScaling:function(){var $t=this._decompose().scaling;return new Bt($t.x,$t.y,this,"setScaling")},setScaling:function(){var $t=this.getScaling(),Jt=Ft.read(arguments,0,{clone:!0,readNull:!0});$t&&Jt&&this.scale(Jt.x/$t.x,Jt.y/$t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var $t=this._matrix;$t.set.apply($t,arguments)},transform:function($t){this._matrix.append($t)},scrollBy:function(){this.translate(Ft.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(Ft.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(Ft.read(arguments))},getEventPoint:function($t){return this.viewToProject(wr.getOffset($t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function($t,Jt){ut&&typeof Jt=="string"&&(Jt=ut.getElementById(Jt));var sn=ot?_i:Ir;return new sn($t,Jt)}}},new function(){if(!ot)return;var $t,Jt,sn=!1,ln=!1;function cn(lr){var mr=wr.getTarget(lr);return mr.getAttribute&&Ir._viewsById[mr.getAttribute("id")]}function fn(){var lr=Ir._focused;if(!lr||!lr.isVisible()){for(var mr=0,yr=Ir._views.length;mr<yr;mr++)if((lr=Ir._views[mr]).isVisible()){Ir._focused=Jt=lr;break}}}function wn(lr,mr,yr){lr._handleMouseEvent("mousemove",mr,yr)}var _n=ot.navigator,Tn,Nn,Bn;_n.pointerEnabled||_n.msPointerEnabled?(Tn="pointerdown MSPointerDown",Nn="pointermove MSPointerMove",Bn="pointerup pointercancel MSPointerUp MSPointerCancel"):(Tn="touchstart",Nn="touchmove",Bn="touchend touchcancel","ontouchstart"in ot&&_n.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(Tn+=" mousedown",Nn+=" mousemove",Bn+=" mouseup"));var Hn={},Fn={mouseout:function(lr){var mr=Ir._focused,yr=wr.getRelatedTarget(lr);if(mr&&(!yr||yr.nodeName==="HTML")){var br=wr.getOffset(lr,mr._element),Er=br.x,Pr=Math.abs,Hr=Pr(Er),Wr=1<<25,Xr=Hr-Wr;br.x=Pr(Xr)<Hr?Xr*(Er<0?-1:1):Er,wn(mr,lr,mr.viewToProject(br))}},scroll:fn};Hn[Tn]=function(lr){var mr=Ir._focused=cn(lr);sn||(sn=!0,mr._handleMouseEvent("mousedown",lr))},Fn[Nn]=function(lr){var mr=Ir._focused;if(!ln){var yr=cn(lr);yr?mr!==yr&&(mr&&wn(mr,lr),$t||($t=mr),mr=Ir._focused=Jt=yr):Jt&&Jt===mr&&($t&&!$t.isInserted()&&($t=null),mr=Ir._focused=$t,$t=null,fn())}mr&&wn(mr,lr)},Fn[Tn]=function(){ln=!0},Fn[Bn]=function(lr){var mr=Ir._focused;mr&&sn&&mr._handleMouseEvent("mouseup",lr),ln=sn=!1},wr.add(ut,Fn),wr.add(ot,{load:fn});var jn=!1,Jn=!1,Wn={doubleclick:"click",mousedrag:"mousemove"},Kn=!1,zn,Gn,Dn,qn,Zn,nr,Yn,sr;function ur(lr,mr,yr,br,Er,Pr,Hr){var Wr=!1,Xr;function es(Dr,$r){if(Dr.responds($r)){if(Xr||(Xr=new Cs($r,br,Er,mr||Dr,Pr?Er.subtract(Pr):null)),Dr.emit($r,Xr)&&(jn=!0,Xr.prevented&&(Jn=!0),Xr.stopped))return Wr=!0}else{var Qr=Wn[$r];if(Qr)return es(Dr,Qr)}}for(;lr&&lr!==Hr&&!es(lr,yr);)lr=lr._parent;return Wr}function dr(lr,mr,yr,br,Er,Pr){return lr._project.removeOn(yr),Jn=jn=!1,Zn&&ur(Zn,null,yr,br,Er,Pr)||mr&&mr!==Zn&&!mr.isDescendant(Zn)&&ur(mr,null,yr==="mousedrag"?"mousemove":yr,br,Er,Pr,Zn)||ur(lr,Zn||mr||lr,yr,br,Er,Pr)}var gr={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Hn,_handleMouseEvent:function(lr,mr,yr){var br=this._itemEvents,Er=br.native[lr],Pr=lr==="mousemove",Hr=this._scope.tool,Wr=this;function Xr(ys){return br.virtual[ys]||Wr.responds(ys)||Hr&&Hr.responds(ys)}Pr&&sn&&Xr("mousedrag")&&(lr="mousedrag"),yr||(yr=this.getEventPoint(mr));var es=this.getBounds().contains(yr),Dr=Er&&es&&Wr._project.hitTest(yr,{tolerance:0,fill:!0,stroke:!0}),$r=Dr&&Dr.item||null,Qr=!1,ss={};if(ss[lr.substr(5)]=!0,Er&&$r!==qn&&(qn&&ur(qn,null,"mouseleave",mr,yr),$r&&ur($r,null,"mouseenter",mr,yr),qn=$r),Kn^es&&(ur(this,null,es?"mouseenter":"mouseleave",mr,yr),Qr=!0),(es||ss.drag)&&!yr.equals(Gn)&&(dr(this,$r,Pr?lr:"mousemove",mr,yr,Gn),Qr=!0),Kn=es,ss.down&&es||ss.up&&zn){if(dr(this,$r,lr,mr,yr,zn),ss.down){if(sr=$r===nr&&Date.now()-Yn<300,Dn=nr=$r,!Jn&&$r){for(var ns=$r;ns&&!ns.responds("mousedrag");)ns=ns._parent;ns&&(Zn=$r)}zn=yr}else ss.up&&(!Jn&&$r===Dn&&(Yn=Date.now(),dr(this,$r,sr?"doubleclick":"click",mr,yr,zn),sr=!1),Dn=Zn=null);Kn=!1,Qr=!0}Gn=yr,Qr&&Hr&&(jn=Hr._handleMouseEvent(lr,mr,yr,ss)||jn),mr.cancelable!==!1&&(jn&&!ss.move||ss.down&&Xr("mouseup"))&&mr.preventDefault()},_handleKeyEvent:function(lr,mr,yr,br){var Er=this._scope,Pr=Er.tool,Hr;function Wr(Xr){Xr.responds(lr)&&(Kr=Er,Xr.emit(lr,Hr=Hr||new Fr(lr,mr,yr,br)))}this.isVisible()&&(Wr(this),Pr&&Pr.responds(lr)&&Wr(Pr))},_countItemEvent:function(lr,mr){var yr=this._itemEvents,br=yr.native,Er=yr.virtual;for(var Pr in gr)br[Pr]=(br[Pr]||0)+(gr[Pr][lr]||0)*mr;Er[lr]=(Er[lr]||0)+mr},statics:{updateFocus:fn,_resetState:function(){sn=ln=jn=Kn=!1,$t=Jt=zn=Gn=Dn=qn=Zn=nr=Yn=sr=null}}}}),_i=Ir.extend({_class:"CanvasView",initialize:function(Jt,sn){if(!(sn instanceof ot.HTMLCanvasElement)){var ln=Ht.read(arguments,1);if(ln.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+ct.slice(arguments,1));sn=zr.getCanvas(ln)}var cn=this._context=sn.getContext("2d");if(cn.save(),this._pixelRatio=1,!/^off|false$/.test(ft.getAttribute(sn,"hidpi"))){var fn=ot.devicePixelRatio||1,wn=xr.getPrefixed(cn,"backingStorePixelRatio")||1;this._pixelRatio=fn/wn}Ir.call(this,Jt,sn),this._needsUpdate=!0},remove:function $t(){return this._context.restore(),$t.base.call(this)},_setElementSize:function $t(Jt,sn){var ln=this._pixelRatio;if($t.base.call(this,Jt*ln,sn*ln),ln!==1){var cn=this._element,fn=this._context;if(!ft.hasAttribute(cn,"resize")){var wn=cn.style;wn.width=Jt+"px",wn.height=sn+"px"}fn.restore(),fn.save(),fn.scale(ln,ln)}},getContext:function(){return this._context},getPixelSize:function $t(Jt){var sn=Kr.agent,ln;if(sn&&sn.firefox)ln=$t.base.call(this,Jt);else{var cn=this._context,fn=cn.font;cn.font=Jt+" serif",ln=parseFloat(cn.font),cn.font=fn}return ln},getTextWidth:function($t,Jt){var sn=this._context,ln=sn.font,cn=0;sn.font=$t;for(var fn=0,wn=Jt.length;fn<wn;fn++)cn=Math.max(cn,sn.measureText(Jt[fn]).width);return sn.font=ln,cn},update:function(){if(!this._needsUpdate)return!1;var $t=this._project,Jt=this._context,sn=this._viewSize;return Jt.clearRect(0,0,sn.width+1,sn.height+1),$t&&$t.draw(Jt,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Br=ct.extend({_class:"Event",initialize:function(Jt){this.event=Jt,this.type=Jt&&Jt.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return cs.modifiers}}),Fr=Br.extend({_class:"KeyEvent",initialize:function(Jt,sn,ln,cn){this.type=Jt,this.event=sn,this.key=ln,this.character=cn},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),cs=new function(){var $t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},Jt={tab:"	",space:" ",enter:"\r"},sn={},ln={},cn,fn,wn=new ct({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var Nn=Kr&&Kr.agent;return Nn&&Nn.mac?this.meta:this.control}}});function _n(Nn){var Bn=Nn.key||Nn.keyIdentifier;return Bn=/^U\+/.test(Bn)?String.fromCharCode(parseInt(Bn.substr(2),16)):/^Arrow[A-Z]/.test(Bn)?Bn.substr(5):Bn==="Unidentified"||Bn===et?String.fromCharCode(Nn.keyCode):Bn,$t[Bn]||(Bn.length>1?ct.hyphenate(Bn):Bn.toLowerCase())}function Tn(Nn,Bn,Hn,Fn){var jn=Ir._focused,Jn;if(sn[Bn]=Nn,Nn?ln[Bn]=Hn:delete ln[Bn],Bn.length>1&&(Jn=ct.camelize(Bn))in wn){wn[Jn]=Nn;var Wn=Kr&&Kr.agent;if(Jn==="meta"&&Wn&&Wn.mac)if(Nn)cn={};else{for(var Kn in cn)Kn in ln&&Tn(!1,Kn,cn[Kn],Fn);cn=null}}else Nn&&cn&&(cn[Bn]=Hn);jn&&jn._handleKeyEvent(Nn?"keydown":"keyup",Fn,Bn,Hn)}return wr.add(ut,{keydown:function(Nn){var Bn=_n(Nn),Hn=Kr&&Kr.agent;Bn.length>1||Hn&&Hn.chrome&&(Nn.altKey||Hn.mac&&Nn.metaKey||!Hn.mac&&Nn.ctrlKey)?Tn(!0,Bn,Jt[Bn]||(Bn.length>1?"":Bn),Nn):fn=Bn},keypress:function(Nn){if(fn){var Bn=_n(Nn),Hn=Nn.charCode,Fn=Hn>=32?String.fromCharCode(Hn):Bn.length>1?"":Bn;Bn!==fn&&(Bn=Fn.toLowerCase()),Tn(!0,Bn,Fn,Nn),fn=null}},keyup:function(Nn){var Bn=_n(Nn);Bn in ln&&Tn(!1,Bn,ln[Bn],Nn)}}),wr.add(ot,{blur:function(Nn){for(var Bn in ln)Tn(!1,Bn,ln[Bn],Nn)}}),{modifiers:wn,isDown:function(Nn){return!!sn[Nn]}}},Cs=Br.extend({_class:"MouseEvent",initialize:function(Jt,sn,ln,cn,fn){this.type=Jt,this.event=sn,this.point=ln,this.target=cn,this.delta=fn},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ts=Br.extend({_class:"ToolEvent",_item:null,initialize:function(Jt,sn,ln){this.tool=Jt,this.type=sn,this.event=ln},_choosePoint:function($t,Jt){return $t||(Jt?Jt.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function($t){this._point=$t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function($t){this._lastPoint=$t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function($t){this._downPoint=$t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function($t){this._middlePoint=$t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function($t){this._delta=$t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function($t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=$t},getItem:function(){if(!this._item){var $t=this.tool._scope.project.hitTest(this.getPoint());if($t){for(var Jt=$t.item,sn=Jt._parent;/^(Group|CompoundPath)$/.test(sn._class);)Jt=sn,sn=sn._parent;this._item=Jt}}return this._item},setItem:function($t){this._item=$t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Rr=St.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(Jt){St.call(this),this._moveCount=-1,this._downCount=-1,this.set(Jt)},getMinDistance:function(){return this._minDistance},setMinDistance:function($t){this._minDistance=$t,$t!=null&&this._maxDistance!=null&&$t>this._maxDistance&&(this._maxDistance=$t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function($t){this._maxDistance=$t,this._minDistance!=null&&$t!=null&&$t<this._minDistance&&(this._minDistance=$t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function($t){this._minDistance=this._maxDistance=$t},_handleMouseEvent:function($t,Jt,sn,ln){Kr=this._scope,ln.drag&&!this.responds($t)&&($t="mousemove");var cn=ln.move||ln.drag,fn=this.responds($t),wn=!1,_n=this;function Tn(Bn,Hn){var Fn=sn,jn=cn?_n._point:_n._downPoint||Fn;if(cn){if(_n._moveCount>=0&&Fn.equals(jn))return!1;if(jn&&(Bn!=null||Hn!=null)){var Jn=Fn.subtract(jn),Wn=Jn.getLength();if(Wn<(Bn||0))return!1;Hn&&(Fn=jn.add(Jn.normalize(Math.min(Wn,Hn))))}_n._moveCount++}return _n._point=Fn,_n._lastPoint=jn||Fn,ln.down&&(_n._moveCount=-1,_n._downPoint=Fn,_n._downCount++),!0}function Nn(){fn&&(wn=_n.emit($t,new Ts(_n,$t,Jt))||wn)}if(ln.down)Tn(),Nn();else if(ln.up)Tn(null,this._maxDistance),Nn();else if(fn)for(;Tn(this._minDistance,this._maxDistance);)Nn();return wn}}),Lr=ct.extend(dt,{_class:"Tween",statics:{easings:new ct({linear:function($t){return $t},easeInQuad:function($t){return $t*$t},easeOutQuad:function($t){return $t*(2-$t)},easeInOutQuad:function($t){return $t<.5?2*$t*$t:-1+2*(2-$t)*$t},easeInCubic:function($t){return $t*$t*$t},easeOutCubic:function($t){return--$t*$t*$t+1},easeInOutCubic:function($t){return $t<.5?4*$t*$t*$t:($t-1)*(2*$t-2)*(2*$t-2)+1},easeInQuart:function($t){return $t*$t*$t*$t},easeOutQuart:function($t){return 1- --$t*$t*$t*$t},easeInOutQuart:function($t){return $t<.5?8*$t*$t*$t*$t:1-8*--$t*$t*$t*$t},easeInQuint:function($t){return $t*$t*$t*$t*$t},easeOutQuint:function($t){return 1+--$t*$t*$t*$t*$t},easeInOutQuint:function($t){return $t<.5?16*$t*$t*$t*$t*$t:1+16*--$t*$t*$t*$t*$t}})},initialize:function $t(Jt,sn,ln,cn,fn,wn){this.object=Jt;var _n=typeof fn,Tn=_n==="function";this.type=Tn?_n:_n==="string"?fn:"linear",this.easing=Tn?fn:$t.easings[this.type],this.duration=cn,this.running=!1,this._then=null,this._startTime=null;var Nn=sn||ln;this._keys=Nn?Object.keys(Nn):[],this._parsedKeys=this._parseKeys(this._keys),this._from=Nn&&this._getState(sn),this._to=Nn&&this._getState(ln),wn!==!1&&this.start()},then:function($t){return this._then=$t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function($t){if(this.running){$t>=1&&($t=1,this.running=!1);for(var Jt=this.easing($t),sn=this._keys,ln=function(Bn){return typeof Bn=="function"?Bn(Jt,$t):Bn},cn=0,fn=sn&&sn.length;cn<fn;cn++){var wn=sn[cn],_n=ln(this._from[wn]),Tn=ln(this._to[wn]),Nn=_n&&Tn&&_n.__add&&Tn.__add?Tn.__subtract(_n).__multiply(Jt).__add(_n):(Tn-_n)*Jt+_n;this._setProperty(this._parsedKeys[wn],Nn)}this.responds("update")&&this.emit("update",new ct({progress:$t,factor:Jt})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function($t){var Jt=this._startTime,sn=Jt?($t-Jt)/this.duration:0;Jt||(this._startTime=$t),this.update(sn)},_getState:function($t){for(var Jt=this._keys,sn={},ln=0,cn=Jt.length;ln<cn;ln++){var fn=Jt[ln],wn=this._parsedKeys[fn],_n=this._getProperty(wn),Tn;if($t){var Nn=this._resolveValue(_n,$t[fn]);this._setProperty(wn,Nn),Tn=this._getProperty(wn),Tn=Tn&&Tn.clone?Tn.clone():Tn,this._setProperty(wn,_n)}else Tn=_n&&_n.clone?_n.clone():_n;sn[fn]=Tn}return sn},_resolveValue:function($t,Jt){if(Jt){if(Array.isArray(Jt)&&Jt.length===2){var sn=Jt[0];return sn&&sn.match&&sn.match(/^[+\-\*\/]=/)?this._calculate($t,sn[0],Jt[1]):Jt}else if(typeof Jt=="string"){var ln=Jt.match(/^[+\-*/]=(.*)/);if(ln){var cn=JSON.parse(ln[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate($t,Jt[0],cn)}}}return Jt},_calculate:function($t,Jt,sn){return Kr.PaperScript.calculateBinary($t,Jt,sn)},_parseKeys:function($t){for(var Jt={},sn=0,ln=$t.length;sn<ln;sn++){var cn=$t[sn],fn=cn.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");Jt[cn]=fn.split("/")}return Jt},_getProperty:function($t,Jt){for(var sn=this.object,ln=0,cn=$t.length-(Jt||0);ln<cn&&sn;ln++)sn=sn[$t[ln]];return sn},_setProperty:function($t,Jt){var sn=this._getProperty($t,1);sn&&(sn[$t[$t.length-1]]=Jt)}}),Gr={request:function($t){var Jt=new g.XMLHttpRequest;return Jt.open(($t.method||"get").toUpperCase(),$t.url,ct.pick($t.async,!0)),$t.mimeType&&Jt.overrideMimeType($t.mimeType),Jt.onload=function(){var sn=Jt.status;sn===0||sn===200?$t.onLoad&&$t.onLoad.call(Jt,Jt.responseText):Jt.onerror()},Jt.onerror=function(){var sn=Jt.status,ln='Could not load "'+$t.url+'" (Status: '+sn+")";if($t.onError)$t.onError(ln,sn);else throw new Error(ln)},Jt.send(null)}},zr=ct.exports.CanvasProvider={canvases:[],getCanvas:function($t,Jt,sn){if(!ot)return null;var ln,cn=!0;typeof $t=="object"&&(Jt=$t.height,$t=$t.width),this.canvases.length?ln=this.canvases.pop():(ln=ut.createElement("canvas"),cn=!1);var fn=ln.getContext("2d",sn||{});if(!fn)throw new Error("Canvas "+ln+" is unable to provide a 2D context.");return ln.width===$t&&ln.height===Jt?cn&&fn.clearRect(0,0,$t+1,Jt+1):(ln.width=$t,ln.height=Jt),fn.save(),ln},getContext:function($t,Jt,sn){var ln=this.getCanvas($t,Jt,sn);return ln?ln.getContext("2d",sn||{}):null},release:function($t){var Jt=$t&&$t.canvas?$t.canvas:$t;Jt&&Jt.getContext&&(Jt.getContext("2d").restore(),this.canvases.push(Jt))}},Vr=new function(){var $t=Math.min,Jt=Math.max,sn=Math.abs,ln,cn,fn,wn,_n,Tn,Nn,Bn,Hn,Fn,jn;function Jn(Zn,nr,Yn){return .2989*Zn+.587*nr+.114*Yn}function Wn(Zn,nr,Yn,dr){var ur=dr-Jn(Zn,nr,Yn);Hn=Zn+ur,Fn=nr+ur,jn=Yn+ur;var dr=Jn(Hn,Fn,jn),gr=$t(Hn,Fn,jn),lr=Jt(Hn,Fn,jn);if(gr<0){var mr=dr-gr;Hn=dr+(Hn-dr)*dr/mr,Fn=dr+(Fn-dr)*dr/mr,jn=dr+(jn-dr)*dr/mr}if(lr>255){var yr=255-dr,br=lr-dr;Hn=dr+(Hn-dr)*yr/br,Fn=dr+(Fn-dr)*yr/br,jn=dr+(jn-dr)*yr/br}}function Kn(Zn,nr,Yn){return Jt(Zn,nr,Yn)-$t(Zn,nr,Yn)}function zn(Zn,nr,Yn,sr){var ur=[Zn,nr,Yn],dr=Jt(Zn,nr,Yn),gr=$t(Zn,nr,Yn),lr;gr=gr===Zn?0:gr===nr?1:2,dr=dr===Zn?0:dr===nr?1:2,lr=$t(gr,dr)===0?Jt(gr,dr)===1?2:1:0,ur[dr]>ur[gr]?(ur[lr]=(ur[lr]-ur[gr])*sr/(ur[dr]-ur[gr]),ur[dr]=sr):ur[lr]=ur[dr]=0,ur[gr]=0,Hn=ur[0],Fn=ur[1],jn=ur[2]}var Gn={multiply:function(){Hn=_n*ln/255,Fn=Tn*cn/255,jn=Nn*fn/255},screen:function(){Hn=_n+ln-_n*ln/255,Fn=Tn+cn-Tn*cn/255,jn=Nn+fn-Nn*fn/255},overlay:function(){Hn=_n<128?2*_n*ln/255:255-2*(255-_n)*(255-ln)/255,Fn=Tn<128?2*Tn*cn/255:255-2*(255-Tn)*(255-cn)/255,jn=Nn<128?2*Nn*fn/255:255-2*(255-Nn)*(255-fn)/255},"soft-light":function(){var Zn=ln*_n/255;Hn=Zn+_n*(255-(255-_n)*(255-ln)/255-Zn)/255,Zn=cn*Tn/255,Fn=Zn+Tn*(255-(255-Tn)*(255-cn)/255-Zn)/255,Zn=fn*Nn/255,jn=Zn+Nn*(255-(255-Nn)*(255-fn)/255-Zn)/255},"hard-light":function(){Hn=ln<128?2*ln*_n/255:255-2*(255-ln)*(255-_n)/255,Fn=cn<128?2*cn*Tn/255:255-2*(255-cn)*(255-Tn)/255,jn=fn<128?2*fn*Nn/255:255-2*(255-fn)*(255-Nn)/255},"color-dodge":function(){Hn=_n===0?0:ln===255?255:$t(255,255*_n/(255-ln)),Fn=Tn===0?0:cn===255?255:$t(255,255*Tn/(255-cn)),jn=Nn===0?0:fn===255?255:$t(255,255*Nn/(255-fn))},"color-burn":function(){Hn=_n===255?255:ln===0?0:Jt(0,255-(255-_n)*255/ln),Fn=Tn===255?255:cn===0?0:Jt(0,255-(255-Tn)*255/cn),jn=Nn===255?255:fn===0?0:Jt(0,255-(255-Nn)*255/fn)},darken:function(){Hn=_n<ln?_n:ln,Fn=Tn<cn?Tn:cn,jn=Nn<fn?Nn:fn},lighten:function(){Hn=_n>ln?_n:ln,Fn=Tn>cn?Tn:cn,jn=Nn>fn?Nn:fn},difference:function(){Hn=_n-ln,Hn<0&&(Hn=-Hn),Fn=Tn-cn,Fn<0&&(Fn=-Fn),jn=Nn-fn,jn<0&&(jn=-jn)},exclusion:function(){Hn=_n+ln*(255-_n-_n)/255,Fn=Tn+cn*(255-Tn-Tn)/255,jn=Nn+fn*(255-Nn-Nn)/255},hue:function(){zn(ln,cn,fn,Kn(_n,Tn,Nn)),Wn(Hn,Fn,jn,Jn(_n,Tn,Nn))},saturation:function(){zn(_n,Tn,Nn,Kn(ln,cn,fn)),Wn(Hn,Fn,jn,Jn(_n,Tn,Nn))},luminosity:function(){Wn(_n,Tn,Nn,Jn(ln,cn,fn))},color:function(){Wn(ln,cn,fn,Jn(_n,Tn,Nn))},add:function(){Hn=$t(_n+ln,255),Fn=$t(Tn+cn,255),jn=$t(Nn+fn,255)},subtract:function(){Hn=Jt(_n-ln,0),Fn=Jt(Tn-cn,0),jn=Jt(Nn-fn,0)},average:function(){Hn=(_n+ln)/2,Fn=(Tn+cn)/2,jn=(Nn+fn)/2},negation:function(){Hn=255-sn(255-ln-_n),Fn=255-sn(255-cn-Tn),jn=255-sn(255-fn-Nn)}},Dn=this.nativeModes=ct.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Zn){this[Zn]=!0},{}),qn=zr.getContext(1,1,{willReadFrequently:!0});qn&&(ct.each(Gn,function(Zn,nr){var Yn=nr==="darken",sr=!1;qn.save();try{qn.fillStyle=Yn?"#300":"#a00",qn.fillRect(0,0,1,1),qn.globalCompositeOperation=nr,qn.globalCompositeOperation===nr&&(qn.fillStyle=Yn?"#a00":"#300",qn.fillRect(0,0,1,1),sr=qn.getImageData(0,0,1,1).data[0]!==Yn?170:51)}catch{}qn.restore(),Dn[nr]=sr}),zr.release(qn)),this.process=function(Zn,nr,Yn,sr,ur){var dr=nr.canvas,gr=Zn==="normal";if(gr||Dn[Zn])Yn.save(),Yn.setTransform(1,0,0,1,0,0),Yn.globalAlpha=sr,gr||(Yn.globalCompositeOperation=Zn),Yn.drawImage(dr,ur.x,ur.y),Yn.restore();else{var lr=Gn[Zn];if(!lr)return;for(var mr=Yn.getImageData(ur.x,ur.y,dr.width,dr.height),yr=mr.data,br=nr.getImageData(0,0,dr.width,dr.height).data,Er=0,Pr=yr.length;Er<Pr;Er+=4){ln=br[Er],_n=yr[Er],cn=br[Er+1],Tn=yr[Er+1],fn=br[Er+2],Nn=yr[Er+2],wn=br[Er+3],Bn=yr[Er+3],lr();var Hr=wn*sr/255,Wr=1-Hr;yr[Er]=Hr*Hn+Wr*_n,yr[Er+1]=Hr*Fn+Wr*Tn,yr[Er+2]=Hr*jn+Wr*Nn,yr[Er+3]=wn*sr+Wr*Bn}Yn.putImageData(mr,ur.x,ur.y)}}},rs=new function(){var $t="http://www.w3.org/2000/svg",Jt="http://www.w3.org/2000/xmlns",sn="http://www.w3.org/1999/xlink",ln={href:sn,xlink:Jt,xmlns:Jt+"/","xmlns:xlink":Jt+"/"};function cn(_n,Tn,Nn){return wn(ut.createElementNS($t,_n),Tn,Nn)}function fn(_n,Tn){var Nn=ln[Tn],Bn=Nn?_n.getAttributeNS(Nn,Tn):_n.getAttribute(Tn);return Bn==="null"?null:Bn}function wn(_n,Tn,Nn){for(var Bn in Tn){var Hn=Tn[Bn],Fn=ln[Bn];typeof Hn=="number"&&Nn&&(Hn=Nn.number(Hn)),Fn?_n.setAttributeNS(Fn,Bn,Hn):_n.setAttribute(Bn,Hn)}return _n}return{svg:$t,xmlns:Jt,xlink:sn,create:cn,get:fn,set:wn}},fs=ct.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function($t,Jt){return!Jt&&($t instanceof yn||$t instanceof Sn||$t instanceof Qn)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function($t,Jt){var sn=ct.capitalize(Jt),ln=$t[2];this[Jt]={type:$t[1],property:Jt,attribute:$t[0],toSVG:ln,fromSVG:ln&&ct.each(ln,function(cn,fn){this[cn]=fn},{}),exportFilter:$t[3],get:"get"+sn,set:"set"+sn}},{});new function(){var $t;function Jt(Gn,Dn,qn){var Zn=new ct,nr=Gn.getTranslation();if(Dn){var Yn;Gn.isInvertible()?(Gn=Gn._shiftless(),Yn=Gn._inverseTransform(nr),nr=null):Yn=new Ft,Zn[qn?"cx":"x"]=Yn.x,Zn[qn?"cy":"y"]=Yn.y}if(!Gn.isIdentity()){var sr=Gn.decompose();if(sr){var ur=[],dr=sr.rotation,gr=sr.scaling,lr=sr.skewing;nr&&!nr.isZero()&&ur.push("translate("+$t.point(nr)+")"),dr&&ur.push("rotate("+$t.number(dr)+")"),(!Rt.isZero(gr.x-1)||!Rt.isZero(gr.y-1))&&ur.push("scale("+$t.point(gr)+")"),lr.x&&ur.push("skewX("+$t.number(lr.x)+")"),lr.y&&ur.push("skewY("+$t.number(lr.y)+")"),Zn.transform=ur.join(" ")}else Zn.transform="matrix("+Gn.getValues().join(",")+")"}return Zn}function sn(Gn,Dn){for(var qn=Jt(Gn._matrix),Zn=Gn._children,nr=rs.create("g",qn,$t),Yn=0,sr=Zn.length;Yn<sr;Yn++){var ur=Zn[Yn],dr=Kn(ur,Dn);if(dr)if(ur.isClipMask()){var gr=rs.create("clipPath");gr.appendChild(dr),Jn(ur,gr,"clip"),rs.set(nr,{"clip-path":"url(#"+gr.id+")"})}else nr.appendChild(dr)}return nr}function ln(Gn,Dn){var qn=Jt(Gn._matrix,!0),Zn=Gn.getSize(),nr=Gn.getImage();return qn.x-=Zn.width/2,qn.y-=Zn.height/2,qn.width=Zn.width,qn.height=Zn.height,qn.href=Dn.embedImages==!1&&nr&&nr.src||Gn.toDataURL(),rs.create("image",qn,$t)}function cn(Gn,Dn){var qn=Dn.matchShapes;if(qn){var Zn=Gn.toShape(!1);if(Zn)return fn(Zn)}var nr=Gn._segments,Yn=nr.length,sr,ur=Jt(Gn._matrix);if(qn&&Yn>=2&&!Gn.hasHandles())if(Yn>2){sr=Gn._closed?"polygon":"polyline";for(var dr=[],gr=0;gr<Yn;gr++)dr.push($t.point(nr[gr]._point));ur.points=dr.join(" ")}else{sr="line";var lr=nr[0]._point,mr=nr[1]._point;ur.set({x1:lr.x,y1:lr.y,x2:mr.x,y2:mr.y})}else sr="path",ur.d=Gn.getPathData(null,Dn.precision);return rs.create(sr,ur,$t)}function fn(Gn){var Dn=Gn._type,qn=Gn._radius,Zn=Jt(Gn._matrix,!0,Dn!=="rectangle");if(Dn==="rectangle"){Dn="rect";var nr=Gn._size,Yn=nr.width,sr=nr.height;Zn.x-=Yn/2,Zn.y-=sr/2,Zn.width=Yn,Zn.height=sr,qn.isZero()&&(qn=null)}return qn&&(Dn==="circle"?Zn.r=qn:(Zn.rx=qn.width,Zn.ry=qn.height)),rs.create(Dn,Zn,$t)}function wn(Gn,Dn){var qn=Jt(Gn._matrix),Zn=Gn.getPathData(null,Dn.precision);return Zn&&(qn.d=Zn),rs.create("path",qn,$t)}function _n(Gn,Dn){var qn=Jt(Gn._matrix,!0),Zn=Gn._definition,nr=jn(Zn,"symbol"),Yn=Zn._item,sr=Yn.getStrokeBounds();return nr||(nr=rs.create("symbol",{viewBox:$t.rectangle(sr)}),nr.appendChild(Kn(Yn,Dn)),Jn(Zn,nr,"symbol")),qn.href="#"+nr.id,qn.x+=sr.x,qn.y+=sr.y,qn.width=sr.width,qn.height=sr.height,qn.overflow="visible",rs.create("use",qn,$t)}function Tn(Gn){var Dn=jn(Gn,"color");if(!Dn){var qn=Gn.getGradient(),Zn=qn._radial,nr=Gn.getOrigin(),Yn=Gn.getDestination(),sr;if(Zn){sr={cx:nr.x,cy:nr.y,r:nr.getDistance(Yn)};var ur=Gn.getHighlight();ur&&(sr.fx=ur.x,sr.fy=ur.y)}else sr={x1:nr.x,y1:nr.y,x2:Yn.x,y2:Yn.y};sr.gradientUnits="userSpaceOnUse",Dn=rs.create((Zn?"radial":"linear")+"Gradient",sr,$t);for(var dr=qn._stops,gr=0,lr=dr.length;gr<lr;gr++){var mr=dr[gr],yr=mr._color,br=yr.getAlpha(),Er=mr._offset;sr={offset:Er??gr/(lr-1)},yr&&(sr["stop-color"]=yr.toCSS(!0)),br<1&&(sr["stop-opacity"]=br),Dn.appendChild(rs.create("stop",sr,$t))}Jn(Gn,Dn,"color")}return"url(#"+Dn.id+")"}function Nn(Gn){var Dn=rs.create("text",Jt(Gn._matrix,!0),$t);return Dn.textContent=Gn._content,Dn}var Bn={Group:sn,Layer:sn,Raster:ln,Path:cn,Shape:fn,CompoundPath:wn,SymbolItem:_n,PointText:Nn};function Hn(Gn,Dn,qn,Zn){var nr={},Yn=!Zn&&Gn.getParent(),sr=[];return Gn._name!=null&&(nr.id=Gn._name),ct.each(fs,function(ur){var dr=ur.get,gr=ur.type,lr=Gn[dr]();if(ur.exportFilter?ur.exportFilter(Gn,lr):qn.reduceAttributes==!1||!Yn||!ct.equals(Yn[dr](),lr)){if(gr==="color"&&lr!=null){var mr=lr.getAlpha();mr<1&&(nr[ur.attribute+"-opacity"]=mr)}gr==="style"?sr.push(ur.attribute+": "+lr):nr[ur.attribute]=lr==null?"none":gr==="color"?lr.gradient?Tn(lr):lr.toCSS(!0):gr==="array"?lr.join(","):gr==="lookup"?ur.toSVG[lr]:lr}}),sr.length&&(nr.style=sr.join(";")),nr.opacity===1&&delete nr.opacity,Gn._visible||(nr.visibility="hidden"),rs.set(Dn,nr,$t)}var Fn;function jn(Gn,Dn){return Fn||(Fn={ids:{},svgs:{}}),Gn&&Fn.svgs[Dn+"-"+(Gn._id||Gn.__id||(Gn.__id=jt.get("svg")))]}function Jn(Gn,Dn,qn){Fn||jn();var Zn=Fn.ids[qn]=(Fn.ids[qn]||0)+1;Dn.id=qn+"-"+Zn,Fn.svgs[qn+"-"+(Gn._id||Gn.__id)]=Dn}function Wn(Gn,Dn){var qn=Gn,Zn=null;if(Fn){qn=Gn.nodeName.toLowerCase()==="svg"&&Gn;for(var nr in Fn.svgs)Zn||(qn||(qn=rs.create("svg"),qn.appendChild(Gn)),Zn=qn.insertBefore(rs.create("defs"),qn.firstChild)),Zn.appendChild(Fn.svgs[nr]);Fn=null}return Dn.asString?new g.XMLSerializer().serializeToString(qn):qn}function Kn(Gn,Dn,qn){var Zn=Bn[Gn._class],nr=Zn&&Zn(Gn,Dn);if(nr){var Yn=Dn.onExport;Yn&&(nr=Yn(Gn,nr,Dn)||nr);var sr=JSON.stringify(Gn._data);sr&&sr!=="{}"&&sr!=="null"&&nr.setAttribute("data-paper-data",sr)}return nr&&Hn(Gn,nr,Dn,qn)}function zn(Gn){return Gn||(Gn={}),$t=new Tt(Gn.precision),Gn}an.inject({exportSVG:function(Gn){return Gn=zn(Gn),Wn(Kn(this,Gn,!0),Gn)}}),on.inject({exportSVG:function(Gn){Gn=zn(Gn);var Dn=this._children,qn=this.getView(),Zn=ct.pick(Gn.bounds,"view"),nr=Gn.matrix||Zn==="view"&&qn._matrix,Yn=nr&&en.read([nr]),sr=Zn==="view"?new zt([0,0],qn.getViewSize()):Zn==="content"?an._getBounds(Dn,Yn,{stroke:!0}).rect:zt.read([Zn],0,{readNull:!0}),ur={version:"1.1",xmlns:rs.svg,"xmlns:xlink":rs.xlink};sr&&(ur.width=sr.width,ur.height=sr.height,(sr.x||sr.x===0||sr.y||sr.y===0)&&(ur.viewBox=$t.rectangle(sr)));var dr=rs.create("svg",ur,$t),gr=dr;Yn&&!Yn.isIdentity()&&(gr=dr.appendChild(rs.create("g",Jt(Yn),$t)));for(var lr=0,mr=Dn.length;lr<mr;lr++)gr.appendChild(Kn(Dn[lr],Gn,!0));return Wn(dr,Gn)}})},new function(){var $t={},Jt;function sn(Dn,qn,Zn,nr,Yn,sr){var ur=rs.get(Dn,qn)||sr,dr=ur==null?nr?null:Zn?"":0:Zn?ur:parseFloat(ur);return/%\s*$/.test(ur)?dr/100*(Yn?1:Jt[/x|^width/.test(qn)?"width":"height"]):dr}function ln(Dn,qn,Zn,nr,Yn,sr,ur){return qn=sn(Dn,qn||"x",!1,nr,Yn,sr),Zn=sn(Dn,Zn||"y",!1,nr,Yn,ur),nr&&(qn==null||Zn==null)?null:new Ft(qn,Zn)}function cn(Dn,qn,Zn,nr,Yn){return qn=sn(Dn,qn||"width",!1,nr,Yn),Zn=sn(Dn,Zn||"height",!1,nr,Yn),nr&&(qn==null||Zn==null)?null:new Ht(qn,Zn)}function fn(Dn,qn,Zn){return Dn==="none"?null:qn==="number"?parseFloat(Dn):qn==="array"?Dn?Dn.split(/[\s,]+/g).map(parseFloat):[]:qn==="color"?Kn(Dn)||Dn:qn==="lookup"?Zn[Dn]:Dn}function wn(Dn,qn,Zn,nr){var Yn=Dn.childNodes,sr=qn==="clippath",ur=qn==="defs",dr=new un,gr=dr._project,lr=gr._currentStyle,mr=[];if(!sr&&!ur&&(dr=Wn(dr,Dn,nr),gr._currentStyle=dr._style.clone()),nr)for(var yr=Dn.querySelectorAll("defs"),br=0,Er=yr.length;br<Er;br++)zn(yr[br],Zn,!1);for(var br=0,Er=Yn.length;br<Er;br++){var Pr=Yn[br],Hr;Pr.nodeType===1&&!/^defs$/i.test(Pr.nodeName)&&(Hr=zn(Pr,Zn,!1))&&!(Hr instanceof En)&&mr.push(Hr)}return dr.addChildren(mr),sr&&(dr=Wn(dr.reduce(),Dn,nr)),gr._currentStyle=lr,(sr||ur)&&(dr.remove(),dr=null),dr}function _n(Dn,qn){for(var Zn=Dn.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),nr=[],Yn=0,sr=Zn.length;Yn<sr;Yn+=2)nr.push(new Ft(parseFloat(Zn[Yn]),parseFloat(Zn[Yn+1])));var ur=new vn(nr);return qn==="polygon"&&ur.closePath(),ur}function Tn(Dn){return yn.create(Dn.getAttribute("d"))}function Nn(Dn,qn){var Zn=(sn(Dn,"href",!0)||"").substring(1),nr=qn==="radialgradient",Yn;if(Zn)Yn=$t[Zn].getGradient(),Yn._radial^nr&&(Yn=Yn.clone(),Yn._radial=nr);else{for(var sr=Dn.childNodes,ur=[],dr=0,gr=sr.length;dr<gr;dr++){var lr=sr[dr];lr.nodeType===1&&ur.push(Wn(new hr,lr))}Yn=new rr(ur,nr)}var mr,yr,br,Er=sn(Dn,"gradientUnits",!0)!=="userSpaceOnUse";nr?(mr=ln(Dn,"cx","cy",!1,Er,"50%","50%"),yr=mr.add(sn(Dn,"r",!1,!1,Er,"50%"),0),br=ln(Dn,"fx","fy",!0,Er)):(mr=ln(Dn,"x1","y1",!1,Er,"0%","0%"),yr=ln(Dn,"x2","y2",!1,Er,"100%","0%"));var Pr=Wn(new ar(Yn,mr,yr,br),Dn);return Pr._scaleToBounds=Er,null}var Bn={"#document":function(Dn,qn,Zn,nr){for(var Yn=Dn.childNodes,sr=0,ur=Yn.length;sr<ur;sr++){var dr=Yn[sr];if(dr.nodeType===1)return zn(dr,Zn,nr)}},g:wn,svg:wn,clippath:wn,polygon:_n,polyline:_n,path:Tn,lineargradient:Nn,radialgradient:Nn,image:function(Dn){var qn=new mn(sn(Dn,"href",!0));return qn.on("load",function(){var Zn=cn(Dn);this.setSize(Zn);var nr=ln(Dn).add(Zn.divide(2));this._matrix.append(new en().translate(nr))}),qn},symbol:function(Dn,qn,Zn,nr){return new En(wn(Dn,qn,Zn,nr),!0)},defs:wn,use:function(Dn){var qn=(sn(Dn,"href",!0)||"").substring(1),Zn=$t[qn],nr=ln(Dn);return Zn?Zn instanceof En?Zn.place(nr):Zn.clone().translate(nr):null},circle:function(Dn){return new Sn.Circle(ln(Dn,"cx","cy"),sn(Dn,"r"))},ellipse:function(Dn){return new Sn.Ellipse({center:ln(Dn,"cx","cy"),radius:cn(Dn,"rx","ry")})},rect:function(Dn){return new Sn.Rectangle(new zt(ln(Dn),cn(Dn)),cn(Dn,"rx","ry"))},line:function(Dn){return new vn.Line(ln(Dn,"x1","y1"),ln(Dn,"x2","y2"))},text:function(Dn){var qn=new ir(ln(Dn).add(ln(Dn,"dx","dy")));return qn.setContent(Dn.textContent.trim()||""),qn},switch:wn};function Hn(Dn,qn,Zn,nr){if(Dn.transform){for(var Yn=(nr.getAttribute(Zn)||"").split(/\)\s*/g),sr=new en,ur=0,dr=Yn.length;ur<dr;ur++){var gr=Yn[ur];if(!gr)break;for(var lr=gr.split(/\(\s*/),mr=lr[0].trim(),yr=lr[1].split(/[\s,]+/g),br=0,Er=yr.length;br<Er;br++)yr[br]=parseFloat(yr[br]);switch(mr){case"matrix":sr.append(new en(yr[0],yr[1],yr[2],yr[3],yr[4],yr[5]));break;case"rotate":sr.rotate(yr[0],yr[1]||0,yr[2]||0);break;case"translate":sr.translate(yr[0],yr[1]||0);break;case"scale":sr.scale(yr);break;case"skewX":sr.skew(yr[0],0);break;case"skewY":sr.skew(0,yr[0]);break}}Dn.transform(sr)}}function Fn(Dn,qn,Zn){var nr=Zn==="fill-opacity"?"getFillColor":"getStrokeColor",Yn=Dn[nr]&&Dn[nr]();Yn&&Yn.setAlpha(parseFloat(qn))}var jn=ct.set(ct.each(fs,function(Dn){this[Dn.attribute]=function(qn,Zn){if(qn[Dn.set]&&(qn[Dn.set](fn(Zn,Dn.type,Dn.fromSVG)),Dn.type==="color")){var nr=qn[Dn.get]();if(nr&&nr._scaleToBounds){var Yn=qn.getBounds();nr.transform(new en().translate(Yn.getPoint()).scale(Yn.getSize()))}}}},{}),{id:function(Dn,qn){$t[qn]=Dn,Dn.setName&&Dn.setName(qn)},"clip-path":function(Dn,qn){var Zn=Kn(qn);if(Zn)if(Zn=Zn.clone(),Zn.setClipMask(!0),Dn instanceof un)Dn.insertChild(0,Zn);else return new un(Zn,Dn)},gradientTransform:Hn,transform:Hn,"fill-opacity":Fn,"stroke-opacity":Fn,visibility:function(Dn,qn){Dn.setVisible&&Dn.setVisible(qn==="visible")},display:function(Dn,qn){Dn.setVisible&&Dn.setVisible(qn!==null)},"stop-color":function(Dn,qn){Dn.setColor&&Dn.setColor(qn)},"stop-opacity":function(Dn,qn){Dn._color&&Dn._color.setAlpha(parseFloat(qn))},offset:function(Dn,qn){if(Dn.setOffset){var Zn=qn.match(/(.*)%$/);Dn.setOffset(Zn?Zn[1]/100:parseFloat(qn))}},viewBox:function(Dn,qn,Zn,nr,Yn){var sr=new zt(fn(qn,"array")),ur=cn(nr,null,null,!0),dr,gr;if(Dn instanceof un){var lr=ur?ur.divide(sr.getSize()):1,gr=new en().scale(lr).translate(sr.getPoint().negate());dr=Dn}else Dn instanceof En&&(ur&&sr.setSize(ur),dr=Dn._item);if(dr){if(Jn(nr,"overflow",Yn)!=="visible"){var mr=new Sn.Rectangle(sr);mr.setClipMask(!0),dr.addChild(mr)}gr&&dr.transform(gr)}}});function Jn(Dn,qn,Zn){var nr=Dn.attributes[qn],Yn=nr&&nr.value;if(!Yn&&Dn.style){var sr=ct.camelize(qn);Yn=Dn.style[sr],!Yn&&Zn.node[sr]!==Zn.parent[sr]&&(Yn=Zn.node[sr])}return Yn?Yn==="none"?null:Yn:et}function Wn(Dn,qn,Zn){var nr=qn.parentNode,Yn={node:xr.getStyles(qn)||{},parent:!Zn&&!/^defs$/i.test(nr.tagName)&&xr.getStyles(nr)||{}};return ct.each(jn,function(sr,ur){var dr=Jn(qn,ur,Yn);Dn=dr!==et&&sr(Dn,dr,ur,qn,Yn)||Dn}),Dn}function Kn(Dn){var qn=Dn&&Dn.match(/\((?:["'#]*)([^"')]+)/),Zn=qn&&qn[1],nr=Zn&&$t[ot?Zn.replace(ot.location.href.split("#")[0]+"#",""):Zn];return nr&&nr._scaleToBounds&&(nr=nr.clone(),nr._scaleToBounds=!0),nr}function zn(Dn,qn,Zn){var nr=Dn.nodeName.toLowerCase(),Yn=nr!=="#document",sr=ut.body,ur,dr,gr;Zn&&Yn&&(Jt=Kr.getView().getSize(),Jt=cn(Dn,null,null,!0)||Jt,ur=rs.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),dr=Dn.parentNode,gr=Dn.nextSibling,ur.appendChild(Dn),sr.appendChild(ur));var lr=Kr.settings,mr=lr.applyMatrix,yr=lr.insertItems;lr.applyMatrix=!1,lr.insertItems=!1;var br=Bn[nr],Er=br&&br(Dn,nr,qn,Zn)||null;if(lr.insertItems=yr,lr.applyMatrix=mr,Er){Yn&&!(Er instanceof un)&&(Er=Wn(Er,Dn,Zn));var Pr=qn.onImport,Hr=Yn&&Dn.getAttribute("data-paper-data");Pr&&(Er=Pr(Dn,Er,qn)||Er),qn.expandShapes&&Er instanceof Sn&&(Er.remove(),Er=Er.toPath()),Hr&&(Er._data=JSON.parse(Hr))}return ur&&(sr.removeChild(ur),dr&&(gr?dr.insertBefore(Dn,gr):dr.appendChild(Dn))),Zn&&($t={},Er&&ct.pick(qn.applyMatrix,mr)&&Er.matrix.apply(!0,!0)),Er}function Gn(Dn,qn,Zn){if(!Dn)return null;qn=typeof qn=="function"?{onLoad:qn}:qn||{};var nr=Kr,Yn=null;function sr(lr){try{var mr=typeof lr=="object"?lr:new g.DOMParser().parseFromString(lr.trim(),"image/svg+xml");if(!mr.nodeName)throw mr=null,new Error("Unsupported SVG source: "+Dn);Kr=nr,Yn=zn(mr,qn,!0),(!qn||qn.insert!==!1)&&Zn._insertItem(et,Yn);var yr=qn.onLoad;yr&&yr(Yn,lr)}catch(br){ur(br)}}function ur(lr,mr){var yr=qn.onError;if(yr)yr(lr,mr);else throw new Error(lr)}if(typeof Dn=="string"&&!/^[\s\S]*</.test(Dn)){var dr=ut.getElementById(Dn);dr?sr(dr):Gr.request({url:Dn,async:!0,onLoad:sr,onError:ur})}else if(typeof File<"u"&&Dn instanceof File){var gr=new FileReader;return gr.onload=function(){sr(gr.result)},gr.onerror=function(){ur(gr.error)},gr.readAsText(Dn)}else sr(Dn);return Yn}an.inject({importSVG:function(Dn,qn){return Gn(Dn,qn,this)}}),on.inject({importSVG:function(Dn,qn){return this.activate(),Gn(Dn,qn,this)}})},ct.exports.PaperScript=(function(){var $t=this,Jt=$t.acorn;if(!Jt&&typeof commonjsRequire<"u")try{Jt=requireAcorn()}catch{}if(!Jt){var sn,ln;Jt=sn=ln={},function(Wn,Kn){if(typeof sn=="object"&&typeof ln=="object")return Kn(sn);if(typeof et=="function"&&et.amd)return et(["exports"],Kn);Kn(Wn.acorn||(Wn.acorn={}))}(this,function(Wn){Wn.version="0.5.0";var Kn,zn,Gn,Dn;Wn.parse=function(pr,vr){return zn=String(pr),Gn=zn.length,Zn(vr),o_(),sp(Kn.program)};var qn=Wn.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Zn(pr){Kn=pr||{};for(var vr in qn)Object.prototype.hasOwnProperty.call(Kn,vr)||(Kn[vr]=qn[vr]);Dn=Kn.sourceFile||null}var nr=Wn.getLineInfo=function(pr,vr){for(var Tr=1,Or=0;;){fu.lastIndex=Or;var us=fu.exec(pr);if(us&&us.index<vr)++Tr,Or=us.index+us[0].length;else break}return{line:Tr,column:vr-Or}};Wn.tokenize=function(pr,vr){zn=String(pr),Gn=zn.length,Zn(vr),o_();var Tr={};function Or(us){return Hr=ur,Kp(us),Tr.start=sr,Tr.end=ur,Tr.startLoc=dr,Tr.endLoc=gr,Tr.type=lr,Tr.value=mr,Tr}return Or.jumpTo=function(us,xs){if(Yn=us,Kn.locations){br=1,Er=fu.lastIndex=0;for(var bs;(bs=fu.exec(zn))&&bs.index<us;)++br,Er=bs.index+bs[0].length}yr=xs,Go()},Or};var Yn,sr,ur,dr,gr,lr,mr,yr,br,Er,Pr,Hr,Wr,Xr,es,Dr;function $r(pr,vr){var Tr=nr(zn,pr);vr+=" ("+Tr.line+":"+Tr.column+")";var Or=new SyntaxError(vr);throw Or.pos=pr,Or.loc=Tr,Or.raisedAt=Yn,Or}var Qr=[],ss={type:"num"},ns={type:"regexp"},ys={type:"string"},gs={type:"name"},_s={type:"eof"},Ss={keyword:"break"},vs={keyword:"case",beforeExpr:!0},ga={keyword:"catch"},uo={keyword:"continue"},Lo={keyword:"debugger"},Yr={keyword:"default"},Ds={keyword:"do",isLoop:!0},js={keyword:"else",beforeExpr:!0},Os={keyword:"finally"},ks={keyword:"for",isLoop:!0},vo={keyword:"function"},xa={keyword:"if"},Ys={keyword:"return",beforeExpr:!0},Po={keyword:"switch"},ko={keyword:"throw",beforeExpr:!0},Ws={keyword:"try"},Ao={keyword:"var"},ba={keyword:"while",isLoop:!0},Am={keyword:"with"},Wp={keyword:"new",beforeExpr:!0},Dy={keyword:"this"},zl={keyword:"null",atomValue:null},Dv={keyword:"true",atomValue:!0},jv={keyword:"false",atomValue:!1},wp={keyword:"in",binop:7,beforeExpr:!0},Cp={break:Ss,case:vs,catch:ga,continue:uo,debugger:Lo,default:Yr,do:Ds,else:js,finally:Os,for:ks,function:vo,if:xa,return:Ys,switch:Po,throw:ko,try:Ws,var:Ao,while:ba,with:Am,null:zl,true:Dv,false:jv,new:Wp,in:wp,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Dy,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ep={type:"[",beforeExpr:!0},Mu={type:"]"},Hl={type:"{",beforeExpr:!0},Ps={type:"}"},cu={type:"(",beforeExpr:!0},Qo={type:")"},tu={type:",",beforeExpr:!0},Pl={type:";",beforeExpr:!0},hu={type:":",beforeExpr:!0},jy={type:"."},Tm={type:"?",beforeExpr:!0},rn={binop:10,beforeExpr:!0},pn={isAssign:!0,beforeExpr:!0},$n={isAssign:!0,beforeExpr:!0},er={postfix:!0,prefix:!0,isUpdate:!0},cr={prefix:!0,beforeExpr:!0},kr={binop:1,beforeExpr:!0},Ar={binop:2,beforeExpr:!0},qr={binop:3,beforeExpr:!0},Zr={binop:4,beforeExpr:!0},As={binop:5,beforeExpr:!0},ws={binop:6,beforeExpr:!0},co={binop:7,beforeExpr:!0},Bo={binop:8,beforeExpr:!0},Pm={binop:9,prefix:!0,beforeExpr:!0},qp={binop:10,beforeExpr:!0};Wn.tokTypes={bracketL:ep,bracketR:Mu,braceL:Hl,braceR:Ps,parenL:cu,parenR:Qo,comma:tu,semi:Pl,colon:hu,dot:jy,question:Tm,slash:rn,eq:pn,name:gs,eof:_s,num:ss,regexp:ns,string:ys};for(var Uo in Cp)Wn.tokTypes["_"+Uo]=Cp[Uo];function Ro(pr){pr=pr.split(" ");var vr="",Tr=[];e:for(var Or=0;Or<pr.length;++Or){for(var us=0;us<Tr.length;++us)if(Tr[us][0].length==pr[Or].length){Tr[us].push(pr[Or]);continue e}Tr.push([pr[Or]])}function xs(Vs){if(Vs.length==1)return vr+="return str === "+JSON.stringify(Vs[0])+";";vr+="switch(str){";for(var ju=0;ju<Vs.length;++ju)vr+="case "+JSON.stringify(Vs[ju])+":";vr+="return true}return false;"}if(Tr.length>3){Tr.sort(function(Vs,ju){return ju.length-Vs.length}),vr+="switch(str.length){";for(var Or=0;Or<Tr.length;++Or){var bs=Tr[Or];vr+="case "+bs[0].length+":",xs(bs)}vr+="}"}else xs(pr);return new Function("str",vr)}var Iu=Ro("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),s_=Ro("class enum extends super const export import"),a_=Ro("implements interface let package private protected public static yield"),Fv=Ro("eval arguments"),tp=Ro("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),C0=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Rm="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",$v="------------------------------------------------------------------------------------------------------------------------------------------",Fy=new RegExp("["+Rm+"]"),du=new RegExp("["+Rm+$v+"]"),Rl=/[\n\r\u2028\u2029]/,fu=/\r\n|[\n\r\u2028\u2029]/g,pu=Wn.isIdentifierStart=function(pr){return pr<65?pr===36:pr<91?!0:pr<97?pr===95:pr<123?!0:pr>=170&&Fy.test(String.fromCharCode(pr))},np=Wn.isIdentifierChar=function(pr){return pr<48?pr===36:pr<58?!0:pr<65?!1:pr<91?!0:pr<97?pr===95:pr<123?!0:pr>=170&&du.test(String.fromCharCode(pr))};function nu(){this.line=br,this.column=Yn-Er}function o_(){br=1,Yn=Er=0,yr=!0,Go()}function No(pr,vr){ur=Yn,Kn.locations&&(gr=new nu),lr=pr,Go(),mr=vr,yr=pr.beforeExpr}function l_(){var pr=Kn.onComment&&Kn.locations&&new nu,vr=Yn,Tr=zn.indexOf("*/",Yn+=2);if(Tr===-1&&$r(Yn-2,"Unterminated comment"),Yn=Tr+2,Kn.locations){fu.lastIndex=vr;for(var Or;(Or=fu.exec(zn))&&Or.index<Yn;)++br,Er=Or.index+Or[0].length}Kn.onComment&&Kn.onComment(!0,zn.slice(vr+2,Tr),vr,Yn,pr,Kn.locations&&new nu)}function Ml(){for(var pr=Yn,vr=Kn.onComment&&Kn.locations&&new nu,Tr=zn.charCodeAt(Yn+=2);Yn<Gn&&Tr!==10&&Tr!==13&&Tr!==8232&&Tr!==8233;)++Yn,Tr=zn.charCodeAt(Yn);Kn.onComment&&Kn.onComment(!1,zn.slice(pr+2,Yn),pr,Yn,vr,Kn.locations&&new nu)}function Go(){for(;Yn<Gn;){var pr=zn.charCodeAt(Yn);if(pr===32)++Yn;else if(pr===13){++Yn;var vr=zn.charCodeAt(Yn);vr===10&&++Yn,Kn.locations&&(++br,Er=Yn)}else if(pr===10||pr===8232||pr===8233)++Yn,Kn.locations&&(++br,Er=Yn);else if(pr>8&&pr<14)++Yn;else if(pr===47){var vr=zn.charCodeAt(Yn+1);if(vr===42)l_();else if(vr===47)Ml();else break}else if(pr===160)++Yn;else if(pr>=5760&&C0.test(String.fromCharCode(pr)))++Yn;else break}}function ho(){var pr=zn.charCodeAt(Yn+1);return pr>=48&&pr<=57?kw(!0):(++Yn,No(jy))}function $y(){var pr=zn.charCodeAt(Yn+1);return yr?(++Yn,Vv()):pr===61?mo($n,2):mo(rn,1)}function Ou(){var pr=zn.charCodeAt(Yn+1);return pr===61?mo($n,2):mo(qp,1)}function Sw(pr){var vr=zn.charCodeAt(Yn+1);return vr===pr?mo(pr===124?kr:Ar,2):vr===61?mo($n,2):mo(pr===124?qr:As,1)}function ww(){var pr=zn.charCodeAt(Yn+1);return pr===61?mo($n,2):mo(Zr,1)}function u_(pr){var vr=zn.charCodeAt(Yn+1);return vr===pr?vr==45&&zn.charCodeAt(Yn+2)==62&&Rl.test(zn.slice(Hr,Yn))?(Yn+=3,Ml(),Go(),Kp()):mo(er,2):vr===61?mo($n,2):mo(Pm,1)}function c_(pr){var vr=zn.charCodeAt(Yn+1),Tr=1;return vr===pr?(Tr=pr===62&&zn.charCodeAt(Yn+2)===62?3:2,zn.charCodeAt(Yn+Tr)===61?mo($n,Tr+1):mo(Bo,Tr)):vr==33&&pr==60&&zn.charCodeAt(Yn+2)==45&&zn.charCodeAt(Yn+3)==45?(Yn+=4,Ml(),Go(),Kp()):(vr===61&&(Tr=zn.charCodeAt(Yn+2)===61?3:2),mo(co,Tr))}function Cw(pr){var vr=zn.charCodeAt(Yn+1);return vr===61?mo(ws,zn.charCodeAt(Yn+2)===61?3:2):mo(pr===61?pn:cr,1)}function Bv(pr){switch(pr){case 46:return ho();case 40:return++Yn,No(cu);case 41:return++Yn,No(Qo);case 59:return++Yn,No(Pl);case 44:return++Yn,No(tu);case 91:return++Yn,No(ep);case 93:return++Yn,No(Mu);case 123:return++Yn,No(Hl);case 125:return++Yn,No(Ps);case 58:return++Yn,No(hu);case 63:return++Yn,No(Tm);case 48:var vr=zn.charCodeAt(Yn+1);if(vr===120||vr===88)return zv();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return kw(!1);case 34:case 39:return Vy(pr);case 47:return $y();case 37:case 42:return Ou();case 124:case 38:return Sw(pr);case 94:return ww();case 43:case 45:return u_(pr);case 60:case 62:return c_(pr);case 61:case 33:return Cw(pr);case 126:return mo(cr,1)}return!1}function Kp(pr){if(pr?Yn=sr+1:sr=Yn,Kn.locations&&(dr=new nu),pr)return Vv();if(Yn>=Gn)return No(_s);var vr=zn.charCodeAt(Yn);if(pu(vr)||vr===92)return Im();var Tr=Bv(vr);if(Tr===!1){var Or=String.fromCharCode(vr);if(Or==="\\"||Fy.test(Or))return Im();$r(Yn,"Unexpected character '"+Or+"'")}return Tr}function mo(pr,vr){var Tr=zn.slice(Yn,Yn+vr);Yn+=vr,No(pr,Tr)}function Vv(){for(var us="",pr,vr,Tr=Yn;;){Yn>=Gn&&$r(Tr,"Unterminated regular expression");var Or=zn.charAt(Yn);if(Rl.test(Or)&&$r(Tr,"Unterminated regular expression"),pr)pr=!1;else{if(Or==="[")vr=!0;else if(Or==="]"&&vr)vr=!1;else if(Or==="/"&&!vr)break;pr=Or==="\\"}++Yn}var us=zn.slice(Tr,Yn);++Yn;var xs=h_();xs&&!/^[gmsiy]*$/.test(xs)&&$r(Tr,"Invalid regexp flag");try{var bs=new RegExp(us,xs)}catch(Vs){Vs instanceof SyntaxError&&$r(Tr,Vs.message),$r(Vs)}return No(ns,bs)}function By(pr,vr){for(var Tr=Yn,Or=0,us=0,xs=vr??1/0;us<xs;++us){var bs=zn.charCodeAt(Yn),Vs;if(bs>=97?Vs=bs-97+10:bs>=65?Vs=bs-65+10:bs>=48&&bs<=57?Vs=bs-48:Vs=1/0,Vs>=pr)break;++Yn,Or=Or*pr+Vs}return Yn===Tr||vr!=null&&Yn-Tr!==vr?null:Or}function zv(){Yn+=2;var pr=By(16);return pr==null&&$r(sr+2,"Expected hexadecimal number"),pu(zn.charCodeAt(Yn))&&$r(Yn,"Identifier directly after number"),No(ss,pr)}function kw(pr){var vr=Yn,Tr=!1,Or=zn.charCodeAt(Yn)===48;!pr&&By(10)===null&&$r(vr,"Invalid number"),zn.charCodeAt(Yn)===46&&(++Yn,By(10),Tr=!0);var us=zn.charCodeAt(Yn);(us===69||us===101)&&(us=zn.charCodeAt(++Yn),(us===43||us===45)&&++Yn,By(10)===null&&$r(vr,"Invalid number"),Tr=!0),pu(zn.charCodeAt(Yn))&&$r(Yn,"Identifier directly after number");var xs=zn.slice(vr,Yn),bs;return Tr?bs=parseFloat(xs):!Or||xs.length===1?bs=parseInt(xs,10):/[89]/.test(xs)||Dr?$r(vr,"Invalid number"):bs=parseInt(xs,8),No(ss,bs)}function Vy(pr){Yn++;for(var vr="";;){Yn>=Gn&&$r(sr,"Unterminated string constant");var Tr=zn.charCodeAt(Yn);if(Tr===pr)return++Yn,No(ys,vr);if(Tr===92){Tr=zn.charCodeAt(++Yn);var Or=/^[0-7]+/.exec(zn.slice(Yn,Yn+3));for(Or&&(Or=Or[0]);Or&&parseInt(Or,8)>255;)Or=Or.slice(0,-1);if(Or==="0"&&(Or=null),++Yn,Or)Dr&&$r(Yn-2,"Octal literal in strict mode"),vr+=String.fromCharCode(parseInt(Or,8)),Yn+=Or.length-1;else switch(Tr){case 110:vr+=`
`;break;case 114:vr+="\r";break;case 120:vr+=String.fromCharCode(Nm(2));break;case 117:vr+=String.fromCharCode(Nm(4));break;case 85:vr+=String.fromCharCode(Nm(8));break;case 116:vr+="	";break;case 98:vr+="\b";break;case 118:vr+="\v";break;case 102:vr+="\f";break;case 48:vr+="\0";break;case 13:zn.charCodeAt(Yn)===10&&++Yn;case 10:Kn.locations&&(Er=Yn,++br);break;default:vr+=String.fromCharCode(Tr);break}}else(Tr===13||Tr===10||Tr===8232||Tr===8233)&&$r(sr,"Unterminated string constant"),vr+=String.fromCharCode(Tr),++Yn}}function Nm(pr){var vr=By(16,pr);return vr===null&&$r(sr,"Bad character escape sequence"),vr}var Mm;function h_(){Mm=!1;for(var pr,vr=!0,Tr=Yn;;){var Or=zn.charCodeAt(Yn);if(np(Or))Mm&&(pr+=zn.charAt(Yn)),++Yn;else if(Or===92){Mm||(pr=zn.slice(Tr,Yn)),Mm=!0,zn.charCodeAt(++Yn)!=117&&$r(Yn,"Expecting Unicode escape sequence \\uXXXX"),++Yn;var us=Nm(4),xs=String.fromCharCode(us);xs||$r(Yn-1,"Invalid Unicode escape"),(vr?pu(us):np(us))||$r(Yn-4,"Invalid Unicode escape"),pr+=xs}else break;vr=!1}return Mm?pr:zn.slice(Tr,Yn)}function Im(){var pr=h_(),vr=gs;return!Mm&&tp(pr)&&(vr=Cp[pr]),No(vr,pr)}function zs(){Pr=sr,Hr=ur,Wr=gr,Kp()}function k0(pr){if(Dr=pr,Yn=sr,Kn.locations)for(;Yn<Er;)Er=zn.lastIndexOf(`
`,Er-2)+1,--br;Go(),Kp()}function zy(){this.type=null,this.start=sr,this.end=null}function Om(){this.start=dr,this.end=null,Dn!==null&&(this.source=Dn)}function Do(){var pr=new zy;return Kn.locations&&(pr.loc=new Om),Kn.directSourceFile&&(pr.sourceFile=Kn.directSourceFile),Kn.ranges&&(pr.range=[sr,0]),pr}function rp(pr){var vr=new zy;return vr.start=pr.start,Kn.locations&&(vr.loc=new Om,vr.loc.start=pr.loc.start),Kn.ranges&&(vr.range=[pr.range[0],0]),vr}function Rs(pr,vr){return pr.type=vr,pr.end=Hr,Kn.locations&&(pr.loc.end=Wr),Kn.ranges&&(pr.range[1]=Hr),pr}function Hy(pr){return Kn.ecmaVersion>=5&&pr.type==="ExpressionStatement"&&pr.expression.type==="Literal"&&pr.expression.value==="use strict"}function $a(pr){if(lr===pr)return zs(),!0}function kp(){return!Kn.strictSemicolons&&(lr===_s||lr===Ps||Rl.test(zn.slice(Hr,sr)))}function Vo(){!$a(Pl)&&!kp()&&Lu()}function Xs(pr){lr===pr?zs():Lu()}function Lu(){$r(sr,"Unexpected token")}function Uy(pr){pr.type!=="Identifier"&&pr.type!=="MemberExpression"&&$r(pr.start,"Assigning to rvalue"),Dr&&pr.type==="Identifier"&&Fv(pr.name)&&$r(pr.start,"Assigning to "+pr.name+" in strict mode")}function sp(pr){Pr=Hr=Yn,Kn.locations&&(Wr=new nu),Xr=Dr=null,es=[],Kp();var vr=pr||Do(),Tr=!0;for(pr||(vr.body=[]);lr!==_s;){var Or=mu();vr.body.push(Or),Tr&&Hy(Or)&&k0(!0),Tr=!1}return Rs(vr,"Program")}var ap={kind:"loop"},d_={kind:"switch"};function mu(){(lr===rn||lr===$n&&mr=="/=")&&Kp(!0);var pr=lr,vr=Do();switch(pr){case Ss:case uo:zs();var Tr=pr===Ss;$a(Pl)||kp()?vr.label=null:lr!==gs?Lu():(vr.label=Du(),Vo());for(var Or=0;Or<es.length;++Or){var us=es[Or];if((vr.label==null||us.name===vr.label.name)&&(us.kind!=null&&(Tr||us.kind==="loop")||vr.label&&Tr))break}return Or===es.length&&$r(vr.start,"Unsyntactic "+pr.keyword),Rs(vr,Tr?"BreakStatement":"ContinueStatement");case Lo:return zs(),Vo(),Rs(vr,"DebuggerStatement");case Ds:return zs(),es.push(ap),vr.body=mu(),es.pop(),Xs(ba),vr.test=ru(),Vo(),Rs(vr,"DoWhileStatement");case ks:if(zs(),es.push(ap),Xs(cu),lr===Pl)return A0(vr,null);if(lr===Ao){var xs=Do();return zs(),Gy(xs,!0),Rs(xs,"VariableDeclaration"),xs.declarations.length===1&&$a(wp)?f_(vr,xs):A0(vr,xs)}var xs=Wo(!1,!0);return $a(wp)?(Uy(xs),f_(vr,xs)):A0(vr,xs);case vo:return zs(),Ky(vr,!0);case xa:return zs(),vr.test=ru(),vr.consequent=mu(),vr.alternate=$a(js)?mu():null,Rs(vr,"IfStatement");case Ys:return!Xr&&!Kn.allowReturnOutsideFunction&&$r(sr,"'return' outside of function"),zs(),$a(Pl)||kp()?vr.argument=null:(vr.argument=Wo(),Vo()),Rs(vr,"ReturnStatement");case Po:zs(),vr.discriminant=ru(),vr.cases=[],Xs(Hl),es.push(d_);for(var bs,Vs;lr!=Ps;)if(lr===vs||lr===Yr){var ju=lr===vs;bs&&Rs(bs,"SwitchCase"),vr.cases.push(bs=Do()),bs.consequent=[],zs(),ju?bs.test=Wo():(Vs&&$r(Pr,"Multiple default clauses"),Vs=!0,bs.test=null),Xs(hu)}else bs||Lu(),bs.consequent.push(mu());return bs&&Rs(bs,"SwitchCase"),zs(),es.pop(),Rs(vr,"SwitchStatement");case ko:return zs(),Rl.test(zn.slice(Hr,sr))&&$r(Hr,"Illegal newline after throw"),vr.argument=Wo(),Vo(),Rs(vr,"ThrowStatement");case Ws:if(zs(),vr.block=gu(),vr.handler=null,lr===ga){var xo=Do();zs(),Xs(cu),xo.param=Du(),Dr&&Fv(xo.param.name)&&$r(xo.param.start,"Binding "+xo.param.name+" in strict mode"),Xs(Qo),xo.guard=null,xo.body=gu(),vr.handler=Rs(xo,"CatchClause")}return vr.guardedHandlers=Qr,vr.finalizer=$a(Os)?gu():null,!vr.handler&&!vr.finalizer&&$r(vr.start,"Missing catch or finally clause"),Rs(vr,"TryStatement");case Ao:return zs(),Gy(vr),Vo(),Rs(vr,"VariableDeclaration");case ba:return zs(),vr.test=ru(),es.push(ap),vr.body=mu(),es.pop(),Rs(vr,"WhileStatement");case Am:return Dr&&$r(sr,"'with' in strict mode"),zs(),vr.object=ru(),vr.body=mu(),Rs(vr,"WithStatement");case Hl:return gu();case Pl:return zs(),Rs(vr,"EmptyStatement");default:var Xy=mr,T0=Wo();if(pr===gs&&T0.type==="Identifier"&&$a(hu)){for(var Or=0;Or<es.length;++Or)es[Or].name===Xy&&$r(T0.start,"Label '"+Xy+"' is already declared");var g_=lr.isLoop?"loop":lr===Po?"switch":null;return es.push({name:Xy,kind:g_}),vr.body=mu(),es.pop(),vr.label=T0,Rs(vr,"LabeledStatement")}else return vr.expression=T0,Vo(),Rs(vr,"ExpressionStatement")}}function ru(){Xs(cu);var pr=Wo();return Xs(Qo),pr}function gu(pr){var vr=Do(),Tr=!0,Or=!1,us;for(vr.body=[],Xs(Hl);!$a(Ps);){var xs=mu();vr.body.push(xs),Tr&&pr&&Hy(xs)&&(us=Or,k0(Or=!0)),Tr=!1}return Or&&!us&&k0(!1),Rs(vr,"BlockStatement")}function A0(pr,vr){return pr.init=vr,Xs(Pl),pr.test=lr===Pl?null:Wo(),Xs(Pl),pr.update=lr===Qo?null:Wo(),Xs(Qo),pr.body=mu(),es.pop(),Rs(pr,"ForStatement")}function f_(pr,vr){return pr.left=vr,pr.right=Wo(),Xs(Qo),pr.body=mu(),es.pop(),Rs(pr,"ForInStatement")}function Gy(pr,vr){for(pr.declarations=[],pr.kind="var";;){var Tr=Do();if(Tr.id=Du(),Dr&&Fv(Tr.id.name)&&$r(Tr.id.start,"Binding "+Tr.id.name+" in strict mode"),Tr.init=$a(pn)?Wo(!0,vr):null,pr.declarations.push(Rs(Tr,"VariableDeclarator")),!$a(tu))break}return pr}function Wo(pr,vr){var Tr=Lm(vr);if(!pr&&lr===tu){var Or=rp(Tr);for(Or.expressions=[Tr];$a(tu);)Or.expressions.push(Lm(vr));return Rs(Or,"SequenceExpression")}return Tr}function Lm(pr){var vr=yu(pr);if(lr.isAssign){var Tr=rp(vr);return Tr.operator=mr,Tr.left=vr,zs(),Tr.right=Lm(pr),Uy(vr),Rs(Tr,"AssignmentExpression")}return vr}function yu(pr){var vr=Wy(pr);if($a(Tm)){var Tr=rp(vr);return Tr.test=vr,Tr.consequent=Wo(!0),Xs(hu),Tr.alternate=Wo(!0,pr),Rs(Tr,"ConditionalExpression")}return vr}function Wy(pr){return Yp(vu(),-1,pr)}function Yp(pr,vr,Tr){var Or=lr.binop;if(Or!=null&&(!Tr||lr!==wp)&&Or>vr){var us=rp(pr);us.left=pr,us.operator=mr;var xs=lr;zs(),us.right=Yp(vu(),Or,Tr);var bs=Rs(us,xs===kr||xs===Ar?"LogicalExpression":"BinaryExpression");return Yp(bs,vr,Tr)}return pr}function vu(){if(lr.prefix){var pr=Do(),vr=lr.isUpdate;return pr.operator=mr,pr.prefix=!0,yr=!0,zs(),pr.argument=vu(),vr?Uy(pr.argument):Dr&&pr.operator==="delete"&&pr.argument.type==="Identifier"&&$r(pr.start,"Deleting local variable in strict mode"),Rs(pr,vr?"UpdateExpression":"UnaryExpression")}for(var Tr=p_();lr.postfix&&!kp();){var pr=rp(Tr);pr.operator=mr,pr.prefix=!1,pr.argument=Tr,Uy(Tr),zs(),Tr=Rs(pr,"UpdateExpression")}return Tr}function p_(){return lp(Hv())}function lp(pr,vr){if($a(jy)){var Tr=rp(pr);return Tr.object=pr,Tr.property=Du(!0),Tr.computed=!1,lp(Rs(Tr,"MemberExpression"),vr)}else if($a(ep)){var Tr=rp(pr);return Tr.object=pr,Tr.property=Wo(),Tr.computed=!0,Xs(Mu),lp(Rs(Tr,"MemberExpression"),vr)}else if(!vr&&$a(cu)){var Tr=rp(pr);return Tr.callee=pr,Tr.arguments=Yy(Qo,!1),lp(Rs(Tr,"CallExpression"),vr)}else return pr}function Hv(){switch(lr){case Dy:var Or=Do();return zs(),Rs(Or,"ThisExpression");case gs:return Du();case ss:case ys:case ns:var Or=Do();return Or.value=mr,Or.raw=zn.slice(sr,ur),zs(),Rs(Or,"Literal");case zl:case Dv:case jv:var Or=Do();return Or.value=lr.atomValue,Or.raw=lr.keyword,zs(),Rs(Or,"Literal");case cu:var pr=dr,vr=sr;zs();var Tr=Wo();return Tr.start=vr,Tr.end=ur,Kn.locations&&(Tr.loc.start=pr,Tr.loc.end=gr),Kn.ranges&&(Tr.range=[vr,ur]),Xs(Qo),Tr;case ep:var Or=Do();return zs(),Or.elements=Yy(Mu,!0,!0),Rs(Or,"ArrayExpression");case Hl:return go();case vo:var Or=Do();return zs(),Ky(Or,!1);case Wp:return m_();default:Lu()}}function m_(){var pr=Do();return zs(),pr.callee=lp(Hv(),!0),$a(cu)?pr.arguments=Yy(Qo,!1):pr.arguments=Qr,Rs(pr,"NewExpression")}function go(){var pr=Do(),vr=!0,Tr=!1;for(pr.properties=[],zs();!$a(Ps);){if(vr)vr=!1;else if(Xs(tu),Kn.allowTrailingCommas&&$a(Ps))break;var Or={key:qy()},us=!1,xs;if($a(hu)?(Or.value=Wo(!0),xs=Or.kind="init"):Kn.ecmaVersion>=5&&Or.key.type==="Identifier"&&(Or.key.name==="get"||Or.key.name==="set")?(us=Tr=!0,xs=Or.kind=Or.key.name,Or.key=qy(),lr!==cu&&Lu(),Or.value=Ky(Do(),!1)):Lu(),Or.key.type==="Identifier"&&(Dr||Tr))for(var bs=0;bs<pr.properties.length;++bs){var Vs=pr.properties[bs];if(Vs.key.name===Or.key.name){var ju=xs==Vs.kind||us&&Vs.kind==="init"||xs==="init"&&(Vs.kind==="get"||Vs.kind==="set");ju&&!Dr&&xs==="init"&&Vs.kind==="init"&&(ju=!1),ju&&$r(Or.key.start,"Redefinition of property")}}pr.properties.push(Or)}return Rs(pr,"ObjectExpression")}function qy(){return lr===ss||lr===ys?Hv():Du(!0)}function Ky(pr,vr){lr===gs?pr.id=Du():vr?Lu():pr.id=null,pr.params=[];var Tr=!0;for(Xs(cu);!$a(Qo);)Tr?Tr=!1:Xs(tu),pr.params.push(Du());var Or=Xr,us=es;if(Xr=!0,es=[],pr.body=gu(!0),Xr=Or,es=us,Dr||pr.body.body.length&&Hy(pr.body.body[0]))for(var xs=pr.id?-1:0;xs<pr.params.length;++xs){var bs=xs<0?pr.id:pr.params[xs];if((a_(bs.name)||Fv(bs.name))&&$r(bs.start,"Defining '"+bs.name+"' in strict mode"),xs>=0)for(var Vs=0;Vs<xs;++Vs)bs.name===pr.params[Vs].name&&$r(bs.start,"Argument name clash in strict mode")}return Rs(pr,vr?"FunctionDeclaration":"FunctionExpression")}function Yy(pr,vr,Tr){for(var Or=[],us=!0;!$a(pr);){if(us)us=!1;else if(Xs(tu),vr&&Kn.allowTrailingCommas&&$a(pr))break;Tr&&lr===tu?Or.push(null):Or.push(Wo(!0))}return Or}function Du(pr){var vr=Do();return pr&&Kn.forbidReserved=="everywhere"&&(pr=!1),lr===gs?(!pr&&(Kn.forbidReserved&&(Kn.ecmaVersion===3?Iu:s_)(mr)||Dr&&a_(mr))&&zn.slice(sr,ur).indexOf("\\")==-1&&$r(sr,"The keyword '"+mr+"' is reserved"),vr.name=mr):pr&&lr.keyword?vr.name=lr.keyword:Lu(),yr=!1,zs(),Rs(vr,"Identifier")}}),Jt.version||(Jt=null)}function cn(Wn,Kn){return($t.acorn||Jt).parse(Wn,Kn)}var fn={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},wn={"-":"__negate","+":"__self"},_n=ct.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Wn){this["__"+Wn]="#"+Wn},{__self:function(){return this}});Ft.inject(_n),Ht.inject(_n),ar.inject(_n);function Tn(Wn,Kn,zn){var Gn=fn[Kn];if(Wn&&Wn[Gn]){var Dn=Wn[Gn](zn);return Kn==="!="?!Dn:Dn}switch(Kn){case"+":return Wn+zn;case"-":return Wn-zn;case"*":return Wn*zn;case"/":return Wn/zn;case"%":return Wn%zn;case"==":return Wn==zn;case"!=":return Wn!=zn}}function Nn(Wn,Kn){var zn=wn[Wn];if(Kn&&Kn[zn])return Kn[zn]();switch(Wn){case"+":return+Kn;case"-":return-Kn}}function Bn(Wn,Kn){if(!Wn)return"";Kn=Kn||{};var zn=[];function Gn(Dr){for(var $r=0,Qr=zn.length;$r<Qr;$r++){var ss=zn[$r];if(ss[0]>=Dr)break;Dr+=ss[1]}return Dr}function Dn(Dr){return Wn.substring(Gn(Dr.range[0]),Gn(Dr.range[1]))}function qn(Dr,$r){return Wn.substring(Gn(Dr.range[1]),Gn($r.range[0]))}function Zn(Dr,$r){for(var Qr=Gn(Dr.range[0]),ss=Gn(Dr.range[1]),ns=0,ys=zn.length-1;ys>=0;ys--)if(Qr>zn[ys][0]){ns=ys+1;break}zn.splice(ns,0,[Qr,$r.length-ss+Qr]),Wn=Wn.substring(0,Qr)+$r+Wn.substring(ss)}function nr(Dr,$r){switch(Dr.type){case"UnaryExpression":if(Dr.operator in wn&&Dr.argument.type!=="Literal"){var Qr=Dn(Dr.argument);Zn(Dr,'$__("'+Dr.operator+'", '+Qr+")")}break;case"BinaryExpression":if(Dr.operator in fn&&Dr.left.type!=="Literal"){var ss=Dn(Dr.left),ns=Dn(Dr.right),ys=qn(Dr.left,Dr.right),gs=Dr.operator;Zn(Dr,"__$__("+ss+","+ys.replace(new RegExp("\\"+gs),'"'+gs+'"')+", "+ns+")")}break;case"UpdateExpression":case"AssignmentExpression":var _s=$r&&$r.type;if(!(_s==="ForStatement"||_s==="BinaryExpression"&&/^[=!<>]/.test($r.operator)||_s==="MemberExpression"&&$r.computed)){if(Dr.type==="UpdateExpression"){var Qr=Dn(Dr.argument),Ss="__$__("+Qr+', "'+Dr.operator[0]+'", 1)',vs=Qr+" = "+Ss;Dr.prefix?vs="("+vs+")":(_s==="AssignmentExpression"||_s==="VariableDeclarator"||_s==="BinaryExpression")&&(Dn($r.left||$r.id)===Qr&&(vs=Ss),vs=Qr+"; "+vs),Zn(Dr,vs)}else if(/^.=$/.test(Dr.operator)&&Dr.left.type!=="Literal"){var ss=Dn(Dr.left),ns=Dn(Dr.right),Ss=ss+" = __$__("+ss+', "'+Dr.operator[0]+'", '+ns+")";Zn(Dr,/^\(.*\)$/.test(Dn(Dr))?"("+Ss+")":Ss)}}break}}function Yn(Dr){switch(Dr.type){case"ExportDefaultDeclaration":Zn({range:[Dr.start,Dr.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var $r=Dr.declaration,Qr=Dr.specifiers;if($r){var ss=$r.declarations;ss&&(ss.forEach(function(ys){Zn(ys,"module.exports."+Dn(ys))}),Zn({range:[Dr.start,$r.start+$r.kind.length]},""))}else if(Qr){var ns=Qr.map(function(ys){var gs=Dn(ys);return"module.exports."+gs+" = "+gs+"; "}).join("");ns&&Zn(Dr,ns)}break}}function sr(Dr,$r,Qr){if(Dr){for(var ss in Dr)if(ss!=="range"&&ss!=="loc"){var ns=Dr[ss];if(Array.isArray(ns))for(var ys=0,gs=ns.length;ys<gs;ys++)sr(ns[ys],Dr,Qr);else ns&&typeof ns=="object"&&sr(ns,Dr,Qr)}Qr.operatorOverloading!==!1&&nr(Dr,$r),Qr.moduleExports!==!1&&Yn(Dr)}}function ur(Dr){var $r="",Qr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Dr=(Math.abs(Dr)<<1)+(Dr<0?1:0);Dr||!$r;){var ss=Dr&31;Dr>>=5,Dr&&(ss|=32),$r+=Qr[ss]}return $r}var dr=Kn.url||"",gr=Kn.sourceMaps,lr=Kn.paperFeatures||{},mr=Kn.source||Wn,yr=Kn.offset||0,br=Kr.agent,Er=br.versionNumber,Pr=!1,Hr=/\r\n|\n|\r/mg,Wr;if(gr&&(br.chrome&&Er>=30||br.webkit&&Er>=537.76||br.firefox&&Er>=23||br.node)){if(br.node)yr-=2;else if(ot&&dr&&!ot.location.href.indexOf(dr)){var Xr=ut.getElementsByTagName("html")[0].innerHTML;yr=Xr.substr(0,Xr.indexOf(Wn)+1).match(Hr).length+1}Pr=yr>0&&!(br.chrome&&Er>=36||br.safari&&Er>=600||br.firefox&&Er>=40||br.node);var es=["AA"+ur(Pr?0:yr)+"A"];es.length=(Wn.match(Hr)||[]).length+1+(Pr?yr:0),Wr={version:3,file:dr,names:[],mappings:es.join(";AACA"),sourceRoot:"",sources:[dr],sourcesContent:[mr]}}return(lr.operatorOverloading!==!1||lr.moduleExports!==!1)&&sr(cn(Wn,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,lr),Wr&&(Pr&&(Wn=new Array(yr+1).join(`
`)+Wn),/^(inline|both)$/.test(gr)&&(Wn+=`
//# sourceMappingURL=data:application/json;base64,`+g.btoa(unescape(encodeURIComponent(JSON.stringify(Wr))))),Wn+=`
//# sourceURL=`+(dr||"paperscript")),{url:dr,source:mr,code:Wn,map:Wr}}function Hn(Wn,Kn,zn){Kr=Kn;var Gn=Kn.getView(),Dn=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Wn)&&!/\bnew\s+Tool\b/.test(Wn)?new Rr:null,qn=Dn?Dn._events:[],Zn=["onFrame","onResize"].concat(qn),nr=[],Yn=[],sr,ur=typeof Wn=="object"?Wn:Bn(Wn,zn);Wn=ur.code;function dr(Er,Pr){for(var Hr in Er)(Pr||!/^_/.test(Hr))&&new RegExp("([\\b\\s\\W]|^)"+Hr.replace(/\$/g,"\\$")+"\\b").test(Wn)&&(nr.push(Hr),Yn.push(Er[Hr]))}dr({__$__:Tn,$__:Nn,paper:Kn,tool:Dn},!0),dr(Kn),Wn="var module = { exports: {} }; "+Wn;var yr=ct.each(Zn,function(Er){new RegExp("\\s+"+Er+"\\b").test(Wn)&&(nr.push(Er),this.push("module.exports."+Er+" = "+Er+";"))},[]).join(`
`);yr&&(Wn+=`
`+yr),Wn+=`
return module.exports;`;var gr=Kr.agent;if(ut&&(gr.chrome||gr.firefox&&gr.versionNumber<40)){var lr=ut.createElement("script"),mr=ut.head||ut.getElementsByTagName("head")[0];gr.firefox&&(Wn=`
`+Wn),lr.appendChild(ut.createTextNode("document.__paperscript__ = function("+nr+") {"+Wn+`
}`)),mr.appendChild(lr),sr=ut.__paperscript__,delete ut.__paperscript__,mr.removeChild(lr)}else sr=Function(nr,Wn);var yr=sr&&sr.apply(Kn,Yn),br=yr||{};return ct.each(qn,function(Er){var Pr=br[Er];Pr&&(Dn[Er]=Pr)}),Gn&&(br.onResize&&Gn.setOnResize(br.onResize),Gn.emit("resize",{size:Gn.size,delta:new Ft}),br.onFrame&&Gn.setOnFrame(br.onFrame),Gn.requestUpdate()),yr}function Fn(Wn){if(/^text\/(?:x-|)paperscript$/.test(Wn.type)&&ft.getAttribute(Wn,"ignore")!=="true"){var Kn=ft.getAttribute(Wn,"canvas"),zn=ut.getElementById(Kn),Gn=Wn.src||Wn.getAttribute("data-src"),Dn=ft.hasAttribute(Wn,"async"),qn="data-paper-scope";if(!zn)throw new Error('Unable to find canvas with id "'+Kn+'"');var Zn=ft.get(zn.getAttribute(qn))||new ft().setup(zn);return zn.setAttribute(qn,Zn._id),Gn?Gr.request({url:Gn,async:Dn,mimeType:"text/plain",onLoad:function(nr){Hn(nr,Zn,Gn)}}):Hn(Wn.innerHTML,Zn,Wn.baseURI),Wn.setAttribute("data-paper-ignore","true"),Zn}}function jn(){ct.each(ut&&ut.getElementsByTagName("script"),Fn)}function Jn(Wn){return Wn?Fn(Wn):jn()}return ot&&(ut.readyState==="complete"?setTimeout(jn):wr.add(ot,{load:jn})),{compile:Bn,execute:Hn,load:Jn,parse:cn,calculateBinary:Tn,calculateUnary:Nn}}).call(this);var Kr=new(ft.inject(ct.exports,{Base:ct,Numerical:Rt,Key:cs,DomEvent:wr,DomElement:xr,document:ut,window:ot,Symbol:En,PlacedSymbol:bn}));return Kr.agent.node&&require$$2(Kr),typeof et=="function"&&et.amd?et("paper",Kr):it&&(it.exports=Kr),Kr}).call(commonjsGlobal,typeof self=="object"?self:null)})(paperFull);var paperFullExports=paperFull.exports;const paper=getDefaultExportFromCjs(paperFullExports);function performBooleanOperation(it,g){if(!it||it.length!==2)return console.warn(" Need exactly 2 shapes to combine:",it),null;const et=document.createElement("canvas");paper.setup(et);const ot=St=>{switch(St.type){case"rect":return new paper.Path.Rectangle(new paper.Point(St.x,St.y),new paper.Size(St.width,St.height));case"circle":return new paper.Path.Ellipse({center:[St.x,St.y],radius:[St.radiusX||St.radius||50,St.radiusY||St.radius||50]});default:return console.warn(" Unsupported shape type:",St.type),null}},[ut,ct]=it.map(ot).filter(Boolean);if(!ut||!ct)return null;let dt;switch(g){case"union":dt=ut.unite(ct);break;case"subtract":dt=ut.subtract(ct);break;case"intersect":dt=ut.intersect(ct);break;case"xor":dt=ut.exclude(ct);break;case"divide":dt=ut.divide(ct);break;default:return console.warn(" Unknown operation:",g),null}const ft=(dt==null?void 0:dt.pathData)||null;return ut.remove(),ct.remove(),dt==null||dt.remove(),ft}GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPage({imageUrl:it,shapes:g,setShapes:et,setSelectedTool:ot,selectedTool:ut,selectedIds:ct,setSelectedIds:dt}){const[ft]=useImage$1(it),St=reactExports.useRef(null),[kt,Tt]=reactExports.useState({width:0,height:0}),[Rt,jt]=reactExports.useState(1);return reactExports.useEffect(()=>{const Ft=()=>{if(!St.current||!ft)return;const Bt=St.current.offsetWidth,Ht=St.current.offsetHeight,Yt=Bt/ft.width,zt=Ht/ft.height,Kt=Math.min(Yt,zt);jt(Kt),Tt({width:ft.width*Kt,height:ft.height*Kt})};return Ft(),window.addEventListener("resize",Ft),()=>window.removeEventListener("resize",Ft)},[ft]),jsxRuntimeExports.jsx("div",{ref:St,className:"relative flex justify-center items-center w-full h-[80vh] overflow-hidden bg-[#0f0f10] rounded-lg",children:ft&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Stage,{width:kt.width,height:kt.height,scaleX:Rt,scaleY:Rt,children:jsxRuntimeExports.jsx(Layer,{children:jsxRuntimeExports.jsx(Image$1,{image:ft})})}),jsxRuntimeExports.jsx("div",{className:"absolute",style:{width:`${kt.width}px`,height:`${kt.height}px`},children:jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:g,setShapes:et,selectedTool:ut,setSelectedTool:ot,selectedIds:ct,setSelectedIds:dt})})]})})}function CanvasEditor(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(0),[ut,ct]=reactExports.useState({}),dt=new URLSearchParams(window.location.search).get("pdf"),[ft,St]=reactExports.useState(!0),[kt,Tt]=reactExports.useState(null),[Rt,jt]=reactExports.useState([]);reactExports.useEffect(()=>{const tn=()=>Tt(null);return window.addEventListener("clearSelectedTool",tn),()=>window.removeEventListener("clearSelectedTool",tn)},[]),reactExports.useEffect(()=>{if(!dt)return;(async()=>{St(!0);try{const on=`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(dt)}`,un=await(await axiosInstance.get(on,{responseType:"blob"})).data.arrayBuffer(),dn=await getDocument({data:un}).promise,Sn=[];for(let mn=1;mn<=dn.numPages;mn++){const bn=await dn.getPage(mn),En=bn.getViewport({scale:1.5}),kn=document.createElement("canvas"),Pn=kn.getContext("2d");kn.width=En.width,kn.height=En.height,await bn.render({canvasContext:Pn,viewport:En}).promise,Sn.push(kn.toDataURL())}g(Sn)}catch(on){console.error(" PDF load error:",on)}finally{St(!1)}})()},[dt]);const Ft=tn=>{Tt(on=>on===tn?null:tn)},Bt=reactExports.useRef({});function Ht(tn){return Bt.current[tn]||(Bt.current[tn]={past:[],future:[]}),Bt.current[tn]}function Yt(tn,on){const{past:an}=Ht(tn);an.push(JSON.parse(JSON.stringify(on||[]))),Bt.current[tn].future=[]}const zt=reactExports.useCallback(()=>{const tn=et,{past:on,future:an}=Ht(tn);if(on.length===0)return;const un=ut[tn]||[],dn=on.pop();an.push(JSON.parse(JSON.stringify(un))),ct(Sn=>({...Sn,[tn]:dn})),jt([])},[et,ut,ct]),Kt=reactExports.useCallback(()=>{const tn=et,{past:on,future:an}=Ht(tn);if(an.length===0)return;const un=ut[tn]||[],dn=an.pop();on.push(JSON.parse(JSON.stringify(un))),ct(Sn=>({...Sn,[tn]:dn})),jt([])},[et,ut,ct]);reactExports.useEffect(()=>{function tn(on){const an=on.target;if(an&&(an.tagName==="INPUT"||an.tagName==="TEXTAREA"||an.isContentEditable))return;(navigator.platform.toUpperCase().includes("MAC")?on.metaKey:on.ctrlKey)&&on.key.toLowerCase()==="z"&&(on.preventDefault(),on.shiftKey?Kt():zt())}return window.addEventListener("keydown",tn),()=>window.removeEventListener("keydown",tn)},[zt,Kt]);function en(tn){const on=ut[et]||[],an=Rt.map(String),un=on.filter(mn=>an.includes(String(mn.id)));if(un.length!==2){alert("Select exactly 2 shapes to combine.");return}const dn=performBooleanOperation(un,tn);if(!dn)return;const Sn={id:`shape-${Date.now()}`,type:"path",data:dn,fill:"rgba(0,128,255,0.25)",stroke:"#00b4ff",strokeWidth:1};Yt(et,on),ct(mn=>({...mn,[et]:[...on.filter(bn=>!an.includes(String(bn.id))),Sn]})),jt([Sn.id])}return ft?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-emerald-400 mb-3"}),jsxRuntimeExports.jsx("p",{children:"Rendering PDF pages..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-[#111] text-white",children:[jsxRuntimeExports.jsxs("div",{className:"w-28 flex-shrink-0 overflow-y-auto p-3 border-r border-gray-800",children:[jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold mb-3 text-gray-300",children:"Pages"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:it.map((tn,on)=>jsxRuntimeExports.jsx("img",{src:tn,alt:`Page ${on+1}`,onClick:()=>ot(on),className:`cursor-pointer rounded-md border-2 transition-all ${et===on?"border-emerald-500 scale-105":"border-gray-700 hover:border-gray-500"}`},on))})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Canvas Editor"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-auto bg-[#0f0f10] rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-50 bg-[#1a1a1a]/90 backdrop-blur-md px-3 py-2 rounded-lg border border-gray-700/60 shadow-md canvas-toolbar",onMouseDown:tn=>tn.stopPropagation(),onClick:tn=>tn.stopPropagation(),children:[[{icon:Square,type:"rect",color:"bg-black"},{icon:Circle$1,type:"circle",color:"bg-black"},{icon:ArrowRight,type:"arrow",color:"bg-black"},{icon:Type,type:"text",color:"bg-black"}].map(({icon:tn,type:on,color:an})=>jsxRuntimeExports.jsx("button",{onClick:()=>Ft(on),className:`w-8 h-8 flex items-center justify-center rounded-md ${an} transition`,title:`Add ${on}`,children:jsxRuntimeExports.jsx(tn,{size:18,className:"text-green"})},on)),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>en("union"),title:"Add",children:jsxRuntimeExports.jsx(Plus,{className:"text-cyan-400",size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>en("subtract"),title:"Subtract",children:jsxRuntimeExports.jsx(Minus,{className:"text-cyan-400",size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>en("intersect"),title:"Intersect",children:jsxRuntimeExports.jsx(Combine,{className:"text-cyan-400",size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>en("xor"),title:"XOR / Exclude",children:jsxRuntimeExports.jsx(Slash,{className:"text-cyan-400",size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>en("divide"),title:"Divide",children:jsxRuntimeExports.jsx(Divide,{className:"text-cyan-400",size:18})})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{localStorage.removeItem("cre8tly_canvas_shapes"),window.dispatchEvent(new CustomEvent("clearCanvasShapes"))},className:"absolute bottom-4 right-4 flex items-center gap-1 px-3 py-1.5 rounded-md bg-[#1a1a1a]/90 text-gray-300 hover:text-red-400 border border-gray-700/50 text-xs transition",children:[jsxRuntimeExports.jsx(Trash2,{size:14}),"Clear"]}),it.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(()=>{window.currentPDFPage=et})()," ",jsxRuntimeExports.jsx(PDFPage,{imageUrl:it[et],shapes:ut[et]||[],setShapes:tn=>{ct(on=>{const an=Array.isArray(on[et])?on[et]:[],un=typeof tn=="function"?tn(an):Array.isArray(tn)?tn:[];return Yt(et,an),{...on,[et]:un}})},selectedIds:Rt,setSelectedIds:jt,selectedTool:kt})]})]})]})]})}const AnimatedRoutes=()=>{const it=useLocation();return jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:it,children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(App,{})})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/canvas-editor",element:jsxRuntimeExports.jsx(CanvasEditor,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/prompts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(PromptMemoryDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/shop",element:jsxRuntimeExports.jsx(EbooksStore,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"/cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"/prompt",element:jsxRuntimeExports.jsx(PromptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/plans",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(PlansPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(CustomerDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(PrivateRoute,{role:"admin",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(AdminDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/debug",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},style:{backgroundColor:"#030712",color:"#fff",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Debug Test Page"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},it.pathname)})},RootApp=()=>{const{maintenance:it,loading:g}=useMaintenance();return g?null:it?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsx(BookProvider,{children:jsxRuntimeExports.jsxs(MagnetProvider,{children:[jsxRuntimeExports.jsx(Lt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));
