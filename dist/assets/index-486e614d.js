var GN=Object.defineProperty;var WN=(it,g,et)=>g in it?GN(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et;var qn=(it,g,et)=>(WN(it,typeof g!="symbol"?g+"":g,et),et),L_=(it,g,et)=>{if(!g.has(it))throw TypeError("Cannot "+et)};var Ht=(it,g,et)=>(L_(it,g,"read from private field"),et?et.call(it):g.get(it)),vn=(it,g,et)=>{if(g.has(it))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(it):g.set(it,et)},xn=(it,g,et,ot)=>(L_(it,g,"write to private field"),ot?ot.call(it,et):g.set(it,et),et);var cs=(it,g,et,ot)=>({set _(ct){xn(it,g,ct,et)},get _(){return Ht(it,g,ot)}}),An=(it,g,et)=>(L_(it,g,"access private method"),et);function _mergeNamespaces(it,g){for(var et=0;et<g.length;et++){const ot=g[et];if(typeof ot!="string"&&!Array.isArray(ot)){for(const ct in ot)if(ct!=="default"&&!(ct in it)){const ut=Object.getOwnPropertyDescriptor(ot,ct);ut&&Object.defineProperty(it,ct,ut.get?ut:{enumerable:!0,get:()=>ot[ct]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))ot(ct);new MutationObserver(ct=>{for(const ut of ct)if(ut.type==="childList")for(const dt of ut.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&ot(dt)}).observe(document,{childList:!0,subtree:!0});function et(ct){const ut={};return ct.integrity&&(ut.integrity=ct.integrity),ct.referrerPolicy&&(ut.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?ut.credentials="include":ct.crossOrigin==="anonymous"?ut.credentials="omit":ut.credentials="same-origin",ut}function ot(ct){if(ct.ep)return;ct.ep=!0;const ut=et(ct);fetch(ct.href,ut)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$5=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(it){return it===null||typeof it!="object"?null:(it=z$2&&it[z$2]||it["@@iterator"],typeof it=="function"?it:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$2={};function E$3(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(it,g){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,g,"setState")};E$3.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$2(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$5(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(it,g,et){var ot,ct={},ut=null,dt=null;if(g!=null)for(ot in g.ref!==void 0&&(dt=g.ref),g.key!==void 0&&(ut=""+g.key),g)J$2.call(g,ot)&&!L$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);var ft=arguments.length-2;if(ft===1)ct.children=et;else if(1<ft){for(var St=Array(ft),kt=0;kt<ft;kt++)St[kt]=arguments[kt+2];ct.children=St}if(it&&it.defaultProps)for(ot in ft=it.defaultProps,ft)ct[ot]===void 0&&(ct[ot]=ft[ot]);return{$$typeof:l$4,type:it,key:ut,ref:dt,props:ct,_owner:K$3.current}}function N$3(it,g){return{$$typeof:l$4,type:it.type,key:g,ref:it.ref,props:it.props,_owner:it._owner}}function O$5(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$4}function escape$1(it){var g={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(et){return g[et]})}var P$4=/\/+/g;function Q$2(it,g){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):g.toString(36)}function R$4(it,g,et,ot,ct){var ut=typeof it;(ut==="undefined"||ut==="boolean")&&(it=null);var dt=!1;if(it===null)dt=!0;else switch(ut){case"string":case"number":dt=!0;break;case"object":switch(it.$$typeof){case l$4:case n$5:dt=!0}}if(dt)return dt=it,ct=ct(dt),it=ot===""?"."+Q$2(dt,0):ot,I$5(ct)?(et="",it!=null&&(et=it.replace(P$4,"$&/")+"/"),R$4(ct,g,et,"",function(kt){return kt})):ct!=null&&(O$5(ct)&&(ct=N$3(ct,et+(!ct.key||dt&&dt.key===ct.key?"":(""+ct.key).replace(P$4,"$&/")+"/")+it)),g.push(ct)),1;if(dt=0,ot=ot===""?".":ot+":",I$5(it))for(var ft=0;ft<it.length;ft++){ut=it[ft];var St=ot+Q$2(ut,ft);dt+=R$4(ut,g,et,St,ct)}else if(St=A$3(it),typeof St=="function")for(it=St.call(it),ft=0;!(ut=it.next()).done;)ut=ut.value,St=ot+Q$2(ut,ft++),dt+=R$4(ut,g,et,St,ct);else if(ut==="object")throw g=String(it),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$4(it,g,et){if(it==null)return it;var ot=[],ct=0;return R$4(it,ot,"","",function(ut){return g.call(et,ut,ct++)}),ot}function T$4(it){if(it._status===-1){var g=it._result;g=g(),g.then(function(et){(it._status===0||it._status===-1)&&(it._status=1,it._result=et)},function(et){(it._status===0||it._status===-1)&&(it._status=2,it._result=et)}),it._status===-1&&(it._status=0,it._result=g)}if(it._status===1)return it._result.default;throw it._result}var U$5={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(it,g,et){S$4(it,function(){g.apply(this,arguments)},et)},count:function(it){var g=0;return S$4(it,function(){g++}),g},toArray:function(it){return S$4(it,function(g){return g})||[]},only:function(it){if(!O$5(it))throw Error("React.Children.only expected to receive a single React element child.");return it}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(it,g,et){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var ot=C$5({},it.props),ct=it.key,ut=it.ref,dt=it._owner;if(g!=null){if(g.ref!==void 0&&(ut=g.ref,dt=K$3.current),g.key!==void 0&&(ct=""+g.key),it.type&&it.type.defaultProps)var ft=it.type.defaultProps;for(St in g)J$2.call(g,St)&&!L$4.hasOwnProperty(St)&&(ot[St]=g[St]===void 0&&ft!==void 0?ft[St]:g[St])}var St=arguments.length-2;if(St===1)ot.children=et;else if(1<St){ft=Array(St);for(var kt=0;kt<St;kt++)ft[kt]=arguments[kt+2];ot.children=ft}return{$$typeof:l$4,type:it.type,key:ct,ref:ut,props:ot,_owner:dt}};react_production_min.createContext=function(it){return it={$$typeof:u$6,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$6,_context:it},it.Consumer=it};react_production_min.createElement=M$4;react_production_min.createFactory=function(it){var g=M$4.bind(null,it);return g.type=it,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(it){return{$$typeof:v$3,render:it}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(it){return{$$typeof:y$5,_payload:{_status:-1,_result:it},_init:T$4}};react_production_min.memo=function(it,g){return{$$typeof:x$3,type:it,compare:g===void 0?null:g}};react_production_min.startTransition=function(it){var g=V$3.transition;V$3.transition={};try{it()}finally{V$3.transition=g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(it,g){return U$5.current.useCallback(it,g)};react_production_min.useContext=function(it){return U$5.current.useContext(it)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(it){return U$5.current.useDeferredValue(it)};react_production_min.useEffect=function(it,g){return U$5.current.useEffect(it,g)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(it,g,et){return U$5.current.useImperativeHandle(it,g,et)};react_production_min.useInsertionEffect=function(it,g){return U$5.current.useInsertionEffect(it,g)};react_production_min.useLayoutEffect=function(it,g){return U$5.current.useLayoutEffect(it,g)};react_production_min.useMemo=function(it,g){return U$5.current.useMemo(it,g)};react_production_min.useReducer=function(it,g,et){return U$5.current.useReducer(it,g,et)};react_production_min.useRef=function(it){return U$5.current.useRef(it)};react_production_min.useState=function(it){return U$5.current.useState(it)};react_production_min.useSyncExternalStore=function(it,g,et){return U$5.current.useSyncExternalStore(it,g,et)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$2=getDefaultExportFromCjs(reactExports),t$5=_mergeNamespaces({__proto__:null,default:React$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$4=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q(it,g,et){var ot,ct={},ut=null,dt=null;et!==void 0&&(ut=""+et),g.key!==void 0&&(ut=""+g.key),g.ref!==void 0&&(dt=g.ref);for(ot in g)m$6.call(g,ot)&&!p$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);if(it&&it.defaultProps)for(ot in g=it.defaultProps,g)ct[ot]===void 0&&(ct[ot]=g[ot]);return{$$typeof:k$1,type:it,key:ut,ref:dt,props:ct,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(it){function g(an,un){var bn=an.length;an.push(un);e:for(;0<bn;){var pn=bn-1>>>1,kn=an[pn];if(0<ct(kn,un))an[pn]=un,an[bn]=kn,bn=pn;else break e}}function et(an){return an.length===0?null:an[0]}function ot(an){if(an.length===0)return null;var un=an[0],bn=an.pop();if(bn!==un){an[0]=bn;e:for(var pn=0,kn=an.length,_n=kn>>>1;pn<_n;){var Rn=2*(pn+1)-1,Nn=an[Rn],Cn=Rn+1,Mn=an[Cn];if(0>ct(Nn,bn))Cn<kn&&0>ct(Mn,Nn)?(an[pn]=Mn,an[Cn]=bn,pn=Cn):(an[pn]=Nn,an[Rn]=bn,pn=Rn);else if(Cn<kn&&0>ct(Mn,bn))an[pn]=Mn,an[Cn]=bn,pn=Cn;else break e}}return un}function ct(an,un){var bn=an.sortIndex-un.sortIndex;return bn!==0?bn:an.id-un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ut=performance;it.unstable_now=function(){return ut.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,jt=null,Rt=3,Ft=!1,$t=!1,zt=!1,Kt=typeof setTimeout=="function"?setTimeout:null,Bt=typeof clearTimeout=="function"?clearTimeout:null,Ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Jt(an){for(var un=et(kt);un!==null;){if(un.callback===null)ot(kt);else if(un.startTime<=an)ot(kt),un.sortIndex=un.expirationTime,g(St,un);else break;un=et(kt)}}function en(an){if(zt=!1,Jt(an),!$t)if(et(St)!==null)$t=!0,hn(tn);else{var un=et(kt);un!==null&&yn(en,un.startTime-an)}}function tn(an,un){$t=!1,zt&&(zt=!1,Bt(on),on=-1),Ft=!0;var bn=Rt;try{for(Jt(un),jt=et(St);jt!==null&&(!(jt.expirationTime>un)||an&&!fn());){var pn=jt.callback;if(typeof pn=="function"){jt.callback=null,Rt=jt.priorityLevel;var kn=pn(jt.expirationTime<=un);un=it.unstable_now(),typeof kn=="function"?jt.callback=kn:jt===et(St)&&ot(St),Jt(un)}else ot(St);jt=et(St)}if(jt!==null)var _n=!0;else{var Rn=et(kt);Rn!==null&&yn(en,Rn.startTime-un),_n=!1}return _n}finally{jt=null,Rt=bn,Ft=!1}}var nn=!1,rn=null,on=-1,dn=5,cn=-1;function fn(){return!(it.unstable_now()-cn<dn)}function mn(){if(rn!==null){var an=it.unstable_now();cn=an;var un=!0;try{un=rn(!0,an)}finally{un?En():(nn=!1,rn=null)}}else nn=!1}var En;if(typeof Ut=="function")En=function(){Ut(mn)};else if(typeof MessageChannel<"u"){var Sn=new MessageChannel,wn=Sn.port2;Sn.port1.onmessage=mn,En=function(){wn.postMessage(null)}}else En=function(){Kt(mn,0)};function hn(an){rn=an,nn||(nn=!0,En())}function yn(an,un){on=Kt(function(){an(it.unstable_now())},un)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(an){an.callback=null},it.unstable_continueExecution=function(){$t||Ft||($t=!0,hn(tn))},it.unstable_forceFrameRate=function(an){0>an||125<an?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dn=0<an?Math.floor(1e3/an):5},it.unstable_getCurrentPriorityLevel=function(){return Rt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(an){switch(Rt){case 1:case 2:case 3:var un=3;break;default:un=Rt}var bn=Rt;Rt=un;try{return an()}finally{Rt=bn}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(an,un){switch(an){case 1:case 2:case 3:case 4:case 5:break;default:an=3}var bn=Rt;Rt=an;try{return un()}finally{Rt=bn}},it.unstable_scheduleCallback=function(an,un,bn){var pn=it.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?pn+bn:pn):bn=pn,an){case 1:var kn=-1;break;case 2:kn=250;break;case 5:kn=1073741823;break;case 4:kn=1e4;break;default:kn=5e3}return kn=bn+kn,an={id:Tt++,callback:un,priorityLevel:an,startTime:bn,expirationTime:kn,sortIndex:-1},bn>pn?(an.sortIndex=bn,g(kt,an),et(St)===null&&an===et(kt)&&(zt?(Bt(on),on=-1):zt=!0,yn(en,bn-pn))):(an.sortIndex=kn,g(St,an),$t||Ft||($t=!0,hn(tn))),an},it.unstable_shouldYield=fn,it.unstable_wrapCallback=function(an){var un=Rt;return function(){var bn=Rt;Rt=un;try{return an.apply(this,arguments)}finally{Rt=bn}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(it){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+it,et=1;et<arguments.length;et++)g+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+it+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(it,g){ha(it,g),ha(it+"Capture",g)}function ha(it,g){for(ea[it]=g,it=0;it<g.length;it++)da.add(g[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,g,et,ot){if(et!==null&&et.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return ot?!1:et!==null?!et.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,g,et,ot){if(g===null||typeof g>"u"||pa(it,g,et,ot))return!0;if(ot)return!1;if(et!==null)switch(et.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2(it,g,et,ot,ct,ut,dt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=ot,this.attributeNamespace=ct,this.mustUseProperty=et,this.propertyName=it,this.type=g,this.sanitizeURL=ut,this.removeEmptyString=dt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$1[it]=new v$2(it,0,!1,it,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var g=it[0];z$1[g]=new v$2(g,1,!1,it[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$1[it]=new v$2(it,3,!1,it.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(it){z$1[it]=new v$2(it,3,!0,it,null,!1,!1)});["capture","download"].forEach(function(it){z$1[it]=new v$2(it,4,!1,it,null,!1,!1)});["cols","rows","size","span"].forEach(function(it){z$1[it]=new v$2(it,6,!1,it,null,!1,!1)});["rowSpan","start"].forEach(function(it){z$1[it]=new v$2(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta$1(it,g,et,ot){var ct=z$1.hasOwnProperty(g)?z$1[g]:null;(ct!==null?ct.type!==0:ot||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,et,ct,ot)&&(et=null),ot||ct===null?oa(g)&&(et===null?it.removeAttribute(g):it.setAttribute(g,""+et)):ct.mustUseProperty?it[ct.propertyName]=et===null?ct.type===3?!1:"":et:(g=ct.attributeName,ot=ct.attributeNamespace,et===null?it.removeAttribute(g):(ct=ct.type,et=ct===3||ct===4&&et===!0?"":""+et,ot?it.setAttributeNS(ot,g,et):it.setAttribute(g,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$2=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(et){var g=et.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+it}var Na=!1;function Oa(it,g){if(!it||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(kt){var ot=kt}Reflect.construct(it,[],g)}else{try{g.call()}catch(kt){ot=kt}it.call(g.prototype)}else{try{throw Error()}catch(kt){ot=kt}it()}}catch(kt){if(kt&&ot&&typeof kt.stack=="string"){for(var ct=kt.stack.split(`
`),ut=ot.stack.split(`
`),dt=ct.length-1,ft=ut.length-1;1<=dt&&0<=ft&&ct[dt]!==ut[ft];)ft--;for(;1<=dt&&0<=ft;dt--,ft--)if(ct[dt]!==ut[ft]){if(dt!==1||ft!==1)do if(dt--,ft--,0>ft||ct[dt]!==ut[ft]){var St=`
`+ct[dt].replace(" at new "," at ");return it.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",it.displayName)),St}while(1<=dt&&0<=ft);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var g=it.render;return it=it.displayName,it||(it=g.displayName||g.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return g=it.displayName||null,g!==null?g:Qa(it.type)||"Memo";case Ha:g=it._payload,it=it._init;try{return Qa(it(g))}catch{}}return null}function Ra(it){var g=it.type;switch(it.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=g.render,it=it.displayName||it.name||"",g.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var g=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(it){var g=Ta(it)?"checked":"value",et=Object.getOwnPropertyDescriptor(it.constructor.prototype,g),ot=""+it[g];if(!it.hasOwnProperty(g)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ct=et.get,ut=et.set;return Object.defineProperty(it,g,{configurable:!0,get:function(){return ct.call(this)},set:function(dt){ot=""+dt,ut.call(this,dt)}}),Object.defineProperty(it,g,{enumerable:et.enumerable}),{getValue:function(){return ot},setValue:function(dt){ot=""+dt},stopTracking:function(){it._valueTracker=null,delete it[g]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var g=it._valueTracker;if(!g)return!0;var et=g.getValue(),ot="";return it&&(ot=Ta(it)?it.checked?"true":"false":it.value),it=ot,it!==et?(g.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,g){var et=g.checked;return A$2({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??it._wrapperState.initialChecked})}function Za(it,g){var et=g.defaultValue==null?"":g.defaultValue,ot=g.checked!=null?g.checked:g.defaultChecked;et=Sa(g.value!=null?g.value:et),it._wrapperState={initialChecked:ot,initialValue:et,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(it,g){g=g.checked,g!=null&&ta$1(it,"checked",g,!1)}function bb(it,g){ab(it,g);var et=Sa(g.value),ot=g.type;if(et!=null)ot==="number"?(et===0&&it.value===""||it.value!=et)&&(it.value=""+et):it.value!==""+et&&(it.value=""+et);else if(ot==="submit"||ot==="reset"){it.removeAttribute("value");return}g.hasOwnProperty("value")?cb(it,g.type,et):g.hasOwnProperty("defaultValue")&&cb(it,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(it.defaultChecked=!!g.defaultChecked)}function db(it,g,et){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var ot=g.type;if(!(ot!=="submit"&&ot!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+it._wrapperState.initialValue,et||g===it.value||(it.value=g),it.defaultValue=g}et=it.name,et!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,et!==""&&(it.name=et)}function cb(it,g,et){(g!=="number"||Xa(it.ownerDocument)!==it)&&(et==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+et&&(it.defaultValue=""+et))}var eb=Array.isArray;function fb(it,g,et,ot){if(it=it.options,g){g={};for(var ct=0;ct<et.length;ct++)g["$"+et[ct]]=!0;for(et=0;et<it.length;et++)ct=g.hasOwnProperty("$"+it[et].value),it[et].selected!==ct&&(it[et].selected=ct),ct&&ot&&(it[et].defaultSelected=!0)}else{for(et=""+Sa(et),g=null,ct=0;ct<it.length;ct++){if(it[ct].value===et){it[ct].selected=!0,ot&&(it[ct].defaultSelected=!0);return}g!==null||it[ct].disabled||(g=it[ct])}g!==null&&(g.selected=!0)}}function gb(it,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},g,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,g){var et=g.value;if(et==null){if(et=g.children,g=g.defaultValue,et!=null){if(g!=null)throw Error(p$3(92));if(eb(et)){if(1<et.length)throw Error(p$3(93));et=et[0]}g=et}g==null&&(g=""),et=g}it._wrapperState={initialValue:Sa(et)}}function ib(it,g){var et=Sa(g.value),ot=Sa(g.defaultValue);et!=null&&(et=""+et,et!==it.value&&(it.value=et),g.defaultValue==null&&it.defaultValue!==et&&(it.defaultValue=et)),ot!=null&&(it.defaultValue=""+ot)}function jb(it){var g=it.textContent;g===it._wrapperState.initialValue&&g!==""&&g!==null&&(it.value=g)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,g){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(g):it==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,et,ot,ct){MSApp.execUnsafeLocalFunction(function(){return it(g,et,ot,ct)})}:it}(function(it,g){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;g.firstChild;)it.appendChild(g.firstChild)}});function ob(it,g){if(g){var et=it.firstChild;if(et&&et===it.lastChild&&et.nodeType===3){et.nodeValue=g;return}}it.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(g){g=g+it.charAt(0).toUpperCase()+it.substring(1),pb[g]=pb[it]})});function rb(it,g,et){return g==null||typeof g=="boolean"||g===""?"":et||typeof g!="number"||g===0||pb.hasOwnProperty(it)&&pb[it]?(""+g).trim():g+"px"}function sb(it,g){it=it.style;for(var et in g)if(g.hasOwnProperty(et)){var ot=et.indexOf("--")===0,ct=rb(et,g[et],ot);et==="float"&&(et="cssFloat"),ot?it.setProperty(et,ct):it[et]=ct}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,g){if(g){if(tb[it]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,it));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$3(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$3(62))}}function vb(it,g){if(it.indexOf("-")===-1)return typeof g.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$3(280));var g=it.stateNode;g&&(g=Db(g),yb(it.stateNode,it.type,g))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,g=Ab;if(Ab=zb=null,Bb(it),g)for(it=0;it<g.length;it++)Bb(g[it])}}function Gb(it,g){return it(g)}function Hb(){}var Ib=!1;function Jb(it,g,et){if(Ib)return it(g,et);Ib=!0;try{return Gb(it,g,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,g){var et=it.stateNode;if(et===null)return null;var ot=Db(et);if(ot===null)return null;et=ot[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ot=!ot.disabled)||(it=it.type,ot=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!ot;break e;default:it=!1}if(it)return null;if(et&&typeof et!="function")throw Error(p$3(231,g,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,g,et,ot,ct,ut,dt,ft,St){var kt=Array.prototype.slice.call(arguments,3);try{g.apply(et,kt)}catch(Tt){this.onError(Tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,g,et,ot,ct,ut,dt,ft,St){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,g,et,ot,ct,ut,dt,ft,St){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=kt)}}function Vb(it){var g=it,et=it;if(it.alternate)for(;g.return;)g=g.return;else{it=g;do g=it,g.flags&4098&&(et=g.return),it=g.return;while(it)}return g.tag===3?et:null}function Wb(it){if(it.tag===13){var g=it.memoizedState;if(g===null&&(it=it.alternate,it!==null&&(g=it.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$3(188))}function Yb(it){var g=it.alternate;if(!g){if(g=Vb(it),g===null)throw Error(p$3(188));return g!==it?null:it}for(var et=it,ot=g;;){var ct=et.return;if(ct===null)break;var ut=ct.alternate;if(ut===null){if(ot=ct.return,ot!==null){et=ot;continue}break}if(ct.child===ut.child){for(ut=ct.child;ut;){if(ut===et)return Xb(ct),it;if(ut===ot)return Xb(ct),g;ut=ut.sibling}throw Error(p$3(188))}if(et.return!==ot.return)et=ct,ot=ut;else{for(var dt=!1,ft=ct.child;ft;){if(ft===et){dt=!0,et=ct,ot=ut;break}if(ft===ot){dt=!0,ot=ct,et=ut;break}ft=ft.sibling}if(!dt){for(ft=ut.child;ft;){if(ft===et){dt=!0,et=ut,ot=ct;break}if(ft===ot){dt=!0,ot=ut,et=ct;break}ft=ft.sibling}if(!dt)throw Error(p$3(189))}}if(et.alternate!==ot)throw Error(p$3(190))}if(et.tag!==3)throw Error(p$3(188));return et.stateNode.current===et?it:g}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var g=$b(it);if(g!==null)return g;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(it){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,g){var et=it.pendingLanes;if(et===0)return 0;var ot=0,ct=it.suspendedLanes,ut=it.pingedLanes,dt=et&268435455;if(dt!==0){var ft=dt&~ct;ft!==0?ot=tc(ft):(ut&=dt,ut!==0&&(ot=tc(ut)))}else dt=et&~ct,dt!==0?ot=tc(dt):ut!==0&&(ot=tc(ut));if(ot===0)return 0;if(g!==0&&g!==ot&&!(g&ct)&&(ct=ot&-ot,ut=g&-g,ct>=ut||ct===16&&(ut&4194240)!==0))return g;if(ot&4&&(ot|=et&16),g=it.entangledLanes,g!==0)for(it=it.entanglements,g&=ot;0<g;)et=31-oc(g),ct=1<<et,ot|=it[et],g&=~ct;return ot}function vc(it,g){switch(it){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,g){for(var et=it.suspendedLanes,ot=it.pingedLanes,ct=it.expirationTimes,ut=it.pendingLanes;0<ut;){var dt=31-oc(ut),ft=1<<dt,St=ct[dt];St===-1?(!(ft&et)||ft&ot)&&(ct[dt]=vc(ft,g)):St<=g&&(it.expiredLanes|=ft),ut&=~ft}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,!(rc&4194240)&&(rc=64),it}function zc(it){for(var g=[],et=0;31>et;et++)g.push(it);return g}function Ac(it,g,et){it.pendingLanes|=g,g!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,g=31-oc(g),it[g]=et}function Bc(it,g){var et=it.pendingLanes&~g;it.pendingLanes=g,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=g,it.mutableReadLanes&=g,it.entangledLanes&=g,g=it.entanglements;var ot=it.eventTimes;for(it=it.expirationTimes;0<et;){var ct=31-oc(et),ut=1<<ct;g[ct]=0,ot[ct]=-1,it[ct]=-1,et&=~ut}}function Cc(it,g){var et=it.entangledLanes|=g;for(it=it.entanglements;et;){var ot=31-oc(et),ct=1<<ot;ct&g|it[ot]&g&&(it[ot]|=g),et&=~ct}}var C$4=0;function Dc(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,g){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(it,g,et,ot,ct,ut){return it===null||it.nativeEvent!==ut?(it={blockedOn:g,domEventName:et,eventSystemFlags:ot,nativeEvent:ut,targetContainers:[ct]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),it):(it.eventSystemFlags|=ot,g=it.targetContainers,ct!==null&&g.indexOf(ct)===-1&&g.push(ct),it)}function Uc(it,g,et,ot,ct){switch(g){case"focusin":return Lc=Tc(Lc,it,g,et,ot,ct),!0;case"dragenter":return Mc=Tc(Mc,it,g,et,ot,ct),!0;case"mouseover":return Nc=Tc(Nc,it,g,et,ot,ct),!0;case"pointerover":var ut=ct.pointerId;return Oc.set(ut,Tc(Oc.get(ut)||null,it,g,et,ot,ct)),!0;case"gotpointercapture":return ut=ct.pointerId,Pc.set(ut,Tc(Pc.get(ut)||null,it,g,et,ot,ct)),!0}return!1}function Vc(it){var g=Wc(it.target);if(g!==null){var et=Vb(g);if(et!==null){if(g=et.tag,g===13){if(g=Wb(et),g!==null){it.blockedOn=g,Ic(it.priority,function(){Gc(et)});return}}else if(g===3&&et.stateNode.current.memoizedState.isDehydrated){it.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var g=it.targetContainers;0<g.length;){var et=Yc(it.domEventName,it.eventSystemFlags,g[0],it.nativeEvent);if(et===null){et=it.nativeEvent;var ot=new et.constructor(et.type,et);wb=ot,et.target.dispatchEvent(ot),wb=null}else return g=Cb(et),g!==null&&Fc(g),it.blockedOn=et,!1;g.shift()}return!0}function Zc(it,g,et){Xc(it)&&et.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,g){it.blockedOn===g&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function g(ct){return ad(ct,it)}if(0<Kc.length){ad(Kc[0],it);for(var et=1;et<Kc.length;et++){var ot=Kc[et];ot.blockedOn===it&&(ot.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(g),Pc.forEach(g),et=0;et<Qc.length;et++)ot=Qc[et],ot.blockedOn===it&&(ot.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=1,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function gd(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=4,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function fd(it,g,et,ot){if(dd){var ct=Yc(it,g,et,ot);if(ct===null)hd(it,g,ot,id$2,et),Sc(it,ot);else if(Uc(ct,it,g,et,ot))ot.stopPropagation();else if(Sc(it,ot),g&4&&-1<Rc.indexOf(it)){for(;ct!==null;){var ut=Cb(ct);if(ut!==null&&Ec(ut),ut=Yc(it,g,et,ot),ut===null&&hd(it,g,ot,id$2,et),ut===ct)break;ct=ut}ct!==null&&ot.stopPropagation()}else hd(it,g,ot,null,et)}}var id$2=null;function Yc(it,g,et,ot){if(id$2=null,it=xb(ot),it=Wc(it),it!==null)if(g=Vb(it),g===null)it=null;else if(et=g.tag,et===13){if(it=Wb(g),it!==null)return it;it=null}else if(et===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;it=null}else g!==it&&(it=null);return id$2=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,g=ld,et=g.length,ot,ct="value"in kd?kd.value:kd.textContent,ut=ct.length;for(it=0;it<et&&g[it]===ct[it];it++);var dt=et-it;for(ot=1;ot<=dt&&g[et-ot]===ct[ut-ot];ot++);return md=ct.slice(it,1<ot?1-ot:void 0)}function od(it){var g=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&g===13&&(it=13)):it=g,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function g(et,ot,ct,ut,dt){this._reactName=et,this._targetInst=ct,this.type=ot,this.nativeEvent=ut,this.target=dt,this.currentTarget=null;for(var ft in it)it.hasOwnProperty(ft)&&(et=it[ft],this[ft]=et?et(ut):ut[ft]);return this.isDefaultPrevented=(ut.defaultPrevented!=null?ut.defaultPrevented:ut.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(it):(it=Od[it])?!!g[it]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(it){if(it.key){var g=Md[it.key]||it.key;if(g!=="Unidentified")return g}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe$1=!1;function ge(it,g){switch(it){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie$2=!1;function je$1(it,g){switch(it){case"compositionend":return he$1(g);case"keypress":return g.which!==32?null:(fe$1=!0,ee$1);case"textInput":return it=g.data,it===ee$1&&fe$1?null:it;default:return null}}function ke$1(it,g){if(ie$2)return it==="compositionend"||!ae&&ge(it,g)?(it=nd(),md=ld=kd=null,ie$2=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de$1&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g==="input"?!!le[it.type]:g==="textarea"}function ne(it,g,et,ot){Eb(ot),g=oe(g,"onChange"),0<g.length&&(et=new td("onChange","change",null,et,ot),it.push({event:et,listeners:g}))}var pe=null,qe=null;function re$2(it){se(it,0)}function te$2(it){var g=ue$1(it);if(Wa(g))return it}function ve(it,g){if(it==="change")return g}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe=pe=null)}function Be$1(it){if(it.propertyName==="value"&&te$2(qe)){var g=[];ne(g,qe,it,xb(it)),Jb(re$2,g)}}function Ce(it,g,et){it==="focusin"?(Ae$1(),pe=g,qe=et,pe.attachEvent("onpropertychange",Be$1)):it==="focusout"&&Ae$1()}function De$1(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$2(qe)}function Ee(it,g){if(it==="click")return te$2(g)}function Fe$1(it,g){if(it==="input"||it==="change")return te$2(g)}function Ge$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(it,g){if(He$2(it,g))return!0;if(typeof it!="object"||it===null||typeof g!="object"||g===null)return!1;var et=Object.keys(it),ot=Object.keys(g);if(et.length!==ot.length)return!1;for(ot=0;ot<et.length;ot++){var ct=et[ot];if(!ja.call(g,ct)||!He$2(it[ct],g[ct]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,g){var et=Je(it);it=0;for(var ot;et;){if(et.nodeType===3){if(ot=it+et.textContent.length,it<=g&&ot>=g)return{node:et,offset:g-it};it=ot}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le$1(it,g){return it&&g?it===g?!0:it&&it.nodeType===3?!1:g&&g.nodeType===3?Le$1(it,g.parentNode):"contains"in it?it.contains(g):it.compareDocumentPosition?!!(it.compareDocumentPosition(g)&16):!1:!1}function Me$1(){for(var it=window,g=Xa();g instanceof it.HTMLIFrameElement;){try{var et=typeof g.contentWindow.location.href=="string"}catch{et=!1}if(et)it=g.contentWindow;else break;g=Xa(it.document)}return g}function Ne$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g&&(g==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||g==="textarea"||it.contentEditable==="true")}function Oe$1(it){var g=Me$1(),et=it.focusedElem,ot=it.selectionRange;if(g!==et&&et&&et.ownerDocument&&Le$1(et.ownerDocument.documentElement,et)){if(ot!==null&&Ne$1(et)){if(g=ot.start,it=ot.end,it===void 0&&(it=g),"selectionStart"in et)et.selectionStart=g,et.selectionEnd=Math.min(it,et.value.length);else if(it=(g=et.ownerDocument||document)&&g.defaultView||window,it.getSelection){it=it.getSelection();var ct=et.textContent.length,ut=Math.min(ot.start,ct);ot=ot.end===void 0?ut:Math.min(ot.end,ct),!it.extend&&ut>ot&&(ct=ot,ot=ut,ut=ct),ct=Ke(et,ut);var dt=Ke(et,ot);ct&&dt&&(it.rangeCount!==1||it.anchorNode!==ct.node||it.anchorOffset!==ct.offset||it.focusNode!==dt.node||it.focusOffset!==dt.offset)&&(g=g.createRange(),g.setStart(ct.node,ct.offset),it.removeAllRanges(),ut>ot?(it.addRange(g),it.extend(dt.node,dt.offset)):(g.setEnd(dt.node,dt.offset),it.addRange(g)))}}for(g=[],it=et;it=it.parentNode;)it.nodeType===1&&g.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<g.length;et++)it=g[et],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(it,g,et){var ot=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(ot)||(ot=Qe,"selectionStart"in ot&&Ne$1(ot)?ot={start:ot.selectionStart,end:ot.selectionEnd}:(ot=(ot.ownerDocument&&ot.ownerDocument.defaultView||window).getSelection(),ot={anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}),Se$1&&Ie$2(Se$1,ot)||(Se$1=ot,ot=oe(Re,"onSelect"),0<ot.length&&(g=new td("onSelect","select",null,g,et),it.push({event:g,listeners:ot}),g.target=Qe)))}function Ve(it,g){var et={};return et[it.toLowerCase()]=g.toLowerCase(),et["Webkit"+it]="webkit"+g,et["Moz"+it]="moz"+g,et}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We$1[it])return it;var g=We$1[it],et;for(et in g)if(g.hasOwnProperty(et)&&et in Ye$1)return Xe[it]=g[et];return it}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,g){df.set(it,g),fa(g,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,g,et){var ot=it.type||"unknown-event";it.currentTarget=et,Ub(ot,g,void 0,it),it.currentTarget=null}function se(it,g){g=(g&4)!==0;for(var et=0;et<it.length;et++){var ot=it[et],ct=ot.event;ot=ot.listeners;e:{var ut=void 0;if(g)for(var dt=ot.length-1;0<=dt;dt--){var ft=ot[dt],St=ft.instance,kt=ft.currentTarget;if(ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}else for(dt=0;dt<ot.length;dt++){if(ft=ot[dt],St=ft.instance,kt=ft.currentTarget,ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$1(it,g){var et=g[of];et===void 0&&(et=g[of]=new Set);var ot=it+"__bubble";et.has(ot)||(pf(g,it,2,!1),et.add(ot))}function qf(it,g,et){var ot=0;g&&(ot|=4),pf(et,it,ot,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,it),qf(et,!0,it))});var g=it.nodeType===9?it:it.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(it,g,et,ot){switch(jd(g)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}et=ct.bind(null,g,et,it),ct=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(ct=!0),ot?ct!==void 0?it.addEventListener(g,et,{capture:!0,passive:ct}):it.addEventListener(g,et,!0):ct!==void 0?it.addEventListener(g,et,{passive:ct}):it.addEventListener(g,et,!1)}function hd(it,g,et,ot,ct){var ut=ot;if(!(g&1)&&!(g&2)&&ot!==null)e:for(;;){if(ot===null)return;var dt=ot.tag;if(dt===3||dt===4){var ft=ot.stateNode.containerInfo;if(ft===ct||ft.nodeType===8&&ft.parentNode===ct)break;if(dt===4)for(dt=ot.return;dt!==null;){var St=dt.tag;if((St===3||St===4)&&(St=dt.stateNode.containerInfo,St===ct||St.nodeType===8&&St.parentNode===ct))return;dt=dt.return}for(;ft!==null;){if(dt=Wc(ft),dt===null)return;if(St=dt.tag,St===5||St===6){ot=ut=dt;continue e}ft=ft.parentNode}}ot=ot.return}Jb(function(){var kt=ut,Tt=xb(et),jt=[];e:{var Rt=df.get(it);if(Rt!==void 0){var Ft=td,$t=it;switch(it){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":Ft=Rd;break;case"focusin":$t="focus",Ft=Fd;break;case"focusout":$t="blur",Ft=Fd;break;case"beforeblur":case"afterblur":Ft=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ft=Vd;break;case $e$1:case af:case bf:Ft=Hd;break;case cf:Ft=Xd;break;case"scroll":Ft=vd;break;case"wheel":Ft=Zd;break;case"copy":case"cut":case"paste":Ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ft=Td}var zt=(g&4)!==0,Kt=!zt&&it==="scroll",Bt=zt?Rt!==null?Rt+"Capture":null:Rt;zt=[];for(var Ut=kt,Jt;Ut!==null;){Jt=Ut;var en=Jt.stateNode;if(Jt.tag===5&&en!==null&&(Jt=en,Bt!==null&&(en=Kb(Ut,Bt),en!=null&&zt.push(tf(Ut,en,Jt)))),Kt)break;Ut=Ut.return}0<zt.length&&(Rt=new Ft(Rt,$t,null,et,Tt),jt.push({event:Rt,listeners:zt}))}}if(!(g&7)){e:{if(Rt=it==="mouseover"||it==="pointerover",Ft=it==="mouseout"||it==="pointerout",Rt&&et!==wb&&($t=et.relatedTarget||et.fromElement)&&(Wc($t)||$t[uf]))break e;if((Ft||Rt)&&(Rt=Tt.window===Tt?Tt:(Rt=Tt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,Ft?($t=et.relatedTarget||et.toElement,Ft=kt,$t=$t?Wc($t):null,$t!==null&&(Kt=Vb($t),$t!==Kt||$t.tag!==5&&$t.tag!==6)&&($t=null)):(Ft=null,$t=kt),Ft!==$t)){if(zt=Bd,en="onMouseLeave",Bt="onMouseEnter",Ut="mouse",(it==="pointerout"||it==="pointerover")&&(zt=Td,en="onPointerLeave",Bt="onPointerEnter",Ut="pointer"),Kt=Ft==null?Rt:ue$1(Ft),Jt=$t==null?Rt:ue$1($t),Rt=new zt(en,Ut+"leave",Ft,et,Tt),Rt.target=Kt,Rt.relatedTarget=Jt,en=null,Wc(Tt)===kt&&(zt=new zt(Bt,Ut+"enter",$t,et,Tt),zt.target=Jt,zt.relatedTarget=Kt,en=zt),Kt=en,Ft&&$t)t:{for(zt=Ft,Bt=$t,Ut=0,Jt=zt;Jt;Jt=vf(Jt))Ut++;for(Jt=0,en=Bt;en;en=vf(en))Jt++;for(;0<Ut-Jt;)zt=vf(zt),Ut--;for(;0<Jt-Ut;)Bt=vf(Bt),Jt--;for(;Ut--;){if(zt===Bt||Bt!==null&&zt===Bt.alternate)break t;zt=vf(zt),Bt=vf(Bt)}zt=null}else zt=null;Ft!==null&&wf(jt,Rt,Ft,zt,!1),$t!==null&&Kt!==null&&wf(jt,Kt,$t,zt,!0)}}e:{if(Rt=kt?ue$1(kt):window,Ft=Rt.nodeName&&Rt.nodeName.toLowerCase(),Ft==="select"||Ft==="input"&&Rt.type==="file")var tn=ve;else if(me$1(Rt))if(we$1)tn=Fe$1;else{tn=De$1;var nn=Ce}else(Ft=Rt.nodeName)&&Ft.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(tn=Ee);if(tn&&(tn=tn(it,kt))){ne(jt,tn,et,Tt);break e}nn&&nn(it,Rt,kt),it==="focusout"&&(nn=Rt._wrapperState)&&nn.controlled&&Rt.type==="number"&&cb(Rt,"number",Rt.value)}switch(nn=kt?ue$1(kt):window,it){case"focusin":(me$1(nn)||nn.contentEditable==="true")&&(Qe=nn,Re=kt,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(jt,et,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(jt,et,Tt)}var rn;if(ae)e:{switch(it){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else ie$2?ge(it,et)&&(on="onCompositionEnd"):it==="keydown"&&et.keyCode===229&&(on="onCompositionStart");on&&(de$1&&et.locale!=="ko"&&(ie$2||on!=="onCompositionStart"?on==="onCompositionEnd"&&ie$2&&(rn=nd()):(kd=Tt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),nn=oe(kt,on),0<nn.length&&(on=new Ld(on,it,null,et,Tt),jt.push({event:on,listeners:nn}),rn?on.data=rn:(rn=he$1(et),rn!==null&&(on.data=rn)))),(rn=ce?je$1(it,et):ke$1(it,et))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Tt=new Ld("onBeforeInput","beforeinput",null,et,Tt),jt.push({event:Tt,listeners:kt}),Tt.data=rn))}se(jt,g)})}function tf(it,g,et){return{instance:it,listener:g,currentTarget:et}}function oe(it,g){for(var et=g+"Capture",ot=[];it!==null;){var ct=it,ut=ct.stateNode;ct.tag===5&&ut!==null&&(ct=ut,ut=Kb(it,et),ut!=null&&ot.unshift(tf(it,ut,ct)),ut=Kb(it,g),ut!=null&&ot.push(tf(it,ut,ct))),it=it.return}return ot}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,g,et,ot,ct){for(var ut=g._reactName,dt=[];et!==null&&et!==ot;){var ft=et,St=ft.alternate,kt=ft.stateNode;if(St!==null&&St===ot)break;ft.tag===5&&kt!==null&&(ft=kt,ct?(St=Kb(et,ut),St!=null&&dt.unshift(tf(et,St,ft))):ct||(St=Kb(et,ut),St!=null&&dt.push(tf(et,St,ft)))),et=et.return}dt.length!==0&&it.push({event:g,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,g,et){if(g=zf(g),zf(it)!==g&&et)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,g){return it==="textarea"||it==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,g){var et=g,ot=0;do{var ct=et.nextSibling;if(it.removeChild(et),ct&&ct.nodeType===8)if(et=ct.data,et==="/$"){if(ot===0){it.removeChild(ct),bd(g);return}ot--}else et!=="$"&&et!=="$?"&&et!=="$!"||ot++;et=ct}while(et);bd(g)}function Lf(it){for(;it!=null;it=it.nextSibling){var g=it.nodeType;if(g===1||g===3)break;if(g===8){if(g=it.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="$"||et==="$!"||et==="$?"){if(g===0)return it;g--}else et==="/$"&&g++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var g=it[Of];if(g)return g;for(var et=it.parentNode;et;){if(g=et[uf]||et[Of]){if(et=g.alternate,g.child!==null||et!==null&&et.child!==null)for(it=Mf(it);it!==null;){if(et=it[Of])return et;it=Mf(it)}return g}it=et,et=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue$1(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$3(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$2(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,g){Tf++,Sf[Tf]=it.current,it.current=g}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,g){var et=it.type.contextTypes;if(!et)return Vf;var ot=it.stateNode;if(ot&&ot.__reactInternalMemoizedUnmaskedChildContext===g)return ot.__reactInternalMemoizedMaskedChildContext;var ct={},ut;for(ut in et)ct[ut]=g[ut];return ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=g,it.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(it,g,et){if(H$3.current!==Vf)throw Error(p$3(168));G$1(H$3,g),G$1(Wf,et)}function bg(it,g,et){var ot=it.stateNode;if(g=g.childContextTypes,typeof ot.getChildContext!="function")return et;ot=ot.getChildContext();for(var ct in ot)if(!(ct in g))throw Error(p$3(108,Ra(it)||"Unknown",ct));return A$2({},et,ot)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$1(H$3,it),G$1(Wf,Wf.current),!0}function dg(it,g,et){var ot=it.stateNode;if(!ot)throw Error(p$3(169));et?(it=bg(it,g,Xf),ot.__reactInternalMemoizedMergedChildContext=it,E$2(Wf),E$2(H$3),G$1(H$3,it)):E$2(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,g=C$4;try{var et=eg;for(C$4=1;it<et.length;it++){var ot=et[it];do ot=ot(!0);while(ot!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),ct}finally{C$4=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,g){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=g}function ug(it,g,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var ot=rg;it=sg;var ct=32-oc(ot)-1;ot&=~(1<<ct),et+=1;var ut=32-oc(g)+ct;if(30<ut){var dt=ct-ct%5;ut=(ot&(1<<dt)-1).toString(32),ot>>=dt,ct-=dt,rg=1<<32-oc(g)+ct|et<<ct|ot,sg=ut+it}else rg=1<<ut|et<<ct|ot,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(it,g){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=g,et.return=it,g=it.deletions,g===null?(it.deletions=[et],it.flags|=16):g.push(et)}function Cg(it,g){switch(it.tag){case 5:var et=it.type;return g=g.nodeType!==1||et.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(it.stateNode=g,xg=it,yg=Lf(g.firstChild),!0):!1;case 6:return g=it.pendingProps===""||g.nodeType!==3?null:g,g!==null?(it.stateNode=g,xg=it,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(et=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:g,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=g,et.return=it,it.child=et,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$4){var g=yg;if(g){var et=g;if(!Cg(it,g)){if(Dg(it))throw Error(p$3(418));g=Lf(et.nextSibling);var ot=xg;g&&Cg(it,g)?Ag(ot,et):(it.flags=it.flags&-4097|2,I$4=!1,xg=it)}}else{if(Dg(it))throw Error(p$3(418));it.flags=it.flags&-4097|2,I$4=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$4)return Fg(it),I$4=!0,!1;var g;if((g=it.tag!==3)&&!(g=it.tag!==5)&&(g=it.type,g=g!=="head"&&g!=="body"&&!Ef(it.type,it.memoizedProps)),g&&(g=yg)){if(Dg(it))throw Hg(),Error(p$3(418));for(;g;)Ag(it,g),g=Lf(g.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));e:{for(it=it.nextSibling,g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="/$"){if(g===0){yg=Lf(it.nextSibling);break e}g--}else et!=="$"&&et!=="$!"&&et!=="$?"||g++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,g,et){if(it=et.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$3(309));var ot=et.stateNode}if(!ot)throw Error(p$3(147,it));var ct=ot,ut=""+it;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===ut?g.ref:(g=function(dt){var ft=ct.refs;dt===null?delete ft[ut]:ft[ut]=dt},g._stringRef=ut,g)}if(typeof it!="string")throw Error(p$3(284));if(!et._owner)throw Error(p$3(290,it))}return it}function Mg(it,g){throw it=Object.prototype.toString.call(g),Error(p$3(31,it==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":it))}function Ng(it){var g=it._init;return g(it._payload)}function Og(it){function g(Bt,Ut){if(it){var Jt=Bt.deletions;Jt===null?(Bt.deletions=[Ut],Bt.flags|=16):Jt.push(Ut)}}function et(Bt,Ut){if(!it)return null;for(;Ut!==null;)g(Bt,Ut),Ut=Ut.sibling;return null}function ot(Bt,Ut){for(Bt=new Map;Ut!==null;)Ut.key!==null?Bt.set(Ut.key,Ut):Bt.set(Ut.index,Ut),Ut=Ut.sibling;return Bt}function ct(Bt,Ut){return Bt=Pg(Bt,Ut),Bt.index=0,Bt.sibling=null,Bt}function ut(Bt,Ut,Jt){return Bt.index=Jt,it?(Jt=Bt.alternate,Jt!==null?(Jt=Jt.index,Jt<Ut?(Bt.flags|=2,Ut):Jt):(Bt.flags|=2,Ut)):(Bt.flags|=1048576,Ut)}function dt(Bt){return it&&Bt.alternate===null&&(Bt.flags|=2),Bt}function ft(Bt,Ut,Jt,en){return Ut===null||Ut.tag!==6?(Ut=Qg(Jt,Bt.mode,en),Ut.return=Bt,Ut):(Ut=ct(Ut,Jt),Ut.return=Bt,Ut)}function St(Bt,Ut,Jt,en){var tn=Jt.type;return tn===ya?Tt(Bt,Ut,Jt.props.children,en,Jt.key):Ut!==null&&(Ut.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Ha&&Ng(tn)===Ut.type)?(en=ct(Ut,Jt.props),en.ref=Lg(Bt,Ut,Jt),en.return=Bt,en):(en=Rg(Jt.type,Jt.key,Jt.props,null,Bt.mode,en),en.ref=Lg(Bt,Ut,Jt),en.return=Bt,en)}function kt(Bt,Ut,Jt,en){return Ut===null||Ut.tag!==4||Ut.stateNode.containerInfo!==Jt.containerInfo||Ut.stateNode.implementation!==Jt.implementation?(Ut=Sg(Jt,Bt.mode,en),Ut.return=Bt,Ut):(Ut=ct(Ut,Jt.children||[]),Ut.return=Bt,Ut)}function Tt(Bt,Ut,Jt,en,tn){return Ut===null||Ut.tag!==7?(Ut=Tg(Jt,Bt.mode,en,tn),Ut.return=Bt,Ut):(Ut=ct(Ut,Jt),Ut.return=Bt,Ut)}function jt(Bt,Ut,Jt){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return Ut=Qg(""+Ut,Bt.mode,Jt),Ut.return=Bt,Ut;if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case va:return Jt=Rg(Ut.type,Ut.key,Ut.props,null,Bt.mode,Jt),Jt.ref=Lg(Bt,null,Ut),Jt.return=Bt,Jt;case wa:return Ut=Sg(Ut,Bt.mode,Jt),Ut.return=Bt,Ut;case Ha:var en=Ut._init;return jt(Bt,en(Ut._payload),Jt)}if(eb(Ut)||Ka(Ut))return Ut=Tg(Ut,Bt.mode,Jt,null),Ut.return=Bt,Ut;Mg(Bt,Ut)}return null}function Rt(Bt,Ut,Jt,en){var tn=Ut!==null?Ut.key:null;if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return tn!==null?null:ft(Bt,Ut,""+Jt,en);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:return Jt.key===tn?St(Bt,Ut,Jt,en):null;case wa:return Jt.key===tn?kt(Bt,Ut,Jt,en):null;case Ha:return tn=Jt._init,Rt(Bt,Ut,tn(Jt._payload),en)}if(eb(Jt)||Ka(Jt))return tn!==null?null:Tt(Bt,Ut,Jt,en,null);Mg(Bt,Jt)}return null}function Ft(Bt,Ut,Jt,en,tn){if(typeof en=="string"&&en!==""||typeof en=="number")return Bt=Bt.get(Jt)||null,ft(Ut,Bt,""+en,tn);if(typeof en=="object"&&en!==null){switch(en.$$typeof){case va:return Bt=Bt.get(en.key===null?Jt:en.key)||null,St(Ut,Bt,en,tn);case wa:return Bt=Bt.get(en.key===null?Jt:en.key)||null,kt(Ut,Bt,en,tn);case Ha:var nn=en._init;return Ft(Bt,Ut,Jt,nn(en._payload),tn)}if(eb(en)||Ka(en))return Bt=Bt.get(Jt)||null,Tt(Ut,Bt,en,tn,null);Mg(Ut,en)}return null}function $t(Bt,Ut,Jt,en){for(var tn=null,nn=null,rn=Ut,on=Ut=0,dn=null;rn!==null&&on<Jt.length;on++){rn.index>on?(dn=rn,rn=null):dn=rn.sibling;var cn=Rt(Bt,rn,Jt[on],en);if(cn===null){rn===null&&(rn=dn);break}it&&rn&&cn.alternate===null&&g(Bt,rn),Ut=ut(cn,Ut,on),nn===null?tn=cn:nn.sibling=cn,nn=cn,rn=dn}if(on===Jt.length)return et(Bt,rn),I$4&&tg(Bt,on),tn;if(rn===null){for(;on<Jt.length;on++)rn=jt(Bt,Jt[on],en),rn!==null&&(Ut=ut(rn,Ut,on),nn===null?tn=rn:nn.sibling=rn,nn=rn);return I$4&&tg(Bt,on),tn}for(rn=ot(Bt,rn);on<Jt.length;on++)dn=Ft(rn,Bt,on,Jt[on],en),dn!==null&&(it&&dn.alternate!==null&&rn.delete(dn.key===null?on:dn.key),Ut=ut(dn,Ut,on),nn===null?tn=dn:nn.sibling=dn,nn=dn);return it&&rn.forEach(function(fn){return g(Bt,fn)}),I$4&&tg(Bt,on),tn}function zt(Bt,Ut,Jt,en){var tn=Ka(Jt);if(typeof tn!="function")throw Error(p$3(150));if(Jt=tn.call(Jt),Jt==null)throw Error(p$3(151));for(var nn=tn=null,rn=Ut,on=Ut=0,dn=null,cn=Jt.next();rn!==null&&!cn.done;on++,cn=Jt.next()){rn.index>on?(dn=rn,rn=null):dn=rn.sibling;var fn=Rt(Bt,rn,cn.value,en);if(fn===null){rn===null&&(rn=dn);break}it&&rn&&fn.alternate===null&&g(Bt,rn),Ut=ut(fn,Ut,on),nn===null?tn=fn:nn.sibling=fn,nn=fn,rn=dn}if(cn.done)return et(Bt,rn),I$4&&tg(Bt,on),tn;if(rn===null){for(;!cn.done;on++,cn=Jt.next())cn=jt(Bt,cn.value,en),cn!==null&&(Ut=ut(cn,Ut,on),nn===null?tn=cn:nn.sibling=cn,nn=cn);return I$4&&tg(Bt,on),tn}for(rn=ot(Bt,rn);!cn.done;on++,cn=Jt.next())cn=Ft(rn,Bt,on,cn.value,en),cn!==null&&(it&&cn.alternate!==null&&rn.delete(cn.key===null?on:cn.key),Ut=ut(cn,Ut,on),nn===null?tn=cn:nn.sibling=cn,nn=cn);return it&&rn.forEach(function(mn){return g(Bt,mn)}),I$4&&tg(Bt,on),tn}function Kt(Bt,Ut,Jt,en){if(typeof Jt=="object"&&Jt!==null&&Jt.type===ya&&Jt.key===null&&(Jt=Jt.props.children),typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:e:{for(var tn=Jt.key,nn=Ut;nn!==null;){if(nn.key===tn){if(tn=Jt.type,tn===ya){if(nn.tag===7){et(Bt,nn.sibling),Ut=ct(nn,Jt.props.children),Ut.return=Bt,Bt=Ut;break e}}else if(nn.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Ha&&Ng(tn)===nn.type){et(Bt,nn.sibling),Ut=ct(nn,Jt.props),Ut.ref=Lg(Bt,nn,Jt),Ut.return=Bt,Bt=Ut;break e}et(Bt,nn);break}else g(Bt,nn);nn=nn.sibling}Jt.type===ya?(Ut=Tg(Jt.props.children,Bt.mode,en,Jt.key),Ut.return=Bt,Bt=Ut):(en=Rg(Jt.type,Jt.key,Jt.props,null,Bt.mode,en),en.ref=Lg(Bt,Ut,Jt),en.return=Bt,Bt=en)}return dt(Bt);case wa:e:{for(nn=Jt.key;Ut!==null;){if(Ut.key===nn)if(Ut.tag===4&&Ut.stateNode.containerInfo===Jt.containerInfo&&Ut.stateNode.implementation===Jt.implementation){et(Bt,Ut.sibling),Ut=ct(Ut,Jt.children||[]),Ut.return=Bt,Bt=Ut;break e}else{et(Bt,Ut);break}else g(Bt,Ut);Ut=Ut.sibling}Ut=Sg(Jt,Bt.mode,en),Ut.return=Bt,Bt=Ut}return dt(Bt);case Ha:return nn=Jt._init,Kt(Bt,Ut,nn(Jt._payload),en)}if(eb(Jt))return $t(Bt,Ut,Jt,en);if(Ka(Jt))return zt(Bt,Ut,Jt,en);Mg(Bt,Jt)}return typeof Jt=="string"&&Jt!==""||typeof Jt=="number"?(Jt=""+Jt,Ut!==null&&Ut.tag===6?(et(Bt,Ut.sibling),Ut=ct(Ut,Jt),Ut.return=Bt,Bt=Ut):(et(Bt,Ut),Ut=Qg(Jt,Bt.mode,en),Ut.return=Bt,Bt=Ut),dt(Bt)):et(Bt,Ut)}return Kt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(it){var g=Wg.current;E$2(Wg),it._currentValue=g}function bh(it,g,et){for(;it!==null;){var ot=it.alternate;if((it.childLanes&g)!==g?(it.childLanes|=g,ot!==null&&(ot.childLanes|=g)):ot!==null&&(ot.childLanes&g)!==g&&(ot.childLanes|=g),it===et)break;it=it.return}}function ch(it,g){Xg=it,Zg=Yg=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&g&&(dh=!0),it.firstContext=null)}function eh(it){var g=it._currentValue;if(Zg!==it)if(it={context:it,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=it,Xg.dependencies={lanes:0,firstContext:it}}else Yg=Yg.next=it;return g}var fh=null;function gh(it){fh===null?fh=[it]:fh.push(it)}function hh(it,g,et,ot){var ct=g.interleaved;return ct===null?(et.next=et,gh(g)):(et.next=ct.next,ct.next=et),g.interleaved=et,ih(it,ot)}function ih(it,g){it.lanes|=g;var et=it.alternate;for(et!==null&&(et.lanes|=g),et=it,it=it.return;it!==null;)it.childLanes|=g,et=it.alternate,et!==null&&(et.childLanes|=g),et=it,it=it.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(it,g){it=it.updateQueue,g.updateQueue===it&&(g.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function mh(it,g){return{eventTime:it,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(it,g,et){var ot=it.updateQueue;if(ot===null)return null;if(ot=ot.shared,K$2&2){var ct=ot.pending;return ct===null?g.next=g:(g.next=ct.next,ct.next=g),ot.pending=g,ih(it,et)}return ct=ot.interleaved,ct===null?(g.next=g,gh(ot)):(g.next=ct.next,ct.next=g),ot.interleaved=g,ih(it,et)}function oh(it,g,et){if(g=g.updateQueue,g!==null&&(g=g.shared,(et&4194240)!==0)){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}function ph(it,g){var et=it.updateQueue,ot=it.alternate;if(ot!==null&&(ot=ot.updateQueue,et===ot)){var ct=null,ut=null;if(et=et.firstBaseUpdate,et!==null){do{var dt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};ut===null?ct=ut=dt:ut=ut.next=dt,et=et.next}while(et!==null);ut===null?ct=ut=g:ut=ut.next=g}else ct=ut=g;et={baseState:ot.baseState,firstBaseUpdate:ct,lastBaseUpdate:ut,shared:ot.shared,effects:ot.effects},it.updateQueue=et;return}it=et.lastBaseUpdate,it===null?et.firstBaseUpdate=g:it.next=g,et.lastBaseUpdate=g}function qh(it,g,et,ot){var ct=it.updateQueue;jh=!1;var ut=ct.firstBaseUpdate,dt=ct.lastBaseUpdate,ft=ct.shared.pending;if(ft!==null){ct.shared.pending=null;var St=ft,kt=St.next;St.next=null,dt===null?ut=kt:dt.next=kt,dt=St;var Tt=it.alternate;Tt!==null&&(Tt=Tt.updateQueue,ft=Tt.lastBaseUpdate,ft!==dt&&(ft===null?Tt.firstBaseUpdate=kt:ft.next=kt,Tt.lastBaseUpdate=St))}if(ut!==null){var jt=ct.baseState;dt=0,Tt=kt=St=null,ft=ut;do{var Rt=ft.lane,Ft=ft.eventTime;if((ot&Rt)===Rt){Tt!==null&&(Tt=Tt.next={eventTime:Ft,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var $t=it,zt=ft;switch(Rt=g,Ft=et,zt.tag){case 1:if($t=zt.payload,typeof $t=="function"){jt=$t.call(Ft,jt,Rt);break e}jt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=zt.payload,Rt=typeof $t=="function"?$t.call(Ft,jt,Rt):$t,Rt==null)break e;jt=A$2({},jt,Rt);break e;case 2:jh=!0}}ft.callback!==null&&ft.lane!==0&&(it.flags|=64,Rt=ct.effects,Rt===null?ct.effects=[ft]:Rt.push(ft))}else Ft={eventTime:Ft,lane:Rt,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Tt===null?(kt=Tt=Ft,St=jt):Tt=Tt.next=Ft,dt|=Rt;if(ft=ft.next,ft===null){if(ft=ct.shared.pending,ft===null)break;Rt=ft,ft=Rt.next,Rt.next=null,ct.lastBaseUpdate=Rt,ct.shared.pending=null}}while(1);if(Tt===null&&(St=jt),ct.baseState=St,ct.firstBaseUpdate=kt,ct.lastBaseUpdate=Tt,g=ct.shared.interleaved,g!==null){ct=g;do dt|=ct.lane,ct=ct.next;while(ct!==g)}else ut===null&&(ct.shared.lanes=0);rh|=dt,it.lanes=dt,it.memoizedState=jt}}function sh(it,g,et){if(it=g.effects,g.effects=null,it!==null)for(g=0;g<it.length;g++){var ot=it[g],ct=ot.callback;if(ct!==null){if(ot.callback=null,ot=et,typeof ct!="function")throw Error(p$3(191,ct));ct.call(ot)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(it){if(it===th)throw Error(p$3(174));return it}function yh(it,g){switch(G$1(wh,g),G$1(vh$1,it),G$1(uh,th),it=g.nodeType,it){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:it=it===8?g.parentNode:g,g=it.namespaceURI||null,it=it.tagName,g=lb(g,it)}E$2(uh),G$1(uh,g)}function zh(){E$2(uh),E$2(vh$1),E$2(wh)}function Ah(it){xh(wh.current);var g=xh(uh.current),et=lb(g,it.type);g!==et&&(G$1(vh$1,it),G$1(uh,et))}function Bh(it){vh$1.current===it&&(E$2(uh),E$2(vh$1))}var L$3=Uf(0);function Ch(it){for(var g=it;g!==null;){if(g.tag===13){var et=g.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var it=0;it<Dh.length;it++)Dh[it]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$2=null,O$4=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(it,g){if(g===null)return!1;for(var et=0;et<g.length&&et<it.length;et++)if(!He$2(it[et],g[et]))return!1;return!0}function Nh(it,g,et,ot,ct,ut){if(Hh=ut,M$3=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=it===null||it.memoizedState===null?Oh:Ph,it=et(ot,ct),Jh){ut=0;do{if(Jh=!1,Kh=0,25<=ut)throw Error(p$3(301));ut+=1,O$4=N$2=null,g.updateQueue=null,Fh.current=Qh,it=et(ot,ct)}while(Jh)}if(Fh.current=Rh,g=N$2!==null&&N$2.next!==null,Hh=0,O$4=N$2=M$3=null,Ih=!1,g)throw Error(p$3(300));return it}function Sh(){var it=Kh!==0;return Kh=0,it}function Th(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it,O$4}function Uh(){if(N$2===null){var it=M$3.alternate;it=it!==null?it.memoizedState:null}else it=N$2.next;var g=O$4===null?M$3.memoizedState:O$4.next;if(g!==null)O$4=g,N$2=it;else{if(it===null)throw Error(p$3(310));N$2=it,it={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it}return O$4}function Vh(it,g){return typeof g=="function"?g(it):g}function Wh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=N$2,ct=ot.baseQueue,ut=et.pending;if(ut!==null){if(ct!==null){var dt=ct.next;ct.next=ut.next,ut.next=dt}ot.baseQueue=ct=ut,et.pending=null}if(ct!==null){ut=ct.next,ot=ot.baseState;var ft=dt=null,St=null,kt=ut;do{var Tt=kt.lane;if((Hh&Tt)===Tt)St!==null&&(St=St.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ot=kt.hasEagerState?kt.eagerState:it(ot,kt.action);else{var jt={lane:Tt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};St===null?(ft=St=jt,dt=ot):St=St.next=jt,M$3.lanes|=Tt,rh|=Tt}kt=kt.next}while(kt!==null&&kt!==ut);St===null?dt=ot:St.next=ft,He$2(ot,g.memoizedState)||(dh=!0),g.memoizedState=ot,g.baseState=dt,g.baseQueue=St,et.lastRenderedState=ot}if(it=et.interleaved,it!==null){ct=it;do ut=ct.lane,M$3.lanes|=ut,rh|=ut,ct=ct.next;while(ct!==it)}else ct===null&&(et.lanes=0);return[g.memoizedState,et.dispatch]}function Xh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=et.dispatch,ct=et.pending,ut=g.memoizedState;if(ct!==null){et.pending=null;var dt=ct=ct.next;do ut=it(ut,dt.action),dt=dt.next;while(dt!==ct);He$2(ut,g.memoizedState)||(dh=!0),g.memoizedState=ut,g.baseQueue===null&&(g.baseState=ut),et.lastRenderedState=ut}return[ut,ot]}function Yh(){}function Zh(it,g){var et=M$3,ot=Uh(),ct=g(),ut=!He$2(ot.memoizedState,ct);if(ut&&(ot.memoizedState=ct,dh=!0),ot=ot.queue,$h(ai.bind(null,et,ot,it),[it]),ot.getSnapshot!==g||ut||O$4!==null&&O$4.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,ot,ct,g),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(et,g,ct)}return ct}function di(it,g,et){it.flags|=16384,it={getSnapshot:g,value:et},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.stores=[it]):(et=g.stores,et===null?g.stores=[it]:et.push(it))}function ci(it,g,et,ot){g.value=et,g.getSnapshot=ot,ei(g)&&fi(it)}function ai(it,g,et){return et(function(){ei(g)&&fi(it)})}function ei(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!He$2(it,et)}catch{return!0}}function fi(it){var g=ih(it,1);g!==null&&gi(g,it,1,-1)}function hi(it){var g=Th();return typeof it=="function"&&(it=it()),g.memoizedState=g.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:it},g.queue=it,it=it.dispatch=ii.bind(null,M$3,it),[g.memoizedState,it]}function bi(it,g,et,ot){return it={tag:it,create:g,destroy:et,deps:ot,next:null},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.lastEffect=it.next=it):(et=g.lastEffect,et===null?g.lastEffect=it.next=it:(ot=et.next,et.next=it,it.next=ot,g.lastEffect=it)),it}function ji(){return Uh().memoizedState}function ki(it,g,et,ot){var ct=Th();M$3.flags|=it,ct.memoizedState=bi(1|g,et,void 0,ot===void 0?null:ot)}function li(it,g,et,ot){var ct=Uh();ot=ot===void 0?null:ot;var ut=void 0;if(N$2!==null){var dt=N$2.memoizedState;if(ut=dt.destroy,ot!==null&&Mh(ot,dt.deps)){ct.memoizedState=bi(g,et,ut,ot);return}}M$3.flags|=it,ct.memoizedState=bi(1|g,et,ut,ot)}function mi(it,g){return ki(8390656,8,it,g)}function $h(it,g){return li(2048,8,it,g)}function ni(it,g){return li(4,2,it,g)}function oi(it,g){return li(4,4,it,g)}function pi(it,g){if(typeof g=="function")return it=it(),g(it),function(){g(null)};if(g!=null)return it=it(),g.current=it,function(){g.current=null}}function qi(it,g,et){return et=et!=null?et.concat([it]):null,li(4,4,pi.bind(null,g,it),et)}function ri(){}function si(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(et.memoizedState=[it,g],it)}function ti(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(it=it(),et.memoizedState=[it,g],it)}function ui(it,g,et){return Hh&21?(He$2(et,g)||(et=yc(),M$3.lanes|=et,rh|=et,it.baseState=!0),g):(it.baseState&&(it.baseState=!1,dh=!0),it.memoizedState=et)}function vi(it,g){var et=C$4;C$4=et!==0&&4>et?et:4,it(!0);var ot=Gh.transition;Gh.transition={};try{it(!1),g()}finally{C$4=et,Gh.transition=ot}}function wi(){return Uh().memoizedState}function xi(it,g,et){var ot=yi(it);if(et={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null},zi(it))Ai(g,et);else if(et=hh(it,g,et,ot),et!==null){var ct=R$3();gi(et,it,ot,ct),Bi(et,g,ot)}}function ii(it,g,et){var ot=yi(it),ct={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(it))Ai(g,ct);else{var ut=it.alternate;if(it.lanes===0&&(ut===null||ut.lanes===0)&&(ut=g.lastRenderedReducer,ut!==null))try{var dt=g.lastRenderedState,ft=ut(dt,et);if(ct.hasEagerState=!0,ct.eagerState=ft,He$2(ft,dt)){var St=g.interleaved;St===null?(ct.next=ct,gh(g)):(ct.next=St.next,St.next=ct),g.interleaved=ct;return}}catch{}finally{}et=hh(it,g,ct,ot),et!==null&&(ct=R$3(),gi(et,it,ot,ct),Bi(et,g,ot))}}function zi(it){var g=it.alternate;return it===M$3||g!==null&&g===M$3}function Ai(it,g){Jh=Ih=!0;var et=it.pending;et===null?g.next=g:(g.next=et.next,et.next=g),it.pending=g}function Bi(it,g,et){if(et&4194240){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(it,g){return Th().memoizedState=[it,g===void 0?null:g],it},useContext:eh,useEffect:mi,useImperativeHandle:function(it,g,et){return et=et!=null?et.concat([it]):null,ki(4194308,4,pi.bind(null,g,it),et)},useLayoutEffect:function(it,g){return ki(4194308,4,it,g)},useInsertionEffect:function(it,g){return ki(4,2,it,g)},useMemo:function(it,g){var et=Th();return g=g===void 0?null:g,it=it(),et.memoizedState=[it,g],it},useReducer:function(it,g,et){var ot=Th();return g=et!==void 0?et(g):g,ot.memoizedState=ot.baseState=g,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:g},ot.queue=it,it=it.dispatch=xi.bind(null,M$3,it),[ot.memoizedState,it]},useRef:function(it){var g=Th();return it={current:it},g.memoizedState=it},useState:hi,useDebugValue:ri,useDeferredValue:function(it){return Th().memoizedState=it},useTransition:function(){var it=hi(!1),g=it[0];return it=vi.bind(null,it[1]),Th().memoizedState=it,[g,it]},useMutableSource:function(){},useSyncExternalStore:function(it,g,et){var ot=M$3,ct=Th();if(I$4){if(et===void 0)throw Error(p$3(407));et=et()}else{if(et=g(),Q$1===null)throw Error(p$3(349));Hh&30||di(ot,g,et)}ct.memoizedState=et;var ut={value:et,getSnapshot:g};return ct.queue=ut,mi(ai.bind(null,ot,ut,it),[it]),ot.flags|=2048,bi(9,ci.bind(null,ot,ut,et,g),void 0,null),et},useId:function(){var it=Th(),g=Q$1.identifierPrefix;if(I$4){var et=sg,ot=rg;et=(ot&~(1<<32-oc(ot)-1)).toString(32)+et,g=":"+g+"R"+et,et=Kh++,0<et&&(g+="H"+et.toString(32)),g+=":"}else et=Lh++,g=":"+g+"r"+et.toString(32)+":";return it.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Wh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return N$2===null?g.memoizedState=it:ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Xh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(it,g){if(it&&it.defaultProps){g=A$2({},g),it=it.defaultProps;for(var et in it)g[et]===void 0&&(g[et]=it[et]);return g}return g}function Di(it,g,et,ot){g=it.memoizedState,et=et(ot,g),et=et==null?g:A$2({},g,et),it.memoizedState=et,it.lanes===0&&(it.updateQueue.baseState=et)}var Ei={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueReplaceState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.tag=1,ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueForceUpdate:function(it,g){it=it._reactInternals;var et=R$3(),ot=yi(it),ct=mh(et,ot);ct.tag=2,g!=null&&(ct.callback=g),g=nh(it,ct,ot),g!==null&&(gi(g,it,ot,et),oh(g,it,ot))}};function Fi(it,g,et,ot,ct,ut,dt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(ot,ut,dt):g.prototype&&g.prototype.isPureReactComponent?!Ie$2(et,ot)||!Ie$2(ct,ut):!0}function Gi(it,g,et){var ot=!1,ct=Vf,ut=g.contextType;return typeof ut=="object"&&ut!==null?ut=eh(ut):(ct=Zf(g)?Xf:H$3.current,ot=g.contextTypes,ut=(ot=ot!=null)?Yf(it,ct):Vf),g=new g(et,ut),it.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,it.stateNode=g,g._reactInternals=it,ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=ct,it.__reactInternalMemoizedMaskedChildContext=ut),g}function Hi(it,g,et,ot){it=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(et,ot),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(et,ot),g.state!==it&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(it,g,et,ot){var ct=it.stateNode;ct.props=et,ct.state=it.memoizedState,ct.refs={},kh(it);var ut=g.contextType;typeof ut=="object"&&ut!==null?ct.context=eh(ut):(ut=Zf(g)?Xf:H$3.current,ct.context=Yf(it,ut)),ct.state=it.memoizedState,ut=g.getDerivedStateFromProps,typeof ut=="function"&&(Di(it,g,ut,et),ct.state=it.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(g=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),g!==ct.state&&Ei.enqueueReplaceState(ct,ct.state,null),qh(it,et,ct,ot),ct.state=it.memoizedState),typeof ct.componentDidMount=="function"&&(it.flags|=4194308)}function Ji(it,g){try{var et="",ot=g;do et+=Pa(ot),ot=ot.return;while(ot);var ct=et}catch(ut){ct=`
Error generating stack: `+ut.message+`
`+ut.stack}return{value:it,source:g,stack:ct,digest:null}}function Ki(it,g,et){return{value:it,source:null,stack:et??null,digest:g??null}}function Li(it,g){try{console.error(g.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(it,g,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var ot=g.value;return et.callback=function(){Oi||(Oi=!0,Pi=ot),Li(it,g)},et}function Qi(it,g,et){et=mh(-1,et),et.tag=3;var ot=it.type.getDerivedStateFromError;if(typeof ot=="function"){var ct=g.value;et.payload=function(){return ot(ct)},et.callback=function(){Li(it,g)}}var ut=it.stateNode;return ut!==null&&typeof ut.componentDidCatch=="function"&&(et.callback=function(){Li(it,g),typeof ot!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var dt=g.stack;this.componentDidCatch(g.value,{componentStack:dt!==null?dt:""})}),et}function Si(it,g,et){var ot=it.pingCache;if(ot===null){ot=it.pingCache=new Mi;var ct=new Set;ot.set(g,ct)}else ct=ot.get(g),ct===void 0&&(ct=new Set,ot.set(g,ct));ct.has(et)||(ct.add(et),it=Ti.bind(null,it,g,et),g.then(it,it))}function Ui(it){do{var g;if((g=it.tag===13)&&(g=it.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return it;it=it.return}while(it!==null);return null}function Vi(it,g,et,ot,ct){return it.mode&1?(it.flags|=65536,it.lanes=ct,it):(it===g?it.flags|=65536:(it.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(g=mh(-1,1),g.tag=2,nh(et,g,1))),et.lanes|=1),it)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(it,g,et,ot){g.child=it===null?Vg(g,null,et,ot):Ug(g,it.child,et,ot)}function Yi(it,g,et,ot,ct){et=et.render;var ut=g.ref;return ch(g,ct),ot=Nh(it,g,et,ot,ut,ct),et=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&et&&vg(g),g.flags|=1,Xi(it,g,ot,ct),g.child)}function $i(it,g,et,ot,ct){if(it===null){var ut=et.type;return typeof ut=="function"&&!aj(ut)&&ut.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(g.tag=15,g.type=ut,bj(it,g,ut,ot,ct)):(it=Rg(et.type,null,ot,g,g.mode,ct),it.ref=g.ref,it.return=g,g.child=it)}if(ut=it.child,!(it.lanes&ct)){var dt=ut.memoizedProps;if(et=et.compare,et=et!==null?et:Ie$2,et(dt,ot)&&it.ref===g.ref)return Zi(it,g,ct)}return g.flags|=1,it=Pg(ut,ot),it.ref=g.ref,it.return=g,g.child=it}function bj(it,g,et,ot,ct){if(it!==null){var ut=it.memoizedProps;if(Ie$2(ut,ot)&&it.ref===g.ref)if(dh=!1,g.pendingProps=ot=ut,(it.lanes&ct)!==0)it.flags&131072&&(dh=!0);else return g.lanes=it.lanes,Zi(it,g,ct)}return cj(it,g,et,ot,ct)}function dj(it,g,et){var ot=g.pendingProps,ct=ot.children,ut=it!==null?it.memoizedState:null;if(ot.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=et;else{if(!(et&1073741824))return it=ut!==null?ut.baseLanes|et:et,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:it,cachePool:null,transitions:null},g.updateQueue=null,G$1(ej,fj),fj|=it,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot=ut!==null?ut.baseLanes:et,G$1(ej,fj),fj|=ot}else ut!==null?(ot=ut.baseLanes|et,g.memoizedState=null):ot=et,G$1(ej,fj),fj|=ot;return Xi(it,g,ct,et),g.child}function gj(it,g){var et=g.ref;(it===null&&et!==null||it!==null&&it.ref!==et)&&(g.flags|=512,g.flags|=2097152)}function cj(it,g,et,ot,ct){var ut=Zf(et)?Xf:H$3.current;return ut=Yf(g,ut),ch(g,ct),et=Nh(it,g,et,ot,ut,ct),ot=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&ot&&vg(g),g.flags|=1,Xi(it,g,et,ct),g.child)}function hj(it,g,et,ot,ct){if(Zf(et)){var ut=!0;cg(g)}else ut=!1;if(ch(g,ct),g.stateNode===null)ij(it,g),Gi(g,et,ot),Ii(g,et,ot,ct),ot=!0;else if(it===null){var dt=g.stateNode,ft=g.memoizedProps;dt.props=ft;var St=dt.context,kt=et.contextType;typeof kt=="object"&&kt!==null?kt=eh(kt):(kt=Zf(et)?Xf:H$3.current,kt=Yf(g,kt));var Tt=et.getDerivedStateFromProps,jt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";jt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==ot||St!==kt)&&Hi(g,dt,ot,kt),jh=!1;var Rt=g.memoizedState;dt.state=Rt,qh(g,ot,dt,ct),St=g.memoizedState,ft!==ot||Rt!==St||Wf.current||jh?(typeof Tt=="function"&&(Di(g,et,Tt,ot),St=g.memoizedState),(ft=jh||Fi(g,et,ft,ot,Rt,St,kt))?(jt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=ot,g.memoizedState=St),dt.props=ot,dt.state=St,dt.context=kt,ot=ft):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),ot=!1)}else{dt=g.stateNode,lh(it,g),ft=g.memoizedProps,kt=g.type===g.elementType?ft:Ci(g.type,ft),dt.props=kt,jt=g.pendingProps,Rt=dt.context,St=et.contextType,typeof St=="object"&&St!==null?St=eh(St):(St=Zf(et)?Xf:H$3.current,St=Yf(g,St));var Ft=et.getDerivedStateFromProps;(Tt=typeof Ft=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==jt||Rt!==St)&&Hi(g,dt,ot,St),jh=!1,Rt=g.memoizedState,dt.state=Rt,qh(g,ot,dt,ct);var $t=g.memoizedState;ft!==jt||Rt!==$t||Wf.current||jh?(typeof Ft=="function"&&(Di(g,et,Ft,ot),$t=g.memoizedState),(kt=jh||Fi(g,et,kt,ot,Rt,$t,St)||!1)?(Tt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(ot,$t,St),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(ot,$t,St)),typeof dt.componentDidUpdate=="function"&&(g.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&Rt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&Rt===it.memoizedState||(g.flags|=1024),g.memoizedProps=ot,g.memoizedState=$t),dt.props=ot,dt.state=$t,dt.context=St,ot=kt):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&Rt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&Rt===it.memoizedState||(g.flags|=1024),ot=!1)}return jj(it,g,et,ot,ut,ct)}function jj(it,g,et,ot,ct,ut){gj(it,g);var dt=(g.flags&128)!==0;if(!ot&&!dt)return ct&&dg(g,et,!1),Zi(it,g,ut);ot=g.stateNode,Wi.current=g;var ft=dt&&typeof et.getDerivedStateFromError!="function"?null:ot.render();return g.flags|=1,it!==null&&dt?(g.child=Ug(g,it.child,null,ut),g.child=Ug(g,null,ft,ut)):Xi(it,g,ft,ut),g.memoizedState=ot.state,ct&&dg(g,et,!0),g.child}function kj(it){var g=it.stateNode;g.pendingContext?ag(it,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(it,g.context,!1),yh(it,g.containerInfo)}function lj(it,g,et,ot,ct){return Ig(),Jg(ct),g.flags|=256,Xi(it,g,et,ot),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(it){return{baseLanes:it,cachePool:null,transitions:null}}function oj(it,g,et){var ot=g.pendingProps,ct=L$3.current,ut=!1,dt=(g.flags&128)!==0,ft;if((ft=dt)||(ft=it!==null&&it.memoizedState===null?!1:(ct&2)!==0),ft?(ut=!0,g.flags&=-129):(it===null||it.memoizedState!==null)&&(ct|=1),G$1(L$3,ct&1),it===null)return Eg(g),it=g.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(g.mode&1?it.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(dt=ot.children,it=ot.fallback,ut?(ot=g.mode,ut=g.child,dt={mode:"hidden",children:dt},!(ot&1)&&ut!==null?(ut.childLanes=0,ut.pendingProps=dt):ut=pj(dt,ot,0,null),it=Tg(it,ot,et,null),ut.return=g,it.return=g,ut.sibling=it,g.child=ut,g.child.memoizedState=nj(et),g.memoizedState=mj,it):qj(g,dt));if(ct=it.memoizedState,ct!==null&&(ft=ct.dehydrated,ft!==null))return rj(it,g,dt,ot,ft,ct,et);if(ut){ut=ot.fallback,dt=g.mode,ct=it.child,ft=ct.sibling;var St={mode:"hidden",children:ot.children};return!(dt&1)&&g.child!==ct?(ot=g.child,ot.childLanes=0,ot.pendingProps=St,g.deletions=null):(ot=Pg(ct,St),ot.subtreeFlags=ct.subtreeFlags&14680064),ft!==null?ut=Pg(ft,ut):(ut=Tg(ut,dt,et,null),ut.flags|=2),ut.return=g,ot.return=g,ot.sibling=ut,g.child=ot,ot=ut,ut=g.child,dt=it.child.memoizedState,dt=dt===null?nj(et):{baseLanes:dt.baseLanes|et,cachePool:null,transitions:dt.transitions},ut.memoizedState=dt,ut.childLanes=it.childLanes&~et,g.memoizedState=mj,ot}return ut=it.child,it=ut.sibling,ot=Pg(ut,{mode:"visible",children:ot.children}),!(g.mode&1)&&(ot.lanes=et),ot.return=g,ot.sibling=null,it!==null&&(et=g.deletions,et===null?(g.deletions=[it],g.flags|=16):et.push(it)),g.child=ot,g.memoizedState=null,ot}function qj(it,g){return g=pj({mode:"visible",children:g},it.mode,0,null),g.return=it,it.child=g}function sj(it,g,et,ot){return ot!==null&&Jg(ot),Ug(g,it.child,null,et),it=qj(g,g.pendingProps.children),it.flags|=2,g.memoizedState=null,it}function rj(it,g,et,ot,ct,ut,dt){if(et)return g.flags&256?(g.flags&=-257,ot=Ki(Error(p$3(422))),sj(it,g,dt,ot)):g.memoizedState!==null?(g.child=it.child,g.flags|=128,null):(ut=ot.fallback,ct=g.mode,ot=pj({mode:"visible",children:ot.children},ct,0,null),ut=Tg(ut,ct,dt,null),ut.flags|=2,ot.return=g,ut.return=g,ot.sibling=ut,g.child=ot,g.mode&1&&Ug(g,it.child,null,dt),g.child.memoizedState=nj(dt),g.memoizedState=mj,ut);if(!(g.mode&1))return sj(it,g,dt,null);if(ct.data==="$!"){if(ot=ct.nextSibling&&ct.nextSibling.dataset,ot)var ft=ot.dgst;return ot=ft,ut=Error(p$3(419)),ot=Ki(ut,ot,void 0),sj(it,g,dt,ot)}if(ft=(dt&it.childLanes)!==0,dh||ft){if(ot=Q$1,ot!==null){switch(dt&-dt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(ot.suspendedLanes|dt)?0:ct,ct!==0&&ct!==ut.retryLane&&(ut.retryLane=ct,ih(it,ct),gi(ot,it,ct,-1))}return tj(),ot=Ki(Error(p$3(421))),sj(it,g,dt,ot)}return ct.data==="$?"?(g.flags|=128,g.child=it.child,g=uj.bind(null,it),ct._reactRetry=g,null):(it=ut.treeContext,yg=Lf(ct.nextSibling),xg=g,I$4=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=g),g=qj(g,ot.children),g.flags|=4096,g)}function vj(it,g,et){it.lanes|=g;var ot=it.alternate;ot!==null&&(ot.lanes|=g),bh(it.return,g,et)}function wj(it,g,et,ot,ct){var ut=it.memoizedState;ut===null?it.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:ot,tail:et,tailMode:ct}:(ut.isBackwards=g,ut.rendering=null,ut.renderingStartTime=0,ut.last=ot,ut.tail=et,ut.tailMode=ct)}function xj(it,g,et){var ot=g.pendingProps,ct=ot.revealOrder,ut=ot.tail;if(Xi(it,g,ot.children,et),ot=L$3.current,ot&2)ot=ot&1|2,g.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=g.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&vj(it,et,g);else if(it.tag===19)vj(it,et,g);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===g)break e;for(;it.sibling===null;){if(it.return===null||it.return===g)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}ot&=1}if(G$1(L$3,ot),!(g.mode&1))g.memoizedState=null;else switch(ct){case"forwards":for(et=g.child,ct=null;et!==null;)it=et.alternate,it!==null&&Ch(it)===null&&(ct=et),et=et.sibling;et=ct,et===null?(ct=g.child,g.child=null):(ct=et.sibling,et.sibling=null),wj(g,!1,ct,et,ut);break;case"backwards":for(et=null,ct=g.child,g.child=null;ct!==null;){if(it=ct.alternate,it!==null&&Ch(it)===null){g.child=ct;break}it=ct.sibling,ct.sibling=et,et=ct,ct=it}wj(g,!0,et,null,ut);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(it,g){!(g.mode&1)&&it!==null&&(it.alternate=null,g.alternate=null,g.flags|=2)}function Zi(it,g,et){if(it!==null&&(g.dependencies=it.dependencies),rh|=g.lanes,!(et&g.childLanes))return null;if(it!==null&&g.child!==it.child)throw Error(p$3(153));if(g.child!==null){for(it=g.child,et=Pg(it,it.pendingProps),g.child=et,et.return=g;it.sibling!==null;)it=it.sibling,et=et.sibling=Pg(it,it.pendingProps),et.return=g;et.sibling=null}return g.child}function yj(it,g,et){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var ot=g.type._context,ct=g.memoizedProps.value;G$1(Wg,ot._currentValue),ot._currentValue=ct;break;case 13:if(ot=g.memoizedState,ot!==null)return ot.dehydrated!==null?(G$1(L$3,L$3.current&1),g.flags|=128,null):et&g.child.childLanes?oj(it,g,et):(G$1(L$3,L$3.current&1),it=Zi(it,g,et),it!==null?it.sibling:null);G$1(L$3,L$3.current&1);break;case 19:if(ot=(et&g.childLanes)!==0,it.flags&128){if(ot)return xj(it,g,et);g.flags|=128}if(ct=g.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(L$3,L$3.current),ot)break;return null;case 22:case 23:return g.lanes=0,dj(it,g,et)}return Zi(it,g,et)}var zj,Aj,Bj,Cj;zj=function(it,g){for(var et=g.child;et!==null;){if(et.tag===5||et.tag===6)it.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===g)break;for(;et.sibling===null;){if(et.return===null||et.return===g)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(it,g,et,ot){var ct=it.memoizedProps;if(ct!==ot){it=g.stateNode,xh(uh.current);var ut=null;switch(et){case"input":ct=Ya(it,ct),ot=Ya(it,ot),ut=[];break;case"select":ct=A$2({},ct,{value:void 0}),ot=A$2({},ot,{value:void 0}),ut=[];break;case"textarea":ct=gb(it,ct),ot=gb(it,ot),ut=[];break;default:typeof ct.onClick!="function"&&typeof ot.onClick=="function"&&(it.onclick=Bf)}ub(et,ot);var dt;et=null;for(kt in ct)if(!ot.hasOwnProperty(kt)&&ct.hasOwnProperty(kt)&&ct[kt]!=null)if(kt==="style"){var ft=ct[kt];for(dt in ft)ft.hasOwnProperty(dt)&&(et||(et={}),et[dt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?ut||(ut=[]):(ut=ut||[]).push(kt,null));for(kt in ot){var St=ot[kt];if(ft=ct!=null?ct[kt]:void 0,ot.hasOwnProperty(kt)&&St!==ft&&(St!=null||ft!=null))if(kt==="style")if(ft){for(dt in ft)!ft.hasOwnProperty(dt)||St&&St.hasOwnProperty(dt)||(et||(et={}),et[dt]="");for(dt in St)St.hasOwnProperty(dt)&&ft[dt]!==St[dt]&&(et||(et={}),et[dt]=St[dt])}else et||(ut||(ut=[]),ut.push(kt,et)),et=St;else kt==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,ft=ft?ft.__html:void 0,St!=null&&ft!==St&&(ut=ut||[]).push(kt,St)):kt==="children"?typeof St!="string"&&typeof St!="number"||(ut=ut||[]).push(kt,""+St):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(St!=null&&kt==="onScroll"&&D$1("scroll",it),ut||ft===St||(ut=[])):(ut=ut||[]).push(kt,St))}et&&(ut=ut||[]).push("style",et);var kt=ut;(g.updateQueue=kt)&&(g.flags|=4)}};Cj=function(it,g,et,ot){et!==ot&&(g.flags|=4)};function Dj(it,g){if(!I$4)switch(it.tailMode){case"hidden":g=it.tail;for(var et=null;g!==null;)g.alternate!==null&&(et=g),g=g.sibling;et===null?it.tail=null:et.sibling=null;break;case"collapsed":et=it.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?g||it.tail===null?it.tail=null:it.tail.sibling=null:ot.sibling=null}}function S$3(it){var g=it.alternate!==null&&it.alternate.child===it.child,et=0,ot=0;if(g)for(var ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags&14680064,ot|=ct.flags&14680064,ct.return=it,ct=ct.sibling;else for(ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags,ot|=ct.flags,ct.return=it,ct=ct.sibling;return it.subtreeFlags|=ot,it.childLanes=et,g}function Ej(it,g,et){var ot=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(g),null;case 1:return Zf(g.type)&&$f(),S$3(g),null;case 3:return ot=g.stateNode,zh(),E$2(Wf),E$2(H$3),Eh(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(it===null||it.child===null)&&(Gg(g)?g.flags|=4:it===null||it.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(it,g),S$3(g),null;case 5:Bh(g);var ct=xh(wh.current);if(et=g.type,it!==null&&g.stateNode!=null)Bj(it,g,et,ot,ct),it.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!ot){if(g.stateNode===null)throw Error(p$3(166));return S$3(g),null}if(it=xh(uh.current),Gg(g)){ot=g.stateNode,et=g.type;var ut=g.memoizedProps;switch(ot[Of]=g,ot[Pf]=ut,it=(g.mode&1)!==0,et){case"dialog":D$1("cancel",ot),D$1("close",ot);break;case"iframe":case"object":case"embed":D$1("load",ot);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],ot);break;case"source":D$1("error",ot);break;case"img":case"image":case"link":D$1("error",ot),D$1("load",ot);break;case"details":D$1("toggle",ot);break;case"input":Za(ot,ut),D$1("invalid",ot);break;case"select":ot._wrapperState={wasMultiple:!!ut.multiple},D$1("invalid",ot);break;case"textarea":hb(ot,ut),D$1("invalid",ot)}ub(et,ut),ct=null;for(var dt in ut)if(ut.hasOwnProperty(dt)){var ft=ut[dt];dt==="children"?typeof ft=="string"?ot.textContent!==ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",ft]):typeof ft=="number"&&ot.textContent!==""+ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",""+ft]):ea.hasOwnProperty(dt)&&ft!=null&&dt==="onScroll"&&D$1("scroll",ot)}switch(et){case"input":Va(ot),db(ot,ut,!0);break;case"textarea":Va(ot),jb(ot);break;case"select":case"option":break;default:typeof ut.onClick=="function"&&(ot.onclick=Bf)}ot=ct,g.updateQueue=ot,ot!==null&&(g.flags|=4)}else{dt=ct.nodeType===9?ct:ct.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(et)),it==="http://www.w3.org/1999/xhtml"?et==="script"?(it=dt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof ot.is=="string"?it=dt.createElement(et,{is:ot.is}):(it=dt.createElement(et),et==="select"&&(dt=it,ot.multiple?dt.multiple=!0:ot.size&&(dt.size=ot.size))):it=dt.createElementNS(it,et),it[Of]=g,it[Pf]=ot,zj(it,g,!1,!1),g.stateNode=it;e:{switch(dt=vb(et,ot),et){case"dialog":D$1("cancel",it),D$1("close",it),ct=ot;break;case"iframe":case"object":case"embed":D$1("load",it),ct=ot;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],it);ct=ot;break;case"source":D$1("error",it),ct=ot;break;case"img":case"image":case"link":D$1("error",it),D$1("load",it),ct=ot;break;case"details":D$1("toggle",it),ct=ot;break;case"input":Za(it,ot),ct=Ya(it,ot),D$1("invalid",it);break;case"option":ct=ot;break;case"select":it._wrapperState={wasMultiple:!!ot.multiple},ct=A$2({},ot,{value:void 0}),D$1("invalid",it);break;case"textarea":hb(it,ot),ct=gb(it,ot),D$1("invalid",it);break;default:ct=ot}ub(et,ct),ft=ct;for(ut in ft)if(ft.hasOwnProperty(ut)){var St=ft[ut];ut==="style"?sb(it,St):ut==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,St!=null&&nb(it,St)):ut==="children"?typeof St=="string"?(et!=="textarea"||St!=="")&&ob(it,St):typeof St=="number"&&ob(it,""+St):ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&ut!=="autoFocus"&&(ea.hasOwnProperty(ut)?St!=null&&ut==="onScroll"&&D$1("scroll",it):St!=null&&ta$1(it,ut,St,dt))}switch(et){case"input":Va(it),db(it,ot,!1);break;case"textarea":Va(it),jb(it);break;case"option":ot.value!=null&&it.setAttribute("value",""+Sa(ot.value));break;case"select":it.multiple=!!ot.multiple,ut=ot.value,ut!=null?fb(it,!!ot.multiple,ut,!1):ot.defaultValue!=null&&fb(it,!!ot.multiple,ot.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(it.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":ot=!!ot.autoFocus;break e;case"img":ot=!0;break e;default:ot=!1}}ot&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S$3(g),null;case 6:if(it&&g.stateNode!=null)Cj(it,g,it.memoizedProps,ot);else{if(typeof ot!="string"&&g.stateNode===null)throw Error(p$3(166));if(et=xh(wh.current),xh(uh.current),Gg(g)){if(ot=g.stateNode,et=g.memoizedProps,ot[Of]=g,(ut=ot.nodeValue!==et)&&(it=xg,it!==null))switch(it.tag){case 3:Af(ot.nodeValue,et,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(ot.nodeValue,et,(it.mode&1)!==0)}ut&&(g.flags|=4)}else ot=(et.nodeType===9?et:et.ownerDocument).createTextNode(ot),ot[Of]=g,g.stateNode=ot}return S$3(g),null;case 13:if(E$2(L$3),ot=g.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,ut=!1;else if(ut=Gg(g),ot!==null&&ot.dehydrated!==null){if(it===null){if(!ut)throw Error(p$3(318));if(ut=g.memoizedState,ut=ut!==null?ut.dehydrated:null,!ut)throw Error(p$3(317));ut[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S$3(g),ut=!1}else zg!==null&&(Fj(zg),zg=null),ut=!0;if(!ut)return g.flags&65536?g:null}return g.flags&128?(g.lanes=et,g):(ot=ot!==null,ot!==(it!==null&&it.memoizedState!==null)&&ot&&(g.child.flags|=8192,g.mode&1&&(it===null||L$3.current&1?T$3===0&&(T$3=3):tj())),g.updateQueue!==null&&(g.flags|=4),S$3(g),null);case 4:return zh(),Aj(it,g),it===null&&sf(g.stateNode.containerInfo),S$3(g),null;case 10:return ah(g.type._context),S$3(g),null;case 17:return Zf(g.type)&&$f(),S$3(g),null;case 19:if(E$2(L$3),ut=g.memoizedState,ut===null)return S$3(g),null;if(ot=(g.flags&128)!==0,dt=ut.rendering,dt===null)if(ot)Dj(ut,!1);else{if(T$3!==0||it!==null&&it.flags&128)for(it=g.child;it!==null;){if(dt=Ch(it),dt!==null){for(g.flags|=128,Dj(ut,!1),ot=dt.updateQueue,ot!==null&&(g.updateQueue=ot,g.flags|=4),g.subtreeFlags=0,ot=et,et=g.child;et!==null;)ut=et,it=ot,ut.flags&=14680066,dt=ut.alternate,dt===null?(ut.childLanes=0,ut.lanes=it,ut.child=null,ut.subtreeFlags=0,ut.memoizedProps=null,ut.memoizedState=null,ut.updateQueue=null,ut.dependencies=null,ut.stateNode=null):(ut.childLanes=dt.childLanes,ut.lanes=dt.lanes,ut.child=dt.child,ut.subtreeFlags=0,ut.deletions=null,ut.memoizedProps=dt.memoizedProps,ut.memoizedState=dt.memoizedState,ut.updateQueue=dt.updateQueue,ut.type=dt.type,it=dt.dependencies,ut.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),et=et.sibling;return G$1(L$3,L$3.current&1|2),g.child}it=it.sibling}ut.tail!==null&&B$1()>Gj&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304)}else{if(!ot)if(it=Ch(dt),it!==null){if(g.flags|=128,ot=!0,et=it.updateQueue,et!==null&&(g.updateQueue=et,g.flags|=4),Dj(ut,!0),ut.tail===null&&ut.tailMode==="hidden"&&!dt.alternate&&!I$4)return S$3(g),null}else 2*B$1()-ut.renderingStartTime>Gj&&et!==1073741824&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304);ut.isBackwards?(dt.sibling=g.child,g.child=dt):(et=ut.last,et!==null?et.sibling=dt:g.child=dt,ut.last=dt)}return ut.tail!==null?(g=ut.tail,ut.rendering=g,ut.tail=g.sibling,ut.renderingStartTime=B$1(),g.sibling=null,et=L$3.current,G$1(L$3,ot?et&1|2:et&1),g):(S$3(g),null);case 22:case 23:return Hj(),ot=g.memoizedState!==null,it!==null&&it.memoizedState!==null!==ot&&(g.flags|=8192),ot&&g.mode&1?fj&1073741824&&(S$3(g),g.subtreeFlags&6&&(g.flags|=8192)):S$3(g),null;case 24:return null;case 25:return null}throw Error(p$3(156,g.tag))}function Ij(it,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 3:return zh(),E$2(Wf),E$2(H$3),Eh(),it=g.flags,it&65536&&!(it&128)?(g.flags=it&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E$2(L$3),it=g.memoizedState,it!==null&&it.dehydrated!==null){if(g.alternate===null)throw Error(p$3(340));Ig()}return it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(it,g){var et=it.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(ot){W$2(it,g,ot)}else et.current=null}function Mj(it,g,et){try{et()}catch(ot){W$2(it,g,ot)}}var Nj=!1;function Oj(it,g){if(Cf=dd,it=Me$1(),Ne$1(it)){if("selectionStart"in it)var et={start:it.selectionStart,end:it.selectionEnd};else e:{et=(et=it.ownerDocument)&&et.defaultView||window;var ot=et.getSelection&&et.getSelection();if(ot&&ot.rangeCount!==0){et=ot.anchorNode;var ct=ot.anchorOffset,ut=ot.focusNode;ot=ot.focusOffset;try{et.nodeType,ut.nodeType}catch{et=null;break e}var dt=0,ft=-1,St=-1,kt=0,Tt=0,jt=it,Rt=null;t:for(;;){for(var Ft;jt!==et||ct!==0&&jt.nodeType!==3||(ft=dt+ct),jt!==ut||ot!==0&&jt.nodeType!==3||(St=dt+ot),jt.nodeType===3&&(dt+=jt.nodeValue.length),(Ft=jt.firstChild)!==null;)Rt=jt,jt=Ft;for(;;){if(jt===it)break t;if(Rt===et&&++kt===ct&&(ft=dt),Rt===ut&&++Tt===ot&&(St=dt),(Ft=jt.nextSibling)!==null)break;jt=Rt,Rt=jt.parentNode}jt=Ft}et=ft===-1||St===-1?null:{start:ft,end:St}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:it,selectionRange:et},dd=!1,V$2=g;V$2!==null;)if(g=V$2,it=g.child,(g.subtreeFlags&1028)!==0&&it!==null)it.return=g,V$2=it;else for(;V$2!==null;){g=V$2;try{var $t=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var zt=$t.memoizedProps,Kt=$t.memoizedState,Bt=g.stateNode,Ut=Bt.getSnapshotBeforeUpdate(g.elementType===g.type?zt:Ci(g.type,zt),Kt);Bt.__reactInternalSnapshotBeforeUpdate=Ut}break;case 3:var Jt=g.stateNode.containerInfo;Jt.nodeType===1?Jt.textContent="":Jt.nodeType===9&&Jt.documentElement&&Jt.removeChild(Jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(en){W$2(g,g.return,en)}if(it=g.sibling,it!==null){it.return=g.return,V$2=it;break}V$2=g.return}return $t=Nj,Nj=!1,$t}function Pj(it,g,et){var ot=g.updateQueue;if(ot=ot!==null?ot.lastEffect:null,ot!==null){var ct=ot=ot.next;do{if((ct.tag&it)===it){var ut=ct.destroy;ct.destroy=void 0,ut!==void 0&&Mj(g,et,ut)}ct=ct.next}while(ct!==ot)}}function Qj(it,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var et=g=g.next;do{if((et.tag&it)===it){var ot=et.create;et.destroy=ot()}et=et.next}while(et!==g)}}function Rj(it){var g=it.ref;if(g!==null){var et=it.stateNode;switch(it.tag){case 5:it=et;break;default:it=et}typeof g=="function"?g(it):g.current=it}}function Sj(it){var g=it.alternate;g!==null&&(it.alternate=null,Sj(g)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(g=it.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Tj(it){return it.tag===5||it.tag===3||it.tag===4}function Uj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Tj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Vj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.nodeType===8?et.parentNode.insertBefore(it,g):et.insertBefore(it,g):(et.nodeType===8?(g=et.parentNode,g.insertBefore(it,et)):(g=et,g.appendChild(it)),et=et._reactRootContainer,et!=null||g.onclick!==null||(g.onclick=Bf));else if(ot!==4&&(it=it.child,it!==null))for(Vj(it,g,et),it=it.sibling;it!==null;)Vj(it,g,et),it=it.sibling}function Wj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.insertBefore(it,g):et.appendChild(it);else if(ot!==4&&(it=it.child,it!==null))for(Wj(it,g,et),it=it.sibling;it!==null;)Wj(it,g,et),it=it.sibling}var X$4=null,Xj=!1;function Yj(it,g,et){for(et=et.child;et!==null;)Zj(it,g,et),et=et.sibling}function Zj(it,g,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$4||Lj(et,g);case 6:var ot=X$4,ct=Xj;X$4=null,Yj(it,g,et),X$4=ot,Xj=ct,X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?it.parentNode.removeChild(et):it.removeChild(et)):X$4.removeChild(et.stateNode));break;case 18:X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?Kf(it.parentNode,et):it.nodeType===1&&Kf(it,et),bd(it)):Kf(X$4,et.stateNode));break;case 4:ot=X$4,ct=Xj,X$4=et.stateNode.containerInfo,Xj=!0,Yj(it,g,et),X$4=ot,Xj=ct;break;case 0:case 11:case 14:case 15:if(!U$4&&(ot=et.updateQueue,ot!==null&&(ot=ot.lastEffect,ot!==null))){ct=ot=ot.next;do{var ut=ct,dt=ut.destroy;ut=ut.tag,dt!==void 0&&(ut&2||ut&4)&&Mj(et,g,dt),ct=ct.next}while(ct!==ot)}Yj(it,g,et);break;case 1:if(!U$4&&(Lj(et,g),ot=et.stateNode,typeof ot.componentWillUnmount=="function"))try{ot.props=et.memoizedProps,ot.state=et.memoizedState,ot.componentWillUnmount()}catch(ft){W$2(et,g,ft)}Yj(it,g,et);break;case 21:Yj(it,g,et);break;case 22:et.mode&1?(U$4=(ot=U$4)||et.memoizedState!==null,Yj(it,g,et),U$4=ot):Yj(it,g,et);break;default:Yj(it,g,et)}}function ak(it){var g=it.updateQueue;if(g!==null){it.updateQueue=null;var et=it.stateNode;et===null&&(et=it.stateNode=new Kj),g.forEach(function(ot){var ct=bk.bind(null,it,ot);et.has(ot)||(et.add(ot),ot.then(ct,ct))})}}function ck(it,g){var et=g.deletions;if(et!==null)for(var ot=0;ot<et.length;ot++){var ct=et[ot];try{var ut=it,dt=g,ft=dt;e:for(;ft!==null;){switch(ft.tag){case 5:X$4=ft.stateNode,Xj=!1;break e;case 3:X$4=ft.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=ft.stateNode.containerInfo,Xj=!0;break e}ft=ft.return}if(X$4===null)throw Error(p$3(160));Zj(ut,dt,ct),X$4=null,Xj=!1;var St=ct.alternate;St!==null&&(St.return=null),ct.return=null}catch(kt){W$2(ct,g,kt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,it),g=g.sibling}function dk(it,g){var et=it.alternate,ot=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ck(g,it),ek(it),ot&4){try{Pj(3,it,it.return),Qj(3,it)}catch(zt){W$2(it,it.return,zt)}try{Pj(5,it,it.return)}catch(zt){W$2(it,it.return,zt)}}break;case 1:ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return),it.flags&32){var ct=it.stateNode;try{ob(ct,"")}catch(zt){W$2(it,it.return,zt)}}if(ot&4&&(ct=it.stateNode,ct!=null)){var ut=it.memoizedProps,dt=et!==null?et.memoizedProps:ut,ft=it.type,St=it.updateQueue;if(it.updateQueue=null,St!==null)try{ft==="input"&&ut.type==="radio"&&ut.name!=null&&ab(ct,ut),vb(ft,dt);var kt=vb(ft,ut);for(dt=0;dt<St.length;dt+=2){var Tt=St[dt],jt=St[dt+1];Tt==="style"?sb(ct,jt):Tt==="dangerouslySetInnerHTML"?nb(ct,jt):Tt==="children"?ob(ct,jt):ta$1(ct,Tt,jt,kt)}switch(ft){case"input":bb(ct,ut);break;case"textarea":ib(ct,ut);break;case"select":var Rt=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!ut.multiple;var Ft=ut.value;Ft!=null?fb(ct,!!ut.multiple,Ft,!1):Rt!==!!ut.multiple&&(ut.defaultValue!=null?fb(ct,!!ut.multiple,ut.defaultValue,!0):fb(ct,!!ut.multiple,ut.multiple?[]:"",!1))}ct[Pf]=ut}catch(zt){W$2(it,it.return,zt)}}break;case 6:if(ck(g,it),ek(it),ot&4){if(it.stateNode===null)throw Error(p$3(162));ct=it.stateNode,ut=it.memoizedProps;try{ct.nodeValue=ut}catch(zt){W$2(it,it.return,zt)}}break;case 3:if(ck(g,it),ek(it),ot&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(zt){W$2(it,it.return,zt)}break;case 4:ck(g,it),ek(it);break;case 13:ck(g,it),ek(it),ct=it.child,ct.flags&8192&&(ut=ct.memoizedState!==null,ct.stateNode.isHidden=ut,!ut||ct.alternate!==null&&ct.alternate.memoizedState!==null||(fk=B$1())),ot&4&&ak(it);break;case 22:if(Tt=et!==null&&et.memoizedState!==null,it.mode&1?(U$4=(kt=U$4)||Tt,ck(g,it),U$4=kt):ck(g,it),ek(it),ot&8192){if(kt=it.memoizedState!==null,(it.stateNode.isHidden=kt)&&!Tt&&it.mode&1)for(V$2=it,Tt=it.child;Tt!==null;){for(jt=V$2=Tt;V$2!==null;){switch(Rt=V$2,Ft=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:Pj(4,Rt,Rt.return);break;case 1:Lj(Rt,Rt.return);var $t=Rt.stateNode;if(typeof $t.componentWillUnmount=="function"){ot=Rt,et=Rt.return;try{g=ot,$t.props=g.memoizedProps,$t.state=g.memoizedState,$t.componentWillUnmount()}catch(zt){W$2(ot,et,zt)}}break;case 5:Lj(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){gk(jt);continue}}Ft!==null?(Ft.return=Rt,V$2=Ft):gk(jt)}Tt=Tt.sibling}e:for(Tt=null,jt=it;;){if(jt.tag===5){if(Tt===null){Tt=jt;try{ct=jt.stateNode,kt?(ut=ct.style,typeof ut.setProperty=="function"?ut.setProperty("display","none","important"):ut.display="none"):(ft=jt.stateNode,St=jt.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null,ft.style.display=rb("display",dt))}catch(zt){W$2(it,it.return,zt)}}}else if(jt.tag===6){if(Tt===null)try{jt.stateNode.nodeValue=kt?"":jt.memoizedProps}catch(zt){W$2(it,it.return,zt)}}else if((jt.tag!==22&&jt.tag!==23||jt.memoizedState===null||jt===it)&&jt.child!==null){jt.child.return=jt,jt=jt.child;continue}if(jt===it)break e;for(;jt.sibling===null;){if(jt.return===null||jt.return===it)break e;Tt===jt&&(Tt=null),jt=jt.return}Tt===jt&&(Tt=null),jt.sibling.return=jt.return,jt=jt.sibling}}break;case 19:ck(g,it),ek(it),ot&4&&ak(it);break;case 21:break;default:ck(g,it),ek(it)}}function ek(it){var g=it.flags;if(g&2){try{e:{for(var et=it.return;et!==null;){if(Tj(et)){var ot=et;break e}et=et.return}throw Error(p$3(160))}switch(ot.tag){case 5:var ct=ot.stateNode;ot.flags&32&&(ob(ct,""),ot.flags&=-33);var ut=Uj(it);Wj(it,ut,ct);break;case 3:case 4:var dt=ot.stateNode.containerInfo,ft=Uj(it);Vj(it,ft,dt);break;default:throw Error(p$3(161))}}catch(St){W$2(it,it.return,St)}it.flags&=-3}g&4096&&(it.flags&=-4097)}function hk(it,g,et){V$2=it,ik(it)}function ik(it,g,et){for(var ot=(it.mode&1)!==0;V$2!==null;){var ct=V$2,ut=ct.child;if(ct.tag===22&&ot){var dt=ct.memoizedState!==null||Jj;if(!dt){var ft=ct.alternate,St=ft!==null&&ft.memoizedState!==null||U$4;ft=Jj;var kt=U$4;if(Jj=dt,(U$4=St)&&!kt)for(V$2=ct;V$2!==null;)dt=V$2,St=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(ct):St!==null?(St.return=dt,V$2=St):jk(ct);for(;ut!==null;)V$2=ut,ik(ut),ut=ut.sibling;V$2=ct,Jj=ft,U$4=kt}kk(it)}else ct.subtreeFlags&8772&&ut!==null?(ut.return=ct,V$2=ut):kk(it)}}function kk(it){for(;V$2!==null;){var g=V$2;if(g.flags&8772){var et=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U$4||Qj(5,g);break;case 1:var ot=g.stateNode;if(g.flags&4&&!U$4)if(et===null)ot.componentDidMount();else{var ct=g.elementType===g.type?et.memoizedProps:Ci(g.type,et.memoizedProps);ot.componentDidUpdate(ct,et.memoizedState,ot.__reactInternalSnapshotBeforeUpdate)}var ut=g.updateQueue;ut!==null&&sh(g,ut,ot);break;case 3:var dt=g.updateQueue;if(dt!==null){if(et=null,g.child!==null)switch(g.child.tag){case 5:et=g.child.stateNode;break;case 1:et=g.child.stateNode}sh(g,dt,et)}break;case 5:var ft=g.stateNode;if(et===null&&g.flags&4){et=ft;var St=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":St.autoFocus&&et.focus();break;case"img":St.src&&(et.src=St.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var kt=g.alternate;if(kt!==null){var Tt=kt.memoizedState;if(Tt!==null){var jt=Tt.dehydrated;jt!==null&&bd(jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||g.flags&512&&Rj(g)}catch(Rt){W$2(g,g.return,Rt)}}if(g===it){V$2=null;break}if(et=g.sibling,et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function gk(it){for(;V$2!==null;){var g=V$2;if(g===it){V$2=null;break}var et=g.sibling;if(et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function jk(it){for(;V$2!==null;){var g=V$2;try{switch(g.tag){case 0:case 11:case 15:var et=g.return;try{Qj(4,g)}catch(St){W$2(g,et,St)}break;case 1:var ot=g.stateNode;if(typeof ot.componentDidMount=="function"){var ct=g.return;try{ot.componentDidMount()}catch(St){W$2(g,ct,St)}}var ut=g.return;try{Rj(g)}catch(St){W$2(g,ut,St)}break;case 5:var dt=g.return;try{Rj(g)}catch(St){W$2(g,dt,St)}}}catch(St){W$2(g,g.return,St)}if(g===it){V$2=null;break}var ft=g.sibling;if(ft!==null){ft.return=g.return,V$2=ft;break}V$2=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$2=0,Q$1=null,Y=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$3(){return K$2&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(it){return it.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(it=C$4,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it):1}function gi(it,g,et,ot){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(it,et,ot),(!(K$2&2)||it!==Q$1)&&(it===Q$1&&(!(K$2&2)&&(qk|=et),T$3===4&&Ck(it,Z$2)),Dk(it,ot),et===1&&K$2===0&&!(g.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(it,g){var et=it.callbackNode;wc(it,g);var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)et!==null&&bc(et),it.callbackNode=null,it.callbackPriority=0;else if(g=ot&-ot,it.callbackPriority!==g){if(et!=null&&bc(et),g===1)it.tag===0?ig(Ek.bind(null,it)):hg(Ek.bind(null,it)),Jf(function(){!(K$2&6)&&jg()}),et=null;else{switch(Dc(ot)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,it))}it.callbackPriority=g,it.callbackNode=et}}function Gk(it,g){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var et=it.callbackNode;if(Hk()&&it.callbackNode!==et)return null;var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)return null;if(ot&30||ot&it.expiredLanes||g)g=Ik(it,ot);else{g=ot;var ct=K$2;K$2|=2;var ut=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Gj=B$1()+500,Kk(it,g));do try{Lk();break}catch(ft){Mk(it,ft)}while(1);$g(),mk.current=ut,K$2=ct,Y!==null?g=0:(Q$1=null,Z$2=0,g=T$3)}if(g!==0){if(g===2&&(ct=xc(it),ct!==0&&(ot=ct,g=Nk(it,ct))),g===1)throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;if(g===6)Ck(it,ot);else{if(ct=it.current.alternate,!(ot&30)&&!Ok(ct)&&(g=Ik(it,ot),g===2&&(ut=xc(it),ut!==0&&(ot=ut,g=Nk(it,ut))),g===1))throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;switch(it.finishedWork=ct,it.finishedLanes=ot,g){case 0:case 1:throw Error(p$3(345));case 2:Pk(it,tk$1,uk);break;case 3:if(Ck(it,ot),(ot&130023424)===ot&&(g=fk+500-B$1(),10<g)){if(uc(it,0)!==0)break;if(ct=it.suspendedLanes,(ct&ot)!==ot){R$3(),it.pingedLanes|=it.suspendedLanes&ct;break}it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),g);break}Pk(it,tk$1,uk);break;case 4:if(Ck(it,ot),(ot&4194240)===ot)break;for(g=it.eventTimes,ct=-1;0<ot;){var dt=31-oc(ot);ut=1<<dt,dt=g[dt],dt>ct&&(ct=dt),ot&=~ut}if(ot=ct,ot=B$1()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*lk(ot/1960))-ot,10<ot){it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),ot);break}Pk(it,tk$1,uk);break;case 5:Pk(it,tk$1,uk);break;default:throw Error(p$3(329))}}}return Dk(it,B$1()),it.callbackNode===et?Gk.bind(null,it):null}function Nk(it,g){var et=sk;return it.current.memoizedState.isDehydrated&&(Kk(it,g).flags|=256),it=Ik(it,g),it!==2&&(g=tk$1,tk$1=et,g!==null&&Fj(g)),it}function Fj(it){tk$1===null?tk$1=it:tk$1.push.apply(tk$1,it)}function Ok(it){for(var g=it;;){if(g.flags&16384){var et=g.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var ot=0;ot<et.length;ot++){var ct=et[ot],ut=ct.getSnapshot;ct=ct.value;try{if(!He$2(ut(),ct))return!1}catch{return!1}}}if(et=g.child,g.subtreeFlags&16384&&et!==null)et.return=g,g=et;else{if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(it,g){for(g&=~rk,g&=~qk,it.suspendedLanes|=g,it.pingedLanes&=~g,it=it.expirationTimes;0<g;){var et=31-oc(g),ot=1<<et;it[et]=-1,g&=~ot}}function Ek(it){if(K$2&6)throw Error(p$3(327));Hk();var g=uc(it,0);if(!(g&1))return Dk(it,B$1()),null;var et=Ik(it,g);if(it.tag!==0&&et===2){var ot=xc(it);ot!==0&&(g=ot,et=Nk(it,ot))}if(et===1)throw et=pk,Kk(it,0),Ck(it,g),Dk(it,B$1()),et;if(et===6)throw Error(p$3(345));return it.finishedWork=it.current.alternate,it.finishedLanes=g,Pk(it,tk$1,uk),Dk(it,B$1()),null}function Qk(it,g){var et=K$2;K$2|=1;try{return it(g)}finally{K$2=et,K$2===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(it){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var g=K$2;K$2|=1;var et=ok.transition,ot=C$4;try{if(ok.transition=null,C$4=1,it)return it()}finally{C$4=ot,ok.transition=et,K$2=g,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(it,g){it.finishedWork=null,it.finishedLanes=0;var et=it.timeoutHandle;if(et!==-1&&(it.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var ot=et;switch(wg(ot),ot.tag){case 1:ot=ot.type.childContextTypes,ot!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$3),Eh();break;case 5:Bh(ot);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(ot.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q$1=it,Y=it=Pg(it.current,null),Z$2=fj=g,T$3=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(et=fh[g],ot=et.interleaved,ot!==null){et.interleaved=null;var ct=ot.next,ut=et.pending;if(ut!==null){var dt=ut.next;ut.next=ct,ot.next=dt}et.pending=ot}fh=null}return it}function Mk(it,g){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var ot=M$3.memoizedState;ot!==null;){var ct=ot.queue;ct!==null&&(ct.pending=null),ot=ot.next}Ih=!1}if(Hh=0,O$4=N$2=M$3=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$3=1,pk=g,Y=null;break}e:{var ut=it,dt=et.return,ft=et,St=g;if(g=Z$2,ft.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var kt=St,Tt=ft,jt=Tt.tag;if(!(Tt.mode&1)&&(jt===0||jt===11||jt===15)){var Rt=Tt.alternate;Rt?(Tt.updateQueue=Rt.updateQueue,Tt.memoizedState=Rt.memoizedState,Tt.lanes=Rt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Ft=Ui(dt);if(Ft!==null){Ft.flags&=-257,Vi(Ft,dt,ft,ut,g),Ft.mode&1&&Si(ut,kt,g),g=Ft,St=kt;var $t=g.updateQueue;if($t===null){var zt=new Set;zt.add(St),g.updateQueue=zt}else $t.add(St);break e}else{if(!(g&1)){Si(ut,kt,g),tj();break e}St=Error(p$3(426))}}else if(I$4&&ft.mode&1){var Kt=Ui(dt);if(Kt!==null){!(Kt.flags&65536)&&(Kt.flags|=256),Vi(Kt,dt,ft,ut,g),Jg(Ji(St,ft));break e}}ut=St=Ji(St,ft),T$3!==4&&(T$3=2),sk===null?sk=[ut]:sk.push(ut),ut=dt;do{switch(ut.tag){case 3:ut.flags|=65536,g&=-g,ut.lanes|=g;var Bt=Ni(ut,St,g);ph(ut,Bt);break e;case 1:ft=St;var Ut=ut.type,Jt=ut.stateNode;if(!(ut.flags&128)&&(typeof Ut.getDerivedStateFromError=="function"||Jt!==null&&typeof Jt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Jt)))){ut.flags|=65536,g&=-g,ut.lanes|=g;var en=Qi(ut,ft,g);ph(ut,en);break e}}ut=ut.return}while(ut!==null)}Sk(et)}catch(tn){g=tn,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Jk(){var it=mk.current;return mk.current=Rh,it===null?Rh:it}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(it,g){var et=K$2;K$2|=2;var ot=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Kk(it,g));do try{Tk();break}catch(ct){Mk(it,ct)}while(1);if($g(),K$2=et,mk.current=ot,Y!==null)throw Error(p$3(261));return Q$1=null,Z$2=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(it){var g=Vk(it.alternate,it,fj);it.memoizedProps=it.pendingProps,g===null?Sk(it):Y=g,nk.current=null}function Sk(it){var g=it;do{var et=g.alternate;if(it=g.return,g.flags&32768){if(et=Ij(et,g),et!==null){et.flags&=32767,Y=et;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$3=6,Y=null;return}}else if(et=Ej(et,g,fj),et!==null){Y=et;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=it}while(g!==null);T$3===0&&(T$3=5)}function Pk(it,g,et){var ot=C$4,ct=ok.transition;try{ok.transition=null,C$4=1,Wk(it,g,et,ot)}finally{ok.transition=ct,C$4=ot}return null}function Wk(it,g,et,ot){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));et=it.finishedWork;var ct=it.finishedLanes;if(et===null)return null;if(it.finishedWork=null,it.finishedLanes=0,et===it.current)throw Error(p$3(177));it.callbackNode=null,it.callbackPriority=0;var ut=et.lanes|et.childLanes;if(Bc(it,ut),it===Q$1&&(Y=Q$1=null,Z$2=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ut=(et.flags&15990)!==0,et.subtreeFlags&15990||ut){ut=ok.transition,ok.transition=null;var dt=C$4;C$4=1;var ft=K$2;K$2|=4,nk.current=null,Oj(it,et),dk(et,it),Oe$1(Df),dd=!!Cf,Df=Cf=null,it.current=et,hk(et),dc(),K$2=ft,C$4=dt,ok.transition=ut}else it.current=et;if(vk&&(vk=!1,wk=it,xk=ct),ut=it.pendingLanes,ut===0&&(Ri=null),mc(et.stateNode),Dk(it,B$1()),g!==null)for(ot=it.onRecoverableError,et=0;et<g.length;et++)ct=g[et],ot(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Oi)throw Oi=!1,it=Pi,Pi=null,it;return xk&1&&it.tag!==0&&Hk(),ut=it.pendingLanes,ut&1?it===zk?yk++:(yk=0,zk=it):yk=0,jg(),null}function Hk(){if(wk!==null){var it=Dc(xk),g=ok.transition,et=C$4;try{if(ok.transition=null,C$4=16>it?16:it,wk===null)var ot=!1;else{if(it=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var ct=K$2;for(K$2|=4,V$2=it.current;V$2!==null;){var ut=V$2,dt=ut.child;if(V$2.flags&16){var ft=ut.deletions;if(ft!==null){for(var St=0;St<ft.length;St++){var kt=ft[St];for(V$2=kt;V$2!==null;){var Tt=V$2;switch(Tt.tag){case 0:case 11:case 15:Pj(8,Tt,ut)}var jt=Tt.child;if(jt!==null)jt.return=Tt,V$2=jt;else for(;V$2!==null;){Tt=V$2;var Rt=Tt.sibling,Ft=Tt.return;if(Sj(Tt),Tt===kt){V$2=null;break}if(Rt!==null){Rt.return=Ft,V$2=Rt;break}V$2=Ft}}}var $t=ut.alternate;if($t!==null){var zt=$t.child;if(zt!==null){$t.child=null;do{var Kt=zt.sibling;zt.sibling=null,zt=Kt}while(zt!==null)}}V$2=ut}}if(ut.subtreeFlags&2064&&dt!==null)dt.return=ut,V$2=dt;else e:for(;V$2!==null;){if(ut=V$2,ut.flags&2048)switch(ut.tag){case 0:case 11:case 15:Pj(9,ut,ut.return)}var Bt=ut.sibling;if(Bt!==null){Bt.return=ut.return,V$2=Bt;break e}V$2=ut.return}}var Ut=it.current;for(V$2=Ut;V$2!==null;){dt=V$2;var Jt=dt.child;if(dt.subtreeFlags&2064&&Jt!==null)Jt.return=dt,V$2=Jt;else e:for(dt=Ut;V$2!==null;){if(ft=V$2,ft.flags&2048)try{switch(ft.tag){case 0:case 11:case 15:Qj(9,ft)}}catch(tn){W$2(ft,ft.return,tn)}if(ft===dt){V$2=null;break e}var en=ft.sibling;if(en!==null){en.return=ft.return,V$2=en;break e}V$2=ft.return}}if(K$2=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,it)}catch{}ot=!0}return ot}finally{C$4=et,ok.transition=g}}return!1}function Xk(it,g,et){g=Ji(et,g),g=Ni(it,g,1),it=nh(it,g,1),g=R$3(),it!==null&&(Ac(it,1,g),Dk(it,g))}function W$2(it,g,et){if(it.tag===3)Xk(it,it,et);else for(;g!==null;){if(g.tag===3){Xk(g,it,et);break}else if(g.tag===1){var ot=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof ot.componentDidCatch=="function"&&(Ri===null||!Ri.has(ot))){it=Ji(et,it),it=Qi(g,it,1),g=nh(g,it,1),it=R$3(),g!==null&&(Ac(g,1,it),Dk(g,it));break}}g=g.return}}function Ti(it,g,et){var ot=it.pingCache;ot!==null&&ot.delete(g),g=R$3(),it.pingedLanes|=it.suspendedLanes&et,Q$1===it&&(Z$2&et)===et&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(it,0):rk|=et),Dk(it,g)}function Yk(it,g){g===0&&(it.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var et=R$3();it=ih(it,g),it!==null&&(Ac(it,g,et),Dk(it,et))}function uj(it){var g=it.memoizedState,et=0;g!==null&&(et=g.retryLane),Yk(it,et)}function bk(it,g){var et=0;switch(it.tag){case 13:var ot=it.stateNode,ct=it.memoizedState;ct!==null&&(et=ct.retryLane);break;case 19:ot=it.stateNode;break;default:throw Error(p$3(314))}ot!==null&&ot.delete(g),Yk(it,et)}var Vk;Vk=function(it,g,et){if(it!==null)if(it.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(it.lanes&et)&&!(g.flags&128))return dh=!1,yj(it,g,et);dh=!!(it.flags&131072)}else dh=!1,I$4&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var ot=g.type;ij(it,g),it=g.pendingProps;var ct=Yf(g,H$3.current);ch(g,et),ct=Nh(null,g,ot,it,ct,et);var ut=Sh();return g.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(ot)?(ut=!0,cg(g)):ut=!1,g.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,kh(g),ct.updater=Ei,g.stateNode=ct,ct._reactInternals=g,Ii(g,ot,it,et),g=jj(null,g,ot,!0,ut,et)):(g.tag=0,I$4&&ut&&vg(g),Xi(null,g,ct,et),g=g.child),g;case 16:ot=g.elementType;e:{switch(ij(it,g),it=g.pendingProps,ct=ot._init,ot=ct(ot._payload),g.type=ot,ct=g.tag=Zk(ot),it=Ci(ot,it),ct){case 0:g=cj(null,g,ot,it,et);break e;case 1:g=hj(null,g,ot,it,et);break e;case 11:g=Yi(null,g,ot,it,et);break e;case 14:g=$i(null,g,ot,Ci(ot.type,it),et);break e}throw Error(p$3(306,ot,""))}return g;case 0:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),cj(it,g,ot,ct,et);case 1:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),hj(it,g,ot,ct,et);case 3:e:{if(kj(g),it===null)throw Error(p$3(387));ot=g.pendingProps,ut=g.memoizedState,ct=ut.element,lh(it,g),qh(g,ot,null,et);var dt=g.memoizedState;if(ot=dt.element,ut.isDehydrated)if(ut={element:ot,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},g.updateQueue.baseState=ut,g.memoizedState=ut,g.flags&256){ct=Ji(Error(p$3(423)),g),g=lj(it,g,ot,et,ct);break e}else if(ot!==ct){ct=Ji(Error(p$3(424)),g),g=lj(it,g,ot,et,ct);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I$4=!0,zg=null,et=Vg(g,null,ot,et),g.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),ot===ct){g=Zi(it,g,et);break e}Xi(it,g,ot,et)}g=g.child}return g;case 5:return Ah(g),it===null&&Eg(g),ot=g.type,ct=g.pendingProps,ut=it!==null?it.memoizedProps:null,dt=ct.children,Ef(ot,ct)?dt=null:ut!==null&&Ef(ot,ut)&&(g.flags|=32),gj(it,g),Xi(it,g,dt,et),g.child;case 6:return it===null&&Eg(g),null;case 13:return oj(it,g,et);case 4:return yh(g,g.stateNode.containerInfo),ot=g.pendingProps,it===null?g.child=Ug(g,null,ot,et):Xi(it,g,ot,et),g.child;case 11:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),Yi(it,g,ot,ct,et);case 7:return Xi(it,g,g.pendingProps,et),g.child;case 8:return Xi(it,g,g.pendingProps.children,et),g.child;case 12:return Xi(it,g,g.pendingProps.children,et),g.child;case 10:e:{if(ot=g.type._context,ct=g.pendingProps,ut=g.memoizedProps,dt=ct.value,G$1(Wg,ot._currentValue),ot._currentValue=dt,ut!==null)if(He$2(ut.value,dt)){if(ut.children===ct.children&&!Wf.current){g=Zi(it,g,et);break e}}else for(ut=g.child,ut!==null&&(ut.return=g);ut!==null;){var ft=ut.dependencies;if(ft!==null){dt=ut.child;for(var St=ft.firstContext;St!==null;){if(St.context===ot){if(ut.tag===1){St=mh(-1,et&-et),St.tag=2;var kt=ut.updateQueue;if(kt!==null){kt=kt.shared;var Tt=kt.pending;Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),kt.pending=St}}ut.lanes|=et,St=ut.alternate,St!==null&&(St.lanes|=et),bh(ut.return,et,g),ft.lanes|=et;break}St=St.next}}else if(ut.tag===10)dt=ut.type===g.type?null:ut.child;else if(ut.tag===18){if(dt=ut.return,dt===null)throw Error(p$3(341));dt.lanes|=et,ft=dt.alternate,ft!==null&&(ft.lanes|=et),bh(dt,et,g),dt=ut.sibling}else dt=ut.child;if(dt!==null)dt.return=ut;else for(dt=ut;dt!==null;){if(dt===g){dt=null;break}if(ut=dt.sibling,ut!==null){ut.return=dt.return,dt=ut;break}dt=dt.return}ut=dt}Xi(it,g,ct.children,et),g=g.child}return g;case 9:return ct=g.type,ot=g.pendingProps.children,ch(g,et),ct=eh(ct),ot=ot(ct),g.flags|=1,Xi(it,g,ot,et),g.child;case 14:return ot=g.type,ct=Ci(ot,g.pendingProps),ct=Ci(ot.type,ct),$i(it,g,ot,ct,et);case 15:return bj(it,g,g.type,g.pendingProps,et);case 17:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),ij(it,g),g.tag=1,Zf(ot)?(it=!0,cg(g)):it=!1,ch(g,et),Gi(g,ot,ct),Ii(g,ot,ct,et),jj(null,g,ot,!0,it,et);case 19:return xj(it,g,et);case 22:return dj(it,g,et)}throw Error(p$3(156,g.tag))};function Fk(it,g){return ac(it,g)}function $k(it,g,et,ot){this.tag=it,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ot,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,g,et,ot){return new $k(it,g,et,ot)}function aj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function Zk(it){if(typeof it=="function")return aj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function Pg(it,g){var et=it.alternate;return et===null?(et=Bg(it.tag,g,it.key,it.mode),et.elementType=it.elementType,et.type=it.type,et.stateNode=it.stateNode,et.alternate=it,it.alternate=et):(et.pendingProps=g,et.type=it.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=it.flags&14680064,et.childLanes=it.childLanes,et.lanes=it.lanes,et.child=it.child,et.memoizedProps=it.memoizedProps,et.memoizedState=it.memoizedState,et.updateQueue=it.updateQueue,g=it.dependencies,et.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},et.sibling=it.sibling,et.index=it.index,et.ref=it.ref,et}function Rg(it,g,et,ot,ct,ut){var dt=2;if(ot=it,typeof it=="function")aj(it)&&(dt=1);else if(typeof it=="string")dt=5;else e:switch(it){case ya:return Tg(et.children,ct,ut,g);case za:dt=8,ct|=8;break;case Aa:return it=Bg(12,et,g,ct|2),it.elementType=Aa,it.lanes=ut,it;case Ea:return it=Bg(13,et,g,ct),it.elementType=Ea,it.lanes=ut,it;case Fa:return it=Bg(19,et,g,ct),it.elementType=Fa,it.lanes=ut,it;case Ia:return pj(et,ct,ut,g);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:dt=10;break e;case Ca:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,ot=null;break e}throw Error(p$3(130,it==null?it:typeof it,""))}return g=Bg(dt,et,g,ct),g.elementType=it,g.type=ot,g.lanes=ut,g}function Tg(it,g,et,ot){return it=Bg(7,it,ot,g),it.lanes=et,it}function pj(it,g,et,ot){return it=Bg(22,it,ot,g),it.elementType=Ia,it.lanes=et,it.stateNode={isHidden:!1},it}function Qg(it,g,et){return it=Bg(6,it,null,g),it.lanes=et,it}function Sg(it,g,et){return g=Bg(4,it.children!==null?it.children:[],it.key,g),g.lanes=et,g.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},g}function al(it,g,et,ot,ct){this.tag=g,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ot,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function bl(it,g,et,ot,ct,ut,dt,ft,St){return it=new al(it,g,et,ft,St),g===1?(g=1,ut===!0&&(g|=8)):g=0,ut=Bg(3,null,null,g),it.current=ut,ut.stateNode=it,ut.memoizedState={element:ot,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ut),it}function cl(it,g,et){var ot=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ot==null?null:""+ot,children:it,containerInfo:g,implementation:et}}function dl(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$3(170));var g=it;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$3(171))}if(it.tag===1){var et=it.type;if(Zf(et))return bg(it,et,g)}return g}function el(it,g,et,ot,ct,ut,dt,ft,St){return it=bl(et,ot,!0,it,ct,ut,dt,ft,St),it.context=dl(null),et=it.current,ot=R$3(),ct=yi(et),ut=mh(ot,ct),ut.callback=g??null,nh(et,ut,ct),it.current.lanes=ct,Ac(it,ct,ot),Dk(it,ot),it}function fl(it,g,et,ot){var ct=g.current,ut=R$3(),dt=yi(ct);return et=dl(et),g.context===null?g.context=et:g.pendingContext=et,g=mh(ut,dt),g.payload={element:it},ot=ot===void 0?null:ot,ot!==null&&(g.callback=ot),it=nh(ct,g,dt),it!==null&&(gi(it,ct,dt,ut),oh(it,ct,dt)),dt}function gl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function hl(it,g){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var et=it.retryLane;it.retryLane=et!==0&&et<g?et:g}}function il(it,g){hl(it,g),(it=it.alternate)&&hl(it,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(it){console.error(it)};function ll(it){this._internalRoot=it}ml.prototype.render=ll.prototype.render=function(it){var g=this._internalRoot;if(g===null)throw Error(p$3(409));fl(it,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var g=it.containerInfo;Rk(function(){fl(null,it,null,null)}),g[uf]=null}};function ml(it){this._internalRoot=it}ml.prototype.unstable_scheduleHydration=function(it){if(it){var g=Hc();it={blockedOn:null,target:it,priority:g};for(var et=0;et<Qc.length&&g!==0&&g<Qc[et].priority;et++);Qc.splice(et,0,it),et===0&&Vc(it)}};function nl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(it,g,et,ot,ct){if(ct){if(typeof ot=="function"){var ut=ot;ot=function(){var kt=gl(dt);ut.call(kt)}}var dt=el(g,ot,it,0,null,!1,!1,"",pl);return it._reactRootContainer=dt,it[uf]=dt.current,sf(it.nodeType===8?it.parentNode:it),Rk(),dt}for(;ct=it.lastChild;)it.removeChild(ct);if(typeof ot=="function"){var ft=ot;ot=function(){var kt=gl(St);ft.call(kt)}}var St=bl(it,0,!1,null,null,!1,!1,"",pl);return it._reactRootContainer=St,it[uf]=St.current,sf(it.nodeType===8?it.parentNode:it),Rk(function(){fl(g,St,et,ot)}),St}function rl(it,g,et,ot,ct){var ut=et._reactRootContainer;if(ut){var dt=ut;if(typeof ct=="function"){var ft=ct;ct=function(){var St=gl(dt);ft.call(St)}}fl(g,dt,it,ct)}else dt=ql(et,g,it,ct,ot);return gl(dt)}Ec=function(it){switch(it.tag){case 3:var g=it.stateNode;if(g.current.memoizedState.isDehydrated){var et=tc(g.pendingLanes);et!==0&&(Cc(g,et|1),Dk(g,B$1()),!(K$2&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ot=ih(it,1);if(ot!==null){var ct=R$3();gi(ot,it,1,ct)}}),il(it,1)}};Fc=function(it){if(it.tag===13){var g=ih(it,134217728);if(g!==null){var et=R$3();gi(g,it,134217728,et)}il(it,134217728)}};Gc=function(it){if(it.tag===13){var g=yi(it),et=ih(it,g);if(et!==null){var ot=R$3();gi(et,it,g,ot)}il(it,g)}};Hc=function(){return C$4};Ic=function(it,g){var et=C$4;try{return C$4=it,g()}finally{C$4=et}};yb=function(it,g,et){switch(g){case"input":if(bb(it,et),g=et.name,et.type==="radio"&&g!=null){for(et=it;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<et.length;g++){var ot=et[g];if(ot!==it&&ot.form===it.form){var ct=Db(ot);if(!ct)throw Error(p$3(90));Wa(ot),bb(ot,ct)}}}break;case"textarea":ib(it,et);break;case"select":g=et.value,g!=null&&fb(it,!!et.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(it,g){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$3(200));return cl(it,g,null,et)};reactDom_production_min.createRoot=function(it,g){if(!nl(it))throw Error(p$3(299));var et=!1,ot="",ct=kl;return g!=null&&(g.unstable_strictMode===!0&&(et=!0),g.identifierPrefix!==void 0&&(ot=g.identifierPrefix),g.onRecoverableError!==void 0&&(ct=g.onRecoverableError)),g=bl(it,1,!1,null,null,et,!1,ot,ct),it[uf]=g.current,sf(it.nodeType===8?it.parentNode:it),new ll(g)};reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var g=it._reactInternals;if(g===void 0)throw typeof it.render=="function"?Error(p$3(188)):(it=Object.keys(it).join(","),Error(p$3(268,it)));return it=Zb(g),it=it===null?null:it.stateNode,it};reactDom_production_min.flushSync=function(it){return Rk(it)};reactDom_production_min.hydrate=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!0,et)};reactDom_production_min.hydrateRoot=function(it,g,et){if(!nl(it))throw Error(p$3(405));var ot=et!=null&&et.hydratedSources||null,ct=!1,ut="",dt=kl;if(et!=null&&(et.unstable_strictMode===!0&&(ct=!0),et.identifierPrefix!==void 0&&(ut=et.identifierPrefix),et.onRecoverableError!==void 0&&(dt=et.onRecoverableError)),g=el(g,null,it,1,et??null,ct,!1,ut,dt),it[uf]=g.current,sf(it),ot)for(it=0;it<ot.length;it++)et=ot[it],ct=et._getVersion,ct=ct(et._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[et,ct]:g.mutableSourceEagerHydrationData.push(et,ct);return new ml(g)};reactDom_production_min.render=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!1,et)};reactDom_production_min.unmountComponentAtNode=function(it){if(!ol(it))throw Error(p$3(40));return it._reactRootContainer?(Rk(function(){rl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,g,et,ot){if(!ol(et))throw Error(p$3(200));if(it==null||it._reactInternals===void 0)throw Error(p$3(38));return rl(it,g,et,!1,ot)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(it){console.error(it)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$5=reactDomExports;createRoot=m$5.createRoot,m$5.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$2.apply(this,arguments)}var Action;(function(it){it.Pop="POP",it.Push="PUSH",it.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(it){it===void 0&&(it={});function g(ot,ct){let{pathname:ut,search:dt,hash:ft}=ot.location;return createLocation("",{pathname:ut,search:dt,hash:ft},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function et(ot,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(g,et,null,it)}function invariant$2(it,g){if(it===!1||it===null||typeof it>"u")throw new Error(g)}function warning$2(it,g){if(!it){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(it,g){return{usr:it.state,key:it.key,idx:g}}function createLocation(it,g,et,ot){return et===void 0&&(et=null),_extends$2({pathname:typeof it=="string"?it:it.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:et,key:g&&g.key||ot||createKey$1()})}function createPath(it){let{pathname:g="/",search:et="",hash:ot=""}=it;return et&&et!=="?"&&(g+=et.charAt(0)==="?"?et:"?"+et),ot&&ot!=="#"&&(g+=ot.charAt(0)==="#"?ot:"#"+ot),g}function parsePath(it){let g={};if(it){let et=it.indexOf("#");et>=0&&(g.hash=it.substr(et),it=it.substr(0,et));let ot=it.indexOf("?");ot>=0&&(g.search=it.substr(ot),it=it.substr(0,ot)),it&&(g.pathname=it)}return g}function getUrlBasedHistory(it,g,et,ot){ot===void 0&&(ot={});let{window:ct=document.defaultView,v5Compat:ut=!1}=ot,dt=ct.history,ft=Action.Pop,St=null,kt=Tt();kt==null&&(kt=0,dt.replaceState(_extends$2({},dt.state,{idx:kt}),""));function Tt(){return(dt.state||{idx:null}).idx}function jt(){ft=Action.Pop;let Kt=Tt(),Bt=Kt==null?null:Kt-kt;kt=Kt,St&&St({action:ft,location:zt.location,delta:Bt})}function Rt(Kt,Bt){ft=Action.Push;let Ut=createLocation(zt.location,Kt,Bt);et&&et(Ut,Kt),kt=Tt()+1;let Jt=getHistoryState(Ut,kt),en=zt.createHref(Ut);try{dt.pushState(Jt,"",en)}catch(tn){if(tn instanceof DOMException&&tn.name==="DataCloneError")throw tn;ct.location.assign(en)}ut&&St&&St({action:ft,location:zt.location,delta:1})}function Ft(Kt,Bt){ft=Action.Replace;let Ut=createLocation(zt.location,Kt,Bt);et&&et(Ut,Kt),kt=Tt();let Jt=getHistoryState(Ut,kt),en=zt.createHref(Ut);dt.replaceState(Jt,"",en),ut&&St&&St({action:ft,location:zt.location,delta:0})}function $t(Kt){let Bt=ct.location.origin!=="null"?ct.location.origin:ct.location.href,Ut=typeof Kt=="string"?Kt:createPath(Kt);return Ut=Ut.replace(/ $/,"%20"),invariant$2(Bt,"No window.location.(origin|href) available to create URL for href: "+Ut),new URL(Ut,Bt)}let zt={get action(){return ft},get location(){return it(ct,dt)},listen(Kt){if(St)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,jt),St=Kt,()=>{ct.removeEventListener(PopStateEventType,jt),St=null}},createHref(Kt){return g(ct,Kt)},createURL:$t,encodeLocation(Kt){let Bt=$t(Kt);return{pathname:Bt.pathname,search:Bt.search,hash:Bt.hash}},push:Rt,replace:Ft,go(Kt){return dt.go(Kt)}};return zt}var ResultType;(function(it){it.data="data",it.deferred="deferred",it.redirect="redirect",it.error="error"})(ResultType||(ResultType={}));function matchRoutes(it,g,et){return et===void 0&&(et="/"),matchRoutesImpl(it,g,et,!1)}function matchRoutesImpl(it,g,et,ot){let ct=typeof g=="string"?parsePath(g):g,ut=stripBasename(ct.pathname||"/",et);if(ut==null)return null;let dt=flattenRoutes(it);rankRouteBranches(dt);let ft=null;for(let St=0;ft==null&&St<dt.length;++St){let kt=decodePath(ut);ft=matchRouteBranch(dt[St],kt,ot)}return ft}function flattenRoutes(it,g,et,ot){g===void 0&&(g=[]),et===void 0&&(et=[]),ot===void 0&&(ot="");let ct=(ut,dt,ft)=>{let St={relativePath:ft===void 0?ut.path||"":ft,caseSensitive:ut.caseSensitive===!0,childrenIndex:dt,route:ut};St.relativePath.startsWith("/")&&(invariant$2(St.relativePath.startsWith(ot),'Absolute route path "'+St.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),St.relativePath=St.relativePath.slice(ot.length));let kt=joinPaths([ot,St.relativePath]),Tt=et.concat(St);ut.children&&ut.children.length>0&&(invariant$2(ut.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+kt+'".')),flattenRoutes(ut.children,g,Tt,kt)),!(ut.path==null&&!ut.index)&&g.push({path:kt,score:computeScore(kt,ut.index),routesMeta:Tt})};return it.forEach((ut,dt)=>{var ft;if(ut.path===""||!((ft=ut.path)!=null&&ft.includes("?")))ct(ut,dt);else for(let St of explodeOptionalSegments(ut.path))ct(ut,dt,St)}),g}function explodeOptionalSegments(it){let g=it.split("/");if(g.length===0)return[];let[et,...ot]=g,ct=et.endsWith("?"),ut=et.replace(/\?$/,"");if(ot.length===0)return ct?[ut,""]:[ut];let dt=explodeOptionalSegments(ot.join("/")),ft=[];return ft.push(...dt.map(St=>St===""?ut:[ut,St].join("/"))),ct&&ft.push(...dt),ft.map(St=>it.startsWith("/")&&St===""?"/":St)}function rankRouteBranches(it){it.sort((g,et)=>g.score!==et.score?et.score-g.score:compareIndexes(g.routesMeta.map(ot=>ot.childrenIndex),et.routesMeta.map(ot=>ot.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=it=>it==="*";function computeScore(it,g){let et=it.split("/"),ot=et.length;return et.some(isSplat)&&(ot+=splatPenalty),g&&(ot+=indexRouteValue),et.filter(ct=>!isSplat(ct)).reduce((ct,ut)=>ct+(paramRe.test(ut)?dynamicSegmentValue:ut===""?emptySegmentValue:staticSegmentValue),ot)}function compareIndexes(it,g){return it.length===g.length&&it.slice(0,-1).every((ot,ct)=>ot===g[ct])?it[it.length-1]-g[g.length-1]:0}function matchRouteBranch(it,g,et){et===void 0&&(et=!1);let{routesMeta:ot}=it,ct={},ut="/",dt=[];for(let ft=0;ft<ot.length;++ft){let St=ot[ft],kt=ft===ot.length-1,Tt=ut==="/"?g:g.slice(ut.length)||"/",jt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:kt},Tt),Rt=St.route;if(!jt&&kt&&et&&!ot[ot.length-1].route.index&&(jt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:!1},Tt)),!jt)return null;Object.assign(ct,jt.params),dt.push({params:ct,pathname:joinPaths([ut,jt.pathname]),pathnameBase:normalizePathname(joinPaths([ut,jt.pathnameBase])),route:Rt}),jt.pathnameBase!=="/"&&(ut=joinPaths([ut,jt.pathnameBase]))}return dt}function matchPath(it,g){typeof it=="string"&&(it={path:it,caseSensitive:!1,end:!0});let[et,ot]=compilePath(it.path,it.caseSensitive,it.end),ct=g.match(et);if(!ct)return null;let ut=ct[0],dt=ut.replace(/(.)\/+$/,"$1"),ft=ct.slice(1);return{params:ot.reduce((kt,Tt,jt)=>{let{paramName:Rt,isOptional:Ft}=Tt;if(Rt==="*"){let zt=ft[jt]||"";dt=ut.slice(0,ut.length-zt.length).replace(/(.)\/+$/,"$1")}const $t=ft[jt];return Ft&&!$t?kt[Rt]=void 0:kt[Rt]=($t||"").replace(/%2F/g,"/"),kt},{}),pathname:ut,pathnameBase:dt,pattern:it}}function compilePath(it,g,et){g===void 0&&(g=!1),et===void 0&&(et=!0),warning$2(it==="*"||!it.endsWith("*")||it.endsWith("/*"),'Route path "'+it+'" will be treated as if it were '+('"'+it.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+it.replace(/\*$/,"/*")+'".'));let ot=[],ct="^"+it.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,ft,St)=>(ot.push({paramName:ft,isOptional:St!=null}),St?"/?([^\\/]+)?":"/([^\\/]+)"));return it.endsWith("*")?(ot.push({paramName:"*"}),ct+=it==="*"||it==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ct+="\\/*$":it!==""&&it!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,g?void 0:"i"),ot]}function decodePath(it){try{return it.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning$2(!1,'The URL path "'+it+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),it}}function stripBasename(it,g){if(g==="/")return it;if(!it.toLowerCase().startsWith(g.toLowerCase()))return null;let et=g.endsWith("/")?g.length-1:g.length,ot=it.charAt(et);return ot&&ot!=="/"?null:it.slice(et)||"/"}function resolvePath(it,g){g===void 0&&(g="/");let{pathname:et,search:ot="",hash:ct=""}=typeof it=="string"?parsePath(it):it;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,g):g,search:normalizeSearch(ot),hash:normalizeHash(ct)}}function resolvePathname(it,g){let et=g.replace(/\/+$/,"").split("/");return it.split("/").forEach(ct=>{ct===".."?et.length>1&&et.pop():ct!=="."&&et.push(ct)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(it,g,et,ot){return"Cannot include a '"+it+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(it){return it.filter((g,et)=>et===0||g.route.path&&g.route.path.length>0)}function getResolveToMatches(it,g){let et=getPathContributingMatches(it);return g?et.map((ot,ct)=>ct===et.length-1?ot.pathname:ot.pathnameBase):et.map(ot=>ot.pathnameBase)}function resolveTo(it,g,et,ot){ot===void 0&&(ot=!1);let ct;typeof it=="string"?ct=parsePath(it):(ct=_extends$2({},it),invariant$2(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant$2(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant$2(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let ut=it===""||ct.pathname==="",dt=ut?"/":ct.pathname,ft;if(dt==null)ft=et;else{let jt=g.length-1;if(!ot&&dt.startsWith("..")){let Rt=dt.split("/");for(;Rt[0]==="..";)Rt.shift(),jt-=1;ct.pathname=Rt.join("/")}ft=jt>=0?g[jt]:"/"}let St=resolvePath(ct,ft),kt=dt&&dt!=="/"&&dt.endsWith("/"),Tt=(ut||dt===".")&&et.endsWith("/");return!St.pathname.endsWith("/")&&(kt||Tt)&&(St.pathname+="/"),St}const joinPaths=it=>it.join("/").replace(/\/\/+/g,"/"),normalizePathname=it=>it.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=it=>!it||it==="?"?"":it.startsWith("?")?it:"?"+it,normalizeHash=it=>!it||it==="#"?"":it.startsWith("#")?it:"#"+it;function isRouteErrorResponse(it){return it!=null&&typeof it.status=="number"&&typeof it.statusText=="string"&&typeof it.internal=="boolean"&&"data"in it}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(it,g){let{relative:et}=g===void 0?{}:g;useInRouterContext()||invariant$2(!1);let{basename:ot,navigator:ct}=reactExports.useContext(NavigationContext),{hash:ut,pathname:dt,search:ft}=useResolvedPath(it,{relative:et}),St=dt;return ot!=="/"&&(St=dt==="/"?ot:joinPaths([ot,dt])),ct.createHref({pathname:St,search:ft,hash:ut})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(it){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(it)}function useNavigate(){let{isDataRoute:it}=reactExports.useContext(RouteContext);return it?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let it=reactExports.useContext(DataRouterContext),{basename:g,future:et,navigator:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,et.v7_relativeSplatPath)),ft=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{ft.current=!0}),reactExports.useCallback(function(kt,Tt){if(Tt===void 0&&(Tt={}),!ft.current)return;if(typeof kt=="number"){ot.go(kt);return}let jt=resolveTo(kt,JSON.parse(dt),ut,Tt.relative==="path");it==null&&g!=="/"&&(jt.pathname=jt.pathname==="/"?g:joinPaths([g,jt.pathname])),(Tt.replace?ot.replace:ot.push)(jt,Tt.state,Tt)},[g,ot,dt,ut,it])}function useResolvedPath(it,g){let{relative:et}=g===void 0?{}:g,{future:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,ot.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(it,JSON.parse(dt),ut,et==="path"),[it,dt,ut,et])}function useRoutes(it,g){return useRoutesImpl(it,g)}function useRoutesImpl(it,g,et,ot){useInRouterContext()||invariant$2(!1);let{navigator:ct}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),dt=ut[ut.length-1],ft=dt?dt.params:{};dt&&dt.pathname;let St=dt?dt.pathnameBase:"/";dt&&dt.route;let kt=useLocation(),Tt;if(g){var jt;let Kt=typeof g=="string"?parsePath(g):g;St==="/"||(jt=Kt.pathname)!=null&&jt.startsWith(St)||invariant$2(!1),Tt=Kt}else Tt=kt;let Rt=Tt.pathname||"/",Ft=Rt;if(St!=="/"){let Kt=St.replace(/^\//,"").split("/");Ft="/"+Rt.replace(/^\//,"").split("/").slice(Kt.length).join("/")}let $t=matchRoutes(it,{pathname:Ft}),zt=_renderMatches($t&&$t.map(Kt=>Object.assign({},Kt,{params:Object.assign({},ft,Kt.params),pathname:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Kt.pathname).pathname:Kt.pathname]),pathnameBase:Kt.pathnameBase==="/"?St:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Kt.pathnameBase).pathname:Kt.pathnameBase])})),ut,et,ot);return g&&zt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Tt),navigationType:Action.Pop}},zt):zt}function DefaultErrorComponent(){let it=useRouteError(),g=isRouteErrorResponse(it)?it.status+" "+it.statusText:it instanceof Error?it.message:JSON.stringify(it),et=it instanceof Error?it.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},ut=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),et?reactExports.createElement("pre",{style:ct},et):null,ut)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,et){return et.location!==g.location||et.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:et.error,location:et.location,revalidation:g.revalidation||et.revalidation}}componentDidCatch(g,et){console.error("React Router caught the following error during render",g,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(it){let{routeContext:g,match:et,children:ot}=it,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:g},ot)}function _renderMatches(it,g,et,ot){var ct;if(g===void 0&&(g=[]),et===void 0&&(et=null),ot===void 0&&(ot=null),it==null){var ut;if(!et)return null;if(et.errors)it=et.matches;else if((ut=ot)!=null&&ut.v7_partialHydration&&g.length===0&&!et.initialized&&et.matches.length>0)it=et.matches;else return null}let dt=it,ft=(ct=et)==null?void 0:ct.errors;if(ft!=null){let Tt=dt.findIndex(jt=>jt.route.id&&(ft==null?void 0:ft[jt.route.id])!==void 0);Tt>=0||invariant$2(!1),dt=dt.slice(0,Math.min(dt.length,Tt+1))}let St=!1,kt=-1;if(et&&ot&&ot.v7_partialHydration)for(let Tt=0;Tt<dt.length;Tt++){let jt=dt[Tt];if((jt.route.HydrateFallback||jt.route.hydrateFallbackElement)&&(kt=Tt),jt.route.id){let{loaderData:Rt,errors:Ft}=et,$t=jt.route.loader&&Rt[jt.route.id]===void 0&&(!Ft||Ft[jt.route.id]===void 0);if(jt.route.lazy||$t){St=!0,kt>=0?dt=dt.slice(0,kt+1):dt=[dt[0]];break}}}return dt.reduceRight((Tt,jt,Rt)=>{let Ft,$t=!1,zt=null,Kt=null;et&&(Ft=ft&&jt.route.id?ft[jt.route.id]:void 0,zt=jt.route.errorElement||defaultErrorElement,St&&(kt<0&&Rt===0?(warningOnce("route-fallback",!1),$t=!0,Kt=null):kt===Rt&&($t=!0,Kt=jt.route.hydrateFallbackElement||null)));let Bt=g.concat(dt.slice(0,Rt+1)),Ut=()=>{let Jt;return Ft?Jt=zt:$t?Jt=Kt:jt.route.Component?Jt=reactExports.createElement(jt.route.Component,null):jt.route.element?Jt=jt.route.element:Jt=Tt,reactExports.createElement(RenderedRoute,{match:jt,routeContext:{outlet:Tt,matches:Bt,isDataRoute:et!=null},children:Jt})};return et&&(jt.route.ErrorBoundary||jt.route.errorElement||Rt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:zt,error:Ft,children:Ut(),routeContext:{outlet:null,matches:Bt,isDataRoute:!0}}):Ut()},null)}var DataRouterHook$1=function(it){return it.UseBlocker="useBlocker",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it}(DataRouterHook$1||{}),DataRouterStateHook$1=function(it){return it.UseBlocker="useBlocker",it.UseLoaderData="useLoaderData",it.UseActionData="useActionData",it.UseRouteError="useRouteError",it.UseNavigation="useNavigation",it.UseRouteLoaderData="useRouteLoaderData",it.UseMatches="useMatches",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it.UseRouteId="useRouteId",it}(DataRouterStateHook$1||{});function useDataRouterContext(it){let g=reactExports.useContext(DataRouterContext);return g||invariant$2(!1),g}function useDataRouterState(it){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$2(!1),g}function useRouteContext(it){let g=reactExports.useContext(RouteContext);return g||invariant$2(!1),g}function useCurrentRouteId(it){let g=useRouteContext(),et=g.matches[g.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useRouteError(){var it;let g=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),ot=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(it=et.errors)==null?void 0:it[ot]}function useNavigateStable(){let{router:it}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),g=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{et.current=!0}),reactExports.useCallback(function(ct,ut){ut===void 0&&(ut={}),et.current&&(typeof ct=="number"?it.navigate(ct):it.navigate(ct,_extends$1({fromRouteId:g},ut)))},[it,g])}const alreadyWarned$1={};function warningOnce(it,g,et){!g&&!alreadyWarned$1[it]&&(alreadyWarned$1[it]=!0)}const alreadyWarned={};function warnOnce(it,g){alreadyWarned[g]||(alreadyWarned[g]=!0,console.warn(g))}const logDeprecation=(it,g,et)=>warnOnce(it,"⚠️ React Router Future Flag Warning: "+g+". "+("You can use the `"+it+"` future flag to opt-in early. ")+("For more information, see "+et+"."));function logV6DeprecationWarnings(it,g){(it==null?void 0:it.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(it==null?void 0:it.v7_relativeSplatPath)===void 0&&(!g||!g.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),g&&(g.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),g.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),g.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),g.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(it){let{to:g,replace:et,state:ot,relative:ct}=it;useInRouterContext()||invariant$2(!1);let{future:ut,static:dt}=reactExports.useContext(NavigationContext),{matches:ft}=reactExports.useContext(RouteContext),{pathname:St}=useLocation(),kt=useNavigate(),Tt=resolveTo(g,getResolveToMatches(ft,ut.v7_relativeSplatPath),St,ct==="path"),jt=JSON.stringify(Tt);return reactExports.useEffect(()=>kt(JSON.parse(jt),{replace:et,state:ot,relative:ct}),[kt,jt,ct,et,ot]),null}function Route(it){invariant$2(!1)}function Router(it){let{basename:g="/",children:et=null,location:ot,navigationType:ct=Action.Pop,navigator:ut,static:dt=!1,future:ft}=it;useInRouterContext()&&invariant$2(!1);let St=g.replace(/^\/*/,"/"),kt=reactExports.useMemo(()=>({basename:St,navigator:ut,static:dt,future:_extends$1({v7_relativeSplatPath:!1},ft)}),[St,ft,ut,dt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:Tt="/",search:jt="",hash:Rt="",state:Ft=null,key:$t="default"}=ot,zt=reactExports.useMemo(()=>{let Kt=stripBasename(Tt,St);return Kt==null?null:{location:{pathname:Kt,search:jt,hash:Rt,state:Ft,key:$t},navigationType:ct}},[St,Tt,jt,Rt,Ft,$t,ct]);return zt==null?null:reactExports.createElement(NavigationContext.Provider,{value:kt},reactExports.createElement(LocationContext.Provider,{children:et,value:zt}))}function Routes(it){let{children:g,location:et}=it;return useRoutes(createRoutesFromChildren(g),et)}new Promise(()=>{});function createRoutesFromChildren(it,g){g===void 0&&(g=[]);let et=[];return reactExports.Children.forEach(it,(ot,ct)=>{if(!reactExports.isValidElement(ot))return;let ut=[...g,ct];if(ot.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(ot.props.children,ut));return}ot.type!==Route&&invariant$2(!1),!ot.props.index||!ot.props.children||invariant$2(!1);let dt={id:ot.props.id||ut.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(dt.children=createRoutesFromChildren(ot.props.children,ut)),et.push(dt)}),et}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function isModifiedEvent(it){return!!(it.metaKey||it.altKey||it.ctrlKey||it.shiftKey)}function shouldProcessLinkClick(it,g){return it.button===0&&(!g||g==="_self")&&!isModifiedEvent(it)}function createSearchParams(it){return it===void 0&&(it=""),new URLSearchParams(typeof it=="string"||Array.isArray(it)||it instanceof URLSearchParams?it:Object.keys(it).reduce((g,et)=>{let ot=it[et];return g.concat(Array.isArray(ot)?ot.map(ct=>[et,ct]):[[et,ot]])},[]))}function getSearchParamsForLocation(it,g){let et=createSearchParams(it);return g&&g.forEach((ot,ct)=>{et.has(ct)||g.getAll(ct).forEach(ut=>{et.append(ct,ut)})}),et}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$5[START_TRANSITION];function BrowserRouter(it){let{basename:g,children:et,future:ot,window:ct}=it,ut=reactExports.useRef();ut.current==null&&(ut.current=createBrowserHistory({window:ct,v5Compat:!0}));let dt=ut.current,[ft,St]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:kt}=ot||{},Tt=reactExports.useCallback(jt=>{kt&&startTransitionImpl?startTransitionImpl(()=>St(jt)):St(jt)},[St,kt]);return reactExports.useLayoutEffect(()=>dt.listen(Tt),[dt,Tt]),reactExports.useEffect(()=>logV6DeprecationWarnings(ot),[ot]),reactExports.createElement(Router,{basename:g,children:et,location:ft.location,navigationType:ft.action,navigator:dt,future:ot})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(g,et){let{onClick:ot,relative:ct,reloadDocument:ut,replace:dt,state:ft,target:St,to:kt,preventScrollReset:Tt,viewTransition:jt}=g,Rt=_objectWithoutPropertiesLoose$1(g,_excluded$2),{basename:Ft}=reactExports.useContext(NavigationContext),$t,zt=!1;if(typeof kt=="string"&&ABSOLUTE_URL_REGEX.test(kt)&&($t=kt,isBrowser$2))try{let Jt=new URL(window.location.href),en=kt.startsWith("//")?new URL(Jt.protocol+kt):new URL(kt),tn=stripBasename(en.pathname,Ft);en.origin===Jt.origin&&tn!=null?kt=tn+en.search+en.hash:zt=!0}catch{}let Kt=useHref(kt,{relative:ct}),Bt=useLinkClickHandler(kt,{replace:dt,state:ft,target:St,preventScrollReset:Tt,relative:ct,viewTransition:jt});function Ut(Jt){ot&&ot(Jt),Jt.defaultPrevented||Bt(Jt)}return reactExports.createElement("a",_extends({},Rt,{href:$t||Kt,onClick:zt||ut?ot:Ut,ref:et,target:St}))});var DataRouterHook;(function(it){it.UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(it){it.UseFetcher="useFetcher",it.UseFetchers="useFetchers",it.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(it,g){let{target:et,replace:ot,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft}=g===void 0?{}:g,St=useNavigate(),kt=useLocation(),Tt=useResolvedPath(it,{relative:dt});return reactExports.useCallback(jt=>{if(shouldProcessLinkClick(jt,et)){jt.preventDefault();let Rt=ot!==void 0?ot:createPath(kt)===createPath(Tt);St(it,{replace:Rt,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft})}},[kt,St,Tt,ot,ct,et,it,ut,dt,ft])}function useSearchParams(it){let g=reactExports.useRef(createSearchParams(it)),et=reactExports.useRef(!1),ot=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(ot.search,et.current?null:g.current),[ot.search]),ut=useNavigate(),dt=reactExports.useCallback((ft,St)=>{const kt=createSearchParams(typeof ft=="function"?ft(ct):ft);et.current=!0,ut("?"+kt,St)},[ut,ct]);return[ct,dt]}function createDOMMotionComponentProxy(it){if(typeof Proxy>"u")return it;const g=new Map,et=(...ot)=>it(...ot);return new Proxy(et,{get:(ot,ct)=>ct==="create"?it:(g.has(ct)||g.set(ct,it(ct)),g.get(ct))})}function isAnimationControls(it){return it!==null&&typeof it=="object"&&typeof it.start=="function"}const isKeyframesTarget=it=>Array.isArray(it);function shallowCompare(it,g){if(!Array.isArray(g))return!1;const et=g.length;if(et!==it.length)return!1;for(let ot=0;ot<et;ot++)if(g[ot]!==it[ot])return!1;return!0}function isVariantLabel(it){return typeof it=="string"||Array.isArray(it)}function getValueState(it){const g=[{},{}];return it==null||it.values.forEach((et,ot)=>{g[0][ot]=et.get(),g[1][ot]=et.getVelocity()}),g}function resolveVariantFromProps(it,g,et,ot){if(typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}if(typeof g=="string"&&(g=it.variants&&it.variants[g]),typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}return g}function resolveVariant(it,g,et){const ot=it.getProps();return resolveVariantFromProps(ot,g,et!==void 0?et:ot.custom,it)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=it=>it*1e3,millisecondsToSeconds=it=>it/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=it=>({type:"spring",stiffness:550,damping:it===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(it,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(it)?it.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(it,g){return it?it[g]||it.default||it:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=it=>it!==null;function getFinalKeyframe(it,{repeat:g,repeatType:et="loop"},ot){const ct=it.filter(isNotNull),ut=g&&et!=="loop"&&g%2===1?0:ct.length-1;return!ut||ot===void 0?ct[ut]:ot}const noop$2=it=>it;let invariant$1=noop$2;function createRenderStep(it){let g=new Set,et=new Set,ot=!1,ct=!1;const ut=new WeakSet;let dt={delta:0,timestamp:0,isProcessing:!1};function ft(kt){ut.has(kt)&&(St.schedule(kt),it()),kt(dt)}const St={schedule:(kt,Tt=!1,jt=!1)=>{const Ft=jt&&ot?g:et;return Tt&&ut.add(kt),Ft.has(kt)||Ft.add(kt),kt},cancel:kt=>{et.delete(kt),ut.delete(kt)},process:kt=>{if(dt=kt,ot){ct=!0;return}ot=!0,[g,et]=[et,g],g.forEach(ft),g.clear(),ot=!1,ct&&(ct=!1,St.process(kt))}};return St}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(it,g){let et=!1,ot=!0;const ct={delta:0,timestamp:0,isProcessing:!1},ut=()=>et=!0,dt=stepsOrder.reduce((Bt,Ut)=>(Bt[Ut]=createRenderStep(ut),Bt),{}),{read:ft,resolveKeyframes:St,update:kt,preRender:Tt,render:jt,postRender:Rt}=dt,Ft=()=>{const Bt=performance.now();et=!1,ct.delta=ot?1e3/60:Math.max(Math.min(Bt-ct.timestamp,maxElapsed),1),ct.timestamp=Bt,ct.isProcessing=!0,ft.process(ct),St.process(ct),kt.process(ct),Tt.process(ct),jt.process(ct),Rt.process(ct),ct.isProcessing=!1,et&&g&&(ot=!1,it(Ft))},$t=()=>{et=!0,ot=!0,ct.isProcessing||it(Ft)};return{schedule:stepsOrder.reduce((Bt,Ut)=>{const Jt=dt[Ut];return Bt[Ut]=(en,tn=!1,nn=!1)=>(et||$t(),Jt.schedule(en,tn,nn)),Bt},{}),cancel:Bt=>{for(let Ut=0;Ut<stepsOrder.length;Ut++)dt[stepsOrder[Ut]].cancel(Bt)},state:ct,steps:dt}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),calcBezier=(it,g,et)=>(((1-3*et+3*g)*it+(3*et-6*g))*it+3*g)*it,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(it,g,et,ot,ct){let ut,dt,ft=0;do dt=g+(et-g)/2,ut=calcBezier(dt,ot,ct)-it,ut>0?et=dt:g=dt;while(Math.abs(ut)>subdivisionPrecision&&++ft<subdivisionMaxIterations);return dt}function cubicBezier(it,g,et,ot){if(it===g&&et===ot)return noop$2;const ct=ut=>binarySubdivide(ut,0,1,it,et);return ut=>ut===0||ut===1?ut:calcBezier(ct(ut),g,ot)}const mirrorEasing=it=>g=>g<=.5?it(2*g)/2:(2-it(2*(1-g)))/2,reverseEasing=it=>g=>1-it(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=it=>(it*=2)<1?.5*backIn(it):.5*(2-Math.pow(2,-10*(it-1))),circIn=it=>1-Math.sin(Math.acos(it)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=it=>/^0[^.\s]+$/u.test(it);function isNone(it){return typeof it=="number"?it===0:it!==null?it==="none"||it==="0"||isZeroValueString(it):!0}const isNumericalString=it=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(it),checkStringStartsWith=it=>g=>typeof g=="string"&&g.startsWith(it),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=it=>startsAsVariableToken(it)?singleCssVariableRegex.test(it.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(it){const g=splitCSSVariableRegex.exec(it);if(!g)return[,];const[,et,ot,ct]=g;return[`--${et??ot}`,ct]}function getVariableValue(it,g,et=1){const[ot,ct]=parseCSSVariable(it);if(!ot)return;const ut=window.getComputedStyle(g).getPropertyValue(ot);if(ut){const dt=ut.trim();return isNumericalString(dt)?parseFloat(dt):dt}return isCSSVariableToken(ct)?getVariableValue(ct,g,et+1):ct}const clamp=(it,g,et)=>et>g?g:et<it?it:et,number={test:it=>typeof it=="number",parse:parseFloat,transform:it=>it},alpha$1={...number,transform:it=>clamp(0,1,it)},scale={...number,default:1},createUnitType=it=>({test:g=>typeof g=="string"&&g.endsWith(it)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${it}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:it=>percent.parse(it)/100,transform:it=>percent.transform(it*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=it=>it===number||it===px,getPosFromMatrix=(it,g)=>parseFloat(it.split(", ")[g]),getTranslateFromMatrix=(it,g)=>(et,{transform:ot})=>{if(ot==="none"||!ot)return 0;const ct=ot.match(/^matrix3d\((.+)\)$/u);if(ct)return getPosFromMatrix(ct[1],g);{const ut=ot.match(/^matrix\((.+)\)$/u);return ut?getPosFromMatrix(ut[1],it):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(it=>!transformKeys.has(it));function removeNonTranslationalTransform(it){const g=[];return nonTranslationalTransformKeys.forEach(et=>{const ot=it.getValue(et);ot!==void 0&&(g.push([et,ot.get()]),ot.set(et.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:it},{paddingLeft:g="0",paddingRight:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),height:({y:it},{paddingTop:g="0",paddingBottom:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),top:(it,{top:g})=>parseFloat(g),left:(it,{left:g})=>parseFloat(g),bottom:({y:it},{top:g})=>parseFloat(g)+(it.max-it.min),right:({x:it},{left:g})=>parseFloat(g)+(it.max-it.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=it=>g=>g.test(it),auto={test:it=>it==="auto",parse:it=>it},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=it=>dimensionValueTypes.find(testValueType(it)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const it=Array.from(toResolve).filter(ot=>ot.needsMeasurement),g=new Set(it.map(ot=>ot.element)),et=new Map;g.forEach(ot=>{const ct=removeNonTranslationalTransform(ot);ct.length&&(et.set(ot,ct),ot.render())}),it.forEach(ot=>ot.measureInitialState()),g.forEach(ot=>{ot.render();const ct=et.get(ot);ct&&ct.forEach(([ut,dt])=>{var ft;(ft=ot.getValue(ut))===null||ft===void 0||ft.set(dt)})}),it.forEach(ot=>ot.measureEndState()),it.forEach(ot=>{ot.suspendedScrollY!==void 0&&window.scrollTo(0,ot.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(it=>it.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(it=>{it.readKeyframes(),it.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,et,ot,ct,ut,dt=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=et,this.name=ot,this.motionValue=ct,this.element=ut,this.isAsync=dt}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:et,element:ot,motionValue:ct}=this;for(let ut=0;ut<g.length;ut++)if(g[ut]===null)if(ut===0){const dt=ct==null?void 0:ct.get(),ft=g[g.length-1];if(dt!==void 0)g[0]=dt;else if(ot&&et){const St=ot.readValue(et,ft);St!=null&&(g[0]=St)}g[0]===void 0&&(g[0]=ft),ct&&dt===void 0&&ct.set(g[0])}else g[ut]=g[ut-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=it=>Math.round(it*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(it){return it==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(it,g)=>et=>!!(typeof et=="string"&&singleColorRegex.test(et)&&et.startsWith(it)||g&&!isNullish(et)&&Object.prototype.hasOwnProperty.call(et,g)),splitColor=(it,g,et)=>ot=>{if(typeof ot!="string")return ot;const[ct,ut,dt,ft]=ot.match(floatRegex);return{[it]:parseFloat(ct),[g]:parseFloat(ut),[et]:parseFloat(dt),alpha:ft!==void 0?parseFloat(ft):1}},clampRgbUnit=it=>clamp(0,255,it),rgbUnit={...number,transform:it=>Math.round(clampRgbUnit(it))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:it,green:g,blue:et,alpha:ot=1})=>"rgba("+rgbUnit.transform(it)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(et)+", "+sanitize(alpha$1.transform(ot))+")"};function parseHex(it){let g="",et="",ot="",ct="";return it.length>5?(g=it.substring(1,3),et=it.substring(3,5),ot=it.substring(5,7),ct=it.substring(7,9)):(g=it.substring(1,2),et=it.substring(2,3),ot=it.substring(3,4),ct=it.substring(4,5),g+=g,et+=et,ot+=ot,ct+=ct),{red:parseInt(g,16),green:parseInt(et,16),blue:parseInt(ot,16),alpha:ct?parseInt(ct,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:it,saturation:g,lightness:et,alpha:ot=1})=>"hsla("+Math.round(it)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(et))+", "+sanitize(alpha$1.transform(ot))+")"},color={test:it=>rgba.test(it)||hex.test(it)||hsla.test(it),parse:it=>rgba.test(it)?rgba.parse(it):hsla.test(it)?hsla.parse(it):hex.parse(it),transform:it=>typeof it=="string"?it:it.hasOwnProperty("red")?rgba.transform(it):hsla.transform(it)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(it){var g,et;return isNaN(it)&&typeof it=="string"&&(((g=it.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((et=it.match(colorRegex))===null||et===void 0?void 0:et.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(it){const g=it.toString(),et=[],ot={color:[],number:[],var:[]},ct=[];let ut=0;const ft=g.replace(complexRegex,St=>(color.test(St)?(ot.color.push(ut),ct.push(COLOR_TOKEN),et.push(color.parse(St))):St.startsWith(VAR_FUNCTION_TOKEN)?(ot.var.push(ut),ct.push(VAR_TOKEN),et.push(St)):(ot.number.push(ut),ct.push(NUMBER_TOKEN),et.push(parseFloat(St))),++ut,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:et,split:ft,indexes:ot,types:ct}}function parseComplexValue(it){return analyseComplexValue(it).values}function createTransformer(it){const{split:g,types:et}=analyseComplexValue(it),ot=g.length;return ct=>{let ut="";for(let dt=0;dt<ot;dt++)if(ut+=g[dt],ct[dt]!==void 0){const ft=et[dt];ft===NUMBER_TOKEN?ut+=sanitize(ct[dt]):ft===COLOR_TOKEN?ut+=color.transform(ct[dt]):ut+=ct[dt]}return ut}}const convertNumbersToZero=it=>typeof it=="number"?0:it;function getAnimatableNone$1(it){const g=parseComplexValue(it);return createTransformer(it)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(it){const[g,et]=it.slice(0,-1).split("(");if(g==="drop-shadow")return it;const[ot]=et.match(floatRegex)||[];if(!ot)return it;const ct=et.replace(ot,"");let ut=maxDefaults.has(g)?1:0;return ot!==et&&(ut*=100),g+"("+ut+ct+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:it=>{const g=it.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):it}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=it=>defaultValueTypes[it];function getAnimatableNone(it,g){let et=getDefaultValueType(it);return et!==filter&&(et=complex),et.getAnimatableNone?et.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(it,g,et){let ot=0,ct;for(;ot<it.length&&!ct;){const ut=it[ot];typeof ut=="string"&&!invalidTemplates.has(ut)&&analyseComplexValue(ut).values.length&&(ct=it[ot]),ot++}if(ct&&et)for(const ut of g)it[ut]=getAnimatableNone(et,ct)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,et,ot,ct,ut){super(g,et,ot,ct,ut,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:et,name:ot}=this;if(!et||!et.current)return;super.readKeyframes();for(let St=0;St<g.length;St++){let kt=g[St];if(typeof kt=="string"&&(kt=kt.trim(),isCSSVariableToken(kt))){const Tt=getVariableValue(kt,et.current);Tt!==void 0&&(g[St]=Tt),St===g.length-1&&(this.finalKeyframe=kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(ot)||g.length!==2)return;const[ct,ut]=g,dt=findDimensionValueType(ct),ft=findDimensionValueType(ut);if(dt!==ft)if(isNumOrPxType(dt)&&isNumOrPxType(ft))for(let St=0;St<g.length;St++){const kt=g[St];typeof kt=="string"&&(g[St]=parseFloat(kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:et}=this,ot=[];for(let ct=0;ct<g.length;ct++)isNone(g[ct])&&ot.push(ct);ot.length&&makeNoneKeyframesAnimatable(g,ot,et)}measureInitialState(){const{element:g,unresolvedKeyframes:et,name:ot}=this;if(!g||!g.current)return;ot==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[ot](g.measureViewportBox(),window.getComputedStyle(g.current)),et[0]=this.measuredOrigin;const ct=et[et.length-1];ct!==void 0&&g.getValue(ot,ct).jump(ct,!1)}measureEndState(){var g;const{element:et,name:ot,unresolvedKeyframes:ct}=this;if(!et||!et.current)return;const ut=et.getValue(ot);ut&&ut.jump(this.measuredOrigin,!1);const dt=ct.length-1,ft=ct[dt];ct[dt]=positionalValues[ot](et.measureViewportBox(),window.getComputedStyle(et.current)),ft!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ft),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([St,kt])=>{et.getValue(St).set(kt)}),this.resolveNoneKeyframes()}}function isGenerator(it){return typeof it=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:it=>{now$1=it,queueMicrotask(clearTime)}},isAnimatable=(it,g)=>g==="zIndex"?!1:!!(typeof it=="number"||Array.isArray(it)||typeof it=="string"&&(complex.test(it)||it==="0")&&!it.startsWith("url("));function hasKeyframesChanged(it){const g=it[0];if(it.length===1)return!0;for(let et=0;et<it.length;et++)if(it[et]!==g)return!0}function canAnimate(it,g,et,ot){const ct=it[0];if(ct===null)return!1;if(g==="display"||g==="visibility")return!0;const ut=it[it.length-1],dt=isAnimatable(ct,g),ft=isAnimatable(ut,g);return!dt||!ft?!1:hasKeyframesChanged(it)||(et==="spring"||isGenerator(et))&&ot}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:et=0,type:ot="keyframes",repeat:ct=0,repeatDelay:ut=0,repeatType:dt="loop",...ft}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:et,type:ot,repeat:ct,repeatDelay:ut,repeatType:dt,...ft},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,et){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:ot,type:ct,velocity:ut,delay:dt,onComplete:ft,onUpdate:St,isGenerator:kt}=this.options;if(!kt&&!canAnimate(g,ot,ct,ut))if(dt)this.options.duration=0;else{St==null||St(getFinalKeyframe(g,this.options,et)),ft==null||ft(),this.resolveFinishedPromise();return}const Tt=this.initPlayback(g,et);Tt!==!1&&(this._resolved={keyframes:g,finalKeyframe:et,...Tt},this.onPostResolved())}onPostResolved(){}then(g,et){return this.currentFinishedPromise.then(g,et)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}const progress=(it,g,et)=>{const ot=g-it;return ot===0?1:(et-it)/ot},generateLinearEasing=(it,g,et=10)=>{let ot="";const ct=Math.max(Math.round(g/et),2);for(let ut=0;ut<ct;ut++)ot+=it(progress(0,ct-1,ut))+", ";return`linear(${ot.substring(0,ot.length-2)})`};function velocityPerSecond(it,g){return g?it*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(it,g,et){const ot=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(et-it(ot),g-ot)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:it=springDefaults.duration,bounce:g=springDefaults.bounce,velocity:et=springDefaults.velocity,mass:ot=springDefaults.mass}){let ct,ut,dt=1-g;dt=clamp(springDefaults.minDamping,springDefaults.maxDamping,dt),it=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(it)),dt<1?(ct=kt=>{const Tt=kt*dt,jt=Tt*it,Rt=Tt-et,Ft=calcAngularFreq(kt,dt),$t=Math.exp(-jt);return safeMin-Rt/Ft*$t},ut=kt=>{const jt=kt*dt*it,Rt=jt*et+et,Ft=Math.pow(dt,2)*Math.pow(kt,2)*it,$t=Math.exp(-jt),zt=calcAngularFreq(Math.pow(kt,2),dt);return(-ct(kt)+safeMin>0?-1:1)*((Rt-Ft)*$t)/zt}):(ct=kt=>{const Tt=Math.exp(-kt*it),jt=(kt-et)*it+1;return-safeMin+Tt*jt},ut=kt=>{const Tt=Math.exp(-kt*it),jt=(et-kt)*(it*it);return Tt*jt});const ft=5/it,St=approximateRoot(ct,ut,ft);if(it=secondsToMilliseconds(it),isNaN(St))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:it};{const kt=Math.pow(St,2)*ot;return{stiffness:kt,damping:dt*2*Math.sqrt(ot*kt),duration:it}}}const rootIterations=12;function approximateRoot(it,g,et){let ot=et;for(let ct=1;ct<rootIterations;ct++)ot=ot-it(ot)/g(ot);return ot}function calcAngularFreq(it,g){return it*Math.sqrt(1-g*g)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(it){let g=0;const et=50;let ot=it.next(g);for(;!ot.done&&g<maxGeneratorDuration;)g+=et,ot=it.next(g);return g>=maxGeneratorDuration?1/0:g}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(it,g){return g.some(et=>it[et]!==void 0)}function getSpringOptions(it){let g={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...it};if(!isSpringType(it,physicsKeys)&&isSpringType(it,durationKeys))if(it.visualDuration){const et=it.visualDuration,ot=2*Math.PI/(et*1.2),ct=ot*ot,ut=2*clamp(.05,1,1-it.bounce)*Math.sqrt(ct);g={...g,mass:springDefaults.mass,stiffness:ct,damping:ut}}else{const et=findSpring(it);g={...g,...et,mass:springDefaults.mass},g.isResolvedFromDuration=!0}return g}function spring(it=springDefaults.visualDuration,g=springDefaults.bounce){const et=typeof it!="object"?{visualDuration:it,keyframes:[0,1],bounce:g}:it;let{restSpeed:ot,restDelta:ct}=et;const ut=et.keyframes[0],dt=et.keyframes[et.keyframes.length-1],ft={done:!1,value:ut},{stiffness:St,damping:kt,mass:Tt,duration:jt,velocity:Rt,isResolvedFromDuration:Ft}=getSpringOptions({...et,velocity:-millisecondsToSeconds(et.velocity||0)}),$t=Rt||0,zt=kt/(2*Math.sqrt(St*Tt)),Kt=dt-ut,Bt=millisecondsToSeconds(Math.sqrt(St/Tt)),Ut=Math.abs(Kt)<5;ot||(ot=Ut?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),ct||(ct=Ut?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Jt;if(zt<1){const tn=calcAngularFreq(Bt,zt);Jt=nn=>{const rn=Math.exp(-zt*Bt*nn);return dt-rn*(($t+zt*Bt*Kt)/tn*Math.sin(tn*nn)+Kt*Math.cos(tn*nn))}}else if(zt===1)Jt=tn=>dt-Math.exp(-Bt*tn)*(Kt+($t+Bt*Kt)*tn);else{const tn=Bt*Math.sqrt(zt*zt-1);Jt=nn=>{const rn=Math.exp(-zt*Bt*nn),on=Math.min(tn*nn,300);return dt-rn*(($t+zt*Bt*Kt)*Math.sinh(on)+tn*Kt*Math.cosh(on))/tn}}const en={calculatedDuration:Ft&&jt||null,next:tn=>{const nn=Jt(tn);if(Ft)ft.done=tn>=jt;else{let rn=0;zt<1&&(rn=tn===0?secondsToMilliseconds($t):calcGeneratorVelocity(Jt,tn,nn));const on=Math.abs(rn)<=ot,dn=Math.abs(dt-nn)<=ct;ft.done=on&&dn}return ft.value=ft.done?dt:nn,ft},toString:()=>{const tn=Math.min(calcGeneratorDuration(en),maxGeneratorDuration),nn=generateLinearEasing(rn=>en.next(tn*rn).value,tn,30);return tn+"ms "+nn}};return en}function inertia({keyframes:it,velocity:g=0,power:et=.8,timeConstant:ot=325,bounceDamping:ct=10,bounceStiffness:ut=500,modifyTarget:dt,min:ft,max:St,restDelta:kt=.5,restSpeed:Tt}){const jt=it[0],Rt={done:!1,value:jt},Ft=on=>ft!==void 0&&on<ft||St!==void 0&&on>St,$t=on=>ft===void 0?St:St===void 0||Math.abs(ft-on)<Math.abs(St-on)?ft:St;let zt=et*g;const Kt=jt+zt,Bt=dt===void 0?Kt:dt(Kt);Bt!==Kt&&(zt=Bt-jt);const Ut=on=>-zt*Math.exp(-on/ot),Jt=on=>Bt+Ut(on),en=on=>{const dn=Ut(on),cn=Jt(on);Rt.done=Math.abs(dn)<=kt,Rt.value=Rt.done?Bt:cn};let tn,nn;const rn=on=>{Ft(Rt.value)&&(tn=on,nn=spring({keyframes:[Rt.value,$t(Rt.value)],velocity:calcGeneratorVelocity(Jt,on,Rt.value),damping:ct,stiffness:ut,restDelta:kt,restSpeed:Tt}))};return rn(0),{calculatedDuration:null,next:on=>{let dn=!1;return!nn&&tn===void 0&&(dn=!0,en(on),rn(on)),tn!==void 0&&on>=tn?nn.next(on-tn):(!dn&&en(on),Rt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=it=>Array.isArray(it)&&typeof it[0]!="number",isBezierDefinition=it=>Array.isArray(it)&&typeof it[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=it=>{if(isBezierDefinition(it)){invariant$1(it.length===4);const[g,et,ot,ct]=it;return cubicBezier(g,et,ot,ct)}else if(typeof it=="string")return easingLookup[it];return it},combineFunctions=(it,g)=>et=>g(it(et)),pipe=(...it)=>it.reduce(combineFunctions),mixNumber$1=(it,g,et)=>it+(g-it)*et;function hueToRgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslaToRgba({hue:it,saturation:g,lightness:et,alpha:ot}){it/=360,g/=100,et/=100;let ct=0,ut=0,dt=0;if(!g)ct=ut=dt=et;else{const ft=et<.5?et*(1+g):et+g-et*g,St=2*et-ft;ct=hueToRgb(St,ft,it+1/3),ut=hueToRgb(St,ft,it),dt=hueToRgb(St,ft,it-1/3)}return{red:Math.round(ct*255),green:Math.round(ut*255),blue:Math.round(dt*255),alpha:ot}}function mixImmediate(it,g){return et=>et>0?g:it}const mixLinearColor=(it,g,et)=>{const ot=it*it,ct=et*(g*g-ot)+ot;return ct<0?0:Math.sqrt(ct)},colorTypes=[hex,rgba,hsla],getColorType=it=>colorTypes.find(g=>g.test(it));function asRGBA(it){const g=getColorType(it);if(!g)return!1;let et=g.parse(it);return g===hsla&&(et=hslaToRgba(et)),et}const mixColor=(it,g)=>{const et=asRGBA(it),ot=asRGBA(g);if(!et||!ot)return mixImmediate(it,g);const ct={...et};return ut=>(ct.red=mixLinearColor(et.red,ot.red,ut),ct.green=mixLinearColor(et.green,ot.green,ut),ct.blue=mixLinearColor(et.blue,ot.blue,ut),ct.alpha=mixNumber$1(et.alpha,ot.alpha,ut),rgba.transform(ct))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(it,g){return invisibleValues.has(it)?et=>et<=0?it:g:et=>et>=1?g:it}function mixNumber(it,g){return et=>mixNumber$1(it,g,et)}function getMixer(it){return typeof it=="number"?mixNumber:typeof it=="string"?isCSSVariableToken(it)?mixImmediate:color.test(it)?mixColor:mixComplex:Array.isArray(it)?mixArray:typeof it=="object"?color.test(it)?mixColor:mixObject:mixImmediate}function mixArray(it,g){const et=[...it],ot=et.length,ct=it.map((ut,dt)=>getMixer(ut)(ut,g[dt]));return ut=>{for(let dt=0;dt<ot;dt++)et[dt]=ct[dt](ut);return et}}function mixObject(it,g){const et={...it,...g},ot={};for(const ct in et)it[ct]!==void 0&&g[ct]!==void 0&&(ot[ct]=getMixer(it[ct])(it[ct],g[ct]));return ct=>{for(const ut in ot)et[ut]=ot[ut](ct);return et}}function matchOrder(it,g){var et;const ot=[],ct={color:0,var:0,number:0};for(let ut=0;ut<g.values.length;ut++){const dt=g.types[ut],ft=it.indexes[dt][ct[dt]],St=(et=it.values[ft])!==null&&et!==void 0?et:0;ot[ut]=St,ct[dt]++}return ot}const mixComplex=(it,g)=>{const et=complex.createTransformer(g),ot=analyseComplexValue(it),ct=analyseComplexValue(g);return ot.indexes.var.length===ct.indexes.var.length&&ot.indexes.color.length===ct.indexes.color.length&&ot.indexes.number.length>=ct.indexes.number.length?invisibleValues.has(it)&&!ct.values.length||invisibleValues.has(g)&&!ot.values.length?mixVisibility(it,g):pipe(mixArray(matchOrder(ot,ct),ct.values),et):mixImmediate(it,g)};function mix(it,g,et){return typeof it=="number"&&typeof g=="number"&&typeof et=="number"?mixNumber$1(it,g,et):getMixer(it)(it,g)}function createMixers(it,g,et){const ot=[],ct=et||mix,ut=it.length-1;for(let dt=0;dt<ut;dt++){let ft=ct(it[dt],it[dt+1]);if(g){const St=Array.isArray(g)?g[dt]||noop$2:g;ft=pipe(St,ft)}ot.push(ft)}return ot}function interpolate(it,g,{clamp:et=!0,ease:ot,mixer:ct}={}){const ut=it.length;if(invariant$1(ut===g.length),ut===1)return()=>g[0];if(ut===2&&it[0]===it[1])return()=>g[1];it[0]>it[ut-1]&&(it=[...it].reverse(),g=[...g].reverse());const dt=createMixers(g,ot,ct),ft=dt.length,St=kt=>{let Tt=0;if(ft>1)for(;Tt<it.length-2&&!(kt<it[Tt+1]);Tt++);const jt=progress(it[Tt],it[Tt+1],kt);return dt[Tt](jt)};return et?kt=>St(clamp(it[0],it[ut-1],kt)):St}function fillOffset(it,g){const et=it[it.length-1];for(let ot=1;ot<=g;ot++){const ct=progress(0,g,ot);it.push(mixNumber$1(et,1,ct))}}function defaultOffset(it){const g=[0];return fillOffset(g,it.length-1),g}function convertOffsetToTimes(it,g){return it.map(et=>et*g)}function defaultEasing(it,g){return it.map(()=>g||easeInOut).splice(0,it.length-1)}function keyframes({duration:it=300,keyframes:g,times:et,ease:ot="easeInOut"}){const ct=isEasingArray(ot)?ot.map(easingDefinitionToFunction):easingDefinitionToFunction(ot),ut={done:!1,value:g[0]},dt=convertOffsetToTimes(et&&et.length===g.length?et:defaultOffset(g),it),ft=interpolate(dt,g,{ease:Array.isArray(ct)?ct:defaultEasing(g,ct)});return{calculatedDuration:it,next:St=>(ut.value=ft(St),ut.done=St>=it,ut)}}const frameloopDriver=it=>{const g=({timestamp:et})=>it(et);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=it=>it/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:St}=this.options;St&&St()};const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options,dt=(ct==null?void 0:ct.KeyframeResolver)||KeyframeResolver,ft=(St,kt)=>this.onKeyframesResolved(St,kt);this.resolver=new dt(ut,ft,et,ot,ct),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:et="keyframes",repeat:ot=0,repeatDelay:ct=0,repeatType:ut,velocity:dt=0}=this.options,ft=isGenerator(et)?et:generators[et]||keyframes;let St,kt;ft!==keyframes&&typeof g[0]!="number"&&(St=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const Tt=ft({...this.options,keyframes:g});ut==="mirror"&&(kt=ft({...this.options,keyframes:[...g].reverse(),velocity:-dt})),Tt.calculatedDuration===null&&(Tt.calculatedDuration=calcGeneratorDuration(Tt));const{calculatedDuration:jt}=Tt,Rt=jt+ct,Ft=Rt*(ot+1)-ct;return{generator:Tt,mirroredGenerator:kt,mapPercentToKeyframes:St,calculatedDuration:jt,resolvedDuration:Rt,totalDuration:Ft}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,et=!1){const{resolved:ot}=this;if(!ot){const{keyframes:on}=this.options;return{done:!0,value:on[on.length-1]}}const{finalKeyframe:ct,generator:ut,mirroredGenerator:dt,mapPercentToKeyframes:ft,keyframes:St,calculatedDuration:kt,totalDuration:Tt,resolvedDuration:jt}=ot;if(this.startTime===null)return ut.next(0);const{delay:Rt,repeat:Ft,repeatType:$t,repeatDelay:zt,onUpdate:Kt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-Tt/this.speed,this.startTime)),et?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const Bt=this.currentTime-Rt*(this.speed>=0?1:-1),Ut=this.speed>=0?Bt<0:Bt>Tt;this.currentTime=Math.max(Bt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Tt);let Jt=this.currentTime,en=ut;if(Ft){const on=Math.min(this.currentTime,Tt)/jt;let dn=Math.floor(on),cn=on%1;!cn&&on>=1&&(cn=1),cn===1&&dn--,dn=Math.min(dn,Ft+1),!!(dn%2)&&($t==="reverse"?(cn=1-cn,zt&&(cn-=zt/jt)):$t==="mirror"&&(en=dt)),Jt=clamp(0,1,cn)*jt}const tn=Ut?{done:!1,value:St[0]}:en.next(Jt);ft&&(tn.value=ft(tn.value));let{done:nn}=tn;!Ut&&kt!==null&&(nn=this.speed>=0?this.currentTime>=Tt:this.currentTime<=0);const rn=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&nn);return rn&&ct!==void 0&&(tn.value=getFinalKeyframe(St,this.options,ct)),Kt&&Kt(tn.value),rn&&this.finish(),tn}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const et=this.playbackSpeed!==g;this.playbackSpeed=g,et&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:et,startTime:ot}=this.options;this.driver||(this.driver=g(ut=>this.tick(ut))),et&&et();const ct=this.driver.now();this.holdTime!==null?this.startTime=ct-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=ct):this.startTime=ot??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(it){return new MainThreadAnimation(it)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(it){let g;return()=>(g===void 0&&(g=it()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(it,g){const et=memo(it);return()=>{var ot;return(ot=supportsFlags[g])!==null&&ot!==void 0?ot:et()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(it){return!!(typeof it=="function"&&supportsLinearEasing()||!it||typeof it=="string"&&(it in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(it)||Array.isArray(it)&&it.every(isWaapiSupportedEasing))}const cubicBezierAsString=([it,g,et,ot])=>`cubic-bezier(${it}, ${g}, ${et}, ${ot})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(it,g){if(it)return typeof it=="function"&&supportsLinearEasing()?generateLinearEasing(it,g):isBezierDefinition(it)?cubicBezierAsString(it):Array.isArray(it)?it.map(et=>mapEasingToNativeEasing(et,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[it]}function startWaapiAnimation(it,g,et,{delay:ot=0,duration:ct=300,repeat:ut=0,repeatType:dt="loop",ease:ft="easeInOut",times:St}={}){const kt={[g]:et};St&&(kt.offset=St);const Tt=mapEasingToNativeEasing(ft,ct);return Array.isArray(Tt)&&(kt.easing=Tt),it.animate(kt,{delay:ot,duration:ct,easing:Array.isArray(Tt)?"linear":Tt,fill:"both",iterations:ut+1,direction:dt==="reverse"?"alternate":"normal"})}function attachTimeline(it,g){it.timeline=g,it.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(it){return isGenerator(it.type)||it.type==="spring"||!isWaapiSupportedEasing(it.ease)}function pregenerateKeyframes(it,g){const et=new MainThreadAnimation({...g,keyframes:it,repeat:0,delay:0,isGenerator:!0});let ot={done:!1,value:it[0]};const ct=[];let ut=0;for(;!ot.done&&ut<maxDuration;)ot=et.sample(ut),ct.push(ot.value),ut+=sampleDelta;return{times:void 0,keyframes:ct,duration:ut-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(it){return it in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options;this.resolver=new DOMKeyframesResolver(ut,(dt,ft)=>this.onKeyframesResolved(dt,ft),et,ot,ct),this.resolver.scheduleResolve()}initPlayback(g,et){var ot;let{duration:ct=300,times:ut,ease:dt,type:ft,motionValue:St,name:kt,startTime:Tt}=this.options;if(!(!((ot=St.owner)===null||ot===void 0)&&ot.current))return!1;if(typeof dt=="string"&&supportsLinearEasing()&&isUnsupportedEase(dt)&&(dt=unsupportedEasingFunctions[dt]),requiresPregeneratedKeyframes(this.options)){const{onComplete:Rt,onUpdate:Ft,motionValue:$t,element:zt,...Kt}=this.options,Bt=pregenerateKeyframes(g,Kt);g=Bt.keyframes,g.length===1&&(g[1]=g[0]),ct=Bt.duration,ut=Bt.times,dt=Bt.ease,ft="keyframes"}const jt=startWaapiAnimation(St.owner.current,kt,g,{...this.options,duration:ct,times:ut,ease:dt});return jt.startTime=Tt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(jt,this.pendingTimeline),this.pendingTimeline=void 0):jt.onfinish=()=>{const{onComplete:Rt}=this.options;St.set(getFinalKeyframe(g,this.options,et)),Rt&&Rt(),this.cancel(),this.resolveFinishedPromise()},{animation:jt,duration:ct,times:ut,type:ft,ease:dt,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:et}=g;return millisecondsToSeconds(et)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:et}=g;return millisecondsToSeconds(et.currentTime||0)}set time(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:et}=g;return et.playbackRate}set speed(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:et}=g;return et.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:et}=g;return et.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:et}=this;if(!et)return noop$2;const{animation:ot}=et;attachTimeline(ot,g)}return noop$2}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.playState==="finished"&&this.updateFinishedPromise(),et.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:et,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft}=g;if(et.playState==="idle"||et.playState==="finished")return;if(this.time){const{motionValue:kt,onUpdate:Tt,onComplete:jt,element:Rt,...Ft}=this.options,$t=new MainThreadAnimation({...Ft,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft,isGenerator:!0}),zt=secondsToMilliseconds(this.time);kt.setWithVelocity($t.sample(zt-sampleDelta).value,$t.sample(zt).value,sampleDelta)}const{onStop:St}=this.options;St&&St(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:et,name:ot,repeatDelay:ct,repeatType:ut,damping:dt,type:ft}=g;return supportsWaapi()&&ot&&acceleratedValues.has(ot)&&et&&et.owner&&et.owner.current instanceof HTMLElement&&!et.owner.getProps().onUpdate&&!ct&&ut!=="mirror"&&dt!==0&&ft!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,et){return Promise.all(this.animations).then(g).catch(et)}getAll(g){return this.animations[0][g]}setAll(g,et){for(let ot=0;ot<this.animations.length;ot++)this.animations[ot][g]=et}attachTimeline(g,et){const ot=this.animations.map(ct=>supportsScrollTimeline()&&ct.attachTimeline?ct.attachTimeline(g):et(ct));return()=>{ot.forEach((ct,ut)=>{ct&&ct(),this.animations[ut].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let et=0;et<this.animations.length;et++)g=Math.max(g,this.animations[et].duration);return g}runAll(g){this.animations.forEach(et=>et[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:it,delay:g,delayChildren:et,staggerChildren:ot,staggerDirection:ct,repeat:ut,repeatType:dt,repeatDelay:ft,from:St,elapsed:kt,...Tt}){return!!Object.keys(Tt).length}const animateMotionValue=(it,g,et,ot={},ct,ut)=>dt=>{const ft=getValueTransition(ot,it)||{},St=ft.delay||ot.delay||0;let{elapsed:kt=0}=ot;kt=kt-secondsToMilliseconds(St);let Tt={keyframes:Array.isArray(et)?et:[null,et],ease:"easeOut",velocity:g.getVelocity(),...ft,delay:-kt,onUpdate:Rt=>{g.set(Rt),ft.onUpdate&&ft.onUpdate(Rt)},onComplete:()=>{dt(),ft.onComplete&&ft.onComplete()},name:it,motionValue:g,element:ut?void 0:ct};isTransitionDefined(ft)||(Tt={...Tt,...getDefaultTransition(it,Tt)}),Tt.duration&&(Tt.duration=secondsToMilliseconds(Tt.duration)),Tt.repeatDelay&&(Tt.repeatDelay=secondsToMilliseconds(Tt.repeatDelay)),Tt.from!==void 0&&(Tt.keyframes[0]=Tt.from);let jt=!1;if((Tt.type===!1||Tt.duration===0&&!Tt.repeatDelay)&&(Tt.duration=0,Tt.delay===0&&(jt=!0)),jt&&!ut&&g.get()!==void 0){const Rt=getFinalKeyframe(Tt.keyframes,ft);if(Rt!==void 0)return frame.update(()=>{Tt.onUpdate(Rt),Tt.onComplete()}),new GroupPlaybackControls([])}return!ut&&AcceleratedAnimation.supports(Tt)?new AcceleratedAnimation(Tt):new MainThreadAnimation(Tt)},isCustomValue=it=>!!(it&&typeof it=="object"&&it.mix&&it.toValue),resolveFinalValueInKeyframes=it=>isKeyframesTarget(it)?it[it.length-1]||0:it;function addUniqueItem(it,g){it.indexOf(g)===-1&&it.push(g)}function removeItem(it,g){const et=it.indexOf(g);et>-1&&it.splice(et,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,et,ot){const ct=this.subscriptions.length;if(ct)if(ct===1)this.subscriptions[0](g,et,ot);else for(let ut=0;ut<ct;ut++){const dt=this.subscriptions[ut];dt&&dt(g,et,ot)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=it=>!isNaN(parseFloat(it));class MotionValue{constructor(g,et={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(ot,ct=!0)=>{const ut=time.now();this.updatedAt!==ut&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(ot),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),ct&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=et.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,et){this.events[g]||(this.events[g]=new SubscriptionManager);const ot=this.events[g].add(et);return g==="change"?()=>{ot(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:ot}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,et){this.passiveEffect=g,this.stopPassiveEffect=et}set(g,et=!0){!et||!this.passiveEffect?this.updateAndNotify(g,et):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,et,ot){this.set(et),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-ot}jump(g,et=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,et&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const et=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),et)}start(g){return this.stop(),new Promise(et=>{this.hasAnimated=!0,this.animation=g(et),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(it,g){return new MotionValue(it,g)}function setMotionValue(it,g,et){it.hasValue(g)?it.getValue(g).set(et):it.addValue(g,motionValue(et))}function setTarget(it,g){const et=resolveVariant(it,g);let{transitionEnd:ot={},transition:ct={},...ut}=et||{};ut={...ut,...ot};for(const dt in ut){const ft=resolveFinalValueInKeyframes(ut[dt]);setMotionValue(it,dt,ft)}}const camelToDash=it=>it.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(it){return it.props[optimizedAppearDataAttribute]}const isMotionValue=it=>!!(it&&it.getVelocity);function isWillChangeMotionValue(it){return!!(isMotionValue(it)&&it.add)}function addValueToWillChange(it,g){const et=it.getValue("willChange");if(isWillChangeMotionValue(et))return et.add(g)}function shouldBlockAnimation({protectedKeys:it,needsAnimating:g},et){const ot=it.hasOwnProperty(et)&&g[et]!==!0;return g[et]=!1,ot}function animateTarget(it,g,{delay:et=0,transitionOverride:ot,type:ct}={}){var ut;let{transition:dt=it.getDefaultTransition(),transitionEnd:ft,...St}=g;ot&&(dt=ot);const kt=[],Tt=ct&&it.animationState&&it.animationState.getState()[ct];for(const jt in St){const Rt=it.getValue(jt,(ut=it.latestValues[jt])!==null&&ut!==void 0?ut:null),Ft=St[jt];if(Ft===void 0||Tt&&shouldBlockAnimation(Tt,jt))continue;const $t={delay:et,...getValueTransition(dt||{},jt)};let zt=!1;if(window.MotionHandoffAnimation){const Bt=getOptimisedAppearId(it);if(Bt){const Ut=window.MotionHandoffAnimation(Bt,jt,frame);Ut!==null&&($t.startTime=Ut,zt=!0)}}addValueToWillChange(it,jt),Rt.start(animateMotionValue(jt,Rt,Ft,it.shouldReduceMotion&&transformProps.has(jt)?{type:!1}:$t,it,zt));const Kt=Rt.animation;Kt&&kt.push(Kt)}return ft&&Promise.all(kt).then(()=>{frame.update(()=>{ft&&setTarget(it,ft)})}),kt}function animateVariant(it,g,et={}){var ot;const ct=resolveVariant(it,g,et.type==="exit"?(ot=it.presenceContext)===null||ot===void 0?void 0:ot.custom:void 0);let{transition:ut=it.getDefaultTransition()||{}}=ct||{};et.transitionOverride&&(ut=et.transitionOverride);const dt=ct?()=>Promise.all(animateTarget(it,ct,et)):()=>Promise.resolve(),ft=it.variantChildren&&it.variantChildren.size?(kt=0)=>{const{delayChildren:Tt=0,staggerChildren:jt,staggerDirection:Rt}=ut;return animateChildren(it,g,Tt+kt,jt,Rt,et)}:()=>Promise.resolve(),{when:St}=ut;if(St){const[kt,Tt]=St==="beforeChildren"?[dt,ft]:[ft,dt];return kt().then(()=>Tt())}else return Promise.all([dt(),ft(et.delay)])}function animateChildren(it,g,et=0,ot=0,ct=1,ut){const dt=[],ft=(it.variantChildren.size-1)*ot,St=ct===1?(kt=0)=>kt*ot:(kt=0)=>ft-kt*ot;return Array.from(it.variantChildren).sort(sortByTreeOrder).forEach((kt,Tt)=>{kt.notify("AnimationStart",g),dt.push(animateVariant(kt,g,{...ut,delay:et+St(Tt)}).then(()=>kt.notify("AnimationComplete",g)))}),Promise.all(dt)}function sortByTreeOrder(it,g){return it.sortNodePosition(g)}function animateVisualElement(it,g,et={}){it.notify("AnimationStart",g);let ot;if(Array.isArray(g)){const ct=g.map(ut=>animateVariant(it,ut,et));ot=Promise.all(ct)}else if(typeof g=="string")ot=animateVariant(it,g,et);else{const ct=typeof g=="function"?resolveVariant(it,g,et.custom):g;ot=Promise.all(animateTarget(it,ct,et))}return ot.then(()=>{it.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(it){if(!it)return;if(!it.isControllingVariants){const et=it.parent?getVariantContext(it.parent)||{}:{};return it.props.initial!==void 0&&(et.initial=it.props.initial),et}const g={};for(let et=0;et<numVariantProps;et++){const ot=variantProps[et],ct=it.props[ot];(isVariantLabel(ct)||ct===!1)&&(g[ot]=ct)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(it){return g=>Promise.all(g.map(({animation:et,options:ot})=>animateVisualElement(it,et,ot)))}function createAnimationState(it){let g=animateList(it),et=createState(),ot=!0;const ct=St=>(kt,Tt)=>{var jt;const Rt=resolveVariant(it,Tt,St==="exit"?(jt=it.presenceContext)===null||jt===void 0?void 0:jt.custom:void 0);if(Rt){const{transition:Ft,transitionEnd:$t,...zt}=Rt;kt={...kt,...zt,...$t}}return kt};function ut(St){g=St(it)}function dt(St){const{props:kt}=it,Tt=getVariantContext(it.parent)||{},jt=[],Rt=new Set;let Ft={},$t=1/0;for(let Kt=0;Kt<numAnimationTypes;Kt++){const Bt=reversePriorityOrder[Kt],Ut=et[Bt],Jt=kt[Bt]!==void 0?kt[Bt]:Tt[Bt],en=isVariantLabel(Jt),tn=Bt===St?Ut.isActive:null;tn===!1&&($t=Kt);let nn=Jt===Tt[Bt]&&Jt!==kt[Bt]&&en;if(nn&&ot&&it.manuallyAnimateOnMount&&(nn=!1),Ut.protectedKeys={...Ft},!Ut.isActive&&tn===null||!Jt&&!Ut.prevProp||isAnimationControls(Jt)||typeof Jt=="boolean")continue;const rn=checkVariantsDidChange(Ut.prevProp,Jt);let on=rn||Bt===St&&Ut.isActive&&!nn&&en||Kt>$t&&en,dn=!1;const cn=Array.isArray(Jt)?Jt:[Jt];let fn=cn.reduce(ct(Bt),{});tn===!1&&(fn={});const{prevResolvedValues:mn={}}=Ut,En={...mn,...fn},Sn=yn=>{on=!0,Rt.has(yn)&&(dn=!0,Rt.delete(yn)),Ut.needsAnimating[yn]=!0;const an=it.getValue(yn);an&&(an.liveStyle=!1)};for(const yn in En){const an=fn[yn],un=mn[yn];if(Ft.hasOwnProperty(yn))continue;let bn=!1;isKeyframesTarget(an)&&isKeyframesTarget(un)?bn=!shallowCompare(an,un):bn=an!==un,bn?an!=null?Sn(yn):Rt.add(yn):an!==void 0&&Rt.has(yn)?Sn(yn):Ut.protectedKeys[yn]=!0}Ut.prevProp=Jt,Ut.prevResolvedValues=fn,Ut.isActive&&(Ft={...Ft,...fn}),ot&&it.blockInitialAnimation&&(on=!1),on&&(!(nn&&rn)||dn)&&jt.push(...cn.map(yn=>({animation:yn,options:{type:Bt}})))}if(Rt.size){const Kt={};Rt.forEach(Bt=>{const Ut=it.getBaseTarget(Bt),Jt=it.getValue(Bt);Jt&&(Jt.liveStyle=!0),Kt[Bt]=Ut??null}),jt.push({animation:Kt})}let zt=!!jt.length;return ot&&(kt.initial===!1||kt.initial===kt.animate)&&!it.manuallyAnimateOnMount&&(zt=!1),ot=!1,zt?g(jt):Promise.resolve()}function ft(St,kt){var Tt;if(et[St].isActive===kt)return Promise.resolve();(Tt=it.variantChildren)===null||Tt===void 0||Tt.forEach(Rt=>{var Ft;return(Ft=Rt.animationState)===null||Ft===void 0?void 0:Ft.setActive(St,kt)}),et[St].isActive=kt;const jt=dt(St);for(const Rt in et)et[Rt].protectedKeys={};return jt}return{animateChanges:dt,setActive:ft,setAnimateFunction:ut,getState:()=>et,reset:()=>{et=createState(),ot=!0}}}function checkVariantsDidChange(it,g){return typeof g=="string"?g!==it:Array.isArray(g)?!shallowCompare(g,it):!1}function createTypeState(it=!1){return{isActive:it,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:et}=this.node.prevProps||{};g!==et&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:et}=this.node.presenceContext,{isPresent:ot}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===ot)return;const ct=this.node.animationState.setActive("exit",!g);et&&!g&&ct.then(()=>et(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(it,g,et){var ot;if(it instanceof Element)return[it];if(typeof it=="string"){let ct=document;g&&(ct=g.current);const ut=(ot=et==null?void 0:et[it])!==null&&ot!==void 0?ot:ct.querySelectorAll(it);return ut?Array.from(ut):[]}return Array.from(it)}function setupGesture(it,g){const et=resolveElements(it),ot=new AbortController,ct={passive:!0,...g,signal:ot.signal};return[et,ct,()=>ot.abort()]}function filterEvents$1(it){return g=>{g.pointerType==="touch"||isDragActive()||it(g)}}function hover(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=filterEvents$1(ft=>{const{target:St}=ft,kt=g(ft);if(!kt||!St)return;const Tt=filterEvents$1(jt=>{kt(jt),St.removeEventListener("pointerleave",Tt)});St.addEventListener("pointerleave",Tt,ct)});return ot.forEach(ft=>{ft.addEventListener("pointerenter",dt,ct)}),ut}const isPrimaryPointer=it=>it.pointerType==="mouse"?typeof it.button!="number"||it.button<=0:it.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(it){return g=>{g.key==="Enter"&&it(g)}}function firePointerEvent(it,g){it.dispatchEvent(new PointerEvent("pointer"+g,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(it,g)=>{const et=it.currentTarget;if(!et)return;const ot=filterEvents(()=>{if(isPressing.has(et))return;firePointerEvent(et,"down");const ct=filterEvents(()=>{firePointerEvent(et,"up")}),ut=()=>firePointerEvent(et,"cancel");et.addEventListener("keyup",ct,g),et.addEventListener("blur",ut,g)});et.addEventListener("keydown",ot,g),et.addEventListener("blur",()=>et.removeEventListener("keydown",ot),g)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(it){return focusableElements.has(it.tagName)||it.tabIndex!==-1}const isNodeOrChild=(it,g)=>g?it===g?!0:isNodeOrChild(it,g.parentElement):!1;function isValidPressEvent(it){return isPrimaryPointer(it)&&!isDragActive()}function press(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=ft=>{const St=ft.currentTarget;if(!isValidPressEvent(ft)||isPressing.has(St))return;isPressing.add(St);const kt=g(ft),Tt=(Ft,$t)=>{window.removeEventListener("pointerup",jt),window.removeEventListener("pointercancel",Rt),!(!isValidPressEvent(Ft)||!isPressing.has(St))&&(isPressing.delete(St),kt&&kt(Ft,{success:$t}))},jt=Ft=>{Tt(Ft,et.useGlobalTarget||isNodeOrChild(St,Ft.target))},Rt=Ft=>{Tt(Ft,!1)};window.addEventListener("pointerup",jt,ct),window.addEventListener("pointercancel",Rt,ct)};return ot.forEach(ft=>{isElementKeyboardAccessible(ft)||(ft.tabIndex=0),(et.useGlobalTarget?window:ft).addEventListener("pointerdown",dt,ct),ft.addEventListener("focus",kt=>enableKeyboardPress(kt,ct),ct)}),ut}function setDragLock(it){return it==="x"||it==="y"?isDragging[it]?null:(isDragging[it]=!0,()=>{isDragging[it]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(it){return{point:{x:it.pageX,y:it.pageY}}}const addPointerInfo=it=>g=>isPrimaryPointer(g)&&it(g,extractEventInfo(g));function addDomEvent(it,g,et,ot={passive:!0}){return it.addEventListener(g,et,ot),()=>it.removeEventListener(g,et)}function addPointerEvent(it,g,et,ot){return addDomEvent(it,g,addPointerInfo(et),ot)}const distance=(it,g)=>Math.abs(it-g);function distance2D(it,g){const et=distance(it.x,g.x),ot=distance(it.y,g.y);return Math.sqrt(et**2+ot**2)}class PanSession{constructor(g,et,{transformPagePoint:ot,contextWindow:ct,dragSnapToOrigin:ut=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const jt=getPanInfo(this.lastMoveEventInfo,this.history),Rt=this.startEvent!==null,Ft=distance2D(jt.offset,{x:0,y:0})>=3;if(!Rt&&!Ft)return;const{point:$t}=jt,{timestamp:zt}=frameData;this.history.push({...$t,timestamp:zt});const{onStart:Kt,onMove:Bt}=this.handlers;Rt||(Kt&&Kt(this.lastMoveEvent,jt),this.startEvent=this.lastMoveEvent),Bt&&Bt(this.lastMoveEvent,jt)},this.handlePointerMove=(jt,Rt)=>{this.lastMoveEvent=jt,this.lastMoveEventInfo=transformPoint(Rt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(jt,Rt)=>{this.end();const{onEnd:Ft,onSessionEnd:$t,resumeAnimation:zt}=this.handlers;if(this.dragSnapToOrigin&&zt&&zt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Kt=getPanInfo(jt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Rt,this.transformPagePoint),this.history);this.startEvent&&Ft&&Ft(jt,Kt),$t&&$t(jt,Kt)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=ut,this.handlers=et,this.transformPagePoint=ot,this.contextWindow=ct||window;const dt=extractEventInfo(g),ft=transformPoint(dt,this.transformPagePoint),{point:St}=ft,{timestamp:kt}=frameData;this.history=[{...St,timestamp:kt}];const{onSessionStart:Tt}=et;Tt&&Tt(g,getPanInfo(ft,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(it,g){return g?{point:g(it.point)}:it}function subtractPoint(it,g){return{x:it.x-g.x,y:it.y-g.y}}function getPanInfo({point:it},g){return{point:it,delta:subtractPoint(it,lastDevicePoint(g)),offset:subtractPoint(it,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(it){return it[0]}function lastDevicePoint(it){return it[it.length-1]}function getVelocity(it,g){if(it.length<2)return{x:0,y:0};let et=it.length-1,ot=null;const ct=lastDevicePoint(it);for(;et>=0&&(ot=it[et],!(ct.timestamp-ot.timestamp>secondsToMilliseconds(g)));)et--;if(!ot)return{x:0,y:0};const ut=millisecondsToSeconds(ct.timestamp-ot.timestamp);if(ut===0)return{x:0,y:0};const dt={x:(ct.x-ot.x)/ut,y:(ct.y-ot.y)/ut};return dt.x===1/0&&(dt.x=0),dt.y===1/0&&(dt.y=0),dt}function isRefObject(it){return it&&typeof it=="object"&&Object.prototype.hasOwnProperty.call(it,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(it){return it.max-it.min}function isNear$1(it,g,et){return Math.abs(it-g)<=et}function calcAxisDelta(it,g,et,ot=.5){it.origin=ot,it.originPoint=mixNumber$1(g.min,g.max,it.origin),it.scale=calcLength(et)/calcLength(g),it.translate=mixNumber$1(et.min,et.max,it.origin)-it.originPoint,(it.scale>=SCALE_MIN&&it.scale<=SCALE_MAX||isNaN(it.scale))&&(it.scale=1),(it.translate>=TRANSLATE_MIN&&it.translate<=TRANSLATE_MAX||isNaN(it.translate))&&(it.translate=0)}function calcBoxDelta(it,g,et,ot){calcAxisDelta(it.x,g.x,et.x,ot?ot.originX:void 0),calcAxisDelta(it.y,g.y,et.y,ot?ot.originY:void 0)}function calcRelativeAxis(it,g,et){it.min=et.min+g.min,it.max=it.min+calcLength(g)}function calcRelativeBox(it,g,et){calcRelativeAxis(it.x,g.x,et.x),calcRelativeAxis(it.y,g.y,et.y)}function calcRelativeAxisPosition(it,g,et){it.min=g.min-et.min,it.max=it.min+calcLength(g)}function calcRelativePosition(it,g,et){calcRelativeAxisPosition(it.x,g.x,et.x),calcRelativeAxisPosition(it.y,g.y,et.y)}function applyConstraints(it,{min:g,max:et},ot){return g!==void 0&&it<g?it=ot?mixNumber$1(g,it,ot.min):Math.max(it,g):et!==void 0&&it>et&&(it=ot?mixNumber$1(et,it,ot.max):Math.min(it,et)),it}function calcRelativeAxisConstraints(it,g,et){return{min:g!==void 0?it.min+g:void 0,max:et!==void 0?it.max+et-(it.max-it.min):void 0}}function calcRelativeConstraints(it,{top:g,left:et,bottom:ot,right:ct}){return{x:calcRelativeAxisConstraints(it.x,et,ct),y:calcRelativeAxisConstraints(it.y,g,ot)}}function calcViewportAxisConstraints(it,g){let et=g.min-it.min,ot=g.max-it.max;return g.max-g.min<it.max-it.min&&([et,ot]=[ot,et]),{min:et,max:ot}}function calcViewportConstraints(it,g){return{x:calcViewportAxisConstraints(it.x,g.x),y:calcViewportAxisConstraints(it.y,g.y)}}function calcOrigin$1(it,g){let et=.5;const ot=calcLength(it),ct=calcLength(g);return ct>ot?et=progress(g.min,g.max-ot,it.min):ot>ct&&(et=progress(it.min,it.max-ct,g.min)),clamp(0,1,et)}function rebaseAxisConstraints(it,g){const et={};return g.min!==void 0&&(et.min=g.min-it.min),g.max!==void 0&&(et.max=g.max-it.min),et}const defaultElastic=.35;function resolveDragElastic(it=defaultElastic){return it===!1?it=0:it===!0&&(it=defaultElastic),{x:resolveAxisElastic(it,"left","right"),y:resolveAxisElastic(it,"top","bottom")}}function resolveAxisElastic(it,g,et){return{min:resolvePointElastic(it,g),max:resolvePointElastic(it,et)}}function resolvePointElastic(it,g){return typeof it=="number"?it:it[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(it){return[it("x"),it("y")]}function convertBoundingBoxToBox({top:it,left:g,right:et,bottom:ot}){return{x:{min:g,max:et},y:{min:it,max:ot}}}function convertBoxToBoundingBox({x:it,y:g}){return{top:g.min,right:it.max,bottom:g.max,left:it.min}}function transformBoxPoints(it,g){if(!g)return it;const et=g({x:it.left,y:it.top}),ot=g({x:it.right,y:it.bottom});return{top:et.y,left:et.x,bottom:ot.y,right:ot.x}}function isIdentityScale(it){return it===void 0||it===1}function hasScale({scale:it,scaleX:g,scaleY:et}){return!isIdentityScale(it)||!isIdentityScale(g)||!isIdentityScale(et)}function hasTransform(it){return hasScale(it)||has2DTranslate(it)||it.z||it.rotate||it.rotateX||it.rotateY||it.skewX||it.skewY}function has2DTranslate(it){return is2DTranslate(it.x)||is2DTranslate(it.y)}function is2DTranslate(it){return it&&it!=="0%"}function scalePoint(it,g,et){const ot=it-et,ct=g*ot;return et+ct}function applyPointDelta(it,g,et,ot,ct){return ct!==void 0&&(it=scalePoint(it,ct,ot)),scalePoint(it,et,ot)+g}function applyAxisDelta(it,g=0,et=1,ot,ct){it.min=applyPointDelta(it.min,g,et,ot,ct),it.max=applyPointDelta(it.max,g,et,ot,ct)}function applyBoxDelta(it,{x:g,y:et}){applyAxisDelta(it.x,g.translate,g.scale,g.originPoint),applyAxisDelta(it.y,et.translate,et.scale,et.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(it,g,et,ot=!1){const ct=et.length;if(!ct)return;g.x=g.y=1;let ut,dt;for(let ft=0;ft<ct;ft++){ut=et[ft],dt=ut.projectionDelta;const{visualElement:St}=ut.options;St&&St.props.style&&St.props.style.display==="contents"||(ot&&ut.options.layoutScroll&&ut.scroll&&ut!==ut.root&&transformBox(it,{x:-ut.scroll.offset.x,y:-ut.scroll.offset.y}),dt&&(g.x*=dt.x.scale,g.y*=dt.y.scale,applyBoxDelta(it,dt)),ot&&hasTransform(ut.latestValues)&&transformBox(it,ut.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(it,g){it.min=it.min+g,it.max=it.max+g}function transformAxis(it,g,et,ot,ct=.5){const ut=mixNumber$1(it.min,it.max,ct);applyAxisDelta(it,g,et,ut,ot)}function transformBox(it,g){transformAxis(it.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(it.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(it,g){return convertBoundingBoxToBox(transformBoxPoints(it.getBoundingClientRect(),g))}function measurePageBox(it,g,et){const ot=measureViewportBox(it,et),{scroll:ct}=g;return ct&&(translateAxis(ot.x,ct.offset.x),translateAxis(ot.y,ct.offset.y)),ot}const getContextWindow=({current:it})=>it?it.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:et=!1}={}){const{presenceContext:ot}=this.visualElement;if(ot&&ot.isPresent===!1)return;const ct=Tt=>{const{dragSnapToOrigin:jt}=this.getProps();jt?this.pauseAnimation():this.stopAnimation(),et&&this.snapToCursor(extractEventInfo(Tt).point)},ut=(Tt,jt)=>{const{drag:Rt,dragPropagation:Ft,onDragStart:$t}=this.getProps();if(Rt&&!Ft&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Rt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Kt=>{let Bt=this.getAxisMotionValue(Kt).get()||0;if(percent.test(Bt)){const{projection:Ut}=this.visualElement;if(Ut&&Ut.layout){const Jt=Ut.layout.layoutBox[Kt];Jt&&(Bt=calcLength(Jt)*(parseFloat(Bt)/100))}}this.originPoint[Kt]=Bt}),$t&&frame.postRender(()=>$t(Tt,jt)),addValueToWillChange(this.visualElement,"transform");const{animationState:zt}=this.visualElement;zt&&zt.setActive("whileDrag",!0)},dt=(Tt,jt)=>{const{dragPropagation:Rt,dragDirectionLock:Ft,onDirectionLock:$t,onDrag:zt}=this.getProps();if(!Rt&&!this.openDragLock)return;const{offset:Kt}=jt;if(Ft&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Kt),this.currentDirection!==null&&$t&&$t(this.currentDirection);return}this.updateAxis("x",jt.point,Kt),this.updateAxis("y",jt.point,Kt),this.visualElement.render(),zt&&zt(Tt,jt)},ft=(Tt,jt)=>this.stop(Tt,jt),St=()=>eachAxis(Tt=>{var jt;return this.getAnimationState(Tt)==="paused"&&((jt=this.getAxisMotionValue(Tt).animation)===null||jt===void 0?void 0:jt.play())}),{dragSnapToOrigin:kt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:ct,onStart:ut,onMove:dt,onSessionEnd:ft,resumeAnimation:St},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:kt,contextWindow:getContextWindow(this.visualElement)})}stop(g,et){const ot=this.isDragging;if(this.cancel(),!ot)return;const{velocity:ct}=et;this.startAnimation(ct);const{onDragEnd:ut}=this.getProps();ut&&frame.postRender(()=>ut(g,et))}cancel(){this.isDragging=!1;const{projection:g,animationState:et}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:ot}=this.getProps();!ot&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),et&&et.setActive("whileDrag",!1)}updateAxis(g,et,ot){const{drag:ct}=this.getProps();if(!ot||!shouldDrag(g,ct,this.currentDirection))return;const ut=this.getAxisMotionValue(g);let dt=this.originPoint[g]+ot[g];this.constraints&&this.constraints[g]&&(dt=applyConstraints(dt,this.constraints[g],this.elastic[g])),ut.set(dt)}resolveConstraints(){var g;const{dragConstraints:et,dragElastic:ot}=this.getProps(),ct=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,ut=this.constraints;et&&isRefObject(et)?this.constraints||(this.constraints=this.resolveRefConstraints()):et&&ct?this.constraints=calcRelativeConstraints(ct.layoutBox,et):this.constraints=!1,this.elastic=resolveDragElastic(ot),ut!==this.constraints&&ct&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(dt=>{this.constraints!==!1&&this.getAxisMotionValue(dt)&&(this.constraints[dt]=rebaseAxisConstraints(ct.layoutBox[dt],this.constraints[dt]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:et}=this.getProps();if(!g||!isRefObject(g))return!1;const ot=g.current,{projection:ct}=this.visualElement;if(!ct||!ct.layout)return!1;const ut=measurePageBox(ot,ct.root,this.visualElement.getTransformPagePoint());let dt=calcViewportConstraints(ct.layout.layoutBox,ut);if(et){const ft=et(convertBoxToBoundingBox(dt));this.hasMutatedConstraints=!!ft,ft&&(dt=convertBoundingBoxToBox(ft))}return dt}startAnimation(g){const{drag:et,dragMomentum:ot,dragElastic:ct,dragTransition:ut,dragSnapToOrigin:dt,onDragTransitionEnd:ft}=this.getProps(),St=this.constraints||{},kt=eachAxis(Tt=>{if(!shouldDrag(Tt,et,this.currentDirection))return;let jt=St&&St[Tt]||{};dt&&(jt={min:0,max:0});const Rt=ct?200:1e6,Ft=ct?40:1e7,$t={type:"inertia",velocity:ot?g[Tt]:0,bounceStiffness:Rt,bounceDamping:Ft,timeConstant:750,restDelta:1,restSpeed:10,...ut,...jt};return this.startAxisValueAnimation(Tt,$t)});return Promise.all(kt).then(ft)}startAxisValueAnimation(g,et){const ot=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),ot.start(animateMotionValue(g,ot,0,et,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.pause()})}getAnimationState(g){var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.state}getAxisMotionValue(g){const et=`_drag${g.toUpperCase()}`,ot=this.visualElement.getProps(),ct=ot[et];return ct||this.visualElement.getValue(g,(ot.initial?ot.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(et=>{const{drag:ot}=this.getProps();if(!shouldDrag(et,ot,this.currentDirection))return;const{projection:ct}=this.visualElement,ut=this.getAxisMotionValue(et);if(ct&&ct.layout){const{min:dt,max:ft}=ct.layout.layoutBox[et];ut.set(g[et]-mixNumber$1(dt,ft,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:et}=this.getProps(),{projection:ot}=this.visualElement;if(!isRefObject(et)||!ot||!this.constraints)return;this.stopAnimation();const ct={x:0,y:0};eachAxis(dt=>{const ft=this.getAxisMotionValue(dt);if(ft&&this.constraints!==!1){const St=ft.get();ct[dt]=calcOrigin$1({min:St,max:St},this.constraints[dt])}});const{transformTemplate:ut}=this.visualElement.getProps();this.visualElement.current.style.transform=ut?ut({},""):"none",ot.root&&ot.root.updateScroll(),ot.updateLayout(),this.resolveConstraints(),eachAxis(dt=>{if(!shouldDrag(dt,g,null))return;const ft=this.getAxisMotionValue(dt),{min:St,max:kt}=this.constraints[dt];ft.set(mixNumber$1(St,kt,ct[dt]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,et=addPointerEvent(g,"pointerdown",St=>{const{drag:kt,dragListener:Tt=!0}=this.getProps();kt&&Tt&&this.start(St)}),ot=()=>{const{dragConstraints:St}=this.getProps();isRefObject(St)&&St.current&&(this.constraints=this.resolveRefConstraints())},{projection:ct}=this.visualElement,ut=ct.addEventListener("measure",ot);ct&&!ct.layout&&(ct.root&&ct.root.updateScroll(),ct.updateLayout()),frame.read(ot);const dt=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ft=ct.addEventListener("didUpdate",({delta:St,hasLayoutChanged:kt})=>{this.isDragging&&kt&&(eachAxis(Tt=>{const jt=this.getAxisMotionValue(Tt);jt&&(this.originPoint[Tt]+=St[Tt].translate,jt.set(jt.get()+St[Tt].translate))}),this.visualElement.render())});return()=>{dt(),et(),ut(),ft&&ft()}}getProps(){const g=this.visualElement.getProps(),{drag:et=!1,dragDirectionLock:ot=!1,dragPropagation:ct=!1,dragConstraints:ut=!1,dragElastic:dt=defaultElastic,dragMomentum:ft=!0}=g;return{...g,drag:et,dragDirectionLock:ot,dragPropagation:ct,dragConstraints:ut,dragElastic:dt,dragMomentum:ft}}}function shouldDrag(it,g,et){return(g===!0||g===it)&&(et===null||et===it)}function getCurrentDirection(it,g=10){let et=null;return Math.abs(it.y)>g?et="y":Math.abs(it.x)>g&&(et="x"),et}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=it=>(g,et)=>{it&&frame.postRender(()=>it(g,et))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:et,onPan:ot,onPanEnd:ct}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(et),onMove:ot,onEnd:(ut,dt)=>{delete this.session,ct&&frame.postRender(()=>ct(ut,dt))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const it=reactExports.useContext(PresenceContext);if(it===null)return[!0,null];const{isPresent:g,onExitComplete:et,register:ot}=it,ct=reactExports.useId();reactExports.useEffect(()=>ot(ct),[]);const ut=reactExports.useCallback(()=>et&&et(ct),[ct,et]);return!g&&et?[!1,ut]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(it,g){return g.max===g.min?0:it/(g.max-g.min)*100}const correctBorderRadius={correct:(it,g)=>{if(!g.target)return it;if(typeof it=="string")if(px.test(it))it=parseFloat(it);else return it;const et=pixelsToPercent(it,g.target.x),ot=pixelsToPercent(it,g.target.y);return`${et}% ${ot}%`}},correctBoxShadow={correct:(it,{treeScale:g,projectionDelta:et})=>{const ot=it,ct=complex.parse(it);if(ct.length>5)return ot;const ut=complex.createTransformer(it),dt=typeof ct[0]!="number"?1:0,ft=et.x.scale*g.x,St=et.y.scale*g.y;ct[0+dt]/=ft,ct[1+dt]/=St;const kt=mixNumber$1(ft,St,.5);return typeof ct[2+dt]=="number"&&(ct[2+dt]/=kt),typeof ct[3+dt]=="number"&&(ct[3+dt]/=kt),ut(ct)}},scaleCorrectors={};function addScaleCorrector(it){Object.assign(scaleCorrectors,it)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot,layoutId:ct}=this.props,{projection:ut}=g;addScaleCorrector(defaultScaleCorrectors),ut&&(et.group&&et.group.add(ut),ot&&ot.register&&ct&&ot.register(ut),ut.root.didUpdate(),ut.addEventListener("animationComplete",()=>{this.safeToRemove()}),ut.setOptions({...ut.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:et,visualElement:ot,drag:ct,isPresent:ut}=this.props,dt=ot.projection;return dt&&(dt.isPresent=ut,ct||g.layoutDependency!==et||et===void 0?dt.willUpdate():this.safeToRemove(),g.isPresent!==ut&&(ut?dt.promote():dt.relegate()||frame.postRender(()=>{const ft=dt.getStack();(!ft||!ft.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot}=this.props,{projection:ct}=g;ct&&(ct.scheduleCheckAfterUnmount(),et&&et.group&&et.group.remove(ct),ot&&ot.deregister&&ot.deregister(ct))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(it){const[g,et]=usePresence(),ot=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...it,layoutGroup:ot,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:et})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=it=>typeof it=="string"?parseFloat(it):it,isPx=it=>typeof it=="number"||px.test(it);function mixValues(it,g,et,ot,ct,ut){ct?(it.opacity=mixNumber$1(0,et.opacity!==void 0?et.opacity:1,easeCrossfadeIn(ot)),it.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(ot))):ut&&(it.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,et.opacity!==void 0?et.opacity:1,ot));for(let dt=0;dt<numBorders;dt++){const ft=`border${borders[dt]}Radius`;let St=getRadius(g,ft),kt=getRadius(et,ft);if(St===void 0&&kt===void 0)continue;St||(St=0),kt||(kt=0),St===0||kt===0||isPx(St)===isPx(kt)?(it[ft]=Math.max(mixNumber$1(asNumber(St),asNumber(kt),ot),0),(percent.test(kt)||percent.test(St))&&(it[ft]+="%")):it[ft]=kt}(g.rotate||et.rotate)&&(it.rotate=mixNumber$1(g.rotate||0,et.rotate||0,ot))}function getRadius(it,g){return it[g]!==void 0?it[g]:it.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(it,g,et){return ot=>ot<it?0:ot>g?1:et(progress(it,g,ot))}function copyAxisInto(it,g){it.min=g.min,it.max=g.max}function copyBoxInto(it,g){copyAxisInto(it.x,g.x),copyAxisInto(it.y,g.y)}function copyAxisDeltaInto(it,g){it.translate=g.translate,it.scale=g.scale,it.originPoint=g.originPoint,it.origin=g.origin}function removePointDelta(it,g,et,ot,ct){return it-=g,it=scalePoint(it,1/et,ot),ct!==void 0&&(it=scalePoint(it,1/ct,ot)),it}function removeAxisDelta(it,g=0,et=1,ot=.5,ct,ut=it,dt=it){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(dt.min,dt.max,g/100)-dt.min),typeof g!="number")return;let ft=mixNumber$1(ut.min,ut.max,ot);it===ut&&(ft-=g),it.min=removePointDelta(it.min,g,et,ft,ct),it.max=removePointDelta(it.max,g,et,ft,ct)}function removeAxisTransforms(it,g,[et,ot,ct],ut,dt){removeAxisDelta(it,g[et],g[ot],g[ct],g.scale,ut,dt)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(it,g,et,ot){removeAxisTransforms(it.x,g,xKeys,et?et.x:void 0,ot?ot.x:void 0),removeAxisTransforms(it.y,g,yKeys,et?et.y:void 0,ot?ot.y:void 0)}function isAxisDeltaZero(it){return it.translate===0&&it.scale===1}function isDeltaZero(it){return isAxisDeltaZero(it.x)&&isAxisDeltaZero(it.y)}function axisEquals(it,g){return it.min===g.min&&it.max===g.max}function boxEquals(it,g){return axisEquals(it.x,g.x)&&axisEquals(it.y,g.y)}function axisEqualsRounded(it,g){return Math.round(it.min)===Math.round(g.min)&&Math.round(it.max)===Math.round(g.max)}function boxEqualsRounded(it,g){return axisEqualsRounded(it.x,g.x)&&axisEqualsRounded(it.y,g.y)}function aspectRatio(it){return calcLength(it.x)/calcLength(it.y)}function axisDeltaEquals(it,g){return it.translate===g.translate&&it.scale===g.scale&&it.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const et=this.members[this.members.length-1];et&&this.promote(et)}}relegate(g){const et=this.members.findIndex(ct=>g===ct);if(et===0)return!1;let ot;for(let ct=et;ct>=0;ct--){const ut=this.members[ct];if(ut.isPresent!==!1){ot=ut;break}}return ot?(this.promote(ot),!0):!1}promote(g,et){const ot=this.lead;if(g!==ot&&(this.prevLead=ot,this.lead=g,g.show(),ot)){ot.instance&&ot.scheduleRender(),g.scheduleRender(),g.resumeFrom=ot,et&&(g.resumeFrom.preserveOpacity=!0),ot.snapshot&&(g.snapshot=ot.snapshot,g.snapshot.latestValues=ot.animationValues||ot.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:ct}=g.options;ct===!1&&ot.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:et,resumingFrom:ot}=g;et.onExitComplete&&et.onExitComplete(),ot&&ot.options.onExitComplete&&ot.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(it,g,et){let ot="";const ct=it.x.translate/g.x,ut=it.y.translate/g.y,dt=(et==null?void 0:et.z)||0;if((ct||ut||dt)&&(ot=`translate3d(${ct}px, ${ut}px, ${dt}px) `),(g.x!==1||g.y!==1)&&(ot+=`scale(${1/g.x}, ${1/g.y}) `),et){const{transformPerspective:kt,rotate:Tt,rotateX:jt,rotateY:Rt,skewX:Ft,skewY:$t}=et;kt&&(ot=`perspective(${kt}px) ${ot}`),Tt&&(ot+=`rotate(${Tt}deg) `),jt&&(ot+=`rotateX(${jt}deg) `),Rt&&(ot+=`rotateY(${Rt}deg) `),Ft&&(ot+=`skewX(${Ft}deg) `),$t&&(ot+=`skewY(${$t}deg) `)}const ft=it.x.scale*g.x,St=it.y.scale*g.y;return(ft!==1||St!==1)&&(ot+=`scale(${ft}, ${St})`),ot||"none"}const compareByDepth=(it,g)=>it.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(it){const g=isMotionValue(it)?it.get():it;return isCustomValue(g)?g.toValue():g}function delay(it,g){const et=time.now(),ot=({timestamp:ct})=>{const ut=ct-et;ut>=g&&(cancelFrame(ot),it(ut-g))};return frame.read(ot,!0),()=>cancelFrame(ot)}function isSVGElement(it){return it instanceof SVGElement&&it.tagName!=="svg"}function animateSingleValue(it,g,et){const ot=isMotionValue(it)?it:motionValue(it);return ot.start(animateMotionValue("",ot,g,et)),ot.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(it,g,et,ot){const{latestValues:ct}=g;ct[it]&&(et[it]=ct[it],g.setStaticValue(it,0),ot&&(ot[it]=0))}function cancelTreeOptimisedTransformAnimations(it){if(it.hasCheckedOptimisedAppear=!0,it.root===it)return;const{visualElement:g}=it.options;if(!g)return;const et=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(et,"transform")){const{layout:ct,layoutId:ut}=it.options;window.MotionCancelOptimisedAnimation(et,"transform",frame,!(ct||ut))}const{parent:ot}=it;ot&&!ot.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(ot)}function createProjectionNode$1({attachResizeListener:it,defaultParent:g,measureScroll:et,checkIsScrollRoot:ot,resetTransform:ct}){return class{constructor(dt={},ft=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=dt,this.root=ft?ft.root||ft:this,this.path=ft?[...ft.path,ft]:[],this.parent=ft,this.depth=ft?ft.depth+1:0;for(let St=0;St<this.path.length;St++)this.path[St].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(dt,ft){return this.eventHandlers.has(dt)||this.eventHandlers.set(dt,new SubscriptionManager),this.eventHandlers.get(dt).add(ft)}notifyListeners(dt,...ft){const St=this.eventHandlers.get(dt);St&&St.notify(...ft)}hasListeners(dt){return this.eventHandlers.has(dt)}mount(dt,ft=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(dt),this.instance=dt;const{layoutId:St,layout:kt,visualElement:Tt}=this.options;if(Tt&&!Tt.current&&Tt.mount(dt),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ft&&(kt||St)&&(this.isLayoutDirty=!0),it){let jt;const Rt=()=>this.root.updateBlockedByResize=!1;it(dt,()=>{this.root.updateBlockedByResize=!0,jt&&jt(),jt=delay(Rt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}St&&this.root.registerSharedNode(St,this),this.options.animate!==!1&&Tt&&(St||kt)&&this.addEventListener("didUpdate",({delta:jt,hasLayoutChanged:Rt,hasRelativeTargetChanged:Ft,layout:$t})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const zt=this.options.transition||Tt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Kt,onLayoutAnimationComplete:Bt}=Tt.getProps(),Ut=!this.targetLayout||!boxEqualsRounded(this.targetLayout,$t)||Ft,Jt=!Rt&&Ft;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Jt||Rt&&(Ut||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(jt,Jt);const en={...getValueTransition(zt,"layout"),onPlay:Kt,onComplete:Bt};(Tt.shouldReduceMotion||this.options.layoutRoot)&&(en.delay=0,en.type=!1),this.startAnimation(en)}else Rt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=$t})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const dt=this.getStack();dt&&dt.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:dt}=this.options;return dt&&dt.getProps().transformTemplate}willUpdate(dt=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Tt=0;Tt<this.path.length;Tt++){const jt=this.path[Tt];jt.shouldResetTransform=!0,jt.updateScroll("snapshot"),jt.options.layoutRoot&&jt.willUpdate(!1)}const{layoutId:ft,layout:St}=this.options;if(ft===void 0&&!St)return;const kt=this.getTransformTemplate();this.prevTransformTemplateValue=kt?kt(this.latestValues,""):void 0,this.updateSnapshot(),dt&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ft=time.now();frameData.delta=clamp(0,1e3/60,ft-frameData.timestamp),frameData.timestamp=ft,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let St=0;St<this.path.length;St++)this.path[St].updateScroll();const dt=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ft}=this.options;ft&&ft.notify("LayoutMeasure",this.layout.layoutBox,dt?dt.layoutBox:void 0)}updateScroll(dt="measure"){let ft=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===dt&&(ft=!1),ft){const St=ot(this.instance);this.scroll={animationId:this.root.animationId,phase:dt,isRoot:St,offset:et(this.instance),wasRoot:this.scroll?this.scroll.isRoot:St}}}resetTransform(){if(!ct)return;const dt=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ft=this.projectionDelta&&!isDeltaZero(this.projectionDelta),St=this.getTransformTemplate(),kt=St?St(this.latestValues,""):void 0,Tt=kt!==this.prevTransformTemplateValue;dt&&(ft||hasTransform(this.latestValues)||Tt)&&(ct(this.instance,kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(dt=!0){const ft=this.measurePageBox();let St=this.removeElementScroll(ft);return dt&&(St=this.removeTransform(St)),roundBox(St),{animationId:this.root.animationId,measuredBox:ft,layoutBox:St,latestValues:{},source:this.id}}measurePageBox(){var dt;const{visualElement:ft}=this.options;if(!ft)return createBox();const St=ft.measureViewportBox();if(!(((dt=this.scroll)===null||dt===void 0?void 0:dt.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Tt}=this.root;Tt&&(translateAxis(St.x,Tt.offset.x),translateAxis(St.y,Tt.offset.y))}return St}removeElementScroll(dt){var ft;const St=createBox();if(copyBoxInto(St,dt),!((ft=this.scroll)===null||ft===void 0)&&ft.wasRoot)return St;for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt],{scroll:jt,options:Rt}=Tt;Tt!==this.root&&jt&&Rt.layoutScroll&&(jt.wasRoot&&copyBoxInto(St,dt),translateAxis(St.x,jt.offset.x),translateAxis(St.y,jt.offset.y))}return St}applyTransform(dt,ft=!1){const St=createBox();copyBoxInto(St,dt);for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt];!ft&&Tt.options.layoutScroll&&Tt.scroll&&Tt!==Tt.root&&transformBox(St,{x:-Tt.scroll.offset.x,y:-Tt.scroll.offset.y}),hasTransform(Tt.latestValues)&&transformBox(St,Tt.latestValues)}return hasTransform(this.latestValues)&&transformBox(St,this.latestValues),St}removeTransform(dt){const ft=createBox();copyBoxInto(ft,dt);for(let St=0;St<this.path.length;St++){const kt=this.path[St];if(!kt.instance||!hasTransform(kt.latestValues))continue;hasScale(kt.latestValues)&&kt.updateSnapshot();const Tt=createBox(),jt=kt.measurePageBox();copyBoxInto(Tt,jt),removeBoxTransforms(ft,kt.latestValues,kt.snapshot?kt.snapshot.layoutBox:void 0,Tt)}return hasTransform(this.latestValues)&&removeBoxTransforms(ft,this.latestValues),ft}setTargetDelta(dt){this.targetDelta=dt,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(dt){this.options={...this.options,...dt,crossfade:dt.crossfade!==void 0?dt.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(dt=!1){var ft;const St=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=St.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=St.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=St.isSharedProjectionDirty);const kt=!!this.resumingFrom||this!==St;if(!(dt||kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ft=this.parent)===null||ft===void 0)&&ft.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:jt,layoutId:Rt}=this.options;if(!(!this.layout||!(jt||Rt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Ft=this.getClosestProjectingParent();Ft&&Ft.layout&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Ft.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Ft=this.getClosestProjectingParent();Ft&&!!Ft.resumingFrom==!!this.resumingFrom&&!Ft.options.layoutScroll&&Ft.target&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Ft.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var dt;const ft=this.getLead(),St=!!this.resumingFrom||this!==ft;let kt=!0;if((this.isProjectionDirty||!((dt=this.parent)===null||dt===void 0)&&dt.isProjectionDirty)&&(kt=!1),St&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(kt=!1),kt)return;const{layout:Tt,layoutId:jt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Tt||jt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Rt=this.treeScale.x,Ft=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,St),ft.layout&&!ft.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ft.target=ft.layout.layoutBox,ft.targetWithTransforms=createBox());const{target:$t}=ft;if(!$t){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,$t,this.latestValues),(this.treeScale.x!==Rt||this.treeScale.y!==Ft||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",$t)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(dt=!0){var ft;if((ft=this.options.visualElement)===null||ft===void 0||ft.scheduleRender(),dt){const St=this.getStack();St&&St.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(dt,ft=!1){const St=this.snapshot,kt=St?St.latestValues:{},Tt={...this.latestValues},jt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ft;const Rt=createBox(),Ft=St?St.source:void 0,$t=this.layout?this.layout.source:void 0,zt=Ft!==$t,Kt=this.getStack(),Bt=!Kt||Kt.members.length<=1,Ut=!!(zt&&!Bt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Jt;this.mixTargetDelta=en=>{const tn=en/1e3;mixAxisDelta(jt.x,dt.x,tn),mixAxisDelta(jt.y,dt.y,tn),this.setTargetDelta(jt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Rt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Rt,tn),Jt&&boxEquals(this.relativeTarget,Jt)&&(this.isProjectionDirty=!1),Jt||(Jt=createBox()),copyBoxInto(Jt,this.relativeTarget)),zt&&(this.animationValues=Tt,mixValues(Tt,kt,this.latestValues,tn,Ut,Bt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=tn},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(dt){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...dt,onUpdate:ft=>{this.mixTargetDelta(ft),dt.onUpdate&&dt.onUpdate(ft)},onComplete:()=>{dt.onComplete&&dt.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const dt=this.getStack();dt&&dt.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const dt=this.getLead();let{targetWithTransforms:ft,target:St,layout:kt,latestValues:Tt}=dt;if(!(!ft||!St||!kt)){if(this!==dt&&this.layout&&kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,kt.layoutBox)){St=this.target||createBox();const jt=calcLength(this.layout.layoutBox.x);St.x.min=dt.target.x.min,St.x.max=St.x.min+jt;const Rt=calcLength(this.layout.layoutBox.y);St.y.min=dt.target.y.min,St.y.max=St.y.min+Rt}copyBoxInto(ft,St),transformBox(ft,Tt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ft,Tt)}}registerSharedNode(dt,ft){this.sharedNodes.has(dt)||this.sharedNodes.set(dt,new NodeStack),this.sharedNodes.get(dt).add(ft);const kt=ft.options.initialPromotionConfig;ft.promote({transition:kt?kt.transition:void 0,preserveFollowOpacity:kt&&kt.shouldPreserveFollowOpacity?kt.shouldPreserveFollowOpacity(ft):void 0})}isLead(){const dt=this.getStack();return dt?dt.lead===this:!0}getLead(){var dt;const{layoutId:ft}=this.options;return ft?((dt=this.getStack())===null||dt===void 0?void 0:dt.lead)||this:this}getPrevLead(){var dt;const{layoutId:ft}=this.options;return ft?(dt=this.getStack())===null||dt===void 0?void 0:dt.prevLead:void 0}getStack(){const{layoutId:dt}=this.options;if(dt)return this.root.sharedNodes.get(dt)}promote({needsReset:dt,transition:ft,preserveFollowOpacity:St}={}){const kt=this.getStack();kt&&kt.promote(this,St),dt&&(this.projectionDelta=void 0,this.needsReset=!0),ft&&this.setOptions({transition:ft})}relegate(){const dt=this.getStack();return dt?dt.relegate(this):!1}resetSkewAndRotation(){const{visualElement:dt}=this.options;if(!dt)return;let ft=!1;const{latestValues:St}=dt;if((St.z||St.rotate||St.rotateX||St.rotateY||St.rotateZ||St.skewX||St.skewY)&&(ft=!0),!ft)return;const kt={};St.z&&resetDistortingTransform("z",dt,kt,this.animationValues);for(let Tt=0;Tt<transformAxes.length;Tt++)resetDistortingTransform(`rotate${transformAxes[Tt]}`,dt,kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Tt]}`,dt,kt,this.animationValues);dt.render();for(const Tt in kt)dt.setStaticValue(Tt,kt[Tt]),this.animationValues&&(this.animationValues[Tt]=kt[Tt]);dt.scheduleRender()}getProjectionStyles(dt){var ft,St;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const kt={visibility:""},Tt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,kt.opacity="",kt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"",kt.transform=Tt?Tt(this.latestValues,""):"none",kt;const jt=this.getLead();if(!this.projectionDelta||!this.layout||!jt.target){const zt={};return this.options.layoutId&&(zt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,zt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(zt.transform=Tt?Tt({},""):"none",this.hasProjected=!1),zt}const Rt=jt.animationValues||jt.latestValues;this.applyTransformsToTarget(),kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Rt),Tt&&(kt.transform=Tt(Rt,kt.transform));const{x:Ft,y:$t}=this.projectionDelta;kt.transformOrigin=`${Ft.origin*100}% ${$t.origin*100}% 0`,jt.animationValues?kt.opacity=jt===this?(St=(ft=Rt.opacity)!==null&&ft!==void 0?ft:this.latestValues.opacity)!==null&&St!==void 0?St:1:this.preserveOpacity?this.latestValues.opacity:Rt.opacityExit:kt.opacity=jt===this?Rt.opacity!==void 0?Rt.opacity:"":Rt.opacityExit!==void 0?Rt.opacityExit:0;for(const zt in scaleCorrectors){if(Rt[zt]===void 0)continue;const{correct:Kt,applyTo:Bt}=scaleCorrectors[zt],Ut=kt.transform==="none"?Rt[zt]:Kt(Rt[zt],jt);if(Bt){const Jt=Bt.length;for(let en=0;en<Jt;en++)kt[Bt[en]]=Ut}else kt[zt]=Ut}return this.options.layoutId&&(kt.pointerEvents=jt===this?resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"":"none"),kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(dt=>{var ft;return(ft=dt.currentAnimation)===null||ft===void 0?void 0:ft.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(it){it.updateLayout()}function notifyLayoutUpdate(it){var g;const et=((g=it.resumeFrom)===null||g===void 0?void 0:g.snapshot)||it.snapshot;if(it.isLead()&&it.layout&&et&&it.hasListeners("didUpdate")){const{layoutBox:ot,measuredBox:ct}=it.layout,{animationType:ut}=it.options,dt=et.source!==it.layout.source;ut==="size"?eachAxis(jt=>{const Rt=dt?et.measuredBox[jt]:et.layoutBox[jt],Ft=calcLength(Rt);Rt.min=ot[jt].min,Rt.max=Rt.min+Ft}):shouldAnimatePositionOnly(ut,et.layoutBox,ot)&&eachAxis(jt=>{const Rt=dt?et.measuredBox[jt]:et.layoutBox[jt],Ft=calcLength(ot[jt]);Rt.max=Rt.min+Ft,it.relativeTarget&&!it.currentAnimation&&(it.isProjectionDirty=!0,it.relativeTarget[jt].max=it.relativeTarget[jt].min+Ft)});const ft=createDelta();calcBoxDelta(ft,ot,et.layoutBox);const St=createDelta();dt?calcBoxDelta(St,it.applyTransform(ct,!0),et.measuredBox):calcBoxDelta(St,ot,et.layoutBox);const kt=!isDeltaZero(ft);let Tt=!1;if(!it.resumeFrom){const jt=it.getClosestProjectingParent();if(jt&&!jt.resumeFrom){const{snapshot:Rt,layout:Ft}=jt;if(Rt&&Ft){const $t=createBox();calcRelativePosition($t,et.layoutBox,Rt.layoutBox);const zt=createBox();calcRelativePosition(zt,ot,Ft.layoutBox),boxEqualsRounded($t,zt)||(Tt=!0),jt.options.layoutRoot&&(it.relativeTarget=zt,it.relativeTargetOrigin=$t,it.relativeParent=jt)}}}it.notifyListeners("didUpdate",{layout:ot,snapshot:et,delta:St,layoutDelta:ft,hasLayoutChanged:kt,hasRelativeTargetChanged:Tt})}else if(it.isLead()){const{onExitComplete:ot}=it.options;ot&&ot()}it.options.transition=void 0}function propagateDirtyNodes(it){isDebug&&metrics.totalNodes++,it.parent&&(it.isProjecting()||(it.isProjectionDirty=it.parent.isProjectionDirty),it.isSharedProjectionDirty||(it.isSharedProjectionDirty=!!(it.isProjectionDirty||it.parent.isProjectionDirty||it.parent.isSharedProjectionDirty)),it.isTransformDirty||(it.isTransformDirty=it.parent.isTransformDirty))}function cleanDirtyNodes(it){it.isProjectionDirty=it.isSharedProjectionDirty=it.isTransformDirty=!1}function clearSnapshot(it){it.clearSnapshot()}function clearMeasurements(it){it.clearMeasurements()}function clearIsLayoutDirty(it){it.isLayoutDirty=!1}function resetTransformStyle(it){const{visualElement:g}=it.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),it.resetTransform()}function finishAnimation(it){it.finishAnimation(),it.targetDelta=it.relativeTarget=it.target=void 0,it.isProjectionDirty=!0}function resolveTargetDelta(it){it.resolveTargetDelta()}function calcProjection(it){it.calcProjection()}function resetSkewAndRotation(it){it.resetSkewAndRotation()}function removeLeadSnapshots(it){it.removeLeadSnapshot()}function mixAxisDelta(it,g,et){it.translate=mixNumber$1(g.translate,0,et),it.scale=mixNumber$1(g.scale,1,et),it.origin=g.origin,it.originPoint=g.originPoint}function mixAxis(it,g,et,ot){it.min=mixNumber$1(g.min,et.min,ot),it.max=mixNumber$1(g.max,et.max,ot)}function mixBox(it,g,et,ot){mixAxis(it.x,g.x,et.x,ot),mixAxis(it.y,g.y,et.y,ot)}function hasOpacityCrossfade(it){return it.animationValues&&it.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=it=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(it),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(it){it.min=roundPoint(it.min),it.max=roundPoint(it.max)}function roundBox(it){roundAxis(it.x),roundAxis(it.y)}function shouldAnimatePositionOnly(it,g,et){return it==="position"||it==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(et),.2)}function checkNodeWasScrollRoot(it){var g;return it!==it.root&&((g=it.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(it,g)=>addDomEvent(it,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:it=>({x:it.scrollLeft,y:it.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const it=new DocumentProjectionNode({});it.mount(window),it.setOptions({layoutScroll:!0}),rootProjectionNode.current=it}return rootProjectionNode.current},resetTransform:(it,g)=>{it.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:it=>window.getComputedStyle(it).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileHover&&it.animationState.setActive("whileHover",et==="Start");const ct="onHover"+et,ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class HoverGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=hover(g,et=>(handleHoverEvent(this.node,et,"Start"),ot=>handleHoverEvent(this.node,ot,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileTap&&it.animationState.setActive("whileTap",et==="Start");const ct="onTap"+(et==="End"?"":et),ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class PressGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=press(g,et=>(handlePressEvent(this.node,et,"Start"),(ot,{success:ct})=>handlePressEvent(this.node,ot,ct?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=it=>{const g=observerCallbacks.get(it.target);g&&g(it)},fireAllObserverCallbacks=it=>{it.forEach(fireObserverCallback)};function initIntersectionObserver({root:it,...g}){const et=it||document;observers.has(et)||observers.set(et,{});const ot=observers.get(et),ct=JSON.stringify(g);return ot[ct]||(ot[ct]=new IntersectionObserver(fireAllObserverCallbacks,{root:it,...g})),ot[ct]}function observeIntersection(it,g,et){const ot=initIntersectionObserver(g);return observerCallbacks.set(it,et),ot.observe(it),()=>{observerCallbacks.delete(it),ot.unobserve(it)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:et,margin:ot,amount:ct="some",once:ut}=g,dt={root:et?et.current:void 0,rootMargin:ot,threshold:typeof ct=="number"?ct:thresholdNames[ct]},ft=St=>{const{isIntersecting:kt}=St;if(this.isInView===kt||(this.isInView=kt,ut&&!kt&&this.hasEnteredView))return;kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",kt);const{onViewportEnter:Tt,onViewportLeave:jt}=this.node.getProps(),Rt=kt?Tt:jt;Rt&&Rt(St)};return observeIntersection(this.node.current,dt,ft)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:et}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,et))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:it={}},{viewport:g={}}={}){return et=>it[et]!==g[et]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:it=>it,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(it,g,et,ot,ct){var ut,dt;const{visualElement:ft}=reactExports.useContext(MotionContext),St=reactExports.useContext(LazyContext),kt=reactExports.useContext(PresenceContext),Tt=reactExports.useContext(MotionConfigContext).reducedMotion,jt=reactExports.useRef(null);ot=ot||St.renderer,!jt.current&&ot&&(jt.current=ot(it,{visualState:g,parent:ft,props:et,presenceContext:kt,blockInitialAnimation:kt?kt.initial===!1:!1,reducedMotionConfig:Tt}));const Rt=jt.current,Ft=reactExports.useContext(SwitchLayoutGroupContext);Rt&&!Rt.projection&&ct&&(Rt.type==="html"||Rt.type==="svg")&&createProjectionNode(jt.current,et,ct,Ft);const $t=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Rt&&$t.current&&Rt.update(et,kt)});const zt=et[optimizedAppearDataAttribute],Kt=reactExports.useRef(!!zt&&!(!((ut=window.MotionHandoffIsComplete)===null||ut===void 0)&&ut.call(window,zt))&&((dt=window.MotionHasOptimisedAnimation)===null||dt===void 0?void 0:dt.call(window,zt)));return useIsomorphicLayoutEffect$1(()=>{Rt&&($t.current=!0,window.MotionIsMounted=!0,Rt.updateFeatures(),microtask.render(Rt.render),Kt.current&&Rt.animationState&&Rt.animationState.animateChanges())}),reactExports.useEffect(()=>{Rt&&(!Kt.current&&Rt.animationState&&Rt.animationState.animateChanges(),Kt.current&&(queueMicrotask(()=>{var Bt;(Bt=window.MotionHandoffMarkAsComplete)===null||Bt===void 0||Bt.call(window,zt)}),Kt.current=!1))}),Rt}function createProjectionNode(it,g,et,ot){const{layoutId:ct,layout:ut,drag:dt,dragConstraints:ft,layoutScroll:St,layoutRoot:kt}=g;it.projection=new et(it.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(it.parent)),it.projection.setOptions({layoutId:ct,layout:ut,alwaysMeasureLayout:!!dt||ft&&isRefObject(ft),visualElement:it,animationType:typeof ut=="string"?ut:"both",initialPromotionConfig:ot,layoutScroll:St,layoutRoot:kt})}function getClosestProjectingNode(it){if(it)return it.options.allowProjection!==!1?it.projection:getClosestProjectingNode(it.parent)}function useMotionRef(it,g,et){return reactExports.useCallback(ot=>{ot&&it.mount&&it.mount(ot),g&&(ot?g.mount(ot):g.unmount()),et&&(typeof et=="function"?et(ot):isRefObject(et)&&(et.current=ot))},[g])}function isControllingVariants(it){return isAnimationControls(it.animate)||variantProps.some(g=>isVariantLabel(it[g]))}function isVariantNode(it){return!!(isControllingVariants(it)||it.variants)}function getCurrentTreeVariants(it,g){if(isControllingVariants(it)){const{initial:et,animate:ot}=it;return{initial:et===!1||isVariantLabel(et)?et:void 0,animate:isVariantLabel(ot)?ot:void 0}}return it.inherit!==!1?g:{}}function useCreateMotionContext(it){const{initial:g,animate:et}=getCurrentTreeVariants(it,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:et}),[variantLabelsAsDependency(g),variantLabelsAsDependency(et)])}function variantLabelsAsDependency(it){return Array.isArray(it)?it.join(" "):it}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const it in featureProps)featureDefinitions[it]={isEnabled:g=>featureProps[it].some(et=>!!g[et])};function loadFeatures(it){for(const g in it)featureDefinitions[g]={...featureDefinitions[g],...it[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:it,createVisualElement:g,useRender:et,useVisualState:ot,Component:ct}){it&&loadFeatures(it);function ut(ft,St){let kt;const Tt={...reactExports.useContext(MotionConfigContext),...ft,layoutId:useLayoutId(ft)},{isStatic:jt}=Tt,Rt=useCreateMotionContext(ft),Ft=ot(ft,jt);if(!jt&&isBrowser$1){useStrictMode();const $t=getProjectionFunctionality(Tt);kt=$t.MeasureLayout,Rt.visualElement=useVisualElement(ct,Ft,Tt,g,$t.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Rt,children:[kt&&Rt.visualElement?jsxRuntimeExports.jsx(kt,{visualElement:Rt.visualElement,...Tt}):null,et(ct,ft,useMotionRef(Ft,Rt.visualElement,St),Ft,jt,Rt.visualElement)]})}const dt=reactExports.forwardRef(ut);return dt[motionComponentSymbol]=ct,dt}function useLayoutId({layoutId:it}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&it!==void 0?g+"-"+it:it}function useStrictMode(it,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(it){const{drag:g,layout:et}=featureDefinitions;if(!g&&!et)return{};const ot={...g,...et};return{MeasureLayout:g!=null&&g.isEnabled(it)||et!=null&&et.isEnabled(it)?ot.MeasureLayout:void 0,ProjectionNode:ot.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(it){return typeof it!="string"||it.includes("-")?!1:!!(lowercaseSVGElements.indexOf(it)>-1||/[A-Z]/u.test(it))}function renderHTML(it,{style:g,vars:et},ot,ct){Object.assign(it.style,g,ct&&ct.getProjectionStyles(ot));for(const ut in et)it.style.setProperty(ut,et[ut])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(it,g,et,ot){renderHTML(it,g,void 0,ot);for(const ct in g.attrs)it.setAttribute(camelCaseAttributes.has(ct)?ct:camelToDash(ct),g.attrs[ct])}function isForcedMotionValue(it,{layout:g,layoutId:et}){return transformProps.has(it)||it.startsWith("origin")||(g||et!==void 0)&&(!!scaleCorrectors[it]||it==="opacity")}function scrapeMotionValuesFromProps$1(it,g,et){var ot;const{style:ct}=it,ut={};for(const dt in ct)(isMotionValue(ct[dt])||g.style&&isMotionValue(g.style[dt])||isForcedMotionValue(dt,it)||((ot=et==null?void 0:et.getValue(dt))===null||ot===void 0?void 0:ot.liveStyle)!==void 0)&&(ut[dt]=ct[dt]);return ut}function scrapeMotionValuesFromProps(it,g,et){const ot=scrapeMotionValuesFromProps$1(it,g,et);for(const ct in it)if(isMotionValue(it[ct])||isMotionValue(g[ct])){const ut=transformPropOrder.indexOf(ct)!==-1?"attr"+ct.charAt(0).toUpperCase()+ct.substring(1):ct;ot[ut]=it[ct]}return ot}function useConstant(it){const g=reactExports.useRef(null);return g.current===null&&(g.current=it()),g.current}function makeState$1({scrapeMotionValuesFromProps:it,createRenderState:g,onMount:et},ot,ct,ut){const dt={latestValues:makeLatestValues(ot,ct,ut,it),renderState:g()};return et&&(dt.mount=ft=>et(ot,ft,dt)),dt}const makeUseVisualState=it=>(g,et)=>{const ot=reactExports.useContext(MotionContext),ct=reactExports.useContext(PresenceContext),ut=()=>makeState$1(it,g,ot,ct);return et?ut():useConstant(ut)};function makeLatestValues(it,g,et,ot){const ct={},ut=ot(it,{});for(const Rt in ut)ct[Rt]=resolveMotionValue(ut[Rt]);let{initial:dt,animate:ft}=it;const St=isControllingVariants(it),kt=isVariantNode(it);g&&kt&&!St&&it.inherit!==!1&&(dt===void 0&&(dt=g.initial),ft===void 0&&(ft=g.animate));let Tt=et?et.initial===!1:!1;Tt=Tt||dt===!1;const jt=Tt?ft:dt;if(jt&&typeof jt!="boolean"&&!isAnimationControls(jt)){const Rt=Array.isArray(jt)?jt:[jt];for(let Ft=0;Ft<Rt.length;Ft++){const $t=resolveVariantFromProps(it,Rt[Ft]);if($t){const{transitionEnd:zt,transition:Kt,...Bt}=$t;for(const Ut in Bt){let Jt=Bt[Ut];if(Array.isArray(Jt)){const en=Tt?Jt.length-1:0;Jt=Jt[en]}Jt!==null&&(ct[Ut]=Jt)}for(const Ut in zt)ct[Ut]=zt[Ut]}}}return ct}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(it,g)=>g&&typeof it=="number"?g.transform(it):it,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(it,g,et){let ot="",ct=!0;for(let ut=0;ut<numTransforms;ut++){const dt=transformPropOrder[ut],ft=it[dt];if(ft===void 0)continue;let St=!0;if(typeof ft=="number"?St=ft===(dt.startsWith("scale")?1:0):St=parseFloat(ft)===0,!St||et){const kt=getValueAsType(ft,numberValueTypes[dt]);if(!St){ct=!1;const Tt=translateAlias[dt]||dt;ot+=`${Tt}(${kt}) `}et&&(g[dt]=kt)}}return ot=ot.trim(),et?ot=et(g,ct?"":ot):ct&&(ot="none"),ot}function buildHTMLStyles(it,g,et){const{style:ot,vars:ct,transformOrigin:ut}=it;let dt=!1,ft=!1;for(const St in g){const kt=g[St];if(transformProps.has(St)){dt=!0;continue}else if(isCSSVariableName(St)){ct[St]=kt;continue}else{const Tt=getValueAsType(kt,numberValueTypes[St]);St.startsWith("origin")?(ft=!0,ut[St]=Tt):ot[St]=Tt}}if(g.transform||(dt||et?ot.transform=buildTransform(g,it.transform,et):ot.transform&&(ot.transform="none")),ft){const{originX:St="50%",originY:kt="50%",originZ:Tt=0}=ut;ot.transformOrigin=`${St} ${kt} ${Tt}`}}function calcOrigin(it,g,et){return typeof it=="string"?it:px.transform(g+et*it)}function calcSVGTransformOrigin(it,g,et){const ot=calcOrigin(g,it.x,it.width),ct=calcOrigin(et,it.y,it.height);return`${ot} ${ct}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(it,g,et=1,ot=0,ct=!0){it.pathLength=1;const ut=ct?dashKeys:camelKeys;it[ut.offset]=px.transform(-ot);const dt=px.transform(g),ft=px.transform(et);it[ut.array]=`${dt} ${ft}`}function buildSVGAttrs(it,{attrX:g,attrY:et,attrScale:ot,originX:ct,originY:ut,pathLength:dt,pathSpacing:ft=1,pathOffset:St=0,...kt},Tt,jt){if(buildHTMLStyles(it,kt,jt),Tt){it.style.viewBox&&(it.attrs.viewBox=it.style.viewBox);return}it.attrs=it.style,it.style={};const{attrs:Rt,style:Ft,dimensions:$t}=it;Rt.transform&&($t&&(Ft.transform=Rt.transform),delete Rt.transform),$t&&(ct!==void 0||ut!==void 0||Ft.transform)&&(Ft.transformOrigin=calcSVGTransformOrigin($t,ct!==void 0?ct:.5,ut!==void 0?ut:.5)),g!==void 0&&(Rt.x=g),et!==void 0&&(Rt.y=et),ot!==void 0&&(Rt.scale=ot),dt!==void 0&&buildSVGPath(Rt,dt,ft,St,!1)}const isSVGTag=it=>typeof it=="string"&&it.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(it,g,{renderState:et,latestValues:ot})=>{frame.read(()=>{try{et.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{et.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(et,ot,isSVGTag(g.tagName),it.transformTemplate),renderSVG(g,et)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(it,g,et){for(const ot in g)!isMotionValue(g[ot])&&!isForcedMotionValue(ot,et)&&(it[ot]=g[ot])}function useInitialMotionValues({transformTemplate:it},g){return reactExports.useMemo(()=>{const et=createHtmlRenderState();return buildHTMLStyles(et,g,it),Object.assign({},et.vars,et.style)},[g])}function useStyle(it,g){const et=it.style||{},ot={};return copyRawValuesOnly(ot,et,it),Object.assign(ot,useInitialMotionValues(it,g)),ot}function useHTMLProps(it,g){const et={},ot=useStyle(it,g);return it.drag&&it.dragListener!==!1&&(et.draggable=!1,ot.userSelect=ot.WebkitUserSelect=ot.WebkitTouchCallout="none",ot.touchAction=it.drag===!0?"none":`pan-${it.drag==="x"?"y":"x"}`),it.tabIndex===void 0&&(it.onTap||it.onTapStart||it.whileTap)&&(et.tabIndex=0),et.style=ot,et}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(it){return it.startsWith("while")||it.startsWith("drag")&&it!=="draggable"||it.startsWith("layout")||it.startsWith("onTap")||it.startsWith("onPan")||it.startsWith("onLayout")||validMotionProps.has(it)}let shouldForward=it=>!isValidMotionProp(it);function loadExternalIsValidProp(it){it&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):it(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(it,g,et){const ot={};for(const ct in it)ct==="values"&&typeof it.values=="object"||(shouldForward(ct)||et===!0&&isValidMotionProp(ct)||!g&&!isValidMotionProp(ct)||it.draggable&&ct.startsWith("onDrag"))&&(ot[ct]=it[ct]);return ot}function useSVGProps(it,g,et,ot){const ct=reactExports.useMemo(()=>{const ut=createSvgRenderState();return buildSVGAttrs(ut,g,isSVGTag(ot),it.transformTemplate),{...ut.attrs,style:{...ut.style}}},[g]);if(it.style){const ut={};copyRawValuesOnly(ut,it.style,it),ct.style={...ut,...ct.style}}return ct}function createUseRender(it=!1){return(et,ot,ct,{latestValues:ut},dt)=>{const St=(isSVGComponent(et)?useSVGProps:useHTMLProps)(ot,ut,dt,et),kt=filterProps(ot,typeof et=="string",it),Tt=et!==reactExports.Fragment?{...kt,...St,ref:ct}:{},{children:jt}=ot,Rt=reactExports.useMemo(()=>isMotionValue(jt)?jt.get():jt,[jt]);return reactExports.createElement(et,{...Tt,children:Rt})}}function createMotionComponentFactory(it,g){return function(ot,{forwardMotionProps:ct}={forwardMotionProps:!1}){const dt={...isSVGComponent(ot)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:it,useRender:createUseRender(ct),createVisualElement:g,Component:ot};return createRendererMotionComponent(dt)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const it=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=it.matches;it.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(it,g,et){for(const ot in g){const ct=g[ot],ut=et[ot];if(isMotionValue(ct))it.addValue(ot,ct);else if(isMotionValue(ut))it.addValue(ot,motionValue(ct,{owner:it}));else if(ut!==ct)if(it.hasValue(ot)){const dt=it.getValue(ot);dt.liveStyle===!0?dt.jump(ct):dt.hasAnimated||dt.set(ct)}else{const dt=it.getStaticValue(ot);it.addValue(ot,motionValue(dt!==void 0?dt:ct,{owner:it}))}}for(const ot in et)g[ot]===void 0&&it.removeValue(ot);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=it=>valueTypes.find(testValueType(it)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,et,ot){return{}}constructor({parent:g,props:et,presenceContext:ot,reducedMotionConfig:ct,blockInitialAnimation:ut,visualState:dt},ft={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Rt=time.now();this.renderScheduledAt<Rt&&(this.renderScheduledAt=Rt,frame.render(this.render,!1,!0))};const{latestValues:St,renderState:kt}=dt;this.latestValues=St,this.baseTarget={...St},this.initialValues=et.initial?{...St}:{},this.renderState=kt,this.parent=g,this.props=et,this.presenceContext=ot,this.depth=g?g.depth+1:0,this.reducedMotionConfig=ct,this.options=ft,this.blockInitialAnimation=!!ut,this.isControllingVariants=isControllingVariants(et),this.isVariantNode=isVariantNode(et),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:Tt,...jt}=this.scrapeMotionValuesFromProps(et,{},this);for(const Rt in jt){const Ft=jt[Rt];St[Rt]!==void 0&&isMotionValue(Ft)&&Ft.set(St[Rt],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((et,ot)=>this.bindToMotionValue(ot,et)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const et=this.features[g];et&&(et.unmount(),et.isMounted=!1)}this.current=null}bindToMotionValue(g,et){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const ot=transformProps.has(g),ct=et.on("change",ft=>{this.latestValues[g]=ft,this.props.onUpdate&&frame.preRender(this.notifyUpdate),ot&&this.projection&&(this.projection.isTransformDirty=!0)}),ut=et.on("renderRequest",this.scheduleRender);let dt;window.MotionCheckAppearSync&&(dt=window.MotionCheckAppearSync(this,g,et)),this.valueSubscriptions.set(g,()=>{ct(),ut(),dt&&dt(),et.owner&&et.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const et=featureDefinitions[g];if(!et)continue;const{isEnabled:ot,Feature:ct}=et;if(!this.features[g]&&ct&&ot(this.props)&&(this.features[g]=new ct(this)),this.features[g]){const ut=this.features[g];ut.isMounted?ut.update():(ut.mount(),ut.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,et){this.latestValues[g]=et}update(g,et){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=et;for(let ot=0;ot<propEventHandlers.length;ot++){const ct=propEventHandlers[ot];this.propEventSubscriptions[ct]&&(this.propEventSubscriptions[ct](),delete this.propEventSubscriptions[ct]);const ut="on"+ct,dt=g[ut];dt&&(this.propEventSubscriptions[ct]=this.on(ct,dt))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const et=this.getClosestVariantNode();if(et)return et.variantChildren&&et.variantChildren.add(g),()=>et.variantChildren.delete(g)}addValue(g,et){const ot=this.values.get(g);et!==ot&&(ot&&this.removeValue(g),this.bindToMotionValue(g,et),this.values.set(g,et),this.latestValues[g]=et.get())}removeValue(g){this.values.delete(g);const et=this.valueSubscriptions.get(g);et&&(et(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,et){if(this.props.values&&this.props.values[g])return this.props.values[g];let ot=this.values.get(g);return ot===void 0&&et!==void 0&&(ot=motionValue(et===null?void 0:et,{owner:this}),this.addValue(g,ot)),ot}readValue(g,et){var ot;let ct=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(ot=this.getBaseTargetFromProps(this.props,g))!==null&&ot!==void 0?ot:this.readValueFromInstance(this.current,g,this.options);return ct!=null&&(typeof ct=="string"&&(isNumericalString(ct)||isZeroValueString(ct))?ct=parseFloat(ct):!findValueType(ct)&&complex.test(et)&&(ct=getAnimatableNone(g,et)),this.setBaseTarget(g,isMotionValue(ct)?ct.get():ct)),isMotionValue(ct)?ct.get():ct}setBaseTarget(g,et){this.baseTarget[g]=et}getBaseTarget(g){var et;const{initial:ot}=this.props;let ct;if(typeof ot=="string"||typeof ot=="object"){const dt=resolveVariantFromProps(this.props,ot,(et=this.presenceContext)===null||et===void 0?void 0:et.custom);dt&&(ct=dt[g])}if(ot&&ct!==void 0)return ct;const ut=this.getBaseTargetFromProps(this.props,g);return ut!==void 0&&!isMotionValue(ut)?ut:this.initialValues[g]!==void 0&&ct===void 0?void 0:this.baseTarget[g]}on(g,et){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(et)}notify(g,...et){this.events[g]&&this.events[g].notify(...et)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,et){return g.compareDocumentPosition(et)&2?1:-1}getBaseTargetFromProps(g,et){return g.style?g.style[et]:void 0}removeValueFromRenderState(g,{vars:et,style:ot}){delete et[g],delete ot[g]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",et=>{this.current&&(this.current.textContent=`${et}`)}))}}function getComputedStyle$1(it){return window.getComputedStyle(it)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}else{const ot=getComputedStyle$1(g),ct=(isCSSVariableName(et)?ot.getPropertyValue(et):ot[et])||0;return typeof ct=="string"?ct.trim():ct}}measureInstanceViewportBox(g,{transformPagePoint:et}){return measureViewportBox(g,et)}build(g,et,ot){buildHTMLStyles(g,et,ot.transformTemplate)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps$1(g,et,ot)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,et){return g[et]}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}return et=camelCaseAttributes.has(et)?et:camelToDash(et),g.getAttribute(et)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps(g,et,ot)}build(g,et,ot){buildSVGAttrs(g,et,this.isSVGTag,ot.transformTemplate)}renderInstance(g,et,ot,ct){renderSVG(g,et,ot,ct)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(it,g)=>isSVGComponent(it)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:it!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const et=this.props.childRef.current;if(et&&g.isPresent&&!this.props.isPresent){const ot=this.props.sizeRef.current;ot.height=et.offsetHeight||0,ot.width=et.offsetWidth||0,ot.top=et.offsetTop,ot.left=et.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:it,isPresent:g}){const et=reactExports.useId(),ot=reactExports.useRef(null),ct=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:ut}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:dt,height:ft,top:St,left:kt}=ct.current;if(g||!ot.current||!dt||!ft)return;ot.current.dataset.motionPopId=et;const Tt=document.createElement("style");return ut&&(Tt.nonce=ut),document.head.appendChild(Tt),Tt.sheet&&Tt.sheet.insertRule(`
          [data-motion-pop-id="${et}"] {
            position: absolute !important;
            width: ${dt}px !important;
            height: ${ft}px !important;
            top: ${St}px !important;
            left: ${kt}px !important;
          }
        `),()=>{document.head.removeChild(Tt)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:ot,sizeRef:ct,children:reactExports.cloneElement(it,{ref:ot})})}const PresenceChild=({children:it,initial:g,isPresent:et,onExitComplete:ot,custom:ct,presenceAffectsLayout:ut,mode:dt})=>{const ft=useConstant(newChildrenMap),St=reactExports.useId(),kt=reactExports.useCallback(jt=>{ft.set(jt,!0);for(const Rt of ft.values())if(!Rt)return;ot&&ot()},[ft,ot]),Tt=reactExports.useMemo(()=>({id:St,initial:g,isPresent:et,custom:ct,onExitComplete:kt,register:jt=>(ft.set(jt,!1),()=>ft.delete(jt))}),ut?[Math.random(),kt]:[et,kt]);return reactExports.useMemo(()=>{ft.forEach((jt,Rt)=>ft.set(Rt,!1))},[et]),reactExports.useEffect(()=>{!et&&!ft.size&&ot&&ot()},[et]),dt==="popLayout"&&(it=jsxRuntimeExports.jsx(PopChild,{isPresent:et,children:it})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Tt,children:it})};function newChildrenMap(){return new Map}const getChildKey=it=>it.key||"";function onlyElements(it){const g=[];return reactExports.Children.forEach(it,et=>{reactExports.isValidElement(et)&&g.push(et)}),g}const AnimatePresence=({children:it,exitBeforeEnter:g,custom:et,initial:ot=!0,onExitComplete:ct,presenceAffectsLayout:ut=!0,mode:dt="sync"})=>{const ft=reactExports.useMemo(()=>onlyElements(it),[it]),St=ft.map(getChildKey),kt=reactExports.useRef(!0),Tt=reactExports.useRef(ft),jt=useConstant(()=>new Map),[Rt,Ft]=reactExports.useState(ft),[$t,zt]=reactExports.useState(ft);useIsomorphicLayoutEffect$1(()=>{kt.current=!1,Tt.current=ft;for(let Ut=0;Ut<$t.length;Ut++){const Jt=getChildKey($t[Ut]);St.includes(Jt)?jt.delete(Jt):jt.get(Jt)!==!0&&jt.set(Jt,!1)}},[$t,St.length,St.join("-")]);const Kt=[];if(ft!==Rt){let Ut=[...ft];for(let Jt=0;Jt<$t.length;Jt++){const en=$t[Jt],tn=getChildKey(en);St.includes(tn)||(Ut.splice(Jt,0,en),Kt.push(en))}dt==="wait"&&Kt.length&&(Ut=Kt),zt(onlyElements(Ut)),Ft(ft);return}const{forceRender:Bt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$t.map(Ut=>{const Jt=getChildKey(Ut),en=ft===$t||St.includes(Jt),tn=()=>{if(jt.has(Jt))jt.set(Jt,!0);else return;let nn=!0;jt.forEach(rn=>{rn||(nn=!1)}),nn&&(Bt==null||Bt(),zt(Tt.current),ct&&ct())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:en,initial:!kt.current||ot?void 0:!1,custom:en?void 0:et,presenceAffectsLayout:ut,mode:dt,onExitComplete:en?void 0:tn,children:Ut},Jt)})})};function useMotionValue(it){const g=useConstant(()=>motionValue(it)),{isStatic:et}=reactExports.useContext(MotionConfigContext);if(et){const[,ot]=reactExports.useState(it);reactExports.useEffect(()=>g.on("change",ot),[])}return g}function toNumber(it){return typeof it=="number"?it:parseFloat(it)}function useSpring(it,g={}){const{isStatic:et}=reactExports.useContext(MotionConfigContext),ot=reactExports.useRef(null),ct=useMotionValue(isMotionValue(it)?toNumber(it.get()):it),ut=reactExports.useRef(ct.get()),dt=reactExports.useRef(()=>{}),ft=()=>{const kt=ot.current;kt&&kt.time===0&&kt.sample(frameData.delta),St(),ot.current=animateValue({keyframes:[ct.get(),ut.current],velocity:ct.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:dt.current})},St=()=>{ot.current&&ot.current.stop()};return reactExports.useInsertionEffect(()=>ct.attach((kt,Tt)=>et?Tt(kt):(ut.current=kt,dt.current=Tt,frame.update(ft),ct.get()),St),[JSON.stringify(g)]),useIsomorphicLayoutEffect$1(()=>{if(isMotionValue(it))return it.on("change",kt=>ct.set(toNumber(kt)))},[ct]),ct}function bind$1(it,g){return function(){return it.apply(g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(it=>g=>{const et=toString.call(g);return it[et]||(it[et]=et.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=it=>(it=it.toLowerCase(),g=>kindOf(g)===it),typeOfTest=it=>g=>typeof g===it,{isArray:isArray$4}=Array,isUndefined=typeOfTest("undefined");function isBuffer$3(it){return it!==null&&!isUndefined(it)&&it.constructor!==null&&!isUndefined(it.constructor)&&isFunction$4(it.constructor.isBuffer)&&it.constructor.isBuffer(it)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(it){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(it):g=it&&it.buffer&&isArrayBuffer$1(it.buffer),g}const isString$1=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=it=>it!==null&&typeof it=="object",isBoolean=it=>it===!0||it===!1,isPlainObject$1=it=>{if(kindOf(it)!=="object")return!1;const g=getPrototypeOf(it);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in it)&&!(Symbol.iterator in it)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=it=>isObject$3(it)&&isFunction$4(it.pipe),isFormData=it=>{let g;return it&&(typeof FormData=="function"&&it instanceof FormData||isFunction$4(it.append)&&((g=kindOf(it))==="formdata"||g==="object"&&isFunction$4(it.toString)&&it.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=it=>it.trim?it.trim():it.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(it,g,{allOwnKeys:et=!1}={}){if(it===null||typeof it>"u")return;let ot,ct;if(typeof it!="object"&&(it=[it]),isArray$4(it))for(ot=0,ct=it.length;ot<ct;ot++)g.call(null,it[ot],ot,it);else{const ut=et?Object.getOwnPropertyNames(it):Object.keys(it),dt=ut.length;let ft;for(ot=0;ot<dt;ot++)ft=ut[ot],g.call(null,it[ft],ft,it)}}function findKey(it,g){g=g.toLowerCase();const et=Object.keys(it);let ot=et.length,ct;for(;ot-- >0;)if(ct=et[ot],g===ct.toLowerCase())return ct;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=it=>!isUndefined(it)&&it!==_global;function merge(){const{caseless:it}=isContextDefined(this)&&this||{},g={},et=(ot,ct)=>{const ut=it&&findKey(g,ct)||ct;isPlainObject$1(g[ut])&&isPlainObject$1(ot)?g[ut]=merge(g[ut],ot):isPlainObject$1(ot)?g[ut]=merge({},ot):isArray$4(ot)?g[ut]=ot.slice():g[ut]=ot};for(let ot=0,ct=arguments.length;ot<ct;ot++)arguments[ot]&&forEach$1(arguments[ot],et);return g}const extend=(it,g,et,{allOwnKeys:ot}={})=>(forEach$1(g,(ct,ut)=>{et&&isFunction$4(ct)?it[ut]=bind$1(ct,et):it[ut]=ct},{allOwnKeys:ot}),it),stripBOM=it=>(it.charCodeAt(0)===65279&&(it=it.slice(1)),it),inherits=(it,g,et,ot)=>{it.prototype=Object.create(g.prototype,ot),it.prototype.constructor=it,Object.defineProperty(it,"super",{value:g.prototype}),et&&Object.assign(it.prototype,et)},toFlatObject=(it,g,et,ot)=>{let ct,ut,dt;const ft={};if(g=g||{},it==null)return g;do{for(ct=Object.getOwnPropertyNames(it),ut=ct.length;ut-- >0;)dt=ct[ut],(!ot||ot(dt,it,g))&&!ft[dt]&&(g[dt]=it[dt],ft[dt]=!0);it=et!==!1&&getPrototypeOf(it)}while(it&&(!et||et(it,g))&&it!==Object.prototype);return g},endsWith=(it,g,et)=>{it=String(it),(et===void 0||et>it.length)&&(et=it.length),et-=g.length;const ot=it.indexOf(g,et);return ot!==-1&&ot===et},toArray=it=>{if(!it)return null;if(isArray$4(it))return it;let g=it.length;if(!isNumber$1(g))return null;const et=new Array(g);for(;g-- >0;)et[g]=it[g];return et},isTypedArray$3=(it=>g=>it&&g instanceof it)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(it,g)=>{const ot=(it&&it[Symbol.iterator]).call(it);let ct;for(;(ct=ot.next())&&!ct.done;){const ut=ct.value;g.call(it,ut[0],ut[1])}},matchAll=(it,g)=>{let et;const ot=[];for(;(et=it.exec(g))!==null;)ot.push(et);return ot},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=it=>it.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(et,ot,ct){return ot.toUpperCase()+ct}),hasOwnProperty$9=(({hasOwnProperty:it})=>(g,et)=>it.call(g,et))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(it,g)=>{const et=Object.getOwnPropertyDescriptors(it),ot={};forEach$1(et,(ct,ut)=>{let dt;(dt=g(ct,ut,it))!==!1&&(ot[ut]=dt||ct)}),Object.defineProperties(it,ot)},freezeMethods=it=>{reduceDescriptors(it,(g,et)=>{if(isFunction$4(it)&&["arguments","caller","callee"].indexOf(et)!==-1)return!1;const ot=it[et];if(isFunction$4(ot)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+et+"'")})}})},toObjectSet=(it,g)=>{const et={},ot=ct=>{ct.forEach(ut=>{et[ut]=!0})};return isArray$4(it)?ot(it):ot(String(it).split(g)),et},noop$1=()=>{},toFiniteNumber=(it,g)=>it!=null&&Number.isFinite(it=+it)?it:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(it=16,g=ALPHABET.ALPHA_DIGIT)=>{let et="";const{length:ot}=g;for(;it--;)et+=g[Math.random()*ot|0];return et};function isSpecCompliantForm(it){return!!(it&&isFunction$4(it.append)&&it[Symbol.toStringTag]==="FormData"&&it[Symbol.iterator])}const toJSONObject=it=>{const g=new Array(10),et=(ot,ct)=>{if(isObject$3(ot)){if(g.indexOf(ot)>=0)return;if(!("toJSON"in ot)){g[ct]=ot;const ut=isArray$4(ot)?[]:{};return forEach$1(ot,(dt,ft)=>{const St=et(dt,ct+1);!isUndefined(St)&&(ut[ft]=St)}),g[ct]=void 0,ut}}return ot};return et(it,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=it=>it&&(isObject$3(it)||isFunction$4(it))&&isFunction$4(it.then)&&isFunction$4(it.catch),_setImmediate=((it,g)=>it?setImmediate:g?((et,ot)=>(_global.addEventListener("message",({source:ct,data:ut})=>{ct===_global&&ut===et&&ot.length&&ot.shift()()},!1),ct=>{ot.push(ct),_global.postMessage(et,"*")}))(`axios@${Math.random()}`,[]):et=>setTimeout(et))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$4,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(it,g,et,ot,ct){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=it,this.name="AxiosError",g&&(this.code=g),et&&(this.config=et),ot&&(this.request=ot),ct&&(this.response=ct,this.status=ct.status?ct.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(it=>{descriptors[it]={value:it}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(it,g,et,ot,ct,ut)=>{const dt=Object.create(prototype$1);return utils$1.toFlatObject(it,dt,function(St){return St!==Error.prototype},ft=>ft!=="isAxiosError"),AxiosError.call(dt,it.message,g,et,ot,ct),dt.cause=it,dt.name=it.name,ut&&Object.assign(dt,ut),dt};const httpAdapter=null;function isVisitable(it){return utils$1.isPlainObject(it)||utils$1.isArray(it)}function removeBrackets(it){return utils$1.endsWith(it,"[]")?it.slice(0,-2):it}function renderKey(it,g,et){return it?it.concat(g).map(function(ct,ut){return ct=removeBrackets(ct),!et&&ut?"["+ct+"]":ct}).join(et?".":""):g}function isFlatArray(it){return utils$1.isArray(it)&&!it.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(it,g,et){if(!utils$1.isObject(it))throw new TypeError("target must be an object");g=g||new FormData,et=utils$1.toFlatObject(et,{metaTokens:!0,dots:!1,indexes:!1},!1,function(zt,Kt){return!utils$1.isUndefined(Kt[zt])});const ot=et.metaTokens,ct=et.visitor||Tt,ut=et.dots,dt=et.indexes,St=(et.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(g);if(!utils$1.isFunction(ct))throw new TypeError("visitor must be a function");function kt($t){if($t===null)return"";if(utils$1.isDate($t))return $t.toISOString();if(!St&&utils$1.isBlob($t))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer($t)||utils$1.isTypedArray($t)?St&&typeof Blob=="function"?new Blob([$t]):Buffer.from($t):$t}function Tt($t,zt,Kt){let Bt=$t;if($t&&!Kt&&typeof $t=="object"){if(utils$1.endsWith(zt,"{}"))zt=ot?zt:zt.slice(0,-2),$t=JSON.stringify($t);else if(utils$1.isArray($t)&&isFlatArray($t)||(utils$1.isFileList($t)||utils$1.endsWith(zt,"[]"))&&(Bt=utils$1.toArray($t)))return zt=removeBrackets(zt),Bt.forEach(function(Jt,en){!(utils$1.isUndefined(Jt)||Jt===null)&&g.append(dt===!0?renderKey([zt],en,ut):dt===null?zt:zt+"[]",kt(Jt))}),!1}return isVisitable($t)?!0:(g.append(renderKey(Kt,zt,ut),kt($t)),!1)}const jt=[],Rt=Object.assign(predicates,{defaultVisitor:Tt,convertValue:kt,isVisitable});function Ft($t,zt){if(!utils$1.isUndefined($t)){if(jt.indexOf($t)!==-1)throw Error("Circular reference detected in "+zt.join("."));jt.push($t),utils$1.forEach($t,function(Bt,Ut){(!(utils$1.isUndefined(Bt)||Bt===null)&&ct.call(g,Bt,utils$1.isString(Ut)?Ut.trim():Ut,zt,Rt))===!0&&Ft(Bt,zt?zt.concat(Ut):[Ut])}),jt.pop()}}if(!utils$1.isObject(it))throw new TypeError("data must be an object");return Ft(it),g}function encode$1(it){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(it).replace(/[!'()~]|%20|%00/g,function(ot){return g[ot]})}function AxiosURLSearchParams(it,g){this._pairs=[],it&&toFormData(it,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,et){this._pairs.push([g,et])};prototype.toString=function(g){const et=g?function(ot){return g.call(this,ot,encode$1)}:encode$1;return this._pairs.map(function(ct){return et(ct[0])+"="+et(ct[1])},"").join("&")};function encode(it){return encodeURIComponent(it).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(it,g,et){if(!g)return it;const ot=et&&et.encode||encode;utils$1.isFunction(et)&&(et={serialize:et});const ct=et&&et.serialize;let ut;if(ct?ut=ct(g,et):ut=utils$1.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,et).toString(ot),ut){const dt=it.indexOf("#");dt!==-1&&(it=it.slice(0,dt)),it+=(it.indexOf("?")===-1?"?":"&")+ut}return it}class InterceptorManager{constructor(){this.handlers=[]}use(g,et,ot){return this.handlers.push({fulfilled:g,rejected:et,synchronous:ot?ot.synchronous:!1,runWhen:ot?ot.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$1.forEach(this.handlers,function(ot){ot!==null&&g(ot)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(it,g){return toFormData(it,new platform.classes.URLSearchParams,Object.assign({visitor:function(et,ot,ct,ut){return platform.isNode&&utils$1.isBuffer(et)?(this.append(ot,et.toString("base64")),!1):ut.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(it){return utils$1.matchAll(/\w+|\[(\w*)]/g,it).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(it){const g={},et=Object.keys(it);let ot;const ct=et.length;let ut;for(ot=0;ot<ct;ot++)ut=et[ot],g[ut]=it[ut];return g}function formDataToJSON(it){function g(et,ot,ct,ut){let dt=et[ut++];if(dt==="__proto__")return!0;const ft=Number.isFinite(+dt),St=ut>=et.length;return dt=!dt&&utils$1.isArray(ct)?ct.length:dt,St?(utils$1.hasOwnProp(ct,dt)?ct[dt]=[ct[dt],ot]:ct[dt]=ot,!ft):((!ct[dt]||!utils$1.isObject(ct[dt]))&&(ct[dt]=[]),g(et,ot,ct[dt],ut)&&utils$1.isArray(ct[dt])&&(ct[dt]=arrayToObject(ct[dt])),!ft)}if(utils$1.isFormData(it)&&utils$1.isFunction(it.entries)){const et={};return utils$1.forEachEntry(it,(ot,ct)=>{g(parsePropPath(ot),ct,et,0)}),et}return null}function stringifySafely(it,g,et){if(utils$1.isString(it))try{return(g||JSON.parse)(it),utils$1.trim(it)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(et||JSON.stringify)(it)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,et){const ot=et.getContentType()||"",ct=ot.indexOf("application/json")>-1,ut=utils$1.isObject(g);if(ut&&utils$1.isHTMLForm(g)&&(g=new FormData(g)),utils$1.isFormData(g))return ct?JSON.stringify(formDataToJSON(g)):g;if(utils$1.isArrayBuffer(g)||utils$1.isBuffer(g)||utils$1.isStream(g)||utils$1.isFile(g)||utils$1.isBlob(g)||utils$1.isReadableStream(g))return g;if(utils$1.isArrayBufferView(g))return g.buffer;if(utils$1.isURLSearchParams(g))return et.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let ft;if(ut){if(ot.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((ft=utils$1.isFileList(g))||ot.indexOf("multipart/form-data")>-1){const St=this.env&&this.env.FormData;return toFormData(ft?{"files[]":g}:g,St&&new St,this.formSerializer)}}return ut||ct?(et.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const et=this.transitional||defaults$1.transitional,ot=et&&et.forcedJSONParsing,ct=this.responseType==="json";if(utils$1.isResponse(g)||utils$1.isReadableStream(g))return g;if(g&&utils$1.isString(g)&&(ot&&!this.responseType||ct)){const dt=!(et&&et.silentJSONParsing)&&ct;try{return JSON.parse(g)}catch(ft){if(dt)throw ft.name==="SyntaxError"?AxiosError.from(ft,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):ft}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],it=>{defaults$1.headers[it]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=it=>{const g={};let et,ot,ct;return it&&it.split(`
`).forEach(function(dt){ct=dt.indexOf(":"),et=dt.substring(0,ct).trim().toLowerCase(),ot=dt.substring(ct+1).trim(),!(!et||g[et]&&ignoreDuplicateOf[et])&&(et==="set-cookie"?g[et]?g[et].push(ot):g[et]=[ot]:g[et]=g[et]?g[et]+", "+ot:ot)}),g},$internals=Symbol("internals");function normalizeHeader(it){return it&&String(it).trim().toLowerCase()}function normalizeValue(it){return it===!1||it==null?it:utils$1.isArray(it)?it.map(normalizeValue):String(it)}function parseTokens(it){const g=Object.create(null),et=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ot;for(;ot=et.exec(it);)g[ot[1]]=ot[2];return g}const isValidHeaderName=it=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(it.trim());function matchHeaderValue(it,g,et,ot,ct){if(utils$1.isFunction(ot))return ot.call(this,g,et);if(ct&&(g=et),!!utils$1.isString(g)){if(utils$1.isString(ot))return g.indexOf(ot)!==-1;if(utils$1.isRegExp(ot))return ot.test(g)}}function formatHeader(it){return it.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,et,ot)=>et.toUpperCase()+ot)}function buildAccessors(it,g){const et=utils$1.toCamelCase(" "+g);["get","set","has"].forEach(ot=>{Object.defineProperty(it,ot+et,{value:function(ct,ut,dt){return this[ot].call(this,g,ct,ut,dt)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,et,ot){const ct=this;function ut(ft,St,kt){const Tt=normalizeHeader(St);if(!Tt)throw new Error("header name must be a non-empty string");const jt=utils$1.findKey(ct,Tt);(!jt||ct[jt]===void 0||kt===!0||kt===void 0&&ct[jt]!==!1)&&(ct[jt||St]=normalizeValue(ft))}const dt=(ft,St)=>utils$1.forEach(ft,(kt,Tt)=>ut(kt,Tt,St));if(utils$1.isPlainObject(g)||g instanceof this.constructor)dt(g,et);else if(utils$1.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))dt(parseHeaders(g),et);else if(utils$1.isHeaders(g))for(const[ft,St]of g.entries())ut(St,ft,ot);else g!=null&&ut(et,g,ot);return this}get(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);if(ot){const ct=this[ot];if(!et)return ct;if(et===!0)return parseTokens(ct);if(utils$1.isFunction(et))return et.call(this,ct,ot);if(utils$1.isRegExp(et))return et.exec(ct);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);return!!(ot&&this[ot]!==void 0&&(!et||matchHeaderValue(this,this[ot],ot,et)))}return!1}delete(g,et){const ot=this;let ct=!1;function ut(dt){if(dt=normalizeHeader(dt),dt){const ft=utils$1.findKey(ot,dt);ft&&(!et||matchHeaderValue(ot,ot[ft],ft,et))&&(delete ot[ft],ct=!0)}}return utils$1.isArray(g)?g.forEach(ut):ut(g),ct}clear(g){const et=Object.keys(this);let ot=et.length,ct=!1;for(;ot--;){const ut=et[ot];(!g||matchHeaderValue(this,this[ut],ut,g,!0))&&(delete this[ut],ct=!0)}return ct}normalize(g){const et=this,ot={};return utils$1.forEach(this,(ct,ut)=>{const dt=utils$1.findKey(ot,ut);if(dt){et[dt]=normalizeValue(ct),delete et[ut];return}const ft=g?formatHeader(ut):String(ut).trim();ft!==ut&&delete et[ut],et[ft]=normalizeValue(ct),ot[ft]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const et=Object.create(null);return utils$1.forEach(this,(ot,ct)=>{ot!=null&&ot!==!1&&(et[ct]=g&&utils$1.isArray(ot)?ot.join(", "):ot)}),et}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,et])=>g+": "+et).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...et){const ot=new this(g);return et.forEach(ct=>ot.set(ct)),ot}static accessor(g){const ot=(this[$internals]=this[$internals]={accessors:{}}).accessors,ct=this.prototype;function ut(dt){const ft=normalizeHeader(dt);ot[ft]||(buildAccessors(ct,dt),ot[ft]=!0)}return utils$1.isArray(g)?g.forEach(ut):ut(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:it},g)=>{let et=g[0].toUpperCase()+g.slice(1);return{get:()=>it,set(ot){this[et]=ot}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(it,g){const et=this||defaults$2,ot=g||et,ct=AxiosHeaders$1.from(ot.headers);let ut=ot.data;return utils$1.forEach(it,function(ft){ut=ft.call(et,ut,ct.normalize(),g?g.status:void 0)}),ct.normalize(),ut}function isCancel(it){return!!(it&&it.__CANCEL__)}function CanceledError(it,g,et){AxiosError.call(this,it??"canceled",AxiosError.ERR_CANCELED,g,et),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(it,g,et){const ot=et.config.validateStatus;!et.status||!ot||ot(et.status)?it(et):g(new AxiosError("Request failed with status code "+et.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(et.status/100)-4],et.config,et.request,et))}function parseProtocol(it){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(it);return g&&g[1]||""}function speedometer(it,g){it=it||10;const et=new Array(it),ot=new Array(it);let ct=0,ut=0,dt;return g=g!==void 0?g:1e3,function(St){const kt=Date.now(),Tt=ot[ut];dt||(dt=kt),et[ct]=St,ot[ct]=kt;let jt=ut,Rt=0;for(;jt!==ct;)Rt+=et[jt++],jt=jt%it;if(ct=(ct+1)%it,ct===ut&&(ut=(ut+1)%it),kt-dt<g)return;const Ft=Tt&&kt-Tt;return Ft?Math.round(Rt*1e3/Ft):void 0}}function throttle(it,g){let et=0,ot=1e3/g,ct,ut;const dt=(kt,Tt=Date.now())=>{et=Tt,ct=null,ut&&(clearTimeout(ut),ut=null),it.apply(null,kt)};return[(...kt)=>{const Tt=Date.now(),jt=Tt-et;jt>=ot?dt(kt,Tt):(ct=kt,ut||(ut=setTimeout(()=>{ut=null,dt(ct)},ot-jt)))},()=>ct&&dt(ct)]}const progressEventReducer=(it,g,et=3)=>{let ot=0;const ct=speedometer(50,250);return throttle(ut=>{const dt=ut.loaded,ft=ut.lengthComputable?ut.total:void 0,St=dt-ot,kt=ct(St),Tt=dt<=ft;ot=dt;const jt={loaded:dt,total:ft,progress:ft?dt/ft:void 0,bytes:St,rate:kt||void 0,estimated:kt&&ft&&Tt?(ft-dt)/kt:void 0,event:ut,lengthComputable:ft!=null,[g?"download":"upload"]:!0};it(jt)},et)},progressEventDecorator=(it,g)=>{const et=it!=null;return[ot=>g[0]({lengthComputable:et,total:it,loaded:ot}),g[1]]},asyncDecorator=it=>(...g)=>utils$1.asap(()=>it(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?((it,g)=>et=>(et=new URL(et,platform.origin),it.protocol===et.protocol&&it.host===et.host&&(g||it.port===et.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(it,g,et,ot,ct,ut){const dt=[it+"="+encodeURIComponent(g)];utils$1.isNumber(et)&&dt.push("expires="+new Date(et).toGMTString()),utils$1.isString(ot)&&dt.push("path="+ot),utils$1.isString(ct)&&dt.push("domain="+ct),ut===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(it){const g=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(it){this.write(it,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(it){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(it)}function combineURLs(it,g){return g?it.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):it}function buildFullPath(it,g){return it&&!isAbsoluteURL(g)?combineURLs(it,g):g}const headersToObject=it=>it instanceof AxiosHeaders$1?{...it}:it;function mergeConfig(it,g){g=g||{};const et={};function ot(kt,Tt,jt,Rt){return utils$1.isPlainObject(kt)&&utils$1.isPlainObject(Tt)?utils$1.merge.call({caseless:Rt},kt,Tt):utils$1.isPlainObject(Tt)?utils$1.merge({},Tt):utils$1.isArray(Tt)?Tt.slice():Tt}function ct(kt,Tt,jt,Rt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt,jt,Rt)}else return ot(kt,Tt,jt,Rt)}function ut(kt,Tt){if(!utils$1.isUndefined(Tt))return ot(void 0,Tt)}function dt(kt,Tt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt)}else return ot(void 0,Tt)}function ft(kt,Tt,jt){if(jt in g)return ot(kt,Tt);if(jt in it)return ot(void 0,kt)}const St={url:ut,method:ut,data:ut,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:ft,headers:(kt,Tt,jt)=>ct(headersToObject(kt),headersToObject(Tt),jt,!0)};return utils$1.forEach(Object.keys(Object.assign({},it,g)),function(Tt){const jt=St[Tt]||ct,Rt=jt(it[Tt],g[Tt],Tt);utils$1.isUndefined(Rt)&&jt!==ft||(et[Tt]=Rt)}),et}const resolveConfig=it=>{const g=mergeConfig({},it);let{data:et,withXSRFToken:ot,xsrfHeaderName:ct,xsrfCookieName:ut,headers:dt,auth:ft}=g;g.headers=dt=AxiosHeaders$1.from(dt),g.url=buildURL(buildFullPath(g.baseURL,g.url),it.params,it.paramsSerializer),ft&&dt.set("Authorization","Basic "+btoa((ft.username||"")+":"+(ft.password?unescape(encodeURIComponent(ft.password)):"")));let St;if(utils$1.isFormData(et)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((St=dt.getContentType())!==!1){const[kt,...Tt]=St?St.split(";").map(jt=>jt.trim()).filter(Boolean):[];dt.setContentType([kt||"multipart/form-data",...Tt].join("; "))}}if(platform.hasStandardBrowserEnv&&(ot&&utils$1.isFunction(ot)&&(ot=ot(g)),ot||ot!==!1&&isURLSameOrigin(g.url))){const kt=ct&&ut&&cookies.read(ut);kt&&dt.set(ct,kt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(it){return new Promise(function(et,ot){const ct=resolveConfig(it);let ut=ct.data;const dt=AxiosHeaders$1.from(ct.headers).normalize();let{responseType:ft,onUploadProgress:St,onDownloadProgress:kt}=ct,Tt,jt,Rt,Ft,$t;function zt(){Ft&&Ft(),$t&&$t(),ct.cancelToken&&ct.cancelToken.unsubscribe(Tt),ct.signal&&ct.signal.removeEventListener("abort",Tt)}let Kt=new XMLHttpRequest;Kt.open(ct.method.toUpperCase(),ct.url,!0),Kt.timeout=ct.timeout;function Bt(){if(!Kt)return;const Jt=AxiosHeaders$1.from("getAllResponseHeaders"in Kt&&Kt.getAllResponseHeaders()),tn={data:!ft||ft==="text"||ft==="json"?Kt.responseText:Kt.response,status:Kt.status,statusText:Kt.statusText,headers:Jt,config:it,request:Kt};settle(function(rn){et(rn),zt()},function(rn){ot(rn),zt()},tn),Kt=null}"onloadend"in Kt?Kt.onloadend=Bt:Kt.onreadystatechange=function(){!Kt||Kt.readyState!==4||Kt.status===0&&!(Kt.responseURL&&Kt.responseURL.indexOf("file:")===0)||setTimeout(Bt)},Kt.onabort=function(){Kt&&(ot(new AxiosError("Request aborted",AxiosError.ECONNABORTED,it,Kt)),Kt=null)},Kt.onerror=function(){ot(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Kt)),Kt=null},Kt.ontimeout=function(){let en=ct.timeout?"timeout of "+ct.timeout+"ms exceeded":"timeout exceeded";const tn=ct.transitional||transitionalDefaults;ct.timeoutErrorMessage&&(en=ct.timeoutErrorMessage),ot(new AxiosError(en,tn.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,it,Kt)),Kt=null},ut===void 0&&dt.setContentType(null),"setRequestHeader"in Kt&&utils$1.forEach(dt.toJSON(),function(en,tn){Kt.setRequestHeader(tn,en)}),utils$1.isUndefined(ct.withCredentials)||(Kt.withCredentials=!!ct.withCredentials),ft&&ft!=="json"&&(Kt.responseType=ct.responseType),kt&&([Rt,$t]=progressEventReducer(kt,!0),Kt.addEventListener("progress",Rt)),St&&Kt.upload&&([jt,Ft]=progressEventReducer(St),Kt.upload.addEventListener("progress",jt),Kt.upload.addEventListener("loadend",Ft)),(ct.cancelToken||ct.signal)&&(Tt=Jt=>{Kt&&(ot(!Jt||Jt.type?new CanceledError(null,it,Kt):Jt),Kt.abort(),Kt=null)},ct.cancelToken&&ct.cancelToken.subscribe(Tt),ct.signal&&(ct.signal.aborted?Tt():ct.signal.addEventListener("abort",Tt)));const Ut=parseProtocol(ct.url);if(Ut&&platform.protocols.indexOf(Ut)===-1){ot(new AxiosError("Unsupported protocol "+Ut+":",AxiosError.ERR_BAD_REQUEST,it));return}Kt.send(ut||null)})},composeSignals=(it,g)=>{const{length:et}=it=it?it.filter(Boolean):[];if(g||et){let ot=new AbortController,ct;const ut=function(kt){if(!ct){ct=!0,ft();const Tt=kt instanceof Error?kt:this.reason;ot.abort(Tt instanceof AxiosError?Tt:new CanceledError(Tt instanceof Error?Tt.message:Tt))}};let dt=g&&setTimeout(()=>{dt=null,ut(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const ft=()=>{it&&(dt&&clearTimeout(dt),dt=null,it.forEach(kt=>{kt.unsubscribe?kt.unsubscribe(ut):kt.removeEventListener("abort",ut)}),it=null)};it.forEach(kt=>kt.addEventListener("abort",ut));const{signal:St}=ot;return St.unsubscribe=()=>utils$1.asap(ft),St}},composeSignals$1=composeSignals,streamChunk=function*(it,g){let et=it.byteLength;if(!g||et<g){yield it;return}let ot=0,ct;for(;ot<et;)ct=ot+g,yield it.slice(ot,ct),ot=ct},readBytes=async function*(it,g){for await(const et of readStream(it))yield*streamChunk(et,g)},readStream=async function*(it){if(it[Symbol.asyncIterator]){yield*it;return}const g=it.getReader();try{for(;;){const{done:et,value:ot}=await g.read();if(et)break;yield ot}}finally{await g.cancel()}},trackStream=(it,g,et,ot)=>{const ct=readBytes(it,g);let ut=0,dt,ft=St=>{dt||(dt=!0,ot&&ot(St))};return new ReadableStream({async pull(St){try{const{done:kt,value:Tt}=await ct.next();if(kt){ft(),St.close();return}let jt=Tt.byteLength;if(et){let Rt=ut+=jt;et(Rt)}St.enqueue(new Uint8Array(Tt))}catch(kt){throw ft(kt),kt}},cancel(St){return ft(St),ct.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(it=>g=>it.encode(g))(new TextEncoder):async it=>new Uint8Array(await new Response(it).arrayBuffer())),test=(it,...g)=>{try{return!!it(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let it=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return it=!0,"half"}}).headers.has("Content-Type");return it&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(it=>it.body)};isFetchSupported&&(it=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$1.isFunction(it[g])?et=>et[g]():(et,ot)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,ot)})})})(new Response);const getBodyLength=async it=>{if(it==null)return 0;if(utils$1.isBlob(it))return it.size;if(utils$1.isSpecCompliantForm(it))return(await new Request(platform.origin,{method:"POST",body:it}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(it)||utils$1.isArrayBuffer(it))return it.byteLength;if(utils$1.isURLSearchParams(it)&&(it=it+""),utils$1.isString(it))return(await encodeText(it)).byteLength},resolveBodyLength=async(it,g)=>{const et=utils$1.toFiniteNumber(it.getContentLength());return et??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async it=>{let{url:g,method:et,data:ot,signal:ct,cancelToken:ut,timeout:dt,onDownloadProgress:ft,onUploadProgress:St,responseType:kt,headers:Tt,withCredentials:jt="same-origin",fetchOptions:Rt}=resolveConfig(it);kt=kt?(kt+"").toLowerCase():"text";let Ft=composeSignals$1([ct,ut&&ut.toAbortSignal()],dt),$t;const zt=Ft&&Ft.unsubscribe&&(()=>{Ft.unsubscribe()});let Kt;try{if(St&&supportsRequestStream&&et!=="get"&&et!=="head"&&(Kt=await resolveBodyLength(Tt,ot))!==0){let tn=new Request(g,{method:"POST",body:ot,duplex:"half"}),nn;if(utils$1.isFormData(ot)&&(nn=tn.headers.get("content-type"))&&Tt.setContentType(nn),tn.body){const[rn,on]=progressEventDecorator(Kt,progressEventReducer(asyncDecorator(St)));ot=trackStream(tn.body,DEFAULT_CHUNK_SIZE,rn,on)}}utils$1.isString(jt)||(jt=jt?"include":"omit");const Bt="credentials"in Request.prototype;$t=new Request(g,{...Rt,signal:Ft,method:et.toUpperCase(),headers:Tt.normalize().toJSON(),body:ot,duplex:"half",credentials:Bt?jt:void 0});let Ut=await fetch($t);const Jt=supportsResponseStream&&(kt==="stream"||kt==="response");if(supportsResponseStream&&(ft||Jt&&zt)){const tn={};["status","statusText","headers"].forEach(dn=>{tn[dn]=Ut[dn]});const nn=utils$1.toFiniteNumber(Ut.headers.get("content-length")),[rn,on]=ft&&progressEventDecorator(nn,progressEventReducer(asyncDecorator(ft),!0))||[];Ut=new Response(trackStream(Ut.body,DEFAULT_CHUNK_SIZE,rn,()=>{on&&on(),zt&&zt()}),tn)}kt=kt||"text";let en=await resolvers[utils$1.findKey(resolvers,kt)||"text"](Ut,it);return!Jt&&zt&&zt(),await new Promise((tn,nn)=>{settle(tn,nn,{data:en,headers:AxiosHeaders$1.from(Ut.headers),status:Ut.status,statusText:Ut.statusText,config:it,request:$t})})}catch(Bt){throw zt&&zt(),Bt&&Bt.name==="TypeError"&&/fetch/i.test(Bt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,$t),{cause:Bt.cause||Bt}):AxiosError.from(Bt,Bt&&Bt.code,it,$t)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(it,g)=>{if(it){try{Object.defineProperty(it,"name",{value:g})}catch{}Object.defineProperty(it,"adapterName",{value:g})}});const renderReason=it=>`- ${it}`,isResolvedHandle=it=>utils$1.isFunction(it)||it===null||it===!1,adapters={getAdapter:it=>{it=utils$1.isArray(it)?it:[it];const{length:g}=it;let et,ot;const ct={};for(let ut=0;ut<g;ut++){et=it[ut];let dt;if(ot=et,!isResolvedHandle(et)&&(ot=knownAdapters[(dt=String(et)).toLowerCase()],ot===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(ot)break;ct[dt||"#"+ut]=ot}if(!ot){const ut=Object.entries(ct).map(([ft,St])=>`adapter ${ft} `+(St===!1?"is not supported by the environment":"is not available in the build"));let dt=g?ut.length>1?`since :
`+ut.map(renderReason).join(`
`):" "+renderReason(ut[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return ot},adapters:knownAdapters};function throwIfCancellationRequested(it){if(it.cancelToken&&it.cancelToken.throwIfRequested(),it.signal&&it.signal.aborted)throw new CanceledError(null,it)}function dispatchRequest(it){return throwIfCancellationRequested(it),it.headers=AxiosHeaders$1.from(it.headers),it.data=transformData.call(it,it.transformRequest),["post","put","patch"].indexOf(it.method)!==-1&&it.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(it.adapter||defaults$2.adapter)(it).then(function(ot){return throwIfCancellationRequested(it),ot.data=transformData.call(it,it.transformResponse,ot),ot.headers=AxiosHeaders$1.from(ot.headers),ot},function(ot){return isCancel(ot)||(throwIfCancellationRequested(it),ot&&ot.response&&(ot.response.data=transformData.call(it,it.transformResponse,ot.response),ot.response.headers=AxiosHeaders$1.from(ot.response.headers))),Promise.reject(ot)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((it,g)=>{validators$1[it]=function(ot){return typeof ot===it||"a"+(g<1?"n ":" ")+it}});const deprecatedWarnings={};validators$1.transitional=function(g,et,ot){function ct(ut,dt){return"[Axios v"+VERSION+"] Transitional option '"+ut+"'"+dt+(ot?". "+ot:"")}return(ut,dt,ft)=>{if(g===!1)throw new AxiosError(ct(dt," has been removed"+(et?" in "+et:"")),AxiosError.ERR_DEPRECATED);return et&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(ct(dt," has been deprecated since v"+et+" and will be removed in the near future"))),g?g(ut,dt,ft):!0}};validators$1.spelling=function(g){return(et,ot)=>(console.warn(`${ot} is likely a misspelling of ${g}`),!0)};function assertOptions(it,g,et){if(typeof it!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ot=Object.keys(it);let ct=ot.length;for(;ct-- >0;){const ut=ot[ct],dt=g[ut];if(dt){const ft=it[ut],St=ft===void 0||dt(ft,ut,it);if(St!==!0)throw new AxiosError("option "+ut+" must be "+St,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(et!==!0)throw new AxiosError("Unknown option "+ut,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(g,et){try{return await this._request(g,et)}catch(ot){if(ot instanceof Error){let ct={};Error.captureStackTrace?Error.captureStackTrace(ct):ct=new Error;const ut=ct.stack?ct.stack.replace(/^.+\n/,""):"";try{ot.stack?ut&&!String(ot.stack).endsWith(ut.replace(/^.+\n.+\n/,""))&&(ot.stack+=`
`+ut):ot.stack=ut}catch{}}throw ot}}_request(g,et){typeof g=="string"?(et=et||{},et.url=g):et=g||{},et=mergeConfig(this.defaults,et);const{transitional:ot,paramsSerializer:ct,headers:ut}=et;ot!==void 0&&validator.assertOptions(ot,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ct!=null&&(utils$1.isFunction(ct)?et.paramsSerializer={serialize:ct}:validator.assertOptions(ct,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(et,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),et.method=(et.method||this.defaults.method||"get").toLowerCase();let dt=ut&&utils$1.merge(ut.common,ut[et.method]);ut&&utils$1.forEach(["delete","get","head","post","put","patch","common"],$t=>{delete ut[$t]}),et.headers=AxiosHeaders$1.concat(dt,ut);const ft=[];let St=!0;this.interceptors.request.forEach(function(zt){typeof zt.runWhen=="function"&&zt.runWhen(et)===!1||(St=St&&zt.synchronous,ft.unshift(zt.fulfilled,zt.rejected))});const kt=[];this.interceptors.response.forEach(function(zt){kt.push(zt.fulfilled,zt.rejected)});let Tt,jt=0,Rt;if(!St){const $t=[dispatchRequest.bind(this),void 0];for($t.unshift.apply($t,ft),$t.push.apply($t,kt),Rt=$t.length,Tt=Promise.resolve(et);jt<Rt;)Tt=Tt.then($t[jt++],$t[jt++]);return Tt}Rt=ft.length;let Ft=et;for(jt=0;jt<Rt;){const $t=ft[jt++],zt=ft[jt++];try{Ft=$t(Ft)}catch(Kt){zt.call(this,Kt);break}}try{Tt=dispatchRequest.call(this,Ft)}catch($t){return Promise.reject($t)}for(jt=0,Rt=kt.length;jt<Rt;)Tt=Tt.then(kt[jt++],kt[jt++]);return Tt}getUri(g){g=mergeConfig(this.defaults,g);const et=buildFullPath(g.baseURL,g.url);return buildURL(et,g.params,g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(et,ot){return this.request(mergeConfig(ot||{},{method:g,url:et,data:(ot||{}).data}))}});utils$1.forEach(["post","put","patch"],function(g){function et(ot){return function(ut,dt,ft){return this.request(mergeConfig(ft||{},{method:g,headers:ot?{"Content-Type":"multipart/form-data"}:{},url:ut,data:dt}))}}Axios.prototype[g]=et(),Axios.prototype[g+"Form"]=et(!0)});const Axios$1=Axios;class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let et;this.promise=new Promise(function(ut){et=ut});const ot=this;this.promise.then(ct=>{if(!ot._listeners)return;let ut=ot._listeners.length;for(;ut-- >0;)ot._listeners[ut](ct);ot._listeners=null}),this.promise.then=ct=>{let ut;const dt=new Promise(ft=>{ot.subscribe(ft),ut=ft}).then(ct);return dt.cancel=function(){ot.unsubscribe(ut)},dt},g(function(ut,dt,ft){ot.reason||(ot.reason=new CanceledError(ut,dt,ft),et(ot.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const et=this._listeners.indexOf(g);et!==-1&&this._listeners.splice(et,1)}toAbortSignal(){const g=new AbortController,et=ot=>{g.abort(ot)};return this.subscribe(et),g.signal.unsubscribe=()=>this.unsubscribe(et),g.signal}static source(){let g;return{token:new CancelToken(function(ct){g=ct}),cancel:g}}}const CancelToken$1=CancelToken;function spread(it){return function(et){return it.apply(null,et)}}function isAxiosError(it){return utils$1.isObject(it)&&it.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([it,g])=>{HttpStatusCode[g]=it});const HttpStatusCode$1=HttpStatusCode;function createInstance$1(it){const g=new Axios$1(it),et=bind$1(Axios$1.prototype.request,g);return utils$1.extend(et,Axios$1.prototype,g,{allOwnKeys:!0}),utils$1.extend(et,g,null,{allOwnKeys:!0}),et.create=function(ct){return createInstance$1(mergeConfig(it,ct))},et}const axios=createInstance$1(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=it=>formDataToJSON(utils$1.isHTMLForm(it)?new FormData(it):it);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(it){var g,et,ot="";if(typeof it=="string"||typeof it=="number")ot+=it;else if(typeof it=="object")if(Array.isArray(it)){var ct=it.length;for(g=0;g<ct;g++)it[g]&&(et=r$3(it[g]))&&(ot&&(ot+=" "),ot+=et)}else for(et in it)it[et]&&(ot&&(ot+=" "),ot+=et);return ot}function clsx(){for(var it,g,et=0,ot="",ct=arguments.length;et<ct;et++)(it=arguments[et])&&(g=r$3(it))&&(ot&&(ot+=" "),ot+=g);return ot}function Mt(it){if(!it||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",g.firstChild?g.insertBefore(et,g.firstChild):g.appendChild(et),et.styleSheet?et.styleSheet.cssText=it:et.appendChild(document.createTextNode(it))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$2=it=>typeof it=="number"&&!isNaN(it),N$1=it=>typeof it=="string",P$2=it=>typeof it=="function",mt=it=>N$1(it)||L$2(it),B=it=>N$1(it)||P$2(it)?it:null,pt=(it,g)=>it===!1||L$2(it)&&it>0?it:g,z=it=>reactExports.isValidElement(it)||N$1(it)||P$2(it)||L$2(it);function Z$1(it,g,et=300){let{scrollHeight:ot,style:ct}=it;requestAnimationFrame(()=>{ct.minHeight="initial",ct.height=ot+"px",ct.transition=`all ${et}ms`,requestAnimationFrame(()=>{ct.height="0",ct.padding="0",ct.margin="0",setTimeout(g,et)})})}function $$2({enter:it,exit:g,appendPosition:et=!1,collapse:ot=!0,collapseDuration:ct=300}){return function({children:ut,position:dt,preventExitTransition:ft,done:St,nodeRef:kt,isIn:Tt,playToast:jt}){let Rt=et?`${it}--${dt}`:it,Ft=et?`${g}--${dt}`:g,$t=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let zt=kt.current,Kt=Rt.split(" "),Bt=Ut=>{Ut.target===kt.current&&(jt(),zt.removeEventListener("animationend",Bt),zt.removeEventListener("animationcancel",Bt),$t.current===0&&Ut.type!=="animationcancel"&&zt.classList.remove(...Kt))};zt.classList.add(...Kt),zt.addEventListener("animationend",Bt),zt.addEventListener("animationcancel",Bt)},[]),reactExports.useEffect(()=>{let zt=kt.current,Kt=()=>{zt.removeEventListener("animationend",Kt),ot?Z$1(zt,St,ct):St()};Tt||(ft?Kt():($t.current=1,zt.className+=` ${Ft}`,zt.addEventListener("animationend",Kt)))},[Tt]),React$2.createElement(React$2.Fragment,null,ut)}}function J$1(it,g){return{content:tt$1(it.content,it.props),containerId:it.props.containerId,id:it.props.toastId,theme:it.props.theme,type:it.props.type,data:it.props.data||{},isLoading:it.props.isLoading,icon:it.props.icon,reason:it.removalReason,status:g}}function tt$1(it,g,et=!1){return reactExports.isValidElement(it)&&!N$1(it.type)?reactExports.cloneElement(it,{closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):P$2(it)?it({closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):it}function yt$1({closeToast:it,theme:g,ariaLabel:et="close"}){return React$2.createElement("button",{className:`Toastify__close-button Toastify__close-button--${g}`,type:"button",onClick:ot=>{ot.stopPropagation(),it(!0)},"aria-label":et},React$2.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$2.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:it,isRunning:g,closeToast:et,type:ot="default",hide:ct,className:ut,controlledProgress:dt,progress:ft,rtl:St,isIn:kt,theme:Tt}){let jt=ct||dt&&ft===0,Rt={animationDuration:`${it}ms`,animationPlayState:g?"running":"paused"};dt&&(Rt.transform=`scaleX(${ft})`);let Ft=clsx("Toastify__progress-bar",dt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Tt}`,`Toastify__progress-bar--${ot}`,{"Toastify__progress-bar--rtl":St}),$t=P$2(ut)?ut({rtl:St,type:ot,defaultClassName:Ft}):clsx(Ft,ut),zt={[dt&&ft>=1?"onTransitionEnd":"onAnimationEnd"]:dt&&ft<1?null:()=>{kt&&et()}};return React$2.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":jt},React$2.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Tt} Toastify__progress-bar--${ot}`}),React$2.createElement("div",{role:"progressbar","aria-hidden":jt?"true":"false","aria-label":"notification timer",className:$t,style:Rt,...zt}))}var Xt=1,at=()=>`${Xt++}`;function _t(it,g,et){let ot=1,ct=0,ut=[],dt=[],ft=g,St=new Map,kt=new Set,Tt=Ut=>(kt.add(Ut),()=>kt.delete(Ut)),jt=()=>{dt=Array.from(St.values()),kt.forEach(Ut=>Ut())},Rt=({containerId:Ut,toastId:Jt,updateId:en})=>{let tn=Ut?Ut!==it:it!==1,nn=St.has(Jt)&&en==null;return tn||nn},Ft=(Ut,Jt)=>{St.forEach(en=>{var tn;(Jt==null||Jt===en.props.toastId)&&((tn=en.toggle)==null||tn.call(en,Ut))})},$t=Ut=>{var Jt,en;(en=(Jt=Ut.props)==null?void 0:Jt.onClose)==null||en.call(Jt,Ut.removalReason),Ut.isActive=!1},zt=Ut=>{if(Ut==null)St.forEach($t);else{let Jt=St.get(Ut);Jt&&$t(Jt)}jt()},Kt=()=>{ct-=ut.length,ut=[]},Bt=Ut=>{var Jt,en;let{toastId:tn,updateId:nn}=Ut.props,rn=nn==null;Ut.staleId&&St.delete(Ut.staleId),Ut.isActive=!0,St.set(tn,Ut),jt(),et(J$1(Ut,rn?"added":"updated")),rn&&((en=(Jt=Ut.props).onOpen)==null||en.call(Jt))};return{id:it,props:ft,observe:Tt,toggle:Ft,removeToast:zt,toasts:St,clearQueue:Kt,buildToast:(Ut,Jt)=>{if(Rt(Jt))return;let{toastId:en,updateId:tn,data:nn,staleId:rn,delay:on}=Jt,dn=tn==null;dn&&ct++;let cn={...ft,style:ft.toastStyle,key:ot++,...Object.fromEntries(Object.entries(Jt).filter(([mn,En])=>En!=null)),toastId:en,updateId:tn,data:nn,isIn:!1,className:B(Jt.className||ft.toastClassName),progressClassName:B(Jt.progressClassName||ft.progressClassName),autoClose:Jt.isLoading?!1:pt(Jt.autoClose,ft.autoClose),closeToast(mn){St.get(en).removalReason=mn,zt(en)},deleteToast(){let mn=St.get(en);if(mn!=null){if(et(J$1(mn,"removed")),St.delete(en),ct--,ct<0&&(ct=0),ut.length>0){Bt(ut.shift());return}jt()}}};cn.closeButton=ft.closeButton,Jt.closeButton===!1||z(Jt.closeButton)?cn.closeButton=Jt.closeButton:Jt.closeButton===!0&&(cn.closeButton=z(ft.closeButton)?ft.closeButton:!0);let fn={content:Ut,props:cn,staleId:rn};ft.limit&&ft.limit>0&&ct>ft.limit&&dn?ut.push(fn):L$2(on)?setTimeout(()=>{Bt(fn)},on):Bt(fn)},setProps(Ut){ft=Ut},setToggle:(Ut,Jt)=>{let en=St.get(Ut);en&&(en.toggle=Jt)},isToastActive:Ut=>{var Jt;return(Jt=St.get(Ut))==null?void 0:Jt.isActive},getSnapshot:()=>dt}}var I$3=new Map,F$2=[],st=new Set,Vt=it=>st.forEach(g=>g(it)),bt=()=>I$3.size>0;function Qt(){F$2.forEach(it=>nt(it.content,it.options)),F$2=[]}var vt=(it,{containerId:g})=>{var et;return(et=I$3.get(g||1))==null?void 0:et.toasts.get(it)};function X$3(it,g){var et;if(g)return!!((et=I$3.get(g))!=null&&et.isToastActive(it));let ot=!1;return I$3.forEach(ct=>{ct.isToastActive(it)&&(ot=!0)}),ot}function ht(it){if(!bt()){F$2=F$2.filter(g=>it!=null&&g.options.toastId!==it);return}if(it==null||mt(it))I$3.forEach(g=>{g.removeToast(it)});else if(it&&("containerId"in it||"id"in it)){let g=I$3.get(it.containerId);g?g.removeToast(it.id):I$3.forEach(et=>{et.removeToast(it.id)})}}var Ct=(it={})=>{I$3.forEach(g=>{g.props.limit&&(!it.containerId||g.id===it.containerId)&&g.clearQueue()})};function nt(it,g){z(it)&&(bt()||F$2.push({content:it,options:g}),I$3.forEach(et=>{et.buildToast(it,g)}))}function xt(it){var g;(g=I$3.get(it.containerId||1))==null||g.setToggle(it.id,it.fn)}function rt(it,g){I$3.forEach(et=>{(g==null||!(g!=null&&g.containerId)||(g==null?void 0:g.containerId)===et.id)&&et.toggle(it,g==null?void 0:g.id)})}function Et(it){let g=it.containerId||1;return{subscribe(et){let ot=_t(g,it,Vt);I$3.set(g,ot);let ct=ot.observe(et);return Qt(),()=>{ct(),I$3.delete(g)}},setProps(et){var ot;(ot=I$3.get(g))==null||ot.setProps(et)},getSnapshot(){var et;return(et=I$3.get(g))==null?void 0:et.getSnapshot()}}}function Pt(it){return st.add(it),()=>{st.delete(it)}}function Wt(it){return it&&(N$1(it.toastId)||L$2(it.toastId))?it.toastId:at()}function U$3(it,g){return nt(it,g),g.toastId}function V$1(it,g){return{...g,type:g&&g.type||it,toastId:Wt(g)}}function Q(it){return(g,et)=>U$3(g,V$1(it,et))}function y$4(it,g){return U$3(it,V$1("default",g))}y$4.loading=(it,g)=>U$3(it,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...g}));function Gt(it,{pending:g,error:et,success:ot},ct){let ut;g&&(ut=N$1(g)?y$4.loading(g,ct):y$4.loading(g.render,{...ct,...g}));let dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(kt,Tt,jt)=>{if(Tt==null){y$4.dismiss(ut);return}let Rt={type:kt,...dt,...ct,data:jt},Ft=N$1(Tt)?{render:Tt}:Tt;return ut?y$4.update(ut,{...Rt,...Ft}):y$4(Ft.render,{...Rt,...Ft}),jt},St=P$2(it)?it():it;return St.then(kt=>ft("success",ot,kt)).catch(kt=>ft("error",et,kt)),St}y$4.promise=Gt;y$4.success=Q("success");y$4.info=Q("info");y$4.error=Q("error");y$4.warning=Q("warning");y$4.warn=y$4.warning;y$4.dark=(it,g)=>U$3(it,V$1("default",{theme:"dark",...g}));function qt(it){ht(it)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$3;y$4.update=(it,g={})=>{let et=vt(it,g);if(et){let{props:ot,content:ct}=et,ut={delay:100,...ot,...g,toastId:g.toastId||it,updateId:at()};ut.toastId!==it&&(ut.staleId=it);let dt=ut.render||ct;delete ut.render,U$3(dt,ut)}};y$4.done=it=>{y$4.update(it,{progress:1})};y$4.onChange=Pt;y$4.play=it=>rt(!0,it);y$4.pause=it=>rt(!1,it);function It(it){var g;let{subscribe:et,getSnapshot:ot,setProps:ct}=reactExports.useRef(Et(it)).current;ct(it);let ut=(g=reactExports.useSyncExternalStore(et,ot,ot))==null?void 0:g.slice();function dt(ft){if(!ut)return[];let St=new Map;return it.newestOnTop&&ut.reverse(),ut.forEach(kt=>{let{position:Tt}=kt.props;St.has(Tt)||St.set(Tt,[]),St.get(Tt).push(kt)}),Array.from(St,kt=>ft(kt[0],kt[1]))}return{getToastToRender:dt,isToastActive:X$3,count:ut==null?void 0:ut.length}}function At(it){let[g,et]=reactExports.useState(!1),[ot,ct]=reactExports.useState(!1),ut=reactExports.useRef(null),dt=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:ft,pauseOnHover:St,closeToast:kt,onClick:Tt,closeOnClick:jt}=it;xt({id:it.toastId,containerId:it.containerId,fn:et}),reactExports.useEffect(()=>{if(it.pauseOnFocusLoss)return Rt(),()=>{Ft()}},[it.pauseOnFocusLoss]);function Rt(){document.hasFocus()||Bt(),window.addEventListener("focus",Kt),window.addEventListener("blur",Bt)}function Ft(){window.removeEventListener("focus",Kt),window.removeEventListener("blur",Bt)}function $t(rn){if(it.draggable===!0||it.draggable===rn.pointerType){Ut();let on=ut.current;dt.canCloseOnClick=!0,dt.canDrag=!0,on.style.transition="none",it.draggableDirection==="x"?(dt.start=rn.clientX,dt.removalDistance=on.offsetWidth*(it.draggablePercent/100)):(dt.start=rn.clientY,dt.removalDistance=on.offsetHeight*(it.draggablePercent===80?it.draggablePercent*1.5:it.draggablePercent)/100)}}function zt(rn){let{top:on,bottom:dn,left:cn,right:fn}=ut.current.getBoundingClientRect();rn.nativeEvent.type!=="touchend"&&it.pauseOnHover&&rn.clientX>=cn&&rn.clientX<=fn&&rn.clientY>=on&&rn.clientY<=dn?Bt():Kt()}function Kt(){et(!0)}function Bt(){et(!1)}function Ut(){dt.didMove=!1,document.addEventListener("pointermove",en),document.addEventListener("pointerup",tn)}function Jt(){document.removeEventListener("pointermove",en),document.removeEventListener("pointerup",tn)}function en(rn){let on=ut.current;if(dt.canDrag&&on){dt.didMove=!0,g&&Bt(),it.draggableDirection==="x"?dt.delta=rn.clientX-dt.start:dt.delta=rn.clientY-dt.start,dt.start!==rn.clientX&&(dt.canCloseOnClick=!1);let dn=it.draggableDirection==="x"?`${dt.delta}px, var(--y)`:`0, calc(${dt.delta}px + var(--y))`;on.style.transform=`translate3d(${dn},0)`,on.style.opacity=`${1-Math.abs(dt.delta/dt.removalDistance)}`}}function tn(){Jt();let rn=ut.current;if(dt.canDrag&&dt.didMove&&rn){if(dt.canDrag=!1,Math.abs(dt.delta)>dt.removalDistance){ct(!0),it.closeToast(!0),it.collapseAll();return}rn.style.transition="transform 0.2s, opacity 0.2s",rn.style.removeProperty("transform"),rn.style.removeProperty("opacity")}}let nn={onPointerDown:$t,onPointerUp:zt};return ft&&St&&(nn.onMouseEnter=Bt,it.stacked||(nn.onMouseLeave=Kt)),jt&&(nn.onClick=rn=>{Tt&&Tt(rn),dt.canCloseOnClick&&kt(!0)}),{playToast:Kt,pauseToast:Bt,isRunning:g,preventExitTransition:ot,toastRef:ut,eventHandlers:nn}}var Ot=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:it,type:g,isLoading:et,...ot})=>React$2.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:it==="colored"?"currentColor":`var(--toastify-icon-color-${g})`,...ot});function ao(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$2.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=it=>it in W$1;function Nt({theme:it,type:g,isLoading:et,icon:ot}){let ct=null,ut={theme:it,type:g};return ot===!1||(P$2(ot)?ct=ot({...ut,isLoading:et}):reactExports.isValidElement(ot)?ct=reactExports.cloneElement(ot,ut):et?ct=W$1.spinner():lo(g)&&(ct=W$1[g](ut))),ct}var wt=it=>{let{isRunning:g,preventExitTransition:et,toastRef:ot,eventHandlers:ct,playToast:ut}=At(it),{closeButton:dt,children:ft,autoClose:St,onClick:kt,type:Tt,hideProgressBar:jt,closeToast:Rt,transition:Ft,position:$t,className:zt,style:Kt,progressClassName:Bt,updateId:Ut,role:Jt,progress:en,rtl:tn,toastId:nn,deleteToast:rn,isIn:on,isLoading:dn,closeOnClick:cn,theme:fn,ariaLabel:mn}=it,En=clsx("Toastify__toast",`Toastify__toast-theme--${fn}`,`Toastify__toast--${Tt}`,{"Toastify__toast--rtl":tn},{"Toastify__toast--close-on-click":cn}),Sn=P$2(zt)?zt({rtl:tn,position:$t,type:Tt,defaultClassName:En}):clsx(En,zt),wn=Nt(it),hn=!!en||!St,yn={closeToast:Rt,type:Tt,theme:fn},an=null;return dt===!1||(P$2(dt)?an=dt(yn):reactExports.isValidElement(dt)?an=reactExports.cloneElement(dt,yn):an=yt$1(yn)),React$2.createElement(Ft,{isIn:on,done:rn,position:$t,preventExitTransition:et,nodeRef:ot,playToast:ut},React$2.createElement("div",{id:nn,tabIndex:0,onClick:kt,"data-in":on,className:Sn,...ct,style:Kt,ref:ot,...on&&{role:Jt,"aria-label":mn}},wn!=null&&React$2.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!dn})},wn),tt$1(ft,it,!g),an,!it.customProgressBar&&React$2.createElement(gt,{...Ut&&!hn?{key:`p-${Ut}`}:{},rtl:tn,theme:fn,delay:St,isRunning:g,isIn:on,closeToast:Rt,hide:jt,type:Tt,className:Bt,controlledProgress:hn,progress:en||0})))},K$1=(it,g=!1)=>({enter:`Toastify--animate Toastify__${it}-enter`,exit:`Toastify--animate Toastify__${it}-exit`,appendPosition:g}),lt=$$2(K$1("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:it=>it.altKey&&it.code==="KeyT"};function Lt(it){let g={..._o,...it},et=it.stacked,[ot,ct]=reactExports.useState(!0),ut=reactExports.useRef(null),{getToastToRender:dt,isToastActive:ft,count:St}=It(g),{className:kt,style:Tt,rtl:jt,containerId:Rt,hotKeys:Ft}=g;function $t(Kt){let Bt=clsx("Toastify__toast-container",`Toastify__toast-container--${Kt}`,{"Toastify__toast-container--rtl":jt});return P$2(kt)?kt({position:Kt,rtl:jt,defaultClassName:Bt}):clsx(Bt,B(kt))}function zt(){et&&(ct(!0),y$4.play())}return Ot(()=>{var Kt;if(et){let Bt=ut.current.querySelectorAll('[data-in="true"]'),Ut=12,Jt=(Kt=g.position)==null?void 0:Kt.includes("top"),en=0,tn=0;Array.from(Bt).reverse().forEach((nn,rn)=>{let on=nn;on.classList.add("Toastify__toast--stacked"),rn>0&&(on.dataset.collapsed=`${ot}`),on.dataset.pos||(on.dataset.pos=Jt?"top":"bot");let dn=en*(ot?.2:1)+(ot?0:Ut*rn);on.style.setProperty("--y",`${Jt?dn:dn*-1}px`),on.style.setProperty("--g",`${Ut}`),on.style.setProperty("--s",`${1-(ot?tn:0)}`),en+=on.offsetHeight,tn+=.025})}},[ot,St,et]),reactExports.useEffect(()=>{function Kt(Bt){var Ut;let Jt=ut.current;Ft(Bt)&&((Ut=Jt.querySelector('[tabIndex="0"]'))==null||Ut.focus(),ct(!1),y$4.pause()),Bt.key==="Escape"&&(document.activeElement===Jt||Jt!=null&&Jt.contains(document.activeElement))&&(ct(!0),y$4.play())}return document.addEventListener("keydown",Kt),()=>{document.removeEventListener("keydown",Kt)}},[Ft]),React$2.createElement("section",{ref:ut,className:"Toastify",id:Rt,onMouseEnter:()=>{et&&(ct(!1),y$4.pause())},onMouseLeave:zt,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":g["aria-label"]},dt((Kt,Bt)=>{let Ut=Bt.length?{...Tt}:{...Tt,pointerEvents:"none"};return React$2.createElement("div",{tabIndex:-1,className:$t(Kt),"data-stacked":et,style:Ut,key:`c-${Kt}`},Bt.map(({content:Jt,props:en})=>React$2.createElement(wt,{...en,stacked:et,collapseAll:zt,isIn:ft(en.toastId,en.containerId),key:`t-${en.key}`},Jt)))}))}const BASE_URL="https://cre8tlystudio.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});console.log("Base URL:",axiosInstance.defaults.baseURL);let isRefreshing=!1,refreshSubscribers=[];function onRefreshed(it){refreshSubscribers.forEach(g=>g(it)),refreshSubscribers=[]}axiosInstance.interceptors.request.use(it=>{const g=localStorage.getItem("accessToken");return g&&(it.headers.Authorization=`Bearer ${g}`),it});async function refreshToken(){if(isRefreshing)return new Promise(it=>{refreshSubscribers.push(it)});isRefreshing=!0;try{const it=localStorage.getItem("refreshToken");if(!it)throw new Error("No refresh token found");const g=await axios$1.post(`${BASE_URL}/auth/refresh`,{token:it}),{accessToken:et,refreshToken:ot}=g.data;return localStorage.setItem("accessToken",et),ot&&localStorage.setItem("refreshToken",ot),axiosInstance.defaults.headers.Authorization=`Bearer ${et}`,onRefreshed(et),et}catch(it){throw console.error("Token refresh failed:",it),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),it}finally{isRefreshing=!1}}axiosInstance.interceptors.response.use(it=>it,async it=>{var et;const g=it.config;if(((et=it.response)==null?void 0:et.status)===401&&!g._retry){g._retry=!0;try{const ot=await refreshToken();return ot?(g.headers.Authorization=`Bearer ${ot}`,axiosInstance(g)):new Promise(ct=>{refreshSubscribers.push(ut=>{g.headers.Authorization=`Bearer ${ut}`,ct(axiosInstance(g))})})}catch(ot){return console.error("Refresh retry failed:",ot),Promise.reject(ot)}}return Promise.reject(it)});axiosInstance.interceptors.response.use(it=>it,it=>{var g;return((g=it.response)==null?void 0:g.status)===403&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(it)});const AuthContext=reactExports.createContext();function AuthProvider({children:it,navigate:g}){const[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0);function St(Ft,$t,zt){ot(Ft),ut($t),localStorage.setItem("user",JSON.stringify(Ft)),localStorage.setItem("accessToken",$t),zt&&localStorage.setItem("refreshToken",zt)}async function kt(Ft,$t){try{const Kt=(await axiosInstance.post("/auth/login",{email:Ft,password:$t})).data;St(Kt.user,Kt.accessToken,Kt.refreshToken);try{const Bt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Kt.accessToken}`}});ot(Bt.data),localStorage.setItem("user",JSON.stringify(Bt.data))}catch(Bt){console.error("Failed to fetch fresh user data after login:",Bt)}}catch(zt){throw zt}}async function Tt(){var $t,zt;const Ft=localStorage.getItem("refreshToken");if(!Ft)return null;try{const Bt=(await axiosInstance.post("/auth/refresh",{token:Ft})).data;return ut(Bt.accessToken),localStorage.setItem("accessToken",Bt.accessToken),Bt.refreshToken&&localStorage.setItem("refreshToken",Bt.refreshToken),Bt.accessToken}catch(Kt){return console.error("Refresh failed:",Kt),((($t=Kt.response)==null?void 0:$t.status)===401||((zt=Kt.response)==null?void 0:zt.status)===403)&&jt(),null}}function jt(){try{axiosInstance.post("/auth/logout")}catch{}ot(null),ut(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),g("/")}reactExports.useEffect(()=>{const Ft=setTimeout(()=>Tt(),1500);return()=>clearTimeout(Ft)},[]),reactExports.useEffect(()=>{async function Ft(){try{const $t=localStorage.getItem("user"),zt=localStorage.getItem("accessToken"),Kt=localStorage.getItem("refreshToken");if($t&&ot(JSON.parse($t)),zt&&ut(zt),!zt&&Kt){const Bt=await Tt();if(Bt){const Ut=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Bt}`}});ot(Ut.data),localStorage.setItem("user",JSON.stringify(Ut.data))}}}catch($t){console.error("Failed to restore user:",$t)}finally{ft(!1)}}Ft()},[]);async function Rt(){try{const Ft=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${ct}`}});return ot(Ft.data),localStorage.setItem("user",JSON.stringify(Ft.data)),Ft.data}catch(Ft){return console.error("Failed to refresh user data:",Ft),y$4.error("Failed to refresh user data"),null}}return reactExports.useEffect(()=>{const Ft=setInterval(()=>{Tt()},72e4);return()=>clearInterval(Ft)},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:et,setUser:ot,accessToken:ct,authLoading:dt,login:kt,logout:jt,refreshAccessToken:Tt,refreshUser:Rt},children:it})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:it}){const g=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:g,children:it})}const MagnetContext=reactExports.createContext();function MagnetProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState({magnets:[],summary:{}}),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const Tt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,jt=Array.isArray(Tt)?{magnets:Tt,summary:{}}:Tt;ot(jt)}catch(kt){console.error("Error fetching lead magnets:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const jt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Rt=Array.isArray(jt)?{magnets:jt,summary:{}}:jt;ot(Ft=>JSON.stringify(Ft)===JSON.stringify(Rt)?Ft:Rt)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(MagnetContext.Provider,{value:{magnets:et,setMagnets:ot,fetchMagnets:St,loading:ct,error:dt},children:it})}function useMagnets(){return reactExports.useContext(MagnetContext)}function LoadingOverlay(){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-purple-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-white font-semibold",children:"Restoring your session..."})]})})}function PrivateRoute({children:it,role:g}){const{user:et,authLoading:ot}=useAuth();return ot?jsxRuntimeExports.jsx(LoadingOverlay,{}):et?g&&!(Array.isArray(g)?g:[g]).includes(et.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):it:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(it,g){module.exports=g()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(g){_useWebWorker=!!g},getWebWorker=function(){return _useWebWorker},setLocationHref=function(g){locationHref=g},getLocationHref=function(){return locationHref};function createTag(it){return document.createElement(it)}function extendPrototype(it,g){var et,ot=it.length,ct;for(et=0;et<ot;et+=1){ct=it[et].prototype;for(var ut in ct)Object.prototype.hasOwnProperty.call(ct,ut)&&(g.prototype[ut]=ct[ut])}}function getDescriptor(it,g){return Object.getOwnPropertyDescriptor(it,g)}function createProxyFunction(it){function g(){}return g.prototype=it,g}var audioControllerFactory=function(){function it(g){this.audios=[],this.audioFactory=g,this._volume=1,this._isMuted=!1}return it.prototype={addAudio:function(et){this.audios.push(et)},pause:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].pause()},resume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].resume()},setRate:function(et){var ot,ct=this.audios.length;for(ot=0;ot<ct;ot+=1)this.audios[ot].setRate(et)},createAudio:function(et){return this.audioFactory?this.audioFactory(et):window.Howl?new window.Howl({src:[et]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(et){this.audioFactory=et},setVolume:function(et){this._volume=et,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].volume(this._volume*(this._isMuted?0:1))}},function(){return new it}}(),createTypedArray=function(){function it(et,ot){var ct=0,ut=[],dt;switch(et){case"int16":case"uint8c":dt=1;break;default:dt=1.1;break}for(ct=0;ct<ot;ct+=1)ut.push(dt);return ut}function g(et,ot){return et==="float32"?new Float32Array(ot):et==="int16"?new Int16Array(ot):et==="uint8c"?new Uint8ClampedArray(ot):it(et,ot)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?g:it}();function createSizedArray(it){return Array.apply(null,{length:it})}function _typeof$6(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(et){return typeof et}:_typeof$6=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(it)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var it=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],g,et=it.length;for(g=0;g<et;g+=1)BMMath[it[g]]=Math[it[g]]})(),BMMath.random=Math.random,BMMath.abs=function(it){var g=_typeof$6(it);if(g==="object"&&it.length){var et=createSizedArray(it.length),ot,ct=it.length;for(ot=0;ot<ct;ot+=1)et[ot]=Math.abs(it[ot]);return et}return Math.abs(it)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(it){it.style.position="absolute",it.style.top=0,it.style.left=0,it.style.display="block",it.style.transformOrigin="0 0",it.style.webkitTransformOrigin="0 0",it.style.backfaceVisibility="visible",it.style.webkitBackfaceVisibility="visible",it.style.transformStyle="preserve-3d",it.style.webkitTransformStyle="preserve-3d",it.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(it,g,et,ot){this.type=it,this.currentTime=g,this.totalTime=et,this.direction=ot<0?-1:1}function BMCompleteEvent(it,g){this.type=it,this.direction=g<0?-1:1}function BMCompleteLoopEvent(it,g,et,ot){this.type=it,this.currentLoop=et,this.totalLoops=g,this.direction=ot<0?-1:1}function BMSegmentStartEvent(it,g,et){this.type=it,this.firstFrame=g,this.totalFrames=et}function BMDestroyEvent(it,g){this.type=it,this.target=g}function BMRenderFrameErrorEvent(it,g){this.type="renderFrameError",this.nativeError=it,this.currentTime=g}function BMConfigErrorEvent(it){this.type="configError",this.nativeError=it}var createElementID=function(){var it=0;return function(){return it+=1,idPrefix$1+"__lottie_element_"+it}}();function HSVtoRGB(it,g,et){var ot,ct,ut,dt,ft,St,kt,Tt;switch(dt=Math.floor(it*6),ft=it*6-dt,St=et*(1-g),kt=et*(1-ft*g),Tt=et*(1-(1-ft)*g),dt%6){case 0:ot=et,ct=Tt,ut=St;break;case 1:ot=kt,ct=et,ut=St;break;case 2:ot=St,ct=et,ut=Tt;break;case 3:ot=St,ct=kt,ut=et;break;case 4:ot=Tt,ct=St,ut=et;break;case 5:ot=et,ct=St,ut=kt;break}return[ot,ct,ut]}function RGBtoHSV(it,g,et){var ot=Math.max(it,g,et),ct=Math.min(it,g,et),ut=ot-ct,dt,ft=ot===0?0:ut/ot,St=ot/255;switch(ot){case ct:dt=0;break;case it:dt=g-et+ut*(g<et?6:0),dt/=6*ut;break;case g:dt=et-it+ut*2,dt/=6*ut;break;case et:dt=it-g+ut*4,dt/=6*ut;break}return[dt,ft,St]}function addSaturationToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[1]+=g,et[1]>1?et[1]=1:et[1]<=0&&(et[1]=0),HSVtoRGB(et[0],et[1],et[2])}function addBrightnessToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[2]+=g,et[2]>1?et[2]=1:et[2]<0&&(et[2]=0),HSVtoRGB(et[0],et[1],et[2])}function addHueToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[0]+=g/360,et[0]>1?et[0]-=1:et[0]<0&&(et[0]+=1),HSVtoRGB(et[0],et[1],et[2])}var rgbToHex=function(){var it=[],g,et;for(g=0;g<256;g+=1)et=g.toString(16),it[g]=et.length===1?"0"+et:et;return function(ot,ct,ut){return ot<0&&(ot=0),ct<0&&(ct=0),ut<0&&(ut=0),"#"+it[ot]+it[ct]+it[ut]}}(),setSubframeEnabled=function(g){subframeEnabled=!!g},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(g){expressionsPlugin=g},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(g){expressionsInterfaces=g},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(g){defaultCurveSegments=g},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(g){idPrefix$1=g};function createNS(it){return document.createElementNS(svgNS,it)}function _typeof$5(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(et){return typeof et}:_typeof$5=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(it)}var dataManager=function(){var it=1,g=[],et,ot,ct={onmessage:function(){},postMessage:function(Ft){et({data:Ft})}},ut={postMessage:function(Ft){ct.onmessage({data:Ft})}};function dt(Rt){if(window.Worker&&window.Blob&&getWebWorker()){var Ft=new Blob(["var _workerSelf = self; self.onmessage = ",Rt.toString()],{type:"text/javascript"}),$t=URL.createObjectURL(Ft);return new Worker($t)}return et=Rt,ct}function ft(){ot||(ot=dt(function(Ft){function $t(){function Kt(wn,hn){var yn,an,un=wn.length,bn,pn,kn,_n;for(an=0;an<un;an+=1)if(yn=wn[an],"ks"in yn&&!yn.completed){if(yn.completed=!0,yn.hasMask){var Rn=yn.masksProperties;for(pn=Rn.length,bn=0;bn<pn;bn+=1)if(Rn[bn].pt.k.i)tn(Rn[bn].pt.k);else for(_n=Rn[bn].pt.k.length,kn=0;kn<_n;kn+=1)Rn[bn].pt.k[kn].s&&tn(Rn[bn].pt.k[kn].s[0]),Rn[bn].pt.k[kn].e&&tn(Rn[bn].pt.k[kn].e[0])}yn.ty===0?(yn.layers=Jt(yn.refId,hn),Kt(yn.layers,hn)):yn.ty===4?en(yn.shapes):yn.ty===5&&En(yn)}}function Bt(wn,hn){if(wn){var yn=0,an=wn.length;for(yn=0;yn<an;yn+=1)wn[yn].t===1&&(wn[yn].data.layers=Jt(wn[yn].data.refId,hn),Kt(wn[yn].data.layers,hn))}}function Ut(wn,hn){for(var yn=0,an=hn.length;yn<an;){if(hn[yn].id===wn)return hn[yn];yn+=1}return null}function Jt(wn,hn){var yn=Ut(wn,hn);return yn?yn.layers.__used?JSON.parse(JSON.stringify(yn.layers)):(yn.layers.__used=!0,yn.layers):null}function en(wn){var hn,yn=wn.length,an,un;for(hn=yn-1;hn>=0;hn-=1)if(wn[hn].ty==="sh")if(wn[hn].ks.k.i)tn(wn[hn].ks.k);else for(un=wn[hn].ks.k.length,an=0;an<un;an+=1)wn[hn].ks.k[an].s&&tn(wn[hn].ks.k[an].s[0]),wn[hn].ks.k[an].e&&tn(wn[hn].ks.k[an].e[0]);else wn[hn].ty==="gr"&&en(wn[hn].it)}function tn(wn){var hn,yn=wn.i.length;for(hn=0;hn<yn;hn+=1)wn.i[hn][0]+=wn.v[hn][0],wn.i[hn][1]+=wn.v[hn][1],wn.o[hn][0]+=wn.v[hn][0],wn.o[hn][1]+=wn.v[hn][1]}function nn(wn,hn){var yn=hn?hn.split("."):[100,100,100];return wn[0]>yn[0]?!0:yn[0]>wn[0]?!1:wn[1]>yn[1]?!0:yn[1]>wn[1]?!1:wn[2]>yn[2]?!0:yn[2]>wn[2]?!1:null}var rn=function(){var wn=[4,4,14];function hn(an){var un=an.t.d;an.t.d={k:[{s:un,t:0}]}}function yn(an){var un,bn=an.length;for(un=0;un<bn;un+=1)an[un].ty===5&&hn(an[un])}return function(an){if(nn(wn,an.v)&&(yn(an.layers),an.assets)){var un,bn=an.assets.length;for(un=0;un<bn;un+=1)an.assets[un].layers&&yn(an.assets[un].layers)}}}(),on=function(){var wn=[4,7,99];return function(hn){if(hn.chars&&!nn(wn,hn.v)){var yn,an=hn.chars.length;for(yn=0;yn<an;yn+=1){var un=hn.chars[yn];un.data&&un.data.shapes&&(en(un.data.shapes),un.data.ip=0,un.data.op=99999,un.data.st=0,un.data.sr=1,un.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},hn.chars[yn].t||(un.data.shapes.push({ty:"no"}),un.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),dn=function(){var wn=[5,7,15];function hn(an){var un=an.t.p;typeof un.a=="number"&&(un.a={a:0,k:un.a}),typeof un.p=="number"&&(un.p={a:0,k:un.p}),typeof un.r=="number"&&(un.r={a:0,k:un.r})}function yn(an){var un,bn=an.length;for(un=0;un<bn;un+=1)an[un].ty===5&&hn(an[un])}return function(an){if(nn(wn,an.v)&&(yn(an.layers),an.assets)){var un,bn=an.assets.length;for(un=0;un<bn;un+=1)an.assets[un].layers&&yn(an.assets[un].layers)}}}(),cn=function(){var wn=[4,1,9];function hn(an){var un,bn=an.length,pn,kn;for(un=0;un<bn;un+=1)if(an[un].ty==="gr")hn(an[un].it);else if(an[un].ty==="fl"||an[un].ty==="st")if(an[un].c.k&&an[un].c.k[0].i)for(kn=an[un].c.k.length,pn=0;pn<kn;pn+=1)an[un].c.k[pn].s&&(an[un].c.k[pn].s[0]/=255,an[un].c.k[pn].s[1]/=255,an[un].c.k[pn].s[2]/=255,an[un].c.k[pn].s[3]/=255),an[un].c.k[pn].e&&(an[un].c.k[pn].e[0]/=255,an[un].c.k[pn].e[1]/=255,an[un].c.k[pn].e[2]/=255,an[un].c.k[pn].e[3]/=255);else an[un].c.k[0]/=255,an[un].c.k[1]/=255,an[un].c.k[2]/=255,an[un].c.k[3]/=255}function yn(an){var un,bn=an.length;for(un=0;un<bn;un+=1)an[un].ty===4&&hn(an[un].shapes)}return function(an){if(nn(wn,an.v)&&(yn(an.layers),an.assets)){var un,bn=an.assets.length;for(un=0;un<bn;un+=1)an.assets[un].layers&&yn(an.assets[un].layers)}}}(),fn=function(){var wn=[4,4,18];function hn(an){var un,bn=an.length,pn,kn;for(un=bn-1;un>=0;un-=1)if(an[un].ty==="sh")if(an[un].ks.k.i)an[un].ks.k.c=an[un].closed;else for(kn=an[un].ks.k.length,pn=0;pn<kn;pn+=1)an[un].ks.k[pn].s&&(an[un].ks.k[pn].s[0].c=an[un].closed),an[un].ks.k[pn].e&&(an[un].ks.k[pn].e[0].c=an[un].closed);else an[un].ty==="gr"&&hn(an[un].it)}function yn(an){var un,bn,pn=an.length,kn,_n,Rn,Nn;for(bn=0;bn<pn;bn+=1){if(un=an[bn],un.hasMask){var Cn=un.masksProperties;for(_n=Cn.length,kn=0;kn<_n;kn+=1)if(Cn[kn].pt.k.i)Cn[kn].pt.k.c=Cn[kn].cl;else for(Nn=Cn[kn].pt.k.length,Rn=0;Rn<Nn;Rn+=1)Cn[kn].pt.k[Rn].s&&(Cn[kn].pt.k[Rn].s[0].c=Cn[kn].cl),Cn[kn].pt.k[Rn].e&&(Cn[kn].pt.k[Rn].e[0].c=Cn[kn].cl)}un.ty===4&&hn(un.shapes)}}return function(an){if(nn(wn,an.v)&&(yn(an.layers),an.assets)){var un,bn=an.assets.length;for(un=0;un<bn;un+=1)an.assets[un].layers&&yn(an.assets[un].layers)}}}();function mn(wn){wn.__complete||(cn(wn),rn(wn),on(wn),dn(wn),fn(wn),Kt(wn.layers,wn.assets),Bt(wn.chars,wn.assets),wn.__complete=!0)}function En(wn){wn.t.a.length===0&&"m"in wn.t.p}var Sn={};return Sn.completeData=mn,Sn.checkColors=cn,Sn.checkChars=on,Sn.checkPathProperties=dn,Sn.checkShapes=fn,Sn.completeLayers=Kt,Sn}if(ut.dataManager||(ut.dataManager=$t()),ut.assetLoader||(ut.assetLoader=function(){function Kt(Ut){var Jt=Ut.getResponseHeader("content-type");return Jt&&Ut.responseType==="json"&&Jt.indexOf("json")!==-1||Ut.response&&_typeof$5(Ut.response)==="object"?Ut.response:Ut.response&&typeof Ut.response=="string"?JSON.parse(Ut.response):Ut.responseText?JSON.parse(Ut.responseText):null}function Bt(Ut,Jt,en,tn){var nn,rn=new XMLHttpRequest;try{rn.responseType="json"}catch{}rn.onreadystatechange=function(){if(rn.readyState===4)if(rn.status===200)nn=Kt(rn),en(nn);else try{nn=Kt(rn),en(nn)}catch(on){tn&&tn(on)}};try{rn.open(["G","E","T"].join(""),Ut,!0)}catch{rn.open(["G","E","T"].join(""),Jt+"/"+Ut,!0)}rn.send()}return{load:Bt}}()),Ft.data.type==="loadAnimation")ut.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Kt){ut.dataManager.completeData(Kt),ut.postMessage({id:Ft.data.id,payload:Kt,status:"success"})},function(){ut.postMessage({id:Ft.data.id,status:"error"})});else if(Ft.data.type==="complete"){var zt=Ft.data.animation;ut.dataManager.completeData(zt),ut.postMessage({id:Ft.data.id,payload:zt,status:"success"})}else Ft.data.type==="loadData"&&ut.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Kt){ut.postMessage({id:Ft.data.id,payload:Kt,status:"success"})},function(){ut.postMessage({id:Ft.data.id,status:"error"})})}),ot.onmessage=function(Rt){var Ft=Rt.data,$t=Ft.id,zt=g[$t];g[$t]=null,Ft.status==="success"?zt.onComplete(Ft.payload):zt.onError&&zt.onError()})}function St(Rt,Ft){it+=1;var $t="processId_"+it;return g[$t]={onComplete:Rt,onError:Ft},$t}function kt(Rt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"loadAnimation",path:Rt,fullPath:window.location.origin+window.location.pathname,id:zt})}function Tt(Rt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"loadData",path:Rt,fullPath:window.location.origin+window.location.pathname,id:zt})}function jt(Rt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"complete",animation:Rt,id:zt})}return{loadAnimation:kt,loadData:Tt,completeAnimation:jt}}(),ImagePreloader=function(){var it=function(){var Bt=createTag("canvas");Bt.width=1,Bt.height=1;var Ut=Bt.getContext("2d");return Ut.fillStyle="rgba(0,0,0,0)",Ut.fillRect(0,0,1,1),Bt}();function g(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function et(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ot(Bt,Ut,Jt){var en="";if(Bt.e)en=Bt.p;else if(Ut){var tn=Bt.p;tn.indexOf("images/")!==-1&&(tn=tn.split("/")[1]),en=Ut+tn}else en=Jt,en+=Bt.u?Bt.u:"",en+=Bt.p;return en}function ct(Bt){var Ut=0,Jt=setInterval((function(){var en=Bt.getBBox();(en.width||Ut>500)&&(this._imageLoaded(),clearInterval(Jt)),Ut+=1}).bind(this),50)}function ut(Bt){var Ut=ot(Bt,this.assetsPath,this.path),Jt=createNS("image");isSafari?this.testImageLoaded(Jt):Jt.addEventListener("load",this._imageLoaded,!1),Jt.addEventListener("error",(function(){en.img=it,this._imageLoaded()}).bind(this),!1),Jt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ut),this._elementHelper.append?this._elementHelper.append(Jt):this._elementHelper.appendChild(Jt);var en={img:Jt,assetData:Bt};return en}function dt(Bt){var Ut=ot(Bt,this.assetsPath,this.path),Jt=createTag("img");Jt.crossOrigin="anonymous",Jt.addEventListener("load",this._imageLoaded,!1),Jt.addEventListener("error",(function(){en.img=it,this._imageLoaded()}).bind(this),!1),Jt.src=Ut;var en={img:Jt,assetData:Bt};return en}function ft(Bt){var Ut={assetData:Bt},Jt=ot(Bt,this.assetsPath,this.path);return dataManager.loadData(Jt,(function(en){Ut.img=en,this._footageLoaded()}).bind(this),(function(){Ut.img={},this._footageLoaded()}).bind(this)),Ut}function St(Bt,Ut){this.imagesLoadedCb=Ut;var Jt,en=Bt.length;for(Jt=0;Jt<en;Jt+=1)Bt[Jt].layers||(!Bt[Jt].t||Bt[Jt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Bt[Jt]))):Bt[Jt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Bt[Jt]))))}function kt(Bt){this.path=Bt||""}function Tt(Bt){this.assetsPath=Bt||""}function jt(Bt){for(var Ut=0,Jt=this.images.length;Ut<Jt;){if(this.images[Ut].assetData===Bt)return this.images[Ut].img;Ut+=1}return null}function Rt(){this.imagesLoadedCb=null,this.images.length=0}function Ft(){return this.totalImages===this.loadedAssets}function $t(){return this.totalFootages===this.loadedFootagesCount}function zt(Bt,Ut){Bt==="svg"?(this._elementHelper=Ut,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Kt(){this._imageLoaded=g.bind(this),this._footageLoaded=et.bind(this),this.testImageLoaded=ct.bind(this),this.createFootageData=ft.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Kt.prototype={loadAssets:St,setAssetsPath:Tt,setPath:kt,loadedImages:Ft,loadedFootages:$t,destroy:Rt,getAsset:jt,createImgData:dt,createImageData:ut,imageLoaded:g,footageLoaded:et,setCacheType:zt},Kt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(g,et){if(this._cbs[g])for(var ot=this._cbs[g],ct=0;ct<ot.length;ct+=1)ot[ct](et)},addEventListener:function(g,et){return this._cbs[g]||(this._cbs[g]=[]),this._cbs[g].push(et),(function(){this.removeEventListener(g,et)}).bind(this)},removeEventListener:function(g,et){if(!et)this._cbs[g]=null;else if(this._cbs[g]){for(var ot=0,ct=this._cbs[g].length;ot<ct;)this._cbs[g][ot]===et&&(this._cbs[g].splice(ot,1),ot-=1,ct-=1),ot+=1;this._cbs[g].length||(this._cbs[g]=null)}}};var markerParser=function(){function it(g){for(var et=g.split(`\r
`),ot={},ct,ut=0,dt=0;dt<et.length;dt+=1)ct=et[dt].split(":"),ct.length===2&&(ot[ct[0]]=ct[1].trim(),ut+=1);if(ut===0)throw new Error;return ot}return function(g){for(var et=[],ot=0;ot<g.length;ot+=1){var ct=g[ot],ut={time:ct.tm,duration:ct.dr};try{ut.payload=JSON.parse(g[ot].cm)}catch{try{ut.payload=it(g[ot].cm)}catch{ut.payload={name:g[ot].cm}}}et.push(ut)}return et}}(),ProjectInterface=function(){function it(g){this.compositions.push(g)}return function(){function g(et){for(var ot=0,ct=this.compositions.length;ot<ct;){if(this.compositions[ot].data&&this.compositions[ot].data.nm===et)return this.compositions[ot].prepareFrame&&this.compositions[ot].data.xt&&this.compositions[ot].prepareFrame(this.currentFrame),this.compositions[ot].compInterface;ot+=1}return null}return g.compositions=[],g.currentFrame=0,g.registerComposition=it,g}}(),renderers={},registerRenderer=function(g,et){renderers[g]=et};function getRenderer(it){return renderers[it]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var it in renderers)if(renderers[it])return it;return""}function _typeof$4(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(et){return typeof et}:_typeof$4=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(it)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(it){(it.wrapper||it.container)&&(this.wrapper=it.wrapper||it.container);var g="svg";it.animType?g=it.animType:it.renderer&&(g=it.renderer);var et=getRenderer(g);this.renderer=new et(this,it.rendererSettings),this.imagePreloader.setCacheType(g,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=g,it.loop===""||it.loop===null||it.loop===void 0||it.loop===!0?this.loop=!0:it.loop===!1?this.loop=!1:this.loop=parseInt(it.loop,10),this.autoplay="autoplay"in it?it.autoplay:!0,this.name=it.name?it.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(it,"autoloadSegments")?it.autoloadSegments:!0,this.assetsPath=it.assetsPath,this.initialSegment=it.initialSegment,it.audioFactory&&this.audioController.setAudioFactory(it.audioFactory),it.animationData?this.setupAnimation(it.animationData):it.path&&(it.path.lastIndexOf("\\")!==-1?this.path=it.path.substr(0,it.path.lastIndexOf("\\")+1):this.path=it.path.substr(0,it.path.lastIndexOf("/")+1),this.fileName=it.path.substr(it.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(it.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(it){dataManager.completeAnimation(it,this.configAnimation)},AnimationItem.prototype.setData=function(it,g){g&&_typeof$4(g)!=="object"&&(g=JSON.parse(g));var et={wrapper:it,animationData:g},ot=it.attributes;et.path=ot.getNamedItem("data-animation-path")?ot.getNamedItem("data-animation-path").value:ot.getNamedItem("data-bm-path")?ot.getNamedItem("data-bm-path").value:ot.getNamedItem("bm-path")?ot.getNamedItem("bm-path").value:"",et.animType=ot.getNamedItem("data-anim-type")?ot.getNamedItem("data-anim-type").value:ot.getNamedItem("data-bm-type")?ot.getNamedItem("data-bm-type").value:ot.getNamedItem("bm-type")?ot.getNamedItem("bm-type").value:ot.getNamedItem("data-bm-renderer")?ot.getNamedItem("data-bm-renderer").value:ot.getNamedItem("bm-renderer")?ot.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ct=ot.getNamedItem("data-anim-loop")?ot.getNamedItem("data-anim-loop").value:ot.getNamedItem("data-bm-loop")?ot.getNamedItem("data-bm-loop").value:ot.getNamedItem("bm-loop")?ot.getNamedItem("bm-loop").value:"";ct==="false"?et.loop=!1:ct==="true"?et.loop=!0:ct!==""&&(et.loop=parseInt(ct,10));var ut=ot.getNamedItem("data-anim-autoplay")?ot.getNamedItem("data-anim-autoplay").value:ot.getNamedItem("data-bm-autoplay")?ot.getNamedItem("data-bm-autoplay").value:ot.getNamedItem("bm-autoplay")?ot.getNamedItem("bm-autoplay").value:!0;et.autoplay=ut!=="false",et.name=ot.getNamedItem("data-name")?ot.getNamedItem("data-name").value:ot.getNamedItem("data-bm-name")?ot.getNamedItem("data-bm-name").value:ot.getNamedItem("bm-name")?ot.getNamedItem("bm-name").value:"";var dt=ot.getNamedItem("data-anim-prerender")?ot.getNamedItem("data-anim-prerender").value:ot.getNamedItem("data-bm-prerender")?ot.getNamedItem("data-bm-prerender").value:ot.getNamedItem("bm-prerender")?ot.getNamedItem("bm-prerender").value:"";dt==="false"&&(et.prerender=!1),et.path?this.setParams(et):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(it){it.op>this.animationData.op&&(this.animationData.op=it.op,this.totalFrames=Math.floor(it.op-this.animationData.ip));var g=this.animationData.layers,et,ot=g.length,ct=it.layers,ut,dt=ct.length;for(ut=0;ut<dt;ut+=1)for(et=0;et<ot;){if(g[et].id===ct[ut].id){g[et]=ct[ut];break}et+=1}if((it.chars||it.fonts)&&(this.renderer.globalData.fontManager.addChars(it.chars),this.renderer.globalData.fontManager.addFonts(it.fonts,this.renderer.globalData.defs)),it.assets)for(ot=it.assets.length,et=0;et<ot;et+=1)this.animationData.assets.push(it.assets[et]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(it){this.animationData=it;var g=getExpressionsPlugin();g&&g.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var it=this.animationData.segments;if(!it||it.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var g=it.shift();this.timeCompleted=g.time*this.frameRate;var et=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(et,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var it=this.animationData.segments;it||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(it){if(this.renderer)try{this.animationData=it,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(it),it.assets||(it.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(it.assets),this.markers=markerParser(it.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(g){this.triggerConfigError(g)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var it=getExpressionsPlugin();it&&it.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(it,g){var et=typeof it=="number"?it:void 0,ot=typeof g=="number"?g:void 0;this.renderer.updateContainerSize(et,ot)},AnimationItem.prototype.setSubframe=function(it){this.isSubframeEnabled=!!it},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(it){this.triggerRenderFrameError(it)}},AnimationItem.prototype.play=function(it){it&&this.name!==it||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(it){it&&this.name!==it||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(it){it&&this.name!==it||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(it){it&&this.name!==it||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(it){for(var g,et=0;et<this.markers.length;et+=1)if(g=this.markers[et],g.payload&&g.payload.name===it)return g;return null},AnimationItem.prototype.goToAndStop=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&this.goToAndStop(ct.time,!0)}else g?this.setCurrentRawFrameValue(it):this.setCurrentRawFrameValue(it*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&(ct.duration?this.playSegments([ct.time,ct.time+ct.duration],!0):this.goToAndStop(ct.time,!0))}else this.goToAndStop(ot,g,et);this.play()}},AnimationItem.prototype.advanceTime=function(it){if(!(this.isPaused===!0||this.isLoaded===!1)){var g=this.currentRawFrame+it*this.frameModifier,et=!1;g>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(g>this.totalFrames?g%this.totalFrames:0)||(et=!0,g=this.totalFrames-1):g>=this.totalFrames?(this.playCount+=1,this.checkSegments(g%this.totalFrames)||(this.setCurrentRawFrameValue(g%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(g):g<0?this.checkSegments(g%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+g%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(et=!0,g=0)):this.setCurrentRawFrameValue(g),et&&(this.setCurrentRawFrameValue(g),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(it,g){this.playCount=0,it[1]<it[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=it[0]-it[1],this.timeCompleted=this.totalFrames,this.firstFrame=it[1],this.setCurrentRawFrameValue(this.totalFrames-.001-g)):it[1]>it[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=it[1]-it[0],this.timeCompleted=this.totalFrames,this.firstFrame=it[0],this.setCurrentRawFrameValue(.001+g)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(it,g){var et=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<it?et=it:this.currentRawFrame+this.firstFrame>g&&(et=g-it)),this.firstFrame=it,this.totalFrames=g-it,this.timeCompleted=this.totalFrames,et!==-1&&this.goToAndStop(et,!0)},AnimationItem.prototype.playSegments=function(it,g){if(g&&(this.segments.length=0),_typeof$4(it[0])==="object"){var et,ot=it.length;for(et=0;et<ot;et+=1)this.segments.push(it[et])}else this.segments.push(it);this.segments.length&&g&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(it){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),it&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(it){return this.segments.length?(this.adjustSegment(this.segments.shift(),it),!0):!1},AnimationItem.prototype.destroy=function(it){it&&this.name!==it||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(it){this.currentRawFrame=it,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(it){this.playSpeed=it,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(it){this.playDirection=it<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(it){this.loop=it},AnimationItem.prototype.setVolume=function(it,g){g&&this.name!==g||this.audioController.setVolume(it)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(it){it&&this.name!==it||this.audioController.mute()},AnimationItem.prototype.unmute=function(it){it&&this.name!==it||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(it){var g="";if(it.e)g=it.p;else if(this.assetsPath){var et=it.p;et.indexOf("images/")!==-1&&(et=et.split("/")[1]),g=this.assetsPath+et}else g=this.path,g+=it.u?it.u:"",g+=it.p;return g},AnimationItem.prototype.getAssetData=function(it){for(var g=0,et=this.assets.length;g<et;){if(it===this.assets[g].id)return this.assets[g];g+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(it){return it?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(it,g,et){try{var ot=this.renderer.getElementByPath(it);ot.updateDocumentData(g,et)}catch{}},AnimationItem.prototype.trigger=function(it){if(this._cbs&&this._cbs[it])switch(it){case"enterFrame":this.triggerEvent(it,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(it,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(it,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(it,new BMCompleteEvent(it,this.frameMult));break;case"segmentStart":this.triggerEvent(it,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(it,new BMDestroyEvent(it,this));break;default:this.triggerEvent(it)}it==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameMult)),it==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult)),it==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(it,this.frameMult)),it==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames)),it==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(it,this))},AnimationItem.prototype.triggerRenderFrameError=function(it){var g=new BMRenderFrameErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)},AnimationItem.prototype.triggerConfigError=function(it){var g=new BMConfigErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)};var animationManager=function(){var it={},g=[],et=0,ot=0,ct=0,ut=!0,dt=!1;function ft(hn){for(var yn=0,an=hn.target;yn<ot;)g[yn].animation===an&&(g.splice(yn,1),yn-=1,ot-=1,an.isPaused||jt()),yn+=1}function St(hn,yn){if(!hn)return null;for(var an=0;an<ot;){if(g[an].elem===hn&&g[an].elem!==null)return g[an].animation;an+=1}var un=new AnimationItem;return Rt(un,hn),un.setData(hn,yn),un}function kt(){var hn,yn=g.length,an=[];for(hn=0;hn<yn;hn+=1)an.push(g[hn].animation);return an}function Tt(){ct+=1,cn()}function jt(){ct-=1}function Rt(hn,yn){hn.addEventListener("destroy",ft),hn.addEventListener("_active",Tt),hn.addEventListener("_idle",jt),g.push({elem:yn,animation:hn}),ot+=1}function Ft(hn){var yn=new AnimationItem;return Rt(yn,null),yn.setParams(hn),yn}function $t(hn,yn){var an;for(an=0;an<ot;an+=1)g[an].animation.setSpeed(hn,yn)}function zt(hn,yn){var an;for(an=0;an<ot;an+=1)g[an].animation.setDirection(hn,yn)}function Kt(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.play(hn)}function Bt(hn){var yn=hn-et,an;for(an=0;an<ot;an+=1)g[an].animation.advanceTime(yn);et=hn,ct&&!dt?window.requestAnimationFrame(Bt):ut=!0}function Ut(hn){et=hn,window.requestAnimationFrame(Bt)}function Jt(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.pause(hn)}function en(hn,yn,an){var un;for(un=0;un<ot;un+=1)g[un].animation.goToAndStop(hn,yn,an)}function tn(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.stop(hn)}function nn(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.togglePause(hn)}function rn(hn){var yn;for(yn=ot-1;yn>=0;yn-=1)g[yn].animation.destroy(hn)}function on(hn,yn,an){var un=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),bn,pn=un.length;for(bn=0;bn<pn;bn+=1)an&&un[bn].setAttribute("data-bm-type",an),St(un[bn],hn);if(yn&&pn===0){an||(an="svg");var kn=document.getElementsByTagName("body")[0];kn.innerText="";var _n=createTag("div");_n.style.width="100%",_n.style.height="100%",_n.setAttribute("data-bm-type",an),kn.appendChild(_n),St(_n,hn)}}function dn(){var hn;for(hn=0;hn<ot;hn+=1)g[hn].animation.resize()}function cn(){!dt&&ct&&ut&&(window.requestAnimationFrame(Ut),ut=!1)}function fn(){dt=!0}function mn(){dt=!1,cn()}function En(hn,yn){var an;for(an=0;an<ot;an+=1)g[an].animation.setVolume(hn,yn)}function Sn(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.mute(hn)}function wn(hn){var yn;for(yn=0;yn<ot;yn+=1)g[yn].animation.unmute(hn)}return it.registerAnimation=St,it.loadAnimation=Ft,it.setSpeed=$t,it.setDirection=zt,it.play=Kt,it.pause=Jt,it.stop=tn,it.togglePause=nn,it.searchAnimations=on,it.resize=dn,it.goToAndStop=en,it.destroy=rn,it.freeze=fn,it.unfreeze=mn,it.setVolume=En,it.mute=Sn,it.unmute=wn,it.getRegisteredAnimations=kt,it}(),BezierFactory=function(){var it={};it.getBezierEasing=et;var g={};function et(Ut,Jt,en,tn,nn){var rn=nn||("bez_"+Ut+"_"+Jt+"_"+en+"_"+tn).replace(/\./g,"p");if(g[rn])return g[rn];var on=new Bt([Ut,Jt,en,tn]);return g[rn]=on,on}var ot=4,ct=.001,ut=1e-7,dt=10,ft=11,St=1/(ft-1),kt=typeof Float32Array=="function";function Tt(Ut,Jt){return 1-3*Jt+3*Ut}function jt(Ut,Jt){return 3*Jt-6*Ut}function Rt(Ut){return 3*Ut}function Ft(Ut,Jt,en){return((Tt(Jt,en)*Ut+jt(Jt,en))*Ut+Rt(Jt))*Ut}function $t(Ut,Jt,en){return 3*Tt(Jt,en)*Ut*Ut+2*jt(Jt,en)*Ut+Rt(Jt)}function zt(Ut,Jt,en,tn,nn){var rn,on,dn=0;do on=Jt+(en-Jt)/2,rn=Ft(on,tn,nn)-Ut,rn>0?en=on:Jt=on;while(Math.abs(rn)>ut&&++dn<dt);return on}function Kt(Ut,Jt,en,tn){for(var nn=0;nn<ot;++nn){var rn=$t(Jt,en,tn);if(rn===0)return Jt;var on=Ft(Jt,en,tn)-Ut;Jt-=on/rn}return Jt}function Bt(Ut){this._p=Ut,this._mSampleValues=kt?new Float32Array(ft):new Array(ft),this._precomputed=!1,this.get=this.get.bind(this)}return Bt.prototype={get:function(Jt){var en=this._p[0],tn=this._p[1],nn=this._p[2],rn=this._p[3];return this._precomputed||this._precompute(),en===tn&&nn===rn?Jt:Jt===0?0:Jt===1?1:Ft(this._getTForX(Jt),tn,rn)},_precompute:function(){var Jt=this._p[0],en=this._p[1],tn=this._p[2],nn=this._p[3];this._precomputed=!0,(Jt!==en||tn!==nn)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Jt=this._p[0],en=this._p[2],tn=0;tn<ft;++tn)this._mSampleValues[tn]=Ft(tn*St,Jt,en)},_getTForX:function(Jt){for(var en=this._p[0],tn=this._p[2],nn=this._mSampleValues,rn=0,on=1,dn=ft-1;on!==dn&&nn[on]<=Jt;++on)rn+=St;--on;var cn=(Jt-nn[on])/(nn[on+1]-nn[on]),fn=rn+cn*St,mn=$t(fn,en,tn);return mn>=ct?Kt(Jt,fn,en,tn):mn===0?fn:zt(Jt,rn,rn+St,en,tn)}},it}(),pooling=function(){function it(g){return g.concat(createSizedArray(g.length))}return{double:it}}(),poolFactory=function(){return function(it,g,et){var ot=0,ct=it,ut=createSizedArray(ct),dt={newElement:ft,release:St};function ft(){var kt;return ot?(ot-=1,kt=ut[ot]):kt=g(),kt}function St(kt){ot===ct&&(ut=pooling.double(ut),ct*=2),et&&et(kt),ut[ot]=kt,ot+=1}return dt}}(),bezierLengthPool=function(){function it(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,it)}(),segmentsLengthPool=function(){function it(){return{lengths:[],totalLength:0}}function g(et){var ot,ct=et.lengths.length;for(ot=0;ot<ct;ot+=1)bezierLengthPool.release(et.lengths[ot]);et.lengths.length=0}return poolFactory(8,it,g)}();function bezFunction(){var it=Math;function g(Rt,Ft,$t,zt,Kt,Bt){var Ut=Rt*zt+Ft*Kt+$t*Bt-Kt*zt-Bt*Rt-$t*Ft;return Ut>-.001&&Ut<.001}function et(Rt,Ft,$t,zt,Kt,Bt,Ut,Jt,en){if($t===0&&Bt===0&&en===0)return g(Rt,Ft,zt,Kt,Ut,Jt);var tn=it.sqrt(it.pow(zt-Rt,2)+it.pow(Kt-Ft,2)+it.pow(Bt-$t,2)),nn=it.sqrt(it.pow(Ut-Rt,2)+it.pow(Jt-Ft,2)+it.pow(en-$t,2)),rn=it.sqrt(it.pow(Ut-zt,2)+it.pow(Jt-Kt,2)+it.pow(en-Bt,2)),on;return tn>nn?tn>rn?on=tn-nn-rn:on=rn-nn-tn:rn>nn?on=rn-nn-tn:on=nn-tn-rn,on>-1e-4&&on<1e-4}var ot=function(){return function(Rt,Ft,$t,zt){var Kt=getDefaultCurveSegments(),Bt,Ut,Jt,en,tn,nn=0,rn,on=[],dn=[],cn=bezierLengthPool.newElement();for(Jt=$t.length,Bt=0;Bt<Kt;Bt+=1){for(tn=Bt/(Kt-1),rn=0,Ut=0;Ut<Jt;Ut+=1)en=bmPow(1-tn,3)*Rt[Ut]+3*bmPow(1-tn,2)*tn*$t[Ut]+3*(1-tn)*bmPow(tn,2)*zt[Ut]+bmPow(tn,3)*Ft[Ut],on[Ut]=en,dn[Ut]!==null&&(rn+=bmPow(on[Ut]-dn[Ut],2)),dn[Ut]=on[Ut];rn&&(rn=bmSqrt(rn),nn+=rn),cn.percents[Bt]=tn,cn.lengths[Bt]=nn}return cn.addedLength=nn,cn}}();function ct(Rt){var Ft=segmentsLengthPool.newElement(),$t=Rt.c,zt=Rt.v,Kt=Rt.o,Bt=Rt.i,Ut,Jt=Rt._length,en=Ft.lengths,tn=0;for(Ut=0;Ut<Jt-1;Ut+=1)en[Ut]=ot(zt[Ut],zt[Ut+1],Kt[Ut],Bt[Ut+1]),tn+=en[Ut].addedLength;return $t&&Jt&&(en[Ut]=ot(zt[Ut],zt[0],Kt[Ut],Bt[0]),tn+=en[Ut].addedLength),Ft.totalLength=tn,Ft}function ut(Rt){this.segmentLength=0,this.points=new Array(Rt)}function dt(Rt,Ft){this.partialLength=Rt,this.point=Ft}var ft=function(){var Rt={};return function(Ft,$t,zt,Kt){var Bt=(Ft[0]+"_"+Ft[1]+"_"+$t[0]+"_"+$t[1]+"_"+zt[0]+"_"+zt[1]+"_"+Kt[0]+"_"+Kt[1]).replace(/\./g,"p");if(!Rt[Bt]){var Ut=getDefaultCurveSegments(),Jt,en,tn,nn,rn,on=0,dn,cn,fn=null;Ft.length===2&&(Ft[0]!==$t[0]||Ft[1]!==$t[1])&&g(Ft[0],Ft[1],$t[0],$t[1],Ft[0]+zt[0],Ft[1]+zt[1])&&g(Ft[0],Ft[1],$t[0],$t[1],$t[0]+Kt[0],$t[1]+Kt[1])&&(Ut=2);var mn=new ut(Ut);for(tn=zt.length,Jt=0;Jt<Ut;Jt+=1){for(cn=createSizedArray(tn),rn=Jt/(Ut-1),dn=0,en=0;en<tn;en+=1)nn=bmPow(1-rn,3)*Ft[en]+3*bmPow(1-rn,2)*rn*(Ft[en]+zt[en])+3*(1-rn)*bmPow(rn,2)*($t[en]+Kt[en])+bmPow(rn,3)*$t[en],cn[en]=nn,fn!==null&&(dn+=bmPow(cn[en]-fn[en],2));dn=bmSqrt(dn),on+=dn,mn.points[Jt]=new dt(dn,cn),fn=cn}mn.segmentLength=on,Rt[Bt]=mn}return Rt[Bt]}}();function St(Rt,Ft){var $t=Ft.percents,zt=Ft.lengths,Kt=$t.length,Bt=bmFloor((Kt-1)*Rt),Ut=Rt*Ft.addedLength,Jt=0;if(Bt===Kt-1||Bt===0||Ut===zt[Bt])return $t[Bt];for(var en=zt[Bt]>Ut?-1:1,tn=!0;tn;)if(zt[Bt]<=Ut&&zt[Bt+1]>Ut?(Jt=(Ut-zt[Bt])/(zt[Bt+1]-zt[Bt]),tn=!1):Bt+=en,Bt<0||Bt>=Kt-1){if(Bt===Kt-1)return $t[Bt];tn=!1}return $t[Bt]+($t[Bt+1]-$t[Bt])*Jt}function kt(Rt,Ft,$t,zt,Kt,Bt){var Ut=St(Kt,Bt),Jt=1-Ut,en=it.round((Jt*Jt*Jt*Rt[0]+(Ut*Jt*Jt+Jt*Ut*Jt+Jt*Jt*Ut)*$t[0]+(Ut*Ut*Jt+Jt*Ut*Ut+Ut*Jt*Ut)*zt[0]+Ut*Ut*Ut*Ft[0])*1e3)/1e3,tn=it.round((Jt*Jt*Jt*Rt[1]+(Ut*Jt*Jt+Jt*Ut*Jt+Jt*Jt*Ut)*$t[1]+(Ut*Ut*Jt+Jt*Ut*Ut+Ut*Jt*Ut)*zt[1]+Ut*Ut*Ut*Ft[1])*1e3)/1e3;return[en,tn]}var Tt=createTypedArray("float32",8);function jt(Rt,Ft,$t,zt,Kt,Bt,Ut){Kt<0?Kt=0:Kt>1&&(Kt=1);var Jt=St(Kt,Ut);Bt=Bt>1?1:Bt;var en=St(Bt,Ut),tn,nn=Rt.length,rn=1-Jt,on=1-en,dn=rn*rn*rn,cn=Jt*rn*rn*3,fn=Jt*Jt*rn*3,mn=Jt*Jt*Jt,En=rn*rn*on,Sn=Jt*rn*on+rn*Jt*on+rn*rn*en,wn=Jt*Jt*on+rn*Jt*en+Jt*rn*en,hn=Jt*Jt*en,yn=rn*on*on,an=Jt*on*on+rn*en*on+rn*on*en,un=Jt*en*on+rn*en*en+Jt*on*en,bn=Jt*en*en,pn=on*on*on,kn=en*on*on+on*en*on+on*on*en,_n=en*en*on+on*en*en+en*on*en,Rn=en*en*en;for(tn=0;tn<nn;tn+=1)Tt[tn*4]=it.round((dn*Rt[tn]+cn*$t[tn]+fn*zt[tn]+mn*Ft[tn])*1e3)/1e3,Tt[tn*4+1]=it.round((En*Rt[tn]+Sn*$t[tn]+wn*zt[tn]+hn*Ft[tn])*1e3)/1e3,Tt[tn*4+2]=it.round((yn*Rt[tn]+an*$t[tn]+un*zt[tn]+bn*Ft[tn])*1e3)/1e3,Tt[tn*4+3]=it.round((pn*Rt[tn]+kn*$t[tn]+_n*zt[tn]+Rn*Ft[tn])*1e3)/1e3;return Tt}return{getSegmentsLength:ct,getNewSegment:jt,getPointInSegment:kt,buildBezierData:ft,pointOnLine2D:g,pointOnLine3D:et}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(it,g){var et=this.offsetTime,ot;this.propType==="multidimensional"&&(ot=createTypedArray("float32",this.pv.length));for(var ct=g.lastIndex,ut=ct,dt=this.keyframes.length-1,ft=!0,St,kt,Tt;ft;){if(St=this.keyframes[ut],kt=this.keyframes[ut+1],ut===dt-1&&it>=kt.t-et){St.h&&(St=kt),ct=0;break}if(kt.t-et>it){ct=ut;break}ut<dt-1?ut+=1:(ct=0,ft=!1)}Tt=this.keyframesMetadata[ut]||{};var jt,Rt,Ft,$t,zt,Kt,Bt=kt.t-et,Ut=St.t-et,Jt;if(St.to){Tt.bezierData||(Tt.bezierData=bez.buildBezierData(St.s,kt.s||St.e,St.to,St.ti));var en=Tt.bezierData;if(it>=Bt||it<Ut){var tn=it>=Bt?en.points.length-1:0;for(Rt=en.points[tn].point.length,jt=0;jt<Rt;jt+=1)ot[jt]=en.points[tn].point[jt]}else{Tt.__fnct?Kt=Tt.__fnct:(Kt=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y,St.n).get,Tt.__fnct=Kt),Ft=Kt((it-Ut)/(Bt-Ut));var nn=en.segmentLength*Ft,rn,on=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastAddedLength:0;for(zt=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastPoint:0,ft=!0,$t=en.points.length;ft;){if(on+=en.points[zt].partialLength,nn===0||Ft===0||zt===en.points.length-1){for(Rt=en.points[zt].point.length,jt=0;jt<Rt;jt+=1)ot[jt]=en.points[zt].point[jt];break}else if(nn>=on&&nn<on+en.points[zt+1].partialLength){for(rn=(nn-on)/en.points[zt+1].partialLength,Rt=en.points[zt].point.length,jt=0;jt<Rt;jt+=1)ot[jt]=en.points[zt].point[jt]+(en.points[zt+1].point[jt]-en.points[zt].point[jt])*rn;break}zt<$t-1?zt+=1:ft=!1}g._lastPoint=zt,g._lastAddedLength=on-en.points[zt].partialLength,g._lastKeyframeIndex=ut}}else{var dn,cn,fn,mn,En;if(dt=St.s.length,Jt=kt.s||St.e,this.sh&&St.h!==1)if(it>=Bt)ot[0]=Jt[0],ot[1]=Jt[1],ot[2]=Jt[2];else if(it<=Ut)ot[0]=St.s[0],ot[1]=St.s[1],ot[2]=St.s[2];else{var Sn=createQuaternion(St.s),wn=createQuaternion(Jt),hn=(it-Ut)/(Bt-Ut);quaternionToEuler(ot,slerp(Sn,wn,hn))}else for(ut=0;ut<dt;ut+=1)St.h!==1&&(it>=Bt?Ft=1:it<Ut?Ft=0:(St.o.x.constructor===Array?(Tt.__fnct||(Tt.__fnct=[]),Tt.__fnct[ut]?Kt=Tt.__fnct[ut]:(dn=St.o.x[ut]===void 0?St.o.x[0]:St.o.x[ut],cn=St.o.y[ut]===void 0?St.o.y[0]:St.o.y[ut],fn=St.i.x[ut]===void 0?St.i.x[0]:St.i.x[ut],mn=St.i.y[ut]===void 0?St.i.y[0]:St.i.y[ut],Kt=BezierFactory.getBezierEasing(dn,cn,fn,mn).get,Tt.__fnct[ut]=Kt)):Tt.__fnct?Kt=Tt.__fnct:(dn=St.o.x,cn=St.o.y,fn=St.i.x,mn=St.i.y,Kt=BezierFactory.getBezierEasing(dn,cn,fn,mn).get,St.keyframeMetadata=Kt),Ft=Kt((it-Ut)/(Bt-Ut)))),Jt=kt.s||St.e,En=St.h===1?St.s[ut]:St.s[ut]+(Jt[ut]-St.s[ut])*Ft,this.propType==="multidimensional"?ot[ut]=En:ot=En}return g.lastIndex=ct,ot}function slerp(it,g,et){var ot=[],ct=it[0],ut=it[1],dt=it[2],ft=it[3],St=g[0],kt=g[1],Tt=g[2],jt=g[3],Rt,Ft,$t,zt,Kt;return Ft=ct*St+ut*kt+dt*Tt+ft*jt,Ft<0&&(Ft=-Ft,St=-St,kt=-kt,Tt=-Tt,jt=-jt),1-Ft>1e-6?(Rt=Math.acos(Ft),$t=Math.sin(Rt),zt=Math.sin((1-et)*Rt)/$t,Kt=Math.sin(et*Rt)/$t):(zt=1-et,Kt=et),ot[0]=zt*ct+Kt*St,ot[1]=zt*ut+Kt*kt,ot[2]=zt*dt+Kt*Tt,ot[3]=zt*ft+Kt*jt,ot}function quaternionToEuler(it,g){var et=g[0],ot=g[1],ct=g[2],ut=g[3],dt=Math.atan2(2*ot*ut-2*et*ct,1-2*ot*ot-2*ct*ct),ft=Math.asin(2*et*ot+2*ct*ut),St=Math.atan2(2*et*ut-2*ot*ct,1-2*et*et-2*ct*ct);it[0]=dt/degToRads,it[1]=ft/degToRads,it[2]=St/degToRads}function createQuaternion(it){var g=it[0]*degToRads,et=it[1]*degToRads,ot=it[2]*degToRads,ct=Math.cos(g/2),ut=Math.cos(et/2),dt=Math.cos(ot/2),ft=Math.sin(g/2),St=Math.sin(et/2),kt=Math.sin(ot/2),Tt=ct*ut*dt-ft*St*kt,jt=ft*St*dt+ct*ut*kt,Rt=ft*ut*dt+ct*St*kt,Ft=ct*St*dt-ft*ut*kt;return[jt,Rt,Ft,Tt]}function getValueAtCurrentTime(){var it=this.comp.renderedFrame-this.offsetTime,g=this.keyframes[0].t-this.offsetTime,et=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(it===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=et&&it>=et||this._caching.lastFrame<g&&it<g))){this._caching.lastFrame>=it&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ot=this.interpolateValue(it,this._caching);this.pv=ot}return this._caching.lastFrame=it,this.pv}function setVValue(it){var g;if(this.propType==="unidimensional")g=it*this.mult,mathAbs(this.v-g)>1e-5&&(this.v=g,this._mdf=!0);else for(var et=0,ot=this.v.length;et<ot;)g=it[et]*this.mult,mathAbs(this.v[et]-g)>1e-5&&(this.v[et]=g,this._mdf=!0),et+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var it,g=this.effectsSequence.length,et=this.kf?this.pv:this.data.k;for(it=0;it<g;it+=1)et=this.effectsSequence[it](et);this.setVValue(et),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(it){this.effectsSequence.push(it),this.container.addDynamicProperty(this)}function ValueProperty(it,g,et,ot){this.propType="unidimensional",this.mult=et||1,this.data=g,this.v=et?g.k*et:g.k,this.pv=g.k,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(it,g,et,ot){this.propType="multidimensional",this.mult=et||1,this.data=g,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ct,ut=g.k.length;for(this.v=createTypedArray("float32",ut),this.pv=createTypedArray("float32",ut),this.vel=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)this.v[ct]=g.k[ct]*this.mult,this.pv[ct]=g.k[ct];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(it,g,et,ot){this.propType="unidimensional",this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=g,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(it,g,et,ot){this.propType="multidimensional";var ct,ut=g.k.length,dt,ft,St,kt;for(ct=0;ct<ut-1;ct+=1)g.k[ct].to&&g.k[ct].s&&g.k[ct+1]&&g.k[ct+1].s&&(dt=g.k[ct].s,ft=g.k[ct+1].s,St=g.k[ct].to,kt=g.k[ct].ti,(dt.length===2&&!(dt[0]===ft[0]&&dt[1]===ft[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],dt[0]+St[0],dt[1]+St[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],ft[0]+kt[0],ft[1]+kt[1])||dt.length===3&&!(dt[0]===ft[0]&&dt[1]===ft[1]&&dt[2]===ft[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],dt[0]+St[0],dt[1]+St[1],dt[2]+St[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],ft[0]+kt[0],ft[1]+kt[1],ft[2]+kt[2]))&&(g.k[ct].to=null,g.k[ct].ti=null),dt[0]===ft[0]&&dt[1]===ft[1]&&St[0]===0&&St[1]===0&&kt[0]===0&&kt[1]===0&&(dt.length===2||dt[2]===ft[2]&&St[2]===0&&kt[2]===0)&&(g.k[ct].to=null,g.k[ct].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=g,this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Tt=g.k[0].s.length;for(this.v=createTypedArray("float32",Tt),this.pv=createTypedArray("float32",Tt),ct=0;ct<Tt;ct+=1)this.v[ct]=initFrame,this.pv[ct]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Tt)},this.addEffect=addEffect}var PropertyFactory=function(){function it(et,ot,ct,ut,dt){ot.sid&&(ot=et.globalData.slotManager.getProp(ot));var ft;if(!ot.k.length)ft=new ValueProperty(et,ot,ut,dt);else if(typeof ot.k[0]=="number")ft=new MultiDimensionalProperty(et,ot,ut,dt);else switch(ct){case 0:ft=new KeyframedValueProperty(et,ot,ut,dt);break;case 1:ft=new KeyframedMultidimensionalProperty(et,ot,ut,dt);break}return ft.effectsSequence.length&&dt.addDynamicProperty(ft),ft}var g={getProp:it};return g}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&(this.dynamicProperties.push(g),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var g,et=this.dynamicProperties.length;for(g=0;g<et;g+=1)this.dynamicProperties[g].getValue(),this.dynamicProperties[g]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(g){this.container=g,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function it(){return createTypedArray("float32",2)}return poolFactory(8,it)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(it,g){this.c=it,this.setLength(g);for(var et=0;et<g;)this.v[et]=pointPool.newElement(),this.o[et]=pointPool.newElement(),this.i[et]=pointPool.newElement(),et+=1},ShapePath.prototype.setLength=function(it){for(;this._maxLength<it;)this.doubleArrayLength();this._length=it},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(it,g,et,ot,ct){var ut;switch(this._length=Math.max(this._length,ot+1),this._length>=this._maxLength&&this.doubleArrayLength(),et){case"v":ut=this.v;break;case"i":ut=this.i;break;case"o":ut=this.o;break;default:ut=[];break}(!ut[ot]||ut[ot]&&!ct)&&(ut[ot]=pointPool.newElement()),ut[ot][0]=it,ut[ot][1]=g},ShapePath.prototype.setTripleAt=function(it,g,et,ot,ct,ut,dt,ft){this.setXYAt(it,g,"v",dt,ft),this.setXYAt(et,ot,"o",dt,ft),this.setXYAt(ct,ut,"i",dt,ft)},ShapePath.prototype.reverse=function(){var it=new ShapePath;it.setPathData(this.c,this._length);var g=this.v,et=this.o,ot=this.i,ct=0;this.c&&(it.setTripleAt(g[0][0],g[0][1],ot[0][0],ot[0][1],et[0][0],et[0][1],0,!1),ct=1);var ut=this._length-1,dt=this._length,ft;for(ft=ct;ft<dt;ft+=1)it.setTripleAt(g[ut][0],g[ut][1],ot[ut][0],ot[ut][1],et[ut][0],et[ut][1],ft,!1),ut-=1;return it},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function it(){return new ShapePath}function g(ct){var ut=ct._length,dt;for(dt=0;dt<ut;dt+=1)pointPool.release(ct.v[dt]),pointPool.release(ct.i[dt]),pointPool.release(ct.o[dt]),ct.v[dt]=null,ct.i[dt]=null,ct.o[dt]=null;ct._length=0,ct.c=!1}function et(ct){var ut=ot.newElement(),dt,ft=ct._length===void 0?ct.v.length:ct._length;for(ut.setLength(ft),ut.c=ct.c,dt=0;dt<ft;dt+=1)ut.setTripleAt(ct.v[dt][0],ct.v[dt][1],ct.o[dt][0],ct.o[dt][1],ct.i[dt][0],ct.i[dt][1],dt);return ut}var ot=poolFactory(4,it,g);return ot.clone=et,ot}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(it){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=it,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var it;for(it=0;it<this._length;it+=1)shapePool.release(this.shapes[it]);this._length=0};var shapeCollectionPool=function(){var it={newShapeCollection:ct,release:ut},g=0,et=4,ot=createSizedArray(et);function ct(){var dt;return g?(g-=1,dt=ot[g]):dt=new ShapeCollection,dt}function ut(dt){var ft,St=dt._length;for(ft=0;ft<St;ft+=1)shapePool.release(dt.shapes[ft]);dt._length=0,g===et&&(ot=pooling.double(ot),et*=2),ot[g]=dt,g+=1}return it}(),ShapePropertyFactory=function(){var it=-999999;function g(Bt,Ut,Jt){var en=Jt.lastIndex,tn,nn,rn,on,dn,cn,fn,mn,En,Sn=this.keyframes;if(Bt<Sn[0].t-this.offsetTime)tn=Sn[0].s[0],rn=!0,en=0;else if(Bt>=Sn[Sn.length-1].t-this.offsetTime)tn=Sn[Sn.length-1].s?Sn[Sn.length-1].s[0]:Sn[Sn.length-2].e[0],rn=!0;else{for(var wn=en,hn=Sn.length-1,yn=!0,an,un,bn;yn&&(an=Sn[wn],un=Sn[wn+1],!(un.t-this.offsetTime>Bt));)wn<hn-1?wn+=1:yn=!1;if(bn=this.keyframesMetadata[wn]||{},rn=an.h===1,en=wn,!rn){if(Bt>=un.t-this.offsetTime)mn=1;else if(Bt<an.t-this.offsetTime)mn=0;else{var pn;bn.__fnct?pn=bn.__fnct:(pn=BezierFactory.getBezierEasing(an.o.x,an.o.y,an.i.x,an.i.y).get,bn.__fnct=pn),mn=pn((Bt-(an.t-this.offsetTime))/(un.t-this.offsetTime-(an.t-this.offsetTime)))}nn=un.s?un.s[0]:an.e[0]}tn=an.s[0]}for(cn=Ut._length,fn=tn.i[0].length,Jt.lastIndex=en,on=0;on<cn;on+=1)for(dn=0;dn<fn;dn+=1)En=rn?tn.i[on][dn]:tn.i[on][dn]+(nn.i[on][dn]-tn.i[on][dn])*mn,Ut.i[on][dn]=En,En=rn?tn.o[on][dn]:tn.o[on][dn]+(nn.o[on][dn]-tn.o[on][dn])*mn,Ut.o[on][dn]=En,En=rn?tn.v[on][dn]:tn.v[on][dn]+(nn.v[on][dn]-tn.v[on][dn])*mn,Ut.v[on][dn]=En}function et(){var Bt=this.comp.renderedFrame-this.offsetTime,Ut=this.keyframes[0].t-this.offsetTime,Jt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,en=this._caching.lastFrame;return en!==it&&(en<Ut&&Bt<Ut||en>Jt&&Bt>Jt)||(this._caching.lastIndex=en<Bt?this._caching.lastIndex:0,this.interpolateShape(Bt,this.pv,this._caching)),this._caching.lastFrame=Bt,this.pv}function ot(){this.paths=this.localShapeCollection}function ct(Bt,Ut){if(Bt._length!==Ut._length||Bt.c!==Ut.c)return!1;var Jt,en=Bt._length;for(Jt=0;Jt<en;Jt+=1)if(Bt.v[Jt][0]!==Ut.v[Jt][0]||Bt.v[Jt][1]!==Ut.v[Jt][1]||Bt.o[Jt][0]!==Ut.o[Jt][0]||Bt.o[Jt][1]!==Ut.o[Jt][1]||Bt.i[Jt][0]!==Ut.i[Jt][0]||Bt.i[Jt][1]!==Ut.i[Jt][1])return!1;return!0}function ut(Bt){ct(this.v,Bt)||(this.v=shapePool.clone(Bt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function dt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Bt;this.kf?Bt=this.pv:this.data.ks?Bt=this.data.ks.k:Bt=this.data.pt.k;var Ut,Jt=this.effectsSequence.length;for(Ut=0;Ut<Jt;Ut+=1)Bt=this.effectsSequence[Ut](Bt);this.setVValue(Bt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ft(Bt,Ut,Jt){this.propType="shape",this.comp=Bt.comp,this.container=Bt,this.elem=Bt,this.data=Ut,this.k=!1,this.kf=!1,this._mdf=!1;var en=Jt===3?Ut.pt.k:Ut.ks.k;this.v=shapePool.clone(en),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ot,this.effectsSequence=[]}function St(Bt){this.effectsSequence.push(Bt),this.container.addDynamicProperty(this)}ft.prototype.interpolateShape=g,ft.prototype.getValue=dt,ft.prototype.setVValue=ut,ft.prototype.addEffect=St;function kt(Bt,Ut,Jt){this.propType="shape",this.comp=Bt.comp,this.elem=Bt,this.container=Bt,this.offsetTime=Bt.data.st,this.keyframes=Jt===3?Ut.pt.k:Ut.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var en=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,en),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=it,this.reset=ot,this._caching={lastFrame:it,lastIndex:0},this.effectsSequence=[et.bind(this)]}kt.prototype.getValue=dt,kt.prototype.interpolateShape=g,kt.prototype.setVValue=ut,kt.prototype.addEffect=St;var Tt=function(){var Bt=roundCorner;function Ut(Jt,en){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=en.d,this.elem=Jt,this.comp=Jt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Jt),this.p=PropertyFactory.getProp(Jt,en.p,1,0,this),this.s=PropertyFactory.getProp(Jt,en.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ut.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var en=this.p.v[0],tn=this.p.v[1],nn=this.s.v[0]/2,rn=this.s.v[1]/2,on=this.d!==3,dn=this.v;dn.v[0][0]=en,dn.v[0][1]=tn-rn,dn.v[1][0]=on?en+nn:en-nn,dn.v[1][1]=tn,dn.v[2][0]=en,dn.v[2][1]=tn+rn,dn.v[3][0]=on?en-nn:en+nn,dn.v[3][1]=tn,dn.i[0][0]=on?en-nn*Bt:en+nn*Bt,dn.i[0][1]=tn-rn,dn.i[1][0]=on?en+nn:en-nn,dn.i[1][1]=tn-rn*Bt,dn.i[2][0]=on?en+nn*Bt:en-nn*Bt,dn.i[2][1]=tn+rn,dn.i[3][0]=on?en-nn:en+nn,dn.i[3][1]=tn+rn*Bt,dn.o[0][0]=on?en+nn*Bt:en-nn*Bt,dn.o[0][1]=tn-rn,dn.o[1][0]=on?en+nn:en-nn,dn.o[1][1]=tn+rn*Bt,dn.o[2][0]=on?en-nn*Bt:en+nn*Bt,dn.o[2][1]=tn+rn,dn.o[3][0]=on?en-nn:en+nn,dn.o[3][1]=tn-rn*Bt}},extendPrototype([DynamicPropertyContainer],Ut),Ut}(),jt=function(){function Bt(Ut,Jt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ut,this.comp=Ut.comp,this.data=Jt,this.frameId=-1,this.d=Jt.d,this.initDynamicPropertyContainer(Ut),Jt.sy===1?(this.ir=PropertyFactory.getProp(Ut,Jt.ir,0,0,this),this.is=PropertyFactory.getProp(Ut,Jt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ut,Jt.pt,0,0,this),this.p=PropertyFactory.getProp(Ut,Jt.p,1,0,this),this.r=PropertyFactory.getProp(Ut,Jt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ut,Jt.or,0,0,this),this.os=PropertyFactory.getProp(Ut,Jt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Bt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Jt=Math.floor(this.pt.v)*2,en=Math.PI*2/Jt,tn=!0,nn=this.or.v,rn=this.ir.v,on=this.os.v,dn=this.is.v,cn=2*Math.PI*nn/(Jt*2),fn=2*Math.PI*rn/(Jt*2),mn,En,Sn,wn,hn=-Math.PI/2;hn+=this.r.v;var yn=this.data.d===3?-1:1;for(this.v._length=0,mn=0;mn<Jt;mn+=1){En=tn?nn:rn,Sn=tn?on:dn,wn=tn?cn:fn;var an=En*Math.cos(hn),un=En*Math.sin(hn),bn=an===0&&un===0?0:un/Math.sqrt(an*an+un*un),pn=an===0&&un===0?0:-an/Math.sqrt(an*an+un*un);an+=+this.p.v[0],un+=+this.p.v[1],this.v.setTripleAt(an,un,an-bn*wn*Sn*yn,un-pn*wn*Sn*yn,an+bn*wn*Sn*yn,un+pn*wn*Sn*yn,mn,!0),tn=!tn,hn+=en*yn}},convertPolygonToPath:function(){var Jt=Math.floor(this.pt.v),en=Math.PI*2/Jt,tn=this.or.v,nn=this.os.v,rn=2*Math.PI*tn/(Jt*4),on,dn=-Math.PI*.5,cn=this.data.d===3?-1:1;for(dn+=this.r.v,this.v._length=0,on=0;on<Jt;on+=1){var fn=tn*Math.cos(dn),mn=tn*Math.sin(dn),En=fn===0&&mn===0?0:mn/Math.sqrt(fn*fn+mn*mn),Sn=fn===0&&mn===0?0:-fn/Math.sqrt(fn*fn+mn*mn);fn+=+this.p.v[0],mn+=+this.p.v[1],this.v.setTripleAt(fn,mn,fn-En*rn*nn*cn,mn-Sn*rn*nn*cn,fn+En*rn*nn*cn,mn+Sn*rn*nn*cn,on,!0),dn+=en*cn}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Bt),Bt}(),Rt=function(){function Bt(Ut,Jt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ut,this.comp=Ut.comp,this.frameId=-1,this.d=Jt.d,this.initDynamicPropertyContainer(Ut),this.p=PropertyFactory.getProp(Ut,Jt.p,1,0,this),this.s=PropertyFactory.getProp(Ut,Jt.s,1,0,this),this.r=PropertyFactory.getProp(Ut,Jt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Bt.prototype={convertRectToPath:function(){var Jt=this.p.v[0],en=this.p.v[1],tn=this.s.v[0]/2,nn=this.s.v[1]/2,rn=bmMin(tn,nn,this.r.v),on=rn*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Jt+tn,en-nn+rn,Jt+tn,en-nn+rn,Jt+tn,en-nn+on,0,!0),this.v.setTripleAt(Jt+tn,en+nn-rn,Jt+tn,en+nn-on,Jt+tn,en+nn-rn,1,!0),rn!==0?(this.v.setTripleAt(Jt+tn-rn,en+nn,Jt+tn-rn,en+nn,Jt+tn-on,en+nn,2,!0),this.v.setTripleAt(Jt-tn+rn,en+nn,Jt-tn+on,en+nn,Jt-tn+rn,en+nn,3,!0),this.v.setTripleAt(Jt-tn,en+nn-rn,Jt-tn,en+nn-rn,Jt-tn,en+nn-on,4,!0),this.v.setTripleAt(Jt-tn,en-nn+rn,Jt-tn,en-nn+on,Jt-tn,en-nn+rn,5,!0),this.v.setTripleAt(Jt-tn+rn,en-nn,Jt-tn+rn,en-nn,Jt-tn+on,en-nn,6,!0),this.v.setTripleAt(Jt+tn-rn,en-nn,Jt+tn-on,en-nn,Jt+tn-rn,en-nn,7,!0)):(this.v.setTripleAt(Jt-tn,en+nn,Jt-tn+on,en+nn,Jt-tn,en+nn,2),this.v.setTripleAt(Jt-tn,en-nn,Jt-tn,en-nn+on,Jt-tn,en-nn,3))):(this.v.setTripleAt(Jt+tn,en-nn+rn,Jt+tn,en-nn+on,Jt+tn,en-nn+rn,0,!0),rn!==0?(this.v.setTripleAt(Jt+tn-rn,en-nn,Jt+tn-rn,en-nn,Jt+tn-on,en-nn,1,!0),this.v.setTripleAt(Jt-tn+rn,en-nn,Jt-tn+on,en-nn,Jt-tn+rn,en-nn,2,!0),this.v.setTripleAt(Jt-tn,en-nn+rn,Jt-tn,en-nn+rn,Jt-tn,en-nn+on,3,!0),this.v.setTripleAt(Jt-tn,en+nn-rn,Jt-tn,en+nn-on,Jt-tn,en+nn-rn,4,!0),this.v.setTripleAt(Jt-tn+rn,en+nn,Jt-tn+rn,en+nn,Jt-tn+on,en+nn,5,!0),this.v.setTripleAt(Jt+tn-rn,en+nn,Jt+tn-on,en+nn,Jt+tn-rn,en+nn,6,!0),this.v.setTripleAt(Jt+tn,en+nn-rn,Jt+tn,en+nn-rn,Jt+tn,en+nn-on,7,!0)):(this.v.setTripleAt(Jt-tn,en-nn,Jt-tn+on,en-nn,Jt-tn,en-nn,1,!0),this.v.setTripleAt(Jt-tn,en+nn,Jt-tn,en+nn-on,Jt-tn,en+nn,2,!0),this.v.setTripleAt(Jt+tn,en+nn,Jt+tn-on,en+nn,Jt+tn,en+nn,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ot},extendPrototype([DynamicPropertyContainer],Bt),Bt}();function Ft(Bt,Ut,Jt){var en;if(Jt===3||Jt===4){var tn=Jt===3?Ut.pt:Ut.ks,nn=tn.k;nn.length?en=new kt(Bt,Ut,Jt):en=new ft(Bt,Ut,Jt)}else Jt===5?en=new Rt(Bt,Ut):Jt===6?en=new Tt(Bt,Ut):Jt===7&&(en=new jt(Bt,Ut));return en.k&&Bt.addDynamicProperty(en),en}function $t(){return ft}function zt(){return kt}var Kt={};return Kt.getShapeProp=Ft,Kt.getConstructorFunction=$t,Kt.getKeyframedConstructorFunction=zt,Kt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var it=Math.cos,g=Math.sin,et=Math.tan,ot=Math.round;function ct(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ut(an){if(an===0)return this;var un=it(an),bn=g(an);return this._t(un,-bn,0,0,bn,un,0,0,0,0,1,0,0,0,0,1)}function dt(an){if(an===0)return this;var un=it(an),bn=g(an);return this._t(1,0,0,0,0,un,-bn,0,0,bn,un,0,0,0,0,1)}function ft(an){if(an===0)return this;var un=it(an),bn=g(an);return this._t(un,0,bn,0,0,1,0,0,-bn,0,un,0,0,0,0,1)}function St(an){if(an===0)return this;var un=it(an),bn=g(an);return this._t(un,-bn,0,0,bn,un,0,0,0,0,1,0,0,0,0,1)}function kt(an,un){return this._t(1,un,an,1,0,0)}function Tt(an,un){return this.shear(et(an),et(un))}function jt(an,un){var bn=it(un),pn=g(un);return this._t(bn,pn,0,0,-pn,bn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,et(an),1,0,0,0,0,1,0,0,0,0,1)._t(bn,-pn,0,0,pn,bn,0,0,0,0,1,0,0,0,0,1)}function Rt(an,un,bn){return!bn&&bn!==0&&(bn=1),an===1&&un===1&&bn===1?this:this._t(an,0,0,0,0,un,0,0,0,0,bn,0,0,0,0,1)}function Ft(an,un,bn,pn,kn,_n,Rn,Nn,Cn,Mn,In,On,jn,Gn,Jn,Un){return this.props[0]=an,this.props[1]=un,this.props[2]=bn,this.props[3]=pn,this.props[4]=kn,this.props[5]=_n,this.props[6]=Rn,this.props[7]=Nn,this.props[8]=Cn,this.props[9]=Mn,this.props[10]=In,this.props[11]=On,this.props[12]=jn,this.props[13]=Gn,this.props[14]=Jn,this.props[15]=Un,this}function $t(an,un,bn){return bn=bn||0,an!==0||un!==0||bn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,an,un,bn,1):this}function zt(an,un,bn,pn,kn,_n,Rn,Nn,Cn,Mn,In,On,jn,Gn,Jn,Un){var Hn=this.props;if(an===1&&un===0&&bn===0&&pn===0&&kn===0&&_n===1&&Rn===0&&Nn===0&&Cn===0&&Mn===0&&In===1&&On===0)return Hn[12]=Hn[12]*an+Hn[15]*jn,Hn[13]=Hn[13]*_n+Hn[15]*Gn,Hn[14]=Hn[14]*In+Hn[15]*Jn,Hn[15]*=Un,this._identityCalculated=!1,this;var ir=Hn[0],ur=Hn[1],yr=Hn[2],Bn=Hn[3],zn=Hn[4],Kn=Hn[5],Yn=Hn[6],Wn=Hn[7],lr=Hn[8],or=Hn[9],cr=Hn[10],Cr=Hn[11],Rr=Hn[12],br=Hn[13],Ts=Hn[14],Tr=Hn[15];return Hn[0]=ir*an+ur*kn+yr*Cn+Bn*jn,Hn[1]=ir*un+ur*_n+yr*Mn+Bn*Gn,Hn[2]=ir*bn+ur*Rn+yr*In+Bn*Jn,Hn[3]=ir*pn+ur*Nn+yr*On+Bn*Un,Hn[4]=zn*an+Kn*kn+Yn*Cn+Wn*jn,Hn[5]=zn*un+Kn*_n+Yn*Mn+Wn*Gn,Hn[6]=zn*bn+Kn*Rn+Yn*In+Wn*Jn,Hn[7]=zn*pn+Kn*Nn+Yn*On+Wn*Un,Hn[8]=lr*an+or*kn+cr*Cn+Cr*jn,Hn[9]=lr*un+or*_n+cr*Mn+Cr*Gn,Hn[10]=lr*bn+or*Rn+cr*In+Cr*Jn,Hn[11]=lr*pn+or*Nn+cr*On+Cr*Un,Hn[12]=Rr*an+br*kn+Ts*Cn+Tr*jn,Hn[13]=Rr*un+br*_n+Ts*Mn+Tr*Gn,Hn[14]=Rr*bn+br*Rn+Ts*In+Tr*Jn,Hn[15]=Rr*pn+br*Nn+Ts*On+Tr*Un,this._identityCalculated=!1,this}function Kt(an){var un=an.props;return this.transform(un[0],un[1],un[2],un[3],un[4],un[5],un[6],un[7],un[8],un[9],un[10],un[11],un[12],un[13],un[14],un[15])}function Bt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ut(an){for(var un=0;un<16;){if(an.props[un]!==this.props[un])return!1;un+=1}return!0}function Jt(an){var un;for(un=0;un<16;un+=1)an.props[un]=this.props[un];return an}function en(an){var un;for(un=0;un<16;un+=1)this.props[un]=an[un]}function tn(an,un,bn){return{x:an*this.props[0]+un*this.props[4]+bn*this.props[8]+this.props[12],y:an*this.props[1]+un*this.props[5]+bn*this.props[9]+this.props[13],z:an*this.props[2]+un*this.props[6]+bn*this.props[10]+this.props[14]}}function nn(an,un,bn){return an*this.props[0]+un*this.props[4]+bn*this.props[8]+this.props[12]}function rn(an,un,bn){return an*this.props[1]+un*this.props[5]+bn*this.props[9]+this.props[13]}function on(an,un,bn){return an*this.props[2]+un*this.props[6]+bn*this.props[10]+this.props[14]}function dn(){var an=this.props[0]*this.props[5]-this.props[1]*this.props[4],un=this.props[5]/an,bn=-this.props[1]/an,pn=-this.props[4]/an,kn=this.props[0]/an,_n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/an,Rn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/an,Nn=new Matrix;return Nn.props[0]=un,Nn.props[1]=bn,Nn.props[4]=pn,Nn.props[5]=kn,Nn.props[12]=_n,Nn.props[13]=Rn,Nn}function cn(an){var un=this.getInverseMatrix();return un.applyToPointArray(an[0],an[1],an[2]||0)}function fn(an){var un,bn=an.length,pn=[];for(un=0;un<bn;un+=1)pn[un]=cn(an[un]);return pn}function mn(an,un,bn){var pn=createTypedArray("float32",6);if(this.isIdentity())pn[0]=an[0],pn[1]=an[1],pn[2]=un[0],pn[3]=un[1],pn[4]=bn[0],pn[5]=bn[1];else{var kn=this.props[0],_n=this.props[1],Rn=this.props[4],Nn=this.props[5],Cn=this.props[12],Mn=this.props[13];pn[0]=an[0]*kn+an[1]*Rn+Cn,pn[1]=an[0]*_n+an[1]*Nn+Mn,pn[2]=un[0]*kn+un[1]*Rn+Cn,pn[3]=un[0]*_n+un[1]*Nn+Mn,pn[4]=bn[0]*kn+bn[1]*Rn+Cn,pn[5]=bn[0]*_n+bn[1]*Nn+Mn}return pn}function En(an,un,bn){var pn;return this.isIdentity()?pn=[an,un,bn]:pn=[an*this.props[0]+un*this.props[4]+bn*this.props[8]+this.props[12],an*this.props[1]+un*this.props[5]+bn*this.props[9]+this.props[13],an*this.props[2]+un*this.props[6]+bn*this.props[10]+this.props[14]],pn}function Sn(an,un){if(this.isIdentity())return an+","+un;var bn=this.props;return Math.round((an*bn[0]+un*bn[4]+bn[12])*100)/100+","+Math.round((an*bn[1]+un*bn[5]+bn[13])*100)/100}function wn(){for(var an=0,un=this.props,bn="matrix3d(",pn=1e4;an<16;)bn+=ot(un[an]*pn)/pn,bn+=an===15?")":",",an+=1;return bn}function hn(an){var un=1e4;return an<1e-6&&an>0||an>-1e-6&&an<0?ot(an*un)/un:an}function yn(){var an=this.props,un=hn(an[0]),bn=hn(an[1]),pn=hn(an[4]),kn=hn(an[5]),_n=hn(an[12]),Rn=hn(an[13]);return"matrix("+un+","+bn+","+pn+","+kn+","+_n+","+Rn+")"}return function(){this.reset=ct,this.rotate=ut,this.rotateX=dt,this.rotateY=ft,this.rotateZ=St,this.skew=Tt,this.skewFromAxis=jt,this.shear=kt,this.scale=Rt,this.setTransform=Ft,this.translate=$t,this.transform=zt,this.multiply=Kt,this.applyToPoint=tn,this.applyToX=nn,this.applyToY=rn,this.applyToZ=on,this.applyToPointArray=En,this.applyToTriplePoints=mn,this.applyToPointStringified=Sn,this.toCSS=wn,this.to2dCSS=yn,this.clone=Jt,this.cloneFromProps=en,this.equals=Ut,this.inversePoints=fn,this.inversePoint=cn,this.getInverseMatrix=dn,this._t=this.transform,this.isIdentity=Bt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(et){return typeof et}:_typeof$3=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(it)}var lottie={};function setLocation(it){setLocationHref(it)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(it){setSubframeEnabled(it)}function setPrefix(it){setIdPrefix(it)}function loadAnimation(it){return animationManager.loadAnimation(it)}function setQuality(it){if(typeof it=="string")switch(it){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(it)&&it>1&&setDefaultCurveSegments(it)}function inBrowser(){return typeof navigator<"u"}function installPlugin(it,g){it==="expressions"&&setExpressionsPlugin(g)}function getFactory(it){switch(it){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(it){for(var g=queryString.split("&"),et=0;et<g.length;et+=1){var ot=g[et].split("=");if(decodeURIComponent(ot[0])==it)return decodeURIComponent(ot[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(it){}var ShapeModifiers=function(){var it={},g={};it.registerModifier=et,it.getModifier=ot;function et(ct,ut){g[ct]||(g[ct]=ut)}function ot(ct,ut,dt){return new g[ct](ut,dt)}return it}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(it){if(!this.closed){it.sh.container.addDynamicProperty(it.sh);var g={shape:it.sh,data:it,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(g),this.addShapeToModifier(g),this._isAnimated&&it.setAsAnimated()}},ShapeModifier.prototype.init=function(it,g){this.shapes=[],this.elem=it,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(it,g){this.s=PropertyFactory.getProp(it,g.s,0,.01,this),this.e=PropertyFactory.getProp(it,g.e,0,.01,this),this.o=PropertyFactory.getProp(it,g.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=g.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(it){it.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(it,g,et,ot,ct){var ut=[];g<=1?ut.push({s:it,e:g}):it>=1?ut.push({s:it-1,e:g-1}):(ut.push({s:it,e:1}),ut.push({s:0,e:g-1}));var dt=[],ft,St=ut.length,kt;for(ft=0;ft<St;ft+=1)if(kt=ut[ft],!(kt.e*ct<ot||kt.s*ct>ot+et)){var Tt,jt;kt.s*ct<=ot?Tt=0:Tt=(kt.s*ct-ot)/et,kt.e*ct>=ot+et?jt=1:jt=(kt.e*ct-ot)/et,dt.push([Tt,jt])}return dt.length||dt.push([0,0]),dt},TrimModifier.prototype.releasePathsData=function(it){var g,et=it.length;for(g=0;g<et;g+=1)segmentsLengthPool.release(it[g]);return it.length=0,it},TrimModifier.prototype.processShapes=function(it){var g,et;if(this._mdf||it){var ot=this.o.v%360/360;if(ot<0&&(ot+=1),this.s.v>1?g=1+ot:this.s.v<0?g=0+ot:g=this.s.v+ot,this.e.v>1?et=1+ot:this.e.v<0?et=0+ot:et=this.e.v+ot,g>et){var ct=g;g=et,et=ct}g=Math.round(g*1e4)*1e-4,et=Math.round(et*1e4)*1e-4,this.sValue=g,this.eValue=et}else g=this.sValue,et=this.eValue;var ut,dt,ft=this.shapes.length,St,kt,Tt,jt,Rt,Ft=0;if(et===g)for(dt=0;dt<ft;dt+=1)this.shapes[dt].localShapeCollection.releaseShapes(),this.shapes[dt].shape._mdf=!0,this.shapes[dt].shape.paths=this.shapes[dt].localShapeCollection,this._mdf&&(this.shapes[dt].pathsData.length=0);else if(et===1&&g===0||et===0&&g===1){if(this._mdf)for(dt=0;dt<ft;dt+=1)this.shapes[dt].pathsData.length=0,this.shapes[dt].shape._mdf=!0}else{var $t=[],zt,Kt;for(dt=0;dt<ft;dt+=1)if(zt=this.shapes[dt],!zt.shape._mdf&&!this._mdf&&!it&&this.m!==2)zt.shape.paths=zt.localShapeCollection;else{if(ut=zt.shape.paths,kt=ut._length,Rt=0,!zt.shape._mdf&&zt.pathsData.length)Rt=zt.totalShapeLength;else{for(Tt=this.releasePathsData(zt.pathsData),St=0;St<kt;St+=1)jt=bez.getSegmentsLength(ut.shapes[St]),Tt.push(jt),Rt+=jt.totalLength;zt.totalShapeLength=Rt,zt.pathsData=Tt}Ft+=Rt,zt.shape._mdf=!0}var Bt=g,Ut=et,Jt=0,en;for(dt=ft-1;dt>=0;dt-=1)if(zt=this.shapes[dt],zt.shape._mdf){for(Kt=zt.localShapeCollection,Kt.releaseShapes(),this.m===2&&ft>1?(en=this.calculateShapeEdges(g,et,zt.totalShapeLength,Jt,Ft),Jt+=zt.totalShapeLength):en=[[Bt,Ut]],kt=en.length,St=0;St<kt;St+=1){Bt=en[St][0],Ut=en[St][1],$t.length=0,Ut<=1?$t.push({s:zt.totalShapeLength*Bt,e:zt.totalShapeLength*Ut}):Bt>=1?$t.push({s:zt.totalShapeLength*(Bt-1),e:zt.totalShapeLength*(Ut-1)}):($t.push({s:zt.totalShapeLength*Bt,e:zt.totalShapeLength}),$t.push({s:0,e:zt.totalShapeLength*(Ut-1)}));var tn=this.addShapes(zt,$t[0]);if($t[0].s!==$t[0].e){if($t.length>1){var nn=zt.shape.paths.shapes[zt.shape.paths._length-1];if(nn.c){var rn=tn.pop();this.addPaths(tn,Kt),tn=this.addShapes(zt,$t[1],rn)}else this.addPaths(tn,Kt),tn=this.addShapes(zt,$t[1])}this.addPaths(tn,Kt)}}zt.shape.paths=Kt}}},TrimModifier.prototype.addPaths=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g.addShape(it[et])},TrimModifier.prototype.addSegment=function(it,g,et,ot,ct,ut,dt){ct.setXYAt(g[0],g[1],"o",ut),ct.setXYAt(et[0],et[1],"i",ut+1),dt&&ct.setXYAt(it[0],it[1],"v",ut),ct.setXYAt(ot[0],ot[1],"v",ut+1)},TrimModifier.prototype.addSegmentFromArray=function(it,g,et,ot){g.setXYAt(it[1],it[5],"o",et),g.setXYAt(it[2],it[6],"i",et+1),ot&&g.setXYAt(it[0],it[4],"v",et),g.setXYAt(it[3],it[7],"v",et+1)},TrimModifier.prototype.addShapes=function(it,g,et){var ot=it.pathsData,ct=it.shape.paths.shapes,ut,dt=it.shape.paths._length,ft,St,kt=0,Tt,jt,Rt,Ft,$t=[],zt,Kt=!0;for(et?(jt=et._length,zt=et._length):(et=shapePool.newElement(),jt=0,zt=0),$t.push(et),ut=0;ut<dt;ut+=1){for(Rt=ot[ut].lengths,et.c=ct[ut].c,St=ct[ut].c?Rt.length:Rt.length+1,ft=1;ft<St;ft+=1)if(Tt=Rt[ft-1],kt+Tt.addedLength<g.s)kt+=Tt.addedLength,et.c=!1;else if(kt>g.e){et.c=!1;break}else g.s<=kt&&g.e>=kt+Tt.addedLength?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[ft],ct[ut].v[ft],et,jt,Kt),Kt=!1):(Ft=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[ft],ct[ut].o[ft-1],ct[ut].i[ft],(g.s-kt)/Tt.addedLength,(g.e-kt)/Tt.addedLength,Rt[ft-1]),this.addSegmentFromArray(Ft,et,jt,Kt),Kt=!1,et.c=!1),kt+=Tt.addedLength,jt+=1;if(ct[ut].c&&Rt.length){if(Tt=Rt[ft-1],kt<=g.e){var Bt=Rt[ft-1].addedLength;g.s<=kt&&g.e>=kt+Bt?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[0],ct[ut].v[0],et,jt,Kt),Kt=!1):(Ft=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[0],ct[ut].o[ft-1],ct[ut].i[0],(g.s-kt)/Bt,(g.e-kt)/Bt,Rt[ft-1]),this.addSegmentFromArray(Ft,et,jt,Kt),Kt=!1,et.c=!1)}else et.c=!1;kt+=Tt.addedLength,jt+=1}if(et._length&&(et.setXYAt(et.v[zt][0],et.v[zt][1],"i",zt),et.setXYAt(et.v[et._length-1][0],et.v[et._length-1][1],"o",et._length-1)),kt>g.e)break;ut<dt-1&&(et=shapePool.newElement(),Kt=!0,$t.push(et),jt=0)}return $t};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(it,g){var et=g/100,ot=[0,0],ct=it._length,ut=0;for(ut=0;ut<ct;ut+=1)ot[0]+=it.v[ut][0],ot[1]+=it.v[ut][1];ot[0]/=ct,ot[1]/=ct;var dt=shapePool.newElement();dt.c=it.c;var ft,St,kt,Tt,jt,Rt;for(ut=0;ut<ct;ut+=1)ft=it.v[ut][0]+(ot[0]-it.v[ut][0])*et,St=it.v[ut][1]+(ot[1]-it.v[ut][1])*et,kt=it.o[ut][0]+(ot[0]-it.o[ut][0])*-et,Tt=it.o[ut][1]+(ot[1]-it.o[ut][1])*-et,jt=it.i[ut][0]+(ot[0]-it.i[ut][0])*-et,Rt=it.i[ut][1]+(ot[1]-it.i[ut][1])*-et,dt.setTripleAt(ft,St,kt,Tt,jt,Rt,ut);return dt},PuckerAndBloatModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var it=[0,0];function g(St){var kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||kt,this.a&&St.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&St.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&St.skewFromAxis(-this.sk.v,this.sa.v),this.r?St.rotate(-this.r.v):St.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?St.translate(this.px.v,this.py.v,-this.pz.v):St.translate(this.px.v,this.py.v,0):St.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function et(St){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||St){var kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Tt,jt;if(kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Tt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/kt,0),jt=this.p.getValueAtTime(this.p.keyframes[0].t/kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Tt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/kt,0),jt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/kt,0)):(Tt=this.p.pv,jt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Tt=[],jt=[];var Rt=this.px,Ft=this.py;Rt._caching.lastFrame+Rt.offsetTime<=Rt.keyframes[0].t?(Tt[0]=Rt.getValueAtTime((Rt.keyframes[0].t+.01)/kt,0),Tt[1]=Ft.getValueAtTime((Ft.keyframes[0].t+.01)/kt,0),jt[0]=Rt.getValueAtTime(Rt.keyframes[0].t/kt,0),jt[1]=Ft.getValueAtTime(Ft.keyframes[0].t/kt,0)):Rt._caching.lastFrame+Rt.offsetTime>=Rt.keyframes[Rt.keyframes.length-1].t?(Tt[0]=Rt.getValueAtTime(Rt.keyframes[Rt.keyframes.length-1].t/kt,0),Tt[1]=Ft.getValueAtTime(Ft.keyframes[Ft.keyframes.length-1].t/kt,0),jt[0]=Rt.getValueAtTime((Rt.keyframes[Rt.keyframes.length-1].t-.01)/kt,0),jt[1]=Ft.getValueAtTime((Ft.keyframes[Ft.keyframes.length-1].t-.01)/kt,0)):(Tt=[Rt.pv,Ft.pv],jt[0]=Rt.getValueAtTime((Rt._caching.lastFrame+Rt.offsetTime-.01)/kt,Rt.offsetTime),jt[1]=Ft.getValueAtTime((Ft._caching.lastFrame+Ft.offsetTime-.01)/kt,Ft.offsetTime))}else jt=it,Tt=jt;this.v.rotate(-Math.atan2(Tt[1]-jt[1],Tt[0]-jt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ot(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ct(){}function ut(St){this._addDynamicProperty(St),this.elem.addDynamicProperty(St),this._isDirty=!0}function dt(St,kt,Tt){if(this.elem=St,this.frameId=-1,this.propType="transform",this.data=kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Tt||St),kt.p&&kt.p.s?(this.px=PropertyFactory.getProp(St,kt.p.x,0,0,this),this.py=PropertyFactory.getProp(St,kt.p.y,0,0,this),kt.p.z&&(this.pz=PropertyFactory.getProp(St,kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(St,kt.p||{k:[0,0,0]},1,0,this),kt.rx){if(this.rx=PropertyFactory.getProp(St,kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(St,kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(St,kt.rz,0,degToRads,this),kt.or.k[0].ti){var jt,Rt=kt.or.k.length;for(jt=0;jt<Rt;jt+=1)kt.or.k[jt].to=null,kt.or.k[jt].ti=null}this.or=PropertyFactory.getProp(St,kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(St,kt.r||{k:0},0,degToRads,this);kt.sk&&(this.sk=PropertyFactory.getProp(St,kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(St,kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(St,kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(St,kt.s||{k:[100,100,100]},1,.01,this),kt.o?this.o=PropertyFactory.getProp(St,kt.o,0,.01,St):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}dt.prototype={applyToMatrix:g,getValue:et,precalculateMatrix:ot,autoOrient:ct},extendPrototype([DynamicPropertyContainer],dt),dt.prototype.addDynamicProperty=ut,dt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ft(St,kt,Tt){return new dt(St,kt,Tt)}return{getTransformProperty:ft}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(it,g.c,0,null,this),this.o=PropertyFactory.getProp(it,g.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(it,g.tr,this),this.so=PropertyFactory.getProp(it,g.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(it,g.tr.eo,0,.01,this),this.data=g,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(it,g,et,ot,ct,ut){var dt=ut?-1:1,ft=ot.s.v[0]+(1-ot.s.v[0])*(1-ct),St=ot.s.v[1]+(1-ot.s.v[1])*(1-ct);it.translate(ot.p.v[0]*dt*ct,ot.p.v[1]*dt*ct,ot.p.v[2]),g.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),g.rotate(-ot.r.v*dt*ct),g.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2]),et.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),et.scale(ut?1/ft:ft,ut?1/St:St),et.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])},RepeaterModifier.prototype.init=function(it,g,et,ot){for(this.elem=it,this.arr=g,this.pos=et,this.elemsData=ot,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g[et]);et>0;)et-=1,this._elements.unshift(g[et]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g]._processed=!1,it[g].ty==="gr"&&this.resetElements(it[g].it)},RepeaterModifier.prototype.cloneElements=function(it){var g=JSON.parse(JSON.stringify(it));return this.resetElements(g),g},RepeaterModifier.prototype.changeGroupRender=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]._render=g,it[et].ty==="gr"&&this.changeGroupRender(it[et].it,g)},RepeaterModifier.prototype.processShapes=function(it){var g,et,ot,ct,ut,dt=!1;if(this._mdf||it){var ft=Math.ceil(this.c.v);if(this._groups.length<ft){for(;this._groups.length<ft;){var St={it:this.cloneElements(this._elements),ty:"gr"};St.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,St),this._groups.splice(0,0,St),this._currentCopies+=1}this.elem.reloadShapes(),dt=!0}ut=0;var kt;for(ot=0;ot<=this._groups.length-1;ot+=1){if(kt=ut<ft,this._groups[ot]._render=kt,this.changeGroupRender(this._groups[ot].it,kt),!kt){var Tt=this.elemsData[ot].it,jt=Tt[Tt.length-1];jt.transform.op.v!==0?(jt.transform.op._mdf=!0,jt.transform.op.v=0):jt.transform.op._mdf=!1}ut+=1}this._currentCopies=ft;var Rt=this.o.v,Ft=Rt%1,$t=Rt>0?Math.floor(Rt):Math.ceil(Rt),zt=this.pMatrix.props,Kt=this.rMatrix.props,Bt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ut=0;if(Rt>0){for(;Ut<$t;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ut+=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Ft,!1),Ut+=Ft)}else if(Rt<0){for(;Ut>$t;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ut-=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Ft,!0),Ut-=Ft)}ot=this.data.m===1?0:this._currentCopies-1,ct=this.data.m===1?1:-1,ut=this._currentCopies;for(var Jt,en;ut;){if(g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,en=et.length,g[g.length-1].transform.mProps._mdf=!0,g[g.length-1].transform.op._mdf=!0,g[g.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ot/(this._currentCopies-1)),Ut!==0){for((ot!==0&&ct===1||ot!==this._currentCopies-1&&ct===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5],Kt[6],Kt[7],Kt[8],Kt[9],Kt[10],Kt[11],Kt[12],Kt[13],Kt[14],Kt[15]),this.matrix.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6],Bt[7],Bt[8],Bt[9],Bt[10],Bt[11],Bt[12],Bt[13],Bt[14],Bt[15]),this.matrix.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6],zt[7],zt[8],zt[9],zt[10],zt[11],zt[12],zt[13],zt[14],zt[15]),Jt=0;Jt<en;Jt+=1)et[Jt]=this.matrix.props[Jt];this.matrix.reset()}else for(this.matrix.reset(),Jt=0;Jt<en;Jt+=1)et[Jt]=this.matrix.props[Jt];Ut+=1,ut-=1,ot+=ct}}else for(ut=this._currentCopies,ot=0,ct=1;ut;)g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,g[g.length-1].transform.mProps._mdf=!1,g[g.length-1].transform.op._mdf=!1,ut-=1,ot+=ct;return dt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(it,g.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(it,g){var et=shapePool.newElement();et.c=it.c;var ot,ct=it._length,ut,dt,ft,St,kt,Tt,jt=0,Rt,Ft,$t,zt,Kt,Bt;for(ot=0;ot<ct;ot+=1)ut=it.v[ot],ft=it.o[ot],dt=it.i[ot],ut[0]===ft[0]&&ut[1]===ft[1]&&ut[0]===dt[0]&&ut[1]===dt[1]?(ot===0||ot===ct-1)&&!it.c?(et.setTripleAt(ut[0],ut[1],ft[0],ft[1],dt[0],dt[1],jt),jt+=1):(ot===0?St=it.v[ct-1]:St=it.v[ot-1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Kt=ut[0]+(St[0]-ut[0])*Tt,Rt=Kt,Bt=ut[1]-(ut[1]-St[1])*Tt,Ft=Bt,$t=Rt-(Rt-ut[0])*roundCorner,zt=Ft-(Ft-ut[1])*roundCorner,et.setTripleAt(Rt,Ft,$t,zt,Kt,Bt,jt),jt+=1,ot===ct-1?St=it.v[0]:St=it.v[ot+1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,$t=ut[0]+(St[0]-ut[0])*Tt,Rt=$t,zt=ut[1]+(St[1]-ut[1])*Tt,Ft=zt,Kt=Rt-(Rt-ut[0])*roundCorner,Bt=Ft-(Ft-ut[1])*roundCorner,et.setTripleAt(Rt,Ft,$t,zt,Kt,Bt,jt),jt+=1):(et.setTripleAt(it.v[ot][0],it.v[ot][1],it.o[ot][0],it.o[ot][1],it.i[ot][0],it.i[ot][1],jt),jt+=1);return et},RoundCornersModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.rd.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(it,g){return Math.abs(it-g)*1e5<=Math.min(Math.abs(it),Math.abs(g))}function floatZero(it){return Math.abs(it)<=1e-5}function lerp(it,g,et){return it*(1-et)+g*et}function lerpPoint(it,g,et){return[lerp(it[0],g[0],et),lerp(it[1],g[1],et)]}function quadRoots(it,g,et){if(it===0)return[];var ot=g*g-4*it*et;if(ot<0)return[];var ct=-g/(2*it);if(ot===0)return[ct];var ut=Math.sqrt(ot)/(2*it);return[ct-ut,ct+ut]}function polynomialCoefficients(it,g,et,ot){return[-it+3*g-3*et+ot,3*it-6*g+3*et,-3*it+3*g,it]}function singlePoint(it){return new PolynomialBezier(it,it,it,it,!1)}function PolynomialBezier(it,g,et,ot,ct){ct&&pointEqual(it,g)&&(g=lerpPoint(it,ot,1/3)),ct&&pointEqual(et,ot)&&(et=lerpPoint(it,ot,2/3));var ut=polynomialCoefficients(it[0],g[0],et[0],ot[0]),dt=polynomialCoefficients(it[1],g[1],et[1],ot[1]);this.a=[ut[0],dt[0]],this.b=[ut[1],dt[1]],this.c=[ut[2],dt[2]],this.d=[ut[3],dt[3]],this.points=[it,g,et,ot]}PolynomialBezier.prototype.point=function(it){return[((this.a[0]*it+this.b[0])*it+this.c[0])*it+this.d[0],((this.a[1]*it+this.b[1])*it+this.c[1])*it+this.d[1]]},PolynomialBezier.prototype.derivative=function(it){return[(3*it*this.a[0]+2*this.b[0])*it+this.c[0],(3*it*this.a[1]+2*this.b[1])*it+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(it){var g=this.derivative(it);return Math.atan2(g[1],g[0])},PolynomialBezier.prototype.normalAngle=function(it){var g=this.derivative(it);return Math.atan2(g[0],g[1])},PolynomialBezier.prototype.inflectionPoints=function(){var it=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(it))return[];var g=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/it,et=g*g-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/it;if(et<0)return[];var ot=Math.sqrt(et);return floatZero(ot)?ot>0&&ot<1?[g]:[]:[g-ot,g+ot].filter(function(ct){return ct>0&&ct<1})},PolynomialBezier.prototype.split=function(it){if(it<=0)return[singlePoint(this.points[0]),this];if(it>=1)return[this,singlePoint(this.points[this.points.length-1])];var g=lerpPoint(this.points[0],this.points[1],it),et=lerpPoint(this.points[1],this.points[2],it),ot=lerpPoint(this.points[2],this.points[3],it),ct=lerpPoint(g,et,it),ut=lerpPoint(et,ot,it),dt=lerpPoint(ct,ut,it);return[new PolynomialBezier(this.points[0],g,ct,dt,!0),new PolynomialBezier(dt,ut,ot,this.points[3],!0)]};function extrema(it,g){var et=it.points[0][g],ot=it.points[it.points.length-1][g];if(et>ot){var ct=ot;ot=et,et=ct}for(var ut=quadRoots(3*it.a[g],2*it.b[g],it.c[g]),dt=0;dt<ut.length;dt+=1)if(ut[dt]>0&&ut[dt]<1){var ft=it.point(ut[dt])[g];ft<et?et=ft:ft>ot&&(ot=ft)}return{min:et,max:ot}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var it=this.bounds();return{left:it.x.min,right:it.x.max,top:it.y.min,bottom:it.y.max,width:it.x.max-it.x.min,height:it.y.max-it.y.min,cx:(it.x.max+it.x.min)/2,cy:(it.y.max+it.y.min)/2}};function intersectData(it,g,et){var ot=it.boundingBox();return{cx:ot.cx,cy:ot.cy,width:ot.width,height:ot.height,bez:it,t:(g+et)/2,t1:g,t2:et}}function splitData(it){var g=it.bez.split(.5);return[intersectData(g[0],it.t1,it.t),intersectData(g[1],it.t,it.t2)]}function boxIntersect(it,g){return Math.abs(it.cx-g.cx)*2<it.width+g.width&&Math.abs(it.cy-g.cy)*2<it.height+g.height}function intersectsImpl(it,g,et,ot,ct,ut){if(boxIntersect(it,g)){if(et>=ut||it.width<=ot&&it.height<=ot&&g.width<=ot&&g.height<=ot){ct.push([it.t,g.t]);return}var dt=splitData(it),ft=splitData(g);intersectsImpl(dt[0],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[0],ft[1],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[1],et+1,ot,ct,ut)}}PolynomialBezier.prototype.intersections=function(it,g,et){g===void 0&&(g=2),et===void 0&&(et=7);var ot=[];return intersectsImpl(intersectData(this,0,1),intersectData(it,0,1),0,g,ot,et),ot},PolynomialBezier.shapeSegment=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[g],it.o[g],it.i[et],it.v[et],!0)},PolynomialBezier.shapeSegmentInverted=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[et],it.i[et],it.o[g],it.v[g],!0)};function crossProduct(it,g){return[it[1]*g[2]-it[2]*g[1],it[2]*g[0]-it[0]*g[2],it[0]*g[1]-it[1]*g[0]]}function lineIntersection(it,g,et,ot){var ct=[it[0],it[1],1],ut=[g[0],g[1],1],dt=[et[0],et[1],1],ft=[ot[0],ot[1],1],St=crossProduct(crossProduct(ct,ut),crossProduct(dt,ft));return floatZero(St[2])?null:[St[0]/St[2],St[1]/St[2]]}function polarOffset(it,g,et){return[it[0]+Math.cos(g)*et,it[1]-Math.sin(g)*et]}function pointDistance(it,g){return Math.hypot(it[0]-g[0],it[1]-g[1])}function pointEqual(it,g){return floatEqual(it[0],g[0])&&floatEqual(it[1],g[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(it,g.s,0,null,this),this.frequency=PropertyFactory.getProp(it,g.r,0,null,this),this.pointsType=PropertyFactory.getProp(it,g.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(it,g,et,ot,ct,ut,dt){var ft=et-Math.PI/2,St=et+Math.PI/2,kt=g[0]+Math.cos(et)*ot*ct,Tt=g[1]-Math.sin(et)*ot*ct;it.setTripleAt(kt,Tt,kt+Math.cos(ft)*ut,Tt-Math.sin(ft)*ut,kt+Math.cos(St)*dt,Tt-Math.sin(St)*dt,it.length())}function getPerpendicularVector(it,g){var et=[g[0]-it[0],g[1]-it[1]],ot=-Math.PI*.5,ct=[Math.cos(ot)*et[0]-Math.sin(ot)*et[1],Math.sin(ot)*et[0]+Math.cos(ot)*et[1]];return ct}function getProjectingAngle(it,g){var et=g===0?it.length()-1:g-1,ot=(g+1)%it.length(),ct=it.v[et],ut=it.v[ot],dt=getPerpendicularVector(ct,ut);return Math.atan2(0,1)-Math.atan2(dt[1],dt[0])}function zigZagCorner(it,g,et,ot,ct,ut,dt){var ft=getProjectingAngle(g,et),St=g.v[et%g._length],kt=g.v[et===0?g._length-1:et-1],Tt=g.v[(et+1)%g._length],jt=ut===2?Math.sqrt(Math.pow(St[0]-kt[0],2)+Math.pow(St[1]-kt[1],2)):0,Rt=ut===2?Math.sqrt(Math.pow(St[0]-Tt[0],2)+Math.pow(St[1]-Tt[1],2)):0;setPoint(it,g.v[et%g._length],ft,dt,ot,Rt/((ct+1)*2),jt/((ct+1)*2))}function zigZagSegment(it,g,et,ot,ct,ut){for(var dt=0;dt<ot;dt+=1){var ft=(dt+1)/(ot+1),St=ct===2?Math.sqrt(Math.pow(g.points[3][0]-g.points[0][0],2)+Math.pow(g.points[3][1]-g.points[0][1],2)):0,kt=g.normalAngle(ft),Tt=g.point(ft);setPoint(it,Tt,kt,ut,et,St/((ot+1)*2),St/((ot+1)*2)),ut=-ut}return ut}ZigZagModifier.prototype.processPath=function(it,g,et,ot){var ct=it._length,ut=shapePool.newElement();if(ut.c=it.c,it.c||(ct-=1),ct===0)return ut;var dt=-1,ft=PolynomialBezier.shapeSegment(it,0);zigZagCorner(ut,it,0,g,et,ot,dt);for(var St=0;St<ct;St+=1)dt=zigZagSegment(ut,ft,g,et,ot,-dt),St===ct-1&&!it.c?ft=null:ft=PolynomialBezier.shapeSegment(it,(St+1)%ct),zigZagCorner(ut,it,St+1,g,et,ot,dt);return ut},ZigZagModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amplitude.v,ft=Math.max(0,Math.round(this.frequency.v)),St=this.pointsType.v;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,ft,St));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(it,g,et){var ot=Math.atan2(g[0]-it[0],g[1]-it[1]);return[polarOffset(it,ot,et),polarOffset(g,ot,et)]}function offsetSegment(it,g){var et,ot,ct,ut,dt,ft,St;St=linearOffset(it.points[0],it.points[1],g),et=St[0],ot=St[1],St=linearOffset(it.points[1],it.points[2],g),ct=St[0],ut=St[1],St=linearOffset(it.points[2],it.points[3],g),dt=St[0],ft=St[1];var kt=lineIntersection(et,ot,ct,ut);kt===null&&(kt=ot);var Tt=lineIntersection(dt,ft,ct,ut);return Tt===null&&(Tt=dt),new PolynomialBezier(et,kt,Tt,ft)}function joinLines(it,g,et,ot,ct){var ut=g.points[3],dt=et.points[0];if(ot===3||pointEqual(ut,dt))return ut;if(ot===2){var ft=-g.tangentAngle(1),St=-et.tangentAngle(0)+Math.PI,kt=lineIntersection(ut,polarOffset(ut,ft+Math.PI/2,100),dt,polarOffset(dt,ft+Math.PI/2,100)),Tt=kt?pointDistance(kt,ut):pointDistance(ut,dt)/2,jt=polarOffset(ut,ft,2*Tt*roundCorner);return it.setXYAt(jt[0],jt[1],"o",it.length()-1),jt=polarOffset(dt,St,2*Tt*roundCorner),it.setTripleAt(dt[0],dt[1],dt[0],dt[1],jt[0],jt[1],it.length()),dt}var Rt=pointEqual(ut,g.points[2])?g.points[0]:g.points[2],Ft=pointEqual(dt,et.points[1])?et.points[3]:et.points[1],$t=lineIntersection(Rt,ut,dt,Ft);return $t&&pointDistance($t,ut)<ct?(it.setTripleAt($t[0],$t[1],$t[0],$t[1],$t[0],$t[1],it.length()),$t):ut}function getIntersection(it,g){var et=it.intersections(g);return et.length&&floatEqual(et[0][0],1)&&et.shift(),et.length?et[0]:null}function pruneSegmentIntersection(it,g){var et=it.slice(),ot=g.slice(),ct=getIntersection(it[it.length-1],g[0]);return ct&&(et[it.length-1]=it[it.length-1].split(ct[0])[0],ot[0]=g[0].split(ct[1])[1]),it.length>1&&g.length>1&&(ct=getIntersection(it[0],g[g.length-1]),ct)?[[it[0].split(ct[0])[0]],[g[g.length-1].split(ct[1])[1]]]:[et,ot]}function pruneIntersections(it){for(var g,et=1;et<it.length;et+=1)g=pruneSegmentIntersection(it[et-1],it[et]),it[et-1]=g[0],it[et]=g[1];return it.length>1&&(g=pruneSegmentIntersection(it[it.length-1],it[0]),it[it.length-1]=g[0],it[0]=g[1]),it}function offsetSegmentSplit(it,g){var et=it.inflectionPoints(),ot,ct,ut,dt;if(et.length===0)return[offsetSegment(it,g)];if(et.length===1||floatEqual(et[1],1))return ut=it.split(et[0]),ot=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(ct,g)];ut=it.split(et[0]),ot=ut[0];var ft=(et[1]-et[0])/(1-et[0]);return ut=ut[1].split(ft),dt=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(dt,g),offsetSegment(ct,g)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this.miterLimit=PropertyFactory.getProp(it,g.ml,0,null,this),this.lineJoin=g.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(it,g,et,ot){var ct=shapePool.newElement();ct.c=it.c;var ut=it.length();it.c||(ut-=1);var dt,ft,St,kt=[];for(dt=0;dt<ut;dt+=1)St=PolynomialBezier.shapeSegment(it,dt),kt.push(offsetSegmentSplit(St,g));if(!it.c)for(dt=ut-1;dt>=0;dt-=1)St=PolynomialBezier.shapeSegmentInverted(it,dt),kt.push(offsetSegmentSplit(St,g));kt=pruneIntersections(kt);var Tt=null,jt=null;for(dt=0;dt<kt.length;dt+=1){var Rt=kt[dt];for(jt&&(Tt=joinLines(ct,jt,Rt[0],et,ot)),jt=Rt[Rt.length-1],ft=0;ft<Rt.length;ft+=1)St=Rt[ft],Tt&&pointEqual(St.points[0],Tt)?ct.setXYAt(St.points[1][0],St.points[1][1],"o",ct.length()-1):ct.setTripleAt(St.points[0][0],St.points[0][1],St.points[1][0],St.points[1][1],St.points[0][0],St.points[0][1],ct.length()),ct.setTripleAt(St.points[3][0],St.points[3][1],St.points[3][0],St.points[3][1],St.points[2][0],St.points[2][1],ct.length()),Tt=St.points[3]}return kt.length&&joinLines(ct,jt,kt[0][0],et,ot),ct},OffsetPathModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v,ft=this.miterLimit.v,St=this.lineJoin;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,St,ft));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(it){for(var g=it.fStyle?it.fStyle.split(" "):[],et="normal",ot="normal",ct=g.length,ut,dt=0;dt<ct;dt+=1)switch(ut=g[dt].toLowerCase(),ut){case"italic":ot="italic";break;case"bold":et="700";break;case"black":et="900";break;case"medium":et="500";break;case"regular":case"normal":et="400";break;case"light":case"thin":et="200";break}return{style:ot,weight:it.fWeight||et}}var FontManager=function(){var it=5e3,g={w:0,size:0,shapes:[],data:{shapes:[]}},et=[];et=et.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ot=127988,ct=917631,ut=917601,dt=917626,ft=65039,St=8205,kt=127462,Tt=127487,jt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Rt(hn){var yn=hn.split(","),an,un=yn.length,bn=[];for(an=0;an<un;an+=1)yn[an]!=="sans-serif"&&yn[an]!=="monospace"&&bn.push(yn[an]);return bn.join(",")}function Ft(hn,yn){var an=createTag("span");an.setAttribute("aria-hidden",!0),an.style.fontFamily=yn;var un=createTag("span");un.innerText="giItT1WQy@!-/#",an.style.position="absolute",an.style.left="-10000px",an.style.top="-10000px",an.style.fontSize="300px",an.style.fontVariant="normal",an.style.fontStyle="normal",an.style.fontWeight="normal",an.style.letterSpacing="0",an.appendChild(un),document.body.appendChild(an);var bn=un.offsetWidth;return un.style.fontFamily=Rt(hn)+", "+yn,{node:un,w:bn,parent:an}}function $t(){var hn,yn=this.fonts.length,an,un,bn=yn;for(hn=0;hn<yn;hn+=1)this.fonts[hn].loaded?bn-=1:this.fonts[hn].fOrigin==="n"||this.fonts[hn].origin===0?this.fonts[hn].loaded=!0:(an=this.fonts[hn].monoCase.node,un=this.fonts[hn].monoCase.w,an.offsetWidth!==un?(bn-=1,this.fonts[hn].loaded=!0):(an=this.fonts[hn].sansCase.node,un=this.fonts[hn].sansCase.w,an.offsetWidth!==un&&(bn-=1,this.fonts[hn].loaded=!0)),this.fonts[hn].loaded&&(this.fonts[hn].sansCase.parent.parentNode.removeChild(this.fonts[hn].sansCase.parent),this.fonts[hn].monoCase.parent.parentNode.removeChild(this.fonts[hn].monoCase.parent)));bn!==0&&Date.now()-this.initTime<it?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function zt(hn,yn){var an=document.body&&yn?"svg":"canvas",un,bn=getFontProperties(hn);if(an==="svg"){var pn=createNS("text");pn.style.fontSize="100px",pn.setAttribute("font-family",hn.fFamily),pn.setAttribute("font-style",bn.style),pn.setAttribute("font-weight",bn.weight),pn.textContent="1",hn.fClass?(pn.style.fontFamily="inherit",pn.setAttribute("class",hn.fClass)):pn.style.fontFamily=hn.fFamily,yn.appendChild(pn),un=pn}else{var kn=new OffscreenCanvas(500,500).getContext("2d");kn.font=bn.style+" "+bn.weight+" 100px "+hn.fFamily,un=kn}function _n(Rn){return an==="svg"?(un.textContent=Rn,un.getComputedTextLength()):un.measureText(Rn).width}return{measureText:_n}}function Kt(hn,yn){if(!hn){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=hn.list;return}if(!document.body){this.isLoaded=!0,hn.list.forEach(function(In){In.helper=zt(In),In.cache={}}),this.fonts=hn.list;return}var an=hn.list,un,bn=an.length,pn=bn;for(un=0;un<bn;un+=1){var kn=!0,_n,Rn;if(an[un].loaded=!1,an[un].monoCase=Ft(an[un].fFamily,"monospace"),an[un].sansCase=Ft(an[un].fFamily,"sans-serif"),!an[un].fPath)an[un].loaded=!0,pn-=1;else if(an[un].fOrigin==="p"||an[un].origin===3){if(_n=document.querySelectorAll('style[f-forigin="p"][f-family="'+an[un].fFamily+'"], style[f-origin="3"][f-family="'+an[un].fFamily+'"]'),_n.length>0&&(kn=!1),kn){var Nn=createTag("style");Nn.setAttribute("f-forigin",an[un].fOrigin),Nn.setAttribute("f-origin",an[un].origin),Nn.setAttribute("f-family",an[un].fFamily),Nn.type="text/css",Nn.innerText="@font-face {font-family: "+an[un].fFamily+"; font-style: normal; src: url('"+an[un].fPath+"');}",yn.appendChild(Nn)}}else if(an[un].fOrigin==="g"||an[un].origin===1){for(_n=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Rn=0;Rn<_n.length;Rn+=1)_n[Rn].href.indexOf(an[un].fPath)!==-1&&(kn=!1);if(kn){var Cn=createTag("link");Cn.setAttribute("f-forigin",an[un].fOrigin),Cn.setAttribute("f-origin",an[un].origin),Cn.type="text/css",Cn.rel="stylesheet",Cn.href=an[un].fPath,document.body.appendChild(Cn)}}else if(an[un].fOrigin==="t"||an[un].origin===2){for(_n=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Rn=0;Rn<_n.length;Rn+=1)an[un].fPath===_n[Rn].src&&(kn=!1);if(kn){var Mn=createTag("link");Mn.setAttribute("f-forigin",an[un].fOrigin),Mn.setAttribute("f-origin",an[un].origin),Mn.setAttribute("rel","stylesheet"),Mn.setAttribute("href",an[un].fPath),yn.appendChild(Mn)}}an[un].helper=zt(an[un],yn),an[un].cache={},this.fonts.push(an[un])}pn===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Bt(hn){if(hn){this.chars||(this.chars=[]);var yn,an=hn.length,un,bn=this.chars.length,pn;for(yn=0;yn<an;yn+=1){for(un=0,pn=!1;un<bn;)this.chars[un].style===hn[yn].style&&this.chars[un].fFamily===hn[yn].fFamily&&this.chars[un].ch===hn[yn].ch&&(pn=!0),un+=1;pn||(this.chars.push(hn[yn]),bn+=1)}}}function Ut(hn,yn,an){for(var un=0,bn=this.chars.length;un<bn;){if(this.chars[un].ch===hn&&this.chars[un].style===yn&&this.chars[un].fFamily===an)return this.chars[un];un+=1}return(typeof hn=="string"&&hn.charCodeAt(0)!==13||!hn)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",hn,yn,an)),g}function Jt(hn,yn,an){var un=this.getFontByName(yn),bn=hn;if(!un.cache[bn]){var pn=un.helper;if(hn===" "){var kn=pn.measureText("|"+hn+"|"),_n=pn.measureText("||");un.cache[bn]=(kn-_n)/100}else un.cache[bn]=pn.measureText(hn)/100}return un.cache[bn]*an}function en(hn){for(var yn=0,an=this.fonts.length;yn<an;){if(this.fonts[yn].fName===hn)return this.fonts[yn];yn+=1}return this.fonts[0]}function tn(hn){var yn=0,an=hn.charCodeAt(0);if(an>=55296&&an<=56319){var un=hn.charCodeAt(1);un>=56320&&un<=57343&&(yn=(an-55296)*1024+un-56320+65536)}return yn}function nn(hn,yn){var an=hn.toString(16)+yn.toString(16);return jt.indexOf(an)!==-1}function rn(hn){return hn===St}function on(hn){return hn===ft}function dn(hn){var yn=tn(hn);return yn>=kt&&yn<=Tt}function cn(hn){return dn(hn.substr(0,2))&&dn(hn.substr(2,2))}function fn(hn){return et.indexOf(hn)!==-1}function mn(hn,yn){var an=tn(hn.substr(yn,2));if(an!==ot)return!1;var un=0;for(yn+=2;un<5;){if(an=tn(hn.substr(yn,2)),an<ut||an>dt)return!1;un+=1,yn+=2}return tn(hn.substr(yn,2))===ct}function En(){this.isLoaded=!0}var Sn=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Sn.isModifier=nn,Sn.isZeroWidthJoiner=rn,Sn.isFlagEmoji=cn,Sn.isRegionalCode=dn,Sn.isCombinedCharacter=fn,Sn.isRegionalFlag=mn,Sn.isVariationSelector=on,Sn.BLACK_FLAG_CODE_POINT=ot;var wn={addChars:Bt,addFonts:Kt,getCharData:Ut,getFontByName:en,measureText:Jt,checkLoadedFonts:$t,setIsLoaded:En};return Sn.prototype=wn,Sn}();function SlotManager(it){this.animationData=it}SlotManager.prototype.getProp=function(it){return this.animationData.slots&&this.animationData.slots[it.sid]?Object.assign(it,this.animationData.slots[it.sid].p):it};function slotFactory(it){return new SlotManager(it)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(g){this.renderableComponents.indexOf(g)===-1&&this.renderableComponents.push(g)},removeRenderableComponent:function(g){this.renderableComponents.indexOf(g)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(g),1)},prepareRenderableFrame:function(g){this.checkLayerLimits(g)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(g){this.data.ip-this.data.st<=g&&this.data.op-this.data.st>g?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var g,et=this.renderableComponents.length;for(g=0;g<et;g+=1)this.renderableComponents[g].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var it={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(g){return it[g]||""}}();function SliderEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function AngleEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function ColorEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function PointEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function LayerIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function MaskIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function CheckboxEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function NoValueEffect(){this.p={}}function EffectsManager(it,g){var et=it.ef||[];this.effectElements=[];var ot,ct=et.length,ut;for(ot=0;ot<ct;ot+=1)ut=new GroupEffect(et[ot],g),this.effectElements.push(ut)}function GroupEffect(it,g){this.init(it,g)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(it,g){this.data=it,this.effectElements=[],this.initDynamicPropertyContainer(g);var et,ot=this.data.ef.length,ct,ut=this.data.ef;for(et=0;et<ot;et+=1){switch(ct=null,ut[et].ty){case 0:ct=new SliderEffect(ut[et],g,this);break;case 1:ct=new AngleEffect(ut[et],g,this);break;case 2:ct=new ColorEffect(ut[et],g,this);break;case 3:ct=new PointEffect(ut[et],g,this);break;case 4:case 7:ct=new CheckboxEffect(ut[et],g,this);break;case 10:ct=new LayerIndexEffect(ut[et],g,this);break;case 11:ct=new MaskIndexEffect(ut[et],g,this);break;case 5:ct=new EffectsManager(ut[et],g);break;default:ct=new NoValueEffect(ut[et]);break}ct&&this.effectElements.push(ct)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var g=0,et=this.data.masksProperties.length;g<et;){if(this.data.masksProperties[g].mode!=="n"&&this.data.masksProperties[g].cl!==!1)return!0;g+=1}return!1},initExpressions:function(){var g=getExpressionInterfaces();if(g){var et=g("layer"),ot=g("effects"),ct=g("shape"),ut=g("text"),dt=g("comp");this.layerInterface=et(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ft=ot.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ft),this.data.ty===0||this.data.xt?this.compInterface=dt(this):this.data.ty===4?(this.layerInterface.shapeInterface=ct(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ut(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var g=getBlendMode(this.data.bm),et=this.baseElement||this.layerElement;et.style["mix-blend-mode"]=g},initBaseData:function(g,et,ot){this.globalData=et,this.comp=ot,this.data=g,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(g,et){var ot,ct=this.dynamicProperties.length;for(ot=0;ot<ct;ot+=1)(et||this._isParent&&this.dynamicProperties[ot].propType==="transform")&&(this.dynamicProperties[ot].getValue(),this.dynamicProperties[ot]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&this.dynamicProperties.push(g)}};function FootageElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.footageData=g.imageLoader.getAsset(this.assetData),this.initBaseData(it,g,et)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var it=getExpressionInterfaces();if(it){var g=it("footage");this.layerInterface=g(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.initBaseData(it,g,et),this._isPlaying=!1,this._canPlay=!1;var ot=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ot),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,it.au&&it.au.lv?it.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(it){if(this.prepareRenderableFrame(it,!0),this.prepareProperties(it,!0),this.tm._placeholder)this._currentTime=it/this.data.sr;else{var g=this.tm.v;this._currentTime=g}this._volume=this.lv.v[0];var et=this._volume*this._volumeMultiplier;this._previousVolume!==et&&(this._previousVolume=et,this.audio.volume(et))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(it){this.audio.rate(it)},AudioElement.prototype.volume=function(it){this._volumeMultiplier=it,this._previousVolume=it*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(it){var g,et=this.layers.length,ot;for(this.completeLayers=!0,g=et-1;g>=0;g-=1)this.elements[g]||(ot=this.layers[g],ot.ip-ot.st<=it-this.layers[g].st&&ot.op-ot.st>it-this.layers[g].st&&this.buildItem(g)),this.completeLayers=this.elements[g]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(it){switch(it.ty){case 2:return this.createImage(it);case 0:return this.createComp(it);case 1:return this.createSolid(it);case 3:return this.createNull(it);case 4:return this.createShape(it);case 5:return this.createText(it);case 6:return this.createAudio(it);case 13:return this.createCamera(it);case 15:return this.createFootage(it);default:return this.createNull(it)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(it){return new AudioElement(it,this.globalData,this)},BaseRenderer.prototype.createFootage=function(it){return new FootageElement(it,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.buildItem(it);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(it){this.completeLayers=!1;var g,et=it.length,ot,ct=this.layers.length;for(g=0;g<et;g+=1)for(ot=0;ot<ct;){if(this.layers[ot].id===it[g].id){this.layers[ot]=it[g];break}ot+=1}},BaseRenderer.prototype.setProjectInterface=function(it){this.globalData.projectInterface=it},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(it,g,et){for(var ot=this.elements,ct=this.layers,ut=0,dt=ct.length;ut<dt;)ct[ut].ind==g&&(!ot[ut]||ot[ut]===!0?(this.buildItem(ut),this.addPendingElement(it)):(et.push(ot[ut]),ot[ut].setAsParent(),ct[ut].parent!==void 0?this.buildElementParenting(it,ct[ut].parent,et):it.setHierarchy(et))),ut+=1},BaseRenderer.prototype.addPendingElement=function(it){this.pendingElements.push(it)},BaseRenderer.prototype.searchExtraCompositions=function(it){var g,et=it.length;for(g=0;g<et;g+=1)if(it[g].xt){var ot=this.createComp(it[g]);ot.initExpressions(),this.globalData.projectInterface.registerComposition(ot)}},BaseRenderer.prototype.getElementById=function(it){var g,et=this.elements.length;for(g=0;g<et;g+=1)if(this.elements[g].data.ind===it)return this.elements[g];return null},BaseRenderer.prototype.getElementByPath=function(it){var g=it.shift(),et;if(typeof g=="number")et=this.elements[g];else{var ot,ct=this.elements.length;for(ot=0;ot<ct;ot+=1)if(this.elements[ot].data.nm===g){et=this.elements[ot];break}}return it.length===0?et:et.getElementByPath(it)},BaseRenderer.prototype.setupGlobalData=function(it,g){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(it),this.globalData.fontManager.addChars(it.chars),this.globalData.fontManager.addFonts(it.fonts,g),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=it.fr,this.globalData.nm=it.nm,this.globalData.compSize={w:it.w,h:it.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var g=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:g,localMat:g,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var g,et=this.finalTransform.mat,ot=0,ct=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ot<ct;){if(this.hierarchy[ot].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ot+=1}if(this.finalTransform._matMdf)for(g=this.finalTransform.mProp.v.props,et.cloneFromProps(g),ot=0;ot<ct;ot+=1)et.multiply(this.hierarchy[ot].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var g=0,et=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;g<et;)this.localTransforms[g]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[g]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),g+=1;if(this.finalTransform._localMatMdf){var ot=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ot),g=1;g<et;g+=1){var ct=this.localTransforms[g].matrix;ot.multiply(ct)}ot.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ut=this.finalTransform.localOpacity;for(g=0;g<et;g+=1)ut*=this.localTransforms[g].opacity*.01;this.finalTransform.localOpacity=ut}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var g=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(g.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var et=0,ot=g.length;for(et=0;et<ot;et+=1)this.localTransforms.push(g[et])}}},globalToLocal:function(g){var et=[];et.push(this.finalTransform);for(var ot=!0,ct=this.comp;ot;)ct.finalTransform?(ct.data.hasMask&&et.splice(0,0,ct.finalTransform),ct=ct.comp):ot=!1;var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)ft=et[ut].mat.applyToPointArray(0,0,0),g=[g[0]-ft[0],g[1]-ft[1],0];return g},mHelper:new Matrix};function MaskElement(it,g,et){this.data=it,this.element=g,this.globalData=et,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ot=this.globalData.defs,ct,ut=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ut),this.solidPath="";var dt,ft=this.masksProperties,St=0,kt=[],Tt,jt,Rt=createElementID(),Ft,$t,zt,Kt,Bt="clipPath",Ut="clip-path";for(ct=0;ct<ut;ct+=1)if((ft[ct].mode!=="a"&&ft[ct].mode!=="n"||ft[ct].inv||ft[ct].o.k!==100||ft[ct].o.x)&&(Bt="mask",Ut="mask"),(ft[ct].mode==="s"||ft[ct].mode==="i")&&St===0?(Ft=createNS("rect"),Ft.setAttribute("fill","#ffffff"),Ft.setAttribute("width",this.element.comp.data.w||0),Ft.setAttribute("height",this.element.comp.data.h||0),kt.push(Ft)):Ft=null,dt=createNS("path"),ft[ct].mode==="n")this.viewData[ct]={op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),elem:dt,lastPath:""},ot.appendChild(dt);else{St+=1,dt.setAttribute("fill",ft[ct].mode==="s"?"#000000":"#ffffff"),dt.setAttribute("clip-rule","nonzero");var Jt;if(ft[ct].x.k!==0?(Bt="mask",Ut="mask",Kt=PropertyFactory.getProp(this.element,ft[ct].x,0,null,this.element),Jt=createElementID(),$t=createNS("filter"),$t.setAttribute("id",Jt),zt=createNS("feMorphology"),zt.setAttribute("operator","erode"),zt.setAttribute("in","SourceGraphic"),zt.setAttribute("radius","0"),$t.appendChild(zt),ot.appendChild($t),dt.setAttribute("stroke",ft[ct].mode==="s"?"#000000":"#ffffff")):(zt=null,Kt=null),this.storedData[ct]={elem:dt,x:Kt,expan:zt,lastPath:"",lastOperator:"",filterId:Jt,lastRadius:0},ft[ct].mode==="i"){jt=kt.length;var en=createNS("g");for(Tt=0;Tt<jt;Tt+=1)en.appendChild(kt[Tt]);var tn=createNS("mask");tn.setAttribute("mask-type","alpha"),tn.setAttribute("id",Rt+"_"+St),tn.appendChild(dt),ot.appendChild(tn),en.setAttribute("mask","url("+getLocationHref()+"#"+Rt+"_"+St+")"),kt.length=0,kt.push(en)}else kt.push(dt);ft[ct].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ct]={elem:dt,lastPath:"",op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),invRect:Ft},this.viewData[ct].prop.k||this.drawPath(ft[ct],this.viewData[ct].prop.v,this.viewData[ct])}for(this.maskElement=createNS(Bt),ut=kt.length,ct=0;ct<ut;ct+=1)this.maskElement.appendChild(kt[ct]);St>0&&(this.maskElement.setAttribute("id",Rt),this.element.maskedElement.setAttribute(Ut,"url("+getLocationHref()+"#"+Rt+")"),ot.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(it){return this.viewData[it].prop},MaskElement.prototype.renderFrame=function(it){var g=this.element.finalTransform.mat,et,ot=this.masksProperties.length;for(et=0;et<ot;et+=1)if((this.viewData[et].prop._mdf||it)&&this.drawPath(this.masksProperties[et],this.viewData[et].prop.v,this.viewData[et]),(this.viewData[et].op._mdf||it)&&this.viewData[et].elem.setAttribute("fill-opacity",this.viewData[et].op.v),this.masksProperties[et].mode!=="n"&&(this.viewData[et].invRect&&(this.element.finalTransform.mProp._mdf||it)&&this.viewData[et].invRect.setAttribute("transform",g.getInverseMatrix().to2dCSS()),this.storedData[et].x&&(this.storedData[et].x._mdf||it))){var ct=this.storedData[et].expan;this.storedData[et].x.v<0?(this.storedData[et].lastOperator!=="erode"&&(this.storedData[et].lastOperator="erode",this.storedData[et].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[et].filterId+")")),ct.setAttribute("radius",-this.storedData[et].x.v)):(this.storedData[et].lastOperator!=="dilate"&&(this.storedData[et].lastOperator="dilate",this.storedData[et].elem.setAttribute("filter",null)),this.storedData[et].elem.setAttribute("stroke-width",this.storedData[et].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var it="M0,0 ";return it+=" h"+this.globalData.compSize.w,it+=" v"+this.globalData.compSize.h,it+=" h-"+this.globalData.compSize.w,it+=" v-"+this.globalData.compSize.h+" ",it},MaskElement.prototype.drawPath=function(it,g,et){var ot=" M"+g.v[0][0]+","+g.v[0][1],ct,ut;for(ut=g._length,ct=1;ct<ut;ct+=1)ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[ct][0]+","+g.i[ct][1]+" "+g.v[ct][0]+","+g.v[ct][1];if(g.c&&ut>1&&(ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[0][0]+","+g.i[0][1]+" "+g.v[0][0]+","+g.v[0][1]),et.lastPath!==ot){var dt="";et.elem&&(g.c&&(dt=it.inv?this.solidPath+ot:ot),et.elem.setAttribute("d",dt)),et.lastPath=ot}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var it={};it.createFilter=g,it.createAlphaToLuminanceFilter=et;function g(ot,ct){var ut=createNS("filter");return ut.setAttribute("id",ot),ct!==!0&&(ut.setAttribute("filterUnits","objectBoundingBox"),ut.setAttribute("x","0%"),ut.setAttribute("y","0%"),ut.setAttribute("width","100%"),ut.setAttribute("height","100%")),ut}function et(){var ot=createNS("feColorMatrix");return ot.setAttribute("type","matrix"),ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ot}return it}(),featureSupport=function(){var it={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(it.maskType=!1),/firefox/i.test(navigator.userAgent)&&(it.svgLumaHidden=!1),it}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(it){var g,et="SourceGraphic",ot=it.data.ef?it.data.ef.length:0,ct=createElementID(),ut=filtersFactory.createFilter(ct,!0),dt=0;this.filters=[];var ft;for(g=0;g<ot;g+=1){ft=null;var St=it.data.ef[g].ty;if(registeredEffects$1[St]){var kt=registeredEffects$1[St].effect;ft=new kt(ut,it.effectsManager.effectElements[g],it,idPrefix+dt,et),et=idPrefix+dt,registeredEffects$1[St].countsAsEffect&&(dt+=1)}ft&&this.filters.push(ft)}dt&&(it.globalData.defs.appendChild(ut),it.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ct+")")),this.filters.length&&it.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},SVGEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect$1(it,g,et){registeredEffects$1[it]={effect:g,countsAsEffect:et}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var g=null;if(this.data.td){this.matteMasks={};var et=createNS("g");et.setAttribute("id",this.layerId),et.appendChild(this.layerElement),g=et,this.globalData.defs.appendChild(et)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),g=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ot=createNS("clipPath"),ct=createNS("path");ct.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ut=createElementID();if(ot.setAttribute("id",ut),ot.appendChild(ct),this.globalData.defs.appendChild(ot),this.checkMasks()){var dt=createNS("g");dt.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")"),dt.appendChild(this.layerElement),this.transformedElement=dt,g?g.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(g){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[g]){var et=this.layerId+"_"+g,ot,ct,ut,dt;if(g===1||g===3){var ft=createNS("mask");ft.setAttribute("id",et),ft.setAttribute("mask-type",g===3?"luminance":"alpha"),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ut),this.globalData.defs.appendChild(ft),!featureSupport.maskType&&g===1&&(ft.setAttribute("mask-type","luminance"),ot=createElementID(),ct=filtersFactory.createFilter(ot),this.globalData.defs.appendChild(ct),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),dt.appendChild(ut),ft.appendChild(dt),dt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"))}else if(g===2){var St=createNS("mask");St.setAttribute("id",et),St.setAttribute("mask-type","alpha");var kt=createNS("g");St.appendChild(kt),ot=createElementID(),ct=filtersFactory.createFilter(ot);var Tt=createNS("feComponentTransfer");Tt.setAttribute("in","SourceGraphic"),ct.appendChild(Tt);var jt=createNS("feFuncA");jt.setAttribute("type","table"),jt.setAttribute("tableValues","1.0 0.0"),Tt.appendChild(jt),this.globalData.defs.appendChild(ct);var Rt=createNS("rect");Rt.setAttribute("width",this.comp.data.w),Rt.setAttribute("height",this.comp.data.h),Rt.setAttribute("x","0"),Rt.setAttribute("y","0"),Rt.setAttribute("fill","#ffffff"),Rt.setAttribute("opacity","0"),kt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"),kt.appendChild(Rt),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),kt.appendChild(ut),featureSupport.maskType||(St.setAttribute("mask-type","luminance"),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),kt.appendChild(Rt),dt.appendChild(this.layerElement),kt.appendChild(dt)),this.globalData.defs.appendChild(St)}this.matteMasks[g]=et}return this.matteMasks[g]},setMatte:function(g){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+g+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(g){this.hierarchy=g},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var it={initElement:function(et,ot,ct){this.initFrame(),this.initBaseData(et,ot,ct),this.initTransform(et,ot,ct),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var et=this.baseElement||this.layerElement;et.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var et=this.baseElement||this.layerElement;et.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(it)],RenderableDOMElement)})();function IImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.assetData&&this.assetData.sid&&(this.assetData=g.slotManager.getProp(this.assetData)),this.initElement(it,g,et),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(it,g){this.elem=it,this.pos=g}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(g){var et,ot=this.shapeModifiers.length;for(et=0;et<ot;et+=1)this.shapeModifiers[et].addShape(g)},isShapeInAnimatedModifiers:function(g){for(var et=0,ot=this.shapeModifiers.length;et<ot;)if(this.shapeModifiers[et].isAnimatedWithShape(g))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var g,et=this.shapes.length;for(g=0;g<et;g+=1)this.shapes[g].sh.reset();et=this.shapeModifiers.length;var ot;for(g=et-1;g>=0&&(ot=this.shapeModifiers[g].processShapes(this._isFirstFrame),!ot);g-=1);}},searchProcessedElement:function(g){for(var et=this.processedElements,ot=0,ct=et.length;ot<ct;){if(et[ot].elem===g)return et[ot].pos;ot+=1}return 0},addProcessedElement:function(g,et){for(var ot=this.processedElements,ct=ot.length;ct;)if(ct-=1,ot[ct].elem===g){ot[ct].pos=et;return}ot.push(new ProcessedElement(g,et))},prepareFrame:function(g){this.prepareRenderableFrame(g),this.prepareProperties(g,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(it,g,et){this.caches=[],this.styles=[],this.transformers=it,this.lStr="",this.sh=et,this.lvl=g,this._isAnimated=!!et.k;for(var ot=0,ct=it.length;ot<ct;){if(it[ot].mProps.dynamicProperties.length){this._isAnimated=!0;break}ot+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(it,g){this.data=it,this.type=it.ty,this.d="",this.lvl=g,this._mdf=!1,this.closed=it.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(it,g,et,ot){this.elem=it,this.frameId=-1,this.dataProps=createSizedArray(g.length),this.renderer=et,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",g.length?g.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ot);var ct,ut=g.length||0,dt;for(ct=0;ct<ut;ct+=1)dt=PropertyFactory.getProp(it,g[ct].v,0,0,this),this.k=dt.k||this.k,this.dataProps[ct]={n:g[ct].n,p:dt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(it){if(!(this.elem.globalData.frameId===this.frameId&&!it)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||it,this._mdf)){var g=0,et=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),g=0;g<et;g+=1)this.dataProps[g].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[g].p.v:this.dashArray[g]=this.dataProps[g].p.v:this.dashoffset[0]=this.dataProps[g].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.style=et}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(it,g,et){this.data=g,this.c=createTypedArray("uint8c",g.p*4);var ot=g.k.k[0].s?g.k.k[0].s.length-g.p*4:g.k.k.length-g.p*4;this.o=createTypedArray("float32",ot),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ot,this.initDynamicPropertyContainer(et),this.prop=PropertyFactory.getProp(it,g.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(it,g){for(var et=0,ot=this.o.length/2,ct;et<ot;){if(ct=Math.abs(it[et*4]-it[g*4+et*2]),ct>.01)return!1;et+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var it=0,g=this.data.k.k.length;it<g;){if(!this.comparePoints(this.data.k.k[it].s,this.data.p))return!1;it+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(it){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||it){var g,et=this.data.p*4,ot,ct;for(g=0;g<et;g+=1)ot=g%4===0?100:255,ct=Math.round(this.prop.v[g]*ot),this.c[g]!==ct&&(this.c[g]=ct,this._cmdf=!it);if(this.o.length)for(et=this.prop.v.length,g=this.data.p*4;g<et;g+=1)ot=g%2===0?100:1,ct=g%2===0?Math.round(this.prop.v[g]*100):this.prop.v[g],this.o[g-this.data.p*4]!==ct&&(this.o[g-this.data.p*4]=ct,this._omdf=!it);this._mdf=!it}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.initGradientData(it,g,et)}SVGGradientFillStyleData.prototype.initGradientData=function(it,g,et){this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.s=PropertyFactory.getProp(it,g.s,1,null,this),this.e=PropertyFactory.getProp(it,g.e,1,null,this),this.h=PropertyFactory.getProp(it,g.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(it,g.a||{k:0},0,degToRads,this),this.g=new GradientProperty(it,g.g,this),this.style=et,this.stops=[],this.setGradientData(et.pElem,g),this.setGradientOpacity(g,et),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(it,g){var et=createElementID(),ot=createNS(g.t===1?"linearGradient":"radialGradient");ot.setAttribute("id",et),ot.setAttribute("spreadMethod","pad"),ot.setAttribute("gradientUnits","userSpaceOnUse");var ct=[],ut,dt,ft;for(ft=g.g.p*4,dt=0;dt<ft;dt+=4)ut=createNS("stop"),ot.appendChild(ut),ct.push(ut);it.setAttribute(g.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+et+")"),this.gf=ot,this.cst=ct},SVGGradientFillStyleData.prototype.setGradientOpacity=function(it,g){if(this.g._hasOpacity&&!this.g._collapsable){var et,ot,ct,ut=createNS("mask"),dt=createNS("path");ut.appendChild(dt);var ft=createElementID(),St=createElementID();ut.setAttribute("id",St);var kt=createNS(it.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",ft),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse"),ct=it.g.k.k[0].s?it.g.k.k[0].s.length:it.g.k.k.length;var Tt=this.stops;for(ot=it.g.p*4;ot<ct;ot+=2)et=createNS("stop"),et.setAttribute("stop-color","rgb(255,255,255)"),kt.appendChild(et),Tt.push(et);dt.setAttribute(it.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ft+")"),it.ty==="gs"&&(dt.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),dt.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),it.lj===1&&dt.setAttribute("stroke-miterlimit",it.ml)),this.of=kt,this.ms=ut,this.ost=Tt,this.maskId=St,g.msElem=dt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.initGradientData(it,g,et),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(it,g,et){this.transform={mProps:it,op:g,container:et},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(g,et,ot,ct){if(et===0)return"";var ut=g.o,dt=g.i,ft=g.v,St,kt=" M"+ct.applyToPointStringified(ft[0][0],ft[0][1]);for(St=1;St<et;St+=1)kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[St][0],dt[St][1])+" "+ct.applyToPointStringified(ft[St][0],ft[St][1]);return ot&&et&&(kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[0][0],dt[0][1])+" "+ct.applyToPointStringified(ft[0][0],ft[0][1]),kt+="z"),kt},SVGElementsRenderer=function(){var it=new Matrix,g=new Matrix,et={createRenderFunction:ot};function ot(jt){switch(jt.ty){case"fl":return ft;case"gf":return kt;case"gs":return St;case"st":return Tt;case"sh":case"el":case"rc":case"sr":return dt;case"tr":return ct;case"no":return ut;default:return null}}function ct(jt,Rt,Ft){(Ft||Rt.transform.op._mdf)&&Rt.transform.container.setAttribute("opacity",Rt.transform.op.v),(Ft||Rt.transform.mProps._mdf)&&Rt.transform.container.setAttribute("transform",Rt.transform.mProps.v.to2dCSS())}function ut(){}function dt(jt,Rt,Ft){var $t,zt,Kt,Bt,Ut,Jt,en=Rt.styles.length,tn=Rt.lvl,nn,rn,on,dn;for(Jt=0;Jt<en;Jt+=1){if(Bt=Rt.sh._mdf||Ft,Rt.styles[Jt].lvl<tn){for(rn=g.reset(),on=tn-Rt.styles[Jt].lvl,dn=Rt.transformers.length-1;!Bt&&on>0;)Bt=Rt.transformers[dn].mProps._mdf||Bt,on-=1,dn-=1;if(Bt)for(on=tn-Rt.styles[Jt].lvl,dn=Rt.transformers.length-1;on>0;)rn.multiply(Rt.transformers[dn].mProps.v),on-=1,dn-=1}else rn=it;if(nn=Rt.sh.paths,zt=nn._length,Bt){for(Kt="",$t=0;$t<zt;$t+=1)Ut=nn.shapes[$t],Ut&&Ut._length&&(Kt+=buildShapeString(Ut,Ut._length,Ut.c,rn));Rt.caches[Jt]=Kt}else Kt=Rt.caches[Jt];Rt.styles[Jt].d+=jt.hd===!0?"":Kt,Rt.styles[Jt]._mdf=Bt||Rt.styles[Jt]._mdf}}function ft(jt,Rt,Ft){var $t=Rt.style;(Rt.c._mdf||Ft)&&$t.pElem.setAttribute("fill","rgb("+bmFloor(Rt.c.v[0])+","+bmFloor(Rt.c.v[1])+","+bmFloor(Rt.c.v[2])+")"),(Rt.o._mdf||Ft)&&$t.pElem.setAttribute("fill-opacity",Rt.o.v)}function St(jt,Rt,Ft){kt(jt,Rt,Ft),Tt(jt,Rt,Ft)}function kt(jt,Rt,Ft){var $t=Rt.gf,zt=Rt.g._hasOpacity,Kt=Rt.s.v,Bt=Rt.e.v;if(Rt.o._mdf||Ft){var Ut=jt.ty==="gf"?"fill-opacity":"stroke-opacity";Rt.style.pElem.setAttribute(Ut,Rt.o.v)}if(Rt.s._mdf||Ft){var Jt=jt.t===1?"x1":"cx",en=Jt==="x1"?"y1":"cy";$t.setAttribute(Jt,Kt[0]),$t.setAttribute(en,Kt[1]),zt&&!Rt.g._collapsable&&(Rt.of.setAttribute(Jt,Kt[0]),Rt.of.setAttribute(en,Kt[1]))}var tn,nn,rn,on;if(Rt.g._cmdf||Ft){tn=Rt.cst;var dn=Rt.g.c;for(rn=tn.length,nn=0;nn<rn;nn+=1)on=tn[nn],on.setAttribute("offset",dn[nn*4]+"%"),on.setAttribute("stop-color","rgb("+dn[nn*4+1]+","+dn[nn*4+2]+","+dn[nn*4+3]+")")}if(zt&&(Rt.g._omdf||Ft)){var cn=Rt.g.o;for(Rt.g._collapsable?tn=Rt.cst:tn=Rt.ost,rn=tn.length,nn=0;nn<rn;nn+=1)on=tn[nn],Rt.g._collapsable||on.setAttribute("offset",cn[nn*2]+"%"),on.setAttribute("stop-opacity",cn[nn*2+1])}if(jt.t===1)(Rt.e._mdf||Ft)&&($t.setAttribute("x2",Bt[0]),$t.setAttribute("y2",Bt[1]),zt&&!Rt.g._collapsable&&(Rt.of.setAttribute("x2",Bt[0]),Rt.of.setAttribute("y2",Bt[1])));else{var fn;if((Rt.s._mdf||Rt.e._mdf||Ft)&&(fn=Math.sqrt(Math.pow(Kt[0]-Bt[0],2)+Math.pow(Kt[1]-Bt[1],2)),$t.setAttribute("r",fn),zt&&!Rt.g._collapsable&&Rt.of.setAttribute("r",fn)),Rt.e._mdf||Rt.h._mdf||Rt.a._mdf||Ft){fn||(fn=Math.sqrt(Math.pow(Kt[0]-Bt[0],2)+Math.pow(Kt[1]-Bt[1],2)));var mn=Math.atan2(Bt[1]-Kt[1],Bt[0]-Kt[0]),En=Rt.h.v;En>=1?En=.99:En<=-1&&(En=-.99);var Sn=fn*En,wn=Math.cos(mn+Rt.a.v)*Sn+Kt[0],hn=Math.sin(mn+Rt.a.v)*Sn+Kt[1];$t.setAttribute("fx",wn),$t.setAttribute("fy",hn),zt&&!Rt.g._collapsable&&(Rt.of.setAttribute("fx",wn),Rt.of.setAttribute("fy",hn))}}}function Tt(jt,Rt,Ft){var $t=Rt.style,zt=Rt.d;zt&&(zt._mdf||Ft)&&zt.dashStr&&($t.pElem.setAttribute("stroke-dasharray",zt.dashStr),$t.pElem.setAttribute("stroke-dashoffset",zt.dashoffset[0])),Rt.c&&(Rt.c._mdf||Ft)&&$t.pElem.setAttribute("stroke","rgb("+bmFloor(Rt.c.v[0])+","+bmFloor(Rt.c.v[1])+","+bmFloor(Rt.c.v[2])+")"),(Rt.o._mdf||Ft)&&$t.pElem.setAttribute("stroke-opacity",Rt.o.v),(Rt.w._mdf||Ft)&&($t.pElem.setAttribute("stroke-width",Rt.w.v),$t.msElem&&$t.msElem.setAttribute("stroke-width",Rt.w.v))}return et}();function SVGShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(it,g,et),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var it,g=this.shapes.length,et,ot,ct=this.stylesList.length,ut,dt=[],ft=!1;for(ot=0;ot<ct;ot+=1){for(ut=this.stylesList[ot],ft=!1,dt.length=0,it=0;it<g;it+=1)et=this.shapes[it],et.styles.indexOf(ut)!==-1&&(dt.push(et),ft=et._isAnimated||ft);dt.length>1&&ft&&this.setShapesAsAnimated(dt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(it,g){var et,ot=new SVGStyleData(it,g),ct=ot.pElem;if(it.ty==="st")et=new SVGStrokeStyleData(this,it,ot);else if(it.ty==="fl")et=new SVGFillStyleData(this,it,ot);else if(it.ty==="gf"||it.ty==="gs"){var ut=it.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;et=new ut(this,it,ot),this.globalData.defs.appendChild(et.gf),et.maskId&&(this.globalData.defs.appendChild(et.ms),this.globalData.defs.appendChild(et.of),ct.setAttribute("mask","url("+getLocationHref()+"#"+et.maskId+")"))}else it.ty==="no"&&(et=new SVGNoStyleData(this,it,ot));return(it.ty==="st"||it.ty==="gs")&&(ct.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),ct.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),ct.setAttribute("fill-opacity","0"),it.lj===1&&ct.setAttribute("stroke-miterlimit",it.ml)),it.r===2&&ct.setAttribute("fill-rule","evenodd"),it.ln&&ct.setAttribute("id",it.ln),it.cl&&ct.setAttribute("class",it.cl),it.bm&&(ct.style["mix-blend-mode"]=getBlendMode(it.bm)),this.stylesList.push(ot),this.addToAnimatedContents(it,et),et},SVGShapeElement.prototype.createGroupElement=function(it){var g=new ShapeGroupData;return it.ln&&g.gr.setAttribute("id",it.ln),it.cl&&g.gr.setAttribute("class",it.cl),it.bm&&(g.gr.style["mix-blend-mode"]=getBlendMode(it.bm)),g},SVGShapeElement.prototype.createTransformElement=function(it,g){var et=TransformPropertyFactory.getTransformProperty(this,it,this),ot=new SVGTransformData(et,et.o,g);return this.addToAnimatedContents(it,ot),ot},SVGShapeElement.prototype.createShapeElement=function(it,g,et){var ot=4;it.ty==="rc"?ot=5:it.ty==="el"?ot=6:it.ty==="sr"&&(ot=7);var ct=ShapePropertyFactory.getShapeProp(this,it,ot,this),ut=new SVGShapeData(g,et,ct);return this.shapes.push(ut),this.addShapeToModifiers(ut),this.addToAnimatedContents(it,ut),ut},SVGShapeElement.prototype.addToAnimatedContents=function(it,g){for(var et=0,ot=this.animatedContents.length;et<ot;){if(this.animatedContents[et].element===g)return;et+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(it),element:g,data:it})},SVGShapeElement.prototype.setElementStyles=function(it){var g=it.styles,et,ot=this.stylesList.length;for(et=0;et<ot;et+=1)this.stylesList[et].closed||g.push(this.stylesList[et])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(it,g,et,ot,ct,ut,dt){var ft=[].concat(ut),St,kt=it.length-1,Tt,jt,Rt=[],Ft=[],$t,zt,Kt;for(St=kt;St>=0;St-=1){if(Kt=this.searchProcessedElement(it[St]),Kt?g[St]=et[Kt-1]:it[St]._render=dt,it[St].ty==="fl"||it[St].ty==="st"||it[St].ty==="gf"||it[St].ty==="gs"||it[St].ty==="no")Kt?g[St].style.closed=!1:g[St]=this.createStyleElement(it[St],ct),it[St]._render&&g[St].style.pElem.parentNode!==ot&&ot.appendChild(g[St].style.pElem),Rt.push(g[St].style);else if(it[St].ty==="gr"){if(!Kt)g[St]=this.createGroupElement(it[St]);else for(jt=g[St].it.length,Tt=0;Tt<jt;Tt+=1)g[St].prevViewData[Tt]=g[St].it[Tt];this.searchShapes(it[St].it,g[St].it,g[St].prevViewData,g[St].gr,ct+1,ft,dt),it[St]._render&&g[St].gr.parentNode!==ot&&ot.appendChild(g[St].gr)}else it[St].ty==="tr"?(Kt||(g[St]=this.createTransformElement(it[St],ot)),$t=g[St].transform,ft.push($t)):it[St].ty==="sh"||it[St].ty==="rc"||it[St].ty==="el"||it[St].ty==="sr"?(Kt||(g[St]=this.createShapeElement(it[St],ft,ct)),this.setElementStyles(g[St])):it[St].ty==="tm"||it[St].ty==="rd"||it[St].ty==="ms"||it[St].ty==="pb"||it[St].ty==="zz"||it[St].ty==="op"?(Kt?(zt=g[St],zt.closed=!1):(zt=ShapeModifiers.getModifier(it[St].ty),zt.init(this,it[St]),g[St]=zt,this.shapeModifiers.push(zt)),Ft.push(zt)):it[St].ty==="rp"&&(Kt?(zt=g[St],zt.closed=!0):(zt=ShapeModifiers.getModifier(it[St].ty),g[St]=zt,zt.init(this,it,St,g),this.shapeModifiers.push(zt),dt=!1),Ft.push(zt));this.addProcessedElement(it[St],St+1)}for(kt=Rt.length,St=0;St<kt;St+=1)Rt[St].closed=!0;for(kt=Ft.length,St=0;St<kt;St+=1)Ft[St].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].reset();for(this.renderShape(),it=0;it<g;it+=1)(this.stylesList[it]._mdf||this._isFirstFrame)&&(this.stylesList[it].msElem&&(this.stylesList[it].msElem.setAttribute("d",this.stylesList[it].d),this.stylesList[it].d="M0 0"+this.stylesList[it].d),this.stylesList[it].pElem.setAttribute("d",this.stylesList[it].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var it,g=this.animatedContents.length,et;for(it=0;it<g;it+=1)et=this.animatedContents[it],(this._isFirstFrame||et.element._isAnimated)&&et.data!==!0&&et.fn(et.data,et.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(it,g,et,ot,ct,ut){this.o=it,this.sw=g,this.sc=et,this.fc=ot,this.m=ct,this.p=ut,this._mdf={o:!0,sw:!!g,sc:!!et,fc:!!ot,m:!0,p:!0}}LetterProps.prototype.update=function(it,g,et,ot,ct,ut){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var dt=!1;return this.o!==it&&(this.o=it,this._mdf.o=!0,dt=!0),this.sw!==g&&(this.sw=g,this._mdf.sw=!0,dt=!0),this.sc!==et&&(this.sc=et,this._mdf.sc=!0,dt=!0),this.fc!==ot&&(this.fc=ot,this._mdf.fc=!0,dt=!0),this.m!==ct&&(this.m=ct,this._mdf.m=!0,dt=!0),ut.length&&(this.p[0]!==ut[0]||this.p[1]!==ut[1]||this.p[4]!==ut[4]||this.p[5]!==ut[5]||this.p[12]!==ut[12]||this.p[13]!==ut[13])&&(this.p=ut,this._mdf.p=!0,dt=!0),dt};function TextProperty(it,g){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,g.d&&g.d.sid&&(g.d=it.globalData.slotManager.getProp(g.d)),this.data=g,this.elem=it,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(it,g){for(var et in g)Object.prototype.hasOwnProperty.call(g,et)&&(it[et]=g[et]);return it},TextProperty.prototype.setCurrentData=function(it){it.__complete||this.completeTextData(it),this.currentData=it,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(it){this.effectsSequence.push(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(it){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!it)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var g=this.currentData,et=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ot,ct=this.effectsSequence.length,ut=it||this.data.d.k[this.keysIndex].s;for(ot=0;ot<ct;ot+=1)et!==this.keysIndex?ut=this.effectsSequence[ot](ut,ut.t):ut=this.effectsSequence[ot](this.currentData,ut.t);g!==ut&&this.setCurrentData(ut),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var it=this.data.d.k,g=this.elem.comp.renderedFrame,et=0,ot=it.length;et<=ot-1&&!(et===ot-1||it[et+1].t>g);)et+=1;return this.keysIndex!==et&&(this.keysIndex=et),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(it){for(var g=[],et=0,ot=it.length,ct,ut,dt=!1,ft=!1,St="";et<ot;)dt=ft,ft=!1,ct=it.charCodeAt(et),St=it.charAt(et),FontManager.isCombinedCharacter(ct)?dt=!0:ct>=55296&&ct<=56319?FontManager.isRegionalFlag(it,et)?St=it.substr(et,14):(ut=it.charCodeAt(et+1),ut>=56320&&ut<=57343&&(FontManager.isModifier(ct,ut)?(St=it.substr(et,2),dt=!0):FontManager.isFlagEmoji(it.substr(et,4))?St=it.substr(et,4):St=it.substr(et,2))):ct>56319?(ut=it.charCodeAt(et+1),FontManager.isVariationSelector(ct)&&(dt=!0)):FontManager.isZeroWidthJoiner(ct)&&(dt=!0,ft=!0),dt?(g[g.length-1]+=St,dt=!1):g.push(St),et+=St.length;return g},TextProperty.prototype.completeTextData=function(it){it.__complete=!0;var g=this.elem.globalData.fontManager,et=this.data,ot=[],ct,ut,dt,ft=0,St,kt=et.m.g,Tt=0,jt=0,Rt=0,Ft=[],$t=0,zt=0,Kt,Bt,Ut=g.getFontByName(it.f),Jt,en=0,tn=getFontProperties(Ut);it.fWeight=tn.weight,it.fStyle=tn.style,it.finalSize=it.s,it.finalText=this.buildFinalText(it.t),ut=it.finalText.length,it.finalLineHeight=it.lh;var nn=it.tr/1e3*it.finalSize,rn;if(it.sz)for(var on=!0,dn=it.sz[0],cn=it.sz[1],fn,mn;on;){mn=this.buildFinalText(it.t),fn=0,$t=0,ut=mn.length,nn=it.tr/1e3*it.finalSize;var En=-1;for(ct=0;ct<ut;ct+=1)rn=mn[ct].charCodeAt(0),dt=!1,mn[ct]===" "?En=ct:(rn===13||rn===3)&&($t=0,dt=!0,fn+=it.finalLineHeight||it.finalSize*1.2),g.chars?(Jt=g.getCharData(mn[ct],Ut.fStyle,Ut.fFamily),en=dt?0:Jt.w*it.finalSize/100):en=g.measureText(mn[ct],it.f,it.finalSize),$t+en>dn&&mn[ct]!==" "?(En===-1?ut+=1:ct=En,fn+=it.finalLineHeight||it.finalSize*1.2,mn.splice(ct,En===ct?1:0,"\r"),En=-1,$t=0):($t+=en,$t+=nn);fn+=Ut.ascent*it.finalSize/100,this.canResize&&it.finalSize>this.minimumFontSize&&cn<fn?(it.finalSize-=1,it.finalLineHeight=it.finalSize*it.lh/it.s):(it.finalText=mn,ut=it.finalText.length,on=!1)}$t=-nn,en=0;var Sn=0,wn;for(ct=0;ct<ut;ct+=1)if(dt=!1,wn=it.finalText[ct],rn=wn.charCodeAt(0),rn===13||rn===3?(Sn=0,Ft.push($t),zt=$t>zt?$t:zt,$t=-2*nn,St="",dt=!0,Rt+=1):St=wn,g.chars?(Jt=g.getCharData(wn,Ut.fStyle,g.getFontByName(it.f).fFamily),en=dt?0:Jt.w*it.finalSize/100):en=g.measureText(St,it.f,it.finalSize),wn===" "?Sn+=en+nn:($t+=en+nn+Sn,Sn=0),ot.push({l:en,an:en,add:Tt,n:dt,anIndexes:[],val:St,line:Rt,animatorJustifyOffset:0}),kt==2){if(Tt+=en,St===""||St===" "||ct===ut-1){for((St===""||St===" ")&&(Tt-=en);jt<=ct;)ot[jt].an=Tt,ot[jt].ind=ft,ot[jt].extra=en,jt+=1;ft+=1,Tt=0}}else if(kt==3){if(Tt+=en,St===""||ct===ut-1){for(St===""&&(Tt-=en);jt<=ct;)ot[jt].an=Tt,ot[jt].ind=ft,ot[jt].extra=en,jt+=1;Tt=0,ft+=1}}else ot[ft].ind=ft,ot[ft].extra=0,ft+=1;if(it.l=ot,zt=$t>zt?$t:zt,Ft.push($t),it.sz)it.boxWidth=it.sz[0],it.justifyOffset=0;else switch(it.boxWidth=zt,it.j){case 1:it.justifyOffset=-it.boxWidth;break;case 2:it.justifyOffset=-it.boxWidth/2;break;default:it.justifyOffset=0}it.lineWidths=Ft;var hn=et.a,yn,an;Bt=hn.length;var un,bn,pn=[];for(Kt=0;Kt<Bt;Kt+=1){for(yn=hn[Kt],yn.a.sc&&(it.strokeColorAnim=!0),yn.a.sw&&(it.strokeWidthAnim=!0),(yn.a.fc||yn.a.fh||yn.a.fs||yn.a.fb)&&(it.fillColorAnim=!0),bn=0,un=yn.s.b,ct=0;ct<ut;ct+=1)an=ot[ct],an.anIndexes[Kt]=bn,(un==1&&an.val!==""||un==2&&an.val!==""&&an.val!==" "||un==3&&(an.n||an.val==" "||ct==ut-1)||un==4&&(an.n||ct==ut-1))&&(yn.s.rn===1&&pn.push(bn),bn+=1);et.a[Kt].s.totalChars=bn;var kn=-1,_n;if(yn.s.rn===1)for(ct=0;ct<ut;ct+=1)an=ot[ct],kn!=an.anIndexes[Kt]&&(kn=an.anIndexes[Kt],_n=pn.splice(Math.floor(Math.random()*pn.length),1)[0]),an.anIndexes[Kt]=_n}it.yOffset=it.finalLineHeight||it.finalSize*1.2,it.ls=it.ls||0,it.ascent=Ut.ascent*it.finalSize/100},TextProperty.prototype.updateDocumentData=function(it,g){g=g===void 0?this.keysIndex:g;var et=this.copyData({},this.data.d.k[g].s);et=this.copyData(et,it),this.data.d.k[g].s=et,this.recalculate(g),this.setCurrentData(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(it){var g=this.data.d.k[it].s;g.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(g)},TextProperty.prototype.canResizeFont=function(it){this.canResize=it,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(it){this.minimumFontSize=Math.floor(it)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var it=Math.max,g=Math.min,et=Math.floor;function ot(ut,dt){this._currentTextLength=-1,this.k=!1,this.data=dt,this.elem=ut,this.comp=ut.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ut),this.s=PropertyFactory.getProp(ut,dt.s||{k:0},0,0,this),"e"in dt?this.e=PropertyFactory.getProp(ut,dt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ut,dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ut,dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ut,dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ut,dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ut,dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ot.prototype={getMult:function(dt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ft=0,St=0,kt=1,Tt=1;this.ne.v>0?ft=this.ne.v/100:St=-this.ne.v/100,this.xe.v>0?kt=1-this.xe.v/100:Tt=1+this.xe.v/100;var jt=BezierFactory.getBezierEasing(ft,St,kt,Tt).get,Rt=0,Ft=this.finalS,$t=this.finalE,zt=this.data.sh;if(zt===2)$t===Ft?Rt=dt>=$t?1:0:Rt=it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),Rt=jt(Rt);else if(zt===3)$t===Ft?Rt=dt>=$t?0:1:Rt=1-it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),Rt=jt(Rt);else if(zt===4)$t===Ft?Rt=0:(Rt=it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),Rt<.5?Rt*=2:Rt=1-2*(Rt-.5)),Rt=jt(Rt);else if(zt===5){if($t===Ft)Rt=0;else{var Kt=$t-Ft;dt=g(it(0,dt+.5-Ft),$t-Ft);var Bt=-Kt/2+dt,Ut=Kt/2;Rt=Math.sqrt(1-Bt*Bt/(Ut*Ut))}Rt=jt(Rt)}else zt===6?($t===Ft?Rt=0:(dt=g(it(0,dt+.5-Ft),$t-Ft),Rt=(1+Math.cos(Math.PI+Math.PI*2*dt/($t-Ft)))/2),Rt=jt(Rt)):(dt>=et(Ft)&&(dt-Ft<0?Rt=it(0,g(g($t,1)-(Ft-dt),1)):Rt=it(0,g($t-dt,1))),Rt=jt(Rt));if(this.sm.v!==100){var Jt=this.sm.v*.01;Jt===0&&(Jt=1e-8);var en=.5-Jt*.5;Rt<en?Rt=0:(Rt=(Rt-en)/Jt,Rt>1&&(Rt=1))}return Rt*this.a.v},getValue:function(dt){this.iterateDynamicProperties(),this._mdf=dt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,dt&&this.data.r===2&&(this.e.v=this._currentTextLength);var ft=this.data.r===2?1:100/this.data.totalChars,St=this.o.v/ft,kt=this.s.v/ft+St,Tt=this.e.v/ft+St;if(kt>Tt){var jt=kt;kt=Tt,Tt=jt}this.finalS=kt,this.finalE=Tt}},extendPrototype([DynamicPropertyContainer],ot);function ct(ut,dt,ft){return new ot(ut,dt)}return{getTextSelectorProp:ct}}();function TextAnimatorDataProperty(it,g,et){var ot={propType:!1},ct=PropertyFactory.getProp,ut=g.a;this.a={r:ut.r?ct(it,ut.r,0,degToRads,et):ot,rx:ut.rx?ct(it,ut.rx,0,degToRads,et):ot,ry:ut.ry?ct(it,ut.ry,0,degToRads,et):ot,sk:ut.sk?ct(it,ut.sk,0,degToRads,et):ot,sa:ut.sa?ct(it,ut.sa,0,degToRads,et):ot,s:ut.s?ct(it,ut.s,1,.01,et):ot,a:ut.a?ct(it,ut.a,1,0,et):ot,o:ut.o?ct(it,ut.o,0,.01,et):ot,p:ut.p?ct(it,ut.p,1,0,et):ot,sw:ut.sw?ct(it,ut.sw,0,0,et):ot,sc:ut.sc?ct(it,ut.sc,1,0,et):ot,fc:ut.fc?ct(it,ut.fc,1,0,et):ot,fh:ut.fh?ct(it,ut.fh,0,0,et):ot,fs:ut.fs?ct(it,ut.fs,0,.01,et):ot,fb:ut.fb?ct(it,ut.fb,0,.01,et):ot,t:ut.t?ct(it,ut.t,0,0,et):ot},this.s=TextSelectorProp.getTextSelectorProp(it,g.s,et),this.s.t=g.s.t}function TextAnimatorProperty(it,g,et){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=it,this._renderType=g,this._elem=et,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(et)}TextAnimatorProperty.prototype.searchProperties=function(){var it,g=this._textData.a.length,et,ot=PropertyFactory.getProp;for(it=0;it<g;it+=1)et=this._textData.a[it],this._animatorsData[it]=new TextAnimatorDataProperty(this._elem,et,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ot(this._elem,this._textData.p.a,0,0,this),f:ot(this._elem,this._textData.p.f,0,0,this),l:ot(this._elem,this._textData.p.l,0,0,this),r:ot(this._elem,this._textData.p.r,0,0,this),p:ot(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ot(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(it,g){if(this.lettersChangedFlag=g,!(!this._mdf&&!this._isFirstFrame&&!g&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var et=this._moreOptions.alignment.v,ot=this._animatorsData,ct=this._textData,ut=this.mHelper,dt=this._renderType,ft=this.renderedLetters.length,St,kt,Tt,jt,Rt=it.l,Ft,$t,zt,Kt,Bt,Ut,Jt,en,tn,nn,rn,on,dn,cn,fn;if(this._hasMaskedPath){if(fn=this._pathData.m,!this._pathData.n||this._pathData._mdf){var mn=fn.v;this._pathData.r.v&&(mn=mn.reverse()),Ft={tLength:0,segments:[]},jt=mn._length-1;var En;for(on=0,Tt=0;Tt<jt;Tt+=1)En=bez.buildBezierData(mn.v[Tt],mn.v[Tt+1],[mn.o[Tt][0]-mn.v[Tt][0],mn.o[Tt][1]-mn.v[Tt][1]],[mn.i[Tt+1][0]-mn.v[Tt+1][0],mn.i[Tt+1][1]-mn.v[Tt+1][1]]),Ft.tLength+=En.segmentLength,Ft.segments.push(En),on+=En.segmentLength;Tt=jt,fn.v.c&&(En=bez.buildBezierData(mn.v[Tt],mn.v[0],[mn.o[Tt][0]-mn.v[Tt][0],mn.o[Tt][1]-mn.v[Tt][1]],[mn.i[0][0]-mn.v[0][0],mn.i[0][1]-mn.v[0][1]]),Ft.tLength+=En.segmentLength,Ft.segments.push(En),on+=En.segmentLength),this._pathData.pi=Ft}if(Ft=this._pathData.pi,$t=this._pathData.f.v,Jt=0,Ut=1,Kt=0,Bt=!0,nn=Ft.segments,$t<0&&fn.v.c)for(Ft.tLength<Math.abs($t)&&($t=-Math.abs($t)%Ft.tLength),Jt=nn.length-1,tn=nn[Jt].points,Ut=tn.length-1;$t<0;)$t+=tn[Ut].partialLength,Ut-=1,Ut<0&&(Jt-=1,tn=nn[Jt].points,Ut=tn.length-1);tn=nn[Jt].points,en=tn[Ut-1],zt=tn[Ut],rn=zt.partialLength}jt=Rt.length,St=0,kt=0;var Sn=it.finalSize*1.2*.714,wn=!0,hn,yn,an,un,bn;un=ot.length;var pn,kn=-1,_n,Rn,Nn,Cn=$t,Mn=Jt,In=Ut,On=-1,jn,Gn,Jn,Un,Hn,ir,ur,yr,Bn="",zn=this.defaultPropsArray,Kn;if(it.j===2||it.j===1){var Yn=0,Wn=0,lr=it.j===2?-.5:-1,or=0,cr=!0;for(Tt=0;Tt<jt;Tt+=1)if(Rt[Tt].n){for(Yn&&(Yn+=Wn);or<Tt;)Rt[or].animatorJustifyOffset=Yn,or+=1;Yn=0,cr=!0}else{for(an=0;an<un;an+=1)hn=ot[an].a,hn.t.propType&&(cr&&it.j===2&&(Wn+=hn.t.v*lr),yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),pn.length?Yn+=hn.t.v*pn[0]*lr:Yn+=hn.t.v*pn*lr);cr=!1}for(Yn&&(Yn+=Wn);or<Tt;)Rt[or].animatorJustifyOffset=Yn,or+=1}for(Tt=0;Tt<jt;Tt+=1){if(ut.reset(),jn=1,Rt[Tt].n)St=0,kt+=it.yOffset,kt+=wn?1:0,$t=Cn,wn=!1,this._hasMaskedPath&&(Jt=Mn,Ut=In,tn=nn[Jt].points,en=tn[Ut-1],zt=tn[Ut],rn=zt.partialLength,Kt=0),Bn="",yr="",ir="",Kn="",zn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(On!==Rt[Tt].line){switch(it.j){case 1:$t+=on-it.lineWidths[Rt[Tt].line];break;case 2:$t+=(on-it.lineWidths[Rt[Tt].line])/2;break}On=Rt[Tt].line}kn!==Rt[Tt].ind&&(Rt[kn]&&($t+=Rt[kn].extra),$t+=Rt[Tt].an/2,kn=Rt[Tt].ind),$t+=et[0]*Rt[Tt].an*.005;var Cr=0;for(an=0;an<un;an+=1)hn=ot[an].a,hn.p.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),pn.length?Cr+=hn.p.v[0]*pn[0]:Cr+=hn.p.v[0]*pn),hn.a.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),pn.length?Cr+=hn.a.v[0]*pn[0]:Cr+=hn.a.v[0]*pn);for(Bt=!0,this._pathData.a.v&&($t=Rt[0].an*.5+(on-this._pathData.f.v-Rt[0].an*.5-Rt[Rt.length-1].an*.5)*kn/(jt-1),$t+=this._pathData.f.v);Bt;)Kt+rn>=$t+Cr||!tn?(dn=($t+Cr-Kt)/zt.partialLength,Rn=en.point[0]+(zt.point[0]-en.point[0])*dn,Nn=en.point[1]+(zt.point[1]-en.point[1])*dn,ut.translate(-et[0]*Rt[Tt].an*.005,-(et[1]*Sn)*.01),Bt=!1):tn&&(Kt+=zt.partialLength,Ut+=1,Ut>=tn.length&&(Ut=0,Jt+=1,nn[Jt]?tn=nn[Jt].points:fn.v.c?(Ut=0,Jt=0,tn=nn[Jt].points):(Kt-=zt.partialLength,tn=null)),tn&&(en=zt,zt=tn[Ut],rn=zt.partialLength));_n=Rt[Tt].an/2-Rt[Tt].add,ut.translate(-_n,0,0)}else _n=Rt[Tt].an/2-Rt[Tt].add,ut.translate(-_n,0,0),ut.translate(-et[0]*Rt[Tt].an*.005,-et[1]*Sn*.01,0);for(an=0;an<un;an+=1)hn=ot[an].a,hn.t.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),(St!==0||it.j!==0)&&(this._hasMaskedPath?pn.length?$t+=hn.t.v*pn[0]:$t+=hn.t.v*pn:pn.length?St+=hn.t.v*pn[0]:St+=hn.t.v*pn));for(it.strokeWidthAnim&&(Jn=it.sw||0),it.strokeColorAnim&&(it.sc?Gn=[it.sc[0],it.sc[1],it.sc[2]]:Gn=[0,0,0]),it.fillColorAnim&&it.fc&&(Un=[it.fc[0],it.fc[1],it.fc[2]]),an=0;an<un;an+=1)hn=ot[an].a,hn.a.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),pn.length?ut.translate(-hn.a.v[0]*pn[0],-hn.a.v[1]*pn[1],hn.a.v[2]*pn[2]):ut.translate(-hn.a.v[0]*pn,-hn.a.v[1]*pn,hn.a.v[2]*pn));for(an=0;an<un;an+=1)hn=ot[an].a,hn.s.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),pn.length?ut.scale(1+(hn.s.v[0]-1)*pn[0],1+(hn.s.v[1]-1)*pn[1],1):ut.scale(1+(hn.s.v[0]-1)*pn,1+(hn.s.v[1]-1)*pn,1));for(an=0;an<un;an+=1){if(hn=ot[an].a,yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),hn.sk.propType&&(pn.length?ut.skewFromAxis(-hn.sk.v*pn[0],hn.sa.v*pn[1]):ut.skewFromAxis(-hn.sk.v*pn,hn.sa.v*pn)),hn.r.propType&&(pn.length?ut.rotateZ(-hn.r.v*pn[2]):ut.rotateZ(-hn.r.v*pn)),hn.ry.propType&&(pn.length?ut.rotateY(hn.ry.v*pn[1]):ut.rotateY(hn.ry.v*pn)),hn.rx.propType&&(pn.length?ut.rotateX(hn.rx.v*pn[0]):ut.rotateX(hn.rx.v*pn)),hn.o.propType&&(pn.length?jn+=(hn.o.v*pn[0]-jn)*pn[0]:jn+=(hn.o.v*pn-jn)*pn),it.strokeWidthAnim&&hn.sw.propType&&(pn.length?Jn+=hn.sw.v*pn[0]:Jn+=hn.sw.v*pn),it.strokeColorAnim&&hn.sc.propType)for(Hn=0;Hn<3;Hn+=1)pn.length?Gn[Hn]+=(hn.sc.v[Hn]-Gn[Hn])*pn[0]:Gn[Hn]+=(hn.sc.v[Hn]-Gn[Hn])*pn;if(it.fillColorAnim&&it.fc){if(hn.fc.propType)for(Hn=0;Hn<3;Hn+=1)pn.length?Un[Hn]+=(hn.fc.v[Hn]-Un[Hn])*pn[0]:Un[Hn]+=(hn.fc.v[Hn]-Un[Hn])*pn;hn.fh.propType&&(pn.length?Un=addHueToRGB(Un,hn.fh.v*pn[0]):Un=addHueToRGB(Un,hn.fh.v*pn)),hn.fs.propType&&(pn.length?Un=addSaturationToRGB(Un,hn.fs.v*pn[0]):Un=addSaturationToRGB(Un,hn.fs.v*pn)),hn.fb.propType&&(pn.length?Un=addBrightnessToRGB(Un,hn.fb.v*pn[0]):Un=addBrightnessToRGB(Un,hn.fb.v*pn))}}for(an=0;an<un;an+=1)hn=ot[an].a,hn.p.propType&&(yn=ot[an].s,pn=yn.getMult(Rt[Tt].anIndexes[an],ct.a[an].s.totalChars),this._hasMaskedPath?pn.length?ut.translate(0,hn.p.v[1]*pn[0],-hn.p.v[2]*pn[1]):ut.translate(0,hn.p.v[1]*pn,-hn.p.v[2]*pn):pn.length?ut.translate(hn.p.v[0]*pn[0],hn.p.v[1]*pn[1],-hn.p.v[2]*pn[2]):ut.translate(hn.p.v[0]*pn,hn.p.v[1]*pn,-hn.p.v[2]*pn));if(it.strokeWidthAnim&&(ir=Jn<0?0:Jn),it.strokeColorAnim&&(ur="rgb("+Math.round(Gn[0]*255)+","+Math.round(Gn[1]*255)+","+Math.round(Gn[2]*255)+")"),it.fillColorAnim&&it.fc&&(yr="rgb("+Math.round(Un[0]*255)+","+Math.round(Un[1]*255)+","+Math.round(Un[2]*255)+")"),this._hasMaskedPath){if(ut.translate(0,-it.ls),ut.translate(0,et[1]*Sn*.01+kt,0),this._pathData.p.v){cn=(zt.point[1]-en.point[1])/(zt.point[0]-en.point[0]);var Rr=Math.atan(cn)*180/Math.PI;zt.point[0]<en.point[0]&&(Rr+=180),ut.rotate(-Rr*Math.PI/180)}ut.translate(Rn,Nn,0),$t-=et[0]*Rt[Tt].an*.005,Rt[Tt+1]&&kn!==Rt[Tt+1].ind&&($t+=Rt[Tt].an/2,$t+=it.tr*.001*it.finalSize)}else{switch(ut.translate(St,kt,0),it.ps&&ut.translate(it.ps[0],it.ps[1]+it.ascent,0),it.j){case 1:ut.translate(Rt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[Rt[Tt].line]),0,0);break;case 2:ut.translate(Rt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[Rt[Tt].line])/2,0,0);break}ut.translate(0,-it.ls),ut.translate(_n,0,0),ut.translate(et[0]*Rt[Tt].an*.005,et[1]*Sn*.01,0),St+=Rt[Tt].l+it.tr*.001*it.finalSize}dt==="html"?Bn=ut.toCSS():dt==="svg"?Bn=ut.to2dCSS():zn=[ut.props[0],ut.props[1],ut.props[2],ut.props[3],ut.props[4],ut.props[5],ut.props[6],ut.props[7],ut.props[8],ut.props[9],ut.props[10],ut.props[11],ut.props[12],ut.props[13],ut.props[14],ut.props[15]],Kn=jn}ft<=Tt?(bn=new LetterProps(Kn,ir,ur,yr,Bn,zn),this.renderedLetters.push(bn),ft+=1,this.lettersChangedFlag=!0):(bn=this.renderedLetters[Tt],this.lettersChangedFlag=bn.update(Kn,ir,ur,yr,Bn,zn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(it,g,et){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(it,g,et),this.textProperty=new TextProperty(this,it.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(it.t,this.renderType,this),this.initTransform(it,g,et),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange)},ITextElement.prototype.createPathShape=function(it,g){var et,ot=g.length,ct,ut="";for(et=0;et<ot;et+=1)g[et].ty==="sh"&&(ct=g[et].ks.k,ut+=buildShapeString(ct,ct.i.length,!0,it));return ut},ITextElement.prototype.updateDocumentData=function(it,g){this.textProperty.updateDocumentData(it,g)},ITextElement.prototype.canResizeFont=function(it){this.textProperty.canResizeFont(it)},ITextElement.prototype.setMinimumFontSize=function(it){this.textProperty.setMinimumFontSize(it)},ITextElement.prototype.applyTextPropertiesToMatrix=function(it,g,et,ot,ct){switch(it.ps&&g.translate(it.ps[0],it.ps[1]+it.ascent,0),g.translate(0,-it.ls,0),it.j){case 1:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et]),0,0);break;case 2:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et])/2,0,0);break}g.translate(ot,ct,0)},ITextElement.prototype.buildColor=function(it){return"rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(it,g,et){this.textSpans=[],this.renderType="svg",this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(it){for(var g=0,et=it.length,ot=[],ct="";g<et;)it[g]===String.fromCharCode(13)||it[g]===String.fromCharCode(3)?(ot.push(ct),ct=""):ct+=it[g],g+=1;return ot.push(ct),ot},SVGTextLottieElement.prototype.buildShapeData=function(it,g){if(it.shapes&&it.shapes.length){var et=it.shapes[0];if(et.it){var ot=et.it[et.it.length-1];ot.s&&(ot.s.k[0]=g,ot.s.k[1]=g)}}return it},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var it,g,et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et?et.l.length:0),et.fc?this.layerElement.setAttribute("fill",this.buildColor(et.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),et.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(et.sc)),this.layerElement.setAttribute("stroke-width",et.sw)),this.layerElement.setAttribute("font-size",et.finalSize);var ot=this.globalData.fontManager.getFontByName(et.f);if(ot.fClass)this.layerElement.setAttribute("class",ot.fClass);else{this.layerElement.setAttribute("font-family",ot.fFamily);var ct=et.fWeight,ut=et.fStyle;this.layerElement.setAttribute("font-style",ut),this.layerElement.setAttribute("font-weight",ct)}this.layerElement.setAttribute("aria-label",et.t);var dt=et.l||[],ft=!!this.globalData.fontManager.chars;g=dt.length;var St,kt=this.mHelper,Tt="",jt=this.data.singleShape,Rt=0,Ft=0,$t=!0,zt=et.tr*.001*et.finalSize;if(jt&&!ft&&!et.sz){var Kt=this.textContainer,Bt="start";switch(et.j){case 1:Bt="end";break;case 2:Bt="middle";break;default:Bt="start";break}Kt.setAttribute("text-anchor",Bt),Kt.setAttribute("letter-spacing",zt);var Ut=this.buildTextContents(et.finalText);for(g=Ut.length,Ft=et.ps?et.ps[1]+et.ascent:0,it=0;it<g;it+=1)St=this.textSpans[it].span||createNS("tspan"),St.textContent=Ut[it],St.setAttribute("x",0),St.setAttribute("y",Ft),St.style.display="inherit",Kt.appendChild(St),this.textSpans[it]||(this.textSpans[it]={span:null,glyph:null}),this.textSpans[it].span=St,Ft+=et.finalLineHeight;this.layerElement.appendChild(Kt)}else{var Jt=this.textSpans.length,en;for(it=0;it<g;it+=1){if(this.textSpans[it]||(this.textSpans[it]={span:null,childSpan:null,glyph:null}),!ft||!jt||it===0){if(St=Jt>it?this.textSpans[it].span:createNS(ft?"g":"text"),Jt<=it){if(St.setAttribute("stroke-linecap","butt"),St.setAttribute("stroke-linejoin","round"),St.setAttribute("stroke-miterlimit","4"),this.textSpans[it].span=St,ft){var tn=createNS("g");St.appendChild(tn),this.textSpans[it].childSpan=tn}this.textSpans[it].span=St,this.layerElement.appendChild(St)}St.style.display="inherit"}if(kt.reset(),jt&&(dt[it].n&&(Rt=-zt,Ft+=et.yOffset,Ft+=$t?1:0,$t=!1),this.applyTextPropertiesToMatrix(et,kt,dt[it].line,Rt,Ft),Rt+=dt[it].l||0,Rt+=zt),ft){en=this.globalData.fontManager.getCharData(et.finalText[it],ot.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily);var nn;if(en.t===1)nn=new SVGCompElement(en.data,this.globalData,this);else{var rn=emptyShapeData;en.data&&en.data.shapes&&(rn=this.buildShapeData(en.data,et.finalSize)),nn=new SVGShapeElement(rn,this.globalData,this)}if(this.textSpans[it].glyph){var on=this.textSpans[it].glyph;this.textSpans[it].childSpan.removeChild(on.layerElement),on.destroy()}this.textSpans[it].glyph=nn,nn._debug=!0,nn.prepareFrame(0),nn.renderFrame(),this.textSpans[it].childSpan.appendChild(nn.layerElement),en.t===1&&this.textSpans[it].childSpan.setAttribute("transform","scale("+et.finalSize/100+","+et.finalSize/100+")")}else jt&&St.setAttribute("transform","translate("+kt.props[12]+","+kt.props[13]+")"),St.textContent=dt[it].val,St.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}jt&&St&&St.setAttribute("d",Tt)}for(;it<this.textSpans.length;)this.textSpans[it].span.style.display="none",it+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var it=this.layerElement.getBBox();this.bbox={top:it.y,left:it.x,width:it.width,height:it.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var it,g=this.textSpans.length,et;for(this.renderedFrame=this.comp.renderedFrame,it=0;it<g;it+=1)et=this.textSpans[it].glyph,et&&(et.prepareFrame(this.comp.renderedFrame-this.data.st),et._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var it,g,et=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;g=ot.length;var ct,ut,dt;for(it=0;it<g;it+=1)ot[it].n||(ct=et[it],ut=this.textSpans[it].span,dt=this.textSpans[it].glyph,dt&&dt.renderFrame(),ct._mdf.m&&ut.setAttribute("transform",ct.m),ct._mdf.o&&ut.setAttribute("opacity",ct.o),ct._mdf.sw&&ut.setAttribute("stroke-width",ct.sw),ct._mdf.sc&&ut.setAttribute("stroke",ct.sc),ct._mdf.fc&&ut.setAttribute("fill",ct.fc))}};function ISolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var it=createNS("rect");it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.layerElement.appendChild(it)};function NullElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initFrame(),this.initTransform(it,g,et),this.initHierarchy()}NullElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(it){return new NullElement(it,this.globalData,this)},SVGRendererBase.prototype.createShape=function(it){return new SVGShapeElement(it,this.globalData,this)},SVGRendererBase.prototype.createText=function(it){return new SVGTextLottieElement(it,this.globalData,this)},SVGRendererBase.prototype.createImage=function(it){return new IImageElement(it,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(it){return new ISolidElement(it,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(it){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+it.w+" "+it.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",it.w),this.svgElement.setAttribute("height",it.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var g=this.globalData.defs;this.setupGlobalData(it,g),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=it;var et=createNS("clipPath"),ot=createNS("rect");ot.setAttribute("width",it.w),ot.setAttribute("height",it.h),ot.setAttribute("x",0),ot.setAttribute("y",0);var ct=createElementID();et.setAttribute("id",ct),et.appendChild(ot),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),g.appendChild(et),this.layers=it.layers,this.elements=createSizedArray(it.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(it){var g=0,et=this.layers.length;for(g=0;g<et;g+=1)if(this.layers[g].ind===it)return g;return-1},SVGRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){g[it]=!0;var et=this.createItem(this.layers[it]);if(g[it]=et,getExpressionsPlugin()&&(this.layers[it].ty===0&&this.globalData.projectInterface.registerComposition(et),et.initExpressions()),this.appendElementInPos(et,it),this.layers[it].tt){var ot="tp"in this.layers[it]?this.findIndexByInd(this.layers[it].tp):it-1;if(ot===-1)return;if(!this.elements[ot]||this.elements[ot]===!0)this.buildItem(ot),this.addPendingElement(et);else{var ct=g[ot],ut=ct.getMatte(this.layers[it].tt);et.setMatte(ut)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();if(it.checkParenting(),it.data.tt)for(var g=0,et=this.elements.length;g<et;){if(this.elements[g]===it){var ot="tp"in it.data?this.findIndexByInd(it.data.tp):g-1,ct=this.elements[ot],ut=ct.getMatte(this.layers[g].tt);it.setMatte(ut);break}g+=1}}},SVGRendererBase.prototype.renderFrame=function(it){if(!(this.renderedFrame===it||this.destroyed)){it===null?it=this.renderedFrame:this.renderedFrame=it,this.globalData.frameNum=it,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=it,this.globalData._mdf=!1;var g,et=this.layers.length;for(this.completeLayers||this.checkLayers(it),g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].prepareFrame(it-this.layers[g].st);if(this.globalData._mdf)for(g=0;g<et;g+=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){for(var ot=0,ct;ot<g;)this.elements[ot]&&this.elements[ot]!==!0&&this.elements[ot].getBaseElement()&&(ct=this.elements[ot].getBaseElement()),ot+=1;ct?this.layerElement.insertBefore(et,ct):this.layerElement.appendChild(et)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initTransform(it,g,et),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!g.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(it){if(this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=it/this.data.sr;else{var g=this.tm.v;g===this.data.op&&(g=this.data.op-1),this.renderedFrame=g}var et,ot=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&(this.elements[et].prepareFrame(this.renderedFrame-this.layers[et].st),this.elements[et]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame()},ICompElement.prototype.setElements=function(it){this.elements=it},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(it,g,et){this.layers=it.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function SVGRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var et="";if(g&&g.title){var ot=createNS("title"),ct=createElementID();ot.setAttribute("id",ct),ot.textContent=g.title,this.svgElement.appendChild(ot),et+=ct}if(g&&g.description){var ut=createNS("desc"),dt=createElementID();ut.setAttribute("id",dt),ut.textContent=g.description,this.svgElement.appendChild(ut),et+=" "+dt}et&&this.svgElement.setAttribute("aria-labelledby",et);var ft=createNS("defs");this.svgElement.appendChild(ft);var St=createNS("g");this.svgElement.appendChild(St),this.layerElement=St,this.renderConfig={preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",progressiveLoad:g&&g.progressiveLoad||!1,hideOnTransparent:!(g&&g.hideOnTransparent===!1),viewBoxOnly:g&&g.viewBoxOnly||!1,viewBoxSize:g&&g.viewBoxSize||!1,className:g&&g.className||"",id:g&&g.id||"",focusable:g&&g.focusable,filterSize:{width:g&&g.filterSize&&g.filterSize.width||"100%",height:g&&g.filterSize&&g.filterSize.height||"100%",x:g&&g.filterSize&&g.filterSize.x||"0%",y:g&&g.filterSize&&g.filterSize.y||"0%"},width:g&&g.width,height:g&&g.height,runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(g){var et,ot=g.length,ct="_";for(et=0;et<ot;et+=1)ct+=g[et].transform.key+"_";var ut=this.sequences[ct];return ut||(ut={transforms:[].concat(g),finalTransform:new Matrix,_mdf:!1},this.sequences[ct]=ut,this.sequenceList.push(ut)),ut},processSequence:function(g,et){for(var ot=0,ct=g.transforms.length,ut=et;ot<ct&&!et;){if(g.transforms[ot].transform.mProps._mdf){ut=!0;break}ot+=1}if(ut)for(g.finalTransform.reset(),ot=ct-1;ot>=0;ot-=1)g.finalTransform.multiply(g.transforms[ot].transform.mProps.v);g._mdf=ut},processSequences:function(g){var et,ot=this.sequenceList.length;for(et=0;et<ot;et+=1)this.processSequence(this.sequenceList[et],g)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var g="__lottie_element_luma_buffer",et=null,ot=null,ct=null;function ut(){var St=createNS("svg"),kt=createNS("filter"),Tt=createNS("feColorMatrix");return kt.setAttribute("id",g),Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),kt.appendChild(Tt),St.appendChild(kt),St.setAttribute("id",g+"_svg"),featureSupport.svgLumaHidden&&(St.style.display="none"),St}function dt(){et||(ct=ut(),document.body.appendChild(ct),et=createTag("canvas"),ot=et.getContext("2d"),ot.filter="url(#"+g+")",ot.fillStyle="rgba(0,0,0,0)",ot.fillRect(0,0,1,1))}function ft(St){return et||dt(),et.width=St.width,et.height=St.height,ot.filter="url(#"+g+")",et}return{load:dt,get:ft}};function createCanvas(it,g){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(it,g);var et=createTag("canvas");return et.width=it,et.height=g,et}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(it){var g,et=it.data.ef?it.data.ef.length:0;this.filters=[];var ot;for(g=0;g<et;g+=1){ot=null;var ct=it.data.ef[g].ty;if(registeredEffects[ct]){var ut=registeredEffects[ct].effect;ot=new ut(it.effectsManager.effectElements[g],it)}ot&&this.filters.push(ot)}this.filters.length&&it.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},CVEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect(it,g){registeredEffects[it]={effect:g}}function CVMaskElement(it,g){this.data=it,this.element=g,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var et,ot=this.masksProperties.length,ct=!1;for(et=0;et<ot;et+=1)this.masksProperties[et].mode!=="n"&&(ct=!0),this.viewData[et]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[et],3);this.hasMasks=ct,ct&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var it=this.element.finalTransform.mat,g=this.element.canvasContext,et,ot=this.masksProperties.length,ct,ut,dt;for(g.beginPath(),et=0;et<ot;et+=1)if(this.masksProperties[et].mode!=="n"){this.masksProperties[et].inv&&(g.moveTo(0,0),g.lineTo(this.element.globalData.compSize.w,0),g.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),g.lineTo(0,this.element.globalData.compSize.h),g.lineTo(0,0)),dt=this.viewData[et].v,ct=it.applyToPointArray(dt.v[0][0],dt.v[0][1],0),g.moveTo(ct[0],ct[1]);var ft,St=dt._length;for(ft=1;ft<St;ft+=1)ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[ft],dt.v[ft]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]);ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[0],dt.v[0]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5])}this.element.globalData.renderer.save(!0),g.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var g=this.globalData.canvasContext,et=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(et);var ot=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(ot),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var g=this.globalData;if(g.blendMode!==this.data.bm){g.blendMode=this.data.bm;var et=getBlendMode(this.data.bm);g.canvasContext.globalCompositeOperation=et}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(g){g.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var g=this.buffers[0],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var g=this.buffers[1],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ot=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ot.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ct=assetLoader.getLumaCanvas(this.canvasContext.canvas),ut=ct.getContext("2d");ut.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ct,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(g,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(g){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!g)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var et=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(et),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(et),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(it,g,et,ot){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ct=4;g.ty==="rc"?ct=5:g.ty==="el"?ct=6:g.ty==="sr"&&(ct=7),this.sh=ShapePropertyFactory.getShapeProp(it,g,ct,it);var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)et[ut].closed||(ft={transforms:ot.addTransformSequence(et[ut].transforms),trNodes:[]},this.styledShapes.push(ft),et[ut].elements.push(ft))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(it,g){var et={data:it,type:it.ty,preTransforms:this.transformsManager.addTransformSequence(g),transforms:[],elements:[],closed:it.hd===!0},ot={};if(it.ty==="fl"||it.ty==="st"?(ot.c=PropertyFactory.getProp(this,it.c,1,255,this),ot.c.k||(et.co="rgb("+bmFloor(ot.c.v[0])+","+bmFloor(ot.c.v[1])+","+bmFloor(ot.c.v[2])+")")):(it.ty==="gf"||it.ty==="gs")&&(ot.s=PropertyFactory.getProp(this,it.s,1,null,this),ot.e=PropertyFactory.getProp(this,it.e,1,null,this),ot.h=PropertyFactory.getProp(this,it.h||{k:0},0,.01,this),ot.a=PropertyFactory.getProp(this,it.a||{k:0},0,degToRads,this),ot.g=new GradientProperty(this,it.g,this)),ot.o=PropertyFactory.getProp(this,it.o,0,.01,this),it.ty==="st"||it.ty==="gs"){if(et.lc=lineCapEnum[it.lc||2],et.lj=lineJoinEnum[it.lj||2],it.lj==1&&(et.ml=it.ml),ot.w=PropertyFactory.getProp(this,it.w,0,null,this),ot.w.k||(et.wi=ot.w.v),it.d){var ct=new DashProperty(this,it.d,"canvas",this);ot.d=ct,ot.d.k||(et.da=ot.d.dashArray,et.do=ot.d.dashoffset[0])}}else et.r=it.r===2?"evenodd":"nonzero";return this.stylesList.push(et),ot.style=et,ot},CVShapeElement.prototype.createGroupElement=function(){var it={it:[],prevViewData:[]};return it},CVShapeElement.prototype.createTransformElement=function(it){var g={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,it.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,it,this)}};return g},CVShapeElement.prototype.createShapeElement=function(it){var g=new CVShapeData(this,it,this.stylesList,this.transformsManager);return this.shapes.push(g),this.addShapeToModifiers(g),g},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(it){var g,et=this.stylesList.length;for(g=0;g<et;g+=1)this.stylesList[g].closed||this.stylesList[g].transforms.push(it)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].closed||this.stylesList[it].transforms.pop()},CVShapeElement.prototype.closeStyles=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].closed=!0},CVShapeElement.prototype.searchShapes=function(it,g,et,ot,ct){var ut,dt=it.length-1,ft,St,kt=[],Tt=[],jt,Rt,Ft,$t=[].concat(ct);for(ut=dt;ut>=0;ut-=1){if(jt=this.searchProcessedElement(it[ut]),jt?g[ut]=et[jt-1]:it[ut]._shouldRender=ot,it[ut].ty==="fl"||it[ut].ty==="st"||it[ut].ty==="gf"||it[ut].ty==="gs")jt?g[ut].style.closed=!1:g[ut]=this.createStyleElement(it[ut],$t),kt.push(g[ut].style);else if(it[ut].ty==="gr"){if(!jt)g[ut]=this.createGroupElement(it[ut]);else for(St=g[ut].it.length,ft=0;ft<St;ft+=1)g[ut].prevViewData[ft]=g[ut].it[ft];this.searchShapes(it[ut].it,g[ut].it,g[ut].prevViewData,ot,$t)}else it[ut].ty==="tr"?(jt||(Ft=this.createTransformElement(it[ut]),g[ut]=Ft),$t.push(g[ut]),this.addTransformToStyleList(g[ut])):it[ut].ty==="sh"||it[ut].ty==="rc"||it[ut].ty==="el"||it[ut].ty==="sr"?jt||(g[ut]=this.createShapeElement(it[ut])):it[ut].ty==="tm"||it[ut].ty==="rd"||it[ut].ty==="pb"||it[ut].ty==="zz"||it[ut].ty==="op"?(jt?(Rt=g[ut],Rt.closed=!1):(Rt=ShapeModifiers.getModifier(it[ut].ty),Rt.init(this,it[ut]),g[ut]=Rt,this.shapeModifiers.push(Rt)),Tt.push(Rt)):it[ut].ty==="rp"&&(jt?(Rt=g[ut],Rt.closed=!0):(Rt=ShapeModifiers.getModifier(it[ut].ty),g[ut]=Rt,Rt.init(this,it,ut,g),this.shapeModifiers.push(Rt),ot=!1),Tt.push(Rt));this.addProcessedElement(it[ut],ut+1)}for(this.removeTransformFromStyleList(),this.closeStyles(kt),dt=Tt.length,ut=0;ut<dt;ut+=1)Tt[ut].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(it,g){(it._opMdf||g.op._mdf||this._isFirstFrame)&&(g.opacity=it.opacity,g.opacity*=g.op.v,g._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var it,g=this.stylesList.length,et,ot,ct,ut,dt,ft,St=this.globalData.renderer,kt=this.globalData.canvasContext,Tt,jt;for(it=0;it<g;it+=1)if(jt=this.stylesList[it],Tt=jt.type,!((Tt==="st"||Tt==="gs")&&jt.wi===0||!jt.data._shouldRender||jt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(St.save(),dt=jt.elements,Tt==="st"||Tt==="gs"?(St.ctxStrokeStyle(Tt==="st"?jt.co:jt.grd),St.ctxLineWidth(jt.wi),St.ctxLineCap(jt.lc),St.ctxLineJoin(jt.lj),St.ctxMiterLimit(jt.ml||0)):St.ctxFillStyle(Tt==="fl"?jt.co:jt.grd),St.ctxOpacity(jt.coOp),Tt!=="st"&&Tt!=="gs"&&kt.beginPath(),St.ctxTransform(jt.preTransforms.finalTransform.props),ot=dt.length,et=0;et<ot;et+=1){for((Tt==="st"||Tt==="gs")&&(kt.beginPath(),jt.da&&(kt.setLineDash(jt.da),kt.lineDashOffset=jt.do)),ft=dt[et].trNodes,ut=ft.length,ct=0;ct<ut;ct+=1)ft[ct].t==="m"?kt.moveTo(ft[ct].p[0],ft[ct].p[1]):ft[ct].t==="c"?kt.bezierCurveTo(ft[ct].pts[0],ft[ct].pts[1],ft[ct].pts[2],ft[ct].pts[3],ft[ct].pts[4],ft[ct].pts[5]):kt.closePath();(Tt==="st"||Tt==="gs")&&(St.ctxStroke(),jt.da&&kt.setLineDash(this.dashResetter))}Tt!=="st"&&Tt!=="gs"&&this.globalData.renderer.ctxFill(jt.r),St.restore()}},CVShapeElement.prototype.renderShape=function(it,g,et,ot){var ct,ut=g.length-1,dt;for(dt=it,ct=ut;ct>=0;ct-=1)g[ct].ty==="tr"?(dt=et[ct].transform,this.renderShapeTransform(it,dt)):g[ct].ty==="sh"||g[ct].ty==="el"||g[ct].ty==="rc"||g[ct].ty==="sr"?this.renderPath(g[ct],et[ct]):g[ct].ty==="fl"?this.renderFill(g[ct],et[ct],dt):g[ct].ty==="st"?this.renderStroke(g[ct],et[ct],dt):g[ct].ty==="gf"||g[ct].ty==="gs"?this.renderGradientFill(g[ct],et[ct],dt):g[ct].ty==="gr"?this.renderShape(dt,g[ct].it,et[ct].it):g[ct].ty;ot&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(it,g){if(this._isFirstFrame||g._mdf||it.transforms._mdf){var et=it.trNodes,ot=g.paths,ct,ut,dt,ft=ot._length;et.length=0;var St=it.transforms.finalTransform;for(dt=0;dt<ft;dt+=1){var kt=ot.shapes[dt];if(kt&&kt.v){for(ut=kt._length,ct=1;ct<ut;ct+=1)ct===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[ct],kt.v[ct])});ut===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),kt.c&&ut&&(et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[0],kt.v[0])}),et.push({t:"z"}))}}it.trNodes=et}},CVShapeElement.prototype.renderPath=function(it,g){if(it.hd!==!0&&it._shouldRender){var et,ot=g.styledShapes.length;for(et=0;et<ot;et+=1)this.renderStyledShape(g.styledShapes[et],g.sh)}},CVShapeElement.prototype.renderFill=function(it,g,et){var ot=g.style;(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity)},CVShapeElement.prototype.renderGradientFill=function(it,g,et){var ot=g.style,ct;if(!ot.grd||g.g._mdf||g.s._mdf||g.e._mdf||it.t!==1&&(g.h._mdf||g.a._mdf)){var ut=this.globalData.canvasContext,dt=g.s.v,ft=g.e.v;if(it.t===1)ct=ut.createLinearGradient(dt[0],dt[1],ft[0],ft[1]);else{var St=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),kt=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Tt=g.h.v;Tt>=1?Tt=.99:Tt<=-1&&(Tt=-.99);var jt=St*Tt,Rt=Math.cos(kt+g.a.v)*jt+dt[0],Ft=Math.sin(kt+g.a.v)*jt+dt[1];ct=ut.createRadialGradient(Rt,Ft,0,dt[0],dt[1],St)}var $t,zt=it.g.p,Kt=g.g.c,Bt=1;for($t=0;$t<zt;$t+=1)g.g._hasOpacity&&g.g._collapsable&&(Bt=g.g.o[$t*2+1]),ct.addColorStop(Kt[$t*4]/100,"rgba("+Kt[$t*4+1]+","+Kt[$t*4+2]+","+Kt[$t*4+3]+","+Bt+")");ot.grd=ct}ot.coOp=g.o.v*et.opacity},CVShapeElement.prototype.renderStroke=function(it,g,et){var ot=g.style,ct=g.d;ct&&(ct._mdf||this._isFirstFrame)&&(ot.da=ct.dashArray,ot.do=ct.dashoffset[0]),(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity),(g.w._mdf||this._isFirstFrame)&&(ot.wi=g.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(it,g,et){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=!1;it.fc?(g=!0,this.values.fill=this.buildColor(it.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=g;var et=!1;it.sc&&(et=!0,this.values.stroke=this.buildColor(it.sc),this.values.sWidth=it.sw);var ot=this.globalData.fontManager.getFontByName(it.f),ct,ut,dt=it.l,ft=this.mHelper;this.stroke=et,this.values.fValue=it.finalSize+"px "+this.globalData.fontManager.getFontByName(it.f).fFamily,ut=it.finalText.length;var St,kt,Tt,jt,Rt,Ft,$t,zt,Kt,Bt,Ut=this.data.singleShape,Jt=it.tr*.001*it.finalSize,en=0,tn=0,nn=!0,rn=0;for(ct=0;ct<ut;ct+=1){St=this.globalData.fontManager.getCharData(it.finalText[ct],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),kt=St&&St.data||{},ft.reset(),Ut&&dt[ct].n&&(en=-Jt,tn+=it.yOffset,tn+=nn?1:0,nn=!1),Rt=kt.shapes?kt.shapes[0].it:[],$t=Rt.length,ft.scale(it.finalSize/100,it.finalSize/100),Ut&&this.applyTextPropertiesToMatrix(it,ft,dt[ct].line,en,tn),Kt=createSizedArray($t-1);var on=0;for(Ft=0;Ft<$t;Ft+=1)if(Rt[Ft].ty==="sh"){for(jt=Rt[Ft].ks.k.i.length,zt=Rt[Ft].ks.k,Bt=[],Tt=1;Tt<jt;Tt+=1)Tt===1&&Bt.push(ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Bt.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToY(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToX(zt.v[Tt][0],zt.v[Tt][1],0),ft.applyToY(zt.v[Tt][0],zt.v[Tt][1],0));Bt.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[0][0],zt.i[0][1],0),ft.applyToY(zt.i[0][0],zt.i[0][1],0),ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Kt[on]=Bt,on+=1}Ut&&(en+=dt[ct].l,en+=Jt),this.textSpans[rn]?this.textSpans[rn].elem=Kt:this.textSpans[rn]={elem:Kt},rn+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var it=this.canvasContext;it.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var g,et,ot,ct,ut,dt,ft=this.textAnimator.renderedLetters,St=this.textProperty.currentData.l;et=St.length;var kt,Tt=null,jt=null,Rt=null,Ft,$t,zt=this.globalData.renderer;for(g=0;g<et;g+=1)if(!St[g].n){if(kt=ft[g],kt&&(zt.save(),zt.ctxTransform(kt.p),zt.ctxOpacity(kt.o)),this.fill){for(kt&&kt.fc?Tt!==kt.fc&&(zt.ctxFillStyle(kt.fc),Tt=kt.fc):Tt!==this.values.fill&&(Tt=this.values.fill,zt.ctxFillStyle(this.values.fill)),Ft=this.textSpans[g].elem,ct=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for($t=Ft[ot],dt=$t.length,this.globalData.canvasContext.moveTo($t[0],$t[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo($t[ut],$t[ut+1],$t[ut+2],$t[ut+3],$t[ut+4],$t[ut+5]);this.globalData.canvasContext.closePath(),zt.ctxFill()}if(this.stroke){for(kt&&kt.sw?Rt!==kt.sw&&(Rt=kt.sw,zt.ctxLineWidth(kt.sw)):Rt!==this.values.sWidth&&(Rt=this.values.sWidth,zt.ctxLineWidth(this.values.sWidth)),kt&&kt.sc?jt!==kt.sc&&(jt=kt.sc,zt.ctxStrokeStyle(kt.sc)):jt!==this.values.stroke&&(jt=this.values.stroke,zt.ctxStrokeStyle(this.values.stroke)),Ft=this.textSpans[g].elem,ct=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for($t=Ft[ot],dt=$t.length,this.globalData.canvasContext.moveTo($t[0],$t[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo($t[ut],$t[ut+1],$t[ut+2],$t[ut+3],$t[ut+4],$t[ut+5]);this.globalData.canvasContext.closePath(),zt.ctxStroke()}kt&&this.globalData.renderer.restore()}};function CVImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.img=g.imageLoader.getAsset(this.assetData),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var it=createTag("canvas");it.width=this.assetData.w,it.height=this.assetData.h;var g=it.getContext("2d"),et=this.img.width,ot=this.img.height,ct=et/ot,ut=this.assetData.w/this.assetData.h,dt,ft,St=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ct>ut&&St==="xMidYMid slice"||ct<ut&&St!=="xMidYMid slice"?(ft=ot,dt=ft*ut):(dt=et,ft=dt/ut),g.drawImage(this.img,(et-dt)/2,(ot-ft)/2,dt,ft,0,0,this.assetData.w,this.assetData.h),this.img=it}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(it){return new CVShapeElement(it,this.globalData,this)},CanvasRendererBase.prototype.createText=function(it){return new CVTextElement(it,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(it){return new CVImageElement(it,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(it){return new CVSolidElement(it,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(it){it[0]===1&&it[1]===0&&it[4]===0&&it[5]===1&&it[12]===0&&it[13]===0||this.canvasContext.transform(it[0],it[1],it[4],it[5],it[12],it[13])},CanvasRendererBase.prototype.ctxOpacity=function(it){this.canvasContext.globalAlpha*=it<0?0:it},CanvasRendererBase.prototype.ctxFillStyle=function(it){this.canvasContext.fillStyle=it},CanvasRendererBase.prototype.ctxStrokeStyle=function(it){this.canvasContext.strokeStyle=it},CanvasRendererBase.prototype.ctxLineWidth=function(it){this.canvasContext.lineWidth=it},CanvasRendererBase.prototype.ctxLineCap=function(it){this.canvasContext.lineCap=it},CanvasRendererBase.prototype.ctxLineJoin=function(it){this.canvasContext.lineJoin=it},CanvasRendererBase.prototype.ctxMiterLimit=function(it){this.canvasContext.miterLimit=it},CanvasRendererBase.prototype.ctxFill=function(it){this.canvasContext.fill(it)},CanvasRendererBase.prototype.ctxFillRect=function(it,g,et,ot){this.canvasContext.fillRect(it,g,et,ot)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(it){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}it&&(this.globalData.blendMode="source-over"),this.contextData.restore(it)},CanvasRendererBase.prototype.configAnimation=function(it){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var g=this.animationItem.container.style;g.width="100%",g.height="100%";var et="0px 0px 0px";g.transformOrigin=et,g.mozTransformOrigin=et,g.webkitTransformOrigin=et,g["-webkit-transform"]=et,g.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=it,this.layers=it.layers,this.transformCanvas={w:it.w,h:it.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(it,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(it.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(it,g){this.reset();var et,ot;it?(et=it,ot=g,this.canvasContext.canvas.width=et,this.canvasContext.canvas.height=ot):(this.animationItem.wrapper&&this.animationItem.container?(et=this.animationItem.wrapper.offsetWidth,ot=this.animationItem.wrapper.offsetHeight):(et=this.canvasContext.canvas.width,ot=this.canvasContext.canvas.height),this.canvasContext.canvas.width=et*this.renderConfig.dpr,this.canvasContext.canvas.height=ot*this.renderConfig.dpr);var ct,ut;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var dt=this.renderConfig.preserveAspectRatio.split(" "),ft=dt[1]||"meet",St=dt[0]||"xMidYMid",kt=St.substr(0,4),Tt=St.substr(4);ct=et/ot,ut=this.transformCanvas.w/this.transformCanvas.h,ut>ct&&ft==="meet"||ut<ct&&ft==="slice"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=et/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr)),kt==="xMid"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))/2*this.renderConfig.dpr:kt==="xMax"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Tt==="YMid"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))/2*this.renderConfig.dpr:Tt==="YMax"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var it,g=this.layers?this.layers.length:0;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(it,g){if(!(this.renderedFrame===it&&this.renderConfig.clearCanvas===!0&&!g||this.destroyed||it===-1)){this.renderedFrame=it,this.globalData.frameNum=it-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||g,this.globalData.projectInterface.currentFrame=it;var et,ot=this.layers.length;for(this.completeLayers||this.checkLayers(it),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(it-this.layers[et].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){var et=this.createItem(this.layers[it],this,this.globalData);g[it]=et,et.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var it,g=15;for(it=0;it<g;it+=1){var et=new CanvasContext;this.stack[it]=et}this._length=g,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var it=this._length*2,g=0;for(g=this._length;g<it;g+=1)this.stack[g]=new CanvasContext;this._length=it},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(it){this.cArrPos-=1;var g=this.stack[this.cArrPos],et=g.transform,ot,ct=this.cTr.props;for(ot=0;ot<16;ot+=1)ct[ot]=et[ot];if(it){this.nativeContext.restore();var ut=this.stack[this.cArrPos+1];this.appliedFillStyle=ut.fillStyle,this.appliedStrokeStyle=ut.strokeStyle,this.appliedLineWidth=ut.lineWidth,this.appliedLineCap=ut.lineCap,this.appliedLineJoin=ut.lineJoin,this.appliedMiterLimit=ut.miterLimit}this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13]),(it||g.opacity!==-1&&this.currentOpacity!==g.opacity)&&(this.nativeContext.globalAlpha=g.opacity,this.currentOpacity=g.opacity),this.currentFillStyle=g.fillStyle,this.currentStrokeStyle=g.strokeStyle,this.currentLineWidth=g.lineWidth,this.currentLineCap=g.lineCap,this.currentLineJoin=g.lineJoin,this.currentMiterLimit=g.miterLimit},CVContextData.prototype.save=function(it){it&&this.nativeContext.save();var g=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var et=this.stack[this.cArrPos],ot;for(ot=0;ot<16;ot+=1)et.transform[ot]=g[ot];this.cArrPos+=1;var ct=this.stack[this.cArrPos];ct.opacity=et.opacity,ct.fillStyle=et.fillStyle,ct.strokeStyle=et.strokeStyle,ct.lineWidth=et.lineWidth,ct.lineCap=et.lineCap,ct.lineJoin=et.lineJoin,ct.miterLimit=et.miterLimit},CVContextData.prototype.setOpacity=function(it){this.stack[this.cArrPos].opacity=it},CVContextData.prototype.setContext=function(it){this.nativeContext=it},CVContextData.prototype.fillStyle=function(it){this.stack[this.cArrPos].fillStyle!==it&&(this.currentFillStyle=it,this.stack[this.cArrPos].fillStyle=it)},CVContextData.prototype.strokeStyle=function(it){this.stack[this.cArrPos].strokeStyle!==it&&(this.currentStrokeStyle=it,this.stack[this.cArrPos].strokeStyle=it)},CVContextData.prototype.lineWidth=function(it){this.stack[this.cArrPos].lineWidth!==it&&(this.currentLineWidth=it,this.stack[this.cArrPos].lineWidth=it)},CVContextData.prototype.lineCap=function(it){this.stack[this.cArrPos].lineCap!==it&&(this.currentLineCap=it,this.stack[this.cArrPos].lineCap=it)},CVContextData.prototype.lineJoin=function(it){this.stack[this.cArrPos].lineJoin!==it&&(this.currentLineJoin=it,this.stack[this.cArrPos].lineJoin=it)},CVContextData.prototype.miterLimit=function(it){this.stack[this.cArrPos].miterLimit!==it&&(this.currentMiterLimit=it,this.stack[this.cArrPos].miterLimit=it)},CVContextData.prototype.transform=function(it){this.transformMat.cloneFromProps(it);var g=this.cTr;this.transformMat.multiply(g),g.cloneFromProps(this.transformMat.props);var et=g.props;this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13])},CVContextData.prototype.opacity=function(it){var g=this.stack[this.cArrPos].opacity;g*=it<0?0:it,this.stack[this.cArrPos].opacity!==g&&(this.currentOpacity!==it&&(this.nativeContext.globalAlpha=it,this.currentOpacity=it),this.stack[this.cArrPos].opacity=g)},CVContextData.prototype.fill=function(it){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(it)},CVContextData.prototype.fillRect=function(it,g,et,ot){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(it,g,et,ot)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(it,g,et){this.completeLayers=!1,this.layers=it.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var it=this.canvasContext;it.beginPath(),it.moveTo(0,0),it.lineTo(this.data.w,0),it.lineTo(this.data.w,this.data.h),it.lineTo(0,this.data.h),it.lineTo(0,0),it.clip();var g,et=this.layers.length;for(g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()},CVCompElement.prototype.destroy=function(){var it,g=this.layers.length;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function CanvasRenderer(it,g){this.animationItem=it,this.renderConfig={clearCanvas:g&&g.clearCanvas!==void 0?g.clearCanvas:!0,context:g&&g.context||null,progressiveLoad:g&&g.progressiveLoad||!1,preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",className:g&&g.className||"",id:g&&g.id||"",runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.renderConfig.dpr=g&&g.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=g&&g.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var g=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var et=this.finalTransform.mat.toCSS();g.transform=et,g.webkitTransform=et}this.finalTransform._opMdf&&(g.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var it;this.data.hasMask?(it=createNS("rect"),it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(it=createTag("div"),it.style.width=this.data.sw+"px",it.style.height=this.data.sh+"px",it.style.backgroundColor=this.data.sc),this.layerElement.appendChild(it)};function HShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(it,g,et),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var it;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),it=this.svgElement;else{it=createNS("svg");var g=this.comp.data?this.comp.data:this.globalData.compSize;it.setAttribute("width",g.w),it.setAttribute("height",g.h),it.appendChild(this.shapesContainer),this.layerElement.appendChild(it)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=it},HShapeElement.prototype.getTransformedPoint=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g=it[et].mProps.v.applyToPointArray(g[0],g[1],0);return g},HShapeElement.prototype.calculateShapeBoundingBox=function(it,g){var et=it.sh.v,ot=it.transformers,ct,ut=et._length,dt,ft,St,kt;if(!(ut<=1)){for(ct=0;ct<ut-1;ct+=1)dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[ct+1]),kt=this.getTransformedPoint(ot,et.v[ct+1]),this.checkBounds(dt,ft,St,kt,g);et.c&&(dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[0]),kt=this.getTransformedPoint(ot,et.v[0]),this.checkBounds(dt,ft,St,kt,g))}},HShapeElement.prototype.checkBounds=function(it,g,et,ot,ct){this.getBoundsOfCurve(it,g,et,ot);var ut=this.shapeBoundingBox;ct.x=bmMin(ut.left,ct.x),ct.xMax=bmMax(ut.right,ct.xMax),ct.y=bmMin(ut.top,ct.y),ct.yMax=bmMax(ut.bottom,ct.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(it,g,et,ot){for(var ct=[[it[0],ot[0]],[it[1],ot[1]]],ut,dt,ft,St,kt,Tt,jt,Rt=0;Rt<2;++Rt)dt=6*it[Rt]-12*g[Rt]+6*et[Rt],ut=-3*it[Rt]+9*g[Rt]-9*et[Rt]+3*ot[Rt],ft=3*g[Rt]-3*it[Rt],dt|=0,ut|=0,ft|=0,ut===0&&dt===0||(ut===0?(St=-ft/dt,St>0&&St<1&&ct[Rt].push(this.calculateF(St,it,g,et,ot,Rt))):(kt=dt*dt-4*ft*ut,kt>=0&&(Tt=(-dt+bmSqrt(kt))/(2*ut),Tt>0&&Tt<1&&ct[Rt].push(this.calculateF(Tt,it,g,et,ot,Rt)),jt=(-dt-bmSqrt(kt))/(2*ut),jt>0&&jt<1&&ct[Rt].push(this.calculateF(jt,it,g,et,ot,Rt)))));this.shapeBoundingBox.left=bmMin.apply(null,ct[0]),this.shapeBoundingBox.top=bmMin.apply(null,ct[1]),this.shapeBoundingBox.right=bmMax.apply(null,ct[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ct[1])},HShapeElement.prototype.calculateF=function(it,g,et,ot,ct,ut){return bmPow(1-it,3)*g[ut]+3*bmPow(1-it,2)*it*et[ut]+3*(1-it)*bmPow(it,2)*ot[ut]+bmPow(it,3)*ct[ut]},HShapeElement.prototype.calculateBoundingBox=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]&&it[et].sh?this.calculateShapeBoundingBox(it[et],g):it[et]&&it[et].it?this.calculateBoundingBox(it[et].it,g):it[et]&&it[et].style&&it[et].w&&this.expandStrokeBoundingBox(it[et].w,g)},HShapeElement.prototype.expandStrokeBoundingBox=function(it,g){var et=0;if(it.keyframes){for(var ot=0;ot<it.keyframes.length;ot+=1){var ct=it.keyframes[ot].s;ct>et&&(et=ct)}et*=it.mult}else et=it.v*it.mult;g.x-=et,g.xMax+=et,g.y-=et,g.yMax+=et},HShapeElement.prototype.currentBoxContains=function(it){return this.currentBBox.x<=it.x&&this.currentBBox.y<=it.y&&this.currentBBox.width+this.currentBBox.x>=it.x+it.width&&this.currentBBox.height+this.currentBBox.y>=it.y+it.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var it=this.tempBoundingBox,g=999999;if(it.x=g,it.xMax=-g,it.y=g,it.yMax=-g,this.calculateBoundingBox(this.itemsData,it),it.width=it.xMax<it.x?0:it.xMax-it.x,it.height=it.yMax<it.y?0:it.yMax-it.y,this.currentBoxContains(it))return;var et=!1;if(this.currentBBox.w!==it.width&&(this.currentBBox.w=it.width,this.shapeCont.setAttribute("width",it.width),et=!0),this.currentBBox.h!==it.height&&(this.currentBBox.h=it.height,this.shapeCont.setAttribute("height",it.height),et=!0),et||this.currentBBox.x!==it.x||this.currentBBox.y!==it.y){this.currentBBox.w=it.width,this.currentBBox.h=it.height,this.currentBBox.x=it.x,this.currentBBox.y=it.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ot=this.shapeCont.style,ct="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ot.transform=ct,ot.webkitTransform=ct}}};function HTextElement(it,g,et){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var it=createNS("g");this.maskedElement.appendChild(it),this.innerElem=it}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=this.innerElem.style,et=it.fc?this.buildColor(it.fc):"rgba(0,0,0,0)";g.fill=et,g.color=et,it.sc&&(g.stroke=this.buildColor(it.sc),g.strokeWidth=it.sw+"px");var ot=this.globalData.fontManager.getFontByName(it.f);if(!this.globalData.fontManager.chars)if(g.fontSize=it.finalSize+"px",g.lineHeight=it.finalSize+"px",ot.fClass)this.innerElem.className=ot.fClass;else{g.fontFamily=ot.fFamily;var ct=it.fWeight,ut=it.fStyle;g.fontStyle=ut,g.fontWeight=ct}var dt,ft,St=it.l;ft=St.length;var kt,Tt,jt,Rt=this.mHelper,Ft,$t="",zt=0;for(dt=0;dt<ft;dt+=1){if(this.globalData.fontManager.chars?(this.textPaths[zt]?kt=this.textPaths[zt]:(kt=createNS("path"),kt.setAttribute("stroke-linecap",lineCapEnum[1]),kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[zt]?(Tt=this.textSpans[zt],jt=Tt.children[0]):(Tt=createTag("div"),Tt.style.lineHeight=0,jt=createNS("svg"),jt.appendChild(kt),styleDiv(Tt)))):this.isMasked?kt=this.textPaths[zt]?this.textPaths[zt]:createNS("text"):this.textSpans[zt]?(Tt=this.textSpans[zt],kt=this.textPaths[zt]):(Tt=createTag("span"),styleDiv(Tt),kt=createTag("span"),styleDiv(kt),Tt.appendChild(kt)),this.globalData.fontManager.chars){var Kt=this.globalData.fontManager.getCharData(it.finalText[dt],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),Bt;if(Kt?Bt=Kt.data:Bt=null,Rt.reset(),Bt&&Bt.shapes&&Bt.shapes.length&&(Ft=Bt.shapes[0].it,Rt.scale(it.finalSize/100,it.finalSize/100),$t=this.createPathShape(Rt,Ft),kt.setAttribute("d",$t)),this.isMasked)this.innerElem.appendChild(kt);else{if(this.innerElem.appendChild(Tt),Bt&&Bt.shapes){document.body.appendChild(jt);var Ut=jt.getBBox();jt.setAttribute("width",Ut.width+2),jt.setAttribute("height",Ut.height+2),jt.setAttribute("viewBox",Ut.x-1+" "+(Ut.y-1)+" "+(Ut.width+2)+" "+(Ut.height+2));var Jt=jt.style,en="translate("+(Ut.x-1)+"px,"+(Ut.y-1)+"px)";Jt.transform=en,Jt.webkitTransform=en,St[dt].yOffset=Ut.y-1}else jt.setAttribute("width",1),jt.setAttribute("height",1);Tt.appendChild(jt)}}else if(kt.textContent=St[dt].val,kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(kt);else{this.innerElem.appendChild(Tt);var tn=kt.style,nn="translate3d(0,"+-it.finalSize/1.2+"px,0)";tn.transform=nn,tn.webkitTransform=nn}this.isMasked?this.textSpans[zt]=kt:this.textSpans[zt]=Tt,this.textSpans[zt].style.display="block",this.textPaths[zt]=kt,zt+=1}for(;zt<this.textSpans.length;)this.textSpans[zt].style.display="none",zt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var it;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),it=this.svgElement.style;var g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";it.transform=g,it.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var et,ot,ct=0,ut=this.textAnimator.renderedLetters,dt=this.textProperty.currentData.l;ot=dt.length;var ft,St,kt;for(et=0;et<ot;et+=1)dt[et].n?ct+=1:(St=this.textSpans[et],kt=this.textPaths[et],ft=ut[ct],ct+=1,ft._mdf.m&&(this.isMasked?St.setAttribute("transform",ft.m):(St.style.webkitTransform=ft.m,St.style.transform=ft.m)),St.style.opacity=ft.o,ft.sw&&ft._mdf.sw&&kt.setAttribute("stroke-width",ft.sw),ft.sc&&ft._mdf.sc&&kt.setAttribute("stroke",ft.sc),ft.fc&&ft._mdf.fc&&(kt.setAttribute("fill",ft.fc),kt.style.color=ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Tt=this.innerElem.getBBox();this.currentBBox.w!==Tt.width&&(this.currentBBox.w=Tt.width,this.svgElement.setAttribute("width",Tt.width)),this.currentBBox.h!==Tt.height&&(this.currentBBox.h=Tt.height,this.svgElement.setAttribute("height",Tt.height));var jt=1;if(this.currentBBox.w!==Tt.width+jt*2||this.currentBBox.h!==Tt.height+jt*2||this.currentBBox.x!==Tt.x-jt||this.currentBBox.y!==Tt.y-jt){this.currentBBox.w=Tt.width+jt*2,this.currentBBox.h=Tt.height+jt*2,this.currentBBox.x=Tt.x-jt,this.currentBBox.y=Tt.y-jt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),it=this.svgElement.style;var Rt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";it.transform=Rt,it.webkitTransform=Rt}}}};function HCameraElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initHierarchy();var ot=PropertyFactory.getProp;if(this.pe=ot(this,it.pe,0,0,this),it.ks.p.s?(this.px=ot(this,it.ks.p.x,1,0,this),this.py=ot(this,it.ks.p.y,1,0,this),this.pz=ot(this,it.ks.p.z,1,0,this)):this.p=ot(this,it.ks.p,1,0,this),it.ks.a&&(this.a=ot(this,it.ks.a,1,0,this)),it.ks.or.k.length&&it.ks.or.k[0].to){var ct,ut=it.ks.or.k.length;for(ct=0;ct<ut;ct+=1)it.ks.or.k[ct].to=null,it.ks.or.k[ct].ti=null}this.or=ot(this,it.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ot(this,it.ks.rx,0,degToRads,this),this.ry=ot(this,it.ks.ry,0,degToRads,this),this.rz=ot(this,it.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var it,g=this.comp.threeDElements.length,et,ot,ct;for(it=0;it<g;it+=1)if(et=this.comp.threeDElements[it],et.type==="3d"){ot=et.perspectiveElem.style,ct=et.container.style;var ut=this.pe.v+"px",dt="0px 0px 0px",ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ot.perspective=ut,ot.webkitPerspective=ut,ct.transformOrigin=dt,ct.mozTransformOrigin=dt,ct.webkitTransformOrigin=dt,ot.transform=ft,ot.webkitTransform=ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var it=this._isFirstFrame,g,et;if(this.hierarchy)for(et=this.hierarchy.length,g=0;g<et;g+=1)it=this.hierarchy[g].finalTransform.mProp._mdf||it;if(it||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(et=this.hierarchy.length-1,g=et;g>=0;g-=1){var ot=this.hierarchy[g].finalTransform.mProp;this.mat.translate(-ot.p.v[0],-ot.p.v[1],ot.p.v[2]),this.mat.rotateX(-ot.or.v[0]).rotateY(-ot.or.v[1]).rotateZ(ot.or.v[2]),this.mat.rotateX(-ot.rx.v).rotateY(-ot.ry.v).rotateZ(ot.rz.v),this.mat.scale(1/ot.s.v[0],1/ot.s.v[1],1/ot.s.v[2]),this.mat.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ct;this.p?ct=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ct=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ut=Math.sqrt(Math.pow(ct[0],2)+Math.pow(ct[1],2)+Math.pow(ct[2],2)),dt=[ct[0]/ut,ct[1]/ut,ct[2]/ut],ft=Math.sqrt(dt[2]*dt[2]+dt[0]*dt[0]),St=Math.atan2(dt[1],ft),kt=Math.atan2(dt[0],-dt[2]);this.mat.rotateY(kt).rotateX(-St)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Tt=!this._prevMat.equals(this.mat);if((Tt||this.pe._mdf)&&this.comp.threeDElements){et=this.comp.threeDElements.length;var jt,Rt,Ft;for(g=0;g<et;g+=1)if(jt=this.comp.threeDElements[g],jt.type==="3d"){if(Tt){var $t=this.mat.toCSS();Ft=jt.container.style,Ft.transform=$t,Ft.webkitTransform=$t}this.pe._mdf&&(Rt=jt.perspectiveElem.style,Rt.perspective=this.pe.v+"px",Rt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData),g=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(g),g.crossOrigin="anonymous",g.src=it,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){var ot=this.layers[g];if(!ot.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(et,g);else{for(var ct=0,ut,dt,ft;ct<g;)this.elements[ct]&&this.elements[ct]!==!0&&this.elements[ct].getBaseElement&&(dt=this.elements[ct],ft=this.layers[ct].ddd?this.getThreeDContainerByPos(ct):dt.getBaseElement(),ut=ft||ut),ct+=1;ut?(!ot.ddd||!this.supports3d)&&this.layerElement.insertBefore(et,ut):(!ot.ddd||!this.supports3d)&&this.layerElement.appendChild(et)}else this.addTo3dContainer(et,g)}},HybridRendererBase.prototype.createShape=function(it){return this.supports3d?new HShapeElement(it,this.globalData,this):new SVGShapeElement(it,this.globalData,this)},HybridRendererBase.prototype.createText=function(it){return this.supports3d?new HTextElement(it,this.globalData,this):new SVGTextLottieElement(it,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(it){return this.camera=new HCameraElement(it,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(it){return this.supports3d?new HImageElement(it,this.globalData,this):new IImageElement(it,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(it){return this.supports3d?new HSolidElement(it,this.globalData,this):new ISolidElement(it,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(it){for(var g=0,et=this.threeDElements.length;g<et;){if(this.threeDElements[g].startPos<=it&&this.threeDElements[g].endPos>=it)return this.threeDElements[g].perspectiveElem;g+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(it,g){var et=createTag("div"),ot,ct;styleDiv(et);var ut=createTag("div");if(styleDiv(ut),g==="3d"){ot=et.style,ot.width=this.globalData.compSize.w+"px",ot.height=this.globalData.compSize.h+"px";var dt="50% 50%";ot.webkitTransformOrigin=dt,ot.mozTransformOrigin=dt,ot.transformOrigin=dt,ct=ut.style;var ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ct.transform=ft,ct.webkitTransform=ft}et.appendChild(ut);var St={container:ut,perspectiveElem:et,startPos:it,endPos:it,type:g};return this.threeDElements.push(St),St},HybridRendererBase.prototype.build3dContainers=function(){var it,g=this.layers.length,et,ot="";for(it=0;it<g;it+=1)this.layers[it].ddd&&this.layers[it].ty!==3?(ot!=="3d"&&(ot="3d",et=this.createThreeDContainer(it,"3d")),et.endPos=Math.max(et.endPos,it)):(ot!=="2d"&&(ot="2d",et=this.createThreeDContainer(it,"2d")),et.endPos=Math.max(et.endPos,it));for(g=this.threeDElements.length,it=g-1;it>=0;it-=1)this.resizerElem.appendChild(this.threeDElements[it].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(it,g){for(var et=0,ot=this.threeDElements.length;et<ot;){if(g<=this.threeDElements[et].endPos){for(var ct=this.threeDElements[et].startPos,ut;ct<g;)this.elements[ct]&&this.elements[ct].getBaseElement&&(ut=this.elements[ct].getBaseElement()),ct+=1;ut?this.threeDElements[et].container.insertBefore(it,ut):this.threeDElements[et].container.appendChild(it);break}et+=1}},HybridRendererBase.prototype.configAnimation=function(it){var g=createTag("div"),et=this.animationItem.wrapper,ot=g.style;ot.width=it.w+"px",ot.height=it.h+"px",this.resizerElem=g,styleDiv(g),ot.transformStyle="flat",ot.mozTransformStyle="flat",ot.webkitTransformStyle="flat",this.renderConfig.className&&g.setAttribute("class",this.renderConfig.className),et.appendChild(g),ot.overflow="hidden";var ct=createNS("svg");ct.setAttribute("width","1"),ct.setAttribute("height","1"),styleDiv(ct),this.resizerElem.appendChild(ct);var ut=createNS("defs");ct.appendChild(ut),this.data=it,this.setupGlobalData(it,ct),this.globalData.defs=ut,this.layers=it.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var it=this.animationItem.wrapper.offsetWidth,g=this.animationItem.wrapper.offsetHeight,et=it/g,ot=this.globalData.compSize.w/this.globalData.compSize.h,ct,ut,dt,ft;ot>et?(ct=it/this.globalData.compSize.w,ut=it/this.globalData.compSize.w,dt=0,ft=(g-this.globalData.compSize.h*(it/this.globalData.compSize.w))/2):(ct=g/this.globalData.compSize.h,ut=g/this.globalData.compSize.h,dt=(it-this.globalData.compSize.w*(g/this.globalData.compSize.h))/2,ft=0);var St=this.resizerElem.style;St.webkitTransform="matrix3d("+ct+",0,0,0,0,"+ut+",0,0,0,0,1,0,"+dt+","+ft+",0,1)",St.transform=St.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var it=this.globalData.compSize.w,g=this.globalData.compSize.h,et,ot=this.threeDElements.length;for(et=0;et<ot;et+=1){var ct=this.threeDElements[et].perspectiveElem.style;ct.webkitPerspective=Math.sqrt(Math.pow(it,2)+Math.pow(g,2))+"px",ct.perspective=ct.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(it){var g,et=it.length,ot=createTag("div");for(g=0;g<et;g+=1)if(it[g].xt){var ct=this.createComp(it[g],ot,this.globalData.comp,null);ct.initExpressions(),this.globalData.projectInterface.registerComposition(ct)}};function HCompElement(it,g,et){this.layers=it.layers,this.supports3d=!it.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(it,g){for(var et=0,ot;et<g;)this.elements[et]&&this.elements[et].getBaseElement&&(ot=this.elements[et].getBaseElement()),et+=1;ot?this.layerElement.insertBefore(it,ot):this.layerElement.appendChild(it)},HCompElement.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};function HybridRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"},runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};var CompExpressionInterface=function(){return function(it){function g(et){for(var ot=0,ct=it.layers.length;ot<ct;){if(it.layers[ot].nm===et||it.layers[ot].ind===et)return it.elements[ot].layerInterface;ot+=1}return null}return Object.defineProperty(g,"_name",{value:it.data.nm}),g.layer=g,g.pixelAspect=1,g.height=it.data.h||it.globalData.compSize.h,g.width=it.data.w||it.globalData.compSize.w,g.pixelAspect=1,g.frameDuration=1/it.globalData.frameRate,g.displayStartTime=0,g.numLayers=it.layers.length,g}}();function _typeof$2(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(et){return typeof et}:_typeof$2=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(it)}function seedRandom(it,g){var et=this,ot=256,ct=6,ut=52,dt="random",ft=g.pow(ot,ct),St=g.pow(2,ut),kt=St*2,Tt=ot-1,jt;function Rt(Jt,en,tn){var nn=[];en=en===!0?{entropy:!0}:en||{};var rn=Kt(zt(en.entropy?[Jt,Ut(it)]:Jt===null?Bt():Jt,3),nn),on=new Ft(nn),dn=function(){for(var fn=on.g(ct),mn=ft,En=0;fn<St;)fn=(fn+En)*ot,mn*=ot,En=on.g(1);for(;fn>=kt;)fn/=2,mn/=2,En>>>=1;return(fn+En)/mn};return dn.int32=function(){return on.g(4)|0},dn.quick=function(){return on.g(4)/4294967296},dn.double=dn,Kt(Ut(on.S),it),(en.pass||tn||function(cn,fn,mn,En){return En&&(En.S&&$t(En,on),cn.state=function(){return $t(on,{})}),mn?(g[dt]=cn,fn):cn})(dn,rn,"global"in en?en.global:this==g,en.state)}g["seed"+dt]=Rt;function Ft(Jt){var en,tn=Jt.length,nn=this,rn=0,on=nn.i=nn.j=0,dn=nn.S=[];for(tn||(Jt=[tn++]);rn<ot;)dn[rn]=rn++;for(rn=0;rn<ot;rn++)dn[rn]=dn[on=Tt&on+Jt[rn%tn]+(en=dn[rn])],dn[on]=en;nn.g=function(cn){for(var fn,mn=0,En=nn.i,Sn=nn.j,wn=nn.S;cn--;)fn=wn[En=Tt&En+1],mn=mn*ot+wn[Tt&(wn[En]=wn[Sn=Tt&Sn+fn])+(wn[Sn]=fn)];return nn.i=En,nn.j=Sn,mn}}function $t(Jt,en){return en.i=Jt.i,en.j=Jt.j,en.S=Jt.S.slice(),en}function zt(Jt,en){var tn=[],nn=_typeof$2(Jt),rn;if(en&&nn=="object")for(rn in Jt)try{tn.push(zt(Jt[rn],en-1))}catch{}return tn.length?tn:nn=="string"?Jt:Jt+"\0"}function Kt(Jt,en){for(var tn=Jt+"",nn,rn=0;rn<tn.length;)en[Tt&rn]=Tt&(nn^=en[Tt&rn]*19)+tn.charCodeAt(rn++);return Ut(en)}function Bt(){try{var Jt=new Uint8Array(ot);return(et.crypto||et.msCrypto).getRandomValues(Jt),Ut(Jt)}catch{var en=et.navigator,tn=en&&en.plugins;return[+new Date,et,tn,et.screen,Ut(it)]}}function Ut(Jt){return String.fromCharCode.apply(0,Jt)}Kt(g.random(),it)}function initialize$2(it){seedRandom([],it)}var propTypes={SHAPE:"shape"};function _typeof$1(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(et){return typeof et}:_typeof$1=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(it)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(it){return it.constructor===Array||it.constructor===Float32Array}function isNumerable(it,g){return it==="number"||g instanceof Number||it==="boolean"||it==="string"}function $bm_neg(it){var g=_typeof$1(it);if(g==="number"||it instanceof Number||g==="boolean")return-it;if($bm_isInstanceOfArray(it)){var et,ot=it.length,ct=[];for(et=0;et<ot;et+=1)ct[et]=-it[et];return ct}return it.propType?it.v:-it}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g)||et==="string"||ot==="string")return it+g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]+=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it+g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]+g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}var add=sum;function sub(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g))return et==="string"&&(it=parseInt(it,10)),ot==="string"&&(g=parseInt(g,10)),it-g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]-=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it-g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]-g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}function mul(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it*g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]*g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it*g[ut];return ct}return 0}function div(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it/g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]/g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it/g[ut];return ct}return 0}function mod(it,g){return typeof it=="string"&&(it=parseInt(it,10)),typeof g=="string"&&(g=parseInt(g,10)),it%g}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(it,g,et){if(g>et){var ot=et;et=g,g=ot}return Math.min(Math.max(it,g),et)}function radiansToDegrees(it){return it/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(it){return it*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(it,g){if(typeof it=="number"||it instanceof Number)return g=g||0,Math.abs(it-g);g||(g=helperLengthArray);var et,ot=Math.min(it.length,g.length),ct=0;for(et=0;et<ot;et+=1)ct+=Math.pow(g[et]-it[et],2);return Math.sqrt(ct)}function normalize(it){return div(it,length(it))}function rgbToHsl(it){var g=it[0],et=it[1],ot=it[2],ct=Math.max(g,et,ot),ut=Math.min(g,et,ot),dt,ft,St=(ct+ut)/2;if(ct===ut)dt=0,ft=0;else{var kt=ct-ut;switch(ft=St>.5?kt/(2-ct-ut):kt/(ct+ut),ct){case g:dt=(et-ot)/kt+(et<ot?6:0);break;case et:dt=(ot-g)/kt+2;break;case ot:dt=(g-et)/kt+4;break}dt/=6}return[dt,ft,St,it[3]]}function hue2rgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslToRgb(it){var g=it[0],et=it[1],ot=it[2],ct,ut,dt;if(et===0)ct=ot,dt=ot,ut=ot;else{var ft=ot<.5?ot*(1+et):ot+et-ot*et,St=2*ot-ft;ct=hue2rgb(St,ft,g+1/3),ut=hue2rgb(St,ft,g),dt=hue2rgb(St,ft,g-1/3)}return[ct,ut,dt,it[3]]}function linear(it,g,et,ot,ct){if((ot===void 0||ct===void 0)&&(ot=g,ct=et,g=0,et=1),et<g){var ut=et;et=g,g=ut}if(it<=g)return ot;if(it>=et)return ct;var dt=et===g?0:(it-g)/(et-g);if(!ot.length)return ot+(ct-ot)*dt;var ft,St=ot.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=ot[ft]+(ct[ft]-ot[ft])*dt;return kt}function random(it,g){if(g===void 0&&(it===void 0?(it=0,g=1):(g=it,it=void 0)),g.length){var et,ot=g.length;it||(it=createTypedArray("float32",ot));var ct=createTypedArray("float32",ot),ut=BMMath.random();for(et=0;et<ot;et+=1)ct[et]=it[et]+ut*(g[et]-it[et]);return ct}it===void 0&&(it=0);var dt=BMMath.random();return it+dt*(g-it)}function createPath(it,g,et,ot){var ct,ut=it.length,dt=shapePool.newElement();dt.setPathData(!!ot,ut);var ft=[0,0],St,kt;for(ct=0;ct<ut;ct+=1)St=g&&g[ct]?g[ct]:ft,kt=et&&et[ct]?et[ct]:ft,dt.setTripleAt(it[ct][0],it[ct][1],kt[0]+it[ct][0],kt[1]+it[ct][1],St[0]+it[ct][0],St[1]+it[ct][1],ct,!0);return dt}function initiateExpression(elem,data,property){function noOp(it){return it}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function it(g,et){var ot,ct,ut=this.pv.length?this.pv.length:1,dt=createTypedArray("float32",ut);g=5;var ft=Math.floor(time*g);for(ot=0,ct=0;ot<ft;){for(ct=0;ct<ut;ct+=1)dt[ct]+=-et+et*2*BMMath.random();ot+=1}var St=time*g,kt=St-Math.floor(St),Tt=createTypedArray("float32",ut);if(ut>1){for(ct=0;ct<ut;ct+=1)Tt[ct]=this.pv[ct]+dt[ct]+(-et+et*2*BMMath.random())*kt;return Tt}return this.pv+dt[0]+(-et+et*2*BMMath.random())*kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(it,g){return loopIn(it,g,!0)}function loopOutDuration(it,g){return loopOut(it,g,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(it,g){var et=[g[0]-it[0],g[1]-it[1],g[2]-it[2]],ot=Math.atan2(et[0],Math.sqrt(et[1]*et[1]+et[2]*et[2]))/degToRads,ct=-Math.atan2(et[1],et[2])/degToRads;return[ct,ot,0]}function easeOut(it,g,et,ot,ct){return applyEase(easeOutBez,it,g,et,ot,ct)}function easeIn(it,g,et,ot,ct){return applyEase(easeInBez,it,g,et,ot,ct)}function ease(it,g,et,ot,ct){return applyEase(easeInOutBez,it,g,et,ot,ct)}function applyEase(it,g,et,ot,ct,ut){ct===void 0?(ct=et,ut=ot):g=(g-et)/(ot-et),g>1?g=1:g<0&&(g=0);var dt=it(g);if($bm_isInstanceOfArray(ct)){var ft,St=ct.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=(ut[ft]-ct[ft])*dt+ct[ft];return kt}return(ut-ct)*dt+ct}function nearestKey(it){var g,et=data.k.length,ot,ct;if(!data.k.length||typeof data.k[0]=="number")ot=0,ct=0;else if(ot=-1,it*=elem.comp.globalData.frameRate,it<data.k[0].t)ot=1,ct=data.k[0].t;else{for(g=0;g<et-1;g+=1)if(it===data.k[g].t){ot=g+1,ct=data.k[g].t;break}else if(it>data.k[g].t&&it<data.k[g+1].t){it-data.k[g].t>data.k[g+1].t-it?(ot=g+2,ct=data.k[g+1].t):(ot=g+1,ct=data.k[g].t);break}ot===-1&&(ot=g+1,ct=data.k[g].t)}var ut={};return ut.index=ot,ut.time=ct/elem.comp.globalData.frameRate,ut}function key(it){var g,et,ot;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+it);it-=1,g={time:data.k[it].t/elem.comp.globalData.frameRate,value:[]};var ct=Object.prototype.hasOwnProperty.call(data.k[it],"s")?data.k[it].s:data.k[it-1].e;for(ot=ct.length,et=0;et<ot;et+=1)g[et]=ct[et],g.value[et]=ct[et];return g}function framesToTime(it,g){return g||(g=elem.comp.globalData.frameRate),it/g}function timeToFrames(it,g){return!it&&it!==0&&(it=time),g||(g=elem.comp.globalData.frameRate),it*g}function seedRandom(it){BMMath.seedrandom(randSeed+it)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(it,g){return typeof value=="string"?g===void 0?value.substring(it):value.substring(it,g):""}function substr(it,g){return typeof value=="string"?g===void 0?value.substr(it):value.substr(it,g):""}function posterizeTime(it){time=it===0?0:Math.floor(time*it)/it,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(it){return value=it,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var it={};it.initExpressions=g,it.resetFrame=ExpressionManager.resetFrame;function g(et){var ot=0,ct=[];function ut(){ot+=1}function dt(){ot-=1,ot===0&&St()}function ft(kt){ct.indexOf(kt)===-1&&ct.push(kt)}function St(){var kt,Tt=ct.length;for(kt=0;kt<Tt;kt+=1)ct[kt].release();ct.length=0}et.renderer.compInterface=CompExpressionInterface(et.renderer),et.renderer.globalData.projectInterface.registerComposition(et.renderer),et.renderer.globalData.pushExpression=ut,et.renderer.globalData.popExpression=dt,et.renderer.globalData.registerExpressionProperty=ft}return it}(),MaskManagerInterface=function(){function it(et,ot){this._mask=et,this._data=ot}Object.defineProperty(it.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(it.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var g=function(ot){var ct=createSizedArray(ot.viewData.length),ut,dt=ot.viewData.length;for(ut=0;ut<dt;ut+=1)ct[ut]=new it(ot.viewData[ut],ot.masksProperties[ut]);var ft=function(kt){for(ut=0;ut<dt;){if(ot.masksProperties[ut].nm===kt)return ct[ut];ut+=1}return null};return ft};return g}(),ExpressionPropertyInterface=function(){var it={pv:0,v:0,mult:1},g={pv:[0,0,0],v:[0,0,0],mult:1};function et(dt,ft,St){Object.defineProperty(dt,"velocity",{get:function(){return ft.getVelocityAtTime(ft.comp.currentFrame)}}),dt.numKeys=ft.keyframes?ft.keyframes.length:0,dt.key=function(kt){if(!dt.numKeys)return 0;var Tt="";"s"in ft.keyframes[kt-1]?Tt=ft.keyframes[kt-1].s:"e"in ft.keyframes[kt-2]?Tt=ft.keyframes[kt-2].e:Tt=ft.keyframes[kt-2].s;var jt=St==="unidimensional"?new Number(Tt):Object.assign({},Tt);return jt.time=ft.keyframes[kt-1].t/ft.elem.comp.globalData.frameRate,jt.value=St==="unidimensional"?Tt[0]:Tt,jt},dt.valueAtTime=ft.getValueAtTime,dt.speedAtTime=ft.getSpeedAtTime,dt.velocityAtTime=ft.getVelocityAtTime,dt.propertyGroup=ft.propertyGroup}function ot(dt){(!dt||!("pv"in dt))&&(dt=it);var ft=1/dt.mult,St=dt.pv*ft,kt=new Number(St);return kt.value=St,et(kt,dt,"unidimensional"),function(){return dt.k&&dt.getValue(),St=dt.v*ft,kt.value!==St&&(kt=new Number(St),kt.value=St,et(kt,dt,"unidimensional")),kt}}function ct(dt){(!dt||!("pv"in dt))&&(dt=g);var ft=1/dt.mult,St=dt.data&&dt.data.l||dt.pv.length,kt=createTypedArray("float32",St),Tt=createTypedArray("float32",St);return kt.value=Tt,et(kt,dt,"multidimensional"),function(){dt.k&&dt.getValue();for(var jt=0;jt<St;jt+=1)Tt[jt]=dt.v[jt]*ft,kt[jt]=Tt[jt];return kt}}function ut(){return it}return function(dt){return dt?dt.propType==="unidimensional"?ot(dt):ct(dt):ut}}(),TransformExpressionInterface=function(){return function(it){function g(dt){switch(dt){case"scale":case"Scale":case"ADBE Scale":case 6:return g.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return g.rotation;case"ADBE Rotate X":return g.xRotation;case"ADBE Rotate Y":return g.yRotation;case"position":case"Position":case"ADBE Position":case 2:return g.position;case"ADBE Position_0":return g.xPosition;case"ADBE Position_1":return g.yPosition;case"ADBE Position_2":return g.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return g.anchorPoint;case"opacity":case"Opacity":case 11:return g.opacity;default:return null}}Object.defineProperty(g,"rotation",{get:ExpressionPropertyInterface(it.r||it.rz)}),Object.defineProperty(g,"zRotation",{get:ExpressionPropertyInterface(it.rz||it.r)}),Object.defineProperty(g,"xRotation",{get:ExpressionPropertyInterface(it.rx)}),Object.defineProperty(g,"yRotation",{get:ExpressionPropertyInterface(it.ry)}),Object.defineProperty(g,"scale",{get:ExpressionPropertyInterface(it.s)});var et,ot,ct,ut;return it.p?ut=ExpressionPropertyInterface(it.p):(et=ExpressionPropertyInterface(it.px),ot=ExpressionPropertyInterface(it.py),it.pz&&(ct=ExpressionPropertyInterface(it.pz))),Object.defineProperty(g,"position",{get:function(){return it.p?ut():[et(),ot(),ct?ct():0]}}),Object.defineProperty(g,"xPosition",{get:ExpressionPropertyInterface(it.px)}),Object.defineProperty(g,"yPosition",{get:ExpressionPropertyInterface(it.py)}),Object.defineProperty(g,"zPosition",{get:ExpressionPropertyInterface(it.pz)}),Object.defineProperty(g,"anchorPoint",{get:ExpressionPropertyInterface(it.a)}),Object.defineProperty(g,"opacity",{get:ExpressionPropertyInterface(it.o)}),Object.defineProperty(g,"skew",{get:ExpressionPropertyInterface(it.sk)}),Object.defineProperty(g,"skewAxis",{get:ExpressionPropertyInterface(it.sa)}),Object.defineProperty(g,"orientation",{get:ExpressionPropertyInterface(it.or)}),g}}(),LayerExpressionInterface=function(){function it(kt){var Tt=new Matrix;if(kt!==void 0){var jt=this._elem.finalTransform.mProp.getValueAtTime(kt);jt.clone(Tt)}else{var Rt=this._elem.finalTransform.mProp;Rt.applyToMatrix(Tt)}return Tt}function g(kt,Tt){var jt=this.getMatrix(Tt);return jt.props[12]=0,jt.props[13]=0,jt.props[14]=0,this.applyPoint(jt,kt)}function et(kt,Tt){var jt=this.getMatrix(Tt);return this.applyPoint(jt,kt)}function ot(kt,Tt){var jt=this.getMatrix(Tt);return jt.props[12]=0,jt.props[13]=0,jt.props[14]=0,this.invertPoint(jt,kt)}function ct(kt,Tt){var jt=this.getMatrix(Tt);return this.invertPoint(jt,kt)}function ut(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var jt,Rt=this._elem.hierarchy.length;for(jt=0;jt<Rt;jt+=1)this._elem.hierarchy[jt].finalTransform.mProp.applyToMatrix(kt)}return kt.applyToPointArray(Tt[0],Tt[1],Tt[2]||0)}function dt(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var jt,Rt=this._elem.hierarchy.length;for(jt=0;jt<Rt;jt+=1)this._elem.hierarchy[jt].finalTransform.mProp.applyToMatrix(kt)}return kt.inversePoint(Tt)}function ft(kt){var Tt=new Matrix;if(Tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Tt),this._elem.hierarchy&&this._elem.hierarchy.length){var jt,Rt=this._elem.hierarchy.length;for(jt=0;jt<Rt;jt+=1)this._elem.hierarchy[jt].finalTransform.mProp.applyToMatrix(Tt);return Tt.inversePoint(kt)}return Tt.inversePoint(kt)}function St(){return[1,1,1,1]}return function(kt){var Tt;function jt(zt){Ft.mask=new MaskManagerInterface(zt,kt)}function Rt(zt){Ft.effect=zt}function Ft(zt){switch(zt){case"ADBE Root Vectors Group":case"Contents":case 2:return Ft.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Ft.effect;case"ADBE Text Properties":return Ft.textInterface;default:return null}}Ft.getMatrix=it,Ft.invertPoint=dt,Ft.applyPoint=ut,Ft.toWorld=et,Ft.toWorldVec=g,Ft.fromWorld=ct,Ft.fromWorldVec=ot,Ft.toComp=et,Ft.fromComp=ft,Ft.sampleImage=St,Ft.sourceRectAtTime=kt.sourceRectAtTime.bind(kt),Ft._elem=kt,Tt=TransformExpressionInterface(kt.finalTransform.mProp);var $t=getDescriptor(Tt,"anchorPoint");return Object.defineProperties(Ft,{hasParent:{get:function(){return kt.hierarchy.length}},parent:{get:function(){return kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Tt,"rotation"),scale:getDescriptor(Tt,"scale"),position:getDescriptor(Tt,"position"),opacity:getDescriptor(Tt,"opacity"),anchorPoint:$t,anchor_point:$t,transform:{get:function(){return Tt}},active:{get:function(){return kt.isInRange}}}),Ft.startTime=kt.data.st,Ft.index=kt.data.ind,Ft.source=kt.data.refId,Ft.height=kt.data.ty===0?kt.data.h:100,Ft.width=kt.data.ty===0?kt.data.w:100,Ft.inPoint=kt.data.ip/kt.comp.globalData.frameRate,Ft.outPoint=kt.data.op/kt.comp.globalData.frameRate,Ft._name=kt.data.nm,Ft.registerMaskInterface=jt,Ft.registerEffectsInterface=Rt,Ft}}(),propertyGroupFactory=function(){return function(it,g){return function(et){return et=et===void 0?1:et,et<=0?it:g(et-1)}}}(),PropertyInterface=function(){return function(it,g){var et={_name:it};function ot(ct){return ct=ct===void 0?1:ct,ct<=0?et:g(ct-1)}return ot}}(),EffectsExpressionInterface=function(){var it={createEffectsInterface:g};function g(ct,ut){if(ct.effectsManager){var dt=[],ft=ct.data.ef,St,kt=ct.effectsManager.effectElements.length;for(St=0;St<kt;St+=1)dt.push(et(ft[St],ct.effectsManager.effectElements[St],ut,ct));var Tt=ct.data.ef||[],jt=function(Ft){for(St=0,kt=Tt.length;St<kt;){if(Ft===Tt[St].nm||Ft===Tt[St].mn||Ft===Tt[St].ix)return dt[St];St+=1}return null};return Object.defineProperty(jt,"numProperties",{get:function(){return Tt.length}}),jt}return null}function et(ct,ut,dt,ft){function St(Ft){for(var $t=ct.ef,zt=0,Kt=$t.length;zt<Kt;){if(Ft===$t[zt].nm||Ft===$t[zt].mn||Ft===$t[zt].ix)return $t[zt].ty===5?Tt[zt]:Tt[zt]();zt+=1}throw new Error}var kt=propertyGroupFactory(St,dt),Tt=[],jt,Rt=ct.ef.length;for(jt=0;jt<Rt;jt+=1)ct.ef[jt].ty===5?Tt.push(et(ct.ef[jt],ut.effectElements[jt],ut.effectElements[jt].propertyGroup,ft)):Tt.push(ot(ut.effectElements[jt],ct.ef[jt].ty,ft,kt));return ct.mn==="ADBE Color Control"&&Object.defineProperty(St,"color",{get:function(){return Tt[0]()}}),Object.defineProperties(St,{numProperties:{get:function(){return ct.np}},_name:{value:ct.nm},propertyGroup:{value:kt}}),St.enabled=ct.en!==0,St.active=St.enabled,St}function ot(ct,ut,dt,ft){var St=ExpressionPropertyInterface(ct.p);function kt(){return ut===10?dt.comp.compInterface(ct.p.v):St()}return ct.p.setGroupProperty&&ct.p.setGroupProperty(PropertyInterface("",ft)),kt}return it}(),ShapePathInterface=function(){return function(g,et,ot){var ct=et.sh;function ut(ft){return ft==="Shape"||ft==="shape"||ft==="Path"||ft==="path"||ft==="ADBE Vector Shape"||ft===2?ut.path:null}var dt=propertyGroupFactory(ut,ot);return ct.setGroupProperty(PropertyInterface("Path",dt)),Object.defineProperties(ut,{path:{get:function(){return ct.k&&ct.getValue(),ct}},shape:{get:function(){return ct.k&&ct.getValue(),ct}},_name:{value:g.nm},ix:{value:g.ix},propertyIndex:{value:g.ix},mn:{value:g.mn},propertyGroup:{value:ot}}),ut}}(),ShapeExpressionInterface=function(){function it($t,zt,Kt){var Bt=[],Ut,Jt=$t?$t.length:0;for(Ut=0;Ut<Jt;Ut+=1)$t[Ut].ty==="gr"?Bt.push(et($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="fl"?Bt.push(ot($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="st"?Bt.push(dt($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="tm"?Bt.push(ft($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="tr"||($t[Ut].ty==="el"?Bt.push(kt($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="sr"?Bt.push(Tt($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="sh"?Bt.push(ShapePathInterface($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="rc"?Bt.push(jt($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="rd"?Bt.push(Rt($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="rp"?Bt.push(Ft($t[Ut],zt[Ut],Kt)):$t[Ut].ty==="gf"?Bt.push(ct($t[Ut],zt[Ut],Kt)):Bt.push(ut($t[Ut],zt[Ut])));return Bt}function g($t,zt,Kt){var Bt,Ut=function(tn){for(var nn=0,rn=Bt.length;nn<rn;){if(Bt[nn]._name===tn||Bt[nn].mn===tn||Bt[nn].propertyIndex===tn||Bt[nn].ix===tn||Bt[nn].ind===tn)return Bt[nn];nn+=1}return typeof tn=="number"?Bt[tn-1]:null};Ut.propertyGroup=propertyGroupFactory(Ut,Kt),Bt=it($t.it,zt.it,Ut.propertyGroup),Ut.numProperties=Bt.length;var Jt=St($t.it[$t.it.length-1],zt.it[zt.it.length-1],Ut.propertyGroup);return Ut.transform=Jt,Ut.propertyIndex=$t.cix,Ut._name=$t.nm,Ut}function et($t,zt,Kt){var Bt=function(tn){switch(tn){case"ADBE Vectors Group":case"Contents":case 2:return Bt.content;default:return Bt.transform}};Bt.propertyGroup=propertyGroupFactory(Bt,Kt);var Ut=g($t,zt,Bt.propertyGroup),Jt=St($t.it[$t.it.length-1],zt.it[zt.it.length-1],Bt.propertyGroup);return Bt.content=Ut,Bt.transform=Jt,Object.defineProperty(Bt,"_name",{get:function(){return $t.nm}}),Bt.numProperties=$t.np,Bt.propertyIndex=$t.ix,Bt.nm=$t.nm,Bt.mn=$t.mn,Bt}function ot($t,zt,Kt){function Bt(Ut){return Ut==="Color"||Ut==="color"?Bt.color:Ut==="Opacity"||Ut==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Kt)),zt.o.setGroupProperty(PropertyInterface("Opacity",Kt)),Bt}function ct($t,zt,Kt){function Bt(Ut){return Ut==="Start Point"||Ut==="start point"?Bt.startPoint:Ut==="End Point"||Ut==="end point"?Bt.endPoint:Ut==="Opacity"||Ut==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{startPoint:{get:ExpressionPropertyInterface(zt.s)},endPoint:{get:ExpressionPropertyInterface(zt.e)},opacity:{get:ExpressionPropertyInterface(zt.o)},type:{get:function(){return"a"}},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.s.setGroupProperty(PropertyInterface("Start Point",Kt)),zt.e.setGroupProperty(PropertyInterface("End Point",Kt)),zt.o.setGroupProperty(PropertyInterface("Opacity",Kt)),Bt}function ut(){function $t(){return null}return $t}function dt($t,zt,Kt){var Bt=propertyGroupFactory(rn,Kt),Ut=propertyGroupFactory(nn,Bt);function Jt(on){Object.defineProperty(nn,$t.d[on].nm,{get:ExpressionPropertyInterface(zt.d.dataProps[on].p)})}var en,tn=$t.d?$t.d.length:0,nn={};for(en=0;en<tn;en+=1)Jt(en),zt.d.dataProps[en].p.setGroupProperty(Ut);function rn(on){return on==="Color"||on==="color"?rn.color:on==="Opacity"||on==="opacity"?rn.opacity:on==="Stroke Width"||on==="stroke width"?rn.strokeWidth:null}return Object.defineProperties(rn,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},strokeWidth:{get:ExpressionPropertyInterface(zt.w)},dash:{get:function(){return nn}},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Bt)),zt.o.setGroupProperty(PropertyInterface("Opacity",Bt)),zt.w.setGroupProperty(PropertyInterface("Stroke Width",Bt)),rn}function ft($t,zt,Kt){function Bt(Jt){return Jt===$t.e.ix||Jt==="End"||Jt==="end"?Bt.end:Jt===$t.s.ix?Bt.start:Jt===$t.o.ix?Bt.offset:null}var Ut=propertyGroupFactory(Bt,Kt);return Bt.propertyIndex=$t.ix,zt.s.setGroupProperty(PropertyInterface("Start",Ut)),zt.e.setGroupProperty(PropertyInterface("End",Ut)),zt.o.setGroupProperty(PropertyInterface("Offset",Ut)),Bt.propertyIndex=$t.ix,Bt.propertyGroup=Kt,Object.defineProperties(Bt,{start:{get:ExpressionPropertyInterface(zt.s)},end:{get:ExpressionPropertyInterface(zt.e)},offset:{get:ExpressionPropertyInterface(zt.o)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function St($t,zt,Kt){function Bt(Jt){return $t.a.ix===Jt||Jt==="Anchor Point"?Bt.anchorPoint:$t.o.ix===Jt||Jt==="Opacity"?Bt.opacity:$t.p.ix===Jt||Jt==="Position"?Bt.position:$t.r.ix===Jt||Jt==="Rotation"||Jt==="ADBE Vector Rotation"?Bt.rotation:$t.s.ix===Jt||Jt==="Scale"?Bt.scale:$t.sk&&$t.sk.ix===Jt||Jt==="Skew"?Bt.skew:$t.sa&&$t.sa.ix===Jt||Jt==="Skew Axis"?Bt.skewAxis:null}var Ut=propertyGroupFactory(Bt,Kt);return zt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ut)),zt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ut)),zt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ut)),zt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ut)),zt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ut)),zt.transform.mProps.sk&&(zt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ut)),zt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ut))),zt.transform.op.setGroupProperty(PropertyInterface("Opacity",Ut)),Object.defineProperties(Bt,{opacity:{get:ExpressionPropertyInterface(zt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(zt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(zt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(zt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(zt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(zt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(zt.transform.mProps.sa)},_name:{value:$t.nm}}),Bt.ty="tr",Bt.mn=$t.mn,Bt.propertyGroup=Kt,Bt}function kt($t,zt,Kt){function Bt(en){return $t.p.ix===en?Bt.position:$t.s.ix===en?Bt.size:null}var Ut=propertyGroupFactory(Bt,Kt);Bt.propertyIndex=$t.ix;var Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Jt.s.setGroupProperty(PropertyInterface("Size",Ut)),Jt.p.setGroupProperty(PropertyInterface("Position",Ut)),Object.defineProperties(Bt,{size:{get:ExpressionPropertyInterface(Jt.s)},position:{get:ExpressionPropertyInterface(Jt.p)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Tt($t,zt,Kt){function Bt(en){return $t.p.ix===en?Bt.position:$t.r.ix===en?Bt.rotation:$t.pt.ix===en?Bt.points:$t.or.ix===en||en==="ADBE Vector Star Outer Radius"?Bt.outerRadius:$t.os.ix===en?Bt.outerRoundness:$t.ir&&($t.ir.ix===en||en==="ADBE Vector Star Inner Radius")?Bt.innerRadius:$t.is&&$t.is.ix===en?Bt.innerRoundness:null}var Ut=propertyGroupFactory(Bt,Kt),Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Bt.propertyIndex=$t.ix,Jt.or.setGroupProperty(PropertyInterface("Outer Radius",Ut)),Jt.os.setGroupProperty(PropertyInterface("Outer Roundness",Ut)),Jt.pt.setGroupProperty(PropertyInterface("Points",Ut)),Jt.p.setGroupProperty(PropertyInterface("Position",Ut)),Jt.r.setGroupProperty(PropertyInterface("Rotation",Ut)),$t.ir&&(Jt.ir.setGroupProperty(PropertyInterface("Inner Radius",Ut)),Jt.is.setGroupProperty(PropertyInterface("Inner Roundness",Ut))),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Jt.p)},rotation:{get:ExpressionPropertyInterface(Jt.r)},points:{get:ExpressionPropertyInterface(Jt.pt)},outerRadius:{get:ExpressionPropertyInterface(Jt.or)},outerRoundness:{get:ExpressionPropertyInterface(Jt.os)},innerRadius:{get:ExpressionPropertyInterface(Jt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Jt.is)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function jt($t,zt,Kt){function Bt(en){return $t.p.ix===en?Bt.position:$t.r.ix===en?Bt.roundness:$t.s.ix===en||en==="Size"||en==="ADBE Vector Rect Size"?Bt.size:null}var Ut=propertyGroupFactory(Bt,Kt),Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Bt.propertyIndex=$t.ix,Jt.p.setGroupProperty(PropertyInterface("Position",Ut)),Jt.s.setGroupProperty(PropertyInterface("Size",Ut)),Jt.r.setGroupProperty(PropertyInterface("Rotation",Ut)),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Jt.p)},roundness:{get:ExpressionPropertyInterface(Jt.r)},size:{get:ExpressionPropertyInterface(Jt.s)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Rt($t,zt,Kt){function Bt(en){return $t.r.ix===en||en==="Round Corners 1"?Bt.radius:null}var Ut=propertyGroupFactory(Bt,Kt),Jt=zt;return Bt.propertyIndex=$t.ix,Jt.rd.setGroupProperty(PropertyInterface("Radius",Ut)),Object.defineProperties(Bt,{radius:{get:ExpressionPropertyInterface(Jt.rd)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Ft($t,zt,Kt){function Bt(en){return $t.c.ix===en||en==="Copies"?Bt.copies:$t.o.ix===en||en==="Offset"?Bt.offset:null}var Ut=propertyGroupFactory(Bt,Kt),Jt=zt;return Bt.propertyIndex=$t.ix,Jt.c.setGroupProperty(PropertyInterface("Copies",Ut)),Jt.o.setGroupProperty(PropertyInterface("Offset",Ut)),Object.defineProperties(Bt,{copies:{get:ExpressionPropertyInterface(Jt.c)},offset:{get:ExpressionPropertyInterface(Jt.o)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}return function($t,zt,Kt){var Bt;function Ut(en){if(typeof en=="number")return en=en===void 0?1:en,en===0?Kt:Bt[en-1];for(var tn=0,nn=Bt.length;tn<nn;){if(Bt[tn]._name===en)return Bt[tn];tn+=1}return null}function Jt(){return Kt}return Ut.propertyGroup=propertyGroupFactory(Ut,Jt),Bt=it($t,zt,Ut.propertyGroup),Ut.numProperties=Bt.length,Ut._name="Contents",Ut}}(),TextExpressionInterface=function(){return function(it){var g;function et(ot){switch(ot){case"ADBE Text Document":return et.sourceText;default:return null}}return Object.defineProperty(et,"sourceText",{get:function(){it.textProperty.getValue();var ct=it.textProperty.currentData.t;return(!g||ct!==g.value)&&(g=new String(ct),g.value=ct||new String(ct),Object.defineProperty(g,"style",{get:function(){return{fillColor:it.textProperty.currentData.fc}}})),g}}),et}}();function _typeof(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(it)}var FootageInterface=function(){var it=function(ot){var ct="",ut=ot.getFootageData();function dt(){return ct="",ut=ot.getFootageData(),ft}function ft(St){if(ut[St])return ct=St,ut=ut[St],_typeof(ut)==="object"?ft:ut;var kt=St.indexOf(ct);if(kt!==-1){var Tt=parseInt(St.substr(kt+ct.length),10);return ut=ut[Tt],_typeof(ut)==="object"?ft:ut}return""}return dt},g=function(ot){function ct(ut){return ut==="Outline"?ct.outlineInterface():null}return ct._name="Outline",ct.outlineInterface=it(ot),ct};return function(et){function ot(ct){return ct==="Data"?ot.dataInterface:null}return ot._name="Data",ot.dataInterface=g(et),ot}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(it){return interfaces[it]||null}var expressionHelpers=function(){function it(dt,ft,St){ft.x&&(St.k=!0,St.x=!0,St.initiateExpression=ExpressionManager.initiateExpression,St.effectsSequence.push(St.initiateExpression(dt,ft,St).bind(St)))}function g(dt){return dt*=this.elem.globalData.frameRate,dt-=this.offsetTime,dt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<dt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(dt,this._cachingAtTime),this._cachingAtTime.lastFrame=dt),this._cachingAtTime.value}function et(dt){var ft=-.01,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt=0;if(St.length){var jt;for(jt=0;jt<St.length;jt+=1)Tt+=Math.pow(kt[jt]-St[jt],2);Tt=Math.sqrt(Tt)*100}else Tt=0;return Tt}function ot(dt){if(this.vel!==void 0)return this.vel;var ft=-.001,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt;if(St.length){Tt=createTypedArray("float32",St.length);var jt;for(jt=0;jt<St.length;jt+=1)Tt[jt]=(kt[jt]-St[jt])/ft}else Tt=(kt-St)/ft;return Tt}function ct(){return this.pv}function ut(dt){this.propertyGroup=dt}return{searchExpressions:it,getSpeedAtTime:et,getVelocityAtTime:ot,getValueAtTime:g,getStaticValueAtTime:ct,setGroupProperty:ut}}();function addPropertyDecorator(){function it(Rt,Ft,$t){if(!this.k||!this.keyframes)return this.pv;Rt=Rt?Rt.toLowerCase():"";var zt=this.comp.renderedFrame,Kt=this.keyframes,Bt=Kt[Kt.length-1].t;if(zt<=Bt)return this.pv;var Ut,Jt;$t?(Ft?Ut=Math.abs(Bt-this.elem.comp.globalData.frameRate*Ft):Ut=Math.max(0,Bt-this.elem.data.ip),Jt=Bt-Ut):((!Ft||Ft>Kt.length-1)&&(Ft=Kt.length-1),Jt=Kt[Kt.length-1-Ft].t,Ut=Bt-Jt);var en,tn,nn;if(Rt==="pingpong"){var rn=Math.floor((zt-Jt)/Ut);if(rn%2!==0)return this.getValueAtTime((Ut-(zt-Jt)%Ut+Jt)/this.comp.globalData.frameRate,0)}else if(Rt==="offset"){var on=this.getValueAtTime(Jt/this.comp.globalData.frameRate,0),dn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),cn=this.getValueAtTime(((zt-Jt)%Ut+Jt)/this.comp.globalData.frameRate,0),fn=Math.floor((zt-Jt)/Ut);if(this.pv.length){for(nn=new Array(on.length),tn=nn.length,en=0;en<tn;en+=1)nn[en]=(dn[en]-on[en])*fn+cn[en];return nn}return(dn-on)*fn+cn}else if(Rt==="continue"){var mn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),En=this.getValueAtTime((Bt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(nn=new Array(mn.length),tn=nn.length,en=0;en<tn;en+=1)nn[en]=mn[en]+(mn[en]-En[en])*((zt-Bt)/this.comp.globalData.frameRate)/5e-4;return nn}return mn+(mn-En)*((zt-Bt)/.001)}return this.getValueAtTime(((zt-Jt)%Ut+Jt)/this.comp.globalData.frameRate,0)}function g(Rt,Ft,$t){if(!this.k)return this.pv;Rt=Rt?Rt.toLowerCase():"";var zt=this.comp.renderedFrame,Kt=this.keyframes,Bt=Kt[0].t;if(zt>=Bt)return this.pv;var Ut,Jt;$t?(Ft?Ut=Math.abs(this.elem.comp.globalData.frameRate*Ft):Ut=Math.max(0,this.elem.data.op-Bt),Jt=Bt+Ut):((!Ft||Ft>Kt.length-1)&&(Ft=Kt.length-1),Jt=Kt[Ft].t,Ut=Jt-Bt);var en,tn,nn;if(Rt==="pingpong"){var rn=Math.floor((Bt-zt)/Ut);if(rn%2===0)return this.getValueAtTime(((Bt-zt)%Ut+Bt)/this.comp.globalData.frameRate,0)}else if(Rt==="offset"){var on=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),dn=this.getValueAtTime(Jt/this.comp.globalData.frameRate,0),cn=this.getValueAtTime((Ut-(Bt-zt)%Ut+Bt)/this.comp.globalData.frameRate,0),fn=Math.floor((Bt-zt)/Ut)+1;if(this.pv.length){for(nn=new Array(on.length),tn=nn.length,en=0;en<tn;en+=1)nn[en]=cn[en]-(dn[en]-on[en])*fn;return nn}return cn-(dn-on)*fn}else if(Rt==="continue"){var mn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),En=this.getValueAtTime((Bt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(nn=new Array(mn.length),tn=nn.length,en=0;en<tn;en+=1)nn[en]=mn[en]+(mn[en]-En[en])*(Bt-zt)/.001;return nn}return mn+(mn-En)*(Bt-zt)/.001}return this.getValueAtTime((Ut-((Bt-zt)%Ut+Bt))/this.comp.globalData.frameRate,0)}function et(Rt,Ft){if(!this.k)return this.pv;if(Rt=(Rt||.4)*.5,Ft=Math.floor(Ft||5),Ft<=1)return this.pv;var $t=this.comp.renderedFrame/this.comp.globalData.frameRate,zt=$t-Rt,Kt=$t+Rt,Bt=Ft>1?(Kt-zt)/(Ft-1):1,Ut=0,Jt=0,en;this.pv.length?en=createTypedArray("float32",this.pv.length):en=0;for(var tn;Ut<Ft;){if(tn=this.getValueAtTime(zt+Ut*Bt),this.pv.length)for(Jt=0;Jt<this.pv.length;Jt+=1)en[Jt]+=tn[Jt];else en+=tn;Ut+=1}if(this.pv.length)for(Jt=0;Jt<this.pv.length;Jt+=1)en[Jt]/=Ft;else en/=Ft;return en}function ot(Rt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Ft=this._transformCachingAtTime.v;if(Ft.cloneFromProps(this.pre.props),this.appliedTransformations<1){var $t=this.a.getValueAtTime(Rt);Ft.translate(-$t[0]*this.a.mult,-$t[1]*this.a.mult,$t[2]*this.a.mult)}if(this.appliedTransformations<2){var zt=this.s.getValueAtTime(Rt);Ft.scale(zt[0]*this.s.mult,zt[1]*this.s.mult,zt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Kt=this.sk.getValueAtTime(Rt),Bt=this.sa.getValueAtTime(Rt);Ft.skewFromAxis(-Kt*this.sk.mult,Bt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ut=this.r.getValueAtTime(Rt);Ft.rotate(-Ut*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Jt=this.rz.getValueAtTime(Rt),en=this.ry.getValueAtTime(Rt),tn=this.rx.getValueAtTime(Rt),nn=this.or.getValueAtTime(Rt);Ft.rotateZ(-Jt*this.rz.mult).rotateY(en*this.ry.mult).rotateX(tn*this.rx.mult).rotateZ(-nn[2]*this.or.mult).rotateY(nn[1]*this.or.mult).rotateX(nn[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var rn=this.px.getValueAtTime(Rt),on=this.py.getValueAtTime(Rt);if(this.data.p.z){var dn=this.pz.getValueAtTime(Rt);Ft.translate(rn*this.px.mult,on*this.py.mult,-dn*this.pz.mult)}else Ft.translate(rn*this.px.mult,on*this.py.mult,0)}else{var cn=this.p.getValueAtTime(Rt);Ft.translate(cn[0]*this.p.mult,cn[1]*this.p.mult,-cn[2]*this.p.mult)}return Ft}function ct(){return this.v.clone(new Matrix)}var ut=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Rt,Ft,$t){var zt=ut(Rt,Ft,$t);return zt.dynamicProperties.length?zt.getValueAtTime=ot.bind(zt):zt.getValueAtTime=ct.bind(zt),zt.setGroupProperty=expressionHelpers.setGroupProperty,zt};var dt=PropertyFactory.getProp;PropertyFactory.getProp=function(Rt,Ft,$t,zt,Kt){var Bt=dt(Rt,Ft,$t,zt,Kt);Bt.kf?Bt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Bt):Bt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Bt),Bt.setGroupProperty=expressionHelpers.setGroupProperty,Bt.loopOut=it,Bt.loopIn=g,Bt.smooth=et,Bt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Bt),Bt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Bt),Bt.numKeys=Ft.a===1?Ft.k.length:0,Bt.propertyIndex=Ft.ix;var Ut=0;return $t!==0&&(Ut=createTypedArray("float32",Ft.a===1?Ft.k[0].s.length:Ft.k.length)),Bt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ut},expressionHelpers.searchExpressions(Rt,Ft,Bt),Bt.k&&Kt.addDynamicProperty(Bt),Bt};function ft(Rt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Rt*=this.elem.globalData.frameRate,Rt-=this.offsetTime,Rt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Rt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Rt,this.interpolateShape(Rt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var St=ShapePropertyFactory.getConstructorFunction(),kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Tt(){}Tt.prototype={vertices:function(Ft,$t){this.k&&this.getValue();var zt=this.v;$t!==void 0&&(zt=this.getValueAtTime($t,0));var Kt,Bt=zt._length,Ut=zt[Ft],Jt=zt.v,en=createSizedArray(Bt);for(Kt=0;Kt<Bt;Kt+=1)Ft==="i"||Ft==="o"?en[Kt]=[Ut[Kt][0]-Jt[Kt][0],Ut[Kt][1]-Jt[Kt][1]]:en[Kt]=[Ut[Kt][0],Ut[Kt][1]];return en},points:function(Ft){return this.vertices("v",Ft)},inTangents:function(Ft){return this.vertices("i",Ft)},outTangents:function(Ft){return this.vertices("o",Ft)},isClosed:function(){return this.v.c},pointOnPath:function(Ft,$t){var zt=this.v;$t!==void 0&&(zt=this.getValueAtTime($t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(zt));for(var Kt=this._segmentsLength,Bt=Kt.lengths,Ut=Kt.totalLength*Ft,Jt=0,en=Bt.length,tn=0,nn;Jt<en;){if(tn+Bt[Jt].addedLength>Ut){var rn=Jt,on=zt.c&&Jt===en-1?0:Jt+1,dn=(Ut-tn)/Bt[Jt].addedLength;nn=bez.getPointInSegment(zt.v[rn],zt.v[on],zt.o[rn],zt.i[on],dn,Bt[Jt]);break}else tn+=Bt[Jt].addedLength;Jt+=1}return nn||(nn=zt.c?[zt.v[0][0],zt.v[0][1]]:[zt.v[zt._length-1][0],zt.v[zt._length-1][1]]),nn},vectorOnPath:function(Ft,$t,zt){Ft==1?Ft=this.v.c:Ft==0&&(Ft=.999);var Kt=this.pointOnPath(Ft,$t),Bt=this.pointOnPath(Ft+.001,$t),Ut=Bt[0]-Kt[0],Jt=Bt[1]-Kt[1],en=Math.sqrt(Math.pow(Ut,2)+Math.pow(Jt,2));if(en===0)return[0,0];var tn=zt==="tangent"?[Ut/en,Jt/en]:[-Jt/en,Ut/en];return tn},tangentOnPath:function(Ft,$t){return this.vectorOnPath(Ft,$t,"tangent")},normalOnPath:function(Ft,$t){return this.vectorOnPath(Ft,$t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Tt],St),extendPrototype([Tt],kt),kt.prototype.getValueAtTime=ft,kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var jt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Rt,Ft,$t,zt,Kt){var Bt=jt(Rt,Ft,$t,zt,Kt);return Bt.propertyIndex=Ft.ix,Bt.lock=!1,$t===3?expressionHelpers.searchExpressions(Rt,Ft.pt,Bt):$t===4&&expressionHelpers.searchExpressions(Rt,Ft.ks,Bt),Bt.k&&Rt.addDynamicProperty(Bt),Bt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function it(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(g,et){var ot=this.calculateExpression(et);if(g.t!==ot){var ct={};return this.copyData(ct,g),ct.t=ot.toString(),ct.__complete=!1,ct}return g},TextProperty.prototype.searchProperty=function(){var g=this.searchKeyframes(),et=this.searchExpressions();return this.kf=g||et,this.kf},TextProperty.prototype.searchExpressions=it}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function it(g,et){var ot=createNS("feMerge");ot.setAttribute("result",g);var ct,ut;for(ut=0;ut<et.length;ut+=1)ct=createNS("feMergeNode"),ct.setAttribute("in",et[ut]),ot.appendChild(ct),ot.appendChild(ct);return ot}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(it,g,et,ot,ct){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","linearRGB"),ut.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ut,ut.setAttribute("result",ot+"_tint_1"),it.appendChild(ut),ut=createNS("feColorMatrix"),ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ut.setAttribute("result",ot+"_tint_2"),it.appendChild(ut),this.matrixFilter=ut;var dt=this.createMergeNode(ot,[ct,ot+"_tint_1",ot+"_tint_2"]);it.appendChild(dt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ot+" 0"),this.matrixFilter.setAttribute("values",et[0]-g[0]+" 0 0 0 "+g[0]+" "+(et[1]-g[1])+" 0 0 0 "+g[1]+" "+(et[2]-g[2])+" 0 0 0 "+g[2]+" 0 0 0 1 0")}};function SVGFillFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",ot),it.appendChild(ct),this.matrixFilter=ct}SVGFillFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[2].p.v,et=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+g[0]+" 0 0 0 0 "+g[1]+" 0 0 0 0 "+g[2]+" 0 0 0 "+et+" 0")}};function SVGStrokeEffect(it,g,et){this.initialized=!1,this.filterManager=g,this.elem=et,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var it=this.elem.layerElement.children||this.elem.layerElement.childNodes,g,et,ot,ct;for(this.filterManager.effectElements[1].p.v===1?(ct=this.elem.maskManager.masksProperties.length,ot=0):(ot=this.filterManager.effectElements[0].p.v-1,ct=ot+1),et=createNS("g"),et.setAttribute("fill","none"),et.setAttribute("stroke-linecap","round"),et.setAttribute("stroke-dashoffset",1),ot;ot<ct;ot+=1)g=createNS("path"),et.appendChild(g),this.paths.push({p:g,m:ot});if(this.filterManager.effectElements[10].p.v===3){var ut=createNS("mask"),dt=createElementID();ut.setAttribute("id",dt),ut.setAttribute("mask-type","alpha"),ut.appendChild(et),this.elem.globalData.defs.appendChild(ut);var ft=createNS("g");for(ft.setAttribute("mask","url("+getLocationHref()+"#"+dt+")");it[0];)ft.appendChild(it[0]);this.elem.layerElement.appendChild(ft),this.masker=ut,et.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(it=this.elem.layerElement.children||this.elem.layerElement.childNodes;it.length;)this.elem.layerElement.removeChild(it[0]);this.elem.layerElement.appendChild(et),this.elem.layerElement.removeAttribute("mask"),et.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=et},SVGStrokeEffect.prototype.renderFrame=function(it){this.initialized||this.initialize();var g,et=this.paths.length,ot,ct;for(g=0;g<et;g+=1)if(this.paths[g].m!==-1&&(ot=this.elem.maskManager.viewData[this.paths[g].m],ct=this.paths[g].p,(it||this.filterManager._mdf||ot.prop._mdf)&&ct.setAttribute("d",ot.lastPath),it||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ot.prop._mdf)){var ut;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var dt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ft=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,St=ct.getTotalLength();ut="0 0 0 "+St*dt+" ";var kt=St*(ft-dt),Tt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,jt=Math.floor(kt/Tt),Rt;for(Rt=0;Rt<jt;Rt+=1)ut+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ut+="0 "+St*10+" 0 0"}else ut="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ct.setAttribute("stroke-dasharray",ut)}if((it||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(it||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(it||this.filterManager.effectElements[3].p._mdf)){var Ft=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Ft[0]*255)+","+bmFloor(Ft[1]*255)+","+bmFloor(Ft[2]*255)+")")}};function SVGTritoneFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),it.appendChild(ct);var ut=createNS("feComponentTransfer");ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),this.matrixFilter=ut;var dt=createNS("feFuncR");dt.setAttribute("type","table"),ut.appendChild(dt),this.feFuncR=dt;var ft=createNS("feFuncG");ft.setAttribute("type","table"),ut.appendChild(ft),this.feFuncG=ft;var St=createNS("feFuncB");St.setAttribute("type","table"),ut.appendChild(St),this.feFuncB=St,it.appendChild(ut)}SVGTritoneFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v,ct=ot[0]+" "+et[0]+" "+g[0],ut=ot[1]+" "+et[1]+" "+g[1],dt=ot[2]+" "+et[2]+" "+g[2];this.feFuncR.setAttribute("tableValues",ct),this.feFuncG.setAttribute("tableValues",ut),this.feFuncB.setAttribute("tableValues",dt)}};function SVGProLevelsFilter(it,g,et,ot){this.filterManager=g;var ct=this.filterManager.effectElements,ut=createNS("feComponentTransfer");(ct[10].p.k||ct[10].p.v!==0||ct[11].p.k||ct[11].p.v!==1||ct[12].p.k||ct[12].p.v!==1||ct[13].p.k||ct[13].p.v!==0||ct[14].p.k||ct[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ut)),(ct[17].p.k||ct[17].p.v!==0||ct[18].p.k||ct[18].p.v!==1||ct[19].p.k||ct[19].p.v!==1||ct[20].p.k||ct[20].p.v!==0||ct[21].p.k||ct[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ut)),(ct[24].p.k||ct[24].p.v!==0||ct[25].p.k||ct[25].p.v!==1||ct[26].p.k||ct[26].p.v!==1||ct[27].p.k||ct[27].p.v!==0||ct[28].p.k||ct[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ut)),(ct[31].p.k||ct[31].p.v!==0||ct[32].p.k||ct[32].p.v!==1||ct[33].p.k||ct[33].p.v!==1||ct[34].p.k||ct[34].p.v!==0||ct[35].p.k||ct[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ut)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ut.setAttribute("color-interpolation-filters","sRGB"),it.appendChild(ut)),(ct[3].p.k||ct[3].p.v!==0||ct[4].p.k||ct[4].p.v!==1||ct[5].p.k||ct[5].p.v!==1||ct[6].p.k||ct[6].p.v!==0||ct[7].p.k||ct[7].p.v!==1)&&(ut=createNS("feComponentTransfer"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),it.appendChild(ut),this.feFuncRComposed=this.createFeFunc("feFuncR",ut),this.feFuncGComposed=this.createFeFunc("feFuncG",ut),this.feFuncBComposed=this.createFeFunc("feFuncB",ut))}SVGProLevelsFilter.prototype.createFeFunc=function(it,g){var et=createNS(it);return et.setAttribute("type","table"),g.appendChild(et),et},SVGProLevelsFilter.prototype.getTableValue=function(it,g,et,ot,ct){for(var ut=0,dt=256,ft,St=Math.min(it,g),kt=Math.max(it,g),Tt=Array.call(null,{length:dt}),jt,Rt=0,Ft=ct-ot,$t=g-it;ut<=256;)ft=ut/256,ft<=St?jt=$t<0?ct:ot:ft>=kt?jt=$t<0?ot:ct:jt=ot+Ft*Math.pow((ft-it)/$t,1/et),Tt[Rt]=jt,Rt+=1,ut+=256/(dt-1);return Tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g,et=this.filterManager.effectElements;this.feFuncRComposed&&(it||et[3].p._mdf||et[4].p._mdf||et[5].p._mdf||et[6].p._mdf||et[7].p._mdf)&&(g=this.getTableValue(et[3].p.v,et[4].p.v,et[5].p.v,et[6].p.v,et[7].p.v),this.feFuncRComposed.setAttribute("tableValues",g),this.feFuncGComposed.setAttribute("tableValues",g),this.feFuncBComposed.setAttribute("tableValues",g)),this.feFuncR&&(it||et[10].p._mdf||et[11].p._mdf||et[12].p._mdf||et[13].p._mdf||et[14].p._mdf)&&(g=this.getTableValue(et[10].p.v,et[11].p.v,et[12].p.v,et[13].p.v,et[14].p.v),this.feFuncR.setAttribute("tableValues",g)),this.feFuncG&&(it||et[17].p._mdf||et[18].p._mdf||et[19].p._mdf||et[20].p._mdf||et[21].p._mdf)&&(g=this.getTableValue(et[17].p.v,et[18].p.v,et[19].p.v,et[20].p.v,et[21].p.v),this.feFuncG.setAttribute("tableValues",g)),this.feFuncB&&(it||et[24].p._mdf||et[25].p._mdf||et[26].p._mdf||et[27].p._mdf||et[28].p._mdf)&&(g=this.getTableValue(et[24].p.v,et[25].p.v,et[26].p.v,et[27].p.v,et[28].p.v),this.feFuncB.setAttribute("tableValues",g)),this.feFuncA&&(it||et[31].p._mdf||et[32].p._mdf||et[33].p._mdf||et[34].p._mdf||et[35].p._mdf)&&(g=this.getTableValue(et[31].p.v,et[32].p.v,et[33].p.v,et[34].p.v,et[35].p.v),this.feFuncA.setAttribute("tableValues",g))}};function SVGDropShadowEffect(it,g,et,ot,ct){var ut=g.container.globalData.renderConfig.filterSize,dt=g.data.fs||ut;it.setAttribute("x",dt.x||ut.x),it.setAttribute("y",dt.y||ut.y),it.setAttribute("width",dt.width||ut.width),it.setAttribute("height",dt.height||ut.height),this.filterManager=g;var ft=createNS("feGaussianBlur");ft.setAttribute("in","SourceAlpha"),ft.setAttribute("result",ot+"_drop_shadow_1"),ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=ft,it.appendChild(ft);var St=createNS("feOffset");St.setAttribute("dx","25"),St.setAttribute("dy","0"),St.setAttribute("in",ot+"_drop_shadow_1"),St.setAttribute("result",ot+"_drop_shadow_2"),this.feOffset=St,it.appendChild(St);var kt=createNS("feFlood");kt.setAttribute("flood-color","#00ff00"),kt.setAttribute("flood-opacity","1"),kt.setAttribute("result",ot+"_drop_shadow_3"),this.feFlood=kt,it.appendChild(kt);var Tt=createNS("feComposite");Tt.setAttribute("in",ot+"_drop_shadow_3"),Tt.setAttribute("in2",ot+"_drop_shadow_2"),Tt.setAttribute("operator","in"),Tt.setAttribute("result",ot+"_drop_shadow_4"),it.appendChild(Tt);var jt=this.createMergeNode(ot,[ot+"_drop_shadow_4",ct]);it.appendChild(jt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){if((it||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),it||this.filterManager.effectElements[0].p._mdf){var g=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(g[0]*255),Math.round(g[1]*255),Math.round(g[2]*255)))}if((it||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),it||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var et=this.filterManager.effectElements[3].p.v,ot=(this.filterManager.effectElements[2].p.v-90)*degToRads,ct=et*Math.cos(ot),ut=et*Math.sin(ot);this.feOffset.setAttribute("dx",ct),this.feOffset.setAttribute("dy",ut)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(it,g,et){this.initialized=!1,this.filterManager=g,this.filterElem=it,this.elem=et,et.matteElement=createNS("g"),et.matteElement.appendChild(et.layerElement),et.matteElement.appendChild(et.transformedElement),et.baseElement=et.matteElement}SVGMatte3Effect.prototype.findSymbol=function(it){for(var g=0,et=_svgMatteSymbols.length;g<et;){if(_svgMatteSymbols[g]===it)return _svgMatteSymbols[g];g+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(it,g){var et=it.layerElement.parentNode;if(et){for(var ot=et.children,ct=0,ut=ot.length;ct<ut&&ot[ct]!==it.layerElement;)ct+=1;var dt;ct<=ut-2&&(dt=ot[ct+1]);var ft=createNS("use");ft.setAttribute("href","#"+g),dt?et.insertBefore(ft,dt):et.appendChild(ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(it,g){if(!this.findSymbol(g)){var et=createElementID(),ot=createNS("mask");ot.setAttribute("id",g.layerId),ot.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(g);var ct=it.globalData.defs;ct.appendChild(ot);var ut=createNS("symbol");ut.setAttribute("id",et),this.replaceInParent(g,et),ut.appendChild(g.layerElement),ct.appendChild(ut);var dt=createNS("use");dt.setAttribute("href","#"+et),ot.appendChild(dt),g.data.hd=!1,g.show()}it.setMatte(g.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var it=this.filterManager.effectElements[0].p.v,g=this.elem.comp.elements,et=0,ot=g.length;et<ot;)g[et]&&g[et].data.ind===it&&this.setElementAsMask(this.elem,g[et]),et+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(it,g,et,ot){it.setAttribute("x","-100%"),it.setAttribute("y","-100%"),it.setAttribute("width","300%"),it.setAttribute("height","300%"),this.filterManager=g;var ct=createNS("feGaussianBlur");ct.setAttribute("result",ot),it.appendChild(ct),this.feGaussianBlur=ct}SVGGaussianBlurEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=.3,et=this.filterManager.effectElements[0].p.v*g,ot=this.filterManager.effectElements[1].p.v,ct=ot==3?0:et,ut=ot==2?0:et;this.feGaussianBlur.setAttribute("stdDeviation",ct+" "+ut);var dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",dt)}};function TransformEffect(){}TransformEffect.prototype.init=function(it){this.effectsManager=it,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(it){if(this._opMdf=!1,this._mdf=!1,it||this.effectsManager._mdf){var g=this.effectsManager.effectElements,et=g[0].p.v,ot=g[1].p.v,ct=g[2].p.v===1,ut=g[3].p.v,dt=ct?ut:g[4].p.v,ft=g[5].p.v,St=g[6].p.v,kt=g[7].p.v;this.matrix.reset(),this.matrix.translate(-et[0],-et[1],et[2]),this.matrix.scale(dt*.01,ut*.01,1),this.matrix.rotate(-kt*degToRads),this.matrix.skewFromAxis(-ft*degToRads,(St+90)*degToRads),this.matrix.translate(ot[0],ot[1],0),this._mdf=!0,this.opacity!==g[8].p.v&&(this.opacity=g[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(it,g){this.init(g)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(it){this.init(it)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(it,g){var et=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(et!=null){var ot,ct,ut,dt,ft=[],St=!0,kt=!1;try{if(ut=(et=et.call(it)).next,g===0){if(Object(et)!==et)return;St=!1}else for(;!(St=(ot=ut.call(et)).done)&&(ft.push(ot.value),ft.length!==g);St=!0);}catch(Tt){kt=!0,ct=Tt}finally{try{if(!St&&et.return!=null&&(dt=et.return(),Object(dt)!==dt))return}finally{if(kt)throw ct}}return ft}}function ownKeys(it,g){var et=Object.keys(it);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(it);g&&(ot=ot.filter(function(ct){return Object.getOwnPropertyDescriptor(it,ct).enumerable})),et.push.apply(et,ot)}return et}function _objectSpread2(it){for(var g=1;g<arguments.length;g++){var et=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(et),!0).forEach(function(ot){_defineProperty(it,ot,et[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(ot){Object.defineProperty(it,ot,Object.getOwnPropertyDescriptor(et,ot))})}return it}function _defineProperty(it,g,et){return g=_toPropertyKey(g),g in it?Object.defineProperty(it,g,{value:et,enumerable:!0,configurable:!0,writable:!0}):it[g]=et,it}function _objectWithoutPropertiesLoose(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function _objectWithoutProperties(it,g){if(it==null)return{};var et=_objectWithoutPropertiesLoose(it,g),ot,ct;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(it);for(ct=0;ct<ut.length;ct++)ot=ut[ct],!(g.indexOf(ot)>=0)&&Object.prototype.propertyIsEnumerable.call(it,ot)&&(et[ot]=it[ot])}return et}function _slicedToArray(it,g){return _arrayWithHoles(it)||_iterableToArrayLimit(it,g)||_unsupportedIterableToArray(it,g)||_nonIterableRest()}function _arrayWithHoles(it){if(Array.isArray(it))return it}function _unsupportedIterableToArray(it,g){if(it){if(typeof it=="string")return _arrayLikeToArray(it,g);var et=Object.prototype.toString.call(it).slice(8,-1);if(et==="Object"&&it.constructor&&(et=it.constructor.name),et==="Map"||et==="Set")return Array.from(it);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(it,g)}}function _arrayLikeToArray(it,g){(g==null||g>it.length)&&(g=it.length);for(var et=0,ot=new Array(g);et<g;et++)ot[et]=it[et];return ot}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(it,g){if(typeof it!="object"||it===null)return it;var et=it[Symbol.toPrimitive];if(et!==void 0){var ot=et.call(it,g||"default");if(typeof ot!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(it)}function _toPropertyKey(it){var g=_toPrimitive(it,"string");return typeof g=="symbol"?g:String(g)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function it(g,et){var ot=g.animationData,ct=g.loop,ut=g.autoplay,dt=g.initialSegment,ft=g.onComplete,St=g.onLoopComplete,kt=g.onEnterFrame,Tt=g.onSegmentStart,jt=g.onConfigReady,Rt=g.onDataReady,Ft=g.onDataFailed,$t=g.onLoadedImages,zt=g.onDOMLoaded,Kt=g.onDestroy;g.lottieRef,g.renderer,g.name,g.assetsPath,g.rendererSettings;var Bt=_objectWithoutProperties(g,_excluded$1),Ut=reactExports.useState(!1),Jt=_slicedToArray(Ut,2),en=Jt[0],tn=Jt[1],nn=reactExports.useRef(),rn=reactExports.useRef(null),on=function(){var kn;(kn=nn.current)===null||kn===void 0||kn.play()},dn=function(){var kn;(kn=nn.current)===null||kn===void 0||kn.stop()},cn=function(){var kn;(kn=nn.current)===null||kn===void 0||kn.pause()},fn=function(kn){var _n;(_n=nn.current)===null||_n===void 0||_n.setSpeed(kn)},mn=function(kn,_n){var Rn;(Rn=nn.current)===null||Rn===void 0||Rn.goToAndPlay(kn,_n)},En=function(kn,_n){var Rn;(Rn=nn.current)===null||Rn===void 0||Rn.goToAndStop(kn,_n)},Sn=function(kn){var _n;(_n=nn.current)===null||_n===void 0||_n.setDirection(kn)},wn=function(kn,_n){var Rn;(Rn=nn.current)===null||Rn===void 0||Rn.playSegments(kn,_n)},hn=function(kn){var _n;(_n=nn.current)===null||_n===void 0||_n.setSubframe(kn)},yn=function(kn){var _n;return(_n=nn.current)===null||_n===void 0?void 0:_n.getDuration(kn)},an=function(){var kn;(kn=nn.current)===null||kn===void 0||kn.destroy(),nn.current=void 0},un=function(){var kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_n;if(rn.current){(_n=nn.current)===null||_n===void 0||_n.destroy();var Rn=_objectSpread2(_objectSpread2(_objectSpread2({},g),kn),{},{container:rn.current});return nn.current=lottie.loadAnimation(Rn),tn(!!nn.current),function(){var Nn;(Nn=nn.current)===null||Nn===void 0||Nn.destroy(),nn.current=void 0}}};reactExports.useEffect(function(){var pn=un();return function(){return pn==null?void 0:pn()}},[ot,ct]),reactExports.useEffect(function(){nn.current&&(nn.current.autoplay=!!ut)},[ut]),reactExports.useEffect(function(){if(nn.current){if(!dt){nn.current.resetSegments(!0);return}!Array.isArray(dt)||!dt.length||((nn.current.currentRawFrame<dt[0]||nn.current.currentRawFrame>dt[1])&&(nn.current.currentRawFrame=dt[0]),nn.current.setSegment(dt[0],dt[1]))}},[dt]),reactExports.useEffect(function(){var pn=[{name:"complete",handler:ft},{name:"loopComplete",handler:St},{name:"enterFrame",handler:kt},{name:"segmentStart",handler:Tt},{name:"config_ready",handler:jt},{name:"data_ready",handler:Rt},{name:"data_failed",handler:Ft},{name:"loaded_images",handler:$t},{name:"DOMLoaded",handler:zt},{name:"destroy",handler:Kt}],kn=pn.filter(function(Rn){return Rn.handler!=null});if(kn.length){var _n=kn.map(function(Rn){var Nn;return(Nn=nn.current)===null||Nn===void 0||Nn.addEventListener(Rn.name,Rn.handler),function(){var Cn;(Cn=nn.current)===null||Cn===void 0||Cn.removeEventListener(Rn.name,Rn.handler)}});return function(){_n.forEach(function(Rn){return Rn()})}}},[ft,St,kt,Tt,jt,Rt,Ft,$t,zt,Kt]);var bn=React$2.createElement("div",_objectSpread2({style:et,ref:rn},Bt));return{View:bn,play:on,stop:dn,pause:cn,setSpeed:fn,goToAndStop:En,goToAndPlay:mn,setDirection:Sn,playSegments:wn,setSubframe:hn,getDuration:yn,destroy:an,animationContainerRef:rn,animationLoaded:en,animationItem:nn.current}};function getContainerVisibility(it){var g=it.getBoundingClientRect(),et=g.top,ot=g.height,ct=window.innerHeight-et,ut=window.innerHeight+ot;return ct/ut}function getContainerCursorPosition(it,g,et){var ot=it.getBoundingClientRect(),ct=ot.top,ut=ot.left,dt=ot.width,ft=ot.height,St=(g-ut)/dt,kt=(et-ct)/ft;return{x:St,y:kt}}var useInitInteractivity=function it(g){var et=g.wrapperRef,ot=g.animationItem,ct=g.mode,ut=g.actions;reactExports.useEffect(function(){var dt=et.current;if(!(!dt||!ot||!ut.length)){ot.stop();var ft=function(){var Tt=null,jt=function(){var Ft=getContainerVisibility(dt),$t=ut.find(function(Kt){var Bt=Kt.visibility;return Bt&&Ft>=Bt[0]&&Ft<=Bt[1]});if($t){if($t.type==="seek"&&$t.visibility&&$t.frames.length===2){var zt=$t.frames[0]+Math.ceil((Ft-$t.visibility[0])/($t.visibility[1]-$t.visibility[0])*$t.frames[1]);//! goToAndStop must be relative to the start of the current segment
ot.goToAndStop(zt-ot.firstFrame-1,!0)}$t.type==="loop"&&(Tt===null||Tt!==$t.frames||ot.isPaused)&&(ot.playSegments($t.frames,!0),Tt=$t.frames),$t.type==="play"&&ot.isPaused&&(ot.resetSegments(!0),ot.play()),$t.type==="stop"&&ot.goToAndStop($t.frames[0]-ot.firstFrame-1,!0)}};return document.addEventListener("scroll",jt),function(){document.removeEventListener("scroll",jt)}},St=function(){var Tt=function($t,zt){var Kt=$t,Bt=zt;if(Kt!==-1&&Bt!==-1){var Ut=getContainerCursorPosition(dt,Kt,Bt);Kt=Ut.x,Bt=Ut.y}var Jt=ut.find(function(nn){var rn=nn.position;return rn&&Array.isArray(rn.x)&&Array.isArray(rn.y)?Kt>=rn.x[0]&&Kt<=rn.x[1]&&Bt>=rn.y[0]&&Bt<=rn.y[1]:rn&&!Number.isNaN(rn.x)&&!Number.isNaN(rn.y)?Kt===rn.x&&Bt===rn.y:!1});if(Jt){if(Jt.type==="seek"&&Jt.position&&Array.isArray(Jt.position.x)&&Array.isArray(Jt.position.y)&&Jt.frames.length===2){var en=(Kt-Jt.position.x[0])/(Jt.position.x[1]-Jt.position.x[0]),tn=(Bt-Jt.position.y[0])/(Jt.position.y[1]-Jt.position.y[0]);ot.playSegments(Jt.frames,!0),ot.goToAndStop(Math.ceil((en+tn)/2*(Jt.frames[1]-Jt.frames[0])),!0)}Jt.type==="loop"&&ot.playSegments(Jt.frames,!0),Jt.type==="play"&&(ot.isPaused&&ot.resetSegments(!1),ot.playSegments(Jt.frames)),Jt.type==="stop"&&ot.goToAndStop(Jt.frames[0],!0)}},jt=function($t){Tt($t.clientX,$t.clientY)},Rt=function(){Tt(-1,-1)};return dt.addEventListener("mousemove",jt),dt.addEventListener("mouseout",Rt),function(){dt.removeEventListener("mousemove",jt),dt.removeEventListener("mouseout",Rt)}};switch(ct){case"scroll":return ft();case"cursor":return St()}}},[ct,ot])},useLottieInteractivity=function it(g){var et=g.actions,ot=g.mode,ct=g.lottieObj,ut=ct.animationItem,dt=ct.View,ft=ct.animationContainerRef;return useInitInteractivity({actions:et,animationItem:ut,mode:ot,wrapperRef:ft}),dt},_excluded=["style","interactivity"],Lottie=function it(g){var et,ot,ct,ut=g.style,dt=g.interactivity,ft=_objectWithoutProperties(g,_excluded),St=useLottie(ft,ut),kt=St.View,Tt=St.play,jt=St.stop,Rt=St.pause,Ft=St.setSpeed,$t=St.goToAndStop,zt=St.goToAndPlay,Kt=St.setDirection,Bt=St.playSegments,Ut=St.setSubframe,Jt=St.getDuration,en=St.destroy,tn=St.animationContainerRef,nn=St.animationLoaded,rn=St.animationItem;return reactExports.useEffect(function(){g.lottieRef&&(g.lottieRef.current={play:Tt,stop:jt,pause:Rt,setSpeed:Ft,goToAndPlay:zt,goToAndStop:$t,setDirection:Kt,playSegments:Bt,setSubframe:Ut,getDuration:Jt,destroy:en,animationContainerRef:tn,animationLoaded:nn,animationItem:rn})},[(et=g.lottieRef)===null||et===void 0?void 0:et.current]),useLottieInteractivity({lottieObj:{View:kt,play:Tt,stop:jt,pause:Rt,setSpeed:Ft,goToAndStop:$t,goToAndPlay:zt,setDirection:Kt,playSegments:Bt,setSubframe:Ut,getDuration:Jt,destroy:en,animationContainerRef:tn,animationLoaded:nn,animationItem:rn},actions:(ot=dt==null?void 0:dt.actions)!==null&&ot!==void 0?ot:[],mode:(ct=dt==null?void 0:dt.mode)!==null&&ct!==void 0?ct:"scroll"})};const nm="error",ddd=0,h$4=495,w$4=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$1="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$4,w:w$4,meta,layers,v:v$1,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$1,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:it}=useLocation(),g=reactExports.useMemo(()=>new URLSearchParams(it).get("session_id"),[it]),et=g?`/api/downloads/${g}`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-slate-300",children:["Your download is ready",et?"":", but we couldn’t find a session id","."]}),et?jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:et,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold bg-phlokkGreen text-black hover:opacity-90 transition",children:"Download Now"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["We expected a URL like ",jsxRuntimeExports.jsx("code",{children:"/thank-you?session_id=cs_..."}),"."]}),jsxRuntimeExports.jsx(Link$1,{to:"/",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Go Home"})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and we’ll help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (“Agreement”) govern your access to and use of the Cre8tly Studio website, platform, and all related products and services (collectively, “Services”). By creating an account, making a purchase, or otherwise using our Services, you (“User”, “you”, or “your”) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by Cre8tly Studio or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided “as is” and “as available” without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, Cre8tly Studio, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio respects your privacy and is committed to protecting it in accordance with this Privacy Policy (“Policy”). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (“Services”)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using Cre8tly Studio’s Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{}),"• Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{}),"• Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{}),"• Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{}),"• Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{}),"• To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{}),"• To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{}),"• To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{}),"• To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{}),"• To comply with legal obligations",jsxRuntimeExports.jsx("br",{}),"• To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{}),"• The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{}),"• The right to request data portability",jsxRuntimeExports.jsx("br",{}),"• The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Children’s Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised “last updated” date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At Cre8tly Studio, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content, ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{}),"• We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{}),"• Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (“Policy”) explains how Cre8tly Studio (“we”, “us”, or “our”) uses cookies and similar technologies when you visit our website (“Website”) or use our related products and services (“Services”), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["• ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"• ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new “last revised” date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});function PromptPage(){const[it]=useSearchParams(),g=it.get("session_id"),et=reactExports.useRef(null),[ot,ct]=reactExports.useState(!0),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),[jt,Rt]=reactExports.useState(!1),[Ft,$t]=reactExports.useState(null);reactExports.useEffect(()=>{if(ft&&et.current){const Kt=et.current.getEditor();setTimeout(()=>{Kt.root.scrollTop=0,Kt.root.dispatchEvent(new Event("input"))},100)}},[ft]),reactExports.useEffect(()=>{g?(async()=>{var Bt;try{const Ut=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ut.data&&(dt(!0),Ut.data.status==="completed"&&Ut.data.pdf_url&&($t(Ut.data.pdf_url),Rt(!0)))}catch(Ut){console.error("Invalid session:",((Bt=Ut.response)==null?void 0:Bt.data)||Ut.message),dt(!1)}finally{ct(!1)}})():ct(!1)},[g]);const zt=async()=>{var Kt;if(ft.trim()){Tt(!0);try{await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{sessionId:g,prompt:ft}),Rt(!0);const Bt=setInterval(async()=>{try{const Ut=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ut.data.status==="completed"&&Ut.data.pdf_url&&($t(Ut.data.pdf_url),clearInterval(Bt))}catch(Ut){console.error("Polling failed:",Ut.message)}},5e3)}catch(Bt){console.error("❌ Request failed:",((Kt=Bt.response)==null?void 0:Kt.data)||Bt.message)}finally{Tt(!1)}}};return ot?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-gray-400",children:"Validating session..."}):ut?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-20 px-6 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Enter Your Prompt"}),jt?jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-green mb-6",children:"✅ Your prompt was submitted!"}),Ft?jsxRuntimeExports.jsx("a",{href:Ft,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-gradient-to-r from-[#1DA1F2] to-purple-600 text-white px-8 py-4 rounded-xl shadow-lg hover:opacity-90 transition",children:"Download PDF"}):jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your PDF is being generated... Please wait."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:ft,onChange:Kt=>St(Kt.target.value),placeholder:"Describe your audience or offer...",className:"w-full h-[500px] bg-white text-black text-left rounded-lg p-4 leading-relaxed font-montserrat border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner resize-none overflow-y-auto"}),jsxRuntimeExports.jsx("button",{onClick:zt,disabled:kt||!ft||ft.trim()==="<p><br></p>",className:`w-full py-4 rounded-xl font-semibold text-lg transition shadow-lg ${kt||!ft?"bg-gray-600 cursor-not-allowed":"bg-black border border-green-400 text-white hover:opacity-90"}`,children:kt?"Generating...":"Generate PDF"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invalid or expired session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Please purchase a lead magnet to access this page."})]})}const headerLogo="/assets/cre8tly-logo-ab122ab2.svg",ebookCover="/assets/ultimate-branding-d456799d.jpg",Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly Studio Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:["© ",new Date().getFullYear()," Alure Digital. All rights reserved"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$1,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/cookie-policy",className:"hover:text-white transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/refund-policy",className:"hover:text-white transition-colors",children:"Refunds"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/40",children:["Designed by"," ",jsxRuntimeExports.jsx("a",{href:"https://aluredigital.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Alure Digital"})]})]})]})});function CustomCursor(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!1),ct=useMotionValue(-100),ut=useMotionValue(-100),dt=useSpring(ct,{stiffness:225,damping:30}),ft=useSpring(ut,{stiffness:225,damping:30});return reactExports.useEffect(()=>{const St=Tt=>{et||ot(!0),ct.set(Tt.clientX),ut.set(Tt.clientY)};window.addEventListener("mousemove",St);const kt=document.querySelectorAll("a, button, .clickable");return kt.forEach(Tt=>{Tt.addEventListener("mouseenter",()=>g(!0)),Tt.addEventListener("mouseleave",()=>g(!1))}),()=>{window.removeEventListener("mousemove",St),kt.forEach(Tt=>{Tt.removeEventListener("mouseenter",()=>g(!0)),Tt.removeEventListener("mouseleave",()=>g(!1))})}},[et]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 z-[9999] pointer-events-none",initial:{opacity:0,scale:.6},animate:{opacity:et?1:0,scale:et?1:.6},transition:{duration:.6,ease:"easeOut"},style:{translateX:dt,translateY:ft},children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-200 ${it?"bg-[#7bed9f]/80 shadow-[0_0_15px_rgba(123,237,159,0.5)]":"bg-[#7bed9f]/70 shadow-[0_0_10px_rgba(123,237,159,0.5)]"}`})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=it=>it.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=it=>it.replace(/^([A-Z])|[\s-_]+(\w)/g,(g,et,ot)=>ot?ot.toUpperCase():et.toLowerCase()),toPascalCase=it=>{const g=toCamelCase(it);return g.charAt(0).toUpperCase()+g.slice(1)},mergeClasses=(...it)=>it.filter((g,et,ot)=>!!g&&g.trim()!==""&&ot.indexOf(g)===et).join(" ").trim(),hasA11yProp=it=>{for(const g in it)if(g.startsWith("aria-")||g==="role"||g==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:it="currentColor",size:g=24,strokeWidth:et=2,absoluteStrokeWidth:ot,className:ct="",children:ut,iconNode:dt,...ft},St)=>reactExports.createElement("svg",{ref:St,...defaultAttributes,width:g,height:g,stroke:it,strokeWidth:ot?Number(et)*24/Number(g):et,className:mergeClasses("lucide",ct),...!ut&&!hasA11yProp(ft)&&{"aria-hidden":"true"},...ft},[...dt.map(([kt,Tt])=>reactExports.createElement(kt,Tt)),...Array.isArray(ut)?ut:[ut]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(it,g)=>{const et=reactExports.forwardRef(({className:ot,...ct},ut)=>reactExports.createElement(Icon,{ref:ut,iconNode:g,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(it))}`,`lucide-${it}`,ot),...ct}));return et.displayName=toPascalCase(it),et};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle$1=createLucideIcon("circle",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$3=createLucideIcon("image",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],SquareTerminal=createLucideIcon("square-terminal",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);function SignupPage(){const{login:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=useNavigate(),[ct,ut]=reactExports.useState({name:"",email:"",password:""}),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState("");reactExports.useEffect(()=>{if(St){const Rt=setTimeout(()=>kt(""),5e3);return()=>clearTimeout(Rt)}},[St]);const Tt=Rt=>ut({...ct,[Rt.target.name]:Rt.target.value}),jt=async Rt=>{var Ft,$t;Rt.preventDefault(),ft(!0),kt("");try{const zt=await axios$1.post("https://cre8tlystudio.com/api/auth/signup",ct);zt.status===201?(await it(ct.email,ct.password),ot("/dashboard")):kt(zt.data.message||"Something went wrong")}catch(zt){($t=(Ft=zt.response)==null?void 0:Ft.data)!=null&&$t.message?kt(zt.response.data.message):kt("Signup failed. Please try again later.")}finally{ft(!1)}};return jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Join Cre8tly Studio and start creating digital products instantly."}),St&&jsxRuntimeExports.jsx("div",{className:"bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:ct.name,onChange:Tt,placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:ct.email,onChange:Tt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:g?"text":"password",name:"password",value:ct.password,onChange:Tt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":g?"Hide password":"Show password",children:g?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:dt,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:dt?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Log In"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}var i$4=Object.defineProperty,d$2=(it,g,et)=>g in it?i$4(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,r$2=(it,g,et)=>(d$2(it,typeof g!="symbol"?g+"":g,et),et);let o$4=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(g){this.current!==g&&(this.handoffState="pending",this.currentId=0,this.current=g)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$4;function u$5(it){return s$5.isServer?null:it instanceof Node?it.ownerDocument:it!=null&&it.hasOwnProperty("current")&&it.current instanceof Node?it.current.ownerDocument:document}function t$4(it){typeof queueMicrotask=="function"?queueMicrotask(it):Promise.resolve().then(it).catch(g=>setTimeout(()=>{throw g}))}function o$3(){let it=[],g={addEventListener(et,ot,ct,ut){return et.addEventListener(ot,ct,ut),g.add(()=>et.removeEventListener(ot,ct,ut))},requestAnimationFrame(...et){let ot=requestAnimationFrame(...et);return g.add(()=>cancelAnimationFrame(ot))},nextFrame(...et){return g.requestAnimationFrame(()=>g.requestAnimationFrame(...et))},setTimeout(...et){let ot=setTimeout(...et);return g.add(()=>clearTimeout(ot))},microTask(...et){let ot={current:!0};return t$4(()=>{ot.current&&et[0]()}),g.add(()=>{ot.current=!1})},style(et,ot,ct){let ut=et.style.getPropertyValue(ot);return Object.assign(et.style,{[ot]:ct}),this.add(()=>{Object.assign(et.style,{[ot]:ut})})},group(et){let ot=o$3();return et(ot),this.add(()=>ot.dispose())},add(et){return it.includes(et)||it.push(et),()=>{let ot=it.indexOf(et);if(ot>=0)for(let ct of it.splice(ot,1))ct()}},dispose(){for(let et of it.splice(0))et()}};return g}function p$2(){let[it]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>it.dispose(),[it]),it}let n$3=(it,g)=>{s$5.isServer?reactExports.useEffect(it,g):reactExports.useLayoutEffect(it,g)};function s$4(it){let g=reactExports.useRef(it);return n$3(()=>{g.current=it},[it]),g}let o$2=function(it){let g=s$4(it);return React$2.useCallback((...et)=>g.current(...et),[g])},e$3=reactExports.createContext(void 0);function a$a(){return reactExports.useContext(e$3)}function t$3(...it){return Array.from(new Set(it.flatMap(g=>typeof g=="string"?g.split(" "):[]))).filter(Boolean).join(" ")}function u$4(it,g,...et){if(it in g){let ct=g[it];return typeof ct=="function"?ct(...et):ct}let ot=new Error(`Tried to handle "${it}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map(ct=>`"${ct}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(ot,u$4),ot}var O$3=(it=>(it[it.None=0]="None",it[it.RenderStrategy=1]="RenderStrategy",it[it.Static=2]="Static",it))(O$3||{}),A$1=(it=>(it[it.Unmount=0]="Unmount",it[it.Hidden=1]="Hidden",it))(A$1||{});function L$1(){let it=U$2();return reactExports.useCallback(g=>C$3({mergeRefs:it,...g}),[it])}function C$3({ourProps:it,theirProps:g,slot:et,defaultTag:ot,features:ct,visible:ut=!0,name:dt,mergeRefs:ft}){ft=ft??$$1;let St=P$1(g,it);if(ut)return F$1(St,et,ot,dt,ft);let kt=ct??0;if(kt&2){let{static:Tt=!1,...jt}=St;if(Tt)return F$1(jt,et,ot,dt,ft)}if(kt&1){let{unmount:Tt=!0,...jt}=St;return u$4(Tt?0:1,{0(){return null},1(){return F$1({...jt,hidden:!0,style:{display:"none"}},et,ot,dt,ft)}})}return F$1(St,et,ot,dt,ft)}function F$1(it,g={},et,ot,ct){let{as:ut=et,children:dt,refName:ft="ref",...St}=h$3(it,["unmount","static"]),kt=it.ref!==void 0?{[ft]:it.ref}:{},Tt=typeof dt=="function"?dt(g):dt;"className"in St&&St.className&&typeof St.className=="function"&&(St.className=St.className(g)),St["aria-labelledby"]&&St["aria-labelledby"]===St.id&&(St["aria-labelledby"]=void 0);let jt={};if(g){let Rt=!1,Ft=[];for(let[$t,zt]of Object.entries(g))typeof zt=="boolean"&&(Rt=!0),zt===!0&&Ft.push($t.replace(/([A-Z])/g,Kt=>`-${Kt.toLowerCase()}`));if(Rt){jt["data-headlessui-state"]=Ft.join(" ");for(let $t of Ft)jt[`data-${$t}`]=""}}if(ut===reactExports.Fragment&&(Object.keys(m$4(St)).length>0||Object.keys(m$4(jt)).length>0))if(!reactExports.isValidElement(Tt)||Array.isArray(Tt)&&Tt.length>1){if(Object.keys(m$4(St)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${ot} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$4(St)).concat(Object.keys(m$4(jt))).map(Rt=>`  - ${Rt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Rt=>`  - ${Rt}`).join(`
`)].join(`
`))}else{let Rt=Tt.props,Ft=Rt==null?void 0:Rt.className,$t=typeof Ft=="function"?(...Bt)=>t$3(Ft(...Bt),St.className):t$3(Ft,St.className),zt=$t?{className:$t}:{},Kt=P$1(Tt.props,m$4(h$3(St,["ref"])));for(let Bt in jt)Bt in Kt&&delete jt[Bt];return reactExports.cloneElement(Tt,Object.assign({},Kt,jt,kt,{ref:ct(H$2(Tt),kt.ref)},zt))}return reactExports.createElement(ut,Object.assign({},h$3(St,["ref"]),ut!==reactExports.Fragment&&kt,ut!==reactExports.Fragment&&jt),Tt)}function U$2(){let it=reactExports.useRef([]),g=reactExports.useCallback(et=>{for(let ot of it.current)ot!=null&&(typeof ot=="function"?ot(et):ot.current=et)},[]);return(...et)=>{if(!et.every(ot=>ot==null))return it.current=et,g}}function $$1(...it){return it.every(g=>g==null)?void 0:g=>{for(let et of it)et!=null&&(typeof et=="function"?et(g):et.current=g)}}function P$1(...it){if(it.length===0)return{};if(it.length===1)return it[0];let g={},et={};for(let ot of it)for(let ct in ot)ct.startsWith("on")&&typeof ot[ct]=="function"?(et[ct]!=null||(et[ct]=[]),et[ct].push(ot[ct])):g[ct]=ot[ct];if(g.disabled||g["aria-disabled"])for(let ot in et)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(ot)&&(et[ot]=[ct=>{var ut;return(ut=ct==null?void 0:ct.preventDefault)==null?void 0:ut.call(ct)}]);for(let ot in et)Object.assign(g,{[ot](ct,...ut){let dt=et[ot];for(let ft of dt){if((ct instanceof Event||(ct==null?void 0:ct.nativeEvent)instanceof Event)&&ct.defaultPrevented)return;ft(ct,...ut)}}});return g}function K(it){var g;return Object.assign(reactExports.forwardRef(it),{displayName:(g=it.displayName)!=null?g:it.name})}function m$4(it){let g=Object.assign({},it);for(let et in g)g[et]===void 0&&delete g[et];return g}function h$3(it,g=[]){let et=Object.assign({},it);for(let ot of g)ot in et&&delete et[ot];return et}function H$2(it){return React$2.version.split(".")[0]>="19"?it.props.ref:it.ref}let a$9="span";var s$3=(it=>(it[it.None=1]="None",it[it.Focusable=2]="Focusable",it[it.Hidden=4]="Hidden",it))(s$3||{});function l$2(it,g){var et;let{features:ot=1,...ct}=it,ut={ref:g,"aria-hidden":(ot&2)===2?!0:(et=ct["aria-hidden"])!=null?et:void 0,hidden:(ot&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(ot&4)===4&&(ot&2)!==2&&{display:"none"}}};return L$1()({ourProps:ut,theirProps:ct,slot:{},defaultTag:a$9,name:"Hidden"})}let f$6=K(l$2),u$3=Symbol();function T$2(it,g=!0){return Object.assign(it,{[u$3]:g})}function y$3(...it){let g=reactExports.useRef(it);reactExports.useEffect(()=>{g.current=it},[it]);let et=o$2(ot=>{for(let ct of g.current)ct!=null&&(typeof ct=="function"?ct(ot):ct.current=ot)});return it.every(ot=>ot==null||(ot==null?void 0:ot[u$3]))?void 0:et}let a$8=reactExports.createContext(null);a$8.displayName="DescriptionContext";function f$5(){let it=reactExports.useContext(a$8);if(it===null){let g=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(g,f$5),g}return it}function w$3(){let[it,g]=reactExports.useState([]);return[it.length>0?it.join(" "):void 0,reactExports.useMemo(()=>function(et){let ot=o$2(ut=>(g(dt=>[...dt,ut]),()=>g(dt=>{let ft=dt.slice(),St=ft.indexOf(ut);return St!==-1&&ft.splice(St,1),ft}))),ct=reactExports.useMemo(()=>({register:ot,slot:et.slot,name:et.name,props:et.props,value:et.value}),[ot,et.slot,et.name,et.props,et.value]);return React$2.createElement(a$8.Provider,{value:ct},et.children)},[g])]}let S$2="p";function C$2(it,g){let et=reactExports.useId(),ot=a$a(),{id:ct=`headlessui-description-${et}`,...ut}=it,dt=f$5(),ft=y$3(g);n$3(()=>dt.register(ct),[ct,dt.register]);let St=ot||!1,kt=reactExports.useMemo(()=>({...dt.slot,disabled:St}),[dt.slot,St]),Tt={ref:ft,...dt.props,id:ct};return L$1()({ourProps:Tt,theirProps:ut,slot:kt,defaultTag:S$2,name:dt.name||"Description"})}let _$1=K(C$2),H$1=Object.assign(_$1,{});var o$1=(it=>(it.Space=" ",it.Enter="Enter",it.Escape="Escape",it.Backspace="Backspace",it.Delete="Delete",it.ArrowLeft="ArrowLeft",it.ArrowUp="ArrowUp",it.ArrowRight="ArrowRight",it.ArrowDown="ArrowDown",it.Home="Home",it.End="End",it.PageUp="PageUp",it.PageDown="PageDown",it.Tab="Tab",it))(o$1||{});let e$2=reactExports.createContext(()=>{});function C$1({value:it,children:g}){return React$2.createElement(e$2.Provider,{value:it},g)}let a$7=class extends Map{constructor(g){super(),this.factory=g}get(g){let et=super.get(g);return et===void 0&&(et=this.factory(g),this.set(g,et)),et}};function a$6(it,g){let et=it(),ot=new Set;return{getSnapshot(){return et},subscribe(ct){return ot.add(ct),()=>ot.delete(ct)},dispatch(ct,...ut){let dt=g[ct].call(et,...ut);dt&&(et=dt,ot.forEach(ft=>ft()))}}}function o(it){return reactExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getSnapshot)}let p$1=new a$7(()=>a$6(()=>[],{ADD(it){return this.includes(it)?this:[...this,it]},REMOVE(it){let g=this.indexOf(it);if(g===-1)return this;let et=this.slice();return et.splice(g,1),et}}));function x$2(it,g){let et=p$1.get(g),ot=reactExports.useId(),ct=o(et);if(n$3(()=>{if(it)return et.dispatch("ADD",ot),()=>et.dispatch("REMOVE",ot)},[et,it]),!it)return!1;let ut=ct.indexOf(ot),dt=ct.length;return ut===-1&&(ut=dt,dt+=1),ut===dt-1}let f$4=new Map,u$2=new Map;function h$2(it){var g;let et=(g=u$2.get(it))!=null?g:0;return u$2.set(it,et+1),et!==0?()=>m$3(it):(f$4.set(it,{"aria-hidden":it.getAttribute("aria-hidden"),inert:it.inert}),it.setAttribute("aria-hidden","true"),it.inert=!0,()=>m$3(it))}function m$3(it){var g;let et=(g=u$2.get(it))!=null?g:1;if(et===1?u$2.delete(it):u$2.set(it,et-1),et!==1)return;let ot=f$4.get(it);ot&&(ot["aria-hidden"]===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",ot["aria-hidden"]),it.inert=ot.inert,f$4.delete(it))}function y$2(it,{allowed:g,disallowed:et}={}){let ot=x$2(it,"inert-others");n$3(()=>{var ct,ut;if(!ot)return;let dt=o$3();for(let St of(ct=et==null?void 0:et())!=null?ct:[])St&&dt.add(h$2(St));let ft=(ut=g==null?void 0:g())!=null?ut:[];for(let St of ft){if(!St)continue;let kt=u$5(St);if(!kt)continue;let Tt=St.parentElement;for(;Tt&&Tt!==kt.body;){for(let jt of Tt.children)ft.some(Rt=>jt.contains(Rt))||dt.add(h$2(jt));Tt=Tt.parentElement}}return dt.dispose},[ot,g,et])}function m$2(it,g,et){let ot=s$4(ct=>{let ut=ct.getBoundingClientRect();ut.x===0&&ut.y===0&&ut.width===0&&ut.height===0&&et()});reactExports.useEffect(()=>{if(!it)return;let ct=g===null?null:g instanceof HTMLElement?g:g.current;if(!ct)return;let ut=o$3();if(typeof ResizeObserver<"u"){let dt=new ResizeObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}if(typeof IntersectionObserver<"u"){let dt=new IntersectionObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}return()=>ut.dispose()},[g,ot,it])}let f$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(it=>`${it}:not([tabindex='-1'])`).join(","),p=["[data-autofocus]"].map(it=>`${it}:not([tabindex='-1'])`).join(",");var F=(it=>(it[it.First=1]="First",it[it.Previous=2]="Previous",it[it.Next=4]="Next",it[it.Last=8]="Last",it[it.WrapAround=16]="WrapAround",it[it.NoScroll=32]="NoScroll",it[it.AutoFocus=64]="AutoFocus",it))(F||{}),T$1=(it=>(it[it.Error=0]="Error",it[it.Overflow=1]="Overflow",it[it.Success=2]="Success",it[it.Underflow=3]="Underflow",it))(T$1||{}),y$1=(it=>(it[it.Previous=-1]="Previous",it[it.Next=1]="Next",it))(y$1||{});function b$2(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(f$3)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$1(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(p)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}var h$1=(it=>(it[it.Strict=0]="Strict",it[it.Loose=1]="Loose",it))(h$1||{});function A(it,g=0){var et;return it===((et=u$5(it))==null?void 0:et.body)?!1:u$4(g,{0(){return it.matches(f$3)},1(){let ot=it;for(;ot!==null;){if(ot.matches(f$3))return!0;ot=ot.parentElement}return!1}})}var H=(it=>(it[it.Keyboard=0]="Keyboard",it[it.Mouse=1]="Mouse",it))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",it=>{it.metaKey||it.altKey||it.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",it=>{it.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:it.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$2(it){it==null||it.focus({preventScroll:!0})}let w$2=["textarea","input"].join(",");function O$2(it){var g,et;return(et=(g=it==null?void 0:it.matches)==null?void 0:g.call(it,w$2))!=null?et:!1}function _(it,g=et=>et){return it.slice().sort((et,ot)=>{let ct=g(et),ut=g(ot);if(ct===null||ut===null)return 0;let dt=ct.compareDocumentPosition(ut);return dt&Node.DOCUMENT_POSITION_FOLLOWING?-1:dt&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P(it,g,{sorted:et=!0,relativeTo:ot=null,skipElements:ct=[]}={}){let ut=Array.isArray(it)?it.length>0?it[0].ownerDocument:document:it.ownerDocument,dt=Array.isArray(it)?et?_(it):it:g&64?S$1(it):b$2(it);ct.length>0&&dt.length>1&&(dt=dt.filter(Ft=>!ct.some($t=>$t!=null&&"current"in $t?($t==null?void 0:$t.current)===Ft:$t===Ft))),ot=ot??ut.activeElement;let ft=(()=>{if(g&5)return 1;if(g&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),St=(()=>{if(g&1)return 0;if(g&2)return Math.max(0,dt.indexOf(ot))-1;if(g&4)return Math.max(0,dt.indexOf(ot))+1;if(g&8)return dt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),kt=g&32?{preventScroll:!0}:{},Tt=0,jt=dt.length,Rt;do{if(Tt>=jt||Tt+jt<=0)return 0;let Ft=St+Tt;if(g&16)Ft=(Ft+jt)%jt;else{if(Ft<0)return 3;if(Ft>=jt)return 1}Rt=dt[Ft],Rt==null||Rt.focus(kt),Tt+=ft}while(Rt!==ut.activeElement);return g&6&&O$2(Rt)&&Rt.select(),2}function t$2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$2()||i$3()}function i$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return document.addEventListener(g,ut,ot),()=>document.removeEventListener(g,ut,ot)},[it,g,ot])}function s$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return window.addEventListener(g,ut,ot),()=>window.removeEventListener(g,ut,ot)},[it,g,ot])}const E$1=30;function R$2(it,g,et){let ot=x$2(it,"outside-click"),ct=s$4(et),ut=reactExports.useCallback(function(St,kt){if(St.defaultPrevented)return;let Tt=kt(St);if(Tt===null||!Tt.getRootNode().contains(Tt)||!Tt.isConnected)return;let jt=function Rt(Ft){return typeof Ft=="function"?Rt(Ft()):Array.isArray(Ft)||Ft instanceof Set?Ft:[Ft]}(g);for(let Rt of jt)if(Rt!==null&&(Rt.contains(Tt)||St.composed&&St.composedPath().includes(Rt)))return;return!A(Tt,h$1.Loose)&&Tt.tabIndex!==-1&&St.preventDefault(),ct.current(St,Tt)},[ct,g]),dt=reactExports.useRef(null);i$2(ot,"pointerdown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"mousedown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"click",St=>{n$2()||dt.current&&(ut(St,()=>dt.current),dt.current=null)},!0);let ft=reactExports.useRef({x:0,y:0});i$2(ot,"touchstart",St=>{ft.current.x=St.touches[0].clientX,ft.current.y=St.touches[0].clientY},!0),i$2(ot,"touchend",St=>{let kt={x:St.changedTouches[0].clientX,y:St.changedTouches[0].clientY};if(!(Math.abs(kt.x-ft.current.x)>=E$1||Math.abs(kt.y-ft.current.y)>=E$1))return ut(St,()=>St.target instanceof HTMLElement?St.target:null)},!0),s$2(ot,"blur",St=>ut(St,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(...it){return reactExports.useMemo(()=>u$5(...it),[...it])}function E(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{it=it??window;function ut(dt){ct.current(dt)}return it.addEventListener(g,ut,ot),()=>it.removeEventListener(g,ut,ot)},[it,g,ot])}function d$1(){let it;return{before({doc:g}){var et;let ot=g.documentElement,ct=(et=g.defaultView)!=null?et:window;it=Math.max(0,ct.innerWidth-ot.clientWidth)},after({doc:g,d:et}){let ot=g.documentElement,ct=Math.max(0,ot.clientWidth-ot.offsetWidth),ut=Math.max(0,it-ct);et.style(ot,"paddingRight",`${ut}px`)}}}function d(){return t$2()?{before({doc:it,d:g,meta:et}){function ot(ct){return et.containers.flatMap(ut=>ut()).some(ut=>ut.contains(ct))}g.microTask(()=>{var ct;if(window.getComputedStyle(it.documentElement).scrollBehavior!=="auto"){let ft=o$3();ft.style(it.documentElement,"scrollBehavior","auto"),g.add(()=>g.microTask(()=>ft.dispose()))}let ut=(ct=window.scrollY)!=null?ct:window.pageYOffset,dt=null;g.addEventListener(it,"click",ft=>{if(ft.target instanceof HTMLElement)try{let St=ft.target.closest("a");if(!St)return;let{hash:kt}=new URL(St.href),Tt=it.querySelector(kt);Tt&&!ot(Tt)&&(dt=Tt)}catch{}},!0),g.addEventListener(it,"touchstart",ft=>{if(ft.target instanceof HTMLElement)if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&ot(St.parentElement);)St=St.parentElement;g.style(St,"overscrollBehavior","contain")}else g.style(ft.target,"touchAction","none")}),g.addEventListener(it,"touchmove",ft=>{if(ft.target instanceof HTMLElement){if(ft.target.tagName==="INPUT")return;if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&St.dataset.headlessuiPortal!==""&&!(St.scrollHeight>St.clientHeight||St.scrollWidth>St.clientWidth);)St=St.parentElement;St.dataset.headlessuiPortal===""&&ft.preventDefault()}else ft.preventDefault()}},{passive:!1}),g.add(()=>{var ft;let St=(ft=window.scrollY)!=null?ft:window.pageYOffset;ut!==St&&window.scrollTo(0,ut),dt&&dt.isConnected&&(dt.scrollIntoView({block:"nearest"}),dt=null)})})}}:{}}function r$1(){return{before({doc:it,d:g}){g.style(it.documentElement,"overflow","hidden")}}}function m$1(it){let g={};for(let et of it)Object.assign(g,et(g));return g}let a$5=a$6(()=>new Map,{PUSH(it,g){var et;let ot=(et=this.get(it))!=null?et:{doc:it,count:0,d:o$3(),meta:new Set};return ot.count++,ot.meta.add(g),this.set(it,ot),this},POP(it,g){let et=this.get(it);return et&&(et.count--,et.meta.delete(g)),this},SCROLL_PREVENT({doc:it,d:g,meta:et}){let ot={doc:it,d:g,meta:m$1(et)},ct=[d(),d$1(),r$1()];ct.forEach(({before:ut})=>ut==null?void 0:ut(ot)),ct.forEach(({after:ut})=>ut==null?void 0:ut(ot))},SCROLL_ALLOW({d:it}){it.dispose()},TEARDOWN({doc:it}){this.delete(it)}});a$5.subscribe(()=>{let it=a$5.getSnapshot(),g=new Map;for(let[et]of it)g.set(et,et.documentElement.style.overflow);for(let et of it.values()){let ot=g.get(et.doc)==="hidden",ct=et.count!==0;(ct&&!ot||!ct&&ot)&&a$5.dispatch(et.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",et),et.count===0&&a$5.dispatch("TEARDOWN",et)}});function a$4(it,g,et=()=>({containers:[]})){let ot=o(a$5),ct=g?ot.get(g):void 0,ut=ct?ct.count>0:!1;return n$3(()=>{if(!(!g||!it))return a$5.dispatch("PUSH",g,et),()=>a$5.dispatch("POP",g,et)},[it,g]),ut}function f$2(it,g,et=()=>[document.body]){let ot=x$2(it,"scroll-lock");a$4(ot,g,ct=>{var ut;return{containers:[...(ut=ct.containers)!=null?ut:[],et]}})}function c$2(it=0){let[g,et]=reactExports.useState(it),ot=reactExports.useCallback(St=>et(St),[g]),ct=reactExports.useCallback(St=>et(kt=>kt|St),[g]),ut=reactExports.useCallback(St=>(g&St)===St,[g]),dt=reactExports.useCallback(St=>et(kt=>kt&~St),[et]),ft=reactExports.useCallback(St=>et(kt=>kt^St),[et]);return{flags:g,setFlag:ot,addFlag:ct,hasFlag:ut,removeFlag:dt,toggleFlag:ft}}var T,b$1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T=process==null?void 0:process.env)==null?void 0:T.NODE_ENV)==="test"&&typeof((b$1=Element==null?void 0:Element.prototype)==null?void 0:b$1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L=(it=>(it[it.None=0]="None",it[it.Closed=1]="Closed",it[it.Enter=2]="Enter",it[it.Leave=4]="Leave",it))(L||{});function R$1(it){let g={};for(let et in it)it[et]===!0&&(g[`data-${et}`]="");return g}function x$1(it,g,et,ot){let[ct,ut]=reactExports.useState(et),{hasFlag:dt,addFlag:ft,removeFlag:St}=c$2(it&&ct?3:0),kt=reactExports.useRef(!1),Tt=reactExports.useRef(!1),jt=p$2();return n$3(()=>{var Rt;if(it){if(et&&ut(!0),!g){et&&ft(3);return}return(Rt=ot==null?void 0:ot.start)==null||Rt.call(ot,et),C(g,{inFlight:kt,prepare(){Tt.current?Tt.current=!1:Tt.current=kt.current,kt.current=!0,!Tt.current&&(et?(ft(3),St(4)):(ft(4),St(2)))},run(){Tt.current?et?(St(3),ft(4)):(St(4),ft(3)):et?St(1):ft(1)},done(){var Ft;Tt.current&&typeof g.getAnimations=="function"&&g.getAnimations().length>0||(kt.current=!1,St(7),et||ut(!1),(Ft=ot==null?void 0:ot.end)==null||Ft.call(ot,et))}})}},[it,et,g,jt]),it?[ct,{closed:dt(1),enter:dt(2),leave:dt(4),transition:dt(2)||dt(4)}]:[et,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(it,{prepare:g,run:et,done:ot,inFlight:ct}){let ut=o$3();return j$1(it,{prepare:g,inFlight:ct}),ut.nextFrame(()=>{et(),ut.requestAnimationFrame(()=>{ut.add(M$2(it,ot))})}),ut.dispose}function M$2(it,g){var et,ot;let ct=o$3();if(!it)return ct.dispose;let ut=!1;ct.add(()=>{ut=!0});let dt=(ot=(et=it.getAnimations)==null?void 0:et.call(it).filter(ft=>ft instanceof CSSTransition))!=null?ot:[];return dt.length===0?(g(),ct.dispose):(Promise.allSettled(dt.map(ft=>ft.finished)).then(()=>{ut||g()}),ct.dispose)}function j$1(it,{inFlight:g,prepare:et}){if(g!=null&&g.current){et();return}let ot=it.style.transition;it.style.transition="none",et(),it.offsetHeight,it.style.transition=ot}function m(it,g){let et=reactExports.useRef([]),ot=o$2(it);reactExports.useEffect(()=>{let ct=[...et.current];for(let[ut,dt]of g.entries())if(et.current[ut]!==dt){let ft=ot(g,ct);return et.current=g,ft}},[ot,...g])}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i$1=(it=>(it[it.Open=1]="Open",it[it.Closed=2]="Closed",it[it.Closing=4]="Closing",it[it.Opening=8]="Opening",it))(i$1||{});function u$1(){return reactExports.useContext(n)}function c$1({value:it,children:g}){return React$2.createElement(n.Provider,{value:it},g)}function s$1({children:it}){return React$2.createElement(n.Provider,{value:null},it)}function t$1(it){function g(){document.readyState!=="loading"&&(it(),document.removeEventListener("DOMContentLoaded",g))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",g),g())}let r=[];t$1(()=>{function it(g){if(!(g.target instanceof HTMLElement)||g.target===document.body||r[0]===g.target)return;let et=g.target;et=et.closest(f$3),r.unshift(et??g.target),r=r.filter(ot=>ot!=null&&ot.isConnected),r.splice(10)}window.addEventListener("click",it,{capture:!0}),window.addEventListener("mousedown",it,{capture:!0}),window.addEventListener("focus",it,{capture:!0}),document.body.addEventListener("click",it,{capture:!0}),document.body.addEventListener("mousedown",it,{capture:!0}),document.body.addEventListener("focus",it,{capture:!0})});function c(it){let g=o$2(it),et=reactExports.useRef(!1);reactExports.useEffect(()=>(et.current=!1,()=>{et.current=!0,t$4(()=>{et.current&&g()})}),[g])}function s(){let it=typeof document>"u";return"useSyncExternalStore"in t$5?(g=>g.useSyncExternalStore)(t$5)(()=>()=>{},()=>!1,()=>!it):!1}function l$1(){let it=s(),[g,et]=reactExports.useState(s$5.isHandoffComplete);return g&&s$5.isHandoffComplete===!1&&et(!1),reactExports.useEffect(()=>{g!==!0&&et(!0)},[g]),reactExports.useEffect(()=>s$5.handoff(),[]),it?!1:g}let e$1=reactExports.createContext(!1);function a$3(){return reactExports.useContext(e$1)}function l(it){return React$2.createElement(e$1.Provider,{value:it.force},it.children)}function N(it){let g=a$3(),et=reactExports.useContext(v),ot=n$1(it),[ct,ut]=reactExports.useState(()=>{var dt;if(!g&&et!==null)return(dt=et.current)!=null?dt:null;if(s$5.isServer)return null;let ft=ot==null?void 0:ot.getElementById("headlessui-portal-root");if(ft)return ft;if(ot===null)return null;let St=ot.createElement("div");return St.setAttribute("id","headlessui-portal-root"),ot.body.appendChild(St)});return reactExports.useEffect(()=>{ct!==null&&(ot!=null&&ot.body.contains(ct)||ot==null||ot.body.appendChild(ct))},[ct,ot]),reactExports.useEffect(()=>{g||et!==null&&ut(et.current)},[et,ut,g]),ct}let M$1=reactExports.Fragment,S=K(function(it,g){let et=it,ot=reactExports.useRef(null),ct=y$3(T$2(jt=>{ot.current=jt}),g),ut=n$1(ot),dt=N(ot),[ft]=reactExports.useState(()=>{var jt;return s$5.isServer?null:(jt=ut==null?void 0:ut.createElement("div"))!=null?jt:null}),St=reactExports.useContext(y),kt=l$1();n$3(()=>{!dt||!ft||dt.contains(ft)||(ft.setAttribute("data-headlessui-portal",""),dt.appendChild(ft))},[dt,ft]),n$3(()=>{if(ft&&St)return St.register(ft)},[St,ft]),c(()=>{var jt;!dt||!ft||(ft instanceof Node&&dt.contains(ft)&&dt.removeChild(ft),dt.childNodes.length<=0&&((jt=dt.parentElement)==null||jt.removeChild(dt)))});let Tt=L$1();return kt?!dt||!ft?null:reactDomExports.createPortal(Tt({ourProps:{ref:ct},theirProps:et,slot:{},defaultTag:M$1,name:"Portal"}),ft):null});function j(it,g){let et=y$3(g),{enabled:ot=!0,...ct}=it,ut=L$1();return ot?React$2.createElement(S,{...ct,ref:et}):ut({ourProps:{ref:et},theirProps:ct,slot:{},defaultTag:M$1,name:"Portal"})}let W=reactExports.Fragment,v=reactExports.createContext(null);function I$1(it,g){let{target:et,...ot}=it,ct={ref:y$3(g)},ut=L$1();return React$2.createElement(v.Provider,{value:et},ut({ourProps:ct,theirProps:ot,defaultTag:W,name:"Popover.Group"}))}let y=reactExports.createContext(null);function te$1(){let it=reactExports.useContext(y),g=reactExports.useRef([]),et=o$2(ut=>(g.current.push(ut),it&&it.register(ut),()=>ot(ut))),ot=o$2(ut=>{let dt=g.current.indexOf(ut);dt!==-1&&g.current.splice(dt,1),it&&it.unregister(ut)}),ct=reactExports.useMemo(()=>({register:et,unregister:ot,portals:g}),[et,ot,g]);return[g,reactExports.useMemo(()=>function({children:ut}){return React$2.createElement(y.Provider,{value:ct},ut)},[ct])]}let J=K(j),X$1=K(I$1),re$1=Object.assign(J,{Group:X$1});function a$2(it,g=typeof document<"u"?document.defaultView:null,et){let ot=x$2(it,"escape");E(g,"keydown",ct=>{ot&&(ct.defaultPrevented||ct.key===o$1.Escape&&et(ct))})}function f$1(){var it;let[g]=reactExports.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[et,ot]=reactExports.useState((it=g==null?void 0:g.matches)!=null?it:!1);return n$3(()=>{if(!g)return;function ct(ut){ot(ut.matches)}return g.addEventListener("change",ct),()=>g.removeEventListener("change",ct)},[g]),et}function R({defaultContainers:it=[],portals:g,mainTreeNode:et}={}){let ot=n$1(et),ct=o$2(()=>{var ut,dt;let ft=[];for(let St of it)St!==null&&(St instanceof HTMLElement?ft.push(St):"current"in St&&St.current instanceof HTMLElement&&ft.push(St.current));if(g!=null&&g.current)for(let St of g.current)ft.push(St);for(let St of(ut=ot==null?void 0:ot.querySelectorAll("html > *, body > *"))!=null?ut:[])St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St.id!=="headlessui-portal-root"&&(et&&(St.contains(et)||St.contains((dt=et==null?void 0:et.getRootNode())==null?void 0:dt.host))||ft.some(kt=>St.contains(kt))||ft.push(St));return ft});return{resolveContainers:ct,contains:o$2(ut=>ct().some(dt=>dt.contains(ut)))}}let a$1=reactExports.createContext(null);function O$1({children:it,node:g}){let[et,ot]=reactExports.useState(null),ct=b(g??et);return React$2.createElement(a$1.Provider,{value:ct},it,ct===null&&React$2.createElement(f$6,{features:s$3.Hidden,ref:ut=>{var dt,ft;if(ut){for(let St of(ft=(dt=u$5(ut))==null?void 0:dt.querySelectorAll("html > *, body > *"))!=null?ft:[])if(St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St!=null&&St.contains(ut)){ot(St);break}}}}))}function b(it=null){var g;return(g=reactExports.useContext(a$1))!=null?g:it}function f(){let it=reactExports.useRef(!1);return n$3(()=>(it.current=!0,()=>{it.current=!1}),[]),it}var a=(it=>(it[it.Forwards=0]="Forwards",it[it.Backwards=1]="Backwards",it))(a||{});function u(){let it=reactExports.useRef(0);return s$2(!0,"keydown",g=>{g.key==="Tab"&&(it.current=g.shiftKey?1:0)},!0),it}function U$1(it){if(!it)return new Set;if(typeof it=="function")return new Set(it());let g=new Set;for(let et of it.current)et.current instanceof HTMLElement&&g.add(et.current);return g}let Z="div";var x=(it=>(it[it.None=0]="None",it[it.InitialFocus=1]="InitialFocus",it[it.TabLock=2]="TabLock",it[it.FocusLock=4]="FocusLock",it[it.RestoreFocus=8]="RestoreFocus",it[it.AutoFocus=16]="AutoFocus",it))(x||{});function $(it,g){let et=reactExports.useRef(null),ot=y$3(et,g),{initialFocus:ct,initialFocusFallback:ut,containers:dt,features:ft=15,...St}=it;l$1()||(ft=0);let kt=n$1(et);ee(ft,{ownerDocument:kt});let Tt=te(ft,{ownerDocument:kt,container:et,initialFocus:ct,initialFocusFallback:ut});re(ft,{ownerDocument:kt,container:et,containers:dt,previousActiveElement:Tt});let jt=u(),Rt=o$2(Ut=>{let Jt=et.current;Jt&&(en=>en())(()=>{u$4(jt.current,{[a.Forwards]:()=>{P(Jt,F.First,{skipElements:[Ut.relatedTarget,ut]})},[a.Backwards]:()=>{P(Jt,F.Last,{skipElements:[Ut.relatedTarget,ut]})}})})}),Ft=x$2(!!(ft&2),"focus-trap#tab-lock"),$t=p$2(),zt=reactExports.useRef(!1),Kt={ref:ot,onKeyDown(Ut){Ut.key=="Tab"&&(zt.current=!0,$t.requestAnimationFrame(()=>{zt.current=!1}))},onBlur(Ut){if(!(ft&4))return;let Jt=U$1(dt);et.current instanceof HTMLElement&&Jt.add(et.current);let en=Ut.relatedTarget;en instanceof HTMLElement&&en.dataset.headlessuiFocusGuard!=="true"&&(I(Jt,en)||(zt.current?P(et.current,u$4(jt.current,{[a.Forwards]:()=>F.Next,[a.Backwards]:()=>F.Previous})|F.WrapAround,{relativeTo:Ut.target}):Ut.target instanceof HTMLElement&&I$2(Ut.target)))}},Bt=L$1();return React$2.createElement(React$2.Fragment,null,Ft&&React$2.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Rt,features:s$3.Focusable}),Bt({ourProps:Kt,theirProps:St,defaultTag:Z,name:"FocusTrap"}),Ft&&React$2.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Rt,features:s$3.Focusable}))}let D=K($),ye=Object.assign(D,{features:x});function w$1(it=!0){let g=reactExports.useRef(r.slice());return m(([et],[ot])=>{ot===!0&&et===!1&&t$4(()=>{g.current.splice(0)}),ot===!1&&et===!0&&(g.current=r.slice())},[it,r,g]),o$2(()=>{var et;return(et=g.current.find(ot=>ot!=null&&ot.isConnected))!=null?et:null})}function ee(it,{ownerDocument:g}){let et=!!(it&8),ot=w$1(et);m(()=>{et||(g==null?void 0:g.activeElement)===(g==null?void 0:g.body)&&I$2(ot())},[et]),c(()=>{et&&I$2(ot())})}function te(it,{ownerDocument:g,container:et,initialFocus:ot,initialFocusFallback:ct}){let ut=reactExports.useRef(null),dt=x$2(!!(it&1),"focus-trap#initial-focus"),ft=f();return m(()=>{if(it===0)return;if(!dt){ct!=null&&ct.current&&I$2(ct.current);return}let St=et.current;St&&t$4(()=>{if(!ft.current)return;let kt=g==null?void 0:g.activeElement;if(ot!=null&&ot.current){if((ot==null?void 0:ot.current)===kt){ut.current=kt;return}}else if(St.contains(kt)){ut.current=kt;return}if(ot!=null&&ot.current)I$2(ot.current);else{if(it&16){if(P(St,F.First|F.AutoFocus)!==T$1.Error)return}else if(P(St,F.First)!==T$1.Error)return;if(ct!=null&&ct.current&&(I$2(ct.current),(g==null?void 0:g.activeElement)===ct.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}ut.current=g==null?void 0:g.activeElement})},[ct,dt,it]),ut}function re(it,{ownerDocument:g,container:et,containers:ot,previousActiveElement:ct}){let ut=f(),dt=!!(it&4);E(g==null?void 0:g.defaultView,"focus",ft=>{if(!dt||!ut.current)return;let St=U$1(ot);et.current instanceof HTMLElement&&St.add(et.current);let kt=ct.current;if(!kt)return;let Tt=ft.target;Tt&&Tt instanceof HTMLElement?I(St,Tt)?(ct.current=Tt,I$2(Tt)):(ft.preventDefault(),ft.stopPropagation(),I$2(kt)):I$2(ct.current)},!0)}function I(it,g){for(let et of it)if(et.contains(g))return!0;return!1}function ue(it){var g;return!!(it.enter||it.enterFrom||it.enterTo||it.leave||it.leaveFrom||it.leaveTo)||((g=it.as)!=null?g:de)!==reactExports.Fragment||React$2.Children.count(it.children)===1}let w=reactExports.createContext(null);w.displayName="TransitionContext";var _e=(it=>(it.Visible="visible",it.Hidden="hidden",it))(_e||{});function De(){let it=reactExports.useContext(w);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}function He$1(){let it=reactExports.useContext(M);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}let M=reactExports.createContext(null);M.displayName="NestingContext";function U(it){return"children"in it?U(it.children):it.current.filter(({el:g})=>g.current!==null).filter(({state:g})=>g==="visible").length>0}function Te(it,g){let et=s$4(it),ot=reactExports.useRef([]),ct=f(),ut=p$2(),dt=o$2((Ft,$t=A$1.Hidden)=>{let zt=ot.current.findIndex(({el:Kt})=>Kt===Ft);zt!==-1&&(u$4($t,{[A$1.Unmount](){ot.current.splice(zt,1)},[A$1.Hidden](){ot.current[zt].state="hidden"}}),ut.microTask(()=>{var Kt;!U(ot)&&ct.current&&((Kt=et.current)==null||Kt.call(et))}))}),ft=o$2(Ft=>{let $t=ot.current.find(({el:zt})=>zt===Ft);return $t?$t.state!=="visible"&&($t.state="visible"):ot.current.push({el:Ft,state:"visible"}),()=>dt(Ft,A$1.Unmount)}),St=reactExports.useRef([]),kt=reactExports.useRef(Promise.resolve()),Tt=reactExports.useRef({enter:[],leave:[]}),jt=o$2((Ft,$t,zt)=>{St.current.splice(0),g&&(g.chains.current[$t]=g.chains.current[$t].filter(([Kt])=>Kt!==Ft)),g==null||g.chains.current[$t].push([Ft,new Promise(Kt=>{St.current.push(Kt)})]),g==null||g.chains.current[$t].push([Ft,new Promise(Kt=>{Promise.all(Tt.current[$t].map(([Bt,Ut])=>Ut)).then(()=>Kt())})]),$t==="enter"?kt.current=kt.current.then(()=>g==null?void 0:g.wait.current).then(()=>zt($t)):zt($t)}),Rt=o$2((Ft,$t,zt)=>{Promise.all(Tt.current[$t].splice(0).map(([Kt,Bt])=>Bt)).then(()=>{var Kt;(Kt=St.current.shift())==null||Kt()}).then(()=>zt($t))});return reactExports.useMemo(()=>({children:ot,register:ft,unregister:dt,onStart:jt,onStop:Rt,wait:kt,chains:Tt}),[ft,dt,ot,jt,Rt,Tt,kt])}let de=reactExports.Fragment,fe=O$3.RenderStrategy;function Ae(it,g){var et,ot;let{transition:ct=!0,beforeEnter:ut,afterEnter:dt,beforeLeave:ft,afterLeave:St,enter:kt,enterFrom:Tt,enterTo:jt,entered:Rt,leave:Ft,leaveFrom:$t,leaveTo:zt,...Kt}=it,[Bt,Ut]=reactExports.useState(null),Jt=reactExports.useRef(null),en=ue(it),tn=y$3(...en?[Jt,g,Ut]:g===null?[]:[g]),nn=(et=Kt.unmount)==null||et?A$1.Unmount:A$1.Hidden,{show:rn,appear:on,initial:dn}=De(),[cn,fn]=reactExports.useState(rn?"visible":"hidden"),mn=He$1(),{register:En,unregister:Sn}=mn;n$3(()=>En(Jt),[En,Jt]),n$3(()=>{if(nn===A$1.Hidden&&Jt.current){if(rn&&cn!=="visible"){fn("visible");return}return u$4(cn,{hidden:()=>Sn(Jt),visible:()=>En(Jt)})}},[cn,Jt,En,Sn,rn,nn]);let wn=l$1();n$3(()=>{if(en&&wn&&cn==="visible"&&Jt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Jt,cn,wn,en]);let hn=dn&&!on,yn=on&&rn&&dn,an=reactExports.useRef(!1),un=Te(()=>{an.current||(fn("hidden"),Sn(Jt))},mn),bn=o$2(Mn=>{an.current=!0;let In=Mn?"enter":"leave";un.onStart(Jt,In,On=>{On==="enter"?ut==null||ut():On==="leave"&&(ft==null||ft())})}),pn=o$2(Mn=>{let In=Mn?"enter":"leave";an.current=!1,un.onStop(Jt,In,On=>{On==="enter"?dt==null||dt():On==="leave"&&(St==null||St())}),In==="leave"&&!U(un)&&(fn("hidden"),Sn(Jt))});reactExports.useEffect(()=>{en&&ct||(bn(rn),pn(rn))},[rn,en,ct]);let kn=(()=>!(!ct||!en||!wn||hn))(),[,_n]=x$1(kn,Bt,rn,{start:bn,end:pn}),Rn=m$4({ref:tn,className:((ot=t$3(Kt.className,yn&&kt,yn&&Tt,_n.enter&&kt,_n.enter&&_n.closed&&Tt,_n.enter&&!_n.closed&&jt,_n.leave&&Ft,_n.leave&&!_n.closed&&$t,_n.leave&&_n.closed&&zt,!_n.transition&&rn&&Rt))==null?void 0:ot.trim())||void 0,...R$1(_n)}),Nn=0;cn==="visible"&&(Nn|=i$1.Open),cn==="hidden"&&(Nn|=i$1.Closed),_n.enter&&(Nn|=i$1.Opening),_n.leave&&(Nn|=i$1.Closing);let Cn=L$1();return React$2.createElement(M.Provider,{value:un},React$2.createElement(c$1,{value:Nn},Cn({ourProps:Rn,theirProps:Kt,defaultTag:de,features:fe,visible:cn==="visible",name:"Transition.Child"})))}function Ie$1(it,g){let{show:et,appear:ot=!1,unmount:ct=!0,...ut}=it,dt=reactExports.useRef(null),ft=ue(it),St=y$3(...ft?[dt,g]:g===null?[]:[g]);l$1();let kt=u$1();if(et===void 0&&kt!==null&&(et=(kt&i$1.Open)===i$1.Open),et===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Tt,jt]=reactExports.useState(et?"visible":"hidden"),Rt=Te(()=>{et||jt("hidden")}),[Ft,$t]=reactExports.useState(!0),zt=reactExports.useRef([et]);n$3(()=>{Ft!==!1&&zt.current[zt.current.length-1]!==et&&(zt.current.push(et),$t(!1))},[zt,et]);let Kt=reactExports.useMemo(()=>({show:et,appear:ot,initial:Ft}),[et,ot,Ft]);n$3(()=>{et?jt("visible"):!U(Rt)&&dt.current!==null&&jt("hidden")},[et,Rt]);let Bt={unmount:ct},Ut=o$2(()=>{var tn;Ft&&$t(!1),(tn=it.beforeEnter)==null||tn.call(it)}),Jt=o$2(()=>{var tn;Ft&&$t(!1),(tn=it.beforeLeave)==null||tn.call(it)}),en=L$1();return React$2.createElement(M.Provider,{value:Rt},React$2.createElement(w.Provider,{value:Kt},en({ourProps:{...Bt,as:reactExports.Fragment,children:React$2.createElement(me,{ref:St,...Bt,...ut,beforeEnter:Ut,beforeLeave:Jt})},theirProps:{},defaultTag:reactExports.Fragment,features:fe,visible:Tt==="visible",name:"Transition"})))}function Le(it,g){let et=reactExports.useContext(w)!==null,ot=u$1()!==null;return React$2.createElement(React$2.Fragment,null,!et&&ot?React$2.createElement(X,{ref:g,...it}):React$2.createElement(me,{ref:g,...it}))}let X=K(Ie$1),me=K(Ae),Fe=K(Le),ze=Object.assign(X,{Child:Fe,Root:X});var Oe=(it=>(it[it.Open=0]="Open",it[it.Closed=1]="Closed",it))(Oe||{}),he=(it=>(it[it.SetTitleId=0]="SetTitleId",it))(he||{});let Se={0(it,g){return it.titleId===g.id?it:{...it,titleId:g.id}}},k=reactExports.createContext(null);k.displayName="DialogContext";function O(it){let g=reactExports.useContext(k);if(g===null){let et=new Error(`<${it} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,O),et}return g}function Ie(it,g){return u$4(g.type,Se,it,g)}let V=K(function(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-${et}`,open:ct,onClose:ut,initialFocus:dt,role:ft="dialog",autoFocus:St=!0,__demoMode:kt=!1,unmount:Tt=!1,...jt}=it,Rt=reactExports.useRef(!1);ft=function(){return ft==="dialog"||ft==="alertdialog"?ft:(Rt.current||(Rt.current=!0,console.warn(`Invalid role [${ft}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let Ft=u$1();ct===void 0&&Ft!==null&&(ct=(Ft&i$1.Open)===i$1.Open);let $t=reactExports.useRef(null),zt=y$3($t,g),Kt=n$1($t),Bt=ct?0:1,[Ut,Jt]=reactExports.useReducer(Ie,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),en=o$2(()=>ut(!1)),tn=o$2(pn=>Jt({type:0,id:pn})),nn=l$1()?Bt===0:!1,[rn,on]=te$1(),dn={get current(){var pn;return(pn=Ut.panelRef.current)!=null?pn:$t.current}},cn=b(),{resolveContainers:fn}=R({mainTreeNode:cn,portals:rn,defaultContainers:[dn]}),mn=Ft!==null?(Ft&i$1.Closing)===i$1.Closing:!1;y$2(kt||mn?!1:nn,{allowed:o$2(()=>{var pn,kn;return[(kn=(pn=$t.current)==null?void 0:pn.closest("[data-headlessui-portal]"))!=null?kn:null]}),disallowed:o$2(()=>{var pn;return[(pn=cn==null?void 0:cn.closest("body > *:not(#headlessui-portal-root)"))!=null?pn:null]})}),R$2(nn,fn,pn=>{pn.preventDefault(),en()}),a$2(nn,Kt==null?void 0:Kt.defaultView,pn=>{pn.preventDefault(),pn.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),en()}),f$2(kt||mn?!1:nn,Kt,fn),m$2(nn,$t,en);let[En,Sn]=w$3(),wn=reactExports.useMemo(()=>[{dialogState:Bt,close:en,setTitleId:tn,unmount:Tt},Ut],[Bt,Ut,en,tn,Tt]),hn=reactExports.useMemo(()=>({open:Bt===0}),[Bt]),yn={ref:zt,id:ot,role:ft,tabIndex:-1,"aria-modal":kt?void 0:Bt===0?!0:void 0,"aria-labelledby":Ut.titleId,"aria-describedby":En,unmount:Tt},an=!f$1(),un=x.None;nn&&!kt&&(un|=x.RestoreFocus,un|=x.TabLock,St&&(un|=x.AutoFocus),an&&(un|=x.InitialFocus));let bn=L$1();return React$2.createElement(s$1,null,React$2.createElement(l,{force:!0},React$2.createElement(re$1,null,React$2.createElement(k.Provider,{value:wn},React$2.createElement(X$1,{target:$t},React$2.createElement(l,{force:!1},React$2.createElement(Sn,{slot:hn},React$2.createElement(on,null,React$2.createElement(ye,{initialFocus:dt,initialFocusFallback:$t,containers:fn,features:un},React$2.createElement(C$1,{value:en},bn({ourProps:yn,theirProps:jt,slot:hn,defaultTag:Me,features:Ge,visible:Bt===0,name:"Dialog"})))))))))))}),Me="div",Ge=O$3.RenderStrategy|O$3.Static;function ke(it,g){let{transition:et=!1,open:ot,...ct}=it,ut=u$1(),dt=it.hasOwnProperty("open")||ut!==null,ft=it.hasOwnProperty("onClose");if(!dt&&!ft)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!dt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!ft)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!ut&&typeof it.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${it.open}`);if(typeof it.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${it.onClose}`);return(ot!==void 0||et)&&!ct.static?React$2.createElement(O$1,null,React$2.createElement(ze,{show:ot,transition:et,unmount:ct.unmount},React$2.createElement(V,{ref:g,...ct}))):React$2.createElement(O$1,null,React$2.createElement(V,{ref:g,open:ot,...ct}))}let we="div";function Be(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-panel-${et}`,transition:ct=!1,...ut}=it,[{dialogState:dt,unmount:ft},St]=O("Dialog.Panel"),kt=y$3(g,St.panelRef),Tt=reactExports.useMemo(()=>({open:dt===0}),[dt]),jt=o$2(Kt=>{Kt.stopPropagation()}),Rt={ref:kt,id:ot,onClick:jt},Ft=ct?Fe:reactExports.Fragment,$t=ct?{unmount:ft}:{},zt=L$1();return React$2.createElement(Ft,{...$t},zt({ourProps:Rt,theirProps:ut,slot:Tt,defaultTag:we,name:"Dialog.Panel"}))}let Ue="div";function He(it,g){let{transition:et=!1,...ot}=it,[{dialogState:ct,unmount:ut}]=O("Dialog.Backdrop"),dt=reactExports.useMemo(()=>({open:ct===0}),[ct]),ft={ref:g,"aria-hidden":!0},St=et?Fe:reactExports.Fragment,kt=et?{unmount:ut}:{},Tt=L$1();return React$2.createElement(St,{...kt},Tt({ourProps:ft,theirProps:ot,slot:dt,defaultTag:Ue,name:"Dialog.Backdrop"}))}let Ne="h2";function We(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-title-${et}`,...ct}=it,[{dialogState:ut,setTitleId:dt}]=O("Dialog.Title"),ft=y$3(g);reactExports.useEffect(()=>(dt(ot),()=>dt(null)),[ot,dt]);let St=reactExports.useMemo(()=>({open:ut===0}),[ut]),kt={ref:ft,id:ot};return L$1()({ourProps:kt,theirProps:ct,slot:St,defaultTag:Ne,name:"Dialog.Title"})}let $e=K(ke),je=K(Be),Dt=K(He),Ye=K(We),yt=Object.assign($e,{Panel:je,Title:Ye,Description:H$1});const navLinks=[{href:"/",label:"Home"},{href:"sign-up",label:"Sign Up"},{href:"contact",label:"Contact Us"},{href:"shop",label:"Shop"},{href:"login",label:"Login"}],cannedPrompts={beginner:[{label:"🎯 Social Media Growth Guide",text:"Write a 5-page lead magnet teaching small business owners how to grow their social media following with organic content, engagement, and consistency strategies."},{label:"💰 Email Marketing Mastery",text:"Create a detailed guide on building and nurturing an email list that converts leads into loyal customers with proven automation techniques."},{label:"📈 Personal Branding Blueprint",text:"Write a 5-page blueprint showing entrepreneurs how to define their brand identity, build authority online, and attract ideal clients."},{label:"🎨 Design Secrets for Non-Designers",text:"Generate a lead magnet teaching beginners how to design professional graphics using free tools like Canva, including typography and color tips."},{label:"🎤 Content Creation Starter Pack",text:"Write a detailed guide helping creators build a content calendar, repurpose videos, and plan content for multiple platforms efficiently."},{label:"📚 The Beginner’s Guide to Digital Products",text:"Create a 5-page guide explaining how to turn skills into profitable digital products like eBooks, courses, or templates."},{label:"🧠 Productivity Hacks for Creators",text:"Generate a guide full of time-saving systems, tools, and automation tricks that help creators stay consistent and organized."},{label:"🚀 7 Steps to Launch Your Online Business",text:"Write a step-by-step roadmap for beginners to start an online business, from idea validation to first sale."},{label:"💡 The Ultimate AI Prompt Guide",text:"Create a 5-page lead magnet showing users how to craft better AI prompts for marketing, writing, and design workflows."},{label:"🎵 Monetize Your Music Online",text:"Write a guide showing independent musicians how to sell music, build fanbases, and create recurring revenue from digital content."}],professional:[{label:"🏗️ Build Your First Website",text:"Create a simple 5-page beginner guide teaching small businesses how to plan, design, and launch their first website using modern no-code tools."},{label:"📦 Create & Sell Digital Templates",text:"Write a guide explaining how to design and sell Canva, Notion, or Google Docs templates that bring consistent passive income."},{label:"🎬 Mastering Video Marketing",text:"Generate a 5-page lead magnet teaching creators how to plan, shoot, and promote short-form videos that build trust and conversions."},{label:"🪄 Branding Psychology 101",text:"Write a lead magnet breaking down the psychology of color, typography, and emotion in brand design."},{label:"💼 Freelancer Success Playbook",text:"Create a guide showing freelancers how to price their services, close clients, and scale into an agency model."},{label:"🧭 The Digital Marketing Roadmap",text:"Write a complete 5-step roadmap for entrepreneurs to master content, SEO, ads, and email marketing for consistent traffic."},{label:"🖋️ Copywriting for Conversions",text:"Generate a guide that teaches beginners the art of persuasive writing — from headlines to calls-to-action."},{label:"🧩 Funnel Building Simplified",text:"Write a 5-page walkthrough on building high-converting funnels using lead magnets, tripwires, and upsells."},{label:"⚙️ Automate Your Business",text:"Create a guide showing small business owners how to automate repetitive tasks using Zapier, AI, and scheduling tools."},{label:"📊 Data-Driven Marketing",text:"Write a beginner-friendly guide teaching business owners how to track analytics, interpret data, and improve conversions."}],expert:[{label:"📚 The Psychology of Persuasion in Marketing",text:"Write a 5-page academic-style guide exploring how cognitive biases, emotional triggers, and storytelling affect consumer decision-making in marketing and branding."},{label:"🧬 The Science of Habit-Building for Creators",text:"Develop a 5-page guide teaching creators how to build long-term consistency by applying behavioral science and habit-formation frameworks to their creative routines."},{label:"🏛️ The Economics of Attention",text:"Write a thought-provoking lead magnet analyzing how attention has become a modern currency, explaining scarcity, virality, and monetization in the digital economy."},{label:"🧠 Design Thinking for Business Innovation",text:"Generate a 5-page teaching resource showing entrepreneurs how to use design thinking methodology to solve business problems and create user-centered products."},{label:"🎯 Strategic Positioning for Small Brands",text:"Write an MBA-level breakdown of how to position a brand within competitive markets using differentiation, value perception, and storytelling."},{label:"📖 The Art of Thought Leadership",text:"Create a guide for experts on how to transform knowledge into influence by publishing insights, frameworks, and educational content that attract authority."},{label:"🧩 The Systems of Scale",text:"Write a detailed 5-page framework teaching small teams how to transition from chaos to structure using documented workflows, automation, and SOPs."},{label:"🧮 Pricing Psychology & Value Perception",text:"Develop a lead magnet explaining how anchoring, decoy pricing, and perceived value shape buyer decisions — with real-world examples and ethical applications."},{label:"💡 The Future of AI in Creative Work",text:"Write an educational report exploring how AI tools are transforming creative industries, ethics, and productivity — with actionable guidance for adaptation."},{label:"🌐 Web Design Principles That Convert",text:"Generate a professional-level guide that breaks down visual hierarchy, white space, and conversion-driven design for modern web experiences."},{label:"🧭 The Strategic Content Framework",text:"Write a 5-page plan teaching creators how to map content pillars, storytelling arcs, and audience journeys for consistent long-term growth."},{label:"📜 The History of Branding — and What It Teaches Modern Creators",text:"Develop a mini-course-style lead magnet that compares legacy branding (Coca-Cola, Nike, Apple) with modern personal branding on social platforms."},{label:"⚖️ Ethics & Authenticity in Digital Marketing",text:"Write a reflective guide on maintaining authenticity, transparency, and trust in a world of automation, influencer deals, and AI content."},{label:"🧭 Business Models for the Digital Age",text:"Create a 5-page breakdown of proven online business models — subscription, affiliate, info-products, SaaS — including their pros, cons, and margins."},{label:"📚 The Creator’s Intellectual Property Handbook",text:"Write a guide explaining copyright, licensing, and how creators can protect their work legally when distributing digital products and media."},{label:"💬 Storytelling Frameworks That Sell",text:"Generate a 5-page educational guide unpacking narrative structures like the Hero’s Journey, PAS, and StoryBrand for use in sales pages and videos."},{label:"🔬 The Analytics of Growth",text:"Teach business owners how to interpret engagement metrics, user cohorts, and conversion funnels like a data scientist to make smarter creative decisions."},{label:"🧱 Building Community-Driven Brands",text:"Write a 5-page resource on fostering belonging, trust, and shared identity around a brand or product using modern community platforms."},{label:"🏗️ The Architecture of Influence",text:"Develop a high-level guide mapping how influence spreads through networks, social proof, and credibility — with tactics for ethical persuasion."},{label:"🎓 The Modern Creative MBA",text:"Write a 5-page masterclass that condenses key principles of marketing, finance, operations, and leadership for modern digital creators running personal brands."}]},themes=[{label:"Modern Minimal",value:"modern",textColor:"#ffffff",bg:"#fefefe"},{label:"Classic Elegant",value:"classic",textColor:"#ffffff",bg:"#000000"},{label:"Bold Creative",value:"bold",textColor:"#fff",bg:"#0f0f0f"}],themeStyles=[],colorThemes=[{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"dark",label:"Dark",preview:"#030712"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"lime",label:"Lime",preview:"#65a30d"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"steel",label:"Steel",preview:"#475569"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"mocha",label:"Mocha",preview:"#78350f"},{name:"slate",label:"Slate",preview:"#334155"},{name:"sapphire",label:"Sapphire",preview:"#0ea5e9"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"}],fontThemes={modern:{name:"Montserrat",file:"/fonts/Montserrat-Regular.ttf"},classic:{name:"AdobeArabic",file:"/fonts/AdobeArabic-Regular.ttf"},bold:{name:"Bebas Neue",file:"/fonts/Roboto-Regular.ttf"}},Nav=()=>{const{user:it,logout:g}=useAuth(),et=useNavigate(),[ot,ct]=reactExports.useState(!1),ut=useLocation();if(reactExports.useEffect(()=>{ot?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[ot]),["/dashboard","/books","/settings","/prompts","/notifications"].includes(ut.pathname))return null;const dt=navLinks.filter(ft=>!(ft.label==="Home"&&ut.pathname==="/home"||ft.label==="Contact Us"&&ut.pathname==="/contact"));return jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:ft=>ft.stopPropagation(),className:"flex items-center justify-between px-4 h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Link$1,{to:"/",preventScrollReset:!0,children:jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:4.5,delay:2}})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block relative",onMouseEnter:()=>ct(!0),onMouseLeave:()=>ct(!1),children:[jsxRuntimeExports.jsx("button",{type:"button",className:`p-3 bg-muteGrey hover:bg-gray-800 text-white shadow-md transition
      ${ot?"rounded-t-lg":"rounded-lg"}`,children:jsxRuntimeExports.jsx(Cog,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`absolute right-0 top-full flex flex-col items-center gap-2 
                 bg-muteGrey  shadow-xl
                py-2 px-1 mt-[-2px] z-50
                transition-all duration-150 ease-out rounded-b-lg 
                ${ot?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/home"),className:"p-2 hover:bg-gray-800/60  transition",title:"Home",children:jsxRuntimeExports.jsx(House,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),it?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/dashboard"),className:"p-2 hover:bg-gray-800/60  transition",title:"Dashboard",children:jsxRuntimeExports.jsx(LayoutDashboard,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Help",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g(),className:"p-2 hover:bg-gray-800/60  transition",title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/sign-up"),className:"p-2 hover:bg-gray-800/60  transition",title:"Sign Up",children:jsxRuntimeExports.jsx(Crown,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/shop"),className:"p-2 hover:bg-gray-800/60  transition",title:"Shop",children:jsxRuntimeExports.jsx(Store,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/login"),className:"p-2 hover:bg-gray-800/60  transition",title:"Login",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Contact",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>ct(!ot),className:"text-white focus:outline-none z-50 relative",children:ot?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze,{show:ot&&window.innerWidth<768,enter:"transition duration-300 ease-out",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition duration-200 ease-in",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:ft=>jsxRuntimeExports.jsxs("div",{ref:ft,className:"md:hidden fixed top-0 left-0 w-full h-screen bg-bioModal z-40 flex flex-col items-center pt-24 space-y-4 lead-text",children:[dt.map(St=>St.label==="Home"&&ut.pathname==="/home"||it&&(St.label==="Sign Up"||St.label==="Contact Us"||St.label==="Shop")?null:St.label==="Login"&&it?jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",onClick:()=>ct(!1),className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Dashboard"},"user-dashboard"):jsxRuntimeExports.jsx("a",{href:St.href,onClick:kt=>handleNavClick(kt,St.href),className:"font-montserrat text-md text-white-400 hover:text-white transition-all cursor-pointer",children:St.label},St.label)),it&&jsxRuntimeExports.jsx("button",{onClick:()=>{g(),ct(!1)},className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Logout"})]})})]})};function OutOfSlotsModal({open:it,onClose:g,onRefresh:et,isFirstTime:ot=!1}){if(!it)return null;const ct=ot?"Welcome to Cre8tly Studio":"Out of Lead Magnet Slots",ut=ot?`Welcome to Cre8tly Studio, your creative command center for building
       high-converting lead magnets in minutes. 
       To start creating, visit Cre8tlyStudio.com in your browser and
       purchase your first token pack. 
       Once purchased, click below to refresh your account and begin.`:`You’ve reached your current plan’s limit.
       To purchase more tokens or lifetime unlocks, visit Cre8tlyStudio.com
       in your browser and log in with the same account.
       Once purchased, click below to refresh your slots instantly.`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:ct}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:ut}),jsxRuntimeExports.jsx("button",{onClick:async()=>{et&&await et(),g&&g()},className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:ot?"I’ve Purchased My First Pack":"I’ve Purchased Tokens"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"block mx-auto mt-4 text-sm text-gray-400 hover:text-white transition",children:"Cancel"})]})]})})}const PricingSection=()=>{const{user:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=()=>{window.location.href="/sign-up"};return jsxRuntimeExports.jsxs("section",{id:"pricing",className:"px-6 py-24 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-10 design-text",children:"Simple Pricing"}),jsxRuntimeExports.jsxs(motion.div,{className:"relative rounded-2xl max-w-md mx-auto overflow-hidden",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 p-[2px] rounded-2xl 
              bg-[linear-gradient(90deg,#00ff99,#7bed9f,#00ff99)] 
              bg-[length:200%_200%] 
              animate-gradientPulse`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-2xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-10 border border-transparent rounded-2xl shadow-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-blue to-purple-500 bg-clip-text text-white design-text",children:"$47"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 type-text",children:"One-time payment for 5 lead magnet slots"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-full bg-royalPurple 
                text-white text-xl font-semibold py-4 rounded-xl 
                hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)]
                transition shadow-lg design-text`,children:"Sign Up"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-silver mt-3",children:"🔒 Secure checkout"})]}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:g,onClose:()=>et(!1),isFirstTime:!it||!it.slot_count||it.slot_count===0})]})},steps=[{icon:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-4,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},children:jsxRuntimeExports.jsx(SquareTerminal,{className:"w-10 h-10 text-white drop-shadow-[0_0_6px_rgba(255,255,255,0.5)]"})}),title:"1. Add Your Prompt",desc:"Describe your audience, product, or idea in one line, our AI expands it into full content instantly."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2.8,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Bot,{className:"w-10 h-10 text-white drop-shadow-[0_0_8px_rgba(103,15,231,0.6)]"})}),title:"2. AI Creates Your Digital Product",desc:"We generate up to 50 full A4 pages with examples, insights, and structure, styled with professional themes."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Download,{className:"w-10 h-10 text-green drop-shadow-[0_0_8px_rgba(123,237,159,0.6)]"})}),title:"3. Download & Launch",desc:"Receive a polished PDF ready to use instantly, perfect for selling, sharing, or capturing new leads."}];function HowItWorks(){return jsxRuntimeExports.jsxs("section",{id:"how",className:"px-6 py-24 text-center bg-metalBlack relative overflow-hidden rounded-2xl",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-br from-[#0b0f1a] via-[#111827] to-[#0b0f1a] opacity-40",animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{repeat:1/0,duration:20,ease:"linear"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-16 text-white font-semibold design-text",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid gap-10 sm:grid-cols-3",children:steps.map((it,g)=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},className:"relative rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl p-[2px] 
                bg-[linear-gradient(270deg,#7bed9f,#670fe7,#7bed9f)] 
                bg-[length:300%_300%] animate-shine`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-800 mb-6 mx-auto shadow-[0_0_20px_rgba(100,255,200,0.25)]",children:it.icon}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-white lead-text",children:it.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed lead-text",children:it.desc})]})]},g))}),jsxRuntimeExports.jsx(PricingSection,{})]})]})}function VideoPlayer(){const it=reactExports.useRef(null),[g,et]=reactExports.useState(!0),[ot,ct]=reactExports.useState(!1),ut=()=>et(St=>!St),dt=async()=>{const St=it.current;if(St)if(St.requestFullscreen){await St.requestFullscreen(),ct(!0);try{await screen.orientation.lock("landscape")}catch{}}else St.webkitEnterFullscreen&&(St.webkitEnterFullscreen(),ct(!0))},ft=()=>{const St=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ct(!!St)};return typeof window<"u"&&(document.onfullscreenchange=ft,document.onwebkitfullscreenchange=ft),jsxRuntimeExports.jsxs("section",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800 mt-10",children:[jsxRuntimeExports.jsxs("video",{ref:it,className:"w-full h-full object-cover rounded-2xl",autoPlay:!0,loop:!0,playsInline:!0,muted:g,preload:"metadata",poster:"/assets/video-thumbnail.jpg",children:[jsxRuntimeExports.jsx("source",{src:"https://cre8tlystudio.nyc3.cdn.digitaloceanspaces.com/Videos/new_cre8tly_video_v2.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:ut,className:"bg-black/60 text-white px-4 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:g?"🔊 Unmute":"🔇 Mute"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black/60 text-white px-3 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:ot?"⤫ Exit":"⛶ Fullscreen"})]})]})}function PremiumEbooksCTA(){return jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"relative mt-28 mb-20 rounded-2xl overflow-hidden bg-metalBlack p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 blur-3xl opacity-40"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-10 text-center lg:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl sm:text-5xl font-extrabold mb-6 bg-white bg-clip-text text-transparent design-text leading-[1.25] pb-1",children:"Ready to Go Deeper?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:["Unlock our full library of"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"premium guides"})," ","designed to help entrepreneurs, marketers, and creators dominate their niche. Each guide is downloadable instantly."]}),jsxRuntimeExports.jsx("a",{href:"/shop",className:"inline-block px-8 py-4 bg-royalPurple text-white text-xl font-semibold rounded-lg shadow-lg hover:opacity-90 transition-all duration-300 transform hover:scale-[1.03] design-text",children:"🚀 Browse Premium Guides"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full lg:w-auto",children:jsxRuntimeExports.jsx("img",{src:ebookCover,alt:"Ebook Collection Preview",className:"rounded-xl w-80 sm:w-96 border border-white/10 "})})]})]})}function AnimatedLogo(){return jsxRuntimeExports.jsx(motion.img,{src:headerLogo,alt:"Logo",className:"w-32 h-32 relative z-10",initial:{scale:.98,filter:"drop-shadow(0 0 0px rgba(0,255,204,0))"},animate:{scale:[1,1.05,1],filter:["drop-shadow(0 0 0px rgba(0,255,204,0))","drop-shadow(0 0 12px rgba(24, 0, 156, 1))","drop-shadow(0 0 0px rgba(0,255,204,0))"]},transition:{duration:5,ease:"easeInOut",repeat:1/0},whileHover:{scale:1.1,filter:"drop-shadow(0 0 16px rgba(0,255,204,1))",transition:{type:"spring",stiffness:150}}})}const Landing=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full text-white flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-32 relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedLogo,{}),jsxRuntimeExports.jsxs("h1",{className:"relative inline-block text-white text-3xl sm:text-6xl lg:text-8xl font-extrabold design-text ",children:["Cre8tly Studio",jsxRuntimeExports.jsx("span",{className:"absolute -top-2 sm:-top-1 -right-8 sm:-right-10 text-green text-2xl sm:text-3xl font-bold lead-text",children:"AI"})]}),jsxRuntimeExports.jsx(motion.h2,{className:"text-5xl sm:text-7xl font-extrabold leading-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:"Create High-Converting Lead Magnets in Seconds"}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-6 text-xl sm:text-2xl text-gray-300 max-w-2xl lead-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["The fastest way to turn your idea into a",jsxRuntimeExports.jsx("br",{})," sellable digital product."]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-8 text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto font-light leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Cre8tly Studio is an ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"AI-powered  digital product builder"})," that helps ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"creators, coaches, and entrepreneurs"})," design professional digital products, eBooks, and brand assets in seconds. Boost conversions, grow your email list, and sell faster with ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"automated content creation"}),", pro-level cover design, and ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"instant PDF generation"})," all in one platform built for modern online businesses."]}),jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl mt-12 rounded-2xl overflow-hidden",children:jsxRuntimeExports.jsx(VideoPlayer,{})})]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-16 mb-10 text-3xl sm:text-4xl text-center font-semibold leading-snug text-green tracking-tight max-w-4xl mx-auto design-text",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:["Creators don’t dream about success",jsxRuntimeExports.jsx("br",{})," they generate it"]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 60",className:"w-56 sm:w-72 mx-auto mt-2 mb-20",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"underline-gradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("path",{d:"M10 25 Q200 -10 390 25",stroke:"url(#underline-gradient)",strokeWidth:"5",fill:"transparent",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(PremiumEbooksCTA,{})]});function LoginPage(){const{login:it}=useAuth(),g=useNavigate(),[et,ot]=reactExports.useState({email:"",password:""}),[ct,ut]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(""),[Tt,jt]=reactExports.useState(!1),Rt=$t=>{ot({...et,[$t.target.name]:$t.target.value})},Ft=async $t=>{var zt,Kt;$t.preventDefault(),ut(!0),kt("");try{await it(et.email,et.password),g("/dashboard")}catch(Bt){(Kt=(zt=Bt.response)==null?void 0:zt.data)!=null&&Kt.message?kt(Bt.response.data.message):kt("Login failed. Please try again later.")}finally{ut(!1)}};return reactExports.useEffect(()=>{if(St){jt(!1);const $t=setTimeout(()=>jt(!0),4e3),zt=setTimeout(()=>kt(""),5e3);return()=>{clearTimeout($t),clearTimeout(zt)}}},[St]),jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Log in to your account to continue creating and managing your digital products."}),St&&jsxRuntimeExports.jsx("div",{className:`bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Tt?"opacity-0":"opacity-100"}`,children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:Rt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:et.password,onChange:Rt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ct?"Logging In...":"Log In"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"text-green hover:underline",children:"Forgot Password?"})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Don’t have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/sign-up",className:"text-green hover:underline",children:"Sign Up"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(it,g){return it===g||it!==it&&g!==g}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(it,g){for(var et=it.length;et--;)if(eq$1(it[et][0],g))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(it){var g=this.__data__,et=assocIndexOf$3(g,it);if(et<0)return!1;var ot=g.length-1;return et==ot?g.pop():splice.call(g,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(it){var g=this.__data__,et=assocIndexOf$2(g,it);return et<0?void 0:g[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(it){return assocIndexOf$1(this.__data__,it)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(it,g){var et=this.__data__,ot=assocIndexOf(et,it);return ot<0?(++this.size,et.push([it,g])):et[ot][1]=g,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(it){var g=this.__data__,et=g.delete(it);return this.size=g.size,et}var _stackDelete=stackDelete$1;function stackGet$1(it){return this.__data__.get(it)}var _stackGet=stackGet$1;function stackHas$1(it){return this.__data__.has(it)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(it){var g=hasOwnProperty$8.call(it,symToStringTag$1),et=it[symToStringTag$1];try{it[symToStringTag$1]=void 0;var ot=!0}catch{}var ct=nativeObjectToString$1.call(it);return ot&&(g?it[symToStringTag$1]=et:delete it[symToStringTag$1]),ct}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(it){return nativeObjectToString.call(it)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(it){return it==null?it===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(it)?getRawTag(it):objectToString(it)}var _baseGetTag=baseGetTag$4;function isObject$2(it){var g=typeof it;return it!=null&&(g=="object"||g=="function")}var isObject_1=isObject$2,baseGetTag$3=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(it){if(!isObject$1(it))return!1;var g=baseGetTag$3(it);return g==funcTag$1||g==genTag||g==asyncTag||g==proxyTag}var isFunction_1=isFunction$3,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var it=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function isMasked$1(it){return!!maskSrcKey&&maskSrcKey in it}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(it){if(it!=null){try{return funcToString$1.call(it)}catch{}try{return it+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(it){if(!isObject(it)||isMasked(it))return!1;var g=isFunction$2(it)?reIsNative:reIsHostCtor;return g.test(toSource$1(it))}var _baseIsNative=baseIsNative$1;function getValue$1(it,g){return it==null?void 0:it[g]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(it,g){var et=getValue(it,g);return baseIsNative(et)?et:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(it){var g=this.has(it)&&delete this.__data__[it];return this.size-=g?1:0,g}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(it){var g=this.__data__;if(nativeCreate$2){var et=g[it];return et===HASH_UNDEFINED$2?void 0:et}return hasOwnProperty$6.call(g,it)?g[it]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(it){var g=this.__data__;return nativeCreate$1?g[it]!==void 0:hasOwnProperty$5.call(g,it)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(it,g){var et=this.__data__;return this.size+=this.has(it)?0:1,et[it]=nativeCreate&&g===void 0?HASH_UNDEFINED$1:g,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(it){var g=typeof it;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?it!=="__proto__":it===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(it,g){var et=it.__data__;return isKeyable(g)?et[typeof g=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(it){var g=getMapData$3(this,it).delete(it);return this.size-=g?1:0,g}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(it){return getMapData$2(this,it).get(it)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(it){return getMapData$1(this,it).has(it)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(it,g){var et=getMapData(this,it),ot=et.size;return et.set(it,g),this.size+=et.size==ot?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(it,g){var et=this.__data__;if(et instanceof ListCache$1){var ot=et.__data__;if(!Map$2||ot.length<LARGE_ARRAY_SIZE-1)return ot.push([it,g]),this.size=++et.size,this;et=this.__data__=new MapCache$1(ot)}return et.set(it,g),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(it){var g=this.__data__=new ListCache(it);this.size=g.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(it){return this.__data__.set(it,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(it){return this.__data__.has(it)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(it){var g=-1,et=it==null?0:it.length;for(this.__data__=new MapCache;++g<et;)this.add(it[g])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(it,g){for(var et=-1,ot=it==null?0:it.length;++et<ot;)if(g(it[et],et,it))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(it,g){return it.has(g)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$3,ft=it.length,St=g.length;if(ft!=St&&!(dt&&St>ft))return!1;var kt=ut.get(it),Tt=ut.get(g);if(kt&&Tt)return kt==g&&Tt==it;var jt=-1,Rt=!0,Ft=et&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ut.set(it,g),ut.set(g,it);++jt<ft;){var $t=it[jt],zt=g[jt];if(ot)var Kt=dt?ot(zt,$t,jt,g,it,ut):ot($t,zt,jt,it,g,ut);if(Kt!==void 0){if(Kt)continue;Rt=!1;break}if(Ft){if(!arraySome(g,function(Bt,Ut){if(!cacheHas(Ft,Ut)&&($t===Bt||ct($t,Bt,et,ot,ut)))return Ft.push(Ut)})){Rt=!1;break}}else if(!($t===zt||ct($t,zt,et,ot,ut))){Rt=!1;break}}return ut.delete(it),ut.delete(g),Rt}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot,ct){et[++g]=[ct,ot]}),et}var _mapToArray=mapToArray$1;function setToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot){et[++g]=ot}),et}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(it,g,et,ot,ct,ut,dt){switch(et){case dataViewTag$2:if(it.byteLength!=g.byteLength||it.byteOffset!=g.byteOffset)return!1;it=it.buffer,g=g.buffer;case arrayBufferTag$1:return!(it.byteLength!=g.byteLength||!ut(new Uint8Array$1(it),new Uint8Array$1(g)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+it,+g);case errorTag$1:return it.name==g.name&&it.message==g.message;case regexpTag$1:case stringTag$1:return it==g+"";case mapTag$2:var ft=mapToArray;case setTag$2:var St=ot&COMPARE_PARTIAL_FLAG$2;if(ft||(ft=setToArray),it.size!=g.size&&!St)return!1;var kt=dt.get(it);if(kt)return kt==g;ot|=COMPARE_UNORDERED_FLAG,dt.set(it,g);var Tt=equalArrays$1(ft(it),ft(g),ot,ct,ut,dt);return dt.delete(it),Tt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(it)==symbolValueOf.call(g)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(it,g){for(var et=-1,ot=g.length,ct=it.length;++et<ot;)it[ct+et]=g[et];return it}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(it,g,et){var ot=g(it);return isArray$2(it)?ot:arrayPush(ot,et(it))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(it,g){for(var et=-1,ot=it==null?0:it.length,ct=0,ut=[];++et<ot;){var dt=it[et];g(dt,et,it)&&(ut[ct++]=dt)}return ut}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(it){return it==null?[]:(it=Object(it),arrayFilter(nativeGetSymbols(it),function(g){return propertyIsEnumerable$1.call(it,g)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(it,g){for(var et=-1,ot=Array(it);++et<it;)ot[et]=g(et);return ot}var _baseTimes=baseTimes$1;function isObjectLike$4(it){return it!=null&&typeof it=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(it){return isObjectLike$3(it)&&baseGetTag$2(it)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(it){return isObjectLike$2(it)&&hasOwnProperty$4.call(it,"callee")&&!propertyIsEnumerable.call(it,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(it,g){var et=_root,ot=stubFalse_1,ct=g&&!g.nodeType&&g,ut=ct&&!0&&it&&!it.nodeType&&it,dt=ut&&ut.exports===ct,ft=dt?et.Buffer:void 0,St=ft?ft.isBuffer:void 0,kt=St||ot;it.exports=kt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(it,g){var et=typeof it;return g=g??MAX_SAFE_INTEGER$2,!!g&&(et=="number"||et!="symbol"&&reIsUint.test(it))&&it>-1&&it%1==0&&it<g}var _isIndex=isIndex$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(it){return isObjectLike$1(it)&&isLength$1(it.length)&&!!typedArrayTags[baseGetTag$1(it)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(it){return function(g){return it(g)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(it,g){var et=_freeGlobal,ot=g&&!g.nodeType&&g,ct=ot&&!0&&it&&!it.nodeType&&it,ut=ct&&ct.exports===ot,dt=ut&&et.process,ft=function(){try{var St=ct&&ct.require&&ct.require("util").types;return St||dt&&dt.binding&&dt.binding("util")}catch{}}();it.exports=ft})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(it,g){var et=isArray$1(it),ot=!et&&isArguments(it),ct=!et&&!ot&&isBuffer$1(it),ut=!et&&!ot&&!ct&&isTypedArray$1(it),dt=et||ot||ct||ut,ft=dt?baseTimes(it.length,String):[],St=ft.length;for(var kt in it)(g||hasOwnProperty$3.call(it,kt))&&!(dt&&(kt=="length"||ct&&(kt=="offset"||kt=="parent")||ut&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||isIndex(kt,St)))&&ft.push(kt);return ft}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(it){var g=it&&it.constructor,et=typeof g=="function"&&g.prototype||objectProto$3;return it===et}var _isPrototype=isPrototype$1;function overArg$1(it,g){return function(et){return it(g(et))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(it){if(!isPrototype(it))return nativeKeys(it);var g=[];for(var et in Object(it))hasOwnProperty$2.call(it,et)&&et!="constructor"&&g.push(et);return g}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength=isLength_1;function isArrayLike$1(it){return it!=null&&isLength(it.length)&&!isFunction$1(it)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$2(it){return isArrayLike(it)?arrayLikeKeys(it):baseKeys(it)}var keys_1=keys$2,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(it){return baseGetAllKeys(it,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$1,ft=getAllKeys(it),St=ft.length,kt=getAllKeys(g),Tt=kt.length;if(St!=Tt&&!dt)return!1;for(var jt=St;jt--;){var Rt=ft[jt];if(!(dt?Rt in g:hasOwnProperty$1.call(g,Rt)))return!1}var Ft=ut.get(it),$t=ut.get(g);if(Ft&&$t)return Ft==g&&$t==it;var zt=!0;ut.set(it,g),ut.set(g,it);for(var Kt=dt;++jt<St;){Rt=ft[jt];var Bt=it[Rt],Ut=g[Rt];if(ot)var Jt=dt?ot(Ut,Bt,Rt,g,it,ut):ot(Bt,Ut,Rt,it,g,ut);if(!(Jt===void 0?Bt===Ut||ct(Bt,Ut,et,ot,ut):Jt)){zt=!1;break}Kt||(Kt=Rt=="constructor")}if(zt&&!Kt){var en=it.constructor,tn=g.constructor;en!=tn&&"constructor"in it&&"constructor"in g&&!(typeof en=="function"&&en instanceof en&&typeof tn=="function"&&tn instanceof tn)&&(zt=!1)}return ut.delete(it),ut.delete(g),zt}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(it){var g=baseGetTag(it),et=g==objectTag$1?it.constructor:void 0,ot=et?toSource(et):"";if(ot)switch(ot){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return g});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(it,g,et,ot,ct,ut){var dt=isArray(it),ft=isArray(g),St=dt?arrayTag:getTag(it),kt=ft?arrayTag:getTag(g);St=St==argsTag?objectTag:St,kt=kt==argsTag?objectTag:kt;var Tt=St==objectTag,jt=kt==objectTag,Rt=St==kt;if(Rt&&isBuffer(it)){if(!isBuffer(g))return!1;dt=!0,Tt=!1}if(Rt&&!Tt)return ut||(ut=new Stack),dt||isTypedArray(it)?equalArrays(it,g,et,ot,ct,ut):equalByTag(it,g,St,et,ot,ct,ut);if(!(et&COMPARE_PARTIAL_FLAG)){var Ft=Tt&&hasOwnProperty.call(it,"__wrapped__"),$t=jt&&hasOwnProperty.call(g,"__wrapped__");if(Ft||$t){var zt=Ft?it.value():it,Kt=$t?g.value():g;return ut||(ut=new Stack),ct(zt,Kt,et,ot,ut)}}return Rt?(ut||(ut=new Stack),equalObjects(it,g,et,ot,ct,ut)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(it,g,et,ot,ct){return it===g?!0:it==null||g==null||!isObjectLike(it)&&!isObjectLike(g)?it!==it&&g!==g:baseIsEqualDeep(it,g,et,ot,baseIsEqual$1,ct)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(it,g){return baseIsEqual(it,g)}var isEqual_1$1=isEqual,quill={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(it,g){(function(ot,ct){it.exports=ct()})(typeof self<"u"?self:commonjsGlobal,function(){return function(et){var ot={};function ct(ut){if(ot[ut])return ot[ut].exports;var dt=ot[ut]={i:ut,l:!1,exports:{}};return et[ut].call(dt.exports,dt,dt.exports,ct),dt.l=!0,dt.exports}return ct.m=et,ct.c=ot,ct.d=function(ut,dt,ft){ct.o(ut,dt)||Object.defineProperty(ut,dt,{configurable:!1,enumerable:!0,get:ft})},ct.n=function(ut){var dt=ut&&ut.__esModule?function(){return ut.default}:function(){return ut};return ct.d(dt,"a",dt),dt},ct.o=function(ut,dt){return Object.prototype.hasOwnProperty.call(ut,dt)},ct.p="",ct(ct.s=109)}([function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(17),dt=ct(18),ft=ct(19),St=ct(45),kt=ct(46),Tt=ct(47),jt=ct(48),Rt=ct(49),Ft=ct(12),$t=ct(32),zt=ct(33),Kt=ct(31),Bt=ct(1),Ut={Scope:Bt.Scope,create:Bt.create,find:Bt.find,query:Bt.query,register:Bt.register,Container:ut.default,Format:dt.default,Leaf:ft.default,Embed:jt.default,Scroll:St.default,Block:Tt.default,Inline:kt.default,Text:Rt.default,Attributor:{Attribute:Ft.default,Class:$t.default,Style:zt.default,Store:Kt.default}};ot.default=Ut},function(et,ot,ct){var ut=this&&this.__extends||function(){var Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Ut){Bt.__proto__=Ut}||function(Bt,Ut){for(var Jt in Ut)Ut.hasOwnProperty(Jt)&&(Bt[Jt]=Ut[Jt])};return function(Bt,Ut){Kt(Bt,Ut);function Jt(){this.constructor=Bt}Bt.prototype=Ut===null?Object.create(Ut):(Jt.prototype=Ut.prototype,new Jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=function(Kt){ut(Bt,Kt);function Bt(Ut){var Jt=this;return Ut="[Parchment] "+Ut,Jt=Kt.call(this,Ut)||this,Jt.message=Ut,Jt.name=Jt.constructor.name,Jt}return Bt}(Error);ot.ParchmentError=dt;var ft={},St={},kt={},Tt={};ot.DATA_KEY="__blot";var jt;(function(Kt){Kt[Kt.TYPE=3]="TYPE",Kt[Kt.LEVEL=12]="LEVEL",Kt[Kt.ATTRIBUTE=13]="ATTRIBUTE",Kt[Kt.BLOT=14]="BLOT",Kt[Kt.INLINE=7]="INLINE",Kt[Kt.BLOCK=11]="BLOCK",Kt[Kt.BLOCK_BLOT=10]="BLOCK_BLOT",Kt[Kt.INLINE_BLOT=6]="INLINE_BLOT",Kt[Kt.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Kt[Kt.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Kt[Kt.ANY=15]="ANY"})(jt=ot.Scope||(ot.Scope={}));function Rt(Kt,Bt){var Ut=$t(Kt);if(Ut==null)throw new dt("Unable to create "+Kt+" blot");var Jt=Ut,en=Kt instanceof Node||Kt.nodeType===Node.TEXT_NODE?Kt:Jt.create(Bt);return new Jt(en,Bt)}ot.create=Rt;function Ft(Kt,Bt){return Bt===void 0&&(Bt=!1),Kt==null?null:Kt[ot.DATA_KEY]!=null?Kt[ot.DATA_KEY].blot:Bt?Ft(Kt.parentNode,Bt):null}ot.find=Ft;function $t(Kt,Bt){Bt===void 0&&(Bt=jt.ANY);var Ut;if(typeof Kt=="string")Ut=Tt[Kt]||ft[Kt];else if(Kt instanceof Text||Kt.nodeType===Node.TEXT_NODE)Ut=Tt.text;else if(typeof Kt=="number")Kt&jt.LEVEL&jt.BLOCK?Ut=Tt.block:Kt&jt.LEVEL&jt.INLINE&&(Ut=Tt.inline);else if(Kt instanceof HTMLElement){var Jt=(Kt.getAttribute("class")||"").split(/\s+/);for(var en in Jt)if(Ut=St[Jt[en]],Ut)break;Ut=Ut||kt[Kt.tagName]}return Ut==null?null:Bt&jt.LEVEL&Ut.scope&&Bt&jt.TYPE&Ut.scope?Ut:null}ot.query=$t;function zt(){for(var Kt=[],Bt=0;Bt<arguments.length;Bt++)Kt[Bt]=arguments[Bt];if(Kt.length>1)return Kt.map(function(en){return zt(en)});var Ut=Kt[0];if(typeof Ut.blotName!="string"&&typeof Ut.attrName!="string")throw new dt("Invalid definition");if(Ut.blotName==="abstract")throw new dt("Cannot register abstract class");if(Tt[Ut.blotName||Ut.attrName]=Ut,typeof Ut.keyName=="string")ft[Ut.keyName]=Ut;else if(Ut.className!=null&&(St[Ut.className]=Ut),Ut.tagName!=null){Array.isArray(Ut.tagName)?Ut.tagName=Ut.tagName.map(function(en){return en.toUpperCase()}):Ut.tagName=Ut.tagName.toUpperCase();var Jt=Array.isArray(Ut.tagName)?Ut.tagName:[Ut.tagName];Jt.forEach(function(en){(kt[en]==null||Ut.className==null)&&(kt[en]=Ut)})}return Ut}ot.register=zt},function(et,ot,ct){var ut=ct(51),dt=ct(11),ft=ct(3),St=ct(20),kt=String.fromCharCode(0),Tt=function(jt){Array.isArray(jt)?this.ops=jt:jt!=null&&Array.isArray(jt.ops)?this.ops=jt.ops:this.ops=[]};Tt.prototype.insert=function(jt,Rt){var Ft={};return jt.length===0?this:(Ft.insert=jt,Rt!=null&&typeof Rt=="object"&&Object.keys(Rt).length>0&&(Ft.attributes=Rt),this.push(Ft))},Tt.prototype.delete=function(jt){return jt<=0?this:this.push({delete:jt})},Tt.prototype.retain=function(jt,Rt){if(jt<=0)return this;var Ft={retain:jt};return Rt!=null&&typeof Rt=="object"&&Object.keys(Rt).length>0&&(Ft.attributes=Rt),this.push(Ft)},Tt.prototype.push=function(jt){var Rt=this.ops.length,Ft=this.ops[Rt-1];if(jt=ft(!0,{},jt),typeof Ft=="object"){if(typeof jt.delete=="number"&&typeof Ft.delete=="number")return this.ops[Rt-1]={delete:Ft.delete+jt.delete},this;if(typeof Ft.delete=="number"&&jt.insert!=null&&(Rt-=1,Ft=this.ops[Rt-1],typeof Ft!="object"))return this.ops.unshift(jt),this;if(dt(jt.attributes,Ft.attributes)){if(typeof jt.insert=="string"&&typeof Ft.insert=="string")return this.ops[Rt-1]={insert:Ft.insert+jt.insert},typeof jt.attributes=="object"&&(this.ops[Rt-1].attributes=jt.attributes),this;if(typeof jt.retain=="number"&&typeof Ft.retain=="number")return this.ops[Rt-1]={retain:Ft.retain+jt.retain},typeof jt.attributes=="object"&&(this.ops[Rt-1].attributes=jt.attributes),this}}return Rt===this.ops.length?this.ops.push(jt):this.ops.splice(Rt,0,jt),this},Tt.prototype.chop=function(){var jt=this.ops[this.ops.length-1];return jt&&jt.retain&&!jt.attributes&&this.ops.pop(),this},Tt.prototype.filter=function(jt){return this.ops.filter(jt)},Tt.prototype.forEach=function(jt){this.ops.forEach(jt)},Tt.prototype.map=function(jt){return this.ops.map(jt)},Tt.prototype.partition=function(jt){var Rt=[],Ft=[];return this.forEach(function($t){var zt=jt($t)?Rt:Ft;zt.push($t)}),[Rt,Ft]},Tt.prototype.reduce=function(jt,Rt){return this.ops.reduce(jt,Rt)},Tt.prototype.changeLength=function(){return this.reduce(function(jt,Rt){return Rt.insert?jt+St.length(Rt):Rt.delete?jt-Rt.delete:jt},0)},Tt.prototype.length=function(){return this.reduce(function(jt,Rt){return jt+St.length(Rt)},0)},Tt.prototype.slice=function(jt,Rt){jt=jt||0,typeof Rt!="number"&&(Rt=1/0);for(var Ft=[],$t=St.iterator(this.ops),zt=0;zt<Rt&&$t.hasNext();){var Kt;zt<jt?Kt=$t.next(jt-zt):(Kt=$t.next(Rt-zt),Ft.push(Kt)),zt+=St.length(Kt)}return new Tt(Ft)},Tt.prototype.compose=function(jt){var Rt=St.iterator(this.ops),Ft=St.iterator(jt.ops),$t=[],zt=Ft.peek();if(zt!=null&&typeof zt.retain=="number"&&zt.attributes==null){for(var Kt=zt.retain;Rt.peekType()==="insert"&&Rt.peekLength()<=Kt;)Kt-=Rt.peekLength(),$t.push(Rt.next());zt.retain-Kt>0&&Ft.next(zt.retain-Kt)}for(var Bt=new Tt($t);Rt.hasNext()||Ft.hasNext();)if(Ft.peekType()==="insert")Bt.push(Ft.next());else if(Rt.peekType()==="delete")Bt.push(Rt.next());else{var Ut=Math.min(Rt.peekLength(),Ft.peekLength()),Jt=Rt.next(Ut),en=Ft.next(Ut);if(typeof en.retain=="number"){var tn={};typeof Jt.retain=="number"?tn.retain=Ut:tn.insert=Jt.insert;var nn=St.attributes.compose(Jt.attributes,en.attributes,typeof Jt.retain=="number");if(nn&&(tn.attributes=nn),Bt.push(tn),!Ft.hasNext()&&dt(Bt.ops[Bt.ops.length-1],tn)){var rn=new Tt(Rt.rest());return Bt.concat(rn).chop()}}else typeof en.delete=="number"&&typeof Jt.retain=="number"&&Bt.push(en)}return Bt.chop()},Tt.prototype.concat=function(jt){var Rt=new Tt(this.ops.slice());return jt.ops.length>0&&(Rt.push(jt.ops[0]),Rt.ops=Rt.ops.concat(jt.ops.slice(1))),Rt},Tt.prototype.diff=function(jt,Rt){if(this.ops===jt.ops)return new Tt;var Ft=[this,jt].map(function(Ut){return Ut.map(function(Jt){if(Jt.insert!=null)return typeof Jt.insert=="string"?Jt.insert:kt;var en=Ut===jt?"on":"with";throw new Error("diff() called "+en+" non-document")}).join("")}),$t=new Tt,zt=ut(Ft[0],Ft[1],Rt),Kt=St.iterator(this.ops),Bt=St.iterator(jt.ops);return zt.forEach(function(Ut){for(var Jt=Ut[1].length;Jt>0;){var en=0;switch(Ut[0]){case ut.INSERT:en=Math.min(Bt.peekLength(),Jt),$t.push(Bt.next(en));break;case ut.DELETE:en=Math.min(Jt,Kt.peekLength()),Kt.next(en),$t.delete(en);break;case ut.EQUAL:en=Math.min(Kt.peekLength(),Bt.peekLength(),Jt);var tn=Kt.next(en),nn=Bt.next(en);dt(tn.insert,nn.insert)?$t.retain(en,St.attributes.diff(tn.attributes,nn.attributes)):$t.push(nn).delete(en);break}Jt-=en}}),$t.chop()},Tt.prototype.eachLine=function(jt,Rt){Rt=Rt||`
`;for(var Ft=St.iterator(this.ops),$t=new Tt,zt=0;Ft.hasNext();){if(Ft.peekType()!=="insert")return;var Kt=Ft.peek(),Bt=St.length(Kt)-Ft.peekLength(),Ut=typeof Kt.insert=="string"?Kt.insert.indexOf(Rt,Bt)-Bt:-1;if(Ut<0)$t.push(Ft.next());else if(Ut>0)$t.push(Ft.next(Ut));else{if(jt($t,Ft.next(1).attributes||{},zt)===!1)return;zt+=1,$t=new Tt}}$t.length()>0&&jt($t,{},zt)},Tt.prototype.transform=function(jt,Rt){if(Rt=!!Rt,typeof jt=="number")return this.transformPosition(jt,Rt);for(var Ft=St.iterator(this.ops),$t=St.iterator(jt.ops),zt=new Tt;Ft.hasNext()||$t.hasNext();)if(Ft.peekType()==="insert"&&(Rt||$t.peekType()!=="insert"))zt.retain(St.length(Ft.next()));else if($t.peekType()==="insert")zt.push($t.next());else{var Kt=Math.min(Ft.peekLength(),$t.peekLength()),Bt=Ft.next(Kt),Ut=$t.next(Kt);if(Bt.delete)continue;Ut.delete?zt.push(Ut):zt.retain(Kt,St.attributes.transform(Bt.attributes,Ut.attributes,Rt))}return zt.chop()},Tt.prototype.transformPosition=function(jt,Rt){Rt=!!Rt;for(var Ft=St.iterator(this.ops),$t=0;Ft.hasNext()&&$t<=jt;){var zt=Ft.peekLength(),Kt=Ft.peekType();if(Ft.next(),Kt==="delete"){jt-=Math.min(zt,jt-$t);continue}else Kt==="insert"&&($t<jt||!Rt)&&(jt+=zt);$t+=zt}return jt},et.exports=Tt},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut=Object.prototype.toString,dt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,St=function(Ft){return typeof Array.isArray=="function"?Array.isArray(Ft):ut.call(Ft)==="[object Array]"},kt=function(Ft){if(!Ft||ut.call(Ft)!=="[object Object]")return!1;var $t=ct.call(Ft,"constructor"),zt=Ft.constructor&&Ft.constructor.prototype&&ct.call(Ft.constructor.prototype,"isPrototypeOf");if(Ft.constructor&&!$t&&!zt)return!1;var Kt;for(Kt in Ft);return typeof Kt>"u"||ct.call(Ft,Kt)},Tt=function(Ft,$t){dt&&$t.name==="__proto__"?dt(Ft,$t.name,{enumerable:!0,configurable:!0,value:$t.newValue,writable:!0}):Ft[$t.name]=$t.newValue},jt=function(Ft,$t){if($t==="__proto__")if(ct.call(Ft,$t)){if(ft)return ft(Ft,$t).value}else return;return Ft[$t]};et.exports=function Rt(){var Ft,$t,zt,Kt,Bt,Ut,Jt=arguments[0],en=1,tn=arguments.length,nn=!1;for(typeof Jt=="boolean"&&(nn=Jt,Jt=arguments[1]||{},en=2),(Jt==null||typeof Jt!="object"&&typeof Jt!="function")&&(Jt={});en<tn;++en)if(Ft=arguments[en],Ft!=null)for($t in Ft)zt=jt(Jt,$t),Kt=jt(Ft,$t),Jt!==Kt&&(nn&&Kt&&(kt(Kt)||(Bt=St(Kt)))?(Bt?(Bt=!1,Ut=zt&&St(zt)?zt:[]):Ut=zt&&kt(zt)?zt:{},Tt(Jt,{name:$t,newValue:Rt(nn,Ut,Kt)})):typeof Kt<"u"&&Tt(Jt,{name:$t,newValue:Kt}));return Jt}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BlockEmbed=ot.bubbleFormats=void 0;var ut=function(){function fn(mn,En){for(var Sn=0;Sn<En.length;Sn++){var wn=En[Sn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(mn,wn.key,wn)}}return function(mn,En,Sn){return En&&fn(mn.prototype,En),Sn&&fn(mn,Sn),mn}}(),dt=function fn(mn,En,Sn){mn===null&&(mn=Function.prototype);var wn=Object.getOwnPropertyDescriptor(mn,En);if(wn===void 0){var hn=Object.getPrototypeOf(mn);return hn===null?void 0:fn(hn,En,Sn)}else{if("value"in wn)return wn.value;var yn=wn.get;return yn===void 0?void 0:yn.call(Sn)}},ft=ct(3),St=Jt(ft),kt=ct(2),Tt=Jt(kt),jt=ct(0),Rt=Jt(jt),Ft=ct(16),$t=Jt(Ft),zt=ct(6),Kt=Jt(zt),Bt=ct(7),Ut=Jt(Bt);function Jt(fn){return fn&&fn.__esModule?fn:{default:fn}}function en(fn,mn){if(!(fn instanceof mn))throw new TypeError("Cannot call a class as a function")}function tn(fn,mn){if(!fn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mn&&(typeof mn=="object"||typeof mn=="function")?mn:fn}function nn(fn,mn){if(typeof mn!="function"&&mn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof mn);fn.prototype=Object.create(mn&&mn.prototype,{constructor:{value:fn,enumerable:!1,writable:!0,configurable:!0}}),mn&&(Object.setPrototypeOf?Object.setPrototypeOf(fn,mn):fn.__proto__=mn)}var rn=1,on=function(fn){nn(mn,fn);function mn(){return en(this,mn),tn(this,(mn.__proto__||Object.getPrototypeOf(mn)).apply(this,arguments))}return ut(mn,[{key:"attach",value:function(){dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"attach",this).call(this),this.attributes=new Rt.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new Tt.default().insert(this.value(),(0,St.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Sn,wn){var hn=Rt.default.query(Sn,Rt.default.Scope.BLOCK_ATTRIBUTE);hn!=null&&this.attributes.attribute(hn,wn)}},{key:"formatAt",value:function(Sn,wn,hn,yn){this.format(hn,yn)}},{key:"insertAt",value:function(Sn,wn,hn){if(typeof wn=="string"&&wn.endsWith(`
`)){var yn=Rt.default.create(dn.blotName);this.parent.insertBefore(yn,Sn===0?this:this.next),yn.insertAt(0,wn.slice(0,-1))}else dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"insertAt",this).call(this,Sn,wn,hn)}}]),mn}(Rt.default.Embed);on.scope=Rt.default.Scope.BLOCK_BLOT;var dn=function(fn){nn(mn,fn);function mn(En){en(this,mn);var Sn=tn(this,(mn.__proto__||Object.getPrototypeOf(mn)).call(this,En));return Sn.cache={},Sn}return ut(mn,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(Rt.default.Leaf).reduce(function(Sn,wn){return wn.length()===0?Sn:Sn.insert(wn.value(),cn(wn))},new Tt.default).insert(`
`,cn(this))),this.cache.delta}},{key:"deleteAt",value:function(Sn,wn){dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"deleteAt",this).call(this,Sn,wn),this.cache={}}},{key:"formatAt",value:function(Sn,wn,hn,yn){wn<=0||(Rt.default.query(hn,Rt.default.Scope.BLOCK)?Sn+wn===this.length()&&this.format(hn,yn):dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"formatAt",this).call(this,Sn,Math.min(wn,this.length()-Sn-1),hn,yn),this.cache={})}},{key:"insertAt",value:function(Sn,wn,hn){if(hn!=null)return dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"insertAt",this).call(this,Sn,wn,hn);if(wn.length!==0){var yn=wn.split(`
`),an=yn.shift();an.length>0&&(Sn<this.length()-1||this.children.tail==null?dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"insertAt",this).call(this,Math.min(Sn,this.length()-1),an):this.children.tail.insertAt(this.children.tail.length(),an),this.cache={});var un=this;yn.reduce(function(bn,pn){return un=un.split(bn,!0),un.insertAt(0,pn),pn.length},Sn+an.length)}}},{key:"insertBefore",value:function(Sn,wn){var hn=this.children.head;dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"insertBefore",this).call(this,Sn,wn),hn instanceof $t.default&&hn.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"length",this).call(this)+rn),this.cache.length}},{key:"moveChildren",value:function(Sn,wn){dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"moveChildren",this).call(this,Sn,wn),this.cache={}}},{key:"optimize",value:function(Sn){dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"optimize",this).call(this,Sn),this.cache={}}},{key:"path",value:function(Sn){return dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"path",this).call(this,Sn,!0)}},{key:"removeChild",value:function(Sn){dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"removeChild",this).call(this,Sn),this.cache={}}},{key:"split",value:function(Sn){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(wn&&(Sn===0||Sn>=this.length()-rn)){var hn=this.clone();return Sn===0?(this.parent.insertBefore(hn,this),this):(this.parent.insertBefore(hn,this.next),hn)}else{var yn=dt(mn.prototype.__proto__||Object.getPrototypeOf(mn.prototype),"split",this).call(this,Sn,wn);return this.cache={},yn}}}]),mn}(Rt.default.Block);dn.blotName="block",dn.tagName="P",dn.defaultChild="break",dn.allowedChildren=[Kt.default,Rt.default.Embed,Ut.default];function cn(fn){var mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fn==null||(typeof fn.formats=="function"&&(mn=(0,St.default)(mn,fn.formats())),fn.parent==null||fn.parent.blotName=="scroll"||fn.parent.statics.scope!==fn.statics.scope)?mn:cn(fn.parent,mn)}ot.bubbleFormats=cn,ot.BlockEmbed=on,ot.default=dn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.overload=ot.expandConfig=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(un){return typeof un}:function(un){return un&&typeof Symbol=="function"&&un.constructor===Symbol&&un!==Symbol.prototype?"symbol":typeof un},dt=function(){function un(bn,pn){var kn=[],_n=!0,Rn=!1,Nn=void 0;try{for(var Cn=bn[Symbol.iterator](),Mn;!(_n=(Mn=Cn.next()).done)&&(kn.push(Mn.value),!(pn&&kn.length===pn));_n=!0);}catch(In){Rn=!0,Nn=In}finally{try{!_n&&Cn.return&&Cn.return()}finally{if(Rn)throw Nn}}return kn}return function(bn,pn){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return un(bn,pn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function un(bn,pn){for(var kn=0;kn<pn.length;kn++){var _n=pn[kn];_n.enumerable=_n.enumerable||!1,_n.configurable=!0,"value"in _n&&(_n.writable=!0),Object.defineProperty(bn,_n.key,_n)}}return function(bn,pn,kn){return pn&&un(bn.prototype,pn),kn&&un(bn,kn),bn}}();ct(50);var St=ct(2),kt=cn(St),Tt=ct(14),jt=cn(Tt),Rt=ct(8),Ft=cn(Rt),$t=ct(9),zt=cn($t),Kt=ct(0),Bt=cn(Kt),Ut=ct(15),Jt=cn(Ut),en=ct(3),tn=cn(en),nn=ct(10),rn=cn(nn),on=ct(34),dn=cn(on);function cn(un){return un&&un.__esModule?un:{default:un}}function fn(un,bn,pn){return bn in un?Object.defineProperty(un,bn,{value:pn,enumerable:!0,configurable:!0,writable:!0}):un[bn]=pn,un}function mn(un,bn){if(!(un instanceof bn))throw new TypeError("Cannot call a class as a function")}var En=(0,rn.default)("quill"),Sn=function(){ft(un,null,[{key:"debug",value:function(pn){pn===!0&&(pn="log"),rn.default.level(pn)}},{key:"find",value:function(pn){return pn.__quill||Bt.default.find(pn)}},{key:"import",value:function(pn){return this.imports[pn]==null&&En.error("Cannot import "+pn+". Are you sure it was registered?"),this.imports[pn]}},{key:"register",value:function(pn,kn){var _n=this,Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof pn!="string"){var Nn=pn.attrName||pn.blotName;typeof Nn=="string"?this.register("formats/"+Nn,pn,kn):Object.keys(pn).forEach(function(Cn){_n.register(Cn,pn[Cn],kn)})}else this.imports[pn]!=null&&!Rn&&En.warn("Overwriting "+pn+" with",kn),this.imports[pn]=kn,(pn.startsWith("blots/")||pn.startsWith("formats/"))&&kn.blotName!=="abstract"?Bt.default.register(kn):pn.startsWith("modules")&&typeof kn.register=="function"&&kn.register()}}]);function un(bn){var pn=this,kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mn(this,un),this.options=wn(bn,kn),this.container=this.options.container,this.container==null)return En.error("Invalid Quill container",bn);this.options.debug&&un.debug(this.options.debug);var _n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Ft.default,this.scroll=Bt.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new jt.default(this.scroll),this.selection=new Jt.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Ft.default.events.EDITOR_CHANGE,function(Nn){Nn===Ft.default.events.TEXT_CHANGE&&pn.root.classList.toggle("ql-blank",pn.editor.isBlank())}),this.emitter.on(Ft.default.events.SCROLL_UPDATE,function(Nn,Cn){var Mn=pn.selection.lastRange,In=Mn&&Mn.length===0?Mn.index:void 0;hn.call(pn,function(){return pn.editor.update(null,Cn,In)},Nn)});var Rn=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+_n+"<p><br></p></div>");this.setContents(Rn),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ft(un,[{key:"addContainer",value:function(pn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof pn=="string"){var _n=pn;pn=document.createElement("div"),pn.classList.add(_n)}return this.container.insertBefore(pn,kn),pn}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(pn,kn,_n){var Rn=this,Nn=yn(pn,kn,_n),Cn=dt(Nn,4);return pn=Cn[0],kn=Cn[1],_n=Cn[3],hn.call(this,function(){return Rn.editor.deleteText(pn,kn)},_n,pn,-1*kn)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(pn),this.container.classList.toggle("ql-disabled",!pn)}},{key:"focus",value:function(){var pn=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=pn,this.scrollIntoView()}},{key:"format",value:function(pn,kn){var _n=this,Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft.default.sources.API;return hn.call(this,function(){var Nn=_n.getSelection(!0),Cn=new kt.default;if(Nn==null)return Cn;if(Bt.default.query(pn,Bt.default.Scope.BLOCK))Cn=_n.editor.formatLine(Nn.index,Nn.length,fn({},pn,kn));else{if(Nn.length===0)return _n.selection.format(pn,kn),Cn;Cn=_n.editor.formatText(Nn.index,Nn.length,fn({},pn,kn))}return _n.setSelection(Nn,Ft.default.sources.SILENT),Cn},Rn)}},{key:"formatLine",value:function(pn,kn,_n,Rn,Nn){var Cn=this,Mn=void 0,In=yn(pn,kn,_n,Rn,Nn),On=dt(In,4);return pn=On[0],kn=On[1],Mn=On[2],Nn=On[3],hn.call(this,function(){return Cn.editor.formatLine(pn,kn,Mn)},Nn,pn,0)}},{key:"formatText",value:function(pn,kn,_n,Rn,Nn){var Cn=this,Mn=void 0,In=yn(pn,kn,_n,Rn,Nn),On=dt(In,4);return pn=On[0],kn=On[1],Mn=On[2],Nn=On[3],hn.call(this,function(){return Cn.editor.formatText(pn,kn,Mn)},Nn,pn,0)}},{key:"getBounds",value:function(pn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_n=void 0;typeof pn=="number"?_n=this.selection.getBounds(pn,kn):_n=this.selection.getBounds(pn.index,pn.length);var Rn=this.container.getBoundingClientRect();return{bottom:_n.bottom-Rn.top,height:_n.height,left:_n.left-Rn.left,right:_n.right-Rn.left,top:_n.top-Rn.top,width:_n.width}}},{key:"getContents",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-pn,_n=yn(pn,kn),Rn=dt(_n,2);return pn=Rn[0],kn=Rn[1],this.editor.getContents(pn,kn)}},{key:"getFormat",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof pn=="number"?this.editor.getFormat(pn,kn):this.editor.getFormat(pn.index,pn.length)}},{key:"getIndex",value:function(pn){return pn.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(pn){return this.scroll.leaf(pn)}},{key:"getLine",value:function(pn){return this.scroll.line(pn)}},{key:"getLines",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof pn!="number"?this.scroll.lines(pn.index,pn.length):this.scroll.lines(pn,kn)}},{key:"getModule",value:function(pn){return this.theme.modules[pn]}},{key:"getSelection",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return pn&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-pn,_n=yn(pn,kn),Rn=dt(_n,2);return pn=Rn[0],kn=Rn[1],this.editor.getText(pn,kn)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(pn,kn,_n){var Rn=this,Nn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:un.sources.API;return hn.call(this,function(){return Rn.editor.insertEmbed(pn,kn,_n)},Nn,pn)}},{key:"insertText",value:function(pn,kn,_n,Rn,Nn){var Cn=this,Mn=void 0,In=yn(pn,0,_n,Rn,Nn),On=dt(In,4);return pn=On[0],Mn=On[2],Nn=On[3],hn.call(this,function(){return Cn.editor.insertText(pn,kn,Mn)},Nn,pn,kn.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(pn,kn,_n){this.clipboard.dangerouslyPasteHTML(pn,kn,_n)}},{key:"removeFormat",value:function(pn,kn,_n){var Rn=this,Nn=yn(pn,kn,_n),Cn=dt(Nn,4);return pn=Cn[0],kn=Cn[1],_n=Cn[3],hn.call(this,function(){return Rn.editor.removeFormat(pn,kn)},_n,pn)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(pn){var kn=this,_n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return hn.call(this,function(){pn=new kt.default(pn);var Rn=kn.getLength(),Nn=kn.editor.deleteText(0,Rn),Cn=kn.editor.applyDelta(pn),Mn=Cn.ops[Cn.ops.length-1];Mn!=null&&typeof Mn.insert=="string"&&Mn.insert[Mn.insert.length-1]===`
`&&(kn.editor.deleteText(kn.getLength()-1,1),Cn.delete(1));var In=Nn.compose(Cn);return In},_n)}},{key:"setSelection",value:function(pn,kn,_n){if(pn==null)this.selection.setRange(null,kn||un.sources.API);else{var Rn=yn(pn,kn,_n),Nn=dt(Rn,4);pn=Nn[0],kn=Nn[1],_n=Nn[3],this.selection.setRange(new Ut.Range(pn,kn),_n),_n!==Ft.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(pn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API,_n=new kt.default().insert(pn);return this.setContents(_n,kn)}},{key:"update",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ft.default.sources.USER,kn=this.scroll.update(pn);return this.selection.update(pn),kn}},{key:"updateContents",value:function(pn){var kn=this,_n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return hn.call(this,function(){return pn=new kt.default(pn),kn.editor.applyDelta(pn,_n)},_n,!0)}}]),un}();Sn.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Sn.events=Ft.default.events,Sn.sources=Ft.default.sources,Sn.version="1.3.7",Sn.imports={delta:kt.default,parchment:Bt.default,"core/module":zt.default,"core/theme":dn.default};function wn(un,bn){if(bn=(0,tn.default)(!0,{container:un,modules:{clipboard:!0,keyboard:!0,history:!0}},bn),!bn.theme||bn.theme===Sn.DEFAULTS.theme)bn.theme=dn.default;else if(bn.theme=Sn.import("themes/"+bn.theme),bn.theme==null)throw new Error("Invalid theme "+bn.theme+". Did you register it?");var pn=(0,tn.default)(!0,{},bn.theme.DEFAULTS);[pn,bn].forEach(function(Rn){Rn.modules=Rn.modules||{},Object.keys(Rn.modules).forEach(function(Nn){Rn.modules[Nn]===!0&&(Rn.modules[Nn]={})})});var kn=Object.keys(pn.modules).concat(Object.keys(bn.modules)),_n=kn.reduce(function(Rn,Nn){var Cn=Sn.import("modules/"+Nn);return Cn==null?En.error("Cannot load "+Nn+" module. Are you sure you registered it?"):Rn[Nn]=Cn.DEFAULTS||{},Rn},{});return bn.modules!=null&&bn.modules.toolbar&&bn.modules.toolbar.constructor!==Object&&(bn.modules.toolbar={container:bn.modules.toolbar}),bn=(0,tn.default)(!0,{},Sn.DEFAULTS,{modules:_n},pn,bn),["bounds","container","scrollingContainer"].forEach(function(Rn){typeof bn[Rn]=="string"&&(bn[Rn]=document.querySelector(bn[Rn]))}),bn.modules=Object.keys(bn.modules).reduce(function(Rn,Nn){return bn.modules[Nn]&&(Rn[Nn]=bn.modules[Nn]),Rn},{}),bn}function hn(un,bn,pn,kn){if(this.options.strict&&!this.isEnabled()&&bn===Ft.default.sources.USER)return new kt.default;var _n=pn==null?null:this.getSelection(),Rn=this.editor.delta,Nn=un();if(_n!=null&&(pn===!0&&(pn=_n.index),kn==null?_n=an(_n,Nn,bn):kn!==0&&(_n=an(_n,pn,kn,bn)),this.setSelection(_n,Ft.default.sources.SILENT)),Nn.length()>0){var Cn,Mn=[Ft.default.events.TEXT_CHANGE,Nn,Rn,bn];if((Cn=this.emitter).emit.apply(Cn,[Ft.default.events.EDITOR_CHANGE].concat(Mn)),bn!==Ft.default.sources.SILENT){var In;(In=this.emitter).emit.apply(In,Mn)}}return Nn}function yn(un,bn,pn,kn,_n){var Rn={};return typeof un.index=="number"&&typeof un.length=="number"?typeof bn!="number"?(_n=kn,kn=pn,pn=bn,bn=un.length,un=un.index):(bn=un.length,un=un.index):typeof bn!="number"&&(_n=kn,kn=pn,pn=bn,bn=0),(typeof pn>"u"?"undefined":ut(pn))==="object"?(Rn=pn,_n=kn):typeof pn=="string"&&(kn!=null?Rn[pn]=kn:_n=pn),_n=_n||Ft.default.sources.API,[un,bn,Rn,_n]}function an(un,bn,pn,kn){if(un==null)return null;var _n=void 0,Rn=void 0;if(bn instanceof kt.default){var Nn=[un.index,un.index+un.length].map(function(On){return bn.transformPosition(On,kn!==Ft.default.sources.USER)}),Cn=dt(Nn,2);_n=Cn[0],Rn=Cn[1]}else{var Mn=[un.index,un.index+un.length].map(function(On){return On<bn||On===bn&&kn===Ft.default.sources.USER?On:pn>=0?On+pn:Math.max(bn,On+pn)}),In=dt(Mn,2);_n=In[0],Rn=In[1]}return new Ut.Range(_n,Rn-_n)}ot.expandConfig=wn,ot.overload=yn,ot.default=Sn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Jt=0;Jt<Ut.length;Jt++){var en=Ut[Jt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Bt,en.key,en)}}return function(Bt,Ut,Jt){return Ut&&Kt(Bt.prototype,Ut),Jt&&Kt(Bt,Jt),Bt}}(),dt=function Kt(Bt,Ut,Jt){Bt===null&&(Bt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Bt,Ut);if(en===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Kt(tn,Ut,Jt)}else{if("value"in en)return en.value;var nn=en.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(7),St=jt(ft),kt=ct(0),Tt=jt(kt);function jt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Rt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Ft(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function $t(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var zt=function(Kt){$t(Bt,Kt);function Bt(){return Rt(this,Bt),Ft(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"formatAt",value:function(Jt,en,tn,nn){if(Bt.compare(this.statics.blotName,tn)<0&&Tt.default.query(tn,Tt.default.Scope.BLOT)){var rn=this.isolate(Jt,en);nn&&rn.wrap(tn,nn)}else dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"formatAt",this).call(this,Jt,en,tn,nn)}},{key:"optimize",value:function(Jt){if(dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"optimize",this).call(this,Jt),this.parent instanceof Bt&&Bt.compare(this.statics.blotName,this.parent.statics.blotName)>0){var en=this.parent.isolate(this.offset(),this.length());this.moveChildren(en),en.wrap(this)}}}],[{key:"compare",value:function(Jt,en){var tn=Bt.order.indexOf(Jt),nn=Bt.order.indexOf(en);return tn>=0||nn>=0?tn-nn:Jt===en?0:Jt<en?-1:1}}]),Bt}(Tt.default.Inline);zt.allowedChildren=[zt,Tt.default.Embed,St.default],zt.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function St(Rt,Ft){if(!(Rt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(Rt,Ft){if(!Rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:Rt}function Tt(Rt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);Rt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(Rt,Ft):Rt.__proto__=Ft)}var jt=function(Rt){Tt(Ft,Rt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default.Text);ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ut(Jt,en){for(var tn=0;tn<en.length;tn++){var nn=en[tn];nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty(Jt,nn.key,nn)}}return function(Jt,en,tn){return en&&Ut(Jt.prototype,en),tn&&Ut(Jt,tn),Jt}}(),dt=function Ut(Jt,en,tn){Jt===null&&(Jt=Function.prototype);var nn=Object.getOwnPropertyDescriptor(Jt,en);if(nn===void 0){var rn=Object.getPrototypeOf(Jt);return rn===null?void 0:Ut(rn,en,tn)}else{if("value"in nn)return nn.value;var on=nn.get;return on===void 0?void 0:on.call(tn)}},ft=ct(54),St=jt(ft),kt=ct(10),Tt=jt(kt);function jt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Rt(Ut,Jt){if(!(Ut instanceof Jt))throw new TypeError("Cannot call a class as a function")}function Ft(Ut,Jt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&(typeof Jt=="object"||typeof Jt=="function")?Jt:Ut}function $t(Ut,Jt){if(typeof Jt!="function"&&Jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Ut.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Jt):Ut.__proto__=Jt)}var zt=(0,Tt.default)("quill:events"),Kt=["selectionchange","mousedown","mouseup","click"];Kt.forEach(function(Ut){document.addEventListener(Ut,function(){for(var Jt=arguments.length,en=Array(Jt),tn=0;tn<Jt;tn++)en[tn]=arguments[tn];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(nn){if(nn.__quill&&nn.__quill.emitter){var rn;(rn=nn.__quill.emitter).handleDOM.apply(rn,en)}})})});var Bt=function(Ut){$t(Jt,Ut);function Jt(){Rt(this,Jt);var en=Ft(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this));return en.listeners={},en.on("error",zt.error),en}return ut(Jt,[{key:"emit",value:function(){zt.log.apply(zt,arguments),dt(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(tn){for(var nn=arguments.length,rn=Array(nn>1?nn-1:0),on=1;on<nn;on++)rn[on-1]=arguments[on];(this.listeners[tn.type]||[]).forEach(function(dn){var cn=dn.node,fn=dn.handler;(tn.target===cn||cn.contains(tn.target))&&fn.apply(void 0,[tn].concat(rn))})}},{key:"listenDOM",value:function(tn,nn,rn){this.listeners[tn]||(this.listeners[tn]=[]),this.listeners[tn].push({node:nn,handler:rn})}}]),Jt}(St.default);Bt.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Bt.sources={API:"api",SILENT:"silent",USER:"user"},ot.default=Bt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});function ut(ft,St){if(!(ft instanceof St))throw new TypeError("Cannot call a class as a function")}var dt=function ft(St){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ut(this,ft),this.quill=St,this.options=kt};dt.DEFAULTS={},ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=["error","warn","log","info"],dt="warn";function ft(kt){if(ut.indexOf(kt)<=ut.indexOf(dt)){for(var Tt,jt=arguments.length,Rt=Array(jt>1?jt-1:0),Ft=1;Ft<jt;Ft++)Rt[Ft-1]=arguments[Ft];(Tt=console)[kt].apply(Tt,Rt)}}function St(kt){return ut.reduce(function(Tt,jt){return Tt[jt]=ft.bind(console,jt,kt),Tt},{})}ft.level=St.level=function(kt){dt=kt},ot.default=St},function(et,ot,ct){var ut=Array.prototype.slice,dt=ct(52),ft=ct(53),St=et.exports=function(Rt,Ft,$t){return $t||($t={}),Rt===Ft?!0:Rt instanceof Date&&Ft instanceof Date?Rt.getTime()===Ft.getTime():!Rt||!Ft||typeof Rt!="object"&&typeof Ft!="object"?$t.strict?Rt===Ft:Rt==Ft:jt(Rt,Ft,$t)};function kt(Rt){return Rt==null}function Tt(Rt){return!(!Rt||typeof Rt!="object"||typeof Rt.length!="number"||typeof Rt.copy!="function"||typeof Rt.slice!="function"||Rt.length>0&&typeof Rt[0]!="number")}function jt(Rt,Ft,$t){var zt,Kt;if(kt(Rt)||kt(Ft)||Rt.prototype!==Ft.prototype)return!1;if(ft(Rt))return ft(Ft)?(Rt=ut.call(Rt),Ft=ut.call(Ft),St(Rt,Ft,$t)):!1;if(Tt(Rt)){if(!Tt(Ft)||Rt.length!==Ft.length)return!1;for(zt=0;zt<Rt.length;zt++)if(Rt[zt]!==Ft[zt])return!1;return!0}try{var Bt=dt(Rt),Ut=dt(Ft)}catch{return!1}if(Bt.length!=Ut.length)return!1;for(Bt.sort(),Ut.sort(),zt=Bt.length-1;zt>=0;zt--)if(Bt[zt]!=Ut[zt])return!1;for(zt=Bt.length-1;zt>=0;zt--)if(Kt=Bt[zt],!St(Rt[Kt],Ft[Kt],$t))return!1;return typeof Rt==typeof Ft}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St,kt,Tt){Tt===void 0&&(Tt={}),this.attrName=St,this.keyName=kt;var jt=ut.Scope.TYPE&ut.Scope.ATTRIBUTE;Tt.scope!=null?this.scope=Tt.scope&ut.Scope.LEVEL|jt:this.scope=ut.Scope.ATTRIBUTE,Tt.whitelist!=null&&(this.whitelist=Tt.whitelist)}return ft.keys=function(St){return[].map.call(St.attributes,function(kt){return kt.name})},ft.prototype.add=function(St,kt){return this.canAdd(St,kt)?(St.setAttribute(this.keyName,kt),!0):!1},ft.prototype.canAdd=function(St,kt){var Tt=ut.query(St,ut.Scope.BLOT&(this.scope|ut.Scope.TYPE));return Tt==null?!1:this.whitelist==null?!0:typeof kt=="string"?this.whitelist.indexOf(kt.replace(/["']/g,""))>-1:this.whitelist.indexOf(kt)>-1},ft.prototype.remove=function(St){St.removeAttribute(this.keyName)},ft.prototype.value=function(St){var kt=St.getAttribute(this.keyName);return this.canAdd(St,kt)&&kt?kt:""},ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Code=void 0;var ut=function(){function on(dn,cn){var fn=[],mn=!0,En=!1,Sn=void 0;try{for(var wn=dn[Symbol.iterator](),hn;!(mn=(hn=wn.next()).done)&&(fn.push(hn.value),!(cn&&fn.length===cn));mn=!0);}catch(yn){En=!0,Sn=yn}finally{try{!mn&&wn.return&&wn.return()}finally{if(En)throw Sn}}return fn}return function(dn,cn){if(Array.isArray(dn))return dn;if(Symbol.iterator in Object(dn))return on(dn,cn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function on(dn,cn){for(var fn=0;fn<cn.length;fn++){var mn=cn[fn];mn.enumerable=mn.enumerable||!1,mn.configurable=!0,"value"in mn&&(mn.writable=!0),Object.defineProperty(dn,mn.key,mn)}}return function(dn,cn,fn){return cn&&on(dn.prototype,cn),fn&&on(dn,fn),dn}}(),ft=function on(dn,cn,fn){dn===null&&(dn=Function.prototype);var mn=Object.getOwnPropertyDescriptor(dn,cn);if(mn===void 0){var En=Object.getPrototypeOf(dn);return En===null?void 0:on(En,cn,fn)}else{if("value"in mn)return mn.value;var Sn=mn.get;return Sn===void 0?void 0:Sn.call(fn)}},St=ct(2),kt=Ut(St),Tt=ct(0),jt=Ut(Tt),Rt=ct(4),Ft=Ut(Rt),$t=ct(6),zt=Ut($t),Kt=ct(7),Bt=Ut(Kt);function Ut(on){return on&&on.__esModule?on:{default:on}}function Jt(on,dn){if(!(on instanceof dn))throw new TypeError("Cannot call a class as a function")}function en(on,dn){if(!on)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&(typeof dn=="object"||typeof dn=="function")?dn:on}function tn(on,dn){if(typeof dn!="function"&&dn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof dn);on.prototype=Object.create(dn&&dn.prototype,{constructor:{value:on,enumerable:!1,writable:!0,configurable:!0}}),dn&&(Object.setPrototypeOf?Object.setPrototypeOf(on,dn):on.__proto__=dn)}var nn=function(on){tn(dn,on);function dn(){return Jt(this,dn),en(this,(dn.__proto__||Object.getPrototypeOf(dn)).apply(this,arguments))}return dn}(zt.default);nn.blotName="code",nn.tagName="CODE";var rn=function(on){tn(dn,on);function dn(){return Jt(this,dn),en(this,(dn.__proto__||Object.getPrototypeOf(dn)).apply(this,arguments))}return dt(dn,[{key:"delta",value:function(){var fn=this,mn=this.domNode.textContent;return mn.endsWith(`
`)&&(mn=mn.slice(0,-1)),mn.split(`
`).reduce(function(En,Sn){return En.insert(Sn).insert(`
`,fn.formats())},new kt.default)}},{key:"format",value:function(fn,mn){if(!(fn===this.statics.blotName&&mn)){var En=this.descendant(Bt.default,this.length()-1),Sn=ut(En,1),wn=Sn[0];wn!=null&&wn.deleteAt(wn.length()-1,1),ft(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"format",this).call(this,fn,mn)}}},{key:"formatAt",value:function(fn,mn,En,Sn){if(mn!==0&&!(jt.default.query(En,jt.default.Scope.BLOCK)==null||En===this.statics.blotName&&Sn===this.statics.formats(this.domNode))){var wn=this.newlineIndex(fn);if(!(wn<0||wn>=fn+mn)){var hn=this.newlineIndex(fn,!0)+1,yn=wn-hn+1,an=this.isolate(hn,yn),un=an.next;an.format(En,Sn),un instanceof dn&&un.formatAt(0,fn-hn+mn-yn,En,Sn)}}}},{key:"insertAt",value:function(fn,mn,En){if(En==null){var Sn=this.descendant(Bt.default,fn),wn=ut(Sn,2),hn=wn[0],yn=wn[1];hn.insertAt(yn,mn)}}},{key:"length",value:function(){var fn=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?fn:fn+1}},{key:"newlineIndex",value:function(fn){var mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(mn)return this.domNode.textContent.slice(0,fn).lastIndexOf(`
`);var En=this.domNode.textContent.slice(fn).indexOf(`
`);return En>-1?fn+En:-1}},{key:"optimize",value:function(fn){this.domNode.textContent.endsWith(`
`)||this.appendChild(jt.default.create("text",`
`)),ft(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"optimize",this).call(this,fn);var mn=this.next;mn!=null&&mn.prev===this&&mn.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===mn.statics.formats(mn.domNode)&&(mn.optimize(fn),mn.moveChildren(this),mn.remove())}},{key:"replace",value:function(fn){ft(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"replace",this).call(this,fn),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(mn){var En=jt.default.find(mn);En==null?mn.parentNode.removeChild(mn):En instanceof jt.default.Embed?En.remove():En.unwrap()})}}],[{key:"create",value:function(fn){var mn=ft(dn.__proto__||Object.getPrototypeOf(dn),"create",this).call(this,fn);return mn.setAttribute("spellcheck",!1),mn}},{key:"formats",value:function(){return!0}}]),dn}(Ft.default);rn.blotName="code-block",rn.tagName="PRE",rn.TAB="  ",ot.Code=nn,ot.default=rn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(un){return typeof un}:function(un){return un&&typeof Symbol=="function"&&un.constructor===Symbol&&un!==Symbol.prototype?"symbol":typeof un},dt=function(){function un(bn,pn){var kn=[],_n=!0,Rn=!1,Nn=void 0;try{for(var Cn=bn[Symbol.iterator](),Mn;!(_n=(Mn=Cn.next()).done)&&(kn.push(Mn.value),!(pn&&kn.length===pn));_n=!0);}catch(In){Rn=!0,Nn=In}finally{try{!_n&&Cn.return&&Cn.return()}finally{if(Rn)throw Nn}}return kn}return function(bn,pn){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return un(bn,pn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function un(bn,pn){for(var kn=0;kn<pn.length;kn++){var _n=pn[kn];_n.enumerable=_n.enumerable||!1,_n.configurable=!0,"value"in _n&&(_n.writable=!0),Object.defineProperty(bn,_n.key,_n)}}return function(bn,pn,kn){return pn&&un(bn.prototype,pn),kn&&un(bn,kn),bn}}(),St=ct(2),kt=mn(St),Tt=ct(20),jt=mn(Tt),Rt=ct(0),Ft=mn(Rt),$t=ct(13),zt=mn($t),Kt=ct(24),Bt=mn(Kt),Ut=ct(4),Jt=mn(Ut),en=ct(16),tn=mn(en),nn=ct(21),rn=mn(nn),on=ct(11),dn=mn(on),cn=ct(3),fn=mn(cn);function mn(un){return un&&un.__esModule?un:{default:un}}function En(un,bn,pn){return bn in un?Object.defineProperty(un,bn,{value:pn,enumerable:!0,configurable:!0,writable:!0}):un[bn]=pn,un}function Sn(un,bn){if(!(un instanceof bn))throw new TypeError("Cannot call a class as a function")}var wn=/^[ -~]*$/,hn=function(){function un(bn){Sn(this,un),this.scroll=bn,this.delta=this.getDelta()}return ft(un,[{key:"applyDelta",value:function(pn){var kn=this,_n=!1;this.scroll.update();var Rn=this.scroll.length();return this.scroll.batchStart(),pn=an(pn),pn.reduce(function(Nn,Cn){var Mn=Cn.retain||Cn.delete||Cn.insert.length||1,In=Cn.attributes||{};if(Cn.insert!=null){if(typeof Cn.insert=="string"){var On=Cn.insert;On.endsWith(`
`)&&_n&&(_n=!1,On=On.slice(0,-1)),Nn>=Rn&&!On.endsWith(`
`)&&(_n=!0),kn.scroll.insertAt(Nn,On);var jn=kn.scroll.line(Nn),Gn=dt(jn,2),Jn=Gn[0],Un=Gn[1],Hn=(0,fn.default)({},(0,Ut.bubbleFormats)(Jn));if(Jn instanceof Jt.default){var ir=Jn.descendant(Ft.default.Leaf,Un),ur=dt(ir,1),yr=ur[0];Hn=(0,fn.default)(Hn,(0,Ut.bubbleFormats)(yr))}In=jt.default.attributes.diff(Hn,In)||{}}else if(ut(Cn.insert)==="object"){var Bn=Object.keys(Cn.insert)[0];if(Bn==null)return Nn;kn.scroll.insertAt(Nn,Bn,Cn.insert[Bn])}Rn+=Mn}return Object.keys(In).forEach(function(zn){kn.scroll.formatAt(Nn,Mn,zn,In[zn])}),Nn+Mn},0),pn.reduce(function(Nn,Cn){return typeof Cn.delete=="number"?(kn.scroll.deleteAt(Nn,Cn.delete),Nn):Nn+(Cn.retain||Cn.insert.length||1)},0),this.scroll.batchEnd(),this.update(pn)}},{key:"deleteText",value:function(pn,kn){return this.scroll.deleteAt(pn,kn),this.update(new kt.default().retain(pn).delete(kn))}},{key:"formatLine",value:function(pn,kn){var _n=this,Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Rn).forEach(function(Nn){if(!(_n.scroll.whitelist!=null&&!_n.scroll.whitelist[Nn])){var Cn=_n.scroll.lines(pn,Math.max(kn,1)),Mn=kn;Cn.forEach(function(In){var On=In.length();if(!(In instanceof zt.default))In.format(Nn,Rn[Nn]);else{var jn=pn-In.offset(_n.scroll),Gn=In.newlineIndex(jn+Mn)-jn+1;In.formatAt(jn,Gn,Nn,Rn[Nn])}Mn-=On})}}),this.scroll.optimize(),this.update(new kt.default().retain(pn).retain(kn,(0,rn.default)(Rn)))}},{key:"formatText",value:function(pn,kn){var _n=this,Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Rn).forEach(function(Nn){_n.scroll.formatAt(pn,kn,Nn,Rn[Nn])}),this.update(new kt.default().retain(pn).retain(kn,(0,rn.default)(Rn)))}},{key:"getContents",value:function(pn,kn){return this.delta.slice(pn,pn+kn)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(pn,kn){return pn.concat(kn.delta())},new kt.default)}},{key:"getFormat",value:function(pn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_n=[],Rn=[];kn===0?this.scroll.path(pn).forEach(function(Cn){var Mn=dt(Cn,1),In=Mn[0];In instanceof Jt.default?_n.push(In):In instanceof Ft.default.Leaf&&Rn.push(In)}):(_n=this.scroll.lines(pn,kn),Rn=this.scroll.descendants(Ft.default.Leaf,pn,kn));var Nn=[_n,Rn].map(function(Cn){if(Cn.length===0)return{};for(var Mn=(0,Ut.bubbleFormats)(Cn.shift());Object.keys(Mn).length>0;){var In=Cn.shift();if(In==null)return Mn;Mn=yn((0,Ut.bubbleFormats)(In),Mn)}return Mn});return fn.default.apply(fn.default,Nn)}},{key:"getText",value:function(pn,kn){return this.getContents(pn,kn).filter(function(_n){return typeof _n.insert=="string"}).map(function(_n){return _n.insert}).join("")}},{key:"insertEmbed",value:function(pn,kn,_n){return this.scroll.insertAt(pn,kn,_n),this.update(new kt.default().retain(pn).insert(En({},kn,_n)))}},{key:"insertText",value:function(pn,kn){var _n=this,Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return kn=kn.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(pn,kn),Object.keys(Rn).forEach(function(Nn){_n.scroll.formatAt(pn,kn.length,Nn,Rn[Nn])}),this.update(new kt.default().retain(pn).insert(kn,(0,rn.default)(Rn)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var pn=this.scroll.children.head;return pn.statics.blotName!==Jt.default.blotName||pn.children.length>1?!1:pn.children.head instanceof tn.default}},{key:"removeFormat",value:function(pn,kn){var _n=this.getText(pn,kn),Rn=this.scroll.line(pn+kn),Nn=dt(Rn,2),Cn=Nn[0],Mn=Nn[1],In=0,On=new kt.default;Cn!=null&&(Cn instanceof zt.default?In=Cn.newlineIndex(Mn)-Mn+1:In=Cn.length()-Mn,On=Cn.delta().slice(Mn,Mn+In-1).insert(`
`));var jn=this.getContents(pn,kn+In),Gn=jn.diff(new kt.default().insert(_n).concat(On)),Jn=new kt.default().retain(pn).concat(Gn);return this.applyDelta(Jn)}},{key:"update",value:function(pn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Rn=this.delta;if(kn.length===1&&kn[0].type==="characterData"&&kn[0].target.data.match(wn)&&Ft.default.find(kn[0].target)){var Nn=Ft.default.find(kn[0].target),Cn=(0,Ut.bubbleFormats)(Nn),Mn=Nn.offset(this.scroll),In=kn[0].oldValue.replace(Bt.default.CONTENTS,""),On=new kt.default().insert(In),jn=new kt.default().insert(Nn.value()),Gn=new kt.default().retain(Mn).concat(On.diff(jn,_n));pn=Gn.reduce(function(Jn,Un){return Un.insert?Jn.insert(Un.insert,Cn):Jn.push(Un)},new kt.default),this.delta=Rn.compose(pn)}else this.delta=this.getDelta(),(!pn||!(0,dn.default)(Rn.compose(pn),this.delta))&&(pn=Rn.diff(this.delta,_n));return pn}}]),un}();function yn(un,bn){return Object.keys(bn).reduce(function(pn,kn){return un[kn]==null||(bn[kn]===un[kn]?pn[kn]=bn[kn]:Array.isArray(bn[kn])?bn[kn].indexOf(un[kn])<0&&(pn[kn]=bn[kn].concat([un[kn]])):pn[kn]=[bn[kn],un[kn]]),pn},{})}function an(un){return un.reduce(function(bn,pn){if(pn.insert===1){var kn=(0,rn.default)(pn.attributes);return delete kn.image,bn.insert({image:pn.attributes.image},kn)}if(pn.attributes!=null&&(pn.attributes.list===!0||pn.attributes.bullet===!0)&&(pn=(0,rn.default)(pn),pn.attributes.list?pn.attributes.list="ordered":(pn.attributes.list="bullet",delete pn.attributes.bullet)),typeof pn.insert=="string"){var _n=pn.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return bn.insert(_n,pn.attributes)}return bn.push(pn)},new kt.default)}ot.default=hn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Range=void 0;var ut=function(){function on(dn,cn){var fn=[],mn=!0,En=!1,Sn=void 0;try{for(var wn=dn[Symbol.iterator](),hn;!(mn=(hn=wn.next()).done)&&(fn.push(hn.value),!(cn&&fn.length===cn));mn=!0);}catch(yn){En=!0,Sn=yn}finally{try{!mn&&wn.return&&wn.return()}finally{if(En)throw Sn}}return fn}return function(dn,cn){if(Array.isArray(dn))return dn;if(Symbol.iterator in Object(dn))return on(dn,cn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function on(dn,cn){for(var fn=0;fn<cn.length;fn++){var mn=cn[fn];mn.enumerable=mn.enumerable||!1,mn.configurable=!0,"value"in mn&&(mn.writable=!0),Object.defineProperty(dn,mn.key,mn)}}return function(dn,cn,fn){return cn&&on(dn.prototype,cn),fn&&on(dn,fn),dn}}(),ft=ct(0),St=Bt(ft),kt=ct(21),Tt=Bt(kt),jt=ct(11),Rt=Bt(jt),Ft=ct(8),$t=Bt(Ft),zt=ct(10),Kt=Bt(zt);function Bt(on){return on&&on.__esModule?on:{default:on}}function Ut(on){if(Array.isArray(on)){for(var dn=0,cn=Array(on.length);dn<on.length;dn++)cn[dn]=on[dn];return cn}else return Array.from(on)}function Jt(on,dn){if(!(on instanceof dn))throw new TypeError("Cannot call a class as a function")}var en=(0,Kt.default)("quill:selection"),tn=function on(dn){var cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Jt(this,on),this.index=dn,this.length=cn},nn=function(){function on(dn,cn){var fn=this;Jt(this,on),this.emitter=cn,this.scroll=dn,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=St.default.create("cursor",this),this.lastRange=this.savedRange=new tn(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){fn.mouseDown||setTimeout(fn.update.bind(fn,$t.default.sources.USER),1)}),this.emitter.on($t.default.events.EDITOR_CHANGE,function(mn,En){mn===$t.default.events.TEXT_CHANGE&&En.length()>0&&fn.update($t.default.sources.SILENT)}),this.emitter.on($t.default.events.SCROLL_BEFORE_UPDATE,function(){if(fn.hasFocus()){var mn=fn.getNativeRange();mn!=null&&mn.start.node!==fn.cursor.textNode&&fn.emitter.once($t.default.events.SCROLL_UPDATE,function(){try{fn.setNativeRange(mn.start.node,mn.start.offset,mn.end.node,mn.end.offset)}catch{}})}}),this.emitter.on($t.default.events.SCROLL_OPTIMIZE,function(mn,En){if(En.range){var Sn=En.range,wn=Sn.startNode,hn=Sn.startOffset,yn=Sn.endNode,an=Sn.endOffset;fn.setNativeRange(wn,hn,yn,an)}}),this.update($t.default.sources.SILENT)}return dt(on,[{key:"handleComposition",value:function(){var cn=this;this.root.addEventListener("compositionstart",function(){cn.composing=!0}),this.root.addEventListener("compositionend",function(){if(cn.composing=!1,cn.cursor.parent){var fn=cn.cursor.restore();if(!fn)return;setTimeout(function(){cn.setNativeRange(fn.startNode,fn.startOffset,fn.endNode,fn.endOffset)},1)}})}},{key:"handleDragging",value:function(){var cn=this;this.emitter.listenDOM("mousedown",document.body,function(){cn.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){cn.mouseDown=!1,cn.update($t.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(cn,fn){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[cn])){this.scroll.update();var mn=this.getNativeRange();if(!(mn==null||!mn.native.collapsed||St.default.query(cn,St.default.Scope.BLOCK))){if(mn.start.node!==this.cursor.textNode){var En=St.default.find(mn.start.node,!1);if(En==null)return;if(En instanceof St.default.Leaf){var Sn=En.split(mn.start.offset);En.parent.insertBefore(this.cursor,Sn)}else En.insertBefore(this.cursor,mn.start.node);this.cursor.attach()}this.cursor.format(cn,fn),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(cn){var fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,mn=this.scroll.length();cn=Math.min(cn,mn-1),fn=Math.min(cn+fn,mn-1)-cn;var En=void 0,Sn=this.scroll.leaf(cn),wn=ut(Sn,2),hn=wn[0],yn=wn[1];if(hn==null)return null;var an=hn.position(yn,!0),un=ut(an,2);En=un[0],yn=un[1];var bn=document.createRange();if(fn>0){bn.setStart(En,yn);var pn=this.scroll.leaf(cn+fn),kn=ut(pn,2);if(hn=kn[0],yn=kn[1],hn==null)return null;var _n=hn.position(yn,!0),Rn=ut(_n,2);return En=Rn[0],yn=Rn[1],bn.setEnd(En,yn),bn.getBoundingClientRect()}else{var Nn="left",Cn=void 0;return En instanceof Text?(yn<En.data.length?(bn.setStart(En,yn),bn.setEnd(En,yn+1)):(bn.setStart(En,yn-1),bn.setEnd(En,yn),Nn="right"),Cn=bn.getBoundingClientRect()):(Cn=hn.domNode.getBoundingClientRect(),yn>0&&(Nn="right")),{bottom:Cn.top+Cn.height,height:Cn.height,left:Cn[Nn],right:Cn[Nn],top:Cn.top,width:0}}}},{key:"getNativeRange",value:function(){var cn=document.getSelection();if(cn==null||cn.rangeCount<=0)return null;var fn=cn.getRangeAt(0);if(fn==null)return null;var mn=this.normalizeNative(fn);return en.info("getNativeRange",mn),mn}},{key:"getRange",value:function(){var cn=this.getNativeRange();if(cn==null)return[null,null];var fn=this.normalizedToRange(cn);return[fn,cn]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(cn){var fn=this,mn=[[cn.start.node,cn.start.offset]];cn.native.collapsed||mn.push([cn.end.node,cn.end.offset]);var En=mn.map(function(hn){var yn=ut(hn,2),an=yn[0],un=yn[1],bn=St.default.find(an,!0),pn=bn.offset(fn.scroll);return un===0?pn:bn instanceof St.default.Container?pn+bn.length():pn+bn.index(an,un)}),Sn=Math.min(Math.max.apply(Math,Ut(En)),this.scroll.length()-1),wn=Math.min.apply(Math,[Sn].concat(Ut(En)));return new tn(wn,Sn-wn)}},{key:"normalizeNative",value:function(cn){if(!rn(this.root,cn.startContainer)||!cn.collapsed&&!rn(this.root,cn.endContainer))return null;var fn={start:{node:cn.startContainer,offset:cn.startOffset},end:{node:cn.endContainer,offset:cn.endOffset},native:cn};return[fn.start,fn.end].forEach(function(mn){for(var En=mn.node,Sn=mn.offset;!(En instanceof Text)&&En.childNodes.length>0;)if(En.childNodes.length>Sn)En=En.childNodes[Sn],Sn=0;else if(En.childNodes.length===Sn)En=En.lastChild,Sn=En instanceof Text?En.data.length:En.childNodes.length+1;else break;mn.node=En,mn.offset=Sn}),fn}},{key:"rangeToNative",value:function(cn){var fn=this,mn=cn.collapsed?[cn.index]:[cn.index,cn.index+cn.length],En=[],Sn=this.scroll.length();return mn.forEach(function(wn,hn){wn=Math.min(Sn-1,wn);var yn=void 0,an=fn.scroll.leaf(wn),un=ut(an,2),bn=un[0],pn=un[1],kn=bn.position(pn,hn!==0),_n=ut(kn,2);yn=_n[0],pn=_n[1],En.push(yn,pn)}),En.length<2&&(En=En.concat(En)),En}},{key:"scrollIntoView",value:function(cn){var fn=this.lastRange;if(fn!=null){var mn=this.getBounds(fn.index,fn.length);if(mn!=null){var En=this.scroll.length()-1,Sn=this.scroll.line(Math.min(fn.index,En)),wn=ut(Sn,1),hn=wn[0],yn=hn;if(fn.length>0){var an=this.scroll.line(Math.min(fn.index+fn.length,En)),un=ut(an,1);yn=un[0]}if(!(hn==null||yn==null)){var bn=cn.getBoundingClientRect();mn.top<bn.top?cn.scrollTop-=bn.top-mn.top:mn.bottom>bn.bottom&&(cn.scrollTop+=mn.bottom-bn.bottom)}}}}},{key:"setNativeRange",value:function(cn,fn){var mn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cn,En=arguments.length>3&&arguments[3]!==void 0?arguments[3]:fn,Sn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(en.info("setNativeRange",cn,fn,mn,En),!(cn!=null&&(this.root.parentNode==null||cn.parentNode==null||mn.parentNode==null))){var wn=document.getSelection();if(wn!=null)if(cn!=null){this.hasFocus()||this.root.focus();var hn=(this.getNativeRange()||{}).native;if(hn==null||Sn||cn!==hn.startContainer||fn!==hn.startOffset||mn!==hn.endContainer||En!==hn.endOffset){cn.tagName=="BR"&&(fn=[].indexOf.call(cn.parentNode.childNodes,cn),cn=cn.parentNode),mn.tagName=="BR"&&(En=[].indexOf.call(mn.parentNode.childNodes,mn),mn=mn.parentNode);var yn=document.createRange();yn.setStart(cn,fn),yn.setEnd(mn,En),wn.removeAllRanges(),wn.addRange(yn)}}else wn.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(cn){var fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,mn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$t.default.sources.API;if(typeof fn=="string"&&(mn=fn,fn=!1),en.info("setRange",cn),cn!=null){var En=this.rangeToNative(cn);this.setNativeRange.apply(this,Ut(En).concat([fn]))}else this.setNativeRange(null);this.update(mn)}},{key:"update",value:function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$t.default.sources.USER,fn=this.lastRange,mn=this.getRange(),En=ut(mn,2),Sn=En[0],wn=En[1];if(this.lastRange=Sn,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,Rt.default)(fn,this.lastRange)){var hn;!this.composing&&wn!=null&&wn.native.collapsed&&wn.start.node!==this.cursor.textNode&&this.cursor.restore();var yn=[$t.default.events.SELECTION_CHANGE,(0,Tt.default)(this.lastRange),(0,Tt.default)(fn),cn];if((hn=this.emitter).emit.apply(hn,[$t.default.events.EDITOR_CHANGE].concat(yn)),cn!==$t.default.sources.SILENT){var an;(an=this.emitter).emit.apply(an,yn)}}}}]),on}();function rn(on,dn){try{dn.parentNode}catch{return!1}return dn instanceof Text&&(dn=dn.parentNode),on.contains(dn)}ot.Range=tn,ot.default=nn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(zt,Ut.key,Ut)}}return function(zt,Kt,Bt){return Kt&&$t(zt.prototype,Kt),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Kt,Bt){zt===null&&(zt=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(zt,Kt);if(Ut===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var en=Ut.get;return en===void 0?void 0:en.call(Bt)}},ft=ct(0),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(){return Tt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,[{key:"insertInto",value:function(Bt,Ut){Bt.children.length===0?dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"insertInto",this).call(this,Bt,Ut):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),zt}(St.default.Embed);Ft.blotName="break",Ft.tagName="BR",ot.default=Ft},function(et,ot,ct){var ut=this&&this.__extends||function(){var jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Ft){Rt.__proto__=Ft}||function(Rt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(Rt[$t]=Ft[$t])};return function(Rt,Ft){jt(Rt,Ft);function $t(){this.constructor=Rt}Rt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(44),ft=ct(30),St=ct(1),kt=function(jt){ut(Rt,jt);function Rt(Ft){var $t=jt.call(this,Ft)||this;return $t.build(),$t}return Rt.prototype.appendChild=function(Ft){this.insertBefore(Ft)},Rt.prototype.attach=function(){jt.prototype.attach.call(this),this.children.forEach(function(Ft){Ft.attach()})},Rt.prototype.build=function(){var Ft=this;this.children=new dt.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function($t){try{var zt=Tt($t);Ft.insertBefore(zt,Ft.children.head||void 0)}catch(Kt){if(Kt instanceof St.ParchmentError)return;throw Kt}})},Rt.prototype.deleteAt=function(Ft,$t){if(Ft===0&&$t===this.length())return this.remove();this.children.forEachAt(Ft,$t,function(zt,Kt,Bt){zt.deleteAt(Kt,Bt)})},Rt.prototype.descendant=function(Ft,$t){var zt=this.children.find($t),Kt=zt[0],Bt=zt[1];return Ft.blotName==null&&Ft(Kt)||Ft.blotName!=null&&Kt instanceof Ft?[Kt,Bt]:Kt instanceof Rt?Kt.descendant(Ft,Bt):[null,-1]},Rt.prototype.descendants=function(Ft,$t,zt){$t===void 0&&($t=0),zt===void 0&&(zt=Number.MAX_VALUE);var Kt=[],Bt=zt;return this.children.forEachAt($t,zt,function(Ut,Jt,en){(Ft.blotName==null&&Ft(Ut)||Ft.blotName!=null&&Ut instanceof Ft)&&Kt.push(Ut),Ut instanceof Rt&&(Kt=Kt.concat(Ut.descendants(Ft,Jt,Bt))),Bt-=en}),Kt},Rt.prototype.detach=function(){this.children.forEach(function(Ft){Ft.detach()}),jt.prototype.detach.call(this)},Rt.prototype.formatAt=function(Ft,$t,zt,Kt){this.children.forEachAt(Ft,$t,function(Bt,Ut,Jt){Bt.formatAt(Ut,Jt,zt,Kt)})},Rt.prototype.insertAt=function(Ft,$t,zt){var Kt=this.children.find(Ft),Bt=Kt[0],Ut=Kt[1];if(Bt)Bt.insertAt(Ut,$t,zt);else{var Jt=zt==null?St.create("text",$t):St.create($t,zt);this.appendChild(Jt)}},Rt.prototype.insertBefore=function(Ft,$t){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(zt){return Ft instanceof zt}))throw new St.ParchmentError("Cannot insert "+Ft.statics.blotName+" into "+this.statics.blotName);Ft.insertInto(this,$t)},Rt.prototype.length=function(){return this.children.reduce(function(Ft,$t){return Ft+$t.length()},0)},Rt.prototype.moveChildren=function(Ft,$t){this.children.forEach(function(zt){Ft.insertBefore(zt,$t)})},Rt.prototype.optimize=function(Ft){if(jt.prototype.optimize.call(this,Ft),this.children.length===0)if(this.statics.defaultChild!=null){var $t=St.create(this.statics.defaultChild);this.appendChild($t),$t.optimize(Ft)}else this.remove()},Rt.prototype.path=function(Ft,$t){$t===void 0&&($t=!1);var zt=this.children.find(Ft,$t),Kt=zt[0],Bt=zt[1],Ut=[[this,Ft]];return Kt instanceof Rt?Ut.concat(Kt.path(Bt,$t)):(Kt!=null&&Ut.push([Kt,Bt]),Ut)},Rt.prototype.removeChild=function(Ft){this.children.remove(Ft)},Rt.prototype.replace=function(Ft){Ft instanceof Rt&&Ft.moveChildren(this),jt.prototype.replace.call(this,Ft)},Rt.prototype.split=function(Ft,$t){if($t===void 0&&($t=!1),!$t){if(Ft===0)return this;if(Ft===this.length())return this.next}var zt=this.clone();return this.parent.insertBefore(zt,this.next),this.children.forEachAt(Ft,this.length(),function(Kt,Bt,Ut){Kt=Kt.split(Bt,$t),zt.appendChild(Kt)}),zt},Rt.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},Rt.prototype.update=function(Ft,$t){var zt=this,Kt=[],Bt=[];Ft.forEach(function(Ut){Ut.target===zt.domNode&&Ut.type==="childList"&&(Kt.push.apply(Kt,Ut.addedNodes),Bt.push.apply(Bt,Ut.removedNodes))}),Bt.forEach(function(Ut){if(!(Ut.parentNode!=null&&Ut.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Ut)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Jt=St.find(Ut);Jt!=null&&(Jt.domNode.parentNode==null||Jt.domNode.parentNode===zt.domNode)&&Jt.detach()}}),Kt.filter(function(Ut){return Ut.parentNode==zt.domNode}).sort(function(Ut,Jt){return Ut===Jt?0:Ut.compareDocumentPosition(Jt)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Ut){var Jt=null;Ut.nextSibling!=null&&(Jt=St.find(Ut.nextSibling));var en=Tt(Ut);(en.next!=Jt||en.next==null)&&(en.parent!=null&&en.parent.removeChild(zt),zt.insertBefore(en,Jt||void 0))})},Rt}(ft.default);function Tt(jt){var Rt=St.find(jt);if(Rt==null)try{Rt=St.create(jt)}catch{Rt=St.create(St.Scope.INLINE),[].slice.call(jt.childNodes).forEach(function($t){Rt.domNode.appendChild($t)}),jt.parentNode&&jt.parentNode.replaceChild(Rt.domNode,jt),Rt.attach()}return Rt}ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Ft){Rt.__proto__=Ft}||function(Rt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(Rt[$t]=Ft[$t])};return function(Rt,Ft){jt(Rt,Ft);function $t(){this.constructor=Rt}Rt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12),ft=ct(31),St=ct(17),kt=ct(1),Tt=function(jt){ut(Rt,jt);function Rt(Ft){var $t=jt.call(this,Ft)||this;return $t.attributes=new ft.default($t.domNode),$t}return Rt.formats=function(Ft){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return Ft.tagName.toLowerCase()},Rt.prototype.format=function(Ft,$t){var zt=kt.query(Ft);zt instanceof dt.default?this.attributes.attribute(zt,$t):$t&&zt!=null&&(Ft!==this.statics.blotName||this.formats()[Ft]!==$t)&&this.replaceWith(Ft,$t)},Rt.prototype.formats=function(){var Ft=this.attributes.values(),$t=this.statics.formats(this.domNode);return $t!=null&&(Ft[this.statics.blotName]=$t),Ft},Rt.prototype.replaceWith=function(Ft,$t){var zt=jt.prototype.replaceWith.call(this,Ft,$t);return this.attributes.copy(zt),zt},Rt.prototype.update=function(Ft,$t){var zt=this;jt.prototype.update.call(this,Ft,$t),Ft.some(function(Kt){return Kt.target===zt.domNode&&Kt.type==="attributes"})&&this.attributes.build()},Rt.prototype.wrap=function(Ft,$t){var zt=jt.prototype.wrap.call(this,Ft,$t);return zt instanceof Rt&&zt.statics.scope===this.statics.scope&&this.attributes.move(zt),zt},Rt}(St.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,jt){Tt.__proto__=jt}||function(Tt,jt){for(var Rt in jt)jt.hasOwnProperty(Rt)&&(Tt[Rt]=jt[Rt])};return function(Tt,jt){kt(Tt,jt);function Rt(){this.constructor=Tt}Tt.prototype=jt===null?Object.create(jt):(Rt.prototype=jt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(30),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.value=function(jt){return!0},Tt.prototype.index=function(jt,Rt){return this.domNode===jt||this.domNode.compareDocumentPosition(jt)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(Rt,1):-1},Tt.prototype.position=function(jt,Rt){var Ft=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return jt>0&&(Ft+=1),[this.parent.domNode,Ft]},Tt.prototype.value=function(){var jt;return jt={},jt[this.statics.blotName]=this.statics.value(this.domNode)||!0,jt},Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=ct(11),dt=ct(3),ft={attributes:{compose:function(kt,Tt,jt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Rt=dt(!0,{},Tt);jt||(Rt=Object.keys(Rt).reduce(function($t,zt){return Rt[zt]!=null&&($t[zt]=Rt[zt]),$t},{}));for(var Ft in kt)kt[Ft]!==void 0&&Tt[Ft]===void 0&&(Rt[Ft]=kt[Ft]);return Object.keys(Rt).length>0?Rt:void 0},diff:function(kt,Tt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var jt=Object.keys(kt).concat(Object.keys(Tt)).reduce(function(Rt,Ft){return ut(kt[Ft],Tt[Ft])||(Rt[Ft]=Tt[Ft]===void 0?null:Tt[Ft]),Rt},{});return Object.keys(jt).length>0?jt:void 0},transform:function(kt,Tt,jt){if(typeof kt!="object")return Tt;if(typeof Tt=="object"){if(!jt)return Tt;var Rt=Object.keys(Tt).reduce(function(Ft,$t){return kt[$t]===void 0&&(Ft[$t]=Tt[$t]),Ft},{});return Object.keys(Rt).length>0?Rt:void 0}}},iterator:function(kt){return new St(kt)},length:function(kt){return typeof kt.delete=="number"?kt.delete:typeof kt.retain=="number"?kt.retain:typeof kt.insert=="string"?kt.insert.length:1}};function St(kt){this.ops=kt,this.index=0,this.offset=0}St.prototype.hasNext=function(){return this.peekLength()<1/0},St.prototype.next=function(kt){kt||(kt=1/0);var Tt=this.ops[this.index];if(Tt){var jt=this.offset,Rt=ft.length(Tt);if(kt>=Rt-jt?(kt=Rt-jt,this.index+=1,this.offset=0):this.offset+=kt,typeof Tt.delete=="number")return{delete:kt};var Ft={};return Tt.attributes&&(Ft.attributes=Tt.attributes),typeof Tt.retain=="number"?Ft.retain=kt:typeof Tt.insert=="string"?Ft.insert=Tt.insert.substr(jt,kt):Ft.insert=Tt.insert,Ft}else return{retain:1/0}},St.prototype.peek=function(){return this.ops[this.index]},St.prototype.peekLength=function(){return this.ops[this.index]?ft.length(this.ops[this.index])-this.offset:1/0},St.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},St.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var kt=this.offset,Tt=this.index,jt=this.next(),Rt=this.ops.slice(this.index);return this.offset=kt,this.index=Tt,[jt].concat(Rt)}else return[]},et.exports=ft},function(et,ot){var ct=function(){function ut(zt,Kt){return Kt!=null&&zt instanceof Kt}var dt;try{dt=Map}catch{dt=function(){}}var ft;try{ft=Set}catch{ft=function(){}}var St;try{St=Promise}catch{St=function(){}}function kt(zt,Kt,Bt,Ut,Jt){typeof Kt=="object"&&(Bt=Kt.depth,Ut=Kt.prototype,Jt=Kt.includeNonEnumerable,Kt=Kt.circular);var en=[],tn=[],nn=typeof Buffer<"u";typeof Kt>"u"&&(Kt=!0),typeof Bt>"u"&&(Bt=1/0);function rn(on,dn){if(on===null)return null;if(dn===0)return on;var cn,fn;if(typeof on!="object")return on;if(ut(on,dt))cn=new dt;else if(ut(on,ft))cn=new ft;else if(ut(on,St))cn=new St(function(bn,pn){on.then(function(kn){bn(rn(kn,dn-1))},function(kn){pn(rn(kn,dn-1))})});else if(kt.__isArray(on))cn=[];else if(kt.__isRegExp(on))cn=new RegExp(on.source,$t(on)),on.lastIndex&&(cn.lastIndex=on.lastIndex);else if(kt.__isDate(on))cn=new Date(on.getTime());else{if(nn&&Buffer.isBuffer(on))return Buffer.allocUnsafe?cn=Buffer.allocUnsafe(on.length):cn=new Buffer(on.length),on.copy(cn),cn;ut(on,Error)?cn=Object.create(on):typeof Ut>"u"?(fn=Object.getPrototypeOf(on),cn=Object.create(fn)):(cn=Object.create(Ut),fn=Ut)}if(Kt){var mn=en.indexOf(on);if(mn!=-1)return tn[mn];en.push(on),tn.push(cn)}ut(on,dt)&&on.forEach(function(bn,pn){var kn=rn(pn,dn-1),_n=rn(bn,dn-1);cn.set(kn,_n)}),ut(on,ft)&&on.forEach(function(bn){var pn=rn(bn,dn-1);cn.add(pn)});for(var En in on){var Sn;fn&&(Sn=Object.getOwnPropertyDescriptor(fn,En)),!(Sn&&Sn.set==null)&&(cn[En]=rn(on[En],dn-1))}if(Object.getOwnPropertySymbols)for(var wn=Object.getOwnPropertySymbols(on),En=0;En<wn.length;En++){var hn=wn[En],yn=Object.getOwnPropertyDescriptor(on,hn);yn&&!yn.enumerable&&!Jt||(cn[hn]=rn(on[hn],dn-1),yn.enumerable||Object.defineProperty(cn,hn,{enumerable:!1}))}if(Jt)for(var an=Object.getOwnPropertyNames(on),En=0;En<an.length;En++){var un=an[En],yn=Object.getOwnPropertyDescriptor(on,un);yn&&yn.enumerable||(cn[un]=rn(on[un],dn-1),Object.defineProperty(cn,un,{enumerable:!1}))}return cn}return rn(zt,Bt)}kt.clonePrototype=function(Kt){if(Kt===null)return null;var Bt=function(){};return Bt.prototype=Kt,new Bt};function Tt(zt){return Object.prototype.toString.call(zt)}kt.__objToStr=Tt;function jt(zt){return typeof zt=="object"&&Tt(zt)==="[object Date]"}kt.__isDate=jt;function Rt(zt){return typeof zt=="object"&&Tt(zt)==="[object Array]"}kt.__isArray=Rt;function Ft(zt){return typeof zt=="object"&&Tt(zt)==="[object RegExp]"}kt.__isRegExp=Ft;function $t(zt){var Kt="";return zt.global&&(Kt+="g"),zt.ignoreCase&&(Kt+="i"),zt.multiline&&(Kt+="m"),Kt}return kt.__getRegExpFlags=$t,kt}();typeof et=="object"&&et.exports&&(et.exports=ct)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function cn(fn,mn){var En=[],Sn=!0,wn=!1,hn=void 0;try{for(var yn=fn[Symbol.iterator](),an;!(Sn=(an=yn.next()).done)&&(En.push(an.value),!(mn&&En.length===mn));Sn=!0);}catch(un){wn=!0,hn=un}finally{try{!Sn&&yn.return&&yn.return()}finally{if(wn)throw hn}}return En}return function(fn,mn){if(Array.isArray(fn))return fn;if(Symbol.iterator in Object(fn))return cn(fn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function cn(fn,mn){for(var En=0;En<mn.length;En++){var Sn=mn[En];Sn.enumerable=Sn.enumerable||!1,Sn.configurable=!0,"value"in Sn&&(Sn.writable=!0),Object.defineProperty(fn,Sn.key,Sn)}}return function(fn,mn,En){return mn&&cn(fn.prototype,mn),En&&cn(fn,En),fn}}(),ft=function cn(fn,mn,En){fn===null&&(fn=Function.prototype);var Sn=Object.getOwnPropertyDescriptor(fn,mn);if(Sn===void 0){var wn=Object.getPrototypeOf(fn);return wn===null?void 0:cn(wn,mn,En)}else{if("value"in Sn)return Sn.value;var hn=Sn.get;return hn===void 0?void 0:hn.call(En)}},St=ct(0),kt=en(St),Tt=ct(8),jt=en(Tt),Rt=ct(4),Ft=en(Rt),$t=ct(16),zt=en($t),Kt=ct(13),Bt=en(Kt),Ut=ct(25),Jt=en(Ut);function en(cn){return cn&&cn.__esModule?cn:{default:cn}}function tn(cn,fn){if(!(cn instanceof fn))throw new TypeError("Cannot call a class as a function")}function nn(cn,fn){if(!cn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fn&&(typeof fn=="object"||typeof fn=="function")?fn:cn}function rn(cn,fn){if(typeof fn!="function"&&fn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fn);cn.prototype=Object.create(fn&&fn.prototype,{constructor:{value:cn,enumerable:!1,writable:!0,configurable:!0}}),fn&&(Object.setPrototypeOf?Object.setPrototypeOf(cn,fn):cn.__proto__=fn)}function on(cn){return cn instanceof Ft.default||cn instanceof Rt.BlockEmbed}var dn=function(cn){rn(fn,cn);function fn(mn,En){tn(this,fn);var Sn=nn(this,(fn.__proto__||Object.getPrototypeOf(fn)).call(this,mn));return Sn.emitter=En.emitter,Array.isArray(En.whitelist)&&(Sn.whitelist=En.whitelist.reduce(function(wn,hn){return wn[hn]=!0,wn},{})),Sn.domNode.addEventListener("DOMNodeInserted",function(){}),Sn.optimize(),Sn.enable(),Sn}return dt(fn,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(En,Sn){var wn=this.line(En),hn=ut(wn,2),yn=hn[0],an=hn[1],un=this.line(En+Sn),bn=ut(un,1),pn=bn[0];if(ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"deleteAt",this).call(this,En,Sn),pn!=null&&yn!==pn&&an>0){if(yn instanceof Rt.BlockEmbed||pn instanceof Rt.BlockEmbed){this.optimize();return}if(yn instanceof Bt.default){var kn=yn.newlineIndex(yn.length(),!0);if(kn>-1&&(yn=yn.split(kn+1),yn===pn)){this.optimize();return}}else if(pn instanceof Bt.default){var _n=pn.newlineIndex(0);_n>-1&&pn.split(_n+1)}var Rn=pn.children.head instanceof zt.default?null:pn.children.head;yn.moveChildren(pn,Rn),yn.remove()}this.optimize()}},{key:"enable",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",En)}},{key:"formatAt",value:function(En,Sn,wn,hn){this.whitelist!=null&&!this.whitelist[wn]||(ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"formatAt",this).call(this,En,Sn,wn,hn),this.optimize())}},{key:"insertAt",value:function(En,Sn,wn){if(!(wn!=null&&this.whitelist!=null&&!this.whitelist[Sn])){if(En>=this.length())if(wn==null||kt.default.query(Sn,kt.default.Scope.BLOCK)==null){var hn=kt.default.create(this.statics.defaultChild);this.appendChild(hn),wn==null&&Sn.endsWith(`
`)&&(Sn=Sn.slice(0,-1)),hn.insertAt(0,Sn,wn)}else{var yn=kt.default.create(Sn,wn);this.appendChild(yn)}else ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"insertAt",this).call(this,En,Sn,wn);this.optimize()}}},{key:"insertBefore",value:function(En,Sn){if(En.statics.scope===kt.default.Scope.INLINE_BLOT){var wn=kt.default.create(this.statics.defaultChild);wn.appendChild(En),En=wn}ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"insertBefore",this).call(this,En,Sn)}},{key:"leaf",value:function(En){return this.path(En).pop()||[null,-1]}},{key:"line",value:function(En){return En===this.length()?this.line(En-1):this.descendant(on,En)}},{key:"lines",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,wn=function hn(yn,an,un){var bn=[],pn=un;return yn.children.forEachAt(an,un,function(kn,_n,Rn){on(kn)?bn.push(kn):kn instanceof kt.default.Container&&(bn=bn.concat(hn(kn,_n,pn))),pn-=Rn}),bn};return wn(this,En,Sn)}},{key:"optimize",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"optimize",this).call(this,En,Sn),En.length>0&&this.emitter.emit(jt.default.events.SCROLL_OPTIMIZE,En,Sn))}},{key:"path",value:function(En){return ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"path",this).call(this,En).slice(1)}},{key:"update",value:function(En){if(this.batch!==!0){var Sn=jt.default.sources.USER;typeof En=="string"&&(Sn=En),Array.isArray(En)||(En=this.observer.takeRecords()),En.length>0&&this.emitter.emit(jt.default.events.SCROLL_BEFORE_UPDATE,Sn,En),ft(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"update",this).call(this,En.concat([])),En.length>0&&this.emitter.emit(jt.default.events.SCROLL_UPDATE,Sn,En)}}}]),fn}(kt.default.Scroll);dn.blotName="scroll",dn.className="ql-editor",dn.tagName="DIV",dn.defaultChild="block",dn.allowedChildren=[Ft.default,Rt.BlockEmbed,Jt.default],ot.default=dn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SHORTKEY=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Cn){return typeof Cn}:function(Cn){return Cn&&typeof Symbol=="function"&&Cn.constructor===Symbol&&Cn!==Symbol.prototype?"symbol":typeof Cn},dt=function(){function Cn(Mn,In){var On=[],jn=!0,Gn=!1,Jn=void 0;try{for(var Un=Mn[Symbol.iterator](),Hn;!(jn=(Hn=Un.next()).done)&&(On.push(Hn.value),!(In&&On.length===In));jn=!0);}catch(ir){Gn=!0,Jn=ir}finally{try{!jn&&Un.return&&Un.return()}finally{if(Gn)throw Jn}}return On}return function(Mn,In){if(Array.isArray(Mn))return Mn;if(Symbol.iterator in Object(Mn))return Cn(Mn,In);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Cn(Mn,In){for(var On=0;On<In.length;On++){var jn=In[On];jn.enumerable=jn.enumerable||!1,jn.configurable=!0,"value"in jn&&(jn.writable=!0),Object.defineProperty(Mn,jn.key,jn)}}return function(Mn,In,On){return In&&Cn(Mn.prototype,In),On&&Cn(Mn,On),Mn}}(),St=ct(21),kt=cn(St),Tt=ct(11),jt=cn(Tt),Rt=ct(3),Ft=cn(Rt),$t=ct(2),zt=cn($t),Kt=ct(20),Bt=cn(Kt),Ut=ct(0),Jt=cn(Ut),en=ct(5),tn=cn(en),nn=ct(10),rn=cn(nn),on=ct(9),dn=cn(on);function cn(Cn){return Cn&&Cn.__esModule?Cn:{default:Cn}}function fn(Cn,Mn,In){return Mn in Cn?Object.defineProperty(Cn,Mn,{value:In,enumerable:!0,configurable:!0,writable:!0}):Cn[Mn]=In,Cn}function mn(Cn,Mn){if(!(Cn instanceof Mn))throw new TypeError("Cannot call a class as a function")}function En(Cn,Mn){if(!Cn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mn&&(typeof Mn=="object"||typeof Mn=="function")?Mn:Cn}function Sn(Cn,Mn){if(typeof Mn!="function"&&Mn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Mn);Cn.prototype=Object.create(Mn&&Mn.prototype,{constructor:{value:Cn,enumerable:!1,writable:!0,configurable:!0}}),Mn&&(Object.setPrototypeOf?Object.setPrototypeOf(Cn,Mn):Cn.__proto__=Mn)}var wn=(0,rn.default)("quill:keyboard"),hn=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",yn=function(Cn){Sn(Mn,Cn),ft(Mn,null,[{key:"match",value:function(On,jn){return jn=Nn(jn),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Gn){return!!jn[Gn]!==On[Gn]&&jn[Gn]!==null})?!1:jn.key===(On.which||On.keyCode)}}]);function Mn(In,On){mn(this,Mn);var jn=En(this,(Mn.__proto__||Object.getPrototypeOf(Mn)).call(this,In,On));return jn.bindings={},Object.keys(jn.options.bindings).forEach(function(Gn){Gn==="list autofill"&&In.scroll.whitelist!=null&&!In.scroll.whitelist.list||jn.options.bindings[Gn]&&jn.addBinding(jn.options.bindings[Gn])}),jn.addBinding({key:Mn.keys.ENTER,shiftKey:null},kn),jn.addBinding({key:Mn.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(jn.addBinding({key:Mn.keys.BACKSPACE},{collapsed:!0},un),jn.addBinding({key:Mn.keys.DELETE},{collapsed:!0},bn)):(jn.addBinding({key:Mn.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},un),jn.addBinding({key:Mn.keys.DELETE},{collapsed:!0,suffix:/^.?$/},bn)),jn.addBinding({key:Mn.keys.BACKSPACE},{collapsed:!1},pn),jn.addBinding({key:Mn.keys.DELETE},{collapsed:!1},pn),jn.addBinding({key:Mn.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},un),jn.listen(),jn}return ft(Mn,[{key:"addBinding",value:function(On){var jn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Jn=Nn(On);if(Jn==null||Jn.key==null)return wn.warn("Attempted to add invalid keyboard binding",Jn);typeof jn=="function"&&(jn={handler:jn}),typeof Gn=="function"&&(Gn={handler:Gn}),Jn=(0,Ft.default)(Jn,jn,Gn),this.bindings[Jn.key]=this.bindings[Jn.key]||[],this.bindings[Jn.key].push(Jn)}},{key:"listen",value:function(){var On=this;this.quill.root.addEventListener("keydown",function(jn){if(!jn.defaultPrevented){var Gn=jn.which||jn.keyCode,Jn=(On.bindings[Gn]||[]).filter(function(Tr){return Mn.match(jn,Tr)});if(Jn.length!==0){var Un=On.quill.getSelection();if(!(Un==null||!On.quill.hasFocus())){var Hn=On.quill.getLine(Un.index),ir=dt(Hn,2),ur=ir[0],yr=ir[1],Bn=On.quill.getLeaf(Un.index),zn=dt(Bn,2),Kn=zn[0],Yn=zn[1],Wn=Un.length===0?[Kn,Yn]:On.quill.getLeaf(Un.index+Un.length),lr=dt(Wn,2),or=lr[0],cr=lr[1],Cr=Kn instanceof Jt.default.Text?Kn.value().slice(0,Yn):"",Rr=or instanceof Jt.default.Text?or.value().slice(cr):"",br={collapsed:Un.length===0,empty:Un.length===0&&ur.length()<=1,format:On.quill.getFormat(Un),offset:yr,prefix:Cr,suffix:Rr},Ts=Jn.some(function(Tr){if(Tr.collapsed!=null&&Tr.collapsed!==br.collapsed||Tr.empty!=null&&Tr.empty!==br.empty||Tr.offset!=null&&Tr.offset!==br.offset)return!1;if(Array.isArray(Tr.format)){if(Tr.format.every(function(Wl){return br.format[Wl]==null}))return!1}else if(ut(Tr.format)==="object"&&!Object.keys(Tr.format).every(function(Wl){return Tr.format[Wl]===!0?br.format[Wl]!=null:Tr.format[Wl]===!1?br.format[Wl]==null:(0,jt.default)(Tr.format[Wl],br.format[Wl])}))return!1;return Tr.prefix!=null&&!Tr.prefix.test(br.prefix)||Tr.suffix!=null&&!Tr.suffix.test(br.suffix)?!1:Tr.handler.call(On,Un,br)!==!0});Ts&&jn.preventDefault()}}}})}}]),Mn}(dn.default);yn.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},yn.DEFAULTS={bindings:{bold:Rn("bold"),italic:Rn("italic"),underline:Rn("underline"),indent:{key:yn.keys.TAB,format:["blockquote","indent","list"],handler:function(Mn,In){if(In.collapsed&&In.offset!==0)return!0;this.quill.format("indent","+1",tn.default.sources.USER)}},outdent:{key:yn.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Mn,In){if(In.collapsed&&In.offset!==0)return!0;this.quill.format("indent","-1",tn.default.sources.USER)}},"outdent backspace":{key:yn.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Mn,In){In.format.indent!=null?this.quill.format("indent","-1",tn.default.sources.USER):In.format.list!=null&&this.quill.format("list",!1,tn.default.sources.USER)}},"indent code-block":_n(!0),"outdent code-block":_n(!1),"remove tab":{key:yn.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Mn){this.quill.deleteText(Mn.index-1,1,tn.default.sources.USER)}},tab:{key:yn.keys.TAB,handler:function(Mn){this.quill.history.cutoff();var In=new zt.default().retain(Mn.index).delete(Mn.length).insert("	");this.quill.updateContents(In,tn.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Mn.index+1,tn.default.sources.SILENT)}},"list empty enter":{key:yn.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Mn,In){this.quill.format("list",!1,tn.default.sources.USER),In.format.indent&&this.quill.format("indent",!1,tn.default.sources.USER)}},"checklist enter":{key:yn.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Mn){var In=this.quill.getLine(Mn.index),On=dt(In,2),jn=On[0],Gn=On[1],Jn=(0,Ft.default)({},jn.formats(),{list:"checked"}),Un=new zt.default().retain(Mn.index).insert(`
`,Jn).retain(jn.length()-Gn-1).retain(1,{list:"unchecked"});this.quill.updateContents(Un,tn.default.sources.USER),this.quill.setSelection(Mn.index+1,tn.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:yn.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Mn,In){var On=this.quill.getLine(Mn.index),jn=dt(On,2),Gn=jn[0],Jn=jn[1],Un=new zt.default().retain(Mn.index).insert(`
`,In.format).retain(Gn.length()-Jn-1).retain(1,{header:null});this.quill.updateContents(Un,tn.default.sources.USER),this.quill.setSelection(Mn.index+1,tn.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Mn,In){var On=In.prefix.length,jn=this.quill.getLine(Mn.index),Gn=dt(jn,2),Jn=Gn[0],Un=Gn[1];if(Un>On)return!0;var Hn=void 0;switch(In.prefix.trim()){case"[]":case"[ ]":Hn="unchecked";break;case"[x]":Hn="checked";break;case"-":case"*":Hn="bullet";break;default:Hn="ordered"}this.quill.insertText(Mn.index," ",tn.default.sources.USER),this.quill.history.cutoff();var ir=new zt.default().retain(Mn.index-Un).delete(On+1).retain(Jn.length()-2-Un).retain(1,{list:Hn});this.quill.updateContents(ir,tn.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Mn.index-On,tn.default.sources.SILENT)}},"code exit":{key:yn.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Mn){var In=this.quill.getLine(Mn.index),On=dt(In,2),jn=On[0],Gn=On[1],Jn=new zt.default().retain(Mn.index+jn.length()-Gn-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Jn,tn.default.sources.USER)}},"embed left":an(yn.keys.LEFT,!1),"embed left shift":an(yn.keys.LEFT,!0),"embed right":an(yn.keys.RIGHT,!1),"embed right shift":an(yn.keys.RIGHT,!0)}};function an(Cn,Mn){var In,On=Cn===yn.keys.LEFT?"prefix":"suffix";return In={key:Cn,shiftKey:Mn,altKey:null},fn(In,On,/^$/),fn(In,"handler",function(Gn){var Jn=Gn.index;Cn===yn.keys.RIGHT&&(Jn+=Gn.length+1);var Un=this.quill.getLeaf(Jn),Hn=dt(Un,1),ir=Hn[0];return ir instanceof Jt.default.Embed?(Cn===yn.keys.LEFT?Mn?this.quill.setSelection(Gn.index-1,Gn.length+1,tn.default.sources.USER):this.quill.setSelection(Gn.index-1,tn.default.sources.USER):Mn?this.quill.setSelection(Gn.index,Gn.length+1,tn.default.sources.USER):this.quill.setSelection(Gn.index+Gn.length+1,tn.default.sources.USER),!1):!0}),In}function un(Cn,Mn){if(!(Cn.index===0||this.quill.getLength()<=1)){var In=this.quill.getLine(Cn.index),On=dt(In,1),jn=On[0],Gn={};if(Mn.offset===0){var Jn=this.quill.getLine(Cn.index-1),Un=dt(Jn,1),Hn=Un[0];if(Hn!=null&&Hn.length()>1){var ir=jn.formats(),ur=this.quill.getFormat(Cn.index-1,1);Gn=Bt.default.attributes.diff(ir,ur)||{}}}var yr=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Mn.prefix)?2:1;this.quill.deleteText(Cn.index-yr,yr,tn.default.sources.USER),Object.keys(Gn).length>0&&this.quill.formatLine(Cn.index-yr,yr,Gn,tn.default.sources.USER),this.quill.focus()}}function bn(Cn,Mn){var In=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Mn.suffix)?2:1;if(!(Cn.index>=this.quill.getLength()-In)){var On={},jn=0,Gn=this.quill.getLine(Cn.index),Jn=dt(Gn,1),Un=Jn[0];if(Mn.offset>=Un.length()-1){var Hn=this.quill.getLine(Cn.index+1),ir=dt(Hn,1),ur=ir[0];if(ur){var yr=Un.formats(),Bn=this.quill.getFormat(Cn.index,1);On=Bt.default.attributes.diff(yr,Bn)||{},jn=ur.length()}}this.quill.deleteText(Cn.index,In,tn.default.sources.USER),Object.keys(On).length>0&&this.quill.formatLine(Cn.index+jn-1,In,On,tn.default.sources.USER)}}function pn(Cn){var Mn=this.quill.getLines(Cn),In={};if(Mn.length>1){var On=Mn[0].formats(),jn=Mn[Mn.length-1].formats();In=Bt.default.attributes.diff(jn,On)||{}}this.quill.deleteText(Cn,tn.default.sources.USER),Object.keys(In).length>0&&this.quill.formatLine(Cn.index,1,In,tn.default.sources.USER),this.quill.setSelection(Cn.index,tn.default.sources.SILENT),this.quill.focus()}function kn(Cn,Mn){var In=this;Cn.length>0&&this.quill.scroll.deleteAt(Cn.index,Cn.length);var On=Object.keys(Mn.format).reduce(function(jn,Gn){return Jt.default.query(Gn,Jt.default.Scope.BLOCK)&&!Array.isArray(Mn.format[Gn])&&(jn[Gn]=Mn.format[Gn]),jn},{});this.quill.insertText(Cn.index,`
`,On,tn.default.sources.USER),this.quill.setSelection(Cn.index+1,tn.default.sources.SILENT),this.quill.focus(),Object.keys(Mn.format).forEach(function(jn){On[jn]==null&&(Array.isArray(Mn.format[jn])||jn!=="link"&&In.quill.format(jn,Mn.format[jn],tn.default.sources.USER))})}function _n(Cn){return{key:yn.keys.TAB,shiftKey:!Cn,format:{"code-block":!0},handler:function(In){var On=Jt.default.query("code-block"),jn=In.index,Gn=In.length,Jn=this.quill.scroll.descendant(On,jn),Un=dt(Jn,2),Hn=Un[0],ir=Un[1];if(Hn!=null){var ur=this.quill.getIndex(Hn),yr=Hn.newlineIndex(ir,!0)+1,Bn=Hn.newlineIndex(ur+ir+Gn),zn=Hn.domNode.textContent.slice(yr,Bn).split(`
`);ir=0,zn.forEach(function(Kn,Yn){Cn?(Hn.insertAt(yr+ir,On.TAB),ir+=On.TAB.length,Yn===0?jn+=On.TAB.length:Gn+=On.TAB.length):Kn.startsWith(On.TAB)&&(Hn.deleteAt(yr+ir,On.TAB.length),ir-=On.TAB.length,Yn===0?jn-=On.TAB.length:Gn-=On.TAB.length),ir+=Kn.length+1}),this.quill.update(tn.default.sources.USER),this.quill.setSelection(jn,Gn,tn.default.sources.SILENT)}}}}function Rn(Cn){return{key:Cn[0].toUpperCase(),shortKey:!0,handler:function(In,On){this.quill.format(Cn,!On.format[Cn],tn.default.sources.USER)}}}function Nn(Cn){if(typeof Cn=="string"||typeof Cn=="number")return Nn({key:Cn});if((typeof Cn>"u"?"undefined":ut(Cn))==="object"&&(Cn=(0,kt.default)(Cn,!1)),typeof Cn.key=="string")if(yn.keys[Cn.key.toUpperCase()]!=null)Cn.key=yn.keys[Cn.key.toUpperCase()];else if(Cn.key.length===1)Cn.key=Cn.key.toUpperCase().charCodeAt(0);else return null;return Cn.shortKey&&(Cn[hn]=Cn.shortKey,delete Cn.shortKey),Cn}ot.default=yn,ot.SHORTKEY=hn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ut,Jt){var en=[],tn=!0,nn=!1,rn=void 0;try{for(var on=Ut[Symbol.iterator](),dn;!(tn=(dn=on.next()).done)&&(en.push(dn.value),!(Jt&&en.length===Jt));tn=!0);}catch(cn){nn=!0,rn=cn}finally{try{!tn&&on.return&&on.return()}finally{if(nn)throw rn}}return en}return function(Ut,Jt){if(Array.isArray(Ut))return Ut;if(Symbol.iterator in Object(Ut))return Bt(Ut,Jt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function Bt(Ut,Jt,en){Ut===null&&(Ut=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ut,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ut);return nn===null?void 0:Bt(nn,Jt,en)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(en)}},ft=function(){function Bt(Ut,Jt){for(var en=0;en<Jt.length;en++){var tn=Jt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ut,tn.key,tn)}}return function(Ut,Jt,en){return Jt&&Bt(Ut.prototype,Jt),en&&Bt(Ut,en),Ut}}(),St=ct(0),kt=Rt(St),Tt=ct(7),jt=Rt(Tt);function Rt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Ft(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function $t(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function zt(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var Kt=function(Bt){zt(Ut,Bt),ft(Ut,null,[{key:"value",value:function(){}}]);function Ut(Jt,en){Ft(this,Ut);var tn=$t(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,Jt));return tn.selection=en,tn.textNode=document.createTextNode(Ut.CONTENTS),tn.domNode.appendChild(tn.textNode),tn._length=0,tn}return ft(Ut,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(en,tn){if(this._length!==0)return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"format",this).call(this,en,tn);for(var nn=this,rn=0;nn!=null&&nn.statics.scope!==kt.default.Scope.BLOCK_BLOT;)rn+=nn.offset(nn.parent),nn=nn.parent;nn!=null&&(this._length=Ut.CONTENTS.length,nn.optimize(),nn.formatAt(rn,Ut.CONTENTS.length,en,tn),this._length=0)}},{key:"index",value:function(en,tn){return en===this.textNode?0:dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"index",this).call(this,en,tn)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var en=this.textNode,tn=this.selection.getNativeRange(),nn=void 0,rn=void 0,on=void 0;if(tn!=null&&tn.start.node===en&&tn.end.node===en){var dn=[en,tn.start.offset,tn.end.offset];nn=dn[0],rn=dn[1],on=dn[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Ut.CONTENTS){var cn=this.textNode.data.split(Ut.CONTENTS).join("");this.next instanceof jt.default?(nn=this.next.domNode,this.next.insertAt(0,cn),this.textNode.data=Ut.CONTENTS):(this.textNode.data=cn,this.parent.insertBefore(kt.default.create(this.textNode),this),this.textNode=document.createTextNode(Ut.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),rn!=null){var fn=[rn,on].map(function(En){return Math.max(0,Math.min(nn.data.length,En-1))}),mn=ut(fn,2);return rn=mn[0],on=mn[1],{startNode:nn,startOffset:rn,endNode:nn,endOffset:on}}}}},{key:"update",value:function(en,tn){var nn=this;if(en.some(function(on){return on.type==="characterData"&&on.target===nn.textNode})){var rn=this.restore();rn&&(tn.range=rn)}}},{key:"value",value:function(){return""}}]),Ut}(kt.default.Embed);Kt.blotName="cursor",Kt.className="ql-cursor",Kt.tagName="span",Kt.CONTENTS="\uFEFF",ot.default=Kt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=kt(ut),ft=ct(4),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(){return Tt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return zt}(dt.default.Container);Ft.allowedChildren=[St.default,ft.BlockEmbed,Ft],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.ColorStyle=ot.ColorClass=ot.ColorAttributor=void 0;var ut=function(){function Kt(Bt,Ut){for(var Jt=0;Jt<Ut.length;Jt++){var en=Ut[Jt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Bt,en.key,en)}}return function(Bt,Ut,Jt){return Ut&&Kt(Bt.prototype,Ut),Jt&&Kt(Bt,Jt),Bt}}(),dt=function Kt(Bt,Ut,Jt){Bt===null&&(Bt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Bt,Ut);if(en===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Kt(tn,Ut,Jt)}else{if("value"in en)return en.value;var nn=en.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(0),St=kt(ft);function kt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Tt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function jt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function Rt(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var Ft=function(Kt){Rt(Bt,Kt);function Bt(){return Tt(this,Bt),jt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"value",value:function(Jt){var en=dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"value",this).call(this,Jt);return en.startsWith("rgb(")?(en=en.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+en.split(",").map(function(tn){return("00"+parseInt(tn).toString(16)).slice(-2)}).join("")):en}}]),Bt}(St.default.Attributor.Style),$t=new St.default.Attributor.Class("color","ql-color",{scope:St.default.Scope.INLINE}),zt=new Ft("color","color",{scope:St.default.Scope.INLINE});ot.ColorAttributor=Ft,ot.ColorClass=$t,ot.ColorStyle=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.sanitize=ot.default=void 0;var ut=function(){function zt(Kt,Bt){for(var Ut=0;Ut<Bt.length;Ut++){var Jt=Bt[Ut];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}}return function(Kt,Bt,Ut){return Bt&&zt(Kt.prototype,Bt),Ut&&zt(Kt,Ut),Kt}}(),dt=function zt(Kt,Bt,Ut){Kt===null&&(Kt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Kt,Bt);if(Jt===void 0){var en=Object.getPrototypeOf(Kt);return en===null?void 0:zt(en,Bt,Ut)}else{if("value"in Jt)return Jt.value;var tn=Jt.get;return tn===void 0?void 0:tn.call(Ut)}},ft=ct(6),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Kt){if(!(zt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function jt(zt,Kt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:zt}function Rt(zt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);zt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Kt):zt.__proto__=Kt)}var Ft=function(zt){Rt(Kt,zt);function Kt(){return Tt(this,Kt),jt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ut(Kt,[{key:"format",value:function(Ut,Jt){if(Ut!==this.statics.blotName||!Jt)return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"format",this).call(this,Ut,Jt);Jt=this.constructor.sanitize(Jt),this.domNode.setAttribute("href",Jt)}}],[{key:"create",value:function(Ut){var Jt=dt(Kt.__proto__||Object.getPrototypeOf(Kt),"create",this).call(this,Ut);return Ut=this.sanitize(Ut),Jt.setAttribute("href",Ut),Jt.setAttribute("rel","noopener noreferrer"),Jt.setAttribute("target","_blank"),Jt}},{key:"formats",value:function(Ut){return Ut.getAttribute("href")}},{key:"sanitize",value:function(Ut){return $t(Ut,this.PROTOCOL_WHITELIST)?Ut:this.SANITIZED_URL}}]),Kt}(St.default);Ft.blotName="link",Ft.tagName="A",Ft.SANITIZED_URL="about:blank",Ft.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function $t(zt,Kt){var Bt=document.createElement("a");Bt.href=zt;var Ut=Bt.href.slice(0,Bt.href.indexOf(":"));return Kt.indexOf(Ut)>-1}ot.default=Ft,ot.sanitize=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt},dt=function(){function Kt(Bt,Ut){for(var Jt=0;Jt<Ut.length;Jt++){var en=Ut[Jt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Bt,en.key,en)}}return function(Bt,Ut,Jt){return Ut&&Kt(Bt.prototype,Ut),Jt&&Kt(Bt,Jt),Bt}}(),ft=ct(23),St=jt(ft),kt=ct(107),Tt=jt(kt);function jt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Rt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}var Ft=0;function $t(Kt,Bt){Kt.setAttribute(Bt,Kt.getAttribute(Bt)!=="true")}var zt=function(){function Kt(Bt){var Ut=this;Rt(this,Kt),this.select=Bt,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Ut.togglePicker()}),this.label.addEventListener("keydown",function(Jt){switch(Jt.keyCode){case St.default.keys.ENTER:Ut.togglePicker();break;case St.default.keys.ESCAPE:Ut.escape(),Jt.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return dt(Kt,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),$t(this.label,"aria-expanded"),$t(this.options,"aria-hidden")}},{key:"buildItem",value:function(Ut){var Jt=this,en=document.createElement("span");return en.tabIndex="0",en.setAttribute("role","button"),en.classList.add("ql-picker-item"),Ut.hasAttribute("value")&&en.setAttribute("data-value",Ut.getAttribute("value")),Ut.textContent&&en.setAttribute("data-label",Ut.textContent),en.addEventListener("click",function(){Jt.selectItem(en,!0)}),en.addEventListener("keydown",function(tn){switch(tn.keyCode){case St.default.keys.ENTER:Jt.selectItem(en,!0),tn.preventDefault();break;case St.default.keys.ESCAPE:Jt.escape(),tn.preventDefault();break}}),en}},{key:"buildLabel",value:function(){var Ut=document.createElement("span");return Ut.classList.add("ql-picker-label"),Ut.innerHTML=Tt.default,Ut.tabIndex="0",Ut.setAttribute("role","button"),Ut.setAttribute("aria-expanded","false"),this.container.appendChild(Ut),Ut}},{key:"buildOptions",value:function(){var Ut=this,Jt=document.createElement("span");Jt.classList.add("ql-picker-options"),Jt.setAttribute("aria-hidden","true"),Jt.tabIndex="-1",Jt.id="ql-picker-options-"+Ft,Ft+=1,this.label.setAttribute("aria-controls",Jt.id),this.options=Jt,[].slice.call(this.select.options).forEach(function(en){var tn=Ut.buildItem(en);Jt.appendChild(tn),en.selected===!0&&Ut.selectItem(tn)}),this.container.appendChild(Jt)}},{key:"buildPicker",value:function(){var Ut=this;[].slice.call(this.select.attributes).forEach(function(Jt){Ut.container.setAttribute(Jt.name,Jt.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Ut=this;this.close(),setTimeout(function(){return Ut.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Ut){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,en=this.container.querySelector(".ql-selected");if(Ut!==en&&(en!=null&&en.classList.remove("ql-selected"),Ut!=null&&(Ut.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Ut.parentNode.children,Ut),Ut.hasAttribute("data-value")?this.label.setAttribute("data-value",Ut.getAttribute("data-value")):this.label.removeAttribute("data-value"),Ut.hasAttribute("data-label")?this.label.setAttribute("data-label",Ut.getAttribute("data-label")):this.label.removeAttribute("data-label"),Jt))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ut(Event))==="object"){var tn=document.createEvent("Event");tn.initEvent("change",!0,!0),this.select.dispatchEvent(tn)}this.close()}}},{key:"update",value:function(){var Ut=void 0;if(this.select.selectedIndex>-1){var Jt=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Ut=this.select.options[this.select.selectedIndex],this.selectItem(Jt)}else this.selectItem(null);var en=Ut!=null&&Ut!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",en)}}]),Kt}();ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=wn(ut),ft=ct(5),St=wn(ft),kt=ct(4),Tt=wn(kt),jt=ct(16),Rt=wn(jt),Ft=ct(25),$t=wn(Ft),zt=ct(24),Kt=wn(zt),Bt=ct(35),Ut=wn(Bt),Jt=ct(6),en=wn(Jt),tn=ct(22),nn=wn(tn),rn=ct(7),on=wn(rn),dn=ct(55),cn=wn(dn),fn=ct(42),mn=wn(fn),En=ct(23),Sn=wn(En);function wn(hn){return hn&&hn.__esModule?hn:{default:hn}}St.default.register({"blots/block":Tt.default,"blots/block/embed":kt.BlockEmbed,"blots/break":Rt.default,"blots/container":$t.default,"blots/cursor":Kt.default,"blots/embed":Ut.default,"blots/inline":en.default,"blots/scroll":nn.default,"blots/text":on.default,"modules/clipboard":cn.default,"modules/history":mn.default,"modules/keyboard":Sn.default}),dt.default.register(Tt.default,Rt.default,Kt.default,en.default,nn.default,on.default),ot.default=St.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St){this.domNode=St,this.domNode[ut.DATA_KEY]={blot:this}}return Object.defineProperty(ft.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ft.create=function(St){if(this.tagName==null)throw new ut.ParchmentError("Blot definition missing tagName");var kt;return Array.isArray(this.tagName)?(typeof St=="string"&&(St=St.toUpperCase(),parseInt(St).toString()===St&&(St=parseInt(St))),typeof St=="number"?kt=document.createElement(this.tagName[St-1]):this.tagName.indexOf(St)>-1?kt=document.createElement(St):kt=document.createElement(this.tagName[0])):kt=document.createElement(this.tagName),this.className&&kt.classList.add(this.className),kt},ft.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},ft.prototype.clone=function(){var St=this.domNode.cloneNode(!1);return ut.create(St)},ft.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ut.DATA_KEY]},ft.prototype.deleteAt=function(St,kt){var Tt=this.isolate(St,kt);Tt.remove()},ft.prototype.formatAt=function(St,kt,Tt,jt){var Rt=this.isolate(St,kt);if(ut.query(Tt,ut.Scope.BLOT)!=null&&jt)Rt.wrap(Tt,jt);else if(ut.query(Tt,ut.Scope.ATTRIBUTE)!=null){var Ft=ut.create(this.statics.scope);Rt.wrap(Ft),Ft.format(Tt,jt)}},ft.prototype.insertAt=function(St,kt,Tt){var jt=Tt==null?ut.create("text",kt):ut.create(kt,Tt),Rt=this.split(St);this.parent.insertBefore(jt,Rt)},ft.prototype.insertInto=function(St,kt){kt===void 0&&(kt=null),this.parent!=null&&this.parent.children.remove(this);var Tt=null;St.children.insertBefore(this,kt),kt!=null&&(Tt=kt.domNode),(this.domNode.parentNode!=St.domNode||this.domNode.nextSibling!=Tt)&&St.domNode.insertBefore(this.domNode,Tt),this.parent=St,this.attach()},ft.prototype.isolate=function(St,kt){var Tt=this.split(St);return Tt.split(kt),Tt},ft.prototype.length=function(){return 1},ft.prototype.offset=function(St){return St===void 0&&(St=this.parent),this.parent==null||this==St?0:this.parent.children.offset(this)+this.parent.offset(St)},ft.prototype.optimize=function(St){this.domNode[ut.DATA_KEY]!=null&&delete this.domNode[ut.DATA_KEY].mutations},ft.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ft.prototype.replace=function(St){St.parent!=null&&(St.parent.insertBefore(this,St.next),St.remove())},ft.prototype.replaceWith=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return Tt.replace(this),Tt},ft.prototype.split=function(St,kt){return St===0?this:this.next},ft.prototype.update=function(St,kt){},ft.prototype.wrap=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return this.parent!=null&&this.parent.insertBefore(Tt,this.next),Tt.appendChild(this),Tt},ft.blotName="abstract",ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(12),dt=ct(32),ft=ct(33),St=ct(1),kt=function(){function Tt(jt){this.attributes={},this.domNode=jt,this.build()}return Tt.prototype.attribute=function(jt,Rt){Rt?jt.add(this.domNode,Rt)&&(jt.value(this.domNode)!=null?this.attributes[jt.attrName]=jt:delete this.attributes[jt.attrName]):(jt.remove(this.domNode),delete this.attributes[jt.attrName])},Tt.prototype.build=function(){var jt=this;this.attributes={};var Rt=ut.default.keys(this.domNode),Ft=dt.default.keys(this.domNode),$t=ft.default.keys(this.domNode);Rt.concat(Ft).concat($t).forEach(function(zt){var Kt=St.query(zt,St.Scope.ATTRIBUTE);Kt instanceof ut.default&&(jt.attributes[Kt.attrName]=Kt)})},Tt.prototype.copy=function(jt){var Rt=this;Object.keys(this.attributes).forEach(function(Ft){var $t=Rt.attributes[Ft].value(Rt.domNode);jt.format(Ft,$t)})},Tt.prototype.move=function(jt){var Rt=this;this.copy(jt),Object.keys(this.attributes).forEach(function(Ft){Rt.attributes[Ft].remove(Rt.domNode)}),this.attributes={}},Tt.prototype.values=function(){var jt=this;return Object.keys(this.attributes).reduce(function(Rt,Ft){return Rt[Ft]=jt.attributes[Ft].value(jt.domNode),Rt},{})},Tt}();ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,jt){Tt.__proto__=jt}||function(Tt,jt){for(var Rt in jt)jt.hasOwnProperty(Rt)&&(Tt[Rt]=jt[Rt])};return function(Tt,jt){kt(Tt,jt);function Rt(){this.constructor=Tt}Tt.prototype=jt===null?Object.create(jt):(Rt.prototype=jt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt,Tt){var jt=kt.getAttribute("class")||"";return jt.split(/\s+/).filter(function(Rt){return Rt.indexOf(Tt+"-")===0})}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(jt){return(jt.getAttribute("class")||"").split(/\s+/).map(function(Rt){return Rt.split("-").slice(0,-1).join("-")})},Tt.prototype.add=function(jt,Rt){return this.canAdd(jt,Rt)?(this.remove(jt),jt.classList.add(this.keyName+"-"+Rt),!0):!1},Tt.prototype.remove=function(jt){var Rt=ft(jt,this.keyName);Rt.forEach(function(Ft){jt.classList.remove(Ft)}),jt.classList.length===0&&jt.removeAttribute("class")},Tt.prototype.value=function(jt){var Rt=ft(jt,this.keyName)[0]||"",Ft=Rt.slice(this.keyName.length+1);return this.canAdd(jt,Ft)?Ft:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,jt){Tt.__proto__=jt}||function(Tt,jt){for(var Rt in jt)jt.hasOwnProperty(Rt)&&(Tt[Rt]=jt[Rt])};return function(Tt,jt){kt(Tt,jt);function Rt(){this.constructor=Tt}Tt.prototype=jt===null?Object.create(jt):(Rt.prototype=jt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt){var Tt=kt.split("-"),jt=Tt.slice(1).map(function(Rt){return Rt[0].toUpperCase()+Rt.slice(1)}).join("");return Tt[0]+jt}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(jt){return(jt.getAttribute("style")||"").split(";").map(function(Rt){var Ft=Rt.split(":");return Ft[0].trim()})},Tt.prototype.add=function(jt,Rt){return this.canAdd(jt,Rt)?(jt.style[ft(this.keyName)]=Rt,!0):!1},Tt.prototype.remove=function(jt){jt.style[ft(this.keyName)]="",jt.getAttribute("style")||jt.removeAttribute("style")},Tt.prototype.value=function(jt){var Rt=jt.style[ft(this.keyName)];return this.canAdd(jt,Rt)?Rt:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var jt=0;jt<Tt.length;jt++){var Rt=Tt[jt];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(kt,Rt.key,Rt)}}return function(kt,Tt,jt){return Tt&&St(kt.prototype,Tt),jt&&St(kt,jt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){dt(this,St),this.quill=kt,this.options=Tt,this.modules={}}return ut(St,[{key:"init",value:function(){var Tt=this;Object.keys(this.options.modules).forEach(function(jt){Tt.modules[jt]==null&&Tt.addModule(jt)})}},{key:"addModule",value:function(Tt){var jt=this.quill.constructor.import("modules/"+Tt);return this.modules[Tt]=new jt(this.quill,this.options.modules[Tt]||{}),this.modules[Tt]}}]),St}();ft.DEFAULTS={modules:{}},ft.themes={default:ft},ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ut,Jt){for(var en=0;en<Jt.length;en++){var tn=Jt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ut,tn.key,tn)}}return function(Ut,Jt,en){return Jt&&Bt(Ut.prototype,Jt),en&&Bt(Ut,en),Ut}}(),dt=function Bt(Ut,Jt,en){Ut===null&&(Ut=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ut,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ut);return nn===null?void 0:Bt(nn,Jt,en)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(en)}},ft=ct(0),St=jt(ft),kt=ct(7),Tt=jt(kt);function jt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Rt(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Ft(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function $t(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var zt="\uFEFF",Kt=function(Bt){$t(Ut,Bt);function Ut(Jt){Rt(this,Ut);var en=Ft(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,Jt));return en.contentNode=document.createElement("span"),en.contentNode.setAttribute("contenteditable",!1),[].slice.call(en.domNode.childNodes).forEach(function(tn){en.contentNode.appendChild(tn)}),en.leftGuard=document.createTextNode(zt),en.rightGuard=document.createTextNode(zt),en.domNode.appendChild(en.leftGuard),en.domNode.appendChild(en.contentNode),en.domNode.appendChild(en.rightGuard),en}return ut(Ut,[{key:"index",value:function(en,tn){return en===this.leftGuard?0:en===this.rightGuard?1:dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"index",this).call(this,en,tn)}},{key:"restore",value:function(en){var tn=void 0,nn=void 0,rn=en.data.split(zt).join("");if(en===this.leftGuard)if(this.prev instanceof Tt.default){var on=this.prev.length();this.prev.insertAt(on,rn),tn={startNode:this.prev.domNode,startOffset:on+rn.length}}else nn=document.createTextNode(rn),this.parent.insertBefore(St.default.create(nn),this),tn={startNode:nn,startOffset:rn.length};else en===this.rightGuard&&(this.next instanceof Tt.default?(this.next.insertAt(0,rn),tn={startNode:this.next.domNode,startOffset:rn.length}):(nn=document.createTextNode(rn),this.parent.insertBefore(St.default.create(nn),this.next),tn={startNode:nn,startOffset:rn.length}));return en.data=zt,tn}},{key:"update",value:function(en,tn){var nn=this;en.forEach(function(rn){if(rn.type==="characterData"&&(rn.target===nn.leftGuard||rn.target===nn.rightGuard)){var on=nn.restore(rn.target);on&&(tn.range=on)}})}}]),Ut}(St.default.Embed);ot.default=Kt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.AlignStyle=ot.AlignClass=ot.AlignAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["right","center","justify"]},kt=new dt.default.Attributor.Attribute("align","align",St),Tt=new dt.default.Attributor.Class("align","ql-align",St),jt=new dt.default.Attributor.Style("align","text-align",St);ot.AlignAttribute=kt,ot.AlignClass=Tt,ot.AlignStyle=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.BackgroundStyle=ot.BackgroundClass=void 0;var ut=ct(0),dt=St(ut),ft=ct(26);function St(jt){return jt&&jt.__esModule?jt:{default:jt}}var kt=new dt.default.Attributor.Class("background","ql-bg",{scope:dt.default.Scope.INLINE}),Tt=new ft.ColorAttributor("background","background-color",{scope:dt.default.Scope.INLINE});ot.BackgroundClass=kt,ot.BackgroundStyle=Tt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DirectionStyle=ot.DirectionClass=ot.DirectionAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["rtl"]},kt=new dt.default.Attributor.Attribute("direction","dir",St),Tt=new dt.default.Attributor.Class("direction","ql-direction",St),jt=new dt.default.Attributor.Style("direction","direction",St);ot.DirectionAttribute=kt,ot.DirectionClass=Tt,ot.DirectionStyle=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.FontClass=ot.FontStyle=void 0;var ut=function(){function Bt(Ut,Jt){for(var en=0;en<Jt.length;en++){var tn=Jt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ut,tn.key,tn)}}return function(Ut,Jt,en){return Jt&&Bt(Ut.prototype,Jt),en&&Bt(Ut,en),Ut}}(),dt=function Bt(Ut,Jt,en){Ut===null&&(Ut=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ut,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ut);return nn===null?void 0:Bt(nn,Jt,en)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(en)}},ft=ct(0),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function jt(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function Rt(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var Ft={scope:St.default.Scope.INLINE,whitelist:["serif","monospace"]},$t=new St.default.Attributor.Class("font","ql-font",Ft),zt=function(Bt){Rt(Ut,Bt);function Ut(){return Tt(this,Ut),jt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ut(Ut,[{key:"value",value:function(en){return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"value",this).call(this,en).replace(/["']/g,"")}}]),Ut}(St.default.Attributor.Style),Kt=new zt("font","font-family",Ft);ot.FontStyle=Kt,ot.FontClass=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SizeStyle=ot.SizeClass=void 0;var ut=ct(0),dt=ft(ut);function ft(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}}var St=new dt.default.Attributor.Class("size","ql-size",{scope:dt.default.Scope.INLINE,whitelist:["small","large","huge"]}),kt=new dt.default.Attributor.Style("size","font-size",{scope:dt.default.Scope.INLINE,whitelist:["10px","18px","32px"]});ot.SizeClass=St,ot.SizeStyle=kt},function(et,ot,ct){et.exports={align:{"":ct(76),center:ct(77),right:ct(78),justify:ct(79)},background:ct(80),blockquote:ct(81),bold:ct(82),clean:ct(83),code:ct(58),"code-block":ct(58),color:ct(84),direction:{"":ct(85),rtl:ct(86)},float:{center:ct(87),full:ct(88),left:ct(89),right:ct(90)},formula:ct(91),header:{1:ct(92),2:ct(93)},italic:ct(94),image:ct(95),indent:{"+1":ct(96),"-1":ct(97)},link:ct(98),list:{ordered:ct(99),bullet:ct(100),check:ct(101)},script:{sub:ct(102),super:ct(103)},strike:ct(104),underline:ct(105),video:ct(106)}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.getLastChangeIndex=ot.default=void 0;var ut=function(){function Jt(en,tn){for(var nn=0;nn<tn.length;nn++){var rn=tn[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(en,rn.key,rn)}}return function(en,tn,nn){return tn&&Jt(en.prototype,tn),nn&&Jt(en,nn),en}}(),dt=ct(0),ft=Rt(dt),St=ct(5),kt=Rt(St),Tt=ct(9),jt=Rt(Tt);function Rt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function Ft(Jt,en){if(!(Jt instanceof en))throw new TypeError("Cannot call a class as a function")}function $t(Jt,en){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&(typeof en=="object"||typeof en=="function")?en:Jt}function zt(Jt,en){if(typeof en!="function"&&en!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof en);Jt.prototype=Object.create(en&&en.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,en):Jt.__proto__=en)}var Kt=function(Jt){zt(en,Jt);function en(tn,nn){Ft(this,en);var rn=$t(this,(en.__proto__||Object.getPrototypeOf(en)).call(this,tn,nn));return rn.lastRecorded=0,rn.ignoreChange=!1,rn.clear(),rn.quill.on(kt.default.events.EDITOR_CHANGE,function(on,dn,cn,fn){on!==kt.default.events.TEXT_CHANGE||rn.ignoreChange||(!rn.options.userOnly||fn===kt.default.sources.USER?rn.record(dn,cn):rn.transform(dn))}),rn.quill.keyboard.addBinding({key:"Z",shortKey:!0},rn.undo.bind(rn)),rn.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},rn.redo.bind(rn)),/Win/i.test(navigator.platform)&&rn.quill.keyboard.addBinding({key:"Y",shortKey:!0},rn.redo.bind(rn)),rn}return ut(en,[{key:"change",value:function(nn,rn){if(this.stack[nn].length!==0){var on=this.stack[nn].pop();this.stack[rn].push(on),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(on[nn],kt.default.sources.USER),this.ignoreChange=!1;var dn=Ut(on[nn]);this.quill.setSelection(dn)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(nn,rn){if(nn.ops.length!==0){this.stack.redo=[];var on=this.quill.getContents().diff(rn),dn=Date.now();if(this.lastRecorded+this.options.delay>dn&&this.stack.undo.length>0){var cn=this.stack.undo.pop();on=on.compose(cn.undo),nn=cn.redo.compose(nn)}else this.lastRecorded=dn;this.stack.undo.push({redo:nn,undo:on}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(nn){this.stack.undo.forEach(function(rn){rn.undo=nn.transform(rn.undo,!0),rn.redo=nn.transform(rn.redo,!0)}),this.stack.redo.forEach(function(rn){rn.undo=nn.transform(rn.undo,!0),rn.redo=nn.transform(rn.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),en}(jt.default);Kt.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function Bt(Jt){var en=Jt.ops[Jt.ops.length-1];return en==null?!1:en.insert!=null?typeof en.insert=="string"&&en.insert.endsWith(`
`):en.attributes!=null?Object.keys(en.attributes).some(function(tn){return ft.default.query(tn,ft.default.Scope.BLOCK)!=null}):!1}function Ut(Jt){var en=Jt.reduce(function(nn,rn){return nn+=rn.delete||0,nn},0),tn=Jt.length()-en;return Bt(Jt)&&(tn-=1),tn}ot.default=Kt,ot.getLastChangeIndex=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BaseTooltip=void 0;var ut=function(){function kn(_n,Rn){for(var Nn=0;Nn<Rn.length;Nn++){var Cn=Rn[Nn];Cn.enumerable=Cn.enumerable||!1,Cn.configurable=!0,"value"in Cn&&(Cn.writable=!0),Object.defineProperty(_n,Cn.key,Cn)}}return function(_n,Rn,Nn){return Rn&&kn(_n.prototype,Rn),Nn&&kn(_n,Nn),_n}}(),dt=function kn(_n,Rn,Nn){_n===null&&(_n=Function.prototype);var Cn=Object.getOwnPropertyDescriptor(_n,Rn);if(Cn===void 0){var Mn=Object.getPrototypeOf(_n);return Mn===null?void 0:kn(Mn,Rn,Nn)}else{if("value"in Cn)return Cn.value;var In=Cn.get;return In===void 0?void 0:In.call(Nn)}},ft=ct(3),St=dn(ft),kt=ct(2),Tt=dn(kt),jt=ct(8),Rt=dn(jt),Ft=ct(23),$t=dn(Ft),zt=ct(34),Kt=dn(zt),Bt=ct(59),Ut=dn(Bt),Jt=ct(60),en=dn(Jt),tn=ct(28),nn=dn(tn),rn=ct(61),on=dn(rn);function dn(kn){return kn&&kn.__esModule?kn:{default:kn}}function cn(kn,_n){if(!(kn instanceof _n))throw new TypeError("Cannot call a class as a function")}function fn(kn,_n){if(!kn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _n&&(typeof _n=="object"||typeof _n=="function")?_n:kn}function mn(kn,_n){if(typeof _n!="function"&&_n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _n);kn.prototype=Object.create(_n&&_n.prototype,{constructor:{value:kn,enumerable:!1,writable:!0,configurable:!0}}),_n&&(Object.setPrototypeOf?Object.setPrototypeOf(kn,_n):kn.__proto__=_n)}var En=[!1,"center","right","justify"],Sn=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],wn=[!1,"serif","monospace"],hn=["1","2","3",!1],yn=["small",!1,"large","huge"],an=function(kn){mn(_n,kn);function _n(Rn,Nn){cn(this,_n);var Cn=fn(this,(_n.__proto__||Object.getPrototypeOf(_n)).call(this,Rn,Nn)),Mn=function In(On){if(!document.body.contains(Rn.root))return document.body.removeEventListener("click",In);Cn.tooltip!=null&&!Cn.tooltip.root.contains(On.target)&&document.activeElement!==Cn.tooltip.textbox&&!Cn.quill.hasFocus()&&Cn.tooltip.hide(),Cn.pickers!=null&&Cn.pickers.forEach(function(jn){jn.container.contains(On.target)||jn.close()})};return Rn.emitter.listenDOM("click",document.body,Mn),Cn}return ut(_n,[{key:"addModule",value:function(Nn){var Cn=dt(_n.prototype.__proto__||Object.getPrototypeOf(_n.prototype),"addModule",this).call(this,Nn);return Nn==="toolbar"&&this.extendToolbar(Cn),Cn}},{key:"buildButtons",value:function(Nn,Cn){Nn.forEach(function(Mn){var In=Mn.getAttribute("class")||"";In.split(/\s+/).forEach(function(On){if(On.startsWith("ql-")&&(On=On.slice(3),Cn[On]!=null))if(On==="direction")Mn.innerHTML=Cn[On][""]+Cn[On].rtl;else if(typeof Cn[On]=="string")Mn.innerHTML=Cn[On];else{var jn=Mn.value||"";jn!=null&&Cn[On][jn]&&(Mn.innerHTML=Cn[On][jn])}})})}},{key:"buildPickers",value:function(Nn,Cn){var Mn=this;this.pickers=Nn.map(function(On){if(On.classList.contains("ql-align"))return On.querySelector("option")==null&&pn(On,En),new en.default(On,Cn.align);if(On.classList.contains("ql-background")||On.classList.contains("ql-color")){var jn=On.classList.contains("ql-background")?"background":"color";return On.querySelector("option")==null&&pn(On,Sn,jn==="background"?"#ffffff":"#000000"),new Ut.default(On,Cn[jn])}else return On.querySelector("option")==null&&(On.classList.contains("ql-font")?pn(On,wn):On.classList.contains("ql-header")?pn(On,hn):On.classList.contains("ql-size")&&pn(On,yn)),new nn.default(On)});var In=function(){Mn.pickers.forEach(function(jn){jn.update()})};this.quill.on(Rt.default.events.EDITOR_CHANGE,In)}}]),_n}(Kt.default);an.DEFAULTS=(0,St.default)(!0,{},Kt.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var _n=this,Rn=this.container.querySelector("input.ql-image[type=file]");Rn==null&&(Rn=document.createElement("input"),Rn.setAttribute("type","file"),Rn.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Rn.classList.add("ql-image"),Rn.addEventListener("change",function(){if(Rn.files!=null&&Rn.files[0]!=null){var Nn=new FileReader;Nn.onload=function(Cn){var Mn=_n.quill.getSelection(!0);_n.quill.updateContents(new Tt.default().retain(Mn.index).delete(Mn.length).insert({image:Cn.target.result}),Rt.default.sources.USER),_n.quill.setSelection(Mn.index+1,Rt.default.sources.SILENT),Rn.value=""},Nn.readAsDataURL(Rn.files[0])}}),this.container.appendChild(Rn)),Rn.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var un=function(kn){mn(_n,kn);function _n(Rn,Nn){cn(this,_n);var Cn=fn(this,(_n.__proto__||Object.getPrototypeOf(_n)).call(this,Rn,Nn));return Cn.textbox=Cn.root.querySelector('input[type="text"]'),Cn.listen(),Cn}return ut(_n,[{key:"listen",value:function(){var Nn=this;this.textbox.addEventListener("keydown",function(Cn){$t.default.match(Cn,"enter")?(Nn.save(),Cn.preventDefault()):$t.default.match(Cn,"escape")&&(Nn.cancel(),Cn.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Nn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Cn!=null?this.textbox.value=Cn:Nn!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Nn)||""),this.root.setAttribute("data-mode",Nn)}},{key:"restoreFocus",value:function(){var Nn=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Nn}},{key:"save",value:function(){var Nn=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Cn=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Nn,Rt.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Nn,Rt.default.sources.USER)),this.quill.root.scrollTop=Cn;break}case"video":Nn=bn(Nn);case"formula":{if(!Nn)break;var Mn=this.quill.getSelection(!0);if(Mn!=null){var In=Mn.index+Mn.length;this.quill.insertEmbed(In,this.root.getAttribute("data-mode"),Nn,Rt.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(In+1," ",Rt.default.sources.USER),this.quill.setSelection(In+2,Rt.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),_n}(on.default);function bn(kn){var _n=kn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||kn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return _n?(_n[1]||"https")+"://www.youtube.com/embed/"+_n[2]+"?showinfo=0":(_n=kn.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(_n[1]||"https")+"://player.vimeo.com/video/"+_n[2]+"/":kn}function pn(kn,_n){var Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;_n.forEach(function(Nn){var Cn=document.createElement("option");Nn===Rn?Cn.setAttribute("selected","selected"):Cn.setAttribute("value",Nn),kn.appendChild(Cn)})}ot.BaseTooltip=un,ot.default=an},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function dt(){this.head=this.tail=null,this.length=0}return dt.prototype.append=function(){for(var ft=[],St=0;St<arguments.length;St++)ft[St]=arguments[St];this.insertBefore(ft[0],null),ft.length>1&&this.append.apply(this,ft.slice(1))},dt.prototype.contains=function(ft){for(var St,kt=this.iterator();St=kt();)if(St===ft)return!0;return!1},dt.prototype.insertBefore=function(ft,St){ft&&(ft.next=St,St!=null?(ft.prev=St.prev,St.prev!=null&&(St.prev.next=ft),St.prev=ft,St===this.head&&(this.head=ft)):this.tail!=null?(this.tail.next=ft,ft.prev=this.tail,this.tail=ft):(ft.prev=null,this.head=this.tail=ft),this.length+=1)},dt.prototype.offset=function(ft){for(var St=0,kt=this.head;kt!=null;){if(kt===ft)return St;St+=kt.length(),kt=kt.next}return-1},dt.prototype.remove=function(ft){this.contains(ft)&&(ft.prev!=null&&(ft.prev.next=ft.next),ft.next!=null&&(ft.next.prev=ft.prev),ft===this.head&&(this.head=ft.next),ft===this.tail&&(this.tail=ft.prev),this.length-=1)},dt.prototype.iterator=function(ft){return ft===void 0&&(ft=this.head),function(){var St=ft;return ft!=null&&(ft=ft.next),St}},dt.prototype.find=function(ft,St){St===void 0&&(St=!1);for(var kt,Tt=this.iterator();kt=Tt();){var jt=kt.length();if(ft<jt||St&&ft===jt&&(kt.next==null||kt.next.length()!==0))return[kt,ft];ft-=jt}return[null,0]},dt.prototype.forEach=function(ft){for(var St,kt=this.iterator();St=kt();)ft(St)},dt.prototype.forEachAt=function(ft,St,kt){if(!(St<=0))for(var Tt=this.find(ft),jt=Tt[0],Rt=Tt[1],Ft,$t=ft-Rt,zt=this.iterator(jt);(Ft=zt())&&$t<ft+St;){var Kt=Ft.length();ft>$t?kt(Ft,ft-$t,Math.min(St,$t+Kt-ft)):kt(Ft,0,Math.min(Kt,ft+St-$t)),$t+=Kt}},dt.prototype.map=function(ft){return this.reduce(function(St,kt){return St.push(ft(kt)),St},[])},dt.prototype.reduce=function(ft,St){for(var kt,Tt=this.iterator();kt=Tt();)St=ft(St,kt);return St},dt}();ot.default=ut},function(et,ot,ct){var ut=this&&this.__extends||function(){var jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Ft){Rt.__proto__=Ft}||function(Rt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(Rt[$t]=Ft[$t])};return function(Rt,Ft){jt(Rt,Ft);function $t(){this.constructor=Rt}Rt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(17),ft=ct(1),St={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},kt=100,Tt=function(jt){ut(Rt,jt);function Rt(Ft){var $t=jt.call(this,Ft)||this;return $t.scroll=$t,$t.observer=new MutationObserver(function(zt){$t.update(zt)}),$t.observer.observe($t.domNode,St),$t.attach(),$t}return Rt.prototype.detach=function(){jt.prototype.detach.call(this),this.observer.disconnect()},Rt.prototype.deleteAt=function(Ft,$t){this.update(),Ft===0&&$t===this.length()?this.children.forEach(function(zt){zt.remove()}):jt.prototype.deleteAt.call(this,Ft,$t)},Rt.prototype.formatAt=function(Ft,$t,zt,Kt){this.update(),jt.prototype.formatAt.call(this,Ft,$t,zt,Kt)},Rt.prototype.insertAt=function(Ft,$t,zt){this.update(),jt.prototype.insertAt.call(this,Ft,$t,zt)},Rt.prototype.optimize=function(Ft,$t){var zt=this;Ft===void 0&&(Ft=[]),$t===void 0&&($t={}),jt.prototype.optimize.call(this,$t);for(var Kt=[].slice.call(this.observer.takeRecords());Kt.length>0;)Ft.push(Kt.pop());for(var Bt=function(tn,nn){nn===void 0&&(nn=!0),!(tn==null||tn===zt)&&tn.domNode.parentNode!=null&&(tn.domNode[ft.DATA_KEY].mutations==null&&(tn.domNode[ft.DATA_KEY].mutations=[]),nn&&Bt(tn.parent))},Ut=function(tn){tn.domNode[ft.DATA_KEY]==null||tn.domNode[ft.DATA_KEY].mutations==null||(tn instanceof dt.default&&tn.children.forEach(Ut),tn.optimize($t))},Jt=Ft,en=0;Jt.length>0;en+=1){if(en>=kt)throw new Error("[Parchment] Maximum optimize iterations reached");for(Jt.forEach(function(tn){var nn=ft.find(tn.target,!0);nn!=null&&(nn.domNode===tn.target&&(tn.type==="childList"?(Bt(ft.find(tn.previousSibling,!1)),[].forEach.call(tn.addedNodes,function(rn){var on=ft.find(rn,!1);Bt(on,!1),on instanceof dt.default&&on.children.forEach(function(dn){Bt(dn,!1)})})):tn.type==="attributes"&&Bt(nn.prev)),Bt(nn))}),this.children.forEach(Ut),Jt=[].slice.call(this.observer.takeRecords()),Kt=Jt.slice();Kt.length>0;)Ft.push(Kt.pop())}},Rt.prototype.update=function(Ft,$t){var zt=this;$t===void 0&&($t={}),Ft=Ft||this.observer.takeRecords(),Ft.map(function(Kt){var Bt=ft.find(Kt.target,!0);return Bt==null?null:Bt.domNode[ft.DATA_KEY].mutations==null?(Bt.domNode[ft.DATA_KEY].mutations=[Kt],Bt):(Bt.domNode[ft.DATA_KEY].mutations.push(Kt),null)}).forEach(function(Kt){Kt==null||Kt===zt||Kt.domNode[ft.DATA_KEY]==null||Kt.update(Kt.domNode[ft.DATA_KEY].mutations||[],$t)}),this.domNode[ft.DATA_KEY].mutations!=null&&jt.prototype.update.call(this,this.domNode[ft.DATA_KEY].mutations,$t),this.optimize(Ft,$t)},Rt.blotName="scroll",Rt.defaultChild="block",Rt.scope=ft.Scope.BLOCK_BLOT,Rt.tagName="DIV",Rt}(dt.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Rt){jt.__proto__=Rt}||function(jt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(jt[Ft]=Rt[Ft])};return function(jt,Rt){Tt(jt,Rt);function Ft(){this.constructor=jt}jt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1);function St(Tt,jt){if(Object.keys(Tt).length!==Object.keys(jt).length)return!1;for(var Rt in Tt)if(Tt[Rt]!==jt[Rt])return!1;return!0}var kt=function(Tt){ut(jt,Tt);function jt(){return Tt!==null&&Tt.apply(this,arguments)||this}return jt.formats=function(Rt){if(Rt.tagName!==jt.tagName)return Tt.formats.call(this,Rt)},jt.prototype.format=function(Rt,Ft){var $t=this;Rt===this.statics.blotName&&!Ft?(this.children.forEach(function(zt){zt instanceof dt.default||(zt=zt.wrap(jt.blotName,!0)),$t.attributes.copy(zt)}),this.unwrap()):Tt.prototype.format.call(this,Rt,Ft)},jt.prototype.formatAt=function(Rt,Ft,$t,zt){if(this.formats()[$t]!=null||ft.query($t,ft.Scope.ATTRIBUTE)){var Kt=this.isolate(Rt,Ft);Kt.format($t,zt)}else Tt.prototype.formatAt.call(this,Rt,Ft,$t,zt)},jt.prototype.optimize=function(Rt){Tt.prototype.optimize.call(this,Rt);var Ft=this.formats();if(Object.keys(Ft).length===0)return this.unwrap();var $t=this.next;$t instanceof jt&&$t.prev===this&&St(Ft,$t.formats())&&($t.moveChildren(this),$t.remove())},jt.blotName="inline",jt.scope=ft.Scope.INLINE_BLOT,jt.tagName="SPAN",jt}(dt.default);ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,jt){Tt.__proto__=jt}||function(Tt,jt){for(var Rt in jt)jt.hasOwnProperty(Rt)&&(Tt[Rt]=jt[Rt])};return function(Tt,jt){kt(Tt,jt);function Rt(){this.constructor=Tt}Tt.prototype=jt===null?Object.create(jt):(Rt.prototype=jt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.formats=function(jt){var Rt=ft.query(Tt.blotName).tagName;if(jt.tagName!==Rt)return kt.formats.call(this,jt)},Tt.prototype.format=function(jt,Rt){ft.query(jt,ft.Scope.BLOCK)!=null&&(jt===this.statics.blotName&&!Rt?this.replaceWith(Tt.blotName):kt.prototype.format.call(this,jt,Rt))},Tt.prototype.formatAt=function(jt,Rt,Ft,$t){ft.query(Ft,ft.Scope.BLOCK)!=null?this.format(Ft,$t):kt.prototype.formatAt.call(this,jt,Rt,Ft,$t)},Tt.prototype.insertAt=function(jt,Rt,Ft){if(Ft==null||ft.query(Rt,ft.Scope.INLINE)!=null)kt.prototype.insertAt.call(this,jt,Rt,Ft);else{var $t=this.split(jt),zt=ft.create(Rt,Ft);$t.parent.insertBefore(zt,$t)}},Tt.prototype.update=function(jt,Rt){navigator.userAgent.match(/Trident/)?this.build():kt.prototype.update.call(this,jt,Rt)},Tt.blotName="block",Tt.scope=ft.Scope.BLOCK_BLOT,Tt.tagName="P",Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,Tt){kt.__proto__=Tt}||function(kt,Tt){for(var jt in Tt)Tt.hasOwnProperty(jt)&&(kt[jt]=Tt[jt])};return function(kt,Tt){St(kt,Tt);function jt(){this.constructor=kt}kt.prototype=Tt===null?Object.create(Tt):(jt.prototype=Tt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=function(St){ut(kt,St);function kt(){return St!==null&&St.apply(this,arguments)||this}return kt.formats=function(Tt){},kt.prototype.format=function(Tt,jt){St.prototype.formatAt.call(this,0,this.length(),Tt,jt)},kt.prototype.formatAt=function(Tt,jt,Rt,Ft){Tt===0&&jt===this.length()?this.format(Rt,Ft):St.prototype.formatAt.call(this,Tt,jt,Rt,Ft)},kt.prototype.formats=function(){return this.statics.formats(this.domNode)},kt}(dt.default);ot.default=ft},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,jt){Tt.__proto__=jt}||function(Tt,jt){for(var Rt in jt)jt.hasOwnProperty(Rt)&&(Tt[Rt]=jt[Rt])};return function(Tt,jt){kt(Tt,jt);function Rt(){this.constructor=Tt}Tt.prototype=jt===null?Object.create(jt):(Rt.prototype=jt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(jt){var Rt=kt.call(this,jt)||this;return Rt.text=Rt.statics.value(Rt.domNode),Rt}return Tt.create=function(jt){return document.createTextNode(jt)},Tt.value=function(jt){var Rt=jt.data;return Rt.normalize&&(Rt=Rt.normalize()),Rt},Tt.prototype.deleteAt=function(jt,Rt){this.domNode.data=this.text=this.text.slice(0,jt)+this.text.slice(jt+Rt)},Tt.prototype.index=function(jt,Rt){return this.domNode===jt?Rt:-1},Tt.prototype.insertAt=function(jt,Rt,Ft){Ft==null?(this.text=this.text.slice(0,jt)+Rt+this.text.slice(jt),this.domNode.data=this.text):kt.prototype.insertAt.call(this,jt,Rt,Ft)},Tt.prototype.length=function(){return this.text.length},Tt.prototype.optimize=function(jt){kt.prototype.optimize.call(this,jt),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Tt&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},Tt.prototype.position=function(jt,Rt){return[this.domNode,jt]},Tt.prototype.split=function(jt,Rt){if(Rt===void 0&&(Rt=!1),!Rt){if(jt===0)return this;if(jt===this.length())return this.next}var Ft=ft.create(this.domNode.splitText(jt));return this.parent.insertBefore(Ft,this.next),this.text=this.statics.value(this.domNode),Ft},Tt.prototype.update=function(jt,Rt){var Ft=this;jt.some(function($t){return $t.type==="characterData"&&$t.target===Ft.domNode})&&(this.text=this.statics.value(this.domNode))},Tt.prototype.value=function(){return this.text},Tt.blotName="text",Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=document.createElement("div");if(ut.classList.toggle("test-class",!1),ut.classList.contains("test-class")){var dt=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ft,St){return arguments.length>1&&!this.contains(ft)==!St?St:dt.call(this,ft)}}String.prototype.startsWith||(String.prototype.startsWith=function(ft,St){return St=St||0,this.substr(St,ft.length)===ft}),String.prototype.endsWith||(String.prototype.endsWith=function(ft,St){var kt=this.toString();(typeof St!="number"||!isFinite(St)||Math.floor(St)!==St||St>kt.length)&&(St=kt.length),St-=ft.length;var Tt=kt.indexOf(ft,St);return Tt!==-1&&Tt===St}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(St){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof St!="function")throw new TypeError("predicate must be a function");for(var kt=Object(this),Tt=kt.length>>>0,jt=arguments[1],Rt,Ft=0;Ft<Tt;Ft++)if(Rt=kt[Ft],St.call(jt,Rt,Ft,kt))return Rt}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(et,ot){var ct=-1,ut=1,dt=0;function ft(en,tn,nn){if(en==tn)return en?[[dt,en]]:[];(nn<0||en.length<nn)&&(nn=null);var rn=jt(en,tn),on=en.substring(0,rn);en=en.substring(rn),tn=tn.substring(rn),rn=Rt(en,tn);var dn=en.substring(en.length-rn);en=en.substring(0,en.length-rn),tn=tn.substring(0,tn.length-rn);var cn=St(en,tn);return on&&cn.unshift([dt,on]),dn&&cn.push([dt,dn]),$t(cn),nn!=null&&(cn=Bt(cn,nn)),cn=Ut(cn),cn}function St(en,tn){var nn;if(!en)return[[ut,tn]];if(!tn)return[[ct,en]];var rn=en.length>tn.length?en:tn,on=en.length>tn.length?tn:en,dn=rn.indexOf(on);if(dn!=-1)return nn=[[ut,rn.substring(0,dn)],[dt,on],[ut,rn.substring(dn+on.length)]],en.length>tn.length&&(nn[0][0]=nn[2][0]=ct),nn;if(on.length==1)return[[ct,en],[ut,tn]];var cn=Ft(en,tn);if(cn){var fn=cn[0],mn=cn[1],En=cn[2],Sn=cn[3],wn=cn[4],hn=ft(fn,En),yn=ft(mn,Sn);return hn.concat([[dt,wn]],yn)}return kt(en,tn)}function kt(en,tn){for(var nn=en.length,rn=tn.length,on=Math.ceil((nn+rn)/2),dn=on,cn=2*on,fn=new Array(cn),mn=new Array(cn),En=0;En<cn;En++)fn[En]=-1,mn[En]=-1;fn[dn+1]=0,mn[dn+1]=0;for(var Sn=nn-rn,wn=Sn%2!=0,hn=0,yn=0,an=0,un=0,bn=0;bn<on;bn++){for(var pn=-bn+hn;pn<=bn-yn;pn+=2){var kn=dn+pn,_n;pn==-bn||pn!=bn&&fn[kn-1]<fn[kn+1]?_n=fn[kn+1]:_n=fn[kn-1]+1;for(var Rn=_n-pn;_n<nn&&Rn<rn&&en.charAt(_n)==tn.charAt(Rn);)_n++,Rn++;if(fn[kn]=_n,_n>nn)yn+=2;else if(Rn>rn)hn+=2;else if(wn){var Nn=dn+Sn-pn;if(Nn>=0&&Nn<cn&&mn[Nn]!=-1){var Cn=nn-mn[Nn];if(_n>=Cn)return Tt(en,tn,_n,Rn)}}}for(var Mn=-bn+an;Mn<=bn-un;Mn+=2){var Nn=dn+Mn,Cn;Mn==-bn||Mn!=bn&&mn[Nn-1]<mn[Nn+1]?Cn=mn[Nn+1]:Cn=mn[Nn-1]+1;for(var In=Cn-Mn;Cn<nn&&In<rn&&en.charAt(nn-Cn-1)==tn.charAt(rn-In-1);)Cn++,In++;if(mn[Nn]=Cn,Cn>nn)un+=2;else if(In>rn)an+=2;else if(!wn){var kn=dn+Sn-Mn;if(kn>=0&&kn<cn&&fn[kn]!=-1){var _n=fn[kn],Rn=dn+_n-kn;if(Cn=nn-Cn,_n>=Cn)return Tt(en,tn,_n,Rn)}}}}return[[ct,en],[ut,tn]]}function Tt(en,tn,nn,rn){var on=en.substring(0,nn),dn=tn.substring(0,rn),cn=en.substring(nn),fn=tn.substring(rn),mn=ft(on,dn),En=ft(cn,fn);return mn.concat(En)}function jt(en,tn){if(!en||!tn||en.charAt(0)!=tn.charAt(0))return 0;for(var nn=0,rn=Math.min(en.length,tn.length),on=rn,dn=0;nn<on;)en.substring(dn,on)==tn.substring(dn,on)?(nn=on,dn=nn):rn=on,on=Math.floor((rn-nn)/2+nn);return on}function Rt(en,tn){if(!en||!tn||en.charAt(en.length-1)!=tn.charAt(tn.length-1))return 0;for(var nn=0,rn=Math.min(en.length,tn.length),on=rn,dn=0;nn<on;)en.substring(en.length-on,en.length-dn)==tn.substring(tn.length-on,tn.length-dn)?(nn=on,dn=nn):rn=on,on=Math.floor((rn-nn)/2+nn);return on}function Ft(en,tn){var nn=en.length>tn.length?en:tn,rn=en.length>tn.length?tn:en;if(nn.length<4||rn.length*2<nn.length)return null;function on(yn,an,un){for(var bn=yn.substring(un,un+Math.floor(yn.length/4)),pn=-1,kn="",_n,Rn,Nn,Cn;(pn=an.indexOf(bn,pn+1))!=-1;){var Mn=jt(yn.substring(un),an.substring(pn)),In=Rt(yn.substring(0,un),an.substring(0,pn));kn.length<In+Mn&&(kn=an.substring(pn-In,pn)+an.substring(pn,pn+Mn),_n=yn.substring(0,un-In),Rn=yn.substring(un+Mn),Nn=an.substring(0,pn-In),Cn=an.substring(pn+Mn))}return kn.length*2>=yn.length?[_n,Rn,Nn,Cn,kn]:null}var dn=on(nn,rn,Math.ceil(nn.length/4)),cn=on(nn,rn,Math.ceil(nn.length/2)),fn;if(!dn&&!cn)return null;cn?dn?fn=dn[4].length>cn[4].length?dn:cn:fn=cn:fn=dn;var mn,En,Sn,wn;en.length>tn.length?(mn=fn[0],En=fn[1],Sn=fn[2],wn=fn[3]):(Sn=fn[0],wn=fn[1],mn=fn[2],En=fn[3]);var hn=fn[4];return[mn,En,Sn,wn,hn]}function $t(en){en.push([dt,""]);for(var tn=0,nn=0,rn=0,on="",dn="",cn;tn<en.length;)switch(en[tn][0]){case ut:rn++,dn+=en[tn][1],tn++;break;case ct:nn++,on+=en[tn][1],tn++;break;case dt:nn+rn>1?(nn!==0&&rn!==0&&(cn=jt(dn,on),cn!==0&&(tn-nn-rn>0&&en[tn-nn-rn-1][0]==dt?en[tn-nn-rn-1][1]+=dn.substring(0,cn):(en.splice(0,0,[dt,dn.substring(0,cn)]),tn++),dn=dn.substring(cn),on=on.substring(cn)),cn=Rt(dn,on),cn!==0&&(en[tn][1]=dn.substring(dn.length-cn)+en[tn][1],dn=dn.substring(0,dn.length-cn),on=on.substring(0,on.length-cn))),nn===0?en.splice(tn-rn,nn+rn,[ut,dn]):rn===0?en.splice(tn-nn,nn+rn,[ct,on]):en.splice(tn-nn-rn,nn+rn,[ct,on],[ut,dn]),tn=tn-nn-rn+(nn?1:0)+(rn?1:0)+1):tn!==0&&en[tn-1][0]==dt?(en[tn-1][1]+=en[tn][1],en.splice(tn,1)):tn++,rn=0,nn=0,on="",dn="";break}en[en.length-1][1]===""&&en.pop();var fn=!1;for(tn=1;tn<en.length-1;)en[tn-1][0]==dt&&en[tn+1][0]==dt&&(en[tn][1].substring(en[tn][1].length-en[tn-1][1].length)==en[tn-1][1]?(en[tn][1]=en[tn-1][1]+en[tn][1].substring(0,en[tn][1].length-en[tn-1][1].length),en[tn+1][1]=en[tn-1][1]+en[tn+1][1],en.splice(tn-1,1),fn=!0):en[tn][1].substring(0,en[tn+1][1].length)==en[tn+1][1]&&(en[tn-1][1]+=en[tn+1][1],en[tn][1]=en[tn][1].substring(en[tn+1][1].length)+en[tn+1][1],en.splice(tn+1,1),fn=!0)),tn++;fn&&$t(en)}var zt=ft;zt.INSERT=ut,zt.DELETE=ct,zt.EQUAL=dt,et.exports=zt;function Kt(en,tn){if(tn===0)return[dt,en];for(var nn=0,rn=0;rn<en.length;rn++){var on=en[rn];if(on[0]===ct||on[0]===dt){var dn=nn+on[1].length;if(tn===dn)return[rn+1,en];if(tn<dn){en=en.slice();var cn=tn-nn,fn=[on[0],on[1].slice(0,cn)],mn=[on[0],on[1].slice(cn)];return en.splice(rn,1,fn,mn),[rn+1,en]}else nn=dn}}throw new Error("cursor_pos is out of bounds!")}function Bt(en,tn){var nn=Kt(en,tn),rn=nn[1],on=nn[0],dn=rn[on],cn=rn[on+1];if(dn==null)return en;if(dn[0]!==dt)return en;if(cn!=null&&dn[1]+cn[1]===cn[1]+dn[1])return rn.splice(on,2,cn,dn),Jt(rn,on,2);if(cn!=null&&cn[1].indexOf(dn[1])===0){rn.splice(on,2,[cn[0],dn[1]],[0,dn[1]]);var fn=cn[1].slice(dn[1].length);return fn.length>0&&rn.splice(on+2,0,[cn[0],fn]),Jt(rn,on,3)}else return en}function Ut(en){for(var tn=!1,nn=function(cn){return cn.charCodeAt(0)>=56320&&cn.charCodeAt(0)<=57343},rn=function(cn){return cn.charCodeAt(cn.length-1)>=55296&&cn.charCodeAt(cn.length-1)<=56319},on=2;on<en.length;on+=1)en[on-2][0]===dt&&rn(en[on-2][1])&&en[on-1][0]===ct&&nn(en[on-1][1])&&en[on][0]===ut&&nn(en[on][1])&&(tn=!0,en[on-1][1]=en[on-2][1].slice(-1)+en[on-1][1],en[on][1]=en[on-2][1].slice(-1)+en[on][1],en[on-2][1]=en[on-2][1].slice(0,-1));if(!tn)return en;for(var dn=[],on=0;on<en.length;on+=1)en[on][1].length>0&&dn.push(en[on]);return dn}function Jt(en,tn,nn){for(var rn=tn+nn-1;rn>=0&&rn>=tn-1;rn--)if(rn+1<en.length){var on=en[rn],dn=en[rn+1];on[0]===dn[1]&&en.splice(rn,2,[on[0],on[1]+dn[1]])}return en}},function(et,ot){ot=et.exports=typeof Object.keys=="function"?Object.keys:ct,ot.shim=ct;function ct(ut){var dt=[];for(var ft in ut)dt.push(ft);return dt}},function(et,ot){var ct=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";ot=et.exports=ct?ut:dt,ot.supported=ut;function ut(ft){return Object.prototype.toString.call(ft)=="[object Arguments]"}ot.unsupported=dt;function dt(ft){return ft&&typeof ft=="object"&&typeof ft.length=="number"&&Object.prototype.hasOwnProperty.call(ft,"callee")&&!Object.prototype.propertyIsEnumerable.call(ft,"callee")||!1}},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut="~";function dt(){}Object.create&&(dt.prototype=Object.create(null),new dt().__proto__||(ut=!1));function ft(kt,Tt,jt){this.fn=kt,this.context=Tt,this.once=jt||!1}function St(){this._events=new dt,this._eventsCount=0}St.prototype.eventNames=function(){var Tt=[],jt,Rt;if(this._eventsCount===0)return Tt;for(Rt in jt=this._events)ct.call(jt,Rt)&&Tt.push(ut?Rt.slice(1):Rt);return Object.getOwnPropertySymbols?Tt.concat(Object.getOwnPropertySymbols(jt)):Tt},St.prototype.listeners=function(Tt,jt){var Rt=ut?ut+Tt:Tt,Ft=this._events[Rt];if(jt)return!!Ft;if(!Ft)return[];if(Ft.fn)return[Ft.fn];for(var $t=0,zt=Ft.length,Kt=new Array(zt);$t<zt;$t++)Kt[$t]=Ft[$t].fn;return Kt},St.prototype.emit=function(Tt,jt,Rt,Ft,$t,zt){var Kt=ut?ut+Tt:Tt;if(!this._events[Kt])return!1;var Bt=this._events[Kt],Ut=arguments.length,Jt,en;if(Bt.fn){switch(Bt.once&&this.removeListener(Tt,Bt.fn,void 0,!0),Ut){case 1:return Bt.fn.call(Bt.context),!0;case 2:return Bt.fn.call(Bt.context,jt),!0;case 3:return Bt.fn.call(Bt.context,jt,Rt),!0;case 4:return Bt.fn.call(Bt.context,jt,Rt,Ft),!0;case 5:return Bt.fn.call(Bt.context,jt,Rt,Ft,$t),!0;case 6:return Bt.fn.call(Bt.context,jt,Rt,Ft,$t,zt),!0}for(en=1,Jt=new Array(Ut-1);en<Ut;en++)Jt[en-1]=arguments[en];Bt.fn.apply(Bt.context,Jt)}else{var tn=Bt.length,nn;for(en=0;en<tn;en++)switch(Bt[en].once&&this.removeListener(Tt,Bt[en].fn,void 0,!0),Ut){case 1:Bt[en].fn.call(Bt[en].context);break;case 2:Bt[en].fn.call(Bt[en].context,jt);break;case 3:Bt[en].fn.call(Bt[en].context,jt,Rt);break;case 4:Bt[en].fn.call(Bt[en].context,jt,Rt,Ft);break;default:if(!Jt)for(nn=1,Jt=new Array(Ut-1);nn<Ut;nn++)Jt[nn-1]=arguments[nn];Bt[en].fn.apply(Bt[en].context,Jt)}}return!0},St.prototype.on=function(Tt,jt,Rt){var Ft=new ft(jt,Rt||this),$t=ut?ut+Tt:Tt;return this._events[$t]?this._events[$t].fn?this._events[$t]=[this._events[$t],Ft]:this._events[$t].push(Ft):(this._events[$t]=Ft,this._eventsCount++),this},St.prototype.once=function(Tt,jt,Rt){var Ft=new ft(jt,Rt||this,!0),$t=ut?ut+Tt:Tt;return this._events[$t]?this._events[$t].fn?this._events[$t]=[this._events[$t],Ft]:this._events[$t].push(Ft):(this._events[$t]=Ft,this._eventsCount++),this},St.prototype.removeListener=function(Tt,jt,Rt,Ft){var $t=ut?ut+Tt:Tt;if(!this._events[$t])return this;if(!jt)return--this._eventsCount===0?this._events=new dt:delete this._events[$t],this;var zt=this._events[$t];if(zt.fn)zt.fn===jt&&(!Ft||zt.once)&&(!Rt||zt.context===Rt)&&(--this._eventsCount===0?this._events=new dt:delete this._events[$t]);else{for(var Kt=0,Bt=[],Ut=zt.length;Kt<Ut;Kt++)(zt[Kt].fn!==jt||Ft&&!zt[Kt].once||Rt&&zt[Kt].context!==Rt)&&Bt.push(zt[Kt]);Bt.length?this._events[$t]=Bt.length===1?Bt[0]:Bt:--this._eventsCount===0?this._events=new dt:delete this._events[$t]}return this},St.prototype.removeAllListeners=function(Tt){var jt;return Tt?(jt=ut?ut+Tt:Tt,this._events[jt]&&(--this._eventsCount===0?this._events=new dt:delete this._events[jt])):(this._events=new dt,this._eventsCount=0),this},St.prototype.off=St.prototype.removeListener,St.prototype.addListener=St.prototype.on,St.prototype.setMaxListeners=function(){return this},St.prefixed=ut,St.EventEmitter=St,typeof et<"u"&&(et.exports=St)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchText=ot.matchSpacing=ot.matchNewline=ot.matchBlot=ot.matchAttributor=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Bn){return typeof Bn}:function(Bn){return Bn&&typeof Symbol=="function"&&Bn.constructor===Symbol&&Bn!==Symbol.prototype?"symbol":typeof Bn},dt=function(){function Bn(zn,Kn){var Yn=[],Wn=!0,lr=!1,or=void 0;try{for(var cr=zn[Symbol.iterator](),Cr;!(Wn=(Cr=cr.next()).done)&&(Yn.push(Cr.value),!(Kn&&Yn.length===Kn));Wn=!0);}catch(Rr){lr=!0,or=Rr}finally{try{!Wn&&cr.return&&cr.return()}finally{if(lr)throw or}}return Yn}return function(zn,Kn){if(Array.isArray(zn))return zn;if(Symbol.iterator in Object(zn))return Bn(zn,Kn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Bn(zn,Kn){for(var Yn=0;Yn<Kn.length;Yn++){var Wn=Kn[Yn];Wn.enumerable=Wn.enumerable||!1,Wn.configurable=!0,"value"in Wn&&(Wn.writable=!0),Object.defineProperty(zn,Wn.key,Wn)}}return function(zn,Kn,Yn){return Kn&&Bn(zn.prototype,Kn),Yn&&Bn(zn,Yn),zn}}(),St=ct(3),kt=mn(St),Tt=ct(2),jt=mn(Tt),Rt=ct(0),Ft=mn(Rt),$t=ct(5),zt=mn($t),Kt=ct(10),Bt=mn(Kt),Ut=ct(9),Jt=mn(Ut),en=ct(36),tn=ct(37),nn=ct(13),rn=mn(nn),on=ct(26),dn=ct(38),cn=ct(39),fn=ct(40);function mn(Bn){return Bn&&Bn.__esModule?Bn:{default:Bn}}function En(Bn,zn,Kn){return zn in Bn?Object.defineProperty(Bn,zn,{value:Kn,enumerable:!0,configurable:!0,writable:!0}):Bn[zn]=Kn,Bn}function Sn(Bn,zn){if(!(Bn instanceof zn))throw new TypeError("Cannot call a class as a function")}function wn(Bn,zn){if(!Bn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zn&&(typeof zn=="object"||typeof zn=="function")?zn:Bn}function hn(Bn,zn){if(typeof zn!="function"&&zn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zn);Bn.prototype=Object.create(zn&&zn.prototype,{constructor:{value:Bn,enumerable:!1,writable:!0,configurable:!0}}),zn&&(Object.setPrototypeOf?Object.setPrototypeOf(Bn,zn):Bn.__proto__=zn)}var yn=(0,Bt.default)("quill:clipboard"),an="__ql-matcher",un=[[Node.TEXT_NODE,yr],[Node.TEXT_NODE,Hn],["br",Gn],[Node.ELEMENT_NODE,Hn],[Node.ELEMENT_NODE,jn],[Node.ELEMENT_NODE,ir],[Node.ELEMENT_NODE,On],[Node.ELEMENT_NODE,ur],["li",Un],["b",In.bind(In,"bold")],["i",In.bind(In,"italic")],["style",Jn]],bn=[en.AlignAttribute,dn.DirectionAttribute].reduce(function(Bn,zn){return Bn[zn.keyName]=zn,Bn},{}),pn=[en.AlignStyle,tn.BackgroundStyle,on.ColorStyle,dn.DirectionStyle,cn.FontStyle,fn.SizeStyle].reduce(function(Bn,zn){return Bn[zn.keyName]=zn,Bn},{}),kn=function(Bn){hn(zn,Bn);function zn(Kn,Yn){Sn(this,zn);var Wn=wn(this,(zn.__proto__||Object.getPrototypeOf(zn)).call(this,Kn,Yn));return Wn.quill.root.addEventListener("paste",Wn.onPaste.bind(Wn)),Wn.container=Wn.quill.addContainer("ql-clipboard"),Wn.container.setAttribute("contenteditable",!0),Wn.container.setAttribute("tabindex",-1),Wn.matchers=[],un.concat(Wn.options.matchers).forEach(function(lr){var or=dt(lr,2),cr=or[0],Cr=or[1];!Yn.matchVisual&&Cr===ir||Wn.addMatcher(cr,Cr)}),Wn}return ft(zn,[{key:"addMatcher",value:function(Yn,Wn){this.matchers.push([Yn,Wn])}},{key:"convert",value:function(Yn){if(typeof Yn=="string")return this.container.innerHTML=Yn.replace(/\>\r?\n +\</g,"><"),this.convert();var Wn=this.quill.getFormat(this.quill.selection.savedRange.index);if(Wn[rn.default.blotName]){var lr=this.container.innerText;return this.container.innerHTML="",new jt.default().insert(lr,En({},rn.default.blotName,Wn[rn.default.blotName]))}var or=this.prepareMatching(),cr=dt(or,2),Cr=cr[0],Rr=cr[1],br=Mn(this.container,Cr,Rr);return Nn(br,`
`)&&br.ops[br.ops.length-1].attributes==null&&(br=br.compose(new jt.default().retain(br.length()-1).delete(1))),yn.log("convert",this.container.innerHTML,br),this.container.innerHTML="",br}},{key:"dangerouslyPasteHTML",value:function(Yn,Wn){var lr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt.default.sources.API;if(typeof Yn=="string")this.quill.setContents(this.convert(Yn),Wn),this.quill.setSelection(0,zt.default.sources.SILENT);else{var or=this.convert(Wn);this.quill.updateContents(new jt.default().retain(Yn).concat(or),lr),this.quill.setSelection(Yn+or.length(),zt.default.sources.SILENT)}}},{key:"onPaste",value:function(Yn){var Wn=this;if(!(Yn.defaultPrevented||!this.quill.isEnabled())){var lr=this.quill.getSelection(),or=new jt.default().retain(lr.index),cr=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(zt.default.sources.SILENT),setTimeout(function(){or=or.concat(Wn.convert()).delete(lr.length),Wn.quill.updateContents(or,zt.default.sources.USER),Wn.quill.setSelection(or.length()-lr.length,zt.default.sources.SILENT),Wn.quill.scrollingContainer.scrollTop=cr,Wn.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Yn=this,Wn=[],lr=[];return this.matchers.forEach(function(or){var cr=dt(or,2),Cr=cr[0],Rr=cr[1];switch(Cr){case Node.TEXT_NODE:lr.push(Rr);break;case Node.ELEMENT_NODE:Wn.push(Rr);break;default:[].forEach.call(Yn.container.querySelectorAll(Cr),function(br){br[an]=br[an]||[],br[an].push(Rr)});break}}),[Wn,lr]}}]),zn}(Jt.default);kn.DEFAULTS={matchers:[],matchVisual:!0};function _n(Bn,zn,Kn){return(typeof zn>"u"?"undefined":ut(zn))==="object"?Object.keys(zn).reduce(function(Yn,Wn){return _n(Yn,Wn,zn[Wn])},Bn):Bn.reduce(function(Yn,Wn){return Wn.attributes&&Wn.attributes[zn]?Yn.push(Wn):Yn.insert(Wn.insert,(0,kt.default)({},En({},zn,Kn),Wn.attributes))},new jt.default)}function Rn(Bn){if(Bn.nodeType!==Node.ELEMENT_NODE)return{};var zn="__ql-computed-style";return Bn[zn]||(Bn[zn]=window.getComputedStyle(Bn))}function Nn(Bn,zn){for(var Kn="",Yn=Bn.ops.length-1;Yn>=0&&Kn.length<zn.length;--Yn){var Wn=Bn.ops[Yn];if(typeof Wn.insert!="string")break;Kn=Wn.insert+Kn}return Kn.slice(-1*zn.length)===zn}function Cn(Bn){if(Bn.childNodes.length===0)return!1;var zn=Rn(Bn);return["block","list-item"].indexOf(zn.display)>-1}function Mn(Bn,zn,Kn){return Bn.nodeType===Bn.TEXT_NODE?Kn.reduce(function(Yn,Wn){return Wn(Bn,Yn)},new jt.default):Bn.nodeType===Bn.ELEMENT_NODE?[].reduce.call(Bn.childNodes||[],function(Yn,Wn){var lr=Mn(Wn,zn,Kn);return Wn.nodeType===Bn.ELEMENT_NODE&&(lr=zn.reduce(function(or,cr){return cr(Wn,or)},lr),lr=(Wn[an]||[]).reduce(function(or,cr){return cr(Wn,or)},lr)),Yn.concat(lr)},new jt.default):new jt.default}function In(Bn,zn,Kn){return _n(Kn,Bn,!0)}function On(Bn,zn){var Kn=Ft.default.Attributor.Attribute.keys(Bn),Yn=Ft.default.Attributor.Class.keys(Bn),Wn=Ft.default.Attributor.Style.keys(Bn),lr={};return Kn.concat(Yn).concat(Wn).forEach(function(or){var cr=Ft.default.query(or,Ft.default.Scope.ATTRIBUTE);cr!=null&&(lr[cr.attrName]=cr.value(Bn),lr[cr.attrName])||(cr=bn[or],cr!=null&&(cr.attrName===or||cr.keyName===or)&&(lr[cr.attrName]=cr.value(Bn)||void 0),cr=pn[or],cr!=null&&(cr.attrName===or||cr.keyName===or)&&(cr=pn[or],lr[cr.attrName]=cr.value(Bn)||void 0))}),Object.keys(lr).length>0&&(zn=_n(zn,lr)),zn}function jn(Bn,zn){var Kn=Ft.default.query(Bn);if(Kn==null)return zn;if(Kn.prototype instanceof Ft.default.Embed){var Yn={},Wn=Kn.value(Bn);Wn!=null&&(Yn[Kn.blotName]=Wn,zn=new jt.default().insert(Yn,Kn.formats(Bn)))}else typeof Kn.formats=="function"&&(zn=_n(zn,Kn.blotName,Kn.formats(Bn)));return zn}function Gn(Bn,zn){return Nn(zn,`
`)||zn.insert(`
`),zn}function Jn(){return new jt.default}function Un(Bn,zn){var Kn=Ft.default.query(Bn);if(Kn==null||Kn.blotName!=="list-item"||!Nn(zn,`
`))return zn;for(var Yn=-1,Wn=Bn.parentNode;!Wn.classList.contains("ql-clipboard");)(Ft.default.query(Wn)||{}).blotName==="list"&&(Yn+=1),Wn=Wn.parentNode;return Yn<=0?zn:zn.compose(new jt.default().retain(zn.length()-1).retain(1,{indent:Yn}))}function Hn(Bn,zn){return Nn(zn,`
`)||(Cn(Bn)||zn.length()>0&&Bn.nextSibling&&Cn(Bn.nextSibling))&&zn.insert(`
`),zn}function ir(Bn,zn){if(Cn(Bn)&&Bn.nextElementSibling!=null&&!Nn(zn,`

`)){var Kn=Bn.offsetHeight+parseFloat(Rn(Bn).marginTop)+parseFloat(Rn(Bn).marginBottom);Bn.nextElementSibling.offsetTop>Bn.offsetTop+Kn*1.5&&zn.insert(`
`)}return zn}function ur(Bn,zn){var Kn={},Yn=Bn.style||{};return Yn.fontStyle&&Rn(Bn).fontStyle==="italic"&&(Kn.italic=!0),Yn.fontWeight&&(Rn(Bn).fontWeight.startsWith("bold")||parseInt(Rn(Bn).fontWeight)>=700)&&(Kn.bold=!0),Object.keys(Kn).length>0&&(zn=_n(zn,Kn)),parseFloat(Yn.textIndent||0)>0&&(zn=new jt.default().insert("	").concat(zn)),zn}function yr(Bn,zn){var Kn=Bn.data;if(Bn.parentNode.tagName==="O:P")return zn.insert(Kn.trim());if(Kn.trim().length===0&&Bn.parentNode.classList.contains("ql-clipboard"))return zn;if(!Rn(Bn.parentNode).whiteSpace.startsWith("pre")){var Yn=function(lr,or){return or=or.replace(/[^\u00a0]/g,""),or.length<1&&lr?" ":or};Kn=Kn.replace(/\r\n/g," ").replace(/\n/g," "),Kn=Kn.replace(/\s\s+/g,Yn.bind(Yn,!0)),(Bn.previousSibling==null&&Cn(Bn.parentNode)||Bn.previousSibling!=null&&Cn(Bn.previousSibling))&&(Kn=Kn.replace(/^\s+/,Yn.bind(Yn,!1))),(Bn.nextSibling==null&&Cn(Bn.parentNode)||Bn.nextSibling!=null&&Cn(Bn.nextSibling))&&(Kn=Kn.replace(/\s+$/,Yn.bind(Yn,!1)))}return zn.insert(Kn)}ot.default=kn,ot.matchAttributor=On,ot.matchBlot=jn,ot.matchNewline=Hn,ot.matchSpacing=ir,ot.matchText=yr},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(zt,Ut.key,Ut)}}return function(zt,Kt,Bt){return Kt&&$t(zt.prototype,Kt),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Kt,Bt){zt===null&&(zt=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(zt,Kt);if(Ut===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var en=Ut.get;return en===void 0?void 0:en.call(Bt)}},ft=ct(6),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(){return Tt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,[{key:"optimize",value:function(Bt){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"optimize",this).call(this,Bt),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),zt}(St.default);Ft.blotName="bold",Ft.tagName=["STRONG","B"],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.addControls=ot.default=void 0;var ut=function(){function fn(mn,En){var Sn=[],wn=!0,hn=!1,yn=void 0;try{for(var an=mn[Symbol.iterator](),un;!(wn=(un=an.next()).done)&&(Sn.push(un.value),!(En&&Sn.length===En));wn=!0);}catch(bn){hn=!0,yn=bn}finally{try{!wn&&an.return&&an.return()}finally{if(hn)throw yn}}return Sn}return function(mn,En){if(Array.isArray(mn))return mn;if(Symbol.iterator in Object(mn))return fn(mn,En);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function fn(mn,En){for(var Sn=0;Sn<En.length;Sn++){var wn=En[Sn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(mn,wn.key,wn)}}return function(mn,En,Sn){return En&&fn(mn.prototype,En),Sn&&fn(mn,Sn),mn}}(),ft=ct(2),St=Bt(ft),kt=ct(0),Tt=Bt(kt),jt=ct(5),Rt=Bt(jt),Ft=ct(10),$t=Bt(Ft),zt=ct(9),Kt=Bt(zt);function Bt(fn){return fn&&fn.__esModule?fn:{default:fn}}function Ut(fn,mn,En){return mn in fn?Object.defineProperty(fn,mn,{value:En,enumerable:!0,configurable:!0,writable:!0}):fn[mn]=En,fn}function Jt(fn,mn){if(!(fn instanceof mn))throw new TypeError("Cannot call a class as a function")}function en(fn,mn){if(!fn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mn&&(typeof mn=="object"||typeof mn=="function")?mn:fn}function tn(fn,mn){if(typeof mn!="function"&&mn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof mn);fn.prototype=Object.create(mn&&mn.prototype,{constructor:{value:fn,enumerable:!1,writable:!0,configurable:!0}}),mn&&(Object.setPrototypeOf?Object.setPrototypeOf(fn,mn):fn.__proto__=mn)}var nn=(0,$t.default)("quill:toolbar"),rn=function(fn){tn(mn,fn);function mn(En,Sn){Jt(this,mn);var wn=en(this,(mn.__proto__||Object.getPrototypeOf(mn)).call(this,En,Sn));if(Array.isArray(wn.options.container)){var hn=document.createElement("div");dn(hn,wn.options.container),En.container.parentNode.insertBefore(hn,En.container),wn.container=hn}else typeof wn.options.container=="string"?wn.container=document.querySelector(wn.options.container):wn.container=wn.options.container;if(!(wn.container instanceof HTMLElement)){var yn;return yn=nn.error("Container required for toolbar",wn.options),en(wn,yn)}return wn.container.classList.add("ql-toolbar"),wn.controls=[],wn.handlers={},Object.keys(wn.options.handlers).forEach(function(an){wn.addHandler(an,wn.options.handlers[an])}),[].forEach.call(wn.container.querySelectorAll("button, select"),function(an){wn.attach(an)}),wn.quill.on(Rt.default.events.EDITOR_CHANGE,function(an,un){an===Rt.default.events.SELECTION_CHANGE&&wn.update(un)}),wn.quill.on(Rt.default.events.SCROLL_OPTIMIZE,function(){var an=wn.quill.selection.getRange(),un=ut(an,1),bn=un[0];wn.update(bn)}),wn}return dt(mn,[{key:"addHandler",value:function(Sn,wn){this.handlers[Sn]=wn}},{key:"attach",value:function(Sn){var wn=this,hn=[].find.call(Sn.classList,function(an){return an.indexOf("ql-")===0});if(hn){if(hn=hn.slice(3),Sn.tagName==="BUTTON"&&Sn.setAttribute("type","button"),this.handlers[hn]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[hn]==null){nn.warn("ignoring attaching to disabled format",hn,Sn);return}if(Tt.default.query(hn)==null){nn.warn("ignoring attaching to nonexistent format",hn,Sn);return}}var yn=Sn.tagName==="SELECT"?"change":"click";Sn.addEventListener(yn,function(an){var un=void 0;if(Sn.tagName==="SELECT"){if(Sn.selectedIndex<0)return;var bn=Sn.options[Sn.selectedIndex];bn.hasAttribute("selected")?un=!1:un=bn.value||!1}else Sn.classList.contains("ql-active")?un=!1:un=Sn.value||!Sn.hasAttribute("value"),an.preventDefault();wn.quill.focus();var pn=wn.quill.selection.getRange(),kn=ut(pn,1),_n=kn[0];if(wn.handlers[hn]!=null)wn.handlers[hn].call(wn,un);else if(Tt.default.query(hn).prototype instanceof Tt.default.Embed){if(un=prompt("Enter "+hn),!un)return;wn.quill.updateContents(new St.default().retain(_n.index).delete(_n.length).insert(Ut({},hn,un)),Rt.default.sources.USER)}else wn.quill.format(hn,un,Rt.default.sources.USER);wn.update(_n)}),this.controls.push([hn,Sn])}}},{key:"update",value:function(Sn){var wn=Sn==null?{}:this.quill.getFormat(Sn);this.controls.forEach(function(hn){var yn=ut(hn,2),an=yn[0],un=yn[1];if(un.tagName==="SELECT"){var bn=void 0;if(Sn==null)bn=null;else if(wn[an]==null)bn=un.querySelector("option[selected]");else if(!Array.isArray(wn[an])){var pn=wn[an];typeof pn=="string"&&(pn=pn.replace(/\"/g,'\\"')),bn=un.querySelector('option[value="'+pn+'"]')}bn==null?(un.value="",un.selectedIndex=-1):bn.selected=!0}else if(Sn==null)un.classList.remove("ql-active");else if(un.hasAttribute("value")){var kn=wn[an]===un.getAttribute("value")||wn[an]!=null&&wn[an].toString()===un.getAttribute("value")||wn[an]==null&&!un.getAttribute("value");un.classList.toggle("ql-active",kn)}else un.classList.toggle("ql-active",wn[an]!=null)})}}]),mn}(Kt.default);rn.DEFAULTS={};function on(fn,mn,En){var Sn=document.createElement("button");Sn.setAttribute("type","button"),Sn.classList.add("ql-"+mn),En!=null&&(Sn.value=En),fn.appendChild(Sn)}function dn(fn,mn){Array.isArray(mn[0])||(mn=[mn]),mn.forEach(function(En){var Sn=document.createElement("span");Sn.classList.add("ql-formats"),En.forEach(function(wn){if(typeof wn=="string")on(Sn,wn);else{var hn=Object.keys(wn)[0],yn=wn[hn];Array.isArray(yn)?cn(Sn,hn,yn):on(Sn,hn,yn)}}),fn.appendChild(Sn)})}function cn(fn,mn,En){var Sn=document.createElement("select");Sn.classList.add("ql-"+mn),En.forEach(function(wn){var hn=document.createElement("option");wn!==!1?hn.setAttribute("value",wn):hn.setAttribute("selected","selected"),Sn.appendChild(hn)}),fn.appendChild(Sn)}rn.DEFAULTS={container:null,handlers:{clean:function(){var mn=this,En=this.quill.getSelection();if(En!=null)if(En.length==0){var Sn=this.quill.getFormat();Object.keys(Sn).forEach(function(wn){Tt.default.query(wn,Tt.default.Scope.INLINE)!=null&&mn.quill.format(wn,!1)})}else this.quill.removeFormat(En,Rt.default.sources.USER)},direction:function(mn){var En=this.quill.getFormat().align;mn==="rtl"&&En==null?this.quill.format("align","right",Rt.default.sources.USER):!mn&&En==="right"&&this.quill.format("align",!1,Rt.default.sources.USER),this.quill.format("direction",mn,Rt.default.sources.USER)},indent:function(mn){var En=this.quill.getSelection(),Sn=this.quill.getFormat(En),wn=parseInt(Sn.indent||0);if(mn==="+1"||mn==="-1"){var hn=mn==="+1"?1:-1;Sn.direction==="rtl"&&(hn*=-1),this.quill.format("indent",wn+hn,Rt.default.sources.USER)}},link:function(mn){mn===!0&&(mn=prompt("Enter link URL:")),this.quill.format("link",mn,Rt.default.sources.USER)},list:function(mn){var En=this.quill.getSelection(),Sn=this.quill.getFormat(En);mn==="check"?Sn.list==="checked"||Sn.list==="unchecked"?this.quill.format("list",!1,Rt.default.sources.USER):this.quill.format("list","unchecked",Rt.default.sources.USER):this.quill.format("list",mn,Rt.default.sources.USER)}}},ot.default=rn,ot.addControls=dn},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(zt,Ut.key,Ut)}}return function(zt,Kt,Bt){return Kt&&$t(zt.prototype,Kt),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Kt,Bt){zt===null&&(zt=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(zt,Kt);if(Ut===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var en=Ut.get;return en===void 0?void 0:en.call(Bt)}},ft=ct(28),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(Kt,Bt){Tt(this,zt);var Ut=jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Kt));return Ut.label.innerHTML=Bt,Ut.container.classList.add("ql-color-picker"),[].slice.call(Ut.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Jt){Jt.classList.add("ql-primary")}),Ut}return ut(zt,[{key:"buildItem",value:function(Bt){var Ut=dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"buildItem",this).call(this,Bt);return Ut.style.backgroundColor=Bt.getAttribute("value")||"",Ut}},{key:"selectItem",value:function(Bt,Ut){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Bt,Ut);var Jt=this.label.querySelector(".ql-color-label"),en=Bt&&Bt.getAttribute("data-value")||"";Jt&&(Jt.tagName==="line"?Jt.style.stroke=en:Jt.style.fill=en)}}]),zt}(St.default);ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(zt,Ut.key,Ut)}}return function(zt,Kt,Bt){return Kt&&$t(zt.prototype,Kt),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Kt,Bt){zt===null&&(zt=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(zt,Kt);if(Ut===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var en=Ut.get;return en===void 0?void 0:en.call(Bt)}},ft=ct(28),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(Kt,Bt){Tt(this,zt);var Ut=jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Kt));return Ut.container.classList.add("ql-icon-picker"),[].forEach.call(Ut.container.querySelectorAll(".ql-picker-item"),function(Jt){Jt.innerHTML=Bt[Jt.getAttribute("data-value")||""]}),Ut.defaultItem=Ut.container.querySelector(".ql-selected"),Ut.selectItem(Ut.defaultItem),Ut}return ut(zt,[{key:"selectItem",value:function(Bt,Ut){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Bt,Ut),Bt=Bt||this.defaultItem,this.label.innerHTML=Bt.innerHTML}}]),zt}(St.default);ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var jt=0;jt<Tt.length;jt++){var Rt=Tt[jt];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(kt,Rt.key,Rt)}}return function(kt,Tt,jt){return Tt&&St(kt.prototype,Tt),jt&&St(kt,jt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){var jt=this;dt(this,St),this.quill=kt,this.boundsContainer=Tt||document.body,this.root=kt.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){jt.root.style.marginTop=-1*jt.quill.root.scrollTop+"px"}),this.hide()}return ut(St,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(Tt){var jt=Tt.left+Tt.width/2-this.root.offsetWidth/2,Rt=Tt.bottom+this.quill.root.scrollTop;this.root.style.left=jt+"px",this.root.style.top=Rt+"px",this.root.classList.remove("ql-flip");var Ft=this.boundsContainer.getBoundingClientRect(),$t=this.root.getBoundingClientRect(),zt=0;if($t.right>Ft.right&&(zt=Ft.right-$t.right,this.root.style.left=jt+zt+"px"),$t.left<Ft.left&&(zt=Ft.left-$t.left,this.root.style.left=jt+zt+"px"),$t.bottom>Ft.bottom){var Kt=$t.bottom-$t.top,Bt=Tt.bottom-Tt.top+Kt;this.root.style.top=Rt-Bt+"px",this.root.classList.add("ql-flip")}return zt}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),St}();ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function cn(fn,mn){var En=[],Sn=!0,wn=!1,hn=void 0;try{for(var yn=fn[Symbol.iterator](),an;!(Sn=(an=yn.next()).done)&&(En.push(an.value),!(mn&&En.length===mn));Sn=!0);}catch(un){wn=!0,hn=un}finally{try{!Sn&&yn.return&&yn.return()}finally{if(wn)throw hn}}return En}return function(fn,mn){if(Array.isArray(fn))return fn;if(Symbol.iterator in Object(fn))return cn(fn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function cn(fn,mn,En){fn===null&&(fn=Function.prototype);var Sn=Object.getOwnPropertyDescriptor(fn,mn);if(Sn===void 0){var wn=Object.getPrototypeOf(fn);return wn===null?void 0:cn(wn,mn,En)}else{if("value"in Sn)return Sn.value;var hn=Sn.get;return hn===void 0?void 0:hn.call(En)}},ft=function(){function cn(fn,mn){for(var En=0;En<mn.length;En++){var Sn=mn[En];Sn.enumerable=Sn.enumerable||!1,Sn.configurable=!0,"value"in Sn&&(Sn.writable=!0),Object.defineProperty(fn,Sn.key,Sn)}}return function(fn,mn,En){return mn&&cn(fn.prototype,mn),En&&cn(fn,En),fn}}(),St=ct(3),kt=Jt(St),Tt=ct(8),jt=Jt(Tt),Rt=ct(43),Ft=Jt(Rt),$t=ct(27),zt=Jt($t),Kt=ct(15),Bt=ct(41),Ut=Jt(Bt);function Jt(cn){return cn&&cn.__esModule?cn:{default:cn}}function en(cn,fn){if(!(cn instanceof fn))throw new TypeError("Cannot call a class as a function")}function tn(cn,fn){if(!cn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fn&&(typeof fn=="object"||typeof fn=="function")?fn:cn}function nn(cn,fn){if(typeof fn!="function"&&fn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fn);cn.prototype=Object.create(fn&&fn.prototype,{constructor:{value:cn,enumerable:!1,writable:!0,configurable:!0}}),fn&&(Object.setPrototypeOf?Object.setPrototypeOf(cn,fn):cn.__proto__=fn)}var rn=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],on=function(cn){nn(fn,cn);function fn(mn,En){en(this,fn),En.modules.toolbar!=null&&En.modules.toolbar.container==null&&(En.modules.toolbar.container=rn);var Sn=tn(this,(fn.__proto__||Object.getPrototypeOf(fn)).call(this,mn,En));return Sn.quill.container.classList.add("ql-snow"),Sn}return ft(fn,[{key:"extendToolbar",value:function(En){En.container.classList.add("ql-snow"),this.buildButtons([].slice.call(En.container.querySelectorAll("button")),Ut.default),this.buildPickers([].slice.call(En.container.querySelectorAll("select")),Ut.default),this.tooltip=new dn(this.quill,this.options.bounds),En.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Sn,wn){En.handlers.link.call(En,!wn.format.link)})}}]),fn}(Ft.default);on.DEFAULTS=(0,kt.default)(!0,{},Ft.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(fn){if(fn){var mn=this.quill.getSelection();if(mn==null||mn.length==0)return;var En=this.quill.getText(mn);/^\S+@\S+\.\S+$/.test(En)&&En.indexOf("mailto:")!==0&&(En="mailto:"+En);var Sn=this.quill.theme.tooltip;Sn.edit("link",En)}else this.quill.format("link",!1)}}}}});var dn=function(cn){nn(fn,cn);function fn(mn,En){en(this,fn);var Sn=tn(this,(fn.__proto__||Object.getPrototypeOf(fn)).call(this,mn,En));return Sn.preview=Sn.root.querySelector("a.ql-preview"),Sn}return ft(fn,[{key:"listen",value:function(){var En=this;dt(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Sn){En.root.classList.contains("ql-editing")?En.save():En.edit("link",En.preview.textContent),Sn.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Sn){if(En.linkRange!=null){var wn=En.linkRange;En.restoreFocus(),En.quill.formatText(wn,"link",!1,jt.default.sources.USER),delete En.linkRange}Sn.preventDefault(),En.hide()}),this.quill.on(jt.default.events.SELECTION_CHANGE,function(Sn,wn,hn){if(Sn!=null){if(Sn.length===0&&hn===jt.default.sources.USER){var yn=En.quill.scroll.descendant(zt.default,Sn.index),an=ut(yn,2),un=an[0],bn=an[1];if(un!=null){En.linkRange=new Kt.Range(Sn.index-bn,un.length());var pn=zt.default.formats(un.domNode);En.preview.textContent=pn,En.preview.setAttribute("href",pn),En.show(),En.position(En.quill.getBounds(En.linkRange));return}}else delete En.linkRange;En.hide()}})}},{key:"show",value:function(){dt(fn.prototype.__proto__||Object.getPrototypeOf(fn.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),fn}(Rt.BaseTooltip);dn.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),ot.default=on},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(29),dt=Wn(ut),ft=ct(36),St=ct(38),kt=ct(64),Tt=ct(65),jt=Wn(Tt),Rt=ct(66),Ft=Wn(Rt),$t=ct(67),zt=Wn($t),Kt=ct(37),Bt=ct(26),Ut=ct(39),Jt=ct(40),en=ct(56),tn=Wn(en),nn=ct(68),rn=Wn(nn),on=ct(27),dn=Wn(on),cn=ct(69),fn=Wn(cn),mn=ct(70),En=Wn(mn),Sn=ct(71),wn=Wn(Sn),hn=ct(72),yn=Wn(hn),an=ct(73),un=Wn(an),bn=ct(13),pn=Wn(bn),kn=ct(74),_n=Wn(kn),Rn=ct(75),Nn=Wn(Rn),Cn=ct(57),Mn=Wn(Cn),In=ct(41),On=Wn(In),jn=ct(28),Gn=Wn(jn),Jn=ct(59),Un=Wn(Jn),Hn=ct(60),ir=Wn(Hn),ur=ct(61),yr=Wn(ur),Bn=ct(108),zn=Wn(Bn),Kn=ct(62),Yn=Wn(Kn);function Wn(lr){return lr&&lr.__esModule?lr:{default:lr}}dt.default.register({"attributors/attribute/direction":St.DirectionAttribute,"attributors/class/align":ft.AlignClass,"attributors/class/background":Kt.BackgroundClass,"attributors/class/color":Bt.ColorClass,"attributors/class/direction":St.DirectionClass,"attributors/class/font":Ut.FontClass,"attributors/class/size":Jt.SizeClass,"attributors/style/align":ft.AlignStyle,"attributors/style/background":Kt.BackgroundStyle,"attributors/style/color":Bt.ColorStyle,"attributors/style/direction":St.DirectionStyle,"attributors/style/font":Ut.FontStyle,"attributors/style/size":Jt.SizeStyle},!0),dt.default.register({"formats/align":ft.AlignClass,"formats/direction":St.DirectionClass,"formats/indent":kt.IndentClass,"formats/background":Kt.BackgroundStyle,"formats/color":Bt.ColorStyle,"formats/font":Ut.FontClass,"formats/size":Jt.SizeClass,"formats/blockquote":jt.default,"formats/code-block":pn.default,"formats/header":Ft.default,"formats/list":zt.default,"formats/bold":tn.default,"formats/code":bn.Code,"formats/italic":rn.default,"formats/link":dn.default,"formats/script":fn.default,"formats/strike":En.default,"formats/underline":wn.default,"formats/image":yn.default,"formats/video":un.default,"formats/list/item":$t.ListItem,"modules/formula":_n.default,"modules/syntax":Nn.default,"modules/toolbar":Mn.default,"themes/bubble":zn.default,"themes/snow":Yn.default,"ui/icons":On.default,"ui/picker":Gn.default,"ui/icon-picker":ir.default,"ui/color-picker":Un.default,"ui/tooltip":yr.default},!0),ot.default=dt.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.IndentClass=void 0;var ut=function(){function zt(Kt,Bt){for(var Ut=0;Ut<Bt.length;Ut++){var Jt=Bt[Ut];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}}return function(Kt,Bt,Ut){return Bt&&zt(Kt.prototype,Bt),Ut&&zt(Kt,Ut),Kt}}(),dt=function zt(Kt,Bt,Ut){Kt===null&&(Kt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Kt,Bt);if(Jt===void 0){var en=Object.getPrototypeOf(Kt);return en===null?void 0:zt(en,Bt,Ut)}else{if("value"in Jt)return Jt.value;var tn=Jt.get;return tn===void 0?void 0:tn.call(Ut)}},ft=ct(0),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Kt){if(!(zt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function jt(zt,Kt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:zt}function Rt(zt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);zt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Kt):zt.__proto__=Kt)}var Ft=function(zt){Rt(Kt,zt);function Kt(){return Tt(this,Kt),jt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ut(Kt,[{key:"add",value:function(Ut,Jt){if(Jt==="+1"||Jt==="-1"){var en=this.value(Ut)||0;Jt=Jt==="+1"?en+1:en-1}return Jt===0?(this.remove(Ut),!0):dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"add",this).call(this,Ut,Jt)}},{key:"canAdd",value:function(Ut,Jt){return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"canAdd",this).call(this,Ut,Jt)||dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"canAdd",this).call(this,Ut,parseInt(Jt))}},{key:"value",value:function(Ut){return parseInt(dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"value",this).call(this,Ut))||void 0}}]),Kt}(St.default.Attributor.Class),$t=new Ft("indent","ql-indent",{scope:St.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});ot.IndentClass=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(4),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function St(Rt,Ft){if(!(Rt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(Rt,Ft){if(!Rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:Rt}function Tt(Rt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);Rt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(Rt,Ft):Rt.__proto__=Ft)}var jt=function(Rt){Tt(Ft,Rt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);jt.blotName="blockquote",jt.tagName="blockquote",ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft($t,zt){for(var Kt=0;Kt<zt.length;Kt++){var Bt=zt[Kt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty($t,Bt.key,Bt)}}return function($t,zt,Kt){return zt&&Ft($t.prototype,zt),Kt&&Ft($t,Kt),$t}}(),dt=ct(4),ft=St(dt);function St(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function kt(Ft,$t){if(!(Ft instanceof $t))throw new TypeError("Cannot call a class as a function")}function Tt(Ft,$t){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:Ft}function jt(Ft,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);Ft.prototype=Object.create($t&&$t.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,$t):Ft.__proto__=$t)}var Rt=function(Ft){jt($t,Ft);function $t(){return kt(this,$t),Tt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return ut($t,null,[{key:"formats",value:function(Kt){return this.tagName.indexOf(Kt.tagName)+1}}]),$t}(ft.default);Rt.blotName="header",Rt.tagName=["H1","H2","H3","H4","H5","H6"],ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.ListItem=void 0;var ut=function(){function en(tn,nn){for(var rn=0;rn<nn.length;rn++){var on=nn[rn];on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(tn,on.key,on)}}return function(tn,nn,rn){return nn&&en(tn.prototype,nn),rn&&en(tn,rn),tn}}(),dt=function en(tn,nn,rn){tn===null&&(tn=Function.prototype);var on=Object.getOwnPropertyDescriptor(tn,nn);if(on===void 0){var dn=Object.getPrototypeOf(tn);return dn===null?void 0:en(dn,nn,rn)}else{if("value"in on)return on.value;var cn=on.get;return cn===void 0?void 0:cn.call(rn)}},ft=ct(0),St=Ft(ft),kt=ct(4),Tt=Ft(kt),jt=ct(25),Rt=Ft(jt);function Ft(en){return en&&en.__esModule?en:{default:en}}function $t(en,tn,nn){return tn in en?Object.defineProperty(en,tn,{value:nn,enumerable:!0,configurable:!0,writable:!0}):en[tn]=nn,en}function zt(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}function Kt(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&(typeof tn=="object"||typeof tn=="function")?tn:en}function Bt(en,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}var Ut=function(en){Bt(tn,en);function tn(){return zt(this,tn),Kt(this,(tn.__proto__||Object.getPrototypeOf(tn)).apply(this,arguments))}return ut(tn,[{key:"format",value:function(rn,on){rn===Jt.blotName&&!on?this.replaceWith(St.default.create(this.statics.scope)):dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"format",this).call(this,rn,on)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(rn,on){return this.parent.isolate(this.offset(this.parent),this.length()),rn===this.parent.statics.blotName?(this.parent.replaceWith(rn,on),this):(this.parent.unwrap(),dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"replaceWith",this).call(this,rn,on))}}],[{key:"formats",value:function(rn){return rn.tagName===this.tagName?void 0:dt(tn.__proto__||Object.getPrototypeOf(tn),"formats",this).call(this,rn)}}]),tn}(Tt.default);Ut.blotName="list-item",Ut.tagName="LI";var Jt=function(en){Bt(tn,en),ut(tn,null,[{key:"create",value:function(rn){var on=rn==="ordered"?"OL":"UL",dn=dt(tn.__proto__||Object.getPrototypeOf(tn),"create",this).call(this,on);return(rn==="checked"||rn==="unchecked")&&dn.setAttribute("data-checked",rn==="checked"),dn}},{key:"formats",value:function(rn){if(rn.tagName==="OL")return"ordered";if(rn.tagName==="UL")return rn.hasAttribute("data-checked")?rn.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function tn(nn){zt(this,tn);var rn=Kt(this,(tn.__proto__||Object.getPrototypeOf(tn)).call(this,nn)),on=function(cn){if(cn.target.parentNode===nn){var fn=rn.statics.formats(nn),mn=St.default.find(cn.target);fn==="checked"?mn.format("list","unchecked"):fn==="unchecked"&&mn.format("list","checked")}};return nn.addEventListener("touchstart",on),nn.addEventListener("mousedown",on),rn}return ut(tn,[{key:"format",value:function(rn,on){this.children.length>0&&this.children.tail.format(rn,on)}},{key:"formats",value:function(){return $t({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(rn,on){if(rn instanceof Ut)dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"insertBefore",this).call(this,rn,on);else{var dn=on==null?this.length():on.offset(this),cn=this.split(dn);cn.parent.insertBefore(rn,cn)}}},{key:"optimize",value:function(rn){dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"optimize",this).call(this,rn);var on=this.next;on!=null&&on.prev===this&&on.statics.blotName===this.statics.blotName&&on.domNode.tagName===this.domNode.tagName&&on.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(on.moveChildren(this),on.remove())}},{key:"replace",value:function(rn){if(rn.statics.blotName!==this.statics.blotName){var on=St.default.create(this.statics.defaultChild);rn.moveChildren(on),this.appendChild(on)}dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"replace",this).call(this,rn)}}]),tn}(Rt.default);Jt.blotName="list",Jt.scope=St.default.Scope.BLOCK_BLOT,Jt.tagName=["OL","UL"],Jt.defaultChild="list-item",Jt.allowedChildren=[Ut],ot.ListItem=Ut,ot.default=Jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(56),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function St(Rt,Ft){if(!(Rt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(Rt,Ft){if(!Rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:Rt}function Tt(Rt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);Rt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(Rt,Ft):Rt.__proto__=Ft)}var jt=function(Rt){Tt(Ft,Rt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);jt.blotName="italic",jt.tagName=["EM","I"],ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(zt,Ut.key,Ut)}}return function(zt,Kt,Bt){return Kt&&$t(zt.prototype,Kt),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Kt,Bt){zt===null&&(zt=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(zt,Kt);if(Ut===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var en=Ut.get;return en===void 0?void 0:en.call(Bt)}},ft=ct(6),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function jt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function Rt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){Rt(zt,$t);function zt(){return Tt(this,zt),jt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,null,[{key:"create",value:function(Bt){return Bt==="super"?document.createElement("sup"):Bt==="sub"?document.createElement("sub"):dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this,Bt)}},{key:"formats",value:function(Bt){if(Bt.tagName==="SUB")return"sub";if(Bt.tagName==="SUP")return"super"}}]),zt}(St.default);Ft.blotName="script",Ft.tagName=["SUB","SUP"],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function St(Rt,Ft){if(!(Rt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(Rt,Ft){if(!Rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:Rt}function Tt(Rt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);Rt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(Rt,Ft):Rt.__proto__=Ft)}var jt=function(Rt){Tt(Ft,Rt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);jt.blotName="strike",jt.tagName="S",ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function St(Rt,Ft){if(!(Rt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(Rt,Ft){if(!Rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:Rt}function Tt(Rt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);Rt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(Rt,Ft):Rt.__proto__=Ft)}var jt=function(Rt){Tt(Ft,Rt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);jt.blotName="underline",jt.tagName="U",ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Jt=0;Jt<Ut.length;Jt++){var en=Ut[Jt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Bt,en.key,en)}}return function(Bt,Ut,Jt){return Ut&&Kt(Bt.prototype,Ut),Jt&&Kt(Bt,Jt),Bt}}(),dt=function Kt(Bt,Ut,Jt){Bt===null&&(Bt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Bt,Ut);if(en===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Kt(tn,Ut,Jt)}else{if("value"in en)return en.value;var nn=en.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(0),St=Tt(ft),kt=ct(27);function Tt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function jt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Rt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function Ft(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var $t=["alt","height","width"],zt=function(Kt){Ft(Bt,Kt);function Bt(){return jt(this,Bt),Rt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Jt,en){$t.indexOf(Jt)>-1?en?this.domNode.setAttribute(Jt,en):this.domNode.removeAttribute(Jt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Jt,en)}}],[{key:"create",value:function(Jt){var en=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Jt);return typeof Jt=="string"&&en.setAttribute("src",this.sanitize(Jt)),en}},{key:"formats",value:function(Jt){return $t.reduce(function(en,tn){return Jt.hasAttribute(tn)&&(en[tn]=Jt.getAttribute(tn)),en},{})}},{key:"match",value:function(Jt){return/\.(jpe?g|gif|png)$/.test(Jt)||/^data:image\/.+;base64/.test(Jt)}},{key:"sanitize",value:function(Jt){return(0,kt.sanitize)(Jt,["http","https","data"])?Jt:"//:0"}},{key:"value",value:function(Jt){return Jt.getAttribute("src")}}]),Bt}(St.default.Embed);zt.blotName="image",zt.tagName="IMG",ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Jt=0;Jt<Ut.length;Jt++){var en=Ut[Jt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Bt,en.key,en)}}return function(Bt,Ut,Jt){return Ut&&Kt(Bt.prototype,Ut),Jt&&Kt(Bt,Jt),Bt}}(),dt=function Kt(Bt,Ut,Jt){Bt===null&&(Bt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Bt,Ut);if(en===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Kt(tn,Ut,Jt)}else{if("value"in en)return en.value;var nn=en.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(4),St=ct(27),kt=Tt(St);function Tt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function jt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Rt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function Ft(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var $t=["height","width"],zt=function(Kt){Ft(Bt,Kt);function Bt(){return jt(this,Bt),Rt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Jt,en){$t.indexOf(Jt)>-1?en?this.domNode.setAttribute(Jt,en):this.domNode.removeAttribute(Jt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Jt,en)}}],[{key:"create",value:function(Jt){var en=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Jt);return en.setAttribute("frameborder","0"),en.setAttribute("allowfullscreen",!0),en.setAttribute("src",this.sanitize(Jt)),en}},{key:"formats",value:function(Jt){return $t.reduce(function(en,tn){return Jt.hasAttribute(tn)&&(en[tn]=Jt.getAttribute(tn)),en},{})}},{key:"sanitize",value:function(Jt){return kt.default.sanitize(Jt)}},{key:"value",value:function(Jt){return Jt.getAttribute("src")}}]),Bt}(ft.BlockEmbed);zt.blotName="video",zt.className="ql-video",zt.tagName="IFRAME",ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.FormulaBlot=void 0;var ut=function(){function Jt(en,tn){for(var nn=0;nn<tn.length;nn++){var rn=tn[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(en,rn.key,rn)}}return function(en,tn,nn){return tn&&Jt(en.prototype,tn),nn&&Jt(en,nn),en}}(),dt=function Jt(en,tn,nn){en===null&&(en=Function.prototype);var rn=Object.getOwnPropertyDescriptor(en,tn);if(rn===void 0){var on=Object.getPrototypeOf(en);return on===null?void 0:Jt(on,tn,nn)}else{if("value"in rn)return rn.value;var dn=rn.get;return dn===void 0?void 0:dn.call(nn)}},ft=ct(35),St=Ft(ft),kt=ct(5),Tt=Ft(kt),jt=ct(9),Rt=Ft(jt);function Ft(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function $t(Jt,en){if(!(Jt instanceof en))throw new TypeError("Cannot call a class as a function")}function zt(Jt,en){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&(typeof en=="object"||typeof en=="function")?en:Jt}function Kt(Jt,en){if(typeof en!="function"&&en!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof en);Jt.prototype=Object.create(en&&en.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,en):Jt.__proto__=en)}var Bt=function(Jt){Kt(en,Jt);function en(){return $t(this,en),zt(this,(en.__proto__||Object.getPrototypeOf(en)).apply(this,arguments))}return ut(en,null,[{key:"create",value:function(nn){var rn=dt(en.__proto__||Object.getPrototypeOf(en),"create",this).call(this,nn);return typeof nn=="string"&&(window.katex.render(nn,rn,{throwOnError:!1,errorColor:"#f00"}),rn.setAttribute("data-value",nn)),rn}},{key:"value",value:function(nn){return nn.getAttribute("data-value")}}]),en}(St.default);Bt.blotName="formula",Bt.className="ql-formula",Bt.tagName="SPAN";var Ut=function(Jt){Kt(en,Jt),ut(en,null,[{key:"register",value:function(){Tt.default.register(Bt,!0)}}]);function en(){$t(this,en);var tn=zt(this,(en.__proto__||Object.getPrototypeOf(en)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return tn}return en}(Rt.default);ot.FormulaBlot=Bt,ot.default=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.CodeToken=ot.CodeBlock=void 0;var ut=function(){function nn(rn,on){for(var dn=0;dn<on.length;dn++){var cn=on[dn];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(rn,cn.key,cn)}}return function(rn,on,dn){return on&&nn(rn.prototype,on),dn&&nn(rn,dn),rn}}(),dt=function nn(rn,on,dn){rn===null&&(rn=Function.prototype);var cn=Object.getOwnPropertyDescriptor(rn,on);if(cn===void 0){var fn=Object.getPrototypeOf(rn);return fn===null?void 0:nn(fn,on,dn)}else{if("value"in cn)return cn.value;var mn=cn.get;return mn===void 0?void 0:mn.call(dn)}},ft=ct(0),St=zt(ft),kt=ct(5),Tt=zt(kt),jt=ct(9),Rt=zt(jt),Ft=ct(13),$t=zt(Ft);function zt(nn){return nn&&nn.__esModule?nn:{default:nn}}function Kt(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}function Bt(nn,rn){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&(typeof rn=="object"||typeof rn=="function")?rn:nn}function Ut(nn,rn){if(typeof rn!="function"&&rn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof rn);nn.prototype=Object.create(rn&&rn.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),rn&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,rn):nn.__proto__=rn)}var Jt=function(nn){Ut(rn,nn);function rn(){return Kt(this,rn),Bt(this,(rn.__proto__||Object.getPrototypeOf(rn)).apply(this,arguments))}return ut(rn,[{key:"replaceWith",value:function(dn){this.domNode.textContent=this.domNode.textContent,this.attach(),dt(rn.prototype.__proto__||Object.getPrototypeOf(rn.prototype),"replaceWith",this).call(this,dn)}},{key:"highlight",value:function(dn){var cn=this.domNode.textContent;this.cachedText!==cn&&((cn.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=dn(cn),this.domNode.normalize(),this.attach()),this.cachedText=cn)}}]),rn}($t.default);Jt.className="ql-syntax";var en=new St.default.Attributor.Class("token","hljs",{scope:St.default.Scope.INLINE}),tn=function(nn){Ut(rn,nn),ut(rn,null,[{key:"register",value:function(){Tt.default.register(en,!0),Tt.default.register(Jt,!0)}}]);function rn(on,dn){Kt(this,rn);var cn=Bt(this,(rn.__proto__||Object.getPrototypeOf(rn)).call(this,on,dn));if(typeof cn.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var fn=null;return cn.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(fn),fn=setTimeout(function(){cn.highlight(),fn=null},cn.options.interval)}),cn.highlight(),cn}return ut(rn,[{key:"highlight",value:function(){var dn=this;if(!this.quill.selection.composing){this.quill.update(Tt.default.sources.USER);var cn=this.quill.getSelection();this.quill.scroll.descendants(Jt).forEach(function(fn){fn.highlight(dn.options.highlight)}),this.quill.update(Tt.default.sources.SILENT),cn!=null&&this.quill.setSelection(cn,Tt.default.sources.SILENT)}}}]),rn}(Rt.default);tn.DEFAULTS={highlight:function(){return window.hljs==null?null:function(nn){var rn=window.hljs.highlightAuto(nn);return rn.value}}(),interval:1e3},ot.CodeBlock=Jt,ot.CodeToken=en,ot.default=tn},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BubbleTooltip=void 0;var ut=function rn(on,dn,cn){on===null&&(on=Function.prototype);var fn=Object.getOwnPropertyDescriptor(on,dn);if(fn===void 0){var mn=Object.getPrototypeOf(on);return mn===null?void 0:rn(mn,dn,cn)}else{if("value"in fn)return fn.value;var En=fn.get;return En===void 0?void 0:En.call(cn)}},dt=function(){function rn(on,dn){for(var cn=0;cn<dn.length;cn++){var fn=dn[cn];fn.enumerable=fn.enumerable||!1,fn.configurable=!0,"value"in fn&&(fn.writable=!0),Object.defineProperty(on,fn.key,fn)}}return function(on,dn,cn){return dn&&rn(on.prototype,dn),cn&&rn(on,cn),on}}(),ft=ct(3),St=Kt(ft),kt=ct(8),Tt=Kt(kt),jt=ct(43),Rt=Kt(jt),Ft=ct(15),$t=ct(41),zt=Kt($t);function Kt(rn){return rn&&rn.__esModule?rn:{default:rn}}function Bt(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}function Ut(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&(typeof on=="object"||typeof on=="function")?on:rn}function Jt(rn,on){if(typeof on!="function"&&on!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof on);rn.prototype=Object.create(on&&on.prototype,{constructor:{value:rn,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(rn,on):rn.__proto__=on)}var en=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],tn=function(rn){Jt(on,rn);function on(dn,cn){Bt(this,on),cn.modules.toolbar!=null&&cn.modules.toolbar.container==null&&(cn.modules.toolbar.container=en);var fn=Ut(this,(on.__proto__||Object.getPrototypeOf(on)).call(this,dn,cn));return fn.quill.container.classList.add("ql-bubble"),fn}return dt(on,[{key:"extendToolbar",value:function(cn){this.tooltip=new nn(this.quill,this.options.bounds),this.tooltip.root.appendChild(cn.container),this.buildButtons([].slice.call(cn.container.querySelectorAll("button")),zt.default),this.buildPickers([].slice.call(cn.container.querySelectorAll("select")),zt.default)}}]),on}(Rt.default);tn.DEFAULTS=(0,St.default)(!0,{},Rt.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(on){on?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var nn=function(rn){Jt(on,rn);function on(dn,cn){Bt(this,on);var fn=Ut(this,(on.__proto__||Object.getPrototypeOf(on)).call(this,dn,cn));return fn.quill.on(Tt.default.events.EDITOR_CHANGE,function(mn,En,Sn,wn){if(mn===Tt.default.events.SELECTION_CHANGE)if(En!=null&&En.length>0&&wn===Tt.default.sources.USER){fn.show(),fn.root.style.left="0px",fn.root.style.width="",fn.root.style.width=fn.root.offsetWidth+"px";var hn=fn.quill.getLines(En.index,En.length);if(hn.length===1)fn.position(fn.quill.getBounds(En));else{var yn=hn[hn.length-1],an=fn.quill.getIndex(yn),un=Math.min(yn.length()-1,En.index+En.length-an),bn=fn.quill.getBounds(new Ft.Range(an,un));fn.position(bn)}}else document.activeElement!==fn.textbox&&fn.quill.hasFocus()&&fn.hide()}),fn}return dt(on,[{key:"listen",value:function(){var cn=this;ut(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){cn.root.classList.remove("ql-editing")}),this.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!cn.root.classList.contains("ql-hidden")){var fn=cn.quill.getSelection();fn!=null&&cn.position(cn.quill.getBounds(fn))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(cn){var fn=ut(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"position",this).call(this,cn),mn=this.root.querySelector(".ql-tooltip-arrow");if(mn.style.marginLeft="",fn===0)return fn;mn.style.marginLeft=-1*fn-mn.offsetWidth/2+"px"}}]),on}(jt.BaseTooltip);nn.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),ot.BubbleTooltip=nn,ot.default=tn},function(et,ot,ct){et.exports=ct(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var it=function(g,et){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ct){ot.__proto__=ct}||function(ot,ct){for(var ut in ct)ct.hasOwnProperty(ut)&&(ot[ut]=ct[ut])},it(g,et)};return function(g,et){it(g,et);function ot(){this.constructor=g}g.prototype=et===null?Object.create(et):(ot.prototype=et.prototype,new ot)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(it){for(var g,et=1,ot=arguments.length;et<ot;et++){g=arguments[et];for(var ct in g)Object.prototype.hasOwnProperty.call(g,ct)&&(it[ct]=g[ct])}return it},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ct=0,g=0;g<et;g++)for(var ut=arguments[g],dt=0,ft=ut.length;dt<ft;dt++,ct++)ot[ct]=ut[dt];return ot},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(it){__extends(g,it);function g(et){var ot=it.call(this,et)||this;ot.dirtyProps=["modules","formats","bounds","theme","children"],ot.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],ot.state={generation:0},ot.selection=null,ot.onEditorChange=function(ut,dt,ft,St){var kt,Tt,jt,Rt;ut==="text-change"?(Tt=(kt=ot).onEditorChangeText)===null||Tt===void 0||Tt.call(kt,ot.editor.root.innerHTML,dt,St,ot.unprivilegedEditor):ut==="selection-change"&&((Rt=(jt=ot).onEditorChangeSelection)===null||Rt===void 0||Rt.call(jt,dt,St,ot.unprivilegedEditor))};var ct=ot.isControlled()?et.value:et.defaultValue;return ot.value=ct??"",ot}return g.prototype.validateProps=function(et){var ot;if(react_1.default.Children.count(et.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(et.children)){var ct=react_1.default.Children.only(et.children);if(((ot=ct)===null||ot===void 0?void 0:ot.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&et.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(et,ot){var ct=this,ut;if(this.validateProps(et),!this.editor||this.state.generation!==ot.generation)return!0;if("value"in et){var dt=this.getEditorContents(),ft=(ut=et.value,ut??"");this.isEqualValue(ft,dt)||this.setEditorContents(this.editor,ft)}return et.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,et.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(St){return!isEqual_1.default(et[St],ct.props[St])})},g.prototype.shouldComponentRegenerate=function(et){var ot=this;return this.dirtyProps.some(function(ct){return!isEqual_1.default(et[ct],ot.props[ct])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(et,ot){var ct=this;if(this.editor&&this.shouldComponentRegenerate(et)){var ut=this.editor.getContents(),dt=this.editor.getSelection();this.regenerationSnapshot={delta:ut,selection:dt},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==ot.generation){var ft=this.regenerationSnapshot,ut=ft.delta,St=ft.selection;delete this.regenerationSnapshot,this.instantiateEditor();var kt=this.editor;kt.setContents(ut),postpone(function(){return ct.setEditorSelection(kt,St)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(et,ot){var ct=new quill_1.default(et,ot);return ot.tabIndex!=null&&this.setEditorTabIndex(ct,ot.tabIndex),this.hookEditor(ct),ct},g.prototype.hookEditor=function(et){this.unprivilegedEditor=this.makeUnprivilegedEditor(et),et.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(et){et.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(et){return et&&et.ops},g.prototype.isEqualValue=function(et,ot){return this.isDelta(et)&&this.isDelta(ot)?isEqual_1.default(et.ops,ot.ops):isEqual_1.default(et,ot)},g.prototype.setEditorContents=function(et,ot){var ct=this;this.value=ot;var ut=this.getEditorSelection();typeof ot=="string"?et.setContents(et.clipboard.convert(ot)):et.setContents(ot),postpone(function(){return ct.setEditorSelection(et,ut)})},g.prototype.setEditorSelection=function(et,ot){if(this.selection=ot,ot){var ct=et.getLength();ot.index=Math.max(0,Math.min(ot.index,ct-1)),ot.length=Math.max(0,Math.min(ot.length,ct-1-ot.index)),et.setSelection(ot)}},g.prototype.setEditorTabIndex=function(et,ot){var ct,ut;!((ut=(ct=et)===null||ct===void 0?void 0:ct.scroll)===null||ut===void 0)&&ut.domNode&&(et.scroll.domNode.tabIndex=ot)},g.prototype.setEditorReadOnly=function(et,ot){ot?et.disable():et.enable()},g.prototype.makeUnprivilegedEditor=function(et){var ot=et;return{getHTML:function(){return ot.root.innerHTML},getLength:ot.getLength.bind(ot),getText:ot.getText.bind(ot),getContents:ot.getContents.bind(ot),getSelection:ot.getSelection.bind(ot),getBounds:ot.getBounds.bind(ot)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var et=react_dom_1.default.findDOMNode(this.editingArea);if(!et)throw new Error("Cannot find element for editing area");if(et.nodeType===3)throw new Error("Editing area cannot be a text node");return et},g.prototype.renderEditingArea=function(){var et=this,ot=this.props,ct=ot.children,ut=ot.preserveWhitespace,dt=this.state.generation,ft={key:dt,ref:function(St){et.editingArea=St}};return react_1.default.Children.count(ct)?react_1.default.cloneElement(react_1.default.Children.only(ct),ft):ut?react_1.default.createElement("pre",__assign({},ft)):react_1.default.createElement("div",__assign({},ft))},g.prototype.render=function(){var et;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(et=this.props.className,et??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(et,ot,ct,ut){var dt,ft;if(this.editor){var St=this.isDelta(this.value)?ut.getContents():ut.getHTML();St!==this.getEditorContents()&&(this.lastDeltaChangeSet=ot,this.value=St,(ft=(dt=this.props).onChange)===null||ft===void 0||ft.call(dt,et,ot,ct,ut))}},g.prototype.onEditorChangeSelection=function(et,ot,ct){var ut,dt,ft,St,kt,Tt;if(this.editor){var jt=this.getEditorSelection(),Rt=!jt&&et,Ft=jt&&!et;isEqual_1.default(et,jt)||(this.selection=et,(dt=(ut=this.props).onChangeSelection)===null||dt===void 0||dt.call(ut,et,ot,ct),Rt?(St=(ft=this.props).onFocus)===null||St===void 0||St.call(ft,et,ot,ct):Ft&&((Tt=(kt=this.props).onBlur)===null||Tt===void 0||Tt.call(kt,jt,ot,ct)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=quill_1.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(react_1.default.Component);function postpone(it){Promise.resolve().then(it)}var lib=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib),quill_snow="";function LogoUploader({logoPreview:it,setLogo:g,setLogoPreview:et}){const ot=reactExports.useRef(null),ct=dt=>{const ft=dt.target.files[0];if(!ft)return;if(ft.size>2*1024*1024){y$4.error("File must be less than 2MB"),dt.target.value="";return}const St=new Image;St.onload=()=>{if(St.width>512||St.height>512){y$4.warning("Logo too large! Please use up to 512×512 px."),dt.target.value="";return}const kt=new FileReader;kt.onloadend=()=>{g(kt.result),et(kt.result)},kt.readAsDataURL(ft)},St.src=URL.createObjectURL(ft)},ut=()=>{g(null),et(null),ot.current&&(ot.current.value=""),y$4.info("Logo removed")};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Brand Logo (Max 512×512 – 2 MB)"}),jsxRuntimeExports.jsx("input",{ref:ot,type:"file",accept:"image/png, image/jpeg, image/webp",onChange:ct,className:`block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0 file:font-semibold
                   file:bg-royalPurple file:text-white hover:file:opacity-80`}),it&&jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-col items-center space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:it,alt:"Logo preview",className:"w-20 h-20 object-contain border border-gray-700 rounded-md"}),jsxRuntimeExports.jsx("button",{onClick:ut,type:"button",className:"absolute -top-2 -right-2 bg-gray-900 rounded-full p-1 hover:bg-gray-800",title:"Remove",children:jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400 hover:text-red-300"})})]})})]})}function UnsplashImagePicker({onSelect:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(1),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),jt=reactExports.useRef(null);async function Rt($t=1,zt=!1){if(g.trim()){St(!0);try{const Kt=await axiosInstance.get(`https://cre8tlystudio.com/api/unsplash/search?query=${encodeURIComponent(g)}&per_page=30&page=${$t}`),Bt=Kt.data.results||Kt.data;(!Bt||Bt.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),ct(Ut=>zt?[...Ut,...Bt]:Bt),Tt(Bt.length>0),dt($t)}catch(Kt){console.error("Unsplash fetch failed:",Kt),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{St(!1)}}}const Ft=()=>{ct([]),dt(1),Rt(1,!1)};return reactExports.useEffect(()=>{if(!jt.current)return;const $t=new IntersectionObserver(zt=>{zt[0].isIntersecting&&kt&&!ft&&Rt(ut+1,!0)});return $t.observe(jt.current),()=>$t.disconnect()},[kt,ft,ut,g]),jsxRuntimeExports.jsxs("div",{className:"space-y-4 bg-[#111] p-4 rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{value:g,onChange:$t=>et($t.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:"flex-1 bg-gray-900 text-white p-2 rounded-lg border border-gray-700"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ft,disabled:ft,className:"bg-green text-black font-bold px-4 py-2 rounded-lg transition hover:bg-green-400",children:ft?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto relative",style:{maxHeight:"400px"},children:[ot.map($t=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>it($t.urls.full,$t),children:[jsxRuntimeExports.jsx("img",{src:$t.urls.small,alt:$t.alt_description,className:"rounded-lg w-full h-40 object-cover group-hover:opacity-75 transition"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/60 px-1 rounded text-white",children:$t.user.name})]},$t.id)),kt&&!ft&&jsxRuntimeExports.jsx("div",{ref:jt,className:"col-span-full h-8"}),ft&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-green rounded-full animate-spin"})})]})]})}function CoverUpload({setCover:it}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(null),{user:ut}=useAuth(),dt=reactExports.useRef(null),ft=useNavigate(),St=!(ut!=null&&ut.pro_covers),kt=Rt=>{const Ft=Rt.target.files[0];if(!Ft)return;if(Ft.size>1e3*1024*1024){y$4.error("File too large. Maximum 1GB allowed.");return}const $t=new FileReader;$t.onloadend=()=>{it($t.result),et($t.result),ct(null)},$t.readAsDataURL(Ft)},Tt=()=>ft("/plans"),jt=(Rt,Ft)=>{it(Rt),et(Ft.urls.small),ct({name:Ft.user.name,profile:Ft.user.links.html}),y$4.success("Cover image selected!")};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6 border border-gray-700 rounded-xl p-4 bg-gray-900/60 overflow-hidden",children:[St&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Tt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Unlock Pro Covers"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-300 font-semibold text-lg tracking-wide",children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(Max 667 × 1000)"})]}),jsxRuntimeExports.jsx("span",{className:`bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                     text-black font-semibold text-xs px-3 py-1 rounded-full
                     shadow-[0_0_10px_rgba(168,130,255,0.6)]
                     border border-[#d2b6ff]/60 uppercase tracking-wider
                     ${St?"opacity-60":""}`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:dt,type:"file",accept:"image/*",onChange:kt,className:"hidden",disabled:St}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!St&&dt.current.click(),disabled:St,className:`px-5 py-2 rounded-md font-semibold text-sm shadow-md transition cursor-pointer flex items-center gap-2 
          ${St?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-green"}`,children:[jsxRuntimeExports.jsx(Image$3,{size:16})," Choose File"]}),!St&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:jt})}),g&&!St&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cover will appear before your first page."}),ot&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:ot.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:ot.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:"Unsplash"})]})]})]})}function PromptSelect({setText:it}){const[g,et]=reactExports.useState(!1),ot=(ct,ut)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-widest text-gray-300 bg-[#0a0a0a] sticky top-0 z-10 border-b border-gray-800",children:ct}),ut.map((dt,ft)=>jsxRuntimeExports.jsx("li",{onClick:()=>{it(dt.text),et(!1)},className:"px-4 py-2 text-gray-200 bg-[#0a0a0a] hover:bg-gradient-to-r from-[#00e07a] to-[#670fe7] hover:text-white cursor-pointer transition",children:dt.label},ft))]});return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Choose a Pre-Made Prompt"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>et(!g),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 text-left flex justify-between items-center hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx("span",{children:"Select a pre-made prompt..."}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),g&&jsxRuntimeExports.jsxs("ul",{className:`absolute z-50 mt-1 w-full max-h-60 overflow-y-auto 
                     rounded-lg border border-gray-700 shadow-lg
                     scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900`,style:{backgroundColor:"#0a0a0a",boxShadow:"0 0 25px rgba(0,0,0,0.7)"},children:[ot("Beginner",cannedPrompts.beginner),ot("Professional",cannedPrompts.professional),ot("Advanced",cannedPrompts.expert)]})]})}function ColorThemeChooser({bgTheme:it,setBgTheme:g}){const et=colorThemes.find(ot=>ot.name===it)||colorThemes[0];return jsxRuntimeExports.jsxs("div",{className:"mt-6 w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3 font-medium",children:"Theme Color"}),jsxRuntimeExports.jsx("div",{className:"h-14 w-full rounded-lg border border-gray-700 mb-4 shadow-inner transition-all duration-300",style:{backgroundColor:et.preview}}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 overflow-y-auto rounded-lg border border-gray-800 p-2",style:{maxHeight:"300px"},children:colorThemes.map(ot=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(ot.name),className:`relative w-full h-12 rounded-lg transition-all duration-200 focus:outline-none border shadow-[inset_0_1px_3px_rgba(255,255,255,0.2)] 
              ${it===ot.name?"border-green-400 ring-2 ring-green-500/60 scale-[1.05]":"border-gray-700 hover:border-green-300 hover:scale-[1.02]"}`,style:{background:ot.preview},children:[jsxRuntimeExports.jsx("div",{className:"glossy-overlay"}),jsxRuntimeExports.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide ${ot.name==="dark"||ot.name==="graphite"||ot.name==="royal"?"text-white":"text-black"}`,children:ot.label})]},ot.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Click a color to set your PDF background theme."})]})}function ThemeSelector({theme:it,setTheme:g}){return jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Font Style"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:themes.map(et=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(et.value),className:`p-4 rounded-xl border font-semibold shadow-md transition-transform duration-200 ease-out ${it===et.value?"border-green ring-2 ring-green/60 scale-[1.01]":"border-gray-700 hover:ring-1 hover:ring-green/40 hover:scale-[1.01]"}`,style:{background:"#111",color:et.textColor,fontFamily:et.value==="modern"?"Montserrat":et.value==="classic"?"AdobeArabic":"Bebas Neue"},children:jsxRuntimeExports.jsx("p",{className:"text-base",children:et.label})},et.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Each style uses a unique font in your final PDF."})]})}function PromptForm({text:it,setText:g,title:et,setTitle:ot,theme:ct,setTheme:ut,bgTheme:dt,setBgTheme:ft,pages:St,setPages:kt,setLogo:Tt,logoPreview:jt,setLogoPreview:Rt,link:Ft,setLink:$t,cover:zt,setCover:Kt,cta:Bt,setCta:Ut,onSubmit:Jt,loading:en,contentType:tn}){const{user:nn}=useAuth(),[rn,on]=reactExports.useState(""),[dn,cn]=reactExports.useState(0),[fn,mn]=reactExports.useState(!1),[En,Sn]=reactExports.useState("");reactExports.useEffect(()=>{nn!=null&&nn.cta&&(!Bt||Bt.trim()==="")&&Ut(nn.cta)},[nn,nn==null?void 0:nn.cta]),reactExports.useEffect(()=>{const yn=((it==null?void 0:it.replace(/<[^>]+>/g,"").trim())||"").length,an=1e5,un=an*.9;cn(yn),yn>an?(fn||y$4.error(`Your prompt is too long (${yn.toLocaleString()} / ${an.toLocaleString()} characters). Please shorten it before submitting.`,{autoClose:6e3}),mn(!0),on("⚠️ Your prompt exceeds the limit. Please shorten it.")):yn>un?(mn(!1),on(`Approaching limit — ${yn.toLocaleString()} / ${an.toLocaleString()} characters.`)):(mn(!1),on(""))},[it]);const wn=hn=>{if(hn.preventDefault(),!it.replace(/<[^>]+>/g,"").trim()){Sn("Prompt is required before submission."),y$4.error("Please enter a prompt before submitting.");return}Sn(""),Jt(hn,tn)};return jsxRuntimeExports.jsxs("form",{onSubmit:wn,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages (25 max)"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"25",value:St??"",onChange:hn=>{const yn=hn.target.value;kt(yn===""?"":Math.min(25,Math.max(1,Number(yn))))},className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg appearance-none"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-y-0 right-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(hn=>Math.max(1,Number(hn||1)-1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:"◀"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(hn=>Math.min(25,Number(hn||1)+1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:"▶"})]})]})]}),jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 mt-4 font-medium",children:"Document Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter a title for your project or document...",value:et,onChange:hn=>ot(hn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This title will appear at the top of your generated document."})]}),jsxRuntimeExports.jsx(PromptSelect,{setText:g}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-[250px] overflow-hidden rounded-lg border border-gray-600 bg-white",style:{color:"#111"},children:jsxRuntimeExports.jsx(ReactQuill$1,{theme:"snow",value:it,onChange:hn=>{g(hn),En&&Sn("")},modules:{toolbar:!1},placeholder:"Write your prompt...",className:"h-[250px]"})}),En&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium",children:En}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-2",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium ${rn.includes("⚠️")?"text-red-500":rn?"text-yellow-500":"text-gray-400"}`,children:rn||" "}),jsxRuntimeExports.jsxs("p",{className:`text-xs ${fn?"text-red-500":"text-gray-400"}`,children:[dn.toLocaleString()," / 100,000"]})]})]}),jsxRuntimeExports.jsx(CoverUpload,{cover:zt,setCover:Kt}),jsxRuntimeExports.jsx(LogoUploader,{logoPreview:jt,setLogo:Tt,setLogoPreview:Rt}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:dt,setBgTheme:ft}),jsxRuntimeExports.jsx(ThemeSelector,{theme:ct,setTheme:ut}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Add a Closing Message or Call-to-Action"}),(nn==null?void 0:nn.cta)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("select",{onChange:hn=>{const yn=hn.target.value;yn==="saved"?Ut(nn.cta):yn==="custom"&&Ut("")},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Choose CTA"}),jsxRuntimeExports.jsx("option",{value:"saved",children:"Use My Saved CTA"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Write New CTA"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic ml-2",children:Bt===nn.cta?"Using saved CTA":""})]}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter...`,value:Bt,onChange:hn=>Ut(hn.target.value),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This message will appear at the end of your lead magnet."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Link or Call-to-Action"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:Ft,onChange:hn=>$t(hn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This link will appear at the bottom of your PDF as a button."})]}),!en&&jsxRuntimeExports.jsx("button",{disabled:!it.trim()||it==="<p><br></p>"||fn,type:"submit",className:`w-full px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${!it.trim()||it==="<p><br></p>"||fn?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-green font-semibold text-black hover:opacity-90"}`,children:"🚀 Submit Prompt"})]})}function SmartPromptBuilder({onPromptReady:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),{user:jt,accessToken:Rt}=useAuth(),Ft=async()=>{if(!g||!ot||!ut){y$4.error("Please fill out all required fields.");return}if(!(jt!=null&&jt.id)){y$4.error("You must be logged in to generate prompts.");return}Tt(!0);try{const $t=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt-builder",{userId:jt.id,audience:g,pain:ot,promise:ut,offer:ft},{headers:{Authorization:`Bearer ${Rt}`}});it($t.data.prompt)}catch($t){console.error($t),y$4.error("Failed to generate prompt. Try again.")}finally{Tt(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-xl border border-gray-700 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Smart Prompt Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Answer a few quick questions so we can craft a personalized lead magnet prompt for you."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Who is this for?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: entrepreneurs, creators, small business owners",value:g,onChange:$t=>et($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What problem are they facing?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: struggling to grow an email list or convert leads",value:ot,onChange:$t=>ct($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What transformation or result do they want?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: consistently attract qualified leads every week",value:ut,onChange:$t=>dt($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What’s your offer or next step? (optional)"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: join my course, book a free strategy call",value:ft,onChange:$t=>St($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6 space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:kt,className:"flex-1 px-6 py-2 bg-green text-black font-semibold rounded hover:bg-green-500 transition",children:kt?"Generating...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(""),disabled:kt,className:"flex-1 px-6 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition",children:"Skip"})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(it,g){var et=g(),ot=useState({inst:{value:et,getSnapshot:g}}),ct=ot[0].inst,ut=ot[1];return useLayoutEffect(function(){ct.value=et,ct.getSnapshot=g,checkIfSnapshotChanged(ct)&&ut({inst:ct})},[it,et,g]),useEffect$1(function(){return checkIfSnapshotChanged(ct)&&ut({inst:ct}),it(function(){checkIfSnapshotChanged(ct)&&ut({inst:ct})})},[it]),useDebugValue$1(et),et}function checkIfSnapshotChanged(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!objectIs$1(it,et)}catch{return!0}}function useSyncExternalStore$1(it,g){return g()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(it){this.content=it}OrderedMap.prototype={constructor:OrderedMap,find:function(it){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===it)return g;return-1},get:function(it){var g=this.find(it);return g==-1?void 0:this.content[g+1]},update:function(it,g,et){var ot=et&&et!=it?this.remove(et):this,ct=ot.find(it),ut=ot.content.slice();return ct==-1?ut.push(et||it,g):(ut[ct+1]=g,et&&(ut[ct]=et)),new OrderedMap(ut)},remove:function(it){var g=this.find(it);if(g==-1)return this;var et=this.content.slice();return et.splice(g,2),new OrderedMap(et)},addToStart:function(it,g){return new OrderedMap([it,g].concat(this.remove(it).content))},addToEnd:function(it,g){var et=this.remove(it).content.slice();return et.push(it,g),new OrderedMap(et)},addBefore:function(it,g,et){var ot=this.remove(g),ct=ot.content.slice(),ut=ot.find(it);return ct.splice(ut==-1?ct.length:ut,0,g,et),new OrderedMap(ct)},forEach:function(it){for(var g=0;g<this.content.length;g+=2)it(this.content[g],this.content[g+1])},prepend:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(it.content.concat(this.subtract(it).content)):this},append:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(this.subtract(it).content.concat(it.content)):this},subtract:function(it){var g=this;it=OrderedMap.from(it);for(var et=0;et<it.content.length;et+=2)g=g.remove(it.content[et]);return g},toObject:function(){var it={};return this.forEach(function(g,et){it[g]=et}),it},get size(){return this.content.length>>1}};OrderedMap.from=function(it){if(it instanceof OrderedMap)return it;var g=[];if(it)for(var et in it)g.push(et,it[et]);return new OrderedMap(g)};function findDiffStart(it,g,et){for(let ot=0;;ot++){if(ot==it.childCount||ot==g.childCount)return it.childCount==g.childCount?null:et;let ct=it.child(ot),ut=g.child(ot);if(ct==ut){et+=ct.nodeSize;continue}if(!ct.sameMarkup(ut))return et;if(ct.isText&&ct.text!=ut.text){for(let dt=0;ct.text[dt]==ut.text[dt];dt++)et++;return et}if(ct.content.size||ut.content.size){let dt=findDiffStart(ct.content,ut.content,et+1);if(dt!=null)return dt}et+=ct.nodeSize}}function findDiffEnd(it,g,et,ot){for(let ct=it.childCount,ut=g.childCount;;){if(ct==0||ut==0)return ct==ut?null:{a:et,b:ot};let dt=it.child(--ct),ft=g.child(--ut),St=dt.nodeSize;if(dt==ft){et-=St,ot-=St;continue}if(!dt.sameMarkup(ft))return{a:et,b:ot};if(dt.isText&&dt.text!=ft.text){let kt=0,Tt=Math.min(dt.text.length,ft.text.length);for(;kt<Tt&&dt.text[dt.text.length-kt-1]==ft.text[ft.text.length-kt-1];)kt++,et--,ot--;return{a:et,b:ot}}if(dt.content.size||ft.content.size){let kt=findDiffEnd(dt.content,ft.content,et-1,ot-1);if(kt)return kt}et-=St,ot-=St}}class Fragment{constructor(g,et){if(this.content=g,this.size=et||0,et==null)for(let ot=0;ot<g.length;ot++)this.size+=g[ot].nodeSize}nodesBetween(g,et,ot,ct=0,ut){for(let dt=0,ft=0;ft<et;dt++){let St=this.content[dt],kt=ft+St.nodeSize;if(kt>g&&ot(St,ct+ft,ut||null,dt)!==!1&&St.content.size){let Tt=ft+1;St.nodesBetween(Math.max(0,g-Tt),Math.min(St.content.size,et-Tt),ot,ct+Tt)}ft=kt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,et,ot,ct){let ut="",dt=!0;return this.nodesBetween(g,et,(ft,St)=>{let kt=ft.isText?ft.text.slice(Math.max(g,St)-St,et-St):ft.isLeaf?ct?typeof ct=="function"?ct(ft):ct:ft.type.spec.leafText?ft.type.spec.leafText(ft):"":"";ft.isBlock&&(ft.isLeaf&&kt||ft.isTextblock)&&ot&&(dt?dt=!1:ut+=ot),ut+=kt},0),ut}append(g){if(!g.size)return this;if(!this.size)return g;let et=this.lastChild,ot=g.firstChild,ct=this.content.slice(),ut=0;for(et.isText&&et.sameMarkup(ot)&&(ct[ct.length-1]=et.withText(et.text+ot.text),ut=1);ut<g.content.length;ut++)ct.push(g.content[ut]);return new Fragment(ct,this.size+g.size)}cut(g,et=this.size){if(g==0&&et==this.size)return this;let ot=[],ct=0;if(et>g)for(let ut=0,dt=0;dt<et;ut++){let ft=this.content[ut],St=dt+ft.nodeSize;St>g&&((dt<g||St>et)&&(ft.isText?ft=ft.cut(Math.max(0,g-dt),Math.min(ft.text.length,et-dt)):ft=ft.cut(Math.max(0,g-dt-1),Math.min(ft.content.size,et-dt-1))),ot.push(ft),ct+=ft.nodeSize),dt=St}return new Fragment(ot,ct)}cutByIndex(g,et){return g==et?Fragment.empty:g==0&&et==this.content.length?this:new Fragment(this.content.slice(g,et))}replaceChild(g,et){let ot=this.content[g];if(ot==et)return this;let ct=this.content.slice(),ut=this.size+et.nodeSize-ot.nodeSize;return ct[g]=et,new Fragment(ct,ut)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let et=0;et<this.content.length;et++)if(!this.content[et].eq(g.content[et]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let et=this.content[g];if(!et)throw new RangeError("Index "+g+" out of range for "+this);return et}maybeChild(g){return this.content[g]||null}forEach(g){for(let et=0,ot=0;et<this.content.length;et++){let ct=this.content[et];g(ct,ot,et),ot+=ct.nodeSize}}findDiffStart(g,et=0){return findDiffStart(this,g,et)}findDiffEnd(g,et=this.size,ot=g.size){return findDiffEnd(this,g,et,ot)}findIndex(g){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let et=0,ot=0;;et++){let ct=this.child(et),ut=ot+ct.nodeSize;if(ut>=g)return ut==g?retIndex(et+1,ut):retIndex(et,ot);ot=ut}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,et){if(!et)return Fragment.empty;if(!Array.isArray(et))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(et.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let et,ot=0;for(let ct=0;ct<g.length;ct++){let ut=g[ct];ot+=ut.nodeSize,ct&&ut.isText&&g[ct-1].sameMarkup(ut)?(et||(et=g.slice(0,ct)),et[et.length-1]=ut.withText(et[et.length-1].text+ut.text)):et&&et.push(ut)}return new Fragment(et||g,ot)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(it,g){return found.index=it,found.offset=g,found}function compareDeep(it,g){if(it===g)return!0;if(!(it&&typeof it=="object")||!(g&&typeof g=="object"))return!1;let et=Array.isArray(it);if(Array.isArray(g)!=et)return!1;if(et){if(it.length!=g.length)return!1;for(let ot=0;ot<it.length;ot++)if(!compareDeep(it[ot],g[ot]))return!1}else{for(let ot in it)if(!(ot in g)||!compareDeep(it[ot],g[ot]))return!1;for(let ot in g)if(!(ot in it))return!1}return!0}let Mark$1=class j_{constructor(g,et){this.type=g,this.attrs=et}addToSet(g){let et,ot=!1;for(let ct=0;ct<g.length;ct++){let ut=g[ct];if(this.eq(ut))return g;if(this.type.excludes(ut.type))et||(et=g.slice(0,ct));else{if(ut.type.excludes(this.type))return g;!ot&&ut.type.rank>this.type.rank&&(et||(et=g.slice(0,ct)),et.push(this),ot=!0),et&&et.push(ut)}}return et||(et=g.slice()),ot||et.push(this),et}removeFromSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return g.slice(0,et).concat(g.slice(et+1));return g}isInSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Mark.fromJSON");let ot=g.marks[et.type];if(!ot)throw new RangeError(`There is no mark type ${et.type} in this schema`);let ct=ot.create(et.attrs);return ot.checkAttrs(ct.attrs),ct}static sameSet(g,et){if(g==et)return!0;if(g.length!=et.length)return!1;for(let ot=0;ot<g.length;ot++)if(!g[ot].eq(et[ot]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return j_.none;if(g instanceof j_)return[g];let et=g.slice();return et.sort((ot,ct)=>ot.type.rank-ct.type.rank),et}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,et,ot){this.content=g,this.openStart=et,this.openEnd=ot}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,et){let ot=insertInto(this.content,g+this.openStart,et);return ot&&new Slice(ot,this.openStart,this.openEnd)}removeBetween(g,et){return new Slice(removeRange(this.content,g+this.openStart,et+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,et){if(!et)return Slice.empty;let ot=et.openStart||0,ct=et.openEnd||0;if(typeof ot!="number"||typeof ct!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,et.content),ot,ct)}static maxOpen(g,et=!0){let ot=0,ct=0;for(let ut=g.firstChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.firstChild)ot++;for(let ut=g.lastChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.lastChild)ct++;return new Slice(g,ot,ct)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(it,g,et){let{index:ot,offset:ct}=it.findIndex(g),ut=it.maybeChild(ot),{index:dt,offset:ft}=it.findIndex(et);if(ct==g||ut.isText){if(ft!=et&&!it.child(dt).isText)throw new RangeError("Removing non-flat range");return it.cut(0,g).append(it.cut(et))}if(ot!=dt)throw new RangeError("Removing non-flat range");return it.replaceChild(ot,ut.copy(removeRange(ut.content,g-ct-1,et-ct-1)))}function insertInto(it,g,et,ot){let{index:ct,offset:ut}=it.findIndex(g),dt=it.maybeChild(ct);if(ut==g||dt.isText)return ot&&!ot.canReplace(ct,ct,et)?null:it.cut(0,g).append(et).append(it.cut(g));let ft=insertInto(dt.content,g-ut-1,et,dt);return ft&&it.replaceChild(ct,dt.copy(ft))}function replace(it,g,et){if(et.openStart>it.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(it.depth-et.openStart!=g.depth-et.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(it,g,et,0)}function replaceOuter(it,g,et,ot){let ct=it.index(ot),ut=it.node(ot);if(ct==g.index(ot)&&ot<it.depth-et.openStart){let dt=replaceOuter(it,g,et,ot+1);return ut.copy(ut.content.replaceChild(ct,dt))}else if(et.content.size)if(!et.openStart&&!et.openEnd&&it.depth==ot&&g.depth==ot){let dt=it.parent,ft=dt.content;return close(dt,ft.cut(0,it.parentOffset).append(et.content).append(ft.cut(g.parentOffset)))}else{let{start:dt,end:ft}=prepareSliceForReplace(et,it);return close(ut,replaceThreeWay(it,dt,ft,g,ot))}else return close(ut,replaceTwoWay(it,g,ot))}function checkJoin(it,g){if(!g.type.compatibleContent(it.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+it.type.name)}function joinable$1(it,g,et){let ot=it.node(et);return checkJoin(ot,g.node(et)),ot}function addNode(it,g){let et=g.length-1;et>=0&&it.isText&&it.sameMarkup(g[et])?g[et]=it.withText(g[et].text+it.text):g.push(it)}function addRange(it,g,et,ot){let ct=(g||it).node(et),ut=0,dt=g?g.index(et):ct.childCount;it&&(ut=it.index(et),it.depth>et?ut++:it.textOffset&&(addNode(it.nodeAfter,ot),ut++));for(let ft=ut;ft<dt;ft++)addNode(ct.child(ft),ot);g&&g.depth==et&&g.textOffset&&addNode(g.nodeBefore,ot)}function close(it,g){return it.type.checkContent(g),it.copy(g)}function replaceThreeWay(it,g,et,ot,ct){let ut=it.depth>ct&&joinable$1(it,g,ct+1),dt=ot.depth>ct&&joinable$1(et,ot,ct+1),ft=[];return addRange(null,it,ct,ft),ut&&dt&&g.index(ct)==et.index(ct)?(checkJoin(ut,dt),addNode(close(ut,replaceThreeWay(it,g,et,ot,ct+1)),ft)):(ut&&addNode(close(ut,replaceTwoWay(it,g,ct+1)),ft),addRange(g,et,ct,ft),dt&&addNode(close(dt,replaceTwoWay(et,ot,ct+1)),ft)),addRange(ot,null,ct,ft),new Fragment(ft)}function replaceTwoWay(it,g,et){let ot=[];if(addRange(null,it,et,ot),it.depth>et){let ct=joinable$1(it,g,et+1);addNode(close(ct,replaceTwoWay(it,g,et+1)),ot)}return addRange(g,null,et,ot),new Fragment(ot)}function prepareSliceForReplace(it,g){let et=g.depth-it.openStart,ct=g.node(et).copy(it.content);for(let ut=et-1;ut>=0;ut--)ct=g.node(ut).copy(Fragment.from(ct));return{start:ct.resolveNoCache(it.openStart+et),end:ct.resolveNoCache(ct.content.size-it.openEnd-et)}}class ResolvedPos{constructor(g,et,ot){this.pos=g,this.path=et,this.parentOffset=ot,this.depth=et.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,et=this.index(this.depth);if(et==g.childCount)return null;let ot=this.pos-this.path[this.path.length-1],ct=g.child(et);return ot?g.child(et).cut(ot):ct}get nodeBefore(){let g=this.index(this.depth),et=this.pos-this.path[this.path.length-1];return et?this.parent.child(g).cut(0,et):g==0?null:this.parent.child(g-1)}posAtIndex(g,et){et=this.resolveDepth(et);let ot=this.path[et*3],ct=et==0?0:this.path[et*3-1]+1;for(let ut=0;ut<g;ut++)ct+=ot.child(ut).nodeSize;return ct}marks(){let g=this.parent,et=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(et).marks;let ot=g.maybeChild(et-1),ct=g.maybeChild(et);if(!ot){let ft=ot;ot=ct,ct=ft}let ut=ot.marks;for(var dt=0;dt<ut.length;dt++)ut[dt].type.spec.inclusive===!1&&(!ct||!ut[dt].isInSet(ct.marks))&&(ut=ut[dt--].removeFromSet(ut));return ut}marksAcross(g){let et=this.parent.maybeChild(this.index());if(!et||!et.isInline)return null;let ot=et.marks,ct=g.parent.maybeChild(g.index());for(var ut=0;ut<ot.length;ut++)ot[ut].type.spec.inclusive===!1&&(!ct||!ot[ut].isInSet(ct.marks))&&(ot=ot[ut--].removeFromSet(ot));return ot}sharedDepth(g){for(let et=this.depth;et>0;et--)if(this.start(et)<=g&&this.end(et)>=g)return et;return 0}blockRange(g=this,et){if(g.pos<this.pos)return g.blockRange(this);for(let ot=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);ot>=0;ot--)if(g.pos<=this.end(ot)&&(!et||et(this.node(ot))))return new NodeRange(this,g,ot);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let et=1;et<=this.depth;et++)g+=(g?"/":"")+this.node(et).type.name+"_"+this.index(et-1);return g+":"+this.parentOffset}static resolve(g,et){if(!(et>=0&&et<=g.content.size))throw new RangeError("Position "+et+" out of range");let ot=[],ct=0,ut=et;for(let dt=g;;){let{index:ft,offset:St}=dt.content.findIndex(ut),kt=ut-St;if(ot.push(dt,ft,ct+St),!kt||(dt=dt.child(ft),dt.isText))break;ut=kt-1,ct+=St+1}return new ResolvedPos(et,ot,ut)}static resolveCached(g,et){let ot=resolveCache.get(g);if(ot)for(let ut=0;ut<ot.elts.length;ut++){let dt=ot.elts[ut];if(dt.pos==et)return dt}else resolveCache.set(g,ot=new ResolveCache);let ct=ot.elts[ot.i]=ResolvedPos.resolve(g,et);return ot.i=(ot.i+1)%resolveCacheSize,ct}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,et,ot){this.$from=g,this.$to=et,this.depth=ot}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class F_{constructor(g,et,ot,ct=Mark$1.none){this.type=g,this.attrs=et,this.marks=ct,this.content=ot||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,et,ot,ct=0){this.content.nodesBetween(g,et,ot,ct,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,et,ot,ct){return this.content.textBetween(g,et,ot,ct)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,et,ot){return this.type==g&&compareDeep(this.attrs,et||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,ot||Mark$1.none)}copy(g=null){return g==this.content?this:new F_(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new F_(this.type,this.attrs,this.content,g)}cut(g,et=this.content.size){return g==0&&et==this.content.size?this:this.copy(this.content.cut(g,et))}slice(g,et=this.content.size,ot=!1){if(g==et)return Slice.empty;let ct=this.resolve(g),ut=this.resolve(et),dt=ot?0:ct.sharedDepth(et),ft=ct.start(dt),kt=ct.node(dt).content.cut(ct.pos-ft,ut.pos-ft);return new Slice(kt,ct.depth-dt,ut.depth-dt)}replace(g,et,ot){return replace(this.resolve(g),this.resolve(et),ot)}nodeAt(g){for(let et=this;;){let{index:ot,offset:ct}=et.content.findIndex(g);if(et=et.maybeChild(ot),!et)return null;if(ct==g||et.isText)return et;g-=ct+1}}childAfter(g){let{index:et,offset:ot}=this.content.findIndex(g);return{node:this.content.maybeChild(et),index:et,offset:ot}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:et,offset:ot}=this.content.findIndex(g);if(ot<g)return{node:this.content.child(et),index:et,offset:ot};let ct=this.content.child(et-1);return{node:ct,index:et-1,offset:ot-ct.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,et,ot){let ct=!1;return et>g&&this.nodesBetween(g,et,ut=>(ot.isInSet(ut.marks)&&(ct=!0),!ct)),ct}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let et=this.type.contentMatch.matchFragment(this.content,0,g);if(!et)throw new Error("Called contentMatchAt on a node with invalid content");return et}canReplace(g,et,ot=Fragment.empty,ct=0,ut=ot.childCount){let dt=this.contentMatchAt(g).matchFragment(ot,ct,ut),ft=dt&&dt.matchFragment(this.content,et);if(!ft||!ft.validEnd)return!1;for(let St=ct;St<ut;St++)if(!this.type.allowsMarks(ot.child(St).marks))return!1;return!0}canReplaceWith(g,et,ot,ct){if(ct&&!this.type.allowsMarks(ct))return!1;let ut=this.contentMatchAt(g).matchType(ot),dt=ut&&ut.matchFragment(this.content,et);return dt?dt.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let et=0;et<this.marks.length;et++){let ot=this.marks[et];ot.type.checkAttrs(ot.attrs),g=ot.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(et=>et.type.name)}`);this.content.forEach(et=>et.check())}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(et=>et.toJSON())),g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Node.fromJSON");let ot;if(et.marks){if(!Array.isArray(et.marks))throw new RangeError("Invalid mark data for Node.fromJSON");ot=et.marks.map(g.markFromJSON)}if(et.type=="text"){if(typeof et.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(et.text,ot)}let ct=Fragment.fromJSON(g,et.content),ut=g.nodeType(et.type).create(et.attrs,ct,ot);return ut.type.checkAttrs(ut.attrs),ut}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(g,et,ot,ct){if(super(g,et,null,ct),!ot)throw new RangeError("Empty text nodes are not allowed");this.text=ot}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,et){return this.text.slice(g,et)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,et=this.text.length){return g==0&&et==this.text.length?this:this.withText(this.text.slice(g,et))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(it,g){for(let et=it.length-1;et>=0;et--)g=it[et].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,et){let ot=new TokenStream(g,et);if(ot.next==null)return ContentMatch.empty;let ct=parseExpr(ot);ot.next&&ot.err("Unexpected trailing text");let ut=dfa(nfa(ct));return checkForDeadEnds(ut,ot),ut}matchType(g){for(let et=0;et<this.next.length;et++)if(this.next[et].type==g)return this.next[et].next;return null}matchFragment(g,et=0,ot=g.childCount){let ct=this;for(let ut=et;ct&&ut<ot;ut++)ct=ct.matchType(g.child(ut).type);return ct}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:et}=this.next[g];if(!(et.isText||et.hasRequiredAttrs()))return et}return null}compatible(g){for(let et=0;et<this.next.length;et++)for(let ot=0;ot<g.next.length;ot++)if(this.next[et].type==g.next[ot].type)return!0;return!1}fillBefore(g,et=!1,ot=0){let ct=[this];function ut(dt,ft){let St=dt.matchFragment(g,ot);if(St&&(!et||St.validEnd))return Fragment.from(ft.map(kt=>kt.createAndFill()));for(let kt=0;kt<dt.next.length;kt++){let{type:Tt,next:jt}=dt.next[kt];if(!(Tt.isText||Tt.hasRequiredAttrs())&&ct.indexOf(jt)==-1){ct.push(jt);let Rt=ut(jt,ft.concat(Tt));if(Rt)return Rt}}return null}return ut(this,[])}findWrapping(g){for(let ot=0;ot<this.wrapCache.length;ot+=2)if(this.wrapCache[ot]==g)return this.wrapCache[ot+1];let et=this.computeWrapping(g);return this.wrapCache.push(g,et),et}computeWrapping(g){let et=Object.create(null),ot=[{match:this,type:null,via:null}];for(;ot.length;){let ct=ot.shift(),ut=ct.match;if(ut.matchType(g)){let dt=[];for(let ft=ct;ft.type;ft=ft.via)dt.push(ft.type);return dt.reverse()}for(let dt=0;dt<ut.next.length;dt++){let{type:ft,next:St}=ut.next[dt];!ft.isLeaf&&!ft.hasRequiredAttrs()&&!(ft.name in et)&&(!ct.type||St.validEnd)&&(ot.push({match:ft.contentMatch,type:ft,via:ct}),et[ft.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function et(ot){g.push(ot);for(let ct=0;ct<ot.next.length;ct++)g.indexOf(ot.next[ct].next)==-1&&et(ot.next[ct].next)}return et(this),g.map((ot,ct)=>{let ut=ct+(ot.validEnd?"*":" ")+" ";for(let dt=0;dt<ot.next.length;dt++)ut+=(dt?", ":"")+ot.next[dt].type.name+"->"+g.indexOf(ot.next[dt].next);return ut}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,et){this.string=g,this.nodeTypes=et,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(it){let g=[];do g.push(parseExprSeq(it));while(it.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(it){let g=[];do g.push(parseExprSubscript(it));while(it.next&&it.next!=")"&&it.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(it){let g=parseExprAtom(it);for(;;)if(it.eat("+"))g={type:"plus",expr:g};else if(it.eat("*"))g={type:"star",expr:g};else if(it.eat("?"))g={type:"opt",expr:g};else if(it.eat("{"))g=parseExprRange(it,g);else break;return g}function parseNum(it){/\D/.test(it.next)&&it.err("Expected number, got '"+it.next+"'");let g=Number(it.next);return it.pos++,g}function parseExprRange(it,g){let et=parseNum(it),ot=et;return it.eat(",")&&(it.next!="}"?ot=parseNum(it):ot=-1),it.eat("}")||it.err("Unclosed braced range"),{type:"range",min:et,max:ot,expr:g}}function resolveName(it,g){let et=it.nodeTypes,ot=et[g];if(ot)return[ot];let ct=[];for(let ut in et){let dt=et[ut];dt.isInGroup(g)&&ct.push(dt)}return ct.length==0&&it.err("No node type or group '"+g+"' found"),ct}function parseExprAtom(it){if(it.eat("(")){let g=parseExpr(it);return it.eat(")")||it.err("Missing closing paren"),g}else if(/\W/.test(it.next))it.err("Unexpected token '"+it.next+"'");else{let g=resolveName(it,it.next).map(et=>(it.inline==null?it.inline=et.isInline:it.inline!=et.isInline&&it.err("Mixing inline and block content"),{type:"name",value:et}));return it.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(it){let g=[[]];return ct(ut(it,0),et()),g;function et(){return g.push([])-1}function ot(dt,ft,St){let kt={term:St,to:ft};return g[dt].push(kt),kt}function ct(dt,ft){dt.forEach(St=>St.to=ft)}function ut(dt,ft){if(dt.type=="choice")return dt.exprs.reduce((St,kt)=>St.concat(ut(kt,ft)),[]);if(dt.type=="seq")for(let St=0;;St++){let kt=ut(dt.exprs[St],ft);if(St==dt.exprs.length-1)return kt;ct(kt,ft=et())}else if(dt.type=="star"){let St=et();return ot(ft,St),ct(ut(dt.expr,St),St),[ot(St)]}else if(dt.type=="plus"){let St=et();return ct(ut(dt.expr,ft),St),ct(ut(dt.expr,St),St),[ot(St)]}else{if(dt.type=="opt")return[ot(ft)].concat(ut(dt.expr,ft));if(dt.type=="range"){let St=ft;for(let kt=0;kt<dt.min;kt++){let Tt=et();ct(ut(dt.expr,St),Tt),St=Tt}if(dt.max==-1)ct(ut(dt.expr,St),St);else for(let kt=dt.min;kt<dt.max;kt++){let Tt=et();ot(St,Tt),ct(ut(dt.expr,St),Tt),St=Tt}return[ot(St)]}else{if(dt.type=="name")return[ot(ft,void 0,dt.value)];throw new Error("Unknown expr type")}}}}function cmp(it,g){return g-it}function nullFrom(it,g){let et=[];return ot(g),et.sort(cmp);function ot(ct){let ut=it[ct];if(ut.length==1&&!ut[0].term)return ot(ut[0].to);et.push(ct);for(let dt=0;dt<ut.length;dt++){let{term:ft,to:St}=ut[dt];!ft&&et.indexOf(St)==-1&&ot(St)}}}function dfa(it){let g=Object.create(null);return et(nullFrom(it,0));function et(ot){let ct=[];ot.forEach(dt=>{it[dt].forEach(({term:ft,to:St})=>{if(!ft)return;let kt;for(let Tt=0;Tt<ct.length;Tt++)ct[Tt][0]==ft&&(kt=ct[Tt][1]);nullFrom(it,St).forEach(Tt=>{kt||ct.push([ft,kt=[]]),kt.indexOf(Tt)==-1&&kt.push(Tt)})})});let ut=g[ot.join(",")]=new ContentMatch(ot.indexOf(it.length-1)>-1);for(let dt=0;dt<ct.length;dt++){let ft=ct[dt][1].sort(cmp);ut.next.push({type:ct[dt][0],next:g[ft.join(",")]||et(ft)})}return ut}}function checkForDeadEnds(it,g){for(let et=0,ot=[it];et<ot.length;et++){let ct=ot[et],ut=!ct.validEnd,dt=[];for(let ft=0;ft<ct.next.length;ft++){let{type:St,next:kt}=ct.next[ft];dt.push(St.name),ut&&!(St.isText||St.hasRequiredAttrs())&&(ut=!1),ot.indexOf(kt)==-1&&ot.push(kt)}ut&&g.err("Only non-generatable nodes ("+dt.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(it){let g=Object.create(null);for(let et in it){let ot=it[et];if(!ot.hasDefault)return null;g[et]=ot.default}return g}function computeAttrs(it,g){let et=Object.create(null);for(let ot in it){let ct=g&&g[ot];if(ct===void 0){let ut=it[ot];if(ut.hasDefault)ct=ut.default;else throw new RangeError("No value supplied for attribute "+ot)}et[ot]=ct}return et}function checkAttrs(it,g,et,ot){for(let ct in g)if(!(ct in it))throw new RangeError(`Unsupported attribute ${ct} for ${et} of type ${ct}`);for(let ct in it){let ut=it[ct];ut.validate&&ut.validate(g[ct])}}function initAttrs(it,g){let et=Object.create(null);if(g)for(let ot in g)et[ot]=new Attribute(it,ot,g[ot]);return et}let NodeType$1=class FP{constructor(g,et,ot){this.name=g,this.schema=et,this.spec=ot,this.markSet=null,this.groups=ot.group?ot.group.split(" "):[],this.attrs=initAttrs(g,ot.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(ot.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,et,ot){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(g),Fragment.from(et),Mark$1.setFrom(ot))}createChecked(g=null,et,ot){return et=Fragment.from(et),this.checkContent(et),new Node$2(this,this.computeAttrs(g),et,Mark$1.setFrom(ot))}createAndFill(g=null,et,ot){if(g=this.computeAttrs(g),et=Fragment.from(et),et.size){let dt=this.contentMatch.fillBefore(et);if(!dt)return null;et=dt.append(et)}let ct=this.contentMatch.matchFragment(et),ut=ct&&ct.fillBefore(Fragment.empty,!0);return ut?new Node$2(this,g,et.append(ut),Mark$1.setFrom(ot)):null}validContent(g){let et=this.contentMatch.matchFragment(g);if(!et||!et.validEnd)return!1;for(let ot=0;ot<g.childCount;ot++)if(!this.allowsMarks(g.child(ot).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let et=0;et<g.length;et++)if(!this.allowsMarkType(g[et].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let et;for(let ot=0;ot<g.length;ot++)this.allowsMarkType(g[ot].type)?et&&et.push(g[ot]):et||(et=g.slice(0,ot));return et?et.length?et:Mark$1.none:g}static compile(g,et){let ot=Object.create(null);g.forEach((ut,dt)=>ot[ut]=new FP(ut,et,dt));let ct=et.spec.topNode||"doc";if(!ot[ct])throw new RangeError("Schema is missing its top node type ('"+ct+"')");if(!ot.text)throw new RangeError("Every schema needs a 'text' type");for(let ut in ot.text.attrs)throw new RangeError("The text node type should not have attributes");return ot}};function validateType(it,g,et){let ot=et.split("|");return ct=>{let ut=ct===null?"null":typeof ct;if(ot.indexOf(ut)<0)throw new RangeError(`Expected value of type ${ot} for attribute ${g} on type ${it}, got ${ut}`)}}class Attribute{constructor(g,et,ot){this.hasDefault=Object.prototype.hasOwnProperty.call(ot,"default"),this.default=ot.default,this.validate=typeof ot.validate=="string"?validateType(g,et,ot.validate):ot.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,et,ot,ct){this.name=g,this.rank=et,this.schema=ot,this.spec=ct,this.attrs=initAttrs(g,ct.attrs),this.excluded=null;let ut=defaultAttrs(this.attrs);this.instance=ut?new Mark$1(this,ut):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,et){let ot=Object.create(null),ct=0;return g.forEach((ut,dt)=>ot[ut]=new MarkType(ut,ct++,et,dt)),ot}removeFromSet(g){for(var et=0;et<g.length;et++)g[et].type==this&&(g=g.slice(0,et).concat(g.slice(et+1)),et--);return g}isInSet(g){for(let et=0;et<g.length;et++)if(g[et].type==this)return g[et]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let et=this.spec={};for(let ct in g)et[ct]=g[ct];et.nodes=OrderedMap.from(g.nodes),et.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let ot=Object.create(null);for(let ct in this.nodes){if(ct in this.marks)throw new RangeError(ct+" can not be both a node and a mark");let ut=this.nodes[ct],dt=ut.spec.content||"",ft=ut.spec.marks;if(ut.contentMatch=ot[dt]||(ot[dt]=ContentMatch.parse(dt,this.nodes)),ut.inlineContent=ut.contentMatch.inlineContent,ut.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!ut.isInline||!ut.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=ut}ut.markSet=ft=="_"?null:ft?gatherMarks(this,ft.split(" ")):ft==""||!ut.inlineContent?[]:null}for(let ct in this.marks){let ut=this.marks[ct],dt=ut.spec.excludes;ut.excluded=dt==null?[ut]:dt==""?[]:gatherMarks(this,dt.split(" "))}this.nodeFromJSON=ct=>Node$2.fromJSON(this,ct),this.markFromJSON=ct=>Mark$1.fromJSON(this,ct),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,et=null,ot,ct){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(et,ot,ct)}text(g,et){let ot=this.nodes.text;return new TextNode(ot,ot.defaultAttrs,g,Mark$1.setFrom(et))}mark(g,et){return typeof g=="string"&&(g=this.marks[g]),g.create(et)}nodeType(g){let et=this.nodes[g];if(!et)throw new RangeError("Unknown node type: "+g);return et}}function gatherMarks(it,g){let et=[];for(let ot=0;ot<g.length;ot++){let ct=g[ot],ut=it.marks[ct],dt=ut;if(ut)et.push(ut);else for(let ft in it.marks){let St=it.marks[ft];(ct=="_"||St.spec.group&&St.spec.group.split(" ").indexOf(ct)>-1)&&et.push(dt=St)}if(!dt)throw new SyntaxError("Unknown mark type: '"+g[ot]+"'")}return et}function isTagRule(it){return it.tag!=null}function isStyleRule(it){return it.style!=null}class DOMParser{constructor(g,et){this.schema=g,this.rules=et,this.tags=[],this.styles=[];let ot=this.matchedStyles=[];et.forEach(ct=>{if(isTagRule(ct))this.tags.push(ct);else if(isStyleRule(ct)){let ut=/[^=]*/.exec(ct.style)[0];ot.indexOf(ut)<0&&ot.push(ut),this.styles.push(ct)}}),this.normalizeLists=!this.tags.some(ct=>{if(!/^(ul|ol)\b/.test(ct.tag)||!ct.node)return!1;let ut=g.nodes[ct.node];return ut.contentMatch.matchType(ut)})}parse(g,et={}){let ot=new ParseContext(this,et,!1);return ot.addAll(g,Mark$1.none,et.from,et.to),ot.finish()}parseSlice(g,et={}){let ot=new ParseContext(this,et,!0);return ot.addAll(g,Mark$1.none,et.from,et.to),Slice.maxOpen(ot.finish())}matchTag(g,et,ot){for(let ct=ot?this.tags.indexOf(ot)+1:0;ct<this.tags.length;ct++){let ut=this.tags[ct];if(matches(g,ut.tag)&&(ut.namespace===void 0||g.namespaceURI==ut.namespace)&&(!ut.context||et.matchesContext(ut.context))){if(ut.getAttrs){let dt=ut.getAttrs(g);if(dt===!1)continue;ut.attrs=dt||void 0}return ut}}}matchStyle(g,et,ot,ct){for(let ut=ct?this.styles.indexOf(ct)+1:0;ut<this.styles.length;ut++){let dt=this.styles[ut],ft=dt.style;if(!(ft.indexOf(g)!=0||dt.context&&!ot.matchesContext(dt.context)||ft.length>g.length&&(ft.charCodeAt(g.length)!=61||ft.slice(g.length+1)!=et))){if(dt.getAttrs){let St=dt.getAttrs(et);if(St===!1)continue;dt.attrs=St||void 0}return dt}}}static schemaRules(g){let et=[];function ot(ct){let ut=ct.priority==null?50:ct.priority,dt=0;for(;dt<et.length;dt++){let ft=et[dt];if((ft.priority==null?50:ft.priority)<ut)break}et.splice(dt,0,ct)}for(let ct in g.marks){let ut=g.marks[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.mark||dt.ignore||dt.clearMark||(dt.mark=ct)})}for(let ct in g.nodes){let ut=g.nodes[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.node||dt.ignore||dt.mark||(dt.node=ct)})}return et}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(it,g,et){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):it&&it.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:et&~OPT_OPEN_LEFT}class NodeContext{constructor(g,et,ot,ct,ut,dt){this.type=g,this.attrs=et,this.marks=ot,this.solid=ct,this.options=dt,this.content=[],this.activeMarks=Mark$1.none,this.match=ut||(dt&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let et=this.type.contentMatch.fillBefore(Fragment.from(g));if(et)this.match=this.type.contentMatch.matchFragment(et);else{let ot=this.type.contentMatch,ct;return(ct=ot.findWrapping(g.type))?(this.match=ot,ct):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let ot=this.content[this.content.length-1],ct;if(ot&&ot.isText&&(ct=/[ \t\r\n\u000c]+$/.exec(ot.text))){let ut=ot;ot.text.length==ct[0].length?this.content.pop():this.content[this.content.length-1]=ut.withText(ut.text.slice(0,ut.text.length-ct[0].length))}}let et=Fragment.from(this.content);return!g&&this.match&&(et=et.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,et,this.marks):et}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,et,ot){this.parser=g,this.options=et,this.isOpen=ot,this.open=0,this.localPreserveWS=!1;let ct=et.topNode,ut,dt=wsOptionsFor(null,et.preserveWhitespace,0)|(ot?OPT_OPEN_LEFT:0);ct?ut=new NodeContext(ct.type,ct.attrs,Mark$1.none,!0,et.topMatch||ct.type.contentMatch,dt):ot?ut=new NodeContext(null,null,Mark$1.none,!0,null,dt):ut=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,dt),this.nodes=[ut],this.find=et.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,et){g.nodeType==3?this.addTextNode(g,et):g.nodeType==1&&this.addElement(g,et)}addTextNode(g,et){let ot=g.nodeValue,ct=this.top,ut=ct.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ct.options&OPT_PRESERVE_WS)>0;if(ut==="full"||ct.inlineContext(g)||/[^ \t\r\n\u000c]/.test(ot)){if(ut)ut!=="full"?ot=ot.replace(/\r?\n|\r/g," "):ot=ot.replace(/\r\n?/g,`
`);else if(ot=ot.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(ot)&&this.open==this.nodes.length-1){let dt=ct.content[ct.content.length-1],ft=g.previousSibling;(!dt||ft&&ft.nodeName=="BR"||dt.isText&&/[ \t\r\n\u000c]$/.test(dt.text))&&(ot=ot.slice(1))}ot&&this.insertNode(this.parser.schema.text(ot),et,!/\S/.test(ot)),this.findInText(g)}else this.findInside(g)}addElement(g,et,ot){let ct=this.localPreserveWS,ut=this.top;(g.tagName=="PRE"||/pre/.test(g.style&&g.style.whiteSpace))&&(this.localPreserveWS=!0);let dt=g.nodeName.toLowerCase(),ft;listTags.hasOwnProperty(dt)&&this.parser.normalizeLists&&normalizeList(g);let St=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(ft=this.parser.matchTag(g,this,ot));e:if(St?St.ignore:ignoreTags.hasOwnProperty(dt))this.findInside(g),this.ignoreFallback(g,et);else if(!St||St.skip||St.closeParent){St&&St.closeParent?this.open=Math.max(0,this.open-1):St&&St.skip.nodeType&&(g=St.skip);let kt,Tt=this.needsBlock;if(blockTags.hasOwnProperty(dt))ut.content.length&&ut.content[0].isInline&&this.open&&(this.open--,ut=this.top),kt=!0,ut.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,et);break e}let jt=St&&St.skip?et:this.readStyles(g,et);jt&&this.addAll(g,jt),kt&&this.sync(ut),this.needsBlock=Tt}else{let kt=this.readStyles(g,et);kt&&this.addElementByRule(g,St,kt,St.consuming===!1?ft:void 0)}this.localPreserveWS=ct}leafFallback(g,et){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),et)}ignoreFallback(g,et){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),et,!0)}readStyles(g,et){let ot=g.style;if(ot&&ot.length)for(let ct=0;ct<this.parser.matchedStyles.length;ct++){let ut=this.parser.matchedStyles[ct],dt=ot.getPropertyValue(ut);if(dt)for(let ft=void 0;;){let St=this.parser.matchStyle(ut,dt,this,ft);if(!St)break;if(St.ignore)return null;if(St.clearMark?et=et.filter(kt=>!St.clearMark(kt)):et=et.concat(this.parser.schema.marks[St.mark].create(St.attrs)),St.consuming===!1)ft=St;else break}}return et}addElementByRule(g,et,ot,ct){let ut,dt;if(et.node)if(dt=this.parser.schema.nodes[et.node],dt.isLeaf)this.insertNode(dt.create(et.attrs),ot,g.nodeName=="BR")||this.leafFallback(g,ot);else{let St=this.enter(dt,et.attrs||null,ot,et.preserveWhitespace);St&&(ut=!0,ot=St)}else{let St=this.parser.schema.marks[et.mark];ot=ot.concat(St.create(et.attrs))}let ft=this.top;if(dt&&dt.isLeaf)this.findInside(g);else if(ct)this.addElement(g,ot,ct);else if(et.getContent)this.findInside(g),et.getContent(g,this.parser.schema).forEach(St=>this.insertNode(St,ot,!1));else{let St=g;typeof et.contentElement=="string"?St=g.querySelector(et.contentElement):typeof et.contentElement=="function"?St=et.contentElement(g):et.contentElement&&(St=et.contentElement),this.findAround(g,St,!0),this.addAll(St,ot),this.findAround(g,St,!1)}ut&&this.sync(ft)&&this.open--}addAll(g,et,ot,ct){let ut=ot||0;for(let dt=ot?g.childNodes[ot]:g.firstChild,ft=ct==null?null:g.childNodes[ct];dt!=ft;dt=dt.nextSibling,++ut)this.findAtPoint(g,ut),this.addDOM(dt,et);this.findAtPoint(g,ut)}findPlace(g,et,ot){let ct,ut;for(let dt=this.open,ft=0;dt>=0;dt--){let St=this.nodes[dt],kt=St.findWrapping(g);if(kt&&(!ct||ct.length>kt.length+ft)&&(ct=kt,ut=St,!kt.length))break;if(St.solid){if(ot)break;ft+=2}}if(!ct)return null;this.sync(ut);for(let dt=0;dt<ct.length;dt++)et=this.enterInner(ct[dt],null,et,!1);return et}insertNode(g,et,ot){if(g.isInline&&this.needsBlock&&!this.top.type){let ut=this.textblockFromContext();ut&&(et=this.enterInner(ut,null,et))}let ct=this.findPlace(g,et,ot);if(ct){this.closeExtra();let ut=this.top;ut.match&&(ut.match=ut.match.matchType(g.type));let dt=Mark$1.none;for(let ft of ct.concat(g.marks))(ut.type?ut.type.allowsMarkType(ft.type):markMayApply(ft.type,g.type))&&(dt=ft.addToSet(dt));return ut.content.push(g.mark(dt)),!0}return!1}enter(g,et,ot,ct){let ut=this.findPlace(g.create(et),ot,!1);return ut&&(ut=this.enterInner(g,et,ot,!0,ct)),ut}enterInner(g,et,ot,ct=!1,ut){this.closeExtra();let dt=this.top;dt.match=dt.match&&dt.match.matchType(g);let ft=wsOptionsFor(g,ut,dt.options);dt.options&OPT_OPEN_LEFT&&dt.content.length==0&&(ft|=OPT_OPEN_LEFT);let St=Mark$1.none;return ot=ot.filter(kt=>(dt.type?dt.type.allowsMarkType(kt.type):markMayApply(kt.type,g))?(St=kt.addToSet(St),!1):!0),this.nodes.push(new NodeContext(g,et,St,ct,null,ft)),this.open++,ot}closeExtra(g=!1){let et=this.nodes.length-1;if(et>this.open){for(;et>this.open;et--)this.nodes[et-1].content.push(this.nodes[et].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(g){for(let et=this.open;et>=0;et--){if(this.nodes[et]==g)return this.open=et,!0;this.localPreserveWS&&(this.nodes[et].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let g=0;for(let et=this.open;et>=0;et--){let ot=this.nodes[et].content;for(let ct=ot.length-1;ct>=0;ct--)g+=ot[ct].nodeSize;et&&g++}return g}findAtPoint(g,et){if(this.find)for(let ot=0;ot<this.find.length;ot++)this.find[ot].node==g&&this.find[ot].offset==et&&(this.find[ot].pos=this.currentPos)}findInside(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].pos==null&&g.nodeType==1&&g.contains(this.find[et].node)&&(this.find[et].pos=this.currentPos)}findAround(g,et,ot){if(g!=et&&this.find)for(let ct=0;ct<this.find.length;ct++)this.find[ct].pos==null&&g.nodeType==1&&g.contains(this.find[ct].node)&&et.compareDocumentPosition(this.find[ct].node)&(ot?2:4)&&(this.find[ct].pos=this.currentPos)}findInText(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].node==g&&(this.find[et].pos=this.currentPos-(g.nodeValue.length-this.find[et].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let et=g.split("/"),ot=this.options.context,ct=!this.isOpen&&(!ot||ot.parent.type==this.nodes[0].type),ut=-(ot?ot.depth+1:0)+(ct?0:1),dt=(ft,St)=>{for(;ft>=0;ft--){let kt=et[ft];if(kt==""){if(ft==et.length-1||ft==0)continue;for(;St>=ut;St--)if(dt(ft-1,St))return!0;return!1}else{let Tt=St>0||St==0&&ct?this.nodes[St].type:ot&&St>=ut?ot.node(St-ut).type:null;if(!Tt||Tt.name!=kt&&!Tt.isInGroup(kt))return!1;St--}}return!0};return dt(et.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let et=g.depth;et>=0;et--){let ot=g.node(et).contentMatchAt(g.indexAfter(et)).defaultType;if(ot&&ot.isTextblock&&ot.defaultAttrs)return ot}for(let et in this.parser.schema.nodes){let ot=this.parser.schema.nodes[et];if(ot.isTextblock&&ot.defaultAttrs)return ot}}}function normalizeList(it){for(let g=it.firstChild,et=null;g;g=g.nextSibling){let ot=g.nodeType==1?g.nodeName.toLowerCase():null;ot&&listTags.hasOwnProperty(ot)&&et?(et.appendChild(g),g=et):ot=="li"?et=g:ot&&(et=null)}}function matches(it,g){return(it.matches||it.msMatchesSelector||it.webkitMatchesSelector||it.mozMatchesSelector).call(it,g)}function copy(it){let g={};for(let et in it)g[et]=it[et];return g}function markMayApply(it,g){let et=g.schema.nodes;for(let ot in et){let ct=et[ot];if(!ct.allowsMarkType(it))continue;let ut=[],dt=ft=>{ut.push(ft);for(let St=0;St<ft.edgeCount;St++){let{type:kt,next:Tt}=ft.edge(St);if(kt==g||ut.indexOf(Tt)<0&&dt(Tt))return!0}};if(dt(ct.contentMatch))return!0}}class DOMSerializer{constructor(g,et){this.nodes=g,this.marks=et}serializeFragment(g,et={},ot){ot||(ot=doc$1(et).createDocumentFragment());let ct=ot,ut=[];return g.forEach(dt=>{if(ut.length||dt.marks.length){let ft=0,St=0;for(;ft<ut.length&&St<dt.marks.length;){let kt=dt.marks[St];if(!this.marks[kt.type.name]){St++;continue}if(!kt.eq(ut[ft][0])||kt.type.spec.spanning===!1)break;ft++,St++}for(;ft<ut.length;)ct=ut.pop()[1];for(;St<dt.marks.length;){let kt=dt.marks[St++],Tt=this.serializeMark(kt,dt.isInline,et);Tt&&(ut.push([kt,ct]),ct.appendChild(Tt.dom),ct=Tt.contentDOM||Tt.dom)}}ct.appendChild(this.serializeNodeInner(dt,et))}),ot}serializeNodeInner(g,et){let{dom:ot,contentDOM:ct}=renderSpec(doc$1(et),this.nodes[g.type.name](g),null,g.attrs);if(ct){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,et,ct)}return ot}serializeNode(g,et={}){let ot=this.serializeNodeInner(g,et);for(let ct=g.marks.length-1;ct>=0;ct--){let ut=this.serializeMark(g.marks[ct],g.isInline,et);ut&&((ut.contentDOM||ut.dom).appendChild(ot),ot=ut.dom)}return ot}serializeMark(g,et,ot={}){let ct=this.marks[g.type.name];return ct&&renderSpec(doc$1(ot),ct(g,et),null,g.attrs)}static renderSpec(g,et,ot=null,ct){return renderSpec(g,et,ot,ct)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let et=gatherToDOM(g.nodes);return et.text||(et.text=ot=>ot.text),et}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(it){let g={};for(let et in it){let ot=it[et].spec.toDOM;ot&&(g[et]=ot)}return g}function doc$1(it){return it.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(it){let g=suspiciousAttributeCache.get(it);return g===void 0&&suspiciousAttributeCache.set(it,g=suspiciousAttributesInner(it)),g}function suspiciousAttributesInner(it){let g=null;function et(ot){if(ot&&typeof ot=="object")if(Array.isArray(ot))if(typeof ot[0]=="string")g||(g=[]),g.push(ot);else for(let ct=0;ct<ot.length;ct++)et(ot[ct]);else for(let ct in ot)et(ot[ct])}return et(it),g}function renderSpec(it,g,et,ot){if(typeof g=="string")return{dom:it.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let ct=g[0],ut;if(typeof ct!="string")throw new RangeError("Invalid array passed to renderSpec");if(ot&&(ut=suspiciousAttributes(ot))&&ut.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let dt=ct.indexOf(" ");dt>0&&(et=ct.slice(0,dt),ct=ct.slice(dt+1));let ft,St=et?it.createElementNS(et,ct):it.createElement(ct),kt=g[1],Tt=1;if(kt&&typeof kt=="object"&&kt.nodeType==null&&!Array.isArray(kt)){Tt=2;for(let jt in kt)if(kt[jt]!=null){let Rt=jt.indexOf(" ");Rt>0?St.setAttributeNS(jt.slice(0,Rt),jt.slice(Rt+1),kt[jt]):jt=="style"&&St.style?St.style.cssText=kt[jt]:St.setAttribute(jt,kt[jt])}}for(let jt=Tt;jt<g.length;jt++){let Rt=g[jt];if(Rt===0){if(jt<g.length-1||jt>Tt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:St,contentDOM:St}}else{let{dom:Ft,contentDOM:$t}=renderSpec(it,Rt,et,ot);if(St.appendChild(Ft),$t){if(ft)throw new RangeError("Multiple content holes");ft=$t}}}return{dom:St,contentDOM:ft}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(it,g){return it+g*factor16}function recoverIndex(it){return it&lower16}function recoverOffset(it){return(it-(it&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,et,ot){this.pos=g,this.delInfo=et,this.recover=ot}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,et=!1){if(this.ranges=g,this.inverted=et,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let et=0,ot=recoverIndex(g);if(!this.inverted)for(let ct=0;ct<ot;ct++)et+=this.ranges[ct*3+2]-this.ranges[ct*3+1];return this.ranges[ot*3]+et+recoverOffset(g)}mapResult(g,et=1){return this._map(g,et,!1)}map(g,et=1){return this._map(g,et,!0)}_map(g,et,ot){let ct=0,ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ct:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=this.ranges[ft+dt],jt=St+kt;if(g<=jt){let Rt=kt?g==St?-1:g==jt?1:et:et,Ft=St+ct+(Rt<0?0:Tt);if(ot)return Ft;let $t=g==(et<0?St:jt)?null:makeRecover(ft/3,g-St),zt=g==St?DEL_AFTER:g==jt?DEL_BEFORE:DEL_ACROSS;return(et<0?g!=St:g!=jt)&&(zt|=DEL_SIDE),new MapResult(Ft,zt,$t)}ct+=Tt-kt}return ot?g+ct:new MapResult(g+ct,0,null)}touches(g,et){let ot=0,ct=recoverIndex(et),ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ot:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=St+kt;if(g<=Tt&&ft==ct*3)return!0;ot+=this.ranges[ft+dt]-kt}return!1}forEach(g){let et=this.inverted?2:1,ot=this.inverted?1:2;for(let ct=0,ut=0;ct<this.ranges.length;ct+=3){let dt=this.ranges[ct],ft=dt-(this.inverted?ut:0),St=dt+(this.inverted?0:ut),kt=this.ranges[ct+et],Tt=this.ranges[ct+ot];g(ft,ft+kt,St,St+Tt),ut+=Tt-kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g,et,ot=0,ct=g?g.length:0){this.mirror=et,this.from=ot,this.to=ct,this._maps=g||[],this.ownData=!(g||et)}get maps(){return this._maps}slice(g=0,et=this.maps.length){return new Mapping(this._maps,this.mirror,g,et)}appendMap(g,et){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),et!=null&&this.setMirror(this._maps.length-1,et)}appendMapping(g){for(let et=0,ot=this._maps.length;et<g._maps.length;et++){let ct=g.getMirror(et);this.appendMap(g._maps[et],ct!=null&&ct<et?ot+ct:void 0)}}getMirror(g){if(this.mirror){for(let et=0;et<this.mirror.length;et++)if(this.mirror[et]==g)return this.mirror[et+(et%2?-1:1)]}}setMirror(g,et){this.mirror||(this.mirror=[]),this.mirror.push(g,et)}appendMappingInverted(g){for(let et=g.maps.length-1,ot=this._maps.length+g._maps.length;et>=0;et--){let ct=g.getMirror(et);this.appendMap(g._maps[et].invert(),ct!=null&&ct>et?ot-ct-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,et=1){if(this.mirror)return this._map(g,et,!0);for(let ot=this.from;ot<this.to;ot++)g=this._maps[ot].map(g,et);return g}mapResult(g,et=1){return this._map(g,et,!1)}_map(g,et,ot){let ct=0;for(let ut=this.from;ut<this.to;ut++){let dt=this._maps[ut],ft=dt.mapResult(g,et);if(ft.recover!=null){let St=this.getMirror(ut);if(St!=null&&St>ut&&St<this.to){ut=St,g=this._maps[St].recover(ft.recover);continue}}ct|=ft.delInfo,g=ft.pos}return ot?g:new MapResult(g,ct,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,et){if(!et||!et.stepType)throw new RangeError("Invalid input for Step.fromJSON");let ot=stepsByID[et.stepType];if(!ot)throw new RangeError(`No step type ${et.stepType} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=et,et.prototype.jsonID=g,et}}class StepResult{constructor(g,et){this.doc=g,this.failed=et}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,et,ot,ct){try{return StepResult.ok(g.replace(et,ot,ct))}catch(ut){if(ut instanceof ReplaceError)return StepResult.fail(ut.message);throw ut}}}function mapFragment(it,g,et){let ot=[];for(let ct=0;ct<it.childCount;ct++){let ut=it.child(ct);ut.content.size&&(ut=ut.copy(mapFragment(ut.content,g,ut))),ut.isInline&&(ut=g(ut,et,ct)),ot.push(ut)}return Fragment.fromArray(ot)}class AddMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=g.resolve(this.from),ct=ot.node(ot.sharedDepth(this.to)),ut=new Slice(mapFragment(et.content,(dt,ft)=>!dt.isAtom||!ft.type.allowsMarkType(this.mark.type)?dt:dt.mark(this.mark.addToSet(dt.marks)),ct),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ut)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new AddMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=new Slice(mapFragment(et.content,ct=>ct.mark(this.mark.removeFromSet(ct.marks)),g),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ot)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new RemoveMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.addToSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);if(et){let ot=this.mark.addToSet(et.marks);if(ot.length==et.marks.length){for(let ct=0;ct<et.marks.length;ct++)if(!et.marks[ct].isInSet(ot))return new AddNodeMarkStep(this.pos,et.marks[ct]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AddNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.removeFromSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);return!et||!this.mark.isInSet(et.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new RemoveNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,et,ot,ct=!1){super(),this.from=g,this.to=et,this.slice=ot,this.structure=ct}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deletedAcross&&ot.deletedAcross?null:new ReplaceStep(et.pos,Math.max(et.pos,ot.pos),this.slice,this.structure)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),et,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,et,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(et.from,et.to,Slice.fromJSON(g,et.slice),!!et.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,et,ot,ct,ut,dt,ft=!1){super(),this.from=g,this.to=et,this.gapFrom=ot,this.gapTo=ct,this.slice=ut,this.insert=dt,this.structure=ft}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let et=g.slice(this.gapFrom,this.gapTo);if(et.openStart||et.openEnd)return StepResult.fail("Gap is not a flat range");let ot=this.slice.insertAt(this.insert,et.content);return ot?StepResult.fromReplace(g,this.from,this.to,ot):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let et=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+et,this.from+this.insert,this.from+this.insert+et,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1),ct=this.from==this.gapFrom?et.pos:g.map(this.gapFrom,-1),ut=this.to==this.gapTo?ot.pos:g.map(this.gapTo,1);return et.deletedAcross&&ot.deletedAcross||ct<et.pos||ut>ot.pos?null:new ReplaceAroundStep(et.pos,ot.pos,ct,ut,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number"||typeof et.gapFrom!="number"||typeof et.gapTo!="number"||typeof et.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(et.from,et.to,et.gapFrom,et.gapTo,Slice.fromJSON(g,et.slice),et.insert,!!et.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(it,g,et){let ot=it.resolve(g),ct=et-g,ut=ot.depth;for(;ct>0&&ut>0&&ot.indexAfter(ut)==ot.node(ut).childCount;)ut--,ct--;if(ct>0){let dt=ot.node(ut).maybeChild(ot.indexAfter(ut));for(;ct>0;){if(!dt||dt.isLeaf)return!0;dt=dt.firstChild,ct--}}return!1}function addMark(it,g,et,ot){let ct=[],ut=[],dt,ft;it.doc.nodesBetween(g,et,(St,kt,Tt)=>{if(!St.isInline)return;let jt=St.marks;if(!ot.isInSet(jt)&&Tt.type.allowsMarkType(ot.type)){let Rt=Math.max(kt,g),Ft=Math.min(kt+St.nodeSize,et),$t=ot.addToSet(jt);for(let zt=0;zt<jt.length;zt++)jt[zt].isInSet($t)||(dt&&dt.to==Rt&&dt.mark.eq(jt[zt])?dt.to=Ft:ct.push(dt=new RemoveMarkStep(Rt,Ft,jt[zt])));ft&&ft.to==Rt?ft.to=Ft:ut.push(ft=new AddMarkStep(Rt,Ft,ot))}}),ct.forEach(St=>it.step(St)),ut.forEach(St=>it.step(St))}function removeMark(it,g,et,ot){let ct=[],ut=0;it.doc.nodesBetween(g,et,(dt,ft)=>{if(!dt.isInline)return;ut++;let St=null;if(ot instanceof MarkType){let kt=dt.marks,Tt;for(;Tt=ot.isInSet(kt);)(St||(St=[])).push(Tt),kt=Tt.removeFromSet(kt)}else ot?ot.isInSet(dt.marks)&&(St=[ot]):St=dt.marks;if(St&&St.length){let kt=Math.min(ft+dt.nodeSize,et);for(let Tt=0;Tt<St.length;Tt++){let jt=St[Tt],Rt;for(let Ft=0;Ft<ct.length;Ft++){let $t=ct[Ft];$t.step==ut-1&&jt.eq(ct[Ft].style)&&(Rt=$t)}Rt?(Rt.to=kt,Rt.step=ut):ct.push({style:jt,from:Math.max(ft,g),to:kt,step:ut})}}}),ct.forEach(dt=>it.step(new RemoveMarkStep(dt.from,dt.to,dt.style)))}function clearIncompatible(it,g,et,ot=et.contentMatch,ct=!0){let ut=it.doc.nodeAt(g),dt=[],ft=g+1;for(let St=0;St<ut.childCount;St++){let kt=ut.child(St),Tt=ft+kt.nodeSize,jt=ot.matchType(kt.type);if(!jt)dt.push(new ReplaceStep(ft,Tt,Slice.empty));else{ot=jt;for(let Rt=0;Rt<kt.marks.length;Rt++)et.allowsMarkType(kt.marks[Rt].type)||it.step(new RemoveMarkStep(ft,Tt,kt.marks[Rt]));if(ct&&kt.isText&&et.whitespace!="pre"){let Rt,Ft=/\r?\n|\r/g,$t;for(;Rt=Ft.exec(kt.text);)$t||($t=new Slice(Fragment.from(et.schema.text(" ",et.allowedMarks(kt.marks))),0,0)),dt.push(new ReplaceStep(ft+Rt.index,ft+Rt.index+Rt[0].length,$t))}}ft=Tt}if(!ot.validEnd){let St=ot.fillBefore(Fragment.empty,!0);it.replace(ft,ft,new Slice(St,0,0))}for(let St=dt.length-1;St>=0;St--)it.step(dt[St])}function canCut(it,g,et){return(g==0||it.canReplace(g,it.childCount))&&(et==it.childCount||it.canReplace(0,et))}function liftTarget(it){let et=it.parent.content.cutByIndex(it.startIndex,it.endIndex);for(let ot=it.depth;;--ot){let ct=it.$from.node(ot),ut=it.$from.index(ot),dt=it.$to.indexAfter(ot);if(ot<it.depth&&ct.canReplace(ut,dt,et))return ot;if(ot==0||ct.type.spec.isolating||!canCut(ct,ut,dt))break}return null}function lift$2(it,g,et){let{$from:ot,$to:ct,depth:ut}=g,dt=ot.before(ut+1),ft=ct.after(ut+1),St=dt,kt=ft,Tt=Fragment.empty,jt=0;for(let $t=ut,zt=!1;$t>et;$t--)zt||ot.index($t)>0?(zt=!0,Tt=Fragment.from(ot.node($t).copy(Tt)),jt++):St--;let Rt=Fragment.empty,Ft=0;for(let $t=ut,zt=!1;$t>et;$t--)zt||ct.after($t+1)<ct.end($t)?(zt=!0,Rt=Fragment.from(ct.node($t).copy(Rt)),Ft++):kt++;it.step(new ReplaceAroundStep(St,kt,dt,ft,new Slice(Tt.append(Rt),jt,Ft),Tt.size-jt,!0))}function findWrapping(it,g,et=null,ot=it){let ct=findWrappingOutside(it,g),ut=ct&&findWrappingInside(ot,g);return ut?ct.map(withAttrs).concat({type:g,attrs:et}).concat(ut.map(withAttrs)):null}function withAttrs(it){return{type:it,attrs:null}}function findWrappingOutside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.contentMatchAt(ot).findWrapping(g);if(!ut)return null;let dt=ut.length?ut[0]:g;return et.canReplaceWith(ot,ct,dt)?ut:null}function findWrappingInside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.child(ot),dt=g.contentMatch.findWrapping(ut.type);if(!dt)return null;let St=(dt.length?dt[dt.length-1]:g).contentMatch;for(let kt=ot;St&&kt<ct;kt++)St=St.matchType(et.child(kt).type);return!St||!St.validEnd?null:dt}function wrap(it,g,et){let ot=Fragment.empty;for(let dt=et.length-1;dt>=0;dt--){if(ot.size){let ft=et[dt].type.contentMatch.matchFragment(ot);if(!ft||!ft.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}ot=Fragment.from(et[dt].type.create(et[dt].attrs,ot))}let ct=g.start,ut=g.end;it.step(new ReplaceAroundStep(ct,ut,ct,ut,new Slice(ot,0,0),et.length,!0))}function setBlockType$1(it,g,et,ot,ct){if(!ot.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let ut=it.steps.length;it.doc.nodesBetween(g,et,(dt,ft)=>{let St=typeof ct=="function"?ct(dt):ct;if(dt.isTextblock&&!dt.hasMarkup(ot,St)&&canChangeType(it.doc,it.mapping.slice(ut).map(ft),ot)){let kt=null;if(ot.schema.linebreakReplacement){let Ft=ot.whitespace=="pre",$t=!!ot.contentMatch.matchType(ot.schema.linebreakReplacement);Ft&&!$t?kt=!1:!Ft&&$t&&(kt=!0)}kt===!1&&replaceLinebreaks(it,dt,ft,ut),clearIncompatible(it,it.mapping.slice(ut).map(ft,1),ot,void 0,kt===null);let Tt=it.mapping.slice(ut),jt=Tt.map(ft,1),Rt=Tt.map(ft+dt.nodeSize,1);return it.step(new ReplaceAroundStep(jt,Rt,jt+1,Rt-1,new Slice(Fragment.from(ot.create(St,null,dt.marks)),0,0),1,!0)),kt===!0&&replaceNewlines(it,dt,ft,ut),!1}})}function replaceNewlines(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.isText){let dt,ft=/\r?\n|\r/g;for(;dt=ft.exec(ct.text);){let St=it.mapping.slice(ot).map(et+1+ut+dt.index);it.replaceWith(St,St+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.type==ct.type.schema.linebreakReplacement){let dt=it.mapping.slice(ot).map(et+1+ut);it.replaceWith(dt,dt+1,g.type.schema.text(`
`))}})}function canChangeType(it,g,et){let ot=it.resolve(g),ct=ot.index();return ot.parent.canReplaceWith(ct,ct+1,et)}function setNodeMarkup(it,g,et,ot,ct){let ut=it.doc.nodeAt(g);if(!ut)throw new RangeError("No node at given position");et||(et=ut.type);let dt=et.create(ot,null,ct||ut.marks);if(ut.isLeaf)return it.replaceWith(g,g+ut.nodeSize,dt);if(!et.validContent(ut.content))throw new RangeError("Invalid content for node type "+et.name);it.step(new ReplaceAroundStep(g,g+ut.nodeSize,g+1,g+ut.nodeSize-1,new Slice(Fragment.from(dt),0,0),1,!0))}function canSplit(it,g,et=1,ot){let ct=it.resolve(g),ut=ct.depth-et,dt=ot&&ot[ot.length-1]||ct.parent;if(ut<0||ct.parent.type.spec.isolating||!ct.parent.canReplace(ct.index(),ct.parent.childCount)||!dt.type.validContent(ct.parent.content.cutByIndex(ct.index(),ct.parent.childCount)))return!1;for(let kt=ct.depth-1,Tt=et-2;kt>ut;kt--,Tt--){let jt=ct.node(kt),Rt=ct.index(kt);if(jt.type.spec.isolating)return!1;let Ft=jt.content.cutByIndex(Rt,jt.childCount),$t=ot&&ot[Tt+1];$t&&(Ft=Ft.replaceChild(0,$t.type.create($t.attrs)));let zt=ot&&ot[Tt]||jt;if(!jt.canReplace(Rt+1,jt.childCount)||!zt.type.validContent(Ft))return!1}let ft=ct.indexAfter(ut),St=ot&&ot[0];return ct.node(ut).canReplaceWith(ft,ft,St?St.type:ct.node(ut+1).type)}function split(it,g,et=1,ot){let ct=it.doc.resolve(g),ut=Fragment.empty,dt=Fragment.empty;for(let ft=ct.depth,St=ct.depth-et,kt=et-1;ft>St;ft--,kt--){ut=Fragment.from(ct.node(ft).copy(ut));let Tt=ot&&ot[kt];dt=Fragment.from(Tt?Tt.type.create(Tt.attrs,dt):ct.node(ft).copy(dt))}it.step(new ReplaceStep(g,g,new Slice(ut.append(dt),et,et),!0))}function canJoin(it,g){let et=it.resolve(g),ot=et.index();return joinable(et.nodeBefore,et.nodeAfter)&&et.parent.canReplace(ot,ot+1)}function canAppendWithSubstitutedLinebreaks(it,g){g.content.size||it.type.compatibleContent(g.type);let et=it.contentMatchAt(it.childCount),{linebreakReplacement:ot}=it.type.schema;for(let ct=0;ct<g.childCount;ct++){let ut=g.child(ct),dt=ut.type==ot?it.type.schema.nodes.text:ut.type;if(et=et.matchType(dt),!et||!it.type.allowsMarks(ut.marks))return!1}return et.validEnd}function joinable(it,g){return!!(it&&g&&!it.isLeaf&&canAppendWithSubstitutedLinebreaks(it,g))}function joinPoint(it,g,et=-1){let ot=it.resolve(g);for(let ct=ot.depth;;ct--){let ut,dt,ft=ot.index(ct);if(ct==ot.depth?(ut=ot.nodeBefore,dt=ot.nodeAfter):et>0?(ut=ot.node(ct+1),ft++,dt=ot.node(ct).maybeChild(ft)):(ut=ot.node(ct).maybeChild(ft-1),dt=ot.node(ct+1)),ut&&!ut.isTextblock&&joinable(ut,dt)&&ot.node(ct).canReplace(ft,ft+1))return g;if(ct==0)break;g=et<0?ot.before(ct):ot.after(ct)}}function join(it,g,et){let ot=null,{linebreakReplacement:ct}=it.doc.type.schema,ut=it.doc.resolve(g-et),dt=ut.node().type;if(ct&&dt.inlineContent){let Tt=dt.whitespace=="pre",jt=!!dt.contentMatch.matchType(ct);Tt&&!jt?ot=!1:!Tt&&jt&&(ot=!0)}let ft=it.steps.length;if(ot===!1){let Tt=it.doc.resolve(g+et);replaceLinebreaks(it,Tt.node(),Tt.before(),ft)}dt.inlineContent&&clearIncompatible(it,g+et-1,dt,ut.node().contentMatchAt(ut.index()),ot==null);let St=it.mapping.slice(ft),kt=St.map(g-et);if(it.step(new ReplaceStep(kt,St.map(g+et,-1),Slice.empty,!0)),ot===!0){let Tt=it.doc.resolve(kt);replaceNewlines(it,Tt.node(),Tt.before(),it.steps.length)}return it}function insertPoint(it,g,et){let ot=it.resolve(g);if(ot.parent.canReplaceWith(ot.index(),ot.index(),et))return g;if(ot.parentOffset==0)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.index(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.before(ct+1);if(ut>0)return null}if(ot.parentOffset==ot.parent.content.size)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.indexAfter(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.after(ct+1);if(ut<ot.node(ct).childCount)return null}return null}function dropPoint(it,g,et){let ot=it.resolve(g);if(!et.content.size)return g;let ct=et.content;for(let ut=0;ut<et.openStart;ut++)ct=ct.firstChild.content;for(let ut=1;ut<=(et.openStart==0&&et.size?2:1);ut++)for(let dt=ot.depth;dt>=0;dt--){let ft=dt==ot.depth?0:ot.pos<=(ot.start(dt+1)+ot.end(dt+1))/2?-1:1,St=ot.index(dt)+(ft>0?1:0),kt=ot.node(dt),Tt=!1;if(ut==1)Tt=kt.canReplace(St,St,ct);else{let jt=kt.contentMatchAt(St).findWrapping(ct.firstChild.type);Tt=jt&&kt.canReplaceWith(St,St,jt[0])}if(Tt)return ft==0?ot.pos:ft<0?ot.before(dt+1):ot.after(dt+1)}return null}function replaceStep(it,g,et=g,ot=Slice.empty){if(g==et&&!ot.size)return null;let ct=it.resolve(g),ut=it.resolve(et);return fitsTrivially(ct,ut,ot)?new ReplaceStep(g,et,ot):new Fitter(ct,ut,ot).fit()}function fitsTrivially(it,g,et){return!et.openStart&&!et.openEnd&&it.start()==g.start()&&it.parent.canReplace(it.index(),g.index(),et.content)}class Fitter{constructor(g,et,ot){this.$from=g,this.$to=et,this.unplaced=ot,this.frontier=[],this.placed=Fragment.empty;for(let ct=0;ct<=g.depth;ct++){let ut=g.node(ct);this.frontier.push({type:ut.type,match:ut.contentMatchAt(g.indexAfter(ct))})}for(let ct=g.depth;ct>0;ct--)this.placed=Fragment.from(g.node(ct).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let kt=this.findFittable();kt?this.placeNodes(kt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),et=this.placed.size-this.depth-this.$from.depth,ot=this.$from,ct=this.close(g<0?this.$to:ot.doc.resolve(g));if(!ct)return null;let ut=this.placed,dt=ot.depth,ft=ct.depth;for(;dt&&ft&&ut.childCount==1;)ut=ut.firstChild.content,dt--,ft--;let St=new Slice(ut,dt,ft);return g>-1?new ReplaceAroundStep(ot.pos,g,this.$to.pos,this.$to.end(),St,et):St.size||ot.pos!=this.$to.pos?new ReplaceStep(ot.pos,ct.pos,St):null}findFittable(){let g=this.unplaced.openStart;for(let et=this.unplaced.content,ot=0,ct=this.unplaced.openEnd;ot<g;ot++){let ut=et.firstChild;if(et.childCount>1&&(ct=0),ut.type.spec.isolating&&ct<=ot){g=ot;break}et=ut.content}for(let et=1;et<=2;et++)for(let ot=et==1?g:this.unplaced.openStart;ot>=0;ot--){let ct,ut=null;ot?(ut=contentAt(this.unplaced.content,ot-1).firstChild,ct=ut.content):ct=this.unplaced.content;let dt=ct.firstChild;for(let ft=this.depth;ft>=0;ft--){let{type:St,match:kt}=this.frontier[ft],Tt,jt=null;if(et==1&&(dt?kt.matchType(dt.type)||(jt=kt.fillBefore(Fragment.from(dt),!1)):ut&&St.compatibleContent(ut.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,inject:jt};if(et==2&&dt&&(Tt=kt.findWrapping(dt.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,wrap:Tt};if(ut&&kt.matchType(ut.type))break}}}openMore(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);return!ct.childCount||ct.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,et+1,Math.max(ot,ct.size+et>=g.size-ot?et+1:0)),!0)}dropNode(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);if(ct.childCount<=1&&et>0){let ut=g.size-et<=et+ct.size;this.unplaced=new Slice(dropFromFragment(g,et-1,1),et-1,ut?et-1:ot)}else this.unplaced=new Slice(dropFromFragment(g,et,1),et,ot)}placeNodes({sliceDepth:g,frontierDepth:et,parent:ot,inject:ct,wrap:ut}){for(;this.depth>et;)this.closeFrontierNode();if(ut)for(let zt=0;zt<ut.length;zt++)this.openFrontierNode(ut[zt]);let dt=this.unplaced,ft=ot?ot.content:dt.content,St=dt.openStart-g,kt=0,Tt=[],{match:jt,type:Rt}=this.frontier[et];if(ct){for(let zt=0;zt<ct.childCount;zt++)Tt.push(ct.child(zt));jt=jt.matchFragment(ct)}let Ft=ft.size+g-(dt.content.size-dt.openEnd);for(;kt<ft.childCount;){let zt=ft.child(kt),Kt=jt.matchType(zt.type);if(!Kt)break;kt++,(kt>1||St==0||zt.content.size)&&(jt=Kt,Tt.push(closeNodeStart(zt.mark(Rt.allowedMarks(zt.marks)),kt==1?St:0,kt==ft.childCount?Ft:-1)))}let $t=kt==ft.childCount;$t||(Ft=-1),this.placed=addToFragment(this.placed,et,Fragment.from(Tt)),this.frontier[et].match=jt,$t&&Ft<0&&ot&&ot.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let zt=0,Kt=ft;zt<Ft;zt++){let Bt=Kt.lastChild;this.frontier.push({type:Bt.type,match:Bt.contentMatchAt(Bt.childCount)}),Kt=Bt.content}this.unplaced=$t?g==0?Slice.empty:new Slice(dropFromFragment(dt.content,g-1,1),g-1,Ft<0?dt.openEnd:g-1):new Slice(dropFromFragment(dt.content,g,kt),dt.openStart,dt.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],et;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(et=this.findCloseLevel(this.$to))&&et.depth==this.depth)return-1;let{depth:ot}=this.$to,ct=this.$to.after(ot);for(;ot>1&&ct==this.$to.end(--ot);)++ct;return ct}findCloseLevel(g){e:for(let et=Math.min(this.depth,g.depth);et>=0;et--){let{match:ot,type:ct}=this.frontier[et],ut=et<g.depth&&g.end(et+1)==g.pos+(g.depth-(et+1)),dt=contentAfterFits(g,et,ct,ot,ut);if(dt){for(let ft=et-1;ft>=0;ft--){let{match:St,type:kt}=this.frontier[ft],Tt=contentAfterFits(g,ft,kt,St,!0);if(!Tt||Tt.childCount)continue e}return{depth:et,fit:dt,move:ut?g.doc.resolve(g.after(et+1)):g}}}}close(g){let et=this.findCloseLevel(g);if(!et)return null;for(;this.depth>et.depth;)this.closeFrontierNode();et.fit.childCount&&(this.placed=addToFragment(this.placed,et.depth,et.fit)),g=et.move;for(let ot=et.depth+1;ot<=g.depth;ot++){let ct=g.node(ot),ut=ct.type.contentMatch.fillBefore(ct.content,!0,g.index(ot));this.openFrontierNode(ct.type,ct.attrs,ut)}return g}openFrontierNode(g,et=null,ot){let ct=this.frontier[this.depth];ct.match=ct.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(et,ot))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let et=this.frontier.pop().match.fillBefore(Fragment.empty,!0);et.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,et))}}function dropFromFragment(it,g,et){return g==0?it.cutByIndex(et,it.childCount):it.replaceChild(0,it.firstChild.copy(dropFromFragment(it.firstChild.content,g-1,et)))}function addToFragment(it,g,et){return g==0?it.append(et):it.replaceChild(it.childCount-1,it.lastChild.copy(addToFragment(it.lastChild.content,g-1,et)))}function contentAt(it,g){for(let et=0;et<g;et++)it=it.firstChild.content;return it}function closeNodeStart(it,g,et){if(g<=0)return it;let ot=it.content;return g>1&&(ot=ot.replaceChild(0,closeNodeStart(ot.firstChild,g-1,ot.childCount==1?et-1:0))),g>0&&(ot=it.type.contentMatch.fillBefore(ot).append(ot),et<=0&&(ot=ot.append(it.type.contentMatch.matchFragment(ot).fillBefore(Fragment.empty,!0)))),it.copy(ot)}function contentAfterFits(it,g,et,ot,ct){let ut=it.node(g),dt=ct?it.indexAfter(g):it.index(g);if(dt==ut.childCount&&!et.compatibleContent(ut.type))return null;let ft=ot.fillBefore(ut.content,!0,dt);return ft&&!invalidMarks(et,ut.content,dt)?ft:null}function invalidMarks(it,g,et){for(let ot=et;ot<g.childCount;ot++)if(!it.allowsMarks(g.child(ot).marks))return!0;return!1}function definesContent(it){return it.spec.defining||it.spec.definingForContent}function replaceRange(it,g,et,ot){if(!ot.size)return it.deleteRange(g,et);let ct=it.doc.resolve(g),ut=it.doc.resolve(et);if(fitsTrivially(ct,ut,ot))return it.step(new ReplaceStep(g,et,ot));let dt=coveredDepths(ct,it.doc.resolve(et));dt[dt.length-1]==0&&dt.pop();let ft=-(ct.depth+1);dt.unshift(ft);for(let Rt=ct.depth,Ft=ct.pos-1;Rt>0;Rt--,Ft--){let $t=ct.node(Rt).type.spec;if($t.defining||$t.definingAsContext||$t.isolating)break;dt.indexOf(Rt)>-1?ft=Rt:ct.before(Rt)==Ft&&dt.splice(1,0,-Rt)}let St=dt.indexOf(ft),kt=[],Tt=ot.openStart;for(let Rt=ot.content,Ft=0;;Ft++){let $t=Rt.firstChild;if(kt.push($t),Ft==ot.openStart)break;Rt=$t.content}for(let Rt=Tt-1;Rt>=0;Rt--){let Ft=kt[Rt],$t=definesContent(Ft.type);if($t&&!Ft.sameMarkup(ct.node(Math.abs(ft)-1)))Tt=Rt;else if($t||!Ft.type.isTextblock)break}for(let Rt=ot.openStart;Rt>=0;Rt--){let Ft=(Rt+Tt+1)%(ot.openStart+1),$t=kt[Ft];if($t)for(let zt=0;zt<dt.length;zt++){let Kt=dt[(zt+St)%dt.length],Bt=!0;Kt<0&&(Bt=!1,Kt=-Kt);let Ut=ct.node(Kt-1),Jt=ct.index(Kt-1);if(Ut.canReplaceWith(Jt,Jt,$t.type,$t.marks))return it.replace(ct.before(Kt),Bt?ut.after(Kt):et,new Slice(closeFragment(ot.content,0,ot.openStart,Ft),Ft,ot.openEnd))}}let jt=it.steps.length;for(let Rt=dt.length-1;Rt>=0&&(it.replace(g,et,ot),!(it.steps.length>jt));Rt--){let Ft=dt[Rt];Ft<0||(g=ct.before(Ft),et=ut.after(Ft))}}function closeFragment(it,g,et,ot,ct){if(g<et){let ut=it.firstChild;it=it.replaceChild(0,ut.copy(closeFragment(ut.content,g+1,et,ot,ut)))}if(g>ot){let ut=ct.contentMatchAt(0),dt=ut.fillBefore(it).append(it);it=dt.append(ut.matchFragment(dt).fillBefore(Fragment.empty,!0))}return it}function replaceRangeWith(it,g,et,ot){if(!ot.isInline&&g==et&&it.doc.resolve(g).parent.content.size){let ct=insertPoint(it.doc,g,ot.type);ct!=null&&(g=et=ct)}it.replaceRange(g,et,new Slice(Fragment.from(ot),0,0))}function deleteRange$1(it,g,et){let ot=it.doc.resolve(g),ct=it.doc.resolve(et),ut=coveredDepths(ot,ct);for(let dt=0;dt<ut.length;dt++){let ft=ut[dt],St=dt==ut.length-1;if(St&&ft==0||ot.node(ft).type.contentMatch.validEnd)return it.delete(ot.start(ft),ct.end(ft));if(ft>0&&(St||ot.node(ft-1).canReplace(ot.index(ft-1),ct.indexAfter(ft-1))))return it.delete(ot.before(ft),ct.after(ft))}for(let dt=1;dt<=ot.depth&&dt<=ct.depth;dt++)if(g-ot.start(dt)==ot.depth-dt&&et>ot.end(dt)&&ct.end(dt)-et!=ct.depth-dt&&ot.start(dt-1)==ct.start(dt-1)&&ot.node(dt-1).canReplace(ot.index(dt-1),ct.index(dt-1)))return it.delete(ot.before(dt),et);it.delete(g,et)}function coveredDepths(it,g){let et=[],ot=Math.min(it.depth,g.depth);for(let ct=ot;ct>=0;ct--){let ut=it.start(ct);if(ut<it.pos-(it.depth-ct)||g.end(ct)>g.pos+(g.depth-ct)||it.node(ct).type.spec.isolating||g.node(ct).type.spec.isolating)break;(ut==g.start(ct)||ct==it.depth&&ct==g.depth&&it.parent.inlineContent&&g.parent.inlineContent&&ct&&g.start(ct-1)==ut-1)&&et.push(ct)}return et}class AttrStep extends Step{constructor(g,et,ot){super(),this.pos=g,this.attr=et,this.value=ot}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at attribute step's position");let ot=Object.create(null);for(let ut in et.attrs)ot[ut]=et.attrs[ut];ot[this.attr]=this.value;let ct=et.type.create(ot,null,et.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ct),0,et.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AttrStep(et.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.pos!="number"||typeof et.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(et.pos,et.attr,et.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,et){super(),this.attr=g,this.value=et}apply(g){let et=Object.create(null);for(let ct in g.attrs)et[ct]=g.attrs[ct];et[this.attr]=this.value;let ot=g.type.create(et,g.content,g.marks);return StepResult.ok(ot)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(et.attr,et.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function it(g){let et=Error.call(this,g);return et.__proto__=it.prototype,et};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let et=this.maybeStep(g);if(et.failed)throw new TransformError(et.failed);return this}maybeStep(g){let et=g.apply(this.doc);return et.failed||this.addStep(g,et.doc),et}get docChanged(){return this.steps.length>0}addStep(g,et){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=et}replace(g,et=g,ot=Slice.empty){let ct=replaceStep(this.doc,g,et,ot);return ct&&this.step(ct),this}replaceWith(g,et,ot){return this.replace(g,et,new Slice(Fragment.from(ot),0,0))}delete(g,et){return this.replace(g,et,Slice.empty)}insert(g,et){return this.replaceWith(g,g,et)}replaceRange(g,et,ot){return replaceRange(this,g,et,ot),this}replaceRangeWith(g,et,ot){return replaceRangeWith(this,g,et,ot),this}deleteRange(g,et){return deleteRange$1(this,g,et),this}lift(g,et){return lift$2(this,g,et),this}join(g,et=1){return join(this,g,et),this}wrap(g,et){return wrap(this,g,et),this}setBlockType(g,et=g,ot,ct=null){return setBlockType$1(this,g,et,ot,ct),this}setNodeMarkup(g,et,ot=null,ct){return setNodeMarkup(this,g,et,ot,ct),this}setNodeAttribute(g,et,ot){return this.step(new AttrStep(g,et,ot)),this}setDocAttribute(g,et){return this.step(new DocAttrStep(g,et)),this}addNodeMark(g,et){return this.step(new AddNodeMarkStep(g,et)),this}removeNodeMark(g,et){let ot=this.doc.nodeAt(g);if(!ot)throw new RangeError("No node at position "+g);if(et instanceof Mark$1)et.isInSet(ot.marks)&&this.step(new RemoveNodeMarkStep(g,et));else{let ct=ot.marks,ut,dt=[];for(;ut=et.isInSet(ct);)dt.push(new RemoveNodeMarkStep(g,ut)),ct=ut.removeFromSet(ct);for(let ft=dt.length-1;ft>=0;ft--)this.step(dt[ft])}return this}split(g,et=1,ot){return split(this,g,et,ot),this}addMark(g,et,ot){return addMark(this,g,et,ot),this}removeMark(g,et,ot){return removeMark(this,g,et,ot),this}clearIncompatible(g,et,ot){return clearIncompatible(this,g,et,ot),this}};const classesById=Object.create(null);class Selection{constructor(g,et,ot){this.$anchor=g,this.$head=et,this.ranges=ot||[new SelectionRange(g.min(et),g.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let et=0;et<g.length;et++)if(g[et].$from.pos!=g[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,et=Slice.empty){let ot=et.content.lastChild,ct=null;for(let ft=0;ft<et.openEnd;ft++)ct=ot,ot=ot.lastChild;let ut=g.steps.length,dt=this.ranges;for(let ft=0;ft<dt.length;ft++){let{$from:St,$to:kt}=dt[ft],Tt=g.mapping.slice(ut);g.replaceRange(Tt.map(St.pos),Tt.map(kt.pos),ft?Slice.empty:et),ft==0&&selectionToInsertionEnd$1(g,ut,(ot?ot.isInline:ct&&ct.isTextblock)?-1:1)}}replaceWith(g,et){let ot=g.steps.length,ct=this.ranges;for(let ut=0;ut<ct.length;ut++){let{$from:dt,$to:ft}=ct[ut],St=g.mapping.slice(ot),kt=St.map(dt.pos),Tt=St.map(ft.pos);ut?g.deleteRange(kt,Tt):(g.replaceRangeWith(kt,Tt,et),selectionToInsertionEnd$1(g,ot,et.isInline?-1:1))}}static findFrom(g,et,ot=!1){let ct=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),et,ot);if(ct)return ct;for(let ut=g.depth-1;ut>=0;ut--){let dt=et<0?findSelectionIn(g.node(0),g.node(ut),g.before(ut+1),g.index(ut),et,ot):findSelectionIn(g.node(0),g.node(ut),g.after(ut+1),g.index(ut)+1,et,ot);if(dt)return dt}return null}static near(g,et=1){return this.findFrom(g,et)||this.findFrom(g,-et)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=classesById[et.type];if(!ot)throw new RangeError(`No selection type ${et.type} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=et,et.prototype.jsonID=g,et}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,et){this.$from=g,this.$to=et}}let warnedAboutTextSelection=!1;function checkTextSelection(it){!warnedAboutTextSelection&&!it.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+it.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,et=g){checkTextSelection(g),checkTextSelection(et),super(g,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,et){let ot=g.resolve(et.map(this.head));if(!ot.parent.inlineContent)return Selection.near(ot);let ct=g.resolve(et.map(this.anchor));return new TextSelection(ct.parent.inlineContent?ct:ot,ot)}replace(g,et=Slice.empty){if(super.replace(g,et),et==Slice.empty){let ot=this.$from.marksAcross(this.$to);ot&&g.ensureMarks(ot)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,et){if(typeof et.anchor!="number"||typeof et.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(et.anchor),g.resolve(et.head))}static create(g,et,ot=et){let ct=g.resolve(et);return new this(ct,ot==et?ct:g.resolve(ot))}static between(g,et,ot){let ct=g.pos-et.pos;if((!ot||ct)&&(ot=ct>=0?1:-1),!et.parent.inlineContent){let ut=Selection.findFrom(et,ot,!0)||Selection.findFrom(et,-ot,!0);if(ut)et=ut.$head;else return Selection.near(et,ot)}return g.parent.inlineContent||(ct==0?g=et:(g=(Selection.findFrom(g,-ot,!0)||Selection.findFrom(g,ot,!0)).$anchor,g.pos<et.pos!=ct<0&&(g=et))),new TextSelection(g,et)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,et){this.anchor=g,this.head=et}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let et=g.nodeAfter,ot=g.node(0).resolve(g.pos+et.nodeSize);super(g,ot),this.node=et}map(g,et){let{deleted:ot,pos:ct}=et.mapResult(this.anchor),ut=g.resolve(ct);return ot?Selection.near(ut):new NodeSelection(ut)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,et){if(typeof et.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(et.anchor))}static create(g,et){return new NodeSelection(g.resolve(et))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:et,pos:ot}=g.mapResult(this.anchor);return et?new TextBookmark(ot,ot):new NodeBookmark(ot)}resolve(g){let et=g.resolve(this.anchor),ot=et.nodeAfter;return ot&&NodeSelection.isSelectable(ot)?new NodeSelection(et):Selection.near(et)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,et=Slice.empty){if(et==Slice.empty){g.delete(0,g.doc.content.size);let ot=Selection.atStart(g.doc);ot.eq(g.selection)||g.setSelection(ot)}else super.replace(g,et)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(it){return new AllSelection(it)}};function findSelectionIn(it,g,et,ot,ct,ut=!1){if(g.inlineContent)return TextSelection.create(it,et);for(let dt=ot-(ct>0?0:1);ct>0?dt<g.childCount:dt>=0;dt+=ct){let ft=g.child(dt);if(ft.isAtom){if(!ut&&NodeSelection.isSelectable(ft))return NodeSelection.create(it,et-(ct<0?ft.nodeSize:0))}else{let St=findSelectionIn(it,ft,et+ct,ct<0?ft.childCount:0,ct,ut);if(St)return St}et+=ft.nodeSize*ct}return null}function selectionToInsertionEnd$1(it,g,et){let ot=it.steps.length-1;if(ot<g)return;let ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;let ut=it.mapping.maps[ot],dt;ut.forEach((ft,St,kt,Tt)=>{dt==null&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,et){super.addStep(g,et),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,et=!0){let ot=this.selection;return et&&(g=g.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||Mark$1.none))),ot.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,et,ot){let ct=this.doc.type.schema;if(et==null)return g?this.replaceSelectionWith(ct.text(g),!0):this.deleteSelection();{if(ot==null&&(ot=et),ot=ot??et,!g)return this.deleteRange(et,ot);let ut=this.storedMarks;if(!ut){let dt=this.doc.resolve(et);ut=ot==et?dt.marks():dt.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(et,ot,ct.text(g,ut)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,et){return this.meta[typeof g=="string"?g:g.key]=et,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(it,g){return!g||!it?it:it.bind(g)}class FieldDesc{constructor(g,et,ot){this.name=g,this.init=bind(et.init,ot),this.apply=bind(et.apply,ot)}}const baseFields=[new FieldDesc("doc",{init(it){return it.doc||it.schema.topNodeType.createAndFill()},apply(it){return it.doc}}),new FieldDesc("selection",{init(it,g){return it.selection||Selection.atStart(g.doc)},apply(it){return it.selection}}),new FieldDesc("storedMarks",{init(it){return it.storedMarks||null},apply(it,g,et,ot){return ot.selection.$cursor?it.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(it,g){return it.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,et){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),et&&et.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new FieldDesc(ot.key,ot.spec.state,ot))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,et=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=et){let ct=this.config.plugins[ot];if(ct.spec.filterTransaction&&!ct.spec.filterTransaction.call(ct,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let et=[g],ot=this.applyInner(g),ct=null;for(;;){let ut=!1;for(let dt=0;dt<this.config.plugins.length;dt++){let ft=this.config.plugins[dt];if(ft.spec.appendTransaction){let St=ct?ct[dt].n:0,kt=ct?ct[dt].state:this,Tt=St<et.length&&ft.spec.appendTransaction.call(ft,St?et.slice(St):et,kt,ot);if(Tt&&ot.filterTransaction(Tt,dt)){if(Tt.setMeta("appendedTransaction",g),!ct){ct=[];for(let jt=0;jt<this.config.plugins.length;jt++)ct.push(jt<dt?{state:ot,n:et.length}:{state:this,n:0})}et.push(Tt),ot=ot.applyInner(Tt),ut=!0}ct&&(ct[dt]={state:ot,n:et.length})}}if(!ut)return{state:ot,transactions:et}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new EditorState(this.config),ot=this.config.fields;for(let ct=0;ct<ot.length;ct++){let ut=ot[ct];et[ut.name]=ut.apply(g,this[ut.name],this,et)}return et}get tr(){return new Transaction(this)}static create(g){let et=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),ot=new EditorState(et);for(let ct=0;ct<et.fields.length;ct++)ot[et.fields[ct].name]=et.fields[ct].init(g,ot);return ot}reconfigure(g){let et=new Configuration(this.schema,g.plugins),ot=et.fields,ct=new EditorState(et);for(let ut=0;ut<ot.length;ut++){let dt=ot[ut].name;ct[dt]=this.hasOwnProperty(dt)?this[dt]:ot[ut].init(g,ct)}return ct}toJSON(g){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),g&&typeof g=="object")for(let ot in g){if(ot=="doc"||ot=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ct=g[ot],ut=ct.spec.state;ut&&ut.toJSON&&(et[ot]=ut.toJSON.call(ct,this[ct.key]))}return et}static fromJSON(g,et,ot){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let ct=new Configuration(g.schema,g.plugins),ut=new EditorState(ct);return ct.fields.forEach(dt=>{if(dt.name=="doc")ut.doc=Node$2.fromJSON(g.schema,et.doc);else if(dt.name=="selection")ut.selection=Selection.fromJSON(ut.doc,et.selection);else if(dt.name=="storedMarks")et.storedMarks&&(ut.storedMarks=et.storedMarks.map(g.schema.markFromJSON));else{if(ot)for(let ft in ot){let St=ot[ft],kt=St.spec.state;if(St.key==dt.name&&kt&&kt.fromJSON&&Object.prototype.hasOwnProperty.call(et,ft)){ut[dt.name]=kt.fromJSON.call(St,g,et[ft],ut);return}}ut[dt.name]=dt.init(g,ut)}}),ut}}function bindProps(it,g,et){for(let ot in it){let ct=it[ot];ct instanceof Function?ct=ct.bind(g):ot=="handleDOMEvents"&&(ct=bindProps(ct,g,{})),et[ot]=ct}return et}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(it){return it in keys?it+"$"+ ++keys[it]:(keys[it]=0,it+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const deleteSelection$1=(it,g)=>it.selection.empty?!1:(g&&g(it.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("backward",it):et.parentOffset>0)?null:et}const joinBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);if(!ct){let dt=ot.blockRange(),ft=dt&&liftTarget(dt);return ft==null?!1:(g&&g(it.tr.lift(dt,ft).scrollIntoView()),!0)}let ut=ct.nodeBefore;if(deleteBarrier(it,ct,g,-1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"end")||NodeSelection.isSelectable(ut)))for(let dt=ot.depth;;dt--){let ft=replaceStep(it.doc,ot.before(dt),ot.after(dt),Slice.empty);if(ft&&ft.slice.size<ft.to-ft.from){if(g){let St=it.tr.step(ft);St.setSelection(textblockAt(ut,"end")?Selection.findFrom(St.doc.resolve(St.mapping.map(ct.pos,-1)),-1):NodeSelection.create(St.doc,ct.pos-ut.nodeSize)),g(St.scrollIntoView())}return!0}if(dt==1||ot.node(dt-1).childCount>1)break}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos-ut.nodeSize,ct.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);return ct?joinTextblocksAround(it,ct,g):!1},joinTextblockForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);return ct?joinTextblocksAround(it,ct,g):!1};function joinTextblocksAround(it,g,et){let ot=g.nodeBefore,ct=ot,ut=g.pos-1;for(;!ct.isTextblock;ut--){if(ct.type.spec.isolating)return!1;let Tt=ct.lastChild;if(!Tt)return!1;ct=Tt}let dt=g.nodeAfter,ft=dt,St=g.pos+1;for(;!ft.isTextblock;St++){if(ft.type.spec.isolating)return!1;let Tt=ft.firstChild;if(!Tt)return!1;ft=Tt}let kt=replaceStep(it.doc,ut,St,Slice.empty);if(!kt||kt.from!=ut||kt instanceof ReplaceStep&&kt.slice.size>=St-ut)return!1;if(et){let Tt=it.tr.step(kt);Tt.setSelection(TextSelection.create(Tt.doc,ut)),et(Tt.scrollIntoView())}return!0}function textblockAt(it,g,et=!1){for(let ot=it;ot;ot=g=="start"?ot.firstChild:ot.lastChild){if(ot.isTextblock)return!0;if(et&&ot.childCount!=1)return!1}return!1}const selectNodeBackward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("backward",it):ot.parentOffset>0)return!1;ut=findCutBefore(ot)}let dt=ut&&ut.nodeBefore;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos-dt.nodeSize)).scrollIntoView()),!0)};function findCutBefore(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){if(it.index(g)>0)return it.doc.resolve(it.before(g+1));if(it.node(g).type.spec.isolating)break}return null}function atBlockEnd(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("forward",it):et.parentOffset<et.parent.content.size)?null:et}const joinForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);if(!ct)return!1;let ut=ct.nodeAfter;if(deleteBarrier(it,ct,g,1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"start")||NodeSelection.isSelectable(ut))){let dt=replaceStep(it.doc,ot.before(),ot.after(),Slice.empty);if(dt&&dt.slice.size<dt.to-dt.from){if(g){let ft=it.tr.step(dt);ft.setSelection(textblockAt(ut,"start")?Selection.findFrom(ft.doc.resolve(ft.mapping.map(ct.pos)),1):NodeSelection.create(ft.doc,ft.mapping.map(ct.pos))),g(ft.scrollIntoView())}return!0}}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos,ct.pos+ut.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("forward",it):ot.parentOffset<ot.parent.content.size)return!1;ut=findCutAfter(ot)}let dt=ut&&ut.nodeAfter;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos)).scrollIntoView()),!0)};function findCutAfter(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){let et=it.node(g);if(it.index(g)+1<et.childCount)return it.doc.resolve(it.after(g+1));if(et.type.spec.isolating)break}return null}const joinUp$1=(it,g)=>{let et=it.selection,ot=et instanceof NodeSelection,ct;if(ot){if(et.node.isTextblock||!canJoin(it.doc,et.from))return!1;ct=et.from}else if(ct=joinPoint(it.doc,et.from,-1),ct==null)return!1;if(g){let ut=it.tr.join(ct);ot&&ut.setSelection(NodeSelection.create(ut.doc,ct-it.doc.resolve(ct).nodeBefore.nodeSize)),g(ut.scrollIntoView())}return!0},joinDown$1=(it,g)=>{let et=it.selection,ot;if(et instanceof NodeSelection){if(et.node.isTextblock||!canJoin(it.doc,et.to))return!1;ot=et.to}else if(ot=joinPoint(it.doc,et.to,1),ot==null)return!1;return g&&g(it.tr.join(ot).scrollIntoView()),!0},lift$1=(it,g)=>{let{$from:et,$to:ot}=it.selection,ct=et.blockRange(ot),ut=ct&&liftTarget(ct);return ut==null?!1:(g&&g(it.tr.lift(ct,ut).scrollIntoView()),!0)},newlineInCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;return!et.parent.type.spec.code||!et.sameParent(ot)?!1:(g&&g(it.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(it){for(let g=0;g<it.edgeCount;g++){let{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}const exitCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;if(!et.parent.type.spec.code||!et.sameParent(ot))return!1;let ct=et.node(-1),ut=et.indexAfter(-1),dt=defaultBlockAt$1(ct.contentMatchAt(ut));if(!dt||!ct.canReplaceWith(ut,ut,dt))return!1;if(g){let ft=et.after(),St=it.tr.replaceWith(ft,ft,dt.createAndFill());St.setSelection(Selection.near(St.doc.resolve(ft),1)),g(St.scrollIntoView())}return!0},createParagraphNear$1=(it,g)=>{let et=it.selection,{$from:ot,$to:ct}=et;if(et instanceof AllSelection||ot.parent.inlineContent||ct.parent.inlineContent)return!1;let ut=defaultBlockAt$1(ct.parent.contentMatchAt(ct.indexAfter()));if(!ut||!ut.isTextblock)return!1;if(g){let dt=(!ot.parentOffset&&ct.index()<ct.parent.childCount?ot:ct).pos,ft=it.tr.insert(dt,ut.createAndFill());ft.setSelection(TextSelection.create(ft.doc,dt+1)),g(ft.scrollIntoView())}return!0},liftEmptyBlock$1=(it,g)=>{let{$cursor:et}=it.selection;if(!et||et.parent.content.size)return!1;if(et.depth>1&&et.after()!=et.end(-1)){let ut=et.before();if(canSplit(it.doc,ut))return g&&g(it.tr.split(ut).scrollIntoView()),!0}let ot=et.blockRange(),ct=ot&&liftTarget(ot);return ct==null?!1:(g&&g(it.tr.lift(ot,ct).scrollIntoView()),!0)},selectParentNode$1=(it,g)=>{let{$from:et,to:ot}=it.selection,ct,ut=et.sharedDepth(ot);return ut==0?!1:(ct=et.before(ut),g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct))),!0)};function joinMaybeClear(it,g,et){let ot=g.nodeBefore,ct=g.nodeAfter,ut=g.index();return!ot||!ct||!ot.type.compatibleContent(ct.type)?!1:!ot.content.size&&g.parent.canReplace(ut-1,ut)?(et&&et(it.tr.delete(g.pos-ot.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(ut,ut+1)||!(ct.isTextblock||canJoin(it.doc,g.pos))?!1:(et&&et(it.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(it,g,et,ot){let ct=g.nodeBefore,ut=g.nodeAfter,dt,ft,St=ct.type.spec.isolating||ut.type.spec.isolating;if(!St&&joinMaybeClear(it,g,et))return!0;let kt=!St&&g.parent.canReplace(g.index(),g.index()+1);if(kt&&(dt=(ft=ct.contentMatchAt(ct.childCount)).findWrapping(ut.type))&&ft.matchType(dt[0]||ut.type).validEnd){if(et){let Ft=g.pos+ut.nodeSize,$t=Fragment.empty;for(let Bt=dt.length-1;Bt>=0;Bt--)$t=Fragment.from(dt[Bt].create(null,$t));$t=Fragment.from(ct.copy($t));let zt=it.tr.step(new ReplaceAroundStep(g.pos-1,Ft,g.pos,Ft,new Slice($t,1,0),dt.length,!0)),Kt=zt.doc.resolve(Ft+2*dt.length);Kt.nodeAfter&&Kt.nodeAfter.type==ct.type&&canJoin(zt.doc,Kt.pos)&&zt.join(Kt.pos),et(zt.scrollIntoView())}return!0}let Tt=ut.type.spec.isolating||ot>0&&St?null:Selection.findFrom(g,1),jt=Tt&&Tt.$from.blockRange(Tt.$to),Rt=jt&&liftTarget(jt);if(Rt!=null&&Rt>=g.depth)return et&&et(it.tr.lift(jt,Rt).scrollIntoView()),!0;if(kt&&textblockAt(ut,"start",!0)&&textblockAt(ct,"end")){let Ft=ct,$t=[];for(;$t.push(Ft),!Ft.isTextblock;)Ft=Ft.lastChild;let zt=ut,Kt=1;for(;!zt.isTextblock;zt=zt.firstChild)Kt++;if(Ft.canReplace(Ft.childCount,Ft.childCount,zt.content)){if(et){let Bt=Fragment.empty;for(let Jt=$t.length-1;Jt>=0;Jt--)Bt=Fragment.from($t[Jt].copy(Bt));let Ut=it.tr.step(new ReplaceAroundStep(g.pos-$t.length,g.pos+ut.nodeSize,g.pos+Kt,g.pos+ut.nodeSize-Kt,new Slice(Bt,$t.length,0),0,!0));et(Ut.scrollIntoView())}return!0}}return!1}function selectTextblockSide(it){return function(g,et){let ot=g.selection,ct=it<0?ot.$from:ot.$to,ut=ct.depth;for(;ct.node(ut).isInline;){if(!ut)return!1;ut--}return ct.node(ut).isTextblock?(et&&et(g.tr.setSelection(TextSelection.create(g.doc,it<0?ct.start(ut):ct.end(ut)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut),ft=dt&&findWrapping(dt,it,g);return ft?(ot&&ot(et.tr.wrap(dt,ft).scrollIntoView()),!0):!1}}function setBlockType(it,g=null){return function(et,ot){let ct=!1;for(let ut=0;ut<et.selection.ranges.length&&!ct;ut++){let{$from:{pos:dt},$to:{pos:ft}}=et.selection.ranges[ut];et.doc.nodesBetween(dt,ft,(St,kt)=>{if(ct)return!1;if(!(!St.isTextblock||St.hasMarkup(it,g)))if(St.type==it)ct=!0;else{let Tt=et.doc.resolve(kt),jt=Tt.index();ct=Tt.parent.canReplaceWith(jt,jt+1,it)}})}if(!ct)return!1;if(ot){let ut=et.tr;for(let dt=0;dt<et.selection.ranges.length;dt++){let{$from:{pos:ft},$to:{pos:St}}=et.selection.ranges[dt];ut.setBlockType(ft,St,it,g)}ot(ut.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut);if(!dt)return!1;let ft=ot?et.tr:null;return wrapRangeInList(ft,dt,it,g)?(ot&&ot(ft.scrollIntoView()),!0):!1}}function wrapRangeInList(it,g,et,ot=null){let ct=!1,ut=g,dt=g.$from.doc;if(g.depth>=2&&g.$from.node(g.depth-1).type.compatibleContent(et)&&g.startIndex==0){if(g.$from.index(g.depth-1)==0)return!1;let St=dt.resolve(g.start-2);ut=new NodeRange(St,St,g.depth),g.endIndex<g.parent.childCount&&(g=new NodeRange(g.$from,dt.resolve(g.$to.end(g.depth)),g.depth)),ct=!0}let ft=findWrapping(ut,et,ot,g);return ft?(it&&doWrapInList(it,g,ft,ct,et),!0):!1}function doWrapInList(it,g,et,ot,ct){let ut=Fragment.empty;for(let Tt=et.length-1;Tt>=0;Tt--)ut=Fragment.from(et[Tt].type.create(et[Tt].attrs,ut));it.step(new ReplaceAroundStep(g.start-(ot?2:0),g.end,g.start,g.end,new Slice(ut,0,0),et.length,!0));let dt=0;for(let Tt=0;Tt<et.length;Tt++)et[Tt].type==ct&&(dt=Tt+1);let ft=et.length-dt,St=g.start+et.length-(ot?2:0),kt=g.parent;for(let Tt=g.startIndex,jt=g.endIndex,Rt=!0;Tt<jt;Tt++,Rt=!1)!Rt&&canSplit(it.doc,St,ft)&&(it.split(St,ft),St+=2*ft),St+=kt.child(Tt).nodeSize;return it}function liftListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,dt=>dt.childCount>0&&dt.firstChild.type==it);return ut?et?ot.node(ut.depth-1).type==it?liftToOuterList(g,et,it,ut):liftOutOfList(g,et,ut):!0:!1}}function liftToOuterList(it,g,et,ot){let ct=it.tr,ut=ot.end,dt=ot.$to.end(ot.depth);ut<dt&&(ct.step(new ReplaceAroundStep(ut-1,dt,ut,dt,new Slice(Fragment.from(et.create(null,ot.parent.copy())),1,0),1,!0)),ot=new NodeRange(ct.doc.resolve(ot.$from.pos),ct.doc.resolve(dt),ot.depth));const ft=liftTarget(ot);if(ft==null)return!1;ct.lift(ot,ft);let St=ct.doc.resolve(ct.mapping.map(ut,-1)-1);return canJoin(ct.doc,St.pos)&&St.nodeBefore.type==St.nodeAfter.type&&ct.join(St.pos),g(ct.scrollIntoView()),!0}function liftOutOfList(it,g,et){let ot=it.tr,ct=et.parent;for(let Ft=et.end,$t=et.endIndex-1,zt=et.startIndex;$t>zt;$t--)Ft-=ct.child($t).nodeSize,ot.delete(Ft-1,Ft+1);let ut=ot.doc.resolve(et.start),dt=ut.nodeAfter;if(ot.mapping.map(et.end)!=et.start+ut.nodeAfter.nodeSize)return!1;let ft=et.startIndex==0,St=et.endIndex==ct.childCount,kt=ut.node(-1),Tt=ut.index(-1);if(!kt.canReplace(Tt+(ft?0:1),Tt+1,dt.content.append(St?Fragment.empty:Fragment.from(ct))))return!1;let jt=ut.pos,Rt=jt+dt.nodeSize;return ot.step(new ReplaceAroundStep(jt-(ft?1:0),Rt+(St?1:0),jt+1,Rt-1,new Slice((ft?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))).append(St?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))),ft?0:1,St?0:1),ft?0:1)),g(ot.scrollIntoView()),!0}function sinkListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,kt=>kt.childCount>0&&kt.firstChild.type==it);if(!ut)return!1;let dt=ut.startIndex;if(dt==0)return!1;let ft=ut.parent,St=ft.child(dt-1);if(St.type!=it)return!1;if(et){let kt=St.lastChild&&St.lastChild.type==ft.type,Tt=Fragment.from(kt?it.create():null),jt=new Slice(Fragment.from(it.create(null,Fragment.from(ft.type.create(null,Tt)))),kt?3:1,0),Rt=ut.start,Ft=ut.end;et(g.tr.step(new ReplaceAroundStep(Rt-(kt?3:1),Ft,Rt,Ft,jt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(it){for(var g=0;;g++)if(it=it.previousSibling,!it)return g},parentNode=function(it){let g=it.assignedSlot||it.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(it,g,et){let ot=reusedRange||(reusedRange=document.createRange());return ot.setEnd(it,et??it.nodeValue.length),ot.setStart(it,g||0),ot},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(it,g,et,ot){return et&&(scanFor(it,g,et,ot,-1)||scanFor(it,g,et,ot,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(it,g,et,ot,ct){for(var ut;;){if(it==et&&g==ot)return!0;if(g==(ct<0?0:nodeSize(it))){let dt=it.parentNode;if(!dt||dt.nodeType!=1||hasBlockDesc(it)||atomElements.test(it.nodeName)||it.contentEditable=="false")return!1;g=domIndex(it)+(ct<0?0:1),it=dt}else if(it.nodeType==1){let dt=it.childNodes[g+(ct<0?-1:0)];if(dt.nodeType==1&&dt.contentEditable=="false")if(!((ut=dt.pmViewDesc)===null||ut===void 0)&&ut.ignoreForSelection)g+=ct;else return!1;else it=dt,g=ct<0?nodeSize(it):0}else return!1}}function nodeSize(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function textNodeBefore$1(it,g){for(;;){if(it.nodeType==3&&g)return it;if(it.nodeType==1&&g>0){if(it.contentEditable=="false")return null;it=it.childNodes[g-1],g=nodeSize(it)}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it),it=it.parentNode;else return null}}function textNodeAfter$1(it,g){for(;;){if(it.nodeType==3&&g<it.nodeValue.length)return it;if(it.nodeType==1&&g<it.childNodes.length){if(it.contentEditable=="false")return null;it=it.childNodes[g],g=0}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it)+1,it=it.parentNode;else return null}}function isOnEdge(it,g,et){for(let ot=g==0,ct=g==nodeSize(it);ot||ct;){if(it==et)return!0;let ut=domIndex(it);if(it=it.parentNode,!it)return!1;ot=ot&&ut==0,ct=ct&&ut==nodeSize(it)}}function hasBlockDesc(it){let g;for(let et=it;et&&!(g=et.pmViewDesc);et=et.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==it||g.contentDOM==it)}const selectionCollapsed=function(it){return it.focusNode&&isEquivalentPosition(it.focusNode,it.focusOffset,it.anchorNode,it.anchorOffset)};function keyEvent(it,g){let et=document.createEvent("Event");return et.initEvent("keydown",!0,!0),et.keyCode=it,et.key=et.code=g,et}function deepActiveElement(it){let g=it.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(it,g,et){if(it.caretPositionFromPoint)try{let ot=it.caretPositionFromPoint(g,et);if(ot)return{node:ot.offsetNode,offset:Math.min(nodeSize(ot.offsetNode),ot.offset)}}catch{}if(it.caretRangeFromPoint){let ot=it.caretRangeFromPoint(g,et);if(ot)return{node:ot.startContainer,offset:Math.min(nodeSize(ot.startContainer),ot.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(it){let g=it.defaultView&&it.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:it.documentElement.clientWidth,top:0,bottom:it.documentElement.clientHeight}}function getSide(it,g){return typeof it=="number"?it:it[g]}function clientRect(it){let g=it.getBoundingClientRect(),et=g.width/it.offsetWidth||1,ot=g.height/it.offsetHeight||1;return{left:g.left,right:g.left+it.clientWidth*et,top:g.top,bottom:g.top+it.clientHeight*ot}}function scrollRectIntoView(it,g,et){let ot=it.someProp("scrollThreshold")||0,ct=it.someProp("scrollMargin")||5,ut=it.dom.ownerDocument;for(let dt=et||it.dom;dt;){if(dt.nodeType!=1){dt=parentNode(dt);continue}let ft=dt,St=ft==ut.body,kt=St?windowRect(ut):clientRect(ft),Tt=0,jt=0;if(g.top<kt.top+getSide(ot,"top")?jt=-(kt.top-g.top+getSide(ct,"top")):g.bottom>kt.bottom-getSide(ot,"bottom")&&(jt=g.bottom-g.top>kt.bottom-kt.top?g.top+getSide(ct,"top")-kt.top:g.bottom-kt.bottom+getSide(ct,"bottom")),g.left<kt.left+getSide(ot,"left")?Tt=-(kt.left-g.left+getSide(ct,"left")):g.right>kt.right-getSide(ot,"right")&&(Tt=g.right-kt.right+getSide(ct,"right")),Tt||jt)if(St)ut.defaultView.scrollBy(Tt,jt);else{let Ft=ft.scrollLeft,$t=ft.scrollTop;jt&&(ft.scrollTop+=jt),Tt&&(ft.scrollLeft+=Tt);let zt=ft.scrollLeft-Ft,Kt=ft.scrollTop-$t;g={left:g.left-zt,top:g.top-Kt,right:g.right-zt,bottom:g.bottom-Kt}}let Rt=St?"fixed":getComputedStyle(dt).position;if(/^(fixed|sticky)$/.test(Rt))break;dt=Rt=="absolute"?dt.offsetParent:parentNode(dt)}}function storeScrollPos(it){let g=it.dom.getBoundingClientRect(),et=Math.max(0,g.top),ot,ct;for(let ut=(g.left+g.right)/2,dt=et+1;dt<Math.min(innerHeight,g.bottom);dt+=5){let ft=it.root.elementFromPoint(ut,dt);if(!ft||ft==it.dom||!it.dom.contains(ft))continue;let St=ft.getBoundingClientRect();if(St.top>=et-20){ot=ft,ct=St.top;break}}return{refDOM:ot,refTop:ct,stack:scrollStack(it.dom)}}function scrollStack(it){let g=[],et=it.ownerDocument;for(let ot=it;ot&&(g.push({dom:ot,top:ot.scrollTop,left:ot.scrollLeft}),it!=et);ot=parentNode(ot));return g}function resetScrollPos({refDOM:it,refTop:g,stack:et}){let ot=it?it.getBoundingClientRect().top:0;restoreScrollStack(et,ot==0?0:ot-g)}function restoreScrollStack(it,g){for(let et=0;et<it.length;et++){let{dom:ot,top:ct,left:ut}=it[et];ot.scrollTop!=ct+g&&(ot.scrollTop=ct+g),ot.scrollLeft!=ut&&(ot.scrollLeft=ut)}}let preventScrollSupported=null;function focusPreventScroll(it){if(it.setActive)return it.setActive();if(preventScrollSupported)return it.focus(preventScrollSupported);let g=scrollStack(it);it.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(it,g){let et,ot=2e8,ct,ut=0,dt=g.top,ft=g.top,St,kt;for(let Tt=it.firstChild,jt=0;Tt;Tt=Tt.nextSibling,jt++){let Rt;if(Tt.nodeType==1)Rt=Tt.getClientRects();else if(Tt.nodeType==3)Rt=textRange(Tt).getClientRects();else continue;for(let Ft=0;Ft<Rt.length;Ft++){let $t=Rt[Ft];if($t.top<=dt&&$t.bottom>=ft){dt=Math.max($t.bottom,dt),ft=Math.min($t.top,ft);let zt=$t.left>g.left?$t.left-g.left:$t.right<g.left?g.left-$t.right:0;if(zt<ot){et=Tt,ot=zt,ct=zt&&et.nodeType==3?{left:$t.right<g.left?$t.right:$t.left,top:g.top}:g,Tt.nodeType==1&&zt&&(ut=jt+(g.left>=($t.left+$t.right)/2?1:0));continue}}else $t.top>g.top&&!St&&$t.left<=g.left&&$t.right>=g.left&&(St=Tt,kt={left:Math.max($t.left,Math.min($t.right,g.left)),top:$t.top});!et&&(g.left>=$t.right&&g.top>=$t.top||g.left>=$t.left&&g.top>=$t.bottom)&&(ut=jt+1)}}return!et&&St&&(et=St,ct=kt,ot=0),et&&et.nodeType==3?findOffsetInText(et,ct):!et||ot&&et.nodeType==1?{node:it,offset:ut}:findOffsetInNode(et,ct)}function findOffsetInText(it,g){let et=it.nodeValue.length,ot=document.createRange();for(let ct=0;ct<et;ct++){ot.setEnd(it,ct+1),ot.setStart(it,ct);let ut=singleRect(ot,1);if(ut.top!=ut.bottom&&inRect(g,ut))return{node:it,offset:ct+(g.left>=(ut.left+ut.right)/2?1:0)}}return{node:it,offset:0}}function inRect(it,g){return it.left>=g.left-1&&it.left<=g.right+1&&it.top>=g.top-1&&it.top<=g.bottom+1}function targetKludge(it,g){let et=it.parentNode;return et&&/^li$/i.test(et.nodeName)&&g.left<it.getBoundingClientRect().left?et:it}function posFromElement(it,g,et){let{node:ot,offset:ct}=findOffsetInNode(g,et),ut=-1;if(ot.nodeType==1&&!ot.firstChild){let dt=ot.getBoundingClientRect();ut=dt.left!=dt.right&&et.left>(dt.left+dt.right)/2?1:-1}return it.docView.posFromDOM(ot,ct,ut)}function posFromCaret(it,g,et,ot){let ct=-1;for(let ut=g,dt=!1;ut!=it.dom;){let ft=it.docView.nearestDesc(ut,!0),St;if(!ft)return null;if(ft.dom.nodeType==1&&(ft.node.isBlock&&ft.parent||!ft.contentDOM)&&((St=ft.dom.getBoundingClientRect()).width||St.height)&&(ft.node.isBlock&&ft.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(ft.dom.nodeName)&&(!dt&&St.left>ot.left||St.top>ot.top?ct=ft.posBefore:(!dt&&St.right<ot.left||St.bottom<ot.top)&&(ct=ft.posAfter),dt=!0),!ft.contentDOM&&ct<0&&!ft.node.isText))return(ft.node.isBlock?ot.top<(St.top+St.bottom)/2:ot.left<(St.left+St.right)/2)?ft.posBefore:ft.posAfter;ut=ft.dom.parentNode}return ct>-1?ct:it.docView.posFromDOM(g,et,-1)}function elementFromPoint(it,g,et){let ot=it.childNodes.length;if(ot&&et.top<et.bottom)for(let ct=Math.max(0,Math.min(ot-1,Math.floor(ot*(g.top-et.top)/(et.bottom-et.top))-2)),ut=ct;;){let dt=it.childNodes[ut];if(dt.nodeType==1){let ft=dt.getClientRects();for(let St=0;St<ft.length;St++){let kt=ft[St];if(inRect(g,kt))return elementFromPoint(dt,g,kt)}}if((ut=(ut+1)%ot)==ct)break}return it}function posAtCoords(it,g){let et=it.dom.ownerDocument,ot,ct=0,ut=caretFromPoint(et,g.left,g.top);ut&&({node:ot,offset:ct}=ut);let dt=(it.root.elementFromPoint?it.root:et).elementFromPoint(g.left,g.top),ft;if(!dt||!it.dom.contains(dt.nodeType!=1?dt.parentNode:dt)){let kt=it.dom.getBoundingClientRect();if(!inRect(g,kt)||(dt=elementFromPoint(it.dom,g,kt),!dt))return null}if(safari)for(let kt=dt;ot&&kt;kt=parentNode(kt))kt.draggable&&(ot=void 0);if(dt=targetKludge(dt,g),ot){if(gecko&&ot.nodeType==1&&(ct=Math.min(ct,ot.childNodes.length),ct<ot.childNodes.length)){let Tt=ot.childNodes[ct],jt;Tt.nodeName=="IMG"&&(jt=Tt.getBoundingClientRect()).right<=g.left&&jt.bottom>g.top&&ct++}let kt;webkit&&ct&&ot.nodeType==1&&(kt=ot.childNodes[ct-1]).nodeType==1&&kt.contentEditable=="false"&&kt.getBoundingClientRect().top>=g.top&&ct--,ot==it.dom&&ct==ot.childNodes.length-1&&ot.lastChild.nodeType==1&&g.top>ot.lastChild.getBoundingClientRect().bottom?ft=it.state.doc.content.size:(ct==0||ot.nodeType!=1||ot.childNodes[ct-1].nodeName!="BR")&&(ft=posFromCaret(it,ot,ct,g))}ft==null&&(ft=posFromElement(it,dt,g));let St=it.docView.nearestDesc(dt,!0);return{pos:ft,inside:St?St.posAtStart-St.border:-1}}function nonZero(it){return it.top<it.bottom||it.left<it.right}function singleRect(it,g){let et=it.getClientRects();if(et.length){let ot=et[g<0?0:et.length-1];if(nonZero(ot))return ot}return Array.prototype.find.call(et,nonZero)||it.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(it,g,et){let{node:ot,offset:ct,atom:ut}=it.docView.domFromPos(g,et<0?-1:1),dt=webkit||gecko;if(ot.nodeType==3)if(dt&&(BIDI.test(ot.nodeValue)||(et<0?!ct:ct==ot.nodeValue.length))){let St=singleRect(textRange(ot,ct,ct),et);if(gecko&&ct&&/\s/.test(ot.nodeValue[ct-1])&&ct<ot.nodeValue.length){let kt=singleRect(textRange(ot,ct-1,ct-1),-1);if(kt.top==St.top){let Tt=singleRect(textRange(ot,ct,ct+1),-1);if(Tt.top!=St.top)return flattenV(Tt,Tt.left<kt.left)}}return St}else{let St=ct,kt=ct,Tt=et<0?1:-1;return et<0&&!ct?(kt++,Tt=-1):et>=0&&ct==ot.nodeValue.length?(St--,Tt=1):et<0?St--:kt++,flattenV(singleRect(textRange(ot,St,kt),Tt),Tt<0)}if(!it.state.doc.resolve(g-(ut||0)).parent.inlineContent){if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!0)}return flattenH(ot.getBoundingClientRect(),et>=0)}if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1],kt=St.nodeType==3?textRange(St,nodeSize(St)-(dt?0:1)):St.nodeType==1&&(St.nodeName!="BR"||!St.nextSibling)?St:null;if(kt)return flattenV(singleRect(kt,1),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];for(;St.pmViewDesc&&St.pmViewDesc.ignoreForCoords;)St=St.nextSibling;let kt=St?St.nodeType==3?textRange(St,0,dt?0:1):St.nodeType==1?St:null:null;if(kt)return flattenV(singleRect(kt,-1),!0)}return flattenV(singleRect(ot.nodeType==3?textRange(ot):ot,-et),et>=0)}function flattenV(it,g){if(it.width==0)return it;let et=g?it.left:it.right;return{top:it.top,bottom:it.bottom,left:et,right:et}}function flattenH(it,g){if(it.height==0)return it;let et=g?it.top:it.bottom;return{top:et,bottom:et,left:it.left,right:it.right}}function withFlushedState(it,g,et){let ot=it.state,ct=it.root.activeElement;ot!=g&&it.updateState(g),ct!=it.dom&&it.focus();try{return et()}finally{ot!=g&&it.updateState(ot),ct!=it.dom&&ct&&ct.focus()}}function endOfTextblockVertical(it,g,et){let ot=g.selection,ct=et=="up"?ot.$from:ot.$to;return withFlushedState(it,g,()=>{let{node:ut}=it.docView.domFromPos(ct.pos,et=="up"?-1:1);for(;;){let ft=it.docView.nearestDesc(ut,!0);if(!ft)break;if(ft.node.isBlock){ut=ft.contentDOM||ft.dom;break}ut=ft.dom.parentNode}let dt=coordsAtPos(it,ct.pos,1);for(let ft=ut.firstChild;ft;ft=ft.nextSibling){let St;if(ft.nodeType==1)St=ft.getClientRects();else if(ft.nodeType==3)St=textRange(ft,0,ft.nodeValue.length).getClientRects();else continue;for(let kt=0;kt<St.length;kt++){let Tt=St[kt];if(Tt.bottom>Tt.top+1&&(et=="up"?dt.top-Tt.top>(Tt.bottom-dt.top)*2:Tt.bottom-dt.bottom>(dt.bottom-Tt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(it,g,et){let{$head:ot}=g.selection;if(!ot.parent.isTextblock)return!1;let ct=ot.parentOffset,ut=!ct,dt=ct==ot.parent.content.size,ft=it.domSelection();return ft?!maybeRTL.test(ot.parent.textContent)||!ft.modify?et=="left"||et=="backward"?ut:dt:withFlushedState(it,g,()=>{let{focusNode:St,focusOffset:kt,anchorNode:Tt,anchorOffset:jt}=it.domSelectionRange(),Rt=ft.caretBidiLevel;ft.modify("move",et,"character");let Ft=ot.depth?it.docView.domAfterPos(ot.before()):it.dom,{focusNode:$t,focusOffset:zt}=it.domSelectionRange(),Kt=$t&&!Ft.contains($t.nodeType==1?$t:$t.parentNode)||St==$t&&kt==zt;try{ft.collapse(Tt,jt),St&&(St!=Tt||kt!=jt)&&ft.extend&&ft.extend(St,kt)}catch{}return Rt!=null&&(ft.caretBidiLevel=Rt),Kt}):ot.pos==ot.start()||ot.pos==ot.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(it,g,et){return cachedState==g&&cachedDir==et?cachedResult:(cachedState=g,cachedDir=et,cachedResult=et=="up"||et=="down"?endOfTextblockVertical(it,g,et):endOfTextblockHorizontal(it,g,et))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,et,ot,ct){this.parent=g,this.children=et,this.dom=ot,this.contentDOM=ct,this.dirty=NOT_DIRTY,ot.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,et,ot){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let et=0;et<this.children.length;et++)g+=this.children[et].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let et=0,ot=this.posAtStart;;et++){let ct=this.children[et];if(ct==g)return ot;ot+=ct.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,et,ot){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(ot<0){let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.previousSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.previousSibling;return ut?this.posBeforeChild(dt)+dt.size:this.posAtStart}else{let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.nextSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.nextSibling;return ut?this.posBeforeChild(dt):this.posAtEnd}let ct;if(g==this.dom&&this.contentDOM)ct=et>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ct=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(et==0)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!1;break}if(ut.previousSibling)break}if(ct==null&&et==g.childNodes.length)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!0;break}if(ut.nextSibling)break}}return ct??ot>0?this.posAtEnd:this.posAtStart}nearestDesc(g,et=!1){for(let ot=!0,ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct),dt;if(ut&&(!et||ut.node))if(ot&&(dt=ut.nodeDOM)&&!(dt.nodeType==1?dt.contains(g.nodeType==1?g:g.parentNode):dt==g))ot=!1;else return ut}}getDesc(g){let et=g.pmViewDesc;for(let ot=et;ot;ot=ot.parent)if(ot==this)return et}posFromDOM(g,et,ot){for(let ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct);if(ut)return ut.localPosFromDOM(g,et,ot)}return-1}descAt(g){for(let et=0,ot=0;et<this.children.length;et++){let ct=this.children[et],ut=ot+ct.size;if(ot==g&&ut!=ot){for(;!ct.border&&ct.children.length;)for(let dt=0;dt<ct.children.length;dt++){let ft=ct.children[dt];if(ft.size){ct=ft;break}}return ct}if(g<ut)return ct.descAt(g-ot-ct.border);ot=ut}}domFromPos(g,et){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let ot=0,ct=0;for(let ut=0;ot<this.children.length;ot++){let dt=this.children[ot],ft=ut+dt.size;if(ft>g||dt instanceof TrailingHackViewDesc){ct=g-ut;break}ut=ft}if(ct)return this.children[ot].domFromPos(ct-this.children[ot].border,et);for(let ut;ot&&!(ut=this.children[ot-1]).size&&ut instanceof WidgetViewDesc&&ut.side>=0;ot--);if(et<=0){let ut,dt=!0;for(;ut=ot?this.children[ot-1]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot--,dt=!1);return ut&&et&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(ut.size,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom)+1:0}}else{let ut,dt=!0;for(;ut=ot<this.children.length?this.children[ot]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot++,dt=!1);return ut&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(0,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom):this.contentDOM.childNodes.length}}}parseRange(g,et,ot=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:et,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ct=-1,ut=-1;for(let dt=ot,ft=0;;ft++){let St=this.children[ft],kt=dt+St.size;if(ct==-1&&g<=kt){let Tt=dt+St.border;if(g>=Tt&&et<=kt-St.border&&St.node&&St.contentDOM&&this.contentDOM.contains(St.contentDOM))return St.parseRange(g,et,Tt);g=dt;for(let jt=ft;jt>0;jt--){let Rt=this.children[jt-1];if(Rt.size&&Rt.dom.parentNode==this.contentDOM&&!Rt.emptyChildAt(1)){ct=domIndex(Rt.dom)+1;break}g-=Rt.size}ct==-1&&(ct=0)}if(ct>-1&&(kt>et||ft==this.children.length-1)){et=kt;for(let Tt=ft+1;Tt<this.children.length;Tt++){let jt=this.children[Tt];if(jt.size&&jt.dom.parentNode==this.contentDOM&&!jt.emptyChildAt(-1)){ut=domIndex(jt.dom);break}et+=jt.size}ut==-1&&(ut=this.contentDOM.childNodes.length);break}dt=kt}return{node:this.contentDOM,from:g,to:et,fromOffset:ct,toOffset:ut}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let et=this.children[g<0?0:this.children.length-1];return et.size==0||et.emptyChildAt(g)}domAfterPos(g){let{node:et,offset:ot}=this.domFromPos(g,0);if(et.nodeType!=1||ot==et.childNodes.length)throw new RangeError("No node after pos "+g);return et.childNodes[ot]}setSelection(g,et,ot,ct=!1){let ut=Math.min(g,et),dt=Math.max(g,et);for(let Ft=0,$t=0;Ft<this.children.length;Ft++){let zt=this.children[Ft],Kt=$t+zt.size;if(ut>$t&&dt<Kt)return zt.setSelection(g-$t-zt.border,et-$t-zt.border,ot,ct);$t=Kt}let ft=this.domFromPos(g,g?-1:1),St=et==g?ft:this.domFromPos(et,et?-1:1),kt=ot.root.getSelection(),Tt=ot.domSelectionRange(),jt=!1;if((gecko||safari)&&g==et){let{node:Ft,offset:$t}=ft;if(Ft.nodeType==3){if(jt=!!($t&&Ft.nodeValue[$t-1]==`
`),jt&&$t==Ft.nodeValue.length)for(let zt=Ft,Kt;zt;zt=zt.parentNode){if(Kt=zt.nextSibling){Kt.nodeName=="BR"&&(ft=St={node:Kt.parentNode,offset:domIndex(Kt)+1});break}let Bt=zt.pmViewDesc;if(Bt&&Bt.node&&Bt.node.isBlock)break}}else{let zt=Ft.childNodes[$t-1];jt=zt&&(zt.nodeName=="BR"||zt.contentEditable=="false")}}if(gecko&&Tt.focusNode&&Tt.focusNode!=St.node&&Tt.focusNode.nodeType==1){let Ft=Tt.focusNode.childNodes[Tt.focusOffset];Ft&&Ft.contentEditable=="false"&&(ct=!0)}if(!(ct||jt&&safari)&&isEquivalentPosition(ft.node,ft.offset,Tt.anchorNode,Tt.anchorOffset)&&isEquivalentPosition(St.node,St.offset,Tt.focusNode,Tt.focusOffset))return;let Rt=!1;if((kt.extend||g==et)&&!(jt&&gecko)){kt.collapse(ft.node,ft.offset);try{g!=et&&kt.extend(St.node,St.offset),Rt=!0}catch{}}if(!Rt){if(g>et){let $t=ft;ft=St,St=$t}let Ft=document.createRange();Ft.setEnd(St.node,St.offset),Ft.setStart(ft.node,ft.offset),kt.removeAllRanges(),kt.addRange(Ft)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,et){for(let ot=0,ct=0;ct<this.children.length;ct++){let ut=this.children[ct],dt=ot+ut.size;if(ot==dt?g<=dt&&et>=ot:g<dt&&et>ot){let ft=ot+ut.border,St=dt-ut.border;if(g>=ft&&et<=St){this.dirty=g==ot||et==dt?CONTENT_DIRTY:CHILD_DIRTY,g==ft&&et==St&&(ut.contentLost||ut.dom.parentNode!=this.contentDOM)?ut.dirty=NODE_DIRTY:ut.markDirty(g-ft,et-ft);return}else ut.dirty=ut.dom==ut.contentDOM&&ut.dom.parentNode==this.contentDOM&&!ut.children.length?CONTENT_DIRTY:NODE_DIRTY}ot=dt}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let et=this.parent;et;et=et.parent,g++){let ot=g==1?CONTENT_DIRTY:CHILD_DIRTY;et.dirty<ot&&(et.dirty=ot)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,et,ot,ct){let ut,dt=et.type.toDOM;if(typeof dt=="function"&&(dt=dt(ot,()=>{if(!ut)return ct;if(ut.parent)return ut.parent.posBeforeChild(ut)})),!et.type.spec.raw){if(dt.nodeType!=1){let ft=document.createElement("span");ft.appendChild(dt),dt=ft}dt.contentEditable="false",dt.classList.add("ProseMirror-widget")}super(g,[],dt,null),this.widget=et,this.widget=et,ut=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let et=this.widget.spec.stopEvent;return et?et(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,et,ot,ct){super(g,[],et,null),this.textDOM=ot,this.text=ct}get size(){return this.text.length}localPosFromDOM(g,et){return g!=this.textDOM?this.posAtStart+(et?this.size:0):this.posAtStart+et}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut){super(g,[],ot,ct),this.mark=et,this.spec=ut}static create(g,et,ot,ct){let ut=ct.nodeViews[et.type.name],dt=ut&&ut(et,ct,ot);return(!dt||!dt.dom)&&(dt=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et,ot),null,et.attrs)),new MarkViewDesc(g,et,dt.dom,dt.contentDOM||dt.dom,dt)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,et){if(super.markDirty(g,et),this.dirty!=NOT_DIRTY){let ot=this.parent;for(;!ot.node;)ot=ot.parent;ot.dirty<this.dirty&&(ot.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,et,ot){let ct=MarkViewDesc.create(this.parent,this.mark,!0,ot),ut=this.children,dt=this.size;et<dt&&(ut=replaceNodes(ut,et,dt,ot)),g>0&&(ut=replaceNodes(ut,0,g,ot));for(let ft=0;ft<ut.length;ft++)ut[ft].parent=ct;return ct.children=ut,ct}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt){super(g,[],ut,dt),this.node=et,this.outerDeco=ot,this.innerDeco=ct,this.nodeDOM=ft}static create(g,et,ot,ct,ut,dt){let ft=ut.nodeViews[et.type.name],St,kt=ft&&ft(et,ut,()=>{if(!St)return dt;if(St.parent)return St.parent.posBeforeChild(St)},ot,ct),Tt=kt&&kt.dom,jt=kt&&kt.contentDOM;if(et.isText){if(!Tt)Tt=document.createTextNode(et.text);else if(Tt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Tt||({dom:Tt,contentDOM:jt}=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et),null,et.attrs));!jt&&!et.isText&&Tt.nodeName!="BR"&&(Tt.hasAttribute("contenteditable")||(Tt.contentEditable="false"),et.type.spec.draggable&&(Tt.draggable=!0));let Rt=Tt;return Tt=applyOuterDeco(Tt,ot,et),kt?St=new CustomNodeViewDesc(g,et,ot,ct,Tt,jt||null,Rt,kt,ut,dt+1):et.isText?new TextViewDesc(g,et,ot,ct,Tt,Rt,ut):new NodeViewDesc(g,et,ot,ct,Tt,jt||null,Rt,ut,dt+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let et=this.children.length-1;et>=0;et--){let ot=this.children[et];if(this.dom.contains(ot.dom.parentNode)){g.contentElement=ot.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,et,ot){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(et,this.outerDeco)&&ot.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,et){let ot=this.node.inlineContent,ct=et,ut=g.composing?this.localCompositionInfo(g,et):null,dt=ut&&ut.pos>-1?ut:null,ft=ut&&ut.pos<0,St=new ViewTreeUpdater(this,dt&&dt.node,g);iterDeco(this.node,this.innerDeco,(kt,Tt,jt)=>{kt.spec.marks?St.syncToMarks(kt.spec.marks,ot,g):kt.type.side>=0&&!jt&&St.syncToMarks(Tt==this.node.childCount?Mark$1.none:this.node.child(Tt).marks,ot,g),St.placeWidget(kt,g,ct)},(kt,Tt,jt,Rt)=>{St.syncToMarks(kt.marks,ot,g);let Ft;St.findNodeMatch(kt,Tt,jt,Rt)||ft&&g.state.selection.from>ct&&g.state.selection.to<ct+kt.nodeSize&&(Ft=St.findIndexWithChild(ut.node))>-1&&St.updateNodeAt(kt,Tt,jt,Ft,g)||St.updateNextNode(kt,Tt,jt,g,Rt,ct)||St.addNode(kt,Tt,jt,g,ct),ct+=kt.nodeSize}),St.syncToMarks([],ot,g),this.node.isTextblock&&St.addTextblockHacks(),St.destroyRest(),(St.changed||this.dirty==CONTENT_DIRTY)&&(dt&&this.protectLocalComposition(g,dt),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,et){let{from:ot,to:ct}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||ot<et||ct>et+this.node.content.size)return null;let ut=g.input.compositionNode;if(!ut||!this.dom.contains(ut.parentNode))return null;if(this.node.inlineContent){let dt=ut.nodeValue,ft=findTextInFragment(this.node.content,dt,ot-et,ct-et);return ft<0?null:{node:ut,pos:ft,text:dt}}else return{node:ut,pos:-1,text:""}}protectLocalComposition(g,{node:et,pos:ot,text:ct}){if(this.getDesc(et))return;let ut=et;for(;ut.parentNode!=this.contentDOM;ut=ut.parentNode){for(;ut.previousSibling;)ut.parentNode.removeChild(ut.previousSibling);for(;ut.nextSibling;)ut.parentNode.removeChild(ut.nextSibling);ut.pmViewDesc&&(ut.pmViewDesc=void 0)}let dt=new CompositionViewDesc(this,ut,et,ct);g.input.compositionNodes.push(dt),this.children=replaceNodes(this.children,ot,ot+ct.length,g,dt)}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,et,ot,ct),!0)}updateInner(g,et,ot,ct){this.updateOuterDeco(et),this.node=g,this.innerDeco=ot,this.contentDOM&&this.updateChildren(ct,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let et=this.nodeDOM.nodeType!=1,ot=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,et),computeOuterDeco(g,this.node,et)),this.dom!=ot&&(ot.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(it,g,et,ot,ct){applyOuterDeco(ot,g,it);let ut=new NodeViewDesc(void 0,it,g,et,ot,ot,ot,ct,0);return ut.contentDOM&&ut.updateChildren(ct,0),ut}class TextViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft){super(g,et,ot,ct,ut,null,dt,ft,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(et),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,ct.trackWrites==this.nodeDOM&&(ct.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let et=this.nodeDOM;et;et=et.parentNode)if(et==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,et,ot){return g==this.nodeDOM?this.posAtStart+Math.min(et,this.node.text.length):super.localPosFromDOM(g,et,ot)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,et,ot){let ct=this.node.cut(g,et),ut=document.createTextNode(ct.text);return new TextViewDesc(this.parent,ct,this.outerDeco,this.innerDeco,ut,ut,ot)}markDirty(g,et){super.markDirty(g,et),this.dom!=this.nodeDOM&&(g==0||et==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt){super(g,et,ot,ct,ut,dt,ft,kt,Tt),this.spec=St}update(g,et,ot,ct){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==g.type||this.spec.multiType)){let ut=this.spec.update(g,et,ot);return ut&&this.updateInner(g,et,ot,ct),ut}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,et,ot,ct)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,et,ot,ct){this.spec.setSelection?this.spec.setSelection(g,et,ot.root):super.setSelection(g,et,ot,ct)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(it,g,et){let ot=it.firstChild,ct=!1;for(let ut=0;ut<g.length;ut++){let dt=g[ut],ft=dt.dom;if(ft.parentNode==it){for(;ft!=ot;)ot=rm(ot),ct=!0;ot=ot.nextSibling}else ct=!0,it.insertBefore(ft,ot);if(dt instanceof MarkViewDesc){let St=ot?ot.previousSibling:it.lastChild;renderDescs(dt.contentDOM,dt.children,et),ot=St?St.nextSibling:it.firstChild}}for(;ot;)ot=rm(ot),ct=!0;ct&&et.trackWrites==it&&(et.trackWrites=null)}const OuterDecoLevel=function(it){it&&(this.nodeName=it)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(it,g,et){if(it.length==0)return noDeco;let ot=et?noDeco[0]:new OuterDecoLevel,ct=[ot];for(let ut=0;ut<it.length;ut++){let dt=it[ut].type.attrs;if(dt){dt.nodeName&&ct.push(ot=new OuterDecoLevel(dt.nodeName));for(let ft in dt){let St=dt[ft];St!=null&&(et&&ct.length==1&&ct.push(ot=new OuterDecoLevel(g.isInline?"span":"div")),ft=="class"?ot.class=(ot.class?ot.class+" ":"")+St:ft=="style"?ot.style=(ot.style?ot.style+";":"")+St:ft!="nodeName"&&(ot[ft]=St))}}}return ct}function patchOuterDeco(it,g,et,ot){if(et==noDeco&&ot==noDeco)return g;let ct=g;for(let ut=0;ut<ot.length;ut++){let dt=ot[ut],ft=et[ut];if(ut){let St;ft&&ft.nodeName==dt.nodeName&&ct!=it&&(St=ct.parentNode)&&St.nodeName.toLowerCase()==dt.nodeName||(St=document.createElement(dt.nodeName),St.pmIsDeco=!0,St.appendChild(ct),ft=noDeco[0]),ct=St}patchAttributes(ct,ft||noDeco[0],dt)}return ct}function patchAttributes(it,g,et){for(let ot in g)ot!="class"&&ot!="style"&&ot!="nodeName"&&!(ot in et)&&it.removeAttribute(ot);for(let ot in et)ot!="class"&&ot!="style"&&ot!="nodeName"&&et[ot]!=g[ot]&&it.setAttribute(ot,et[ot]);if(g.class!=et.class){let ot=g.class?g.class.split(" ").filter(Boolean):[],ct=et.class?et.class.split(" ").filter(Boolean):[];for(let ut=0;ut<ot.length;ut++)ct.indexOf(ot[ut])==-1&&it.classList.remove(ot[ut]);for(let ut=0;ut<ct.length;ut++)ot.indexOf(ct[ut])==-1&&it.classList.add(ct[ut]);it.classList.length==0&&it.removeAttribute("class")}if(g.style!=et.style){if(g.style){let ot=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ct;for(;ct=ot.exec(g.style);)it.style.removeProperty(ct[1])}et.style&&(it.style.cssText+=et.style)}}function applyOuterDeco(it,g,et){return patchOuterDeco(it,it,noDeco,computeOuterDeco(g,et,it.nodeType!=1))}function sameOuterDeco(it,g){if(it.length!=g.length)return!1;for(let et=0;et<it.length;et++)if(!it[et].type.eq(g[et].type))return!1;return!0}function rm(it){let g=it.nextSibling;return it.parentNode.removeChild(it),g}class ViewTreeUpdater{constructor(g,et,ot){this.lock=et,this.view=ot,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,et){if(g!=et){for(let ot=g;ot<et;ot++)this.top.children[ot].destroy();this.top.children.splice(g,et-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,et,ot){let ct=0,ut=this.stack.length>>1,dt=Math.min(ut,g.length);for(;ct<dt&&(ct==ut-1?this.top:this.stack[ct+1<<1]).matchesMark(g[ct])&&g[ct].type.spec.spanning!==!1;)ct++;for(;ct<ut;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),ut--;for(;ut<g.length;){this.stack.push(this.top,this.index+1);let ft=-1;for(let St=this.index;St<Math.min(this.index+3,this.top.children.length);St++){let kt=this.top.children[St];if(kt.matchesMark(g[ut])&&!this.isLocked(kt.dom)){ft=St;break}}if(ft>-1)ft>this.index&&(this.changed=!0,this.destroyBetween(this.index,ft)),this.top=this.top.children[this.index];else{let St=MarkViewDesc.create(this.top,g[ut],et,ot);this.top.children.splice(this.index,0,St),this.top=St,this.changed=!0}this.index=0,ut++}}findNodeMatch(g,et,ot,ct){let ut=-1,dt;if(ct>=this.preMatch.index&&(dt=this.preMatch.matches[ct-this.preMatch.index]).parent==this.top&&dt.matchesNode(g,et,ot))ut=this.top.children.indexOf(dt,this.index);else for(let ft=this.index,St=Math.min(this.top.children.length,ft+5);ft<St;ft++){let kt=this.top.children[ft];if(kt.matchesNode(g,et,ot)&&!this.preMatch.matched.has(kt)){ut=ft;break}}return ut<0?!1:(this.destroyBetween(this.index,ut),this.index++,!0)}updateNodeAt(g,et,ot,ct,ut){let dt=this.top.children[ct];return dt.dirty==NODE_DIRTY&&dt.dom==dt.contentDOM&&(dt.dirty=CONTENT_DIRTY),dt.update(g,et,ot,ut)?(this.destroyBetween(this.index,ct),this.index++,!0):!1}findIndexWithChild(g){for(;;){let et=g.parentNode;if(!et)return-1;if(et==this.top.contentDOM){let ot=g.pmViewDesc;if(ot){for(let ct=this.index;ct<this.top.children.length;ct++)if(this.top.children[ct]==ot)return ct}return-1}g=et}}updateNextNode(g,et,ot,ct,ut,dt){for(let ft=this.index;ft<this.top.children.length;ft++){let St=this.top.children[ft];if(St instanceof NodeViewDesc){let kt=this.preMatch.matched.get(St);if(kt!=null&&kt!=ut)return!1;let Tt=St.dom,jt,Rt=this.isLocked(Tt)&&!(g.isText&&St.node&&St.node.isText&&St.nodeDOM.nodeValue==g.text&&St.dirty!=NODE_DIRTY&&sameOuterDeco(et,St.outerDeco));if(!Rt&&St.update(g,et,ot,ct))return this.destroyBetween(this.index,ft),St.dom!=Tt&&(this.changed=!0),this.index++,!0;if(!Rt&&(jt=this.recreateWrapper(St,g,et,ot,ct,dt)))return this.destroyBetween(this.index,ft),this.top.children[this.index]=jt,jt.contentDOM&&(jt.dirty=CONTENT_DIRTY,jt.updateChildren(ct,dt+1),jt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,et,ot,ct,ut,dt){if(g.dirty||et.isAtom||!g.children.length||!g.node.content.eq(et.content)||!sameOuterDeco(ot,g.outerDeco)||!ct.eq(g.innerDeco))return null;let ft=NodeViewDesc.create(this.top,et,ot,ct,ut,dt);if(ft.contentDOM){ft.children=g.children,g.children=[];for(let St of ft.children)St.parent=ft}return g.destroy(),ft}addNode(g,et,ot,ct,ut){let dt=NodeViewDesc.create(this.top,g,et,ot,ct,ut);dt.contentDOM&&dt.updateChildren(ct,ut+1),this.top.children.splice(this.index++,0,dt),this.changed=!0}placeWidget(g,et,ot){let ct=this.index<this.top.children.length?this.top.children[this.index]:null;if(ct&&ct.matchesWidget(g)&&(g==ct.widget||!ct.widget.type.toDOM.parentNode))this.index++;else{let ut=new WidgetViewDesc(this.top,g,et,ot);this.top.children.splice(this.index++,0,ut),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],et=this.top;for(;g instanceof MarkViewDesc;)et=g,g=et.children[et.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",et),this.addHackNode("BR",this.top))}addHackNode(g,et){if(et==this.top&&this.index<et.children.length&&et.children[this.index].matchesHack(g))this.index++;else{let ot=document.createElement(g);g=="IMG"&&(ot.className="ProseMirror-separator",ot.alt=""),g=="BR"&&(ot.className="ProseMirror-trailingBreak");let ct=new TrailingHackViewDesc(this.top,[],ot,null);et!=this.top?et.children.push(ct):et.children.splice(this.index++,0,ct),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(it,g){let et=g,ot=et.children.length,ct=it.childCount,ut=new Map,dt=[];e:for(;ct>0;){let ft;for(;;)if(ot){let kt=et.children[ot-1];if(kt instanceof MarkViewDesc)et=kt,ot=kt.children.length;else{ft=kt,ot--;break}}else{if(et==g)break e;ot=et.parent.children.indexOf(et),et=et.parent}let St=ft.node;if(St){if(St!=it.child(ct-1))break;--ct,ut.set(ft,ct),dt.push(ft)}}return{index:ct,matched:ut,matches:dt.reverse()}}function compareSide(it,g){return it.type.side-g.type.side}function iterDeco(it,g,et,ot){let ct=g.locals(it),ut=0;if(ct.length==0){for(let kt=0;kt<it.childCount;kt++){let Tt=it.child(kt);ot(Tt,ct,g.forChild(ut,Tt),kt),ut+=Tt.nodeSize}return}let dt=0,ft=[],St=null;for(let kt=0;;){let Tt,jt;for(;dt<ct.length&&ct[dt].to==ut;){let Kt=ct[dt++];Kt.widget&&(Tt?(jt||(jt=[Tt])).push(Kt):Tt=Kt)}if(Tt)if(jt){jt.sort(compareSide);for(let Kt=0;Kt<jt.length;Kt++)et(jt[Kt],kt,!!St)}else et(Tt,kt,!!St);let Rt,Ft;if(St)Ft=-1,Rt=St,St=null;else if(kt<it.childCount)Ft=kt,Rt=it.child(kt++);else break;for(let Kt=0;Kt<ft.length;Kt++)ft[Kt].to<=ut&&ft.splice(Kt--,1);for(;dt<ct.length&&ct[dt].from<=ut&&ct[dt].to>ut;)ft.push(ct[dt++]);let $t=ut+Rt.nodeSize;if(Rt.isText){let Kt=$t;dt<ct.length&&ct[dt].from<Kt&&(Kt=ct[dt].from);for(let Bt=0;Bt<ft.length;Bt++)ft[Bt].to<Kt&&(Kt=ft[Bt].to);Kt<$t&&(St=Rt.cut(Kt-ut),Rt=Rt.cut(0,Kt-ut),$t=Kt,Ft=-1)}else for(;dt<ct.length&&ct[dt].to<$t;)dt++;let zt=Rt.isInline&&!Rt.isLeaf?ft.filter(Kt=>!Kt.inline):ft.slice();ot(Rt,zt,g.forChild(ut,Rt),Ft),ut=$t}}function iosHacks(it){if(it.nodeName=="UL"||it.nodeName=="OL"){let g=it.style.cssText;it.style.cssText=g+"; list-style: square !important",window.getComputedStyle(it).listStyle,it.style.cssText=g}}function findTextInFragment(it,g,et,ot){for(let ct=0,ut=0;ct<it.childCount&&ut<=ot;){let dt=it.child(ct++),ft=ut;if(ut+=dt.nodeSize,!dt.isText)continue;let St=dt.text;for(;ct<it.childCount;){let kt=it.child(ct++);if(ut+=kt.nodeSize,!kt.isText)break;St+=kt.text}if(ut>=et){if(ut>=ot&&St.slice(ot-g.length-ft,ot-ft)==g)return ot-g.length;let kt=ft<ot?St.lastIndexOf(g,ot-ft-1):-1;if(kt>=0&&kt+g.length+ft>=et)return ft+kt;if(et==ot&&St.length>=ot+g.length-ft&&St.slice(ot-ft,ot-ft+g.length)==g)return ot}}return-1}function replaceNodes(it,g,et,ot,ct){let ut=[];for(let dt=0,ft=0;dt<it.length;dt++){let St=it[dt],kt=ft,Tt=ft+=St.size;kt>=et||Tt<=g?ut.push(St):(kt<g&&ut.push(St.slice(0,g-kt,ot)),ct&&(ut.push(ct),ct=void 0),Tt>et&&ut.push(St.slice(et-kt,St.size,ot)))}return ut}function selectionFromDOM(it,g=null){let et=it.domSelectionRange(),ot=it.state.doc;if(!et.focusNode)return null;let ct=it.docView.nearestDesc(et.focusNode),ut=ct&&ct.size==0,dt=it.docView.posFromDOM(et.focusNode,et.focusOffset,1);if(dt<0)return null;let ft=ot.resolve(dt),St,kt;if(selectionCollapsed(et)){for(St=dt;ct&&!ct.node;)ct=ct.parent;let jt=ct.node;if(ct&&jt.isAtom&&NodeSelection.isSelectable(jt)&&ct.parent&&!(jt.isInline&&isOnEdge(et.focusNode,et.focusOffset,ct.dom))){let Rt=ct.posBefore;kt=new NodeSelection(dt==Rt?ft:ot.resolve(Rt))}}else{if(et instanceof it.dom.ownerDocument.defaultView.Selection&&et.rangeCount>1){let jt=dt,Rt=dt;for(let Ft=0;Ft<et.rangeCount;Ft++){let $t=et.getRangeAt(Ft);jt=Math.min(jt,it.docView.posFromDOM($t.startContainer,$t.startOffset,1)),Rt=Math.max(Rt,it.docView.posFromDOM($t.endContainer,$t.endOffset,-1))}if(jt<0)return null;[St,dt]=Rt==it.state.selection.anchor?[Rt,jt]:[jt,Rt],ft=ot.resolve(dt)}else St=it.docView.posFromDOM(et.anchorNode,et.anchorOffset,1);if(St<0)return null}let Tt=ot.resolve(St);if(!kt){let jt=g=="pointer"||it.state.selection.head<ft.pos&&!ut?1:-1;kt=selectionBetween(it,Tt,ft,jt)}return kt}function editorOwnsSelection(it){return it.editable?it.hasFocus():hasSelection(it)&&document.activeElement&&document.activeElement.contains(it.dom)}function selectionToDOM(it,g=!1){let et=it.state.selection;if(syncNodeSelection(it,et),!!editorOwnsSelection(it)){if(!g&&it.input.mouseDown&&it.input.mouseDown.allowDefault&&chrome){let ot=it.domSelectionRange(),ct=it.domObserver.currentSelection;if(ot.anchorNode&&ct.anchorNode&&isEquivalentPosition(ot.anchorNode,ot.anchorOffset,ct.anchorNode,ct.anchorOffset)){it.input.mouseDown.delayedSelectionSync=!0,it.domObserver.setCurSelection();return}}if(it.domObserver.disconnectSelection(),it.cursorWrapper)selectCursorWrapper(it);else{let{anchor:ot,head:ct}=et,ut,dt;brokenSelectBetweenUneditable&&!(et instanceof TextSelection)&&(et.$from.parent.inlineContent||(ut=temporarilyEditableNear(it,et.from)),!et.empty&&!et.$from.parent.inlineContent&&(dt=temporarilyEditableNear(it,et.to))),it.docView.setSelection(ot,ct,it,g),brokenSelectBetweenUneditable&&(ut&&resetEditable(ut),dt&&resetEditable(dt)),et.visible?it.dom.classList.remove("ProseMirror-hideselection"):(it.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(it))}it.domObserver.setCurSelection(),it.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(it,g){let{node:et,offset:ot}=it.docView.domFromPos(g,0),ct=ot<et.childNodes.length?et.childNodes[ot]:null,ut=ot?et.childNodes[ot-1]:null;if(safari&&ct&&ct.contentEditable=="false")return setEditable(ct);if((!ct||ct.contentEditable=="false")&&(!ut||ut.contentEditable=="false")){if(ct)return setEditable(ct);if(ut)return setEditable(ut)}}function setEditable(it){return it.contentEditable="true",safari&&it.draggable&&(it.draggable=!1,it.wasDraggable=!0),it}function resetEditable(it){it.contentEditable="false",it.wasDraggable&&(it.draggable=!0,it.wasDraggable=null)}function removeClassOnSelectionChange(it){let g=it.dom.ownerDocument;g.removeEventListener("selectionchange",it.input.hideSelectionGuard);let et=it.domSelectionRange(),ot=et.anchorNode,ct=et.anchorOffset;g.addEventListener("selectionchange",it.input.hideSelectionGuard=()=>{(et.anchorNode!=ot||et.anchorOffset!=ct)&&(g.removeEventListener("selectionchange",it.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(it)||it.state.selection.visible)&&it.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(it){let g=it.domSelection();if(!g)return;let et=it.cursorWrapper.dom,ot=et.nodeName=="IMG";ot?g.collapse(et.parentNode,domIndex(et)+1):g.collapse(et,0),!ot&&!it.state.selection.visible&&ie$1&&ie_version<=11&&(et.disabled=!0,et.disabled=!1)}function syncNodeSelection(it,g){if(g instanceof NodeSelection){let et=it.docView.descAt(g.from);et!=it.lastSelectedViewDesc&&(clearNodeSelection(it),et&&et.selectNode(),it.lastSelectedViewDesc=et)}else clearNodeSelection(it)}function clearNodeSelection(it){it.lastSelectedViewDesc&&(it.lastSelectedViewDesc.parent&&it.lastSelectedViewDesc.deselectNode(),it.lastSelectedViewDesc=void 0)}function selectionBetween(it,g,et,ot){return it.someProp("createSelectionBetween",ct=>ct(it,g,et))||TextSelection.between(g,et,ot)}function hasFocusAndSelection(it){return it.editable&&!it.hasFocus()?!1:hasSelection(it)}function hasSelection(it){let g=it.domSelectionRange();if(!g.anchorNode)return!1;try{return it.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(it.editable||it.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(it){let g=it.docView.domFromPos(it.state.selection.anchor,0),et=it.domSelectionRange();return isEquivalentPosition(g.node,g.offset,et.anchorNode,et.anchorOffset)}function moveSelectionBlock(it,g){let{$anchor:et,$head:ot}=it.selection,ct=g>0?et.max(ot):et.min(ot),ut=ct.parent.inlineContent?ct.depth?it.doc.resolve(g>0?ct.after():ct.before()):null:ct;return ut&&Selection.findFrom(ut,g)}function apply(it,g){return it.dispatch(it.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection)if(et.indexOf("s")>-1){let{$head:ct}=ot,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter;if(!ut||ut.isText||!ut.isLeaf)return!1;let dt=it.state.doc.resolve(ct.pos+ut.nodeSize*(g<0?-1:1));return apply(it,new TextSelection(ot.$anchor,dt))}else if(ot.empty){if(it.endOfTextblock(g>0?"forward":"backward")){let ct=moveSelectionBlock(it.state,g);return ct&&ct instanceof NodeSelection?apply(it,ct):!1}else if(!(mac$2&&et.indexOf("m")>-1)){let ct=ot.$head,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter,dt;if(!ut||ut.isText)return!1;let ft=g<0?ct.pos-ut.nodeSize:ct.pos;return ut.isAtom||(dt=it.docView.descAt(ft))&&!dt.contentDOM?NodeSelection.isSelectable(ut)?apply(it,new NodeSelection(g<0?it.state.doc.resolve(ct.pos-ut.nodeSize):ct)):webkit?apply(it,new TextSelection(it.state.doc.resolve(g<0?ft:ft+ut.nodeSize))):!1:!1}}else return!1;else{if(ot instanceof NodeSelection&&ot.node.isInline)return apply(it,new TextSelection(g>0?ot.$to:ot.$from));{let ct=moveSelectionBlock(it.state,g);return ct?apply(it,ct):!1}}}function nodeLen(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function isIgnorable(it,g){let et=it.pmViewDesc;return et&&et.size==0&&(g<0||it.nextSibling||it.nodeName!="BR")}function skipIgnoredNodes(it,g){return g<0?skipIgnoredNodesBefore(it):skipIgnoredNodesAfter(it)}function skipIgnoredNodesBefore(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct,ut,dt=!1;for(gecko&&et.nodeType==1&&ot<nodeLen(et)&&isIgnorable(et.childNodes[ot],-1)&&(dt=!0);;)if(ot>0){if(et.nodeType!=1)break;{let ft=et.childNodes[ot-1];if(isIgnorable(ft,-1))ct=et,ut=--ot;else if(ft.nodeType==3)et=ft,ot=et.nodeValue.length;else break}}else{if(isBlockNode(et))break;{let ft=et.previousSibling;for(;ft&&isIgnorable(ft,-1);)ct=et.parentNode,ut=domIndex(ft),ft=ft.previousSibling;if(ft)et=ft,ot=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=0}}}dt?setSelFocus(it,et,ot):ct&&setSelFocus(it,ct,ut)}function skipIgnoredNodesAfter(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct=nodeLen(et),ut,dt;for(;;)if(ot<ct){if(et.nodeType!=1)break;let ft=et.childNodes[ot];if(isIgnorable(ft,1))ut=et,dt=++ot;else break}else{if(isBlockNode(et))break;{let ft=et.nextSibling;for(;ft&&isIgnorable(ft,1);)ut=ft.parentNode,dt=domIndex(ft)+1,ft=ft.nextSibling;if(ft)et=ft,ot=0,ct=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=ct=0}}}ut&&setSelFocus(it,ut,dt)}function isBlockNode(it){let g=it.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(it,g){for(;it&&g==it.childNodes.length&&!hasBlockDesc(it);)g=domIndex(it)+1,it=it.parentNode;for(;it&&g<it.childNodes.length;){let et=it.childNodes[g];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=0}}function textNodeBefore(it,g){for(;it&&!g&&!hasBlockDesc(it);)g=domIndex(it),it=it.parentNode;for(;it&&g;){let et=it.childNodes[g-1];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=it.childNodes.length}}function setSelFocus(it,g,et){if(g.nodeType!=3){let ut,dt;(dt=textNodeAfter(g,et))?(g=dt,et=0):(ut=textNodeBefore(g,et))&&(g=ut,et=ut.nodeValue.length)}let ot=it.domSelection();if(!ot)return;if(selectionCollapsed(ot)){let ut=document.createRange();ut.setEnd(g,et),ut.setStart(g,et),ot.removeAllRanges(),ot.addRange(ut)}else ot.extend&&ot.extend(g,et);it.domObserver.setCurSelection();let{state:ct}=it;setTimeout(()=>{it.state==ct&&selectionToDOM(it)},50)}function findDirection(it,g){let et=it.state.doc.resolve(g);if(!(chrome||windows$1)&&et.parent.inlineContent){let ct=it.coordsAtPos(g);if(g>et.start()){let ut=it.coordsAtPos(g-1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left<ct.left?"ltr":"rtl"}if(g<et.end()){let ut=it.coordsAtPos(g+1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left>ct.left?"ltr":"rtl"}}return getComputedStyle(it.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection&&!ot.empty||et.indexOf("s")>-1||mac$2&&et.indexOf("m")>-1)return!1;let{$from:ct,$to:ut}=ot;if(!ct.parent.inlineContent||it.endOfTextblock(g<0?"up":"down")){let dt=moveSelectionBlock(it.state,g);if(dt&&dt instanceof NodeSelection)return apply(it,dt)}if(!ct.parent.inlineContent){let dt=g<0?ct:ut,ft=ot instanceof AllSelection?Selection.near(dt,g):Selection.findFrom(dt,g);return ft?apply(it,ft):!1}return!1}function stopNativeHorizontalDelete(it,g){if(!(it.state.selection instanceof TextSelection))return!0;let{$head:et,$anchor:ot,empty:ct}=it.state.selection;if(!et.sameParent(ot))return!0;if(!ct)return!1;if(it.endOfTextblock(g>0?"forward":"backward"))return!0;let ut=!et.textOffset&&(g<0?et.nodeBefore:et.nodeAfter);if(ut&&!ut.isText){let dt=it.state.tr;return g<0?dt.delete(et.pos-ut.nodeSize,et.pos):dt.delete(et.pos,et.pos+ut.nodeSize),it.dispatch(dt),!0}return!1}function switchEditable(it,g,et){it.domObserver.stop(),g.contentEditable=et,it.domObserver.start()}function safariDownArrowBug(it){if(!safari||it.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:et}=it.domSelectionRange();if(g&&g.nodeType==1&&et==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let ot=g.firstChild;switchEditable(it,ot,"true"),setTimeout(()=>switchEditable(it,ot,"false"),20)}return!1}function getMods(it){let g="";return it.ctrlKey&&(g+="c"),it.metaKey&&(g+="m"),it.altKey&&(g+="a"),it.shiftKey&&(g+="s"),g}function captureKeyDown(it,g){let et=g.keyCode,ot=getMods(g);if(et==8||mac$2&&et==72&&ot=="c")return stopNativeHorizontalDelete(it,-1)||skipIgnoredNodes(it,-1);if(et==46&&!g.shiftKey||mac$2&&et==68&&ot=="c")return stopNativeHorizontalDelete(it,1)||skipIgnoredNodes(it,1);if(et==13||et==27)return!0;if(et==37||mac$2&&et==66&&ot=="c"){let ct=et==37?findDirection(it,it.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else if(et==39||mac$2&&et==70&&ot=="c"){let ct=et==39?findDirection(it,it.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else{if(et==38||mac$2&&et==80&&ot=="c")return selectVertically(it,-1,ot)||skipIgnoredNodes(it,-1);if(et==40||mac$2&&et==78&&ot=="c")return safariDownArrowBug(it)||selectVertically(it,1,ot)||skipIgnoredNodes(it,1);if(ot==(mac$2?"m":"c")&&(et==66||et==73||et==89||et==90))return!0}return!1}function serializeForClipboard(it,g){it.someProp("transformCopied",Ft=>{g=Ft(g,it)});let et=[],{content:ot,openStart:ct,openEnd:ut}=g;for(;ct>1&&ut>1&&ot.childCount==1&&ot.firstChild.childCount==1;){ct--,ut--;let Ft=ot.firstChild;et.push(Ft.type.name,Ft.attrs!=Ft.type.defaultAttrs?Ft.attrs:null),ot=Ft.content}let dt=it.someProp("clipboardSerializer")||DOMSerializer.fromSchema(it.state.schema),ft=detachedDoc(),St=ft.createElement("div");St.appendChild(dt.serializeFragment(ot,{document:ft}));let kt=St.firstChild,Tt,jt=0;for(;kt&&kt.nodeType==1&&(Tt=wrapMap[kt.nodeName.toLowerCase()]);){for(let Ft=Tt.length-1;Ft>=0;Ft--){let $t=ft.createElement(Tt[Ft]);for(;St.firstChild;)$t.appendChild(St.firstChild);St.appendChild($t),jt++}kt=St.firstChild}kt&&kt.nodeType==1&&kt.setAttribute("data-pm-slice",`${ct} ${ut}${jt?` -${jt}`:""} ${JSON.stringify(et)}`);let Rt=it.someProp("clipboardTextSerializer",Ft=>Ft(g,it))||g.content.textBetween(0,g.content.size,`

`);return{dom:St,text:Rt,slice:g}}function parseFromClipboard(it,g,et,ot,ct){let ut=ct.parent.type.spec.code,dt,ft;if(!et&&!g)return null;let St=!!g&&(ot||ut||!et);if(St){if(it.someProp("transformPastedText",Rt=>{g=Rt(g,ut||ot,it)}),ut)return ft=new Slice(Fragment.from(it.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0),it.someProp("transformPasted",Rt=>{ft=Rt(ft,it,!0)}),ft;let jt=it.someProp("clipboardTextParser",Rt=>Rt(g,ct,ot,it));if(jt)ft=jt;else{let Rt=ct.marks(),{schema:Ft}=it.state,$t=DOMSerializer.fromSchema(Ft);dt=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(zt=>{let Kt=dt.appendChild(document.createElement("p"));zt&&Kt.appendChild($t.serializeNode(Ft.text(zt,Rt)))})}}else it.someProp("transformPastedHTML",jt=>{et=jt(et,it)}),dt=readHTML(et),webkit&&restoreReplacedSpaces(dt);let kt=dt&&dt.querySelector("[data-pm-slice]"),Tt=kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(kt.getAttribute("data-pm-slice")||"");if(Tt&&Tt[3])for(let jt=+Tt[3];jt>0;jt--){let Rt=dt.firstChild;for(;Rt&&Rt.nodeType!=1;)Rt=Rt.nextSibling;if(!Rt)break;dt=Rt}if(ft||(ft=(it.someProp("clipboardParser")||it.someProp("domParser")||DOMParser.fromSchema(it.state.schema)).parseSlice(dt,{preserveWhitespace:!!(St||Tt),context:ct,ruleFromNode(Rt){return Rt.nodeName=="BR"&&!Rt.nextSibling&&Rt.parentNode&&!inlineParents.test(Rt.parentNode.nodeName)?{ignore:!0}:null}})),Tt)ft=addContext(closeSlice(ft,+Tt[1],+Tt[2]),Tt[4]);else if(ft=Slice.maxOpen(normalizeSiblings(ft.content,ct),!0),ft.openStart||ft.openEnd){let jt=0,Rt=0;for(let Ft=ft.content.firstChild;jt<ft.openStart&&!Ft.type.spec.isolating;jt++,Ft=Ft.firstChild);for(let Ft=ft.content.lastChild;Rt<ft.openEnd&&!Ft.type.spec.isolating;Rt++,Ft=Ft.lastChild);ft=closeSlice(ft,jt,Rt)}return it.someProp("transformPasted",jt=>{ft=jt(ft,it,St)}),ft}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(it,g){if(it.childCount<2)return it;for(let et=g.depth;et>=0;et--){let ct=g.node(et).contentMatchAt(g.index(et)),ut,dt=[];if(it.forEach(ft=>{if(!dt)return;let St=ct.findWrapping(ft.type),kt;if(!St)return dt=null;if(kt=dt.length&&ut.length&&addToSibling(St,ut,ft,dt[dt.length-1],0))dt[dt.length-1]=kt;else{dt.length&&(dt[dt.length-1]=closeRight(dt[dt.length-1],ut.length));let Tt=withWrappers(ft,St);dt.push(Tt),ct=ct.matchType(Tt.type),ut=St}}),dt)return Fragment.from(dt)}return it}function withWrappers(it,g,et=0){for(let ot=g.length-1;ot>=et;ot--)it=g[ot].create(null,Fragment.from(it));return it}function addToSibling(it,g,et,ot,ct){if(ct<it.length&&ct<g.length&&it[ct]==g[ct]){let ut=addToSibling(it,g,et,ot.lastChild,ct+1);if(ut)return ot.copy(ot.content.replaceChild(ot.childCount-1,ut));if(ot.contentMatchAt(ot.childCount).matchType(ct==it.length-1?et.type:it[ct+1]))return ot.copy(ot.content.append(Fragment.from(withWrappers(et,it,ct+1))))}}function closeRight(it,g){if(g==0)return it;let et=it.content.replaceChild(it.childCount-1,closeRight(it.lastChild,g-1)),ot=it.contentMatchAt(it.childCount).fillBefore(Fragment.empty,!0);return it.copy(et.append(ot))}function closeRange(it,g,et,ot,ct,ut){let dt=g<0?it.firstChild:it.lastChild,ft=dt.content;return it.childCount>1&&(ut=0),ct<ot-1&&(ft=closeRange(ft,g,et,ot,ct+1,ut)),ct>=et&&(ft=g<0?dt.contentMatchAt(0).fillBefore(ft,ut<=ct).append(ft):ft.append(dt.contentMatchAt(dt.childCount).fillBefore(Fragment.empty,!0))),it.replaceChild(g<0?0:it.childCount-1,dt.copy(ft))}function closeSlice(it,g,et){return g<it.openStart&&(it=new Slice(closeRange(it.content,-1,g,it.openStart,0,it.openEnd),g,it.openEnd)),et<it.openEnd&&(it=new Slice(closeRange(it.content,1,et,it.openEnd,0,0),it.openStart,et)),it}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(it){let g=window.trustedTypes;return g?(_policy||(_policy=g.defaultPolicy||g.createPolicy("ProseMirrorClipboard",{createHTML:et=>et})),_policy.createHTML(it)):it}function readHTML(it){let g=/^(\s*<meta [^>]*>)*/.exec(it);g&&(it=it.slice(g[0].length));let et=detachedDoc().createElement("div"),ot=/<([a-z][^>\s]+)/i.exec(it),ct;if((ct=ot&&wrapMap[ot[1].toLowerCase()])&&(it=ct.map(ut=>"<"+ut+">").join("")+it+ct.map(ut=>"</"+ut+">").reverse().join("")),et.innerHTML=maybeWrapTrusted(it),ct)for(let ut=0;ut<ct.length;ut++)et=et.querySelector(ct[ut])||et;return et}function restoreReplacedSpaces(it){let g=it.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let et=0;et<g.length;et++){let ot=g[et];ot.childNodes.length==1&&ot.textContent==" "&&ot.parentNode&&ot.parentNode.replaceChild(it.ownerDocument.createTextNode(" "),ot)}}function addContext(it,g){if(!it.size)return it;let et=it.content.firstChild.type.schema,ot;try{ot=JSON.parse(g)}catch{return it}let{content:ct,openStart:ut,openEnd:dt}=it;for(let ft=ot.length-2;ft>=0;ft-=2){let St=et.nodes[ot[ft]];if(!St||St.hasRequiredAttrs())break;ct=Fragment.from(St.create(ot[ft+1],ct)),ut++,dt++}return new Slice(ct,ut,dt)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(it){for(let g in handlers){let et=handlers[g];it.dom.addEventListener(g,it.input.eventHandlers[g]=ot=>{eventBelongsToView(it,ot)&&!runCustomHandler(it,ot)&&(it.editable||!(ot.type in editHandlers))&&et(it,ot)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&it.dom.addEventListener("input",()=>null),ensureListeners(it)}function setSelectionOrigin(it,g){it.input.lastSelectionOrigin=g,it.input.lastSelectionTime=Date.now()}function destroyInput(it){it.domObserver.stop();for(let g in it.input.eventHandlers)it.dom.removeEventListener(g,it.input.eventHandlers[g]);clearTimeout(it.input.composingTimeout),clearTimeout(it.input.lastIOSEnterFallbackTimeout)}function ensureListeners(it){it.someProp("handleDOMEvents",g=>{for(let et in g)it.input.eventHandlers[et]||it.dom.addEventListener(et,it.input.eventHandlers[et]=ot=>runCustomHandler(it,ot))})}function runCustomHandler(it,g){return it.someProp("handleDOMEvents",et=>{let ot=et[g.type];return ot?ot(it,g)||g.defaultPrevented:!1})}function eventBelongsToView(it,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let et=g.target;et!=it.dom;et=et.parentNode)if(!et||et.nodeType==11||et.pmViewDesc&&et.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(it,g){!runCustomHandler(it,g)&&handlers[g.type]&&(it.editable||!(g.type in editHandlers))&&handlers[g.type](it,g)}editHandlers.keydown=(it,g)=>{let et=g;if(it.input.shiftKey=et.keyCode==16||et.shiftKey,!inOrNearComposition(it,et)&&(it.input.lastKeyCode=et.keyCode,it.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&et.keyCode==13)))if(et.keyCode!=229&&it.domObserver.forceFlush(),ios&&et.keyCode==13&&!et.ctrlKey&&!et.altKey&&!et.metaKey){let ot=Date.now();it.input.lastIOSEnter=ot,it.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{it.input.lastIOSEnter==ot&&(it.someProp("handleKeyDown",ct=>ct(it,keyEvent(13,"Enter"))),it.input.lastIOSEnter=0)},200)}else it.someProp("handleKeyDown",ot=>ot(it,et))||captureKeyDown(it,et)?et.preventDefault():setSelectionOrigin(it,"key")};editHandlers.keyup=(it,g)=>{g.keyCode==16&&(it.input.shiftKey=!1)};editHandlers.keypress=(it,g)=>{let et=g;if(inOrNearComposition(it,et)||!et.charCode||et.ctrlKey&&!et.altKey||mac$2&&et.metaKey)return;if(it.someProp("handleKeyPress",ct=>ct(it,et))){et.preventDefault();return}let ot=it.state.selection;if(!(ot instanceof TextSelection)||!ot.$from.sameParent(ot.$to)){let ct=String.fromCharCode(et.charCode),ut=()=>it.state.tr.insertText(ct).scrollIntoView();!/[\r\n]/.test(ct)&&!it.someProp("handleTextInput",dt=>dt(it,ot.$from.pos,ot.$to.pos,ct,ut))&&it.dispatch(ut()),et.preventDefault()}};function eventCoords(it){return{left:it.clientX,top:it.clientY}}function isNear(it,g){let et=g.x-it.clientX,ot=g.y-it.clientY;return et*et+ot*ot<100}function runHandlerOnContext(it,g,et,ot,ct){if(ot==-1)return!1;let ut=it.state.doc.resolve(ot);for(let dt=ut.depth+1;dt>0;dt--)if(it.someProp(g,ft=>dt>ut.depth?ft(it,et,ut.nodeAfter,ut.before(dt),ct,!0):ft(it,et,ut.node(dt),ut.before(dt),ct,!1)))return!0;return!1}function updateSelection(it,g,et){if(it.focused||it.focus(),it.state.selection.eq(g))return;let ot=it.state.tr.setSelection(g);et=="pointer"&&ot.setMeta("pointer",!0),it.dispatch(ot)}function selectClickedLeaf(it,g){if(g==-1)return!1;let et=it.state.doc.resolve(g),ot=et.nodeAfter;return ot&&ot.isAtom&&NodeSelection.isSelectable(ot)?(updateSelection(it,new NodeSelection(et),"pointer"),!0):!1}function selectClickedNode(it,g){if(g==-1)return!1;let et=it.state.selection,ot,ct;et instanceof NodeSelection&&(ot=et.node);let ut=it.state.doc.resolve(g);for(let dt=ut.depth+1;dt>0;dt--){let ft=dt>ut.depth?ut.nodeAfter:ut.node(dt);if(NodeSelection.isSelectable(ft)){ot&&et.$from.depth>0&&dt>=et.$from.depth&&ut.before(et.$from.depth+1)==et.$from.pos?ct=ut.before(et.$from.depth):ct=ut.before(dt);break}}return ct!=null?(updateSelection(it,NodeSelection.create(it.state.doc,ct),"pointer"),!0):!1}function handleSingleClick(it,g,et,ot,ct){return runHandlerOnContext(it,"handleClickOn",g,et,ot)||it.someProp("handleClick",ut=>ut(it,g,ot))||(ct?selectClickedNode(it,et):selectClickedLeaf(it,et))}function handleDoubleClick(it,g,et,ot){return runHandlerOnContext(it,"handleDoubleClickOn",g,et,ot)||it.someProp("handleDoubleClick",ct=>ct(it,g,ot))}function handleTripleClick(it,g,et,ot){return runHandlerOnContext(it,"handleTripleClickOn",g,et,ot)||it.someProp("handleTripleClick",ct=>ct(it,g,ot))||defaultTripleClick(it,et,ot)}function defaultTripleClick(it,g,et){if(et.button!=0)return!1;let ot=it.state.doc;if(g==-1)return ot.inlineContent?(updateSelection(it,TextSelection.create(ot,0,ot.content.size),"pointer"),!0):!1;let ct=ot.resolve(g);for(let ut=ct.depth+1;ut>0;ut--){let dt=ut>ct.depth?ct.nodeAfter:ct.node(ut),ft=ct.before(ut);if(dt.inlineContent)updateSelection(it,TextSelection.create(ot,ft+1,ft+1+dt.content.size),"pointer");else if(NodeSelection.isSelectable(dt))updateSelection(it,NodeSelection.create(ot,ft),"pointer");else continue;return!0}}function forceDOMFlush(it){return endComposition(it)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(it,g)=>{let et=g;it.input.shiftKey=et.shiftKey;let ot=forceDOMFlush(it),ct=Date.now(),ut="singleClick";ct-it.input.lastClick.time<500&&isNear(et,it.input.lastClick)&&!et[selectNodeModifier]&&it.input.lastClick.button==et.button&&(it.input.lastClick.type=="singleClick"?ut="doubleClick":it.input.lastClick.type=="doubleClick"&&(ut="tripleClick")),it.input.lastClick={time:ct,x:et.clientX,y:et.clientY,type:ut,button:et.button};let dt=it.posAtCoords(eventCoords(et));dt&&(ut=="singleClick"?(it.input.mouseDown&&it.input.mouseDown.done(),it.input.mouseDown=new MouseDown(it,dt,et,!!ot)):(ut=="doubleClick"?handleDoubleClick:handleTripleClick)(it,dt.pos,dt.inside,et)?et.preventDefault():setSelectionOrigin(it,"pointer"))};class MouseDown{constructor(g,et,ot,ct){this.view=g,this.pos=et,this.event=ot,this.flushed=ct,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!ot[selectNodeModifier],this.allowDefault=ot.shiftKey;let ut,dt;if(et.inside>-1)ut=g.state.doc.nodeAt(et.inside),dt=et.inside;else{let Tt=g.state.doc.resolve(et.pos);ut=Tt.parent,dt=Tt.depth?Tt.before():0}const ft=ct?null:ot.target,St=ft?g.docView.nearestDesc(ft,!0):null;this.target=St&&St.nodeDOM.nodeType==1?St.nodeDOM:null;let{selection:kt}=g.state;(ot.button==0&&ut.type.spec.draggable&&ut.type.spec.selectable!==!1||kt instanceof NodeSelection&&kt.from<=dt&&kt.to>dt)&&(this.mightDrag={node:ut,pos:dt,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let et=this.pos;this.view.state.doc!=this.startDoc&&(et=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!et?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,et.pos,et.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(et.pos-this.view.state.selection.from),Math.abs(et.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(et.pos)),"pointer"),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=it=>{it.input.lastTouch=Date.now(),forceDOMFlush(it),setSelectionOrigin(it,"pointer")};handlers.touchmove=it=>{it.input.lastTouch=Date.now(),setSelectionOrigin(it,"pointer")};handlers.contextmenu=it=>forceDOMFlush(it);function inOrNearComposition(it,g){return it.composing?!0:safari&&Math.abs(g.timeStamp-it.input.compositionEndedAt)<500?(it.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=it=>{if(!it.composing){it.domObserver.flush();let{state:g}=it,et=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!et.textOffset&&et.parentOffset&&et.nodeBefore.marks.some(ot=>ot.type.spec.inclusive===!1)))it.markCursor=it.state.storedMarks||et.marks(),endComposition(it,!0),it.markCursor=null;else if(endComposition(it,!g.selection.empty),gecko&&g.selection.empty&&et.parentOffset&&!et.textOffset&&et.nodeBefore.marks.length){let ot=it.domSelectionRange();for(let ct=ot.focusNode,ut=ot.focusOffset;ct&&ct.nodeType==1&&ut!=0;){let dt=ut<0?ct.lastChild:ct.childNodes[ut-1];if(!dt)break;if(dt.nodeType==3){let ft=it.domSelection();ft&&ft.collapse(dt,dt.nodeValue.length);break}else ct=dt,ut=-1}}it.input.composing=!0}scheduleComposeEnd(it,timeoutComposition)};editHandlers.compositionend=(it,g)=>{it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=g.timeStamp,it.input.compositionPendingChanges=it.domObserver.pendingRecords().length?it.input.compositionID:0,it.input.compositionNode=null,it.input.compositionPendingChanges&&Promise.resolve().then(()=>it.domObserver.flush()),it.input.compositionID++,scheduleComposeEnd(it,20))};function scheduleComposeEnd(it,g){clearTimeout(it.input.composingTimeout),g>-1&&(it.input.composingTimeout=setTimeout(()=>endComposition(it),g))}function clearComposition(it){for(it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=timestampFromCustomEvent());it.input.compositionNodes.length>0;)it.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(it){let g=it.domSelectionRange();if(!g.focusNode)return null;let et=textNodeBefore$1(g.focusNode,g.focusOffset),ot=textNodeAfter$1(g.focusNode,g.focusOffset);if(et&&ot&&et!=ot){let ct=ot.pmViewDesc,ut=it.domObserver.lastChangedTextNode;if(et==ut||ot==ut)return ut;if(!ct||!ct.isText(ot.nodeValue))return ot;if(it.input.compositionNode==ot){let dt=et.pmViewDesc;if(!(!dt||!dt.isText(et.nodeValue)))return ot}}return et||ot}function timestampFromCustomEvent(){let it=document.createEvent("Event");return it.initEvent("event",!0,!0),it.timeStamp}function endComposition(it,g=!1){if(!(android&&it.domObserver.flushingSoon>=0)){if(it.domObserver.forceFlush(),clearComposition(it),g||it.docView&&it.docView.dirty){let et=selectionFromDOM(it),ot=it.state.selection;return et&&!et.eq(ot)?it.dispatch(it.state.tr.setSelection(et)):(it.markCursor||g)&&!ot.$from.node(ot.$from.sharedDepth(ot.to)).inlineContent?it.dispatch(it.state.tr.deleteSelection()):it.updateState(it.state),!0}return!1}}function captureCopy(it,g){if(!it.dom.parentNode)return;let et=it.dom.parentNode.appendChild(document.createElement("div"));et.appendChild(g),et.style.cssText="position: fixed; left: -10000px; top: 10px";let ot=getSelection(),ct=document.createRange();ct.selectNodeContents(g),it.dom.blur(),ot.removeAllRanges(),ot.addRange(ct),setTimeout(()=>{et.parentNode&&et.parentNode.removeChild(et),it.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(it,g)=>{let et=g,ot=it.state.selection,ct=et.type=="cut";if(ot.empty)return;let ut=brokenClipboardAPI?null:et.clipboardData,dt=ot.content(),{dom:ft,text:St}=serializeForClipboard(it,dt);ut?(et.preventDefault(),ut.clearData(),ut.setData("text/html",ft.innerHTML),ut.setData("text/plain",St)):captureCopy(it,ft),ct&&it.dispatch(it.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(it){return it.openStart==0&&it.openEnd==0&&it.content.childCount==1?it.content.firstChild:null}function capturePaste(it,g){if(!it.dom.parentNode)return;let et=it.input.shiftKey||it.state.selection.$from.parent.type.spec.code,ot=it.dom.parentNode.appendChild(document.createElement(et?"textarea":"div"));et||(ot.contentEditable="true"),ot.style.cssText="position: fixed; left: -10000px; top: 10px",ot.focus();let ct=it.input.shiftKey&&it.input.lastKeyCode!=45;setTimeout(()=>{it.focus(),ot.parentNode&&ot.parentNode.removeChild(ot),et?doPaste(it,ot.value,null,ct,g):doPaste(it,ot.textContent,ot.innerHTML,ct,g)},50)}function doPaste(it,g,et,ot,ct){let ut=parseFromClipboard(it,g,et,ot,it.state.selection.$from);if(it.someProp("handlePaste",St=>St(it,ct,ut||Slice.empty)))return!0;if(!ut)return!1;let dt=sliceSingleNode(ut),ft=dt?it.state.tr.replaceSelectionWith(dt,ot):it.state.tr.replaceSelection(ut);return it.dispatch(ft.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(it){let g=it.getData("text/plain")||it.getData("Text");if(g)return g;let et=it.getData("text/uri-list");return et?et.replace(/\r?\n/g," "):""}editHandlers.paste=(it,g)=>{let et=g;if(it.composing&&!android)return;let ot=brokenClipboardAPI?null:et.clipboardData,ct=it.input.shiftKey&&it.input.lastKeyCode!=45;ot&&doPaste(it,getText$1(ot),ot.getData("text/html"),ct,et)?et.preventDefault():capturePaste(it,et)};class Dragging{constructor(g,et,ot){this.slice=g,this.move=et,this.node=ot}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(it,g){let et=it.someProp("dragCopies",ot=>!ot(g));return et??!g[dragCopyModifier]}handlers.dragstart=(it,g)=>{let et=g,ot=it.input.mouseDown;if(ot&&ot.done(),!et.dataTransfer)return;let ct=it.state.selection,ut=ct.empty?null:it.posAtCoords(eventCoords(et)),dt;if(!(ut&&ut.pos>=ct.from&&ut.pos<=(ct instanceof NodeSelection?ct.to-1:ct.to))){if(ot&&ot.mightDrag)dt=NodeSelection.create(it.state.doc,ot.mightDrag.pos);else if(et.target&&et.target.nodeType==1){let jt=it.docView.nearestDesc(et.target,!0);jt&&jt.node.type.spec.draggable&&jt!=it.docView&&(dt=NodeSelection.create(it.state.doc,jt.posBefore))}}let ft=(dt||it.state.selection).content(),{dom:St,text:kt,slice:Tt}=serializeForClipboard(it,ft);(!et.dataTransfer.files.length||!chrome||chrome_version>120)&&et.dataTransfer.clearData(),et.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",St.innerHTML),et.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||et.dataTransfer.setData("text/plain",kt),it.dragging=new Dragging(Tt,dragMoves(it,et),dt)};handlers.dragend=it=>{let g=it.dragging;window.setTimeout(()=>{it.dragging==g&&(it.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(it,g)=>g.preventDefault();editHandlers.drop=(it,g)=>{let et=g,ot=it.dragging;if(it.dragging=null,!et.dataTransfer)return;let ct=it.posAtCoords(eventCoords(et));if(!ct)return;let ut=it.state.doc.resolve(ct.pos),dt=ot&&ot.slice;dt?it.someProp("transformPasted",$t=>{dt=$t(dt,it,!1)}):dt=parseFromClipboard(it,getText$1(et.dataTransfer),brokenClipboardAPI?null:et.dataTransfer.getData("text/html"),!1,ut);let ft=!!(ot&&dragMoves(it,et));if(it.someProp("handleDrop",$t=>$t(it,et,dt||Slice.empty,ft))){et.preventDefault();return}if(!dt)return;et.preventDefault();let St=dt?dropPoint(it.state.doc,ut.pos,dt):ut.pos;St==null&&(St=ut.pos);let kt=it.state.tr;if(ft){let{node:$t}=ot;$t?$t.replace(kt):kt.deleteSelection()}let Tt=kt.mapping.map(St),jt=dt.openStart==0&&dt.openEnd==0&&dt.content.childCount==1,Rt=kt.doc;if(jt?kt.replaceRangeWith(Tt,Tt,dt.content.firstChild):kt.replaceRange(Tt,Tt,dt),kt.doc.eq(Rt))return;let Ft=kt.doc.resolve(Tt);if(jt&&NodeSelection.isSelectable(dt.content.firstChild)&&Ft.nodeAfter&&Ft.nodeAfter.sameMarkup(dt.content.firstChild))kt.setSelection(new NodeSelection(Ft));else{let $t=kt.mapping.map(St);kt.mapping.maps[kt.mapping.maps.length-1].forEach((zt,Kt,Bt,Ut)=>$t=Ut),kt.setSelection(selectionBetween(it,Ft,kt.doc.resolve($t)))}it.focus(),it.dispatch(kt.setMeta("uiEvent","drop"))};handlers.focus=it=>{it.input.lastFocus=Date.now(),it.focused||(it.domObserver.stop(),it.dom.classList.add("ProseMirror-focused"),it.domObserver.start(),it.focused=!0,setTimeout(()=>{it.docView&&it.hasFocus()&&!it.domObserver.currentSelection.eq(it.domSelectionRange())&&selectionToDOM(it)},20))};handlers.blur=(it,g)=>{let et=g;it.focused&&(it.domObserver.stop(),it.dom.classList.remove("ProseMirror-focused"),it.domObserver.start(),et.relatedTarget&&it.dom.contains(et.relatedTarget)&&it.domObserver.currentSelection.clear(),it.focused=!1)};handlers.beforeinput=(it,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){it.domObserver.flushSoon();let{domChangeCount:ot}=it.input;setTimeout(()=>{if(it.input.domChangeCount!=ot||(it.dom.blur(),it.focus(),it.someProp("handleKeyDown",ut=>ut(it,keyEvent(8,"Backspace")))))return;let{$cursor:ct}=it.state.selection;ct&&ct.pos>0&&it.dispatch(it.state.tr.delete(ct.pos-1,ct.pos).scrollIntoView())},50)}};for(let it in editHandlers)handlers[it]=editHandlers[it];function compareObjs(it,g){if(it==g)return!0;for(let et in it)if(it[et]!==g[et])return!1;for(let et in g)if(!(et in it))return!1;return!0}class WidgetType{constructor(g,et){this.toDOM=g,this.spec=et||noSpec,this.side=this.spec.side||0}map(g,et,ot,ct){let{pos:ut,deleted:dt}=g.mapResult(et.from+ct,this.side<0?-1:1);return dt?null:new Decoration(ut-ot,ut-ot,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.map(et.from+ct,this.spec.inclusiveStart?-1:1)-ot,dt=g.map(et.to+ct,this.spec.inclusiveEnd?1:-1)-ot;return ut>=dt?null:new Decoration(ut,dt,this)}valid(g,et){return et.from<et.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.mapResult(et.from+ct,1);if(ut.deleted)return null;let dt=g.mapResult(et.to+ct,-1);return dt.deleted||dt.pos<=ut.pos?null:new Decoration(ut.pos-ot,dt.pos-ot,this)}valid(g,et){let{index:ot,offset:ct}=g.content.findIndex(et.from),ut;return ct==et.from&&!(ut=g.child(ot)).isText&&ct+ut.nodeSize==et.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,et,ot){this.from=g,this.to=et,this.type=ot}copy(g,et){return new Decoration(g,et,this.type)}eq(g,et=0){return this.type.eq(g.type)&&this.from+et==g.from&&this.to+et==g.to}map(g,et,ot){return this.type.map(g,this,et,ot)}static widget(g,et,ot){return new Decoration(g,g,new WidgetType(et,ot))}static inline(g,et,ot,ct){return new Decoration(g,et,new InlineType(ot,ct))}static node(g,et,ot,ct){return new Decoration(g,et,new NodeType(ot,ct))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,et){this.local=g.length?g:none,this.children=et.length?et:none}static create(g,et){return et.length?buildTree(et,g,0,noSpec):empty}find(g,et,ot){let ct=[];return this.findInner(g??0,et??1e9,ct,0,ot),ct}findInner(g,et,ot,ct,ut){for(let dt=0;dt<this.local.length;dt++){let ft=this.local[dt];ft.from<=et&&ft.to>=g&&(!ut||ut(ft.spec))&&ot.push(ft.copy(ft.from+ct,ft.to+ct))}for(let dt=0;dt<this.children.length;dt+=3)if(this.children[dt]<et&&this.children[dt+1]>g){let ft=this.children[dt]+1;this.children[dt+2].findInner(g-ft,et-ft,ot,ct+ft,ut)}}map(g,et,ot){return this==empty||g.maps.length==0?this:this.mapInner(g,et,0,0,ot||noSpec)}mapInner(g,et,ot,ct,ut){let dt;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft].map(g,ot,ct);St&&St.type.valid(et,St)?(dt||(dt=[])).push(St):ut.onRemove&&ut.onRemove(this.local[ft].spec)}return this.children.length?mapChildren(this.children,dt||[],g,et,ot,ct,ut):dt?new DecorationSet(dt.sort(byPos),none):empty}add(g,et){return et.length?this==empty?DecorationSet.create(g,et):this.addInner(g,et,0):this}addInner(g,et,ot){let ct,ut=0;g.forEach((ft,St)=>{let kt=St+ot,Tt;if(Tt=takeSpansForNode(et,ft,kt)){for(ct||(ct=this.children.slice());ut<ct.length&&ct[ut]<St;)ut+=3;ct[ut]==St?ct[ut+2]=ct[ut+2].addInner(ft,Tt,kt+1):ct.splice(ut,0,St,St+ft.nodeSize,buildTree(Tt,ft,kt+1,noSpec)),ut+=3}});let dt=moveSpans(ut?withoutNulls(et):et,-ot);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||dt.splice(ft--,1);return new DecorationSet(dt.length?this.local.concat(dt).sort(byPos):this.local,ct||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,et){let ot=this.children,ct=this.local;for(let ut=0;ut<ot.length;ut+=3){let dt,ft=ot[ut]+et,St=ot[ut+1]+et;for(let Tt=0,jt;Tt<g.length;Tt++)(jt=g[Tt])&&jt.from>ft&&jt.to<St&&(g[Tt]=null,(dt||(dt=[])).push(jt));if(!dt)continue;ot==this.children&&(ot=this.children.slice());let kt=ot[ut+2].removeInner(dt,ft+1);kt!=empty?ot[ut+2]=kt:(ot.splice(ut,3),ut-=3)}if(ct.length){for(let ut=0,dt;ut<g.length;ut++)if(dt=g[ut])for(let ft=0;ft<ct.length;ft++)ct[ft].eq(dt,et)&&(ct==this.local&&(ct=this.local.slice()),ct.splice(ft--,1))}return ot==this.children&&ct==this.local?this:ct.length||ot.length?new DecorationSet(ct,ot):empty}forChild(g,et){if(this==empty)return this;if(et.isLeaf)return DecorationSet.empty;let ot,ct;for(let ft=0;ft<this.children.length;ft+=3)if(this.children[ft]>=g){this.children[ft]==g&&(ot=this.children[ft+2]);break}let ut=g+1,dt=ut+et.content.size;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft];if(St.from<dt&&St.to>ut&&St.type instanceof InlineType){let kt=Math.max(ut,St.from)-ut,Tt=Math.min(dt,St.to)-ut;kt<Tt&&(ct||(ct=[])).push(St.copy(kt,Tt))}}if(ct){let ft=new DecorationSet(ct.sort(byPos),none);return ot?new DecorationGroup([ft,ot]):ft}return ot||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let et=0;et<this.local.length;et++)if(!this.local[et].eq(g.local[et]))return!1;for(let et=0;et<this.children.length;et+=3)if(this.children[et]!=g.children[et]||this.children[et+1]!=g.children[et+1]||!this.children[et+2].eq(g.children[et+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let et=[];for(let ot=0;ot<this.local.length;ot++)this.local[ot].type instanceof InlineType||et.push(this.local[ot]);return et}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,et){const ot=this.members.map(ct=>ct.map(g,et,noSpec));return DecorationGroup.from(ot)}forChild(g,et){if(et.isLeaf)return DecorationSet.empty;let ot=[];for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].forChild(g,et);ut!=empty&&(ut instanceof DecorationGroup?ot=ot.concat(ut.members):ot.push(ut))}return DecorationGroup.from(ot)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let et=0;et<this.members.length;et++)if(!this.members[et].eq(g.members[et]))return!1;return!0}locals(g){let et,ot=!0;for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].localsInner(g);if(ut.length)if(!et)et=ut;else{ot&&(et=et.slice(),ot=!1);for(let dt=0;dt<ut.length;dt++)et.push(ut[dt])}}return et?removeOverlap(ot?et:et.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(et=>et instanceof DecorationSet)?g:g.reduce((et,ot)=>et.concat(ot instanceof DecorationSet?ot:ot.members),[]))}}forEachSet(g){for(let et=0;et<this.members.length;et++)this.members[et].forEachSet(g)}}function mapChildren(it,g,et,ot,ct,ut,dt){let ft=it.slice();for(let kt=0,Tt=ut;kt<et.maps.length;kt++){let jt=0;et.maps[kt].forEach((Rt,Ft,$t,zt)=>{let Kt=zt-$t-(Ft-Rt);for(let Bt=0;Bt<ft.length;Bt+=3){let Ut=ft[Bt+1];if(Ut<0||Rt>Ut+Tt-jt)continue;let Jt=ft[Bt]+Tt-jt;Ft>=Jt?ft[Bt+1]=Rt<=Jt?-2:-1:Rt>=Tt&&Kt&&(ft[Bt]+=Kt,ft[Bt+1]+=Kt)}jt+=Kt}),Tt=et.maps[kt].map(Tt,-1)}let St=!1;for(let kt=0;kt<ft.length;kt+=3)if(ft[kt+1]<0){if(ft[kt+1]==-2){St=!0,ft[kt+1]=-1;continue}let Tt=et.map(it[kt]+ut),jt=Tt-ct;if(jt<0||jt>=ot.content.size){St=!0;continue}let Rt=et.map(it[kt+1]+ut,-1),Ft=Rt-ct,{index:$t,offset:zt}=ot.content.findIndex(jt),Kt=ot.maybeChild($t);if(Kt&&zt==jt&&zt+Kt.nodeSize==Ft){let Bt=ft[kt+2].mapInner(et,Kt,Tt+1,it[kt]+ut+1,dt);Bt!=empty?(ft[kt]=jt,ft[kt+1]=Ft,ft[kt+2]=Bt):(ft[kt+1]=-2,St=!0)}else St=!0}if(St){let kt=mapAndGatherRemainingDecorations(ft,it,g,et,ct,ut,dt),Tt=buildTree(kt,ot,0,dt);g=Tt.local;for(let jt=0;jt<ft.length;jt+=3)ft[jt+1]<0&&(ft.splice(jt,3),jt-=3);for(let jt=0,Rt=0;jt<Tt.children.length;jt+=3){let Ft=Tt.children[jt];for(;Rt<ft.length&&ft[Rt]<Ft;)Rt+=3;ft.splice(Rt,0,Tt.children[jt],Tt.children[jt+1],Tt.children[jt+2])}}return new DecorationSet(g.sort(byPos),ft)}function moveSpans(it,g){if(!g||!it.length)return it;let et=[];for(let ot=0;ot<it.length;ot++){let ct=it[ot];et.push(new Decoration(ct.from+g,ct.to+g,ct.type))}return et}function mapAndGatherRemainingDecorations(it,g,et,ot,ct,ut,dt){function ft(St,kt){for(let Tt=0;Tt<St.local.length;Tt++){let jt=St.local[Tt].map(ot,ct,kt);jt?et.push(jt):dt.onRemove&&dt.onRemove(St.local[Tt].spec)}for(let Tt=0;Tt<St.children.length;Tt+=3)ft(St.children[Tt+2],St.children[Tt]+kt+1)}for(let St=0;St<it.length;St+=3)it[St+1]==-1&&ft(it[St+2],g[St]+ut+1);return et}function takeSpansForNode(it,g,et){if(g.isLeaf)return null;let ot=et+g.nodeSize,ct=null;for(let ut=0,dt;ut<it.length;ut++)(dt=it[ut])&&dt.from>et&&dt.to<ot&&((ct||(ct=[])).push(dt),it[ut]=null);return ct}function withoutNulls(it){let g=[];for(let et=0;et<it.length;et++)it[et]!=null&&g.push(it[et]);return g}function buildTree(it,g,et,ot){let ct=[],ut=!1;g.forEach((ft,St)=>{let kt=takeSpansForNode(it,ft,St+et);if(kt){ut=!0;let Tt=buildTree(kt,ft,et+St+1,ot);Tt!=empty&&ct.push(St,St+ft.nodeSize,Tt)}});let dt=moveSpans(ut?withoutNulls(it):it,-et).sort(byPos);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||(ot.onRemove&&ot.onRemove(dt[ft].spec),dt.splice(ft--,1));return dt.length||ct.length?new DecorationSet(dt,ct):empty}function byPos(it,g){return it.from-g.from||it.to-g.to}function removeOverlap(it){let g=it;for(let et=0;et<g.length-1;et++){let ot=g[et];if(ot.from!=ot.to)for(let ct=et+1;ct<g.length;ct++){let ut=g[ct];if(ut.from==ot.from){ut.to!=ot.to&&(g==it&&(g=it.slice()),g[ct]=ut.copy(ut.from,ot.to),insertAhead(g,ct+1,ut.copy(ot.to,ut.to)));continue}else{ut.from<ot.to&&(g==it&&(g=it.slice()),g[et]=ot.copy(ot.from,ut.from),insertAhead(g,ct,ot.copy(ut.from,ot.to)));break}}}return g}function insertAhead(it,g,et){for(;g<it.length&&byPos(et,it[g])>0;)g++;it.splice(g,0,et)}function viewDecorations(it){let g=[];return it.someProp("decorations",et=>{let ot=et(it.state);ot&&ot!=empty&&g.push(ot)}),it.cursorWrapper&&g.push(DecorationSet.create(it.state.doc,[it.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,et){this.view=g,this.handleDOMChange=et,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(ot=>{for(let ct=0;ct<ot.length;ct++)this.queue.push(ot[ct]);ie$1&&ie_version<=11&&ot.some(ct=>ct.type=="childList"&&ct.removedNodes.length||ct.type=="characterData"&&ct.oldValue.length>ct.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=ot=>{this.queue.push({target:ot.target,type:"characterData",oldValue:ot.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let et=0;et<g.length;et++)this.queue.push(g[et]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let et=new Set,ot;for(let ut=g.focusNode;ut;ut=parentNode(ut))et.add(ut);for(let ut=g.anchorNode;ut;ut=parentNode(ut))if(et.has(ut)){ot=ut;break}let ct=ot&&this.view.docView.nearestDesc(ot);if(ct&&ct.ignoreMutation({type:"selection",target:ot.nodeType==3?ot.parentNode:ot}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let et=this.pendingRecords();et.length&&(this.queue=[]);let ot=g.domSelectionRange(),ct=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(ot)&&hasFocusAndSelection(g)&&!this.ignoreSelectionChange(ot),ut=-1,dt=-1,ft=!1,St=[];if(g.editable)for(let Tt=0;Tt<et.length;Tt++){let jt=this.registerMutation(et[Tt],St);jt&&(ut=ut<0?jt.from:Math.min(jt.from,ut),dt=dt<0?jt.to:Math.max(jt.to,dt),jt.typeOver&&(ft=!0))}if(gecko&&St.length){let Tt=St.filter(jt=>jt.nodeName=="BR");if(Tt.length==2){let[jt,Rt]=Tt;jt.parentNode&&jt.parentNode.parentNode==Rt.parentNode?Rt.remove():jt.remove()}else{let{focusNode:jt}=this.currentSelection;for(let Rt of Tt){let Ft=Rt.parentNode;Ft&&Ft.nodeName=="LI"&&(!jt||blockParent(g,jt)!=Ft)&&Rt.remove()}}}let kt=null;ut<0&&ct&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(ot)&&(kt=selectionFromDOM(g))&&kt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(ot),g.scrollToSelection()):(ut>-1||ct)&&(ut>-1&&(g.docView.markDirty(ut,dt),checkCSS(g)),this.handleDOMChange(ut,dt,ft,St),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(ot)||selectionToDOM(g),this.currentSelection.set(ot))}registerMutation(g,et){if(et.indexOf(g.target)>-1)return null;let ot=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(ot==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!ot||ot.ignoreMutation(g))return null;if(g.type=="childList"){for(let Tt=0;Tt<g.addedNodes.length;Tt++){let jt=g.addedNodes[Tt];et.push(jt),jt.nodeType==3&&(this.lastChangedTextNode=jt)}if(ot.contentDOM&&ot.contentDOM!=ot.dom&&!ot.contentDOM.contains(g.target))return{from:ot.posBefore,to:ot.posAfter};let ct=g.previousSibling,ut=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let Tt=0;Tt<g.addedNodes.length;Tt++){let{previousSibling:jt,nextSibling:Rt}=g.addedNodes[Tt];(!jt||Array.prototype.indexOf.call(g.addedNodes,jt)<0)&&(ct=jt),(!Rt||Array.prototype.indexOf.call(g.addedNodes,Rt)<0)&&(ut=Rt)}let dt=ct&&ct.parentNode==g.target?domIndex(ct)+1:0,ft=ot.localPosFromDOM(g.target,dt,-1),St=ut&&ut.parentNode==g.target?domIndex(ut):g.target.childNodes.length,kt=ot.localPosFromDOM(g.target,St,1);return{from:ft,to:kt}}else return g.type=="attributes"?{from:ot.posAtStart-ot.border,to:ot.posAtEnd+ot.border}:(this.lastChangedTextNode=g.target,{from:ot.posAtStart,to:ot.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(it){if(!cssChecked.has(it)&&(cssChecked.set(it,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(it.dom).whiteSpace)!==-1)){if(it.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(it,g){let et=g.startContainer,ot=g.startOffset,ct=g.endContainer,ut=g.endOffset,dt=it.domAtPos(it.state.selection.anchor);return isEquivalentPosition(dt.node,dt.offset,ct,ut)&&([et,ot,ct,ut]=[ct,ut,et,ot]),{anchorNode:et,anchorOffset:ot,focusNode:ct,focusOffset:ut}}function safariShadowSelectionRange(it,g){if(g.getComposedRanges){let ct=g.getComposedRanges(it.root)[0];if(ct)return rangeToSelectionRange(it,ct)}let et;function ot(ct){ct.preventDefault(),ct.stopImmediatePropagation(),et=ct.getTargetRanges()[0]}return it.dom.addEventListener("beforeinput",ot,!0),document.execCommand("indent"),it.dom.removeEventListener("beforeinput",ot,!0),et?rangeToSelectionRange(it,et):null}function blockParent(it,g){for(let et=g.parentNode;et&&et!=it.dom;et=et.parentNode){let ot=it.docView.nearestDesc(et,!0);if(ot&&ot.node.isBlock)return et}return null}function parseBetween(it,g,et){let{node:ot,fromOffset:ct,toOffset:ut,from:dt,to:ft}=it.docView.parseRange(g,et),St=it.domSelectionRange(),kt,Tt=St.anchorNode;if(Tt&&it.dom.contains(Tt.nodeType==1?Tt:Tt.parentNode)&&(kt=[{node:Tt,offset:St.anchorOffset}],selectionCollapsed(St)||kt.push({node:St.focusNode,offset:St.focusOffset})),chrome&&it.input.lastKeyCode===8)for(let Kt=ut;Kt>ct;Kt--){let Bt=ot.childNodes[Kt-1],Ut=Bt.pmViewDesc;if(Bt.nodeName=="BR"&&!Ut){ut=Kt;break}if(!Ut||Ut.size)break}let jt=it.state.doc,Rt=it.someProp("domParser")||DOMParser.fromSchema(it.state.schema),Ft=jt.resolve(dt),$t=null,zt=Rt.parse(ot,{topNode:Ft.parent,topMatch:Ft.parent.contentMatchAt(Ft.index()),topOpen:!0,from:ct,to:ut,preserveWhitespace:Ft.parent.type.whitespace=="pre"?"full":!0,findPositions:kt,ruleFromNode,context:Ft});if(kt&&kt[0].pos!=null){let Kt=kt[0].pos,Bt=kt[1]&&kt[1].pos;Bt==null&&(Bt=Kt),$t={anchor:Kt+dt,head:Bt+dt}}return{doc:zt,sel:$t,from:dt,to:ft}}function ruleFromNode(it){let g=it.pmViewDesc;if(g)return g.parseRule();if(it.nodeName=="BR"&&it.parentNode){if(safari&&/^(ul|ol)$/i.test(it.parentNode.nodeName)){let et=document.createElement("div");return et.appendChild(document.createElement("li")),{skip:et}}else if(it.parentNode.lastChild==it||safari&&/^(tr|table)$/i.test(it.parentNode.nodeName))return{ignore:!0}}else if(it.nodeName=="IMG"&&it.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(it,g,et,ot,ct){let ut=it.input.compositionPendingChanges||(it.composing?it.input.compositionID:0);if(it.input.compositionPendingChanges=0,g<0){let rn=it.input.lastSelectionTime>Date.now()-50?it.input.lastSelectionOrigin:null,on=selectionFromDOM(it,rn);if(on&&!it.state.selection.eq(on)){if(chrome&&android&&it.input.lastKeyCode===13&&Date.now()-100<it.input.lastKeyCodeTime&&it.someProp("handleKeyDown",cn=>cn(it,keyEvent(13,"Enter"))))return;let dn=it.state.tr.setSelection(on);rn=="pointer"?dn.setMeta("pointer",!0):rn=="key"&&dn.scrollIntoView(),ut&&dn.setMeta("composition",ut),it.dispatch(dn)}return}let dt=it.state.doc.resolve(g),ft=dt.sharedDepth(et);g=dt.before(ft+1),et=it.state.doc.resolve(et).after(ft+1);let St=it.state.selection,kt=parseBetween(it,g,et),Tt=it.state.doc,jt=Tt.slice(kt.from,kt.to),Rt,Ft;it.input.lastKeyCode===8&&Date.now()-100<it.input.lastKeyCodeTime?(Rt=it.state.selection.to,Ft="end"):(Rt=it.state.selection.from,Ft="start"),it.input.lastKeyCode=null;let $t=findDiff(jt.content,kt.doc.content,kt.from,Rt,Ft);if($t&&it.input.domChangeCount++,(ios&&it.input.lastIOSEnter>Date.now()-225||android)&&ct.some(rn=>rn.nodeType==1&&!isInline.test(rn.nodeName))&&(!$t||$t.endA>=$t.endB)&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(!$t)if(ot&&St instanceof TextSelection&&!St.empty&&St.$head.sameParent(St.$anchor)&&!it.composing&&!(kt.sel&&kt.sel.anchor!=kt.sel.head))$t={start:St.from,endA:St.to,endB:St.to};else{if(kt.sel){let rn=resolveSelection(it,it.state.doc,kt.sel);if(rn&&!rn.eq(it.state.selection)){let on=it.state.tr.setSelection(rn);ut&&on.setMeta("composition",ut),it.dispatch(on)}}return}it.state.selection.from<it.state.selection.to&&$t.start==$t.endB&&it.state.selection instanceof TextSelection&&($t.start>it.state.selection.from&&$t.start<=it.state.selection.from+2&&it.state.selection.from>=kt.from?$t.start=it.state.selection.from:$t.endA<it.state.selection.to&&$t.endA>=it.state.selection.to-2&&it.state.selection.to<=kt.to&&($t.endB+=it.state.selection.to-$t.endA,$t.endA=it.state.selection.to)),ie$1&&ie_version<=11&&$t.endB==$t.start+1&&$t.endA==$t.start&&$t.start>kt.from&&kt.doc.textBetween($t.start-kt.from-1,$t.start-kt.from+1)=="  "&&($t.start--,$t.endA--,$t.endB--);let zt=kt.doc.resolveNoCache($t.start-kt.from),Kt=kt.doc.resolveNoCache($t.endB-kt.from),Bt=Tt.resolve($t.start),Ut=zt.sameParent(Kt)&&zt.parent.inlineContent&&Bt.end()>=$t.endA;if((ios&&it.input.lastIOSEnter>Date.now()-225&&(!Ut||ct.some(rn=>rn.nodeName=="DIV"||rn.nodeName=="P"))||!Ut&&zt.pos<kt.doc.content.size&&(!zt.sameParent(Kt)||!zt.parent.inlineContent)&&zt.pos<Kt.pos&&!/\S/.test(kt.doc.textBetween(zt.pos,Kt.pos,"","")))&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(it.state.selection.anchor>$t.start&&looksLikeBackspace(Tt,$t.start,$t.endA,zt,Kt)&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(8,"Backspace")))){android&&chrome&&it.domObserver.suppressSelectionUpdates();return}chrome&&$t.endB==$t.start&&(it.input.lastChromeDelete=Date.now()),android&&!Ut&&zt.start()!=Kt.start()&&Kt.parentOffset==0&&zt.depth==Kt.depth&&kt.sel&&kt.sel.anchor==kt.sel.head&&kt.sel.head==$t.endA&&($t.endB-=2,Kt=kt.doc.resolveNoCache($t.endB-kt.from),setTimeout(()=>{it.someProp("handleKeyDown",function(rn){return rn(it,keyEvent(13,"Enter"))})},20));let Jt=$t.start,en=$t.endA,tn=rn=>{let on=rn||it.state.tr.replace(Jt,en,kt.doc.slice($t.start-kt.from,$t.endB-kt.from));if(kt.sel){let dn=resolveSelection(it,on.doc,kt.sel);dn&&!(chrome&&it.composing&&dn.empty&&($t.start!=$t.endB||it.input.lastChromeDelete<Date.now()-100)&&(dn.head==Jt||dn.head==on.mapping.map(en)-1)||ie$1&&dn.empty&&dn.head==Jt)&&on.setSelection(dn)}return ut&&on.setMeta("composition",ut),on.scrollIntoView()},nn;if(Ut)if(zt.pos==Kt.pos){ie$1&&ie_version<=11&&zt.parentOffset==0&&(it.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(it),20));let rn=tn(it.state.tr.delete(Jt,en)),on=Tt.resolve($t.start).marksAcross(Tt.resolve($t.endA));on&&rn.ensureMarks(on),it.dispatch(rn)}else if($t.endA==$t.endB&&(nn=isMarkChange(zt.parent.content.cut(zt.parentOffset,Kt.parentOffset),Bt.parent.content.cut(Bt.parentOffset,$t.endA-Bt.start())))){let rn=tn(it.state.tr);nn.type=="add"?rn.addMark(Jt,en,nn.mark):rn.removeMark(Jt,en,nn.mark),it.dispatch(rn)}else if(zt.parent.child(zt.index()).isText&&zt.index()==Kt.index()-(Kt.textOffset?0:1)){let rn=zt.parent.textBetween(zt.parentOffset,Kt.parentOffset),on=()=>tn(it.state.tr.insertText(rn,Jt,en));it.someProp("handleTextInput",dn=>dn(it,Jt,en,rn,on))||it.dispatch(on())}else it.dispatch(tn());else it.dispatch(tn())}function resolveSelection(it,g,et){return Math.max(et.anchor,et.head)>g.content.size?null:selectionBetween(it,g.resolve(et.anchor),g.resolve(et.head))}function isMarkChange(it,g){let et=it.firstChild.marks,ot=g.firstChild.marks,ct=et,ut=ot,dt,ft,St;for(let Tt=0;Tt<ot.length;Tt++)ct=ot[Tt].removeFromSet(ct);for(let Tt=0;Tt<et.length;Tt++)ut=et[Tt].removeFromSet(ut);if(ct.length==1&&ut.length==0)ft=ct[0],dt="add",St=Tt=>Tt.mark(ft.addToSet(Tt.marks));else if(ct.length==0&&ut.length==1)ft=ut[0],dt="remove",St=Tt=>Tt.mark(ft.removeFromSet(Tt.marks));else return null;let kt=[];for(let Tt=0;Tt<g.childCount;Tt++)kt.push(St(g.child(Tt)));if(Fragment.from(kt).eq(it))return{mark:ft,type:dt}}function looksLikeBackspace(it,g,et,ot,ct){if(et-g<=ct.pos-ot.pos||skipClosingAndOpening(ot,!0,!1)<ct.pos)return!1;let ut=it.resolve(g);if(!ot.parent.isTextblock){let ft=ut.nodeAfter;return ft!=null&&et==g+ft.nodeSize}if(ut.parentOffset<ut.parent.content.size||!ut.parent.isTextblock)return!1;let dt=it.resolve(skipClosingAndOpening(ut,!0,!0));return!dt.parent.isTextblock||dt.pos>et||skipClosingAndOpening(dt,!0,!1)<et?!1:ot.parent.content.cut(ot.parentOffset).eq(dt.parent.content)}function skipClosingAndOpening(it,g,et){let ot=it.depth,ct=g?it.end():it.pos;for(;ot>0&&(g||it.indexAfter(ot)==it.node(ot).childCount);)ot--,ct++,g=!1;if(et){let ut=it.node(ot).maybeChild(it.indexAfter(ot));for(;ut&&!ut.isLeaf;)ut=ut.firstChild,ct++}return ct}function findDiff(it,g,et,ot,ct){let ut=it.findDiffStart(g,et);if(ut==null)return null;let{a:dt,b:ft}=it.findDiffEnd(g,et+it.size,et+g.size);if(ct=="end"){let St=Math.max(0,ut-Math.min(dt,ft));ot-=dt+St-ut}if(dt<ut&&it.size<g.size){let St=ot<=ut&&ot>=dt?ut-ot:0;ut-=St,ut&&ut<g.size&&isSurrogatePair(g.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),ft=ut+(ft-dt),dt=ut}else if(ft<ut){let St=ot<=ut&&ot>=ft?ut-ot:0;ut-=St,ut&&ut<it.size&&isSurrogatePair(it.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),dt=ut+(dt-ft),ft=ut}return{start:ut,endA:dt,endB:ft}}function isSurrogatePair(it){if(it.length!=2)return!1;let g=it.charCodeAt(0),et=it.charCodeAt(1);return g>=56320&&g<=57343&&et>=55296&&et<=56319}class EditorView{constructor(g,et){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=et,this.state=et.state,this.directPlugins=et.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(ot,ct,ut,dt)=>readDOMChange(this,ot,ct,ut,dt)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let et in g)this._props[et]=g[et];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let et=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,et)}setProps(g){let et={};for(let ot in this._props)et[ot]=this._props[ot];et.state=this.state;for(let ot in g)et[ot]=g[ot];this.update(et)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,et){var ot;let ct=this.state,ut=!1,dt=!1;g.storedMarks&&this.composing&&(clearComposition(this),dt=!0),this.state=g;let ft=ct.plugins!=g.plugins||this._props.plugins!=et.plugins;if(ft||this._props.plugins!=et.plugins||this._props.nodeViews!=et.nodeViews){let Ft=buildNodeViews(this);changedNodeViews(Ft,this.nodeViews)&&(this.nodeViews=Ft,ut=!0)}(ft||et.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let St=viewDecorations(this),kt=computeDocDeco(this),Tt=ct.plugins!=g.plugins&&!ct.doc.eq(g.doc)?"reset":g.scrollToSelection>ct.scrollToSelection?"to selection":"preserve",jt=ut||!this.docView.matchesNode(g.doc,kt,St);(jt||!g.selection.eq(ct.selection))&&(dt=!0);let Rt=Tt=="preserve"&&dt&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(dt){this.domObserver.stop();let Ft=jt&&(ie$1||chrome)&&!this.composing&&!ct.selection.empty&&!g.selection.empty&&selectionContextChanged(ct.selection,g.selection);if(jt){let $t=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(ut||!this.docView.update(g.doc,kt,St,this))&&(this.docView.updateOuterDeco(kt),this.docView.destroy(),this.docView=docViewDesc(g.doc,kt,St,this.dom,this)),$t&&!this.trackWrites&&(Ft=!0)}Ft||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,Ft):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ct),!((ot=this.dragging)===null||ot===void 0)&&ot.node&&!ct.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,ct),Tt=="reset"?this.dom.scrollTop=0:Tt=="to selection"?this.scrollToSelection():Rt&&resetScrollPos(Rt)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!(!g||!this.dom.contains(g.nodeType==1?g:g.parentNode))){if(!this.someProp("handleScrollToSelection",et=>et(this)))if(this.state.selection instanceof NodeSelection){let et=this.docView.domAfterPos(this.state.selection.from);et.nodeType==1&&scrollRectIntoView(this,et.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let et=0;et<this.directPlugins.length;et++){let ot=this.directPlugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}for(let et=0;et<this.state.plugins.length;et++){let ot=this.state.plugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}}else for(let et=0;et<this.pluginViews.length;et++){let ot=this.pluginViews[et];ot.update&&ot.update(this,g)}}updateDraggedNode(g,et){let ot=g.node,ct=-1;if(this.state.doc.nodeAt(ot.from)==ot.node)ct=ot.from;else{let ut=ot.from+(this.state.doc.content.size-et.doc.content.size);(ut>0&&this.state.doc.nodeAt(ut))==ot.node&&(ct=ut)}this.dragging=new Dragging(g.slice,g.move,ct<0?void 0:NodeSelection.create(this.state.doc,ct))}someProp(g,et){let ot=this._props&&this._props[g],ct;if(ot!=null&&(ct=et?et(ot):ot))return ct;for(let dt=0;dt<this.directPlugins.length;dt++){let ft=this.directPlugins[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}let ut=this.state.plugins;if(ut)for(let dt=0;dt<ut.length;dt++){let ft=ut[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let et=this.dom.parentNode;et;et=et.parentNode)if(et.nodeType==9||et.nodeType==11&&et.host)return et.getSelection||(Object.getPrototypeOf(et).getSelection=()=>et.ownerDocument.getSelection()),this._root=et}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,et=1){return coordsAtPos(this,g,et)}domAtPos(g,et=0){return this.docView.domFromPos(g,et)}nodeDOM(g){let et=this.docView.descAt(g);return et?et.nodeDOM:null}posAtDOM(g,et,ot=-1){let ct=this.docView.posFromDOM(g,et,ot);if(ct==null)throw new RangeError("DOM position not inside the editor");return ct}endOfTextblock(g,et){return endOfTextblock(this,et||this.state,g)}pasteHTML(g,et){return doPaste(this,"",g,!1,et||new ClipboardEvent("paste"))}pasteText(g,et){return doPaste(this,g,null,!0,et||new ClipboardEvent("paste"))}serializeForClipboard(g){return serializeForClipboard(this,g)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(it){let g=this._props.dispatchTransaction;g?g.call(this,it):this.updateState(this.state.apply(it))};function computeDocDeco(it){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(it.editable),it.someProp("attributes",et=>{if(typeof et=="function"&&(et=et(it.state)),et)for(let ot in et)ot=="class"?g.class+=" "+et[ot]:ot=="style"?g.style=(g.style?g.style+";":"")+et[ot]:!g[ot]&&ot!="contenteditable"&&ot!="nodeName"&&(g[ot]=String(et[ot]))}),g.translate||(g.translate="no"),[Decoration.node(0,it.state.doc.content.size,g)]}function updateCursorWrapper(it){if(it.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),it.cursorWrapper={dom:g,deco:Decoration.widget(it.state.selection.from,g,{raw:!0,marks:it.markCursor})}}else it.cursorWrapper=null}function getEditable(it){return!it.someProp("editable",g=>g(it.state)===!1)}function selectionContextChanged(it,g){let et=Math.min(it.$anchor.sharedDepth(it.head),g.$anchor.sharedDepth(g.head));return it.$anchor.start(et)!=g.$anchor.start(et)}function buildNodeViews(it){let g=Object.create(null);function et(ot){for(let ct in ot)Object.prototype.hasOwnProperty.call(g,ct)||(g[ct]=ot[ct])}return it.someProp("nodeViews",et),it.someProp("markViews",et),g}function changedNodeViews(it,g){let et=0,ot=0;for(let ct in it){if(it[ct]!=g[ct])return!0;et++}for(let ct in g)ot++;return et!=ot}function checkStateComponent(it){if(it.spec.state||it.spec.filterTransaction||it.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(it){var g=mac$1&&it.metaKey&&it.shiftKey&&!it.ctrlKey&&!it.altKey||ie&&it.shiftKey&&it.key&&it.key.length==1||it.key=="Unidentified",et=!g&&it.key||(it.shiftKey?shift:base)[it.keyCode]||it.key||"Unidentified";return et=="Esc"&&(et="Escape"),et=="Del"&&(et="Delete"),et=="Left"&&(et="ArrowLeft"),et=="Up"&&(et="ArrowUp"),et=="Right"&&(et="ArrowRight"),et=="Down"&&(et="ArrowDown"),et}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(it){let g=it.split(/-(?!$)/),et=g[g.length-1];et=="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft++){let St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))mac?dt=!0:ct=!0;else throw new Error("Unrecognized modifier name: "+St)}return ot&&(et="Alt-"+et),ct&&(et="Ctrl-"+et),dt&&(et="Meta-"+et),ut&&(et="Shift-"+et),et}function normalize(it){let g=Object.create(null);for(let et in it)g[normalizeKeyName$1(et)]=it[et];return g}function modifiers(it,g,et=!0){return g.altKey&&(it="Alt-"+it),g.ctrlKey&&(it="Ctrl-"+it),g.metaKey&&(it="Meta-"+it),et&&g.shiftKey&&(it="Shift-"+it),it}function keymap(it){return new Plugin({props:{handleKeyDown:keydownHandler(it)}})}function keydownHandler(it){let g=normalize(it);return function(et,ot){let ct=keyName(ot),ut,dt=g[modifiers(ct,ot)];if(dt&&dt(et.state,et.dispatch,et))return!0;if(ct.length==1&&ct!=" "){if(ot.shiftKey){let ft=g[modifiers(ct,ot,!1)];if(ft&&ft(et.state,et.dispatch,et))return!0}if((ot.altKey||ot.metaKey||ot.ctrlKey)&&!(windows&&ot.ctrlKey&&ot.altKey)&&(ut=base[ot.keyCode])&&ut!=ct){let ft=g[modifiers(ut,ot)];if(ft&&ft(et.state,et.dispatch,et))return!0}}return!1}}var __defProp$2=Object.defineProperty,__export$1=(it,g)=>{for(var et in g)__defProp$2(it,et,{get:g[et],enumerable:!0})};function createChainableState(it){const{state:g,transaction:et}=it;let{selection:ot}=et,{doc:ct}=et,{storedMarks:ut}=et;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return ut},get selection(){return ot},get doc(){return ct},get tr(){return ot=et.selection,ct=et.doc,ut=et.storedMarks,et}}}var CommandManager$1=class{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:et,state:ot}=this,{view:ct}=et,{tr:ut}=ot,dt=this.buildProps(ut);return Object.fromEntries(Object.entries(g).map(([ft,St])=>[ft,(...Tt)=>{const jt=St(...Tt)(dt);return!ut.getMeta("preventDispatch")&&!this.hasCustomState&&ct.dispatch(ut),jt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft=[],St=!!g,kt=g||ut.tr,Tt=()=>(!St&&et&&!kt.getMeta("preventDispatch")&&!this.hasCustomState&&dt.dispatch(kt),ft.every(Rt=>Rt===!0)),jt={...Object.fromEntries(Object.entries(ot).map(([Rt,Ft])=>[Rt,(...zt)=>{const Kt=this.buildProps(kt,et),Bt=Ft(...zt)(Kt);return ft.push(Bt),jt}])),run:Tt};return jt}createCan(g){const{rawCommands:et,state:ot}=this,ct=!1,ut=g||ot.tr,dt=this.buildProps(ut,ct);return{...Object.fromEntries(Object.entries(et).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)({...dt,dispatch:void 0})])),chain:()=>this.createChain(ut,ct)}}buildProps(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft={tr:g,editor:ct,view:dt,state:createChainableState({state:ut,transaction:g}),dispatch:et?()=>{}:void 0,chain:()=>this.createChain(g,et),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(ot).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)(ft)]))}};return ft}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:it,view:g})=>(requestAnimationFrame(()=>{var et;it.isDestroyed||(g.dom.blur(),(et=window==null?void 0:window.getSelection())==null||et.removeAllRanges())}),!0),clearContent=(it=!0)=>({commands:g})=>g.setContent("",{emitUpdate:it}),clearNodes=()=>({state:it,tr:g,dispatch:et})=>{const{selection:ot}=g,{ranges:ct}=ot;return et&&ct.forEach(({$from:ut,$to:dt})=>{it.doc.nodesBetween(ut.pos,dt.pos,(ft,St)=>{if(ft.type.isText)return;const{doc:kt,mapping:Tt}=g,jt=kt.resolve(Tt.map(St)),Rt=kt.resolve(Tt.map(St+ft.nodeSize)),Ft=jt.blockRange(Rt);if(!Ft)return;const $t=liftTarget(Ft);if(ft.type.isTextblock){const{defaultType:zt}=jt.parent.contentMatchAt(jt.index());g.setNodeMarkup(Ft.start,zt)}($t||$t===0)&&g.lift(Ft,$t)})}),!0},command=it=>g=>it(g),createParagraphNear=()=>({state:it,dispatch:g})=>createParagraphNear$1(it,g),cut=(it,g)=>({editor:et,tr:ot})=>{const{state:ct}=et,ut=ct.doc.slice(it.from,it.to);ot.deleteRange(it.from,it.to);const dt=ot.mapping.map(g);return ot.insert(dt,ut.content),ot.setSelection(new TextSelection(ot.doc.resolve(Math.max(dt-1,0)))),!0},deleteCurrentNode=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,ot=et.$anchor.node();if(ot.content.size>0)return!1;const ct=it.selection.$anchor;for(let ut=ct.depth;ut>0;ut-=1)if(ct.node(ut).type===ot.type){if(g){const ft=ct.before(ut),St=ct.after(ut);it.delete(ft,St).scrollIntoView()}return!0}return!1};function getNodeType(it,g){if(typeof it=="string"){if(!g.nodes[it])throw Error(`There is no node type named '${it}'. Maybe you forgot to add the extension?`);return g.nodes[it]}return it}var deleteNode=it=>({tr:g,state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema),ut=g.selection.$anchor;for(let dt=ut.depth;dt>0;dt-=1)if(ut.node(dt).type===ct){if(ot){const St=ut.before(dt),kt=ut.after(dt);g.delete(St,kt).scrollIntoView()}return!0}return!1},deleteRange=it=>({tr:g,dispatch:et})=>{const{from:ot,to:ct}=it;return et&&g.delete(ot,ct),!0},deleteSelection=()=>({state:it,dispatch:g})=>deleteSelection$1(it,g),enter=()=>({commands:it})=>it.keyboardShortcut("Enter"),exitCode=()=>({state:it,dispatch:g})=>exitCode$1(it,g);function isRegExp(it){return Object.prototype.toString.call(it)==="[object RegExp]"}function objectIncludes(it,g,et={strict:!0}){const ot=Object.keys(g);return ot.length?ot.every(ct=>et.strict?g[ct]===it[ct]:isRegExp(g[ct])?g[ct].test(it[ct]):g[ct]===it[ct]):!0}function findMarkInSet(it,g,et={}){return it.find(ot=>ot.type===g&&objectIncludes(Object.fromEntries(Object.keys(et).map(ct=>[ct,ot.attrs[ct]])),et))}function isMarkInSet(it,g,et={}){return!!findMarkInSet(it,g,et)}function getMarkRange(it,g,et){var ot;if(!it||!g)return;let ct=it.parent.childAfter(it.parentOffset);if((!ct.node||!ct.node.marks.some(Tt=>Tt.type===g))&&(ct=it.parent.childBefore(it.parentOffset)),!ct.node||!ct.node.marks.some(Tt=>Tt.type===g)||(et=et||((ot=ct.node.marks[0])==null?void 0:ot.attrs),!findMarkInSet([...ct.node.marks],g,et)))return;let dt=ct.index,ft=it.start()+ct.offset,St=dt+1,kt=ft+ct.node.nodeSize;for(;dt>0&&isMarkInSet([...it.parent.child(dt-1).marks],g,et);)dt-=1,ft-=it.parent.child(dt).nodeSize;for(;St<it.parent.childCount&&isMarkInSet([...it.parent.child(St).marks],g,et);)kt+=it.parent.child(St).nodeSize,St+=1;return{from:ft,to:kt}}function getMarkType(it,g){if(typeof it=="string"){if(!g.marks[it])throw Error(`There is no mark type named '${it}'. Maybe you forgot to add the extension?`);return g.marks[it]}return it}var extendMarkRange=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const ut=getMarkType(it,ot.schema),{doc:dt,selection:ft}=et,{$from:St,from:kt,to:Tt}=ft;if(ct){const jt=getMarkRange(St,ut,g);if(jt&&jt.from<=kt&&jt.to>=Tt){const Rt=TextSelection.create(dt,jt.from,jt.to);et.setSelection(Rt)}}return!0},first=it=>g=>{const et=typeof it=="function"?it(g):it;for(let ot=0;ot<et.length;ot+=1)if(et[ot](g))return!0;return!1};function isTextSelection(it){return it instanceof TextSelection}function minMax(it=0,g=0,et=0){return Math.min(Math.max(it,g),et)}function resolveFocusPosition(it,g=null){if(!g)return null;const et=Selection.atStart(it),ot=Selection.atEnd(it);if(g==="start"||g===!0)return et;if(g==="end")return ot;const ct=et.from,ut=ot.to;return g==="all"?TextSelection.create(it,minMax(0,ct,ut),minMax(it.content.size,ct,ut)):TextSelection.create(it,minMax(g,ct,ut),minMax(g,ct,ut))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(it=null,g={})=>({editor:et,view:ot,tr:ct,dispatch:ut})=>{g={scrollIntoView:!0,...g};const dt=()=>{(isiOS()||isAndroid())&&ot.dom.focus(),requestAnimationFrame(()=>{et.isDestroyed||(ot.focus(),g!=null&&g.scrollIntoView&&et.commands.scrollIntoView())})};if(ot.hasFocus()&&it===null||it===!1)return!0;if(ut&&it===null&&!isTextSelection(et.state.selection))return dt(),!0;const ft=resolveFocusPosition(ct.doc,it)||et.state.selection,St=et.state.selection.eq(ft);return ut&&(St||ct.setSelection(ft),St&&ct.storedMarks&&ct.setStoredMarks(ct.storedMarks),dt()),!0},forEach=(it,g)=>et=>it.every((ot,ct)=>g(ot,{...et,index:ct})),insertContent=(it,g)=>({tr:et,commands:ot})=>ot.insertContentAt({from:et.selection.from,to:et.selection.to},it,g),removeWhitespaces=it=>{const g=it.childNodes;for(let et=g.length-1;et>=0;et-=1){const ot=g[et];ot.nodeType===3&&ot.nodeValue&&/^(\n\s\s|\n)$/.test(ot.nodeValue)?it.removeChild(ot):ot.nodeType===1&&removeWhitespaces(ot)}return it};function elementFromString(it){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const g=`<body>${it}</body>`,et=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(et)}function createNodeFromContent(it,g,et){if(it instanceof Node$2||it instanceof Fragment)return it;et={slice:!0,parseOptions:{},...et};const ot=typeof it=="object"&&it!==null,ct=typeof it=="string";if(ot)try{if(Array.isArray(it)&&it.length>0)return Fragment.fromArray(it.map(ft=>g.nodeFromJSON(ft)));const dt=g.nodeFromJSON(it);return et.errorOnInvalidContent&&dt.check(),dt}catch(ut){if(et.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:ut});return console.warn("[tiptap warn]: Invalid content.","Passed value:",it,"Error:",ut),createNodeFromContent("",g,et)}if(ct){if(et.errorOnInvalidContent){let dt=!1,ft="";const St=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:kt=>(dt=!0,ft=typeof kt=="string"?kt:kt.outerHTML,null)}]}})});if(et.slice?DOMParser.fromSchema(St).parseSlice(elementFromString(it),et.parseOptions):DOMParser.fromSchema(St).parse(elementFromString(it),et.parseOptions),et.errorOnInvalidContent&&dt)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ft}`)})}const ut=DOMParser.fromSchema(g);return et.slice?ut.parseSlice(elementFromString(it),et.parseOptions).content:ut.parse(elementFromString(it),et.parseOptions)}return createNodeFromContent("",g,et)}function selectionToInsertionEnd(it,g,et){const ot=it.steps.length-1;if(ot<g)return;const ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;const ut=it.mapping.maps[ot];let dt=0;ut.forEach((ft,St,kt,Tt)=>{dt===0&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}var isFragment=it=>!("type"in it),insertContentAt=(it,g,et)=>({tr:ot,dispatch:ct,editor:ut})=>{var dt;if(ct){et={parseOptions:ut.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...et};let ft;const St=Kt=>{ut.emit("contentError",{editor:ut,error:Kt,disableCollaboration:()=>{"collaboration"in ut.storage&&typeof ut.storage.collaboration=="object"&&ut.storage.collaboration&&(ut.storage.collaboration.isDisabled=!0)}})},kt={preserveWhitespace:"full",...et.parseOptions};if(!et.errorOnInvalidContent&&!ut.options.enableContentCheck&&ut.options.emitContentError)try{createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:!0})}catch(Kt){St(Kt)}try{ft=createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:(dt=et.errorOnInvalidContent)!=null?dt:ut.options.enableContentCheck})}catch(Kt){return St(Kt),!1}let{from:Tt,to:jt}=typeof it=="number"?{from:it,to:it}:{from:it.from,to:it.to},Rt=!0,Ft=!0;if((isFragment(ft)?ft:[ft]).forEach(Kt=>{Kt.check(),Rt=Rt?Kt.isText&&Kt.marks.length===0:!1,Ft=Ft?Kt.isBlock:!1}),Tt===jt&&Ft){const{parent:Kt}=ot.doc.resolve(Tt);Kt.isTextblock&&!Kt.type.spec.code&&!Kt.childCount&&(Tt-=1,jt+=1)}let zt;if(Rt){if(Array.isArray(g))zt=g.map(Kt=>Kt.text||"").join("");else if(g instanceof Fragment){let Kt="";g.forEach(Bt=>{Bt.text&&(Kt+=Bt.text)}),zt=Kt}else typeof g=="object"&&g&&g.text?zt=g.text:zt=g;ot.insertText(zt,Tt,jt)}else{zt=ft;const Kt=ot.doc.resolve(Tt),Bt=Kt.node(),Ut=Kt.parentOffset===0,Jt=Bt.isText||Bt.isTextblock,en=Bt.content.size>0;Ut&&Jt&&en&&(Tt=Math.max(0,Tt-1)),ot.replaceWith(Tt,jt,zt)}et.updateSelection&&selectionToInsertionEnd(ot,ot.steps.length-1,-1),et.applyInputRules&&ot.setMeta("applyInputRules",{from:Tt,text:zt}),et.applyPasteRules&&ot.setMeta("applyPasteRules",{from:Tt,text:zt})}return!0},joinUp=()=>({state:it,dispatch:g})=>joinUp$1(it,g),joinDown=()=>({state:it,dispatch:g})=>joinDown$1(it,g),joinBackward=()=>({state:it,dispatch:g})=>joinBackward$1(it,g),joinForward=()=>({state:it,dispatch:g})=>joinForward$1(it,g),joinItemBackward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,-1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinItemForward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinTextblockBackward=()=>({state:it,dispatch:g})=>joinTextblockBackward$1(it,g),joinTextblockForward=()=>({state:it,dispatch:g})=>joinTextblockForward$1(it,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(it){const g=it.split(/-(?!$)/);let et=g[g.length-1];et==="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft+=1){const St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))isiOS()||isMacOS()?dt=!0:ct=!0;else throw new Error(`Unrecognized modifier name: ${St}`)}return ot&&(et=`Alt-${et}`),ct&&(et=`Ctrl-${et}`),dt&&(et=`Meta-${et}`),ut&&(et=`Shift-${et}`),et}var keyboardShortcut=it=>({editor:g,view:et,tr:ot,dispatch:ct})=>{const ut=normalizeKeyName(it).split(/-(?!$)/),dt=ut.find(kt=>!["Alt","Ctrl","Meta","Shift"].includes(kt)),ft=new KeyboardEvent("keydown",{key:dt==="Space"?" ":dt,altKey:ut.includes("Alt"),ctrlKey:ut.includes("Ctrl"),metaKey:ut.includes("Meta"),shiftKey:ut.includes("Shift"),bubbles:!0,cancelable:!0}),St=g.captureTransaction(()=>{et.someProp("handleKeyDown",kt=>kt(et,ft))});return St==null||St.steps.forEach(kt=>{const Tt=kt.map(ot.mapping);Tt&&ct&&ot.maybeStep(Tt)}),!0};function isNodeActive(it,g,et={}){const{from:ot,to:ct,empty:ut}=it.selection,dt=g?getNodeType(g,it.schema):null,ft=[];it.doc.nodesBetween(ot,ct,(jt,Rt)=>{if(jt.isText)return;const Ft=Math.max(ot,Rt),$t=Math.min(ct,Rt+jt.nodeSize);ft.push({node:jt,from:Ft,to:$t})});const St=ct-ot,kt=ft.filter(jt=>dt?dt.name===jt.node.type.name:!0).filter(jt=>objectIncludes(jt.node.attrs,et,{strict:!1}));return ut?!!kt.length:kt.reduce((jt,Rt)=>jt+Rt.to-Rt.from,0)>=St}var lift=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?lift$1(et,ot):!1},liftEmptyBlock=()=>({state:it,dispatch:g})=>liftEmptyBlock$1(it,g),liftListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return liftListItem$1(ot)(g,et)},newlineInCode=()=>({state:it,dispatch:g})=>newlineInCode$1(it,g);function getSchemaTypeNameByName(it,g){return g.nodes[it]?"node":g.marks[it]?"mark":null}function deleteProps(it,g){const et=typeof g=="string"?[g]:g;return Object.keys(it).reduce((ot,ct)=>(et.includes(ct)||(ot[ct]=it[ct]),ot),{})}var resetAttributes=(it,g)=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{ot.doc.nodesBetween(St.$from.pos,St.$to.pos,(kt,Tt)=>{ut&&ut===kt.type&&et.setNodeMarkup(Tt,void 0,deleteProps(kt.attrs,g)),dt&&kt.marks.length&&kt.marks.forEach(jt=>{dt===jt.type&&et.addMark(Tt,Tt+kt.nodeSize,dt.create(deleteProps(jt.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:it,dispatch:g})=>(g&&it.scrollIntoView(),!0),selectAll=()=>({tr:it,dispatch:g})=>{if(g){const et=new AllSelection(it.doc);it.setSelection(et)}return!0},selectNodeBackward=()=>({state:it,dispatch:g})=>selectNodeBackward$1(it,g),selectNodeForward=()=>({state:it,dispatch:g})=>selectNodeForward$1(it,g),selectParentNode=()=>({state:it,dispatch:g})=>selectParentNode$1(it,g),selectTextblockEnd=()=>({state:it,dispatch:g})=>selectTextblockEnd$1(it,g),selectTextblockStart=()=>({state:it,dispatch:g})=>selectTextblockStart$1(it,g);function createDocument(it,g,et={},ot={}){return createNodeFromContent(it,g,{slice:!1,parseOptions:et,errorOnInvalidContent:ot.errorOnInvalidContent})}var setContent=(it,{errorOnInvalidContent:g,emitUpdate:et=!0,parseOptions:ot={}}={})=>({editor:ct,tr:ut,dispatch:dt,commands:ft})=>{const{doc:St}=ut;if(ot.preserveWhitespace!=="full"){const kt=createDocument(it,ct.schema,ot,{errorOnInvalidContent:g??ct.options.enableContentCheck});return dt&&ut.replaceWith(0,St.content.size,kt).setMeta("preventUpdate",!et),!0}return dt&&ut.setMeta("preventUpdate",!et),ft.insertContentAt({from:0,to:St.content.size},it,{parseOptions:ot,errorOnInvalidContent:g??ct.options.enableContentCheck})};function getMarkAttributes(it,g){const et=getMarkType(g,it.schema),{from:ot,to:ct,empty:ut}=it.selection,dt=[];ut?(it.storedMarks&&dt.push(...it.storedMarks),dt.push(...it.selection.$head.marks())):it.doc.nodesBetween(ot,ct,St=>{dt.push(...St.marks)});const ft=dt.find(St=>St.type.name===et.name);return ft?{...ft.attrs}:{}}function combineTransactionSteps(it,g){const et=new Transform$1(it);return g.forEach(ot=>{ot.steps.forEach(ct=>{et.step(ct)})}),et}function defaultBlockAt(it){for(let g=0;g<it.edgeCount;g+=1){const{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}function findChildrenInRange(it,g,et){const ot=[];return it.nodesBetween(g.from,g.to,(ct,ut)=>{et(ct)&&ot.push({node:ct,pos:ut})}),ot}function findParentNodeClosestToPos(it,g){for(let et=it.depth;et>0;et-=1){const ot=it.node(et);if(g(ot))return{pos:et>0?it.before(et):0,start:it.start(et),depth:et,node:ot}}}function findParentNode(it){return g=>findParentNodeClosestToPos(g.$from,it)}function getExtensionField(it,g,et){return it.config[g]===void 0&&it.parent?getExtensionField(it.parent,g,et):typeof it.config[g]=="function"?it.config[g].bind({...et,parent:it.parent?getExtensionField(it.parent,g,et):null}):it.config[g]}function flattenExtensions(it){return it.map(g=>{const et={name:g.name,options:g.options,storage:g.storage},ot=getExtensionField(g,"addExtensions",et);return ot?[g,...flattenExtensions(ot())]:g}).flat(10)}function getHTMLFromFragment(it,g){const et=DOMSerializer.fromSchema(g).serializeFragment(it),ct=document.implementation.createHTMLDocument().createElement("div");return ct.appendChild(et),ct.innerHTML}function isFunction(it){return typeof it=="function"}function callOrReturn(it,g=void 0,...et){return isFunction(it)?g?it.bind(g)(...et):it(...et):it}function isEmptyObject(it={}){return Object.keys(it).length===0&&it.constructor===Object}function splitExtensions(it){const g=it.filter(ct=>ct.type==="extension"),et=it.filter(ct=>ct.type==="node"),ot=it.filter(ct=>ct.type==="mark");return{baseExtensions:g,nodeExtensions:et,markExtensions:ot}}function getAttributesFromExtensions(it){const g=[],{nodeExtensions:et,markExtensions:ot}=splitExtensions(it),ct=[...et,...ot],ut={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return it.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage,extensions:ct},St=getExtensionField(dt,"addGlobalAttributes",ft);if(!St)return;St().forEach(Tt=>{Tt.types.forEach(jt=>{Object.entries(Tt.attributes).forEach(([Rt,Ft])=>{g.push({type:jt,name:Rt,attribute:{...ut,...Ft}})})})})}),ct.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage},St=getExtensionField(dt,"addAttributes",ft);if(!St)return;const kt=St();Object.entries(kt).forEach(([Tt,jt])=>{const Rt={...ut,...jt};typeof(Rt==null?void 0:Rt.default)=="function"&&(Rt.default=Rt.default()),Rt!=null&&Rt.isRequired&&(Rt==null?void 0:Rt.default)===void 0&&delete Rt.default,g.push({type:dt.name,name:Tt,attribute:Rt})})}),g}function mergeAttributes(...it){return it.filter(g=>!!g).reduce((g,et)=>{const ot={...g};return Object.entries(et).forEach(([ct,ut])=>{if(!ot[ct]){ot[ct]=ut;return}if(ct==="class"){const ft=ut?String(ut).split(" "):[],St=ot[ct]?ot[ct].split(" "):[],kt=ft.filter(Tt=>!St.includes(Tt));ot[ct]=[...St,...kt].join(" ")}else if(ct==="style"){const ft=ut?ut.split(";").map(Tt=>Tt.trim()).filter(Boolean):[],St=ot[ct]?ot[ct].split(";").map(Tt=>Tt.trim()).filter(Boolean):[],kt=new Map;St.forEach(Tt=>{const[jt,Rt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(jt,Rt)}),ft.forEach(Tt=>{const[jt,Rt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(jt,Rt)}),ot[ct]=Array.from(kt.entries()).map(([Tt,jt])=>`${Tt}: ${jt}`).join("; ")}else ot[ct]=ut}),ot},{})}function getRenderedAttributes(it,g){return g.filter(et=>et.type===it.type.name).filter(et=>et.attribute.rendered).map(et=>et.attribute.renderHTML?et.attribute.renderHTML(it.attrs)||{}:{[et.name]:it.attrs[et.name]}).reduce((et,ot)=>mergeAttributes(et,ot),{})}function fromString(it){return typeof it!="string"?it:it.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(it):it==="true"?!0:it==="false"?!1:it}function injectExtensionAttributesToParseRule(it,g){return"style"in it?it:{...it,getAttrs:et=>{const ot=it.getAttrs?it.getAttrs(et):it.attrs;if(ot===!1)return!1;const ct=g.reduce((ut,dt)=>{const ft=dt.attribute.parseHTML?dt.attribute.parseHTML(et):fromString(et.getAttribute(dt.name));return ft==null?ut:{...ut,[dt.name]:ft}},{});return{...ot,...ct}}}}function cleanUpSchemaItem(it){return Object.fromEntries(Object.entries(it).filter(([g,et])=>g==="attrs"&&isEmptyObject(et)?!1:et!=null))}function getSchemaByResolvedExtensions(it,g){var et;const ot=getAttributesFromExtensions(it),{nodeExtensions:ct,markExtensions:ut}=splitExtensions(it),dt=(et=ct.find(kt=>getExtensionField(kt,"topNode")))==null?void 0:et.name,ft=Object.fromEntries(ct.map(kt=>{const Tt=ot.filter(Bt=>Bt.type===kt.name),jt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},Rt=it.reduce((Bt,Ut)=>{const Jt=getExtensionField(Ut,"extendNodeSchema",jt);return{...Bt,...Jt?Jt(kt):{}}},{}),Ft=cleanUpSchemaItem({...Rt,content:callOrReturn(getExtensionField(kt,"content",jt)),marks:callOrReturn(getExtensionField(kt,"marks",jt)),group:callOrReturn(getExtensionField(kt,"group",jt)),inline:callOrReturn(getExtensionField(kt,"inline",jt)),atom:callOrReturn(getExtensionField(kt,"atom",jt)),selectable:callOrReturn(getExtensionField(kt,"selectable",jt)),draggable:callOrReturn(getExtensionField(kt,"draggable",jt)),code:callOrReturn(getExtensionField(kt,"code",jt)),whitespace:callOrReturn(getExtensionField(kt,"whitespace",jt)),linebreakReplacement:callOrReturn(getExtensionField(kt,"linebreakReplacement",jt)),defining:callOrReturn(getExtensionField(kt,"defining",jt)),isolating:callOrReturn(getExtensionField(kt,"isolating",jt)),attrs:Object.fromEntries(Tt.map(Bt=>{var Ut,Jt;return[Bt.name,{default:(Ut=Bt==null?void 0:Bt.attribute)==null?void 0:Ut.default,validate:(Jt=Bt==null?void 0:Bt.attribute)==null?void 0:Jt.validate}]}))}),$t=callOrReturn(getExtensionField(kt,"parseHTML",jt));$t&&(Ft.parseDOM=$t.map(Bt=>injectExtensionAttributesToParseRule(Bt,Tt)));const zt=getExtensionField(kt,"renderHTML",jt);zt&&(Ft.toDOM=Bt=>zt({node:Bt,HTMLAttributes:getRenderedAttributes(Bt,Tt)}));const Kt=getExtensionField(kt,"renderText",jt);return Kt&&(Ft.toText=Kt),[kt.name,Ft]})),St=Object.fromEntries(ut.map(kt=>{const Tt=ot.filter(Kt=>Kt.type===kt.name),jt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},Rt=it.reduce((Kt,Bt)=>{const Ut=getExtensionField(Bt,"extendMarkSchema",jt);return{...Kt,...Ut?Ut(kt):{}}},{}),Ft=cleanUpSchemaItem({...Rt,inclusive:callOrReturn(getExtensionField(kt,"inclusive",jt)),excludes:callOrReturn(getExtensionField(kt,"excludes",jt)),group:callOrReturn(getExtensionField(kt,"group",jt)),spanning:callOrReturn(getExtensionField(kt,"spanning",jt)),code:callOrReturn(getExtensionField(kt,"code",jt)),attrs:Object.fromEntries(Tt.map(Kt=>{var Bt,Ut;return[Kt.name,{default:(Bt=Kt==null?void 0:Kt.attribute)==null?void 0:Bt.default,validate:(Ut=Kt==null?void 0:Kt.attribute)==null?void 0:Ut.validate}]}))}),$t=callOrReturn(getExtensionField(kt,"parseHTML",jt));$t&&(Ft.parseDOM=$t.map(Kt=>injectExtensionAttributesToParseRule(Kt,Tt)));const zt=getExtensionField(kt,"renderHTML",jt);return zt&&(Ft.toDOM=Kt=>zt({mark:Kt,HTMLAttributes:getRenderedAttributes(Kt,Tt)})),[kt.name,Ft]}));return new Schema({topNode:dt,nodes:ft,marks:St})}function findDuplicates(it){const g=it.filter((et,ot)=>it.indexOf(et)!==ot);return Array.from(new Set(g))}function sortExtensions(it){return it.sort((et,ot)=>{const ct=getExtensionField(et,"priority")||100,ut=getExtensionField(ot,"priority")||100;return ct>ut?-1:ct<ut?1:0})}function resolveExtensions(it){const g=sortExtensions(flattenExtensions(it)),et=findDuplicates(g.map(ot=>ot.name));return et.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${et.map(ot=>`'${ot}'`).join(", ")}]. This can lead to issues.`),g}function getTextBetween(it,g,et){const{from:ot,to:ct}=g,{blockSeparator:ut=`

`,textSerializers:dt={}}=et||{};let ft="";return it.nodesBetween(ot,ct,(St,kt,Tt,jt)=>{var Rt;St.isBlock&&kt>ot&&(ft+=ut);const Ft=dt==null?void 0:dt[St.type.name];if(Ft)return Tt&&(ft+=Ft({node:St,pos:kt,parent:Tt,index:jt,range:g})),!1;St.isText&&(ft+=(Rt=St==null?void 0:St.text)==null?void 0:Rt.slice(Math.max(ot,kt)-kt,ct-kt))}),ft}function getText(it,g){const et={from:0,to:it.content.size};return getTextBetween(it,et,g)}function getTextSerializersFromSchema(it){return Object.fromEntries(Object.entries(it.nodes).filter(([,g])=>g.spec.toText).map(([g,et])=>[g,et.spec.toText]))}function getNodeAttributes(it,g){const et=getNodeType(g,it.schema),{from:ot,to:ct}=it.selection,ut=[];it.doc.nodesBetween(ot,ct,ft=>{ut.push(ft)});const dt=ut.reverse().find(ft=>ft.type.name===et.name);return dt?{...dt.attrs}:{}}function getAttributes$1(it,g){const et=getSchemaTypeNameByName(typeof g=="string"?g:g.name,it.schema);return et==="node"?getNodeAttributes(it,g):et==="mark"?getMarkAttributes(it,g):{}}function removeDuplicates(it,g=JSON.stringify){const et={};return it.filter(ot=>{const ct=g(ot);return Object.prototype.hasOwnProperty.call(et,ct)?!1:et[ct]=!0})}function simplifyChangedRanges(it){const g=removeDuplicates(it);return g.length===1?g:g.filter((et,ot)=>!g.filter((ut,dt)=>dt!==ot).some(ut=>et.oldRange.from>=ut.oldRange.from&&et.oldRange.to<=ut.oldRange.to&&et.newRange.from>=ut.newRange.from&&et.newRange.to<=ut.newRange.to))}function getChangedRanges(it){const{mapping:g,steps:et}=it,ot=[];return g.maps.forEach((ct,ut)=>{const dt=[];if(ct.ranges.length)ct.forEach((ft,St)=>{dt.push({from:ft,to:St})});else{const{from:ft,to:St}=et[ut];if(ft===void 0||St===void 0)return;dt.push({from:ft,to:St})}dt.forEach(({from:ft,to:St})=>{const kt=g.slice(ut).map(ft,-1),Tt=g.slice(ut).map(St),jt=g.invert().map(kt,-1),Rt=g.invert().map(Tt);ot.push({oldRange:{from:jt,to:Rt},newRange:{from:kt,to:Tt}})})}),simplifyChangedRanges(ot)}function getMarksBetween(it,g,et){const ot=[];return it===g?et.resolve(it).marks().forEach(ct=>{const ut=et.resolve(it),dt=getMarkRange(ut,ct.type);dt&&ot.push({mark:ct,...dt})}):et.nodesBetween(it,g,(ct,ut)=>{!ct||(ct==null?void 0:ct.nodeSize)===void 0||ot.push(...ct.marks.map(dt=>({from:ut,to:ut+ct.nodeSize,mark:dt})))}),ot}var getNodeAtPosition=(it,g,et,ot=20)=>{const ct=it.doc.resolve(et);let ut=ot,dt=null;for(;ut>0&&dt===null;){const ft=ct.node(ut);(ft==null?void 0:ft.type.name)===g?dt=ft:ut-=1}return[dt,ut]};function getSchemaTypeByName(it,g){return g.nodes[it]||g.marks[it]||null}function getSplittedAttributes(it,g,et){return Object.fromEntries(Object.entries(et).filter(([ot])=>{const ct=it.find(ut=>ut.type===g&&ut.name===ot);return ct?ct.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(it,g=500)=>{let et="";const ot=it.parentOffset;return it.parent.nodesBetween(Math.max(0,ot-g),ot,(ct,ut,dt,ft)=>{var St,kt;const Tt=((kt=(St=ct.type.spec).toText)==null?void 0:kt.call(St,{node:ct,pos:ut,parent:dt,index:ft}))||ct.textContent||"%leaf%";et+=ct.isAtom&&!ct.isText?Tt:Tt.slice(0,Math.max(0,ot-ut))}),et};function isMarkActive(it,g,et={}){const{empty:ot,ranges:ct}=it.selection,ut=g?getMarkType(g,it.schema):null;if(ot)return!!(it.storedMarks||it.selection.$from.marks()).filter(jt=>ut?ut.name===jt.type.name:!0).find(jt=>objectIncludes(jt.attrs,et,{strict:!1}));let dt=0;const ft=[];if(ct.forEach(({$from:jt,$to:Rt})=>{const Ft=jt.pos,$t=Rt.pos;it.doc.nodesBetween(Ft,$t,(zt,Kt)=>{if(!zt.isText&&!zt.marks.length)return;const Bt=Math.max(Ft,Kt),Ut=Math.min($t,Kt+zt.nodeSize),Jt=Ut-Bt;dt+=Jt,ft.push(...zt.marks.map(en=>({mark:en,from:Bt,to:Ut})))})}),dt===0)return!1;const St=ft.filter(jt=>ut?ut.name===jt.mark.type.name:!0).filter(jt=>objectIncludes(jt.mark.attrs,et,{strict:!1})).reduce((jt,Rt)=>jt+Rt.to-Rt.from,0),kt=ft.filter(jt=>ut?jt.mark.type!==ut&&jt.mark.type.excludes(ut):!0).reduce((jt,Rt)=>jt+Rt.to-Rt.from,0);return(St>0?St+kt:St)>=dt}function isActive(it,g,et={}){if(!g)return isNodeActive(it,null,et)||isMarkActive(it,null,et);const ot=getSchemaTypeNameByName(g,it.schema);return ot==="node"?isNodeActive(it,g,et):ot==="mark"?isMarkActive(it,g,et):!1}var isAtEndOfNode=(it,g)=>{const{$from:et,$to:ot,$anchor:ct}=it.selection;if(g){const ut=findParentNode(ft=>ft.type.name===g)(it.selection);if(!ut)return!1;const dt=it.doc.resolve(ut.pos+1);return ct.pos+1===dt.end()}return!(ot.parentOffset<ot.parent.nodeSize-2||et.pos!==ot.pos)},isAtStartOfNode=it=>{const{$from:g,$to:et}=it.selection;return!(g.parentOffset>0||g.pos!==et.pos)};function isExtensionRulesEnabled(it,g){return Array.isArray(g)?g.some(et=>(typeof et=="string"?et:et.name)===it.name):g}function isList(it,g){const{nodeExtensions:et}=splitExtensions(g),ot=et.find(dt=>dt.name===it);if(!ot)return!1;const ct={name:ot.name,options:ot.options,storage:ot.storage},ut=callOrReturn(getExtensionField(ot,"group",ct));return typeof ut!="string"?!1:ut.split(" ").includes("list")}function isNodeEmpty(it,{checkChildren:g=!0,ignoreWhitespace:et=!1}={}){var ot;if(et){if(it.type.name==="hardBreak")return!0;if(it.isText)return/^\s*$/m.test((ot=it.text)!=null?ot:"")}if(it.isText)return!it.text;if(it.isAtom||it.isLeaf)return!1;if(it.content.childCount===0)return!0;if(g){let ct=!0;return it.content.forEach(ut=>{ct!==!1&&(isNodeEmpty(ut,{ignoreWhitespace:et,checkChildren:g})||(ct=!1))}),ct}return!1}function isNodeSelection(it){return it instanceof NodeSelection}function canSetMark(it,g,et){var ot;const{selection:ct}=g;let ut=null;if(isTextSelection(ct)&&(ut=ct.$cursor),ut){const ft=(ot=it.storedMarks)!=null?ot:ut.marks();return ut.parent.type.allowsMarkType(et)&&(!!et.isInSet(ft)||!ft.some(kt=>kt.type.excludes(et)))}const{ranges:dt}=ct;return dt.some(({$from:ft,$to:St})=>{let kt=ft.depth===0?it.doc.inlineContent&&it.doc.type.allowsMarkType(et):!1;return it.doc.nodesBetween(ft.pos,St.pos,(Tt,jt,Rt)=>{if(kt)return!1;if(Tt.isInline){const Ft=!Rt||Rt.type.allowsMarkType(et),$t=!!et.isInSet(Tt.marks)||!Tt.marks.some(zt=>zt.type.excludes(et));kt=Ft&&$t}return!kt}),kt})}var setMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const{selection:ut}=et,{empty:dt,ranges:ft}=ut,St=getMarkType(it,ot.schema);if(ct)if(dt){const kt=getMarkAttributes(ot,St);et.addStoredMark(St.create({...kt,...g}))}else ft.forEach(kt=>{const Tt=kt.$from.pos,jt=kt.$to.pos;ot.doc.nodesBetween(Tt,jt,(Rt,Ft)=>{const $t=Math.max(Ft,Tt),zt=Math.min(Ft+Rt.nodeSize,jt);Rt.marks.find(Bt=>Bt.type===St)?Rt.marks.forEach(Bt=>{St===Bt.type&&et.addMark($t,zt,St.create({...Bt.attrs,...g}))}):et.addMark($t,zt,St.create(g))})});return canSetMark(ot,et,St)},setMeta=(it,g)=>({tr:et})=>(et.setMeta(it,g),!0),setNode=(it,g={})=>({state:et,dispatch:ot,chain:ct})=>{const ut=getNodeType(it,et.schema);let dt;return et.selection.$anchor.sameParent(et.selection.$head)&&(dt=et.selection.$anchor.parent.attrs),ut.isTextblock?ct().command(({commands:ft})=>setBlockType(ut,{...dt,...g})(et)?!0:ft.clearNodes()).command(({state:ft})=>setBlockType(ut,{...dt,...g})(ft,ot)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,ct=minMax(it,0,ot.content.size),ut=NodeSelection.create(ot,ct);g.setSelection(ut)}return!0},setTextSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,{from:ct,to:ut}=typeof it=="number"?{from:it,to:it}:it,dt=TextSelection.atStart(ot).from,ft=TextSelection.atEnd(ot).to,St=minMax(ct,dt,ft),kt=minMax(ut,dt,ft),Tt=TextSelection.create(ot,St,kt);g.setSelection(Tt)}return!0},sinkListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return sinkListItem$1(ot)(g,et)};function ensureMarks(it,g){const et=it.storedMarks||it.selection.$to.parentOffset&&it.selection.$from.marks();if(et){const ot=et.filter(ct=>g==null?void 0:g.includes(ct.type.name));it.tr.ensureMarks(ot)}}var splitBlock=({keepMarks:it=!0}={})=>({tr:g,state:et,dispatch:ot,editor:ct})=>{const{selection:ut,doc:dt}=g,{$from:ft,$to:St}=ut,kt=ct.extensionManager.attributes,Tt=getSplittedAttributes(kt,ft.node().type.name,ft.node().attrs);if(ut instanceof NodeSelection&&ut.node.isBlock)return!ft.parentOffset||!canSplit(dt,ft.pos)?!1:(ot&&(it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.split(ft.pos).scrollIntoView()),!0);if(!ft.parent.isBlock)return!1;const jt=St.parentOffset===St.parent.content.size,Rt=ft.depth===0?void 0:defaultBlockAt(ft.node(-1).contentMatchAt(ft.indexAfter(-1)));let Ft=jt&&Rt?[{type:Rt,attrs:Tt}]:void 0,$t=canSplit(g.doc,g.mapping.map(ft.pos),1,Ft);if(!Ft&&!$t&&canSplit(g.doc,g.mapping.map(ft.pos),1,Rt?[{type:Rt}]:void 0)&&($t=!0,Ft=Rt?[{type:Rt,attrs:Tt}]:void 0),ot){if($t&&(ut instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(ft.pos),1,Ft),Rt&&!jt&&!ft.parentOffset&&ft.parent.type!==Rt)){const zt=g.mapping.map(ft.before()),Kt=g.doc.resolve(zt);ft.node(-1).canReplaceWith(Kt.index(),Kt.index()+1,Rt)&&g.setNodeMarkup(g.mapping.map(ft.before()),Rt)}it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.scrollIntoView()}return $t},splitListItem=(it,g={})=>({tr:et,state:ot,dispatch:ct,editor:ut})=>{var dt;const ft=getNodeType(it,ot.schema),{$from:St,$to:kt}=ot.selection,Tt=ot.selection.node;if(Tt&&Tt.isBlock||St.depth<2||!St.sameParent(kt))return!1;const jt=St.node(-1);if(jt.type!==ft)return!1;const Rt=ut.extensionManager.attributes;if(St.parent.content.size===0&&St.node(-1).childCount===St.indexAfter(-1)){if(St.depth===2||St.node(-3).type!==ft||St.index(-2)!==St.node(-2).childCount-1)return!1;if(ct){let Bt=Fragment.empty;const Ut=St.index(-1)?1:St.index(-2)?2:3;for(let on=St.depth-Ut;on>=St.depth-3;on-=1)Bt=Fragment.from(St.node(on).copy(Bt));const Jt=St.indexAfter(-1)<St.node(-2).childCount?1:St.indexAfter(-2)<St.node(-3).childCount?2:3,en={...getSplittedAttributes(Rt,St.node().type.name,St.node().attrs),...g},tn=((dt=ft.contentMatch.defaultType)==null?void 0:dt.createAndFill(en))||void 0;Bt=Bt.append(Fragment.from(ft.createAndFill(null,tn)||void 0));const nn=St.before(St.depth-(Ut-1));et.replace(nn,St.after(-Jt),new Slice(Bt,4-Ut,0));let rn=-1;et.doc.nodesBetween(nn,et.doc.content.size,(on,dn)=>{if(rn>-1)return!1;on.isTextblock&&on.content.size===0&&(rn=dn+1)}),rn>-1&&et.setSelection(TextSelection.near(et.doc.resolve(rn))),et.scrollIntoView()}return!0}const Ft=kt.pos===St.end()?jt.contentMatchAt(0).defaultType:null,$t={...getSplittedAttributes(Rt,jt.type.name,jt.attrs),...g},zt={...getSplittedAttributes(Rt,St.node().type.name,St.node().attrs),...g};et.delete(St.pos,kt.pos);const Kt=Ft?[{type:ft,attrs:$t},{type:Ft,attrs:zt}]:[{type:ft,attrs:$t}];if(!canSplit(et.doc,St.pos,2))return!1;if(ct){const{selection:Bt,storedMarks:Ut}=ot,{splittableMarks:Jt}=ut.extensionManager,en=Ut||Bt.$to.parentOffset&&Bt.$from.marks();if(et.split(St.pos,2,Kt).scrollIntoView(),!en||!ct)return!0;const tn=en.filter(nn=>Jt.includes(nn.type.name));et.ensureMarks(tn)}return!0},joinListBackwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(Math.max(0,et.pos-1)).before(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,et.pos)&&it.join(et.pos),!0},joinListForwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(et.start).after(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,ot)&&it.join(ot),!0},toggleList=(it,g,et,ot={})=>({editor:ct,tr:ut,state:dt,dispatch:ft,chain:St,commands:kt,can:Tt})=>{const{extensions:jt,splittableMarks:Rt}=ct.extensionManager,Ft=getNodeType(it,dt.schema),$t=getNodeType(g,dt.schema),{selection:zt,storedMarks:Kt}=dt,{$from:Bt,$to:Ut}=zt,Jt=Bt.blockRange(Ut),en=Kt||zt.$to.parentOffset&&zt.$from.marks();if(!Jt)return!1;const tn=findParentNode(nn=>isList(nn.type.name,jt))(zt);if(Jt.depth>=1&&tn&&Jt.depth-tn.depth<=1){if(tn.node.type===Ft)return kt.liftListItem($t);if(isList(tn.node.type.name,jt)&&Ft.validContent(tn.node.content)&&ft)return St().command(()=>(ut.setNodeMarkup(tn.pos,Ft),!0)).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run()}return!et||!en||!ft?St().command(()=>Tt().wrapInList(Ft,ot)?!0:kt.clearNodes()).wrapInList(Ft,ot).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run():St().command(()=>{const nn=Tt().wrapInList(Ft,ot),rn=en.filter(on=>Rt.includes(on.type.name));return ut.ensureMarks(rn),nn?!0:kt.clearNodes()}).wrapInList(Ft,ot).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run()},toggleMark=(it,g={},et={})=>({state:ot,commands:ct})=>{const{extendEmptyMarkRange:ut=!1}=et,dt=getMarkType(it,ot.schema);return isMarkActive(ot,dt,g)?ct.unsetMark(dt,{extendEmptyMarkRange:ut}):ct.setMark(dt,g)},toggleNode=(it,g,et={})=>({state:ot,commands:ct})=>{const ut=getNodeType(it,ot.schema),dt=getNodeType(g,ot.schema),ft=isNodeActive(ot,ut,et);let St;return ot.selection.$anchor.sameParent(ot.selection.$head)&&(St=ot.selection.$anchor.parent.attrs),ft?ct.setNode(dt,St):ct.setNode(ut,{...St,...et})},toggleWrap=(it,g={})=>({state:et,commands:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?ot.lift(ct):ot.wrapIn(ct,g)},undoInputRule=()=>({state:it,dispatch:g})=>{const et=it.plugins;for(let ot=0;ot<et.length;ot+=1){const ct=et[ot];let ut;if(ct.spec.isInputRules&&(ut=ct.getState(it))){if(g){const dt=it.tr,ft=ut.transform;for(let St=ft.steps.length-1;St>=0;St-=1)dt.step(ft.steps[St].invert(ft.docs[St]));if(ut.text){const St=dt.doc.resolve(ut.from).marks();dt.replaceWith(ut.from,ut.to,it.schema.text(ut.text,St))}else dt.delete(ut.from,ut.to)}return!0}}return!1},unsetAllMarks=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,{empty:ot,ranges:ct}=et;return ot||g&&ct.forEach(ut=>{it.removeMark(ut.$from.pos,ut.$to.pos)}),!0},unsetMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{var ut;const{extendEmptyMarkRange:dt=!1}=g,{selection:ft}=et,St=getMarkType(it,ot.schema),{$from:kt,empty:Tt,ranges:jt}=ft;if(!ct)return!0;if(Tt&&dt){let{from:Rt,to:Ft}=ft;const $t=(ut=kt.marks().find(Kt=>Kt.type===St))==null?void 0:ut.attrs,zt=getMarkRange(kt,St,$t);zt&&(Rt=zt.from,Ft=zt.to),et.removeMark(Rt,Ft,St)}else jt.forEach(Rt=>{et.removeMark(Rt.$from.pos,Rt.$to.pos,St)});return et.removeStoredMark(St),!0},updateAttributes=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{const kt=St.$from.pos,Tt=St.$to.pos;let jt,Rt,Ft,$t;et.selection.empty?ot.doc.nodesBetween(kt,Tt,(zt,Kt)=>{ut&&ut===zt.type&&(Ft=Math.max(Kt,kt),$t=Math.min(Kt+zt.nodeSize,Tt),jt=Kt,Rt=zt)}):ot.doc.nodesBetween(kt,Tt,(zt,Kt)=>{Kt<kt&&ut&&ut===zt.type&&(Ft=Math.max(Kt,kt),$t=Math.min(Kt+zt.nodeSize,Tt),jt=Kt,Rt=zt),Kt>=kt&&Kt<=Tt&&(ut&&ut===zt.type&&et.setNodeMarkup(Kt,void 0,{...zt.attrs,...g}),dt&&zt.marks.length&&zt.marks.forEach(Bt=>{if(dt===Bt.type){const Ut=Math.max(Kt,kt),Jt=Math.min(Kt+zt.nodeSize,Tt);et.addMark(Ut,Jt,dt.create({...Bt.attrs,...g}))}}))}),Rt&&(jt!==void 0&&et.setNodeMarkup(jt,void 0,{...Rt.attrs,...g}),dt&&Rt.marks.length&&Rt.marks.forEach(zt=>{dt===zt.type&&et.addMark(Ft,$t,dt.create({...zt.attrs,...g}))}))}),!0):!1},wrapIn=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapIn$1(ct,g)(et,ot)},wrapInList=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapInList$1(ct,g)(et,ot)},EventEmitter=class{constructor(){this.callbacks={}}on(it,g){return this.callbacks[it]||(this.callbacks[it]=[]),this.callbacks[it].push(g),this}emit(it,...g){const et=this.callbacks[it];return et&&et.forEach(ot=>ot.apply(this,g)),this}off(it,g){const et=this.callbacks[it];return et&&(g?this.callbacks[it]=et.filter(ot=>ot!==g):delete this.callbacks[it]),this}once(it,g){const et=(...ot)=>{this.off(it,et),g.apply(this,ot)};return this.on(it,et)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(it){var g;this.find=it.find,this.handler=it.handler,this.undoable=(g=it.undoable)!=null?g:!0}},inputRuleMatcherHandler=(it,g)=>{if(isRegExp(g))return g.exec(it);const et=g(it);if(!et)return null;const ot=[et.text];return ot.index=et.index,ot.input=it,ot.data=et.data,et.replaceWith&&(et.text.includes(et.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),ot.push(et.replaceWith)),ot};function run$2(it){var g;const{editor:et,from:ot,to:ct,text:ut,rules:dt,plugin:ft}=it,{view:St}=et;if(St.composing)return!1;const kt=St.state.doc.resolve(ot);if(kt.parent.type.spec.code||(g=kt.nodeBefore||kt.nodeAfter)!=null&&g.marks.find(Rt=>Rt.type.spec.code))return!1;let Tt=!1;const jt=getTextContentFromNodes(kt)+ut;return dt.forEach(Rt=>{if(Tt)return;const Ft=inputRuleMatcherHandler(jt,Rt.find);if(!Ft)return;const $t=St.state.tr,zt=createChainableState({state:St.state,transaction:$t}),Kt={from:ot-(Ft[0].length-ut.length),to:ct},{commands:Bt,chain:Ut,can:Jt}=new CommandManager$1({editor:et,state:zt});Rt.handler({state:zt,range:Kt,match:Ft,commands:Bt,chain:Ut,can:Jt})===null||!$t.steps.length||(Rt.undoable&&$t.setMeta(ft,{transform:$t,from:ot,to:ct,text:ut}),St.dispatch($t),Tt=!0)}),Tt}function inputRulesPlugin(it){const{editor:g,rules:et}=it,ot=new Plugin({state:{init(){return null},apply(ct,ut,dt){const ft=ct.getMeta(ot);if(ft)return ft;const St=ct.getMeta("applyInputRules");return!!St&&setTimeout(()=>{let{text:Tt}=St;typeof Tt=="string"?Tt=Tt:Tt=getHTMLFromFragment(Fragment.from(Tt),dt.schema);const{from:jt}=St,Rt=jt+Tt.length;run$2({editor:g,from:jt,to:Rt,text:Tt,rules:et,plugin:ot})}),ct.selectionSet||ct.docChanged?null:ut}},props:{handleTextInput(ct,ut,dt,ft){return run$2({editor:g,from:ut,to:dt,text:ft,rules:et,plugin:ot})},handleDOMEvents:{compositionend:ct=>(setTimeout(()=>{const{$cursor:ut}=ct.state.selection;ut&&run$2({editor:g,from:ut.pos,to:ut.pos,text:"",rules:et,plugin:ot})}),!1)},handleKeyDown(ct,ut){if(ut.key!=="Enter")return!1;const{$cursor:dt}=ct.state.selection;return dt?run$2({editor:g,from:dt.pos,to:dt.pos,text:`
`,rules:et,plugin:ot}):!1}},isInputRules:!0});return ot}function getType(it){return Object.prototype.toString.call(it).slice(8,-1)}function isPlainObject(it){return getType(it)!=="Object"?!1:it.constructor===Object&&Object.getPrototypeOf(it)===Object.prototype}function mergeDeep(it,g){const et={...it};return isPlainObject(it)&&isPlainObject(g)&&Object.keys(g).forEach(ot=>{isPlainObject(g[ot])&&isPlainObject(it[ot])?et[ot]=mergeDeep(it[ot],g[ot]):et[ot]=g[ot]}),et}var Extendable=class{constructor(it={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...it},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(it={}){const g=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,it)});return g.name=this.name,g.parent=this.parent,g}extend(it={}){const g=new this.constructor({...this.config,...it});return g.parent=this,this.child=g,g.name="name"in it?it.name:g.parent.name,g}},Mark=class $P extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(g={}){const et=typeof g=="function"?g():g;return new $P(et)}static handleExit({editor:g,mark:et}){const{tr:ot}=g.state,ct=g.state.selection.$from;if(ct.pos===ct.end()){const dt=ct.marks();if(!!!dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name))return!1;const St=dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name);return St&&ot.removeStoredMark(St),ot.insertText(" ",ct.pos),g.view.dispatch(ot),!0}return!1}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function isNumber(it){return typeof it=="number"}var PasteRule=class{constructor(it){this.find=it.find,this.handler=it.handler}},pasteRuleMatcherHandler=(it,g,et)=>{if(isRegExp(g))return[...it.matchAll(g)];const ot=g(it,et);return ot?ot.map(ct=>{const ut=[ct.text];return ut.index=ct.index,ut.input=it,ut.data=ct.data,ct.replaceWith&&(ct.text.includes(ct.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),ut.push(ct.replaceWith)),ut}):[]};function run2(it){const{editor:g,state:et,from:ot,to:ct,rule:ut,pasteEvent:dt,dropEvent:ft}=it,{commands:St,chain:kt,can:Tt}=new CommandManager$1({editor:g,state:et}),jt=[];return et.doc.nodesBetween(ot,ct,(Ft,$t)=>{var zt,Kt,Bt,Ut,Jt;if((Kt=(zt=Ft.type)==null?void 0:zt.spec)!=null&&Kt.code||!(Ft.isText||Ft.isTextblock||Ft.isInline))return;const en=(Jt=(Ut=(Bt=Ft.content)==null?void 0:Bt.size)!=null?Ut:Ft.nodeSize)!=null?Jt:0,tn=Math.max(ot,$t),nn=Math.min(ct,$t+en);if(tn>=nn)return;const rn=Ft.isText?Ft.text||"":Ft.textBetween(tn-$t,nn-$t,void 0,"￼");pasteRuleMatcherHandler(rn,ut.find,dt).forEach(dn=>{if(dn.index===void 0)return;const cn=tn+dn.index+1,fn=cn+dn[0].length,mn={from:et.tr.mapping.map(cn),to:et.tr.mapping.map(fn)},En=ut.handler({state:et,range:mn,match:dn,commands:St,chain:kt,can:Tt,pasteEvent:dt,dropEvent:ft});jt.push(En)})}),jt.every(Ft=>Ft!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=it=>{var g;const et=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=et.clipboardData)==null||g.setData("text/html",it),et};function pasteRulesPlugin(it){const{editor:g,rules:et}=it;let ot=null,ct=!1,ut=!1,dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ft;try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}const St=({state:Tt,from:jt,to:Rt,rule:Ft,pasteEvt:$t})=>{const zt=Tt.tr,Kt=createChainableState({state:Tt,transaction:zt});if(!(!run2({editor:g,state:Kt,from:Math.max(jt-1,0),to:Rt.b-1,rule:Ft,pasteEvent:$t,dropEvent:ft})||!zt.steps.length)){try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}return dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,zt}};return et.map(Tt=>new Plugin({view(jt){const Rt=$t=>{var zt;ot=(zt=jt.dom.parentElement)!=null&&zt.contains($t.target)?jt.dom.parentElement:null,ot&&(tiptapDragFromOtherEditor=g)},Ft=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",Rt),window.addEventListener("dragend",Ft),{destroy(){window.removeEventListener("dragstart",Rt),window.removeEventListener("dragend",Ft)}}},props:{handleDOMEvents:{drop:(jt,Rt)=>{if(ut=ot===jt.dom.parentElement,ft=Rt,!ut){const Ft=tiptapDragFromOtherEditor;Ft!=null&&Ft.isEditable&&setTimeout(()=>{const $t=Ft.state.selection;$t&&Ft.commands.deleteRange({from:$t.from,to:$t.to})},10)}return!1},paste:(jt,Rt)=>{var Ft;const $t=(Ft=Rt.clipboardData)==null?void 0:Ft.getData("text/html");return dt=Rt,ct=!!($t!=null&&$t.includes("data-pm-slice")),!1}}},appendTransaction:(jt,Rt,Ft)=>{const $t=jt[0],zt=$t.getMeta("uiEvent")==="paste"&&!ct,Kt=$t.getMeta("uiEvent")==="drop"&&!ut,Bt=$t.getMeta("applyPasteRules"),Ut=!!Bt;if(!zt&&!Kt&&!Ut)return;if(Ut){let{text:tn}=Bt;typeof tn=="string"?tn=tn:tn=getHTMLFromFragment(Fragment.from(tn),Ft.schema);const{from:nn}=Bt,rn=nn+tn.length,on=createClipboardPasteEvent(tn);return St({rule:Tt,state:Ft,from:nn,to:{b:rn},pasteEvt:on})}const Jt=Rt.doc.content.findDiffStart(Ft.doc.content),en=Rt.doc.content.findDiffEnd(Ft.doc.content);if(!(!isNumber(Jt)||!en||Jt===en.b))return St({rule:Tt,state:Ft,from:Jt,to:en,pasteEvt:dt})}}))}var ExtensionManager=class{constructor(it,g){this.splittableMarks=[],this.editor=g,this.baseExtensions=it,this.extensions=resolveExtensions(it),this.schema=getSchemaByResolvedExtensions(this.extensions,g),this.setupExtensions()}get commands(){return this.extensions.reduce((it,g)=>{const et={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)},ot=getExtensionField(g,"addCommands",et);return ot?{...it,...ot()}:it},{})}get plugins(){const{editor:it}=this;return sortExtensions([...this.extensions].reverse()).flatMap(ot=>{const ct={name:ot.name,options:ot.options,storage:this.editor.extensionStorage[ot.name],editor:it,type:getSchemaTypeByName(ot.name,this.schema)},ut=[],dt=getExtensionField(ot,"addKeyboardShortcuts",ct);let ft={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ct)&&(ft.ArrowRight=()=>Mark.handleExit({editor:it,mark:ot})),dt){const Rt=Object.fromEntries(Object.entries(dt()).map(([Ft,$t])=>[Ft,()=>$t({editor:it})]));ft={...ft,...Rt}}const St=keymap(ft);ut.push(St);const kt=getExtensionField(ot,"addInputRules",ct);if(isExtensionRulesEnabled(ot,it.options.enableInputRules)&&kt){const Rt=kt();if(Rt&&Rt.length){const Ft=inputRulesPlugin({editor:it,rules:Rt}),$t=Array.isArray(Ft)?Ft:[Ft];ut.push(...$t)}}const Tt=getExtensionField(ot,"addPasteRules",ct);if(isExtensionRulesEnabled(ot,it.options.enablePasteRules)&&Tt){const Rt=Tt();if(Rt&&Rt.length){const Ft=pasteRulesPlugin({editor:it,rules:Rt});ut.push(...Ft)}}const jt=getExtensionField(ot,"addProseMirrorPlugins",ct);if(jt){const Rt=jt();ut.push(...Rt)}return ut})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:it}=this,{nodeExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addNodeView")).map(et=>{const ot=this.attributes.filter(St=>St.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getNodeType(et.name,this.schema)},ut=getExtensionField(et,"addNodeView",ct);if(!ut)return[];const dt=ut();if(!dt)return[];const ft=(St,kt,Tt,jt,Rt)=>{const Ft=getRenderedAttributes(St,ot);return dt({node:St,view:kt,getPos:Tt,decorations:jt,innerDecorations:Rt,editor:it,extension:et,HTMLAttributes:Ft})};return[et.name,ft]}))}get markViews(){const{editor:it}=this,{markExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addMarkView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getMarkType(et.name,this.schema)},ut=getExtensionField(et,"addMarkView",ct);if(!ut)return[];const dt=(ft,St,kt)=>{const Tt=getRenderedAttributes(ft,ot);return ut()({mark:ft,view:St,inline:kt,editor:it,extension:et,HTMLAttributes:Tt,updateAttributes:jt=>{updateMarkViewAttributes(ft,it,jt)}})};return[et.name,dt]}))}setupExtensions(){const it=this.extensions;this.editor.extensionStorage=Object.fromEntries(it.map(g=>[g.name,g.storage])),it.forEach(g=>{var et;const ot={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&((et=callOrReturn(getExtensionField(g,"keepOnSplit",ot)))==null||et)&&this.splittableMarks.push(g.name);const ct=getExtensionField(g,"onBeforeCreate",ot),ut=getExtensionField(g,"onCreate",ot),dt=getExtensionField(g,"onUpdate",ot),ft=getExtensionField(g,"onSelectionUpdate",ot),St=getExtensionField(g,"onTransaction",ot),kt=getExtensionField(g,"onFocus",ot),Tt=getExtensionField(g,"onBlur",ot),jt=getExtensionField(g,"onDestroy",ot);ct&&this.editor.on("beforeCreate",ct),ut&&this.editor.on("create",ut),dt&&this.editor.on("update",dt),ft&&this.editor.on("selectionUpdate",ft),St&&this.editor.on("transaction",St),kt&&this.editor.on("focus",kt),Tt&&this.editor.on("blur",Tt),jt&&this.editor.on("destroy",jt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class BP extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(g={}){const et=typeof g=="function"?g():g;return new BP(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:it}=this,{state:g,schema:et}=it,{doc:ot,selection:ct}=g,{ranges:ut}=ct,dt=Math.min(...ut.map(Tt=>Tt.$from.pos)),ft=Math.max(...ut.map(Tt=>Tt.$to.pos)),St=getTextSerializersFromSchema(et);return getTextBetween(ot,{from:dt,to:ft},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:St})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:it,appendedTransactions:g}){var et,ot,ct;const ut=()=>{var dt,ft,St,kt;if((kt=(St=(ft=(dt=this.editor.options.coreExtensionOptions)==null?void 0:dt.delete)==null?void 0:ft.filterTransaction)==null?void 0:St.call(ft,it))!=null?kt:it.getMeta("y-sync$"))return;const Tt=combineTransactionSteps(it.before,[it,...g]);getChangedRanges(Tt).forEach(Ft=>{Tt.mapping.mapResult(Ft.oldRange.from).deletedAfter&&Tt.mapping.mapResult(Ft.oldRange.to).deletedBefore&&Tt.before.nodesBetween(Ft.oldRange.from,Ft.oldRange.to,($t,zt)=>{const Kt=zt+$t.nodeSize-2,Bt=Ft.oldRange.from<=zt&&Kt<=Ft.oldRange.to;this.editor.emit("delete",{type:"node",node:$t,from:zt,to:Kt,newFrom:Tt.mapping.map(zt),newTo:Tt.mapping.map(Kt),deletedRange:Ft.oldRange,newRange:Ft.newRange,partial:!Bt,editor:this.editor,transaction:it,combinedTransform:Tt})})});const Rt=Tt.mapping;Tt.steps.forEach((Ft,$t)=>{var zt,Kt;if(Ft instanceof RemoveMarkStep){const Bt=Rt.slice($t).map(Ft.from,-1),Ut=Rt.slice($t).map(Ft.to),Jt=Rt.invert().map(Bt,-1),en=Rt.invert().map(Ut),tn=(zt=Tt.doc.nodeAt(Bt-1))==null?void 0:zt.marks.some(rn=>rn.eq(Ft.mark)),nn=(Kt=Tt.doc.nodeAt(Ut))==null?void 0:Kt.marks.some(rn=>rn.eq(Ft.mark));this.editor.emit("delete",{type:"mark",mark:Ft.mark,from:Ft.from,to:Ft.to,deletedRange:{from:Jt,to:en},newRange:{from:Bt,to:Ut},partial:!!(nn||tn),editor:this.editor,transaction:it,combinedTransform:Tt})}})};(ct=(ot=(et=this.editor.options.coreExtensionOptions)==null?void 0:et.delete)==null?void 0:ot.async)==null||ct?setTimeout(ut,0):ut()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(it,g,et,ot)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:et,moved:ot})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:it}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(g,et)=>{it.isFocused=!0;const ot=it.state.tr.setMeta("focus",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1},blur:(g,et)=>{it.isFocused=!1;const ot=it.state.tr.setMeta("blur",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const it=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.undoInputRule(),()=>dt.command(({tr:ft})=>{const{selection:St,doc:kt}=ft,{empty:Tt,$anchor:jt}=St,{pos:Rt,parent:Ft}=jt,$t=jt.parent.isTextblock&&Rt>0?ft.doc.resolve(Rt-1):jt,zt=$t.parent.type.spec.isolating,Kt=jt.pos-jt.parentOffset,Bt=zt&&$t.parent.childCount===1?Kt===jt.pos:Selection.atStart(kt).from===Rt;return!Tt||!Ft.type.isTextblock||Ft.textContent.length||!Bt||Bt&&jt.parent.type.name==="paragraph"?!1:dt.clearNodes()}),()=>dt.deleteSelection(),()=>dt.joinBackward(),()=>dt.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.deleteSelection(),()=>dt.deleteCurrentNode(),()=>dt.joinForward(),()=>dt.selectNodeForward()]),ot={Enter:()=>this.editor.commands.first(({commands:dt})=>[()=>dt.newlineInCode(),()=>dt.createParagraphNear(),()=>dt.liftEmptyBlock(),()=>dt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:it,"Mod-Backspace":it,"Shift-Backspace":it,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},ct={...ot},ut={...ot,"Ctrl-h":it,"Alt-Backspace":it,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?ut:ct},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(it,g,et)=>{if(it.some(zt=>zt.getMeta("composition")))return;const ot=it.some(zt=>zt.docChanged)&&!g.doc.eq(et.doc),ct=it.some(zt=>zt.getMeta("preventClearDocument"));if(!ot||ct)return;const{empty:ut,from:dt,to:ft}=g.selection,St=Selection.atStart(g.doc).from,kt=Selection.atEnd(g.doc).to;if(ut||!(dt===St&&ft===kt)||!isNodeEmpty(et.doc))return;const Rt=et.tr,Ft=createChainableState({state:et,transaction:Rt}),{commands:$t}=new CommandManager$1({editor:this.editor,state:Ft});if($t.clearNodes(),!!Rt.steps.length)return Rt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(it,g,et)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:et})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),NodePos=class Dy{constructor(g,et,ot=!1,ct=null){this.currentNode=null,this.actualDepth=null,this.isBlock=ot,this.resolvedPos=g,this.editor=et,this.currentNode=ct}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!=null?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let et=this.from,ot=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}et=this.from+1,ot=this.to-1}this.editor.commands.insertContentAt({from:et,to:ot},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),et=this.resolvedPos.doc.resolve(g);return new Dy(et,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new Dy(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new Dy(g,this.editor)}get children(){const g=[];return this.node.content.forEach((et,ot)=>{const ct=et.isBlock&&!et.isTextblock,ut=et.isAtom&&!et.isText,dt=this.pos+ot+(ut?0:1);if(dt<0||dt>this.resolvedPos.doc.nodeSize-2)return;const ft=this.resolvedPos.doc.resolve(dt);if(!ct&&ft.depth<=this.depth)return;const St=new Dy(ft,this.editor,ct,ct?et:null);ct&&(St.actualDepth=this.depth+1),g.push(new Dy(ft,this.editor,ct,ct?et:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,et={}){let ot=null,ct=this.parent;for(;ct&&!ot;){if(ct.node.type.name===g)if(Object.keys(et).length>0){const ut=ct.node.attrs,dt=Object.keys(et);for(let ft=0;ft<dt.length;ft+=1){const St=dt[ft];if(ut[St]!==et[St])break}}else ot=ct;ct=ct.parent}return ot}querySelector(g,et={}){return this.querySelectorAll(g,et,!0)[0]||null}querySelectorAll(g,et={},ot=!1){let ct=[];if(!this.children||this.children.length===0)return ct;const ut=Object.keys(et);return this.children.forEach(dt=>{ot&&ct.length>0||(dt.node.type.name===g&&ut.every(St=>et[St]===dt.node.attrs[St])&&ct.push(dt),!(ot&&ct.length>0)&&(ct=ct.concat(dt.querySelectorAll(g,et,ot))))}),ct}setAttribute(g){const{tr:et}=this.editor.state;et.setNodeMarkup(this.from,void 0,{...this.node.attrs,...g}),this.editor.view.dispatch(et)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(it,g,et){const ot=document.querySelector(`style[data-tiptap-style${et?`-${et}`:""}]`);if(ot!==null)return ot;const ct=document.createElement("style");return g&&ct.setAttribute("nonce",g),ct.setAttribute(`data-tiptap-style${et?`-${et}`:""}`,""),ct.innerHTML=it,document.getElementsByTagName("head")[0].appendChild(ct),ct}var Editor=class extends EventEmitter{constructor(it={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:ot})=>{throw ot},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(it),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:ot,slice:ct,moved:ut})=>this.options.onDrop(ot,ct,ut)),this.on("paste",({event:ot,slice:ct})=>this.options.onPaste(ot,ct)),this.on("delete",this.options.onDelete);const g=this.createDoc(),et=resolveFocusPosition(g,this.options.autofocus);this.editorState=EditorState.create({doc:g,schema:this.schema,selection:et||void 0}),this.options.element&&this.mount(this.options.element)}mount(it){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(it),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const it=this.editorView.dom;it!=null&&it.editor&&delete it.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(it){console.warn("Failed to remove CSS element:",it)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(it={}){this.options={...this.options,...it},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(it,g=!0){this.setOptions({editable:it}),g&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:it=>{this.editorState=it},dispatch:it=>{this.dispatchTransaction(it)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(it,g)=>{if(this.editorView)return this.editorView[g];if(g==="state")return this.editorState;if(g in it)return Reflect.get(it,g);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${g}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(it,g){const et=isFunction(g)?g(it,[...this.state.plugins]):[...this.state.plugins,it],ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}unregisterPlugin(it){if(this.isDestroyed)return;const g=this.state.plugins;let et=g;if([].concat(it).forEach(ct=>{const ut=typeof ct=="string"?`${ct}$`:ct.key;et=et.filter(dt=>!dt.key.startsWith(ut))}),g.length===et.length)return;const ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}createExtensionManager(){var it,g;const ot=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(g=(it=this.options.coreExtensionOptions)==null?void 0:it.clipboardTextSerializer)==null?void 0:g.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete].filter(ct=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[ct.name]!==!1:!0):[],...this.options.extensions].filter(ct=>["extension","node","mark"].includes(ct==null?void 0:ct.type));this.extensionManager=new ExtensionManager(ot,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let it;try{it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return it}createView(it){var g;this.editorView=new EditorView(it,{...this.options.editorProps,attributes:{role:"textbox",...(g=this.options.editorProps)==null?void 0:g.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const et=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(et),this.prependClass(),this.injectCSS();const ot=this.view.dom;ot.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(it){this.isCapturingTransaction=!0,it(),this.isCapturingTransaction=!1;const g=this.capturedTransaction;return this.capturedTransaction=null,g}dispatchTransaction(it){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=it;return}it.steps.forEach(kt=>{var Tt;return(Tt=this.capturedTransaction)==null?void 0:Tt.step(kt)});return}const{state:g,transactions:et}=this.state.applyTransaction(it),ot=!this.state.selection.eq(g.selection),ct=et.includes(it),ut=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:it,nextState:g}),!ct)return;this.view.updateState(g),this.emit("transaction",{editor:this,transaction:it,appendedTransactions:et.slice(1)}),ot&&this.emit("selectionUpdate",{editor:this,transaction:it});const dt=et.findLast(kt=>kt.getMeta("focus")||kt.getMeta("blur")),ft=dt==null?void 0:dt.getMeta("focus"),St=dt==null?void 0:dt.getMeta("blur");ft&&this.emit("focus",{editor:this,event:ft.event,transaction:dt}),St&&this.emit("blur",{editor:this,event:St.event,transaction:dt}),!(it.getMeta("preventUpdate")||!et.some(kt=>kt.docChanged)||ut.doc.eq(g.doc))&&this.emit("update",{editor:this,transaction:it,appendedTransactions:et.slice(1)})}getAttributes(it){return getAttributes$1(this.state,it)}isActive(it,g){const et=typeof it=="string"?it:null,ot=typeof it=="string"?g:it;return isActive(this.state,et,ot)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(it){const{blockSeparator:g=`

`,textSerializers:et={}}=it||{};return getText(this.state.doc,{blockSeparator:g,textSerializers:{...getTextSerializersFromSchema(this.schema),...et}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var it,g;return(g=(it=this.editorView)==null?void 0:it.isDestroyed)!=null?g:!0}$node(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelector(it,g))||null}$nodes(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelectorAll(it,g))||null}$pos(it){const g=this.state.doc.resolve(it);return new NodePos(g,this)}get $doc(){return this.$pos(0)}};function markInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot);if(ct===!1||ct===null)return null;const{tr:ut}=g,dt=ot[ot.length-1],ft=ot[0];if(dt){const St=ft.search(/\S/),kt=et.from+ft.indexOf(dt),Tt=kt+dt.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Ft=>Ft.mark.type.excluded.find(zt=>zt===it.type&&zt!==Ft.mark.type)).filter(Ft=>Ft.to>kt).length)return null;Tt<et.to&&ut.delete(Tt,et.to),kt>et.from&&ut.delete(et.from+St,kt);const Rt=et.from+St+dt.length;ut.addMark(et.from+St,Rt,it.type.create(ct||{})),ut.removeStoredMark(it.type)}},undoable:it.undoable})}function nodeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot)||{},{tr:ut}=g,dt=et.from;let ft=et.to;const St=it.type.create(ct);if(ot[1]){const kt=ot[0].lastIndexOf(ot[1]);let Tt=dt+kt;Tt>ft?Tt=ft:ft=Tt+ot[1].length;const jt=ot[0][ot[0].length-1];ut.insertText(jt,dt+ot[0].length-1),ut.replaceWith(Tt,ft,St)}else if(ot[0]){const kt=it.type.isInline?dt:dt-1;ut.insert(kt,it.type.create(ct)).delete(ut.mapping.map(dt),ut.mapping.map(ft))}ut.scrollIntoView()},undoable:it.undoable})}function textblockTypeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=g.doc.resolve(et.from),ut=callOrReturn(it.getAttributes,void 0,ot)||{};if(!ct.node(-1).canReplaceWith(ct.index(-1),ct.indexAfter(-1),it.type))return null;g.tr.delete(et.from,et.to).setBlockType(et.from,et.from,it.type,ut)},undoable:it.undoable})}function wrappingInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot,chain:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot)||{},dt=g.tr.delete(et.from,et.to),St=dt.doc.resolve(et.from).blockRange(),kt=St&&findWrapping(St,it.type,ut);if(!kt)return null;if(dt.wrap(St,kt),it.keepMarks&&it.editor){const{selection:jt,storedMarks:Rt}=g,{splittableMarks:Ft}=it.editor.extensionManager,$t=Rt||jt.$to.parentOffset&&jt.$from.marks();if($t){const zt=$t.filter(Kt=>Ft.includes(Kt.type.name));dt.ensureMarks(zt)}}if(it.keepAttributes){const jt=it.type.name==="bulletList"||it.type.name==="orderedList"?"listItem":"taskList";ct().updateAttributes(jt,ut).run()}const Tt=dt.doc.resolve(et.from-1).nodeBefore;Tt&&Tt.type===it.type&&canJoin(dt.doc,et.from-1)&&(!it.joinPredicate||it.joinPredicate(ot,Tt))&&dt.join(et.from-1)},undoable:it.undoable})}function canInsertNode(it,g){const{selection:et}=it,{$from:ot}=et;if(et instanceof NodeSelection){const ut=ot.index();return ot.parent.canReplaceWith(ut,ut+1,g)}let ct=ot.depth;for(;ct>=0;){const ut=ot.index(ct);if(ot.node(ct).contentMatchAt(ut).matchType(g))return!0;ct-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(it){if(!(it!=null&&it.trim()))return{};const g={},et=[],ot=it.replace(/["']([^"']*)["']/g,kt=>(et.push(kt),`__QUOTED_${et.length-1}__`)),ct=ot.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(ct){const kt=ct.map(Tt=>Tt.trim().slice(1));g.class=kt.join(" ")}const ut=ot.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);ut&&(g.id=ut[1]);const dt=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(ot.matchAll(dt)).forEach(([,kt,Tt])=>{var jt;const Rt=parseInt(((jt=Tt.match(/__QUOTED_(\d+)__/))==null?void 0:jt[1])||"0",10),Ft=et[Rt];Ft&&(g[kt]=Ft.slice(1,-1))});const St=ot.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return St&&St.split(/\s+/).filter(Boolean).forEach(Tt=>{Tt.match(/^[a-zA-Z][\w-]*$/)&&(g[Tt]=!0)}),g}function serializeAttributes(it){if(!it||Object.keys(it).length===0)return"";const g=[];return it.class&&String(it.class).split(/\s+/).filter(Boolean).forEach(ot=>g.push(`.${ot}`)),it.id&&g.push(`#${it.id}`),Object.entries(it).forEach(([et,ot])=>{et==="class"||et==="id"||(ot===!0?g.push(et):ot!==!1&&ot!=null&&g.push(`${et}="${String(ot)}"`))}),g.join(" ")}function createAtomBlockMarkdownSpec(it){const{nodeName:g,name:et,parseAttributes:ot=parseAttributes,serializeAttributes:ct=serializeAttributes,defaultAttributes:ut={},requiredAttributes:dt=[],allowedAttributes:ft}=it,St=et||g,kt=Tt=>{if(!ft)return Tt;const jt={};return ft.forEach(Rt=>{Rt in Tt&&(jt[Rt]=Tt[Rt])}),jt};return{parseMarkdown:(Tt,jt)=>{const Rt={...ut,...Tt.attributes};return jt.createNode(g,Rt,[])},markdownTokenizer:{name:g,level:"block",start(Tt){var jt;const Rt=new RegExp(`^:::${St}(?:\\s|$)`,"m"),Ft=(jt=Tt.match(Rt))==null?void 0:jt.index;return Ft!==void 0?Ft:-1},tokenize(Tt,jt,Rt){const Ft=new RegExp(`^:::${St}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),$t=Tt.match(Ft);if(!$t)return;const zt=$t[1]||"",Kt=ot(zt);if(!dt.find(Ut=>!(Ut in Kt)))return{type:g,raw:$t[0],attributes:Kt}}},renderMarkdown:Tt=>{const jt=kt(Tt.attrs||{}),Rt=ct(jt),Ft=Rt?` {${Rt}}`:"";return`:::${St}${Ft} :::`}}}function createBlockMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseAttributes,serializeAttributes:ut=serializeAttributes,defaultAttributes:dt={},content:ft="block",allowedAttributes:St}=it,kt=et||g,Tt=jt=>{if(!St)return jt;const Rt={};return St.forEach(Ft=>{Ft in jt&&(Rt[Ft]=jt[Ft])}),Rt};return{parseMarkdown:(jt,Rt)=>{let Ft;if(ot){const zt=ot(jt);Ft=typeof zt=="string"?[{type:"text",text:zt}]:zt}else ft==="block"?Ft=Rt.parseChildren(jt.tokens||[]):Ft=Rt.parseInline(jt.tokens||[]);const $t={...dt,...jt.attributes};return Rt.createNode(g,$t,Ft)},markdownTokenizer:{name:g,level:"block",start(jt){var Rt;const Ft=new RegExp(`^:::${kt}`,"m"),$t=(Rt=jt.match(Ft))==null?void 0:Rt.index;return $t!==void 0?$t:-1},tokenize(jt,Rt,Ft){var $t;const zt=new RegExp(`^:::${kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),Kt=jt.match(zt);if(!Kt)return;const[Bt,Ut=""]=Kt,Jt=ct(Ut);let en=1;const tn=Bt.length;let nn="";const rn=/^:::([\w-]*)(\s.*)?/gm,on=jt.slice(tn);for(rn.lastIndex=0;;){const dn=rn.exec(on);if(dn===null)break;const cn=dn.index,fn=dn[1];if(!(($t=dn[2])!=null&&$t.endsWith(":::"))){if(fn)en+=1;else if(en-=1,en===0){const mn=on.slice(0,cn);nn=mn.trim();const En=jt.slice(0,tn+cn+dn[0].length);let Sn=[];if(nn)if(ft==="block")for(Sn=Ft.blockTokens(mn),Sn.forEach(wn=>{wn.text&&(!wn.tokens||wn.tokens.length===0)&&(wn.tokens=Ft.inlineTokens(wn.text))});Sn.length>0;){const wn=Sn[Sn.length-1];if(wn.type==="paragraph"&&(!wn.text||wn.text.trim()===""))Sn.pop();else break}else Sn=Ft.inlineTokens(nn);return{type:g,raw:En,attributes:Jt,content:nn,tokens:Sn}}}}}},renderMarkdown:(jt,Rt)=>{const Ft=Tt(jt.attrs||{}),$t=ut(Ft),zt=$t?` {${$t}}`:"",Kt=Rt.renderChildren(jt.content||[],`

`);return`:::${kt}${zt}

${Kt}

:::`}}}function parseShortcodeAttributes(it){if(!it.trim())return{};const g={},et=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let ot=et.exec(it);for(;ot!==null;){const[,ct,ut,dt]=ot;g[ct]=ut||dt,ot=et.exec(it)}return g}function serializeShortcodeAttributes(it){return Object.entries(it).filter(([,g])=>g!=null).map(([g,et])=>`${g}="${et}"`).join(" ")}function createInlineMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseShortcodeAttributes,serializeAttributes:ut=serializeShortcodeAttributes,defaultAttributes:dt={},selfClosing:ft=!1,allowedAttributes:St}=it,kt=et||g,Tt=Rt=>{if(!St)return Rt;const Ft={};return St.forEach($t=>{$t in Rt&&(Ft[$t]=Rt[$t])}),Ft},jt=kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(Rt,Ft)=>{const $t={...dt,...Rt.attributes};if(ft)return Ft.createNode(g,$t);const zt=ot?ot(Rt):Rt.content||"";return zt?Ft.createNode(g,$t,[Ft.createTextNode(zt)]):Ft.createNode(g,$t,[])},markdownTokenizer:{name:g,level:"inline",start(Rt){const Ft=ft?new RegExp(`\\[${jt}\\s*[^\\]]*\\]`):new RegExp(`\\[${jt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${jt}\\]`),$t=Rt.match(Ft),zt=$t==null?void 0:$t.index;return zt!==void 0?zt:-1},tokenize(Rt,Ft,$t){const zt=ft?new RegExp(`^\\[${jt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${jt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${jt}\\]`),Kt=Rt.match(zt);if(!Kt)return;let Bt="",Ut="";if(ft){const[,en]=Kt;Ut=en}else{const[,en,tn]=Kt;Ut=en,Bt=tn||""}const Jt=ct(Ut.trim());return{type:g,raw:Kt[0],content:Bt.trim(),attributes:Jt}}},renderMarkdown:Rt=>{let Ft="";ot?Ft=ot(Rt):Rt.content&&Rt.content.length>0&&(Ft=Rt.content.filter(Bt=>Bt.type==="text").map(Bt=>Bt.text).join(""));const $t=Tt(Rt.attrs||{}),zt=ut($t),Kt=zt?` ${zt}`:"";return ft?`[${kt}${Kt}]`:`[${kt}${Kt}]${Ft}[/${kt}]`}}}function parseIndentedBlocks(it,g,et){var ot,ct,ut,dt;const ft=it.split(`
`),St=[];let kt="",Tt=0;const jt=g.baseIndentSize||2;for(;Tt<ft.length;){const Rt=ft[Tt],Ft=Rt.match(g.itemPattern);if(!Ft){if(St.length>0)break;if(Rt.trim()===""){Tt+=1;continue}else return}const $t=g.extractItemData(Ft),{indentLevel:zt,mainContent:Kt}=$t;kt=`${kt}${Rt}
`;const Bt=[Kt];for(Tt+=1;Tt<ft.length;){const tn=ft[Tt];if(tn.trim()===""){const rn=ft.slice(Tt+1).findIndex(cn=>cn.trim()!=="");if(rn===-1)break;if((((ct=(ot=ft[Tt+1+rn].match(/^(\s*)/))==null?void 0:ot[1])==null?void 0:ct.length)||0)>zt){Bt.push(tn),kt=`${kt}${tn}
`,Tt+=1;continue}else break}if((((dt=(ut=tn.match(/^(\s*)/))==null?void 0:ut[1])==null?void 0:dt.length)||0)>zt)Bt.push(tn),kt=`${kt}${tn}
`,Tt+=1;else break}let Ut;const Jt=Bt.slice(1);if(Jt.length>0){const tn=Jt.map(nn=>nn.slice(zt+jt)).join(`
`);tn.trim()&&(g.customNestedParser?Ut=g.customNestedParser(tn):Ut=et.blockTokens(tn))}const en=g.createToken($t,Ut);St.push(en)}if(St.length!==0)return{items:St,raw:kt.trim()}}function renderNestedMarkdownContent(it,g,et,ot){if(!it||!Array.isArray(it.content))return"";const ct=typeof et=="function"?et(ot):et,[ut,...dt]=it.content,ft=g.renderChildren([ut]),St=[`${ct}${ft}`];return dt&&dt.length>0&&dt.forEach(kt=>{const Tt=g.renderChildren([kt]);if(Tt){const jt=Tt.split(`
`).map(Rt=>Rt?g.indent(Rt):"").join(`
`);St.push(jt)}}),St.join(`
`)}function updateMarkViewAttributes(it,g,et={}){const{state:ot}=g,{doc:ct,tr:ut}=ot,dt=it;ct.descendants((ft,St)=>{const kt=ut.mapping.map(St),Tt=ut.mapping.map(St)+ft.nodeSize;let jt=null;if(ft.marks.forEach(Ft=>{if(Ft!==dt)return!1;jt=Ft}),!jt)return;let Rt=!1;if(Object.keys(et).forEach(Ft=>{et[Ft]!==jt.attrs[Ft]&&(Rt=!0)}),Rt){const Ft=it.type.create({...it.attrs,...et});ut.removeMark(kt,Tt,it.type),ut.addMark(kt,Tt,Ft)}}),ut.docChanged&&g.view.dispatch(ut)}var Node3=class VP extends Extendable{constructor(){super(...arguments),this.type="node"}static create(g={}){const et=typeof g=="function"?g():g;return new VP(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function markPasteRule(it){return new PasteRule({find:it.find,handler:({state:g,range:et,match:ot,pasteEvent:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot,ct);if(ut===!1||ut===null)return null;const{tr:dt}=g,ft=ot[ot.length-1],St=ot[0];let kt=et.to;if(ft){const Tt=St.search(/\S/),jt=et.from+St.indexOf(ft),Rt=jt+ft.length;if(getMarksBetween(et.from,et.to,g.doc).filter($t=>$t.mark.type.excluded.find(Kt=>Kt===it.type&&Kt!==$t.mark.type)).filter($t=>$t.to>jt).length)return null;Rt<et.to&&dt.delete(Rt,et.to),jt>et.from&&dt.delete(et.from+Tt,jt),kt=et.from+Tt+ft.length,dt.addMark(et.from+Tt,kt,it.type.create(ut||{})),dt.removeStoredMark(it.type)}}})}var react=function it(g,et){if(g===et)return!0;if(g&&et&&typeof g=="object"&&typeof et=="object"){if(g.constructor!==et.constructor)return!1;var ot,ct,ut;if(Array.isArray(g)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(!it(g[ct],et[ct]))return!1;return!0}if(g instanceof Map&&et instanceof Map){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;for(ct of g.entries())if(!it(ct[1],et.get(ct[0])))return!1;return!0}if(g instanceof Set&&et instanceof Set){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(et)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(g[ct]!==et[ct])return!1;return!0}if(g.constructor===RegExp)return g.source===et.source&&g.flags===et.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===et.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===et.toString();if(ut=Object.keys(g),ot=ut.length,ot!==Object.keys(et).length)return!1;for(ct=ot;ct--!==0;)if(!Object.prototype.hasOwnProperty.call(et,ut[ct]))return!1;for(ct=ot;ct--!==0;){var dt=ut[ct];if(!(dt==="_owner"&&g.$$typeof)&&!it(g[dt],et[dt]))return!1}return!0}return g!==g&&et!==et};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(it,g,et,ot,ct){var ut=useRef(null);if(ut.current===null){var dt={hasValue:!1,value:null};ut.current=dt}else dt=ut.current;ut=useMemo(function(){function St(Ft){if(!kt){if(kt=!0,Tt=Ft,Ft=ot(Ft),ct!==void 0&&dt.hasValue){var $t=dt.value;if(ct($t,Ft))return jt=$t}return jt=Ft}if($t=jt,objectIs(Tt,Ft))return $t;var zt=ot(Ft);return ct!==void 0&&ct($t,zt)?(Tt=Ft,$t):(Tt=Ft,jt=zt)}var kt=!1,Tt,jt,Rt=et===void 0?null:et;return[function(){return St(g())},Rt===null?void 0:function(){return St(Rt())}]},[g,et,ot,ct]);var ft=useSyncExternalStore(it,ut[0],ut[1]);return useEffect(function(){dt.hasValue=!0,dt.value=ft},[ft]),useDebugValue(ft),ft};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...it)=>g=>{it.forEach(et=>{typeof et=="function"?et(g):et&&(et.current=g)})},Portals=({contentComponent:it})=>{const g=shimExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(g)})};function getInstance(){const it=new Set;let g={};return{subscribe(et){return it.add(et),()=>{it.delete(et)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(et,ot){g={...g,[et]:ReactDOM.createPortal(ot.reactElement,ot.element,et)},it.forEach(ct=>ct())},removeRenderer(et){const ot={...g};delete ot[et],g=ot,it.forEach(ct=>ct())}}}var PureEditorContent=class extends React$2.Component{constructor(it){var g;super(it),this.editorContentRef=React$2.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((g=it.editor)!=null&&g.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const it=this.props.editor;if(it&&!it.isDestroyed&&it.options.element){if(it.contentComponent)return;const g=this.editorContentRef.current;g.append(it.view.dom),it.setOptions({element:g}),it.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=it.contentComponent.subscribe(()=>{this.setState(et=>et.hasContentComponentInitialized?et:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),it.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var it;const g=this.props.editor;if(g){this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null;try{if(!((it=g.view.dom)!=null&&it.firstChild))return;const et=document.createElement("div");et.append(g.view.dom),g.setOptions({element:et})}catch{}}}render(){const{editor:it,innerRef:g,...et}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(g,this.editorContentRef),...et}),(it==null?void 0:it.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:it.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((it,g)=>{const et=React$2.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[it.editor]);return React$2.createElement(PureEditorContent,{key:et,innerRef:g,...it})}),EditorContent=React$2.memo(EditorContentWithKey),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(it){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=it,this.lastSnapshot={editor:it,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(it){return this.subscribers.add(it),()=>{this.subscribers.delete(it)}}watch(it){if(this.editor=it,this.editor){const g=()=>{this.transactionNumber+=1,this.subscribers.forEach(ot=>ot())},et=this.editor;return et.on("transaction",g),()=>{et.off("transaction",g)}}}};function useEditorState(it){var g;const[et]=reactExports.useState(()=>new EditorStateManager(it.editor)),ot=withSelectorExports.useSyncExternalStoreWithSelector(et.subscribe,et.getSnapshot,et.getServerSnapshot,it.selector,(g=it.equalityFn)!=null?g:deepEqual);return useIsomorphicLayoutEffect(()=>et.watch(it.editor),[it.editor,et]),reactExports.useDebugValue(ot),ot}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class zP{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(et=>et())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBeforeCreate)==null?void 0:ut.call(ct,...ot)},onBlur:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBlur)==null?void 0:ut.call(ct,...ot)},onCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onCreate)==null?void 0:ut.call(ct,...ot)},onDestroy:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDestroy)==null?void 0:ut.call(ct,...ot)},onFocus:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onFocus)==null?void 0:ut.call(ct,...ot)},onSelectionUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onSelectionUpdate)==null?void 0:ut.call(ct,...ot)},onTransaction:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onTransaction)==null?void 0:ut.call(ct,...ot)},onUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onUpdate)==null?void 0:ut.call(ct,...ot)},onContentError:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onContentError)==null?void 0:ut.call(ct,...ot)},onDrop:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDrop)==null?void 0:ut.call(ct,...ot)},onPaste:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onPaste)==null?void 0:ut.call(ct,...ot)},onDelete:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDelete)==null?void 0:ut.call(ct,...ot)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}static compareOptions(g,et){return Object.keys(g).every(ot=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(ot)?!0:ot==="extensions"&&g.extensions&&et.extensions?g.extensions.length!==et.extensions.length?!1:g.extensions.every((ct,ut)=>{var dt;return ct===((dt=et.extensions)==null?void 0:dt[ut])}):g[ot]===et[ot])}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?zP.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((ot,ct)=>ot===g[ct]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,et=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){et&&et.setOptions(this.options.current);return}et&&!et.isDestroyed&&(et.destroy(),this.instanceId===g&&this.setEditor(null))},1)}};function useEditor(it={},g=[]){const et=reactExports.useRef(it);et.current=it;const[ot]=reactExports.useState(()=>new EditorInstanceManager(et)),ct=shimExports.useSyncExternalStore(ot.subscribe,ot.getEditor,ot.getServerSnapshot);return reactExports.useDebugValue(ct),reactExports.useEffect(ot.onRender(g)),useEditorState({editor:ct,selector:({transactionNumber:ut})=>it.shouldRerenderOnTransaction===!1||it.shouldRerenderOnTransaction===void 0?null:it.immediatelyRender&&ut===0?0:ut+1}),ct}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$2.forwardRef((it,g)=>{const{onDragStart:et}=useReactNodeView(),ot=it.as||"div";return jsxRuntimeExports.jsx(ot,{...it,ref:g,"data-node-view-wrapper":"",onDragStart:et,style:{whiteSpace:"normal",...it.style}})});React$2.createContext({markViewContentRef:()=>{}});var h=(it,g)=>{if(it==="slot")return 0;if(it instanceof Function)return it(g);const{children:et,...ot}=g??{};if(it==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[it,ot,et]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:it}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:it})=>it.wrapIn(this.name),toggleBlockquote:()=>({commands:it})=>it.toggleWrap(this.name),unsetBlockquote:()=>({commands:it})=>it.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$a=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:it=>it.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:it=>it.type.name===this.name},{style:"font-weight",getAttrs:it=>/^(bold(er)?|[5-9]\d{2,})$/.test(it)&&null}]},renderHTML({HTMLAttributes:it}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:it})=>it.setMark(this.name),toggleBold:()=>({commands:it})=>it.toggleMark(this.name),unsetBold:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:it}){return["code",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setCode:()=>({commands:it})=>it.setMark(this.name),toggleCode:()=>({commands:it})=>it.toggleMark(this.name),unsetCode:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:it=>{var g;const{languageClassPrefix:et}=this.options;if(!et)return null;const ut=[...((g=it.firstElementChild)==null?void 0:g.classList)||[]].filter(dt=>dt.startsWith(et)).map(dt=>dt.replace(et,""))[0];return ut||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:it,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:it.attrs.language?this.options.languageClassPrefix+it.attrs.language:null},0]]},addCommands(){return{setCodeBlock:it=>({commands:g})=>g.setNode(this.name,it),toggleCodeBlock:it=>({commands:g})=>g.toggleNode(this.name,"paragraph",it)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:it,$anchor:g}=this.editor.state.selection,et=g.pos===1;return!it||g.parent.type.name!==this.name?!1:et||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;if(ut.parent.type!==this.type)return!1;const ft=" ".repeat(et);return dt?it.commands.insertContent(ft):it.commands.command(({tr:St})=>{const{from:kt,to:Tt}=ct,Ft=ot.doc.textBetween(kt,Tt,`
`,`
`).split(`
`).map($t=>ft+$t).join(`
`);return St.replaceWith(kt,Tt,ot.schema.text(Ft)),!0})},"Shift-Tab":({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;return ut.parent.type!==this.type?!1:dt?it.commands.command(({tr:ft})=>{var St;const{pos:kt}=ut,Tt=ut.start(),jt=ut.end(),Ft=ot.doc.textBetween(Tt,jt,`
`,`
`).split(`
`);let $t=0,zt=0;const Kt=kt-Tt;for(let nn=0;nn<Ft.length;nn+=1){if(zt+Ft[nn].length>=Kt){$t=nn;break}zt+=Ft[nn].length+1}const Ut=((St=Ft[$t].match(/^ */))==null?void 0:St[0])||"",Jt=Math.min(Ut.length,et);if(Jt===0)return!0;let en=Tt;for(let nn=0;nn<$t;nn+=1)en+=Ft[nn].length+1;return ft.delete(en,en+Jt),kt-en<=Jt&&ft.setSelection(TextSelection.create(ft.doc,en)),!0}):it.commands.command(({tr:ft})=>{const{from:St,to:kt}=ct,Rt=ot.doc.textBetween(St,kt,`
`,`
`).split(`
`).map(Ft=>{var $t;const zt=(($t=Ft.match(/^ */))==null?void 0:$t[0])||"",Kt=Math.min(zt.length,et);return Ft.slice(Kt)}).join(`
`);return ft.replaceWith(St,kt,ot.schema.text(Rt)),!0})},Enter:({editor:it})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=it,{selection:et}=g,{$from:ot,empty:ct}=et;if(!ct||ot.parent.type!==this.type)return!1;const ut=ot.parentOffset===ot.parent.nodeSize-2,dt=ot.parent.textContent.endsWith(`

`);return!ut||!dt?!1:it.chain().command(({tr:ft})=>(ft.delete(ot.pos-2,ot.pos),!0)).exitCode().run()},ArrowDown:({editor:it})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=it,{selection:et,doc:ot}=g,{$from:ct,empty:ut}=et;if(!ut||ct.parent.type!==this.type||!(ct.parentOffset===ct.parent.nodeSize-2))return!1;const ft=ct.after();return ft===void 0?!1:ot.nodeAt(ft)?it.commands.command(({tr:kt})=>(kt.setSelection(Selection.near(ot.resolve(ft))),!0)):it.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:it=>({language:it[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:it=>({language:it[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(it,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const et=g.clipboardData.getData("text/plain"),ot=g.clipboardData.getData("vscode-editor-data"),ct=ot?JSON.parse(ot):void 0,ut=ct==null?void 0:ct.mode;if(!et||!ut)return!1;const{tr:dt,schema:ft}=it.state,St=ft.text(et.replace(/\r\n?/g,`
`));return dt.replaceSelectionWith(this.type.create({language:ut},St)),dt.selection.$from.parent.type!==this.type&&dt.setSelection(TextSelection.near(dt.doc.resolve(Math.max(0,dt.selection.from-2)))),dt.setMeta("paste",!0),it.dispatch(dt),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:it}){return["br",mergeAttributes(this.options.HTMLAttributes,it)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:it,chain:g,state:et,editor:ot})=>it.first([()=>it.exitCode(),()=>it.command(()=>{const{selection:ct,storedMarks:ut}=et;if(ct.$from.parent.type.spec.isolating)return!1;const{keepMarks:dt}=this.options,{splittableMarks:ft}=ot.extensionManager,St=ut||ct.$to.parentOffset&&ct.$from.marks();return g().insertContent({type:this.name}).command(({tr:kt,dispatch:Tt})=>{if(Tt&&St&&dt){const jt=St.filter(Rt=>ft.includes(Rt.type.name));kt.ensureMarks(jt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(it=>({tag:`h${it}`,attrs:{level:it}}))},renderHTML({node:it,HTMLAttributes:g}){return[`h${this.options.levels.includes(it.attrs.level)?it.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.setNode(this.name,it):!1,toggleHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.toggleNode(this.name,"paragraph",it):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((it,g)=>({...it,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(it=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${it}})\\s$`),type:this.type,getAttributes:{level:it}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:it}){return["hr",mergeAttributes(this.options.HTMLAttributes,it)]},addCommands(){return{setHorizontalRule:()=>({chain:it,state:g})=>{if(!canInsertNode(g,g.schema.nodes[this.name]))return!1;const{selection:et}=g,{$to:ot}=et,ct=it();return isNodeSelection(et)?ct.insertContentAt(ot.pos,{type:this.name}):ct.insertContent({type:this.name}),ct.command(({state:ut,tr:dt,dispatch:ft})=>{if(ft){const{$to:St}=dt.selection,kt=St.end();if(St.nodeAfter)St.nodeAfter.isTextblock?dt.setSelection(TextSelection.create(dt.doc,St.pos+1)):St.nodeAfter.isBlock?dt.setSelection(NodeSelection.create(dt.doc,St.pos)):dt.setSelection(TextSelection.create(dt.doc,St.pos));else{const Tt=ut.schema.nodes[this.options.nextNodeType]||St.parent.type.contentMatch.defaultType,jt=Tt==null?void 0:Tt.create();jt&&(dt.insert(kt,jt),dt.setSelection(TextSelection.create(dt.doc,kt+1)))}dt.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:it=>it.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:it=>it.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:it}){return["em",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setItalic:()=>({commands:it})=>it.setMark(this.name),toggleItalic:()=>({commands:it})=>it.toggleMark(this.name),unsetItalic:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(it,g){return it in g||(g[it]=[]),g[it]}function addToGroups(it,g,et){g[numeric]&&(g[asciinumeric]=!0,g[alphanumeric]=!0),g[ascii]&&(g[asciinumeric]=!0,g[alpha]=!0),g[asciinumeric]&&(g[alphanumeric]=!0),g[alpha]&&(g[alphanumeric]=!0),g[alphanumeric]&&(g[domain]=!0),g[emoji]&&(g[domain]=!0);for(const ot in g){const ct=registerGroup(ot,et);ct.indexOf(it)<0&&ct.push(it)}}function flagsForToken(it,g){const et={};for(const ot in g)g[ot].indexOf(it)>=0&&(et[ot]=!0);return et}function State(it=null){this.j={},this.jr=[],this.jd=null,this.t=it}State.groups={};State.prototype={accepts(){return!!this.t},go(it){const g=this,et=g.j[it];if(et)return et;for(let ot=0;ot<g.jr.length;ot++){const ct=g.jr[ot][0],ut=g.jr[ot][1];if(ut&&ct.test(it))return ut}return g.jd},has(it,g=!1){return g?it in this.j:!!this.go(it)},ta(it,g,et,ot){for(let ct=0;ct<it.length;ct++)this.tt(it[ct],g,et,ot)},tr(it,g,et,ot){ot=ot||State.groups;let ct;return g&&g.j?ct=g:(ct=new State(g),et&&ot&&addToGroups(g,et,ot)),this.jr.push([it,ct]),ct},ts(it,g,et,ot){let ct=this;const ut=it.length;if(!ut)return ct;for(let dt=0;dt<ut-1;dt++)ct=ct.tt(it[dt]);return ct.tt(it[ut-1],g,et,ot)},tt(it,g,et,ot){ot=ot||State.groups;const ct=this;if(g&&g.j)return ct.j[it]=g,g;const ut=g;let dt,ft=ct.go(it);if(ft?(dt=new State,Object.assign(dt.j,ft.j),dt.jr.push.apply(dt.jr,ft.jr),dt.jd=ft.jd,dt.t=ft.t):dt=new State,ut){if(ot)if(dt.t&&typeof dt.t=="string"){const St=Object.assign(flagsForToken(dt.t,ot),et);addToGroups(ut,St,ot)}else et&&addToGroups(ut,et,ot);dt.t=ut}return ct.j[it]=dt,dt}};const ta=(it,g,et,ot,ct)=>it.ta(g,et,ot,ct),tr=(it,g,et,ot,ct)=>it.tr(g,et,ot,ct),ts=(it,g,et,ot,ct)=>it.ts(g,et,ot,ct),tt=(it,g,et,ot,ct)=>it.tt(g,et,ot,ct),WORD$1="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA$1="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS$1="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA:COMMA$1,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS:EQUALS$1,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD:WORD$1,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE$2=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="️",EMOJI_JOINER="‍",OBJECT_REPLACEMENT="￼";let tlds=null,utlds=null;function init$2(it=[]){const g={};State.groups=g;const et=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(et,"'",APOSTROPHE),tt(et,"{",OPENBRACE),tt(et,"}",CLOSEBRACE),tt(et,"[",OPENBRACKET),tt(et,"]",CLOSEBRACKET),tt(et,"(",OPENPAREN),tt(et,")",CLOSEPAREN),tt(et,"<",OPENANGLEBRACKET),tt(et,">",CLOSEANGLEBRACKET),tt(et,"（",FULLWIDTHLEFTPAREN),tt(et,"）",FULLWIDTHRIGHTPAREN),tt(et,"「",LEFTCORNERBRACKET),tt(et,"」",RIGHTCORNERBRACKET),tt(et,"『",LEFTWHITECORNERBRACKET),tt(et,"』",RIGHTWHITECORNERBRACKET),tt(et,"＜",FULLWIDTHLESSTHAN),tt(et,"＞",FULLWIDTHGREATERTHAN),tt(et,"&",AMPERSAND),tt(et,"*",ASTERISK),tt(et,"@",AT),tt(et,"`",BACKTICK),tt(et,"^",CARET),tt(et,":",COLON),tt(et,",",COMMA$1),tt(et,"$",DOLLAR),tt(et,".",DOT),tt(et,"=",EQUALS$1),tt(et,"!",EXCLAMATION),tt(et,"-",HYPHEN),tt(et,"%",PERCENT),tt(et,"|",PIPE),tt(et,"+",PLUS),tt(et,"#",POUND),tt(et,"?",QUERY),tt(et,'"',QUOTE),tt(et,"/",SLASH),tt(et,";",SEMI),tt(et,"~",TILDE),tt(et,"_",UNDERSCORE),tt(et,"\\",BACKSLASH),tt(et,"・",FULLWIDTHMIDDLEDOT);const ot=tr(et,DIGIT,NUM,{[numeric]:!0});tr(ot,DIGIT,ot);const ct=tr(ot,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),ut=tr(ot,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),dt=tr(et,ASCII_LETTER,WORD$1,{[ascii]:!0});tr(dt,DIGIT,ct),tr(dt,ASCII_LETTER,dt),tr(ct,DIGIT,ct),tr(ct,ASCII_LETTER,ct);const ft=tr(et,LETTER,UWORD,{[alpha]:!0});tr(ft,ASCII_LETTER),tr(ft,DIGIT,ut),tr(ft,LETTER,ft),tr(ut,DIGIT,ut),tr(ut,ASCII_LETTER),tr(ut,LETTER,ut);const St=tt(et,LF,NL,{[whitespace]:!0}),kt=tt(et,CR,WS,{[whitespace]:!0}),Tt=tr(et,SPACE$2,WS,{[whitespace]:!0});tt(et,OBJECT_REPLACEMENT,Tt),tt(kt,LF,St),tt(kt,OBJECT_REPLACEMENT,Tt),tr(kt,SPACE$2,Tt),tt(Tt,CR),tt(Tt,LF),tr(Tt,SPACE$2,Tt),tt(Tt,OBJECT_REPLACEMENT,Tt);const jt=tr(et,EMOJI,EMOJI$1,{[emoji]:!0});tt(jt,"#"),tr(jt,EMOJI,jt),tt(jt,EMOJI_VARIATION,jt);const Rt=tt(jt,EMOJI_JOINER);tt(Rt,"#"),tr(Rt,EMOJI,jt);const Ft=[[ASCII_LETTER,dt],[DIGIT,ct]],$t=[[ASCII_LETTER,null],[LETTER,ft],[DIGIT,ut]];for(let zt=0;zt<tlds.length;zt++)fastts(et,tlds[zt],TLD,WORD$1,Ft);for(let zt=0;zt<utlds.length;zt++)fastts(et,utlds[zt],UTLD,UWORD,$t);addToGroups(TLD,{tld:!0,ascii:!0},g),addToGroups(UTLD,{utld:!0,alpha:!0},g),fastts(et,"file",SCHEME,WORD$1,Ft),fastts(et,"mailto",SCHEME,WORD$1,Ft),fastts(et,"http",SLASH_SCHEME,WORD$1,Ft),fastts(et,"https",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftp",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftps",SLASH_SCHEME,WORD$1,Ft),addToGroups(SCHEME,{scheme:!0,ascii:!0},g),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},g),it=it.sort((zt,Kt)=>zt[0]>Kt[0]?1:-1);for(let zt=0;zt<it.length;zt++){const Kt=it[zt][0],Ut=it[zt][1]?{[scheme]:!0}:{[slashscheme]:!0};Kt.indexOf("-")>=0?Ut[domain]=!0:ASCII_LETTER.test(Kt)?DIGIT.test(Kt)?Ut[asciinumeric]=!0:Ut[ascii]=!0:Ut[numeric]=!0,ts(et,Kt,Kt,Ut)}return ts(et,"localhost",LOCALHOST,{ascii:!0}),et.jd=new State(SYM),{start:et,tokens:Object.assign({groups:g},tk)}}function run$1(it,g){const et=stringToArray$1(g.replace(/[A-Z]/g,ft=>ft.toLowerCase())),ot=et.length,ct=[];let ut=0,dt=0;for(;dt<ot;){let ft=it,St=null,kt=0,Tt=null,jt=-1,Rt=-1;for(;dt<ot&&(St=ft.go(et[dt]));)ft=St,ft.accepts()?(jt=0,Rt=0,Tt=ft):jt>=0&&(jt+=et[dt].length,Rt++),kt+=et[dt].length,ut+=et[dt].length,dt++;ut-=jt,dt-=Rt,kt-=jt,ct.push({t:Tt.t,v:g.slice(ut-kt,ut),s:ut-kt,e:ut})}return ct}function stringToArray$1(it){const g=[],et=it.length;let ot=0;for(;ot<et;){let ct=it.charCodeAt(ot),ut,dt=ct<55296||ct>56319||ot+1===et||(ut=it.charCodeAt(ot+1))<56320||ut>57343?it[ot]:it.slice(ot,ot+2);g.push(dt),ot+=dt.length}return g}function fastts(it,g,et,ot,ct){let ut;const dt=g.length;for(let ft=0;ft<dt-1;ft++){const St=g[ft];it.j[St]?ut=it.j[St]:(ut=new State(ot),ut.jr=ct.slice(),it.j[St]=ut),it=ut}return ut=new State(et),ut.jr=ct.slice(),it.j[g[dt-1]]=ut,ut}function decodeTlds(it){const g=[],et=[];let ot=0,ct="0123456789";for(;ot<it.length;){let ut=0;for(;ct.indexOf(it[ot+ut])>=0;)ut++;if(ut>0){g.push(et.join(""));for(let dt=parseInt(it.substring(ot,ot+ut),10);dt>0;dt--)et.pop();ot+=ut}else et.push(it[ot]),ot++}return g}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(it,g=null){let et=Object.assign({},defaults);it&&(et=Object.assign(et,it instanceof Options?it.o:it));const ot=et.ignoreTags,ct=[];for(let ut=0;ut<ot.length;ut++)ct.push(ot[ut].toUpperCase());this.o=et,g&&(this.defaultRender=g),this.ignoreTags=ct}Options.prototype={o:defaults,ignoreTags:[],defaultRender(it){return it},check(it){return this.get("validate",it.toString(),it)},get(it,g,et){const ot=g!=null;let ct=this.o[it];return ct&&(typeof ct=="object"?(ct=et.t in ct?ct[et.t]:defaults[it],typeof ct=="function"&&ot&&(ct=ct(g,et))):typeof ct=="function"&&ot&&(ct=ct(g,et.t,et)),ct)},getObj(it,g,et){let ot=this.o[it];return typeof ot=="function"&&g!=null&&(ot=ot(g,et.t,et)),ot},render(it){const g=it.render(this);return(this.get("render",null,it)||this.defaultRender)(g,it.t,it)}};function noop(it){return it}function MultiToken(it,g){this.t="token",this.v=it,this.tk=g}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(it){return this.toString()},toFormattedString(it){const g=this.toString(),et=it.get("truncate",g,this),ot=it.get("format",g,this);return et&&ot.length>et?ot.substring(0,et)+"…":ot},toFormattedHref(it){return it.get("formatHref",this.toHref(it.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(it=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(it),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(it){return{type:this.t,value:this.toFormattedString(it),isLink:this.isLink,href:this.toFormattedHref(it),start:this.startIndex(),end:this.endIndex()}},validate(it){return it.get("validate",this.toString(),this)},render(it){const g=this,et=this.toHref(it.get("defaultProtocol")),ot=it.get("formatHref",et,this),ct=it.get("tagName",et,g),ut=this.toFormattedString(it),dt={},ft=it.get("className",et,g),St=it.get("target",et,g),kt=it.get("rel",et,g),Tt=it.getObj("attributes",et,g),jt=it.getObj("events",et,g);return dt.href=ot,ft&&(dt.class=ft),St&&(dt.target=St),kt&&(dt.rel=kt),Tt&&Object.assign(dt,Tt),{tagName:ct,attributes:dt,content:ut,eventListeners:jt}}};function createTokenClass(it,g){class et extends MultiToken{constructor(ct,ut){super(ct,ut),this.t=it}}for(const ot in g)et.prototype[ot]=g[ot];return et.t=it,et}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$4=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(it=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${it}://${this.v}`},hasProtocol(){const it=this.tk;return it.length>=2&&it[0].t!==LOCALHOST&&it[1].t===COLON}}),makeState=it=>new State(it);function init$1({groups:it}){const g=it.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),et=[APOSTROPHE,COLON,COMMA$1,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],ot=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ct=makeState(),ut=tt(ct,TILDE);ta(ut,ot,ut),ta(ut,it.domain,ut);const dt=makeState(),ft=makeState(),St=makeState();ta(ct,it.domain,dt),ta(ct,it.scheme,ft),ta(ct,it.slashscheme,St),ta(dt,ot,ut),ta(dt,it.domain,dt);const kt=tt(dt,AT);tt(ut,AT,kt),tt(ft,AT,kt),tt(St,AT,kt);const Tt=tt(ut,DOT);ta(Tt,ot,ut),ta(Tt,it.domain,ut);const jt=makeState();ta(kt,it.domain,jt),ta(jt,it.domain,jt);const Rt=tt(jt,DOT);ta(Rt,it.domain,jt);const Ft=makeState(Email);ta(Rt,it.tld,Ft),ta(Rt,it.utld,Ft),tt(kt,LOCALHOST,Ft);const $t=tt(jt,HYPHEN);tt($t,HYPHEN,$t),ta($t,it.domain,jt),ta(Ft,it.domain,jt),tt(Ft,DOT,Rt),tt(Ft,HYPHEN,$t);const zt=tt(Ft,COLON);ta(zt,it.numeric,Email);const Kt=tt(dt,HYPHEN),Bt=tt(dt,DOT);tt(Kt,HYPHEN,Kt),ta(Kt,it.domain,dt),ta(Bt,ot,ut),ta(Bt,it.domain,dt);const Ut=makeState(Url);ta(Bt,it.tld,Ut),ta(Bt,it.utld,Ut),ta(Ut,it.domain,dt),ta(Ut,ot,ut),tt(Ut,DOT,Bt),tt(Ut,HYPHEN,Kt),tt(Ut,AT,kt);const Jt=tt(Ut,COLON),en=makeState(Url);ta(Jt,it.numeric,en);const tn=makeState(Url),nn=makeState();ta(tn,g,tn),ta(tn,et,nn),ta(nn,g,tn),ta(nn,et,nn),tt(Ut,SLASH,tn),tt(en,SLASH,tn);const rn=tt(ft,COLON),on=tt(St,COLON),dn=tt(on,SLASH),cn=tt(dn,SLASH);ta(ft,it.domain,dt),tt(ft,DOT,Bt),tt(ft,HYPHEN,Kt),ta(St,it.domain,dt),tt(St,DOT,Bt),tt(St,HYPHEN,Kt),ta(rn,it.domain,tn),tt(rn,SLASH,tn),tt(rn,QUERY,tn),ta(cn,it.domain,tn),ta(cn,g,tn),tt(cn,SLASH,tn);const fn=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let mn=0;mn<fn.length;mn++){const[En,Sn]=fn[mn],wn=tt(tn,En);tt(nn,En,wn),tt(wn,Sn,tn);const hn=makeState(Url);ta(wn,g,hn);const yn=makeState();ta(wn,et),ta(hn,g,hn),ta(hn,et,yn),ta(yn,g,hn),ta(yn,et,yn),tt(hn,Sn,tn),tt(yn,Sn,tn)}return tt(ct,LOCALHOST,Ut),tt(ct,NL,Nl),{start:ct,tokens:tk}}function run(it,g,et){let ot=et.length,ct=0,ut=[],dt=[];for(;ct<ot;){let ft=it,St=null,kt=null,Tt=0,jt=null,Rt=-1;for(;ct<ot&&!(St=ft.go(et[ct].t));)dt.push(et[ct++]);for(;ct<ot&&(kt=St||ft.go(et[ct].t));)St=null,ft=kt,ft.accepts()?(Rt=0,jt=ft):Rt>=0&&Rt++,ct++,Tt++;if(Rt<0)ct-=Tt,ct<ot&&(dt.push(et[ct]),ct++);else{dt.length>0&&(ut.push(initMultiToken(Text$4,g,dt)),dt=[]),ct-=Rt,Tt-=Rt;const Ft=jt.t,$t=et.slice(ct-Tt,ct);ut.push(initMultiToken(Ft,g,$t))}}return dt.length>0&&ut.push(initMultiToken(Text$4,g,dt)),ut}function initMultiToken(it,g,et){const ot=et[0].s,ct=et[et.length-1].e,ut=g.slice(ot,ct);return new it(ut,et)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(it,g=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${it}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(it))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([it,g])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let it=0;it<INIT.tokenQueue.length;it++)INIT.tokenQueue[it][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let it=0;it<INIT.pluginQueue.length;it++)INIT.pluginQueue[it][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(it){return INIT.initialized||init(),run(INIT.parser.start,it,run$1(INIT.scanner.start,it))}tokenize.scan=run$1;function find$1(it,g=null,et=null){if(g&&typeof g=="object"){if(et)throw Error(`linkifyjs: Invalid link type ${g}; must be a string`);et=g,g=null}const ot=new Options(et),ct=tokenize(it),ut=[];for(let dt=0;dt<ct.length;dt++){const ft=ct[dt];ft.isLink&&(!g||ft.t===g)&&ot.check(ft)&&ut.push(ft.toFormattedObject(ot))}return ut}var UNICODE_WHITESPACE_PATTERN="[\0-   ᠎ -\u2029 　]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(it){return it.length===1?it[0].isLink:it.length===3&&it[1].isLink?["()","[]"].includes(it[0].value+it[2].value):!1}function autolink(it){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(g,et,ot)=>{const ct=g.some(kt=>kt.docChanged)&&!et.doc.eq(ot.doc),ut=g.some(kt=>kt.getMeta("preventAutolink"));if(!ct||ut)return;const{tr:dt}=ot,ft=combineTransactionSteps(et.doc,[...g]);if(getChangedRanges(ft).forEach(({newRange:kt})=>{const Tt=findChildrenInRange(ot.doc,kt,Ft=>Ft.isTextblock);let jt,Rt;if(Tt.length>1)jt=Tt[0],Rt=ot.doc.textBetween(jt.pos,jt.pos+jt.node.nodeSize,void 0," ");else if(Tt.length){const Ft=ot.doc.textBetween(kt.from,kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(Ft))return;jt=Tt[0],Rt=ot.doc.textBetween(jt.pos,kt.to,void 0," ")}if(jt&&Rt){const Ft=Rt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(Ft.length<=0)return!1;const $t=Ft[Ft.length-1],zt=jt.pos+Rt.lastIndexOf($t);if(!$t)return!1;const Kt=tokenize($t).map(Bt=>Bt.toObject(it.defaultProtocol));if(!isValidLinkStructure(Kt))return!1;Kt.filter(Bt=>Bt.isLink).map(Bt=>({...Bt,from:zt+Bt.start+1,to:zt+Bt.end+1})).filter(Bt=>ot.schema.marks.code?!ot.doc.rangeHasMark(Bt.from,Bt.to,ot.schema.marks.code):!0).filter(Bt=>it.validate(Bt.value)).filter(Bt=>it.shouldAutoLink(Bt.value)).forEach(Bt=>{getMarksBetween(Bt.from,Bt.to,ot.doc).some(Ut=>Ut.mark.type===it.type)||dt.addMark(Bt.from,Bt.to,it.type.create({href:Bt.href}))})}}),!!dt.steps.length)return dt}})}function clickHandler(it){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(g,et,ot)=>{var ct,ut;if(ot.button!==0||!g.editable)return!1;let dt=null;if(ot.target instanceof HTMLAnchorElement)dt=ot.target;else{let Tt=ot.target;const jt=[];for(;Tt.nodeName!=="DIV";)jt.push(Tt),Tt=Tt.parentNode;dt=jt.find(Rt=>Rt.nodeName==="A")}if(!dt)return!1;const ft=getAttributes$1(g.state,it.type.name),St=(ct=dt==null?void 0:dt.href)!=null?ct:ft.href,kt=(ut=dt==null?void 0:dt.target)!=null?ut:ft.target;return it.enableClickSelection&&it.editor.commands.extendMarkRange(it.type.name),dt&&St?(window.open(St,kt),!0):!1}}})}function pasteHandler(it){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(g,et,ot)=>{const{state:ct}=g,{selection:ut}=ct,{empty:dt}=ut;if(dt)return!1;let ft="";ot.content.forEach(kt=>{ft+=kt.textContent});const St=find$1(ft,{defaultProtocol:it.defaultProtocol}).find(kt=>kt.isLink&&kt.value===ft);return!ft||!St?!1:it.editor.commands.setMark(it.type,{href:St.href})}}})}function isAllowedUri(it,g){const et=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return g&&g.forEach(ot=>{const ct=typeof ot=="string"?ot:ot.scheme;ct&&et.push(ct)}),!it||it.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${et.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(it=>{if(typeof it=="string"){registerCustomProtocol(it);return}registerCustomProtocol(it.scheme,it.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(it,g)=>!!isAllowedUri(it,g.protocols),validate:it=>!!it,shouldAutoLink:it=>!!it}},addAttributes(){return{href:{default:null,parseHTML(it){return it.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:it=>{const g=it.getAttribute("href");return!g||!this.options.isAllowedUri(g,{defaultValidate:et=>!!isAllowedUri(et,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:it}){return this.options.isAllowedUri(it.href,{defaultValidate:g=>!!isAllowedUri(g,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,it),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...it,href:""}),0]},addCommands(){return{setLink:it=>({chain:g})=>{const{href:et}=it;return this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?g().setMark(this.name,it).setMeta("preventAutolink",!0).run():!1},toggleLink:it=>({chain:g})=>{const{href:et}=it||{};return et&&!this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:g().toggleMark(this.name,it,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:it})=>it().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:it=>{const g=[];if(it){const{protocols:et,defaultProtocol:ot}=this.options,ct=find$1(it).filter(ut=>ut.isLink&&this.options.isAllowedUri(ut.value,{defaultValidate:dt=>!!isAllowedUri(dt,et),protocols:et,defaultProtocol:ot}));ct.length&&ct.forEach(ut=>g.push({text:ut.value,data:{href:ut.href},index:ut.start}))}return g},type:this.type,getAttributes:it=>{var g;return{href:(g=it.data)==null?void 0:g.href}}})]},addProseMirrorPlugins(){const it=[],{protocols:g,defaultProtocol:et}=this.options;return this.options.autolink&&it.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:ot=>this.options.isAllowedUri(ot,{defaultValidate:ct=>!!isAllowedUri(ct,g),protocols:g,defaultProtocol:et}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&it.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&it.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),it}}),index_default$9=Link,__defProp$1=Object.defineProperty,__export=(it,g)=>{for(var et in g)__defProp$1(it,et,{get:g[et],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleBulletList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let it=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[it]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:it}){return["li",mergeAttributes(this.options.HTMLAttributes,it),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(it,g)=>{const{$from:et}=g.selection,ot=getNodeType(it,g.schema);let ct=null,ut=et.depth,dt=et.pos,ft=null;for(;ut>0&&ft===null;)ct=et.node(ut),ct.type===ot?ft=ut:(ut-=1,dt-=1);return ft===null?null:{$pos:g.doc.resolve(dt),depth:ft}},getNextListDepth=(it,g)=>{const et=findListItemPos(it,g);if(!et)return!1;const[,ot]=getNodeAtPosition(g,it,et.$pos.pos+4);return ot},hasListBefore=(it,g,et)=>{const{$anchor:ot}=it.selection,ct=Math.max(0,ot.pos-2),ut=it.doc.resolve(ct).node();return!(!ut||!et.includes(ut.type.name))},hasListItemBefore=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-2);return!(ct.index()===0||((et=ct.nodeBefore)==null?void 0:et.type.name)!==it)},listItemHasSubList=(it,g,et)=>{if(!et)return!1;const ot=getNodeType(it,g.schema);let ct=!1;return et.descendants(ut=>{ut.type===ot&&(ct=!0)}),ct},handleBackspace=(it,g,et)=>{if(it.commands.undoInputRule())return!0;if(it.state.selection.from!==it.state.selection.to)return!1;if(!isNodeActive(it.state,g)&&hasListBefore(it.state,g,et)){const{$anchor:ft}=it.state.selection,St=it.state.doc.resolve(ft.before()-1),kt=[];St.node().descendants((Rt,Ft)=>{Rt.type.name===g&&kt.push({node:Rt,pos:Ft})});const Tt=kt.at(-1);if(!Tt)return!1;const jt=it.state.doc.resolve(St.start()+Tt.pos+1);return it.chain().cut({from:ft.start()-1,to:ft.end()+1},jt.end()).joinForward().run()}if(!isNodeActive(it.state,g)||!isAtStartOfNode(it.state))return!1;const ot=findListItemPos(g,it.state);if(!ot)return!1;const ut=it.state.doc.resolve(ot.$pos.pos-2).node(ot.depth),dt=listItemHasSubList(g,it.state,ut);return hasListItemBefore(g,it.state)&&!dt?it.commands.joinItemBackward():it.chain().liftListItem(g).run()},nextListIsDeeper=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et>ot.depth},nextListIsHigher=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et<ot.depth},handleDelete=(it,g)=>{if(!isNodeActive(it.state,g)||!isAtEndOfNode(it.state,g))return!1;const{selection:et}=it.state,{$from:ot,$to:ct}=et;return!et.empty&&ot.sameParent(ct)?!1:nextListIsDeeper(g,it.state)?it.chain().focus(it.state.selection.from+4).lift(g).joinBackward().run():nextListIsHigher(g,it.state)?it.chain().joinForward().joinBackward().run():it.commands.joinItemForward()},hasListItemAfter=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-ot.parentOffset-2);return!(ct.index()===ct.parent.childCount-1||((et=ct.nodeAfter)==null?void 0:et.type.name)!==it)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},"Mod-Delete":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},Backspace:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g},"Mod-Backspace":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:it=>it.hasAttribute("start")?parseInt(it.getAttribute("start")||"",10):1},type:{default:null,parseHTML:it=>it.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:it}){const{start:g,...et}=it;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,et),0]:["ol",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleOrderedList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let it=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1],editor:this.editor})),[it]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:it=>{const g=it.getAttribute("data-checked");return g===""||g==="true"},renderHTML:it=>({"data-checked":it.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:it,HTMLAttributes:g}){return["li",mergeAttributes(this.options.HTMLAttributes,g,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:it.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const it={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...it,Tab:()=>this.editor.commands.sinkListItem(this.name)}:it},addNodeView(){return({node:it,HTMLAttributes:g,getPos:et,editor:ot})=>{const ct=document.createElement("li"),ut=document.createElement("label"),dt=document.createElement("span"),ft=document.createElement("input"),St=document.createElement("div"),kt=Tt=>{var jt,Rt;ft.ariaLabel=((Rt=(jt=this.options.a11y)==null?void 0:jt.checkboxLabel)==null?void 0:Rt.call(jt,Tt,ft.checked))||`Task item checkbox for ${Tt.textContent||"empty task item"}`};return kt(it),ut.contentEditable="false",ft.type="checkbox",ft.addEventListener("mousedown",Tt=>Tt.preventDefault()),ft.addEventListener("change",Tt=>{if(!ot.isEditable&&!this.options.onReadOnlyChecked){ft.checked=!ft.checked;return}const{checked:jt}=Tt.target;ot.isEditable&&typeof et=="function"&&ot.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:Rt})=>{const Ft=et();if(typeof Ft!="number")return!1;const $t=Rt.doc.nodeAt(Ft);return Rt.setNodeMarkup(Ft,void 0,{...$t==null?void 0:$t.attrs,checked:jt}),!0}).run(),!ot.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(it,jt)||(ft.checked=!ft.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Tt,jt])=>{ct.setAttribute(Tt,jt)}),ct.dataset.checked=it.attrs.checked,ft.checked=it.attrs.checked,ut.append(ft,dt),ct.append(ut,St),Object.entries(g).forEach(([Tt,jt])=>{ct.setAttribute(Tt,jt)}),{dom:ct,contentDOM:St,update:Tt=>Tt.type!==this.type?!1:(ct.dataset.checked=Tt.attrs.checked,ft.checked=Tt.attrs.checked,kt(Tt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:it=>({checked:it[it.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:it})=>it.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const it=[];return this.options.bulletList!==!1&&it.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&it.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&it.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&it.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&it.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&it.push(TaskList.configure(this.options.taskList)),it}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:it}){return["p",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setParagraph:()=>({commands:it})=>it.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["s",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setStrike:()=>({commands:it})=>it.setMark(this.name),toggleStrike:()=>({commands:it})=>it.toggleMark(this.name),unsetStrike:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$3=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["u",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setUnderline:()=>({commands:it})=>it.setMark(this.name),toggleUnderline:()=>({commands:it})=>it.toggleMark(this.name),unsetUnderline:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$8=Underline;function dropCursor(it={}){return new Plugin({view(g){return new DropCursorView(g,it)}})}class DropCursorView{constructor(g,et){var ot;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(ot=et.width)!==null&&ot!==void 0?ot:1,this.color=et.color===!1?void 0:et.color||"black",this.class=et.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ct=>{let ut=dt=>{this[ct](dt)};return g.dom.addEventListener(ct,ut),{name:ct,handler:ut}})}destroy(){this.handlers.forEach(({name:g,handler:et})=>this.editorView.dom.removeEventListener(g,et))}update(g,et){this.cursorPos!=null&&et.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),et=!g.parent.inlineContent,ot,ct=this.editorView.dom,ut=ct.getBoundingClientRect(),dt=ut.width/ct.offsetWidth,ft=ut.height/ct.offsetHeight;if(et){let jt=g.nodeBefore,Rt=g.nodeAfter;if(jt||Rt){let Ft=this.editorView.nodeDOM(this.cursorPos-(jt?jt.nodeSize:0));if(Ft){let $t=Ft.getBoundingClientRect(),zt=jt?$t.bottom:$t.top;jt&&Rt&&(zt=(zt+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Kt=this.width/2*ft;ot={left:$t.left,right:$t.right,top:zt-Kt,bottom:zt+Kt}}}}if(!ot){let jt=this.editorView.coordsAtPos(this.cursorPos),Rt=this.width/2*dt;ot={left:jt.left-Rt,right:jt.left+Rt,top:jt.top,bottom:jt.bottom}}let St=this.editorView.dom.offsetParent;this.element||(this.element=St.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",et),this.element.classList.toggle("prosemirror-dropcursor-inline",!et);let kt,Tt;if(!St||St==document.body&&getComputedStyle(St).position=="static")kt=-pageXOffset,Tt=-pageYOffset;else{let jt=St.getBoundingClientRect(),Rt=jt.width/St.offsetWidth,Ft=jt.height/St.offsetHeight;kt=jt.left-St.scrollLeft*Rt,Tt=jt.top-St.scrollTop*Ft}this.element.style.left=(ot.left-kt)/dt+"px",this.element.style.top=(ot.top-Tt)/ft+"px",this.element.style.width=(ot.right-ot.left)/dt+"px",this.element.style.height=(ot.bottom-ot.top)/ft+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let et=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),ot=et&&et.inside>=0&&this.editorView.state.doc.nodeAt(et.inside),ct=ot&&ot.type.spec.disableDropCursor,ut=typeof ct=="function"?ct(this.editorView,et,g):ct;if(et&&!ut){let dt=et.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ft=dropPoint(this.editorView.state.doc,dt,this.editorView.dragging.slice);ft!=null&&(dt=ft)}this.setCursor(dt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){this.editorView.dom.contains(g.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(g){super(g,g)}map(g,et){let ot=g.resolve(et.map(this.head));return GapCursor.valid(ot)?new GapCursor(ot):Selection.near(ot)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(et.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let et=g.parent;if(et.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let ot=et.type.spec.allowGapCursor;if(ot!=null)return ot;let ct=et.contentMatchAt(g.index()).defaultType;return ct&&ct.isTextblock}static findGapCursorFrom(g,et,ot=!1){e:for(;;){if(!ot&&GapCursor.valid(g))return g;let ct=g.pos,ut=null;for(let dt=g.depth;;dt--){let ft=g.node(dt);if(et>0?g.indexAfter(dt)<ft.childCount:g.index(dt)>0){ut=ft.child(et>0?g.indexAfter(dt):g.index(dt)-1);break}else if(dt==0)return null;ct+=et;let St=g.doc.resolve(ct);if(GapCursor.valid(St))return St}for(;;){let dt=et>0?ut.firstChild:ut.lastChild;if(!dt){if(ut.isAtom&&!ut.isText&&!NodeSelection.isSelectable(ut)){g=g.doc.resolve(ct+ut.nodeSize*et),ot=!1;continue e}break}ut=dt,ct+=et;let ft=g.doc.resolve(ct);if(GapCursor.valid(ft))return ft}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let et=g.resolve(this.pos);return GapCursor.valid(et)?new GapCursor(et):Selection.near(et)}}function closedBefore(it){for(let g=it.depth;g>=0;g--){let et=it.index(g),ot=it.node(g);if(et==0){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et-1);;ct=ct.lastChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function closedAfter(it){for(let g=it.depth;g>=0;g--){let et=it.indexAfter(g),ot=it.node(g);if(et==ot.childCount){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et);;ct=ct.firstChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(it,g,et){return g.pos==et.pos&&GapCursor.valid(et)?new GapCursor(et):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(it,g){const et=it=="vert"?g>0?"down":"up":g>0?"right":"left";return function(ot,ct,ut){let dt=ot.selection,ft=g>0?dt.$to:dt.$from,St=dt.empty;if(dt instanceof TextSelection){if(!ut.endOfTextblock(et)||ft.depth==0)return!1;St=!1,ft=ot.doc.resolve(g>0?ft.after():ft.before())}let kt=GapCursor.findGapCursorFrom(ft,g,St);return kt?(ct&&ct(ot.tr.setSelection(new GapCursor(kt))),!0):!1}}function handleClick(it,g,et){if(!it||!it.editable)return!1;let ot=it.state.doc.resolve(g);if(!GapCursor.valid(ot))return!1;let ct=it.posAtCoords({left:et.clientX,top:et.clientY});return ct&&ct.inside>-1&&NodeSelection.isSelectable(it.state.doc.nodeAt(ct.inside))?!1:(it.dispatch(it.state.tr.setSelection(new GapCursor(ot))),!0)}function beforeinput(it,g){if(g.inputType!="insertCompositionText"||!(it.state.selection instanceof GapCursor))return!1;let{$from:et}=it.state.selection,ot=et.parent.contentMatchAt(et.index()).findWrapping(it.state.schema.nodes.text);if(!ot)return!1;let ct=Fragment.empty;for(let dt=ot.length-1;dt>=0;dt--)ct=Fragment.from(ot[dt].createAndFill(null,ct));let ut=it.state.tr.replace(et.pos,et.pos,new Slice(ct,0,0));return ut.setSelection(TextSelection.near(ut.doc.resolve(et.pos+1))),it.dispatch(ut),!1}function drawGapCursor(it){if(!(it.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(it.doc,[Decoration.widget(it.selection.head,g,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function it(){};RopeSequence.prototype.append=function it(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function it(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function it(g){return new Append(this,g)};RopeSequence.prototype.slice=function it(g,et){return g===void 0&&(g=0),et===void 0&&(et=this.length),g>=et?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,et))};RopeSequence.prototype.get=function it(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length),et<=ot?this.forEachInner(g,et,ot,0):this.forEachInvertedInner(g,et,ot,0)};RopeSequence.prototype.map=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length);var ct=[];return this.forEach(function(ut,dt){return ct.push(g(ut,dt))},et,ot),ct};RopeSequence.from=function it(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(it){function g(ot){it.call(this),this.values=ot}it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g;var et={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function(ct,ut){return ct==0&&ut==this.length?this:new g(this.values.slice(ct,ut))},g.prototype.getInner=function(ct){return this.values[ct]},g.prototype.forEachInner=function(ct,ut,dt,ft){for(var St=ut;St<dt;St++)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.forEachInvertedInner=function(ct,ut,dt,ft){for(var St=ut-1;St>=dt;St--)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.leafAppend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(this.values.concat(ct.flatten()))},g.prototype.leafPrepend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(ct.flatten().concat(this.values))},et.length.get=function(){return this.values.length},et.depth.get=function(){return 0},Object.defineProperties(g.prototype,et),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(it){function g(et,ot){it.call(this),this.left=et,this.right=ot,this.length=et.length+ot.length,this.depth=Math.max(et.depth,ot.depth)+1}return it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(ot){return ot<this.left.length?this.left.get(ot):this.right.get(ot-this.left.length)},g.prototype.forEachInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct<ft&&this.left.forEachInner(ot,ct,Math.min(ut,ft),dt)===!1||ut>ft&&this.right.forEachInner(ot,Math.max(ct-ft,0),Math.min(this.length,ut)-ft,dt+ft)===!1)return!1},g.prototype.forEachInvertedInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct>ft&&this.right.forEachInvertedInner(ot,ct-ft,Math.max(ut,ft)-ft,dt+ft)===!1||ut<ft&&this.left.forEachInvertedInner(ot,Math.min(ct,ft),ut,dt)===!1)return!1},g.prototype.sliceInner=function(ot,ct){if(ot==0&&ct==this.length)return this;var ut=this.left.length;return ct<=ut?this.left.slice(ot,ct):ot>=ut?this.right.slice(ot-ut,ct-ut):this.left.slice(ot,ut).append(this.right.slice(0,ct-ut))},g.prototype.leafAppend=function(ot){var ct=this.right.leafAppend(ot);if(ct)return new g(this.left,ct)},g.prototype.leafPrepend=function(ot){var ct=this.left.leafPrepend(ot);if(ct)return new g(ct,this.right)},g.prototype.appendInner=function(ot){return this.left.depth>=Math.max(this.right.depth,ot.depth)+1?new g(this.left,new g(this.right,ot)):new g(this,ot)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,et){this.items=g,this.eventCount=et}popEvent(g,et){if(this.eventCount==0)return null;let ot=this.items.length;for(;;ot--)if(this.items.get(ot-1).selection){--ot;break}let ct,ut;et&&(ct=this.remapping(ot,this.items.length),ut=ct.maps.length);let dt=g.tr,ft,St,kt=[],Tt=[];return this.items.forEach((jt,Rt)=>{if(!jt.step){ct||(ct=this.remapping(ot,Rt+1),ut=ct.maps.length),ut--,Tt.push(jt);return}if(ct){Tt.push(new Item(jt.map));let Ft=jt.step.map(ct.slice(ut)),$t;Ft&&dt.maybeStep(Ft).doc&&($t=dt.mapping.maps[dt.mapping.maps.length-1],kt.push(new Item($t,void 0,void 0,kt.length+Tt.length))),ut--,$t&&ct.appendMap($t,ut)}else dt.maybeStep(jt.step);if(jt.selection)return ft=ct?jt.selection.map(ct.slice(ut)):jt.selection,St=new Branch(this.items.slice(0,ot).append(Tt.reverse().concat(kt)),this.eventCount-1),!1},this.items.length,0),{remaining:St,transform:dt,selection:ft}}addTransform(g,et,ot,ct){let ut=[],dt=this.eventCount,ft=this.items,St=!ct&&ft.length?ft.get(ft.length-1):null;for(let Tt=0;Tt<g.steps.length;Tt++){let jt=g.steps[Tt].invert(g.docs[Tt]),Rt=new Item(g.mapping.maps[Tt],jt,et),Ft;(Ft=St&&St.merge(Rt))&&(Rt=Ft,Tt?ut.pop():ft=ft.slice(0,ft.length-1)),ut.push(Rt),et&&(dt++,et=void 0),ct||(St=Rt)}let kt=dt-ot.depth;return kt>DEPTH_OVERFLOW&&(ft=cutOffEvents(ft,kt),dt-=kt),new Branch(ft.append(ut),dt)}remapping(g,et){let ot=new Mapping;return this.items.forEach((ct,ut)=>{let dt=ct.mirrorOffset!=null&&ut-ct.mirrorOffset>=g?ot.maps.length-ct.mirrorOffset:void 0;ot.appendMap(ct.map,dt)},g,et),ot}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(et=>new Item(et))),this.eventCount)}rebased(g,et){if(!this.eventCount)return this;let ot=[],ct=Math.max(0,this.items.length-et),ut=g.mapping,dt=g.steps.length,ft=this.eventCount;this.items.forEach(Rt=>{Rt.selection&&ft--},ct);let St=et;this.items.forEach(Rt=>{let Ft=ut.getMirror(--St);if(Ft==null)return;dt=Math.min(dt,Ft);let $t=ut.maps[Ft];if(Rt.step){let zt=g.steps[Ft].invert(g.docs[Ft]),Kt=Rt.selection&&Rt.selection.map(ut.slice(St+1,Ft));Kt&&ft++,ot.push(new Item($t,zt,Kt))}else ot.push(new Item($t))},ct);let kt=[];for(let Rt=et;Rt<dt;Rt++)kt.push(new Item(ut.maps[Rt]));let Tt=this.items.slice(0,ct).append(kt).append(ot),jt=new Branch(Tt,ft);return jt.emptyItemCount()>max_empty_items&&(jt=jt.compress(this.items.length-ot.length)),jt}emptyItemCount(){let g=0;return this.items.forEach(et=>{et.step||g++}),g}compress(g=this.items.length){let et=this.remapping(0,g),ot=et.maps.length,ct=[],ut=0;return this.items.forEach((dt,ft)=>{if(ft>=g)ct.push(dt),dt.selection&&ut++;else if(dt.step){let St=dt.step.map(et.slice(ot)),kt=St&&St.getMap();if(ot--,kt&&et.appendMap(kt,ot),St){let Tt=dt.selection&&dt.selection.map(et.slice(ot));Tt&&ut++;let jt=new Item(kt.invert(),St,Tt),Rt,Ft=ct.length-1;(Rt=ct.length&&ct[Ft].merge(jt))?ct[Ft]=Rt:ct.push(jt)}}else dt.map&&ot--},this.items.length,0),new Branch(RopeSequence.from(ct.reverse()),ut)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(it,g){let et;return it.forEach((ot,ct)=>{if(ot.selection&&g--==0)return et=ct,!1}),it.slice(et)}class Item{constructor(g,et,ot,ct){this.map=g,this.step=et,this.selection=ot,this.mirrorOffset=ct}merge(g){if(this.step&&g.step&&!g.selection){let et=g.step.merge(this.step);if(et)return new Item(et.getMap().invert(),et,this.selection)}}}class HistoryState{constructor(g,et,ot,ct,ut){this.done=g,this.undone=et,this.prevRanges=ot,this.prevTime=ct,this.prevComposition=ut}}const DEPTH_OVERFLOW=20;function applyTransaction(it,g,et,ot){let ct=et.getMeta(historyKey),ut;if(ct)return ct.historyState;et.getMeta(closeHistoryKey)&&(it=new HistoryState(it.done,it.undone,null,0,-1));let dt=et.getMeta("appendedTransaction");if(et.steps.length==0)return it;if(dt&&dt.getMeta(historyKey))return dt.getMeta(historyKey).redo?new HistoryState(it.done.addTransform(et,void 0,ot,mustPreserveItems(g)),it.undone,rangesFor(et.mapping.maps),it.prevTime,it.prevComposition):new HistoryState(it.done,it.undone.addTransform(et,void 0,ot,mustPreserveItems(g)),null,it.prevTime,it.prevComposition);if(et.getMeta("addToHistory")!==!1&&!(dt&&dt.getMeta("addToHistory")===!1)){let ft=et.getMeta("composition"),St=it.prevTime==0||!dt&&it.prevComposition!=ft&&(it.prevTime<(et.time||0)-ot.newGroupDelay||!isAdjacentTo(et,it.prevRanges)),kt=dt?mapRanges(it.prevRanges,et.mapping):rangesFor(et.mapping.maps);return new HistoryState(it.done.addTransform(et,St?g.selection.getBookmark():void 0,ot,mustPreserveItems(g)),Branch.empty,kt,et.time,ft??it.prevComposition)}else return(ut=et.getMeta("rebased"))?new HistoryState(it.done.rebased(et,ut),it.undone.rebased(et,ut),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition):new HistoryState(it.done.addMaps(et.mapping.maps),it.undone.addMaps(et.mapping.maps),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition)}function isAdjacentTo(it,g){if(!g)return!1;if(!it.docChanged)return!0;let et=!1;return it.mapping.maps[0].forEach((ot,ct)=>{for(let ut=0;ut<g.length;ut+=2)ot<=g[ut+1]&&ct>=g[ut]&&(et=!0)}),et}function rangesFor(it){let g=[];for(let et=it.length-1;et>=0&&g.length==0;et--)it[et].forEach((ot,ct,ut,dt)=>g.push(ut,dt));return g}function mapRanges(it,g){if(!it)return null;let et=[];for(let ot=0;ot<it.length;ot+=2){let ct=g.map(it[ot],1),ut=g.map(it[ot+1],-1);ct<=ut&&et.push(ct,ut)}return et}function histTransaction(it,g,et){let ot=mustPreserveItems(g),ct=historyKey.get(g).spec.config,ut=(et?it.undone:it.done).popEvent(g,ot);if(!ut)return null;let dt=ut.selection.resolve(ut.transform.doc),ft=(et?it.done:it.undone).addTransform(ut.transform,g.selection.getBookmark(),ct,ot),St=new HistoryState(et?ft:ut.remaining,et?ut.remaining:ft,null,0,-1);return ut.transform.setSelection(dt).setMeta(historyKey,{redo:et,historyState:St})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(it){let g=it.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let et=0;et<g.length;et++)if(g[et].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(it={}){return it={depth:it.depth||100,newGroupDelay:it.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,et,ot){return applyTransaction(et,ot,g,it)}},config:it,props:{handleDOMEvents:{beforeinput(g,et){let ot=et.inputType,ct=ot=="historyUndo"?undo:ot=="historyRedo"?redo:null;return ct?(et.preventDefault(),ct(g.state,g.dispatch)):!1}}}})}function buildCommand(it,g){return(et,ot)=>{let ct=historyKey.getState(et);if(!ct||(it?ct.undone:ct.done).eventCount==0)return!1;if(ot){let ut=histTransaction(ct,et,it);ut&&ot(g?ut.scrollIntoView():ut)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:it=>it.length,wordCounter:it=>it.split(" ").filter(g=>g!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc;if(((it==null?void 0:it.mode)||this.options.mode)==="textSize"){const ot=g.textBetween(0,g.content.size,void 0," ");return this.options.textCounter(ot)}return g.nodeSize},this.storage.words=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc,et=g.textBetween(0,g.content.size," "," ");return this.options.wordCounter(et)}},addProseMirrorPlugins(){let it=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(g,et,ot)=>{if(it)return;const ct=this.options.limit;if(ct==null||ct===0){it=!0;return}const ut=this.storage.characters({node:ot.doc});if(ut>ct){const dt=ut-ct,ft=0,St=dt;console.warn(`[CharacterCount] Initial content exceeded limit of ${ct} characters. Content was automatically trimmed.`);const kt=ot.tr.deleteRange(ft,St);return it=!0,kt}it=!0},filterTransaction:(g,et)=>{const ot=this.options.limit;if(!g.docChanged||ot===0||ot===null||ot===void 0)return!0;const ct=this.storage.characters({node:et.doc}),ut=this.storage.characters({node:g.doc});if(ut<=ot||ct>ot&&ut>ot&&ut<=ct)return!0;if(ct>ot&&ut>ot&&ut>ct||!g.getMeta("paste"))return!1;const ft=g.selection.$head.pos,St=ut-ot,kt=ft-St,Tt=ft;return g.deleteRange(kt,Tt),!(this.storage.characters({node:g.doc})>ot)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:it,selection:g})=>{const{isEditable:et,isFocused:ot}=this.editor,{anchor:ct}=g,ut=[];if(!et||!ot)return DecorationSet.create(it,[]);let dt=0;this.options.mode==="deepest"&&it.descendants((St,kt)=>{if(St.isText)return;if(!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;dt+=1});let ft=0;return it.descendants((St,kt)=>{if(St.isText||!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;if(ft+=1,this.options.mode==="deepest"&&dt-ft>0||this.options.mode==="shallowest"&&ft>1)return this.options.mode==="deepest";ut.push(Decoration.node(kt,kt+St.nodeSize,{class:this.options.className}))}),DecorationSet.create(it,ut)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(it){var g;const et={name:it.name,options:it.options,storage:it.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(it,"allowGapCursor",et)))!=null?g:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:it,selection:g})=>{const et=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:ot}=g,ct=[];if(!et)return null;const ut=this.editor.isEmpty;return it.descendants((dt,ft)=>{const St=ot>=ft&&ot<=ft+dt.nodeSize,kt=!dt.isLeaf&&isNodeEmpty(dt);if((St||!this.options.showOnlyCurrent)&&kt){const Tt=[this.options.emptyNodeClass];ut&&Tt.push(this.options.emptyEditorClass);const jt=Decoration.node(ft,ft+dt.nodeSize,{class:Tt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:dt,pos:ft,hasAnchor:St}):this.options.placeholder});ct.push(jt)}return this.options.includeChildren}),DecorationSet.create(it,ct)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:it,options:g}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(et){return et.selection.empty||it.isFocused||!it.isEditable||isNodeSelection(et.selection)||it.view.dragging?null:DecorationSet.create(et.doc,[Decoration.inline(et.selection.from,et.selection.to,{class:g.className})])}}})]}});function nodeEqualsType({types:it,node:g}){return g&&Array.isArray(it)&&it.includes(g.type)||(g==null?void 0:g.type)===it}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const it=new PluginKey(this.name),g=Object.entries(this.editor.schema.nodes).map(([,et])=>et).filter(et=>(this.options.notAfter||[]).concat(this.options.node).includes(et.name));return[new Plugin({key:it,appendTransaction:(et,ot,ct)=>{const{doc:ut,tr:dt,schema:ft}=ct,St=it.getState(ct),kt=ut.content.size,Tt=ft.nodes[this.options.node];if(St)return dt.insert(kt,Tt.create())},state:{init:(et,ot)=>{const ct=ot.tr.doc.lastChild;return!nodeEqualsType({node:ct,types:g})},apply:(et,ot)=>{if(!et.docChanged)return ot;const ct=et.doc.lastChild;return!nodeEqualsType({node:ct,types:g})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:it,dispatch:g})=>undo(it,g),redo:()=>({state:it,dispatch:g})=>redo(it,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var it,g,et,ot;const ct=[];return this.options.bold!==!1&&ct.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ct.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ct.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ct.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ct.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ct.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&ct.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ct.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ct.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ct.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&ct.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&ct.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ct.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ct.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&ct.push(ListKeymap.configure((it=this.options)==null?void 0:it.listKeymap)),this.options.link!==!1&&ct.push(Link.configure((g=this.options)==null?void 0:g.link)),this.options.orderedList!==!1&&ct.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ct.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ct.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ct.push(Text$3.configure(this.options.text)),this.options.underline!==!1&&ct.push(Underline.configure((et=this.options)==null?void 0:et.underline)),this.options.trailingNode!==!1&&ct.push(TrailingNode.configure((ot=this.options)==null?void 0:ot.trailingNode)),ct}}),index_default$7=StarterKit,index_default$6=ListItem,index_default$5=BulletList,index_default$4=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:it=>it.getAttribute("data-color")||it.style.backgroundColor,renderHTML:it=>it.color?{"data-color":it.color,style:`background-color: ${it.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:it}){return["mark",mergeAttributes(this.options.HTMLAttributes,it),0]},renderMarkdown:(it,g)=>`==${g.renderChildren(it)}==`,parseMarkdown:(it,g)=>g.applyMark("highlight",g.parseInline(it.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:it=>it.indexOf("=="),tokenize(it,g,et){const ct=/^(==)([^=]+)(==)/.exec(it);if(ct){const ut=ct[2].trim(),dt=et.inlineTokens(ut);return{type:"highlight",raw:ct[0],text:ut,tokens:dt}}}},addCommands(){return{setHighlight:it=>({commands:g})=>g.setMark(this.name,it),toggleHighlight:it=>({commands:g})=>g.toggleMark(this.name,it),unsetHighlight:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$3=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:it=>{const g=it.style.textAlign;return this.options.alignments.includes(g)?g:this.options.defaultAlignment},renderHTML:it=>it.textAlign?{style:`text-align: ${it.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:it=>({commands:g})=>this.options.alignments.includes(it)?this.options.types.map(et=>g.updateAttributes(et,{textAlign:it})).every(et=>et):!1,unsetTextAlign:()=>({commands:it})=>this.options.types.map(g=>it.resetAttributes(g,"textAlign")).every(g=>g),toggleTextAlign:it=>({editor:g,commands:et})=>this.options.alignments.includes(it)?g.isActive({textAlign:it})?et.unsetTextAlign():et.setTextAlign(it):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$2=TextAlign,index_default$1=Placeholder;const githubDark="";function BookEditor({content:it,setContent:g}){const et=reactExports.useRef(null),ot=useEditor({extensions:[index_default$6,index_default$5.configure({keepMarks:!0,keepAttributes:!0}),index_default$4.configure({keepMarks:!0,keepAttributes:!0}),index_default$a,index_default$7.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$8,index_default$3,index_default$9.configure({openOnClick:!1}),index_default$2.configure({types:["heading","paragraph","listItem","blockquote"]}),index_default$1.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{class:"focus:outline-none prose prose-invert prose-lg max-w-none text-white leading-relaxed"}},content:it,onUpdate:({editor:ct})=>g(ct.getHTML())});return reactExports.useEffect(()=>{ot&&it!==ot.getHTML()&&ot.commands.setContent(it||"",!1)},[it,ot]),ot&&(window.__EDITOR=ot),reactExports.useEffect(()=>{et.current=ot},[ot]),ot?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 bg-[#111] px-6 py-3 flex flex-wrap items-center gap-6 border-b border-gray-800 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBold().run(),className:`font-semibold text-lg ${ot.isActive("bold")?"text-green-400":"text-gray-300"} hover:text-white`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleItalic().run(),className:`italic text-lg ${ot.isActive("italic")?"text-green-400":"text-gray-300"} hover:text-white`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleUnderline().run(),className:`underline text-lg ${ot.isActive("underline")?"text-green-400":"text-gray-300"} hover:text-white`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded text-sm ${ot.isActive("highlight")?"bg-yellow-400 text-black":"text-gray-300"} hover:text-white`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${ot.isActive("bulletList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${ot.isActive("orderedList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBlockquote().run(),className:`${ot.isActive("blockquote")?"text-green-400":"text-gray-300"} hover:text-white`,children:"❝ Quote"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 ml-auto border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().undo().run(),className:"text-gray-300 hover:text-white",children:"⟲ Undo"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().redo().run(),className:"text-gray-300 hover:text-white",children:"⟳ Redo"})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:ot,className:`prose prose-invert max-w-none 
             bg-[#0f0f0f] text-white type-text 
             min-h-[70vh] max-h-[90vh]
             resize-y overflow-auto
             border border-gray-700 rounded-lg 
             p-8 focus:outline-none focus:ring-2 focus:ring-green-500/50`})]}):null}function BookPromptForm({text:it,setText:g,pages:et,setPages:ot,link:ct,setLink:ut,cover:dt,setCover:ft,title:St,setTitle:kt,authorName:Tt,bookName:jt,setBookName:Rt,bookType:Ft,setBookType:$t,loading:zt,bookId:Kt,setBookId:Bt,partLocked:Ut,partNumber:Jt,onClose:en,setShowGenerating:tn,setProgress:nn}){const[rn,on]=reactExports.useState(!1),[dn,cn]=reactExports.useState(!1),[fn,mn]=reactExports.useState(null),{accessToken:En}=useAuth(),[Sn,wn]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[hn,yn]=reactExports.useState(Tt||"");reactExports.useEffect(()=>{async function pn(){var kn,_n;if(Kt)try{const Rn=Jt>1?`https://cre8tlystudio.com/api/books/${Kt}/part/${Jt}/draft`:`https://cre8tlystudio.com/api/books/draft/${Kt}`,Nn=await axiosInstance.get(Rn,{headers:{Authorization:`Bearer ${En}`}});(kn=Nn.data)!=null&&kn.draft_text?(g(Nn.data.draft_text),Nn.data.title&&Rt(Nn.data.title),Nn.data.link&&ut(Nn.data.link),Nn.data.last_saved_at&&mn(Nn.data.last_saved_at),Nn.data.author_name&&yn(Nn.data.author_name),Nn.data.book_type&&$t(Nn.data.book_type),Sn||(cn(!0),y$4.info("Loaded saved draft ✍️"),setTimeout(()=>cn(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),wn(!0))):console.log("No saved draft found for this book or part.")}catch(Rn){((_n=Rn.response)==null?void 0:_n.status)!==404&&console.error("Failed to load draft:",Rn)}}pn()},[Kt,Jt]);async function an(){if(!(it!=null&&it.trim())){y$4.warn("Write something before saving!");return}on(!0);try{const pn=Jt>1?`https://cre8tlystudio.com/api/books/${Kt}/part/${Jt}/draft`:"https://cre8tlystudio.com/api/books/draft",kn=await axiosInstance.post(pn,{bookId:Kt,draftText:it,book_name:jt,link:ct,author_name:hn||Tt,book_type:Ft},{headers:{Authorization:`Bearer ${En}`}});kn.data.id&&typeof Bt=="function"&&Bt(kn.data.id),y$4.success("Draft saved successfully 💾")}catch(pn){console.error("Save draft failed:",pn),y$4.error("Failed to save draft")}finally{on(!1)}}async function un(pn){pn.preventDefault();try{tn(!0),nn(0),en();let kn=0;const _n=setInterval(()=>{kn+=kn<60?Math.random()*4.5:kn<85?Math.random()*2.5:Math.random()*1.2,kn>=96&&(kn=96),nn(kn)},200),Rn={bookId:Kt,book_name:jt,prompt:it,pages:et,link:ct,cover:dt,bookName:jt,authorName:Tt,bookType:Ft,title:St},Nn=await axiosInstance.post("https://cre8tlystudio.com/api/books/prompt",Rn);clearInterval(_n),nn(100),y$4.success("Chapter generation successful! 🚀"),setTimeout(()=>tn(!1),1500),localStorage.removeItem("bookDraftLocal"),console.log("Book generated:",Nn.data)}catch(kn){console.error("Book generation failed:",kn),y$4.error("Failed to generate book"),tn(!1)}}function bn(pn){if(!pn)return null;const kn=new Date(pn),_n=Date.now()-kn.getTime(),Rn=Math.floor(_n/6e4);if(Rn<1)return"just now";if(Rn<60)return`${Rn} minute${Rn!==1?"s":""} ago`;const Nn=Math.floor(Rn/60);if(Nn<24)return`${Nn} hour${Nn!==1?"s":""} ago`;const Cn=Math.floor(Nn/24);return`${Cn} day${Cn!==1?"s":""} ago`}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[dn&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:["✨ Restored your last saved draft"," ",fn&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",bn(fn),")"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:un,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Clockmaker’s Secret",value:jt,readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is your book’s main title."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:hn||Tt||"",readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:Ft,readOnly:!0,className:"w-full px-4 py-3 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Chapter Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Midnight Promise",value:St,onChange:pn=>kt(pn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:ring-2 focus:ring-green focus:outline-none"})]}),jsxRuntimeExports.jsx("div",{className:"border border-gray-700 rounded-xl",children:jsxRuntimeExports.jsx(BookEditor,{content:it,setContent:g})}),jsxRuntimeExports.jsx(CoverUpload,{cover:dt,setCover:ft}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:et??"",onChange:pn=>ot(Number(pn.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Website or Author Link"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:ct,onChange:pn=>ut(pn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!Ut&&jsxRuntimeExports.jsx("button",{type:"button",onClick:an,disabled:rn,className:`flex-1 px-6 py-3 rounded-xl bg-green text-black font-semibold text-lg shadow-lg transition ${rn?"opacity-70 cursor-not-allowed":"hover:bg-green hover:text-black"}`,children:rn?"Saving...":"Save Draft"}),!zt&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-royalPurple text-white font-semibold text-lg shadow-lg hover:opacity-90 transition",children:"🚀 Generate Book PDF"})]})]})]})}function PromptModal({isOpen:it,onClose:g,magnetId:et,accessToken:ot,contentType:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft}){const[St,kt]=reactExports.useState(""),[Tt,jt]=reactExports.useState(""),[Rt,Ft]=reactExports.useState("modern"),[$t,zt]=reactExports.useState(5),[Kt,Bt]=reactExports.useState(null),[Ut,Jt]=reactExports.useState(null),[en,tn]=reactExports.useState(""),[nn,rn]=reactExports.useState(!1),[on,dn]=reactExports.useState(!1),[cn,fn]=reactExports.useState(null),[mn,En]=reactExports.useState(""),[Sn,wn]=reactExports.useState("questions"),[hn,yn]=reactExports.useState("#ffffff");reactExports.useEffect(()=>{it||(kt(""),jt(""),Ft("modern"),zt(5),Bt(null),Jt(null),tn(""),fn(null),ft(0),rn(!1)),wn("questions")},[it]);const an=()=>g();async function un(pn,kn){var Rn,Nn,Cn;pn.preventDefault(),dn(!0),ft(0),dt(!0),g();let _n;try{let Mn=0;_n=setInterval(()=>{Mn+=Mn<60?Math.random()*4.5:Mn<85?Math.random()*2.5:Math.random()*1.2,Mn>=96&&(Mn=96),ft(Mn)},200);const In=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{magnetId:et,prompt:St,title:Tt,theme:Rt,bgTheme:hn,pages:$t,logo:Kt,link:en,coverImage:cn,cta:mn,contentType:kn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(_n),ft(100),y$4.success("🎉 Your digital asset has been generated successfully!"),dt(!1),g(),await new Promise(On=>setTimeout(On,1e3)),setTimeout(()=>{typeof ut=="function"&&ut(et,St,Rt)},2e3)}catch(Mn){if(clearInterval(_n),ft(0),dn(!1),dt(!1),console.error("❌ Prompt submission error:",Mn),Mn.code==="ECONNABORTED"||(Rn=Mn.message)!=null&&Rn.includes("timeout"))y$4.info("⏳ Please wait — your document is still being created. It will appear shortly.");else if(Mn.response){const{status:In,data:On}=Mn.response;In===413?y$4.error(On.message||"Your input is too long. Please shorten it."):In===400?y$4.error(On.message||"Missing required fields."):In===429?y$4.error("Rate limit reached. Please wait a moment and try again."):(Nn=On.message)!=null&&Nn.includes("context_length_exceeded")||(Cn=On.message)!=null&&Cn.includes("too large")?y$4.error("⚠️ This document is too large. Try fewer pages or smaller content."):y$4.info("📄 Your document is still generating — it will appear soon.")}else y$4.info("⚙️ Document generation still in progress. Please refresh your dashboard shortly.");g(),typeof ut=="function"&&setTimeout(()=>ut(et,St,Rt),5e3)}finally{dn(!1)}}async function bn(pn){pn.preventDefault(),dn(!0),ft(0),dt(!0),g();let kn;try{let _n=0;kn=setInterval(()=>{_n+=_n<60?Math.random()*4.5:_n<85?Math.random()*2.5:Math.random()*1.2,_n>=96&&(_n=96),ft(_n)},200);const Rn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{prompt:St,theme:Rt,pages:$t,logo:Kt,link:en,coverImage:cn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(kn),ft(100),y$4.success("📚 Your book was generated successfully!"),await new Promise(Nn=>setTimeout(Nn,800)),dt(!1),g()}catch(_n){console.error("❌ Book generation error:",_n),clearInterval(kn),ft(0),dn(!1),dt(!1),y$4.error("Something went wrong while generating your book.")}finally{dn(!1)}}return jsxRuntimeExports.jsx(ze,{show:it,appear:!0,children:jsxRuntimeExports.jsxs(yt,{className:"relative z-50",onClose:()=>{nn||g()},children:[jsxRuntimeExports.jsx(Dt,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(je,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-gray-900 p-8 shadow-2xl border border-gray-700",children:[jsxRuntimeExports.jsx(Ye,{className:"text-2xl font-bold text-white mb-6 text-center",children:"✨ Create Your Lead Magnet"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[Sn==="questions"&&jsxRuntimeExports.jsx(SmartPromptBuilder,{onPromptReady:pn=>{kt(pn),wn("generator")}}),Sn==="generator"&&jsxRuntimeExports.jsx("div",{className:`transition-all duration-300 ${on?"pointer-events-none blur-sm opacity-50":""}`,children:jsxRuntimeExports.jsx(PromptForm,{text:St,setText:kt,title:Tt,setTitle:jt,theme:Rt,setTheme:Ft,bgTheme:hn,setBgTheme:yn,pages:$t,setPages:zt,logo:Kt,setLogo:Bt,logoPreview:Ut,setLogoPreview:Jt,link:en,setLink:tn,cover:cn,setCover:fn,cta:mn,setCta:En,showPreview:nn,setShowPreview:rn,onSubmit:un,loading:on,contentType:ct})}),Sn==="bookBuilder"&&jsxRuntimeExports.jsxs("div",{className:`transition-all duration-300 ${on?"pointer-events-none blur-sm opacity-50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>wn("selection"),className:"text-sm text-gray-400 underline hover:text-gray-200 transition",children:"← Back to Selection"})}),jsxRuntimeExports.jsx(BookPromptForm,{text:St,setText:kt,theme:Rt,setTheme:Ft,pages:$t,setPages:zt,logo:Kt,setLogo:Bt,logoPreview:Ut,setLogoPreview:Jt,link:en,setLink:tn,cover:cn,setCover:fn,cta:mn,setCta:En,showPreview:nn,setShowPreview:rn,onSubmit:bn,loading:on})]})]}),Sn!=="questions"&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>wn("questions"),className:"absolute top-4 left-4 flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-green text-black rounded-lg shadow-md transition-all hover:bg-green/90 hover:text-white active:scale-95 z-20",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx("button",{onClick:on?void 0:an,className:`absolute top-4 right-4 text-white text-xl transition ${on?"opacity-30 cursor-not-allowed":"hover:text-red-400"}`,disabled:on,children:"✕"})]})})]})})}function DashboardHeader({items:it=[],onCheckout:g,type:et="magnet"}){var Tt;const{user:ot}=useAuth(),ct=Array.isArray(it.magnets)?it.magnets:it,ut=it.summary||{},dt=et==="book"?(ot==null?void 0:ot.book_slots)??0:ut.total_slots??(ot==null?void 0:ot.magnet_slots)??0,ft=et==="book"?ct.filter(jt=>jt.pages>=750).length:ut.used_slots??ct.filter(jt=>jt.status==="completed").length,St=ut.available_slots??Math.max(dt-ft,0),kt=et==="book"?"My Books":"My Digital Products";return jsxRuntimeExports.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:kt}),ot&&jsxRuntimeExports.jsxs("div",{className:"text-[14px] text-gray-400 mt-1 mb-2",children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold tracking-wide",children:((Tt=ot==null?void 0:ot.name)==null?void 0:Tt.split(" ")[0])||"User"})]}),jsxRuntimeExports.jsxs("p",{className:"text-silver mt-1",children:["You currently have ",St," of ",dt," slots remaining."]}),St===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]})})}function LoadingState(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:"Loading your lead magnets..."})]})}function EmptyState({onCheckout:it,type:g="magnet"}){const et=g==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver mb-6",children:et?"You haven’t written any books yet.":"You haven’t created any lead magnets yet."}),jsxRuntimeExports.jsx("button",{onClick:it,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:et?"Write My First Book":"Generate My First Lead Magnet"})]})}const scriptRel="modulepreload",assetsURL=function(it){return"/"+it},seen={},__vitePreload=function it(g,et,ot){if(!et||et.length===0)return g();const ct=document.getElementsByTagName("link");return Promise.all(et.map(ut=>{if(ut=assetsURL(ut),ut in seen)return;seen[ut]=!0;const dt=ut.endsWith(".css"),ft=dt?'[rel="stylesheet"]':"";if(!!ot)for(let Tt=ct.length-1;Tt>=0;Tt--){const jt=ct[Tt];if(jt.href===ut&&(!dt||jt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ut}"]${ft}`))return;const kt=document.createElement("link");if(kt.rel=dt?"stylesheet":scriptRel,dt||(kt.as="script",kt.crossOrigin=""),kt.href=ut,document.head.appendChild(kt),dt)return new Promise((Tt,jt)=>{kt.addEventListener("load",Tt),kt.addEventListener("error",()=>jt(new Error(`Unable to preload CSS for ${ut}`)))})})).then(()=>g()).catch(ut=>{const dt=new Event("vite:preloadError",{cancelable:!0});if(dt.payload=ut,window.dispatchEvent(dt),!dt.defaultPrevented)throw ut})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(it){Number.isInteger(it)&&(verbosity=it)}function getVerbosityLevel(){return verbosity}function info(it){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${it}`)}function warn(it){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${it}`)}function unreachable(it){throw new Error(it)}function assert(it,g){it||unreachable(g)}function _isValidProtocol(it){switch(it==null?void 0:it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(it,g=null,et=null){if(!it)return null;if(et&&typeof it=="string"){if(et.addDefaultProtocol&&it.startsWith("www.")){const ct=it.match(/\./g);(ct==null?void 0:ct.length)>=2&&(it=`http://${it}`)}if(et.tryConvertEncoding)try{it=stringToUTF8String(it)}catch{}}const ot=g?URL.parse(it,g):URL.parse(it);return _isValidProtocol(ot)?ot:null}function updateUrlHash(it,g,et=!1){const ot=URL.parse(it);return ot?(ot.hash=g,ot.href):et&&createValidAbsoluteUrl(it,"http://example.com")?it.split("#",1)[0]+`${g?`#${g}`:""}`:""}function shadow(it,g,et,ot=!1){return Object.defineProperty(it,g,{value:et,enumerable:!ot,configurable:!0,writable:!1}),et}const BaseException=function it(){function g(et,ot){this.message=et,this.name=ot}return g.prototype=new Error,g.constructor=g,g}();class PasswordException extends BaseException{constructor(g,et){super(g,"PasswordException"),this.code=et}}class UnknownErrorException extends BaseException{constructor(g,et){super(g,"UnknownErrorException"),this.details=et}}class InvalidPDFException extends BaseException{constructor(g){super(g,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(g,et,ot){super(g,"ResponseException"),this.status=et,this.missing=ot}}class FormatError extends BaseException{constructor(g){super(g,"FormatError")}}class AbortException extends BaseException{constructor(g){super(g,"AbortException")}}function bytesToString(it){(typeof it!="object"||(it==null?void 0:it.length)===void 0)&&unreachable("Invalid argument for bytesToString");const g=it.length,et=8192;if(g<et)return String.fromCharCode.apply(null,it);const ot=[];for(let ct=0;ct<g;ct+=et){const ut=Math.min(ct+et,g),dt=it.subarray(ct,ut);ot.push(String.fromCharCode.apply(null,dt))}return ot.join("")}function stringToBytes(it){typeof it!="string"&&unreachable("Invalid argument for stringToBytes");const g=it.length,et=new Uint8Array(g);for(let ot=0;ot<g;++ot)et[ot]=it.charCodeAt(ot)&255;return et}function string32(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function isLittleEndian(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:g,userAgent:et}=navigator;return shadow(this,"platform",{isAndroid:et.includes("Android"),isLinux:g.includes("Linux"),isMac:g.includes("Mac"),isWindows:g.includes("Win"),isFirefox:et.includes("Firefox")})}static get isCSSRoundSupported(){var g,et;return shadow(this,"isCSSRoundSupported",(et=(g=globalThis.CSS)==null?void 0:g.supports)==null?void 0:et.call(g,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),it=>it.toString(16).padStart(2,"0"));var Wy,Q2,Z2,Px,$_;let Util$1=(Q2=class{static makeHexColor(g,et,ot){return`#${hexNumbers[g]}${hexNumbers[et]}${hexNumbers[ot]}`}static domMatrixToTransform(g){return[g.a,g.b,g.c,g.d,g.e,g.f]}static scaleMinMax(g,et){let ot;g[0]?(g[0]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[0],et[2]*=g[0],g[3]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[3],et[3]*=g[3]):(ot=et[0],et[0]=et[1],et[1]=ot,ot=et[2],et[2]=et[3],et[3]=ot,g[1]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[1],et[3]*=g[1],g[2]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[2],et[2]*=g[2]),et[0]+=g[4],et[1]+=g[5],et[2]+=g[4],et[3]+=g[5]}static transform(g,et){return[g[0]*et[0]+g[2]*et[1],g[1]*et[0]+g[3]*et[1],g[0]*et[2]+g[2]*et[3],g[1]*et[2]+g[3]*et[3],g[0]*et[4]+g[2]*et[5]+g[4],g[1]*et[4]+g[3]*et[5]+g[5]]}static multiplyByDOMMatrix(g,et){return[g[0]*et.a+g[2]*et.b,g[1]*et.a+g[3]*et.b,g[0]*et.c+g[2]*et.d,g[1]*et.c+g[3]*et.d,g[0]*et.e+g[2]*et.f+g[4],g[1]*et.e+g[3]*et.f+g[5]]}static applyTransform(g,et,ot=0){const ct=g[ot],ut=g[ot+1];g[ot]=ct*et[0]+ut*et[2]+et[4],g[ot+1]=ct*et[1]+ut*et[3]+et[5]}static applyTransformToBezier(g,et,ot=0){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5];for(let Tt=0;Tt<6;Tt+=2){const jt=g[ot+Tt],Rt=g[ot+Tt+1];g[ot+Tt]=jt*ct+Rt*dt+St,g[ot+Tt+1]=jt*ut+Rt*ft+kt}}static applyInverseTransform(g,et){const ot=g[0],ct=g[1],ut=et[0]*et[3]-et[1]*et[2];g[0]=(ot*et[3]-ct*et[2]+et[2]*et[5]-et[4]*et[3])/ut,g[1]=(-ot*et[1]+ct*et[0]+et[4]*et[1]-et[5]*et[0])/ut}static axialAlignedBoundingBox(g,et,ot){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5],Tt=g[0],jt=g[1],Rt=g[2],Ft=g[3];let $t=ct*Tt+St,zt=$t,Kt=ct*Rt+St,Bt=Kt,Ut=ft*jt+kt,Jt=Ut,en=ft*Ft+kt,tn=en;if(ut!==0||dt!==0){const nn=ut*Tt,rn=ut*Rt,on=dt*jt,dn=dt*Ft;$t+=on,Bt+=on,Kt+=dn,zt+=dn,Ut+=nn,tn+=nn,en+=rn,Jt+=rn}ot[0]=Math.min(ot[0],$t,Kt,zt,Bt),ot[1]=Math.min(ot[1],Ut,en,Jt,tn),ot[2]=Math.max(ot[2],$t,Kt,zt,Bt),ot[3]=Math.max(ot[3],Ut,en,Jt,tn)}static inverseTransform(g){const et=g[0]*g[3]-g[1]*g[2];return[g[3]/et,-g[1]/et,-g[2]/et,g[0]/et,(g[2]*g[5]-g[4]*g[3])/et,(g[4]*g[1]-g[5]*g[0])/et]}static singularValueDecompose2dScale(g,et){const ot=g[0],ct=g[1],ut=g[2],dt=g[3],ft=ot**2+ct**2,St=ot*ut+ct*dt,kt=ut**2+dt**2,Tt=(ft+kt)/2,jt=Math.sqrt(Tt**2-(ft*kt-St**2));et[0]=Math.sqrt(Tt+jt||1),et[1]=Math.sqrt(Tt-jt||1)}static normalizeRect(g){const et=g.slice(0);return g[0]>g[2]&&(et[0]=g[2],et[2]=g[0]),g[1]>g[3]&&(et[1]=g[3],et[3]=g[1]),et}static intersect(g,et){const ot=Math.max(Math.min(g[0],g[2]),Math.min(et[0],et[2])),ct=Math.min(Math.max(g[0],g[2]),Math.max(et[0],et[2]));if(ot>ct)return null;const ut=Math.max(Math.min(g[1],g[3]),Math.min(et[1],et[3])),dt=Math.min(Math.max(g[1],g[3]),Math.max(et[1],et[3]));return ut>dt?null:[ot,ut,ct,dt]}static pointBoundingBox(g,et,ot){ot[0]=Math.min(ot[0],g),ot[1]=Math.min(ot[1],et),ot[2]=Math.max(ot[2],g),ot[3]=Math.max(ot[3],et)}static rectBoundingBox(g,et,ot,ct,ut){ut[0]=Math.min(ut[0],g,ot),ut[1]=Math.min(ut[1],et,ct),ut[2]=Math.max(ut[2],g,ot),ut[3]=Math.max(ut[3],et,ct)}static bezierBoundingBox(g,et,ot,ct,ut,dt,ft,St,kt){kt[0]=Math.min(kt[0],g,ft),kt[1]=Math.min(kt[1],et,St),kt[2]=Math.max(kt[2],g,ft),kt[3]=Math.max(kt[3],et,St),An(this,Px,$_).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-g+3*(ot-ut)+ft),6*(g-2*ot+ut),3*(ot-g),kt),An(this,Px,$_).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-et+3*(ct-dt)+St),6*(et-2*ct+dt),3*(ct-et),kt)}},Wy=new WeakSet,Z2=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt){if(kt<=0||kt>=1)return;const jt=1-kt,Rt=kt*kt,Ft=Rt*kt,$t=jt*(jt*(jt*g+3*kt*et)+3*Rt*ot)+Ft*ct,zt=jt*(jt*(jt*ut+3*kt*dt)+3*Rt*ft)+Ft*St;Tt[0]=Math.min(Tt[0],$t),Tt[1]=Math.min(Tt[1],zt),Tt[2]=Math.max(Tt[2],$t),Tt[3]=Math.max(Tt[3],zt)},Px=new WeakSet,$_=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt,jt,Rt){if(Math.abs(kt)<1e-12){Math.abs(Tt)>=1e-12&&An(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,-jt/Tt,Rt);return}const Ft=Tt**2-4*jt*kt;if(Ft<0)return;const $t=Math.sqrt(Ft),zt=2*kt;An(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt+$t)/zt,Rt),An(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt-$t)/zt,Rt)},vn(Q2,Wy),vn(Q2,Px),Q2);function stringToUTF8String(it){return decodeURIComponent(escape(it))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(it){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),it.replaceAll(NormalizeRegex,(g,et,ot)=>et?et.normalize("NFKC"):NormalizationMap.get(ot))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);return crypto.getRandomValues(it),bytesToString(it)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(it,g,et){if(!Array.isArray(et)||et.length<2)return!1;const[ot,ct,...ut]=et;if(!it(ot)&&!Number.isInteger(ot)||!g(ct))return!1;const dt=ut.length;let ft=!0;switch(ct.name){case"XYZ":if(dt<2||dt>3)return!1;break;case"Fit":case"FitB":return dt===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(dt>1)return!1;break;case"FitR":if(dt!==4)return!1;ft=!1;break;default:return!1}for(const St of ut)if(!(typeof St=="number"||ft&&St===null))return!1;return!0}function MathClamp(it,g,et){return Math.min(Math.max(it,g),et)}function toBase64Util(it){return Uint8Array.prototype.toBase64?it.toBase64():btoa(bytesToString(it))}function fromBase64Util(it){return Uint8Array.fromBase64?Uint8Array.fromBase64(it):stringToBytes(atob(it))}typeof Promise.try!="function"&&(Promise.try=function(it,...g){return new Promise(et=>{et(it(...g))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(it){return it.reduce((g,et)=>g+et,0)});class XfaText{static textContent(g){const et=[],ot={items:et,styles:Object.create(null)};function ct(ut){var St;if(!ut)return;let dt=null;const ft=ut.name;if(ft==="#text")dt=ut.value;else if(XfaText.shouldBuildText(ft))(St=ut==null?void 0:ut.attributes)!=null&&St.textContent?dt=ut.attributes.textContent:ut.value&&(dt=ut.value);else return;if(dt!==null&&et.push({str:dt}),!!ut.children)for(const kt of ut.children)ct(kt)}return ct(g),ot}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}class XfaLayer{static setupStorage(g,et,ot,ct,ut){const dt=ct.getValue(et,{value:null});switch(ot.name){case"textarea":if(dt.value!==null&&(g.textContent=dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})});break;case"input":if(ot.attributes.type==="radio"||ot.attributes.type==="checkbox"){if(dt.value===ot.attributes.xfaOn?g.setAttribute("checked",!0):dt.value===ot.attributes.xfaOff&&g.removeAttribute("checked"),ut==="print")break;g.addEventListener("change",ft=>{ct.setValue(et,{value:ft.target.checked?ft.target.getAttribute("xfaOn"):ft.target.getAttribute("xfaOff")})})}else{if(dt.value!==null&&g.setAttribute("value",dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})})}break;case"select":if(dt.value!==null){g.setAttribute("value",dt.value);for(const ft of ot.children)ft.attributes.value===dt.value?ft.attributes.selected=!0:ft.attributes.hasOwnProperty("selected")&&delete ft.attributes.selected}g.addEventListener("input",ft=>{const St=ft.target.options,kt=St.selectedIndex===-1?"":St[St.selectedIndex].value;ct.setValue(et,{value:kt})});break}}static setAttributes({html:g,element:et,storage:ot=null,intent:ct,linkService:ut}){const{attributes:dt}=et,ft=g instanceof HTMLAnchorElement;dt.type==="radio"&&(dt.name=`${dt.name}-${ct}`);for(const[St,kt]of Object.entries(dt))if(kt!=null)switch(St){case"class":kt.length&&g.setAttribute(St,kt.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",kt);break;case"style":Object.assign(g.style,kt);break;case"textContent":g.textContent=kt;break;default:(!ft||St!=="href"&&St!=="newWindow")&&g.setAttribute(St,kt)}ft&&ut.addLinkAttributes(g,dt.href,dt.newWindow),ot&&dt.dataId&&this.setupStorage(g,dt.dataId,et,ot)}static render(g){var jt,Rt;const et=g.annotationStorage,ot=g.linkService,ct=g.xfaHtml,ut=g.intent||"display",dt=document.createElement(ct.name);ct.attributes&&this.setAttributes({html:dt,element:ct,intent:ut,linkService:ot});const ft=ut!=="richText",St=g.div;if(St.append(dt),g.viewport){const Ft=`matrix(${g.viewport.transform.join(",")})`;St.style.transform=Ft}ft&&St.setAttribute("class","xfaLayer xfaFont");const kt=[];if(ct.children.length===0){if(ct.value){const Ft=document.createTextNode(ct.value);dt.append(Ft),ft&&XfaText.shouldBuildText(ct.name)&&kt.push(Ft)}return{textDivs:kt}}const Tt=[[ct,-1,dt]];for(;Tt.length>0;){const[Ft,$t,zt]=Tt.at(-1);if($t+1===Ft.children.length){Tt.pop();continue}const Kt=Ft.children[++Tt.at(-1)[1]];if(Kt===null)continue;const{name:Bt}=Kt;if(Bt==="#text"){const Jt=document.createTextNode(Kt.value);kt.push(Jt),zt.append(Jt);continue}const Ut=(jt=Kt==null?void 0:Kt.attributes)!=null&&jt.xmlns?document.createElementNS(Kt.attributes.xmlns,Bt):document.createElement(Bt);if(zt.append(Ut),Kt.attributes&&this.setAttributes({html:Ut,element:Kt,storage:et,intent:ut,linkService:ot}),((Rt=Kt.children)==null?void 0:Rt.length)>0)Tt.push([Kt,-1,Ut]);else if(Kt.value){const Jt=document.createTextNode(Kt.value);ft&&XfaText.shouldBuildText(Bt)&&kt.push(Jt),Ut.append(Jt)}}for(const Ft of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ft.setAttribute("readOnly",!0);return{textDivs:kt}}static update(g){const et=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=et,g.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Gm=class Gm{};qn(Gm,"CSS",96),qn(Gm,"PDF",72),qn(Gm,"PDF_TO_CSS_UNITS",Gm.CSS/Gm.PDF);let PixelsPerInch=Gm;async function fetchData(it,g="text"){if(isValidFetchUrl(it,document.baseURI)){const et=await fetch(it);if(!et.ok)throw new Error(et.statusText);switch(g){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"json":return et.json()}return et.text()}return new Promise((et,ot)=>{const ct=new XMLHttpRequest;ct.open("GET",it,!0),ct.responseType=g,ct.onreadystatechange=()=>{if(ct.readyState===XMLHttpRequest.DONE){if(ct.status===200||ct.status===0){switch(g){case"arraybuffer":case"blob":case"json":et(ct.response);return}et(ct.responseText);return}ot(new Error(ct.statusText))}},ct.send(null)})}class PageViewport{constructor({viewBox:g,userUnit:et,scale:ot,rotation:ct,offsetX:ut=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=g,this.userUnit=et,this.scale=ot,this.rotation=ct,this.offsetX=ut,this.offsetY=dt,ot*=et;const St=(g[2]+g[0])/2,kt=(g[3]+g[1])/2;let Tt,jt,Rt,Ft;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:Tt=-1,jt=0,Rt=0,Ft=1;break;case 90:Tt=0,jt=1,Rt=1,Ft=0;break;case 270:Tt=0,jt=-1,Rt=-1,Ft=0;break;case 0:Tt=1,jt=0,Rt=0,Ft=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(Rt=-Rt,Ft=-Ft);let $t,zt,Kt,Bt;Tt===0?($t=Math.abs(kt-g[1])*ot+ut,zt=Math.abs(St-g[0])*ot+dt,Kt=(g[3]-g[1])*ot,Bt=(g[2]-g[0])*ot):($t=Math.abs(St-g[0])*ot+ut,zt=Math.abs(kt-g[1])*ot+dt,Kt=(g[2]-g[0])*ot,Bt=(g[3]-g[1])*ot),this.transform=[Tt*ot,jt*ot,Rt*ot,Ft*ot,$t-Tt*ot*St-Rt*ot*kt,zt-jt*ot*St-Ft*ot*kt],this.width=Kt,this.height=Bt}get rawDims(){const g=this.viewBox;return shadow(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:et=this.rotation,offsetX:ot=this.offsetX,offsetY:ct=this.offsetY,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}convertToViewportPoint(g,et){const ot=[g,et];return Util$1.applyTransform(ot,this.transform),ot}convertToViewportRectangle(g){const et=[g[0],g[1]];Util$1.applyTransform(et,this.transform);const ot=[g[2],g[3]];return Util$1.applyTransform(ot,this.transform),[et[0],et[1],ot[0],ot[1]]}convertToPdfPoint(g,et){const ot=[g,et];return Util$1.applyInverseTransform(ot,this.transform),ot}}class RenderingCancelledException extends BaseException{constructor(g,et=0){super(g,"RenderingCancelledException"),this.extraDelay=et}}function isDataScheme(it){const g=it.length;let et=0;for(;et<g&&it[et].trim()==="";)et++;return it.substring(et,et+5).toLowerCase()==="data:"}function isPdfFile(it){return typeof it=="string"&&/\.pdf$/i.test(it)}function getFilenameFromUrl(it){return[it]=it.split(/[#?]/,1),it.substring(it.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(it,g="document.pdf"){if(typeof it!="string")return g;if(isDataScheme(it))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const ot=(ft=>{try{return new URL(ft)}catch{try{return new URL(decodeURIComponent(ft))}catch{try{return new URL(ft,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(ft),"https://foo.bar")}catch{return null}}}}})(it);if(!ot)return g;const ct=ft=>{try{let St=decodeURIComponent(ft);return St.includes("/")?(St=St.split("/").at(-1),St.test(/^\.pdf$/i)?St:ft):St}catch{return ft}},ut=/\.pdf$/i,dt=ot.pathname.split("/").at(-1);if(ut.test(dt))return ct(dt);if(ot.searchParams.size>0){const ft=Array.from(ot.searchParams.values()).reverse();for(const kt of ft)if(ut.test(kt))return ct(kt);const St=Array.from(ot.searchParams.keys()).reverse();for(const kt of St)if(ut.test(kt))return ct(kt)}if(ot.hash){const St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(ot.hash);if(St)return ct(St[0])}return g}class StatTimer{constructor(){qn(this,"started",Object.create(null));qn(this,"times",[])}time(g){g in this.started&&warn(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||warn(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let et=0;for(const{name:ot}of this.times)et=Math.max(ot.length,et);for(const{name:ot,start:ct,end:ut}of this.times)g.push(`${ot.padEnd(et)} ${ut-ct}ms
`);return g.join("")}}function isValidFetchUrl(it,g){const et=g?URL.parse(it,g):URL.parse(it);return(et==null?void 0:et.protocol)==="http:"||(et==null?void 0:et.protocol)==="https:"}function noContextMenu(it){it.preventDefault()}function stopEvent(it){it.preventDefault(),it.stopPropagation()}function deprecated(it){console.log("Deprecated API usage: "+it)}var Nx;class PDFDateString{static toDateObject(g){if(g instanceof Date)return g;if(!g||typeof g!="string")return null;Ht(this,Nx)||xn(this,Nx,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=Ht(this,Nx).exec(g);if(!et)return null;const ot=parseInt(et[1],10);let ct=parseInt(et[2],10);ct=ct>=1&&ct<=12?ct-1:0;let ut=parseInt(et[3],10);ut=ut>=1&&ut<=31?ut:1;let dt=parseInt(et[4],10);dt=dt>=0&&dt<=23?dt:0;let ft=parseInt(et[5],10);ft=ft>=0&&ft<=59?ft:0;let St=parseInt(et[6],10);St=St>=0&&St<=59?St:0;const kt=et[7]||"Z";let Tt=parseInt(et[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let jt=parseInt(et[9],10)||0;return jt=jt>=0&&jt<=59?jt:0,kt==="-"?(dt+=Tt,ft+=jt):kt==="+"&&(dt-=Tt,ft-=jt),new Date(Date.UTC(ot,ct,ut,dt,ft,St))}}Nx=new WeakMap,vn(PDFDateString,Nx,void 0);function getXfaPageViewport(it,{scale:g=1,rotation:et=0}){const{width:ot,height:ct}=it.attributes.style,ut=[0,0,parseInt(ot),parseInt(ct)];return new PageViewport({viewBox:ut,userUnit:1,scale:g,rotation:et})}function getRGB(it){if(it.startsWith("#")){const g=parseInt(it.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return it.startsWith("rgb(")?it.slice(4,-1).split(",").map(g=>parseInt(g)):it.startsWith("rgba(")?it.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):(warn(`Not a valid color format: "${it}"`),[0,0,0])}function getColorValues(it){const g=document.createElement("span");g.style.visibility="hidden",g.style.colorScheme="only light",document.body.append(g);for(const et of it.keys()){g.style.color=et;const ot=window.getComputedStyle(g).color;it.set(et,getRGB(ot))}g.remove()}function getCurrentTransform(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform();return[g,et,ot,ct,ut,dt]}function getCurrentTransformInverse(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform().invertSelf();return[g,et,ot,ct,ut,dt]}function setLayerDimensions(it,g,et=!1,ot=!0){if(g instanceof PageViewport){const{pageWidth:ct,pageHeight:ut}=g.rawDims,{style:dt}=it,ft=util_FeatureTest.isCSSRoundSupported,St=`var(--total-scale-factor) * ${ct}px`,kt=`var(--total-scale-factor) * ${ut}px`,Tt=ft?`round(down, ${St}, var(--scale-round-x))`:`calc(${St})`,jt=ft?`round(down, ${kt}, var(--scale-round-y))`:`calc(${kt})`;!et||g.rotation%180===0?(dt.width=Tt,dt.height=jt):(dt.width=jt,dt.height=Tt)}ot&&it.setAttribute("data-main-rotation",g.rotation)}class OutputScale{constructor(){const{pixelRatio:g}=OutputScale;this.sx=g,this.sy=g}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(g,et,ot,ct,ut=-1){let dt=1/0,ft=1/0,St=1/0;ot=OutputScale.capPixels(ot,ut),ot>0&&(dt=Math.sqrt(ot/(g*et))),ct!==-1&&(ft=ct/g,St=ct/et);const kt=Math.min(dt,ft,St);return this.sx>kt||this.sy>kt?(this.sx=kt,this.sy=kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(g,et){if(et>=0){const ot=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+et/100));return g>0?Math.min(g,ot):ot}return g}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var g;return shadow(this,"isDarkMode",!!((g=window==null?void 0:window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const g=document.createElement("span");g.classList.add("comment","sidebar");const{style:et}=g;et.width=et.height="0",et.display="none",et.color="var(--comment-fg-color)",document.body.append(g);const{color:ot}=window.getComputedStyle(g);return g.remove(),shadow(this,"commentForegroundColor",getRGB(ot))}}function applyOpacity(it,g,et,ot){ot=Math.min(Math.max(ot??1,0),1);const ct=255*(1-ot);return it=Math.round(it*ot+ct),g=Math.round(g*ot+ct),et=Math.round(et*ot+ct),[it,g,et]}function RGBToHSL(it,g){const et=it[0]/255,ot=it[1]/255,ct=it[2]/255,ut=Math.max(et,ot,ct),dt=Math.min(et,ot,ct),ft=(ut+dt)/2;if(ut===dt)g[0]=g[1]=0;else{const St=ut-dt;switch(g[1]=ft<.5?St/(ut+dt):St/(2-ut-dt),ut){case et:g[0]=((ot-ct)/St+(ot<ct?6:0))*60;break;case ot:g[0]=((ct-et)/St+2)*60;break;case ct:g[0]=((et-ot)/St+4)*60;break}}g[2]=ft}function HSLToRGB(it,g){const et=it[0],ot=it[1],ct=it[2],ut=(1-Math.abs(2*ct-1))*ot,dt=ut*(1-Math.abs(et/60%2-1)),ft=ct-ut/2;switch(Math.floor(et/60)){case 0:g[0]=ut+ft,g[1]=dt+ft,g[2]=ft;break;case 1:g[0]=dt+ft,g[1]=ut+ft,g[2]=ft;break;case 2:g[0]=ft,g[1]=ut+ft,g[2]=dt+ft;break;case 3:g[0]=ft,g[1]=dt+ft,g[2]=ut+ft;break;case 4:g[0]=dt+ft,g[1]=ft,g[2]=ut+ft;break;case 5:case 6:g[0]=ut+ft,g[1]=ft,g[2]=dt+ft;break}}function computeLuminance(it){return it<=.03928?it/12.92:((it+.055)/1.055)**2.4}function contrastRatio(it,g,et){HSLToRGB(it,et),et.map(computeLuminance);const ot=.2126*et[0]+.7152*et[1]+.0722*et[2];HSLToRGB(g,et),et.map(computeLuminance);const ct=.2126*et[0]+.7152*et[1]+.0722*et[2];return ot>ct?(ot+.05)/(ct+.05):(ct+.05)/(ot+.05)}const contrastCache=new Map;function findContrastColor(it,g){const et=it[0]+it[1]*256+it[2]*65536+g[0]*16777216+g[1]*4294967296+g[2]*1099511627776;let ot=contrastCache.get(et);if(ot)return ot;const ct=new Float32Array(9),ut=ct.subarray(0,3),dt=ct.subarray(3,6);RGBToHSL(it,dt);const ft=ct.subarray(6,9);RGBToHSL(g,ft);const St=ft[2]<.5,kt=St?12:4.5;if(dt[2]=St?Math.sqrt(dt[2]):1-Math.sqrt(1-dt[2]),contrastRatio(dt,ft,ut)<kt){let Tt,jt;St?(Tt=dt[2],jt=1):(Tt=0,jt=dt[2]);const Rt=.005;for(;jt-Tt>Rt;){const Ft=dt[2]=(Tt+jt)/2;St===contrastRatio(dt,ft,ut)<kt?Tt=Ft:jt=Ft}dt[2]=St?jt:Tt}return HSLToRGB(dt,ut),ot=Util$1.makeHexColor(Math.round(ut[0]*255),Math.round(ut[1]*255),Math.round(ut[2]*255)),contrastCache.set(et,ot),ot}function renderRichText({html:it,dir:g,className:et},ot){const ct=document.createDocumentFragment();if(typeof it=="string"){const ut=document.createElement("p");ut.dir=g||"auto";const dt=it.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const kt=dt[ft];ut.append(document.createTextNode(kt)),ft<St-1&&ut.append(document.createElement("br"))}ct.append(ut)}else XfaLayer.render({xfaHtml:it,div:ct,intent:"richText"});ct.firstChild.classList.add("richText",et),ot.append(ct)}var Pp,Np,Yo,Xo,Mx,Mp,qy,Ky,Ox,Mw,HP,Ow,GP,Iw,WP,Op,Ly,Km,ux;const Du=class Du{constructor(g){vn(this,Ow);vn(this,Iw);vn(this,Op);vn(this,Km);vn(this,Pp,null);vn(this,Np,null);vn(this,Yo,void 0);vn(this,Xo,null);vn(this,Mx,null);vn(this,Mp,null);vn(this,qy,null);vn(this,Ky,null);xn(this,Yo,g),Ht(Du,Ox)||xn(Du,Ox,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const g=xn(this,Pp,document.createElement("div"));g.classList.add("editToolbar","hidden"),g.setAttribute("role","toolbar");const et=Ht(this,Yo)._uiManager._signal;et instanceof AbortSignal&&!et.aborted&&(g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.addEventListener("pointerdown",An(Du,Mw,HP),{signal:et}));const ot=xn(this,Xo,document.createElement("div"));ot.className="buttons",g.append(ot);const ct=Ht(this,Yo).toolbarPosition;if(ct){const{style:ut}=g,dt=Ht(this,Yo)._uiManager.direction==="ltr"?1-ct[0]:ct[0];ut.insetInlineEnd=`${100*dt}%`,ut.top=`calc(${100*ct[1]}% + var(--editor-toolbar-vert-offset))`}return g}get div(){return Ht(this,Pp)}hide(){var g;Ht(this,Pp).classList.add("hidden"),(g=Ht(this,Np))==null||g.hideDropdown()}show(){var g,et;Ht(this,Pp).classList.remove("hidden"),(g=Ht(this,Mx))==null||g.shown(),(et=Ht(this,Mp))==null||et.shown()}addDeleteButton(){const{editorType:g,_uiManager:et}=Ht(this,Yo),ot=document.createElement("button");ot.classList.add("basic","deleteButton"),ot.tabIndex=0,ot.setAttribute("data-l10n-id",Ht(Du,Ox)[g]),An(this,Op,Ly).call(this,ot)&&ot.addEventListener("click",ct=>{et.delete()},{signal:et._signal}),Ht(this,Xo).append(ot)}async addAltText(g){const et=await g.render();An(this,Op,Ly).call(this,et),Ht(this,Xo).append(et,Ht(this,Km,ux)),xn(this,Mx,g)}addComment(g,et=null){if(Ht(this,Mp))return;const ot=g.renderForToolbar();if(!ot)return;An(this,Op,Ly).call(this,ot);const ct=xn(this,qy,Ht(this,Km,ux));et?(Ht(this,Xo).insertBefore(ot,et),Ht(this,Xo).insertBefore(ct,et)):Ht(this,Xo).append(ot,ct),xn(this,Mp,g),g.toolbar=this}addColorPicker(g){if(Ht(this,Np))return;xn(this,Np,g);const et=g.renderButton();An(this,Op,Ly).call(this,et),Ht(this,Xo).append(et,Ht(this,Km,ux))}async addEditSignatureButton(g){const et=xn(this,Ky,await g.renderEditButton(Ht(this,Yo)));An(this,Op,Ly).call(this,et),Ht(this,Xo).append(et,Ht(this,Km,ux))}removeButton(g){var et,ot;switch(g){case"comment":(et=Ht(this,Mp))==null||et.removeToolbarCommentButton(),xn(this,Mp,null),(ot=Ht(this,qy))==null||ot.remove(),xn(this,qy,null);break}}async addButton(g,et){switch(g){case"colorPicker":this.addColorPicker(et);break;case"altText":await this.addAltText(et);break;case"editSignature":await this.addEditSignatureButton(et);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(et);break}}async addButtonBefore(g,et,ot){const ct=Ht(this,Xo).querySelector(ot);ct&&g==="comment"&&this.addComment(et,ct)}updateEditSignatureButton(g){Ht(this,Ky)&&(Ht(this,Ky).title=g)}remove(){var g;Ht(this,Pp).remove(),(g=Ht(this,Np))==null||g.destroy(),xn(this,Np,null)}};Pp=new WeakMap,Np=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Mx=new WeakMap,Mp=new WeakMap,qy=new WeakMap,Ky=new WeakMap,Ox=new WeakMap,Mw=new WeakSet,HP=function(g){g.stopPropagation()},Ow=new WeakSet,GP=function(g){Ht(this,Yo)._focusEventsAllowed=!1,stopEvent(g)},Iw=new WeakSet,WP=function(g){Ht(this,Yo)._focusEventsAllowed=!0,stopEvent(g)},Op=new WeakSet,Ly=function(g){const et=Ht(this,Yo)._uiManager._signal;return!(et instanceof AbortSignal)||et.aborted?!1:(g.addEventListener("focusin",An(this,Ow,GP).bind(this),{capture:!0,signal:et}),g.addEventListener("focusout",An(this,Iw,WP).bind(this),{capture:!0,signal:et}),g.addEventListener("contextmenu",noContextMenu,{signal:et}),!0)},Km=new WeakSet,ux=function(){const g=document.createElement("div");return g.className="divider",g},vn(Du,Mw),vn(Du,Ox,null);let EditorToolbar=Du;var Ix,Ym,ju,Dw,qP,Lw,KP,Dx,B_;class FloatingToolbar{constructor(g){vn(this,Dw);vn(this,Lw);vn(this,Dx);vn(this,Ix,null);vn(this,Ym,null);vn(this,ju,void 0);xn(this,ju,g)}show(g,et,ot){const[ct,ut]=An(this,Lw,KP).call(this,et,ot),{style:dt}=Ht(this,Ym)||xn(this,Ym,An(this,Dw,qP).call(this));g.append(Ht(this,Ym)),dt.insetInlineEnd=`${100*ct}%`,dt.top=`calc(${100*ut}% + var(--editor-toolbar-vert-offset))`}hide(){Ht(this,Ym).remove()}}Ix=new WeakMap,Ym=new WeakMap,ju=new WeakMap,Dw=new WeakSet,qP=function(){const g=xn(this,Ym,document.createElement("div"));g.className="editToolbar",g.setAttribute("role","toolbar");const et=Ht(this,ju)._signal;et instanceof AbortSignal&&!et.aborted&&g.addEventListener("contextmenu",noContextMenu,{signal:et});const ot=xn(this,Ix,document.createElement("div"));return ot.className="buttons",g.append(ot),Ht(this,ju).hasCommentManager()&&An(this,Dx,B_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Ht(this,ju).commentSelection("floating_button")}),An(this,Dx,B_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Ht(this,ju).highlightSelection("floating_button")}),g},Lw=new WeakSet,KP=function(g,et){let ot=0,ct=0;for(const ut of g){const dt=ut.y+ut.height;if(dt<ot)continue;const ft=ut.x+(et?ut.width:0);if(dt>ot){ct=ft,ot=dt;continue}et?ft>ct&&(ct=ft):ft<ct&&(ct=ft)}return[et?1-ct:ct,ot]},Dx=new WeakSet,B_=function(g,et,ot,ct){const ut=document.createElement("button");ut.classList.add("basic",g),ut.tabIndex=0,ut.setAttribute("data-l10n-id",et);const dt=document.createElement("span");ut.append(dt),dt.className="visuallyHidden",dt.setAttribute("data-l10n-id",ot);const ft=Ht(this,ju)._signal;ft instanceof AbortSignal&&!ft.aborted&&(ut.addEventListener("contextmenu",noContextMenu,{signal:ft}),ut.addEventListener("click",ct,{signal:ft})),Ht(this,Ix).append(ut)};function bindEvents(it,g,et){for(const ot of et)g.addEventListener(ot,it[ot].bind(it))}var jw;class IdManager{constructor(){vn(this,jw,0)}get id(){return`${AnnotationEditorPrefix}${cs(this,jw)._++}`}}jw=new WeakMap;var Yy,Lx,Bs,Xy,ew;const HC=class HC{constructor(){vn(this,Xy);vn(this,Yy,getUuid());vn(this,Lx,0);vn(this,Bs,null)}static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ot=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ct=new Image;ct.src=g;const ut=ct.decode().then(()=>(ot.drawImage(ct,0,0,1,1,0,0,1,3),new Uint32Array(ot.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ut)}async getFromFile(g){const{lastModified:et,name:ot,size:ct,type:ut}=g;return An(this,Xy,ew).call(this,`${et}_${ot}_${ct}_${ut}`,g)}async getFromUrl(g){return An(this,Xy,ew).call(this,g,g)}async getFromBlob(g,et){const ot=await et;return An(this,Xy,ew).call(this,g,ot)}async getFromId(g){Ht(this,Bs)||xn(this,Bs,new Map);const et=Ht(this,Bs).get(g);if(!et)return null;if(et.bitmap)return et.refCounter+=1,et;if(et.file)return this.getFromFile(et.file);if(et.blobPromise){const{blobPromise:ot}=et;return delete et.blobPromise,this.getFromBlob(et.id,ot)}return this.getFromUrl(et.url)}getFromCanvas(g,et){Ht(this,Bs)||xn(this,Bs,new Map);let ot=Ht(this,Bs).get(g);if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;const ct=new OffscreenCanvas(et.width,et.height);return ct.getContext("2d").drawImage(et,0,0),ot={bitmap:ct.transferToImageBitmap(),id:`image_${Ht(this,Yy)}_${cs(this,Lx)._++}`,refCounter:1,isSvg:!1},Ht(this,Bs).set(g,ot),Ht(this,Bs).set(ot.id,ot),ot}getSvgUrl(g){const et=Ht(this,Bs).get(g);return et!=null&&et.isSvg?et.svgUrl:null}deleteId(g){var ct;Ht(this,Bs)||xn(this,Bs,new Map);const et=Ht(this,Bs).get(g);if(!et||(et.refCounter-=1,et.refCounter!==0))return;const{bitmap:ot}=et;if(!et.url&&!et.file){const ut=new OffscreenCanvas(ot.width,ot.height);ut.getContext("bitmaprenderer").transferFromImageBitmap(ot),et.blobPromise=ut.convertToBlob()}(ct=ot.close)==null||ct.call(ot),et.bitmap=null}isValidId(g){return g.startsWith(`image_${Ht(this,Yy)}_`)}};Yy=new WeakMap,Lx=new WeakMap,Bs=new WeakMap,Xy=new WeakSet,ew=async function(g,et){Ht(this,Bs)||xn(this,Bs,new Map);let ot=Ht(this,Bs).get(g);if(ot===null)return null;if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;try{ot||(ot={bitmap:null,id:`image_${Ht(this,Yy)}_${cs(this,Lx)._++}`,refCounter:0,isSvg:!1});let ct;if(typeof et=="string"?(ot.url=et,ct=await fetchData(et,"blob")):et instanceof File?ct=ot.file=et:et instanceof Blob&&(ct=et),ct.type==="image/svg+xml"){const ut=HC._isSVGFittingCanvas,dt=new FileReader,ft=new Image,St=new Promise((kt,Tt)=>{ft.onload=()=>{ot.bitmap=ft,ot.isSvg=!0,kt()},dt.onload=async()=>{const jt=ot.svgUrl=dt.result;ft.src=await ut?`${jt}#svgView(preserveAspectRatio(none))`:jt},ft.onerror=dt.onerror=Tt});dt.readAsDataURL(ct),await St}else ot.bitmap=await createImageBitmap(ct);ot.refCounter=1}catch(ct){warn(ct),ot=null}return Ht(this,Bs).set(g,ot),ot&&Ht(this,Bs).set(ot.id,ot),ot};let ImageManager=HC;var es,Ip,jx,Xr;class CommandManager{constructor(g=128){vn(this,es,[]);vn(this,Ip,!1);vn(this,jx,void 0);vn(this,Xr,-1);xn(this,jx,g)}add({cmd:g,undo:et,post:ot,mustExec:ct,type:ut=NaN,overwriteIfSameType:dt=!1,keepUndo:ft=!1}){if(ct&&g(),Ht(this,Ip))return;const St={cmd:g,undo:et,post:ot,type:ut};if(Ht(this,Xr)===-1){Ht(this,es).length>0&&(Ht(this,es).length=0),xn(this,Xr,0),Ht(this,es).push(St);return}if(dt&&Ht(this,es)[Ht(this,Xr)].type===ut){ft&&(St.undo=Ht(this,es)[Ht(this,Xr)].undo),Ht(this,es)[Ht(this,Xr)]=St;return}const kt=Ht(this,Xr)+1;kt===Ht(this,jx)?Ht(this,es).splice(0,1):(xn(this,Xr,kt),kt<Ht(this,es).length&&Ht(this,es).splice(kt)),Ht(this,es).push(St)}undo(){if(Ht(this,Xr)===-1)return;xn(this,Ip,!0);const{undo:g,post:et}=Ht(this,es)[Ht(this,Xr)];g(),et==null||et(),xn(this,Ip,!1),xn(this,Xr,Ht(this,Xr)-1)}redo(){if(Ht(this,Xr)<Ht(this,es).length-1){xn(this,Xr,Ht(this,Xr)+1),xn(this,Ip,!0);const{cmd:g,post:et}=Ht(this,es)[Ht(this,Xr)];g(),et==null||et(),xn(this,Ip,!1)}}hasSomethingToUndo(){return Ht(this,Xr)!==-1}hasSomethingToRedo(){return Ht(this,Xr)<Ht(this,es).length-1}cleanType(g){if(Ht(this,Xr)!==-1){for(let et=Ht(this,Xr);et>=0;et--)if(Ht(this,es)[et].type!==g){Ht(this,es).splice(et+1,Ht(this,Xr)-et),xn(this,Xr,et);return}Ht(this,es).length=0,xn(this,Xr,-1)}}destroy(){xn(this,es,null)}}es=new WeakMap,Ip=new WeakMap,jx=new WeakMap,Xr=new WeakMap;var Fw,YP;class KeyboardManager{constructor(g){vn(this,Fw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:et}=util_FeatureTest.platform;for(const[ot,ct,ut={}]of g)for(const dt of ot){const ft=dt.startsWith("mac+");et&&ft?(this.callbacks.set(dt.slice(4),{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1))):!et&&!ft&&(this.callbacks.set(dt,{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1)))}}exec(g,et){if(!this.allKeys.has(et.key))return;const ot=this.callbacks.get(An(this,Fw,YP).call(this,et));if(!ot)return;const{callback:ct,options:{bubbles:ut=!1,args:dt=[],checker:ft=null}}=ot;ft&&!ft(g,et)||(ct.bind(g,...dt,et)(),ut||stopEvent(et))}}Fw=new WeakSet,YP=function(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const et=this.buffer.join("+");return this.buffer.length=0,et};const $w=class $w{get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(g),shadow(this,"_colors",g)}convert(g){const et=getRGB(g);if(!window.matchMedia("(forced-colors: active)").matches)return et;for(const[ot,ct]of this._colors)if(ct.every((ut,dt)=>ut===et[dt]))return $w._colorsMapping.get(ot);return et}getHexCode(g){const et=this._colors.get(g);return et?Util$1.makeHexColor(...et):g}};qn($w,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=$w;var Jy,So,Qy,Jr,hs,Zy,Jo,e1,Qo,Vs,Dp,Lp,t1,jp,nu,Zo,Xm,Fx,$x,n1,Bx,ru,Fp,r1,$p,iu,Bw,Bp,i1,Vx,Vp,Jm,s1,zp,zx,ss,Ar,Fu,Hp,Up,Hx,o1,Ux,Gp,su,$u,Gx,Wx,na,a1,tw,qx,V_,Vw,XP,zw,JP,Qm,hx,Hw,QP,Uw,ZP,Gw,e3,Kx,z_,Ww,t3,Yx,H_,Xx,U_,qw,n3,Cs,qs,Pl,Ou,Kw,r3,Yw,i3,Jx,G_,Xw,s3,Zm,dx,Qx,W_;const zy=class zy{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt,jt,Rt,Ft,$t,zt,Kt){vn(this,a1);vn(this,qx);vn(this,Vw);vn(this,zw);vn(this,Qm);vn(this,Hw);vn(this,Uw);vn(this,Gw);vn(this,Kx);vn(this,Ww);vn(this,Yx);vn(this,Xx);vn(this,qw);vn(this,Cs);vn(this,Pl);vn(this,Kw);vn(this,Yw);vn(this,Jx);vn(this,Xw);vn(this,Zm);vn(this,Qx);vn(this,Jy,new AbortController);vn(this,So,null);vn(this,Qy,null);vn(this,Jr,new Map);vn(this,hs,new Map);vn(this,Zy,null);vn(this,Jo,null);vn(this,e1,null);vn(this,Qo,new CommandManager);vn(this,Vs,null);vn(this,Dp,null);vn(this,Lp,null);vn(this,t1,0);vn(this,jp,new Set);vn(this,nu,null);vn(this,Zo,null);vn(this,Xm,new Set);qn(this,"_editorUndoBar",null);vn(this,Fx,!1);vn(this,$x,!1);vn(this,n1,!1);vn(this,Bx,null);vn(this,ru,null);vn(this,Fp,null);vn(this,r1,null);vn(this,$p,!1);vn(this,iu,null);vn(this,Bw,new IdManager);vn(this,Bp,!1);vn(this,i1,!1);vn(this,Vx,!1);vn(this,Vp,null);vn(this,Jm,null);vn(this,s1,null);vn(this,zp,null);vn(this,zx,null);vn(this,ss,AnnotationEditorType.NONE);vn(this,Ar,new Set);vn(this,Fu,null);vn(this,Hp,null);vn(this,Up,null);vn(this,Hx,null);vn(this,o1,null);vn(this,Ux,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});vn(this,Gp,[0,0]);vn(this,su,null);vn(this,$u,null);vn(this,Gx,null);vn(this,Wx,null);vn(this,na,null);const Bt=this._signal=Ht(this,Jy).signal;xn(this,$u,g),xn(this,Gx,et),xn(this,Wx,ot),xn(this,Zy,ct),xn(this,Vs,ut),xn(this,Hp,dt),xn(this,o1,St),this._eventBus=ft,ft._on("editingaction",this.onEditingAction.bind(this),{signal:Bt}),ft._on("pagechanging",this.onPageChanging.bind(this),{signal:Bt}),ft._on("scalechanging",this.onScaleChanging.bind(this),{signal:Bt}),ft._on("rotationchanging",this.onRotationChanging.bind(this),{signal:Bt}),ft._on("setpreference",this.onSetPreference.bind(this),{signal:Bt}),ft._on("switchannotationeditorparams",Ut=>this.updateParams(Ut.type,Ut.value),{signal:Bt}),window.addEventListener("pointerdown",()=>{xn(this,i1,!0)},{capture:!0,signal:Bt}),window.addEventListener("pointerup",()=>{xn(this,i1,!1)},{capture:!0,signal:Bt}),An(this,Hw,QP).call(this),An(this,qw,n3).call(this),An(this,Kx,z_).call(this),xn(this,Jo,St.annotationStorage),xn(this,Bx,St.filterFactory),xn(this,Up,kt),xn(this,r1,Tt||null),xn(this,Fx,jt),xn(this,$x,Rt),xn(this,n1,Ft),xn(this,zx,$t||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=zt||null,this._supportsPinchToZoom=Kt!==!1,ut==null||ut.setSidebarUiManager(this)}static get _keyboardManager(){const g=zy.prototype,et=dt=>Ht(dt,$u).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&dt.hasSomethingToControl(),ot=(dt,{target:ft})=>{if(ft instanceof HTMLInputElement){const{type:St}=ft;return St!=="text"&&St!=="number"}return!0},ct=this.TRANSLATE_SMALL,ut=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],g.selectAll,{checker:ot}],[["ctrl+z","mac+meta+z"],g.undo,{checker:ot}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo,{checker:ot}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete,{checker:ot}],[["Enter","mac+Enter"],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Ht(dt,$u).contains(ft)&&!dt.isEnterHandled}],[[" ","mac+ "],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Ht(dt,$u).contains(document.activeElement)}],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-ct,0],checker:et}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-ut,0],checker:et}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[ct,0],checker:et}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[ut,0],checker:et}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-ct],checker:et}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-ut],checker:et}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,ct],checker:et}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,ut],checker:et}]]))}destroy(){var g,et,ot,ct,ut,dt,ft,St,kt;(g=Ht(this,na))==null||g.resolve(),xn(this,na,null),(et=Ht(this,Jy))==null||et.abort(),xn(this,Jy,null),this._signal=null;for(const Tt of Ht(this,hs).values())Tt.destroy();Ht(this,hs).clear(),Ht(this,Jr).clear(),Ht(this,Xm).clear(),(ot=Ht(this,zp))==null||ot.clear(),xn(this,So,null),Ht(this,Ar).clear(),Ht(this,Qo).destroy(),(ct=Ht(this,Zy))==null||ct.destroy(),(ut=Ht(this,Vs))==null||ut.destroy(),(dt=Ht(this,Hp))==null||dt.destroy(),(ft=Ht(this,iu))==null||ft.hide(),xn(this,iu,null),(St=Ht(this,s1))==null||St.destroy(),xn(this,s1,null),xn(this,Qy,null),Ht(this,ru)&&(clearTimeout(Ht(this,ru)),xn(this,ru,null)),Ht(this,su)&&(clearTimeout(Ht(this,su)),xn(this,su,null)),(kt=this._editorUndoBar)==null||kt.destroy(),xn(this,o1,null)}combinedSignal(g){return AbortSignal.any([this._signal,g.signal])}get mlManager(){return Ht(this,zx)}get useNewAltTextFlow(){return Ht(this,$x)}get useNewAltTextWhenAddingImage(){return Ht(this,n1)}get hcmFilter(){return shadow(this,"hcmFilter",Ht(this,Up)?Ht(this,Bx).addHCMFilter(Ht(this,Up).foreground,Ht(this,Up).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(Ht(this,$u)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",Ht(this,r1)?new Map(Ht(this,r1).split(",").map(g=>(g=g.split("=").map(et=>et.trim()),g[1]=g[1].toUpperCase(),g))):null)}get highlightColors(){const{_highlightColors:g}=this;if(!g)return shadow(this,"highlightColors",null);const et=new Map,ot=!!Ht(this,Up);for(const[ct,ut]of g){const dt=ct.endsWith("_HCM");if(ot&&dt){et.set(ct.replace("_HCM",""),ut);continue}!ot&&!dt&&et.set(ct,ut)}return shadow(this,"highlightColors",et)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,g=>g.reverse())):null)}getNonHCMColor(g){if(!this._highlightColors)return g;const et=this.highlightColorNames.get(g);return this._highlightColors.get(et)||g}getNonHCMColorName(g){return this.highlightColorNames.get(g)||g}setCurrentDrawingSession(g){g?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),xn(this,Lp,g)}setMainHighlightColorPicker(g){xn(this,s1,g)}editAltText(g,et=!1){var ot;(ot=Ht(this,Zy))==null||ot.editAltText(this,g,et)}hasCommentManager(){return!!Ht(this,Vs)}editComment(g,et,ot,ct){var ut;(ut=Ht(this,Vs))==null||ut.showDialog(this,g,et,ot,ct)}selectComment(g,et){const ot=Ht(this,hs).get(g),ct=ot==null?void 0:ot.getEditorByUID(et);ct==null||ct.toggleComment(!0,!0)}updateComment(g){var et;(et=Ht(this,Vs))==null||et.updateComment(g.getData())}updatePopupColor(g){var et;(et=Ht(this,Vs))==null||et.updatePopupColor(g)}removeComment(g){var et;(et=Ht(this,Vs))==null||et.removeComments([g.uid])}toggleComment(g,et,ot=void 0){var ct;(ct=Ht(this,Vs))==null||ct.toggleCommentPopup(g,et,ot)}makeCommentColor(g,et){var ot;return g&&((ot=Ht(this,Vs))==null?void 0:ot.makeCommentColor(g,et))||null}getCommentDialogElement(){var g;return((g=Ht(this,Vs))==null?void 0:g.dialogElement)||null}async waitForEditorsRendered(g){if(Ht(this,hs).has(g-1))return;const{resolve:et,promise:ot}=Promise.withResolvers(),ct=ut=>{ut.pageNumber===g&&(this._eventBus._off("editorsrendered",ct),et())};this._eventBus.on("editorsrendered",ct),await ot}getSignature(g){var et;(et=Ht(this,Hp))==null||et.getSignature({uiManager:this,editor:g})}get signatureManager(){return Ht(this,Hp)}switchToMode(g,et){this._eventBus.on("annotationeditormodechanged",et,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:g})}setPreference(g,et){this._eventBus.dispatch("setpreference",{source:this,name:g,value:et})}onSetPreference({name:g,value:et}){switch(g){case"enableNewAltTextWhenAddingImage":xn(this,n1,et);break}}onPageChanging({pageNumber:g}){xn(this,t1,g-1)}focusMainContainer(){Ht(this,$u).focus()}findParent(g,et){for(const ot of Ht(this,hs).values()){const{x:ct,y:ut,width:dt,height:ft}=ot.div.getBoundingClientRect();if(g>=ct&&g<=ct+dt&&et>=ut&&et<=ut+ft)return ot}return null}disableUserSelect(g=!1){Ht(this,Gx).classList.toggle("noUserSelect",g)}addShouldRescale(g){Ht(this,Xm).add(g)}removeShouldRescale(g){Ht(this,Xm).delete(g)}onScaleChanging({scale:g}){var et;this.commitOrRemove(),this.viewParameters.realScale=g*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ot of Ht(this,Xm))ot.onScaleChanging();(et=Ht(this,Lp))==null||et.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}highlightSelection(g="",et=!1){const ot=document.getSelection();if(!ot||ot.isCollapsed)return;const{anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft}=ot,St=ot.toString(),Tt=An(this,a1,tw).call(this,ot).closest(".textLayer"),jt=this.getSelectionBoxes(Tt);if(!jt)return;ot.empty();const Rt=An(this,qx,V_).call(this,Tt),Ft=Ht(this,ss)===AnnotationEditorType.NONE,$t=()=>{const zt=Rt==null?void 0:Rt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:g,boxes:jt,anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft,text:St});Ft&&this.showAllEditors("highlight",!0,!0),et&&(zt==null||zt.editComment())};if(Ft){this.switchToMode(AnnotationEditorType.HIGHLIGHT,$t);return}$t()}commentSelection(g=""){this.highlightSelection(g,!0)}getAndRemoveDataFromAnnotationStorage(g){if(!Ht(this,Jo))return null;const et=`${AnnotationEditorPrefix}${g}`,ot=Ht(this,Jo).getRawValue(et);return ot&&Ht(this,Jo).remove(et),ot}addToAnnotationStorage(g){!g.isEmpty()&&Ht(this,Jo)&&!Ht(this,Jo).has(g.id)&&Ht(this,Jo).setValue(g.id,g)}a11yAlert(g,et=null){const ot=Ht(this,Wx);ot&&(ot.setAttribute("data-l10n-id",g),et?ot.setAttribute("data-l10n-args",JSON.stringify(et)):ot.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Ht(this,$p)&&(xn(this,$p,!1),An(this,Qm,hx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:g}=document;for(const et of Ht(this,Ar))if(et.div.contains(g)){xn(this,Jm,[et,g]),et._focusEventsAllowed=!1;break}}focus(){if(!Ht(this,Jm))return;const[g,et]=Ht(this,Jm);xn(this,Jm,null),et.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:this._signal}),et.focus()}addEditListeners(){An(this,Kx,z_).call(this),An(this,Yx,H_).call(this)}removeEditListeners(){An(this,Ww,t3).call(this),An(this,Xx,U_).call(this)}dragOver(g){for(const{type:et}of g.dataTransfer.items)for(const ot of Ht(this,Zo))if(ot.isHandlingMimeForPasting(et)){g.dataTransfer.dropEffect="copy",g.preventDefault();return}}drop(g){for(const et of g.dataTransfer.items)for(const ot of Ht(this,Zo))if(ot.isHandlingMimeForPasting(et.type)){ot.paste(et,this.currentLayer),g.preventDefault();return}}copy(g){var ot;if(g.preventDefault(),(ot=Ht(this,So))==null||ot.commitOrRemove(),!this.hasSelection)return;const et=[];for(const ct of Ht(this,Ar)){const ut=ct.serialize(!0);ut&&et.push(ut)}et.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(et))}cut(g){this.copy(g),this.delete()}async paste(g){g.preventDefault();const{clipboardData:et}=g;for(const ut of et.items)for(const dt of Ht(this,Zo))if(dt.isHandlingMimeForPasting(ut.type)){dt.paste(ut,this.currentLayer);return}let ot=et.getData("application/pdfjs");if(!ot)return;try{ot=JSON.parse(ot)}catch(ut){warn(`paste: "${ut.message}".`);return}if(!Array.isArray(ot))return;this.unselectAll();const ct=this.currentLayer;try{const ut=[];for(const St of ot){const kt=await ct.deserialize(St);if(!kt)return;ut.push(kt)}const dt=()=>{for(const St of ut)An(this,Jx,G_).call(this,St);An(this,Qx,W_).call(this,ut)},ft=()=>{for(const St of ut)St.remove()};this.addCommands({cmd:dt,undo:ft,mustExec:!0})}catch(ut){warn(`paste: "${ut.message}".`)}}keydown(g){!this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!0),Ht(this,ss)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&zy._keyboardManager.exec(this,g)}keyup(g){this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!1,Ht(this,$p)&&(xn(this,$p,!1),An(this,Qm,hx).call(this,"main_toolbar")))}onEditingAction({name:g}){switch(g){case"undo":case"redo":case"delete":case"selectAll":this[g]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(g){g?(An(this,Uw,ZP).call(this),An(this,Yx,H_).call(this),An(this,Cs,qs).call(this,{isEditing:Ht(this,ss)!==AnnotationEditorType.NONE,isEmpty:An(this,Zm,dx).call(this),hasSomethingToUndo:Ht(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:Ht(this,Qo).hasSomethingToRedo(),hasSelectedEditor:!1})):(An(this,Gw,e3).call(this),An(this,Xx,U_).call(this),An(this,Cs,qs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!Ht(this,Zo)){xn(this,Zo,g);for(const et of Ht(this,Zo))An(this,Pl,Ou).call(this,et.defaultPropertiesToUpdate)}}getId(){return Ht(this,Bw).id}get currentLayer(){return Ht(this,hs).get(Ht(this,t1))}getLayer(g){return Ht(this,hs).get(g)}get currentPageIndex(){return Ht(this,t1)}addLayer(g){Ht(this,hs).set(g.pageIndex,g),Ht(this,Bp)?g.enable():g.disable()}removeLayer(g){Ht(this,hs).delete(g.pageIndex)}async updateMode(g,et=null,ot=!1,ct=!1,ut=!1){var dt,ft,St,kt,Tt,jt;if(Ht(this,ss)!==g&&!(Ht(this,na)&&(await Ht(this,na).promise,!Ht(this,na)))){if(xn(this,na,Promise.withResolvers()),(dt=Ht(this,Lp))==null||dt.commitOrRemove(),Ht(this,ss)===AnnotationEditorType.POPUP&&((ft=Ht(this,Vs))==null||ft.hideSidebar()),(St=Ht(this,Vs))==null||St.destroyPopup(),xn(this,ss,g),g===AnnotationEditorType.NONE){this.setEditingState(!1),An(this,Yw,i3).call(this);for(const Rt of Ht(this,Jr).values())Rt.hideStandaloneCommentButton();(kt=this._editorUndoBar)==null||kt.hide(),this.toggleComment(null),Ht(this,na).resolve();return}for(const Rt of Ht(this,Jr).values())Rt.addStandaloneCommentButton();g===AnnotationEditorType.SIGNATURE&&await((Tt=Ht(this,Hp))==null?void 0:Tt.loadSignatures()),this.setEditingState(!0),await An(this,Kw,r3).call(this),this.unselectAll();for(const Rt of Ht(this,hs).values())Rt.updateMode(g);if(g===AnnotationEditorType.POPUP){Ht(this,Qy)||xn(this,Qy,await Ht(this,o1).getAnnotationsByType(new Set(Ht(this,Zo).map($t=>$t._editorType))));const Rt=new Set,Ft=[];for(const $t of Ht(this,Jr).values()){const{annotationElementId:zt,hasComment:Kt,deleted:Bt}=$t;zt&&Rt.add(zt),Kt&&!Bt&&Ft.push($t.getData())}for(const $t of Ht(this,Qy)){const{id:zt,popupRef:Kt,contentsObj:Bt}=$t;Kt&&(Bt!=null&&Bt.str)&&!Rt.has(zt)&&!Ht(this,jp).has(zt)&&Ft.push($t)}(jt=Ht(this,Vs))==null||jt.showSidebar(Ft)}if(!et){ot&&this.addNewEditorFromKeyboard(),Ht(this,na).resolve();return}for(const Rt of Ht(this,Jr).values())Rt.uid===et?(this.setSelected(Rt),ut?Rt.editComment():ct?Rt.enterInEditMode():Rt.focus()):Rt.unselect();Ht(this,na).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(g){g.mode!==Ht(this,ss)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...g})}updateParams(g,et){if(Ht(this,Zo)){switch(g){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(et);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Ht(this,Hx)||xn(this,Hx,new Map)).set(g,et),this.showAllEditors("highlight",et);break}if(this.hasSelection)for(const ot of Ht(this,Ar))ot.updateParams(g,et);else for(const ot of Ht(this,Zo))ot.updateDefaultParams(g,et)}}showAllEditors(g,et,ot=!1){var ut;for(const dt of Ht(this,Jr).values())dt.editorType===g&&dt.show(et);(((ut=Ht(this,Hx))==null?void 0:ut.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==et&&An(this,Pl,Ou).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,et]])}enableWaiting(g=!1){if(Ht(this,Vx)!==g){xn(this,Vx,g);for(const et of Ht(this,hs).values())g?et.disableClick():et.enableClick(),et.div.classList.toggle("waiting",g)}}*getEditors(g){for(const et of Ht(this,Jr).values())et.pageIndex===g&&(yield et)}getEditor(g){return Ht(this,Jr).get(g)}addEditor(g){Ht(this,Jr).set(g.id,g)}removeEditor(g){var et,ot;g.div.contains(document.activeElement)&&(Ht(this,ru)&&clearTimeout(Ht(this,ru)),xn(this,ru,setTimeout(()=>{this.focusMainContainer(),xn(this,ru,null)},0))),Ht(this,Jr).delete(g.id),g.annotationElementId&&((et=Ht(this,zp))==null||et.delete(g.annotationElementId)),this.unselect(g),(!g.annotationElementId||!Ht(this,jp).has(g.annotationElementId))&&((ot=Ht(this,Jo))==null||ot.remove(g.id))}addDeletedAnnotationElement(g){Ht(this,jp).add(g.annotationElementId),this.addChangedExistingAnnotation(g),g.deleted=!0}isDeletedAnnotationElement(g){return Ht(this,jp).has(g)}removeDeletedAnnotationElement(g){Ht(this,jp).delete(g.annotationElementId),this.removeChangedExistingAnnotation(g),g.deleted=!1}setActiveEditor(g){Ht(this,So)!==g&&(xn(this,So,g),g&&An(this,Pl,Ou).call(this,g.propertiesToUpdate))}updateUI(g){Ht(this,Xw,s3)===g&&An(this,Pl,Ou).call(this,g.propertiesToUpdate)}updateUIForDefaultProperties(g){An(this,Pl,Ou).call(this,g.defaultPropertiesToUpdate)}toggleSelected(g){if(Ht(this,Ar).has(g)){Ht(this,Ar).delete(g),g.unselect(),An(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection});return}Ht(this,Ar).add(g),g.select(),An(this,Pl,Ou).call(this,g.propertiesToUpdate),An(this,Cs,qs).call(this,{hasSelectedEditor:!0})}setSelected(g){var et;this.updateToolbar({mode:g.mode,editId:g.id}),(et=Ht(this,Lp))==null||et.commitOrRemove();for(const ot of Ht(this,Ar))ot!==g&&ot.unselect();Ht(this,Ar).clear(),Ht(this,Ar).add(g),g.select(),An(this,Pl,Ou).call(this,g.propertiesToUpdate),An(this,Cs,qs).call(this,{hasSelectedEditor:!0})}isSelected(g){return Ht(this,Ar).has(g)}get firstSelectedEditor(){return Ht(this,Ar).values().next().value}unselect(g){g.unselect(),Ht(this,Ar).delete(g),An(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Ht(this,Ar).size!==0}get isEnterHandled(){return Ht(this,Ar).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var g;Ht(this,Qo).undo(),An(this,Cs,qs).call(this,{hasSomethingToUndo:Ht(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:An(this,Zm,dx).call(this)}),(g=this._editorUndoBar)==null||g.hide()}redo(){Ht(this,Qo).redo(),An(this,Cs,qs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Ht(this,Qo).hasSomethingToRedo(),isEmpty:An(this,Zm,dx).call(this)})}addCommands(g){Ht(this,Qo).add(g),An(this,Cs,qs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:An(this,Zm,dx).call(this)})}cleanUndoStack(g){Ht(this,Qo).cleanType(g)}delete(){var ut;this.commitOrRemove();const g=(ut=this.currentLayer)==null?void 0:ut.endDrawingSession(!0);if(!this.hasSelection&&!g)return;const et=g?[g]:[...Ht(this,Ar)],ot=()=>{var dt;(dt=this._editorUndoBar)==null||dt.show(ct,et.length===1?et[0].editorType:et.length);for(const ft of et)ft.remove()},ct=()=>{for(const dt of et)An(this,Jx,G_).call(this,dt)};this.addCommands({cmd:ot,undo:ct,mustExec:!0})}commitOrRemove(){var g;(g=Ht(this,So))==null||g.commitOrRemove()}hasSomethingToControl(){return Ht(this,So)||this.hasSelection}selectAll(){for(const g of Ht(this,Ar))g.commit();An(this,Qx,W_).call(this,Ht(this,Jr).values())}unselectAll(){var g;if(!(Ht(this,So)&&(Ht(this,So).commitOrRemove(),Ht(this,ss)!==AnnotationEditorType.NONE))&&!((g=Ht(this,Lp))!=null&&g.commitOrRemove())&&this.hasSelection){for(const et of Ht(this,Ar))et.unselect();Ht(this,Ar).clear(),An(this,Cs,qs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(g,et,ot=!1){if(ot||this.commitOrRemove(),!this.hasSelection)return;Ht(this,Gp)[0]+=g,Ht(this,Gp)[1]+=et;const[ct,ut]=Ht(this,Gp),dt=[...Ht(this,Ar)],ft=1e3;Ht(this,su)&&clearTimeout(Ht(this,su)),xn(this,su,setTimeout(()=>{xn(this,su,null),Ht(this,Gp)[0]=Ht(this,Gp)[1]=0,this.addCommands({cmd:()=>{for(const St of dt)Ht(this,Jr).has(St.id)&&(St.translateInPage(ct,ut),St.translationDone())},undo:()=>{for(const St of dt)Ht(this,Jr).has(St.id)&&(St.translateInPage(-ct,-ut),St.translationDone())},mustExec:!1})},ft));for(const St of dt)St.translateInPage(g,et),St.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),xn(this,nu,new Map);for(const g of Ht(this,Ar))Ht(this,nu).set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Ht(this,nu))return!1;this.disableUserSelect(!1);const g=Ht(this,nu);xn(this,nu,null);let et=!1;for(const[{x:ct,y:ut,pageIndex:dt},ft]of g)ft.newX=ct,ft.newY=ut,ft.newPageIndex=dt,et||(et=ct!==ft.savedX||ut!==ft.savedY||dt!==ft.savedPageIndex);if(!et)return!1;const ot=(ct,ut,dt,ft)=>{if(Ht(this,Jr).has(ct.id)){const St=Ht(this,hs).get(ft);St?ct._setParentAndPosition(St,ut,dt):(ct.pageIndex=ft,ct.x=ut,ct.y=dt)}};return this.addCommands({cmd:()=>{for(const[ct,{newX:ut,newY:dt,newPageIndex:ft}]of g)ot(ct,ut,dt,ft)},undo:()=>{for(const[ct,{savedX:ut,savedY:dt,savedPageIndex:ft}]of g)ot(ct,ut,dt,ft)},mustExec:!0}),!0}dragSelectedEditors(g,et){if(Ht(this,nu))for(const ot of Ht(this,nu).keys())ot.drag(g,et)}rebuild(g){if(g.parent===null){const et=this.getLayer(g.pageIndex);et?(et.changeParent(g),et.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}get isEditorHandlingKeyboard(){var g;return((g=this.getActive())==null?void 0:g.shouldGetKeyboardEvents())||Ht(this,Ar).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(g){return Ht(this,So)===g}getActive(){return Ht(this,So)}getMode(){return Ht(this,ss)}isEditingMode(){return Ht(this,ss)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(g){if(!g)return null;const et=document.getSelection();for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++)if(!g.contains(et.getRangeAt(kt).commonAncestorContainer))return null;const{x:ot,y:ct,width:ut,height:dt}=g.getBoundingClientRect();let ft;switch(g.getAttribute("data-main-rotation")){case"90":ft=(kt,Tt,jt,Rt)=>({x:(Tt-ct)/dt,y:1-(kt+jt-ot)/ut,width:Rt/dt,height:jt/ut});break;case"180":ft=(kt,Tt,jt,Rt)=>({x:1-(kt+jt-ot)/ut,y:1-(Tt+Rt-ct)/dt,width:jt/ut,height:Rt/dt});break;case"270":ft=(kt,Tt,jt,Rt)=>({x:1-(Tt+Rt-ct)/dt,y:(kt-ot)/ut,width:Rt/dt,height:jt/ut});break;default:ft=(kt,Tt,jt,Rt)=>({x:(kt-ot)/ut,y:(Tt-ct)/dt,width:jt/ut,height:Rt/dt});break}const St=[];for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++){const jt=et.getRangeAt(kt);if(!jt.collapsed)for(const{x:Rt,y:Ft,width:$t,height:zt}of jt.getClientRects())$t===0||zt===0||St.push(ft(Rt,Ft,$t,zt))}return St.length===0?null:St}addChangedExistingAnnotation({annotationElementId:g,id:et}){(Ht(this,e1)||xn(this,e1,new Map)).set(g,et)}removeChangedExistingAnnotation({annotationElementId:g}){var et;(et=Ht(this,e1))==null||et.delete(g)}renderAnnotationElement(g){var ct;const et=(ct=Ht(this,e1))==null?void 0:ct.get(g.data.id);if(!et)return;const ot=Ht(this,Jo).getRawValue(et);ot&&(Ht(this,ss)===AnnotationEditorType.NONE&&!ot.hasBeenModified||ot.renderAnnotationElement(g))}setMissingCanvas(g,et,ot){var ut;const ct=(ut=Ht(this,zp))==null?void 0:ut.get(g);ct&&(ct.setCanvas(et,ot),Ht(this,zp).delete(g))}addMissingCanvas(g,et){(Ht(this,zp)||xn(this,zp,new Map)).set(g,et)}};Jy=new WeakMap,So=new WeakMap,Qy=new WeakMap,Jr=new WeakMap,hs=new WeakMap,Zy=new WeakMap,Jo=new WeakMap,e1=new WeakMap,Qo=new WeakMap,Vs=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,t1=new WeakMap,jp=new WeakMap,nu=new WeakMap,Zo=new WeakMap,Xm=new WeakMap,Fx=new WeakMap,$x=new WeakMap,n1=new WeakMap,Bx=new WeakMap,ru=new WeakMap,Fp=new WeakMap,r1=new WeakMap,$p=new WeakMap,iu=new WeakMap,Bw=new WeakMap,Bp=new WeakMap,i1=new WeakMap,Vx=new WeakMap,Vp=new WeakMap,Jm=new WeakMap,s1=new WeakMap,zp=new WeakMap,zx=new WeakMap,ss=new WeakMap,Ar=new WeakMap,Fu=new WeakMap,Hp=new WeakMap,Up=new WeakMap,Hx=new WeakMap,o1=new WeakMap,Ux=new WeakMap,Gp=new WeakMap,su=new WeakMap,$u=new WeakMap,Gx=new WeakMap,Wx=new WeakMap,na=new WeakMap,a1=new WeakSet,tw=function({anchorNode:g}){return g.nodeType===Node.TEXT_NODE?g.parentElement:g},qx=new WeakSet,V_=function(g){const{currentLayer:et}=this;if(et.hasTextLayer(g))return et;for(const ot of Ht(this,hs).values())if(ot.hasTextLayer(g))return ot;return null},Vw=new WeakSet,XP=function(){const g=document.getSelection();if(!g||g.isCollapsed)return;const ot=An(this,a1,tw).call(this,g).closest(".textLayer"),ct=this.getSelectionBoxes(ot);ct&&(Ht(this,iu)||xn(this,iu,new FloatingToolbar(this)),Ht(this,iu).show(ot,ct,this.direction==="ltr"))},zw=new WeakSet,JP=function(){var ut,dt,ft;const g=document.getSelection();if(!g||g.isCollapsed){Ht(this,Fu)&&((ut=Ht(this,iu))==null||ut.hide(),xn(this,Fu,null),An(this,Cs,qs).call(this,{hasSelectedText:!1}));return}const{anchorNode:et}=g;if(et===Ht(this,Fu))return;const ct=An(this,a1,tw).call(this,g).closest(".textLayer");if(!ct){Ht(this,Fu)&&((dt=Ht(this,iu))==null||dt.hide(),xn(this,Fu,null),An(this,Cs,qs).call(this,{hasSelectedText:!1}));return}if((ft=Ht(this,iu))==null||ft.hide(),xn(this,Fu,et),An(this,Cs,qs).call(this,{hasSelectedText:!0}),!(Ht(this,ss)!==AnnotationEditorType.HIGHLIGHT&&Ht(this,ss)!==AnnotationEditorType.NONE)&&(Ht(this,ss)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),xn(this,$p,this.isShiftKeyDown),!this.isShiftKeyDown)){const St=Ht(this,ss)===AnnotationEditorType.HIGHLIGHT?An(this,qx,V_).call(this,ct):null;if(St==null||St.toggleDrawing(),Ht(this,i1)){const kt=new AbortController,Tt=this.combinedSignal(kt),jt=Rt=>{Rt.type==="pointerup"&&Rt.button!==0||(kt.abort(),St==null||St.toggleDrawing(!0),Rt.type==="pointerup"&&An(this,Qm,hx).call(this,"main_toolbar"))};window.addEventListener("pointerup",jt,{signal:Tt}),window.addEventListener("blur",jt,{signal:Tt})}else St==null||St.toggleDrawing(!0),An(this,Qm,hx).call(this,"main_toolbar")}},Qm=new WeakSet,hx=function(g=""){Ht(this,ss)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(g):Ht(this,Fx)&&An(this,Vw,XP).call(this)},Hw=new WeakSet,QP=function(){document.addEventListener("selectionchange",An(this,zw,JP).bind(this),{signal:this._signal})},Uw=new WeakSet,ZP=function(){if(Ht(this,Fp))return;xn(this,Fp,new AbortController);const g=this.combinedSignal(Ht(this,Fp));window.addEventListener("focus",this.focus.bind(this),{signal:g}),window.addEventListener("blur",this.blur.bind(this),{signal:g})},Gw=new WeakSet,e3=function(){var g;(g=Ht(this,Fp))==null||g.abort(),xn(this,Fp,null)},Kx=new WeakSet,z_=function(){if(Ht(this,Vp))return;xn(this,Vp,new AbortController);const g=this.combinedSignal(Ht(this,Vp));window.addEventListener("keydown",this.keydown.bind(this),{signal:g}),window.addEventListener("keyup",this.keyup.bind(this),{signal:g})},Ww=new WeakSet,t3=function(){var g;(g=Ht(this,Vp))==null||g.abort(),xn(this,Vp,null)},Yx=new WeakSet,H_=function(){if(Ht(this,Dp))return;xn(this,Dp,new AbortController);const g=this.combinedSignal(Ht(this,Dp));document.addEventListener("copy",this.copy.bind(this),{signal:g}),document.addEventListener("cut",this.cut.bind(this),{signal:g}),document.addEventListener("paste",this.paste.bind(this),{signal:g})},Xx=new WeakSet,U_=function(){var g;(g=Ht(this,Dp))==null||g.abort(),xn(this,Dp,null)},qw=new WeakSet,n3=function(){const g=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:g}),document.addEventListener("drop",this.drop.bind(this),{signal:g})},Cs=new WeakSet,qs=function(g){Object.entries(g).some(([ot,ct])=>Ht(this,Ux)[ot]!==ct)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Ht(this,Ux),g)}),Ht(this,ss)===AnnotationEditorType.HIGHLIGHT&&g.hasSelectedEditor===!1&&An(this,Pl,Ou).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Pl=new WeakSet,Ou=function(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})},Kw=new WeakSet,r3=async function(){if(!Ht(this,Bp)){xn(this,Bp,!0);const g=[];for(const et of Ht(this,hs).values())g.push(et.enable());await Promise.all(g);for(const et of Ht(this,Jr).values())et.enable()}},Yw=new WeakSet,i3=function(){if(this.unselectAll(),Ht(this,Bp)){xn(this,Bp,!1);for(const g of Ht(this,hs).values())g.disable();for(const g of Ht(this,Jr).values())g.disable()}},Jx=new WeakSet,G_=function(g){const et=Ht(this,hs).get(g.pageIndex);et?et.addOrRebuild(g):(this.addEditor(g),this.addToAnnotationStorage(g))},Xw=new WeakSet,s3=function(){let g=null;for(g of Ht(this,Ar));return g},Zm=new WeakSet,dx=function(){if(Ht(this,Jr).size===0)return!0;if(Ht(this,Jr).size===1)for(const g of Ht(this,Jr).values())return g.isEmpty();return!1},Qx=new WeakSet,W_=function(g){for(const et of Ht(this,Ar))et.unselect();Ht(this,Ar).clear();for(const et of g)et.isEmpty()||(Ht(this,Ar).add(et),et.select());An(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection})},qn(zy,"TRANSLATE_SMALL",1),qn(zy,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=zy;var ys,ou,Ml,l1,au,wo,c1,lu,ho,Bu,_g,cu,Wp,e0,fx,u1,nw;const Ks=class Ks{constructor(g){vn(this,e0);vn(this,u1);vn(this,ys,null);vn(this,ou,!1);vn(this,Ml,null);vn(this,l1,null);vn(this,au,null);vn(this,wo,null);vn(this,c1,!1);vn(this,lu,null);vn(this,ho,null);vn(this,Bu,null);vn(this,_g,null);vn(this,cu,!1);xn(this,ho,g),xn(this,cu,g._uiManager.useNewAltTextFlow),Ht(Ks,Wp)||xn(Ks,Wp,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(g){Ks._l10n??(Ks._l10n=g)}async render(){const g=xn(this,Ml,document.createElement("button"));g.className="altText",g.tabIndex="0";const et=xn(this,l1,document.createElement("span"));g.append(et),Ht(this,cu)?(g.classList.add("new"),g.setAttribute("data-l10n-id",Ht(Ks,Wp).missing),et.setAttribute("data-l10n-id",Ht(Ks,Wp)["missing-label"])):(g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const ot=Ht(this,ho)._uiManager._signal;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),Ht(this,ho)._uiManager.editAltText(Ht(this,ho)),Ht(this,cu)&&Ht(this,ho)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Ht(this,e0,fx)}})};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(xn(this,c1,!0),ct(ut))},{signal:ot}),await An(this,u1,nw).call(this),g}finish(){Ht(this,Ml)&&(Ht(this,Ml).focus({focusVisible:Ht(this,c1)}),xn(this,c1,!1))}isEmpty(){return Ht(this,cu)?Ht(this,ys)===null:!Ht(this,ys)&&!Ht(this,ou)}hasData(){return Ht(this,cu)?Ht(this,ys)!==null||!!Ht(this,Bu):this.isEmpty()}get guessedText(){return Ht(this,Bu)}async setGuessedText(g){Ht(this,ys)===null&&(xn(this,Bu,g),xn(this,_g,await Ks._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:g})),An(this,u1,nw).call(this))}toggleAltTextBadge(g=!1){var et;if(!Ht(this,cu)||Ht(this,ys)){(et=Ht(this,lu))==null||et.remove(),xn(this,lu,null);return}if(!Ht(this,lu)){const ot=xn(this,lu,document.createElement("div"));ot.className="noAltTextBadge",Ht(this,ho).div.append(ot)}Ht(this,lu).classList.toggle("hidden",!g)}serialize(g){let et=Ht(this,ys);return!g&&Ht(this,Bu)===et&&(et=Ht(this,_g)),{altText:et,decorative:Ht(this,ou),guessedText:Ht(this,Bu),textWithDisclaimer:Ht(this,_g)}}get data(){return{altText:Ht(this,ys),decorative:Ht(this,ou)}}set data({altText:g,decorative:et,guessedText:ot,textWithDisclaimer:ct,cancel:ut=!1}){ot&&(xn(this,Bu,ot),xn(this,_g,ct)),!(Ht(this,ys)===g&&Ht(this,ou)===et)&&(ut||(xn(this,ys,g),xn(this,ou,et)),An(this,u1,nw).call(this))}toggle(g=!1){Ht(this,Ml)&&(!g&&Ht(this,wo)&&(clearTimeout(Ht(this,wo)),xn(this,wo,null)),Ht(this,Ml).disabled=!g)}shown(){Ht(this,ho)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Ht(this,e0,fx)}})}destroy(){var g,et;(g=Ht(this,Ml))==null||g.remove(),xn(this,Ml,null),xn(this,l1,null),xn(this,au,null),(et=Ht(this,lu))==null||et.remove(),xn(this,lu,null)}};ys=new WeakMap,ou=new WeakMap,Ml=new WeakMap,l1=new WeakMap,au=new WeakMap,wo=new WeakMap,c1=new WeakMap,lu=new WeakMap,ho=new WeakMap,Bu=new WeakMap,_g=new WeakMap,cu=new WeakMap,Wp=new WeakMap,e0=new WeakSet,fx=function(){return Ht(this,ys)&&"added"||Ht(this,ys)===null&&this.guessedText&&"review"||"missing"},u1=new WeakSet,nw=async function(){var ct,ut,dt;const g=Ht(this,Ml);if(!g)return;if(Ht(this,cu)){if(g.classList.toggle("done",!!Ht(this,ys)),g.setAttribute("data-l10n-id",Ht(Ks,Wp)[Ht(this,e0,fx)]),(ct=Ht(this,l1))==null||ct.setAttribute("data-l10n-id",Ht(Ks,Wp)[`${Ht(this,e0,fx)}-label`]),!Ht(this,ys)){(ut=Ht(this,au))==null||ut.remove();return}}else{if(!Ht(this,ys)&&!Ht(this,ou)){g.classList.remove("done"),(dt=Ht(this,au))==null||dt.remove();return}g.classList.add("done"),g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let et=Ht(this,au);if(!et){xn(this,au,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip"),et.id=`alt-text-tooltip-${Ht(this,ho).id}`;const ft=100,St=Ht(this,ho)._uiManager._signal;St.addEventListener("abort",()=>{clearTimeout(Ht(this,wo)),xn(this,wo,null)},{once:!0}),g.addEventListener("mouseenter",()=>{xn(this,wo,setTimeout(()=>{xn(this,wo,null),Ht(this,au).classList.add("show"),Ht(this,ho)._reportTelemetry({action:"alt_text_tooltip"})},ft))},{signal:St}),g.addEventListener("mouseleave",()=>{var kt;Ht(this,wo)&&(clearTimeout(Ht(this,wo)),xn(this,wo,null)),(kt=Ht(this,au))==null||kt.classList.remove("show")},{signal:St})}Ht(this,ou)?et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(et.removeAttribute("data-l10n-id"),et.textContent=Ht(this,ys)),et.parentNode||g.append(et);const ot=Ht(this,ho).getElementForAltText();ot==null||ot.setAttribute("aria-describedby",et.id)},vn(Ks,Wp,null),qn(Ks,"_l10n",null);let AltText=Ks;var Rs,ga,t0,$r,Zx,n0,Ol,r0,i0,s0,eE,q_;class Comment{constructor(g){vn(this,eE);vn(this,Rs,null);vn(this,ga,null);vn(this,t0,!1);vn(this,$r,null);vn(this,Zx,null);vn(this,n0,null);vn(this,Ol,null);vn(this,r0,null);vn(this,i0,!1);vn(this,s0,null);xn(this,$r,g)}renderForToolbar(){const g=xn(this,ga,document.createElement("button"));return g.className="comment",An(this,eE,q_).call(this,g,!1)}renderForStandalone(){const g=xn(this,Rs,document.createElement("button"));g.className="annotationCommentButton";const et=Ht(this,$r).commentButtonPosition;if(et){const{style:ot}=g;ot.insetInlineEnd=`calc(${100*(Ht(this,$r)._uiManager.direction==="ltr"?1-et[0]:et[0])}% - var(--comment-button-dim))`,ot.top=`calc(${100*et[1]}% - var(--comment-button-dim))`;const ct=Ht(this,$r).commentButtonColor;ct&&(ot.backgroundColor=ct)}return An(this,eE,q_).call(this,g,!0)}focusButton(){setTimeout(()=>{var g;(g=Ht(this,Rs)??Ht(this,ga))==null||g.focus()},0)}onUpdatedColor(){if(!Ht(this,Rs))return;const g=Ht(this,$r).commentButtonColor;g&&(Ht(this,Rs).style.backgroundColor=g),Ht(this,$r)._uiManager.updatePopupColor(Ht(this,$r))}get commentButtonWidth(){var g;return(((g=Ht(this,Rs))==null?void 0:g.getBoundingClientRect().width)??0)/Ht(this,$r).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Ht(this,s0))return Ht(this,s0);if(!Ht(this,Rs))return null;const{x:g,y:et,height:ot}=Ht(this,Rs).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=Ht(this,$r).parent.boundingClientRect;return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPositionInLayer(g){xn(this,s0,g)}hasDefaultPopupPosition(){return Ht(this,s0)===null}removeStandaloneCommentButton(){var g;(g=Ht(this,Rs))==null||g.remove(),xn(this,Rs,null)}removeToolbarCommentButton(){var g;(g=Ht(this,ga))==null||g.remove(),xn(this,ga,null)}setCommentButtonStates({selected:g,hasPopup:et}){Ht(this,Rs)&&(Ht(this,Rs).classList.toggle("selected",g),Ht(this,Rs).ariaExpanded=et)}edit(g){const et=this.commentPopupPositionInLayer;let ot,ct;if(et)[ot,ct]=et;else{[ot,ct]=Ht(this,$r).commentButtonPosition;const{width:Tt,height:jt,x:Rt,y:Ft}=Ht(this,$r);ot=Rt+ot*Tt,ct=Ft+ct*jt}const ut=Ht(this,$r).parent.boundingClientRect,{x:dt,y:ft,width:St,height:kt}=ut;Ht(this,$r)._uiManager.editComment(Ht(this,$r),dt+ot*St,ft+ct*kt,{...g,parentDimensions:ut})}finish(){Ht(this,ga)&&(Ht(this,ga).focus({focusVisible:Ht(this,t0)}),xn(this,t0,!1))}isDeleted(){return Ht(this,i0)||Ht(this,Ol)===""}isEmpty(){return Ht(this,Ol)===null}hasBeenEdited(){return this.isDeleted()||Ht(this,Ol)!==Ht(this,Zx)}serialize(){return this.data}get data(){return{text:Ht(this,Ol),richText:Ht(this,n0),date:Ht(this,r0),deleted:this.isDeleted()}}set data(g){if(g!==Ht(this,Ol)&&xn(this,n0,null),g===null){xn(this,Ol,""),xn(this,i0,!0);return}xn(this,Ol,g),xn(this,r0,new Date),xn(this,i0,!1)}setInitialText(g,et=null){xn(this,Zx,g),this.data=g,xn(this,r0,null),xn(this,n0,et)}shown(){}destroy(){var g,et;(g=Ht(this,ga))==null||g.remove(),xn(this,ga,null),(et=Ht(this,Rs))==null||et.remove(),xn(this,Rs,null),xn(this,Ol,""),xn(this,n0,null),xn(this,r0,null),xn(this,$r,null),xn(this,t0,!1),xn(this,i0,!1)}}Rs=new WeakMap,ga=new WeakMap,t0=new WeakMap,$r=new WeakMap,Zx=new WeakMap,n0=new WeakMap,Ol=new WeakMap,r0=new WeakMap,i0=new WeakMap,s0=new WeakMap,eE=new WeakSet,q_=function(g,et){if(!Ht(this,$r)._uiManager.hasCommentManager())return null;g.tabIndex="0",g.ariaHasPopup="dialog",et?(g.ariaControls="commentPopup",g.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(g.ariaControlsElements=[Ht(this,$r)._uiManager.getCommentDialogElement()],g.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const ot=Ht(this,$r)._uiManager._signal;if(!(ot instanceof AbortSignal)||ot.aborted)return g;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),et&&(g.addEventListener("focusin",ut=>{Ht(this,$r)._focusEventsAllowed=!1,stopEvent(ut)},{capture:!0,signal:ot}),g.addEventListener("focusout",ut=>{Ht(this,$r)._focusEventsAllowed=!0,stopEvent(ut)},{capture:!0,signal:ot})),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),g===Ht(this,ga)?this.edit():Ht(this,$r).toggleComment(!0)};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(xn(this,t0,!0),ct(ut))},{signal:ot}),g.addEventListener("pointerenter",()=>{Ht(this,$r).toggleComment(!1,!0)},{signal:ot}),g.addEventListener("pointerleave",()=>{Ht(this,$r).toggleComment(!1,!1)},{signal:ot}),g};var h1,o0,tE,nE,rE,iE,sE,Vu,a0,zu,l0,Hu,Jw,o3,Qw,a3,Zw,l3;const UC=class UC{constructor({container:g,isPinchingDisabled:et=null,isPinchingStopped:ot=null,onPinchStart:ct=null,onPinching:ut=null,onPinchEnd:dt=null,signal:ft}){vn(this,Jw);vn(this,Qw);vn(this,Zw);vn(this,h1,void 0);vn(this,o0,!1);vn(this,tE,null);vn(this,nE,void 0);vn(this,rE,void 0);vn(this,iE,void 0);vn(this,sE,void 0);vn(this,Vu,null);vn(this,a0,void 0);vn(this,zu,null);vn(this,l0,void 0);vn(this,Hu,null);xn(this,h1,g),xn(this,tE,ot),xn(this,nE,et),xn(this,rE,ct),xn(this,iE,ut),xn(this,sE,dt),xn(this,l0,new AbortController),xn(this,a0,AbortSignal.any([ft,Ht(this,l0).signal])),g.addEventListener("touchstart",An(this,Jw,o3).bind(this),{passive:!1,signal:Ht(this,a0)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var g,et;(g=Ht(this,l0))==null||g.abort(),xn(this,l0,null),(et=Ht(this,Vu))==null||et.abort(),xn(this,Vu,null)}};h1=new WeakMap,o0=new WeakMap,tE=new WeakMap,nE=new WeakMap,rE=new WeakMap,iE=new WeakMap,sE=new WeakMap,Vu=new WeakMap,a0=new WeakMap,zu=new WeakMap,l0=new WeakMap,Hu=new WeakMap,Jw=new WeakSet,o3=function(g){var ct,ut,dt;if((ct=Ht(this,nE))!=null&&ct.call(this))return;if(g.touches.length===1){if(Ht(this,Vu))return;const ft=xn(this,Vu,new AbortController),St=AbortSignal.any([Ht(this,a0),ft.signal]),kt=Ht(this,h1),Tt={capture:!0,signal:St,passive:!1},jt=Rt=>{var Ft;Rt.pointerType==="touch"&&((Ft=Ht(this,Vu))==null||Ft.abort(),xn(this,Vu,null))};kt.addEventListener("pointerdown",Rt=>{Rt.pointerType==="touch"&&(stopEvent(Rt),jt(Rt))},Tt),kt.addEventListener("pointerup",jt,Tt),kt.addEventListener("pointercancel",jt,Tt);return}if(!Ht(this,Hu)){xn(this,Hu,new AbortController);const ft=AbortSignal.any([Ht(this,a0),Ht(this,Hu).signal]),St=Ht(this,h1),kt={signal:ft,capture:!1,passive:!1};St.addEventListener("touchmove",An(this,Qw,a3).bind(this),kt);const Tt=An(this,Zw,l3).bind(this);St.addEventListener("touchend",Tt,kt),St.addEventListener("touchcancel",Tt,kt),kt.capture=!0,St.addEventListener("pointerdown",stopEvent,kt),St.addEventListener("pointermove",stopEvent,kt),St.addEventListener("pointercancel",stopEvent,kt),St.addEventListener("pointerup",stopEvent,kt),(ut=Ht(this,rE))==null||ut.call(this)}if(stopEvent(g),g.touches.length!==2||(dt=Ht(this,tE))!=null&&dt.call(this)){xn(this,zu,null);return}let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]),xn(this,zu,{touch0X:et.screenX,touch0Y:et.screenY,touch1X:ot.screenX,touch1Y:ot.screenY})},Qw=new WeakSet,a3=function(g){var en;if(!Ht(this,zu)||g.touches.length!==2)return;stopEvent(g);let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]);const{screenX:ct,screenY:ut}=et,{screenX:dt,screenY:ft}=ot,St=Ht(this,zu),{touch0X:kt,touch0Y:Tt,touch1X:jt,touch1Y:Rt}=St,Ft=jt-kt,$t=Rt-Tt,zt=dt-ct,Kt=ft-ut,Bt=Math.hypot(zt,Kt)||1,Ut=Math.hypot(Ft,$t)||1;if(!Ht(this,o0)&&Math.abs(Ut-Bt)<=UC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(St.touch0X=ct,St.touch0Y=ut,St.touch1X=dt,St.touch1Y=ft,!Ht(this,o0)){xn(this,o0,!0);return}const Jt=[(ct+dt)/2,(ut+ft)/2];(en=Ht(this,iE))==null||en.call(this,Jt,Ut,Bt)},Zw=new WeakSet,l3=function(g){var et;g.touches.length>=2||(Ht(this,Hu)&&(Ht(this,Hu).abort(),xn(this,Hu,null),(et=Ht(this,sE))==null||et.call(this)),Ht(this,zu)&&(stopEvent(g),xn(this,zu,null),xn(this,o0,!1)))};let TouchManager=UC;var c0,Il,Gr,Dr,Uu,d1,qp,oE,Ps,u0,Gu,uu,Kp,aE,h0,ko,lE,d0,Wu,hu,f1,p1,xa,f0,cE,_k,uE,K_,hE,Y_,m1,rw,eT,c3,tT,u3,dE,X_,g1,iw,fE,J_,nT,h3,rT,d3,iT,f3,pE,Q_,sT,p3,mE,Z_,oT,m3,aT,g3,lT,y3,gE,eC,p0,mx;const pr=class pr{constructor(g){vn(this,uE);vn(this,m1);vn(this,eT);vn(this,tT);vn(this,dE);vn(this,g1);vn(this,fE);vn(this,nT);vn(this,rT);vn(this,iT);vn(this,pE);vn(this,sT);vn(this,mE);vn(this,oT);vn(this,aT);vn(this,lT);vn(this,gE);vn(this,p0);vn(this,c0,null);vn(this,Il,null);vn(this,Gr,null);vn(this,Dr,null);vn(this,Uu,null);vn(this,d1,!1);vn(this,qp,null);vn(this,oE,"");vn(this,Ps,null);vn(this,u0,null);vn(this,Gu,null);vn(this,uu,null);vn(this,Kp,null);vn(this,aE,"");vn(this,h0,!1);vn(this,ko,null);vn(this,lE,!1);vn(this,d0,!1);vn(this,Wu,!1);vn(this,hu,null);vn(this,f1,0);vn(this,p1,0);vn(this,xa,null);vn(this,f0,null);qn(this,"isSelected",!1);qn(this,"_isCopy",!1);qn(this,"_editToolbar",null);qn(this,"_initialOptions",Object.create(null));qn(this,"_initialData",null);qn(this,"_isVisible",!0);qn(this,"_uiManager",null);qn(this,"_focusEventsAllowed",!0);vn(this,cE,!1);vn(this,_k,pr._zIndex++);this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null,this.annotationElementId=g.annotationElementId||null,this.creationDate=g.creationDate||new Date,this.modificationDate=g.modificationDate||null;const{rotation:et,rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,ct],this.pageTranslation=[ut,dt];const[ft,St]=this.parentDimensions;this.x=g.x/ft,this.y=g.y/St,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=pr.prototype._resizeWithKeyboard,et=AnnotationEditorUIManager.TRANSLATE_SMALL,ot=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-ot,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[ot,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-ot]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,ot]}],[["Escape","mac+Escape"],pr.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const et=new FakeEditor({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});et.annotationElementId=g.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(g,et){if(pr._l10n??(pr._l10n=g),pr._l10nResizer||(pr._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),pr._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);pr._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,et){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Ht(this,cE)}set _isDraggable(g){var et;xn(this,cE,g),(et=this.div)==null||et.classList.toggle("draggable",g)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[g,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(g*2),this.y+=this.width*g/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(g*2),this.y-=this.width*g/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ht(this,_k)}setParent(g){var et;g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):(An(this,p0,mx).call(this),(et=Ht(this,uu))==null||et.remove(),xn(this,uu,null)),this.parent=g}focusin(g){this._focusEventsAllowed&&(Ht(this,h0)?xn(this,h0,!1):this.parent.setSelected(this))}focusout(g){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const et=g.relatedTarget;et!=null&&et.closest(`#${this.id}`)||(g.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,et,ot,ct){const[ut,dt]=this.parentDimensions;[ot,ct]=this.screenToPageTranslation(ot,ct),this.x=(g+ot)/ut,this.y=(et+ct)/dt,this.fixAndSetPosition()}_moveAfterPaste(g,et){const[ot,ct]=this.parentDimensions;this.setAt(g*ot,et*ct,this.width*ot,this.height*ct),this._onTranslated()}translate(g,et){An(this,uE,K_).call(this,this.parentDimensions,g,et)}translateInPage(g,et){Ht(this,ko)||xn(this,ko,[this.x,this.y,this.width,this.height]),An(this,uE,K_).call(this,this.pageDimensions,g,et),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(g,et){Ht(this,ko)||xn(this,ko,[this.x,this.y,this.width,this.height]);const{div:ot,parentDimensions:[ct,ut]}=this;if(this.x+=g/ct,this.y+=et/ut,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:jt,y:Rt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,jt,Rt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:dt,y:ft}=this;const[St,kt]=this.getBaseTranslation();dt+=St,ft+=kt;const{style:Tt}=ot;Tt.left=`${(100*dt).toFixed(2)}%`,Tt.top=`${(100*ft).toFixed(2)}%`,this._onTranslating(dt,ft),ot.scrollIntoView({block:"nearest"})}_onTranslating(g,et){}_onTranslated(g,et){}get _hasBeenMoved(){return!!Ht(this,ko)&&(Ht(this,ko)[0]!==this.x||Ht(this,ko)[1]!==this.y)}get _hasBeenResized(){return!!Ht(this,ko)&&(Ht(this,ko)[2]!==this.width||Ht(this,ko)[3]!==this.height)}getBaseTranslation(){const[g,et]=this.parentDimensions,{_borderLineWidth:ot}=pr,ct=ot/g,ut=ot/et;switch(this.rotation){case 90:return[-ct,ut];case 180:return[ct,ut];case 270:return[ct,-ut];default:return[-ct,-ut]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const{div:{style:et},pageDimensions:[ot,ct]}=this;let{x:ut,y:dt,width:ft,height:St}=this;if(ft*=ot,St*=ct,ut*=ot,dt*=ct,this._mustFixPosition)switch(g){case 0:ut=MathClamp(ut,0,ot-ft),dt=MathClamp(dt,0,ct-St);break;case 90:ut=MathClamp(ut,0,ot-St),dt=MathClamp(dt,ft,ct);break;case 180:ut=MathClamp(ut,ft,ot),dt=MathClamp(dt,St,ct);break;case 270:ut=MathClamp(ut,St,ot),dt=MathClamp(dt,0,ct-ft);break}this.x=ut/=ot,this.y=dt/=ct;const[kt,Tt]=this.getBaseTranslation();ut+=kt,dt+=Tt,et.left=`${(100*ut).toFixed(2)}%`,et.top=`${(100*dt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,et){var ot;return An(ot=pr,hE,Y_).call(ot,g,et,this.parentRotation)}pageTranslationToScreen(g,et){var ot;return An(ot=pr,hE,Y_).call(ot,g,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[et,ot]}=this;return[et*g,ot*g]}setDims(){const{div:{style:g},width:et,height:ot}=this;g.width=`${(100*et).toFixed(2)}%`,g.height=`${(100*ot).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(g){return Math.round(g*1e4)/1e4}_onResizing(){}altTextFinish(){var g;(g=Ht(this,Gr))==null||g.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Ht(this,d0))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:g}=this;if(g)for(const[et,ot]of g)await this._editToolbar.addButton(et,ot);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var g;(g=this._editToolbar)==null||g.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var g;(g=this._editToolbar)==null||g.removeButton("comment")}removeEditToolbar(){var g,et;(g=this._editToolbar)==null||g.remove(),this._editToolbar=null,(et=Ht(this,Gr))==null||et.destroy()}addContainer(g){var ot;const et=(ot=this._editToolbar)==null?void 0:ot.div;et?et.before(g):this.div.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Ht(this,Gr)||(AltText.initialize(pr._l10n),xn(this,Gr,new AltText(this)),Ht(this,c0)&&(Ht(this,Gr).data=Ht(this,c0),xn(this,c0,null))),Ht(this,Gr)}get altTextData(){var g;return(g=Ht(this,Gr))==null?void 0:g.data}set altTextData(g){Ht(this,Gr)&&(Ht(this,Gr).data=g)}get guessedAltText(){var g;return(g=Ht(this,Gr))==null?void 0:g.guessedText}async setGuessedAltText(g){var et;await((et=Ht(this,Gr))==null?void 0:et.setGuessedText(g))}serializeAltText(g){var et;return(et=Ht(this,Gr))==null?void 0:et.serialize(g)}hasAltText(){return!!Ht(this,Gr)&&!Ht(this,Gr).isEmpty()}hasAltTextData(){var g;return((g=Ht(this,Gr))==null?void 0:g.hasData())??!1}focusCommentButton(){var g;(g=Ht(this,Dr))==null||g.focusButton()}addCommentButton(){return Ht(this,Dr)||xn(this,Dr,new Comment(this))}addStandaloneCommentButton(){if(Ht(this,Uu)){this._uiManager.isEditingMode()&&Ht(this,Uu).classList.remove("hidden");return}this.hasComment&&(xn(this,Uu,Ht(this,Dr).renderForStandalone()),this.div.append(Ht(this,Uu)))}removeStandaloneCommentButton(){Ht(this,Dr).removeStandaloneCommentButton(),xn(this,Uu,null)}hideStandaloneCommentButton(){var g;(g=Ht(this,Uu))==null||g.classList.add("hidden")}get comment(){const{data:{richText:g,text:et,date:ot,deleted:ct}}=Ht(this,Dr);return{text:et,richText:g,date:ot,deleted:ct,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(g){Ht(this,Dr)||xn(this,Dr,new Comment(this)),Ht(this,Dr).data=g,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:g,popupRef:et,richText:ot}){if(!et||(Ht(this,Dr)||xn(this,Dr,new Comment(this)),Ht(this,Dr).setInitialText(g,ot),!this.annotationElementId))return;const ct=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ct&&this.updateFromAnnotationLayer(ct)}get hasEditedComment(){var g;return(g=Ht(this,Dr))==null?void 0:g.hasBeenEdited()}get hasDeletedComment(){var g;return(g=Ht(this,Dr))==null?void 0:g.isDeleted()}get hasComment(){return!!Ht(this,Dr)&&!Ht(this,Dr).isEmpty()&&!Ht(this,Dr).isDeleted()}async editComment(g){Ht(this,Dr)||xn(this,Dr,new Comment(this)),Ht(this,Dr).edit(g)}toggleComment(g,et=void 0){this.hasComment&&this._uiManager.toggleComment(this,g,et)}setSelectedCommentButton(g){Ht(this,Dr).setSelectedButton(g)}addComment(g){if(this.hasEditedComment){const[,,,ct]=g.rect,[ut]=this.pageDimensions,[dt]=this.pageTranslation,ft=dt+ut+1,St=ct-100,kt=ft+180;g.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[ft,St,kt,ct]}}}updateFromAnnotationLayer({popup:{contents:g,deleted:et}}){Ht(this,Dr).data=et?null:g}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var dt;const g=this.div=document.createElement("div");g.setAttribute("data-editor-rotation",(360-this.rotation)%360),g.className=this.name,g.setAttribute("id",this.id),g.tabIndex=Ht(this,d1)?-1:0,g.setAttribute("role","application"),this.defaultL10nId&&g.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||g.classList.add("hidden"),this.setInForeground(),An(this,mE,Z_).call(this);const[et,ot]=this.parentDimensions;this.parentRotation%180!==0&&(g.style.maxWidth=`${(100*ot/et).toFixed(2)}%`,g.style.maxHeight=`${(100*et/ot).toFixed(2)}%`);const[ct,ut]=this.getInitialTranslation();return this.translate(ct,ut),bindEvents(this,g,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Ht(this,f0)||xn(this,f0,new TouchManager({container:g,isPinchingDisabled:()=>!this.isSelected,onPinchStart:An(this,nT,h3).bind(this),onPinching:An(this,rT,d3).bind(this),onPinchEnd:An(this,iT,f3).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(dt=this._uiManager._editorUndoBar)==null||dt.hide(),g}pointerdown(g){const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et){g.preventDefault();return}if(xn(this,h0,!0),this._isDraggable){An(this,sT,p3).call(this,g);return}An(this,pE,Q_).call(this,g)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Ht(this,hu)&&clearTimeout(Ht(this,hu)),xn(this,hu,setTimeout(()=>{var g;xn(this,hu,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,et,ot){g.changeParent(this),this.x=et,this.y=ot,this.fixAndSetPosition(),this._onTranslated()}getRect(g,et,ot=this.rotation){const ct=this.parentScale,[ut,dt]=this.pageDimensions,[ft,St]=this.pageTranslation,kt=g/ct,Tt=et/ct,jt=this.x*ut,Rt=this.y*dt,Ft=this.width*ut,$t=this.height*dt;switch(ot){case 0:return[jt+kt+ft,dt-Rt-Tt-$t+St,jt+kt+Ft+ft,dt-Rt-Tt+St];case 90:return[jt+Tt+ft,dt-Rt+kt+St,jt+Tt+$t+ft,dt-Rt+kt+Ft+St];case 180:return[jt-kt-Ft+ft,dt-Rt+Tt+St,jt-kt+ft,dt-Rt+Tt+$t+St];case 270:return[jt-Tt-$t+ft,dt-Rt-kt-Ft+St,jt-Tt+ft,dt-Rt-kt+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,et){const[ot,ct,ut,dt]=g,ft=ut-ot,St=dt-ct;switch(this.rotation){case 0:return[ot,et-dt,ft,St];case 90:return[ot,et-ct,St,ft];case 180:return[ut,et-ct,ft,St];case 270:return[ut,et-dt,St,ft];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&pr._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var g;(g=Ht(this,Dr))==null||g.onUpdatedColor()}getData(){const{comment:{text:g,color:et,date:ot,opacity:ct,deleted:ut,richText:dt},uid:ft,pageIndex:St,creationDate:kt,modificationDate:Tt}=this;return{id:ft,pageIndex:St,rect:this.getPDFRect(),richText:dt,contentsObj:{str:g},creationDate:kt,modificationDate:ot||Tt,popupRef:!ut,color:et,opacity:ct}}onceAdded(g){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),xn(this,d0,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),xn(this,d0,!1),!0):!1}isInEditMode(){return Ht(this,d0)}shouldGetKeyboardEvents(){return Ht(this,Wu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:g,left:et,bottom:ot,right:ct}=this.getClientDimensions(),{innerHeight:ut,innerWidth:dt}=window;return et<dt&&ct>0&&g<ut&&ot>0}rebuild(){An(this,mE,Z_).call(this)}rotate(g){}resize(){}serializeDeleted(){var g;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((g=this._initialData)==null?void 0:g.popupRef)||""}}serialize(g=!1,et=null){var ot;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((ot=this._initialData)==null?void 0:ot.popupRef)||""}}static async deserialize(g,et,ot){const ct=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ot,annotationElementId:g.annotationElementId,creationDate:g.creationDate,modificationDate:g.modificationDate});ct.rotation=g.rotation,xn(ct,c0,g.accessibilityData),ct._isCopy=g.isCopy||!1;const[ut,dt]=ct.pageDimensions,[ft,St,kt,Tt]=ct.getRectInCurrentCoords(g.rect,dt);return ct.x=ft/ut,ct.y=St/dt,ct.width=kt/ut,ct.height=Tt/dt,ct}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var g,et;if((g=Ht(this,Kp))==null||g.abort(),xn(this,Kp,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Ht(this,hu)&&(clearTimeout(Ht(this,hu)),xn(this,hu,null)),An(this,p0,mx).call(this),this.removeEditToolbar(),Ht(this,xa)){for(const ot of Ht(this,xa).values())clearTimeout(ot);xn(this,xa,null)}this.parent=null,(et=Ht(this,f0))==null||et.destroy(),xn(this,f0,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(An(this,eT,c3).call(this),Ht(this,Ps).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[g,et]}=this,[ot,ct,ut,dt]=this.getPDFRect();return[pr._round(ot+(ut-ot)*g),pr._round(ct+(dt-ct)*(1-et))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Ht(this,Dr).commentPopupPositionInLayer}set commentPopupPosition(g){Ht(this,Dr).commentPopupPositionInLayer=g}hasDefaultPopupPosition(){return Ht(this,Dr).hasDefaultPopupPosition()}get commentButtonWidth(){return Ht(this,Dr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(g){Ht(this,Dr).setCommentButtonStates(g)}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),xn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=Ht(this,Ps).children;if(!Ht(this,Il)){xn(this,Il,Array.from(et));const dt=An(this,oT,m3).bind(this),ft=An(this,aT,g3).bind(this),St=this._uiManager._signal;for(const kt of Ht(this,Il)){const Tt=kt.getAttribute("data-resizer-name");kt.setAttribute("role","spinbutton"),kt.addEventListener("keydown",dt,{signal:St}),kt.addEventListener("blur",ft,{signal:St}),kt.addEventListener("focus",An(this,lT,y3).bind(this,Tt),{signal:St}),kt.setAttribute("data-l10n-id",pr._l10nResizer[Tt])}}const ot=Ht(this,Il)[0];let ct=0;for(const dt of et){if(dt===ot)break;ct++}const ut=(360-this.rotation+this.parentRotation)%360/90*(Ht(this,Il).length/4);if(ut!==ct){if(ut<ct)for(let ft=0;ft<ct-ut;ft++)Ht(this,Ps).append(Ht(this,Ps).firstChild);else if(ut>ct)for(let ft=0;ft<ut-ct;ft++)Ht(this,Ps).firstChild.before(Ht(this,Ps).lastChild);let dt=0;for(const ft of et){const kt=Ht(this,Il)[dt++].getAttribute("data-resizer-name");ft.setAttribute("data-l10n-id",pr._l10nResizer[kt])}}An(this,gE,eC).call(this,0),xn(this,Wu,!0),Ht(this,Ps).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,et){Ht(this,Wu)&&An(this,fE,J_).call(this,Ht(this,aE),{deltaX:g,deltaY:et,fromKeyboard:!0})}_stopResizingWithKeyboard(){An(this,p0,mx).call(this),this.div.focus()}select(){var g,et,ot;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ct,ut;(ct=this.div)!=null&&ct.classList.contains("selectedEditor")&&((ut=this._editToolbar)==null||ut.show())});return}(et=this._editToolbar)==null||et.show(),(ot=Ht(this,Gr))==null||ot.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var g;return(g=this.div)==null?void 0:g.focus({preventScroll:!0})},0)}unselect(){var g,et,ot,ct,ut;this.isSelected&&(this.isSelected=!1,(g=Ht(this,Ps))==null||g.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ct=this._editToolbar)==null||ct.hide(),(ut=Ht(this,Gr))==null||ut.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(g,et){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(g){g.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Ht(this,lE)}set isEditing(g){xn(this,lE,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,et=!1){if(et){Ht(this,xa)||xn(this,xa,new Map);const{action:ot}=g;let ct=Ht(this,xa).get(ot);ct&&clearTimeout(ct),ct=setTimeout(()=>{this._reportTelemetry(g),Ht(this,xa).delete(ot),Ht(this,xa).size===0&&xn(this,xa,null)},pr._telemetryTimeout),Ht(this,xa).set(ot,ct);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),xn(this,d1,!1)}disable(){this.div&&(this.div.tabIndex=-1),xn(this,d1,!0)}updateFakeAnnotationElement(g){if(!Ht(this,uu)&&!this.deleted){xn(this,uu,g.addFakeAnnotation(this));return}if(this.deleted){Ht(this,uu).remove(),xn(this,uu,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Ht(this,uu).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(g){if(this.deleted)return g.hide(),null;let et=g.container.querySelector(".annotationContent");if(!et)et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),g.container.prepend(et);else if(et.nodeName==="CANVAS"){const ot=et;et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),ot.before(et)}return et}resetAnnotationElement(g){const{firstChild:et}=g.container;(et==null?void 0:et.nodeName)==="DIV"&&et.classList.contains("annotationContent")&&et.remove()}};c0=new WeakMap,Il=new WeakMap,Gr=new WeakMap,Dr=new WeakMap,Uu=new WeakMap,d1=new WeakMap,qp=new WeakMap,oE=new WeakMap,Ps=new WeakMap,u0=new WeakMap,Gu=new WeakMap,uu=new WeakMap,Kp=new WeakMap,aE=new WeakMap,h0=new WeakMap,ko=new WeakMap,lE=new WeakMap,d0=new WeakMap,Wu=new WeakMap,hu=new WeakMap,f1=new WeakMap,p1=new WeakMap,xa=new WeakMap,f0=new WeakMap,cE=new WeakMap,_k=new WeakMap,uE=new WeakSet,K_=function([g,et],ot,ct){[ot,ct]=this.screenToPageTranslation(ot,ct),this.x+=ot/g,this.y+=ct/et,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},hE=new WeakSet,Y_=function(g,et,ot){switch(ot){case 90:return[et,-g];case 180:return[-g,-et];case 270:return[-et,g];default:return[g,et]}},m1=new WeakSet,rw=function(g){switch(g){case 90:{const[et,ot]=this.pageDimensions;return[0,-et/ot,ot/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ot]=this.pageDimensions;return[0,et/ot,-ot/et,0]}default:return[1,0,0,1]}},eT=new WeakSet,c3=function(){if(Ht(this,Ps))return;xn(this,Ps,document.createElement("div")),Ht(this,Ps).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],et=this._uiManager._signal;for(const ot of g){const ct=document.createElement("div");Ht(this,Ps).append(ct),ct.classList.add("resizer",ot),ct.setAttribute("data-resizer-name",ot),ct.addEventListener("pointerdown",An(this,tT,u3).bind(this,ot),{signal:et}),ct.addEventListener("contextmenu",noContextMenu,{signal:et}),ct.tabIndex=-1}this.div.prepend(Ht(this,Ps))},tT=new WeakSet,u3=function(g,et){var Tt;et.preventDefault();const{isMac:ot}=util_FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ot)return;(Tt=Ht(this,Gr))==null||Tt.toggle(!1);const ct=this._isDraggable;this._isDraggable=!1,xn(this,u0,[et.screenX,et.screenY]);const ut=new AbortController,dt=this._uiManager.combinedSignal(ut);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",An(this,fE,J_).bind(this,g),{passive:!0,capture:!0,signal:dt}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:dt}),window.addEventListener("contextmenu",noContextMenu,{signal:dt}),xn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ft=this.parent.div.style.cursor,St=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const kt=()=>{var jt;ut.abort(),this.parent.togglePointerEvents(!0),(jt=Ht(this,Gr))==null||jt.toggle(!0),this._isDraggable=ct,this.parent.div.style.cursor=ft,this.div.style.cursor=St,An(this,g1,iw).call(this)};window.addEventListener("pointerup",kt,{signal:dt}),window.addEventListener("blur",kt,{signal:dt})},dE=new WeakSet,X_=function(g,et,ot,ct){this.width=ot,this.height=ct,this.x=g,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResized()},g1=new WeakSet,iw=function(){if(!Ht(this,Gu))return;const{savedX:g,savedY:et,savedWidth:ot,savedHeight:ct}=Ht(this,Gu);xn(this,Gu,null);const ut=this.x,dt=this.y,ft=this.width,St=this.height;ut===g&&dt===et&&ft===ot&&St===ct||this.addCommands({cmd:An(this,dE,X_).bind(this,ut,dt,ft,St),undo:An(this,dE,X_).bind(this,g,et,ot,ct),mustExec:!0})},fE=new WeakSet,J_=function(g,et){const[ot,ct]=this.parentDimensions,ut=this.x,dt=this.y,ft=this.width,St=this.height,kt=pr.MIN_SIZE/ot,Tt=pr.MIN_SIZE/ct,jt=An(this,m1,rw).call(this,this.rotation),Rt=(hn,yn)=>[jt[0]*hn+jt[2]*yn,jt[1]*hn+jt[3]*yn],Ft=An(this,m1,rw).call(this,360-this.rotation),$t=(hn,yn)=>[Ft[0]*hn+Ft[2]*yn,Ft[1]*hn+Ft[3]*yn];let zt,Kt,Bt=!1,Ut=!1;switch(g){case"topLeft":Bt=!0,zt=(hn,yn)=>[0,0],Kt=(hn,yn)=>[hn,yn];break;case"topMiddle":zt=(hn,yn)=>[hn/2,0],Kt=(hn,yn)=>[hn/2,yn];break;case"topRight":Bt=!0,zt=(hn,yn)=>[hn,0],Kt=(hn,yn)=>[0,yn];break;case"middleRight":Ut=!0,zt=(hn,yn)=>[hn,yn/2],Kt=(hn,yn)=>[0,yn/2];break;case"bottomRight":Bt=!0,zt=(hn,yn)=>[hn,yn],Kt=(hn,yn)=>[0,0];break;case"bottomMiddle":zt=(hn,yn)=>[hn/2,yn],Kt=(hn,yn)=>[hn/2,0];break;case"bottomLeft":Bt=!0,zt=(hn,yn)=>[0,yn],Kt=(hn,yn)=>[hn,0];break;case"middleLeft":Ut=!0,zt=(hn,yn)=>[0,yn/2],Kt=(hn,yn)=>[hn,yn/2];break}const Jt=zt(ft,St),en=Kt(ft,St);let tn=Rt(...en);const nn=pr._round(ut+tn[0]),rn=pr._round(dt+tn[1]);let on=1,dn=1,cn,fn;if(et.fromKeyboard)({deltaX:cn,deltaY:fn}=et);else{const{screenX:hn,screenY:yn}=et,[an,un]=Ht(this,u0);[cn,fn]=this.screenToPageTranslation(hn-an,yn-un),Ht(this,u0)[0]=hn,Ht(this,u0)[1]=yn}if([cn,fn]=$t(cn/ot,fn/ct),Bt){const hn=Math.hypot(ft,St);on=dn=Math.max(Math.min(Math.hypot(en[0]-Jt[0]-cn,en[1]-Jt[1]-fn)/hn,1/ft,1/St),kt/ft,Tt/St)}else Ut?on=MathClamp(Math.abs(en[0]-Jt[0]-cn),kt,1)/ft:dn=MathClamp(Math.abs(en[1]-Jt[1]-fn),Tt,1)/St;const mn=pr._round(ft*on),En=pr._round(St*dn);tn=Rt(...Kt(mn,En));const Sn=nn-tn[0],wn=rn-tn[1];Ht(this,ko)||xn(this,ko,[this.x,this.y,this.width,this.height]),this.width=mn,this.height=En,this.x=Sn,this.y=wn,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nT=new WeakSet,h3=function(){var g;xn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(g=Ht(this,Gr))==null||g.toggle(!1),this.parent.togglePointerEvents(!1)},rT=new WeakSet,d3=function(g,et,ot){let ut=.7*(ot/et)+1-.7;if(ut===1)return;const dt=An(this,m1,rw).call(this,this.rotation),ft=(nn,rn)=>[dt[0]*nn+dt[2]*rn,dt[1]*nn+dt[3]*rn],[St,kt]=this.parentDimensions,Tt=this.x,jt=this.y,Rt=this.width,Ft=this.height,$t=pr.MIN_SIZE/St,zt=pr.MIN_SIZE/kt;ut=Math.max(Math.min(ut,1/Rt,1/Ft),$t/Rt,zt/Ft);const Kt=pr._round(Rt*ut),Bt=pr._round(Ft*ut);if(Kt===Rt&&Bt===Ft)return;Ht(this,ko)||xn(this,ko,[Tt,jt,Rt,Ft]);const Ut=ft(Rt/2,Ft/2),Jt=pr._round(Tt+Ut[0]),en=pr._round(jt+Ut[1]),tn=ft(Kt/2,Bt/2);this.x=Jt-tn[0],this.y=en-tn[1],this.width=Kt,this.height=Bt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iT=new WeakSet,f3=function(){var g;(g=Ht(this,Gr))==null||g.toggle(!0),this.parent.togglePointerEvents(!0),An(this,g1,iw).call(this)},pE=new WeakSet,Q_=function(g){const{isMac:et}=util_FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},sT=new WeakSet,p3=function(g){const{isSelected:et}=this;this._uiManager.setUpDragSession();let ot=!1;const ct=new AbortController,ut=this._uiManager.combinedSignal(ct),dt={capture:!0,passive:!1,signal:ut},ft=kt=>{ct.abort(),xn(this,qp,null),xn(this,h0,!1),this._uiManager.endDragSession()||An(this,pE,Q_).call(this,kt),ot&&this._onStopDragging()};et&&(xn(this,f1,g.clientX),xn(this,p1,g.clientY),xn(this,qp,g.pointerId),xn(this,oE,g.pointerType),window.addEventListener("pointermove",kt=>{ot||(ot=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Tt,clientY:jt,pointerId:Rt}=kt;if(Rt!==Ht(this,qp)){stopEvent(kt);return}const[Ft,$t]=this.screenToPageTranslation(Tt-Ht(this,f1),jt-Ht(this,p1));xn(this,f1,Tt),xn(this,p1,jt),this._uiManager.dragSelectedEditors(Ft,$t)},dt),window.addEventListener("touchmove",stopEvent,dt),window.addEventListener("pointerdown",kt=>{kt.pointerType===Ht(this,oE)&&(Ht(this,f0)||kt.isPrimary)&&ft(kt),stopEvent(kt)},dt));const St=kt=>{if(!Ht(this,qp)||Ht(this,qp)===kt.pointerId){ft(kt);return}stopEvent(kt)};window.addEventListener("pointerup",St,{signal:ut}),window.addEventListener("blur",St,{signal:ut})},mE=new WeakSet,Z_=function(){if(Ht(this,Kp)||!this.div)return;xn(this,Kp,new AbortController);const g=this._uiManager.combinedSignal(Ht(this,Kp));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:g}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:g})},oT=new WeakSet,m3=function(g){pr._resizerKeyboardManager.exec(this,g)},aT=new WeakSet,g3=function(g){var et;Ht(this,Wu)&&((et=g.relatedTarget)==null?void 0:et.parentNode)!==Ht(this,Ps)&&An(this,p0,mx).call(this)},lT=new WeakSet,y3=function(g){xn(this,aE,Ht(this,Wu)?g:"")},gE=new WeakSet,eC=function(g){if(Ht(this,Il))for(const et of Ht(this,Il))et.tabIndex=g},p0=new WeakSet,mx=function(){xn(this,Wu,!1),An(this,gE,eC).call(this,-1),An(this,g1,iw).call(this)},vn(pr,hE),qn(pr,"_l10n",null),qn(pr,"_l10nResizer",null),qn(pr,"_borderLineWidth",-1),qn(pr,"_colorManager",new ColorManager),qn(pr,"_zIndex",1),qn(pr,"_telemetryTimeout",1e3);let AnnotationEditor=pr;class FakeEditor extends AnnotationEditor{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(g){this.h1=g?g&4294967295:SEED,this.h2=g?g&4294967295:SEED}update(g){let et,ot;if(typeof g=="string"){et=new Uint8Array(g.length*2),ot=0;for(let zt=0,Kt=g.length;zt<Kt;zt++){const Bt=g.charCodeAt(zt);Bt<=255?et[ot++]=Bt:(et[ot++]=Bt>>>8,et[ot++]=Bt&255)}}else if(ArrayBuffer.isView(g))et=g.slice(),ot=et.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ct=ot>>2,ut=ot-ct*4,dt=new Uint32Array(et.buffer,0,ct);let ft=0,St=0,kt=this.h1,Tt=this.h2;const jt=3432918353,Rt=461845907,Ft=jt&MASK_LOW,$t=Rt&MASK_LOW;for(let zt=0;zt<ct;zt++)zt&1?(ft=dt[zt],ft=ft*jt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*Rt&MASK_HIGH|ft*$t&MASK_LOW,kt^=ft,kt=kt<<13|kt>>>19,kt=kt*5+3864292196):(St=dt[zt],St=St*jt&MASK_HIGH|St*Ft&MASK_LOW,St=St<<15|St>>>17,St=St*Rt&MASK_HIGH|St*$t&MASK_LOW,Tt^=St,Tt=Tt<<13|Tt>>>19,Tt=Tt*5+3864292196);switch(ft=0,ut){case 3:ft^=et[ct*4+2]<<16;case 2:ft^=et[ct*4+1]<<8;case 1:ft^=et[ct*4],ft=ft*jt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*Rt&MASK_HIGH|ft*$t&MASK_LOW,ct&1?kt^=ft:Tt^=ft}this.h1=kt,this.h2=Tt}hexdigest(){let g=this.h1,et=this.h2;return g^=et>>>1,g=g*3981806797&MASK_HIGH|g*36045&MASK_LOW,et=et*4283543511&MASK_HIGH|((et<<16|g>>>16)*2950163797&MASK_HIGH)>>>16,g^=et>>>1,g=g*444984403&MASK_HIGH|g*60499&MASK_LOW,et=et*3301882366&MASK_HIGH|((et<<16|g>>>16)*3120437893&MASK_HIGH)>>>16,g^=et>>>1,(g>>>0).toString(16).padStart(8,"0")+(et>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var m0,g0,qu,Ns,cT,v3;class AnnotationStorage{constructor(){vn(this,cT);vn(this,m0,!1);vn(this,g0,null);vn(this,qu,null);vn(this,Ns,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,et){const ot=Ht(this,Ns).get(g);return ot===void 0?et:Object.assign(et,ot)}getRawValue(g){return Ht(this,Ns).get(g)}remove(g){const et=Ht(this,Ns).get(g);if(et!==void 0&&(et instanceof AnnotationEditor&&Ht(this,qu).delete(et.annotationElementId),Ht(this,Ns).delete(g),Ht(this,Ns).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const ot of Ht(this,Ns).values())if(ot instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,et){const ot=Ht(this,Ns).get(g);let ct=!1;if(ot!==void 0)for(const[ut,dt]of Object.entries(et))ot[ut]!==dt&&(ct=!0,ot[ut]=dt);else ct=!0,Ht(this,Ns).set(g,et);ct&&An(this,cT,v3).call(this),et instanceof AnnotationEditor&&((Ht(this,qu)||xn(this,qu,new Map)).set(et.annotationElementId,et),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type))}has(g){return Ht(this,Ns).has(g)}get size(){return Ht(this,Ns).size}resetModified(){Ht(this,m0)&&(xn(this,m0,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(Ht(this,Ns).size===0)return SerializableEmpty;const g=new Map,et=new MurmurHash3_64,ot=[],ct=Object.create(null);let ut=!1;for(const[dt,ft]of Ht(this,Ns)){const St=ft instanceof AnnotationEditor?ft.serialize(!1,ct):ft;St&&(g.set(dt,St),et.update(`${dt}:${JSON.stringify(St)}`),ut||(ut=!!St.bitmap))}if(ut)for(const dt of g.values())dt.bitmap&&ot.push(dt.bitmap);return g.size>0?{map:g,hash:et.hexdigest(),transfer:ot}:SerializableEmpty}get editorStats(){let g=null;const et=new Map;let ot=0,ct=0;for(const ut of Ht(this,Ns).values()){if(!(ut instanceof AnnotationEditor)){ut.popup&&(ut.popup.deleted?ct+=1:ot+=1);continue}ut.isCommentDeleted?ct+=1:ut.hasEditedComment&&(ot+=1);const dt=ut.telemetryFinalData;if(!dt)continue;const{type:ft}=dt;et.has(ft)||et.set(ft,Object.getPrototypeOf(ut).constructor),g||(g=Object.create(null));const St=g[ft]||(g[ft]=new Map);for(const[kt,Tt]of Object.entries(dt)){if(kt==="type")continue;let jt=St.get(kt);jt||(jt=new Map,St.set(kt,jt));const Rt=jt.get(Tt)??0;jt.set(Tt,Rt+1)}}if((ct>0||ot>0)&&(g||(g=Object.create(null)),g.comments={deleted:ct,edited:ot}),!g)return null;for(const[ut,dt]of et)g[ut]=dt.computeTelemetryFinalData(g[ut]);return g}resetModifiedIds(){xn(this,g0,null)}updateEditor(g,et){var ct;const ot=(ct=Ht(this,qu))==null?void 0:ct.get(g);return ot?(ot.updateFromAnnotationLayer(et),!0):!1}getEditor(g){var et;return((et=Ht(this,qu))==null?void 0:et.get(g))||null}get modifiedIds(){if(Ht(this,g0))return Ht(this,g0);const g=[];if(Ht(this,qu))for(const et of Ht(this,qu).values())et.serialize()&&g.push(et.annotationElementId);return xn(this,g0,{ids:new Set(g),hash:g.join(",")})}[Symbol.iterator](){return Ht(this,Ns).entries()}}m0=new WeakMap,g0=new WeakMap,qu=new WeakMap,Ns=new WeakMap,cT=new WeakSet,v3=function(){Ht(this,m0)||(xn(this,m0,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yE;class PrintAnnotationStorage extends AnnotationStorage{constructor(et){super();vn(this,yE,void 0);const{map:ot,hash:ct,transfer:ut}=et.serializable,dt=structuredClone(ot,ut?{transfer:ut}:null);xn(this,yE,{map:dt,hash:ct,transfer:ut})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return Ht(this,yE)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}yE=new WeakMap;var y1;class FontLoader{constructor({ownerDocument:g=globalThis.document,styleElement:et=null}){vn(this,y1,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const et=this.styleElement.sheet;et.insertRule(g,et.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),Ht(this,y1).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:g,disableFontFace:et,_inspectFont:ot}){if(!(!g||Ht(this,y1).has(g.loadedName))){if(assert(!et,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ct,src:ut,style:dt}=g,ft=new FontFace(ct,ut,dt);this.addNativeFontFace(ft);try{await ft.load(),Ht(this,y1).add(ct),ot==null||ot(g)}catch{warn(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ft)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g);return}if(this.isFontLoadingAPISupported){const ot=g.createNativeFontFace();if(ot){this.addNativeFontFace(ot);try{await ot.loaded}catch(ct){throw warn(`Failed to load font '${ot.family}': '${ct}'.`),g.disableFontFace=!0,ct}}return}const et=g.createFontFaceRule();if(et){if(this.insertRule(et),this.isSyncFontLoadingSupported)return;await new Promise(ot=>{const ct=this._queueLoadingCallback(ot);this._prepareFontLoadEvent(g,ct)})}}get isFontLoadingAPISupported(){var et;const g=!!((et=this._document)!=null&&et.fonts);return shadow(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(g){function et(){for(assert(!ct.done,"completeRequest() cannot be called twice."),ct.done=!0;ot.length>0&&ot[0].done;){const ut=ot.shift();setTimeout(ut.callback,0)}}const{loadingRequests:ot}=this,ct={done:!1,complete:et,callback:g};return ot.push(ct),ct}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,et){function ot(en,tn){return en.charCodeAt(tn)<<24|en.charCodeAt(tn+1)<<16|en.charCodeAt(tn+2)<<8|en.charCodeAt(tn+3)&255}function ct(en,tn,nn,rn){const on=en.substring(0,tn),dn=en.substring(tn+nn);return on+rn+dn}let ut,dt;const ft=this._document.createElement("canvas");ft.width=1,ft.height=1;const St=ft.getContext("2d");let kt=0;function Tt(en,tn){if(++kt>30){warn("Load test font never loaded."),tn();return}if(St.font="30px "+en,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){tn();return}setTimeout(Tt.bind(null,en,tn))}const jt=`lt${Date.now()}${this.loadTestFontId++}`;let Rt=this._loadTestFont;Rt=ct(Rt,976,jt.length,jt);const $t=16,zt=1482184792;let Kt=ot(Rt,$t);for(ut=0,dt=jt.length-3;ut<dt;ut+=4)Kt=Kt-zt+ot(jt,ut)|0;ut<jt.length&&(Kt=Kt-zt+ot(jt+"XXX",ut)|0),Rt=ct(Rt,$t,4,string32(Kt));const Bt=`url(data:font/opentype;base64,${btoa(Rt)});`,Ut=`@font-face {font-family:"${jt}";src:${Bt}}`;this.insertRule(Ut);const Jt=this._document.createElement("div");Jt.style.visibility="hidden",Jt.style.width=Jt.style.height="10px",Jt.style.position="absolute",Jt.style.top=Jt.style.left="0px";for(const en of[g.loadedName,jt]){const tn=this._document.createElement("span");tn.textContent="Hi",tn.style.fontFamily=en,Jt.append(tn)}this._document.body.append(Jt),Tt(jt,()=>{Jt.remove(),et.complete()})}}y1=new WeakMap;var Pr;class FontFaceObject{constructor(g,et=null,ot,ct){vn(this,Pr,void 0);this.compiledGlyphs=Object.create(null),xn(this,Pr,g),this._inspectFont=et,ot&&Object.assign(this,ot),ct&&(this.charProcOperatorList=ct)}createNativeFontFace(){var et;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const ot={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ot.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,ot)}return(et=this._inspectFont)==null||et.call(this,this),g}createFontFaceRule(){var ot;if(!this.data||this.disableFontFace)return null;const g=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let et;if(!this.cssFontInfo)et=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),et=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ct}src:${g}}`}return(ot=this._inspectFont)==null||ot.call(this,this,g),et}getPathGenerator(g,et){if(this.compiledGlyphs[et]!==void 0)return this.compiledGlyphs[et];const ot=this.loadedName+"_path_"+et;let ct;try{ct=g.get(ot)}catch(dt){warn(`getPathGenerator - ignoring character: "${dt}".`)}const ut=new Path2D(ct||"");return this.fontExtraProperties||g.delete(ot),this.compiledGlyphs[et]=ut}get black(){return Ht(this,Pr).black}get bold(){return Ht(this,Pr).bold}get disableFontFace(){return Ht(this,Pr).disableFontFace??!1}get fontExtraProperties(){return Ht(this,Pr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Ht(this,Pr).isInvalidPDFjsFont}get isType3Font(){return Ht(this,Pr).isType3Font}get italic(){return Ht(this,Pr).italic}get missingFile(){return Ht(this,Pr).missingFile}get remeasure(){return Ht(this,Pr).remeasure}get vertical(){return Ht(this,Pr).vertical}get ascent(){return Ht(this,Pr).ascent}get defaultWidth(){return Ht(this,Pr).defaultWidth}get descent(){return Ht(this,Pr).descent}get bbox(){return Ht(this,Pr).bbox}get fontMatrix(){return Ht(this,Pr).fontMatrix}get fallbackName(){return Ht(this,Pr).fallbackName}get loadedName(){return Ht(this,Pr).loadedName}get mimetype(){return Ht(this,Pr).mimetype}get name(){return Ht(this,Pr).name}get data(){return Ht(this,Pr).data}clearData(){Ht(this,Pr).clearData()}get cssFontInfo(){return Ht(this,Pr).cssFontInfo}get systemFontInfo(){return Ht(this,Pr).systemFontInfo}get defaultVMetrics(){return Ht(this,Pr).defaultVMetrics}}Pr=new WeakMap;function getUrlProp(it){if(it instanceof URL)return it.href;if(typeof it=="string"){if(isNodeJS)return it;const g=URL.parse(it,window.location);if(g)return g.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return stringToBytes(it);if(it instanceof ArrayBuffer||ArrayBuffer.isView(it)||typeof it=="object"&&!isNaN(it==null?void 0:it.length))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(it){if(typeof it!="string")return null;if(it.endsWith("/"))return it;throw new Error(`Invalid factory url: "${it}" must include trailing slash.`)}const isRefProxy=it=>typeof it=="object"&&Number.isInteger(it==null?void 0:it.num)&&it.num>=0&&Number.isInteger(it==null?void 0:it.gen)&&it.gen>=0,isNameProxy=it=>typeof it=="object"&&typeof(it==null?void 0:it.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Ku,uT;class LoopbackPort{constructor(){vn(this,Ku,new Map);vn(this,uT,Promise.resolve())}postMessage(g,et){const ot={data:structuredClone(g,et?{transfer:et}:null)};Ht(this,uT).then(()=>{for(const[ct]of Ht(this,Ku))ct.call(this,ot)})}addEventListener(g,et,ot=null){let ct=null;if((ot==null?void 0:ot.signal)instanceof AbortSignal){const{signal:ut}=ot;if(ut.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const dt=()=>this.removeEventListener(g,et);ct=()=>ut.removeEventListener("abort",dt),ut.addEventListener("abort",dt)}Ht(this,Ku).set(et,ct)}removeEventListener(g,et){const ot=Ht(this,Ku).get(et);ot==null||ot(),Ht(this,Ku).delete(et)}terminate(){for(const[,g]of Ht(this,Ku))g==null||g();Ht(this,Ku).clear()}}Ku=new WeakMap,uT=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(it){if(it instanceof AbortException||it instanceof InvalidPDFException||it instanceof PasswordException||it instanceof ResponseException||it instanceof UnknownErrorException)return it;switch(it instanceof Error||typeof it=="object"&&it!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new AbortException(it.message);case"InvalidPDFException":return new InvalidPDFException(it.message);case"PasswordException":return new PasswordException(it.message,it.code);case"ResponseException":return new ResponseException(it.message,it.status,it.missing);case"UnknownErrorException":return new UnknownErrorException(it.message,it.details)}return new UnknownErrorException(it.message,it.toString())}var v1,hT,x3,dT,b3,fT,E3,x1,sw;class MessageHandler{constructor(g,et,ot){vn(this,hT);vn(this,dT);vn(this,fT);vn(this,x1);vn(this,v1,new AbortController);this.sourceName=g,this.targetName=et,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),ot.addEventListener("message",An(this,hT,x3).bind(this),{signal:Ht(this,v1).signal})}on(g,et){const ot=this.actionHandler;if(ot[g])throw new Error(`There is already an actionName called "${g}"`);ot[g]=et}send(g,et,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:et},ot)}sendWithPromise(g,et,ot){const ct=this.callbackId++,ut=Promise.withResolvers();this.callbackCapabilities[ct]=ut;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:ct,data:et},ot)}catch(dt){ut.reject(dt)}return ut.promise}sendWithStream(g,et,ot,ct){const ut=this.streamId++,dt=this.sourceName,ft=this.targetName,St=this.comObj;return new ReadableStream({start:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut]={controller:kt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:dt,targetName:ft,action:g,streamId:ut,data:et,desiredSize:kt.desiredSize},ct),Tt.promise},pull:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut].pullCall=Tt,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.PULL,streamId:ut,desiredSize:kt.desiredSize}),Tt.promise},cancel:kt=>{assert(kt instanceof Error,"cancel must have a valid reason");const Tt=Promise.withResolvers();return this.streamControllers[ut].cancelCall=Tt,this.streamControllers[ut].isClosed=!0,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.CANCEL,streamId:ut,reason:wrapReason(kt)}),Tt.promise}},ot)}destroy(){var g;(g=Ht(this,v1))==null||g.abort(),xn(this,v1,null)}}v1=new WeakMap,hT=new WeakSet,x3=function({data:g}){if(g.targetName!==this.sourceName)return;if(g.stream){An(this,fT,E3).call(this,g);return}if(g.callback){const ot=g.callbackId,ct=this.callbackCapabilities[ot];if(!ct)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],g.callback===CallbackKind.DATA)ct.resolve(g.data);else if(g.callback===CallbackKind.ERROR)ct.reject(wrapReason(g.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[g.action];if(!et)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const ot=this.sourceName,ct=g.sourceName,ut=this.comObj;Promise.try(et,g.data).then(function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.DATA,callbackId:g.callbackId,data:dt})},function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.ERROR,callbackId:g.callbackId,reason:wrapReason(dt)})});return}if(g.streamId){An(this,dT,b3).call(this,g);return}et(g.data)},dT=new WeakSet,b3=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this,ft=this.actionHandler[g.action],St={enqueue(kt,Tt=1,jt){if(this.isCancelled)return;const Rt=this.desiredSize;this.desiredSize-=Tt,Rt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ENQUEUE,streamId:et,chunk:kt},jt)},close(){this.isCancelled||(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CLOSE,streamId:et}),delete dt.streamSinks[et])},error(kt){assert(kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ERROR,streamId:et,reason:wrapReason(kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[et]=St,Promise.try(ft,g.data,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,reason:wrapReason(kt)})})},fT=new WeakSet,E3=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this.streamControllers[et],ft=this.streamSinks[et];switch(g.stream){case StreamKind.START_COMPLETE:g.success?dt.startCall.resolve():dt.startCall.reject(wrapReason(g.reason));break;case StreamKind.PULL_COMPLETE:g.success?dt.pullCall.resolve():dt.pullCall.reject(wrapReason(g.reason));break;case StreamKind.PULL:if(!ft){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0});break}ft.desiredSize<=0&&g.desiredSize>0&&ft.sinkCapability.resolve(),ft.desiredSize=g.desiredSize,Promise.try(ft.onPull||onFn).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,reason:wrapReason(kt)})});break;case StreamKind.ENQUEUE:if(assert(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(g.chunk);break;case StreamKind.CLOSE:if(assert(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),An(this,x1,sw).call(this,dt,et);break;case StreamKind.ERROR:assert(dt,"error should have stream controller"),dt.controller.error(wrapReason(g.reason)),An(this,x1,sw).call(this,dt,et);break;case StreamKind.CANCEL_COMPLETE:g.success?dt.cancelCall.resolve():dt.cancelCall.reject(wrapReason(g.reason)),An(this,x1,sw).call(this,dt,et);break;case StreamKind.CANCEL:if(!ft)break;const St=wrapReason(g.reason);Promise.try(ft.onCancel||onFn,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,reason:wrapReason(kt)})}),ft.sinkCapability.reject(St),ft.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},x1=new WeakSet,sw=async function(g,et){var ot,ct,ut;await Promise.allSettled([(ot=g.startCall)==null?void 0:ot.promise,(ct=g.pullCall)==null?void 0:ct.promise,(ut=g.cancelCall)==null?void 0:ut.promise]),delete this.streamControllers[et]};var vE;class BaseCanvasFactory{constructor({enableHWA:g=!1}){vn(this,vE,!1);xn(this,vE,g)}create(g,et){if(g<=0||et<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(g,et);return{canvas:ot,context:ot.getContext("2d",{willReadFrequently:!Ht(this,vE)})}}reset(g,et,ot){if(!g.canvas)throw new Error("Canvas is not specified");if(et<=0||ot<=0)throw new Error("Invalid canvas size");g.canvas.width=et,g.canvas.height=ot}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,et){unreachable("Abstract method `_createCanvas` called.")}}vE=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document,enableHWA:et=!1}){super({enableHWA:et}),this._document=g}_createCanvas(g,et){const ot=this._document.createElement("canvas");return ot.width=g,ot.height=et,ot}}class BaseCMapReaderFactory{constructor({baseUrl:g=null,isCompressed:et=!0}){this.baseUrl=g,this.isCompressed=et}async fetch({name:g}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!g)throw new Error("CMap name must be specified.");const et=this.baseUrl+g+(this.isCompressed?".bcmap":"");return this._fetch(et).then(ot=>({cMapData:ot,isCompressed:this.isCompressed})).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){const et=await fetchData(g,this.isCompressed?"arraybuffer":"text");return et instanceof ArrayBuffer?new Uint8Array(et):stringToBytes(et)}}class BaseFilterFactory{addFilter(g){return"none"}addHCMFilter(g,et){return"none"}addAlphaFilter(g){return"none"}addLuminosityFilter(g){return"none"}addHighlightHCMFilter(g,et,ot,ct,ut){return"none"}destroy(g=!1){}}var y0,b1,Yu,Xu,zs,v0,x0,vs,$s,b0,gx,Yp,jy,E1,ow,Xp,Fy,pT,S3,xE,tC,Jp,$y,E0,yx,S0,vx,bE,nC,w0,xx;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:et,ownerDocument:ot=globalThis.document}){super();vn(this,vs);vn(this,b0);vn(this,Yp);vn(this,E1);vn(this,Xp);vn(this,pT);vn(this,xE);vn(this,Jp);vn(this,E0);vn(this,S0);vn(this,bE);vn(this,w0);vn(this,y0,void 0);vn(this,b1,void 0);vn(this,Yu,void 0);vn(this,Xu,void 0);vn(this,zs,void 0);vn(this,v0,void 0);vn(this,x0,0);xn(this,Xu,et),xn(this,zs,ot)}addFilter(et){if(!et)return"none";let ot=Ht(this,vs,$s).get(et);if(ot)return ot;const[ct,ut,dt]=An(this,E1,ow).call(this,et),ft=et.length===1?ct:`${ct}${ut}${dt}`;if(ot=Ht(this,vs,$s).get(ft),ot)return Ht(this,vs,$s).set(et,ot),ot;const St=`g_${Ht(this,Xu)}_transfer_map_${cs(this,x0)._++}`,kt=An(this,Xp,Fy).call(this,St);Ht(this,vs,$s).set(et,kt),Ht(this,vs,$s).set(ft,kt);const Tt=An(this,Jp,$y).call(this,St);return An(this,S0,vx).call(this,ct,ut,dt,Tt),kt}addHCMFilter(et,ot){var $t;const ct=`${et}-${ot}`,ut="base";let dt=Ht(this,b0,gx).get(ut);if((dt==null?void 0:dt.key)===ct||(dt?(($t=dt.filter)==null||$t.remove(),dt.key=ct,dt.url="none",dt.filter=null):(dt={key:ct,url:"none",filter:null},Ht(this,b0,gx).set(ut,dt)),!et||!ot))return dt.url;const ft=An(this,w0,xx).call(this,et);et=Util$1.makeHexColor(...ft);const St=An(this,w0,xx).call(this,ot);if(ot=Util$1.makeHexColor(...St),Ht(this,Yp,jy).style.color="",et==="#000000"&&ot==="#ffffff"||et===ot)return dt.url;const kt=new Array(256);for(let zt=0;zt<=255;zt++){const Kt=zt/255;kt[zt]=Kt<=.03928?Kt/12.92:((Kt+.055)/1.055)**2.4}const Tt=kt.join(","),jt=`g_${Ht(this,Xu)}_hcm_filter`,Rt=dt.filter=An(this,Jp,$y).call(this,jt);An(this,S0,vx).call(this,Tt,Tt,Tt,Rt),An(this,xE,tC).call(this,Rt);const Ft=(zt,Kt)=>{const Bt=ft[zt]/255,Ut=St[zt]/255,Jt=new Array(Kt+1);for(let en=0;en<=Kt;en++)Jt[en]=Bt+en/Kt*(Ut-Bt);return Jt.join(",")};return An(this,S0,vx).call(this,Ft(0,5),Ft(1,5),Ft(2,5),Rt),dt.url=An(this,Xp,Fy).call(this,jt),dt.url}addAlphaFilter(et){let ot=Ht(this,vs,$s).get(et);if(ot)return ot;const[ct]=An(this,E1,ow).call(this,[et]),ut=`alpha_${ct}`;if(ot=Ht(this,vs,$s).get(ut),ot)return Ht(this,vs,$s).set(et,ot),ot;const dt=`g_${Ht(this,Xu)}_alpha_map_${cs(this,x0)._++}`,ft=An(this,Xp,Fy).call(this,dt);Ht(this,vs,$s).set(et,ft),Ht(this,vs,$s).set(ut,ft);const St=An(this,Jp,$y).call(this,dt);return An(this,bE,nC).call(this,ct,St),ft}addLuminosityFilter(et){let ot=Ht(this,vs,$s).get(et||"luminosity");if(ot)return ot;let ct,ut;if(et?([ct]=An(this,E1,ow).call(this,[et]),ut=`luminosity_${ct}`):ut="luminosity",ot=Ht(this,vs,$s).get(ut),ot)return Ht(this,vs,$s).set(et,ot),ot;const dt=`g_${Ht(this,Xu)}_luminosity_map_${cs(this,x0)._++}`,ft=An(this,Xp,Fy).call(this,dt);Ht(this,vs,$s).set(et,ft),Ht(this,vs,$s).set(ut,ft);const St=An(this,Jp,$y).call(this,dt);return An(this,pT,S3).call(this,St),et&&An(this,bE,nC).call(this,ct,St),ft}addHighlightHCMFilter(et,ot,ct,ut,dt){var Ut;const ft=`${ot}-${ct}-${ut}-${dt}`;let St=Ht(this,b0,gx).get(et);if((St==null?void 0:St.key)===ft||(St?((Ut=St.filter)==null||Ut.remove(),St.key=ft,St.url="none",St.filter=null):(St={key:ft,url:"none",filter:null},Ht(this,b0,gx).set(et,St)),!ot||!ct))return St.url;const[kt,Tt]=[ot,ct].map(An(this,w0,xx).bind(this));let jt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),Rt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[Ft,$t]=[ut,dt].map(An(this,w0,xx).bind(this));Rt<jt&&([jt,Rt,Ft,$t]=[Rt,jt,$t,Ft]),Ht(this,Yp,jy).style.color="";const zt=(Jt,en,tn)=>{const nn=new Array(256),rn=(Rt-jt)/tn,on=Jt/255,dn=(en-Jt)/(255*tn);let cn=0;for(let fn=0;fn<=tn;fn++){const mn=Math.round(jt+fn*rn),En=on+fn*dn;for(let Sn=cn;Sn<=mn;Sn++)nn[Sn]=En;cn=mn+1}for(let fn=cn;fn<256;fn++)nn[fn]=nn[cn-1];return nn.join(",")},Kt=`g_${Ht(this,Xu)}_hcm_${et}_filter`,Bt=St.filter=An(this,Jp,$y).call(this,Kt);return An(this,xE,tC).call(this,Bt),An(this,S0,vx).call(this,zt(Ft[0],$t[0],5),zt(Ft[1],$t[1],5),zt(Ft[2],$t[2],5),Bt),St.url=An(this,Xp,Fy).call(this,Kt),St.url}destroy(et=!1){var ot,ct,ut,dt;et&&((ot=Ht(this,v0))!=null&&ot.size)||((ct=Ht(this,Yu))==null||ct.parentNode.parentNode.remove(),xn(this,Yu,null),(ut=Ht(this,b1))==null||ut.clear(),xn(this,b1,null),(dt=Ht(this,v0))==null||dt.clear(),xn(this,v0,null),xn(this,x0,0))}}y0=new WeakMap,b1=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,zs=new WeakMap,v0=new WeakMap,x0=new WeakMap,vs=new WeakSet,$s=function(){return Ht(this,b1)||xn(this,b1,new Map)},b0=new WeakSet,gx=function(){return Ht(this,v0)||xn(this,v0,new Map)},Yp=new WeakSet,jy=function(){if(!Ht(this,Yu)){const et=Ht(this,zs).createElement("div"),{style:ot}=et;ot.visibility="hidden",ot.contain="strict",ot.width=ot.height=0,ot.position="absolute",ot.top=ot.left=0,ot.zIndex=-1;const ct=Ht(this,zs).createElementNS(SVG_NS,"svg");ct.setAttribute("width",0),ct.setAttribute("height",0),xn(this,Yu,Ht(this,zs).createElementNS(SVG_NS,"defs")),et.append(ct),ct.append(Ht(this,Yu)),Ht(this,zs).body.append(et)}return Ht(this,Yu)},E1=new WeakSet,ow=function(et){if(et.length===1){const kt=et[0],Tt=new Array(256);for(let Rt=0;Rt<256;Rt++)Tt[Rt]=kt[Rt]/255;const jt=Tt.join(",");return[jt,jt,jt]}const[ot,ct,ut]=et,dt=new Array(256),ft=new Array(256),St=new Array(256);for(let kt=0;kt<256;kt++)dt[kt]=ot[kt]/255,ft[kt]=ct[kt]/255,St[kt]=ut[kt]/255;return[dt.join(","),ft.join(","),St.join(",")]},Xp=new WeakSet,Fy=function(et){if(Ht(this,y0)===void 0){xn(this,y0,"");const ot=Ht(this,zs).URL;ot!==Ht(this,zs).baseURI&&(isDataScheme(ot)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):xn(this,y0,updateUrlHash(ot,"")))}return`url(${Ht(this,y0)}#${et})`},pT=new WeakSet,S3=function(et){const ot=Ht(this,zs).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),et.append(ot)},xE=new WeakSet,tC=function(et){const ot=Ht(this,zs).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot)},Jp=new WeakSet,$y=function(et){const ot=Ht(this,zs).createElementNS(SVG_NS,"filter");return ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("id",et),Ht(this,Yp,jy).append(ot),ot},E0=new WeakSet,yx=function(et,ot,ct){const ut=Ht(this,zs).createElementNS(SVG_NS,ot);ut.setAttribute("type","discrete"),ut.setAttribute("tableValues",ct),et.append(ut)},S0=new WeakSet,vx=function(et,ot,ct,ut){const dt=Ht(this,zs).createElementNS(SVG_NS,"feComponentTransfer");ut.append(dt),An(this,E0,yx).call(this,dt,"feFuncR",et),An(this,E0,yx).call(this,dt,"feFuncG",ot),An(this,E0,yx).call(this,dt,"feFuncB",ct)},bE=new WeakSet,nC=function(et,ot){const ct=Ht(this,zs).createElementNS(SVG_NS,"feComponentTransfer");ot.append(ct),An(this,E0,yx).call(this,ct,"feFuncA",et)},w0=new WeakSet,xx=function(et){return Ht(this,Yp,jy).style.color=et,getRGB(getComputedStyle(Ht(this,Yp,jy)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!g)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load font data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}class BaseWasmFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!g)throw new Error("Wasm filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load wasm data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(it){const et=await process.getBuiltinModule("fs").promises.readFile(it);return new Uint8Array(et)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(g,et){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(g,et)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(g){return node_utils_fetchData(g)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(it,g,et,ot,ct,ut){it[g*4+0]=Math.min(it[g*4+0],et),it[g*4+1]=Math.min(it[g*4+1],ot),it[g*4+2]=Math.max(it[g*4+2],ct),it[g*4+3]=Math.max(it[g*4+3],ut)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var S1,Qp;class BBoxReader{constructor(g,et){vn(this,S1,void 0);vn(this,Qp,void 0);xn(this,S1,g),xn(this,Qp,et)}get length(){return Ht(this,S1).length}isEmpty(g){return Ht(this,S1)[g]===EMPTY_BBOX}minX(g){return Ht(this,Qp)[g*4+0]/256}minY(g){return Ht(this,Qp)[g*4+1]/256}maxX(g){return(Ht(this,Qp)[g*4+2]+1)/256}maxY(g){return(Ht(this,Qp)[g*4+3]+1)/256}}S1=new WeakMap,Qp=new WeakMap;const ensureDebugMetadata=(it,g)=>{if(!it)return;let et=it.get(g);return et||(et={dependencies:new Set,isRenderingOperation:!1},it.set(g,et)),et};var fo,po,k0,Dl,T0,Ju,_r,Nr,Qu,mo,EE,w1,A0,_0,Zu,Hs,du,SE,rC;class CanvasDependencyTracker{constructor(g,et,ot=!1){vn(this,SE);vn(this,fo,{__proto__:null});vn(this,po,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});vn(this,k0,new Map);vn(this,Dl,[]);vn(this,T0,[]);vn(this,Ju,[[1,0,0,1,0,0]]);vn(this,_r,[-1/0,-1/0,1/0,1/0]);vn(this,Nr,new Float64Array([1/0,1/0,-1/0,-1/0]));vn(this,Qu,-1);vn(this,mo,new Set);vn(this,EE,new Map);vn(this,w1,new Map);vn(this,A0,void 0);vn(this,_0,void 0);vn(this,Zu,void 0);vn(this,Hs,void 0);vn(this,du,void 0);xn(this,A0,g.width),xn(this,_0,g.height),An(this,SE,rC).call(this,et),ot&&xn(this,du,new Map)}growOperationsCount(g){g>=Ht(this,Hs).length&&An(this,SE,rC).call(this,g,Ht(this,Hs))}save(g){return xn(this,fo,{__proto__:Ht(this,fo)}),xn(this,po,{__proto__:Ht(this,po),transform:{__proto__:Ht(this,po).transform},moveText:{__proto__:Ht(this,po).moveText},sameLineText:{__proto__:Ht(this,po).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:Ht(this,po)[FORCED_DEPENDENCY_LABEL]}}),xn(this,_r,{__proto__:Ht(this,_r)}),Ht(this,Dl).push(g),this}restore(g){var ct;const et=Object.getPrototypeOf(Ht(this,fo));if(et===null)return this;xn(this,fo,et),xn(this,po,Object.getPrototypeOf(Ht(this,po))),xn(this,_r,Object.getPrototypeOf(Ht(this,_r)));const ot=Ht(this,Dl).pop();return ot!==void 0&&((ct=ensureDebugMetadata(Ht(this,du),g))==null||ct.dependencies.add(ot),Ht(this,Hs)[g]=Ht(this,Hs)[ot]),this}recordOpenMarker(g){return Ht(this,Dl).push(g),this}getOpenMarker(){return Ht(this,Dl).length===0?null:Ht(this,Dl).at(-1)}recordCloseMarker(g){var ot;const et=Ht(this,Dl).pop();return et!==void 0&&((ot=ensureDebugMetadata(Ht(this,du),g))==null||ot.dependencies.add(et),Ht(this,Hs)[g]=Ht(this,Hs)[et]),this}beginMarkedContent(g){return Ht(this,T0).push(g),this}endMarkedContent(g){var ot;const et=Ht(this,T0).pop();return et!==void 0&&((ot=ensureDebugMetadata(Ht(this,du),g))==null||ot.dependencies.add(et),Ht(this,Hs)[g]=Ht(this,Hs)[et]),this}pushBaseTransform(g){return Ht(this,Ju).push(Util$1.multiplyByDOMMatrix(Ht(this,Ju).at(-1),g.getTransform())),this}popBaseTransform(){return Ht(this,Ju).length>1&&Ht(this,Ju).pop(),this}recordSimpleData(g,et){return Ht(this,fo)[g]=et,this}recordIncrementalData(g,et){return Ht(this,po)[g].push(et),this}resetIncrementalData(g,et){return Ht(this,po)[g].length=0,this}recordNamedData(g,et){return Ht(this,k0).set(g,et),this}recordSimpleDataFromNamed(g,et,ot){Ht(this,fo)[g]=Ht(this,k0).get(et)??ot}recordFutureForcedDependency(g,et){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,et),this}inheritSimpleDataAsFutureForcedDependencies(g){for(const et of g)et in Ht(this,fo)&&this.recordFutureForcedDependency(et,Ht(this,fo)[et]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const g of Ht(this,mo))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,g);return this}resetBBox(g){return Ht(this,Qu)!==g&&(xn(this,Qu,g),Ht(this,Nr)[0]=1/0,Ht(this,Nr)[1]=1/0,Ht(this,Nr)[2]=-1/0,Ht(this,Nr)[3]=-1/0),this}recordClipBox(g,et,ot,ct,ut,dt){const ft=Util$1.multiplyByDOMMatrix(Ht(this,Ju).at(-1),et.getTransform()),St=[1/0,1/0,-1/0,-1/0];Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],ft,St);const kt=Util$1.intersect(Ht(this,_r),St);return kt?(Ht(this,_r)[0]=kt[0],Ht(this,_r)[1]=kt[1],Ht(this,_r)[2]=kt[2],Ht(this,_r)[3]=kt[3]):(Ht(this,_r)[0]=Ht(this,_r)[1]=1/0,Ht(this,_r)[2]=Ht(this,_r)[3]=-1/0),this}recordBBox(g,et,ot,ct,ut,dt){const ft=Ht(this,_r);if(ft[0]===1/0)return this;const St=Util$1.multiplyByDOMMatrix(Ht(this,Ju).at(-1),et.getTransform());if(ft[0]===-1/0)return Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],St,Ht(this,Nr)),this;const kt=[1/0,1/0,-1/0,-1/0];return Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],St,kt),Ht(this,Nr)[0]=Math.min(Ht(this,Nr)[0],Math.max(kt[0],ft[0])),Ht(this,Nr)[1]=Math.min(Ht(this,Nr)[1],Math.max(kt[1],ft[1])),Ht(this,Nr)[2]=Math.max(Ht(this,Nr)[2],Math.min(kt[2],ft[2])),Ht(this,Nr)[3]=Math.max(Ht(this,Nr)[3],Math.min(kt[3],ft[3])),this}recordCharacterBBox(g,et,ot,ct=1,ut=0,dt=0,ft){const St=ot.bbox;let kt,Tt;if(St&&(kt=St[2]!==St[0]&&St[3]!==St[1]&&Ht(this,w1).get(ot),kt!==!1&&(Tt=[0,0,0,0],Util$1.axialAlignedBoundingBox(St,ot.fontMatrix,Tt),(ct!==1||ut!==0||dt!==0)&&Util$1.scaleMinMax([ct,0,0,-ct,ut,dt],Tt),kt)))return this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]);if(!ft)return this.recordFullPageBBox(g);const jt=ft();return St&&Tt&&kt===void 0&&(kt=Tt[0]<=ut-jt.actualBoundingBoxLeft&&Tt[2]>=ut+jt.actualBoundingBoxRight&&Tt[1]<=dt-jt.actualBoundingBoxAscent&&Tt[3]>=dt+jt.actualBoundingBoxDescent,Ht(this,w1).set(ot,kt),kt)?this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]):this.recordBBox(g,et,ut-jt.actualBoundingBoxLeft,ut+jt.actualBoundingBoxRight,dt-jt.actualBoundingBoxAscent,dt+jt.actualBoundingBoxDescent)}recordFullPageBBox(g){return Ht(this,Nr)[0]=Math.max(0,Ht(this,_r)[0]),Ht(this,Nr)[1]=Math.max(0,Ht(this,_r)[1]),Ht(this,Nr)[2]=Math.min(Ht(this,A0),Ht(this,_r)[2]),Ht(this,Nr)[3]=Math.min(Ht(this,_0),Ht(this,_r)[3]),this}getSimpleIndex(g){return Ht(this,fo)[g]}recordDependencies(g,et){const ot=Ht(this,mo),ct=Ht(this,fo),ut=Ht(this,po);for(const dt of et)dt in Ht(this,fo)?ot.add(ct[dt]):dt in ut&&ut[dt].forEach(ot.add,ot);return this}recordNamedDependency(g,et){return Ht(this,k0).has(et)&&Ht(this,mo).add(Ht(this,k0).get(et)),this}recordOperation(g,et=!1){if(this.recordDependencies(g,[FORCED_DEPENDENCY_LABEL]),Ht(this,du)){const ot=ensureDebugMetadata(Ht(this,du),g),{dependencies:ct}=ot;Ht(this,mo).forEach(ct.add,ct),Ht(this,Dl).forEach(ct.add,ct),Ht(this,T0).forEach(ct.add,ct),ct.delete(g),ot.isRenderingOperation=!0}if(Ht(this,Qu)===g){const ot=floor(Ht(this,Nr)[0]*256/Ht(this,A0)),ct=floor(Ht(this,Nr)[1]*256/Ht(this,_0)),ut=ceil(Ht(this,Nr)[2]*256/Ht(this,A0)),dt=ceil(Ht(this,Nr)[3]*256/Ht(this,_0));expandBBox(Ht(this,Zu),g,ot,ct,ut,dt);for(const ft of Ht(this,mo))ft!==g&&expandBBox(Ht(this,Zu),ft,ot,ct,ut,dt);for(const ft of Ht(this,Dl))ft!==g&&expandBBox(Ht(this,Zu),ft,ot,ct,ut,dt);for(const ft of Ht(this,T0))ft!==g&&expandBBox(Ht(this,Zu),ft,ot,ct,ut,dt);et||(Ht(this,mo).clear(),xn(this,Qu,-1))}return this}recordShowTextOperation(g,et=!1){const ot=Array.from(Ht(this,mo));this.recordOperation(g,et),this.recordIncrementalData("sameLineText",g);for(const ct of ot)this.recordIncrementalData("sameLineText",ct);return this}bboxToClipBoxDropOperation(g,et=!1){return Ht(this,Qu)===g&&(xn(this,Qu,-1),Ht(this,_r)[0]=Math.max(Ht(this,_r)[0],Ht(this,Nr)[0]),Ht(this,_r)[1]=Math.max(Ht(this,_r)[1],Ht(this,Nr)[1]),Ht(this,_r)[2]=Math.min(Ht(this,_r)[2],Ht(this,Nr)[2]),Ht(this,_r)[3]=Math.min(Ht(this,_r)[3],Ht(this,Nr)[3]),et||Ht(this,mo).clear()),this}_takePendingDependencies(){const g=Ht(this,mo);return xn(this,mo,new Set),g}_extractOperation(g){const et=Ht(this,EE).get(g);return Ht(this,EE).delete(g),et}_pushPendingDependencies(g){for(const et of g)Ht(this,mo).add(et)}take(){return Ht(this,w1).clear(),new BBoxReader(Ht(this,Hs),Ht(this,Zu))}takeDebugMetadata(){return Ht(this,du)}}fo=new WeakMap,po=new WeakMap,k0=new WeakMap,Dl=new WeakMap,T0=new WeakMap,Ju=new WeakMap,_r=new WeakMap,Nr=new WeakMap,Qu=new WeakMap,mo=new WeakMap,EE=new WeakMap,w1=new WeakMap,A0=new WeakMap,_0=new WeakMap,Zu=new WeakMap,Hs=new WeakMap,du=new WeakMap,SE=new WeakSet,rC=function(g,et){const ot=new ArrayBuffer(g*4);xn(this,Zu,new Uint8ClampedArray(ot)),xn(this,Hs,new Uint32Array(ot)),et&&et.length>0?(Ht(this,Hs).set(et),Ht(this,Hs).fill(EMPTY_BBOX,et.length)):Ht(this,Hs).fill(EMPTY_BBOX)};var Lr,Qr,Ll,k1,T1;const GC=class GC{constructor(g,et,ot){vn(this,Lr,void 0);vn(this,Qr,void 0);vn(this,Ll,void 0);vn(this,k1,0);vn(this,T1,0);if(g instanceof GC&&Ht(g,Ll)===!!ot)return g;xn(this,Lr,g),xn(this,Qr,et),xn(this,Ll,!!ot)}growOperationsCount(){throw new Error("Unreachable")}save(g){return cs(this,T1)._++,Ht(this,Lr).save(Ht(this,Qr)),this}restore(g){return Ht(this,T1)>0&&(Ht(this,Lr).restore(Ht(this,Qr)),cs(this,T1)._--),this}recordOpenMarker(g){return cs(this,k1)._++,this}getOpenMarker(){return Ht(this,k1)>0?Ht(this,Qr):Ht(this,Lr).getOpenMarker()}recordCloseMarker(g){return cs(this,k1)._--,this}beginMarkedContent(g){return this}endMarkedContent(g){return this}pushBaseTransform(g){return Ht(this,Lr).pushBaseTransform(g),this}popBaseTransform(){return Ht(this,Lr).popBaseTransform(),this}recordSimpleData(g,et){return Ht(this,Lr).recordSimpleData(g,Ht(this,Qr)),this}recordIncrementalData(g,et){return Ht(this,Lr).recordIncrementalData(g,Ht(this,Qr)),this}resetIncrementalData(g,et){return Ht(this,Lr).resetIncrementalData(g,Ht(this,Qr)),this}recordNamedData(g,et){return this}recordSimpleDataFromNamed(g,et,ot){return Ht(this,Lr).recordSimpleDataFromNamed(g,et,Ht(this,Qr)),this}recordFutureForcedDependency(g,et){return Ht(this,Lr).recordFutureForcedDependency(g,Ht(this,Qr)),this}inheritSimpleDataAsFutureForcedDependencies(g){return Ht(this,Lr).inheritSimpleDataAsFutureForcedDependencies(g),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Ht(this,Lr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(g){return Ht(this,Ll)||Ht(this,Lr).resetBBox(Ht(this,Qr)),this}recordClipBox(g,et,ot,ct,ut,dt){return Ht(this,Ll)||Ht(this,Lr).recordClipBox(Ht(this,Qr),et,ot,ct,ut,dt),this}recordBBox(g,et,ot,ct,ut,dt){return Ht(this,Ll)||Ht(this,Lr).recordBBox(Ht(this,Qr),et,ot,ct,ut,dt),this}recordCharacterBBox(g,et,ot,ct,ut,dt,ft){return Ht(this,Ll)||Ht(this,Lr).recordCharacterBBox(Ht(this,Qr),et,ot,ct,ut,dt,ft),this}recordFullPageBBox(g){return Ht(this,Ll)||Ht(this,Lr).recordFullPageBBox(Ht(this,Qr)),this}getSimpleIndex(g){return Ht(this,Lr).getSimpleIndex(g)}recordDependencies(g,et){return Ht(this,Lr).recordDependencies(Ht(this,Qr),et),this}recordNamedDependency(g,et){return Ht(this,Lr).recordNamedDependency(Ht(this,Qr),et),this}recordOperation(g){return Ht(this,Lr).recordOperation(Ht(this,Qr),!0),this}recordShowTextOperation(g){return Ht(this,Lr).recordShowTextOperation(Ht(this,Qr),!0),this}bboxToClipBoxDropOperation(g){return Ht(this,Ll)||Ht(this,Lr).bboxToClipBoxDropOperation(Ht(this,Qr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Lr=new WeakMap,Qr=new WeakMap,Ll=new WeakMap,k1=new WeakMap,T1=new WeakMap;let CanvasNestedDependencyTracker=GC;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(it,g){if(!g)return;const et=g[2]-g[0],ot=g[3]-g[1],ct=new Path2D;ct.rect(g[0],g[1],et,ot),it.clip(ct)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let et;this._type==="axial"?et=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ot of this._colorStops)et.addColorStop(ot[0],ot[1]);return et}getPattern(g,et,ot,ct){let ut;if(ct===PathType.STROKE||ct===PathType.FILL){const dt=et.current.getClippedPathBoundingBox(ct,getCurrentTransform(g))||[0,0,0,0],ft=Math.ceil(dt[2]-dt[0])||1,St=Math.ceil(dt[3]-dt[1])||1,kt=et.cachedCanvases.getCanvas("pattern",ft,St),Tt=kt.context;Tt.clearRect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.beginPath(),Tt.rect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.translate(-dt[0],-dt[1]),ot=Util$1.transform(ot,[1,0,0,1,dt[0],dt[1]]),Tt.transform(...et.baseTransform),this.matrix&&Tt.transform(...this.matrix),applyBoundingBox(Tt,this._bbox),Tt.fillStyle=this._createGradient(Tt),Tt.fill(),ut=g.createPattern(kt.canvas,"no-repeat");const jt=new DOMMatrix(ot);ut.setTransform(jt)}else applyBoundingBox(g,this._bbox),ut=this._createGradient(g);return ut}}function drawTriangle(it,g,et,ot,ct,ut,dt,ft){const St=g.coords,kt=g.colors,Tt=it.data,jt=it.width*4;let Rt;St[et+1]>St[ot+1]&&(Rt=et,et=ot,ot=Rt,Rt=ut,ut=dt,dt=Rt),St[ot+1]>St[ct+1]&&(Rt=ot,ot=ct,ct=Rt,Rt=dt,dt=ft,ft=Rt),St[et+1]>St[ot+1]&&(Rt=et,et=ot,ot=Rt,Rt=ut,ut=dt,dt=Rt);const Ft=(St[et]+g.offsetX)*g.scaleX,$t=(St[et+1]+g.offsetY)*g.scaleY,zt=(St[ot]+g.offsetX)*g.scaleX,Kt=(St[ot+1]+g.offsetY)*g.scaleY,Bt=(St[ct]+g.offsetX)*g.scaleX,Ut=(St[ct+1]+g.offsetY)*g.scaleY;if($t>=Ut)return;const Jt=kt[ut],en=kt[ut+1],tn=kt[ut+2],nn=kt[dt],rn=kt[dt+1],on=kt[dt+2],dn=kt[ft],cn=kt[ft+1],fn=kt[ft+2],mn=Math.round($t),En=Math.round(Ut);let Sn,wn,hn,yn,an,un,bn,pn;for(let kn=mn;kn<=En;kn++){if(kn<Kt){const Mn=kn<$t?0:($t-kn)/($t-Kt);Sn=Ft-(Ft-zt)*Mn,wn=Jt-(Jt-nn)*Mn,hn=en-(en-rn)*Mn,yn=tn-(tn-on)*Mn}else{let Mn;kn>Ut?Mn=1:Kt===Ut?Mn=0:Mn=(Kt-kn)/(Kt-Ut),Sn=zt-(zt-Bt)*Mn,wn=nn-(nn-dn)*Mn,hn=rn-(rn-cn)*Mn,yn=on-(on-fn)*Mn}let _n;kn<$t?_n=0:kn>Ut?_n=1:_n=($t-kn)/($t-Ut),an=Ft-(Ft-Bt)*_n,un=Jt-(Jt-dn)*_n,bn=en-(en-cn)*_n,pn=tn-(tn-fn)*_n;const Rn=Math.round(Math.min(Sn,an)),Nn=Math.round(Math.max(Sn,an));let Cn=jt*kn+Rn*4;for(let Mn=Rn;Mn<=Nn;Mn++)_n=(Sn-Mn)/(Sn-an),_n<0?_n=0:_n>1&&(_n=1),Tt[Cn++]=wn-(wn-un)*_n|0,Tt[Cn++]=hn-(hn-bn)*_n|0,Tt[Cn++]=yn-(yn-pn)*_n|0,Tt[Cn++]=255}}function drawFigure(it,g,et){const ot=g.coords,ct=g.colors;let ut,dt;switch(g.type){case"lattice":const ft=g.verticesPerRow,St=Math.floor(ot.length/ft)-1,kt=ft-1;for(ut=0;ut<St;ut++){let Tt=ut*ft;for(let jt=0;jt<kt;jt++,Tt++)drawTriangle(it,et,ot[Tt],ot[Tt+1],ot[Tt+ft],ct[Tt],ct[Tt+1],ct[Tt+ft]),drawTriangle(it,et,ot[Tt+ft+1],ot[Tt+1],ot[Tt+ft],ct[Tt+ft+1],ct[Tt+1],ct[Tt+ft])}break;case"triangles":for(ut=0,dt=ot.length;ut<dt;ut+=3)drawTriangle(it,et,ot[ut],ot[ut+1],ot[ut+2],ct[ut],ct[ut+1],ct[ut+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[6],this._background=g[7],this.matrix=null}_createMeshCanvas(g,et,ot){const ft=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),kt=Math.ceil(this._bounds[2])-ft,Tt=Math.ceil(this._bounds[3])-St,jt=Math.min(Math.ceil(Math.abs(kt*g[0]*1.1)),3e3),Rt=Math.min(Math.ceil(Math.abs(Tt*g[1]*1.1)),3e3),Ft=kt/jt,$t=Tt/Rt,zt={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-St,scaleX:1/Ft,scaleY:1/$t},Kt=jt+2*2,Bt=Rt+2*2,Ut=ot.getCanvas("mesh",Kt,Bt),Jt=Ut.context,en=Jt.createImageData(jt,Rt);if(et){const nn=en.data;for(let rn=0,on=nn.length;rn<on;rn+=4)nn[rn]=et[0],nn[rn+1]=et[1],nn[rn+2]=et[2],nn[rn+3]=255}for(const nn of this._figures)drawFigure(en,nn,zt);return Jt.putImageData(en,2,2),{canvas:Ut.canvas,offsetX:ft-2*Ft,offsetY:St-2*$t,scaleX:Ft,scaleY:$t}}isModifyingCurrentTransform(){return!0}getPattern(g,et,ot,ct){applyBoundingBox(g,this._bbox);const ut=new Float32Array(2);if(ct===PathType.SHADING)Util$1.singularValueDecompose2dScale(getCurrentTransform(g),ut);else if(this.matrix){Util$1.singularValueDecompose2dScale(this.matrix,ut);const[ft,St]=ut;Util$1.singularValueDecompose2dScale(et.baseTransform,ut),ut[0]*=ft,ut[1]*=St}else Util$1.singularValueDecompose2dScale(et.baseTransform,ut);const dt=this._createMeshCanvas(ut,ct===PathType.SHADING?null:this._background,et.cachedCanvases);return ct!==PathType.SHADING&&(g.setTransform(...et.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(dt.offsetX,dt.offsetY),g.scale(dt.scaleX,dt.scaleY),g.createPattern(dt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(it){switch(it[0]){case"RadialAxial":return new RadialAxialShadingPattern(it);case"Mesh":return new MeshShadingPattern(it);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${it[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},mT=class mT{constructor(g,et,ot,ct){this.color=g[1],this.operatorList=g[2],this.matrix=g[3],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.ctx=et,this.canvasGraphicsFactory=ot,this.baseTransform=ct}createPatternCanvas(g,et){var un,bn;const{bbox:ot,operatorList:ct,paintType:ut,tilingType:dt,color:ft,canvasGraphicsFactory:St}=this;let{xstep:kt,ystep:Tt}=this;kt=Math.abs(kt),Tt=Math.abs(Tt),info("TilingType: "+dt);const jt=ot[0],Rt=ot[1],Ft=ot[2],$t=ot[3],zt=Ft-jt,Kt=$t-Rt,Bt=new Float32Array(2);Util$1.singularValueDecompose2dScale(this.matrix,Bt);const[Ut,Jt]=Bt;Util$1.singularValueDecompose2dScale(this.baseTransform,Bt);const en=Ut*Bt[0],tn=Jt*Bt[1];let nn=zt,rn=Kt,on=!1,dn=!1;const cn=Math.ceil(kt*en),fn=Math.ceil(Tt*tn),mn=Math.ceil(zt*en),En=Math.ceil(Kt*tn);cn>=mn?nn=kt:on=!0,fn>=En?rn=Tt:dn=!0;const Sn=this.getSizeAndScale(nn,this.ctx.canvas.width,en),wn=this.getSizeAndScale(rn,this.ctx.canvas.height,tn),hn=g.cachedCanvases.getCanvas("pattern",Sn.size,wn.size),yn=hn.context,an=St.createCanvasGraphics(yn,et);if(an.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(an,ut,ft),yn.translate(-Sn.scale*jt,-wn.scale*Rt),an.transform(0,Sn.scale,0,0,wn.scale,0,0),yn.save(),(un=an.dependencyTracker)==null||un.save(),this.clipBbox(an,jt,Rt,Ft,$t),an.baseTransform=getCurrentTransform(an.ctx),an.executeOperatorList(ct),an.endDrawing(),(bn=an.dependencyTracker)==null||bn.restore(),yn.restore(),on||dn){const pn=hn.canvas;on&&(nn=kt),dn&&(rn=Tt);const kn=this.getSizeAndScale(nn,this.ctx.canvas.width,en),_n=this.getSizeAndScale(rn,this.ctx.canvas.height,tn),Rn=kn.size,Nn=_n.size,Cn=g.cachedCanvases.getCanvas("pattern-workaround",Rn,Nn),Mn=Cn.context,In=on?Math.floor(zt/kt):0,On=dn?Math.floor(Kt/Tt):0;for(let jn=0;jn<=In;jn++)for(let Gn=0;Gn<=On;Gn++)Mn.drawImage(pn,Rn*jn,Nn*Gn,Rn,Nn,0,0,Rn,Nn);return{canvas:Cn.canvas,scaleX:kn.scale,scaleY:_n.scale,offsetX:jt,offsetY:Rt}}return{canvas:hn.canvas,scaleX:Sn.scale,scaleY:wn.scale,offsetX:jt,offsetY:Rt}}getSizeAndScale(g,et,ot){const ct=Math.max(mT.MAX_PATTERN_SIZE,et);let ut=Math.ceil(g*ot);return ut>=ct?ut=ct:ot=ut/g,{scale:ot,size:ut}}clipBbox(g,et,ot,ct,ut){const dt=ct-et,ft=ut-ot;g.ctx.rect(et,ot,dt,ft),Util$1.axialAlignedBoundingBox([et,ot,ct,ut],getCurrentTransform(g.ctx),g.current.minMax),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,et,ot){const ct=g.ctx,ut=g.current;switch(et){case PaintType.COLORED:const{fillStyle:dt,strokeStyle:ft}=this.ctx;ct.fillStyle=ut.fillColor=dt,ct.strokeStyle=ut.strokeColor=ft;break;case PaintType.UNCOLORED:ct.fillStyle=ct.strokeStyle=ot,ut.fillColor=ut.strokeColor=ot;break;default:throw new FormatError(`Unsupported paint type: ${et}`)}}isModifyingCurrentTransform(){return!1}getPattern(g,et,ot,ct,ut){let dt=ot;ct!==PathType.SHADING&&(dt=Util$1.transform(dt,et.baseTransform),this.matrix&&(dt=Util$1.transform(dt,this.matrix)));const ft=this.createPatternCanvas(et,ut);let St=new DOMMatrix(dt);St=St.translate(ft.offsetX,ft.offsetY),St=St.scale(1/ft.scaleX,1/ft.scaleY);const kt=g.createPattern(ft.canvas,"repeat");return kt.setTransform(St),kt}};qn(mT,"MAX_PATTERN_SIZE",3e3);let TilingPattern=mT;function convertBlackAndWhiteToRGBA({src:it,srcPos:g=0,dest:et,width:ot,height:ct,nonBlackColor:ut=4294967295,inverseDecode:dt=!1}){const ft=util_FeatureTest.isLittleEndian?4278190080:255,[St,kt]=dt?[ut,ft]:[ft,ut],Tt=ot>>3,jt=ot&7,Rt=it.length;et=new Uint32Array(et.buffer);let Ft=0;for(let $t=0;$t<ct;$t++){for(const Kt=g+Tt;g<Kt;g++){const Bt=g<Rt?it[g]:255;et[Ft++]=Bt&128?kt:St,et[Ft++]=Bt&64?kt:St,et[Ft++]=Bt&32?kt:St,et[Ft++]=Bt&16?kt:St,et[Ft++]=Bt&8?kt:St,et[Ft++]=Bt&4?kt:St,et[Ft++]=Bt&2?kt:St,et[Ft++]=Bt&1?kt:St}if(jt===0)continue;const zt=g<Rt?it[g++]:255;for(let Kt=0;Kt<jt;Kt++)et[Ft++]=zt&1<<7-Kt?kt:St}return{srcPos:g,destPos:Ft}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(it,g){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){g.save(),this.__originalSave()},it.restore=function(){g.restore(),this.__originalRestore()},it.translate=function(et,ot){g.translate(et,ot),this.__originalTranslate(et,ot)},it.scale=function(et,ot){g.scale(et,ot),this.__originalScale(et,ot)},it.transform=function(et,ot,ct,ut,dt,ft){g.transform(et,ot,ct,ut,dt,ft),this.__originalTransform(et,ot,ct,ut,dt,ft)},it.setTransform=function(et,ot,ct,ut,dt,ft){g.setTransform(et,ot,ct,ut,dt,ft),this.__originalSetTransform(et,ot,ct,ut,dt,ft)},it.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},it.rotate=function(et){g.rotate(et),this.__originalRotate(et)},it.clip=function(et){g.clip(et),this.__originalClip(et)},it.moveTo=function(et,ot){g.moveTo(et,ot),this.__originalMoveTo(et,ot)},it.lineTo=function(et,ot){g.lineTo(et,ot),this.__originalLineTo(et,ot)},it.bezierCurveTo=function(et,ot,ct,ut,dt,ft){g.bezierCurveTo(et,ot,ct,ut,dt,ft),this.__originalBezierCurveTo(et,ot,ct,ut,dt,ft)},it.rect=function(et,ot,ct,ut){g.rect(et,ot,ct,ut),this.__originalRect(et,ot,ct,ut)},it.closePath=function(){g.closePath(),this.__originalClosePath()},it.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,et,ot){let ct;return this.cache[g]!==void 0?(ct=this.cache[g],this.canvasFactory.reset(ct,et,ot)):(ct=this.canvasFactory.create(et,ot),this.cache[g]=ct),ct}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const et=this.cache[g];this.canvasFactory.destroy(et),delete this.cache[g]}}}function drawImageAtIntegerCoords(it,g,et,ot,ct,ut,dt,ft,St,kt){const[Tt,jt,Rt,Ft,$t,zt]=getCurrentTransform(it);if(jt===0&&Rt===0){const Ut=dt*Tt+$t,Jt=Math.round(Ut),en=ft*Ft+zt,tn=Math.round(en),nn=(dt+St)*Tt+$t,rn=Math.abs(Math.round(nn)-Jt)||1,on=(ft+kt)*Ft+zt,dn=Math.abs(Math.round(on)-tn)||1;return it.setTransform(Math.sign(Tt),0,0,Math.sign(Ft),Jt,tn),it.drawImage(g,et,ot,ct,ut,0,0,rn,dn),it.setTransform(Tt,jt,Rt,Ft,$t,zt),[rn,dn]}if(Tt===0&&Ft===0){const Ut=ft*Rt+$t,Jt=Math.round(Ut),en=dt*jt+zt,tn=Math.round(en),nn=(ft+kt)*Rt+$t,rn=Math.abs(Math.round(nn)-Jt)||1,on=(dt+St)*jt+zt,dn=Math.abs(Math.round(on)-tn)||1;return it.setTransform(0,Math.sign(jt),Math.sign(Rt),0,Jt,tn),it.drawImage(g,et,ot,ct,ut,0,0,dn,rn),it.setTransform(Tt,jt,Rt,Ft,$t,zt),[dn,rn]}it.drawImage(g,et,ot,ct,ut,dt,ft,St,kt);const Kt=Math.hypot(Tt,jt),Bt=Math.hypot(Rt,Ft);return[Kt*St,Bt*kt]}class CanvasExtraState{constructor(g,et,ot){qn(this,"alphaIsShape",!1);qn(this,"fontSize",0);qn(this,"fontSizeScale",1);qn(this,"textMatrix",null);qn(this,"textMatrixScale",1);qn(this,"fontMatrix",FONT_IDENTITY_MATRIX);qn(this,"leading",0);qn(this,"x",0);qn(this,"y",0);qn(this,"lineX",0);qn(this,"lineY",0);qn(this,"charSpacing",0);qn(this,"wordSpacing",0);qn(this,"textHScale",1);qn(this,"textRenderingMode",TextRenderingMode.FILL);qn(this,"textRise",0);qn(this,"fillColor","#000000");qn(this,"strokeColor","#000000");qn(this,"patternFill",!1);qn(this,"patternStroke",!1);qn(this,"fillAlpha",1);qn(this,"strokeAlpha",1);qn(this,"lineWidth",1);qn(this,"activeSMask",null);qn(this,"transferMaps","none");ot==null||ot(this),this.clipBox=new Float32Array([0,0,g,et]),this.minMax=MIN_MAX_INIT.slice()}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g.minMax=this.minMax.slice(),g}getPathBoundingBox(g=PathType.FILL,et=null){const ot=this.minMax.slice();if(g===PathType.STROKE){et||unreachable("Stroke bounding box must include transform."),Util$1.singularValueDecompose2dScale(et,XY);const ct=XY[0]*this.lineWidth/2,ut=XY[1]*this.lineWidth/2;ot[0]-=ct,ot[1]-=ut,ot[2]+=ct,ot[3]+=ut}return ot}updateClipFromPath(){const g=Util$1.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(g){this.clipBox.set(g,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(g=PathType.FILL,et=null){return Util$1.intersect(this.clipBox,this.getPathBoundingBox(g,et))}}function putBinaryImageData(it,g){if(g instanceof ImageData){it.putImageData(g,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0,kt;const Tt=g.data,jt=ft.data;let Rt,Ft,$t,zt;if(g.kind===util_ImageKind.GRAYSCALE_1BPP){const Kt=Tt.byteLength,Bt=new Uint32Array(jt.buffer,0,jt.byteLength>>2),Ut=Bt.length,Jt=ot+7>>3,en=4294967295,tn=util_FeatureTest.isLittleEndian?4278190080:255;for(Rt=0;Rt<dt;Rt++){for($t=Rt<ut?FULL_CHUNK_HEIGHT:ct,kt=0,Ft=0;Ft<$t;Ft++){const nn=Kt-St;let rn=0;const on=nn>Jt?ot:nn*8-7,dn=on&-8;let cn=0,fn=0;for(;rn<dn;rn+=8)fn=Tt[St++],Bt[kt++]=fn&128?en:tn,Bt[kt++]=fn&64?en:tn,Bt[kt++]=fn&32?en:tn,Bt[kt++]=fn&16?en:tn,Bt[kt++]=fn&8?en:tn,Bt[kt++]=fn&4?en:tn,Bt[kt++]=fn&2?en:tn,Bt[kt++]=fn&1?en:tn;for(;rn<on;rn++)cn===0&&(fn=Tt[St++],cn=128),Bt[kt++]=fn&cn?en:tn,cn>>=1}for(;kt<Ut;)Bt[kt++]=0;it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}}else if(g.kind===util_ImageKind.RGBA_32BPP){for(Ft=0,zt=ot*FULL_CHUNK_HEIGHT*4,Rt=0;Rt<ut;Rt++)jt.set(Tt.subarray(St,St+zt)),St+=zt,it.putImageData(ft,0,Ft),Ft+=FULL_CHUNK_HEIGHT;Rt<dt&&(zt=ot*ct*4,jt.set(Tt.subarray(St,St+zt)),it.putImageData(ft,0,Ft))}else if(g.kind===util_ImageKind.RGB_24BPP)for($t=FULL_CHUNK_HEIGHT,zt=ot*$t,Rt=0;Rt<dt;Rt++){for(Rt>=ut&&($t=ct,zt=ot*$t),kt=0,Ft=zt;Ft--;)jt[kt++]=Tt[St++],jt[kt++]=Tt[St++],jt[kt++]=Tt[St++],jt[kt++]=255;it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${g.kind}`)}function putBinaryImageMask(it,g){if(g.bitmap){it.drawImage(g.bitmap,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0;const kt=g.data,Tt=ft.data;for(let jt=0;jt<dt;jt++){const Rt=jt<ut?FULL_CHUNK_HEIGHT:ct;({srcPos:St}=convertBlackAndWhiteToRGBA({src:kt,srcPos:St,dest:Tt,width:ot,height:Rt,nonBlackColor:0})),it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}}function copyCtxState(it,g){const et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ot of et)it[ot]!==void 0&&(g[ot]=it[ot]);it.setLineDash!==void 0&&(g.setLineDash(it.getLineDash()),g.lineDashOffset=it.lineDashOffset)}function resetCtxToDefault(it){it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0);const{filter:g}=it;g!=="none"&&g!==""&&(it.filter="none")}function getImageSmoothingEnabled(it,g){if(g)return!0;Util$1.singularValueDecompose2dScale(it,XY);const et=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=et&&XY[1]<=et}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var wE,iC,kE,sC,TE,oC;const WC=class WC{constructor(g,et,ot,ct,ut,{optionalContentConfig:dt,markedContentStack:ft=null},St,kt,Tt){vn(this,wE);vn(this,kE);vn(this,TE);this.ctx=g,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=et,this.objs=ot,this.canvasFactory=ct,this.filterFactory=ut,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ft||[],this.optionalContentConfig=dt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=St,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Tt??null}getObject(g,et,ot=null){var ct;return typeof et=="string"?((ct=this.dependencyTracker)==null||ct.recordNamedDependency(g,et),et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et)):ot}beginDrawing({transform:g,viewport:et,transparency:ot=!1,background:ct=null}){const ut=this.ctx.canvas.width,dt=this.ctx.canvas.height,ft=this.ctx.fillStyle;if(this.ctx.fillStyle=ct||"#ffffff",this.ctx.fillRect(0,0,ut,dt),this.ctx.fillStyle=ft,ot){const St=this.cachedCanvases.getCanvas("transparent",ut,dt);this.compositeCtx=this.ctx,this.transparentCanvas=St.canvas,this.ctx=St.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...et.transform),this.viewportScale=et.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(g,et,ot,ct,ut){var Bt;const dt=g.argsArray,ft=g.fnArray;let St=et||0;const kt=dt.length;if(kt===St)return St;const Tt=kt-St>EXECUTION_STEPS&&typeof ot=="function",jt=Tt?Date.now()+EXECUTION_TIME:0;let Rt=0;const Ft=this.commonObjs,$t=this.objs;let zt,Kt;for(;;){if(ct!==void 0&&St===ct.nextBreakPoint)return ct.breakIt(St,ot),St;if(!ut||ut(St))if(zt=ft[St],Kt=dt[St]??null,zt!==OPS.dependency)Kt===null?this[zt](St):this[zt](St,...Kt);else for(const Ut of Kt){(Bt=this.dependencyTracker)==null||Bt.recordNamedData(Ut,St);const Jt=Ut.startsWith("g_")?Ft:$t;if(!Jt.has(Ut))return Jt.get(Ut,ot),St}if(St++,St===kt)return St;if(Tt&&++Rt>EXECUTION_STEPS){if(Date.now()>jt)return ot(),St;Rt=0}}}endDrawing(){An(this,wE,iC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const et of g.values())typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&(et.width=et.height=0);g.clear()}this._cachedBitmapsMap.clear(),An(this,kE,sC).call(this)}_scaleImage(g,et){const ot=g.width??g.displayWidth,ct=g.height??g.displayHeight;let ut=Math.max(Math.hypot(et[0],et[1]),1),dt=Math.max(Math.hypot(et[2],et[3]),1),ft=ot,St=ct,kt="prescale1",Tt,jt;for(;ut>2&&ft>1||dt>2&&St>1;){let Rt=ft,Ft=St;ut>2&&ft>1&&(Rt=ft>=16384?Math.floor(ft/2)-1||1:Math.ceil(ft/2),ut/=ft/Rt),dt>2&&St>1&&(Ft=St>=16384?Math.floor(St/2)-1||1:Math.ceil(St)/2,dt/=St/Ft),Tt=this.cachedCanvases.getCanvas(kt,Rt,Ft),jt=Tt.context,jt.clearRect(0,0,Rt,Ft),jt.drawImage(g,0,0,ft,St,0,0,Rt,Ft),g=Tt.canvas,ft=Rt,St=Ft,kt=kt==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ft,paintHeight:St}}_createMaskCanvas(g,et){var cn,fn;const ot=this.ctx,{width:ct,height:ut}=et,dt=this.current.fillColor,ft=this.current.patternFill,St=getCurrentTransform(ot);let kt,Tt,jt,Rt;if((et.bitmap||et.data)&&et.count>1){const mn=et.bitmap||et.data.buffer;Tt=JSON.stringify(ft?St:[St.slice(0,4),dt]),kt=this._cachedBitmapsMap.get(mn),kt||(kt=new Map,this._cachedBitmapsMap.set(mn,kt));const En=kt.get(Tt);if(En&&!ft){const Sn=Math.round(Math.min(St[0],St[2])+St[4]),wn=Math.round(Math.min(St[1],St[3])+St[5]);return(cn=this.dependencyTracker)==null||cn.recordDependencies(g,Dependencies.transformAndFill),{canvas:En,offsetX:Sn,offsetY:wn}}jt=En}jt||(Rt=this.cachedCanvases.getCanvas("maskCanvas",ct,ut),putBinaryImageMask(Rt.context,et));let Ft=Util$1.transform(St,[1/ct,0,0,-1/ut,0,0]);Ft=Util$1.transform(Ft,[1,0,0,1,0,-ut]);const $t=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ct,ut],Ft,$t);const[zt,Kt,Bt,Ut]=$t,Jt=Math.round(Bt-zt)||1,en=Math.round(Ut-Kt)||1,tn=this.cachedCanvases.getCanvas("fillCanvas",Jt,en),nn=tn.context,rn=zt,on=Kt;nn.translate(-rn,-on),nn.transform(...Ft),jt||(jt=this._scaleImage(Rt.canvas,getCurrentTransformInverse(nn)),jt=jt.img,kt&&ft&&kt.set(Tt,jt)),nn.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(nn),et.interpolate),drawImageAtIntegerCoords(nn,jt,0,0,jt.width,jt.height,0,0,ct,ut),nn.globalCompositeOperation="source-in";const dn=Util$1.transform(getCurrentTransformInverse(nn),[1,0,0,1,-rn,-on]);return nn.fillStyle=ft?dt.getPattern(ot,this,dn,PathType.FILL,g):dt,nn.fillRect(0,0,ct,ut),kt&&!ft&&(this.cachedCanvases.delete("fillCanvas"),kt.set(Tt,tn.canvas)),(fn=this.dependencyTracker)==null||fn.recordDependencies(g,Dependencies.transformAndFill),{canvas:tn.canvas,offsetX:Math.round(rn),offsetY:Math.round(on)}}setLineWidth(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineWidth",g),et!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=et,this.ctx.lineWidth=et}setLineCap(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineCap",g),this.ctx.lineCap=LINE_CAP_STYLES[et]}setLineJoin(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineJoin",g),this.ctx.lineJoin=LINE_JOIN_STYLES[et]}setMiterLimit(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("miterLimit",g),this.ctx.miterLimit=et}setDash(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.recordSimpleData("dash",g);const ct=this.ctx;ct.setLineDash!==void 0&&(ct.setLineDash(et),ct.lineDashOffset=ot)}setRenderingIntent(g,et){}setFlatness(g,et){}setGState(g,et){var ot,ct,ut,dt,ft;for(const[St,kt]of et)switch(St){case"LW":this.setLineWidth(g,kt);break;case"LC":this.setLineCap(g,kt);break;case"LJ":this.setLineJoin(g,kt);break;case"ML":this.setMiterLimit(g,kt);break;case"D":this.setDash(g,kt[0],kt[1]);break;case"RI":this.setRenderingIntent(g,kt);break;case"FL":this.setFlatness(g,kt);break;case"Font":this.setFont(g,kt[0],kt[1]);break;case"CA":(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeAlpha",g),this.current.strokeAlpha=kt;break;case"ca":(ct=this.dependencyTracker)==null||ct.recordSimpleData("fillAlpha",g),this.ctx.globalAlpha=this.current.fillAlpha=kt;break;case"BM":(ut=this.dependencyTracker)==null||ut.recordSimpleData("globalCompositeOperation",g),this.ctx.globalCompositeOperation=kt;break;case"SMask":(dt=this.dependencyTracker)==null||dt.recordSimpleData("SMask",g),this.current.activeSMask=kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(ft=this.dependencyTracker)==null||ft.recordSimpleData("filter",g),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(g){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const et=this.ctx.canvas.width,ot=this.ctx.canvas.height,ct="smaskGroupAt"+this.groupLevel,ut=this.cachedCanvases.getCanvas(ct,et,ot);this.suspendedCtx=this.ctx;const dt=this.ctx=ut.context;dt.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,dt),mirrorContextOperations(dt,this.suspendedCtx),this.setGState(g,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const et=this.current.activeSMask,ot=this.suspendedCtx;this.composeSMask(ot,et,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(g,et,ot,ct){const ut=ct[0],dt=ct[1],ft=ct[2]-ut,St=ct[3]-dt;ft===0||St===0||(this.genericComposeSMask(et.context,ot,ft,St,et.subtype,et.backdrop,et.transferMap,ut,dt,et.offsetX,et.offsetY),g.save(),g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),g.drawImage(ot.canvas,0,0),g.restore())}genericComposeSMask(g,et,ot,ct,ut,dt,ft,St,kt,Tt,jt){let Rt=g.canvas,Ft=St-Tt,$t=kt-jt;if(dt)if(Ft<0||$t<0||Ft+ot>Rt.width||$t+ct>Rt.height){const Kt=this.cachedCanvases.getCanvas("maskExtension",ot,ct),Bt=Kt.context;Bt.drawImage(Rt,-Ft,-$t),Bt.globalCompositeOperation="destination-atop",Bt.fillStyle=dt,Bt.fillRect(0,0,ot,ct),Bt.globalCompositeOperation="source-over",Rt=Kt.canvas,Ft=$t=0}else{g.save(),g.globalAlpha=1,g.setTransform(1,0,0,1,0,0);const Kt=new Path2D;Kt.rect(Ft,$t,ot,ct),g.clip(Kt),g.globalCompositeOperation="destination-atop",g.fillStyle=dt,g.fillRect(Ft,$t,ot,ct),g.restore()}et.save(),et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),ut==="Alpha"&&ft?et.filter=this.filterFactory.addAlphaFilter(ft):ut==="Luminosity"&&(et.filter=this.filterFactory.addLuminosityFilter(ft));const zt=new Path2D;zt.rect(St,kt,ot,ct),et.clip(zt),et.globalCompositeOperation="destination-in",et.drawImage(Rt,Ft,$t,ot,ct,St,kt,ot,ct),et.restore()}save(g){var ot;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const et=this.current;this.stateStack.push(et),this.current=et.clone(),(ot=this.dependencyTracker)==null||ot.save(g)}restore(g){var et;if((et=this.dependencyTracker)==null||et.restore(g),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(g,et,ot,ct,ut,dt,ft){var St;(St=this.dependencyTracker)==null||St.recordIncrementalData("transform",g),this.ctx.transform(et,ot,ct,ut,dt,ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,et,ot,ct){let[ut]=ot;if(!ct){ut||(ut=ot[0]=new Path2D),this[et](g,ut);return}if(this.dependencyTracker!==null){const dt=et===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(g).recordBBox(g,this.ctx,ct[0]-dt,ct[2]+dt,ct[1]-dt,ct[3]+dt).recordDependencies(g,["transform"])}if(!(ut instanceof Path2D)){const dt=ot[0]=new Path2D;for(let ft=0,St=ut.length;ft<St;)switch(ut[ft++]){case DrawOPS.moveTo:dt.moveTo(ut[ft++],ut[ft++]);break;case DrawOPS.lineTo:dt.lineTo(ut[ft++],ut[ft++]);break;case DrawOPS.curveTo:dt.bezierCurveTo(ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++]);break;case DrawOPS.closePath:dt.closePath();break;default:warn(`Unrecognized drawing path operator: ${ut[ft-1]}`);break}ut=dt}Util$1.axialAlignedBoundingBox(ct,getCurrentTransform(this.ctx),this.current.minMax),this[et](g,ut),this._pathStartIdx=g}closePath(g){this.ctx.closePath()}stroke(g,et,ot=!0){var dt;const ct=this.ctx,ut=this.current.strokeColor;if(ct.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ut=="object"&&(ut!=null&&ut.getPattern)){const ft=ut.isModifyingCurrentTransform()?ct.getTransform():null;if(ct.save(),ct.strokeStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.STROKE,g),ft){const St=new Path2D;St.addPath(et,ct.getTransform().invertSelf().multiplySelf(ft)),et=St}this.rescaleAndStroke(et,!1),ct.restore()}else this.rescaleAndStroke(et,!0);(dt=this.dependencyTracker)==null||dt.recordDependencies(g,Dependencies.stroke),ot&&this.consumePath(g,et,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ct.globalAlpha=this.current.fillAlpha}closeStroke(g,et){this.stroke(g,et)}fill(g,et,ot=!0){var kt,Tt,jt;const ct=this.ctx,ut=this.current.fillColor,dt=this.current.patternFill;let ft=!1;if(dt){const Rt=ut.isModifyingCurrentTransform()?ct.getTransform():null;if((kt=this.dependencyTracker)==null||kt.save(g),ct.save(),ct.fillStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.FILL,g),Rt){const Ft=new Path2D;Ft.addPath(et,ct.getTransform().invertSelf().multiplySelf(Rt)),et=Ft}ft=!0}const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ct.fill(et,"evenodd"),this.pendingEOFill=!1):ct.fill(et)),(Tt=this.dependencyTracker)==null||Tt.recordDependencies(g,Dependencies.fill),ft&&(ct.restore(),(jt=this.dependencyTracker)==null||jt.restore(g)),ot&&this.consumePath(g,et,St)}eoFill(g,et){this.pendingEOFill=!0,this.fill(g,et)}fillStroke(g,et){this.fill(g,et,!1),this.stroke(g,et,!1),this.consumePath(g,et)}eoFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}closeFillStroke(g,et){this.fillStroke(g,et)}closeEOFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}endPath(g,et){this.consumePath(g,et)}rawFillPath(g,et){var ot;this.ctx.fill(et),(ot=this.dependencyTracker)==null||ot.recordDependencies(g,Dependencies.rawFillPath).recordOperation(g)}clip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=NORMAL_CLIP}eoClip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=EO_CLIP}beginText(g){var et;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(et=this.dependencyTracker)==null||et.recordOpenMarker(g).resetIncrementalData("sameLineText").resetIncrementalData("moveText",g)}endText(g){const et=this.pendingTextPaths,ot=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ct}=this;et!==void 0&&ct.recordFutureForcedDependency("textClip",ct.getOpenMarker()).recordFutureForcedDependency("textClip",g),ct.recordCloseMarker(g)}if(et!==void 0){const ct=new Path2D,ut=ot.getTransform().invertSelf();for(const{transform:dt,x:ft,y:St,fontSize:kt,path:Tt}of et)Tt&&ct.addPath(Tt,new DOMMatrix(dt).preMultiplySelf(ut).translate(ft,St).scale(kt,-kt));ot.clip(ct)}delete this.pendingTextPaths}setCharSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("charSpacing",g),this.current.charSpacing=et}setWordSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("wordSpacing",g),this.current.wordSpacing=et}setHScale(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("hScale",g),this.current.textHScale=et/100}setLeading(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("leading",g),this.current.leading=-et}setFont(g,et,ot){var jt,Rt;(jt=this.dependencyTracker)==null||jt.recordSimpleData("font",g).recordSimpleDataFromNamed("fontObj",et,g);const ct=this.commonObjs.get(et),ut=this.current;if(!ct)throw new Error(`Can't find font for ${et}`);if(ut.fontMatrix=ct.fontMatrix||FONT_IDENTITY_MATRIX,(ut.fontMatrix[0]===0||ut.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+et),ot<0?(ot=-ot,ut.fontDirection=-1):ut.fontDirection=1,this.current.font=ct,this.current.fontSize=ot,ct.isType3Font)return;const dt=ct.loadedName||"sans-serif",ft=((Rt=ct.systemFontInfo)==null?void 0:Rt.css)||`"${dt}", ${ct.fallbackName}`;let St="normal";ct.black?St="900":ct.bold&&(St="bold");const kt=ct.italic?"italic":"normal";let Tt=ot;ot<MIN_FONT_SIZE?Tt=MIN_FONT_SIZE:ot>MAX_FONT_SIZE&&(Tt=MAX_FONT_SIZE),this.current.fontSizeScale=ot/Tt,this.ctx.font=`${kt} ${St} ${Tt}px ${ft}`}setTextRenderingMode(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRenderingMode",g),this.current.textRenderingMode=et}setTextRise(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRise",g),this.current.textRise=et}moveText(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.resetIncrementalData("sameLineText").recordIncrementalData("moveText",g),this.current.x=this.current.lineX+=et,this.current.y=this.current.lineY+=ot}setLeadingMoveText(g,et,ot){this.setLeading(g,-ot),this.moveText(g,et,ot)}setTextMatrix(g,et){var ct;(ct=this.dependencyTracker)==null||ct.recordSimpleData("textMatrix",g);const{current:ot}=this;ot.textMatrix=et,ot.textMatrixScale=Math.hypot(et[0],et[1]),ot.x=ot.lineX=0,ot.y=ot.lineY=0}nextLine(g){var et;this.moveText(g,0,this.current.leading),(et=this.dependencyTracker)==null||et.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??g)}paintChar(g,et,ot,ct,ut,dt){var Bt,Ut,Jt,en;const ft=this.ctx,St=this.current,kt=St.font,Tt=St.textRenderingMode,jt=St.fontSize/St.fontSizeScale,Rt=Tt&TextRenderingMode.FILL_STROKE_MASK,Ft=!!(Tt&TextRenderingMode.ADD_TO_PATH_FLAG),$t=St.patternFill&&!kt.missingFile,zt=St.patternStroke&&!kt.missingFile;let Kt;if((kt.disableFontFace||Ft||$t||zt)&&!kt.missingFile&&(Kt=kt.getPathGenerator(this.commonObjs,et)),Kt&&(kt.disableFontFace||$t||zt)){ft.save(),ft.translate(ot,ct),ft.scale(jt,-jt),(Bt=this.dependencyTracker)==null||Bt.recordCharacterBBox(g,ft,kt);let tn;if(Rt===TextRenderingMode.FILL||Rt===TextRenderingMode.FILL_STROKE)if(ut){tn=ft.getTransform(),ft.setTransform(...ut);const nn=An(this,TE,oC).call(this,Kt,tn,ut);ft.fill(nn)}else ft.fill(Kt);if(Rt===TextRenderingMode.STROKE||Rt===TextRenderingMode.FILL_STROKE)if(dt){tn||(tn=ft.getTransform()),ft.setTransform(...dt);const{a:nn,b:rn,c:on,d:dn}=tn,cn=Util$1.inverseTransform(dt),fn=Util$1.transform([nn,rn,on,dn,0,0],cn);Util$1.singularValueDecompose2dScale(fn,XY),ft.lineWidth*=Math.max(XY[0],XY[1])/jt,ft.stroke(An(this,TE,oC).call(this,Kt,tn,dt))}else ft.lineWidth/=jt,ft.stroke(Kt);ft.restore()}else(Rt===TextRenderingMode.FILL||Rt===TextRenderingMode.FILL_STROKE)&&(ft.fillText(et,ot,ct),(Ut=this.dependencyTracker)==null||Ut.recordCharacterBBox(g,ft,kt,jt,ot,ct,()=>ft.measureText(et))),(Rt===TextRenderingMode.STROKE||Rt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((Jt=this.dependencyTracker)==null||Jt.recordCharacterBBox(g,ft,kt,jt,ot,ct,()=>ft.measureText(et)).recordDependencies(g,Dependencies.stroke)),ft.strokeText(et,ot,ct));Ft&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ft),x:ot,y:ct,fontSize:jt,path:Kt}),(en=this.dependencyTracker)==null||en.recordCharacterBBox(g,ft,kt,jt,ot,ct))}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const et=g.getImageData(0,0,10,10).data;let ot=!1;for(let ct=3;ct<et.length;ct+=4)if(et[ct]>0&&et[ct]<255){ot=!0;break}return shadow(this,"isFontSubpixelAAEnabled",ot)}showText(g,et){var on,dn,cn,fn;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(g,Dependencies.showText).resetBBox(g),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",g).inheritPendingDependenciesAsFutureForcedDependencies());const ot=this.current,ct=ot.font;if(ct.isType3Font){this.showType3Text(g,et),(on=this.dependencyTracker)==null||on.recordShowTextOperation(g);return}const ut=ot.fontSize;if(ut===0){(dn=this.dependencyTracker)==null||dn.recordOperation(g);return}const dt=this.ctx,ft=ot.fontSizeScale,St=ot.charSpacing,kt=ot.wordSpacing,Tt=ot.fontDirection,jt=ot.textHScale*Tt,Rt=et.length,Ft=ct.vertical,$t=Ft?1:-1,zt=ct.defaultVMetrics,Kt=ut*ot.fontMatrix[0],Bt=ot.textRenderingMode===TextRenderingMode.FILL&&!ct.disableFontFace&&!ot.patternFill;dt.save(),ot.textMatrix&&dt.transform(...ot.textMatrix),dt.translate(ot.x,ot.y+ot.textRise),Tt>0?dt.scale(jt,-1):dt.scale(jt,1);let Ut,Jt;if(ot.patternFill){dt.save();const mn=ot.fillColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.FILL,g);Ut=getCurrentTransform(dt),dt.restore(),dt.fillStyle=mn}if(ot.patternStroke){dt.save();const mn=ot.strokeColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.STROKE,g);Jt=getCurrentTransform(dt),dt.restore(),dt.strokeStyle=mn}let en=ot.lineWidth;const tn=ot.textMatrixScale;if(tn===0||en===0){const mn=ot.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(mn===TextRenderingMode.STROKE||mn===TextRenderingMode.FILL_STROKE)&&(en=this.getSinglePixelWidth())}else en/=tn;if(ft!==1&&(dt.scale(ft,ft),en/=ft),dt.lineWidth=en,ct.isInvalidPDFjsFont){const mn=[];let En=0;for(const wn of et)mn.push(wn.unicode),En+=wn.width;const Sn=mn.join("");if(dt.fillText(Sn,0,0),this.dependencyTracker!==null){const wn=dt.measureText(Sn);this.dependencyTracker.recordBBox(g,this.ctx,-wn.actualBoundingBoxLeft,wn.actualBoundingBoxRight,-wn.actualBoundingBoxAscent,wn.actualBoundingBoxDescent).recordShowTextOperation(g)}ot.x+=En*Kt*jt,dt.restore(),this.compose();return}let nn=0,rn;for(rn=0;rn<Rt;++rn){const mn=et[rn];if(typeof mn=="number"){nn+=$t*mn*ut/1e3;continue}let En=!1;const Sn=(mn.isSpace?kt:0)+St,wn=mn.fontChar,hn=mn.accent;let yn,an,un=mn.width;if(Ft){const kn=mn.vmetric||zt,_n=-(mn.vmetric?kn[1]:un*.5)*Kt,Rn=kn[2]*Kt;un=kn?-kn[0]:un,yn=_n/ft,an=(nn+Rn)/ft}else yn=nn/ft,an=0;let bn;if(ct.remeasure&&un>0){bn=dt.measureText(wn);const kn=bn.width*1e3/ut*ft;if(un<kn&&this.isFontSubpixelAAEnabled){const _n=un/kn;En=!0,dt.save(),dt.scale(_n,1),yn/=_n}else un!==kn&&(yn+=(un-kn)/2e3*ut/ft)}if(this.contentVisible&&(mn.isInFont||ct.missingFile)){if(Bt&&!hn)dt.fillText(wn,yn,an),(cn=this.dependencyTracker)==null||cn.recordCharacterBBox(g,dt,bn?{bbox:null}:ct,ut/ft,yn,an,()=>bn??dt.measureText(wn));else if(this.paintChar(g,wn,yn,an,Ut,Jt),hn){const kn=yn+ut*hn.offset.x/ft,_n=an-ut*hn.offset.y/ft;this.paintChar(g,hn.fontChar,kn,_n,Ut,Jt)}}const pn=Ft?un*Kt-Sn*Tt:un*Kt+Sn*Tt;nn+=pn,En&&dt.restore()}Ft?ot.y-=nn:ot.x+=nn*jt,dt.restore(),this.compose(),(fn=this.dependencyTracker)==null||fn.recordShowTextOperation(g)}showType3Text(g,et){const ot=this.ctx,ct=this.current,ut=ct.font,dt=ct.fontSize,ft=ct.fontDirection,St=ut.vertical?1:-1,kt=ct.charSpacing,Tt=ct.wordSpacing,jt=ct.textHScale*ft,Rt=ct.fontMatrix||FONT_IDENTITY_MATRIX,Ft=et.length,$t=ct.textRenderingMode===TextRenderingMode.INVISIBLE;let zt,Kt,Bt,Ut;if($t||dt===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ot.save(),ct.textMatrix&&ot.transform(...ct.textMatrix),ot.translate(ct.x,ct.y+ct.textRise),ot.scale(jt,ft);const Jt=this.dependencyTracker;for(this.dependencyTracker=Jt?new CanvasNestedDependencyTracker(Jt,g):null,zt=0;zt<Ft;++zt){if(Kt=et[zt],typeof Kt=="number"){Ut=St*Kt*dt/1e3,this.ctx.translate(Ut,0),ct.x+=Ut*jt;continue}const en=(Kt.isSpace?Tt:0)+kt,tn=ut.charProcOperatorList[Kt.operatorListId];tn?this.contentVisible&&(this.save(),ot.scale(dt,dt),ot.transform(...Rt),this.executeOperatorList(tn),this.restore()):warn(`Type3 character "${Kt.operatorListId}" is not available.`);const nn=[Kt.width,0];Util$1.applyTransform(nn,Rt),Bt=nn[0]*dt+en,ot.translate(Bt,0),ct.x+=Bt*jt}ot.restore(),Jt&&(this.dependencyTracker=Jt)}setCharWidth(g,et,ot){}setCharWidthAndBounds(g,et,ot,ct,ut,dt,ft){var kt;const St=new Path2D;St.rect(ct,ut,dt-ct,ft-ut),this.ctx.clip(St),(kt=this.dependencyTracker)==null||kt.recordBBox(g,this.ctx,ct,dt,ut,ft).recordClipBox(g,this.ctx,ct,dt,ut,ft),this.endPath(g)}getColorN_Pattern(g,et){let ot;if(et[0]==="TilingPattern"){const ct=this.baseTransform||getCurrentTransform(this.ctx),ut={createCanvasGraphics:(dt,ft)=>new WC(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,ft,!0):null)};ot=new TilingPattern(et,this.ctx,ut,ct)}else ot=this._getPattern(g,et[1],et[2]);return ot}setStrokeColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.current.strokeColor=this.getColorN_Pattern(g,et),this.current.patternStroke=!0}setFillColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.current.fillColor=this.getColorN_Pattern(g,et),this.current.patternFill=!0}setStrokeRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor=et,this.current.patternStroke=!1}setStrokeTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor=et,this.current.patternFill=!1}setFillTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(g,et,ot=null){let ct;return this.cachedPatterns.has(et)?ct=this.cachedPatterns.get(et):(ct=getShadingPattern(this.getObject(g,et)),this.cachedPatterns.set(et,ct)),ot&&(ct.matrix=ot),ct}shadingFill(g,et){var dt;if(!this.contentVisible)return;const ot=this.ctx;this.save(g);const ct=this._getPattern(g,et);ot.fillStyle=ct.getPattern(ot,this,getCurrentTransformInverse(ot),PathType.SHADING,g);const ut=getCurrentTransformInverse(ot);if(ut){const{width:ft,height:St}=ot.canvas,kt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ft,St],ut,kt);const[Tt,jt,Rt,Ft]=kt;this.ctx.fillRect(Tt,jt,Rt-Tt,Ft-jt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordFullPageBBox(g).recordDependencies(g,Dependencies.transform).recordDependencies(g,Dependencies.fill).recordOperation(g),this.compose(this.current.getClippedPathBoundingBox()),this.restore(g)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(g,et,ot){var ct;if(this.contentVisible&&(this.save(g),this.baseTransformStack.push(this.baseTransform),et&&this.transform(g,...et),this.baseTransform=getCurrentTransform(this.ctx),ot)){Util$1.axialAlignedBoundingBox(ot,this.baseTransform,this.current.minMax);const[ut,dt,ft,St]=ot,kt=new Path2D;kt.rect(ut,dt,ft-ut,St-dt),this.ctx.clip(kt),(ct=this.dependencyTracker)==null||ct.recordClipBox(g,this.ctx,ut,ft,dt,St),this.endPath(g)}}paintFormXObjectEnd(g){this.contentVisible&&(this.restore(g),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g,et){var Jt;if(!this.contentVisible)return;this.save(g),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ot=this.ctx;et.isolated||info("TODO: Support non-isolated groups."),et.knockout&&warn("Knockout groups not supported.");const ct=getCurrentTransform(ot);if(et.matrix&&ot.transform(...et.matrix),!et.bbox)throw new Error("Bounding box is required.");let ut=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox(et.bbox,getCurrentTransform(ot),ut);const dt=[0,0,ot.canvas.width,ot.canvas.height];ut=Util$1.intersect(ut,dt)||[0,0,0,0];const ft=Math.floor(ut[0]),St=Math.floor(ut[1]),kt=Math.max(Math.ceil(ut[2])-ft,1),Tt=Math.max(Math.ceil(ut[3])-St,1);this.current.startNewPathAndClipBox([0,0,kt,Tt]);let jt="groupAt"+this.groupLevel;et.smask&&(jt+="_smask_"+this.smaskCounter++%2);const Rt=this.cachedCanvases.getCanvas(jt,kt,Tt),Ft=Rt.context;Ft.translate(-ft,-St),Ft.transform(...ct);let $t=new Path2D;const[zt,Kt,Bt,Ut]=et.bbox;if($t.rect(zt,Kt,Bt-zt,Ut-Kt),et.matrix){const en=new Path2D;en.addPath($t,new DOMMatrix(et.matrix)),$t=en}Ft.clip($t),et.smask&&this.smaskStack.push({canvas:Rt.canvas,context:Ft,offsetX:ft,offsetY:St,subtype:et.smask.subtype,backdrop:et.smask.backdrop,transferMap:et.smask.transferMap||null,startTransformInverse:null}),(!et.smask||this.dependencyTracker)&&(ot.setTransform(1,0,0,1,0,0),ot.translate(ft,St),ot.save()),copyCtxState(ot,Ft),this.ctx=Ft,(Jt=this.dependencyTracker)==null||Jt.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(ot),this.setGState(g,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ot),this.groupLevel++}endGroup(g,et){var ut;if(!this.contentVisible)return;this.groupLevel--;const ot=this.ctx,ct=this.groupStack.pop();if(this.ctx=ct,this.ctx.imageSmoothingEnabled=!1,(ut=this.dependencyTracker)==null||ut.popBaseTransform(),et.smask)this.tempSMask=this.smaskStack.pop(),this.restore(g),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const dt=getCurrentTransform(this.ctx);this.restore(g),this.ctx.save(),this.ctx.setTransform(...dt);const ft=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ot.canvas.width,ot.canvas.height],dt,ft),this.ctx.drawImage(ot.canvas,0,0),this.ctx.restore(),this.compose(ft)}}beginAnnotation(g,et,ot,ct,ut,dt){if(An(this,wE,iC).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(g),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ot){const ft=ot[2]-ot[0],St=ot[3]-ot[1];if(dt&&this.annotationCanvasMap){ct=ct.slice(),ct[4]-=ot[0],ct[5]-=ot[1],ot=ot.slice(),ot[0]=ot[1]=0,ot[2]=ft,ot[3]=St,Util$1.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:kt}=this,Tt=Math.ceil(ft*this.outputScaleX*kt),jt=Math.ceil(St*this.outputScaleY*kt);this.annotationCanvas=this.canvasFactory.create(Tt,jt);const{canvas:Rt,context:Ft}=this.annotationCanvas;this.annotationCanvasMap.set(et,Rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ft,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,St*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(g);const kt=new Path2D;kt.rect(ot[0],ot[1],ft,St),this.ctx.clip(kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(g,...ct),this.transform(g,...ut)}endAnnotation(g){this.annotationCanvas&&(this.ctx.restore(),An(this,kE,sC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g,et){var ft;if(!this.contentVisible)return;const ot=et.count;et=this.getObject(g,et.data,et),et.count=ot;const ct=this.ctx,ut=this._createMaskCanvas(g,et),dt=ut.canvas;ct.save(),ct.setTransform(1,0,0,1,0,0),ct.drawImage(dt,ut.offsetX,ut.offsetY),(ft=this.dependencyTracker)==null||ft.resetBBox(g).recordBBox(g,this.ctx,ut.offsetX,ut.offsetX+dt.width,ut.offsetY,ut.offsetY+dt.height).recordOperation(g),ct.restore(),this.compose()}paintImageMaskXObjectRepeat(g,et,ot,ct=0,ut=0,dt,ft){var jt,Rt,Ft;if(!this.contentVisible)return;et=this.getObject(g,et.data,et);const St=this.ctx;St.save();const kt=getCurrentTransform(St);St.transform(ot,ct,ut,dt,0,0);const Tt=this._createMaskCanvas(g,et);St.setTransform(1,0,0,1,Tt.offsetX-kt[4],Tt.offsetY-kt[5]),(jt=this.dependencyTracker)==null||jt.resetBBox(g);for(let $t=0,zt=ft.length;$t<zt;$t+=2){const Kt=Util$1.transform(kt,[ot,ct,ut,dt,ft[$t],ft[$t+1]]);St.drawImage(Tt.canvas,Kt[4],Kt[5]),(Rt=this.dependencyTracker)==null||Rt.recordBBox(g,this.ctx,Kt[4],Kt[4]+Tt.canvas.width,Kt[5],Kt[5]+Tt.canvas.height)}St.restore(),this.compose(),(Ft=this.dependencyTracker)==null||Ft.recordOperation(g)}paintImageMaskXObjectGroup(g,et){var dt,ft,St;if(!this.contentVisible)return;const ot=this.ctx,ct=this.current.fillColor,ut=this.current.patternFill;(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordDependencies(g,Dependencies.transformAndFill);for(const kt of et){const{data:Tt,width:jt,height:Rt,transform:Ft}=kt,$t=this.cachedCanvases.getCanvas("maskCanvas",jt,Rt),zt=$t.context;zt.save();const Kt=this.getObject(g,Tt,kt);putBinaryImageMask(zt,Kt),zt.globalCompositeOperation="source-in",zt.fillStyle=ut?ct.getPattern(zt,this,getCurrentTransformInverse(ot),PathType.FILL,g):ct,zt.fillRect(0,0,jt,Rt),zt.restore(),ot.save(),ot.transform(...Ft),ot.scale(1,-1),drawImageAtIntegerCoords(ot,$t.canvas,0,0,jt,Rt,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ot,0,jt,0,Rt),ot.restore()}this.compose(),(St=this.dependencyTracker)==null||St.recordOperation(g)}paintImageXObject(g,et){if(!this.contentVisible)return;const ot=this.getObject(g,et);if(!ot){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g,ot)}paintImageXObjectRepeat(g,et,ot,ct,ut){if(!this.contentVisible)return;const dt=this.getObject(g,et);if(!dt){warn("Dependent image isn't ready yet");return}const ft=dt.width,St=dt.height,kt=[];for(let Tt=0,jt=ut.length;Tt<jt;Tt+=2)kt.push({transform:[ot,0,0,ct,ut[Tt],ut[Tt+1]],x:0,y:0,w:ft,h:St});this.paintInlineImageXObjectGroup(g,dt,kt)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:et,width:ot,height:ct}=g,ut=this.cachedCanvases.getCanvas("inlineImage",ot,ct),dt=ut.context;return dt.filter=this.current.transferMaps,dt.drawImage(et,0,0),dt.filter="none",ut.canvas}paintInlineImageXObject(g,et){var kt;if(!this.contentVisible)return;const ot=et.width,ct=et.height,ut=this.ctx;this.save(g);const{filter:dt}=ut;dt!=="none"&&dt!==""&&(ut.filter="none"),ut.scale(1/ot,-1/ct);let ft;if(et.bitmap)ft=this.applyTransferMapsToBitmap(et);else if(typeof HTMLElement=="function"&&et instanceof HTMLElement||!et.data)ft=et;else{const jt=this.cachedCanvases.getCanvas("inlineImage",ot,ct).context;putBinaryImageData(jt,et),ft=this.applyTransferMapsToCanvas(jt)}const St=this._scaleImage(ft,getCurrentTransformInverse(ut));ut.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ut),et.interpolate),(kt=this.dependencyTracker)==null||kt.resetBBox(g).recordBBox(g,ut,0,ot,-ct,0).recordDependencies(g,Dependencies.imageXObject).recordOperation(g),drawImageAtIntegerCoords(ut,St.img,0,0,St.paintWidth,St.paintHeight,0,-ct,ot,ct),this.compose(),this.restore(g)}paintInlineImageXObjectGroup(g,et,ot){var dt,ft,St;if(!this.contentVisible)return;const ct=this.ctx;let ut;if(et.bitmap)ut=et.bitmap;else{const kt=et.width,Tt=et.height,Rt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(Rt,et),ut=this.applyTransferMapsToCanvas(Rt)}(dt=this.dependencyTracker)==null||dt.resetBBox(g);for(const kt of ot)ct.save(),ct.transform(...kt.transform),ct.scale(1,-1),drawImageAtIntegerCoords(ct,ut,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ct,0,1,-1,0),ct.restore();(St=this.dependencyTracker)==null||St.recordOperation(g),this.compose()}paintSolidColorImageMask(g){var et;this.contentVisible&&((et=this.dependencyTracker)==null||et.resetBBox(g).recordBBox(g,this.ctx,0,1,0,1).recordDependencies(g,Dependencies.fill).recordOperation(g),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g,et){}markPointProps(g,et,ot){}beginMarkedContent(g,et){var ot;(ot=this.dependencyTracker)==null||ot.beginMarkedContent(g),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.beginMarkedContent(g),et==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ot)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(g){var et;(et=this.dependencyTracker)==null||et.endMarkedContent(g),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(g){}endCompat(g){}consumePath(g,et,ot){var dt,ft;const ct=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ot);const ut=this.ctx;this.pendingClip?(ct||(this.pendingClip===EO_CLIP?ut.clip(et,"evenodd"):ut.clip(et)),this.pendingClip=null,(dt=this.dependencyTracker)==null||dt.bboxToClipBoxDropOperation(g).recordFutureForcedDependency("clipPath",g)):(ft=this.dependencyTracker)==null||ft.recordOperation(g),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=getCurrentTransform(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const et=Math.abs(g[0]*g[3]-g[2]*g[1]),ot=Math.hypot(g[0],g[2]),ct=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(ot,ct)/et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:et,b:ot,c:ct,d:ut}=this.ctx.getTransform();let dt,ft;if(ot===0&&ct===0){const St=Math.abs(et),kt=Math.abs(ut);if(St===kt)if(g===0)dt=ft=1/St;else{const Tt=St*g;dt=ft=Tt<1?1/Tt:1}else if(g===0)dt=1/St,ft=1/kt;else{const Tt=St*g,jt=kt*g;dt=Tt<1?1/Tt:1,ft=jt<1?1/jt:1}}else{const St=Math.abs(et*ut-ot*ct),kt=Math.hypot(et,ot),Tt=Math.hypot(ct,ut);if(g===0)dt=Tt/St,ft=kt/St;else{const jt=g*St;dt=Tt>jt?Tt/jt:1,ft=kt>jt?kt/jt:1}}this._cachedScaleForStroking[0]=dt,this._cachedScaleForStroking[1]=ft}return this._cachedScaleForStroking}rescaleAndStroke(g,et){const{ctx:ot,current:{lineWidth:ct}}=this,[ut,dt]=this.getScaleForStroking();if(ut===dt){ot.lineWidth=(ct||1)*ut,ot.stroke(g);return}const ft=ot.getLineDash();et&&ot.save(),ot.scale(ut,dt),SCALE_MATRIX.a=1/ut,SCALE_MATRIX.d=1/dt;const St=new Path2D;if(St.addPath(g,SCALE_MATRIX),ft.length>0){const kt=Math.max(ut,dt);ot.setLineDash(ft.map(Tt=>Tt/kt)),ot.lineDashOffset/=kt}ot.lineWidth=ct||1,ot.stroke(St),et&&ot.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};wE=new WeakSet,iC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},kE=new WeakSet,sC=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const et=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=et}}},TE=new WeakSet,oC=function(g,et,ot){const ct=new Path2D;return ct.addPath(g,new DOMMatrix(ot).invertSelf().multiplySelf(et)),ct};let CanvasGraphics=WC;for(const it in OPS)CanvasGraphics.prototype[it]!==void 0&&(CanvasGraphics.prototype[OPS[it]]=CanvasGraphics.prototype[it]);var A1,_1,AE,C1,aw;const Hy=class Hy{constructor(g){vn(this,C1);vn(this,A1,void 0);vn(this,_1,void 0);vn(this,AE,void 0);xn(this,A1,g),xn(this,_1,new DataView(Ht(this,A1))),xn(this,AE,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const kt of Hy.strings){const Tt=et.encode(g[kt]);ot[kt]=Tt,ct+=4+Tt.length}const ut=new ArrayBuffer(ct),dt=new Uint8Array(ut),ft=new DataView(ut);let St=0;for(const kt of Hy.strings){const Tt=ot[kt],jt=Tt.length;ft.setUint32(St,jt),dt.set(Tt,St+4),St+=4+jt}return assert(St===ut.byteLength,"CssFontInfo.write: Buffer overflow"),ut}get fontFamily(){return An(this,C1,aw).call(this,0)}get fontWeight(){return An(this,C1,aw).call(this,1)}get italicAngle(){return An(this,C1,aw).call(this,2)}};A1=new WeakMap,_1=new WeakMap,AE=new WeakMap,C1=new WeakSet,aw=function(g){assert(g<Hy.strings.length,"Invalid string index");let et=0;for(let ct=0;ct<g;ct++)et+=Ht(this,_1).getUint32(et)+4;const ot=Ht(this,_1).getUint32(et);return Ht(this,AE).decode(new Uint8Array(Ht(this,A1),et+4,ot))},qn(Hy,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=Hy;var Zp,fu,C0,R0,bx;const Uy=class Uy{constructor(g){vn(this,R0);vn(this,Zp,void 0);vn(this,fu,void 0);vn(this,C0,void 0);xn(this,Zp,g),xn(this,fu,new DataView(Ht(this,Zp))),xn(this,C0,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const Rt of Uy.strings){const Ft=et.encode(g[Rt]);ot[Rt]=Ft,ct+=4+Ft.length}ct+=4;let ut,dt,ft=1+ct;g.style&&(ut=et.encode(g.style.style),dt=et.encode(g.style.weight),ft+=4+ut.length+4+dt.length);const St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let jt=0;Tt.setUint8(jt++,g.guessFallback?1:0),Tt.setUint32(jt,0),jt+=4,ct=0;for(const Rt of Uy.strings){const Ft=ot[Rt],$t=Ft.length;ct+=4+$t,Tt.setUint32(jt,$t),kt.set(Ft,jt+4),jt+=4+$t}return Tt.setUint32(jt-ct-4,ct),g.style&&(Tt.setUint32(jt,ut.length),kt.set(ut,jt+4),jt+=4+ut.length,Tt.setUint32(jt,dt.length),kt.set(dt,jt+4),jt+=4+dt.length),assert(jt<=St.byteLength,"SubstitionInfo.write: Buffer overflow"),St.transferToFixedLength(jt)}get guessFallback(){return Ht(this,fu).getUint8(0)!==0}get css(){return An(this,R0,bx).call(this,0)}get loadedName(){return An(this,R0,bx).call(this,1)}get baseFontName(){return An(this,R0,bx).call(this,2)}get src(){return An(this,R0,bx).call(this,3)}get style(){let g=1;g+=4+Ht(this,fu).getUint32(g);const et=Ht(this,fu).getUint32(g),ot=Ht(this,C0).decode(new Uint8Array(Ht(this,Zp),g+4,et));g+=4+et;const ct=Ht(this,fu).getUint32(g),ut=Ht(this,C0).decode(new Uint8Array(Ht(this,Zp),g+4,ct));return{style:ot,weight:ut}}};Zp=new WeakMap,fu=new WeakMap,C0=new WeakMap,R0=new WeakSet,bx=function(g){assert(g<Uy.strings.length,"Invalid string index");let et=5;for(let ct=0;ct<g;ct++)et+=Ht(this,fu).getUint32(et)+4;const ot=Ht(this,fu).getUint32(et);return Ht(this,C0).decode(new Uint8Array(Ht(this,Zp),et+4,ot))},qn(Uy,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=Uy;var R1,P1,N1,M1,To,pu,_E,Mr,Ao,Cl,O1,lw,P0,Ex;const mr=class mr{constructor({data:g,extra:et}){vn(this,Ao);vn(this,O1);vn(this,P0);vn(this,pu,void 0);vn(this,_E,void 0);vn(this,Mr,void 0);xn(this,pu,g),xn(this,_E,new TextDecoder),xn(this,Mr,new DataView(Ht(this,pu))),et&&Object.assign(this,et)}get black(){return An(this,Ao,Cl).call(this,0)}get bold(){return An(this,Ao,Cl).call(this,1)}get disableFontFace(){return An(this,Ao,Cl).call(this,2)}get fontExtraProperties(){return An(this,Ao,Cl).call(this,3)}get isInvalidPDFjsFont(){return An(this,Ao,Cl).call(this,4)}get isType3Font(){return An(this,Ao,Cl).call(this,5)}get italic(){return An(this,Ao,Cl).call(this,6)}get missingFile(){return An(this,Ao,Cl).call(this,7)}get remeasure(){return An(this,Ao,Cl).call(this,8)}get vertical(){return An(this,Ao,Cl).call(this,9)}get ascent(){return An(this,O1,lw).call(this,0)}get defaultWidth(){return An(this,O1,lw).call(this,1)}get descent(){return An(this,O1,lw).call(this,2)}get bbox(){let g=Ht(mr,P1);if(Ht(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<4;ct++)ot.push(Ht(this,Mr).getInt16(g,!0)),g+=2;return ot}get fontMatrix(){let g=Ht(mr,N1);if(Ht(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<6;ct++)ot.push(Ht(this,Mr).getFloat64(g,!0)),g+=8;return ot}get defaultVMetrics(){let g=Ht(mr,M1);if(Ht(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<3;ct++)ot.push(Ht(this,Mr).getInt16(g,!0)),g+=2;return ot}get fallbackName(){return An(this,P0,Ex).call(this,0)}get loadedName(){return An(this,P0,Ex).call(this,1)}get mimetype(){return An(this,P0,Ex).call(this,2)}get name(){return An(this,P0,Ex).call(this,3)}get data(){let g=Ht(mr,To);const et=Ht(this,Mr).getUint32(g);g+=4+et;const ot=Ht(this,Mr).getUint32(g);g+=4+ot;const ct=Ht(this,Mr).getUint32(g);g+=4+ct;const ut=Ht(this,Mr).getUint32(g);if(ut!==0)return new Uint8Array(Ht(this,pu),g+4,ut)}clearData(){let g=Ht(mr,To);const et=Ht(this,Mr).getUint32(g);g+=4+et;const ot=Ht(this,Mr).getUint32(g);g+=4+ot;const ct=Ht(this,Mr).getUint32(g);g+=4+ct;const ut=Ht(this,Mr).getUint32(g);new Uint8Array(Ht(this,pu),g+4,ut).fill(0),Ht(this,Mr).setUint32(g,0)}get cssFontInfo(){let g=Ht(mr,To);const et=Ht(this,Mr).getUint32(g);g+=4+et;const ot=Ht(this,Mr).getUint32(g);g+=4+ot;const ct=Ht(this,Mr).getUint32(g);if(ct===0)return null;const ut=new Uint8Array(ct);return ut.set(new Uint8Array(Ht(this,pu),g+4,ct)),new CssFontInfo(ut.buffer)}get systemFontInfo(){let g=Ht(mr,To);const et=Ht(this,Mr).getUint32(g);g+=4+et;const ot=Ht(this,Mr).getUint32(g);if(ot===0)return null;const ct=new Uint8Array(ot);return ct.set(new Uint8Array(Ht(this,pu),g+4,ot)),new SystemFontInfo(ct.buffer)}static write(g){const et=g.systemFontInfo?SystemFontInfo.write(g.systemFontInfo):null,ot=g.cssFontInfo?CssFontInfo.write(g.cssFontInfo):null,ct=new TextEncoder,ut={};let dt=0;for(const zt of mr.strings)ut[zt]=ct.encode(g[zt]),dt+=4+ut[zt].length;const ft=Ht(mr,To)+4+dt+4+(et?et.byteLength:0)+4+(ot?ot.byteLength:0)+4+(g.data?g.data.length:0),St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let jt=0;const Rt=mr.bools.length;let Ft=0,$t=0;for(let zt=0;zt<Rt;zt++){const Kt=g[mr.bools[zt]];Ft|=(Kt===void 0?0:Kt?2:1)<<$t,$t+=2,($t===8||zt===Rt-1)&&(Tt.setUint8(jt++,Ft),Ft=0,$t=0)}assert(jt===Ht(mr,R1),"FontInfo.write: Boolean properties offset mismatch");for(const zt of mr.numbers)Tt.setFloat64(jt,g[zt]),jt+=8;if(assert(jt===Ht(mr,P1),"FontInfo.write: Number properties offset mismatch"),g.bbox){Tt.setUint8(jt++,4);for(const zt of g.bbox)Tt.setInt16(jt,zt,!0),jt+=2}else Tt.setUint8(jt++,0),jt+=2*4;if(assert(jt===Ht(mr,N1),"FontInfo.write: BBox properties offset mismatch"),g.fontMatrix){Tt.setUint8(jt++,6);for(const zt of g.fontMatrix)Tt.setFloat64(jt,zt,!0),jt+=8}else Tt.setUint8(jt++,0),jt+=8*6;if(assert(jt===Ht(mr,M1),"FontInfo.write: FontMatrix properties offset mismatch"),g.defaultVMetrics){Tt.setUint8(jt++,1);for(const zt of g.defaultVMetrics)Tt.setInt16(jt,zt,!0),jt+=2}else Tt.setUint8(jt++,0),jt+=3*2;assert(jt===Ht(mr,To),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Tt.setUint32(Ht(mr,To),0),jt+=4;for(const zt of mr.strings){const Kt=ut[zt],Bt=Kt.length;Tt.setUint32(jt,Bt),kt.set(Kt,jt+4),jt+=4+Bt}if(Tt.setUint32(Ht(mr,To),jt-Ht(mr,To)-4),!et)Tt.setUint32(jt,0),jt+=4;else{const zt=et.byteLength;Tt.setUint32(jt,zt),assert(jt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),kt.set(new Uint8Array(et),jt+4),jt+=4+zt}if(!ot)Tt.setUint32(jt,0),jt+=4;else{const zt=ot.byteLength;Tt.setUint32(jt,zt),assert(jt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),kt.set(new Uint8Array(ot),jt+4),jt+=4+zt}return g.data===void 0?(Tt.setUint32(jt,0),jt+=4):(Tt.setUint32(jt,g.data.length),kt.set(g.data,jt+4),jt+=4+g.data.length),assert(jt<=St.byteLength,"FontInfo.write: Buffer overflow"),St.transferToFixedLength(jt)}};R1=new WeakMap,P1=new WeakMap,N1=new WeakMap,M1=new WeakMap,To=new WeakMap,pu=new WeakMap,_E=new WeakMap,Mr=new WeakMap,Ao=new WeakSet,Cl=function(g){assert(g<mr.bools.length,"Invalid boolean index");const et=Math.floor(g/4),ot=g*2%8,ct=Ht(this,Mr).getUint8(et)>>ot&3;return ct===0?void 0:ct===2},O1=new WeakSet,lw=function(g){return assert(g<mr.numbers.length,"Invalid number index"),Ht(this,Mr).getFloat64(Ht(mr,R1)+g*8)},P0=new WeakSet,Ex=function(g){assert(g<mr.strings.length,"Invalid string index");let et=Ht(mr,To)+4;for(let ut=0;ut<g;ut++)et+=Ht(this,Mr).getUint32(et)+4;const ot=Ht(this,Mr).getUint32(et),ct=new Uint8Array(ot);return ct.set(new Uint8Array(Ht(this,pu),et+4,ot)),Ht(this,_E).decode(ct)},qn(mr,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),qn(mr,"numbers",["ascent","defaultWidth","descent"]),qn(mr,"strings",["fallbackName","loadedName","mimetype","name"]),vn(mr,R1,Math.ceil(mr.bools.length*2/8)),vn(mr,P1,Ht(mr,R1)+mr.numbers.length*8),vn(mr,N1,Ht(mr,P1)+1+2*4),vn(mr,M1,Ht(mr,N1)+1+8*6),vn(mr,To,Ht(mr,M1)+1+2*3);let FontInfo=mr;var CE,RE;class GlobalWorkerOptions{static get workerPort(){return Ht(this,CE)}static set workerPort(g){if(!(typeof Worker<"u"&&g instanceof Worker)&&g!==null)throw new Error("Invalid `workerPort` type.");xn(this,CE,g)}static get workerSrc(){return Ht(this,RE)}static set workerSrc(g){if(typeof g!="string")throw new Error("Invalid `workerSrc` type.");xn(this,RE,g)}}CE=new WeakMap,RE=new WeakMap,vn(GlobalWorkerOptions,CE,null),vn(GlobalWorkerOptions,RE,"");var I1,PE;class Metadata{constructor({parsedData:g,rawData:et}){vn(this,I1,void 0);vn(this,PE,void 0);xn(this,I1,g),xn(this,PE,et)}getRaw(){return Ht(this,PE)}get(g){return Ht(this,I1).get(g)??null}[Symbol.iterator](){return Ht(this,I1).entries()}}I1=new WeakMap,PE=new WeakMap;const INTERNAL=Symbol("INTERNAL");var NE,ME,OE,D1;class OptionalContentGroup{constructor(g,{name:et,intent:ot,usage:ct,rbGroups:ut}){vn(this,NE,!1);vn(this,ME,!1);vn(this,OE,!1);vn(this,D1,!0);xn(this,NE,!!(g&RenderingIntentFlag.DISPLAY)),xn(this,ME,!!(g&RenderingIntentFlag.PRINT)),this.name=et,this.intent=ot,this.usage=ct,this.rbGroups=ut}get visible(){if(Ht(this,OE))return Ht(this,D1);if(!Ht(this,D1))return!1;const{print:g,view:et}=this.usage;return Ht(this,NE)?(et==null?void 0:et.viewState)!=="OFF":Ht(this,ME)?(g==null?void 0:g.printState)!=="OFF":!0}_setVisible(g,et,ot=!1){g!==INTERNAL&&unreachable("Internal method `_setVisible` called."),xn(this,OE,ot),xn(this,D1,et)}}NE=new WeakMap,ME=new WeakMap,OE=new WeakMap,D1=new WeakMap;var em,Or,L1,j1,IE,aC;class OptionalContentConfig{constructor(g,et=RenderingIntentFlag.DISPLAY){vn(this,IE);vn(this,em,null);vn(this,Or,new Map);vn(this,L1,null);vn(this,j1,null);if(this.renderingIntent=et,this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,xn(this,j1,g.order);for(const ot of g.groups)Ht(this,Or).set(ot.id,new OptionalContentGroup(et,ot));if(g.baseState==="OFF")for(const ot of Ht(this,Or).values())ot._setVisible(INTERNAL,!1);for(const ot of g.on)Ht(this,Or).get(ot)._setVisible(INTERNAL,!0);for(const ot of g.off)Ht(this,Or).get(ot)._setVisible(INTERNAL,!1);xn(this,L1,this.getHash())}}isVisible(g){if(Ht(this,Or).size===0)return!0;if(!g)return info("Optional content group not defined."),!0;if(g.type==="OCG")return Ht(this,Or).has(g.id)?Ht(this,Or).get(g.id).visible:(warn(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return An(this,IE,aC).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const et of g.ids){if(!Ht(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Ht(this,Or).get(et).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const et of g.ids){if(!Ht(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Ht(this,Or).get(et).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const et of g.ids){if(!Ht(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Ht(this,Or).get(et).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const et of g.ids){if(!Ht(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Ht(this,Or).get(et).visible)return!1}return!0}return warn(`Unknown optional content policy ${g.policy}.`),!0}return warn(`Unknown group type ${g.type}.`),!0}setVisibility(g,et=!0,ot=!0){var ut;const ct=Ht(this,Or).get(g);if(!ct){warn(`Optional content group not found: ${g}`);return}if(ot&&et&&ct.rbGroups.length)for(const dt of ct.rbGroups)for(const ft of dt)ft!==g&&((ut=Ht(this,Or).get(ft))==null||ut._setVisible(INTERNAL,!1,!0));ct._setVisible(INTERNAL,!!et,!0),xn(this,em,null)}setOCGState({state:g,preserveRB:et}){let ot;for(const ct of g){switch(ct){case"ON":case"OFF":case"Toggle":ot=ct;continue}const ut=Ht(this,Or).get(ct);if(ut)switch(ot){case"ON":this.setVisibility(ct,!0,et);break;case"OFF":this.setVisibility(ct,!1,et);break;case"Toggle":this.setVisibility(ct,!ut.visible,et);break}}xn(this,em,null)}get hasInitialVisibility(){return Ht(this,L1)===null||this.getHash()===Ht(this,L1)}getOrder(){return Ht(this,Or).size?Ht(this,j1)?Ht(this,j1).slice():[...Ht(this,Or).keys()]:null}getGroup(g){return Ht(this,Or).get(g)||null}getHash(){if(Ht(this,em)!==null)return Ht(this,em);const g=new MurmurHash3_64;for(const[et,ot]of Ht(this,Or))g.update(`${et}:${ot.visible}`);return xn(this,em,g.hexdigest())}[Symbol.iterator](){return Ht(this,Or).entries()}}em=new WeakMap,Or=new WeakMap,L1=new WeakMap,j1=new WeakMap,IE=new WeakSet,aC=function(g){const et=g.length;if(et<2)return!0;const ot=g[0];for(let ct=1;ct<et;ct++){const ut=g[ct];let dt;if(Array.isArray(ut))dt=An(this,IE,aC).call(this,ut);else if(Ht(this,Or).has(ut))dt=Ht(this,Or).get(ut).visible;else return warn(`Optional content group not found: ${ut}`),!0;switch(ot){case"And":if(!dt)return!1;break;case"Or":if(dt)return!0;break;case"Not":return!dt;default:return!0}}return ot==="And"};class PDFDataTransportStream{constructor(g,{disableRange:et=!1,disableStream:ot=!1}){assert(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ct,initialData:ut,progressiveDone:dt,contentDispositionFilename:ft}=g;if(this._queuedChunks=[],this._progressiveDone=dt,this._contentDispositionFilename=ft,(ut==null?void 0:ut.length)>0){const St=ut instanceof Uint8Array&&ut.byteLength===ut.buffer.byteLength?ut.buffer:new Uint8Array(ut).buffer;this._queuedChunks.push(St)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!ot,this._isRangeSupported=!et,this._contentLength=ct,this._fullRequestReader=null,this._rangeReaders=[],g.addRangeListener((St,kt)=>{this._onReceiveData({begin:St,chunk:kt})}),g.addProgressListener((St,kt)=>{this._onProgress({loaded:St,total:kt})}),g.addProgressiveReadListener(St=>{this._onReceiveData({chunk:St})}),g.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),g.transportReady()}_onReceiveData({begin:g,chunk:et}){const ot=et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength?et.buffer:new Uint8Array(et).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ot):this._queuedChunks.push(ot);else{const ct=this._rangeReaders.some(function(ut){return ut._begin!==g?!1:(ut._enqueue(ot),!0)});assert(ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var et,ot,ct,ut;g.total===void 0?(ot=(et=this._rangeReaders[0])==null?void 0:et.onProgress)==null||ot.call(et,{loaded:g.loaded}):(ut=(ct=this._fullRequestReader)==null?void 0:ct.onProgress)==null||ut.call(ct,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const et=this._rangeReaders.indexOf(g);et>=0&&this._rangeReaders.splice(et,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFDataTransportStreamRangeReader(this,g,et);return this._pdfDataRangeTransport.requestDataRange(g,et),this._rangeReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeReaders.slice(0))ot.cancel(g);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(g,et,ot=!1,ct=null){this._stream=g,this._done=ot||!1,this._filename=isPdfFile(ct)?ct:null,this._queuedChunks=et||[],this._loaded=0;for(const ut of this._queuedChunks)this._loaded+=ut.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(g,et,ot){this._stream=g,this._begin=et,this._end=ot,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(it){let g=!0,et=ot("filename\\*","i").exec(it);if(et){et=et[1];let Tt=ft(et);return Tt=unescape(Tt),Tt=St(Tt),Tt=kt(Tt),ut(Tt)}if(et=dt(it),et){const Tt=kt(et);return ut(Tt)}if(et=ot("filename","i").exec(it),et){et=et[1];let Tt=ft(et);return Tt=kt(Tt),ut(Tt)}function ot(Tt,jt){return new RegExp("(?:^|;)\\s*"+Tt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',jt)}function ct(Tt,jt){if(Tt){if(!/^[\x00-\xFF]+$/.test(jt))return jt;try{const Rt=new TextDecoder(Tt,{fatal:!0}),Ft=stringToBytes(jt);jt=Rt.decode(Ft),g=!1}catch{}}return jt}function ut(Tt){return g&&/[\x80-\xff]/.test(Tt)&&(Tt=ct("utf-8",Tt),g&&(Tt=ct("iso-8859-1",Tt))),Tt}function dt(Tt){const jt=[];let Rt;const Ft=ot("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Rt=Ft.exec(Tt))!==null;){let[,zt,Kt,Bt]=Rt;if(zt=parseInt(zt,10),zt in jt){if(zt===0)break;continue}jt[zt]=[Kt,Bt]}const $t=[];for(let zt=0;zt<jt.length&&zt in jt;++zt){let[Kt,Bt]=jt[zt];Bt=ft(Bt),Kt&&(Bt=unescape(Bt),zt===0&&(Bt=St(Bt))),$t.push(Bt)}return $t.join("")}function ft(Tt){if(Tt.startsWith('"')){const jt=Tt.slice(1).split('\\"');for(let Rt=0;Rt<jt.length;++Rt){const Ft=jt[Rt].indexOf('"');Ft!==-1&&(jt[Rt]=jt[Rt].slice(0,Ft),jt.length=Rt+1),jt[Rt]=jt[Rt].replaceAll(/\\(.)/g,"$1")}Tt=jt.join('"')}return Tt}function St(Tt){const jt=Tt.indexOf("'");if(jt===-1)return Tt;const Rt=Tt.slice(0,jt),$t=Tt.slice(jt+1).replace(/^[^']*'/,"");return ct(Rt,$t)}function kt(Tt){return!Tt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tt)?Tt:Tt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(jt,Rt,Ft,$t){if(Ft==="q"||Ft==="Q")return $t=$t.replaceAll("_"," "),$t=$t.replaceAll(/=([0-9a-fA-F]{2})/g,function(zt,Kt){return String.fromCharCode(parseInt(Kt,16))}),ct(Rt,$t);try{$t=atob($t)}catch{}return ct(Rt,$t)})}return""}function createHeaders(it,g){const et=new Headers;if(!it||!g||typeof g!="object")return et;for(const ot in g){const ct=g[ot];ct!==void 0&&et.append(ot,ct)}return et}function getResponseOrigin(it){var g;return((g=URL.parse(it))==null?void 0:g.origin)??null}function validateRangeRequestCapabilities({responseHeaders:it,isHttp:g,rangeChunkSize:et,disableRange:ot}){const ct={allowRangeRequests:!1,suggestedLength:void 0},ut=parseInt(it.get("Content-Length"),10);return!Number.isInteger(ut)||(ct.suggestedLength=ut,ut<=2*et)||ot||!g||it.get("Accept-Ranges")!=="bytes"||(it.get("Content-Encoding")||"identity")!=="identity"||(ct.allowRangeRequests=!0),ct}function extractFilenameFromHeader(it){const g=it.get("Content-Disposition");if(g){let et=getFilenameFromContentDispositionHeader(g);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if(isPdfFile(et))return et}return null}function createResponseError(it,g){return new ResponseException(`Unexpected server response (${it}) while retrieving PDF "${g}".`,it,it===404||it===0&&g.startsWith("file:"))}function validateResponseStatus(it){return it===200||it===206}function createFetchOptions(it,g,et){return{method:"GET",headers:it,signal:et.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(it){return it instanceof Uint8Array?it.buffer:it instanceof ArrayBuffer?it:(warn(`getArrayBuffer - unexpected data format: ${it}`),new Uint8Array(it).buffer)}class PDFFetchStream{constructor(g){qn(this,"_responseOrigin",null);this.source=g,this.isHttp=/^https?:/i.test(g.url),this.headers=createHeaders(this.isHttp,g.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFFetchStreamRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFFetchStreamReader{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const et=g.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange;const ot=new Headers(g.headers),ct=et.url;fetch(ct,createFetchOptions(ot,this._withCredentials,this._abortController)).then(ut=>{if(g._responseOrigin=getResponseOrigin(ut.url),!validateResponseStatus(ut.status))throw createResponseError(ut.status,ct);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=ut.headers,{allowRangeRequests:ft,suggestedLength:St}=validateRangeRequestCapabilities({responseHeaders:dt,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=St||this._contentLength,this._filename=extractFilenameFromHeader(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(g,et,ot){this._stream=g,this._reader=null,this._loaded=0;const ct=g.source;this._withCredentials=ct.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ct.disableStream,this._abortController=new AbortController;const ut=new Headers(g.headers);ut.append("Range",`bytes=${et}-${ot-1}`);const dt=ct.url;fetch(dt,createFetchOptions(ut,this._withCredentials,this._abortController)).then(ft=>{const St=getResponseOrigin(ft.url);if(St!==g._responseOrigin)throw new Error(`Expected range response-origin "${St}" to match "${g._responseOrigin}".`);if(!validateResponseStatus(ft.status))throw createResponseError(ft.status,dt);this._readCapability.resolve(),this._reader=ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(it){const g=it.response;return typeof g!="string"?g:stringToBytes(g).buffer}class NetworkManager{constructor({url:g,httpHeaders:et,withCredentials:ot}){qn(this,"_responseOrigin",null);this.url=g,this.isHttp=/^https?:/i.test(g),this.headers=createHeaders(this.isHttp,et),this.withCredentials=ot||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(g){const et=new XMLHttpRequest,ot=this.currXhrId++,ct=this.pendingRequests[ot]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const[ut,dt]of this.headers)et.setRequestHeader(ut,dt);return this.isHttp&&"begin"in g&&"end"in g?(et.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),ct.expectedStatus=PARTIAL_CONTENT_RESPONSE):ct.expectedStatus=OK_RESPONSE,et.responseType="arraybuffer",assert(g.onError,"Expected `onError` callback to be provided."),et.onerror=()=>{g.onError(et.status)},et.onreadystatechange=this.onStateChange.bind(this,ot),et.onprogress=this.onProgress.bind(this,ot),ct.onHeadersReceived=g.onHeadersReceived,ct.onDone=g.onDone,ct.onError=g.onError,ct.onProgress=g.onProgress,et.send(null),ot}onProgress(g,et){var ct;const ot=this.pendingRequests[g];ot&&((ct=ot.onProgress)==null||ct.call(ot,et))}onStateChange(g,et){const ot=this.pendingRequests[g];if(!ot)return;const ct=ot.xhr;if(ct.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),ct.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],ct.status===0&&this.isHttp){ot.onError(ct.status);return}const ut=ct.status||OK_RESPONSE;if(!(ut===OK_RESPONSE&&ot.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ut!==ot.expectedStatus){ot.onError(ct.status);return}const ft=network_getArrayBuffer(ct);if(ut===PARTIAL_CONTENT_RESPONSE){const St=ct.getResponseHeader("Content-Range"),kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(St);kt?ot.onDone({begin:parseInt(kt[1],10),chunk:ft}):(warn('Missing or invalid "Content-Range" header.'),ot.onError(0))}else ft?ot.onDone({begin:0,chunk:ft}):ot.onError(ct.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const et=this.pendingRequests[g].xhr;delete this.pendingRequests[g],et.abort()}}class PDFNetworkStream{constructor(g){this._source=g,this._manager=new NetworkManager(g),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const et=this._rangeRequestReaders.indexOf(g);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(g,et){const ot=new PDFNetworkStreamRangeRequestReader(this._manager,g,et);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNetworkStreamFullRequestReader{constructor(g,et){this._manager=g,this._url=et.url,this._fullRequestId=g.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,et=this._manager.getRequestXhr(g);this._manager._responseOrigin=getResponseOrigin(et.responseURL);const ot=et.getAllResponseHeaders(),ct=new Headers(ot?ot.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(ft=>{const[St,...kt]=ft.split(": ");return[St,kt.join(": ")]}):[]),{allowRangeRequests:ut,suggestedLength:dt}=validateRangeRequestCapabilities({responseHeaders:ct,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ut&&(this._isRangeSupported=!0),this._contentLength=dt||this._contentLength,this._filename=extractFilenameFromHeader(ct),this._isRangeSupported&&this._manager.abortRequest(g),this._headersCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=createResponseError(g,this._url),this._headersCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var et;(et=this.onProgress)==null||et.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersCapability.reject(g);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(g,et,ot){this._manager=g,this._url=g.url,this._requestId=g.request({begin:et,end:ot,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var et;const g=getResponseOrigin((et=this._manager.getRequestXhr(this._requestId))==null?void 0:et.responseURL);g!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${g}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const et=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError??(this._storedError=createResponseError(g,this._url));for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(it){if(urlRegex.test(it))return new URL(it);const g=process.getBuiltinModule("url");return new URL(g.pathToFileURL(it))}class PDFNodeStream{constructor(g){this.source=g,this.url=parseUrlOrPath(g.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFNodeStreamFsRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNodeStreamFsFullReader{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=g.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const ot=process.getBuiltinModule("fs");ot.promises.lstat(this._url).then(ct=>{this._contentLength=ct.size,this._setReadableStream(ot.createReadStream(this._url)),this._headersCapability.resolve()},ct=>{ct.code==="ENOENT"&&(ct=createResponseError(0,this._url.href)),this._storedError=ct,this._headersCapability.reject(ct)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(g,et,ot){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ct=g.source;this._isStreamingSupported=!ct.disableStream;const ut=process.getBuiltinModule("fs");this._setReadableStream(ut.createReadStream(this._url,{start:et,end:ot-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var Co,DE,lC;class PDFObjects{constructor(){vn(this,DE);vn(this,Co,Object.create(null))}get(g,et=null){if(et){const ct=An(this,DE,lC).call(this,g);return ct.promise.then(()=>et(ct.data)),null}const ot=Ht(this,Co)[g];if(!ot||ot.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${g}.`);return ot.data}has(g){const et=Ht(this,Co)[g];return!!et&&et.data!==INITIAL_DATA}delete(g){const et=Ht(this,Co)[g];return!et||et.data===INITIAL_DATA?!1:(delete Ht(this,Co)[g],!0)}resolve(g,et=null){const ot=An(this,DE,lC).call(this,g);ot.data=et,ot.resolve()}clear(){var g;for(const et in Ht(this,Co)){const{data:ot}=Ht(this,Co)[et];(g=ot==null?void 0:ot.bitmap)==null||g.close()}xn(this,Co,Object.create(null))}*[Symbol.iterator](){for(const g in Ht(this,Co)){const{data:et}=Ht(this,Co)[g];et!==INITIAL_DATA&&(yield[g,et])}}}Co=new WeakMap,DE=new WeakSet,lC=function(g){var et;return(et=Ht(this,Co))[g]||(et[g]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var LP,tm,go,LE,jE,N0,_h,FE,$E,M0,F1,$1,im,B1,BE,V1,O0,VE,zE,qr,z1,I0,HE,sm,H1,gT,w3,yT,k3,UE,cC,U1,cw,GE,uC,vT,T3,xT,A3;let TextLayer$1=(qr=class{constructor({textContentSource:g,container:et,viewport:ot}){vn(this,gT);vn(this,yT);vn(this,UE);vn(this,tm,Promise.withResolvers());vn(this,go,null);vn(this,LE,!1);vn(this,jE,!!((LP=globalThis.FontInspector)!=null&&LP.enabled));vn(this,N0,null);vn(this,_h,null);vn(this,FE,0);vn(this,$E,0);vn(this,M0,null);vn(this,F1,null);vn(this,$1,0);vn(this,im,0);vn(this,B1,Object.create(null));vn(this,BE,[]);vn(this,V1,null);vn(this,O0,[]);vn(this,VE,new WeakMap);vn(this,zE,null);var St;if(g instanceof ReadableStream)xn(this,V1,g);else if(typeof g=="object")xn(this,V1,new ReadableStream({start(kt){kt.enqueue(g),kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');xn(this,go,xn(this,F1,et)),xn(this,im,ot.scale*OutputScale.pixelRatio),xn(this,$1,ot.rotation),xn(this,_h,{div:null,properties:null,ctx:null});const{pageWidth:ct,pageHeight:ut,pageX:dt,pageY:ft}=ot.rawDims;xn(this,zE,[1,0,0,-1,-dt,ft+ut]),xn(this,$E,ct),xn(this,FE,ut),An(St=qr,vT,T3).call(St),setLayerDimensions(et,ot),Ht(this,tm).promise.finally(()=>{Ht(qr,H1).delete(this),xn(this,_h,null),xn(this,B1,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:g,isFirefox:et}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${g&&et?"Calibri, ":""}sans-serif`],["monospace",`${g&&et?"Lucida Console, ":""}monospace`]]))}render(){const g=()=>{Ht(this,M0).read().then(({value:et,done:ot})=>{if(ot){Ht(this,tm).resolve();return}Ht(this,N0)??xn(this,N0,et.lang),Object.assign(Ht(this,B1),et.styles),An(this,gT,w3).call(this,et.items),g()},Ht(this,tm).reject)};return xn(this,M0,Ht(this,V1).getReader()),Ht(qr,H1).add(this),g(),Ht(this,tm).promise}update({viewport:g,onBefore:et=null}){var ut;const ot=g.scale*OutputScale.pixelRatio,ct=g.rotation;if(ct!==Ht(this,$1)&&(et==null||et(),xn(this,$1,ct),setLayerDimensions(Ht(this,F1),{rotation:ct})),ot!==Ht(this,im)){et==null||et(),xn(this,im,ot);const dt={div:null,properties:null,ctx:An(ut=qr,U1,cw).call(ut,Ht(this,N0))};for(const ft of Ht(this,O0))dt.properties=Ht(this,VE).get(ft),dt.div=ft,An(this,UE,cC).call(this,dt)}}cancel(){var et;const g=new AbortException("TextLayer task cancelled.");(et=Ht(this,M0))==null||et.cancel(g).catch(()=>{}),xn(this,M0,null),Ht(this,tm).reject(g)}get textDivs(){return Ht(this,O0)}get textContentItemsStr(){return Ht(this,BE)}static cleanup(){if(!(Ht(this,H1).size>0)){Ht(this,z1).clear();for(const{canvas:g}of Ht(this,I0).values())g.remove();Ht(this,I0).clear()}}},tm=new WeakMap,go=new WeakMap,LE=new WeakMap,jE=new WeakMap,N0=new WeakMap,_h=new WeakMap,FE=new WeakMap,$E=new WeakMap,M0=new WeakMap,F1=new WeakMap,$1=new WeakMap,im=new WeakMap,B1=new WeakMap,BE=new WeakMap,V1=new WeakMap,O0=new WeakMap,VE=new WeakMap,zE=new WeakMap,z1=new WeakMap,I0=new WeakMap,HE=new WeakMap,sm=new WeakMap,H1=new WeakMap,gT=new WeakSet,w3=function(g){var ct,ut;if(Ht(this,LE))return;(ut=Ht(this,_h)).ctx??(ut.ctx=An(ct=qr,U1,cw).call(ct,Ht(this,N0)));const et=Ht(this,O0),ot=Ht(this,BE);for(const dt of g){if(et.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),xn(this,LE,!0);return}if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ft=Ht(this,go);xn(this,go,document.createElement("span")),Ht(this,go).classList.add("markedContent"),dt.id&&Ht(this,go).setAttribute("id",`${dt.id}`),ft.append(Ht(this,go))}else dt.type==="endMarkedContent"&&xn(this,go,Ht(this,go).parentNode);continue}ot.push(dt.str),An(this,yT,k3).call(this,dt)}},yT=new WeakSet,k3=function(g){var zt;const et=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};Ht(this,O0).push(et);const ct=Util$1.transform(Ht(this,zE),g.transform);let ut=Math.atan2(ct[1],ct[0]);const dt=Ht(this,B1)[g.fontName];dt.vertical&&(ut+=Math.PI/2);let ft=Ht(this,jE)&&dt.fontSubstitution||dt.fontFamily;ft=qr.fontFamilyMap.get(ft)||ft;const St=Math.hypot(ct[2],ct[3]),kt=St*An(zt=qr,xT,A3).call(zt,ft,dt,Ht(this,N0));let Tt,jt;ut===0?(Tt=ct[4],jt=ct[5]-kt):(Tt=ct[4]+kt*Math.sin(ut),jt=ct[5]-kt*Math.cos(ut));const Rt="calc(var(--total-scale-factor) *",Ft=et.style;Ht(this,go)===Ht(this,F1)?(Ft.left=`${(100*Tt/Ht(this,$E)).toFixed(2)}%`,Ft.top=`${(100*jt/Ht(this,FE)).toFixed(2)}%`):(Ft.left=`${Rt}${Tt.toFixed(2)}px)`,Ft.top=`${Rt}${jt.toFixed(2)}px)`),Ft.fontSize=`${Rt}${(Ht(qr,sm)*St).toFixed(2)}px)`,Ft.fontFamily=ft,ot.fontSize=St,et.setAttribute("role","presentation"),et.textContent=g.str,et.dir=g.dir,Ht(this,jE)&&(et.dataset.fontName=dt.fontSubstitutionLoadedName||g.fontName),ut!==0&&(ot.angle=ut*(180/Math.PI));let $t=!1;if(g.str.length>1)$t=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const Kt=Math.abs(g.transform[0]),Bt=Math.abs(g.transform[3]);Kt!==Bt&&Math.max(Kt,Bt)/Math.min(Kt,Bt)>1.5&&($t=!0)}if($t&&(ot.canvasWidth=dt.vertical?g.height:g.width),Ht(this,VE).set(et,ot),Ht(this,_h).div=et,Ht(this,_h).properties=ot,An(this,UE,cC).call(this,Ht(this,_h)),ot.hasText&&Ht(this,go).append(et),ot.hasEOL){const Kt=document.createElement("br");Kt.setAttribute("role","presentation"),Ht(this,go).append(Kt)}},UE=new WeakSet,cC=function(g){var ft;const{div:et,properties:ot,ctx:ct}=g,{style:ut}=et;let dt="";if(Ht(qr,sm)>1&&(dt=`scale(${1/Ht(qr,sm)})`),ot.canvasWidth!==0&&ot.hasText){const{fontFamily:St}=ut,{canvasWidth:kt,fontSize:Tt}=ot;An(ft=qr,GE,uC).call(ft,ct,Tt*Ht(this,im),St);const{width:jt}=ct.measureText(et.textContent);jt>0&&(dt=`scaleX(${kt*Ht(this,im)/jt}) ${dt}`)}ot.angle!==0&&(dt=`rotate(${ot.angle}deg) ${dt}`),dt.length>0&&(ut.transform=dt)},U1=new WeakSet,cw=function(g=null){let et=Ht(this,I0).get(g||(g=""));if(!et){const ot=document.createElement("canvas");ot.className="hiddenCanvasElement",ot.lang=g,document.body.append(ot),et=ot.getContext("2d",{alpha:!1,willReadFrequently:!0}),Ht(this,I0).set(g,et),Ht(this,HE).set(et,{size:0,family:""})}return et},GE=new WeakSet,uC=function(g,et,ot){const ct=Ht(this,HE).get(g);et===ct.size&&ot===ct.family||(g.font=`${et}px ${ot}`,ct.size=et,ct.family=ot)},vT=new WeakSet,T3=function(){if(Ht(this,sm)!==null)return;const g=document.createElement("div");g.style.opacity=0,g.style.lineHeight=1,g.style.fontSize="1px",g.style.position="absolute",g.textContent="X",document.body.append(g),xn(this,sm,g.getBoundingClientRect().height),g.remove()},xT=new WeakSet,A3=function(g,et,ot){const ct=Ht(this,z1).get(g);if(ct)return ct;const ut=An(this,U1,cw).call(this,ot);ut.canvas.width=ut.canvas.height=DEFAULT_FONT_SIZE,An(this,GE,uC).call(this,ut,DEFAULT_FONT_SIZE,g);const dt=ut.measureText(""),ft=dt.fontBoundingBoxAscent,St=Math.abs(dt.fontBoundingBoxDescent);ut.canvas.width=ut.canvas.height=0;let kt=.8;return ft?kt=ft/(ft+St):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),et.ascent?kt=et.ascent:et.descent&&(kt=1+et.descent)),Ht(this,z1).set(g,kt),kt},vn(qr,U1),vn(qr,GE),vn(qr,vT),vn(qr,xT),vn(qr,z1,new Map),vn(qr,I0,new Map),vn(qr,HE,new WeakMap),vn(qr,sm,null),vn(qr,H1,new Set),qr);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(it={}){typeof it=="string"||it instanceof URL?it={url:it}:(it instanceof ArrayBuffer||ArrayBuffer.isView(it))&&(it={data:it});const g=new PDFDocumentLoadingTask,{docId:et}=g,ot=it.url?getUrlProp(it.url):null,ct=it.data?getDataProp(it.data):null,ut=it.httpHeaders||null,dt=it.withCredentials===!0,ft=it.password??null,St=it.range instanceof PDFDataRangeTransport$1?it.range:null,kt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:2**16;let Tt=it.worker instanceof PDFWorker?it.worker:null;const jt=it.verbosity,Rt=typeof it.docBaseUrl=="string"&&!isDataScheme(it.docBaseUrl)?it.docBaseUrl:null,Ft=getFactoryUrlProp(it.cMapUrl),$t=it.cMapPacked!==!1,zt=it.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Kt=getFactoryUrlProp(it.iccUrl),Bt=getFactoryUrlProp(it.standardFontDataUrl),Ut=it.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),Jt=getFactoryUrlProp(it.wasmUrl),en=it.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),tn=it.stopAtErrors!==!0,nn=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,rn=it.isEvalSupported!==!1,on=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!isNodeJS,dn=typeof it.isImageDecoderSupported=="boolean"?it.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),cn=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,fn=typeof it.disableFontFace=="boolean"?it.disableFontFace:isNodeJS,mn=it.fontExtraProperties===!0,En=it.enableXfa===!0,Sn=it.ownerDocument||globalThis.document,wn=it.disableRange===!0,hn=it.disableStream===!0,yn=it.disableAutoFetch===!0,an=it.pdfBug===!0,un=it.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),bn=it.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),pn=it.enableHWA===!0,kn=it.useWasm!==!1,_n=St?St.length:it.length??NaN,Rn=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!isNodeJS&&!fn,Nn=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:!!(zt===DOMCMapReaderFactory&&Ut===DOMStandardFontDataFactory&&en===DOMWasmFactory&&Ft&&Bt&&Jt&&isValidFetchUrl(Ft,document.baseURI)&&isValidFetchUrl(Bt,document.baseURI)&&isValidFetchUrl(Jt,document.baseURI)),Cn=null;setVerbosityLevel(jt);const Mn={canvasFactory:new un({ownerDocument:Sn,enableHWA:pn}),filterFactory:new bn({docId:et,ownerDocument:Sn}),cMapReaderFactory:Nn?null:new zt({baseUrl:Ft,isCompressed:$t}),standardFontDataFactory:Nn?null:new Ut({baseUrl:Bt}),wasmFactory:Nn?null:new en({baseUrl:Jt})};Tt||(Tt=PDFWorker.create({verbosity:jt,port:GlobalWorkerOptions.workerPort}),g._worker=Tt);const In={docId:et,apiVersion:"5.4.296",data:ct,password:ft,disableAutoFetch:yn,rangeChunkSize:kt,length:_n,docBaseUrl:Rt,enableXfa:En,evaluatorOptions:{maxImageSize:nn,disableFontFace:fn,ignoreErrors:tn,isEvalSupported:rn,isOffscreenCanvasSupported:on,isImageDecoderSupported:dn,canvasMaxAreaInBytes:cn,fontExtraProperties:mn,useSystemFonts:Rn,useWasm:kn,useWorkerFetch:Nn,cMapUrl:Ft,iccUrl:Kt,standardFontDataUrl:Bt,wasmUrl:Jt}},On={ownerDocument:Sn,pdfBug:an,styleElement:Cn,loadingParams:{disableAutoFetch:yn,enableXfa:En}};return Tt.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const jn=Tt.messageHandler.sendWithPromise("GetDocRequest",In,ct?[ct.buffer]:null);let Gn;if(St)Gn=new PDFDataTransportStream(St,{disableRange:wn,disableStream:hn});else if(!ct){if(!ot)throw new Error("getDocument - no `url` parameter provided.");const Jn=isValidFetchUrl(ot)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;Gn=new Jn({url:ot,length:_n,httpHeaders:ut,withCredentials:dt,rangeChunkSize:kt,disableRange:wn,disableStream:hn})}return jn.then(Jn=>{if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const Un=new MessageHandler(et,Jn,Tt.port),Hn=new WorkerTransport(Un,g,Gn,On,Mn,pn);g._transport=Hn,Un.send("Ready",null)})}).catch(g._capability.reject),g}var bT;const ET=class ET{constructor(){qn(this,"_capability",Promise.withResolvers());qn(this,"_transport",null);qn(this,"_worker",null);qn(this,"docId",`d${cs(ET,bT)._++}`);qn(this,"destroyed",!1);qn(this,"onPassword",null);qn(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var g,et,ot,ct;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((et=this._transport)==null?void 0:et.destroy())}catch(ut){throw(ot=this._worker)!=null&&ot.port&&delete this._worker._pendingDestroy,ut}this._transport=null,(ct=this._worker)==null||ct.destroy(),this._worker=null}async getData(){return this._transport.getData()}};bT=new WeakMap,vn(ET,bT,0);let PDFDocumentLoadingTask=ET;var D0,WE,qE,KE,YE,jP;let PDFDataRangeTransport$1=(jP=class{constructor(g,et,ot=!1,ct=null){vn(this,D0,Promise.withResolvers());vn(this,WE,[]);vn(this,qE,[]);vn(this,KE,[]);vn(this,YE,[]);this.length=g,this.initialData=et,this.progressiveDone=ot,this.contentDispositionFilename=ct}addRangeListener(g){Ht(this,YE).push(g)}addProgressListener(g){Ht(this,KE).push(g)}addProgressiveReadListener(g){Ht(this,qE).push(g)}addProgressiveDoneListener(g){Ht(this,WE).push(g)}onDataRange(g,et){for(const ot of Ht(this,YE))ot(g,et)}onDataProgress(g,et){Ht(this,D0).promise.then(()=>{for(const ot of Ht(this,KE))ot(g,et)})}onDataProgressiveRead(g){Ht(this,D0).promise.then(()=>{for(const et of Ht(this,qE))et(g)})}onDataProgressiveDone(){Ht(this,D0).promise.then(()=>{for(const g of Ht(this,WE))g()})}transportReady(){Ht(this,D0).resolve()}requestDataRange(g,et){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},D0=new WeakMap,WE=new WeakMap,qE=new WeakMap,KE=new WeakMap,YE=new WeakMap,jP);class PDFDocumentProxy{constructor(g,et){this._pdfInfo=g,this._transport=et}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(g,et){return this._transport.getAnnotationsByType(g,et)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getOptionalContentConfig(et)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(g){return this._transport.cachedPageNumber(g)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _d,L0,Sx;class PDFPageProxy{constructor(g,et,ot,ct=!1){vn(this,L0);vn(this,_d,!1);this._pageIndex=g,this._pageInfo=et,this._transport=ot,this._stats=ct?new StatTimer:null,this._pdfBug=ct,this.commonObjs=ot.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:et=this.rotate,offsetX:ot=0,offsetY:ct=0,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}getAnnotations({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,et)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,canvas:et=g.canvas,viewport:ot,intent:ct="display",annotationMode:ut=AnnotationMode.ENABLE,transform:dt=null,background:ft=null,optionalContentConfigPromise:St=null,annotationCanvasMap:kt=null,pageColors:Tt=null,printAnnotationStorage:jt=null,isEditing:Rt=!1,recordOperations:Ft=!1,operationsFilter:$t=null}){var dn,cn,fn;(dn=this._stats)==null||dn.time("Overall");const zt=this._transport.getRenderingIntent(ct,ut,jt,Rt),{renderingIntent:Kt,cacheKey:Bt}=zt;xn(this,_d,!1),St||(St=this._transport.getOptionalContentConfig(Kt));let Ut=this._intentStates.get(Bt);Ut||(Ut=Object.create(null),this._intentStates.set(Bt,Ut)),Ut.streamReaderCancelTimeout&&(clearTimeout(Ut.streamReaderCancelTimeout),Ut.streamReaderCancelTimeout=null);const Jt=!!(Kt&RenderingIntentFlag.PRINT);Ut.displayReadyCapability||(Ut.displayReadyCapability=Promise.withResolvers(),Ut.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(cn=this._stats)==null||cn.time("Page Request"),this._pumpOperatorList(zt));const en=!!(this._pdfBug&&((fn=globalThis.StepperManager)!=null&&fn.enabled)),tn=!this.recordedBBoxes&&(Ft||en),nn=mn=>{var En,Sn;if(Ut.renderTasks.delete(rn),tn){const wn=(En=rn.gfx)==null?void 0:En.dependencyTracker.take();wn&&(rn.stepper&&rn.stepper.setOperatorBBoxes(wn,rn.gfx.dependencyTracker.takeDebugMetadata()),Ft&&(this.recordedBBoxes=wn))}Jt&&xn(this,_d,!0),An(this,L0,Sx).call(this),mn?(rn.capability.reject(mn),this._abortOperatorList({intentState:Ut,reason:mn instanceof Error?mn:new Error(mn)})):rn.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Sn=globalThis.Stats)!=null&&Sn.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},rn=new InternalRenderTask({callback:nn,params:{canvas:et,canvasContext:g,dependencyTracker:tn?new CanvasDependencyTracker(et,Ut.operatorList.length,en):null,viewport:ot,transform:dt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:Ut.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Jt,pdfBug:this._pdfBug,pageColors:Tt,enableHWA:this._transport.enableHWA,operationsFilter:$t});(Ut.renderTasks||(Ut.renderTasks=new Set)).add(rn);const on=rn.task;return Promise.all([Ut.displayReadyCapability.promise,St]).then(([mn,En])=>{var Sn;if(this.destroyed){nn();return}if((Sn=this._stats)==null||Sn.time("Rendering"),!(En.renderingIntent&Kt))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");rn.initializeGraphics({transparency:mn,optionalContentConfig:En}),rn.operatorListChanged()}).catch(nn),on}getOperatorList({intent:g="display",annotationMode:et=AnnotationMode.ENABLE,printAnnotationStorage:ot=null,isEditing:ct=!1}={}){var kt;function ut(){ft.operatorList.lastChunk&&(ft.opListReadCapability.resolve(ft.operatorList),ft.renderTasks.delete(St))}const dt=this._transport.getRenderingIntent(g,et,ot,ct,!0);let ft=this._intentStates.get(dt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(dt.cacheKey,ft));let St;return ft.opListReadCapability||(St=Object.create(null),St.operatorListChanged=ut,ft.opListReadCapability=Promise.withResolvers(),(ft.renderTasks||(ft.renderTasks=new Set)).add(St),ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(kt=this._stats)==null||kt.time("Page Request"),this._pumpOperatorList(dt)),ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:et===!0},{highWaterMark:100,size(ct){return ct.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(ot=>XfaText.textContent(ot));const et=this.streamTextContent(g);return new Promise(function(ot,ct){function ut(){dt.read().then(function({value:St,done:kt}){if(kt){ot(ft);return}ft.lang??(ft.lang=St.lang),Object.assign(ft.styles,St.styles),ft.items.push(...St.items),ut()},ct)}const dt=et.getReader(),ft={items:[],styles:Object.create(null),lang:null};ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const et of this._intentStates.values())if(this._abortOperatorList({intentState:et,reason:new Error("Page was destroyed."),force:!0}),!et.opListReadCapability)for(const ot of et.renderTasks)g.push(ot.completed),ot.cancel();return this.objs.clear(),xn(this,_d,!1),Promise.all(g)}cleanup(g=!1){xn(this,_d,!0);const et=An(this,L0,Sx).call(this);return g&&et&&this._stats&&(this._stats=new StatTimer),et}_startRenderPage(g,et){var ct,ut;const ot=this._intentStates.get(et);ot&&((ct=this._stats)==null||ct.timeEnd("Page Request"),(ut=ot.displayReadyCapability)==null||ut.resolve(g))}_renderPageChunk(g,et){for(let ot=0,ct=g.length;ot<ct;ot++)et.operatorList.fnArray.push(g.fnArray[ot]),et.operatorList.argsArray.push(g.argsArray[ot]);et.operatorList.lastChunk=g.lastChunk,et.operatorList.separateAnnots=g.separateAnnots;for(const ot of et.renderTasks)ot.operatorListChanged();g.lastChunk&&An(this,L0,Sx).call(this)}_pumpOperatorList({renderingIntent:g,cacheKey:et,annotationStorageSerializable:ot,modifiedIds:ct}){const{map:ut,transfer:dt}=ot,St=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:et,annotationStorage:ut,modifiedIds:ct},dt).getReader(),kt=this._intentStates.get(et);kt.streamReader=St;const Tt=()=>{St.read().then(({value:jt,done:Rt})=>{if(Rt){kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(jt,kt),Tt())},jt=>{if(kt.streamReader=null,!this._transport.destroyed){if(kt.operatorList){kt.operatorList.lastChunk=!0;for(const Rt of kt.renderTasks)Rt.operatorListChanged();An(this,L0,Sx).call(this)}if(kt.displayReadyCapability)kt.displayReadyCapability.reject(jt);else if(kt.opListReadCapability)kt.opListReadCapability.reject(jt);else throw jt}})};Tt()}_abortOperatorList({intentState:g,reason:et,force:ot=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!ot){if(g.renderTasks.size>0)return;if(et instanceof RenderingCancelledException){let ct=RENDERING_CANCELLED_TIMEOUT;et.extraDelay>0&&et.extraDelay<1e3&&(ct+=et.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:et,force:!0})},ct);return}}if(g.streamReader.cancel(new AbortException(et.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ct,ut]of this._intentStates)if(ut===g){this._intentStates.delete(ct);break}this.cleanup()}}}get stats(){return this._stats}}_d=new WeakMap,L0=new WeakSet,Sx=function(){if(!Ht(this,_d)||this.destroyed)return!1;for(const{renderTasks:g,operatorList:et}of this._intentStates.values())if(g.size>0||!et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),xn(this,_d,!1),!0};var om,Fl,_f,j0,ST,F0,$0,G1,uw,wT,_3,kT,C3,B0,wx,W1,hw;const Ur=class Ur{constructor({name:g=null,port:et=null,verbosity:ot=getVerbosityLevel()}={}){vn(this,G1);vn(this,wT);vn(this,kT);vn(this,B0);vn(this,om,Promise.withResolvers());vn(this,Fl,null);vn(this,_f,null);vn(this,j0,null);if(this.name=g,this.destroyed=!1,this.verbosity=ot,et){if(Ht(Ur,$0).has(et))throw new Error("Cannot use more than one PDFWorker per port.");Ht(Ur,$0).set(et,this),An(this,wT,_3).call(this,et)}else An(this,kT,C3).call(this)}get promise(){return Ht(this,om).promise}get port(){return Ht(this,_f)}get messageHandler(){return Ht(this,Fl)}destroy(){var g,et;this.destroyed=!0,(g=Ht(this,j0))==null||g.terminate(),xn(this,j0,null),Ht(Ur,$0).delete(Ht(this,_f)),xn(this,_f,null),(et=Ht(this,Fl))==null||et.destroy(),xn(this,Fl,null)}static create(g){const et=Ht(this,$0).get(g==null?void 0:g.port);if(et){if(et._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return et}return new Ur(g)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Ht(this,W1,hw)?Ht(this,W1,hw):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};om=new WeakMap,Fl=new WeakMap,_f=new WeakMap,j0=new WeakMap,ST=new WeakMap,F0=new WeakMap,$0=new WeakMap,G1=new WeakSet,uw=function(){Ht(this,om).resolve(),Ht(this,Fl).send("configure",{verbosity:this.verbosity})},wT=new WeakSet,_3=function(g){xn(this,_f,g),xn(this,Fl,new MessageHandler("main","worker",g)),Ht(this,Fl).on("ready",()=>{}),An(this,G1,uw).call(this)},kT=new WeakSet,C3=function(){if(Ht(Ur,F0)||Ht(Ur,W1,hw)){An(this,B0,wx).call(this);return}let{workerSrc:g}=Ur;try{Ur._isSameOrigin(window.location,g)||(g=Ur._createCDNWrapper(new URL(g,window.location).href));const et=new Worker(g,{type:"module"}),ot=new MessageHandler("main","worker",et),ct=()=>{ut.abort(),ot.destroy(),et.terminate(),this.destroyed?Ht(this,om).reject(new Error("Worker was destroyed")):An(this,B0,wx).call(this)},ut=new AbortController;et.addEventListener("error",()=>{Ht(this,j0)||ct()},{signal:ut.signal}),ot.on("test",ft=>{if(ut.abort(),this.destroyed||!ft){ct();return}xn(this,Fl,ot),xn(this,_f,et),xn(this,j0,et),An(this,G1,uw).call(this)}),ot.on("ready",ft=>{if(ut.abort(),this.destroyed){ct();return}try{dt()}catch{An(this,B0,wx).call(this)}});const dt=()=>{const ft=new Uint8Array;ot.send("test",ft,[ft.buffer])};dt();return}catch{info("The worker has been disabled.")}An(this,B0,wx).call(this)},B0=new WeakSet,wx=function(){Ht(Ur,F0)||(warn("Setting up fake worker."),xn(Ur,F0,!0)),Ur._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){Ht(this,om).reject(new Error("Worker was destroyed"));return}const et=new LoopbackPort;xn(this,_f,et);const ot=`fake${cs(Ur,ST)._++}`,ct=new MessageHandler(ot+"_worker",ot,et);g.setup(ct,et),xn(this,Fl,new MessageHandler(ot,ot+"_worker",et)),An(this,G1,uw).call(this)}).catch(g=>{Ht(this,om).reject(new Error(`Setting up fake worker failed: "${g.message}".`))})},W1=new WeakSet,hw=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},vn(Ur,W1),vn(Ur,ST,0),vn(Ur,F0,!1),vn(Ur,$0,new WeakMap),isNodeJS&&(xn(Ur,F0,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Ur._isSameOrigin=(g,et)=>{const ot=URL.parse(g);if(!(ot!=null&&ot.origin)||ot.origin==="null")return!1;const ct=new URL(et,ot);return ot.origin===ct.origin},Ur._createCDNWrapper=g=>{const et=`await import("${g}");`;return URL.createObjectURL(new Blob([et],{type:"text/javascript"}))},Ur.fromPort=g=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ur.create(g)};let PDFWorker=Ur;var ep,mu,q1,K1,tp,V0,kx;class WorkerTransport{constructor(g,et,ot,ct,ut,dt){vn(this,V0);vn(this,ep,new Map);vn(this,mu,new Map);vn(this,q1,new Map);vn(this,K1,new Map);vn(this,tp,null);this.messageHandler=g,this.loadingTask=et,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ct.ownerDocument,styleElement:ct.styleElement}),this.loadingParams=ct.loadingParams,this._params=ct,this.canvasFactory=ut.canvasFactory,this.filterFactory=ut.filterFactory,this.cMapReaderFactory=ut.cMapReaderFactory,this.standardFontDataFactory=ut.standardFontDataFactory,this.wasmFactory=ut.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ot,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=dt,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(g,et=AnnotationMode.ENABLE,ot=null,ct=!1,ut=!1){let dt=RenderingIntentFlag.DISPLAY,ft=SerializableEmpty;switch(g){case"any":dt=RenderingIntentFlag.ANY;break;case"display":break;case"print":dt=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${g}`)}const St=dt&RenderingIntentFlag.PRINT&&ot instanceof PrintAnnotationStorage?ot:this.annotationStorage;switch(et){case AnnotationMode.DISABLE:dt+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:dt+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:dt+=RenderingIntentFlag.ANNOTATIONS_STORAGE,ft=St.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${et}`)}ct&&(dt+=RenderingIntentFlag.IS_EDITING),ut&&(dt+=RenderingIntentFlag.OPLIST);const{ids:kt,hash:Tt}=St.modifiedIds,jt=[dt,ft.hash,Tt];return{renderingIntent:dt,cacheKey:jt.join("_"),annotationStorageSerializable:ft,modifiedIds:kt}}destroy(){var ot;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(ot=Ht(this,tp))==null||ot.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ct of Ht(this,mu).values())g.push(ct._destroy());Ht(this,mu).clear(),Ht(this,q1).clear(),Ht(this,K1).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const et=this.messageHandler.sendWithPromise("Terminate",null);return g.push(et),Promise.all(g).then(()=>{var ct,ut;this.commonObjs.clear(),this.fontLoader.clear(),Ht(this,ep).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ct=this._networkStream)==null||ct.cancelAllRequests(new AbortException("Worker was terminated.")),(ut=this.messageHandler)==null||ut.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:et}=this;g.on("GetReader",(ot,ct)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ut=>{this._lastProgress={loaded:ut.loaded,total:ut.total}},ct.onPull=()=>{this._fullReader.read().then(function({value:ut,done:dt}){if(dt){ct.close();return}assert(ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(ut),1,[ut])}).catch(ut=>{ct.error(ut)})},ct.onCancel=ut=>{this._fullReader.cancel(ut),ct.ready.catch(dt=>{if(!this.destroyed)throw dt})}}),g.on("ReaderHeadersReady",async ot=>{var ft;await this._fullReader.headersReady;const{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}=this._fullReader;return(!ct||!ut)&&(this._lastProgress&&((ft=et.onProgress)==null||ft.call(et,this._lastProgress)),this._fullReader.onProgress=St=>{var kt;(kt=et.onProgress)==null||kt.call(et,{loaded:St.loaded,total:St.total})}),{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}}),g.on("GetRangeReader",(ot,ct)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ut=this._networkStream.getRangeReader(ot.begin,ot.end);if(!ut){ct.close();return}ct.onPull=()=>{ut.read().then(function({value:dt,done:ft}){if(ft){ct.close();return}assert(dt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(dt),1,[dt])}).catch(dt=>{ct.error(dt)})},ct.onCancel=dt=>{ut.cancel(dt),ct.ready.catch(ft=>{if(!this.destroyed)throw ft})}}),g.on("GetDoc",({pdfInfo:ot})=>{this._numPages=ot.numPages,this._htmlForXfa=ot.htmlForXfa,delete ot.htmlForXfa,et._capability.resolve(new PDFDocumentProxy(ot,this))}),g.on("DocException",ot=>{et._capability.reject(wrapReason(ot))}),g.on("PasswordRequest",ot=>{xn(this,tp,Promise.withResolvers());try{if(!et.onPassword)throw wrapReason(ot);const ct=ut=>{ut instanceof Error?Ht(this,tp).reject(ut):Ht(this,tp).resolve({password:ut})};et.onPassword(ct,ot.code)}catch(ct){Ht(this,tp).reject(ct)}return Ht(this,tp).promise}),g.on("DataLoaded",ot=>{var ct;(ct=et.onProgress)==null||ct.call(et,{loaded:ot.length,total:ot.length}),this.downloadInfoCapability.resolve(ot)}),g.on("StartRenderPage",ot=>{if(this.destroyed)return;Ht(this,mu).get(ot.pageIndex)._startRenderPage(ot.transparency,ot.cacheKey)}),g.on("commonobj",([ot,ct,ut])=>{var dt;if(this.destroyed||this.commonObjs.has(ot))return null;switch(ct){case"Font":if("error"in ut){const jt=ut.error;warn(`Error during font loading: ${jt}`),this.commonObjs.resolve(ot,jt);break}const ft=new FontInfo(ut),St=this._params.pdfBug&&((dt=globalThis.FontInspector)!=null&&dt.enabled)?(jt,Rt)=>globalThis.FontInspector.fontAdded(jt,Rt):null,kt=new FontFaceObject(ft,St,ut.extra,ut.charProcOperatorList);this.fontLoader.bind(kt).catch(()=>g.sendWithPromise("FontFallback",{id:ot})).finally(()=>{!kt.fontExtraProperties&&kt.data&&kt.clearData(),this.commonObjs.resolve(ot,kt)});break;case"CopyLocalImage":const{imageRef:Tt}=ut;assert(Tt,"The imageRef must be defined.");for(const jt of Ht(this,mu).values())for(const[,Rt]of jt.objs)if((Rt==null?void 0:Rt.ref)===Tt)return Rt.dataLen?(this.commonObjs.resolve(ot,structuredClone(Rt)),Rt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ot,ut);break;default:throw new Error(`Got unknown common object type ${ct}`)}return null}),g.on("obj",([ot,ct,ut,dt])=>{var St;if(this.destroyed)return;const ft=Ht(this,mu).get(ct);if(!ft.objs.has(ot)){if(ft._intentStates.size===0){(St=dt==null?void 0:dt.bitmap)==null||St.close();return}switch(ut){case"Image":case"Pattern":ft.objs.resolve(ot,dt);break;default:throw new Error(`Got unknown object type ${ut}`)}}}),g.on("DocProgress",ot=>{var ct;this.destroyed||(ct=et.onProgress)==null||ct.call(et,{loaded:ot.loaded,total:ot.total})}),g.on("FetchBinaryData",async ot=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ct=this[ot.type];if(!ct)throw new Error(`${ot.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ct.fetch(ot)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ot;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((ot=this._fullReader)==null?void 0:ot.filename)??null},et).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const et=g-1,ot=Ht(this,q1).get(et);if(ot)return ot;const ct=this.messageHandler.sendWithPromise("GetPage",{pageIndex:et}).then(ut=>{if(this.destroyed)throw new Error("Transport destroyed");ut.refStr&&Ht(this,K1).set(ut.refStr,g);const dt=new PDFPageProxy(et,ut,this,this._params.pdfBug);return Ht(this,mu).set(et,dt),dt});return Ht(this,q1).set(et,ct),ct}getPageIndex(g){return isRefProxy(g)?this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(g,et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:et})}getFieldObjects(){return An(this,V0,kx).call(this,"GetFieldObjects")}hasJSActions(){return An(this,V0,kx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(g,et){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:g,pageIndexesToSkip:et})}getDocJSActions(){return An(this,V0,kx).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(g){return An(this,V0,kx).call(this,"GetOptionalContentConfig").then(et=>new OptionalContentConfig(et,g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",et=Ht(this,ep).get(g);if(et)return et;const ot=this.messageHandler.sendWithPromise(g,null).then(ct=>{var ut,dt;return{info:ct[0],metadata:ct[1]?new Metadata(ct[1]):null,contentDispositionFilename:((ut=this._fullReader)==null?void 0:ut.filename)??null,contentLength:((dt=this._fullReader)==null?void 0:dt.contentLength)??null}});return Ht(this,ep).set(g,ot),ot}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const et of Ht(this,mu).values())if(!et.cleanup())throw new Error(`startCleanup: Page ${et.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),Ht(this,ep).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(g){if(!isRefProxy(g))return null;const et=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return Ht(this,K1).get(et)??null}}ep=new WeakMap,mu=new WeakMap,q1=new WeakMap,K1=new WeakMap,tp=new WeakMap,V0=new WeakSet,kx=function(g,et=null){const ot=Ht(this,ep).get(g);if(ot)return ot;const ct=this.messageHandler.sendWithPromise(g,et);return Ht(this,ep).set(g,ct),ct};var am;class RenderTask{constructor(g){vn(this,am,null);qn(this,"onContinue",null);qn(this,"onError",null);xn(this,am,g)}get promise(){return Ht(this,am).capability.promise}cancel(g=0){Ht(this,am).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=Ht(this,am).operatorList;if(!g)return!1;const{annotationCanvasMap:et}=Ht(this,am);return g.form||g.canvas&&(et==null?void 0:et.size)>0}}am=new WeakMap;var lm,z0;const Wm=class Wm{constructor({callback:g,params:et,objs:ot,commonObjs:ct,annotationCanvasMap:ut,operatorList:dt,pageIndex:ft,canvasFactory:St,filterFactory:kt,useRequestAnimationFrame:Tt=!1,pdfBug:jt=!1,pageColors:Rt=null,enableHWA:Ft=!1,operationsFilter:$t=null}){vn(this,lm,null);this.callback=g,this.params=et,this.objs=ot,this.commonObjs=ct,this.annotationCanvasMap=ut,this.operatorListIdx=null,this.operatorList=dt,this._pageIndex=ft,this.canvasFactory=St,this.filterFactory=kt,this._pdfBug=jt,this.pageColors=Rt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=et.canvas,this._canvasContext=et.canvas?null:et.canvasContext,this._enableHWA=Ft,this._dependencyTracker=et.dependencyTracker,this._operationsFilter=$t}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:et}){var St,kt;if(this.cancelled)return;if(this._canvas){if(Ht(Wm,z0).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ht(Wm,z0).add(this._canvas)}this._pdfBug&&((St=globalThis.StepperManager)!=null&&St.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:ot,transform:ct,background:ut,dependencyTracker:dt}=this.params,ft=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:et},this.annotationCanvasMap,this.pageColors,dt),this.gfx.beginDrawing({transform:ct,viewport:ot,transparency:g,background:ut}),this.operatorListIdx=0,this.graphicsReady=!0,(kt=this.graphicsReadyCallback)==null||kt.call(this)}cancel(g=null,et=0){var ot,ct,ut;this.running=!1,this.cancelled=!0,(ot=this.gfx)==null||ot.endDrawing(),Ht(this,lm)&&(window.cancelAnimationFrame(Ht(this,lm)),xn(this,lm,null)),Ht(Wm,z0).delete(this._canvas),g||(g=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,et)),this.callback(g),(ut=(ct=this.task).onError)==null||ut.call(ct,g)}operatorListChanged(){var g,et;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.gfx.dependencyTracker)==null||g.growOperationsCount(this.operatorList.fnArray.length),(et=this.stepper)==null||et.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?xn(this,lm,window.requestAnimationFrame(()=>{xn(this,lm,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ht(Wm,z0).delete(this._canvas),this.callback())))}};lm=new WeakMap,z0=new WeakMap,vn(Wm,z0,new WeakSet);let InternalRenderTask=Wm;const version="5.4.296",build="f56dc8601";var Ro,H0,Y1,ds,XE,X1,np,JE,cm,$l,QE,ZE,hC,eS,dC,tS,fC,rp,zm,TT,R3,gu,Rp;const uo=class uo{constructor({editor:g=null,uiManager:et=null}){vn(this,ZE);vn(this,eS);vn(this,tS);vn(this,rp);vn(this,TT);vn(this,gu);vn(this,Ro,null);vn(this,H0,null);vn(this,Y1,void 0);vn(this,ds,null);vn(this,XE,!1);vn(this,X1,!1);vn(this,np,null);vn(this,JE,void 0);vn(this,cm,null);vn(this,$l,null);var ot,ct;g?(xn(this,X1,!1),xn(this,np,g)):xn(this,X1,!0),xn(this,$l,(g==null?void 0:g._uiManager)||et),xn(this,JE,Ht(this,$l)._eventBus),xn(this,Y1,((ot=g==null?void 0:g.color)==null?void 0:ot.toUpperCase())||((ct=Ht(this,$l))==null?void 0:ct.highlightColors.values().next().value)||"#FFFF98"),Ht(uo,QE)||xn(uo,QE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],uo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],uo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],uo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],uo.prototype._moveToPrevious],[["Home","mac+Home"],uo.prototype._moveToBeginning],[["End","mac+End"],uo.prototype._moveToEnd]]))}renderButton(){const g=xn(this,Ro,document.createElement("button"));g.className="colorPicker",g.tabIndex="0",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),g.ariaHasPopup="true",Ht(this,np)&&(g.ariaControls=`${Ht(this,np).id}_colorpicker_dropdown`);const et=Ht(this,$l)._signal;g.addEventListener("click",An(this,rp,zm).bind(this),{signal:et}),g.addEventListener("keydown",An(this,tS,fC).bind(this),{signal:et});const ot=xn(this,H0,document.createElement("span"));return ot.className="swatch",ot.ariaHidden="true",ot.style.backgroundColor=Ht(this,Y1),g.append(ot),g}renderMainDropdown(){const g=xn(this,ds,An(this,ZE,hC).call(this));return g.ariaOrientation="horizontal",g.ariaLabelledBy="highlightColorPickerLabel",g}_colorSelectFromKeyboard(g){if(g.target===Ht(this,Ro)){An(this,rp,zm).call(this,g);return}const et=g.target.getAttribute("data-color");et&&An(this,eS,dC).call(this,et,g)}_moveToNext(g){var et,ot;if(!Ht(this,gu,Rp)){An(this,rp,zm).call(this,g);return}if(g.target===Ht(this,Ro)){(et=Ht(this,ds).firstChild)==null||et.focus();return}(ot=g.target.nextSibling)==null||ot.focus()}_moveToPrevious(g){var et,ot;if(g.target===((et=Ht(this,ds))==null?void 0:et.firstChild)||g.target===Ht(this,Ro)){Ht(this,gu,Rp)&&this._hideDropdownFromKeyboard();return}Ht(this,gu,Rp)||An(this,rp,zm).call(this,g),(ot=g.target.previousSibling)==null||ot.focus()}_moveToBeginning(g){var et;if(!Ht(this,gu,Rp)){An(this,rp,zm).call(this,g);return}(et=Ht(this,ds).firstChild)==null||et.focus()}_moveToEnd(g){var et;if(!Ht(this,gu,Rp)){An(this,rp,zm).call(this,g);return}(et=Ht(this,ds).lastChild)==null||et.focus()}hideDropdown(){var g,et;(g=Ht(this,ds))==null||g.classList.add("hidden"),Ht(this,Ro).ariaExpanded="false",(et=Ht(this,cm))==null||et.abort(),xn(this,cm,null)}_hideDropdownFromKeyboard(){var g;if(!Ht(this,X1)){if(!Ht(this,gu,Rp)){(g=Ht(this,np))==null||g.unselect();return}this.hideDropdown(),Ht(this,Ro).focus({preventScroll:!0,focusVisible:Ht(this,XE)})}}updateColor(g){if(Ht(this,H0)&&(Ht(this,H0).style.backgroundColor=g),!Ht(this,ds))return;const et=Ht(this,$l).highlightColors.values();for(const ot of Ht(this,ds).children)ot.ariaSelected=et.next().value===g.toUpperCase()}destroy(){var g,et;(g=Ht(this,Ro))==null||g.remove(),xn(this,Ro,null),xn(this,H0,null),(et=Ht(this,ds))==null||et.remove(),xn(this,ds,null)}};Ro=new WeakMap,H0=new WeakMap,Y1=new WeakMap,ds=new WeakMap,XE=new WeakMap,X1=new WeakMap,np=new WeakMap,JE=new WeakMap,cm=new WeakMap,$l=new WeakMap,QE=new WeakMap,ZE=new WeakSet,hC=function(){const g=document.createElement("div"),et=Ht(this,$l)._signal;g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.className="dropdown",g.role="listbox",g.ariaMultiSelectable="false",g.ariaOrientation="vertical",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Ht(this,np)&&(g.id=`${Ht(this,np).id}_colorpicker_dropdown`);for(const[ot,ct]of Ht(this,$l).highlightColors){const ut=document.createElement("button");ut.tabIndex="0",ut.role="option",ut.setAttribute("data-color",ct),ut.title=ot,ut.setAttribute("data-l10n-id",Ht(uo,QE)[ot]);const dt=document.createElement("span");ut.append(dt),dt.className="swatch",dt.style.backgroundColor=ct,ut.ariaSelected=ct===Ht(this,Y1),ut.addEventListener("click",An(this,eS,dC).bind(this,ct),{signal:et}),g.append(ut)}return g.addEventListener("keydown",An(this,tS,fC).bind(this),{signal:et}),g},eS=new WeakSet,dC=function(g,et){et.stopPropagation(),Ht(this,JE).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:g}),this.updateColor(g)},tS=new WeakSet,fC=function(g){uo._keyboardManager.exec(this,g)},rp=new WeakSet,zm=function(g){if(Ht(this,gu,Rp)){this.hideDropdown();return}if(xn(this,XE,g.detail===0),Ht(this,cm)||(xn(this,cm,new AbortController),window.addEventListener("pointerdown",An(this,TT,R3).bind(this),{signal:Ht(this,$l).combinedSignal(Ht(this,cm))})),Ht(this,Ro).ariaExpanded="true",Ht(this,ds)){Ht(this,ds).classList.remove("hidden");return}const et=xn(this,ds,An(this,ZE,hC).call(this));Ht(this,Ro).append(et)},TT=new WeakSet,R3=function(g){var et;(et=Ht(this,ds))!=null&&et.contains(g.target)||this.hideDropdown()},gu=new WeakSet,Rp=function(){return Ht(this,ds)&&!Ht(this,ds).classList.contains("hidden")},vn(uo,QE,null);let ColorPicker=uo;var yu,nS,J1,rS;const qm=class qm{constructor(g){vn(this,yu,null);vn(this,nS,null);vn(this,J1,null);xn(this,nS,g),xn(this,J1,g._uiManager),Ht(qm,rS)||xn(qm,rS,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Ht(this,yu))return Ht(this,yu);const{editorType:g,colorType:et,colorValue:ot}=Ht(this,nS),ct=xn(this,yu,document.createElement("input"));return ct.type="color",ct.value=ot||"#000000",ct.className="basicColorPicker",ct.tabIndex=0,ct.setAttribute("data-l10n-id",Ht(qm,rS)[g]),ct.addEventListener("input",()=>{Ht(this,J1).updateParams(et,ct.value)},{signal:Ht(this,J1)._signal}),ct}update(g){Ht(this,yu)&&(Ht(this,yu).value=g)}destroy(){var g;(g=Ht(this,yu))==null||g.remove(),xn(this,yu,null)}hideDropdown(){}};yu=new WeakMap,nS=new WeakMap,J1=new WeakMap,rS=new WeakMap,vn(qm,rS,null);let BasicColorPicker=qm;function makeColorComp(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function scaleAndClamp(it){return Math.max(0,Math.min(255,255*it))}class ColorConverters{static CMYK_G([g,et,ot,ct]){return["G",1-Math.min(1,.3*g+.59*ot+.11*et+ct)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=scaleAndClamp(g),[g,g,g]}static G_HTML([g]){const et=makeColorComp(g);return`#${et}${et}${et}`}static RGB_G([g,et,ot]){return["G",.3*g+.59*et+.11*ot]}static RGB_rgb(g){return g.map(scaleAndClamp)}static RGB_HTML(g){return`#${g.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,et,ot,ct]){return["RGB",1-Math.min(1,g+ct),1-Math.min(1,ot+ct),1-Math.min(1,et+ct)]}static CMYK_rgb([g,et,ot,ct]){return[scaleAndClamp(1-Math.min(1,g+ct)),scaleAndClamp(1-Math.min(1,ot+ct)),scaleAndClamp(1-Math.min(1,et+ct))]}static CMYK_HTML(g){const et=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(et)}static RGB_CMYK([g,et,ot]){const ct=1-g,ut=1-et,dt=1-ot,ft=Math.min(ct,ut,dt);return["CMYK",ct,ut,dt,ft]}}class BaseSVGFactory{create(g,et,ot=!1){if(g<=0||et<=0)throw new Error("Invalid SVG dimensions");const ct=this._createSVG("svg:svg");return ct.setAttribute("version","1.1"),ot||(ct.setAttribute("width",`${g}px`),ct.setAttribute("height",`${et}px`)),ct.setAttribute("preserveAspectRatio","none"),ct.setAttribute("viewBox",`0 0 ${g} ${et}`),ct}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(g){return document.createElementNS(SVG_NS,g)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(g){switch(g.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(g);case AnnotationType.TEXT:return new TextAnnotationElement(g);case AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(g);case"Btn":return g.data.radioButton?new RadioButtonWidgetAnnotationElement(g):g.data.checkBox?new CheckboxWidgetAnnotationElement(g):new PushButtonWidgetAnnotationElement(g);case"Ch":return new ChoiceWidgetAnnotationElement(g);case"Sig":return new SignatureWidgetAnnotationElement(g)}return new WidgetAnnotationElement(g);case AnnotationType.POPUP:return new PopupAnnotationElement(g);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(g);case AnnotationType.LINE:return new LineAnnotationElement(g);case AnnotationType.SQUARE:return new SquareAnnotationElement(g);case AnnotationType.CIRCLE:return new CircleAnnotationElement(g);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(g);case AnnotationType.CARET:return new CaretAnnotationElement(g);case AnnotationType.INK:return new InkAnnotationElement(g);case AnnotationType.POLYGON:return new PolygonAnnotationElement(g);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(g);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(g);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(g);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(g);case AnnotationType.STAMP:return new StampAnnotationElement(g);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(g);default:return new AnnotationElement(g)}}}var U0,Q1,ba,iS,pC;const qC=class qC{constructor(g,{isRenderable:et=!1,ignoreBorder:ot=!1,createQuadrilaterals:ct=!1}={}){vn(this,iS);vn(this,U0,null);vn(this,Q1,!1);vn(this,ba,null);this.isRenderable=et,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableComment=g.enableComment,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,et&&(this.container=this._createContainer(ot)),ct&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:g,richText:et}){return!!(g!=null&&g.str||et!=null&&et.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qC._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var ot;const{data:g}=this,et=(ot=this.annotationStorage)==null?void 0:ot.getEditor(g.id);return et?et.getData():g}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var ft;const g=(ft=this.annotationStorage)==null?void 0:ft.getEditor(this.data.id);if(g)return g.commentButtonPositionInPage;const{quadPoints:et,inkLists:ot,rect:ct}=this.data;let ut=-1/0,dt=-1/0;if((et==null?void 0:et.length)>=8){for(let St=0;St<et.length;St+=8)et[St+1]>dt?(dt=et[St+1],ut=et[St+2]):et[St+1]===dt&&(ut=Math.max(ut,et[St+2]));return[ut,dt]}if((ot==null?void 0:ot.length)>=1){for(const St of ot)for(let kt=0,Tt=St.length;kt<Tt;kt+=2)St[kt+1]>dt?(dt=St[kt+1],ut=St[kt]):St[kt+1]===dt&&(ut=Math.max(ut,St[kt]));if(ut!==1/0)return[ut,dt]}return ct?[ct[2],ct[3]]:null}_normalizePoint(g){const{page:{view:et},viewport:{rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}}=this.parent;return g[1]=et[3]-g[1]+et[1],g[0]=100*(g[0]-ut)/ot,g[1]=100*(g[1]-dt)/ct,g}get commentText(){var et,ot,ct;const{data:g}=this;return((ot=(et=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${g.id}`))==null?void 0:et.popup)==null?void 0:ot.contents)||((ct=g.contentsObj)==null?void 0:ct.str)||""}set commentText(g){const{data:et}=this,ot={deleted:!g,contents:g||""};this.annotationStorage.updateEditor(et.id,{popup:ot})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${et.id}`,{id:et.id,annotationType:et.annotationType,pageIndex:this.parent.page._pageIndex,popup:ot,popupRef:et.popupRef,modificationDate:new Date}),g||this.removePopup()}removePopup(){var g,et;(et=((g=Ht(this,ba))==null?void 0:g.popup)||this.popup)==null||et.remove(),xn(this,ba,this.popup=null)}updateEdited(g){var ut;if(!this.container)return;g.rect&&(Ht(this,U0)||xn(this,U0,{rect:this.data.rect.slice(0)}));const{rect:et,popup:ot}=g;et&&An(this,iS,pC).call(this,et);let ct=((ut=Ht(this,ba))==null?void 0:ut.popup)||this.popup;!ct&&(ot!=null&&ot.text)&&(this._createPopup(ot),ct=Ht(this,ba).popup),ct&&(ct.updateEdited(g),ot!=null&&ot.deleted&&(ct.remove(),xn(this,ba,null),this.popup=null))}resetEdited(){var g;Ht(this,U0)&&(An(this,iS,pC).call(this,Ht(this,U0).rect),(g=Ht(this,ba))==null||g.popup.resetEdited(),xn(this,U0,null))}_createContainer(g){const{data:et,parent:{page:ot,viewport:ct}}=this,ut=document.createElement("section");ut.setAttribute("data-annotation-id",et.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ut.tabIndex=0);const{style:dt}=ut;if(dt.zIndex=this.parent.zIndex,this.parent.zIndex+=2,et.alternativeText&&(ut.title=et.alternativeText),et.noRotate&&ut.classList.add("norotate"),!et.rect||this instanceof PopupAnnotationElement){const{rotation:zt}=et;return!et.hasOwnCanvas&&zt!==0&&this.setRotation(zt,ut),ut}const{width:ft,height:St}=this;if(!g&&et.borderStyle.width>0){dt.borderWidth=`${et.borderStyle.width}px`;const zt=et.borderStyle.horizontalCornerRadius,Kt=et.borderStyle.verticalCornerRadius;if(zt>0||Kt>0){const Ut=`calc(${zt}px * var(--total-scale-factor)) / calc(${Kt}px * var(--total-scale-factor))`;dt.borderRadius=Ut}else if(this instanceof RadioButtonWidgetAnnotationElement){const Ut=`calc(${ft}px * var(--total-scale-factor)) / calc(${St}px * var(--total-scale-factor))`;dt.borderRadius=Ut}switch(et.borderStyle.style){case AnnotationBorderStyleType.SOLID:dt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:dt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:dt.borderBottomStyle="solid";break}const Bt=et.borderColor||null;Bt?(xn(this,Q1,!0),dt.borderColor=Util$1.makeHexColor(Bt[0]|0,Bt[1]|0,Bt[2]|0)):dt.borderWidth=0}const kt=Util$1.normalizeRect([et.rect[0],ot.view[3]-et.rect[1]+ot.view[1],et.rect[2],ot.view[3]-et.rect[3]+ot.view[1]]),{pageWidth:Tt,pageHeight:jt,pageX:Rt,pageY:Ft}=ct.rawDims;dt.left=`${100*(kt[0]-Rt)/Tt}%`,dt.top=`${100*(kt[1]-Ft)/jt}%`;const{rotation:$t}=et;return et.hasOwnCanvas||$t===0?(dt.width=`${100*ft/Tt}%`,dt.height=`${100*St/jt}%`):this.setRotation($t,ut),ut}setRotation(g,et=this.container){if(!this.data.rect)return;const{pageWidth:ot,pageHeight:ct}=this.parent.viewport.rawDims;let{width:ut,height:dt}=this;g%180!==0&&([ut,dt]=[dt,ut]),et.style.width=`${100*ut/ot}%`,et.style.height=`${100*dt/ct}%`,et.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(et,ot,ct)=>{const ut=ct.detail[et],dt=ut[0],ft=ut.slice(1);ct.target.style[ot]=ColorConverters[`${dt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[ot]:ColorConverters[`${dt}_rgb`](ft)})};return shadow(this,"_commonActions",{display:et=>{const{display:ot}=et.detail,ct=ot%2===1;this.container.style.visibility=ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ct,noPrint:ot===1||ot===2})},print:et=>{this.annotationStorage.setValue(this.data.id,{noPrint:!et.detail.print})},hidden:et=>{const{hidden:ot}=et.detail;this.container.style.visibility=ot?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ot,noView:ot})},focus:et=>{setTimeout(()=>et.target.focus({preventScroll:!1}),0)},userName:et=>{et.target.title=et.detail.userName},readonly:et=>{et.target.disabled=et.detail.readonly},required:et=>{this._setRequired(et.target,et.detail.required)},bgColor:et=>{g("bgColor","backgroundColor",et)},fillColor:et=>{g("fillColor","backgroundColor",et)},fgColor:et=>{g("fgColor","color",et)},textColor:et=>{g("textColor","color",et)},borderColor:et=>{g("borderColor","borderColor",et)},strokeColor:et=>{g("strokeColor","borderColor",et)},rotation:et=>{const ot=et.detail.rotation;this.setRotation(ot),this.annotationStorage.setValue(this.data.id,{rotation:ot})}})}_dispatchEventFromSandbox(g,et){const ot=this._commonActions;for(const ct of Object.keys(et.detail)){const ut=g[ct]||ot[ct];ut==null||ut(et)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const et=this.annotationStorage.getRawValue(this.data.id);if(!et)return;const ot=this._commonActions;for(const[ct,ut]of Object.entries(et)){const dt=ot[ct];if(dt){const ft={detail:{[ct]:ut},target:g};dt(ft),delete et[ct]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[et,ot,ct,ut]=this.data.rect.map(zt=>Math.fround(zt));if(g.length===8){const[zt,Kt,Bt,Ut]=g.subarray(2,6);if(ct===zt&&ut===Kt&&et===Bt&&ot===Ut)return}const{style:dt}=this.container;let ft;if(Ht(this,Q1)){const{borderColor:zt,borderWidth:Kt}=dt;dt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${zt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const St=ct-et,kt=ut-ot,{svgFactory:Tt}=this,jt=Tt.createElement("svg");jt.classList.add("quadrilateralsContainer"),jt.setAttribute("width",0),jt.setAttribute("height",0),jt.role="none";const Rt=Tt.createElement("defs");jt.append(Rt);const Ft=Tt.createElement("clipPath"),$t=`clippath_${this.data.id}`;Ft.setAttribute("id",$t),Ft.setAttribute("clipPathUnits","objectBoundingBox"),Rt.append(Ft);for(let zt=2,Kt=g.length;zt<Kt;zt+=8){const Bt=g[zt],Ut=g[zt+1],Jt=g[zt+2],en=g[zt+3],tn=Tt.createElement("rect"),nn=(Jt-et)/St,rn=(ut-Ut)/kt,on=(Bt-Jt)/St,dn=(Ut-en)/kt;tn.setAttribute("x",nn),tn.setAttribute("y",rn),tn.setAttribute("width",on),tn.setAttribute("height",dn),Ft.append(tn),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${nn}" y="${rn}" width="${on}" height="${dn}"/>`)}Ht(this,Q1)&&(ft.push("</g></svg>')"),dt.backgroundImage=ft.join("")),this.container.append(jt),this.container.style.clipPath=`url(#${$t})`}_createPopup(g=null){const{data:et}=this;let ot,ct;g?(ot={str:g.text},ct=g.date):(ot=et.contentsObj,ct=et.modificationDate);const ut=xn(this,ba,new PopupAnnotationElement({data:{color:et.color,titleObj:et.titleObj,modificationDate:ct,contentsObj:ot,richText:et.richText,parentRect:et.rect,borderStyle:0,id:`popup_${et.id}`,rotation:et.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ut.render())}get hasPopupElement(){return!!(Ht(this,ba)||this.popup||this.data.popupRef)}get extraPopupElement(){return Ht(this,ba)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,et=null){const ot=[];if(this._fieldObjects){const ct=this._fieldObjects[g];if(ct)for(const{page:ut,id:dt,exportValues:ft}of ct){if(ut===-1||dt===et)continue;const St=typeof ft=="string"?ft:null,kt=document.querySelector(`[data-element-id="${dt}"]`);if(kt&&!GetElementsByNameSet.has(kt)){warn(`_getElementsByName - element not allowed: ${dt}`);continue}ot.push({id:dt,exportValue:St,domElement:kt})}return ot}for(const ct of document.getElementsByName(g)){const{exportValue:ut}=ct,dt=ct.getAttribute("data-element-id");dt!==et&&GetElementsByNameSet.has(ct)&&ot.push({id:dt,exportValue:ut,domElement:ct})}return ot}show(){var g;this.container&&(this.container.hidden=!1),(g=this.popup)==null||g.maybeShow()}hide(){var g;this.container&&(this.container.hidden=!0),(g=this.popup)==null||g.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const et of g)et.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:g,data:{id:et}}=this;this.container.addEventListener("dblclick",()=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("switchannotationeditormode",{source:this,mode:g,editId:et,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};U0=new WeakMap,Q1=new WeakMap,ba=new WeakMap,iS=new WeakSet,pC=function(g){const{container:{style:et},data:{rect:ot,rotation:ct},parent:{viewport:{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}}}=this;ot==null||ot.splice(0,4,...g),et.left=`${100*(g[0]-ft)/ut}%`,et.top=`${100*(dt-g[3]+St)/dt}%`,ct===0?(et.width=`${100*(g[2]-g[0])/ut}%`,et.height=`${100*(g[3]-g[1])/dt}%`):this.setRotation(ct)};let AnnotationElement=qC;class EditorAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.editor=g.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:g}=this;g.hasComment&&(this._createPopup(g.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(g){this.editor.comment=g,g||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var sp,Hm,_T,P3,CT,N3;class LinkAnnotationElement extends AnnotationElement{constructor(et,ot=null){super(et,{isRenderable:!0,ignoreBorder:!!(ot!=null&&ot.ignoreBorder),createQuadrilaterals:!0});vn(this,sp);vn(this,_T);vn(this,CT);this.isTooltipOnly=et.data.isTooltipOnly}render(){const{data:et,linkService:ot}=this,ct=document.createElement("a");ct.setAttribute("data-element-id",et.id);let ut=!1;return et.url?(ot.addLinkAttributes(ct,et.url,et.newWindow),ut=!0):et.action?(this._bindNamedAction(ct,et.action,et.overlaidText),ut=!0):et.attachment?(An(this,_T,P3).call(this,ct,et.attachment,et.overlaidText,et.attachmentDest),ut=!0):et.setOCGState?(An(this,CT,N3).call(this,ct,et.setOCGState,et.overlaidText),ut=!0):et.dest?(this._bindLink(ct,et.dest,et.overlaidText),ut=!0):(et.actions&&(et.actions.Action||et.actions["Mouse Up"]||et.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ct,et),ut=!0),et.resetForm?(this._bindResetFormAction(ct,et.resetForm),ut=!0):this.isTooltipOnly&&!ut&&(this._bindLink(ct,""),ut=!0)),this.container.classList.add("linkAnnotation"),ut&&this.container.append(ct),this.container}_bindLink(et,ot,ct=""){et.href=this.linkService.getDestinationHash(ot),et.onclick=()=>(ot&&this.linkService.goToDestination(ot),!1),(ot||ot==="")&&An(this,sp,Hm).call(this),ct&&(et.title=ct)}_bindNamedAction(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeNamedAction(ot),!1),ct&&(et.title=ct),An(this,sp,Hm).call(this)}_bindJSAction(et,ot){et.href=this.linkService.getAnchorUrl("");const ct=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ut of Object.keys(ot.actions)){const dt=ct.get(ut);dt&&(et[dt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ot.id,name:ut}}),!1})}ot.overlaidText&&(et.title=ot.overlaidText),et.onclick||(et.onclick=()=>!1),An(this,sp,Hm).call(this)}_bindResetFormAction(et,ot){const ct=et.onclick;if(ct||(et.href=this.linkService.getAnchorUrl("")),An(this,sp,Hm).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ct||(et.onclick=()=>!1);return}et.onclick=()=>{var jt;ct==null||ct();const{fields:ut,refs:dt,include:ft}=ot,St=[];if(ut.length!==0||dt.length!==0){const Rt=new Set(dt);for(const Ft of ut){const $t=this._fieldObjects[Ft]||[];for(const{id:zt}of $t)Rt.add(zt)}for(const Ft of Object.values(this._fieldObjects))for(const $t of Ft)Rt.has($t.id)===ft&&St.push($t)}else for(const Rt of Object.values(this._fieldObjects))St.push(...Rt);const kt=this.annotationStorage,Tt=[];for(const Rt of St){const{id:Ft}=Rt;switch(Tt.push(Ft),Rt.type){case"text":{const zt=Rt.defaultValue||"";kt.setValue(Ft,{value:zt});break}case"checkbox":case"radiobutton":{const zt=Rt.defaultValue===Rt.exportValues;kt.setValue(Ft,{value:zt});break}case"combobox":case"listbox":{const zt=Rt.defaultValue||"";kt.setValue(Ft,{value:zt});break}default:continue}const $t=document.querySelector(`[data-element-id="${Ft}"]`);if($t){if(!GetElementsByNameSet.has($t)){warn(`_bindResetFormAction - element not allowed: ${Ft}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((jt=this.linkService.eventBus)==null||jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}sp=new WeakSet,Hm=function(){this.container.setAttribute("data-internal-link","")},_T=new WeakSet,P3=function(et,ot,ct="",ut=null){et.href=this.linkService.getAnchorUrl(""),ot.description?et.title=ot.description:ct&&(et.title=ct),et.onclick=()=>{var dt;return(dt=this.downloadManager)==null||dt.openOrDownloadData(ot.content,ot.filename,ut),!1},An(this,sp,Hm).call(this)},CT=new WeakSet,N3=function(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeSetOCGState(ot),!1),ct&&(et.title=ct),An(this,sp,Hm).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),g.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(g){var et;this.data.hasOwnCanvas&&(((et=g.previousSibling)==null?void 0:et.nodeName)==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){return util_FeatureTest.platform.isMac?g.metaKey:g.ctrlKey}_setEventListener(g,et,ot,ct,ut){ot.includes("mouse")?g.addEventListener(ot,dt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt),shift:dt.shiftKey,modifier:this._getKeyModifier(dt)}})}):g.addEventListener(ot,dt=>{var ft;if(ot==="blur"){if(!et.focused||!dt.relatedTarget)return;et.focused=!1}else if(ot==="focus"){if(et.focused)return;et.focused=!0}ut&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt)}}))})}_setEventListeners(g,et,ot,ct){var ut,dt,ft;for(const[St,kt]of ot)(kt==="Action"||(ut=this.data.actions)!=null&&ut[kt])&&((kt==="Focus"||kt==="Blur")&&(et||(et={focused:!1})),this._setEventListener(g,et,St,kt,ct),kt==="Focus"&&!((dt=this.data.actions)!=null&&dt.Blur)?this._setEventListener(g,et,"blur","Blur",null):kt==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(g,et,"focus","Focus",null))}_setBackgroundColor(g){const et=this.data.backgroundColor||null;g.style.backgroundColor=et===null?"transparent":Util$1.makeHexColor(et[0],et[1],et[2])}_setTextStyle(g){const et=["left","center","right"],{fontColor:ot}=this.data.defaultAppearanceData,ct=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ut=g.style;let dt;const ft=2,St=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Tt=Math.round(kt/(LINE_FACTOR*ct))||1,jt=kt/Tt;dt=Math.min(ct,St(jt/LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);dt=Math.min(ct,St(kt/LINE_FACTOR))}ut.fontSize=`calc(${dt}px * var(--total-scale-factor))`,ut.color=Util$1.makeHexColor(ot[0],ot[1],ot[2]),this.data.textAlignment!==null&&(ut.textAlign=et[this.data.textAlignment])}_setRequired(g,et){et?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",et)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){const et=g.renderForms||g.data.hasOwnCanvas||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:et})}setPropertyOnSiblings(g,et,ot,ct){const ut=this.annotationStorage;for(const dt of this._getElementsByName(g.name,g.id))dt.domElement&&(dt.domElement[et]=ot),ut.setValue(dt.id,{[ct]:ot})}render(){var ct,ut;const g=this.annotationStorage,et=this.data.id;this.container.classList.add("textWidgetAnnotation");let ot=null;if(this.renderForms){const dt=g.getValue(et,{value:this.data.fieldValue});let ft=dt.value||"";const St=g.getValue(et,{charLimit:this.data.maxLen}).charLimit;St&&ft.length>St&&(ft=ft.slice(0,St));let kt=dt.formattedValue||((ct=this.data.textContent)==null?void 0:ct.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:ft,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ot=document.createElement("textarea"),ot.textContent=kt??ft,this.data.doNotScroll&&(ot.style.overflowY="hidden")):(ot=document.createElement("input"),ot.type=this.data.password?"password":"text",ot.setAttribute("value",kt??ft),this.data.doNotScroll&&(ot.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ot.hidden=!0),GetElementsByNameSet.add(ot),ot.setAttribute("data-element-id",et),ot.disabled=this.data.readOnly,ot.name=this.data.fieldName,ot.tabIndex=0;const{datetimeFormat:jt,datetimeType:Rt,timeStep:Ft}=this.data,$t=!!Rt&&this.enableScripting;jt&&(ot.title=jt),this._setRequired(ot,this.data.required),St&&(ot.maxLength=St),ot.addEventListener("input",Kt=>{g.setValue(et,{value:Kt.target.value}),this.setPropertyOnSiblings(ot,"value",Kt.target.value,"value"),Tt.formattedValue=null}),ot.addEventListener("resetform",Kt=>{const Bt=this.data.defaultFieldValue??"";ot.value=Tt.userValue=Bt,Tt.formattedValue=null});let zt=Kt=>{const{formattedValue:Bt}=Tt;Bt!=null&&(Kt.target.value=Bt),Kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ot.addEventListener("focus",Bt=>{var Jt;if(Tt.focused)return;const{target:Ut}=Bt;if($t&&(Ut.type=Rt,Ft&&(Ut.step=Ft)),Tt.userValue){const en=Tt.userValue;if($t)if(Rt==="time"){const tn=new Date(en),nn=[tn.getHours(),tn.getMinutes(),tn.getSeconds()];Ut.value=nn.map(rn=>rn.toString().padStart(2,"0")).join(":")}else Ut.value=new Date(en-TIMEZONE_OFFSET).toISOString().split(Rt==="date"?"T":".",1)[0];else Ut.value=en}Tt.lastCommittedValue=Ut.value,Tt.commitKey=1,(Jt=this.data.actions)!=null&&Jt.Focus||(Tt.focused=!0)}),ot.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const Ut={value(Jt){Tt.userValue=Jt.detail.value??"",$t||g.setValue(et,{value:Tt.userValue.toString()}),Jt.target.value=Tt.userValue},formattedValue(Jt){const{formattedValue:en}=Jt.detail;Tt.formattedValue=en,en!=null&&Jt.target!==document.activeElement&&(Jt.target.value=en);const tn={formattedValue:en};$t&&(tn.value=en),g.setValue(et,tn)},selRange(Jt){Jt.target.setSelectionRange(...Jt.detail.selRange)},charLimit:Jt=>{var rn;const{charLimit:en}=Jt.detail,{target:tn}=Jt;if(en===0){tn.removeAttribute("maxLength");return}tn.setAttribute("maxLength",en);let nn=Tt.userValue;!nn||nn.length<=en||(nn=nn.slice(0,en),tn.value=Tt.userValue=nn,g.setValue(et,{value:nn}),(rn=this.linkService.eventBus)==null||rn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:nn,willCommit:!0,commitKey:1,selStart:tn.selectionStart,selEnd:tn.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,Bt)}),ot.addEventListener("keydown",Bt=>{var en;Tt.commitKey=1;let Ut=-1;if(Bt.key==="Escape"?Ut=0:Bt.key==="Enter"&&!this.data.multiLine?Ut=2:Bt.key==="Tab"&&(Tt.commitKey=3),Ut===-1)return;const{value:Jt}=Bt.target;Tt.lastCommittedValue!==Jt&&(Tt.lastCommittedValue=Jt,Tt.userValue=Jt,(en=this.linkService.eventBus)==null||en.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Jt,willCommit:!0,commitKey:Ut,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Kt=zt;zt=null,ot.addEventListener("blur",Bt=>{var en,tn;if(!Tt.focused||!Bt.relatedTarget)return;(en=this.data.actions)!=null&&en.Blur||(Tt.focused=!1);const{target:Ut}=Bt;let{value:Jt}=Ut;if($t){if(Jt&&Rt==="time"){const nn=Jt.split(":").map(rn=>parseInt(rn,10));Jt=new Date(2e3,0,1,nn[0],nn[1],nn[2]||0).valueOf(),Ut.step=""}else Jt.includes("T")||(Jt=`${Jt}T00:00`),Jt=new Date(Jt).valueOf();Ut.type="text"}Tt.userValue=Jt,Tt.lastCommittedValue!==Jt&&((tn=this.linkService.eventBus)==null||tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Jt,willCommit:!0,commitKey:Tt.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Kt(Bt)}),(ut=this.data.actions)!=null&&ut.Keystroke&&ot.addEventListener("beforeinput",Bt=>{var dn;Tt.lastCommittedValue=null;const{data:Ut,target:Jt}=Bt,{value:en,selectionStart:tn,selectionEnd:nn}=Jt;let rn=tn,on=nn;switch(Bt.inputType){case"deleteWordBackward":{const cn=en.substring(0,tn).match(/\w*[^\w]*$/);cn&&(rn-=cn[0].length);break}case"deleteWordForward":{const cn=en.substring(tn).match(/^[^\w]*\w*/);cn&&(on+=cn[0].length);break}case"deleteContentBackward":tn===nn&&(rn-=1);break;case"deleteContentForward":tn===nn&&(on+=1);break}Bt.preventDefault(),(dn=this.linkService.eventBus)==null||dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:en,change:Ut||"",willCommit:!1,selStart:rn,selEnd:on}})}),this._setEventListeners(ot,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(zt&&ot.addEventListener("blur",zt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/St;ot.classList.add("comb"),ot.style.letterSpacing=`calc(${Bt}px * var(--total-scale-factor) - 1ch)`}}else ot=document.createElement("div"),ot.textContent=this.data.fieldValue,ot.style.verticalAlign="middle",ot.style.display="table-cell",this.data.hasOwnCanvas&&(ot.hidden=!0);return this._setTextStyle(ot),this._setBackgroundColor(ot),this._setDefaultPropertiesFromJS(ot),this.container.append(ot),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.exportValue===et.fieldValue}).value;typeof ct=="string"&&(ct=ct!=="Off",g.setValue(ot,{value:ct})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ut=document.createElement("input");return GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="checkbox",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.setAttribute("exportValue",et.exportValue),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot)){const Tt=St&&kt.exportValue===et.exportValue;kt.domElement&&(kt.domElement.checked=Tt),g.setValue(kt.id,{value:Tt})}g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue||"Off";dt.target.checked=ft===et.exportValue}),this.enableScripting&&this.hasJSActions&&(ut.addEventListener("updatefromsandbox",dt=>{const ft={value(St){St.target.checked=St.detail.value!=="Off",g.setValue(ot,{value:St.target.checked})}};this._dispatchEventFromSandbox(ft,dt)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.fieldValue===et.buttonValue}).value;if(typeof ct=="string"&&(ct=ct!==et.buttonValue,g.setValue(ot,{value:ct})),ct)for(const dt of this._getElementsByName(et.fieldName,ot))g.setValue(dt.id,{value:!1});const ut=document.createElement("input");if(GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="radio",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot))g.setValue(kt.id,{value:!1});g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue;dt.target.checked=ft!=null&&ft===et.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=et.buttonValue;ut.addEventListener("updatefromsandbox",ft=>{const St={value:kt=>{const Tt=dt===kt.detail.value;for(const jt of this._getElementsByName(kt.target.name)){const Rt=Tt&&jt.id===ot;jt.domElement&&(jt.domElement.checked=Rt),g.setValue(jt.id,{value:Rt})}}};this._dispatchEventFromSandbox(St,ft)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton");const et=g.lastChild;return this.enableScripting&&this.hasJSActions&&et&&(this._setDefaultPropertiesFromJS(et),et.addEventListener("updatefromsandbox",ot=>{this._dispatchEventFromSandbox({},ot)})),g}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,et=this.data.id,ot=g.getValue(et,{value:this.data.fieldValue}),ct=document.createElement("select");GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",et),ct.disabled=this.data.readOnly,this._setRequired(ct,this.data.required),ct.name=this.data.fieldName,ct.tabIndex=0;let ut=this.data.combo&&this.data.options.length>0;this.data.combo||(ct.size=this.data.options.length,this.data.multiSelect&&(ct.multiple=!0)),ct.addEventListener("resetform",Tt=>{const jt=this.data.defaultFieldValue;for(const Rt of ct.options)Rt.selected=Rt.value===jt});for(const Tt of this.data.options){const jt=document.createElement("option");jt.textContent=Tt.displayValue,jt.value=Tt.exportValue,ot.value.includes(Tt.exportValue)&&(jt.setAttribute("selected",!0),ut=!1),ct.append(jt)}let dt=null;if(ut){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ct.prepend(Tt),dt=()=>{Tt.remove(),ct.removeEventListener("input",dt),dt=null},ct.addEventListener("input",dt)}const ft=Tt=>{const jt=Tt?"value":"textContent",{options:Rt,multiple:Ft}=ct;return Ft?Array.prototype.filter.call(Rt,$t=>$t.selected).map($t=>$t[jt]):Rt.selectedIndex===-1?null:Rt[Rt.selectedIndex][jt]};let St=ft(!1);const kt=Tt=>{const jt=Tt.target.options;return Array.prototype.map.call(jt,Rt=>({displayValue:Rt.textContent,exportValue:Rt.value}))};return this.enableScripting&&this.hasJSActions?(ct.addEventListener("updatefromsandbox",Tt=>{const jt={value(Rt){dt==null||dt();const Ft=Rt.detail.value,$t=new Set(Array.isArray(Ft)?Ft:[Ft]);for(const zt of ct.options)zt.selected=$t.has(zt.value);g.setValue(et,{value:ft(!0)}),St=ft(!1)},multipleSelection(Rt){ct.multiple=!0},remove(Rt){const Ft=ct.options,$t=Rt.detail.remove;Ft[$t].selected=!1,ct.remove($t),Ft.length>0&&Array.prototype.findIndex.call(Ft,Kt=>Kt.selected)===-1&&(Ft[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(Rt)}),St=ft(!1)},clear(Rt){for(;ct.length!==0;)ct.remove(0);g.setValue(et,{value:null,items:[]}),St=ft(!1)},insert(Rt){const{index:Ft,displayValue:$t,exportValue:zt}=Rt.detail.insert,Kt=ct.children[Ft],Bt=document.createElement("option");Bt.textContent=$t,Bt.value=zt,Kt?Kt.before(Bt):ct.append(Bt),g.setValue(et,{value:ft(!0),items:kt(Rt)}),St=ft(!1)},items(Rt){const{items:Ft}=Rt.detail;for(;ct.length!==0;)ct.remove(0);for(const $t of Ft){const{displayValue:zt,exportValue:Kt}=$t,Bt=document.createElement("option");Bt.textContent=zt,Bt.value=Kt,ct.append(Bt)}ct.options.length>0&&(ct.options[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(Rt)}),St=ft(!1)},indices(Rt){const Ft=new Set(Rt.detail.indices);for(const $t of Rt.target.options)$t.selected=Ft.has($t.index);g.setValue(et,{value:ft(!0)}),St=ft(!1)},editable(Rt){Rt.target.disabled=!Rt.detail.editable}};this._dispatchEventFromSandbox(jt,Tt)}),ct.addEventListener("input",Tt=>{var Ft;const jt=ft(!0),Rt=ft(!1);g.setValue(et,{value:jt}),Tt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:St,change:Rt,changeEx:jt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ct,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ct.addEventListener("input",function(Tt){g.setValue(et,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(ct),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}var sS,mC;class PopupAnnotationElement extends AnnotationElement{constructor(et){const{data:ot,elements:ct,parent:ut}=et,dt=!!ut._commentManager;super(et,{isRenderable:!dt&&AnnotationElement._hasPopupData(ot)});vn(this,sS);if(this.elements=ct,dt&&AnnotationElement._hasPopupData(ot)){const ft=this.popup=An(this,sS,mC).call(this);for(const St of ct)St.popup=ft}else this.popup=null}render(){const{container:et}=this;et.classList.add("popupAnnotation"),et.role="comment";const ot=this.popup=An(this,sS,mC).call(this),ct=[];for(const ut of this.elements)ut.popup=ot,ut.container.ariaHasPopup="dialog",ct.push(ut.data.id),ut.addHighlightArea();return this.container.setAttribute("aria-controls",ct.map(ut=>`${AnnotationPrefix}${ut}`).join(",")),this.container}}sS=new WeakSet,mC=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Po,um,RT,PT,Z1,ev,Zr,vu,hm,G0,tv,nv,xu,No,ap,lp,xs,cp,dm,oS,up,rv,W0,fm,Us,pm,iv,dw,aS,gC,lS,yC,cS,vC,sv,fw,uS,xC,NT,M3,MT,O3,OT,I3,IT,D3,ov,pw,av,mw,hS,bC;class PopupElement{constructor({container:g,color:et,elements:ot,titleObj:ct,modificationDate:ut,contentsObj:dt,richText:ft,parent:St,rect:kt,parentRect:Tt,open:jt,commentManager:Rt=null}){vn(this,iv);vn(this,aS);vn(this,lS);vn(this,cS);vn(this,sv);vn(this,uS);vn(this,NT);vn(this,MT);vn(this,OT);vn(this,IT);vn(this,ov);vn(this,av);vn(this,hS);vn(this,Po,null);vn(this,um,An(this,OT,I3).bind(this));vn(this,RT,An(this,hS,bC).bind(this));vn(this,PT,An(this,av,mw).bind(this));vn(this,Z1,An(this,ov,pw).bind(this));vn(this,ev,null);vn(this,Zr,null);vn(this,vu,null);vn(this,hm,null);vn(this,G0,null);vn(this,tv,null);vn(this,nv,null);vn(this,xu,!1);vn(this,No,null);vn(this,ap,null);vn(this,lp,null);vn(this,xs,null);vn(this,cp,null);vn(this,dm,null);vn(this,oS,null);vn(this,up,null);vn(this,rv,null);vn(this,W0,null);vn(this,fm,!1);vn(this,Us,null);vn(this,pm,null);xn(this,Zr,g),xn(this,rv,ct),xn(this,vu,dt),xn(this,up,ft),xn(this,tv,St),xn(this,ev,et),xn(this,oS,kt),xn(this,nv,Tt),xn(this,G0,ot),xn(this,Po,Rt),xn(this,Us,ot[0]),xn(this,hm,PDFDateString.toDateObject(ut)),this.trigger=ot.flatMap(Ft=>Ft.getElementsToTriggerPopup()),Rt?this.renderCommentButton():(An(this,iv,dw).call(this),Ht(this,Zr).hidden=!0,jt&&An(this,ov,pw).call(this))}renderCommentButton(){if(Ht(this,xs)||(Ht(this,cp)||An(this,aS,gC).call(this),!Ht(this,cp)))return;const{signal:g}=xn(this,ap,new AbortController),et=!!Ht(this,Us).extraPopupElement,ot=()=>{Ht(this,Po).toggleCommentPopup(this,!0,void 0,!et)},ct=()=>{Ht(this,Po).toggleCommentPopup(this,!1,!0,!et)},ut=()=>{Ht(this,Po).toggleCommentPopup(this,!1,!1)};if(et){xn(this,xs,Ht(this,Us).container);for(const dt of this.trigger)dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.addEventListener("keydown",Ht(this,um),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),dt.classList.add("popupTriggerArea")}else{const dt=xn(this,xs,document.createElement("button"));dt.className="annotationCommentButton";const ft=Ht(this,Us).container;dt.style.zIndex=ft.style.zIndex+1,dt.tabIndex=0,dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button"),An(this,cS,vC).call(this),An(this,lS,yC).call(this),dt.addEventListener("keydown",Ht(this,um),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),ft.after(dt)}}get commentButtonColor(){const{color:g,opacity:et}=Ht(this,Us).commentData;return g?Ht(this,tv)._commentManager.makeCommentColor(g,et):null}focusCommentButton(){setTimeout(()=>{var g;(g=Ht(this,xs))==null||g.focus()},0)}getData(){const{richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}=Ht(this,Us).commentData;return{contentsObj:{str:this.comment},richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}}get elementBeforePopup(){return Ht(this,xs)}get comment(){return Ht(this,pm)||xn(this,pm,Ht(this,Us).commentText),Ht(this,pm)}set comment(g){g!==this.comment&&(Ht(this,Us).commentText=xn(this,pm,g))}get parentBoundingClientRect(){return Ht(this,Us).layer.getBoundingClientRect()}setCommentButtonStates({selected:g,hasPopup:et}){Ht(this,xs)&&(Ht(this,xs).classList.toggle("selected",g),Ht(this,xs).ariaExpanded=et)}setSelectedCommentButton(g){Ht(this,xs).classList.toggle("selected",g)}get commentPopupPosition(){if(Ht(this,dm))return Ht(this,dm);const{x:g,y:et,height:ot}=Ht(this,xs).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=Ht(this,Us).layer.getBoundingClientRect();return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPosition(g){xn(this,dm,g)}hasDefaultPopupPosition(){return Ht(this,dm)===null}get commentButtonPosition(){return Ht(this,cp)}get commentButtonWidth(){return Ht(this,xs).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(g){const[et,ot]=Ht(this,dm)||this.commentButtonPosition.map(kt=>kt/100),ct=this.parentBoundingClientRect,{x:ut,y:dt,width:ft,height:St}=ct;Ht(this,Po).showDialog(null,this,ut+et*ft,dt+ot*St,{...g,parentDimensions:ct})}render(){var ot,ct;if(Ht(this,No))return;const g=xn(this,No,document.createElement("div"));if(g.className="popup",Ht(this,ev)){const ut=g.style.outlineColor=Util$1.makeHexColor(...Ht(this,ev));g.style.backgroundColor=`color-mix(in srgb, ${ut} 30%, white)`}const et=document.createElement("span");if(et.className="header",(ot=Ht(this,rv))!=null&&ot.str){const ut=document.createElement("span");ut.className="title",et.append(ut),{dir:ut.dir,str:ut.textContent}=Ht(this,rv)}if(g.append(et),Ht(this,hm)){const ut=document.createElement("time");ut.className="popupDate",ut.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ut.setAttribute("data-l10n-args",JSON.stringify({dateObj:Ht(this,hm).valueOf()})),ut.dateTime=Ht(this,hm).toISOString(),et.append(ut)}renderRichText({html:Ht(this,sv,fw)||Ht(this,vu).str,dir:(ct=Ht(this,vu))==null?void 0:ct.dir,className:"popupContent"},g),Ht(this,Zr).append(g)}updateEdited({rect:g,popup:et,deleted:ot}){var ct;if(Ht(this,Po)){ot?(this.remove(),xn(this,pm,null)):et&&(et.deleted?this.remove():(An(this,cS,vC).call(this),xn(this,pm,et.text))),g&&(xn(this,cp,null),An(this,aS,gC).call(this),An(this,lS,yC).call(this));return}if(ot||et!=null&&et.deleted){this.remove();return}An(this,iv,dw).call(this),Ht(this,W0)||xn(this,W0,{contentsObj:Ht(this,vu),richText:Ht(this,up)}),g&&xn(this,lp,null),et&&et.text&&(xn(this,up,An(this,MT,O3).call(this,et.text)),xn(this,hm,PDFDateString.toDateObject(et.date)),xn(this,vu,null)),(ct=Ht(this,No))==null||ct.remove(),xn(this,No,null)}resetEdited(){var g;Ht(this,W0)&&({contentsObj:cs(this,vu)._,richText:cs(this,up)._}=Ht(this,W0),xn(this,W0,null),(g=Ht(this,No))==null||g.remove(),xn(this,No,null),xn(this,lp,null))}remove(){var g,et,ot;if((g=Ht(this,ap))==null||g.abort(),xn(this,ap,null),(et=Ht(this,No))==null||et.remove(),xn(this,No,null),xn(this,fm,!1),xn(this,xu,!1),(ot=Ht(this,xs))==null||ot.remove(),xn(this,xs,null),this.trigger)for(const ct of this.trigger)ct.classList.remove("popupTriggerArea")}forceHide(){xn(this,fm,this.isVisible),Ht(this,fm)&&(Ht(this,Zr).hidden=!0)}maybeShow(){Ht(this,Po)||(An(this,iv,dw).call(this),Ht(this,fm)&&(Ht(this,No)||An(this,av,mw).call(this),xn(this,fm,!1),Ht(this,Zr).hidden=!1))}get isVisible(){return Ht(this,Po)?!1:Ht(this,Zr).hidden===!1}}Po=new WeakMap,um=new WeakMap,RT=new WeakMap,PT=new WeakMap,Z1=new WeakMap,ev=new WeakMap,Zr=new WeakMap,vu=new WeakMap,hm=new WeakMap,G0=new WeakMap,tv=new WeakMap,nv=new WeakMap,xu=new WeakMap,No=new WeakMap,ap=new WeakMap,lp=new WeakMap,xs=new WeakMap,cp=new WeakMap,dm=new WeakMap,oS=new WeakMap,up=new WeakMap,rv=new WeakMap,W0=new WeakMap,fm=new WeakMap,Us=new WeakMap,pm=new WeakMap,iv=new WeakSet,dw=function(){var et;if(Ht(this,ap))return;xn(this,ap,new AbortController);const{signal:g}=Ht(this,ap);for(const ot of this.trigger)ot.addEventListener("click",Ht(this,Z1),{signal:g}),ot.addEventListener("pointerenter",Ht(this,PT),{signal:g}),ot.addEventListener("pointerleave",Ht(this,RT),{signal:g}),ot.classList.add("popupTriggerArea");for(const ot of Ht(this,G0))(et=ot.container)==null||et.addEventListener("keydown",Ht(this,um),{signal:g})},aS=new WeakSet,gC=function(){const g=Ht(this,G0).find(et=>et.hasCommentButton);g&&xn(this,cp,g._normalizePoint(g.commentButtonPosition))},lS=new WeakSet,yC=function(){if(Ht(this,Us).extraPopupElement&&!Ht(this,Us).editor)return;this.renderCommentButton();const[g,et]=Ht(this,cp),{style:ot}=Ht(this,xs);ot.left=`calc(${g}%)`,ot.top=`calc(${et}% - var(--comment-button-dim))`},cS=new WeakSet,vC=function(){Ht(this,Us).extraPopupElement||(this.renderCommentButton(),Ht(this,xs).style.backgroundColor=this.commentButtonColor||"")},sv=new WeakSet,fw=function(){const g=Ht(this,up),et=Ht(this,vu);return g!=null&&g.str&&(!(et!=null&&et.str)||et.str===g.str)&&Ht(this,up).html||null},uS=new WeakSet,xC=function(){var g,et,ot;return((ot=(et=(g=Ht(this,sv,fw))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.fontSize)||0},NT=new WeakSet,M3=function(){var g,et,ot;return((ot=(et=(g=Ht(this,sv,fw))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.color)||null},MT=new WeakSet,O3=function(g){const et=[],ot={str:g,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:et}]}},ct={style:{color:Ht(this,NT,M3),fontSize:Ht(this,uS,xC)?`calc(${Ht(this,uS,xC)}px * var(--total-scale-factor))`:""}};for(const ut of g.split(`
`))et.push({name:"span",value:ut,attributes:ct});return ot},OT=new WeakSet,I3=function(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&Ht(this,xu))&&An(this,ov,pw).call(this)},IT=new WeakSet,D3=function(){if(Ht(this,lp)!==null)return;const{page:{view:g},viewport:{rawDims:{pageWidth:et,pageHeight:ot,pageX:ct,pageY:ut}}}=Ht(this,tv);let dt=!!Ht(this,nv),ft=dt?Ht(this,nv):Ht(this,oS);for(const $t of Ht(this,G0))if(!ft||Util$1.intersect($t.data.rect,ft)!==null){ft=$t.data.rect,dt=!0;break}const St=Util$1.normalizeRect([ft[0],g[3]-ft[1]+g[1],ft[2],g[3]-ft[3]+g[1]]),kt=5,Tt=dt?ft[2]-ft[0]+kt:0,jt=St[0]+Tt,Rt=St[1];xn(this,lp,[100*(jt-ct)/et,100*(Rt-ut)/ot]);const{style:Ft}=Ht(this,Zr);Ft.left=`${Ht(this,lp)[0]}%`,Ft.top=`${Ht(this,lp)[1]}%`},ov=new WeakSet,pw=function(){if(Ht(this,Po)){Ht(this,Po).toggleCommentPopup(this,!1);return}xn(this,xu,!Ht(this,xu)),Ht(this,xu)?(An(this,av,mw).call(this),Ht(this,Zr).addEventListener("click",Ht(this,Z1)),Ht(this,Zr).addEventListener("keydown",Ht(this,um))):(An(this,hS,bC).call(this),Ht(this,Zr).removeEventListener("click",Ht(this,Z1)),Ht(this,Zr).removeEventListener("keydown",Ht(this,um)))},av=new WeakSet,mw=function(){Ht(this,No)||this.render(),this.isVisible?Ht(this,xu)&&Ht(this,Zr).classList.add("focused"):(An(this,IT,D3).call(this),Ht(this,Zr).hidden=!1,Ht(this,Zr).style.zIndex=parseInt(Ht(this,Zr).style.zIndex)+1e3)},hS=new WeakSet,bC=function(){Ht(this,Zr).classList.remove("focused"),!(Ht(this,xu)||!this.isVisible)&&(Ht(this,Zr).hidden=!0,Ht(this,Zr).style.zIndex=parseInt(Ht(this,Zr).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const et of this.textContent){const ot=document.createElement("span");ot.textContent=et,g.append(ot)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dS;class LineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});vn(this,dS,null)}render(){this.container.classList.add("lineAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=xn(this,dS,this.svgFactory.createElement("svg:line"));return dt.setAttribute("x1",et.rect[2]-et.lineCoordinates[0]),dt.setAttribute("y1",et.rect[3]-et.lineCoordinates[1]),dt.setAttribute("x2",et.rect[2]-et.lineCoordinates[2]),dt.setAttribute("y2",et.rect[3]-et.lineCoordinates[3]),dt.setAttribute("stroke-width",et.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),ut.append(dt),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ht(this,dS)}addHighlightArea(){this.container.classList.add("highlightArea")}}dS=new WeakMap;var fS;class SquareAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});vn(this,fS,null)}render(){this.container.classList.add("squareAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=xn(this,fS,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",dt/2),ft.setAttribute("y",dt/2),ft.setAttribute("width",ot-dt),ft.setAttribute("height",ct-dt),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ht(this,fS)}addHighlightArea(){this.container.classList.add("highlightArea")}}fS=new WeakMap;var pS;class CircleAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});vn(this,pS,null)}render(){this.container.classList.add("circleAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=xn(this,pS,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",ot/2),ft.setAttribute("cy",ct/2),ft.setAttribute("rx",ot/2-dt/2),ft.setAttribute("ry",ct/2-dt/2),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ht(this,pS)}addHighlightArea(){this.container.classList.add("highlightArea")}}pS=new WeakMap;var mS;class PolylineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});vn(this,mS,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,vertices:ot,borderStyle:ct,popupRef:ut},width:dt,height:ft}=this;if(!ot)return this.container;const St=this.svgFactory.create(dt,ft,!0);let kt=[];for(let jt=0,Rt=ot.length;jt<Rt;jt+=2){const Ft=ot[jt]-et[0],$t=et[3]-ot[jt+1];kt.push(`${Ft},${$t}`)}kt=kt.join(" ");const Tt=xn(this,mS,this.svgFactory.createElement(this.svgElementName));return Tt.setAttribute("points",kt),Tt.setAttribute("stroke-width",ct.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),St.append(Tt),this.container.append(St),!ut&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ht(this,mS)}addHighlightArea(){this.container.classList.add("highlightArea")}}mS=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gS,q0,yS,EC;class InkAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});vn(this,yS);vn(this,gS,null);vn(this,q0,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,rotation:ot,inkLists:ct,borderStyle:ut,popupRef:dt}}=this,{transform:ft,width:St,height:kt}=An(this,yS,EC).call(this,ot,et),Tt=this.svgFactory.create(St,kt,!0),jt=xn(this,gS,this.svgFactory.createElement("svg:g"));Tt.append(jt),jt.setAttribute("stroke-width",ut.width||1),jt.setAttribute("stroke-linecap","round"),jt.setAttribute("stroke-linejoin","round"),jt.setAttribute("stroke-miterlimit",10),jt.setAttribute("stroke","transparent"),jt.setAttribute("fill","transparent"),jt.setAttribute("transform",ft);for(let Rt=0,Ft=ct.length;Rt<Ft;Rt++){const $t=this.svgFactory.createElement(this.svgElementName);Ht(this,q0).push($t),$t.setAttribute("points",ct[Rt].join(",")),jt.append($t)}return!dt&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this._editOnDoubleClick(),this.container}updateEdited(et){super.updateEdited(et);const{thickness:ot,points:ct,rect:ut}=et,dt=Ht(this,gS);if(ot>=0&&dt.setAttribute("stroke-width",ot||1),ct)for(let ft=0,St=Ht(this,q0).length;ft<St;ft++)Ht(this,q0)[ft].setAttribute("points",ct[ft].join(","));if(ut){const{transform:ft,width:St,height:kt}=An(this,yS,EC).call(this,this.data.rotation,ut);dt.parentElement.setAttribute("viewBox",`0 0 ${St} ${kt}`),dt.setAttribute("transform",ft)}}getElementsToTriggerPopup(){return Ht(this,q0)}addHighlightArea(){this.container.classList.add("highlightArea")}}gS=new WeakMap,q0=new WeakMap,yS=new WeakSet,EC=function(et,ot){switch(et){case 90:return{transform:`rotate(90) translate(${-ot[0]},${ot[1]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};case 180:return{transform:`rotate(180) translate(${-ot[2]},${ot[1]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]};case 270:return{transform:`rotate(270) translate(${-ot[2]},${ot[3]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};default:return{transform:`translate(${-ot[0]},${ot[3]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),g){const ot=document.createElement("mark");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),g){const ot=document.createElement("s");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vS,xS,SC;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(et){var ct;super(et,{isRenderable:!0});vn(this,xS);vn(this,vS,null);const{file:ot}=this.data;this.filename=ot.filename,this.content=ot.content,(ct=this.linkService.eventBus)==null||ct.dispatch("fileattachmentannotation",{source:this,...ot})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:et,data:ot}=this;let ct;ot.hasAppearance||ot.fillAlpha===0?ct=document.createElement("div"):(ct=document.createElement("img"),ct.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ot.name)?"paperclip":"pushpin"}.svg`,ot.fillAlpha&&ot.fillAlpha<1&&(ct.style=`filter: opacity(${Math.round(ot.fillAlpha*100)}%);`)),ct.addEventListener("dblclick",An(this,xS,SC).bind(this)),xn(this,vS,ct);const{isMac:ut}=util_FeatureTest.platform;return et.addEventListener("keydown",dt=>{dt.key==="Enter"&&(ut?dt.metaKey:dt.ctrlKey)&&An(this,xS,SC).call(this)}),!ot.popupRef&&this.hasPopupData?this._createPopup():ct.classList.add("popupTriggerArea"),et.append(ct),et}getElementsToTriggerPopup(){return Ht(this,vS)}addHighlightArea(){this.container.classList.add("highlightArea")}}vS=new WeakMap,xS=new WeakSet,SC=function(){var et;(et=this.downloadManager)==null||et.openOrDownloadData(this.content,this.filename)};var lv,K0,cv,mm,bS,Y0,ES,wC,SS,kC,wS;let AnnotationLayer$1=(wS=class{constructor({div:g,accessibilityManager:et,annotationCanvasMap:ot,annotationEditorUIManager:ct,page:ut,viewport:dt,structTreeLayer:ft,commentManager:St,linkService:kt,annotationStorage:Tt}){vn(this,ES);vn(this,SS);vn(this,lv,null);vn(this,K0,null);vn(this,cv,null);vn(this,mm,new Map);vn(this,bS,null);vn(this,Y0,null);this.div=g,xn(this,lv,et),xn(this,K0,ot),xn(this,bS,ft||null),xn(this,Y0,kt||null),xn(this,cv,Tt||new AnnotationStorage),this.page=ut,this.viewport=dt,this.zIndex=0,this._annotationEditorUIManager=ct,this._commentManager=St||null}hasEditableAnnotations(){return Ht(this,mm).size>0}async render(g){var dt,ft,St;const{annotations:et}=g,ot=this.div;setLayerDimensions(ot,this.viewport);const ct=new Map,ut={data:null,layer:ot,linkService:Ht(this,Y0),downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:Ht(this,cv),enableComment:g.enableComment===!0,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const kt of et){if(kt.noHTML)continue;const Tt=kt.annotationType===AnnotationType.POPUP;if(Tt){const Ft=ct.get(kt.id);if(!Ft)continue;ut.elements=Ft}else if(kt.rect[2]===kt.rect[0]||kt.rect[3]===kt.rect[1])continue;ut.data=kt;const jt=AnnotationElementFactory.create(ut);if(!jt.isRenderable)continue;if(!Tt&&kt.popupRef){const Ft=ct.get(kt.popupRef);Ft?Ft.push(jt):ct.set(kt.popupRef,[jt])}const Rt=jt.render();kt.hidden&&(Rt.style.visibility="hidden"),await An(this,ES,wC).call(this,Rt,kt.id,ut.elements),(ft=(dt=jt.extraPopupElement)==null?void 0:dt.popup)==null||ft.renderCommentButton(),jt._isEditable&&(Ht(this,mm).set(jt.data.id,jt),(St=this._annotationEditorUIManager)==null||St.renderAnnotationElement(jt))}An(this,SS,kC).call(this)}async addLinkAnnotations(g){const et={data:null,layer:this.div,linkService:Ht(this,Y0),svgFactory:new DOMSVGFactory,parent:this};for(const ot of g){ot.borderStyle||(ot.borderStyle=wS._defaultBorderStyle),et.data=ot;const ct=AnnotationElementFactory.create(et);if(!ct.isRenderable)continue;const ut=ct.render();await An(this,ES,wC).call(this,ut,ot.id,null)}}update({viewport:g}){const et=this.div;this.viewport=g,setLayerDimensions(et,{rotation:g.rotation}),An(this,SS,kC).call(this),et.hidden=!1}getEditableAnnotations(){return Array.from(Ht(this,mm).values())}getEditableAnnotation(g){return Ht(this,mm).get(g)}addFakeAnnotation(g){var ft;const{div:et}=this,{id:ot,rotation:ct}=g,ut=new EditorAnnotationElement({data:{id:ot,rect:g.getPDFRect(),rotation:ct},editor:g,layer:et,parent:this,enableComment:!!this._commentManager,linkService:Ht(this,Y0),annotationStorage:Ht(this,cv)}),dt=ut.render();return et.append(dt),(ft=Ht(this,lv))==null||ft.moveElementInDOM(et,dt,dt,!1),ut.createOrUpdatePopup(),ut}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},lv=new WeakMap,K0=new WeakMap,cv=new WeakMap,mm=new WeakMap,bS=new WeakMap,Y0=new WeakMap,ES=new WeakSet,wC=async function(g,et,ot){var ft,St;const ct=g.firstChild||g,ut=ct.id=`${AnnotationPrefix}${et}`,dt=await((ft=Ht(this,bS))==null?void 0:ft.getAriaAttributes(ut));if(dt)for(const[kt,Tt]of dt)ct.setAttribute(kt,Tt);ot?ot.at(-1).container.after(g):(this.div.append(g),(St=Ht(this,lv))==null||St.moveElementInDOM(this.div,g,ct,!1))},SS=new WeakSet,kC=function(){var et;if(!Ht(this,K0))return;const g=this.div;for(const[ot,ct]of Ht(this,K0)){const ut=g.querySelector(`[data-annotation-id="${ot}"]`);if(!ut)continue;ct.className="annotationContent";const{firstChild:dt}=ut;dt?dt.nodeName==="CANVAS"?dt.replaceWith(ct):dt.classList.contains("annotationContent")?dt.after(ct):dt.before(ct):ut.append(ct);const ft=Ht(this,mm).get(ot);ft&&(ft._hasNoCanvas?((et=this._annotationEditorUIManager)==null||et.setMissingCanvas(ot,ut.id,ct),ft._hasNoCanvas=!1):ft.canvas=ct)}Ht(this,K0).clear()},wS);const EOL_PATTERN=/\r\n?|\n/g;var Mo,kS,X0,Oo,DT,L3,LT,j3,jT,F3,uv,gw,hv,yw,dv,xw,FT,$3,TS,TC,$T,B3;const Fr=class Fr extends AnnotationEditor{constructor(et){super({...et,name:"freeTextEditor"});vn(this,DT);vn(this,LT);vn(this,jT);vn(this,uv);vn(this,dv);vn(this,FT);vn(this,$T);vn(this,Mo,"");vn(this,kS,`${this.id}-editor`);vn(this,X0,null);vn(this,Oo,void 0);qn(this,"_colorPicker",null);this.color=et.color||Fr._defaultColor||AnnotationEditor._defaultLineColor,xn(this,Oo,et.fontSize||Fr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const et=Fr.prototype,ot=dt=>dt.isEmpty(),ct=AnnotationEditorUIManager.TRANSLATE_SMALL,ut=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],et._translateEmpty,{args:[-ct,0],checker:ot}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et._translateEmpty,{args:[-ut,0],checker:ot}],[["ArrowRight","mac+ArrowRight"],et._translateEmpty,{args:[ct,0],checker:ot}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et._translateEmpty,{args:[ut,0],checker:ot}],[["ArrowUp","mac+ArrowUp"],et._translateEmpty,{args:[0,-ct],checker:ot}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et._translateEmpty,{args:[0,-ut],checker:ot}],[["ArrowDown","mac+ArrowDown"],et._translateEmpty,{args:[0,ct],checker:ot}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et._translateEmpty,{args:[0,ut],checker:ot}]]))}static initialize(et,ot){AnnotationEditor.initialize(et,ot);const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:Fr._defaultFontSize=ot;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Fr._defaultColor=ot;break}}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:An(this,DT,L3).call(this,ot);break;case AnnotationEditorParamsType.FREETEXT_COLOR:An(this,LT,j3).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Fr._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Fr._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Ht(this,Oo)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var et;this.editorDiv.style.color=this.color,(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_translateEmpty(et,ot){this._uiManager.translateSelectedEditors(et,ot,!0)}getInitialTranslation(){const et=this.parentScale;return[-Fr._internalPadding*et,-(Fr._internalPadding+Ht(this,Oo))*et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),xn(this,X0,new AbortController);const et=this._uiManager.combinedSignal(Ht(this,X0));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:et}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:et}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:et}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:et}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:et}),!0}disableEditMode(){var et;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Ht(this,kS)),this._isDraggable=!0,(et=Ht(this,X0))==null||et.abort(),xn(this,X0,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(et){this._focusEventsAllowed&&(super.focusin(et),et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(et){var ot;this.width||(this.enableEditMode(),et&&this.editorDiv.focus(),(ot=this._initialOptions)!=null&&ot.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const et=Ht(this,Mo),ot=xn(this,Mo,An(this,jT,F3).call(this).trimEnd());if(et===ot)return;const ct=ut=>{if(xn(this,Mo,ut),!ut){this.remove();return}An(this,dv,xw).call(this),this._uiManager.rebuild(this),An(this,uv,gw).call(this)};this.addCommands({cmd:()=>{ct(ot)},undo:()=>{ct(et)},mustExec:!1}),An(this,uv,gw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(et){et.target===this.div&&et.key==="Enter"&&(this.enterInEditMode(),et.preventDefault())}editorDivKeydown(et){Fr._keyboardManager.exec(this,et)}editorDivFocus(et){this.isEditing=!0}editorDivBlur(et){this.isEditing=!1}editorDivInput(et){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let et,ot;(this._isCopy||this.annotationElementId)&&(et=this.x,ot=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Ht(this,kS)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${Ht(this,Oo)}px * var(--total-scale-factor))`,ct.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ut,dt]=this.parentDimensions;if(this.annotationElementId){const{position:ft}=this._initialData;let[St,kt]=this.getInitialTranslation();[St,kt]=this.pageTranslationToScreen(St,kt);const[Tt,jt]=this.pageDimensions,[Rt,Ft]=this.pageTranslation;let $t,zt;switch(this.rotation){case 0:$t=et+(ft[0]-Rt)/Tt,zt=ot+this.height-(ft[1]-Ft)/jt;break;case 90:$t=et+(ft[0]-Rt)/Tt,zt=ot-(ft[1]-Ft)/jt,[St,kt]=[kt,-St];break;case 180:$t=et-this.width+(ft[0]-Rt)/Tt,zt=ot-(ft[1]-Ft)/jt,[St,kt]=[-St,-kt];break;case 270:$t=et+(ft[0]-Rt-this.height*jt)/Tt,zt=ot+(ft[1]-Ft-this.width*Tt)/jt,[St,kt]=[-kt,St];break}this.setAt($t*ut,zt*dt,St,kt)}else this._moveAfterPaste(et,ot);An(this,dv,xw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(et){var $t,zt,Kt;const ot=et.clipboardData||window.clipboardData,{types:ct}=ot;if(ct.length===1&&ct[0]==="text/plain")return;et.preventDefault();const ut=An($t=Fr,TS,TC).call($t,ot.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ut)return;const dt=window.getSelection();if(!dt.rangeCount)return;this.editorDiv.normalize(),dt.deleteFromDocument();const ft=dt.getRangeAt(0);if(!ut.includes(`
`)){ft.insertNode(document.createTextNode(ut)),this.editorDiv.normalize(),dt.collapseToStart();return}const{startContainer:St,startOffset:kt}=ft,Tt=[],jt=[];if(St.nodeType===Node.TEXT_NODE){const Bt=St.parentElement;if(jt.push(St.nodeValue.slice(kt).replaceAll(EOL_PATTERN,"")),Bt!==this.editorDiv){let Ut=Tt;for(const Jt of this.editorDiv.childNodes){if(Jt===Bt){Ut=jt;continue}Ut.push(An(zt=Fr,hv,yw).call(zt,Jt))}}Tt.push(St.nodeValue.slice(0,kt).replaceAll(EOL_PATTERN,""))}else if(St===this.editorDiv){let Bt=Tt,Ut=0;for(const Jt of this.editorDiv.childNodes)Ut++===kt&&(Bt=jt),Bt.push(An(Kt=Fr,hv,yw).call(Kt,Jt))}xn(this,Mo,`${Tt.join(`
`)}${ut}${jt.join(`
`)}`),An(this,dv,xw).call(this);const Rt=new Range;let Ft=Math.sumPrecise(Tt.map(Bt=>Bt.length));for(const{firstChild:Bt}of this.editorDiv.childNodes)if(Bt.nodeType===Node.TEXT_NODE){const Ut=Bt.nodeValue.length;if(Ft<=Ut){Rt.setStart(Bt,Ft),Rt.setEnd(Bt,Ft);break}Ft-=Ut}dt.removeAllRanges(),dt.addRange(Rt)}get contentDiv(){return this.editorDiv}getPDFRect(){const et=Fr._internalPadding*this.parentScale;return this.getRect(et,et)}static async deserialize(et,ot,ct){var ft;let ut=null;if(et instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:St,fontColor:kt},rect:Tt,rotation:jt,id:Rt,popupRef:Ft,richText:$t,contentsObj:zt,creationDate:Kt,modificationDate:Bt},textContent:Ut,textPosition:Jt,parent:{page:{pageNumber:en}}}=et;if(!Ut||Ut.length===0)return null;ut=et={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:St,value:Ut.join(`
`),position:Jt,pageIndex:en-1,rect:Tt.slice(0),rotation:jt,annotationElementId:Rt,id:Rt,deleted:!1,popupRef:Ft,comment:(zt==null?void 0:zt.str)||null,richText:$t,creationDate:Kt,modificationDate:Bt}}const dt=await super.deserialize(et,ot,ct);return xn(dt,Oo,et.fontSize),dt.color=Util$1.makeHexColor(...et.color),xn(dt,Mo,An(ft=Fr,TS,TC).call(ft,et.value)),dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ct=Object.assign(super.serialize(et),{color:ot,fontSize:Ht(this,Oo),value:An(this,FT,$3).call(this)});return this.addComment(ct),et?(ct.isCopy=!0,ct):this.annotationElementId&&!An(this,$T,B3).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){const ot=super.renderAnnotationElement(et);if(!ot)return null;const{style:ct}=ot;ct.fontSize=`calc(${Ht(this,Oo)}px * var(--total-scale-factor))`,ct.color=this.color,ot.replaceChildren();for(const ut of Ht(this,Mo).split(`
`)){const dt=document.createElement("div");dt.append(ut?document.createTextNode(ut):document.createElement("br")),ot.append(dt)}return et.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Ht(this,Mo)}}),ot}resetAnnotationElement(et){super.resetAnnotationElement(et),et.resetEdited()}};Mo=new WeakMap,kS=new WeakMap,X0=new WeakMap,Oo=new WeakMap,DT=new WeakSet,L3=function(et){const ot=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--total-scale-factor))`,this.translate(0,-(ut-Ht(this,Oo))*this.parentScale),xn(this,Oo,ut),An(this,uv,gw).call(this)},ct=Ht(this,Oo);this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},LT=new WeakSet,j3=function(et){const ot=ut=>{this.color=ut,this.onUpdatedColor()},ct=this.color;this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jT=new WeakSet,F3=function(){var ct;const et=[];this.editorDiv.normalize();let ot=null;for(const ut of this.editorDiv.childNodes)(ot==null?void 0:ot.nodeType)===Node.TEXT_NODE&&ut.nodeName==="BR"||(et.push(An(ct=Fr,hv,yw).call(ct,ut)),ot=ut);return et.join(`
`)},uv=new WeakSet,gw=function(){const[et,ot]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:dt}=this,ft=dt.style.display,St=dt.classList.contains("hidden");dt.classList.remove("hidden"),dt.style.display="hidden",ut.div.append(this.div),ct=dt.getBoundingClientRect(),dt.remove(),dt.style.display=ft,dt.classList.toggle("hidden",St)}this.rotation%180===this.parentRotation%180?(this.width=ct.width/et,this.height=ct.height/ot):(this.width=ct.height/et,this.height=ct.width/ot),this.fixAndSetPosition()},hv=new WeakSet,yw=function(et){return(et.nodeType===Node.TEXT_NODE?et.nodeValue:et.innerText).replaceAll(EOL_PATTERN,"")},dv=new WeakSet,xw=function(){if(this.editorDiv.replaceChildren(),!!Ht(this,Mo))for(const et of Ht(this,Mo).split(`
`)){const ot=document.createElement("div");ot.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ot)}},FT=new WeakSet,$3=function(){return Ht(this,Mo).replaceAll(" "," ")},TS=new WeakSet,TC=function(et){return et.replaceAll(" "," ")},$T=new WeakSet,B3=function(et){const{value:ot,fontSize:ct,color:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||et.value!==ot||et.fontSize!==ct||et.color.some((ft,St)=>ft!==ut[St])||et.pageIndex!==dt},vn(Fr,hv),vn(Fr,TS),qn(Fr,"_freeTextDefaultContent",""),qn(Fr,"_internalPadding",0),qn(Fr,"_defaultColor",null),qn(Fr,"_defaultFontSize",10),qn(Fr,"_type","freetext"),qn(Fr,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Fr;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(g,et){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft]*ct,dt[ft+1]=ot+g[ft+1]*ut;return dt}static _rescaleAndSwap(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft+1]*ct,dt[ft+1]=ot+g[ft]*ut;return dt}static _translate(g,et,ot,ct){ct||(ct=new Float32Array(g.length));for(let ut=0,dt=g.length;ut<dt;ut+=2)ct[ut]=et+g[ut],ct[ut+1]=ot+g[ut+1];return ct}static svgRound(g){return Math.round(g*1e4)}static _normalizePoint(g,et,ot,ct,ut){switch(ut){case 90:return[1-et/ot,g/ct];case 180:return[1-g/ot,1-et/ct];case 270:return[et/ot,1-g/ct];default:return[g/ot,et/ct]}}static _normalizePagePoint(g,et,ot){switch(ot){case 90:return[1-et,g];case 180:return[1-g,1-et];case 270:return[et,1-g];default:return[g,et]}}static createBezierPoints(g,et,ot,ct,ut,dt){return[(g+5*ot)/6,(et+5*ct)/6,(5*ot+ut)/6,(5*ct+dt)/6,(ot+ut)/2,(ct+dt)/2]}}qn(Outline,"PRECISION",1e-4);var Io,Bl,fv,pv,bu,xr,J0,Q0,AS,_S,mv,gv,gm,CS,BT,VT,Z0,Tx,zT,V3,HT,z3,UT,H3,GT,U3,WT,G3,qT,W3;const Lu=class Lu{constructor({x:g,y:et},ot,ct,ut,dt,ft=0){vn(this,Z0);vn(this,zT);vn(this,HT);vn(this,UT);vn(this,GT);vn(this,WT);vn(this,qT);vn(this,Io,void 0);vn(this,Bl,[]);vn(this,fv,void 0);vn(this,pv,void 0);vn(this,bu,[]);vn(this,xr,new Float32Array(18));vn(this,J0,void 0);vn(this,Q0,void 0);vn(this,AS,void 0);vn(this,_S,void 0);vn(this,mv,void 0);vn(this,gv,void 0);vn(this,gm,[]);xn(this,Io,ot),xn(this,gv,ut*ct),xn(this,pv,dt),Ht(this,xr).set([NaN,NaN,NaN,NaN,g,et],6),xn(this,fv,ft),xn(this,_S,Ht(Lu,CS)*ct),xn(this,AS,Ht(Lu,VT)*ct),xn(this,mv,ct),Ht(this,gm).push(g,et)}isEmpty(){return isNaN(Ht(this,xr)[8])}add({x:g,y:et}){var dn;xn(this,J0,g),xn(this,Q0,et);const[ot,ct,ut,dt]=Ht(this,Io);let[ft,St,kt,Tt]=Ht(this,xr).subarray(8,12);const jt=g-kt,Rt=et-Tt,Ft=Math.hypot(jt,Rt);if(Ft<Ht(this,AS))return!1;const $t=Ft-Ht(this,_S),zt=$t/Ft,Kt=zt*jt,Bt=zt*Rt;let Ut=ft,Jt=St;ft=kt,St=Tt,kt+=Kt,Tt+=Bt,(dn=Ht(this,gm))==null||dn.push(g,et);const en=-Bt/$t,tn=Kt/$t,nn=en*Ht(this,gv),rn=tn*Ht(this,gv);return Ht(this,xr).set(Ht(this,xr).subarray(2,8),0),Ht(this,xr).set([kt+nn,Tt+rn],4),Ht(this,xr).set(Ht(this,xr).subarray(14,18),12),Ht(this,xr).set([kt-nn,Tt-rn],16),isNaN(Ht(this,xr)[6])?(Ht(this,bu).length===0&&(Ht(this,xr).set([ft+nn,St+rn],2),Ht(this,bu).push(NaN,NaN,NaN,NaN,(ft+nn-ot)/ut,(St+rn-ct)/dt),Ht(this,xr).set([ft-nn,St-rn],14),Ht(this,Bl).push(NaN,NaN,NaN,NaN,(ft-nn-ot)/ut,(St-rn-ct)/dt)),Ht(this,xr).set([Ut,Jt,ft,St,kt,Tt],6),!this.isEmpty()):(Ht(this,xr).set([Ut,Jt,ft,St,kt,Tt],6),Math.abs(Math.atan2(Jt-St,Ut-ft)-Math.atan2(Bt,Kt))<Math.PI/2?([ft,St,kt,Tt]=Ht(this,xr).subarray(2,6),Ht(this,bu).push(NaN,NaN,NaN,NaN,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[ft,St,Ut,Jt]=Ht(this,xr).subarray(14,18),Ht(this,Bl).push(NaN,NaN,NaN,NaN,((Ut+ft)/2-ot)/ut,((Jt+St)/2-ct)/dt),!0):([Ut,Jt,ft,St,kt,Tt]=Ht(this,xr).subarray(0,6),Ht(this,bu).push(((Ut+5*ft)/6-ot)/ut,((Jt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[kt,Tt,ft,St,Ut,Jt]=Ht(this,xr).subarray(12,18),Ht(this,Bl).push(((Ut+5*ft)/6-ot)/ut,((Jt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),!0))}toSVGPath(){if(this.isEmpty())return"";const g=Ht(this,bu),et=Ht(this,Bl);if(isNaN(Ht(this,xr)[6])&&!this.isEmpty())return An(this,zT,V3).call(this);const ot=[];ot.push(`M${g[4]} ${g[5]}`);for(let ct=6;ct<g.length;ct+=6)isNaN(g[ct])?ot.push(`L${g[ct+4]} ${g[ct+5]}`):ot.push(`C${g[ct]} ${g[ct+1]} ${g[ct+2]} ${g[ct+3]} ${g[ct+4]} ${g[ct+5]}`);An(this,UT,H3).call(this,ot);for(let ct=et.length-6;ct>=6;ct-=6)isNaN(et[ct])?ot.push(`L${et[ct+4]} ${et[ct+5]}`):ot.push(`C${et[ct]} ${et[ct+1]} ${et[ct+2]} ${et[ct+3]} ${et[ct+4]} ${et[ct+5]}`);return An(this,HT,z3).call(this,ot),ot.join(" ")}newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeDrawOutline(g,et,ot,ct,ut,dt)}getOutlines(){var jt;const g=Ht(this,bu),et=Ht(this,Bl),ot=Ht(this,xr),[ct,ut,dt,ft]=Ht(this,Io),St=new Float32Array((((jt=Ht(this,gm))==null?void 0:jt.length)??0)+2);for(let Rt=0,Ft=St.length-2;Rt<Ft;Rt+=2)St[Rt]=(Ht(this,gm)[Rt]-ct)/dt,St[Rt+1]=(Ht(this,gm)[Rt+1]-ut)/ft;if(St[St.length-2]=(Ht(this,J0)-ct)/dt,St[St.length-1]=(Ht(this,Q0)-ut)/ft,isNaN(ot[6])&&!this.isEmpty())return An(this,GT,U3).call(this,St);const kt=new Float32Array(Ht(this,bu).length+24+Ht(this,Bl).length);let Tt=g.length;for(let Rt=0;Rt<Tt;Rt+=2){if(isNaN(g[Rt])){kt[Rt]=kt[Rt+1]=NaN;continue}kt[Rt]=g[Rt],kt[Rt+1]=g[Rt+1]}Tt=An(this,qT,W3).call(this,kt,Tt);for(let Rt=et.length-6;Rt>=6;Rt-=6)for(let Ft=0;Ft<6;Ft+=2){if(isNaN(et[Rt+Ft])){kt[Tt]=kt[Tt+1]=NaN,Tt+=2;continue}kt[Tt]=et[Rt+Ft],kt[Tt+1]=et[Rt+Ft+1],Tt+=2}return An(this,WT,G3).call(this,kt,Tt),this.newFreeDrawOutline(kt,St,Ht(this,Io),Ht(this,mv),Ht(this,fv),Ht(this,pv))}};Io=new WeakMap,Bl=new WeakMap,fv=new WeakMap,pv=new WeakMap,bu=new WeakMap,xr=new WeakMap,J0=new WeakMap,Q0=new WeakMap,AS=new WeakMap,_S=new WeakMap,mv=new WeakMap,gv=new WeakMap,gm=new WeakMap,CS=new WeakMap,BT=new WeakMap,VT=new WeakMap,Z0=new WeakSet,Tx=function(){const g=Ht(this,xr).subarray(4,6),et=Ht(this,xr).subarray(16,18),[ot,ct,ut,dt]=Ht(this,Io);return[(Ht(this,J0)+(g[0]-et[0])/2-ot)/ut,(Ht(this,Q0)+(g[1]-et[1])/2-ct)/dt,(Ht(this,J0)+(et[0]-g[0])/2-ot)/ut,(Ht(this,Q0)+(et[1]-g[1])/2-ct)/dt]},zT=new WeakSet,V3=function(){const[g,et,ot,ct]=Ht(this,Io),[ut,dt,ft,St]=An(this,Z0,Tx).call(this);return`M${(Ht(this,xr)[2]-g)/ot} ${(Ht(this,xr)[3]-et)/ct} L${(Ht(this,xr)[4]-g)/ot} ${(Ht(this,xr)[5]-et)/ct} L${ut} ${dt} L${ft} ${St} L${(Ht(this,xr)[16]-g)/ot} ${(Ht(this,xr)[17]-et)/ct} L${(Ht(this,xr)[14]-g)/ot} ${(Ht(this,xr)[15]-et)/ct} Z`},HT=new WeakSet,z3=function(g){const et=Ht(this,Bl);g.push(`L${et[4]} ${et[5]} Z`)},UT=new WeakSet,H3=function(g){const[et,ot,ct,ut]=Ht(this,Io),dt=Ht(this,xr).subarray(4,6),ft=Ht(this,xr).subarray(16,18),[St,kt,Tt,jt]=An(this,Z0,Tx).call(this);g.push(`L${(dt[0]-et)/ct} ${(dt[1]-ot)/ut} L${St} ${kt} L${Tt} ${jt} L${(ft[0]-et)/ct} ${(ft[1]-ot)/ut}`)},GT=new WeakSet,U3=function(g){const et=Ht(this,xr),[ot,ct,ut,dt]=Ht(this,Io),[ft,St,kt,Tt]=An(this,Z0,Tx).call(this),jt=new Float32Array(36);return jt.set([NaN,NaN,NaN,NaN,(et[2]-ot)/ut,(et[3]-ct)/dt,NaN,NaN,NaN,NaN,(et[4]-ot)/ut,(et[5]-ct)/dt,NaN,NaN,NaN,NaN,ft,St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,(et[16]-ot)/ut,(et[17]-ct)/dt,NaN,NaN,NaN,NaN,(et[14]-ot)/ut,(et[15]-ct)/dt],0),this.newFreeDrawOutline(jt,g,Ht(this,Io),Ht(this,mv),Ht(this,fv),Ht(this,pv))},WT=new WeakSet,G3=function(g,et){const ot=Ht(this,Bl);return g.set([NaN,NaN,NaN,NaN,ot[4],ot[5]],et),et+=6},qT=new WeakSet,W3=function(g,et){const ot=Ht(this,xr).subarray(4,6),ct=Ht(this,xr).subarray(16,18),[ut,dt,ft,St]=Ht(this,Io),[kt,Tt,jt,Rt]=An(this,Z0,Tx).call(this);return g.set([NaN,NaN,NaN,NaN,(ot[0]-ut)/ft,(ot[1]-dt)/St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,jt,Rt,NaN,NaN,NaN,NaN,(ct[0]-ut)/ft,(ct[1]-dt)/St],et),et+=24},vn(Lu,CS,8),vn(Lu,BT,2),vn(Lu,VT,Ht(Lu,CS)+Ht(Lu,BT));let FreeDrawOutliner=Lu;var yv,ey,hp,RS,Do,PS,ns,KT,q3;class FreeDrawOutline extends Outline{constructor(et,ot,ct,ut,dt,ft){super();vn(this,KT);vn(this,yv,void 0);vn(this,ey,new Float32Array(4));vn(this,hp,void 0);vn(this,RS,void 0);vn(this,Do,void 0);vn(this,PS,void 0);vn(this,ns,void 0);xn(this,ns,et),xn(this,Do,ot),xn(this,yv,ct),xn(this,PS,ut),xn(this,hp,dt),xn(this,RS,ft),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],An(this,KT,q3).call(this,ft);const[St,kt,Tt,jt]=Ht(this,ey);for(let Rt=0,Ft=et.length;Rt<Ft;Rt+=2)et[Rt]=(et[Rt]-St)/Tt,et[Rt+1]=(et[Rt+1]-kt)/jt;for(let Rt=0,Ft=ot.length;Rt<Ft;Rt+=2)ot[Rt]=(ot[Rt]-St)/Tt,ot[Rt+1]=(ot[Rt+1]-kt)/jt}toSVGPath(){const et=[`M${Ht(this,ns)[4]} ${Ht(this,ns)[5]}`];for(let ot=6,ct=Ht(this,ns).length;ot<ct;ot+=6){if(isNaN(Ht(this,ns)[ot])){et.push(`L${Ht(this,ns)[ot+4]} ${Ht(this,ns)[ot+5]}`);continue}et.push(`C${Ht(this,ns)[ot]} ${Ht(this,ns)[ot+1]} ${Ht(this,ns)[ot+2]} ${Ht(this,ns)[ot+3]} ${Ht(this,ns)[ot+4]} ${Ht(this,ns)[ot+5]}`)}return et.push("Z"),et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=ct-et,St=ut-ot;let kt,Tt;switch(dt){case 0:kt=Outline._rescale(Ht(this,ns),et,ut,ft,-St),Tt=Outline._rescale(Ht(this,Do),et,ut,ft,-St);break;case 90:kt=Outline._rescaleAndSwap(Ht(this,ns),et,ot,ft,St),Tt=Outline._rescaleAndSwap(Ht(this,Do),et,ot,ft,St);break;case 180:kt=Outline._rescale(Ht(this,ns),ct,ot,-ft,St),Tt=Outline._rescale(Ht(this,Do),ct,ot,-ft,St);break;case 270:kt=Outline._rescaleAndSwap(Ht(this,ns),ct,ut,-ft,-St),Tt=Outline._rescaleAndSwap(Ht(this,Do),ct,ut,-ft,-St);break}return{outline:Array.from(kt),points:[Array.from(Tt)]}}get box(){return Ht(this,ey)}newOutliner(et,ot,ct,ut,dt,ft=0){return new FreeDrawOutliner(et,ot,ct,ut,dt,ft)}getNewOutline(et,ot){const[ct,ut,dt,ft]=Ht(this,ey),[St,kt,Tt,jt]=Ht(this,yv),Rt=dt*Tt,Ft=ft*jt,$t=ct*Tt+St,zt=ut*jt+kt,Kt=this.newOutliner({x:Ht(this,Do)[0]*Rt+$t,y:Ht(this,Do)[1]*Ft+zt},Ht(this,yv),Ht(this,PS),et,Ht(this,RS),ot??Ht(this,hp));for(let Bt=2;Bt<Ht(this,Do).length;Bt+=2)Kt.add({x:Ht(this,Do)[Bt]*Rt+$t,y:Ht(this,Do)[Bt+1]*Ft+zt});return Kt.getOutlines()}}yv=new WeakMap,ey=new WeakMap,hp=new WeakMap,RS=new WeakMap,Do=new WeakMap,PS=new WeakMap,ns=new WeakMap,KT=new WeakSet,q3=function(et){const ot=Ht(this,ns);let ct=ot[4],ut=ot[5];const dt=[ct,ut,ct,ut];let ft=ct,St=ut,kt=ct,Tt=ut;const jt=et?Math.max:Math.min,Rt=new Float32Array(4);for(let $t=6,zt=ot.length;$t<zt;$t+=6){const Kt=ot[$t+4],Bt=ot[$t+5];isNaN(ot[$t])?(Util$1.pointBoundingBox(Kt,Bt,dt),St>Bt?(ft=Kt,St=Bt):St===Bt&&(ft=jt(ft,Kt)),Tt<Bt?(kt=Kt,Tt=Bt):Tt===Bt&&(kt=jt(kt,Kt))):(Rt[0]=Rt[1]=1/0,Rt[2]=Rt[3]=-1/0,Util$1.bezierBoundingBox(ct,ut,...ot.slice($t,$t+6),Rt),Util$1.rectBoundingBox(Rt[0],Rt[1],Rt[2],Rt[3],dt),St>Rt[1]?(ft=Rt[0],St=Rt[1]):St===Rt[1]&&(ft=jt(ft,Rt[0])),Tt<Rt[3]?(kt=Rt[2],Tt=Rt[3]):Tt===Rt[3]&&(kt=jt(kt,Rt[2]))),ct=Kt,ut=Bt}const Ft=Ht(this,ey);Ft[0]=dt[0]-Ht(this,hp),Ft[1]=dt[1]-Ht(this,hp),Ft[2]=dt[2]-dt[0]+2*Ht(this,hp),Ft[3]=dt[3]-dt[1]+2*Ht(this,hp),this.firstPoint=[ft,St],this.lastPoint=[kt,Tt]};var NS,MS,OS,ym,Vl,YT,K3,vv,bw,XT,Y3,JT,X3,IS,AC;class HighlightOutliner{constructor(g,et=0,ot=0,ct=!0){vn(this,YT);vn(this,vv);vn(this,XT);vn(this,JT);vn(this,IS);vn(this,NS,void 0);vn(this,MS,void 0);vn(this,OS,void 0);vn(this,ym,[]);vn(this,Vl,[]);const ut=[1/0,1/0,-1/0,-1/0],ft=10**-4;for(const{x:Kt,y:Bt,width:Ut,height:Jt}of g){const en=Math.floor((Kt-et)/ft)*ft,tn=Math.ceil((Kt+Ut+et)/ft)*ft,nn=Math.floor((Bt-et)/ft)*ft,rn=Math.ceil((Bt+Jt+et)/ft)*ft,on=[en,nn,rn,!0],dn=[tn,nn,rn,!1];Ht(this,ym).push(on,dn),Util$1.rectBoundingBox(en,nn,tn,rn,ut)}const St=ut[2]-ut[0]+2*ot,kt=ut[3]-ut[1]+2*ot,Tt=ut[0]-ot,jt=ut[1]-ot;let Rt=ct?-1/0:1/0,Ft=1/0;const $t=Ht(this,ym).at(ct?-1:-2),zt=[$t[0],$t[2]];for(const Kt of Ht(this,ym)){const[Bt,Ut,Jt,en]=Kt;!en&&ct?Ut<Ft?(Ft=Ut,Rt=Bt):Ut===Ft&&(Rt=Math.max(Rt,Bt)):en&&!ct&&(Ut<Ft?(Ft=Ut,Rt=Bt):Ut===Ft&&(Rt=Math.min(Rt,Bt))),Kt[0]=(Bt-Tt)/St,Kt[1]=(Ut-jt)/kt,Kt[2]=(Jt-jt)/kt}xn(this,NS,new Float32Array([Tt,jt,St,kt])),xn(this,MS,[Rt,Ft]),xn(this,OS,zt)}getOutlines(){Ht(this,ym).sort((et,ot)=>et[0]-ot[0]||et[1]-ot[1]||et[2]-ot[2]);const g=[];for(const et of Ht(this,ym))et[3]?(g.push(...An(this,IS,AC).call(this,et)),An(this,XT,Y3).call(this,et)):(An(this,JT,X3).call(this,et),g.push(...An(this,IS,AC).call(this,et)));return An(this,YT,K3).call(this,g)}}NS=new WeakMap,MS=new WeakMap,OS=new WeakMap,ym=new WeakMap,Vl=new WeakMap,YT=new WeakSet,K3=function(g){const et=[],ot=new Set;for(const dt of g){const[ft,St,kt]=dt;et.push([ft,St,dt],[ft,kt,dt])}et.sort((dt,ft)=>dt[1]-ft[1]||dt[0]-ft[0]);for(let dt=0,ft=et.length;dt<ft;dt+=2){const St=et[dt][2],kt=et[dt+1][2];St.push(kt),kt.push(St),ot.add(St),ot.add(kt)}const ct=[];let ut;for(;ot.size>0;){const dt=ot.values().next().value;let[ft,St,kt,Tt,jt]=dt;ot.delete(dt);let Rt=ft,Ft=St;for(ut=[ft,kt],ct.push(ut);;){let $t;if(ot.has(Tt))$t=Tt;else if(ot.has(jt))$t=jt;else break;ot.delete($t),[ft,St,kt,Tt,jt]=$t,Rt!==ft&&(ut.push(Rt,Ft,ft,Ft===St?St:kt),Rt=ft),Ft=Ft===St?kt:St}ut.push(Rt,Ft)}return new HighlightOutline(ct,Ht(this,NS),Ht(this,MS),Ht(this,OS))},vv=new WeakSet,bw=function(g){const et=Ht(this,Vl);let ot=0,ct=et.length-1;for(;ot<=ct;){const ut=ot+ct>>1,dt=et[ut][0];if(dt===g)return ut;dt<g?ot=ut+1:ct=ut-1}return ct+1},XT=new WeakSet,Y3=function([,g,et]){const ot=An(this,vv,bw).call(this,g);Ht(this,Vl).splice(ot,0,[g,et])},JT=new WeakSet,X3=function([,g,et]){const ot=An(this,vv,bw).call(this,g);for(let ct=ot;ct<Ht(this,Vl).length;ct++){const[ut,dt]=Ht(this,Vl)[ct];if(ut!==g)break;if(ut===g&&dt===et){Ht(this,Vl).splice(ct,1);return}}for(let ct=ot-1;ct>=0;ct--){const[ut,dt]=Ht(this,Vl)[ct];if(ut!==g)break;if(ut===g&&dt===et){Ht(this,Vl).splice(ct,1);return}}},IS=new WeakSet,AC=function(g){const[et,ot,ct]=g,ut=[[et,ot,ct]],dt=An(this,vv,bw).call(this,ct);for(let ft=0;ft<dt;ft++){const[St,kt]=Ht(this,Vl)[ft];for(let Tt=0,jt=ut.length;Tt<jt;Tt++){const[,Rt,Ft]=ut[Tt];if(!(kt<=Rt||Ft<=St)){if(Rt>=St){if(Ft>kt)ut[Tt][1]=kt;else{if(jt===1)return[];ut.splice(Tt,1),Tt--,jt--}continue}ut[Tt][2]=St,Ft>kt&&ut.push([et,kt,Ft])}}}return ut};var DS,xv;class HighlightOutline extends Outline{constructor(et,ot,ct,ut){super();vn(this,DS,void 0);vn(this,xv,void 0);xn(this,xv,et),xn(this,DS,ot),this.firstPoint=ct,this.lastPoint=ut}toSVGPath(){const et=[];for(const ot of Ht(this,xv)){let[ct,ut]=ot;et.push(`M${ct} ${ut}`);for(let dt=2;dt<ot.length;dt+=2){const ft=ot[dt],St=ot[dt+1];ft===ct?(et.push(`V${St}`),ut=St):St===ut&&(et.push(`H${ft}`),ct=ft)}et.push("Z")}return et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=[],St=ct-et,kt=ut-ot;for(const Tt of Ht(this,xv)){const jt=new Array(Tt.length);for(let Rt=0;Rt<Tt.length;Rt+=2)jt[Rt]=et+Tt[Rt]*St,jt[Rt+1]=ut-Tt[Rt+1]*kt;ft.push(jt)}return ft}get box(){return Ht(this,DS)}get classNamesForOutlining(){return["highlightOutline"]}}DS=new WeakMap,xv=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeHighlightOutline(g,et,ot,ct,ut,dt)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(g,et,ot,ct,ut,dt=0){return new FreeHighlightOutliner(g,et,ot,ct,ut,dt)}}var bv,LS,dp,ty,jS,yo,FS,$S,ny,Lo,jo,Ms,Ev,Sv,Gs,wv,$a,BS,VS,_C,kv,Ew,QT,J3,ZT,Q3,eA,Z3,zS,CC,fp,Um,vm,By,tA,e4,Tv,Sw,Av,ww,nA,t4,rA,n4,iA,r4,sA,i4,oA,s4;const Er=class Er extends AnnotationEditor{constructor(et){super({...et,name:"highlightEditor"});vn(this,VS);vn(this,kv);vn(this,QT);vn(this,ZT);vn(this,eA);vn(this,zS);vn(this,fp);vn(this,tA);vn(this,Tv);vn(this,Av);vn(this,nA);vn(this,rA);vn(this,oA);vn(this,bv,null);vn(this,LS,0);vn(this,dp,void 0);vn(this,ty,null);vn(this,jS,null);vn(this,yo,null);vn(this,FS,null);vn(this,$S,0);vn(this,ny,null);vn(this,Lo,null);vn(this,jo,null);vn(this,Ms,!1);vn(this,Ev,null);vn(this,Sv,null);vn(this,Gs,null);vn(this,wv,"");vn(this,$a,void 0);vn(this,BS,"");this.color=et.color||Er._defaultColor,xn(this,$a,et.thickness||Er._defaultThickness),this.opacity=et.opacity||Er._defaultOpacity,xn(this,dp,et.boxes||null),xn(this,BS,et.methodOfCreation||""),xn(this,wv,et.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",et.highlightId>-1?(xn(this,Ms,!0),An(this,kv,Ew).call(this,et),An(this,fp,Um).call(this)):Ht(this,dp)&&(xn(this,bv,et.anchorNode),xn(this,LS,et.anchorOffset),xn(this,FS,et.focusNode),xn(this,$S,et.focusOffset),An(this,VS,_C).call(this),An(this,fp,Um).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const et=Er.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],et._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],et._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],et._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],et._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Ht(this,Ms)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Ht(this,$a),methodOfCreation:Ht(this,BS)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(et){return{numberOfColors:et.get("color").size}}static initialize(et,ot){var ct;AnnotationEditor.initialize(et,ot),Er._defaultColor||(Er._defaultColor=((ct=ot.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Er._defaultColor=ot;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Er._defaultThickness=ot;break}}translateInPage(et,ot){}get toolbarPosition(){return Ht(this,Sv)}get commentButtonPosition(){return Ht(this,Ev)}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:An(this,QT,J3).call(this,ot);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:An(this,ZT,Q3).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Er._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Er._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Er._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Ht(this,$a)||Er._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,Ht(this,Ms)]]}onUpdatedColor(){var et,ot;(et=this.parent)==null||et.drawLayer.updateProperties(Ht(this,jo),{root:{fill:this.color,"fill-opacity":this.opacity}}),(ot=Ht(this,jS))==null||ot.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",xn(this,jS,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(An(this,Av,ww).call(this))}getBaseTranslation(){return[0,0]}getRect(et,ot){return super.getRect(et,ot,An(this,Av,ww).call(this))}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),et&&this.div.focus()}remove(){An(this,zS,CC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(An(this,fp,Um).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?An(this,zS,CC).call(this):et&&(An(this,fp,Um).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),this.show(this._isVisible),ot&&this.select()}rotate(et){var ut,dt,ft;const{drawLayer:ot}=this.parent;let ct;Ht(this,Ms)?(et=(et-this.rotation+360)%360,ct=An(ut=Er,vm,By).call(ut,Ht(this,Lo).box,et)):ct=An(dt=Er,vm,By).call(dt,[this.x,this.y,this.width,this.height],et),ot.updateProperties(Ht(this,jo),{bbox:ct,root:{"data-main-rotation":et}}),ot.updateProperties(Ht(this,Gs),{bbox:An(ft=Er,vm,By).call(ft,Ht(this,yo).box,et),root:{"data-main-rotation":et}})}render(){if(this.div)return this.div;const et=super.render();Ht(this,wv)&&(et.setAttribute("aria-label",Ht(this,wv)),et.setAttribute("role","mark")),Ht(this,Ms)?et.classList.add("free"):this.div.addEventListener("keydown",An(this,tA,e4).bind(this),{signal:this._uiManager._signal});const ot=xn(this,ny,document.createElement("div"));return et.append(ot),ot.setAttribute("aria-hidden","true"),ot.className="internal",ot.style.clipPath=Ht(this,ty),this.setDims(this.width,this.height),bindEvents(this,Ht(this,ny),["pointerover","pointerleave"]),this.enableEditing(),et}pointerover(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Ht(this,Gs),{rootClass:{hovered:!0}})}pointerleave(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Ht(this,Gs),{rootClass:{hovered:!1}})}_moveCaret(et){switch(this.parent.unselect(this),et){case 0:case 2:An(this,Tv,Sw).call(this,!0);break;case 1:case 3:An(this,Tv,Sw).call(this,!1);break}}select(){var et;super.select(),Ht(this,Gs)&&((et=this.parent)==null||et.drawLayer.updateProperties(Ht(this,Gs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var et;super.unselect(),Ht(this,Gs)&&((et=this.parent)==null||et.drawLayer.updateProperties(Ht(this,Gs),{rootClass:{selected:!1}}),Ht(this,Ms)||An(this,Tv,Sw).call(this,!1))}get _mustFixPosition(){return!Ht(this,Ms)}show(et=this._isVisible){super.show(et),this.parent&&(this.parent.drawLayer.updateProperties(Ht(this,jo),{rootClass:{hidden:!et}}),this.parent.drawLayer.updateProperties(Ht(this,Gs),{rootClass:{hidden:!et}}))}static startHighlighting(et,ot,{target:ct,x:ut,y:dt}){const{x:ft,y:St,width:kt,height:Tt}=ct.getBoundingClientRect(),jt=new AbortController,Rt=et.combinedSignal(jt),Ft=$t=>{jt.abort(),An(this,sA,i4).call(this,et,$t)};window.addEventListener("blur",Ft,{signal:Rt}),window.addEventListener("pointerup",Ft,{signal:Rt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:Rt}),window.addEventListener("contextmenu",noContextMenu,{signal:Rt}),ct.addEventListener("pointermove",An(this,iA,r4).bind(this,et),{signal:Rt}),this._freeHighlight=new FreeHighlightOutliner({x:ut,y:dt},[ft,St,kt,Tt],et.scale,this._defaultThickness/2,ot,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=et.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(et,ot,ct){var zt,Kt,Bt,Ut;let ut=null;if(et instanceof HighlightAnnotationElement){const{data:{quadPoints:Jt,rect:en,rotation:tn,id:nn,color:rn,opacity:on,popupRef:dn,richText:cn,contentsObj:fn,creationDate:mn,modificationDate:En},parent:{page:{pageNumber:Sn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(rn),opacity:on,quadPoints:Jt,boxes:null,pageIndex:Sn-1,rect:en.slice(0),rotation:tn,annotationElementId:nn,id:nn,deleted:!1,popupRef:dn,richText:cn,comment:(fn==null?void 0:fn.str)||null,creationDate:mn,modificationDate:En}}else if(et instanceof InkAnnotationElement){const{data:{inkLists:Jt,rect:en,rotation:tn,id:nn,color:rn,borderStyle:{rawWidth:on},popupRef:dn,richText:cn,contentsObj:fn,creationDate:mn,modificationDate:En},parent:{page:{pageNumber:Sn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(rn),thickness:on,inkLists:Jt,boxes:null,pageIndex:Sn-1,rect:en.slice(0),rotation:tn,annotationElementId:nn,id:nn,deleted:!1,popupRef:dn,richText:cn,comment:(fn==null?void 0:fn.str)||null,creationDate:mn,modificationDate:En}}const{color:dt,quadPoints:ft,inkLists:St,opacity:kt}=et,Tt=await super.deserialize(et,ot,ct);Tt.color=Util$1.makeHexColor(...dt),Tt.opacity=kt||1,St&&xn(Tt,$a,et.thickness),Tt._initialData=ut,et.comment&&Tt.setCommentData(et);const[jt,Rt]=Tt.pageDimensions,[Ft,$t]=Tt.pageTranslation;if(ft){const Jt=xn(Tt,dp,[]);for(let en=0;en<ft.length;en+=8)Jt.push({x:(ft[en]-Ft)/jt,y:1-(ft[en+1]-$t)/Rt,width:(ft[en+2]-ft[en])/jt,height:(ft[en+1]-ft[en+5])/Rt});An(zt=Tt,VS,_C).call(zt),An(Kt=Tt,fp,Um).call(Kt),Tt.rotate(Tt.rotation)}else if(St){xn(Tt,Ms,!0);const Jt=St[0],en={x:Jt[0]-Ft,y:Rt-(Jt[1]-$t)},tn=new FreeHighlightOutliner(en,[0,0,jt,Rt],1,Ht(Tt,$a)/2,!0,.001);for(let on=0,dn=Jt.length;on<dn;on+=2)en.x=Jt[on]-Ft,en.y=Rt-(Jt[on+1]-$t),tn.add(en);const{id:nn,clipPathId:rn}=ot.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Tt.color,"fill-opacity":Tt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:tn.toSVGPath()}},!0,!0);An(Bt=Tt,kv,Ew).call(Bt,{highlightOutlines:tn.getOutlines(),highlightId:nn,clipPathId:rn}),An(Ut=Tt,fp,Um).call(Ut),Tt.rotate(Tt.parentRotation)}return Tt}serialize(et=!1){if(this.isEmpty()||et)return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ct=super.serialize(et);return Object.assign(ct,{color:ot,opacity:this.opacity,thickness:Ht(this,$a),quadPoints:An(this,nA,t4).call(this),outlines:An(this,rA,n4).call(this,ct.rect)}),this.addComment(ct),this.annotationElementId&&!An(this,oA,s4).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};bv=new WeakMap,LS=new WeakMap,dp=new WeakMap,ty=new WeakMap,jS=new WeakMap,yo=new WeakMap,FS=new WeakMap,$S=new WeakMap,ny=new WeakMap,Lo=new WeakMap,jo=new WeakMap,Ms=new WeakMap,Ev=new WeakMap,Sv=new WeakMap,Gs=new WeakMap,wv=new WeakMap,$a=new WeakMap,BS=new WeakMap,VS=new WeakSet,_C=function(){const et=new HighlightOutliner(Ht(this,dp),.001);xn(this,Lo,et.getOutlines()),[this.x,this.y,this.width,this.height]=Ht(this,Lo).box;const ot=new HighlightOutliner(Ht(this,dp),.0025,.001,this._uiManager.direction==="ltr");xn(this,yo,ot.getOutlines());const{firstPoint:ct}=Ht(this,Lo);xn(this,Ev,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height]);const{lastPoint:ut}=Ht(this,yo);xn(this,Sv,[(ut[0]-this.x)/this.width,(ut[1]-this.y)/this.height])},kv=new WeakSet,Ew=function({highlightOutlines:et,highlightId:ot,clipPathId:ct}){var Rt,Ft;xn(this,Lo,et);const ut=1.5;if(xn(this,yo,et.getNewOutline(Ht(this,$a)/2+ut,.0025)),ot>=0)xn(this,jo,ot),xn(this,ty,ct),this.parent.drawLayer.finalizeDraw(ot,{bbox:et.box,path:{d:et.toSVGPath()}}),xn(this,Gs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Ht(this,yo).box,path:{d:Ht(this,yo).toSVGPath()}},!0));else if(this.parent){const $t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Ht(this,jo),{bbox:An(Rt=Er,vm,By).call(Rt,Ht(this,Lo).box,($t-this.rotation+360)%360),path:{d:et.toSVGPath()}}),this.parent.drawLayer.updateProperties(Ht(this,Gs),{bbox:An(Ft=Er,vm,By).call(Ft,Ht(this,yo).box,$t),path:{d:Ht(this,yo).toSVGPath()}})}const[dt,ft,St,kt]=et.box;switch(this.rotation){case 0:this.x=dt,this.y=ft,this.width=St,this.height=kt;break;case 90:{const[$t,zt]=this.parentDimensions;this.x=ft,this.y=1-dt,this.width=St*zt/$t,this.height=kt*$t/zt;break}case 180:this.x=1-dt,this.y=1-ft,this.width=St,this.height=kt;break;case 270:{const[$t,zt]=this.parentDimensions;this.x=1-ft,this.y=dt,this.width=St*zt/$t,this.height=kt*$t/zt;break}}const{firstPoint:Tt}=et;xn(this,Ev,[(Tt[0]-dt)/St,(Tt[1]-ft)/kt]);const{lastPoint:jt}=Ht(this,yo);xn(this,Sv,[(jt[0]-dt)/St,(jt[1]-ft)/kt])},QT=new WeakSet,J3=function(et){const ot=(dt,ft)=>{this.color=dt,this.opacity=ft,this.onUpdatedColor()},ct=this.color,ut=this.opacity;this.addCommands({cmd:ot.bind(this,et,Er._defaultOpacity),undo:ot.bind(this,ct,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(et)},!0)},ZT=new WeakSet,Q3=function(et){const ot=Ht(this,$a),ct=ut=>{xn(this,$a,ut),An(this,eA,Z3).call(this,ut)};this.addCommands({cmd:ct.bind(this,et),undo:ct.bind(this,ot),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:et},!0)},eA=new WeakSet,Z3=function(et){Ht(this,Ms)&&(An(this,kv,Ew).call(this,{highlightOutlines:Ht(this,Lo).getNewOutline(et/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},zS=new WeakSet,CC=function(){Ht(this,jo)===null||!this.parent||(this.parent.drawLayer.remove(Ht(this,jo)),xn(this,jo,null),this.parent.drawLayer.remove(Ht(this,Gs)),xn(this,Gs,null))},fp=new WeakSet,Um=function(et=this.parent){Ht(this,jo)===null&&({id:cs(this,jo)._,clipPathId:cs(this,ty)._}=et.drawLayer.draw({bbox:Ht(this,Lo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Ht(this,Ms)},path:{d:Ht(this,Lo).toSVGPath()}},!1,!0),xn(this,Gs,et.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Ht(this,Ms)},bbox:Ht(this,yo).box,path:{d:Ht(this,yo).toSVGPath()}},Ht(this,Ms))),Ht(this,ny)&&(Ht(this,ny).style.clipPath=Ht(this,ty)))},vm=new WeakSet,By=function([et,ot,ct,ut],dt){switch(dt){case 90:return[1-ot-ut,et,ut,ct];case 180:return[1-et-ct,1-ot-ut,ct,ut];case 270:return[ot,1-et-ct,ut,ct]}return[et,ot,ct,ut]},tA=new WeakSet,e4=function(et){Er._keyboardManager.exec(this,et)},Tv=new WeakSet,Sw=function(et){if(!Ht(this,bv))return;const ot=window.getSelection();et?ot.setPosition(Ht(this,bv),Ht(this,LS)):ot.setPosition(Ht(this,FS),Ht(this,$S))},Av=new WeakSet,ww=function(){return Ht(this,Ms)?this.rotation:0},nA=new WeakSet,t4=function(){if(Ht(this,Ms))return null;const[et,ot]=this.pageDimensions,[ct,ut]=this.pageTranslation,dt=Ht(this,dp),ft=new Float32Array(dt.length*8);let St=0;for(const{x:kt,y:Tt,width:jt,height:Rt}of dt){const Ft=kt*et+ct,$t=(1-Tt)*ot+ut;ft[St]=ft[St+4]=Ft,ft[St+1]=ft[St+3]=$t,ft[St+2]=ft[St+6]=Ft+jt*et,ft[St+5]=ft[St+7]=$t-Rt*ot,St+=8}return ft},rA=new WeakSet,n4=function(et){return Ht(this,Lo).serialize(et,An(this,Av,ww).call(this))},iA=new WeakSet,r4=function(et,ot){this._freeHighlight.add(ot)&&et.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},sA=new WeakSet,i4=function(et,ot){this._freeHighlight.isEmpty()?et.drawLayer.remove(this._freeHighlightId):et.createAndAddNewEditor(ot,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},oA=new WeakSet,s4=function(et){const{color:ot}=this._initialData;return this.hasEditedComment||et.color.some((ct,ut)=>ct!==ot[ut])},vn(Er,vm),vn(Er,iA),vn(Er,sA),qn(Er,"_defaultColor",null),qn(Er,"_defaultOpacity",1),qn(Er,"_defaultThickness",12),qn(Er,"_type","highlight"),qn(Er,"_editorType",AnnotationEditorType.HIGHLIGHT),qn(Er,"_freeHighlightId",-1),qn(Er,"_freeHighlight",null),qn(Er,"_freeHighlightClipId","");let HighlightEditor=Er;var ry;class DrawingOptions{constructor(){vn(this,ry,Object.create(null))}updateProperty(g,et){this[g]=et,this.updateSVGProperty(g,et)}updateProperties(g){if(g)for(const[et,ot]of Object.entries(g))et.startsWith("_")||this.updateProperty(et,ot)}updateSVGProperty(g,et){Ht(this,ry)[g]=et}toSVGProperties(){const g=Ht(this,ry);return xn(this,ry,Object.create(null)),{root:g}}reset(){xn(this,ry,Object.create(null))}updateAll(g=this){this.updateProperties(g)}clone(){unreachable("Not implemented")}}ry=new WeakMap;var Fo,_v,bs,iy,sy,xm,bm,Em,oy,HS,RC,US,PC,GS,NC,ay,Ax,aA,o4,Cv,kw,ly,_x,Sm,Vy;const nr=class nr extends AnnotationEditor{constructor(et){super(et);vn(this,HS);vn(this,US);vn(this,GS);vn(this,ay);vn(this,aA);vn(this,Cv);vn(this,ly);vn(this,Sm);vn(this,Fo,null);vn(this,_v,void 0);qn(this,"_colorPicker",null);qn(this,"_drawId",null);xn(this,_v,et.mustBeCommitted||!1),this._addOutlines(et)}onUpdatedColor(){var et;(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_addOutlines(et){et.drawOutlines&&(An(this,HS,RC).call(this,et),An(this,ay,Ax).call(this))}static _mergeSVGProperties(et,ot){const ct=new Set(Object.keys(et));for(const[ut,dt]of Object.entries(ot))ct.has(ut)?Object.assign(et[ut],dt):et[ut]=dt;return et}static getDefaultDrawingOptions(et){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(et,ot){const ct=this.typesMap.get(et);ct&&this._defaultDrawingOptions.updateProperty(ct,ot),this._currentParent&&(Ht(nr,bs).updateProperty(ct,ot),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(et,ot){const ct=this.constructor.typesMap.get(et);ct&&this._updateProperty(et,ct,ot)}static get defaultPropertiesToUpdate(){const et=[],ot=this._defaultDrawingOptions;for(const[ct,ut]of this.typesMap)et.push([ct,ot[ut]]);return et}get propertiesToUpdate(){const et=[],{_drawingOptions:ot}=this;for(const[ct,ut]of this.constructor.typesMap)et.push([ct,ot[ut]]);return et}_updateProperty(et,ot,ct){const ut=this._drawingOptions,dt=ut[ot],ft=St=>{var Tt;ut.updateProperty(ot,St);const kt=Ht(this,Fo).updateProperty(ot,St);kt&&An(this,ly,_x).call(this,kt),(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,ut.toSVGProperties()),et===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:ft.bind(this,ct),undo:ft.bind(this,dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:et,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,nr._mergeSVGProperties(Ht(this,Fo).getPathResizingSVGProperties(An(this,Cv,kw).call(this)),{bbox:An(this,Sm,Vy).call(this)}))}_onResized(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,nr._mergeSVGProperties(Ht(this,Fo).getPathResizedSVGProperties(An(this,Cv,kw).call(this)),{bbox:An(this,Sm,Vy).call(this)}))}_onTranslating(et,ot){var ct;(ct=this.parent)==null||ct.drawLayer.updateProperties(this._drawId,{bbox:An(this,Sm,Vy).call(this)})}_onTranslated(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,nr._mergeSVGProperties(Ht(this,Fo).getPathTranslatedSVGProperties(An(this,Cv,kw).call(this),this.parentDimensions),{bbox:An(this,Sm,Vy).call(this)}))}_onStartDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Ht(this,_v)&&(xn(this,_v,!1),this.commit(),this.parent.setSelected(this),et&&this.isOnScreen&&this.div.focus())}remove(){An(this,GS,NC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(An(this,ay,Ax).call(this),An(this,ly,_x).call(this,Ht(this,Fo).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?(this._uiManager.removeShouldRescale(this),An(this,GS,NC).call(this)):et&&(this._uiManager.addShouldRescale(this),An(this,ay,Ax).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),ot&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,nr._mergeSVGProperties({bbox:An(this,Sm,Vy).call(this)},Ht(this,Fo).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&An(this,ly,_x).call(this,Ht(this,Fo).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let et,ot;this._isCopy&&(et=this.x,ot=this.y);const ct=super.render();ct.classList.add("draw");const ut=document.createElement("div");return ct.append(ut),ut.setAttribute("aria-hidden","true"),ut.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(et,ot),ct}static createDrawerInstance(et,ot,ct,ut,dt){unreachable("Not implemented")}static startDrawing(et,ot,ct,ut){var Kt;const{target:dt,offsetX:ft,offsetY:St,pointerId:kt,pointerType:Tt}=ut;if(Ht(nr,bm)&&Ht(nr,bm)!==Tt)return;const{viewport:{rotation:jt}}=et,{width:Rt,height:Ft}=dt.getBoundingClientRect(),$t=xn(nr,iy,new AbortController),zt=et.combinedSignal($t);if(Ht(nr,xm)||xn(nr,xm,kt),Ht(nr,bm)??xn(nr,bm,Tt),window.addEventListener("pointerup",Bt=>{var Ut;Ht(nr,xm)===Bt.pointerId?this._endDraw(Bt):(Ut=Ht(nr,Em))==null||Ut.delete(Bt.pointerId)},{signal:zt}),window.addEventListener("pointercancel",Bt=>{var Ut;Ht(nr,xm)===Bt.pointerId?this._currentParent.endDrawingSession():(Ut=Ht(nr,Em))==null||Ut.delete(Bt.pointerId)},{signal:zt}),window.addEventListener("pointerdown",Bt=>{Ht(nr,bm)===Bt.pointerType&&((Ht(nr,Em)||xn(nr,Em,new Set)).add(Bt.pointerId),Ht(nr,bs).isCancellable()&&(Ht(nr,bs).removeLastElement(),Ht(nr,bs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:zt}),window.addEventListener("contextmenu",noContextMenu,{signal:zt}),dt.addEventListener("pointermove",this._drawMove.bind(this),{signal:zt}),dt.addEventListener("touchmove",Bt=>{Bt.timeStamp===Ht(nr,oy)&&stopEvent(Bt)},{signal:zt}),et.toggleDrawing(),(Kt=ot._editorUndoBar)==null||Kt.hide(),Ht(nr,bs)){et.drawLayer.updateProperties(this._currentDrawId,Ht(nr,bs).startNew(ft,St,Rt,Ft,jt));return}ot.updateUIForDefaultProperties(this),xn(nr,bs,this.createDrawerInstance(ft,St,Rt,Ft,jt)),xn(nr,sy,this.getDefaultDrawingOptions()),this._currentParent=et,{id:this._currentDrawId}=et.drawLayer.draw(this._mergeSVGProperties(Ht(nr,sy).toSVGProperties(),Ht(nr,bs).defaultSVGProperties),!0,!1)}static _drawMove(et){var dt;if(xn(nr,oy,-1),!Ht(nr,bs))return;const{offsetX:ot,offsetY:ct,pointerId:ut}=et;if(Ht(nr,xm)===ut){if(((dt=Ht(nr,Em))==null?void 0:dt.size)>=1){this._endDraw(et);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ht(nr,bs).add(ot,ct)),xn(nr,oy,et.timeStamp),stopEvent(et)}}static _cleanup(et){et&&(this._currentDrawId=-1,this._currentParent=null,xn(nr,bs,null),xn(nr,sy,null),xn(nr,bm,null),xn(nr,oy,NaN)),Ht(nr,iy)&&(Ht(nr,iy).abort(),xn(nr,iy,null),xn(nr,xm,NaN),xn(nr,Em,null))}static _endDraw(et){const ot=this._currentParent;if(ot){if(ot.toggleDrawing(!0),this._cleanup(!1),(et==null?void 0:et.target)===ot.div&&ot.drawLayer.updateProperties(this._currentDrawId,Ht(nr,bs).end(et.offsetX,et.offsetY)),this.supportMultipleDrawings){const ct=Ht(nr,bs),ut=this._currentDrawId,dt=ct.getLastElement();ot.addCommands({cmd:()=>{ot.drawLayer.updateProperties(ut,ct.setLastElement(dt))},undo:()=>{ot.drawLayer.updateProperties(ut,ct.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(et){const ot=this._currentParent;if(!ot)return null;if(ot.toggleDrawing(!0),ot.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!Ht(nr,bs).isEmpty()){const{pageDimensions:[ct,ut],scale:dt}=ot,ft=ot.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ht(nr,bs).getOutlines(ct*dt,ut*dt,dt,this._INNER_MARGIN),drawingOptions:Ht(nr,sy),mustBeCommitted:!et});return this._cleanup(!0),ft}return ot.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(et){}static deserializeDraw(et,ot,ct,ut,dt,ft){unreachable("Not implemented")}static async deserialize(et,ot,ct){var jt,Rt;const{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}=ot.viewport,kt=this.deserializeDraw(ft,St,ut,dt,this._INNER_MARGIN,et),Tt=await super.deserialize(et,ot,ct);return Tt.createDrawingOptions(et),An(jt=Tt,HS,RC).call(jt,{drawOutlines:kt}),An(Rt=Tt,ay,Ax).call(Rt),Tt.onScaleChanging(),Tt.rotate(),Tt}serializeDraw(et){const[ot,ct]=this.pageTranslation,[ut,dt]=this.pageDimensions;return Ht(this,Fo).serialize([ot,ct,ut,dt],et)}renderAnnotationElement(et){return et.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Fo=new WeakMap,_v=new WeakMap,bs=new WeakMap,iy=new WeakMap,sy=new WeakMap,xm=new WeakMap,bm=new WeakMap,Em=new WeakMap,oy=new WeakMap,HS=new WeakSet,RC=function({drawOutlines:et,drawId:ot,drawingOptions:ct}){xn(this,Fo,et),this._drawingOptions||(this._drawingOptions=ct),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),ot>=0?(this._drawId=ot,this.parent.drawLayer.finalizeDraw(ot,et.defaultProperties)):this._drawId=An(this,US,PC).call(this,et,this.parent),An(this,ly,_x).call(this,et.box)},US=new WeakSet,PC=function(et,ot){const{id:ct}=ot.drawLayer.draw(nr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),et.defaultSVGProperties),!1,!1);return ct},GS=new WeakSet,NC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ay=new WeakSet,Ax=function(et=this.parent){if(!(this._drawId!==null&&this.parent===et)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,et.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=An(this,US,PC).call(this,Ht(this,Fo),et)}},aA=new WeakSet,o4=function([et,ot,ct,ut]){const{parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[ot,1-et,ct*(ft/dt),ut*(dt/ft)];case 180:return[1-et,1-ot,ct,ut];case 270:return[1-ot,et,ct*(ft/dt),ut*(dt/ft)];default:return[et,ot,ct,ut]}},Cv=new WeakSet,kw=function(){const{x:et,y:ot,width:ct,height:ut,parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[1-ot,et,ct*(dt/ft),ut*(ft/dt)];case 180:return[1-et,1-ot,ct,ut];case 270:return[ot,1-et,ct*(dt/ft),ut*(ft/dt)];default:return[et,ot,ct,ut]}},ly=new WeakSet,_x=function(et){[this.x,this.y,this.width,this.height]=An(this,aA,o4).call(this,et),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Sm=new WeakSet,Vy=function(){const{x:et,y:ot,width:ct,height:ut,rotation:dt,parentRotation:ft,parentDimensions:[St,kt]}=this;switch((dt*4+ft)/90){case 1:return[1-ot-ut,et,ut,ct];case 2:return[1-et-ct,1-ot-ut,ct,ut];case 3:return[ot,1-et-ct,ut,ct];case 4:return[et,ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 5:return[1-ot,et,ct*(St/kt),ut*(kt/St)];case 6:return[1-et-ut*(kt/St),1-ot,ut*(kt/St),ct*(St/kt)];case 7:return[ot-ct*(St/kt),1-et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 8:return[et-ct,ot-ut,ct,ut];case 9:return[1-ot,et-ct,ut,ct];case 10:return[1-et,1-ot,ct,ut];case 11:return[ot-ut,1-et,ut,ct];case 12:return[et-ut*(kt/St),ot,ut*(kt/St),ct*(St/kt)];case 13:return[1-ot-ct*(St/kt),et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 14:return[1-et,1-ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 15:return[ot,1-et,ct*(St/kt),ut*(kt/St)];default:return[et,ot,ct,ut]}},qn(nr,"_currentDrawId",-1),qn(nr,"_currentParent",null),vn(nr,bs,null),vn(nr,iy,null),vn(nr,sy,null),vn(nr,xm,NaN),vn(nr,bm,null),vn(nr,Em,null),vn(nr,oy,NaN),qn(nr,"_INNER_MARGIN",3);let DrawingEditor=nr;var Eu,Es,Ss,cy,Rv,Ys,Os,yl,uy,hy,dy,Pv,Tw;class InkDrawOutliner{constructor(g,et,ot,ct,ut,dt){vn(this,Pv);vn(this,Eu,new Float64Array(6));vn(this,Es,void 0);vn(this,Ss,void 0);vn(this,cy,void 0);vn(this,Rv,void 0);vn(this,Ys,void 0);vn(this,Os,"");vn(this,yl,0);vn(this,uy,new InkDrawOutline);vn(this,hy,void 0);vn(this,dy,void 0);xn(this,hy,ot),xn(this,dy,ct),xn(this,cy,ut),xn(this,Rv,dt),[g,et]=An(this,Pv,Tw).call(this,g,et);const ft=xn(this,Es,[NaN,NaN,NaN,NaN,g,et]);xn(this,Ys,[g,et]),xn(this,Ss,[{line:ft,points:Ht(this,Ys)}]),Ht(this,Eu).set(ft,0)}updateProperty(g,et){g==="stroke-width"&&xn(this,Rv,et)}isEmpty(){return!Ht(this,Ss)||Ht(this,Ss).length===0}isCancellable(){return Ht(this,Ys).length<=10}add(g,et){[g,et]=An(this,Pv,Tw).call(this,g,et);const[ot,ct,ut,dt]=Ht(this,Eu).subarray(2,6),ft=g-ut,St=et-dt;return Math.hypot(Ht(this,hy)*ft,Ht(this,dy)*St)<=2?null:(Ht(this,Ys).push(g,et),isNaN(ot)?(Ht(this,Eu).set([ut,dt,g,et],2),Ht(this,Es).push(NaN,NaN,NaN,NaN,g,et),{path:{d:this.toSVGPath()}}):(isNaN(Ht(this,Eu)[0])&&Ht(this,Es).splice(6,6),Ht(this,Eu).set([ot,ct,ut,dt,g,et],0),Ht(this,Es).push(...Outline.createBezierPoints(ot,ct,ut,dt,g,et)),{path:{d:this.toSVGPath()}}))}end(g,et){const ot=this.add(g,et);return ot||(Ht(this,Ys).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(g,et,ot,ct,ut){xn(this,hy,ot),xn(this,dy,ct),xn(this,cy,ut),[g,et]=An(this,Pv,Tw).call(this,g,et);const dt=xn(this,Es,[NaN,NaN,NaN,NaN,g,et]);xn(this,Ys,[g,et]);const ft=Ht(this,Ss).at(-1);return ft&&(ft.line=new Float32Array(ft.line),ft.points=new Float32Array(ft.points)),Ht(this,Ss).push({line:dt,points:Ht(this,Ys)}),Ht(this,Eu).set(dt,0),xn(this,yl,0),this.toSVGPath(),null}getLastElement(){return Ht(this,Ss).at(-1)}setLastElement(g){return Ht(this,Ss)?(Ht(this,Ss).push(g),xn(this,Es,g.line),xn(this,Ys,g.points),xn(this,yl,0),{path:{d:this.toSVGPath()}}):Ht(this,uy).setLastElement(g)}removeLastElement(){if(!Ht(this,Ss))return Ht(this,uy).removeLastElement();Ht(this,Ss).pop(),xn(this,Os,"");for(let g=0,et=Ht(this,Ss).length;g<et;g++){const{line:ot,points:ct}=Ht(this,Ss)[g];xn(this,Es,ot),xn(this,Ys,ct),xn(this,yl,0),this.toSVGPath()}return{path:{d:Ht(this,Os)}}}toSVGPath(){const g=Outline.svgRound(Ht(this,Es)[4]),et=Outline.svgRound(Ht(this,Es)[5]);if(Ht(this,Ys).length===2)return xn(this,Os,`${Ht(this,Os)} M ${g} ${et} Z`),Ht(this,Os);if(Ht(this,Ys).length<=6){const ct=Ht(this,Os).lastIndexOf("M");xn(this,Os,`${Ht(this,Os).slice(0,ct)} M ${g} ${et}`),xn(this,yl,6)}if(Ht(this,Ys).length===4){const ct=Outline.svgRound(Ht(this,Es)[10]),ut=Outline.svgRound(Ht(this,Es)[11]);return xn(this,Os,`${Ht(this,Os)} L ${ct} ${ut}`),xn(this,yl,12),Ht(this,Os)}const ot=[];Ht(this,yl)===0&&(ot.push(`M ${g} ${et}`),xn(this,yl,6));for(let ct=Ht(this,yl),ut=Ht(this,Es).length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,jt]=Ht(this,Es).slice(ct,ct+6).map(Outline.svgRound);ot.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${jt}`)}return xn(this,Os,Ht(this,Os)+ot.join(" ")),xn(this,yl,Ht(this,Es).length),Ht(this,Os)}getOutlines(g,et,ot,ct){const ut=Ht(this,Ss).at(-1);return ut.line=new Float32Array(ut.line),ut.points=new Float32Array(ut.points),Ht(this,uy).build(Ht(this,Ss),g,et,ot,Ht(this,cy),Ht(this,Rv),ct),xn(this,Eu,null),xn(this,Es,null),xn(this,Ss,null),xn(this,Os,null),Ht(this,uy)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Eu=new WeakMap,Es=new WeakMap,Ss=new WeakMap,cy=new WeakMap,Rv=new WeakMap,Ys=new WeakMap,Os=new WeakMap,yl=new WeakMap,uy=new WeakMap,hy=new WeakMap,dy=new WeakMap,Pv=new WeakSet,Tw=function(g,et){return Outline._normalizePoint(g,et,Ht(this,hy),Ht(this,dy),Ht(this,cy))};var Xs,qS,KS,$o,Su,wu,Nv,Mv,fy,zl,Iu,lA,a4,cA,l4,uA,c4;class InkDrawOutline extends Outline{constructor(){super(...arguments);vn(this,zl);vn(this,lA);vn(this,cA);vn(this,uA);vn(this,Xs,void 0);vn(this,qS,0);vn(this,KS,void 0);vn(this,$o,void 0);vn(this,Su,void 0);vn(this,wu,void 0);vn(this,Nv,void 0);vn(this,Mv,void 0);vn(this,fy,void 0)}build(et,ot,ct,ut,dt,ft,St){xn(this,Su,ot),xn(this,wu,ct),xn(this,Nv,ut),xn(this,Mv,dt),xn(this,fy,ft),xn(this,KS,St??0),xn(this,$o,et),An(this,cA,l4).call(this)}get thickness(){return Ht(this,fy)}setLastElement(et){return Ht(this,$o).push(et),{path:{d:this.toSVGPath()}}}removeLastElement(){return Ht(this,$o).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const et=[];for(const{line:ot}of Ht(this,$o)){if(et.push(`M${Outline.svgRound(ot[4])} ${Outline.svgRound(ot[5])}`),ot.length===6){et.push("Z");continue}if(ot.length===12&&isNaN(ot[6])){et.push(`L${Outline.svgRound(ot[10])} ${Outline.svgRound(ot[11])}`);continue}for(let ct=6,ut=ot.length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,jt]=ot.subarray(ct,ct+6).map(Outline.svgRound);et.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${jt}`)}}return et.join("")}serialize([et,ot,ct,ut],dt){const ft=[],St=[],[kt,Tt,jt,Rt]=An(this,lA,a4).call(this);let Ft,$t,zt,Kt,Bt,Ut,Jt,en,tn;switch(Ht(this,Mv)){case 0:tn=Outline._rescale,Ft=et,$t=ot+ut,zt=ct,Kt=-ut,Bt=et+kt*ct,Ut=ot+(1-Tt-Rt)*ut,Jt=et+(kt+jt)*ct,en=ot+(1-Tt)*ut;break;case 90:tn=Outline._rescaleAndSwap,Ft=et,$t=ot,zt=ct,Kt=ut,Bt=et+Tt*ct,Ut=ot+kt*ut,Jt=et+(Tt+Rt)*ct,en=ot+(kt+jt)*ut;break;case 180:tn=Outline._rescale,Ft=et+ct,$t=ot,zt=-ct,Kt=ut,Bt=et+(1-kt-jt)*ct,Ut=ot+Tt*ut,Jt=et+(1-kt)*ct,en=ot+(Tt+Rt)*ut;break;case 270:tn=Outline._rescaleAndSwap,Ft=et+ct,$t=ot+ut,zt=-ct,Kt=-ut,Bt=et+(1-Tt-Rt)*ct,Ut=ot+(1-kt-jt)*ut,Jt=et+(1-Tt)*ct,en=ot+(1-kt)*ut;break}for(const{line:nn,points:rn}of Ht(this,$o))ft.push(tn(nn,Ft,$t,zt,Kt,dt?new Array(nn.length):null)),St.push(tn(rn,Ft,$t,zt,Kt,dt?new Array(rn.length):null));return{lines:ft,points:St,rect:[Bt,Ut,Jt,en]}}static deserialize(et,ot,ct,ut,dt,{paths:{lines:ft,points:St},rotation:kt,thickness:Tt}){const jt=[];let Rt,Ft,$t,zt,Kt;switch(kt){case 0:Kt=Outline._rescale,Rt=-et/ct,Ft=ot/ut+1,$t=1/ct,zt=-1/ut;break;case 90:Kt=Outline._rescaleAndSwap,Rt=-ot/ut,Ft=-et/ct,$t=1/ut,zt=1/ct;break;case 180:Kt=Outline._rescale,Rt=et/ct+1,Ft=-ot/ut,$t=-1/ct,zt=1/ut;break;case 270:Kt=Outline._rescaleAndSwap,Rt=ot/ut+1,Ft=et/ct+1,$t=-1/ut,zt=-1/ct;break}if(!ft){ft=[];for(const Ut of St){const Jt=Ut.length;if(Jt===2){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ut[0],Ut[1]]));continue}if(Jt===4){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ut[0],Ut[1],NaN,NaN,NaN,NaN,Ut[2],Ut[3]]));continue}const en=new Float32Array(3*(Jt-2));ft.push(en);let[tn,nn,rn,on]=Ut.subarray(0,4);en.set([NaN,NaN,NaN,NaN,tn,nn],0);for(let dn=4;dn<Jt;dn+=2){const cn=Ut[dn],fn=Ut[dn+1];en.set(Outline.createBezierPoints(tn,nn,rn,on,cn,fn),(dn-2)*3),[tn,nn,rn,on]=[rn,on,cn,fn]}}}for(let Ut=0,Jt=ft.length;Ut<Jt;Ut++)jt.push({line:Kt(ft[Ut].map(en=>en??NaN),Rt,Ft,$t,zt),points:Kt(St[Ut].map(en=>en??NaN),Rt,Ft,$t,zt)});const Bt=new this.prototype.constructor;return Bt.build(jt,ct,ut,1,kt,Tt,dt),Bt}get box(){return Ht(this,Xs)}updateProperty(et,ot){return et==="stroke-width"?An(this,uA,c4).call(this,ot):null}updateParentDimensions([et,ot],ct){const[ut,dt]=An(this,zl,Iu).call(this);xn(this,Su,et),xn(this,wu,ot),xn(this,Nv,ct);const[ft,St]=An(this,zl,Iu).call(this),kt=ft-ut,Tt=St-dt,jt=Ht(this,Xs);return jt[0]-=kt,jt[1]-=Tt,jt[2]+=2*kt,jt[3]+=2*Tt,jt}updateRotation(et){return xn(this,qS,et),{path:{transform:this.rotationTransform}}}get viewBox(){return Ht(this,Xs).map(Outline.svgRound).join(" ")}get defaultProperties(){const[et,ot]=Ht(this,Xs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get rotationTransform(){const[,,et,ot]=Ht(this,Xs);let ct=0,ut=0,dt=0,ft=0,St=0,kt=0;switch(Ht(this,qS)){case 90:ut=ot/et,dt=-et/ot,St=et;break;case 180:ct=-1,ft=-1,St=et,kt=ot;break;case 270:ut=-ot/et,dt=et/ot,kt=ot;break;default:return""}return`matrix(${ct} ${ut} ${dt} ${ft} ${Outline.svgRound(St)} ${Outline.svgRound(kt)})`}getPathResizingSVGProperties([et,ot,ct,ut]){const[dt,ft]=An(this,zl,Iu).call(this),[St,kt,Tt,jt]=Ht(this,Xs);if(Math.abs(Tt-dt)<=Outline.PRECISION||Math.abs(jt-ft)<=Outline.PRECISION){const Kt=et+ct/2-(St+Tt/2),Bt=ot+ut/2-(kt+jt/2);return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:`${this.rotationTransform} translate(${Kt} ${Bt})`}}}const Rt=(ct-2*dt)/(Tt-2*dt),Ft=(ut-2*ft)/(jt-2*ft),$t=Tt/ct,zt=jt/ut;return{path:{"transform-origin":`${Outline.svgRound(St)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} scale(${$t} ${zt}) translate(${Outline.svgRound(dt)} ${Outline.svgRound(ft)}) scale(${Rt} ${Ft}) translate(${Outline.svgRound(-dt)} ${Outline.svgRound(-ft)})`}}}getPathResizedSVGProperties([et,ot,ct,ut]){const[dt,ft]=An(this,zl,Iu).call(this),St=Ht(this,Xs),[kt,Tt,jt,Rt]=St;if(St[0]=et,St[1]=ot,St[2]=ct,St[3]=ut,Math.abs(jt-dt)<=Outline.PRECISION||Math.abs(Rt-ft)<=Outline.PRECISION){const Bt=et+ct/2-(kt+jt/2),Ut=ot+ut/2-(Tt+Rt/2);for(const{line:Jt,points:en}of Ht(this,$o))Outline._translate(Jt,Bt,Ut,Jt),Outline._translate(en,Bt,Ut,en);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const Ft=(ct-2*dt)/(jt-2*dt),$t=(ut-2*ft)/(Rt-2*ft),zt=-Ft*(kt+dt)+et+dt,Kt=-$t*(Tt+ft)+ot+ft;if(Ft!==1||$t!==1||zt!==0||Kt!==0)for(const{line:Bt,points:Ut}of Ht(this,$o))Outline._rescale(Bt,zt,Kt,Ft,$t,Bt),Outline._rescale(Ut,zt,Kt,Ft,$t,Ut);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([et,ot],ct){const[ut,dt]=ct,ft=Ht(this,Xs),St=et-ft[0],kt=ot-ft[1];if(Ht(this,Su)===ut&&Ht(this,wu)===dt)for(const{line:Tt,points:jt}of Ht(this,$o))Outline._translate(Tt,St,kt,Tt),Outline._translate(jt,St,kt,jt);else{const Tt=Ht(this,Su)/ut,jt=Ht(this,wu)/dt;xn(this,Su,ut),xn(this,wu,dt);for(const{line:Rt,points:Ft}of Ht(this,$o))Outline._rescale(Rt,St,kt,Tt,jt,Rt),Outline._rescale(Ft,St,kt,Tt,jt,Ft);ft[2]*=Tt,ft[3]*=jt}return ft[0]=et,ft[1]=ot,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get defaultSVGProperties(){const et=Ht(this,Xs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et[0])} ${Outline.svgRound(et[1])}`,transform:this.rotationTransform||null},bbox:et}}}Xs=new WeakMap,qS=new WeakMap,KS=new WeakMap,$o=new WeakMap,Su=new WeakMap,wu=new WeakMap,Nv=new WeakMap,Mv=new WeakMap,fy=new WeakMap,zl=new WeakSet,Iu=function(et=Ht(this,fy)){const ot=Ht(this,KS)+et/2*Ht(this,Nv);return Ht(this,Mv)%180===0?[ot/Ht(this,Su),ot/Ht(this,wu)]:[ot/Ht(this,wu),ot/Ht(this,Su)]},lA=new WeakSet,a4=function(){const[et,ot,ct,ut]=Ht(this,Xs),[dt,ft]=An(this,zl,Iu).call(this,0);return[et+dt,ot+ft,ct-2*dt,ut-2*ft]},cA=new WeakSet,l4=function(){const et=xn(this,Xs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ut}of Ht(this,$o)){if(ut.length<=12){for(let St=4,kt=ut.length;St<kt;St+=6)Util$1.pointBoundingBox(ut[St],ut[St+1],et);continue}let dt=ut[4],ft=ut[5];for(let St=6,kt=ut.length;St<kt;St+=6){const[Tt,jt,Rt,Ft,$t,zt]=ut.subarray(St,St+6);Util$1.bezierBoundingBox(dt,ft,Tt,jt,Rt,Ft,$t,zt,et),dt=$t,ft=zt}}const[ot,ct]=An(this,zl,Iu).call(this);et[0]=MathClamp(et[0]-ot,0,1),et[1]=MathClamp(et[1]-ct,0,1),et[2]=MathClamp(et[2]+ot,0,1),et[3]=MathClamp(et[3]+ct,0,1),et[2]-=et[0],et[3]-=et[1]},uA=new WeakSet,c4=function(et){const[ot,ct]=An(this,zl,Iu).call(this);xn(this,fy,et);const[ut,dt]=An(this,zl,Iu).call(this),[ft,St]=[ut-ot,dt-ct],kt=Ht(this,Xs);return kt[0]-=ft,kt[1]-=St,kt[2]+=2*ft,kt[3]+=2*St,kt};class InkDrawingOptions extends DrawingOptions{constructor(g){super(),this._viewParameters=g,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(g,et){g==="stroke-width"&&(et??(et=this["stroke-width"]),et*=this._viewParameters.realScale),super.updateSVGProperty(g,et)}clone(){const g=new InkDrawingOptions(this._viewParameters);return g.updateAll(this),g}}var hA,u4;const Gy=class Gy extends DrawingEditor{constructor(et){super({...et,name:"inkEditor"});vn(this,hA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new InkDrawingOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(et,ot,ct,ut,dt){return new InkDrawOutliner(et,ot,ct,ut,dt,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(et,ot,ct,ut,dt,ft){return InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){let ut=null;if(et instanceof InkAnnotationElement){const{data:{inkLists:ft,rect:St,rotation:kt,id:Tt,color:jt,opacity:Rt,borderStyle:{rawWidth:Ft},popupRef:$t,richText:zt,contentsObj:Kt,creationDate:Bt,modificationDate:Ut},parent:{page:{pageNumber:Jt}}}=et;ut=et={annotationType:AnnotationEditorType.INK,color:Array.from(jt),thickness:Ft,opacity:Rt,paths:{points:ft},boxes:null,pageIndex:Jt-1,rect:St.slice(0),rotation:kt,annotationElementId:Tt,id:Tt,deleted:!1,popupRef:$t,richText:zt,comment:(Kt==null?void 0:Kt.str)||null,creationDate:Bt,modificationDate:Ut}}const dt=await super.deserialize(et,ot,ct);return dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:et,_drawingOptions:ot,parent:ct}=this;ot.updateSVGProperty("stroke-width"),ct.drawLayer.updateProperties(et,ot.toSVGProperties())}static onScaleChangingWhenDrawing(){const et=this._currentParent;et&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),et.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:et,thickness:ot,opacity:ct}){this._drawingOptions=Gy.getDefaultDrawingOptions({stroke:Util$1.makeHexColor(...et),"stroke-width":ot,"stroke-opacity":ct})}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{stroke:ut,"stroke-opacity":dt,"stroke-width":ft}}=this,St=Object.assign(super.serialize(et),{color:AnnotationEditor._colorManager.convert(ut),opacity:dt,thickness:ft,paths:{lines:ot,points:ct}});return this.addComment(St),et?(St.isCopy=!0,St):this.annotationElementId&&!An(this,hA,u4).call(this,St)?null:(St.id=this.annotationElementId,St)}renderAnnotationElement(et){if(this.deleted)return et.hide(),null;const{points:ot,rect:ct}=this.serializeDraw(!1);return et.updateEdited({rect:ct,thickness:this._drawingOptions["stroke-width"],points:ot,popup:this.comment}),null}};hA=new WeakSet,u4=function(et){const{color:ot,thickness:ct,opacity:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||et.color.some((ft,St)=>ft!==ot[St])||et.thickness!==ct||et.opacity!==ut||et.pageIndex!==dt},qn(Gy,"_type","ink"),qn(Gy,"_editorType",AnnotationEditorType.INK),qn(Gy,"_defaultDrawingOptions",null);let InkEditor=Gy;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let g=super.toSVGPath();return g.endsWith("Z")||(g+="Z"),g}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var py,YS,MC,Hl,dA,h4,fA,d4,XS,OC,Ov,Aw,pA,f4,mA,p4,gA,m4,JS,IC,QS,DC,yA,g4;class SignatureExtractor{static extractContoursFromText(g,{fontFamily:et,fontStyle:ot,fontWeight:ct},ut,dt,ft,St){let kt=new OffscreenCanvas(1,1),Tt=kt.getContext("2d",{alpha:!1});const jt=200,Rt=Tt.font=`${ot} ${ct} ${jt}px ${et}`,{actualBoundingBoxLeft:Ft,actualBoundingBoxRight:$t,actualBoundingBoxAscent:zt,actualBoundingBoxDescent:Kt,fontBoundingBoxAscent:Bt,fontBoundingBoxDescent:Ut,width:Jt}=Tt.measureText(g),en=1.5,tn=Math.ceil(Math.max(Math.abs(Ft)+Math.abs($t)||0,Jt)*en),nn=Math.ceil(Math.max(Math.abs(zt)+Math.abs(Kt)||jt,Math.abs(Bt)+Math.abs(Ut)||jt)*en);kt=new OffscreenCanvas(tn,nn),Tt=kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Tt.font=Rt,Tt.filter="grayscale(1)",Tt.fillStyle="white",Tt.fillRect(0,0,tn,nn),Tt.fillStyle="black",Tt.fillText(g,tn*(en-1)/2,nn*(3-en)/2);const rn=An(this,JS,IC).call(this,Tt.getImageData(0,0,tn,nn).data),on=An(this,gA,m4).call(this,rn),dn=An(this,QS,DC).call(this,on),cn=An(this,XS,OC).call(this,rn,tn,nn,dn);return this.processDrawnLines({lines:{curves:cn,width:tn,height:nn},pageWidth:ut,pageHeight:dt,rotation:ft,innerMargin:St,mustSmooth:!0,areContours:!0})}static process(g,et,ot,ct,ut){const[dt,ft,St]=An(this,yA,g4).call(this,g),[kt,Tt]=An(this,mA,p4).call(this,dt,ft,St,Math.hypot(ft,St)*Ht(this,py).sigmaSFactor,Ht(this,py).sigmaR,Ht(this,py).kernelSize),jt=An(this,QS,DC).call(this,Tt),Rt=An(this,XS,OC).call(this,kt,ft,St,jt);return this.processDrawnLines({lines:{curves:Rt,width:ft,height:St},pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:g,pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:dt,areContours:ft}){ct%180!==0&&([et,ot]=[ot,et]);const{curves:St,width:kt,height:Tt}=g,jt=g.thickness??0,Rt=[],Ft=Math.min(et/kt,ot/Tt),$t=Ft/et,zt=Ft/ot,Kt=[];for(const{points:Ut}of St){const Jt=dt?An(this,pA,f4).call(this,Ut):Ut;if(!Jt)continue;Kt.push(Jt);const en=Jt.length,tn=new Float32Array(en),nn=new Float32Array(3*(en===2?2:en-2));if(Rt.push({line:nn,points:tn}),en===2){tn[0]=Jt[0]*$t,tn[1]=Jt[1]*zt,nn.set([NaN,NaN,NaN,NaN,tn[0],tn[1]],0);continue}let[rn,on,dn,cn]=Jt;rn*=$t,on*=zt,dn*=$t,cn*=zt,tn.set([rn,on,dn,cn],0),nn.set([NaN,NaN,NaN,NaN,rn,on],0);for(let fn=4;fn<en;fn+=2){const mn=tn[fn]=Jt[fn]*$t,En=tn[fn+1]=Jt[fn+1]*zt;nn.set(Outline.createBezierPoints(rn,on,dn,cn,mn,En),(fn-2)*3),[rn,on,dn,cn]=[dn,cn,mn,En]}}if(Rt.length===0)return null;const Bt=ft?new ContourDrawOutline:new InkDrawOutline;return Bt.build(Rt,et,ot,1,ct,ft?0:jt,ut),{outline:Bt,newCurves:Kt,areContours:ft,thickness:jt,width:kt,height:Tt}}static async compressSignature({outlines:g,areContours:et,thickness:ot,width:ct,height:ut}){let dt=1/0,ft=-1/0,St=0;for(const Jt of g){St+=Jt.length;for(let en=2,tn=Jt.length;en<tn;en++){const nn=Jt[en]-Jt[en-2];dt=Math.min(dt,nn),ft=Math.max(ft,nn)}}let kt;dt>=-128&&ft<=127?kt=Int8Array:dt>=-32768&&ft<=32767?kt=Int16Array:kt=Int32Array;const Tt=g.length,jt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Tt,Rt=new Uint32Array(jt);let Ft=0;Rt[Ft++]=jt*Uint32Array.BYTES_PER_ELEMENT+(St-2*Tt)*kt.BYTES_PER_ELEMENT,Rt[Ft++]=0,Rt[Ft++]=ct,Rt[Ft++]=ut,Rt[Ft++]=et?0:1,Rt[Ft++]=Math.max(0,Math.floor(ot??0)),Rt[Ft++]=Tt,Rt[Ft++]=kt.BYTES_PER_ELEMENT;for(const Jt of g)Rt[Ft++]=Jt.length-2,Rt[Ft++]=Jt[0],Rt[Ft++]=Jt[1];const $t=new CompressionStream("deflate-raw"),zt=$t.writable.getWriter();await zt.ready,zt.write(Rt);const Kt=kt.prototype.constructor;for(const Jt of g){const en=new Kt(Jt.length-2);for(let tn=2,nn=Jt.length;tn<nn;tn++)en[tn-2]=Jt[tn]-Jt[tn-2];zt.write(en)}zt.close();const Bt=await new Response($t.readable).arrayBuffer(),Ut=new Uint8Array(Bt);return toBase64Util(Ut)}static async decompressSignature(g){try{const et=fromBase64Util(g),{readable:ot,writable:ct}=new DecompressionStream("deflate-raw"),ut=ct.getWriter();await ut.ready,ut.write(et).then(async()=>{await ut.ready,await ut.close()}).catch(()=>{});let dt=null,ft=0;for await(const Jt of ot)dt||(dt=new Uint8Array(new Uint32Array(Jt.buffer,0,4)[0])),dt.set(Jt,ft),ft+=Jt.length;const St=new Uint32Array(dt.buffer,0,dt.length>>2),kt=St[1];if(kt!==0)throw new Error(`Invalid version: ${kt}`);const Tt=St[2],jt=St[3],Rt=St[4]===0,Ft=St[5],$t=St[6],zt=St[7],Kt=[],Bt=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*$t)*Uint32Array.BYTES_PER_ELEMENT;let Ut;switch(zt){case Int8Array.BYTES_PER_ELEMENT:Ut=new Int8Array(dt.buffer,Bt);break;case Int16Array.BYTES_PER_ELEMENT:Ut=new Int16Array(dt.buffer,Bt);break;case Int32Array.BYTES_PER_ELEMENT:Ut=new Int32Array(dt.buffer,Bt);break}ft=0;for(let Jt=0;Jt<$t;Jt++){const en=St[POINTS_PROPERTIES_NUMBER*Jt+BASE_HEADER_LENGTH],tn=new Float32Array(en+2);Kt.push(tn);for(let nn=0;nn<POINTS_PROPERTIES_NUMBER-1;nn++)tn[nn]=St[POINTS_PROPERTIES_NUMBER*Jt+BASE_HEADER_LENGTH+nn+1];for(let nn=0;nn<en;nn++)tn[nn+2]=tn[nn]+Ut[ft++]}return{areContours:Rt,thickness:Ft,outlines:Kt,width:Tt,height:jt}}catch(et){return warn(`decompressSignature: ${et}`),null}}}py=new WeakMap,YS=new WeakSet,MC=function(g,et,ot,ct){return ot-=g,ct-=et,ot===0?ct>0?0:4:ot===1?ct+6:2-ct},Hl=new WeakMap,dA=new WeakSet,h4=function(g,et,ot,ct,ut,dt,ft){const St=An(this,YS,MC).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(-kt+St-ft+16)%8,jt=Ht(this,Hl)[2*Tt],Rt=Ht(this,Hl)[2*Tt+1];if(g[(ot+jt)*et+(ct+Rt)]!==0)return Tt}return-1},fA=new WeakSet,d4=function(g,et,ot,ct,ut,dt,ft){const St=An(this,YS,MC).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(kt+St+ft+16)%8,jt=Ht(this,Hl)[2*Tt],Rt=Ht(this,Hl)[2*Tt+1];if(g[(ot+jt)*et+(ct+Rt)]!==0)return Tt}return-1},XS=new WeakSet,OC=function(g,et,ot,ct){const ut=g.length,dt=new Int32Array(ut);for(let Tt=0;Tt<ut;Tt++)dt[Tt]=g[Tt]<=ct?1:0;for(let Tt=1;Tt<ot-1;Tt++)dt[Tt*et]=dt[Tt*et+et-1]=0;for(let Tt=0;Tt<et;Tt++)dt[Tt]=dt[et*ot-1-Tt]=0;let ft=1,St;const kt=[];for(let Tt=1;Tt<ot-1;Tt++){St=1;for(let jt=1;jt<et-1;jt++){const Rt=Tt*et+jt,Ft=dt[Rt];if(Ft===0)continue;let $t=Tt,zt=jt;if(Ft===1&&dt[Rt-1]===0)ft+=1,zt-=1;else if(Ft>=1&&dt[Rt+1]===0)ft+=1,zt+=1,Ft>1&&(St=Ft);else{Ft!==1&&(St=Math.abs(Ft));continue}const Kt=[jt,Tt],Bt=zt===jt+1,Ut={isHole:Bt,points:Kt,id:ft,parent:0};kt.push(Ut);let Jt;for(const fn of kt)if(fn.id===St){Jt=fn;break}Jt?Jt.isHole?Ut.parent=Bt?Jt.parent:St:Ut.parent=Bt?St:Jt.parent:Ut.parent=Bt?St:0;const en=An(this,dA,h4).call(this,dt,et,Tt,jt,$t,zt,0);if(en===-1){dt[Rt]=-ft,dt[Rt]!==1&&(St=Math.abs(dt[Rt]));continue}let tn=Ht(this,Hl)[2*en],nn=Ht(this,Hl)[2*en+1];const rn=Tt+tn,on=jt+nn;$t=rn,zt=on;let dn=Tt,cn=jt;for(;;){const fn=An(this,fA,d4).call(this,dt,et,dn,cn,$t,zt,1);tn=Ht(this,Hl)[2*fn],nn=Ht(this,Hl)[2*fn+1];const mn=dn+tn,En=cn+nn;Kt.push(En,mn);const Sn=dn*et+cn;if(dt[Sn+1]===0?dt[Sn]=-ft:dt[Sn]===1&&(dt[Sn]=ft),mn===Tt&&En===jt&&dn===rn&&cn===on){dt[Rt]!==1&&(St=Math.abs(dt[Rt]));break}else $t=dn,zt=cn,dn=mn,cn=En}}}return kt},Ov=new WeakSet,Aw=function(g,et,ot,ct){if(ot-et<=4){for(let rn=et;rn<ot-2;rn+=2)ct.push(g[rn],g[rn+1]);return}const ut=g[et],dt=g[et+1],ft=g[ot-4]-ut,St=g[ot-3]-dt,kt=Math.hypot(ft,St),Tt=ft/kt,jt=St/kt,Rt=Tt*dt-jt*ut,Ft=St/ft,$t=1/kt,zt=Math.atan(Ft),Kt=Math.cos(zt),Bt=Math.sin(zt),Ut=$t*(Math.abs(Kt)+Math.abs(Bt)),Jt=$t*(1-Ut+Ut**2),en=Math.max(Math.atan(Math.abs(Bt+Kt)*Jt),Math.atan(Math.abs(Bt-Kt)*Jt));let tn=0,nn=et;for(let rn=et+2;rn<ot-2;rn+=2){const on=Math.abs(Rt-Tt*g[rn+1]+jt*g[rn]);on>tn&&(nn=rn,tn=on)}tn>(kt*en)**2?(An(this,Ov,Aw).call(this,g,et,nn+2,ct),An(this,Ov,Aw).call(this,g,nn,ot,ct)):ct.push(ut,dt)},pA=new WeakSet,f4=function(g){const et=[],ot=g.length;return An(this,Ov,Aw).call(this,g,0,ot,et),et.push(g[ot-2],g[ot-1]),et.length<=4?null:et},mA=new WeakSet,p4=function(g,et,ot,ct,ut,dt){const ft=new Float32Array(dt**2),St=-2*ct**2,kt=dt>>1;for(let zt=0;zt<dt;zt++){const Kt=(zt-kt)**2;for(let Bt=0;Bt<dt;Bt++)ft[zt*dt+Bt]=Math.exp((Kt+(Bt-kt)**2)/St)}const Tt=new Float32Array(256),jt=-2*ut**2;for(let zt=0;zt<256;zt++)Tt[zt]=Math.exp(zt**2/jt);const Rt=g.length,Ft=new Uint8Array(Rt),$t=new Uint32Array(256);for(let zt=0;zt<ot;zt++)for(let Kt=0;Kt<et;Kt++){const Bt=zt*et+Kt,Ut=g[Bt];let Jt=0,en=0;for(let nn=0;nn<dt;nn++){const rn=zt+nn-kt;if(!(rn<0||rn>=ot))for(let on=0;on<dt;on++){const dn=Kt+on-kt;if(dn<0||dn>=et)continue;const cn=g[rn*et+dn],fn=ft[nn*dt+on]*Tt[Math.abs(cn-Ut)];Jt+=cn*fn,en+=fn}}const tn=Ft[Bt]=Math.round(Jt/en);$t[tn]++}return[Ft,$t]},gA=new WeakSet,m4=function(g){const et=new Uint32Array(256);for(const ot of g)et[ot]++;return et},JS=new WeakSet,IC=function(g){const et=g.length,ot=new Uint8ClampedArray(et>>2);let ct=-1/0,ut=1/0;for(let ft=0,St=ot.length;ft<St;ft++){const kt=ot[ft]=g[ft<<2];ct=Math.max(ct,kt),ut=Math.min(ut,kt)}const dt=255/(ct-ut);for(let ft=0,St=ot.length;ft<St;ft++)ot[ft]=(ot[ft]-ut)*dt;return ot},QS=new WeakSet,DC=function(g){let et,ot=-1/0,ct=-1/0;const ut=g.findIndex(St=>St!==0);let dt=ut,ft=ut;for(et=ut;et<256;et++){const St=g[et];St>ot&&(et-dt>ct&&(ct=et-dt,ft=et-1),ot=St,dt=et)}for(et=ft-1;et>=0&&!(g[et]>g[et+1]);et--);return et},yA=new WeakSet,g4=function(g){const et=g,{width:ot,height:ct}=g,{maxDim:ut}=Ht(this,py);let dt=ot,ft=ct;if(ot>ut||ct>ut){let Rt=ot,Ft=ct,$t=Math.log2(Math.max(ot,ct)/ut);const zt=Math.floor($t);$t=$t===zt?zt-1:zt;for(let Bt=0;Bt<$t;Bt++){dt=Math.ceil(Rt/2),ft=Math.ceil(Ft/2);const Ut=new OffscreenCanvas(dt,ft);Ut.getContext("2d").drawImage(g,0,0,Rt,Ft,0,0,dt,ft),Rt=dt,Ft=ft,g!==et&&g.close(),g=Ut.transferToImageBitmap()}const Kt=Math.min(ut/dt,ut/ft);dt=Math.round(dt*Kt),ft=Math.round(ft*Kt)}const kt=new OffscreenCanvas(dt,ft).getContext("2d",{willReadFrequently:!0});kt.fillStyle="white",kt.fillRect(0,0,dt,ft),kt.filter="grayscale(1)",kt.drawImage(g,0,0,g.width,g.height,0,0,dt,ft);const Tt=kt.getImageData(0,0,dt,ft).data;return[An(this,JS,IC).call(this,Tt),dt,ft]},vn(SignatureExtractor,YS),vn(SignatureExtractor,dA),vn(SignatureExtractor,fA),vn(SignatureExtractor,XS),vn(SignatureExtractor,Ov),vn(SignatureExtractor,pA),vn(SignatureExtractor,mA),vn(SignatureExtractor,gA),vn(SignatureExtractor,JS),vn(SignatureExtractor,QS),vn(SignatureExtractor,yA),vn(SignatureExtractor,py,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),vn(SignatureExtractor,Hl,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const g=new SignatureOptions;return g.updateAll(this),g}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(g){super(g),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const g=new DrawnSignatureOptions(this._viewParameters);return g.updateAll(this),g}}var wm,ku,km,my;const Eo=class Eo extends DrawingEditor{constructor(et){super({...et,mustBeCommitted:!0,name:"signatureEditor"});vn(this,wm,!1);vn(this,ku,null);vn(this,km,null);vn(this,my,null);this._willKeepAspectRatio=!0,xn(this,km,et.signatureData||null),xn(this,ku,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Ht(this,ku)}}static computeTelemetryFinalData(et){const ot=et.get("hasDescription");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let et,ot;const{_isCopy:ct}=this;if(ct&&(this._isCopy=!1,et=this.x,ot=this.y),super.render(),this._drawId===null)if(Ht(this,km)){const{lines:ut,mustSmooth:dt,areContours:ft,description:St,uuid:kt,heightInPage:Tt}=Ht(this,km),{rawDims:{pageWidth:jt,pageHeight:Rt},rotation:Ft}=this.parent.viewport,$t=SignatureExtractor.processDrawnLines({lines:ut,pageWidth:jt,pageHeight:Rt,rotation:Ft,innerMargin:Eo._INNER_MARGIN,mustSmooth:dt,areContours:ft});this.addSignature($t,Tt,St,kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Ht(this,ku)||""}));return ct&&(this._isCopy=!0,this._moveAfterPaste(et,ot)),this.div}setUuid(et){xn(this,my,et),this.addEditToolbar()}getUuid(){return Ht(this,my)}get description(){return Ht(this,ku)}set description(et){xn(this,ku,et),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:et})),super.addEditToolbar().then(ot=>{ot==null||ot.updateEditSignatureButton(et)}))}getSignaturePreview(){const{newCurves:et,areContours:ot,thickness:ct,width:ut,height:dt}=Ht(this,km),ft=Math.max(ut,dt),St=SignatureExtractor.processDrawnLines({lines:{curves:et.map(kt=>({points:kt})),thickness:ct,width:ut,height:dt},pageWidth:ft,pageHeight:ft,rotation:0,innerMargin:0,mustSmooth:!1,areContours:ot});return{areContours:ot,outline:St.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(et,ot,ct,ut){const{x:dt,y:ft}=this,{outline:St}=xn(this,km,et);xn(this,wm,St instanceof ContourDrawOutline),this.description=ct;let kt;Ht(this,wm)?kt=Eo.getDefaultDrawingOptions():(kt=Eo._defaultDrawnSignatureOptions.clone(),kt.updateProperties({"stroke-width":St.thickness})),this._addOutlines({drawOutlines:St,drawingOptions:kt});const[,Tt]=this.pageDimensions;let jt=ot/Tt;jt=jt>=1?.5:jt,this.width*=jt/this.height,this.width>=1&&(jt*=.9/this.width,this.width=.9),this.height=jt,this.setDims(),this.x=dt,this.y=ft,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ut),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ut,hasDescription:!!ct}}),this.div.hidden=!1}getFromImage(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.process(et,ot,ct,ut,Eo._INNER_MARGIN)}getFromText(et,ot){const{rawDims:{pageWidth:ct,pageHeight:ut},rotation:dt}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(et,ot,ct,ut,dt,Eo._INNER_MARGIN)}getDrawnSignature(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:et,pageWidth:ot,pageHeight:ct,rotation:ut,innerMargin:Eo._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:et,thickness:ot}){et?this._drawingOptions=Eo.getDefaultDrawingOptions():(this._drawingOptions=Eo._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":ot}))}serialize(et=!1){if(this.isEmpty())return null;const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{"stroke-width":ut}}=this,dt=Object.assign(super.serialize(et),{isSignature:!0,areContours:Ht(this,wm),color:[0,0,0],thickness:Ht(this,wm)?0:ut});return this.addComment(dt),et?(dt.paths={lines:ot,points:ct},dt.uuid=Ht(this,my),dt.isCopy=!0):dt.lines=ot,Ht(this,ku)&&(dt.accessibilityData={type:"Figure",alt:Ht(this,ku)}),dt}static deserializeDraw(et,ot,ct,ut,dt,ft){return ft.areContours?ContourDrawOutline.deserialize(et,ot,ct,ut,dt,ft):InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){var dt;const ut=await super.deserialize(et,ot,ct);return xn(ut,wm,et.areContours),ut.description=((dt=et.accessibilityData)==null?void 0:dt.alt)||"",xn(ut,my,et.uuid),ut}};wm=new WeakMap,ku=new WeakMap,km=new WeakMap,my=new WeakMap,qn(Eo,"_type","signature"),qn(Eo,"_editorType",AnnotationEditorType.SIGNATURE),qn(Eo,"_defaultDrawingOptions",null);let SignatureEditor=Eo;var Wr,ws,Tm,pp,Am,Iv,mp,gy,Tu,Bo,Dv,yy,Cx,vy,Rx,Lv,_w,jv,Cw,Fv,Rw,ZS,LC,$v,Pw,vA,y4;class StampEditor extends AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});vn(this,yy);vn(this,vy);vn(this,Lv);vn(this,jv);vn(this,Fv);vn(this,ZS);vn(this,$v);vn(this,vA);vn(this,Wr,null);vn(this,ws,null);vn(this,Tm,null);vn(this,pp,null);vn(this,Am,null);vn(this,Iv,"");vn(this,mp,null);vn(this,gy,!1);vn(this,Tu,null);vn(this,Bo,!1);vn(this,Dv,!1);xn(this,pp,et.bitmapUrl),xn(this,Am,et.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot)}static isHandlingMimeForPasting(et){return SupportedImageMimeTypes.includes(et)}static paste(et,ot){ot.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:et.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var et;return{type:"stamp",hasAltText:!!((et=this.altTextData)!=null&&et.altText)}}static computeTelemetryFinalData(et){const ot=et.get("hasAltText");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}async mlGuessAltText(et=null,ot=!0){if(this.hasAltTextData())return null;const{mlManager:ct}=this._uiManager;if(!ct)throw new Error("No ML.");if(!await ct.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ut,width:dt,height:ft}=et||this.copyCanvas(null,null,!0).imageData,St=await ct.guess({name:"altText",request:{data:ut,width:dt,height:ft,channels:ut.length/(dt*ft)}});if(!St)throw new Error("No response from the AI service.");if(St.error)throw new Error("Error from the AI service.");if(St.cancel)return null;if(!St.output)throw new Error("No valid response from the AI service.");const kt=St.output;return await this.setGuessedAltText(kt),ot&&!this.hasAltTextData()&&(this.altTextData={alt:kt,decorative:!1}),kt}remove(){var et;Ht(this,ws)&&(xn(this,Wr,null),this._uiManager.imageManager.deleteId(Ht(this,ws)),(et=Ht(this,mp))==null||et.remove(),xn(this,mp,null),Ht(this,Tu)&&(clearTimeout(Ht(this,Tu)),xn(this,Tu,null))),super.remove()}rebuild(){if(!this.parent){Ht(this,ws)&&An(this,Lv,_w).call(this);return}super.rebuild(),this.div!==null&&(Ht(this,ws)&&Ht(this,mp)===null&&An(this,Lv,_w).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(et){this._isDraggable=!0,et&&this.div.focus()}isEmpty(){return!(Ht(this,Tm)||Ht(this,Wr)||Ht(this,pp)||Ht(this,Am)||Ht(this,ws)||Ht(this,gy))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let et,ot;return this._isCopy&&(et=this.x,ot=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Ht(this,gy)||(Ht(this,Wr)?An(this,jv,Cw).call(this):An(this,Lv,_w).call(this)),this._isCopy&&this._moveAfterPaste(et,ot),this._uiManager.addShouldRescale(this),this.div}setCanvas(et,ot){const{id:ct,bitmap:ut}=this._uiManager.imageManager.getFromCanvas(et,ot);ot.remove(),ct&&this._uiManager.imageManager.isValidId(ct)&&(xn(this,ws,ct),ut&&xn(this,Wr,ut),xn(this,gy,!1),An(this,jv,Cw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;Ht(this,Tu)!==null&&clearTimeout(Ht(this,Tu)),xn(this,Tu,setTimeout(()=>{xn(this,Tu,null),An(this,ZS,LC).call(this)},200))}copyCanvas(et,ot,ct=!1){et||(et=224);const{width:ut,height:dt}=Ht(this,Wr),ft=new OutputScale;let St=Ht(this,Wr),kt=ut,Tt=dt,jt=null;if(ot){if(ut>ot||dt>ot){const rn=Math.min(ot/ut,ot/dt);kt=Math.floor(ut*rn),Tt=Math.floor(dt*rn)}jt=document.createElement("canvas");const Ft=jt.width=Math.ceil(kt*ft.sx),$t=jt.height=Math.ceil(Tt*ft.sy);Ht(this,Bo)||(St=An(this,Fv,Rw).call(this,Ft,$t));const zt=jt.getContext("2d");zt.filter=this._uiManager.hcmFilter;let Kt="white",Bt="#cfcfd8";this._uiManager.hcmFilter!=="none"?Bt="black":ColorScheme.isDarkMode&&(Kt="#8f8f9d",Bt="#42414d");const Ut=15,Jt=Ut*ft.sx,en=Ut*ft.sy,tn=new OffscreenCanvas(Jt*2,en*2),nn=tn.getContext("2d");nn.fillStyle=Kt,nn.fillRect(0,0,Jt*2,en*2),nn.fillStyle=Bt,nn.fillRect(0,0,Jt,en),nn.fillRect(Jt,en,Jt,en),zt.fillStyle=zt.createPattern(tn,"repeat"),zt.fillRect(0,0,Ft,$t),zt.drawImage(St,0,0,St.width,St.height,0,0,Ft,$t)}let Rt=null;if(ct){let Ft,$t;if(ft.symmetric&&St.width<et&&St.height<et)Ft=St.width,$t=St.height;else if(St=Ht(this,Wr),ut>et||dt>et){const Bt=Math.min(et/ut,et/dt);Ft=Math.floor(ut*Bt),$t=Math.floor(dt*Bt),Ht(this,Bo)||(St=An(this,Fv,Rw).call(this,Ft,$t))}const Kt=new OffscreenCanvas(Ft,$t).getContext("2d",{willReadFrequently:!0});Kt.drawImage(St,0,0,St.width,St.height,0,0,Ft,$t),Rt={width:Ft,height:$t,data:Kt.getImageData(0,0,Ft,$t).data}}return{canvas:jt,width:kt,height:Tt,imageData:Rt}}static async deserialize(et,ot,ct){var Kt;let ut=null,dt=!1;if(et instanceof StampAnnotationElement){const{data:{rect:Bt,rotation:Ut,id:Jt,structParent:en,popupRef:tn,richText:nn,contentsObj:rn,creationDate:on,modificationDate:dn},container:cn,parent:{page:{pageNumber:fn}},canvas:mn}=et;let En,Sn;mn?(delete et.canvas,{id:En,bitmap:Sn}=ct.imageManager.getFromCanvas(cn.id,mn),mn.remove()):(dt=!0,et._hasNoCanvas=!0);const wn=((Kt=await ot._structTree.getAriaAttributes(`${AnnotationPrefix}${Jt}`))==null?void 0:Kt.get("aria-label"))||"";ut=et={annotationType:AnnotationEditorType.STAMP,bitmapId:En,bitmap:Sn,pageIndex:fn-1,rect:Bt.slice(0),rotation:Ut,annotationElementId:Jt,id:Jt,deleted:!1,accessibilityData:{decorative:!1,altText:wn},isSvg:!1,structParent:en,popupRef:tn,richText:nn,comment:(rn==null?void 0:rn.str)||null,creationDate:on,modificationDate:dn}}const ft=await super.deserialize(et,ot,ct),{rect:St,bitmap:kt,bitmapUrl:Tt,bitmapId:jt,isSvg:Rt,accessibilityData:Ft}=et;dt?(ct.addMissingCanvas(et.id,ft),xn(ft,gy,!0)):jt&&ct.imageManager.isValidId(jt)?(xn(ft,ws,jt),kt&&xn(ft,Wr,kt)):xn(ft,pp,Tt),xn(ft,Bo,Rt);const[$t,zt]=ft.pageDimensions;return ft.width=(St[2]-St[0])/$t,ft.height=(St[3]-St[1])/zt,Ft&&(ft.altTextData=Ft),ft._initialData=ut,et.comment&&ft.setCommentData(et),xn(ft,Dv,!!ut),ft}serialize(et=!1,ot=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ct=Object.assign(super.serialize(et),{bitmapId:Ht(this,ws),isSvg:Ht(this,Bo)});if(this.addComment(ct),et)return ct.bitmapUrl=An(this,$v,Pw).call(this,!0),ct.accessibilityData=this.serializeAltText(!0),ct.isCopy=!0,ct;const{decorative:ut,altText:dt}=this.serializeAltText(!1);if(!ut&&dt&&(ct.accessibilityData={type:"Figure",alt:dt}),this.annotationElementId){const St=An(this,vA,y4).call(this,ct);return St.isSame?null:(St.isSameAltText?delete ct.accessibilityData:ct.accessibilityData.structParent=this._initialData.structParent??-1,ct.id=this.annotationElementId,delete ct.bitmapId,ct)}if(ot===null)return ct;ot.stamps||(ot.stamps=new Map);const ft=Ht(this,Bo)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!ot.stamps.has(Ht(this,ws)))ot.stamps.set(Ht(this,ws),{area:ft,serialized:ct}),ct.bitmap=An(this,$v,Pw).call(this,!1);else if(Ht(this,Bo)){const St=ot.stamps.get(Ht(this,ws));ft>St.area&&(St.area=ft,St.serialized.bitmap.close(),St.serialized.bitmap=An(this,$v,Pw).call(this,!1))}return ct}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Wr=new WeakMap,ws=new WeakMap,Tm=new WeakMap,pp=new WeakMap,Am=new WeakMap,Iv=new WeakMap,mp=new WeakMap,gy=new WeakMap,Tu=new WeakMap,Bo=new WeakMap,Dv=new WeakMap,yy=new WeakSet,Cx=function(et,ot=!1){if(!et){this.remove();return}xn(this,Wr,et.bitmap),ot||(xn(this,ws,et.id),xn(this,Bo,et.isSvg)),et.file&&xn(this,Iv,et.file.name),An(this,jv,Cw).call(this)},vy=new WeakSet,Rx=function(){if(xn(this,Tm,null),this._uiManager.enableWaiting(!1),!!Ht(this,mp)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ht(this,Wr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ht(this,Wr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Lv=new WeakSet,_w=function(){if(Ht(this,ws)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Ht(this,ws)).then(ct=>An(this,yy,Cx).call(this,ct,!0)).finally(()=>An(this,vy,Rx).call(this));return}if(Ht(this,pp)){const ct=Ht(this,pp);xn(this,pp,null),this._uiManager.enableWaiting(!0),xn(this,Tm,this._uiManager.imageManager.getFromUrl(ct).then(ut=>An(this,yy,Cx).call(this,ut)).finally(()=>An(this,vy,Rx).call(this)));return}if(Ht(this,Am)){const ct=Ht(this,Am);xn(this,Am,null),this._uiManager.enableWaiting(!0),xn(this,Tm,this._uiManager.imageManager.getFromFile(ct).then(ut=>An(this,yy,Cx).call(this,ut)).finally(()=>An(this,vy,Rx).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=SupportedImageMimeTypes.join(",");const ot=this._uiManager._signal;xn(this,Tm,new Promise(ct=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ut=await this._uiManager.imageManager.getFromFile(et.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),An(this,yy,Cx).call(this,ut)}ct()},{signal:ot}),et.addEventListener("cancel",()=>{this.remove(),ct()},{signal:ot})}).finally(()=>An(this,vy,Rx).call(this))),et.click()},jv=new WeakSet,Cw=function(){var kt;const{div:et}=this;let{width:ot,height:ct}=Ht(this,Wr);const[ut,dt]=this.pageDimensions,ft=.75;if(this.width)ot=this.width*ut,ct=this.height*dt;else if(ot>ft*ut||ct>ft*dt){const Tt=Math.min(ft*ut/ot,ft*dt/ct);ot*=Tt,ct*=Tt}this._uiManager.enableWaiting(!1);const St=xn(this,mp,document.createElement("canvas"));St.setAttribute("role","img"),this.addContainer(St),this.width=ot/ut,this.height=ct/dt,this.setDims(),(kt=this._initialOptions)!=null&&kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(et.hidden=!1),An(this,ZS,LC).call(this),Ht(this,Dv)||(this.parent.addUndoableEditor(this),xn(this,Dv,!0)),this._reportTelemetry({action:"inserted_image"}),Ht(this,Iv)&&this.div.setAttribute("aria-description",Ht(this,Iv)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Fv=new WeakSet,Rw=function(et,ot){const{width:ct,height:ut}=Ht(this,Wr);let dt=ct,ft=ut,St=Ht(this,Wr);for(;dt>2*et||ft>2*ot;){const kt=dt,Tt=ft;dt>2*et&&(dt=dt>=16384?Math.floor(dt/2)-1:Math.ceil(dt/2)),ft>2*ot&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const jt=new OffscreenCanvas(dt,ft);jt.getContext("2d").drawImage(St,0,0,kt,Tt,0,0,dt,ft),St=jt.transferToImageBitmap()}return St},ZS=new WeakSet,LC=function(){const[et,ot]=this.parentDimensions,{width:ct,height:ut}=this,dt=new OutputScale,ft=Math.ceil(ct*et*dt.sx),St=Math.ceil(ut*ot*dt.sy),kt=Ht(this,mp);if(!kt||kt.width===ft&&kt.height===St)return;kt.width=ft,kt.height=St;const Tt=Ht(this,Bo)?Ht(this,Wr):An(this,Fv,Rw).call(this,ft,St),jt=kt.getContext("2d");jt.filter=this._uiManager.hcmFilter,jt.drawImage(Tt,0,0,Tt.width,Tt.height,0,0,ft,St)},$v=new WeakSet,Pw=function(et){if(et){if(Ht(this,Bo)){const ut=this._uiManager.imageManager.getSvgUrl(Ht(this,ws));if(ut)return ut}const ot=document.createElement("canvas");return{width:ot.width,height:ot.height}=Ht(this,Wr),ot.getContext("2d").drawImage(Ht(this,Wr),0,0),ot.toDataURL()}if(Ht(this,Bo)){const[ot,ct]=this.pageDimensions,ut=Math.round(this.width*ot*PixelsPerInch.PDF_TO_CSS_UNITS),dt=Math.round(this.height*ct*PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(ut,dt);return ft.getContext("2d").drawImage(Ht(this,Wr),0,0,Ht(this,Wr).width,Ht(this,Wr).height,0,0,ut,dt),ft.transferToImageBitmap()}return structuredClone(Ht(this,Wr))},vA=new WeakSet,y4=function(et){var ft;const{pageIndex:ot,accessibilityData:{altText:ct}}=this._initialData,ut=et.pageIndex===ot,dt=(((ft=et.accessibilityData)==null?void 0:ft.alt)||"")===ct;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ut&&dt,isSameAltText:dt}},qn(StampEditor,"_type","stamp"),qn(StampEditor,"_editorType",AnnotationEditorType.STAMP);var xy,Bv,_m,Cm,gp,vo,Rm,Vv,zv,Ul,yp,ks,vp,Pm,Hv,sr,Nm,e2,jC,xA,v4,xl,tu,t2,FC,n2,$C,Uv,Nw;const Rl=class Rl{constructor({uiManager:g,pageIndex:et,div:ot,structTreeLayer:ct,accessibilityManager:ut,annotationLayer:dt,drawLayer:ft,textLayer:St,viewport:kt,l10n:Tt}){vn(this,e2);vn(this,xA);vn(this,xl);vn(this,t2);vn(this,n2);vn(this,Uv);vn(this,xy,void 0);vn(this,Bv,!1);vn(this,_m,null);vn(this,Cm,null);vn(this,gp,null);vn(this,vo,new Map);vn(this,Rm,!1);vn(this,Vv,!1);vn(this,zv,!1);vn(this,Ul,null);vn(this,yp,null);vn(this,ks,null);vn(this,vp,null);vn(this,Pm,null);vn(this,Hv,-1);vn(this,sr,void 0);const jt=[...Ht(Rl,Nm).values()];if(!Rl._initialized){Rl._initialized=!0;for(const Rt of jt)Rt.initialize(Tt,g)}g.registerEditorTypes(jt),xn(this,sr,g),this.pageIndex=et,this.div=ot,xn(this,xy,ut),xn(this,_m,dt),this.viewport=kt,xn(this,ks,St),this.drawLayer=ft,this._structTree=ct,Ht(this,sr).addLayer(this)}get isEmpty(){return Ht(this,vo).size===0}get isInvisible(){return this.isEmpty&&Ht(this,sr).getMode()===AnnotationEditorType.NONE}updateToolbar(g){Ht(this,sr).updateToolbar(g)}updateMode(g=Ht(this,sr).getMode()){switch(An(this,Uv,Nw).call(this),g){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:et}=this.div;if(et.toggle("nonEditing",!1),g===AnnotationEditorType.POPUP)et.toggle("commentEditing",!0);else{et.toggle("commentEditing",!1);for(const ot of Ht(Rl,Nm).values())et.toggle(`${ot._type}Editing`,g===ot._editorType)}this.div.hidden=!1}hasTextLayer(g){var et;return g===((et=Ht(this,ks))==null?void 0:et.div)}setEditingState(g){Ht(this,sr).setEditingState(g)}addCommands(g){Ht(this,sr).addCommands(g)}cleanUndoStack(g){Ht(this,sr).cleanUndoStack(g)}toggleDrawing(g=!1){this.div.classList.toggle("drawing",!g)}togglePointerEvents(g=!1){this.div.classList.toggle("disabled",!g)}toggleAnnotationLayerPointerEvents(g=!1){var et;(et=Ht(this,_m))==null||et.div.classList.toggle("disabled",!g)}async enable(){var ot;xn(this,zv,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(ot=Ht(this,Pm))==null||ot.abort(),xn(this,Pm,null);const g=new Set;for(const ct of Ht(this,e2,jC))ct.enableEditing(),ct.show(!0),ct.annotationElementId&&(Ht(this,sr).removeChangedExistingAnnotation(ct),g.add(ct.annotationElementId));const et=Ht(this,_m);if(et)for(const ct of et.getEditableAnnotations()){if(ct.hide(),Ht(this,sr).isDeletedAnnotationElement(ct.data.id)||g.has(ct.data.id))continue;const ut=await this.deserialize(ct);ut&&(this.addOrRebuild(ut),ut.enableEditing())}xn(this,zv,!1),Ht(this,sr)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var ot;if(xn(this,Vv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Ht(this,ks)&&!Ht(this,Pm)){xn(this,Pm,new AbortController);const ct=Ht(this,sr).combinedSignal(Ht(this,Pm));Ht(this,ks).div.addEventListener("pointerdown",ut=>{const{clientX:ft,clientY:St,timeStamp:kt}=ut,Tt=Ht(this,Hv);if(kt-Tt>500){xn(this,Hv,kt);return}xn(this,Hv,-1);const{classList:jt}=this.div;jt.toggle("getElements",!0);const Rt=document.elementsFromPoint(ft,St);if(jt.toggle("getElements",!1),!this.div.contains(Rt[0]))return;let Ft;const $t=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Kt of Rt)if($t.test(Kt.id)){Ft=Kt.id;break}if(!Ft)return;const zt=Ht(this,vo).get(Ft);(zt==null?void 0:zt.annotationElementId)===null&&(ut.stopPropagation(),ut.preventDefault(),zt.dblclick(ut))},{signal:ct,capture:!0})}const g=Ht(this,_m);if(g){const ct=new Map,ut=new Map;for(const ft of Ht(this,e2,jC)){if(ft.disableEditing(),!ft.annotationElementId){ft.updateFakeAnnotationElement(g);continue}if(ft.serialize()!==null){ct.set(ft.annotationElementId,ft);continue}else ut.set(ft.annotationElementId,ft);(ot=this.getEditableAnnotation(ft.annotationElementId))==null||ot.show(),ft.remove()}const dt=g.getEditableAnnotations();for(const ft of dt){const{id:St}=ft.data;if(Ht(this,sr).isDeletedAnnotationElement(St)){ft.updateEdited({deleted:!0});continue}let kt=ut.get(St);if(kt){kt.resetAnnotationElement(ft),kt.show(!1),ft.show();continue}kt=ct.get(St),kt&&(Ht(this,sr).addChangedExistingAnnotation(kt),kt.renderAnnotationElement(ft)&&kt.show(!1)),ft.show()}}An(this,Uv,Nw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:et}=this.div;for(const ct of Ht(Rl,Nm).values())et.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),xn(this,Vv,!1)}getEditableAnnotation(g){var et;return((et=Ht(this,_m))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){Ht(this,sr).getActive()!==g&&Ht(this,sr).setActiveEditor(g)}enableTextSelection(){var g;if(this.div.tabIndex=-1,(g=Ht(this,ks))!=null&&g.div&&!Ht(this,vp)){xn(this,vp,new AbortController);const et=Ht(this,sr).combinedSignal(Ht(this,vp));Ht(this,ks).div.addEventListener("pointerdown",An(this,xA,v4).bind(this),{signal:et}),Ht(this,ks).div.classList.add("highlighting")}}disableTextSelection(){var g;this.div.tabIndex=0,(g=Ht(this,ks))!=null&&g.div&&Ht(this,vp)&&(Ht(this,vp).abort(),xn(this,vp,null),Ht(this,ks).div.classList.remove("highlighting"))}enableClick(){if(Ht(this,Cm))return;xn(this,Cm,new AbortController);const g=Ht(this,sr).combinedSignal(Ht(this,Cm));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:g});const et=this.pointerup.bind(this);this.div.addEventListener("pointerup",et,{signal:g}),this.div.addEventListener("pointercancel",et,{signal:g})}disableClick(){var g;(g=Ht(this,Cm))==null||g.abort(),xn(this,Cm,null)}attach(g){Ht(this,vo).set(g.id,g);const{annotationElementId:et}=g;et&&Ht(this,sr).isDeletedAnnotationElement(et)&&Ht(this,sr).removeDeletedAnnotationElement(g)}detach(g){var et;Ht(this,vo).delete(g.id),(et=Ht(this,xy))==null||et.removePointerInTextLayer(g.contentDiv),!Ht(this,Vv)&&g.annotationElementId&&Ht(this,sr).addDeletedAnnotationElement(g)}remove(g){this.detach(g),Ht(this,sr).removeEditor(g),g.div.remove(),g.isAttachedToDOM=!1}changeParent(g){var et;g.parent!==this&&(g.parent&&g.annotationElementId&&(Ht(this,sr).addDeletedAnnotationElement(g.annotationElementId),AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(!(g.parent===this&&g.isAttachedToDOM)){if(this.changeParent(g),Ht(this,sr).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(!Ht(this,zv)),Ht(this,sr).addToAnnotationStorage(g),g._reportTelemetry(g.telemetryInitialData)}}moveEditorInDOM(g){var ot;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&!Ht(this,gp)&&(g._focusEventsAllowed=!1,xn(this,gp,setTimeout(()=>{xn(this,gp,null),g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:Ht(this,sr)._signal}),et.focus())},0))),g._structTreeParentId=(ot=Ht(this,xy))==null?void 0:ot.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?(g.parent||(g.parent=this),g.rebuild(),g.show()):this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ot=()=>{g.remove()};this.addCommands({cmd:et,undo:ot,mustExec:!1})}getEditorByUID(g){for(const et of Ht(this,vo).values())if(et.uid===g)return et;return null}getNextId(){return Ht(this,sr).getId()}combinedSignal(g){return Ht(this,sr).combinedSignal(g)}canCreateNewEmptyEditor(){var g;return(g=Ht(this,xl,tu))==null?void 0:g.canCreateNewEmptyEditor()}async pasteEditor(g,et){this.updateToolbar(g),await Ht(this,sr).updateMode(g.mode);const{offsetX:ot,offsetY:ct}=An(this,n2,$C).call(this),ut=this.getNextId(),dt=An(this,t2,FC).call(this,{parent:this,id:ut,x:ot,y:ct,uiManager:Ht(this,sr),isCentered:!0,...et});dt&&this.add(dt)}async deserialize(g){var et;return await((et=Ht(Rl,Nm).get(g.annotationType??g.annotationEditorType))==null?void 0:et.deserialize(g,this,Ht(this,sr)))||null}createAndAddNewEditor(g,et,ot={}){const ct=this.getNextId(),ut=An(this,t2,FC).call(this,{parent:this,id:ct,x:g.offsetX,y:g.offsetY,uiManager:Ht(this,sr),isCentered:et,...ot});return ut&&this.add(ut),ut}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(g={}){this.createAndAddNewEditor(An(this,n2,$C).call(this),!0,g)}setSelected(g){Ht(this,sr).setSelected(g)}toggleSelected(g){Ht(this,sr).toggleSelected(g)}unselect(g){Ht(this,sr).unselect(g)}pointerup(g){var ct;const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div||!Ht(this,Rm)||(xn(this,Rm,!1),(ct=Ht(this,xl,tu))!=null&&ct.isDrawer&&Ht(this,xl,tu).supportMultipleDrawings))return;if(!Ht(this,Bv)){xn(this,Bv,!0);return}const ot=Ht(this,sr).getMode();if(ot===AnnotationEditorType.STAMP||ot===AnnotationEditorType.SIGNATURE){Ht(this,sr).unselectAll();return}this.createAndAddNewEditor(g,!1)}pointerdown(g){var ct;if(Ht(this,sr).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),Ht(this,Rm)){xn(this,Rm,!1);return}const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;if(xn(this,Rm,!0),(ct=Ht(this,xl,tu))!=null&&ct.isDrawer){this.startDrawingSession(g);return}const ot=Ht(this,sr).getActive();xn(this,Bv,!ot||ot.isEmpty())}startDrawingSession(g){if(this.div.focus({preventScroll:!0}),Ht(this,Ul)){Ht(this,xl,tu).startDrawing(this,Ht(this,sr),!1,g);return}Ht(this,sr).setCurrentDrawingSession(this),xn(this,Ul,new AbortController);const et=Ht(this,sr).combinedSignal(Ht(this,Ul));this.div.addEventListener("blur",({relatedTarget:ot})=>{ot&&!this.div.contains(ot)&&(xn(this,yp,null),this.commitOrRemove())},{signal:et}),Ht(this,xl,tu).startDrawing(this,Ht(this,sr),!1,g)}pause(g){if(g){const{activeElement:et}=document;this.div.contains(et)&&xn(this,yp,et);return}Ht(this,yp)&&setTimeout(()=>{var et;(et=Ht(this,yp))==null||et.focus(),xn(this,yp,null)},0)}endDrawingSession(g=!1){return Ht(this,Ul)?(Ht(this,sr).setCurrentDrawingSession(null),Ht(this,Ul).abort(),xn(this,Ul,null),xn(this,yp,null),Ht(this,xl,tu).endDrawing(g)):null}findNewParent(g,et,ot){const ct=Ht(this,sr).findParent(et,ot);return ct===null||ct===this?!1:(ct.changeParent(g),!0)}commitOrRemove(){return Ht(this,Ul)?(this.endDrawingSession(),!0):!1}onScaleChanging(){Ht(this,Ul)&&Ht(this,xl,tu).onScaleChangingWhenDrawing(this)}destroy(){var g,et;this.commitOrRemove(),((g=Ht(this,sr).getActive())==null?void 0:g.parent)===this&&(Ht(this,sr).commitOrRemove(),Ht(this,sr).setActiveEditor(null)),Ht(this,gp)&&(clearTimeout(Ht(this,gp)),xn(this,gp,null));for(const ot of Ht(this,vo).values())(et=Ht(this,xy))==null||et.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,Ht(this,vo).clear(),Ht(this,sr).removeLayer(this)}render({viewport:g}){this.viewport=g,setLayerDimensions(this.div,g);for(const et of Ht(this,sr).getEditors(this.pageIndex))this.add(et),et.rebuild();this.updateMode()}update({viewport:g}){Ht(this,sr).commitOrRemove(),An(this,Uv,Nw).call(this);const et=this.viewport.rotation,ot=g.rotation;if(this.viewport=g,setLayerDimensions(this.div,{rotation:ot}),et!==ot)for(const ct of Ht(this,vo).values())ct.rotate(ot)}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}get scale(){return Ht(this,sr).viewParameters.realScale}};xy=new WeakMap,Bv=new WeakMap,_m=new WeakMap,Cm=new WeakMap,gp=new WeakMap,vo=new WeakMap,Rm=new WeakMap,Vv=new WeakMap,zv=new WeakMap,Ul=new WeakMap,yp=new WeakMap,ks=new WeakMap,vp=new WeakMap,Pm=new WeakMap,Hv=new WeakMap,sr=new WeakMap,Nm=new WeakMap,e2=new WeakSet,jC=function(){return Ht(this,vo).size!==0?Ht(this,vo).values():Ht(this,sr).getEditors(this.pageIndex)},xA=new WeakSet,v4=function(g){Ht(this,sr).unselectAll();const{target:et}=g;if(et===Ht(this,ks).div||(et.getAttribute("role")==="img"||et.classList.contains("endOfContent"))&&Ht(this,ks).div.contains(et)){const{isMac:ot}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&ot)return;Ht(this,sr).showAllEditors("highlight",!0,!0),Ht(this,ks).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,Ht(this,sr).direction==="ltr",{target:Ht(this,ks).div,x:g.x,y:g.y}),Ht(this,ks).div.addEventListener("pointerup",()=>{Ht(this,ks).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Ht(this,sr)._signal}),g.preventDefault()}},xl=new WeakSet,tu=function(){return Ht(Rl,Nm).get(Ht(this,sr).getMode())},t2=new WeakSet,FC=function(g){const et=Ht(this,xl,tu);return et?new et.prototype.constructor(g):null},n2=new WeakSet,$C=function(){const{x:g,y:et,width:ot,height:ct}=this.boundingClientRect,ut=Math.max(0,g),dt=Math.max(0,et),ft=Math.min(window.innerWidth,g+ot),St=Math.min(window.innerHeight,et+ct),kt=(ut+ft)/2-g,Tt=(dt+St)/2-et,[jt,Rt]=this.viewport.rotation%180===0?[kt,Tt]:[Tt,kt];return{offsetX:jt,offsetY:Rt}},Uv=new WeakSet,Nw=function(){for(const g of Ht(this,vo).values())g.isEmpty()&&g.remove()},qn(Rl,"_initialized",!1),vn(Rl,Nm,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(g=>[g._editorType,g])));let AnnotationEditorLayer=Rl;var Gl,Js,by,r2,bA,x4,i2,BC,EA,b4,s2,VC;const us=class us{constructor({pageIndex:g}){vn(this,i2);vn(this,EA);vn(this,s2);vn(this,Gl,null);vn(this,Js,new Map);vn(this,by,new Map);this.pageIndex=g}setParent(g){if(!Ht(this,Gl)){xn(this,Gl,g);return}if(Ht(this,Gl)!==g){if(Ht(this,Js).size>0)for(const et of Ht(this,Js).values())et.remove(),g.append(et);xn(this,Gl,g)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(g,et=!1,ot=!1){const ct=cs(us,r2)._++,ut=An(this,i2,BC).call(this),dt=us._svgFactory.createElement("defs");ut.append(dt);const ft=us._svgFactory.createElement("path");dt.append(ft);const St=`path_p${this.pageIndex}_${ct}`;ft.setAttribute("id",St),ft.setAttribute("vector-effect","non-scaling-stroke"),et&&Ht(this,by).set(ct,ft);const kt=ot?An(this,EA,b4).call(this,dt,St):null,Tt=us._svgFactory.createElement("use");return ut.append(Tt),Tt.setAttribute("href",`#${St}`),this.updateProperties(ut,g),Ht(this,Js).set(ct,ut),{id:ct,clipPathId:`url(#${kt})`}}drawOutline(g,et){const ot=cs(us,r2)._++,ct=An(this,i2,BC).call(this),ut=us._svgFactory.createElement("defs");ct.append(ut);const dt=us._svgFactory.createElement("path");ut.append(dt);const ft=`path_p${this.pageIndex}_${ot}`;dt.setAttribute("id",ft),dt.setAttribute("vector-effect","non-scaling-stroke");let St;if(et){const jt=us._svgFactory.createElement("mask");ut.append(jt),St=`mask_p${this.pageIndex}_${ot}`,jt.setAttribute("id",St),jt.setAttribute("maskUnits","objectBoundingBox");const Rt=us._svgFactory.createElement("rect");jt.append(Rt),Rt.setAttribute("width","1"),Rt.setAttribute("height","1"),Rt.setAttribute("fill","white");const Ft=us._svgFactory.createElement("use");jt.append(Ft),Ft.setAttribute("href",`#${ft}`),Ft.setAttribute("stroke","none"),Ft.setAttribute("fill","black"),Ft.setAttribute("fill-rule","nonzero"),Ft.classList.add("mask")}const kt=us._svgFactory.createElement("use");ct.append(kt),kt.setAttribute("href",`#${ft}`),St&&kt.setAttribute("mask",`url(#${St})`);const Tt=kt.cloneNode();return ct.append(Tt),kt.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),this.updateProperties(ct,g),Ht(this,Js).set(ot,ct),ot}finalizeDraw(g,et){Ht(this,by).delete(g),this.updateProperties(g,et)}updateProperties(g,et){var St;if(!et)return;const{root:ot,bbox:ct,rootClass:ut,path:dt}=et,ft=typeof g=="number"?Ht(this,Js).get(g):g;if(ft){if(ot&&An(this,s2,VC).call(this,ft,ot),ct&&An(St=us,bA,x4).call(St,ft,ct),ut){const{classList:kt}=ft;for(const[Tt,jt]of Object.entries(ut))kt.toggle(Tt,jt)}if(dt){const Tt=ft.firstChild.firstChild;An(this,s2,VC).call(this,Tt,dt)}}}updateParent(g,et){if(et===this)return;const ot=Ht(this,Js).get(g);ot&&(Ht(et,Gl).append(ot),Ht(this,Js).delete(g),Ht(et,Js).set(g,ot))}remove(g){Ht(this,by).delete(g),Ht(this,Gl)!==null&&(Ht(this,Js).get(g).remove(),Ht(this,Js).delete(g))}destroy(){xn(this,Gl,null);for(const g of Ht(this,Js).values())g.remove();Ht(this,Js).clear(),Ht(this,by).clear()}};Gl=new WeakMap,Js=new WeakMap,by=new WeakMap,r2=new WeakMap,bA=new WeakSet,x4=function(g,[et,ot,ct,ut]){const{style:dt}=g;dt.top=`${100*ot}%`,dt.left=`${100*et}%`,dt.width=`${100*ct}%`,dt.height=`${100*ut}%`},i2=new WeakSet,BC=function(){const g=us._svgFactory.create(1,1,!0);return Ht(this,Gl).append(g),g.setAttribute("aria-hidden",!0),g},EA=new WeakSet,b4=function(g,et){const ot=us._svgFactory.createElement("clipPath");g.append(ot);const ct=`clip_${et}`;ot.setAttribute("id",ct),ot.setAttribute("clipPathUnits","objectBoundingBox");const ut=us._svgFactory.createElement("use");return ot.append(ut),ut.setAttribute("href",`#${et}`),ut.classList.add("clip"),ct},s2=new WeakSet,VC=function(g,et){for(const[ot,ct]of Object.entries(et))ct===null?g.removeAttribute(ot):g.setAttribute(ot,ct)},vn(us,bA),vn(us,r2,0);let DrawLayer=us;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util:Util$1,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util:Util$1,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(it,g,et){for(et of it.keys())if(dequal(et,g))return et}function dequal(it,g){var et,ot,ct;if(it===g)return!0;if(it&&g&&(et=it.constructor)===g.constructor){if(et===Date)return it.getTime()===g.getTime();if(et===RegExp)return it.toString()===g.toString();if(et===Array){if((ot=it.length)===g.length)for(;ot--&&dequal(it[ot],g[ot]););return ot===-1}if(et===Set){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot,ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!g.has(ct))return!1;return!0}if(et===Map){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot[0],ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!dequal(ot[1],g.get(ct)))return!1;return!0}if(et===ArrayBuffer)it=new Uint8Array(it),g=new Uint8Array(g);else if(et===DataView){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it.getInt8(ot)===g.getInt8(ot););return ot===-1}if(ArrayBuffer.isView(it)){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it[ot]===g[ot];);return ot===-1}if(!et||typeof it=="object"){ot=0;for(et in it)if(has.call(it,et)&&++ot&&!has.call(g,et)||!(et in g)||!dequal(it[et],g[et]))return!1;return Object.keys(g).length===ot}}return it!==it&&g!==g}function makeCancellablePromise(it){let g=!1;return{promise:new Promise((ot,ct)=>{it.then(ut=>!g&&ot(ut)).catch(ut=>!g&&ct(ut))}),cancel(){g=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(it,g){const et={};for(const ot of allEvents){const ct=it[ot];ct&&(g?et[ot]=ut=>ct(ut,g(ot)):et[ot]=ct)}return et}var isProduction=!0,prefix="Invariant failed";function invariant(it,g){if(!it){if(isProduction)throw new Error(prefix);var et=typeof g=="function"?g():g,ot=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(ot)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(g){this.pdfDocument=g}setViewer(g){this.pdfViewer=g}setExternalLinkRel(g){this.externalLinkRel=g}setExternalLinkTarget(g){this.externalLinkTarget=g}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(g){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=g}get rotation(){return 0}set rotation(g){}addLinkAttributes(g,et,ot){g.href=et,g.rel=this.externalLinkRel||DEFAULT_LINK_REL,g.target=ot?"_blank":this.externalLinkTarget||""}goToDestination(g){return new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(g,"Destination is not specified."),typeof g=="string"?this.pdfDocument.getDestination(g).then(et):Array.isArray(g)?et(g):g.then(et)}).then(et=>{invariant(Array.isArray(et),`"${et}" is not a valid destination array.`);const ot=et[0];new Promise(ct=>{invariant(this.pdfDocument,"PDF document not loaded."),ot instanceof Object?this.pdfDocument.getPageIndex(ot).then(ut=>{ct(ut)}).catch(()=>{invariant(!1,`"${ot}" is not a valid page reference.`)}):typeof ot=="number"?ct(ot):invariant(!1,`"${ot}" is not a valid destination reference.`)}).then(ct=>{const ut=ct+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(ut>=1&&ut<=this.pagesCount,`"${ut}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:et,pageIndex:ct,pageNumber:ut})})})}goToPage(g){const et=g-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:et,pageNumber:g})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(g){this.goToDestination(g)}}function Message({children:it,type:g}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${g}`,children:it})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer(it,g){switch(g.type){case"RESOLVE":return{value:g.value,error:void 0};case"REJECT":return{value:!1,error:g.error};case"RESET":return{value:void 0,error:void 0};default:return it}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(it){return typeof it<"u"}function isProvided(it){return isDefined(it)&&it!==null}function isString(it){return typeof it=="string"}function isArrayBuffer(it){return it instanceof ArrayBuffer}function isBlob(it){return invariant(isBrowser,"isBlob can only be used in a browser environment"),it instanceof Blob}function isDataURI(it){return isString(it)&&/^data:/.test(it)}function dataURItoByteString(it){invariant(isDataURI(it),"Invalid data URI.");const[g="",et=""]=it.split(",");return g.split(";").indexOf("base64")!==-1?atob(et):unescape(et)}function getDevicePixelRatio$1(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(it){it!=null&&it.cancel&&it.cancel()}function makePageCallback(it,g){return Object.defineProperty(it,"width",{get(){return this.view[2]*g},configurable:!0}),Object.defineProperty(it,"height",{get(){return this.view[3]*g},configurable:!0}),Object.defineProperty(it,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(it,"originalHeight",{get(){return this.view[3]},configurable:!0}),it}function isCancelException(it){return it.name==="RenderingCancelledException"}function loadFromFile(it){return new Promise((g,et)=>{const ot=new FileReader;ot.onload=()=>{if(!ot.result)return et(new Error("Error while reading a file."));g(ot.result)},ot.onerror=ct=>{if(!ct.target)return et(new Error("Error while reading a file."));const{error:ut}=ct.target;if(!ut)return et(new Error("Error while reading a file."));switch(ut.code){case ut.NOT_FOUND_ERR:return et(new Error("Error while reading a file: File not found."));case ut.SECURITY_ERR:return et(new Error("Error while reading a file: Security error."));case ut.ABORT_ERR:return et(new Error("Error while reading a file: Aborted."));default:return et(new Error("Error while reading a file."))}},ot.readAsArrayBuffer(it)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(it,g)=>{switch(g){case PasswordResponses$1.NEED_PASSWORD:{const et=prompt("Enter the password to open this PDF file.");it(et);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const et=prompt("Invalid password. Please try again.");it(et);break}}};function isParameterObject(it){return typeof it=="object"&&it!==null&&("data"in it||"range"in it||"url"in it)}const Document=reactExports.forwardRef(function it({children:g,className:et,error:ot="Failed to load PDF file.",externalLinkRel:ct,externalLinkTarget:ut,file:dt,inputRef:ft,imageResourcesPath:St,loading:kt="Loading PDF…",noData:Tt="No PDF file specified.",onItemClick:jt,onLoadError:Rt,onLoadProgress:Ft,onLoadSuccess:$t,onPassword:zt=defaultOnPassword,onSourceError:Kt,onSourceSuccess:Bt,options:Ut,renderMode:Jt,rotate:en,scale:tn,...nn},rn){const[on,dn]=useResolver(),{value:cn,error:fn}=on,[mn,En]=useResolver(),{value:Sn,error:wn}=mn,hn=reactExports.useRef(new LinkService),yn=reactExports.useRef([]),an=reactExports.useRef(void 0),un=reactExports.useRef(void 0);dt&&dt!==an.current&&isParameterObject(dt)&&(warning$1(!dequal(dt,an.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),an.current=dt),Ut&&Ut!==un.current&&(warning$1(!dequal(Ut,un.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),un.current=Ut);const bn=reactExports.useRef({scrollPageIntoView:Un=>{const{dest:Hn,pageNumber:ir,pageIndex:ur=ir-1}=Un;if(jt){jt({dest:Hn,pageIndex:ur,pageNumber:ir});return}const yr=yn.current[ur];if(yr){yr.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${ir} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(rn,()=>({linkService:hn,pages:yn,viewer:bn}),[]);function pn(){Bt&&Bt()}function kn(){fn&&(warning$1(!1,fn.toString()),Kt&&Kt(fn))}function _n(){dn({type:"RESET"})}reactExports.useEffect(_n,[dt,dn]);const Rn=reactExports.useCallback(async()=>{if(!dt)return null;if(typeof dt=="string")return isDataURI(dt)?{data:dataURItoByteString(dt)}:(displayCORSWarning(),{url:dt});if(dt instanceof PDFDataRangeTransport)return{range:dt};if(isArrayBuffer(dt))return{data:dt};if(isBrowser&&isBlob(dt))return{data:await loadFromFile(dt)};if(invariant(typeof dt=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(dt),"Invalid parameter object: need either .data, .range or .url"),"url"in dt&&typeof dt.url=="string"){if(isDataURI(dt.url)){const{url:Un,...Hn}=dt;return{data:dataURItoByteString(Un),...Hn}}displayCORSWarning()}return dt},[dt]);reactExports.useEffect(()=>{const Un=makeCancellablePromise(Rn());return Un.promise.then(Hn=>{dn({type:"RESOLVE",value:Hn})}).catch(Hn=>{dn({type:"REJECT",error:Hn})}),()=>{cancelRunningTask(Un)}},[Rn,dn]),reactExports.useEffect(()=>{if(!(typeof cn>"u")){if(cn===!1){kn();return}pn()}},[cn]);function Nn(){Sn&&($t&&$t(Sn),yn.current=new Array(Sn.numPages),hn.current.setDocument(Sn))}function Cn(){wn&&(warning$1(!1,wn.toString()),Rt&&Rt(wn))}reactExports.useEffect(function(){En({type:"RESET"})},[En,cn]),reactExports.useEffect(function(){if(!cn)return;const Hn=Ut?{...cn,...Ut}:cn,ir=getDocument(Hn);Ft&&(ir.onProgress=Ft),zt&&(ir.onPassword=zt);const ur=ir,yr=ur.promise.then(Bn=>{En({type:"RESOLVE",value:Bn})}).catch(Bn=>{ur.destroyed||En({type:"REJECT",error:Bn})});return()=>{yr.finally(()=>ur.destroy())}},[Ut,En,cn]),reactExports.useEffect(()=>{if(!(typeof Sn>"u")){if(Sn===!1){Cn();return}Nn()}},[Sn]),reactExports.useEffect(function(){hn.current.setViewer(bn.current),hn.current.setExternalLinkRel(ct),hn.current.setExternalLinkTarget(ut)},[ct,ut]);const Mn=reactExports.useCallback((Un,Hn)=>{yn.current[Un]=Hn},[]),In=reactExports.useCallback(Un=>{delete yn.current[Un]},[]),On=reactExports.useMemo(()=>({imageResourcesPath:St,linkService:hn.current,onItemClick:jt,pdf:Sn,registerPage:Mn,renderMode:Jt,rotate:en,scale:tn,unregisterPage:In}),[St,jt,Sn,Mn,Jt,en,tn,In]),jn=reactExports.useMemo(()=>makeEventProps(nn,()=>Sn),[nn,Sn]);function Gn(){function Un(ir){return!!(ir!=null&&ir.pdf)}if(!Un(On))throw new Error("pdf is undefined");const Hn=typeof g=="function"?g(On):g;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:On,children:Hn})}function Jn(){return dt?Sn==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof kt=="function"?kt():kt}):Sn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof ot=="function"?ot():ot}):Gn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Tt=="function"?Tt():Tt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",et),ref:ft,...jn,children:Jn()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];var et=it.filter(Boolean);if(et.length<=1){var ot=et[0];return ot||null}return function(ut){for(var dt=0,ft=et;dt<ft.length;dt++){var St=ft[dt];typeof St=="function"?St(ut):St&&(St.current=ut)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const it=useDocumentContext(),g=usePageContext();invariant(g,"Unable to find Page context.");const et={...it,...g},{imageResourcesPath:ot,linkService:ct,onGetAnnotationsError:ut,onGetAnnotationsSuccess:dt,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:St,page:kt,pdf:Tt,renderForms:jt,rotate:Rt,scale:Ft=1}=et;invariant(Tt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(kt,"Attempted to load page annotations, but no page was specified."),invariant(ct,"Attempted to load page annotations, but no linkService was specified.");const[$t,zt]=useResolver(),{value:Kt,error:Bt}=$t,Ut=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function Jt(){Kt&&dt&&dt(Kt)}function en(){Bt&&(warning$1(!1,Bt.toString()),ut&&ut(Bt))}reactExports.useEffect(function(){zt({type:"RESET"})},[zt,kt]),reactExports.useEffect(function(){if(!kt)return;const dn=makeCancellablePromise(kt.getAnnotations()),cn=dn;return dn.promise.then(fn=>{zt({type:"RESOLVE",value:fn})}).catch(fn=>{zt({type:"REJECT",error:fn})}),()=>{cancelRunningTask(cn)}},[zt,kt]),reactExports.useEffect(()=>{if(Kt!==void 0){if(Kt===!1){en();return}Jt()}},[Kt]);function tn(){St&&St()}function nn(on){warning$1(!1,`${on}`),ft&&ft(on)}const rn=reactExports.useMemo(()=>kt.getViewport({scale:Ft,rotation:Rt}),[kt,Rt,Ft]);return reactExports.useEffect(function(){if(!Tt||!kt||!ct||!Kt)return;const{current:dn}=Ut;if(!dn)return;const cn=rn.clone({dontFlip:!0}),fn={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Tt.annotationStorage,commentManager:null,div:dn,l10n:null,linkService:ct,page:kt,structTreeLayer:null,viewport:cn},mn={annotations:Kt,annotationStorage:Tt.annotationStorage,div:dn,imageResourcesPath:ot,linkService:ct,page:kt,renderForms:jt,viewport:cn};dn.innerHTML="";try{new AnnotationLayer$1(fn).render(mn),tn()}catch(En){nn(En)}return()=>{}},[Kt,ot,ct,kt,Tt,jt,rn]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Ut})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(it){return it in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(it){return"children"in it}function isStructTreeNodeWithOnlyContentChild(it){return isStructTreeNode(it)?it.children.length===1&&0 in it.children&&"id"in it.children[0]:!1}function getRoleAttributes(it){const g={};if(isStructTreeNode(it)){const{role:et}=it,ot=et.match(HEADING_PATTERN);if(ot)g.role="heading",g["aria-level"]=Number(ot[1]);else if(isPdfRole(et)){const ct=PDF_ROLE_TO_HTML_ROLE[et];ct&&(g.role=ct)}}return g}function getBaseAttributes(it){const g={};if(isStructTreeNode(it)){if(it.alt!==void 0&&(g["aria-label"]=it.alt),it.lang!==void 0&&(g.lang=it.lang),isStructTreeNodeWithOnlyContentChild(it)){const[et]=it.children;if(et){const ot=getBaseAttributes(et);return{...g,...ot}}}}else"id"in it&&(g["aria-owns"]=it.id);return g}function getAttributes(it){return it?{...getRoleAttributes(it),...getBaseAttributes(it)}:null}function StructTreeItem({className:it,node:g}){const et=reactExports.useMemo(()=>getAttributes(g),[g]),ot=reactExports.useMemo(()=>!isStructTreeNode(g)||isStructTreeNodeWithOnlyContentChild(g)?null:g.children.map((ct,ut)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ct},ut)),[g]);return jsxRuntimeExports.jsx("span",{className:it,...et,children:ot})}function StructTree(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{onGetStructTreeError:g,onGetStructTreeSuccess:et}=it,[ot,ct]=useResolver(),{value:ut,error:dt}=ot,{customTextRenderer:ft,page:St}=it;function kt(){ut&&et&&et(ut)}function Tt(){dt&&(warning$1(!1,dt.toString()),g&&g(dt))}return reactExports.useEffect(function(){ct({type:"RESET"})},[ct,St]),reactExports.useEffect(function(){if(ft||!St)return;const Rt=makeCancellablePromise(St.getStructTree()),Ft=Rt;return Rt.promise.then($t=>{ct({type:"RESOLVE",value:$t})}).catch($t=>{ct({type:"REJECT",error:$t})}),()=>cancelRunningTask(Ft)},[ft,St,ct]),reactExports.useEffect(()=>{if(ut!==void 0){if(ut===!1){Tt();return}kt()}},[ut]),ut?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ut}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas$1(it){const g=usePageContext();invariant(g,"Unable to find Page context.");const et={...g,...it},{_className:ot,canvasBackground:ct,devicePixelRatio:ut=getDevicePixelRatio$1(),onRenderError:dt,onRenderSuccess:ft,page:St,renderForms:kt,renderTextLayer:Tt,rotate:jt,scale:Rt}=et,{canvasRef:Ft}=it;invariant(St,"Attempted to render page canvas, but no page was specified.");const $t=reactExports.useRef(null);function zt(){St&&ft&&ft(makePageCallback(St,Rt))}function Kt(en){isCancelException(en)||(warning$1(!1,en.toString()),dt&&dt(en))}const Bt=reactExports.useMemo(()=>St.getViewport({scale:Rt*ut,rotation:jt}),[ut,St,jt,Rt]),Ut=reactExports.useMemo(()=>St.getViewport({scale:Rt,rotation:jt}),[St,jt,Rt]);reactExports.useEffect(function(){if(!St)return;St.cleanup();const{current:tn}=$t;if(!tn)return;tn.width=Bt.width,tn.height=Bt.height,tn.style.width=`${Math.floor(Ut.width)}px`,tn.style.height=`${Math.floor(Ut.height)}px`,tn.style.visibility="hidden";const nn={annotationMode:kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:tn,canvasContext:tn.getContext("2d",{alpha:!1}),viewport:Bt};ct&&(nn.background=ct);const rn=St.render(nn),on=rn;return rn.promise.then(()=>{tn.style.visibility="",zt()}).catch(Kt),()=>cancelRunningTask(on)},[ct,St,kt,Bt,Ut]);const Jt=reactExports.useCallback(()=>{const{current:en}=$t;en&&(en.width=0,en.height=0)},[]);return reactExports.useEffect(()=>Jt,[Jt]),jsxRuntimeExports.jsx("canvas",{className:`${ot}__canvas`,dir:"ltr",ref:mergeRefs(Ft,$t),style:{display:"block",userSelect:"none"},children:Tt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(it){return"str"in it}function TextLayer(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{customTextRenderer:g,onGetTextError:et,onGetTextSuccess:ot,onRenderTextLayerError:ct,onRenderTextLayerSuccess:ut,page:dt,pageIndex:ft,pageNumber:St,rotate:kt,scale:Tt}=it;invariant(dt,"Attempted to load page text content, but no page was specified.");const[jt,Rt]=useResolver(),{value:Ft,error:$t}=jt,zt=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Kt(){Ft&&ot&&ot(Ft)}function Bt(){$t&&(warning$1(!1,$t.toString()),et&&et($t))}reactExports.useEffect(function(){Rt({type:"RESET"})},[dt,Rt]),reactExports.useEffect(function(){if(!dt)return;const on=makeCancellablePromise(dt.getTextContent()),dn=on;return on.promise.then(cn=>{Rt({type:"RESOLVE",value:cn})}).catch(cn=>{Rt({type:"REJECT",error:cn})}),()=>cancelRunningTask(dn)},[dt,Rt]),reactExports.useEffect(()=>{if(Ft!==void 0){if(Ft===!1){Bt();return}Kt()}},[Ft]);const Ut=reactExports.useCallback(()=>{ut&&ut()},[ut]),Jt=reactExports.useCallback(rn=>{warning$1(!1,rn.toString()),ct&&ct(rn)},[ct]);function en(){const rn=zt.current;rn&&rn.classList.add("selecting")}function tn(){const rn=zt.current;rn&&rn.classList.remove("selecting")}const nn=reactExports.useMemo(()=>dt.getViewport({scale:Tt,rotation:kt}),[dt,kt,Tt]);return reactExports.useLayoutEffect(function(){if(!dt||!Ft)return;const{current:on}=zt;if(!on)return;on.innerHTML="";const dn=dt.streamTextContent({includeMarkedContent:!0}),cn={container:on,textContentSource:dn,viewport:nn},fn=new TextLayer$1(cn),mn=fn;return fn.render().then(()=>{const En=document.createElement("div");En.className="endOfContent",on.append(En);const Sn=on.querySelectorAll('[role="presentation"]');if(g){let wn=0;Ft.items.forEach((hn,yn)=>{if(!isTextItem(hn))return;const an=Sn[wn];if(!an)return;const un=g({pageIndex:ft,pageNumber:St,itemIndex:yn,...hn});an.innerHTML=un,wn+=hn.str&&hn.hasEOL?2:1})}Ut()}).catch(Jt),()=>cancelRunningTask(mn)},[g,Jt,Ut,dt,ft,St,Ft,nn]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:tn,onMouseDown:en,ref:zt})}const defaultScale=1;function Page(it){const et={...useDocumentContext(),...it},{_className:ot="react-pdf__Page",_enableRegisterUnregisterPage:ct=!0,canvasBackground:ut,canvasRef:dt,children:ft,className:St,customRenderer:kt,customTextRenderer:Tt,devicePixelRatio:jt,error:Rt="Failed to load the page.",height:Ft,inputRef:$t,loading:zt="Loading page…",noData:Kt="No page specified.",onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ut,onGetStructTreeError:Jt,onGetStructTreeSuccess:en,onGetTextError:tn,onGetTextSuccess:nn,onLoadError:rn,onLoadSuccess:on,onRenderAnnotationLayerError:dn,onRenderAnnotationLayerSuccess:cn,onRenderError:fn,onRenderSuccess:mn,onRenderTextLayerError:En,onRenderTextLayerSuccess:Sn,pageIndex:wn,pageNumber:hn,pdf:yn,registerPage:an,renderAnnotationLayer:un=!0,renderForms:bn=!1,renderMode:pn="canvas",renderTextLayer:kn=!0,rotate:_n,scale:Rn=defaultScale,unregisterPage:Nn,width:Cn,...Mn}=et,[In,On]=useResolver(),{value:jn,error:Gn}=In,Jn=reactExports.useRef(null);invariant(yn,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Un=isProvided(hn)?hn-1:wn??null,Hn=hn??(isProvided(wn)?wn+1:null),ir=_n??(jn?jn.rotate:null),ur=reactExports.useMemo(()=>{if(!jn)return null;let Rr=1;const br=Rn??defaultScale;if(Cn||Ft){const Ts=jn.getViewport({scale:1,rotation:ir});Cn?Rr=Cn/Ts.width:Ft&&(Rr=Ft/Ts.height)}return br*Rr},[Ft,jn,ir,Rn,Cn]);reactExports.useEffect(function(){return()=>{isProvided(Un)&&ct&&Nn&&Nn(Un)}},[ct,yn,Un,Nn]);function yr(){if(on){if(!jn||!ur)return;on(makePageCallback(jn,ur))}if(ct&&an){if(!isProvided(Un)||!Jn.current)return;an(Un,Jn.current)}}function Bn(){Gn&&(warning$1(!1,Gn.toString()),rn&&rn(Gn))}reactExports.useEffect(function(){On({type:"RESET"})},[On,yn,Un]),reactExports.useEffect(function(){if(!yn||!Hn)return;const br=makeCancellablePromise(yn.getPage(Hn)),Ts=br;return br.promise.then(Tr=>{On({type:"RESOLVE",value:Tr})}).catch(Tr=>{On({type:"REJECT",error:Tr})}),()=>cancelRunningTask(Ts)},[On,yn,Hn]),reactExports.useEffect(()=>{if(jn!==void 0){if(jn===!1){Bn();return}yr()}},[jn,ur]);const zn=reactExports.useMemo(()=>isProvided(Un)&&Hn&&isProvided(ir)&&isProvided(ur)?{_className:ot,canvasBackground:ut,customTextRenderer:Tt,devicePixelRatio:jt,onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ut,onGetStructTreeError:Jt,onGetStructTreeSuccess:en,onGetTextError:tn,onGetTextSuccess:nn,onRenderAnnotationLayerError:dn,onRenderAnnotationLayerSuccess:cn,onRenderError:fn,onRenderSuccess:mn,onRenderTextLayerError:En,onRenderTextLayerSuccess:Sn,page:jn,pageIndex:Un,pageNumber:Hn,renderForms:bn,renderTextLayer:kn,rotate:ir,scale:ur}:null,[ot,ut,Tt,jt,Bt,Ut,Jt,en,tn,nn,dn,cn,fn,mn,En,Sn,jn,Un,Hn,bn,kn,ir,ur]),Kn=reactExports.useMemo(()=>makeEventProps(Mn,()=>jn&&(ur?makePageCallback(jn,ur):void 0)),[Mn,jn,ur]),Yn=`${Un}@${ur}/${ir}`;function Wn(){switch(pn){case"custom":return invariant(kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(kt,{},`${Yn}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas$1,{canvasRef:dt},`${Yn}_canvas`)}}function lr(){return kn?jsxRuntimeExports.jsx(TextLayer,{},`${Yn}_text`):null}function or(){return un?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Yn}_annotations`):null}function cr(){function Rr(Ts){return!!(Ts!=null&&Ts.page)}if(!Rr(zn))throw new Error("page is undefined");const br=typeof ft=="function"?ft(zn):ft;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:zn,children:[Wn(),lr(),or(),br]})}function Cr(){return Hn?yn===null||jn===void 0||jn===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof zt=="function"?zt():zt}):yn===!1||jn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof Rt=="function"?Rt():Rt}):cr():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Kt=="function"?Kt():Kt})}return jsxRuntimeExports.jsx("div",{className:clsx(ot,St),"data-page-number":Hn,ref:mergeRefs($t,Jn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ur}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ut||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Kn,children:Cr()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:it,fileTitle:g,partNumber:et,sourceType:ot="magnet",onClose:ct}){const[ut,dt]=reactExports.useState(null),[ft,St]=reactExports.useState(1.2),[kt,Tt]=reactExports.useState(!1),[jt,Rt]=reactExports.useState(!1),[Ft,$t]=reactExports.useState(null),zt=reactExports.useMemo(()=>it?{url:`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(it)}`}:null,[it]);if(!it)return null;reactExports.useEffect(()=>{if(!it)return;let Bt,Ut=0;const Jt=async()=>{try{const en=await fetch(zt.url,{method:"HEAD"}),tn=en.headers.get("content-type");en.ok&&(tn!=null&&tn.includes("pdf"))?Tt(!0):Ut<10?(Ut++,Bt=setTimeout(Jt,1500)):$t("PDF is still being finalized. Try again in a few seconds.")}catch{Ut<10?(Ut++,Bt=setTimeout(Jt,1500)):$t("PDF is still being finalized. Try again shortly.")}};return Jt(),()=>clearTimeout(Bt)},[it]);const Kt=async()=>{try{Rt(!0);const Bt=await fetch(zt.url);if(!Bt.ok)throw new Error(`Failed: ${Bt.status} ${Bt.statusText}`);const Ut=await Bt.blob(),Jt=URL.createObjectURL(Ut),en=document.createElement("a");if(en.href=Jt,ot==="book"){const tn=(g||"Book").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),nn=et?`_Part_${et}`:"";en.download=`${tn}${nn}.pdf`}else if(ot==="magnet"){const tn=(g||"Lead_Magnet").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_");en.download=`${tn}.pdf`}else en.download="document.pdf";document.body.appendChild(en),en.click(),document.body.removeChild(en),URL.revokeObjectURL(Jt),await new Promise(tn=>setTimeout(tn,2e3))}catch(Bt){console.error("Download error:",Bt),alert("❌ Download failed. Please try again.")}finally{Rt(!1)}};return reactExports.useEffect(()=>{if(!it){Tt(!1),$t(null),Rt(!1),dt(null),St(1.2);return}Tt(!1),$t(null),Rt(!1),dt(null),St(1.2)},[it,ct]),reactExports.useEffect(()=>{const Bt=()=>St(window.innerWidth<640?.8:1.2);return window.addEventListener("resize",Bt),Bt(),()=>window.removeEventListener("resize",Bt)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:"🧾 PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(ft+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>St(Math.max(ft-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Kt,disabled:jt,className:`p-2 rounded-lg transition text-white ${jt?"bg-green-800 cursor-wait":"bg-green-600 hover:bg-green-600/90"}`,title:"Download",children:jt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading…"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$2,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!kt&&!Ft&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:"🧩 Finalizing your PDF — just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),Ft&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:Ft})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${kt?"opacity-100":"opacity-0"}`,children:kt&&!Ft&&jsxRuntimeExports.jsx(Document$1,{file:zt,onLoadSuccess:({numPages:Bt})=>dt(Bt),onLoadError:Bt=>{console.error("PDF load error:",Bt),$t("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF…"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(ut||0),(Bt,Ut)=>jsxRuntimeExports.jsx(Page,{pageNumber:Ut+1,scale:ft,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:Math.min(window.innerWidth-40,900)},`page_${Ut+1}`))})})})]})]})}function NewContentModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1);async function dt(){if(!et){y$4.error("Please select a document type.",{position:"top-right",autoClose:2500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"});return}ut(!0),it({contentType:et})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Select Document Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:[{label:"Lead Magnet",value:"lead_magnet",description:"Generate a persuasive, marketing-focused guide designed to attract and convert readers."},{label:"Learning Document",value:"learning_doc",description:"Create a detailed, step-by-step educational document that teaches practical real-world skills."}].map(ft=>jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg border p-3 transition ${et===ft.value?"border-green bg-green/10":"border-gray-700 hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"contentType",value:ft.value,checked:et===ft.value,onChange:St=>ot(St.target.value),className:"accent-green mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-base",children:ft.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ft.description})]})]},ft.value))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:ct,className:"bg-muteGrey px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:ct?"Loading...":"Continue"})]})]})})}function MagnetCardList({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var jt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!kt.length)return null;function Tt(Rt){dt(!1),g(ft,Rt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[kt.map(Rt=>{var Ft,$t;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"aspect-[4/3] rounded-lg overflow-hidden border border-gray-700 mb-3",children:Rt.cover_image?jsxRuntimeExports.jsx("img",{src:Rt.cover_image,alt:Rt.title||"Cover",className:"object-cover w-full h-full"}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-500 italic",children:"No Preview"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate max-w-[70%]",children:Rt.title||"Digital Asset"}),Rt.theme?jsxRuntimeExports.jsx("span",{className:"px-2 py-[2px] rounded-full text-[10px]",style:{background:((Ft=themeStyles[Rt.theme])==null?void 0:Ft.background)||"#333",color:(($t=themeStyles[Rt.theme])==null?void 0:$t.color)||"#fff"},children:Rt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-[10px]",children:"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",Rt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:Rt.status==="completed"?"Completed":Rt.status==="pending"?"Building...":Rt.status==="failed"?"Failed":"Idle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(Rt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(Rt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rt.edit_used||et(Rt.id)},disabled:Rt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${Rt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${Rt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:Rt.edit_used?"Closed":"Edit"})]})]})]})]},Rt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((jt=kt.find(Rt=>Rt.pdf_url===ot))==null?void 0:jt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function PaginationControls({currentPage:it,totalPages:g,onPageChange:et}){return g<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:it===1,onClick:()=>et(it-1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:["Page ",it," of ",g]}),jsxRuntimeExports.jsx("button",{disabled:it===g,onClick:()=>et(it+1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Next"})]})}function SupportTab(){const[it,g]=reactExports.useState(!1),et=[{q:"How do I generate a lead magnet?",a:"Fill out your prompt, upload a logo, add your link, select a theme, and click “Generate.” Your PDF will be automatically created and ready to download."},{q:"How long does it take?",a:"Most PDFs take between 5–15 seconds to generate, depending on the number of pages and theme you select."},{q:"Where can I find my generated PDFs?",a:"All completed lead magnets are available in your dashboard under “My Lead Magnets.” You can view, download, or regenerate them anytime."},{q:"Can I generate more than one lead magnet?",a:"Yes! You can create as many as you want. Simply open the Lead Magnet Creator and repeat the process with a new prompt or design."},{q:"Can I use my own branding?",a:"Absolutely. You can upload your own logo and link to your website or product page. Themes adjust automatically to fit your brand look."},{q:"What are Pro Covers?",a:"Pro Covers is an exclusive upgrade that lets you upload custom cover images for your lead magnets. Your uploaded cover appears as the first page of your PDF, giving your content a professional, branded presentation. In addition to uploading your own designs, Pro Covers also includes access to thousands of royalty-free Unsplash images you can instantly use as backgrounds or full covers. This gives you unlimited creative flexibility without any licensing worries—available only with the Pro Covers plan."},{q:"Can I edit or regenerate an existing PDF?",a:"No. Each slot is designed for a single finalized PDF to ensure fair usage and prevent system abuse. Allowing unlimited regenerations could cause performance issues and disrupt other users’ workflows. If you’d like to create a new version, please start a new lead magnet using a fresh slot."},{q:"Do you offer refunds?",a:"Since Cre8tly Studio is a digital service that instantly generates custom content, we do not offer refunds after delivery. However, if you experience a technical issue or duplicate charge, please reach out, we’ll make it right."},{q:"Can I upgrade my plan or buy more credits?",a:"Yes. Additional credits and premium plans are available directly from your account dashboard."},{q:"What if I reach my limit?",a:"If you’ve hit your plan limit, you’ll see a message prompting you to upgrade or purchase more credits. You’ll never lose access to past PDFs."},{q:"How do I contact support?",a:"You can reach out anytime on our Contact Us page Our team typically responds within 24-48 hours, Monday–Friday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),it&&jsxRuntimeExports.jsx("div",{onClick:()=>g(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:ot=>ot.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:"✕"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:et.map((ot,ct)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ot.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:ot.a})]},ct))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/contact",className:"text-green font-medium hover:underline",children:"Need more help? Contact Support →"})})]})})]})}function GenerationOverlay({visible:it,progress:g,type:et="lead"}){return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm z-[9999] text-center p-6",children:[jsxRuntimeExports.jsx(motion.h2,{animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white text-xl sm:text-2xl font-semibold mb-4",children:et==="book"?"📚 Generating your book...":"🚀 Creating your digital asset..."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-3/4 max-w-md mt-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full h-[3px] bg-gray-800/60 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full 
                bg-gradient-to-r from-white to-[#00E07A]
                transition-all duration-200 ease-linear animate-progressGlowGreen`,style:{width:`${g}%`,boxShadow:`
                    0 0 8px rgba(0,224,122,0.8),
                    0 0 16px rgba(0,224,122,0.7),
                    0 0 28px rgba(0,224,122,0.6),
                    0 0 45px rgba(0,224,122,0.5)
                  `}})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g>=100&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,.9,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute inset-0 bg-white/30"},"complete-flash")}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.4,duration:.6}},className:"text-gray-400 text-sm mt-4 italic",children:et==="book"?"This may take a few minutes — crafting a great story takes time ✨":"This might take a moment — crafting something powerful ✨"})]},"overlay")})}function DashboardLayout({children:it}){const g=useNavigate(),et=useLocation(),{user:ot,logout:ct}=useAuth(),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(0);reactExports.useEffect(()=>{const Tt=()=>{dt(window.innerWidth>=1024)};return Tt(),window.addEventListener("resize",Tt),()=>window.removeEventListener("resize",Tt)},[]),reactExports.useEffect(()=>{if(!(ot!=null&&ot.id))return;const Tt=async()=>{try{const Rt=await axiosInstance.get("/admin/messages/count");St(Rt.data.count||0)}catch(Rt){console.error("Failed to fetch unread count:",Rt)}};Tt();const jt=setInterval(Tt,3e4);return()=>clearInterval(jt)},[ot==null?void 0:ot.id]);const kt=[{label:"Digital Products",path:"/dashboard",icon:jsxRuntimeExports.jsx(Package,{size:22})},{label:"Assistant",path:"/books",icon:jsxRuntimeExports.jsx(BookOpen,{size:22})},{label:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings,{size:22})},{label:"Prompt Memory",path:"/prompts",icon:jsxRuntimeExports.jsx(SquareTerminal,{size:22})},{label:"Inbox",path:"/notifications",icon:jsxRuntimeExports.jsx(Inbox$1,{size:22})},{label:"Plans",path:"/plans",icon:jsxRuntimeExports.jsx(DollarSign,{size:22})}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-[#030712] text-white relative",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("aside",{className:`fixed top-0 left-0 w-[120px] h-full bg-gray-900/95 border-r border-gray-800 
       flex flex-col justify-between transform transition-transform duration-300 z-[60]
       ${ut?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between h-full p-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 mb-4",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly",className:"w-16 h-16 mb-2"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-white text-center tracking-wide",children:"Cre8tly Studio"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"lg:hidden text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})})]}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col items-center gap-5 mt-8",children:kt.map(Tt=>{const jt=et.pathname===Tt.path,Rt=(ot==null?void 0:ot.brand_identity_file)&&Tt.path==="/settings";return jsxRuntimeExports.jsx("button",{onClick:()=>{g(Tt.path),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
            ${jt?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[Tt.icon,Tt.path==="/notifications"&&ft>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-[18px] h-[18px] text-[10px] bg-red-600 text-white font-bold rounded-full shadow-md",children:ft>9?"9+":ft}),Rt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full opacity-75 animate-ping"}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full shadow-[0_0_6px_2px_rgba(34,197,94,0.8)]"})]})]})},Tt.path)})})]}),jsxRuntimeExports.jsx("button",{onClick:ct,className:`relative flex items-center justify-center w-12 h-12 mx-auto mb-6 rounded-xl 
             bg-red-600/20 border border-red-600/40 text-red-500 hover:text-white hover:bg-red-600/40 
             hover:shadow-[0_0_12px_rgba(239,68,68,0.4)] transition-all`,title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{size:20})})]})}),ut&&window.innerWidth<1024&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 lg:hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!ut),className:"lg:hidden fixed top-4 right-4 bg-gray-800/80 p-2 rounded-lg text-gray-200 hover:text-white z-50 transition",children:jsxRuntimeExports.jsx(Menu,{size:22})}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-screen overflow-y-auto transition-all duration-300 lg:ml-[120px]",children:it})]})}async function startLeadMagnetEdit(it){var g,et,ot;try{return(await axiosInstance.post(`/edit/${it}/editor/start`)).data}catch(ct){throw console.error("❌ Error starting lead magnet edit:",((g=ct.response)==null?void 0:g.data)||ct.message),new Error(((ot=(et=ct.response)==null?void 0:et.data)==null?void 0:ot.error)||"Failed to start editor session.")}}async function commitLeadMagnetEdit(it,g,et){var ot,ct,ut;try{return(await axiosInstance.put(`/edit/${it}/editor/commit`,{token:g,updatedHtml:et})).data}catch(dt){throw console.error("❌ Error committing lead magnet edit:",((ot=dt.response)==null?void 0:ot.data)||dt.message),new Error(((ut=(ct=dt.response)==null?void 0:ct.data)==null?void 0:ut.error)||"Failed to save edited PDF.")}}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$2=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:it}){return["img",mergeAttributes(this.options.HTMLAttributes,it)]},parseMarkdown:(it,g)=>g.createNode("image",{src:it.href,title:it.title,alt:it.text}),renderMarkdown:it=>{var g,et,ot,ct,ut,dt;const ft=(et=(g=it.attrs)==null?void 0:g.src)!=null?et:"",St=(ct=(ot=it.attrs)==null?void 0:ot.alt)!=null?ct:"",kt=(dt=(ut=it.attrs)==null?void 0:ut.title)!=null?dt:"";return kt?`![${St}](${ft} "${kt}")`:`![${St}](${ft})`},addCommands(){return{setImage:it=>({commands:g})=>g.insertContent({type:this.name,attrs:it})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:it=>{const[,,g,et,ot]=it;return{src:et,alt:g,title:ot}}})]}}),index_default=Image$2;const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$1={_global:glob,version:"10.0.8",isBrowser:detectBrowser(),isUnminified:/param/.test((function(it){}).toString()),dblClickWindow:400,getAngle(it){return Konva$1.angleDeg?it*PI_OVER_180:it},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$1.DD.isDragging},isTransforming(){var it,g;return(g=(it=Konva$1.Transformer)===null||it===void 0?void 0:it.isTransforming())!==null&&g!==void 0?g:!1},isDragReady(){return!!Konva$1.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(it){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=it}},_registerNode=it=>{Konva$1[it.prototype.getClassName()]=it};Konva$1._injectGlobal(Konva$1);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const et=this.m;return{x:et[0]*g.x+et[2]*g.y+et[4],y:et[1]*g.x+et[3]*g.y+et[5]}}translate(g,et){return this.m[4]+=this.m[0]*g+this.m[2]*et,this.m[5]+=this.m[1]*g+this.m[3]*et,this}scale(g,et){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=et,this.m[3]*=et,this}rotate(g){const et=Math.cos(g),ot=Math.sin(g),ct=this.m[0]*et+this.m[2]*ot,ut=this.m[1]*et+this.m[3]*ot,dt=this.m[0]*-ot+this.m[2]*et,ft=this.m[1]*-ot+this.m[3]*et;return this.m[0]=ct,this.m[1]=ut,this.m[2]=dt,this.m[3]=ft,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,et){const ot=this.m[0]+this.m[2]*et,ct=this.m[1]+this.m[3]*et,ut=this.m[2]+this.m[0]*g,dt=this.m[3]+this.m[1]*g;return this.m[0]=ot,this.m[1]=ct,this.m[2]=ut,this.m[3]=dt,this}multiply(g){const et=this.m[0]*g.m[0]+this.m[2]*g.m[1],ot=this.m[1]*g.m[0]+this.m[3]*g.m[1],ct=this.m[0]*g.m[2]+this.m[2]*g.m[3],ut=this.m[1]*g.m[2]+this.m[3]*g.m[3],dt=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],ft=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=et,this.m[1]=ot,this.m[2]=ct,this.m[3]=ut,this.m[4]=dt,this.m[5]=ft,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),et=this.m[3]*g,ot=-this.m[1]*g,ct=-this.m[2]*g,ut=this.m[0]*g,dt=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),ft=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=et,this.m[1]=ot,this.m[2]=ct,this.m[3]=ut,this.m[4]=dt,this.m[5]=ft,this}getMatrix(){return this.m}decompose(){const g=this.m[0],et=this.m[1],ot=this.m[2],ct=this.m[3],ut=this.m[4],dt=this.m[5],ft=g*ct-et*ot,St={x:ut,y:dt,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||et!=0){const kt=Math.sqrt(g*g+et*et);St.rotation=et>0?Math.acos(g/kt):-Math.acos(g/kt),St.scaleX=kt,St.scaleY=ft/kt,St.skewX=(g*ot+et*ct)/ft,St.skewY=0}else if(ot!=0||ct!=0){const kt=Math.sqrt(ot*ot+ct*ct);St.rotation=Math.PI/2-(ct>0?Math.acos(-ot/kt):-Math.acos(ot/kt)),St.scaleX=ft/kt,St.scaleY=kt,St.skewX=0,St.skewY=(g*ot+et*ct)/ft}return St.rotation=Util._getRotation(St.rotation),St}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH$1="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[];const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(it){setTimeout(it,60)},Util={_isElement(it){return!!(it&&it.nodeType==1)},_isFunction(it){return!!(it&&it.constructor&&it.call&&it.apply)},_isPlainObject(it){return!!it&&it.constructor===Object},_isArray(it){return Object.prototype.toString.call(it)===OBJECT_ARRAY},_isNumber(it){return Object.prototype.toString.call(it)===OBJECT_NUMBER&&!isNaN(it)&&isFinite(it)},_isString(it){return Object.prototype.toString.call(it)===OBJECT_STRING},_isBoolean(it){return Object.prototype.toString.call(it)===OBJECT_BOOLEAN},isObject(it){return it instanceof Object},isValidSelector(it){if(typeof it!="string")return!1;const g=it[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(it){return it===0||it>0?1:-1},requestAnimFrame(it){animQueue.push(it),animQueue.length===1&&req(function(){const g=animQueue;animQueue=[],g.forEach(function(et){et()})})},createCanvasElement(){ensureBrowser();const it=document.createElement("canvas");try{it.style=it.style||{}}catch{}return it},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(it){for(;it=it.parentNode;)if(it==document)return!0;return!1},_urlToImage(it,g){const et=Util.createImageElement();et.onload=function(){g(et)},et.src=it},_rgbToHex(it,g,et){return((1<<24)+(it<<16)+(g<<8)+et).toString(16).slice(1)},_hexToRgb(it){it=it.replace(HASH$1,EMPTY_STRING$1);const g=parseInt(it,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let it=(Math.random()*16777215<<0).toString(16);for(;it.length<6;)it=ZERO+it;return HASH$1+it},getRGB(it){let g;return it in COLORS?(g=COLORS[it],{r:g[0],g:g[1],b:g[2]}):it[0]===HASH$1?this._hexToRgb(it.substring(1)):it.substr(0,4)===RGB_PAREN?(g=RGB_REGEX.exec(it.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(it){return it=it||"black",Util._namedColorToRBA(it)||Util._hex3ColorToRGBA(it)||Util._hex4ColorToRGBA(it)||Util._hex6ColorToRGBA(it)||Util._hex8ColorToRGBA(it)||Util._rgbColorToRGBA(it)||Util._rgbaColorToRGBA(it)||Util._hslColorToRGBA(it)},_namedColorToRBA(it){const g=COLORS[it.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(it){if(it.indexOf("rgb(")===0){it=it.match(/rgb\(([^)]+)\)/)[1];const g=it.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(it){if(it.indexOf("rgba(")===0){it=it.match(/rgba\(([^)]+)\)/)[1];const g=it.split(/ *, */).map((et,ot)=>et.slice(-1)==="%"?ot===3?parseInt(et)/100:parseInt(et)/100*255:Number(et));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(it){if(it[0]==="#"&&it.length===9)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:parseInt(it.slice(7,9),16)/255}},_hex6ColorToRGBA(it){if(it[0]==="#"&&it.length===7)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:1}},_hex4ColorToRGBA(it){if(it[0]==="#"&&it.length===5)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:parseInt(it[4]+it[4],16)/255}},_hex3ColorToRGBA(it){if(it[0]==="#"&&it.length===4)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:1}},_hslColorToRGBA(it){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(it)){const[g,...et]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(it),ot=Number(et[0])/360,ct=Number(et[1])/100,ut=Number(et[2])/100;let dt,ft,St;if(ct===0)return St=ut*255,{r:Math.round(St),g:Math.round(St),b:Math.round(St),a:1};ut<.5?dt=ut*(1+ct):dt=ut+ct-ut*ct;const kt=2*ut-dt,Tt=[0,0,0];for(let jt=0;jt<3;jt++)ft=ot+1/3*-(jt-1),ft<0&&ft++,ft>1&&ft--,6*ft<1?St=kt+(dt-kt)*6*ft:2*ft<1?St=dt:3*ft<2?St=kt+(dt-kt)*(2/3-ft)*6:St=kt,Tt[jt]=St*255;return{r:Math.round(Tt[0]),g:Math.round(Tt[1]),b:Math.round(Tt[2]),a:1}}},haveIntersection(it,g){return!(g.x>it.x+it.width||g.x+g.width<it.x||g.y>it.y+it.height||g.y+g.height<it.y)},cloneObject(it){const g={};for(const et in it)this._isPlainObject(it[et])?g[et]=this.cloneObject(it[et]):this._isArray(it[et])?g[et]=this.cloneArray(it[et]):g[et]=it[et];return g},cloneArray(it){return it.slice(0)},degToRad(it){return it*PI_OVER_DEG180},radToDeg(it){return it*DEG180_OVER_PI},_degToRad(it){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(it)},_radToDeg(it){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(it)},_getRotation(it){return Konva$1.angleDeg?Util.radToDeg(it):it},_capitalize(it){return it.charAt(0).toUpperCase()+it.slice(1)},throw(it){throw new Error(KONVA_ERROR+it)},error(it){console.error(KONVA_ERROR+it)},warn(it){Konva$1.showWarnings&&console.warn(KONVA_WARNING+it)},each(it,g){for(const et in it)g(et,it[et])},_inRange(it,g,et){return g<=it&&it<et},_getProjectionToSegment(it,g,et,ot,ct,ut){let dt,ft,St;const kt=(it-et)*(it-et)+(g-ot)*(g-ot);if(kt==0)dt=it,ft=g,St=(ct-et)*(ct-et)+(ut-ot)*(ut-ot);else{const Tt=((ct-it)*(et-it)+(ut-g)*(ot-g))/kt;Tt<0?(dt=it,ft=g,St=(it-ct)*(it-ct)+(g-ut)*(g-ut)):Tt>1?(dt=et,ft=ot,St=(et-ct)*(et-ct)+(ot-ut)*(ot-ut)):(dt=it+Tt*(et-it),ft=g+Tt*(ot-g),St=(dt-ct)*(dt-ct)+(ft-ut)*(ft-ut))}return[dt,ft,St]},_getProjectionToLine(it,g,et){const ot=Util.cloneObject(it);let ct=Number.MAX_VALUE;return g.forEach(function(ut,dt){if(!et&&dt===g.length-1)return;const ft=g[(dt+1)%g.length],St=Util._getProjectionToSegment(ut.x,ut.y,ft.x,ft.y,it.x,it.y),kt=St[0],Tt=St[1],jt=St[2];jt<ct&&(ot.x=kt,ot.y=Tt,ct=jt)}),ot},_prepareArrayForTween(it,g,et){const ot=[],ct=[];if(it.length>g.length){const dt=g;g=it,it=dt}for(let dt=0;dt<it.length;dt+=2)ot.push({x:it[dt],y:it[dt+1]});for(let dt=0;dt<g.length;dt+=2)ct.push({x:g[dt],y:g[dt+1]});const ut=[];return ct.forEach(function(dt){const ft=Util._getProjectionToLine(dt,ot,et);ut.push(ft.x),ut.push(ft.y)}),ut},_prepareToStringify(it){let g;it.visitedByCircularReferenceRemoval=!0;for(const et in it)if(it.hasOwnProperty(et)&&it[et]&&typeof it[et]=="object"){if(g=Object.getOwnPropertyDescriptor(it,et),it[et].visitedByCircularReferenceRemoval||Util._isElement(it[et]))if(g.configurable)delete it[et];else return null;else if(Util._prepareToStringify(it[et])===null)if(g.configurable)delete it[et];else return null}return delete it.visitedByCircularReferenceRemoval,it},_assign(it,g){for(const et in g)it[et]=g[et];return it},_getFirstPointerId(it){return it.touches?it.changedTouches[0].identifier:it.pointerId||999},releaseCanvas(...it){Konva$1.releaseCanvasOnDestroy&&it.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(it,g,et,ot){let ct=g<0?g:0,ut=et<0?et:0;g=Math.abs(g),et=Math.abs(et);let dt=0,ft=0,St=0,kt=0;typeof ot=="number"?dt=ft=St=kt=Math.min(ot,g/2,et/2):(dt=Math.min(ot[0]||0,g/2,et/2),ft=Math.min(ot[1]||0,g/2,et/2),kt=Math.min(ot[2]||0,g/2,et/2),St=Math.min(ot[3]||0,g/2,et/2)),it.moveTo(ct+dt,ut),it.lineTo(ct+g-ft,ut),it.arc(ct+g-ft,ut+ft,ft,Math.PI*3/2,0,!1),it.lineTo(ct+g,ut+et-kt),it.arc(ct+g-kt,ut+et-kt,kt,0,Math.PI/2,!1),it.lineTo(ct+St,ut+et),it.arc(ct+St,ut+et-St,St,Math.PI/2,Math.PI,!1),it.lineTo(ct,ut+dt),it.arc(ct+dt,ut+dt,dt,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(it,g,et,ot,ct){ot=Math.abs(ot);for(let ut=0;ut<et;ut++){const dt=g[(ut-1+et)%et],ft=g[ut],St=g[(ut+1)%et],kt={x:ft.x-dt.x,y:ft.y-dt.y},Tt={x:St.x-ft.x,y:St.y-ft.y},jt=Math.hypot(kt.x,kt.y),Rt=Math.hypot(Tt.x,Tt.y);let Ft;typeof ct=="number"?Ft=ct:Ft=ut<ct.length?ct[ut]:0,Ft=ot*Math.cos(Math.PI/et)*Math.min(1,Ft/ot*2);const zt={x:kt.x/jt,y:kt.y/jt},Kt={x:Tt.x/Rt,y:Tt.y/Rt},Bt={x:ft.x-zt.x*Ft,y:ft.y-zt.y*Ft},Ut={x:ft.x+Kt.x*Ft,y:ft.y+Kt.y*Ft};ut===0?it.moveTo(Bt.x,Bt.y):it.lineTo(Bt.x,Bt.y),it.arcTo(ft.x,ft.y,Ut.x,Ut.y,Ft)}}};function simplifyArray(it){const g=[],et=it.length,ot=Util;for(let ct=0;ct<et;ct++){let ut=it[ct];ot._isNumber(ut)?ut=Math.round(ut*1e3)/1e3:ot._isString(ut)||(ut=ut+""),g.push(ut)}return g}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const g=Util.createCanvasElement().getContext("2d");return g?!!g&&"filter"in g:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}class Context{constructor(g){this.canvas=g,Konva$1.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,et){let ot=this.traceArr,ct=ot.length,ut="",dt,ft,St,kt;for(dt=0;dt<ct;dt++)ft=ot[dt],St=ft.method,St?(kt=ft.args,ut+=St,g?ut+=DOUBLE_PAREN:Util._isArray(kt[0])?ut+=OPEN_PAREN_BRACKET+kt.join(COMMA)+CLOSE_BRACKET_PAREN:(et&&(kt=kt.map(Tt=>typeof Tt=="number"?Math.floor(Tt):Tt)),ut+=OPEN_PAREN+kt.join(COMMA)+CLOSE_PAREN)):(ut+=ft.property,g||(ut+=EQUALS+ft.val)),ut+=SEMICOLON;return ut}clearTrace(){this.traceArr=[]}_trace(g){let et=this.traceArr,ot;et.push(g),ot=et.length,ot>=traceArrMax&&et.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const et=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,et.getWidth()/et.pixelRatio,et.getHeight()/et.pixelRatio)}_applyLineCap(g){const et=g.attrs.lineCap;et&&this.setAttr("lineCap",et)}_applyOpacity(g){const et=g.getAbsoluteOpacity();et!==1&&this.setAttr("globalAlpha",et)}_applyLineJoin(g){const et=g.attrs.lineJoin;et&&this.setAttr("lineJoin",et)}_applyMiterLimit(g){const et=g.attrs.miterLimit;et!=null&&this.setAttr("miterLimit",et)}setAttr(g,et){this._context[g]=et}arc(g,et,ot,ct,ut,dt){this._context.arc(g,et,ot,ct,ut,dt)}arcTo(g,et,ot,ct,ut){this._context.arcTo(g,et,ot,ct,ut)}beginPath(){this._context.beginPath()}bezierCurveTo(g,et,ot,ct,ut,dt){this._context.bezierCurveTo(g,et,ot,ct,ut,dt)}clearRect(g,et,ot,ct){this._context.clearRect(g,et,ot,ct)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,et){const ot=arguments;if(ot.length===2)return this._context.createImageData(g,et);if(ot.length===1)return this._context.createImageData(g)}createLinearGradient(g,et,ot,ct){return this._context.createLinearGradient(g,et,ot,ct)}createPattern(g,et){return this._context.createPattern(g,et)}createRadialGradient(g,et,ot,ct,ut,dt){return this._context.createRadialGradient(g,et,ot,ct,ut,dt)}drawImage(g,et,ot,ct,ut,dt,ft,St,kt){const Tt=arguments,jt=this._context;Tt.length===3?jt.drawImage(g,et,ot):Tt.length===5?jt.drawImage(g,et,ot,ct,ut):Tt.length===9&&jt.drawImage(g,et,ot,ct,ut,dt,ft,St,kt)}ellipse(g,et,ot,ct,ut,dt,ft,St){this._context.ellipse(g,et,ot,ct,ut,dt,ft,St)}isPointInPath(g,et,ot,ct){return ot?this._context.isPointInPath(ot,g,et,ct):this._context.isPointInPath(g,et,ct)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,et,ot,ct){this._context.fillRect(g,et,ot,ct)}strokeRect(g,et,ot,ct){this._context.strokeRect(g,et,ot,ct)}fillText(g,et,ot,ct){ct?this._context.fillText(g,et,ot,ct):this._context.fillText(g,et,ot)}measureText(g){return this._context.measureText(g)}getImageData(g,et,ot,ct){return this._context.getImageData(g,et,ot,ct)}lineTo(g,et){this._context.lineTo(g,et)}moveTo(g,et){this._context.moveTo(g,et)}rect(g,et,ot,ct){this._context.rect(g,et,ot,ct)}roundRect(g,et,ot,ct,ut){this._context.roundRect(g,et,ot,ct,ut)}putImageData(g,et,ot){this._context.putImageData(g,et,ot)}quadraticCurveTo(g,et,ot,ct){this._context.quadraticCurveTo(g,et,ot,ct)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,et){this._context.scale(g,et)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,et,ot,ct,ut,dt){this._context.setTransform(g,et,ot,ct,ut,dt)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,et,ot,ct){this._context.strokeText(g,et,ot,ct)}transform(g,et,ot,ct,ut,dt){this._context.transform(g,et,ot,ct,ut,dt)}translate(g,et){this._context.translate(g,et)}_enableTrace(){let g=this,et=CONTEXT_METHODS.length,ot=this.setAttr,ct,ut;const dt=function(ft){let St=g[ft],kt;g[ft]=function(){return ut=simplifyArray(Array.prototype.slice.call(arguments,0)),kt=St.apply(g,arguments),g._trace({method:ft,args:ut}),kt}};for(ct=0;ct<et;ct++)dt(CONTEXT_METHODS[ct]);g.setAttr=function(){ot.apply(g,arguments);const ft=arguments[0];let St=arguments[1];(ft==="shadowOffsetX"||ft==="shadowOffsetY"||ft==="shadowBlur")&&(St=St/this.canvas.getPixelRatio()),g._trace({property:ft,val:St})}}_applyGlobalCompositeOperation(g){const et=g.attrs.globalCompositeOperation;!et||et==="source-over"||this.setAttr("globalCompositeOperation",et)}}CONTEXT_PROPERTIES.forEach(function(it){Object.defineProperty(Context.prototype,it,{get(){return this._context[it]},set(g){this._context[it]=g}})});class SceneContext extends Context{constructor(g,{willReadFrequently:et=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:et})}_fillColor(g){const et=g.fill();this.setAttr("fillStyle",et),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const et=g._getLinearGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fillRadialGradient(g){const et=g._getRadialGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fill(g){const et=g.fill(),ot=g.getFillPriority();if(et&&ot==="color"){this._fillColor(g);return}const ct=g.getFillPatternImage();if(ct&&ot==="pattern"){this._fillPattern(g);return}const ut=g.getFillLinearGradientColorStops();if(ut&&ot==="linear-gradient"){this._fillLinearGradient(g);return}const dt=g.getFillRadialGradientColorStops();if(dt&&ot==="radial-gradient"){this._fillRadialGradient(g);return}et?this._fillColor(g):ct?this._fillPattern(g):ut?this._fillLinearGradient(g):dt&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const et=g.getStrokeLinearGradientStartPoint(),ot=g.getStrokeLinearGradientEndPoint(),ct=g.getStrokeLinearGradientColorStops(),ut=this.createLinearGradient(et.x,et.y,ot.x,ot.y);if(ct){for(let dt=0;dt<ct.length;dt+=2)ut.addColorStop(ct[dt],ct[dt+1]);this.setAttr("strokeStyle",ut)}}_stroke(g){const et=g.dash(),ot=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!ot){this.save();const ut=this.getCanvas().getPixelRatio();this.setTransform(ut,0,0,ut,0,0)}this._applyLineCap(g),et&&g.dashEnabled()&&(this.setLineDash(et),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),ot||this.restore()}}_applyShadow(g){var et,ot,ct;const ut=(et=g.getShadowRGBA())!==null&&et!==void 0?et:"black",dt=(ot=g.getShadowBlur())!==null&&ot!==void 0?ot:5,ft=(ct=g.getShadowOffset())!==null&&ct!==void 0?ct:{x:0,y:0},St=g.getAbsoluteScale(),kt=this.canvas.getPixelRatio(),Tt=St.x*kt,jt=St.y*kt;this.setAttr("shadowColor",ut),this.setAttr("shadowBlur",dt*Math.min(Math.abs(Tt),Math.abs(jt))),this.setAttr("shadowOffsetX",ft.x*Tt),this.setAttr("shadowOffsetY",ft.y*jt)}}class HitContext extends Context{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const et=g.getStrokeScaleEnabled();if(!et){this.save();const ut=this.getCanvas().getPixelRatio();this.setTransform(ut,0,0,ut,0,0)}this._applyLineCap(g);const ot=g.hitStrokeWidth(),ct=ot==="auto"?g.strokeWidth():ot;this.setAttr("lineWidth",ct),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),et||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const it=Util.createCanvasElement(),g=it.getContext("2d");return _pixelRatio=function(){const et=Konva$1._global.devicePixelRatio||1,ot=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return et/ot}(),Util.releaseCanvas(it),_pixelRatio}class Canvas{constructor(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const ot=(g||{}).pixelRatio||Konva$1.pixelRatio||getDevicePixelRatio();this.pixelRatio=ot,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(g){const et=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/et,this.getHeight()/et)}setWidth(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}setHeight(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}getWidth(){return this.width}getHeight(){return this.height}setSize(g,et){this.setWidth(g||0),this.setHeight(et||0)}toDataURL(g,et){try{return this._canvas.toDataURL(g,et)}catch{try{return this._canvas.toDataURL()}catch(ct){return Util.error("Unable to get data URL. "+ct.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(g={width:0,height:0,willReadFrequently:!1}){super(g),this.context=new SceneContext(this,{willReadFrequently:g.willReadFrequently}),this.setSize(g.width,g.height)}}function isCanvasFarblingActive(){const it=Util.createCanvasElement();it.width=1,it.height=1;const g=it.getContext("2d",{willReadFrequently:!0});g.clearRect(0,0,1,1),g.fillStyle="rgba(255,0,255,1)",g.fillRect(0,0,1,1);const et=g.getImageData(0,0,1,1).data;return!(et[0]===255&&et[1]===0&&et[2]===255&&et[3]===255)}function isBraveBrowser(){var it,g;return typeof navigator>"u"?!1:(g=(it=navigator.brave)===null||it===void 0?void 0:it.isBrave())!==null&&g!==void 0?g:!1}let warned=!1;function checkHitCanvasSupport(){return isBraveBrowser()&&isCanvasFarblingActive()&&!warned&&(warned=!0,Util.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),isBraveBrowser()&&isCanvasFarblingActive()}class HitCanvas extends Canvas{constructor(g={width:0,height:0}){super(g),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(g.width,g.height),checkHitCanvasSupport()}}const DD={get isDragging(){let it=!1;return DD._dragElements.forEach(g=>{g.dragStatus==="dragging"&&(it=!0)}),it},justDragged:!1,get node(){let it;return DD._dragElements.forEach(g=>{it=g.node}),it},_dragElements:new Map,_drag(it){const g=[];DD._dragElements.forEach((et,ot)=>{const{node:ct}=et,ut=ct.getStage();ut.setPointersPositions(it),et.pointerId===void 0&&(et.pointerId=Util._getFirstPointerId(it));const dt=ut._changedPointerPositions.find(ft=>ft.id===et.pointerId);if(dt){if(et.dragStatus!=="dragging"){const ft=ct.dragDistance();if(Math.max(Math.abs(dt.x-et.startPointerPos.x),Math.abs(dt.y-et.startPointerPos.y))<ft||(ct.startDrag({evt:it}),!ct.isDragging()))return}ct._setDragPosition(it,et),g.push(ct)}}),g.forEach(et=>{et.fire("dragmove",{type:"dragmove",target:et,evt:it},!0)})},_endDragBefore(it){const g=[];DD._dragElements.forEach(et=>{const{node:ot}=et,ct=ot.getStage();if(it&&ct.setPointersPositions(it),!ct._changedPointerPositions.find(ft=>ft.id===et.pointerId))return;(et.dragStatus==="dragging"||et.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$1._mouseListenClick=!1,Konva$1._touchListenClick=!1,Konva$1._pointerListenClick=!1,et.dragStatus="stopped");const dt=et.node.getLayer()||et.node instanceof Konva$1.Stage&&et.node;dt&&g.indexOf(dt)===-1&&g.push(dt)}),g.forEach(et=>{et.draw()})},_endDragAfter(it){DD._dragElements.forEach((g,et)=>{g.dragStatus==="stopped"&&g.node.fire("dragend",{type:"dragend",target:g.node,evt:it},!0),g.dragStatus!=="dragging"&&DD._dragElements.delete(et)})}};Konva$1.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(it){return Util._isString(it)?'"'+it+'"':Object.prototype.toString.call(it)==="[object Number]"||Util._isBoolean(it)?it:Object.prototype.toString.call(it)}function RGBComponent(it){return it>255?255:it<0?0:Math.round(it)}function getNumberValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number.'),it}}function getNumberOrArrayOfNumbersValidator(it){if(Konva$1.isUnminified)return function(g,et){let ot=Util._isNumber(g),ct=Util._isArray(g)&&g.length==it;return!ot&&!ct&&Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be a number or Array<number>('+it+")"),g}}function getNumberOrAutoValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||it==="auto"||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number or "auto".'),it}}function getStringValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isString(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string.'),it}}function getStringOrGradientValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Util._isString(it),ot=Object.prototype.toString.call(it)==="[object CanvasGradient]"||it&&it.addColorStop;return et||ot||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string or a native gradient.'),it}}function getNumberArrayValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Int8Array?Object.getPrototypeOf(Int8Array):null;return et&&it instanceof et||(Util._isArray(it)?it.forEach(function(ot){Util._isNumber(ot)||Util.warn('"'+g+'" attribute has non numeric element '+ot+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a array of numbers.')),it}}function getBooleanValidator(){if(Konva$1.isUnminified)return function(it,g){return it===!0||it===!1||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a boolean.'),it}}function getComponentValidator(it){if(Konva$1.isUnminified)return function(g,et){return g==null||Util.isObject(g)||Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be an object with properties '+it),g}}const GET="get",SET$1="set",Factory={addGetterSetter(it,g,et,ot,ct){Factory.addGetter(it,g,et),Factory.addSetter(it,g,ot,ct),Factory.addOverloadedGetterSetter(it,g)},addGetter(it,g,et){const ot=GET+Util._capitalize(g);it.prototype[ot]=it.prototype[ot]||function(){const ct=this.attrs[g];return ct===void 0?et:ct}},addSetter(it,g,et,ot){const ct=SET$1+Util._capitalize(g);it.prototype[ct]||Factory.overWriteSetter(it,g,et,ot)},overWriteSetter(it,g,et,ot){const ct=SET$1+Util._capitalize(g);it.prototype[ct]=function(ut){return et&&ut!==void 0&&ut!==null&&(ut=et.call(this,ut,g)),this._setAttr(g,ut),ot&&ot.call(this),this}},addComponentsGetterSetter(it,g,et,ot,ct){const ut=et.length,dt=Util._capitalize,ft=GET+dt(g),St=SET$1+dt(g);it.prototype[ft]=function(){const Tt={};for(let jt=0;jt<ut;jt++){const Rt=et[jt];Tt[Rt]=this.getAttr(g+dt(Rt))}return Tt};const kt=getComponentValidator(et);it.prototype[St]=function(Tt){const jt=this.attrs[g];ot&&(Tt=ot.call(this,Tt,g)),kt&&kt.call(this,Tt,g);for(const Rt in Tt)Tt.hasOwnProperty(Rt)&&this._setAttr(g+dt(Rt),Tt[Rt]);return Tt||et.forEach(Rt=>{this._setAttr(g+dt(Rt),void 0)}),this._fireChangeEvent(g,jt,Tt),ct&&ct.call(this),this},Factory.addOverloadedGetterSetter(it,g)},addOverloadedGetterSetter(it,g){const et=Util._capitalize(g),ot=SET$1+et,ct=GET+et;it.prototype[g]=function(){return arguments.length?(this[ot](arguments[0]),this):this[ct]()}},addDeprecatedGetterSetter(it,g,et,ot){Util.error("Adding deprecated "+g);const ct=GET+Util._capitalize(g),ut=g+" property is deprecated and will be removed soon. Look at Konva change log for more information.";it.prototype[ct]=function(){Util.error(ut);const dt=this.attrs[g];return dt===void 0?et:dt},Factory.addSetter(it,g,ot,function(){Util.error(ut)}),Factory.addOverloadedGetterSetter(it,g)},backCompat(it,g){Util.each(g,function(et,ot){const ct=it.prototype[ot],ut=GET+Util._capitalize(et),dt=SET$1+Util._capitalize(et);function ft(){ct.apply(this,arguments),Util.error('"'+et+'" method is deprecated and will be removed soon. Use ""'+ot+'" instead.')}it.prototype[et]=ft,it.prototype[ut]=ft,it.prototype[dt]=ft})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(it){const g=/(\w+)\(([^)]+)\)/g;let et;for(;(et=g.exec(it))!==null;){const[,ot,ct]=et;switch(ot){case"blur":{const ut=parseFloat(ct.replace("px",""));return function(dt){this.blurRadius(ut*.5);const ft=Konva$1.Filters;ft&&ft.Blur&&ft.Blur.call(this,dt)}}case"brightness":{const ut=ct.includes("%")?parseFloat(ct)/100:parseFloat(ct);return function(dt){this.brightness(ut);const ft=Konva$1.Filters;ft&&ft.Brightness&&ft.Brightness.call(this,dt)}}case"contrast":{const ut=parseFloat(ct);return function(dt){const ft=100*(Math.sqrt(ut)-1);this.contrast(ft);const St=Konva$1.Filters;St&&St.Contrast&&St.Contrast.call(this,dt)}}case"grayscale":return function(ut){const dt=Konva$1.Filters;dt&&dt.Grayscale&&dt.Grayscale.call(this,ut)};case"sepia":return function(ut){const dt=Konva$1.Filters;dt&&dt.Sepia&&dt.Sepia.call(this,ut)};case"invert":return function(ut){const dt=Konva$1.Filters;dt&&dt.Invert&&dt.Invert.call(this,ut)};default:Util.warn(`CSS filter "${ot}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class zC{constructor(g){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(g),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(g){(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&this._cache.get(g)?this._cache.get(g).dirty=!0:g?this._cache.delete(g):this._cache.clear()}_getCache(g,et){let ot=this._cache.get(g);return(ot===void 0||(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&ot.dirty===!0)&&(ot=et.call(this),this._cache.set(g,ot)),ot}_calculate(g,et,ot){if(!this._attachedDepsListeners.get(g)){const ct=et.map(ut=>ut+"Change.konva").join(SPACE$1);this.on(ct,()=>{this._clearCache(g)}),this._attachedDepsListeners.set(g,!0)}return this._getCache(g,ot)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(g){this._clearCache(g),g===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:g,filter:et,hit:ot,buffer:ct}=this._cache.get(CANVAS);Util.releaseCanvas(g,et,ot,ct),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(g){const et=g||{};let ot={};(et.x===void 0||et.y===void 0||et.width===void 0||et.height===void 0)&&(ot=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let ct=Math.ceil(et.width||ot.width),ut=Math.ceil(et.height||ot.height),dt=et.pixelRatio,ft=et.x===void 0?Math.floor(ot.x):et.x,St=et.y===void 0?Math.floor(ot.y):et.y,kt=et.offset||0,Tt=et.drawBorder||!1,jt=et.hitCanvasPixelRatio||1;if(!ct||!ut){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Rt=Math.abs(Math.round(ot.x)-ft)>.5?1:0,Ft=Math.abs(Math.round(ot.y)-St)>.5?1:0;ct+=kt*2+Rt,ut+=kt*2+Ft,ft-=kt,St-=kt;const $t=new SceneCanvas({pixelRatio:dt,width:ct,height:ut}),zt=new SceneCanvas({pixelRatio:dt,width:0,height:0,willReadFrequently:!0}),Kt=new HitCanvas({pixelRatio:jt,width:ct,height:ut}),Bt=$t.getContext(),Ut=Kt.getContext(),Jt=new SceneCanvas({width:$t.width/$t.pixelRatio+Math.abs(ft),height:$t.height/$t.pixelRatio+Math.abs(St),pixelRatio:$t.pixelRatio}),en=Jt.getContext();return Kt.isCache=!0,$t.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,et.imageSmoothingEnabled===!1&&($t.getContext()._context.imageSmoothingEnabled=!1,zt.getContext()._context.imageSmoothingEnabled=!1),Bt.save(),Ut.save(),en.save(),Bt.translate(-ft,-St),Ut.translate(-ft,-St),en.translate(-ft,-St),Jt.x=ft,Jt.y=St,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene($t,this,Jt),this.drawHit(Kt,this),this._isUnderCache=!1,Bt.restore(),Ut.restore(),Tt&&(Bt.save(),Bt.beginPath(),Bt.rect(0,0,ct,ut),Bt.closePath(),Bt.setAttr("strokeStyle","red"),Bt.setAttr("lineWidth",5),Bt.stroke(),Bt.restore()),this._cache.set(CANVAS,{scene:$t,filter:zt,hit:Kt,buffer:Jt,x:ft,y:St}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(g){throw new Error('abstract "getClientRect" method call')}_transformedRect(g,et){const ot=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}];let ct=1/0,ut=1/0,dt=-1/0,ft=-1/0;const St=this.getAbsoluteTransform(et);return ot.forEach(function(kt){const Tt=St.point(kt);ct===void 0&&(ct=dt=Tt.x,ut=ft=Tt.y),ct=Math.min(ct,Tt.x),ut=Math.min(ut,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),{x:ct,y:ut,width:dt-ct,height:ft-ut}}_drawCachedSceneCanvas(g){g.save(),g._applyOpacity(this),g._applyGlobalCompositeOperation(this);const et=this._getCanvasCache();g.translate(et.x,et.y);const ot=this._getCachedSceneCanvas(),ct=ot.pixelRatio;g.drawImage(ot._canvas,0,0,ot.width/ct,ot.height/ct),g.restore()}_drawCachedHitCanvas(g){const et=this._getCanvasCache(),ot=et.hit;g.save(),g.translate(et.x,et.y),g.drawImage(ot._canvas,0,0,ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),g.restore()}_getCachedSceneCanvas(){let g=this.filters(),et=this._getCanvasCache(),ot=et.scene,ct=et.filter,ut=ct.getContext(),dt,ft,St,kt;if(!g||g.length===0)return ot;if(this._filterUpToDate)return ct;let Tt=!0;for(let Rt=0;Rt<g.length;Rt++)if(typeof g[Rt]=="string"&&isCSSFiltersSupported(),typeof g[Rt]!="string"||!isCSSFiltersSupported()){Tt=!1;break}const jt=ot.pixelRatio;if(ct.setSize(ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),Tt){const Rt=g.join(" ");return ut.save(),ut.setAttr("filter",Rt),ut.drawImage(ot._canvas,0,0,ot.getWidth()/jt,ot.getHeight()/jt),ut.restore(),this._filterUpToDate=!0,ct}try{for(dt=g.length,ut.clear(),ut.drawImage(ot._canvas,0,0,ot.getWidth()/jt,ot.getHeight()/jt),ft=ut.getImageData(0,0,ct.getWidth(),ct.getHeight()),St=0;St<dt;St++)kt=g[St],typeof kt=="string"&&(kt=parseCSSFilters(kt)),kt.call(this,ft),ut.putImageData(ft,0,0)}catch(Rt){Util.error("Unable to apply filter. "+Rt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,ct}on(g,et){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const ot=g.split(SPACE$1);for(let ct=0;ct<ot.length;ct++){const dt=ot[ct].split("."),ft=dt[0],St=dt[1]||"";this.eventListeners[ft]||(this.eventListeners[ft]=[]),this.eventListeners[ft].push({name:St,handler:et})}return this}off(g,et){let ot=(g||"").split(SPACE$1),ct=ot.length,ut,dt,ft,St,kt,Tt;if(this._cache&&this._cache.delete(ALL_LISTENERS),!g)for(dt in this.eventListeners)this._off(dt);for(ut=0;ut<ct;ut++)if(ft=ot[ut],St=ft.split("."),kt=St[0],Tt=St[1],kt)this.eventListeners[kt]&&this._off(kt,Tt,et);else for(dt in this.eventListeners)this._off(dt,Tt,et);return this}dispatchEvent(g){const et={target:this,type:g.type,evt:g};return this.fire(g.type,et),this}addEventListener(g,et){return this.on(g,function(ot){et.call(this,ot.evt)}),this}removeEventListener(g){return this.off(g),this}_delegate(g,et,ot){const ct=this;this.on(g,function(ut){const dt=ut.target.findAncestors(et,!0,ct);for(let ft=0;ft<dt.length;ft++)ut=Util.cloneObject(ut),ut.currentTarget=dt[ft],ot.call(dt[ft],ut)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const g=this.getParent();g&&g.children&&(g.children.splice(this.index,1),g._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(g){const et="get"+Util._capitalize(g);return Util._isFunction(this[et])?this[et]():this.attrs[g]}getAncestors(){let g=this.getParent(),et=[];for(;g;)et.push(g),g=g.getParent();return et}getAttrs(){return this.attrs||{}}setAttrs(g){return this._batchTransformChanges(()=>{let et,ot;if(!g)return this;for(et in g)et!==CHILDREN&&(ot=SET+Util._capitalize(et),Util._isFunction(this[ot])?this[ot](g[et]):this._setAttr(et,g[et]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(g){if(!this.listening())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isListening(g):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(g){if(!this.visible())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isVisible(g):!0}shouldDrawHit(g,et=!1){if(g)return this._isVisible(g)&&this._isListening(g);const ot=this.getLayer();let ct=!1;DD._dragElements.forEach(dt=>{dt.dragStatus==="dragging"&&(dt.node.nodeType==="Stage"||dt.node.getLayer()===ot)&&(ct=!0)});const ut=!et&&!Konva$1.hitOnDragEnabled&&(ct||Konva$1.isTransforming());return this.isListening()&&this.isVisible()&&!ut}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let g=this.getDepth(),et=this,ot=0,ct,ut,dt,ft;function St(Tt){for(ct=[],ut=Tt.length,dt=0;dt<ut;dt++)ft=Tt[dt],ot++,ft.nodeType!==SHAPE&&(ct=ct.concat(ft.getChildren().slice())),ft._id===et._id&&(dt=ut);ct.length>0&&ct[0].getDepth()<=g&&St(ct)}const kt=this.getStage();return et.nodeType!==UPPER_STAGE&&kt&&St(kt.getChildren()),ot}getDepth(){let g=0,et=this.parent;for(;et;)g++,et=et.parent;return g}_batchTransformChanges(g){this._batchingTransformChange=!0,g(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(g){return this._batchTransformChanges(()=>{this.x(g.x),this.y(g.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const g=this.getStage();if(!g)return null;const et=g.getPointerPosition();if(!et)return null;const ot=this.getAbsoluteTransform().copy();return ot.invert(),ot.point(et)}getAbsolutePosition(g){let et=!1,ot=this.parent;for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.parent}et&&!g&&(g=!0);const ct=this.getAbsoluteTransform(g).getMatrix(),ut=new Transform,dt=this.offset();return ut.m=ct.slice(),ut.translate(dt.x,dt.y),ut.getTranslation()}setAbsolutePosition(g){const{x:et,y:ot,...ct}=this._clearTransform();this.attrs.x=et,this.attrs.y=ot,this._clearCache(TRANSFORM);const ut=this._getAbsoluteTransform().copy();return ut.invert(),ut.translate(g.x,g.y),g={x:this.attrs.x+ut.getTranslation().x,y:this.attrs.y+ut.getTranslation().y},this._setTransform(ct),this.setPosition({x:g.x,y:g.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(g){let et;for(et in g)this.attrs[et]=g[et]}_clearTransform(){const g={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,g}move(g){let et=g.x,ot=g.y,ct=this.x(),ut=this.y();return et!==void 0&&(ct+=et),ot!==void 0&&(ut+=ot),this.setPosition({x:ct,y:ut}),this}_eachAncestorReverse(g,et){let ot=[],ct=this.getParent(),ut,dt;if(!(et&&et._id===this._id)){for(ot.unshift(this);ct&&(!et||ct._id!==et._id);)ot.unshift(ct),ct=ct.parent;for(ut=ot.length,dt=0;dt<ut;dt++)g(ot[dt])}}rotate(g){return this.rotation(this.rotation()+g),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.splice(g+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.splice(g-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(g){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(g<0||g>=this.parent.children.length)&&Util.warn("Unexpected value "+g+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const et=this.index;return this.parent.children.splice(et,1),this.parent.children.splice(g,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let g=this.opacity();const et=this.getParent();return et&&!et._isUnderCache&&(g*=et.getAbsoluteOpacity()),g}moveTo(g){return this.getParent()!==g&&(this._remove(),g.add(this)),this}toObject(){let g=this.getAttrs(),et,ot,ct,ut,dt;const ft={attrs:{},className:this.getClassName()};for(et in g)ot=g[et],dt=Util.isObject(ot)&&!Util._isPlainObject(ot)&&!Util._isArray(ot),!dt&&(ct=typeof this[et]=="function"&&this[et],delete g[et],ut=ct?ct.call(this):null,g[et]=ot,ut!==ot&&(ft.attrs[et]=ot));return Util._prepareToStringify(ft)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(g,et,ot){const ct=[];et&&this._isMatch(g)&&ct.push(this);let ut=this.parent;for(;ut;){if(ut===ot)return ct;ut._isMatch(g)&&ct.push(ut),ut=ut.parent}return ct}isAncestorOf(g){return!1}findAncestor(g,et,ot){return this.findAncestors(g,et,ot)[0]}_isMatch(g){if(!g)return!1;if(typeof g=="function")return g(this);let et=g.replace(/ /g,"").split(","),ot=et.length,ct,ut;for(ct=0;ct<ot;ct++)if(ut=et[ct],Util.isValidSelector(ut)||(Util.warn('Selector "'+ut+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),ut.charAt(0)==="#"){if(this.id()===ut.slice(1))return!0}else if(ut.charAt(0)==="."){if(this.hasName(ut.slice(1)))return!0}else if(this.className===ut||this.nodeType===ut)return!0;return!1}getLayer(){const g=this.getParent();return g?g.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const g=this.getParent();return g?g.getStage():null}fire(g,et={},ot){return et.target=et.target||this,ot?this._fireAndBubble(g,et):this._fire(g,et),this}getAbsoluteTransform(g){return g?this._getAbsoluteTransform(g):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(g){let et;if(g)return et=new Transform,this._eachAncestorReverse(function(ot){const ct=ot.transformsEnabled();ct==="all"?et.multiply(ot.getTransform()):ct==="position"&&et.translate(ot.x()-ot.offsetX(),ot.y()-ot.offsetY())},g),et;{et=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(et):et.reset();const ot=this.transformsEnabled();if(ot==="all")et.multiply(this.getTransform());else if(ot==="position"){const ct=this.attrs.x||0,ut=this.attrs.y||0,dt=this.attrs.offsetX||0,ft=this.attrs.offsetY||0;et.translate(ct-dt,ut-ft)}return et.dirty=!1,et}}getAbsoluteScale(g){let et=this;for(;et;)et._isUnderCache&&(g=et),et=et.getParent();const ct=this.getAbsoluteTransform(g).decompose();return{x:ct.scaleX,y:ct.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var g,et;const ot=this._cache.get(TRANSFORM)||new Transform;ot.reset();const ct=this.x(),ut=this.y(),dt=Konva$1.getAngle(this.rotation()),ft=(g=this.attrs.scaleX)!==null&&g!==void 0?g:1,St=(et=this.attrs.scaleY)!==null&&et!==void 0?et:1,kt=this.attrs.skewX||0,Tt=this.attrs.skewY||0,jt=this.attrs.offsetX||0,Rt=this.attrs.offsetY||0;return(ct!==0||ut!==0)&&ot.translate(ct,ut),dt!==0&&ot.rotate(dt),(kt!==0||Tt!==0)&&ot.skew(kt,Tt),(ft!==1||St!==1)&&ot.scale(ft,St),(jt!==0||Rt!==0)&&ot.translate(-1*jt,-1*Rt),ot.dirty=!1,ot}clone(g){let et=Util.cloneObject(this.attrs),ot,ct,ut,dt,ft;for(ot in g)et[ot]=g[ot];const St=new this.constructor(et);for(ot in this.eventListeners)for(ct=this.eventListeners[ot],ut=ct.length,dt=0;dt<ut;dt++)ft=ct[dt],ft.name.indexOf(KONVA)<0&&(St.eventListeners[ot]||(St.eventListeners[ot]=[]),St.eventListeners[ot].push(ft));return St}_toKonvaCanvas(g){g=g||{};const et=this.getClientRect(),ot=this.getStage(),ct=g.x!==void 0?g.x:Math.floor(et.x),ut=g.y!==void 0?g.y:Math.floor(et.y),dt=g.pixelRatio||1,ft=new SceneCanvas({width:g.width||Math.ceil(et.width)||(ot?ot.width():0),height:g.height||Math.ceil(et.height)||(ot?ot.height():0),pixelRatio:dt}),St=ft.getContext(),kt=new SceneCanvas({width:ft.width/ft.pixelRatio+Math.abs(ct),height:ft.height/ft.pixelRatio+Math.abs(ut),pixelRatio:ft.pixelRatio});return g.imageSmoothingEnabled===!1&&(St._context.imageSmoothingEnabled=!1),St.save(),(ct||ut)&&St.translate(-1*ct,-1*ut),this.drawScene(ft,void 0,kt),St.restore(),ft}toCanvas(g){return this._toKonvaCanvas(g)._canvas}toDataURL(g){g=g||{};const et=g.mimeType||null,ot=g.quality||null,ct=this._toKonvaCanvas(g).toDataURL(et,ot);return g.callback&&g.callback(ct),ct}toImage(g){return new Promise((et,ot)=>{try{const ct=g==null?void 0:g.callback;ct&&delete g.callback,Util._urlToImage(this.toDataURL(g),function(ut){et(ut),ct==null||ct(ut)})}catch(ct){ot(ct)}})}toBlob(g){return new Promise((et,ot)=>{try{const ct=g==null?void 0:g.callback;ct&&delete g.callback,this.toCanvas(g).toBlob(ut=>{et(ut),ct==null||ct(ut)},g==null?void 0:g.mimeType,g==null?void 0:g.quality)}catch(ct){ot(ct)}})}setSize(g){return this.width(g.width),this.height(g.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$1.dragDistance}_off(g,et,ot){let ct=this.eventListeners[g],ut,dt,ft;for(ut=0;ut<ct.length;ut++)if(dt=ct[ut].name,ft=ct[ut].handler,(dt!=="konva"||et==="konva")&&(!et||dt===et)&&(!ot||ot===ft)){if(ct.splice(ut,1),ct.length===0){delete this.eventListeners[g];break}ut--}}_fireChangeEvent(g,et,ot){this._fire(g+CHANGE,{oldVal:et,newVal:ot})}addName(g){if(!this.hasName(g)){const et=this.name(),ot=et?et+" "+g:g;this.name(ot)}return this}hasName(g){if(!g)return!1;const et=this.name();return et?(et||"").split(/\s/g).indexOf(g)!==-1:!1}removeName(g){const et=(this.name()||"").split(/\s/g),ot=et.indexOf(g);return ot!==-1&&(et.splice(ot,1),this.name(et.join(" "))),this}setAttr(g,et){const ot=this[SET+Util._capitalize(g)];return Util._isFunction(ot)?ot.call(this,et):this._setAttr(g,et),this}_requestDraw(){if(Konva$1.autoDrawEnabled){const g=this.getLayer()||this.getStage();g==null||g.batchDraw()}}_setAttr(g,et){const ot=this.attrs[g];ot===et&&!Util.isObject(et)||(et==null?delete this.attrs[g]:this.attrs[g]=et,this._shouldFireChangeEvents&&this._fireChangeEvent(g,ot,et),this._requestDraw())}_setComponentAttr(g,et,ot){let ct;ot!==void 0&&(ct=this.attrs[g],ct||(this.attrs[g]=this.getAttr(g)),this.attrs[g][et]=ot,this._fireChangeEvent(g,ct,ot))}_fireAndBubble(g,et,ot){et&&this.nodeType===SHAPE&&(et.target=this);const ct=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(ct.indexOf(g)!==-1&&(ot&&(this===ot||this.isAncestorOf&&this.isAncestorOf(ot))||this.nodeType==="Stage"&&!ot))){this._fire(g,et);const dt=ct.indexOf(g)!==-1&&ot&&ot.isAncestorOf&&ot.isAncestorOf(this)&&!ot.isAncestorOf(this.parent);(et&&!et.cancelBubble||!et)&&this.parent&&this.parent.isListening()&&!dt&&(ot&&ot.parent?this._fireAndBubble.call(this.parent,g,et,ot):this._fireAndBubble.call(this.parent,g,et))}}_getProtoListeners(g){var et,ot,ct;const ut=(et=this._cache.get(ALL_LISTENERS))!==null&&et!==void 0?et:{};let dt=ut==null?void 0:ut[g];if(dt===void 0){dt=[];let ft=Object.getPrototypeOf(this);for(;ft;){const St=(ct=(ot=ft.eventListeners)===null||ot===void 0?void 0:ot[g])!==null&&ct!==void 0?ct:[];dt.push(...St),ft=Object.getPrototypeOf(ft)}ut[g]=dt,this._cache.set(ALL_LISTENERS,ut)}return dt}_fire(g,et){et=et||{},et.currentTarget=this,et.type=g;const ot=this._getProtoListeners(g);if(ot)for(let ut=0;ut<ot.length;ut++)ot[ut].handler.call(this,et);const ct=this.eventListeners[g];if(ct)for(let ut=0;ut<ct.length;ut++)ct[ut].handler.call(this,et)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(g){const et=g?g.pointerId:void 0,ot=this.getStage(),ct=this.getAbsolutePosition();if(!ot)return;const ut=ot._getPointerById(et)||ot._changedPointerPositions[0]||ct;DD._dragElements.set(this._id,{node:this,startPointerPos:ut,offset:{x:ut.x-ct.x,y:ut.y-ct.y},dragStatus:"ready",pointerId:et})}startDrag(g,et=!0){DD._dragElements.has(this._id)||this._createDragElement(g);const ot=DD._dragElements.get(this._id);ot.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:g&&g.evt},et)}_setDragPosition(g,et){const ot=this.getStage()._getPointerById(et.pointerId);if(!ot)return;let ct={x:ot.x-et.offset.x,y:ot.y-et.offset.y};const ut=this.dragBoundFunc();if(ut!==void 0){const dt=ut.call(this,ct,g);dt?ct=dt:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==ct.x||this._lastPos.y!==ct.y)&&(this.setAbsolutePosition(ct),this._requestDraw()),this._lastPos=ct}stopDrag(g){const et=DD._dragElements.get(this._id);et&&(et.dragStatus="stopped"),DD._endDragBefore(g),DD._endDragAfter(g)}setDraggable(g){this._setAttr("draggable",g),this._dragChange()}isDragging(){const g=DD._dragElements.get(this._id);return g?g.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(g){if(!(!(g.evt.button!==void 0)||Konva$1.dragButtons.indexOf(g.evt.button)>=0)||this.isDragging())return;let ct=!1;DD._dragElements.forEach(ut=>{this.isAncestorOf(ut.node)&&(ct=!0)}),ct||this._createDragElement(g)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const et=DD._dragElements.get(this._id),ot=et&&et.dragStatus==="dragging",ct=et&&et.dragStatus==="ready";ot?this.stopDrag():ct&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(g={x:0,y:0}){const et=this.getStage();if(!et)return!1;const ot={x:-g.x,y:-g.y,width:et.width()+2*g.x,height:et.height()+2*g.y};return Util.haveIntersection(ot,this.getClientRect())}static create(g,et){return Util._isString(g)&&(g=JSON.parse(g)),this._createNode(g,et)}static _createNode(g,et){let ot=zC.prototype.getClassName.call(g),ct=g.children,ut,dt,ft;et&&(g.attrs.container=et),Konva$1[ot]||(Util.warn('Can not find a node with class name "'+ot+'". Fallback to "Shape".'),ot="Shape");const St=Konva$1[ot];if(ut=new St(g.attrs),ct)for(dt=ct.length,ft=0;ft<dt;ft++)ut.add(zC._createNode(ct[ft]));return ut}};Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(it){return this._filterUpToDate=!1,it});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(g){const et=this.children||[];return g?et.filter(g):et}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.destroy()}),this.children=[],this._requestDraw(),this}add(...g){if(g.length===0)return this;if(g.length>1){for(let ot=0;ot<g.length;ot++)this.add(g[ot]);return this}const et=g[0];return et.getParent()?(et.moveTo(this),this):(this._validateAdd(et),et.index=this.getChildren().length,et.parent=this,et._clearCaches(),this.getChildren().push(et),this._fire("add",{child:et}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(g){return this._generalFind(g,!1)}findOne(g){const et=this._generalFind(g,!0);return et.length>0?et[0]:void 0}_generalFind(g,et){const ot=[];return this._descendants(ct=>{const ut=ct._isMatch(g);return ut&&ot.push(ct),!!(ut&&et)}),ot}_descendants(g){let et=!1;const ot=this.getChildren();for(const ct of ot){if(et=g(ct),et)return!0;if(ct.hasChildren()&&(et=ct._descendants(g),et))return!0}return!1}toObject(){const g=Node$1.prototype.toObject.call(this);return g.children=[],this.getChildren().forEach(et=>{g.children.push(et.toObject())}),g}isAncestorOf(g){let et=g.getParent();for(;et;){if(et._id===this._id)return!0;et=et.getParent()}return!1}clone(g){const et=Node$1.prototype.clone.call(this,g);return this.getChildren().forEach(function(ot){et.add(ot.clone())}),et}getAllIntersections(g){const et=[];return this.find("Shape").forEach(ot=>{ot.isVisible()&&ot.intersects(g)&&et.push(ot)}),et}_clearSelfAndDescendantCache(g){var et;super._clearSelfAndDescendantCache(g),!this.isCached()&&((et=this.children)===null||et===void 0||et.forEach(function(ot){ot._clearSelfAndDescendantCache(g)}))}_setChildrenIndices(){var g;(g=this.children)===null||g===void 0||g.forEach(function(et,ot){et.index=ot}),this._requestDraw()}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct&&ct.getCanvas(),dt=ut&&ut.getContext(),ft=this._getCanvasCache(),St=ft&&ft.scene,kt=ut&&ut.isCache;if(!this.isVisible()&&!kt)return this;if(St){dt.save();const Tt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5]),this._drawCachedSceneCanvas(dt),dt.restore()}else this._drawChildren("drawScene",ut,et,ot);return this}drawHit(g,et){if(!this.shouldDrawHit(et))return this;const ot=this.getLayer(),ct=g||ot&&ot.hitCanvas,ut=ct&&ct.getContext(),dt=this._getCanvasCache();if(dt&&dt.hit){ut.save();const St=this.getAbsoluteTransform(et).getMatrix();ut.transform(St[0],St[1],St[2],St[3],St[4],St[5]),this._drawCachedHitCanvas(ut),ut.restore()}else this._drawChildren("drawHit",ct,et);return this}_drawChildren(g,et,ot,ct){var ut;const dt=et&&et.getContext(),ft=this.clipWidth(),St=this.clipHeight(),kt=this.clipFunc(),Tt=typeof ft=="number"&&typeof St=="number"||kt,jt=ot===this;if(Tt){dt.save();const Ft=this.getAbsoluteTransform(ot);let $t=Ft.getMatrix();dt.transform($t[0],$t[1],$t[2],$t[3],$t[4],$t[5]),dt.beginPath();let zt;if(kt)zt=kt.call(this,dt,this);else{const Kt=this.clipX(),Bt=this.clipY();dt.rect(Kt||0,Bt||0,ft,St)}dt.clip.apply(dt,zt),$t=Ft.copy().invert().getMatrix(),dt.transform($t[0],$t[1],$t[2],$t[3],$t[4],$t[5])}const Rt=!jt&&this.globalCompositeOperation()!=="source-over"&&g==="drawScene";Rt&&(dt.save(),dt._applyGlobalCompositeOperation(this)),(ut=this.children)===null||ut===void 0||ut.forEach(function(Ft){Ft[g](et,ot,ct)}),Rt&&dt.restore(),Tt&&dt.restore()}getClientRect(g={}){var et;const ot=g.skipTransform,ct=g.relativeTo;let ut,dt,ft,St,kt={x:1/0,y:1/0,width:0,height:0};const Tt=this;(et=this.children)===null||et===void 0||et.forEach(function(Ft){if(!Ft.visible())return;const $t=Ft.getClientRect({relativeTo:Tt,skipShadow:g.skipShadow,skipStroke:g.skipStroke});$t.width===0&&$t.height===0||(ut===void 0?(ut=$t.x,dt=$t.y,ft=$t.x+$t.width,St=$t.y+$t.height):(ut=Math.min(ut,$t.x),dt=Math.min(dt,$t.y),ft=Math.max(ft,$t.x+$t.width),St=Math.max(St,$t.y+$t.height)))});const jt=this.find("Shape");let Rt=!1;for(let Ft=0;Ft<jt.length;Ft++)if(jt[Ft]._isVisible(this)){Rt=!0;break}return Rt&&ut!==void 0?kt={x:ut,y:dt,width:ft-ut,height:St-dt}:kt={x:0,y:0,width:0,height:0},ot?kt:this._transformedRect(kt,ct)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$1._global.PointerEvent!==void 0;function getCapturedShape(it){return Captures.get(it)}function createEvent(it){return{evt:it,pointerId:it.pointerId}}function hasPointerCapture(it,g){return Captures.get(it)===g}function setPointerCapture(it,g){releaseCapture(it),g.getStage()&&(Captures.set(it,g),SUPPORT_POINTER_EVENTS&&g._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(it,g){const et=Captures.get(it);if(!et)return;const ot=et.getStage();ot&&ot.content,Captures.delete(it),SUPPORT_POINTER_EVENTS&&et._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=it=>it.indexOf("pointer")>=0?"pointer":it.indexOf("touch")>=0?"touch":"mouse",getEventsMap=it=>{const g=getEventType(it);if(g==="pointer")return Konva$1.pointerEventsEnabled&&EVENTS_MAP.pointer;if(g==="touch")return EVENTS_MAP.touch;if(g==="mouse")return EVENTS_MAP.mouse};function checkNoClip(it={}){return(it.clipFunc||it.clipWidth||it.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),it}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(g){super(checkNoClip(g)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(g){const et=g.getType()==="Layer",ot=g.getType()==="FastLayer";et||ot||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const g=this.visible()?"":"none";this.content.style.display=g}setContainer(g){if(typeof g===STRING){let et;if(g.charAt(0)==="."){const ot=g.slice(1);g=document.getElementsByClassName(ot)[0]}else g.charAt(0)!=="#"?et=g:et=g.slice(1),g=document.getElementById(et);if(!g)throw"Can not find container in document with id "+et}return this._setAttr("container",g),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),g.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const g=this.children,et=g.length;for(let ot=0;ot<et;ot++)g[ot].clear();return this}clone(g){return g||(g={}),g.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,g)}destroy(){super.destroy();const g=this.content;g&&Util._isInDocument(g)&&this.container().removeChild(g);const et=stages.indexOf(this);return et>-1&&stages.splice(et,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const g=this._pointerPositions[0]||this._changedPointerPositions[0];return g?{x:g.x,y:g.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(g){return this._pointerPositions.find(et=>et.id===g)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(g){g={...g},g.x=g.x||0,g.y=g.y||0,g.width=g.width||this.width(),g.height=g.height||this.height();const et=new SceneCanvas({width:g.width,height:g.height,pixelRatio:g.pixelRatio||1}),ot=et.getContext()._context,ct=this.children;return(g.x||g.y)&&ot.translate(-1*g.x,-1*g.y),ct.forEach(function(ut){if(!ut.isVisible())return;const dt=ut._toKonvaCanvas(g);ot.drawImage(dt._canvas,g.x,g.y,dt.getWidth()/dt.getPixelRatio(),dt.getHeight()/dt.getPixelRatio())}),et}getIntersection(g){if(!g)return null;const et=this.children,ot=et.length,ct=ot-1;for(let ut=ct;ut>=0;ut--){const dt=et[ut].getIntersection(g);if(dt)return dt}return null}_resizeDOM(){const g=this.width(),et=this.height();this.content&&(this.content.style.width=g+PX,this.content.style.height=et+PX),this.bufferCanvas.setSize(g,et),this.bufferHitCanvas.setSize(g,et),this.children.forEach(ot=>{ot.setSize({width:g,height:et}),ot.draw()})}add(g,...et){if(arguments.length>1){for(let ct=0;ct<arguments.length;ct++)this.add(arguments[ct]);return this}super.add(g);const ot=this.children.length;return ot>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+ot+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),g.setSize({width:this.width(),height:this.height()}),g.draw(),Konva$1.isBrowser&&this.content.appendChild(g.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}getLayers(){return this.children}_bindContentEvents(){Konva$1.isBrowser&&EVENTS.forEach(([g,et])=>{this.content.addEventListener(g,ot=>{this[et](ot)},{passive:!1})})}_pointerenter(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerenter,{evt:g,target:this,currentTarget:this})}_pointerover(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerover,{evt:g,target:this,currentTarget:this})}_getTargetShape(g){let et=this[g+"targetShape"];return et&&!et.getStage()&&(et=null),et}_pointerleave(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ct=this._getTargetShape(ot),ut=!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled;ct&&ut?(ct._fireAndBubble(et.pointerout,{evt:g}),ct._fireAndBubble(et.pointerleave,{evt:g}),this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this[ot+"targetShape"]=null):ut&&(this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this._fire(et.pointerout,{evt:g,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);let ct=!1;this._changedPointerPositions.forEach(ut=>{const dt=this.getIntersection(ut);if(DD.justDragged=!1,Konva$1["_"+ot+"ListenClick"]=!0,!dt||!dt.isListening()){this[ot+"ClickStartShape"]=void 0;return}Konva$1.capturePointerEventsEnabled&&dt.setPointerCapture(ut.id),this[ot+"ClickStartShape"]=dt,dt._fireAndBubble(et.pointerdown,{evt:g,pointerId:ut.id}),ct=!0;const ft=g.type.indexOf("touch")>=0;dt.preventDefault()&&g.cancelable&&ft&&g.preventDefault()}),ct||this._fire(et.pointerdown,{evt:g,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;const ct=g.type.indexOf("touch")>=0||g.pointerType==="touch";if(Konva$1.isDragging()&&DD.node.preventDefault()&&g.cancelable&&ct&&g.preventDefault(),this.setPointersPositions(g),!(!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled))return;const dt={};let ft=!1;const St=this._getTargetShape(ot);this._changedPointerPositions.forEach(kt=>{const Tt=getCapturedShape(kt.id)||this.getIntersection(kt),jt=kt.id,Rt={evt:g,pointerId:jt},Ft=St!==Tt;if(Ft&&St&&(St._fireAndBubble(et.pointerout,{...Rt},Tt),St._fireAndBubble(et.pointerleave,{...Rt},Tt)),Tt){if(dt[Tt._id])return;dt[Tt._id]=!0}Tt&&Tt.isListening()?(ft=!0,Ft&&(Tt._fireAndBubble(et.pointerover,{...Rt},St),Tt._fireAndBubble(et.pointerenter,{...Rt},St),this[ot+"targetShape"]=Tt),Tt._fireAndBubble(et.pointermove,{...Rt})):St&&(this._fire(et.pointerover,{evt:g,target:this,currentTarget:this,pointerId:jt}),this[ot+"targetShape"]=null)}),ft||this._fire(et.pointermove,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ct=this[ot+"ClickStartShape"],ut=this[ot+"ClickEndShape"],dt={};let ft=!1;this._changedPointerPositions.forEach(St=>{const kt=getCapturedShape(St.id)||this.getIntersection(St);if(kt){if(kt.releaseCapture(St.id),dt[kt._id])return;dt[kt._id]=!0}const Tt=St.id,jt={evt:g,pointerId:Tt};let Rt=!1;Konva$1["_"+ot+"InDblClickWindow"]?(Rt=!0,clearTimeout(this[ot+"DblTimeout"])):DD.justDragged||(Konva$1["_"+ot+"InDblClickWindow"]=!0,clearTimeout(this[ot+"DblTimeout"])),this[ot+"DblTimeout"]=setTimeout(function(){Konva$1["_"+ot+"InDblClickWindow"]=!1},Konva$1.dblClickWindow),kt&&kt.isListening()?(ft=!0,this[ot+"ClickEndShape"]=kt,kt._fireAndBubble(et.pointerup,{...jt}),Konva$1["_"+ot+"ListenClick"]&&ct&&ct===kt&&(kt._fireAndBubble(et.pointerclick,{...jt}),Rt&&ut&&ut===kt&&kt._fireAndBubble(et.pointerdblclick,{...jt}))):(this[ot+"ClickEndShape"]=null,ft||(this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ft=!0),Konva$1["_"+ot+"ListenClick"]&&this._fire(et.pointerclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}),Rt&&this._fire(et.pointerdblclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}))}),ft||this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$1["_"+ot+"ListenClick"]=!1,g.cancelable&&ot!=="touch"&&ot!=="pointer"&&g.preventDefault()}_contextmenu(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(CONTEXTMENU,{evt:g}):this._fire(CONTEXTMENU,{evt:g,target:this,currentTarget:this})}_wheel(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(WHEEL,{evt:g}):this._fire(WHEEL,{evt:g,target:this,currentTarget:this})}_pointercancel(g){this.setPointersPositions(g);const et=getCapturedShape(g.pointerId)||this.getIntersection(this.getPointerPosition());et&&et._fireAndBubble(POINTERUP,createEvent(g)),releaseCapture(g.pointerId)}_lostpointercapture(g){releaseCapture(g.pointerId)}setPointersPositions(g){const et=this._getContentPosition();let ot=null,ct=null;g=g||window.event,g.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(g.touches,ut=>{this._pointerPositions.push({id:ut.identifier,x:(ut.clientX-et.left)/et.scaleX,y:(ut.clientY-et.top)/et.scaleY})}),Array.prototype.forEach.call(g.changedTouches||g.touches,ut=>{this._changedPointerPositions.push({id:ut.identifier,x:(ut.clientX-et.left)/et.scaleX,y:(ut.clientY-et.top)/et.scaleY})})):(ot=(g.clientX-et.left)/et.scaleX,ct=(g.clientY-et.top)/et.scaleY,this.pointerPos={x:ot,y:ct},this._pointerPositions=[{x:ot,y:ct,id:Util._getFirstPointerId(g)}],this._changedPointerPositions=[{x:ot,y:ct,id:Util._getFirstPointerId(g)}])}_setPointerPosition(g){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(g)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const g=this.content.getBoundingClientRect();return{top:g.top,left:g.left,scaleX:g.width/this.content.clientWidth||1,scaleY:g.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$1.isBrowser)return;const g=this.container();if(!g)throw"Stage has no container. A container is required.";g.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),g.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(g){g.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$1.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(it=>{it.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFunc$2(it){it.stroke()}function _fillFuncHit(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFuncHit(it){it.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(g){super(g);let et;for(;et=Util.getRandomColor(),!(et&&!(et in shapes)););this.colorKey=et,shapes[et]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const et=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(et&&et.setTransform){const ot=new Transform;ot.translate(this.fillPatternX(),this.fillPatternY()),ot.rotate(Konva$1.getAngle(this.fillPatternRotation())),ot.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),ot.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ct=ot.getMatrix(),ut=typeof DOMMatrix>"u"?{a:ct[0],b:ct[1],c:ct[2],d:ct[3],e:ct[4],f:ct[5]}:new DOMMatrix(ct);et.setTransform(ut)}return et}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const g=this.fillLinearGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillLinearGradientStartPoint(),ct=this.fillLinearGradientEndPoint(),ut=et.createLinearGradient(ot.x,ot.y,ct.x,ct.y);for(let dt=0;dt<g.length;dt+=2)ut.addColorStop(g[dt],g[dt+1]);return ut}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const g=this.fillRadialGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillRadialGradientStartPoint(),ct=this.fillRadialGradientEndPoint(),ut=et.createRadialGradient(ot.x,ot.y,this.fillRadialGradientStartRadius(),ct.x,ct.y,this.fillRadialGradientEndRadius());for(let dt=0;dt<g.length;dt+=2)ut.addColorStop(g[dt],g[dt+1]);return ut}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const g=Util.colorToRGBA(this.shadowColor());if(g)return"rgba("+g.r+","+g.g+","+g.b+","+g.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const g=this.hitStrokeWidth();return g==="auto"?this.hasStroke():this.strokeEnabled()&&!!g}intersects(g){const et=this.getStage();if(!et)return!1;const ot=et.bufferHitCanvas;return ot.getContext().clear(),this.drawHit(ot,void 0,!0),ot.context.getImageData(Math.round(g.x),Math.round(g.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(g){var et;if(!((et=this.attrs.perfectDrawEnabled)!==null&&et!==void 0?et:!0))return!1;const ct=g||this.hasFill(),ut=this.hasStroke(),dt=this.getAbsoluteOpacity()!==1;if(ct&&ut&&dt)return!0;const ft=this.hasShadow(),St=this.shadowForStrokeEnabled();return!!(ct&&ut&&ft&&St)}setStrokeHitEnabled(g){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),g?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const g=this.size();return{x:this._centroid?-g.width/2:0,y:this._centroid?-g.height/2:0,width:g.width,height:g.height}}getClientRect(g={}){let et=!1,ot=this.getParent();for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.getParent()}const ct=g.skipTransform,ut=g.relativeTo||et&&this.getStage()||void 0,dt=this.getSelfRect(),St=!g.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,kt=dt.width+St,Tt=dt.height+St,jt=!g.skipShadow&&this.hasShadow(),Rt=jt?this.shadowOffsetX():0,Ft=jt?this.shadowOffsetY():0,$t=kt+Math.abs(Rt),zt=Tt+Math.abs(Ft),Kt=jt&&this.shadowBlur()||0,Bt=$t+Kt*2,Ut=zt+Kt*2,Jt={width:Bt,height:Ut,x:-(St/2+Kt)+Math.min(Rt,0)+dt.x,y:-(St/2+Kt)+Math.min(Ft,0)+dt.y};return ct?Jt:this._transformedRect(Jt,ut)}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct.getCanvas(),dt=ut.getContext(),ft=this._getCanvasCache(),St=this.getSceneFunc(),kt=this.hasShadow();let Tt;const jt=!1,Rt=et===this;if(!this.isVisible()&&!Rt)return this;if(ft){dt.save();const Ft=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),this._drawCachedSceneCanvas(dt),dt.restore(),this}if(!St)return this;if(dt.save(),this._useBufferCanvas()&&!jt){Tt=this.getStage();const Ft=ot||Tt.bufferCanvas,$t=Ft.getContext();$t.clear(),$t.save(),$t._applyLineJoin(this),$t._applyMiterLimit(this);const zt=this.getAbsoluteTransform(et).getMatrix();$t.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5]),St.call(this,$t,this),$t.restore();const Kt=Ft.pixelRatio;kt&&dt._applyShadow(this),Rt||(dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)),dt.drawImage(Ft._canvas,Ft.x||0,Ft.y||0,Ft.width/Kt,Ft.height/Kt)}else{if(dt._applyLineJoin(this),dt._applyMiterLimit(this),!Rt){const Ft=this.getAbsoluteTransform(et).getMatrix();dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)}kt&&dt._applyShadow(this),St.call(this,dt,this)}return dt.restore(),this}drawHit(g,et,ot=!1){if(!this.shouldDrawHit(et,ot))return this;const ct=this.getLayer(),ut=g||ct.hitCanvas,dt=ut&&ut.getContext(),ft=this.hitFunc()||this.sceneFunc(),St=this._getCanvasCache(),kt=St&&St.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),kt){dt.save();const jt=this.getAbsoluteTransform(et).getMatrix();return dt.transform(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]),this._drawCachedHitCanvas(dt),dt.restore(),this}if(!ft)return this;if(dt.save(),dt._applyLineJoin(this),dt._applyMiterLimit(this),!(this===et)){const jt=this.getAbsoluteTransform(et).getMatrix();dt.transform(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5])}return ft.call(this,dt,this),dt.restore(),this}drawHitFromCache(g=0){const et=this._getCanvasCache(),ot=this._getCachedSceneCanvas(),ct=et.hit,ut=ct.getContext(),dt=ct.getWidth(),ft=ct.getHeight();ut.clear(),ut.drawImage(ot._canvas,0,0,dt,ft);try{const St=ut.getImageData(0,0,dt,ft),kt=St.data,Tt=kt.length,jt=Util._hexToRgb(this.colorKey);for(let Rt=0;Rt<Tt;Rt+=4)kt[Rt+3]>g?(kt[Rt]=jt.r,kt[Rt+1]=jt.g,kt[Rt+2]=jt.b,kt[Rt+3]=255):kt[Rt+3]=0;ut.putImageData(St,0,0)}catch(St){Util.error("Unable to draw hit graph from cached scene canvas. "+St.message)}return this}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(g){super(g),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(g){return this.getContext().clear(g),this.getHitCanvas().getContext().clear(g),this}setZIndex(g){super.setZIndex(g);const et=this.getStage();return et&&et.content&&(et.content.removeChild(this.getNativeCanvasElement()),g<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[g+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const et=this.getStage();return!et||!et.content?!1:(et.content.removeChild(this.getNativeCanvasElement()),this.index<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[this.index+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const g=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),g&&g.parentNode&&Util._isInDocument(g)&&g.parentNode.removeChild(g),this}getStage(){return this.parent}setSize({width:g,height:et}){return this.canvas.setSize(g,et),this.hitCanvas.setSize(g,et),this._setSmoothEnabled(),this}_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(g){return g={...g},g.width=g.width||this.getWidth(),g.height=g.height||this.getHeight(),g.x=g.x!==void 0?g.x:this.x(),g.y=g.y!==void 0?g.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,g)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(g){if(!this.isListening()||!this.isVisible())return null;let et=1,ot=!1;for(;;){for(let ct=0;ct<INTERSECTION_OFFSETS_LEN;ct++){const ut=INTERSECTION_OFFSETS[ct],dt=this._getIntersection({x:g.x+ut.x*et,y:g.y+ut.y*et}),ft=dt.shape;if(ft)return ft;if(ot=!!dt.antialiased,!dt.antialiased)break}if(ot)et+=1;else return null}}_getIntersection(g){const et=this.hitCanvas.pixelRatio,ot=this.hitCanvas.context.getImageData(Math.round(g.x*et),Math.round(g.y*et),1,1).data,ct=ot[3];if(ct===255){const ut=Util._rgbToHex(ot[0],ot[1],ot[2]),dt=shapes[HASH+ut];return dt?{shape:dt}:{antialiased:!0}}else if(ct>0)return{antialiased:!0};return{}}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct&&ct.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&ut.getContext().clear(),Container.prototype.drawScene.call(this,ut,et,ot),this._fire(DRAW,{node:this}),this}drawHit(g,et){const ot=this.getLayer(),ct=g||ot&&ot.hitCanvas;return ot&&ot.clearBeforeDraw()&&ot.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,ct,et),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(g){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(g)}getHitGraphEnabled(g){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const g=this.parent;!!this.hitCanvas._canvas.parentNode?g.content.removeChild(this.hitCanvas._canvas):g.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(g){super(g),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);class Group extends Container{_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}}Group.prototype.nodeType="Group";_registerNode(Group);const now=function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}}();class Animation{constructor(g,et){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=g,this.setLayers(et)}setLayers(g){let et=[];return g&&(et=Array.isArray(g)?g:[g]),this.layers=et,this}getLayers(){return this.layers}addLayer(g){const et=this.layers,ot=et.length;for(let ct=0;ct<ot;ct++)if(et[ct]._id===g._id)return!1;return this.layers.push(g),!0}isRunning(){const et=Animation.animations,ot=et.length;for(let ct=0;ct<ot;ct++)if(et[ct].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(g){this.frame.timeDiff=g-this.frame.lastTime,this.frame.lastTime=g,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(g){this.animations.push(g),this._handleAnimation()}static _removeAnimation(g){const et=g.id,ot=this.animations,ct=ot.length;for(let ut=0;ut<ct;ut++)if(ot[ut].id===et){this.animations.splice(ut,1);break}}static _runFrames(){const g={},et=this.animations;for(let ot=0;ot<et.length;ot++){const ct=et[ot],ut=ct.layers,dt=ct.func;ct._updateFrameObject(now());const ft=ut.length;let St;if(dt?St=dt.call(ct,ct.frame)!==!1:St=!0,!!St)for(let kt=0;kt<ft;kt++){const Tt=ut[kt];Tt._id!==void 0&&(g[Tt._id]=Tt)}}for(const ot in g)g.hasOwnProperty(ot)&&g[ot].batchDraw()}static _animationLoop(){const g=Animation;g.animations.length?(g._runFrames(),Util.requestAnimFrame(g._animationLoop)):g.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(g,et,ot,ct,ut,dt,ft){this.prop=g,this.propFunc=et,this.begin=ct,this._pos=ct,this.duration=dt,this._change=0,this.prevPos=0,this.yoyo=ft,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=ot,this._change=ut-this.begin,this.pause()}fire(g){const et=this[g];et&&et()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(g):this.state===REVERSING&&this.setTime(this.duration-g)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(g){const et=this,ot=g.node,ct=ot._id,ut=g.easing||Easings.Linear,dt=!!g.yoyo;let ft,St;typeof g.duration>"u"?ft=.3:g.duration===0?ft=.001:ft=g.duration,this.node=ot,this._id=idCounter++;const kt=ot.getLayer()||(ot instanceof Konva$1.Stage?ot.getLayers():null);kt||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){et.tween.onEnterFrame()},kt),this.tween=new TweenEngine(St,function(Tt){et._tweenFunc(Tt)},ut,0,1,ft*1e3,dt),this._addListeners(),Tween.attrs[ct]||(Tween.attrs[ct]={}),Tween.attrs[ct][this._id]||(Tween.attrs[ct][this._id]={}),Tween.tweens[ct]||(Tween.tweens[ct]={});for(St in g)blacklist[St]===void 0&&this._addAttr(St,g[St]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,et){const ot=this.node,ct=ot._id;let ut,dt,ft,St,kt;const Tt=Tween.tweens[ct][g];Tt&&delete Tween.attrs[ct][Tt][g];let jt=ot.getAttr(g);if(Util._isArray(et))if(ut=[],dt=Math.max(et.length,jt.length),g==="points"&&et.length!==jt.length&&(et.length>jt.length?(St=jt,jt=Util._prepareArrayForTween(jt,et,ot.closed())):(ft=et,et=Util._prepareArrayForTween(et,jt,ot.closed()))),g.indexOf("fill")===0)for(let Rt=0;Rt<dt;Rt++)if(Rt%2===0)ut.push(et[Rt]-jt[Rt]);else{const Ft=Util.colorToRGBA(jt[Rt]);kt=Util.colorToRGBA(et[Rt]),jt[Rt]=Ft,ut.push({r:kt.r-Ft.r,g:kt.g-Ft.g,b:kt.b-Ft.b,a:kt.a-Ft.a})}else for(let Rt=0;Rt<dt;Rt++)ut.push(et[Rt]-jt[Rt]);else colorAttrs.indexOf(g)!==-1?(jt=Util.colorToRGBA(jt),kt=Util.colorToRGBA(et),ut={r:kt.r-jt.r,g:kt.g-jt.g,b:kt.b-jt.b,a:kt.a-jt.a}):ut=et-jt;Tween.attrs[ct][this._id][g]={start:jt,diff:ut,end:et,trueEnd:ft,trueStart:St},Tween.tweens[ct][g]=this._id}_tweenFunc(g){const et=this.node,ot=Tween.attrs[et._id][this._id];let ct,ut,dt,ft,St,kt,Tt,jt;for(ct in ot){if(ut=ot[ct],dt=ut.start,ft=ut.diff,jt=ut.end,Util._isArray(dt))if(St=[],Tt=Math.max(dt.length,jt.length),ct.indexOf("fill")===0)for(kt=0;kt<Tt;kt++)kt%2===0?St.push((dt[kt]||0)+ft[kt]*g):St.push("rgba("+Math.round(dt[kt].r+ft[kt].r*g)+","+Math.round(dt[kt].g+ft[kt].g*g)+","+Math.round(dt[kt].b+ft[kt].b*g)+","+(dt[kt].a+ft[kt].a*g)+")");else for(kt=0;kt<Tt;kt++)St.push((dt[kt]||0)+ft[kt]*g);else colorAttrs.indexOf(ct)!==-1?St="rgba("+Math.round(dt.r+ft.r*g)+","+Math.round(dt.g+ft.g*g)+","+Math.round(dt.b+ft.b*g)+","+(dt.a+ft.a*g)+")":St=dt+ft*g;et.setAttr(ct,St)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueEnd&&g.setAttr("points",et.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueStart&&g.points(et.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,et=this._id,ot=Tween.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const ct in ot)delete Tween.tweens[g][ct];delete Tween.attrs[g][et],Tween.tweens[g]&&(Object.keys(Tween.tweens[g]).length===0&&delete Tween.tweens[g],Object.keys(Tween.attrs[g]).length===0&&delete Tween.attrs[g])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(it){const g=it.onFinish;it.node=this,it.onFinish=function(){this.destroy(),g&&g()},new Tween(it).play()};const Easings={BackEaseIn(it,g,et,ot){return et*(it/=ot)*it*((1.70158+1)*it-1.70158)+g},BackEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*((1.70158+1)*it+1.70158)+1)+g},BackEaseInOut(it,g,et,ot){let ct=1.70158;return(it/=ot/2)<1?et/2*(it*it*(((ct*=1.525)+1)*it-ct))+g:et/2*((it-=2)*it*(((ct*=1.525)+1)*it+ct)+2)+g},ElasticEaseIn(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ut||(ut=ot*.3),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),-(ct*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut))+g)},ElasticEaseOut(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ut||(ut=ot*.3),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),ct*Math.pow(2,-10*it)*Math.sin((it*ot-dt)*(2*Math.PI)/ut)+et+g)},ElasticEaseInOut(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot/2)===2?g+et:(ut||(ut=ot*(.3*1.5)),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),it<1?-.5*(ct*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut))+g:ct*Math.pow(2,-10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut)*.5+et+g)},BounceEaseOut(it,g,et,ot){return(it/=ot)<1/2.75?et*(7.5625*it*it)+g:it<2/2.75?et*(7.5625*(it-=1.5/2.75)*it+.75)+g:it<2.5/2.75?et*(7.5625*(it-=2.25/2.75)*it+.9375)+g:et*(7.5625*(it-=2.625/2.75)*it+.984375)+g},BounceEaseIn(it,g,et,ot){return et-Easings.BounceEaseOut(ot-it,0,et,ot)+g},BounceEaseInOut(it,g,et,ot){return it<ot/2?Easings.BounceEaseIn(it*2,0,et,ot)*.5+g:Easings.BounceEaseOut(it*2-ot,0,et,ot)*.5+et*.5+g},EaseIn(it,g,et,ot){return et*(it/=ot)*it+g},EaseOut(it,g,et,ot){return-et*(it/=ot)*(it-2)+g},EaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it+g:-et/2*(--it*(it-2)-1)+g},StrongEaseIn(it,g,et,ot){return et*(it/=ot)*it*it*it*it+g},StrongEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*it*it*it+1)+g},StrongEaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it*it*it*it+g:et/2*((it-=2)*it*it*it*it+2)+g},Linear(it,g,et,ot){return et*it/ot+g}},Konva=Util._assign(Konva$1,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group,DD,Shape,shapes,Animation,Tween,Easings,Context,Canvas});class Arc extends Shape{_sceneFunc(g){const et=Konva$1.getAngle(this.angle()),ot=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,et,ot),g.arc(0,0,this.innerRadius(),et,0,!ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),et=this.outerRadius(),ot=this.clockwise(),ct=Konva$1.getAngle(ot?360-this.angle():this.angle()),ut=Math.cos(Math.min(ct,Math.PI)),dt=1,ft=Math.sin(Math.min(Math.max(Math.PI,ct),3*Math.PI/2)),St=Math.sin(Math.min(ct,Math.PI/2)),kt=ut*(ut>0?g:et),Tt=dt*et,jt=ft*(ft>0?g:et),Rt=St*(St>0?et:g);return{x:kt,y:ot?-1*Rt:jt,width:Tt-kt,height:Rt-jt}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(it,g,et,ot,ct,ut,dt){const ft=Math.sqrt(Math.pow(et-it,2)+Math.pow(ot-g,2)),St=Math.sqrt(Math.pow(ct-et,2)+Math.pow(ut-ot,2)),kt=dt*ft/(ft+St),Tt=dt*St/(ft+St),jt=et-kt*(ct-it),Rt=ot-kt*(ut-g),Ft=et+Tt*(ct-it),$t=ot+Tt*(ut-g);return[jt,Rt,Ft,$t]}function expandPoints(it,g){const et=it.length,ot=[];for(let ct=2;ct<et-2;ct+=2){const ut=getControlPoints(it[ct-2],it[ct-1],it[ct],it[ct+1],it[ct+2],it[ct+3],g);isNaN(ut[0])||(ot.push(ut[0]),ot.push(ut[1]),ot.push(it[ct]),ot.push(it[ct+1]),ot.push(ut[2]),ot.push(ut[3]))}return ot}class Line extends Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const et=this.points(),ot=et.length,ct=this.tension(),ut=this.closed(),dt=this.bezier();if(!ot)return;let ft=0;if(g.beginPath(),g.moveTo(et[0],et[1]),ct!==0&&ot>4){const St=this.getTensionPoints(),kt=St.length;for(ft=ut?0:4,ut||g.quadraticCurveTo(St[0],St[1],St[2],St[3]);ft<kt-2;)g.bezierCurveTo(St[ft++],St[ft++],St[ft++],St[ft++],St[ft++],St[ft++]);ut||g.quadraticCurveTo(St[kt-2],St[kt-1],et[ot-2],et[ot-1])}else if(dt)for(ft=2;ft<ot;)g.bezierCurveTo(et[ft++],et[ft++],et[ft++],et[ft++],et[ft++],et[ft++]);else for(ft=2;ft<ot;ft+=2)g.lineTo(et[ft],et[ft+1]);ut?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),et=g.length,ot=this.tension(),ct=getControlPoints(g[et-2],g[et-1],g[0],g[1],g[2],g[3],ot),ut=getControlPoints(g[et-4],g[et-3],g[et-2],g[et-1],g[0],g[1],ot),dt=expandPoints(g,ot);return[ct[2],ct[3]].concat(dt).concat([ut[0],ut[1],g[et-2],g[et-1],ut[2],ut[3],ct[0],ct[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let et=g[0],ot=g[0],ct=g[1],ut=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ct=Math.min(ct,ft),ut=Math.max(ut,ft);return{x:et,y:ct,width:ot-et,height:ut-ct}}}Line.prototype.className="Line";Line.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line);Factory.addGetterSetter(Line,"closed",!1);Factory.addGetterSetter(Line,"bezier",!1);Factory.addGetterSetter(Line,"tension",0,getNumberValidator());Factory.addGetterSetter(Line,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(it,g,et)=>{let ot,ct;const dt=et/2;ot=0;for(let ft=0;ft<20;ft++)ct=dt*tValues[20][ft]+dt,ot+=cValues[20][ft]*BFunc(it,g,ct);return dt*ot},getQuadraticArcLength=(it,g,et)=>{et===void 0&&(et=1);const ot=it[0]-2*it[1]+it[2],ct=g[0]-2*g[1]+g[2],ut=2*it[1]-2*it[0],dt=2*g[1]-2*g[0],ft=4*(ot*ot+ct*ct),St=4*(ot*ut+ct*dt),kt=ut*ut+dt*dt;if(ft===0)return et*Math.sqrt(Math.pow(it[2]-it[0],2)+Math.pow(g[2]-g[0],2));const Tt=St/(2*ft),jt=kt/ft,Rt=et+Tt,Ft=jt-Tt*Tt,$t=Rt*Rt+Ft>0?Math.sqrt(Rt*Rt+Ft):0,zt=Tt*Tt+Ft>0?Math.sqrt(Tt*Tt+Ft):0,Kt=Tt+Math.sqrt(Tt*Tt+Ft)!==0?Ft*Math.log(Math.abs((Rt+$t)/(Tt+zt))):0;return Math.sqrt(ft)/2*(Rt*$t-Tt*zt+Kt)};function BFunc(it,g,et){const ot=getDerivative(1,et,it),ct=getDerivative(1,et,g),ut=ot*ot+ct*ct;return Math.sqrt(ut)}const getDerivative=(it,g,et)=>{const ot=et.length-1;let ct,ut;if(ot===0)return 0;if(it===0){ut=0;for(let dt=0;dt<=ot;dt++)ut+=binomialCoefficients[ot][dt]*Math.pow(1-g,ot-dt)*Math.pow(g,dt)*et[dt];return ut}else{ct=new Array(ot);for(let dt=0;dt<ot;dt++)ct[dt]=ot*(et[dt+1]-et[dt]);return getDerivative(it-1,g,ct)}},t2length=(it,g,et)=>{let ot=1,ct=it/g,ut=(it-et(ct))/g,dt=0;for(;ot>.001;){const ft=et(ct+ut),St=Math.abs(it-ft)/g;if(St<ot)ot=St,ct+=ut;else{const kt=et(ct-ut),Tt=Math.abs(it-kt)/g;Tt<ot?(ot=Tt,ct-=ut):ut/=2}if(dt++,dt>500)break}return ct};class Path extends Shape{constructor(g){super(g),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(g){const et=this.dataArray;g.beginPath();let ot=!1;for(let ct=0;ct<et.length;ct++){const ut=et[ct].command,dt=et[ct].points;switch(ut){case"L":g.lineTo(dt[0],dt[1]);break;case"M":g.moveTo(dt[0],dt[1]);break;case"C":g.bezierCurveTo(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]);break;case"Q":g.quadraticCurveTo(dt[0],dt[1],dt[2],dt[3]);break;case"A":const ft=dt[0],St=dt[1],kt=dt[2],Tt=dt[3],jt=dt[4],Rt=dt[5],Ft=dt[6],$t=dt[7],zt=kt>Tt?kt:Tt,Kt=kt>Tt?1:kt/Tt,Bt=kt>Tt?Tt/kt:1;g.translate(ft,St),g.rotate(Ft),g.scale(Kt,Bt),g.arc(0,0,zt,jt,jt+Rt,1-$t),g.scale(1/Kt,1/Bt),g.rotate(-Ft),g.translate(-ft,-St);break;case"z":ot=!0,g.closePath();break}}!ot&&!this.hasFill()?g.strokeShape(this):g.fillStrokeShape(this)}getSelfRect(){let g=[];this.dataArray.forEach(function(St){if(St.command==="A"){const kt=St.points[4],Tt=St.points[5],jt=St.points[4]+Tt;let Rt=Math.PI/180;if(Math.abs(kt-jt)<Rt&&(Rt=Math.abs(kt-jt)),Tt<0)for(let Ft=kt-Rt;Ft>jt;Ft-=Rt){const $t=Path.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push($t.x,$t.y)}else for(let Ft=kt+Rt;Ft<jt;Ft+=Rt){const $t=Path.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push($t.x,$t.y)}}else if(St.command==="C")for(let kt=0;kt<=1;kt+=.01){const Tt=Path.getPointOnCubicBezier(kt,St.start.x,St.start.y,St.points[0],St.points[1],St.points[2],St.points[3],St.points[4],St.points[5]);g.push(Tt.x,Tt.y)}else g=g.concat(St.points)});let et=g[0],ot=g[0],ct=g[1],ut=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],isNaN(dt)||(et=Math.min(et,dt),ot=Math.max(ot,dt)),isNaN(ft)||(ct=Math.min(ct,ft),ut=Math.max(ut,ft));return{x:et,y:ct,width:ot-et,height:ut-ct}}getLength(){return this.pathLength}getPointAtLength(g){return Path.getPointAtLengthOfDataArray(g,this.dataArray)}static getLineLength(g,et,ot,ct){return Math.sqrt((ot-g)*(ot-g)+(ct-et)*(ct-et))}static getPathLength(g){let et=0;for(let ot=0;ot<g.length;++ot)et+=g[ot].pathLength;return et}static getPointAtLengthOfDataArray(g,et){let ot,ct=0,ut=et.length;if(!ut)return null;for(;ct<ut&&g>et[ct].pathLength;)g-=et[ct].pathLength,++ct;if(ct===ut)return ot=et[ct-1].points.slice(-2),{x:ot[0],y:ot[1]};if(g<.01)return et[ct].command==="M"?(ot=et[ct].points.slice(0,2),{x:ot[0],y:ot[1]}):{x:et[ct].start.x,y:et[ct].start.y};const dt=et[ct],ft=dt.points;switch(dt.command){case"L":return Path.getPointOnLine(g,dt.start.x,dt.start.y,ft[0],ft[1]);case"C":return Path.getPointOnCubicBezier(t2length(g,Path.getPathLength(et),zt=>getCubicArcLength([dt.start.x,ft[0],ft[2],ft[4]],[dt.start.y,ft[1],ft[3],ft[5]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);case"Q":return Path.getPointOnQuadraticBezier(t2length(g,Path.getPathLength(et),zt=>getQuadraticArcLength([dt.start.x,ft[0],ft[2]],[dt.start.y,ft[1],ft[3]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3]);case"A":const St=ft[0],kt=ft[1],Tt=ft[2],jt=ft[3],Rt=ft[5],Ft=ft[6];let $t=ft[4];return $t+=Rt*g/dt.pathLength,Path.getPointOnEllipticalArc(St,kt,Tt,jt,$t,Ft)}return null}static getPointOnLine(g,et,ot,ct,ut,dt,ft){dt=dt??et,ft=ft??ot;const St=this.getLineLength(et,ot,ct,ut);if(St<1e-10)return{x:et,y:ot};if(ct===et)return{x:dt,y:ft+(ut>ot?g:-g)};const kt=(ut-ot)/(ct-et),Tt=Math.sqrt(g*g/(1+kt*kt))*(ct<et?-1:1),jt=kt*Tt;if(Math.abs(ft-ot-kt*(dt-et))<1e-10)return{x:dt+Tt,y:ft+jt};const Rt=((dt-et)*(ct-et)+(ft-ot)*(ut-ot))/(St*St),Ft=et+Rt*(ct-et),$t=ot+Rt*(ut-ot),zt=this.getLineLength(dt,ft,Ft,$t),Kt=Math.sqrt(g*g-zt*zt),Bt=Math.sqrt(Kt*Kt/(1+kt*kt))*(ct<et?-1:1),Ut=kt*Bt;return{x:Ft+Bt,y:$t+Ut}}static getPointOnCubicBezier(g,et,ot,ct,ut,dt,ft,St,kt){function Tt(Kt){return Kt*Kt*Kt}function jt(Kt){return 3*Kt*Kt*(1-Kt)}function Rt(Kt){return 3*Kt*(1-Kt)*(1-Kt)}function Ft(Kt){return(1-Kt)*(1-Kt)*(1-Kt)}const $t=St*Tt(g)+dt*jt(g)+ct*Rt(g)+et*Ft(g),zt=kt*Tt(g)+ft*jt(g)+ut*Rt(g)+ot*Ft(g);return{x:$t,y:zt}}static getPointOnQuadraticBezier(g,et,ot,ct,ut,dt,ft){function St(Ft){return Ft*Ft}function kt(Ft){return 2*Ft*(1-Ft)}function Tt(Ft){return(1-Ft)*(1-Ft)}const jt=dt*St(g)+ct*kt(g)+et*Tt(g),Rt=ft*St(g)+ut*kt(g)+ot*Tt(g);return{x:jt,y:Rt}}static getPointOnEllipticalArc(g,et,ot,ct,ut,dt){const ft=Math.cos(dt),St=Math.sin(dt),kt={x:ot*Math.cos(ut),y:ct*Math.sin(ut)};return{x:g+(kt.x*ft-kt.y*St),y:et+(kt.x*St+kt.y*ft)}}static parsePathData(g){if(!g)return[];let et=g;const ot=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];et=et.replace(new RegExp(" ","g"),",");for(let jt=0;jt<ot.length;jt++)et=et.replace(new RegExp(ot[jt],"g"),"|"+ot[jt]);const ct=et.split("|"),ut=[],dt=[];let ft=0,St=0;const kt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let Tt;for(let jt=1;jt<ct.length;jt++){let Rt=ct[jt],Ft=Rt.charAt(0);for(Rt=Rt.slice(1),dt.length=0;Tt=kt.exec(Rt);)dt.push(Tt[0]);let $t=[],zt=Ft==="A"||Ft==="a"?0:-1;for(let Kt=0,Bt=dt.length;Kt<Bt;Kt++){const Ut=dt[Kt];if(Ut==="00"){$t.push(0,0),zt>=0&&(zt+=2,zt>=7&&(zt-=7));continue}if(zt>=0){if(zt===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(Ut)){$t.push(parseInt(Ut[0],10)),$t.push(parseInt(Ut[1],10)),$t.push(parseFloat(Ut.slice(2))),zt+=3,zt>=7&&(zt-=7);continue}if(Ut==="11"||Ut==="10"||Ut==="01"){$t.push(parseInt(Ut[0],10)),$t.push(parseInt(Ut[1],10)),zt+=2,zt>=7&&(zt-=7);continue}if(Ut==="0"||Ut==="1"){$t.push(parseInt(Ut,10)),zt+=1,zt>=7&&(zt-=7);continue}}else if(zt===4){if(/^[01]\d+(?:\.\d+)?$/.test(Ut)){$t.push(parseInt(Ut[0],10)),$t.push(parseFloat(Ut.slice(1))),zt+=2,zt>=7&&(zt-=7);continue}if(Ut==="0"||Ut==="1"){$t.push(parseInt(Ut,10)),zt+=1,zt>=7&&(zt-=7);continue}}const Jt=parseFloat(Ut);isNaN(Jt)?$t.push(0):$t.push(Jt),zt+=1,zt>=7&&(zt-=7)}else{const Jt=parseFloat(Ut);isNaN(Jt)?$t.push(0):$t.push(Jt)}}for(;$t.length>0&&!isNaN($t[0]);){let Kt="",Bt=[];const Ut=ft,Jt=St;let en,tn,nn,rn,on,dn,cn,fn,mn,En;switch(Ft){case"l":ft+=$t.shift(),St+=$t.shift(),Kt="L",Bt.push(ft,St);break;case"L":ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"m":const Sn=$t.shift(),wn=$t.shift();if(ft+=Sn,St+=wn,Kt="M",ut.length>2&&ut[ut.length-1].command==="z"){for(let hn=ut.length-2;hn>=0;hn--)if(ut[hn].command==="M"){ft=ut[hn].points[0]+Sn,St=ut[hn].points[1]+wn;break}}Bt.push(ft,St),Ft="l";break;case"M":ft=$t.shift(),St=$t.shift(),Kt="M",Bt.push(ft,St),Ft="L";break;case"h":ft+=$t.shift(),Kt="L",Bt.push(ft,St);break;case"H":ft=$t.shift(),Kt="L",Bt.push(ft,St);break;case"v":St+=$t.shift(),Kt="L",Bt.push(ft,St);break;case"V":St=$t.shift(),Kt="L",Bt.push(ft,St);break;case"C":Bt.push($t.shift(),$t.shift(),$t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"c":Bt.push(ft+$t.shift(),St+$t.shift(),ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Kt="C",Bt.push(ft,St);break;case"S":tn=ft,nn=St,en=ut[ut.length-1],en.command==="C"&&(tn=ft+(ft-en.points[2]),nn=St+(St-en.points[3])),Bt.push(tn,nn,$t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Kt="C",Bt.push(ft,St);break;case"s":tn=ft,nn=St,en=ut[ut.length-1],en.command==="C"&&(tn=ft+(ft-en.points[2]),nn=St+(St-en.points[3])),Bt.push(tn,nn,ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Kt="C",Bt.push(ft,St);break;case"Q":Bt.push($t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"q":Bt.push(ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Kt="Q",Bt.push(ft,St);break;case"T":tn=ft,nn=St,en=ut[ut.length-1],en.command==="Q"&&(tn=ft+(ft-en.points[0]),nn=St+(St-en.points[1])),ft=$t.shift(),St=$t.shift(),Kt="Q",Bt.push(tn,nn,ft,St);break;case"t":tn=ft,nn=St,en=ut[ut.length-1],en.command==="Q"&&(tn=ft+(ft-en.points[0]),nn=St+(St-en.points[1])),ft+=$t.shift(),St+=$t.shift(),Kt="Q",Bt.push(tn,nn,ft,St);break;case"A":rn=$t.shift(),on=$t.shift(),dn=$t.shift(),cn=$t.shift(),fn=$t.shift(),mn=ft,En=St,ft=$t.shift(),St=$t.shift(),Kt="A",Bt=this.convertEndpointToCenterParameterization(mn,En,ft,St,cn,fn,rn,on,dn);break;case"a":rn=$t.shift(),on=$t.shift(),dn=$t.shift(),cn=$t.shift(),fn=$t.shift(),mn=ft,En=St,ft+=$t.shift(),St+=$t.shift(),Kt="A",Bt=this.convertEndpointToCenterParameterization(mn,En,ft,St,cn,fn,rn,on,dn);break}ut.push({command:Kt||Ft,points:Bt,start:{x:Ut,y:Jt},pathLength:this.calcLength(Ut,Jt,Kt||Ft,Bt)})}(Ft==="z"||Ft==="Z")&&ut.push({command:"z",points:[],start:void 0,pathLength:0})}return ut}static calcLength(g,et,ot,ct){let ut,dt,ft,St;const kt=Path;switch(ot){case"L":return kt.getLineLength(g,et,ct[0],ct[1]);case"C":return getCubicArcLength([g,ct[0],ct[2],ct[4]],[et,ct[1],ct[3],ct[5]],1);case"Q":return getQuadraticArcLength([g,ct[0],ct[2]],[et,ct[1],ct[3]],1);case"A":ut=0;const Tt=ct[4],jt=ct[5],Rt=ct[4]+jt;let Ft=Math.PI/180;if(Math.abs(Tt-Rt)<Ft&&(Ft=Math.abs(Tt-Rt)),dt=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],Tt,0),jt<0)for(St=Tt-Ft;St>Rt;St-=Ft)ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],St,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;else for(St=Tt+Ft;St<Rt;St+=Ft)ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],St,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;return ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],Rt,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),ut}return 0}static convertEndpointToCenterParameterization(g,et,ot,ct,ut,dt,ft,St,kt){const Tt=kt*(Math.PI/180),jt=Math.cos(Tt)*(g-ot)/2+Math.sin(Tt)*(et-ct)/2,Rt=-1*Math.sin(Tt)*(g-ot)/2+Math.cos(Tt)*(et-ct)/2,Ft=jt*jt/(ft*ft)+Rt*Rt/(St*St);Ft>1&&(ft*=Math.sqrt(Ft),St*=Math.sqrt(Ft));let $t=Math.sqrt((ft*ft*(St*St)-ft*ft*(Rt*Rt)-St*St*(jt*jt))/(ft*ft*(Rt*Rt)+St*St*(jt*jt)));ut===dt&&($t*=-1),isNaN($t)&&($t=0);const zt=$t*ft*Rt/St,Kt=$t*-St*jt/ft,Bt=(g+ot)/2+Math.cos(Tt)*zt-Math.sin(Tt)*Kt,Ut=(et+ct)/2+Math.sin(Tt)*zt+Math.cos(Tt)*Kt,Jt=function(cn){return Math.sqrt(cn[0]*cn[0]+cn[1]*cn[1])},en=function(cn,fn){return(cn[0]*fn[0]+cn[1]*fn[1])/(Jt(cn)*Jt(fn))},tn=function(cn,fn){return(cn[0]*fn[1]<cn[1]*fn[0]?-1:1)*Math.acos(en(cn,fn))},nn=tn([1,0],[(jt-zt)/ft,(Rt-Kt)/St]),rn=[(jt-zt)/ft,(Rt-Kt)/St],on=[(-1*jt-zt)/ft,(-1*Rt-Kt)/St];let dn=tn(rn,on);return en(rn,on)<=-1&&(dn=Math.PI),en(rn,on)>=1&&(dn=0),dt===0&&dn>0&&(dn=dn-2*Math.PI),dt===1&&dn<0&&(dn=dn+2*Math.PI),[Bt,Ut,ft,St,nn,dn,Tt,dt]}}Path.prototype.className="Path";Path.prototype._attrsAffectingSize=["data"];_registerNode(Path);Factory.addGetterSetter(Path,"data");let Arrow$1=class extends Line{_sceneFunc(g){super._sceneFunc(g);const et=Math.PI*2,ot=this.points();let ct=ot;const ut=this.tension()!==0&&ot.length>4;ut&&(ct=this.getTensionPoints());const dt=this.pointerLength(),ft=ot.length;let St,kt;if(ut){const Rt=[ct[ct.length-4],ct[ct.length-3],ct[ct.length-2],ct[ct.length-1],ot[ft-2],ot[ft-1]],Ft=Path.calcLength(ct[ct.length-4],ct[ct.length-3],"C",Rt),$t=Path.getPointOnQuadraticBezier(Math.min(1,1-dt/Ft),Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);St=ot[ft-2]-$t.x,kt=ot[ft-1]-$t.y}else St=ot[ft-2]-ot[ft-4],kt=ot[ft-1]-ot[ft-3];const Tt=(Math.atan2(kt,St)+et)%et,jt=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(ot[ft-2],ot[ft-1]),g.rotate(Tt),g.moveTo(0,0),g.lineTo(-dt,jt/2),g.lineTo(-dt,-jt/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(ot[0],ot[1]),ut?(St=(ct[0]+ct[2])/2-ot[0],kt=(ct[1]+ct[3])/2-ot[1]):(St=ot[2]-ot[0],kt=ot[3]-ot[1]),g.rotate((Math.atan2(-kt,-St)+et)%et),g.moveTo(0,0),g.lineTo(-dt,jt/2),g.lineTo(-dt,-jt/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const et=this.dashEnabled();et&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),et&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),et=this.pointerWidth()/2;return{x:g.x,y:g.y-et,width:g.width,height:g.height+et*2}}};Arrow$1.prototype.className="Arrow";_registerNode(Arrow$1);Factory.addGetterSetter(Arrow$1,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow$1,"pointerAtEnding",!0);class Circle extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius()!==g/2&&this.radius(g/2)}setHeight(g){this.radius()!==g/2&&this.radius(g/2)}}Circle.prototype._centroid=!0;Circle.prototype.className="Circle";Circle.prototype._attrsAffectingSize=["radius"];_registerNode(Circle);Factory.addGetterSetter(Circle,"radius",0,getNumberValidator());let Ellipse$1=class extends Shape{_sceneFunc(g){const et=this.radiusX(),ot=this.radiusY();g.beginPath(),g.save(),et!==ot&&g.scale(1,ot/et),g.arc(0,0,et,0,Math.PI*2,!1),g.restore(),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(g){this.radiusX(g/2)}setHeight(g){this.radiusY(g/2)}};Ellipse$1.prototype.className="Ellipse";Ellipse$1.prototype._centroid=!0;Ellipse$1.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse$1);Factory.addComponentsGetterSetter(Ellipse$1,"radius",["x","y"]);Factory.addGetterSetter(Ellipse$1,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse$1,"radiusY",0,getNumberValidator());let Image$1=class E4 extends Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",et=>{this._removeImageLoad(et.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),et=this.hasShadow();return g&&et?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const et=this.getWidth(),ot=this.getHeight(),ct=this.cornerRadius(),ut=this.attrs.image;let dt;if(ut){const ft=this.attrs.cropWidth,St=this.attrs.cropHeight;ft&&St?dt=[ut,this.cropX(),this.cropY(),ft,St,0,0,et,ot]:dt=[ut,0,0,et,ot]}(this.hasFill()||this.hasStroke()||ct)&&(g.beginPath(),ct?Util.drawRoundedRectPath(g,et,ot,ct):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)),ut&&(ct&&g.clip(),g.drawImage.apply(g,dt))}_hitFunc(g){const et=this.width(),ot=this.height(),ct=this.cornerRadius();g.beginPath(),ct?Util.drawRoundedRectPath(g,et,ot,ct):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,et,ot;return(ot=(g=this.attrs.width)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.width)!==null&&ot!==void 0?ot:0}getHeight(){var g,et,ot;return(ot=(g=this.attrs.height)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.height)!==null&&ot!==void 0?ot:0}static fromURL(g,et,ot=null){const ct=Util.createImageElement();ct.onload=function(){const ut=new E4({image:ct});et(ut)},ct.onerror=ot,ct.crossOrigin="Anonymous",ct.src=g}};Image$1.prototype.className="Image";Image$1.prototype._attrsAffectingSize=["image"];_registerNode(Image$1);Factory.addGetterSetter(Image$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$1,"image");Factory.addComponentsGetterSetter(Image$1,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$1,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group{constructor(g){super(g),this.on("add.konva",function(et){this._addListeners(et.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let et=this,ot;const ct=function(){et._sync()};for(ot=0;ot<attrChangeListLen$1;ot++)g.on(ATTR_CHANGE_LIST$2[ot]+CHANGE_KONVA$1,ct)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),et=this.getTag(),ot,ct,ut,dt,ft,St,kt;if(g&&et){switch(ot=g.width(),ct=g.height(),ut=et.pointerDirection(),dt=et.pointerWidth(),kt=et.pointerHeight(),ft=0,St=0,ut){case UP:ft=ot/2,St=-1*kt;break;case RIGHT$1:ft=ot+dt,St=ct/2;break;case DOWN:ft=ot/2,St=ct+kt;break;case LEFT$1:ft=-1*dt,St=ct/2;break}et.setAttrs({x:-1*ft,y:-1*St,width:ot,height:ct}),g.setAttrs({x:-1*ft,y:-1*St})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(g){const et=this.width(),ot=this.height(),ct=this.pointerDirection(),ut=this.pointerWidth(),dt=this.pointerHeight(),ft=this.cornerRadius();let St=0,kt=0,Tt=0,jt=0;typeof ft=="number"?St=kt=Tt=jt=Math.min(ft,et/2,ot/2):(St=Math.min(ft[0]||0,et/2,ot/2),kt=Math.min(ft[1]||0,et/2,ot/2),jt=Math.min(ft[2]||0,et/2,ot/2),Tt=Math.min(ft[3]||0,et/2,ot/2)),g.beginPath(),g.moveTo(St,0),ct===UP&&(g.lineTo((et-ut)/2,0),g.lineTo(et/2,-1*dt),g.lineTo((et+ut)/2,0)),g.lineTo(et-kt,0),g.arc(et-kt,kt,kt,Math.PI*3/2,0,!1),ct===RIGHT$1&&(g.lineTo(et,(ot-dt)/2),g.lineTo(et+ut,ot/2),g.lineTo(et,(ot+dt)/2)),g.lineTo(et,ot-jt),g.arc(et-jt,ot-jt,jt,0,Math.PI/2,!1),ct===DOWN&&(g.lineTo((et+ut)/2,ot),g.lineTo(et/2,ot+dt),g.lineTo((et-ut)/2,ot)),g.lineTo(Tt,ot),g.arc(Tt,ot-Tt,Tt,Math.PI/2,Math.PI,!1),ct===LEFT$1&&(g.lineTo(0,(ot+dt)/2),g.lineTo(-1*ut,ot/2),g.lineTo(0,(ot-dt)/2)),g.lineTo(0,St),g.arc(St,St,St,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,et=0,ot=this.pointerWidth(),ct=this.pointerHeight(),ut=this.pointerDirection(),dt=this.width(),ft=this.height();return ut===UP?(et-=ct,ft+=ct):ut===DOWN?ft+=ct:ut===LEFT$1?(g-=ot*1.5,dt+=ot):ut===RIGHT$1&&(dt+=ot*1.5),{x:g,y:et,width:dt,height:ft}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$1=class extends Shape{_sceneFunc(g){const et=this.cornerRadius(),ot=this.width(),ct=this.height();g.beginPath(),et?Util.drawRoundedRectPath(g,ot,ct,et):g.rect(0,0,ot,ct),g.closePath(),g.fillStrokeShape(this)}};Rect$1.prototype.className="Rect";_registerNode(Rect$1);Factory.addGetterSetter(Rect$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(g){const et=this._getPoints(),ot=this.radius(),ct=this.sides(),ut=this.cornerRadius();if(g.beginPath(),ut)Util.drawRoundedPolygonPath(g,et,ct,ot,ut);else{g.moveTo(et[0].x,et[0].y);for(let dt=1;dt<et.length;dt++)g.lineTo(et[dt].x,et[dt].y)}g.closePath(),g.fillStrokeShape(this)}_getPoints(){const g=this.attrs.sides,et=this.attrs.radius||0,ot=[];for(let ct=0;ct<g;ct++)ot.push({x:et*Math.sin(ct*2*Math.PI/g),y:-1*et*Math.cos(ct*2*Math.PI/g)});return ot}getSelfRect(){const g=this._getPoints();let et=g[0].x,ot=g[0].y,ct=g[0].x,ut=g[0].y;return g.forEach(dt=>{et=Math.min(et,dt.x),ot=Math.max(ot,dt.x),ct=Math.min(ct,dt.y),ut=Math.max(ut,dt.y)}),{x:et,y:ct,width:ot-et,height:ut-ct}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,PIx2,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),PIx2,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(g){super(g),this._updated=!0,this.anim=new Animation(()=>{const et=this._updated;return this._updated=!1,et}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const et=this.animation(),ot=this.frameIndex(),ct=ot*4,ut=this.animations()[et],dt=this.frameOffsets(),ft=ut[ct+0],St=ut[ct+1],kt=ut[ct+2],Tt=ut[ct+3],jt=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,kt,Tt),g.closePath(),g.fillStrokeShape(this)),jt)if(dt){const Rt=dt[et],Ft=ot*2;g.drawImage(jt,ft,St,kt,Tt,Rt[Ft+0],Rt[Ft+1],kt,Tt)}else g.drawImage(jt,ft,St,kt,Tt,0,0,kt,Tt)}_hitFunc(g){const et=this.animation(),ot=this.frameIndex(),ct=ot*4,ut=this.animations()[et],dt=this.frameOffsets(),ft=ut[ct+2],St=ut[ct+3];if(g.beginPath(),dt){const kt=dt[et],Tt=ot*2;g.rect(kt[Tt+0],kt[Tt+1],ft,St)}else g.rect(0,0,ft,St);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),et=this.animation(),ot=this.animations(),ct=ot[et],ut=ct.length/4;g<ut-1?this.frameIndex(g+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(g){const et=this.innerRadius(),ot=this.outerRadius(),ct=this.numPoints();g.beginPath(),g.moveTo(0,0-ot);for(let ut=1;ut<ct*2;ut++){const dt=ut%2===0?ot:et,ft=dt*Math.sin(ut*Math.PI/ct),St=-1*dt*Math.cos(ut*Math.PI/ct);g.lineTo(ft,St)}g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(it){return[...it].reduce((g,et,ot,ct)=>{if(/\p{Emoji}/u.test(et)){const ut=ct[ot+1];ut&&/\p{Emoji_Modifier}|\u200D/u.test(ut)?(g.push(et+ut),ct[ot+1]=""):g.push(et)}else/\p{Regional_Indicator}{2}/u.test(et+(ct[ot+1]||""))?g.push(et+ct[ot+1]):ot>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(et)?g[g.length-1]+=et:et&&g.push(et);return g},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="…",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(it){return it.split(",").map(g=>{g=g.trim();const et=g.indexOf(" ")>=0,ot=g.indexOf('"')>=0||g.indexOf("'")>=0;return et&&!ot&&(g=`"${g}"`),g}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(it){it.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(it){it.setAttr("miterLimit",2),it.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(it){return it=it||{},!it.fillLinearGradientColorStops&&!it.fillRadialGradientColorStops&&!it.fillPatternImage&&(it.fill=it.fill||"black"),it}let Text$2=class extends Shape{constructor(g){super(checkDefaultFill(g)),this._partialTextX=0,this._partialTextY=0;for(let et=0;et<attrChangeListLen;et++)this.on(ATTR_CHANGE_LIST$1[et]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(g){var et,ot;const ct=this.textArr,ut=ct.length;if(!this.text())return;let dt=this.padding(),ft=this.fontSize(),St=this.lineHeight()*ft,kt=this.verticalAlign(),Tt=this.direction(),jt=0,Rt=this.align(),Ft=this.getWidth(),$t=this.letterSpacing(),zt=this.charRenderFunc(),Kt=this.fill(),Bt=this.textDecoration(),Ut=Bt.indexOf("underline")!==-1,Jt=Bt.indexOf("line-through")!==-1,en;Tt=Tt===INHERIT?g.direction:Tt;let tn=St/2,nn=MIDDLE;if(!Konva$1.legacyTextRendering){const rn=this.measureSize("M");nn="alphabetic";const on=(et=rn.fontBoundingBoxAscent)!==null&&et!==void 0?et:rn.actualBoundingBoxAscent,dn=(ot=rn.fontBoundingBoxDescent)!==null&&ot!==void 0?ot:rn.actualBoundingBoxDescent;tn=(on-dn)/2+St/2}for(Tt===RTL&&g.setAttr("direction",Tt),g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",nn),g.setAttr("textAlign",LEFT),kt===MIDDLE?jt=(this.getHeight()-ut*St-dt*2)/2:kt===BOTTOM&&(jt=this.getHeight()-ut*St-dt*2),g.translate(dt,jt+dt),en=0;en<ut;en++){let rn=0,on=0;const dn=ct[en],cn=dn.text,fn=dn.width,mn=dn.lastInParagraph;if(g.save(),Rt===RIGHT?rn+=Ft-fn-dt*2:Rt===CENTER&&(rn+=(Ft-fn-dt*2)/2),Ut){g.save(),g.beginPath();const En=Konva$1.legacyTextRendering?Math.round(ft/2):Math.round(ft/4),Sn=rn,wn=tn+on+En;g.moveTo(Sn,wn);const hn=Rt===JUSTIFY&&!mn?Ft-dt*2:fn;g.lineTo(Sn+Math.round(hn),wn),g.lineWidth=ft/15;const yn=this._getLinearGradient();g.strokeStyle=yn||Kt,g.stroke(),g.restore()}if(Tt!==RTL&&($t!==0||Rt===JUSTIFY||zt)){const En=cn.split(" ").length-1,Sn=stringToArray(cn);for(let wn=0;wn<Sn.length;wn++){const hn=Sn[wn];if(hn===" "&&!mn&&Rt===JUSTIFY&&(rn+=(Ft-dt*2-fn)/En),this._partialTextX=rn,this._partialTextY=tn+on,this._partialText=hn,zt){g.save();const an=ct.slice(0,en).reduce((bn,pn)=>bn+stringToArray(pn.text).length,0),un=wn+an;zt({char:hn,index:un,x:rn,y:tn+on,lineIndex:en,column:wn,isLastInLine:mn,width:this.measureSize(hn).width,context:g})}g.fillStrokeShape(this),zt&&g.restore(),rn+=this.measureSize(hn).width+$t}}else $t!==0&&g.setAttr("letterSpacing",`${$t}px`),this._partialTextX=rn,this._partialTextY=tn+on,this._partialText=cn,g.fillStrokeShape(this);if(Jt){g.save(),g.beginPath();const En=Konva$1.legacyTextRendering?0:-Math.round(ft/4),Sn=Rt===JUSTIFY?0:rn;g.moveTo(Sn,tn+on+En);const wn=Rt===JUSTIFY&&!mn?Ft-dt*2:fn;g.lineTo(Sn+Math.round(wn),tn+on+En),g.lineWidth=ft/15;const hn=this._getLinearGradient();g.strokeStyle=hn||Kt,g.stroke(),g.restore()}g.restore(),ut>1&&(tn+=St)}}_hitFunc(g){const et=this.getWidth(),ot=this.getHeight();g.beginPath(),g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}setText(g){const et=Util._isString(g)?g:g==null?"":g+"";return this._setAttr(TEXT,et),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(g){var et,ot,ct,ut,dt,ft,St,kt,Tt,jt,Rt;let Ft=getDummyContext(),$t=this.fontSize(),zt;Ft.save(),Ft.font=this._getContextFont(),zt=Ft.measureText(g),Ft.restore();const Kt=$t/100;return{actualBoundingBoxAscent:(et=zt.actualBoundingBoxAscent)!==null&&et!==void 0?et:71.58203125*Kt,actualBoundingBoxDescent:(ot=zt.actualBoundingBoxDescent)!==null&&ot!==void 0?ot:0,actualBoundingBoxLeft:(ct=zt.actualBoundingBoxLeft)!==null&&ct!==void 0?ct:-7.421875*Kt,actualBoundingBoxRight:(ut=zt.actualBoundingBoxRight)!==null&&ut!==void 0?ut:75.732421875*Kt,alphabeticBaseline:(dt=zt.alphabeticBaseline)!==null&&dt!==void 0?dt:0,emHeightAscent:(ft=zt.emHeightAscent)!==null&&ft!==void 0?ft:100*Kt,emHeightDescent:(St=zt.emHeightDescent)!==null&&St!==void 0?St:-20*Kt,fontBoundingBoxAscent:(kt=zt.fontBoundingBoxAscent)!==null&&kt!==void 0?kt:91*Kt,fontBoundingBoxDescent:(Tt=zt.fontBoundingBoxDescent)!==null&&Tt!==void 0?Tt:21*Kt,hangingBaseline:(jt=zt.hangingBaseline)!==null&&jt!==void 0?jt:72.80000305175781*Kt,ideographicBaseline:(Rt=zt.ideographicBaseline)!==null&&Rt!==void 0?Rt:-21*Kt,width:zt.width,height:$t}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(g){this.align()===JUSTIFY&&(g=g.trim());const ot=this._getTextWidth(g);return this.textArr.push({text:g,width:ot,lastInParagraph:!1})}_getTextWidth(g){const et=this.letterSpacing(),ot=g.length;return getDummyContext().measureText(g).width+et*ot}_setTextData(){let g=this.text().split(`
`),et=+this.fontSize(),ot=0,ct=this.lineHeight()*et,ut=this.attrs.width,dt=this.attrs.height,ft=ut!==AUTO&&ut!==void 0,St=dt!==AUTO&&dt!==void 0,kt=this.padding(),Tt=ut-kt*2,jt=dt-kt*2,Rt=0,Ft=this.wrap(),$t=Ft!==NONE,zt=Ft!==CHAR&&$t,Kt=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const Bt=Kt?this._getTextWidth(ELLIPSIS):0;for(let Ut=0,Jt=g.length;Ut<Jt;++Ut){let en=g[Ut],tn=this._getTextWidth(en);if(ft&&tn>Tt)for(;en.length>0;){let nn=0,rn=stringToArray(en).length,on="",dn=0;for(;nn<rn;){const cn=nn+rn>>>1,fn=stringToArray(en),mn=fn.slice(0,cn+1).join(""),En=this._getTextWidth(mn);(Kt&&St&&Rt+ct>jt?En+Bt:En)<=Tt?(nn=cn+1,on=mn,dn=En):rn=cn}if(on){if(zt){const mn=stringToArray(en),En=stringToArray(on),Sn=mn[En.length],wn=Sn===SPACE||Sn===DASH;let hn;if(wn&&dn<=Tt)hn=En.length;else{const yn=En.lastIndexOf(SPACE),an=En.lastIndexOf(DASH);hn=Math.max(yn,an)+1}hn>0&&(nn=hn,on=mn.slice(0,nn).join(""),dn=this._getTextWidth(on))}if(on=on.trimRight(),this._addTextLine(on),ot=Math.max(ot,dn),Rt+=ct,this._shouldHandleEllipsis(Rt)){this._tryToAddEllipsisToLastLine();break}if(en=stringToArray(en).slice(nn).join("").trimLeft(),en.length>0&&(tn=this._getTextWidth(en),tn<=Tt)){this._addTextLine(en),Rt+=ct,ot=Math.max(ot,tn);break}}else break}else this._addTextLine(en),Rt+=ct,ot=Math.max(ot,tn),this._shouldHandleEllipsis(Rt)&&Ut<Jt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),St&&Rt+ct>jt)break}this.textHeight=et,this.textWidth=ot}_shouldHandleEllipsis(g){const et=+this.fontSize(),ot=this.lineHeight()*et,ct=this.attrs.height,ut=ct!==AUTO&&ct!==void 0,dt=this.padding(),ft=ct-dt*2;return!(this.wrap()!==NONE)||ut&&g+ot>ft}_tryToAddEllipsisToLastLine(){const g=this.attrs.width,et=g!==AUTO&&g!==void 0,ot=this.padding(),ct=g-ot*2,ut=this.ellipsis(),dt=this.textArr[this.textArr.length-1];!dt||!ut||(et&&(this._getTextWidth(dt.text+ELLIPSIS)<ct||(dt.text=dt.text.slice(0,dt.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(dt.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const g=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,et=this.hasShadow();return g&&et?!0:super._useBufferCanvas()}};Text$2.prototype._fillFunc=_fillFunc$1;Text$2.prototype._strokeFunc=_strokeFunc$1;Text$2.prototype.className=TEXT_UPPER;Text$2.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$2);Factory.overWriteSetter(Text$2,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$2,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$2,"direction",INHERIT);Factory.addGetterSetter(Text$2,"fontFamily","Arial");Factory.addGetterSetter(Text$2,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$2,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$2,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$2,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$2,"align",LEFT);Factory.addGetterSetter(Text$2,"verticalAlign",TOP);Factory.addGetterSetter(Text$2,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$2,"wrap",WORD);Factory.addGetterSetter(Text$2,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$2,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$2,"text","",getStringValidator());Factory.addGetterSetter(Text$2,"textDecoration","");Factory.addGetterSetter(Text$2,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(it){it.fillText(this.partialText,0,0)}function _strokeFunc(it){it.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(g){super(g),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const et=this.pathLength;return g>et?null:Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const et=this.textDecoration(),ot=this.fill(),ct=this.fontSize(),ut=this.glyphInfo,dt=et.indexOf("underline")!==-1,ft=et.indexOf("line-through")!==-1;dt&&g.beginPath();for(let St=0;St<ut.length;St++){g.save();const kt=ut[St].p0;g.translate(kt.x,kt.y),g.rotate(ut[St].rotation),this.partialText=ut[St].text,g.fillStrokeShape(this),dt&&(St===0&&g.moveTo(0,ct/2+1),g.lineTo(ut[St].width,ct/2+1)),g.restore()}if(dt&&(g.strokeStyle=ot,g.lineWidth=ct/20,g.stroke()),ft){g.beginPath();for(let St=0;St<ut.length;St++){g.save();const kt=ut[St].p0;g.translate(kt.x,kt.y),g.rotate(ut[St].rotation),St===0&&g.moveTo(0,0),g.lineTo(ut[St].width,0),g.restore()}g.strokeStyle=ot,g.lineWidth=ct/20,g.stroke()}g.restore()}_hitFunc(g){g.beginPath();const et=this.glyphInfo;if(et.length>=1){const ot=et[0].p0;g.moveTo(ot.x,ot.y)}for(let ot=0;ot<et.length;ot++){const ct=et[ot].p1;g.lineTo(ct.x,ct.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return Text$2.prototype.setText.call(this,g)}_getContextFont(){return Text$2.prototype._getContextFont.call(this)}_getTextSize(g){const ot=this.dummyCanvas.getContext("2d");ot.save(),ot.font=this._getContextFont();const ct=ot.measureText(g);return ot.restore(),{width:ct.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const g=stringToArray(this.text()),et=[];let ot=0;for(let jt=0;jt<g.length;jt++)et.push({char:g[jt],width:this._getTextSize(g[jt]).width}),ot+=et[jt].width;const{height:ct}=this._getTextSize(this.attrs.text);if(this.textWidth=ot,this.textHeight=ct,this.glyphInfo=[],!this.attrs.data)return null;const ut=this.letterSpacing(),dt=this.align(),ft=this.kerningFunc(),St=Math.max(this.textWidth+((this.attrs.text||"").length-1)*ut,0);let kt=0;dt==="center"&&(kt=Math.max(0,this.pathLength/2-St/2)),dt==="right"&&(kt=Math.max(0,this.pathLength-St));let Tt=kt;for(let jt=0;jt<et.length;jt++){const Rt=this._getPointAtLength(Tt);if(!Rt)return;const Ft=et[jt].char;let $t=et[jt].width+ut;if(Ft===" "&&dt==="justify"){const en=this.text().split(" ").length-1;$t+=(this.pathLength-St)/en}const zt=this._getPointAtLength(Tt+$t);if(!zt)return;const Kt=Path.getLineLength(Rt.x,Rt.y,zt.x,zt.y);let Bt=0;if(ft)try{Bt=ft(et[jt-1].char,Ft)*this.fontSize()}catch{Bt=0}Rt.x+=Bt,zt.x+=Bt,this.textWidth+=Bt;const Ut=Path.getPointOnLine(Bt+Kt/2,Rt.x,Rt.y,zt.x,zt.y),Jt=Math.atan2(zt.y-Rt.y,zt.x-Rt.x);this.glyphInfo.push({transposeX:Ut.x,transposeY:Ut.y,text:g[jt],rotation:Jt,p0:Rt,p1:zt,width:Kt}),Tt+=$t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(kt){g.push(kt.p0.x),g.push(kt.p0.y),g.push(kt.p1.x),g.push(kt.p1.y)});let et=g[0]||0,ot=g[0]||0,ct=g[1]||0,ut=g[1]||0,dt,ft;for(let kt=0;kt<g.length/2;kt++)dt=g[kt*2],ft=g[kt*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ct=Math.min(ct,ft),ut=Math.max(ut,ft);const St=this.fontSize();return{x:et-St/2,y:ct-St/2,width:ot-et+St,height:ut-ct+St}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(it=>it+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$1._global;function getCursor(it,g,et){if(it==="rotater")return et;g+=Util.degToRad(ANGLES[it]||0);const ot=(Util.radToDeg(g)%360+360)%360;return Util._inRange(ot,315+22.5,360)||Util._inRange(ot,0,22.5)?"ns-resize":Util._inRange(ot,45-22.5,45+22.5)?"nesw-resize":Util._inRange(ot,90-22.5,90+22.5)?"ew-resize":Util._inRange(ot,135-22.5,135+22.5)?"nwse-resize":Util._inRange(ot,180-22.5,180+22.5)?"ns-resize":Util._inRange(ot,225-22.5,225+22.5)?"nesw-resize":Util._inRange(ot,270-22.5,270+22.5)?"ew-resize":Util._inRange(ot,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+ot),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],MAX_SAFE_INTEGER=1e8;function getCenter(it){return{x:it.x+it.width/2*Math.cos(it.rotation)+it.height/2*Math.sin(-it.rotation),y:it.y+it.height/2*Math.cos(it.rotation)+it.width/2*Math.sin(it.rotation)}}function rotateAroundPoint(it,g,et){const ot=et.x+(it.x-et.x)*Math.cos(g)-(it.y-et.y)*Math.sin(g),ct=et.y+(it.x-et.x)*Math.sin(g)+(it.y-et.y)*Math.cos(g);return{...it,rotation:it.rotation+g,x:ot,y:ct}}function rotateAroundCenter(it,g){const et=getCenter(it);return rotateAroundPoint(it,g,et)}function getSnap(it,g,et){let ot=g;for(let ct=0;ct<it.length;ct++){const ut=Konva$1.getAngle(it[ct]),dt=Math.abs(ut-g)%(Math.PI*2);Math.min(dt,Math.PI*2-dt)<et&&(ot=ut)}return ot}let activeTransformersCount=0,Transformer$1=class extends Group{constructor(g){super(g),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(g){return this.setNode(g),this}setNode(g){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([g])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(g=[]){this._nodes&&this._nodes.length&&this.detach();const et=g.filter(ct=>ct.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=g=et,g.length===1&&this.useSingleNodeRotation()?this.rotation(g[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(ct=>{const ut=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(ct._attrsAffectingSize.length){const dt=ct._attrsAffectingSize.map(ft=>ft+"Change."+this._getEventNamespace()).join(" ");ct.on(dt,ut)}ct.on(TRANSFORM_CHANGE_STR.map(dt=>dt+`.${this._getEventNamespace()}`).join(" "),ut),ct.on(`absoluteTransformChange.${this._getEventNamespace()}`,ut),this._proxyDrag(ct)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(g){let et;g.on(`dragstart.${this._getEventNamespace()}`,ot=>{et=g.getAbsolutePosition(),!this.isDragging()&&g!==this.findOne(".back")&&this.startDrag(ot,!1)}),g.on(`dragmove.${this._getEventNamespace()}`,ot=>{if(!et)return;const ct=g.getAbsolutePosition(),ut=ct.x-et.x,dt=ct.y-et.y;this.nodes().forEach(ft=>{if(ft===g||ft.isDragging())return;const St=ft.getAbsolutePosition();ft.setAbsolutePosition({x:St.x+ut,y:St.y+dt}),ft.startDrag(ot)}),et=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(g=>{g.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(g,et=this.rotation(),ot){const ct=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ut=g.getAbsoluteScale(ot),dt=g.getAbsolutePosition(ot),ft=ct.x*ut.x-g.offsetX()*ut.x,St=ct.y*ut.y-g.offsetY()*ut.y,kt=(Konva$1.getAngle(g.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Tt={x:dt.x+ft*Math.cos(kt)+St*Math.sin(-kt),y:dt.y+St*Math.cos(kt)+ft*Math.sin(kt),width:ct.width*ut.x,height:ct.height*ut.y,rotation:kt};return rotateAroundPoint(Tt,-Konva$1.getAngle(et),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-MAX_SAFE_INTEGER,y:-MAX_SAFE_INTEGER,width:0,height:0,rotation:0};const et=[];this.nodes().map(kt=>{const Tt=kt.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),jt=[{x:Tt.x,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y+Tt.height},{x:Tt.x,y:Tt.y+Tt.height}],Rt=kt.getAbsoluteTransform();jt.forEach(function(Ft){const $t=Rt.point(Ft);et.push($t)})});const ot=new Transform;ot.rotate(-Konva$1.getAngle(this.rotation()));let ct=1/0,ut=1/0,dt=-1/0,ft=-1/0;et.forEach(function(kt){const Tt=ot.point(kt);ct===void 0&&(ct=dt=Tt.x,ut=ft=Tt.y),ct=Math.min(ct,Tt.x),ut=Math.min(ut,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),ot.invert();const St=ot.point({x:ct,y:ut});return{x:St.x,y:St.y,width:dt-ct,height:ft-ut,rotation:Konva$1.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(g=>{this._createAnchor(g)}),this._createAnchor("rotater")}_createAnchor(g){const et=new Rect$1({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:g+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),ot=this;et.on("mousedown touchstart",function(ct){ot._handleMouseDown(ct)}),et.on("dragstart",ct=>{et.stopDrag(),ct.cancelBubble=!0}),et.on("dragend",ct=>{ct.cancelBubble=!0}),et.on("mouseenter",()=>{const ct=Konva$1.getAngle(this.rotation()),ut=this.rotateAnchorCursor(),dt=getCursor(g,ct,ut);et.getStage().content&&(et.getStage().content.style.cursor=dt),this._cursorChange=!0}),et.on("mouseout",()=>{et.getStage().content&&(et.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(et)}_createBack(){const g=new Shape({name:"back",width:0,height:0,sceneFunc(et,ot){const ct=ot.getParent(),ut=ct.padding();et.beginPath(),et.rect(-ut,-ut,ot.width()+ut*2,ot.height()+ut*2),et.moveTo(ot.width()/2,-ut),ct.rotateEnabled()&&ct.rotateLineVisible()&&et.lineTo(ot.width()/2,-ct.rotateAnchorOffset()*Util._sign(ot.height())-ut),et.fillStrokeShape(ot)},hitFunc:(et,ot)=>{if(!this.shouldOverdrawWholeArea())return;const ct=this.padding();et.beginPath(),et.rect(-ct,-ct,ot.width()+ct*2,ot.height()+ct*2),et.fillStrokeShape(ot)}});this.add(g),this._proxyDrag(g),g.on("dragstart",et=>{et.cancelBubble=!0}),g.on("dragmove",et=>{et.cancelBubble=!0}),g.on("dragend",et=>{et.cancelBubble=!0}),this.on("dragmove",et=>{this.update()})}_handleMouseDown(g){if(this._transforming)return;this._movingAnchorName=g.target.name().split(" ")[0];const et=this._getNodeRect(),ot=et.width,ct=et.height,ut=Math.sqrt(Math.pow(ot,2)+Math.pow(ct,2));this.sin=Math.abs(ct/ut),this.cos=Math.abs(ot/ut),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const dt=g.target.getAbsolutePosition(),ft=g.target.getStage().getPointerPosition();this._anchorDragOffset={x:ft.x-dt.x,y:ft.y-dt.y},activeTransformersCount++,this._fire("transformstart",{evt:g.evt,target:this.getNode()}),this._nodes.forEach(St=>{St._fire("transformstart",{evt:g.evt,target:St})})}_handleMouseMove(g){let et,ot,ct;const ut=this.findOne("."+this._movingAnchorName),dt=ut.getStage();dt.setPointersPositions(g);const ft=dt.getPointerPosition();let St={x:ft.x-this._anchorDragOffset.x,y:ft.y-this._anchorDragOffset.y};const kt=ut.getAbsolutePosition();this.anchorDragBoundFunc()&&(St=this.anchorDragBoundFunc()(kt,St,g)),ut.setAbsolutePosition(St);const Tt=ut.getAbsolutePosition();if(kt.x===Tt.x&&kt.y===Tt.y)return;if(this._movingAnchorName==="rotater"){const Ut=this._getNodeRect();et=ut.x()-Ut.width/2,ot=-ut.y()+Ut.height/2;let Jt=Math.atan2(-ot,et)+Math.PI/2;Ut.height<0&&(Jt-=Math.PI);const tn=Konva$1.getAngle(this.rotation())+Jt,nn=Konva$1.getAngle(this.rotationSnapTolerance()),on=getSnap(this.rotationSnaps(),tn,nn)-Ut.rotation,dn=rotateAroundCenter(Ut,on);this._fitNodesInto(dn,g);return}const jt=this.shiftBehavior();let Rt;jt==="inverted"?Rt=this.keepRatio()&&!g.shiftKey:jt==="none"?Rt=this.keepRatio():Rt=this.keepRatio()||g.shiftKey;let Ft=this.centeredScaling()||g.altKey;if(this._movingAnchorName==="top-left"){if(Rt){const Ut=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};ct=Math.sqrt(Math.pow(Ut.x-ut.x(),2)+Math.pow(Ut.y-ut.y(),2));const Jt=this.findOne(".top-left").x()>Ut.x?-1:1,en=this.findOne(".top-left").y()>Ut.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*en,this.findOne(".top-left").x(Ut.x-et),this.findOne(".top-left").y(Ut.y-ot)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ut.y());else if(this._movingAnchorName==="top-right"){if(Rt){const Ut=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};ct=Math.sqrt(Math.pow(ut.x()-Ut.x,2)+Math.pow(Ut.y-ut.y(),2));const Jt=this.findOne(".top-right").x()<Ut.x?-1:1,en=this.findOne(".top-right").y()>Ut.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*en,this.findOne(".top-right").x(Ut.x+et),this.findOne(".top-right").y(Ut.y-ot)}var $t=ut.position();this.findOne(".top-left").y($t.y),this.findOne(".bottom-right").x($t.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ut.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ut.x());else if(this._movingAnchorName==="bottom-left"){if(Rt){const Ut=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};ct=Math.sqrt(Math.pow(Ut.x-ut.x(),2)+Math.pow(ut.y()-Ut.y,2));const Jt=Ut.x<ut.x()?-1:1,en=ut.y()<Ut.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*en,ut.x(Ut.x-et),ut.y(Ut.y+ot)}$t=ut.position(),this.findOne(".top-left").x($t.x),this.findOne(".bottom-right").y($t.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ut.y());else if(this._movingAnchorName==="bottom-right"){if(Rt){const Ut=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};ct=Math.sqrt(Math.pow(ut.x()-Ut.x,2)+Math.pow(ut.y()-Ut.y,2));const Jt=this.findOne(".bottom-right").x()<Ut.x?-1:1,en=this.findOne(".bottom-right").y()<Ut.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*en,this.findOne(".bottom-right").x(Ut.x+et),this.findOne(".bottom-right").y(Ut.y+ot)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(Ft=this.centeredScaling()||g.altKey,Ft){const Ut=this.findOne(".top-left"),Jt=this.findOne(".bottom-right"),en=Ut.x(),tn=Ut.y(),nn=this.getWidth()-Jt.x(),rn=this.getHeight()-Jt.y();Jt.move({x:-en,y:-tn}),Ut.move({x:nn,y:rn})}const zt=this.findOne(".top-left").getAbsolutePosition();et=zt.x,ot=zt.y;const Kt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Bt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:et,y:ot,width:Kt,height:Bt,rotation:Konva$1.getAngle(this.rotation())},g)}_handleMouseUp(g){this._removeEvents(g)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(g){var et;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const ot=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:g,target:ot}),(et=this.getLayer())===null||et===void 0||et.batchDraw(),ot&&this._nodes.forEach(ct=>{var ut;ct._fire("transformend",{evt:g,target:ct}),(ut=ct.getLayer())===null||ut===void 0||ut.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(g,et){const ot=this._getNodeRect(),ct=1;if(Util._inRange(g.width,-this.padding()*2-ct,ct)){this.update();return}if(Util._inRange(g.height,-this.padding()*2-ct,ct)){this.update();return}const ut=new Transform;if(ut.rotate(Konva$1.getAngle(this.rotation())),this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("left")>=0){const Rt=ut.point({x:-this.padding()*2,y:0});g.x+=Rt.x,g.y+=Rt.y,g.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Rt.x,this._anchorDragOffset.y-=Rt.y}else if(this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("right")>=0){const Rt=ut.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Rt.x,this._anchorDragOffset.y-=Rt.y,g.width+=this.padding()*2}if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("top")>=0){const Rt=ut.point({x:0,y:-this.padding()*2});g.x+=Rt.x,g.y+=Rt.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Rt.x,this._anchorDragOffset.y-=Rt.y,g.height+=this.padding()*2}else if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Rt=ut.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Rt.x,this._anchorDragOffset.y-=Rt.y,g.height+=this.padding()*2}if(this.boundBoxFunc()){const Rt=this.boundBoxFunc()(ot,g);Rt?g=Rt:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const dt=1e7,ft=new Transform;ft.translate(ot.x,ot.y),ft.rotate(ot.rotation),ft.scale(ot.width/dt,ot.height/dt);const St=new Transform,kt=g.width/dt,Tt=g.height/dt;this.flipEnabled()===!1?(St.translate(g.x,g.y),St.rotate(g.rotation),St.translate(g.width<0?g.width:0,g.height<0?g.height:0),St.scale(Math.abs(kt),Math.abs(Tt))):(St.translate(g.x,g.y),St.rotate(g.rotation),St.scale(kt,Tt));const jt=St.multiply(ft.invert());this._nodes.forEach(Rt=>{var Ft;if(!Rt.getStage())return;const $t=Rt.getParent().getAbsoluteTransform(),zt=Rt.getTransform().copy();zt.translate(Rt.offsetX(),Rt.offsetY());const Kt=new Transform;Kt.multiply($t.copy().invert()).multiply(jt).multiply($t).multiply(zt);const Bt=Kt.decompose();Rt.setAttrs(Bt),(Ft=Rt.getLayer())===null||Ft===void 0||Ft.batchDraw()}),this.rotation(Util._getRotation(g.rotation)),this._nodes.forEach(Rt=>{this._fire("transform",{evt:et,target:Rt}),Rt._fire("transform",{evt:et,target:Rt})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(g,et){this.findOne(g).setAttrs(et)}update(){var g;const et=this._getNodeRect();this.rotation(Util._getRotation(et.rotation));const ot=et.width,ct=et.height,ut=this.enabledAnchors(),dt=this.resizeEnabled(),ft=this.padding(),St=this.anchorSize(),kt=this.find("._anchor");kt.forEach(jt=>{jt.setAttrs({width:St,height:St,offsetX:St/2,offsetY:St/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:St/2+ft,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:ot/2,y:0,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:ot,y:0,offsetX:St/2-ft,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:ct/2,offsetX:St/2+ft,visible:dt&&ut.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:ot,y:ct/2,offsetX:St/2-ft,visible:dt&&ut.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:ct,offsetX:St/2+ft,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:ot/2,y:ct,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:ot,y:ct,offsetX:St/2-ft,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:ot/2,y:-this.rotateAnchorOffset()*Util._sign(ct)-ft,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:ot,height:ct,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(jt=>jt.draggable()),x:0,y:0});const Tt=this.anchorStyleFunc();Tt&&kt.forEach(jt=>{Tt(jt)}),(g=this.getLayer())===null||g===void 0||g.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const g=this.findOne("."+this._movingAnchorName);g&&g.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(g){return Node$1.prototype.clone.call(this,g)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Transformer$1.isTransforming=()=>activeTransformersCount>0;function validateAnchors(it){return it instanceof Array||Util.warn("enabledAnchors value should be an array"),it instanceof Array&&it.forEach(function(g){ANCHORS_NAMES.indexOf(g)===-1&&Util.warn("Unknown anchor name: "+g+". Available names are: "+ANCHORS_NAMES.join(", "))}),it||[]}Transformer$1.prototype.className="Transformer";_registerNode(Transformer$1);Factory.addGetterSetter(Transformer$1,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer$1,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer$1,"resizeEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateEnabled",!0);Factory.addGetterSetter(Transformer$1,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer$1,"rotationSnaps",[]);Factory.addGetterSetter(Transformer$1,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer$1,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"anchorFill","white");Factory.addGetterSetter(Transformer$1,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderDash");Factory.addGetterSetter(Transformer$1,"keepRatio",!0);Factory.addGetterSetter(Transformer$1,"shiftBehavior","default");Factory.addGetterSetter(Transformer$1,"centeredScaling",!1);Factory.addGetterSetter(Transformer$1,"ignoreStroke",!1);Factory.addGetterSetter(Transformer$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"nodes");Factory.addGetterSetter(Transformer$1,"node");Factory.addGetterSetter(Transformer$1,"boundBoxFunc");Factory.addGetterSetter(Transformer$1,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer$1,"anchorStyleFunc");Factory.addGetterSetter(Transformer$1,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer$1,"useSingleNodeRotation",!0);Factory.backCompat(Transformer$1,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,Konva$1.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(it,g){const et=it.data,ot=it.width,ct=it.height;let ut,dt,ft,St,kt,Tt,jt,Rt,Ft,$t,zt,Kt,Bt,Ut,Jt,en,tn,nn,rn,on;const dn=g+g+1,cn=ot-1,fn=ct-1,mn=g+1,En=mn*(mn+1)/2,Sn=new BlurStack,wn=mul_table[g],hn=shg_table[g];let yn=null,an=Sn,un=null,bn=null;for(let pn=1;pn<dn;pn++)an=an.next=new BlurStack,pn===mn&&(yn=an);an.next=Sn,ft=dt=0;for(let pn=0;pn<ct;pn++){Kt=Bt=Ut=Jt=St=kt=Tt=jt=0,Rt=mn*(en=et[dt]),Ft=mn*(tn=et[dt+1]),$t=mn*(nn=et[dt+2]),zt=mn*(rn=et[dt+3]),St+=En*en,kt+=En*tn,Tt+=En*nn,jt+=En*rn,an=Sn;for(let kn=0;kn<mn;kn++)an.r=en,an.g=tn,an.b=nn,an.a=rn,an=an.next;for(let kn=1;kn<mn;kn++)ut=dt+((cn<kn?cn:kn)<<2),St+=(an.r=en=et[ut])*(on=mn-kn),kt+=(an.g=tn=et[ut+1])*on,Tt+=(an.b=nn=et[ut+2])*on,jt+=(an.a=rn=et[ut+3])*on,Kt+=en,Bt+=tn,Ut+=nn,Jt+=rn,an=an.next;un=Sn,bn=yn;for(let kn=0;kn<ot;kn++)et[dt+3]=rn=jt*wn>>hn,rn!==0?(rn=255/rn,et[dt]=(St*wn>>hn)*rn,et[dt+1]=(kt*wn>>hn)*rn,et[dt+2]=(Tt*wn>>hn)*rn):et[dt]=et[dt+1]=et[dt+2]=0,St-=Rt,kt-=Ft,Tt-=$t,jt-=zt,Rt-=un.r,Ft-=un.g,$t-=un.b,zt-=un.a,ut=ft+((ut=kn+g+1)<cn?ut:cn)<<2,Kt+=un.r=et[ut],Bt+=un.g=et[ut+1],Ut+=un.b=et[ut+2],Jt+=un.a=et[ut+3],St+=Kt,kt+=Bt,Tt+=Ut,jt+=Jt,un=un.next,Rt+=en=bn.r,Ft+=tn=bn.g,$t+=nn=bn.b,zt+=rn=bn.a,Kt-=en,Bt-=tn,Ut-=nn,Jt-=rn,bn=bn.next,dt+=4;ft+=ot}for(let pn=0;pn<ot;pn++){Bt=Ut=Jt=Kt=kt=Tt=jt=St=0,dt=pn<<2,Rt=mn*(en=et[dt]),Ft=mn*(tn=et[dt+1]),$t=mn*(nn=et[dt+2]),zt=mn*(rn=et[dt+3]),St+=En*en,kt+=En*tn,Tt+=En*nn,jt+=En*rn,an=Sn;for(let _n=0;_n<mn;_n++)an.r=en,an.g=tn,an.b=nn,an.a=rn,an=an.next;let kn=ot;for(let _n=1;_n<=g;_n++)dt=kn+pn<<2,St+=(an.r=en=et[dt])*(on=mn-_n),kt+=(an.g=tn=et[dt+1])*on,Tt+=(an.b=nn=et[dt+2])*on,jt+=(an.a=rn=et[dt+3])*on,Kt+=en,Bt+=tn,Ut+=nn,Jt+=rn,an=an.next,_n<fn&&(kn+=ot);dt=pn,un=Sn,bn=yn;for(let _n=0;_n<ct;_n++)ut=dt<<2,et[ut+3]=rn=jt*wn>>hn,rn>0?(rn=255/rn,et[ut]=(St*wn>>hn)*rn,et[ut+1]=(kt*wn>>hn)*rn,et[ut+2]=(Tt*wn>>hn)*rn):et[ut]=et[ut+1]=et[ut+2]=0,St-=Rt,kt-=Ft,Tt-=$t,jt-=zt,Rt-=un.r,Ft-=un.g,$t-=un.b,zt-=un.a,ut=pn+((ut=_n+mn)<fn?ut:fn)*ot<<2,St+=Kt+=un.r=et[ut],kt+=Bt+=un.g=et[ut+1],Tt+=Ut+=un.b=et[ut+2],jt+=Jt+=un.a=et[ut+3],un=un.next,Rt+=en=bn.r,Ft+=tn=bn.g,$t+=nn=bn.b,zt+=rn=bn.a,Kt-=en,Bt-=tn,Ut-=nn,Jt-=rn,bn=bn.next,dt+=ot}}const Blur=function it(g){const et=Math.round(this.blurRadius());et>0&&filterGaussBlurRGBA(g,et)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(it){const g=this.brightness()*255,et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=4)et[ct]+=g,et[ct+1]+=g,et[ct+2]+=g};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(it){const g=this.brightness(),et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=4)et[ct]=Math.min(255,et[ct]*g),et[ct+1]=Math.min(255,et[ct+1]*g),et[ct+2]=Math.min(255,et[ct+2]*g)},Contrast=function(it){const g=Math.pow((this.contrast()+100)/100,2),et=it.data,ot=et.length;let ct=150,ut=150,dt=150;for(let ft=0;ft<ot;ft+=4)ct=et[ft],ut=et[ft+1],dt=et[ft+2],ct/=255,ct-=.5,ct*=g,ct+=.5,ct*=255,ut/=255,ut-=.5,ut*=g,ut+=.5,ut*=255,dt/=255,dt-=.5,dt*=g,dt+=.5,dt*=255,ct=ct<0?0:ct>255?255:ct,ut=ut<0?0:ut>255?255:ut,dt=dt<0?0:dt>255?255:dt,et[ft]=ct,et[ft+1]=ut,et[ft+2]=dt};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(it){var g,et,ot,ct,ut,dt,ft,St,kt;const Tt=it.data,jt=it.width,Rt=it.height,Ft=Math.min(1,Math.max(0,(et=(g=this.embossStrength)===null||g===void 0?void 0:g.call(this))!==null&&et!==void 0?et:.5)),$t=Math.min(1,Math.max(0,(ct=(ot=this.embossWhiteLevel)===null||ot===void 0?void 0:ot.call(this))!==null&&ct!==void 0?ct:.5)),Kt=(ft={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(dt=(ut=this.embossDirection)===null||ut===void 0?void 0:ut.call(this))!==null&&dt!==void 0?dt:"top-left"])!==null&&ft!==void 0?ft:315,Bt=!!((kt=(St=this.embossBlend)===null||St===void 0?void 0:St.call(this))!==null&&kt!==void 0&&kt),Ut=Ft*10,Jt=$t*255,en=Kt*Math.PI/180,tn=Math.cos(en),nn=Math.sin(en),rn=128/1020*Ut,on=new Uint8ClampedArray(Tt),dn=new Float32Array(jt*Rt);for(let Sn=0,wn=0;wn<Tt.length;wn+=4,Sn++)dn[Sn]=.2126*on[wn]+.7152*on[wn+1]+.0722*on[wn+2];const cn=[-1,0,1,-2,0,2,-1,0,1],fn=[-1,-2,-1,0,0,0,1,2,1],mn=[-jt-1,-jt,-jt+1,-1,0,1,jt-1,jt,jt+1],En=Sn=>Sn<0?0:Sn>255?255:Sn;for(let Sn=1;Sn<Rt-1;Sn++)for(let wn=1;wn<jt-1;wn++){const hn=Sn*jt+wn;let yn=0,an=0;yn+=dn[hn+mn[0]]*cn[0],an+=dn[hn+mn[0]]*fn[0],yn+=dn[hn+mn[1]]*cn[1],an+=dn[hn+mn[1]]*fn[1],yn+=dn[hn+mn[2]]*cn[2],an+=dn[hn+mn[2]]*fn[2],yn+=dn[hn+mn[3]]*cn[3],an+=dn[hn+mn[3]]*fn[3],yn+=dn[hn+mn[5]]*cn[5],an+=dn[hn+mn[5]]*fn[5],yn+=dn[hn+mn[6]]*cn[6],an+=dn[hn+mn[6]]*fn[6],yn+=dn[hn+mn[7]]*cn[7],an+=dn[hn+mn[7]]*fn[7],yn+=dn[hn+mn[8]]*cn[8],an+=dn[hn+mn[8]]*fn[8];const un=tn*yn+nn*an,bn=En(Jt+un*rn),pn=hn*4;if(Bt){const kn=bn-Jt;Tt[pn]=En(on[pn]+kn),Tt[pn+1]=En(on[pn+1]+kn),Tt[pn+2]=En(on[pn+2]+kn),Tt[pn+3]=on[pn+3]}else Tt[pn]=Tt[pn+1]=Tt[pn+2]=bn,Tt[pn+3]=on[pn+3]}for(let Sn=0;Sn<jt;Sn++){let wn=Sn*4,hn=((Rt-1)*jt+Sn)*4;Tt[wn]=on[wn],Tt[wn+1]=on[wn+1],Tt[wn+2]=on[wn+2],Tt[wn+3]=on[wn+3],Tt[hn]=on[hn],Tt[hn+1]=on[hn+1],Tt[hn+2]=on[hn+2],Tt[hn+3]=on[hn+3]}for(let Sn=1;Sn<Rt-1;Sn++){let wn=Sn*jt*4,hn=(Sn*jt+(jt-1))*4;Tt[wn]=on[wn],Tt[wn+1]=on[wn+1],Tt[wn+2]=on[wn+2],Tt[wn+3]=on[wn+3],Tt[hn]=on[hn],Tt[hn+1]=on[hn+1],Tt[hn+2]=on[hn+2],Tt[hn+3]=on[hn+3]}return it};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(it,g,et,ot,ct){const ut=et-g,dt=ct-ot;if(ut===0)return ot+dt/2;if(dt===0)return ot;let ft=(it-g)/ut;return ft=dt*ft+ot,ft}const Enhance=function(it){const g=it.data,et=g.length;let ot=g[0],ct=ot,ut,dt=g[1],ft=dt,St,kt=g[2],Tt=kt,jt;const Rt=this.enhance();if(Rt===0)return;for(let Jt=0;Jt<et;Jt+=4)ut=g[Jt+0],ut<ot?ot=ut:ut>ct&&(ct=ut),St=g[Jt+1],St<dt?dt=St:St>ft&&(ft=St),jt=g[Jt+2],jt<kt?kt=jt:jt>Tt&&(Tt=jt);ct===ot&&(ct=255,ot=0),ft===dt&&(ft=255,dt=0),Tt===kt&&(Tt=255,kt=0);let Ft,$t,zt,Kt,Bt,Ut;if(Rt>0)Ft=ct+Rt*(255-ct),$t=ot-Rt*(ot-0),zt=ft+Rt*(255-ft),Kt=dt-Rt*(dt-0),Bt=Tt+Rt*(255-Tt),Ut=kt-Rt*(kt-0);else{const Jt=(ct+ot)*.5;Ft=ct+Rt*(ct-Jt),$t=ot+Rt*(ot-Jt);const en=(ft+dt)*.5;zt=ft+Rt*(ft-en),Kt=dt+Rt*(dt-en);const tn=(Tt+kt)*.5;Bt=Tt+Rt*(Tt-tn),Ut=kt+Rt*(kt-tn)}for(let Jt=0;Jt<et;Jt+=4)g[Jt+0]=remap(g[Jt+0],ot,ct,$t,Ft),g[Jt+1]=remap(g[Jt+1],dt,ft,Kt,zt),g[Jt+2]=remap(g[Jt+2],kt,Tt,Ut,Bt)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ct=.34*g[ot]+.5*g[ot+1]+.16*g[ot+2];g[ot]=ct,g[ot+1]=ct,g[ot+2]=ct}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(it){const g=it.data,et=g.length,ot=1,ct=Math.pow(2,this.saturation()),ut=Math.abs(this.hue()+360)%360,dt=this.luminance()*127,ft=ot*ct*Math.cos(ut*Math.PI/180),St=ot*ct*Math.sin(ut*Math.PI/180),kt=.299*ot+.701*ft+.167*St,Tt=.587*ot-.587*ft+.33*St,jt=.114*ot-.114*ft-.497*St,Rt=.299*ot-.299*ft-.328*St,Ft=.587*ot+.413*ft+.035*St,$t=.114*ot-.114*ft+.293*St,zt=.299*ot-.3*ft+1.25*St,Kt=.587*ot-.586*ft-1.05*St,Bt=.114*ot+.886*ft-.2*St;let Ut,Jt,en,tn;for(let nn=0;nn<et;nn+=4)Ut=g[nn+0],Jt=g[nn+1],en=g[nn+2],tn=g[nn+3],g[nn+0]=kt*Ut+Tt*Jt+jt*en+dt,g[nn+1]=Rt*Ut+Ft*Jt+$t*en+dt,g[nn+2]=zt*Ut+Kt*Jt+Bt*en+dt,g[nn+3]=tn},HSV=function(it){const g=it.data,et=g.length,ot=Math.pow(2,this.value()),ct=Math.pow(2,this.saturation()),ut=Math.abs(this.hue()+360)%360,dt=ot*ct*Math.cos(ut*Math.PI/180),ft=ot*ct*Math.sin(ut*Math.PI/180),St=.299*ot+.701*dt+.167*ft,kt=.587*ot-.587*dt+.33*ft,Tt=.114*ot-.114*dt-.497*ft,jt=.299*ot-.299*dt-.328*ft,Rt=.587*ot+.413*dt+.035*ft,Ft=.114*ot-.114*dt+.293*ft,$t=.299*ot-.3*dt+1.25*ft,zt=.587*ot-.586*dt-1.05*ft,Kt=.114*ot+.886*dt-.2*ft;for(let Bt=0;Bt<et;Bt+=4){const Ut=g[Bt+0],Jt=g[Bt+1],en=g[Bt+2],tn=g[Bt+3];g[Bt+0]=St*Ut+kt*Jt+Tt*en,g[Bt+1]=jt*Ut+Rt*Jt+Ft*en,g[Bt+2]=$t*Ut+zt*Jt+Kt*en,g[Bt+3]=tn}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4)g[ot]=255-g[ot],g[ot+1]=255-g[ot+1],g[ot+2]=255-g[ot+2]},ToPolar=function(it,g,et){const ot=it.data,ct=g.data,ut=it.width,dt=it.height,ft=et.polarCenterX||ut/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ut-ft,jt=dt-St;const Rt=Math.sqrt(Tt*Tt+jt*jt);kt=Rt>kt?Rt:kt;const Ft=dt,$t=ut,zt=360/$t*Math.PI/180;for(let Kt=0;Kt<$t;Kt+=1){const Bt=Math.sin(Kt*zt),Ut=Math.cos(Kt*zt);for(let Jt=0;Jt<Ft;Jt+=1){Tt=Math.floor(ft+kt*Jt/Ft*Ut),jt=Math.floor(St+kt*Jt/Ft*Bt);let en=(jt*ut+Tt)*4;const tn=ot[en+0],nn=ot[en+1],rn=ot[en+2],on=ot[en+3];en=(Kt+Jt*ut)*4,ct[en+0]=tn,ct[en+1]=nn,ct[en+2]=rn,ct[en+3]=on}}},FromPolar=function(it,g,et){const ot=it.data,ct=g.data,ut=it.width,dt=it.height,ft=et.polarCenterX||ut/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ut-ft,jt=dt-St;const Rt=Math.sqrt(Tt*Tt+jt*jt);kt=Rt>kt?Rt:kt;const Ft=dt,$t=ut,zt=et.polarRotation||0;let Kt,Bt;for(Tt=0;Tt<ut;Tt+=1)for(jt=0;jt<dt;jt+=1){const Ut=Tt-ft,Jt=jt-St,en=Math.sqrt(Ut*Ut+Jt*Jt)*Ft/kt;let tn=(Math.atan2(Jt,Ut)*180/Math.PI+360+zt)%360;tn=tn*$t/360,Kt=Math.floor(tn),Bt=Math.floor(en);let nn=(Bt*ut+Kt)*4;const rn=ot[nn+0],on=ot[nn+1],dn=ot[nn+2],cn=ot[nn+3];nn=(jt*ut+Tt)*4,ct[nn+0]=rn,ct[nn+1]=on,ct[nn+2]=dn,ct[nn+3]=cn}},Kaleidoscope=function(it){const g=it.width,et=it.height;let ot,ct,ut,dt,ft,St,kt,Tt,jt,Rt,Ft=Math.round(this.kaleidoscopePower());const $t=Math.round(this.kaleidoscopeAngle()),zt=Math.floor(g*($t%360)/360);if(Ft<1)return;const Kt=Util.createCanvasElement();Kt.width=g,Kt.height=et;const Bt=Kt.getContext("2d").getImageData(0,0,g,et);Util.releaseCanvas(Kt),ToPolar(it,Bt,{polarCenterX:g/2,polarCenterY:et/2});let Ut=g/Math.pow(2,Ft);for(;Ut<=8;)Ut=Ut*2,Ft-=1;Ut=Math.ceil(Ut);let Jt=Ut,en=0,tn=Jt,nn=1;for(zt+Ut>g&&(en=Jt,tn=0,nn=-1),ct=0;ct<et;ct+=1)for(ot=en;ot!==tn;ot+=nn)ut=Math.round(ot+zt)%g,jt=(g*ct+ut)*4,ft=Bt.data[jt+0],St=Bt.data[jt+1],kt=Bt.data[jt+2],Tt=Bt.data[jt+3],Rt=(g*ct+ot)*4,Bt.data[Rt+0]=ft,Bt.data[Rt+1]=St,Bt.data[Rt+2]=kt,Bt.data[Rt+3]=Tt;for(ct=0;ct<et;ct+=1)for(Jt=Math.floor(Ut),dt=0;dt<Ft;dt+=1){for(ot=0;ot<Jt+1;ot+=1)jt=(g*ct+ot)*4,ft=Bt.data[jt+0],St=Bt.data[jt+1],kt=Bt.data[jt+2],Tt=Bt.data[jt+3],Rt=(g*ct+Jt*2-ot-1)*4,Bt.data[Rt+0]=ft,Bt.data[Rt+1]=St,Bt.data[Rt+2]=kt,Bt.data[Rt+3]=Tt;Jt*=2}FromPolar(Bt,it,{polarRotation:0})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(it,g,et){let ot=(et*it.width+g)*4;const ct=[];return ct.push(it.data[ot++],it.data[ot++],it.data[ot++],it.data[ot++]),ct}function rgbDistance(it,g){return Math.sqrt(Math.pow(it[0]-g[0],2)+Math.pow(it[1]-g[1],2)+Math.pow(it[2]-g[2],2))}function rgbMean(it){const g=[0,0,0];for(let et=0;et<it.length;et++)g[0]+=it[et][0],g[1]+=it[et][1],g[2]+=it[et][2];return g[0]/=it.length,g[1]/=it.length,g[2]/=it.length,g}function backgroundMask(it,g){const et=pixelAt(it,0,0),ot=pixelAt(it,it.width-1,0),ct=pixelAt(it,0,it.height-1),ut=pixelAt(it,it.width-1,it.height-1),dt=g||10;if(rgbDistance(et,ot)<dt&&rgbDistance(ot,ut)<dt&&rgbDistance(ut,ct)<dt&&rgbDistance(ct,et)<dt){const ft=rgbMean([ot,et,ut,ct]),St=[];for(let kt=0;kt<it.width*it.height;kt++){const Tt=rgbDistance(ft,[it.data[kt*4],it.data[kt*4+1],it.data[kt*4+2]]);St[kt]=Tt<dt?0:255}return St}}function applyMask(it,g){for(let et=0;et<it.width*it.height;et++)it.data[4*et+3]=g[et]}function erodeMask(it,g,et){const ot=[1,1,1,1,0,1,1,1,1],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let jt=0;jt<ct;jt++)for(let Rt=0;Rt<ct;Rt++){const Ft=ft+jt-ut,$t=St+Rt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Kt=ot[jt*ct+Rt];Tt+=it[zt]*Kt}}dt[kt]=Tt===255*8?255:0}return dt}function dilateMask(it,g,et){const ot=[1,1,1,1,1,1,1,1,1],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let jt=0;jt<ct;jt++)for(let Rt=0;Rt<ct;Rt++){const Ft=ft+jt-ut,$t=St+Rt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Kt=ot[jt*ct+Rt];Tt+=it[zt]*Kt}}dt[kt]=Tt>=255*4?255:0}return dt}function smoothEdgeMask(it,g,et){const ot=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let jt=0;jt<ct;jt++)for(let Rt=0;Rt<ct;Rt++){const Ft=ft+jt-ut,$t=St+Rt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Kt=ot[jt*ct+Rt];Tt+=it[zt]*Kt}}dt[kt]=Tt}return dt}const Mask=function(it){const g=this.threshold();let et=backgroundMask(it,g);return et&&(et=erodeMask(et,it.width,it.height),et=dilateMask(et,it.width,it.height),et=smoothEdgeMask(et,it.width,it.height),applyMask(it,et)),it};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(it){const g=this.noise()*255,et=it.data,ot=et.length,ct=g/2;for(let ut=0;ut<ot;ut+=4)et[ut+0]+=ct-2*ct*Math.random(),et[ut+1]+=ct-2*ct*Math.random(),et[ut+2]+=ct-2*ct*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(it){let g=Math.ceil(this.pixelSize()),et=it.width,ot=it.height,ct=Math.ceil(et/g),ut=Math.ceil(ot/g),dt=it.data;if(g<=0){Util.error("pixelSize value can not be <= 0");return}for(let ft=0;ft<ct;ft+=1)for(let St=0;St<ut;St+=1){let kt=0,Tt=0,jt=0,Rt=0;const Ft=ft*g,$t=Ft+g,zt=St*g,Kt=zt+g;let Bt=0;for(let Ut=Ft;Ut<$t;Ut+=1)if(!(Ut>=et))for(let Jt=zt;Jt<Kt;Jt+=1){if(Jt>=ot)continue;const en=(et*Jt+Ut)*4;kt+=dt[en+0],Tt+=dt[en+1],jt+=dt[en+2],Rt+=dt[en+3],Bt+=1}kt=kt/Bt,Tt=Tt/Bt,jt=jt/Bt,Rt=Rt/Bt;for(let Ut=Ft;Ut<$t;Ut+=1)if(!(Ut>=et))for(let Jt=zt;Jt<Kt;Jt+=1){if(Jt>=ot)continue;const en=(et*Jt+Ut)*4;dt[en+0]=kt,dt[en+1]=Tt,dt[en+2]=jt,dt[en+3]=Rt}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(it){const g=Math.round(this.levels()*254)+1,et=it.data,ot=et.length,ct=255/g;for(let ut=0;ut<ot;ut+=1)et[ut]=Math.floor(et[ut]/ct)*ct};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB=function(it){const g=it.data,et=g.length,ot=this.red(),ct=this.green(),ut=this.blue();for(let dt=0;dt<et;dt+=4){const ft=(.34*g[dt]+.5*g[dt+1]+.16*g[dt+2])/255;g[dt]=ft*ot,g[dt+1]=ft*ct,g[dt+2]=ft*ut,g[dt+3]=g[dt+3]}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(it){const g=it.data,et=g.length,ot=this.red(),ct=this.green(),ut=this.blue(),dt=this.alpha();for(let ft=0;ft<et;ft+=4){const St=1-dt;g[ft]=ot*dt+g[ft]*St,g[ft+1]=ct*dt+g[ft+1]*St,g[ft+2]=ut*dt+g[ft+2]*St}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(it){return this._filterUpToDate=!1,it>1?1:it<0?0:it});const Sepia=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ct=g[ot+0],ut=g[ot+1],dt=g[ot+2];g[ot+0]=Math.min(255,ct*.393+ut*.769+dt*.189),g[ot+1]=Math.min(255,ct*.349+ut*.686+dt*.168),g[ot+2]=Math.min(255,ct*.272+ut*.534+dt*.131)}},Solarize=function(it){const et=it.data;for(let ot=0;ot<et.length;ot+=4){const ct=et[ot],ut=et[ot+1],dt=et[ot+2];.2126*ct+.7152*ut+.0722*dt>=128&&(et[ot]=255-ct,et[ot+1]=255-ut,et[ot+2]=255-dt)}return it},Threshold=function(it){const g=this.threshold()*255,et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=1)et[ct]=et[ct]<g?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva.Util._assign(Konva,{Arc,Arrow:Arrow$1,Circle,Ellipse:Ellipse$1,Image:Image$1,Label,Tag,Line,Path,Rect:Rect$1,RegularPolygon,Ring,Sprite,Star,Text:Text$2,TextPath,Transformer:Transformer$1,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(it){function g(an,un){var bn=an.length;an.push(un);e:for(;0<bn;){var pn=bn-1>>>1,kn=an[pn];if(0<ct(kn,un))an[pn]=un,an[bn]=kn,bn=pn;else break e}}function et(an){return an.length===0?null:an[0]}function ot(an){if(an.length===0)return null;var un=an[0],bn=an.pop();if(bn!==un){an[0]=bn;e:for(var pn=0,kn=an.length,_n=kn>>>1;pn<_n;){var Rn=2*(pn+1)-1,Nn=an[Rn],Cn=Rn+1,Mn=an[Cn];if(0>ct(Nn,bn))Cn<kn&&0>ct(Mn,Nn)?(an[pn]=Mn,an[Cn]=bn,pn=Cn):(an[pn]=Nn,an[Rn]=bn,pn=Rn);else if(Cn<kn&&0>ct(Mn,bn))an[pn]=Mn,an[Cn]=bn,pn=Cn;else break e}}return un}function ct(an,un){var bn=an.sortIndex-un.sortIndex;return bn!==0?bn:an.id-un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ut=performance;it.unstable_now=function(){return ut.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,jt=null,Rt=3,Ft=!1,$t=!1,zt=!1,Kt=typeof setTimeout=="function"?setTimeout:null,Bt=typeof clearTimeout=="function"?clearTimeout:null,Ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Jt(an){for(var un=et(kt);un!==null;){if(un.callback===null)ot(kt);else if(un.startTime<=an)ot(kt),un.sortIndex=un.expirationTime,g(St,un);else break;un=et(kt)}}function en(an){if(zt=!1,Jt(an),!$t)if(et(St)!==null)$t=!0,hn(tn);else{var un=et(kt);un!==null&&yn(en,un.startTime-an)}}function tn(an,un){$t=!1,zt&&(zt=!1,Bt(on),on=-1),Ft=!0;var bn=Rt;try{for(Jt(un),jt=et(St);jt!==null&&(!(jt.expirationTime>un)||an&&!fn());){var pn=jt.callback;if(typeof pn=="function"){jt.callback=null,Rt=jt.priorityLevel;var kn=pn(jt.expirationTime<=un);un=it.unstable_now(),typeof kn=="function"?jt.callback=kn:jt===et(St)&&ot(St),Jt(un)}else ot(St);jt=et(St)}if(jt!==null)var _n=!0;else{var Rn=et(kt);Rn!==null&&yn(en,Rn.startTime-un),_n=!1}return _n}finally{jt=null,Rt=bn,Ft=!1}}var nn=!1,rn=null,on=-1,dn=5,cn=-1;function fn(){return!(it.unstable_now()-cn<dn)}function mn(){if(rn!==null){var an=it.unstable_now();cn=an;var un=!0;try{un=rn(!0,an)}finally{un?En():(nn=!1,rn=null)}}else nn=!1}var En;if(typeof Ut=="function")En=function(){Ut(mn)};else if(typeof MessageChannel<"u"){var Sn=new MessageChannel,wn=Sn.port2;Sn.port1.onmessage=mn,En=function(){wn.postMessage(null)}}else En=function(){Kt(mn,0)};function hn(an){rn=an,nn||(nn=!0,En())}function yn(an,un){on=Kt(function(){an(it.unstable_now())},un)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(an){an.callback=null},it.unstable_continueExecution=function(){$t||Ft||($t=!0,hn(tn))},it.unstable_forceFrameRate=function(an){0>an||125<an?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dn=0<an?Math.floor(1e3/an):5},it.unstable_getCurrentPriorityLevel=function(){return Rt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(an){switch(Rt){case 1:case 2:case 3:var un=3;break;default:un=Rt}var bn=Rt;Rt=un;try{return an()}finally{Rt=bn}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(an,un){switch(an){case 1:case 2:case 3:case 4:case 5:break;default:an=3}var bn=Rt;Rt=an;try{return un()}finally{Rt=bn}},it.unstable_scheduleCallback=function(an,un,bn){var pn=it.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?pn+bn:pn):bn=pn,an){case 1:var kn=-1;break;case 2:kn=250;break;case 5:kn=1073741823;break;case 4:kn=1e4;break;default:kn=5e3}return kn=bn+kn,an={id:Tt++,callback:un,priorityLevel:an,startTime:bn,expirationTime:kn,sortIndex:-1},bn>pn?(an.sortIndex=bn,g(kt,an),et(St)===null&&an===et(kt)&&(zt?(Bt(on),on=-1):zt=!0,yn(en,bn-pn))):(an.sortIndex=kn,g(St,an),$t||Ft||($t=!0,hn(tn))),an},it.unstable_shouldYield=fn,it.unstable_wrapCallback=function(an){var un=Rt;return function(){var bn=Rt;Rt=un;try{return an.apply(this,arguments)}finally{Rt=bn}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function it(g){var et={},ot=reactExports,ct=requireScheduler(),ut=Object.assign;function dt(Yt){for(var Zt="https://reactjs.org/docs/error-decoder.html?invariant="+Yt,sn=1;sn<arguments.length;sn++)Zt+="&args[]="+encodeURIComponent(arguments[sn]);return"Minified React error #"+Yt+"; visit "+Zt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ft=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,St=Symbol.for("react.element"),kt=Symbol.for("react.portal"),Tt=Symbol.for("react.fragment"),jt=Symbol.for("react.strict_mode"),Rt=Symbol.for("react.profiler"),Ft=Symbol.for("react.provider"),$t=Symbol.for("react.context"),zt=Symbol.for("react.forward_ref"),Kt=Symbol.for("react.suspense"),Bt=Symbol.for("react.suspense_list"),Ut=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),en=Symbol.for("react.offscreen"),tn=Symbol.iterator;function nn(Yt){return Yt===null||typeof Yt!="object"?null:(Yt=tn&&Yt[tn]||Yt["@@iterator"],typeof Yt=="function"?Yt:null)}function rn(Yt){if(Yt==null)return null;if(typeof Yt=="function")return Yt.displayName||Yt.name||null;if(typeof Yt=="string")return Yt;switch(Yt){case Tt:return"Fragment";case kt:return"Portal";case Rt:return"Profiler";case jt:return"StrictMode";case Kt:return"Suspense";case Bt:return"SuspenseList"}if(typeof Yt=="object")switch(Yt.$$typeof){case $t:return(Yt.displayName||"Context")+".Consumer";case Ft:return(Yt._context.displayName||"Context")+".Provider";case zt:var Zt=Yt.render;return Yt=Yt.displayName,Yt||(Yt=Zt.displayName||Zt.name||"",Yt=Yt!==""?"ForwardRef("+Yt+")":"ForwardRef"),Yt;case Ut:return Zt=Yt.displayName||null,Zt!==null?Zt:rn(Yt.type)||"Memo";case Jt:Zt=Yt._payload,Yt=Yt._init;try{return rn(Yt(Zt))}catch{}}return null}function on(Yt){var Zt=Yt.type;switch(Yt.tag){case 24:return"Cache";case 9:return(Zt.displayName||"Context")+".Consumer";case 10:return(Zt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Yt=Zt.render,Yt=Yt.displayName||Yt.name||"",Zt.displayName||(Yt!==""?"ForwardRef("+Yt+")":"ForwardRef");case 7:return"Fragment";case 5:return Zt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rn(Zt);case 8:return Zt===jt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof Zt=="function")return Zt.displayName||Zt.name||null;if(typeof Zt=="string")return Zt}return null}function dn(Yt){var Zt=Yt,sn=Yt;if(Yt.alternate)for(;Zt.return;)Zt=Zt.return;else{Yt=Zt;do Zt=Yt,Zt.flags&4098&&(sn=Zt.return),Yt=Zt.return;while(Yt)}return Zt.tag===3?sn:null}function cn(Yt){if(dn(Yt)!==Yt)throw Error(dt(188))}function fn(Yt){var Zt=Yt.alternate;if(!Zt){if(Zt=dn(Yt),Zt===null)throw Error(dt(188));return Zt!==Yt?null:Yt}for(var sn=Yt,ln=Zt;;){var gn=sn.return;if(gn===null)break;var Tn=gn.alternate;if(Tn===null){if(ln=gn.return,ln!==null){sn=ln;continue}break}if(gn.child===Tn.child){for(Tn=gn.child;Tn;){if(Tn===sn)return cn(gn),Yt;if(Tn===ln)return cn(gn),Zt;Tn=Tn.sibling}throw Error(dt(188))}if(sn.return!==ln.return)sn=gn,ln=Tn;else{for(var Pn=!1,Dn=gn.child;Dn;){if(Dn===sn){Pn=!0,sn=gn,ln=Tn;break}if(Dn===ln){Pn=!0,ln=gn,sn=Tn;break}Dn=Dn.sibling}if(!Pn){for(Dn=Tn.child;Dn;){if(Dn===sn){Pn=!0,sn=Tn,ln=gn;break}if(Dn===ln){Pn=!0,ln=Tn,sn=gn;break}Dn=Dn.sibling}if(!Pn)throw Error(dt(189))}}if(sn.alternate!==ln)throw Error(dt(190))}if(sn.tag!==3)throw Error(dt(188));return sn.stateNode.current===sn?Yt:Zt}function mn(Yt){return Yt=fn(Yt),Yt!==null?En(Yt):null}function En(Yt){if(Yt.tag===5||Yt.tag===6)return Yt;for(Yt=Yt.child;Yt!==null;){var Zt=En(Yt);if(Zt!==null)return Zt;Yt=Yt.sibling}return null}function Sn(Yt){if(Yt.tag===5||Yt.tag===6)return Yt;for(Yt=Yt.child;Yt!==null;){if(Yt.tag!==4){var Zt=Sn(Yt);if(Zt!==null)return Zt}Yt=Yt.sibling}return null}var wn=Array.isArray,hn=g.getPublicInstance,yn=g.getRootHostContext,an=g.getChildHostContext,un=g.prepareForCommit,bn=g.resetAfterCommit,pn=g.createInstance,kn=g.appendInitialChild,_n=g.finalizeInitialChildren,Rn=g.prepareUpdate,Nn=g.shouldSetTextContent,Cn=g.createTextInstance,Mn=g.scheduleTimeout,In=g.cancelTimeout,On=g.noTimeout,jn=g.isPrimaryRenderer,Gn=g.supportsMutation,Jn=g.supportsPersistence,Un=g.supportsHydration,Hn=g.getInstanceFromNode,ir=g.preparePortalMount,ur=g.getCurrentEventPriority,yr=g.detachDeletedInstance,Bn=g.supportsMicrotasks,zn=g.scheduleMicrotask,Kn=g.supportsTestSelectors,Yn=g.findFiberRoot,Wn=g.getBoundingRect,lr=g.getTextContent,or=g.isHiddenSubtree,cr=g.matchAccessibilityRole,Cr=g.setFocusIfFocusable,Rr=g.setupIntersectionObserver,br=g.appendChild,Ts=g.appendChildToContainer,Tr=g.commitTextUpdate,Wl=g.commitMount,S4=g.commitUpdate,w4=g.insertBefore,k4=g.insertInContainerBefore,T4=g.removeChild,A4=g.removeChildFromContainer,KC=g.resetTextContent,_4=g.hideInstance,C4=g.hideTextInstance,R4=g.unhideInstance,P4=g.unhideTextInstance,N4=g.clearContainer,M4=g.cloneInstance,YC=g.createContainerChildSet,XC=g.appendChildToContainerChildSet,O4=g.finalizeContainerChildren,SA=g.replaceContainerChildren,JC=g.cloneHiddenInstance,QC=g.cloneHiddenTextInstance,I4=g.canHydrateInstance,D4=g.canHydrateTextInstance,L4=g.canHydrateSuspenseInstance,ZC=g.isSuspenseInstancePending,wA=g.isSuspenseInstanceFallback,j4=g.getSuspenseInstanceFallbackErrorDetails,F4=g.registerSuspenseInstanceRetry,o2=g.getNextHydratableSibling,$4=g.getFirstHydratableChild,B4=g.getFirstHydratableChildWithinContainer,V4=g.getFirstHydratableChildWithinSuspenseInstance,z4=g.hydrateInstance,H4=g.hydrateTextInstance,U4=g.hydrateSuspenseInstance,G4=g.getNextHydratableInstanceAfterSuspenseInstance,W4=g.commitHydratedContainer,q4=g.commitHydratedSuspenseInstance,K4=g.clearSuspenseBoundary,Y4=g.clearSuspenseBoundaryFromContainer,X4=g.shouldDeleteUnhydratedTailInstances,J4=g.didNotMatchHydratedContainerTextInstance,Q4=g.didNotMatchHydratedTextInstance,kA;function Gv(Yt){if(kA===void 0)try{throw Error()}catch(sn){var Zt=sn.stack.trim().match(/\n( *(at )?)/);kA=Zt&&Zt[1]||""}return`
`+kA+Yt}var TA=!1;function AA(Yt,Zt){if(!Yt||TA)return"";TA=!0;var sn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(Zt)if(Zt=function(){throw Error()},Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(Xn){var ln=Xn}Reflect.construct(Yt,[],Zt)}else{try{Zt.call()}catch(Xn){ln=Xn}Yt.call(Zt.prototype)}else{try{throw Error()}catch(Xn){ln=Xn}Yt()}}catch(Xn){if(Xn&&ln&&typeof Xn.stack=="string"){for(var gn=Xn.stack.split(`
`),Tn=ln.stack.split(`
`),Pn=gn.length-1,Dn=Tn.length-1;1<=Pn&&0<=Dn&&gn[Pn]!==Tn[Dn];)Dn--;for(;1<=Pn&&0<=Dn;Pn--,Dn--)if(gn[Pn]!==Tn[Dn]){if(Pn!==1||Dn!==1)do if(Pn--,Dn--,0>Dn||gn[Pn]!==Tn[Dn]){var $n=`
`+gn[Pn].replace(" at new "," at ");return Yt.displayName&&$n.includes("<anonymous>")&&($n=$n.replace("<anonymous>",Yt.displayName)),$n}while(1<=Pn&&0<=Dn);break}}}finally{TA=!1,Error.prepareStackTrace=sn}return(Yt=Yt?Yt.displayName||Yt.name:"")?Gv(Yt):""}var Z4=Object.prototype.hasOwnProperty,_A=[],Ey=-1;function xp(Yt){return{current:Yt}}function Br(Yt){0>Ey||(Yt.current=_A[Ey],_A[Ey]=null,Ey--)}function jr(Yt,Zt){Ey++,_A[Ey]=Yt.current,Yt.current=Zt}var bp={},Is=xp(bp),Qs=xp(!1),Mm=bp;function Sy(Yt,Zt){var sn=Yt.type.contextTypes;if(!sn)return bp;var ln=Yt.stateNode;if(ln&&ln.__reactInternalMemoizedUnmaskedChildContext===Zt)return ln.__reactInternalMemoizedMaskedChildContext;var gn={},Tn;for(Tn in sn)gn[Tn]=Zt[Tn];return ln&&(Yt=Yt.stateNode,Yt.__reactInternalMemoizedUnmaskedChildContext=Zt,Yt.__reactInternalMemoizedMaskedChildContext=gn),gn}function Zs(Yt){return Yt=Yt.childContextTypes,Yt!=null}function a2(){Br(Qs),Br(Is)}function eR(Yt,Zt,sn){if(Is.current!==bp)throw Error(dt(168));jr(Is,Zt),jr(Qs,sn)}function tR(Yt,Zt,sn){var ln=Yt.stateNode;if(Zt=Zt.childContextTypes,typeof ln.getChildContext!="function")return sn;ln=ln.getChildContext();for(var gn in ln)if(!(gn in Zt))throw Error(dt(108,on(Yt)||"Unknown",gn));return ut({},sn,ln)}function l2(Yt){return Yt=(Yt=Yt.stateNode)&&Yt.__reactInternalMemoizedMergedChildContext||bp,Mm=Is.current,jr(Is,Yt),jr(Qs,Qs.current),!0}function nR(Yt,Zt,sn){var ln=Yt.stateNode;if(!ln)throw Error(dt(169));sn?(Yt=tR(Yt,Zt,Mm),ln.__reactInternalMemoizedMergedChildContext=Yt,Br(Qs),Br(Is),jr(Is,Yt)):Br(Qs),jr(Qs,sn)}var El=Math.clz32?Math.clz32:nN,eN=Math.log,tN=Math.LN2;function nN(Yt){return Yt>>>=0,Yt===0?32:31-(eN(Yt)/tN|0)|0}var c2=64,u2=4194304;function Wv(Yt){switch(Yt&-Yt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Yt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Yt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Yt}}function h2(Yt,Zt){var sn=Yt.pendingLanes;if(sn===0)return 0;var ln=0,gn=Yt.suspendedLanes,Tn=Yt.pingedLanes,Pn=sn&268435455;if(Pn!==0){var Dn=Pn&~gn;Dn!==0?ln=Wv(Dn):(Tn&=Pn,Tn!==0&&(ln=Wv(Tn)))}else Pn=sn&~gn,Pn!==0?ln=Wv(Pn):Tn!==0&&(ln=Wv(Tn));if(ln===0)return 0;if(Zt!==0&&Zt!==ln&&!(Zt&gn)&&(gn=ln&-ln,Tn=Zt&-Zt,gn>=Tn||gn===16&&(Tn&4194240)!==0))return Zt;if(ln&4&&(ln|=sn&16),Zt=Yt.entangledLanes,Zt!==0)for(Yt=Yt.entanglements,Zt&=ln;0<Zt;)sn=31-El(Zt),gn=1<<sn,ln|=Yt[sn],Zt&=~gn;return ln}function rN(Yt,Zt){switch(Yt){case 1:case 2:case 4:return Zt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Zt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iN(Yt,Zt){for(var sn=Yt.suspendedLanes,ln=Yt.pingedLanes,gn=Yt.expirationTimes,Tn=Yt.pendingLanes;0<Tn;){var Pn=31-El(Tn),Dn=1<<Pn,$n=gn[Pn];$n===-1?(!(Dn&sn)||Dn&ln)&&(gn[Pn]=rN(Dn,Zt)):$n<=Zt&&(Yt.expiredLanes|=Dn),Tn&=~Dn}}function CA(Yt){return Yt=Yt.pendingLanes&-1073741825,Yt!==0?Yt:Yt&1073741824?1073741824:0}function rR(){var Yt=c2;return c2<<=1,!(c2&4194240)&&(c2=64),Yt}function RA(Yt){for(var Zt=[],sn=0;31>sn;sn++)Zt.push(Yt);return Zt}function qv(Yt,Zt,sn){Yt.pendingLanes|=Zt,Zt!==536870912&&(Yt.suspendedLanes=0,Yt.pingedLanes=0),Yt=Yt.eventTimes,Zt=31-El(Zt),Yt[Zt]=sn}function sN(Yt,Zt){var sn=Yt.pendingLanes&~Zt;Yt.pendingLanes=Zt,Yt.suspendedLanes=0,Yt.pingedLanes=0,Yt.expiredLanes&=Zt,Yt.mutableReadLanes&=Zt,Yt.entangledLanes&=Zt,Zt=Yt.entanglements;var ln=Yt.eventTimes;for(Yt=Yt.expirationTimes;0<sn;){var gn=31-El(sn),Tn=1<<gn;Zt[gn]=0,ln[gn]=-1,Yt[gn]=-1,sn&=~Tn}}function PA(Yt,Zt){var sn=Yt.entangledLanes|=Zt;for(Yt=Yt.entanglements;sn;){var ln=31-El(sn),gn=1<<ln;gn&Zt|Yt[ln]&Zt&&(Yt[ln]|=Zt),sn&=~gn}}var Sr=0;function iR(Yt){return Yt&=-Yt,1<Yt?4<Yt?Yt&268435455?16:536870912:4:1}var NA=ct.unstable_scheduleCallback,sR=ct.unstable_cancelCallback,oN=ct.unstable_shouldYield,aN=ct.unstable_requestPaint,fs=ct.unstable_now,MA=ct.unstable_ImmediatePriority,lN=ct.unstable_UserBlockingPriority,OA=ct.unstable_NormalPriority,cN=ct.unstable_IdlePriority,d2=null,Kl=null;function uN(Yt){if(Kl&&typeof Kl.onCommitFiberRoot=="function")try{Kl.onCommitFiberRoot(d2,Yt,void 0,(Yt.current.flags&128)===128)}catch{}}function hN(Yt,Zt){return Yt===Zt&&(Yt!==0||1/Yt===1/Zt)||Yt!==Yt&&Zt!==Zt}var Sl=typeof Object.is=="function"?Object.is:hN,Au=null,f2=!1,IA=!1;function oR(Yt){Au===null?Au=[Yt]:Au.push(Yt)}function dN(Yt){f2=!0,oR(Yt)}function Yl(){if(!IA&&Au!==null){IA=!0;var Yt=0,Zt=Sr;try{var sn=Au;for(Sr=1;Yt<sn.length;Yt++){var ln=sn[Yt];do ln=ln(!0);while(ln!==null)}Au=null,f2=!1}catch(gn){throw Au!==null&&(Au=Au.slice(Yt+1)),NA(MA,Yl),gn}finally{Sr=Zt,IA=!1}}return null}var wy=[],ky=0,p2=null,m2=0,Vo=[],zo=0,Om=null,_u=1,Cu="";function Im(Yt,Zt){wy[ky++]=m2,wy[ky++]=p2,p2=Yt,m2=Zt}function aR(Yt,Zt,sn){Vo[zo++]=_u,Vo[zo++]=Cu,Vo[zo++]=Om,Om=Yt;var ln=_u;Yt=Cu;var gn=32-El(ln)-1;ln&=~(1<<gn),sn+=1;var Tn=32-El(Zt)+gn;if(30<Tn){var Pn=gn-gn%5;Tn=(ln&(1<<Pn)-1).toString(32),ln>>=Pn,gn-=Pn,_u=1<<32-El(Zt)+gn|sn<<gn|ln,Cu=Tn+Yt}else _u=1<<Tn|sn<<gn|ln,Cu=Yt}function DA(Yt){Yt.return!==null&&(Im(Yt,1),aR(Yt,1,0))}function LA(Yt){for(;Yt===p2;)p2=wy[--ky],wy[ky]=null,m2=wy[--ky],wy[ky]=null;for(;Yt===Om;)Om=Vo[--zo],Vo[zo]=null,Cu=Vo[--zo],Vo[zo]=null,_u=Vo[--zo],Vo[zo]=null}var xo=null,Ho=null,zr=!1,Kv=!1,wl=null;function lR(Yt,Zt){var sn=Ko(5,null,null,0);sn.elementType="DELETED",sn.stateNode=Zt,sn.return=Yt,Zt=Yt.deletions,Zt===null?(Yt.deletions=[sn],Yt.flags|=16):Zt.push(sn)}function cR(Yt,Zt){switch(Yt.tag){case 5:return Zt=I4(Zt,Yt.type,Yt.pendingProps),Zt!==null?(Yt.stateNode=Zt,xo=Yt,Ho=$4(Zt),!0):!1;case 6:return Zt=D4(Zt,Yt.pendingProps),Zt!==null?(Yt.stateNode=Zt,xo=Yt,Ho=null,!0):!1;case 13:if(Zt=L4(Zt),Zt!==null){var sn=Om!==null?{id:_u,overflow:Cu}:null;return Yt.memoizedState={dehydrated:Zt,treeContext:sn,retryLane:1073741824},sn=Ko(18,null,null,0),sn.stateNode=Zt,sn.return=Yt,Yt.child=sn,xo=Yt,Ho=null,!0}return!1;default:return!1}}function jA(Yt){return(Yt.mode&1)!==0&&(Yt.flags&128)===0}function FA(Yt){if(zr){var Zt=Ho;if(Zt){var sn=Zt;if(!cR(Yt,Zt)){if(jA(Yt))throw Error(dt(418));Zt=o2(sn);var ln=xo;Zt&&cR(Yt,Zt)?lR(ln,sn):(Yt.flags=Yt.flags&-4097|2,zr=!1,xo=Yt)}}else{if(jA(Yt))throw Error(dt(418));Yt.flags=Yt.flags&-4097|2,zr=!1,xo=Yt}}}function uR(Yt){for(Yt=Yt.return;Yt!==null&&Yt.tag!==5&&Yt.tag!==3&&Yt.tag!==13;)Yt=Yt.return;xo=Yt}function g2(Yt){if(!Un||Yt!==xo)return!1;if(!zr)return uR(Yt),zr=!0,!1;if(Yt.tag!==3&&(Yt.tag!==5||X4(Yt.type)&&!Nn(Yt.type,Yt.memoizedProps))){var Zt=Ho;if(Zt){if(jA(Yt))throw hR(),Error(dt(418));for(;Zt;)lR(Yt,Zt),Zt=o2(Zt)}}if(uR(Yt),Yt.tag===13){if(!Un)throw Error(dt(316));if(Yt=Yt.memoizedState,Yt=Yt!==null?Yt.dehydrated:null,!Yt)throw Error(dt(317));Ho=G4(Yt)}else Ho=xo?o2(Yt.stateNode):null;return!0}function hR(){for(var Yt=Ho;Yt;)Yt=o2(Yt)}function Ty(){Un&&(Ho=xo=null,Kv=zr=!1)}function $A(Yt){wl===null?wl=[Yt]:wl.push(Yt)}var fN=ft.ReactCurrentBatchConfig;function y2(Yt,Zt){if(Sl(Yt,Zt))return!0;if(typeof Yt!="object"||Yt===null||typeof Zt!="object"||Zt===null)return!1;var sn=Object.keys(Yt),ln=Object.keys(Zt);if(sn.length!==ln.length)return!1;for(ln=0;ln<sn.length;ln++){var gn=sn[ln];if(!Z4.call(Zt,gn)||!Sl(Yt[gn],Zt[gn]))return!1}return!0}function pN(Yt){switch(Yt.tag){case 5:return Gv(Yt.type);case 16:return Gv("Lazy");case 13:return Gv("Suspense");case 19:return Gv("SuspenseList");case 0:case 2:case 15:return Yt=AA(Yt.type,!1),Yt;case 11:return Yt=AA(Yt.type.render,!1),Yt;case 1:return Yt=AA(Yt.type,!0),Yt;default:return""}}function Yv(Yt,Zt,sn){if(Yt=sn.ref,Yt!==null&&typeof Yt!="function"&&typeof Yt!="object"){if(sn._owner){if(sn=sn._owner,sn){if(sn.tag!==1)throw Error(dt(309));var ln=sn.stateNode}if(!ln)throw Error(dt(147,Yt));var gn=ln,Tn=""+Yt;return Zt!==null&&Zt.ref!==null&&typeof Zt.ref=="function"&&Zt.ref._stringRef===Tn?Zt.ref:(Zt=function(Pn){var Dn=gn.refs;Pn===null?delete Dn[Tn]:Dn[Tn]=Pn},Zt._stringRef=Tn,Zt)}if(typeof Yt!="string")throw Error(dt(284));if(!sn._owner)throw Error(dt(290,Yt))}return Yt}function v2(Yt,Zt){throw Yt=Object.prototype.toString.call(Zt),Error(dt(31,Yt==="[object Object]"?"object with keys {"+Object.keys(Zt).join(", ")+"}":Yt))}function dR(Yt){var Zt=Yt._init;return Zt(Yt._payload)}function fR(Yt){function Zt(Fn,Ln){if(Yt){var Vn=Fn.deletions;Vn===null?(Fn.deletions=[Ln],Fn.flags|=16):Vn.push(Ln)}}function sn(Fn,Ln){if(!Yt)return null;for(;Ln!==null;)Zt(Fn,Ln),Ln=Ln.sibling;return null}function ln(Fn,Ln){for(Fn=new Map;Ln!==null;)Ln.key!==null?Fn.set(Ln.key,Ln):Fn.set(Ln.index,Ln),Ln=Ln.sibling;return Fn}function gn(Fn,Ln){return Fn=_p(Fn,Ln),Fn.index=0,Fn.sibling=null,Fn}function Tn(Fn,Ln,Vn){return Fn.index=Vn,Yt?(Vn=Fn.alternate,Vn!==null?(Vn=Vn.index,Vn<Ln?(Fn.flags|=2,Ln):Vn):(Fn.flags|=2,Ln)):(Fn.flags|=1048576,Ln)}function Pn(Fn){return Yt&&Fn.alternate===null&&(Fn.flags|=2),Fn}function Dn(Fn,Ln,Vn,Zn){return Ln===null||Ln.tag!==6?(Ln=I_(Vn,Fn.mode,Zn),Ln.return=Fn,Ln):(Ln=gn(Ln,Vn),Ln.return=Fn,Ln)}function $n(Fn,Ln,Vn,Zn){var ar=Vn.type;return ar===Tt?rr(Fn,Ln,Vn.props.children,Zn,Vn.key):Ln!==null&&(Ln.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Jt&&dR(ar)===Ln.type)?(Zn=gn(Ln,Vn.props),Zn.ref=Yv(Fn,Ln,Vn),Zn.return=Fn,Zn):(Zn=Y2(Vn.type,Vn.key,Vn.props,null,Fn.mode,Zn),Zn.ref=Yv(Fn,Ln,Vn),Zn.return=Fn,Zn)}function Xn(Fn,Ln,Vn,Zn){return Ln===null||Ln.tag!==4||Ln.stateNode.containerInfo!==Vn.containerInfo||Ln.stateNode.implementation!==Vn.implementation?(Ln=D_(Vn,Fn.mode,Zn),Ln.return=Fn,Ln):(Ln=gn(Ln,Vn.children||[]),Ln.return=Fn,Ln)}function rr(Fn,Ln,Vn,Zn,ar){return Ln===null||Ln.tag!==7?(Ln=Vm(Vn,Fn.mode,Zn,ar),Ln.return=Fn,Ln):(Ln=gn(Ln,Vn),Ln.return=Fn,Ln)}function hr(Fn,Ln,Vn){if(typeof Ln=="string"&&Ln!==""||typeof Ln=="number")return Ln=I_(""+Ln,Fn.mode,Vn),Ln.return=Fn,Ln;if(typeof Ln=="object"&&Ln!==null){switch(Ln.$$typeof){case St:return Vn=Y2(Ln.type,Ln.key,Ln.props,null,Fn.mode,Vn),Vn.ref=Yv(Fn,null,Ln),Vn.return=Fn,Vn;case kt:return Ln=D_(Ln,Fn.mode,Vn),Ln.return=Fn,Ln;case Jt:var Zn=Ln._init;return hr(Fn,Zn(Ln._payload),Vn)}if(wn(Ln)||nn(Ln))return Ln=Vm(Ln,Fn.mode,Vn,null),Ln.return=Fn,Ln;v2(Fn,Ln)}return null}function Qn(Fn,Ln,Vn,Zn){var ar=Ln!==null?Ln.key:null;if(typeof Vn=="string"&&Vn!==""||typeof Vn=="number")return ar!==null?null:Dn(Fn,Ln,""+Vn,Zn);if(typeof Vn=="object"&&Vn!==null){switch(Vn.$$typeof){case St:return Vn.key===ar?$n(Fn,Ln,Vn,Zn):null;case kt:return Vn.key===ar?Xn(Fn,Ln,Vn,Zn):null;case Jt:return ar=Vn._init,Qn(Fn,Ln,ar(Vn._payload),Zn)}if(wn(Vn)||nn(Vn))return ar!==null?null:rr(Fn,Ln,Vn,Zn,null);v2(Fn,Vn)}return null}function Vr(Fn,Ln,Vn,Zn,ar){if(typeof Zn=="string"&&Zn!==""||typeof Zn=="number")return Fn=Fn.get(Vn)||null,Dn(Ln,Fn,""+Zn,ar);if(typeof Zn=="object"&&Zn!==null){switch(Zn.$$typeof){case St:return Fn=Fn.get(Zn.key===null?Vn:Zn.key)||null,$n(Ln,Fn,Zn,ar);case kt:return Fn=Fn.get(Zn.key===null?Vn:Zn.key)||null,Xn(Ln,Fn,Zn,ar);case Jt:var gr=Zn._init;return Vr(Fn,Ln,Vn,gr(Zn._payload),ar)}if(wn(Zn)||nn(Zn))return Fn=Fn.get(Vn)||null,rr(Ln,Fn,Zn,ar,null);v2(Ln,Zn)}return null}function Ir(Fn,Ln,Vn,Zn){for(var ar=null,gr=null,dr=Ln,wr=Ln=0,gs=null;dr!==null&&wr<Vn.length;wr++){dr.index>wr?(gs=dr,dr=null):gs=dr.sibling;var kr=Qn(Fn,dr,Vn[wr],Zn);if(kr===null){dr===null&&(dr=gs);break}Yt&&dr&&kr.alternate===null&&Zt(Fn,dr),Ln=Tn(kr,Ln,wr),gr===null?ar=kr:gr.sibling=kr,gr=kr,dr=gs}if(wr===Vn.length)return sn(Fn,dr),zr&&Im(Fn,wr),ar;if(dr===null){for(;wr<Vn.length;wr++)dr=hr(Fn,Vn[wr],Zn),dr!==null&&(Ln=Tn(dr,Ln,wr),gr===null?ar=dr:gr.sibling=dr,gr=dr);return zr&&Im(Fn,wr),ar}for(dr=ln(Fn,dr);wr<Vn.length;wr++)gs=Vr(dr,Fn,wr,Vn[wr],Zn),gs!==null&&(Yt&&gs.alternate!==null&&dr.delete(gs.key===null?wr:gs.key),Ln=Tn(gs,Ln,wr),gr===null?ar=gs:gr.sibling=gs,gr=gs);return Yt&&dr.forEach(function(Cp){return Zt(Fn,Cp)}),zr&&Im(Fn,wr),ar}function co(Fn,Ln,Vn,Zn){var ar=nn(Vn);if(typeof ar!="function")throw Error(dt(150));if(Vn=ar.call(Vn),Vn==null)throw Error(dt(151));for(var gr=ar=null,dr=Ln,wr=Ln=0,gs=null,kr=Vn.next();dr!==null&&!kr.done;wr++,kr=Vn.next()){dr.index>wr?(gs=dr,dr=null):gs=dr.sibling;var Cp=Qn(Fn,dr,kr.value,Zn);if(Cp===null){dr===null&&(dr=gs);break}Yt&&dr&&Cp.alternate===null&&Zt(Fn,dr),Ln=Tn(Cp,Ln,wr),gr===null?ar=Cp:gr.sibling=Cp,gr=Cp,dr=gs}if(kr.done)return sn(Fn,dr),zr&&Im(Fn,wr),ar;if(dr===null){for(;!kr.done;wr++,kr=Vn.next())kr=hr(Fn,kr.value,Zn),kr!==null&&(Ln=Tn(kr,Ln,wr),gr===null?ar=kr:gr.sibling=kr,gr=kr);return zr&&Im(Fn,wr),ar}for(dr=ln(Fn,dr);!kr.done;wr++,kr=Vn.next())kr=Vr(dr,Fn,wr,kr.value,Zn),kr!==null&&(Yt&&kr.alternate!==null&&dr.delete(kr.key===null?wr:kr.key),Ln=Tn(kr,Ln,wr),gr===null?ar=kr:gr.sibling=kr,gr=kr);return Yt&&dr.forEach(function(UN){return Zt(Fn,UN)}),zr&&Im(Fn,wr),ar}function Mu(Fn,Ln,Vn,Zn){if(typeof Vn=="object"&&Vn!==null&&Vn.type===Tt&&Vn.key===null&&(Vn=Vn.props.children),typeof Vn=="object"&&Vn!==null){switch(Vn.$$typeof){case St:e:{for(var ar=Vn.key,gr=Ln;gr!==null;){if(gr.key===ar){if(ar=Vn.type,ar===Tt){if(gr.tag===7){sn(Fn,gr.sibling),Ln=gn(gr,Vn.props.children),Ln.return=Fn,Fn=Ln;break e}}else if(gr.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Jt&&dR(ar)===gr.type){sn(Fn,gr.sibling),Ln=gn(gr,Vn.props),Ln.ref=Yv(Fn,gr,Vn),Ln.return=Fn,Fn=Ln;break e}sn(Fn,gr);break}else Zt(Fn,gr);gr=gr.sibling}Vn.type===Tt?(Ln=Vm(Vn.props.children,Fn.mode,Zn,Vn.key),Ln.return=Fn,Fn=Ln):(Zn=Y2(Vn.type,Vn.key,Vn.props,null,Fn.mode,Zn),Zn.ref=Yv(Fn,Ln,Vn),Zn.return=Fn,Fn=Zn)}return Pn(Fn);case kt:e:{for(gr=Vn.key;Ln!==null;){if(Ln.key===gr)if(Ln.tag===4&&Ln.stateNode.containerInfo===Vn.containerInfo&&Ln.stateNode.implementation===Vn.implementation){sn(Fn,Ln.sibling),Ln=gn(Ln,Vn.children||[]),Ln.return=Fn,Fn=Ln;break e}else{sn(Fn,Ln);break}else Zt(Fn,Ln);Ln=Ln.sibling}Ln=D_(Vn,Fn.mode,Zn),Ln.return=Fn,Fn=Ln}return Pn(Fn);case Jt:return gr=Vn._init,Mu(Fn,Ln,gr(Vn._payload),Zn)}if(wn(Vn))return Ir(Fn,Ln,Vn,Zn);if(nn(Vn))return co(Fn,Ln,Vn,Zn);v2(Fn,Vn)}return typeof Vn=="string"&&Vn!==""||typeof Vn=="number"?(Vn=""+Vn,Ln!==null&&Ln.tag===6?(sn(Fn,Ln.sibling),Ln=gn(Ln,Vn),Ln.return=Fn,Fn=Ln):(sn(Fn,Ln),Ln=I_(Vn,Fn.mode,Zn),Ln.return=Fn,Fn=Ln),Pn(Fn)):sn(Fn,Ln)}return Mu}var Ay=fR(!0),pR=fR(!1),x2=xp(null),b2=null,_y=null,BA=null;function VA(){BA=_y=b2=null}function mR(Yt,Zt,sn){jn?(jr(x2,Zt._currentValue),Zt._currentValue=sn):(jr(x2,Zt._currentValue2),Zt._currentValue2=sn)}function zA(Yt){var Zt=x2.current;Br(x2),jn?Yt._currentValue=Zt:Yt._currentValue2=Zt}function HA(Yt,Zt,sn){for(;Yt!==null;){var ln=Yt.alternate;if((Yt.childLanes&Zt)!==Zt?(Yt.childLanes|=Zt,ln!==null&&(ln.childLanes|=Zt)):ln!==null&&(ln.childLanes&Zt)!==Zt&&(ln.childLanes|=Zt),Yt===sn)break;Yt=Yt.return}}function Cy(Yt,Zt){b2=Yt,BA=_y=null,Yt=Yt.dependencies,Yt!==null&&Yt.firstContext!==null&&(Yt.lanes&Zt&&(eo=!0),Yt.firstContext=null)}function Uo(Yt){var Zt=jn?Yt._currentValue:Yt._currentValue2;if(BA!==Yt)if(Yt={context:Yt,memoizedValue:Zt,next:null},_y===null){if(b2===null)throw Error(dt(308));_y=Yt,b2.dependencies={lanes:0,firstContext:Yt}}else _y=_y.next=Yt;return Zt}var Dm=null;function UA(Yt){Dm===null?Dm=[Yt]:Dm.push(Yt)}function gR(Yt,Zt,sn,ln){var gn=Zt.interleaved;return gn===null?(sn.next=sn,UA(Zt)):(sn.next=gn.next,gn.next=sn),Zt.interleaved=sn,Xl(Yt,ln)}function Xl(Yt,Zt){Yt.lanes|=Zt;var sn=Yt.alternate;for(sn!==null&&(sn.lanes|=Zt),sn=Yt,Yt=Yt.return;Yt!==null;)Yt.childLanes|=Zt,sn=Yt.alternate,sn!==null&&(sn.childLanes|=Zt),sn=Yt,Yt=Yt.return;return sn.tag===3?sn.stateNode:null}var Ep=!1;function GA(Yt){Yt.updateQueue={baseState:Yt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yR(Yt,Zt){Yt=Yt.updateQueue,Zt.updateQueue===Yt&&(Zt.updateQueue={baseState:Yt.baseState,firstBaseUpdate:Yt.firstBaseUpdate,lastBaseUpdate:Yt.lastBaseUpdate,shared:Yt.shared,effects:Yt.effects})}function Ru(Yt,Zt){return{eventTime:Yt,lane:Zt,tag:0,payload:null,callback:null,next:null}}function Sp(Yt,Zt,sn){var ln=Yt.updateQueue;if(ln===null)return null;if(ln=ln.shared,vr&2){var gn=ln.pending;return gn===null?Zt.next=Zt:(Zt.next=gn.next,gn.next=Zt),ln.pending=Zt,Xl(Yt,sn)}return gn=ln.interleaved,gn===null?(Zt.next=Zt,UA(ln)):(Zt.next=gn.next,gn.next=Zt),ln.interleaved=Zt,Xl(Yt,sn)}function E2(Yt,Zt,sn){if(Zt=Zt.updateQueue,Zt!==null&&(Zt=Zt.shared,(sn&4194240)!==0)){var ln=Zt.lanes;ln&=Yt.pendingLanes,sn|=ln,Zt.lanes=sn,PA(Yt,sn)}}function vR(Yt,Zt){var sn=Yt.updateQueue,ln=Yt.alternate;if(ln!==null&&(ln=ln.updateQueue,sn===ln)){var gn=null,Tn=null;if(sn=sn.firstBaseUpdate,sn!==null){do{var Pn={eventTime:sn.eventTime,lane:sn.lane,tag:sn.tag,payload:sn.payload,callback:sn.callback,next:null};Tn===null?gn=Tn=Pn:Tn=Tn.next=Pn,sn=sn.next}while(sn!==null);Tn===null?gn=Tn=Zt:Tn=Tn.next=Zt}else gn=Tn=Zt;sn={baseState:ln.baseState,firstBaseUpdate:gn,lastBaseUpdate:Tn,shared:ln.shared,effects:ln.effects},Yt.updateQueue=sn;return}Yt=sn.lastBaseUpdate,Yt===null?sn.firstBaseUpdate=Zt:Yt.next=Zt,sn.lastBaseUpdate=Zt}function S2(Yt,Zt,sn,ln){var gn=Yt.updateQueue;Ep=!1;var Tn=gn.firstBaseUpdate,Pn=gn.lastBaseUpdate,Dn=gn.shared.pending;if(Dn!==null){gn.shared.pending=null;var $n=Dn,Xn=$n.next;$n.next=null,Pn===null?Tn=Xn:Pn.next=Xn,Pn=$n;var rr=Yt.alternate;rr!==null&&(rr=rr.updateQueue,Dn=rr.lastBaseUpdate,Dn!==Pn&&(Dn===null?rr.firstBaseUpdate=Xn:Dn.next=Xn,rr.lastBaseUpdate=$n))}if(Tn!==null){var hr=gn.baseState;Pn=0,rr=Xn=$n=null,Dn=Tn;do{var Qn=Dn.lane,Vr=Dn.eventTime;if((ln&Qn)===Qn){rr!==null&&(rr=rr.next={eventTime:Vr,lane:0,tag:Dn.tag,payload:Dn.payload,callback:Dn.callback,next:null});e:{var Ir=Yt,co=Dn;switch(Qn=Zt,Vr=sn,co.tag){case 1:if(Ir=co.payload,typeof Ir=="function"){hr=Ir.call(Vr,hr,Qn);break e}hr=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=co.payload,Qn=typeof Ir=="function"?Ir.call(Vr,hr,Qn):Ir,Qn==null)break e;hr=ut({},hr,Qn);break e;case 2:Ep=!0}}Dn.callback!==null&&Dn.lane!==0&&(Yt.flags|=64,Qn=gn.effects,Qn===null?gn.effects=[Dn]:Qn.push(Dn))}else Vr={eventTime:Vr,lane:Qn,tag:Dn.tag,payload:Dn.payload,callback:Dn.callback,next:null},rr===null?(Xn=rr=Vr,$n=hr):rr=rr.next=Vr,Pn|=Qn;if(Dn=Dn.next,Dn===null){if(Dn=gn.shared.pending,Dn===null)break;Qn=Dn,Dn=Qn.next,Qn.next=null,gn.lastBaseUpdate=Qn,gn.shared.pending=null}}while(1);if(rr===null&&($n=hr),gn.baseState=$n,gn.firstBaseUpdate=Xn,gn.lastBaseUpdate=rr,Zt=gn.shared.interleaved,Zt!==null){gn=Zt;do Pn|=gn.lane,gn=gn.next;while(gn!==Zt)}else Tn===null&&(gn.shared.lanes=0);jm|=Pn,Yt.lanes=Pn,Yt.memoizedState=hr}}function xR(Yt,Zt,sn){if(Yt=Zt.effects,Zt.effects=null,Yt!==null)for(Zt=0;Zt<Yt.length;Zt++){var ln=Yt[Zt],gn=ln.callback;if(gn!==null){if(ln.callback=null,ln=sn,typeof gn!="function")throw Error(dt(191,gn));gn.call(ln)}}}var Xv={},Go=xp(Xv),Jv=xp(Xv),Ry=xp(Xv);function Jl(Yt){if(Yt===Xv)throw Error(dt(174));return Yt}function WA(Yt,Zt){jr(Ry,Zt),jr(Jv,Yt),jr(Go,Xv),Yt=yn(Zt),Br(Go),jr(Go,Yt)}function Py(){Br(Go),Br(Jv),Br(Ry)}function bR(Yt){var Zt=Jl(Ry.current),sn=Jl(Go.current);Zt=an(sn,Yt.type,Zt),sn!==Zt&&(jr(Jv,Yt),jr(Go,Zt))}function qA(Yt){Jv.current===Yt&&(Br(Go),Br(Jv))}var Kr=xp(0);function w2(Yt){for(var Zt=Yt;Zt!==null;){if(Zt.tag===13){var sn=Zt.memoizedState;if(sn!==null&&(sn=sn.dehydrated,sn===null||ZC(sn)||wA(sn)))return Zt}else if(Zt.tag===19&&Zt.memoizedProps.revealOrder!==void 0){if(Zt.flags&128)return Zt}else if(Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===Yt)break;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===Yt)return null;Zt=Zt.return}Zt.sibling.return=Zt.return,Zt=Zt.sibling}return null}var KA=[];function YA(){for(var Yt=0;Yt<KA.length;Yt++){var Zt=KA[Yt];jn?Zt._workInProgressVersionPrimary=null:Zt._workInProgressVersionSecondary=null}KA.length=0}var k2=ft.ReactCurrentDispatcher,XA=ft.ReactCurrentBatchConfig,Lm=0,Yr=null,as=null,ps=null,T2=!1,Qv=!1,Zv=0,mN=0;function Ds(){throw Error(dt(321))}function JA(Yt,Zt){if(Zt===null)return!1;for(var sn=0;sn<Zt.length&&sn<Yt.length;sn++)if(!Sl(Yt[sn],Zt[sn]))return!1;return!0}function QA(Yt,Zt,sn,ln,gn,Tn){if(Lm=Tn,Yr=Zt,Zt.memoizedState=null,Zt.updateQueue=null,Zt.lanes=0,k2.current=Yt===null||Yt.memoizedState===null?xN:bN,Yt=sn(ln,gn),Qv){Tn=0;do{if(Qv=!1,Zv=0,25<=Tn)throw Error(dt(301));Tn+=1,ps=as=null,Zt.updateQueue=null,k2.current=EN,Yt=sn(ln,gn)}while(Qv)}if(k2.current=C2,Zt=as!==null&&as.next!==null,Lm=0,ps=as=Yr=null,T2=!1,Zt)throw Error(dt(300));return Yt}function ZA(){var Yt=Zv!==0;return Zv=0,Yt}function Ql(){var Yt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?Yr.memoizedState=ps=Yt:ps=ps.next=Yt,ps}function Wo(){if(as===null){var Yt=Yr.alternate;Yt=Yt!==null?Yt.memoizedState:null}else Yt=as.next;var Zt=ps===null?Yr.memoizedState:ps.next;if(Zt!==null)ps=Zt,as=Yt;else{if(Yt===null)throw Error(dt(310));as=Yt,Yt={memoizedState:as.memoizedState,baseState:as.baseState,baseQueue:as.baseQueue,queue:as.queue,next:null},ps===null?Yr.memoizedState=ps=Yt:ps=ps.next=Yt}return ps}function ex(Yt,Zt){return typeof Zt=="function"?Zt(Yt):Zt}function e_(Yt){var Zt=Wo(),sn=Zt.queue;if(sn===null)throw Error(dt(311));sn.lastRenderedReducer=Yt;var ln=as,gn=ln.baseQueue,Tn=sn.pending;if(Tn!==null){if(gn!==null){var Pn=gn.next;gn.next=Tn.next,Tn.next=Pn}ln.baseQueue=gn=Tn,sn.pending=null}if(gn!==null){Tn=gn.next,ln=ln.baseState;var Dn=Pn=null,$n=null,Xn=Tn;do{var rr=Xn.lane;if((Lm&rr)===rr)$n!==null&&($n=$n.next={lane:0,action:Xn.action,hasEagerState:Xn.hasEagerState,eagerState:Xn.eagerState,next:null}),ln=Xn.hasEagerState?Xn.eagerState:Yt(ln,Xn.action);else{var hr={lane:rr,action:Xn.action,hasEagerState:Xn.hasEagerState,eagerState:Xn.eagerState,next:null};$n===null?(Dn=$n=hr,Pn=ln):$n=$n.next=hr,Yr.lanes|=rr,jm|=rr}Xn=Xn.next}while(Xn!==null&&Xn!==Tn);$n===null?Pn=ln:$n.next=Dn,Sl(ln,Zt.memoizedState)||(eo=!0),Zt.memoizedState=ln,Zt.baseState=Pn,Zt.baseQueue=$n,sn.lastRenderedState=ln}if(Yt=sn.interleaved,Yt!==null){gn=Yt;do Tn=gn.lane,Yr.lanes|=Tn,jm|=Tn,gn=gn.next;while(gn!==Yt)}else gn===null&&(sn.lanes=0);return[Zt.memoizedState,sn.dispatch]}function t_(Yt){var Zt=Wo(),sn=Zt.queue;if(sn===null)throw Error(dt(311));sn.lastRenderedReducer=Yt;var ln=sn.dispatch,gn=sn.pending,Tn=Zt.memoizedState;if(gn!==null){sn.pending=null;var Pn=gn=gn.next;do Tn=Yt(Tn,Pn.action),Pn=Pn.next;while(Pn!==gn);Sl(Tn,Zt.memoizedState)||(eo=!0),Zt.memoizedState=Tn,Zt.baseQueue===null&&(Zt.baseState=Tn),sn.lastRenderedState=Tn}return[Tn,ln]}function ER(){}function SR(Yt,Zt){var sn=Yr,ln=Wo(),gn=Zt(),Tn=!Sl(ln.memoizedState,gn);if(Tn&&(ln.memoizedState=gn,eo=!0),ln=ln.queue,n_(TR.bind(null,sn,ln,Yt),[Yt]),ln.getSnapshot!==Zt||Tn||ps!==null&&ps.memoizedState.tag&1){if(sn.flags|=2048,tx(9,kR.bind(null,sn,ln,gn,Zt),void 0,null),ms===null)throw Error(dt(349));Lm&30||wR(sn,Zt,gn)}return gn}function wR(Yt,Zt,sn){Yt.flags|=16384,Yt={getSnapshot:Zt,value:sn},Zt=Yr.updateQueue,Zt===null?(Zt={lastEffect:null,stores:null},Yr.updateQueue=Zt,Zt.stores=[Yt]):(sn=Zt.stores,sn===null?Zt.stores=[Yt]:sn.push(Yt))}function kR(Yt,Zt,sn,ln){Zt.value=sn,Zt.getSnapshot=ln,AR(Zt)&&_R(Yt)}function TR(Yt,Zt,sn){return sn(function(){AR(Zt)&&_R(Yt)})}function AR(Yt){var Zt=Yt.getSnapshot;Yt=Yt.value;try{var sn=Zt();return!Sl(Yt,sn)}catch{return!0}}function _R(Yt){var Zt=Xl(Yt,1);Zt!==null&&qo(Zt,Yt,1,-1)}function RR(Yt){var Zt=Ql();return typeof Yt=="function"&&(Yt=Yt()),Zt.memoizedState=Zt.baseState=Yt,Yt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ex,lastRenderedState:Yt},Zt.queue=Yt,Yt=Yt.dispatch=vN.bind(null,Yr,Yt),[Zt.memoizedState,Yt]}function tx(Yt,Zt,sn,ln){return Yt={tag:Yt,create:Zt,destroy:sn,deps:ln,next:null},Zt=Yr.updateQueue,Zt===null?(Zt={lastEffect:null,stores:null},Yr.updateQueue=Zt,Zt.lastEffect=Yt.next=Yt):(sn=Zt.lastEffect,sn===null?Zt.lastEffect=Yt.next=Yt:(ln=sn.next,sn.next=Yt,Yt.next=ln,Zt.lastEffect=Yt)),Yt}function PR(){return Wo().memoizedState}function A2(Yt,Zt,sn,ln){var gn=Ql();Yr.flags|=Yt,gn.memoizedState=tx(1|Zt,sn,void 0,ln===void 0?null:ln)}function _2(Yt,Zt,sn,ln){var gn=Wo();ln=ln===void 0?null:ln;var Tn=void 0;if(as!==null){var Pn=as.memoizedState;if(Tn=Pn.destroy,ln!==null&&JA(ln,Pn.deps)){gn.memoizedState=tx(Zt,sn,Tn,ln);return}}Yr.flags|=Yt,gn.memoizedState=tx(1|Zt,sn,Tn,ln)}function NR(Yt,Zt){return A2(8390656,8,Yt,Zt)}function n_(Yt,Zt){return _2(2048,8,Yt,Zt)}function MR(Yt,Zt){return _2(4,2,Yt,Zt)}function OR(Yt,Zt){return _2(4,4,Yt,Zt)}function IR(Yt,Zt){if(typeof Zt=="function")return Yt=Yt(),Zt(Yt),function(){Zt(null)};if(Zt!=null)return Yt=Yt(),Zt.current=Yt,function(){Zt.current=null}}function DR(Yt,Zt,sn){return sn=sn!=null?sn.concat([Yt]):null,_2(4,4,IR.bind(null,Zt,Yt),sn)}function r_(){}function LR(Yt,Zt){var sn=Wo();Zt=Zt===void 0?null:Zt;var ln=sn.memoizedState;return ln!==null&&Zt!==null&&JA(Zt,ln[1])?ln[0]:(sn.memoizedState=[Yt,Zt],Yt)}function jR(Yt,Zt){var sn=Wo();Zt=Zt===void 0?null:Zt;var ln=sn.memoizedState;return ln!==null&&Zt!==null&&JA(Zt,ln[1])?ln[0]:(Yt=Yt(),sn.memoizedState=[Yt,Zt],Yt)}function FR(Yt,Zt,sn){return Lm&21?(Sl(sn,Zt)||(sn=rR(),Yr.lanes|=sn,jm|=sn,Yt.baseState=!0),Zt):(Yt.baseState&&(Yt.baseState=!1,eo=!0),Yt.memoizedState=sn)}function gN(Yt,Zt){var sn=Sr;Sr=sn!==0&&4>sn?sn:4,Yt(!0);var ln=XA.transition;XA.transition={};try{Yt(!1),Zt()}finally{Sr=sn,XA.transition=ln}}function $R(){return Wo().memoizedState}function yN(Yt,Zt,sn){var ln=Tp(Yt);if(sn={lane:ln,action:sn,hasEagerState:!1,eagerState:null,next:null},BR(Yt))VR(Zt,sn);else if(sn=gR(Yt,Zt,sn,ln),sn!==null){var gn=Fs();qo(sn,Yt,ln,gn),zR(sn,Zt,ln)}}function vN(Yt,Zt,sn){var ln=Tp(Yt),gn={lane:ln,action:sn,hasEagerState:!1,eagerState:null,next:null};if(BR(Yt))VR(Zt,gn);else{var Tn=Yt.alternate;if(Yt.lanes===0&&(Tn===null||Tn.lanes===0)&&(Tn=Zt.lastRenderedReducer,Tn!==null))try{var Pn=Zt.lastRenderedState,Dn=Tn(Pn,sn);if(gn.hasEagerState=!0,gn.eagerState=Dn,Sl(Dn,Pn)){var $n=Zt.interleaved;$n===null?(gn.next=gn,UA(Zt)):(gn.next=$n.next,$n.next=gn),Zt.interleaved=gn;return}}catch{}finally{}sn=gR(Yt,Zt,gn,ln),sn!==null&&(gn=Fs(),qo(sn,Yt,ln,gn),zR(sn,Zt,ln))}}function BR(Yt){var Zt=Yt.alternate;return Yt===Yr||Zt!==null&&Zt===Yr}function VR(Yt,Zt){Qv=T2=!0;var sn=Yt.pending;sn===null?Zt.next=Zt:(Zt.next=sn.next,sn.next=Zt),Yt.pending=Zt}function zR(Yt,Zt,sn){if(sn&4194240){var ln=Zt.lanes;ln&=Yt.pendingLanes,sn|=ln,Zt.lanes=sn,PA(Yt,sn)}}var C2={readContext:Uo,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useInsertionEffect:Ds,useLayoutEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useMutableSource:Ds,useSyncExternalStore:Ds,useId:Ds,unstable_isNewReconciler:!1},xN={readContext:Uo,useCallback:function(Yt,Zt){return Ql().memoizedState=[Yt,Zt===void 0?null:Zt],Yt},useContext:Uo,useEffect:NR,useImperativeHandle:function(Yt,Zt,sn){return sn=sn!=null?sn.concat([Yt]):null,A2(4194308,4,IR.bind(null,Zt,Yt),sn)},useLayoutEffect:function(Yt,Zt){return A2(4194308,4,Yt,Zt)},useInsertionEffect:function(Yt,Zt){return A2(4,2,Yt,Zt)},useMemo:function(Yt,Zt){var sn=Ql();return Zt=Zt===void 0?null:Zt,Yt=Yt(),sn.memoizedState=[Yt,Zt],Yt},useReducer:function(Yt,Zt,sn){var ln=Ql();return Zt=sn!==void 0?sn(Zt):Zt,ln.memoizedState=ln.baseState=Zt,Yt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:Zt},ln.queue=Yt,Yt=Yt.dispatch=yN.bind(null,Yr,Yt),[ln.memoizedState,Yt]},useRef:function(Yt){var Zt=Ql();return Yt={current:Yt},Zt.memoizedState=Yt},useState:RR,useDebugValue:r_,useDeferredValue:function(Yt){return Ql().memoizedState=Yt},useTransition:function(){var Yt=RR(!1),Zt=Yt[0];return Yt=gN.bind(null,Yt[1]),Ql().memoizedState=Yt,[Zt,Yt]},useMutableSource:function(){},useSyncExternalStore:function(Yt,Zt,sn){var ln=Yr,gn=Ql();if(zr){if(sn===void 0)throw Error(dt(407));sn=sn()}else{if(sn=Zt(),ms===null)throw Error(dt(349));Lm&30||wR(ln,Zt,sn)}gn.memoizedState=sn;var Tn={value:sn,getSnapshot:Zt};return gn.queue=Tn,NR(TR.bind(null,ln,Tn,Yt),[Yt]),ln.flags|=2048,tx(9,kR.bind(null,ln,Tn,sn,Zt),void 0,null),sn},useId:function(){var Yt=Ql(),Zt=ms.identifierPrefix;if(zr){var sn=Cu,ln=_u;sn=(ln&~(1<<32-El(ln)-1)).toString(32)+sn,Zt=":"+Zt+"R"+sn,sn=Zv++,0<sn&&(Zt+="H"+sn.toString(32)),Zt+=":"}else sn=mN++,Zt=":"+Zt+"r"+sn.toString(32)+":";return Yt.memoizedState=Zt},unstable_isNewReconciler:!1},bN={readContext:Uo,useCallback:LR,useContext:Uo,useEffect:n_,useImperativeHandle:DR,useInsertionEffect:MR,useLayoutEffect:OR,useMemo:jR,useReducer:e_,useRef:PR,useState:function(){return e_(ex)},useDebugValue:r_,useDeferredValue:function(Yt){var Zt=Wo();return FR(Zt,as.memoizedState,Yt)},useTransition:function(){var Yt=e_(ex)[0],Zt=Wo().memoizedState;return[Yt,Zt]},useMutableSource:ER,useSyncExternalStore:SR,useId:$R,unstable_isNewReconciler:!1},EN={readContext:Uo,useCallback:LR,useContext:Uo,useEffect:n_,useImperativeHandle:DR,useInsertionEffect:MR,useLayoutEffect:OR,useMemo:jR,useReducer:t_,useRef:PR,useState:function(){return t_(ex)},useDebugValue:r_,useDeferredValue:function(Yt){var Zt=Wo();return as===null?Zt.memoizedState=Yt:FR(Zt,as.memoizedState,Yt)},useTransition:function(){var Yt=t_(ex)[0],Zt=Wo().memoizedState;return[Yt,Zt]},useMutableSource:ER,useSyncExternalStore:SR,useId:$R,unstable_isNewReconciler:!1};function Tl(Yt,Zt){if(Yt&&Yt.defaultProps){Zt=ut({},Zt),Yt=Yt.defaultProps;for(var sn in Yt)Zt[sn]===void 0&&(Zt[sn]=Yt[sn]);return Zt}return Zt}function i_(Yt,Zt,sn,ln){Zt=Yt.memoizedState,sn=sn(ln,Zt),sn=sn==null?Zt:ut({},Zt,sn),Yt.memoizedState=sn,Yt.lanes===0&&(Yt.updateQueue.baseState=sn)}var R2={isMounted:function(Yt){return(Yt=Yt._reactInternals)?dn(Yt)===Yt:!1},enqueueSetState:function(Yt,Zt,sn){Yt=Yt._reactInternals;var ln=Fs(),gn=Tp(Yt),Tn=Ru(ln,gn);Tn.payload=Zt,sn!=null&&(Tn.callback=sn),Zt=Sp(Yt,Tn,gn),Zt!==null&&(qo(Zt,Yt,gn,ln),E2(Zt,Yt,gn))},enqueueReplaceState:function(Yt,Zt,sn){Yt=Yt._reactInternals;var ln=Fs(),gn=Tp(Yt),Tn=Ru(ln,gn);Tn.tag=1,Tn.payload=Zt,sn!=null&&(Tn.callback=sn),Zt=Sp(Yt,Tn,gn),Zt!==null&&(qo(Zt,Yt,gn,ln),E2(Zt,Yt,gn))},enqueueForceUpdate:function(Yt,Zt){Yt=Yt._reactInternals;var sn=Fs(),ln=Tp(Yt),gn=Ru(sn,ln);gn.tag=2,Zt!=null&&(gn.callback=Zt),Zt=Sp(Yt,gn,ln),Zt!==null&&(qo(Zt,Yt,ln,sn),E2(Zt,Yt,ln))}};function HR(Yt,Zt,sn,ln,gn,Tn,Pn){return Yt=Yt.stateNode,typeof Yt.shouldComponentUpdate=="function"?Yt.shouldComponentUpdate(ln,Tn,Pn):Zt.prototype&&Zt.prototype.isPureReactComponent?!y2(sn,ln)||!y2(gn,Tn):!0}function UR(Yt,Zt,sn){var ln=!1,gn=bp,Tn=Zt.contextType;return typeof Tn=="object"&&Tn!==null?Tn=Uo(Tn):(gn=Zs(Zt)?Mm:Is.current,ln=Zt.contextTypes,Tn=(ln=ln!=null)?Sy(Yt,gn):bp),Zt=new Zt(sn,Tn),Yt.memoizedState=Zt.state!==null&&Zt.state!==void 0?Zt.state:null,Zt.updater=R2,Yt.stateNode=Zt,Zt._reactInternals=Yt,ln&&(Yt=Yt.stateNode,Yt.__reactInternalMemoizedUnmaskedChildContext=gn,Yt.__reactInternalMemoizedMaskedChildContext=Tn),Zt}function GR(Yt,Zt,sn,ln){Yt=Zt.state,typeof Zt.componentWillReceiveProps=="function"&&Zt.componentWillReceiveProps(sn,ln),typeof Zt.UNSAFE_componentWillReceiveProps=="function"&&Zt.UNSAFE_componentWillReceiveProps(sn,ln),Zt.state!==Yt&&R2.enqueueReplaceState(Zt,Zt.state,null)}function s_(Yt,Zt,sn,ln){var gn=Yt.stateNode;gn.props=sn,gn.state=Yt.memoizedState,gn.refs={},GA(Yt);var Tn=Zt.contextType;typeof Tn=="object"&&Tn!==null?gn.context=Uo(Tn):(Tn=Zs(Zt)?Mm:Is.current,gn.context=Sy(Yt,Tn)),gn.state=Yt.memoizedState,Tn=Zt.getDerivedStateFromProps,typeof Tn=="function"&&(i_(Yt,Zt,Tn,sn),gn.state=Yt.memoizedState),typeof Zt.getDerivedStateFromProps=="function"||typeof gn.getSnapshotBeforeUpdate=="function"||typeof gn.UNSAFE_componentWillMount!="function"&&typeof gn.componentWillMount!="function"||(Zt=gn.state,typeof gn.componentWillMount=="function"&&gn.componentWillMount(),typeof gn.UNSAFE_componentWillMount=="function"&&gn.UNSAFE_componentWillMount(),Zt!==gn.state&&R2.enqueueReplaceState(gn,gn.state,null),S2(Yt,sn,gn,ln),gn.state=Yt.memoizedState),typeof gn.componentDidMount=="function"&&(Yt.flags|=4194308)}function Ny(Yt,Zt){try{var sn="",ln=Zt;do sn+=pN(ln),ln=ln.return;while(ln);var gn=sn}catch(Tn){gn=`
Error generating stack: `+Tn.message+`
`+Tn.stack}return{value:Yt,source:Zt,stack:gn,digest:null}}function o_(Yt,Zt,sn){return{value:Yt,source:null,stack:sn??null,digest:Zt??null}}function a_(Yt,Zt){try{console.error(Zt.value)}catch(sn){setTimeout(function(){throw sn})}}var SN=typeof WeakMap=="function"?WeakMap:Map;function WR(Yt,Zt,sn){sn=Ru(-1,sn),sn.tag=3,sn.payload={element:null};var ln=Zt.value;return sn.callback=function(){H2||(H2=!0,__=ln),a_(Yt,Zt)},sn}function qR(Yt,Zt,sn){sn=Ru(-1,sn),sn.tag=3;var ln=Yt.type.getDerivedStateFromError;if(typeof ln=="function"){var gn=Zt.value;sn.payload=function(){return ln(gn)},sn.callback=function(){a_(Yt,Zt)}}var Tn=Yt.stateNode;return Tn!==null&&typeof Tn.componentDidCatch=="function"&&(sn.callback=function(){a_(Yt,Zt),typeof ln!="function"&&(wp===null?wp=new Set([this]):wp.add(this));var Pn=Zt.stack;this.componentDidCatch(Zt.value,{componentStack:Pn!==null?Pn:""})}),sn}function KR(Yt,Zt,sn){var ln=Yt.pingCache;if(ln===null){ln=Yt.pingCache=new SN;var gn=new Set;ln.set(Zt,gn)}else gn=ln.get(Zt),gn===void 0&&(gn=new Set,ln.set(Zt,gn));gn.has(sn)||(gn.add(sn),Yt=LN.bind(null,Yt,Zt,sn),Zt.then(Yt,Yt))}function YR(Yt){do{var Zt;if((Zt=Yt.tag===13)&&(Zt=Yt.memoizedState,Zt=Zt!==null?Zt.dehydrated!==null:!0),Zt)return Yt;Yt=Yt.return}while(Yt!==null);return null}function XR(Yt,Zt,sn,ln,gn){return Yt.mode&1?(Yt.flags|=65536,Yt.lanes=gn,Yt):(Yt===Zt?Yt.flags|=65536:(Yt.flags|=128,sn.flags|=131072,sn.flags&=-52805,sn.tag===1&&(sn.alternate===null?sn.tag=17:(Zt=Ru(-1,1),Zt.tag=2,Sp(sn,Zt,1))),sn.lanes|=1),Yt)}var wN=ft.ReactCurrentOwner,eo=!1;function Ws(Yt,Zt,sn,ln){Zt.child=Yt===null?pR(Zt,null,sn,ln):Ay(Zt,Yt.child,sn,ln)}function JR(Yt,Zt,sn,ln,gn){sn=sn.render;var Tn=Zt.ref;return Cy(Zt,gn),ln=QA(Yt,Zt,sn,ln,Tn,gn),sn=ZA(),Yt!==null&&!eo?(Zt.updateQueue=Yt.updateQueue,Zt.flags&=-2053,Yt.lanes&=~gn,Pu(Yt,Zt,gn)):(zr&&sn&&DA(Zt),Zt.flags|=1,Ws(Yt,Zt,ln,gn),Zt.child)}function QR(Yt,Zt,sn,ln,gn){if(Yt===null){var Tn=sn.type;return typeof Tn=="function"&&!O_(Tn)&&Tn.defaultProps===void 0&&sn.compare===null&&sn.defaultProps===void 0?(Zt.tag=15,Zt.type=Tn,ZR(Yt,Zt,Tn,ln,gn)):(Yt=Y2(sn.type,null,ln,Zt,Zt.mode,gn),Yt.ref=Zt.ref,Yt.return=Zt,Zt.child=Yt)}if(Tn=Yt.child,!(Yt.lanes&gn)){var Pn=Tn.memoizedProps;if(sn=sn.compare,sn=sn!==null?sn:y2,sn(Pn,ln)&&Yt.ref===Zt.ref)return Pu(Yt,Zt,gn)}return Zt.flags|=1,Yt=_p(Tn,ln),Yt.ref=Zt.ref,Yt.return=Zt,Zt.child=Yt}function ZR(Yt,Zt,sn,ln,gn){if(Yt!==null){var Tn=Yt.memoizedProps;if(y2(Tn,ln)&&Yt.ref===Zt.ref)if(eo=!1,Zt.pendingProps=ln=Tn,(Yt.lanes&gn)!==0)Yt.flags&131072&&(eo=!0);else return Zt.lanes=Yt.lanes,Pu(Yt,Zt,gn)}return l_(Yt,Zt,sn,ln,gn)}function eP(Yt,Zt,sn){var ln=Zt.pendingProps,gn=ln.children,Tn=Yt!==null?Yt.memoizedState:null;if(ln.mode==="hidden")if(!(Zt.mode&1))Zt.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Oy,bo),bo|=sn;else{if(!(sn&1073741824))return Yt=Tn!==null?Tn.baseLanes|sn:sn,Zt.lanes=Zt.childLanes=1073741824,Zt.memoizedState={baseLanes:Yt,cachePool:null,transitions:null},Zt.updateQueue=null,jr(Oy,bo),bo|=Yt,null;Zt.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln=Tn!==null?Tn.baseLanes:sn,jr(Oy,bo),bo|=ln}else Tn!==null?(ln=Tn.baseLanes|sn,Zt.memoizedState=null):ln=sn,jr(Oy,bo),bo|=ln;return Ws(Yt,Zt,gn,sn),Zt.child}function tP(Yt,Zt){var sn=Zt.ref;(Yt===null&&sn!==null||Yt!==null&&Yt.ref!==sn)&&(Zt.flags|=512,Zt.flags|=2097152)}function l_(Yt,Zt,sn,ln,gn){var Tn=Zs(sn)?Mm:Is.current;return Tn=Sy(Zt,Tn),Cy(Zt,gn),sn=QA(Yt,Zt,sn,ln,Tn,gn),ln=ZA(),Yt!==null&&!eo?(Zt.updateQueue=Yt.updateQueue,Zt.flags&=-2053,Yt.lanes&=~gn,Pu(Yt,Zt,gn)):(zr&&ln&&DA(Zt),Zt.flags|=1,Ws(Yt,Zt,sn,gn),Zt.child)}function nP(Yt,Zt,sn,ln,gn){if(Zs(sn)){var Tn=!0;l2(Zt)}else Tn=!1;if(Cy(Zt,gn),Zt.stateNode===null)N2(Yt,Zt),UR(Zt,sn,ln),s_(Zt,sn,ln,gn),ln=!0;else if(Yt===null){var Pn=Zt.stateNode,Dn=Zt.memoizedProps;Pn.props=Dn;var $n=Pn.context,Xn=sn.contextType;typeof Xn=="object"&&Xn!==null?Xn=Uo(Xn):(Xn=Zs(sn)?Mm:Is.current,Xn=Sy(Zt,Xn));var rr=sn.getDerivedStateFromProps,hr=typeof rr=="function"||typeof Pn.getSnapshotBeforeUpdate=="function";hr||typeof Pn.UNSAFE_componentWillReceiveProps!="function"&&typeof Pn.componentWillReceiveProps!="function"||(Dn!==ln||$n!==Xn)&&GR(Zt,Pn,ln,Xn),Ep=!1;var Qn=Zt.memoizedState;Pn.state=Qn,S2(Zt,ln,Pn,gn),$n=Zt.memoizedState,Dn!==ln||Qn!==$n||Qs.current||Ep?(typeof rr=="function"&&(i_(Zt,sn,rr,ln),$n=Zt.memoizedState),(Dn=Ep||HR(Zt,sn,Dn,ln,Qn,$n,Xn))?(hr||typeof Pn.UNSAFE_componentWillMount!="function"&&typeof Pn.componentWillMount!="function"||(typeof Pn.componentWillMount=="function"&&Pn.componentWillMount(),typeof Pn.UNSAFE_componentWillMount=="function"&&Pn.UNSAFE_componentWillMount()),typeof Pn.componentDidMount=="function"&&(Zt.flags|=4194308)):(typeof Pn.componentDidMount=="function"&&(Zt.flags|=4194308),Zt.memoizedProps=ln,Zt.memoizedState=$n),Pn.props=ln,Pn.state=$n,Pn.context=Xn,ln=Dn):(typeof Pn.componentDidMount=="function"&&(Zt.flags|=4194308),ln=!1)}else{Pn=Zt.stateNode,yR(Yt,Zt),Dn=Zt.memoizedProps,Xn=Zt.type===Zt.elementType?Dn:Tl(Zt.type,Dn),Pn.props=Xn,hr=Zt.pendingProps,Qn=Pn.context,$n=sn.contextType,typeof $n=="object"&&$n!==null?$n=Uo($n):($n=Zs(sn)?Mm:Is.current,$n=Sy(Zt,$n));var Vr=sn.getDerivedStateFromProps;(rr=typeof Vr=="function"||typeof Pn.getSnapshotBeforeUpdate=="function")||typeof Pn.UNSAFE_componentWillReceiveProps!="function"&&typeof Pn.componentWillReceiveProps!="function"||(Dn!==hr||Qn!==$n)&&GR(Zt,Pn,ln,$n),Ep=!1,Qn=Zt.memoizedState,Pn.state=Qn,S2(Zt,ln,Pn,gn);var Ir=Zt.memoizedState;Dn!==hr||Qn!==Ir||Qs.current||Ep?(typeof Vr=="function"&&(i_(Zt,sn,Vr,ln),Ir=Zt.memoizedState),(Xn=Ep||HR(Zt,sn,Xn,ln,Qn,Ir,$n)||!1)?(rr||typeof Pn.UNSAFE_componentWillUpdate!="function"&&typeof Pn.componentWillUpdate!="function"||(typeof Pn.componentWillUpdate=="function"&&Pn.componentWillUpdate(ln,Ir,$n),typeof Pn.UNSAFE_componentWillUpdate=="function"&&Pn.UNSAFE_componentWillUpdate(ln,Ir,$n)),typeof Pn.componentDidUpdate=="function"&&(Zt.flags|=4),typeof Pn.getSnapshotBeforeUpdate=="function"&&(Zt.flags|=1024)):(typeof Pn.componentDidUpdate!="function"||Dn===Yt.memoizedProps&&Qn===Yt.memoizedState||(Zt.flags|=4),typeof Pn.getSnapshotBeforeUpdate!="function"||Dn===Yt.memoizedProps&&Qn===Yt.memoizedState||(Zt.flags|=1024),Zt.memoizedProps=ln,Zt.memoizedState=Ir),Pn.props=ln,Pn.state=Ir,Pn.context=$n,ln=Xn):(typeof Pn.componentDidUpdate!="function"||Dn===Yt.memoizedProps&&Qn===Yt.memoizedState||(Zt.flags|=4),typeof Pn.getSnapshotBeforeUpdate!="function"||Dn===Yt.memoizedProps&&Qn===Yt.memoizedState||(Zt.flags|=1024),ln=!1)}return c_(Yt,Zt,sn,ln,Tn,gn)}function c_(Yt,Zt,sn,ln,gn,Tn){tP(Yt,Zt);var Pn=(Zt.flags&128)!==0;if(!ln&&!Pn)return gn&&nR(Zt,sn,!1),Pu(Yt,Zt,Tn);ln=Zt.stateNode,wN.current=Zt;var Dn=Pn&&typeof sn.getDerivedStateFromError!="function"?null:ln.render();return Zt.flags|=1,Yt!==null&&Pn?(Zt.child=Ay(Zt,Yt.child,null,Tn),Zt.child=Ay(Zt,null,Dn,Tn)):Ws(Yt,Zt,Dn,Tn),Zt.memoizedState=ln.state,gn&&nR(Zt,sn,!0),Zt.child}function rP(Yt){var Zt=Yt.stateNode;Zt.pendingContext?eR(Yt,Zt.pendingContext,Zt.pendingContext!==Zt.context):Zt.context&&eR(Yt,Zt.context,!1),WA(Yt,Zt.containerInfo)}function iP(Yt,Zt,sn,ln,gn){return Ty(),$A(gn),Zt.flags|=256,Ws(Yt,Zt,sn,ln),Zt.child}var u_={dehydrated:null,treeContext:null,retryLane:0};function h_(Yt){return{baseLanes:Yt,cachePool:null,transitions:null}}function sP(Yt,Zt,sn){var ln=Zt.pendingProps,gn=Kr.current,Tn=!1,Pn=(Zt.flags&128)!==0,Dn;if((Dn=Pn)||(Dn=Yt!==null&&Yt.memoizedState===null?!1:(gn&2)!==0),Dn?(Tn=!0,Zt.flags&=-129):(Yt===null||Yt.memoizedState!==null)&&(gn|=1),jr(Kr,gn&1),Yt===null)return FA(Zt),Yt=Zt.memoizedState,Yt!==null&&(Yt=Yt.dehydrated,Yt!==null)?(Zt.mode&1?wA(Yt)?Zt.lanes=8:Zt.lanes=1073741824:Zt.lanes=1,null):(Pn=ln.children,Yt=ln.fallback,Tn?(ln=Zt.mode,Tn=Zt.child,Pn={mode:"hidden",children:Pn},!(ln&1)&&Tn!==null?(Tn.childLanes=0,Tn.pendingProps=Pn):Tn=X2(Pn,ln,0,null),Yt=Vm(Yt,ln,sn,null),Tn.return=Zt,Yt.return=Zt,Tn.sibling=Yt,Zt.child=Tn,Zt.child.memoizedState=h_(sn),Zt.memoizedState=u_,Yt):d_(Zt,Pn));if(gn=Yt.memoizedState,gn!==null&&(Dn=gn.dehydrated,Dn!==null))return kN(Yt,Zt,Pn,ln,Dn,gn,sn);if(Tn){Tn=ln.fallback,Pn=Zt.mode,gn=Yt.child,Dn=gn.sibling;var $n={mode:"hidden",children:ln.children};return!(Pn&1)&&Zt.child!==gn?(ln=Zt.child,ln.childLanes=0,ln.pendingProps=$n,Zt.deletions=null):(ln=_p(gn,$n),ln.subtreeFlags=gn.subtreeFlags&14680064),Dn!==null?Tn=_p(Dn,Tn):(Tn=Vm(Tn,Pn,sn,null),Tn.flags|=2),Tn.return=Zt,ln.return=Zt,ln.sibling=Tn,Zt.child=ln,ln=Tn,Tn=Zt.child,Pn=Yt.child.memoizedState,Pn=Pn===null?h_(sn):{baseLanes:Pn.baseLanes|sn,cachePool:null,transitions:Pn.transitions},Tn.memoizedState=Pn,Tn.childLanes=Yt.childLanes&~sn,Zt.memoizedState=u_,ln}return Tn=Yt.child,Yt=Tn.sibling,ln=_p(Tn,{mode:"visible",children:ln.children}),!(Zt.mode&1)&&(ln.lanes=sn),ln.return=Zt,ln.sibling=null,Yt!==null&&(sn=Zt.deletions,sn===null?(Zt.deletions=[Yt],Zt.flags|=16):sn.push(Yt)),Zt.child=ln,Zt.memoizedState=null,ln}function d_(Yt,Zt){return Zt=X2({mode:"visible",children:Zt},Yt.mode,0,null),Zt.return=Yt,Yt.child=Zt}function P2(Yt,Zt,sn,ln){return ln!==null&&$A(ln),Ay(Zt,Yt.child,null,sn),Yt=d_(Zt,Zt.pendingProps.children),Yt.flags|=2,Zt.memoizedState=null,Yt}function kN(Yt,Zt,sn,ln,gn,Tn,Pn){if(sn)return Zt.flags&256?(Zt.flags&=-257,ln=o_(Error(dt(422))),P2(Yt,Zt,Pn,ln)):Zt.memoizedState!==null?(Zt.child=Yt.child,Zt.flags|=128,null):(Tn=ln.fallback,gn=Zt.mode,ln=X2({mode:"visible",children:ln.children},gn,0,null),Tn=Vm(Tn,gn,Pn,null),Tn.flags|=2,ln.return=Zt,Tn.return=Zt,ln.sibling=Tn,Zt.child=ln,Zt.mode&1&&Ay(Zt,Yt.child,null,Pn),Zt.child.memoizedState=h_(Pn),Zt.memoizedState=u_,Tn);if(!(Zt.mode&1))return P2(Yt,Zt,Pn,null);if(wA(gn))return ln=j4(gn).digest,Tn=Error(dt(419)),ln=o_(Tn,ln,void 0),P2(Yt,Zt,Pn,ln);if(sn=(Pn&Yt.childLanes)!==0,eo||sn){if(ln=ms,ln!==null){switch(Pn&-Pn){case 4:gn=2;break;case 16:gn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:gn=32;break;case 536870912:gn=268435456;break;default:gn=0}gn=gn&(ln.suspendedLanes|Pn)?0:gn,gn!==0&&gn!==Tn.retryLane&&(Tn.retryLane=gn,Xl(Yt,gn),qo(ln,Yt,gn,-1))}return M_(),ln=o_(Error(dt(421))),P2(Yt,Zt,Pn,ln)}return ZC(gn)?(Zt.flags|=128,Zt.child=Yt.child,Zt=jN.bind(null,Yt),F4(gn,Zt),null):(Yt=Tn.treeContext,Un&&(Ho=V4(gn),xo=Zt,zr=!0,wl=null,Kv=!1,Yt!==null&&(Vo[zo++]=_u,Vo[zo++]=Cu,Vo[zo++]=Om,_u=Yt.id,Cu=Yt.overflow,Om=Zt)),Zt=d_(Zt,ln.children),Zt.flags|=4096,Zt)}function oP(Yt,Zt,sn){Yt.lanes|=Zt;var ln=Yt.alternate;ln!==null&&(ln.lanes|=Zt),HA(Yt.return,Zt,sn)}function f_(Yt,Zt,sn,ln,gn){var Tn=Yt.memoizedState;Tn===null?Yt.memoizedState={isBackwards:Zt,rendering:null,renderingStartTime:0,last:ln,tail:sn,tailMode:gn}:(Tn.isBackwards=Zt,Tn.rendering=null,Tn.renderingStartTime=0,Tn.last=ln,Tn.tail=sn,Tn.tailMode=gn)}function aP(Yt,Zt,sn){var ln=Zt.pendingProps,gn=ln.revealOrder,Tn=ln.tail;if(Ws(Yt,Zt,ln.children,sn),ln=Kr.current,ln&2)ln=ln&1|2,Zt.flags|=128;else{if(Yt!==null&&Yt.flags&128)e:for(Yt=Zt.child;Yt!==null;){if(Yt.tag===13)Yt.memoizedState!==null&&oP(Yt,sn,Zt);else if(Yt.tag===19)oP(Yt,sn,Zt);else if(Yt.child!==null){Yt.child.return=Yt,Yt=Yt.child;continue}if(Yt===Zt)break e;for(;Yt.sibling===null;){if(Yt.return===null||Yt.return===Zt)break e;Yt=Yt.return}Yt.sibling.return=Yt.return,Yt=Yt.sibling}ln&=1}if(jr(Kr,ln),!(Zt.mode&1))Zt.memoizedState=null;else switch(gn){case"forwards":for(sn=Zt.child,gn=null;sn!==null;)Yt=sn.alternate,Yt!==null&&w2(Yt)===null&&(gn=sn),sn=sn.sibling;sn=gn,sn===null?(gn=Zt.child,Zt.child=null):(gn=sn.sibling,sn.sibling=null),f_(Zt,!1,gn,sn,Tn);break;case"backwards":for(sn=null,gn=Zt.child,Zt.child=null;gn!==null;){if(Yt=gn.alternate,Yt!==null&&w2(Yt)===null){Zt.child=gn;break}Yt=gn.sibling,gn.sibling=sn,sn=gn,gn=Yt}f_(Zt,!0,sn,null,Tn);break;case"together":f_(Zt,!1,null,null,void 0);break;default:Zt.memoizedState=null}return Zt.child}function N2(Yt,Zt){!(Zt.mode&1)&&Yt!==null&&(Yt.alternate=null,Zt.alternate=null,Zt.flags|=2)}function Pu(Yt,Zt,sn){if(Yt!==null&&(Zt.dependencies=Yt.dependencies),jm|=Zt.lanes,!(sn&Zt.childLanes))return null;if(Yt!==null&&Zt.child!==Yt.child)throw Error(dt(153));if(Zt.child!==null){for(Yt=Zt.child,sn=_p(Yt,Yt.pendingProps),Zt.child=sn,sn.return=Zt;Yt.sibling!==null;)Yt=Yt.sibling,sn=sn.sibling=_p(Yt,Yt.pendingProps),sn.return=Zt;sn.sibling=null}return Zt.child}function TN(Yt,Zt,sn){switch(Zt.tag){case 3:rP(Zt),Ty();break;case 5:bR(Zt);break;case 1:Zs(Zt.type)&&l2(Zt);break;case 4:WA(Zt,Zt.stateNode.containerInfo);break;case 10:mR(Zt,Zt.type._context,Zt.memoizedProps.value);break;case 13:var ln=Zt.memoizedState;if(ln!==null)return ln.dehydrated!==null?(jr(Kr,Kr.current&1),Zt.flags|=128,null):sn&Zt.child.childLanes?sP(Yt,Zt,sn):(jr(Kr,Kr.current&1),Yt=Pu(Yt,Zt,sn),Yt!==null?Yt.sibling:null);jr(Kr,Kr.current&1);break;case 19:if(ln=(sn&Zt.childLanes)!==0,Yt.flags&128){if(ln)return aP(Yt,Zt,sn);Zt.flags|=128}var gn=Zt.memoizedState;if(gn!==null&&(gn.rendering=null,gn.tail=null,gn.lastEffect=null),jr(Kr,Kr.current),ln)break;return null;case 22:case 23:return Zt.lanes=0,eP(Yt,Zt,sn)}return Pu(Yt,Zt,sn)}function Zl(Yt){Yt.flags|=4}function lP(Yt,Zt){if(Yt!==null&&Yt.child===Zt.child)return!0;if(Zt.flags&16)return!1;for(Yt=Zt.child;Yt!==null;){if(Yt.flags&12854||Yt.subtreeFlags&12854)return!1;Yt=Yt.sibling}return!0}var nx,rx,M2,O2;if(Gn)nx=function(Yt,Zt){for(var sn=Zt.child;sn!==null;){if(sn.tag===5||sn.tag===6)kn(Yt,sn.stateNode);else if(sn.tag!==4&&sn.child!==null){sn.child.return=sn,sn=sn.child;continue}if(sn===Zt)break;for(;sn.sibling===null;){if(sn.return===null||sn.return===Zt)return;sn=sn.return}sn.sibling.return=sn.return,sn=sn.sibling}},rx=function(){},M2=function(Yt,Zt,sn,ln,gn){if(Yt=Yt.memoizedProps,Yt!==ln){var Tn=Zt.stateNode,Pn=Jl(Go.current);sn=Rn(Tn,sn,Yt,ln,gn,Pn),(Zt.updateQueue=sn)&&Zl(Zt)}},O2=function(Yt,Zt,sn,ln){sn!==ln&&Zl(Zt)};else if(Jn){nx=function(Yt,Zt,sn,ln){for(var gn=Zt.child;gn!==null;){if(gn.tag===5){var Tn=gn.stateNode;sn&&ln&&(Tn=JC(Tn,gn.type,gn.memoizedProps,gn)),kn(Yt,Tn)}else if(gn.tag===6)Tn=gn.stateNode,sn&&ln&&(Tn=QC(Tn,gn.memoizedProps,gn)),kn(Yt,Tn);else if(gn.tag!==4){if(gn.tag===22&&gn.memoizedState!==null)Tn=gn.child,Tn!==null&&(Tn.return=gn),nx(Yt,gn,!0,!0);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}}if(gn===Zt)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===Zt)return;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}};var cP=function(Yt,Zt,sn,ln){for(var gn=Zt.child;gn!==null;){if(gn.tag===5){var Tn=gn.stateNode;sn&&ln&&(Tn=JC(Tn,gn.type,gn.memoizedProps,gn)),XC(Yt,Tn)}else if(gn.tag===6)Tn=gn.stateNode,sn&&ln&&(Tn=QC(Tn,gn.memoizedProps,gn)),XC(Yt,Tn);else if(gn.tag!==4){if(gn.tag===22&&gn.memoizedState!==null)Tn=gn.child,Tn!==null&&(Tn.return=gn),cP(Yt,gn,!0,!0);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}}if(gn===Zt)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===Zt)return;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}};rx=function(Yt,Zt){var sn=Zt.stateNode;if(!lP(Yt,Zt)){Yt=sn.containerInfo;var ln=YC(Yt);cP(ln,Zt,!1,!1),sn.pendingChildren=ln,Zl(Zt),O4(Yt,ln)}},M2=function(Yt,Zt,sn,ln,gn){var Tn=Yt.stateNode,Pn=Yt.memoizedProps;if((Yt=lP(Yt,Zt))&&Pn===ln)Zt.stateNode=Tn;else{var Dn=Zt.stateNode,$n=Jl(Go.current),Xn=null;Pn!==ln&&(Xn=Rn(Dn,sn,Pn,ln,gn,$n)),Yt&&Xn===null?Zt.stateNode=Tn:(Tn=M4(Tn,Xn,sn,Pn,ln,Zt,Yt,Dn),_n(Tn,sn,ln,gn,$n)&&Zl(Zt),Zt.stateNode=Tn,Yt?Zl(Zt):nx(Tn,Zt,!1,!1))}},O2=function(Yt,Zt,sn,ln){sn!==ln?(Yt=Jl(Ry.current),sn=Jl(Go.current),Zt.stateNode=Cn(ln,Yt,sn,Zt),Zl(Zt)):Zt.stateNode=Yt.stateNode}}else rx=function(){},M2=function(){},O2=function(){};function ix(Yt,Zt){if(!zr)switch(Yt.tailMode){case"hidden":Zt=Yt.tail;for(var sn=null;Zt!==null;)Zt.alternate!==null&&(sn=Zt),Zt=Zt.sibling;sn===null?Yt.tail=null:sn.sibling=null;break;case"collapsed":sn=Yt.tail;for(var ln=null;sn!==null;)sn.alternate!==null&&(ln=sn),sn=sn.sibling;ln===null?Zt||Yt.tail===null?Yt.tail=null:Yt.tail.sibling=null:ln.sibling=null}}function Ls(Yt){var Zt=Yt.alternate!==null&&Yt.alternate.child===Yt.child,sn=0,ln=0;if(Zt)for(var gn=Yt.child;gn!==null;)sn|=gn.lanes|gn.childLanes,ln|=gn.subtreeFlags&14680064,ln|=gn.flags&14680064,gn.return=Yt,gn=gn.sibling;else for(gn=Yt.child;gn!==null;)sn|=gn.lanes|gn.childLanes,ln|=gn.subtreeFlags,ln|=gn.flags,gn.return=Yt,gn=gn.sibling;return Yt.subtreeFlags|=ln,Yt.childLanes=sn,Zt}function AN(Yt,Zt,sn){var ln=Zt.pendingProps;switch(LA(Zt),Zt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(Zt),null;case 1:return Zs(Zt.type)&&a2(),Ls(Zt),null;case 3:return sn=Zt.stateNode,Py(),Br(Qs),Br(Is),YA(),sn.pendingContext&&(sn.context=sn.pendingContext,sn.pendingContext=null),(Yt===null||Yt.child===null)&&(g2(Zt)?Zl(Zt):Yt===null||Yt.memoizedState.isDehydrated&&!(Zt.flags&256)||(Zt.flags|=1024,wl!==null&&(P_(wl),wl=null))),rx(Yt,Zt),Ls(Zt),null;case 5:qA(Zt),sn=Jl(Ry.current);var gn=Zt.type;if(Yt!==null&&Zt.stateNode!=null)M2(Yt,Zt,gn,ln,sn),Yt.ref!==Zt.ref&&(Zt.flags|=512,Zt.flags|=2097152);else{if(!ln){if(Zt.stateNode===null)throw Error(dt(166));return Ls(Zt),null}if(Yt=Jl(Go.current),g2(Zt)){if(!Un)throw Error(dt(175));Yt=z4(Zt.stateNode,Zt.type,Zt.memoizedProps,sn,Yt,Zt,!Kv),Zt.updateQueue=Yt,Yt!==null&&Zl(Zt)}else{var Tn=pn(gn,ln,sn,Yt,Zt);nx(Tn,Zt,!1,!1),Zt.stateNode=Tn,_n(Tn,gn,ln,sn,Yt)&&Zl(Zt)}Zt.ref!==null&&(Zt.flags|=512,Zt.flags|=2097152)}return Ls(Zt),null;case 6:if(Yt&&Zt.stateNode!=null)O2(Yt,Zt,Yt.memoizedProps,ln);else{if(typeof ln!="string"&&Zt.stateNode===null)throw Error(dt(166));if(Yt=Jl(Ry.current),sn=Jl(Go.current),g2(Zt)){if(!Un)throw Error(dt(176));if(Yt=Zt.stateNode,sn=Zt.memoizedProps,(ln=H4(Yt,sn,Zt,!Kv))&&(gn=xo,gn!==null))switch(gn.tag){case 3:J4(gn.stateNode.containerInfo,Yt,sn,(gn.mode&1)!==0);break;case 5:Q4(gn.type,gn.memoizedProps,gn.stateNode,Yt,sn,(gn.mode&1)!==0)}ln&&Zl(Zt)}else Zt.stateNode=Cn(ln,Yt,sn,Zt)}return Ls(Zt),null;case 13:if(Br(Kr),ln=Zt.memoizedState,Yt===null||Yt.memoizedState!==null&&Yt.memoizedState.dehydrated!==null){if(zr&&Ho!==null&&Zt.mode&1&&!(Zt.flags&128))hR(),Ty(),Zt.flags|=98560,gn=!1;else if(gn=g2(Zt),ln!==null&&ln.dehydrated!==null){if(Yt===null){if(!gn)throw Error(dt(318));if(!Un)throw Error(dt(344));if(gn=Zt.memoizedState,gn=gn!==null?gn.dehydrated:null,!gn)throw Error(dt(317));U4(gn,Zt)}else Ty(),!(Zt.flags&128)&&(Zt.memoizedState=null),Zt.flags|=4;Ls(Zt),gn=!1}else wl!==null&&(P_(wl),wl=null),gn=!0;if(!gn)return Zt.flags&65536?Zt:null}return Zt.flags&128?(Zt.lanes=sn,Zt):(sn=ln!==null,sn!==(Yt!==null&&Yt.memoizedState!==null)&&sn&&(Zt.child.flags|=8192,Zt.mode&1&&(Yt===null||Kr.current&1?ls===0&&(ls=3):M_())),Zt.updateQueue!==null&&(Zt.flags|=4),Ls(Zt),null);case 4:return Py(),rx(Yt,Zt),Yt===null&&ir(Zt.stateNode.containerInfo),Ls(Zt),null;case 10:return zA(Zt.type._context),Ls(Zt),null;case 17:return Zs(Zt.type)&&a2(),Ls(Zt),null;case 19:if(Br(Kr),gn=Zt.memoizedState,gn===null)return Ls(Zt),null;if(ln=(Zt.flags&128)!==0,Tn=gn.rendering,Tn===null)if(ln)ix(gn,!1);else{if(ls!==0||Yt!==null&&Yt.flags&128)for(Yt=Zt.child;Yt!==null;){if(Tn=w2(Yt),Tn!==null){for(Zt.flags|=128,ix(gn,!1),Yt=Tn.updateQueue,Yt!==null&&(Zt.updateQueue=Yt,Zt.flags|=4),Zt.subtreeFlags=0,Yt=sn,sn=Zt.child;sn!==null;)ln=sn,gn=Yt,ln.flags&=14680066,Tn=ln.alternate,Tn===null?(ln.childLanes=0,ln.lanes=gn,ln.child=null,ln.subtreeFlags=0,ln.memoizedProps=null,ln.memoizedState=null,ln.updateQueue=null,ln.dependencies=null,ln.stateNode=null):(ln.childLanes=Tn.childLanes,ln.lanes=Tn.lanes,ln.child=Tn.child,ln.subtreeFlags=0,ln.deletions=null,ln.memoizedProps=Tn.memoizedProps,ln.memoizedState=Tn.memoizedState,ln.updateQueue=Tn.updateQueue,ln.type=Tn.type,gn=Tn.dependencies,ln.dependencies=gn===null?null:{lanes:gn.lanes,firstContext:gn.firstContext}),sn=sn.sibling;return jr(Kr,Kr.current&1|2),Zt.child}Yt=Yt.sibling}gn.tail!==null&&fs()>A_&&(Zt.flags|=128,ln=!0,ix(gn,!1),Zt.lanes=4194304)}else{if(!ln)if(Yt=w2(Tn),Yt!==null){if(Zt.flags|=128,ln=!0,Yt=Yt.updateQueue,Yt!==null&&(Zt.updateQueue=Yt,Zt.flags|=4),ix(gn,!0),gn.tail===null&&gn.tailMode==="hidden"&&!Tn.alternate&&!zr)return Ls(Zt),null}else 2*fs()-gn.renderingStartTime>A_&&sn!==1073741824&&(Zt.flags|=128,ln=!0,ix(gn,!1),Zt.lanes=4194304);gn.isBackwards?(Tn.sibling=Zt.child,Zt.child=Tn):(Yt=gn.last,Yt!==null?Yt.sibling=Tn:Zt.child=Tn,gn.last=Tn)}return gn.tail!==null?(Zt=gn.tail,gn.rendering=Zt,gn.tail=Zt.sibling,gn.renderingStartTime=fs(),Zt.sibling=null,Yt=Kr.current,jr(Kr,ln?Yt&1|2:Yt&1),Zt):(Ls(Zt),null);case 22:case 23:return N_(),sn=Zt.memoizedState!==null,Yt!==null&&Yt.memoizedState!==null!==sn&&(Zt.flags|=8192),sn&&Zt.mode&1?bo&1073741824&&(Ls(Zt),Gn&&Zt.subtreeFlags&6&&(Zt.flags|=8192)):Ls(Zt),null;case 24:return null;case 25:return null}throw Error(dt(156,Zt.tag))}function _N(Yt,Zt){switch(LA(Zt),Zt.tag){case 1:return Zs(Zt.type)&&a2(),Yt=Zt.flags,Yt&65536?(Zt.flags=Yt&-65537|128,Zt):null;case 3:return Py(),Br(Qs),Br(Is),YA(),Yt=Zt.flags,Yt&65536&&!(Yt&128)?(Zt.flags=Yt&-65537|128,Zt):null;case 5:return qA(Zt),null;case 13:if(Br(Kr),Yt=Zt.memoizedState,Yt!==null&&Yt.dehydrated!==null){if(Zt.alternate===null)throw Error(dt(340));Ty()}return Yt=Zt.flags,Yt&65536?(Zt.flags=Yt&-65537|128,Zt):null;case 19:return Br(Kr),null;case 4:return Py(),null;case 10:return zA(Zt.type._context),null;case 22:case 23:return N_(),null;case 24:return null;default:return null}}var I2=!1,js=!1,CN=typeof WeakSet=="function"?WeakSet:Set,er=null;function My(Yt,Zt){var sn=Yt.ref;if(sn!==null)if(typeof sn=="function")try{sn(null)}catch(ln){Hr(Yt,Zt,ln)}else sn.current=null}function p_(Yt,Zt,sn){try{sn()}catch(ln){Hr(Yt,Zt,ln)}}var uP=!1;function RN(Yt,Zt){for(un(Yt.containerInfo),er=Zt;er!==null;)if(Yt=er,Zt=Yt.child,(Yt.subtreeFlags&1028)!==0&&Zt!==null)Zt.return=Yt,er=Zt;else for(;er!==null;){Yt=er;try{var sn=Yt.alternate;if(Yt.flags&1024)switch(Yt.tag){case 0:case 11:case 15:break;case 1:if(sn!==null){var ln=sn.memoizedProps,gn=sn.memoizedState,Tn=Yt.stateNode,Pn=Tn.getSnapshotBeforeUpdate(Yt.elementType===Yt.type?ln:Tl(Yt.type,ln),gn);Tn.__reactInternalSnapshotBeforeUpdate=Pn}break;case 3:Gn&&N4(Yt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(Dn){Hr(Yt,Yt.return,Dn)}if(Zt=Yt.sibling,Zt!==null){Zt.return=Yt.return,er=Zt;break}er=Yt.return}return sn=uP,uP=!1,sn}function sx(Yt,Zt,sn){var ln=Zt.updateQueue;if(ln=ln!==null?ln.lastEffect:null,ln!==null){var gn=ln=ln.next;do{if((gn.tag&Yt)===Yt){var Tn=gn.destroy;gn.destroy=void 0,Tn!==void 0&&p_(Zt,sn,Tn)}gn=gn.next}while(gn!==ln)}}function D2(Yt,Zt){if(Zt=Zt.updateQueue,Zt=Zt!==null?Zt.lastEffect:null,Zt!==null){var sn=Zt=Zt.next;do{if((sn.tag&Yt)===Yt){var ln=sn.create;sn.destroy=ln()}sn=sn.next}while(sn!==Zt)}}function m_(Yt){var Zt=Yt.ref;if(Zt!==null){var sn=Yt.stateNode;switch(Yt.tag){case 5:Yt=hn(sn);break;default:Yt=sn}typeof Zt=="function"?Zt(Yt):Zt.current=Yt}}function hP(Yt){var Zt=Yt.alternate;Zt!==null&&(Yt.alternate=null,hP(Zt)),Yt.child=null,Yt.deletions=null,Yt.sibling=null,Yt.tag===5&&(Zt=Yt.stateNode,Zt!==null&&yr(Zt)),Yt.stateNode=null,Yt.return=null,Yt.dependencies=null,Yt.memoizedProps=null,Yt.memoizedState=null,Yt.pendingProps=null,Yt.stateNode=null,Yt.updateQueue=null}function dP(Yt){return Yt.tag===5||Yt.tag===3||Yt.tag===4}function fP(Yt){e:for(;;){for(;Yt.sibling===null;){if(Yt.return===null||dP(Yt.return))return null;Yt=Yt.return}for(Yt.sibling.return=Yt.return,Yt=Yt.sibling;Yt.tag!==5&&Yt.tag!==6&&Yt.tag!==18;){if(Yt.flags&2||Yt.child===null||Yt.tag===4)continue e;Yt.child.return=Yt,Yt=Yt.child}if(!(Yt.flags&2))return Yt.stateNode}}function g_(Yt,Zt,sn){var ln=Yt.tag;if(ln===5||ln===6)Yt=Yt.stateNode,Zt?k4(sn,Yt,Zt):Ts(sn,Yt);else if(ln!==4&&(Yt=Yt.child,Yt!==null))for(g_(Yt,Zt,sn),Yt=Yt.sibling;Yt!==null;)g_(Yt,Zt,sn),Yt=Yt.sibling}function y_(Yt,Zt,sn){var ln=Yt.tag;if(ln===5||ln===6)Yt=Yt.stateNode,Zt?w4(sn,Yt,Zt):br(sn,Yt);else if(ln!==4&&(Yt=Yt.child,Yt!==null))for(y_(Yt,Zt,sn),Yt=Yt.sibling;Yt!==null;)y_(Yt,Zt,sn),Yt=Yt.sibling}var As=null,Al=!1;function _c(Yt,Zt,sn){for(sn=sn.child;sn!==null;)v_(Yt,Zt,sn),sn=sn.sibling}function v_(Yt,Zt,sn){if(Kl&&typeof Kl.onCommitFiberUnmount=="function")try{Kl.onCommitFiberUnmount(d2,sn)}catch{}switch(sn.tag){case 5:js||My(sn,Zt);case 6:if(Gn){var ln=As,gn=Al;As=null,_c(Yt,Zt,sn),As=ln,Al=gn,As!==null&&(Al?A4(As,sn.stateNode):T4(As,sn.stateNode))}else _c(Yt,Zt,sn);break;case 18:Gn&&As!==null&&(Al?Y4(As,sn.stateNode):K4(As,sn.stateNode));break;case 4:Gn?(ln=As,gn=Al,As=sn.stateNode.containerInfo,Al=!0,_c(Yt,Zt,sn),As=ln,Al=gn):(Jn&&(ln=sn.stateNode.containerInfo,gn=YC(ln),SA(ln,gn)),_c(Yt,Zt,sn));break;case 0:case 11:case 14:case 15:if(!js&&(ln=sn.updateQueue,ln!==null&&(ln=ln.lastEffect,ln!==null))){gn=ln=ln.next;do{var Tn=gn,Pn=Tn.destroy;Tn=Tn.tag,Pn!==void 0&&(Tn&2||Tn&4)&&p_(sn,Zt,Pn),gn=gn.next}while(gn!==ln)}_c(Yt,Zt,sn);break;case 1:if(!js&&(My(sn,Zt),ln=sn.stateNode,typeof ln.componentWillUnmount=="function"))try{ln.props=sn.memoizedProps,ln.state=sn.memoizedState,ln.componentWillUnmount()}catch(Dn){Hr(sn,Zt,Dn)}_c(Yt,Zt,sn);break;case 21:_c(Yt,Zt,sn);break;case 22:sn.mode&1?(js=(ln=js)||sn.memoizedState!==null,_c(Yt,Zt,sn),js=ln):_c(Yt,Zt,sn);break;default:_c(Yt,Zt,sn)}}function pP(Yt){var Zt=Yt.updateQueue;if(Zt!==null){Yt.updateQueue=null;var sn=Yt.stateNode;sn===null&&(sn=Yt.stateNode=new CN),Zt.forEach(function(ln){var gn=FN.bind(null,Yt,ln);sn.has(ln)||(sn.add(ln),ln.then(gn,gn))})}}function _l(Yt,Zt){var sn=Zt.deletions;if(sn!==null)for(var ln=0;ln<sn.length;ln++){var gn=sn[ln];try{var Tn=Yt,Pn=Zt;if(Gn){var Dn=Pn;e:for(;Dn!==null;){switch(Dn.tag){case 5:As=Dn.stateNode,Al=!1;break e;case 3:As=Dn.stateNode.containerInfo,Al=!0;break e;case 4:As=Dn.stateNode.containerInfo,Al=!0;break e}Dn=Dn.return}if(As===null)throw Error(dt(160));v_(Tn,Pn,gn),As=null,Al=!1}else v_(Tn,Pn,gn);var $n=gn.alternate;$n!==null&&($n.return=null),gn.return=null}catch(Xn){Hr(gn,Zt,Xn)}}if(Zt.subtreeFlags&12854)for(Zt=Zt.child;Zt!==null;)mP(Zt,Yt),Zt=Zt.sibling}function mP(Yt,Zt){var sn=Yt.alternate,ln=Yt.flags;switch(Yt.tag){case 0:case 11:case 14:case 15:if(_l(Zt,Yt),eu(Yt),ln&4){try{sx(3,Yt,Yt.return),D2(3,Yt)}catch(Qn){Hr(Yt,Yt.return,Qn)}try{sx(5,Yt,Yt.return)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 1:_l(Zt,Yt),eu(Yt),ln&512&&sn!==null&&My(sn,sn.return);break;case 5:if(_l(Zt,Yt),eu(Yt),ln&512&&sn!==null&&My(sn,sn.return),Gn){if(Yt.flags&32){var gn=Yt.stateNode;try{KC(gn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}if(ln&4&&(gn=Yt.stateNode,gn!=null)){var Tn=Yt.memoizedProps;if(sn=sn!==null?sn.memoizedProps:Tn,ln=Yt.type,Zt=Yt.updateQueue,Yt.updateQueue=null,Zt!==null)try{S4(gn,Zt,ln,sn,Tn,Yt)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}break;case 6:if(_l(Zt,Yt),eu(Yt),ln&4&&Gn){if(Yt.stateNode===null)throw Error(dt(162));gn=Yt.stateNode,Tn=Yt.memoizedProps,sn=sn!==null?sn.memoizedProps:Tn;try{Tr(gn,sn,Tn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 3:if(_l(Zt,Yt),eu(Yt),ln&4){if(Gn&&Un&&sn!==null&&sn.memoizedState.isDehydrated)try{W4(Zt.containerInfo)}catch(Qn){Hr(Yt,Yt.return,Qn)}if(Jn){gn=Zt.containerInfo,Tn=Zt.pendingChildren;try{SA(gn,Tn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}break;case 4:if(_l(Zt,Yt),eu(Yt),ln&4&&Jn){Tn=Yt.stateNode,gn=Tn.containerInfo,Tn=Tn.pendingChildren;try{SA(gn,Tn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 13:_l(Zt,Yt),eu(Yt),gn=Yt.child,gn.flags&8192&&(Tn=gn.memoizedState!==null,gn.stateNode.isHidden=Tn,!Tn||gn.alternate!==null&&gn.alternate.memoizedState!==null||(T_=fs())),ln&4&&pP(Yt);break;case 22:var Pn=sn!==null&&sn.memoizedState!==null;if(Yt.mode&1?(js=(sn=js)||Pn,_l(Zt,Yt),js=sn):_l(Zt,Yt),eu(Yt),ln&8192){if(sn=Yt.memoizedState!==null,(Yt.stateNode.isHidden=sn)&&!Pn&&Yt.mode&1)for(er=Yt,ln=Yt.child;ln!==null;){for(Zt=er=ln;er!==null;){Pn=er;var Dn=Pn.child;switch(Pn.tag){case 0:case 11:case 14:case 15:sx(4,Pn,Pn.return);break;case 1:My(Pn,Pn.return);var $n=Pn.stateNode;if(typeof $n.componentWillUnmount=="function"){var Xn=Pn,rr=Pn.return;try{var hr=Xn;$n.props=hr.memoizedProps,$n.state=hr.memoizedState,$n.componentWillUnmount()}catch(Qn){Hr(Xn,rr,Qn)}}break;case 5:My(Pn,Pn.return);break;case 22:if(Pn.memoizedState!==null){vP(Zt);continue}}Dn!==null?(Dn.return=Pn,er=Dn):vP(Zt)}ln=ln.sibling}if(Gn){e:if(ln=null,Gn)for(Zt=Yt;;){if(Zt.tag===5){if(ln===null){ln=Zt;try{gn=Zt.stateNode,sn?_4(gn):R4(Zt.stateNode,Zt.memoizedProps)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}else if(Zt.tag===6){if(ln===null)try{Tn=Zt.stateNode,sn?C4(Tn):P4(Tn,Zt.memoizedProps)}catch(Qn){Hr(Yt,Yt.return,Qn)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===Yt)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===Yt)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===Yt)break e;ln===Zt&&(ln=null),Zt=Zt.return}ln===Zt&&(ln=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}}break;case 19:_l(Zt,Yt),eu(Yt),ln&4&&pP(Yt);break;case 21:break;default:_l(Zt,Yt),eu(Yt)}}function eu(Yt){var Zt=Yt.flags;if(Zt&2){try{if(Gn){e:{for(var sn=Yt.return;sn!==null;){if(dP(sn)){var ln=sn;break e}sn=sn.return}throw Error(dt(160))}switch(ln.tag){case 5:var gn=ln.stateNode;ln.flags&32&&(KC(gn),ln.flags&=-33);var Tn=fP(Yt);y_(Yt,Tn,gn);break;case 3:case 4:var Pn=ln.stateNode.containerInfo,Dn=fP(Yt);g_(Yt,Dn,Pn);break;default:throw Error(dt(161))}}}catch($n){Hr(Yt,Yt.return,$n)}Yt.flags&=-3}Zt&4096&&(Yt.flags&=-4097)}function PN(Yt,Zt,sn){er=Yt,gP(Yt)}function gP(Yt,Zt,sn){for(var ln=(Yt.mode&1)!==0;er!==null;){var gn=er,Tn=gn.child;if(gn.tag===22&&ln){var Pn=gn.memoizedState!==null||I2;if(!Pn){var Dn=gn.alternate,$n=Dn!==null&&Dn.memoizedState!==null||js;Dn=I2;var Xn=js;if(I2=Pn,(js=$n)&&!Xn)for(er=gn;er!==null;)Pn=er,$n=Pn.child,Pn.tag===22&&Pn.memoizedState!==null?xP(gn):$n!==null?($n.return=Pn,er=$n):xP(gn);for(;Tn!==null;)er=Tn,gP(Tn),Tn=Tn.sibling;er=gn,I2=Dn,js=Xn}yP(Yt)}else gn.subtreeFlags&8772&&Tn!==null?(Tn.return=gn,er=Tn):yP(Yt)}}function yP(Yt){for(;er!==null;){var Zt=er;if(Zt.flags&8772){var sn=Zt.alternate;try{if(Zt.flags&8772)switch(Zt.tag){case 0:case 11:case 15:js||D2(5,Zt);break;case 1:var ln=Zt.stateNode;if(Zt.flags&4&&!js)if(sn===null)ln.componentDidMount();else{var gn=Zt.elementType===Zt.type?sn.memoizedProps:Tl(Zt.type,sn.memoizedProps);ln.componentDidUpdate(gn,sn.memoizedState,ln.__reactInternalSnapshotBeforeUpdate)}var Tn=Zt.updateQueue;Tn!==null&&xR(Zt,Tn,ln);break;case 3:var Pn=Zt.updateQueue;if(Pn!==null){if(sn=null,Zt.child!==null)switch(Zt.child.tag){case 5:sn=hn(Zt.child.stateNode);break;case 1:sn=Zt.child.stateNode}xR(Zt,Pn,sn)}break;case 5:var Dn=Zt.stateNode;sn===null&&Zt.flags&4&&Wl(Dn,Zt.type,Zt.memoizedProps,Zt);break;case 6:break;case 4:break;case 12:break;case 13:if(Un&&Zt.memoizedState===null){var $n=Zt.alternate;if($n!==null){var Xn=$n.memoizedState;if(Xn!==null){var rr=Xn.dehydrated;rr!==null&&q4(rr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}js||Zt.flags&512&&m_(Zt)}catch(hr){Hr(Zt,Zt.return,hr)}}if(Zt===Yt){er=null;break}if(sn=Zt.sibling,sn!==null){sn.return=Zt.return,er=sn;break}er=Zt.return}}function vP(Yt){for(;er!==null;){var Zt=er;if(Zt===Yt){er=null;break}var sn=Zt.sibling;if(sn!==null){sn.return=Zt.return,er=sn;break}er=Zt.return}}function xP(Yt){for(;er!==null;){var Zt=er;try{switch(Zt.tag){case 0:case 11:case 15:var sn=Zt.return;try{D2(4,Zt)}catch($n){Hr(Zt,sn,$n)}break;case 1:var ln=Zt.stateNode;if(typeof ln.componentDidMount=="function"){var gn=Zt.return;try{ln.componentDidMount()}catch($n){Hr(Zt,gn,$n)}}var Tn=Zt.return;try{m_(Zt)}catch($n){Hr(Zt,Tn,$n)}break;case 5:var Pn=Zt.return;try{m_(Zt)}catch($n){Hr(Zt,Pn,$n)}}}catch($n){Hr(Zt,Zt.return,$n)}if(Zt===Yt){er=null;break}var Dn=Zt.sibling;if(Dn!==null){Dn.return=Zt.return,er=Dn;break}er=Zt.return}}var L2=0,j2=1,F2=2,$2=3,B2=4;if(typeof Symbol=="function"&&Symbol.for){var ox=Symbol.for;L2=ox("selector.component"),j2=ox("selector.has_pseudo_class"),F2=ox("selector.role"),$2=ox("selector.test_id"),B2=ox("selector.text")}function x_(Yt){var Zt=Hn(Yt);if(Zt!=null){if(typeof Zt.memoizedProps["data-testname"]!="string")throw Error(dt(364));return Zt}if(Yt=Yn(Yt),Yt===null)throw Error(dt(362));return Yt.stateNode.current}function b_(Yt,Zt){switch(Zt.$$typeof){case L2:if(Yt.type===Zt.value)return!0;break;case j2:e:{Zt=Zt.value,Yt=[Yt,0];for(var sn=0;sn<Yt.length;){var ln=Yt[sn++],gn=Yt[sn++],Tn=Zt[gn];if(ln.tag!==5||!or(ln)){for(;Tn!=null&&b_(ln,Tn);)gn++,Tn=Zt[gn];if(gn===Zt.length){Zt=!0;break e}else for(ln=ln.child;ln!==null;)Yt.push(ln,gn),ln=ln.sibling}}Zt=!1}return Zt;case F2:if(Yt.tag===5&&cr(Yt.stateNode,Zt.value))return!0;break;case B2:if((Yt.tag===5||Yt.tag===6)&&(Yt=lr(Yt),Yt!==null&&0<=Yt.indexOf(Zt.value)))return!0;break;case $2:if(Yt.tag===5&&(Yt=Yt.memoizedProps["data-testname"],typeof Yt=="string"&&Yt.toLowerCase()===Zt.value.toLowerCase()))return!0;break;default:throw Error(dt(365))}return!1}function E_(Yt){switch(Yt.$$typeof){case L2:return"<"+(rn(Yt.value)||"Unknown")+">";case j2:return":has("+(E_(Yt)||"")+")";case F2:return'[role="'+Yt.value+'"]';case B2:return'"'+Yt.value+'"';case $2:return'[data-testname="'+Yt.value+'"]';default:throw Error(dt(365))}}function bP(Yt,Zt){var sn=[];Yt=[Yt,0];for(var ln=0;ln<Yt.length;){var gn=Yt[ln++],Tn=Yt[ln++],Pn=Zt[Tn];if(gn.tag!==5||!or(gn)){for(;Pn!=null&&b_(gn,Pn);)Tn++,Pn=Zt[Tn];if(Tn===Zt.length)sn.push(gn);else for(gn=gn.child;gn!==null;)Yt.push(gn,Tn),gn=gn.sibling}}return sn}function S_(Yt,Zt){if(!Kn)throw Error(dt(363));Yt=x_(Yt),Yt=bP(Yt,Zt),Zt=[],Yt=Array.from(Yt);for(var sn=0;sn<Yt.length;){var ln=Yt[sn++];if(ln.tag===5)or(ln)||Zt.push(ln.stateNode);else for(ln=ln.child;ln!==null;)Yt.push(ln),ln=ln.sibling}return Zt}var NN=Math.ceil,V2=ft.ReactCurrentDispatcher,w_=ft.ReactCurrentOwner,_i=ft.ReactCurrentBatchConfig,vr=0,ms=null,rs=null,_s=0,bo=0,Oy=xp(0),ls=0,ax=null,jm=0,z2=0,k_=0,lx=null,to=null,T_=0,A_=1/0,Nu=null;function Iy(){A_=fs()+500}var H2=!1,__=null,wp=null,U2=!1,kp=null,G2=0,cx=0,C_=null,W2=-1,q2=0;function Fs(){return vr&6?fs():W2!==-1?W2:W2=fs()}function Tp(Yt){return Yt.mode&1?vr&2&&_s!==0?_s&-_s:fN.transition!==null?(q2===0&&(q2=rR()),q2):(Yt=Sr,Yt!==0?Yt:ur()):1}function qo(Yt,Zt,sn,ln){if(50<cx)throw cx=0,C_=null,Error(dt(185));qv(Yt,sn,ln),(!(vr&2)||Yt!==ms)&&(Yt===ms&&(!(vr&2)&&(z2|=sn),ls===4&&Ap(Yt,_s)),oo(Yt,ln),sn===1&&vr===0&&!(Zt.mode&1)&&(Iy(),f2&&Yl()))}function oo(Yt,Zt){var sn=Yt.callbackNode;iN(Yt,Zt);var ln=h2(Yt,Yt===ms?_s:0);if(ln===0)sn!==null&&sR(sn),Yt.callbackNode=null,Yt.callbackPriority=0;else if(Zt=ln&-ln,Yt.callbackPriority!==Zt){if(sn!=null&&sR(sn),Zt===1)Yt.tag===0?dN(SP.bind(null,Yt)):oR(SP.bind(null,Yt)),Bn?zn(function(){!(vr&6)&&Yl()}):NA(MA,Yl),sn=null;else{switch(iR(ln)){case 1:sn=MA;break;case 4:sn=lN;break;case 16:sn=OA;break;case 536870912:sn=cN;break;default:sn=OA}sn=NP(sn,EP.bind(null,Yt))}Yt.callbackPriority=Zt,Yt.callbackNode=sn}}function EP(Yt,Zt){if(W2=-1,q2=0,vr&6)throw Error(dt(327));var sn=Yt.callbackNode;if(Bm()&&Yt.callbackNode!==sn)return null;var ln=h2(Yt,Yt===ms?_s:0);if(ln===0)return null;if(ln&30||ln&Yt.expiredLanes||Zt)Zt=K2(Yt,ln);else{Zt=ln;var gn=vr;vr|=2;var Tn=TP();(ms!==Yt||_s!==Zt)&&(Nu=null,Iy(),Fm(Yt,Zt));do try{IN();break}catch(Dn){kP(Yt,Dn)}while(1);VA(),V2.current=Tn,vr=gn,rs!==null?Zt=0:(ms=null,_s=0,Zt=ls)}if(Zt!==0){if(Zt===2&&(gn=CA(Yt),gn!==0&&(ln=gn,Zt=R_(Yt,gn))),Zt===1)throw sn=ax,Fm(Yt,0),Ap(Yt,ln),oo(Yt,fs()),sn;if(Zt===6)Ap(Yt,ln);else{if(gn=Yt.current.alternate,!(ln&30)&&!MN(gn)&&(Zt=K2(Yt,ln),Zt===2&&(Tn=CA(Yt),Tn!==0&&(ln=Tn,Zt=R_(Yt,Tn))),Zt===1))throw sn=ax,Fm(Yt,0),Ap(Yt,ln),oo(Yt,fs()),sn;switch(Yt.finishedWork=gn,Yt.finishedLanes=ln,Zt){case 0:case 1:throw Error(dt(345));case 2:$m(Yt,to,Nu);break;case 3:if(Ap(Yt,ln),(ln&130023424)===ln&&(Zt=T_+500-fs(),10<Zt)){if(h2(Yt,0)!==0)break;if(gn=Yt.suspendedLanes,(gn&ln)!==ln){Fs(),Yt.pingedLanes|=Yt.suspendedLanes&gn;break}Yt.timeoutHandle=Mn($m.bind(null,Yt,to,Nu),Zt);break}$m(Yt,to,Nu);break;case 4:if(Ap(Yt,ln),(ln&4194240)===ln)break;for(Zt=Yt.eventTimes,gn=-1;0<ln;){var Pn=31-El(ln);Tn=1<<Pn,Pn=Zt[Pn],Pn>gn&&(gn=Pn),ln&=~Tn}if(ln=gn,ln=fs()-ln,ln=(120>ln?120:480>ln?480:1080>ln?1080:1920>ln?1920:3e3>ln?3e3:4320>ln?4320:1960*NN(ln/1960))-ln,10<ln){Yt.timeoutHandle=Mn($m.bind(null,Yt,to,Nu),ln);break}$m(Yt,to,Nu);break;case 5:$m(Yt,to,Nu);break;default:throw Error(dt(329))}}}return oo(Yt,fs()),Yt.callbackNode===sn?EP.bind(null,Yt):null}function R_(Yt,Zt){var sn=lx;return Yt.current.memoizedState.isDehydrated&&(Fm(Yt,Zt).flags|=256),Yt=K2(Yt,Zt),Yt!==2&&(Zt=to,to=sn,Zt!==null&&P_(Zt)),Yt}function P_(Yt){to===null?to=Yt:to.push.apply(to,Yt)}function MN(Yt){for(var Zt=Yt;;){if(Zt.flags&16384){var sn=Zt.updateQueue;if(sn!==null&&(sn=sn.stores,sn!==null))for(var ln=0;ln<sn.length;ln++){var gn=sn[ln],Tn=gn.getSnapshot;gn=gn.value;try{if(!Sl(Tn(),gn))return!1}catch{return!1}}}if(sn=Zt.child,Zt.subtreeFlags&16384&&sn!==null)sn.return=Zt,Zt=sn;else{if(Zt===Yt)break;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===Yt)return!0;Zt=Zt.return}Zt.sibling.return=Zt.return,Zt=Zt.sibling}}return!0}function Ap(Yt,Zt){for(Zt&=~k_,Zt&=~z2,Yt.suspendedLanes|=Zt,Yt.pingedLanes&=~Zt,Yt=Yt.expirationTimes;0<Zt;){var sn=31-El(Zt),ln=1<<sn;Yt[sn]=-1,Zt&=~ln}}function SP(Yt){if(vr&6)throw Error(dt(327));Bm();var Zt=h2(Yt,0);if(!(Zt&1))return oo(Yt,fs()),null;var sn=K2(Yt,Zt);if(Yt.tag!==0&&sn===2){var ln=CA(Yt);ln!==0&&(Zt=ln,sn=R_(Yt,ln))}if(sn===1)throw sn=ax,Fm(Yt,0),Ap(Yt,Zt),oo(Yt,fs()),sn;if(sn===6)throw Error(dt(345));return Yt.finishedWork=Yt.current.alternate,Yt.finishedLanes=Zt,$m(Yt,to,Nu),oo(Yt,fs()),null}function wP(Yt){kp!==null&&kp.tag===0&&!(vr&6)&&Bm();var Zt=vr;vr|=1;var sn=_i.transition,ln=Sr;try{if(_i.transition=null,Sr=1,Yt)return Yt()}finally{Sr=ln,_i.transition=sn,vr=Zt,!(vr&6)&&Yl()}}function N_(){bo=Oy.current,Br(Oy)}function Fm(Yt,Zt){Yt.finishedWork=null,Yt.finishedLanes=0;var sn=Yt.timeoutHandle;if(sn!==On&&(Yt.timeoutHandle=On,In(sn)),rs!==null)for(sn=rs.return;sn!==null;){var ln=sn;switch(LA(ln),ln.tag){case 1:ln=ln.type.childContextTypes,ln!=null&&a2();break;case 3:Py(),Br(Qs),Br(Is),YA();break;case 5:qA(ln);break;case 4:Py();break;case 13:Br(Kr);break;case 19:Br(Kr);break;case 10:zA(ln.type._context);break;case 22:case 23:N_()}sn=sn.return}if(ms=Yt,rs=Yt=_p(Yt.current,null),_s=bo=Zt,ls=0,ax=null,k_=z2=jm=0,to=lx=null,Dm!==null){for(Zt=0;Zt<Dm.length;Zt++)if(sn=Dm[Zt],ln=sn.interleaved,ln!==null){sn.interleaved=null;var gn=ln.next,Tn=sn.pending;if(Tn!==null){var Pn=Tn.next;Tn.next=gn,ln.next=Pn}sn.pending=ln}Dm=null}return Yt}function kP(Yt,Zt){do{var sn=rs;try{if(VA(),k2.current=C2,T2){for(var ln=Yr.memoizedState;ln!==null;){var gn=ln.queue;gn!==null&&(gn.pending=null),ln=ln.next}T2=!1}if(Lm=0,ps=as=Yr=null,Qv=!1,Zv=0,w_.current=null,sn===null||sn.return===null){ls=1,ax=Zt,rs=null;break}e:{var Tn=Yt,Pn=sn.return,Dn=sn,$n=Zt;if(Zt=_s,Dn.flags|=32768,$n!==null&&typeof $n=="object"&&typeof $n.then=="function"){var Xn=$n,rr=Dn,hr=rr.tag;if(!(rr.mode&1)&&(hr===0||hr===11||hr===15)){var Qn=rr.alternate;Qn?(rr.updateQueue=Qn.updateQueue,rr.memoizedState=Qn.memoizedState,rr.lanes=Qn.lanes):(rr.updateQueue=null,rr.memoizedState=null)}var Vr=YR(Pn);if(Vr!==null){Vr.flags&=-257,XR(Vr,Pn,Dn,Tn,Zt),Vr.mode&1&&KR(Tn,Xn,Zt),Zt=Vr,$n=Xn;var Ir=Zt.updateQueue;if(Ir===null){var co=new Set;co.add($n),Zt.updateQueue=co}else Ir.add($n);break e}else{if(!(Zt&1)){KR(Tn,Xn,Zt),M_();break e}$n=Error(dt(426))}}else if(zr&&Dn.mode&1){var Mu=YR(Pn);if(Mu!==null){!(Mu.flags&65536)&&(Mu.flags|=256),XR(Mu,Pn,Dn,Tn,Zt),$A(Ny($n,Dn));break e}}Tn=$n=Ny($n,Dn),ls!==4&&(ls=2),lx===null?lx=[Tn]:lx.push(Tn),Tn=Pn;do{switch(Tn.tag){case 3:Tn.flags|=65536,Zt&=-Zt,Tn.lanes|=Zt;var Fn=WR(Tn,$n,Zt);vR(Tn,Fn);break e;case 1:Dn=$n;var Ln=Tn.type,Vn=Tn.stateNode;if(!(Tn.flags&128)&&(typeof Ln.getDerivedStateFromError=="function"||Vn!==null&&typeof Vn.componentDidCatch=="function"&&(wp===null||!wp.has(Vn)))){Tn.flags|=65536,Zt&=-Zt,Tn.lanes|=Zt;var Zn=qR(Tn,Dn,Zt);vR(Tn,Zn);break e}}Tn=Tn.return}while(Tn!==null)}_P(sn)}catch(ar){Zt=ar,rs===sn&&sn!==null&&(rs=sn=sn.return);continue}break}while(1)}function TP(){var Yt=V2.current;return V2.current=C2,Yt===null?C2:Yt}function M_(){(ls===0||ls===3||ls===2)&&(ls=4),ms===null||!(jm&268435455)&&!(z2&268435455)||Ap(ms,_s)}function K2(Yt,Zt){var sn=vr;vr|=2;var ln=TP();(ms!==Yt||_s!==Zt)&&(Nu=null,Fm(Yt,Zt));do try{ON();break}catch(gn){kP(Yt,gn)}while(1);if(VA(),vr=sn,V2.current=ln,rs!==null)throw Error(dt(261));return ms=null,_s=0,ls}function ON(){for(;rs!==null;)AP(rs)}function IN(){for(;rs!==null&&!oN();)AP(rs)}function AP(Yt){var Zt=PP(Yt.alternate,Yt,bo);Yt.memoizedProps=Yt.pendingProps,Zt===null?_P(Yt):rs=Zt,w_.current=null}function _P(Yt){var Zt=Yt;do{var sn=Zt.alternate;if(Yt=Zt.return,Zt.flags&32768){if(sn=_N(sn,Zt),sn!==null){sn.flags&=32767,rs=sn;return}if(Yt!==null)Yt.flags|=32768,Yt.subtreeFlags=0,Yt.deletions=null;else{ls=6,rs=null;return}}else if(sn=AN(sn,Zt,bo),sn!==null){rs=sn;return}if(Zt=Zt.sibling,Zt!==null){rs=Zt;return}rs=Zt=Yt}while(Zt!==null);ls===0&&(ls=5)}function $m(Yt,Zt,sn){var ln=Sr,gn=_i.transition;try{_i.transition=null,Sr=1,DN(Yt,Zt,sn,ln)}finally{_i.transition=gn,Sr=ln}return null}function DN(Yt,Zt,sn,ln){do Bm();while(kp!==null);if(vr&6)throw Error(dt(327));sn=Yt.finishedWork;var gn=Yt.finishedLanes;if(sn===null)return null;if(Yt.finishedWork=null,Yt.finishedLanes=0,sn===Yt.current)throw Error(dt(177));Yt.callbackNode=null,Yt.callbackPriority=0;var Tn=sn.lanes|sn.childLanes;if(sN(Yt,Tn),Yt===ms&&(rs=ms=null,_s=0),!(sn.subtreeFlags&2064)&&!(sn.flags&2064)||U2||(U2=!0,NP(OA,function(){return Bm(),null})),Tn=(sn.flags&15990)!==0,sn.subtreeFlags&15990||Tn){Tn=_i.transition,_i.transition=null;var Pn=Sr;Sr=1;var Dn=vr;vr|=4,w_.current=null,RN(Yt,sn),mP(sn,Yt),bn(Yt.containerInfo),Yt.current=sn,PN(sn),aN(),vr=Dn,Sr=Pn,_i.transition=Tn}else Yt.current=sn;if(U2&&(U2=!1,kp=Yt,G2=gn),Tn=Yt.pendingLanes,Tn===0&&(wp=null),uN(sn.stateNode),oo(Yt,fs()),Zt!==null)for(ln=Yt.onRecoverableError,sn=0;sn<Zt.length;sn++)gn=Zt[sn],ln(gn.value,{componentStack:gn.stack,digest:gn.digest});if(H2)throw H2=!1,Yt=__,__=null,Yt;return G2&1&&Yt.tag!==0&&Bm(),Tn=Yt.pendingLanes,Tn&1?Yt===C_?cx++:(cx=0,C_=Yt):cx=0,Yl(),null}function Bm(){if(kp!==null){var Yt=iR(G2),Zt=_i.transition,sn=Sr;try{if(_i.transition=null,Sr=16>Yt?16:Yt,kp===null)var ln=!1;else{if(Yt=kp,kp=null,G2=0,vr&6)throw Error(dt(331));var gn=vr;for(vr|=4,er=Yt.current;er!==null;){var Tn=er,Pn=Tn.child;if(er.flags&16){var Dn=Tn.deletions;if(Dn!==null){for(var $n=0;$n<Dn.length;$n++){var Xn=Dn[$n];for(er=Xn;er!==null;){var rr=er;switch(rr.tag){case 0:case 11:case 15:sx(8,rr,Tn)}var hr=rr.child;if(hr!==null)hr.return=rr,er=hr;else for(;er!==null;){rr=er;var Qn=rr.sibling,Vr=rr.return;if(hP(rr),rr===Xn){er=null;break}if(Qn!==null){Qn.return=Vr,er=Qn;break}er=Vr}}}var Ir=Tn.alternate;if(Ir!==null){var co=Ir.child;if(co!==null){Ir.child=null;do{var Mu=co.sibling;co.sibling=null,co=Mu}while(co!==null)}}er=Tn}}if(Tn.subtreeFlags&2064&&Pn!==null)Pn.return=Tn,er=Pn;else e:for(;er!==null;){if(Tn=er,Tn.flags&2048)switch(Tn.tag){case 0:case 11:case 15:sx(9,Tn,Tn.return)}var Fn=Tn.sibling;if(Fn!==null){Fn.return=Tn.return,er=Fn;break e}er=Tn.return}}var Ln=Yt.current;for(er=Ln;er!==null;){Pn=er;var Vn=Pn.child;if(Pn.subtreeFlags&2064&&Vn!==null)Vn.return=Pn,er=Vn;else e:for(Pn=Ln;er!==null;){if(Dn=er,Dn.flags&2048)try{switch(Dn.tag){case 0:case 11:case 15:D2(9,Dn)}}catch(ar){Hr(Dn,Dn.return,ar)}if(Dn===Pn){er=null;break e}var Zn=Dn.sibling;if(Zn!==null){Zn.return=Dn.return,er=Zn;break e}er=Dn.return}}if(vr=gn,Yl(),Kl&&typeof Kl.onPostCommitFiberRoot=="function")try{Kl.onPostCommitFiberRoot(d2,Yt)}catch{}ln=!0}return ln}finally{Sr=sn,_i.transition=Zt}}return!1}function CP(Yt,Zt,sn){Zt=Ny(sn,Zt),Zt=WR(Yt,Zt,1),Yt=Sp(Yt,Zt,1),Zt=Fs(),Yt!==null&&(qv(Yt,1,Zt),oo(Yt,Zt))}function Hr(Yt,Zt,sn){if(Yt.tag===3)CP(Yt,Yt,sn);else for(;Zt!==null;){if(Zt.tag===3){CP(Zt,Yt,sn);break}else if(Zt.tag===1){var ln=Zt.stateNode;if(typeof Zt.type.getDerivedStateFromError=="function"||typeof ln.componentDidCatch=="function"&&(wp===null||!wp.has(ln))){Yt=Ny(sn,Yt),Yt=qR(Zt,Yt,1),Zt=Sp(Zt,Yt,1),Yt=Fs(),Zt!==null&&(qv(Zt,1,Yt),oo(Zt,Yt));break}}Zt=Zt.return}}function LN(Yt,Zt,sn){var ln=Yt.pingCache;ln!==null&&ln.delete(Zt),Zt=Fs(),Yt.pingedLanes|=Yt.suspendedLanes&sn,ms===Yt&&(_s&sn)===sn&&(ls===4||ls===3&&(_s&130023424)===_s&&500>fs()-T_?Fm(Yt,0):k_|=sn),oo(Yt,Zt)}function RP(Yt,Zt){Zt===0&&(Yt.mode&1?(Zt=u2,u2<<=1,!(u2&130023424)&&(u2=4194304)):Zt=1);var sn=Fs();Yt=Xl(Yt,Zt),Yt!==null&&(qv(Yt,Zt,sn),oo(Yt,sn))}function jN(Yt){var Zt=Yt.memoizedState,sn=0;Zt!==null&&(sn=Zt.retryLane),RP(Yt,sn)}function FN(Yt,Zt){var sn=0;switch(Yt.tag){case 13:var ln=Yt.stateNode,gn=Yt.memoizedState;gn!==null&&(sn=gn.retryLane);break;case 19:ln=Yt.stateNode;break;default:throw Error(dt(314))}ln!==null&&ln.delete(Zt),RP(Yt,sn)}var PP;PP=function(Yt,Zt,sn){if(Yt!==null)if(Yt.memoizedProps!==Zt.pendingProps||Qs.current)eo=!0;else{if(!(Yt.lanes&sn)&&!(Zt.flags&128))return eo=!1,TN(Yt,Zt,sn);eo=!!(Yt.flags&131072)}else eo=!1,zr&&Zt.flags&1048576&&aR(Zt,m2,Zt.index);switch(Zt.lanes=0,Zt.tag){case 2:var ln=Zt.type;N2(Yt,Zt),Yt=Zt.pendingProps;var gn=Sy(Zt,Is.current);Cy(Zt,sn),gn=QA(null,Zt,ln,Yt,gn,sn);var Tn=ZA();return Zt.flags|=1,typeof gn=="object"&&gn!==null&&typeof gn.render=="function"&&gn.$$typeof===void 0?(Zt.tag=1,Zt.memoizedState=null,Zt.updateQueue=null,Zs(ln)?(Tn=!0,l2(Zt)):Tn=!1,Zt.memoizedState=gn.state!==null&&gn.state!==void 0?gn.state:null,GA(Zt),gn.updater=R2,Zt.stateNode=gn,gn._reactInternals=Zt,s_(Zt,ln,Yt,sn),Zt=c_(null,Zt,ln,!0,Tn,sn)):(Zt.tag=0,zr&&Tn&&DA(Zt),Ws(null,Zt,gn,sn),Zt=Zt.child),Zt;case 16:ln=Zt.elementType;e:{switch(N2(Yt,Zt),Yt=Zt.pendingProps,gn=ln._init,ln=gn(ln._payload),Zt.type=ln,gn=Zt.tag=BN(ln),Yt=Tl(ln,Yt),gn){case 0:Zt=l_(null,Zt,ln,Yt,sn);break e;case 1:Zt=nP(null,Zt,ln,Yt,sn);break e;case 11:Zt=JR(null,Zt,ln,Yt,sn);break e;case 14:Zt=QR(null,Zt,ln,Tl(ln.type,Yt),sn);break e}throw Error(dt(306,ln,""))}return Zt;case 0:return ln=Zt.type,gn=Zt.pendingProps,gn=Zt.elementType===ln?gn:Tl(ln,gn),l_(Yt,Zt,ln,gn,sn);case 1:return ln=Zt.type,gn=Zt.pendingProps,gn=Zt.elementType===ln?gn:Tl(ln,gn),nP(Yt,Zt,ln,gn,sn);case 3:e:{if(rP(Zt),Yt===null)throw Error(dt(387));ln=Zt.pendingProps,Tn=Zt.memoizedState,gn=Tn.element,yR(Yt,Zt),S2(Zt,ln,null,sn);var Pn=Zt.memoizedState;if(ln=Pn.element,Un&&Tn.isDehydrated)if(Tn={element:ln,isDehydrated:!1,cache:Pn.cache,pendingSuspenseBoundaries:Pn.pendingSuspenseBoundaries,transitions:Pn.transitions},Zt.updateQueue.baseState=Tn,Zt.memoizedState=Tn,Zt.flags&256){gn=Ny(Error(dt(423)),Zt),Zt=iP(Yt,Zt,ln,sn,gn);break e}else if(ln!==gn){gn=Ny(Error(dt(424)),Zt),Zt=iP(Yt,Zt,ln,sn,gn);break e}else for(Un&&(Ho=B4(Zt.stateNode.containerInfo),xo=Zt,zr=!0,wl=null,Kv=!1),sn=pR(Zt,null,ln,sn),Zt.child=sn;sn;)sn.flags=sn.flags&-3|4096,sn=sn.sibling;else{if(Ty(),ln===gn){Zt=Pu(Yt,Zt,sn);break e}Ws(Yt,Zt,ln,sn)}Zt=Zt.child}return Zt;case 5:return bR(Zt),Yt===null&&FA(Zt),ln=Zt.type,gn=Zt.pendingProps,Tn=Yt!==null?Yt.memoizedProps:null,Pn=gn.children,Nn(ln,gn)?Pn=null:Tn!==null&&Nn(ln,Tn)&&(Zt.flags|=32),tP(Yt,Zt),Ws(Yt,Zt,Pn,sn),Zt.child;case 6:return Yt===null&&FA(Zt),null;case 13:return sP(Yt,Zt,sn);case 4:return WA(Zt,Zt.stateNode.containerInfo),ln=Zt.pendingProps,Yt===null?Zt.child=Ay(Zt,null,ln,sn):Ws(Yt,Zt,ln,sn),Zt.child;case 11:return ln=Zt.type,gn=Zt.pendingProps,gn=Zt.elementType===ln?gn:Tl(ln,gn),JR(Yt,Zt,ln,gn,sn);case 7:return Ws(Yt,Zt,Zt.pendingProps,sn),Zt.child;case 8:return Ws(Yt,Zt,Zt.pendingProps.children,sn),Zt.child;case 12:return Ws(Yt,Zt,Zt.pendingProps.children,sn),Zt.child;case 10:e:{if(ln=Zt.type._context,gn=Zt.pendingProps,Tn=Zt.memoizedProps,Pn=gn.value,mR(Zt,ln,Pn),Tn!==null)if(Sl(Tn.value,Pn)){if(Tn.children===gn.children&&!Qs.current){Zt=Pu(Yt,Zt,sn);break e}}else for(Tn=Zt.child,Tn!==null&&(Tn.return=Zt);Tn!==null;){var Dn=Tn.dependencies;if(Dn!==null){Pn=Tn.child;for(var $n=Dn.firstContext;$n!==null;){if($n.context===ln){if(Tn.tag===1){$n=Ru(-1,sn&-sn),$n.tag=2;var Xn=Tn.updateQueue;if(Xn!==null){Xn=Xn.shared;var rr=Xn.pending;rr===null?$n.next=$n:($n.next=rr.next,rr.next=$n),Xn.pending=$n}}Tn.lanes|=sn,$n=Tn.alternate,$n!==null&&($n.lanes|=sn),HA(Tn.return,sn,Zt),Dn.lanes|=sn;break}$n=$n.next}}else if(Tn.tag===10)Pn=Tn.type===Zt.type?null:Tn.child;else if(Tn.tag===18){if(Pn=Tn.return,Pn===null)throw Error(dt(341));Pn.lanes|=sn,Dn=Pn.alternate,Dn!==null&&(Dn.lanes|=sn),HA(Pn,sn,Zt),Pn=Tn.sibling}else Pn=Tn.child;if(Pn!==null)Pn.return=Tn;else for(Pn=Tn;Pn!==null;){if(Pn===Zt){Pn=null;break}if(Tn=Pn.sibling,Tn!==null){Tn.return=Pn.return,Pn=Tn;break}Pn=Pn.return}Tn=Pn}Ws(Yt,Zt,gn.children,sn),Zt=Zt.child}return Zt;case 9:return gn=Zt.type,ln=Zt.pendingProps.children,Cy(Zt,sn),gn=Uo(gn),ln=ln(gn),Zt.flags|=1,Ws(Yt,Zt,ln,sn),Zt.child;case 14:return ln=Zt.type,gn=Tl(ln,Zt.pendingProps),gn=Tl(ln.type,gn),QR(Yt,Zt,ln,gn,sn);case 15:return ZR(Yt,Zt,Zt.type,Zt.pendingProps,sn);case 17:return ln=Zt.type,gn=Zt.pendingProps,gn=Zt.elementType===ln?gn:Tl(ln,gn),N2(Yt,Zt),Zt.tag=1,Zs(ln)?(Yt=!0,l2(Zt)):Yt=!1,Cy(Zt,sn),UR(Zt,ln,gn),s_(Zt,ln,gn,sn),c_(null,Zt,ln,!0,Yt,sn);case 19:return aP(Yt,Zt,sn);case 22:return eP(Yt,Zt,sn)}throw Error(dt(156,Zt.tag))};function NP(Yt,Zt){return NA(Yt,Zt)}function $N(Yt,Zt,sn,ln){this.tag=Yt,this.key=sn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Zt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ln,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(Yt,Zt,sn,ln){return new $N(Yt,Zt,sn,ln)}function O_(Yt){return Yt=Yt.prototype,!(!Yt||!Yt.isReactComponent)}function BN(Yt){if(typeof Yt=="function")return O_(Yt)?1:0;if(Yt!=null){if(Yt=Yt.$$typeof,Yt===zt)return 11;if(Yt===Ut)return 14}return 2}function _p(Yt,Zt){var sn=Yt.alternate;return sn===null?(sn=Ko(Yt.tag,Zt,Yt.key,Yt.mode),sn.elementType=Yt.elementType,sn.type=Yt.type,sn.stateNode=Yt.stateNode,sn.alternate=Yt,Yt.alternate=sn):(sn.pendingProps=Zt,sn.type=Yt.type,sn.flags=0,sn.subtreeFlags=0,sn.deletions=null),sn.flags=Yt.flags&14680064,sn.childLanes=Yt.childLanes,sn.lanes=Yt.lanes,sn.child=Yt.child,sn.memoizedProps=Yt.memoizedProps,sn.memoizedState=Yt.memoizedState,sn.updateQueue=Yt.updateQueue,Zt=Yt.dependencies,sn.dependencies=Zt===null?null:{lanes:Zt.lanes,firstContext:Zt.firstContext},sn.sibling=Yt.sibling,sn.index=Yt.index,sn.ref=Yt.ref,sn}function Y2(Yt,Zt,sn,ln,gn,Tn){var Pn=2;if(ln=Yt,typeof Yt=="function")O_(Yt)&&(Pn=1);else if(typeof Yt=="string")Pn=5;else e:switch(Yt){case Tt:return Vm(sn.children,gn,Tn,Zt);case jt:Pn=8,gn|=8;break;case Rt:return Yt=Ko(12,sn,Zt,gn|2),Yt.elementType=Rt,Yt.lanes=Tn,Yt;case Kt:return Yt=Ko(13,sn,Zt,gn),Yt.elementType=Kt,Yt.lanes=Tn,Yt;case Bt:return Yt=Ko(19,sn,Zt,gn),Yt.elementType=Bt,Yt.lanes=Tn,Yt;case en:return X2(sn,gn,Tn,Zt);default:if(typeof Yt=="object"&&Yt!==null)switch(Yt.$$typeof){case Ft:Pn=10;break e;case $t:Pn=9;break e;case zt:Pn=11;break e;case Ut:Pn=14;break e;case Jt:Pn=16,ln=null;break e}throw Error(dt(130,Yt==null?Yt:typeof Yt,""))}return Zt=Ko(Pn,sn,Zt,gn),Zt.elementType=Yt,Zt.type=ln,Zt.lanes=Tn,Zt}function Vm(Yt,Zt,sn,ln){return Yt=Ko(7,Yt,ln,Zt),Yt.lanes=sn,Yt}function X2(Yt,Zt,sn,ln){return Yt=Ko(22,Yt,ln,Zt),Yt.elementType=en,Yt.lanes=sn,Yt.stateNode={isHidden:!1},Yt}function I_(Yt,Zt,sn){return Yt=Ko(6,Yt,null,Zt),Yt.lanes=sn,Yt}function D_(Yt,Zt,sn){return Zt=Ko(4,Yt.children!==null?Yt.children:[],Yt.key,Zt),Zt.lanes=sn,Zt.stateNode={containerInfo:Yt.containerInfo,pendingChildren:null,implementation:Yt.implementation},Zt}function VN(Yt,Zt,sn,ln,gn){this.tag=Zt,this.containerInfo=Yt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=On,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=RA(0),this.expirationTimes=RA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=RA(0),this.identifierPrefix=ln,this.onRecoverableError=gn,Un&&(this.mutableSourceEagerHydrationData=null)}function MP(Yt,Zt,sn,ln,gn,Tn,Pn,Dn,$n){return Yt=new VN(Yt,Zt,sn,Dn,$n),Zt===1?(Zt=1,Tn===!0&&(Zt|=8)):Zt=0,Tn=Ko(3,null,null,Zt),Yt.current=Tn,Tn.stateNode=Yt,Tn.memoizedState={element:ln,isDehydrated:sn,cache:null,transitions:null,pendingSuspenseBoundaries:null},GA(Tn),Yt}function OP(Yt){if(!Yt)return bp;Yt=Yt._reactInternals;e:{if(dn(Yt)!==Yt||Yt.tag!==1)throw Error(dt(170));var Zt=Yt;do{switch(Zt.tag){case 3:Zt=Zt.stateNode.context;break e;case 1:if(Zs(Zt.type)){Zt=Zt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}Zt=Zt.return}while(Zt!==null);throw Error(dt(171))}if(Yt.tag===1){var sn=Yt.type;if(Zs(sn))return tR(Yt,sn,Zt)}return Zt}function IP(Yt){var Zt=Yt._reactInternals;if(Zt===void 0)throw typeof Yt.render=="function"?Error(dt(188)):(Yt=Object.keys(Yt).join(","),Error(dt(268,Yt)));return Yt=mn(Zt),Yt===null?null:Yt.stateNode}function DP(Yt,Zt){if(Yt=Yt.memoizedState,Yt!==null&&Yt.dehydrated!==null){var sn=Yt.retryLane;Yt.retryLane=sn!==0&&sn<Zt?sn:Zt}}function J2(Yt,Zt){DP(Yt,Zt),(Yt=Yt.alternate)&&DP(Yt,Zt)}function zN(Yt){return Yt=mn(Yt),Yt===null?null:Yt.stateNode}function HN(){return null}return et.attemptContinuousHydration=function(Yt){if(Yt.tag===13){var Zt=Xl(Yt,134217728);if(Zt!==null){var sn=Fs();qo(Zt,Yt,134217728,sn)}J2(Yt,134217728)}},et.attemptDiscreteHydration=function(Yt){if(Yt.tag===13){var Zt=Xl(Yt,1);if(Zt!==null){var sn=Fs();qo(Zt,Yt,1,sn)}J2(Yt,1)}},et.attemptHydrationAtCurrentPriority=function(Yt){if(Yt.tag===13){var Zt=Tp(Yt),sn=Xl(Yt,Zt);if(sn!==null){var ln=Fs();qo(sn,Yt,Zt,ln)}J2(Yt,Zt)}},et.attemptSynchronousHydration=function(Yt){switch(Yt.tag){case 3:var Zt=Yt.stateNode;if(Zt.current.memoizedState.isDehydrated){var sn=Wv(Zt.pendingLanes);sn!==0&&(PA(Zt,sn|1),oo(Zt,fs()),!(vr&6)&&(Iy(),Yl()))}break;case 13:wP(function(){var ln=Xl(Yt,1);if(ln!==null){var gn=Fs();qo(ln,Yt,1,gn)}}),J2(Yt,1)}},et.batchedUpdates=function(Yt,Zt){var sn=vr;vr|=1;try{return Yt(Zt)}finally{vr=sn,vr===0&&(Iy(),f2&&Yl())}},et.createComponentSelector=function(Yt){return{$$typeof:L2,value:Yt}},et.createContainer=function(Yt,Zt,sn,ln,gn,Tn,Pn){return MP(Yt,Zt,!1,null,sn,ln,gn,Tn,Pn)},et.createHasPseudoClassSelector=function(Yt){return{$$typeof:j2,value:Yt}},et.createHydrationContainer=function(Yt,Zt,sn,ln,gn,Tn,Pn,Dn,$n){return Yt=MP(sn,ln,!0,Yt,gn,Tn,Pn,Dn,$n),Yt.context=OP(null),sn=Yt.current,ln=Fs(),gn=Tp(sn),Tn=Ru(ln,gn),Tn.callback=Zt??null,Sp(sn,Tn,gn),Yt.current.lanes=gn,qv(Yt,gn,ln),oo(Yt,ln),Yt},et.createPortal=function(Yt,Zt,sn){var ln=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kt,key:ln==null?null:""+ln,children:Yt,containerInfo:Zt,implementation:sn}},et.createRoleSelector=function(Yt){return{$$typeof:F2,value:Yt}},et.createTestNameSelector=function(Yt){return{$$typeof:$2,value:Yt}},et.createTextSelector=function(Yt){return{$$typeof:B2,value:Yt}},et.deferredUpdates=function(Yt){var Zt=Sr,sn=_i.transition;try{return _i.transition=null,Sr=16,Yt()}finally{Sr=Zt,_i.transition=sn}},et.discreteUpdates=function(Yt,Zt,sn,ln,gn){var Tn=Sr,Pn=_i.transition;try{return _i.transition=null,Sr=1,Yt(Zt,sn,ln,gn)}finally{Sr=Tn,_i.transition=Pn,vr===0&&Iy()}},et.findAllNodes=S_,et.findBoundingRects=function(Yt,Zt){if(!Kn)throw Error(dt(363));Zt=S_(Yt,Zt),Yt=[];for(var sn=0;sn<Zt.length;sn++)Yt.push(Wn(Zt[sn]));for(Zt=Yt.length-1;0<Zt;Zt--){sn=Yt[Zt];for(var ln=sn.x,gn=ln+sn.width,Tn=sn.y,Pn=Tn+sn.height,Dn=Zt-1;0<=Dn;Dn--)if(Zt!==Dn){var $n=Yt[Dn],Xn=$n.x,rr=Xn+$n.width,hr=$n.y,Qn=hr+$n.height;if(ln>=Xn&&Tn>=hr&&gn<=rr&&Pn<=Qn){Yt.splice(Zt,1);break}else if(ln!==Xn||sn.width!==$n.width||Qn<Tn||hr>Pn){if(!(Tn!==hr||sn.height!==$n.height||rr<ln||Xn>gn)){Xn>ln&&($n.width+=Xn-ln,$n.x=ln),rr<gn&&($n.width=gn-Xn),Yt.splice(Zt,1);break}}else{hr>Tn&&($n.height+=hr-Tn,$n.y=Tn),Qn<Pn&&($n.height=Pn-hr),Yt.splice(Zt,1);break}}}return Yt},et.findHostInstance=IP,et.findHostInstanceWithNoPortals=function(Yt){return Yt=fn(Yt),Yt=Yt!==null?Sn(Yt):null,Yt===null?null:Yt.stateNode},et.findHostInstanceWithWarning=function(Yt){return IP(Yt)},et.flushControlled=function(Yt){var Zt=vr;vr|=1;var sn=_i.transition,ln=Sr;try{_i.transition=null,Sr=1,Yt()}finally{Sr=ln,_i.transition=sn,vr=Zt,vr===0&&(Iy(),Yl())}},et.flushPassiveEffects=Bm,et.flushSync=wP,et.focusWithin=function(Yt,Zt){if(!Kn)throw Error(dt(363));for(Yt=x_(Yt),Zt=bP(Yt,Zt),Zt=Array.from(Zt),Yt=0;Yt<Zt.length;){var sn=Zt[Yt++];if(!or(sn)){if(sn.tag===5&&Cr(sn.stateNode))return!0;for(sn=sn.child;sn!==null;)Zt.push(sn),sn=sn.sibling}}return!1},et.getCurrentUpdatePriority=function(){return Sr},et.getFindAllNodesFailureDescription=function(Yt,Zt){if(!Kn)throw Error(dt(363));var sn=0,ln=[];Yt=[x_(Yt),0];for(var gn=0;gn<Yt.length;){var Tn=Yt[gn++],Pn=Yt[gn++],Dn=Zt[Pn];if((Tn.tag!==5||!or(Tn))&&(b_(Tn,Dn)&&(ln.push(E_(Dn)),Pn++,Pn>sn&&(sn=Pn)),Pn<Zt.length))for(Tn=Tn.child;Tn!==null;)Yt.push(Tn,Pn),Tn=Tn.sibling}if(sn<Zt.length){for(Yt=[];sn<Zt.length;sn++)Yt.push(E_(Zt[sn]));return`findAllNodes was able to match part of the selector:
  `+(ln.join(" > ")+`

No matching component was found for:
  `)+Yt.join(" > ")}return null},et.getPublicRootInstance=function(Yt){if(Yt=Yt.current,!Yt.child)return null;switch(Yt.child.tag){case 5:return hn(Yt.child.stateNode);default:return Yt.child.stateNode}},et.injectIntoDevTools=function(Yt){if(Yt={bundleType:Yt.bundleType,version:Yt.version,rendererPackageName:Yt.rendererPackageName,rendererConfig:Yt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:zN,findFiberByHostInstance:Yt.findFiberByHostInstance||HN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Yt=!1;else{var Zt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(Zt.isDisabled||!Zt.supportsFiber)Yt=!0;else{try{d2=Zt.inject(Yt),Kl=Zt}catch{}Yt=!!Zt.checkDCE}}return Yt},et.isAlreadyRendering=function(){return!1},et.observeVisibleRects=function(Yt,Zt,sn,ln){if(!Kn)throw Error(dt(363));Yt=S_(Yt,Zt);var gn=Rr(Yt,sn,ln).disconnect;return{disconnect:function(){gn()}}},et.registerMutableSourceForHydration=function(Yt,Zt){var sn=Zt._getVersion;sn=sn(Zt._source),Yt.mutableSourceEagerHydrationData==null?Yt.mutableSourceEagerHydrationData=[Zt,sn]:Yt.mutableSourceEagerHydrationData.push(Zt,sn)},et.runWithPriority=function(Yt,Zt){var sn=Sr;try{return Sr=Yt,Zt()}finally{Sr=sn}},et.shouldError=function(){return null},et.shouldSuspend=function(){return!1},et.updateContainer=function(Yt,Zt,sn,ln){var gn=Zt.current,Tn=Fs(),Pn=Tp(gn);return sn=OP(sn),Zt.context===null?Zt.context=sn:Zt.pendingContext=sn,Zt=Ru(Tn,Pn),Zt.payload={element:Yt},ln=ln===void 0?null:ln,ln!==null&&(Zt.callback=ln),Yt=Sp(gn,Zt,Pn),Yt!==null&&(qo(Yt,gn,Pn,Tn),E2(Yt,gn,Pn)),Pn},et};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(it,g,et=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in g&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&g.draggable){var ot=g.x!==void 0||g.y!==void 0,ct=g.onDragEnd||g.onDragMove;ot&&!ct&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var ut in et)if(!propsToSkip[ut]){var dt=ut.slice(0,2)==="on",ft=et[ut]!==g[ut];if(dt&&ft){var St=ut.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),it.off(St,et[ut])}var kt=!g.hasOwnProperty(ut);kt&&it.setAttr(ut,void 0)}var Tt=g._useStrictMode,jt={},Rt=!1;const Ft={};for(var ut in g)if(!propsToSkip[ut]){var dt=ut.slice(0,2)==="on",$t=et[ut]!==g[ut];if(dt&&$t){var St=ut.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),g[ut]&&(Ft[St]=g[ut])}!dt&&(g[ut]!==et[ut]||Tt&&g[ut]!==it.getAttr(ut))&&(Rt=!0,jt[ut]=g[ut])}Rt&&(it.setAttrs(jt),updatePicture(it));for(var St in Ft)it.on(St+EVENTS_NAMESPACE,Ft[St])}function updatePicture(it){if(!Konva$1.autoDrawEnabled){var g=it.getLayer()||it.getStage();g&&g.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;function appendInitialChild(it,g){if(typeof g=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${g}`);return}it.add(g),updatePicture(it)}function createInstance(it,g,et){let ot=Konva[it];ot||(console.error(`Konva has no node with the type ${it}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${it}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),ot=Konva.Group);const ct={},ut={};for(var dt in g){var ft=dt.slice(0,2)==="on";ft?ut[dt]=g[dt]:ct[dt]=g[dt]}const St=new ot(ct);return applyNodeProps(St,ut),St}function createTextInstance(it,g,et){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${it}"`)}function finalizeInitialChildren(it,g,et){return!1}function getPublicInstance(it){return it}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(it,g,et,ot){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(it){}function shouldDeprioritizeSubtree(it,g){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,noTimeout=-1;function shouldSetTextContent(it,g){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!0,supportsMutation=!0;function appendChild(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function appendChildToContainer(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function insertBefore(it,g,et){g._remove(),it.add(g),g.setZIndex(et.getZIndex()),updatePicture(it)}function insertInContainerBefore(it,g,et){insertBefore(it,g,et)}function removeChild(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function removeChildFromContainer(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function commitTextUpdate(it,g,et){console.error(`Text components are not yet supported in ReactKonva. You text is: "${et}"`)}function commitMount(it,g,et){}function commitUpdate(it,g,et,ot,ct){applyNodeProps(it,ct,ot)}function hideInstance(it){it.hide(),updatePicture(it)}function hideTextInstance(it){}function unhideInstance(it,g){(g.visible==null||g.visible)&&it.show()}function unhideTextInstance(it,g){}function clearContainer(it){}function detachDeletedInstance(){}const getCurrentEventPriority=()=>constantsExports.DefaultEventPriority,HostConfig=Object.freeze(Object.defineProperty({__proto__:null,appendChild,appendChildToContainer,appendInitialChild,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,noTimeout,now:schedulerExports.unstable_now,prepareForCommit,preparePortalMount,prepareUpdate,removeChild,removeChildFromContainer,resetAfterCommit,resetTextContent,run:schedulerExports.unstable_runWithPriority,scheduleTimeout,shouldDeprioritizeSubtree,shouldSetTextContent,supportsMutation,unhideInstance,unhideTextInstance,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(it,g,et)=>g in it?__defProp(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,__spreadValues=(it,g)=>{for(var et in g||(g={}))__hasOwnProp.call(g,et)&&__defNormalProp(it,et,g[et]);if(__getOwnPropSymbols)for(var et of __getOwnPropSymbols(g))__propIsEnum.call(g,et)&&__defNormalProp(it,et,g[et]);return it},__spreadProps=(it,g)=>__defProps(it,__getOwnPropDescs(g)),_a,_b;typeof window<"u"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(it,g,et){if(!it)return;if(et(it)===!0)return it;let ot=g?it.return:it.child;for(;ot;){const ct=traverseFiber(ot,g,et);if(ct)return ct;ot=g?null:ot.sibling}}function wrapContext(it){try{return Object.defineProperties(it,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return it}}const error=console.error;console.error=function(){const it=[...arguments].join("");if(it!=null&&it.startsWith("Warning:")&&it.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const it=reactExports.useContext(FiberContext);if(it===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const g=reactExports.useId();return reactExports.useMemo(()=>{for(const ot of[it,it==null?void 0:it.alternate]){if(!ot)continue;const ct=traverseFiber(ot,!1,ut=>{let dt=ut.memoizedState;for(;dt;){if(dt.memoizedState===g)return!0;dt=dt.next}});if(ct)return ct}},[it,g])}function useContextMap(){const it=useFiber(),[g]=reactExports.useState(()=>new Map);g.clear();let et=it;for(;et;){if(et.type&&typeof et.type=="object"){const ct=et.type._context===void 0&&et.type.Provider===et.type?et.type:et.type._context;ct&&ct!==FiberContext&&!g.has(ct)&&g.set(ct,reactExports.useContext(wrapContext(ct)))}et=et.return}return g}function useContextBridge(){const it=useContextMap();return reactExports.useMemo(()=>Array.from(it.keys()).reduce((g,et)=>ot=>reactExports.createElement(g,null,reactExports.createElement(et.Provider,__spreadProps(__spreadValues({},ot),{value:it.get(et)}))),g=>reactExports.createElement(FiberProvider,__spreadValues({},g))),[it])}function usePrevious(it){const g=React$2.useRef({});return React$2.useLayoutEffect(()=>{g.current=it}),React$2.useLayoutEffect(()=>()=>{g.current={}},[]),g.current}const StageWrap=it=>{const g=React$2.useRef(null),et=React$2.useRef(null),ot=React$2.useRef(null),ct=usePrevious(it),ut=useContextBridge(),dt=ft=>{const{forwardedRef:St}=it;St&&(typeof St=="function"?St(ft):St.current=ft)};return React$2.useLayoutEffect(()=>(et.current=new Konva.Stage({width:it.width,height:it.height,container:g.current}),dt(et.current),ot.current=KonvaRenderer.createContainer(et.current,constantsExports.LegacyRoot,!1,null),KonvaRenderer.updateContainer(React$2.createElement(ut,{},it.children),ot.current),()=>{Konva.isBrowser&&(dt(null),KonvaRenderer.updateContainer(null,ot.current,null),et.current.destroy())}),[]),React$2.useLayoutEffect(()=>{dt(et.current),applyNodeProps(et.current,it,ct),KonvaRenderer.updateContainer(React$2.createElement(ut,{},it.children),ot.current,null)}),React$2.createElement("div",{ref:g,id:it.id,accessKey:it.accessKey,className:it.className,role:it.role,style:it.style,tabIndex:it.tabIndex,title:it.title})},Layer="Layer",Rect="Rect",Ellipse="Ellipse",Text$1="Text",Arrow="Arrow",Transformer="Transformer",KonvaRenderer=ReactFiberReconciler(HostConfig);KonvaRenderer.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:React$2.version,rendererPackageName:"react-konva"});const Stage=React$2.forwardRef((it,g)=>React$2.createElement(FiberProvider,{},React$2.createElement(StageWrap,{...it,forwardedRef:g})));function PDFOverlayCanvas({shapes:it,setShapes:g}){var Ft,$t,zt,Kt,Bt,Ut,Jt,en,tn;const et=reactExports.useRef(null),ot=reactExports.useRef(null),[ct,ut]=reactExports.useState({width:0,height:0}),[dt,ft]=reactExports.useState(null),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{const nn=()=>{g([])};return window.addEventListener("clearCanvasShapes",nn),()=>window.removeEventListener("clearCanvasShapes",nn)},[g]),reactExports.useEffect(()=>{function nn(){if(!et.current)return;const{clientWidth:rn,clientHeight:on}=et.current;ut({width:rn,height:on})}return nn(),window.addEventListener("resize",nn),()=>window.removeEventListener("resize",nn)},[]),reactExports.useEffect(()=>{const nn=rn=>Tt(rn.detail);return window.addEventListener("addShape",nn),()=>window.removeEventListener("addShape",nn)},[it]),reactExports.useEffect(()=>{const nn=rn=>{var mn;const{id:on}=rn.detail,dn=(mn=ot.current)==null?void 0:mn.getStage();if(!dn)return;const cn=dn.findOne(`#${on}`);if(!cn)return;const fn={target:cn};cn.fire("dblclick",fn)};return window.addEventListener("autoEditText",nn),()=>window.removeEventListener("autoEditText",nn)},[]),reactExports.useEffect(()=>{const nn=localStorage.getItem("cre8tly_canvas_shapes");if(nn)try{g(JSON.parse(nn)),console.log("✅ Restored saved shapes from localStorage")}catch(rn){console.error("⚠️ Failed to parse saved shapes:",rn)}},[]),reactExports.useEffect(()=>{it.length>0?localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it)):localStorage.removeItem("cre8tly_canvas_shapes")},[it]);const Tt=nn=>{const rn={id:`shape-${Date.now()}`,x:100+it.length*30,y:100+it.length*30,draggable:!0,fill:"rgba(0,128,255,0.25)",stroke:"transparent",strokeWidth:0,opacity:.8,type:nn};let on;switch(nn){case"circle":on={...rn,radius:50};break;case"arrow":on={...rn,points:[0,0,150,0],pointerLength:15,pointerWidth:15,strokeWidth:3,stroke:"#00b4ff",fill:"#00b4ff",hitStrokeWidth:20};break;case"text":on={...rn,text:"Click to edit",fontSize:18,isEditing:!0};break;default:on={...rn,width:160,height:100,cornerRadius:0}}g(dn=>[...dn,on]),ft(on.id),kt(!0),nn==="text"&&setTimeout(()=>{const dn=new CustomEvent("autoEditText",{detail:{id:on.id}});window.dispatchEvent(dn)},100)},jt=()=>{dt&&(g(nn=>nn.filter(rn=>rn.id!==dt)),ft(null),kt(!1))},Rt=nn=>{g(rn=>{const on=rn.map(dn=>dn.id===dt?{...dn,...nn}:dn);return localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(on)),on})};return reactExports.useEffect(()=>{var dn,cn;const nn=ot.current;if(!nn)return;const rn=nn.getStage(),on=dt?rn.findOne(`#${dt}`):null;on?(nn.nodes([on]),(dn=nn.getLayer())==null||dn.batchDraw()):(nn.nodes([]),(cn=nn.getLayer())==null||cn.batchDraw())},[dt,it]),reactExports.useEffect(()=>{localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it))},[it]),jsxRuntimeExports.jsxs("div",{ref:et,className:"absolute inset-0 pointer-events-auto",style:{zIndex:25},children:[ct.width>0&&jsxRuntimeExports.jsx(Stage,{width:ct.width,height:ct.height,className:"absolute inset-0",style:{pointerEvents:"auto",background:"transparent"},onMouseDown:nn=>{nn.target===nn.target.getStage()&&(ft(null),kt(!1))},children:jsxRuntimeExports.jsxs(Layer,{children:[it.map(nn=>{const rn=dt===nn.id,on=nn.stroke||"#000000";switch(nn.type){case"circle":return jsxRuntimeExports.jsx(Ellipse,{id:nn.id.toString(),...nn,radiusX:nn.radiusX??nn.radius,radiusY:nn.radiusY??nn.radius,stroke:on,shadowEnabled:rn,shadowColor:"#00b4ff",shadowBlur:rn?10:0,shadowOpacity:rn?.8:0,onClick:()=>{ft(nn.id),kt(!0)},draggable:!0,onDragEnd:dn=>{const{x:cn,y:fn}=dn.target.position();Rt({x:cn,y:fn})},onTransformEnd:dn=>{const cn=dn.target,fn=cn.scaleX(),mn=cn.scaleY();Rt({x:cn.x(),y:cn.y(),radiusX:(nn.radiusX??nn.radius)*fn,radiusY:(nn.radiusY??nn.radius)*mn,rotation:cn.rotation()}),cn.scaleX(1),cn.scaleY(1)}},nn.id);case"arrow":return jsxRuntimeExports.jsx(Arrow,{id:nn.id.toString(),...nn,stroke:on,fill:on,shadowEnabled:rn,shadowColor:"#00b4ff",shadowBlur:rn?10:0,shadowOpacity:rn?.8:0,onClick:()=>{ft(nn.id),kt(!0)},draggable:!0,onDragEnd:dn=>{const{x:cn,y:fn}=dn.target.position();Rt({x:cn,y:fn})},onTransformEnd:dn=>{const cn=dn.target;Rt({x:cn.x(),y:cn.y(),scaleX:cn.scaleX(),scaleY:cn.scaleY()}),cn.scaleX(1),cn.scaleY(1)}},nn.id);case"text":return jsxRuntimeExports.jsx(Text$1,{id:nn.id.toString(),...nn,stroke:on,fill:nn.fill,shadowEnabled:rn,shadowColor:"#00b4ff",shadowBlur:rn?10:0,shadowOpacity:rn?.8:0,draggable:!nn.isEditing,listening:!0,onClick:()=>{ft(nn.id),kt(!0)},onDblClick:dn=>{const cn=dn.target,fn=cn.getStage(),mn=cn.getLayer(),En=fn.container().getBoundingClientRect(),Sn=cn.absolutePosition(),wn=cn.getAbsoluteScale().x,hn=cn.getAbsoluteScale().y;cn.visible(!1),mn.batchDraw();const yn=document.createElement("textarea");document.body.appendChild(yn),yn.value=cn.text(),yn.value.trim()==="Click to edit"&&(yn.value=""),yn.style.position="absolute",yn.style.top=`${En.top+Sn.y}px`,yn.style.left=`${En.left+Sn.x}px`,yn.style.width=`${cn.width()*wn}px`,yn.style.height=`${cn.height()*hn}px`,yn.style.fontSize=`${cn.fontSize()*hn}px`,yn.style.lineHeight=cn.lineHeight(),yn.style.fontFamily=cn.fontFamily(),yn.style.fontStyle=cn.fontStyle(),yn.style.fontWeight=cn.fontStyle().includes("bold")?"bold":"normal",yn.style.textAlign=cn.align(),yn.style.color=cn.fill(),yn.style.border="none",yn.style.margin="0",yn.style.padding="0",yn.style.background="transparent",yn.style.outline="none",yn.style.overflow="hidden",yn.style.resize="none",yn.style.whiteSpace="pre-wrap",yn.style.transformOrigin="left top",yn.style.zIndex=9999,yn.style.caretColor=cn.fill();const an=cn.rotation();yn.style.transform=`rotate(${an}deg)`,yn.focus();const un=()=>{yn.style.height="auto",yn.style.height=`${yn.scrollHeight}px`};un(),yn.addEventListener("input",un),yn.addEventListener("input",()=>{const pn=yn.value;g(kn=>{const _n=kn.findIndex(Nn=>Nn.id===cn.id());if(_n===-1)return kn;const Rn=[...kn];return Rn[_n]={...Rn[_n],text:pn},localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(Rn)),Rn})});const bn=()=>{const pn=yn.value.trim()||"Click to edit";g(kn=>{const _n=kn.map(Rn=>Rn.id===cn.id()?{...Rn,text:pn}:Rn);return localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(_n)),_n}),document.body.removeChild(yn),cn.visible(!0),mn.batchDraw()};yn.addEventListener("blur",bn),yn.addEventListener("keydown",pn=>{pn.key==="Enter"&&!pn.shiftKey?(pn.preventDefault(),bn()):pn.key==="Escape"&&(document.body.removeChild(yn),cn.visible(!0),mn.batchDraw())})},onTransformEnd:dn=>{const cn=dn.target;Rt({x:cn.x(),y:cn.y(),rotation:cn.rotation(),scaleX:cn.scaleX(),scaleY:cn.scaleY()}),cn.scaleX(1),cn.scaleY(1)}},nn.id);default:return jsxRuntimeExports.jsx(Rect,{id:nn.id.toString(),...nn,cornerRadius:nn.cornerRadius||0,stroke:on,shadowEnabled:rn,shadowColor:"#00b4ff",shadowBlur:rn?10:0,shadowOpacity:rn?.8:0,onClick:()=>{ft(nn.id),kt(!0)},draggable:!0,onDragEnd:dn=>{const{x:cn,y:fn}=dn.target.position();Rt({x:cn,y:fn})},onTransformEnd:dn=>{const cn=dn.target,fn=cn.scaleX(),mn=cn.scaleY(),En=Math.max(20,cn.width()*fn),Sn=Math.max(20,cn.height()*mn);Rt({x:cn.x(),y:cn.y(),width:En,height:Sn,rotation:cn.rotation(),cornerRadius:nn.cornerRadius?Math.min(En,Sn)*.1:0}),cn.scaleX(1),cn.scaleY(1)}},nn.id)}}),jsxRuntimeExports.jsx(Transformer,{ref:ot,rotateEnabled:!0,resizeEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],anchorCornerRadius:50,anchorSize:5,anchorStroke:"#00b4ff",anchorStrokeWidth:.5,anchorFill:"#ffffff",anchorStrokeEnabled:!0,anchorFillEnabled:!0,borderStroke:"#00b4ff",borderStrokeWidth:1.5,borderDash:[3,3],ignoreStroke:!1,boundBoxFunc:(nn,rn)=>rn.width<20||rn.height<20?nn:rn})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:St&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute bottom-4 right-4 z-50 bg-[#111]/90 backdrop-blur-md border border-gray-700/60 rounded-xl p-4 flex flex-col gap-3 shadow-xl w-64",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-sm",children:"Shape Properties"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:((Ft=it.find(nn=>nn.id===dt))==null?void 0:Ft.fill)||"#000000",onChange:nn=>Rt({fill:nn.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer",title:"Fill Color"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:(($t=it.find(nn=>nn.id===dt))==null?void 0:$t.fill)||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Stroke"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:((zt=it.find(nn=>nn.id===dt))==null?void 0:zt.stroke)||"#000000",onChange:nn=>Rt({stroke:nn.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer",title:"Stroke Color"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:((Kt=it.find(nn=>nn.id===dt))==null?void 0:Kt.stroke)||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.01",value:((Bt=it.find(nn=>nn.id===dt))==null?void 0:Bt.strokeWidth)||2,onChange:nn=>Rt({strokeWidth:parseFloat(nn.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(((Ut=it.find(nn=>nn.id===dt))==null?void 0:Ut.strokeWidth)||0).toFixed(1)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:((Jt=it.find(nn=>nn.id===dt))==null?void 0:Jt.opacity)??1,onChange:nn=>Rt({opacity:parseFloat(nn.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(((en=it.find(nn=>nn.id===dt))==null?void 0:en.opacity)??1).toFixed(2)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Rounded Corners"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!((tn=it.find(nn=>nn.id===dt))!=null&&tn.cornerRadius),onChange:nn=>{var on,dn;const rn=nn.target.checked;Rt({cornerRadius:rn?Math.min(((on=it.find(cn=>cn.id===dt))==null?void 0:on.width)||0,((dn=it.find(cn=>cn.id===dt))==null?void 0:dn.height)||0)*.1:0})},className:"accent-blue w-4 h-4 cursor-pointer"})]}),jsxRuntimeExports.jsx("button",{onClick:jt,className:"self-end mt-2 p-1 bg-white text-white rounded-md flex items-center justify-center transition-all duration-150",title:"Delete shape",children:jsxRuntimeExports.jsx(Trash2,{className:"text-red-600",size:16})})]})})]})}function isDarkColor(it){if(!it)return!1;const g=it.replace("#",""),et=parseInt(g.length===3?g[0]+g[0]:g.substring(0,2),16),ot=parseInt(g.length===3?g[1]+g[1]:g.substring(2,4),16),ct=parseInt(g.length===3?g[2]+g[2]:g.substring(4,6),16);return(.299*et+.587*ot+.114*ct)/255<.5}function embedShapesIntoHTML(it,g){if(!g||!g.length)return it;const ot=`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;"
  id="cre8tly-overlay-svg">
  <defs>
    <marker id="cre8tly-arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="currentColor" />
    </marker>
  </defs>
  ${g.map(ct=>{var ut;switch(ct.type){case"rect":const dt=ct.cornerRadius?`rx="${ct.cornerRadius}" ry="${ct.cornerRadius}"`:"";return`<rect x="${ct.x}" y="${ct.y}" width="${ct.width}" height="${ct.height}" 
          fill="${ct.fill||"transparent"}" stroke="${ct.stroke||"transparent"}"
          stroke-width="${ct.strokeWidth||1}" opacity="${ct.opacity||1}" ${dt} />`;case"circle":return`<ellipse cx="${ct.x}" cy="${ct.y}" rx="${ct.radiusX||ct.radius}" ry="${ct.radiusY||ct.radius}"
          fill="${ct.fill||"transparent"}" stroke="${ct.stroke||"transparent"}"
          stroke-width="${ct.strokeWidth||1}" opacity="${ct.opacity||1}" />`;case"arrow":const[ft,St]=((ut=ct.points)==null?void 0:ut.slice(-2))||[100,0];return`<line x1="${ct.x}" y1="${ct.y}" x2="${ct.x+ft}" y2="${ct.y+St}"
          stroke="${ct.stroke||"#000"}" stroke-width="${ct.strokeWidth||2}"
          marker-end="url(#cre8tly-arrowhead)" opacity="${ct.opacity||1}" />`;case"text":return`<text x="${ct.x}" y="${ct.y}" font-size="${ct.fontSize||18}"
          font-family="${ct.fontFamily||"Arial"}" fill="${ct.fill||"#000"}"
          opacity="${ct.opacity||1}">${ct.text||""}</text>`;default:return""}}).join(`
`)}
</svg>`;return it.includes("</body>")?it.replace("</body>",`${ot}</body>`):it+ot}function EditorModal({leadMagnetId:it,open:g,onClose:et,onCommitted:ot}){var En,Sn,wn;const[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(null),[Tt,jt]=reactExports.useState(""),[Rt,Ft]=reactExports.useState(""),[$t,zt]=reactExports.useState("#fff330"),[Kt,Bt]=reactExports.useState(!1),[Ut,Jt]=reactExports.useState([]),en=hn=>{const yn=hn.target.value;if(zt(yn),!nn)return;nn.chain().focus().updateAttributes("highlight",{color:yn}).run(),nn.chain().focus().setHighlight({color:yn}).run()},tn=reactExports.useRef(null),nn=useEditor({extensions:[index_default$7,index_default,index_default$3.configure({multicolor:!0})],content:"",editable:!0});reactExports.useEffect(()=>{!g||!it||(async()=>{const hn=await startLeadMagnetEdit(it);ut(hn.token),kt(hn.meta),jt(hn.editableHtml||""),nn==null||nn.commands.setContent(hn.editableHtml||"")})().catch(et)},[g,it,nn]);async function rn(){ft(!0);try{const hn=(nn==null?void 0:nn.getHTML())||Tt,yn=JSON.parse(localStorage.getItem("cre8tly_canvas_shapes")||"[]"),an=embedShapesIntoHTML(hn,yn),un=await commitLeadMagnetEdit(it,ct,an);localStorage.removeItem("cre8tly_canvas_shapes"),ot(un.pdf_url),et()}finally{ft(!1)}}reactExports.useEffect(()=>{if(Tt){const hn=new Blob([Tt],{type:"text/html"}),yn=URL.createObjectURL(hn);return Ft(yn),()=>URL.revokeObjectURL(yn)}},[Tt]),reactExports.useEffect(()=>{var yn,an,un;const hn=((yn=tn.current)==null?void 0:yn.contentDocument)||((un=(an=tn.current)==null?void 0:an.contentWindow)==null?void 0:un.document);hn&&hn.documentElement.style.setProperty("--hl",$t||"#fff330")},[$t,Rt]),reactExports.useEffect(()=>{var Nn,Cn,Mn,In,On;const hn=((Nn=tn.current)==null?void 0:Nn.contentDocument)||((Mn=(Cn=tn.current)==null?void 0:Cn.contentWindow)==null?void 0:Mn.document);if(!hn)return;const yn=((In=St==null?void 0:St.bgTheme)==null?void 0:In.toLowerCase())||"",an=(((On=colorThemes[yn])==null?void 0:On.background)||"#ffffff").trim(),pn=["dark","royal","navy","graphite","purple","lavender"].includes(yn)||isDarkColor(an)?"#ffffff":"#000000";hn.documentElement.style.setProperty("--text-color",pn),hn.documentElement.style.setProperty("--hl",$t||"#fff330"),hn.documentElement.style.setProperty("--hl-text","#000000");const kn=hn.getElementById("color-fix");kn&&kn.remove();const _n=hn.createElement("style");_n.id="color-fix",_n.innerHTML=`
    body, .page-inner, .page, .cover-page,
    h1, h2, h3, h4, h5, h6,
    p, div, span, strong, b, em, li {
      color: var(--text-color, ${pn}) !important;
      -webkit-text-fill-color: var(--text-color, ${pn}) !important;
    }
  `,hn.head.appendChild(_n);const Rn=hn.defaultView.getComputedStyle(hn.body).color;console.log("✅ Computed color in iframe body:",Rn)},[St==null?void 0:St.bgTheme,$t,Rt]),reactExports.useEffect(()=>{var un;const hn=tn.current;if(!hn||!(St!=null&&St.theme))return;const yn=fontThemes[(un=St.theme)==null?void 0:un.toLowerCase()];if(!yn)return;const an=async()=>{var pn;const bn=hn.contentDocument;if(!(!bn||!bn.body))try{const kn=(((pn=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:pn.background)||"#ffffff").trim(),_n=isDarkColor(kn);bn.documentElement.style.setProperty("--text-color",_n?"#ffffff":"#000000"),bn.documentElement.style.setProperty("--hl",$t||"#fff330"),bn.documentElement.style.setProperty("--hl-text","#000000");const Nn=await(await fetch(`https://cre8tlystudio.com${yn.file}`)).arrayBuffer(),Cn=btoa(new Uint8Array(Nn).reduce((Gn,Jn)=>Gn+String.fromCharCode(Jn),"")),Mn=bn.createElement("style");Mn.id="custom-font-style",Mn.innerHTML=`
        @font-face {
          font-family: '${yn.name}';
          src: url(data:font/ttf;base64,${Cn}) format('truetype');
        }
        html, body, .page, .page-inner, .formatted-content,
        p, h1, h2, h3, h4, h5, h6, div, span, li {
          font-family: '${yn.name}', sans-serif !important;
        }
      `,bn.head.appendChild(Mn);const In=bn.createElement("style");In.id="responsive-width-fix",In.innerHTML=`
  html, body {
    width: 100% !important;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Let the main page adapt naturally */
  .page, .page-inner {
    width: 100% !important;
    max-width: 667px !important; /* keep backend alignment on desktop */
    margin: 0 auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  .cover-page {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  width: 100% !important;
  background: transparent !important;
}

.cover-page .cover-img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  float: none !important;
}

.footer-link {
  margin-top: 60px !important;
  margin-bottom: 40px !important;
  text-align: center !important;
  padding-bottom: 40px !important;
}

.footer-link p {
  margin-bottom: 20px !important;
  font-size: 1.1rem !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

.footer-link .link-button {
  display: inline-block !important;
  padding: 12px 28px !important;
  border-radius: 30px !important;
  color: white !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  border: 2px solid white !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.25) !important;
}

.footer-link .link-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  /* Typography adjusts only if viewport is small */
  @media (max-width: 768px) {
    body {
      font-size: 90% !important; /* small font scaling only */
      line-height: 1.6 !important;
    }
    h1, h2, h3 {
      line-height: 1.3 !important;
      word-break: break-word !important;
    }
    img {
    display: block !important;
    margin: 0 auto !important;      /* ✅ centers images horizontally */
    max-width: 100% !important;
    height: auto !important;
    float: none !important;         /* ✅ removes any old float rules */
  }

  .cover-page {
    padding: 0 !important;
    margin-bottom: 1rem !important;
  }
  .cover-page .cover-img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
  }
      .footer-link {
    margin-top: 40px !important;
    margin-bottom: 30px !important;
    padding-bottom: 2rem !important;
  }
  .footer-link .link-button {
    font-size: 1rem !important;
  }
    pre {
  background-color: #0f0f0f;
  color: #f5f5f5;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  overflow-x: auto;
  margin: 0 0 1.5rem 0; /* remove top margin, only keep bottom spacing */
  white-space: pre-wrap;
  page-break-inside: avoid; /* keeps the block from splitting across PDF pages */
  box-decoration-break: clone;
}

pre + pre {
  margin-top: -0.25rem; /* closes any hairline gap between stacked blocks */
}

code {
  background-color: #1a1a1a;
  color: #00ff80;
  padding: 0.2rem 0.4rem;
  border-radius: 5px;
  font-family: "Courier New", monospace;
  font-size: 0.85rem;
}

/* Optional — better color contrast for multi-line snippets */
pre code {
  background: transparent; /* removes duplicate block background */
  color: #f5f5f5;
}
  }
`,bn.head.appendChild(In);const On=bn.createElement("style");On.id="dark-preview-text",On.innerHTML=`
  /* 🧠 Only affect text, not the background */
  body, .page-inner, p, span, div, li, strong, b, h1, h2, h3, h4, h5, h6 {
  color: var(--text-color) !important;
  -webkit-text-fill-color: var(--text-color) !important;
}

  /* Keep background untouched (retain the original white page color) */
  .page, .cover-page {
    background-color: inherit !important;
  }

  /* Highlight and links remain readable */
  a {
    color: #4FC3F7 !important;
  }
  mark {
  background-color: var(--hl, #fff330) !important;
  color: var(--hl-text, #000000) !important;
  -webkit-text-fill-color: var(--hl-text, #000000) !important;
  border-radius: 2px;
  padding: 0 2px;
}
`,bn.head.appendChild(On),bn.documentElement.style.setProperty("--hl",typeof $t=="string"&&$t?$t:"#fff330");const jn=bn.body.innerHTML;bn.body.innerHTML=jn,console.log("🎯 Font applied & body refreshed:",yn.name),console.log("🧱 BODY HTML:",bn.body.innerHTML.slice(0,500))}catch(kn){console.error("⚠️ Font apply failed:",kn)}};return hn.addEventListener("load",an),()=>hn.removeEventListener("load",an)},[St==null?void 0:St.theme,Rt]),reactExports.useEffect(()=>{if(!nn||!tn.current)return;const hn=tn.current,yn=()=>{var bn;if(!(hn.contentDocument||((bn=hn.contentWindow)==null?void 0:bn.document)))return;const un=()=>{var pn;try{const kn=hn.contentDocument||((pn=hn.contentWindow)==null?void 0:pn.document);if(!kn)return;let _n=nn.getHTML();_n=_n.replace(/<img[^>]+unsplash[^>]+>/gi,""),_n=_n.replace(/<img[^>]+base64[^>]+>/gi,"");const Rn=kn.querySelector(".page-inner");Rn?(Rn.innerHTML=_n,console.log("🔄 Updated .page-inner content live (cleaned images)")):console.warn("⚠️ .page-inner not found in iframe")}catch(kn){console.error("⚠️ Failed to update iframe:",kn)}};return nn.on("update",un),console.log("✅ Live preview handler attached after iframe load"),()=>nn.off("update",un)};return hn.addEventListener("load",yn),()=>{hn.removeEventListener("load",yn)}},[nn,Rt]);const[on,dn]=reactExports.useState(""),[cn,fn]=reactExports.useState("");function mn(){if(!nn||!on)return;const hn=nn.getHTML(),yn=on.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),an=new RegExp(yn,"gi"),un=hn.replace(an,cn);nn.commands.setContent(un),toast.success(`Replaced all "${on}" with "${cn}"`)}return jsxRuntimeExports.jsxs(yt,{open:g,onClose:et,className:"fixed inset-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:jsxRuntimeExports.jsxs(je,{className:"w-full max-w-[1650px] bg-[#0f0f10] rounded-2xl p-4 sm:p-6 shadow-2xl flex flex-col gap-4 sm:gap-6 overflow-y-auto max-h-[95vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center mb-2 gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{localStorage.removeItem("cre8tly_canvas_shapes"),Jt([]),window.dispatchEvent(new CustomEvent("clearCanvasShapes")),console.log("🧼 Cleared all overlay shapes")},className:"mt-2 text-xs text-gray-400 hover:text-red-400 transition",children:"Clear Design"}),Kt&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-[#2a2a2a]/90 backdrop-blur-md border border-gray-700/60 rounded-xl px-4 py-2 shadow-lg",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("addShape",{detail:"rect"})),className:"w-8 h-8 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Rectangle",children:jsxRuntimeExports.jsx(Square,{size:18,className:"text-hotPink"})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("addShape",{detail:"circle"})),className:"w-8 h-8 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Circle",children:jsxRuntimeExports.jsx(Circle$1,{size:18,className:"text-hotPink"})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("addShape",{detail:"arrow"})),className:"w-8 h-8 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Arrow",children:jsxRuntimeExports.jsx(ArrowRight,{size:18,className:"text-hotPink"})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("addShape",{detail:"text"})),className:"w-8 h-8 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Text",children:jsxRuntimeExports.jsx(Type,{size:18,className:"text-hotPink"})})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Bt(!Kt),className:`px-3 py-2 rounded-md ${Kt?"bg-royalPurple":"bg-gray-600"} text-white`,children:Kt?"Exit Design Mode":"Design Mode"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex-1 bg-white text-black rounded-xl overflow-y-auto min-h-[50vh] lg:h-[70vh]",children:jsxRuntimeExports.jsx(EditorContent,{editor:nn})}),jsxRuntimeExports.jsxs("div",{className:"w-full flex-1 relative min-h-[50vh] lg:h-[70vh] rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("iframe",{ref:tn,title:"preview",src:Rt,className:"w-full flex-1 border border-gray-800 rounded-xl overflow-hidden min-h-[50vh] lg:h-[70vh]",sandbox:"allow-same-origin allow-popups allow-forms allow-scripts",style:{width:"100%",borderRadius:"0.75rem",background:((En=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:En.background)||"#fff",color:["dark","royal","navy","graphite","purple","lavender"].includes(((wn=(Sn=St==null?void 0:St.bgTheme)==null?void 0:Sn.toLowerCase)==null?void 0:wn.call(Sn))||"")?"#ffffff":"#000000"}}),Kt&&jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:Ut,setShapes:Jt})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between border border-gray-800 rounded-lg p-3 bg-[#1b1b1b]",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Find...",value:on,onChange:hn=>dn(hn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Replace with...",value:cn,onChange:hn=>fn(hn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("button",{onClick:mn,disabled:!on,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:"Replace All"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Highlight color:"}),jsxRuntimeExports.jsx("input",{type:"color",value:$t,onInput:en,className:"w-9 h-9 rounded-lg cursor-pointer  shadow-inner shadow-black/40 bg-[#1a1a1a] hover:scale-105 transition-transform duration-150"}),jsxRuntimeExports.jsx("button",{onClick:()=>nn.chain().focus().toggleHighlight({color:$t}).run(),className:"px-5 py-2.5 rounded-lg bg-[#1e1e1e] text-white font-medium border border-gray-700 hover:border-emerald-400 hover:text-emerald-300 transition-all duration-200 shadow-sm",children:"Highlight"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2 w-full",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-gray-700 rounded-lg w-full sm:w-auto",onClick:et,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-green rounded-lg disabled:opacity-50 text-black w-full sm:w-auto",disabled:dt,onClick:rn,children:dt?"Reprinting...":"Commit Edit"})]})]})})]})}function MagnetGrid({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var jt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!Array.isArray(kt)||kt.length===0)return null;function Tt(Rt){dt(!1),g(ft,Rt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:[kt.map(Rt=>{var Ft,$t,zt;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl -z-10 transition-all",animate:{opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl flex items-center justify-center overflow-hidden border border-gray-700 relative",children:[Rt.cover_image?jsxRuntimeExports.jsx("img",{src:Rt.cover_image,alt:Rt.title||"Lead Magnet Cover",className:"object-cover w-full h-full rounded-xl transition-transform duration-300 group-hover:scale-105"}):Rt.pdf_url?jsxRuntimeExports.jsx("img",{src:`https://cre8tlystudio.com/api/preview/${Rt.id}`,alt:Rt.title,className:"object-cover w-full h-full rounded-xl opacity-80"}):jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs italic",children:"No Preview"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",Rt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold mt-2 truncate",children:Rt.title||"Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[Rt.theme?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-[10px] font-semibold capitalize",style:{background:((Ft=themeStyles[Rt.theme])==null?void 0:Ft.background)||"#333",color:(($t=themeStyles[Rt.theme])==null?void 0:$t.color)||"#fff",border:((zt=themeStyles[Rt.theme])==null?void 0:zt.border)||"none"},children:Rt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"N/A"}),Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs font-semibold text-center",children:Rt.status==="completed"?jsxRuntimeExports.jsx("span",{className:"bg-black text-green border border-green px-3 py-[3px] rounded-full",children:"Completed"}):Rt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Rt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"building..."]}):jsxRuntimeExports.jsx("span",{className:"bg-black text-purple border border-white px-4 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-[11px] text-gray-400 text-center",children:Rt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Rt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Rt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(Rt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(Rt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rt.edit_used||et(Rt.id)},disabled:Rt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${Rt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${Rt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:Rt.edit_used?"Closed":"Edit"})]})]})]})]},Rt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((jt=kt.find(Rt=>Rt.pdf_url===ot))==null?void 0:jt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function CustomerDashboard(){const{user:it,accessToken:g,refreshUser:et}=useAuth(),{magnets:ot,setMagnets:ct,fetchMagnets:ut,loading:dt}=useMagnets(),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[jt,Rt]=reactExports.useState(null),[Ft,$t]=reactExports.useState(1),[zt,Kt]=reactExports.useState(!1),[Bt,Ut]=reactExports.useState(0),[Jt,en]=reactExports.useState("lead_magnet"),[tn,nn]=reactExports.useState(0);function rn(){dn(null),setTimeout(()=>nn(Rn=>Rn+1),100)}const[on,dn]=reactExports.useState(null);function cn(Rn){dn(Rn)}const fn=(ot.magnets||[]).find(Rn=>Rn.id===on),mn=useLocation(),En=useNavigate(),Sn=10;if(typeof window<"u"){const Rn=new URLSearchParams(mn.search);Rn.get("session_id")&&(console.log("✅ Stripe checkout success:",Rn.get("session_id")),ut(),window.history.replaceState({},document.title,"/dashboard"))}function wn(Rn,Nn,Cn){ct(Mn=>{const In=(Mn.magnets||[]).map(On=>On.id===Rn?{...On,prompt:Nn,status:"pending",theme:Cn}:On);return{...Mn,magnets:In}}),setTimeout(ut,3e3)}function hn(){En("/plans")}const an=[...(ot==null?void 0:ot.magnets)||[]].sort((Rn,Nn)=>(Rn.slot_number||0)-(Nn.slot_number||0)),un=Math.ceil(an.length/Sn),bn=(Ft-1)*Sn,pn=an.slice(bn,bn+Sn);function kn(Rn,Nn="lead_magnet"){Rt(Rn),en(Nn),Tt(!0)}async function _n(){try{await et(),await ut()}catch(Rn){console.error("Failed to refresh user slots:",Rn)}}return reactExports.useEffect(()=>{it!=null&&it.has_book&&!(it!=null&&it.has_magnet)&&En("/books")},[it]),jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"magnet",items:ot.magnets||[],summary:ot.summary||{},onCheckout:hn}),dt?jsxRuntimeExports.jsx(LoadingState,{}):ot.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:hn,type:"magnet"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MagnetGrid,{magnets:pn,onAddPrompt:kn,onOpenEditor:cn}),jsxRuntimeExports.jsx(MagnetCardList,{magnets:pn,onAddPrompt:kn,onOpenEditor:cn}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:Ft,totalPages:un,onPageChange:$t}),jsxRuntimeExports.jsx(SupportTab,{})]}),jt&&jsxRuntimeExports.jsx(PromptModal,{isOpen:kt,onClose:()=>Tt(!1),magnetId:jt,accessToken:g,contentType:Jt,setShowGenerating:Kt,setProgress:Ut,onSubmitted:wn}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:ft,onClose:()=>St(!1),onRefresh:_n,isFirstTime:ot.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:zt,progress:Bt,type:"lead"}),jsxRuntimeExports.jsx(EditorModal,{leadMagnetId:on,open:!!on,onClose:rn,onCommitted:Rn=>ut(),bgTheme:(fn==null?void 0:fn.bg_theme)||"modern"},tn)]})})}function AdminDashboard(){const{accessToken:it}=useAuth(),[g,et]=reactExports.useState([]);return reactExports.useEffect(()=>{async function ot(){try{const ct=await axios$1.get("https://cre8tlystudio.com/api/lead-magnets/all",{headers:{Authorization:`Bearer ${it}`}});et(ct.data)}catch(ct){console.error("Error fetching all lead magnets:",ct)}}ot()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"All Lead Magnets"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.map(ot=>jsxRuntimeExports.jsxs("li",{className:"bg-charcoal p-4 rounded-lg text-white",children:[jsxRuntimeExports.jsxs("p",{children:["User: ",ot.user_id]}),jsxRuntimeExports.jsxs("p",{children:["Prompt: ",ot.prompt]}),jsxRuntimeExports.jsxs("p",{children:["Status: ",jsxRuntimeExports.jsx("span",{className:"text-green",children:ot.status})]})]},ot.id))})]})}function Contact(){const[it,g]=reactExports.useState({name:"",email:"",subject:"",message:""}),[et,ot]=reactExports.useState(!1),ct=dt=>{g({...it,[dt.target.name]:dt.target.value})},ut=async dt=>{dt.preventDefault(),ot(!0);try{await axios$1.post("https://cre8tlystudio.com/api/support/contact",it),y$4.success("✅ Message sent! We'll get back to you soon.",{position:"top-center"}),g({name:"",email:"",subject:"",message:""})}catch(ft){console.error(ft),y$4.error("❌ Something went wrong. Please try again later.",{position:"top-center"})}finally{ot(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"min-h-screen text-white flex items-center justify-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full bg-metalBlack p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx(AnimatedLogo,{})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Have questions or need help? Fill out the form below and our support team will respond within 24–48 hours."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:it.name,onChange:ct,placeholder:"Your Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:it.email,onChange:ct,placeholder:"Email associated with your account",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:it.subject,onChange:ct,placeholder:"Subject (optional)",className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("textarea",{name:"message",value:it.message,onChange:ct,placeholder:"Write your message...",rows:6,required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white resize-none"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Message"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function PlanDetailsModal({plan:it,onClose:g}){if(!it)return null;const et={basic:{title:"Basic Creator",content:`
The Basic Creator Plan gives you 5 Lead Magnet Slots to design professional, conversion-ready lead magnets using Cre8tly’s AI tools. Access standard templates, custom branding, and editable layouts so you can attract new subscribers and showcase your expertise with ease.`},pro:{title:"Pro Covers",content:`
The Pro Covers Plan includes everything in Basic, plus unlimited custom cover uploads for both books and lead magnets. Personalize your visuals with full creative control—upload, test, and update covers that match your unique style and brand. You’ll also gain access to thousands of royalty-free Unsplash images, making it easy to design stunning, professional-quality covers in seconds without worrying about licensing or costs.`},author:{title:"Author’s Assistant",content:`
Transform your writing with intelligent support, not automation.
The Author’s Assistant is your creative co-writer, an AI partner that helps you plan your story structure, build rich scenes, and craft powerful chapters without losing your authentic voice. Generate up to 750 pages with built-in editing tools that perfect your tone, pacing, and style. Plus, enjoy unlimited custom cover uploads to bring your book to life with a professional finish.`},bundle:{title:"All-In-One Bundle",content:`
The All-In-One Bundle gives you everything in a single discounted package:  
• 5 Lead Magnet Slots to grow your audience  
• Pro Covers for both books and lead magnets  
• 1 Author’s Assistant Book Slot (750 pages + editor)  
A full creative suite that lets you write, design, and publish with complete control from start to finish.`},prompt_memory:{title:"Prompt Memory Subscription",content:`
The Prompt Memory Plan gives you a persistent AI memory across your entire Cre8tly Studio experience.
It learns your tone, writing style, and preferences, letting you generate faster, more accurate, and
on-brand results every time. Cancel anytime, no contracts.`}},{title:ot,content:ct}=et[it]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-lg w-full text-white relative shadow-xl",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ot}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:ct}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[it,g]=reactExports.useState(null),[et,ot]=reactExports.useState(null),{user:ct}=useAuth(),ut=async dt=>{if(!ct||!ct.id){y$4.error("Please sign in before selecting a plan");return}try{g(dt);const ft=localStorage.getItem("accessToken"),St=await axiosInstance.post("/checkout",{userId:ct.id,productType:dt},{headers:{Authorization:`Bearer ${ft}`}});window.location.href=St.data.url}catch(ft){console.error("Checkout error:",ft),y$4.error("Failed to start checkout session"),g(null)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center justify-center px-6 py-16",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-12 tracking-tight text-center design-text",children:"Choose Your Plan"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl",children:[jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-purple-600 via-blue-500 to-purple-600 shadow-[0_0_25px_rgba(147,51,234,0.4)] hover:shadow-[0_0_45px_rgba(147,51,234,0.7)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-white design-text",children:"Basic Creator"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"5 digital asset slots"})," and access to all standard templates. Turn ideas into irresistible lead magnets fast."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("basic"),className:"text-blue-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-white design-text",children:"$47"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("basic"),disabled:it==="basic",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="basic"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-royalPurple hover:bg-purple-800 hover:shadow-[0_0_25px_rgba(147,51,234,0.6)] text-white design-text"}`,children:it==="basic"?"Redirecting...":"Select Basic Plan"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-400 design-text",children:"Pro Covers"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Everything in Basic plus ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"unlimited custom and unsplash cover uploads"}),". Single purchase unlocks pro covers for lifetime."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("pro"),className:"text-green-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-green-400 design-text",children:"$150"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("pro"),disabled:it==="pro",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="pro"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black design-text"}`,children:it==="pro"?"Redirecting...":"Pro Covers"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-pink-500 via-rose-400 to-pink-500 shadow-[0_0_25px_rgba(255,105,180,0.3)] hover:shadow-[0_0_45px_rgba(255,105,180,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-pink-400 design-text",children:"Author’s Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:"AI-powered co-writer that helps you structure, write, and edit up to 750 pages while keeping your unique voice."}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("author"),className:"text-pink-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-pink-400 design-text",children:"$850 "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("author"),disabled:it==="author",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-pink-600 hover:bg-pink-700 hover:shadow-[0_0_25px_rgba(255,105,180,0.6)] text-white design-text"}`,children:it==="author"?"Redirecting...":"Author’s Assistant"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 shadow-[0_0_25px_rgba(255,215,0,0.3)] hover:shadow-[0_0_45px_rgba(255,215,0,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-yellow-300 design-text",children:"All-In-One Bundle"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Basic, Pro Covers, and Author’s Assistant"})," in one discounted package."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("bundle"),className:"text-yellow-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-yellow-300 design-text",children:"$999"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("bundle"),disabled:it==="bundle",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="bundle"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-yellow hover:bg-yellow hover:shadow-[0_0_25px_rgba(255,215,0,0.6)] text-black font-bold design-text"}`,children:it==="bundle"?"Redirecting...":"Get the Bundle"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-300 design-text",children:"Prompt Memory"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Unlock ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"AI Prompt Memory"})," your personalized creative memory that remembers your tone, style, and preferences across every generation. Stay consistent, save time, and build smarter prompts automatically."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("prompt_memory"),className:"text-green-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold mb-6 text-green-300 design-text",children:["$14.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-gray-400",children:" / month"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("prompt_memory"),disabled:it==="prompt_memory",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="prompt_memory"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black font-bold design-text"}`,children:it==="prompt_memory"?"Redirecting...":"Subscribe"})]})})]}),et&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:et,onClose:()=>ot(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-10 text-center",children:"🔒 Secure Checkout"})]})}function t(it,g,et){return Math.max(it,Math.min(g,et))}class Animate{advance(g){var ft;if(!this.isRunning)return;let et=!1;if(this.lerp)this.value=(ot=this.value,ct=this.to,ut=60*this.lerp,dt=g,function(St,kt,Tt){return(1-Tt)*St+Tt*kt}(ot,ct,1-Math.exp(-ut*dt))),Math.round(this.value)===this.to&&(this.value=this.to,et=!0);else{this.currentTime+=g;const St=t(0,this.currentTime/this.duration,1);et=St>=1;const kt=et?1:this.easing(St);this.value=this.from+(this.to-this.from)*kt}var ot,ct,ut,dt;(ft=this.onUpdate)==null||ft.call(this,this.value,et),et&&this.stop()}stop(){this.isRunning=!1}fromTo(g,et,{lerp:ot=.1,duration:ct=1,easing:ut=St=>St,onStart:dt,onUpdate:ft}){this.from=this.value=g,this.to=et,this.lerp=ot,this.duration=ct,this.easing=ut,this.currentTime=0,this.isRunning=!0,dt==null||dt(),this.onUpdate=ft}}class Dimensions{constructor({wrapper:g,content:et,autoResize:ot=!0,debounce:ct=250}={}){qn(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});qn(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});qn(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=g,this.content=et,ot&&(this.debouncedResize=function(ut,dt){let ft;return function(){let St=arguments,kt=this;clearTimeout(ft),ft=setTimeout(function(){ut.apply(kt,St)},dt)}}(this.resize,ct),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var g,et;(g=this.wrapperResizeObserver)==null||g.disconnect(),(et=this.contentResizeObserver)==null||et.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(g,...et){let ot=this.events[g]||[];for(let ct=0,ut=ot.length;ct<ut;ct++)ot[ct](...et)}on(g,et){var ot;return(ot=this.events[g])!=null&&ot.push(et)||(this.events[g]=[et]),()=>{var ct;this.events[g]=(ct=this.events[g])==null?void 0:ct.filter(ut=>et!==ut)}}off(g,et){var ot;this.events[g]=(ot=this.events[g])==null?void 0:ot.filter(ct=>et!==ct)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(g,{wheelMultiplier:et=1,touchMultiplier:ot=1}){qn(this,"onTouchStart",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:g})});qn(this,"onTouchMove",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g,ct=-(et-this.touchStart.x)*this.touchMultiplier,ut=-(ot-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:ct,y:ut},this.emitter.emit("scroll",{deltaX:ct,deltaY:ut,event:g})});qn(this,"onTouchEnd",g=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:g})});qn(this,"onWheel",g=>{let{deltaX:et,deltaY:ot,deltaMode:ct}=g;et*=ct===1?e:ct===2?this.windowWidth:1,ot*=ct===1?e:ct===2?this.windowHeight:1,et*=this.wheelMultiplier,ot*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:et,deltaY:ot,event:g})});qn(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=g,this.wheelMultiplier=et,this.touchMultiplier=ot,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(g,et){return this.emitter.on(g,et)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:g=window,content:et=document.documentElement,wheelEventsTarget:ot=g,eventsTarget:ct=ot,smoothWheel:ut=!0,syncTouch:dt=!1,syncTouchLerp:ft=.075,touchInertiaMultiplier:St=35,duration:kt,easing:Tt=Jt=>Math.min(1,1.001-Math.pow(2,-10*Jt)),lerp:jt=!kt&&.1,infinite:Rt=!1,orientation:Ft="vertical",gestureOrientation:$t="vertical",touchMultiplier:zt=1,wheelMultiplier:Kt=1,autoResize:Bt=!0,__experimental__naiveDimensions:Ut=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:Jt,deltaY:en,event:tn})=>{if(tn.ctrlKey)return;const nn=tn.type.includes("touch"),rn=tn.type.includes("wheel");if(this.options.syncTouch&&nn&&tn.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const on=Jt===0&&en===0,dn=this.options.gestureOrientation==="vertical"&&en===0||this.options.gestureOrientation==="horizontal"&&Jt===0;if(on||dn)return;let cn=tn.composedPath();if(cn=cn.slice(0,cn.indexOf(this.rootElement)),cn.find(Sn=>{var wn,hn,yn,an,un;return((wn=Sn.hasAttribute)===null||wn===void 0?void 0:wn.call(Sn,"data-lenis-prevent"))||nn&&((hn=Sn.hasAttribute)===null||hn===void 0?void 0:hn.call(Sn,"data-lenis-prevent-touch"))||rn&&((yn=Sn.hasAttribute)===null||yn===void 0?void 0:yn.call(Sn,"data-lenis-prevent-wheel"))||((an=Sn.classList)===null||an===void 0?void 0:an.contains("lenis"))&&!(!((un=Sn.classList)===null||un===void 0)&&un.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void tn.preventDefault();if(this.isSmooth=this.options.syncTouch&&nn||this.options.smoothWheel&&rn,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();tn.preventDefault();let fn=en;this.options.gestureOrientation==="both"?fn=Math.abs(en)>Math.abs(Jt)?en:Jt:this.options.gestureOrientation==="horizontal"&&(fn=Jt);const mn=nn&&this.options.syncTouch,En=nn&&tn.type==="touchend"&&Math.abs(fn)>5;En&&(fn=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+fn,Object.assign({programmatic:!1},mn?{lerp:En?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const Jt=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-Jt),this.emit()}},window.lenisVersion="1.0.42",g!==document.documentElement&&g!==document.body||(g=window),this.options={wrapper:g,content:et,wheelEventsTarget:ot,eventsTarget:ct,smoothWheel:ut,syncTouch:dt,syncTouchLerp:ft,touchInertiaMultiplier:St,duration:kt,easing:Tt,lerp:jt,infinite:Rt,gestureOrientation:$t,orientation:Ft,touchMultiplier:zt,wheelMultiplier:Kt,autoResize:Bt,__experimental__naiveDimensions:Ut},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:g,content:et,autoResize:Bt}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=dt||ut,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ct,{touchMultiplier:zt,wheelMultiplier:Kt}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(g,et){return this.emitter.on(g,et)}off(g,et){return this.emitter.off(g,et)}setScroll(g){this.isHorizontal?this.rootElement.scrollLeft=g:this.rootElement.scrollTop=g}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(g){const et=g-(this.time||g);this.time=g,this.animate.advance(.001*et)}scrollTo(g,{offset:et=0,immediate:ot=!1,lock:ct=!1,duration:ut=this.options.duration,easing:dt=this.options.easing,lerp:ft=!ut&&this.options.lerp,onComplete:St,force:kt=!1,programmatic:Tt=!0}={}){if(!this.isStopped&&!this.isLocked||kt){if(["top","left","start"].includes(g))g=0;else if(["bottom","right","end"].includes(g))g=this.limit;else{let jt;if(typeof g=="string"?jt=document.querySelector(g):g!=null&&g.nodeType&&(jt=g),jt){if(this.options.wrapper!==window){const Ft=this.options.wrapper.getBoundingClientRect();et-=this.isHorizontal?Ft.left:Ft.top}const Rt=jt.getBoundingClientRect();g=(this.isHorizontal?Rt.left:Rt.top)+this.animatedScroll}}if(typeof g=="number"){if(g+=et,g=Math.round(g),this.options.infinite?Tt&&(this.targetScroll=this.animatedScroll=this.scroll):g=t(0,g,this.limit),ot)return this.animatedScroll=this.targetScroll=g,this.setScroll(this.scroll),this.reset(),void(St==null||St(this));if(!Tt){if(g===this.targetScroll)return;this.targetScroll=g}this.animate.fromTo(this.animatedScroll,g,{duration:ut,easing:dt,lerp:ft,onStart:()=>{ct&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(jt,Rt)=>{this.isScrolling=!0,this.velocity=jt-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=jt,this.setScroll(this.scroll),Tt&&(this.targetScroll=jt),Rt||this.emit(),Rt&&(this.reset(),this.emit(),St==null||St(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(g=this.animatedScroll,et=this.limit,(g%et+et)%et):this.animatedScroll;var g,et}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(g){this.__isSmooth!==g&&(this.__isSmooth=g,this.toggleClassName("lenis-smooth",g))}get isScrolling(){return this.__isScrolling}set isScrolling(g){this.__isScrolling!==g&&(this.__isScrolling=g,this.toggleClassName("lenis-scrolling",g))}get isStopped(){return this.__isStopped}set isStopped(g){this.__isStopped!==g&&(this.__isStopped=g,this.toggleClassName("lenis-stopped",g))}get isLocked(){return this.__isLocked}set isLocked(g){this.__isLocked!==g&&(this.__isLocked=g,this.toggleClassName("lenis-locked",g))}get className(){let g="lenis";return this.isStopped&&(g+=" lenis-stopped"),this.isLocked&&(g+=" lenis-locked"),this.isScrolling&&(g+=" lenis-scrolling"),this.isSmooth&&(g+=" lenis-smooth"),g}toggleClassName(g,et){this.rootElement.classList.toggle(g,et),this.emitter.emit("className change",this)}}const App=()=>{const it=useLocation();return reactExports.useEffect(()=>{const g=new Lenis({duration:1.4,easing:ot=>1-Math.pow(1-ot,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function et(ot){g.raf(ot),requestAnimationFrame(et)}return requestAnimationFrame(et),g.on("scroll",({scroll:ot,limit:ct,velocity:ut,direction:dt,progress:ft})=>{}),()=>g.destroy()},[]),reactExports.useEffect(()=>{if(it.hash){const g=document.querySelector(it.hash);g&&setTimeout(()=>{g.scrollIntoView({behavior:"smooth",block:"start"})},200)}},[it]),jsxRuntimeExports.jsxs("main",{className:"relative min-h-screen bg-transparent",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("section",{id:"landing",className:"padding",children:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Footer,{})]})},ReactToastify="",index="";function ForgotPassword(){const[it,g]=reactExports.useState(""),[et,ot]=reactExports.useState(!1),ct=useNavigate(),ut=async dt=>{var ft,St;if(dt.preventDefault(),!it)return y$4.error("Please enter your email address.");ot(!0);try{console.log("sending email:",it);const kt=await axiosInstance.post("/auth/forgot-password",{email:it});y$4.success(kt.data.message),g(""),setTimeout(()=>ct("/login"),2500)}catch(kt){console.error("Forgot password error:",kt),y$4.error(((St=(ft=kt.response)==null?void 0:ft.data)==null?void 0:St.message)||"Error sending reset email.")}finally{ot(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Forgot Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your email below and we’ll send you a link to reset your password."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"email",value:it,onChange:dt=>g(dt.target.value),placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Reset Link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function ResetPassword(){const[it]=useSearchParams(),[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(!1),kt=useNavigate(),Tt=it.get("token");reactExports.useEffect(()=>{Tt||(y$4.error("Invalid or missing reset token."),kt("/login"))},[Tt,kt]);const jt=async Rt=>{var Ft,$t;if(Rt.preventDefault(),!g||!ot)return y$4.error("Please enter and confirm your new password.");if(g!==ot)return y$4.error("Passwords do not match.");dt(!0);try{const zt=await axiosInstance.post("/auth/reset-password",{token:Tt,newPassword:g});y$4.success(zt.data.message||"Password reset successful!"),St(!0),setTimeout(()=>kt("/login"),3500)}catch(zt){console.error("Reset password error:",zt),y$4.error((($t=(Ft=zt.response)==null?void 0:Ft.data)==null?void 0:$t.message)||"Error resetting password.")}finally{dt(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:ft?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green mb-6",children:"Password Reset Successful"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated successfully. You can now log in with your new password."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"bg-green text-black font-semibold px-6 py-3 rounded-lg hover:opacity-90 transition-all",children:"Go to Login"})})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your new password below to reset your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:jt,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"password",value:g,onChange:Rt=>et(Rt.target.value),placeholder:"New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"password",value:ot,onChange:Rt=>ct(Rt.target.value),placeholder:"Confirm New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ut,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ut?"Resetting...":"Reset Password"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-6",children:jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})})]},"form")})}),jsxRuntimeExports.jsx(Footer,{})]})}function EbookModal({ebook:it,onClose:g,onBuy:et,loadingBook:ot}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl max-w-2xl w-full shadow-xl p-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-xl",children:"✕"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:it.image_url,alt:it.title,className:"w-56 h-auto object-contain rounded-lg border border-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-left",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:[it.title," (guide)"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm leading-relaxed space-y-3 overflow-y-auto max-h-[300px] pr-2 mb-5 py-4",dangerouslySetInnerHTML:{__html:it.description}}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-white mb-5",children:["$",it.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>et(it),disabled:ot===it.product_type,className:`py-3 px-8 rounded-xl text-lg font-semibold shadow-lg ${ot===it.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen text-black hover:bg-green-400 transition"}`,children:ot===it.product_type?"Redirecting...":"Buy Now"})]})]})})}function EbooksStore(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0),{user:St}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const jt=await axiosInstance.get("/ebooks");g(jt.data)}catch(jt){console.error("Failed to fetch ebooks:",jt),y$4.error("Failed to load ebooks")}finally{ft(!1)}})()},[]),reactExports.useEffect(()=>{const Tt=new Lenis({duration:1.4,easing:Rt=>1-Math.pow(1-Rt,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function jt(Rt){Tt.raf(Rt),requestAnimationFrame(jt)}return requestAnimationFrame(jt),Tt.on("scroll",({scroll:Rt,limit:Ft,velocity:$t,direction:zt,progress:Kt})=>{}),()=>Tt.destroy()},[]);const kt=async Tt=>{var jt;try{ot(Tt.product_type);const Rt=localStorage.getItem("accessToken"),Ft=await axiosInstance.post("/ebooks/checkout",{userId:(St==null?void 0:St.id)||null,title:Tt.title,description:Tt.description,price:Tt.price,productType:Tt.product_type},Rt?{headers:{Authorization:`Bearer ${Rt}`}}:{});window.location.href=Ft.data.url}catch(Rt){console.error("Checkout error:",((jt=Rt.response)==null?void 0:jt.data)||Rt.message),y$4.error("Failed to start checkout session"),ot(null)}};return dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Loading ebooks..."}):it.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"No ebooks available yet."}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-12 tracking-tight text-center lead-text",children:["Shop Our ",jsxRuntimeExports.jsx("span",{className:"text-green design-text",children:"Premium Guides"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center max-w-2xl mb-16 leading-relaxed",children:"Professionally written, conversion-focused guides generated by our software Cre8tly Studio. Instantly downloadable after purchase, no subscriptions, just pure value."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-7xl",children:it.map(Tt=>jsxRuntimeExports.jsx("div",{className:`relative rounded-3xl p-[2px] bg-gradient-to-r from-[#9ca3af] via-[#f3f4f6] to-[#9ca3af]
        shadow-[0_0_25px_rgba(255,255,255,0.15)] hover:shadow-[0_0_45px_rgba(255,255,255,0.35)]
        transition-all duration-300`,children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-[#1a1a1a] via-[#111111] to-[#0b0b0b] p-8 flex flex-col text-center shadow-[inset_0_0_20px_rgba(255,255,255,0.05)] min-h-[550px] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0.15)_40%,rgba(255,255,255,0)_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 relative",children:jsxRuntimeExports.jsx("img",{src:Tt.image_url,alt:Tt.title,className:"rounded-lg w-48 h-auto object-contain border border-gray-700 shadow-[0_4px_20px_rgba(0,0,0,0.4)]"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-3 text-white min-h-[64px] flex items-center justify-center",children:Tt.title}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 mb-5 text-sm leading-relaxed line-clamp-3 text-left",dangerouslySetInnerHTML:{__html:Tt.description}}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(Tt),className:"text-gray-400 text-sm hover:text-white hover:underline mb-4 transition-colors",children:"Read More"}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-extrabold mb-5 text-white tracking-wide drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]",children:["$",Tt.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(Tt),disabled:et===Tt.product_type,className:`w-full py-3 px-6 text-lg font-semibold rounded-xl transition-all duration-300 
                ${et===Tt.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-[#d1d5db] to-[#9ca3af] text-black hover:from-white hover:to-gray-300 hover:shadow-[0_0_35px_rgba(255,255,255,0.5)]"}`,children:et===Tt.product_type?"Redirecting...":"Purchase Guide"})]})]})},Tt.id))}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-12 text-center",children:"🔒 Secure Checkout"}),ct&&jsxRuntimeExports.jsx(EbookModal,{ebook:ct,onClose:()=>ut(null),onBuy:kt,loadingBook:et})]})}const BookContext=reactExports.createContext();function BookProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState([]),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const kt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(kt.data)}catch(kt){console.error("Error fetching books:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Tt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(jt=>JSON.stringify(jt)===JSON.stringify(Tt.data)?jt:Tt.data)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:et,setBooks:ot,fetchBooks:St,loading:ct,error:dt},children:it})}function useBooks(){return reactExports.useContext(BookContext)}function BookPromptModal({isOpen:it,onClose:g,bookId:et,partNumber:ot=1,accessToken:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft,initialBookData:St}){const[kt,Tt]=reactExports.useState(""),[jt,Rt]=reactExports.useState(10),[Ft,$t]=reactExports.useState(""),[zt,Kt]=reactExports.useState(null),[Bt,Ut]=reactExports.useState(""),[Jt,en]=reactExports.useState(!1),[tn,nn]=reactExports.useState(!1),[rn,on]=reactExports.useState(!1),[dn,cn]=reactExports.useState((St==null?void 0:St.title)||""),[fn,mn]=reactExports.useState((St==null?void 0:St.authorName)||""),[En,Sn]=reactExports.useState((St==null?void 0:St.bookType)||"fiction");reactExports.useEffect(()=>{St&&(console.log("🩵 Syncing initialBookData to state:",St),cn(St.title||""),mn(St.authorName||""),Sn(St.bookType||"fiction"))},[St]),reactExports.useEffect(()=>{it||(Tt(""),Rt(10),$t(""),Kt(null),Ut(""),mn(""),ft(0))},[it]),reactExports.useEffect(()=>{async function hn(){var yn;if(et)try{const un=(await axios$1.get(`https://cre8tlystudio.com/books/draft/${et}`)).data;un!=null&&un.draft_text?(Tt(un.draft_text),un.title&&cn(un.title),un.link&&$t(un.link),un.author_name&&mn(un.author_name),un.book_type&&Sn(un.book_type),y$4.info(`Loaded last draft from ${new Date(un.last_saved_at).toLocaleString()}`)):console.log("No draft found for this book.")}catch(an){((yn=an.response)==null?void 0:yn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",an),y$4.error("Failed to fetch saved draft."))}}hn()},[et]),reactExports.useEffect(()=>{async function hn(){var yn;if(et)try{const an=ot>1?`https://cre8tlystudio.com/api/books/${et}/part/${ot}/draft`:`https://cre8tlystudio.com/api/books/draft/${et}`,bn=(await axios$1.get(an,{headers:{Authorization:`Bearer ${ct}`}})).data;bn!=null&&bn.draft_text?(Tt(bn.draft_text),bn.title&&Ut(bn.title),bn.link&&$t(bn.link),bn.author_name&&mn(bn.author_name),bn.book_type&&Sn(bn.book_type),y$4.info(`Loaded last draft from ${new Date(bn.last_saved_at||bn.updated_at||Date.now()).toLocaleString()}`)):console.log("No draft found for this book or part.")}catch(an){((yn=an.response)==null?void 0:yn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",an),y$4.error("Failed to fetch saved draft."))}}hn()},[et,ot]);async function wn(hn){var an,un;if(hn.preventDefault(),!kt.trim()){y$4.error("Please enter your book idea or prompt first.");return}g(),en(!0),ft(0),dt(!0);let yn;try{yn=setInterval(()=>{ft(pn=>pn<90?pn+Math.random()*4:pn)},400);const bn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{bookId:et,prompt:kt,pages:jt,link:Ft,coverImage:zt,title:Bt,authorName:fn,bookName:dn,partNumber:ot,bookType:En},{headers:{Authorization:`Bearer ${ct}`},maxBodyLength:1/0,maxContentLength:1/0});clearInterval(yn),ft(100),y$4.success("📚 Book section generated successfully!"),dt(!1),await new Promise(pn=>setTimeout(pn,1e3)),window.dispatchEvent(new Event("refreshBooks")),typeof ut=="function"&&setTimeout(()=>ut(et,kt),1e3)}catch(bn){clearInterval(yn),ft(0),dt(!1),y$4.error(((un=(an=bn.response)==null?void 0:an.data)==null?void 0:un.message)||"Book generation failed. Try again."),console.error("❌ Book generation error:",bn)}finally{en(!1)}}return it?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#0b0b0b] text-white flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center px-6 py-5 border-b border-gray-700 bg-[#111]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-white text-center",children:["📖 Build Your Novel — Part ",ot]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute left-6 md:left-36 text-silver hover:text-white transition text-lg",children:"← Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:jsxRuntimeExports.jsx(BookPromptForm,{text:kt,setText:Tt,pages:jt,setPages:Rt,link:Ft,setLink:$t,cover:zt,setCover:Kt,title:Bt,setTitle:Ut,authorName:fn,setAuthorName:mn,bookName:dn,setBookName:cn,bookType:En,setBookType:Sn,onSubmit:wn,loading:Jt,showPreview:tn,setShowPreview:nn,setShowGenerating:dt,bookId:et,setBookId:()=>{},partLocked:rn,partNumber:ot,onClose:g,setProgress:ft})})]}):null}function BookPartsModal({bookId:it,accessToken:g,onClose:et}){const[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(null);return reactExports.useEffect(()=>{async function kt(){try{const jt=await(await fetch(`https://cre8tlystudio.com/api/books/${it}/parts`,{headers:{Authorization:`Bearer ${g}`}})).json();ct(jt)}catch(Tt){console.error("❌ Failed to load book parts:",Tt)}finally{dt(!1)}}kt()},[it,g]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"📚 Book Parts"}),ut?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:ot.map(kt=>jsxRuntimeExports.jsxs("li",{className:"flex justify-between items-center border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Part ",kt.part_number,": ",kt.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",kt.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(kt.created_at).toLocaleString()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St({url:kt.file_url,title:kt.title,partNumber:kt.part_number}),className:"px-3 py-1 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"})]},kt.id))}),jsxRuntimeExports.jsx("button",{onClick:et,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:"✕"})]})}),ft&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ft.url,fileTitle:ft.title,partNumber:ft.partNumber,sourceType:"book",onClose:()=>St(null)})]})}function BookCardList({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),{accessToken:kt}=useAuth();function Tt(jt){St(jt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[it.map(jt=>jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:jt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",jt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(jt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[jt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:jt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating…"]}):jt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):jt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):jt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:jt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(jt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(jt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(jt.id,jt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),jt.pdf_url&&jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:jt.pdf_url,title:jt.book_name||"Untitled",partNumber:jt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:jt.pages>=750?"Download Book":"Preview"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(jt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),jt.prompt&&jt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(jt.id,(jt.part_number||1)+1),className:"w-full bg-gradient-to-r from-green to-royalPurple text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:jt.pages>=740?"Finish Book":`Continue (Part ${(jt.part_number||1)+1})`})]})]})]},jt.id)),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:kt,onClose:()=>dt(!1)})]})}function NewBookModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[St,kt]=reactExports.useState(!1);async function Tt(){if(!et||!ct||!dt){alert("Please fill in all fields, including book type.");return}it({title:et,authorName:ct,bookType:dt})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Book Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:et,onChange:jt=>ot(jt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:ct,onChange:jt=>ut(jt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2",children:"Select Book Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:["Fiction","Non-Fiction","Educational"].map(jt=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:jt.toLowerCase(),checked:dt===jt.toLowerCase(),onChange:Rt=>ft(Rt.target.value),className:"accent-royalPurple"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:jt})]},jt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:St,className:"bg-gradient-to-r from-green to-royalPurple px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:St?"Saving...":"Continue"})]})]})})}function OnboardingGuide({steps:it=[],onFinish:g}){const[et,ot]=reactExports.useState(0),[ct,ut]=reactExports.useState(null);reactExports.useEffect(()=>{if(it.length>0&&it[et]){const kt=document.querySelector(it[et].target);if(kt){const Tt=kt.getBoundingClientRect();ut(Tt)}}},[et,it]);function dt(){et<it.length-1?ot(et+1):g==null||g()}function ft(){et>0&&ot(et-1)}if(!it.length||!ct)return null;const St=it[et];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:ct.top-8,left:ct.left-8,width:ct.width+16,height:ct.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:ct.bottom+12,left:ct.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:St.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:ft,disabled:et===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${et===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:et===it.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),{accessToken:jt,user:Rt,refreshUser:Ft}=useAuth(),$t=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages you’ve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your book’s current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(it.length>0&&Rt&&!Rt.has_completed_book_onboarding){const Kt=setTimeout(()=>Tt(!0),800);return()=>clearTimeout(Kt)}},[it,Rt]);function zt(Kt){St(Kt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:it.map(Kt=>jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:"book-title text-white text-sm font-semibold truncate mb-2",children:Kt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Kt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Kt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Kt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Kt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Kt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating…"]}):Kt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Kt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Kt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Kt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Kt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Kt.id,Kt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create Chapter",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Kt.has_part_1===0&&(Kt.is_draft===1||Kt.draft_text)&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(Kt.id,Kt.part_number||1),className:"w-full bg-blue hover:bg-blue text-white rounded-lg py-2 text-sm font-semibold flex items-center justify-center gap-2 transition-all",title:"Continue Draft",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),Kt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:Kt.pdf_url,title:Kt.book_name||"Untitled",partNumber:Kt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview Book",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Kt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Kt.pages>=750?"Download Book":"Preview"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>zt(Kt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})]}),Kt.prompt&&Kt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Kt.id,(Kt.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Kt.pages>=740?"Finish Book":`Continue Story (Part ${(Kt.part_number||1)+1})`})]})]})]},Kt.id))}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:jt,onClose:()=>dt(!1)}),kt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:$t,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Tt(!1),await axiosInstance.post("https://cre8tlystudio.com/api/books/book-complete",{userId:Rt==null?void 0:Rt.id},{headers:{Authorization:`Bearer ${jt}`}}),await Ft()}catch(Kt){console.error("❌ Failed to save onboarding status:",Kt)}}})]})}function BooksDashboard(){const{accessToken:it}=useAuth(),{books:g,setBooks:et,fetchBooks:ot,loading:ct}=useBooks(),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),[jt,Rt]=reactExports.useState(0),[Ft,$t]=reactExports.useState(!1),[zt,Kt]=reactExports.useState(1),[Bt,Ut]=reactExports.useState(!1),[Jt,en]=reactExports.useState(null),tn=useNavigate(),nn=10,rn=[...g].sort((wn,hn)=>new Date(hn.created_at)-new Date(wn.created_at)),on=Math.ceil(rn.length/nn),dn=(zt-1)*nn,cn=rn.slice(dn,dn+nn);async function fn(wn,hn=1){let yn=g.find(bn=>bn.id===wn);try{const bn=await axios$1.get(`https://cre8tlystudio.com/api/books/${wn}`,{headers:{Authorization:`Bearer ${it}`},withCredentials:!0});bn.data&&(console.log("📘 Fresh data from backend:",bn.data),yn={...yn,...bn.data})}catch(bn){console.error("❌ Failed to fetch book by ID:",bn),toast.error("Could not refresh book info — using cached version")}if(!yn)return;const an=!yn.author_name||yn.author_name.trim()==="",un=!yn.title||yn.title.trim()===""||yn.title==="Untitled"||yn.title==="Untitled Book";if(an||un){St({id:wn,part_number:hn}),Ut(!0);return}St({id:yn.id,part_number:hn,title:yn.title||yn.book_name||"",author_name:yn.author_name||"",book_type:yn.bookType||yn.book_type||"fiction"}),dt(!0)}function mn(wn,hn){et(yn=>yn.map(an=>an.id===wn?{...an,prompt:hn,status:"pending"}:an)),setTimeout(ot,3e3)}function En({title:wn,authorName:hn,bookType:yn}){en({title:wn,authorName:hn,bookType:yn}),Ut(!1),dt(!0)}async function Sn(){try{await(await fetch("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${it}`},credentials:"include"})).json()&&ot()}catch(wn){console.error("Failed to refresh slots:",wn)}}return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"book",items:g,onCheckout:()=>tn("/plans")}),ct?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>tn("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:cn,onAddPrompt:(wn,hn)=>fn(wn,hn),onGenerateNext:(wn,hn)=>fn(wn,hn)}),jsxRuntimeExports.jsx(BookCardList,{books:cn,onAddPrompt:(wn,hn)=>fn(wn,hn),onGenerateNext:(wn,hn)=>fn(wn,hn)}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:zt,totalPages:on,onPageChange:Kt}),jsxRuntimeExports.jsx(SupportTab,{})]}),Bt&&ft&&jsxRuntimeExports.jsx(NewBookModal,{bookId:ft.id,accessToken:it,onCreate:En,onClose:()=>Ut(!1)}),ft&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:ut,onClose:()=>dt(!1),bookId:ft.id,partNumber:ft.part_number,accessToken:it,setShowGenerating:Tt,setProgress:Rt,onSubmitted:mn,initialBookData:{title:(Jt==null?void 0:Jt.title)||ft.title||"",authorName:(Jt==null?void 0:Jt.authorName)||ft.author_name||"",bookType:(Jt==null?void 0:Jt.bookType)||ft.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:Ft,onClose:()=>$t(!1),onRefresh:Sn,isFirstTime:g.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:kt,progress:jt,type:"book"})]})})}function DashboardSettings(){const{user:it,setUser:g}=useAuth(),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;(async()=>{try{const Bt=await axiosInstance.get(`upload-data/user/settings/${it.id}`);ot(Bt.data.settings)}catch(Bt){console.error("Failed to load settings:",Bt),y$4.error("Failed to load brand settings.")}})()},[it==null?void 0:it.id]);const jt=async()=>{if(!ct){y$4.warning("Please select a file first.");return}const Kt=new FileReader;Kt.onloadend=async()=>{const Bt=Kt.result.split(",")[1];ft(!0);try{const Ut=await axiosInstance.post("upload-data/user/settings/upload",{user_id:it.id,file_name:ct.name,file_data:Bt});ot(Jt=>({...Jt,brand_identity_file:Ut.data.fileUrl})),g(Jt=>({...Jt,brand_identity_file:Ut.data.fileUrl})),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:Ut.data.fileUrl})),y$4.success("Brand file uploaded successfully!"),ut(null),Tt.current&&(Tt.current.value="")}catch(Ut){console.error(Ut),y$4.error("Upload failed. Please try again.")}finally{ft(!1)}},Kt.readAsDataURL(ct)},Rt=async()=>{try{(await axiosInstance.delete(`upload-data/user/settings/remove/${it.id}`)).data.success?(ot(Bt=>({...Bt,brand_identity_file:null})),g(Bt=>({...Bt,brand_identity_file:null})),ut(null),Tt.current&&(Tt.current.value=""),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:null})),y$4.info("Brand identity file removed. Defaults restored.")):y$4.warning("Failed to remove brand file. Try again.")}catch(Kt){console.error("Error removing brand file:",Kt),y$4.error("Error removing file.")}},Ft=async()=>{try{await axiosInstance.put("upload-data/user/settings/update-cta",{userId:it.id,cta:(et==null?void 0:et.cta)||""}),g(Kt=>({...Kt,cta:et==null?void 0:et.cta})),localStorage.setItem("user",JSON.stringify({...it,cta:et==null?void 0:et.cta})),kt(!0),y$4.success("CTA saved successfully!"),setTimeout(()=>kt(!1),3e3)}catch(Kt){console.error("Failed to update CTA:",Kt),y$4.error("Failed to update CTA. Please try again.")}},zt=(()=>{if(!it)return[];const Kt=[];return it.has_book&&Kt.push("Assistant"),it.has_magnet&&Kt.push("Magnets"),it.pro_covers&&Kt.push("Pro Covers"),Kt})();return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10 border-b border-gray-800 pb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-2xl p-8 mb-10 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),zt.length>0?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:zt.map(Kt=>{let Bt="active",Ut=null;return Kt.includes("Assistant")?(Ut=(it==null?void 0:it.book_slots)??0,Ut<=0&&(Bt="expired")):Kt.includes("Magnets")?(Ut=(it==null?void 0:it.magnet_slots)??0,Ut<=0&&(Bt="expired")):Kt.includes("Pro")&&(Bt=it!=null&&it.pro_covers?"lifetime":"expired"),jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col justify-between transition-all rounded-xl p-5 border shadow-inner
              ${Bt==="expired"?"bg-[#0c0f18]/80 border-gray-800 opacity-70":"bg-[#111827]/80 hover:bg-[#1f2937]/80 border-gray-700 hover:border-gray-600 hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${Bt==="expired"?"text-red-400 bg-red-400/10":"text-green bg-green-400/10"}`,children:Kt.includes("Pro")||Bt==="active"?"Active":"Expired"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Kt.includes("Assistant")&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Kt.includes("Magnets")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Kt.includes("Pro")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-royalPurple",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:Kt})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:Kt.includes("Assistant")?"Access advanced book creation and AI writing tools.":Kt.includes("Magnets")?"Generate digital products and marketing assets.":"Unlock pro cover uploads and customization tools."}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:Bt==="lifetime"?jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-gray-500 tracking-wide",children:"Lifetime"}):jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Slots remaining:"," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Ut>0?"text-gray-300":"text-red-400"}`,children:Ut})]})})]},Kt)})}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-3 shadow-lg mb-8",children:et!=null&&et.brand_identity_file?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Active Brand File"})}),jsxRuntimeExports.jsx("button",{onClick:Rt,className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-md font-semibold shadow-sm transition",children:"Remove"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic",children:["Uploaded on: ",new Date().toLocaleDateString()]})]}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center",children:"No brand identity uploaded yet."})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Upload New Brand File"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted formats:"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:".pdf, .docx, .doc, .txt"})," (max 5 MB)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 w-full",children:[jsxRuntimeExports.jsx("input",{ref:Tt,type:"file",accept:".pdf,.docx,.doc,.txt",onChange:Kt=>ut(Kt.target.files[0]),className:"w-full text-sm text-gray-300 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-purple-600 hover:file:opacity-90"}),ct&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic mt-1",children:["Selected: ",jsxRuntimeExports.jsx("span",{className:"text-gray-200",children:ct.name})]})]}),jsxRuntimeExports.jsxs("button",{onClick:jt,disabled:dt,className:`relative w-full sm:w-auto px-6 py-2.5 rounded-lg font-semibold transition-all duration-300
    ${dt?"opacity-60 cursor-not-allowed bg-gradient-to-r from-green-700 to-green-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-400 hover:to-emerald-500 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]"}
    text-white shadow-[inset_0_0_6px_rgba(255,255,255,0.15)]`,children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:dt?"Uploading...":"Save Brand"}),!dt&&jsxRuntimeExports.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear at the end of your lead magnets or books. You can change it anytime."}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter at https://yourwebsite.com.

Let’s keep this journey going together — no tech overwhelm, no burnout, just steady growth.`,value:(et==null?void 0:et.cta)||"",onChange:Kt=>ot(Bt=>({...Bt,cta:Kt.target.value})),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:Ft,className:"mt-3 px-6 py-2 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Save CTA"})}),it!=null&&it.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("https://cre8tlystudio.com/api/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${it==null?void 0:it.accessToken}`}}),y$4.success("✅ Tour reset! It will replay next time you open Book Builder.")}catch(Kt){console.error("❌ Failed to reset onboarding:",Kt),y$4.error("Could not reset tour. Please try again.")}},className:"px-5 py-2.5 rounded-lg bg-[#6a5acd] text-black font-semibold hover:opacity-90 transition",children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Need an ISBN for your book? Cre8tly Studio can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-black font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside Cre8tly Studio!"),className:"flex-1 bg-gray-800 text-gray-300 font-semibold py-2.5 rounded-lg border border-gray-700 hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic mt-3",children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null]})]})})}function PromptMemoryTable({prompts:it=[]}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(!1),{user:ut,accessToken:dt}=useAuth(),ft=useNavigate();reactExports.useEffect(()=>{async function kt(){try{if(!(ut!=null&&ut.id))return;const Tt=await axiosInstance.get("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${dt}`}});ct(!!Tt.data.has_memory)}catch(Tt){console.error("❌ Failed to check memory access:",Tt)}}kt()},[ut,dt]);const St=async(kt,Tt)=>{try{const jt=kt.replace(/<[^>]*>/g,"");await navigator.clipboard.writeText(jt),et(Tt),y$4.success("Prompt copied to clipboard"),setTimeout(()=>et(null),2e3)}catch{y$4.error("Failed to copy prompt")}};return!Array.isArray(it)||it.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-gray-400 px-4",children:jsxRuntimeExports.jsx("p",{children:"No prompts found yet."})}):ot?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-2 sm:px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] w-full max-w-6xl rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-white",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-800/90",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Prompt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Copy"})]})}),jsxRuntimeExports.jsx("tbody",{children:it.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-900/60 transition",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-lg",children:jsxRuntimeExports.jsx("p",{className:"truncate text-white/90",children:kt.prompt.replace(/<[^>]*>/g,"")})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm whitespace-nowrap",children:kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(Copy,{size:18})})})]},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex flex-col divide-y divide-gray-800",children:it.map(kt=>jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm mb-2",children:kt.prompt.replace(/<[^>]*>/g,"")}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:kt.created_at_prompt?new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"N/A"}),jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:16}):jsxRuntimeExports.jsx(Copy,{size:16})})]})]},kt.id))})]})}):jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-[#111] w-full max-w-6xl overflow-hidden rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"opacity-40 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold text-lg",children:["Prompt Memory"," ",jsxRuntimeExports.jsx("span",{className:"text-[#d2b6ff] text-sm ml-2",children:"PRO Feature"})]})}),jsxRuntimeExports.jsx("div",{className:"min-h-[400px] flex items-center justify-center text-gray-500 text-sm",children:jsxRuntimeExports.jsx("p",{children:"Prompt data will appear here once unlocked."})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center backdrop-blur-md bg-black/40 rounded-xl text-center px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{size:20,className:"text-gray-300"}),jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Unlock this feature to access and reuse your previously generated prompts."}),jsxRuntimeExports.jsx("button",{onClick:()=>ft("/plans"),className:`border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                         text-black font-semibold px-5 py-2 rounded-lg hover:opacity-90 transition`,children:"Unlock Feature"})]})]})})}function PromptMemoryDashboard(){const{user:it}=useAuth(),[g,et]=reactExports.useState([]),[ot,ct]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;async function ut(){try{const dt=await axiosInstance.get(`/lead-magnets/prompt-memory/${it.id}`);et(dt.data)}catch(dt){console.error("Failed to load prompts:",dt)}finally{ct(!1)}}ut()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-8 mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2 design-text",children:"My Prompt Memory"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"View all prompts you’ve generated with Cre8tly Studio."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3 mb-8"}),ot?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 border border-gray-700 rounded-xl bg-gray-900/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Prompts Yet"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 max-w-md mx-auto",children:["You don’t have any saved prompts yet. Create your first ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Digital Product"})," to start building your prompt memory."]})]}):jsxRuntimeExports.jsx(PromptMemoryTable,{prompts:g})]})}function Inbox(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Tt()},[]);async function Tt(){try{const $t=await axiosInstance.get("/admin/messages");g($t.data||[])}catch($t){console.error("Failed to load messages:",$t),y$4.error("Failed to load inbox.")}finally{ut(!1)}}async function jt($t){if(ot($t),!$t.read_status)try{ft(!0),await axiosInstance.post(`/admin/messages/${$t.id}/read`),g(zt=>zt.map(Kt=>Kt.id===$t.id?{...Kt,read_status:1}:Kt))}catch(zt){console.error("Failed to mark message as read:",zt)}finally{ft(!1)}}async function Rt($t){y$4.dismiss(),y$4(({closeToast:zt})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{kt(!0),await axiosInstance.delete(`/admin/messages/user/${$t}`),g(Kt=>Kt.filter(Bt=>Bt.id!==$t)),ot(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Kt){console.error("Failed to delete message:",Kt),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{kt(!1),zt()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:zt,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function Ft(){ot(null)}return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen bg-[#030712] text-white flex flex-col lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 lg:max-w-[380px] border-r border-gray-800 h-screen overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-800 pb-4 mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:"text-green"})]}),ct?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Loading messages..."}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:it.map($t=>jsxRuntimeExports.jsxs("li",{onClick:()=>jt($t),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${$t.id===(et==null?void 0:et.id)?"bg-[#111827]/80 border-green":$t.read_status?"bg-[#0c0f18]/70 border-gray-800 hover:border-gray-700":"bg-[#111827]/80 border-green/40 hover:border-green"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${$t.read_status?"text-gray-300":"text-white"}`,children:$t.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date($t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${$t.read_status?"text-gray-500":"text-gray-300"}`,children:$t.message}),!$t.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},$t.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto h-screen bg-[#0B0F19]",children:et?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:Ft,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:"bg-[#111827]/60 border border-gray-800 rounded-2xl p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-800 pb-4 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2 sm:mt-0",children:[jsxRuntimeExports.jsx(Calendar,{size:12}),new Date(et.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line text-sm",children:et.message}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-4 flex items-center justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Rt(et.id),disabled:St,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${St?"bg-red-900 text-gray-400 opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),St?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[jsxRuntimeExports.jsx(Mail,{size:40,className:"mb-4 text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function ct(){try{const{data:ut}=await axiosInstance.get("https://cre8tlystudio.com/api/settings/maintenance");g(ut.maintenance)}catch{g(!1)}finally{ot(!1)}}ct()},[]),{maintenance:it,loading:et}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:"🚧 Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["Cre8tly Studio is ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"We’ll be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:["© ",new Date().getFullYear()," Alure Digital"]})})]})}const AnimatedRoutes=()=>{const it=useLocation();return jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:it,children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(App,{})})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/prompts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(PromptMemoryDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/shop",element:jsxRuntimeExports.jsx(EbooksStore,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"/cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"/prompt",element:jsxRuntimeExports.jsx(PromptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/plans",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(PlansPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(CustomerDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(PrivateRoute,{role:"admin",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(AdminDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/debug",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},style:{backgroundColor:"#030712",color:"#fff",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Debug Test Page"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},it.pathname)})},RootApp=()=>{const{maintenance:it,loading:g}=useMaintenance();return g?null:it?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsx(BookProvider,{children:jsxRuntimeExports.jsxs(MagnetProvider,{children:[jsxRuntimeExports.jsx(Lt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));
