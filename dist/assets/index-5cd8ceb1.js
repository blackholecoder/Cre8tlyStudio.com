var GN=Object.defineProperty;var WN=(it,g,et)=>g in it?GN(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et;var qn=(it,g,et)=>(WN(it,typeof g!="symbol"?g+"":g,et),et),LA=(it,g,et)=>{if(!g.has(it))throw TypeError("Cannot "+et)};var Kt=(it,g,et)=>(LA(it,g,"read from private field"),et?et.call(it):g.get(it)),yn=(it,g,et)=>{if(g.has(it))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(it):g.set(it,et)},vn=(it,g,et,ot)=>(LA(it,g,"write to private field"),ot?ot.call(it,et):g.set(it,et),et);var cs=(it,g,et,ot)=>({set _(ct){vn(it,g,ct,et)},get _(){return Kt(it,g,ot)}}),_n=(it,g,et)=>(LA(it,g,"access private method"),et);function _mergeNamespaces(it,g){for(var et=0;et<g.length;et++){const ot=g[et];if(typeof ot!="string"&&!Array.isArray(ot)){for(const ct in ot)if(ct!=="default"&&!(ct in it)){const ut=Object.getOwnPropertyDescriptor(ot,ct);ut&&Object.defineProperty(it,ct,ut.get?ut:{enumerable:!0,get:()=>ot[ct]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))ot(ct);new MutationObserver(ct=>{for(const ut of ct)if(ut.type==="childList")for(const dt of ut.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&ot(dt)}).observe(document,{childList:!0,subtree:!0});function et(ct){const ut={};return ct.integrity&&(ut.integrity=ct.integrity),ct.referrerPolicy&&(ut.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?ut.credentials="include":ct.crossOrigin==="anonymous"?ut.credentials="omit":ut.credentials="same-origin",ut}function ot(ct){if(ct.ep)return;ct.ep=!0;const ut=et(ct);fetch(ct.href,ut)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$5=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(it){return it===null||typeof it!="object"?null:(it=z$2&&it[z$2]||it["@@iterator"],typeof it=="function"?it:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$2={};function E$3(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(it,g){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,g,"setState")};E$3.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$2(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$5(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(it,g,et){var ot,ct={},ut=null,dt=null;if(g!=null)for(ot in g.ref!==void 0&&(dt=g.ref),g.key!==void 0&&(ut=""+g.key),g)J$2.call(g,ot)&&!L$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);var ft=arguments.length-2;if(ft===1)ct.children=et;else if(1<ft){for(var St=Array(ft),kt=0;kt<ft;kt++)St[kt]=arguments[kt+2];ct.children=St}if(it&&it.defaultProps)for(ot in ft=it.defaultProps,ft)ct[ot]===void 0&&(ct[ot]=ft[ot]);return{$$typeof:l$4,type:it,key:ut,ref:dt,props:ct,_owner:K$3.current}}function N$3(it,g){return{$$typeof:l$4,type:it.type,key:g,ref:it.ref,props:it.props,_owner:it._owner}}function O$5(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$4}function escape$1(it){var g={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(et){return g[et]})}var P$4=/\/+/g;function Q$2(it,g){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):g.toString(36)}function R$4(it,g,et,ot,ct){var ut=typeof it;(ut==="undefined"||ut==="boolean")&&(it=null);var dt=!1;if(it===null)dt=!0;else switch(ut){case"string":case"number":dt=!0;break;case"object":switch(it.$$typeof){case l$4:case n$5:dt=!0}}if(dt)return dt=it,ct=ct(dt),it=ot===""?"."+Q$2(dt,0):ot,I$5(ct)?(et="",it!=null&&(et=it.replace(P$4,"$&/")+"/"),R$4(ct,g,et,"",function(kt){return kt})):ct!=null&&(O$5(ct)&&(ct=N$3(ct,et+(!ct.key||dt&&dt.key===ct.key?"":(""+ct.key).replace(P$4,"$&/")+"/")+it)),g.push(ct)),1;if(dt=0,ot=ot===""?".":ot+":",I$5(it))for(var ft=0;ft<it.length;ft++){ut=it[ft];var St=ot+Q$2(ut,ft);dt+=R$4(ut,g,et,St,ct)}else if(St=A$3(it),typeof St=="function")for(it=St.call(it),ft=0;!(ut=it.next()).done;)ut=ut.value,St=ot+Q$2(ut,ft++),dt+=R$4(ut,g,et,St,ct);else if(ut==="object")throw g=String(it),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$4(it,g,et){if(it==null)return it;var ot=[],ct=0;return R$4(it,ot,"","",function(ut){return g.call(et,ut,ct++)}),ot}function T$4(it){if(it._status===-1){var g=it._result;g=g(),g.then(function(et){(it._status===0||it._status===-1)&&(it._status=1,it._result=et)},function(et){(it._status===0||it._status===-1)&&(it._status=2,it._result=et)}),it._status===-1&&(it._status=0,it._result=g)}if(it._status===1)return it._result.default;throw it._result}var U$5={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(it,g,et){S$4(it,function(){g.apply(this,arguments)},et)},count:function(it){var g=0;return S$4(it,function(){g++}),g},toArray:function(it){return S$4(it,function(g){return g})||[]},only:function(it){if(!O$5(it))throw Error("React.Children.only expected to receive a single React element child.");return it}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(it,g,et){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var ot=C$5({},it.props),ct=it.key,ut=it.ref,dt=it._owner;if(g!=null){if(g.ref!==void 0&&(ut=g.ref,dt=K$3.current),g.key!==void 0&&(ct=""+g.key),it.type&&it.type.defaultProps)var ft=it.type.defaultProps;for(St in g)J$2.call(g,St)&&!L$4.hasOwnProperty(St)&&(ot[St]=g[St]===void 0&&ft!==void 0?ft[St]:g[St])}var St=arguments.length-2;if(St===1)ot.children=et;else if(1<St){ft=Array(St);for(var kt=0;kt<St;kt++)ft[kt]=arguments[kt+2];ot.children=ft}return{$$typeof:l$4,type:it.type,key:ct,ref:ut,props:ot,_owner:dt}};react_production_min.createContext=function(it){return it={$$typeof:u$6,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$6,_context:it},it.Consumer=it};react_production_min.createElement=M$4;react_production_min.createFactory=function(it){var g=M$4.bind(null,it);return g.type=it,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(it){return{$$typeof:v$3,render:it}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(it){return{$$typeof:y$5,_payload:{_status:-1,_result:it},_init:T$4}};react_production_min.memo=function(it,g){return{$$typeof:x$3,type:it,compare:g===void 0?null:g}};react_production_min.startTransition=function(it){var g=V$3.transition;V$3.transition={};try{it()}finally{V$3.transition=g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(it,g){return U$5.current.useCallback(it,g)};react_production_min.useContext=function(it){return U$5.current.useContext(it)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(it){return U$5.current.useDeferredValue(it)};react_production_min.useEffect=function(it,g){return U$5.current.useEffect(it,g)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(it,g,et){return U$5.current.useImperativeHandle(it,g,et)};react_production_min.useInsertionEffect=function(it,g){return U$5.current.useInsertionEffect(it,g)};react_production_min.useLayoutEffect=function(it,g){return U$5.current.useLayoutEffect(it,g)};react_production_min.useMemo=function(it,g){return U$5.current.useMemo(it,g)};react_production_min.useReducer=function(it,g,et){return U$5.current.useReducer(it,g,et)};react_production_min.useRef=function(it){return U$5.current.useRef(it)};react_production_min.useState=function(it){return U$5.current.useState(it)};react_production_min.useSyncExternalStore=function(it,g,et){return U$5.current.useSyncExternalStore(it,g,et)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$2=getDefaultExportFromCjs(reactExports),t$5=_mergeNamespaces({__proto__:null,default:React$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$4=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q(it,g,et){var ot,ct={},ut=null,dt=null;et!==void 0&&(ut=""+et),g.key!==void 0&&(ut=""+g.key),g.ref!==void 0&&(dt=g.ref);for(ot in g)m$6.call(g,ot)&&!p$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);if(it&&it.defaultProps)for(ot in g=it.defaultProps,g)ct[ot]===void 0&&(ct[ot]=g[ot]);return{$$typeof:k$1,type:it,key:ut,ref:dt,props:ct,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client$1={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(it){function g(an,cn){var bn=an.length;an.push(cn);e:for(;0<bn;){var mn=bn-1>>>1,Tn=an[mn];if(0<ct(Tn,cn))an[mn]=cn,an[bn]=Tn,bn=mn;else break e}}function et(an){return an.length===0?null:an[0]}function ot(an){if(an.length===0)return null;var cn=an[0],bn=an.pop();if(bn!==cn){an[0]=bn;e:for(var mn=0,Tn=an.length,An=Tn>>>1;mn<An;){var Pn=2*(mn+1)-1,Mn=an[Pn],Rn=Pn+1,Cn=an[Rn];if(0>ct(Mn,bn))Rn<Tn&&0>ct(Cn,Mn)?(an[mn]=Cn,an[Rn]=bn,mn=Rn):(an[mn]=Mn,an[Pn]=bn,mn=Pn);else if(Rn<Tn&&0>ct(Cn,bn))an[mn]=Cn,an[Rn]=bn,mn=Rn;else break e}}return cn}function ct(an,cn){var bn=an.sortIndex-cn.sortIndex;return bn!==0?bn:an.id-cn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ut=performance;it.unstable_now=function(){return ut.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,jt=3,Ft=!1,$t=!1,zt=!1,Ut=typeof setTimeout=="function"?setTimeout:null,Bt=typeof clearTimeout=="function"?clearTimeout:null,Ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Jt(an){for(var cn=et(kt);cn!==null;){if(cn.callback===null)ot(kt);else if(cn.startTime<=an)ot(kt),cn.sortIndex=cn.expirationTime,g(St,cn);else break;cn=et(kt)}}function Zt(an){if(zt=!1,Jt(an),!$t)if(et(St)!==null)$t=!0,fn(tn);else{var cn=et(kt);cn!==null&&xn(Zt,cn.startTime-an)}}function tn(an,cn){$t=!1,zt&&(zt=!1,Bt(on),on=-1),Ft=!0;var bn=jt;try{for(Jt(cn),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>cn)||an&&!hn());){var mn=Rt.callback;if(typeof mn=="function"){Rt.callback=null,jt=Rt.priorityLevel;var Tn=mn(Rt.expirationTime<=cn);cn=it.unstable_now(),typeof Tn=="function"?Rt.callback=Tn:Rt===et(St)&&ot(St),Jt(cn)}else ot(St);Rt=et(St)}if(Rt!==null)var An=!0;else{var Pn=et(kt);Pn!==null&&xn(Zt,Pn.startTime-cn),An=!1}return An}finally{Rt=null,jt=bn,Ft=!1}}var nn=!1,rn=null,on=-1,pn=5,dn=-1;function hn(){return!(it.unstable_now()-dn<pn)}function un(){if(rn!==null){var an=it.unstable_now();dn=an;var cn=!0;try{cn=rn(!0,an)}finally{cn?En():(nn=!1,rn=null)}}else nn=!1}var En;if(typeof Ht=="function")En=function(){Ht(un)};else if(typeof MessageChannel<"u"){var wn=new MessageChannel,Sn=wn.port2;wn.port1.onmessage=un,En=function(){Sn.postMessage(null)}}else En=function(){Ut(un,0)};function fn(an){rn=an,nn||(nn=!0,En())}function xn(an,cn){on=Ut(function(){an(it.unstable_now())},cn)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(an){an.callback=null},it.unstable_continueExecution=function(){$t||Ft||($t=!0,fn(tn))},it.unstable_forceFrameRate=function(an){0>an||125<an?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pn=0<an?Math.floor(1e3/an):5},it.unstable_getCurrentPriorityLevel=function(){return jt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(an){switch(jt){case 1:case 2:case 3:var cn=3;break;default:cn=jt}var bn=jt;jt=cn;try{return an()}finally{jt=bn}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(an,cn){switch(an){case 1:case 2:case 3:case 4:case 5:break;default:an=3}var bn=jt;jt=an;try{return cn()}finally{jt=bn}},it.unstable_scheduleCallback=function(an,cn,bn){var mn=it.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?mn+bn:mn):bn=mn,an){case 1:var Tn=-1;break;case 2:Tn=250;break;case 5:Tn=1073741823;break;case 4:Tn=1e4;break;default:Tn=5e3}return Tn=bn+Tn,an={id:Tt++,callback:cn,priorityLevel:an,startTime:bn,expirationTime:Tn,sortIndex:-1},bn>mn?(an.sortIndex=bn,g(kt,an),et(St)===null&&an===et(kt)&&(zt?(Bt(on),on=-1):zt=!0,xn(Zt,bn-mn))):(an.sortIndex=Tn,g(St,an),$t||Ft||($t=!0,fn(tn))),an},it.unstable_shouldYield=hn,it.unstable_wrapCallback=function(an){var cn=jt;return function(){var bn=jt;jt=cn;try{return an.apply(this,arguments)}finally{jt=bn}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(it){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+it,et=1;et<arguments.length;et++)g+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+it+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(it,g){ha(it,g),ha(it+"Capture",g)}function ha(it,g){for(ea[it]=g,it=0;it<g.length;it++)da.add(g[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,g,et,ot){if(et!==null&&et.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return ot?!1:et!==null?!et.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,g,et,ot){if(g===null||typeof g>"u"||pa(it,g,et,ot))return!0;if(ot)return!1;if(et!==null)switch(et.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2(it,g,et,ot,ct,ut,dt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=ot,this.attributeNamespace=ct,this.mustUseProperty=et,this.propertyName=it,this.type=g,this.sanitizeURL=ut,this.removeEmptyString=dt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$1[it]=new v$2(it,0,!1,it,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var g=it[0];z$1[g]=new v$2(g,1,!1,it[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$1[it]=new v$2(it,3,!1,it.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(it){z$1[it]=new v$2(it,3,!0,it,null,!1,!1)});["capture","download"].forEach(function(it){z$1[it]=new v$2(it,4,!1,it,null,!1,!1)});["cols","rows","size","span"].forEach(function(it){z$1[it]=new v$2(it,6,!1,it,null,!1,!1)});["rowSpan","start"].forEach(function(it){z$1[it]=new v$2(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta$1(it,g,et,ot){var ct=z$1.hasOwnProperty(g)?z$1[g]:null;(ct!==null?ct.type!==0:ot||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,et,ct,ot)&&(et=null),ot||ct===null?oa(g)&&(et===null?it.removeAttribute(g):it.setAttribute(g,""+et)):ct.mustUseProperty?it[ct.propertyName]=et===null?ct.type===3?!1:"":et:(g=ct.attributeName,ot=ct.attributeNamespace,et===null?it.removeAttribute(g):(ct=ct.type,et=ct===3||ct===4&&et===!0?"":""+et,ot?it.setAttributeNS(ot,g,et):it.setAttribute(g,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$2=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(et){var g=et.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+it}var Na=!1;function Oa(it,g){if(!it||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(kt){var ot=kt}Reflect.construct(it,[],g)}else{try{g.call()}catch(kt){ot=kt}it.call(g.prototype)}else{try{throw Error()}catch(kt){ot=kt}it()}}catch(kt){if(kt&&ot&&typeof kt.stack=="string"){for(var ct=kt.stack.split(`
`),ut=ot.stack.split(`
`),dt=ct.length-1,ft=ut.length-1;1<=dt&&0<=ft&&ct[dt]!==ut[ft];)ft--;for(;1<=dt&&0<=ft;dt--,ft--)if(ct[dt]!==ut[ft]){if(dt!==1||ft!==1)do if(dt--,ft--,0>ft||ct[dt]!==ut[ft]){var St=`
`+ct[dt].replace(" at new "," at ");return it.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",it.displayName)),St}while(1<=dt&&0<=ft);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var g=it.render;return it=it.displayName,it||(it=g.displayName||g.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return g=it.displayName||null,g!==null?g:Qa(it.type)||"Memo";case Ha:g=it._payload,it=it._init;try{return Qa(it(g))}catch{}}return null}function Ra(it){var g=it.type;switch(it.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=g.render,it=it.displayName||it.name||"",g.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var g=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(it){var g=Ta(it)?"checked":"value",et=Object.getOwnPropertyDescriptor(it.constructor.prototype,g),ot=""+it[g];if(!it.hasOwnProperty(g)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ct=et.get,ut=et.set;return Object.defineProperty(it,g,{configurable:!0,get:function(){return ct.call(this)},set:function(dt){ot=""+dt,ut.call(this,dt)}}),Object.defineProperty(it,g,{enumerable:et.enumerable}),{getValue:function(){return ot},setValue:function(dt){ot=""+dt},stopTracking:function(){it._valueTracker=null,delete it[g]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var g=it._valueTracker;if(!g)return!0;var et=g.getValue(),ot="";return it&&(ot=Ta(it)?it.checked?"true":"false":it.value),it=ot,it!==et?(g.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,g){var et=g.checked;return A$2({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??it._wrapperState.initialChecked})}function Za(it,g){var et=g.defaultValue==null?"":g.defaultValue,ot=g.checked!=null?g.checked:g.defaultChecked;et=Sa(g.value!=null?g.value:et),it._wrapperState={initialChecked:ot,initialValue:et,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(it,g){g=g.checked,g!=null&&ta$1(it,"checked",g,!1)}function bb(it,g){ab(it,g);var et=Sa(g.value),ot=g.type;if(et!=null)ot==="number"?(et===0&&it.value===""||it.value!=et)&&(it.value=""+et):it.value!==""+et&&(it.value=""+et);else if(ot==="submit"||ot==="reset"){it.removeAttribute("value");return}g.hasOwnProperty("value")?cb(it,g.type,et):g.hasOwnProperty("defaultValue")&&cb(it,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(it.defaultChecked=!!g.defaultChecked)}function db(it,g,et){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var ot=g.type;if(!(ot!=="submit"&&ot!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+it._wrapperState.initialValue,et||g===it.value||(it.value=g),it.defaultValue=g}et=it.name,et!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,et!==""&&(it.name=et)}function cb(it,g,et){(g!=="number"||Xa(it.ownerDocument)!==it)&&(et==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+et&&(it.defaultValue=""+et))}var eb=Array.isArray;function fb(it,g,et,ot){if(it=it.options,g){g={};for(var ct=0;ct<et.length;ct++)g["$"+et[ct]]=!0;for(et=0;et<it.length;et++)ct=g.hasOwnProperty("$"+it[et].value),it[et].selected!==ct&&(it[et].selected=ct),ct&&ot&&(it[et].defaultSelected=!0)}else{for(et=""+Sa(et),g=null,ct=0;ct<it.length;ct++){if(it[ct].value===et){it[ct].selected=!0,ot&&(it[ct].defaultSelected=!0);return}g!==null||it[ct].disabled||(g=it[ct])}g!==null&&(g.selected=!0)}}function gb(it,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},g,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,g){var et=g.value;if(et==null){if(et=g.children,g=g.defaultValue,et!=null){if(g!=null)throw Error(p$3(92));if(eb(et)){if(1<et.length)throw Error(p$3(93));et=et[0]}g=et}g==null&&(g=""),et=g}it._wrapperState={initialValue:Sa(et)}}function ib(it,g){var et=Sa(g.value),ot=Sa(g.defaultValue);et!=null&&(et=""+et,et!==it.value&&(it.value=et),g.defaultValue==null&&it.defaultValue!==et&&(it.defaultValue=et)),ot!=null&&(it.defaultValue=""+ot)}function jb(it){var g=it.textContent;g===it._wrapperState.initialValue&&g!==""&&g!==null&&(it.value=g)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,g){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(g):it==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,et,ot,ct){MSApp.execUnsafeLocalFunction(function(){return it(g,et,ot,ct)})}:it}(function(it,g){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;g.firstChild;)it.appendChild(g.firstChild)}});function ob(it,g){if(g){var et=it.firstChild;if(et&&et===it.lastChild&&et.nodeType===3){et.nodeValue=g;return}}it.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(g){g=g+it.charAt(0).toUpperCase()+it.substring(1),pb[g]=pb[it]})});function rb(it,g,et){return g==null||typeof g=="boolean"||g===""?"":et||typeof g!="number"||g===0||pb.hasOwnProperty(it)&&pb[it]?(""+g).trim():g+"px"}function sb(it,g){it=it.style;for(var et in g)if(g.hasOwnProperty(et)){var ot=et.indexOf("--")===0,ct=rb(et,g[et],ot);et==="float"&&(et="cssFloat"),ot?it.setProperty(et,ct):it[et]=ct}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,g){if(g){if(tb[it]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,it));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$3(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$3(62))}}function vb(it,g){if(it.indexOf("-")===-1)return typeof g.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$3(280));var g=it.stateNode;g&&(g=Db(g),yb(it.stateNode,it.type,g))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,g=Ab;if(Ab=zb=null,Bb(it),g)for(it=0;it<g.length;it++)Bb(g[it])}}function Gb(it,g){return it(g)}function Hb(){}var Ib=!1;function Jb(it,g,et){if(Ib)return it(g,et);Ib=!0;try{return Gb(it,g,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,g){var et=it.stateNode;if(et===null)return null;var ot=Db(et);if(ot===null)return null;et=ot[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ot=!ot.disabled)||(it=it.type,ot=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!ot;break e;default:it=!1}if(it)return null;if(et&&typeof et!="function")throw Error(p$3(231,g,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,g,et,ot,ct,ut,dt,ft,St){var kt=Array.prototype.slice.call(arguments,3);try{g.apply(et,kt)}catch(Tt){this.onError(Tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,g,et,ot,ct,ut,dt,ft,St){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,g,et,ot,ct,ut,dt,ft,St){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=kt)}}function Vb(it){var g=it,et=it;if(it.alternate)for(;g.return;)g=g.return;else{it=g;do g=it,g.flags&4098&&(et=g.return),it=g.return;while(it)}return g.tag===3?et:null}function Wb(it){if(it.tag===13){var g=it.memoizedState;if(g===null&&(it=it.alternate,it!==null&&(g=it.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$3(188))}function Yb(it){var g=it.alternate;if(!g){if(g=Vb(it),g===null)throw Error(p$3(188));return g!==it?null:it}for(var et=it,ot=g;;){var ct=et.return;if(ct===null)break;var ut=ct.alternate;if(ut===null){if(ot=ct.return,ot!==null){et=ot;continue}break}if(ct.child===ut.child){for(ut=ct.child;ut;){if(ut===et)return Xb(ct),it;if(ut===ot)return Xb(ct),g;ut=ut.sibling}throw Error(p$3(188))}if(et.return!==ot.return)et=ct,ot=ut;else{for(var dt=!1,ft=ct.child;ft;){if(ft===et){dt=!0,et=ct,ot=ut;break}if(ft===ot){dt=!0,ot=ct,et=ut;break}ft=ft.sibling}if(!dt){for(ft=ut.child;ft;){if(ft===et){dt=!0,et=ut,ot=ct;break}if(ft===ot){dt=!0,ot=ut,et=ct;break}ft=ft.sibling}if(!dt)throw Error(p$3(189))}}if(et.alternate!==ot)throw Error(p$3(190))}if(et.tag!==3)throw Error(p$3(188));return et.stateNode.current===et?it:g}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var g=$b(it);if(g!==null)return g;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(it){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,g){var et=it.pendingLanes;if(et===0)return 0;var ot=0,ct=it.suspendedLanes,ut=it.pingedLanes,dt=et&268435455;if(dt!==0){var ft=dt&~ct;ft!==0?ot=tc(ft):(ut&=dt,ut!==0&&(ot=tc(ut)))}else dt=et&~ct,dt!==0?ot=tc(dt):ut!==0&&(ot=tc(ut));if(ot===0)return 0;if(g!==0&&g!==ot&&!(g&ct)&&(ct=ot&-ot,ut=g&-g,ct>=ut||ct===16&&(ut&4194240)!==0))return g;if(ot&4&&(ot|=et&16),g=it.entangledLanes,g!==0)for(it=it.entanglements,g&=ot;0<g;)et=31-oc(g),ct=1<<et,ot|=it[et],g&=~ct;return ot}function vc(it,g){switch(it){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,g){for(var et=it.suspendedLanes,ot=it.pingedLanes,ct=it.expirationTimes,ut=it.pendingLanes;0<ut;){var dt=31-oc(ut),ft=1<<dt,St=ct[dt];St===-1?(!(ft&et)||ft&ot)&&(ct[dt]=vc(ft,g)):St<=g&&(it.expiredLanes|=ft),ut&=~ft}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,!(rc&4194240)&&(rc=64),it}function zc(it){for(var g=[],et=0;31>et;et++)g.push(it);return g}function Ac(it,g,et){it.pendingLanes|=g,g!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,g=31-oc(g),it[g]=et}function Bc(it,g){var et=it.pendingLanes&~g;it.pendingLanes=g,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=g,it.mutableReadLanes&=g,it.entangledLanes&=g,g=it.entanglements;var ot=it.eventTimes;for(it=it.expirationTimes;0<et;){var ct=31-oc(et),ut=1<<ct;g[ct]=0,ot[ct]=-1,it[ct]=-1,et&=~ut}}function Cc(it,g){var et=it.entangledLanes|=g;for(it=it.entanglements;et;){var ot=31-oc(et),ct=1<<ot;ct&g|it[ot]&g&&(it[ot]|=g),et&=~ct}}var C$4=0;function Dc(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,g){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(it,g,et,ot,ct,ut){return it===null||it.nativeEvent!==ut?(it={blockedOn:g,domEventName:et,eventSystemFlags:ot,nativeEvent:ut,targetContainers:[ct]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),it):(it.eventSystemFlags|=ot,g=it.targetContainers,ct!==null&&g.indexOf(ct)===-1&&g.push(ct),it)}function Uc(it,g,et,ot,ct){switch(g){case"focusin":return Lc=Tc(Lc,it,g,et,ot,ct),!0;case"dragenter":return Mc=Tc(Mc,it,g,et,ot,ct),!0;case"mouseover":return Nc=Tc(Nc,it,g,et,ot,ct),!0;case"pointerover":var ut=ct.pointerId;return Oc.set(ut,Tc(Oc.get(ut)||null,it,g,et,ot,ct)),!0;case"gotpointercapture":return ut=ct.pointerId,Pc.set(ut,Tc(Pc.get(ut)||null,it,g,et,ot,ct)),!0}return!1}function Vc(it){var g=Wc(it.target);if(g!==null){var et=Vb(g);if(et!==null){if(g=et.tag,g===13){if(g=Wb(et),g!==null){it.blockedOn=g,Ic(it.priority,function(){Gc(et)});return}}else if(g===3&&et.stateNode.current.memoizedState.isDehydrated){it.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var g=it.targetContainers;0<g.length;){var et=Yc(it.domEventName,it.eventSystemFlags,g[0],it.nativeEvent);if(et===null){et=it.nativeEvent;var ot=new et.constructor(et.type,et);wb=ot,et.target.dispatchEvent(ot),wb=null}else return g=Cb(et),g!==null&&Fc(g),it.blockedOn=et,!1;g.shift()}return!0}function Zc(it,g,et){Xc(it)&&et.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,g){it.blockedOn===g&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function g(ct){return ad(ct,it)}if(0<Kc.length){ad(Kc[0],it);for(var et=1;et<Kc.length;et++){var ot=Kc[et];ot.blockedOn===it&&(ot.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(g),Pc.forEach(g),et=0;et<Qc.length;et++)ot=Qc[et],ot.blockedOn===it&&(ot.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=1,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function gd(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=4,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function fd(it,g,et,ot){if(dd){var ct=Yc(it,g,et,ot);if(ct===null)hd(it,g,ot,id$2,et),Sc(it,ot);else if(Uc(ct,it,g,et,ot))ot.stopPropagation();else if(Sc(it,ot),g&4&&-1<Rc.indexOf(it)){for(;ct!==null;){var ut=Cb(ct);if(ut!==null&&Ec(ut),ut=Yc(it,g,et,ot),ut===null&&hd(it,g,ot,id$2,et),ut===ct)break;ct=ut}ct!==null&&ot.stopPropagation()}else hd(it,g,ot,null,et)}}var id$2=null;function Yc(it,g,et,ot){if(id$2=null,it=xb(ot),it=Wc(it),it!==null)if(g=Vb(it),g===null)it=null;else if(et=g.tag,et===13){if(it=Wb(g),it!==null)return it;it=null}else if(et===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;it=null}else g!==it&&(it=null);return id$2=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,g=ld,et=g.length,ot,ct="value"in kd?kd.value:kd.textContent,ut=ct.length;for(it=0;it<et&&g[it]===ct[it];it++);var dt=et-it;for(ot=1;ot<=dt&&g[et-ot]===ct[ut-ot];ot++);return md=ct.slice(it,1<ot?1-ot:void 0)}function od(it){var g=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&g===13&&(it=13)):it=g,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function g(et,ot,ct,ut,dt){this._reactName=et,this._targetInst=ct,this.type=ot,this.nativeEvent=ut,this.target=dt,this.currentTarget=null;for(var ft in it)it.hasOwnProperty(ft)&&(et=it[ft],this[ft]=et?et(ut):ut[ft]);return this.isDefaultPrevented=(ut.defaultPrevented!=null?ut.defaultPrevented:ut.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(it):(it=Od[it])?!!g[it]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(it){if(it.key){var g=Md[it.key]||it.key;if(g!=="Unidentified")return g}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe$1=!1;function ge(it,g){switch(it){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie$2=!1;function je$1(it,g){switch(it){case"compositionend":return he$1(g);case"keypress":return g.which!==32?null:(fe$1=!0,ee$1);case"textInput":return it=g.data,it===ee$1&&fe$1?null:it;default:return null}}function ke$1(it,g){if(ie$2)return it==="compositionend"||!ae&&ge(it,g)?(it=nd(),md=ld=kd=null,ie$2=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de$1&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g==="input"?!!le[it.type]:g==="textarea"}function ne(it,g,et,ot){Eb(ot),g=oe(g,"onChange"),0<g.length&&(et=new td("onChange","change",null,et,ot),it.push({event:et,listeners:g}))}var pe=null,qe=null;function re$2(it){se(it,0)}function te$2(it){var g=ue$1(it);if(Wa(g))return it}function ve(it,g){if(it==="change")return g}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe=pe=null)}function Be$1(it){if(it.propertyName==="value"&&te$2(qe)){var g=[];ne(g,qe,it,xb(it)),Jb(re$2,g)}}function Ce(it,g,et){it==="focusin"?(Ae$1(),pe=g,qe=et,pe.attachEvent("onpropertychange",Be$1)):it==="focusout"&&Ae$1()}function De$1(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$2(qe)}function Ee(it,g){if(it==="click")return te$2(g)}function Fe$1(it,g){if(it==="input"||it==="change")return te$2(g)}function Ge$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(it,g){if(He$2(it,g))return!0;if(typeof it!="object"||it===null||typeof g!="object"||g===null)return!1;var et=Object.keys(it),ot=Object.keys(g);if(et.length!==ot.length)return!1;for(ot=0;ot<et.length;ot++){var ct=et[ot];if(!ja.call(g,ct)||!He$2(it[ct],g[ct]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,g){var et=Je(it);it=0;for(var ot;et;){if(et.nodeType===3){if(ot=it+et.textContent.length,it<=g&&ot>=g)return{node:et,offset:g-it};it=ot}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le$1(it,g){return it&&g?it===g?!0:it&&it.nodeType===3?!1:g&&g.nodeType===3?Le$1(it,g.parentNode):"contains"in it?it.contains(g):it.compareDocumentPosition?!!(it.compareDocumentPosition(g)&16):!1:!1}function Me$1(){for(var it=window,g=Xa();g instanceof it.HTMLIFrameElement;){try{var et=typeof g.contentWindow.location.href=="string"}catch{et=!1}if(et)it=g.contentWindow;else break;g=Xa(it.document)}return g}function Ne$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g&&(g==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||g==="textarea"||it.contentEditable==="true")}function Oe$1(it){var g=Me$1(),et=it.focusedElem,ot=it.selectionRange;if(g!==et&&et&&et.ownerDocument&&Le$1(et.ownerDocument.documentElement,et)){if(ot!==null&&Ne$1(et)){if(g=ot.start,it=ot.end,it===void 0&&(it=g),"selectionStart"in et)et.selectionStart=g,et.selectionEnd=Math.min(it,et.value.length);else if(it=(g=et.ownerDocument||document)&&g.defaultView||window,it.getSelection){it=it.getSelection();var ct=et.textContent.length,ut=Math.min(ot.start,ct);ot=ot.end===void 0?ut:Math.min(ot.end,ct),!it.extend&&ut>ot&&(ct=ot,ot=ut,ut=ct),ct=Ke(et,ut);var dt=Ke(et,ot);ct&&dt&&(it.rangeCount!==1||it.anchorNode!==ct.node||it.anchorOffset!==ct.offset||it.focusNode!==dt.node||it.focusOffset!==dt.offset)&&(g=g.createRange(),g.setStart(ct.node,ct.offset),it.removeAllRanges(),ut>ot?(it.addRange(g),it.extend(dt.node,dt.offset)):(g.setEnd(dt.node,dt.offset),it.addRange(g)))}}for(g=[],it=et;it=it.parentNode;)it.nodeType===1&&g.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<g.length;et++)it=g[et],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(it,g,et){var ot=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(ot)||(ot=Qe,"selectionStart"in ot&&Ne$1(ot)?ot={start:ot.selectionStart,end:ot.selectionEnd}:(ot=(ot.ownerDocument&&ot.ownerDocument.defaultView||window).getSelection(),ot={anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}),Se$1&&Ie$2(Se$1,ot)||(Se$1=ot,ot=oe(Re,"onSelect"),0<ot.length&&(g=new td("onSelect","select",null,g,et),it.push({event:g,listeners:ot}),g.target=Qe)))}function Ve(it,g){var et={};return et[it.toLowerCase()]=g.toLowerCase(),et["Webkit"+it]="webkit"+g,et["Moz"+it]="moz"+g,et}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We$1[it])return it;var g=We$1[it],et;for(et in g)if(g.hasOwnProperty(et)&&et in Ye$1)return Xe[it]=g[et];return it}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,g){df.set(it,g),fa(g,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,g,et){var ot=it.type||"unknown-event";it.currentTarget=et,Ub(ot,g,void 0,it),it.currentTarget=null}function se(it,g){g=(g&4)!==0;for(var et=0;et<it.length;et++){var ot=it[et],ct=ot.event;ot=ot.listeners;e:{var ut=void 0;if(g)for(var dt=ot.length-1;0<=dt;dt--){var ft=ot[dt],St=ft.instance,kt=ft.currentTarget;if(ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}else for(dt=0;dt<ot.length;dt++){if(ft=ot[dt],St=ft.instance,kt=ft.currentTarget,ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$1(it,g){var et=g[of];et===void 0&&(et=g[of]=new Set);var ot=it+"__bubble";et.has(ot)||(pf(g,it,2,!1),et.add(ot))}function qf(it,g,et){var ot=0;g&&(ot|=4),pf(et,it,ot,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,it),qf(et,!0,it))});var g=it.nodeType===9?it:it.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(it,g,et,ot){switch(jd(g)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}et=ct.bind(null,g,et,it),ct=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(ct=!0),ot?ct!==void 0?it.addEventListener(g,et,{capture:!0,passive:ct}):it.addEventListener(g,et,!0):ct!==void 0?it.addEventListener(g,et,{passive:ct}):it.addEventListener(g,et,!1)}function hd(it,g,et,ot,ct){var ut=ot;if(!(g&1)&&!(g&2)&&ot!==null)e:for(;;){if(ot===null)return;var dt=ot.tag;if(dt===3||dt===4){var ft=ot.stateNode.containerInfo;if(ft===ct||ft.nodeType===8&&ft.parentNode===ct)break;if(dt===4)for(dt=ot.return;dt!==null;){var St=dt.tag;if((St===3||St===4)&&(St=dt.stateNode.containerInfo,St===ct||St.nodeType===8&&St.parentNode===ct))return;dt=dt.return}for(;ft!==null;){if(dt=Wc(ft),dt===null)return;if(St=dt.tag,St===5||St===6){ot=ut=dt;continue e}ft=ft.parentNode}}ot=ot.return}Jb(function(){var kt=ut,Tt=xb(et),Rt=[];e:{var jt=df.get(it);if(jt!==void 0){var Ft=td,$t=it;switch(it){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":Ft=Rd;break;case"focusin":$t="focus",Ft=Fd;break;case"focusout":$t="blur",Ft=Fd;break;case"beforeblur":case"afterblur":Ft=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ft=Vd;break;case $e$1:case af:case bf:Ft=Hd;break;case cf:Ft=Xd;break;case"scroll":Ft=vd;break;case"wheel":Ft=Zd;break;case"copy":case"cut":case"paste":Ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ft=Td}var zt=(g&4)!==0,Ut=!zt&&it==="scroll",Bt=zt?jt!==null?jt+"Capture":null:jt;zt=[];for(var Ht=kt,Jt;Ht!==null;){Jt=Ht;var Zt=Jt.stateNode;if(Jt.tag===5&&Zt!==null&&(Jt=Zt,Bt!==null&&(Zt=Kb(Ht,Bt),Zt!=null&&zt.push(tf(Ht,Zt,Jt)))),Ut)break;Ht=Ht.return}0<zt.length&&(jt=new Ft(jt,$t,null,et,Tt),Rt.push({event:jt,listeners:zt}))}}if(!(g&7)){e:{if(jt=it==="mouseover"||it==="pointerover",Ft=it==="mouseout"||it==="pointerout",jt&&et!==wb&&($t=et.relatedTarget||et.fromElement)&&(Wc($t)||$t[uf]))break e;if((Ft||jt)&&(jt=Tt.window===Tt?Tt:(jt=Tt.ownerDocument)?jt.defaultView||jt.parentWindow:window,Ft?($t=et.relatedTarget||et.toElement,Ft=kt,$t=$t?Wc($t):null,$t!==null&&(Ut=Vb($t),$t!==Ut||$t.tag!==5&&$t.tag!==6)&&($t=null)):(Ft=null,$t=kt),Ft!==$t)){if(zt=Bd,Zt="onMouseLeave",Bt="onMouseEnter",Ht="mouse",(it==="pointerout"||it==="pointerover")&&(zt=Td,Zt="onPointerLeave",Bt="onPointerEnter",Ht="pointer"),Ut=Ft==null?jt:ue$1(Ft),Jt=$t==null?jt:ue$1($t),jt=new zt(Zt,Ht+"leave",Ft,et,Tt),jt.target=Ut,jt.relatedTarget=Jt,Zt=null,Wc(Tt)===kt&&(zt=new zt(Bt,Ht+"enter",$t,et,Tt),zt.target=Jt,zt.relatedTarget=Ut,Zt=zt),Ut=Zt,Ft&&$t)t:{for(zt=Ft,Bt=$t,Ht=0,Jt=zt;Jt;Jt=vf(Jt))Ht++;for(Jt=0,Zt=Bt;Zt;Zt=vf(Zt))Jt++;for(;0<Ht-Jt;)zt=vf(zt),Ht--;for(;0<Jt-Ht;)Bt=vf(Bt),Jt--;for(;Ht--;){if(zt===Bt||Bt!==null&&zt===Bt.alternate)break t;zt=vf(zt),Bt=vf(Bt)}zt=null}else zt=null;Ft!==null&&wf(Rt,jt,Ft,zt,!1),$t!==null&&Ut!==null&&wf(Rt,Ut,$t,zt,!0)}}e:{if(jt=kt?ue$1(kt):window,Ft=jt.nodeName&&jt.nodeName.toLowerCase(),Ft==="select"||Ft==="input"&&jt.type==="file")var tn=ve;else if(me$1(jt))if(we$1)tn=Fe$1;else{tn=De$1;var nn=Ce}else(Ft=jt.nodeName)&&Ft.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(tn=Ee);if(tn&&(tn=tn(it,kt))){ne(Rt,tn,et,Tt);break e}nn&&nn(it,jt,kt),it==="focusout"&&(nn=jt._wrapperState)&&nn.controlled&&jt.type==="number"&&cb(jt,"number",jt.value)}switch(nn=kt?ue$1(kt):window,it){case"focusin":(me$1(nn)||nn.contentEditable==="true")&&(Qe=nn,Re=kt,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(Rt,et,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(Rt,et,Tt)}var rn;if(ae)e:{switch(it){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else ie$2?ge(it,et)&&(on="onCompositionEnd"):it==="keydown"&&et.keyCode===229&&(on="onCompositionStart");on&&(de$1&&et.locale!=="ko"&&(ie$2||on!=="onCompositionStart"?on==="onCompositionEnd"&&ie$2&&(rn=nd()):(kd=Tt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),nn=oe(kt,on),0<nn.length&&(on=new Ld(on,it,null,et,Tt),Rt.push({event:on,listeners:nn}),rn?on.data=rn:(rn=he$1(et),rn!==null&&(on.data=rn)))),(rn=ce?je$1(it,et):ke$1(it,et))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Tt=new Ld("onBeforeInput","beforeinput",null,et,Tt),Rt.push({event:Tt,listeners:kt}),Tt.data=rn))}se(Rt,g)})}function tf(it,g,et){return{instance:it,listener:g,currentTarget:et}}function oe(it,g){for(var et=g+"Capture",ot=[];it!==null;){var ct=it,ut=ct.stateNode;ct.tag===5&&ut!==null&&(ct=ut,ut=Kb(it,et),ut!=null&&ot.unshift(tf(it,ut,ct)),ut=Kb(it,g),ut!=null&&ot.push(tf(it,ut,ct))),it=it.return}return ot}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,g,et,ot,ct){for(var ut=g._reactName,dt=[];et!==null&&et!==ot;){var ft=et,St=ft.alternate,kt=ft.stateNode;if(St!==null&&St===ot)break;ft.tag===5&&kt!==null&&(ft=kt,ct?(St=Kb(et,ut),St!=null&&dt.unshift(tf(et,St,ft))):ct||(St=Kb(et,ut),St!=null&&dt.push(tf(et,St,ft)))),et=et.return}dt.length!==0&&it.push({event:g,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,g,et){if(g=zf(g),zf(it)!==g&&et)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,g){return it==="textarea"||it==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,g){var et=g,ot=0;do{var ct=et.nextSibling;if(it.removeChild(et),ct&&ct.nodeType===8)if(et=ct.data,et==="/$"){if(ot===0){it.removeChild(ct),bd(g);return}ot--}else et!=="$"&&et!=="$?"&&et!=="$!"||ot++;et=ct}while(et);bd(g)}function Lf(it){for(;it!=null;it=it.nextSibling){var g=it.nodeType;if(g===1||g===3)break;if(g===8){if(g=it.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="$"||et==="$!"||et==="$?"){if(g===0)return it;g--}else et==="/$"&&g++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var g=it[Of];if(g)return g;for(var et=it.parentNode;et;){if(g=et[uf]||et[Of]){if(et=g.alternate,g.child!==null||et!==null&&et.child!==null)for(it=Mf(it);it!==null;){if(et=it[Of])return et;it=Mf(it)}return g}it=et,et=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue$1(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$3(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$2(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,g){Tf++,Sf[Tf]=it.current,it.current=g}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,g){var et=it.type.contextTypes;if(!et)return Vf;var ot=it.stateNode;if(ot&&ot.__reactInternalMemoizedUnmaskedChildContext===g)return ot.__reactInternalMemoizedMaskedChildContext;var ct={},ut;for(ut in et)ct[ut]=g[ut];return ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=g,it.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(it,g,et){if(H$3.current!==Vf)throw Error(p$3(168));G$1(H$3,g),G$1(Wf,et)}function bg(it,g,et){var ot=it.stateNode;if(g=g.childContextTypes,typeof ot.getChildContext!="function")return et;ot=ot.getChildContext();for(var ct in ot)if(!(ct in g))throw Error(p$3(108,Ra(it)||"Unknown",ct));return A$2({},et,ot)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$1(H$3,it),G$1(Wf,Wf.current),!0}function dg(it,g,et){var ot=it.stateNode;if(!ot)throw Error(p$3(169));et?(it=bg(it,g,Xf),ot.__reactInternalMemoizedMergedChildContext=it,E$2(Wf),E$2(H$3),G$1(H$3,it)):E$2(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,g=C$4;try{var et=eg;for(C$4=1;it<et.length;it++){var ot=et[it];do ot=ot(!0);while(ot!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),ct}finally{C$4=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,g){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=g}function ug(it,g,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var ot=rg;it=sg;var ct=32-oc(ot)-1;ot&=~(1<<ct),et+=1;var ut=32-oc(g)+ct;if(30<ut){var dt=ct-ct%5;ut=(ot&(1<<dt)-1).toString(32),ot>>=dt,ct-=dt,rg=1<<32-oc(g)+ct|et<<ct|ot,sg=ut+it}else rg=1<<ut|et<<ct|ot,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(it,g){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=g,et.return=it,g=it.deletions,g===null?(it.deletions=[et],it.flags|=16):g.push(et)}function Cg(it,g){switch(it.tag){case 5:var et=it.type;return g=g.nodeType!==1||et.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(it.stateNode=g,xg=it,yg=Lf(g.firstChild),!0):!1;case 6:return g=it.pendingProps===""||g.nodeType!==3?null:g,g!==null?(it.stateNode=g,xg=it,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(et=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:g,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=g,et.return=it,it.child=et,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$4){var g=yg;if(g){var et=g;if(!Cg(it,g)){if(Dg(it))throw Error(p$3(418));g=Lf(et.nextSibling);var ot=xg;g&&Cg(it,g)?Ag(ot,et):(it.flags=it.flags&-4097|2,I$4=!1,xg=it)}}else{if(Dg(it))throw Error(p$3(418));it.flags=it.flags&-4097|2,I$4=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$4)return Fg(it),I$4=!0,!1;var g;if((g=it.tag!==3)&&!(g=it.tag!==5)&&(g=it.type,g=g!=="head"&&g!=="body"&&!Ef(it.type,it.memoizedProps)),g&&(g=yg)){if(Dg(it))throw Hg(),Error(p$3(418));for(;g;)Ag(it,g),g=Lf(g.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));e:{for(it=it.nextSibling,g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="/$"){if(g===0){yg=Lf(it.nextSibling);break e}g--}else et!=="$"&&et!=="$!"&&et!=="$?"||g++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,g,et){if(it=et.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$3(309));var ot=et.stateNode}if(!ot)throw Error(p$3(147,it));var ct=ot,ut=""+it;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===ut?g.ref:(g=function(dt){var ft=ct.refs;dt===null?delete ft[ut]:ft[ut]=dt},g._stringRef=ut,g)}if(typeof it!="string")throw Error(p$3(284));if(!et._owner)throw Error(p$3(290,it))}return it}function Mg(it,g){throw it=Object.prototype.toString.call(g),Error(p$3(31,it==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":it))}function Ng(it){var g=it._init;return g(it._payload)}function Og(it){function g(Bt,Ht){if(it){var Jt=Bt.deletions;Jt===null?(Bt.deletions=[Ht],Bt.flags|=16):Jt.push(Ht)}}function et(Bt,Ht){if(!it)return null;for(;Ht!==null;)g(Bt,Ht),Ht=Ht.sibling;return null}function ot(Bt,Ht){for(Bt=new Map;Ht!==null;)Ht.key!==null?Bt.set(Ht.key,Ht):Bt.set(Ht.index,Ht),Ht=Ht.sibling;return Bt}function ct(Bt,Ht){return Bt=Pg(Bt,Ht),Bt.index=0,Bt.sibling=null,Bt}function ut(Bt,Ht,Jt){return Bt.index=Jt,it?(Jt=Bt.alternate,Jt!==null?(Jt=Jt.index,Jt<Ht?(Bt.flags|=2,Ht):Jt):(Bt.flags|=2,Ht)):(Bt.flags|=1048576,Ht)}function dt(Bt){return it&&Bt.alternate===null&&(Bt.flags|=2),Bt}function ft(Bt,Ht,Jt,Zt){return Ht===null||Ht.tag!==6?(Ht=Qg(Jt,Bt.mode,Zt),Ht.return=Bt,Ht):(Ht=ct(Ht,Jt),Ht.return=Bt,Ht)}function St(Bt,Ht,Jt,Zt){var tn=Jt.type;return tn===ya?Tt(Bt,Ht,Jt.props.children,Zt,Jt.key):Ht!==null&&(Ht.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Ha&&Ng(tn)===Ht.type)?(Zt=ct(Ht,Jt.props),Zt.ref=Lg(Bt,Ht,Jt),Zt.return=Bt,Zt):(Zt=Rg(Jt.type,Jt.key,Jt.props,null,Bt.mode,Zt),Zt.ref=Lg(Bt,Ht,Jt),Zt.return=Bt,Zt)}function kt(Bt,Ht,Jt,Zt){return Ht===null||Ht.tag!==4||Ht.stateNode.containerInfo!==Jt.containerInfo||Ht.stateNode.implementation!==Jt.implementation?(Ht=Sg(Jt,Bt.mode,Zt),Ht.return=Bt,Ht):(Ht=ct(Ht,Jt.children||[]),Ht.return=Bt,Ht)}function Tt(Bt,Ht,Jt,Zt,tn){return Ht===null||Ht.tag!==7?(Ht=Tg(Jt,Bt.mode,Zt,tn),Ht.return=Bt,Ht):(Ht=ct(Ht,Jt),Ht.return=Bt,Ht)}function Rt(Bt,Ht,Jt){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number")return Ht=Qg(""+Ht,Bt.mode,Jt),Ht.return=Bt,Ht;if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case va:return Jt=Rg(Ht.type,Ht.key,Ht.props,null,Bt.mode,Jt),Jt.ref=Lg(Bt,null,Ht),Jt.return=Bt,Jt;case wa:return Ht=Sg(Ht,Bt.mode,Jt),Ht.return=Bt,Ht;case Ha:var Zt=Ht._init;return Rt(Bt,Zt(Ht._payload),Jt)}if(eb(Ht)||Ka(Ht))return Ht=Tg(Ht,Bt.mode,Jt,null),Ht.return=Bt,Ht;Mg(Bt,Ht)}return null}function jt(Bt,Ht,Jt,Zt){var tn=Ht!==null?Ht.key:null;if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return tn!==null?null:ft(Bt,Ht,""+Jt,Zt);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:return Jt.key===tn?St(Bt,Ht,Jt,Zt):null;case wa:return Jt.key===tn?kt(Bt,Ht,Jt,Zt):null;case Ha:return tn=Jt._init,jt(Bt,Ht,tn(Jt._payload),Zt)}if(eb(Jt)||Ka(Jt))return tn!==null?null:Tt(Bt,Ht,Jt,Zt,null);Mg(Bt,Jt)}return null}function Ft(Bt,Ht,Jt,Zt,tn){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return Bt=Bt.get(Jt)||null,ft(Ht,Bt,""+Zt,tn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case va:return Bt=Bt.get(Zt.key===null?Jt:Zt.key)||null,St(Ht,Bt,Zt,tn);case wa:return Bt=Bt.get(Zt.key===null?Jt:Zt.key)||null,kt(Ht,Bt,Zt,tn);case Ha:var nn=Zt._init;return Ft(Bt,Ht,Jt,nn(Zt._payload),tn)}if(eb(Zt)||Ka(Zt))return Bt=Bt.get(Jt)||null,Tt(Ht,Bt,Zt,tn,null);Mg(Ht,Zt)}return null}function $t(Bt,Ht,Jt,Zt){for(var tn=null,nn=null,rn=Ht,on=Ht=0,pn=null;rn!==null&&on<Jt.length;on++){rn.index>on?(pn=rn,rn=null):pn=rn.sibling;var dn=jt(Bt,rn,Jt[on],Zt);if(dn===null){rn===null&&(rn=pn);break}it&&rn&&dn.alternate===null&&g(Bt,rn),Ht=ut(dn,Ht,on),nn===null?tn=dn:nn.sibling=dn,nn=dn,rn=pn}if(on===Jt.length)return et(Bt,rn),I$4&&tg(Bt,on),tn;if(rn===null){for(;on<Jt.length;on++)rn=Rt(Bt,Jt[on],Zt),rn!==null&&(Ht=ut(rn,Ht,on),nn===null?tn=rn:nn.sibling=rn,nn=rn);return I$4&&tg(Bt,on),tn}for(rn=ot(Bt,rn);on<Jt.length;on++)pn=Ft(rn,Bt,on,Jt[on],Zt),pn!==null&&(it&&pn.alternate!==null&&rn.delete(pn.key===null?on:pn.key),Ht=ut(pn,Ht,on),nn===null?tn=pn:nn.sibling=pn,nn=pn);return it&&rn.forEach(function(hn){return g(Bt,hn)}),I$4&&tg(Bt,on),tn}function zt(Bt,Ht,Jt,Zt){var tn=Ka(Jt);if(typeof tn!="function")throw Error(p$3(150));if(Jt=tn.call(Jt),Jt==null)throw Error(p$3(151));for(var nn=tn=null,rn=Ht,on=Ht=0,pn=null,dn=Jt.next();rn!==null&&!dn.done;on++,dn=Jt.next()){rn.index>on?(pn=rn,rn=null):pn=rn.sibling;var hn=jt(Bt,rn,dn.value,Zt);if(hn===null){rn===null&&(rn=pn);break}it&&rn&&hn.alternate===null&&g(Bt,rn),Ht=ut(hn,Ht,on),nn===null?tn=hn:nn.sibling=hn,nn=hn,rn=pn}if(dn.done)return et(Bt,rn),I$4&&tg(Bt,on),tn;if(rn===null){for(;!dn.done;on++,dn=Jt.next())dn=Rt(Bt,dn.value,Zt),dn!==null&&(Ht=ut(dn,Ht,on),nn===null?tn=dn:nn.sibling=dn,nn=dn);return I$4&&tg(Bt,on),tn}for(rn=ot(Bt,rn);!dn.done;on++,dn=Jt.next())dn=Ft(rn,Bt,on,dn.value,Zt),dn!==null&&(it&&dn.alternate!==null&&rn.delete(dn.key===null?on:dn.key),Ht=ut(dn,Ht,on),nn===null?tn=dn:nn.sibling=dn,nn=dn);return it&&rn.forEach(function(un){return g(Bt,un)}),I$4&&tg(Bt,on),tn}function Ut(Bt,Ht,Jt,Zt){if(typeof Jt=="object"&&Jt!==null&&Jt.type===ya&&Jt.key===null&&(Jt=Jt.props.children),typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:e:{for(var tn=Jt.key,nn=Ht;nn!==null;){if(nn.key===tn){if(tn=Jt.type,tn===ya){if(nn.tag===7){et(Bt,nn.sibling),Ht=ct(nn,Jt.props.children),Ht.return=Bt,Bt=Ht;break e}}else if(nn.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Ha&&Ng(tn)===nn.type){et(Bt,nn.sibling),Ht=ct(nn,Jt.props),Ht.ref=Lg(Bt,nn,Jt),Ht.return=Bt,Bt=Ht;break e}et(Bt,nn);break}else g(Bt,nn);nn=nn.sibling}Jt.type===ya?(Ht=Tg(Jt.props.children,Bt.mode,Zt,Jt.key),Ht.return=Bt,Bt=Ht):(Zt=Rg(Jt.type,Jt.key,Jt.props,null,Bt.mode,Zt),Zt.ref=Lg(Bt,Ht,Jt),Zt.return=Bt,Bt=Zt)}return dt(Bt);case wa:e:{for(nn=Jt.key;Ht!==null;){if(Ht.key===nn)if(Ht.tag===4&&Ht.stateNode.containerInfo===Jt.containerInfo&&Ht.stateNode.implementation===Jt.implementation){et(Bt,Ht.sibling),Ht=ct(Ht,Jt.children||[]),Ht.return=Bt,Bt=Ht;break e}else{et(Bt,Ht);break}else g(Bt,Ht);Ht=Ht.sibling}Ht=Sg(Jt,Bt.mode,Zt),Ht.return=Bt,Bt=Ht}return dt(Bt);case Ha:return nn=Jt._init,Ut(Bt,Ht,nn(Jt._payload),Zt)}if(eb(Jt))return $t(Bt,Ht,Jt,Zt);if(Ka(Jt))return zt(Bt,Ht,Jt,Zt);Mg(Bt,Jt)}return typeof Jt=="string"&&Jt!==""||typeof Jt=="number"?(Jt=""+Jt,Ht!==null&&Ht.tag===6?(et(Bt,Ht.sibling),Ht=ct(Ht,Jt),Ht.return=Bt,Bt=Ht):(et(Bt,Ht),Ht=Qg(Jt,Bt.mode,Zt),Ht.return=Bt,Bt=Ht),dt(Bt)):et(Bt,Ht)}return Ut}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(it){var g=Wg.current;E$2(Wg),it._currentValue=g}function bh(it,g,et){for(;it!==null;){var ot=it.alternate;if((it.childLanes&g)!==g?(it.childLanes|=g,ot!==null&&(ot.childLanes|=g)):ot!==null&&(ot.childLanes&g)!==g&&(ot.childLanes|=g),it===et)break;it=it.return}}function ch(it,g){Xg=it,Zg=Yg=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&g&&(dh=!0),it.firstContext=null)}function eh(it){var g=it._currentValue;if(Zg!==it)if(it={context:it,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=it,Xg.dependencies={lanes:0,firstContext:it}}else Yg=Yg.next=it;return g}var fh=null;function gh(it){fh===null?fh=[it]:fh.push(it)}function hh(it,g,et,ot){var ct=g.interleaved;return ct===null?(et.next=et,gh(g)):(et.next=ct.next,ct.next=et),g.interleaved=et,ih(it,ot)}function ih(it,g){it.lanes|=g;var et=it.alternate;for(et!==null&&(et.lanes|=g),et=it,it=it.return;it!==null;)it.childLanes|=g,et=it.alternate,et!==null&&(et.childLanes|=g),et=it,it=it.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(it,g){it=it.updateQueue,g.updateQueue===it&&(g.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function mh(it,g){return{eventTime:it,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(it,g,et){var ot=it.updateQueue;if(ot===null)return null;if(ot=ot.shared,K$2&2){var ct=ot.pending;return ct===null?g.next=g:(g.next=ct.next,ct.next=g),ot.pending=g,ih(it,et)}return ct=ot.interleaved,ct===null?(g.next=g,gh(ot)):(g.next=ct.next,ct.next=g),ot.interleaved=g,ih(it,et)}function oh(it,g,et){if(g=g.updateQueue,g!==null&&(g=g.shared,(et&4194240)!==0)){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}function ph(it,g){var et=it.updateQueue,ot=it.alternate;if(ot!==null&&(ot=ot.updateQueue,et===ot)){var ct=null,ut=null;if(et=et.firstBaseUpdate,et!==null){do{var dt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};ut===null?ct=ut=dt:ut=ut.next=dt,et=et.next}while(et!==null);ut===null?ct=ut=g:ut=ut.next=g}else ct=ut=g;et={baseState:ot.baseState,firstBaseUpdate:ct,lastBaseUpdate:ut,shared:ot.shared,effects:ot.effects},it.updateQueue=et;return}it=et.lastBaseUpdate,it===null?et.firstBaseUpdate=g:it.next=g,et.lastBaseUpdate=g}function qh(it,g,et,ot){var ct=it.updateQueue;jh=!1;var ut=ct.firstBaseUpdate,dt=ct.lastBaseUpdate,ft=ct.shared.pending;if(ft!==null){ct.shared.pending=null;var St=ft,kt=St.next;St.next=null,dt===null?ut=kt:dt.next=kt,dt=St;var Tt=it.alternate;Tt!==null&&(Tt=Tt.updateQueue,ft=Tt.lastBaseUpdate,ft!==dt&&(ft===null?Tt.firstBaseUpdate=kt:ft.next=kt,Tt.lastBaseUpdate=St))}if(ut!==null){var Rt=ct.baseState;dt=0,Tt=kt=St=null,ft=ut;do{var jt=ft.lane,Ft=ft.eventTime;if((ot&jt)===jt){Tt!==null&&(Tt=Tt.next={eventTime:Ft,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var $t=it,zt=ft;switch(jt=g,Ft=et,zt.tag){case 1:if($t=zt.payload,typeof $t=="function"){Rt=$t.call(Ft,Rt,jt);break e}Rt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=zt.payload,jt=typeof $t=="function"?$t.call(Ft,Rt,jt):$t,jt==null)break e;Rt=A$2({},Rt,jt);break e;case 2:jh=!0}}ft.callback!==null&&ft.lane!==0&&(it.flags|=64,jt=ct.effects,jt===null?ct.effects=[ft]:jt.push(ft))}else Ft={eventTime:Ft,lane:jt,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Tt===null?(kt=Tt=Ft,St=Rt):Tt=Tt.next=Ft,dt|=jt;if(ft=ft.next,ft===null){if(ft=ct.shared.pending,ft===null)break;jt=ft,ft=jt.next,jt.next=null,ct.lastBaseUpdate=jt,ct.shared.pending=null}}while(1);if(Tt===null&&(St=Rt),ct.baseState=St,ct.firstBaseUpdate=kt,ct.lastBaseUpdate=Tt,g=ct.shared.interleaved,g!==null){ct=g;do dt|=ct.lane,ct=ct.next;while(ct!==g)}else ut===null&&(ct.shared.lanes=0);rh|=dt,it.lanes=dt,it.memoizedState=Rt}}function sh(it,g,et){if(it=g.effects,g.effects=null,it!==null)for(g=0;g<it.length;g++){var ot=it[g],ct=ot.callback;if(ct!==null){if(ot.callback=null,ot=et,typeof ct!="function")throw Error(p$3(191,ct));ct.call(ot)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(it){if(it===th)throw Error(p$3(174));return it}function yh(it,g){switch(G$1(wh,g),G$1(vh$1,it),G$1(uh,th),it=g.nodeType,it){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:it=it===8?g.parentNode:g,g=it.namespaceURI||null,it=it.tagName,g=lb(g,it)}E$2(uh),G$1(uh,g)}function zh(){E$2(uh),E$2(vh$1),E$2(wh)}function Ah(it){xh(wh.current);var g=xh(uh.current),et=lb(g,it.type);g!==et&&(G$1(vh$1,it),G$1(uh,et))}function Bh(it){vh$1.current===it&&(E$2(uh),E$2(vh$1))}var L$3=Uf(0);function Ch(it){for(var g=it;g!==null;){if(g.tag===13){var et=g.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var it=0;it<Dh.length;it++)Dh[it]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$2=null,O$4=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(it,g){if(g===null)return!1;for(var et=0;et<g.length&&et<it.length;et++)if(!He$2(it[et],g[et]))return!1;return!0}function Nh(it,g,et,ot,ct,ut){if(Hh=ut,M$3=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=it===null||it.memoizedState===null?Oh:Ph,it=et(ot,ct),Jh){ut=0;do{if(Jh=!1,Kh=0,25<=ut)throw Error(p$3(301));ut+=1,O$4=N$2=null,g.updateQueue=null,Fh.current=Qh,it=et(ot,ct)}while(Jh)}if(Fh.current=Rh,g=N$2!==null&&N$2.next!==null,Hh=0,O$4=N$2=M$3=null,Ih=!1,g)throw Error(p$3(300));return it}function Sh(){var it=Kh!==0;return Kh=0,it}function Th(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it,O$4}function Uh(){if(N$2===null){var it=M$3.alternate;it=it!==null?it.memoizedState:null}else it=N$2.next;var g=O$4===null?M$3.memoizedState:O$4.next;if(g!==null)O$4=g,N$2=it;else{if(it===null)throw Error(p$3(310));N$2=it,it={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it}return O$4}function Vh(it,g){return typeof g=="function"?g(it):g}function Wh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=N$2,ct=ot.baseQueue,ut=et.pending;if(ut!==null){if(ct!==null){var dt=ct.next;ct.next=ut.next,ut.next=dt}ot.baseQueue=ct=ut,et.pending=null}if(ct!==null){ut=ct.next,ot=ot.baseState;var ft=dt=null,St=null,kt=ut;do{var Tt=kt.lane;if((Hh&Tt)===Tt)St!==null&&(St=St.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ot=kt.hasEagerState?kt.eagerState:it(ot,kt.action);else{var Rt={lane:Tt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};St===null?(ft=St=Rt,dt=ot):St=St.next=Rt,M$3.lanes|=Tt,rh|=Tt}kt=kt.next}while(kt!==null&&kt!==ut);St===null?dt=ot:St.next=ft,He$2(ot,g.memoizedState)||(dh=!0),g.memoizedState=ot,g.baseState=dt,g.baseQueue=St,et.lastRenderedState=ot}if(it=et.interleaved,it!==null){ct=it;do ut=ct.lane,M$3.lanes|=ut,rh|=ut,ct=ct.next;while(ct!==it)}else ct===null&&(et.lanes=0);return[g.memoizedState,et.dispatch]}function Xh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=et.dispatch,ct=et.pending,ut=g.memoizedState;if(ct!==null){et.pending=null;var dt=ct=ct.next;do ut=it(ut,dt.action),dt=dt.next;while(dt!==ct);He$2(ut,g.memoizedState)||(dh=!0),g.memoizedState=ut,g.baseQueue===null&&(g.baseState=ut),et.lastRenderedState=ut}return[ut,ot]}function Yh(){}function Zh(it,g){var et=M$3,ot=Uh(),ct=g(),ut=!He$2(ot.memoizedState,ct);if(ut&&(ot.memoizedState=ct,dh=!0),ot=ot.queue,$h(ai.bind(null,et,ot,it),[it]),ot.getSnapshot!==g||ut||O$4!==null&&O$4.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,ot,ct,g),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(et,g,ct)}return ct}function di(it,g,et){it.flags|=16384,it={getSnapshot:g,value:et},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.stores=[it]):(et=g.stores,et===null?g.stores=[it]:et.push(it))}function ci(it,g,et,ot){g.value=et,g.getSnapshot=ot,ei(g)&&fi(it)}function ai(it,g,et){return et(function(){ei(g)&&fi(it)})}function ei(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!He$2(it,et)}catch{return!0}}function fi(it){var g=ih(it,1);g!==null&&gi(g,it,1,-1)}function hi(it){var g=Th();return typeof it=="function"&&(it=it()),g.memoizedState=g.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:it},g.queue=it,it=it.dispatch=ii.bind(null,M$3,it),[g.memoizedState,it]}function bi(it,g,et,ot){return it={tag:it,create:g,destroy:et,deps:ot,next:null},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.lastEffect=it.next=it):(et=g.lastEffect,et===null?g.lastEffect=it.next=it:(ot=et.next,et.next=it,it.next=ot,g.lastEffect=it)),it}function ji(){return Uh().memoizedState}function ki(it,g,et,ot){var ct=Th();M$3.flags|=it,ct.memoizedState=bi(1|g,et,void 0,ot===void 0?null:ot)}function li(it,g,et,ot){var ct=Uh();ot=ot===void 0?null:ot;var ut=void 0;if(N$2!==null){var dt=N$2.memoizedState;if(ut=dt.destroy,ot!==null&&Mh(ot,dt.deps)){ct.memoizedState=bi(g,et,ut,ot);return}}M$3.flags|=it,ct.memoizedState=bi(1|g,et,ut,ot)}function mi(it,g){return ki(8390656,8,it,g)}function $h(it,g){return li(2048,8,it,g)}function ni(it,g){return li(4,2,it,g)}function oi(it,g){return li(4,4,it,g)}function pi(it,g){if(typeof g=="function")return it=it(),g(it),function(){g(null)};if(g!=null)return it=it(),g.current=it,function(){g.current=null}}function qi(it,g,et){return et=et!=null?et.concat([it]):null,li(4,4,pi.bind(null,g,it),et)}function ri(){}function si(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(et.memoizedState=[it,g],it)}function ti(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(it=it(),et.memoizedState=[it,g],it)}function ui(it,g,et){return Hh&21?(He$2(et,g)||(et=yc(),M$3.lanes|=et,rh|=et,it.baseState=!0),g):(it.baseState&&(it.baseState=!1,dh=!0),it.memoizedState=et)}function vi(it,g){var et=C$4;C$4=et!==0&&4>et?et:4,it(!0);var ot=Gh.transition;Gh.transition={};try{it(!1),g()}finally{C$4=et,Gh.transition=ot}}function wi(){return Uh().memoizedState}function xi(it,g,et){var ot=yi(it);if(et={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null},zi(it))Ai(g,et);else if(et=hh(it,g,et,ot),et!==null){var ct=R$3();gi(et,it,ot,ct),Bi(et,g,ot)}}function ii(it,g,et){var ot=yi(it),ct={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(it))Ai(g,ct);else{var ut=it.alternate;if(it.lanes===0&&(ut===null||ut.lanes===0)&&(ut=g.lastRenderedReducer,ut!==null))try{var dt=g.lastRenderedState,ft=ut(dt,et);if(ct.hasEagerState=!0,ct.eagerState=ft,He$2(ft,dt)){var St=g.interleaved;St===null?(ct.next=ct,gh(g)):(ct.next=St.next,St.next=ct),g.interleaved=ct;return}}catch{}finally{}et=hh(it,g,ct,ot),et!==null&&(ct=R$3(),gi(et,it,ot,ct),Bi(et,g,ot))}}function zi(it){var g=it.alternate;return it===M$3||g!==null&&g===M$3}function Ai(it,g){Jh=Ih=!0;var et=it.pending;et===null?g.next=g:(g.next=et.next,et.next=g),it.pending=g}function Bi(it,g,et){if(et&4194240){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(it,g){return Th().memoizedState=[it,g===void 0?null:g],it},useContext:eh,useEffect:mi,useImperativeHandle:function(it,g,et){return et=et!=null?et.concat([it]):null,ki(4194308,4,pi.bind(null,g,it),et)},useLayoutEffect:function(it,g){return ki(4194308,4,it,g)},useInsertionEffect:function(it,g){return ki(4,2,it,g)},useMemo:function(it,g){var et=Th();return g=g===void 0?null:g,it=it(),et.memoizedState=[it,g],it},useReducer:function(it,g,et){var ot=Th();return g=et!==void 0?et(g):g,ot.memoizedState=ot.baseState=g,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:g},ot.queue=it,it=it.dispatch=xi.bind(null,M$3,it),[ot.memoizedState,it]},useRef:function(it){var g=Th();return it={current:it},g.memoizedState=it},useState:hi,useDebugValue:ri,useDeferredValue:function(it){return Th().memoizedState=it},useTransition:function(){var it=hi(!1),g=it[0];return it=vi.bind(null,it[1]),Th().memoizedState=it,[g,it]},useMutableSource:function(){},useSyncExternalStore:function(it,g,et){var ot=M$3,ct=Th();if(I$4){if(et===void 0)throw Error(p$3(407));et=et()}else{if(et=g(),Q$1===null)throw Error(p$3(349));Hh&30||di(ot,g,et)}ct.memoizedState=et;var ut={value:et,getSnapshot:g};return ct.queue=ut,mi(ai.bind(null,ot,ut,it),[it]),ot.flags|=2048,bi(9,ci.bind(null,ot,ut,et,g),void 0,null),et},useId:function(){var it=Th(),g=Q$1.identifierPrefix;if(I$4){var et=sg,ot=rg;et=(ot&~(1<<32-oc(ot)-1)).toString(32)+et,g=":"+g+"R"+et,et=Kh++,0<et&&(g+="H"+et.toString(32)),g+=":"}else et=Lh++,g=":"+g+"r"+et.toString(32)+":";return it.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Wh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return N$2===null?g.memoizedState=it:ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Xh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(it,g){if(it&&it.defaultProps){g=A$2({},g),it=it.defaultProps;for(var et in it)g[et]===void 0&&(g[et]=it[et]);return g}return g}function Di(it,g,et,ot){g=it.memoizedState,et=et(ot,g),et=et==null?g:A$2({},g,et),it.memoizedState=et,it.lanes===0&&(it.updateQueue.baseState=et)}var Ei={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueReplaceState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.tag=1,ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueForceUpdate:function(it,g){it=it._reactInternals;var et=R$3(),ot=yi(it),ct=mh(et,ot);ct.tag=2,g!=null&&(ct.callback=g),g=nh(it,ct,ot),g!==null&&(gi(g,it,ot,et),oh(g,it,ot))}};function Fi(it,g,et,ot,ct,ut,dt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(ot,ut,dt):g.prototype&&g.prototype.isPureReactComponent?!Ie$2(et,ot)||!Ie$2(ct,ut):!0}function Gi(it,g,et){var ot=!1,ct=Vf,ut=g.contextType;return typeof ut=="object"&&ut!==null?ut=eh(ut):(ct=Zf(g)?Xf:H$3.current,ot=g.contextTypes,ut=(ot=ot!=null)?Yf(it,ct):Vf),g=new g(et,ut),it.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,it.stateNode=g,g._reactInternals=it,ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=ct,it.__reactInternalMemoizedMaskedChildContext=ut),g}function Hi(it,g,et,ot){it=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(et,ot),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(et,ot),g.state!==it&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(it,g,et,ot){var ct=it.stateNode;ct.props=et,ct.state=it.memoizedState,ct.refs={},kh(it);var ut=g.contextType;typeof ut=="object"&&ut!==null?ct.context=eh(ut):(ut=Zf(g)?Xf:H$3.current,ct.context=Yf(it,ut)),ct.state=it.memoizedState,ut=g.getDerivedStateFromProps,typeof ut=="function"&&(Di(it,g,ut,et),ct.state=it.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(g=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),g!==ct.state&&Ei.enqueueReplaceState(ct,ct.state,null),qh(it,et,ct,ot),ct.state=it.memoizedState),typeof ct.componentDidMount=="function"&&(it.flags|=4194308)}function Ji(it,g){try{var et="",ot=g;do et+=Pa(ot),ot=ot.return;while(ot);var ct=et}catch(ut){ct=`
Error generating stack: `+ut.message+`
`+ut.stack}return{value:it,source:g,stack:ct,digest:null}}function Ki(it,g,et){return{value:it,source:null,stack:et??null,digest:g??null}}function Li(it,g){try{console.error(g.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(it,g,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var ot=g.value;return et.callback=function(){Oi||(Oi=!0,Pi=ot),Li(it,g)},et}function Qi(it,g,et){et=mh(-1,et),et.tag=3;var ot=it.type.getDerivedStateFromError;if(typeof ot=="function"){var ct=g.value;et.payload=function(){return ot(ct)},et.callback=function(){Li(it,g)}}var ut=it.stateNode;return ut!==null&&typeof ut.componentDidCatch=="function"&&(et.callback=function(){Li(it,g),typeof ot!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var dt=g.stack;this.componentDidCatch(g.value,{componentStack:dt!==null?dt:""})}),et}function Si(it,g,et){var ot=it.pingCache;if(ot===null){ot=it.pingCache=new Mi;var ct=new Set;ot.set(g,ct)}else ct=ot.get(g),ct===void 0&&(ct=new Set,ot.set(g,ct));ct.has(et)||(ct.add(et),it=Ti.bind(null,it,g,et),g.then(it,it))}function Ui(it){do{var g;if((g=it.tag===13)&&(g=it.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return it;it=it.return}while(it!==null);return null}function Vi(it,g,et,ot,ct){return it.mode&1?(it.flags|=65536,it.lanes=ct,it):(it===g?it.flags|=65536:(it.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(g=mh(-1,1),g.tag=2,nh(et,g,1))),et.lanes|=1),it)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(it,g,et,ot){g.child=it===null?Vg(g,null,et,ot):Ug(g,it.child,et,ot)}function Yi(it,g,et,ot,ct){et=et.render;var ut=g.ref;return ch(g,ct),ot=Nh(it,g,et,ot,ut,ct),et=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&et&&vg(g),g.flags|=1,Xi(it,g,ot,ct),g.child)}function $i(it,g,et,ot,ct){if(it===null){var ut=et.type;return typeof ut=="function"&&!aj(ut)&&ut.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(g.tag=15,g.type=ut,bj(it,g,ut,ot,ct)):(it=Rg(et.type,null,ot,g,g.mode,ct),it.ref=g.ref,it.return=g,g.child=it)}if(ut=it.child,!(it.lanes&ct)){var dt=ut.memoizedProps;if(et=et.compare,et=et!==null?et:Ie$2,et(dt,ot)&&it.ref===g.ref)return Zi(it,g,ct)}return g.flags|=1,it=Pg(ut,ot),it.ref=g.ref,it.return=g,g.child=it}function bj(it,g,et,ot,ct){if(it!==null){var ut=it.memoizedProps;if(Ie$2(ut,ot)&&it.ref===g.ref)if(dh=!1,g.pendingProps=ot=ut,(it.lanes&ct)!==0)it.flags&131072&&(dh=!0);else return g.lanes=it.lanes,Zi(it,g,ct)}return cj(it,g,et,ot,ct)}function dj(it,g,et){var ot=g.pendingProps,ct=ot.children,ut=it!==null?it.memoizedState:null;if(ot.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=et;else{if(!(et&1073741824))return it=ut!==null?ut.baseLanes|et:et,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:it,cachePool:null,transitions:null},g.updateQueue=null,G$1(ej,fj),fj|=it,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot=ut!==null?ut.baseLanes:et,G$1(ej,fj),fj|=ot}else ut!==null?(ot=ut.baseLanes|et,g.memoizedState=null):ot=et,G$1(ej,fj),fj|=ot;return Xi(it,g,ct,et),g.child}function gj(it,g){var et=g.ref;(it===null&&et!==null||it!==null&&it.ref!==et)&&(g.flags|=512,g.flags|=2097152)}function cj(it,g,et,ot,ct){var ut=Zf(et)?Xf:H$3.current;return ut=Yf(g,ut),ch(g,ct),et=Nh(it,g,et,ot,ut,ct),ot=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&ot&&vg(g),g.flags|=1,Xi(it,g,et,ct),g.child)}function hj(it,g,et,ot,ct){if(Zf(et)){var ut=!0;cg(g)}else ut=!1;if(ch(g,ct),g.stateNode===null)ij(it,g),Gi(g,et,ot),Ii(g,et,ot,ct),ot=!0;else if(it===null){var dt=g.stateNode,ft=g.memoizedProps;dt.props=ft;var St=dt.context,kt=et.contextType;typeof kt=="object"&&kt!==null?kt=eh(kt):(kt=Zf(et)?Xf:H$3.current,kt=Yf(g,kt));var Tt=et.getDerivedStateFromProps,Rt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";Rt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==ot||St!==kt)&&Hi(g,dt,ot,kt),jh=!1;var jt=g.memoizedState;dt.state=jt,qh(g,ot,dt,ct),St=g.memoizedState,ft!==ot||jt!==St||Wf.current||jh?(typeof Tt=="function"&&(Di(g,et,Tt,ot),St=g.memoizedState),(ft=jh||Fi(g,et,ft,ot,jt,St,kt))?(Rt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=ot,g.memoizedState=St),dt.props=ot,dt.state=St,dt.context=kt,ot=ft):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),ot=!1)}else{dt=g.stateNode,lh(it,g),ft=g.memoizedProps,kt=g.type===g.elementType?ft:Ci(g.type,ft),dt.props=kt,Rt=g.pendingProps,jt=dt.context,St=et.contextType,typeof St=="object"&&St!==null?St=eh(St):(St=Zf(et)?Xf:H$3.current,St=Yf(g,St));var Ft=et.getDerivedStateFromProps;(Tt=typeof Ft=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==Rt||jt!==St)&&Hi(g,dt,ot,St),jh=!1,jt=g.memoizedState,dt.state=jt,qh(g,ot,dt,ct);var $t=g.memoizedState;ft!==Rt||jt!==$t||Wf.current||jh?(typeof Ft=="function"&&(Di(g,et,Ft,ot),$t=g.memoizedState),(kt=jh||Fi(g,et,kt,ot,jt,$t,St)||!1)?(Tt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(ot,$t,St),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(ot,$t,St)),typeof dt.componentDidUpdate=="function"&&(g.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),g.memoizedProps=ot,g.memoizedState=$t),dt.props=ot,dt.state=$t,dt.context=St,ot=kt):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),ot=!1)}return jj(it,g,et,ot,ut,ct)}function jj(it,g,et,ot,ct,ut){gj(it,g);var dt=(g.flags&128)!==0;if(!ot&&!dt)return ct&&dg(g,et,!1),Zi(it,g,ut);ot=g.stateNode,Wi.current=g;var ft=dt&&typeof et.getDerivedStateFromError!="function"?null:ot.render();return g.flags|=1,it!==null&&dt?(g.child=Ug(g,it.child,null,ut),g.child=Ug(g,null,ft,ut)):Xi(it,g,ft,ut),g.memoizedState=ot.state,ct&&dg(g,et,!0),g.child}function kj(it){var g=it.stateNode;g.pendingContext?ag(it,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(it,g.context,!1),yh(it,g.containerInfo)}function lj(it,g,et,ot,ct){return Ig(),Jg(ct),g.flags|=256,Xi(it,g,et,ot),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(it){return{baseLanes:it,cachePool:null,transitions:null}}function oj(it,g,et){var ot=g.pendingProps,ct=L$3.current,ut=!1,dt=(g.flags&128)!==0,ft;if((ft=dt)||(ft=it!==null&&it.memoizedState===null?!1:(ct&2)!==0),ft?(ut=!0,g.flags&=-129):(it===null||it.memoizedState!==null)&&(ct|=1),G$1(L$3,ct&1),it===null)return Eg(g),it=g.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(g.mode&1?it.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(dt=ot.children,it=ot.fallback,ut?(ot=g.mode,ut=g.child,dt={mode:"hidden",children:dt},!(ot&1)&&ut!==null?(ut.childLanes=0,ut.pendingProps=dt):ut=pj(dt,ot,0,null),it=Tg(it,ot,et,null),ut.return=g,it.return=g,ut.sibling=it,g.child=ut,g.child.memoizedState=nj(et),g.memoizedState=mj,it):qj(g,dt));if(ct=it.memoizedState,ct!==null&&(ft=ct.dehydrated,ft!==null))return rj(it,g,dt,ot,ft,ct,et);if(ut){ut=ot.fallback,dt=g.mode,ct=it.child,ft=ct.sibling;var St={mode:"hidden",children:ot.children};return!(dt&1)&&g.child!==ct?(ot=g.child,ot.childLanes=0,ot.pendingProps=St,g.deletions=null):(ot=Pg(ct,St),ot.subtreeFlags=ct.subtreeFlags&14680064),ft!==null?ut=Pg(ft,ut):(ut=Tg(ut,dt,et,null),ut.flags|=2),ut.return=g,ot.return=g,ot.sibling=ut,g.child=ot,ot=ut,ut=g.child,dt=it.child.memoizedState,dt=dt===null?nj(et):{baseLanes:dt.baseLanes|et,cachePool:null,transitions:dt.transitions},ut.memoizedState=dt,ut.childLanes=it.childLanes&~et,g.memoizedState=mj,ot}return ut=it.child,it=ut.sibling,ot=Pg(ut,{mode:"visible",children:ot.children}),!(g.mode&1)&&(ot.lanes=et),ot.return=g,ot.sibling=null,it!==null&&(et=g.deletions,et===null?(g.deletions=[it],g.flags|=16):et.push(it)),g.child=ot,g.memoizedState=null,ot}function qj(it,g){return g=pj({mode:"visible",children:g},it.mode,0,null),g.return=it,it.child=g}function sj(it,g,et,ot){return ot!==null&&Jg(ot),Ug(g,it.child,null,et),it=qj(g,g.pendingProps.children),it.flags|=2,g.memoizedState=null,it}function rj(it,g,et,ot,ct,ut,dt){if(et)return g.flags&256?(g.flags&=-257,ot=Ki(Error(p$3(422))),sj(it,g,dt,ot)):g.memoizedState!==null?(g.child=it.child,g.flags|=128,null):(ut=ot.fallback,ct=g.mode,ot=pj({mode:"visible",children:ot.children},ct,0,null),ut=Tg(ut,ct,dt,null),ut.flags|=2,ot.return=g,ut.return=g,ot.sibling=ut,g.child=ot,g.mode&1&&Ug(g,it.child,null,dt),g.child.memoizedState=nj(dt),g.memoizedState=mj,ut);if(!(g.mode&1))return sj(it,g,dt,null);if(ct.data==="$!"){if(ot=ct.nextSibling&&ct.nextSibling.dataset,ot)var ft=ot.dgst;return ot=ft,ut=Error(p$3(419)),ot=Ki(ut,ot,void 0),sj(it,g,dt,ot)}if(ft=(dt&it.childLanes)!==0,dh||ft){if(ot=Q$1,ot!==null){switch(dt&-dt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(ot.suspendedLanes|dt)?0:ct,ct!==0&&ct!==ut.retryLane&&(ut.retryLane=ct,ih(it,ct),gi(ot,it,ct,-1))}return tj(),ot=Ki(Error(p$3(421))),sj(it,g,dt,ot)}return ct.data==="$?"?(g.flags|=128,g.child=it.child,g=uj.bind(null,it),ct._reactRetry=g,null):(it=ut.treeContext,yg=Lf(ct.nextSibling),xg=g,I$4=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=g),g=qj(g,ot.children),g.flags|=4096,g)}function vj(it,g,et){it.lanes|=g;var ot=it.alternate;ot!==null&&(ot.lanes|=g),bh(it.return,g,et)}function wj(it,g,et,ot,ct){var ut=it.memoizedState;ut===null?it.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:ot,tail:et,tailMode:ct}:(ut.isBackwards=g,ut.rendering=null,ut.renderingStartTime=0,ut.last=ot,ut.tail=et,ut.tailMode=ct)}function xj(it,g,et){var ot=g.pendingProps,ct=ot.revealOrder,ut=ot.tail;if(Xi(it,g,ot.children,et),ot=L$3.current,ot&2)ot=ot&1|2,g.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=g.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&vj(it,et,g);else if(it.tag===19)vj(it,et,g);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===g)break e;for(;it.sibling===null;){if(it.return===null||it.return===g)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}ot&=1}if(G$1(L$3,ot),!(g.mode&1))g.memoizedState=null;else switch(ct){case"forwards":for(et=g.child,ct=null;et!==null;)it=et.alternate,it!==null&&Ch(it)===null&&(ct=et),et=et.sibling;et=ct,et===null?(ct=g.child,g.child=null):(ct=et.sibling,et.sibling=null),wj(g,!1,ct,et,ut);break;case"backwards":for(et=null,ct=g.child,g.child=null;ct!==null;){if(it=ct.alternate,it!==null&&Ch(it)===null){g.child=ct;break}it=ct.sibling,ct.sibling=et,et=ct,ct=it}wj(g,!0,et,null,ut);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(it,g){!(g.mode&1)&&it!==null&&(it.alternate=null,g.alternate=null,g.flags|=2)}function Zi(it,g,et){if(it!==null&&(g.dependencies=it.dependencies),rh|=g.lanes,!(et&g.childLanes))return null;if(it!==null&&g.child!==it.child)throw Error(p$3(153));if(g.child!==null){for(it=g.child,et=Pg(it,it.pendingProps),g.child=et,et.return=g;it.sibling!==null;)it=it.sibling,et=et.sibling=Pg(it,it.pendingProps),et.return=g;et.sibling=null}return g.child}function yj(it,g,et){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var ot=g.type._context,ct=g.memoizedProps.value;G$1(Wg,ot._currentValue),ot._currentValue=ct;break;case 13:if(ot=g.memoizedState,ot!==null)return ot.dehydrated!==null?(G$1(L$3,L$3.current&1),g.flags|=128,null):et&g.child.childLanes?oj(it,g,et):(G$1(L$3,L$3.current&1),it=Zi(it,g,et),it!==null?it.sibling:null);G$1(L$3,L$3.current&1);break;case 19:if(ot=(et&g.childLanes)!==0,it.flags&128){if(ot)return xj(it,g,et);g.flags|=128}if(ct=g.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(L$3,L$3.current),ot)break;return null;case 22:case 23:return g.lanes=0,dj(it,g,et)}return Zi(it,g,et)}var zj,Aj,Bj,Cj;zj=function(it,g){for(var et=g.child;et!==null;){if(et.tag===5||et.tag===6)it.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===g)break;for(;et.sibling===null;){if(et.return===null||et.return===g)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(it,g,et,ot){var ct=it.memoizedProps;if(ct!==ot){it=g.stateNode,xh(uh.current);var ut=null;switch(et){case"input":ct=Ya(it,ct),ot=Ya(it,ot),ut=[];break;case"select":ct=A$2({},ct,{value:void 0}),ot=A$2({},ot,{value:void 0}),ut=[];break;case"textarea":ct=gb(it,ct),ot=gb(it,ot),ut=[];break;default:typeof ct.onClick!="function"&&typeof ot.onClick=="function"&&(it.onclick=Bf)}ub(et,ot);var dt;et=null;for(kt in ct)if(!ot.hasOwnProperty(kt)&&ct.hasOwnProperty(kt)&&ct[kt]!=null)if(kt==="style"){var ft=ct[kt];for(dt in ft)ft.hasOwnProperty(dt)&&(et||(et={}),et[dt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?ut||(ut=[]):(ut=ut||[]).push(kt,null));for(kt in ot){var St=ot[kt];if(ft=ct!=null?ct[kt]:void 0,ot.hasOwnProperty(kt)&&St!==ft&&(St!=null||ft!=null))if(kt==="style")if(ft){for(dt in ft)!ft.hasOwnProperty(dt)||St&&St.hasOwnProperty(dt)||(et||(et={}),et[dt]="");for(dt in St)St.hasOwnProperty(dt)&&ft[dt]!==St[dt]&&(et||(et={}),et[dt]=St[dt])}else et||(ut||(ut=[]),ut.push(kt,et)),et=St;else kt==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,ft=ft?ft.__html:void 0,St!=null&&ft!==St&&(ut=ut||[]).push(kt,St)):kt==="children"?typeof St!="string"&&typeof St!="number"||(ut=ut||[]).push(kt,""+St):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(St!=null&&kt==="onScroll"&&D$1("scroll",it),ut||ft===St||(ut=[])):(ut=ut||[]).push(kt,St))}et&&(ut=ut||[]).push("style",et);var kt=ut;(g.updateQueue=kt)&&(g.flags|=4)}};Cj=function(it,g,et,ot){et!==ot&&(g.flags|=4)};function Dj(it,g){if(!I$4)switch(it.tailMode){case"hidden":g=it.tail;for(var et=null;g!==null;)g.alternate!==null&&(et=g),g=g.sibling;et===null?it.tail=null:et.sibling=null;break;case"collapsed":et=it.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?g||it.tail===null?it.tail=null:it.tail.sibling=null:ot.sibling=null}}function S$3(it){var g=it.alternate!==null&&it.alternate.child===it.child,et=0,ot=0;if(g)for(var ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags&14680064,ot|=ct.flags&14680064,ct.return=it,ct=ct.sibling;else for(ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags,ot|=ct.flags,ct.return=it,ct=ct.sibling;return it.subtreeFlags|=ot,it.childLanes=et,g}function Ej(it,g,et){var ot=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(g),null;case 1:return Zf(g.type)&&$f(),S$3(g),null;case 3:return ot=g.stateNode,zh(),E$2(Wf),E$2(H$3),Eh(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(it===null||it.child===null)&&(Gg(g)?g.flags|=4:it===null||it.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(it,g),S$3(g),null;case 5:Bh(g);var ct=xh(wh.current);if(et=g.type,it!==null&&g.stateNode!=null)Bj(it,g,et,ot,ct),it.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!ot){if(g.stateNode===null)throw Error(p$3(166));return S$3(g),null}if(it=xh(uh.current),Gg(g)){ot=g.stateNode,et=g.type;var ut=g.memoizedProps;switch(ot[Of]=g,ot[Pf]=ut,it=(g.mode&1)!==0,et){case"dialog":D$1("cancel",ot),D$1("close",ot);break;case"iframe":case"object":case"embed":D$1("load",ot);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],ot);break;case"source":D$1("error",ot);break;case"img":case"image":case"link":D$1("error",ot),D$1("load",ot);break;case"details":D$1("toggle",ot);break;case"input":Za(ot,ut),D$1("invalid",ot);break;case"select":ot._wrapperState={wasMultiple:!!ut.multiple},D$1("invalid",ot);break;case"textarea":hb(ot,ut),D$1("invalid",ot)}ub(et,ut),ct=null;for(var dt in ut)if(ut.hasOwnProperty(dt)){var ft=ut[dt];dt==="children"?typeof ft=="string"?ot.textContent!==ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",ft]):typeof ft=="number"&&ot.textContent!==""+ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",""+ft]):ea.hasOwnProperty(dt)&&ft!=null&&dt==="onScroll"&&D$1("scroll",ot)}switch(et){case"input":Va(ot),db(ot,ut,!0);break;case"textarea":Va(ot),jb(ot);break;case"select":case"option":break;default:typeof ut.onClick=="function"&&(ot.onclick=Bf)}ot=ct,g.updateQueue=ot,ot!==null&&(g.flags|=4)}else{dt=ct.nodeType===9?ct:ct.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(et)),it==="http://www.w3.org/1999/xhtml"?et==="script"?(it=dt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof ot.is=="string"?it=dt.createElement(et,{is:ot.is}):(it=dt.createElement(et),et==="select"&&(dt=it,ot.multiple?dt.multiple=!0:ot.size&&(dt.size=ot.size))):it=dt.createElementNS(it,et),it[Of]=g,it[Pf]=ot,zj(it,g,!1,!1),g.stateNode=it;e:{switch(dt=vb(et,ot),et){case"dialog":D$1("cancel",it),D$1("close",it),ct=ot;break;case"iframe":case"object":case"embed":D$1("load",it),ct=ot;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],it);ct=ot;break;case"source":D$1("error",it),ct=ot;break;case"img":case"image":case"link":D$1("error",it),D$1("load",it),ct=ot;break;case"details":D$1("toggle",it),ct=ot;break;case"input":Za(it,ot),ct=Ya(it,ot),D$1("invalid",it);break;case"option":ct=ot;break;case"select":it._wrapperState={wasMultiple:!!ot.multiple},ct=A$2({},ot,{value:void 0}),D$1("invalid",it);break;case"textarea":hb(it,ot),ct=gb(it,ot),D$1("invalid",it);break;default:ct=ot}ub(et,ct),ft=ct;for(ut in ft)if(ft.hasOwnProperty(ut)){var St=ft[ut];ut==="style"?sb(it,St):ut==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,St!=null&&nb(it,St)):ut==="children"?typeof St=="string"?(et!=="textarea"||St!=="")&&ob(it,St):typeof St=="number"&&ob(it,""+St):ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&ut!=="autoFocus"&&(ea.hasOwnProperty(ut)?St!=null&&ut==="onScroll"&&D$1("scroll",it):St!=null&&ta$1(it,ut,St,dt))}switch(et){case"input":Va(it),db(it,ot,!1);break;case"textarea":Va(it),jb(it);break;case"option":ot.value!=null&&it.setAttribute("value",""+Sa(ot.value));break;case"select":it.multiple=!!ot.multiple,ut=ot.value,ut!=null?fb(it,!!ot.multiple,ut,!1):ot.defaultValue!=null&&fb(it,!!ot.multiple,ot.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(it.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":ot=!!ot.autoFocus;break e;case"img":ot=!0;break e;default:ot=!1}}ot&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S$3(g),null;case 6:if(it&&g.stateNode!=null)Cj(it,g,it.memoizedProps,ot);else{if(typeof ot!="string"&&g.stateNode===null)throw Error(p$3(166));if(et=xh(wh.current),xh(uh.current),Gg(g)){if(ot=g.stateNode,et=g.memoizedProps,ot[Of]=g,(ut=ot.nodeValue!==et)&&(it=xg,it!==null))switch(it.tag){case 3:Af(ot.nodeValue,et,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(ot.nodeValue,et,(it.mode&1)!==0)}ut&&(g.flags|=4)}else ot=(et.nodeType===9?et:et.ownerDocument).createTextNode(ot),ot[Of]=g,g.stateNode=ot}return S$3(g),null;case 13:if(E$2(L$3),ot=g.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,ut=!1;else if(ut=Gg(g),ot!==null&&ot.dehydrated!==null){if(it===null){if(!ut)throw Error(p$3(318));if(ut=g.memoizedState,ut=ut!==null?ut.dehydrated:null,!ut)throw Error(p$3(317));ut[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S$3(g),ut=!1}else zg!==null&&(Fj(zg),zg=null),ut=!0;if(!ut)return g.flags&65536?g:null}return g.flags&128?(g.lanes=et,g):(ot=ot!==null,ot!==(it!==null&&it.memoizedState!==null)&&ot&&(g.child.flags|=8192,g.mode&1&&(it===null||L$3.current&1?T$3===0&&(T$3=3):tj())),g.updateQueue!==null&&(g.flags|=4),S$3(g),null);case 4:return zh(),Aj(it,g),it===null&&sf(g.stateNode.containerInfo),S$3(g),null;case 10:return ah(g.type._context),S$3(g),null;case 17:return Zf(g.type)&&$f(),S$3(g),null;case 19:if(E$2(L$3),ut=g.memoizedState,ut===null)return S$3(g),null;if(ot=(g.flags&128)!==0,dt=ut.rendering,dt===null)if(ot)Dj(ut,!1);else{if(T$3!==0||it!==null&&it.flags&128)for(it=g.child;it!==null;){if(dt=Ch(it),dt!==null){for(g.flags|=128,Dj(ut,!1),ot=dt.updateQueue,ot!==null&&(g.updateQueue=ot,g.flags|=4),g.subtreeFlags=0,ot=et,et=g.child;et!==null;)ut=et,it=ot,ut.flags&=14680066,dt=ut.alternate,dt===null?(ut.childLanes=0,ut.lanes=it,ut.child=null,ut.subtreeFlags=0,ut.memoizedProps=null,ut.memoizedState=null,ut.updateQueue=null,ut.dependencies=null,ut.stateNode=null):(ut.childLanes=dt.childLanes,ut.lanes=dt.lanes,ut.child=dt.child,ut.subtreeFlags=0,ut.deletions=null,ut.memoizedProps=dt.memoizedProps,ut.memoizedState=dt.memoizedState,ut.updateQueue=dt.updateQueue,ut.type=dt.type,it=dt.dependencies,ut.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),et=et.sibling;return G$1(L$3,L$3.current&1|2),g.child}it=it.sibling}ut.tail!==null&&B$1()>Gj&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304)}else{if(!ot)if(it=Ch(dt),it!==null){if(g.flags|=128,ot=!0,et=it.updateQueue,et!==null&&(g.updateQueue=et,g.flags|=4),Dj(ut,!0),ut.tail===null&&ut.tailMode==="hidden"&&!dt.alternate&&!I$4)return S$3(g),null}else 2*B$1()-ut.renderingStartTime>Gj&&et!==1073741824&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304);ut.isBackwards?(dt.sibling=g.child,g.child=dt):(et=ut.last,et!==null?et.sibling=dt:g.child=dt,ut.last=dt)}return ut.tail!==null?(g=ut.tail,ut.rendering=g,ut.tail=g.sibling,ut.renderingStartTime=B$1(),g.sibling=null,et=L$3.current,G$1(L$3,ot?et&1|2:et&1),g):(S$3(g),null);case 22:case 23:return Hj(),ot=g.memoizedState!==null,it!==null&&it.memoizedState!==null!==ot&&(g.flags|=8192),ot&&g.mode&1?fj&1073741824&&(S$3(g),g.subtreeFlags&6&&(g.flags|=8192)):S$3(g),null;case 24:return null;case 25:return null}throw Error(p$3(156,g.tag))}function Ij(it,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 3:return zh(),E$2(Wf),E$2(H$3),Eh(),it=g.flags,it&65536&&!(it&128)?(g.flags=it&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E$2(L$3),it=g.memoizedState,it!==null&&it.dehydrated!==null){if(g.alternate===null)throw Error(p$3(340));Ig()}return it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(it,g){var et=it.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(ot){W$2(it,g,ot)}else et.current=null}function Mj(it,g,et){try{et()}catch(ot){W$2(it,g,ot)}}var Nj=!1;function Oj(it,g){if(Cf=dd,it=Me$1(),Ne$1(it)){if("selectionStart"in it)var et={start:it.selectionStart,end:it.selectionEnd};else e:{et=(et=it.ownerDocument)&&et.defaultView||window;var ot=et.getSelection&&et.getSelection();if(ot&&ot.rangeCount!==0){et=ot.anchorNode;var ct=ot.anchorOffset,ut=ot.focusNode;ot=ot.focusOffset;try{et.nodeType,ut.nodeType}catch{et=null;break e}var dt=0,ft=-1,St=-1,kt=0,Tt=0,Rt=it,jt=null;t:for(;;){for(var Ft;Rt!==et||ct!==0&&Rt.nodeType!==3||(ft=dt+ct),Rt!==ut||ot!==0&&Rt.nodeType!==3||(St=dt+ot),Rt.nodeType===3&&(dt+=Rt.nodeValue.length),(Ft=Rt.firstChild)!==null;)jt=Rt,Rt=Ft;for(;;){if(Rt===it)break t;if(jt===et&&++kt===ct&&(ft=dt),jt===ut&&++Tt===ot&&(St=dt),(Ft=Rt.nextSibling)!==null)break;Rt=jt,jt=Rt.parentNode}Rt=Ft}et=ft===-1||St===-1?null:{start:ft,end:St}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:it,selectionRange:et},dd=!1,V$2=g;V$2!==null;)if(g=V$2,it=g.child,(g.subtreeFlags&1028)!==0&&it!==null)it.return=g,V$2=it;else for(;V$2!==null;){g=V$2;try{var $t=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var zt=$t.memoizedProps,Ut=$t.memoizedState,Bt=g.stateNode,Ht=Bt.getSnapshotBeforeUpdate(g.elementType===g.type?zt:Ci(g.type,zt),Ut);Bt.__reactInternalSnapshotBeforeUpdate=Ht}break;case 3:var Jt=g.stateNode.containerInfo;Jt.nodeType===1?Jt.textContent="":Jt.nodeType===9&&Jt.documentElement&&Jt.removeChild(Jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Zt){W$2(g,g.return,Zt)}if(it=g.sibling,it!==null){it.return=g.return,V$2=it;break}V$2=g.return}return $t=Nj,Nj=!1,$t}function Pj(it,g,et){var ot=g.updateQueue;if(ot=ot!==null?ot.lastEffect:null,ot!==null){var ct=ot=ot.next;do{if((ct.tag&it)===it){var ut=ct.destroy;ct.destroy=void 0,ut!==void 0&&Mj(g,et,ut)}ct=ct.next}while(ct!==ot)}}function Qj(it,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var et=g=g.next;do{if((et.tag&it)===it){var ot=et.create;et.destroy=ot()}et=et.next}while(et!==g)}}function Rj(it){var g=it.ref;if(g!==null){var et=it.stateNode;switch(it.tag){case 5:it=et;break;default:it=et}typeof g=="function"?g(it):g.current=it}}function Sj(it){var g=it.alternate;g!==null&&(it.alternate=null,Sj(g)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(g=it.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Tj(it){return it.tag===5||it.tag===3||it.tag===4}function Uj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Tj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Vj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.nodeType===8?et.parentNode.insertBefore(it,g):et.insertBefore(it,g):(et.nodeType===8?(g=et.parentNode,g.insertBefore(it,et)):(g=et,g.appendChild(it)),et=et._reactRootContainer,et!=null||g.onclick!==null||(g.onclick=Bf));else if(ot!==4&&(it=it.child,it!==null))for(Vj(it,g,et),it=it.sibling;it!==null;)Vj(it,g,et),it=it.sibling}function Wj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.insertBefore(it,g):et.appendChild(it);else if(ot!==4&&(it=it.child,it!==null))for(Wj(it,g,et),it=it.sibling;it!==null;)Wj(it,g,et),it=it.sibling}var X$4=null,Xj=!1;function Yj(it,g,et){for(et=et.child;et!==null;)Zj(it,g,et),et=et.sibling}function Zj(it,g,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$4||Lj(et,g);case 6:var ot=X$4,ct=Xj;X$4=null,Yj(it,g,et),X$4=ot,Xj=ct,X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?it.parentNode.removeChild(et):it.removeChild(et)):X$4.removeChild(et.stateNode));break;case 18:X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?Kf(it.parentNode,et):it.nodeType===1&&Kf(it,et),bd(it)):Kf(X$4,et.stateNode));break;case 4:ot=X$4,ct=Xj,X$4=et.stateNode.containerInfo,Xj=!0,Yj(it,g,et),X$4=ot,Xj=ct;break;case 0:case 11:case 14:case 15:if(!U$4&&(ot=et.updateQueue,ot!==null&&(ot=ot.lastEffect,ot!==null))){ct=ot=ot.next;do{var ut=ct,dt=ut.destroy;ut=ut.tag,dt!==void 0&&(ut&2||ut&4)&&Mj(et,g,dt),ct=ct.next}while(ct!==ot)}Yj(it,g,et);break;case 1:if(!U$4&&(Lj(et,g),ot=et.stateNode,typeof ot.componentWillUnmount=="function"))try{ot.props=et.memoizedProps,ot.state=et.memoizedState,ot.componentWillUnmount()}catch(ft){W$2(et,g,ft)}Yj(it,g,et);break;case 21:Yj(it,g,et);break;case 22:et.mode&1?(U$4=(ot=U$4)||et.memoizedState!==null,Yj(it,g,et),U$4=ot):Yj(it,g,et);break;default:Yj(it,g,et)}}function ak(it){var g=it.updateQueue;if(g!==null){it.updateQueue=null;var et=it.stateNode;et===null&&(et=it.stateNode=new Kj),g.forEach(function(ot){var ct=bk.bind(null,it,ot);et.has(ot)||(et.add(ot),ot.then(ct,ct))})}}function ck(it,g){var et=g.deletions;if(et!==null)for(var ot=0;ot<et.length;ot++){var ct=et[ot];try{var ut=it,dt=g,ft=dt;e:for(;ft!==null;){switch(ft.tag){case 5:X$4=ft.stateNode,Xj=!1;break e;case 3:X$4=ft.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=ft.stateNode.containerInfo,Xj=!0;break e}ft=ft.return}if(X$4===null)throw Error(p$3(160));Zj(ut,dt,ct),X$4=null,Xj=!1;var St=ct.alternate;St!==null&&(St.return=null),ct.return=null}catch(kt){W$2(ct,g,kt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,it),g=g.sibling}function dk(it,g){var et=it.alternate,ot=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ck(g,it),ek(it),ot&4){try{Pj(3,it,it.return),Qj(3,it)}catch(zt){W$2(it,it.return,zt)}try{Pj(5,it,it.return)}catch(zt){W$2(it,it.return,zt)}}break;case 1:ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return),it.flags&32){var ct=it.stateNode;try{ob(ct,"")}catch(zt){W$2(it,it.return,zt)}}if(ot&4&&(ct=it.stateNode,ct!=null)){var ut=it.memoizedProps,dt=et!==null?et.memoizedProps:ut,ft=it.type,St=it.updateQueue;if(it.updateQueue=null,St!==null)try{ft==="input"&&ut.type==="radio"&&ut.name!=null&&ab(ct,ut),vb(ft,dt);var kt=vb(ft,ut);for(dt=0;dt<St.length;dt+=2){var Tt=St[dt],Rt=St[dt+1];Tt==="style"?sb(ct,Rt):Tt==="dangerouslySetInnerHTML"?nb(ct,Rt):Tt==="children"?ob(ct,Rt):ta$1(ct,Tt,Rt,kt)}switch(ft){case"input":bb(ct,ut);break;case"textarea":ib(ct,ut);break;case"select":var jt=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!ut.multiple;var Ft=ut.value;Ft!=null?fb(ct,!!ut.multiple,Ft,!1):jt!==!!ut.multiple&&(ut.defaultValue!=null?fb(ct,!!ut.multiple,ut.defaultValue,!0):fb(ct,!!ut.multiple,ut.multiple?[]:"",!1))}ct[Pf]=ut}catch(zt){W$2(it,it.return,zt)}}break;case 6:if(ck(g,it),ek(it),ot&4){if(it.stateNode===null)throw Error(p$3(162));ct=it.stateNode,ut=it.memoizedProps;try{ct.nodeValue=ut}catch(zt){W$2(it,it.return,zt)}}break;case 3:if(ck(g,it),ek(it),ot&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(zt){W$2(it,it.return,zt)}break;case 4:ck(g,it),ek(it);break;case 13:ck(g,it),ek(it),ct=it.child,ct.flags&8192&&(ut=ct.memoizedState!==null,ct.stateNode.isHidden=ut,!ut||ct.alternate!==null&&ct.alternate.memoizedState!==null||(fk=B$1())),ot&4&&ak(it);break;case 22:if(Tt=et!==null&&et.memoizedState!==null,it.mode&1?(U$4=(kt=U$4)||Tt,ck(g,it),U$4=kt):ck(g,it),ek(it),ot&8192){if(kt=it.memoizedState!==null,(it.stateNode.isHidden=kt)&&!Tt&&it.mode&1)for(V$2=it,Tt=it.child;Tt!==null;){for(Rt=V$2=Tt;V$2!==null;){switch(jt=V$2,Ft=jt.child,jt.tag){case 0:case 11:case 14:case 15:Pj(4,jt,jt.return);break;case 1:Lj(jt,jt.return);var $t=jt.stateNode;if(typeof $t.componentWillUnmount=="function"){ot=jt,et=jt.return;try{g=ot,$t.props=g.memoizedProps,$t.state=g.memoizedState,$t.componentWillUnmount()}catch(zt){W$2(ot,et,zt)}}break;case 5:Lj(jt,jt.return);break;case 22:if(jt.memoizedState!==null){gk(Rt);continue}}Ft!==null?(Ft.return=jt,V$2=Ft):gk(Rt)}Tt=Tt.sibling}e:for(Tt=null,Rt=it;;){if(Rt.tag===5){if(Tt===null){Tt=Rt;try{ct=Rt.stateNode,kt?(ut=ct.style,typeof ut.setProperty=="function"?ut.setProperty("display","none","important"):ut.display="none"):(ft=Rt.stateNode,St=Rt.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null,ft.style.display=rb("display",dt))}catch(zt){W$2(it,it.return,zt)}}}else if(Rt.tag===6){if(Tt===null)try{Rt.stateNode.nodeValue=kt?"":Rt.memoizedProps}catch(zt){W$2(it,it.return,zt)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===it)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===it)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===it)break e;Tt===Rt&&(Tt=null),Rt=Rt.return}Tt===Rt&&(Tt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ck(g,it),ek(it),ot&4&&ak(it);break;case 21:break;default:ck(g,it),ek(it)}}function ek(it){var g=it.flags;if(g&2){try{e:{for(var et=it.return;et!==null;){if(Tj(et)){var ot=et;break e}et=et.return}throw Error(p$3(160))}switch(ot.tag){case 5:var ct=ot.stateNode;ot.flags&32&&(ob(ct,""),ot.flags&=-33);var ut=Uj(it);Wj(it,ut,ct);break;case 3:case 4:var dt=ot.stateNode.containerInfo,ft=Uj(it);Vj(it,ft,dt);break;default:throw Error(p$3(161))}}catch(St){W$2(it,it.return,St)}it.flags&=-3}g&4096&&(it.flags&=-4097)}function hk(it,g,et){V$2=it,ik(it)}function ik(it,g,et){for(var ot=(it.mode&1)!==0;V$2!==null;){var ct=V$2,ut=ct.child;if(ct.tag===22&&ot){var dt=ct.memoizedState!==null||Jj;if(!dt){var ft=ct.alternate,St=ft!==null&&ft.memoizedState!==null||U$4;ft=Jj;var kt=U$4;if(Jj=dt,(U$4=St)&&!kt)for(V$2=ct;V$2!==null;)dt=V$2,St=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(ct):St!==null?(St.return=dt,V$2=St):jk(ct);for(;ut!==null;)V$2=ut,ik(ut),ut=ut.sibling;V$2=ct,Jj=ft,U$4=kt}kk(it)}else ct.subtreeFlags&8772&&ut!==null?(ut.return=ct,V$2=ut):kk(it)}}function kk(it){for(;V$2!==null;){var g=V$2;if(g.flags&8772){var et=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U$4||Qj(5,g);break;case 1:var ot=g.stateNode;if(g.flags&4&&!U$4)if(et===null)ot.componentDidMount();else{var ct=g.elementType===g.type?et.memoizedProps:Ci(g.type,et.memoizedProps);ot.componentDidUpdate(ct,et.memoizedState,ot.__reactInternalSnapshotBeforeUpdate)}var ut=g.updateQueue;ut!==null&&sh(g,ut,ot);break;case 3:var dt=g.updateQueue;if(dt!==null){if(et=null,g.child!==null)switch(g.child.tag){case 5:et=g.child.stateNode;break;case 1:et=g.child.stateNode}sh(g,dt,et)}break;case 5:var ft=g.stateNode;if(et===null&&g.flags&4){et=ft;var St=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":St.autoFocus&&et.focus();break;case"img":St.src&&(et.src=St.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var kt=g.alternate;if(kt!==null){var Tt=kt.memoizedState;if(Tt!==null){var Rt=Tt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||g.flags&512&&Rj(g)}catch(jt){W$2(g,g.return,jt)}}if(g===it){V$2=null;break}if(et=g.sibling,et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function gk(it){for(;V$2!==null;){var g=V$2;if(g===it){V$2=null;break}var et=g.sibling;if(et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function jk(it){for(;V$2!==null;){var g=V$2;try{switch(g.tag){case 0:case 11:case 15:var et=g.return;try{Qj(4,g)}catch(St){W$2(g,et,St)}break;case 1:var ot=g.stateNode;if(typeof ot.componentDidMount=="function"){var ct=g.return;try{ot.componentDidMount()}catch(St){W$2(g,ct,St)}}var ut=g.return;try{Rj(g)}catch(St){W$2(g,ut,St)}break;case 5:var dt=g.return;try{Rj(g)}catch(St){W$2(g,dt,St)}}}catch(St){W$2(g,g.return,St)}if(g===it){V$2=null;break}var ft=g.sibling;if(ft!==null){ft.return=g.return,V$2=ft;break}V$2=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$2=0,Q$1=null,Y=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$3(){return K$2&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(it){return it.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(it=C$4,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it):1}function gi(it,g,et,ot){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(it,et,ot),(!(K$2&2)||it!==Q$1)&&(it===Q$1&&(!(K$2&2)&&(qk|=et),T$3===4&&Ck(it,Z$2)),Dk(it,ot),et===1&&K$2===0&&!(g.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(it,g){var et=it.callbackNode;wc(it,g);var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)et!==null&&bc(et),it.callbackNode=null,it.callbackPriority=0;else if(g=ot&-ot,it.callbackPriority!==g){if(et!=null&&bc(et),g===1)it.tag===0?ig(Ek.bind(null,it)):hg(Ek.bind(null,it)),Jf(function(){!(K$2&6)&&jg()}),et=null;else{switch(Dc(ot)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,it))}it.callbackPriority=g,it.callbackNode=et}}function Gk(it,g){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var et=it.callbackNode;if(Hk()&&it.callbackNode!==et)return null;var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)return null;if(ot&30||ot&it.expiredLanes||g)g=Ik(it,ot);else{g=ot;var ct=K$2;K$2|=2;var ut=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Gj=B$1()+500,Kk(it,g));do try{Lk();break}catch(ft){Mk(it,ft)}while(1);$g(),mk.current=ut,K$2=ct,Y!==null?g=0:(Q$1=null,Z$2=0,g=T$3)}if(g!==0){if(g===2&&(ct=xc(it),ct!==0&&(ot=ct,g=Nk(it,ct))),g===1)throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;if(g===6)Ck(it,ot);else{if(ct=it.current.alternate,!(ot&30)&&!Ok(ct)&&(g=Ik(it,ot),g===2&&(ut=xc(it),ut!==0&&(ot=ut,g=Nk(it,ut))),g===1))throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;switch(it.finishedWork=ct,it.finishedLanes=ot,g){case 0:case 1:throw Error(p$3(345));case 2:Pk(it,tk$1,uk);break;case 3:if(Ck(it,ot),(ot&130023424)===ot&&(g=fk+500-B$1(),10<g)){if(uc(it,0)!==0)break;if(ct=it.suspendedLanes,(ct&ot)!==ot){R$3(),it.pingedLanes|=it.suspendedLanes&ct;break}it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),g);break}Pk(it,tk$1,uk);break;case 4:if(Ck(it,ot),(ot&4194240)===ot)break;for(g=it.eventTimes,ct=-1;0<ot;){var dt=31-oc(ot);ut=1<<dt,dt=g[dt],dt>ct&&(ct=dt),ot&=~ut}if(ot=ct,ot=B$1()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*lk(ot/1960))-ot,10<ot){it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),ot);break}Pk(it,tk$1,uk);break;case 5:Pk(it,tk$1,uk);break;default:throw Error(p$3(329))}}}return Dk(it,B$1()),it.callbackNode===et?Gk.bind(null,it):null}function Nk(it,g){var et=sk;return it.current.memoizedState.isDehydrated&&(Kk(it,g).flags|=256),it=Ik(it,g),it!==2&&(g=tk$1,tk$1=et,g!==null&&Fj(g)),it}function Fj(it){tk$1===null?tk$1=it:tk$1.push.apply(tk$1,it)}function Ok(it){for(var g=it;;){if(g.flags&16384){var et=g.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var ot=0;ot<et.length;ot++){var ct=et[ot],ut=ct.getSnapshot;ct=ct.value;try{if(!He$2(ut(),ct))return!1}catch{return!1}}}if(et=g.child,g.subtreeFlags&16384&&et!==null)et.return=g,g=et;else{if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(it,g){for(g&=~rk,g&=~qk,it.suspendedLanes|=g,it.pingedLanes&=~g,it=it.expirationTimes;0<g;){var et=31-oc(g),ot=1<<et;it[et]=-1,g&=~ot}}function Ek(it){if(K$2&6)throw Error(p$3(327));Hk();var g=uc(it,0);if(!(g&1))return Dk(it,B$1()),null;var et=Ik(it,g);if(it.tag!==0&&et===2){var ot=xc(it);ot!==0&&(g=ot,et=Nk(it,ot))}if(et===1)throw et=pk,Kk(it,0),Ck(it,g),Dk(it,B$1()),et;if(et===6)throw Error(p$3(345));return it.finishedWork=it.current.alternate,it.finishedLanes=g,Pk(it,tk$1,uk),Dk(it,B$1()),null}function Qk(it,g){var et=K$2;K$2|=1;try{return it(g)}finally{K$2=et,K$2===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(it){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var g=K$2;K$2|=1;var et=ok.transition,ot=C$4;try{if(ok.transition=null,C$4=1,it)return it()}finally{C$4=ot,ok.transition=et,K$2=g,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(it,g){it.finishedWork=null,it.finishedLanes=0;var et=it.timeoutHandle;if(et!==-1&&(it.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var ot=et;switch(wg(ot),ot.tag){case 1:ot=ot.type.childContextTypes,ot!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$3),Eh();break;case 5:Bh(ot);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(ot.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q$1=it,Y=it=Pg(it.current,null),Z$2=fj=g,T$3=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(et=fh[g],ot=et.interleaved,ot!==null){et.interleaved=null;var ct=ot.next,ut=et.pending;if(ut!==null){var dt=ut.next;ut.next=ct,ot.next=dt}et.pending=ot}fh=null}return it}function Mk(it,g){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var ot=M$3.memoizedState;ot!==null;){var ct=ot.queue;ct!==null&&(ct.pending=null),ot=ot.next}Ih=!1}if(Hh=0,O$4=N$2=M$3=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$3=1,pk=g,Y=null;break}e:{var ut=it,dt=et.return,ft=et,St=g;if(g=Z$2,ft.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var kt=St,Tt=ft,Rt=Tt.tag;if(!(Tt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var jt=Tt.alternate;jt?(Tt.updateQueue=jt.updateQueue,Tt.memoizedState=jt.memoizedState,Tt.lanes=jt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Ft=Ui(dt);if(Ft!==null){Ft.flags&=-257,Vi(Ft,dt,ft,ut,g),Ft.mode&1&&Si(ut,kt,g),g=Ft,St=kt;var $t=g.updateQueue;if($t===null){var zt=new Set;zt.add(St),g.updateQueue=zt}else $t.add(St);break e}else{if(!(g&1)){Si(ut,kt,g),tj();break e}St=Error(p$3(426))}}else if(I$4&&ft.mode&1){var Ut=Ui(dt);if(Ut!==null){!(Ut.flags&65536)&&(Ut.flags|=256),Vi(Ut,dt,ft,ut,g),Jg(Ji(St,ft));break e}}ut=St=Ji(St,ft),T$3!==4&&(T$3=2),sk===null?sk=[ut]:sk.push(ut),ut=dt;do{switch(ut.tag){case 3:ut.flags|=65536,g&=-g,ut.lanes|=g;var Bt=Ni(ut,St,g);ph(ut,Bt);break e;case 1:ft=St;var Ht=ut.type,Jt=ut.stateNode;if(!(ut.flags&128)&&(typeof Ht.getDerivedStateFromError=="function"||Jt!==null&&typeof Jt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Jt)))){ut.flags|=65536,g&=-g,ut.lanes|=g;var Zt=Qi(ut,ft,g);ph(ut,Zt);break e}}ut=ut.return}while(ut!==null)}Sk(et)}catch(tn){g=tn,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Jk(){var it=mk.current;return mk.current=Rh,it===null?Rh:it}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(it,g){var et=K$2;K$2|=2;var ot=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Kk(it,g));do try{Tk();break}catch(ct){Mk(it,ct)}while(1);if($g(),K$2=et,mk.current=ot,Y!==null)throw Error(p$3(261));return Q$1=null,Z$2=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(it){var g=Vk(it.alternate,it,fj);it.memoizedProps=it.pendingProps,g===null?Sk(it):Y=g,nk.current=null}function Sk(it){var g=it;do{var et=g.alternate;if(it=g.return,g.flags&32768){if(et=Ij(et,g),et!==null){et.flags&=32767,Y=et;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$3=6,Y=null;return}}else if(et=Ej(et,g,fj),et!==null){Y=et;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=it}while(g!==null);T$3===0&&(T$3=5)}function Pk(it,g,et){var ot=C$4,ct=ok.transition;try{ok.transition=null,C$4=1,Wk(it,g,et,ot)}finally{ok.transition=ct,C$4=ot}return null}function Wk(it,g,et,ot){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));et=it.finishedWork;var ct=it.finishedLanes;if(et===null)return null;if(it.finishedWork=null,it.finishedLanes=0,et===it.current)throw Error(p$3(177));it.callbackNode=null,it.callbackPriority=0;var ut=et.lanes|et.childLanes;if(Bc(it,ut),it===Q$1&&(Y=Q$1=null,Z$2=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ut=(et.flags&15990)!==0,et.subtreeFlags&15990||ut){ut=ok.transition,ok.transition=null;var dt=C$4;C$4=1;var ft=K$2;K$2|=4,nk.current=null,Oj(it,et),dk(et,it),Oe$1(Df),dd=!!Cf,Df=Cf=null,it.current=et,hk(et),dc(),K$2=ft,C$4=dt,ok.transition=ut}else it.current=et;if(vk&&(vk=!1,wk=it,xk=ct),ut=it.pendingLanes,ut===0&&(Ri=null),mc(et.stateNode),Dk(it,B$1()),g!==null)for(ot=it.onRecoverableError,et=0;et<g.length;et++)ct=g[et],ot(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Oi)throw Oi=!1,it=Pi,Pi=null,it;return xk&1&&it.tag!==0&&Hk(),ut=it.pendingLanes,ut&1?it===zk?yk++:(yk=0,zk=it):yk=0,jg(),null}function Hk(){if(wk!==null){var it=Dc(xk),g=ok.transition,et=C$4;try{if(ok.transition=null,C$4=16>it?16:it,wk===null)var ot=!1;else{if(it=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var ct=K$2;for(K$2|=4,V$2=it.current;V$2!==null;){var ut=V$2,dt=ut.child;if(V$2.flags&16){var ft=ut.deletions;if(ft!==null){for(var St=0;St<ft.length;St++){var kt=ft[St];for(V$2=kt;V$2!==null;){var Tt=V$2;switch(Tt.tag){case 0:case 11:case 15:Pj(8,Tt,ut)}var Rt=Tt.child;if(Rt!==null)Rt.return=Tt,V$2=Rt;else for(;V$2!==null;){Tt=V$2;var jt=Tt.sibling,Ft=Tt.return;if(Sj(Tt),Tt===kt){V$2=null;break}if(jt!==null){jt.return=Ft,V$2=jt;break}V$2=Ft}}}var $t=ut.alternate;if($t!==null){var zt=$t.child;if(zt!==null){$t.child=null;do{var Ut=zt.sibling;zt.sibling=null,zt=Ut}while(zt!==null)}}V$2=ut}}if(ut.subtreeFlags&2064&&dt!==null)dt.return=ut,V$2=dt;else e:for(;V$2!==null;){if(ut=V$2,ut.flags&2048)switch(ut.tag){case 0:case 11:case 15:Pj(9,ut,ut.return)}var Bt=ut.sibling;if(Bt!==null){Bt.return=ut.return,V$2=Bt;break e}V$2=ut.return}}var Ht=it.current;for(V$2=Ht;V$2!==null;){dt=V$2;var Jt=dt.child;if(dt.subtreeFlags&2064&&Jt!==null)Jt.return=dt,V$2=Jt;else e:for(dt=Ht;V$2!==null;){if(ft=V$2,ft.flags&2048)try{switch(ft.tag){case 0:case 11:case 15:Qj(9,ft)}}catch(tn){W$2(ft,ft.return,tn)}if(ft===dt){V$2=null;break e}var Zt=ft.sibling;if(Zt!==null){Zt.return=ft.return,V$2=Zt;break e}V$2=ft.return}}if(K$2=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,it)}catch{}ot=!0}return ot}finally{C$4=et,ok.transition=g}}return!1}function Xk(it,g,et){g=Ji(et,g),g=Ni(it,g,1),it=nh(it,g,1),g=R$3(),it!==null&&(Ac(it,1,g),Dk(it,g))}function W$2(it,g,et){if(it.tag===3)Xk(it,it,et);else for(;g!==null;){if(g.tag===3){Xk(g,it,et);break}else if(g.tag===1){var ot=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof ot.componentDidCatch=="function"&&(Ri===null||!Ri.has(ot))){it=Ji(et,it),it=Qi(g,it,1),g=nh(g,it,1),it=R$3(),g!==null&&(Ac(g,1,it),Dk(g,it));break}}g=g.return}}function Ti(it,g,et){var ot=it.pingCache;ot!==null&&ot.delete(g),g=R$3(),it.pingedLanes|=it.suspendedLanes&et,Q$1===it&&(Z$2&et)===et&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(it,0):rk|=et),Dk(it,g)}function Yk(it,g){g===0&&(it.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var et=R$3();it=ih(it,g),it!==null&&(Ac(it,g,et),Dk(it,et))}function uj(it){var g=it.memoizedState,et=0;g!==null&&(et=g.retryLane),Yk(it,et)}function bk(it,g){var et=0;switch(it.tag){case 13:var ot=it.stateNode,ct=it.memoizedState;ct!==null&&(et=ct.retryLane);break;case 19:ot=it.stateNode;break;default:throw Error(p$3(314))}ot!==null&&ot.delete(g),Yk(it,et)}var Vk;Vk=function(it,g,et){if(it!==null)if(it.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(it.lanes&et)&&!(g.flags&128))return dh=!1,yj(it,g,et);dh=!!(it.flags&131072)}else dh=!1,I$4&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var ot=g.type;ij(it,g),it=g.pendingProps;var ct=Yf(g,H$3.current);ch(g,et),ct=Nh(null,g,ot,it,ct,et);var ut=Sh();return g.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(ot)?(ut=!0,cg(g)):ut=!1,g.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,kh(g),ct.updater=Ei,g.stateNode=ct,ct._reactInternals=g,Ii(g,ot,it,et),g=jj(null,g,ot,!0,ut,et)):(g.tag=0,I$4&&ut&&vg(g),Xi(null,g,ct,et),g=g.child),g;case 16:ot=g.elementType;e:{switch(ij(it,g),it=g.pendingProps,ct=ot._init,ot=ct(ot._payload),g.type=ot,ct=g.tag=Zk(ot),it=Ci(ot,it),ct){case 0:g=cj(null,g,ot,it,et);break e;case 1:g=hj(null,g,ot,it,et);break e;case 11:g=Yi(null,g,ot,it,et);break e;case 14:g=$i(null,g,ot,Ci(ot.type,it),et);break e}throw Error(p$3(306,ot,""))}return g;case 0:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),cj(it,g,ot,ct,et);case 1:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),hj(it,g,ot,ct,et);case 3:e:{if(kj(g),it===null)throw Error(p$3(387));ot=g.pendingProps,ut=g.memoizedState,ct=ut.element,lh(it,g),qh(g,ot,null,et);var dt=g.memoizedState;if(ot=dt.element,ut.isDehydrated)if(ut={element:ot,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},g.updateQueue.baseState=ut,g.memoizedState=ut,g.flags&256){ct=Ji(Error(p$3(423)),g),g=lj(it,g,ot,et,ct);break e}else if(ot!==ct){ct=Ji(Error(p$3(424)),g),g=lj(it,g,ot,et,ct);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I$4=!0,zg=null,et=Vg(g,null,ot,et),g.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),ot===ct){g=Zi(it,g,et);break e}Xi(it,g,ot,et)}g=g.child}return g;case 5:return Ah(g),it===null&&Eg(g),ot=g.type,ct=g.pendingProps,ut=it!==null?it.memoizedProps:null,dt=ct.children,Ef(ot,ct)?dt=null:ut!==null&&Ef(ot,ut)&&(g.flags|=32),gj(it,g),Xi(it,g,dt,et),g.child;case 6:return it===null&&Eg(g),null;case 13:return oj(it,g,et);case 4:return yh(g,g.stateNode.containerInfo),ot=g.pendingProps,it===null?g.child=Ug(g,null,ot,et):Xi(it,g,ot,et),g.child;case 11:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),Yi(it,g,ot,ct,et);case 7:return Xi(it,g,g.pendingProps,et),g.child;case 8:return Xi(it,g,g.pendingProps.children,et),g.child;case 12:return Xi(it,g,g.pendingProps.children,et),g.child;case 10:e:{if(ot=g.type._context,ct=g.pendingProps,ut=g.memoizedProps,dt=ct.value,G$1(Wg,ot._currentValue),ot._currentValue=dt,ut!==null)if(He$2(ut.value,dt)){if(ut.children===ct.children&&!Wf.current){g=Zi(it,g,et);break e}}else for(ut=g.child,ut!==null&&(ut.return=g);ut!==null;){var ft=ut.dependencies;if(ft!==null){dt=ut.child;for(var St=ft.firstContext;St!==null;){if(St.context===ot){if(ut.tag===1){St=mh(-1,et&-et),St.tag=2;var kt=ut.updateQueue;if(kt!==null){kt=kt.shared;var Tt=kt.pending;Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),kt.pending=St}}ut.lanes|=et,St=ut.alternate,St!==null&&(St.lanes|=et),bh(ut.return,et,g),ft.lanes|=et;break}St=St.next}}else if(ut.tag===10)dt=ut.type===g.type?null:ut.child;else if(ut.tag===18){if(dt=ut.return,dt===null)throw Error(p$3(341));dt.lanes|=et,ft=dt.alternate,ft!==null&&(ft.lanes|=et),bh(dt,et,g),dt=ut.sibling}else dt=ut.child;if(dt!==null)dt.return=ut;else for(dt=ut;dt!==null;){if(dt===g){dt=null;break}if(ut=dt.sibling,ut!==null){ut.return=dt.return,dt=ut;break}dt=dt.return}ut=dt}Xi(it,g,ct.children,et),g=g.child}return g;case 9:return ct=g.type,ot=g.pendingProps.children,ch(g,et),ct=eh(ct),ot=ot(ct),g.flags|=1,Xi(it,g,ot,et),g.child;case 14:return ot=g.type,ct=Ci(ot,g.pendingProps),ct=Ci(ot.type,ct),$i(it,g,ot,ct,et);case 15:return bj(it,g,g.type,g.pendingProps,et);case 17:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),ij(it,g),g.tag=1,Zf(ot)?(it=!0,cg(g)):it=!1,ch(g,et),Gi(g,ot,ct),Ii(g,ot,ct,et),jj(null,g,ot,!0,it,et);case 19:return xj(it,g,et);case 22:return dj(it,g,et)}throw Error(p$3(156,g.tag))};function Fk(it,g){return ac(it,g)}function $k(it,g,et,ot){this.tag=it,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ot,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,g,et,ot){return new $k(it,g,et,ot)}function aj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function Zk(it){if(typeof it=="function")return aj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function Pg(it,g){var et=it.alternate;return et===null?(et=Bg(it.tag,g,it.key,it.mode),et.elementType=it.elementType,et.type=it.type,et.stateNode=it.stateNode,et.alternate=it,it.alternate=et):(et.pendingProps=g,et.type=it.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=it.flags&14680064,et.childLanes=it.childLanes,et.lanes=it.lanes,et.child=it.child,et.memoizedProps=it.memoizedProps,et.memoizedState=it.memoizedState,et.updateQueue=it.updateQueue,g=it.dependencies,et.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},et.sibling=it.sibling,et.index=it.index,et.ref=it.ref,et}function Rg(it,g,et,ot,ct,ut){var dt=2;if(ot=it,typeof it=="function")aj(it)&&(dt=1);else if(typeof it=="string")dt=5;else e:switch(it){case ya:return Tg(et.children,ct,ut,g);case za:dt=8,ct|=8;break;case Aa:return it=Bg(12,et,g,ct|2),it.elementType=Aa,it.lanes=ut,it;case Ea:return it=Bg(13,et,g,ct),it.elementType=Ea,it.lanes=ut,it;case Fa:return it=Bg(19,et,g,ct),it.elementType=Fa,it.lanes=ut,it;case Ia:return pj(et,ct,ut,g);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:dt=10;break e;case Ca:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,ot=null;break e}throw Error(p$3(130,it==null?it:typeof it,""))}return g=Bg(dt,et,g,ct),g.elementType=it,g.type=ot,g.lanes=ut,g}function Tg(it,g,et,ot){return it=Bg(7,it,ot,g),it.lanes=et,it}function pj(it,g,et,ot){return it=Bg(22,it,ot,g),it.elementType=Ia,it.lanes=et,it.stateNode={isHidden:!1},it}function Qg(it,g,et){return it=Bg(6,it,null,g),it.lanes=et,it}function Sg(it,g,et){return g=Bg(4,it.children!==null?it.children:[],it.key,g),g.lanes=et,g.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},g}function al(it,g,et,ot,ct){this.tag=g,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ot,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function bl(it,g,et,ot,ct,ut,dt,ft,St){return it=new al(it,g,et,ft,St),g===1?(g=1,ut===!0&&(g|=8)):g=0,ut=Bg(3,null,null,g),it.current=ut,ut.stateNode=it,ut.memoizedState={element:ot,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ut),it}function cl(it,g,et){var ot=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ot==null?null:""+ot,children:it,containerInfo:g,implementation:et}}function dl(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$3(170));var g=it;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$3(171))}if(it.tag===1){var et=it.type;if(Zf(et))return bg(it,et,g)}return g}function el(it,g,et,ot,ct,ut,dt,ft,St){return it=bl(et,ot,!0,it,ct,ut,dt,ft,St),it.context=dl(null),et=it.current,ot=R$3(),ct=yi(et),ut=mh(ot,ct),ut.callback=g??null,nh(et,ut,ct),it.current.lanes=ct,Ac(it,ct,ot),Dk(it,ot),it}function fl(it,g,et,ot){var ct=g.current,ut=R$3(),dt=yi(ct);return et=dl(et),g.context===null?g.context=et:g.pendingContext=et,g=mh(ut,dt),g.payload={element:it},ot=ot===void 0?null:ot,ot!==null&&(g.callback=ot),it=nh(ct,g,dt),it!==null&&(gi(it,ct,dt,ut),oh(it,ct,dt)),dt}function gl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function hl(it,g){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var et=it.retryLane;it.retryLane=et!==0&&et<g?et:g}}function il(it,g){hl(it,g),(it=it.alternate)&&hl(it,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(it){console.error(it)};function ll(it){this._internalRoot=it}ml.prototype.render=ll.prototype.render=function(it){var g=this._internalRoot;if(g===null)throw Error(p$3(409));fl(it,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var g=it.containerInfo;Rk(function(){fl(null,it,null,null)}),g[uf]=null}};function ml(it){this._internalRoot=it}ml.prototype.unstable_scheduleHydration=function(it){if(it){var g=Hc();it={blockedOn:null,target:it,priority:g};for(var et=0;et<Qc.length&&g!==0&&g<Qc[et].priority;et++);Qc.splice(et,0,it),et===0&&Vc(it)}};function nl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(it,g,et,ot,ct){if(ct){if(typeof ot=="function"){var ut=ot;ot=function(){var kt=gl(dt);ut.call(kt)}}var dt=el(g,ot,it,0,null,!1,!1,"",pl);return it._reactRootContainer=dt,it[uf]=dt.current,sf(it.nodeType===8?it.parentNode:it),Rk(),dt}for(;ct=it.lastChild;)it.removeChild(ct);if(typeof ot=="function"){var ft=ot;ot=function(){var kt=gl(St);ft.call(kt)}}var St=bl(it,0,!1,null,null,!1,!1,"",pl);return it._reactRootContainer=St,it[uf]=St.current,sf(it.nodeType===8?it.parentNode:it),Rk(function(){fl(g,St,et,ot)}),St}function rl(it,g,et,ot,ct){var ut=et._reactRootContainer;if(ut){var dt=ut;if(typeof ct=="function"){var ft=ct;ct=function(){var St=gl(dt);ft.call(St)}}fl(g,dt,it,ct)}else dt=ql(et,g,it,ct,ot);return gl(dt)}Ec=function(it){switch(it.tag){case 3:var g=it.stateNode;if(g.current.memoizedState.isDehydrated){var et=tc(g.pendingLanes);et!==0&&(Cc(g,et|1),Dk(g,B$1()),!(K$2&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ot=ih(it,1);if(ot!==null){var ct=R$3();gi(ot,it,1,ct)}}),il(it,1)}};Fc=function(it){if(it.tag===13){var g=ih(it,134217728);if(g!==null){var et=R$3();gi(g,it,134217728,et)}il(it,134217728)}};Gc=function(it){if(it.tag===13){var g=yi(it),et=ih(it,g);if(et!==null){var ot=R$3();gi(et,it,g,ot)}il(it,g)}};Hc=function(){return C$4};Ic=function(it,g){var et=C$4;try{return C$4=it,g()}finally{C$4=et}};yb=function(it,g,et){switch(g){case"input":if(bb(it,et),g=et.name,et.type==="radio"&&g!=null){for(et=it;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<et.length;g++){var ot=et[g];if(ot!==it&&ot.form===it.form){var ct=Db(ot);if(!ct)throw Error(p$3(90));Wa(ot),bb(ot,ct)}}}break;case"textarea":ib(it,et);break;case"select":g=et.value,g!=null&&fb(it,!!et.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(it,g){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$3(200));return cl(it,g,null,et)};reactDom_production_min.createRoot=function(it,g){if(!nl(it))throw Error(p$3(299));var et=!1,ot="",ct=kl;return g!=null&&(g.unstable_strictMode===!0&&(et=!0),g.identifierPrefix!==void 0&&(ot=g.identifierPrefix),g.onRecoverableError!==void 0&&(ct=g.onRecoverableError)),g=bl(it,1,!1,null,null,et,!1,ot,ct),it[uf]=g.current,sf(it.nodeType===8?it.parentNode:it),new ll(g)};reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var g=it._reactInternals;if(g===void 0)throw typeof it.render=="function"?Error(p$3(188)):(it=Object.keys(it).join(","),Error(p$3(268,it)));return it=Zb(g),it=it===null?null:it.stateNode,it};reactDom_production_min.flushSync=function(it){return Rk(it)};reactDom_production_min.hydrate=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!0,et)};reactDom_production_min.hydrateRoot=function(it,g,et){if(!nl(it))throw Error(p$3(405));var ot=et!=null&&et.hydratedSources||null,ct=!1,ut="",dt=kl;if(et!=null&&(et.unstable_strictMode===!0&&(ct=!0),et.identifierPrefix!==void 0&&(ut=et.identifierPrefix),et.onRecoverableError!==void 0&&(dt=et.onRecoverableError)),g=el(g,null,it,1,et??null,ct,!1,ut,dt),it[uf]=g.current,sf(it),ot)for(it=0;it<ot.length;it++)et=ot[it],ct=et._getVersion,ct=ct(et._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[et,ct]:g.mutableSourceEagerHydrationData.push(et,ct);return new ml(g)};reactDom_production_min.render=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!1,et)};reactDom_production_min.unmountComponentAtNode=function(it){if(!ol(it))throw Error(p$3(40));return it._reactRootContainer?(Rk(function(){rl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,g,et,ot){if(!ol(et))throw Error(p$3(200));if(it==null||it._reactInternals===void 0)throw Error(p$3(38));return rl(it,g,et,!1,ot)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(it){console.error(it)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var hydrateRoot,createRoot,m$5=reactDomExports;createRoot=client$1.createRoot=m$5.createRoot,hydrateRoot=client$1.hydrateRoot=m$5.hydrateRoot;const client=_mergeNamespaces({__proto__:null,get createRoot(){return createRoot},default:client$1,get hydrateRoot(){return hydrateRoot}},[client$1]);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$2.apply(this,arguments)}var Action;(function(it){it.Pop="POP",it.Push="PUSH",it.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(it){it===void 0&&(it={});function g(ot,ct){let{pathname:ut,search:dt,hash:ft}=ot.location;return createLocation("",{pathname:ut,search:dt,hash:ft},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function et(ot,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(g,et,null,it)}function invariant$2(it,g){if(it===!1||it===null||typeof it>"u")throw new Error(g)}function warning$2(it,g){if(!it){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(it,g){return{usr:it.state,key:it.key,idx:g}}function createLocation(it,g,et,ot){return et===void 0&&(et=null),_extends$2({pathname:typeof it=="string"?it:it.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:et,key:g&&g.key||ot||createKey$1()})}function createPath(it){let{pathname:g="/",search:et="",hash:ot=""}=it;return et&&et!=="?"&&(g+=et.charAt(0)==="?"?et:"?"+et),ot&&ot!=="#"&&(g+=ot.charAt(0)==="#"?ot:"#"+ot),g}function parsePath(it){let g={};if(it){let et=it.indexOf("#");et>=0&&(g.hash=it.substr(et),it=it.substr(0,et));let ot=it.indexOf("?");ot>=0&&(g.search=it.substr(ot),it=it.substr(0,ot)),it&&(g.pathname=it)}return g}function getUrlBasedHistory(it,g,et,ot){ot===void 0&&(ot={});let{window:ct=document.defaultView,v5Compat:ut=!1}=ot,dt=ct.history,ft=Action.Pop,St=null,kt=Tt();kt==null&&(kt=0,dt.replaceState(_extends$2({},dt.state,{idx:kt}),""));function Tt(){return(dt.state||{idx:null}).idx}function Rt(){ft=Action.Pop;let Ut=Tt(),Bt=Ut==null?null:Ut-kt;kt=Ut,St&&St({action:ft,location:zt.location,delta:Bt})}function jt(Ut,Bt){ft=Action.Push;let Ht=createLocation(zt.location,Ut,Bt);et&&et(Ht,Ut),kt=Tt()+1;let Jt=getHistoryState(Ht,kt),Zt=zt.createHref(Ht);try{dt.pushState(Jt,"",Zt)}catch(tn){if(tn instanceof DOMException&&tn.name==="DataCloneError")throw tn;ct.location.assign(Zt)}ut&&St&&St({action:ft,location:zt.location,delta:1})}function Ft(Ut,Bt){ft=Action.Replace;let Ht=createLocation(zt.location,Ut,Bt);et&&et(Ht,Ut),kt=Tt();let Jt=getHistoryState(Ht,kt),Zt=zt.createHref(Ht);dt.replaceState(Jt,"",Zt),ut&&St&&St({action:ft,location:zt.location,delta:0})}function $t(Ut){let Bt=ct.location.origin!=="null"?ct.location.origin:ct.location.href,Ht=typeof Ut=="string"?Ut:createPath(Ut);return Ht=Ht.replace(/ $/,"%20"),invariant$2(Bt,"No window.location.(origin|href) available to create URL for href: "+Ht),new URL(Ht,Bt)}let zt={get action(){return ft},get location(){return it(ct,dt)},listen(Ut){if(St)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,Rt),St=Ut,()=>{ct.removeEventListener(PopStateEventType,Rt),St=null}},createHref(Ut){return g(ct,Ut)},createURL:$t,encodeLocation(Ut){let Bt=$t(Ut);return{pathname:Bt.pathname,search:Bt.search,hash:Bt.hash}},push:jt,replace:Ft,go(Ut){return dt.go(Ut)}};return zt}var ResultType;(function(it){it.data="data",it.deferred="deferred",it.redirect="redirect",it.error="error"})(ResultType||(ResultType={}));function matchRoutes(it,g,et){return et===void 0&&(et="/"),matchRoutesImpl(it,g,et,!1)}function matchRoutesImpl(it,g,et,ot){let ct=typeof g=="string"?parsePath(g):g,ut=stripBasename(ct.pathname||"/",et);if(ut==null)return null;let dt=flattenRoutes(it);rankRouteBranches(dt);let ft=null;for(let St=0;ft==null&&St<dt.length;++St){let kt=decodePath(ut);ft=matchRouteBranch(dt[St],kt,ot)}return ft}function flattenRoutes(it,g,et,ot){g===void 0&&(g=[]),et===void 0&&(et=[]),ot===void 0&&(ot="");let ct=(ut,dt,ft)=>{let St={relativePath:ft===void 0?ut.path||"":ft,caseSensitive:ut.caseSensitive===!0,childrenIndex:dt,route:ut};St.relativePath.startsWith("/")&&(invariant$2(St.relativePath.startsWith(ot),'Absolute route path "'+St.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),St.relativePath=St.relativePath.slice(ot.length));let kt=joinPaths([ot,St.relativePath]),Tt=et.concat(St);ut.children&&ut.children.length>0&&(invariant$2(ut.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+kt+'".')),flattenRoutes(ut.children,g,Tt,kt)),!(ut.path==null&&!ut.index)&&g.push({path:kt,score:computeScore(kt,ut.index),routesMeta:Tt})};return it.forEach((ut,dt)=>{var ft;if(ut.path===""||!((ft=ut.path)!=null&&ft.includes("?")))ct(ut,dt);else for(let St of explodeOptionalSegments(ut.path))ct(ut,dt,St)}),g}function explodeOptionalSegments(it){let g=it.split("/");if(g.length===0)return[];let[et,...ot]=g,ct=et.endsWith("?"),ut=et.replace(/\?$/,"");if(ot.length===0)return ct?[ut,""]:[ut];let dt=explodeOptionalSegments(ot.join("/")),ft=[];return ft.push(...dt.map(St=>St===""?ut:[ut,St].join("/"))),ct&&ft.push(...dt),ft.map(St=>it.startsWith("/")&&St===""?"/":St)}function rankRouteBranches(it){it.sort((g,et)=>g.score!==et.score?et.score-g.score:compareIndexes(g.routesMeta.map(ot=>ot.childrenIndex),et.routesMeta.map(ot=>ot.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=it=>it==="*";function computeScore(it,g){let et=it.split("/"),ot=et.length;return et.some(isSplat)&&(ot+=splatPenalty),g&&(ot+=indexRouteValue),et.filter(ct=>!isSplat(ct)).reduce((ct,ut)=>ct+(paramRe.test(ut)?dynamicSegmentValue:ut===""?emptySegmentValue:staticSegmentValue),ot)}function compareIndexes(it,g){return it.length===g.length&&it.slice(0,-1).every((ot,ct)=>ot===g[ct])?it[it.length-1]-g[g.length-1]:0}function matchRouteBranch(it,g,et){et===void 0&&(et=!1);let{routesMeta:ot}=it,ct={},ut="/",dt=[];for(let ft=0;ft<ot.length;++ft){let St=ot[ft],kt=ft===ot.length-1,Tt=ut==="/"?g:g.slice(ut.length)||"/",Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:kt},Tt),jt=St.route;if(!Rt&&kt&&et&&!ot[ot.length-1].route.index&&(Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:!1},Tt)),!Rt)return null;Object.assign(ct,Rt.params),dt.push({params:ct,pathname:joinPaths([ut,Rt.pathname]),pathnameBase:normalizePathname(joinPaths([ut,Rt.pathnameBase])),route:jt}),Rt.pathnameBase!=="/"&&(ut=joinPaths([ut,Rt.pathnameBase]))}return dt}function matchPath(it,g){typeof it=="string"&&(it={path:it,caseSensitive:!1,end:!0});let[et,ot]=compilePath(it.path,it.caseSensitive,it.end),ct=g.match(et);if(!ct)return null;let ut=ct[0],dt=ut.replace(/(.)\/+$/,"$1"),ft=ct.slice(1);return{params:ot.reduce((kt,Tt,Rt)=>{let{paramName:jt,isOptional:Ft}=Tt;if(jt==="*"){let zt=ft[Rt]||"";dt=ut.slice(0,ut.length-zt.length).replace(/(.)\/+$/,"$1")}const $t=ft[Rt];return Ft&&!$t?kt[jt]=void 0:kt[jt]=($t||"").replace(/%2F/g,"/"),kt},{}),pathname:ut,pathnameBase:dt,pattern:it}}function compilePath(it,g,et){g===void 0&&(g=!1),et===void 0&&(et=!0),warning$2(it==="*"||!it.endsWith("*")||it.endsWith("/*"),'Route path "'+it+'" will be treated as if it were '+('"'+it.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+it.replace(/\*$/,"/*")+'".'));let ot=[],ct="^"+it.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,ft,St)=>(ot.push({paramName:ft,isOptional:St!=null}),St?"/?([^\\/]+)?":"/([^\\/]+)"));return it.endsWith("*")?(ot.push({paramName:"*"}),ct+=it==="*"||it==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ct+="\\/*$":it!==""&&it!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,g?void 0:"i"),ot]}function decodePath(it){try{return it.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning$2(!1,'The URL path "'+it+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),it}}function stripBasename(it,g){if(g==="/")return it;if(!it.toLowerCase().startsWith(g.toLowerCase()))return null;let et=g.endsWith("/")?g.length-1:g.length,ot=it.charAt(et);return ot&&ot!=="/"?null:it.slice(et)||"/"}function resolvePath(it,g){g===void 0&&(g="/");let{pathname:et,search:ot="",hash:ct=""}=typeof it=="string"?parsePath(it):it;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,g):g,search:normalizeSearch(ot),hash:normalizeHash(ct)}}function resolvePathname(it,g){let et=g.replace(/\/+$/,"").split("/");return it.split("/").forEach(ct=>{ct===".."?et.length>1&&et.pop():ct!=="."&&et.push(ct)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(it,g,et,ot){return"Cannot include a '"+it+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(it){return it.filter((g,et)=>et===0||g.route.path&&g.route.path.length>0)}function getResolveToMatches(it,g){let et=getPathContributingMatches(it);return g?et.map((ot,ct)=>ct===et.length-1?ot.pathname:ot.pathnameBase):et.map(ot=>ot.pathnameBase)}function resolveTo(it,g,et,ot){ot===void 0&&(ot=!1);let ct;typeof it=="string"?ct=parsePath(it):(ct=_extends$2({},it),invariant$2(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant$2(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant$2(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let ut=it===""||ct.pathname==="",dt=ut?"/":ct.pathname,ft;if(dt==null)ft=et;else{let Rt=g.length-1;if(!ot&&dt.startsWith("..")){let jt=dt.split("/");for(;jt[0]==="..";)jt.shift(),Rt-=1;ct.pathname=jt.join("/")}ft=Rt>=0?g[Rt]:"/"}let St=resolvePath(ct,ft),kt=dt&&dt!=="/"&&dt.endsWith("/"),Tt=(ut||dt===".")&&et.endsWith("/");return!St.pathname.endsWith("/")&&(kt||Tt)&&(St.pathname+="/"),St}const joinPaths=it=>it.join("/").replace(/\/\/+/g,"/"),normalizePathname=it=>it.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=it=>!it||it==="?"?"":it.startsWith("?")?it:"?"+it,normalizeHash=it=>!it||it==="#"?"":it.startsWith("#")?it:"#"+it;function isRouteErrorResponse(it){return it!=null&&typeof it.status=="number"&&typeof it.statusText=="string"&&typeof it.internal=="boolean"&&"data"in it}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(it,g){let{relative:et}=g===void 0?{}:g;useInRouterContext()||invariant$2(!1);let{basename:ot,navigator:ct}=reactExports.useContext(NavigationContext),{hash:ut,pathname:dt,search:ft}=useResolvedPath(it,{relative:et}),St=dt;return ot!=="/"&&(St=dt==="/"?ot:joinPaths([ot,dt])),ct.createHref({pathname:St,search:ft,hash:ut})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(it){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(it)}function useNavigate(){let{isDataRoute:it}=reactExports.useContext(RouteContext);return it?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let it=reactExports.useContext(DataRouterContext),{basename:g,future:et,navigator:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,et.v7_relativeSplatPath)),ft=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{ft.current=!0}),reactExports.useCallback(function(kt,Tt){if(Tt===void 0&&(Tt={}),!ft.current)return;if(typeof kt=="number"){ot.go(kt);return}let Rt=resolveTo(kt,JSON.parse(dt),ut,Tt.relative==="path");it==null&&g!=="/"&&(Rt.pathname=Rt.pathname==="/"?g:joinPaths([g,Rt.pathname])),(Tt.replace?ot.replace:ot.push)(Rt,Tt.state,Tt)},[g,ot,dt,ut,it])}function useResolvedPath(it,g){let{relative:et}=g===void 0?{}:g,{future:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,ot.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(it,JSON.parse(dt),ut,et==="path"),[it,dt,ut,et])}function useRoutes(it,g){return useRoutesImpl(it,g)}function useRoutesImpl(it,g,et,ot){useInRouterContext()||invariant$2(!1);let{navigator:ct}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),dt=ut[ut.length-1],ft=dt?dt.params:{};dt&&dt.pathname;let St=dt?dt.pathnameBase:"/";dt&&dt.route;let kt=useLocation(),Tt;if(g){var Rt;let Ut=typeof g=="string"?parsePath(g):g;St==="/"||(Rt=Ut.pathname)!=null&&Rt.startsWith(St)||invariant$2(!1),Tt=Ut}else Tt=kt;let jt=Tt.pathname||"/",Ft=jt;if(St!=="/"){let Ut=St.replace(/^\//,"").split("/");Ft="/"+jt.replace(/^\//,"").split("/").slice(Ut.length).join("/")}let $t=matchRoutes(it,{pathname:Ft}),zt=_renderMatches($t&&$t.map(Ut=>Object.assign({},Ut,{params:Object.assign({},ft,Ut.params),pathname:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Ut.pathname).pathname:Ut.pathname]),pathnameBase:Ut.pathnameBase==="/"?St:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Ut.pathnameBase).pathname:Ut.pathnameBase])})),ut,et,ot);return g&&zt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Tt),navigationType:Action.Pop}},zt):zt}function DefaultErrorComponent(){let it=useRouteError(),g=isRouteErrorResponse(it)?it.status+" "+it.statusText:it instanceof Error?it.message:JSON.stringify(it),et=it instanceof Error?it.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},ut=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),et?reactExports.createElement("pre",{style:ct},et):null,ut)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,et){return et.location!==g.location||et.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:et.error,location:et.location,revalidation:g.revalidation||et.revalidation}}componentDidCatch(g,et){console.error("React Router caught the following error during render",g,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(it){let{routeContext:g,match:et,children:ot}=it,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:g},ot)}function _renderMatches(it,g,et,ot){var ct;if(g===void 0&&(g=[]),et===void 0&&(et=null),ot===void 0&&(ot=null),it==null){var ut;if(!et)return null;if(et.errors)it=et.matches;else if((ut=ot)!=null&&ut.v7_partialHydration&&g.length===0&&!et.initialized&&et.matches.length>0)it=et.matches;else return null}let dt=it,ft=(ct=et)==null?void 0:ct.errors;if(ft!=null){let Tt=dt.findIndex(Rt=>Rt.route.id&&(ft==null?void 0:ft[Rt.route.id])!==void 0);Tt>=0||invariant$2(!1),dt=dt.slice(0,Math.min(dt.length,Tt+1))}let St=!1,kt=-1;if(et&&ot&&ot.v7_partialHydration)for(let Tt=0;Tt<dt.length;Tt++){let Rt=dt[Tt];if((Rt.route.HydrateFallback||Rt.route.hydrateFallbackElement)&&(kt=Tt),Rt.route.id){let{loaderData:jt,errors:Ft}=et,$t=Rt.route.loader&&jt[Rt.route.id]===void 0&&(!Ft||Ft[Rt.route.id]===void 0);if(Rt.route.lazy||$t){St=!0,kt>=0?dt=dt.slice(0,kt+1):dt=[dt[0]];break}}}return dt.reduceRight((Tt,Rt,jt)=>{let Ft,$t=!1,zt=null,Ut=null;et&&(Ft=ft&&Rt.route.id?ft[Rt.route.id]:void 0,zt=Rt.route.errorElement||defaultErrorElement,St&&(kt<0&&jt===0?(warningOnce("route-fallback",!1),$t=!0,Ut=null):kt===jt&&($t=!0,Ut=Rt.route.hydrateFallbackElement||null)));let Bt=g.concat(dt.slice(0,jt+1)),Ht=()=>{let Jt;return Ft?Jt=zt:$t?Jt=Ut:Rt.route.Component?Jt=reactExports.createElement(Rt.route.Component,null):Rt.route.element?Jt=Rt.route.element:Jt=Tt,reactExports.createElement(RenderedRoute,{match:Rt,routeContext:{outlet:Tt,matches:Bt,isDataRoute:et!=null},children:Jt})};return et&&(Rt.route.ErrorBoundary||Rt.route.errorElement||jt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:zt,error:Ft,children:Ht(),routeContext:{outlet:null,matches:Bt,isDataRoute:!0}}):Ht()},null)}var DataRouterHook$1=function(it){return it.UseBlocker="useBlocker",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it}(DataRouterHook$1||{}),DataRouterStateHook$1=function(it){return it.UseBlocker="useBlocker",it.UseLoaderData="useLoaderData",it.UseActionData="useActionData",it.UseRouteError="useRouteError",it.UseNavigation="useNavigation",it.UseRouteLoaderData="useRouteLoaderData",it.UseMatches="useMatches",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it.UseRouteId="useRouteId",it}(DataRouterStateHook$1||{});function useDataRouterContext(it){let g=reactExports.useContext(DataRouterContext);return g||invariant$2(!1),g}function useDataRouterState(it){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$2(!1),g}function useRouteContext(it){let g=reactExports.useContext(RouteContext);return g||invariant$2(!1),g}function useCurrentRouteId(it){let g=useRouteContext(),et=g.matches[g.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useRouteError(){var it;let g=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),ot=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(it=et.errors)==null?void 0:it[ot]}function useNavigateStable(){let{router:it}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),g=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{et.current=!0}),reactExports.useCallback(function(ct,ut){ut===void 0&&(ut={}),et.current&&(typeof ct=="number"?it.navigate(ct):it.navigate(ct,_extends$1({fromRouteId:g},ut)))},[it,g])}const alreadyWarned$1={};function warningOnce(it,g,et){!g&&!alreadyWarned$1[it]&&(alreadyWarned$1[it]=!0)}const alreadyWarned={};function warnOnce(it,g){alreadyWarned[g]||(alreadyWarned[g]=!0,console.warn(g))}const logDeprecation=(it,g,et)=>warnOnce(it," React Router Future Flag Warning: "+g+". "+("You can use the `"+it+"` future flag to opt-in early. ")+("For more information, see "+et+"."));function logV6DeprecationWarnings(it,g){(it==null?void 0:it.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(it==null?void 0:it.v7_relativeSplatPath)===void 0&&(!g||!g.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),g&&(g.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),g.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),g.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),g.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(it){let{to:g,replace:et,state:ot,relative:ct}=it;useInRouterContext()||invariant$2(!1);let{future:ut,static:dt}=reactExports.useContext(NavigationContext),{matches:ft}=reactExports.useContext(RouteContext),{pathname:St}=useLocation(),kt=useNavigate(),Tt=resolveTo(g,getResolveToMatches(ft,ut.v7_relativeSplatPath),St,ct==="path"),Rt=JSON.stringify(Tt);return reactExports.useEffect(()=>kt(JSON.parse(Rt),{replace:et,state:ot,relative:ct}),[kt,Rt,ct,et,ot]),null}function Route(it){invariant$2(!1)}function Router(it){let{basename:g="/",children:et=null,location:ot,navigationType:ct=Action.Pop,navigator:ut,static:dt=!1,future:ft}=it;useInRouterContext()&&invariant$2(!1);let St=g.replace(/^\/*/,"/"),kt=reactExports.useMemo(()=>({basename:St,navigator:ut,static:dt,future:_extends$1({v7_relativeSplatPath:!1},ft)}),[St,ft,ut,dt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:Tt="/",search:Rt="",hash:jt="",state:Ft=null,key:$t="default"}=ot,zt=reactExports.useMemo(()=>{let Ut=stripBasename(Tt,St);return Ut==null?null:{location:{pathname:Ut,search:Rt,hash:jt,state:Ft,key:$t},navigationType:ct}},[St,Tt,Rt,jt,Ft,$t,ct]);return zt==null?null:reactExports.createElement(NavigationContext.Provider,{value:kt},reactExports.createElement(LocationContext.Provider,{children:et,value:zt}))}function Routes(it){let{children:g,location:et}=it;return useRoutes(createRoutesFromChildren(g),et)}new Promise(()=>{});function createRoutesFromChildren(it,g){g===void 0&&(g=[]);let et=[];return reactExports.Children.forEach(it,(ot,ct)=>{if(!reactExports.isValidElement(ot))return;let ut=[...g,ct];if(ot.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(ot.props.children,ut));return}ot.type!==Route&&invariant$2(!1),!ot.props.index||!ot.props.children||invariant$2(!1);let dt={id:ot.props.id||ut.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(dt.children=createRoutesFromChildren(ot.props.children,ut)),et.push(dt)}),et}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function isModifiedEvent(it){return!!(it.metaKey||it.altKey||it.ctrlKey||it.shiftKey)}function shouldProcessLinkClick(it,g){return it.button===0&&(!g||g==="_self")&&!isModifiedEvent(it)}function createSearchParams(it){return it===void 0&&(it=""),new URLSearchParams(typeof it=="string"||Array.isArray(it)||it instanceof URLSearchParams?it:Object.keys(it).reduce((g,et)=>{let ot=it[et];return g.concat(Array.isArray(ot)?ot.map(ct=>[et,ct]):[[et,ot]])},[]))}function getSearchParamsForLocation(it,g){let et=createSearchParams(it);return g&&g.forEach((ot,ct)=>{et.has(ct)||g.getAll(ct).forEach(ut=>{et.append(ct,ut)})}),et}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$5[START_TRANSITION];function BrowserRouter(it){let{basename:g,children:et,future:ot,window:ct}=it,ut=reactExports.useRef();ut.current==null&&(ut.current=createBrowserHistory({window:ct,v5Compat:!0}));let dt=ut.current,[ft,St]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:kt}=ot||{},Tt=reactExports.useCallback(Rt=>{kt&&startTransitionImpl?startTransitionImpl(()=>St(Rt)):St(Rt)},[St,kt]);return reactExports.useLayoutEffect(()=>dt.listen(Tt),[dt,Tt]),reactExports.useEffect(()=>logV6DeprecationWarnings(ot),[ot]),reactExports.createElement(Router,{basename:g,children:et,location:ft.location,navigationType:ft.action,navigator:dt,future:ot})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(g,et){let{onClick:ot,relative:ct,reloadDocument:ut,replace:dt,state:ft,target:St,to:kt,preventScrollReset:Tt,viewTransition:Rt}=g,jt=_objectWithoutPropertiesLoose$1(g,_excluded$2),{basename:Ft}=reactExports.useContext(NavigationContext),$t,zt=!1;if(typeof kt=="string"&&ABSOLUTE_URL_REGEX.test(kt)&&($t=kt,isBrowser$2))try{let Jt=new URL(window.location.href),Zt=kt.startsWith("//")?new URL(Jt.protocol+kt):new URL(kt),tn=stripBasename(Zt.pathname,Ft);Zt.origin===Jt.origin&&tn!=null?kt=tn+Zt.search+Zt.hash:zt=!0}catch{}let Ut=useHref(kt,{relative:ct}),Bt=useLinkClickHandler(kt,{replace:dt,state:ft,target:St,preventScrollReset:Tt,relative:ct,viewTransition:Rt});function Ht(Jt){ot&&ot(Jt),Jt.defaultPrevented||Bt(Jt)}return reactExports.createElement("a",_extends({},jt,{href:$t||Ut,onClick:zt||ut?ot:Ht,ref:et,target:St}))});var DataRouterHook;(function(it){it.UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(it){it.UseFetcher="useFetcher",it.UseFetchers="useFetchers",it.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(it,g){let{target:et,replace:ot,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft}=g===void 0?{}:g,St=useNavigate(),kt=useLocation(),Tt=useResolvedPath(it,{relative:dt});return reactExports.useCallback(Rt=>{if(shouldProcessLinkClick(Rt,et)){Rt.preventDefault();let jt=ot!==void 0?ot:createPath(kt)===createPath(Tt);St(it,{replace:jt,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft})}},[kt,St,Tt,ot,ct,et,it,ut,dt,ft])}function useSearchParams(it){let g=reactExports.useRef(createSearchParams(it)),et=reactExports.useRef(!1),ot=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(ot.search,et.current?null:g.current),[ot.search]),ut=useNavigate(),dt=reactExports.useCallback((ft,St)=>{const kt=createSearchParams(typeof ft=="function"?ft(ct):ft);et.current=!0,ut("?"+kt,St)},[ut,ct]);return[ct,dt]}function createDOMMotionComponentProxy(it){if(typeof Proxy>"u")return it;const g=new Map,et=(...ot)=>it(...ot);return new Proxy(et,{get:(ot,ct)=>ct==="create"?it:(g.has(ct)||g.set(ct,it(ct)),g.get(ct))})}function isAnimationControls(it){return it!==null&&typeof it=="object"&&typeof it.start=="function"}const isKeyframesTarget=it=>Array.isArray(it);function shallowCompare(it,g){if(!Array.isArray(g))return!1;const et=g.length;if(et!==it.length)return!1;for(let ot=0;ot<et;ot++)if(g[ot]!==it[ot])return!1;return!0}function isVariantLabel(it){return typeof it=="string"||Array.isArray(it)}function getValueState(it){const g=[{},{}];return it==null||it.values.forEach((et,ot)=>{g[0][ot]=et.get(),g[1][ot]=et.getVelocity()}),g}function resolveVariantFromProps(it,g,et,ot){if(typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}if(typeof g=="string"&&(g=it.variants&&it.variants[g]),typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}return g}function resolveVariant(it,g,et){const ot=it.getProps();return resolveVariantFromProps(ot,g,et!==void 0?et:ot.custom,it)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=it=>it*1e3,millisecondsToSeconds=it=>it/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=it=>({type:"spring",stiffness:550,damping:it===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(it,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(it)?it.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(it,g){return it?it[g]||it.default||it:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=it=>it!==null;function getFinalKeyframe(it,{repeat:g,repeatType:et="loop"},ot){const ct=it.filter(isNotNull),ut=g&&et!=="loop"&&g%2===1?0:ct.length-1;return!ut||ot===void 0?ct[ut]:ot}const noop$2=it=>it;let invariant$1=noop$2;function createRenderStep(it){let g=new Set,et=new Set,ot=!1,ct=!1;const ut=new WeakSet;let dt={delta:0,timestamp:0,isProcessing:!1};function ft(kt){ut.has(kt)&&(St.schedule(kt),it()),kt(dt)}const St={schedule:(kt,Tt=!1,Rt=!1)=>{const Ft=Rt&&ot?g:et;return Tt&&ut.add(kt),Ft.has(kt)||Ft.add(kt),kt},cancel:kt=>{et.delete(kt),ut.delete(kt)},process:kt=>{if(dt=kt,ot){ct=!0;return}ot=!0,[g,et]=[et,g],g.forEach(ft),g.clear(),ot=!1,ct&&(ct=!1,St.process(kt))}};return St}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(it,g){let et=!1,ot=!0;const ct={delta:0,timestamp:0,isProcessing:!1},ut=()=>et=!0,dt=stepsOrder.reduce((Bt,Ht)=>(Bt[Ht]=createRenderStep(ut),Bt),{}),{read:ft,resolveKeyframes:St,update:kt,preRender:Tt,render:Rt,postRender:jt}=dt,Ft=()=>{const Bt=performance.now();et=!1,ct.delta=ot?1e3/60:Math.max(Math.min(Bt-ct.timestamp,maxElapsed),1),ct.timestamp=Bt,ct.isProcessing=!0,ft.process(ct),St.process(ct),kt.process(ct),Tt.process(ct),Rt.process(ct),jt.process(ct),ct.isProcessing=!1,et&&g&&(ot=!1,it(Ft))},$t=()=>{et=!0,ot=!0,ct.isProcessing||it(Ft)};return{schedule:stepsOrder.reduce((Bt,Ht)=>{const Jt=dt[Ht];return Bt[Ht]=(Zt,tn=!1,nn=!1)=>(et||$t(),Jt.schedule(Zt,tn,nn)),Bt},{}),cancel:Bt=>{for(let Ht=0;Ht<stepsOrder.length;Ht++)dt[stepsOrder[Ht]].cancel(Bt)},state:ct,steps:dt}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),calcBezier=(it,g,et)=>(((1-3*et+3*g)*it+(3*et-6*g))*it+3*g)*it,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(it,g,et,ot,ct){let ut,dt,ft=0;do dt=g+(et-g)/2,ut=calcBezier(dt,ot,ct)-it,ut>0?et=dt:g=dt;while(Math.abs(ut)>subdivisionPrecision&&++ft<subdivisionMaxIterations);return dt}function cubicBezier(it,g,et,ot){if(it===g&&et===ot)return noop$2;const ct=ut=>binarySubdivide(ut,0,1,it,et);return ut=>ut===0||ut===1?ut:calcBezier(ct(ut),g,ot)}const mirrorEasing=it=>g=>g<=.5?it(2*g)/2:(2-it(2*(1-g)))/2,reverseEasing=it=>g=>1-it(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=it=>(it*=2)<1?.5*backIn(it):.5*(2-Math.pow(2,-10*(it-1))),circIn=it=>1-Math.sin(Math.acos(it)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=it=>/^0[^.\s]+$/u.test(it);function isNone(it){return typeof it=="number"?it===0:it!==null?it==="none"||it==="0"||isZeroValueString(it):!0}const isNumericalString=it=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(it),checkStringStartsWith=it=>g=>typeof g=="string"&&g.startsWith(it),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=it=>startsAsVariableToken(it)?singleCssVariableRegex.test(it.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(it){const g=splitCSSVariableRegex.exec(it);if(!g)return[,];const[,et,ot,ct]=g;return[`--${et??ot}`,ct]}function getVariableValue(it,g,et=1){const[ot,ct]=parseCSSVariable(it);if(!ot)return;const ut=window.getComputedStyle(g).getPropertyValue(ot);if(ut){const dt=ut.trim();return isNumericalString(dt)?parseFloat(dt):dt}return isCSSVariableToken(ct)?getVariableValue(ct,g,et+1):ct}const clamp=(it,g,et)=>et>g?g:et<it?it:et,number={test:it=>typeof it=="number",parse:parseFloat,transform:it=>it},alpha$1={...number,transform:it=>clamp(0,1,it)},scale={...number,default:1},createUnitType=it=>({test:g=>typeof g=="string"&&g.endsWith(it)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${it}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:it=>percent.parse(it)/100,transform:it=>percent.transform(it*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=it=>it===number||it===px,getPosFromMatrix=(it,g)=>parseFloat(it.split(", ")[g]),getTranslateFromMatrix=(it,g)=>(et,{transform:ot})=>{if(ot==="none"||!ot)return 0;const ct=ot.match(/^matrix3d\((.+)\)$/u);if(ct)return getPosFromMatrix(ct[1],g);{const ut=ot.match(/^matrix\((.+)\)$/u);return ut?getPosFromMatrix(ut[1],it):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(it=>!transformKeys.has(it));function removeNonTranslationalTransform(it){const g=[];return nonTranslationalTransformKeys.forEach(et=>{const ot=it.getValue(et);ot!==void 0&&(g.push([et,ot.get()]),ot.set(et.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:it},{paddingLeft:g="0",paddingRight:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),height:({y:it},{paddingTop:g="0",paddingBottom:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),top:(it,{top:g})=>parseFloat(g),left:(it,{left:g})=>parseFloat(g),bottom:({y:it},{top:g})=>parseFloat(g)+(it.max-it.min),right:({x:it},{left:g})=>parseFloat(g)+(it.max-it.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=it=>g=>g.test(it),auto={test:it=>it==="auto",parse:it=>it},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=it=>dimensionValueTypes.find(testValueType(it)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const it=Array.from(toResolve).filter(ot=>ot.needsMeasurement),g=new Set(it.map(ot=>ot.element)),et=new Map;g.forEach(ot=>{const ct=removeNonTranslationalTransform(ot);ct.length&&(et.set(ot,ct),ot.render())}),it.forEach(ot=>ot.measureInitialState()),g.forEach(ot=>{ot.render();const ct=et.get(ot);ct&&ct.forEach(([ut,dt])=>{var ft;(ft=ot.getValue(ut))===null||ft===void 0||ft.set(dt)})}),it.forEach(ot=>ot.measureEndState()),it.forEach(ot=>{ot.suspendedScrollY!==void 0&&window.scrollTo(0,ot.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(it=>it.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(it=>{it.readKeyframes(),it.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,et,ot,ct,ut,dt=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=et,this.name=ot,this.motionValue=ct,this.element=ut,this.isAsync=dt}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:et,element:ot,motionValue:ct}=this;for(let ut=0;ut<g.length;ut++)if(g[ut]===null)if(ut===0){const dt=ct==null?void 0:ct.get(),ft=g[g.length-1];if(dt!==void 0)g[0]=dt;else if(ot&&et){const St=ot.readValue(et,ft);St!=null&&(g[0]=St)}g[0]===void 0&&(g[0]=ft),ct&&dt===void 0&&ct.set(g[0])}else g[ut]=g[ut-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=it=>Math.round(it*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(it){return it==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(it,g)=>et=>!!(typeof et=="string"&&singleColorRegex.test(et)&&et.startsWith(it)||g&&!isNullish(et)&&Object.prototype.hasOwnProperty.call(et,g)),splitColor=(it,g,et)=>ot=>{if(typeof ot!="string")return ot;const[ct,ut,dt,ft]=ot.match(floatRegex);return{[it]:parseFloat(ct),[g]:parseFloat(ut),[et]:parseFloat(dt),alpha:ft!==void 0?parseFloat(ft):1}},clampRgbUnit=it=>clamp(0,255,it),rgbUnit={...number,transform:it=>Math.round(clampRgbUnit(it))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:it,green:g,blue:et,alpha:ot=1})=>"rgba("+rgbUnit.transform(it)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(et)+", "+sanitize(alpha$1.transform(ot))+")"};function parseHex(it){let g="",et="",ot="",ct="";return it.length>5?(g=it.substring(1,3),et=it.substring(3,5),ot=it.substring(5,7),ct=it.substring(7,9)):(g=it.substring(1,2),et=it.substring(2,3),ot=it.substring(3,4),ct=it.substring(4,5),g+=g,et+=et,ot+=ot,ct+=ct),{red:parseInt(g,16),green:parseInt(et,16),blue:parseInt(ot,16),alpha:ct?parseInt(ct,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:it,saturation:g,lightness:et,alpha:ot=1})=>"hsla("+Math.round(it)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(et))+", "+sanitize(alpha$1.transform(ot))+")"},color={test:it=>rgba.test(it)||hex.test(it)||hsla.test(it),parse:it=>rgba.test(it)?rgba.parse(it):hsla.test(it)?hsla.parse(it):hex.parse(it),transform:it=>typeof it=="string"?it:it.hasOwnProperty("red")?rgba.transform(it):hsla.transform(it)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(it){var g,et;return isNaN(it)&&typeof it=="string"&&(((g=it.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((et=it.match(colorRegex))===null||et===void 0?void 0:et.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(it){const g=it.toString(),et=[],ot={color:[],number:[],var:[]},ct=[];let ut=0;const ft=g.replace(complexRegex,St=>(color.test(St)?(ot.color.push(ut),ct.push(COLOR_TOKEN),et.push(color.parse(St))):St.startsWith(VAR_FUNCTION_TOKEN)?(ot.var.push(ut),ct.push(VAR_TOKEN),et.push(St)):(ot.number.push(ut),ct.push(NUMBER_TOKEN),et.push(parseFloat(St))),++ut,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:et,split:ft,indexes:ot,types:ct}}function parseComplexValue(it){return analyseComplexValue(it).values}function createTransformer(it){const{split:g,types:et}=analyseComplexValue(it),ot=g.length;return ct=>{let ut="";for(let dt=0;dt<ot;dt++)if(ut+=g[dt],ct[dt]!==void 0){const ft=et[dt];ft===NUMBER_TOKEN?ut+=sanitize(ct[dt]):ft===COLOR_TOKEN?ut+=color.transform(ct[dt]):ut+=ct[dt]}return ut}}const convertNumbersToZero=it=>typeof it=="number"?0:it;function getAnimatableNone$1(it){const g=parseComplexValue(it);return createTransformer(it)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(it){const[g,et]=it.slice(0,-1).split("(");if(g==="drop-shadow")return it;const[ot]=et.match(floatRegex)||[];if(!ot)return it;const ct=et.replace(ot,"");let ut=maxDefaults.has(g)?1:0;return ot!==et&&(ut*=100),g+"("+ut+ct+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:it=>{const g=it.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):it}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=it=>defaultValueTypes[it];function getAnimatableNone(it,g){let et=getDefaultValueType(it);return et!==filter&&(et=complex),et.getAnimatableNone?et.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(it,g,et){let ot=0,ct;for(;ot<it.length&&!ct;){const ut=it[ot];typeof ut=="string"&&!invalidTemplates.has(ut)&&analyseComplexValue(ut).values.length&&(ct=it[ot]),ot++}if(ct&&et)for(const ut of g)it[ut]=getAnimatableNone(et,ct)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,et,ot,ct,ut){super(g,et,ot,ct,ut,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:et,name:ot}=this;if(!et||!et.current)return;super.readKeyframes();for(let St=0;St<g.length;St++){let kt=g[St];if(typeof kt=="string"&&(kt=kt.trim(),isCSSVariableToken(kt))){const Tt=getVariableValue(kt,et.current);Tt!==void 0&&(g[St]=Tt),St===g.length-1&&(this.finalKeyframe=kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(ot)||g.length!==2)return;const[ct,ut]=g,dt=findDimensionValueType(ct),ft=findDimensionValueType(ut);if(dt!==ft)if(isNumOrPxType(dt)&&isNumOrPxType(ft))for(let St=0;St<g.length;St++){const kt=g[St];typeof kt=="string"&&(g[St]=parseFloat(kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:et}=this,ot=[];for(let ct=0;ct<g.length;ct++)isNone(g[ct])&&ot.push(ct);ot.length&&makeNoneKeyframesAnimatable(g,ot,et)}measureInitialState(){const{element:g,unresolvedKeyframes:et,name:ot}=this;if(!g||!g.current)return;ot==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[ot](g.measureViewportBox(),window.getComputedStyle(g.current)),et[0]=this.measuredOrigin;const ct=et[et.length-1];ct!==void 0&&g.getValue(ot,ct).jump(ct,!1)}measureEndState(){var g;const{element:et,name:ot,unresolvedKeyframes:ct}=this;if(!et||!et.current)return;const ut=et.getValue(ot);ut&&ut.jump(this.measuredOrigin,!1);const dt=ct.length-1,ft=ct[dt];ct[dt]=positionalValues[ot](et.measureViewportBox(),window.getComputedStyle(et.current)),ft!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ft),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([St,kt])=>{et.getValue(St).set(kt)}),this.resolveNoneKeyframes()}}function isGenerator(it){return typeof it=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:it=>{now$1=it,queueMicrotask(clearTime)}},isAnimatable=(it,g)=>g==="zIndex"?!1:!!(typeof it=="number"||Array.isArray(it)||typeof it=="string"&&(complex.test(it)||it==="0")&&!it.startsWith("url("));function hasKeyframesChanged(it){const g=it[0];if(it.length===1)return!0;for(let et=0;et<it.length;et++)if(it[et]!==g)return!0}function canAnimate(it,g,et,ot){const ct=it[0];if(ct===null)return!1;if(g==="display"||g==="visibility")return!0;const ut=it[it.length-1],dt=isAnimatable(ct,g),ft=isAnimatable(ut,g);return!dt||!ft?!1:hasKeyframesChanged(it)||(et==="spring"||isGenerator(et))&&ot}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:et=0,type:ot="keyframes",repeat:ct=0,repeatDelay:ut=0,repeatType:dt="loop",...ft}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:et,type:ot,repeat:ct,repeatDelay:ut,repeatType:dt,...ft},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,et){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:ot,type:ct,velocity:ut,delay:dt,onComplete:ft,onUpdate:St,isGenerator:kt}=this.options;if(!kt&&!canAnimate(g,ot,ct,ut))if(dt)this.options.duration=0;else{St==null||St(getFinalKeyframe(g,this.options,et)),ft==null||ft(),this.resolveFinishedPromise();return}const Tt=this.initPlayback(g,et);Tt!==!1&&(this._resolved={keyframes:g,finalKeyframe:et,...Tt},this.onPostResolved())}onPostResolved(){}then(g,et){return this.currentFinishedPromise.then(g,et)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}const progress=(it,g,et)=>{const ot=g-it;return ot===0?1:(et-it)/ot},generateLinearEasing=(it,g,et=10)=>{let ot="";const ct=Math.max(Math.round(g/et),2);for(let ut=0;ut<ct;ut++)ot+=it(progress(0,ct-1,ut))+", ";return`linear(${ot.substring(0,ot.length-2)})`};function velocityPerSecond(it,g){return g?it*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(it,g,et){const ot=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(et-it(ot),g-ot)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:it=springDefaults.duration,bounce:g=springDefaults.bounce,velocity:et=springDefaults.velocity,mass:ot=springDefaults.mass}){let ct,ut,dt=1-g;dt=clamp(springDefaults.minDamping,springDefaults.maxDamping,dt),it=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(it)),dt<1?(ct=kt=>{const Tt=kt*dt,Rt=Tt*it,jt=Tt-et,Ft=calcAngularFreq(kt,dt),$t=Math.exp(-Rt);return safeMin-jt/Ft*$t},ut=kt=>{const Rt=kt*dt*it,jt=Rt*et+et,Ft=Math.pow(dt,2)*Math.pow(kt,2)*it,$t=Math.exp(-Rt),zt=calcAngularFreq(Math.pow(kt,2),dt);return(-ct(kt)+safeMin>0?-1:1)*((jt-Ft)*$t)/zt}):(ct=kt=>{const Tt=Math.exp(-kt*it),Rt=(kt-et)*it+1;return-safeMin+Tt*Rt},ut=kt=>{const Tt=Math.exp(-kt*it),Rt=(et-kt)*(it*it);return Tt*Rt});const ft=5/it,St=approximateRoot(ct,ut,ft);if(it=secondsToMilliseconds(it),isNaN(St))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:it};{const kt=Math.pow(St,2)*ot;return{stiffness:kt,damping:dt*2*Math.sqrt(ot*kt),duration:it}}}const rootIterations=12;function approximateRoot(it,g,et){let ot=et;for(let ct=1;ct<rootIterations;ct++)ot=ot-it(ot)/g(ot);return ot}function calcAngularFreq(it,g){return it*Math.sqrt(1-g*g)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(it){let g=0;const et=50;let ot=it.next(g);for(;!ot.done&&g<maxGeneratorDuration;)g+=et,ot=it.next(g);return g>=maxGeneratorDuration?1/0:g}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(it,g){return g.some(et=>it[et]!==void 0)}function getSpringOptions(it){let g={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...it};if(!isSpringType(it,physicsKeys)&&isSpringType(it,durationKeys))if(it.visualDuration){const et=it.visualDuration,ot=2*Math.PI/(et*1.2),ct=ot*ot,ut=2*clamp(.05,1,1-it.bounce)*Math.sqrt(ct);g={...g,mass:springDefaults.mass,stiffness:ct,damping:ut}}else{const et=findSpring(it);g={...g,...et,mass:springDefaults.mass},g.isResolvedFromDuration=!0}return g}function spring(it=springDefaults.visualDuration,g=springDefaults.bounce){const et=typeof it!="object"?{visualDuration:it,keyframes:[0,1],bounce:g}:it;let{restSpeed:ot,restDelta:ct}=et;const ut=et.keyframes[0],dt=et.keyframes[et.keyframes.length-1],ft={done:!1,value:ut},{stiffness:St,damping:kt,mass:Tt,duration:Rt,velocity:jt,isResolvedFromDuration:Ft}=getSpringOptions({...et,velocity:-millisecondsToSeconds(et.velocity||0)}),$t=jt||0,zt=kt/(2*Math.sqrt(St*Tt)),Ut=dt-ut,Bt=millisecondsToSeconds(Math.sqrt(St/Tt)),Ht=Math.abs(Ut)<5;ot||(ot=Ht?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),ct||(ct=Ht?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Jt;if(zt<1){const tn=calcAngularFreq(Bt,zt);Jt=nn=>{const rn=Math.exp(-zt*Bt*nn);return dt-rn*(($t+zt*Bt*Ut)/tn*Math.sin(tn*nn)+Ut*Math.cos(tn*nn))}}else if(zt===1)Jt=tn=>dt-Math.exp(-Bt*tn)*(Ut+($t+Bt*Ut)*tn);else{const tn=Bt*Math.sqrt(zt*zt-1);Jt=nn=>{const rn=Math.exp(-zt*Bt*nn),on=Math.min(tn*nn,300);return dt-rn*(($t+zt*Bt*Ut)*Math.sinh(on)+tn*Ut*Math.cosh(on))/tn}}const Zt={calculatedDuration:Ft&&Rt||null,next:tn=>{const nn=Jt(tn);if(Ft)ft.done=tn>=Rt;else{let rn=0;zt<1&&(rn=tn===0?secondsToMilliseconds($t):calcGeneratorVelocity(Jt,tn,nn));const on=Math.abs(rn)<=ot,pn=Math.abs(dt-nn)<=ct;ft.done=on&&pn}return ft.value=ft.done?dt:nn,ft},toString:()=>{const tn=Math.min(calcGeneratorDuration(Zt),maxGeneratorDuration),nn=generateLinearEasing(rn=>Zt.next(tn*rn).value,tn,30);return tn+"ms "+nn}};return Zt}function inertia({keyframes:it,velocity:g=0,power:et=.8,timeConstant:ot=325,bounceDamping:ct=10,bounceStiffness:ut=500,modifyTarget:dt,min:ft,max:St,restDelta:kt=.5,restSpeed:Tt}){const Rt=it[0],jt={done:!1,value:Rt},Ft=on=>ft!==void 0&&on<ft||St!==void 0&&on>St,$t=on=>ft===void 0?St:St===void 0||Math.abs(ft-on)<Math.abs(St-on)?ft:St;let zt=et*g;const Ut=Rt+zt,Bt=dt===void 0?Ut:dt(Ut);Bt!==Ut&&(zt=Bt-Rt);const Ht=on=>-zt*Math.exp(-on/ot),Jt=on=>Bt+Ht(on),Zt=on=>{const pn=Ht(on),dn=Jt(on);jt.done=Math.abs(pn)<=kt,jt.value=jt.done?Bt:dn};let tn,nn;const rn=on=>{Ft(jt.value)&&(tn=on,nn=spring({keyframes:[jt.value,$t(jt.value)],velocity:calcGeneratorVelocity(Jt,on,jt.value),damping:ct,stiffness:ut,restDelta:kt,restSpeed:Tt}))};return rn(0),{calculatedDuration:null,next:on=>{let pn=!1;return!nn&&tn===void 0&&(pn=!0,Zt(on),rn(on)),tn!==void 0&&on>=tn?nn.next(on-tn):(!pn&&Zt(on),jt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=it=>Array.isArray(it)&&typeof it[0]!="number",isBezierDefinition=it=>Array.isArray(it)&&typeof it[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=it=>{if(isBezierDefinition(it)){invariant$1(it.length===4);const[g,et,ot,ct]=it;return cubicBezier(g,et,ot,ct)}else if(typeof it=="string")return easingLookup[it];return it},combineFunctions=(it,g)=>et=>g(it(et)),pipe=(...it)=>it.reduce(combineFunctions),mixNumber$1=(it,g,et)=>it+(g-it)*et;function hueToRgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslaToRgba({hue:it,saturation:g,lightness:et,alpha:ot}){it/=360,g/=100,et/=100;let ct=0,ut=0,dt=0;if(!g)ct=ut=dt=et;else{const ft=et<.5?et*(1+g):et+g-et*g,St=2*et-ft;ct=hueToRgb(St,ft,it+1/3),ut=hueToRgb(St,ft,it),dt=hueToRgb(St,ft,it-1/3)}return{red:Math.round(ct*255),green:Math.round(ut*255),blue:Math.round(dt*255),alpha:ot}}function mixImmediate(it,g){return et=>et>0?g:it}const mixLinearColor=(it,g,et)=>{const ot=it*it,ct=et*(g*g-ot)+ot;return ct<0?0:Math.sqrt(ct)},colorTypes=[hex,rgba,hsla],getColorType=it=>colorTypes.find(g=>g.test(it));function asRGBA(it){const g=getColorType(it);if(!g)return!1;let et=g.parse(it);return g===hsla&&(et=hslaToRgba(et)),et}const mixColor=(it,g)=>{const et=asRGBA(it),ot=asRGBA(g);if(!et||!ot)return mixImmediate(it,g);const ct={...et};return ut=>(ct.red=mixLinearColor(et.red,ot.red,ut),ct.green=mixLinearColor(et.green,ot.green,ut),ct.blue=mixLinearColor(et.blue,ot.blue,ut),ct.alpha=mixNumber$1(et.alpha,ot.alpha,ut),rgba.transform(ct))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(it,g){return invisibleValues.has(it)?et=>et<=0?it:g:et=>et>=1?g:it}function mixNumber(it,g){return et=>mixNumber$1(it,g,et)}function getMixer(it){return typeof it=="number"?mixNumber:typeof it=="string"?isCSSVariableToken(it)?mixImmediate:color.test(it)?mixColor:mixComplex:Array.isArray(it)?mixArray:typeof it=="object"?color.test(it)?mixColor:mixObject:mixImmediate}function mixArray(it,g){const et=[...it],ot=et.length,ct=it.map((ut,dt)=>getMixer(ut)(ut,g[dt]));return ut=>{for(let dt=0;dt<ot;dt++)et[dt]=ct[dt](ut);return et}}function mixObject(it,g){const et={...it,...g},ot={};for(const ct in et)it[ct]!==void 0&&g[ct]!==void 0&&(ot[ct]=getMixer(it[ct])(it[ct],g[ct]));return ct=>{for(const ut in ot)et[ut]=ot[ut](ct);return et}}function matchOrder(it,g){var et;const ot=[],ct={color:0,var:0,number:0};for(let ut=0;ut<g.values.length;ut++){const dt=g.types[ut],ft=it.indexes[dt][ct[dt]],St=(et=it.values[ft])!==null&&et!==void 0?et:0;ot[ut]=St,ct[dt]++}return ot}const mixComplex=(it,g)=>{const et=complex.createTransformer(g),ot=analyseComplexValue(it),ct=analyseComplexValue(g);return ot.indexes.var.length===ct.indexes.var.length&&ot.indexes.color.length===ct.indexes.color.length&&ot.indexes.number.length>=ct.indexes.number.length?invisibleValues.has(it)&&!ct.values.length||invisibleValues.has(g)&&!ot.values.length?mixVisibility(it,g):pipe(mixArray(matchOrder(ot,ct),ct.values),et):mixImmediate(it,g)};function mix(it,g,et){return typeof it=="number"&&typeof g=="number"&&typeof et=="number"?mixNumber$1(it,g,et):getMixer(it)(it,g)}function createMixers(it,g,et){const ot=[],ct=et||mix,ut=it.length-1;for(let dt=0;dt<ut;dt++){let ft=ct(it[dt],it[dt+1]);if(g){const St=Array.isArray(g)?g[dt]||noop$2:g;ft=pipe(St,ft)}ot.push(ft)}return ot}function interpolate(it,g,{clamp:et=!0,ease:ot,mixer:ct}={}){const ut=it.length;if(invariant$1(ut===g.length),ut===1)return()=>g[0];if(ut===2&&it[0]===it[1])return()=>g[1];it[0]>it[ut-1]&&(it=[...it].reverse(),g=[...g].reverse());const dt=createMixers(g,ot,ct),ft=dt.length,St=kt=>{let Tt=0;if(ft>1)for(;Tt<it.length-2&&!(kt<it[Tt+1]);Tt++);const Rt=progress(it[Tt],it[Tt+1],kt);return dt[Tt](Rt)};return et?kt=>St(clamp(it[0],it[ut-1],kt)):St}function fillOffset(it,g){const et=it[it.length-1];for(let ot=1;ot<=g;ot++){const ct=progress(0,g,ot);it.push(mixNumber$1(et,1,ct))}}function defaultOffset(it){const g=[0];return fillOffset(g,it.length-1),g}function convertOffsetToTimes(it,g){return it.map(et=>et*g)}function defaultEasing(it,g){return it.map(()=>g||easeInOut).splice(0,it.length-1)}function keyframes({duration:it=300,keyframes:g,times:et,ease:ot="easeInOut"}){const ct=isEasingArray(ot)?ot.map(easingDefinitionToFunction):easingDefinitionToFunction(ot),ut={done:!1,value:g[0]},dt=convertOffsetToTimes(et&&et.length===g.length?et:defaultOffset(g),it),ft=interpolate(dt,g,{ease:Array.isArray(ct)?ct:defaultEasing(g,ct)});return{calculatedDuration:it,next:St=>(ut.value=ft(St),ut.done=St>=it,ut)}}const frameloopDriver=it=>{const g=({timestamp:et})=>it(et);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=it=>it/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:St}=this.options;St&&St()};const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options,dt=(ct==null?void 0:ct.KeyframeResolver)||KeyframeResolver,ft=(St,kt)=>this.onKeyframesResolved(St,kt);this.resolver=new dt(ut,ft,et,ot,ct),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:et="keyframes",repeat:ot=0,repeatDelay:ct=0,repeatType:ut,velocity:dt=0}=this.options,ft=isGenerator(et)?et:generators[et]||keyframes;let St,kt;ft!==keyframes&&typeof g[0]!="number"&&(St=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const Tt=ft({...this.options,keyframes:g});ut==="mirror"&&(kt=ft({...this.options,keyframes:[...g].reverse(),velocity:-dt})),Tt.calculatedDuration===null&&(Tt.calculatedDuration=calcGeneratorDuration(Tt));const{calculatedDuration:Rt}=Tt,jt=Rt+ct,Ft=jt*(ot+1)-ct;return{generator:Tt,mirroredGenerator:kt,mapPercentToKeyframes:St,calculatedDuration:Rt,resolvedDuration:jt,totalDuration:Ft}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,et=!1){const{resolved:ot}=this;if(!ot){const{keyframes:on}=this.options;return{done:!0,value:on[on.length-1]}}const{finalKeyframe:ct,generator:ut,mirroredGenerator:dt,mapPercentToKeyframes:ft,keyframes:St,calculatedDuration:kt,totalDuration:Tt,resolvedDuration:Rt}=ot;if(this.startTime===null)return ut.next(0);const{delay:jt,repeat:Ft,repeatType:$t,repeatDelay:zt,onUpdate:Ut}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-Tt/this.speed,this.startTime)),et?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const Bt=this.currentTime-jt*(this.speed>=0?1:-1),Ht=this.speed>=0?Bt<0:Bt>Tt;this.currentTime=Math.max(Bt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Tt);let Jt=this.currentTime,Zt=ut;if(Ft){const on=Math.min(this.currentTime,Tt)/Rt;let pn=Math.floor(on),dn=on%1;!dn&&on>=1&&(dn=1),dn===1&&pn--,pn=Math.min(pn,Ft+1),!!(pn%2)&&($t==="reverse"?(dn=1-dn,zt&&(dn-=zt/Rt)):$t==="mirror"&&(Zt=dt)),Jt=clamp(0,1,dn)*Rt}const tn=Ht?{done:!1,value:St[0]}:Zt.next(Jt);ft&&(tn.value=ft(tn.value));let{done:nn}=tn;!Ht&&kt!==null&&(nn=this.speed>=0?this.currentTime>=Tt:this.currentTime<=0);const rn=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&nn);return rn&&ct!==void 0&&(tn.value=getFinalKeyframe(St,this.options,ct)),Ut&&Ut(tn.value),rn&&this.finish(),tn}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const et=this.playbackSpeed!==g;this.playbackSpeed=g,et&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:et,startTime:ot}=this.options;this.driver||(this.driver=g(ut=>this.tick(ut))),et&&et();const ct=this.driver.now();this.holdTime!==null?this.startTime=ct-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=ct):this.startTime=ot??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(it){return new MainThreadAnimation(it)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(it){let g;return()=>(g===void 0&&(g=it()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(it,g){const et=memo(it);return()=>{var ot;return(ot=supportsFlags[g])!==null&&ot!==void 0?ot:et()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(it){return!!(typeof it=="function"&&supportsLinearEasing()||!it||typeof it=="string"&&(it in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(it)||Array.isArray(it)&&it.every(isWaapiSupportedEasing))}const cubicBezierAsString=([it,g,et,ot])=>`cubic-bezier(${it}, ${g}, ${et}, ${ot})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(it,g){if(it)return typeof it=="function"&&supportsLinearEasing()?generateLinearEasing(it,g):isBezierDefinition(it)?cubicBezierAsString(it):Array.isArray(it)?it.map(et=>mapEasingToNativeEasing(et,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[it]}function startWaapiAnimation(it,g,et,{delay:ot=0,duration:ct=300,repeat:ut=0,repeatType:dt="loop",ease:ft="easeInOut",times:St}={}){const kt={[g]:et};St&&(kt.offset=St);const Tt=mapEasingToNativeEasing(ft,ct);return Array.isArray(Tt)&&(kt.easing=Tt),it.animate(kt,{delay:ot,duration:ct,easing:Array.isArray(Tt)?"linear":Tt,fill:"both",iterations:ut+1,direction:dt==="reverse"?"alternate":"normal"})}function attachTimeline(it,g){it.timeline=g,it.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(it){return isGenerator(it.type)||it.type==="spring"||!isWaapiSupportedEasing(it.ease)}function pregenerateKeyframes(it,g){const et=new MainThreadAnimation({...g,keyframes:it,repeat:0,delay:0,isGenerator:!0});let ot={done:!1,value:it[0]};const ct=[];let ut=0;for(;!ot.done&&ut<maxDuration;)ot=et.sample(ut),ct.push(ot.value),ut+=sampleDelta;return{times:void 0,keyframes:ct,duration:ut-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(it){return it in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options;this.resolver=new DOMKeyframesResolver(ut,(dt,ft)=>this.onKeyframesResolved(dt,ft),et,ot,ct),this.resolver.scheduleResolve()}initPlayback(g,et){var ot;let{duration:ct=300,times:ut,ease:dt,type:ft,motionValue:St,name:kt,startTime:Tt}=this.options;if(!(!((ot=St.owner)===null||ot===void 0)&&ot.current))return!1;if(typeof dt=="string"&&supportsLinearEasing()&&isUnsupportedEase(dt)&&(dt=unsupportedEasingFunctions[dt]),requiresPregeneratedKeyframes(this.options)){const{onComplete:jt,onUpdate:Ft,motionValue:$t,element:zt,...Ut}=this.options,Bt=pregenerateKeyframes(g,Ut);g=Bt.keyframes,g.length===1&&(g[1]=g[0]),ct=Bt.duration,ut=Bt.times,dt=Bt.ease,ft="keyframes"}const Rt=startWaapiAnimation(St.owner.current,kt,g,{...this.options,duration:ct,times:ut,ease:dt});return Rt.startTime=Tt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Rt,this.pendingTimeline),this.pendingTimeline=void 0):Rt.onfinish=()=>{const{onComplete:jt}=this.options;St.set(getFinalKeyframe(g,this.options,et)),jt&&jt(),this.cancel(),this.resolveFinishedPromise()},{animation:Rt,duration:ct,times:ut,type:ft,ease:dt,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:et}=g;return millisecondsToSeconds(et)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:et}=g;return millisecondsToSeconds(et.currentTime||0)}set time(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:et}=g;return et.playbackRate}set speed(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:et}=g;return et.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:et}=g;return et.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:et}=this;if(!et)return noop$2;const{animation:ot}=et;attachTimeline(ot,g)}return noop$2}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.playState==="finished"&&this.updateFinishedPromise(),et.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:et,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft}=g;if(et.playState==="idle"||et.playState==="finished")return;if(this.time){const{motionValue:kt,onUpdate:Tt,onComplete:Rt,element:jt,...Ft}=this.options,$t=new MainThreadAnimation({...Ft,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft,isGenerator:!0}),zt=secondsToMilliseconds(this.time);kt.setWithVelocity($t.sample(zt-sampleDelta).value,$t.sample(zt).value,sampleDelta)}const{onStop:St}=this.options;St&&St(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:et,name:ot,repeatDelay:ct,repeatType:ut,damping:dt,type:ft}=g;return supportsWaapi()&&ot&&acceleratedValues.has(ot)&&et&&et.owner&&et.owner.current instanceof HTMLElement&&!et.owner.getProps().onUpdate&&!ct&&ut!=="mirror"&&dt!==0&&ft!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,et){return Promise.all(this.animations).then(g).catch(et)}getAll(g){return this.animations[0][g]}setAll(g,et){for(let ot=0;ot<this.animations.length;ot++)this.animations[ot][g]=et}attachTimeline(g,et){const ot=this.animations.map(ct=>supportsScrollTimeline()&&ct.attachTimeline?ct.attachTimeline(g):et(ct));return()=>{ot.forEach((ct,ut)=>{ct&&ct(),this.animations[ut].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let et=0;et<this.animations.length;et++)g=Math.max(g,this.animations[et].duration);return g}runAll(g){this.animations.forEach(et=>et[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:it,delay:g,delayChildren:et,staggerChildren:ot,staggerDirection:ct,repeat:ut,repeatType:dt,repeatDelay:ft,from:St,elapsed:kt,...Tt}){return!!Object.keys(Tt).length}const animateMotionValue=(it,g,et,ot={},ct,ut)=>dt=>{const ft=getValueTransition(ot,it)||{},St=ft.delay||ot.delay||0;let{elapsed:kt=0}=ot;kt=kt-secondsToMilliseconds(St);let Tt={keyframes:Array.isArray(et)?et:[null,et],ease:"easeOut",velocity:g.getVelocity(),...ft,delay:-kt,onUpdate:jt=>{g.set(jt),ft.onUpdate&&ft.onUpdate(jt)},onComplete:()=>{dt(),ft.onComplete&&ft.onComplete()},name:it,motionValue:g,element:ut?void 0:ct};isTransitionDefined(ft)||(Tt={...Tt,...getDefaultTransition(it,Tt)}),Tt.duration&&(Tt.duration=secondsToMilliseconds(Tt.duration)),Tt.repeatDelay&&(Tt.repeatDelay=secondsToMilliseconds(Tt.repeatDelay)),Tt.from!==void 0&&(Tt.keyframes[0]=Tt.from);let Rt=!1;if((Tt.type===!1||Tt.duration===0&&!Tt.repeatDelay)&&(Tt.duration=0,Tt.delay===0&&(Rt=!0)),Rt&&!ut&&g.get()!==void 0){const jt=getFinalKeyframe(Tt.keyframes,ft);if(jt!==void 0)return frame.update(()=>{Tt.onUpdate(jt),Tt.onComplete()}),new GroupPlaybackControls([])}return!ut&&AcceleratedAnimation.supports(Tt)?new AcceleratedAnimation(Tt):new MainThreadAnimation(Tt)},isCustomValue=it=>!!(it&&typeof it=="object"&&it.mix&&it.toValue),resolveFinalValueInKeyframes=it=>isKeyframesTarget(it)?it[it.length-1]||0:it;function addUniqueItem(it,g){it.indexOf(g)===-1&&it.push(g)}function removeItem(it,g){const et=it.indexOf(g);et>-1&&it.splice(et,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,et,ot){const ct=this.subscriptions.length;if(ct)if(ct===1)this.subscriptions[0](g,et,ot);else for(let ut=0;ut<ct;ut++){const dt=this.subscriptions[ut];dt&&dt(g,et,ot)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=it=>!isNaN(parseFloat(it));class MotionValue{constructor(g,et={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(ot,ct=!0)=>{const ut=time.now();this.updatedAt!==ut&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(ot),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),ct&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=et.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,et){this.events[g]||(this.events[g]=new SubscriptionManager);const ot=this.events[g].add(et);return g==="change"?()=>{ot(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:ot}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,et){this.passiveEffect=g,this.stopPassiveEffect=et}set(g,et=!0){!et||!this.passiveEffect?this.updateAndNotify(g,et):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,et,ot){this.set(et),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-ot}jump(g,et=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,et&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const et=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),et)}start(g){return this.stop(),new Promise(et=>{this.hasAnimated=!0,this.animation=g(et),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(it,g){return new MotionValue(it,g)}function setMotionValue(it,g,et){it.hasValue(g)?it.getValue(g).set(et):it.addValue(g,motionValue(et))}function setTarget(it,g){const et=resolveVariant(it,g);let{transitionEnd:ot={},transition:ct={},...ut}=et||{};ut={...ut,...ot};for(const dt in ut){const ft=resolveFinalValueInKeyframes(ut[dt]);setMotionValue(it,dt,ft)}}const camelToDash=it=>it.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(it){return it.props[optimizedAppearDataAttribute]}const isMotionValue=it=>!!(it&&it.getVelocity);function isWillChangeMotionValue(it){return!!(isMotionValue(it)&&it.add)}function addValueToWillChange(it,g){const et=it.getValue("willChange");if(isWillChangeMotionValue(et))return et.add(g)}function shouldBlockAnimation({protectedKeys:it,needsAnimating:g},et){const ot=it.hasOwnProperty(et)&&g[et]!==!0;return g[et]=!1,ot}function animateTarget(it,g,{delay:et=0,transitionOverride:ot,type:ct}={}){var ut;let{transition:dt=it.getDefaultTransition(),transitionEnd:ft,...St}=g;ot&&(dt=ot);const kt=[],Tt=ct&&it.animationState&&it.animationState.getState()[ct];for(const Rt in St){const jt=it.getValue(Rt,(ut=it.latestValues[Rt])!==null&&ut!==void 0?ut:null),Ft=St[Rt];if(Ft===void 0||Tt&&shouldBlockAnimation(Tt,Rt))continue;const $t={delay:et,...getValueTransition(dt||{},Rt)};let zt=!1;if(window.MotionHandoffAnimation){const Bt=getOptimisedAppearId(it);if(Bt){const Ht=window.MotionHandoffAnimation(Bt,Rt,frame);Ht!==null&&($t.startTime=Ht,zt=!0)}}addValueToWillChange(it,Rt),jt.start(animateMotionValue(Rt,jt,Ft,it.shouldReduceMotion&&transformProps.has(Rt)?{type:!1}:$t,it,zt));const Ut=jt.animation;Ut&&kt.push(Ut)}return ft&&Promise.all(kt).then(()=>{frame.update(()=>{ft&&setTarget(it,ft)})}),kt}function animateVariant(it,g,et={}){var ot;const ct=resolveVariant(it,g,et.type==="exit"?(ot=it.presenceContext)===null||ot===void 0?void 0:ot.custom:void 0);let{transition:ut=it.getDefaultTransition()||{}}=ct||{};et.transitionOverride&&(ut=et.transitionOverride);const dt=ct?()=>Promise.all(animateTarget(it,ct,et)):()=>Promise.resolve(),ft=it.variantChildren&&it.variantChildren.size?(kt=0)=>{const{delayChildren:Tt=0,staggerChildren:Rt,staggerDirection:jt}=ut;return animateChildren(it,g,Tt+kt,Rt,jt,et)}:()=>Promise.resolve(),{when:St}=ut;if(St){const[kt,Tt]=St==="beforeChildren"?[dt,ft]:[ft,dt];return kt().then(()=>Tt())}else return Promise.all([dt(),ft(et.delay)])}function animateChildren(it,g,et=0,ot=0,ct=1,ut){const dt=[],ft=(it.variantChildren.size-1)*ot,St=ct===1?(kt=0)=>kt*ot:(kt=0)=>ft-kt*ot;return Array.from(it.variantChildren).sort(sortByTreeOrder).forEach((kt,Tt)=>{kt.notify("AnimationStart",g),dt.push(animateVariant(kt,g,{...ut,delay:et+St(Tt)}).then(()=>kt.notify("AnimationComplete",g)))}),Promise.all(dt)}function sortByTreeOrder(it,g){return it.sortNodePosition(g)}function animateVisualElement(it,g,et={}){it.notify("AnimationStart",g);let ot;if(Array.isArray(g)){const ct=g.map(ut=>animateVariant(it,ut,et));ot=Promise.all(ct)}else if(typeof g=="string")ot=animateVariant(it,g,et);else{const ct=typeof g=="function"?resolveVariant(it,g,et.custom):g;ot=Promise.all(animateTarget(it,ct,et))}return ot.then(()=>{it.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(it){if(!it)return;if(!it.isControllingVariants){const et=it.parent?getVariantContext(it.parent)||{}:{};return it.props.initial!==void 0&&(et.initial=it.props.initial),et}const g={};for(let et=0;et<numVariantProps;et++){const ot=variantProps[et],ct=it.props[ot];(isVariantLabel(ct)||ct===!1)&&(g[ot]=ct)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(it){return g=>Promise.all(g.map(({animation:et,options:ot})=>animateVisualElement(it,et,ot)))}function createAnimationState(it){let g=animateList(it),et=createState(),ot=!0;const ct=St=>(kt,Tt)=>{var Rt;const jt=resolveVariant(it,Tt,St==="exit"?(Rt=it.presenceContext)===null||Rt===void 0?void 0:Rt.custom:void 0);if(jt){const{transition:Ft,transitionEnd:$t,...zt}=jt;kt={...kt,...zt,...$t}}return kt};function ut(St){g=St(it)}function dt(St){const{props:kt}=it,Tt=getVariantContext(it.parent)||{},Rt=[],jt=new Set;let Ft={},$t=1/0;for(let Ut=0;Ut<numAnimationTypes;Ut++){const Bt=reversePriorityOrder[Ut],Ht=et[Bt],Jt=kt[Bt]!==void 0?kt[Bt]:Tt[Bt],Zt=isVariantLabel(Jt),tn=Bt===St?Ht.isActive:null;tn===!1&&($t=Ut);let nn=Jt===Tt[Bt]&&Jt!==kt[Bt]&&Zt;if(nn&&ot&&it.manuallyAnimateOnMount&&(nn=!1),Ht.protectedKeys={...Ft},!Ht.isActive&&tn===null||!Jt&&!Ht.prevProp||isAnimationControls(Jt)||typeof Jt=="boolean")continue;const rn=checkVariantsDidChange(Ht.prevProp,Jt);let on=rn||Bt===St&&Ht.isActive&&!nn&&Zt||Ut>$t&&Zt,pn=!1;const dn=Array.isArray(Jt)?Jt:[Jt];let hn=dn.reduce(ct(Bt),{});tn===!1&&(hn={});const{prevResolvedValues:un={}}=Ht,En={...un,...hn},wn=xn=>{on=!0,jt.has(xn)&&(pn=!0,jt.delete(xn)),Ht.needsAnimating[xn]=!0;const an=it.getValue(xn);an&&(an.liveStyle=!1)};for(const xn in En){const an=hn[xn],cn=un[xn];if(Ft.hasOwnProperty(xn))continue;let bn=!1;isKeyframesTarget(an)&&isKeyframesTarget(cn)?bn=!shallowCompare(an,cn):bn=an!==cn,bn?an!=null?wn(xn):jt.add(xn):an!==void 0&&jt.has(xn)?wn(xn):Ht.protectedKeys[xn]=!0}Ht.prevProp=Jt,Ht.prevResolvedValues=hn,Ht.isActive&&(Ft={...Ft,...hn}),ot&&it.blockInitialAnimation&&(on=!1),on&&(!(nn&&rn)||pn)&&Rt.push(...dn.map(xn=>({animation:xn,options:{type:Bt}})))}if(jt.size){const Ut={};jt.forEach(Bt=>{const Ht=it.getBaseTarget(Bt),Jt=it.getValue(Bt);Jt&&(Jt.liveStyle=!0),Ut[Bt]=Ht??null}),Rt.push({animation:Ut})}let zt=!!Rt.length;return ot&&(kt.initial===!1||kt.initial===kt.animate)&&!it.manuallyAnimateOnMount&&(zt=!1),ot=!1,zt?g(Rt):Promise.resolve()}function ft(St,kt){var Tt;if(et[St].isActive===kt)return Promise.resolve();(Tt=it.variantChildren)===null||Tt===void 0||Tt.forEach(jt=>{var Ft;return(Ft=jt.animationState)===null||Ft===void 0?void 0:Ft.setActive(St,kt)}),et[St].isActive=kt;const Rt=dt(St);for(const jt in et)et[jt].protectedKeys={};return Rt}return{animateChanges:dt,setActive:ft,setAnimateFunction:ut,getState:()=>et,reset:()=>{et=createState(),ot=!0}}}function checkVariantsDidChange(it,g){return typeof g=="string"?g!==it:Array.isArray(g)?!shallowCompare(g,it):!1}function createTypeState(it=!1){return{isActive:it,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:et}=this.node.prevProps||{};g!==et&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:et}=this.node.presenceContext,{isPresent:ot}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===ot)return;const ct=this.node.animationState.setActive("exit",!g);et&&!g&&ct.then(()=>et(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(it,g,et){var ot;if(it instanceof Element)return[it];if(typeof it=="string"){let ct=document;g&&(ct=g.current);const ut=(ot=et==null?void 0:et[it])!==null&&ot!==void 0?ot:ct.querySelectorAll(it);return ut?Array.from(ut):[]}return Array.from(it)}function setupGesture(it,g){const et=resolveElements(it),ot=new AbortController,ct={passive:!0,...g,signal:ot.signal};return[et,ct,()=>ot.abort()]}function filterEvents$1(it){return g=>{g.pointerType==="touch"||isDragActive()||it(g)}}function hover(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=filterEvents$1(ft=>{const{target:St}=ft,kt=g(ft);if(!kt||!St)return;const Tt=filterEvents$1(Rt=>{kt(Rt),St.removeEventListener("pointerleave",Tt)});St.addEventListener("pointerleave",Tt,ct)});return ot.forEach(ft=>{ft.addEventListener("pointerenter",dt,ct)}),ut}const isPrimaryPointer=it=>it.pointerType==="mouse"?typeof it.button!="number"||it.button<=0:it.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(it){return g=>{g.key==="Enter"&&it(g)}}function firePointerEvent(it,g){it.dispatchEvent(new PointerEvent("pointer"+g,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(it,g)=>{const et=it.currentTarget;if(!et)return;const ot=filterEvents(()=>{if(isPressing.has(et))return;firePointerEvent(et,"down");const ct=filterEvents(()=>{firePointerEvent(et,"up")}),ut=()=>firePointerEvent(et,"cancel");et.addEventListener("keyup",ct,g),et.addEventListener("blur",ut,g)});et.addEventListener("keydown",ot,g),et.addEventListener("blur",()=>et.removeEventListener("keydown",ot),g)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(it){return focusableElements.has(it.tagName)||it.tabIndex!==-1}const isNodeOrChild=(it,g)=>g?it===g?!0:isNodeOrChild(it,g.parentElement):!1;function isValidPressEvent(it){return isPrimaryPointer(it)&&!isDragActive()}function press(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=ft=>{const St=ft.currentTarget;if(!isValidPressEvent(ft)||isPressing.has(St))return;isPressing.add(St);const kt=g(ft),Tt=(Ft,$t)=>{window.removeEventListener("pointerup",Rt),window.removeEventListener("pointercancel",jt),!(!isValidPressEvent(Ft)||!isPressing.has(St))&&(isPressing.delete(St),kt&&kt(Ft,{success:$t}))},Rt=Ft=>{Tt(Ft,et.useGlobalTarget||isNodeOrChild(St,Ft.target))},jt=Ft=>{Tt(Ft,!1)};window.addEventListener("pointerup",Rt,ct),window.addEventListener("pointercancel",jt,ct)};return ot.forEach(ft=>{isElementKeyboardAccessible(ft)||(ft.tabIndex=0),(et.useGlobalTarget?window:ft).addEventListener("pointerdown",dt,ct),ft.addEventListener("focus",kt=>enableKeyboardPress(kt,ct),ct)}),ut}function setDragLock(it){return it==="x"||it==="y"?isDragging[it]?null:(isDragging[it]=!0,()=>{isDragging[it]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(it){return{point:{x:it.pageX,y:it.pageY}}}const addPointerInfo=it=>g=>isPrimaryPointer(g)&&it(g,extractEventInfo(g));function addDomEvent(it,g,et,ot={passive:!0}){return it.addEventListener(g,et,ot),()=>it.removeEventListener(g,et)}function addPointerEvent(it,g,et,ot){return addDomEvent(it,g,addPointerInfo(et),ot)}const distance=(it,g)=>Math.abs(it-g);function distance2D(it,g){const et=distance(it.x,g.x),ot=distance(it.y,g.y);return Math.sqrt(et**2+ot**2)}class PanSession{constructor(g,et,{transformPagePoint:ot,contextWindow:ct,dragSnapToOrigin:ut=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Rt=getPanInfo(this.lastMoveEventInfo,this.history),jt=this.startEvent!==null,Ft=distance2D(Rt.offset,{x:0,y:0})>=3;if(!jt&&!Ft)return;const{point:$t}=Rt,{timestamp:zt}=frameData;this.history.push({...$t,timestamp:zt});const{onStart:Ut,onMove:Bt}=this.handlers;jt||(Ut&&Ut(this.lastMoveEvent,Rt),this.startEvent=this.lastMoveEvent),Bt&&Bt(this.lastMoveEvent,Rt)},this.handlePointerMove=(Rt,jt)=>{this.lastMoveEvent=Rt,this.lastMoveEventInfo=transformPoint(jt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Rt,jt)=>{this.end();const{onEnd:Ft,onSessionEnd:$t,resumeAnimation:zt}=this.handlers;if(this.dragSnapToOrigin&&zt&&zt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ut=getPanInfo(Rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(jt,this.transformPagePoint),this.history);this.startEvent&&Ft&&Ft(Rt,Ut),$t&&$t(Rt,Ut)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=ut,this.handlers=et,this.transformPagePoint=ot,this.contextWindow=ct||window;const dt=extractEventInfo(g),ft=transformPoint(dt,this.transformPagePoint),{point:St}=ft,{timestamp:kt}=frameData;this.history=[{...St,timestamp:kt}];const{onSessionStart:Tt}=et;Tt&&Tt(g,getPanInfo(ft,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(it,g){return g?{point:g(it.point)}:it}function subtractPoint(it,g){return{x:it.x-g.x,y:it.y-g.y}}function getPanInfo({point:it},g){return{point:it,delta:subtractPoint(it,lastDevicePoint(g)),offset:subtractPoint(it,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(it){return it[0]}function lastDevicePoint(it){return it[it.length-1]}function getVelocity(it,g){if(it.length<2)return{x:0,y:0};let et=it.length-1,ot=null;const ct=lastDevicePoint(it);for(;et>=0&&(ot=it[et],!(ct.timestamp-ot.timestamp>secondsToMilliseconds(g)));)et--;if(!ot)return{x:0,y:0};const ut=millisecondsToSeconds(ct.timestamp-ot.timestamp);if(ut===0)return{x:0,y:0};const dt={x:(ct.x-ot.x)/ut,y:(ct.y-ot.y)/ut};return dt.x===1/0&&(dt.x=0),dt.y===1/0&&(dt.y=0),dt}function isRefObject(it){return it&&typeof it=="object"&&Object.prototype.hasOwnProperty.call(it,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(it){return it.max-it.min}function isNear$1(it,g,et){return Math.abs(it-g)<=et}function calcAxisDelta(it,g,et,ot=.5){it.origin=ot,it.originPoint=mixNumber$1(g.min,g.max,it.origin),it.scale=calcLength(et)/calcLength(g),it.translate=mixNumber$1(et.min,et.max,it.origin)-it.originPoint,(it.scale>=SCALE_MIN&&it.scale<=SCALE_MAX||isNaN(it.scale))&&(it.scale=1),(it.translate>=TRANSLATE_MIN&&it.translate<=TRANSLATE_MAX||isNaN(it.translate))&&(it.translate=0)}function calcBoxDelta(it,g,et,ot){calcAxisDelta(it.x,g.x,et.x,ot?ot.originX:void 0),calcAxisDelta(it.y,g.y,et.y,ot?ot.originY:void 0)}function calcRelativeAxis(it,g,et){it.min=et.min+g.min,it.max=it.min+calcLength(g)}function calcRelativeBox(it,g,et){calcRelativeAxis(it.x,g.x,et.x),calcRelativeAxis(it.y,g.y,et.y)}function calcRelativeAxisPosition(it,g,et){it.min=g.min-et.min,it.max=it.min+calcLength(g)}function calcRelativePosition(it,g,et){calcRelativeAxisPosition(it.x,g.x,et.x),calcRelativeAxisPosition(it.y,g.y,et.y)}function applyConstraints(it,{min:g,max:et},ot){return g!==void 0&&it<g?it=ot?mixNumber$1(g,it,ot.min):Math.max(it,g):et!==void 0&&it>et&&(it=ot?mixNumber$1(et,it,ot.max):Math.min(it,et)),it}function calcRelativeAxisConstraints(it,g,et){return{min:g!==void 0?it.min+g:void 0,max:et!==void 0?it.max+et-(it.max-it.min):void 0}}function calcRelativeConstraints(it,{top:g,left:et,bottom:ot,right:ct}){return{x:calcRelativeAxisConstraints(it.x,et,ct),y:calcRelativeAxisConstraints(it.y,g,ot)}}function calcViewportAxisConstraints(it,g){let et=g.min-it.min,ot=g.max-it.max;return g.max-g.min<it.max-it.min&&([et,ot]=[ot,et]),{min:et,max:ot}}function calcViewportConstraints(it,g){return{x:calcViewportAxisConstraints(it.x,g.x),y:calcViewportAxisConstraints(it.y,g.y)}}function calcOrigin$1(it,g){let et=.5;const ot=calcLength(it),ct=calcLength(g);return ct>ot?et=progress(g.min,g.max-ot,it.min):ot>ct&&(et=progress(it.min,it.max-ct,g.min)),clamp(0,1,et)}function rebaseAxisConstraints(it,g){const et={};return g.min!==void 0&&(et.min=g.min-it.min),g.max!==void 0&&(et.max=g.max-it.min),et}const defaultElastic=.35;function resolveDragElastic(it=defaultElastic){return it===!1?it=0:it===!0&&(it=defaultElastic),{x:resolveAxisElastic(it,"left","right"),y:resolveAxisElastic(it,"top","bottom")}}function resolveAxisElastic(it,g,et){return{min:resolvePointElastic(it,g),max:resolvePointElastic(it,et)}}function resolvePointElastic(it,g){return typeof it=="number"?it:it[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(it){return[it("x"),it("y")]}function convertBoundingBoxToBox({top:it,left:g,right:et,bottom:ot}){return{x:{min:g,max:et},y:{min:it,max:ot}}}function convertBoxToBoundingBox({x:it,y:g}){return{top:g.min,right:it.max,bottom:g.max,left:it.min}}function transformBoxPoints(it,g){if(!g)return it;const et=g({x:it.left,y:it.top}),ot=g({x:it.right,y:it.bottom});return{top:et.y,left:et.x,bottom:ot.y,right:ot.x}}function isIdentityScale(it){return it===void 0||it===1}function hasScale({scale:it,scaleX:g,scaleY:et}){return!isIdentityScale(it)||!isIdentityScale(g)||!isIdentityScale(et)}function hasTransform(it){return hasScale(it)||has2DTranslate(it)||it.z||it.rotate||it.rotateX||it.rotateY||it.skewX||it.skewY}function has2DTranslate(it){return is2DTranslate(it.x)||is2DTranslate(it.y)}function is2DTranslate(it){return it&&it!=="0%"}function scalePoint(it,g,et){const ot=it-et,ct=g*ot;return et+ct}function applyPointDelta(it,g,et,ot,ct){return ct!==void 0&&(it=scalePoint(it,ct,ot)),scalePoint(it,et,ot)+g}function applyAxisDelta(it,g=0,et=1,ot,ct){it.min=applyPointDelta(it.min,g,et,ot,ct),it.max=applyPointDelta(it.max,g,et,ot,ct)}function applyBoxDelta(it,{x:g,y:et}){applyAxisDelta(it.x,g.translate,g.scale,g.originPoint),applyAxisDelta(it.y,et.translate,et.scale,et.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(it,g,et,ot=!1){const ct=et.length;if(!ct)return;g.x=g.y=1;let ut,dt;for(let ft=0;ft<ct;ft++){ut=et[ft],dt=ut.projectionDelta;const{visualElement:St}=ut.options;St&&St.props.style&&St.props.style.display==="contents"||(ot&&ut.options.layoutScroll&&ut.scroll&&ut!==ut.root&&transformBox(it,{x:-ut.scroll.offset.x,y:-ut.scroll.offset.y}),dt&&(g.x*=dt.x.scale,g.y*=dt.y.scale,applyBoxDelta(it,dt)),ot&&hasTransform(ut.latestValues)&&transformBox(it,ut.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(it,g){it.min=it.min+g,it.max=it.max+g}function transformAxis(it,g,et,ot,ct=.5){const ut=mixNumber$1(it.min,it.max,ct);applyAxisDelta(it,g,et,ut,ot)}function transformBox(it,g){transformAxis(it.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(it.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(it,g){return convertBoundingBoxToBox(transformBoxPoints(it.getBoundingClientRect(),g))}function measurePageBox(it,g,et){const ot=measureViewportBox(it,et),{scroll:ct}=g;return ct&&(translateAxis(ot.x,ct.offset.x),translateAxis(ot.y,ct.offset.y)),ot}const getContextWindow=({current:it})=>it?it.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:et=!1}={}){const{presenceContext:ot}=this.visualElement;if(ot&&ot.isPresent===!1)return;const ct=Tt=>{const{dragSnapToOrigin:Rt}=this.getProps();Rt?this.pauseAnimation():this.stopAnimation(),et&&this.snapToCursor(extractEventInfo(Tt).point)},ut=(Tt,Rt)=>{const{drag:jt,dragPropagation:Ft,onDragStart:$t}=this.getProps();if(jt&&!Ft&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(jt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ut=>{let Bt=this.getAxisMotionValue(Ut).get()||0;if(percent.test(Bt)){const{projection:Ht}=this.visualElement;if(Ht&&Ht.layout){const Jt=Ht.layout.layoutBox[Ut];Jt&&(Bt=calcLength(Jt)*(parseFloat(Bt)/100))}}this.originPoint[Ut]=Bt}),$t&&frame.postRender(()=>$t(Tt,Rt)),addValueToWillChange(this.visualElement,"transform");const{animationState:zt}=this.visualElement;zt&&zt.setActive("whileDrag",!0)},dt=(Tt,Rt)=>{const{dragPropagation:jt,dragDirectionLock:Ft,onDirectionLock:$t,onDrag:zt}=this.getProps();if(!jt&&!this.openDragLock)return;const{offset:Ut}=Rt;if(Ft&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ut),this.currentDirection!==null&&$t&&$t(this.currentDirection);return}this.updateAxis("x",Rt.point,Ut),this.updateAxis("y",Rt.point,Ut),this.visualElement.render(),zt&&zt(Tt,Rt)},ft=(Tt,Rt)=>this.stop(Tt,Rt),St=()=>eachAxis(Tt=>{var Rt;return this.getAnimationState(Tt)==="paused"&&((Rt=this.getAxisMotionValue(Tt).animation)===null||Rt===void 0?void 0:Rt.play())}),{dragSnapToOrigin:kt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:ct,onStart:ut,onMove:dt,onSessionEnd:ft,resumeAnimation:St},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:kt,contextWindow:getContextWindow(this.visualElement)})}stop(g,et){const ot=this.isDragging;if(this.cancel(),!ot)return;const{velocity:ct}=et;this.startAnimation(ct);const{onDragEnd:ut}=this.getProps();ut&&frame.postRender(()=>ut(g,et))}cancel(){this.isDragging=!1;const{projection:g,animationState:et}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:ot}=this.getProps();!ot&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),et&&et.setActive("whileDrag",!1)}updateAxis(g,et,ot){const{drag:ct}=this.getProps();if(!ot||!shouldDrag(g,ct,this.currentDirection))return;const ut=this.getAxisMotionValue(g);let dt=this.originPoint[g]+ot[g];this.constraints&&this.constraints[g]&&(dt=applyConstraints(dt,this.constraints[g],this.elastic[g])),ut.set(dt)}resolveConstraints(){var g;const{dragConstraints:et,dragElastic:ot}=this.getProps(),ct=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,ut=this.constraints;et&&isRefObject(et)?this.constraints||(this.constraints=this.resolveRefConstraints()):et&&ct?this.constraints=calcRelativeConstraints(ct.layoutBox,et):this.constraints=!1,this.elastic=resolveDragElastic(ot),ut!==this.constraints&&ct&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(dt=>{this.constraints!==!1&&this.getAxisMotionValue(dt)&&(this.constraints[dt]=rebaseAxisConstraints(ct.layoutBox[dt],this.constraints[dt]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:et}=this.getProps();if(!g||!isRefObject(g))return!1;const ot=g.current,{projection:ct}=this.visualElement;if(!ct||!ct.layout)return!1;const ut=measurePageBox(ot,ct.root,this.visualElement.getTransformPagePoint());let dt=calcViewportConstraints(ct.layout.layoutBox,ut);if(et){const ft=et(convertBoxToBoundingBox(dt));this.hasMutatedConstraints=!!ft,ft&&(dt=convertBoundingBoxToBox(ft))}return dt}startAnimation(g){const{drag:et,dragMomentum:ot,dragElastic:ct,dragTransition:ut,dragSnapToOrigin:dt,onDragTransitionEnd:ft}=this.getProps(),St=this.constraints||{},kt=eachAxis(Tt=>{if(!shouldDrag(Tt,et,this.currentDirection))return;let Rt=St&&St[Tt]||{};dt&&(Rt={min:0,max:0});const jt=ct?200:1e6,Ft=ct?40:1e7,$t={type:"inertia",velocity:ot?g[Tt]:0,bounceStiffness:jt,bounceDamping:Ft,timeConstant:750,restDelta:1,restSpeed:10,...ut,...Rt};return this.startAxisValueAnimation(Tt,$t)});return Promise.all(kt).then(ft)}startAxisValueAnimation(g,et){const ot=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),ot.start(animateMotionValue(g,ot,0,et,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.pause()})}getAnimationState(g){var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.state}getAxisMotionValue(g){const et=`_drag${g.toUpperCase()}`,ot=this.visualElement.getProps(),ct=ot[et];return ct||this.visualElement.getValue(g,(ot.initial?ot.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(et=>{const{drag:ot}=this.getProps();if(!shouldDrag(et,ot,this.currentDirection))return;const{projection:ct}=this.visualElement,ut=this.getAxisMotionValue(et);if(ct&&ct.layout){const{min:dt,max:ft}=ct.layout.layoutBox[et];ut.set(g[et]-mixNumber$1(dt,ft,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:et}=this.getProps(),{projection:ot}=this.visualElement;if(!isRefObject(et)||!ot||!this.constraints)return;this.stopAnimation();const ct={x:0,y:0};eachAxis(dt=>{const ft=this.getAxisMotionValue(dt);if(ft&&this.constraints!==!1){const St=ft.get();ct[dt]=calcOrigin$1({min:St,max:St},this.constraints[dt])}});const{transformTemplate:ut}=this.visualElement.getProps();this.visualElement.current.style.transform=ut?ut({},""):"none",ot.root&&ot.root.updateScroll(),ot.updateLayout(),this.resolveConstraints(),eachAxis(dt=>{if(!shouldDrag(dt,g,null))return;const ft=this.getAxisMotionValue(dt),{min:St,max:kt}=this.constraints[dt];ft.set(mixNumber$1(St,kt,ct[dt]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,et=addPointerEvent(g,"pointerdown",St=>{const{drag:kt,dragListener:Tt=!0}=this.getProps();kt&&Tt&&this.start(St)}),ot=()=>{const{dragConstraints:St}=this.getProps();isRefObject(St)&&St.current&&(this.constraints=this.resolveRefConstraints())},{projection:ct}=this.visualElement,ut=ct.addEventListener("measure",ot);ct&&!ct.layout&&(ct.root&&ct.root.updateScroll(),ct.updateLayout()),frame.read(ot);const dt=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ft=ct.addEventListener("didUpdate",({delta:St,hasLayoutChanged:kt})=>{this.isDragging&&kt&&(eachAxis(Tt=>{const Rt=this.getAxisMotionValue(Tt);Rt&&(this.originPoint[Tt]+=St[Tt].translate,Rt.set(Rt.get()+St[Tt].translate))}),this.visualElement.render())});return()=>{dt(),et(),ut(),ft&&ft()}}getProps(){const g=this.visualElement.getProps(),{drag:et=!1,dragDirectionLock:ot=!1,dragPropagation:ct=!1,dragConstraints:ut=!1,dragElastic:dt=defaultElastic,dragMomentum:ft=!0}=g;return{...g,drag:et,dragDirectionLock:ot,dragPropagation:ct,dragConstraints:ut,dragElastic:dt,dragMomentum:ft}}}function shouldDrag(it,g,et){return(g===!0||g===it)&&(et===null||et===it)}function getCurrentDirection(it,g=10){let et=null;return Math.abs(it.y)>g?et="y":Math.abs(it.x)>g&&(et="x"),et}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=it=>(g,et)=>{it&&frame.postRender(()=>it(g,et))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:et,onPan:ot,onPanEnd:ct}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(et),onMove:ot,onEnd:(ut,dt)=>{delete this.session,ct&&frame.postRender(()=>ct(ut,dt))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const it=reactExports.useContext(PresenceContext);if(it===null)return[!0,null];const{isPresent:g,onExitComplete:et,register:ot}=it,ct=reactExports.useId();reactExports.useEffect(()=>ot(ct),[]);const ut=reactExports.useCallback(()=>et&&et(ct),[ct,et]);return!g&&et?[!1,ut]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(it,g){return g.max===g.min?0:it/(g.max-g.min)*100}const correctBorderRadius={correct:(it,g)=>{if(!g.target)return it;if(typeof it=="string")if(px.test(it))it=parseFloat(it);else return it;const et=pixelsToPercent(it,g.target.x),ot=pixelsToPercent(it,g.target.y);return`${et}% ${ot}%`}},correctBoxShadow={correct:(it,{treeScale:g,projectionDelta:et})=>{const ot=it,ct=complex.parse(it);if(ct.length>5)return ot;const ut=complex.createTransformer(it),dt=typeof ct[0]!="number"?1:0,ft=et.x.scale*g.x,St=et.y.scale*g.y;ct[0+dt]/=ft,ct[1+dt]/=St;const kt=mixNumber$1(ft,St,.5);return typeof ct[2+dt]=="number"&&(ct[2+dt]/=kt),typeof ct[3+dt]=="number"&&(ct[3+dt]/=kt),ut(ct)}},scaleCorrectors={};function addScaleCorrector(it){Object.assign(scaleCorrectors,it)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot,layoutId:ct}=this.props,{projection:ut}=g;addScaleCorrector(defaultScaleCorrectors),ut&&(et.group&&et.group.add(ut),ot&&ot.register&&ct&&ot.register(ut),ut.root.didUpdate(),ut.addEventListener("animationComplete",()=>{this.safeToRemove()}),ut.setOptions({...ut.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:et,visualElement:ot,drag:ct,isPresent:ut}=this.props,dt=ot.projection;return dt&&(dt.isPresent=ut,ct||g.layoutDependency!==et||et===void 0?dt.willUpdate():this.safeToRemove(),g.isPresent!==ut&&(ut?dt.promote():dt.relegate()||frame.postRender(()=>{const ft=dt.getStack();(!ft||!ft.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot}=this.props,{projection:ct}=g;ct&&(ct.scheduleCheckAfterUnmount(),et&&et.group&&et.group.remove(ct),ot&&ot.deregister&&ot.deregister(ct))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(it){const[g,et]=usePresence(),ot=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...it,layoutGroup:ot,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:et})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=it=>typeof it=="string"?parseFloat(it):it,isPx=it=>typeof it=="number"||px.test(it);function mixValues(it,g,et,ot,ct,ut){ct?(it.opacity=mixNumber$1(0,et.opacity!==void 0?et.opacity:1,easeCrossfadeIn(ot)),it.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(ot))):ut&&(it.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,et.opacity!==void 0?et.opacity:1,ot));for(let dt=0;dt<numBorders;dt++){const ft=`border${borders[dt]}Radius`;let St=getRadius(g,ft),kt=getRadius(et,ft);if(St===void 0&&kt===void 0)continue;St||(St=0),kt||(kt=0),St===0||kt===0||isPx(St)===isPx(kt)?(it[ft]=Math.max(mixNumber$1(asNumber(St),asNumber(kt),ot),0),(percent.test(kt)||percent.test(St))&&(it[ft]+="%")):it[ft]=kt}(g.rotate||et.rotate)&&(it.rotate=mixNumber$1(g.rotate||0,et.rotate||0,ot))}function getRadius(it,g){return it[g]!==void 0?it[g]:it.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(it,g,et){return ot=>ot<it?0:ot>g?1:et(progress(it,g,ot))}function copyAxisInto(it,g){it.min=g.min,it.max=g.max}function copyBoxInto(it,g){copyAxisInto(it.x,g.x),copyAxisInto(it.y,g.y)}function copyAxisDeltaInto(it,g){it.translate=g.translate,it.scale=g.scale,it.originPoint=g.originPoint,it.origin=g.origin}function removePointDelta(it,g,et,ot,ct){return it-=g,it=scalePoint(it,1/et,ot),ct!==void 0&&(it=scalePoint(it,1/ct,ot)),it}function removeAxisDelta(it,g=0,et=1,ot=.5,ct,ut=it,dt=it){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(dt.min,dt.max,g/100)-dt.min),typeof g!="number")return;let ft=mixNumber$1(ut.min,ut.max,ot);it===ut&&(ft-=g),it.min=removePointDelta(it.min,g,et,ft,ct),it.max=removePointDelta(it.max,g,et,ft,ct)}function removeAxisTransforms(it,g,[et,ot,ct],ut,dt){removeAxisDelta(it,g[et],g[ot],g[ct],g.scale,ut,dt)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(it,g,et,ot){removeAxisTransforms(it.x,g,xKeys,et?et.x:void 0,ot?ot.x:void 0),removeAxisTransforms(it.y,g,yKeys,et?et.y:void 0,ot?ot.y:void 0)}function isAxisDeltaZero(it){return it.translate===0&&it.scale===1}function isDeltaZero(it){return isAxisDeltaZero(it.x)&&isAxisDeltaZero(it.y)}function axisEquals(it,g){return it.min===g.min&&it.max===g.max}function boxEquals(it,g){return axisEquals(it.x,g.x)&&axisEquals(it.y,g.y)}function axisEqualsRounded(it,g){return Math.round(it.min)===Math.round(g.min)&&Math.round(it.max)===Math.round(g.max)}function boxEqualsRounded(it,g){return axisEqualsRounded(it.x,g.x)&&axisEqualsRounded(it.y,g.y)}function aspectRatio(it){return calcLength(it.x)/calcLength(it.y)}function axisDeltaEquals(it,g){return it.translate===g.translate&&it.scale===g.scale&&it.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const et=this.members[this.members.length-1];et&&this.promote(et)}}relegate(g){const et=this.members.findIndex(ct=>g===ct);if(et===0)return!1;let ot;for(let ct=et;ct>=0;ct--){const ut=this.members[ct];if(ut.isPresent!==!1){ot=ut;break}}return ot?(this.promote(ot),!0):!1}promote(g,et){const ot=this.lead;if(g!==ot&&(this.prevLead=ot,this.lead=g,g.show(),ot)){ot.instance&&ot.scheduleRender(),g.scheduleRender(),g.resumeFrom=ot,et&&(g.resumeFrom.preserveOpacity=!0),ot.snapshot&&(g.snapshot=ot.snapshot,g.snapshot.latestValues=ot.animationValues||ot.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:ct}=g.options;ct===!1&&ot.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:et,resumingFrom:ot}=g;et.onExitComplete&&et.onExitComplete(),ot&&ot.options.onExitComplete&&ot.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(it,g,et){let ot="";const ct=it.x.translate/g.x,ut=it.y.translate/g.y,dt=(et==null?void 0:et.z)||0;if((ct||ut||dt)&&(ot=`translate3d(${ct}px, ${ut}px, ${dt}px) `),(g.x!==1||g.y!==1)&&(ot+=`scale(${1/g.x}, ${1/g.y}) `),et){const{transformPerspective:kt,rotate:Tt,rotateX:Rt,rotateY:jt,skewX:Ft,skewY:$t}=et;kt&&(ot=`perspective(${kt}px) ${ot}`),Tt&&(ot+=`rotate(${Tt}deg) `),Rt&&(ot+=`rotateX(${Rt}deg) `),jt&&(ot+=`rotateY(${jt}deg) `),Ft&&(ot+=`skewX(${Ft}deg) `),$t&&(ot+=`skewY(${$t}deg) `)}const ft=it.x.scale*g.x,St=it.y.scale*g.y;return(ft!==1||St!==1)&&(ot+=`scale(${ft}, ${St})`),ot||"none"}const compareByDepth=(it,g)=>it.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(it){const g=isMotionValue(it)?it.get():it;return isCustomValue(g)?g.toValue():g}function delay(it,g){const et=time.now(),ot=({timestamp:ct})=>{const ut=ct-et;ut>=g&&(cancelFrame(ot),it(ut-g))};return frame.read(ot,!0),()=>cancelFrame(ot)}function isSVGElement(it){return it instanceof SVGElement&&it.tagName!=="svg"}function animateSingleValue(it,g,et){const ot=isMotionValue(it)?it:motionValue(it);return ot.start(animateMotionValue("",ot,g,et)),ot.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(it,g,et,ot){const{latestValues:ct}=g;ct[it]&&(et[it]=ct[it],g.setStaticValue(it,0),ot&&(ot[it]=0))}function cancelTreeOptimisedTransformAnimations(it){if(it.hasCheckedOptimisedAppear=!0,it.root===it)return;const{visualElement:g}=it.options;if(!g)return;const et=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(et,"transform")){const{layout:ct,layoutId:ut}=it.options;window.MotionCancelOptimisedAnimation(et,"transform",frame,!(ct||ut))}const{parent:ot}=it;ot&&!ot.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(ot)}function createProjectionNode$1({attachResizeListener:it,defaultParent:g,measureScroll:et,checkIsScrollRoot:ot,resetTransform:ct}){return class{constructor(dt={},ft=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=dt,this.root=ft?ft.root||ft:this,this.path=ft?[...ft.path,ft]:[],this.parent=ft,this.depth=ft?ft.depth+1:0;for(let St=0;St<this.path.length;St++)this.path[St].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(dt,ft){return this.eventHandlers.has(dt)||this.eventHandlers.set(dt,new SubscriptionManager),this.eventHandlers.get(dt).add(ft)}notifyListeners(dt,...ft){const St=this.eventHandlers.get(dt);St&&St.notify(...ft)}hasListeners(dt){return this.eventHandlers.has(dt)}mount(dt,ft=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(dt),this.instance=dt;const{layoutId:St,layout:kt,visualElement:Tt}=this.options;if(Tt&&!Tt.current&&Tt.mount(dt),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ft&&(kt||St)&&(this.isLayoutDirty=!0),it){let Rt;const jt=()=>this.root.updateBlockedByResize=!1;it(dt,()=>{this.root.updateBlockedByResize=!0,Rt&&Rt(),Rt=delay(jt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}St&&this.root.registerSharedNode(St,this),this.options.animate!==!1&&Tt&&(St||kt)&&this.addEventListener("didUpdate",({delta:Rt,hasLayoutChanged:jt,hasRelativeTargetChanged:Ft,layout:$t})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const zt=this.options.transition||Tt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Ut,onLayoutAnimationComplete:Bt}=Tt.getProps(),Ht=!this.targetLayout||!boxEqualsRounded(this.targetLayout,$t)||Ft,Jt=!jt&&Ft;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Jt||jt&&(Ht||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Rt,Jt);const Zt={...getValueTransition(zt,"layout"),onPlay:Ut,onComplete:Bt};(Tt.shouldReduceMotion||this.options.layoutRoot)&&(Zt.delay=0,Zt.type=!1),this.startAnimation(Zt)}else jt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=$t})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const dt=this.getStack();dt&&dt.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:dt}=this.options;return dt&&dt.getProps().transformTemplate}willUpdate(dt=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Tt=0;Tt<this.path.length;Tt++){const Rt=this.path[Tt];Rt.shouldResetTransform=!0,Rt.updateScroll("snapshot"),Rt.options.layoutRoot&&Rt.willUpdate(!1)}const{layoutId:ft,layout:St}=this.options;if(ft===void 0&&!St)return;const kt=this.getTransformTemplate();this.prevTransformTemplateValue=kt?kt(this.latestValues,""):void 0,this.updateSnapshot(),dt&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ft=time.now();frameData.delta=clamp(0,1e3/60,ft-frameData.timestamp),frameData.timestamp=ft,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let St=0;St<this.path.length;St++)this.path[St].updateScroll();const dt=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ft}=this.options;ft&&ft.notify("LayoutMeasure",this.layout.layoutBox,dt?dt.layoutBox:void 0)}updateScroll(dt="measure"){let ft=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===dt&&(ft=!1),ft){const St=ot(this.instance);this.scroll={animationId:this.root.animationId,phase:dt,isRoot:St,offset:et(this.instance),wasRoot:this.scroll?this.scroll.isRoot:St}}}resetTransform(){if(!ct)return;const dt=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ft=this.projectionDelta&&!isDeltaZero(this.projectionDelta),St=this.getTransformTemplate(),kt=St?St(this.latestValues,""):void 0,Tt=kt!==this.prevTransformTemplateValue;dt&&(ft||hasTransform(this.latestValues)||Tt)&&(ct(this.instance,kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(dt=!0){const ft=this.measurePageBox();let St=this.removeElementScroll(ft);return dt&&(St=this.removeTransform(St)),roundBox(St),{animationId:this.root.animationId,measuredBox:ft,layoutBox:St,latestValues:{},source:this.id}}measurePageBox(){var dt;const{visualElement:ft}=this.options;if(!ft)return createBox();const St=ft.measureViewportBox();if(!(((dt=this.scroll)===null||dt===void 0?void 0:dt.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Tt}=this.root;Tt&&(translateAxis(St.x,Tt.offset.x),translateAxis(St.y,Tt.offset.y))}return St}removeElementScroll(dt){var ft;const St=createBox();if(copyBoxInto(St,dt),!((ft=this.scroll)===null||ft===void 0)&&ft.wasRoot)return St;for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt],{scroll:Rt,options:jt}=Tt;Tt!==this.root&&Rt&&jt.layoutScroll&&(Rt.wasRoot&&copyBoxInto(St,dt),translateAxis(St.x,Rt.offset.x),translateAxis(St.y,Rt.offset.y))}return St}applyTransform(dt,ft=!1){const St=createBox();copyBoxInto(St,dt);for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt];!ft&&Tt.options.layoutScroll&&Tt.scroll&&Tt!==Tt.root&&transformBox(St,{x:-Tt.scroll.offset.x,y:-Tt.scroll.offset.y}),hasTransform(Tt.latestValues)&&transformBox(St,Tt.latestValues)}return hasTransform(this.latestValues)&&transformBox(St,this.latestValues),St}removeTransform(dt){const ft=createBox();copyBoxInto(ft,dt);for(let St=0;St<this.path.length;St++){const kt=this.path[St];if(!kt.instance||!hasTransform(kt.latestValues))continue;hasScale(kt.latestValues)&&kt.updateSnapshot();const Tt=createBox(),Rt=kt.measurePageBox();copyBoxInto(Tt,Rt),removeBoxTransforms(ft,kt.latestValues,kt.snapshot?kt.snapshot.layoutBox:void 0,Tt)}return hasTransform(this.latestValues)&&removeBoxTransforms(ft,this.latestValues),ft}setTargetDelta(dt){this.targetDelta=dt,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(dt){this.options={...this.options,...dt,crossfade:dt.crossfade!==void 0?dt.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(dt=!1){var ft;const St=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=St.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=St.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=St.isSharedProjectionDirty);const kt=!!this.resumingFrom||this!==St;if(!(dt||kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ft=this.parent)===null||ft===void 0)&&ft.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Rt,layoutId:jt}=this.options;if(!(!this.layout||!(Rt||jt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Ft=this.getClosestProjectingParent();Ft&&Ft.layout&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Ft.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Ft=this.getClosestProjectingParent();Ft&&!!Ft.resumingFrom==!!this.resumingFrom&&!Ft.options.layoutScroll&&Ft.target&&this.animationProgress!==1?(this.relativeParent=Ft,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Ft.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var dt;const ft=this.getLead(),St=!!this.resumingFrom||this!==ft;let kt=!0;if((this.isProjectionDirty||!((dt=this.parent)===null||dt===void 0)&&dt.isProjectionDirty)&&(kt=!1),St&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(kt=!1),kt)return;const{layout:Tt,layoutId:Rt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Tt||Rt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const jt=this.treeScale.x,Ft=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,St),ft.layout&&!ft.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ft.target=ft.layout.layoutBox,ft.targetWithTransforms=createBox());const{target:$t}=ft;if(!$t){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,$t,this.latestValues),(this.treeScale.x!==jt||this.treeScale.y!==Ft||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",$t)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(dt=!0){var ft;if((ft=this.options.visualElement)===null||ft===void 0||ft.scheduleRender(),dt){const St=this.getStack();St&&St.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(dt,ft=!1){const St=this.snapshot,kt=St?St.latestValues:{},Tt={...this.latestValues},Rt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ft;const jt=createBox(),Ft=St?St.source:void 0,$t=this.layout?this.layout.source:void 0,zt=Ft!==$t,Ut=this.getStack(),Bt=!Ut||Ut.members.length<=1,Ht=!!(zt&&!Bt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Jt;this.mixTargetDelta=Zt=>{const tn=Zt/1e3;mixAxisDelta(Rt.x,dt.x,tn),mixAxisDelta(Rt.y,dt.y,tn),this.setTargetDelta(Rt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(jt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,jt,tn),Jt&&boxEquals(this.relativeTarget,Jt)&&(this.isProjectionDirty=!1),Jt||(Jt=createBox()),copyBoxInto(Jt,this.relativeTarget)),zt&&(this.animationValues=Tt,mixValues(Tt,kt,this.latestValues,tn,Ht,Bt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=tn},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(dt){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...dt,onUpdate:ft=>{this.mixTargetDelta(ft),dt.onUpdate&&dt.onUpdate(ft)},onComplete:()=>{dt.onComplete&&dt.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const dt=this.getStack();dt&&dt.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const dt=this.getLead();let{targetWithTransforms:ft,target:St,layout:kt,latestValues:Tt}=dt;if(!(!ft||!St||!kt)){if(this!==dt&&this.layout&&kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,kt.layoutBox)){St=this.target||createBox();const Rt=calcLength(this.layout.layoutBox.x);St.x.min=dt.target.x.min,St.x.max=St.x.min+Rt;const jt=calcLength(this.layout.layoutBox.y);St.y.min=dt.target.y.min,St.y.max=St.y.min+jt}copyBoxInto(ft,St),transformBox(ft,Tt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ft,Tt)}}registerSharedNode(dt,ft){this.sharedNodes.has(dt)||this.sharedNodes.set(dt,new NodeStack),this.sharedNodes.get(dt).add(ft);const kt=ft.options.initialPromotionConfig;ft.promote({transition:kt?kt.transition:void 0,preserveFollowOpacity:kt&&kt.shouldPreserveFollowOpacity?kt.shouldPreserveFollowOpacity(ft):void 0})}isLead(){const dt=this.getStack();return dt?dt.lead===this:!0}getLead(){var dt;const{layoutId:ft}=this.options;return ft?((dt=this.getStack())===null||dt===void 0?void 0:dt.lead)||this:this}getPrevLead(){var dt;const{layoutId:ft}=this.options;return ft?(dt=this.getStack())===null||dt===void 0?void 0:dt.prevLead:void 0}getStack(){const{layoutId:dt}=this.options;if(dt)return this.root.sharedNodes.get(dt)}promote({needsReset:dt,transition:ft,preserveFollowOpacity:St}={}){const kt=this.getStack();kt&&kt.promote(this,St),dt&&(this.projectionDelta=void 0,this.needsReset=!0),ft&&this.setOptions({transition:ft})}relegate(){const dt=this.getStack();return dt?dt.relegate(this):!1}resetSkewAndRotation(){const{visualElement:dt}=this.options;if(!dt)return;let ft=!1;const{latestValues:St}=dt;if((St.z||St.rotate||St.rotateX||St.rotateY||St.rotateZ||St.skewX||St.skewY)&&(ft=!0),!ft)return;const kt={};St.z&&resetDistortingTransform("z",dt,kt,this.animationValues);for(let Tt=0;Tt<transformAxes.length;Tt++)resetDistortingTransform(`rotate${transformAxes[Tt]}`,dt,kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Tt]}`,dt,kt,this.animationValues);dt.render();for(const Tt in kt)dt.setStaticValue(Tt,kt[Tt]),this.animationValues&&(this.animationValues[Tt]=kt[Tt]);dt.scheduleRender()}getProjectionStyles(dt){var ft,St;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const kt={visibility:""},Tt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,kt.opacity="",kt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"",kt.transform=Tt?Tt(this.latestValues,""):"none",kt;const Rt=this.getLead();if(!this.projectionDelta||!this.layout||!Rt.target){const zt={};return this.options.layoutId&&(zt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,zt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(zt.transform=Tt?Tt({},""):"none",this.hasProjected=!1),zt}const jt=Rt.animationValues||Rt.latestValues;this.applyTransformsToTarget(),kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,jt),Tt&&(kt.transform=Tt(jt,kt.transform));const{x:Ft,y:$t}=this.projectionDelta;kt.transformOrigin=`${Ft.origin*100}% ${$t.origin*100}% 0`,Rt.animationValues?kt.opacity=Rt===this?(St=(ft=jt.opacity)!==null&&ft!==void 0?ft:this.latestValues.opacity)!==null&&St!==void 0?St:1:this.preserveOpacity?this.latestValues.opacity:jt.opacityExit:kt.opacity=Rt===this?jt.opacity!==void 0?jt.opacity:"":jt.opacityExit!==void 0?jt.opacityExit:0;for(const zt in scaleCorrectors){if(jt[zt]===void 0)continue;const{correct:Ut,applyTo:Bt}=scaleCorrectors[zt],Ht=kt.transform==="none"?jt[zt]:Ut(jt[zt],Rt);if(Bt){const Jt=Bt.length;for(let Zt=0;Zt<Jt;Zt++)kt[Bt[Zt]]=Ht}else kt[zt]=Ht}return this.options.layoutId&&(kt.pointerEvents=Rt===this?resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"":"none"),kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(dt=>{var ft;return(ft=dt.currentAnimation)===null||ft===void 0?void 0:ft.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(it){it.updateLayout()}function notifyLayoutUpdate(it){var g;const et=((g=it.resumeFrom)===null||g===void 0?void 0:g.snapshot)||it.snapshot;if(it.isLead()&&it.layout&&et&&it.hasListeners("didUpdate")){const{layoutBox:ot,measuredBox:ct}=it.layout,{animationType:ut}=it.options,dt=et.source!==it.layout.source;ut==="size"?eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],Ft=calcLength(jt);jt.min=ot[Rt].min,jt.max=jt.min+Ft}):shouldAnimatePositionOnly(ut,et.layoutBox,ot)&&eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],Ft=calcLength(ot[Rt]);jt.max=jt.min+Ft,it.relativeTarget&&!it.currentAnimation&&(it.isProjectionDirty=!0,it.relativeTarget[Rt].max=it.relativeTarget[Rt].min+Ft)});const ft=createDelta();calcBoxDelta(ft,ot,et.layoutBox);const St=createDelta();dt?calcBoxDelta(St,it.applyTransform(ct,!0),et.measuredBox):calcBoxDelta(St,ot,et.layoutBox);const kt=!isDeltaZero(ft);let Tt=!1;if(!it.resumeFrom){const Rt=it.getClosestProjectingParent();if(Rt&&!Rt.resumeFrom){const{snapshot:jt,layout:Ft}=Rt;if(jt&&Ft){const $t=createBox();calcRelativePosition($t,et.layoutBox,jt.layoutBox);const zt=createBox();calcRelativePosition(zt,ot,Ft.layoutBox),boxEqualsRounded($t,zt)||(Tt=!0),Rt.options.layoutRoot&&(it.relativeTarget=zt,it.relativeTargetOrigin=$t,it.relativeParent=Rt)}}}it.notifyListeners("didUpdate",{layout:ot,snapshot:et,delta:St,layoutDelta:ft,hasLayoutChanged:kt,hasRelativeTargetChanged:Tt})}else if(it.isLead()){const{onExitComplete:ot}=it.options;ot&&ot()}it.options.transition=void 0}function propagateDirtyNodes(it){isDebug&&metrics.totalNodes++,it.parent&&(it.isProjecting()||(it.isProjectionDirty=it.parent.isProjectionDirty),it.isSharedProjectionDirty||(it.isSharedProjectionDirty=!!(it.isProjectionDirty||it.parent.isProjectionDirty||it.parent.isSharedProjectionDirty)),it.isTransformDirty||(it.isTransformDirty=it.parent.isTransformDirty))}function cleanDirtyNodes(it){it.isProjectionDirty=it.isSharedProjectionDirty=it.isTransformDirty=!1}function clearSnapshot(it){it.clearSnapshot()}function clearMeasurements(it){it.clearMeasurements()}function clearIsLayoutDirty(it){it.isLayoutDirty=!1}function resetTransformStyle(it){const{visualElement:g}=it.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),it.resetTransform()}function finishAnimation(it){it.finishAnimation(),it.targetDelta=it.relativeTarget=it.target=void 0,it.isProjectionDirty=!0}function resolveTargetDelta(it){it.resolveTargetDelta()}function calcProjection(it){it.calcProjection()}function resetSkewAndRotation(it){it.resetSkewAndRotation()}function removeLeadSnapshots(it){it.removeLeadSnapshot()}function mixAxisDelta(it,g,et){it.translate=mixNumber$1(g.translate,0,et),it.scale=mixNumber$1(g.scale,1,et),it.origin=g.origin,it.originPoint=g.originPoint}function mixAxis(it,g,et,ot){it.min=mixNumber$1(g.min,et.min,ot),it.max=mixNumber$1(g.max,et.max,ot)}function mixBox(it,g,et,ot){mixAxis(it.x,g.x,et.x,ot),mixAxis(it.y,g.y,et.y,ot)}function hasOpacityCrossfade(it){return it.animationValues&&it.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=it=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(it),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(it){it.min=roundPoint(it.min),it.max=roundPoint(it.max)}function roundBox(it){roundAxis(it.x),roundAxis(it.y)}function shouldAnimatePositionOnly(it,g,et){return it==="position"||it==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(et),.2)}function checkNodeWasScrollRoot(it){var g;return it!==it.root&&((g=it.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(it,g)=>addDomEvent(it,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:it=>({x:it.scrollLeft,y:it.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const it=new DocumentProjectionNode({});it.mount(window),it.setOptions({layoutScroll:!0}),rootProjectionNode.current=it}return rootProjectionNode.current},resetTransform:(it,g)=>{it.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:it=>window.getComputedStyle(it).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileHover&&it.animationState.setActive("whileHover",et==="Start");const ct="onHover"+et,ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class HoverGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=hover(g,et=>(handleHoverEvent(this.node,et,"Start"),ot=>handleHoverEvent(this.node,ot,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileTap&&it.animationState.setActive("whileTap",et==="Start");const ct="onTap"+(et==="End"?"":et),ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class PressGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=press(g,et=>(handlePressEvent(this.node,et,"Start"),(ot,{success:ct})=>handlePressEvent(this.node,ot,ct?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=it=>{const g=observerCallbacks.get(it.target);g&&g(it)},fireAllObserverCallbacks=it=>{it.forEach(fireObserverCallback)};function initIntersectionObserver({root:it,...g}){const et=it||document;observers.has(et)||observers.set(et,{});const ot=observers.get(et),ct=JSON.stringify(g);return ot[ct]||(ot[ct]=new IntersectionObserver(fireAllObserverCallbacks,{root:it,...g})),ot[ct]}function observeIntersection(it,g,et){const ot=initIntersectionObserver(g);return observerCallbacks.set(it,et),ot.observe(it),()=>{observerCallbacks.delete(it),ot.unobserve(it)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:et,margin:ot,amount:ct="some",once:ut}=g,dt={root:et?et.current:void 0,rootMargin:ot,threshold:typeof ct=="number"?ct:thresholdNames[ct]},ft=St=>{const{isIntersecting:kt}=St;if(this.isInView===kt||(this.isInView=kt,ut&&!kt&&this.hasEnteredView))return;kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",kt);const{onViewportEnter:Tt,onViewportLeave:Rt}=this.node.getProps(),jt=kt?Tt:Rt;jt&&jt(St)};return observeIntersection(this.node.current,dt,ft)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:et}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,et))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:it={}},{viewport:g={}}={}){return et=>it[et]!==g[et]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:it=>it,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(it,g,et,ot,ct){var ut,dt;const{visualElement:ft}=reactExports.useContext(MotionContext),St=reactExports.useContext(LazyContext),kt=reactExports.useContext(PresenceContext),Tt=reactExports.useContext(MotionConfigContext).reducedMotion,Rt=reactExports.useRef(null);ot=ot||St.renderer,!Rt.current&&ot&&(Rt.current=ot(it,{visualState:g,parent:ft,props:et,presenceContext:kt,blockInitialAnimation:kt?kt.initial===!1:!1,reducedMotionConfig:Tt}));const jt=Rt.current,Ft=reactExports.useContext(SwitchLayoutGroupContext);jt&&!jt.projection&&ct&&(jt.type==="html"||jt.type==="svg")&&createProjectionNode(Rt.current,et,ct,Ft);const $t=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{jt&&$t.current&&jt.update(et,kt)});const zt=et[optimizedAppearDataAttribute],Ut=reactExports.useRef(!!zt&&!(!((ut=window.MotionHandoffIsComplete)===null||ut===void 0)&&ut.call(window,zt))&&((dt=window.MotionHasOptimisedAnimation)===null||dt===void 0?void 0:dt.call(window,zt)));return useIsomorphicLayoutEffect$1(()=>{jt&&($t.current=!0,window.MotionIsMounted=!0,jt.updateFeatures(),microtask.render(jt.render),Ut.current&&jt.animationState&&jt.animationState.animateChanges())}),reactExports.useEffect(()=>{jt&&(!Ut.current&&jt.animationState&&jt.animationState.animateChanges(),Ut.current&&(queueMicrotask(()=>{var Bt;(Bt=window.MotionHandoffMarkAsComplete)===null||Bt===void 0||Bt.call(window,zt)}),Ut.current=!1))}),jt}function createProjectionNode(it,g,et,ot){const{layoutId:ct,layout:ut,drag:dt,dragConstraints:ft,layoutScroll:St,layoutRoot:kt}=g;it.projection=new et(it.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(it.parent)),it.projection.setOptions({layoutId:ct,layout:ut,alwaysMeasureLayout:!!dt||ft&&isRefObject(ft),visualElement:it,animationType:typeof ut=="string"?ut:"both",initialPromotionConfig:ot,layoutScroll:St,layoutRoot:kt})}function getClosestProjectingNode(it){if(it)return it.options.allowProjection!==!1?it.projection:getClosestProjectingNode(it.parent)}function useMotionRef(it,g,et){return reactExports.useCallback(ot=>{ot&&it.mount&&it.mount(ot),g&&(ot?g.mount(ot):g.unmount()),et&&(typeof et=="function"?et(ot):isRefObject(et)&&(et.current=ot))},[g])}function isControllingVariants(it){return isAnimationControls(it.animate)||variantProps.some(g=>isVariantLabel(it[g]))}function isVariantNode(it){return!!(isControllingVariants(it)||it.variants)}function getCurrentTreeVariants(it,g){if(isControllingVariants(it)){const{initial:et,animate:ot}=it;return{initial:et===!1||isVariantLabel(et)?et:void 0,animate:isVariantLabel(ot)?ot:void 0}}return it.inherit!==!1?g:{}}function useCreateMotionContext(it){const{initial:g,animate:et}=getCurrentTreeVariants(it,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:et}),[variantLabelsAsDependency(g),variantLabelsAsDependency(et)])}function variantLabelsAsDependency(it){return Array.isArray(it)?it.join(" "):it}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const it in featureProps)featureDefinitions[it]={isEnabled:g=>featureProps[it].some(et=>!!g[et])};function loadFeatures(it){for(const g in it)featureDefinitions[g]={...featureDefinitions[g],...it[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:it,createVisualElement:g,useRender:et,useVisualState:ot,Component:ct}){it&&loadFeatures(it);function ut(ft,St){let kt;const Tt={...reactExports.useContext(MotionConfigContext),...ft,layoutId:useLayoutId(ft)},{isStatic:Rt}=Tt,jt=useCreateMotionContext(ft),Ft=ot(ft,Rt);if(!Rt&&isBrowser$1){useStrictMode();const $t=getProjectionFunctionality(Tt);kt=$t.MeasureLayout,jt.visualElement=useVisualElement(ct,Ft,Tt,g,$t.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:jt,children:[kt&&jt.visualElement?jsxRuntimeExports.jsx(kt,{visualElement:jt.visualElement,...Tt}):null,et(ct,ft,useMotionRef(Ft,jt.visualElement,St),Ft,Rt,jt.visualElement)]})}const dt=reactExports.forwardRef(ut);return dt[motionComponentSymbol]=ct,dt}function useLayoutId({layoutId:it}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&it!==void 0?g+"-"+it:it}function useStrictMode(it,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(it){const{drag:g,layout:et}=featureDefinitions;if(!g&&!et)return{};const ot={...g,...et};return{MeasureLayout:g!=null&&g.isEnabled(it)||et!=null&&et.isEnabled(it)?ot.MeasureLayout:void 0,ProjectionNode:ot.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(it){return typeof it!="string"||it.includes("-")?!1:!!(lowercaseSVGElements.indexOf(it)>-1||/[A-Z]/u.test(it))}function renderHTML(it,{style:g,vars:et},ot,ct){Object.assign(it.style,g,ct&&ct.getProjectionStyles(ot));for(const ut in et)it.style.setProperty(ut,et[ut])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(it,g,et,ot){renderHTML(it,g,void 0,ot);for(const ct in g.attrs)it.setAttribute(camelCaseAttributes.has(ct)?ct:camelToDash(ct),g.attrs[ct])}function isForcedMotionValue(it,{layout:g,layoutId:et}){return transformProps.has(it)||it.startsWith("origin")||(g||et!==void 0)&&(!!scaleCorrectors[it]||it==="opacity")}function scrapeMotionValuesFromProps$1(it,g,et){var ot;const{style:ct}=it,ut={};for(const dt in ct)(isMotionValue(ct[dt])||g.style&&isMotionValue(g.style[dt])||isForcedMotionValue(dt,it)||((ot=et==null?void 0:et.getValue(dt))===null||ot===void 0?void 0:ot.liveStyle)!==void 0)&&(ut[dt]=ct[dt]);return ut}function scrapeMotionValuesFromProps(it,g,et){const ot=scrapeMotionValuesFromProps$1(it,g,et);for(const ct in it)if(isMotionValue(it[ct])||isMotionValue(g[ct])){const ut=transformPropOrder.indexOf(ct)!==-1?"attr"+ct.charAt(0).toUpperCase()+ct.substring(1):ct;ot[ut]=it[ct]}return ot}function useConstant(it){const g=reactExports.useRef(null);return g.current===null&&(g.current=it()),g.current}function makeState$1({scrapeMotionValuesFromProps:it,createRenderState:g,onMount:et},ot,ct,ut){const dt={latestValues:makeLatestValues(ot,ct,ut,it),renderState:g()};return et&&(dt.mount=ft=>et(ot,ft,dt)),dt}const makeUseVisualState=it=>(g,et)=>{const ot=reactExports.useContext(MotionContext),ct=reactExports.useContext(PresenceContext),ut=()=>makeState$1(it,g,ot,ct);return et?ut():useConstant(ut)};function makeLatestValues(it,g,et,ot){const ct={},ut=ot(it,{});for(const jt in ut)ct[jt]=resolveMotionValue(ut[jt]);let{initial:dt,animate:ft}=it;const St=isControllingVariants(it),kt=isVariantNode(it);g&&kt&&!St&&it.inherit!==!1&&(dt===void 0&&(dt=g.initial),ft===void 0&&(ft=g.animate));let Tt=et?et.initial===!1:!1;Tt=Tt||dt===!1;const Rt=Tt?ft:dt;if(Rt&&typeof Rt!="boolean"&&!isAnimationControls(Rt)){const jt=Array.isArray(Rt)?Rt:[Rt];for(let Ft=0;Ft<jt.length;Ft++){const $t=resolveVariantFromProps(it,jt[Ft]);if($t){const{transitionEnd:zt,transition:Ut,...Bt}=$t;for(const Ht in Bt){let Jt=Bt[Ht];if(Array.isArray(Jt)){const Zt=Tt?Jt.length-1:0;Jt=Jt[Zt]}Jt!==null&&(ct[Ht]=Jt)}for(const Ht in zt)ct[Ht]=zt[Ht]}}}return ct}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(it,g)=>g&&typeof it=="number"?g.transform(it):it,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(it,g,et){let ot="",ct=!0;for(let ut=0;ut<numTransforms;ut++){const dt=transformPropOrder[ut],ft=it[dt];if(ft===void 0)continue;let St=!0;if(typeof ft=="number"?St=ft===(dt.startsWith("scale")?1:0):St=parseFloat(ft)===0,!St||et){const kt=getValueAsType(ft,numberValueTypes[dt]);if(!St){ct=!1;const Tt=translateAlias[dt]||dt;ot+=`${Tt}(${kt}) `}et&&(g[dt]=kt)}}return ot=ot.trim(),et?ot=et(g,ct?"":ot):ct&&(ot="none"),ot}function buildHTMLStyles(it,g,et){const{style:ot,vars:ct,transformOrigin:ut}=it;let dt=!1,ft=!1;for(const St in g){const kt=g[St];if(transformProps.has(St)){dt=!0;continue}else if(isCSSVariableName(St)){ct[St]=kt;continue}else{const Tt=getValueAsType(kt,numberValueTypes[St]);St.startsWith("origin")?(ft=!0,ut[St]=Tt):ot[St]=Tt}}if(g.transform||(dt||et?ot.transform=buildTransform(g,it.transform,et):ot.transform&&(ot.transform="none")),ft){const{originX:St="50%",originY:kt="50%",originZ:Tt=0}=ut;ot.transformOrigin=`${St} ${kt} ${Tt}`}}function calcOrigin(it,g,et){return typeof it=="string"?it:px.transform(g+et*it)}function calcSVGTransformOrigin(it,g,et){const ot=calcOrigin(g,it.x,it.width),ct=calcOrigin(et,it.y,it.height);return`${ot} ${ct}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(it,g,et=1,ot=0,ct=!0){it.pathLength=1;const ut=ct?dashKeys:camelKeys;it[ut.offset]=px.transform(-ot);const dt=px.transform(g),ft=px.transform(et);it[ut.array]=`${dt} ${ft}`}function buildSVGAttrs(it,{attrX:g,attrY:et,attrScale:ot,originX:ct,originY:ut,pathLength:dt,pathSpacing:ft=1,pathOffset:St=0,...kt},Tt,Rt){if(buildHTMLStyles(it,kt,Rt),Tt){it.style.viewBox&&(it.attrs.viewBox=it.style.viewBox);return}it.attrs=it.style,it.style={};const{attrs:jt,style:Ft,dimensions:$t}=it;jt.transform&&($t&&(Ft.transform=jt.transform),delete jt.transform),$t&&(ct!==void 0||ut!==void 0||Ft.transform)&&(Ft.transformOrigin=calcSVGTransformOrigin($t,ct!==void 0?ct:.5,ut!==void 0?ut:.5)),g!==void 0&&(jt.x=g),et!==void 0&&(jt.y=et),ot!==void 0&&(jt.scale=ot),dt!==void 0&&buildSVGPath(jt,dt,ft,St,!1)}const isSVGTag=it=>typeof it=="string"&&it.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(it,g,{renderState:et,latestValues:ot})=>{frame.read(()=>{try{et.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{et.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(et,ot,isSVGTag(g.tagName),it.transformTemplate),renderSVG(g,et)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(it,g,et){for(const ot in g)!isMotionValue(g[ot])&&!isForcedMotionValue(ot,et)&&(it[ot]=g[ot])}function useInitialMotionValues({transformTemplate:it},g){return reactExports.useMemo(()=>{const et=createHtmlRenderState();return buildHTMLStyles(et,g,it),Object.assign({},et.vars,et.style)},[g])}function useStyle(it,g){const et=it.style||{},ot={};return copyRawValuesOnly(ot,et,it),Object.assign(ot,useInitialMotionValues(it,g)),ot}function useHTMLProps(it,g){const et={},ot=useStyle(it,g);return it.drag&&it.dragListener!==!1&&(et.draggable=!1,ot.userSelect=ot.WebkitUserSelect=ot.WebkitTouchCallout="none",ot.touchAction=it.drag===!0?"none":`pan-${it.drag==="x"?"y":"x"}`),it.tabIndex===void 0&&(it.onTap||it.onTapStart||it.whileTap)&&(et.tabIndex=0),et.style=ot,et}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(it){return it.startsWith("while")||it.startsWith("drag")&&it!=="draggable"||it.startsWith("layout")||it.startsWith("onTap")||it.startsWith("onPan")||it.startsWith("onLayout")||validMotionProps.has(it)}let shouldForward=it=>!isValidMotionProp(it);function loadExternalIsValidProp(it){it&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):it(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(it,g,et){const ot={};for(const ct in it)ct==="values"&&typeof it.values=="object"||(shouldForward(ct)||et===!0&&isValidMotionProp(ct)||!g&&!isValidMotionProp(ct)||it.draggable&&ct.startsWith("onDrag"))&&(ot[ct]=it[ct]);return ot}function useSVGProps(it,g,et,ot){const ct=reactExports.useMemo(()=>{const ut=createSvgRenderState();return buildSVGAttrs(ut,g,isSVGTag(ot),it.transformTemplate),{...ut.attrs,style:{...ut.style}}},[g]);if(it.style){const ut={};copyRawValuesOnly(ut,it.style,it),ct.style={...ut,...ct.style}}return ct}function createUseRender(it=!1){return(et,ot,ct,{latestValues:ut},dt)=>{const St=(isSVGComponent(et)?useSVGProps:useHTMLProps)(ot,ut,dt,et),kt=filterProps(ot,typeof et=="string",it),Tt=et!==reactExports.Fragment?{...kt,...St,ref:ct}:{},{children:Rt}=ot,jt=reactExports.useMemo(()=>isMotionValue(Rt)?Rt.get():Rt,[Rt]);return reactExports.createElement(et,{...Tt,children:jt})}}function createMotionComponentFactory(it,g){return function(ot,{forwardMotionProps:ct}={forwardMotionProps:!1}){const dt={...isSVGComponent(ot)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:it,useRender:createUseRender(ct),createVisualElement:g,Component:ot};return createRendererMotionComponent(dt)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const it=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=it.matches;it.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(it,g,et){for(const ot in g){const ct=g[ot],ut=et[ot];if(isMotionValue(ct))it.addValue(ot,ct);else if(isMotionValue(ut))it.addValue(ot,motionValue(ct,{owner:it}));else if(ut!==ct)if(it.hasValue(ot)){const dt=it.getValue(ot);dt.liveStyle===!0?dt.jump(ct):dt.hasAnimated||dt.set(ct)}else{const dt=it.getStaticValue(ot);it.addValue(ot,motionValue(dt!==void 0?dt:ct,{owner:it}))}}for(const ot in et)g[ot]===void 0&&it.removeValue(ot);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=it=>valueTypes.find(testValueType(it)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,et,ot){return{}}constructor({parent:g,props:et,presenceContext:ot,reducedMotionConfig:ct,blockInitialAnimation:ut,visualState:dt},ft={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const jt=time.now();this.renderScheduledAt<jt&&(this.renderScheduledAt=jt,frame.render(this.render,!1,!0))};const{latestValues:St,renderState:kt}=dt;this.latestValues=St,this.baseTarget={...St},this.initialValues=et.initial?{...St}:{},this.renderState=kt,this.parent=g,this.props=et,this.presenceContext=ot,this.depth=g?g.depth+1:0,this.reducedMotionConfig=ct,this.options=ft,this.blockInitialAnimation=!!ut,this.isControllingVariants=isControllingVariants(et),this.isVariantNode=isVariantNode(et),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:Tt,...Rt}=this.scrapeMotionValuesFromProps(et,{},this);for(const jt in Rt){const Ft=Rt[jt];St[jt]!==void 0&&isMotionValue(Ft)&&Ft.set(St[jt],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((et,ot)=>this.bindToMotionValue(ot,et)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const et=this.features[g];et&&(et.unmount(),et.isMounted=!1)}this.current=null}bindToMotionValue(g,et){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const ot=transformProps.has(g),ct=et.on("change",ft=>{this.latestValues[g]=ft,this.props.onUpdate&&frame.preRender(this.notifyUpdate),ot&&this.projection&&(this.projection.isTransformDirty=!0)}),ut=et.on("renderRequest",this.scheduleRender);let dt;window.MotionCheckAppearSync&&(dt=window.MotionCheckAppearSync(this,g,et)),this.valueSubscriptions.set(g,()=>{ct(),ut(),dt&&dt(),et.owner&&et.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const et=featureDefinitions[g];if(!et)continue;const{isEnabled:ot,Feature:ct}=et;if(!this.features[g]&&ct&&ot(this.props)&&(this.features[g]=new ct(this)),this.features[g]){const ut=this.features[g];ut.isMounted?ut.update():(ut.mount(),ut.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,et){this.latestValues[g]=et}update(g,et){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=et;for(let ot=0;ot<propEventHandlers.length;ot++){const ct=propEventHandlers[ot];this.propEventSubscriptions[ct]&&(this.propEventSubscriptions[ct](),delete this.propEventSubscriptions[ct]);const ut="on"+ct,dt=g[ut];dt&&(this.propEventSubscriptions[ct]=this.on(ct,dt))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const et=this.getClosestVariantNode();if(et)return et.variantChildren&&et.variantChildren.add(g),()=>et.variantChildren.delete(g)}addValue(g,et){const ot=this.values.get(g);et!==ot&&(ot&&this.removeValue(g),this.bindToMotionValue(g,et),this.values.set(g,et),this.latestValues[g]=et.get())}removeValue(g){this.values.delete(g);const et=this.valueSubscriptions.get(g);et&&(et(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,et){if(this.props.values&&this.props.values[g])return this.props.values[g];let ot=this.values.get(g);return ot===void 0&&et!==void 0&&(ot=motionValue(et===null?void 0:et,{owner:this}),this.addValue(g,ot)),ot}readValue(g,et){var ot;let ct=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(ot=this.getBaseTargetFromProps(this.props,g))!==null&&ot!==void 0?ot:this.readValueFromInstance(this.current,g,this.options);return ct!=null&&(typeof ct=="string"&&(isNumericalString(ct)||isZeroValueString(ct))?ct=parseFloat(ct):!findValueType(ct)&&complex.test(et)&&(ct=getAnimatableNone(g,et)),this.setBaseTarget(g,isMotionValue(ct)?ct.get():ct)),isMotionValue(ct)?ct.get():ct}setBaseTarget(g,et){this.baseTarget[g]=et}getBaseTarget(g){var et;const{initial:ot}=this.props;let ct;if(typeof ot=="string"||typeof ot=="object"){const dt=resolveVariantFromProps(this.props,ot,(et=this.presenceContext)===null||et===void 0?void 0:et.custom);dt&&(ct=dt[g])}if(ot&&ct!==void 0)return ct;const ut=this.getBaseTargetFromProps(this.props,g);return ut!==void 0&&!isMotionValue(ut)?ut:this.initialValues[g]!==void 0&&ct===void 0?void 0:this.baseTarget[g]}on(g,et){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(et)}notify(g,...et){this.events[g]&&this.events[g].notify(...et)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,et){return g.compareDocumentPosition(et)&2?1:-1}getBaseTargetFromProps(g,et){return g.style?g.style[et]:void 0}removeValueFromRenderState(g,{vars:et,style:ot}){delete et[g],delete ot[g]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",et=>{this.current&&(this.current.textContent=`${et}`)}))}}function getComputedStyle$1(it){return window.getComputedStyle(it)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}else{const ot=getComputedStyle$1(g),ct=(isCSSVariableName(et)?ot.getPropertyValue(et):ot[et])||0;return typeof ct=="string"?ct.trim():ct}}measureInstanceViewportBox(g,{transformPagePoint:et}){return measureViewportBox(g,et)}build(g,et,ot){buildHTMLStyles(g,et,ot.transformTemplate)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps$1(g,et,ot)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,et){return g[et]}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}return et=camelCaseAttributes.has(et)?et:camelToDash(et),g.getAttribute(et)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps(g,et,ot)}build(g,et,ot){buildSVGAttrs(g,et,this.isSVGTag,ot.transformTemplate)}renderInstance(g,et,ot,ct){renderSVG(g,et,ot,ct)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(it,g)=>isSVGComponent(it)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:it!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const et=this.props.childRef.current;if(et&&g.isPresent&&!this.props.isPresent){const ot=this.props.sizeRef.current;ot.height=et.offsetHeight||0,ot.width=et.offsetWidth||0,ot.top=et.offsetTop,ot.left=et.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:it,isPresent:g}){const et=reactExports.useId(),ot=reactExports.useRef(null),ct=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:ut}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:dt,height:ft,top:St,left:kt}=ct.current;if(g||!ot.current||!dt||!ft)return;ot.current.dataset.motionPopId=et;const Tt=document.createElement("style");return ut&&(Tt.nonce=ut),document.head.appendChild(Tt),Tt.sheet&&Tt.sheet.insertRule(`
          [data-motion-pop-id="${et}"] {
            position: absolute !important;
            width: ${dt}px !important;
            height: ${ft}px !important;
            top: ${St}px !important;
            left: ${kt}px !important;
          }
        `),()=>{document.head.removeChild(Tt)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:ot,sizeRef:ct,children:reactExports.cloneElement(it,{ref:ot})})}const PresenceChild=({children:it,initial:g,isPresent:et,onExitComplete:ot,custom:ct,presenceAffectsLayout:ut,mode:dt})=>{const ft=useConstant(newChildrenMap),St=reactExports.useId(),kt=reactExports.useCallback(Rt=>{ft.set(Rt,!0);for(const jt of ft.values())if(!jt)return;ot&&ot()},[ft,ot]),Tt=reactExports.useMemo(()=>({id:St,initial:g,isPresent:et,custom:ct,onExitComplete:kt,register:Rt=>(ft.set(Rt,!1),()=>ft.delete(Rt))}),ut?[Math.random(),kt]:[et,kt]);return reactExports.useMemo(()=>{ft.forEach((Rt,jt)=>ft.set(jt,!1))},[et]),reactExports.useEffect(()=>{!et&&!ft.size&&ot&&ot()},[et]),dt==="popLayout"&&(it=jsxRuntimeExports.jsx(PopChild,{isPresent:et,children:it})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Tt,children:it})};function newChildrenMap(){return new Map}const getChildKey=it=>it.key||"";function onlyElements(it){const g=[];return reactExports.Children.forEach(it,et=>{reactExports.isValidElement(et)&&g.push(et)}),g}const AnimatePresence=({children:it,exitBeforeEnter:g,custom:et,initial:ot=!0,onExitComplete:ct,presenceAffectsLayout:ut=!0,mode:dt="sync"})=>{const ft=reactExports.useMemo(()=>onlyElements(it),[it]),St=ft.map(getChildKey),kt=reactExports.useRef(!0),Tt=reactExports.useRef(ft),Rt=useConstant(()=>new Map),[jt,Ft]=reactExports.useState(ft),[$t,zt]=reactExports.useState(ft);useIsomorphicLayoutEffect$1(()=>{kt.current=!1,Tt.current=ft;for(let Ht=0;Ht<$t.length;Ht++){const Jt=getChildKey($t[Ht]);St.includes(Jt)?Rt.delete(Jt):Rt.get(Jt)!==!0&&Rt.set(Jt,!1)}},[$t,St.length,St.join("-")]);const Ut=[];if(ft!==jt){let Ht=[...ft];for(let Jt=0;Jt<$t.length;Jt++){const Zt=$t[Jt],tn=getChildKey(Zt);St.includes(tn)||(Ht.splice(Jt,0,Zt),Ut.push(Zt))}dt==="wait"&&Ut.length&&(Ht=Ut),zt(onlyElements(Ht)),Ft(ft);return}const{forceRender:Bt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$t.map(Ht=>{const Jt=getChildKey(Ht),Zt=ft===$t||St.includes(Jt),tn=()=>{if(Rt.has(Jt))Rt.set(Jt,!0);else return;let nn=!0;Rt.forEach(rn=>{rn||(nn=!1)}),nn&&(Bt==null||Bt(),zt(Tt.current),ct&&ct())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Zt,initial:!kt.current||ot?void 0:!1,custom:Zt?void 0:et,presenceAffectsLayout:ut,mode:dt,onExitComplete:Zt?void 0:tn,children:Ht},Jt)})})};function useMotionValue(it){const g=useConstant(()=>motionValue(it)),{isStatic:et}=reactExports.useContext(MotionConfigContext);if(et){const[,ot]=reactExports.useState(it);reactExports.useEffect(()=>g.on("change",ot),[])}return g}function toNumber(it){return typeof it=="number"?it:parseFloat(it)}function useSpring(it,g={}){const{isStatic:et}=reactExports.useContext(MotionConfigContext),ot=reactExports.useRef(null),ct=useMotionValue(isMotionValue(it)?toNumber(it.get()):it),ut=reactExports.useRef(ct.get()),dt=reactExports.useRef(()=>{}),ft=()=>{const kt=ot.current;kt&&kt.time===0&&kt.sample(frameData.delta),St(),ot.current=animateValue({keyframes:[ct.get(),ut.current],velocity:ct.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:dt.current})},St=()=>{ot.current&&ot.current.stop()};return reactExports.useInsertionEffect(()=>ct.attach((kt,Tt)=>et?Tt(kt):(ut.current=kt,dt.current=Tt,frame.update(ft),ct.get()),St),[JSON.stringify(g)]),useIsomorphicLayoutEffect$1(()=>{if(isMotionValue(it))return it.on("change",kt=>ct.set(toNumber(kt)))},[ct]),ct}function bind$1(it,g){return function(){return it.apply(g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(it=>g=>{const et=toString.call(g);return it[et]||(it[et]=et.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=it=>(it=it.toLowerCase(),g=>kindOf(g)===it),typeOfTest=it=>g=>typeof g===it,{isArray:isArray$4}=Array,isUndefined=typeOfTest("undefined");function isBuffer$3(it){return it!==null&&!isUndefined(it)&&it.constructor!==null&&!isUndefined(it.constructor)&&isFunction$4(it.constructor.isBuffer)&&it.constructor.isBuffer(it)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(it){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(it):g=it&&it.buffer&&isArrayBuffer$1(it.buffer),g}const isString$1=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=it=>it!==null&&typeof it=="object",isBoolean=it=>it===!0||it===!1,isPlainObject$1=it=>{if(kindOf(it)!=="object")return!1;const g=getPrototypeOf(it);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in it)&&!(Symbol.iterator in it)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=it=>isObject$3(it)&&isFunction$4(it.pipe),isFormData=it=>{let g;return it&&(typeof FormData=="function"&&it instanceof FormData||isFunction$4(it.append)&&((g=kindOf(it))==="formdata"||g==="object"&&isFunction$4(it.toString)&&it.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=it=>it.trim?it.trim():it.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(it,g,{allOwnKeys:et=!1}={}){if(it===null||typeof it>"u")return;let ot,ct;if(typeof it!="object"&&(it=[it]),isArray$4(it))for(ot=0,ct=it.length;ot<ct;ot++)g.call(null,it[ot],ot,it);else{const ut=et?Object.getOwnPropertyNames(it):Object.keys(it),dt=ut.length;let ft;for(ot=0;ot<dt;ot++)ft=ut[ot],g.call(null,it[ft],ft,it)}}function findKey(it,g){g=g.toLowerCase();const et=Object.keys(it);let ot=et.length,ct;for(;ot-- >0;)if(ct=et[ot],g===ct.toLowerCase())return ct;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=it=>!isUndefined(it)&&it!==_global;function merge(){const{caseless:it}=isContextDefined(this)&&this||{},g={},et=(ot,ct)=>{const ut=it&&findKey(g,ct)||ct;isPlainObject$1(g[ut])&&isPlainObject$1(ot)?g[ut]=merge(g[ut],ot):isPlainObject$1(ot)?g[ut]=merge({},ot):isArray$4(ot)?g[ut]=ot.slice():g[ut]=ot};for(let ot=0,ct=arguments.length;ot<ct;ot++)arguments[ot]&&forEach$1(arguments[ot],et);return g}const extend=(it,g,et,{allOwnKeys:ot}={})=>(forEach$1(g,(ct,ut)=>{et&&isFunction$4(ct)?it[ut]=bind$1(ct,et):it[ut]=ct},{allOwnKeys:ot}),it),stripBOM=it=>(it.charCodeAt(0)===65279&&(it=it.slice(1)),it),inherits=(it,g,et,ot)=>{it.prototype=Object.create(g.prototype,ot),it.prototype.constructor=it,Object.defineProperty(it,"super",{value:g.prototype}),et&&Object.assign(it.prototype,et)},toFlatObject=(it,g,et,ot)=>{let ct,ut,dt;const ft={};if(g=g||{},it==null)return g;do{for(ct=Object.getOwnPropertyNames(it),ut=ct.length;ut-- >0;)dt=ct[ut],(!ot||ot(dt,it,g))&&!ft[dt]&&(g[dt]=it[dt],ft[dt]=!0);it=et!==!1&&getPrototypeOf(it)}while(it&&(!et||et(it,g))&&it!==Object.prototype);return g},endsWith=(it,g,et)=>{it=String(it),(et===void 0||et>it.length)&&(et=it.length),et-=g.length;const ot=it.indexOf(g,et);return ot!==-1&&ot===et},toArray=it=>{if(!it)return null;if(isArray$4(it))return it;let g=it.length;if(!isNumber$1(g))return null;const et=new Array(g);for(;g-- >0;)et[g]=it[g];return et},isTypedArray$3=(it=>g=>it&&g instanceof it)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(it,g)=>{const ot=(it&&it[Symbol.iterator]).call(it);let ct;for(;(ct=ot.next())&&!ct.done;){const ut=ct.value;g.call(it,ut[0],ut[1])}},matchAll=(it,g)=>{let et;const ot=[];for(;(et=it.exec(g))!==null;)ot.push(et);return ot},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=it=>it.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(et,ot,ct){return ot.toUpperCase()+ct}),hasOwnProperty$9=(({hasOwnProperty:it})=>(g,et)=>it.call(g,et))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(it,g)=>{const et=Object.getOwnPropertyDescriptors(it),ot={};forEach$1(et,(ct,ut)=>{let dt;(dt=g(ct,ut,it))!==!1&&(ot[ut]=dt||ct)}),Object.defineProperties(it,ot)},freezeMethods=it=>{reduceDescriptors(it,(g,et)=>{if(isFunction$4(it)&&["arguments","caller","callee"].indexOf(et)!==-1)return!1;const ot=it[et];if(isFunction$4(ot)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+et+"'")})}})},toObjectSet=(it,g)=>{const et={},ot=ct=>{ct.forEach(ut=>{et[ut]=!0})};return isArray$4(it)?ot(it):ot(String(it).split(g)),et},noop$1=()=>{},toFiniteNumber=(it,g)=>it!=null&&Number.isFinite(it=+it)?it:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(it=16,g=ALPHABET.ALPHA_DIGIT)=>{let et="";const{length:ot}=g;for(;it--;)et+=g[Math.random()*ot|0];return et};function isSpecCompliantForm(it){return!!(it&&isFunction$4(it.append)&&it[Symbol.toStringTag]==="FormData"&&it[Symbol.iterator])}const toJSONObject=it=>{const g=new Array(10),et=(ot,ct)=>{if(isObject$3(ot)){if(g.indexOf(ot)>=0)return;if(!("toJSON"in ot)){g[ct]=ot;const ut=isArray$4(ot)?[]:{};return forEach$1(ot,(dt,ft)=>{const St=et(dt,ct+1);!isUndefined(St)&&(ut[ft]=St)}),g[ct]=void 0,ut}}return ot};return et(it,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=it=>it&&(isObject$3(it)||isFunction$4(it))&&isFunction$4(it.then)&&isFunction$4(it.catch),_setImmediate=((it,g)=>it?setImmediate:g?((et,ot)=>(_global.addEventListener("message",({source:ct,data:ut})=>{ct===_global&&ut===et&&ot.length&&ot.shift()()},!1),ct=>{ot.push(ct),_global.postMessage(et,"*")}))(`axios@${Math.random()}`,[]):et=>setTimeout(et))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$4,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(it,g,et,ot,ct){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=it,this.name="AxiosError",g&&(this.code=g),et&&(this.config=et),ot&&(this.request=ot),ct&&(this.response=ct,this.status=ct.status?ct.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(it=>{descriptors[it]={value:it}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(it,g,et,ot,ct,ut)=>{const dt=Object.create(prototype$1);return utils$1.toFlatObject(it,dt,function(St){return St!==Error.prototype},ft=>ft!=="isAxiosError"),AxiosError.call(dt,it.message,g,et,ot,ct),dt.cause=it,dt.name=it.name,ut&&Object.assign(dt,ut),dt};const httpAdapter=null;function isVisitable(it){return utils$1.isPlainObject(it)||utils$1.isArray(it)}function removeBrackets(it){return utils$1.endsWith(it,"[]")?it.slice(0,-2):it}function renderKey(it,g,et){return it?it.concat(g).map(function(ct,ut){return ct=removeBrackets(ct),!et&&ut?"["+ct+"]":ct}).join(et?".":""):g}function isFlatArray(it){return utils$1.isArray(it)&&!it.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(it,g,et){if(!utils$1.isObject(it))throw new TypeError("target must be an object");g=g||new FormData,et=utils$1.toFlatObject(et,{metaTokens:!0,dots:!1,indexes:!1},!1,function(zt,Ut){return!utils$1.isUndefined(Ut[zt])});const ot=et.metaTokens,ct=et.visitor||Tt,ut=et.dots,dt=et.indexes,St=(et.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(g);if(!utils$1.isFunction(ct))throw new TypeError("visitor must be a function");function kt($t){if($t===null)return"";if(utils$1.isDate($t))return $t.toISOString();if(!St&&utils$1.isBlob($t))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer($t)||utils$1.isTypedArray($t)?St&&typeof Blob=="function"?new Blob([$t]):Buffer.from($t):$t}function Tt($t,zt,Ut){let Bt=$t;if($t&&!Ut&&typeof $t=="object"){if(utils$1.endsWith(zt,"{}"))zt=ot?zt:zt.slice(0,-2),$t=JSON.stringify($t);else if(utils$1.isArray($t)&&isFlatArray($t)||(utils$1.isFileList($t)||utils$1.endsWith(zt,"[]"))&&(Bt=utils$1.toArray($t)))return zt=removeBrackets(zt),Bt.forEach(function(Jt,Zt){!(utils$1.isUndefined(Jt)||Jt===null)&&g.append(dt===!0?renderKey([zt],Zt,ut):dt===null?zt:zt+"[]",kt(Jt))}),!1}return isVisitable($t)?!0:(g.append(renderKey(Ut,zt,ut),kt($t)),!1)}const Rt=[],jt=Object.assign(predicates,{defaultVisitor:Tt,convertValue:kt,isVisitable});function Ft($t,zt){if(!utils$1.isUndefined($t)){if(Rt.indexOf($t)!==-1)throw Error("Circular reference detected in "+zt.join("."));Rt.push($t),utils$1.forEach($t,function(Bt,Ht){(!(utils$1.isUndefined(Bt)||Bt===null)&&ct.call(g,Bt,utils$1.isString(Ht)?Ht.trim():Ht,zt,jt))===!0&&Ft(Bt,zt?zt.concat(Ht):[Ht])}),Rt.pop()}}if(!utils$1.isObject(it))throw new TypeError("data must be an object");return Ft(it),g}function encode$1(it){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(it).replace(/[!'()~]|%20|%00/g,function(ot){return g[ot]})}function AxiosURLSearchParams(it,g){this._pairs=[],it&&toFormData(it,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,et){this._pairs.push([g,et])};prototype.toString=function(g){const et=g?function(ot){return g.call(this,ot,encode$1)}:encode$1;return this._pairs.map(function(ct){return et(ct[0])+"="+et(ct[1])},"").join("&")};function encode(it){return encodeURIComponent(it).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(it,g,et){if(!g)return it;const ot=et&&et.encode||encode;utils$1.isFunction(et)&&(et={serialize:et});const ct=et&&et.serialize;let ut;if(ct?ut=ct(g,et):ut=utils$1.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,et).toString(ot),ut){const dt=it.indexOf("#");dt!==-1&&(it=it.slice(0,dt)),it+=(it.indexOf("?")===-1?"?":"&")+ut}return it}class InterceptorManager{constructor(){this.handlers=[]}use(g,et,ot){return this.handlers.push({fulfilled:g,rejected:et,synchronous:ot?ot.synchronous:!1,runWhen:ot?ot.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$1.forEach(this.handlers,function(ot){ot!==null&&g(ot)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(it,g){return toFormData(it,new platform.classes.URLSearchParams,Object.assign({visitor:function(et,ot,ct,ut){return platform.isNode&&utils$1.isBuffer(et)?(this.append(ot,et.toString("base64")),!1):ut.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(it){return utils$1.matchAll(/\w+|\[(\w*)]/g,it).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(it){const g={},et=Object.keys(it);let ot;const ct=et.length;let ut;for(ot=0;ot<ct;ot++)ut=et[ot],g[ut]=it[ut];return g}function formDataToJSON(it){function g(et,ot,ct,ut){let dt=et[ut++];if(dt==="__proto__")return!0;const ft=Number.isFinite(+dt),St=ut>=et.length;return dt=!dt&&utils$1.isArray(ct)?ct.length:dt,St?(utils$1.hasOwnProp(ct,dt)?ct[dt]=[ct[dt],ot]:ct[dt]=ot,!ft):((!ct[dt]||!utils$1.isObject(ct[dt]))&&(ct[dt]=[]),g(et,ot,ct[dt],ut)&&utils$1.isArray(ct[dt])&&(ct[dt]=arrayToObject(ct[dt])),!ft)}if(utils$1.isFormData(it)&&utils$1.isFunction(it.entries)){const et={};return utils$1.forEachEntry(it,(ot,ct)=>{g(parsePropPath(ot),ct,et,0)}),et}return null}function stringifySafely(it,g,et){if(utils$1.isString(it))try{return(g||JSON.parse)(it),utils$1.trim(it)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(et||JSON.stringify)(it)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,et){const ot=et.getContentType()||"",ct=ot.indexOf("application/json")>-1,ut=utils$1.isObject(g);if(ut&&utils$1.isHTMLForm(g)&&(g=new FormData(g)),utils$1.isFormData(g))return ct?JSON.stringify(formDataToJSON(g)):g;if(utils$1.isArrayBuffer(g)||utils$1.isBuffer(g)||utils$1.isStream(g)||utils$1.isFile(g)||utils$1.isBlob(g)||utils$1.isReadableStream(g))return g;if(utils$1.isArrayBufferView(g))return g.buffer;if(utils$1.isURLSearchParams(g))return et.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let ft;if(ut){if(ot.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((ft=utils$1.isFileList(g))||ot.indexOf("multipart/form-data")>-1){const St=this.env&&this.env.FormData;return toFormData(ft?{"files[]":g}:g,St&&new St,this.formSerializer)}}return ut||ct?(et.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const et=this.transitional||defaults$1.transitional,ot=et&&et.forcedJSONParsing,ct=this.responseType==="json";if(utils$1.isResponse(g)||utils$1.isReadableStream(g))return g;if(g&&utils$1.isString(g)&&(ot&&!this.responseType||ct)){const dt=!(et&&et.silentJSONParsing)&&ct;try{return JSON.parse(g)}catch(ft){if(dt)throw ft.name==="SyntaxError"?AxiosError.from(ft,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):ft}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],it=>{defaults$1.headers[it]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=it=>{const g={};let et,ot,ct;return it&&it.split(`
`).forEach(function(dt){ct=dt.indexOf(":"),et=dt.substring(0,ct).trim().toLowerCase(),ot=dt.substring(ct+1).trim(),!(!et||g[et]&&ignoreDuplicateOf[et])&&(et==="set-cookie"?g[et]?g[et].push(ot):g[et]=[ot]:g[et]=g[et]?g[et]+", "+ot:ot)}),g},$internals=Symbol("internals");function normalizeHeader(it){return it&&String(it).trim().toLowerCase()}function normalizeValue(it){return it===!1||it==null?it:utils$1.isArray(it)?it.map(normalizeValue):String(it)}function parseTokens(it){const g=Object.create(null),et=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ot;for(;ot=et.exec(it);)g[ot[1]]=ot[2];return g}const isValidHeaderName=it=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(it.trim());function matchHeaderValue(it,g,et,ot,ct){if(utils$1.isFunction(ot))return ot.call(this,g,et);if(ct&&(g=et),!!utils$1.isString(g)){if(utils$1.isString(ot))return g.indexOf(ot)!==-1;if(utils$1.isRegExp(ot))return ot.test(g)}}function formatHeader(it){return it.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,et,ot)=>et.toUpperCase()+ot)}function buildAccessors(it,g){const et=utils$1.toCamelCase(" "+g);["get","set","has"].forEach(ot=>{Object.defineProperty(it,ot+et,{value:function(ct,ut,dt){return this[ot].call(this,g,ct,ut,dt)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,et,ot){const ct=this;function ut(ft,St,kt){const Tt=normalizeHeader(St);if(!Tt)throw new Error("header name must be a non-empty string");const Rt=utils$1.findKey(ct,Tt);(!Rt||ct[Rt]===void 0||kt===!0||kt===void 0&&ct[Rt]!==!1)&&(ct[Rt||St]=normalizeValue(ft))}const dt=(ft,St)=>utils$1.forEach(ft,(kt,Tt)=>ut(kt,Tt,St));if(utils$1.isPlainObject(g)||g instanceof this.constructor)dt(g,et);else if(utils$1.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))dt(parseHeaders(g),et);else if(utils$1.isHeaders(g))for(const[ft,St]of g.entries())ut(St,ft,ot);else g!=null&&ut(et,g,ot);return this}get(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);if(ot){const ct=this[ot];if(!et)return ct;if(et===!0)return parseTokens(ct);if(utils$1.isFunction(et))return et.call(this,ct,ot);if(utils$1.isRegExp(et))return et.exec(ct);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);return!!(ot&&this[ot]!==void 0&&(!et||matchHeaderValue(this,this[ot],ot,et)))}return!1}delete(g,et){const ot=this;let ct=!1;function ut(dt){if(dt=normalizeHeader(dt),dt){const ft=utils$1.findKey(ot,dt);ft&&(!et||matchHeaderValue(ot,ot[ft],ft,et))&&(delete ot[ft],ct=!0)}}return utils$1.isArray(g)?g.forEach(ut):ut(g),ct}clear(g){const et=Object.keys(this);let ot=et.length,ct=!1;for(;ot--;){const ut=et[ot];(!g||matchHeaderValue(this,this[ut],ut,g,!0))&&(delete this[ut],ct=!0)}return ct}normalize(g){const et=this,ot={};return utils$1.forEach(this,(ct,ut)=>{const dt=utils$1.findKey(ot,ut);if(dt){et[dt]=normalizeValue(ct),delete et[ut];return}const ft=g?formatHeader(ut):String(ut).trim();ft!==ut&&delete et[ut],et[ft]=normalizeValue(ct),ot[ft]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const et=Object.create(null);return utils$1.forEach(this,(ot,ct)=>{ot!=null&&ot!==!1&&(et[ct]=g&&utils$1.isArray(ot)?ot.join(", "):ot)}),et}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,et])=>g+": "+et).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...et){const ot=new this(g);return et.forEach(ct=>ot.set(ct)),ot}static accessor(g){const ot=(this[$internals]=this[$internals]={accessors:{}}).accessors,ct=this.prototype;function ut(dt){const ft=normalizeHeader(dt);ot[ft]||(buildAccessors(ct,dt),ot[ft]=!0)}return utils$1.isArray(g)?g.forEach(ut):ut(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:it},g)=>{let et=g[0].toUpperCase()+g.slice(1);return{get:()=>it,set(ot){this[et]=ot}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(it,g){const et=this||defaults$2,ot=g||et,ct=AxiosHeaders$1.from(ot.headers);let ut=ot.data;return utils$1.forEach(it,function(ft){ut=ft.call(et,ut,ct.normalize(),g?g.status:void 0)}),ct.normalize(),ut}function isCancel(it){return!!(it&&it.__CANCEL__)}function CanceledError(it,g,et){AxiosError.call(this,it??"canceled",AxiosError.ERR_CANCELED,g,et),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(it,g,et){const ot=et.config.validateStatus;!et.status||!ot||ot(et.status)?it(et):g(new AxiosError("Request failed with status code "+et.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(et.status/100)-4],et.config,et.request,et))}function parseProtocol(it){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(it);return g&&g[1]||""}function speedometer(it,g){it=it||10;const et=new Array(it),ot=new Array(it);let ct=0,ut=0,dt;return g=g!==void 0?g:1e3,function(St){const kt=Date.now(),Tt=ot[ut];dt||(dt=kt),et[ct]=St,ot[ct]=kt;let Rt=ut,jt=0;for(;Rt!==ct;)jt+=et[Rt++],Rt=Rt%it;if(ct=(ct+1)%it,ct===ut&&(ut=(ut+1)%it),kt-dt<g)return;const Ft=Tt&&kt-Tt;return Ft?Math.round(jt*1e3/Ft):void 0}}function throttle(it,g){let et=0,ot=1e3/g,ct,ut;const dt=(kt,Tt=Date.now())=>{et=Tt,ct=null,ut&&(clearTimeout(ut),ut=null),it.apply(null,kt)};return[(...kt)=>{const Tt=Date.now(),Rt=Tt-et;Rt>=ot?dt(kt,Tt):(ct=kt,ut||(ut=setTimeout(()=>{ut=null,dt(ct)},ot-Rt)))},()=>ct&&dt(ct)]}const progressEventReducer=(it,g,et=3)=>{let ot=0;const ct=speedometer(50,250);return throttle(ut=>{const dt=ut.loaded,ft=ut.lengthComputable?ut.total:void 0,St=dt-ot,kt=ct(St),Tt=dt<=ft;ot=dt;const Rt={loaded:dt,total:ft,progress:ft?dt/ft:void 0,bytes:St,rate:kt||void 0,estimated:kt&&ft&&Tt?(ft-dt)/kt:void 0,event:ut,lengthComputable:ft!=null,[g?"download":"upload"]:!0};it(Rt)},et)},progressEventDecorator=(it,g)=>{const et=it!=null;return[ot=>g[0]({lengthComputable:et,total:it,loaded:ot}),g[1]]},asyncDecorator=it=>(...g)=>utils$1.asap(()=>it(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?((it,g)=>et=>(et=new URL(et,platform.origin),it.protocol===et.protocol&&it.host===et.host&&(g||it.port===et.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(it,g,et,ot,ct,ut){const dt=[it+"="+encodeURIComponent(g)];utils$1.isNumber(et)&&dt.push("expires="+new Date(et).toGMTString()),utils$1.isString(ot)&&dt.push("path="+ot),utils$1.isString(ct)&&dt.push("domain="+ct),ut===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(it){const g=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(it){this.write(it,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(it){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(it)}function combineURLs(it,g){return g?it.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):it}function buildFullPath(it,g){return it&&!isAbsoluteURL(g)?combineURLs(it,g):g}const headersToObject=it=>it instanceof AxiosHeaders$1?{...it}:it;function mergeConfig(it,g){g=g||{};const et={};function ot(kt,Tt,Rt,jt){return utils$1.isPlainObject(kt)&&utils$1.isPlainObject(Tt)?utils$1.merge.call({caseless:jt},kt,Tt):utils$1.isPlainObject(Tt)?utils$1.merge({},Tt):utils$1.isArray(Tt)?Tt.slice():Tt}function ct(kt,Tt,Rt,jt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt,Rt,jt)}else return ot(kt,Tt,Rt,jt)}function ut(kt,Tt){if(!utils$1.isUndefined(Tt))return ot(void 0,Tt)}function dt(kt,Tt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt)}else return ot(void 0,Tt)}function ft(kt,Tt,Rt){if(Rt in g)return ot(kt,Tt);if(Rt in it)return ot(void 0,kt)}const St={url:ut,method:ut,data:ut,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:ft,headers:(kt,Tt,Rt)=>ct(headersToObject(kt),headersToObject(Tt),Rt,!0)};return utils$1.forEach(Object.keys(Object.assign({},it,g)),function(Tt){const Rt=St[Tt]||ct,jt=Rt(it[Tt],g[Tt],Tt);utils$1.isUndefined(jt)&&Rt!==ft||(et[Tt]=jt)}),et}const resolveConfig=it=>{const g=mergeConfig({},it);let{data:et,withXSRFToken:ot,xsrfHeaderName:ct,xsrfCookieName:ut,headers:dt,auth:ft}=g;g.headers=dt=AxiosHeaders$1.from(dt),g.url=buildURL(buildFullPath(g.baseURL,g.url),it.params,it.paramsSerializer),ft&&dt.set("Authorization","Basic "+btoa((ft.username||"")+":"+(ft.password?unescape(encodeURIComponent(ft.password)):"")));let St;if(utils$1.isFormData(et)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((St=dt.getContentType())!==!1){const[kt,...Tt]=St?St.split(";").map(Rt=>Rt.trim()).filter(Boolean):[];dt.setContentType([kt||"multipart/form-data",...Tt].join("; "))}}if(platform.hasStandardBrowserEnv&&(ot&&utils$1.isFunction(ot)&&(ot=ot(g)),ot||ot!==!1&&isURLSameOrigin(g.url))){const kt=ct&&ut&&cookies.read(ut);kt&&dt.set(ct,kt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(it){return new Promise(function(et,ot){const ct=resolveConfig(it);let ut=ct.data;const dt=AxiosHeaders$1.from(ct.headers).normalize();let{responseType:ft,onUploadProgress:St,onDownloadProgress:kt}=ct,Tt,Rt,jt,Ft,$t;function zt(){Ft&&Ft(),$t&&$t(),ct.cancelToken&&ct.cancelToken.unsubscribe(Tt),ct.signal&&ct.signal.removeEventListener("abort",Tt)}let Ut=new XMLHttpRequest;Ut.open(ct.method.toUpperCase(),ct.url,!0),Ut.timeout=ct.timeout;function Bt(){if(!Ut)return;const Jt=AxiosHeaders$1.from("getAllResponseHeaders"in Ut&&Ut.getAllResponseHeaders()),tn={data:!ft||ft==="text"||ft==="json"?Ut.responseText:Ut.response,status:Ut.status,statusText:Ut.statusText,headers:Jt,config:it,request:Ut};settle(function(rn){et(rn),zt()},function(rn){ot(rn),zt()},tn),Ut=null}"onloadend"in Ut?Ut.onloadend=Bt:Ut.onreadystatechange=function(){!Ut||Ut.readyState!==4||Ut.status===0&&!(Ut.responseURL&&Ut.responseURL.indexOf("file:")===0)||setTimeout(Bt)},Ut.onabort=function(){Ut&&(ot(new AxiosError("Request aborted",AxiosError.ECONNABORTED,it,Ut)),Ut=null)},Ut.onerror=function(){ot(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Ut)),Ut=null},Ut.ontimeout=function(){let Zt=ct.timeout?"timeout of "+ct.timeout+"ms exceeded":"timeout exceeded";const tn=ct.transitional||transitionalDefaults;ct.timeoutErrorMessage&&(Zt=ct.timeoutErrorMessage),ot(new AxiosError(Zt,tn.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,it,Ut)),Ut=null},ut===void 0&&dt.setContentType(null),"setRequestHeader"in Ut&&utils$1.forEach(dt.toJSON(),function(Zt,tn){Ut.setRequestHeader(tn,Zt)}),utils$1.isUndefined(ct.withCredentials)||(Ut.withCredentials=!!ct.withCredentials),ft&&ft!=="json"&&(Ut.responseType=ct.responseType),kt&&([jt,$t]=progressEventReducer(kt,!0),Ut.addEventListener("progress",jt)),St&&Ut.upload&&([Rt,Ft]=progressEventReducer(St),Ut.upload.addEventListener("progress",Rt),Ut.upload.addEventListener("loadend",Ft)),(ct.cancelToken||ct.signal)&&(Tt=Jt=>{Ut&&(ot(!Jt||Jt.type?new CanceledError(null,it,Ut):Jt),Ut.abort(),Ut=null)},ct.cancelToken&&ct.cancelToken.subscribe(Tt),ct.signal&&(ct.signal.aborted?Tt():ct.signal.addEventListener("abort",Tt)));const Ht=parseProtocol(ct.url);if(Ht&&platform.protocols.indexOf(Ht)===-1){ot(new AxiosError("Unsupported protocol "+Ht+":",AxiosError.ERR_BAD_REQUEST,it));return}Ut.send(ut||null)})},composeSignals=(it,g)=>{const{length:et}=it=it?it.filter(Boolean):[];if(g||et){let ot=new AbortController,ct;const ut=function(kt){if(!ct){ct=!0,ft();const Tt=kt instanceof Error?kt:this.reason;ot.abort(Tt instanceof AxiosError?Tt:new CanceledError(Tt instanceof Error?Tt.message:Tt))}};let dt=g&&setTimeout(()=>{dt=null,ut(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const ft=()=>{it&&(dt&&clearTimeout(dt),dt=null,it.forEach(kt=>{kt.unsubscribe?kt.unsubscribe(ut):kt.removeEventListener("abort",ut)}),it=null)};it.forEach(kt=>kt.addEventListener("abort",ut));const{signal:St}=ot;return St.unsubscribe=()=>utils$1.asap(ft),St}},composeSignals$1=composeSignals,streamChunk=function*(it,g){let et=it.byteLength;if(!g||et<g){yield it;return}let ot=0,ct;for(;ot<et;)ct=ot+g,yield it.slice(ot,ct),ot=ct},readBytes=async function*(it,g){for await(const et of readStream(it))yield*streamChunk(et,g)},readStream=async function*(it){if(it[Symbol.asyncIterator]){yield*it;return}const g=it.getReader();try{for(;;){const{done:et,value:ot}=await g.read();if(et)break;yield ot}}finally{await g.cancel()}},trackStream=(it,g,et,ot)=>{const ct=readBytes(it,g);let ut=0,dt,ft=St=>{dt||(dt=!0,ot&&ot(St))};return new ReadableStream({async pull(St){try{const{done:kt,value:Tt}=await ct.next();if(kt){ft(),St.close();return}let Rt=Tt.byteLength;if(et){let jt=ut+=Rt;et(jt)}St.enqueue(new Uint8Array(Tt))}catch(kt){throw ft(kt),kt}},cancel(St){return ft(St),ct.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(it=>g=>it.encode(g))(new TextEncoder):async it=>new Uint8Array(await new Response(it).arrayBuffer())),test=(it,...g)=>{try{return!!it(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let it=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return it=!0,"half"}}).headers.has("Content-Type");return it&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(it=>it.body)};isFetchSupported&&(it=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$1.isFunction(it[g])?et=>et[g]():(et,ot)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,ot)})})})(new Response);const getBodyLength=async it=>{if(it==null)return 0;if(utils$1.isBlob(it))return it.size;if(utils$1.isSpecCompliantForm(it))return(await new Request(platform.origin,{method:"POST",body:it}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(it)||utils$1.isArrayBuffer(it))return it.byteLength;if(utils$1.isURLSearchParams(it)&&(it=it+""),utils$1.isString(it))return(await encodeText(it)).byteLength},resolveBodyLength=async(it,g)=>{const et=utils$1.toFiniteNumber(it.getContentLength());return et??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async it=>{let{url:g,method:et,data:ot,signal:ct,cancelToken:ut,timeout:dt,onDownloadProgress:ft,onUploadProgress:St,responseType:kt,headers:Tt,withCredentials:Rt="same-origin",fetchOptions:jt}=resolveConfig(it);kt=kt?(kt+"").toLowerCase():"text";let Ft=composeSignals$1([ct,ut&&ut.toAbortSignal()],dt),$t;const zt=Ft&&Ft.unsubscribe&&(()=>{Ft.unsubscribe()});let Ut;try{if(St&&supportsRequestStream&&et!=="get"&&et!=="head"&&(Ut=await resolveBodyLength(Tt,ot))!==0){let tn=new Request(g,{method:"POST",body:ot,duplex:"half"}),nn;if(utils$1.isFormData(ot)&&(nn=tn.headers.get("content-type"))&&Tt.setContentType(nn),tn.body){const[rn,on]=progressEventDecorator(Ut,progressEventReducer(asyncDecorator(St)));ot=trackStream(tn.body,DEFAULT_CHUNK_SIZE,rn,on)}}utils$1.isString(Rt)||(Rt=Rt?"include":"omit");const Bt="credentials"in Request.prototype;$t=new Request(g,{...jt,signal:Ft,method:et.toUpperCase(),headers:Tt.normalize().toJSON(),body:ot,duplex:"half",credentials:Bt?Rt:void 0});let Ht=await fetch($t);const Jt=supportsResponseStream&&(kt==="stream"||kt==="response");if(supportsResponseStream&&(ft||Jt&&zt)){const tn={};["status","statusText","headers"].forEach(pn=>{tn[pn]=Ht[pn]});const nn=utils$1.toFiniteNumber(Ht.headers.get("content-length")),[rn,on]=ft&&progressEventDecorator(nn,progressEventReducer(asyncDecorator(ft),!0))||[];Ht=new Response(trackStream(Ht.body,DEFAULT_CHUNK_SIZE,rn,()=>{on&&on(),zt&&zt()}),tn)}kt=kt||"text";let Zt=await resolvers[utils$1.findKey(resolvers,kt)||"text"](Ht,it);return!Jt&&zt&&zt(),await new Promise((tn,nn)=>{settle(tn,nn,{data:Zt,headers:AxiosHeaders$1.from(Ht.headers),status:Ht.status,statusText:Ht.statusText,config:it,request:$t})})}catch(Bt){throw zt&&zt(),Bt&&Bt.name==="TypeError"&&/fetch/i.test(Bt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,$t),{cause:Bt.cause||Bt}):AxiosError.from(Bt,Bt&&Bt.code,it,$t)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(it,g)=>{if(it){try{Object.defineProperty(it,"name",{value:g})}catch{}Object.defineProperty(it,"adapterName",{value:g})}});const renderReason=it=>`- ${it}`,isResolvedHandle=it=>utils$1.isFunction(it)||it===null||it===!1,adapters={getAdapter:it=>{it=utils$1.isArray(it)?it:[it];const{length:g}=it;let et,ot;const ct={};for(let ut=0;ut<g;ut++){et=it[ut];let dt;if(ot=et,!isResolvedHandle(et)&&(ot=knownAdapters[(dt=String(et)).toLowerCase()],ot===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(ot)break;ct[dt||"#"+ut]=ot}if(!ot){const ut=Object.entries(ct).map(([ft,St])=>`adapter ${ft} `+(St===!1?"is not supported by the environment":"is not available in the build"));let dt=g?ut.length>1?`since :
`+ut.map(renderReason).join(`
`):" "+renderReason(ut[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return ot},adapters:knownAdapters};function throwIfCancellationRequested(it){if(it.cancelToken&&it.cancelToken.throwIfRequested(),it.signal&&it.signal.aborted)throw new CanceledError(null,it)}function dispatchRequest(it){return throwIfCancellationRequested(it),it.headers=AxiosHeaders$1.from(it.headers),it.data=transformData.call(it,it.transformRequest),["post","put","patch"].indexOf(it.method)!==-1&&it.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(it.adapter||defaults$2.adapter)(it).then(function(ot){return throwIfCancellationRequested(it),ot.data=transformData.call(it,it.transformResponse,ot),ot.headers=AxiosHeaders$1.from(ot.headers),ot},function(ot){return isCancel(ot)||(throwIfCancellationRequested(it),ot&&ot.response&&(ot.response.data=transformData.call(it,it.transformResponse,ot.response),ot.response.headers=AxiosHeaders$1.from(ot.response.headers))),Promise.reject(ot)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((it,g)=>{validators$1[it]=function(ot){return typeof ot===it||"a"+(g<1?"n ":" ")+it}});const deprecatedWarnings={};validators$1.transitional=function(g,et,ot){function ct(ut,dt){return"[Axios v"+VERSION+"] Transitional option '"+ut+"'"+dt+(ot?". "+ot:"")}return(ut,dt,ft)=>{if(g===!1)throw new AxiosError(ct(dt," has been removed"+(et?" in "+et:"")),AxiosError.ERR_DEPRECATED);return et&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(ct(dt," has been deprecated since v"+et+" and will be removed in the near future"))),g?g(ut,dt,ft):!0}};validators$1.spelling=function(g){return(et,ot)=>(console.warn(`${ot} is likely a misspelling of ${g}`),!0)};function assertOptions(it,g,et){if(typeof it!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ot=Object.keys(it);let ct=ot.length;for(;ct-- >0;){const ut=ot[ct],dt=g[ut];if(dt){const ft=it[ut],St=ft===void 0||dt(ft,ut,it);if(St!==!0)throw new AxiosError("option "+ut+" must be "+St,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(et!==!0)throw new AxiosError("Unknown option "+ut,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(g,et){try{return await this._request(g,et)}catch(ot){if(ot instanceof Error){let ct={};Error.captureStackTrace?Error.captureStackTrace(ct):ct=new Error;const ut=ct.stack?ct.stack.replace(/^.+\n/,""):"";try{ot.stack?ut&&!String(ot.stack).endsWith(ut.replace(/^.+\n.+\n/,""))&&(ot.stack+=`
`+ut):ot.stack=ut}catch{}}throw ot}}_request(g,et){typeof g=="string"?(et=et||{},et.url=g):et=g||{},et=mergeConfig(this.defaults,et);const{transitional:ot,paramsSerializer:ct,headers:ut}=et;ot!==void 0&&validator.assertOptions(ot,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ct!=null&&(utils$1.isFunction(ct)?et.paramsSerializer={serialize:ct}:validator.assertOptions(ct,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(et,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),et.method=(et.method||this.defaults.method||"get").toLowerCase();let dt=ut&&utils$1.merge(ut.common,ut[et.method]);ut&&utils$1.forEach(["delete","get","head","post","put","patch","common"],$t=>{delete ut[$t]}),et.headers=AxiosHeaders$1.concat(dt,ut);const ft=[];let St=!0;this.interceptors.request.forEach(function(zt){typeof zt.runWhen=="function"&&zt.runWhen(et)===!1||(St=St&&zt.synchronous,ft.unshift(zt.fulfilled,zt.rejected))});const kt=[];this.interceptors.response.forEach(function(zt){kt.push(zt.fulfilled,zt.rejected)});let Tt,Rt=0,jt;if(!St){const $t=[dispatchRequest.bind(this),void 0];for($t.unshift.apply($t,ft),$t.push.apply($t,kt),jt=$t.length,Tt=Promise.resolve(et);Rt<jt;)Tt=Tt.then($t[Rt++],$t[Rt++]);return Tt}jt=ft.length;let Ft=et;for(Rt=0;Rt<jt;){const $t=ft[Rt++],zt=ft[Rt++];try{Ft=$t(Ft)}catch(Ut){zt.call(this,Ut);break}}try{Tt=dispatchRequest.call(this,Ft)}catch($t){return Promise.reject($t)}for(Rt=0,jt=kt.length;Rt<jt;)Tt=Tt.then(kt[Rt++],kt[Rt++]);return Tt}getUri(g){g=mergeConfig(this.defaults,g);const et=buildFullPath(g.baseURL,g.url);return buildURL(et,g.params,g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(et,ot){return this.request(mergeConfig(ot||{},{method:g,url:et,data:(ot||{}).data}))}});utils$1.forEach(["post","put","patch"],function(g){function et(ot){return function(ut,dt,ft){return this.request(mergeConfig(ft||{},{method:g,headers:ot?{"Content-Type":"multipart/form-data"}:{},url:ut,data:dt}))}}Axios.prototype[g]=et(),Axios.prototype[g+"Form"]=et(!0)});const Axios$1=Axios;class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let et;this.promise=new Promise(function(ut){et=ut});const ot=this;this.promise.then(ct=>{if(!ot._listeners)return;let ut=ot._listeners.length;for(;ut-- >0;)ot._listeners[ut](ct);ot._listeners=null}),this.promise.then=ct=>{let ut;const dt=new Promise(ft=>{ot.subscribe(ft),ut=ft}).then(ct);return dt.cancel=function(){ot.unsubscribe(ut)},dt},g(function(ut,dt,ft){ot.reason||(ot.reason=new CanceledError(ut,dt,ft),et(ot.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const et=this._listeners.indexOf(g);et!==-1&&this._listeners.splice(et,1)}toAbortSignal(){const g=new AbortController,et=ot=>{g.abort(ot)};return this.subscribe(et),g.signal.unsubscribe=()=>this.unsubscribe(et),g.signal}static source(){let g;return{token:new CancelToken(function(ct){g=ct}),cancel:g}}}const CancelToken$1=CancelToken;function spread(it){return function(et){return it.apply(null,et)}}function isAxiosError(it){return utils$1.isObject(it)&&it.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([it,g])=>{HttpStatusCode[g]=it});const HttpStatusCode$1=HttpStatusCode;function createInstance$1(it){const g=new Axios$1(it),et=bind$1(Axios$1.prototype.request,g);return utils$1.extend(et,Axios$1.prototype,g,{allOwnKeys:!0}),utils$1.extend(et,g,null,{allOwnKeys:!0}),et.create=function(ct){return createInstance$1(mergeConfig(it,ct))},et}const axios=createInstance$1(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=it=>formDataToJSON(utils$1.isHTMLForm(it)?new FormData(it):it);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(it){var g,et,ot="";if(typeof it=="string"||typeof it=="number")ot+=it;else if(typeof it=="object")if(Array.isArray(it)){var ct=it.length;for(g=0;g<ct;g++)it[g]&&(et=r$3(it[g]))&&(ot&&(ot+=" "),ot+=et)}else for(et in it)it[et]&&(ot&&(ot+=" "),ot+=et);return ot}function clsx(){for(var it,g,et=0,ot="",ct=arguments.length;et<ct;et++)(it=arguments[et])&&(g=r$3(it))&&(ot&&(ot+=" "),ot+=g);return ot}function Mt(it){if(!it||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",g.firstChild?g.insertBefore(et,g.firstChild):g.appendChild(et),et.styleSheet?et.styleSheet.cssText=it:et.appendChild(document.createTextNode(it))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$2=it=>typeof it=="number"&&!isNaN(it),N$1=it=>typeof it=="string",P$2=it=>typeof it=="function",mt=it=>N$1(it)||L$2(it),B=it=>N$1(it)||P$2(it)?it:null,pt=(it,g)=>it===!1||L$2(it)&&it>0?it:g,z=it=>reactExports.isValidElement(it)||N$1(it)||P$2(it)||L$2(it);function Z$1(it,g,et=300){let{scrollHeight:ot,style:ct}=it;requestAnimationFrame(()=>{ct.minHeight="initial",ct.height=ot+"px",ct.transition=`all ${et}ms`,requestAnimationFrame(()=>{ct.height="0",ct.padding="0",ct.margin="0",setTimeout(g,et)})})}function $$2({enter:it,exit:g,appendPosition:et=!1,collapse:ot=!0,collapseDuration:ct=300}){return function({children:ut,position:dt,preventExitTransition:ft,done:St,nodeRef:kt,isIn:Tt,playToast:Rt}){let jt=et?`${it}--${dt}`:it,Ft=et?`${g}--${dt}`:g,$t=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let zt=kt.current,Ut=jt.split(" "),Bt=Ht=>{Ht.target===kt.current&&(Rt(),zt.removeEventListener("animationend",Bt),zt.removeEventListener("animationcancel",Bt),$t.current===0&&Ht.type!=="animationcancel"&&zt.classList.remove(...Ut))};zt.classList.add(...Ut),zt.addEventListener("animationend",Bt),zt.addEventListener("animationcancel",Bt)},[]),reactExports.useEffect(()=>{let zt=kt.current,Ut=()=>{zt.removeEventListener("animationend",Ut),ot?Z$1(zt,St,ct):St()};Tt||(ft?Ut():($t.current=1,zt.className+=` ${Ft}`,zt.addEventListener("animationend",Ut)))},[Tt]),React$2.createElement(React$2.Fragment,null,ut)}}function J$1(it,g){return{content:tt$1(it.content,it.props),containerId:it.props.containerId,id:it.props.toastId,theme:it.props.theme,type:it.props.type,data:it.props.data||{},isLoading:it.props.isLoading,icon:it.props.icon,reason:it.removalReason,status:g}}function tt$1(it,g,et=!1){return reactExports.isValidElement(it)&&!N$1(it.type)?reactExports.cloneElement(it,{closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):P$2(it)?it({closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):it}function yt$1({closeToast:it,theme:g,ariaLabel:et="close"}){return React$2.createElement("button",{className:`Toastify__close-button Toastify__close-button--${g}`,type:"button",onClick:ot=>{ot.stopPropagation(),it(!0)},"aria-label":et},React$2.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$2.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:it,isRunning:g,closeToast:et,type:ot="default",hide:ct,className:ut,controlledProgress:dt,progress:ft,rtl:St,isIn:kt,theme:Tt}){let Rt=ct||dt&&ft===0,jt={animationDuration:`${it}ms`,animationPlayState:g?"running":"paused"};dt&&(jt.transform=`scaleX(${ft})`);let Ft=clsx("Toastify__progress-bar",dt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Tt}`,`Toastify__progress-bar--${ot}`,{"Toastify__progress-bar--rtl":St}),$t=P$2(ut)?ut({rtl:St,type:ot,defaultClassName:Ft}):clsx(Ft,ut),zt={[dt&&ft>=1?"onTransitionEnd":"onAnimationEnd"]:dt&&ft<1?null:()=>{kt&&et()}};return React$2.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Rt},React$2.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Tt} Toastify__progress-bar--${ot}`}),React$2.createElement("div",{role:"progressbar","aria-hidden":Rt?"true":"false","aria-label":"notification timer",className:$t,style:jt,...zt}))}var Xt=1,at=()=>`${Xt++}`;function _t(it,g,et){let ot=1,ct=0,ut=[],dt=[],ft=g,St=new Map,kt=new Set,Tt=Ht=>(kt.add(Ht),()=>kt.delete(Ht)),Rt=()=>{dt=Array.from(St.values()),kt.forEach(Ht=>Ht())},jt=({containerId:Ht,toastId:Jt,updateId:Zt})=>{let tn=Ht?Ht!==it:it!==1,nn=St.has(Jt)&&Zt==null;return tn||nn},Ft=(Ht,Jt)=>{St.forEach(Zt=>{var tn;(Jt==null||Jt===Zt.props.toastId)&&((tn=Zt.toggle)==null||tn.call(Zt,Ht))})},$t=Ht=>{var Jt,Zt;(Zt=(Jt=Ht.props)==null?void 0:Jt.onClose)==null||Zt.call(Jt,Ht.removalReason),Ht.isActive=!1},zt=Ht=>{if(Ht==null)St.forEach($t);else{let Jt=St.get(Ht);Jt&&$t(Jt)}Rt()},Ut=()=>{ct-=ut.length,ut=[]},Bt=Ht=>{var Jt,Zt;let{toastId:tn,updateId:nn}=Ht.props,rn=nn==null;Ht.staleId&&St.delete(Ht.staleId),Ht.isActive=!0,St.set(tn,Ht),Rt(),et(J$1(Ht,rn?"added":"updated")),rn&&((Zt=(Jt=Ht.props).onOpen)==null||Zt.call(Jt))};return{id:it,props:ft,observe:Tt,toggle:Ft,removeToast:zt,toasts:St,clearQueue:Ut,buildToast:(Ht,Jt)=>{if(jt(Jt))return;let{toastId:Zt,updateId:tn,data:nn,staleId:rn,delay:on}=Jt,pn=tn==null;pn&&ct++;let dn={...ft,style:ft.toastStyle,key:ot++,...Object.fromEntries(Object.entries(Jt).filter(([un,En])=>En!=null)),toastId:Zt,updateId:tn,data:nn,isIn:!1,className:B(Jt.className||ft.toastClassName),progressClassName:B(Jt.progressClassName||ft.progressClassName),autoClose:Jt.isLoading?!1:pt(Jt.autoClose,ft.autoClose),closeToast(un){St.get(Zt).removalReason=un,zt(Zt)},deleteToast(){let un=St.get(Zt);if(un!=null){if(et(J$1(un,"removed")),St.delete(Zt),ct--,ct<0&&(ct=0),ut.length>0){Bt(ut.shift());return}Rt()}}};dn.closeButton=ft.closeButton,Jt.closeButton===!1||z(Jt.closeButton)?dn.closeButton=Jt.closeButton:Jt.closeButton===!0&&(dn.closeButton=z(ft.closeButton)?ft.closeButton:!0);let hn={content:Ht,props:dn,staleId:rn};ft.limit&&ft.limit>0&&ct>ft.limit&&pn?ut.push(hn):L$2(on)?setTimeout(()=>{Bt(hn)},on):Bt(hn)},setProps(Ht){ft=Ht},setToggle:(Ht,Jt)=>{let Zt=St.get(Ht);Zt&&(Zt.toggle=Jt)},isToastActive:Ht=>{var Jt;return(Jt=St.get(Ht))==null?void 0:Jt.isActive},getSnapshot:()=>dt}}var I$3=new Map,F$2=[],st=new Set,Vt=it=>st.forEach(g=>g(it)),bt=()=>I$3.size>0;function Qt(){F$2.forEach(it=>nt(it.content,it.options)),F$2=[]}var vt=(it,{containerId:g})=>{var et;return(et=I$3.get(g||1))==null?void 0:et.toasts.get(it)};function X$3(it,g){var et;if(g)return!!((et=I$3.get(g))!=null&&et.isToastActive(it));let ot=!1;return I$3.forEach(ct=>{ct.isToastActive(it)&&(ot=!0)}),ot}function ht(it){if(!bt()){F$2=F$2.filter(g=>it!=null&&g.options.toastId!==it);return}if(it==null||mt(it))I$3.forEach(g=>{g.removeToast(it)});else if(it&&("containerId"in it||"id"in it)){let g=I$3.get(it.containerId);g?g.removeToast(it.id):I$3.forEach(et=>{et.removeToast(it.id)})}}var Ct=(it={})=>{I$3.forEach(g=>{g.props.limit&&(!it.containerId||g.id===it.containerId)&&g.clearQueue()})};function nt(it,g){z(it)&&(bt()||F$2.push({content:it,options:g}),I$3.forEach(et=>{et.buildToast(it,g)}))}function xt(it){var g;(g=I$3.get(it.containerId||1))==null||g.setToggle(it.id,it.fn)}function rt(it,g){I$3.forEach(et=>{(g==null||!(g!=null&&g.containerId)||(g==null?void 0:g.containerId)===et.id)&&et.toggle(it,g==null?void 0:g.id)})}function Et(it){let g=it.containerId||1;return{subscribe(et){let ot=_t(g,it,Vt);I$3.set(g,ot);let ct=ot.observe(et);return Qt(),()=>{ct(),I$3.delete(g)}},setProps(et){var ot;(ot=I$3.get(g))==null||ot.setProps(et)},getSnapshot(){var et;return(et=I$3.get(g))==null?void 0:et.getSnapshot()}}}function Pt(it){return st.add(it),()=>{st.delete(it)}}function Wt(it){return it&&(N$1(it.toastId)||L$2(it.toastId))?it.toastId:at()}function U$3(it,g){return nt(it,g),g.toastId}function V$1(it,g){return{...g,type:g&&g.type||it,toastId:Wt(g)}}function Q(it){return(g,et)=>U$3(g,V$1(it,et))}function y$4(it,g){return U$3(it,V$1("default",g))}y$4.loading=(it,g)=>U$3(it,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...g}));function Gt(it,{pending:g,error:et,success:ot},ct){let ut;g&&(ut=N$1(g)?y$4.loading(g,ct):y$4.loading(g.render,{...ct,...g}));let dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(kt,Tt,Rt)=>{if(Tt==null){y$4.dismiss(ut);return}let jt={type:kt,...dt,...ct,data:Rt},Ft=N$1(Tt)?{render:Tt}:Tt;return ut?y$4.update(ut,{...jt,...Ft}):y$4(Ft.render,{...jt,...Ft}),Rt},St=P$2(it)?it():it;return St.then(kt=>ft("success",ot,kt)).catch(kt=>ft("error",et,kt)),St}y$4.promise=Gt;y$4.success=Q("success");y$4.info=Q("info");y$4.error=Q("error");y$4.warning=Q("warning");y$4.warn=y$4.warning;y$4.dark=(it,g)=>U$3(it,V$1("default",{theme:"dark",...g}));function qt(it){ht(it)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$3;y$4.update=(it,g={})=>{let et=vt(it,g);if(et){let{props:ot,content:ct}=et,ut={delay:100,...ot,...g,toastId:g.toastId||it,updateId:at()};ut.toastId!==it&&(ut.staleId=it);let dt=ut.render||ct;delete ut.render,U$3(dt,ut)}};y$4.done=it=>{y$4.update(it,{progress:1})};y$4.onChange=Pt;y$4.play=it=>rt(!0,it);y$4.pause=it=>rt(!1,it);function It(it){var g;let{subscribe:et,getSnapshot:ot,setProps:ct}=reactExports.useRef(Et(it)).current;ct(it);let ut=(g=reactExports.useSyncExternalStore(et,ot,ot))==null?void 0:g.slice();function dt(ft){if(!ut)return[];let St=new Map;return it.newestOnTop&&ut.reverse(),ut.forEach(kt=>{let{position:Tt}=kt.props;St.has(Tt)||St.set(Tt,[]),St.get(Tt).push(kt)}),Array.from(St,kt=>ft(kt[0],kt[1]))}return{getToastToRender:dt,isToastActive:X$3,count:ut==null?void 0:ut.length}}function At(it){let[g,et]=reactExports.useState(!1),[ot,ct]=reactExports.useState(!1),ut=reactExports.useRef(null),dt=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:ft,pauseOnHover:St,closeToast:kt,onClick:Tt,closeOnClick:Rt}=it;xt({id:it.toastId,containerId:it.containerId,fn:et}),reactExports.useEffect(()=>{if(it.pauseOnFocusLoss)return jt(),()=>{Ft()}},[it.pauseOnFocusLoss]);function jt(){document.hasFocus()||Bt(),window.addEventListener("focus",Ut),window.addEventListener("blur",Bt)}function Ft(){window.removeEventListener("focus",Ut),window.removeEventListener("blur",Bt)}function $t(rn){if(it.draggable===!0||it.draggable===rn.pointerType){Ht();let on=ut.current;dt.canCloseOnClick=!0,dt.canDrag=!0,on.style.transition="none",it.draggableDirection==="x"?(dt.start=rn.clientX,dt.removalDistance=on.offsetWidth*(it.draggablePercent/100)):(dt.start=rn.clientY,dt.removalDistance=on.offsetHeight*(it.draggablePercent===80?it.draggablePercent*1.5:it.draggablePercent)/100)}}function zt(rn){let{top:on,bottom:pn,left:dn,right:hn}=ut.current.getBoundingClientRect();rn.nativeEvent.type!=="touchend"&&it.pauseOnHover&&rn.clientX>=dn&&rn.clientX<=hn&&rn.clientY>=on&&rn.clientY<=pn?Bt():Ut()}function Ut(){et(!0)}function Bt(){et(!1)}function Ht(){dt.didMove=!1,document.addEventListener("pointermove",Zt),document.addEventListener("pointerup",tn)}function Jt(){document.removeEventListener("pointermove",Zt),document.removeEventListener("pointerup",tn)}function Zt(rn){let on=ut.current;if(dt.canDrag&&on){dt.didMove=!0,g&&Bt(),it.draggableDirection==="x"?dt.delta=rn.clientX-dt.start:dt.delta=rn.clientY-dt.start,dt.start!==rn.clientX&&(dt.canCloseOnClick=!1);let pn=it.draggableDirection==="x"?`${dt.delta}px, var(--y)`:`0, calc(${dt.delta}px + var(--y))`;on.style.transform=`translate3d(${pn},0)`,on.style.opacity=`${1-Math.abs(dt.delta/dt.removalDistance)}`}}function tn(){Jt();let rn=ut.current;if(dt.canDrag&&dt.didMove&&rn){if(dt.canDrag=!1,Math.abs(dt.delta)>dt.removalDistance){ct(!0),it.closeToast(!0),it.collapseAll();return}rn.style.transition="transform 0.2s, opacity 0.2s",rn.style.removeProperty("transform"),rn.style.removeProperty("opacity")}}let nn={onPointerDown:$t,onPointerUp:zt};return ft&&St&&(nn.onMouseEnter=Bt,it.stacked||(nn.onMouseLeave=Ut)),Rt&&(nn.onClick=rn=>{Tt&&Tt(rn),dt.canCloseOnClick&&kt(!0)}),{playToast:Ut,pauseToast:Bt,isRunning:g,preventExitTransition:ot,toastRef:ut,eventHandlers:nn}}var Ot=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:it,type:g,isLoading:et,...ot})=>React$2.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:it==="colored"?"currentColor":`var(--toastify-icon-color-${g})`,...ot});function ao(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(it){return React$2.createElement(G,{...it},React$2.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$2.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=it=>it in W$1;function Nt({theme:it,type:g,isLoading:et,icon:ot}){let ct=null,ut={theme:it,type:g};return ot===!1||(P$2(ot)?ct=ot({...ut,isLoading:et}):reactExports.isValidElement(ot)?ct=reactExports.cloneElement(ot,ut):et?ct=W$1.spinner():lo(g)&&(ct=W$1[g](ut))),ct}var wt=it=>{let{isRunning:g,preventExitTransition:et,toastRef:ot,eventHandlers:ct,playToast:ut}=At(it),{closeButton:dt,children:ft,autoClose:St,onClick:kt,type:Tt,hideProgressBar:Rt,closeToast:jt,transition:Ft,position:$t,className:zt,style:Ut,progressClassName:Bt,updateId:Ht,role:Jt,progress:Zt,rtl:tn,toastId:nn,deleteToast:rn,isIn:on,isLoading:pn,closeOnClick:dn,theme:hn,ariaLabel:un}=it,En=clsx("Toastify__toast",`Toastify__toast-theme--${hn}`,`Toastify__toast--${Tt}`,{"Toastify__toast--rtl":tn},{"Toastify__toast--close-on-click":dn}),wn=P$2(zt)?zt({rtl:tn,position:$t,type:Tt,defaultClassName:En}):clsx(En,zt),Sn=Nt(it),fn=!!Zt||!St,xn={closeToast:jt,type:Tt,theme:hn},an=null;return dt===!1||(P$2(dt)?an=dt(xn):reactExports.isValidElement(dt)?an=reactExports.cloneElement(dt,xn):an=yt$1(xn)),React$2.createElement(Ft,{isIn:on,done:rn,position:$t,preventExitTransition:et,nodeRef:ot,playToast:ut},React$2.createElement("div",{id:nn,tabIndex:0,onClick:kt,"data-in":on,className:wn,...ct,style:Ut,ref:ot,...on&&{role:Jt,"aria-label":un}},Sn!=null&&React$2.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!pn})},Sn),tt$1(ft,it,!g),an,!it.customProgressBar&&React$2.createElement(gt,{...Ht&&!fn?{key:`p-${Ht}`}:{},rtl:tn,theme:hn,delay:St,isRunning:g,isIn:on,closeToast:jt,hide:Rt,type:Tt,className:Bt,controlledProgress:fn,progress:Zt||0})))},K$1=(it,g=!1)=>({enter:`Toastify--animate Toastify__${it}-enter`,exit:`Toastify--animate Toastify__${it}-exit`,appendPosition:g}),lt=$$2(K$1("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:it=>it.altKey&&it.code==="KeyT"};function Lt(it){let g={..._o,...it},et=it.stacked,[ot,ct]=reactExports.useState(!0),ut=reactExports.useRef(null),{getToastToRender:dt,isToastActive:ft,count:St}=It(g),{className:kt,style:Tt,rtl:Rt,containerId:jt,hotKeys:Ft}=g;function $t(Ut){let Bt=clsx("Toastify__toast-container",`Toastify__toast-container--${Ut}`,{"Toastify__toast-container--rtl":Rt});return P$2(kt)?kt({position:Ut,rtl:Rt,defaultClassName:Bt}):clsx(Bt,B(kt))}function zt(){et&&(ct(!0),y$4.play())}return Ot(()=>{var Ut;if(et){let Bt=ut.current.querySelectorAll('[data-in="true"]'),Ht=12,Jt=(Ut=g.position)==null?void 0:Ut.includes("top"),Zt=0,tn=0;Array.from(Bt).reverse().forEach((nn,rn)=>{let on=nn;on.classList.add("Toastify__toast--stacked"),rn>0&&(on.dataset.collapsed=`${ot}`),on.dataset.pos||(on.dataset.pos=Jt?"top":"bot");let pn=Zt*(ot?.2:1)+(ot?0:Ht*rn);on.style.setProperty("--y",`${Jt?pn:pn*-1}px`),on.style.setProperty("--g",`${Ht}`),on.style.setProperty("--s",`${1-(ot?tn:0)}`),Zt+=on.offsetHeight,tn+=.025})}},[ot,St,et]),reactExports.useEffect(()=>{function Ut(Bt){var Ht;let Jt=ut.current;Ft(Bt)&&((Ht=Jt.querySelector('[tabIndex="0"]'))==null||Ht.focus(),ct(!1),y$4.pause()),Bt.key==="Escape"&&(document.activeElement===Jt||Jt!=null&&Jt.contains(document.activeElement))&&(ct(!0),y$4.play())}return document.addEventListener("keydown",Ut),()=>{document.removeEventListener("keydown",Ut)}},[Ft]),React$2.createElement("section",{ref:ut,className:"Toastify",id:jt,onMouseEnter:()=>{et&&(ct(!1),y$4.pause())},onMouseLeave:zt,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":g["aria-label"]},dt((Ut,Bt)=>{let Ht=Bt.length?{...Tt}:{...Tt,pointerEvents:"none"};return React$2.createElement("div",{tabIndex:-1,className:$t(Ut),"data-stacked":et,style:Ht,key:`c-${Ut}`},Bt.map(({content:Jt,props:Zt})=>React$2.createElement(wt,{...Zt,stacked:et,collapseAll:zt,isIn:ft(Zt.toastId,Zt.containerId),key:`t-${Zt.key}`},Jt)))}))}const BASE_URL="https://cre8tlystudio.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});console.log("Base URL:",axiosInstance.defaults.baseURL);let isRefreshing=!1,refreshSubscribers=[];function onRefreshed(it){refreshSubscribers.forEach(g=>g(it)),refreshSubscribers=[]}axiosInstance.interceptors.request.use(it=>{const g=localStorage.getItem("accessToken");return g&&(it.headers.Authorization=`Bearer ${g}`),it});async function refreshToken(){if(isRefreshing)return new Promise(it=>{refreshSubscribers.push(it)});isRefreshing=!0;try{const it=localStorage.getItem("refreshToken");if(!it)throw new Error("No refresh token found");const g=await axios$1.post(`${BASE_URL}/auth/refresh`,{token:it}),{accessToken:et,refreshToken:ot}=g.data;return localStorage.setItem("accessToken",et),ot&&localStorage.setItem("refreshToken",ot),axiosInstance.defaults.headers.Authorization=`Bearer ${et}`,onRefreshed(et),et}catch(it){throw console.error("Token refresh failed:",it),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),it}finally{isRefreshing=!1}}axiosInstance.interceptors.response.use(it=>it,async it=>{var et;const g=it.config;if(((et=it.response)==null?void 0:et.status)===401&&!g._retry){g._retry=!0;try{const ot=await refreshToken();return ot?(g.headers.Authorization=`Bearer ${ot}`,axiosInstance(g)):new Promise(ct=>{refreshSubscribers.push(ut=>{g.headers.Authorization=`Bearer ${ut}`,ct(axiosInstance(g))})})}catch(ot){return console.error("Refresh retry failed:",ot),Promise.reject(ot)}}return Promise.reject(it)});axiosInstance.interceptors.response.use(it=>it,it=>{var g;return((g=it.response)==null?void 0:g.status)===403&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(it)});const AuthContext=reactExports.createContext();function AuthProvider({children:it,navigate:g}){const[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0);function St(Ft,$t,zt){ot(Ft),ut($t),localStorage.setItem("user",JSON.stringify(Ft)),localStorage.setItem("accessToken",$t),zt&&localStorage.setItem("refreshToken",zt)}async function kt(Ft,$t){try{const Ut=(await axiosInstance.post("/auth/login",{email:Ft,password:$t})).data;St(Ut.user,Ut.accessToken,Ut.refreshToken);try{const Bt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Ut.accessToken}`}});ot(Bt.data),localStorage.setItem("user",JSON.stringify(Bt.data))}catch(Bt){console.error("Failed to fetch fresh user data after login:",Bt)}}catch(zt){throw zt}}async function Tt(){var $t,zt;const Ft=localStorage.getItem("refreshToken");if(!Ft)return null;try{const Bt=(await axiosInstance.post("/auth/refresh",{token:Ft})).data;return ut(Bt.accessToken),localStorage.setItem("accessToken",Bt.accessToken),Bt.refreshToken&&localStorage.setItem("refreshToken",Bt.refreshToken),Bt.accessToken}catch(Ut){return console.error("Refresh failed:",Ut),((($t=Ut.response)==null?void 0:$t.status)===401||((zt=Ut.response)==null?void 0:zt.status)===403)&&Rt(),null}}function Rt(){try{axiosInstance.post("/auth/logout")}catch{}ot(null),ut(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),g("/")}reactExports.useEffect(()=>{const Ft=setTimeout(()=>Tt(),1500);return()=>clearTimeout(Ft)},[]),reactExports.useEffect(()=>{async function Ft(){try{const $t=localStorage.getItem("user"),zt=localStorage.getItem("accessToken"),Ut=localStorage.getItem("refreshToken");if($t&&ot(JSON.parse($t)),zt&&ut(zt),!zt&&Ut){const Bt=await Tt();if(Bt){const Ht=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Bt}`}});ot(Ht.data),localStorage.setItem("user",JSON.stringify(Ht.data))}}}catch($t){console.error("Failed to restore user:",$t)}finally{ft(!1)}}Ft()},[]);async function jt(){try{const Ft=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${ct}`}});return ot(Ft.data),localStorage.setItem("user",JSON.stringify(Ft.data)),Ft.data}catch(Ft){return console.error("Failed to refresh user data:",Ft),y$4.error("Failed to refresh user data"),null}}return reactExports.useEffect(()=>{const Ft=setInterval(()=>{Tt()},72e4);return()=>clearInterval(Ft)},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:et,setUser:ot,accessToken:ct,authLoading:dt,login:kt,logout:Rt,refreshAccessToken:Tt,refreshUser:jt},children:it})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:it}){const g=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:g,children:it})}const MagnetContext=reactExports.createContext();function MagnetProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState({magnets:[],summary:{}}),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const Tt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Rt=Array.isArray(Tt)?{magnets:Tt,summary:{}}:Tt;ot(Rt)}catch(kt){console.error("Error fetching lead magnets:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Rt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,jt=Array.isArray(Rt)?{magnets:Rt,summary:{}}:Rt;ot(Ft=>JSON.stringify(Ft)===JSON.stringify(jt)?Ft:jt)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(MagnetContext.Provider,{value:{magnets:et,setMagnets:ot,fetchMagnets:St,loading:ct,error:dt},children:it})}function useMagnets(){return reactExports.useContext(MagnetContext)}function LoadingOverlay(){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-purple-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-white font-semibold",children:"Restoring your session..."})]})})}function PrivateRoute({children:it,role:g}){const{user:et,authLoading:ot}=useAuth();return ot?jsxRuntimeExports.jsx(LoadingOverlay,{}):et?g&&!(Array.isArray(g)?g:[g]).includes(et.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):it:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(it,g){module.exports=g()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(g){_useWebWorker=!!g},getWebWorker=function(){return _useWebWorker},setLocationHref=function(g){locationHref=g},getLocationHref=function(){return locationHref};function createTag(it){return document.createElement(it)}function extendPrototype(it,g){var et,ot=it.length,ct;for(et=0;et<ot;et+=1){ct=it[et].prototype;for(var ut in ct)Object.prototype.hasOwnProperty.call(ct,ut)&&(g.prototype[ut]=ct[ut])}}function getDescriptor(it,g){return Object.getOwnPropertyDescriptor(it,g)}function createProxyFunction(it){function g(){}return g.prototype=it,g}var audioControllerFactory=function(){function it(g){this.audios=[],this.audioFactory=g,this._volume=1,this._isMuted=!1}return it.prototype={addAudio:function(et){this.audios.push(et)},pause:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].pause()},resume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].resume()},setRate:function(et){var ot,ct=this.audios.length;for(ot=0;ot<ct;ot+=1)this.audios[ot].setRate(et)},createAudio:function(et){return this.audioFactory?this.audioFactory(et):window.Howl?new window.Howl({src:[et]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(et){this.audioFactory=et},setVolume:function(et){this._volume=et,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].volume(this._volume*(this._isMuted?0:1))}},function(){return new it}}(),createTypedArray=function(){function it(et,ot){var ct=0,ut=[],dt;switch(et){case"int16":case"uint8c":dt=1;break;default:dt=1.1;break}for(ct=0;ct<ot;ct+=1)ut.push(dt);return ut}function g(et,ot){return et==="float32"?new Float32Array(ot):et==="int16"?new Int16Array(ot):et==="uint8c"?new Uint8ClampedArray(ot):it(et,ot)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?g:it}();function createSizedArray(it){return Array.apply(null,{length:it})}function _typeof$6(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(et){return typeof et}:_typeof$6=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(it)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var it=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],g,et=it.length;for(g=0;g<et;g+=1)BMMath[it[g]]=Math[it[g]]})(),BMMath.random=Math.random,BMMath.abs=function(it){var g=_typeof$6(it);if(g==="object"&&it.length){var et=createSizedArray(it.length),ot,ct=it.length;for(ot=0;ot<ct;ot+=1)et[ot]=Math.abs(it[ot]);return et}return Math.abs(it)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(it){it.style.position="absolute",it.style.top=0,it.style.left=0,it.style.display="block",it.style.transformOrigin="0 0",it.style.webkitTransformOrigin="0 0",it.style.backfaceVisibility="visible",it.style.webkitBackfaceVisibility="visible",it.style.transformStyle="preserve-3d",it.style.webkitTransformStyle="preserve-3d",it.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(it,g,et,ot){this.type=it,this.currentTime=g,this.totalTime=et,this.direction=ot<0?-1:1}function BMCompleteEvent(it,g){this.type=it,this.direction=g<0?-1:1}function BMCompleteLoopEvent(it,g,et,ot){this.type=it,this.currentLoop=et,this.totalLoops=g,this.direction=ot<0?-1:1}function BMSegmentStartEvent(it,g,et){this.type=it,this.firstFrame=g,this.totalFrames=et}function BMDestroyEvent(it,g){this.type=it,this.target=g}function BMRenderFrameErrorEvent(it,g){this.type="renderFrameError",this.nativeError=it,this.currentTime=g}function BMConfigErrorEvent(it){this.type="configError",this.nativeError=it}var createElementID=function(){var it=0;return function(){return it+=1,idPrefix$1+"__lottie_element_"+it}}();function HSVtoRGB(it,g,et){var ot,ct,ut,dt,ft,St,kt,Tt;switch(dt=Math.floor(it*6),ft=it*6-dt,St=et*(1-g),kt=et*(1-ft*g),Tt=et*(1-(1-ft)*g),dt%6){case 0:ot=et,ct=Tt,ut=St;break;case 1:ot=kt,ct=et,ut=St;break;case 2:ot=St,ct=et,ut=Tt;break;case 3:ot=St,ct=kt,ut=et;break;case 4:ot=Tt,ct=St,ut=et;break;case 5:ot=et,ct=St,ut=kt;break}return[ot,ct,ut]}function RGBtoHSV(it,g,et){var ot=Math.max(it,g,et),ct=Math.min(it,g,et),ut=ot-ct,dt,ft=ot===0?0:ut/ot,St=ot/255;switch(ot){case ct:dt=0;break;case it:dt=g-et+ut*(g<et?6:0),dt/=6*ut;break;case g:dt=et-it+ut*2,dt/=6*ut;break;case et:dt=it-g+ut*4,dt/=6*ut;break}return[dt,ft,St]}function addSaturationToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[1]+=g,et[1]>1?et[1]=1:et[1]<=0&&(et[1]=0),HSVtoRGB(et[0],et[1],et[2])}function addBrightnessToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[2]+=g,et[2]>1?et[2]=1:et[2]<0&&(et[2]=0),HSVtoRGB(et[0],et[1],et[2])}function addHueToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[0]+=g/360,et[0]>1?et[0]-=1:et[0]<0&&(et[0]+=1),HSVtoRGB(et[0],et[1],et[2])}var rgbToHex=function(){var it=[],g,et;for(g=0;g<256;g+=1)et=g.toString(16),it[g]=et.length===1?"0"+et:et;return function(ot,ct,ut){return ot<0&&(ot=0),ct<0&&(ct=0),ut<0&&(ut=0),"#"+it[ot]+it[ct]+it[ut]}}(),setSubframeEnabled=function(g){subframeEnabled=!!g},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(g){expressionsPlugin=g},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(g){expressionsInterfaces=g},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(g){defaultCurveSegments=g},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(g){idPrefix$1=g};function createNS(it){return document.createElementNS(svgNS,it)}function _typeof$5(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(et){return typeof et}:_typeof$5=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(it)}var dataManager=function(){var it=1,g=[],et,ot,ct={onmessage:function(){},postMessage:function(Ft){et({data:Ft})}},ut={postMessage:function(Ft){ct.onmessage({data:Ft})}};function dt(jt){if(window.Worker&&window.Blob&&getWebWorker()){var Ft=new Blob(["var _workerSelf = self; self.onmessage = ",jt.toString()],{type:"text/javascript"}),$t=URL.createObjectURL(Ft);return new Worker($t)}return et=jt,ct}function ft(){ot||(ot=dt(function(Ft){function $t(){function Ut(Sn,fn){var xn,an,cn=Sn.length,bn,mn,Tn,An;for(an=0;an<cn;an+=1)if(xn=Sn[an],"ks"in xn&&!xn.completed){if(xn.completed=!0,xn.hasMask){var Pn=xn.masksProperties;for(mn=Pn.length,bn=0;bn<mn;bn+=1)if(Pn[bn].pt.k.i)tn(Pn[bn].pt.k);else for(An=Pn[bn].pt.k.length,Tn=0;Tn<An;Tn+=1)Pn[bn].pt.k[Tn].s&&tn(Pn[bn].pt.k[Tn].s[0]),Pn[bn].pt.k[Tn].e&&tn(Pn[bn].pt.k[Tn].e[0])}xn.ty===0?(xn.layers=Jt(xn.refId,fn),Ut(xn.layers,fn)):xn.ty===4?Zt(xn.shapes):xn.ty===5&&En(xn)}}function Bt(Sn,fn){if(Sn){var xn=0,an=Sn.length;for(xn=0;xn<an;xn+=1)Sn[xn].t===1&&(Sn[xn].data.layers=Jt(Sn[xn].data.refId,fn),Ut(Sn[xn].data.layers,fn))}}function Ht(Sn,fn){for(var xn=0,an=fn.length;xn<an;){if(fn[xn].id===Sn)return fn[xn];xn+=1}return null}function Jt(Sn,fn){var xn=Ht(Sn,fn);return xn?xn.layers.__used?JSON.parse(JSON.stringify(xn.layers)):(xn.layers.__used=!0,xn.layers):null}function Zt(Sn){var fn,xn=Sn.length,an,cn;for(fn=xn-1;fn>=0;fn-=1)if(Sn[fn].ty==="sh")if(Sn[fn].ks.k.i)tn(Sn[fn].ks.k);else for(cn=Sn[fn].ks.k.length,an=0;an<cn;an+=1)Sn[fn].ks.k[an].s&&tn(Sn[fn].ks.k[an].s[0]),Sn[fn].ks.k[an].e&&tn(Sn[fn].ks.k[an].e[0]);else Sn[fn].ty==="gr"&&Zt(Sn[fn].it)}function tn(Sn){var fn,xn=Sn.i.length;for(fn=0;fn<xn;fn+=1)Sn.i[fn][0]+=Sn.v[fn][0],Sn.i[fn][1]+=Sn.v[fn][1],Sn.o[fn][0]+=Sn.v[fn][0],Sn.o[fn][1]+=Sn.v[fn][1]}function nn(Sn,fn){var xn=fn?fn.split("."):[100,100,100];return Sn[0]>xn[0]?!0:xn[0]>Sn[0]?!1:Sn[1]>xn[1]?!0:xn[1]>Sn[1]?!1:Sn[2]>xn[2]?!0:xn[2]>Sn[2]?!1:null}var rn=function(){var Sn=[4,4,14];function fn(an){var cn=an.t.d;an.t.d={k:[{s:cn,t:0}]}}function xn(an){var cn,bn=an.length;for(cn=0;cn<bn;cn+=1)an[cn].ty===5&&fn(an[cn])}return function(an){if(nn(Sn,an.v)&&(xn(an.layers),an.assets)){var cn,bn=an.assets.length;for(cn=0;cn<bn;cn+=1)an.assets[cn].layers&&xn(an.assets[cn].layers)}}}(),on=function(){var Sn=[4,7,99];return function(fn){if(fn.chars&&!nn(Sn,fn.v)){var xn,an=fn.chars.length;for(xn=0;xn<an;xn+=1){var cn=fn.chars[xn];cn.data&&cn.data.shapes&&(Zt(cn.data.shapes),cn.data.ip=0,cn.data.op=99999,cn.data.st=0,cn.data.sr=1,cn.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},fn.chars[xn].t||(cn.data.shapes.push({ty:"no"}),cn.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),pn=function(){var Sn=[5,7,15];function fn(an){var cn=an.t.p;typeof cn.a=="number"&&(cn.a={a:0,k:cn.a}),typeof cn.p=="number"&&(cn.p={a:0,k:cn.p}),typeof cn.r=="number"&&(cn.r={a:0,k:cn.r})}function xn(an){var cn,bn=an.length;for(cn=0;cn<bn;cn+=1)an[cn].ty===5&&fn(an[cn])}return function(an){if(nn(Sn,an.v)&&(xn(an.layers),an.assets)){var cn,bn=an.assets.length;for(cn=0;cn<bn;cn+=1)an.assets[cn].layers&&xn(an.assets[cn].layers)}}}(),dn=function(){var Sn=[4,1,9];function fn(an){var cn,bn=an.length,mn,Tn;for(cn=0;cn<bn;cn+=1)if(an[cn].ty==="gr")fn(an[cn].it);else if(an[cn].ty==="fl"||an[cn].ty==="st")if(an[cn].c.k&&an[cn].c.k[0].i)for(Tn=an[cn].c.k.length,mn=0;mn<Tn;mn+=1)an[cn].c.k[mn].s&&(an[cn].c.k[mn].s[0]/=255,an[cn].c.k[mn].s[1]/=255,an[cn].c.k[mn].s[2]/=255,an[cn].c.k[mn].s[3]/=255),an[cn].c.k[mn].e&&(an[cn].c.k[mn].e[0]/=255,an[cn].c.k[mn].e[1]/=255,an[cn].c.k[mn].e[2]/=255,an[cn].c.k[mn].e[3]/=255);else an[cn].c.k[0]/=255,an[cn].c.k[1]/=255,an[cn].c.k[2]/=255,an[cn].c.k[3]/=255}function xn(an){var cn,bn=an.length;for(cn=0;cn<bn;cn+=1)an[cn].ty===4&&fn(an[cn].shapes)}return function(an){if(nn(Sn,an.v)&&(xn(an.layers),an.assets)){var cn,bn=an.assets.length;for(cn=0;cn<bn;cn+=1)an.assets[cn].layers&&xn(an.assets[cn].layers)}}}(),hn=function(){var Sn=[4,4,18];function fn(an){var cn,bn=an.length,mn,Tn;for(cn=bn-1;cn>=0;cn-=1)if(an[cn].ty==="sh")if(an[cn].ks.k.i)an[cn].ks.k.c=an[cn].closed;else for(Tn=an[cn].ks.k.length,mn=0;mn<Tn;mn+=1)an[cn].ks.k[mn].s&&(an[cn].ks.k[mn].s[0].c=an[cn].closed),an[cn].ks.k[mn].e&&(an[cn].ks.k[mn].e[0].c=an[cn].closed);else an[cn].ty==="gr"&&fn(an[cn].it)}function xn(an){var cn,bn,mn=an.length,Tn,An,Pn,Mn;for(bn=0;bn<mn;bn+=1){if(cn=an[bn],cn.hasMask){var Rn=cn.masksProperties;for(An=Rn.length,Tn=0;Tn<An;Tn+=1)if(Rn[Tn].pt.k.i)Rn[Tn].pt.k.c=Rn[Tn].cl;else for(Mn=Rn[Tn].pt.k.length,Pn=0;Pn<Mn;Pn+=1)Rn[Tn].pt.k[Pn].s&&(Rn[Tn].pt.k[Pn].s[0].c=Rn[Tn].cl),Rn[Tn].pt.k[Pn].e&&(Rn[Tn].pt.k[Pn].e[0].c=Rn[Tn].cl)}cn.ty===4&&fn(cn.shapes)}}return function(an){if(nn(Sn,an.v)&&(xn(an.layers),an.assets)){var cn,bn=an.assets.length;for(cn=0;cn<bn;cn+=1)an.assets[cn].layers&&xn(an.assets[cn].layers)}}}();function un(Sn){Sn.__complete||(dn(Sn),rn(Sn),on(Sn),pn(Sn),hn(Sn),Ut(Sn.layers,Sn.assets),Bt(Sn.chars,Sn.assets),Sn.__complete=!0)}function En(Sn){Sn.t.a.length===0&&"m"in Sn.t.p}var wn={};return wn.completeData=un,wn.checkColors=dn,wn.checkChars=on,wn.checkPathProperties=pn,wn.checkShapes=hn,wn.completeLayers=Ut,wn}if(ut.dataManager||(ut.dataManager=$t()),ut.assetLoader||(ut.assetLoader=function(){function Ut(Ht){var Jt=Ht.getResponseHeader("content-type");return Jt&&Ht.responseType==="json"&&Jt.indexOf("json")!==-1||Ht.response&&_typeof$5(Ht.response)==="object"?Ht.response:Ht.response&&typeof Ht.response=="string"?JSON.parse(Ht.response):Ht.responseText?JSON.parse(Ht.responseText):null}function Bt(Ht,Jt,Zt,tn){var nn,rn=new XMLHttpRequest;try{rn.responseType="json"}catch{}rn.onreadystatechange=function(){if(rn.readyState===4)if(rn.status===200)nn=Ut(rn),Zt(nn);else try{nn=Ut(rn),Zt(nn)}catch(on){tn&&tn(on)}};try{rn.open(["G","E","T"].join(""),Ht,!0)}catch{rn.open(["G","E","T"].join(""),Jt+"/"+Ht,!0)}rn.send()}return{load:Bt}}()),Ft.data.type==="loadAnimation")ut.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Ut){ut.dataManager.completeData(Ut),ut.postMessage({id:Ft.data.id,payload:Ut,status:"success"})},function(){ut.postMessage({id:Ft.data.id,status:"error"})});else if(Ft.data.type==="complete"){var zt=Ft.data.animation;ut.dataManager.completeData(zt),ut.postMessage({id:Ft.data.id,payload:zt,status:"success"})}else Ft.data.type==="loadData"&&ut.assetLoader.load(Ft.data.path,Ft.data.fullPath,function(Ut){ut.postMessage({id:Ft.data.id,payload:Ut,status:"success"})},function(){ut.postMessage({id:Ft.data.id,status:"error"})})}),ot.onmessage=function(jt){var Ft=jt.data,$t=Ft.id,zt=g[$t];g[$t]=null,Ft.status==="success"?zt.onComplete(Ft.payload):zt.onError&&zt.onError()})}function St(jt,Ft){it+=1;var $t="processId_"+it;return g[$t]={onComplete:jt,onError:Ft},$t}function kt(jt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"loadAnimation",path:jt,fullPath:window.location.origin+window.location.pathname,id:zt})}function Tt(jt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"loadData",path:jt,fullPath:window.location.origin+window.location.pathname,id:zt})}function Rt(jt,Ft,$t){ft();var zt=St(Ft,$t);ot.postMessage({type:"complete",animation:jt,id:zt})}return{loadAnimation:kt,loadData:Tt,completeAnimation:Rt}}(),ImagePreloader=function(){var it=function(){var Bt=createTag("canvas");Bt.width=1,Bt.height=1;var Ht=Bt.getContext("2d");return Ht.fillStyle="rgba(0,0,0,0)",Ht.fillRect(0,0,1,1),Bt}();function g(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function et(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ot(Bt,Ht,Jt){var Zt="";if(Bt.e)Zt=Bt.p;else if(Ht){var tn=Bt.p;tn.indexOf("images/")!==-1&&(tn=tn.split("/")[1]),Zt=Ht+tn}else Zt=Jt,Zt+=Bt.u?Bt.u:"",Zt+=Bt.p;return Zt}function ct(Bt){var Ht=0,Jt=setInterval((function(){var Zt=Bt.getBBox();(Zt.width||Ht>500)&&(this._imageLoaded(),clearInterval(Jt)),Ht+=1}).bind(this),50)}function ut(Bt){var Ht=ot(Bt,this.assetsPath,this.path),Jt=createNS("image");isSafari?this.testImageLoaded(Jt):Jt.addEventListener("load",this._imageLoaded,!1),Jt.addEventListener("error",(function(){Zt.img=it,this._imageLoaded()}).bind(this),!1),Jt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ht),this._elementHelper.append?this._elementHelper.append(Jt):this._elementHelper.appendChild(Jt);var Zt={img:Jt,assetData:Bt};return Zt}function dt(Bt){var Ht=ot(Bt,this.assetsPath,this.path),Jt=createTag("img");Jt.crossOrigin="anonymous",Jt.addEventListener("load",this._imageLoaded,!1),Jt.addEventListener("error",(function(){Zt.img=it,this._imageLoaded()}).bind(this),!1),Jt.src=Ht;var Zt={img:Jt,assetData:Bt};return Zt}function ft(Bt){var Ht={assetData:Bt},Jt=ot(Bt,this.assetsPath,this.path);return dataManager.loadData(Jt,(function(Zt){Ht.img=Zt,this._footageLoaded()}).bind(this),(function(){Ht.img={},this._footageLoaded()}).bind(this)),Ht}function St(Bt,Ht){this.imagesLoadedCb=Ht;var Jt,Zt=Bt.length;for(Jt=0;Jt<Zt;Jt+=1)Bt[Jt].layers||(!Bt[Jt].t||Bt[Jt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Bt[Jt]))):Bt[Jt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Bt[Jt]))))}function kt(Bt){this.path=Bt||""}function Tt(Bt){this.assetsPath=Bt||""}function Rt(Bt){for(var Ht=0,Jt=this.images.length;Ht<Jt;){if(this.images[Ht].assetData===Bt)return this.images[Ht].img;Ht+=1}return null}function jt(){this.imagesLoadedCb=null,this.images.length=0}function Ft(){return this.totalImages===this.loadedAssets}function $t(){return this.totalFootages===this.loadedFootagesCount}function zt(Bt,Ht){Bt==="svg"?(this._elementHelper=Ht,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ut(){this._imageLoaded=g.bind(this),this._footageLoaded=et.bind(this),this.testImageLoaded=ct.bind(this),this.createFootageData=ft.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ut.prototype={loadAssets:St,setAssetsPath:Tt,setPath:kt,loadedImages:Ft,loadedFootages:$t,destroy:jt,getAsset:Rt,createImgData:dt,createImageData:ut,imageLoaded:g,footageLoaded:et,setCacheType:zt},Ut}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(g,et){if(this._cbs[g])for(var ot=this._cbs[g],ct=0;ct<ot.length;ct+=1)ot[ct](et)},addEventListener:function(g,et){return this._cbs[g]||(this._cbs[g]=[]),this._cbs[g].push(et),(function(){this.removeEventListener(g,et)}).bind(this)},removeEventListener:function(g,et){if(!et)this._cbs[g]=null;else if(this._cbs[g]){for(var ot=0,ct=this._cbs[g].length;ot<ct;)this._cbs[g][ot]===et&&(this._cbs[g].splice(ot,1),ot-=1,ct-=1),ot+=1;this._cbs[g].length||(this._cbs[g]=null)}}};var markerParser=function(){function it(g){for(var et=g.split(`\r
`),ot={},ct,ut=0,dt=0;dt<et.length;dt+=1)ct=et[dt].split(":"),ct.length===2&&(ot[ct[0]]=ct[1].trim(),ut+=1);if(ut===0)throw new Error;return ot}return function(g){for(var et=[],ot=0;ot<g.length;ot+=1){var ct=g[ot],ut={time:ct.tm,duration:ct.dr};try{ut.payload=JSON.parse(g[ot].cm)}catch{try{ut.payload=it(g[ot].cm)}catch{ut.payload={name:g[ot].cm}}}et.push(ut)}return et}}(),ProjectInterface=function(){function it(g){this.compositions.push(g)}return function(){function g(et){for(var ot=0,ct=this.compositions.length;ot<ct;){if(this.compositions[ot].data&&this.compositions[ot].data.nm===et)return this.compositions[ot].prepareFrame&&this.compositions[ot].data.xt&&this.compositions[ot].prepareFrame(this.currentFrame),this.compositions[ot].compInterface;ot+=1}return null}return g.compositions=[],g.currentFrame=0,g.registerComposition=it,g}}(),renderers={},registerRenderer=function(g,et){renderers[g]=et};function getRenderer(it){return renderers[it]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var it in renderers)if(renderers[it])return it;return""}function _typeof$4(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(et){return typeof et}:_typeof$4=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(it)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(it){(it.wrapper||it.container)&&(this.wrapper=it.wrapper||it.container);var g="svg";it.animType?g=it.animType:it.renderer&&(g=it.renderer);var et=getRenderer(g);this.renderer=new et(this,it.rendererSettings),this.imagePreloader.setCacheType(g,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=g,it.loop===""||it.loop===null||it.loop===void 0||it.loop===!0?this.loop=!0:it.loop===!1?this.loop=!1:this.loop=parseInt(it.loop,10),this.autoplay="autoplay"in it?it.autoplay:!0,this.name=it.name?it.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(it,"autoloadSegments")?it.autoloadSegments:!0,this.assetsPath=it.assetsPath,this.initialSegment=it.initialSegment,it.audioFactory&&this.audioController.setAudioFactory(it.audioFactory),it.animationData?this.setupAnimation(it.animationData):it.path&&(it.path.lastIndexOf("\\")!==-1?this.path=it.path.substr(0,it.path.lastIndexOf("\\")+1):this.path=it.path.substr(0,it.path.lastIndexOf("/")+1),this.fileName=it.path.substr(it.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(it.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(it){dataManager.completeAnimation(it,this.configAnimation)},AnimationItem.prototype.setData=function(it,g){g&&_typeof$4(g)!=="object"&&(g=JSON.parse(g));var et={wrapper:it,animationData:g},ot=it.attributes;et.path=ot.getNamedItem("data-animation-path")?ot.getNamedItem("data-animation-path").value:ot.getNamedItem("data-bm-path")?ot.getNamedItem("data-bm-path").value:ot.getNamedItem("bm-path")?ot.getNamedItem("bm-path").value:"",et.animType=ot.getNamedItem("data-anim-type")?ot.getNamedItem("data-anim-type").value:ot.getNamedItem("data-bm-type")?ot.getNamedItem("data-bm-type").value:ot.getNamedItem("bm-type")?ot.getNamedItem("bm-type").value:ot.getNamedItem("data-bm-renderer")?ot.getNamedItem("data-bm-renderer").value:ot.getNamedItem("bm-renderer")?ot.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ct=ot.getNamedItem("data-anim-loop")?ot.getNamedItem("data-anim-loop").value:ot.getNamedItem("data-bm-loop")?ot.getNamedItem("data-bm-loop").value:ot.getNamedItem("bm-loop")?ot.getNamedItem("bm-loop").value:"";ct==="false"?et.loop=!1:ct==="true"?et.loop=!0:ct!==""&&(et.loop=parseInt(ct,10));var ut=ot.getNamedItem("data-anim-autoplay")?ot.getNamedItem("data-anim-autoplay").value:ot.getNamedItem("data-bm-autoplay")?ot.getNamedItem("data-bm-autoplay").value:ot.getNamedItem("bm-autoplay")?ot.getNamedItem("bm-autoplay").value:!0;et.autoplay=ut!=="false",et.name=ot.getNamedItem("data-name")?ot.getNamedItem("data-name").value:ot.getNamedItem("data-bm-name")?ot.getNamedItem("data-bm-name").value:ot.getNamedItem("bm-name")?ot.getNamedItem("bm-name").value:"";var dt=ot.getNamedItem("data-anim-prerender")?ot.getNamedItem("data-anim-prerender").value:ot.getNamedItem("data-bm-prerender")?ot.getNamedItem("data-bm-prerender").value:ot.getNamedItem("bm-prerender")?ot.getNamedItem("bm-prerender").value:"";dt==="false"&&(et.prerender=!1),et.path?this.setParams(et):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(it){it.op>this.animationData.op&&(this.animationData.op=it.op,this.totalFrames=Math.floor(it.op-this.animationData.ip));var g=this.animationData.layers,et,ot=g.length,ct=it.layers,ut,dt=ct.length;for(ut=0;ut<dt;ut+=1)for(et=0;et<ot;){if(g[et].id===ct[ut].id){g[et]=ct[ut];break}et+=1}if((it.chars||it.fonts)&&(this.renderer.globalData.fontManager.addChars(it.chars),this.renderer.globalData.fontManager.addFonts(it.fonts,this.renderer.globalData.defs)),it.assets)for(ot=it.assets.length,et=0;et<ot;et+=1)this.animationData.assets.push(it.assets[et]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(it){this.animationData=it;var g=getExpressionsPlugin();g&&g.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var it=this.animationData.segments;if(!it||it.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var g=it.shift();this.timeCompleted=g.time*this.frameRate;var et=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(et,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var it=this.animationData.segments;it||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(it){if(this.renderer)try{this.animationData=it,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(it),it.assets||(it.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(it.assets),this.markers=markerParser(it.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(g){this.triggerConfigError(g)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var it=getExpressionsPlugin();it&&it.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(it,g){var et=typeof it=="number"?it:void 0,ot=typeof g=="number"?g:void 0;this.renderer.updateContainerSize(et,ot)},AnimationItem.prototype.setSubframe=function(it){this.isSubframeEnabled=!!it},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(it){this.triggerRenderFrameError(it)}},AnimationItem.prototype.play=function(it){it&&this.name!==it||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(it){it&&this.name!==it||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(it){it&&this.name!==it||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(it){it&&this.name!==it||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(it){for(var g,et=0;et<this.markers.length;et+=1)if(g=this.markers[et],g.payload&&g.payload.name===it)return g;return null},AnimationItem.prototype.goToAndStop=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&this.goToAndStop(ct.time,!0)}else g?this.setCurrentRawFrameValue(it):this.setCurrentRawFrameValue(it*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&(ct.duration?this.playSegments([ct.time,ct.time+ct.duration],!0):this.goToAndStop(ct.time,!0))}else this.goToAndStop(ot,g,et);this.play()}},AnimationItem.prototype.advanceTime=function(it){if(!(this.isPaused===!0||this.isLoaded===!1)){var g=this.currentRawFrame+it*this.frameModifier,et=!1;g>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(g>this.totalFrames?g%this.totalFrames:0)||(et=!0,g=this.totalFrames-1):g>=this.totalFrames?(this.playCount+=1,this.checkSegments(g%this.totalFrames)||(this.setCurrentRawFrameValue(g%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(g):g<0?this.checkSegments(g%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+g%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(et=!0,g=0)):this.setCurrentRawFrameValue(g),et&&(this.setCurrentRawFrameValue(g),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(it,g){this.playCount=0,it[1]<it[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=it[0]-it[1],this.timeCompleted=this.totalFrames,this.firstFrame=it[1],this.setCurrentRawFrameValue(this.totalFrames-.001-g)):it[1]>it[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=it[1]-it[0],this.timeCompleted=this.totalFrames,this.firstFrame=it[0],this.setCurrentRawFrameValue(.001+g)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(it,g){var et=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<it?et=it:this.currentRawFrame+this.firstFrame>g&&(et=g-it)),this.firstFrame=it,this.totalFrames=g-it,this.timeCompleted=this.totalFrames,et!==-1&&this.goToAndStop(et,!0)},AnimationItem.prototype.playSegments=function(it,g){if(g&&(this.segments.length=0),_typeof$4(it[0])==="object"){var et,ot=it.length;for(et=0;et<ot;et+=1)this.segments.push(it[et])}else this.segments.push(it);this.segments.length&&g&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(it){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),it&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(it){return this.segments.length?(this.adjustSegment(this.segments.shift(),it),!0):!1},AnimationItem.prototype.destroy=function(it){it&&this.name!==it||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(it){this.currentRawFrame=it,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(it){this.playSpeed=it,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(it){this.playDirection=it<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(it){this.loop=it},AnimationItem.prototype.setVolume=function(it,g){g&&this.name!==g||this.audioController.setVolume(it)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(it){it&&this.name!==it||this.audioController.mute()},AnimationItem.prototype.unmute=function(it){it&&this.name!==it||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(it){var g="";if(it.e)g=it.p;else if(this.assetsPath){var et=it.p;et.indexOf("images/")!==-1&&(et=et.split("/")[1]),g=this.assetsPath+et}else g=this.path,g+=it.u?it.u:"",g+=it.p;return g},AnimationItem.prototype.getAssetData=function(it){for(var g=0,et=this.assets.length;g<et;){if(it===this.assets[g].id)return this.assets[g];g+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(it){return it?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(it,g,et){try{var ot=this.renderer.getElementByPath(it);ot.updateDocumentData(g,et)}catch{}},AnimationItem.prototype.trigger=function(it){if(this._cbs&&this._cbs[it])switch(it){case"enterFrame":this.triggerEvent(it,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(it,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(it,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(it,new BMCompleteEvent(it,this.frameMult));break;case"segmentStart":this.triggerEvent(it,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(it,new BMDestroyEvent(it,this));break;default:this.triggerEvent(it)}it==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameMult)),it==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult)),it==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(it,this.frameMult)),it==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames)),it==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(it,this))},AnimationItem.prototype.triggerRenderFrameError=function(it){var g=new BMRenderFrameErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)},AnimationItem.prototype.triggerConfigError=function(it){var g=new BMConfigErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)};var animationManager=function(){var it={},g=[],et=0,ot=0,ct=0,ut=!0,dt=!1;function ft(fn){for(var xn=0,an=fn.target;xn<ot;)g[xn].animation===an&&(g.splice(xn,1),xn-=1,ot-=1,an.isPaused||Rt()),xn+=1}function St(fn,xn){if(!fn)return null;for(var an=0;an<ot;){if(g[an].elem===fn&&g[an].elem!==null)return g[an].animation;an+=1}var cn=new AnimationItem;return jt(cn,fn),cn.setData(fn,xn),cn}function kt(){var fn,xn=g.length,an=[];for(fn=0;fn<xn;fn+=1)an.push(g[fn].animation);return an}function Tt(){ct+=1,dn()}function Rt(){ct-=1}function jt(fn,xn){fn.addEventListener("destroy",ft),fn.addEventListener("_active",Tt),fn.addEventListener("_idle",Rt),g.push({elem:xn,animation:fn}),ot+=1}function Ft(fn){var xn=new AnimationItem;return jt(xn,null),xn.setParams(fn),xn}function $t(fn,xn){var an;for(an=0;an<ot;an+=1)g[an].animation.setSpeed(fn,xn)}function zt(fn,xn){var an;for(an=0;an<ot;an+=1)g[an].animation.setDirection(fn,xn)}function Ut(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.play(fn)}function Bt(fn){var xn=fn-et,an;for(an=0;an<ot;an+=1)g[an].animation.advanceTime(xn);et=fn,ct&&!dt?window.requestAnimationFrame(Bt):ut=!0}function Ht(fn){et=fn,window.requestAnimationFrame(Bt)}function Jt(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.pause(fn)}function Zt(fn,xn,an){var cn;for(cn=0;cn<ot;cn+=1)g[cn].animation.goToAndStop(fn,xn,an)}function tn(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.stop(fn)}function nn(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.togglePause(fn)}function rn(fn){var xn;for(xn=ot-1;xn>=0;xn-=1)g[xn].animation.destroy(fn)}function on(fn,xn,an){var cn=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),bn,mn=cn.length;for(bn=0;bn<mn;bn+=1)an&&cn[bn].setAttribute("data-bm-type",an),St(cn[bn],fn);if(xn&&mn===0){an||(an="svg");var Tn=document.getElementsByTagName("body")[0];Tn.innerText="";var An=createTag("div");An.style.width="100%",An.style.height="100%",An.setAttribute("data-bm-type",an),Tn.appendChild(An),St(An,fn)}}function pn(){var fn;for(fn=0;fn<ot;fn+=1)g[fn].animation.resize()}function dn(){!dt&&ct&&ut&&(window.requestAnimationFrame(Ht),ut=!1)}function hn(){dt=!0}function un(){dt=!1,dn()}function En(fn,xn){var an;for(an=0;an<ot;an+=1)g[an].animation.setVolume(fn,xn)}function wn(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.mute(fn)}function Sn(fn){var xn;for(xn=0;xn<ot;xn+=1)g[xn].animation.unmute(fn)}return it.registerAnimation=St,it.loadAnimation=Ft,it.setSpeed=$t,it.setDirection=zt,it.play=Ut,it.pause=Jt,it.stop=tn,it.togglePause=nn,it.searchAnimations=on,it.resize=pn,it.goToAndStop=Zt,it.destroy=rn,it.freeze=hn,it.unfreeze=un,it.setVolume=En,it.mute=wn,it.unmute=Sn,it.getRegisteredAnimations=kt,it}(),BezierFactory=function(){var it={};it.getBezierEasing=et;var g={};function et(Ht,Jt,Zt,tn,nn){var rn=nn||("bez_"+Ht+"_"+Jt+"_"+Zt+"_"+tn).replace(/\./g,"p");if(g[rn])return g[rn];var on=new Bt([Ht,Jt,Zt,tn]);return g[rn]=on,on}var ot=4,ct=.001,ut=1e-7,dt=10,ft=11,St=1/(ft-1),kt=typeof Float32Array=="function";function Tt(Ht,Jt){return 1-3*Jt+3*Ht}function Rt(Ht,Jt){return 3*Jt-6*Ht}function jt(Ht){return 3*Ht}function Ft(Ht,Jt,Zt){return((Tt(Jt,Zt)*Ht+Rt(Jt,Zt))*Ht+jt(Jt))*Ht}function $t(Ht,Jt,Zt){return 3*Tt(Jt,Zt)*Ht*Ht+2*Rt(Jt,Zt)*Ht+jt(Jt)}function zt(Ht,Jt,Zt,tn,nn){var rn,on,pn=0;do on=Jt+(Zt-Jt)/2,rn=Ft(on,tn,nn)-Ht,rn>0?Zt=on:Jt=on;while(Math.abs(rn)>ut&&++pn<dt);return on}function Ut(Ht,Jt,Zt,tn){for(var nn=0;nn<ot;++nn){var rn=$t(Jt,Zt,tn);if(rn===0)return Jt;var on=Ft(Jt,Zt,tn)-Ht;Jt-=on/rn}return Jt}function Bt(Ht){this._p=Ht,this._mSampleValues=kt?new Float32Array(ft):new Array(ft),this._precomputed=!1,this.get=this.get.bind(this)}return Bt.prototype={get:function(Jt){var Zt=this._p[0],tn=this._p[1],nn=this._p[2],rn=this._p[3];return this._precomputed||this._precompute(),Zt===tn&&nn===rn?Jt:Jt===0?0:Jt===1?1:Ft(this._getTForX(Jt),tn,rn)},_precompute:function(){var Jt=this._p[0],Zt=this._p[1],tn=this._p[2],nn=this._p[3];this._precomputed=!0,(Jt!==Zt||tn!==nn)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Jt=this._p[0],Zt=this._p[2],tn=0;tn<ft;++tn)this._mSampleValues[tn]=Ft(tn*St,Jt,Zt)},_getTForX:function(Jt){for(var Zt=this._p[0],tn=this._p[2],nn=this._mSampleValues,rn=0,on=1,pn=ft-1;on!==pn&&nn[on]<=Jt;++on)rn+=St;--on;var dn=(Jt-nn[on])/(nn[on+1]-nn[on]),hn=rn+dn*St,un=$t(hn,Zt,tn);return un>=ct?Ut(Jt,hn,Zt,tn):un===0?hn:zt(Jt,rn,rn+St,Zt,tn)}},it}(),pooling=function(){function it(g){return g.concat(createSizedArray(g.length))}return{double:it}}(),poolFactory=function(){return function(it,g,et){var ot=0,ct=it,ut=createSizedArray(ct),dt={newElement:ft,release:St};function ft(){var kt;return ot?(ot-=1,kt=ut[ot]):kt=g(),kt}function St(kt){ot===ct&&(ut=pooling.double(ut),ct*=2),et&&et(kt),ut[ot]=kt,ot+=1}return dt}}(),bezierLengthPool=function(){function it(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,it)}(),segmentsLengthPool=function(){function it(){return{lengths:[],totalLength:0}}function g(et){var ot,ct=et.lengths.length;for(ot=0;ot<ct;ot+=1)bezierLengthPool.release(et.lengths[ot]);et.lengths.length=0}return poolFactory(8,it,g)}();function bezFunction(){var it=Math;function g(jt,Ft,$t,zt,Ut,Bt){var Ht=jt*zt+Ft*Ut+$t*Bt-Ut*zt-Bt*jt-$t*Ft;return Ht>-.001&&Ht<.001}function et(jt,Ft,$t,zt,Ut,Bt,Ht,Jt,Zt){if($t===0&&Bt===0&&Zt===0)return g(jt,Ft,zt,Ut,Ht,Jt);var tn=it.sqrt(it.pow(zt-jt,2)+it.pow(Ut-Ft,2)+it.pow(Bt-$t,2)),nn=it.sqrt(it.pow(Ht-jt,2)+it.pow(Jt-Ft,2)+it.pow(Zt-$t,2)),rn=it.sqrt(it.pow(Ht-zt,2)+it.pow(Jt-Ut,2)+it.pow(Zt-Bt,2)),on;return tn>nn?tn>rn?on=tn-nn-rn:on=rn-nn-tn:rn>nn?on=rn-nn-tn:on=nn-tn-rn,on>-1e-4&&on<1e-4}var ot=function(){return function(jt,Ft,$t,zt){var Ut=getDefaultCurveSegments(),Bt,Ht,Jt,Zt,tn,nn=0,rn,on=[],pn=[],dn=bezierLengthPool.newElement();for(Jt=$t.length,Bt=0;Bt<Ut;Bt+=1){for(tn=Bt/(Ut-1),rn=0,Ht=0;Ht<Jt;Ht+=1)Zt=bmPow(1-tn,3)*jt[Ht]+3*bmPow(1-tn,2)*tn*$t[Ht]+3*(1-tn)*bmPow(tn,2)*zt[Ht]+bmPow(tn,3)*Ft[Ht],on[Ht]=Zt,pn[Ht]!==null&&(rn+=bmPow(on[Ht]-pn[Ht],2)),pn[Ht]=on[Ht];rn&&(rn=bmSqrt(rn),nn+=rn),dn.percents[Bt]=tn,dn.lengths[Bt]=nn}return dn.addedLength=nn,dn}}();function ct(jt){var Ft=segmentsLengthPool.newElement(),$t=jt.c,zt=jt.v,Ut=jt.o,Bt=jt.i,Ht,Jt=jt._length,Zt=Ft.lengths,tn=0;for(Ht=0;Ht<Jt-1;Ht+=1)Zt[Ht]=ot(zt[Ht],zt[Ht+1],Ut[Ht],Bt[Ht+1]),tn+=Zt[Ht].addedLength;return $t&&Jt&&(Zt[Ht]=ot(zt[Ht],zt[0],Ut[Ht],Bt[0]),tn+=Zt[Ht].addedLength),Ft.totalLength=tn,Ft}function ut(jt){this.segmentLength=0,this.points=new Array(jt)}function dt(jt,Ft){this.partialLength=jt,this.point=Ft}var ft=function(){var jt={};return function(Ft,$t,zt,Ut){var Bt=(Ft[0]+"_"+Ft[1]+"_"+$t[0]+"_"+$t[1]+"_"+zt[0]+"_"+zt[1]+"_"+Ut[0]+"_"+Ut[1]).replace(/\./g,"p");if(!jt[Bt]){var Ht=getDefaultCurveSegments(),Jt,Zt,tn,nn,rn,on=0,pn,dn,hn=null;Ft.length===2&&(Ft[0]!==$t[0]||Ft[1]!==$t[1])&&g(Ft[0],Ft[1],$t[0],$t[1],Ft[0]+zt[0],Ft[1]+zt[1])&&g(Ft[0],Ft[1],$t[0],$t[1],$t[0]+Ut[0],$t[1]+Ut[1])&&(Ht=2);var un=new ut(Ht);for(tn=zt.length,Jt=0;Jt<Ht;Jt+=1){for(dn=createSizedArray(tn),rn=Jt/(Ht-1),pn=0,Zt=0;Zt<tn;Zt+=1)nn=bmPow(1-rn,3)*Ft[Zt]+3*bmPow(1-rn,2)*rn*(Ft[Zt]+zt[Zt])+3*(1-rn)*bmPow(rn,2)*($t[Zt]+Ut[Zt])+bmPow(rn,3)*$t[Zt],dn[Zt]=nn,hn!==null&&(pn+=bmPow(dn[Zt]-hn[Zt],2));pn=bmSqrt(pn),on+=pn,un.points[Jt]=new dt(pn,dn),hn=dn}un.segmentLength=on,jt[Bt]=un}return jt[Bt]}}();function St(jt,Ft){var $t=Ft.percents,zt=Ft.lengths,Ut=$t.length,Bt=bmFloor((Ut-1)*jt),Ht=jt*Ft.addedLength,Jt=0;if(Bt===Ut-1||Bt===0||Ht===zt[Bt])return $t[Bt];for(var Zt=zt[Bt]>Ht?-1:1,tn=!0;tn;)if(zt[Bt]<=Ht&&zt[Bt+1]>Ht?(Jt=(Ht-zt[Bt])/(zt[Bt+1]-zt[Bt]),tn=!1):Bt+=Zt,Bt<0||Bt>=Ut-1){if(Bt===Ut-1)return $t[Bt];tn=!1}return $t[Bt]+($t[Bt+1]-$t[Bt])*Jt}function kt(jt,Ft,$t,zt,Ut,Bt){var Ht=St(Ut,Bt),Jt=1-Ht,Zt=it.round((Jt*Jt*Jt*jt[0]+(Ht*Jt*Jt+Jt*Ht*Jt+Jt*Jt*Ht)*$t[0]+(Ht*Ht*Jt+Jt*Ht*Ht+Ht*Jt*Ht)*zt[0]+Ht*Ht*Ht*Ft[0])*1e3)/1e3,tn=it.round((Jt*Jt*Jt*jt[1]+(Ht*Jt*Jt+Jt*Ht*Jt+Jt*Jt*Ht)*$t[1]+(Ht*Ht*Jt+Jt*Ht*Ht+Ht*Jt*Ht)*zt[1]+Ht*Ht*Ht*Ft[1])*1e3)/1e3;return[Zt,tn]}var Tt=createTypedArray("float32",8);function Rt(jt,Ft,$t,zt,Ut,Bt,Ht){Ut<0?Ut=0:Ut>1&&(Ut=1);var Jt=St(Ut,Ht);Bt=Bt>1?1:Bt;var Zt=St(Bt,Ht),tn,nn=jt.length,rn=1-Jt,on=1-Zt,pn=rn*rn*rn,dn=Jt*rn*rn*3,hn=Jt*Jt*rn*3,un=Jt*Jt*Jt,En=rn*rn*on,wn=Jt*rn*on+rn*Jt*on+rn*rn*Zt,Sn=Jt*Jt*on+rn*Jt*Zt+Jt*rn*Zt,fn=Jt*Jt*Zt,xn=rn*on*on,an=Jt*on*on+rn*Zt*on+rn*on*Zt,cn=Jt*Zt*on+rn*Zt*Zt+Jt*on*Zt,bn=Jt*Zt*Zt,mn=on*on*on,Tn=Zt*on*on+on*Zt*on+on*on*Zt,An=Zt*Zt*on+on*Zt*Zt+Zt*on*Zt,Pn=Zt*Zt*Zt;for(tn=0;tn<nn;tn+=1)Tt[tn*4]=it.round((pn*jt[tn]+dn*$t[tn]+hn*zt[tn]+un*Ft[tn])*1e3)/1e3,Tt[tn*4+1]=it.round((En*jt[tn]+wn*$t[tn]+Sn*zt[tn]+fn*Ft[tn])*1e3)/1e3,Tt[tn*4+2]=it.round((xn*jt[tn]+an*$t[tn]+cn*zt[tn]+bn*Ft[tn])*1e3)/1e3,Tt[tn*4+3]=it.round((mn*jt[tn]+Tn*$t[tn]+An*zt[tn]+Pn*Ft[tn])*1e3)/1e3;return Tt}return{getSegmentsLength:ct,getNewSegment:Rt,getPointInSegment:kt,buildBezierData:ft,pointOnLine2D:g,pointOnLine3D:et}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(it,g){var et=this.offsetTime,ot;this.propType==="multidimensional"&&(ot=createTypedArray("float32",this.pv.length));for(var ct=g.lastIndex,ut=ct,dt=this.keyframes.length-1,ft=!0,St,kt,Tt;ft;){if(St=this.keyframes[ut],kt=this.keyframes[ut+1],ut===dt-1&&it>=kt.t-et){St.h&&(St=kt),ct=0;break}if(kt.t-et>it){ct=ut;break}ut<dt-1?ut+=1:(ct=0,ft=!1)}Tt=this.keyframesMetadata[ut]||{};var Rt,jt,Ft,$t,zt,Ut,Bt=kt.t-et,Ht=St.t-et,Jt;if(St.to){Tt.bezierData||(Tt.bezierData=bez.buildBezierData(St.s,kt.s||St.e,St.to,St.ti));var Zt=Tt.bezierData;if(it>=Bt||it<Ht){var tn=it>=Bt?Zt.points.length-1:0;for(jt=Zt.points[tn].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Zt.points[tn].point[Rt]}else{Tt.__fnct?Ut=Tt.__fnct:(Ut=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y,St.n).get,Tt.__fnct=Ut),Ft=Ut((it-Ht)/(Bt-Ht));var nn=Zt.segmentLength*Ft,rn,on=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastAddedLength:0;for(zt=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastPoint:0,ft=!0,$t=Zt.points.length;ft;){if(on+=Zt.points[zt].partialLength,nn===0||Ft===0||zt===Zt.points.length-1){for(jt=Zt.points[zt].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Zt.points[zt].point[Rt];break}else if(nn>=on&&nn<on+Zt.points[zt+1].partialLength){for(rn=(nn-on)/Zt.points[zt+1].partialLength,jt=Zt.points[zt].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Zt.points[zt].point[Rt]+(Zt.points[zt+1].point[Rt]-Zt.points[zt].point[Rt])*rn;break}zt<$t-1?zt+=1:ft=!1}g._lastPoint=zt,g._lastAddedLength=on-Zt.points[zt].partialLength,g._lastKeyframeIndex=ut}}else{var pn,dn,hn,un,En;if(dt=St.s.length,Jt=kt.s||St.e,this.sh&&St.h!==1)if(it>=Bt)ot[0]=Jt[0],ot[1]=Jt[1],ot[2]=Jt[2];else if(it<=Ht)ot[0]=St.s[0],ot[1]=St.s[1],ot[2]=St.s[2];else{var wn=createQuaternion(St.s),Sn=createQuaternion(Jt),fn=(it-Ht)/(Bt-Ht);quaternionToEuler(ot,slerp(wn,Sn,fn))}else for(ut=0;ut<dt;ut+=1)St.h!==1&&(it>=Bt?Ft=1:it<Ht?Ft=0:(St.o.x.constructor===Array?(Tt.__fnct||(Tt.__fnct=[]),Tt.__fnct[ut]?Ut=Tt.__fnct[ut]:(pn=St.o.x[ut]===void 0?St.o.x[0]:St.o.x[ut],dn=St.o.y[ut]===void 0?St.o.y[0]:St.o.y[ut],hn=St.i.x[ut]===void 0?St.i.x[0]:St.i.x[ut],un=St.i.y[ut]===void 0?St.i.y[0]:St.i.y[ut],Ut=BezierFactory.getBezierEasing(pn,dn,hn,un).get,Tt.__fnct[ut]=Ut)):Tt.__fnct?Ut=Tt.__fnct:(pn=St.o.x,dn=St.o.y,hn=St.i.x,un=St.i.y,Ut=BezierFactory.getBezierEasing(pn,dn,hn,un).get,St.keyframeMetadata=Ut),Ft=Ut((it-Ht)/(Bt-Ht)))),Jt=kt.s||St.e,En=St.h===1?St.s[ut]:St.s[ut]+(Jt[ut]-St.s[ut])*Ft,this.propType==="multidimensional"?ot[ut]=En:ot=En}return g.lastIndex=ct,ot}function slerp(it,g,et){var ot=[],ct=it[0],ut=it[1],dt=it[2],ft=it[3],St=g[0],kt=g[1],Tt=g[2],Rt=g[3],jt,Ft,$t,zt,Ut;return Ft=ct*St+ut*kt+dt*Tt+ft*Rt,Ft<0&&(Ft=-Ft,St=-St,kt=-kt,Tt=-Tt,Rt=-Rt),1-Ft>1e-6?(jt=Math.acos(Ft),$t=Math.sin(jt),zt=Math.sin((1-et)*jt)/$t,Ut=Math.sin(et*jt)/$t):(zt=1-et,Ut=et),ot[0]=zt*ct+Ut*St,ot[1]=zt*ut+Ut*kt,ot[2]=zt*dt+Ut*Tt,ot[3]=zt*ft+Ut*Rt,ot}function quaternionToEuler(it,g){var et=g[0],ot=g[1],ct=g[2],ut=g[3],dt=Math.atan2(2*ot*ut-2*et*ct,1-2*ot*ot-2*ct*ct),ft=Math.asin(2*et*ot+2*ct*ut),St=Math.atan2(2*et*ut-2*ot*ct,1-2*et*et-2*ct*ct);it[0]=dt/degToRads,it[1]=ft/degToRads,it[2]=St/degToRads}function createQuaternion(it){var g=it[0]*degToRads,et=it[1]*degToRads,ot=it[2]*degToRads,ct=Math.cos(g/2),ut=Math.cos(et/2),dt=Math.cos(ot/2),ft=Math.sin(g/2),St=Math.sin(et/2),kt=Math.sin(ot/2),Tt=ct*ut*dt-ft*St*kt,Rt=ft*St*dt+ct*ut*kt,jt=ft*ut*dt+ct*St*kt,Ft=ct*St*dt-ft*ut*kt;return[Rt,jt,Ft,Tt]}function getValueAtCurrentTime(){var it=this.comp.renderedFrame-this.offsetTime,g=this.keyframes[0].t-this.offsetTime,et=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(it===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=et&&it>=et||this._caching.lastFrame<g&&it<g))){this._caching.lastFrame>=it&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ot=this.interpolateValue(it,this._caching);this.pv=ot}return this._caching.lastFrame=it,this.pv}function setVValue(it){var g;if(this.propType==="unidimensional")g=it*this.mult,mathAbs(this.v-g)>1e-5&&(this.v=g,this._mdf=!0);else for(var et=0,ot=this.v.length;et<ot;)g=it[et]*this.mult,mathAbs(this.v[et]-g)>1e-5&&(this.v[et]=g,this._mdf=!0),et+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var it,g=this.effectsSequence.length,et=this.kf?this.pv:this.data.k;for(it=0;it<g;it+=1)et=this.effectsSequence[it](et);this.setVValue(et),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(it){this.effectsSequence.push(it),this.container.addDynamicProperty(this)}function ValueProperty(it,g,et,ot){this.propType="unidimensional",this.mult=et||1,this.data=g,this.v=et?g.k*et:g.k,this.pv=g.k,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(it,g,et,ot){this.propType="multidimensional",this.mult=et||1,this.data=g,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ct,ut=g.k.length;for(this.v=createTypedArray("float32",ut),this.pv=createTypedArray("float32",ut),this.vel=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)this.v[ct]=g.k[ct]*this.mult,this.pv[ct]=g.k[ct];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(it,g,et,ot){this.propType="unidimensional",this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=g,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(it,g,et,ot){this.propType="multidimensional";var ct,ut=g.k.length,dt,ft,St,kt;for(ct=0;ct<ut-1;ct+=1)g.k[ct].to&&g.k[ct].s&&g.k[ct+1]&&g.k[ct+1].s&&(dt=g.k[ct].s,ft=g.k[ct+1].s,St=g.k[ct].to,kt=g.k[ct].ti,(dt.length===2&&!(dt[0]===ft[0]&&dt[1]===ft[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],dt[0]+St[0],dt[1]+St[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],ft[0]+kt[0],ft[1]+kt[1])||dt.length===3&&!(dt[0]===ft[0]&&dt[1]===ft[1]&&dt[2]===ft[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],dt[0]+St[0],dt[1]+St[1],dt[2]+St[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],ft[0]+kt[0],ft[1]+kt[1],ft[2]+kt[2]))&&(g.k[ct].to=null,g.k[ct].ti=null),dt[0]===ft[0]&&dt[1]===ft[1]&&St[0]===0&&St[1]===0&&kt[0]===0&&kt[1]===0&&(dt.length===2||dt[2]===ft[2]&&St[2]===0&&kt[2]===0)&&(g.k[ct].to=null,g.k[ct].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=g,this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Tt=g.k[0].s.length;for(this.v=createTypedArray("float32",Tt),this.pv=createTypedArray("float32",Tt),ct=0;ct<Tt;ct+=1)this.v[ct]=initFrame,this.pv[ct]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Tt)},this.addEffect=addEffect}var PropertyFactory=function(){function it(et,ot,ct,ut,dt){ot.sid&&(ot=et.globalData.slotManager.getProp(ot));var ft;if(!ot.k.length)ft=new ValueProperty(et,ot,ut,dt);else if(typeof ot.k[0]=="number")ft=new MultiDimensionalProperty(et,ot,ut,dt);else switch(ct){case 0:ft=new KeyframedValueProperty(et,ot,ut,dt);break;case 1:ft=new KeyframedMultidimensionalProperty(et,ot,ut,dt);break}return ft.effectsSequence.length&&dt.addDynamicProperty(ft),ft}var g={getProp:it};return g}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&(this.dynamicProperties.push(g),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var g,et=this.dynamicProperties.length;for(g=0;g<et;g+=1)this.dynamicProperties[g].getValue(),this.dynamicProperties[g]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(g){this.container=g,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function it(){return createTypedArray("float32",2)}return poolFactory(8,it)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(it,g){this.c=it,this.setLength(g);for(var et=0;et<g;)this.v[et]=pointPool.newElement(),this.o[et]=pointPool.newElement(),this.i[et]=pointPool.newElement(),et+=1},ShapePath.prototype.setLength=function(it){for(;this._maxLength<it;)this.doubleArrayLength();this._length=it},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(it,g,et,ot,ct){var ut;switch(this._length=Math.max(this._length,ot+1),this._length>=this._maxLength&&this.doubleArrayLength(),et){case"v":ut=this.v;break;case"i":ut=this.i;break;case"o":ut=this.o;break;default:ut=[];break}(!ut[ot]||ut[ot]&&!ct)&&(ut[ot]=pointPool.newElement()),ut[ot][0]=it,ut[ot][1]=g},ShapePath.prototype.setTripleAt=function(it,g,et,ot,ct,ut,dt,ft){this.setXYAt(it,g,"v",dt,ft),this.setXYAt(et,ot,"o",dt,ft),this.setXYAt(ct,ut,"i",dt,ft)},ShapePath.prototype.reverse=function(){var it=new ShapePath;it.setPathData(this.c,this._length);var g=this.v,et=this.o,ot=this.i,ct=0;this.c&&(it.setTripleAt(g[0][0],g[0][1],ot[0][0],ot[0][1],et[0][0],et[0][1],0,!1),ct=1);var ut=this._length-1,dt=this._length,ft;for(ft=ct;ft<dt;ft+=1)it.setTripleAt(g[ut][0],g[ut][1],ot[ut][0],ot[ut][1],et[ut][0],et[ut][1],ft,!1),ut-=1;return it},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function it(){return new ShapePath}function g(ct){var ut=ct._length,dt;for(dt=0;dt<ut;dt+=1)pointPool.release(ct.v[dt]),pointPool.release(ct.i[dt]),pointPool.release(ct.o[dt]),ct.v[dt]=null,ct.i[dt]=null,ct.o[dt]=null;ct._length=0,ct.c=!1}function et(ct){var ut=ot.newElement(),dt,ft=ct._length===void 0?ct.v.length:ct._length;for(ut.setLength(ft),ut.c=ct.c,dt=0;dt<ft;dt+=1)ut.setTripleAt(ct.v[dt][0],ct.v[dt][1],ct.o[dt][0],ct.o[dt][1],ct.i[dt][0],ct.i[dt][1],dt);return ut}var ot=poolFactory(4,it,g);return ot.clone=et,ot}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(it){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=it,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var it;for(it=0;it<this._length;it+=1)shapePool.release(this.shapes[it]);this._length=0};var shapeCollectionPool=function(){var it={newShapeCollection:ct,release:ut},g=0,et=4,ot=createSizedArray(et);function ct(){var dt;return g?(g-=1,dt=ot[g]):dt=new ShapeCollection,dt}function ut(dt){var ft,St=dt._length;for(ft=0;ft<St;ft+=1)shapePool.release(dt.shapes[ft]);dt._length=0,g===et&&(ot=pooling.double(ot),et*=2),ot[g]=dt,g+=1}return it}(),ShapePropertyFactory=function(){var it=-999999;function g(Bt,Ht,Jt){var Zt=Jt.lastIndex,tn,nn,rn,on,pn,dn,hn,un,En,wn=this.keyframes;if(Bt<wn[0].t-this.offsetTime)tn=wn[0].s[0],rn=!0,Zt=0;else if(Bt>=wn[wn.length-1].t-this.offsetTime)tn=wn[wn.length-1].s?wn[wn.length-1].s[0]:wn[wn.length-2].e[0],rn=!0;else{for(var Sn=Zt,fn=wn.length-1,xn=!0,an,cn,bn;xn&&(an=wn[Sn],cn=wn[Sn+1],!(cn.t-this.offsetTime>Bt));)Sn<fn-1?Sn+=1:xn=!1;if(bn=this.keyframesMetadata[Sn]||{},rn=an.h===1,Zt=Sn,!rn){if(Bt>=cn.t-this.offsetTime)un=1;else if(Bt<an.t-this.offsetTime)un=0;else{var mn;bn.__fnct?mn=bn.__fnct:(mn=BezierFactory.getBezierEasing(an.o.x,an.o.y,an.i.x,an.i.y).get,bn.__fnct=mn),un=mn((Bt-(an.t-this.offsetTime))/(cn.t-this.offsetTime-(an.t-this.offsetTime)))}nn=cn.s?cn.s[0]:an.e[0]}tn=an.s[0]}for(dn=Ht._length,hn=tn.i[0].length,Jt.lastIndex=Zt,on=0;on<dn;on+=1)for(pn=0;pn<hn;pn+=1)En=rn?tn.i[on][pn]:tn.i[on][pn]+(nn.i[on][pn]-tn.i[on][pn])*un,Ht.i[on][pn]=En,En=rn?tn.o[on][pn]:tn.o[on][pn]+(nn.o[on][pn]-tn.o[on][pn])*un,Ht.o[on][pn]=En,En=rn?tn.v[on][pn]:tn.v[on][pn]+(nn.v[on][pn]-tn.v[on][pn])*un,Ht.v[on][pn]=En}function et(){var Bt=this.comp.renderedFrame-this.offsetTime,Ht=this.keyframes[0].t-this.offsetTime,Jt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Zt=this._caching.lastFrame;return Zt!==it&&(Zt<Ht&&Bt<Ht||Zt>Jt&&Bt>Jt)||(this._caching.lastIndex=Zt<Bt?this._caching.lastIndex:0,this.interpolateShape(Bt,this.pv,this._caching)),this._caching.lastFrame=Bt,this.pv}function ot(){this.paths=this.localShapeCollection}function ct(Bt,Ht){if(Bt._length!==Ht._length||Bt.c!==Ht.c)return!1;var Jt,Zt=Bt._length;for(Jt=0;Jt<Zt;Jt+=1)if(Bt.v[Jt][0]!==Ht.v[Jt][0]||Bt.v[Jt][1]!==Ht.v[Jt][1]||Bt.o[Jt][0]!==Ht.o[Jt][0]||Bt.o[Jt][1]!==Ht.o[Jt][1]||Bt.i[Jt][0]!==Ht.i[Jt][0]||Bt.i[Jt][1]!==Ht.i[Jt][1])return!1;return!0}function ut(Bt){ct(this.v,Bt)||(this.v=shapePool.clone(Bt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function dt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Bt;this.kf?Bt=this.pv:this.data.ks?Bt=this.data.ks.k:Bt=this.data.pt.k;var Ht,Jt=this.effectsSequence.length;for(Ht=0;Ht<Jt;Ht+=1)Bt=this.effectsSequence[Ht](Bt);this.setVValue(Bt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ft(Bt,Ht,Jt){this.propType="shape",this.comp=Bt.comp,this.container=Bt,this.elem=Bt,this.data=Ht,this.k=!1,this.kf=!1,this._mdf=!1;var Zt=Jt===3?Ht.pt.k:Ht.ks.k;this.v=shapePool.clone(Zt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ot,this.effectsSequence=[]}function St(Bt){this.effectsSequence.push(Bt),this.container.addDynamicProperty(this)}ft.prototype.interpolateShape=g,ft.prototype.getValue=dt,ft.prototype.setVValue=ut,ft.prototype.addEffect=St;function kt(Bt,Ht,Jt){this.propType="shape",this.comp=Bt.comp,this.elem=Bt,this.container=Bt,this.offsetTime=Bt.data.st,this.keyframes=Jt===3?Ht.pt.k:Ht.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Zt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Zt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=it,this.reset=ot,this._caching={lastFrame:it,lastIndex:0},this.effectsSequence=[et.bind(this)]}kt.prototype.getValue=dt,kt.prototype.interpolateShape=g,kt.prototype.setVValue=ut,kt.prototype.addEffect=St;var Tt=function(){var Bt=roundCorner;function Ht(Jt,Zt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Zt.d,this.elem=Jt,this.comp=Jt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Jt),this.p=PropertyFactory.getProp(Jt,Zt.p,1,0,this),this.s=PropertyFactory.getProp(Jt,Zt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ht.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Zt=this.p.v[0],tn=this.p.v[1],nn=this.s.v[0]/2,rn=this.s.v[1]/2,on=this.d!==3,pn=this.v;pn.v[0][0]=Zt,pn.v[0][1]=tn-rn,pn.v[1][0]=on?Zt+nn:Zt-nn,pn.v[1][1]=tn,pn.v[2][0]=Zt,pn.v[2][1]=tn+rn,pn.v[3][0]=on?Zt-nn:Zt+nn,pn.v[3][1]=tn,pn.i[0][0]=on?Zt-nn*Bt:Zt+nn*Bt,pn.i[0][1]=tn-rn,pn.i[1][0]=on?Zt+nn:Zt-nn,pn.i[1][1]=tn-rn*Bt,pn.i[2][0]=on?Zt+nn*Bt:Zt-nn*Bt,pn.i[2][1]=tn+rn,pn.i[3][0]=on?Zt-nn:Zt+nn,pn.i[3][1]=tn+rn*Bt,pn.o[0][0]=on?Zt+nn*Bt:Zt-nn*Bt,pn.o[0][1]=tn-rn,pn.o[1][0]=on?Zt+nn:Zt-nn,pn.o[1][1]=tn+rn*Bt,pn.o[2][0]=on?Zt-nn*Bt:Zt+nn*Bt,pn.o[2][1]=tn+rn,pn.o[3][0]=on?Zt-nn:Zt+nn,pn.o[3][1]=tn-rn*Bt}},extendPrototype([DynamicPropertyContainer],Ht),Ht}(),Rt=function(){function Bt(Ht,Jt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ht,this.comp=Ht.comp,this.data=Jt,this.frameId=-1,this.d=Jt.d,this.initDynamicPropertyContainer(Ht),Jt.sy===1?(this.ir=PropertyFactory.getProp(Ht,Jt.ir,0,0,this),this.is=PropertyFactory.getProp(Ht,Jt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ht,Jt.pt,0,0,this),this.p=PropertyFactory.getProp(Ht,Jt.p,1,0,this),this.r=PropertyFactory.getProp(Ht,Jt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ht,Jt.or,0,0,this),this.os=PropertyFactory.getProp(Ht,Jt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Bt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Jt=Math.floor(this.pt.v)*2,Zt=Math.PI*2/Jt,tn=!0,nn=this.or.v,rn=this.ir.v,on=this.os.v,pn=this.is.v,dn=2*Math.PI*nn/(Jt*2),hn=2*Math.PI*rn/(Jt*2),un,En,wn,Sn,fn=-Math.PI/2;fn+=this.r.v;var xn=this.data.d===3?-1:1;for(this.v._length=0,un=0;un<Jt;un+=1){En=tn?nn:rn,wn=tn?on:pn,Sn=tn?dn:hn;var an=En*Math.cos(fn),cn=En*Math.sin(fn),bn=an===0&&cn===0?0:cn/Math.sqrt(an*an+cn*cn),mn=an===0&&cn===0?0:-an/Math.sqrt(an*an+cn*cn);an+=+this.p.v[0],cn+=+this.p.v[1],this.v.setTripleAt(an,cn,an-bn*Sn*wn*xn,cn-mn*Sn*wn*xn,an+bn*Sn*wn*xn,cn+mn*Sn*wn*xn,un,!0),tn=!tn,fn+=Zt*xn}},convertPolygonToPath:function(){var Jt=Math.floor(this.pt.v),Zt=Math.PI*2/Jt,tn=this.or.v,nn=this.os.v,rn=2*Math.PI*tn/(Jt*4),on,pn=-Math.PI*.5,dn=this.data.d===3?-1:1;for(pn+=this.r.v,this.v._length=0,on=0;on<Jt;on+=1){var hn=tn*Math.cos(pn),un=tn*Math.sin(pn),En=hn===0&&un===0?0:un/Math.sqrt(hn*hn+un*un),wn=hn===0&&un===0?0:-hn/Math.sqrt(hn*hn+un*un);hn+=+this.p.v[0],un+=+this.p.v[1],this.v.setTripleAt(hn,un,hn-En*rn*nn*dn,un-wn*rn*nn*dn,hn+En*rn*nn*dn,un+wn*rn*nn*dn,on,!0),pn+=Zt*dn}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Bt),Bt}(),jt=function(){function Bt(Ht,Jt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ht,this.comp=Ht.comp,this.frameId=-1,this.d=Jt.d,this.initDynamicPropertyContainer(Ht),this.p=PropertyFactory.getProp(Ht,Jt.p,1,0,this),this.s=PropertyFactory.getProp(Ht,Jt.s,1,0,this),this.r=PropertyFactory.getProp(Ht,Jt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Bt.prototype={convertRectToPath:function(){var Jt=this.p.v[0],Zt=this.p.v[1],tn=this.s.v[0]/2,nn=this.s.v[1]/2,rn=bmMin(tn,nn,this.r.v),on=rn*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Jt+tn,Zt-nn+rn,Jt+tn,Zt-nn+rn,Jt+tn,Zt-nn+on,0,!0),this.v.setTripleAt(Jt+tn,Zt+nn-rn,Jt+tn,Zt+nn-on,Jt+tn,Zt+nn-rn,1,!0),rn!==0?(this.v.setTripleAt(Jt+tn-rn,Zt+nn,Jt+tn-rn,Zt+nn,Jt+tn-on,Zt+nn,2,!0),this.v.setTripleAt(Jt-tn+rn,Zt+nn,Jt-tn+on,Zt+nn,Jt-tn+rn,Zt+nn,3,!0),this.v.setTripleAt(Jt-tn,Zt+nn-rn,Jt-tn,Zt+nn-rn,Jt-tn,Zt+nn-on,4,!0),this.v.setTripleAt(Jt-tn,Zt-nn+rn,Jt-tn,Zt-nn+on,Jt-tn,Zt-nn+rn,5,!0),this.v.setTripleAt(Jt-tn+rn,Zt-nn,Jt-tn+rn,Zt-nn,Jt-tn+on,Zt-nn,6,!0),this.v.setTripleAt(Jt+tn-rn,Zt-nn,Jt+tn-on,Zt-nn,Jt+tn-rn,Zt-nn,7,!0)):(this.v.setTripleAt(Jt-tn,Zt+nn,Jt-tn+on,Zt+nn,Jt-tn,Zt+nn,2),this.v.setTripleAt(Jt-tn,Zt-nn,Jt-tn,Zt-nn+on,Jt-tn,Zt-nn,3))):(this.v.setTripleAt(Jt+tn,Zt-nn+rn,Jt+tn,Zt-nn+on,Jt+tn,Zt-nn+rn,0,!0),rn!==0?(this.v.setTripleAt(Jt+tn-rn,Zt-nn,Jt+tn-rn,Zt-nn,Jt+tn-on,Zt-nn,1,!0),this.v.setTripleAt(Jt-tn+rn,Zt-nn,Jt-tn+on,Zt-nn,Jt-tn+rn,Zt-nn,2,!0),this.v.setTripleAt(Jt-tn,Zt-nn+rn,Jt-tn,Zt-nn+rn,Jt-tn,Zt-nn+on,3,!0),this.v.setTripleAt(Jt-tn,Zt+nn-rn,Jt-tn,Zt+nn-on,Jt-tn,Zt+nn-rn,4,!0),this.v.setTripleAt(Jt-tn+rn,Zt+nn,Jt-tn+rn,Zt+nn,Jt-tn+on,Zt+nn,5,!0),this.v.setTripleAt(Jt+tn-rn,Zt+nn,Jt+tn-on,Zt+nn,Jt+tn-rn,Zt+nn,6,!0),this.v.setTripleAt(Jt+tn,Zt+nn-rn,Jt+tn,Zt+nn-rn,Jt+tn,Zt+nn-on,7,!0)):(this.v.setTripleAt(Jt-tn,Zt-nn,Jt-tn+on,Zt-nn,Jt-tn,Zt-nn,1,!0),this.v.setTripleAt(Jt-tn,Zt+nn,Jt-tn,Zt+nn-on,Jt-tn,Zt+nn,2,!0),this.v.setTripleAt(Jt+tn,Zt+nn,Jt+tn-on,Zt+nn,Jt+tn,Zt+nn,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ot},extendPrototype([DynamicPropertyContainer],Bt),Bt}();function Ft(Bt,Ht,Jt){var Zt;if(Jt===3||Jt===4){var tn=Jt===3?Ht.pt:Ht.ks,nn=tn.k;nn.length?Zt=new kt(Bt,Ht,Jt):Zt=new ft(Bt,Ht,Jt)}else Jt===5?Zt=new jt(Bt,Ht):Jt===6?Zt=new Tt(Bt,Ht):Jt===7&&(Zt=new Rt(Bt,Ht));return Zt.k&&Bt.addDynamicProperty(Zt),Zt}function $t(){return ft}function zt(){return kt}var Ut={};return Ut.getShapeProp=Ft,Ut.getConstructorFunction=$t,Ut.getKeyframedConstructorFunction=zt,Ut}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var it=Math.cos,g=Math.sin,et=Math.tan,ot=Math.round;function ct(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ut(an){if(an===0)return this;var cn=it(an),bn=g(an);return this._t(cn,-bn,0,0,bn,cn,0,0,0,0,1,0,0,0,0,1)}function dt(an){if(an===0)return this;var cn=it(an),bn=g(an);return this._t(1,0,0,0,0,cn,-bn,0,0,bn,cn,0,0,0,0,1)}function ft(an){if(an===0)return this;var cn=it(an),bn=g(an);return this._t(cn,0,bn,0,0,1,0,0,-bn,0,cn,0,0,0,0,1)}function St(an){if(an===0)return this;var cn=it(an),bn=g(an);return this._t(cn,-bn,0,0,bn,cn,0,0,0,0,1,0,0,0,0,1)}function kt(an,cn){return this._t(1,cn,an,1,0,0)}function Tt(an,cn){return this.shear(et(an),et(cn))}function Rt(an,cn){var bn=it(cn),mn=g(cn);return this._t(bn,mn,0,0,-mn,bn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,et(an),1,0,0,0,0,1,0,0,0,0,1)._t(bn,-mn,0,0,mn,bn,0,0,0,0,1,0,0,0,0,1)}function jt(an,cn,bn){return!bn&&bn!==0&&(bn=1),an===1&&cn===1&&bn===1?this:this._t(an,0,0,0,0,cn,0,0,0,0,bn,0,0,0,0,1)}function Ft(an,cn,bn,mn,Tn,An,Pn,Mn,Rn,Cn,On,In,Dn,Fn,Xn,Vn){return this.props[0]=an,this.props[1]=cn,this.props[2]=bn,this.props[3]=mn,this.props[4]=Tn,this.props[5]=An,this.props[6]=Pn,this.props[7]=Mn,this.props[8]=Rn,this.props[9]=Cn,this.props[10]=On,this.props[11]=In,this.props[12]=Dn,this.props[13]=Fn,this.props[14]=Xn,this.props[15]=Vn,this}function $t(an,cn,bn){return bn=bn||0,an!==0||cn!==0||bn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,an,cn,bn,1):this}function zt(an,cn,bn,mn,Tn,An,Pn,Mn,Rn,Cn,On,In,Dn,Fn,Xn,Vn){var zn=this.props;if(an===1&&cn===0&&bn===0&&mn===0&&Tn===0&&An===1&&Pn===0&&Mn===0&&Rn===0&&Cn===0&&On===1&&In===0)return zn[12]=zn[12]*an+zn[15]*Dn,zn[13]=zn[13]*An+zn[15]*Fn,zn[14]=zn[14]*On+zn[15]*Xn,zn[15]*=Vn,this._identityCalculated=!1,this;var Zn=zn[0],lr=zn[1],hr=zn[2],$n=zn[3],Un=zn[4],Kn=zn[5],Yn=zn[6],Wn=zn[7],cr=zn[8],or=zn[9],ur=zn[10],Cr=zn[11],Rr=zn[12],br=zn[13],Ts=zn[14],Tr=zn[15];return zn[0]=Zn*an+lr*Tn+hr*Rn+$n*Dn,zn[1]=Zn*cn+lr*An+hr*Cn+$n*Fn,zn[2]=Zn*bn+lr*Pn+hr*On+$n*Xn,zn[3]=Zn*mn+lr*Mn+hr*In+$n*Vn,zn[4]=Un*an+Kn*Tn+Yn*Rn+Wn*Dn,zn[5]=Un*cn+Kn*An+Yn*Cn+Wn*Fn,zn[6]=Un*bn+Kn*Pn+Yn*On+Wn*Xn,zn[7]=Un*mn+Kn*Mn+Yn*In+Wn*Vn,zn[8]=cr*an+or*Tn+ur*Rn+Cr*Dn,zn[9]=cr*cn+or*An+ur*Cn+Cr*Fn,zn[10]=cr*bn+or*Pn+ur*On+Cr*Xn,zn[11]=cr*mn+or*Mn+ur*In+Cr*Vn,zn[12]=Rr*an+br*Tn+Ts*Rn+Tr*Dn,zn[13]=Rr*cn+br*An+Ts*Cn+Tr*Fn,zn[14]=Rr*bn+br*Pn+Ts*On+Tr*Xn,zn[15]=Rr*mn+br*Mn+Ts*In+Tr*Vn,this._identityCalculated=!1,this}function Ut(an){var cn=an.props;return this.transform(cn[0],cn[1],cn[2],cn[3],cn[4],cn[5],cn[6],cn[7],cn[8],cn[9],cn[10],cn[11],cn[12],cn[13],cn[14],cn[15])}function Bt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ht(an){for(var cn=0;cn<16;){if(an.props[cn]!==this.props[cn])return!1;cn+=1}return!0}function Jt(an){var cn;for(cn=0;cn<16;cn+=1)an.props[cn]=this.props[cn];return an}function Zt(an){var cn;for(cn=0;cn<16;cn+=1)this.props[cn]=an[cn]}function tn(an,cn,bn){return{x:an*this.props[0]+cn*this.props[4]+bn*this.props[8]+this.props[12],y:an*this.props[1]+cn*this.props[5]+bn*this.props[9]+this.props[13],z:an*this.props[2]+cn*this.props[6]+bn*this.props[10]+this.props[14]}}function nn(an,cn,bn){return an*this.props[0]+cn*this.props[4]+bn*this.props[8]+this.props[12]}function rn(an,cn,bn){return an*this.props[1]+cn*this.props[5]+bn*this.props[9]+this.props[13]}function on(an,cn,bn){return an*this.props[2]+cn*this.props[6]+bn*this.props[10]+this.props[14]}function pn(){var an=this.props[0]*this.props[5]-this.props[1]*this.props[4],cn=this.props[5]/an,bn=-this.props[1]/an,mn=-this.props[4]/an,Tn=this.props[0]/an,An=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/an,Pn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/an,Mn=new Matrix;return Mn.props[0]=cn,Mn.props[1]=bn,Mn.props[4]=mn,Mn.props[5]=Tn,Mn.props[12]=An,Mn.props[13]=Pn,Mn}function dn(an){var cn=this.getInverseMatrix();return cn.applyToPointArray(an[0],an[1],an[2]||0)}function hn(an){var cn,bn=an.length,mn=[];for(cn=0;cn<bn;cn+=1)mn[cn]=dn(an[cn]);return mn}function un(an,cn,bn){var mn=createTypedArray("float32",6);if(this.isIdentity())mn[0]=an[0],mn[1]=an[1],mn[2]=cn[0],mn[3]=cn[1],mn[4]=bn[0],mn[5]=bn[1];else{var Tn=this.props[0],An=this.props[1],Pn=this.props[4],Mn=this.props[5],Rn=this.props[12],Cn=this.props[13];mn[0]=an[0]*Tn+an[1]*Pn+Rn,mn[1]=an[0]*An+an[1]*Mn+Cn,mn[2]=cn[0]*Tn+cn[1]*Pn+Rn,mn[3]=cn[0]*An+cn[1]*Mn+Cn,mn[4]=bn[0]*Tn+bn[1]*Pn+Rn,mn[5]=bn[0]*An+bn[1]*Mn+Cn}return mn}function En(an,cn,bn){var mn;return this.isIdentity()?mn=[an,cn,bn]:mn=[an*this.props[0]+cn*this.props[4]+bn*this.props[8]+this.props[12],an*this.props[1]+cn*this.props[5]+bn*this.props[9]+this.props[13],an*this.props[2]+cn*this.props[6]+bn*this.props[10]+this.props[14]],mn}function wn(an,cn){if(this.isIdentity())return an+","+cn;var bn=this.props;return Math.round((an*bn[0]+cn*bn[4]+bn[12])*100)/100+","+Math.round((an*bn[1]+cn*bn[5]+bn[13])*100)/100}function Sn(){for(var an=0,cn=this.props,bn="matrix3d(",mn=1e4;an<16;)bn+=ot(cn[an]*mn)/mn,bn+=an===15?")":",",an+=1;return bn}function fn(an){var cn=1e4;return an<1e-6&&an>0||an>-1e-6&&an<0?ot(an*cn)/cn:an}function xn(){var an=this.props,cn=fn(an[0]),bn=fn(an[1]),mn=fn(an[4]),Tn=fn(an[5]),An=fn(an[12]),Pn=fn(an[13]);return"matrix("+cn+","+bn+","+mn+","+Tn+","+An+","+Pn+")"}return function(){this.reset=ct,this.rotate=ut,this.rotateX=dt,this.rotateY=ft,this.rotateZ=St,this.skew=Tt,this.skewFromAxis=Rt,this.shear=kt,this.scale=jt,this.setTransform=Ft,this.translate=$t,this.transform=zt,this.multiply=Ut,this.applyToPoint=tn,this.applyToX=nn,this.applyToY=rn,this.applyToZ=on,this.applyToPointArray=En,this.applyToTriplePoints=un,this.applyToPointStringified=wn,this.toCSS=Sn,this.to2dCSS=xn,this.clone=Jt,this.cloneFromProps=Zt,this.equals=Ht,this.inversePoints=hn,this.inversePoint=dn,this.getInverseMatrix=pn,this._t=this.transform,this.isIdentity=Bt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(et){return typeof et}:_typeof$3=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(it)}var lottie={};function setLocation(it){setLocationHref(it)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(it){setSubframeEnabled(it)}function setPrefix(it){setIdPrefix(it)}function loadAnimation(it){return animationManager.loadAnimation(it)}function setQuality(it){if(typeof it=="string")switch(it){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(it)&&it>1&&setDefaultCurveSegments(it)}function inBrowser(){return typeof navigator<"u"}function installPlugin(it,g){it==="expressions"&&setExpressionsPlugin(g)}function getFactory(it){switch(it){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(it){for(var g=queryString.split("&"),et=0;et<g.length;et+=1){var ot=g[et].split("=");if(decodeURIComponent(ot[0])==it)return decodeURIComponent(ot[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(it){}var ShapeModifiers=function(){var it={},g={};it.registerModifier=et,it.getModifier=ot;function et(ct,ut){g[ct]||(g[ct]=ut)}function ot(ct,ut,dt){return new g[ct](ut,dt)}return it}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(it){if(!this.closed){it.sh.container.addDynamicProperty(it.sh);var g={shape:it.sh,data:it,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(g),this.addShapeToModifier(g),this._isAnimated&&it.setAsAnimated()}},ShapeModifier.prototype.init=function(it,g){this.shapes=[],this.elem=it,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(it,g){this.s=PropertyFactory.getProp(it,g.s,0,.01,this),this.e=PropertyFactory.getProp(it,g.e,0,.01,this),this.o=PropertyFactory.getProp(it,g.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=g.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(it){it.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(it,g,et,ot,ct){var ut=[];g<=1?ut.push({s:it,e:g}):it>=1?ut.push({s:it-1,e:g-1}):(ut.push({s:it,e:1}),ut.push({s:0,e:g-1}));var dt=[],ft,St=ut.length,kt;for(ft=0;ft<St;ft+=1)if(kt=ut[ft],!(kt.e*ct<ot||kt.s*ct>ot+et)){var Tt,Rt;kt.s*ct<=ot?Tt=0:Tt=(kt.s*ct-ot)/et,kt.e*ct>=ot+et?Rt=1:Rt=(kt.e*ct-ot)/et,dt.push([Tt,Rt])}return dt.length||dt.push([0,0]),dt},TrimModifier.prototype.releasePathsData=function(it){var g,et=it.length;for(g=0;g<et;g+=1)segmentsLengthPool.release(it[g]);return it.length=0,it},TrimModifier.prototype.processShapes=function(it){var g,et;if(this._mdf||it){var ot=this.o.v%360/360;if(ot<0&&(ot+=1),this.s.v>1?g=1+ot:this.s.v<0?g=0+ot:g=this.s.v+ot,this.e.v>1?et=1+ot:this.e.v<0?et=0+ot:et=this.e.v+ot,g>et){var ct=g;g=et,et=ct}g=Math.round(g*1e4)*1e-4,et=Math.round(et*1e4)*1e-4,this.sValue=g,this.eValue=et}else g=this.sValue,et=this.eValue;var ut,dt,ft=this.shapes.length,St,kt,Tt,Rt,jt,Ft=0;if(et===g)for(dt=0;dt<ft;dt+=1)this.shapes[dt].localShapeCollection.releaseShapes(),this.shapes[dt].shape._mdf=!0,this.shapes[dt].shape.paths=this.shapes[dt].localShapeCollection,this._mdf&&(this.shapes[dt].pathsData.length=0);else if(et===1&&g===0||et===0&&g===1){if(this._mdf)for(dt=0;dt<ft;dt+=1)this.shapes[dt].pathsData.length=0,this.shapes[dt].shape._mdf=!0}else{var $t=[],zt,Ut;for(dt=0;dt<ft;dt+=1)if(zt=this.shapes[dt],!zt.shape._mdf&&!this._mdf&&!it&&this.m!==2)zt.shape.paths=zt.localShapeCollection;else{if(ut=zt.shape.paths,kt=ut._length,jt=0,!zt.shape._mdf&&zt.pathsData.length)jt=zt.totalShapeLength;else{for(Tt=this.releasePathsData(zt.pathsData),St=0;St<kt;St+=1)Rt=bez.getSegmentsLength(ut.shapes[St]),Tt.push(Rt),jt+=Rt.totalLength;zt.totalShapeLength=jt,zt.pathsData=Tt}Ft+=jt,zt.shape._mdf=!0}var Bt=g,Ht=et,Jt=0,Zt;for(dt=ft-1;dt>=0;dt-=1)if(zt=this.shapes[dt],zt.shape._mdf){for(Ut=zt.localShapeCollection,Ut.releaseShapes(),this.m===2&&ft>1?(Zt=this.calculateShapeEdges(g,et,zt.totalShapeLength,Jt,Ft),Jt+=zt.totalShapeLength):Zt=[[Bt,Ht]],kt=Zt.length,St=0;St<kt;St+=1){Bt=Zt[St][0],Ht=Zt[St][1],$t.length=0,Ht<=1?$t.push({s:zt.totalShapeLength*Bt,e:zt.totalShapeLength*Ht}):Bt>=1?$t.push({s:zt.totalShapeLength*(Bt-1),e:zt.totalShapeLength*(Ht-1)}):($t.push({s:zt.totalShapeLength*Bt,e:zt.totalShapeLength}),$t.push({s:0,e:zt.totalShapeLength*(Ht-1)}));var tn=this.addShapes(zt,$t[0]);if($t[0].s!==$t[0].e){if($t.length>1){var nn=zt.shape.paths.shapes[zt.shape.paths._length-1];if(nn.c){var rn=tn.pop();this.addPaths(tn,Ut),tn=this.addShapes(zt,$t[1],rn)}else this.addPaths(tn,Ut),tn=this.addShapes(zt,$t[1])}this.addPaths(tn,Ut)}}zt.shape.paths=Ut}}},TrimModifier.prototype.addPaths=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g.addShape(it[et])},TrimModifier.prototype.addSegment=function(it,g,et,ot,ct,ut,dt){ct.setXYAt(g[0],g[1],"o",ut),ct.setXYAt(et[0],et[1],"i",ut+1),dt&&ct.setXYAt(it[0],it[1],"v",ut),ct.setXYAt(ot[0],ot[1],"v",ut+1)},TrimModifier.prototype.addSegmentFromArray=function(it,g,et,ot){g.setXYAt(it[1],it[5],"o",et),g.setXYAt(it[2],it[6],"i",et+1),ot&&g.setXYAt(it[0],it[4],"v",et),g.setXYAt(it[3],it[7],"v",et+1)},TrimModifier.prototype.addShapes=function(it,g,et){var ot=it.pathsData,ct=it.shape.paths.shapes,ut,dt=it.shape.paths._length,ft,St,kt=0,Tt,Rt,jt,Ft,$t=[],zt,Ut=!0;for(et?(Rt=et._length,zt=et._length):(et=shapePool.newElement(),Rt=0,zt=0),$t.push(et),ut=0;ut<dt;ut+=1){for(jt=ot[ut].lengths,et.c=ct[ut].c,St=ct[ut].c?jt.length:jt.length+1,ft=1;ft<St;ft+=1)if(Tt=jt[ft-1],kt+Tt.addedLength<g.s)kt+=Tt.addedLength,et.c=!1;else if(kt>g.e){et.c=!1;break}else g.s<=kt&&g.e>=kt+Tt.addedLength?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[ft],ct[ut].v[ft],et,Rt,Ut),Ut=!1):(Ft=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[ft],ct[ut].o[ft-1],ct[ut].i[ft],(g.s-kt)/Tt.addedLength,(g.e-kt)/Tt.addedLength,jt[ft-1]),this.addSegmentFromArray(Ft,et,Rt,Ut),Ut=!1,et.c=!1),kt+=Tt.addedLength,Rt+=1;if(ct[ut].c&&jt.length){if(Tt=jt[ft-1],kt<=g.e){var Bt=jt[ft-1].addedLength;g.s<=kt&&g.e>=kt+Bt?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[0],ct[ut].v[0],et,Rt,Ut),Ut=!1):(Ft=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[0],ct[ut].o[ft-1],ct[ut].i[0],(g.s-kt)/Bt,(g.e-kt)/Bt,jt[ft-1]),this.addSegmentFromArray(Ft,et,Rt,Ut),Ut=!1,et.c=!1)}else et.c=!1;kt+=Tt.addedLength,Rt+=1}if(et._length&&(et.setXYAt(et.v[zt][0],et.v[zt][1],"i",zt),et.setXYAt(et.v[et._length-1][0],et.v[et._length-1][1],"o",et._length-1)),kt>g.e)break;ut<dt-1&&(et=shapePool.newElement(),Ut=!0,$t.push(et),Rt=0)}return $t};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(it,g){var et=g/100,ot=[0,0],ct=it._length,ut=0;for(ut=0;ut<ct;ut+=1)ot[0]+=it.v[ut][0],ot[1]+=it.v[ut][1];ot[0]/=ct,ot[1]/=ct;var dt=shapePool.newElement();dt.c=it.c;var ft,St,kt,Tt,Rt,jt;for(ut=0;ut<ct;ut+=1)ft=it.v[ut][0]+(ot[0]-it.v[ut][0])*et,St=it.v[ut][1]+(ot[1]-it.v[ut][1])*et,kt=it.o[ut][0]+(ot[0]-it.o[ut][0])*-et,Tt=it.o[ut][1]+(ot[1]-it.o[ut][1])*-et,Rt=it.i[ut][0]+(ot[0]-it.i[ut][0])*-et,jt=it.i[ut][1]+(ot[1]-it.i[ut][1])*-et,dt.setTripleAt(ft,St,kt,Tt,Rt,jt,ut);return dt},PuckerAndBloatModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var it=[0,0];function g(St){var kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||kt,this.a&&St.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&St.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&St.skewFromAxis(-this.sk.v,this.sa.v),this.r?St.rotate(-this.r.v):St.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?St.translate(this.px.v,this.py.v,-this.pz.v):St.translate(this.px.v,this.py.v,0):St.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function et(St){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||St){var kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Tt,Rt;if(kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Tt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/kt,0),Rt=this.p.getValueAtTime(this.p.keyframes[0].t/kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Tt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/kt,0),Rt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/kt,0)):(Tt=this.p.pv,Rt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Tt=[],Rt=[];var jt=this.px,Ft=this.py;jt._caching.lastFrame+jt.offsetTime<=jt.keyframes[0].t?(Tt[0]=jt.getValueAtTime((jt.keyframes[0].t+.01)/kt,0),Tt[1]=Ft.getValueAtTime((Ft.keyframes[0].t+.01)/kt,0),Rt[0]=jt.getValueAtTime(jt.keyframes[0].t/kt,0),Rt[1]=Ft.getValueAtTime(Ft.keyframes[0].t/kt,0)):jt._caching.lastFrame+jt.offsetTime>=jt.keyframes[jt.keyframes.length-1].t?(Tt[0]=jt.getValueAtTime(jt.keyframes[jt.keyframes.length-1].t/kt,0),Tt[1]=Ft.getValueAtTime(Ft.keyframes[Ft.keyframes.length-1].t/kt,0),Rt[0]=jt.getValueAtTime((jt.keyframes[jt.keyframes.length-1].t-.01)/kt,0),Rt[1]=Ft.getValueAtTime((Ft.keyframes[Ft.keyframes.length-1].t-.01)/kt,0)):(Tt=[jt.pv,Ft.pv],Rt[0]=jt.getValueAtTime((jt._caching.lastFrame+jt.offsetTime-.01)/kt,jt.offsetTime),Rt[1]=Ft.getValueAtTime((Ft._caching.lastFrame+Ft.offsetTime-.01)/kt,Ft.offsetTime))}else Rt=it,Tt=Rt;this.v.rotate(-Math.atan2(Tt[1]-Rt[1],Tt[0]-Rt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ot(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ct(){}function ut(St){this._addDynamicProperty(St),this.elem.addDynamicProperty(St),this._isDirty=!0}function dt(St,kt,Tt){if(this.elem=St,this.frameId=-1,this.propType="transform",this.data=kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Tt||St),kt.p&&kt.p.s?(this.px=PropertyFactory.getProp(St,kt.p.x,0,0,this),this.py=PropertyFactory.getProp(St,kt.p.y,0,0,this),kt.p.z&&(this.pz=PropertyFactory.getProp(St,kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(St,kt.p||{k:[0,0,0]},1,0,this),kt.rx){if(this.rx=PropertyFactory.getProp(St,kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(St,kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(St,kt.rz,0,degToRads,this),kt.or.k[0].ti){var Rt,jt=kt.or.k.length;for(Rt=0;Rt<jt;Rt+=1)kt.or.k[Rt].to=null,kt.or.k[Rt].ti=null}this.or=PropertyFactory.getProp(St,kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(St,kt.r||{k:0},0,degToRads,this);kt.sk&&(this.sk=PropertyFactory.getProp(St,kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(St,kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(St,kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(St,kt.s||{k:[100,100,100]},1,.01,this),kt.o?this.o=PropertyFactory.getProp(St,kt.o,0,.01,St):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}dt.prototype={applyToMatrix:g,getValue:et,precalculateMatrix:ot,autoOrient:ct},extendPrototype([DynamicPropertyContainer],dt),dt.prototype.addDynamicProperty=ut,dt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ft(St,kt,Tt){return new dt(St,kt,Tt)}return{getTransformProperty:ft}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(it,g.c,0,null,this),this.o=PropertyFactory.getProp(it,g.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(it,g.tr,this),this.so=PropertyFactory.getProp(it,g.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(it,g.tr.eo,0,.01,this),this.data=g,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(it,g,et,ot,ct,ut){var dt=ut?-1:1,ft=ot.s.v[0]+(1-ot.s.v[0])*(1-ct),St=ot.s.v[1]+(1-ot.s.v[1])*(1-ct);it.translate(ot.p.v[0]*dt*ct,ot.p.v[1]*dt*ct,ot.p.v[2]),g.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),g.rotate(-ot.r.v*dt*ct),g.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2]),et.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),et.scale(ut?1/ft:ft,ut?1/St:St),et.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])},RepeaterModifier.prototype.init=function(it,g,et,ot){for(this.elem=it,this.arr=g,this.pos=et,this.elemsData=ot,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g[et]);et>0;)et-=1,this._elements.unshift(g[et]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g]._processed=!1,it[g].ty==="gr"&&this.resetElements(it[g].it)},RepeaterModifier.prototype.cloneElements=function(it){var g=JSON.parse(JSON.stringify(it));return this.resetElements(g),g},RepeaterModifier.prototype.changeGroupRender=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]._render=g,it[et].ty==="gr"&&this.changeGroupRender(it[et].it,g)},RepeaterModifier.prototype.processShapes=function(it){var g,et,ot,ct,ut,dt=!1;if(this._mdf||it){var ft=Math.ceil(this.c.v);if(this._groups.length<ft){for(;this._groups.length<ft;){var St={it:this.cloneElements(this._elements),ty:"gr"};St.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,St),this._groups.splice(0,0,St),this._currentCopies+=1}this.elem.reloadShapes(),dt=!0}ut=0;var kt;for(ot=0;ot<=this._groups.length-1;ot+=1){if(kt=ut<ft,this._groups[ot]._render=kt,this.changeGroupRender(this._groups[ot].it,kt),!kt){var Tt=this.elemsData[ot].it,Rt=Tt[Tt.length-1];Rt.transform.op.v!==0?(Rt.transform.op._mdf=!0,Rt.transform.op.v=0):Rt.transform.op._mdf=!1}ut+=1}this._currentCopies=ft;var jt=this.o.v,Ft=jt%1,$t=jt>0?Math.floor(jt):Math.ceil(jt),zt=this.pMatrix.props,Ut=this.rMatrix.props,Bt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ht=0;if(jt>0){for(;Ht<$t;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ht+=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Ft,!1),Ht+=Ft)}else if(jt<0){for(;Ht>$t;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ht-=1;Ft&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Ft,!0),Ht-=Ft)}ot=this.data.m===1?0:this._currentCopies-1,ct=this.data.m===1?1:-1,ut=this._currentCopies;for(var Jt,Zt;ut;){if(g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,Zt=et.length,g[g.length-1].transform.mProps._mdf=!0,g[g.length-1].transform.op._mdf=!0,g[g.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ot/(this._currentCopies-1)),Ht!==0){for((ot!==0&&ct===1||ot!==this._currentCopies-1&&ct===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],Ut[8],Ut[9],Ut[10],Ut[11],Ut[12],Ut[13],Ut[14],Ut[15]),this.matrix.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6],Bt[7],Bt[8],Bt[9],Bt[10],Bt[11],Bt[12],Bt[13],Bt[14],Bt[15]),this.matrix.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6],zt[7],zt[8],zt[9],zt[10],zt[11],zt[12],zt[13],zt[14],zt[15]),Jt=0;Jt<Zt;Jt+=1)et[Jt]=this.matrix.props[Jt];this.matrix.reset()}else for(this.matrix.reset(),Jt=0;Jt<Zt;Jt+=1)et[Jt]=this.matrix.props[Jt];Ht+=1,ut-=1,ot+=ct}}else for(ut=this._currentCopies,ot=0,ct=1;ut;)g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,g[g.length-1].transform.mProps._mdf=!1,g[g.length-1].transform.op._mdf=!1,ut-=1,ot+=ct;return dt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(it,g.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(it,g){var et=shapePool.newElement();et.c=it.c;var ot,ct=it._length,ut,dt,ft,St,kt,Tt,Rt=0,jt,Ft,$t,zt,Ut,Bt;for(ot=0;ot<ct;ot+=1)ut=it.v[ot],ft=it.o[ot],dt=it.i[ot],ut[0]===ft[0]&&ut[1]===ft[1]&&ut[0]===dt[0]&&ut[1]===dt[1]?(ot===0||ot===ct-1)&&!it.c?(et.setTripleAt(ut[0],ut[1],ft[0],ft[1],dt[0],dt[1],Rt),Rt+=1):(ot===0?St=it.v[ct-1]:St=it.v[ot-1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Ut=ut[0]+(St[0]-ut[0])*Tt,jt=Ut,Bt=ut[1]-(ut[1]-St[1])*Tt,Ft=Bt,$t=jt-(jt-ut[0])*roundCorner,zt=Ft-(Ft-ut[1])*roundCorner,et.setTripleAt(jt,Ft,$t,zt,Ut,Bt,Rt),Rt+=1,ot===ct-1?St=it.v[0]:St=it.v[ot+1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,$t=ut[0]+(St[0]-ut[0])*Tt,jt=$t,zt=ut[1]+(St[1]-ut[1])*Tt,Ft=zt,Ut=jt-(jt-ut[0])*roundCorner,Bt=Ft-(Ft-ut[1])*roundCorner,et.setTripleAt(jt,Ft,$t,zt,Ut,Bt,Rt),Rt+=1):(et.setTripleAt(it.v[ot][0],it.v[ot][1],it.o[ot][0],it.o[ot][1],it.i[ot][0],it.i[ot][1],Rt),Rt+=1);return et},RoundCornersModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.rd.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(it,g){return Math.abs(it-g)*1e5<=Math.min(Math.abs(it),Math.abs(g))}function floatZero(it){return Math.abs(it)<=1e-5}function lerp(it,g,et){return it*(1-et)+g*et}function lerpPoint(it,g,et){return[lerp(it[0],g[0],et),lerp(it[1],g[1],et)]}function quadRoots(it,g,et){if(it===0)return[];var ot=g*g-4*it*et;if(ot<0)return[];var ct=-g/(2*it);if(ot===0)return[ct];var ut=Math.sqrt(ot)/(2*it);return[ct-ut,ct+ut]}function polynomialCoefficients(it,g,et,ot){return[-it+3*g-3*et+ot,3*it-6*g+3*et,-3*it+3*g,it]}function singlePoint(it){return new PolynomialBezier(it,it,it,it,!1)}function PolynomialBezier(it,g,et,ot,ct){ct&&pointEqual(it,g)&&(g=lerpPoint(it,ot,1/3)),ct&&pointEqual(et,ot)&&(et=lerpPoint(it,ot,2/3));var ut=polynomialCoefficients(it[0],g[0],et[0],ot[0]),dt=polynomialCoefficients(it[1],g[1],et[1],ot[1]);this.a=[ut[0],dt[0]],this.b=[ut[1],dt[1]],this.c=[ut[2],dt[2]],this.d=[ut[3],dt[3]],this.points=[it,g,et,ot]}PolynomialBezier.prototype.point=function(it){return[((this.a[0]*it+this.b[0])*it+this.c[0])*it+this.d[0],((this.a[1]*it+this.b[1])*it+this.c[1])*it+this.d[1]]},PolynomialBezier.prototype.derivative=function(it){return[(3*it*this.a[0]+2*this.b[0])*it+this.c[0],(3*it*this.a[1]+2*this.b[1])*it+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(it){var g=this.derivative(it);return Math.atan2(g[1],g[0])},PolynomialBezier.prototype.normalAngle=function(it){var g=this.derivative(it);return Math.atan2(g[0],g[1])},PolynomialBezier.prototype.inflectionPoints=function(){var it=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(it))return[];var g=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/it,et=g*g-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/it;if(et<0)return[];var ot=Math.sqrt(et);return floatZero(ot)?ot>0&&ot<1?[g]:[]:[g-ot,g+ot].filter(function(ct){return ct>0&&ct<1})},PolynomialBezier.prototype.split=function(it){if(it<=0)return[singlePoint(this.points[0]),this];if(it>=1)return[this,singlePoint(this.points[this.points.length-1])];var g=lerpPoint(this.points[0],this.points[1],it),et=lerpPoint(this.points[1],this.points[2],it),ot=lerpPoint(this.points[2],this.points[3],it),ct=lerpPoint(g,et,it),ut=lerpPoint(et,ot,it),dt=lerpPoint(ct,ut,it);return[new PolynomialBezier(this.points[0],g,ct,dt,!0),new PolynomialBezier(dt,ut,ot,this.points[3],!0)]};function extrema(it,g){var et=it.points[0][g],ot=it.points[it.points.length-1][g];if(et>ot){var ct=ot;ot=et,et=ct}for(var ut=quadRoots(3*it.a[g],2*it.b[g],it.c[g]),dt=0;dt<ut.length;dt+=1)if(ut[dt]>0&&ut[dt]<1){var ft=it.point(ut[dt])[g];ft<et?et=ft:ft>ot&&(ot=ft)}return{min:et,max:ot}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var it=this.bounds();return{left:it.x.min,right:it.x.max,top:it.y.min,bottom:it.y.max,width:it.x.max-it.x.min,height:it.y.max-it.y.min,cx:(it.x.max+it.x.min)/2,cy:(it.y.max+it.y.min)/2}};function intersectData(it,g,et){var ot=it.boundingBox();return{cx:ot.cx,cy:ot.cy,width:ot.width,height:ot.height,bez:it,t:(g+et)/2,t1:g,t2:et}}function splitData(it){var g=it.bez.split(.5);return[intersectData(g[0],it.t1,it.t),intersectData(g[1],it.t,it.t2)]}function boxIntersect(it,g){return Math.abs(it.cx-g.cx)*2<it.width+g.width&&Math.abs(it.cy-g.cy)*2<it.height+g.height}function intersectsImpl(it,g,et,ot,ct,ut){if(boxIntersect(it,g)){if(et>=ut||it.width<=ot&&it.height<=ot&&g.width<=ot&&g.height<=ot){ct.push([it.t,g.t]);return}var dt=splitData(it),ft=splitData(g);intersectsImpl(dt[0],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[0],ft[1],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[1],et+1,ot,ct,ut)}}PolynomialBezier.prototype.intersections=function(it,g,et){g===void 0&&(g=2),et===void 0&&(et=7);var ot=[];return intersectsImpl(intersectData(this,0,1),intersectData(it,0,1),0,g,ot,et),ot},PolynomialBezier.shapeSegment=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[g],it.o[g],it.i[et],it.v[et],!0)},PolynomialBezier.shapeSegmentInverted=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[et],it.i[et],it.o[g],it.v[g],!0)};function crossProduct(it,g){return[it[1]*g[2]-it[2]*g[1],it[2]*g[0]-it[0]*g[2],it[0]*g[1]-it[1]*g[0]]}function lineIntersection(it,g,et,ot){var ct=[it[0],it[1],1],ut=[g[0],g[1],1],dt=[et[0],et[1],1],ft=[ot[0],ot[1],1],St=crossProduct(crossProduct(ct,ut),crossProduct(dt,ft));return floatZero(St[2])?null:[St[0]/St[2],St[1]/St[2]]}function polarOffset(it,g,et){return[it[0]+Math.cos(g)*et,it[1]-Math.sin(g)*et]}function pointDistance(it,g){return Math.hypot(it[0]-g[0],it[1]-g[1])}function pointEqual(it,g){return floatEqual(it[0],g[0])&&floatEqual(it[1],g[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(it,g.s,0,null,this),this.frequency=PropertyFactory.getProp(it,g.r,0,null,this),this.pointsType=PropertyFactory.getProp(it,g.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(it,g,et,ot,ct,ut,dt){var ft=et-Math.PI/2,St=et+Math.PI/2,kt=g[0]+Math.cos(et)*ot*ct,Tt=g[1]-Math.sin(et)*ot*ct;it.setTripleAt(kt,Tt,kt+Math.cos(ft)*ut,Tt-Math.sin(ft)*ut,kt+Math.cos(St)*dt,Tt-Math.sin(St)*dt,it.length())}function getPerpendicularVector(it,g){var et=[g[0]-it[0],g[1]-it[1]],ot=-Math.PI*.5,ct=[Math.cos(ot)*et[0]-Math.sin(ot)*et[1],Math.sin(ot)*et[0]+Math.cos(ot)*et[1]];return ct}function getProjectingAngle(it,g){var et=g===0?it.length()-1:g-1,ot=(g+1)%it.length(),ct=it.v[et],ut=it.v[ot],dt=getPerpendicularVector(ct,ut);return Math.atan2(0,1)-Math.atan2(dt[1],dt[0])}function zigZagCorner(it,g,et,ot,ct,ut,dt){var ft=getProjectingAngle(g,et),St=g.v[et%g._length],kt=g.v[et===0?g._length-1:et-1],Tt=g.v[(et+1)%g._length],Rt=ut===2?Math.sqrt(Math.pow(St[0]-kt[0],2)+Math.pow(St[1]-kt[1],2)):0,jt=ut===2?Math.sqrt(Math.pow(St[0]-Tt[0],2)+Math.pow(St[1]-Tt[1],2)):0;setPoint(it,g.v[et%g._length],ft,dt,ot,jt/((ct+1)*2),Rt/((ct+1)*2))}function zigZagSegment(it,g,et,ot,ct,ut){for(var dt=0;dt<ot;dt+=1){var ft=(dt+1)/(ot+1),St=ct===2?Math.sqrt(Math.pow(g.points[3][0]-g.points[0][0],2)+Math.pow(g.points[3][1]-g.points[0][1],2)):0,kt=g.normalAngle(ft),Tt=g.point(ft);setPoint(it,Tt,kt,ut,et,St/((ot+1)*2),St/((ot+1)*2)),ut=-ut}return ut}ZigZagModifier.prototype.processPath=function(it,g,et,ot){var ct=it._length,ut=shapePool.newElement();if(ut.c=it.c,it.c||(ct-=1),ct===0)return ut;var dt=-1,ft=PolynomialBezier.shapeSegment(it,0);zigZagCorner(ut,it,0,g,et,ot,dt);for(var St=0;St<ct;St+=1)dt=zigZagSegment(ut,ft,g,et,ot,-dt),St===ct-1&&!it.c?ft=null:ft=PolynomialBezier.shapeSegment(it,(St+1)%ct),zigZagCorner(ut,it,St+1,g,et,ot,dt);return ut},ZigZagModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amplitude.v,ft=Math.max(0,Math.round(this.frequency.v)),St=this.pointsType.v;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,ft,St));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(it,g,et){var ot=Math.atan2(g[0]-it[0],g[1]-it[1]);return[polarOffset(it,ot,et),polarOffset(g,ot,et)]}function offsetSegment(it,g){var et,ot,ct,ut,dt,ft,St;St=linearOffset(it.points[0],it.points[1],g),et=St[0],ot=St[1],St=linearOffset(it.points[1],it.points[2],g),ct=St[0],ut=St[1],St=linearOffset(it.points[2],it.points[3],g),dt=St[0],ft=St[1];var kt=lineIntersection(et,ot,ct,ut);kt===null&&(kt=ot);var Tt=lineIntersection(dt,ft,ct,ut);return Tt===null&&(Tt=dt),new PolynomialBezier(et,kt,Tt,ft)}function joinLines(it,g,et,ot,ct){var ut=g.points[3],dt=et.points[0];if(ot===3||pointEqual(ut,dt))return ut;if(ot===2){var ft=-g.tangentAngle(1),St=-et.tangentAngle(0)+Math.PI,kt=lineIntersection(ut,polarOffset(ut,ft+Math.PI/2,100),dt,polarOffset(dt,ft+Math.PI/2,100)),Tt=kt?pointDistance(kt,ut):pointDistance(ut,dt)/2,Rt=polarOffset(ut,ft,2*Tt*roundCorner);return it.setXYAt(Rt[0],Rt[1],"o",it.length()-1),Rt=polarOffset(dt,St,2*Tt*roundCorner),it.setTripleAt(dt[0],dt[1],dt[0],dt[1],Rt[0],Rt[1],it.length()),dt}var jt=pointEqual(ut,g.points[2])?g.points[0]:g.points[2],Ft=pointEqual(dt,et.points[1])?et.points[3]:et.points[1],$t=lineIntersection(jt,ut,dt,Ft);return $t&&pointDistance($t,ut)<ct?(it.setTripleAt($t[0],$t[1],$t[0],$t[1],$t[0],$t[1],it.length()),$t):ut}function getIntersection(it,g){var et=it.intersections(g);return et.length&&floatEqual(et[0][0],1)&&et.shift(),et.length?et[0]:null}function pruneSegmentIntersection(it,g){var et=it.slice(),ot=g.slice(),ct=getIntersection(it[it.length-1],g[0]);return ct&&(et[it.length-1]=it[it.length-1].split(ct[0])[0],ot[0]=g[0].split(ct[1])[1]),it.length>1&&g.length>1&&(ct=getIntersection(it[0],g[g.length-1]),ct)?[[it[0].split(ct[0])[0]],[g[g.length-1].split(ct[1])[1]]]:[et,ot]}function pruneIntersections(it){for(var g,et=1;et<it.length;et+=1)g=pruneSegmentIntersection(it[et-1],it[et]),it[et-1]=g[0],it[et]=g[1];return it.length>1&&(g=pruneSegmentIntersection(it[it.length-1],it[0]),it[it.length-1]=g[0],it[0]=g[1]),it}function offsetSegmentSplit(it,g){var et=it.inflectionPoints(),ot,ct,ut,dt;if(et.length===0)return[offsetSegment(it,g)];if(et.length===1||floatEqual(et[1],1))return ut=it.split(et[0]),ot=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(ct,g)];ut=it.split(et[0]),ot=ut[0];var ft=(et[1]-et[0])/(1-et[0]);return ut=ut[1].split(ft),dt=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(dt,g),offsetSegment(ct,g)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this.miterLimit=PropertyFactory.getProp(it,g.ml,0,null,this),this.lineJoin=g.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(it,g,et,ot){var ct=shapePool.newElement();ct.c=it.c;var ut=it.length();it.c||(ut-=1);var dt,ft,St,kt=[];for(dt=0;dt<ut;dt+=1)St=PolynomialBezier.shapeSegment(it,dt),kt.push(offsetSegmentSplit(St,g));if(!it.c)for(dt=ut-1;dt>=0;dt-=1)St=PolynomialBezier.shapeSegmentInverted(it,dt),kt.push(offsetSegmentSplit(St,g));kt=pruneIntersections(kt);var Tt=null,Rt=null;for(dt=0;dt<kt.length;dt+=1){var jt=kt[dt];for(Rt&&(Tt=joinLines(ct,Rt,jt[0],et,ot)),Rt=jt[jt.length-1],ft=0;ft<jt.length;ft+=1)St=jt[ft],Tt&&pointEqual(St.points[0],Tt)?ct.setXYAt(St.points[1][0],St.points[1][1],"o",ct.length()-1):ct.setTripleAt(St.points[0][0],St.points[0][1],St.points[1][0],St.points[1][1],St.points[0][0],St.points[0][1],ct.length()),ct.setTripleAt(St.points[3][0],St.points[3][1],St.points[3][0],St.points[3][1],St.points[2][0],St.points[2][1],ct.length()),Tt=St.points[3]}return kt.length&&joinLines(ct,Rt,kt[0][0],et,ot),ct},OffsetPathModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v,ft=this.miterLimit.v,St=this.lineJoin;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,St,ft));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(it){for(var g=it.fStyle?it.fStyle.split(" "):[],et="normal",ot="normal",ct=g.length,ut,dt=0;dt<ct;dt+=1)switch(ut=g[dt].toLowerCase(),ut){case"italic":ot="italic";break;case"bold":et="700";break;case"black":et="900";break;case"medium":et="500";break;case"regular":case"normal":et="400";break;case"light":case"thin":et="200";break}return{style:ot,weight:it.fWeight||et}}var FontManager=function(){var it=5e3,g={w:0,size:0,shapes:[],data:{shapes:[]}},et=[];et=et.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ot=127988,ct=917631,ut=917601,dt=917626,ft=65039,St=8205,kt=127462,Tt=127487,Rt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function jt(fn){var xn=fn.split(","),an,cn=xn.length,bn=[];for(an=0;an<cn;an+=1)xn[an]!=="sans-serif"&&xn[an]!=="monospace"&&bn.push(xn[an]);return bn.join(",")}function Ft(fn,xn){var an=createTag("span");an.setAttribute("aria-hidden",!0),an.style.fontFamily=xn;var cn=createTag("span");cn.innerText="giItT1WQy@!-/#",an.style.position="absolute",an.style.left="-10000px",an.style.top="-10000px",an.style.fontSize="300px",an.style.fontVariant="normal",an.style.fontStyle="normal",an.style.fontWeight="normal",an.style.letterSpacing="0",an.appendChild(cn),document.body.appendChild(an);var bn=cn.offsetWidth;return cn.style.fontFamily=jt(fn)+", "+xn,{node:cn,w:bn,parent:an}}function $t(){var fn,xn=this.fonts.length,an,cn,bn=xn;for(fn=0;fn<xn;fn+=1)this.fonts[fn].loaded?bn-=1:this.fonts[fn].fOrigin==="n"||this.fonts[fn].origin===0?this.fonts[fn].loaded=!0:(an=this.fonts[fn].monoCase.node,cn=this.fonts[fn].monoCase.w,an.offsetWidth!==cn?(bn-=1,this.fonts[fn].loaded=!0):(an=this.fonts[fn].sansCase.node,cn=this.fonts[fn].sansCase.w,an.offsetWidth!==cn&&(bn-=1,this.fonts[fn].loaded=!0)),this.fonts[fn].loaded&&(this.fonts[fn].sansCase.parent.parentNode.removeChild(this.fonts[fn].sansCase.parent),this.fonts[fn].monoCase.parent.parentNode.removeChild(this.fonts[fn].monoCase.parent)));bn!==0&&Date.now()-this.initTime<it?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function zt(fn,xn){var an=document.body&&xn?"svg":"canvas",cn,bn=getFontProperties(fn);if(an==="svg"){var mn=createNS("text");mn.style.fontSize="100px",mn.setAttribute("font-family",fn.fFamily),mn.setAttribute("font-style",bn.style),mn.setAttribute("font-weight",bn.weight),mn.textContent="1",fn.fClass?(mn.style.fontFamily="inherit",mn.setAttribute("class",fn.fClass)):mn.style.fontFamily=fn.fFamily,xn.appendChild(mn),cn=mn}else{var Tn=new OffscreenCanvas(500,500).getContext("2d");Tn.font=bn.style+" "+bn.weight+" 100px "+fn.fFamily,cn=Tn}function An(Pn){return an==="svg"?(cn.textContent=Pn,cn.getComputedTextLength()):cn.measureText(Pn).width}return{measureText:An}}function Ut(fn,xn){if(!fn){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=fn.list;return}if(!document.body){this.isLoaded=!0,fn.list.forEach(function(On){On.helper=zt(On),On.cache={}}),this.fonts=fn.list;return}var an=fn.list,cn,bn=an.length,mn=bn;for(cn=0;cn<bn;cn+=1){var Tn=!0,An,Pn;if(an[cn].loaded=!1,an[cn].monoCase=Ft(an[cn].fFamily,"monospace"),an[cn].sansCase=Ft(an[cn].fFamily,"sans-serif"),!an[cn].fPath)an[cn].loaded=!0,mn-=1;else if(an[cn].fOrigin==="p"||an[cn].origin===3){if(An=document.querySelectorAll('style[f-forigin="p"][f-family="'+an[cn].fFamily+'"], style[f-origin="3"][f-family="'+an[cn].fFamily+'"]'),An.length>0&&(Tn=!1),Tn){var Mn=createTag("style");Mn.setAttribute("f-forigin",an[cn].fOrigin),Mn.setAttribute("f-origin",an[cn].origin),Mn.setAttribute("f-family",an[cn].fFamily),Mn.type="text/css",Mn.innerText="@font-face {font-family: "+an[cn].fFamily+"; font-style: normal; src: url('"+an[cn].fPath+"');}",xn.appendChild(Mn)}}else if(an[cn].fOrigin==="g"||an[cn].origin===1){for(An=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Pn=0;Pn<An.length;Pn+=1)An[Pn].href.indexOf(an[cn].fPath)!==-1&&(Tn=!1);if(Tn){var Rn=createTag("link");Rn.setAttribute("f-forigin",an[cn].fOrigin),Rn.setAttribute("f-origin",an[cn].origin),Rn.type="text/css",Rn.rel="stylesheet",Rn.href=an[cn].fPath,document.body.appendChild(Rn)}}else if(an[cn].fOrigin==="t"||an[cn].origin===2){for(An=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Pn=0;Pn<An.length;Pn+=1)an[cn].fPath===An[Pn].src&&(Tn=!1);if(Tn){var Cn=createTag("link");Cn.setAttribute("f-forigin",an[cn].fOrigin),Cn.setAttribute("f-origin",an[cn].origin),Cn.setAttribute("rel","stylesheet"),Cn.setAttribute("href",an[cn].fPath),xn.appendChild(Cn)}}an[cn].helper=zt(an[cn],xn),an[cn].cache={},this.fonts.push(an[cn])}mn===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Bt(fn){if(fn){this.chars||(this.chars=[]);var xn,an=fn.length,cn,bn=this.chars.length,mn;for(xn=0;xn<an;xn+=1){for(cn=0,mn=!1;cn<bn;)this.chars[cn].style===fn[xn].style&&this.chars[cn].fFamily===fn[xn].fFamily&&this.chars[cn].ch===fn[xn].ch&&(mn=!0),cn+=1;mn||(this.chars.push(fn[xn]),bn+=1)}}}function Ht(fn,xn,an){for(var cn=0,bn=this.chars.length;cn<bn;){if(this.chars[cn].ch===fn&&this.chars[cn].style===xn&&this.chars[cn].fFamily===an)return this.chars[cn];cn+=1}return(typeof fn=="string"&&fn.charCodeAt(0)!==13||!fn)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",fn,xn,an)),g}function Jt(fn,xn,an){var cn=this.getFontByName(xn),bn=fn;if(!cn.cache[bn]){var mn=cn.helper;if(fn===" "){var Tn=mn.measureText("|"+fn+"|"),An=mn.measureText("||");cn.cache[bn]=(Tn-An)/100}else cn.cache[bn]=mn.measureText(fn)/100}return cn.cache[bn]*an}function Zt(fn){for(var xn=0,an=this.fonts.length;xn<an;){if(this.fonts[xn].fName===fn)return this.fonts[xn];xn+=1}return this.fonts[0]}function tn(fn){var xn=0,an=fn.charCodeAt(0);if(an>=55296&&an<=56319){var cn=fn.charCodeAt(1);cn>=56320&&cn<=57343&&(xn=(an-55296)*1024+cn-56320+65536)}return xn}function nn(fn,xn){var an=fn.toString(16)+xn.toString(16);return Rt.indexOf(an)!==-1}function rn(fn){return fn===St}function on(fn){return fn===ft}function pn(fn){var xn=tn(fn);return xn>=kt&&xn<=Tt}function dn(fn){return pn(fn.substr(0,2))&&pn(fn.substr(2,2))}function hn(fn){return et.indexOf(fn)!==-1}function un(fn,xn){var an=tn(fn.substr(xn,2));if(an!==ot)return!1;var cn=0;for(xn+=2;cn<5;){if(an=tn(fn.substr(xn,2)),an<ut||an>dt)return!1;cn+=1,xn+=2}return tn(fn.substr(xn,2))===ct}function En(){this.isLoaded=!0}var wn=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};wn.isModifier=nn,wn.isZeroWidthJoiner=rn,wn.isFlagEmoji=dn,wn.isRegionalCode=pn,wn.isCombinedCharacter=hn,wn.isRegionalFlag=un,wn.isVariationSelector=on,wn.BLACK_FLAG_CODE_POINT=ot;var Sn={addChars:Bt,addFonts:Ut,getCharData:Ht,getFontByName:Zt,measureText:Jt,checkLoadedFonts:$t,setIsLoaded:En};return wn.prototype=Sn,wn}();function SlotManager(it){this.animationData=it}SlotManager.prototype.getProp=function(it){return this.animationData.slots&&this.animationData.slots[it.sid]?Object.assign(it,this.animationData.slots[it.sid].p):it};function slotFactory(it){return new SlotManager(it)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(g){this.renderableComponents.indexOf(g)===-1&&this.renderableComponents.push(g)},removeRenderableComponent:function(g){this.renderableComponents.indexOf(g)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(g),1)},prepareRenderableFrame:function(g){this.checkLayerLimits(g)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(g){this.data.ip-this.data.st<=g&&this.data.op-this.data.st>g?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var g,et=this.renderableComponents.length;for(g=0;g<et;g+=1)this.renderableComponents[g].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var it={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(g){return it[g]||""}}();function SliderEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function AngleEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function ColorEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function PointEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function LayerIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function MaskIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function CheckboxEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function NoValueEffect(){this.p={}}function EffectsManager(it,g){var et=it.ef||[];this.effectElements=[];var ot,ct=et.length,ut;for(ot=0;ot<ct;ot+=1)ut=new GroupEffect(et[ot],g),this.effectElements.push(ut)}function GroupEffect(it,g){this.init(it,g)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(it,g){this.data=it,this.effectElements=[],this.initDynamicPropertyContainer(g);var et,ot=this.data.ef.length,ct,ut=this.data.ef;for(et=0;et<ot;et+=1){switch(ct=null,ut[et].ty){case 0:ct=new SliderEffect(ut[et],g,this);break;case 1:ct=new AngleEffect(ut[et],g,this);break;case 2:ct=new ColorEffect(ut[et],g,this);break;case 3:ct=new PointEffect(ut[et],g,this);break;case 4:case 7:ct=new CheckboxEffect(ut[et],g,this);break;case 10:ct=new LayerIndexEffect(ut[et],g,this);break;case 11:ct=new MaskIndexEffect(ut[et],g,this);break;case 5:ct=new EffectsManager(ut[et],g);break;default:ct=new NoValueEffect(ut[et]);break}ct&&this.effectElements.push(ct)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var g=0,et=this.data.masksProperties.length;g<et;){if(this.data.masksProperties[g].mode!=="n"&&this.data.masksProperties[g].cl!==!1)return!0;g+=1}return!1},initExpressions:function(){var g=getExpressionInterfaces();if(g){var et=g("layer"),ot=g("effects"),ct=g("shape"),ut=g("text"),dt=g("comp");this.layerInterface=et(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ft=ot.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ft),this.data.ty===0||this.data.xt?this.compInterface=dt(this):this.data.ty===4?(this.layerInterface.shapeInterface=ct(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ut(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var g=getBlendMode(this.data.bm),et=this.baseElement||this.layerElement;et.style["mix-blend-mode"]=g},initBaseData:function(g,et,ot){this.globalData=et,this.comp=ot,this.data=g,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(g,et){var ot,ct=this.dynamicProperties.length;for(ot=0;ot<ct;ot+=1)(et||this._isParent&&this.dynamicProperties[ot].propType==="transform")&&(this.dynamicProperties[ot].getValue(),this.dynamicProperties[ot]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&this.dynamicProperties.push(g)}};function FootageElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.footageData=g.imageLoader.getAsset(this.assetData),this.initBaseData(it,g,et)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var it=getExpressionInterfaces();if(it){var g=it("footage");this.layerInterface=g(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.initBaseData(it,g,et),this._isPlaying=!1,this._canPlay=!1;var ot=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ot),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,it.au&&it.au.lv?it.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(it){if(this.prepareRenderableFrame(it,!0),this.prepareProperties(it,!0),this.tm._placeholder)this._currentTime=it/this.data.sr;else{var g=this.tm.v;this._currentTime=g}this._volume=this.lv.v[0];var et=this._volume*this._volumeMultiplier;this._previousVolume!==et&&(this._previousVolume=et,this.audio.volume(et))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(it){this.audio.rate(it)},AudioElement.prototype.volume=function(it){this._volumeMultiplier=it,this._previousVolume=it*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(it){var g,et=this.layers.length,ot;for(this.completeLayers=!0,g=et-1;g>=0;g-=1)this.elements[g]||(ot=this.layers[g],ot.ip-ot.st<=it-this.layers[g].st&&ot.op-ot.st>it-this.layers[g].st&&this.buildItem(g)),this.completeLayers=this.elements[g]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(it){switch(it.ty){case 2:return this.createImage(it);case 0:return this.createComp(it);case 1:return this.createSolid(it);case 3:return this.createNull(it);case 4:return this.createShape(it);case 5:return this.createText(it);case 6:return this.createAudio(it);case 13:return this.createCamera(it);case 15:return this.createFootage(it);default:return this.createNull(it)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(it){return new AudioElement(it,this.globalData,this)},BaseRenderer.prototype.createFootage=function(it){return new FootageElement(it,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.buildItem(it);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(it){this.completeLayers=!1;var g,et=it.length,ot,ct=this.layers.length;for(g=0;g<et;g+=1)for(ot=0;ot<ct;){if(this.layers[ot].id===it[g].id){this.layers[ot]=it[g];break}ot+=1}},BaseRenderer.prototype.setProjectInterface=function(it){this.globalData.projectInterface=it},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(it,g,et){for(var ot=this.elements,ct=this.layers,ut=0,dt=ct.length;ut<dt;)ct[ut].ind==g&&(!ot[ut]||ot[ut]===!0?(this.buildItem(ut),this.addPendingElement(it)):(et.push(ot[ut]),ot[ut].setAsParent(),ct[ut].parent!==void 0?this.buildElementParenting(it,ct[ut].parent,et):it.setHierarchy(et))),ut+=1},BaseRenderer.prototype.addPendingElement=function(it){this.pendingElements.push(it)},BaseRenderer.prototype.searchExtraCompositions=function(it){var g,et=it.length;for(g=0;g<et;g+=1)if(it[g].xt){var ot=this.createComp(it[g]);ot.initExpressions(),this.globalData.projectInterface.registerComposition(ot)}},BaseRenderer.prototype.getElementById=function(it){var g,et=this.elements.length;for(g=0;g<et;g+=1)if(this.elements[g].data.ind===it)return this.elements[g];return null},BaseRenderer.prototype.getElementByPath=function(it){var g=it.shift(),et;if(typeof g=="number")et=this.elements[g];else{var ot,ct=this.elements.length;for(ot=0;ot<ct;ot+=1)if(this.elements[ot].data.nm===g){et=this.elements[ot];break}}return it.length===0?et:et.getElementByPath(it)},BaseRenderer.prototype.setupGlobalData=function(it,g){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(it),this.globalData.fontManager.addChars(it.chars),this.globalData.fontManager.addFonts(it.fonts,g),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=it.fr,this.globalData.nm=it.nm,this.globalData.compSize={w:it.w,h:it.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var g=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:g,localMat:g,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var g,et=this.finalTransform.mat,ot=0,ct=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ot<ct;){if(this.hierarchy[ot].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ot+=1}if(this.finalTransform._matMdf)for(g=this.finalTransform.mProp.v.props,et.cloneFromProps(g),ot=0;ot<ct;ot+=1)et.multiply(this.hierarchy[ot].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var g=0,et=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;g<et;)this.localTransforms[g]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[g]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),g+=1;if(this.finalTransform._localMatMdf){var ot=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ot),g=1;g<et;g+=1){var ct=this.localTransforms[g].matrix;ot.multiply(ct)}ot.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ut=this.finalTransform.localOpacity;for(g=0;g<et;g+=1)ut*=this.localTransforms[g].opacity*.01;this.finalTransform.localOpacity=ut}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var g=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(g.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var et=0,ot=g.length;for(et=0;et<ot;et+=1)this.localTransforms.push(g[et])}}},globalToLocal:function(g){var et=[];et.push(this.finalTransform);for(var ot=!0,ct=this.comp;ot;)ct.finalTransform?(ct.data.hasMask&&et.splice(0,0,ct.finalTransform),ct=ct.comp):ot=!1;var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)ft=et[ut].mat.applyToPointArray(0,0,0),g=[g[0]-ft[0],g[1]-ft[1],0];return g},mHelper:new Matrix};function MaskElement(it,g,et){this.data=it,this.element=g,this.globalData=et,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ot=this.globalData.defs,ct,ut=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ut),this.solidPath="";var dt,ft=this.masksProperties,St=0,kt=[],Tt,Rt,jt=createElementID(),Ft,$t,zt,Ut,Bt="clipPath",Ht="clip-path";for(ct=0;ct<ut;ct+=1)if((ft[ct].mode!=="a"&&ft[ct].mode!=="n"||ft[ct].inv||ft[ct].o.k!==100||ft[ct].o.x)&&(Bt="mask",Ht="mask"),(ft[ct].mode==="s"||ft[ct].mode==="i")&&St===0?(Ft=createNS("rect"),Ft.setAttribute("fill","#ffffff"),Ft.setAttribute("width",this.element.comp.data.w||0),Ft.setAttribute("height",this.element.comp.data.h||0),kt.push(Ft)):Ft=null,dt=createNS("path"),ft[ct].mode==="n")this.viewData[ct]={op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),elem:dt,lastPath:""},ot.appendChild(dt);else{St+=1,dt.setAttribute("fill",ft[ct].mode==="s"?"#000000":"#ffffff"),dt.setAttribute("clip-rule","nonzero");var Jt;if(ft[ct].x.k!==0?(Bt="mask",Ht="mask",Ut=PropertyFactory.getProp(this.element,ft[ct].x,0,null,this.element),Jt=createElementID(),$t=createNS("filter"),$t.setAttribute("id",Jt),zt=createNS("feMorphology"),zt.setAttribute("operator","erode"),zt.setAttribute("in","SourceGraphic"),zt.setAttribute("radius","0"),$t.appendChild(zt),ot.appendChild($t),dt.setAttribute("stroke",ft[ct].mode==="s"?"#000000":"#ffffff")):(zt=null,Ut=null),this.storedData[ct]={elem:dt,x:Ut,expan:zt,lastPath:"",lastOperator:"",filterId:Jt,lastRadius:0},ft[ct].mode==="i"){Rt=kt.length;var Zt=createNS("g");for(Tt=0;Tt<Rt;Tt+=1)Zt.appendChild(kt[Tt]);var tn=createNS("mask");tn.setAttribute("mask-type","alpha"),tn.setAttribute("id",jt+"_"+St),tn.appendChild(dt),ot.appendChild(tn),Zt.setAttribute("mask","url("+getLocationHref()+"#"+jt+"_"+St+")"),kt.length=0,kt.push(Zt)}else kt.push(dt);ft[ct].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ct]={elem:dt,lastPath:"",op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),invRect:Ft},this.viewData[ct].prop.k||this.drawPath(ft[ct],this.viewData[ct].prop.v,this.viewData[ct])}for(this.maskElement=createNS(Bt),ut=kt.length,ct=0;ct<ut;ct+=1)this.maskElement.appendChild(kt[ct]);St>0&&(this.maskElement.setAttribute("id",jt),this.element.maskedElement.setAttribute(Ht,"url("+getLocationHref()+"#"+jt+")"),ot.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(it){return this.viewData[it].prop},MaskElement.prototype.renderFrame=function(it){var g=this.element.finalTransform.mat,et,ot=this.masksProperties.length;for(et=0;et<ot;et+=1)if((this.viewData[et].prop._mdf||it)&&this.drawPath(this.masksProperties[et],this.viewData[et].prop.v,this.viewData[et]),(this.viewData[et].op._mdf||it)&&this.viewData[et].elem.setAttribute("fill-opacity",this.viewData[et].op.v),this.masksProperties[et].mode!=="n"&&(this.viewData[et].invRect&&(this.element.finalTransform.mProp._mdf||it)&&this.viewData[et].invRect.setAttribute("transform",g.getInverseMatrix().to2dCSS()),this.storedData[et].x&&(this.storedData[et].x._mdf||it))){var ct=this.storedData[et].expan;this.storedData[et].x.v<0?(this.storedData[et].lastOperator!=="erode"&&(this.storedData[et].lastOperator="erode",this.storedData[et].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[et].filterId+")")),ct.setAttribute("radius",-this.storedData[et].x.v)):(this.storedData[et].lastOperator!=="dilate"&&(this.storedData[et].lastOperator="dilate",this.storedData[et].elem.setAttribute("filter",null)),this.storedData[et].elem.setAttribute("stroke-width",this.storedData[et].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var it="M0,0 ";return it+=" h"+this.globalData.compSize.w,it+=" v"+this.globalData.compSize.h,it+=" h-"+this.globalData.compSize.w,it+=" v-"+this.globalData.compSize.h+" ",it},MaskElement.prototype.drawPath=function(it,g,et){var ot=" M"+g.v[0][0]+","+g.v[0][1],ct,ut;for(ut=g._length,ct=1;ct<ut;ct+=1)ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[ct][0]+","+g.i[ct][1]+" "+g.v[ct][0]+","+g.v[ct][1];if(g.c&&ut>1&&(ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[0][0]+","+g.i[0][1]+" "+g.v[0][0]+","+g.v[0][1]),et.lastPath!==ot){var dt="";et.elem&&(g.c&&(dt=it.inv?this.solidPath+ot:ot),et.elem.setAttribute("d",dt)),et.lastPath=ot}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var it={};it.createFilter=g,it.createAlphaToLuminanceFilter=et;function g(ot,ct){var ut=createNS("filter");return ut.setAttribute("id",ot),ct!==!0&&(ut.setAttribute("filterUnits","objectBoundingBox"),ut.setAttribute("x","0%"),ut.setAttribute("y","0%"),ut.setAttribute("width","100%"),ut.setAttribute("height","100%")),ut}function et(){var ot=createNS("feColorMatrix");return ot.setAttribute("type","matrix"),ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ot}return it}(),featureSupport=function(){var it={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(it.maskType=!1),/firefox/i.test(navigator.userAgent)&&(it.svgLumaHidden=!1),it}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(it){var g,et="SourceGraphic",ot=it.data.ef?it.data.ef.length:0,ct=createElementID(),ut=filtersFactory.createFilter(ct,!0),dt=0;this.filters=[];var ft;for(g=0;g<ot;g+=1){ft=null;var St=it.data.ef[g].ty;if(registeredEffects$1[St]){var kt=registeredEffects$1[St].effect;ft=new kt(ut,it.effectsManager.effectElements[g],it,idPrefix+dt,et),et=idPrefix+dt,registeredEffects$1[St].countsAsEffect&&(dt+=1)}ft&&this.filters.push(ft)}dt&&(it.globalData.defs.appendChild(ut),it.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ct+")")),this.filters.length&&it.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},SVGEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect$1(it,g,et){registeredEffects$1[it]={effect:g,countsAsEffect:et}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var g=null;if(this.data.td){this.matteMasks={};var et=createNS("g");et.setAttribute("id",this.layerId),et.appendChild(this.layerElement),g=et,this.globalData.defs.appendChild(et)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),g=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ot=createNS("clipPath"),ct=createNS("path");ct.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ut=createElementID();if(ot.setAttribute("id",ut),ot.appendChild(ct),this.globalData.defs.appendChild(ot),this.checkMasks()){var dt=createNS("g");dt.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")"),dt.appendChild(this.layerElement),this.transformedElement=dt,g?g.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(g){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[g]){var et=this.layerId+"_"+g,ot,ct,ut,dt;if(g===1||g===3){var ft=createNS("mask");ft.setAttribute("id",et),ft.setAttribute("mask-type",g===3?"luminance":"alpha"),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ut),this.globalData.defs.appendChild(ft),!featureSupport.maskType&&g===1&&(ft.setAttribute("mask-type","luminance"),ot=createElementID(),ct=filtersFactory.createFilter(ot),this.globalData.defs.appendChild(ct),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),dt.appendChild(ut),ft.appendChild(dt),dt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"))}else if(g===2){var St=createNS("mask");St.setAttribute("id",et),St.setAttribute("mask-type","alpha");var kt=createNS("g");St.appendChild(kt),ot=createElementID(),ct=filtersFactory.createFilter(ot);var Tt=createNS("feComponentTransfer");Tt.setAttribute("in","SourceGraphic"),ct.appendChild(Tt);var Rt=createNS("feFuncA");Rt.setAttribute("type","table"),Rt.setAttribute("tableValues","1.0 0.0"),Tt.appendChild(Rt),this.globalData.defs.appendChild(ct);var jt=createNS("rect");jt.setAttribute("width",this.comp.data.w),jt.setAttribute("height",this.comp.data.h),jt.setAttribute("x","0"),jt.setAttribute("y","0"),jt.setAttribute("fill","#ffffff"),jt.setAttribute("opacity","0"),kt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"),kt.appendChild(jt),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),kt.appendChild(ut),featureSupport.maskType||(St.setAttribute("mask-type","luminance"),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),kt.appendChild(jt),dt.appendChild(this.layerElement),kt.appendChild(dt)),this.globalData.defs.appendChild(St)}this.matteMasks[g]=et}return this.matteMasks[g]},setMatte:function(g){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+g+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(g){this.hierarchy=g},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var it={initElement:function(et,ot,ct){this.initFrame(),this.initBaseData(et,ot,ct),this.initTransform(et,ot,ct),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var et=this.baseElement||this.layerElement;et.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var et=this.baseElement||this.layerElement;et.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(it)],RenderableDOMElement)})();function IImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.assetData&&this.assetData.sid&&(this.assetData=g.slotManager.getProp(this.assetData)),this.initElement(it,g,et),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(it,g){this.elem=it,this.pos=g}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(g){var et,ot=this.shapeModifiers.length;for(et=0;et<ot;et+=1)this.shapeModifiers[et].addShape(g)},isShapeInAnimatedModifiers:function(g){for(var et=0,ot=this.shapeModifiers.length;et<ot;)if(this.shapeModifiers[et].isAnimatedWithShape(g))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var g,et=this.shapes.length;for(g=0;g<et;g+=1)this.shapes[g].sh.reset();et=this.shapeModifiers.length;var ot;for(g=et-1;g>=0&&(ot=this.shapeModifiers[g].processShapes(this._isFirstFrame),!ot);g-=1);}},searchProcessedElement:function(g){for(var et=this.processedElements,ot=0,ct=et.length;ot<ct;){if(et[ot].elem===g)return et[ot].pos;ot+=1}return 0},addProcessedElement:function(g,et){for(var ot=this.processedElements,ct=ot.length;ct;)if(ct-=1,ot[ct].elem===g){ot[ct].pos=et;return}ot.push(new ProcessedElement(g,et))},prepareFrame:function(g){this.prepareRenderableFrame(g),this.prepareProperties(g,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(it,g,et){this.caches=[],this.styles=[],this.transformers=it,this.lStr="",this.sh=et,this.lvl=g,this._isAnimated=!!et.k;for(var ot=0,ct=it.length;ot<ct;){if(it[ot].mProps.dynamicProperties.length){this._isAnimated=!0;break}ot+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(it,g){this.data=it,this.type=it.ty,this.d="",this.lvl=g,this._mdf=!1,this.closed=it.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(it,g,et,ot){this.elem=it,this.frameId=-1,this.dataProps=createSizedArray(g.length),this.renderer=et,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",g.length?g.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ot);var ct,ut=g.length||0,dt;for(ct=0;ct<ut;ct+=1)dt=PropertyFactory.getProp(it,g[ct].v,0,0,this),this.k=dt.k||this.k,this.dataProps[ct]={n:g[ct].n,p:dt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(it){if(!(this.elem.globalData.frameId===this.frameId&&!it)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||it,this._mdf)){var g=0,et=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),g=0;g<et;g+=1)this.dataProps[g].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[g].p.v:this.dashArray[g]=this.dataProps[g].p.v:this.dashoffset[0]=this.dataProps[g].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.style=et}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(it,g,et){this.data=g,this.c=createTypedArray("uint8c",g.p*4);var ot=g.k.k[0].s?g.k.k[0].s.length-g.p*4:g.k.k.length-g.p*4;this.o=createTypedArray("float32",ot),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ot,this.initDynamicPropertyContainer(et),this.prop=PropertyFactory.getProp(it,g.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(it,g){for(var et=0,ot=this.o.length/2,ct;et<ot;){if(ct=Math.abs(it[et*4]-it[g*4+et*2]),ct>.01)return!1;et+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var it=0,g=this.data.k.k.length;it<g;){if(!this.comparePoints(this.data.k.k[it].s,this.data.p))return!1;it+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(it){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||it){var g,et=this.data.p*4,ot,ct;for(g=0;g<et;g+=1)ot=g%4===0?100:255,ct=Math.round(this.prop.v[g]*ot),this.c[g]!==ct&&(this.c[g]=ct,this._cmdf=!it);if(this.o.length)for(et=this.prop.v.length,g=this.data.p*4;g<et;g+=1)ot=g%2===0?100:1,ct=g%2===0?Math.round(this.prop.v[g]*100):this.prop.v[g],this.o[g-this.data.p*4]!==ct&&(this.o[g-this.data.p*4]=ct,this._omdf=!it);this._mdf=!it}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.initGradientData(it,g,et)}SVGGradientFillStyleData.prototype.initGradientData=function(it,g,et){this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.s=PropertyFactory.getProp(it,g.s,1,null,this),this.e=PropertyFactory.getProp(it,g.e,1,null,this),this.h=PropertyFactory.getProp(it,g.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(it,g.a||{k:0},0,degToRads,this),this.g=new GradientProperty(it,g.g,this),this.style=et,this.stops=[],this.setGradientData(et.pElem,g),this.setGradientOpacity(g,et),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(it,g){var et=createElementID(),ot=createNS(g.t===1?"linearGradient":"radialGradient");ot.setAttribute("id",et),ot.setAttribute("spreadMethod","pad"),ot.setAttribute("gradientUnits","userSpaceOnUse");var ct=[],ut,dt,ft;for(ft=g.g.p*4,dt=0;dt<ft;dt+=4)ut=createNS("stop"),ot.appendChild(ut),ct.push(ut);it.setAttribute(g.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+et+")"),this.gf=ot,this.cst=ct},SVGGradientFillStyleData.prototype.setGradientOpacity=function(it,g){if(this.g._hasOpacity&&!this.g._collapsable){var et,ot,ct,ut=createNS("mask"),dt=createNS("path");ut.appendChild(dt);var ft=createElementID(),St=createElementID();ut.setAttribute("id",St);var kt=createNS(it.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",ft),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse"),ct=it.g.k.k[0].s?it.g.k.k[0].s.length:it.g.k.k.length;var Tt=this.stops;for(ot=it.g.p*4;ot<ct;ot+=2)et=createNS("stop"),et.setAttribute("stop-color","rgb(255,255,255)"),kt.appendChild(et),Tt.push(et);dt.setAttribute(it.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ft+")"),it.ty==="gs"&&(dt.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),dt.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),it.lj===1&&dt.setAttribute("stroke-miterlimit",it.ml)),this.of=kt,this.ms=ut,this.ost=Tt,this.maskId=St,g.msElem=dt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.initGradientData(it,g,et),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(it,g,et){this.transform={mProps:it,op:g,container:et},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(g,et,ot,ct){if(et===0)return"";var ut=g.o,dt=g.i,ft=g.v,St,kt=" M"+ct.applyToPointStringified(ft[0][0],ft[0][1]);for(St=1;St<et;St+=1)kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[St][0],dt[St][1])+" "+ct.applyToPointStringified(ft[St][0],ft[St][1]);return ot&&et&&(kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[0][0],dt[0][1])+" "+ct.applyToPointStringified(ft[0][0],ft[0][1]),kt+="z"),kt},SVGElementsRenderer=function(){var it=new Matrix,g=new Matrix,et={createRenderFunction:ot};function ot(Rt){switch(Rt.ty){case"fl":return ft;case"gf":return kt;case"gs":return St;case"st":return Tt;case"sh":case"el":case"rc":case"sr":return dt;case"tr":return ct;case"no":return ut;default:return null}}function ct(Rt,jt,Ft){(Ft||jt.transform.op._mdf)&&jt.transform.container.setAttribute("opacity",jt.transform.op.v),(Ft||jt.transform.mProps._mdf)&&jt.transform.container.setAttribute("transform",jt.transform.mProps.v.to2dCSS())}function ut(){}function dt(Rt,jt,Ft){var $t,zt,Ut,Bt,Ht,Jt,Zt=jt.styles.length,tn=jt.lvl,nn,rn,on,pn;for(Jt=0;Jt<Zt;Jt+=1){if(Bt=jt.sh._mdf||Ft,jt.styles[Jt].lvl<tn){for(rn=g.reset(),on=tn-jt.styles[Jt].lvl,pn=jt.transformers.length-1;!Bt&&on>0;)Bt=jt.transformers[pn].mProps._mdf||Bt,on-=1,pn-=1;if(Bt)for(on=tn-jt.styles[Jt].lvl,pn=jt.transformers.length-1;on>0;)rn.multiply(jt.transformers[pn].mProps.v),on-=1,pn-=1}else rn=it;if(nn=jt.sh.paths,zt=nn._length,Bt){for(Ut="",$t=0;$t<zt;$t+=1)Ht=nn.shapes[$t],Ht&&Ht._length&&(Ut+=buildShapeString(Ht,Ht._length,Ht.c,rn));jt.caches[Jt]=Ut}else Ut=jt.caches[Jt];jt.styles[Jt].d+=Rt.hd===!0?"":Ut,jt.styles[Jt]._mdf=Bt||jt.styles[Jt]._mdf}}function ft(Rt,jt,Ft){var $t=jt.style;(jt.c._mdf||Ft)&&$t.pElem.setAttribute("fill","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||Ft)&&$t.pElem.setAttribute("fill-opacity",jt.o.v)}function St(Rt,jt,Ft){kt(Rt,jt,Ft),Tt(Rt,jt,Ft)}function kt(Rt,jt,Ft){var $t=jt.gf,zt=jt.g._hasOpacity,Ut=jt.s.v,Bt=jt.e.v;if(jt.o._mdf||Ft){var Ht=Rt.ty==="gf"?"fill-opacity":"stroke-opacity";jt.style.pElem.setAttribute(Ht,jt.o.v)}if(jt.s._mdf||Ft){var Jt=Rt.t===1?"x1":"cx",Zt=Jt==="x1"?"y1":"cy";$t.setAttribute(Jt,Ut[0]),$t.setAttribute(Zt,Ut[1]),zt&&!jt.g._collapsable&&(jt.of.setAttribute(Jt,Ut[0]),jt.of.setAttribute(Zt,Ut[1]))}var tn,nn,rn,on;if(jt.g._cmdf||Ft){tn=jt.cst;var pn=jt.g.c;for(rn=tn.length,nn=0;nn<rn;nn+=1)on=tn[nn],on.setAttribute("offset",pn[nn*4]+"%"),on.setAttribute("stop-color","rgb("+pn[nn*4+1]+","+pn[nn*4+2]+","+pn[nn*4+3]+")")}if(zt&&(jt.g._omdf||Ft)){var dn=jt.g.o;for(jt.g._collapsable?tn=jt.cst:tn=jt.ost,rn=tn.length,nn=0;nn<rn;nn+=1)on=tn[nn],jt.g._collapsable||on.setAttribute("offset",dn[nn*2]+"%"),on.setAttribute("stop-opacity",dn[nn*2+1])}if(Rt.t===1)(jt.e._mdf||Ft)&&($t.setAttribute("x2",Bt[0]),$t.setAttribute("y2",Bt[1]),zt&&!jt.g._collapsable&&(jt.of.setAttribute("x2",Bt[0]),jt.of.setAttribute("y2",Bt[1])));else{var hn;if((jt.s._mdf||jt.e._mdf||Ft)&&(hn=Math.sqrt(Math.pow(Ut[0]-Bt[0],2)+Math.pow(Ut[1]-Bt[1],2)),$t.setAttribute("r",hn),zt&&!jt.g._collapsable&&jt.of.setAttribute("r",hn)),jt.e._mdf||jt.h._mdf||jt.a._mdf||Ft){hn||(hn=Math.sqrt(Math.pow(Ut[0]-Bt[0],2)+Math.pow(Ut[1]-Bt[1],2)));var un=Math.atan2(Bt[1]-Ut[1],Bt[0]-Ut[0]),En=jt.h.v;En>=1?En=.99:En<=-1&&(En=-.99);var wn=hn*En,Sn=Math.cos(un+jt.a.v)*wn+Ut[0],fn=Math.sin(un+jt.a.v)*wn+Ut[1];$t.setAttribute("fx",Sn),$t.setAttribute("fy",fn),zt&&!jt.g._collapsable&&(jt.of.setAttribute("fx",Sn),jt.of.setAttribute("fy",fn))}}}function Tt(Rt,jt,Ft){var $t=jt.style,zt=jt.d;zt&&(zt._mdf||Ft)&&zt.dashStr&&($t.pElem.setAttribute("stroke-dasharray",zt.dashStr),$t.pElem.setAttribute("stroke-dashoffset",zt.dashoffset[0])),jt.c&&(jt.c._mdf||Ft)&&$t.pElem.setAttribute("stroke","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||Ft)&&$t.pElem.setAttribute("stroke-opacity",jt.o.v),(jt.w._mdf||Ft)&&($t.pElem.setAttribute("stroke-width",jt.w.v),$t.msElem&&$t.msElem.setAttribute("stroke-width",jt.w.v))}return et}();function SVGShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(it,g,et),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var it,g=this.shapes.length,et,ot,ct=this.stylesList.length,ut,dt=[],ft=!1;for(ot=0;ot<ct;ot+=1){for(ut=this.stylesList[ot],ft=!1,dt.length=0,it=0;it<g;it+=1)et=this.shapes[it],et.styles.indexOf(ut)!==-1&&(dt.push(et),ft=et._isAnimated||ft);dt.length>1&&ft&&this.setShapesAsAnimated(dt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(it,g){var et,ot=new SVGStyleData(it,g),ct=ot.pElem;if(it.ty==="st")et=new SVGStrokeStyleData(this,it,ot);else if(it.ty==="fl")et=new SVGFillStyleData(this,it,ot);else if(it.ty==="gf"||it.ty==="gs"){var ut=it.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;et=new ut(this,it,ot),this.globalData.defs.appendChild(et.gf),et.maskId&&(this.globalData.defs.appendChild(et.ms),this.globalData.defs.appendChild(et.of),ct.setAttribute("mask","url("+getLocationHref()+"#"+et.maskId+")"))}else it.ty==="no"&&(et=new SVGNoStyleData(this,it,ot));return(it.ty==="st"||it.ty==="gs")&&(ct.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),ct.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),ct.setAttribute("fill-opacity","0"),it.lj===1&&ct.setAttribute("stroke-miterlimit",it.ml)),it.r===2&&ct.setAttribute("fill-rule","evenodd"),it.ln&&ct.setAttribute("id",it.ln),it.cl&&ct.setAttribute("class",it.cl),it.bm&&(ct.style["mix-blend-mode"]=getBlendMode(it.bm)),this.stylesList.push(ot),this.addToAnimatedContents(it,et),et},SVGShapeElement.prototype.createGroupElement=function(it){var g=new ShapeGroupData;return it.ln&&g.gr.setAttribute("id",it.ln),it.cl&&g.gr.setAttribute("class",it.cl),it.bm&&(g.gr.style["mix-blend-mode"]=getBlendMode(it.bm)),g},SVGShapeElement.prototype.createTransformElement=function(it,g){var et=TransformPropertyFactory.getTransformProperty(this,it,this),ot=new SVGTransformData(et,et.o,g);return this.addToAnimatedContents(it,ot),ot},SVGShapeElement.prototype.createShapeElement=function(it,g,et){var ot=4;it.ty==="rc"?ot=5:it.ty==="el"?ot=6:it.ty==="sr"&&(ot=7);var ct=ShapePropertyFactory.getShapeProp(this,it,ot,this),ut=new SVGShapeData(g,et,ct);return this.shapes.push(ut),this.addShapeToModifiers(ut),this.addToAnimatedContents(it,ut),ut},SVGShapeElement.prototype.addToAnimatedContents=function(it,g){for(var et=0,ot=this.animatedContents.length;et<ot;){if(this.animatedContents[et].element===g)return;et+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(it),element:g,data:it})},SVGShapeElement.prototype.setElementStyles=function(it){var g=it.styles,et,ot=this.stylesList.length;for(et=0;et<ot;et+=1)this.stylesList[et].closed||g.push(this.stylesList[et])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(it,g,et,ot,ct,ut,dt){var ft=[].concat(ut),St,kt=it.length-1,Tt,Rt,jt=[],Ft=[],$t,zt,Ut;for(St=kt;St>=0;St-=1){if(Ut=this.searchProcessedElement(it[St]),Ut?g[St]=et[Ut-1]:it[St]._render=dt,it[St].ty==="fl"||it[St].ty==="st"||it[St].ty==="gf"||it[St].ty==="gs"||it[St].ty==="no")Ut?g[St].style.closed=!1:g[St]=this.createStyleElement(it[St],ct),it[St]._render&&g[St].style.pElem.parentNode!==ot&&ot.appendChild(g[St].style.pElem),jt.push(g[St].style);else if(it[St].ty==="gr"){if(!Ut)g[St]=this.createGroupElement(it[St]);else for(Rt=g[St].it.length,Tt=0;Tt<Rt;Tt+=1)g[St].prevViewData[Tt]=g[St].it[Tt];this.searchShapes(it[St].it,g[St].it,g[St].prevViewData,g[St].gr,ct+1,ft,dt),it[St]._render&&g[St].gr.parentNode!==ot&&ot.appendChild(g[St].gr)}else it[St].ty==="tr"?(Ut||(g[St]=this.createTransformElement(it[St],ot)),$t=g[St].transform,ft.push($t)):it[St].ty==="sh"||it[St].ty==="rc"||it[St].ty==="el"||it[St].ty==="sr"?(Ut||(g[St]=this.createShapeElement(it[St],ft,ct)),this.setElementStyles(g[St])):it[St].ty==="tm"||it[St].ty==="rd"||it[St].ty==="ms"||it[St].ty==="pb"||it[St].ty==="zz"||it[St].ty==="op"?(Ut?(zt=g[St],zt.closed=!1):(zt=ShapeModifiers.getModifier(it[St].ty),zt.init(this,it[St]),g[St]=zt,this.shapeModifiers.push(zt)),Ft.push(zt)):it[St].ty==="rp"&&(Ut?(zt=g[St],zt.closed=!0):(zt=ShapeModifiers.getModifier(it[St].ty),g[St]=zt,zt.init(this,it,St,g),this.shapeModifiers.push(zt),dt=!1),Ft.push(zt));this.addProcessedElement(it[St],St+1)}for(kt=jt.length,St=0;St<kt;St+=1)jt[St].closed=!0;for(kt=Ft.length,St=0;St<kt;St+=1)Ft[St].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].reset();for(this.renderShape(),it=0;it<g;it+=1)(this.stylesList[it]._mdf||this._isFirstFrame)&&(this.stylesList[it].msElem&&(this.stylesList[it].msElem.setAttribute("d",this.stylesList[it].d),this.stylesList[it].d="M0 0"+this.stylesList[it].d),this.stylesList[it].pElem.setAttribute("d",this.stylesList[it].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var it,g=this.animatedContents.length,et;for(it=0;it<g;it+=1)et=this.animatedContents[it],(this._isFirstFrame||et.element._isAnimated)&&et.data!==!0&&et.fn(et.data,et.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(it,g,et,ot,ct,ut){this.o=it,this.sw=g,this.sc=et,this.fc=ot,this.m=ct,this.p=ut,this._mdf={o:!0,sw:!!g,sc:!!et,fc:!!ot,m:!0,p:!0}}LetterProps.prototype.update=function(it,g,et,ot,ct,ut){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var dt=!1;return this.o!==it&&(this.o=it,this._mdf.o=!0,dt=!0),this.sw!==g&&(this.sw=g,this._mdf.sw=!0,dt=!0),this.sc!==et&&(this.sc=et,this._mdf.sc=!0,dt=!0),this.fc!==ot&&(this.fc=ot,this._mdf.fc=!0,dt=!0),this.m!==ct&&(this.m=ct,this._mdf.m=!0,dt=!0),ut.length&&(this.p[0]!==ut[0]||this.p[1]!==ut[1]||this.p[4]!==ut[4]||this.p[5]!==ut[5]||this.p[12]!==ut[12]||this.p[13]!==ut[13])&&(this.p=ut,this._mdf.p=!0,dt=!0),dt};function TextProperty(it,g){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,g.d&&g.d.sid&&(g.d=it.globalData.slotManager.getProp(g.d)),this.data=g,this.elem=it,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(it,g){for(var et in g)Object.prototype.hasOwnProperty.call(g,et)&&(it[et]=g[et]);return it},TextProperty.prototype.setCurrentData=function(it){it.__complete||this.completeTextData(it),this.currentData=it,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(it){this.effectsSequence.push(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(it){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!it)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var g=this.currentData,et=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ot,ct=this.effectsSequence.length,ut=it||this.data.d.k[this.keysIndex].s;for(ot=0;ot<ct;ot+=1)et!==this.keysIndex?ut=this.effectsSequence[ot](ut,ut.t):ut=this.effectsSequence[ot](this.currentData,ut.t);g!==ut&&this.setCurrentData(ut),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var it=this.data.d.k,g=this.elem.comp.renderedFrame,et=0,ot=it.length;et<=ot-1&&!(et===ot-1||it[et+1].t>g);)et+=1;return this.keysIndex!==et&&(this.keysIndex=et),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(it){for(var g=[],et=0,ot=it.length,ct,ut,dt=!1,ft=!1,St="";et<ot;)dt=ft,ft=!1,ct=it.charCodeAt(et),St=it.charAt(et),FontManager.isCombinedCharacter(ct)?dt=!0:ct>=55296&&ct<=56319?FontManager.isRegionalFlag(it,et)?St=it.substr(et,14):(ut=it.charCodeAt(et+1),ut>=56320&&ut<=57343&&(FontManager.isModifier(ct,ut)?(St=it.substr(et,2),dt=!0):FontManager.isFlagEmoji(it.substr(et,4))?St=it.substr(et,4):St=it.substr(et,2))):ct>56319?(ut=it.charCodeAt(et+1),FontManager.isVariationSelector(ct)&&(dt=!0)):FontManager.isZeroWidthJoiner(ct)&&(dt=!0,ft=!0),dt?(g[g.length-1]+=St,dt=!1):g.push(St),et+=St.length;return g},TextProperty.prototype.completeTextData=function(it){it.__complete=!0;var g=this.elem.globalData.fontManager,et=this.data,ot=[],ct,ut,dt,ft=0,St,kt=et.m.g,Tt=0,Rt=0,jt=0,Ft=[],$t=0,zt=0,Ut,Bt,Ht=g.getFontByName(it.f),Jt,Zt=0,tn=getFontProperties(Ht);it.fWeight=tn.weight,it.fStyle=tn.style,it.finalSize=it.s,it.finalText=this.buildFinalText(it.t),ut=it.finalText.length,it.finalLineHeight=it.lh;var nn=it.tr/1e3*it.finalSize,rn;if(it.sz)for(var on=!0,pn=it.sz[0],dn=it.sz[1],hn,un;on;){un=this.buildFinalText(it.t),hn=0,$t=0,ut=un.length,nn=it.tr/1e3*it.finalSize;var En=-1;for(ct=0;ct<ut;ct+=1)rn=un[ct].charCodeAt(0),dt=!1,un[ct]===" "?En=ct:(rn===13||rn===3)&&($t=0,dt=!0,hn+=it.finalLineHeight||it.finalSize*1.2),g.chars?(Jt=g.getCharData(un[ct],Ht.fStyle,Ht.fFamily),Zt=dt?0:Jt.w*it.finalSize/100):Zt=g.measureText(un[ct],it.f,it.finalSize),$t+Zt>pn&&un[ct]!==" "?(En===-1?ut+=1:ct=En,hn+=it.finalLineHeight||it.finalSize*1.2,un.splice(ct,En===ct?1:0,"\r"),En=-1,$t=0):($t+=Zt,$t+=nn);hn+=Ht.ascent*it.finalSize/100,this.canResize&&it.finalSize>this.minimumFontSize&&dn<hn?(it.finalSize-=1,it.finalLineHeight=it.finalSize*it.lh/it.s):(it.finalText=un,ut=it.finalText.length,on=!1)}$t=-nn,Zt=0;var wn=0,Sn;for(ct=0;ct<ut;ct+=1)if(dt=!1,Sn=it.finalText[ct],rn=Sn.charCodeAt(0),rn===13||rn===3?(wn=0,Ft.push($t),zt=$t>zt?$t:zt,$t=-2*nn,St="",dt=!0,jt+=1):St=Sn,g.chars?(Jt=g.getCharData(Sn,Ht.fStyle,g.getFontByName(it.f).fFamily),Zt=dt?0:Jt.w*it.finalSize/100):Zt=g.measureText(St,it.f,it.finalSize),Sn===" "?wn+=Zt+nn:($t+=Zt+nn+wn,wn=0),ot.push({l:Zt,an:Zt,add:Tt,n:dt,anIndexes:[],val:St,line:jt,animatorJustifyOffset:0}),kt==2){if(Tt+=Zt,St===""||St===" "||ct===ut-1){for((St===""||St===" ")&&(Tt-=Zt);Rt<=ct;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=Zt,Rt+=1;ft+=1,Tt=0}}else if(kt==3){if(Tt+=Zt,St===""||ct===ut-1){for(St===""&&(Tt-=Zt);Rt<=ct;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=Zt,Rt+=1;Tt=0,ft+=1}}else ot[ft].ind=ft,ot[ft].extra=0,ft+=1;if(it.l=ot,zt=$t>zt?$t:zt,Ft.push($t),it.sz)it.boxWidth=it.sz[0],it.justifyOffset=0;else switch(it.boxWidth=zt,it.j){case 1:it.justifyOffset=-it.boxWidth;break;case 2:it.justifyOffset=-it.boxWidth/2;break;default:it.justifyOffset=0}it.lineWidths=Ft;var fn=et.a,xn,an;Bt=fn.length;var cn,bn,mn=[];for(Ut=0;Ut<Bt;Ut+=1){for(xn=fn[Ut],xn.a.sc&&(it.strokeColorAnim=!0),xn.a.sw&&(it.strokeWidthAnim=!0),(xn.a.fc||xn.a.fh||xn.a.fs||xn.a.fb)&&(it.fillColorAnim=!0),bn=0,cn=xn.s.b,ct=0;ct<ut;ct+=1)an=ot[ct],an.anIndexes[Ut]=bn,(cn==1&&an.val!==""||cn==2&&an.val!==""&&an.val!==" "||cn==3&&(an.n||an.val==" "||ct==ut-1)||cn==4&&(an.n||ct==ut-1))&&(xn.s.rn===1&&mn.push(bn),bn+=1);et.a[Ut].s.totalChars=bn;var Tn=-1,An;if(xn.s.rn===1)for(ct=0;ct<ut;ct+=1)an=ot[ct],Tn!=an.anIndexes[Ut]&&(Tn=an.anIndexes[Ut],An=mn.splice(Math.floor(Math.random()*mn.length),1)[0]),an.anIndexes[Ut]=An}it.yOffset=it.finalLineHeight||it.finalSize*1.2,it.ls=it.ls||0,it.ascent=Ht.ascent*it.finalSize/100},TextProperty.prototype.updateDocumentData=function(it,g){g=g===void 0?this.keysIndex:g;var et=this.copyData({},this.data.d.k[g].s);et=this.copyData(et,it),this.data.d.k[g].s=et,this.recalculate(g),this.setCurrentData(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(it){var g=this.data.d.k[it].s;g.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(g)},TextProperty.prototype.canResizeFont=function(it){this.canResize=it,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(it){this.minimumFontSize=Math.floor(it)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var it=Math.max,g=Math.min,et=Math.floor;function ot(ut,dt){this._currentTextLength=-1,this.k=!1,this.data=dt,this.elem=ut,this.comp=ut.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ut),this.s=PropertyFactory.getProp(ut,dt.s||{k:0},0,0,this),"e"in dt?this.e=PropertyFactory.getProp(ut,dt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ut,dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ut,dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ut,dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ut,dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ut,dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ot.prototype={getMult:function(dt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ft=0,St=0,kt=1,Tt=1;this.ne.v>0?ft=this.ne.v/100:St=-this.ne.v/100,this.xe.v>0?kt=1-this.xe.v/100:Tt=1+this.xe.v/100;var Rt=BezierFactory.getBezierEasing(ft,St,kt,Tt).get,jt=0,Ft=this.finalS,$t=this.finalE,zt=this.data.sh;if(zt===2)$t===Ft?jt=dt>=$t?1:0:jt=it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),jt=Rt(jt);else if(zt===3)$t===Ft?jt=dt>=$t?0:1:jt=1-it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),jt=Rt(jt);else if(zt===4)$t===Ft?jt=0:(jt=it(0,g(.5/($t-Ft)+(dt-Ft)/($t-Ft),1)),jt<.5?jt*=2:jt=1-2*(jt-.5)),jt=Rt(jt);else if(zt===5){if($t===Ft)jt=0;else{var Ut=$t-Ft;dt=g(it(0,dt+.5-Ft),$t-Ft);var Bt=-Ut/2+dt,Ht=Ut/2;jt=Math.sqrt(1-Bt*Bt/(Ht*Ht))}jt=Rt(jt)}else zt===6?($t===Ft?jt=0:(dt=g(it(0,dt+.5-Ft),$t-Ft),jt=(1+Math.cos(Math.PI+Math.PI*2*dt/($t-Ft)))/2),jt=Rt(jt)):(dt>=et(Ft)&&(dt-Ft<0?jt=it(0,g(g($t,1)-(Ft-dt),1)):jt=it(0,g($t-dt,1))),jt=Rt(jt));if(this.sm.v!==100){var Jt=this.sm.v*.01;Jt===0&&(Jt=1e-8);var Zt=.5-Jt*.5;jt<Zt?jt=0:(jt=(jt-Zt)/Jt,jt>1&&(jt=1))}return jt*this.a.v},getValue:function(dt){this.iterateDynamicProperties(),this._mdf=dt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,dt&&this.data.r===2&&(this.e.v=this._currentTextLength);var ft=this.data.r===2?1:100/this.data.totalChars,St=this.o.v/ft,kt=this.s.v/ft+St,Tt=this.e.v/ft+St;if(kt>Tt){var Rt=kt;kt=Tt,Tt=Rt}this.finalS=kt,this.finalE=Tt}},extendPrototype([DynamicPropertyContainer],ot);function ct(ut,dt,ft){return new ot(ut,dt)}return{getTextSelectorProp:ct}}();function TextAnimatorDataProperty(it,g,et){var ot={propType:!1},ct=PropertyFactory.getProp,ut=g.a;this.a={r:ut.r?ct(it,ut.r,0,degToRads,et):ot,rx:ut.rx?ct(it,ut.rx,0,degToRads,et):ot,ry:ut.ry?ct(it,ut.ry,0,degToRads,et):ot,sk:ut.sk?ct(it,ut.sk,0,degToRads,et):ot,sa:ut.sa?ct(it,ut.sa,0,degToRads,et):ot,s:ut.s?ct(it,ut.s,1,.01,et):ot,a:ut.a?ct(it,ut.a,1,0,et):ot,o:ut.o?ct(it,ut.o,0,.01,et):ot,p:ut.p?ct(it,ut.p,1,0,et):ot,sw:ut.sw?ct(it,ut.sw,0,0,et):ot,sc:ut.sc?ct(it,ut.sc,1,0,et):ot,fc:ut.fc?ct(it,ut.fc,1,0,et):ot,fh:ut.fh?ct(it,ut.fh,0,0,et):ot,fs:ut.fs?ct(it,ut.fs,0,.01,et):ot,fb:ut.fb?ct(it,ut.fb,0,.01,et):ot,t:ut.t?ct(it,ut.t,0,0,et):ot},this.s=TextSelectorProp.getTextSelectorProp(it,g.s,et),this.s.t=g.s.t}function TextAnimatorProperty(it,g,et){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=it,this._renderType=g,this._elem=et,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(et)}TextAnimatorProperty.prototype.searchProperties=function(){var it,g=this._textData.a.length,et,ot=PropertyFactory.getProp;for(it=0;it<g;it+=1)et=this._textData.a[it],this._animatorsData[it]=new TextAnimatorDataProperty(this._elem,et,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ot(this._elem,this._textData.p.a,0,0,this),f:ot(this._elem,this._textData.p.f,0,0,this),l:ot(this._elem,this._textData.p.l,0,0,this),r:ot(this._elem,this._textData.p.r,0,0,this),p:ot(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ot(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(it,g){if(this.lettersChangedFlag=g,!(!this._mdf&&!this._isFirstFrame&&!g&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var et=this._moreOptions.alignment.v,ot=this._animatorsData,ct=this._textData,ut=this.mHelper,dt=this._renderType,ft=this.renderedLetters.length,St,kt,Tt,Rt,jt=it.l,Ft,$t,zt,Ut,Bt,Ht,Jt,Zt,tn,nn,rn,on,pn,dn,hn;if(this._hasMaskedPath){if(hn=this._pathData.m,!this._pathData.n||this._pathData._mdf){var un=hn.v;this._pathData.r.v&&(un=un.reverse()),Ft={tLength:0,segments:[]},Rt=un._length-1;var En;for(on=0,Tt=0;Tt<Rt;Tt+=1)En=bez.buildBezierData(un.v[Tt],un.v[Tt+1],[un.o[Tt][0]-un.v[Tt][0],un.o[Tt][1]-un.v[Tt][1]],[un.i[Tt+1][0]-un.v[Tt+1][0],un.i[Tt+1][1]-un.v[Tt+1][1]]),Ft.tLength+=En.segmentLength,Ft.segments.push(En),on+=En.segmentLength;Tt=Rt,hn.v.c&&(En=bez.buildBezierData(un.v[Tt],un.v[0],[un.o[Tt][0]-un.v[Tt][0],un.o[Tt][1]-un.v[Tt][1]],[un.i[0][0]-un.v[0][0],un.i[0][1]-un.v[0][1]]),Ft.tLength+=En.segmentLength,Ft.segments.push(En),on+=En.segmentLength),this._pathData.pi=Ft}if(Ft=this._pathData.pi,$t=this._pathData.f.v,Jt=0,Ht=1,Ut=0,Bt=!0,nn=Ft.segments,$t<0&&hn.v.c)for(Ft.tLength<Math.abs($t)&&($t=-Math.abs($t)%Ft.tLength),Jt=nn.length-1,tn=nn[Jt].points,Ht=tn.length-1;$t<0;)$t+=tn[Ht].partialLength,Ht-=1,Ht<0&&(Jt-=1,tn=nn[Jt].points,Ht=tn.length-1);tn=nn[Jt].points,Zt=tn[Ht-1],zt=tn[Ht],rn=zt.partialLength}Rt=jt.length,St=0,kt=0;var wn=it.finalSize*1.2*.714,Sn=!0,fn,xn,an,cn,bn;cn=ot.length;var mn,Tn=-1,An,Pn,Mn,Rn=$t,Cn=Jt,On=Ht,In=-1,Dn,Fn,Xn,Vn,zn,Zn,lr,hr,$n="",Un=this.defaultPropsArray,Kn;if(it.j===2||it.j===1){var Yn=0,Wn=0,cr=it.j===2?-.5:-1,or=0,ur=!0;for(Tt=0;Tt<Rt;Tt+=1)if(jt[Tt].n){for(Yn&&(Yn+=Wn);or<Tt;)jt[or].animatorJustifyOffset=Yn,or+=1;Yn=0,ur=!0}else{for(an=0;an<cn;an+=1)fn=ot[an].a,fn.t.propType&&(ur&&it.j===2&&(Wn+=fn.t.v*cr),xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),mn.length?Yn+=fn.t.v*mn[0]*cr:Yn+=fn.t.v*mn*cr);ur=!1}for(Yn&&(Yn+=Wn);or<Tt;)jt[or].animatorJustifyOffset=Yn,or+=1}for(Tt=0;Tt<Rt;Tt+=1){if(ut.reset(),Dn=1,jt[Tt].n)St=0,kt+=it.yOffset,kt+=Sn?1:0,$t=Rn,Sn=!1,this._hasMaskedPath&&(Jt=Cn,Ht=On,tn=nn[Jt].points,Zt=tn[Ht-1],zt=tn[Ht],rn=zt.partialLength,Ut=0),$n="",hr="",Zn="",Kn="",Un=this.defaultPropsArray;else{if(this._hasMaskedPath){if(In!==jt[Tt].line){switch(it.j){case 1:$t+=on-it.lineWidths[jt[Tt].line];break;case 2:$t+=(on-it.lineWidths[jt[Tt].line])/2;break}In=jt[Tt].line}Tn!==jt[Tt].ind&&(jt[Tn]&&($t+=jt[Tn].extra),$t+=jt[Tt].an/2,Tn=jt[Tt].ind),$t+=et[0]*jt[Tt].an*.005;var Cr=0;for(an=0;an<cn;an+=1)fn=ot[an].a,fn.p.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),mn.length?Cr+=fn.p.v[0]*mn[0]:Cr+=fn.p.v[0]*mn),fn.a.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),mn.length?Cr+=fn.a.v[0]*mn[0]:Cr+=fn.a.v[0]*mn);for(Bt=!0,this._pathData.a.v&&($t=jt[0].an*.5+(on-this._pathData.f.v-jt[0].an*.5-jt[jt.length-1].an*.5)*Tn/(Rt-1),$t+=this._pathData.f.v);Bt;)Ut+rn>=$t+Cr||!tn?(pn=($t+Cr-Ut)/zt.partialLength,Pn=Zt.point[0]+(zt.point[0]-Zt.point[0])*pn,Mn=Zt.point[1]+(zt.point[1]-Zt.point[1])*pn,ut.translate(-et[0]*jt[Tt].an*.005,-(et[1]*wn)*.01),Bt=!1):tn&&(Ut+=zt.partialLength,Ht+=1,Ht>=tn.length&&(Ht=0,Jt+=1,nn[Jt]?tn=nn[Jt].points:hn.v.c?(Ht=0,Jt=0,tn=nn[Jt].points):(Ut-=zt.partialLength,tn=null)),tn&&(Zt=zt,zt=tn[Ht],rn=zt.partialLength));An=jt[Tt].an/2-jt[Tt].add,ut.translate(-An,0,0)}else An=jt[Tt].an/2-jt[Tt].add,ut.translate(-An,0,0),ut.translate(-et[0]*jt[Tt].an*.005,-et[1]*wn*.01,0);for(an=0;an<cn;an+=1)fn=ot[an].a,fn.t.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),(St!==0||it.j!==0)&&(this._hasMaskedPath?mn.length?$t+=fn.t.v*mn[0]:$t+=fn.t.v*mn:mn.length?St+=fn.t.v*mn[0]:St+=fn.t.v*mn));for(it.strokeWidthAnim&&(Xn=it.sw||0),it.strokeColorAnim&&(it.sc?Fn=[it.sc[0],it.sc[1],it.sc[2]]:Fn=[0,0,0]),it.fillColorAnim&&it.fc&&(Vn=[it.fc[0],it.fc[1],it.fc[2]]),an=0;an<cn;an+=1)fn=ot[an].a,fn.a.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),mn.length?ut.translate(-fn.a.v[0]*mn[0],-fn.a.v[1]*mn[1],fn.a.v[2]*mn[2]):ut.translate(-fn.a.v[0]*mn,-fn.a.v[1]*mn,fn.a.v[2]*mn));for(an=0;an<cn;an+=1)fn=ot[an].a,fn.s.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),mn.length?ut.scale(1+(fn.s.v[0]-1)*mn[0],1+(fn.s.v[1]-1)*mn[1],1):ut.scale(1+(fn.s.v[0]-1)*mn,1+(fn.s.v[1]-1)*mn,1));for(an=0;an<cn;an+=1){if(fn=ot[an].a,xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),fn.sk.propType&&(mn.length?ut.skewFromAxis(-fn.sk.v*mn[0],fn.sa.v*mn[1]):ut.skewFromAxis(-fn.sk.v*mn,fn.sa.v*mn)),fn.r.propType&&(mn.length?ut.rotateZ(-fn.r.v*mn[2]):ut.rotateZ(-fn.r.v*mn)),fn.ry.propType&&(mn.length?ut.rotateY(fn.ry.v*mn[1]):ut.rotateY(fn.ry.v*mn)),fn.rx.propType&&(mn.length?ut.rotateX(fn.rx.v*mn[0]):ut.rotateX(fn.rx.v*mn)),fn.o.propType&&(mn.length?Dn+=(fn.o.v*mn[0]-Dn)*mn[0]:Dn+=(fn.o.v*mn-Dn)*mn),it.strokeWidthAnim&&fn.sw.propType&&(mn.length?Xn+=fn.sw.v*mn[0]:Xn+=fn.sw.v*mn),it.strokeColorAnim&&fn.sc.propType)for(zn=0;zn<3;zn+=1)mn.length?Fn[zn]+=(fn.sc.v[zn]-Fn[zn])*mn[0]:Fn[zn]+=(fn.sc.v[zn]-Fn[zn])*mn;if(it.fillColorAnim&&it.fc){if(fn.fc.propType)for(zn=0;zn<3;zn+=1)mn.length?Vn[zn]+=(fn.fc.v[zn]-Vn[zn])*mn[0]:Vn[zn]+=(fn.fc.v[zn]-Vn[zn])*mn;fn.fh.propType&&(mn.length?Vn=addHueToRGB(Vn,fn.fh.v*mn[0]):Vn=addHueToRGB(Vn,fn.fh.v*mn)),fn.fs.propType&&(mn.length?Vn=addSaturationToRGB(Vn,fn.fs.v*mn[0]):Vn=addSaturationToRGB(Vn,fn.fs.v*mn)),fn.fb.propType&&(mn.length?Vn=addBrightnessToRGB(Vn,fn.fb.v*mn[0]):Vn=addBrightnessToRGB(Vn,fn.fb.v*mn))}}for(an=0;an<cn;an+=1)fn=ot[an].a,fn.p.propType&&(xn=ot[an].s,mn=xn.getMult(jt[Tt].anIndexes[an],ct.a[an].s.totalChars),this._hasMaskedPath?mn.length?ut.translate(0,fn.p.v[1]*mn[0],-fn.p.v[2]*mn[1]):ut.translate(0,fn.p.v[1]*mn,-fn.p.v[2]*mn):mn.length?ut.translate(fn.p.v[0]*mn[0],fn.p.v[1]*mn[1],-fn.p.v[2]*mn[2]):ut.translate(fn.p.v[0]*mn,fn.p.v[1]*mn,-fn.p.v[2]*mn));if(it.strokeWidthAnim&&(Zn=Xn<0?0:Xn),it.strokeColorAnim&&(lr="rgb("+Math.round(Fn[0]*255)+","+Math.round(Fn[1]*255)+","+Math.round(Fn[2]*255)+")"),it.fillColorAnim&&it.fc&&(hr="rgb("+Math.round(Vn[0]*255)+","+Math.round(Vn[1]*255)+","+Math.round(Vn[2]*255)+")"),this._hasMaskedPath){if(ut.translate(0,-it.ls),ut.translate(0,et[1]*wn*.01+kt,0),this._pathData.p.v){dn=(zt.point[1]-Zt.point[1])/(zt.point[0]-Zt.point[0]);var Rr=Math.atan(dn)*180/Math.PI;zt.point[0]<Zt.point[0]&&(Rr+=180),ut.rotate(-Rr*Math.PI/180)}ut.translate(Pn,Mn,0),$t-=et[0]*jt[Tt].an*.005,jt[Tt+1]&&Tn!==jt[Tt+1].ind&&($t+=jt[Tt].an/2,$t+=it.tr*.001*it.finalSize)}else{switch(ut.translate(St,kt,0),it.ps&&ut.translate(it.ps[0],it.ps[1]+it.ascent,0),it.j){case 1:ut.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line]),0,0);break;case 2:ut.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line])/2,0,0);break}ut.translate(0,-it.ls),ut.translate(An,0,0),ut.translate(et[0]*jt[Tt].an*.005,et[1]*wn*.01,0),St+=jt[Tt].l+it.tr*.001*it.finalSize}dt==="html"?$n=ut.toCSS():dt==="svg"?$n=ut.to2dCSS():Un=[ut.props[0],ut.props[1],ut.props[2],ut.props[3],ut.props[4],ut.props[5],ut.props[6],ut.props[7],ut.props[8],ut.props[9],ut.props[10],ut.props[11],ut.props[12],ut.props[13],ut.props[14],ut.props[15]],Kn=Dn}ft<=Tt?(bn=new LetterProps(Kn,Zn,lr,hr,$n,Un),this.renderedLetters.push(bn),ft+=1,this.lettersChangedFlag=!0):(bn=this.renderedLetters[Tt],this.lettersChangedFlag=bn.update(Kn,Zn,lr,hr,$n,Un)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(it,g,et){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(it,g,et),this.textProperty=new TextProperty(this,it.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(it.t,this.renderType,this),this.initTransform(it,g,et),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange)},ITextElement.prototype.createPathShape=function(it,g){var et,ot=g.length,ct,ut="";for(et=0;et<ot;et+=1)g[et].ty==="sh"&&(ct=g[et].ks.k,ut+=buildShapeString(ct,ct.i.length,!0,it));return ut},ITextElement.prototype.updateDocumentData=function(it,g){this.textProperty.updateDocumentData(it,g)},ITextElement.prototype.canResizeFont=function(it){this.textProperty.canResizeFont(it)},ITextElement.prototype.setMinimumFontSize=function(it){this.textProperty.setMinimumFontSize(it)},ITextElement.prototype.applyTextPropertiesToMatrix=function(it,g,et,ot,ct){switch(it.ps&&g.translate(it.ps[0],it.ps[1]+it.ascent,0),g.translate(0,-it.ls,0),it.j){case 1:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et]),0,0);break;case 2:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et])/2,0,0);break}g.translate(ot,ct,0)},ITextElement.prototype.buildColor=function(it){return"rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(it,g,et){this.textSpans=[],this.renderType="svg",this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(it){for(var g=0,et=it.length,ot=[],ct="";g<et;)it[g]===String.fromCharCode(13)||it[g]===String.fromCharCode(3)?(ot.push(ct),ct=""):ct+=it[g],g+=1;return ot.push(ct),ot},SVGTextLottieElement.prototype.buildShapeData=function(it,g){if(it.shapes&&it.shapes.length){var et=it.shapes[0];if(et.it){var ot=et.it[et.it.length-1];ot.s&&(ot.s.k[0]=g,ot.s.k[1]=g)}}return it},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var it,g,et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et?et.l.length:0),et.fc?this.layerElement.setAttribute("fill",this.buildColor(et.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),et.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(et.sc)),this.layerElement.setAttribute("stroke-width",et.sw)),this.layerElement.setAttribute("font-size",et.finalSize);var ot=this.globalData.fontManager.getFontByName(et.f);if(ot.fClass)this.layerElement.setAttribute("class",ot.fClass);else{this.layerElement.setAttribute("font-family",ot.fFamily);var ct=et.fWeight,ut=et.fStyle;this.layerElement.setAttribute("font-style",ut),this.layerElement.setAttribute("font-weight",ct)}this.layerElement.setAttribute("aria-label",et.t);var dt=et.l||[],ft=!!this.globalData.fontManager.chars;g=dt.length;var St,kt=this.mHelper,Tt="",Rt=this.data.singleShape,jt=0,Ft=0,$t=!0,zt=et.tr*.001*et.finalSize;if(Rt&&!ft&&!et.sz){var Ut=this.textContainer,Bt="start";switch(et.j){case 1:Bt="end";break;case 2:Bt="middle";break;default:Bt="start";break}Ut.setAttribute("text-anchor",Bt),Ut.setAttribute("letter-spacing",zt);var Ht=this.buildTextContents(et.finalText);for(g=Ht.length,Ft=et.ps?et.ps[1]+et.ascent:0,it=0;it<g;it+=1)St=this.textSpans[it].span||createNS("tspan"),St.textContent=Ht[it],St.setAttribute("x",0),St.setAttribute("y",Ft),St.style.display="inherit",Ut.appendChild(St),this.textSpans[it]||(this.textSpans[it]={span:null,glyph:null}),this.textSpans[it].span=St,Ft+=et.finalLineHeight;this.layerElement.appendChild(Ut)}else{var Jt=this.textSpans.length,Zt;for(it=0;it<g;it+=1){if(this.textSpans[it]||(this.textSpans[it]={span:null,childSpan:null,glyph:null}),!ft||!Rt||it===0){if(St=Jt>it?this.textSpans[it].span:createNS(ft?"g":"text"),Jt<=it){if(St.setAttribute("stroke-linecap","butt"),St.setAttribute("stroke-linejoin","round"),St.setAttribute("stroke-miterlimit","4"),this.textSpans[it].span=St,ft){var tn=createNS("g");St.appendChild(tn),this.textSpans[it].childSpan=tn}this.textSpans[it].span=St,this.layerElement.appendChild(St)}St.style.display="inherit"}if(kt.reset(),Rt&&(dt[it].n&&(jt=-zt,Ft+=et.yOffset,Ft+=$t?1:0,$t=!1),this.applyTextPropertiesToMatrix(et,kt,dt[it].line,jt,Ft),jt+=dt[it].l||0,jt+=zt),ft){Zt=this.globalData.fontManager.getCharData(et.finalText[it],ot.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily);var nn;if(Zt.t===1)nn=new SVGCompElement(Zt.data,this.globalData,this);else{var rn=emptyShapeData;Zt.data&&Zt.data.shapes&&(rn=this.buildShapeData(Zt.data,et.finalSize)),nn=new SVGShapeElement(rn,this.globalData,this)}if(this.textSpans[it].glyph){var on=this.textSpans[it].glyph;this.textSpans[it].childSpan.removeChild(on.layerElement),on.destroy()}this.textSpans[it].glyph=nn,nn._debug=!0,nn.prepareFrame(0),nn.renderFrame(),this.textSpans[it].childSpan.appendChild(nn.layerElement),Zt.t===1&&this.textSpans[it].childSpan.setAttribute("transform","scale("+et.finalSize/100+","+et.finalSize/100+")")}else Rt&&St.setAttribute("transform","translate("+kt.props[12]+","+kt.props[13]+")"),St.textContent=dt[it].val,St.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Rt&&St&&St.setAttribute("d",Tt)}for(;it<this.textSpans.length;)this.textSpans[it].span.style.display="none",it+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var it=this.layerElement.getBBox();this.bbox={top:it.y,left:it.x,width:it.width,height:it.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var it,g=this.textSpans.length,et;for(this.renderedFrame=this.comp.renderedFrame,it=0;it<g;it+=1)et=this.textSpans[it].glyph,et&&(et.prepareFrame(this.comp.renderedFrame-this.data.st),et._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var it,g,et=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;g=ot.length;var ct,ut,dt;for(it=0;it<g;it+=1)ot[it].n||(ct=et[it],ut=this.textSpans[it].span,dt=this.textSpans[it].glyph,dt&&dt.renderFrame(),ct._mdf.m&&ut.setAttribute("transform",ct.m),ct._mdf.o&&ut.setAttribute("opacity",ct.o),ct._mdf.sw&&ut.setAttribute("stroke-width",ct.sw),ct._mdf.sc&&ut.setAttribute("stroke",ct.sc),ct._mdf.fc&&ut.setAttribute("fill",ct.fc))}};function ISolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var it=createNS("rect");it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.layerElement.appendChild(it)};function NullElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initFrame(),this.initTransform(it,g,et),this.initHierarchy()}NullElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(it){return new NullElement(it,this.globalData,this)},SVGRendererBase.prototype.createShape=function(it){return new SVGShapeElement(it,this.globalData,this)},SVGRendererBase.prototype.createText=function(it){return new SVGTextLottieElement(it,this.globalData,this)},SVGRendererBase.prototype.createImage=function(it){return new IImageElement(it,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(it){return new ISolidElement(it,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(it){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+it.w+" "+it.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",it.w),this.svgElement.setAttribute("height",it.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var g=this.globalData.defs;this.setupGlobalData(it,g),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=it;var et=createNS("clipPath"),ot=createNS("rect");ot.setAttribute("width",it.w),ot.setAttribute("height",it.h),ot.setAttribute("x",0),ot.setAttribute("y",0);var ct=createElementID();et.setAttribute("id",ct),et.appendChild(ot),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),g.appendChild(et),this.layers=it.layers,this.elements=createSizedArray(it.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(it){var g=0,et=this.layers.length;for(g=0;g<et;g+=1)if(this.layers[g].ind===it)return g;return-1},SVGRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){g[it]=!0;var et=this.createItem(this.layers[it]);if(g[it]=et,getExpressionsPlugin()&&(this.layers[it].ty===0&&this.globalData.projectInterface.registerComposition(et),et.initExpressions()),this.appendElementInPos(et,it),this.layers[it].tt){var ot="tp"in this.layers[it]?this.findIndexByInd(this.layers[it].tp):it-1;if(ot===-1)return;if(!this.elements[ot]||this.elements[ot]===!0)this.buildItem(ot),this.addPendingElement(et);else{var ct=g[ot],ut=ct.getMatte(this.layers[it].tt);et.setMatte(ut)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();if(it.checkParenting(),it.data.tt)for(var g=0,et=this.elements.length;g<et;){if(this.elements[g]===it){var ot="tp"in it.data?this.findIndexByInd(it.data.tp):g-1,ct=this.elements[ot],ut=ct.getMatte(this.layers[g].tt);it.setMatte(ut);break}g+=1}}},SVGRendererBase.prototype.renderFrame=function(it){if(!(this.renderedFrame===it||this.destroyed)){it===null?it=this.renderedFrame:this.renderedFrame=it,this.globalData.frameNum=it,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=it,this.globalData._mdf=!1;var g,et=this.layers.length;for(this.completeLayers||this.checkLayers(it),g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].prepareFrame(it-this.layers[g].st);if(this.globalData._mdf)for(g=0;g<et;g+=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){for(var ot=0,ct;ot<g;)this.elements[ot]&&this.elements[ot]!==!0&&this.elements[ot].getBaseElement()&&(ct=this.elements[ot].getBaseElement()),ot+=1;ct?this.layerElement.insertBefore(et,ct):this.layerElement.appendChild(et)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initTransform(it,g,et),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!g.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(it){if(this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=it/this.data.sr;else{var g=this.tm.v;g===this.data.op&&(g=this.data.op-1),this.renderedFrame=g}var et,ot=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&(this.elements[et].prepareFrame(this.renderedFrame-this.layers[et].st),this.elements[et]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame()},ICompElement.prototype.setElements=function(it){this.elements=it},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(it,g,et){this.layers=it.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function SVGRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var et="";if(g&&g.title){var ot=createNS("title"),ct=createElementID();ot.setAttribute("id",ct),ot.textContent=g.title,this.svgElement.appendChild(ot),et+=ct}if(g&&g.description){var ut=createNS("desc"),dt=createElementID();ut.setAttribute("id",dt),ut.textContent=g.description,this.svgElement.appendChild(ut),et+=" "+dt}et&&this.svgElement.setAttribute("aria-labelledby",et);var ft=createNS("defs");this.svgElement.appendChild(ft);var St=createNS("g");this.svgElement.appendChild(St),this.layerElement=St,this.renderConfig={preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",progressiveLoad:g&&g.progressiveLoad||!1,hideOnTransparent:!(g&&g.hideOnTransparent===!1),viewBoxOnly:g&&g.viewBoxOnly||!1,viewBoxSize:g&&g.viewBoxSize||!1,className:g&&g.className||"",id:g&&g.id||"",focusable:g&&g.focusable,filterSize:{width:g&&g.filterSize&&g.filterSize.width||"100%",height:g&&g.filterSize&&g.filterSize.height||"100%",x:g&&g.filterSize&&g.filterSize.x||"0%",y:g&&g.filterSize&&g.filterSize.y||"0%"},width:g&&g.width,height:g&&g.height,runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(g){var et,ot=g.length,ct="_";for(et=0;et<ot;et+=1)ct+=g[et].transform.key+"_";var ut=this.sequences[ct];return ut||(ut={transforms:[].concat(g),finalTransform:new Matrix,_mdf:!1},this.sequences[ct]=ut,this.sequenceList.push(ut)),ut},processSequence:function(g,et){for(var ot=0,ct=g.transforms.length,ut=et;ot<ct&&!et;){if(g.transforms[ot].transform.mProps._mdf){ut=!0;break}ot+=1}if(ut)for(g.finalTransform.reset(),ot=ct-1;ot>=0;ot-=1)g.finalTransform.multiply(g.transforms[ot].transform.mProps.v);g._mdf=ut},processSequences:function(g){var et,ot=this.sequenceList.length;for(et=0;et<ot;et+=1)this.processSequence(this.sequenceList[et],g)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var g="__lottie_element_luma_buffer",et=null,ot=null,ct=null;function ut(){var St=createNS("svg"),kt=createNS("filter"),Tt=createNS("feColorMatrix");return kt.setAttribute("id",g),Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),kt.appendChild(Tt),St.appendChild(kt),St.setAttribute("id",g+"_svg"),featureSupport.svgLumaHidden&&(St.style.display="none"),St}function dt(){et||(ct=ut(),document.body.appendChild(ct),et=createTag("canvas"),ot=et.getContext("2d"),ot.filter="url(#"+g+")",ot.fillStyle="rgba(0,0,0,0)",ot.fillRect(0,0,1,1))}function ft(St){return et||dt(),et.width=St.width,et.height=St.height,ot.filter="url(#"+g+")",et}return{load:dt,get:ft}};function createCanvas(it,g){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(it,g);var et=createTag("canvas");return et.width=it,et.height=g,et}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(it){var g,et=it.data.ef?it.data.ef.length:0;this.filters=[];var ot;for(g=0;g<et;g+=1){ot=null;var ct=it.data.ef[g].ty;if(registeredEffects[ct]){var ut=registeredEffects[ct].effect;ot=new ut(it.effectsManager.effectElements[g],it)}ot&&this.filters.push(ot)}this.filters.length&&it.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},CVEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect(it,g){registeredEffects[it]={effect:g}}function CVMaskElement(it,g){this.data=it,this.element=g,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var et,ot=this.masksProperties.length,ct=!1;for(et=0;et<ot;et+=1)this.masksProperties[et].mode!=="n"&&(ct=!0),this.viewData[et]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[et],3);this.hasMasks=ct,ct&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var it=this.element.finalTransform.mat,g=this.element.canvasContext,et,ot=this.masksProperties.length,ct,ut,dt;for(g.beginPath(),et=0;et<ot;et+=1)if(this.masksProperties[et].mode!=="n"){this.masksProperties[et].inv&&(g.moveTo(0,0),g.lineTo(this.element.globalData.compSize.w,0),g.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),g.lineTo(0,this.element.globalData.compSize.h),g.lineTo(0,0)),dt=this.viewData[et].v,ct=it.applyToPointArray(dt.v[0][0],dt.v[0][1],0),g.moveTo(ct[0],ct[1]);var ft,St=dt._length;for(ft=1;ft<St;ft+=1)ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[ft],dt.v[ft]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]);ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[0],dt.v[0]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5])}this.element.globalData.renderer.save(!0),g.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var g=this.globalData.canvasContext,et=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(et);var ot=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(ot),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var g=this.globalData;if(g.blendMode!==this.data.bm){g.blendMode=this.data.bm;var et=getBlendMode(this.data.bm);g.canvasContext.globalCompositeOperation=et}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(g){g.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var g=this.buffers[0],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var g=this.buffers[1],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ot=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ot.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ct=assetLoader.getLumaCanvas(this.canvasContext.canvas),ut=ct.getContext("2d");ut.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ct,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(g,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(g){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!g)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var et=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(et),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(et),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(it,g,et,ot){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ct=4;g.ty==="rc"?ct=5:g.ty==="el"?ct=6:g.ty==="sr"&&(ct=7),this.sh=ShapePropertyFactory.getShapeProp(it,g,ct,it);var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)et[ut].closed||(ft={transforms:ot.addTransformSequence(et[ut].transforms),trNodes:[]},this.styledShapes.push(ft),et[ut].elements.push(ft))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(it,g){var et={data:it,type:it.ty,preTransforms:this.transformsManager.addTransformSequence(g),transforms:[],elements:[],closed:it.hd===!0},ot={};if(it.ty==="fl"||it.ty==="st"?(ot.c=PropertyFactory.getProp(this,it.c,1,255,this),ot.c.k||(et.co="rgb("+bmFloor(ot.c.v[0])+","+bmFloor(ot.c.v[1])+","+bmFloor(ot.c.v[2])+")")):(it.ty==="gf"||it.ty==="gs")&&(ot.s=PropertyFactory.getProp(this,it.s,1,null,this),ot.e=PropertyFactory.getProp(this,it.e,1,null,this),ot.h=PropertyFactory.getProp(this,it.h||{k:0},0,.01,this),ot.a=PropertyFactory.getProp(this,it.a||{k:0},0,degToRads,this),ot.g=new GradientProperty(this,it.g,this)),ot.o=PropertyFactory.getProp(this,it.o,0,.01,this),it.ty==="st"||it.ty==="gs"){if(et.lc=lineCapEnum[it.lc||2],et.lj=lineJoinEnum[it.lj||2],it.lj==1&&(et.ml=it.ml),ot.w=PropertyFactory.getProp(this,it.w,0,null,this),ot.w.k||(et.wi=ot.w.v),it.d){var ct=new DashProperty(this,it.d,"canvas",this);ot.d=ct,ot.d.k||(et.da=ot.d.dashArray,et.do=ot.d.dashoffset[0])}}else et.r=it.r===2?"evenodd":"nonzero";return this.stylesList.push(et),ot.style=et,ot},CVShapeElement.prototype.createGroupElement=function(){var it={it:[],prevViewData:[]};return it},CVShapeElement.prototype.createTransformElement=function(it){var g={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,it.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,it,this)}};return g},CVShapeElement.prototype.createShapeElement=function(it){var g=new CVShapeData(this,it,this.stylesList,this.transformsManager);return this.shapes.push(g),this.addShapeToModifiers(g),g},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(it){var g,et=this.stylesList.length;for(g=0;g<et;g+=1)this.stylesList[g].closed||this.stylesList[g].transforms.push(it)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].closed||this.stylesList[it].transforms.pop()},CVShapeElement.prototype.closeStyles=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].closed=!0},CVShapeElement.prototype.searchShapes=function(it,g,et,ot,ct){var ut,dt=it.length-1,ft,St,kt=[],Tt=[],Rt,jt,Ft,$t=[].concat(ct);for(ut=dt;ut>=0;ut-=1){if(Rt=this.searchProcessedElement(it[ut]),Rt?g[ut]=et[Rt-1]:it[ut]._shouldRender=ot,it[ut].ty==="fl"||it[ut].ty==="st"||it[ut].ty==="gf"||it[ut].ty==="gs")Rt?g[ut].style.closed=!1:g[ut]=this.createStyleElement(it[ut],$t),kt.push(g[ut].style);else if(it[ut].ty==="gr"){if(!Rt)g[ut]=this.createGroupElement(it[ut]);else for(St=g[ut].it.length,ft=0;ft<St;ft+=1)g[ut].prevViewData[ft]=g[ut].it[ft];this.searchShapes(it[ut].it,g[ut].it,g[ut].prevViewData,ot,$t)}else it[ut].ty==="tr"?(Rt||(Ft=this.createTransformElement(it[ut]),g[ut]=Ft),$t.push(g[ut]),this.addTransformToStyleList(g[ut])):it[ut].ty==="sh"||it[ut].ty==="rc"||it[ut].ty==="el"||it[ut].ty==="sr"?Rt||(g[ut]=this.createShapeElement(it[ut])):it[ut].ty==="tm"||it[ut].ty==="rd"||it[ut].ty==="pb"||it[ut].ty==="zz"||it[ut].ty==="op"?(Rt?(jt=g[ut],jt.closed=!1):(jt=ShapeModifiers.getModifier(it[ut].ty),jt.init(this,it[ut]),g[ut]=jt,this.shapeModifiers.push(jt)),Tt.push(jt)):it[ut].ty==="rp"&&(Rt?(jt=g[ut],jt.closed=!0):(jt=ShapeModifiers.getModifier(it[ut].ty),g[ut]=jt,jt.init(this,it,ut,g),this.shapeModifiers.push(jt),ot=!1),Tt.push(jt));this.addProcessedElement(it[ut],ut+1)}for(this.removeTransformFromStyleList(),this.closeStyles(kt),dt=Tt.length,ut=0;ut<dt;ut+=1)Tt[ut].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(it,g){(it._opMdf||g.op._mdf||this._isFirstFrame)&&(g.opacity=it.opacity,g.opacity*=g.op.v,g._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var it,g=this.stylesList.length,et,ot,ct,ut,dt,ft,St=this.globalData.renderer,kt=this.globalData.canvasContext,Tt,Rt;for(it=0;it<g;it+=1)if(Rt=this.stylesList[it],Tt=Rt.type,!((Tt==="st"||Tt==="gs")&&Rt.wi===0||!Rt.data._shouldRender||Rt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(St.save(),dt=Rt.elements,Tt==="st"||Tt==="gs"?(St.ctxStrokeStyle(Tt==="st"?Rt.co:Rt.grd),St.ctxLineWidth(Rt.wi),St.ctxLineCap(Rt.lc),St.ctxLineJoin(Rt.lj),St.ctxMiterLimit(Rt.ml||0)):St.ctxFillStyle(Tt==="fl"?Rt.co:Rt.grd),St.ctxOpacity(Rt.coOp),Tt!=="st"&&Tt!=="gs"&&kt.beginPath(),St.ctxTransform(Rt.preTransforms.finalTransform.props),ot=dt.length,et=0;et<ot;et+=1){for((Tt==="st"||Tt==="gs")&&(kt.beginPath(),Rt.da&&(kt.setLineDash(Rt.da),kt.lineDashOffset=Rt.do)),ft=dt[et].trNodes,ut=ft.length,ct=0;ct<ut;ct+=1)ft[ct].t==="m"?kt.moveTo(ft[ct].p[0],ft[ct].p[1]):ft[ct].t==="c"?kt.bezierCurveTo(ft[ct].pts[0],ft[ct].pts[1],ft[ct].pts[2],ft[ct].pts[3],ft[ct].pts[4],ft[ct].pts[5]):kt.closePath();(Tt==="st"||Tt==="gs")&&(St.ctxStroke(),Rt.da&&kt.setLineDash(this.dashResetter))}Tt!=="st"&&Tt!=="gs"&&this.globalData.renderer.ctxFill(Rt.r),St.restore()}},CVShapeElement.prototype.renderShape=function(it,g,et,ot){var ct,ut=g.length-1,dt;for(dt=it,ct=ut;ct>=0;ct-=1)g[ct].ty==="tr"?(dt=et[ct].transform,this.renderShapeTransform(it,dt)):g[ct].ty==="sh"||g[ct].ty==="el"||g[ct].ty==="rc"||g[ct].ty==="sr"?this.renderPath(g[ct],et[ct]):g[ct].ty==="fl"?this.renderFill(g[ct],et[ct],dt):g[ct].ty==="st"?this.renderStroke(g[ct],et[ct],dt):g[ct].ty==="gf"||g[ct].ty==="gs"?this.renderGradientFill(g[ct],et[ct],dt):g[ct].ty==="gr"?this.renderShape(dt,g[ct].it,et[ct].it):g[ct].ty;ot&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(it,g){if(this._isFirstFrame||g._mdf||it.transforms._mdf){var et=it.trNodes,ot=g.paths,ct,ut,dt,ft=ot._length;et.length=0;var St=it.transforms.finalTransform;for(dt=0;dt<ft;dt+=1){var kt=ot.shapes[dt];if(kt&&kt.v){for(ut=kt._length,ct=1;ct<ut;ct+=1)ct===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[ct],kt.v[ct])});ut===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),kt.c&&ut&&(et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[0],kt.v[0])}),et.push({t:"z"}))}}it.trNodes=et}},CVShapeElement.prototype.renderPath=function(it,g){if(it.hd!==!0&&it._shouldRender){var et,ot=g.styledShapes.length;for(et=0;et<ot;et+=1)this.renderStyledShape(g.styledShapes[et],g.sh)}},CVShapeElement.prototype.renderFill=function(it,g,et){var ot=g.style;(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity)},CVShapeElement.prototype.renderGradientFill=function(it,g,et){var ot=g.style,ct;if(!ot.grd||g.g._mdf||g.s._mdf||g.e._mdf||it.t!==1&&(g.h._mdf||g.a._mdf)){var ut=this.globalData.canvasContext,dt=g.s.v,ft=g.e.v;if(it.t===1)ct=ut.createLinearGradient(dt[0],dt[1],ft[0],ft[1]);else{var St=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),kt=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Tt=g.h.v;Tt>=1?Tt=.99:Tt<=-1&&(Tt=-.99);var Rt=St*Tt,jt=Math.cos(kt+g.a.v)*Rt+dt[0],Ft=Math.sin(kt+g.a.v)*Rt+dt[1];ct=ut.createRadialGradient(jt,Ft,0,dt[0],dt[1],St)}var $t,zt=it.g.p,Ut=g.g.c,Bt=1;for($t=0;$t<zt;$t+=1)g.g._hasOpacity&&g.g._collapsable&&(Bt=g.g.o[$t*2+1]),ct.addColorStop(Ut[$t*4]/100,"rgba("+Ut[$t*4+1]+","+Ut[$t*4+2]+","+Ut[$t*4+3]+","+Bt+")");ot.grd=ct}ot.coOp=g.o.v*et.opacity},CVShapeElement.prototype.renderStroke=function(it,g,et){var ot=g.style,ct=g.d;ct&&(ct._mdf||this._isFirstFrame)&&(ot.da=ct.dashArray,ot.do=ct.dashoffset[0]),(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity),(g.w._mdf||this._isFirstFrame)&&(ot.wi=g.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(it,g,et){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=!1;it.fc?(g=!0,this.values.fill=this.buildColor(it.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=g;var et=!1;it.sc&&(et=!0,this.values.stroke=this.buildColor(it.sc),this.values.sWidth=it.sw);var ot=this.globalData.fontManager.getFontByName(it.f),ct,ut,dt=it.l,ft=this.mHelper;this.stroke=et,this.values.fValue=it.finalSize+"px "+this.globalData.fontManager.getFontByName(it.f).fFamily,ut=it.finalText.length;var St,kt,Tt,Rt,jt,Ft,$t,zt,Ut,Bt,Ht=this.data.singleShape,Jt=it.tr*.001*it.finalSize,Zt=0,tn=0,nn=!0,rn=0;for(ct=0;ct<ut;ct+=1){St=this.globalData.fontManager.getCharData(it.finalText[ct],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),kt=St&&St.data||{},ft.reset(),Ht&&dt[ct].n&&(Zt=-Jt,tn+=it.yOffset,tn+=nn?1:0,nn=!1),jt=kt.shapes?kt.shapes[0].it:[],$t=jt.length,ft.scale(it.finalSize/100,it.finalSize/100),Ht&&this.applyTextPropertiesToMatrix(it,ft,dt[ct].line,Zt,tn),Ut=createSizedArray($t-1);var on=0;for(Ft=0;Ft<$t;Ft+=1)if(jt[Ft].ty==="sh"){for(Rt=jt[Ft].ks.k.i.length,zt=jt[Ft].ks.k,Bt=[],Tt=1;Tt<Rt;Tt+=1)Tt===1&&Bt.push(ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Bt.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToY(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToX(zt.v[Tt][0],zt.v[Tt][1],0),ft.applyToY(zt.v[Tt][0],zt.v[Tt][1],0));Bt.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[0][0],zt.i[0][1],0),ft.applyToY(zt.i[0][0],zt.i[0][1],0),ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Ut[on]=Bt,on+=1}Ht&&(Zt+=dt[ct].l,Zt+=Jt),this.textSpans[rn]?this.textSpans[rn].elem=Ut:this.textSpans[rn]={elem:Ut},rn+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var it=this.canvasContext;it.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var g,et,ot,ct,ut,dt,ft=this.textAnimator.renderedLetters,St=this.textProperty.currentData.l;et=St.length;var kt,Tt=null,Rt=null,jt=null,Ft,$t,zt=this.globalData.renderer;for(g=0;g<et;g+=1)if(!St[g].n){if(kt=ft[g],kt&&(zt.save(),zt.ctxTransform(kt.p),zt.ctxOpacity(kt.o)),this.fill){for(kt&&kt.fc?Tt!==kt.fc&&(zt.ctxFillStyle(kt.fc),Tt=kt.fc):Tt!==this.values.fill&&(Tt=this.values.fill,zt.ctxFillStyle(this.values.fill)),Ft=this.textSpans[g].elem,ct=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for($t=Ft[ot],dt=$t.length,this.globalData.canvasContext.moveTo($t[0],$t[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo($t[ut],$t[ut+1],$t[ut+2],$t[ut+3],$t[ut+4],$t[ut+5]);this.globalData.canvasContext.closePath(),zt.ctxFill()}if(this.stroke){for(kt&&kt.sw?jt!==kt.sw&&(jt=kt.sw,zt.ctxLineWidth(kt.sw)):jt!==this.values.sWidth&&(jt=this.values.sWidth,zt.ctxLineWidth(this.values.sWidth)),kt&&kt.sc?Rt!==kt.sc&&(Rt=kt.sc,zt.ctxStrokeStyle(kt.sc)):Rt!==this.values.stroke&&(Rt=this.values.stroke,zt.ctxStrokeStyle(this.values.stroke)),Ft=this.textSpans[g].elem,ct=Ft.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for($t=Ft[ot],dt=$t.length,this.globalData.canvasContext.moveTo($t[0],$t[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo($t[ut],$t[ut+1],$t[ut+2],$t[ut+3],$t[ut+4],$t[ut+5]);this.globalData.canvasContext.closePath(),zt.ctxStroke()}kt&&this.globalData.renderer.restore()}};function CVImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.img=g.imageLoader.getAsset(this.assetData),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var it=createTag("canvas");it.width=this.assetData.w,it.height=this.assetData.h;var g=it.getContext("2d"),et=this.img.width,ot=this.img.height,ct=et/ot,ut=this.assetData.w/this.assetData.h,dt,ft,St=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ct>ut&&St==="xMidYMid slice"||ct<ut&&St!=="xMidYMid slice"?(ft=ot,dt=ft*ut):(dt=et,ft=dt/ut),g.drawImage(this.img,(et-dt)/2,(ot-ft)/2,dt,ft,0,0,this.assetData.w,this.assetData.h),this.img=it}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(it){return new CVShapeElement(it,this.globalData,this)},CanvasRendererBase.prototype.createText=function(it){return new CVTextElement(it,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(it){return new CVImageElement(it,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(it){return new CVSolidElement(it,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(it){it[0]===1&&it[1]===0&&it[4]===0&&it[5]===1&&it[12]===0&&it[13]===0||this.canvasContext.transform(it[0],it[1],it[4],it[5],it[12],it[13])},CanvasRendererBase.prototype.ctxOpacity=function(it){this.canvasContext.globalAlpha*=it<0?0:it},CanvasRendererBase.prototype.ctxFillStyle=function(it){this.canvasContext.fillStyle=it},CanvasRendererBase.prototype.ctxStrokeStyle=function(it){this.canvasContext.strokeStyle=it},CanvasRendererBase.prototype.ctxLineWidth=function(it){this.canvasContext.lineWidth=it},CanvasRendererBase.prototype.ctxLineCap=function(it){this.canvasContext.lineCap=it},CanvasRendererBase.prototype.ctxLineJoin=function(it){this.canvasContext.lineJoin=it},CanvasRendererBase.prototype.ctxMiterLimit=function(it){this.canvasContext.miterLimit=it},CanvasRendererBase.prototype.ctxFill=function(it){this.canvasContext.fill(it)},CanvasRendererBase.prototype.ctxFillRect=function(it,g,et,ot){this.canvasContext.fillRect(it,g,et,ot)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(it){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}it&&(this.globalData.blendMode="source-over"),this.contextData.restore(it)},CanvasRendererBase.prototype.configAnimation=function(it){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var g=this.animationItem.container.style;g.width="100%",g.height="100%";var et="0px 0px 0px";g.transformOrigin=et,g.mozTransformOrigin=et,g.webkitTransformOrigin=et,g["-webkit-transform"]=et,g.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=it,this.layers=it.layers,this.transformCanvas={w:it.w,h:it.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(it,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(it.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(it,g){this.reset();var et,ot;it?(et=it,ot=g,this.canvasContext.canvas.width=et,this.canvasContext.canvas.height=ot):(this.animationItem.wrapper&&this.animationItem.container?(et=this.animationItem.wrapper.offsetWidth,ot=this.animationItem.wrapper.offsetHeight):(et=this.canvasContext.canvas.width,ot=this.canvasContext.canvas.height),this.canvasContext.canvas.width=et*this.renderConfig.dpr,this.canvasContext.canvas.height=ot*this.renderConfig.dpr);var ct,ut;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var dt=this.renderConfig.preserveAspectRatio.split(" "),ft=dt[1]||"meet",St=dt[0]||"xMidYMid",kt=St.substr(0,4),Tt=St.substr(4);ct=et/ot,ut=this.transformCanvas.w/this.transformCanvas.h,ut>ct&&ft==="meet"||ut<ct&&ft==="slice"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=et/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr)),kt==="xMid"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))/2*this.renderConfig.dpr:kt==="xMax"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Tt==="YMid"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))/2*this.renderConfig.dpr:Tt==="YMax"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var it,g=this.layers?this.layers.length:0;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(it,g){if(!(this.renderedFrame===it&&this.renderConfig.clearCanvas===!0&&!g||this.destroyed||it===-1)){this.renderedFrame=it,this.globalData.frameNum=it-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||g,this.globalData.projectInterface.currentFrame=it;var et,ot=this.layers.length;for(this.completeLayers||this.checkLayers(it),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(it-this.layers[et].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){var et=this.createItem(this.layers[it],this,this.globalData);g[it]=et,et.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var it,g=15;for(it=0;it<g;it+=1){var et=new CanvasContext;this.stack[it]=et}this._length=g,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var it=this._length*2,g=0;for(g=this._length;g<it;g+=1)this.stack[g]=new CanvasContext;this._length=it},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(it){this.cArrPos-=1;var g=this.stack[this.cArrPos],et=g.transform,ot,ct=this.cTr.props;for(ot=0;ot<16;ot+=1)ct[ot]=et[ot];if(it){this.nativeContext.restore();var ut=this.stack[this.cArrPos+1];this.appliedFillStyle=ut.fillStyle,this.appliedStrokeStyle=ut.strokeStyle,this.appliedLineWidth=ut.lineWidth,this.appliedLineCap=ut.lineCap,this.appliedLineJoin=ut.lineJoin,this.appliedMiterLimit=ut.miterLimit}this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13]),(it||g.opacity!==-1&&this.currentOpacity!==g.opacity)&&(this.nativeContext.globalAlpha=g.opacity,this.currentOpacity=g.opacity),this.currentFillStyle=g.fillStyle,this.currentStrokeStyle=g.strokeStyle,this.currentLineWidth=g.lineWidth,this.currentLineCap=g.lineCap,this.currentLineJoin=g.lineJoin,this.currentMiterLimit=g.miterLimit},CVContextData.prototype.save=function(it){it&&this.nativeContext.save();var g=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var et=this.stack[this.cArrPos],ot;for(ot=0;ot<16;ot+=1)et.transform[ot]=g[ot];this.cArrPos+=1;var ct=this.stack[this.cArrPos];ct.opacity=et.opacity,ct.fillStyle=et.fillStyle,ct.strokeStyle=et.strokeStyle,ct.lineWidth=et.lineWidth,ct.lineCap=et.lineCap,ct.lineJoin=et.lineJoin,ct.miterLimit=et.miterLimit},CVContextData.prototype.setOpacity=function(it){this.stack[this.cArrPos].opacity=it},CVContextData.prototype.setContext=function(it){this.nativeContext=it},CVContextData.prototype.fillStyle=function(it){this.stack[this.cArrPos].fillStyle!==it&&(this.currentFillStyle=it,this.stack[this.cArrPos].fillStyle=it)},CVContextData.prototype.strokeStyle=function(it){this.stack[this.cArrPos].strokeStyle!==it&&(this.currentStrokeStyle=it,this.stack[this.cArrPos].strokeStyle=it)},CVContextData.prototype.lineWidth=function(it){this.stack[this.cArrPos].lineWidth!==it&&(this.currentLineWidth=it,this.stack[this.cArrPos].lineWidth=it)},CVContextData.prototype.lineCap=function(it){this.stack[this.cArrPos].lineCap!==it&&(this.currentLineCap=it,this.stack[this.cArrPos].lineCap=it)},CVContextData.prototype.lineJoin=function(it){this.stack[this.cArrPos].lineJoin!==it&&(this.currentLineJoin=it,this.stack[this.cArrPos].lineJoin=it)},CVContextData.prototype.miterLimit=function(it){this.stack[this.cArrPos].miterLimit!==it&&(this.currentMiterLimit=it,this.stack[this.cArrPos].miterLimit=it)},CVContextData.prototype.transform=function(it){this.transformMat.cloneFromProps(it);var g=this.cTr;this.transformMat.multiply(g),g.cloneFromProps(this.transformMat.props);var et=g.props;this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13])},CVContextData.prototype.opacity=function(it){var g=this.stack[this.cArrPos].opacity;g*=it<0?0:it,this.stack[this.cArrPos].opacity!==g&&(this.currentOpacity!==it&&(this.nativeContext.globalAlpha=it,this.currentOpacity=it),this.stack[this.cArrPos].opacity=g)},CVContextData.prototype.fill=function(it){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(it)},CVContextData.prototype.fillRect=function(it,g,et,ot){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(it,g,et,ot)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(it,g,et){this.completeLayers=!1,this.layers=it.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var it=this.canvasContext;it.beginPath(),it.moveTo(0,0),it.lineTo(this.data.w,0),it.lineTo(this.data.w,this.data.h),it.lineTo(0,this.data.h),it.lineTo(0,0),it.clip();var g,et=this.layers.length;for(g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()},CVCompElement.prototype.destroy=function(){var it,g=this.layers.length;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function CanvasRenderer(it,g){this.animationItem=it,this.renderConfig={clearCanvas:g&&g.clearCanvas!==void 0?g.clearCanvas:!0,context:g&&g.context||null,progressiveLoad:g&&g.progressiveLoad||!1,preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",className:g&&g.className||"",id:g&&g.id||"",runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.renderConfig.dpr=g&&g.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=g&&g.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var g=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var et=this.finalTransform.mat.toCSS();g.transform=et,g.webkitTransform=et}this.finalTransform._opMdf&&(g.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var it;this.data.hasMask?(it=createNS("rect"),it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(it=createTag("div"),it.style.width=this.data.sw+"px",it.style.height=this.data.sh+"px",it.style.backgroundColor=this.data.sc),this.layerElement.appendChild(it)};function HShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(it,g,et),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var it;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),it=this.svgElement;else{it=createNS("svg");var g=this.comp.data?this.comp.data:this.globalData.compSize;it.setAttribute("width",g.w),it.setAttribute("height",g.h),it.appendChild(this.shapesContainer),this.layerElement.appendChild(it)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=it},HShapeElement.prototype.getTransformedPoint=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g=it[et].mProps.v.applyToPointArray(g[0],g[1],0);return g},HShapeElement.prototype.calculateShapeBoundingBox=function(it,g){var et=it.sh.v,ot=it.transformers,ct,ut=et._length,dt,ft,St,kt;if(!(ut<=1)){for(ct=0;ct<ut-1;ct+=1)dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[ct+1]),kt=this.getTransformedPoint(ot,et.v[ct+1]),this.checkBounds(dt,ft,St,kt,g);et.c&&(dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[0]),kt=this.getTransformedPoint(ot,et.v[0]),this.checkBounds(dt,ft,St,kt,g))}},HShapeElement.prototype.checkBounds=function(it,g,et,ot,ct){this.getBoundsOfCurve(it,g,et,ot);var ut=this.shapeBoundingBox;ct.x=bmMin(ut.left,ct.x),ct.xMax=bmMax(ut.right,ct.xMax),ct.y=bmMin(ut.top,ct.y),ct.yMax=bmMax(ut.bottom,ct.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(it,g,et,ot){for(var ct=[[it[0],ot[0]],[it[1],ot[1]]],ut,dt,ft,St,kt,Tt,Rt,jt=0;jt<2;++jt)dt=6*it[jt]-12*g[jt]+6*et[jt],ut=-3*it[jt]+9*g[jt]-9*et[jt]+3*ot[jt],ft=3*g[jt]-3*it[jt],dt|=0,ut|=0,ft|=0,ut===0&&dt===0||(ut===0?(St=-ft/dt,St>0&&St<1&&ct[jt].push(this.calculateF(St,it,g,et,ot,jt))):(kt=dt*dt-4*ft*ut,kt>=0&&(Tt=(-dt+bmSqrt(kt))/(2*ut),Tt>0&&Tt<1&&ct[jt].push(this.calculateF(Tt,it,g,et,ot,jt)),Rt=(-dt-bmSqrt(kt))/(2*ut),Rt>0&&Rt<1&&ct[jt].push(this.calculateF(Rt,it,g,et,ot,jt)))));this.shapeBoundingBox.left=bmMin.apply(null,ct[0]),this.shapeBoundingBox.top=bmMin.apply(null,ct[1]),this.shapeBoundingBox.right=bmMax.apply(null,ct[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ct[1])},HShapeElement.prototype.calculateF=function(it,g,et,ot,ct,ut){return bmPow(1-it,3)*g[ut]+3*bmPow(1-it,2)*it*et[ut]+3*(1-it)*bmPow(it,2)*ot[ut]+bmPow(it,3)*ct[ut]},HShapeElement.prototype.calculateBoundingBox=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]&&it[et].sh?this.calculateShapeBoundingBox(it[et],g):it[et]&&it[et].it?this.calculateBoundingBox(it[et].it,g):it[et]&&it[et].style&&it[et].w&&this.expandStrokeBoundingBox(it[et].w,g)},HShapeElement.prototype.expandStrokeBoundingBox=function(it,g){var et=0;if(it.keyframes){for(var ot=0;ot<it.keyframes.length;ot+=1){var ct=it.keyframes[ot].s;ct>et&&(et=ct)}et*=it.mult}else et=it.v*it.mult;g.x-=et,g.xMax+=et,g.y-=et,g.yMax+=et},HShapeElement.prototype.currentBoxContains=function(it){return this.currentBBox.x<=it.x&&this.currentBBox.y<=it.y&&this.currentBBox.width+this.currentBBox.x>=it.x+it.width&&this.currentBBox.height+this.currentBBox.y>=it.y+it.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var it=this.tempBoundingBox,g=999999;if(it.x=g,it.xMax=-g,it.y=g,it.yMax=-g,this.calculateBoundingBox(this.itemsData,it),it.width=it.xMax<it.x?0:it.xMax-it.x,it.height=it.yMax<it.y?0:it.yMax-it.y,this.currentBoxContains(it))return;var et=!1;if(this.currentBBox.w!==it.width&&(this.currentBBox.w=it.width,this.shapeCont.setAttribute("width",it.width),et=!0),this.currentBBox.h!==it.height&&(this.currentBBox.h=it.height,this.shapeCont.setAttribute("height",it.height),et=!0),et||this.currentBBox.x!==it.x||this.currentBBox.y!==it.y){this.currentBBox.w=it.width,this.currentBBox.h=it.height,this.currentBBox.x=it.x,this.currentBBox.y=it.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ot=this.shapeCont.style,ct="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ot.transform=ct,ot.webkitTransform=ct}}};function HTextElement(it,g,et){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var it=createNS("g");this.maskedElement.appendChild(it),this.innerElem=it}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=this.innerElem.style,et=it.fc?this.buildColor(it.fc):"rgba(0,0,0,0)";g.fill=et,g.color=et,it.sc&&(g.stroke=this.buildColor(it.sc),g.strokeWidth=it.sw+"px");var ot=this.globalData.fontManager.getFontByName(it.f);if(!this.globalData.fontManager.chars)if(g.fontSize=it.finalSize+"px",g.lineHeight=it.finalSize+"px",ot.fClass)this.innerElem.className=ot.fClass;else{g.fontFamily=ot.fFamily;var ct=it.fWeight,ut=it.fStyle;g.fontStyle=ut,g.fontWeight=ct}var dt,ft,St=it.l;ft=St.length;var kt,Tt,Rt,jt=this.mHelper,Ft,$t="",zt=0;for(dt=0;dt<ft;dt+=1){if(this.globalData.fontManager.chars?(this.textPaths[zt]?kt=this.textPaths[zt]:(kt=createNS("path"),kt.setAttribute("stroke-linecap",lineCapEnum[1]),kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[zt]?(Tt=this.textSpans[zt],Rt=Tt.children[0]):(Tt=createTag("div"),Tt.style.lineHeight=0,Rt=createNS("svg"),Rt.appendChild(kt),styleDiv(Tt)))):this.isMasked?kt=this.textPaths[zt]?this.textPaths[zt]:createNS("text"):this.textSpans[zt]?(Tt=this.textSpans[zt],kt=this.textPaths[zt]):(Tt=createTag("span"),styleDiv(Tt),kt=createTag("span"),styleDiv(kt),Tt.appendChild(kt)),this.globalData.fontManager.chars){var Ut=this.globalData.fontManager.getCharData(it.finalText[dt],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),Bt;if(Ut?Bt=Ut.data:Bt=null,jt.reset(),Bt&&Bt.shapes&&Bt.shapes.length&&(Ft=Bt.shapes[0].it,jt.scale(it.finalSize/100,it.finalSize/100),$t=this.createPathShape(jt,Ft),kt.setAttribute("d",$t)),this.isMasked)this.innerElem.appendChild(kt);else{if(this.innerElem.appendChild(Tt),Bt&&Bt.shapes){document.body.appendChild(Rt);var Ht=Rt.getBBox();Rt.setAttribute("width",Ht.width+2),Rt.setAttribute("height",Ht.height+2),Rt.setAttribute("viewBox",Ht.x-1+" "+(Ht.y-1)+" "+(Ht.width+2)+" "+(Ht.height+2));var Jt=Rt.style,Zt="translate("+(Ht.x-1)+"px,"+(Ht.y-1)+"px)";Jt.transform=Zt,Jt.webkitTransform=Zt,St[dt].yOffset=Ht.y-1}else Rt.setAttribute("width",1),Rt.setAttribute("height",1);Tt.appendChild(Rt)}}else if(kt.textContent=St[dt].val,kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(kt);else{this.innerElem.appendChild(Tt);var tn=kt.style,nn="translate3d(0,"+-it.finalSize/1.2+"px,0)";tn.transform=nn,tn.webkitTransform=nn}this.isMasked?this.textSpans[zt]=kt:this.textSpans[zt]=Tt,this.textSpans[zt].style.display="block",this.textPaths[zt]=kt,zt+=1}for(;zt<this.textSpans.length;)this.textSpans[zt].style.display="none",zt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var it;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),it=this.svgElement.style;var g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";it.transform=g,it.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var et,ot,ct=0,ut=this.textAnimator.renderedLetters,dt=this.textProperty.currentData.l;ot=dt.length;var ft,St,kt;for(et=0;et<ot;et+=1)dt[et].n?ct+=1:(St=this.textSpans[et],kt=this.textPaths[et],ft=ut[ct],ct+=1,ft._mdf.m&&(this.isMasked?St.setAttribute("transform",ft.m):(St.style.webkitTransform=ft.m,St.style.transform=ft.m)),St.style.opacity=ft.o,ft.sw&&ft._mdf.sw&&kt.setAttribute("stroke-width",ft.sw),ft.sc&&ft._mdf.sc&&kt.setAttribute("stroke",ft.sc),ft.fc&&ft._mdf.fc&&(kt.setAttribute("fill",ft.fc),kt.style.color=ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Tt=this.innerElem.getBBox();this.currentBBox.w!==Tt.width&&(this.currentBBox.w=Tt.width,this.svgElement.setAttribute("width",Tt.width)),this.currentBBox.h!==Tt.height&&(this.currentBBox.h=Tt.height,this.svgElement.setAttribute("height",Tt.height));var Rt=1;if(this.currentBBox.w!==Tt.width+Rt*2||this.currentBBox.h!==Tt.height+Rt*2||this.currentBBox.x!==Tt.x-Rt||this.currentBBox.y!==Tt.y-Rt){this.currentBBox.w=Tt.width+Rt*2,this.currentBBox.h=Tt.height+Rt*2,this.currentBBox.x=Tt.x-Rt,this.currentBBox.y=Tt.y-Rt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),it=this.svgElement.style;var jt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";it.transform=jt,it.webkitTransform=jt}}}};function HCameraElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initHierarchy();var ot=PropertyFactory.getProp;if(this.pe=ot(this,it.pe,0,0,this),it.ks.p.s?(this.px=ot(this,it.ks.p.x,1,0,this),this.py=ot(this,it.ks.p.y,1,0,this),this.pz=ot(this,it.ks.p.z,1,0,this)):this.p=ot(this,it.ks.p,1,0,this),it.ks.a&&(this.a=ot(this,it.ks.a,1,0,this)),it.ks.or.k.length&&it.ks.or.k[0].to){var ct,ut=it.ks.or.k.length;for(ct=0;ct<ut;ct+=1)it.ks.or.k[ct].to=null,it.ks.or.k[ct].ti=null}this.or=ot(this,it.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ot(this,it.ks.rx,0,degToRads,this),this.ry=ot(this,it.ks.ry,0,degToRads,this),this.rz=ot(this,it.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var it,g=this.comp.threeDElements.length,et,ot,ct;for(it=0;it<g;it+=1)if(et=this.comp.threeDElements[it],et.type==="3d"){ot=et.perspectiveElem.style,ct=et.container.style;var ut=this.pe.v+"px",dt="0px 0px 0px",ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ot.perspective=ut,ot.webkitPerspective=ut,ct.transformOrigin=dt,ct.mozTransformOrigin=dt,ct.webkitTransformOrigin=dt,ot.transform=ft,ot.webkitTransform=ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var it=this._isFirstFrame,g,et;if(this.hierarchy)for(et=this.hierarchy.length,g=0;g<et;g+=1)it=this.hierarchy[g].finalTransform.mProp._mdf||it;if(it||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(et=this.hierarchy.length-1,g=et;g>=0;g-=1){var ot=this.hierarchy[g].finalTransform.mProp;this.mat.translate(-ot.p.v[0],-ot.p.v[1],ot.p.v[2]),this.mat.rotateX(-ot.or.v[0]).rotateY(-ot.or.v[1]).rotateZ(ot.or.v[2]),this.mat.rotateX(-ot.rx.v).rotateY(-ot.ry.v).rotateZ(ot.rz.v),this.mat.scale(1/ot.s.v[0],1/ot.s.v[1],1/ot.s.v[2]),this.mat.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ct;this.p?ct=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ct=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ut=Math.sqrt(Math.pow(ct[0],2)+Math.pow(ct[1],2)+Math.pow(ct[2],2)),dt=[ct[0]/ut,ct[1]/ut,ct[2]/ut],ft=Math.sqrt(dt[2]*dt[2]+dt[0]*dt[0]),St=Math.atan2(dt[1],ft),kt=Math.atan2(dt[0],-dt[2]);this.mat.rotateY(kt).rotateX(-St)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Tt=!this._prevMat.equals(this.mat);if((Tt||this.pe._mdf)&&this.comp.threeDElements){et=this.comp.threeDElements.length;var Rt,jt,Ft;for(g=0;g<et;g+=1)if(Rt=this.comp.threeDElements[g],Rt.type==="3d"){if(Tt){var $t=this.mat.toCSS();Ft=Rt.container.style,Ft.transform=$t,Ft.webkitTransform=$t}this.pe._mdf&&(jt=Rt.perspectiveElem.style,jt.perspective=this.pe.v+"px",jt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData),g=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(g),g.crossOrigin="anonymous",g.src=it,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){var ot=this.layers[g];if(!ot.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(et,g);else{for(var ct=0,ut,dt,ft;ct<g;)this.elements[ct]&&this.elements[ct]!==!0&&this.elements[ct].getBaseElement&&(dt=this.elements[ct],ft=this.layers[ct].ddd?this.getThreeDContainerByPos(ct):dt.getBaseElement(),ut=ft||ut),ct+=1;ut?(!ot.ddd||!this.supports3d)&&this.layerElement.insertBefore(et,ut):(!ot.ddd||!this.supports3d)&&this.layerElement.appendChild(et)}else this.addTo3dContainer(et,g)}},HybridRendererBase.prototype.createShape=function(it){return this.supports3d?new HShapeElement(it,this.globalData,this):new SVGShapeElement(it,this.globalData,this)},HybridRendererBase.prototype.createText=function(it){return this.supports3d?new HTextElement(it,this.globalData,this):new SVGTextLottieElement(it,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(it){return this.camera=new HCameraElement(it,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(it){return this.supports3d?new HImageElement(it,this.globalData,this):new IImageElement(it,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(it){return this.supports3d?new HSolidElement(it,this.globalData,this):new ISolidElement(it,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(it){for(var g=0,et=this.threeDElements.length;g<et;){if(this.threeDElements[g].startPos<=it&&this.threeDElements[g].endPos>=it)return this.threeDElements[g].perspectiveElem;g+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(it,g){var et=createTag("div"),ot,ct;styleDiv(et);var ut=createTag("div");if(styleDiv(ut),g==="3d"){ot=et.style,ot.width=this.globalData.compSize.w+"px",ot.height=this.globalData.compSize.h+"px";var dt="50% 50%";ot.webkitTransformOrigin=dt,ot.mozTransformOrigin=dt,ot.transformOrigin=dt,ct=ut.style;var ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ct.transform=ft,ct.webkitTransform=ft}et.appendChild(ut);var St={container:ut,perspectiveElem:et,startPos:it,endPos:it,type:g};return this.threeDElements.push(St),St},HybridRendererBase.prototype.build3dContainers=function(){var it,g=this.layers.length,et,ot="";for(it=0;it<g;it+=1)this.layers[it].ddd&&this.layers[it].ty!==3?(ot!=="3d"&&(ot="3d",et=this.createThreeDContainer(it,"3d")),et.endPos=Math.max(et.endPos,it)):(ot!=="2d"&&(ot="2d",et=this.createThreeDContainer(it,"2d")),et.endPos=Math.max(et.endPos,it));for(g=this.threeDElements.length,it=g-1;it>=0;it-=1)this.resizerElem.appendChild(this.threeDElements[it].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(it,g){for(var et=0,ot=this.threeDElements.length;et<ot;){if(g<=this.threeDElements[et].endPos){for(var ct=this.threeDElements[et].startPos,ut;ct<g;)this.elements[ct]&&this.elements[ct].getBaseElement&&(ut=this.elements[ct].getBaseElement()),ct+=1;ut?this.threeDElements[et].container.insertBefore(it,ut):this.threeDElements[et].container.appendChild(it);break}et+=1}},HybridRendererBase.prototype.configAnimation=function(it){var g=createTag("div"),et=this.animationItem.wrapper,ot=g.style;ot.width=it.w+"px",ot.height=it.h+"px",this.resizerElem=g,styleDiv(g),ot.transformStyle="flat",ot.mozTransformStyle="flat",ot.webkitTransformStyle="flat",this.renderConfig.className&&g.setAttribute("class",this.renderConfig.className),et.appendChild(g),ot.overflow="hidden";var ct=createNS("svg");ct.setAttribute("width","1"),ct.setAttribute("height","1"),styleDiv(ct),this.resizerElem.appendChild(ct);var ut=createNS("defs");ct.appendChild(ut),this.data=it,this.setupGlobalData(it,ct),this.globalData.defs=ut,this.layers=it.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var it=this.animationItem.wrapper.offsetWidth,g=this.animationItem.wrapper.offsetHeight,et=it/g,ot=this.globalData.compSize.w/this.globalData.compSize.h,ct,ut,dt,ft;ot>et?(ct=it/this.globalData.compSize.w,ut=it/this.globalData.compSize.w,dt=0,ft=(g-this.globalData.compSize.h*(it/this.globalData.compSize.w))/2):(ct=g/this.globalData.compSize.h,ut=g/this.globalData.compSize.h,dt=(it-this.globalData.compSize.w*(g/this.globalData.compSize.h))/2,ft=0);var St=this.resizerElem.style;St.webkitTransform="matrix3d("+ct+",0,0,0,0,"+ut+",0,0,0,0,1,0,"+dt+","+ft+",0,1)",St.transform=St.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var it=this.globalData.compSize.w,g=this.globalData.compSize.h,et,ot=this.threeDElements.length;for(et=0;et<ot;et+=1){var ct=this.threeDElements[et].perspectiveElem.style;ct.webkitPerspective=Math.sqrt(Math.pow(it,2)+Math.pow(g,2))+"px",ct.perspective=ct.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(it){var g,et=it.length,ot=createTag("div");for(g=0;g<et;g+=1)if(it[g].xt){var ct=this.createComp(it[g],ot,this.globalData.comp,null);ct.initExpressions(),this.globalData.projectInterface.registerComposition(ct)}};function HCompElement(it,g,et){this.layers=it.layers,this.supports3d=!it.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(it,g){for(var et=0,ot;et<g;)this.elements[et]&&this.elements[et].getBaseElement&&(ot=this.elements[et].getBaseElement()),et+=1;ot?this.layerElement.insertBefore(it,ot):this.layerElement.appendChild(it)},HCompElement.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};function HybridRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"},runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};var CompExpressionInterface=function(){return function(it){function g(et){for(var ot=0,ct=it.layers.length;ot<ct;){if(it.layers[ot].nm===et||it.layers[ot].ind===et)return it.elements[ot].layerInterface;ot+=1}return null}return Object.defineProperty(g,"_name",{value:it.data.nm}),g.layer=g,g.pixelAspect=1,g.height=it.data.h||it.globalData.compSize.h,g.width=it.data.w||it.globalData.compSize.w,g.pixelAspect=1,g.frameDuration=1/it.globalData.frameRate,g.displayStartTime=0,g.numLayers=it.layers.length,g}}();function _typeof$2(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(et){return typeof et}:_typeof$2=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(it)}function seedRandom(it,g){var et=this,ot=256,ct=6,ut=52,dt="random",ft=g.pow(ot,ct),St=g.pow(2,ut),kt=St*2,Tt=ot-1,Rt;function jt(Jt,Zt,tn){var nn=[];Zt=Zt===!0?{entropy:!0}:Zt||{};var rn=Ut(zt(Zt.entropy?[Jt,Ht(it)]:Jt===null?Bt():Jt,3),nn),on=new Ft(nn),pn=function(){for(var hn=on.g(ct),un=ft,En=0;hn<St;)hn=(hn+En)*ot,un*=ot,En=on.g(1);for(;hn>=kt;)hn/=2,un/=2,En>>>=1;return(hn+En)/un};return pn.int32=function(){return on.g(4)|0},pn.quick=function(){return on.g(4)/4294967296},pn.double=pn,Ut(Ht(on.S),it),(Zt.pass||tn||function(dn,hn,un,En){return En&&(En.S&&$t(En,on),dn.state=function(){return $t(on,{})}),un?(g[dt]=dn,hn):dn})(pn,rn,"global"in Zt?Zt.global:this==g,Zt.state)}g["seed"+dt]=jt;function Ft(Jt){var Zt,tn=Jt.length,nn=this,rn=0,on=nn.i=nn.j=0,pn=nn.S=[];for(tn||(Jt=[tn++]);rn<ot;)pn[rn]=rn++;for(rn=0;rn<ot;rn++)pn[rn]=pn[on=Tt&on+Jt[rn%tn]+(Zt=pn[rn])],pn[on]=Zt;nn.g=function(dn){for(var hn,un=0,En=nn.i,wn=nn.j,Sn=nn.S;dn--;)hn=Sn[En=Tt&En+1],un=un*ot+Sn[Tt&(Sn[En]=Sn[wn=Tt&wn+hn])+(Sn[wn]=hn)];return nn.i=En,nn.j=wn,un}}function $t(Jt,Zt){return Zt.i=Jt.i,Zt.j=Jt.j,Zt.S=Jt.S.slice(),Zt}function zt(Jt,Zt){var tn=[],nn=_typeof$2(Jt),rn;if(Zt&&nn=="object")for(rn in Jt)try{tn.push(zt(Jt[rn],Zt-1))}catch{}return tn.length?tn:nn=="string"?Jt:Jt+"\0"}function Ut(Jt,Zt){for(var tn=Jt+"",nn,rn=0;rn<tn.length;)Zt[Tt&rn]=Tt&(nn^=Zt[Tt&rn]*19)+tn.charCodeAt(rn++);return Ht(Zt)}function Bt(){try{var Jt=new Uint8Array(ot);return(et.crypto||et.msCrypto).getRandomValues(Jt),Ht(Jt)}catch{var Zt=et.navigator,tn=Zt&&Zt.plugins;return[+new Date,et,tn,et.screen,Ht(it)]}}function Ht(Jt){return String.fromCharCode.apply(0,Jt)}Ut(g.random(),it)}function initialize$2(it){seedRandom([],it)}var propTypes={SHAPE:"shape"};function _typeof$1(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(et){return typeof et}:_typeof$1=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(it)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(it){return it.constructor===Array||it.constructor===Float32Array}function isNumerable(it,g){return it==="number"||g instanceof Number||it==="boolean"||it==="string"}function $bm_neg(it){var g=_typeof$1(it);if(g==="number"||it instanceof Number||g==="boolean")return-it;if($bm_isInstanceOfArray(it)){var et,ot=it.length,ct=[];for(et=0;et<ot;et+=1)ct[et]=-it[et];return ct}return it.propType?it.v:-it}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g)||et==="string"||ot==="string")return it+g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]+=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it+g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]+g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}var add=sum;function sub(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g))return et==="string"&&(it=parseInt(it,10)),ot==="string"&&(g=parseInt(g,10)),it-g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]-=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it-g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]-g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}function mul(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it*g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]*g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it*g[ut];return ct}return 0}function div(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it/g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]/g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it/g[ut];return ct}return 0}function mod(it,g){return typeof it=="string"&&(it=parseInt(it,10)),typeof g=="string"&&(g=parseInt(g,10)),it%g}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(it,g,et){if(g>et){var ot=et;et=g,g=ot}return Math.min(Math.max(it,g),et)}function radiansToDegrees(it){return it/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(it){return it*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(it,g){if(typeof it=="number"||it instanceof Number)return g=g||0,Math.abs(it-g);g||(g=helperLengthArray);var et,ot=Math.min(it.length,g.length),ct=0;for(et=0;et<ot;et+=1)ct+=Math.pow(g[et]-it[et],2);return Math.sqrt(ct)}function normalize(it){return div(it,length(it))}function rgbToHsl(it){var g=it[0],et=it[1],ot=it[2],ct=Math.max(g,et,ot),ut=Math.min(g,et,ot),dt,ft,St=(ct+ut)/2;if(ct===ut)dt=0,ft=0;else{var kt=ct-ut;switch(ft=St>.5?kt/(2-ct-ut):kt/(ct+ut),ct){case g:dt=(et-ot)/kt+(et<ot?6:0);break;case et:dt=(ot-g)/kt+2;break;case ot:dt=(g-et)/kt+4;break}dt/=6}return[dt,ft,St,it[3]]}function hue2rgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslToRgb(it){var g=it[0],et=it[1],ot=it[2],ct,ut,dt;if(et===0)ct=ot,dt=ot,ut=ot;else{var ft=ot<.5?ot*(1+et):ot+et-ot*et,St=2*ot-ft;ct=hue2rgb(St,ft,g+1/3),ut=hue2rgb(St,ft,g),dt=hue2rgb(St,ft,g-1/3)}return[ct,ut,dt,it[3]]}function linear(it,g,et,ot,ct){if((ot===void 0||ct===void 0)&&(ot=g,ct=et,g=0,et=1),et<g){var ut=et;et=g,g=ut}if(it<=g)return ot;if(it>=et)return ct;var dt=et===g?0:(it-g)/(et-g);if(!ot.length)return ot+(ct-ot)*dt;var ft,St=ot.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=ot[ft]+(ct[ft]-ot[ft])*dt;return kt}function random(it,g){if(g===void 0&&(it===void 0?(it=0,g=1):(g=it,it=void 0)),g.length){var et,ot=g.length;it||(it=createTypedArray("float32",ot));var ct=createTypedArray("float32",ot),ut=BMMath.random();for(et=0;et<ot;et+=1)ct[et]=it[et]+ut*(g[et]-it[et]);return ct}it===void 0&&(it=0);var dt=BMMath.random();return it+dt*(g-it)}function createPath(it,g,et,ot){var ct,ut=it.length,dt=shapePool.newElement();dt.setPathData(!!ot,ut);var ft=[0,0],St,kt;for(ct=0;ct<ut;ct+=1)St=g&&g[ct]?g[ct]:ft,kt=et&&et[ct]?et[ct]:ft,dt.setTripleAt(it[ct][0],it[ct][1],kt[0]+it[ct][0],kt[1]+it[ct][1],St[0]+it[ct][0],St[1]+it[ct][1],ct,!0);return dt}function initiateExpression(elem,data,property){function noOp(it){return it}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function it(g,et){var ot,ct,ut=this.pv.length?this.pv.length:1,dt=createTypedArray("float32",ut);g=5;var ft=Math.floor(time*g);for(ot=0,ct=0;ot<ft;){for(ct=0;ct<ut;ct+=1)dt[ct]+=-et+et*2*BMMath.random();ot+=1}var St=time*g,kt=St-Math.floor(St),Tt=createTypedArray("float32",ut);if(ut>1){for(ct=0;ct<ut;ct+=1)Tt[ct]=this.pv[ct]+dt[ct]+(-et+et*2*BMMath.random())*kt;return Tt}return this.pv+dt[0]+(-et+et*2*BMMath.random())*kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(it,g){return loopIn(it,g,!0)}function loopOutDuration(it,g){return loopOut(it,g,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(it,g){var et=[g[0]-it[0],g[1]-it[1],g[2]-it[2]],ot=Math.atan2(et[0],Math.sqrt(et[1]*et[1]+et[2]*et[2]))/degToRads,ct=-Math.atan2(et[1],et[2])/degToRads;return[ct,ot,0]}function easeOut(it,g,et,ot,ct){return applyEase(easeOutBez,it,g,et,ot,ct)}function easeIn(it,g,et,ot,ct){return applyEase(easeInBez,it,g,et,ot,ct)}function ease(it,g,et,ot,ct){return applyEase(easeInOutBez,it,g,et,ot,ct)}function applyEase(it,g,et,ot,ct,ut){ct===void 0?(ct=et,ut=ot):g=(g-et)/(ot-et),g>1?g=1:g<0&&(g=0);var dt=it(g);if($bm_isInstanceOfArray(ct)){var ft,St=ct.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=(ut[ft]-ct[ft])*dt+ct[ft];return kt}return(ut-ct)*dt+ct}function nearestKey(it){var g,et=data.k.length,ot,ct;if(!data.k.length||typeof data.k[0]=="number")ot=0,ct=0;else if(ot=-1,it*=elem.comp.globalData.frameRate,it<data.k[0].t)ot=1,ct=data.k[0].t;else{for(g=0;g<et-1;g+=1)if(it===data.k[g].t){ot=g+1,ct=data.k[g].t;break}else if(it>data.k[g].t&&it<data.k[g+1].t){it-data.k[g].t>data.k[g+1].t-it?(ot=g+2,ct=data.k[g+1].t):(ot=g+1,ct=data.k[g].t);break}ot===-1&&(ot=g+1,ct=data.k[g].t)}var ut={};return ut.index=ot,ut.time=ct/elem.comp.globalData.frameRate,ut}function key(it){var g,et,ot;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+it);it-=1,g={time:data.k[it].t/elem.comp.globalData.frameRate,value:[]};var ct=Object.prototype.hasOwnProperty.call(data.k[it],"s")?data.k[it].s:data.k[it-1].e;for(ot=ct.length,et=0;et<ot;et+=1)g[et]=ct[et],g.value[et]=ct[et];return g}function framesToTime(it,g){return g||(g=elem.comp.globalData.frameRate),it/g}function timeToFrames(it,g){return!it&&it!==0&&(it=time),g||(g=elem.comp.globalData.frameRate),it*g}function seedRandom(it){BMMath.seedrandom(randSeed+it)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(it,g){return typeof value=="string"?g===void 0?value.substring(it):value.substring(it,g):""}function substr(it,g){return typeof value=="string"?g===void 0?value.substr(it):value.substr(it,g):""}function posterizeTime(it){time=it===0?0:Math.floor(time*it)/it,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(it){return value=it,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var it={};it.initExpressions=g,it.resetFrame=ExpressionManager.resetFrame;function g(et){var ot=0,ct=[];function ut(){ot+=1}function dt(){ot-=1,ot===0&&St()}function ft(kt){ct.indexOf(kt)===-1&&ct.push(kt)}function St(){var kt,Tt=ct.length;for(kt=0;kt<Tt;kt+=1)ct[kt].release();ct.length=0}et.renderer.compInterface=CompExpressionInterface(et.renderer),et.renderer.globalData.projectInterface.registerComposition(et.renderer),et.renderer.globalData.pushExpression=ut,et.renderer.globalData.popExpression=dt,et.renderer.globalData.registerExpressionProperty=ft}return it}(),MaskManagerInterface=function(){function it(et,ot){this._mask=et,this._data=ot}Object.defineProperty(it.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(it.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var g=function(ot){var ct=createSizedArray(ot.viewData.length),ut,dt=ot.viewData.length;for(ut=0;ut<dt;ut+=1)ct[ut]=new it(ot.viewData[ut],ot.masksProperties[ut]);var ft=function(kt){for(ut=0;ut<dt;){if(ot.masksProperties[ut].nm===kt)return ct[ut];ut+=1}return null};return ft};return g}(),ExpressionPropertyInterface=function(){var it={pv:0,v:0,mult:1},g={pv:[0,0,0],v:[0,0,0],mult:1};function et(dt,ft,St){Object.defineProperty(dt,"velocity",{get:function(){return ft.getVelocityAtTime(ft.comp.currentFrame)}}),dt.numKeys=ft.keyframes?ft.keyframes.length:0,dt.key=function(kt){if(!dt.numKeys)return 0;var Tt="";"s"in ft.keyframes[kt-1]?Tt=ft.keyframes[kt-1].s:"e"in ft.keyframes[kt-2]?Tt=ft.keyframes[kt-2].e:Tt=ft.keyframes[kt-2].s;var Rt=St==="unidimensional"?new Number(Tt):Object.assign({},Tt);return Rt.time=ft.keyframes[kt-1].t/ft.elem.comp.globalData.frameRate,Rt.value=St==="unidimensional"?Tt[0]:Tt,Rt},dt.valueAtTime=ft.getValueAtTime,dt.speedAtTime=ft.getSpeedAtTime,dt.velocityAtTime=ft.getVelocityAtTime,dt.propertyGroup=ft.propertyGroup}function ot(dt){(!dt||!("pv"in dt))&&(dt=it);var ft=1/dt.mult,St=dt.pv*ft,kt=new Number(St);return kt.value=St,et(kt,dt,"unidimensional"),function(){return dt.k&&dt.getValue(),St=dt.v*ft,kt.value!==St&&(kt=new Number(St),kt.value=St,et(kt,dt,"unidimensional")),kt}}function ct(dt){(!dt||!("pv"in dt))&&(dt=g);var ft=1/dt.mult,St=dt.data&&dt.data.l||dt.pv.length,kt=createTypedArray("float32",St),Tt=createTypedArray("float32",St);return kt.value=Tt,et(kt,dt,"multidimensional"),function(){dt.k&&dt.getValue();for(var Rt=0;Rt<St;Rt+=1)Tt[Rt]=dt.v[Rt]*ft,kt[Rt]=Tt[Rt];return kt}}function ut(){return it}return function(dt){return dt?dt.propType==="unidimensional"?ot(dt):ct(dt):ut}}(),TransformExpressionInterface=function(){return function(it){function g(dt){switch(dt){case"scale":case"Scale":case"ADBE Scale":case 6:return g.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return g.rotation;case"ADBE Rotate X":return g.xRotation;case"ADBE Rotate Y":return g.yRotation;case"position":case"Position":case"ADBE Position":case 2:return g.position;case"ADBE Position_0":return g.xPosition;case"ADBE Position_1":return g.yPosition;case"ADBE Position_2":return g.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return g.anchorPoint;case"opacity":case"Opacity":case 11:return g.opacity;default:return null}}Object.defineProperty(g,"rotation",{get:ExpressionPropertyInterface(it.r||it.rz)}),Object.defineProperty(g,"zRotation",{get:ExpressionPropertyInterface(it.rz||it.r)}),Object.defineProperty(g,"xRotation",{get:ExpressionPropertyInterface(it.rx)}),Object.defineProperty(g,"yRotation",{get:ExpressionPropertyInterface(it.ry)}),Object.defineProperty(g,"scale",{get:ExpressionPropertyInterface(it.s)});var et,ot,ct,ut;return it.p?ut=ExpressionPropertyInterface(it.p):(et=ExpressionPropertyInterface(it.px),ot=ExpressionPropertyInterface(it.py),it.pz&&(ct=ExpressionPropertyInterface(it.pz))),Object.defineProperty(g,"position",{get:function(){return it.p?ut():[et(),ot(),ct?ct():0]}}),Object.defineProperty(g,"xPosition",{get:ExpressionPropertyInterface(it.px)}),Object.defineProperty(g,"yPosition",{get:ExpressionPropertyInterface(it.py)}),Object.defineProperty(g,"zPosition",{get:ExpressionPropertyInterface(it.pz)}),Object.defineProperty(g,"anchorPoint",{get:ExpressionPropertyInterface(it.a)}),Object.defineProperty(g,"opacity",{get:ExpressionPropertyInterface(it.o)}),Object.defineProperty(g,"skew",{get:ExpressionPropertyInterface(it.sk)}),Object.defineProperty(g,"skewAxis",{get:ExpressionPropertyInterface(it.sa)}),Object.defineProperty(g,"orientation",{get:ExpressionPropertyInterface(it.or)}),g}}(),LayerExpressionInterface=function(){function it(kt){var Tt=new Matrix;if(kt!==void 0){var Rt=this._elem.finalTransform.mProp.getValueAtTime(kt);Rt.clone(Tt)}else{var jt=this._elem.finalTransform.mProp;jt.applyToMatrix(Tt)}return Tt}function g(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.applyPoint(Rt,kt)}function et(kt,Tt){var Rt=this.getMatrix(Tt);return this.applyPoint(Rt,kt)}function ot(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.invertPoint(Rt,kt)}function ct(kt,Tt){var Rt=this.getMatrix(Tt);return this.invertPoint(Rt,kt)}function ut(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.applyToPointArray(Tt[0],Tt[1],Tt[2]||0)}function dt(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.inversePoint(Tt)}function ft(kt){var Tt=new Matrix;if(Tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Tt),this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(Tt);return Tt.inversePoint(kt)}return Tt.inversePoint(kt)}function St(){return[1,1,1,1]}return function(kt){var Tt;function Rt(zt){Ft.mask=new MaskManagerInterface(zt,kt)}function jt(zt){Ft.effect=zt}function Ft(zt){switch(zt){case"ADBE Root Vectors Group":case"Contents":case 2:return Ft.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Ft.effect;case"ADBE Text Properties":return Ft.textInterface;default:return null}}Ft.getMatrix=it,Ft.invertPoint=dt,Ft.applyPoint=ut,Ft.toWorld=et,Ft.toWorldVec=g,Ft.fromWorld=ct,Ft.fromWorldVec=ot,Ft.toComp=et,Ft.fromComp=ft,Ft.sampleImage=St,Ft.sourceRectAtTime=kt.sourceRectAtTime.bind(kt),Ft._elem=kt,Tt=TransformExpressionInterface(kt.finalTransform.mProp);var $t=getDescriptor(Tt,"anchorPoint");return Object.defineProperties(Ft,{hasParent:{get:function(){return kt.hierarchy.length}},parent:{get:function(){return kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Tt,"rotation"),scale:getDescriptor(Tt,"scale"),position:getDescriptor(Tt,"position"),opacity:getDescriptor(Tt,"opacity"),anchorPoint:$t,anchor_point:$t,transform:{get:function(){return Tt}},active:{get:function(){return kt.isInRange}}}),Ft.startTime=kt.data.st,Ft.index=kt.data.ind,Ft.source=kt.data.refId,Ft.height=kt.data.ty===0?kt.data.h:100,Ft.width=kt.data.ty===0?kt.data.w:100,Ft.inPoint=kt.data.ip/kt.comp.globalData.frameRate,Ft.outPoint=kt.data.op/kt.comp.globalData.frameRate,Ft._name=kt.data.nm,Ft.registerMaskInterface=Rt,Ft.registerEffectsInterface=jt,Ft}}(),propertyGroupFactory=function(){return function(it,g){return function(et){return et=et===void 0?1:et,et<=0?it:g(et-1)}}}(),PropertyInterface=function(){return function(it,g){var et={_name:it};function ot(ct){return ct=ct===void 0?1:ct,ct<=0?et:g(ct-1)}return ot}}(),EffectsExpressionInterface=function(){var it={createEffectsInterface:g};function g(ct,ut){if(ct.effectsManager){var dt=[],ft=ct.data.ef,St,kt=ct.effectsManager.effectElements.length;for(St=0;St<kt;St+=1)dt.push(et(ft[St],ct.effectsManager.effectElements[St],ut,ct));var Tt=ct.data.ef||[],Rt=function(Ft){for(St=0,kt=Tt.length;St<kt;){if(Ft===Tt[St].nm||Ft===Tt[St].mn||Ft===Tt[St].ix)return dt[St];St+=1}return null};return Object.defineProperty(Rt,"numProperties",{get:function(){return Tt.length}}),Rt}return null}function et(ct,ut,dt,ft){function St(Ft){for(var $t=ct.ef,zt=0,Ut=$t.length;zt<Ut;){if(Ft===$t[zt].nm||Ft===$t[zt].mn||Ft===$t[zt].ix)return $t[zt].ty===5?Tt[zt]:Tt[zt]();zt+=1}throw new Error}var kt=propertyGroupFactory(St,dt),Tt=[],Rt,jt=ct.ef.length;for(Rt=0;Rt<jt;Rt+=1)ct.ef[Rt].ty===5?Tt.push(et(ct.ef[Rt],ut.effectElements[Rt],ut.effectElements[Rt].propertyGroup,ft)):Tt.push(ot(ut.effectElements[Rt],ct.ef[Rt].ty,ft,kt));return ct.mn==="ADBE Color Control"&&Object.defineProperty(St,"color",{get:function(){return Tt[0]()}}),Object.defineProperties(St,{numProperties:{get:function(){return ct.np}},_name:{value:ct.nm},propertyGroup:{value:kt}}),St.enabled=ct.en!==0,St.active=St.enabled,St}function ot(ct,ut,dt,ft){var St=ExpressionPropertyInterface(ct.p);function kt(){return ut===10?dt.comp.compInterface(ct.p.v):St()}return ct.p.setGroupProperty&&ct.p.setGroupProperty(PropertyInterface("",ft)),kt}return it}(),ShapePathInterface=function(){return function(g,et,ot){var ct=et.sh;function ut(ft){return ft==="Shape"||ft==="shape"||ft==="Path"||ft==="path"||ft==="ADBE Vector Shape"||ft===2?ut.path:null}var dt=propertyGroupFactory(ut,ot);return ct.setGroupProperty(PropertyInterface("Path",dt)),Object.defineProperties(ut,{path:{get:function(){return ct.k&&ct.getValue(),ct}},shape:{get:function(){return ct.k&&ct.getValue(),ct}},_name:{value:g.nm},ix:{value:g.ix},propertyIndex:{value:g.ix},mn:{value:g.mn},propertyGroup:{value:ot}}),ut}}(),ShapeExpressionInterface=function(){function it($t,zt,Ut){var Bt=[],Ht,Jt=$t?$t.length:0;for(Ht=0;Ht<Jt;Ht+=1)$t[Ht].ty==="gr"?Bt.push(et($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="fl"?Bt.push(ot($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="st"?Bt.push(dt($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="tm"?Bt.push(ft($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="tr"||($t[Ht].ty==="el"?Bt.push(kt($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="sr"?Bt.push(Tt($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="sh"?Bt.push(ShapePathInterface($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="rc"?Bt.push(Rt($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="rd"?Bt.push(jt($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="rp"?Bt.push(Ft($t[Ht],zt[Ht],Ut)):$t[Ht].ty==="gf"?Bt.push(ct($t[Ht],zt[Ht],Ut)):Bt.push(ut($t[Ht],zt[Ht])));return Bt}function g($t,zt,Ut){var Bt,Ht=function(tn){for(var nn=0,rn=Bt.length;nn<rn;){if(Bt[nn]._name===tn||Bt[nn].mn===tn||Bt[nn].propertyIndex===tn||Bt[nn].ix===tn||Bt[nn].ind===tn)return Bt[nn];nn+=1}return typeof tn=="number"?Bt[tn-1]:null};Ht.propertyGroup=propertyGroupFactory(Ht,Ut),Bt=it($t.it,zt.it,Ht.propertyGroup),Ht.numProperties=Bt.length;var Jt=St($t.it[$t.it.length-1],zt.it[zt.it.length-1],Ht.propertyGroup);return Ht.transform=Jt,Ht.propertyIndex=$t.cix,Ht._name=$t.nm,Ht}function et($t,zt,Ut){var Bt=function(tn){switch(tn){case"ADBE Vectors Group":case"Contents":case 2:return Bt.content;default:return Bt.transform}};Bt.propertyGroup=propertyGroupFactory(Bt,Ut);var Ht=g($t,zt,Bt.propertyGroup),Jt=St($t.it[$t.it.length-1],zt.it[zt.it.length-1],Bt.propertyGroup);return Bt.content=Ht,Bt.transform=Jt,Object.defineProperty(Bt,"_name",{get:function(){return $t.nm}}),Bt.numProperties=$t.np,Bt.propertyIndex=$t.ix,Bt.nm=$t.nm,Bt.mn=$t.mn,Bt}function ot($t,zt,Ut){function Bt(Ht){return Ht==="Color"||Ht==="color"?Bt.color:Ht==="Opacity"||Ht==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Ut)),zt.o.setGroupProperty(PropertyInterface("Opacity",Ut)),Bt}function ct($t,zt,Ut){function Bt(Ht){return Ht==="Start Point"||Ht==="start point"?Bt.startPoint:Ht==="End Point"||Ht==="end point"?Bt.endPoint:Ht==="Opacity"||Ht==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{startPoint:{get:ExpressionPropertyInterface(zt.s)},endPoint:{get:ExpressionPropertyInterface(zt.e)},opacity:{get:ExpressionPropertyInterface(zt.o)},type:{get:function(){return"a"}},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.s.setGroupProperty(PropertyInterface("Start Point",Ut)),zt.e.setGroupProperty(PropertyInterface("End Point",Ut)),zt.o.setGroupProperty(PropertyInterface("Opacity",Ut)),Bt}function ut(){function $t(){return null}return $t}function dt($t,zt,Ut){var Bt=propertyGroupFactory(rn,Ut),Ht=propertyGroupFactory(nn,Bt);function Jt(on){Object.defineProperty(nn,$t.d[on].nm,{get:ExpressionPropertyInterface(zt.d.dataProps[on].p)})}var Zt,tn=$t.d?$t.d.length:0,nn={};for(Zt=0;Zt<tn;Zt+=1)Jt(Zt),zt.d.dataProps[Zt].p.setGroupProperty(Ht);function rn(on){return on==="Color"||on==="color"?rn.color:on==="Opacity"||on==="opacity"?rn.opacity:on==="Stroke Width"||on==="stroke width"?rn.strokeWidth:null}return Object.defineProperties(rn,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},strokeWidth:{get:ExpressionPropertyInterface(zt.w)},dash:{get:function(){return nn}},_name:{value:$t.nm},mn:{value:$t.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Bt)),zt.o.setGroupProperty(PropertyInterface("Opacity",Bt)),zt.w.setGroupProperty(PropertyInterface("Stroke Width",Bt)),rn}function ft($t,zt,Ut){function Bt(Jt){return Jt===$t.e.ix||Jt==="End"||Jt==="end"?Bt.end:Jt===$t.s.ix?Bt.start:Jt===$t.o.ix?Bt.offset:null}var Ht=propertyGroupFactory(Bt,Ut);return Bt.propertyIndex=$t.ix,zt.s.setGroupProperty(PropertyInterface("Start",Ht)),zt.e.setGroupProperty(PropertyInterface("End",Ht)),zt.o.setGroupProperty(PropertyInterface("Offset",Ht)),Bt.propertyIndex=$t.ix,Bt.propertyGroup=Ut,Object.defineProperties(Bt,{start:{get:ExpressionPropertyInterface(zt.s)},end:{get:ExpressionPropertyInterface(zt.e)},offset:{get:ExpressionPropertyInterface(zt.o)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function St($t,zt,Ut){function Bt(Jt){return $t.a.ix===Jt||Jt==="Anchor Point"?Bt.anchorPoint:$t.o.ix===Jt||Jt==="Opacity"?Bt.opacity:$t.p.ix===Jt||Jt==="Position"?Bt.position:$t.r.ix===Jt||Jt==="Rotation"||Jt==="ADBE Vector Rotation"?Bt.rotation:$t.s.ix===Jt||Jt==="Scale"?Bt.scale:$t.sk&&$t.sk.ix===Jt||Jt==="Skew"?Bt.skew:$t.sa&&$t.sa.ix===Jt||Jt==="Skew Axis"?Bt.skewAxis:null}var Ht=propertyGroupFactory(Bt,Ut);return zt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ht)),zt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ht)),zt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ht)),zt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ht)),zt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ht)),zt.transform.mProps.sk&&(zt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ht)),zt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ht))),zt.transform.op.setGroupProperty(PropertyInterface("Opacity",Ht)),Object.defineProperties(Bt,{opacity:{get:ExpressionPropertyInterface(zt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(zt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(zt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(zt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(zt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(zt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(zt.transform.mProps.sa)},_name:{value:$t.nm}}),Bt.ty="tr",Bt.mn=$t.mn,Bt.propertyGroup=Ut,Bt}function kt($t,zt,Ut){function Bt(Zt){return $t.p.ix===Zt?Bt.position:$t.s.ix===Zt?Bt.size:null}var Ht=propertyGroupFactory(Bt,Ut);Bt.propertyIndex=$t.ix;var Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Jt.s.setGroupProperty(PropertyInterface("Size",Ht)),Jt.p.setGroupProperty(PropertyInterface("Position",Ht)),Object.defineProperties(Bt,{size:{get:ExpressionPropertyInterface(Jt.s)},position:{get:ExpressionPropertyInterface(Jt.p)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Tt($t,zt,Ut){function Bt(Zt){return $t.p.ix===Zt?Bt.position:$t.r.ix===Zt?Bt.rotation:$t.pt.ix===Zt?Bt.points:$t.or.ix===Zt||Zt==="ADBE Vector Star Outer Radius"?Bt.outerRadius:$t.os.ix===Zt?Bt.outerRoundness:$t.ir&&($t.ir.ix===Zt||Zt==="ADBE Vector Star Inner Radius")?Bt.innerRadius:$t.is&&$t.is.ix===Zt?Bt.innerRoundness:null}var Ht=propertyGroupFactory(Bt,Ut),Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Bt.propertyIndex=$t.ix,Jt.or.setGroupProperty(PropertyInterface("Outer Radius",Ht)),Jt.os.setGroupProperty(PropertyInterface("Outer Roundness",Ht)),Jt.pt.setGroupProperty(PropertyInterface("Points",Ht)),Jt.p.setGroupProperty(PropertyInterface("Position",Ht)),Jt.r.setGroupProperty(PropertyInterface("Rotation",Ht)),$t.ir&&(Jt.ir.setGroupProperty(PropertyInterface("Inner Radius",Ht)),Jt.is.setGroupProperty(PropertyInterface("Inner Roundness",Ht))),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Jt.p)},rotation:{get:ExpressionPropertyInterface(Jt.r)},points:{get:ExpressionPropertyInterface(Jt.pt)},outerRadius:{get:ExpressionPropertyInterface(Jt.or)},outerRoundness:{get:ExpressionPropertyInterface(Jt.os)},innerRadius:{get:ExpressionPropertyInterface(Jt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Jt.is)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Rt($t,zt,Ut){function Bt(Zt){return $t.p.ix===Zt?Bt.position:$t.r.ix===Zt?Bt.roundness:$t.s.ix===Zt||Zt==="Size"||Zt==="ADBE Vector Rect Size"?Bt.size:null}var Ht=propertyGroupFactory(Bt,Ut),Jt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Bt.propertyIndex=$t.ix,Jt.p.setGroupProperty(PropertyInterface("Position",Ht)),Jt.s.setGroupProperty(PropertyInterface("Size",Ht)),Jt.r.setGroupProperty(PropertyInterface("Rotation",Ht)),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Jt.p)},roundness:{get:ExpressionPropertyInterface(Jt.r)},size:{get:ExpressionPropertyInterface(Jt.s)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function jt($t,zt,Ut){function Bt(Zt){return $t.r.ix===Zt||Zt==="Round Corners 1"?Bt.radius:null}var Ht=propertyGroupFactory(Bt,Ut),Jt=zt;return Bt.propertyIndex=$t.ix,Jt.rd.setGroupProperty(PropertyInterface("Radius",Ht)),Object.defineProperties(Bt,{radius:{get:ExpressionPropertyInterface(Jt.rd)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}function Ft($t,zt,Ut){function Bt(Zt){return $t.c.ix===Zt||Zt==="Copies"?Bt.copies:$t.o.ix===Zt||Zt==="Offset"?Bt.offset:null}var Ht=propertyGroupFactory(Bt,Ut),Jt=zt;return Bt.propertyIndex=$t.ix,Jt.c.setGroupProperty(PropertyInterface("Copies",Ht)),Jt.o.setGroupProperty(PropertyInterface("Offset",Ht)),Object.defineProperties(Bt,{copies:{get:ExpressionPropertyInterface(Jt.c)},offset:{get:ExpressionPropertyInterface(Jt.o)},_name:{value:$t.nm}}),Bt.mn=$t.mn,Bt}return function($t,zt,Ut){var Bt;function Ht(Zt){if(typeof Zt=="number")return Zt=Zt===void 0?1:Zt,Zt===0?Ut:Bt[Zt-1];for(var tn=0,nn=Bt.length;tn<nn;){if(Bt[tn]._name===Zt)return Bt[tn];tn+=1}return null}function Jt(){return Ut}return Ht.propertyGroup=propertyGroupFactory(Ht,Jt),Bt=it($t,zt,Ht.propertyGroup),Ht.numProperties=Bt.length,Ht._name="Contents",Ht}}(),TextExpressionInterface=function(){return function(it){var g;function et(ot){switch(ot){case"ADBE Text Document":return et.sourceText;default:return null}}return Object.defineProperty(et,"sourceText",{get:function(){it.textProperty.getValue();var ct=it.textProperty.currentData.t;return(!g||ct!==g.value)&&(g=new String(ct),g.value=ct||new String(ct),Object.defineProperty(g,"style",{get:function(){return{fillColor:it.textProperty.currentData.fc}}})),g}}),et}}();function _typeof(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(it)}var FootageInterface=function(){var it=function(ot){var ct="",ut=ot.getFootageData();function dt(){return ct="",ut=ot.getFootageData(),ft}function ft(St){if(ut[St])return ct=St,ut=ut[St],_typeof(ut)==="object"?ft:ut;var kt=St.indexOf(ct);if(kt!==-1){var Tt=parseInt(St.substr(kt+ct.length),10);return ut=ut[Tt],_typeof(ut)==="object"?ft:ut}return""}return dt},g=function(ot){function ct(ut){return ut==="Outline"?ct.outlineInterface():null}return ct._name="Outline",ct.outlineInterface=it(ot),ct};return function(et){function ot(ct){return ct==="Data"?ot.dataInterface:null}return ot._name="Data",ot.dataInterface=g(et),ot}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(it){return interfaces[it]||null}var expressionHelpers=function(){function it(dt,ft,St){ft.x&&(St.k=!0,St.x=!0,St.initiateExpression=ExpressionManager.initiateExpression,St.effectsSequence.push(St.initiateExpression(dt,ft,St).bind(St)))}function g(dt){return dt*=this.elem.globalData.frameRate,dt-=this.offsetTime,dt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<dt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(dt,this._cachingAtTime),this._cachingAtTime.lastFrame=dt),this._cachingAtTime.value}function et(dt){var ft=-.01,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt=0;if(St.length){var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt+=Math.pow(kt[Rt]-St[Rt],2);Tt=Math.sqrt(Tt)*100}else Tt=0;return Tt}function ot(dt){if(this.vel!==void 0)return this.vel;var ft=-.001,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt;if(St.length){Tt=createTypedArray("float32",St.length);var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt[Rt]=(kt[Rt]-St[Rt])/ft}else Tt=(kt-St)/ft;return Tt}function ct(){return this.pv}function ut(dt){this.propertyGroup=dt}return{searchExpressions:it,getSpeedAtTime:et,getVelocityAtTime:ot,getValueAtTime:g,getStaticValueAtTime:ct,setGroupProperty:ut}}();function addPropertyDecorator(){function it(jt,Ft,$t){if(!this.k||!this.keyframes)return this.pv;jt=jt?jt.toLowerCase():"";var zt=this.comp.renderedFrame,Ut=this.keyframes,Bt=Ut[Ut.length-1].t;if(zt<=Bt)return this.pv;var Ht,Jt;$t?(Ft?Ht=Math.abs(Bt-this.elem.comp.globalData.frameRate*Ft):Ht=Math.max(0,Bt-this.elem.data.ip),Jt=Bt-Ht):((!Ft||Ft>Ut.length-1)&&(Ft=Ut.length-1),Jt=Ut[Ut.length-1-Ft].t,Ht=Bt-Jt);var Zt,tn,nn;if(jt==="pingpong"){var rn=Math.floor((zt-Jt)/Ht);if(rn%2!==0)return this.getValueAtTime((Ht-(zt-Jt)%Ht+Jt)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var on=this.getValueAtTime(Jt/this.comp.globalData.frameRate,0),pn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),dn=this.getValueAtTime(((zt-Jt)%Ht+Jt)/this.comp.globalData.frameRate,0),hn=Math.floor((zt-Jt)/Ht);if(this.pv.length){for(nn=new Array(on.length),tn=nn.length,Zt=0;Zt<tn;Zt+=1)nn[Zt]=(pn[Zt]-on[Zt])*hn+dn[Zt];return nn}return(pn-on)*hn+dn}else if(jt==="continue"){var un=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),En=this.getValueAtTime((Bt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(nn=new Array(un.length),tn=nn.length,Zt=0;Zt<tn;Zt+=1)nn[Zt]=un[Zt]+(un[Zt]-En[Zt])*((zt-Bt)/this.comp.globalData.frameRate)/5e-4;return nn}return un+(un-En)*((zt-Bt)/.001)}return this.getValueAtTime(((zt-Jt)%Ht+Jt)/this.comp.globalData.frameRate,0)}function g(jt,Ft,$t){if(!this.k)return this.pv;jt=jt?jt.toLowerCase():"";var zt=this.comp.renderedFrame,Ut=this.keyframes,Bt=Ut[0].t;if(zt>=Bt)return this.pv;var Ht,Jt;$t?(Ft?Ht=Math.abs(this.elem.comp.globalData.frameRate*Ft):Ht=Math.max(0,this.elem.data.op-Bt),Jt=Bt+Ht):((!Ft||Ft>Ut.length-1)&&(Ft=Ut.length-1),Jt=Ut[Ft].t,Ht=Jt-Bt);var Zt,tn,nn;if(jt==="pingpong"){var rn=Math.floor((Bt-zt)/Ht);if(rn%2===0)return this.getValueAtTime(((Bt-zt)%Ht+Bt)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var on=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),pn=this.getValueAtTime(Jt/this.comp.globalData.frameRate,0),dn=this.getValueAtTime((Ht-(Bt-zt)%Ht+Bt)/this.comp.globalData.frameRate,0),hn=Math.floor((Bt-zt)/Ht)+1;if(this.pv.length){for(nn=new Array(on.length),tn=nn.length,Zt=0;Zt<tn;Zt+=1)nn[Zt]=dn[Zt]-(pn[Zt]-on[Zt])*hn;return nn}return dn-(pn-on)*hn}else if(jt==="continue"){var un=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),En=this.getValueAtTime((Bt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(nn=new Array(un.length),tn=nn.length,Zt=0;Zt<tn;Zt+=1)nn[Zt]=un[Zt]+(un[Zt]-En[Zt])*(Bt-zt)/.001;return nn}return un+(un-En)*(Bt-zt)/.001}return this.getValueAtTime((Ht-((Bt-zt)%Ht+Bt))/this.comp.globalData.frameRate,0)}function et(jt,Ft){if(!this.k)return this.pv;if(jt=(jt||.4)*.5,Ft=Math.floor(Ft||5),Ft<=1)return this.pv;var $t=this.comp.renderedFrame/this.comp.globalData.frameRate,zt=$t-jt,Ut=$t+jt,Bt=Ft>1?(Ut-zt)/(Ft-1):1,Ht=0,Jt=0,Zt;this.pv.length?Zt=createTypedArray("float32",this.pv.length):Zt=0;for(var tn;Ht<Ft;){if(tn=this.getValueAtTime(zt+Ht*Bt),this.pv.length)for(Jt=0;Jt<this.pv.length;Jt+=1)Zt[Jt]+=tn[Jt];else Zt+=tn;Ht+=1}if(this.pv.length)for(Jt=0;Jt<this.pv.length;Jt+=1)Zt[Jt]/=Ft;else Zt/=Ft;return Zt}function ot(jt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Ft=this._transformCachingAtTime.v;if(Ft.cloneFromProps(this.pre.props),this.appliedTransformations<1){var $t=this.a.getValueAtTime(jt);Ft.translate(-$t[0]*this.a.mult,-$t[1]*this.a.mult,$t[2]*this.a.mult)}if(this.appliedTransformations<2){var zt=this.s.getValueAtTime(jt);Ft.scale(zt[0]*this.s.mult,zt[1]*this.s.mult,zt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ut=this.sk.getValueAtTime(jt),Bt=this.sa.getValueAtTime(jt);Ft.skewFromAxis(-Ut*this.sk.mult,Bt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ht=this.r.getValueAtTime(jt);Ft.rotate(-Ht*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Jt=this.rz.getValueAtTime(jt),Zt=this.ry.getValueAtTime(jt),tn=this.rx.getValueAtTime(jt),nn=this.or.getValueAtTime(jt);Ft.rotateZ(-Jt*this.rz.mult).rotateY(Zt*this.ry.mult).rotateX(tn*this.rx.mult).rotateZ(-nn[2]*this.or.mult).rotateY(nn[1]*this.or.mult).rotateX(nn[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var rn=this.px.getValueAtTime(jt),on=this.py.getValueAtTime(jt);if(this.data.p.z){var pn=this.pz.getValueAtTime(jt);Ft.translate(rn*this.px.mult,on*this.py.mult,-pn*this.pz.mult)}else Ft.translate(rn*this.px.mult,on*this.py.mult,0)}else{var dn=this.p.getValueAtTime(jt);Ft.translate(dn[0]*this.p.mult,dn[1]*this.p.mult,-dn[2]*this.p.mult)}return Ft}function ct(){return this.v.clone(new Matrix)}var ut=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(jt,Ft,$t){var zt=ut(jt,Ft,$t);return zt.dynamicProperties.length?zt.getValueAtTime=ot.bind(zt):zt.getValueAtTime=ct.bind(zt),zt.setGroupProperty=expressionHelpers.setGroupProperty,zt};var dt=PropertyFactory.getProp;PropertyFactory.getProp=function(jt,Ft,$t,zt,Ut){var Bt=dt(jt,Ft,$t,zt,Ut);Bt.kf?Bt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Bt):Bt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Bt),Bt.setGroupProperty=expressionHelpers.setGroupProperty,Bt.loopOut=it,Bt.loopIn=g,Bt.smooth=et,Bt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Bt),Bt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Bt),Bt.numKeys=Ft.a===1?Ft.k.length:0,Bt.propertyIndex=Ft.ix;var Ht=0;return $t!==0&&(Ht=createTypedArray("float32",Ft.a===1?Ft.k[0].s.length:Ft.k.length)),Bt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ht},expressionHelpers.searchExpressions(jt,Ft,Bt),Bt.k&&Ut.addDynamicProperty(Bt),Bt};function ft(jt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),jt*=this.elem.globalData.frameRate,jt-=this.offsetTime,jt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<jt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=jt,this.interpolateShape(jt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var St=ShapePropertyFactory.getConstructorFunction(),kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Tt(){}Tt.prototype={vertices:function(Ft,$t){this.k&&this.getValue();var zt=this.v;$t!==void 0&&(zt=this.getValueAtTime($t,0));var Ut,Bt=zt._length,Ht=zt[Ft],Jt=zt.v,Zt=createSizedArray(Bt);for(Ut=0;Ut<Bt;Ut+=1)Ft==="i"||Ft==="o"?Zt[Ut]=[Ht[Ut][0]-Jt[Ut][0],Ht[Ut][1]-Jt[Ut][1]]:Zt[Ut]=[Ht[Ut][0],Ht[Ut][1]];return Zt},points:function(Ft){return this.vertices("v",Ft)},inTangents:function(Ft){return this.vertices("i",Ft)},outTangents:function(Ft){return this.vertices("o",Ft)},isClosed:function(){return this.v.c},pointOnPath:function(Ft,$t){var zt=this.v;$t!==void 0&&(zt=this.getValueAtTime($t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(zt));for(var Ut=this._segmentsLength,Bt=Ut.lengths,Ht=Ut.totalLength*Ft,Jt=0,Zt=Bt.length,tn=0,nn;Jt<Zt;){if(tn+Bt[Jt].addedLength>Ht){var rn=Jt,on=zt.c&&Jt===Zt-1?0:Jt+1,pn=(Ht-tn)/Bt[Jt].addedLength;nn=bez.getPointInSegment(zt.v[rn],zt.v[on],zt.o[rn],zt.i[on],pn,Bt[Jt]);break}else tn+=Bt[Jt].addedLength;Jt+=1}return nn||(nn=zt.c?[zt.v[0][0],zt.v[0][1]]:[zt.v[zt._length-1][0],zt.v[zt._length-1][1]]),nn},vectorOnPath:function(Ft,$t,zt){Ft==1?Ft=this.v.c:Ft==0&&(Ft=.999);var Ut=this.pointOnPath(Ft,$t),Bt=this.pointOnPath(Ft+.001,$t),Ht=Bt[0]-Ut[0],Jt=Bt[1]-Ut[1],Zt=Math.sqrt(Math.pow(Ht,2)+Math.pow(Jt,2));if(Zt===0)return[0,0];var tn=zt==="tangent"?[Ht/Zt,Jt/Zt]:[-Jt/Zt,Ht/Zt];return tn},tangentOnPath:function(Ft,$t){return this.vectorOnPath(Ft,$t,"tangent")},normalOnPath:function(Ft,$t){return this.vectorOnPath(Ft,$t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Tt],St),extendPrototype([Tt],kt),kt.prototype.getValueAtTime=ft,kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Rt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(jt,Ft,$t,zt,Ut){var Bt=Rt(jt,Ft,$t,zt,Ut);return Bt.propertyIndex=Ft.ix,Bt.lock=!1,$t===3?expressionHelpers.searchExpressions(jt,Ft.pt,Bt):$t===4&&expressionHelpers.searchExpressions(jt,Ft.ks,Bt),Bt.k&&jt.addDynamicProperty(Bt),Bt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function it(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(g,et){var ot=this.calculateExpression(et);if(g.t!==ot){var ct={};return this.copyData(ct,g),ct.t=ot.toString(),ct.__complete=!1,ct}return g},TextProperty.prototype.searchProperty=function(){var g=this.searchKeyframes(),et=this.searchExpressions();return this.kf=g||et,this.kf},TextProperty.prototype.searchExpressions=it}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function it(g,et){var ot=createNS("feMerge");ot.setAttribute("result",g);var ct,ut;for(ut=0;ut<et.length;ut+=1)ct=createNS("feMergeNode"),ct.setAttribute("in",et[ut]),ot.appendChild(ct),ot.appendChild(ct);return ot}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(it,g,et,ot,ct){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","linearRGB"),ut.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ut,ut.setAttribute("result",ot+"_tint_1"),it.appendChild(ut),ut=createNS("feColorMatrix"),ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ut.setAttribute("result",ot+"_tint_2"),it.appendChild(ut),this.matrixFilter=ut;var dt=this.createMergeNode(ot,[ct,ot+"_tint_1",ot+"_tint_2"]);it.appendChild(dt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ot+" 0"),this.matrixFilter.setAttribute("values",et[0]-g[0]+" 0 0 0 "+g[0]+" "+(et[1]-g[1])+" 0 0 0 "+g[1]+" "+(et[2]-g[2])+" 0 0 0 "+g[2]+" 0 0 0 1 0")}};function SVGFillFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",ot),it.appendChild(ct),this.matrixFilter=ct}SVGFillFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[2].p.v,et=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+g[0]+" 0 0 0 0 "+g[1]+" 0 0 0 0 "+g[2]+" 0 0 0 "+et+" 0")}};function SVGStrokeEffect(it,g,et){this.initialized=!1,this.filterManager=g,this.elem=et,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var it=this.elem.layerElement.children||this.elem.layerElement.childNodes,g,et,ot,ct;for(this.filterManager.effectElements[1].p.v===1?(ct=this.elem.maskManager.masksProperties.length,ot=0):(ot=this.filterManager.effectElements[0].p.v-1,ct=ot+1),et=createNS("g"),et.setAttribute("fill","none"),et.setAttribute("stroke-linecap","round"),et.setAttribute("stroke-dashoffset",1),ot;ot<ct;ot+=1)g=createNS("path"),et.appendChild(g),this.paths.push({p:g,m:ot});if(this.filterManager.effectElements[10].p.v===3){var ut=createNS("mask"),dt=createElementID();ut.setAttribute("id",dt),ut.setAttribute("mask-type","alpha"),ut.appendChild(et),this.elem.globalData.defs.appendChild(ut);var ft=createNS("g");for(ft.setAttribute("mask","url("+getLocationHref()+"#"+dt+")");it[0];)ft.appendChild(it[0]);this.elem.layerElement.appendChild(ft),this.masker=ut,et.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(it=this.elem.layerElement.children||this.elem.layerElement.childNodes;it.length;)this.elem.layerElement.removeChild(it[0]);this.elem.layerElement.appendChild(et),this.elem.layerElement.removeAttribute("mask"),et.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=et},SVGStrokeEffect.prototype.renderFrame=function(it){this.initialized||this.initialize();var g,et=this.paths.length,ot,ct;for(g=0;g<et;g+=1)if(this.paths[g].m!==-1&&(ot=this.elem.maskManager.viewData[this.paths[g].m],ct=this.paths[g].p,(it||this.filterManager._mdf||ot.prop._mdf)&&ct.setAttribute("d",ot.lastPath),it||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ot.prop._mdf)){var ut;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var dt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ft=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,St=ct.getTotalLength();ut="0 0 0 "+St*dt+" ";var kt=St*(ft-dt),Tt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Rt=Math.floor(kt/Tt),jt;for(jt=0;jt<Rt;jt+=1)ut+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ut+="0 "+St*10+" 0 0"}else ut="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ct.setAttribute("stroke-dasharray",ut)}if((it||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(it||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(it||this.filterManager.effectElements[3].p._mdf)){var Ft=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Ft[0]*255)+","+bmFloor(Ft[1]*255)+","+bmFloor(Ft[2]*255)+")")}};function SVGTritoneFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),it.appendChild(ct);var ut=createNS("feComponentTransfer");ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),this.matrixFilter=ut;var dt=createNS("feFuncR");dt.setAttribute("type","table"),ut.appendChild(dt),this.feFuncR=dt;var ft=createNS("feFuncG");ft.setAttribute("type","table"),ut.appendChild(ft),this.feFuncG=ft;var St=createNS("feFuncB");St.setAttribute("type","table"),ut.appendChild(St),this.feFuncB=St,it.appendChild(ut)}SVGTritoneFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v,ct=ot[0]+" "+et[0]+" "+g[0],ut=ot[1]+" "+et[1]+" "+g[1],dt=ot[2]+" "+et[2]+" "+g[2];this.feFuncR.setAttribute("tableValues",ct),this.feFuncG.setAttribute("tableValues",ut),this.feFuncB.setAttribute("tableValues",dt)}};function SVGProLevelsFilter(it,g,et,ot){this.filterManager=g;var ct=this.filterManager.effectElements,ut=createNS("feComponentTransfer");(ct[10].p.k||ct[10].p.v!==0||ct[11].p.k||ct[11].p.v!==1||ct[12].p.k||ct[12].p.v!==1||ct[13].p.k||ct[13].p.v!==0||ct[14].p.k||ct[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ut)),(ct[17].p.k||ct[17].p.v!==0||ct[18].p.k||ct[18].p.v!==1||ct[19].p.k||ct[19].p.v!==1||ct[20].p.k||ct[20].p.v!==0||ct[21].p.k||ct[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ut)),(ct[24].p.k||ct[24].p.v!==0||ct[25].p.k||ct[25].p.v!==1||ct[26].p.k||ct[26].p.v!==1||ct[27].p.k||ct[27].p.v!==0||ct[28].p.k||ct[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ut)),(ct[31].p.k||ct[31].p.v!==0||ct[32].p.k||ct[32].p.v!==1||ct[33].p.k||ct[33].p.v!==1||ct[34].p.k||ct[34].p.v!==0||ct[35].p.k||ct[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ut)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ut.setAttribute("color-interpolation-filters","sRGB"),it.appendChild(ut)),(ct[3].p.k||ct[3].p.v!==0||ct[4].p.k||ct[4].p.v!==1||ct[5].p.k||ct[5].p.v!==1||ct[6].p.k||ct[6].p.v!==0||ct[7].p.k||ct[7].p.v!==1)&&(ut=createNS("feComponentTransfer"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),it.appendChild(ut),this.feFuncRComposed=this.createFeFunc("feFuncR",ut),this.feFuncGComposed=this.createFeFunc("feFuncG",ut),this.feFuncBComposed=this.createFeFunc("feFuncB",ut))}SVGProLevelsFilter.prototype.createFeFunc=function(it,g){var et=createNS(it);return et.setAttribute("type","table"),g.appendChild(et),et},SVGProLevelsFilter.prototype.getTableValue=function(it,g,et,ot,ct){for(var ut=0,dt=256,ft,St=Math.min(it,g),kt=Math.max(it,g),Tt=Array.call(null,{length:dt}),Rt,jt=0,Ft=ct-ot,$t=g-it;ut<=256;)ft=ut/256,ft<=St?Rt=$t<0?ct:ot:ft>=kt?Rt=$t<0?ot:ct:Rt=ot+Ft*Math.pow((ft-it)/$t,1/et),Tt[jt]=Rt,jt+=1,ut+=256/(dt-1);return Tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g,et=this.filterManager.effectElements;this.feFuncRComposed&&(it||et[3].p._mdf||et[4].p._mdf||et[5].p._mdf||et[6].p._mdf||et[7].p._mdf)&&(g=this.getTableValue(et[3].p.v,et[4].p.v,et[5].p.v,et[6].p.v,et[7].p.v),this.feFuncRComposed.setAttribute("tableValues",g),this.feFuncGComposed.setAttribute("tableValues",g),this.feFuncBComposed.setAttribute("tableValues",g)),this.feFuncR&&(it||et[10].p._mdf||et[11].p._mdf||et[12].p._mdf||et[13].p._mdf||et[14].p._mdf)&&(g=this.getTableValue(et[10].p.v,et[11].p.v,et[12].p.v,et[13].p.v,et[14].p.v),this.feFuncR.setAttribute("tableValues",g)),this.feFuncG&&(it||et[17].p._mdf||et[18].p._mdf||et[19].p._mdf||et[20].p._mdf||et[21].p._mdf)&&(g=this.getTableValue(et[17].p.v,et[18].p.v,et[19].p.v,et[20].p.v,et[21].p.v),this.feFuncG.setAttribute("tableValues",g)),this.feFuncB&&(it||et[24].p._mdf||et[25].p._mdf||et[26].p._mdf||et[27].p._mdf||et[28].p._mdf)&&(g=this.getTableValue(et[24].p.v,et[25].p.v,et[26].p.v,et[27].p.v,et[28].p.v),this.feFuncB.setAttribute("tableValues",g)),this.feFuncA&&(it||et[31].p._mdf||et[32].p._mdf||et[33].p._mdf||et[34].p._mdf||et[35].p._mdf)&&(g=this.getTableValue(et[31].p.v,et[32].p.v,et[33].p.v,et[34].p.v,et[35].p.v),this.feFuncA.setAttribute("tableValues",g))}};function SVGDropShadowEffect(it,g,et,ot,ct){var ut=g.container.globalData.renderConfig.filterSize,dt=g.data.fs||ut;it.setAttribute("x",dt.x||ut.x),it.setAttribute("y",dt.y||ut.y),it.setAttribute("width",dt.width||ut.width),it.setAttribute("height",dt.height||ut.height),this.filterManager=g;var ft=createNS("feGaussianBlur");ft.setAttribute("in","SourceAlpha"),ft.setAttribute("result",ot+"_drop_shadow_1"),ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=ft,it.appendChild(ft);var St=createNS("feOffset");St.setAttribute("dx","25"),St.setAttribute("dy","0"),St.setAttribute("in",ot+"_drop_shadow_1"),St.setAttribute("result",ot+"_drop_shadow_2"),this.feOffset=St,it.appendChild(St);var kt=createNS("feFlood");kt.setAttribute("flood-color","#00ff00"),kt.setAttribute("flood-opacity","1"),kt.setAttribute("result",ot+"_drop_shadow_3"),this.feFlood=kt,it.appendChild(kt);var Tt=createNS("feComposite");Tt.setAttribute("in",ot+"_drop_shadow_3"),Tt.setAttribute("in2",ot+"_drop_shadow_2"),Tt.setAttribute("operator","in"),Tt.setAttribute("result",ot+"_drop_shadow_4"),it.appendChild(Tt);var Rt=this.createMergeNode(ot,[ot+"_drop_shadow_4",ct]);it.appendChild(Rt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){if((it||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),it||this.filterManager.effectElements[0].p._mdf){var g=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(g[0]*255),Math.round(g[1]*255),Math.round(g[2]*255)))}if((it||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),it||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var et=this.filterManager.effectElements[3].p.v,ot=(this.filterManager.effectElements[2].p.v-90)*degToRads,ct=et*Math.cos(ot),ut=et*Math.sin(ot);this.feOffset.setAttribute("dx",ct),this.feOffset.setAttribute("dy",ut)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(it,g,et){this.initialized=!1,this.filterManager=g,this.filterElem=it,this.elem=et,et.matteElement=createNS("g"),et.matteElement.appendChild(et.layerElement),et.matteElement.appendChild(et.transformedElement),et.baseElement=et.matteElement}SVGMatte3Effect.prototype.findSymbol=function(it){for(var g=0,et=_svgMatteSymbols.length;g<et;){if(_svgMatteSymbols[g]===it)return _svgMatteSymbols[g];g+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(it,g){var et=it.layerElement.parentNode;if(et){for(var ot=et.children,ct=0,ut=ot.length;ct<ut&&ot[ct]!==it.layerElement;)ct+=1;var dt;ct<=ut-2&&(dt=ot[ct+1]);var ft=createNS("use");ft.setAttribute("href","#"+g),dt?et.insertBefore(ft,dt):et.appendChild(ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(it,g){if(!this.findSymbol(g)){var et=createElementID(),ot=createNS("mask");ot.setAttribute("id",g.layerId),ot.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(g);var ct=it.globalData.defs;ct.appendChild(ot);var ut=createNS("symbol");ut.setAttribute("id",et),this.replaceInParent(g,et),ut.appendChild(g.layerElement),ct.appendChild(ut);var dt=createNS("use");dt.setAttribute("href","#"+et),ot.appendChild(dt),g.data.hd=!1,g.show()}it.setMatte(g.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var it=this.filterManager.effectElements[0].p.v,g=this.elem.comp.elements,et=0,ot=g.length;et<ot;)g[et]&&g[et].data.ind===it&&this.setElementAsMask(this.elem,g[et]),et+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(it,g,et,ot){it.setAttribute("x","-100%"),it.setAttribute("y","-100%"),it.setAttribute("width","300%"),it.setAttribute("height","300%"),this.filterManager=g;var ct=createNS("feGaussianBlur");ct.setAttribute("result",ot),it.appendChild(ct),this.feGaussianBlur=ct}SVGGaussianBlurEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=.3,et=this.filterManager.effectElements[0].p.v*g,ot=this.filterManager.effectElements[1].p.v,ct=ot==3?0:et,ut=ot==2?0:et;this.feGaussianBlur.setAttribute("stdDeviation",ct+" "+ut);var dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",dt)}};function TransformEffect(){}TransformEffect.prototype.init=function(it){this.effectsManager=it,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(it){if(this._opMdf=!1,this._mdf=!1,it||this.effectsManager._mdf){var g=this.effectsManager.effectElements,et=g[0].p.v,ot=g[1].p.v,ct=g[2].p.v===1,ut=g[3].p.v,dt=ct?ut:g[4].p.v,ft=g[5].p.v,St=g[6].p.v,kt=g[7].p.v;this.matrix.reset(),this.matrix.translate(-et[0],-et[1],et[2]),this.matrix.scale(dt*.01,ut*.01,1),this.matrix.rotate(-kt*degToRads),this.matrix.skewFromAxis(-ft*degToRads,(St+90)*degToRads),this.matrix.translate(ot[0],ot[1],0),this._mdf=!0,this.opacity!==g[8].p.v&&(this.opacity=g[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(it,g){this.init(g)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(it){this.init(it)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(it,g){var et=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(et!=null){var ot,ct,ut,dt,ft=[],St=!0,kt=!1;try{if(ut=(et=et.call(it)).next,g===0){if(Object(et)!==et)return;St=!1}else for(;!(St=(ot=ut.call(et)).done)&&(ft.push(ot.value),ft.length!==g);St=!0);}catch(Tt){kt=!0,ct=Tt}finally{try{if(!St&&et.return!=null&&(dt=et.return(),Object(dt)!==dt))return}finally{if(kt)throw ct}}return ft}}function ownKeys(it,g){var et=Object.keys(it);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(it);g&&(ot=ot.filter(function(ct){return Object.getOwnPropertyDescriptor(it,ct).enumerable})),et.push.apply(et,ot)}return et}function _objectSpread2(it){for(var g=1;g<arguments.length;g++){var et=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(et),!0).forEach(function(ot){_defineProperty(it,ot,et[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(ot){Object.defineProperty(it,ot,Object.getOwnPropertyDescriptor(et,ot))})}return it}function _defineProperty(it,g,et){return g=_toPropertyKey(g),g in it?Object.defineProperty(it,g,{value:et,enumerable:!0,configurable:!0,writable:!0}):it[g]=et,it}function _objectWithoutPropertiesLoose(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function _objectWithoutProperties(it,g){if(it==null)return{};var et=_objectWithoutPropertiesLoose(it,g),ot,ct;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(it);for(ct=0;ct<ut.length;ct++)ot=ut[ct],!(g.indexOf(ot)>=0)&&Object.prototype.propertyIsEnumerable.call(it,ot)&&(et[ot]=it[ot])}return et}function _slicedToArray(it,g){return _arrayWithHoles(it)||_iterableToArrayLimit(it,g)||_unsupportedIterableToArray(it,g)||_nonIterableRest()}function _arrayWithHoles(it){if(Array.isArray(it))return it}function _unsupportedIterableToArray(it,g){if(it){if(typeof it=="string")return _arrayLikeToArray(it,g);var et=Object.prototype.toString.call(it).slice(8,-1);if(et==="Object"&&it.constructor&&(et=it.constructor.name),et==="Map"||et==="Set")return Array.from(it);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(it,g)}}function _arrayLikeToArray(it,g){(g==null||g>it.length)&&(g=it.length);for(var et=0,ot=new Array(g);et<g;et++)ot[et]=it[et];return ot}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(it,g){if(typeof it!="object"||it===null)return it;var et=it[Symbol.toPrimitive];if(et!==void 0){var ot=et.call(it,g||"default");if(typeof ot!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(it)}function _toPropertyKey(it){var g=_toPrimitive(it,"string");return typeof g=="symbol"?g:String(g)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function it(g,et){var ot=g.animationData,ct=g.loop,ut=g.autoplay,dt=g.initialSegment,ft=g.onComplete,St=g.onLoopComplete,kt=g.onEnterFrame,Tt=g.onSegmentStart,Rt=g.onConfigReady,jt=g.onDataReady,Ft=g.onDataFailed,$t=g.onLoadedImages,zt=g.onDOMLoaded,Ut=g.onDestroy;g.lottieRef,g.renderer,g.name,g.assetsPath,g.rendererSettings;var Bt=_objectWithoutProperties(g,_excluded$1),Ht=reactExports.useState(!1),Jt=_slicedToArray(Ht,2),Zt=Jt[0],tn=Jt[1],nn=reactExports.useRef(),rn=reactExports.useRef(null),on=function(){var Tn;(Tn=nn.current)===null||Tn===void 0||Tn.play()},pn=function(){var Tn;(Tn=nn.current)===null||Tn===void 0||Tn.stop()},dn=function(){var Tn;(Tn=nn.current)===null||Tn===void 0||Tn.pause()},hn=function(Tn){var An;(An=nn.current)===null||An===void 0||An.setSpeed(Tn)},un=function(Tn,An){var Pn;(Pn=nn.current)===null||Pn===void 0||Pn.goToAndPlay(Tn,An)},En=function(Tn,An){var Pn;(Pn=nn.current)===null||Pn===void 0||Pn.goToAndStop(Tn,An)},wn=function(Tn){var An;(An=nn.current)===null||An===void 0||An.setDirection(Tn)},Sn=function(Tn,An){var Pn;(Pn=nn.current)===null||Pn===void 0||Pn.playSegments(Tn,An)},fn=function(Tn){var An;(An=nn.current)===null||An===void 0||An.setSubframe(Tn)},xn=function(Tn){var An;return(An=nn.current)===null||An===void 0?void 0:An.getDuration(Tn)},an=function(){var Tn;(Tn=nn.current)===null||Tn===void 0||Tn.destroy(),nn.current=void 0},cn=function(){var Tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},An;if(rn.current){(An=nn.current)===null||An===void 0||An.destroy();var Pn=_objectSpread2(_objectSpread2(_objectSpread2({},g),Tn),{},{container:rn.current});return nn.current=lottie.loadAnimation(Pn),tn(!!nn.current),function(){var Mn;(Mn=nn.current)===null||Mn===void 0||Mn.destroy(),nn.current=void 0}}};reactExports.useEffect(function(){var mn=cn();return function(){return mn==null?void 0:mn()}},[ot,ct]),reactExports.useEffect(function(){nn.current&&(nn.current.autoplay=!!ut)},[ut]),reactExports.useEffect(function(){if(nn.current){if(!dt){nn.current.resetSegments(!0);return}!Array.isArray(dt)||!dt.length||((nn.current.currentRawFrame<dt[0]||nn.current.currentRawFrame>dt[1])&&(nn.current.currentRawFrame=dt[0]),nn.current.setSegment(dt[0],dt[1]))}},[dt]),reactExports.useEffect(function(){var mn=[{name:"complete",handler:ft},{name:"loopComplete",handler:St},{name:"enterFrame",handler:kt},{name:"segmentStart",handler:Tt},{name:"config_ready",handler:Rt},{name:"data_ready",handler:jt},{name:"data_failed",handler:Ft},{name:"loaded_images",handler:$t},{name:"DOMLoaded",handler:zt},{name:"destroy",handler:Ut}],Tn=mn.filter(function(Pn){return Pn.handler!=null});if(Tn.length){var An=Tn.map(function(Pn){var Mn;return(Mn=nn.current)===null||Mn===void 0||Mn.addEventListener(Pn.name,Pn.handler),function(){var Rn;(Rn=nn.current)===null||Rn===void 0||Rn.removeEventListener(Pn.name,Pn.handler)}});return function(){An.forEach(function(Pn){return Pn()})}}},[ft,St,kt,Tt,Rt,jt,Ft,$t,zt,Ut]);var bn=React$2.createElement("div",_objectSpread2({style:et,ref:rn},Bt));return{View:bn,play:on,stop:pn,pause:dn,setSpeed:hn,goToAndStop:En,goToAndPlay:un,setDirection:wn,playSegments:Sn,setSubframe:fn,getDuration:xn,destroy:an,animationContainerRef:rn,animationLoaded:Zt,animationItem:nn.current}};function getContainerVisibility(it){var g=it.getBoundingClientRect(),et=g.top,ot=g.height,ct=window.innerHeight-et,ut=window.innerHeight+ot;return ct/ut}function getContainerCursorPosition(it,g,et){var ot=it.getBoundingClientRect(),ct=ot.top,ut=ot.left,dt=ot.width,ft=ot.height,St=(g-ut)/dt,kt=(et-ct)/ft;return{x:St,y:kt}}var useInitInteractivity=function it(g){var et=g.wrapperRef,ot=g.animationItem,ct=g.mode,ut=g.actions;reactExports.useEffect(function(){var dt=et.current;if(!(!dt||!ot||!ut.length)){ot.stop();var ft=function(){var Tt=null,Rt=function(){var Ft=getContainerVisibility(dt),$t=ut.find(function(Ut){var Bt=Ut.visibility;return Bt&&Ft>=Bt[0]&&Ft<=Bt[1]});if($t){if($t.type==="seek"&&$t.visibility&&$t.frames.length===2){var zt=$t.frames[0]+Math.ceil((Ft-$t.visibility[0])/($t.visibility[1]-$t.visibility[0])*$t.frames[1]);//! goToAndStop must be relative to the start of the current segment
ot.goToAndStop(zt-ot.firstFrame-1,!0)}$t.type==="loop"&&(Tt===null||Tt!==$t.frames||ot.isPaused)&&(ot.playSegments($t.frames,!0),Tt=$t.frames),$t.type==="play"&&ot.isPaused&&(ot.resetSegments(!0),ot.play()),$t.type==="stop"&&ot.goToAndStop($t.frames[0]-ot.firstFrame-1,!0)}};return document.addEventListener("scroll",Rt),function(){document.removeEventListener("scroll",Rt)}},St=function(){var Tt=function($t,zt){var Ut=$t,Bt=zt;if(Ut!==-1&&Bt!==-1){var Ht=getContainerCursorPosition(dt,Ut,Bt);Ut=Ht.x,Bt=Ht.y}var Jt=ut.find(function(nn){var rn=nn.position;return rn&&Array.isArray(rn.x)&&Array.isArray(rn.y)?Ut>=rn.x[0]&&Ut<=rn.x[1]&&Bt>=rn.y[0]&&Bt<=rn.y[1]:rn&&!Number.isNaN(rn.x)&&!Number.isNaN(rn.y)?Ut===rn.x&&Bt===rn.y:!1});if(Jt){if(Jt.type==="seek"&&Jt.position&&Array.isArray(Jt.position.x)&&Array.isArray(Jt.position.y)&&Jt.frames.length===2){var Zt=(Ut-Jt.position.x[0])/(Jt.position.x[1]-Jt.position.x[0]),tn=(Bt-Jt.position.y[0])/(Jt.position.y[1]-Jt.position.y[0]);ot.playSegments(Jt.frames,!0),ot.goToAndStop(Math.ceil((Zt+tn)/2*(Jt.frames[1]-Jt.frames[0])),!0)}Jt.type==="loop"&&ot.playSegments(Jt.frames,!0),Jt.type==="play"&&(ot.isPaused&&ot.resetSegments(!1),ot.playSegments(Jt.frames)),Jt.type==="stop"&&ot.goToAndStop(Jt.frames[0],!0)}},Rt=function($t){Tt($t.clientX,$t.clientY)},jt=function(){Tt(-1,-1)};return dt.addEventListener("mousemove",Rt),dt.addEventListener("mouseout",jt),function(){dt.removeEventListener("mousemove",Rt),dt.removeEventListener("mouseout",jt)}};switch(ct){case"scroll":return ft();case"cursor":return St()}}},[ct,ot])},useLottieInteractivity=function it(g){var et=g.actions,ot=g.mode,ct=g.lottieObj,ut=ct.animationItem,dt=ct.View,ft=ct.animationContainerRef;return useInitInteractivity({actions:et,animationItem:ut,mode:ot,wrapperRef:ft}),dt},_excluded=["style","interactivity"],Lottie=function it(g){var et,ot,ct,ut=g.style,dt=g.interactivity,ft=_objectWithoutProperties(g,_excluded),St=useLottie(ft,ut),kt=St.View,Tt=St.play,Rt=St.stop,jt=St.pause,Ft=St.setSpeed,$t=St.goToAndStop,zt=St.goToAndPlay,Ut=St.setDirection,Bt=St.playSegments,Ht=St.setSubframe,Jt=St.getDuration,Zt=St.destroy,tn=St.animationContainerRef,nn=St.animationLoaded,rn=St.animationItem;return reactExports.useEffect(function(){g.lottieRef&&(g.lottieRef.current={play:Tt,stop:Rt,pause:jt,setSpeed:Ft,goToAndPlay:zt,goToAndStop:$t,setDirection:Ut,playSegments:Bt,setSubframe:Ht,getDuration:Jt,destroy:Zt,animationContainerRef:tn,animationLoaded:nn,animationItem:rn})},[(et=g.lottieRef)===null||et===void 0?void 0:et.current]),useLottieInteractivity({lottieObj:{View:kt,play:Tt,stop:Rt,pause:jt,setSpeed:Ft,goToAndStop:$t,goToAndPlay:zt,setDirection:Ut,playSegments:Bt,setSubframe:Ht,getDuration:Jt,destroy:Zt,animationContainerRef:tn,animationLoaded:nn,animationItem:rn},actions:(ot=dt==null?void 0:dt.actions)!==null&&ot!==void 0?ot:[],mode:(ct=dt==null?void 0:dt.mode)!==null&&ct!==void 0?ct:"scroll"})};const nm="error",ddd=0,h$4=495,w$4=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$1="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$4,w:w$4,meta,layers,v:v$1,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$1,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:it}=useLocation(),g=reactExports.useMemo(()=>new URLSearchParams(it).get("session_id"),[it]),et=g?`/api/downloads/${g}`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-slate-300",children:["Your download is ready",et?"":", but we couldnt find a session id","."]}),et?jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:et,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold bg-phlokkGreen text-black hover:opacity-90 transition",children:"Download Now"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["We expected a URL like ",jsxRuntimeExports.jsx("code",{children:"/thank-you?session_id=cs_..."}),"."]}),jsxRuntimeExports.jsx(Link$1,{to:"/",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Go Home"})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the Cre8tly Studio website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by Cre8tly Studio or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, Cre8tly Studio, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using Cre8tly Studios Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At Cre8tly Studio, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content, ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how Cre8tly Studio (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});function PromptPage(){const[it]=useSearchParams(),g=it.get("session_id"),et=reactExports.useRef(null),[ot,ct]=reactExports.useState(!0),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[Ft,$t]=reactExports.useState(null);reactExports.useEffect(()=>{if(ft&&et.current){const Ut=et.current.getEditor();setTimeout(()=>{Ut.root.scrollTop=0,Ut.root.dispatchEvent(new Event("input"))},100)}},[ft]),reactExports.useEffect(()=>{g?(async()=>{var Bt;try{const Ht=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ht.data&&(dt(!0),Ht.data.status==="completed"&&Ht.data.pdf_url&&($t(Ht.data.pdf_url),jt(!0)))}catch(Ht){console.error("Invalid session:",((Bt=Ht.response)==null?void 0:Bt.data)||Ht.message),dt(!1)}finally{ct(!1)}})():ct(!1)},[g]);const zt=async()=>{var Ut;if(ft.trim()){Tt(!0);try{await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{sessionId:g,prompt:ft}),jt(!0);const Bt=setInterval(async()=>{try{const Ht=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ht.data.status==="completed"&&Ht.data.pdf_url&&($t(Ht.data.pdf_url),clearInterval(Bt))}catch(Ht){console.error("Polling failed:",Ht.message)}},5e3)}catch(Bt){console.error(" Request failed:",((Ut=Bt.response)==null?void 0:Ut.data)||Bt.message)}finally{Tt(!1)}}};return ot?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-gray-400",children:"Validating session..."}):ut?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-20 px-6 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Enter Your Prompt"}),Rt?jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-green mb-6",children:" Your prompt was submitted!"}),Ft?jsxRuntimeExports.jsx("a",{href:Ft,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-gradient-to-r from-[#1DA1F2] to-purple-600 text-white px-8 py-4 rounded-xl shadow-lg hover:opacity-90 transition",children:"Download PDF"}):jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your PDF is being generated... Please wait."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:ft,onChange:Ut=>St(Ut.target.value),placeholder:"Describe your audience or offer...",className:"w-full h-[500px] bg-white text-black text-left rounded-lg p-4 leading-relaxed font-montserrat border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner resize-none overflow-y-auto"}),jsxRuntimeExports.jsx("button",{onClick:zt,disabled:kt||!ft||ft.trim()==="<p><br></p>",className:`w-full py-4 rounded-xl font-semibold text-lg transition shadow-lg ${kt||!ft?"bg-gray-600 cursor-not-allowed":"bg-black border border-green-400 text-white hover:opacity-90"}`,children:kt?"Generating...":"Generate PDF"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invalid or expired session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Please purchase a lead magnet to access this page."})]})}const headerLogo="/assets/cre8tly-logo-ab122ab2.svg",ebookCover="/assets/ultimate-branding-d456799d.jpg",Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly Studio Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital. All rights reserved"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$1,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/cookie-policy",className:"hover:text-white transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/refund-policy",className:"hover:text-white transition-colors",children:"Refunds"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/40",children:["Designed by"," ",jsxRuntimeExports.jsx("a",{href:"https://aluredigital.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Alure Digital"})]})]})]})});function CustomCursor(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!1),ct=useMotionValue(-100),ut=useMotionValue(-100),dt=useSpring(ct,{stiffness:225,damping:30}),ft=useSpring(ut,{stiffness:225,damping:30});return reactExports.useEffect(()=>{const St=Tt=>{et||ot(!0),ct.set(Tt.clientX),ut.set(Tt.clientY)};window.addEventListener("mousemove",St);const kt=document.querySelectorAll("a, button, .clickable");return kt.forEach(Tt=>{Tt.addEventListener("mouseenter",()=>g(!0)),Tt.addEventListener("mouseleave",()=>g(!1))}),()=>{window.removeEventListener("mousemove",St),kt.forEach(Tt=>{Tt.removeEventListener("mouseenter",()=>g(!0)),Tt.removeEventListener("mouseleave",()=>g(!1))})}},[et]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 z-[9999] pointer-events-none",initial:{opacity:0,scale:.6},animate:{opacity:et?1:0,scale:et?1:.6},transition:{duration:.6,ease:"easeOut"},style:{translateX:dt,translateY:ft},children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-200 ${it?"bg-[#7bed9f]/80 shadow-[0_0_15px_rgba(123,237,159,0.5)]":"bg-[#7bed9f]/70 shadow-[0_0_10px_rgba(123,237,159,0.5)]"}`})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=it=>it.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=it=>it.replace(/^([A-Z])|[\s-_]+(\w)/g,(g,et,ot)=>ot?ot.toUpperCase():et.toLowerCase()),toPascalCase=it=>{const g=toCamelCase(it);return g.charAt(0).toUpperCase()+g.slice(1)},mergeClasses=(...it)=>it.filter((g,et,ot)=>!!g&&g.trim()!==""&&ot.indexOf(g)===et).join(" ").trim(),hasA11yProp=it=>{for(const g in it)if(g.startsWith("aria-")||g==="role"||g==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:it="currentColor",size:g=24,strokeWidth:et=2,absoluteStrokeWidth:ot,className:ct="",children:ut,iconNode:dt,...ft},St)=>reactExports.createElement("svg",{ref:St,...defaultAttributes,width:g,height:g,stroke:it,strokeWidth:ot?Number(et)*24/Number(g):et,className:mergeClasses("lucide",ct),...!ut&&!hasA11yProp(ft)&&{"aria-hidden":"true"},...ft},[...dt.map(([kt,Tt])=>reactExports.createElement(kt,Tt)),...Array.isArray(ut)?ut:[ut]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(it,g)=>{const et=reactExports.forwardRef(({className:ot,...ct},ut)=>reactExports.createElement(Icon,{ref:ut,iconNode:g,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(it))}`,`lucide-${it}`,ot),...ct}));return et.displayName=toPascalCase(it),et};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle$1=createLucideIcon("circle",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Eraser=createLucideIcon("eraser",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$3=createLucideIcon("image",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],SquareTerminal=createLucideIcon("square-terminal",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);function SignupPage(){const{login:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=useNavigate(),[ct,ut]=reactExports.useState({name:"",email:"",password:""}),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState("");reactExports.useEffect(()=>{if(St){const jt=setTimeout(()=>kt(""),5e3);return()=>clearTimeout(jt)}},[St]);const Tt=jt=>ut({...ct,[jt.target.name]:jt.target.value}),Rt=async jt=>{var Ft,$t;jt.preventDefault(),ft(!0),kt("");try{const zt=await axios$1.post("https://cre8tlystudio.com/api/auth/signup",ct);zt.status===201?(await it(ct.email,ct.password),ot("/dashboard")):kt(zt.data.message||"Something went wrong")}catch(zt){($t=(Ft=zt.response)==null?void 0:Ft.data)!=null&&$t.message?kt(zt.response.data.message):kt("Signup failed. Please try again later.")}finally{ft(!1)}};return jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Join Cre8tly Studio and start creating digital products instantly."}),St&&jsxRuntimeExports.jsx("div",{className:"bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:ct.name,onChange:Tt,placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:ct.email,onChange:Tt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:g?"text":"password",name:"password",value:ct.password,onChange:Tt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":g?"Hide password":"Show password",children:g?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:dt,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:dt?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Log In"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}var i$4=Object.defineProperty,d$2=(it,g,et)=>g in it?i$4(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,r$2=(it,g,et)=>(d$2(it,typeof g!="symbol"?g+"":g,et),et);let o$4=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(g){this.current!==g&&(this.handoffState="pending",this.currentId=0,this.current=g)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$4;function u$5(it){return s$5.isServer?null:it instanceof Node?it.ownerDocument:it!=null&&it.hasOwnProperty("current")&&it.current instanceof Node?it.current.ownerDocument:document}function t$4(it){typeof queueMicrotask=="function"?queueMicrotask(it):Promise.resolve().then(it).catch(g=>setTimeout(()=>{throw g}))}function o$3(){let it=[],g={addEventListener(et,ot,ct,ut){return et.addEventListener(ot,ct,ut),g.add(()=>et.removeEventListener(ot,ct,ut))},requestAnimationFrame(...et){let ot=requestAnimationFrame(...et);return g.add(()=>cancelAnimationFrame(ot))},nextFrame(...et){return g.requestAnimationFrame(()=>g.requestAnimationFrame(...et))},setTimeout(...et){let ot=setTimeout(...et);return g.add(()=>clearTimeout(ot))},microTask(...et){let ot={current:!0};return t$4(()=>{ot.current&&et[0]()}),g.add(()=>{ot.current=!1})},style(et,ot,ct){let ut=et.style.getPropertyValue(ot);return Object.assign(et.style,{[ot]:ct}),this.add(()=>{Object.assign(et.style,{[ot]:ut})})},group(et){let ot=o$3();return et(ot),this.add(()=>ot.dispose())},add(et){return it.includes(et)||it.push(et),()=>{let ot=it.indexOf(et);if(ot>=0)for(let ct of it.splice(ot,1))ct()}},dispose(){for(let et of it.splice(0))et()}};return g}function p$2(){let[it]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>it.dispose(),[it]),it}let n$3=(it,g)=>{s$5.isServer?reactExports.useEffect(it,g):reactExports.useLayoutEffect(it,g)};function s$4(it){let g=reactExports.useRef(it);return n$3(()=>{g.current=it},[it]),g}let o$2=function(it){let g=s$4(it);return React$2.useCallback((...et)=>g.current(...et),[g])},e$3=reactExports.createContext(void 0);function a$a(){return reactExports.useContext(e$3)}function t$3(...it){return Array.from(new Set(it.flatMap(g=>typeof g=="string"?g.split(" "):[]))).filter(Boolean).join(" ")}function u$4(it,g,...et){if(it in g){let ct=g[it];return typeof ct=="function"?ct(...et):ct}let ot=new Error(`Tried to handle "${it}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map(ct=>`"${ct}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(ot,u$4),ot}var O$3=(it=>(it[it.None=0]="None",it[it.RenderStrategy=1]="RenderStrategy",it[it.Static=2]="Static",it))(O$3||{}),A$1=(it=>(it[it.Unmount=0]="Unmount",it[it.Hidden=1]="Hidden",it))(A$1||{});function L$1(){let it=U$2();return reactExports.useCallback(g=>C$3({mergeRefs:it,...g}),[it])}function C$3({ourProps:it,theirProps:g,slot:et,defaultTag:ot,features:ct,visible:ut=!0,name:dt,mergeRefs:ft}){ft=ft??$$1;let St=P$1(g,it);if(ut)return F$1(St,et,ot,dt,ft);let kt=ct??0;if(kt&2){let{static:Tt=!1,...Rt}=St;if(Tt)return F$1(Rt,et,ot,dt,ft)}if(kt&1){let{unmount:Tt=!0,...Rt}=St;return u$4(Tt?0:1,{0(){return null},1(){return F$1({...Rt,hidden:!0,style:{display:"none"}},et,ot,dt,ft)}})}return F$1(St,et,ot,dt,ft)}function F$1(it,g={},et,ot,ct){let{as:ut=et,children:dt,refName:ft="ref",...St}=h$3(it,["unmount","static"]),kt=it.ref!==void 0?{[ft]:it.ref}:{},Tt=typeof dt=="function"?dt(g):dt;"className"in St&&St.className&&typeof St.className=="function"&&(St.className=St.className(g)),St["aria-labelledby"]&&St["aria-labelledby"]===St.id&&(St["aria-labelledby"]=void 0);let Rt={};if(g){let jt=!1,Ft=[];for(let[$t,zt]of Object.entries(g))typeof zt=="boolean"&&(jt=!0),zt===!0&&Ft.push($t.replace(/([A-Z])/g,Ut=>`-${Ut.toLowerCase()}`));if(jt){Rt["data-headlessui-state"]=Ft.join(" ");for(let $t of Ft)Rt[`data-${$t}`]=""}}if(ut===reactExports.Fragment&&(Object.keys(m$4(St)).length>0||Object.keys(m$4(Rt)).length>0))if(!reactExports.isValidElement(Tt)||Array.isArray(Tt)&&Tt.length>1){if(Object.keys(m$4(St)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${ot} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$4(St)).concat(Object.keys(m$4(Rt))).map(jt=>`  - ${jt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(jt=>`  - ${jt}`).join(`
`)].join(`
`))}else{let jt=Tt.props,Ft=jt==null?void 0:jt.className,$t=typeof Ft=="function"?(...Bt)=>t$3(Ft(...Bt),St.className):t$3(Ft,St.className),zt=$t?{className:$t}:{},Ut=P$1(Tt.props,m$4(h$3(St,["ref"])));for(let Bt in Rt)Bt in Ut&&delete Rt[Bt];return reactExports.cloneElement(Tt,Object.assign({},Ut,Rt,kt,{ref:ct(H$2(Tt),kt.ref)},zt))}return reactExports.createElement(ut,Object.assign({},h$3(St,["ref"]),ut!==reactExports.Fragment&&kt,ut!==reactExports.Fragment&&Rt),Tt)}function U$2(){let it=reactExports.useRef([]),g=reactExports.useCallback(et=>{for(let ot of it.current)ot!=null&&(typeof ot=="function"?ot(et):ot.current=et)},[]);return(...et)=>{if(!et.every(ot=>ot==null))return it.current=et,g}}function $$1(...it){return it.every(g=>g==null)?void 0:g=>{for(let et of it)et!=null&&(typeof et=="function"?et(g):et.current=g)}}function P$1(...it){if(it.length===0)return{};if(it.length===1)return it[0];let g={},et={};for(let ot of it)for(let ct in ot)ct.startsWith("on")&&typeof ot[ct]=="function"?(et[ct]!=null||(et[ct]=[]),et[ct].push(ot[ct])):g[ct]=ot[ct];if(g.disabled||g["aria-disabled"])for(let ot in et)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(ot)&&(et[ot]=[ct=>{var ut;return(ut=ct==null?void 0:ct.preventDefault)==null?void 0:ut.call(ct)}]);for(let ot in et)Object.assign(g,{[ot](ct,...ut){let dt=et[ot];for(let ft of dt){if((ct instanceof Event||(ct==null?void 0:ct.nativeEvent)instanceof Event)&&ct.defaultPrevented)return;ft(ct,...ut)}}});return g}function K(it){var g;return Object.assign(reactExports.forwardRef(it),{displayName:(g=it.displayName)!=null?g:it.name})}function m$4(it){let g=Object.assign({},it);for(let et in g)g[et]===void 0&&delete g[et];return g}function h$3(it,g=[]){let et=Object.assign({},it);for(let ot of g)ot in et&&delete et[ot];return et}function H$2(it){return React$2.version.split(".")[0]>="19"?it.props.ref:it.ref}let a$9="span";var s$3=(it=>(it[it.None=1]="None",it[it.Focusable=2]="Focusable",it[it.Hidden=4]="Hidden",it))(s$3||{});function l$2(it,g){var et;let{features:ot=1,...ct}=it,ut={ref:g,"aria-hidden":(ot&2)===2?!0:(et=ct["aria-hidden"])!=null?et:void 0,hidden:(ot&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(ot&4)===4&&(ot&2)!==2&&{display:"none"}}};return L$1()({ourProps:ut,theirProps:ct,slot:{},defaultTag:a$9,name:"Hidden"})}let f$6=K(l$2),u$3=Symbol();function T$2(it,g=!0){return Object.assign(it,{[u$3]:g})}function y$3(...it){let g=reactExports.useRef(it);reactExports.useEffect(()=>{g.current=it},[it]);let et=o$2(ot=>{for(let ct of g.current)ct!=null&&(typeof ct=="function"?ct(ot):ct.current=ot)});return it.every(ot=>ot==null||(ot==null?void 0:ot[u$3]))?void 0:et}let a$8=reactExports.createContext(null);a$8.displayName="DescriptionContext";function f$5(){let it=reactExports.useContext(a$8);if(it===null){let g=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(g,f$5),g}return it}function w$3(){let[it,g]=reactExports.useState([]);return[it.length>0?it.join(" "):void 0,reactExports.useMemo(()=>function(et){let ot=o$2(ut=>(g(dt=>[...dt,ut]),()=>g(dt=>{let ft=dt.slice(),St=ft.indexOf(ut);return St!==-1&&ft.splice(St,1),ft}))),ct=reactExports.useMemo(()=>({register:ot,slot:et.slot,name:et.name,props:et.props,value:et.value}),[ot,et.slot,et.name,et.props,et.value]);return React$2.createElement(a$8.Provider,{value:ct},et.children)},[g])]}let S$2="p";function C$2(it,g){let et=reactExports.useId(),ot=a$a(),{id:ct=`headlessui-description-${et}`,...ut}=it,dt=f$5(),ft=y$3(g);n$3(()=>dt.register(ct),[ct,dt.register]);let St=ot||!1,kt=reactExports.useMemo(()=>({...dt.slot,disabled:St}),[dt.slot,St]),Tt={ref:ft,...dt.props,id:ct};return L$1()({ourProps:Tt,theirProps:ut,slot:kt,defaultTag:S$2,name:dt.name||"Description"})}let _$1=K(C$2),H$1=Object.assign(_$1,{});var o$1=(it=>(it.Space=" ",it.Enter="Enter",it.Escape="Escape",it.Backspace="Backspace",it.Delete="Delete",it.ArrowLeft="ArrowLeft",it.ArrowUp="ArrowUp",it.ArrowRight="ArrowRight",it.ArrowDown="ArrowDown",it.Home="Home",it.End="End",it.PageUp="PageUp",it.PageDown="PageDown",it.Tab="Tab",it))(o$1||{});let e$2=reactExports.createContext(()=>{});function C$1({value:it,children:g}){return React$2.createElement(e$2.Provider,{value:it},g)}let a$7=class extends Map{constructor(g){super(),this.factory=g}get(g){let et=super.get(g);return et===void 0&&(et=this.factory(g),this.set(g,et)),et}};function a$6(it,g){let et=it(),ot=new Set;return{getSnapshot(){return et},subscribe(ct){return ot.add(ct),()=>ot.delete(ct)},dispatch(ct,...ut){let dt=g[ct].call(et,...ut);dt&&(et=dt,ot.forEach(ft=>ft()))}}}function o(it){return reactExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getSnapshot)}let p$1=new a$7(()=>a$6(()=>[],{ADD(it){return this.includes(it)?this:[...this,it]},REMOVE(it){let g=this.indexOf(it);if(g===-1)return this;let et=this.slice();return et.splice(g,1),et}}));function x$2(it,g){let et=p$1.get(g),ot=reactExports.useId(),ct=o(et);if(n$3(()=>{if(it)return et.dispatch("ADD",ot),()=>et.dispatch("REMOVE",ot)},[et,it]),!it)return!1;let ut=ct.indexOf(ot),dt=ct.length;return ut===-1&&(ut=dt,dt+=1),ut===dt-1}let f$4=new Map,u$2=new Map;function h$2(it){var g;let et=(g=u$2.get(it))!=null?g:0;return u$2.set(it,et+1),et!==0?()=>m$3(it):(f$4.set(it,{"aria-hidden":it.getAttribute("aria-hidden"),inert:it.inert}),it.setAttribute("aria-hidden","true"),it.inert=!0,()=>m$3(it))}function m$3(it){var g;let et=(g=u$2.get(it))!=null?g:1;if(et===1?u$2.delete(it):u$2.set(it,et-1),et!==1)return;let ot=f$4.get(it);ot&&(ot["aria-hidden"]===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",ot["aria-hidden"]),it.inert=ot.inert,f$4.delete(it))}function y$2(it,{allowed:g,disallowed:et}={}){let ot=x$2(it,"inert-others");n$3(()=>{var ct,ut;if(!ot)return;let dt=o$3();for(let St of(ct=et==null?void 0:et())!=null?ct:[])St&&dt.add(h$2(St));let ft=(ut=g==null?void 0:g())!=null?ut:[];for(let St of ft){if(!St)continue;let kt=u$5(St);if(!kt)continue;let Tt=St.parentElement;for(;Tt&&Tt!==kt.body;){for(let Rt of Tt.children)ft.some(jt=>Rt.contains(jt))||dt.add(h$2(Rt));Tt=Tt.parentElement}}return dt.dispose},[ot,g,et])}function m$2(it,g,et){let ot=s$4(ct=>{let ut=ct.getBoundingClientRect();ut.x===0&&ut.y===0&&ut.width===0&&ut.height===0&&et()});reactExports.useEffect(()=>{if(!it)return;let ct=g===null?null:g instanceof HTMLElement?g:g.current;if(!ct)return;let ut=o$3();if(typeof ResizeObserver<"u"){let dt=new ResizeObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}if(typeof IntersectionObserver<"u"){let dt=new IntersectionObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}return()=>ut.dispose()},[g,ot,it])}let f$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(it=>`${it}:not([tabindex='-1'])`).join(","),p=["[data-autofocus]"].map(it=>`${it}:not([tabindex='-1'])`).join(",");var F=(it=>(it[it.First=1]="First",it[it.Previous=2]="Previous",it[it.Next=4]="Next",it[it.Last=8]="Last",it[it.WrapAround=16]="WrapAround",it[it.NoScroll=32]="NoScroll",it[it.AutoFocus=64]="AutoFocus",it))(F||{}),T$1=(it=>(it[it.Error=0]="Error",it[it.Overflow=1]="Overflow",it[it.Success=2]="Success",it[it.Underflow=3]="Underflow",it))(T$1||{}),y$1=(it=>(it[it.Previous=-1]="Previous",it[it.Next=1]="Next",it))(y$1||{});function b$2(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(f$3)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$1(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(p)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}var h$1=(it=>(it[it.Strict=0]="Strict",it[it.Loose=1]="Loose",it))(h$1||{});function A(it,g=0){var et;return it===((et=u$5(it))==null?void 0:et.body)?!1:u$4(g,{0(){return it.matches(f$3)},1(){let ot=it;for(;ot!==null;){if(ot.matches(f$3))return!0;ot=ot.parentElement}return!1}})}var H=(it=>(it[it.Keyboard=0]="Keyboard",it[it.Mouse=1]="Mouse",it))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",it=>{it.metaKey||it.altKey||it.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",it=>{it.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:it.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$2(it){it==null||it.focus({preventScroll:!0})}let w$2=["textarea","input"].join(",");function O$2(it){var g,et;return(et=(g=it==null?void 0:it.matches)==null?void 0:g.call(it,w$2))!=null?et:!1}function _(it,g=et=>et){return it.slice().sort((et,ot)=>{let ct=g(et),ut=g(ot);if(ct===null||ut===null)return 0;let dt=ct.compareDocumentPosition(ut);return dt&Node.DOCUMENT_POSITION_FOLLOWING?-1:dt&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P(it,g,{sorted:et=!0,relativeTo:ot=null,skipElements:ct=[]}={}){let ut=Array.isArray(it)?it.length>0?it[0].ownerDocument:document:it.ownerDocument,dt=Array.isArray(it)?et?_(it):it:g&64?S$1(it):b$2(it);ct.length>0&&dt.length>1&&(dt=dt.filter(Ft=>!ct.some($t=>$t!=null&&"current"in $t?($t==null?void 0:$t.current)===Ft:$t===Ft))),ot=ot??ut.activeElement;let ft=(()=>{if(g&5)return 1;if(g&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),St=(()=>{if(g&1)return 0;if(g&2)return Math.max(0,dt.indexOf(ot))-1;if(g&4)return Math.max(0,dt.indexOf(ot))+1;if(g&8)return dt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),kt=g&32?{preventScroll:!0}:{},Tt=0,Rt=dt.length,jt;do{if(Tt>=Rt||Tt+Rt<=0)return 0;let Ft=St+Tt;if(g&16)Ft=(Ft+Rt)%Rt;else{if(Ft<0)return 3;if(Ft>=Rt)return 1}jt=dt[Ft],jt==null||jt.focus(kt),Tt+=ft}while(jt!==ut.activeElement);return g&6&&O$2(jt)&&jt.select(),2}function t$2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$2()||i$3()}function i$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return document.addEventListener(g,ut,ot),()=>document.removeEventListener(g,ut,ot)},[it,g,ot])}function s$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return window.addEventListener(g,ut,ot),()=>window.removeEventListener(g,ut,ot)},[it,g,ot])}const E$1=30;function R$2(it,g,et){let ot=x$2(it,"outside-click"),ct=s$4(et),ut=reactExports.useCallback(function(St,kt){if(St.defaultPrevented)return;let Tt=kt(St);if(Tt===null||!Tt.getRootNode().contains(Tt)||!Tt.isConnected)return;let Rt=function jt(Ft){return typeof Ft=="function"?jt(Ft()):Array.isArray(Ft)||Ft instanceof Set?Ft:[Ft]}(g);for(let jt of Rt)if(jt!==null&&(jt.contains(Tt)||St.composed&&St.composedPath().includes(jt)))return;return!A(Tt,h$1.Loose)&&Tt.tabIndex!==-1&&St.preventDefault(),ct.current(St,Tt)},[ct,g]),dt=reactExports.useRef(null);i$2(ot,"pointerdown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"mousedown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"click",St=>{n$2()||dt.current&&(ut(St,()=>dt.current),dt.current=null)},!0);let ft=reactExports.useRef({x:0,y:0});i$2(ot,"touchstart",St=>{ft.current.x=St.touches[0].clientX,ft.current.y=St.touches[0].clientY},!0),i$2(ot,"touchend",St=>{let kt={x:St.changedTouches[0].clientX,y:St.changedTouches[0].clientY};if(!(Math.abs(kt.x-ft.current.x)>=E$1||Math.abs(kt.y-ft.current.y)>=E$1))return ut(St,()=>St.target instanceof HTMLElement?St.target:null)},!0),s$2(ot,"blur",St=>ut(St,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(...it){return reactExports.useMemo(()=>u$5(...it),[...it])}function E(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{it=it??window;function ut(dt){ct.current(dt)}return it.addEventListener(g,ut,ot),()=>it.removeEventListener(g,ut,ot)},[it,g,ot])}function d$1(){let it;return{before({doc:g}){var et;let ot=g.documentElement,ct=(et=g.defaultView)!=null?et:window;it=Math.max(0,ct.innerWidth-ot.clientWidth)},after({doc:g,d:et}){let ot=g.documentElement,ct=Math.max(0,ot.clientWidth-ot.offsetWidth),ut=Math.max(0,it-ct);et.style(ot,"paddingRight",`${ut}px`)}}}function d(){return t$2()?{before({doc:it,d:g,meta:et}){function ot(ct){return et.containers.flatMap(ut=>ut()).some(ut=>ut.contains(ct))}g.microTask(()=>{var ct;if(window.getComputedStyle(it.documentElement).scrollBehavior!=="auto"){let ft=o$3();ft.style(it.documentElement,"scrollBehavior","auto"),g.add(()=>g.microTask(()=>ft.dispose()))}let ut=(ct=window.scrollY)!=null?ct:window.pageYOffset,dt=null;g.addEventListener(it,"click",ft=>{if(ft.target instanceof HTMLElement)try{let St=ft.target.closest("a");if(!St)return;let{hash:kt}=new URL(St.href),Tt=it.querySelector(kt);Tt&&!ot(Tt)&&(dt=Tt)}catch{}},!0),g.addEventListener(it,"touchstart",ft=>{if(ft.target instanceof HTMLElement)if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&ot(St.parentElement);)St=St.parentElement;g.style(St,"overscrollBehavior","contain")}else g.style(ft.target,"touchAction","none")}),g.addEventListener(it,"touchmove",ft=>{if(ft.target instanceof HTMLElement){if(ft.target.tagName==="INPUT")return;if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&St.dataset.headlessuiPortal!==""&&!(St.scrollHeight>St.clientHeight||St.scrollWidth>St.clientWidth);)St=St.parentElement;St.dataset.headlessuiPortal===""&&ft.preventDefault()}else ft.preventDefault()}},{passive:!1}),g.add(()=>{var ft;let St=(ft=window.scrollY)!=null?ft:window.pageYOffset;ut!==St&&window.scrollTo(0,ut),dt&&dt.isConnected&&(dt.scrollIntoView({block:"nearest"}),dt=null)})})}}:{}}function r$1(){return{before({doc:it,d:g}){g.style(it.documentElement,"overflow","hidden")}}}function m$1(it){let g={};for(let et of it)Object.assign(g,et(g));return g}let a$5=a$6(()=>new Map,{PUSH(it,g){var et;let ot=(et=this.get(it))!=null?et:{doc:it,count:0,d:o$3(),meta:new Set};return ot.count++,ot.meta.add(g),this.set(it,ot),this},POP(it,g){let et=this.get(it);return et&&(et.count--,et.meta.delete(g)),this},SCROLL_PREVENT({doc:it,d:g,meta:et}){let ot={doc:it,d:g,meta:m$1(et)},ct=[d(),d$1(),r$1()];ct.forEach(({before:ut})=>ut==null?void 0:ut(ot)),ct.forEach(({after:ut})=>ut==null?void 0:ut(ot))},SCROLL_ALLOW({d:it}){it.dispose()},TEARDOWN({doc:it}){this.delete(it)}});a$5.subscribe(()=>{let it=a$5.getSnapshot(),g=new Map;for(let[et]of it)g.set(et,et.documentElement.style.overflow);for(let et of it.values()){let ot=g.get(et.doc)==="hidden",ct=et.count!==0;(ct&&!ot||!ct&&ot)&&a$5.dispatch(et.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",et),et.count===0&&a$5.dispatch("TEARDOWN",et)}});function a$4(it,g,et=()=>({containers:[]})){let ot=o(a$5),ct=g?ot.get(g):void 0,ut=ct?ct.count>0:!1;return n$3(()=>{if(!(!g||!it))return a$5.dispatch("PUSH",g,et),()=>a$5.dispatch("POP",g,et)},[it,g]),ut}function f$2(it,g,et=()=>[document.body]){let ot=x$2(it,"scroll-lock");a$4(ot,g,ct=>{var ut;return{containers:[...(ut=ct.containers)!=null?ut:[],et]}})}function c$2(it=0){let[g,et]=reactExports.useState(it),ot=reactExports.useCallback(St=>et(St),[g]),ct=reactExports.useCallback(St=>et(kt=>kt|St),[g]),ut=reactExports.useCallback(St=>(g&St)===St,[g]),dt=reactExports.useCallback(St=>et(kt=>kt&~St),[et]),ft=reactExports.useCallback(St=>et(kt=>kt^St),[et]);return{flags:g,setFlag:ot,addFlag:ct,hasFlag:ut,removeFlag:dt,toggleFlag:ft}}var T,b$1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T=process==null?void 0:process.env)==null?void 0:T.NODE_ENV)==="test"&&typeof((b$1=Element==null?void 0:Element.prototype)==null?void 0:b$1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L=(it=>(it[it.None=0]="None",it[it.Closed=1]="Closed",it[it.Enter=2]="Enter",it[it.Leave=4]="Leave",it))(L||{});function R$1(it){let g={};for(let et in it)it[et]===!0&&(g[`data-${et}`]="");return g}function x$1(it,g,et,ot){let[ct,ut]=reactExports.useState(et),{hasFlag:dt,addFlag:ft,removeFlag:St}=c$2(it&&ct?3:0),kt=reactExports.useRef(!1),Tt=reactExports.useRef(!1),Rt=p$2();return n$3(()=>{var jt;if(it){if(et&&ut(!0),!g){et&&ft(3);return}return(jt=ot==null?void 0:ot.start)==null||jt.call(ot,et),C(g,{inFlight:kt,prepare(){Tt.current?Tt.current=!1:Tt.current=kt.current,kt.current=!0,!Tt.current&&(et?(ft(3),St(4)):(ft(4),St(2)))},run(){Tt.current?et?(St(3),ft(4)):(St(4),ft(3)):et?St(1):ft(1)},done(){var Ft;Tt.current&&typeof g.getAnimations=="function"&&g.getAnimations().length>0||(kt.current=!1,St(7),et||ut(!1),(Ft=ot==null?void 0:ot.end)==null||Ft.call(ot,et))}})}},[it,et,g,Rt]),it?[ct,{closed:dt(1),enter:dt(2),leave:dt(4),transition:dt(2)||dt(4)}]:[et,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(it,{prepare:g,run:et,done:ot,inFlight:ct}){let ut=o$3();return j$1(it,{prepare:g,inFlight:ct}),ut.nextFrame(()=>{et(),ut.requestAnimationFrame(()=>{ut.add(M$2(it,ot))})}),ut.dispose}function M$2(it,g){var et,ot;let ct=o$3();if(!it)return ct.dispose;let ut=!1;ct.add(()=>{ut=!0});let dt=(ot=(et=it.getAnimations)==null?void 0:et.call(it).filter(ft=>ft instanceof CSSTransition))!=null?ot:[];return dt.length===0?(g(),ct.dispose):(Promise.allSettled(dt.map(ft=>ft.finished)).then(()=>{ut||g()}),ct.dispose)}function j$1(it,{inFlight:g,prepare:et}){if(g!=null&&g.current){et();return}let ot=it.style.transition;it.style.transition="none",et(),it.offsetHeight,it.style.transition=ot}function m(it,g){let et=reactExports.useRef([]),ot=o$2(it);reactExports.useEffect(()=>{let ct=[...et.current];for(let[ut,dt]of g.entries())if(et.current[ut]!==dt){let ft=ot(g,ct);return et.current=g,ft}},[ot,...g])}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i$1=(it=>(it[it.Open=1]="Open",it[it.Closed=2]="Closed",it[it.Closing=4]="Closing",it[it.Opening=8]="Opening",it))(i$1||{});function u$1(){return reactExports.useContext(n)}function c$1({value:it,children:g}){return React$2.createElement(n.Provider,{value:it},g)}function s$1({children:it}){return React$2.createElement(n.Provider,{value:null},it)}function t$1(it){function g(){document.readyState!=="loading"&&(it(),document.removeEventListener("DOMContentLoaded",g))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",g),g())}let r=[];t$1(()=>{function it(g){if(!(g.target instanceof HTMLElement)||g.target===document.body||r[0]===g.target)return;let et=g.target;et=et.closest(f$3),r.unshift(et??g.target),r=r.filter(ot=>ot!=null&&ot.isConnected),r.splice(10)}window.addEventListener("click",it,{capture:!0}),window.addEventListener("mousedown",it,{capture:!0}),window.addEventListener("focus",it,{capture:!0}),document.body.addEventListener("click",it,{capture:!0}),document.body.addEventListener("mousedown",it,{capture:!0}),document.body.addEventListener("focus",it,{capture:!0})});function c(it){let g=o$2(it),et=reactExports.useRef(!1);reactExports.useEffect(()=>(et.current=!1,()=>{et.current=!0,t$4(()=>{et.current&&g()})}),[g])}function s(){let it=typeof document>"u";return"useSyncExternalStore"in t$5?(g=>g.useSyncExternalStore)(t$5)(()=>()=>{},()=>!1,()=>!it):!1}function l$1(){let it=s(),[g,et]=reactExports.useState(s$5.isHandoffComplete);return g&&s$5.isHandoffComplete===!1&&et(!1),reactExports.useEffect(()=>{g!==!0&&et(!0)},[g]),reactExports.useEffect(()=>s$5.handoff(),[]),it?!1:g}let e$1=reactExports.createContext(!1);function a$3(){return reactExports.useContext(e$1)}function l(it){return React$2.createElement(e$1.Provider,{value:it.force},it.children)}function N(it){let g=a$3(),et=reactExports.useContext(v),ot=n$1(it),[ct,ut]=reactExports.useState(()=>{var dt;if(!g&&et!==null)return(dt=et.current)!=null?dt:null;if(s$5.isServer)return null;let ft=ot==null?void 0:ot.getElementById("headlessui-portal-root");if(ft)return ft;if(ot===null)return null;let St=ot.createElement("div");return St.setAttribute("id","headlessui-portal-root"),ot.body.appendChild(St)});return reactExports.useEffect(()=>{ct!==null&&(ot!=null&&ot.body.contains(ct)||ot==null||ot.body.appendChild(ct))},[ct,ot]),reactExports.useEffect(()=>{g||et!==null&&ut(et.current)},[et,ut,g]),ct}let M$1=reactExports.Fragment,S=K(function(it,g){let et=it,ot=reactExports.useRef(null),ct=y$3(T$2(Rt=>{ot.current=Rt}),g),ut=n$1(ot),dt=N(ot),[ft]=reactExports.useState(()=>{var Rt;return s$5.isServer?null:(Rt=ut==null?void 0:ut.createElement("div"))!=null?Rt:null}),St=reactExports.useContext(y),kt=l$1();n$3(()=>{!dt||!ft||dt.contains(ft)||(ft.setAttribute("data-headlessui-portal",""),dt.appendChild(ft))},[dt,ft]),n$3(()=>{if(ft&&St)return St.register(ft)},[St,ft]),c(()=>{var Rt;!dt||!ft||(ft instanceof Node&&dt.contains(ft)&&dt.removeChild(ft),dt.childNodes.length<=0&&((Rt=dt.parentElement)==null||Rt.removeChild(dt)))});let Tt=L$1();return kt?!dt||!ft?null:reactDomExports.createPortal(Tt({ourProps:{ref:ct},theirProps:et,slot:{},defaultTag:M$1,name:"Portal"}),ft):null});function j(it,g){let et=y$3(g),{enabled:ot=!0,...ct}=it,ut=L$1();return ot?React$2.createElement(S,{...ct,ref:et}):ut({ourProps:{ref:et},theirProps:ct,slot:{},defaultTag:M$1,name:"Portal"})}let W=reactExports.Fragment,v=reactExports.createContext(null);function I$1(it,g){let{target:et,...ot}=it,ct={ref:y$3(g)},ut=L$1();return React$2.createElement(v.Provider,{value:et},ut({ourProps:ct,theirProps:ot,defaultTag:W,name:"Popover.Group"}))}let y=reactExports.createContext(null);function te$1(){let it=reactExports.useContext(y),g=reactExports.useRef([]),et=o$2(ut=>(g.current.push(ut),it&&it.register(ut),()=>ot(ut))),ot=o$2(ut=>{let dt=g.current.indexOf(ut);dt!==-1&&g.current.splice(dt,1),it&&it.unregister(ut)}),ct=reactExports.useMemo(()=>({register:et,unregister:ot,portals:g}),[et,ot,g]);return[g,reactExports.useMemo(()=>function({children:ut}){return React$2.createElement(y.Provider,{value:ct},ut)},[ct])]}let J=K(j),X$1=K(I$1),re$1=Object.assign(J,{Group:X$1});function a$2(it,g=typeof document<"u"?document.defaultView:null,et){let ot=x$2(it,"escape");E(g,"keydown",ct=>{ot&&(ct.defaultPrevented||ct.key===o$1.Escape&&et(ct))})}function f$1(){var it;let[g]=reactExports.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[et,ot]=reactExports.useState((it=g==null?void 0:g.matches)!=null?it:!1);return n$3(()=>{if(!g)return;function ct(ut){ot(ut.matches)}return g.addEventListener("change",ct),()=>g.removeEventListener("change",ct)},[g]),et}function R({defaultContainers:it=[],portals:g,mainTreeNode:et}={}){let ot=n$1(et),ct=o$2(()=>{var ut,dt;let ft=[];for(let St of it)St!==null&&(St instanceof HTMLElement?ft.push(St):"current"in St&&St.current instanceof HTMLElement&&ft.push(St.current));if(g!=null&&g.current)for(let St of g.current)ft.push(St);for(let St of(ut=ot==null?void 0:ot.querySelectorAll("html > *, body > *"))!=null?ut:[])St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St.id!=="headlessui-portal-root"&&(et&&(St.contains(et)||St.contains((dt=et==null?void 0:et.getRootNode())==null?void 0:dt.host))||ft.some(kt=>St.contains(kt))||ft.push(St));return ft});return{resolveContainers:ct,contains:o$2(ut=>ct().some(dt=>dt.contains(ut)))}}let a$1=reactExports.createContext(null);function O$1({children:it,node:g}){let[et,ot]=reactExports.useState(null),ct=b(g??et);return React$2.createElement(a$1.Provider,{value:ct},it,ct===null&&React$2.createElement(f$6,{features:s$3.Hidden,ref:ut=>{var dt,ft;if(ut){for(let St of(ft=(dt=u$5(ut))==null?void 0:dt.querySelectorAll("html > *, body > *"))!=null?ft:[])if(St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St!=null&&St.contains(ut)){ot(St);break}}}}))}function b(it=null){var g;return(g=reactExports.useContext(a$1))!=null?g:it}function f(){let it=reactExports.useRef(!1);return n$3(()=>(it.current=!0,()=>{it.current=!1}),[]),it}var a=(it=>(it[it.Forwards=0]="Forwards",it[it.Backwards=1]="Backwards",it))(a||{});function u(){let it=reactExports.useRef(0);return s$2(!0,"keydown",g=>{g.key==="Tab"&&(it.current=g.shiftKey?1:0)},!0),it}function U$1(it){if(!it)return new Set;if(typeof it=="function")return new Set(it());let g=new Set;for(let et of it.current)et.current instanceof HTMLElement&&g.add(et.current);return g}let Z="div";var x=(it=>(it[it.None=0]="None",it[it.InitialFocus=1]="InitialFocus",it[it.TabLock=2]="TabLock",it[it.FocusLock=4]="FocusLock",it[it.RestoreFocus=8]="RestoreFocus",it[it.AutoFocus=16]="AutoFocus",it))(x||{});function $(it,g){let et=reactExports.useRef(null),ot=y$3(et,g),{initialFocus:ct,initialFocusFallback:ut,containers:dt,features:ft=15,...St}=it;l$1()||(ft=0);let kt=n$1(et);ee(ft,{ownerDocument:kt});let Tt=te(ft,{ownerDocument:kt,container:et,initialFocus:ct,initialFocusFallback:ut});re(ft,{ownerDocument:kt,container:et,containers:dt,previousActiveElement:Tt});let Rt=u(),jt=o$2(Ht=>{let Jt=et.current;Jt&&(Zt=>Zt())(()=>{u$4(Rt.current,{[a.Forwards]:()=>{P(Jt,F.First,{skipElements:[Ht.relatedTarget,ut]})},[a.Backwards]:()=>{P(Jt,F.Last,{skipElements:[Ht.relatedTarget,ut]})}})})}),Ft=x$2(!!(ft&2),"focus-trap#tab-lock"),$t=p$2(),zt=reactExports.useRef(!1),Ut={ref:ot,onKeyDown(Ht){Ht.key=="Tab"&&(zt.current=!0,$t.requestAnimationFrame(()=>{zt.current=!1}))},onBlur(Ht){if(!(ft&4))return;let Jt=U$1(dt);et.current instanceof HTMLElement&&Jt.add(et.current);let Zt=Ht.relatedTarget;Zt instanceof HTMLElement&&Zt.dataset.headlessuiFocusGuard!=="true"&&(I(Jt,Zt)||(zt.current?P(et.current,u$4(Rt.current,{[a.Forwards]:()=>F.Next,[a.Backwards]:()=>F.Previous})|F.WrapAround,{relativeTo:Ht.target}):Ht.target instanceof HTMLElement&&I$2(Ht.target)))}},Bt=L$1();return React$2.createElement(React$2.Fragment,null,Ft&&React$2.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}),Bt({ourProps:Ut,theirProps:St,defaultTag:Z,name:"FocusTrap"}),Ft&&React$2.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}))}let D=K($),ye=Object.assign(D,{features:x});function w$1(it=!0){let g=reactExports.useRef(r.slice());return m(([et],[ot])=>{ot===!0&&et===!1&&t$4(()=>{g.current.splice(0)}),ot===!1&&et===!0&&(g.current=r.slice())},[it,r,g]),o$2(()=>{var et;return(et=g.current.find(ot=>ot!=null&&ot.isConnected))!=null?et:null})}function ee(it,{ownerDocument:g}){let et=!!(it&8),ot=w$1(et);m(()=>{et||(g==null?void 0:g.activeElement)===(g==null?void 0:g.body)&&I$2(ot())},[et]),c(()=>{et&&I$2(ot())})}function te(it,{ownerDocument:g,container:et,initialFocus:ot,initialFocusFallback:ct}){let ut=reactExports.useRef(null),dt=x$2(!!(it&1),"focus-trap#initial-focus"),ft=f();return m(()=>{if(it===0)return;if(!dt){ct!=null&&ct.current&&I$2(ct.current);return}let St=et.current;St&&t$4(()=>{if(!ft.current)return;let kt=g==null?void 0:g.activeElement;if(ot!=null&&ot.current){if((ot==null?void 0:ot.current)===kt){ut.current=kt;return}}else if(St.contains(kt)){ut.current=kt;return}if(ot!=null&&ot.current)I$2(ot.current);else{if(it&16){if(P(St,F.First|F.AutoFocus)!==T$1.Error)return}else if(P(St,F.First)!==T$1.Error)return;if(ct!=null&&ct.current&&(I$2(ct.current),(g==null?void 0:g.activeElement)===ct.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}ut.current=g==null?void 0:g.activeElement})},[ct,dt,it]),ut}function re(it,{ownerDocument:g,container:et,containers:ot,previousActiveElement:ct}){let ut=f(),dt=!!(it&4);E(g==null?void 0:g.defaultView,"focus",ft=>{if(!dt||!ut.current)return;let St=U$1(ot);et.current instanceof HTMLElement&&St.add(et.current);let kt=ct.current;if(!kt)return;let Tt=ft.target;Tt&&Tt instanceof HTMLElement?I(St,Tt)?(ct.current=Tt,I$2(Tt)):(ft.preventDefault(),ft.stopPropagation(),I$2(kt)):I$2(ct.current)},!0)}function I(it,g){for(let et of it)if(et.contains(g))return!0;return!1}function ue(it){var g;return!!(it.enter||it.enterFrom||it.enterTo||it.leave||it.leaveFrom||it.leaveTo)||((g=it.as)!=null?g:de)!==reactExports.Fragment||React$2.Children.count(it.children)===1}let w=reactExports.createContext(null);w.displayName="TransitionContext";var _e=(it=>(it.Visible="visible",it.Hidden="hidden",it))(_e||{});function De(){let it=reactExports.useContext(w);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}function He$1(){let it=reactExports.useContext(M);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}let M=reactExports.createContext(null);M.displayName="NestingContext";function U(it){return"children"in it?U(it.children):it.current.filter(({el:g})=>g.current!==null).filter(({state:g})=>g==="visible").length>0}function Te(it,g){let et=s$4(it),ot=reactExports.useRef([]),ct=f(),ut=p$2(),dt=o$2((Ft,$t=A$1.Hidden)=>{let zt=ot.current.findIndex(({el:Ut})=>Ut===Ft);zt!==-1&&(u$4($t,{[A$1.Unmount](){ot.current.splice(zt,1)},[A$1.Hidden](){ot.current[zt].state="hidden"}}),ut.microTask(()=>{var Ut;!U(ot)&&ct.current&&((Ut=et.current)==null||Ut.call(et))}))}),ft=o$2(Ft=>{let $t=ot.current.find(({el:zt})=>zt===Ft);return $t?$t.state!=="visible"&&($t.state="visible"):ot.current.push({el:Ft,state:"visible"}),()=>dt(Ft,A$1.Unmount)}),St=reactExports.useRef([]),kt=reactExports.useRef(Promise.resolve()),Tt=reactExports.useRef({enter:[],leave:[]}),Rt=o$2((Ft,$t,zt)=>{St.current.splice(0),g&&(g.chains.current[$t]=g.chains.current[$t].filter(([Ut])=>Ut!==Ft)),g==null||g.chains.current[$t].push([Ft,new Promise(Ut=>{St.current.push(Ut)})]),g==null||g.chains.current[$t].push([Ft,new Promise(Ut=>{Promise.all(Tt.current[$t].map(([Bt,Ht])=>Ht)).then(()=>Ut())})]),$t==="enter"?kt.current=kt.current.then(()=>g==null?void 0:g.wait.current).then(()=>zt($t)):zt($t)}),jt=o$2((Ft,$t,zt)=>{Promise.all(Tt.current[$t].splice(0).map(([Ut,Bt])=>Bt)).then(()=>{var Ut;(Ut=St.current.shift())==null||Ut()}).then(()=>zt($t))});return reactExports.useMemo(()=>({children:ot,register:ft,unregister:dt,onStart:Rt,onStop:jt,wait:kt,chains:Tt}),[ft,dt,ot,Rt,jt,Tt,kt])}let de=reactExports.Fragment,fe=O$3.RenderStrategy;function Ae(it,g){var et,ot;let{transition:ct=!0,beforeEnter:ut,afterEnter:dt,beforeLeave:ft,afterLeave:St,enter:kt,enterFrom:Tt,enterTo:Rt,entered:jt,leave:Ft,leaveFrom:$t,leaveTo:zt,...Ut}=it,[Bt,Ht]=reactExports.useState(null),Jt=reactExports.useRef(null),Zt=ue(it),tn=y$3(...Zt?[Jt,g,Ht]:g===null?[]:[g]),nn=(et=Ut.unmount)==null||et?A$1.Unmount:A$1.Hidden,{show:rn,appear:on,initial:pn}=De(),[dn,hn]=reactExports.useState(rn?"visible":"hidden"),un=He$1(),{register:En,unregister:wn}=un;n$3(()=>En(Jt),[En,Jt]),n$3(()=>{if(nn===A$1.Hidden&&Jt.current){if(rn&&dn!=="visible"){hn("visible");return}return u$4(dn,{hidden:()=>wn(Jt),visible:()=>En(Jt)})}},[dn,Jt,En,wn,rn,nn]);let Sn=l$1();n$3(()=>{if(Zt&&Sn&&dn==="visible"&&Jt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Jt,dn,Sn,Zt]);let fn=pn&&!on,xn=on&&rn&&pn,an=reactExports.useRef(!1),cn=Te(()=>{an.current||(hn("hidden"),wn(Jt))},un),bn=o$2(Cn=>{an.current=!0;let On=Cn?"enter":"leave";cn.onStart(Jt,On,In=>{In==="enter"?ut==null||ut():In==="leave"&&(ft==null||ft())})}),mn=o$2(Cn=>{let On=Cn?"enter":"leave";an.current=!1,cn.onStop(Jt,On,In=>{In==="enter"?dt==null||dt():In==="leave"&&(St==null||St())}),On==="leave"&&!U(cn)&&(hn("hidden"),wn(Jt))});reactExports.useEffect(()=>{Zt&&ct||(bn(rn),mn(rn))},[rn,Zt,ct]);let Tn=(()=>!(!ct||!Zt||!Sn||fn))(),[,An]=x$1(Tn,Bt,rn,{start:bn,end:mn}),Pn=m$4({ref:tn,className:((ot=t$3(Ut.className,xn&&kt,xn&&Tt,An.enter&&kt,An.enter&&An.closed&&Tt,An.enter&&!An.closed&&Rt,An.leave&&Ft,An.leave&&!An.closed&&$t,An.leave&&An.closed&&zt,!An.transition&&rn&&jt))==null?void 0:ot.trim())||void 0,...R$1(An)}),Mn=0;dn==="visible"&&(Mn|=i$1.Open),dn==="hidden"&&(Mn|=i$1.Closed),An.enter&&(Mn|=i$1.Opening),An.leave&&(Mn|=i$1.Closing);let Rn=L$1();return React$2.createElement(M.Provider,{value:cn},React$2.createElement(c$1,{value:Mn},Rn({ourProps:Pn,theirProps:Ut,defaultTag:de,features:fe,visible:dn==="visible",name:"Transition.Child"})))}function Ie$1(it,g){let{show:et,appear:ot=!1,unmount:ct=!0,...ut}=it,dt=reactExports.useRef(null),ft=ue(it),St=y$3(...ft?[dt,g]:g===null?[]:[g]);l$1();let kt=u$1();if(et===void 0&&kt!==null&&(et=(kt&i$1.Open)===i$1.Open),et===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Tt,Rt]=reactExports.useState(et?"visible":"hidden"),jt=Te(()=>{et||Rt("hidden")}),[Ft,$t]=reactExports.useState(!0),zt=reactExports.useRef([et]);n$3(()=>{Ft!==!1&&zt.current[zt.current.length-1]!==et&&(zt.current.push(et),$t(!1))},[zt,et]);let Ut=reactExports.useMemo(()=>({show:et,appear:ot,initial:Ft}),[et,ot,Ft]);n$3(()=>{et?Rt("visible"):!U(jt)&&dt.current!==null&&Rt("hidden")},[et,jt]);let Bt={unmount:ct},Ht=o$2(()=>{var tn;Ft&&$t(!1),(tn=it.beforeEnter)==null||tn.call(it)}),Jt=o$2(()=>{var tn;Ft&&$t(!1),(tn=it.beforeLeave)==null||tn.call(it)}),Zt=L$1();return React$2.createElement(M.Provider,{value:jt},React$2.createElement(w.Provider,{value:Ut},Zt({ourProps:{...Bt,as:reactExports.Fragment,children:React$2.createElement(me,{ref:St,...Bt,...ut,beforeEnter:Ht,beforeLeave:Jt})},theirProps:{},defaultTag:reactExports.Fragment,features:fe,visible:Tt==="visible",name:"Transition"})))}function Le(it,g){let et=reactExports.useContext(w)!==null,ot=u$1()!==null;return React$2.createElement(React$2.Fragment,null,!et&&ot?React$2.createElement(X,{ref:g,...it}):React$2.createElement(me,{ref:g,...it}))}let X=K(Ie$1),me=K(Ae),Fe=K(Le),ze=Object.assign(X,{Child:Fe,Root:X});var Oe=(it=>(it[it.Open=0]="Open",it[it.Closed=1]="Closed",it))(Oe||{}),he=(it=>(it[it.SetTitleId=0]="SetTitleId",it))(he||{});let Se={0(it,g){return it.titleId===g.id?it:{...it,titleId:g.id}}},k=reactExports.createContext(null);k.displayName="DialogContext";function O(it){let g=reactExports.useContext(k);if(g===null){let et=new Error(`<${it} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,O),et}return g}function Ie(it,g){return u$4(g.type,Se,it,g)}let V=K(function(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-${et}`,open:ct,onClose:ut,initialFocus:dt,role:ft="dialog",autoFocus:St=!0,__demoMode:kt=!1,unmount:Tt=!1,...Rt}=it,jt=reactExports.useRef(!1);ft=function(){return ft==="dialog"||ft==="alertdialog"?ft:(jt.current||(jt.current=!0,console.warn(`Invalid role [${ft}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let Ft=u$1();ct===void 0&&Ft!==null&&(ct=(Ft&i$1.Open)===i$1.Open);let $t=reactExports.useRef(null),zt=y$3($t,g),Ut=n$1($t),Bt=ct?0:1,[Ht,Jt]=reactExports.useReducer(Ie,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),Zt=o$2(()=>ut(!1)),tn=o$2(mn=>Jt({type:0,id:mn})),nn=l$1()?Bt===0:!1,[rn,on]=te$1(),pn={get current(){var mn;return(mn=Ht.panelRef.current)!=null?mn:$t.current}},dn=b(),{resolveContainers:hn}=R({mainTreeNode:dn,portals:rn,defaultContainers:[pn]}),un=Ft!==null?(Ft&i$1.Closing)===i$1.Closing:!1;y$2(kt||un?!1:nn,{allowed:o$2(()=>{var mn,Tn;return[(Tn=(mn=$t.current)==null?void 0:mn.closest("[data-headlessui-portal]"))!=null?Tn:null]}),disallowed:o$2(()=>{var mn;return[(mn=dn==null?void 0:dn.closest("body > *:not(#headlessui-portal-root)"))!=null?mn:null]})}),R$2(nn,hn,mn=>{mn.preventDefault(),Zt()}),a$2(nn,Ut==null?void 0:Ut.defaultView,mn=>{mn.preventDefault(),mn.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),Zt()}),f$2(kt||un?!1:nn,Ut,hn),m$2(nn,$t,Zt);let[En,wn]=w$3(),Sn=reactExports.useMemo(()=>[{dialogState:Bt,close:Zt,setTitleId:tn,unmount:Tt},Ht],[Bt,Ht,Zt,tn,Tt]),fn=reactExports.useMemo(()=>({open:Bt===0}),[Bt]),xn={ref:zt,id:ot,role:ft,tabIndex:-1,"aria-modal":kt?void 0:Bt===0?!0:void 0,"aria-labelledby":Ht.titleId,"aria-describedby":En,unmount:Tt},an=!f$1(),cn=x.None;nn&&!kt&&(cn|=x.RestoreFocus,cn|=x.TabLock,St&&(cn|=x.AutoFocus),an&&(cn|=x.InitialFocus));let bn=L$1();return React$2.createElement(s$1,null,React$2.createElement(l,{force:!0},React$2.createElement(re$1,null,React$2.createElement(k.Provider,{value:Sn},React$2.createElement(X$1,{target:$t},React$2.createElement(l,{force:!1},React$2.createElement(wn,{slot:fn},React$2.createElement(on,null,React$2.createElement(ye,{initialFocus:dt,initialFocusFallback:$t,containers:hn,features:cn},React$2.createElement(C$1,{value:Zt},bn({ourProps:xn,theirProps:Rt,slot:fn,defaultTag:Me,features:Ge,visible:Bt===0,name:"Dialog"})))))))))))}),Me="div",Ge=O$3.RenderStrategy|O$3.Static;function ke(it,g){let{transition:et=!1,open:ot,...ct}=it,ut=u$1(),dt=it.hasOwnProperty("open")||ut!==null,ft=it.hasOwnProperty("onClose");if(!dt&&!ft)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!dt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!ft)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!ut&&typeof it.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${it.open}`);if(typeof it.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${it.onClose}`);return(ot!==void 0||et)&&!ct.static?React$2.createElement(O$1,null,React$2.createElement(ze,{show:ot,transition:et,unmount:ct.unmount},React$2.createElement(V,{ref:g,...ct}))):React$2.createElement(O$1,null,React$2.createElement(V,{ref:g,open:ot,...ct}))}let we="div";function Be(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-panel-${et}`,transition:ct=!1,...ut}=it,[{dialogState:dt,unmount:ft},St]=O("Dialog.Panel"),kt=y$3(g,St.panelRef),Tt=reactExports.useMemo(()=>({open:dt===0}),[dt]),Rt=o$2(Ut=>{Ut.stopPropagation()}),jt={ref:kt,id:ot,onClick:Rt},Ft=ct?Fe:reactExports.Fragment,$t=ct?{unmount:ft}:{},zt=L$1();return React$2.createElement(Ft,{...$t},zt({ourProps:jt,theirProps:ut,slot:Tt,defaultTag:we,name:"Dialog.Panel"}))}let Ue="div";function He(it,g){let{transition:et=!1,...ot}=it,[{dialogState:ct,unmount:ut}]=O("Dialog.Backdrop"),dt=reactExports.useMemo(()=>({open:ct===0}),[ct]),ft={ref:g,"aria-hidden":!0},St=et?Fe:reactExports.Fragment,kt=et?{unmount:ut}:{},Tt=L$1();return React$2.createElement(St,{...kt},Tt({ourProps:ft,theirProps:ot,slot:dt,defaultTag:Ue,name:"Dialog.Backdrop"}))}let Ne="h2";function We(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-title-${et}`,...ct}=it,[{dialogState:ut,setTitleId:dt}]=O("Dialog.Title"),ft=y$3(g);reactExports.useEffect(()=>(dt(ot),()=>dt(null)),[ot,dt]);let St=reactExports.useMemo(()=>({open:ut===0}),[ut]),kt={ref:ft,id:ot};return L$1()({ourProps:kt,theirProps:ct,slot:St,defaultTag:Ne,name:"Dialog.Title"})}let $e=K(ke),je=K(Be),Dt=K(He),Ye=K(We),yt=Object.assign($e,{Panel:je,Title:Ye,Description:H$1});const navLinks=[{href:"/",label:"Home"},{href:"sign-up",label:"Sign Up"},{href:"contact",label:"Contact Us"},{href:"shop",label:"Shop"},{href:"login",label:"Login"}],cannedPrompts={beginner:[{label:" Social Media Growth Guide",text:"Write a 5-page lead magnet teaching small business owners how to grow their social media following with organic content, engagement, and consistency strategies."},{label:" Email Marketing Mastery",text:"Create a detailed guide on building and nurturing an email list that converts leads into loyal customers with proven automation techniques."},{label:" Personal Branding Blueprint",text:"Write a 5-page blueprint showing entrepreneurs how to define their brand identity, build authority online, and attract ideal clients."},{label:" Design Secrets for Non-Designers",text:"Generate a lead magnet teaching beginners how to design professional graphics using free tools like Canva, including typography and color tips."},{label:" Content Creation Starter Pack",text:"Write a detailed guide helping creators build a content calendar, repurpose videos, and plan content for multiple platforms efficiently."},{label:" The Beginners Guide to Digital Products",text:"Create a 5-page guide explaining how to turn skills into profitable digital products like eBooks, courses, or templates."},{label:" Productivity Hacks for Creators",text:"Generate a guide full of time-saving systems, tools, and automation tricks that help creators stay consistent and organized."},{label:" 7 Steps to Launch Your Online Business",text:"Write a step-by-step roadmap for beginners to start an online business, from idea validation to first sale."},{label:" The Ultimate AI Prompt Guide",text:"Create a 5-page lead magnet showing users how to craft better AI prompts for marketing, writing, and design workflows."},{label:" Monetize Your Music Online",text:"Write a guide showing independent musicians how to sell music, build fanbases, and create recurring revenue from digital content."}],professional:[{label:" Build Your First Website",text:"Create a simple 5-page beginner guide teaching small businesses how to plan, design, and launch their first website using modern no-code tools."},{label:" Create & Sell Digital Templates",text:"Write a guide explaining how to design and sell Canva, Notion, or Google Docs templates that bring consistent passive income."},{label:" Mastering Video Marketing",text:"Generate a 5-page lead magnet teaching creators how to plan, shoot, and promote short-form videos that build trust and conversions."},{label:" Branding Psychology 101",text:"Write a lead magnet breaking down the psychology of color, typography, and emotion in brand design."},{label:" Freelancer Success Playbook",text:"Create a guide showing freelancers how to price their services, close clients, and scale into an agency model."},{label:" The Digital Marketing Roadmap",text:"Write a complete 5-step roadmap for entrepreneurs to master content, SEO, ads, and email marketing for consistent traffic."},{label:" Copywriting for Conversions",text:"Generate a guide that teaches beginners the art of persuasive writing  from headlines to calls-to-action."},{label:" Funnel Building Simplified",text:"Write a 5-page walkthrough on building high-converting funnels using lead magnets, tripwires, and upsells."},{label:" Automate Your Business",text:"Create a guide showing small business owners how to automate repetitive tasks using Zapier, AI, and scheduling tools."},{label:" Data-Driven Marketing",text:"Write a beginner-friendly guide teaching business owners how to track analytics, interpret data, and improve conversions."}],expert:[{label:" The Psychology of Persuasion in Marketing",text:"Write a 5-page academic-style guide exploring how cognitive biases, emotional triggers, and storytelling affect consumer decision-making in marketing and branding."},{label:" The Science of Habit-Building for Creators",text:"Develop a 5-page guide teaching creators how to build long-term consistency by applying behavioral science and habit-formation frameworks to their creative routines."},{label:" The Economics of Attention",text:"Write a thought-provoking lead magnet analyzing how attention has become a modern currency, explaining scarcity, virality, and monetization in the digital economy."},{label:" Design Thinking for Business Innovation",text:"Generate a 5-page teaching resource showing entrepreneurs how to use design thinking methodology to solve business problems and create user-centered products."},{label:" Strategic Positioning for Small Brands",text:"Write an MBA-level breakdown of how to position a brand within competitive markets using differentiation, value perception, and storytelling."},{label:" The Art of Thought Leadership",text:"Create a guide for experts on how to transform knowledge into influence by publishing insights, frameworks, and educational content that attract authority."},{label:" The Systems of Scale",text:"Write a detailed 5-page framework teaching small teams how to transition from chaos to structure using documented workflows, automation, and SOPs."},{label:" Pricing Psychology & Value Perception",text:"Develop a lead magnet explaining how anchoring, decoy pricing, and perceived value shape buyer decisions  with real-world examples and ethical applications."},{label:" The Future of AI in Creative Work",text:"Write an educational report exploring how AI tools are transforming creative industries, ethics, and productivity  with actionable guidance for adaptation."},{label:" Web Design Principles That Convert",text:"Generate a professional-level guide that breaks down visual hierarchy, white space, and conversion-driven design for modern web experiences."},{label:" The Strategic Content Framework",text:"Write a 5-page plan teaching creators how to map content pillars, storytelling arcs, and audience journeys for consistent long-term growth."},{label:" The History of Branding  and What It Teaches Modern Creators",text:"Develop a mini-course-style lead magnet that compares legacy branding (Coca-Cola, Nike, Apple) with modern personal branding on social platforms."},{label:" Ethics & Authenticity in Digital Marketing",text:"Write a reflective guide on maintaining authenticity, transparency, and trust in a world of automation, influencer deals, and AI content."},{label:" Business Models for the Digital Age",text:"Create a 5-page breakdown of proven online business models  subscription, affiliate, info-products, SaaS  including their pros, cons, and margins."},{label:" The Creators Intellectual Property Handbook",text:"Write a guide explaining copyright, licensing, and how creators can protect their work legally when distributing digital products and media."},{label:" Storytelling Frameworks That Sell",text:"Generate a 5-page educational guide unpacking narrative structures like the Heros Journey, PAS, and StoryBrand for use in sales pages and videos."},{label:" The Analytics of Growth",text:"Teach business owners how to interpret engagement metrics, user cohorts, and conversion funnels like a data scientist to make smarter creative decisions."},{label:" Building Community-Driven Brands",text:"Write a 5-page resource on fostering belonging, trust, and shared identity around a brand or product using modern community platforms."},{label:" The Architecture of Influence",text:"Develop a high-level guide mapping how influence spreads through networks, social proof, and credibility  with tactics for ethical persuasion."},{label:" The Modern Creative MBA",text:"Write a 5-page masterclass that condenses key principles of marketing, finance, operations, and leadership for modern digital creators running personal brands."}]},themes=[{label:"Modern Minimal",value:"modern",textColor:"#ffffff",bg:"#fefefe"},{label:"Classic Elegant",value:"classic",textColor:"#ffffff",bg:"#000000"},{label:"Bold Creative",value:"bold",textColor:"#fff",bg:"#0f0f0f"}],themeStyles=[],colorThemes=[{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"dark",label:"Dark",preview:"#030712"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"lime",label:"Lime",preview:"#65a30d"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"steel",label:"Steel",preview:"#475569"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"mocha",label:"Mocha",preview:"#78350f"},{name:"slate",label:"Slate",preview:"#334155"},{name:"sapphire",label:"Sapphire",preview:"#0ea5e9"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"}],fontThemes={modern:{name:"Montserrat",file:"/fonts/Montserrat-Regular.ttf"},classic:{name:"AdobeArabic",file:"/fonts/AdobeArabic-Regular.ttf"},bold:{name:"Bebas Neue",file:"/fonts/Roboto-Regular.ttf"}},Nav=()=>{const{user:it,logout:g}=useAuth(),et=useNavigate(),[ot,ct]=reactExports.useState(!1),ut=useLocation();if(reactExports.useEffect(()=>{ot?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[ot]),["/dashboard","/books","/settings","/prompts","/notifications"].includes(ut.pathname))return null;const dt=navLinks.filter(ft=>!(ft.label==="Home"&&ut.pathname==="/home"||ft.label==="Contact Us"&&ut.pathname==="/contact"));return jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:ft=>ft.stopPropagation(),className:"flex items-center justify-between px-4 h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Link$1,{to:"/",preventScrollReset:!0,children:jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:4.5,delay:2}})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block relative",onMouseEnter:()=>ct(!0),onMouseLeave:()=>ct(!1),children:[jsxRuntimeExports.jsx("button",{type:"button",className:`p-3 bg-muteGrey hover:bg-gray-800 text-white shadow-md transition
      ${ot?"rounded-t-lg":"rounded-lg"}`,children:jsxRuntimeExports.jsx(Cog,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`absolute right-0 top-full flex flex-col items-center gap-2 
                 bg-muteGrey  shadow-xl
                py-2 px-1 mt-[-2px] z-50
                transition-all duration-150 ease-out rounded-b-lg 
                ${ot?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/home"),className:"p-2 hover:bg-gray-800/60  transition",title:"Home",children:jsxRuntimeExports.jsx(House,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),it?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/dashboard"),className:"p-2 hover:bg-gray-800/60  transition",title:"Dashboard",children:jsxRuntimeExports.jsx(LayoutDashboard,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Help",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g(),className:"p-2 hover:bg-gray-800/60  transition",title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/sign-up"),className:"p-2 hover:bg-gray-800/60  transition",title:"Sign Up",children:jsxRuntimeExports.jsx(Crown,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/shop"),className:"p-2 hover:bg-gray-800/60  transition",title:"Shop",children:jsxRuntimeExports.jsx(Store,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/login"),className:"p-2 hover:bg-gray-800/60  transition",title:"Login",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Contact",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>ct(!ot),className:"text-white focus:outline-none z-50 relative",children:ot?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze,{show:ot&&window.innerWidth<768,enter:"transition duration-300 ease-out",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition duration-200 ease-in",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:ft=>jsxRuntimeExports.jsxs("div",{ref:ft,className:"md:hidden fixed top-0 left-0 w-full h-screen bg-bioModal z-40 flex flex-col items-center pt-24 space-y-4 lead-text",children:[dt.map(St=>St.label==="Home"&&ut.pathname==="/home"||it&&(St.label==="Sign Up"||St.label==="Contact Us"||St.label==="Shop")?null:St.label==="Login"&&it?jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",onClick:()=>ct(!1),className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Dashboard"},"user-dashboard"):jsxRuntimeExports.jsx("a",{href:St.href,onClick:kt=>handleNavClick(kt,St.href),className:"font-montserrat text-md text-white-400 hover:text-white transition-all cursor-pointer",children:St.label},St.label)),it&&jsxRuntimeExports.jsx("button",{onClick:()=>{g(),ct(!1)},className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Logout"})]})})]})};function OutOfSlotsModal({open:it,onClose:g,onRefresh:et,isFirstTime:ot=!1}){if(!it)return null;const ct=ot?"Welcome to Cre8tly Studio":"Out of Lead Magnet Slots",ut=ot?`Welcome to Cre8tly Studio, your creative command center for building
       high-converting lead magnets in minutes. 
       To start creating, visit Cre8tlyStudio.com in your browser and
       purchase your first token pack. 
       Once purchased, click below to refresh your account and begin.`:`Youve reached your current plans limit.
       To purchase more tokens or lifetime unlocks, visit Cre8tlyStudio.com
       in your browser and log in with the same account.
       Once purchased, click below to refresh your slots instantly.`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:ct}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:ut}),jsxRuntimeExports.jsx("button",{onClick:async()=>{et&&await et(),g&&g()},className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:ot?"Ive Purchased My First Pack":"Ive Purchased Tokens"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"block mx-auto mt-4 text-sm text-gray-400 hover:text-white transition",children:"Cancel"})]})]})})}const PricingSection=()=>{const{user:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=()=>{window.location.href="/sign-up"};return jsxRuntimeExports.jsxs("section",{id:"pricing",className:"px-6 py-24 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-10 design-text",children:"Simple Pricing"}),jsxRuntimeExports.jsxs(motion.div,{className:"relative rounded-2xl max-w-md mx-auto overflow-hidden",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 p-[2px] rounded-2xl 
              bg-[linear-gradient(90deg,#00ff99,#7bed9f,#00ff99)] 
              bg-[length:200%_200%] 
              animate-gradientPulse`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-2xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-10 border border-transparent rounded-2xl shadow-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-blue to-purple-500 bg-clip-text text-white design-text",children:"$47"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 type-text",children:"One-time payment for 5 lead magnet slots"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-full bg-royalPurple 
                text-white text-xl font-semibold py-4 rounded-xl 
                hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)]
                transition shadow-lg design-text`,children:"Sign Up"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-silver mt-3",children:" Secure checkout"})]}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:g,onClose:()=>et(!1),isFirstTime:!it||!it.slot_count||it.slot_count===0})]})},steps=[{icon:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-4,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},children:jsxRuntimeExports.jsx(SquareTerminal,{className:"w-10 h-10 text-white drop-shadow-[0_0_6px_rgba(255,255,255,0.5)]"})}),title:"1. Add Your Prompt",desc:"Describe your audience, product, or idea in one line, our AI expands it into full content instantly."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2.8,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Bot,{className:"w-10 h-10 text-white drop-shadow-[0_0_8px_rgba(103,15,231,0.6)]"})}),title:"2. AI Creates Your Digital Product",desc:"We generate up to 50 full A4 pages with examples, insights, and structure, styled with professional themes."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Download,{className:"w-10 h-10 text-green drop-shadow-[0_0_8px_rgba(123,237,159,0.6)]"})}),title:"3. Download & Launch",desc:"Receive a polished PDF ready to use instantly, perfect for selling, sharing, or capturing new leads."}];function HowItWorks(){return jsxRuntimeExports.jsxs("section",{id:"how",className:"px-6 py-24 text-center bg-metalBlack relative overflow-hidden rounded-2xl",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-br from-[#0b0f1a] via-[#111827] to-[#0b0f1a] opacity-40",animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{repeat:1/0,duration:20,ease:"linear"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-16 text-white font-semibold design-text",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid gap-10 sm:grid-cols-3",children:steps.map((it,g)=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},className:"relative rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl p-[2px] 
                bg-[linear-gradient(270deg,#7bed9f,#670fe7,#7bed9f)] 
                bg-[length:300%_300%] animate-shine`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-800 mb-6 mx-auto shadow-[0_0_20px_rgba(100,255,200,0.25)]",children:it.icon}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-white lead-text",children:it.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed lead-text",children:it.desc})]})]},g))}),jsxRuntimeExports.jsx(PricingSection,{})]})]})}function VideoPlayer(){const it=reactExports.useRef(null),[g,et]=reactExports.useState(!0),[ot,ct]=reactExports.useState(!1),ut=()=>et(St=>!St),dt=async()=>{const St=it.current;if(St)if(St.requestFullscreen){await St.requestFullscreen(),ct(!0);try{await screen.orientation.lock("landscape")}catch{}}else St.webkitEnterFullscreen&&(St.webkitEnterFullscreen(),ct(!0))},ft=()=>{const St=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ct(!!St)};return typeof window<"u"&&(document.onfullscreenchange=ft,document.onwebkitfullscreenchange=ft),jsxRuntimeExports.jsxs("section",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800 mt-10",children:[jsxRuntimeExports.jsxs("video",{ref:it,className:"w-full h-full object-cover rounded-2xl",autoPlay:!0,loop:!0,playsInline:!0,muted:g,preload:"metadata",poster:"/assets/video-thumbnail.jpg",children:[jsxRuntimeExports.jsx("source",{src:"https://cre8tlystudio.nyc3.cdn.digitaloceanspaces.com/Videos/new_cre8tly_video_v2.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:ut,className:"bg-black/60 text-white px-4 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:g?" Unmute":" Mute"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black/60 text-white px-3 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:ot?" Exit":" Fullscreen"})]})]})}function PremiumEbooksCTA(){return jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"relative mt-28 mb-20 rounded-2xl overflow-hidden bg-metalBlack p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 blur-3xl opacity-40"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-10 text-center lg:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl sm:text-5xl font-extrabold mb-6 bg-white bg-clip-text text-transparent design-text leading-[1.25] pb-1",children:"Ready to Go Deeper?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:["Unlock our full library of"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"premium guides"})," ","designed to help entrepreneurs, marketers, and creators dominate their niche. Each guide is downloadable instantly."]}),jsxRuntimeExports.jsx("a",{href:"/shop",className:"inline-block px-8 py-4 bg-royalPurple text-white text-xl font-semibold rounded-lg shadow-lg hover:opacity-90 transition-all duration-300 transform hover:scale-[1.03] design-text",children:" Browse Premium Guides"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full lg:w-auto",children:jsxRuntimeExports.jsx("img",{src:ebookCover,alt:"Ebook Collection Preview",className:"rounded-xl w-80 sm:w-96 border border-white/10 "})})]})]})}function AnimatedLogo(){return jsxRuntimeExports.jsx(motion.img,{src:headerLogo,alt:"Logo",className:"w-32 h-32 relative z-10",initial:{scale:.98,filter:"drop-shadow(0 0 0px rgba(0,255,204,0))"},animate:{scale:[1,1.05,1],filter:["drop-shadow(0 0 0px rgba(0,255,204,0))","drop-shadow(0 0 12px rgba(24, 0, 156, 1))","drop-shadow(0 0 0px rgba(0,255,204,0))"]},transition:{duration:5,ease:"easeInOut",repeat:1/0},whileHover:{scale:1.1,filter:"drop-shadow(0 0 16px rgba(0,255,204,1))",transition:{type:"spring",stiffness:150}}})}const Landing=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full text-white flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-32 relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedLogo,{}),jsxRuntimeExports.jsxs("h1",{className:"relative inline-block text-white text-3xl sm:text-6xl lg:text-8xl font-extrabold design-text ",children:["Cre8tly Studio",jsxRuntimeExports.jsx("span",{className:"absolute -top-2 sm:-top-1 -right-8 sm:-right-10 text-green text-2xl sm:text-3xl font-bold lead-text",children:"AI"})]}),jsxRuntimeExports.jsx(motion.h2,{className:"text-5xl sm:text-7xl font-extrabold leading-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:"Create High-Converting Lead Magnets in Seconds"}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-6 text-xl sm:text-2xl text-gray-300 max-w-2xl lead-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["The fastest way to turn your idea into a",jsxRuntimeExports.jsx("br",{})," sellable digital product."]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-8 text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto font-light leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Cre8tly Studio is an ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"AI-powered  digital product builder"})," that helps ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"creators, coaches, and entrepreneurs"})," design professional digital products, eBooks, and brand assets in seconds. Boost conversions, grow your email list, and sell faster with ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"automated content creation"}),", pro-level cover design, and ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"instant PDF generation"})," all in one platform built for modern online businesses."]}),jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl mt-12 rounded-2xl overflow-hidden",children:jsxRuntimeExports.jsx(VideoPlayer,{})})]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-16 mb-10 text-3xl sm:text-4xl text-center font-semibold leading-snug text-green tracking-tight max-w-4xl mx-auto design-text",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:["Creators dont dream about success",jsxRuntimeExports.jsx("br",{})," they generate it"]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 60",className:"w-56 sm:w-72 mx-auto mt-2 mb-20",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"underline-gradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("path",{d:"M10 25 Q200 -10 390 25",stroke:"url(#underline-gradient)",strokeWidth:"5",fill:"transparent",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(PremiumEbooksCTA,{})]});function LoginPage(){const{login:it}=useAuth(),g=useNavigate(),[et,ot]=reactExports.useState({email:"",password:""}),[ct,ut]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(!1),jt=$t=>{ot({...et,[$t.target.name]:$t.target.value})},Ft=async $t=>{var zt,Ut;$t.preventDefault(),ut(!0),kt("");try{await it(et.email,et.password),g("/dashboard")}catch(Bt){(Ut=(zt=Bt.response)==null?void 0:zt.data)!=null&&Ut.message?kt(Bt.response.data.message):kt("Login failed. Please try again later.")}finally{ut(!1)}};return reactExports.useEffect(()=>{if(St){Rt(!1);const $t=setTimeout(()=>Rt(!0),4e3),zt=setTimeout(()=>kt(""),5e3);return()=>{clearTimeout($t),clearTimeout(zt)}}},[St]),jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Log in to your account to continue creating and managing your digital products."}),St&&jsxRuntimeExports.jsx("div",{className:`bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Tt?"opacity-0":"opacity-100"}`,children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:jt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:et.password,onChange:jt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ct?"Logging In...":"Log In"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"text-green hover:underline",children:"Forgot Password?"})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Dont have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/sign-up",className:"text-green hover:underline",children:"Sign Up"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(it,g){return it===g||it!==it&&g!==g}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(it,g){for(var et=it.length;et--;)if(eq$1(it[et][0],g))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(it){var g=this.__data__,et=assocIndexOf$3(g,it);if(et<0)return!1;var ot=g.length-1;return et==ot?g.pop():splice.call(g,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(it){var g=this.__data__,et=assocIndexOf$2(g,it);return et<0?void 0:g[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(it){return assocIndexOf$1(this.__data__,it)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(it,g){var et=this.__data__,ot=assocIndexOf(et,it);return ot<0?(++this.size,et.push([it,g])):et[ot][1]=g,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(it){var g=this.__data__,et=g.delete(it);return this.size=g.size,et}var _stackDelete=stackDelete$1;function stackGet$1(it){return this.__data__.get(it)}var _stackGet=stackGet$1;function stackHas$1(it){return this.__data__.has(it)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(it){var g=hasOwnProperty$8.call(it,symToStringTag$1),et=it[symToStringTag$1];try{it[symToStringTag$1]=void 0;var ot=!0}catch{}var ct=nativeObjectToString$1.call(it);return ot&&(g?it[symToStringTag$1]=et:delete it[symToStringTag$1]),ct}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(it){return nativeObjectToString.call(it)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(it){return it==null?it===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(it)?getRawTag(it):objectToString(it)}var _baseGetTag=baseGetTag$4;function isObject$2(it){var g=typeof it;return it!=null&&(g=="object"||g=="function")}var isObject_1=isObject$2,baseGetTag$3=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(it){if(!isObject$1(it))return!1;var g=baseGetTag$3(it);return g==funcTag$1||g==genTag||g==asyncTag||g==proxyTag}var isFunction_1=isFunction$3,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var it=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function isMasked$1(it){return!!maskSrcKey&&maskSrcKey in it}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(it){if(it!=null){try{return funcToString$1.call(it)}catch{}try{return it+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(it){if(!isObject(it)||isMasked(it))return!1;var g=isFunction$2(it)?reIsNative:reIsHostCtor;return g.test(toSource$1(it))}var _baseIsNative=baseIsNative$1;function getValue$1(it,g){return it==null?void 0:it[g]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(it,g){var et=getValue(it,g);return baseIsNative(et)?et:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(it){var g=this.has(it)&&delete this.__data__[it];return this.size-=g?1:0,g}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(it){var g=this.__data__;if(nativeCreate$2){var et=g[it];return et===HASH_UNDEFINED$2?void 0:et}return hasOwnProperty$6.call(g,it)?g[it]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(it){var g=this.__data__;return nativeCreate$1?g[it]!==void 0:hasOwnProperty$5.call(g,it)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(it,g){var et=this.__data__;return this.size+=this.has(it)?0:1,et[it]=nativeCreate&&g===void 0?HASH_UNDEFINED$1:g,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(it){var g=typeof it;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?it!=="__proto__":it===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(it,g){var et=it.__data__;return isKeyable(g)?et[typeof g=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(it){var g=getMapData$3(this,it).delete(it);return this.size-=g?1:0,g}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(it){return getMapData$2(this,it).get(it)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(it){return getMapData$1(this,it).has(it)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(it,g){var et=getMapData(this,it),ot=et.size;return et.set(it,g),this.size+=et.size==ot?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(it,g){var et=this.__data__;if(et instanceof ListCache$1){var ot=et.__data__;if(!Map$2||ot.length<LARGE_ARRAY_SIZE-1)return ot.push([it,g]),this.size=++et.size,this;et=this.__data__=new MapCache$1(ot)}return et.set(it,g),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(it){var g=this.__data__=new ListCache(it);this.size=g.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(it){return this.__data__.set(it,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(it){return this.__data__.has(it)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(it){var g=-1,et=it==null?0:it.length;for(this.__data__=new MapCache;++g<et;)this.add(it[g])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(it,g){for(var et=-1,ot=it==null?0:it.length;++et<ot;)if(g(it[et],et,it))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(it,g){return it.has(g)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$3,ft=it.length,St=g.length;if(ft!=St&&!(dt&&St>ft))return!1;var kt=ut.get(it),Tt=ut.get(g);if(kt&&Tt)return kt==g&&Tt==it;var Rt=-1,jt=!0,Ft=et&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ut.set(it,g),ut.set(g,it);++Rt<ft;){var $t=it[Rt],zt=g[Rt];if(ot)var Ut=dt?ot(zt,$t,Rt,g,it,ut):ot($t,zt,Rt,it,g,ut);if(Ut!==void 0){if(Ut)continue;jt=!1;break}if(Ft){if(!arraySome(g,function(Bt,Ht){if(!cacheHas(Ft,Ht)&&($t===Bt||ct($t,Bt,et,ot,ut)))return Ft.push(Ht)})){jt=!1;break}}else if(!($t===zt||ct($t,zt,et,ot,ut))){jt=!1;break}}return ut.delete(it),ut.delete(g),jt}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot,ct){et[++g]=[ct,ot]}),et}var _mapToArray=mapToArray$1;function setToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot){et[++g]=ot}),et}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(it,g,et,ot,ct,ut,dt){switch(et){case dataViewTag$2:if(it.byteLength!=g.byteLength||it.byteOffset!=g.byteOffset)return!1;it=it.buffer,g=g.buffer;case arrayBufferTag$1:return!(it.byteLength!=g.byteLength||!ut(new Uint8Array$1(it),new Uint8Array$1(g)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+it,+g);case errorTag$1:return it.name==g.name&&it.message==g.message;case regexpTag$1:case stringTag$1:return it==g+"";case mapTag$2:var ft=mapToArray;case setTag$2:var St=ot&COMPARE_PARTIAL_FLAG$2;if(ft||(ft=setToArray),it.size!=g.size&&!St)return!1;var kt=dt.get(it);if(kt)return kt==g;ot|=COMPARE_UNORDERED_FLAG,dt.set(it,g);var Tt=equalArrays$1(ft(it),ft(g),ot,ct,ut,dt);return dt.delete(it),Tt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(it)==symbolValueOf.call(g)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(it,g){for(var et=-1,ot=g.length,ct=it.length;++et<ot;)it[ct+et]=g[et];return it}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(it,g,et){var ot=g(it);return isArray$2(it)?ot:arrayPush(ot,et(it))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(it,g){for(var et=-1,ot=it==null?0:it.length,ct=0,ut=[];++et<ot;){var dt=it[et];g(dt,et,it)&&(ut[ct++]=dt)}return ut}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(it){return it==null?[]:(it=Object(it),arrayFilter(nativeGetSymbols(it),function(g){return propertyIsEnumerable$1.call(it,g)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(it,g){for(var et=-1,ot=Array(it);++et<it;)ot[et]=g(et);return ot}var _baseTimes=baseTimes$1;function isObjectLike$4(it){return it!=null&&typeof it=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(it){return isObjectLike$3(it)&&baseGetTag$2(it)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(it){return isObjectLike$2(it)&&hasOwnProperty$4.call(it,"callee")&&!propertyIsEnumerable.call(it,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(it,g){var et=_root,ot=stubFalse_1,ct=g&&!g.nodeType&&g,ut=ct&&!0&&it&&!it.nodeType&&it,dt=ut&&ut.exports===ct,ft=dt?et.Buffer:void 0,St=ft?ft.isBuffer:void 0,kt=St||ot;it.exports=kt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(it,g){var et=typeof it;return g=g??MAX_SAFE_INTEGER$2,!!g&&(et=="number"||et!="symbol"&&reIsUint.test(it))&&it>-1&&it%1==0&&it<g}var _isIndex=isIndex$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(it){return isObjectLike$1(it)&&isLength$1(it.length)&&!!typedArrayTags[baseGetTag$1(it)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(it){return function(g){return it(g)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(it,g){var et=_freeGlobal,ot=g&&!g.nodeType&&g,ct=ot&&!0&&it&&!it.nodeType&&it,ut=ct&&ct.exports===ot,dt=ut&&et.process,ft=function(){try{var St=ct&&ct.require&&ct.require("util").types;return St||dt&&dt.binding&&dt.binding("util")}catch{}}();it.exports=ft})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(it,g){var et=isArray$1(it),ot=!et&&isArguments(it),ct=!et&&!ot&&isBuffer$1(it),ut=!et&&!ot&&!ct&&isTypedArray$1(it),dt=et||ot||ct||ut,ft=dt?baseTimes(it.length,String):[],St=ft.length;for(var kt in it)(g||hasOwnProperty$3.call(it,kt))&&!(dt&&(kt=="length"||ct&&(kt=="offset"||kt=="parent")||ut&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||isIndex(kt,St)))&&ft.push(kt);return ft}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(it){var g=it&&it.constructor,et=typeof g=="function"&&g.prototype||objectProto$3;return it===et}var _isPrototype=isPrototype$1;function overArg$1(it,g){return function(et){return it(g(et))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(it){if(!isPrototype(it))return nativeKeys(it);var g=[];for(var et in Object(it))hasOwnProperty$2.call(it,et)&&et!="constructor"&&g.push(et);return g}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength=isLength_1;function isArrayLike$1(it){return it!=null&&isLength(it.length)&&!isFunction$1(it)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$2(it){return isArrayLike(it)?arrayLikeKeys(it):baseKeys(it)}var keys_1=keys$2,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(it){return baseGetAllKeys(it,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$1,ft=getAllKeys(it),St=ft.length,kt=getAllKeys(g),Tt=kt.length;if(St!=Tt&&!dt)return!1;for(var Rt=St;Rt--;){var jt=ft[Rt];if(!(dt?jt in g:hasOwnProperty$1.call(g,jt)))return!1}var Ft=ut.get(it),$t=ut.get(g);if(Ft&&$t)return Ft==g&&$t==it;var zt=!0;ut.set(it,g),ut.set(g,it);for(var Ut=dt;++Rt<St;){jt=ft[Rt];var Bt=it[jt],Ht=g[jt];if(ot)var Jt=dt?ot(Ht,Bt,jt,g,it,ut):ot(Bt,Ht,jt,it,g,ut);if(!(Jt===void 0?Bt===Ht||ct(Bt,Ht,et,ot,ut):Jt)){zt=!1;break}Ut||(Ut=jt=="constructor")}if(zt&&!Ut){var Zt=it.constructor,tn=g.constructor;Zt!=tn&&"constructor"in it&&"constructor"in g&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof tn=="function"&&tn instanceof tn)&&(zt=!1)}return ut.delete(it),ut.delete(g),zt}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(it){var g=baseGetTag(it),et=g==objectTag$1?it.constructor:void 0,ot=et?toSource(et):"";if(ot)switch(ot){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return g});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(it,g,et,ot,ct,ut){var dt=isArray(it),ft=isArray(g),St=dt?arrayTag:getTag(it),kt=ft?arrayTag:getTag(g);St=St==argsTag?objectTag:St,kt=kt==argsTag?objectTag:kt;var Tt=St==objectTag,Rt=kt==objectTag,jt=St==kt;if(jt&&isBuffer(it)){if(!isBuffer(g))return!1;dt=!0,Tt=!1}if(jt&&!Tt)return ut||(ut=new Stack),dt||isTypedArray(it)?equalArrays(it,g,et,ot,ct,ut):equalByTag(it,g,St,et,ot,ct,ut);if(!(et&COMPARE_PARTIAL_FLAG)){var Ft=Tt&&hasOwnProperty.call(it,"__wrapped__"),$t=Rt&&hasOwnProperty.call(g,"__wrapped__");if(Ft||$t){var zt=Ft?it.value():it,Ut=$t?g.value():g;return ut||(ut=new Stack),ct(zt,Ut,et,ot,ut)}}return jt?(ut||(ut=new Stack),equalObjects(it,g,et,ot,ct,ut)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(it,g,et,ot,ct){return it===g?!0:it==null||g==null||!isObjectLike(it)&&!isObjectLike(g)?it!==it&&g!==g:baseIsEqualDeep(it,g,et,ot,baseIsEqual$1,ct)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(it,g){return baseIsEqual(it,g)}var isEqual_1$1=isEqual,quill={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(it,g){(function(ot,ct){it.exports=ct()})(typeof self<"u"?self:commonjsGlobal,function(){return function(et){var ot={};function ct(ut){if(ot[ut])return ot[ut].exports;var dt=ot[ut]={i:ut,l:!1,exports:{}};return et[ut].call(dt.exports,dt,dt.exports,ct),dt.l=!0,dt.exports}return ct.m=et,ct.c=ot,ct.d=function(ut,dt,ft){ct.o(ut,dt)||Object.defineProperty(ut,dt,{configurable:!1,enumerable:!0,get:ft})},ct.n=function(ut){var dt=ut&&ut.__esModule?function(){return ut.default}:function(){return ut};return ct.d(dt,"a",dt),dt},ct.o=function(ut,dt){return Object.prototype.hasOwnProperty.call(ut,dt)},ct.p="",ct(ct.s=109)}([function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(17),dt=ct(18),ft=ct(19),St=ct(45),kt=ct(46),Tt=ct(47),Rt=ct(48),jt=ct(49),Ft=ct(12),$t=ct(32),zt=ct(33),Ut=ct(31),Bt=ct(1),Ht={Scope:Bt.Scope,create:Bt.create,find:Bt.find,query:Bt.query,register:Bt.register,Container:ut.default,Format:dt.default,Leaf:ft.default,Embed:Rt.default,Scroll:St.default,Block:Tt.default,Inline:kt.default,Text:jt.default,Attributor:{Attribute:Ft.default,Class:$t.default,Style:zt.default,Store:Ut.default}};ot.default=Ht},function(et,ot,ct){var ut=this&&this.__extends||function(){var Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Ht){Bt.__proto__=Ht}||function(Bt,Ht){for(var Jt in Ht)Ht.hasOwnProperty(Jt)&&(Bt[Jt]=Ht[Jt])};return function(Bt,Ht){Ut(Bt,Ht);function Jt(){this.constructor=Bt}Bt.prototype=Ht===null?Object.create(Ht):(Jt.prototype=Ht.prototype,new Jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=function(Ut){ut(Bt,Ut);function Bt(Ht){var Jt=this;return Ht="[Parchment] "+Ht,Jt=Ut.call(this,Ht)||this,Jt.message=Ht,Jt.name=Jt.constructor.name,Jt}return Bt}(Error);ot.ParchmentError=dt;var ft={},St={},kt={},Tt={};ot.DATA_KEY="__blot";var Rt;(function(Ut){Ut[Ut.TYPE=3]="TYPE",Ut[Ut.LEVEL=12]="LEVEL",Ut[Ut.ATTRIBUTE=13]="ATTRIBUTE",Ut[Ut.BLOT=14]="BLOT",Ut[Ut.INLINE=7]="INLINE",Ut[Ut.BLOCK=11]="BLOCK",Ut[Ut.BLOCK_BLOT=10]="BLOCK_BLOT",Ut[Ut.INLINE_BLOT=6]="INLINE_BLOT",Ut[Ut.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Ut[Ut.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Ut[Ut.ANY=15]="ANY"})(Rt=ot.Scope||(ot.Scope={}));function jt(Ut,Bt){var Ht=$t(Ut);if(Ht==null)throw new dt("Unable to create "+Ut+" blot");var Jt=Ht,Zt=Ut instanceof Node||Ut.nodeType===Node.TEXT_NODE?Ut:Jt.create(Bt);return new Jt(Zt,Bt)}ot.create=jt;function Ft(Ut,Bt){return Bt===void 0&&(Bt=!1),Ut==null?null:Ut[ot.DATA_KEY]!=null?Ut[ot.DATA_KEY].blot:Bt?Ft(Ut.parentNode,Bt):null}ot.find=Ft;function $t(Ut,Bt){Bt===void 0&&(Bt=Rt.ANY);var Ht;if(typeof Ut=="string")Ht=Tt[Ut]||ft[Ut];else if(Ut instanceof Text||Ut.nodeType===Node.TEXT_NODE)Ht=Tt.text;else if(typeof Ut=="number")Ut&Rt.LEVEL&Rt.BLOCK?Ht=Tt.block:Ut&Rt.LEVEL&Rt.INLINE&&(Ht=Tt.inline);else if(Ut instanceof HTMLElement){var Jt=(Ut.getAttribute("class")||"").split(/\s+/);for(var Zt in Jt)if(Ht=St[Jt[Zt]],Ht)break;Ht=Ht||kt[Ut.tagName]}return Ht==null?null:Bt&Rt.LEVEL&Ht.scope&&Bt&Rt.TYPE&Ht.scope?Ht:null}ot.query=$t;function zt(){for(var Ut=[],Bt=0;Bt<arguments.length;Bt++)Ut[Bt]=arguments[Bt];if(Ut.length>1)return Ut.map(function(Zt){return zt(Zt)});var Ht=Ut[0];if(typeof Ht.blotName!="string"&&typeof Ht.attrName!="string")throw new dt("Invalid definition");if(Ht.blotName==="abstract")throw new dt("Cannot register abstract class");if(Tt[Ht.blotName||Ht.attrName]=Ht,typeof Ht.keyName=="string")ft[Ht.keyName]=Ht;else if(Ht.className!=null&&(St[Ht.className]=Ht),Ht.tagName!=null){Array.isArray(Ht.tagName)?Ht.tagName=Ht.tagName.map(function(Zt){return Zt.toUpperCase()}):Ht.tagName=Ht.tagName.toUpperCase();var Jt=Array.isArray(Ht.tagName)?Ht.tagName:[Ht.tagName];Jt.forEach(function(Zt){(kt[Zt]==null||Ht.className==null)&&(kt[Zt]=Ht)})}return Ht}ot.register=zt},function(et,ot,ct){var ut=ct(51),dt=ct(11),ft=ct(3),St=ct(20),kt=String.fromCharCode(0),Tt=function(Rt){Array.isArray(Rt)?this.ops=Rt:Rt!=null&&Array.isArray(Rt.ops)?this.ops=Rt.ops:this.ops=[]};Tt.prototype.insert=function(Rt,jt){var Ft={};return Rt.length===0?this:(Ft.insert=Rt,jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&(Ft.attributes=jt),this.push(Ft))},Tt.prototype.delete=function(Rt){return Rt<=0?this:this.push({delete:Rt})},Tt.prototype.retain=function(Rt,jt){if(Rt<=0)return this;var Ft={retain:Rt};return jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&(Ft.attributes=jt),this.push(Ft)},Tt.prototype.push=function(Rt){var jt=this.ops.length,Ft=this.ops[jt-1];if(Rt=ft(!0,{},Rt),typeof Ft=="object"){if(typeof Rt.delete=="number"&&typeof Ft.delete=="number")return this.ops[jt-1]={delete:Ft.delete+Rt.delete},this;if(typeof Ft.delete=="number"&&Rt.insert!=null&&(jt-=1,Ft=this.ops[jt-1],typeof Ft!="object"))return this.ops.unshift(Rt),this;if(dt(Rt.attributes,Ft.attributes)){if(typeof Rt.insert=="string"&&typeof Ft.insert=="string")return this.ops[jt-1]={insert:Ft.insert+Rt.insert},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this;if(typeof Rt.retain=="number"&&typeof Ft.retain=="number")return this.ops[jt-1]={retain:Ft.retain+Rt.retain},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this}}return jt===this.ops.length?this.ops.push(Rt):this.ops.splice(jt,0,Rt),this},Tt.prototype.chop=function(){var Rt=this.ops[this.ops.length-1];return Rt&&Rt.retain&&!Rt.attributes&&this.ops.pop(),this},Tt.prototype.filter=function(Rt){return this.ops.filter(Rt)},Tt.prototype.forEach=function(Rt){this.ops.forEach(Rt)},Tt.prototype.map=function(Rt){return this.ops.map(Rt)},Tt.prototype.partition=function(Rt){var jt=[],Ft=[];return this.forEach(function($t){var zt=Rt($t)?jt:Ft;zt.push($t)}),[jt,Ft]},Tt.prototype.reduce=function(Rt,jt){return this.ops.reduce(Rt,jt)},Tt.prototype.changeLength=function(){return this.reduce(function(Rt,jt){return jt.insert?Rt+St.length(jt):jt.delete?Rt-jt.delete:Rt},0)},Tt.prototype.length=function(){return this.reduce(function(Rt,jt){return Rt+St.length(jt)},0)},Tt.prototype.slice=function(Rt,jt){Rt=Rt||0,typeof jt!="number"&&(jt=1/0);for(var Ft=[],$t=St.iterator(this.ops),zt=0;zt<jt&&$t.hasNext();){var Ut;zt<Rt?Ut=$t.next(Rt-zt):(Ut=$t.next(jt-zt),Ft.push(Ut)),zt+=St.length(Ut)}return new Tt(Ft)},Tt.prototype.compose=function(Rt){var jt=St.iterator(this.ops),Ft=St.iterator(Rt.ops),$t=[],zt=Ft.peek();if(zt!=null&&typeof zt.retain=="number"&&zt.attributes==null){for(var Ut=zt.retain;jt.peekType()==="insert"&&jt.peekLength()<=Ut;)Ut-=jt.peekLength(),$t.push(jt.next());zt.retain-Ut>0&&Ft.next(zt.retain-Ut)}for(var Bt=new Tt($t);jt.hasNext()||Ft.hasNext();)if(Ft.peekType()==="insert")Bt.push(Ft.next());else if(jt.peekType()==="delete")Bt.push(jt.next());else{var Ht=Math.min(jt.peekLength(),Ft.peekLength()),Jt=jt.next(Ht),Zt=Ft.next(Ht);if(typeof Zt.retain=="number"){var tn={};typeof Jt.retain=="number"?tn.retain=Ht:tn.insert=Jt.insert;var nn=St.attributes.compose(Jt.attributes,Zt.attributes,typeof Jt.retain=="number");if(nn&&(tn.attributes=nn),Bt.push(tn),!Ft.hasNext()&&dt(Bt.ops[Bt.ops.length-1],tn)){var rn=new Tt(jt.rest());return Bt.concat(rn).chop()}}else typeof Zt.delete=="number"&&typeof Jt.retain=="number"&&Bt.push(Zt)}return Bt.chop()},Tt.prototype.concat=function(Rt){var jt=new Tt(this.ops.slice());return Rt.ops.length>0&&(jt.push(Rt.ops[0]),jt.ops=jt.ops.concat(Rt.ops.slice(1))),jt},Tt.prototype.diff=function(Rt,jt){if(this.ops===Rt.ops)return new Tt;var Ft=[this,Rt].map(function(Ht){return Ht.map(function(Jt){if(Jt.insert!=null)return typeof Jt.insert=="string"?Jt.insert:kt;var Zt=Ht===Rt?"on":"with";throw new Error("diff() called "+Zt+" non-document")}).join("")}),$t=new Tt,zt=ut(Ft[0],Ft[1],jt),Ut=St.iterator(this.ops),Bt=St.iterator(Rt.ops);return zt.forEach(function(Ht){for(var Jt=Ht[1].length;Jt>0;){var Zt=0;switch(Ht[0]){case ut.INSERT:Zt=Math.min(Bt.peekLength(),Jt),$t.push(Bt.next(Zt));break;case ut.DELETE:Zt=Math.min(Jt,Ut.peekLength()),Ut.next(Zt),$t.delete(Zt);break;case ut.EQUAL:Zt=Math.min(Ut.peekLength(),Bt.peekLength(),Jt);var tn=Ut.next(Zt),nn=Bt.next(Zt);dt(tn.insert,nn.insert)?$t.retain(Zt,St.attributes.diff(tn.attributes,nn.attributes)):$t.push(nn).delete(Zt);break}Jt-=Zt}}),$t.chop()},Tt.prototype.eachLine=function(Rt,jt){jt=jt||`
`;for(var Ft=St.iterator(this.ops),$t=new Tt,zt=0;Ft.hasNext();){if(Ft.peekType()!=="insert")return;var Ut=Ft.peek(),Bt=St.length(Ut)-Ft.peekLength(),Ht=typeof Ut.insert=="string"?Ut.insert.indexOf(jt,Bt)-Bt:-1;if(Ht<0)$t.push(Ft.next());else if(Ht>0)$t.push(Ft.next(Ht));else{if(Rt($t,Ft.next(1).attributes||{},zt)===!1)return;zt+=1,$t=new Tt}}$t.length()>0&&Rt($t,{},zt)},Tt.prototype.transform=function(Rt,jt){if(jt=!!jt,typeof Rt=="number")return this.transformPosition(Rt,jt);for(var Ft=St.iterator(this.ops),$t=St.iterator(Rt.ops),zt=new Tt;Ft.hasNext()||$t.hasNext();)if(Ft.peekType()==="insert"&&(jt||$t.peekType()!=="insert"))zt.retain(St.length(Ft.next()));else if($t.peekType()==="insert")zt.push($t.next());else{var Ut=Math.min(Ft.peekLength(),$t.peekLength()),Bt=Ft.next(Ut),Ht=$t.next(Ut);if(Bt.delete)continue;Ht.delete?zt.push(Ht):zt.retain(Ut,St.attributes.transform(Bt.attributes,Ht.attributes,jt))}return zt.chop()},Tt.prototype.transformPosition=function(Rt,jt){jt=!!jt;for(var Ft=St.iterator(this.ops),$t=0;Ft.hasNext()&&$t<=Rt;){var zt=Ft.peekLength(),Ut=Ft.peekType();if(Ft.next(),Ut==="delete"){Rt-=Math.min(zt,Rt-$t);continue}else Ut==="insert"&&($t<Rt||!jt)&&(Rt+=zt);$t+=zt}return Rt},et.exports=Tt},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut=Object.prototype.toString,dt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,St=function(Ft){return typeof Array.isArray=="function"?Array.isArray(Ft):ut.call(Ft)==="[object Array]"},kt=function(Ft){if(!Ft||ut.call(Ft)!=="[object Object]")return!1;var $t=ct.call(Ft,"constructor"),zt=Ft.constructor&&Ft.constructor.prototype&&ct.call(Ft.constructor.prototype,"isPrototypeOf");if(Ft.constructor&&!$t&&!zt)return!1;var Ut;for(Ut in Ft);return typeof Ut>"u"||ct.call(Ft,Ut)},Tt=function(Ft,$t){dt&&$t.name==="__proto__"?dt(Ft,$t.name,{enumerable:!0,configurable:!0,value:$t.newValue,writable:!0}):Ft[$t.name]=$t.newValue},Rt=function(Ft,$t){if($t==="__proto__")if(ct.call(Ft,$t)){if(ft)return ft(Ft,$t).value}else return;return Ft[$t]};et.exports=function jt(){var Ft,$t,zt,Ut,Bt,Ht,Jt=arguments[0],Zt=1,tn=arguments.length,nn=!1;for(typeof Jt=="boolean"&&(nn=Jt,Jt=arguments[1]||{},Zt=2),(Jt==null||typeof Jt!="object"&&typeof Jt!="function")&&(Jt={});Zt<tn;++Zt)if(Ft=arguments[Zt],Ft!=null)for($t in Ft)zt=Rt(Jt,$t),Ut=Rt(Ft,$t),Jt!==Ut&&(nn&&Ut&&(kt(Ut)||(Bt=St(Ut)))?(Bt?(Bt=!1,Ht=zt&&St(zt)?zt:[]):Ht=zt&&kt(zt)?zt:{},Tt(Jt,{name:$t,newValue:jt(nn,Ht,Ut)})):typeof Ut<"u"&&Tt(Jt,{name:$t,newValue:Ut}));return Jt}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BlockEmbed=ot.bubbleFormats=void 0;var ut=function(){function hn(un,En){for(var wn=0;wn<En.length;wn++){var Sn=En[wn];Sn.enumerable=Sn.enumerable||!1,Sn.configurable=!0,"value"in Sn&&(Sn.writable=!0),Object.defineProperty(un,Sn.key,Sn)}}return function(un,En,wn){return En&&hn(un.prototype,En),wn&&hn(un,wn),un}}(),dt=function hn(un,En,wn){un===null&&(un=Function.prototype);var Sn=Object.getOwnPropertyDescriptor(un,En);if(Sn===void 0){var fn=Object.getPrototypeOf(un);return fn===null?void 0:hn(fn,En,wn)}else{if("value"in Sn)return Sn.value;var xn=Sn.get;return xn===void 0?void 0:xn.call(wn)}},ft=ct(3),St=Jt(ft),kt=ct(2),Tt=Jt(kt),Rt=ct(0),jt=Jt(Rt),Ft=ct(16),$t=Jt(Ft),zt=ct(6),Ut=Jt(zt),Bt=ct(7),Ht=Jt(Bt);function Jt(hn){return hn&&hn.__esModule?hn:{default:hn}}function Zt(hn,un){if(!(hn instanceof un))throw new TypeError("Cannot call a class as a function")}function tn(hn,un){if(!hn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&(typeof un=="object"||typeof un=="function")?un:hn}function nn(hn,un){if(typeof un!="function"&&un!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof un);hn.prototype=Object.create(un&&un.prototype,{constructor:{value:hn,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(hn,un):hn.__proto__=un)}var rn=1,on=function(hn){nn(un,hn);function un(){return Zt(this,un),tn(this,(un.__proto__||Object.getPrototypeOf(un)).apply(this,arguments))}return ut(un,[{key:"attach",value:function(){dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"attach",this).call(this),this.attributes=new jt.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new Tt.default().insert(this.value(),(0,St.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(wn,Sn){var fn=jt.default.query(wn,jt.default.Scope.BLOCK_ATTRIBUTE);fn!=null&&this.attributes.attribute(fn,Sn)}},{key:"formatAt",value:function(wn,Sn,fn,xn){this.format(fn,xn)}},{key:"insertAt",value:function(wn,Sn,fn){if(typeof Sn=="string"&&Sn.endsWith(`
`)){var xn=jt.default.create(pn.blotName);this.parent.insertBefore(xn,wn===0?this:this.next),xn.insertAt(0,Sn.slice(0,-1))}else dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"insertAt",this).call(this,wn,Sn,fn)}}]),un}(jt.default.Embed);on.scope=jt.default.Scope.BLOCK_BLOT;var pn=function(hn){nn(un,hn);function un(En){Zt(this,un);var wn=tn(this,(un.__proto__||Object.getPrototypeOf(un)).call(this,En));return wn.cache={},wn}return ut(un,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(jt.default.Leaf).reduce(function(wn,Sn){return Sn.length()===0?wn:wn.insert(Sn.value(),dn(Sn))},new Tt.default).insert(`
`,dn(this))),this.cache.delta}},{key:"deleteAt",value:function(wn,Sn){dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"deleteAt",this).call(this,wn,Sn),this.cache={}}},{key:"formatAt",value:function(wn,Sn,fn,xn){Sn<=0||(jt.default.query(fn,jt.default.Scope.BLOCK)?wn+Sn===this.length()&&this.format(fn,xn):dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"formatAt",this).call(this,wn,Math.min(Sn,this.length()-wn-1),fn,xn),this.cache={})}},{key:"insertAt",value:function(wn,Sn,fn){if(fn!=null)return dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"insertAt",this).call(this,wn,Sn,fn);if(Sn.length!==0){var xn=Sn.split(`
`),an=xn.shift();an.length>0&&(wn<this.length()-1||this.children.tail==null?dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"insertAt",this).call(this,Math.min(wn,this.length()-1),an):this.children.tail.insertAt(this.children.tail.length(),an),this.cache={});var cn=this;xn.reduce(function(bn,mn){return cn=cn.split(bn,!0),cn.insertAt(0,mn),mn.length},wn+an.length)}}},{key:"insertBefore",value:function(wn,Sn){var fn=this.children.head;dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"insertBefore",this).call(this,wn,Sn),fn instanceof $t.default&&fn.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"length",this).call(this)+rn),this.cache.length}},{key:"moveChildren",value:function(wn,Sn){dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"moveChildren",this).call(this,wn,Sn),this.cache={}}},{key:"optimize",value:function(wn){dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"optimize",this).call(this,wn),this.cache={}}},{key:"path",value:function(wn){return dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"path",this).call(this,wn,!0)}},{key:"removeChild",value:function(wn){dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"removeChild",this).call(this,wn),this.cache={}}},{key:"split",value:function(wn){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Sn&&(wn===0||wn>=this.length()-rn)){var fn=this.clone();return wn===0?(this.parent.insertBefore(fn,this),this):(this.parent.insertBefore(fn,this.next),fn)}else{var xn=dt(un.prototype.__proto__||Object.getPrototypeOf(un.prototype),"split",this).call(this,wn,Sn);return this.cache={},xn}}}]),un}(jt.default.Block);pn.blotName="block",pn.tagName="P",pn.defaultChild="break",pn.allowedChildren=[Ut.default,jt.default.Embed,Ht.default];function dn(hn){var un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return hn==null||(typeof hn.formats=="function"&&(un=(0,St.default)(un,hn.formats())),hn.parent==null||hn.parent.blotName=="scroll"||hn.parent.statics.scope!==hn.statics.scope)?un:dn(hn.parent,un)}ot.bubbleFormats=dn,ot.BlockEmbed=on,ot.default=pn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.overload=ot.expandConfig=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn},dt=function(){function cn(bn,mn){var Tn=[],An=!0,Pn=!1,Mn=void 0;try{for(var Rn=bn[Symbol.iterator](),Cn;!(An=(Cn=Rn.next()).done)&&(Tn.push(Cn.value),!(mn&&Tn.length===mn));An=!0);}catch(On){Pn=!0,Mn=On}finally{try{!An&&Rn.return&&Rn.return()}finally{if(Pn)throw Mn}}return Tn}return function(bn,mn){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return cn(bn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function cn(bn,mn){for(var Tn=0;Tn<mn.length;Tn++){var An=mn[Tn];An.enumerable=An.enumerable||!1,An.configurable=!0,"value"in An&&(An.writable=!0),Object.defineProperty(bn,An.key,An)}}return function(bn,mn,Tn){return mn&&cn(bn.prototype,mn),Tn&&cn(bn,Tn),bn}}();ct(50);var St=ct(2),kt=dn(St),Tt=ct(14),Rt=dn(Tt),jt=ct(8),Ft=dn(jt),$t=ct(9),zt=dn($t),Ut=ct(0),Bt=dn(Ut),Ht=ct(15),Jt=dn(Ht),Zt=ct(3),tn=dn(Zt),nn=ct(10),rn=dn(nn),on=ct(34),pn=dn(on);function dn(cn){return cn&&cn.__esModule?cn:{default:cn}}function hn(cn,bn,mn){return bn in cn?Object.defineProperty(cn,bn,{value:mn,enumerable:!0,configurable:!0,writable:!0}):cn[bn]=mn,cn}function un(cn,bn){if(!(cn instanceof bn))throw new TypeError("Cannot call a class as a function")}var En=(0,rn.default)("quill"),wn=function(){ft(cn,null,[{key:"debug",value:function(mn){mn===!0&&(mn="log"),rn.default.level(mn)}},{key:"find",value:function(mn){return mn.__quill||Bt.default.find(mn)}},{key:"import",value:function(mn){return this.imports[mn]==null&&En.error("Cannot import "+mn+". Are you sure it was registered?"),this.imports[mn]}},{key:"register",value:function(mn,Tn){var An=this,Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof mn!="string"){var Mn=mn.attrName||mn.blotName;typeof Mn=="string"?this.register("formats/"+Mn,mn,Tn):Object.keys(mn).forEach(function(Rn){An.register(Rn,mn[Rn],Tn)})}else this.imports[mn]!=null&&!Pn&&En.warn("Overwriting "+mn+" with",Tn),this.imports[mn]=Tn,(mn.startsWith("blots/")||mn.startsWith("formats/"))&&Tn.blotName!=="abstract"?Bt.default.register(Tn):mn.startsWith("modules")&&typeof Tn.register=="function"&&Tn.register()}}]);function cn(bn){var mn=this,Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(un(this,cn),this.options=Sn(bn,Tn),this.container=this.options.container,this.container==null)return En.error("Invalid Quill container",bn);this.options.debug&&cn.debug(this.options.debug);var An=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Ft.default,this.scroll=Bt.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Rt.default(this.scroll),this.selection=new Jt.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Ft.default.events.EDITOR_CHANGE,function(Mn){Mn===Ft.default.events.TEXT_CHANGE&&mn.root.classList.toggle("ql-blank",mn.editor.isBlank())}),this.emitter.on(Ft.default.events.SCROLL_UPDATE,function(Mn,Rn){var Cn=mn.selection.lastRange,On=Cn&&Cn.length===0?Cn.index:void 0;fn.call(mn,function(){return mn.editor.update(null,Rn,On)},Mn)});var Pn=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+An+"<p><br></p></div>");this.setContents(Pn),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ft(cn,[{key:"addContainer",value:function(mn){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof mn=="string"){var An=mn;mn=document.createElement("div"),mn.classList.add(An)}return this.container.insertBefore(mn,Tn),mn}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(mn,Tn,An){var Pn=this,Mn=xn(mn,Tn,An),Rn=dt(Mn,4);return mn=Rn[0],Tn=Rn[1],An=Rn[3],fn.call(this,function(){return Pn.editor.deleteText(mn,Tn)},An,mn,-1*Tn)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(mn),this.container.classList.toggle("ql-disabled",!mn)}},{key:"focus",value:function(){var mn=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=mn,this.scrollIntoView()}},{key:"format",value:function(mn,Tn){var An=this,Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft.default.sources.API;return fn.call(this,function(){var Mn=An.getSelection(!0),Rn=new kt.default;if(Mn==null)return Rn;if(Bt.default.query(mn,Bt.default.Scope.BLOCK))Rn=An.editor.formatLine(Mn.index,Mn.length,hn({},mn,Tn));else{if(Mn.length===0)return An.selection.format(mn,Tn),Rn;Rn=An.editor.formatText(Mn.index,Mn.length,hn({},mn,Tn))}return An.setSelection(Mn,Ft.default.sources.SILENT),Rn},Pn)}},{key:"formatLine",value:function(mn,Tn,An,Pn,Mn){var Rn=this,Cn=void 0,On=xn(mn,Tn,An,Pn,Mn),In=dt(On,4);return mn=In[0],Tn=In[1],Cn=In[2],Mn=In[3],fn.call(this,function(){return Rn.editor.formatLine(mn,Tn,Cn)},Mn,mn,0)}},{key:"formatText",value:function(mn,Tn,An,Pn,Mn){var Rn=this,Cn=void 0,On=xn(mn,Tn,An,Pn,Mn),In=dt(On,4);return mn=In[0],Tn=In[1],Cn=In[2],Mn=In[3],fn.call(this,function(){return Rn.editor.formatText(mn,Tn,Cn)},Mn,mn,0)}},{key:"getBounds",value:function(mn){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,An=void 0;typeof mn=="number"?An=this.selection.getBounds(mn,Tn):An=this.selection.getBounds(mn.index,mn.length);var Pn=this.container.getBoundingClientRect();return{bottom:An.bottom-Pn.top,height:An.height,left:An.left-Pn.left,right:An.right-Pn.left,top:An.top-Pn.top,width:An.width}}},{key:"getContents",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-mn,An=xn(mn,Tn),Pn=dt(An,2);return mn=Pn[0],Tn=Pn[1],this.editor.getContents(mn,Tn)}},{key:"getFormat",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof mn=="number"?this.editor.getFormat(mn,Tn):this.editor.getFormat(mn.index,mn.length)}},{key:"getIndex",value:function(mn){return mn.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(mn){return this.scroll.leaf(mn)}},{key:"getLine",value:function(mn){return this.scroll.line(mn)}},{key:"getLines",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof mn!="number"?this.scroll.lines(mn.index,mn.length):this.scroll.lines(mn,Tn)}},{key:"getModule",value:function(mn){return this.theme.modules[mn]}},{key:"getSelection",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return mn&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-mn,An=xn(mn,Tn),Pn=dt(An,2);return mn=Pn[0],Tn=Pn[1],this.editor.getText(mn,Tn)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(mn,Tn,An){var Pn=this,Mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cn.sources.API;return fn.call(this,function(){return Pn.editor.insertEmbed(mn,Tn,An)},Mn,mn)}},{key:"insertText",value:function(mn,Tn,An,Pn,Mn){var Rn=this,Cn=void 0,On=xn(mn,0,An,Pn,Mn),In=dt(On,4);return mn=In[0],Cn=In[2],Mn=In[3],fn.call(this,function(){return Rn.editor.insertText(mn,Tn,Cn)},Mn,mn,Tn.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(mn,Tn,An){this.clipboard.dangerouslyPasteHTML(mn,Tn,An)}},{key:"removeFormat",value:function(mn,Tn,An){var Pn=this,Mn=xn(mn,Tn,An),Rn=dt(Mn,4);return mn=Rn[0],Tn=Rn[1],An=Rn[3],fn.call(this,function(){return Pn.editor.removeFormat(mn,Tn)},An,mn)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(mn){var Tn=this,An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return fn.call(this,function(){mn=new kt.default(mn);var Pn=Tn.getLength(),Mn=Tn.editor.deleteText(0,Pn),Rn=Tn.editor.applyDelta(mn),Cn=Rn.ops[Rn.ops.length-1];Cn!=null&&typeof Cn.insert=="string"&&Cn.insert[Cn.insert.length-1]===`
`&&(Tn.editor.deleteText(Tn.getLength()-1,1),Rn.delete(1));var On=Mn.compose(Rn);return On},An)}},{key:"setSelection",value:function(mn,Tn,An){if(mn==null)this.selection.setRange(null,Tn||cn.sources.API);else{var Pn=xn(mn,Tn,An),Mn=dt(Pn,4);mn=Mn[0],Tn=Mn[1],An=Mn[3],this.selection.setRange(new Ht.Range(mn,Tn),An),An!==Ft.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(mn){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API,An=new kt.default().insert(mn);return this.setContents(An,Tn)}},{key:"update",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ft.default.sources.USER,Tn=this.scroll.update(mn);return this.selection.update(mn),Tn}},{key:"updateContents",value:function(mn){var Tn=this,An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.default.sources.API;return fn.call(this,function(){return mn=new kt.default(mn),Tn.editor.applyDelta(mn,An)},An,!0)}}]),cn}();wn.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},wn.events=Ft.default.events,wn.sources=Ft.default.sources,wn.version="1.3.7",wn.imports={delta:kt.default,parchment:Bt.default,"core/module":zt.default,"core/theme":pn.default};function Sn(cn,bn){if(bn=(0,tn.default)(!0,{container:cn,modules:{clipboard:!0,keyboard:!0,history:!0}},bn),!bn.theme||bn.theme===wn.DEFAULTS.theme)bn.theme=pn.default;else if(bn.theme=wn.import("themes/"+bn.theme),bn.theme==null)throw new Error("Invalid theme "+bn.theme+". Did you register it?");var mn=(0,tn.default)(!0,{},bn.theme.DEFAULTS);[mn,bn].forEach(function(Pn){Pn.modules=Pn.modules||{},Object.keys(Pn.modules).forEach(function(Mn){Pn.modules[Mn]===!0&&(Pn.modules[Mn]={})})});var Tn=Object.keys(mn.modules).concat(Object.keys(bn.modules)),An=Tn.reduce(function(Pn,Mn){var Rn=wn.import("modules/"+Mn);return Rn==null?En.error("Cannot load "+Mn+" module. Are you sure you registered it?"):Pn[Mn]=Rn.DEFAULTS||{},Pn},{});return bn.modules!=null&&bn.modules.toolbar&&bn.modules.toolbar.constructor!==Object&&(bn.modules.toolbar={container:bn.modules.toolbar}),bn=(0,tn.default)(!0,{},wn.DEFAULTS,{modules:An},mn,bn),["bounds","container","scrollingContainer"].forEach(function(Pn){typeof bn[Pn]=="string"&&(bn[Pn]=document.querySelector(bn[Pn]))}),bn.modules=Object.keys(bn.modules).reduce(function(Pn,Mn){return bn.modules[Mn]&&(Pn[Mn]=bn.modules[Mn]),Pn},{}),bn}function fn(cn,bn,mn,Tn){if(this.options.strict&&!this.isEnabled()&&bn===Ft.default.sources.USER)return new kt.default;var An=mn==null?null:this.getSelection(),Pn=this.editor.delta,Mn=cn();if(An!=null&&(mn===!0&&(mn=An.index),Tn==null?An=an(An,Mn,bn):Tn!==0&&(An=an(An,mn,Tn,bn)),this.setSelection(An,Ft.default.sources.SILENT)),Mn.length()>0){var Rn,Cn=[Ft.default.events.TEXT_CHANGE,Mn,Pn,bn];if((Rn=this.emitter).emit.apply(Rn,[Ft.default.events.EDITOR_CHANGE].concat(Cn)),bn!==Ft.default.sources.SILENT){var On;(On=this.emitter).emit.apply(On,Cn)}}return Mn}function xn(cn,bn,mn,Tn,An){var Pn={};return typeof cn.index=="number"&&typeof cn.length=="number"?typeof bn!="number"?(An=Tn,Tn=mn,mn=bn,bn=cn.length,cn=cn.index):(bn=cn.length,cn=cn.index):typeof bn!="number"&&(An=Tn,Tn=mn,mn=bn,bn=0),(typeof mn>"u"?"undefined":ut(mn))==="object"?(Pn=mn,An=Tn):typeof mn=="string"&&(Tn!=null?Pn[mn]=Tn:An=mn),An=An||Ft.default.sources.API,[cn,bn,Pn,An]}function an(cn,bn,mn,Tn){if(cn==null)return null;var An=void 0,Pn=void 0;if(bn instanceof kt.default){var Mn=[cn.index,cn.index+cn.length].map(function(In){return bn.transformPosition(In,Tn!==Ft.default.sources.USER)}),Rn=dt(Mn,2);An=Rn[0],Pn=Rn[1]}else{var Cn=[cn.index,cn.index+cn.length].map(function(In){return In<bn||In===bn&&Tn===Ft.default.sources.USER?In:mn>=0?In+mn:Math.max(bn,In+mn)}),On=dt(Cn,2);An=On[0],Pn=On[1]}return new Ht.Range(An,Pn-An)}ot.expandConfig=Sn,ot.overload=xn,ot.default=wn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ut(Bt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var Zt=Ht[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Bt,Zt.key,Zt)}}return function(Bt,Ht,Jt){return Ht&&Ut(Bt.prototype,Ht),Jt&&Ut(Bt,Jt),Bt}}(),dt=function Ut(Bt,Ht,Jt){Bt===null&&(Bt=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Bt,Ht);if(Zt===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Ut(tn,Ht,Jt)}else{if("value"in Zt)return Zt.value;var nn=Zt.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(7),St=Rt(ft),kt=ct(0),Tt=Rt(kt);function Rt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function jt(Ut,Bt){if(!(Ut instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Ft(Ut,Bt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Ut}function $t(Ut,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Ut.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Bt):Ut.__proto__=Bt)}var zt=function(Ut){$t(Bt,Ut);function Bt(){return jt(this,Bt),Ft(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"formatAt",value:function(Jt,Zt,tn,nn){if(Bt.compare(this.statics.blotName,tn)<0&&Tt.default.query(tn,Tt.default.Scope.BLOT)){var rn=this.isolate(Jt,Zt);nn&&rn.wrap(tn,nn)}else dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"formatAt",this).call(this,Jt,Zt,tn,nn)}},{key:"optimize",value:function(Jt){if(dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"optimize",this).call(this,Jt),this.parent instanceof Bt&&Bt.compare(this.statics.blotName,this.parent.statics.blotName)>0){var Zt=this.parent.isolate(this.offset(),this.length());this.moveChildren(Zt),Zt.wrap(this)}}}],[{key:"compare",value:function(Jt,Zt){var tn=Bt.order.indexOf(Jt),nn=Bt.order.indexOf(Zt);return tn>=0||nn>=0?tn-nn:Jt===Zt?0:Jt<Zt?-1:1}}]),Bt}(Tt.default.Inline);zt.allowedChildren=[zt,Tt.default.Embed,St.default],zt.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default.Text);ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ht(Jt,Zt){for(var tn=0;tn<Zt.length;tn++){var nn=Zt[tn];nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty(Jt,nn.key,nn)}}return function(Jt,Zt,tn){return Zt&&Ht(Jt.prototype,Zt),tn&&Ht(Jt,tn),Jt}}(),dt=function Ht(Jt,Zt,tn){Jt===null&&(Jt=Function.prototype);var nn=Object.getOwnPropertyDescriptor(Jt,Zt);if(nn===void 0){var rn=Object.getPrototypeOf(Jt);return rn===null?void 0:Ht(rn,Zt,tn)}else{if("value"in nn)return nn.value;var on=nn.get;return on===void 0?void 0:on.call(tn)}},ft=ct(54),St=Rt(ft),kt=ct(10),Tt=Rt(kt);function Rt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function jt(Ht,Jt){if(!(Ht instanceof Jt))throw new TypeError("Cannot call a class as a function")}function Ft(Ht,Jt){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&(typeof Jt=="object"||typeof Jt=="function")?Jt:Ht}function $t(Ht,Jt){if(typeof Jt!="function"&&Jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Ht.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Jt):Ht.__proto__=Jt)}var zt=(0,Tt.default)("quill:events"),Ut=["selectionchange","mousedown","mouseup","click"];Ut.forEach(function(Ht){document.addEventListener(Ht,function(){for(var Jt=arguments.length,Zt=Array(Jt),tn=0;tn<Jt;tn++)Zt[tn]=arguments[tn];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(nn){if(nn.__quill&&nn.__quill.emitter){var rn;(rn=nn.__quill.emitter).handleDOM.apply(rn,Zt)}})})});var Bt=function(Ht){$t(Jt,Ht);function Jt(){jt(this,Jt);var Zt=Ft(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this));return Zt.listeners={},Zt.on("error",zt.error),Zt}return ut(Jt,[{key:"emit",value:function(){zt.log.apply(zt,arguments),dt(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(tn){for(var nn=arguments.length,rn=Array(nn>1?nn-1:0),on=1;on<nn;on++)rn[on-1]=arguments[on];(this.listeners[tn.type]||[]).forEach(function(pn){var dn=pn.node,hn=pn.handler;(tn.target===dn||dn.contains(tn.target))&&hn.apply(void 0,[tn].concat(rn))})}},{key:"listenDOM",value:function(tn,nn,rn){this.listeners[tn]||(this.listeners[tn]=[]),this.listeners[tn].push({node:nn,handler:rn})}}]),Jt}(St.default);Bt.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Bt.sources={API:"api",SILENT:"silent",USER:"user"},ot.default=Bt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});function ut(ft,St){if(!(ft instanceof St))throw new TypeError("Cannot call a class as a function")}var dt=function ft(St){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ut(this,ft),this.quill=St,this.options=kt};dt.DEFAULTS={},ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=["error","warn","log","info"],dt="warn";function ft(kt){if(ut.indexOf(kt)<=ut.indexOf(dt)){for(var Tt,Rt=arguments.length,jt=Array(Rt>1?Rt-1:0),Ft=1;Ft<Rt;Ft++)jt[Ft-1]=arguments[Ft];(Tt=console)[kt].apply(Tt,jt)}}function St(kt){return ut.reduce(function(Tt,Rt){return Tt[Rt]=ft.bind(console,Rt,kt),Tt},{})}ft.level=St.level=function(kt){dt=kt},ot.default=St},function(et,ot,ct){var ut=Array.prototype.slice,dt=ct(52),ft=ct(53),St=et.exports=function(jt,Ft,$t){return $t||($t={}),jt===Ft?!0:jt instanceof Date&&Ft instanceof Date?jt.getTime()===Ft.getTime():!jt||!Ft||typeof jt!="object"&&typeof Ft!="object"?$t.strict?jt===Ft:jt==Ft:Rt(jt,Ft,$t)};function kt(jt){return jt==null}function Tt(jt){return!(!jt||typeof jt!="object"||typeof jt.length!="number"||typeof jt.copy!="function"||typeof jt.slice!="function"||jt.length>0&&typeof jt[0]!="number")}function Rt(jt,Ft,$t){var zt,Ut;if(kt(jt)||kt(Ft)||jt.prototype!==Ft.prototype)return!1;if(ft(jt))return ft(Ft)?(jt=ut.call(jt),Ft=ut.call(Ft),St(jt,Ft,$t)):!1;if(Tt(jt)){if(!Tt(Ft)||jt.length!==Ft.length)return!1;for(zt=0;zt<jt.length;zt++)if(jt[zt]!==Ft[zt])return!1;return!0}try{var Bt=dt(jt),Ht=dt(Ft)}catch{return!1}if(Bt.length!=Ht.length)return!1;for(Bt.sort(),Ht.sort(),zt=Bt.length-1;zt>=0;zt--)if(Bt[zt]!=Ht[zt])return!1;for(zt=Bt.length-1;zt>=0;zt--)if(Ut=Bt[zt],!St(jt[Ut],Ft[Ut],$t))return!1;return typeof jt==typeof Ft}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St,kt,Tt){Tt===void 0&&(Tt={}),this.attrName=St,this.keyName=kt;var Rt=ut.Scope.TYPE&ut.Scope.ATTRIBUTE;Tt.scope!=null?this.scope=Tt.scope&ut.Scope.LEVEL|Rt:this.scope=ut.Scope.ATTRIBUTE,Tt.whitelist!=null&&(this.whitelist=Tt.whitelist)}return ft.keys=function(St){return[].map.call(St.attributes,function(kt){return kt.name})},ft.prototype.add=function(St,kt){return this.canAdd(St,kt)?(St.setAttribute(this.keyName,kt),!0):!1},ft.prototype.canAdd=function(St,kt){var Tt=ut.query(St,ut.Scope.BLOT&(this.scope|ut.Scope.TYPE));return Tt==null?!1:this.whitelist==null?!0:typeof kt=="string"?this.whitelist.indexOf(kt.replace(/["']/g,""))>-1:this.whitelist.indexOf(kt)>-1},ft.prototype.remove=function(St){St.removeAttribute(this.keyName)},ft.prototype.value=function(St){var kt=St.getAttribute(this.keyName);return this.canAdd(St,kt)&&kt?kt:""},ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Code=void 0;var ut=function(){function on(pn,dn){var hn=[],un=!0,En=!1,wn=void 0;try{for(var Sn=pn[Symbol.iterator](),fn;!(un=(fn=Sn.next()).done)&&(hn.push(fn.value),!(dn&&hn.length===dn));un=!0);}catch(xn){En=!0,wn=xn}finally{try{!un&&Sn.return&&Sn.return()}finally{if(En)throw wn}}return hn}return function(pn,dn){if(Array.isArray(pn))return pn;if(Symbol.iterator in Object(pn))return on(pn,dn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function on(pn,dn){for(var hn=0;hn<dn.length;hn++){var un=dn[hn];un.enumerable=un.enumerable||!1,un.configurable=!0,"value"in un&&(un.writable=!0),Object.defineProperty(pn,un.key,un)}}return function(pn,dn,hn){return dn&&on(pn.prototype,dn),hn&&on(pn,hn),pn}}(),ft=function on(pn,dn,hn){pn===null&&(pn=Function.prototype);var un=Object.getOwnPropertyDescriptor(pn,dn);if(un===void 0){var En=Object.getPrototypeOf(pn);return En===null?void 0:on(En,dn,hn)}else{if("value"in un)return un.value;var wn=un.get;return wn===void 0?void 0:wn.call(hn)}},St=ct(2),kt=Ht(St),Tt=ct(0),Rt=Ht(Tt),jt=ct(4),Ft=Ht(jt),$t=ct(6),zt=Ht($t),Ut=ct(7),Bt=Ht(Ut);function Ht(on){return on&&on.__esModule?on:{default:on}}function Jt(on,pn){if(!(on instanceof pn))throw new TypeError("Cannot call a class as a function")}function Zt(on,pn){if(!on)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn&&(typeof pn=="object"||typeof pn=="function")?pn:on}function tn(on,pn){if(typeof pn!="function"&&pn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof pn);on.prototype=Object.create(pn&&pn.prototype,{constructor:{value:on,enumerable:!1,writable:!0,configurable:!0}}),pn&&(Object.setPrototypeOf?Object.setPrototypeOf(on,pn):on.__proto__=pn)}var nn=function(on){tn(pn,on);function pn(){return Jt(this,pn),Zt(this,(pn.__proto__||Object.getPrototypeOf(pn)).apply(this,arguments))}return pn}(zt.default);nn.blotName="code",nn.tagName="CODE";var rn=function(on){tn(pn,on);function pn(){return Jt(this,pn),Zt(this,(pn.__proto__||Object.getPrototypeOf(pn)).apply(this,arguments))}return dt(pn,[{key:"delta",value:function(){var hn=this,un=this.domNode.textContent;return un.endsWith(`
`)&&(un=un.slice(0,-1)),un.split(`
`).reduce(function(En,wn){return En.insert(wn).insert(`
`,hn.formats())},new kt.default)}},{key:"format",value:function(hn,un){if(!(hn===this.statics.blotName&&un)){var En=this.descendant(Bt.default,this.length()-1),wn=ut(En,1),Sn=wn[0];Sn!=null&&Sn.deleteAt(Sn.length()-1,1),ft(pn.prototype.__proto__||Object.getPrototypeOf(pn.prototype),"format",this).call(this,hn,un)}}},{key:"formatAt",value:function(hn,un,En,wn){if(un!==0&&!(Rt.default.query(En,Rt.default.Scope.BLOCK)==null||En===this.statics.blotName&&wn===this.statics.formats(this.domNode))){var Sn=this.newlineIndex(hn);if(!(Sn<0||Sn>=hn+un)){var fn=this.newlineIndex(hn,!0)+1,xn=Sn-fn+1,an=this.isolate(fn,xn),cn=an.next;an.format(En,wn),cn instanceof pn&&cn.formatAt(0,hn-fn+un-xn,En,wn)}}}},{key:"insertAt",value:function(hn,un,En){if(En==null){var wn=this.descendant(Bt.default,hn),Sn=ut(wn,2),fn=Sn[0],xn=Sn[1];fn.insertAt(xn,un)}}},{key:"length",value:function(){var hn=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?hn:hn+1}},{key:"newlineIndex",value:function(hn){var un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(un)return this.domNode.textContent.slice(0,hn).lastIndexOf(`
`);var En=this.domNode.textContent.slice(hn).indexOf(`
`);return En>-1?hn+En:-1}},{key:"optimize",value:function(hn){this.domNode.textContent.endsWith(`
`)||this.appendChild(Rt.default.create("text",`
`)),ft(pn.prototype.__proto__||Object.getPrototypeOf(pn.prototype),"optimize",this).call(this,hn);var un=this.next;un!=null&&un.prev===this&&un.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===un.statics.formats(un.domNode)&&(un.optimize(hn),un.moveChildren(this),un.remove())}},{key:"replace",value:function(hn){ft(pn.prototype.__proto__||Object.getPrototypeOf(pn.prototype),"replace",this).call(this,hn),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(un){var En=Rt.default.find(un);En==null?un.parentNode.removeChild(un):En instanceof Rt.default.Embed?En.remove():En.unwrap()})}}],[{key:"create",value:function(hn){var un=ft(pn.__proto__||Object.getPrototypeOf(pn),"create",this).call(this,hn);return un.setAttribute("spellcheck",!1),un}},{key:"formats",value:function(){return!0}}]),pn}(Ft.default);rn.blotName="code-block",rn.tagName="PRE",rn.TAB="  ",ot.Code=nn,ot.default=rn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cn){return typeof cn}:function(cn){return cn&&typeof Symbol=="function"&&cn.constructor===Symbol&&cn!==Symbol.prototype?"symbol":typeof cn},dt=function(){function cn(bn,mn){var Tn=[],An=!0,Pn=!1,Mn=void 0;try{for(var Rn=bn[Symbol.iterator](),Cn;!(An=(Cn=Rn.next()).done)&&(Tn.push(Cn.value),!(mn&&Tn.length===mn));An=!0);}catch(On){Pn=!0,Mn=On}finally{try{!An&&Rn.return&&Rn.return()}finally{if(Pn)throw Mn}}return Tn}return function(bn,mn){if(Array.isArray(bn))return bn;if(Symbol.iterator in Object(bn))return cn(bn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function cn(bn,mn){for(var Tn=0;Tn<mn.length;Tn++){var An=mn[Tn];An.enumerable=An.enumerable||!1,An.configurable=!0,"value"in An&&(An.writable=!0),Object.defineProperty(bn,An.key,An)}}return function(bn,mn,Tn){return mn&&cn(bn.prototype,mn),Tn&&cn(bn,Tn),bn}}(),St=ct(2),kt=un(St),Tt=ct(20),Rt=un(Tt),jt=ct(0),Ft=un(jt),$t=ct(13),zt=un($t),Ut=ct(24),Bt=un(Ut),Ht=ct(4),Jt=un(Ht),Zt=ct(16),tn=un(Zt),nn=ct(21),rn=un(nn),on=ct(11),pn=un(on),dn=ct(3),hn=un(dn);function un(cn){return cn&&cn.__esModule?cn:{default:cn}}function En(cn,bn,mn){return bn in cn?Object.defineProperty(cn,bn,{value:mn,enumerable:!0,configurable:!0,writable:!0}):cn[bn]=mn,cn}function wn(cn,bn){if(!(cn instanceof bn))throw new TypeError("Cannot call a class as a function")}var Sn=/^[ -~]*$/,fn=function(){function cn(bn){wn(this,cn),this.scroll=bn,this.delta=this.getDelta()}return ft(cn,[{key:"applyDelta",value:function(mn){var Tn=this,An=!1;this.scroll.update();var Pn=this.scroll.length();return this.scroll.batchStart(),mn=an(mn),mn.reduce(function(Mn,Rn){var Cn=Rn.retain||Rn.delete||Rn.insert.length||1,On=Rn.attributes||{};if(Rn.insert!=null){if(typeof Rn.insert=="string"){var In=Rn.insert;In.endsWith(`
`)&&An&&(An=!1,In=In.slice(0,-1)),Mn>=Pn&&!In.endsWith(`
`)&&(An=!0),Tn.scroll.insertAt(Mn,In);var Dn=Tn.scroll.line(Mn),Fn=dt(Dn,2),Xn=Fn[0],Vn=Fn[1],zn=(0,hn.default)({},(0,Ht.bubbleFormats)(Xn));if(Xn instanceof Jt.default){var Zn=Xn.descendant(Ft.default.Leaf,Vn),lr=dt(Zn,1),hr=lr[0];zn=(0,hn.default)(zn,(0,Ht.bubbleFormats)(hr))}On=Rt.default.attributes.diff(zn,On)||{}}else if(ut(Rn.insert)==="object"){var $n=Object.keys(Rn.insert)[0];if($n==null)return Mn;Tn.scroll.insertAt(Mn,$n,Rn.insert[$n])}Pn+=Cn}return Object.keys(On).forEach(function(Un){Tn.scroll.formatAt(Mn,Cn,Un,On[Un])}),Mn+Cn},0),mn.reduce(function(Mn,Rn){return typeof Rn.delete=="number"?(Tn.scroll.deleteAt(Mn,Rn.delete),Mn):Mn+(Rn.retain||Rn.insert.length||1)},0),this.scroll.batchEnd(),this.update(mn)}},{key:"deleteText",value:function(mn,Tn){return this.scroll.deleteAt(mn,Tn),this.update(new kt.default().retain(mn).delete(Tn))}},{key:"formatLine",value:function(mn,Tn){var An=this,Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Pn).forEach(function(Mn){if(!(An.scroll.whitelist!=null&&!An.scroll.whitelist[Mn])){var Rn=An.scroll.lines(mn,Math.max(Tn,1)),Cn=Tn;Rn.forEach(function(On){var In=On.length();if(!(On instanceof zt.default))On.format(Mn,Pn[Mn]);else{var Dn=mn-On.offset(An.scroll),Fn=On.newlineIndex(Dn+Cn)-Dn+1;On.formatAt(Dn,Fn,Mn,Pn[Mn])}Cn-=In})}}),this.scroll.optimize(),this.update(new kt.default().retain(mn).retain(Tn,(0,rn.default)(Pn)))}},{key:"formatText",value:function(mn,Tn){var An=this,Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Pn).forEach(function(Mn){An.scroll.formatAt(mn,Tn,Mn,Pn[Mn])}),this.update(new kt.default().retain(mn).retain(Tn,(0,rn.default)(Pn)))}},{key:"getContents",value:function(mn,Tn){return this.delta.slice(mn,mn+Tn)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(mn,Tn){return mn.concat(Tn.delta())},new kt.default)}},{key:"getFormat",value:function(mn){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,An=[],Pn=[];Tn===0?this.scroll.path(mn).forEach(function(Rn){var Cn=dt(Rn,1),On=Cn[0];On instanceof Jt.default?An.push(On):On instanceof Ft.default.Leaf&&Pn.push(On)}):(An=this.scroll.lines(mn,Tn),Pn=this.scroll.descendants(Ft.default.Leaf,mn,Tn));var Mn=[An,Pn].map(function(Rn){if(Rn.length===0)return{};for(var Cn=(0,Ht.bubbleFormats)(Rn.shift());Object.keys(Cn).length>0;){var On=Rn.shift();if(On==null)return Cn;Cn=xn((0,Ht.bubbleFormats)(On),Cn)}return Cn});return hn.default.apply(hn.default,Mn)}},{key:"getText",value:function(mn,Tn){return this.getContents(mn,Tn).filter(function(An){return typeof An.insert=="string"}).map(function(An){return An.insert}).join("")}},{key:"insertEmbed",value:function(mn,Tn,An){return this.scroll.insertAt(mn,Tn,An),this.update(new kt.default().retain(mn).insert(En({},Tn,An)))}},{key:"insertText",value:function(mn,Tn){var An=this,Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Tn=Tn.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(mn,Tn),Object.keys(Pn).forEach(function(Mn){An.scroll.formatAt(mn,Tn.length,Mn,Pn[Mn])}),this.update(new kt.default().retain(mn).insert(Tn,(0,rn.default)(Pn)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var mn=this.scroll.children.head;return mn.statics.blotName!==Jt.default.blotName||mn.children.length>1?!1:mn.children.head instanceof tn.default}},{key:"removeFormat",value:function(mn,Tn){var An=this.getText(mn,Tn),Pn=this.scroll.line(mn+Tn),Mn=dt(Pn,2),Rn=Mn[0],Cn=Mn[1],On=0,In=new kt.default;Rn!=null&&(Rn instanceof zt.default?On=Rn.newlineIndex(Cn)-Cn+1:On=Rn.length()-Cn,In=Rn.delta().slice(Cn,Cn+On-1).insert(`
`));var Dn=this.getContents(mn,Tn+On),Fn=Dn.diff(new kt.default().insert(An).concat(In)),Xn=new kt.default().retain(mn).concat(Fn);return this.applyDelta(Xn)}},{key:"update",value:function(mn){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],An=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Pn=this.delta;if(Tn.length===1&&Tn[0].type==="characterData"&&Tn[0].target.data.match(Sn)&&Ft.default.find(Tn[0].target)){var Mn=Ft.default.find(Tn[0].target),Rn=(0,Ht.bubbleFormats)(Mn),Cn=Mn.offset(this.scroll),On=Tn[0].oldValue.replace(Bt.default.CONTENTS,""),In=new kt.default().insert(On),Dn=new kt.default().insert(Mn.value()),Fn=new kt.default().retain(Cn).concat(In.diff(Dn,An));mn=Fn.reduce(function(Xn,Vn){return Vn.insert?Xn.insert(Vn.insert,Rn):Xn.push(Vn)},new kt.default),this.delta=Pn.compose(mn)}else this.delta=this.getDelta(),(!mn||!(0,pn.default)(Pn.compose(mn),this.delta))&&(mn=Pn.diff(this.delta,An));return mn}}]),cn}();function xn(cn,bn){return Object.keys(bn).reduce(function(mn,Tn){return cn[Tn]==null||(bn[Tn]===cn[Tn]?mn[Tn]=bn[Tn]:Array.isArray(bn[Tn])?bn[Tn].indexOf(cn[Tn])<0&&(mn[Tn]=bn[Tn].concat([cn[Tn]])):mn[Tn]=[bn[Tn],cn[Tn]]),mn},{})}function an(cn){return cn.reduce(function(bn,mn){if(mn.insert===1){var Tn=(0,rn.default)(mn.attributes);return delete Tn.image,bn.insert({image:mn.attributes.image},Tn)}if(mn.attributes!=null&&(mn.attributes.list===!0||mn.attributes.bullet===!0)&&(mn=(0,rn.default)(mn),mn.attributes.list?mn.attributes.list="ordered":(mn.attributes.list="bullet",delete mn.attributes.bullet)),typeof mn.insert=="string"){var An=mn.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return bn.insert(An,mn.attributes)}return bn.push(mn)},new kt.default)}ot.default=fn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Range=void 0;var ut=function(){function on(pn,dn){var hn=[],un=!0,En=!1,wn=void 0;try{for(var Sn=pn[Symbol.iterator](),fn;!(un=(fn=Sn.next()).done)&&(hn.push(fn.value),!(dn&&hn.length===dn));un=!0);}catch(xn){En=!0,wn=xn}finally{try{!un&&Sn.return&&Sn.return()}finally{if(En)throw wn}}return hn}return function(pn,dn){if(Array.isArray(pn))return pn;if(Symbol.iterator in Object(pn))return on(pn,dn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function on(pn,dn){for(var hn=0;hn<dn.length;hn++){var un=dn[hn];un.enumerable=un.enumerable||!1,un.configurable=!0,"value"in un&&(un.writable=!0),Object.defineProperty(pn,un.key,un)}}return function(pn,dn,hn){return dn&&on(pn.prototype,dn),hn&&on(pn,hn),pn}}(),ft=ct(0),St=Bt(ft),kt=ct(21),Tt=Bt(kt),Rt=ct(11),jt=Bt(Rt),Ft=ct(8),$t=Bt(Ft),zt=ct(10),Ut=Bt(zt);function Bt(on){return on&&on.__esModule?on:{default:on}}function Ht(on){if(Array.isArray(on)){for(var pn=0,dn=Array(on.length);pn<on.length;pn++)dn[pn]=on[pn];return dn}else return Array.from(on)}function Jt(on,pn){if(!(on instanceof pn))throw new TypeError("Cannot call a class as a function")}var Zt=(0,Ut.default)("quill:selection"),tn=function on(pn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Jt(this,on),this.index=pn,this.length=dn},nn=function(){function on(pn,dn){var hn=this;Jt(this,on),this.emitter=dn,this.scroll=pn,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=St.default.create("cursor",this),this.lastRange=this.savedRange=new tn(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){hn.mouseDown||setTimeout(hn.update.bind(hn,$t.default.sources.USER),1)}),this.emitter.on($t.default.events.EDITOR_CHANGE,function(un,En){un===$t.default.events.TEXT_CHANGE&&En.length()>0&&hn.update($t.default.sources.SILENT)}),this.emitter.on($t.default.events.SCROLL_BEFORE_UPDATE,function(){if(hn.hasFocus()){var un=hn.getNativeRange();un!=null&&un.start.node!==hn.cursor.textNode&&hn.emitter.once($t.default.events.SCROLL_UPDATE,function(){try{hn.setNativeRange(un.start.node,un.start.offset,un.end.node,un.end.offset)}catch{}})}}),this.emitter.on($t.default.events.SCROLL_OPTIMIZE,function(un,En){if(En.range){var wn=En.range,Sn=wn.startNode,fn=wn.startOffset,xn=wn.endNode,an=wn.endOffset;hn.setNativeRange(Sn,fn,xn,an)}}),this.update($t.default.sources.SILENT)}return dt(on,[{key:"handleComposition",value:function(){var dn=this;this.root.addEventListener("compositionstart",function(){dn.composing=!0}),this.root.addEventListener("compositionend",function(){if(dn.composing=!1,dn.cursor.parent){var hn=dn.cursor.restore();if(!hn)return;setTimeout(function(){dn.setNativeRange(hn.startNode,hn.startOffset,hn.endNode,hn.endOffset)},1)}})}},{key:"handleDragging",value:function(){var dn=this;this.emitter.listenDOM("mousedown",document.body,function(){dn.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){dn.mouseDown=!1,dn.update($t.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(dn,hn){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[dn])){this.scroll.update();var un=this.getNativeRange();if(!(un==null||!un.native.collapsed||St.default.query(dn,St.default.Scope.BLOCK))){if(un.start.node!==this.cursor.textNode){var En=St.default.find(un.start.node,!1);if(En==null)return;if(En instanceof St.default.Leaf){var wn=En.split(un.start.offset);En.parent.insertBefore(this.cursor,wn)}else En.insertBefore(this.cursor,un.start.node);this.cursor.attach()}this.cursor.format(dn,hn),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(dn){var hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,un=this.scroll.length();dn=Math.min(dn,un-1),hn=Math.min(dn+hn,un-1)-dn;var En=void 0,wn=this.scroll.leaf(dn),Sn=ut(wn,2),fn=Sn[0],xn=Sn[1];if(fn==null)return null;var an=fn.position(xn,!0),cn=ut(an,2);En=cn[0],xn=cn[1];var bn=document.createRange();if(hn>0){bn.setStart(En,xn);var mn=this.scroll.leaf(dn+hn),Tn=ut(mn,2);if(fn=Tn[0],xn=Tn[1],fn==null)return null;var An=fn.position(xn,!0),Pn=ut(An,2);return En=Pn[0],xn=Pn[1],bn.setEnd(En,xn),bn.getBoundingClientRect()}else{var Mn="left",Rn=void 0;return En instanceof Text?(xn<En.data.length?(bn.setStart(En,xn),bn.setEnd(En,xn+1)):(bn.setStart(En,xn-1),bn.setEnd(En,xn),Mn="right"),Rn=bn.getBoundingClientRect()):(Rn=fn.domNode.getBoundingClientRect(),xn>0&&(Mn="right")),{bottom:Rn.top+Rn.height,height:Rn.height,left:Rn[Mn],right:Rn[Mn],top:Rn.top,width:0}}}},{key:"getNativeRange",value:function(){var dn=document.getSelection();if(dn==null||dn.rangeCount<=0)return null;var hn=dn.getRangeAt(0);if(hn==null)return null;var un=this.normalizeNative(hn);return Zt.info("getNativeRange",un),un}},{key:"getRange",value:function(){var dn=this.getNativeRange();if(dn==null)return[null,null];var hn=this.normalizedToRange(dn);return[hn,dn]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(dn){var hn=this,un=[[dn.start.node,dn.start.offset]];dn.native.collapsed||un.push([dn.end.node,dn.end.offset]);var En=un.map(function(fn){var xn=ut(fn,2),an=xn[0],cn=xn[1],bn=St.default.find(an,!0),mn=bn.offset(hn.scroll);return cn===0?mn:bn instanceof St.default.Container?mn+bn.length():mn+bn.index(an,cn)}),wn=Math.min(Math.max.apply(Math,Ht(En)),this.scroll.length()-1),Sn=Math.min.apply(Math,[wn].concat(Ht(En)));return new tn(Sn,wn-Sn)}},{key:"normalizeNative",value:function(dn){if(!rn(this.root,dn.startContainer)||!dn.collapsed&&!rn(this.root,dn.endContainer))return null;var hn={start:{node:dn.startContainer,offset:dn.startOffset},end:{node:dn.endContainer,offset:dn.endOffset},native:dn};return[hn.start,hn.end].forEach(function(un){for(var En=un.node,wn=un.offset;!(En instanceof Text)&&En.childNodes.length>0;)if(En.childNodes.length>wn)En=En.childNodes[wn],wn=0;else if(En.childNodes.length===wn)En=En.lastChild,wn=En instanceof Text?En.data.length:En.childNodes.length+1;else break;un.node=En,un.offset=wn}),hn}},{key:"rangeToNative",value:function(dn){var hn=this,un=dn.collapsed?[dn.index]:[dn.index,dn.index+dn.length],En=[],wn=this.scroll.length();return un.forEach(function(Sn,fn){Sn=Math.min(wn-1,Sn);var xn=void 0,an=hn.scroll.leaf(Sn),cn=ut(an,2),bn=cn[0],mn=cn[1],Tn=bn.position(mn,fn!==0),An=ut(Tn,2);xn=An[0],mn=An[1],En.push(xn,mn)}),En.length<2&&(En=En.concat(En)),En}},{key:"scrollIntoView",value:function(dn){var hn=this.lastRange;if(hn!=null){var un=this.getBounds(hn.index,hn.length);if(un!=null){var En=this.scroll.length()-1,wn=this.scroll.line(Math.min(hn.index,En)),Sn=ut(wn,1),fn=Sn[0],xn=fn;if(hn.length>0){var an=this.scroll.line(Math.min(hn.index+hn.length,En)),cn=ut(an,1);xn=cn[0]}if(!(fn==null||xn==null)){var bn=dn.getBoundingClientRect();un.top<bn.top?dn.scrollTop-=bn.top-un.top:un.bottom>bn.bottom&&(dn.scrollTop+=un.bottom-bn.bottom)}}}}},{key:"setNativeRange",value:function(dn,hn){var un=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dn,En=arguments.length>3&&arguments[3]!==void 0?arguments[3]:hn,wn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Zt.info("setNativeRange",dn,hn,un,En),!(dn!=null&&(this.root.parentNode==null||dn.parentNode==null||un.parentNode==null))){var Sn=document.getSelection();if(Sn!=null)if(dn!=null){this.hasFocus()||this.root.focus();var fn=(this.getNativeRange()||{}).native;if(fn==null||wn||dn!==fn.startContainer||hn!==fn.startOffset||un!==fn.endContainer||En!==fn.endOffset){dn.tagName=="BR"&&(hn=[].indexOf.call(dn.parentNode.childNodes,dn),dn=dn.parentNode),un.tagName=="BR"&&(En=[].indexOf.call(un.parentNode.childNodes,un),un=un.parentNode);var xn=document.createRange();xn.setStart(dn,hn),xn.setEnd(un,En),Sn.removeAllRanges(),Sn.addRange(xn)}}else Sn.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(dn){var hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,un=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$t.default.sources.API;if(typeof hn=="string"&&(un=hn,hn=!1),Zt.info("setRange",dn),dn!=null){var En=this.rangeToNative(dn);this.setNativeRange.apply(this,Ht(En).concat([hn]))}else this.setNativeRange(null);this.update(un)}},{key:"update",value:function(){var dn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$t.default.sources.USER,hn=this.lastRange,un=this.getRange(),En=ut(un,2),wn=En[0],Sn=En[1];if(this.lastRange=wn,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,jt.default)(hn,this.lastRange)){var fn;!this.composing&&Sn!=null&&Sn.native.collapsed&&Sn.start.node!==this.cursor.textNode&&this.cursor.restore();var xn=[$t.default.events.SELECTION_CHANGE,(0,Tt.default)(this.lastRange),(0,Tt.default)(hn),dn];if((fn=this.emitter).emit.apply(fn,[$t.default.events.EDITOR_CHANGE].concat(xn)),dn!==$t.default.sources.SILENT){var an;(an=this.emitter).emit.apply(an,xn)}}}}]),on}();function rn(on,pn){try{pn.parentNode}catch{return!1}return pn instanceof Text&&(pn=pn.parentNode),on.contains(pn)}ot.Range=tn,ot.default=nn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Ut){for(var Bt=0;Bt<Ut.length;Bt++){var Ht=Ut[Bt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(zt,Ht.key,Ht)}}return function(zt,Ut,Bt){return Ut&&$t(zt.prototype,Ut),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Ut,Bt){zt===null&&(zt=Function.prototype);var Ht=Object.getOwnPropertyDescriptor(zt,Ut);if(Ht===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Ut,Bt)}else{if("value"in Ht)return Ht.value;var Zt=Ht.get;return Zt===void 0?void 0:Zt.call(Bt)}},ft=ct(0),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,[{key:"insertInto",value:function(Bt,Ht){Bt.children.length===0?dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"insertInto",this).call(this,Bt,Ht):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),zt}(St.default.Embed);Ft.blotName="break",Ft.tagName="BR",ot.default=Ft},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(jt[$t]=Ft[$t])};return function(jt,Ft){Rt(jt,Ft);function $t(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(44),ft=ct(30),St=ct(1),kt=function(Rt){ut(jt,Rt);function jt(Ft){var $t=Rt.call(this,Ft)||this;return $t.build(),$t}return jt.prototype.appendChild=function(Ft){this.insertBefore(Ft)},jt.prototype.attach=function(){Rt.prototype.attach.call(this),this.children.forEach(function(Ft){Ft.attach()})},jt.prototype.build=function(){var Ft=this;this.children=new dt.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function($t){try{var zt=Tt($t);Ft.insertBefore(zt,Ft.children.head||void 0)}catch(Ut){if(Ut instanceof St.ParchmentError)return;throw Ut}})},jt.prototype.deleteAt=function(Ft,$t){if(Ft===0&&$t===this.length())return this.remove();this.children.forEachAt(Ft,$t,function(zt,Ut,Bt){zt.deleteAt(Ut,Bt)})},jt.prototype.descendant=function(Ft,$t){var zt=this.children.find($t),Ut=zt[0],Bt=zt[1];return Ft.blotName==null&&Ft(Ut)||Ft.blotName!=null&&Ut instanceof Ft?[Ut,Bt]:Ut instanceof jt?Ut.descendant(Ft,Bt):[null,-1]},jt.prototype.descendants=function(Ft,$t,zt){$t===void 0&&($t=0),zt===void 0&&(zt=Number.MAX_VALUE);var Ut=[],Bt=zt;return this.children.forEachAt($t,zt,function(Ht,Jt,Zt){(Ft.blotName==null&&Ft(Ht)||Ft.blotName!=null&&Ht instanceof Ft)&&Ut.push(Ht),Ht instanceof jt&&(Ut=Ut.concat(Ht.descendants(Ft,Jt,Bt))),Bt-=Zt}),Ut},jt.prototype.detach=function(){this.children.forEach(function(Ft){Ft.detach()}),Rt.prototype.detach.call(this)},jt.prototype.formatAt=function(Ft,$t,zt,Ut){this.children.forEachAt(Ft,$t,function(Bt,Ht,Jt){Bt.formatAt(Ht,Jt,zt,Ut)})},jt.prototype.insertAt=function(Ft,$t,zt){var Ut=this.children.find(Ft),Bt=Ut[0],Ht=Ut[1];if(Bt)Bt.insertAt(Ht,$t,zt);else{var Jt=zt==null?St.create("text",$t):St.create($t,zt);this.appendChild(Jt)}},jt.prototype.insertBefore=function(Ft,$t){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(zt){return Ft instanceof zt}))throw new St.ParchmentError("Cannot insert "+Ft.statics.blotName+" into "+this.statics.blotName);Ft.insertInto(this,$t)},jt.prototype.length=function(){return this.children.reduce(function(Ft,$t){return Ft+$t.length()},0)},jt.prototype.moveChildren=function(Ft,$t){this.children.forEach(function(zt){Ft.insertBefore(zt,$t)})},jt.prototype.optimize=function(Ft){if(Rt.prototype.optimize.call(this,Ft),this.children.length===0)if(this.statics.defaultChild!=null){var $t=St.create(this.statics.defaultChild);this.appendChild($t),$t.optimize(Ft)}else this.remove()},jt.prototype.path=function(Ft,$t){$t===void 0&&($t=!1);var zt=this.children.find(Ft,$t),Ut=zt[0],Bt=zt[1],Ht=[[this,Ft]];return Ut instanceof jt?Ht.concat(Ut.path(Bt,$t)):(Ut!=null&&Ht.push([Ut,Bt]),Ht)},jt.prototype.removeChild=function(Ft){this.children.remove(Ft)},jt.prototype.replace=function(Ft){Ft instanceof jt&&Ft.moveChildren(this),Rt.prototype.replace.call(this,Ft)},jt.prototype.split=function(Ft,$t){if($t===void 0&&($t=!1),!$t){if(Ft===0)return this;if(Ft===this.length())return this.next}var zt=this.clone();return this.parent.insertBefore(zt,this.next),this.children.forEachAt(Ft,this.length(),function(Ut,Bt,Ht){Ut=Ut.split(Bt,$t),zt.appendChild(Ut)}),zt},jt.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},jt.prototype.update=function(Ft,$t){var zt=this,Ut=[],Bt=[];Ft.forEach(function(Ht){Ht.target===zt.domNode&&Ht.type==="childList"&&(Ut.push.apply(Ut,Ht.addedNodes),Bt.push.apply(Bt,Ht.removedNodes))}),Bt.forEach(function(Ht){if(!(Ht.parentNode!=null&&Ht.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Ht)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Jt=St.find(Ht);Jt!=null&&(Jt.domNode.parentNode==null||Jt.domNode.parentNode===zt.domNode)&&Jt.detach()}}),Ut.filter(function(Ht){return Ht.parentNode==zt.domNode}).sort(function(Ht,Jt){return Ht===Jt?0:Ht.compareDocumentPosition(Jt)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Ht){var Jt=null;Ht.nextSibling!=null&&(Jt=St.find(Ht.nextSibling));var Zt=Tt(Ht);(Zt.next!=Jt||Zt.next==null)&&(Zt.parent!=null&&Zt.parent.removeChild(zt),zt.insertBefore(Zt,Jt||void 0))})},jt}(ft.default);function Tt(Rt){var jt=St.find(Rt);if(jt==null)try{jt=St.create(Rt)}catch{jt=St.create(St.Scope.INLINE),[].slice.call(Rt.childNodes).forEach(function($t){jt.domNode.appendChild($t)}),Rt.parentNode&&Rt.parentNode.replaceChild(jt.domNode,Rt),jt.attach()}return jt}ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(jt[$t]=Ft[$t])};return function(jt,Ft){Rt(jt,Ft);function $t(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12),ft=ct(31),St=ct(17),kt=ct(1),Tt=function(Rt){ut(jt,Rt);function jt(Ft){var $t=Rt.call(this,Ft)||this;return $t.attributes=new ft.default($t.domNode),$t}return jt.formats=function(Ft){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return Ft.tagName.toLowerCase()},jt.prototype.format=function(Ft,$t){var zt=kt.query(Ft);zt instanceof dt.default?this.attributes.attribute(zt,$t):$t&&zt!=null&&(Ft!==this.statics.blotName||this.formats()[Ft]!==$t)&&this.replaceWith(Ft,$t)},jt.prototype.formats=function(){var Ft=this.attributes.values(),$t=this.statics.formats(this.domNode);return $t!=null&&(Ft[this.statics.blotName]=$t),Ft},jt.prototype.replaceWith=function(Ft,$t){var zt=Rt.prototype.replaceWith.call(this,Ft,$t);return this.attributes.copy(zt),zt},jt.prototype.update=function(Ft,$t){var zt=this;Rt.prototype.update.call(this,Ft,$t),Ft.some(function(Ut){return Ut.target===zt.domNode&&Ut.type==="attributes"})&&this.attributes.build()},jt.prototype.wrap=function(Ft,$t){var zt=Rt.prototype.wrap.call(this,Ft,$t);return zt instanceof jt&&zt.statics.scope===this.statics.scope&&this.attributes.move(zt),zt},jt}(St.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(30),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.value=function(Rt){return!0},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt||this.domNode.compareDocumentPosition(Rt)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(jt,1):-1},Tt.prototype.position=function(Rt,jt){var Ft=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return Rt>0&&(Ft+=1),[this.parent.domNode,Ft]},Tt.prototype.value=function(){var Rt;return Rt={},Rt[this.statics.blotName]=this.statics.value(this.domNode)||!0,Rt},Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=ct(11),dt=ct(3),ft={attributes:{compose:function(kt,Tt,Rt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var jt=dt(!0,{},Tt);Rt||(jt=Object.keys(jt).reduce(function($t,zt){return jt[zt]!=null&&($t[zt]=jt[zt]),$t},{}));for(var Ft in kt)kt[Ft]!==void 0&&Tt[Ft]===void 0&&(jt[Ft]=kt[Ft]);return Object.keys(jt).length>0?jt:void 0},diff:function(kt,Tt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Rt=Object.keys(kt).concat(Object.keys(Tt)).reduce(function(jt,Ft){return ut(kt[Ft],Tt[Ft])||(jt[Ft]=Tt[Ft]===void 0?null:Tt[Ft]),jt},{});return Object.keys(Rt).length>0?Rt:void 0},transform:function(kt,Tt,Rt){if(typeof kt!="object")return Tt;if(typeof Tt=="object"){if(!Rt)return Tt;var jt=Object.keys(Tt).reduce(function(Ft,$t){return kt[$t]===void 0&&(Ft[$t]=Tt[$t]),Ft},{});return Object.keys(jt).length>0?jt:void 0}}},iterator:function(kt){return new St(kt)},length:function(kt){return typeof kt.delete=="number"?kt.delete:typeof kt.retain=="number"?kt.retain:typeof kt.insert=="string"?kt.insert.length:1}};function St(kt){this.ops=kt,this.index=0,this.offset=0}St.prototype.hasNext=function(){return this.peekLength()<1/0},St.prototype.next=function(kt){kt||(kt=1/0);var Tt=this.ops[this.index];if(Tt){var Rt=this.offset,jt=ft.length(Tt);if(kt>=jt-Rt?(kt=jt-Rt,this.index+=1,this.offset=0):this.offset+=kt,typeof Tt.delete=="number")return{delete:kt};var Ft={};return Tt.attributes&&(Ft.attributes=Tt.attributes),typeof Tt.retain=="number"?Ft.retain=kt:typeof Tt.insert=="string"?Ft.insert=Tt.insert.substr(Rt,kt):Ft.insert=Tt.insert,Ft}else return{retain:1/0}},St.prototype.peek=function(){return this.ops[this.index]},St.prototype.peekLength=function(){return this.ops[this.index]?ft.length(this.ops[this.index])-this.offset:1/0},St.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},St.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var kt=this.offset,Tt=this.index,Rt=this.next(),jt=this.ops.slice(this.index);return this.offset=kt,this.index=Tt,[Rt].concat(jt)}else return[]},et.exports=ft},function(et,ot){var ct=function(){function ut(zt,Ut){return Ut!=null&&zt instanceof Ut}var dt;try{dt=Map}catch{dt=function(){}}var ft;try{ft=Set}catch{ft=function(){}}var St;try{St=Promise}catch{St=function(){}}function kt(zt,Ut,Bt,Ht,Jt){typeof Ut=="object"&&(Bt=Ut.depth,Ht=Ut.prototype,Jt=Ut.includeNonEnumerable,Ut=Ut.circular);var Zt=[],tn=[],nn=typeof Buffer<"u";typeof Ut>"u"&&(Ut=!0),typeof Bt>"u"&&(Bt=1/0);function rn(on,pn){if(on===null)return null;if(pn===0)return on;var dn,hn;if(typeof on!="object")return on;if(ut(on,dt))dn=new dt;else if(ut(on,ft))dn=new ft;else if(ut(on,St))dn=new St(function(bn,mn){on.then(function(Tn){bn(rn(Tn,pn-1))},function(Tn){mn(rn(Tn,pn-1))})});else if(kt.__isArray(on))dn=[];else if(kt.__isRegExp(on))dn=new RegExp(on.source,$t(on)),on.lastIndex&&(dn.lastIndex=on.lastIndex);else if(kt.__isDate(on))dn=new Date(on.getTime());else{if(nn&&Buffer.isBuffer(on))return Buffer.allocUnsafe?dn=Buffer.allocUnsafe(on.length):dn=new Buffer(on.length),on.copy(dn),dn;ut(on,Error)?dn=Object.create(on):typeof Ht>"u"?(hn=Object.getPrototypeOf(on),dn=Object.create(hn)):(dn=Object.create(Ht),hn=Ht)}if(Ut){var un=Zt.indexOf(on);if(un!=-1)return tn[un];Zt.push(on),tn.push(dn)}ut(on,dt)&&on.forEach(function(bn,mn){var Tn=rn(mn,pn-1),An=rn(bn,pn-1);dn.set(Tn,An)}),ut(on,ft)&&on.forEach(function(bn){var mn=rn(bn,pn-1);dn.add(mn)});for(var En in on){var wn;hn&&(wn=Object.getOwnPropertyDescriptor(hn,En)),!(wn&&wn.set==null)&&(dn[En]=rn(on[En],pn-1))}if(Object.getOwnPropertySymbols)for(var Sn=Object.getOwnPropertySymbols(on),En=0;En<Sn.length;En++){var fn=Sn[En],xn=Object.getOwnPropertyDescriptor(on,fn);xn&&!xn.enumerable&&!Jt||(dn[fn]=rn(on[fn],pn-1),xn.enumerable||Object.defineProperty(dn,fn,{enumerable:!1}))}if(Jt)for(var an=Object.getOwnPropertyNames(on),En=0;En<an.length;En++){var cn=an[En],xn=Object.getOwnPropertyDescriptor(on,cn);xn&&xn.enumerable||(dn[cn]=rn(on[cn],pn-1),Object.defineProperty(dn,cn,{enumerable:!1}))}return dn}return rn(zt,Bt)}kt.clonePrototype=function(Ut){if(Ut===null)return null;var Bt=function(){};return Bt.prototype=Ut,new Bt};function Tt(zt){return Object.prototype.toString.call(zt)}kt.__objToStr=Tt;function Rt(zt){return typeof zt=="object"&&Tt(zt)==="[object Date]"}kt.__isDate=Rt;function jt(zt){return typeof zt=="object"&&Tt(zt)==="[object Array]"}kt.__isArray=jt;function Ft(zt){return typeof zt=="object"&&Tt(zt)==="[object RegExp]"}kt.__isRegExp=Ft;function $t(zt){var Ut="";return zt.global&&(Ut+="g"),zt.ignoreCase&&(Ut+="i"),zt.multiline&&(Ut+="m"),Ut}return kt.__getRegExpFlags=$t,kt}();typeof et=="object"&&et.exports&&(et.exports=ct)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function dn(hn,un){var En=[],wn=!0,Sn=!1,fn=void 0;try{for(var xn=hn[Symbol.iterator](),an;!(wn=(an=xn.next()).done)&&(En.push(an.value),!(un&&En.length===un));wn=!0);}catch(cn){Sn=!0,fn=cn}finally{try{!wn&&xn.return&&xn.return()}finally{if(Sn)throw fn}}return En}return function(hn,un){if(Array.isArray(hn))return hn;if(Symbol.iterator in Object(hn))return dn(hn,un);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function dn(hn,un){for(var En=0;En<un.length;En++){var wn=un[En];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(hn,wn.key,wn)}}return function(hn,un,En){return un&&dn(hn.prototype,un),En&&dn(hn,En),hn}}(),ft=function dn(hn,un,En){hn===null&&(hn=Function.prototype);var wn=Object.getOwnPropertyDescriptor(hn,un);if(wn===void 0){var Sn=Object.getPrototypeOf(hn);return Sn===null?void 0:dn(Sn,un,En)}else{if("value"in wn)return wn.value;var fn=wn.get;return fn===void 0?void 0:fn.call(En)}},St=ct(0),kt=Zt(St),Tt=ct(8),Rt=Zt(Tt),jt=ct(4),Ft=Zt(jt),$t=ct(16),zt=Zt($t),Ut=ct(13),Bt=Zt(Ut),Ht=ct(25),Jt=Zt(Ht);function Zt(dn){return dn&&dn.__esModule?dn:{default:dn}}function tn(dn,hn){if(!(dn instanceof hn))throw new TypeError("Cannot call a class as a function")}function nn(dn,hn){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return hn&&(typeof hn=="object"||typeof hn=="function")?hn:dn}function rn(dn,hn){if(typeof hn!="function"&&hn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof hn);dn.prototype=Object.create(hn&&hn.prototype,{constructor:{value:dn,enumerable:!1,writable:!0,configurable:!0}}),hn&&(Object.setPrototypeOf?Object.setPrototypeOf(dn,hn):dn.__proto__=hn)}function on(dn){return dn instanceof Ft.default||dn instanceof jt.BlockEmbed}var pn=function(dn){rn(hn,dn);function hn(un,En){tn(this,hn);var wn=nn(this,(hn.__proto__||Object.getPrototypeOf(hn)).call(this,un));return wn.emitter=En.emitter,Array.isArray(En.whitelist)&&(wn.whitelist=En.whitelist.reduce(function(Sn,fn){return Sn[fn]=!0,Sn},{})),wn.domNode.addEventListener("DOMNodeInserted",function(){}),wn.optimize(),wn.enable(),wn}return dt(hn,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(En,wn){var Sn=this.line(En),fn=ut(Sn,2),xn=fn[0],an=fn[1],cn=this.line(En+wn),bn=ut(cn,1),mn=bn[0];if(ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"deleteAt",this).call(this,En,wn),mn!=null&&xn!==mn&&an>0){if(xn instanceof jt.BlockEmbed||mn instanceof jt.BlockEmbed){this.optimize();return}if(xn instanceof Bt.default){var Tn=xn.newlineIndex(xn.length(),!0);if(Tn>-1&&(xn=xn.split(Tn+1),xn===mn)){this.optimize();return}}else if(mn instanceof Bt.default){var An=mn.newlineIndex(0);An>-1&&mn.split(An+1)}var Pn=mn.children.head instanceof zt.default?null:mn.children.head;xn.moveChildren(mn,Pn),xn.remove()}this.optimize()}},{key:"enable",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",En)}},{key:"formatAt",value:function(En,wn,Sn,fn){this.whitelist!=null&&!this.whitelist[Sn]||(ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"formatAt",this).call(this,En,wn,Sn,fn),this.optimize())}},{key:"insertAt",value:function(En,wn,Sn){if(!(Sn!=null&&this.whitelist!=null&&!this.whitelist[wn])){if(En>=this.length())if(Sn==null||kt.default.query(wn,kt.default.Scope.BLOCK)==null){var fn=kt.default.create(this.statics.defaultChild);this.appendChild(fn),Sn==null&&wn.endsWith(`
`)&&(wn=wn.slice(0,-1)),fn.insertAt(0,wn,Sn)}else{var xn=kt.default.create(wn,Sn);this.appendChild(xn)}else ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"insertAt",this).call(this,En,wn,Sn);this.optimize()}}},{key:"insertBefore",value:function(En,wn){if(En.statics.scope===kt.default.Scope.INLINE_BLOT){var Sn=kt.default.create(this.statics.defaultChild);Sn.appendChild(En),En=Sn}ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"insertBefore",this).call(this,En,wn)}},{key:"leaf",value:function(En){return this.path(En).pop()||[null,-1]}},{key:"line",value:function(En){return En===this.length()?this.line(En-1):this.descendant(on,En)}},{key:"lines",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Sn=function fn(xn,an,cn){var bn=[],mn=cn;return xn.children.forEachAt(an,cn,function(Tn,An,Pn){on(Tn)?bn.push(Tn):Tn instanceof kt.default.Container&&(bn=bn.concat(fn(Tn,An,mn))),mn-=Pn}),bn};return Sn(this,En,wn)}},{key:"optimize",value:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"optimize",this).call(this,En,wn),En.length>0&&this.emitter.emit(Rt.default.events.SCROLL_OPTIMIZE,En,wn))}},{key:"path",value:function(En){return ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"path",this).call(this,En).slice(1)}},{key:"update",value:function(En){if(this.batch!==!0){var wn=Rt.default.sources.USER;typeof En=="string"&&(wn=En),Array.isArray(En)||(En=this.observer.takeRecords()),En.length>0&&this.emitter.emit(Rt.default.events.SCROLL_BEFORE_UPDATE,wn,En),ft(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"update",this).call(this,En.concat([])),En.length>0&&this.emitter.emit(Rt.default.events.SCROLL_UPDATE,wn,En)}}}]),hn}(kt.default.Scroll);pn.blotName="scroll",pn.className="ql-editor",pn.tagName="DIV",pn.defaultChild="block",pn.allowedChildren=[Ft.default,jt.BlockEmbed,Jt.default],ot.default=pn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SHORTKEY=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rn){return typeof Rn}:function(Rn){return Rn&&typeof Symbol=="function"&&Rn.constructor===Symbol&&Rn!==Symbol.prototype?"symbol":typeof Rn},dt=function(){function Rn(Cn,On){var In=[],Dn=!0,Fn=!1,Xn=void 0;try{for(var Vn=Cn[Symbol.iterator](),zn;!(Dn=(zn=Vn.next()).done)&&(In.push(zn.value),!(On&&In.length===On));Dn=!0);}catch(Zn){Fn=!0,Xn=Zn}finally{try{!Dn&&Vn.return&&Vn.return()}finally{if(Fn)throw Xn}}return In}return function(Cn,On){if(Array.isArray(Cn))return Cn;if(Symbol.iterator in Object(Cn))return Rn(Cn,On);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Rn(Cn,On){for(var In=0;In<On.length;In++){var Dn=On[In];Dn.enumerable=Dn.enumerable||!1,Dn.configurable=!0,"value"in Dn&&(Dn.writable=!0),Object.defineProperty(Cn,Dn.key,Dn)}}return function(Cn,On,In){return On&&Rn(Cn.prototype,On),In&&Rn(Cn,In),Cn}}(),St=ct(21),kt=dn(St),Tt=ct(11),Rt=dn(Tt),jt=ct(3),Ft=dn(jt),$t=ct(2),zt=dn($t),Ut=ct(20),Bt=dn(Ut),Ht=ct(0),Jt=dn(Ht),Zt=ct(5),tn=dn(Zt),nn=ct(10),rn=dn(nn),on=ct(9),pn=dn(on);function dn(Rn){return Rn&&Rn.__esModule?Rn:{default:Rn}}function hn(Rn,Cn,On){return Cn in Rn?Object.defineProperty(Rn,Cn,{value:On,enumerable:!0,configurable:!0,writable:!0}):Rn[Cn]=On,Rn}function un(Rn,Cn){if(!(Rn instanceof Cn))throw new TypeError("Cannot call a class as a function")}function En(Rn,Cn){if(!Rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Cn&&(typeof Cn=="object"||typeof Cn=="function")?Cn:Rn}function wn(Rn,Cn){if(typeof Cn!="function"&&Cn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Cn);Rn.prototype=Object.create(Cn&&Cn.prototype,{constructor:{value:Rn,enumerable:!1,writable:!0,configurable:!0}}),Cn&&(Object.setPrototypeOf?Object.setPrototypeOf(Rn,Cn):Rn.__proto__=Cn)}var Sn=(0,rn.default)("quill:keyboard"),fn=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",xn=function(Rn){wn(Cn,Rn),ft(Cn,null,[{key:"match",value:function(In,Dn){return Dn=Mn(Dn),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Fn){return!!Dn[Fn]!==In[Fn]&&Dn[Fn]!==null})?!1:Dn.key===(In.which||In.keyCode)}}]);function Cn(On,In){un(this,Cn);var Dn=En(this,(Cn.__proto__||Object.getPrototypeOf(Cn)).call(this,On,In));return Dn.bindings={},Object.keys(Dn.options.bindings).forEach(function(Fn){Fn==="list autofill"&&On.scroll.whitelist!=null&&!On.scroll.whitelist.list||Dn.options.bindings[Fn]&&Dn.addBinding(Dn.options.bindings[Fn])}),Dn.addBinding({key:Cn.keys.ENTER,shiftKey:null},Tn),Dn.addBinding({key:Cn.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Dn.addBinding({key:Cn.keys.BACKSPACE},{collapsed:!0},cn),Dn.addBinding({key:Cn.keys.DELETE},{collapsed:!0},bn)):(Dn.addBinding({key:Cn.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},cn),Dn.addBinding({key:Cn.keys.DELETE},{collapsed:!0,suffix:/^.?$/},bn)),Dn.addBinding({key:Cn.keys.BACKSPACE},{collapsed:!1},mn),Dn.addBinding({key:Cn.keys.DELETE},{collapsed:!1},mn),Dn.addBinding({key:Cn.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},cn),Dn.listen(),Dn}return ft(Cn,[{key:"addBinding",value:function(In){var Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Xn=Mn(In);if(Xn==null||Xn.key==null)return Sn.warn("Attempted to add invalid keyboard binding",Xn);typeof Dn=="function"&&(Dn={handler:Dn}),typeof Fn=="function"&&(Fn={handler:Fn}),Xn=(0,Ft.default)(Xn,Dn,Fn),this.bindings[Xn.key]=this.bindings[Xn.key]||[],this.bindings[Xn.key].push(Xn)}},{key:"listen",value:function(){var In=this;this.quill.root.addEventListener("keydown",function(Dn){if(!Dn.defaultPrevented){var Fn=Dn.which||Dn.keyCode,Xn=(In.bindings[Fn]||[]).filter(function(Tr){return Cn.match(Dn,Tr)});if(Xn.length!==0){var Vn=In.quill.getSelection();if(!(Vn==null||!In.quill.hasFocus())){var zn=In.quill.getLine(Vn.index),Zn=dt(zn,2),lr=Zn[0],hr=Zn[1],$n=In.quill.getLeaf(Vn.index),Un=dt($n,2),Kn=Un[0],Yn=Un[1],Wn=Vn.length===0?[Kn,Yn]:In.quill.getLeaf(Vn.index+Vn.length),cr=dt(Wn,2),or=cr[0],ur=cr[1],Cr=Kn instanceof Jt.default.Text?Kn.value().slice(0,Yn):"",Rr=or instanceof Jt.default.Text?or.value().slice(ur):"",br={collapsed:Vn.length===0,empty:Vn.length===0&&lr.length()<=1,format:In.quill.getFormat(Vn),offset:hr,prefix:Cr,suffix:Rr},Ts=Xn.some(function(Tr){if(Tr.collapsed!=null&&Tr.collapsed!==br.collapsed||Tr.empty!=null&&Tr.empty!==br.empty||Tr.offset!=null&&Tr.offset!==br.offset)return!1;if(Array.isArray(Tr.format)){if(Tr.format.every(function(Wl){return br.format[Wl]==null}))return!1}else if(ut(Tr.format)==="object"&&!Object.keys(Tr.format).every(function(Wl){return Tr.format[Wl]===!0?br.format[Wl]!=null:Tr.format[Wl]===!1?br.format[Wl]==null:(0,Rt.default)(Tr.format[Wl],br.format[Wl])}))return!1;return Tr.prefix!=null&&!Tr.prefix.test(br.prefix)||Tr.suffix!=null&&!Tr.suffix.test(br.suffix)?!1:Tr.handler.call(In,Vn,br)!==!0});Ts&&Dn.preventDefault()}}}})}}]),Cn}(pn.default);xn.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},xn.DEFAULTS={bindings:{bold:Pn("bold"),italic:Pn("italic"),underline:Pn("underline"),indent:{key:xn.keys.TAB,format:["blockquote","indent","list"],handler:function(Cn,On){if(On.collapsed&&On.offset!==0)return!0;this.quill.format("indent","+1",tn.default.sources.USER)}},outdent:{key:xn.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Cn,On){if(On.collapsed&&On.offset!==0)return!0;this.quill.format("indent","-1",tn.default.sources.USER)}},"outdent backspace":{key:xn.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Cn,On){On.format.indent!=null?this.quill.format("indent","-1",tn.default.sources.USER):On.format.list!=null&&this.quill.format("list",!1,tn.default.sources.USER)}},"indent code-block":An(!0),"outdent code-block":An(!1),"remove tab":{key:xn.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Cn){this.quill.deleteText(Cn.index-1,1,tn.default.sources.USER)}},tab:{key:xn.keys.TAB,handler:function(Cn){this.quill.history.cutoff();var On=new zt.default().retain(Cn.index).delete(Cn.length).insert("	");this.quill.updateContents(On,tn.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Cn.index+1,tn.default.sources.SILENT)}},"list empty enter":{key:xn.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Cn,On){this.quill.format("list",!1,tn.default.sources.USER),On.format.indent&&this.quill.format("indent",!1,tn.default.sources.USER)}},"checklist enter":{key:xn.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Cn){var On=this.quill.getLine(Cn.index),In=dt(On,2),Dn=In[0],Fn=In[1],Xn=(0,Ft.default)({},Dn.formats(),{list:"checked"}),Vn=new zt.default().retain(Cn.index).insert(`
`,Xn).retain(Dn.length()-Fn-1).retain(1,{list:"unchecked"});this.quill.updateContents(Vn,tn.default.sources.USER),this.quill.setSelection(Cn.index+1,tn.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:xn.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Cn,On){var In=this.quill.getLine(Cn.index),Dn=dt(In,2),Fn=Dn[0],Xn=Dn[1],Vn=new zt.default().retain(Cn.index).insert(`
`,On.format).retain(Fn.length()-Xn-1).retain(1,{header:null});this.quill.updateContents(Vn,tn.default.sources.USER),this.quill.setSelection(Cn.index+1,tn.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Cn,On){var In=On.prefix.length,Dn=this.quill.getLine(Cn.index),Fn=dt(Dn,2),Xn=Fn[0],Vn=Fn[1];if(Vn>In)return!0;var zn=void 0;switch(On.prefix.trim()){case"[]":case"[ ]":zn="unchecked";break;case"[x]":zn="checked";break;case"-":case"*":zn="bullet";break;default:zn="ordered"}this.quill.insertText(Cn.index," ",tn.default.sources.USER),this.quill.history.cutoff();var Zn=new zt.default().retain(Cn.index-Vn).delete(In+1).retain(Xn.length()-2-Vn).retain(1,{list:zn});this.quill.updateContents(Zn,tn.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Cn.index-In,tn.default.sources.SILENT)}},"code exit":{key:xn.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Cn){var On=this.quill.getLine(Cn.index),In=dt(On,2),Dn=In[0],Fn=In[1],Xn=new zt.default().retain(Cn.index+Dn.length()-Fn-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Xn,tn.default.sources.USER)}},"embed left":an(xn.keys.LEFT,!1),"embed left shift":an(xn.keys.LEFT,!0),"embed right":an(xn.keys.RIGHT,!1),"embed right shift":an(xn.keys.RIGHT,!0)}};function an(Rn,Cn){var On,In=Rn===xn.keys.LEFT?"prefix":"suffix";return On={key:Rn,shiftKey:Cn,altKey:null},hn(On,In,/^$/),hn(On,"handler",function(Fn){var Xn=Fn.index;Rn===xn.keys.RIGHT&&(Xn+=Fn.length+1);var Vn=this.quill.getLeaf(Xn),zn=dt(Vn,1),Zn=zn[0];return Zn instanceof Jt.default.Embed?(Rn===xn.keys.LEFT?Cn?this.quill.setSelection(Fn.index-1,Fn.length+1,tn.default.sources.USER):this.quill.setSelection(Fn.index-1,tn.default.sources.USER):Cn?this.quill.setSelection(Fn.index,Fn.length+1,tn.default.sources.USER):this.quill.setSelection(Fn.index+Fn.length+1,tn.default.sources.USER),!1):!0}),On}function cn(Rn,Cn){if(!(Rn.index===0||this.quill.getLength()<=1)){var On=this.quill.getLine(Rn.index),In=dt(On,1),Dn=In[0],Fn={};if(Cn.offset===0){var Xn=this.quill.getLine(Rn.index-1),Vn=dt(Xn,1),zn=Vn[0];if(zn!=null&&zn.length()>1){var Zn=Dn.formats(),lr=this.quill.getFormat(Rn.index-1,1);Fn=Bt.default.attributes.diff(Zn,lr)||{}}}var hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Cn.prefix)?2:1;this.quill.deleteText(Rn.index-hr,hr,tn.default.sources.USER),Object.keys(Fn).length>0&&this.quill.formatLine(Rn.index-hr,hr,Fn,tn.default.sources.USER),this.quill.focus()}}function bn(Rn,Cn){var On=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Cn.suffix)?2:1;if(!(Rn.index>=this.quill.getLength()-On)){var In={},Dn=0,Fn=this.quill.getLine(Rn.index),Xn=dt(Fn,1),Vn=Xn[0];if(Cn.offset>=Vn.length()-1){var zn=this.quill.getLine(Rn.index+1),Zn=dt(zn,1),lr=Zn[0];if(lr){var hr=Vn.formats(),$n=this.quill.getFormat(Rn.index,1);In=Bt.default.attributes.diff(hr,$n)||{},Dn=lr.length()}}this.quill.deleteText(Rn.index,On,tn.default.sources.USER),Object.keys(In).length>0&&this.quill.formatLine(Rn.index+Dn-1,On,In,tn.default.sources.USER)}}function mn(Rn){var Cn=this.quill.getLines(Rn),On={};if(Cn.length>1){var In=Cn[0].formats(),Dn=Cn[Cn.length-1].formats();On=Bt.default.attributes.diff(Dn,In)||{}}this.quill.deleteText(Rn,tn.default.sources.USER),Object.keys(On).length>0&&this.quill.formatLine(Rn.index,1,On,tn.default.sources.USER),this.quill.setSelection(Rn.index,tn.default.sources.SILENT),this.quill.focus()}function Tn(Rn,Cn){var On=this;Rn.length>0&&this.quill.scroll.deleteAt(Rn.index,Rn.length);var In=Object.keys(Cn.format).reduce(function(Dn,Fn){return Jt.default.query(Fn,Jt.default.Scope.BLOCK)&&!Array.isArray(Cn.format[Fn])&&(Dn[Fn]=Cn.format[Fn]),Dn},{});this.quill.insertText(Rn.index,`
`,In,tn.default.sources.USER),this.quill.setSelection(Rn.index+1,tn.default.sources.SILENT),this.quill.focus(),Object.keys(Cn.format).forEach(function(Dn){In[Dn]==null&&(Array.isArray(Cn.format[Dn])||Dn!=="link"&&On.quill.format(Dn,Cn.format[Dn],tn.default.sources.USER))})}function An(Rn){return{key:xn.keys.TAB,shiftKey:!Rn,format:{"code-block":!0},handler:function(On){var In=Jt.default.query("code-block"),Dn=On.index,Fn=On.length,Xn=this.quill.scroll.descendant(In,Dn),Vn=dt(Xn,2),zn=Vn[0],Zn=Vn[1];if(zn!=null){var lr=this.quill.getIndex(zn),hr=zn.newlineIndex(Zn,!0)+1,$n=zn.newlineIndex(lr+Zn+Fn),Un=zn.domNode.textContent.slice(hr,$n).split(`
`);Zn=0,Un.forEach(function(Kn,Yn){Rn?(zn.insertAt(hr+Zn,In.TAB),Zn+=In.TAB.length,Yn===0?Dn+=In.TAB.length:Fn+=In.TAB.length):Kn.startsWith(In.TAB)&&(zn.deleteAt(hr+Zn,In.TAB.length),Zn-=In.TAB.length,Yn===0?Dn-=In.TAB.length:Fn-=In.TAB.length),Zn+=Kn.length+1}),this.quill.update(tn.default.sources.USER),this.quill.setSelection(Dn,Fn,tn.default.sources.SILENT)}}}}function Pn(Rn){return{key:Rn[0].toUpperCase(),shortKey:!0,handler:function(On,In){this.quill.format(Rn,!In.format[Rn],tn.default.sources.USER)}}}function Mn(Rn){if(typeof Rn=="string"||typeof Rn=="number")return Mn({key:Rn});if((typeof Rn>"u"?"undefined":ut(Rn))==="object"&&(Rn=(0,kt.default)(Rn,!1)),typeof Rn.key=="string")if(xn.keys[Rn.key.toUpperCase()]!=null)Rn.key=xn.keys[Rn.key.toUpperCase()];else if(Rn.key.length===1)Rn.key=Rn.key.toUpperCase().charCodeAt(0);else return null;return Rn.shortKey&&(Rn[fn]=Rn.shortKey,delete Rn.shortKey),Rn}ot.default=xn,ot.SHORTKEY=fn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ht,Jt){var Zt=[],tn=!0,nn=!1,rn=void 0;try{for(var on=Ht[Symbol.iterator](),pn;!(tn=(pn=on.next()).done)&&(Zt.push(pn.value),!(Jt&&Zt.length===Jt));tn=!0);}catch(dn){nn=!0,rn=dn}finally{try{!tn&&on.return&&on.return()}finally{if(nn)throw rn}}return Zt}return function(Ht,Jt){if(Array.isArray(Ht))return Ht;if(Symbol.iterator in Object(Ht))return Bt(Ht,Jt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function Bt(Ht,Jt,Zt){Ht===null&&(Ht=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ht,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ht);return nn===null?void 0:Bt(nn,Jt,Zt)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(Zt)}},ft=function(){function Bt(Ht,Jt){for(var Zt=0;Zt<Jt.length;Zt++){var tn=Jt[Zt];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ht,tn.key,tn)}}return function(Ht,Jt,Zt){return Jt&&Bt(Ht.prototype,Jt),Zt&&Bt(Ht,Zt),Ht}}(),St=ct(0),kt=jt(St),Tt=ct(7),Rt=jt(Tt);function jt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Ft(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function $t(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function zt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ut=function(Bt){zt(Ht,Bt),ft(Ht,null,[{key:"value",value:function(){}}]);function Ht(Jt,Zt){Ft(this,Ht);var tn=$t(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Jt));return tn.selection=Zt,tn.textNode=document.createTextNode(Ht.CONTENTS),tn.domNode.appendChild(tn.textNode),tn._length=0,tn}return ft(Ht,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(Zt,tn){if(this._length!==0)return dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"format",this).call(this,Zt,tn);for(var nn=this,rn=0;nn!=null&&nn.statics.scope!==kt.default.Scope.BLOCK_BLOT;)rn+=nn.offset(nn.parent),nn=nn.parent;nn!=null&&(this._length=Ht.CONTENTS.length,nn.optimize(),nn.formatAt(rn,Ht.CONTENTS.length,Zt,tn),this._length=0)}},{key:"index",value:function(Zt,tn){return Zt===this.textNode?0:dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"index",this).call(this,Zt,tn)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var Zt=this.textNode,tn=this.selection.getNativeRange(),nn=void 0,rn=void 0,on=void 0;if(tn!=null&&tn.start.node===Zt&&tn.end.node===Zt){var pn=[Zt,tn.start.offset,tn.end.offset];nn=pn[0],rn=pn[1],on=pn[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Ht.CONTENTS){var dn=this.textNode.data.split(Ht.CONTENTS).join("");this.next instanceof Rt.default?(nn=this.next.domNode,this.next.insertAt(0,dn),this.textNode.data=Ht.CONTENTS):(this.textNode.data=dn,this.parent.insertBefore(kt.default.create(this.textNode),this),this.textNode=document.createTextNode(Ht.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),rn!=null){var hn=[rn,on].map(function(En){return Math.max(0,Math.min(nn.data.length,En-1))}),un=ut(hn,2);return rn=un[0],on=un[1],{startNode:nn,startOffset:rn,endNode:nn,endOffset:on}}}}},{key:"update",value:function(Zt,tn){var nn=this;if(Zt.some(function(on){return on.type==="characterData"&&on.target===nn.textNode})){var rn=this.restore();rn&&(tn.range=rn)}}},{key:"value",value:function(){return""}}]),Ht}(kt.default.Embed);Ut.blotName="cursor",Ut.className="ql-cursor",Ut.tagName="span",Ut.CONTENTS="\uFEFF",ot.default=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=kt(ut),ft=ct(4),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return zt}(dt.default.Container);Ft.allowedChildren=[St.default,ft.BlockEmbed,Ft],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.ColorStyle=ot.ColorClass=ot.ColorAttributor=void 0;var ut=function(){function Ut(Bt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var Zt=Ht[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Bt,Zt.key,Zt)}}return function(Bt,Ht,Jt){return Ht&&Ut(Bt.prototype,Ht),Jt&&Ut(Bt,Jt),Bt}}(),dt=function Ut(Bt,Ht,Jt){Bt===null&&(Bt=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Bt,Ht);if(Zt===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Ut(tn,Ht,Jt)}else{if("value"in Zt)return Zt.value;var nn=Zt.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(0),St=kt(ft);function kt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Tt(Ut,Bt){if(!(Ut instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Rt(Ut,Bt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Ut}function jt(Ut,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Ut.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Bt):Ut.__proto__=Bt)}var Ft=function(Ut){jt(Bt,Ut);function Bt(){return Tt(this,Bt),Rt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"value",value:function(Jt){var Zt=dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"value",this).call(this,Jt);return Zt.startsWith("rgb(")?(Zt=Zt.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+Zt.split(",").map(function(tn){return("00"+parseInt(tn).toString(16)).slice(-2)}).join("")):Zt}}]),Bt}(St.default.Attributor.Style),$t=new St.default.Attributor.Class("color","ql-color",{scope:St.default.Scope.INLINE}),zt=new Ft("color","color",{scope:St.default.Scope.INLINE});ot.ColorAttributor=Ft,ot.ColorClass=$t,ot.ColorStyle=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.sanitize=ot.default=void 0;var ut=function(){function zt(Ut,Bt){for(var Ht=0;Ht<Bt.length;Ht++){var Jt=Bt[Ht];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Ut,Jt.key,Jt)}}return function(Ut,Bt,Ht){return Bt&&zt(Ut.prototype,Bt),Ht&&zt(Ut,Ht),Ut}}(),dt=function zt(Ut,Bt,Ht){Ut===null&&(Ut=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Ut,Bt);if(Jt===void 0){var Zt=Object.getPrototypeOf(Ut);return Zt===null?void 0:zt(Zt,Bt,Ht)}else{if("value"in Jt)return Jt.value;var tn=Jt.get;return tn===void 0?void 0:tn.call(Ht)}},ft=ct(6),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Ut){if(!(zt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Rt(zt,Ut){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:zt}function jt(zt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);zt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Ut):zt.__proto__=Ut)}var Ft=function(zt){jt(Ut,zt);function Ut(){return Tt(this,Ut),Rt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ut(Ut,[{key:"format",value:function(Ht,Jt){if(Ht!==this.statics.blotName||!Jt)return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"format",this).call(this,Ht,Jt);Jt=this.constructor.sanitize(Jt),this.domNode.setAttribute("href",Jt)}}],[{key:"create",value:function(Ht){var Jt=dt(Ut.__proto__||Object.getPrototypeOf(Ut),"create",this).call(this,Ht);return Ht=this.sanitize(Ht),Jt.setAttribute("href",Ht),Jt.setAttribute("rel","noopener noreferrer"),Jt.setAttribute("target","_blank"),Jt}},{key:"formats",value:function(Ht){return Ht.getAttribute("href")}},{key:"sanitize",value:function(Ht){return $t(Ht,this.PROTOCOL_WHITELIST)?Ht:this.SANITIZED_URL}}]),Ut}(St.default);Ft.blotName="link",Ft.tagName="A",Ft.SANITIZED_URL="about:blank",Ft.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function $t(zt,Ut){var Bt=document.createElement("a");Bt.href=zt;var Ht=Bt.href.slice(0,Bt.href.indexOf(":"));return Ut.indexOf(Ht)>-1}ot.default=Ft,ot.sanitize=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ut){return typeof Ut}:function(Ut){return Ut&&typeof Symbol=="function"&&Ut.constructor===Symbol&&Ut!==Symbol.prototype?"symbol":typeof Ut},dt=function(){function Ut(Bt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var Zt=Ht[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Bt,Zt.key,Zt)}}return function(Bt,Ht,Jt){return Ht&&Ut(Bt.prototype,Ht),Jt&&Ut(Bt,Jt),Bt}}(),ft=ct(23),St=Rt(ft),kt=ct(107),Tt=Rt(kt);function Rt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function jt(Ut,Bt){if(!(Ut instanceof Bt))throw new TypeError("Cannot call a class as a function")}var Ft=0;function $t(Ut,Bt){Ut.setAttribute(Bt,Ut.getAttribute(Bt)!=="true")}var zt=function(){function Ut(Bt){var Ht=this;jt(this,Ut),this.select=Bt,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Ht.togglePicker()}),this.label.addEventListener("keydown",function(Jt){switch(Jt.keyCode){case St.default.keys.ENTER:Ht.togglePicker();break;case St.default.keys.ESCAPE:Ht.escape(),Jt.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return dt(Ut,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),$t(this.label,"aria-expanded"),$t(this.options,"aria-hidden")}},{key:"buildItem",value:function(Ht){var Jt=this,Zt=document.createElement("span");return Zt.tabIndex="0",Zt.setAttribute("role","button"),Zt.classList.add("ql-picker-item"),Ht.hasAttribute("value")&&Zt.setAttribute("data-value",Ht.getAttribute("value")),Ht.textContent&&Zt.setAttribute("data-label",Ht.textContent),Zt.addEventListener("click",function(){Jt.selectItem(Zt,!0)}),Zt.addEventListener("keydown",function(tn){switch(tn.keyCode){case St.default.keys.ENTER:Jt.selectItem(Zt,!0),tn.preventDefault();break;case St.default.keys.ESCAPE:Jt.escape(),tn.preventDefault();break}}),Zt}},{key:"buildLabel",value:function(){var Ht=document.createElement("span");return Ht.classList.add("ql-picker-label"),Ht.innerHTML=Tt.default,Ht.tabIndex="0",Ht.setAttribute("role","button"),Ht.setAttribute("aria-expanded","false"),this.container.appendChild(Ht),Ht}},{key:"buildOptions",value:function(){var Ht=this,Jt=document.createElement("span");Jt.classList.add("ql-picker-options"),Jt.setAttribute("aria-hidden","true"),Jt.tabIndex="-1",Jt.id="ql-picker-options-"+Ft,Ft+=1,this.label.setAttribute("aria-controls",Jt.id),this.options=Jt,[].slice.call(this.select.options).forEach(function(Zt){var tn=Ht.buildItem(Zt);Jt.appendChild(tn),Zt.selected===!0&&Ht.selectItem(tn)}),this.container.appendChild(Jt)}},{key:"buildPicker",value:function(){var Ht=this;[].slice.call(this.select.attributes).forEach(function(Jt){Ht.container.setAttribute(Jt.name,Jt.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Ht=this;this.close(),setTimeout(function(){return Ht.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Ht){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Zt=this.container.querySelector(".ql-selected");if(Ht!==Zt&&(Zt!=null&&Zt.classList.remove("ql-selected"),Ht!=null&&(Ht.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Ht.parentNode.children,Ht),Ht.hasAttribute("data-value")?this.label.setAttribute("data-value",Ht.getAttribute("data-value")):this.label.removeAttribute("data-value"),Ht.hasAttribute("data-label")?this.label.setAttribute("data-label",Ht.getAttribute("data-label")):this.label.removeAttribute("data-label"),Jt))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ut(Event))==="object"){var tn=document.createEvent("Event");tn.initEvent("change",!0,!0),this.select.dispatchEvent(tn)}this.close()}}},{key:"update",value:function(){var Ht=void 0;if(this.select.selectedIndex>-1){var Jt=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Ht=this.select.options[this.select.selectedIndex],this.selectItem(Jt)}else this.selectItem(null);var Zt=Ht!=null&&Ht!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",Zt)}}]),Ut}();ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=Sn(ut),ft=ct(5),St=Sn(ft),kt=ct(4),Tt=Sn(kt),Rt=ct(16),jt=Sn(Rt),Ft=ct(25),$t=Sn(Ft),zt=ct(24),Ut=Sn(zt),Bt=ct(35),Ht=Sn(Bt),Jt=ct(6),Zt=Sn(Jt),tn=ct(22),nn=Sn(tn),rn=ct(7),on=Sn(rn),pn=ct(55),dn=Sn(pn),hn=ct(42),un=Sn(hn),En=ct(23),wn=Sn(En);function Sn(fn){return fn&&fn.__esModule?fn:{default:fn}}St.default.register({"blots/block":Tt.default,"blots/block/embed":kt.BlockEmbed,"blots/break":jt.default,"blots/container":$t.default,"blots/cursor":Ut.default,"blots/embed":Ht.default,"blots/inline":Zt.default,"blots/scroll":nn.default,"blots/text":on.default,"modules/clipboard":dn.default,"modules/history":un.default,"modules/keyboard":wn.default}),dt.default.register(Tt.default,jt.default,Ut.default,Zt.default,nn.default,on.default),ot.default=St.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St){this.domNode=St,this.domNode[ut.DATA_KEY]={blot:this}}return Object.defineProperty(ft.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ft.create=function(St){if(this.tagName==null)throw new ut.ParchmentError("Blot definition missing tagName");var kt;return Array.isArray(this.tagName)?(typeof St=="string"&&(St=St.toUpperCase(),parseInt(St).toString()===St&&(St=parseInt(St))),typeof St=="number"?kt=document.createElement(this.tagName[St-1]):this.tagName.indexOf(St)>-1?kt=document.createElement(St):kt=document.createElement(this.tagName[0])):kt=document.createElement(this.tagName),this.className&&kt.classList.add(this.className),kt},ft.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},ft.prototype.clone=function(){var St=this.domNode.cloneNode(!1);return ut.create(St)},ft.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ut.DATA_KEY]},ft.prototype.deleteAt=function(St,kt){var Tt=this.isolate(St,kt);Tt.remove()},ft.prototype.formatAt=function(St,kt,Tt,Rt){var jt=this.isolate(St,kt);if(ut.query(Tt,ut.Scope.BLOT)!=null&&Rt)jt.wrap(Tt,Rt);else if(ut.query(Tt,ut.Scope.ATTRIBUTE)!=null){var Ft=ut.create(this.statics.scope);jt.wrap(Ft),Ft.format(Tt,Rt)}},ft.prototype.insertAt=function(St,kt,Tt){var Rt=Tt==null?ut.create("text",kt):ut.create(kt,Tt),jt=this.split(St);this.parent.insertBefore(Rt,jt)},ft.prototype.insertInto=function(St,kt){kt===void 0&&(kt=null),this.parent!=null&&this.parent.children.remove(this);var Tt=null;St.children.insertBefore(this,kt),kt!=null&&(Tt=kt.domNode),(this.domNode.parentNode!=St.domNode||this.domNode.nextSibling!=Tt)&&St.domNode.insertBefore(this.domNode,Tt),this.parent=St,this.attach()},ft.prototype.isolate=function(St,kt){var Tt=this.split(St);return Tt.split(kt),Tt},ft.prototype.length=function(){return 1},ft.prototype.offset=function(St){return St===void 0&&(St=this.parent),this.parent==null||this==St?0:this.parent.children.offset(this)+this.parent.offset(St)},ft.prototype.optimize=function(St){this.domNode[ut.DATA_KEY]!=null&&delete this.domNode[ut.DATA_KEY].mutations},ft.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ft.prototype.replace=function(St){St.parent!=null&&(St.parent.insertBefore(this,St.next),St.remove())},ft.prototype.replaceWith=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return Tt.replace(this),Tt},ft.prototype.split=function(St,kt){return St===0?this:this.next},ft.prototype.update=function(St,kt){},ft.prototype.wrap=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return this.parent!=null&&this.parent.insertBefore(Tt,this.next),Tt.appendChild(this),Tt},ft.blotName="abstract",ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(12),dt=ct(32),ft=ct(33),St=ct(1),kt=function(){function Tt(Rt){this.attributes={},this.domNode=Rt,this.build()}return Tt.prototype.attribute=function(Rt,jt){jt?Rt.add(this.domNode,jt)&&(Rt.value(this.domNode)!=null?this.attributes[Rt.attrName]=Rt:delete this.attributes[Rt.attrName]):(Rt.remove(this.domNode),delete this.attributes[Rt.attrName])},Tt.prototype.build=function(){var Rt=this;this.attributes={};var jt=ut.default.keys(this.domNode),Ft=dt.default.keys(this.domNode),$t=ft.default.keys(this.domNode);jt.concat(Ft).concat($t).forEach(function(zt){var Ut=St.query(zt,St.Scope.ATTRIBUTE);Ut instanceof ut.default&&(Rt.attributes[Ut.attrName]=Ut)})},Tt.prototype.copy=function(Rt){var jt=this;Object.keys(this.attributes).forEach(function(Ft){var $t=jt.attributes[Ft].value(jt.domNode);Rt.format(Ft,$t)})},Tt.prototype.move=function(Rt){var jt=this;this.copy(Rt),Object.keys(this.attributes).forEach(function(Ft){jt.attributes[Ft].remove(jt.domNode)}),this.attributes={}},Tt.prototype.values=function(){var Rt=this;return Object.keys(this.attributes).reduce(function(jt,Ft){return jt[Ft]=Rt.attributes[Ft].value(Rt.domNode),jt},{})},Tt}();ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt,Tt){var Rt=kt.getAttribute("class")||"";return Rt.split(/\s+/).filter(function(jt){return jt.indexOf(Tt+"-")===0})}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("class")||"").split(/\s+/).map(function(jt){return jt.split("-").slice(0,-1).join("-")})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(this.remove(Rt),Rt.classList.add(this.keyName+"-"+jt),!0):!1},Tt.prototype.remove=function(Rt){var jt=ft(Rt,this.keyName);jt.forEach(function(Ft){Rt.classList.remove(Ft)}),Rt.classList.length===0&&Rt.removeAttribute("class")},Tt.prototype.value=function(Rt){var jt=ft(Rt,this.keyName)[0]||"",Ft=jt.slice(this.keyName.length+1);return this.canAdd(Rt,Ft)?Ft:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt){var Tt=kt.split("-"),Rt=Tt.slice(1).map(function(jt){return jt[0].toUpperCase()+jt.slice(1)}).join("");return Tt[0]+Rt}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("style")||"").split(";").map(function(jt){var Ft=jt.split(":");return Ft[0].trim()})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(Rt.style[ft(this.keyName)]=jt,!0):!1},Tt.prototype.remove=function(Rt){Rt.style[ft(this.keyName)]="",Rt.getAttribute("style")||Rt.removeAttribute("style")},Tt.prototype.value=function(Rt){var jt=Rt.style[ft(this.keyName)];return this.canAdd(Rt,jt)?jt:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){dt(this,St),this.quill=kt,this.options=Tt,this.modules={}}return ut(St,[{key:"init",value:function(){var Tt=this;Object.keys(this.options.modules).forEach(function(Rt){Tt.modules[Rt]==null&&Tt.addModule(Rt)})}},{key:"addModule",value:function(Tt){var Rt=this.quill.constructor.import("modules/"+Tt);return this.modules[Tt]=new Rt(this.quill,this.options.modules[Tt]||{}),this.modules[Tt]}}]),St}();ft.DEFAULTS={modules:{}},ft.themes={default:ft},ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ht,Jt){for(var Zt=0;Zt<Jt.length;Zt++){var tn=Jt[Zt];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ht,tn.key,tn)}}return function(Ht,Jt,Zt){return Jt&&Bt(Ht.prototype,Jt),Zt&&Bt(Ht,Zt),Ht}}(),dt=function Bt(Ht,Jt,Zt){Ht===null&&(Ht=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ht,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ht);return nn===null?void 0:Bt(nn,Jt,Zt)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(Zt)}},ft=ct(0),St=Rt(ft),kt=ct(7),Tt=Rt(kt);function Rt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function jt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Ft(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function $t(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var zt="\uFEFF",Ut=function(Bt){$t(Ht,Bt);function Ht(Jt){jt(this,Ht);var Zt=Ft(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Jt));return Zt.contentNode=document.createElement("span"),Zt.contentNode.setAttribute("contenteditable",!1),[].slice.call(Zt.domNode.childNodes).forEach(function(tn){Zt.contentNode.appendChild(tn)}),Zt.leftGuard=document.createTextNode(zt),Zt.rightGuard=document.createTextNode(zt),Zt.domNode.appendChild(Zt.leftGuard),Zt.domNode.appendChild(Zt.contentNode),Zt.domNode.appendChild(Zt.rightGuard),Zt}return ut(Ht,[{key:"index",value:function(Zt,tn){return Zt===this.leftGuard?0:Zt===this.rightGuard?1:dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"index",this).call(this,Zt,tn)}},{key:"restore",value:function(Zt){var tn=void 0,nn=void 0,rn=Zt.data.split(zt).join("");if(Zt===this.leftGuard)if(this.prev instanceof Tt.default){var on=this.prev.length();this.prev.insertAt(on,rn),tn={startNode:this.prev.domNode,startOffset:on+rn.length}}else nn=document.createTextNode(rn),this.parent.insertBefore(St.default.create(nn),this),tn={startNode:nn,startOffset:rn.length};else Zt===this.rightGuard&&(this.next instanceof Tt.default?(this.next.insertAt(0,rn),tn={startNode:this.next.domNode,startOffset:rn.length}):(nn=document.createTextNode(rn),this.parent.insertBefore(St.default.create(nn),this.next),tn={startNode:nn,startOffset:rn.length}));return Zt.data=zt,tn}},{key:"update",value:function(Zt,tn){var nn=this;Zt.forEach(function(rn){if(rn.type==="characterData"&&(rn.target===nn.leftGuard||rn.target===nn.rightGuard)){var on=nn.restore(rn.target);on&&(tn.range=on)}})}}]),Ht}(St.default.Embed);ot.default=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.AlignStyle=ot.AlignClass=ot.AlignAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["right","center","justify"]},kt=new dt.default.Attributor.Attribute("align","align",St),Tt=new dt.default.Attributor.Class("align","ql-align",St),Rt=new dt.default.Attributor.Style("align","text-align",St);ot.AlignAttribute=kt,ot.AlignClass=Tt,ot.AlignStyle=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.BackgroundStyle=ot.BackgroundClass=void 0;var ut=ct(0),dt=St(ut),ft=ct(26);function St(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var kt=new dt.default.Attributor.Class("background","ql-bg",{scope:dt.default.Scope.INLINE}),Tt=new ft.ColorAttributor("background","background-color",{scope:dt.default.Scope.INLINE});ot.BackgroundClass=kt,ot.BackgroundStyle=Tt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DirectionStyle=ot.DirectionClass=ot.DirectionAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["rtl"]},kt=new dt.default.Attributor.Attribute("direction","dir",St),Tt=new dt.default.Attributor.Class("direction","ql-direction",St),Rt=new dt.default.Attributor.Style("direction","direction",St);ot.DirectionAttribute=kt,ot.DirectionClass=Tt,ot.DirectionStyle=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.FontClass=ot.FontStyle=void 0;var ut=function(){function Bt(Ht,Jt){for(var Zt=0;Zt<Jt.length;Zt++){var tn=Jt[Zt];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Ht,tn.key,tn)}}return function(Ht,Jt,Zt){return Jt&&Bt(Ht.prototype,Jt),Zt&&Bt(Ht,Zt),Ht}}(),dt=function Bt(Ht,Jt,Zt){Ht===null&&(Ht=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Ht,Jt);if(tn===void 0){var nn=Object.getPrototypeOf(Ht);return nn===null?void 0:Bt(nn,Jt,Zt)}else{if("value"in tn)return tn.value;var rn=tn.get;return rn===void 0?void 0:rn.call(Zt)}},ft=ct(0),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ht){if(!(Bt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ht){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Bt}function jt(Bt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Bt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ht):Bt.__proto__=Ht)}var Ft={scope:St.default.Scope.INLINE,whitelist:["serif","monospace"]},$t=new St.default.Attributor.Class("font","ql-font",Ft),zt=function(Bt){jt(Ht,Bt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ut(Ht,[{key:"value",value:function(Zt){return dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"value",this).call(this,Zt).replace(/["']/g,"")}}]),Ht}(St.default.Attributor.Style),Ut=new zt("font","font-family",Ft);ot.FontStyle=Ut,ot.FontClass=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SizeStyle=ot.SizeClass=void 0;var ut=ct(0),dt=ft(ut);function ft(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}}var St=new dt.default.Attributor.Class("size","ql-size",{scope:dt.default.Scope.INLINE,whitelist:["small","large","huge"]}),kt=new dt.default.Attributor.Style("size","font-size",{scope:dt.default.Scope.INLINE,whitelist:["10px","18px","32px"]});ot.SizeClass=St,ot.SizeStyle=kt},function(et,ot,ct){et.exports={align:{"":ct(76),center:ct(77),right:ct(78),justify:ct(79)},background:ct(80),blockquote:ct(81),bold:ct(82),clean:ct(83),code:ct(58),"code-block":ct(58),color:ct(84),direction:{"":ct(85),rtl:ct(86)},float:{center:ct(87),full:ct(88),left:ct(89),right:ct(90)},formula:ct(91),header:{1:ct(92),2:ct(93)},italic:ct(94),image:ct(95),indent:{"+1":ct(96),"-1":ct(97)},link:ct(98),list:{ordered:ct(99),bullet:ct(100),check:ct(101)},script:{sub:ct(102),super:ct(103)},strike:ct(104),underline:ct(105),video:ct(106)}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.getLastChangeIndex=ot.default=void 0;var ut=function(){function Jt(Zt,tn){for(var nn=0;nn<tn.length;nn++){var rn=tn[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Zt,rn.key,rn)}}return function(Zt,tn,nn){return tn&&Jt(Zt.prototype,tn),nn&&Jt(Zt,nn),Zt}}(),dt=ct(0),ft=jt(dt),St=ct(5),kt=jt(St),Tt=ct(9),Rt=jt(Tt);function jt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function Ft(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}function $t(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&(typeof Zt=="object"||typeof Zt=="function")?Zt:Jt}function zt(Jt,Zt){if(typeof Zt!="function"&&Zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}var Ut=function(Jt){zt(Zt,Jt);function Zt(tn,nn){Ft(this,Zt);var rn=$t(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).call(this,tn,nn));return rn.lastRecorded=0,rn.ignoreChange=!1,rn.clear(),rn.quill.on(kt.default.events.EDITOR_CHANGE,function(on,pn,dn,hn){on!==kt.default.events.TEXT_CHANGE||rn.ignoreChange||(!rn.options.userOnly||hn===kt.default.sources.USER?rn.record(pn,dn):rn.transform(pn))}),rn.quill.keyboard.addBinding({key:"Z",shortKey:!0},rn.undo.bind(rn)),rn.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},rn.redo.bind(rn)),/Win/i.test(navigator.platform)&&rn.quill.keyboard.addBinding({key:"Y",shortKey:!0},rn.redo.bind(rn)),rn}return ut(Zt,[{key:"change",value:function(nn,rn){if(this.stack[nn].length!==0){var on=this.stack[nn].pop();this.stack[rn].push(on),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(on[nn],kt.default.sources.USER),this.ignoreChange=!1;var pn=Ht(on[nn]);this.quill.setSelection(pn)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(nn,rn){if(nn.ops.length!==0){this.stack.redo=[];var on=this.quill.getContents().diff(rn),pn=Date.now();if(this.lastRecorded+this.options.delay>pn&&this.stack.undo.length>0){var dn=this.stack.undo.pop();on=on.compose(dn.undo),nn=dn.redo.compose(nn)}else this.lastRecorded=pn;this.stack.undo.push({redo:nn,undo:on}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(nn){this.stack.undo.forEach(function(rn){rn.undo=nn.transform(rn.undo,!0),rn.redo=nn.transform(rn.redo,!0)}),this.stack.redo.forEach(function(rn){rn.undo=nn.transform(rn.undo,!0),rn.redo=nn.transform(rn.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),Zt}(Rt.default);Ut.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function Bt(Jt){var Zt=Jt.ops[Jt.ops.length-1];return Zt==null?!1:Zt.insert!=null?typeof Zt.insert=="string"&&Zt.insert.endsWith(`
`):Zt.attributes!=null?Object.keys(Zt.attributes).some(function(tn){return ft.default.query(tn,ft.default.Scope.BLOCK)!=null}):!1}function Ht(Jt){var Zt=Jt.reduce(function(nn,rn){return nn+=rn.delete||0,nn},0),tn=Jt.length()-Zt;return Bt(Jt)&&(tn-=1),tn}ot.default=Ut,ot.getLastChangeIndex=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BaseTooltip=void 0;var ut=function(){function Tn(An,Pn){for(var Mn=0;Mn<Pn.length;Mn++){var Rn=Pn[Mn];Rn.enumerable=Rn.enumerable||!1,Rn.configurable=!0,"value"in Rn&&(Rn.writable=!0),Object.defineProperty(An,Rn.key,Rn)}}return function(An,Pn,Mn){return Pn&&Tn(An.prototype,Pn),Mn&&Tn(An,Mn),An}}(),dt=function Tn(An,Pn,Mn){An===null&&(An=Function.prototype);var Rn=Object.getOwnPropertyDescriptor(An,Pn);if(Rn===void 0){var Cn=Object.getPrototypeOf(An);return Cn===null?void 0:Tn(Cn,Pn,Mn)}else{if("value"in Rn)return Rn.value;var On=Rn.get;return On===void 0?void 0:On.call(Mn)}},ft=ct(3),St=pn(ft),kt=ct(2),Tt=pn(kt),Rt=ct(8),jt=pn(Rt),Ft=ct(23),$t=pn(Ft),zt=ct(34),Ut=pn(zt),Bt=ct(59),Ht=pn(Bt),Jt=ct(60),Zt=pn(Jt),tn=ct(28),nn=pn(tn),rn=ct(61),on=pn(rn);function pn(Tn){return Tn&&Tn.__esModule?Tn:{default:Tn}}function dn(Tn,An){if(!(Tn instanceof An))throw new TypeError("Cannot call a class as a function")}function hn(Tn,An){if(!Tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return An&&(typeof An=="object"||typeof An=="function")?An:Tn}function un(Tn,An){if(typeof An!="function"&&An!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof An);Tn.prototype=Object.create(An&&An.prototype,{constructor:{value:Tn,enumerable:!1,writable:!0,configurable:!0}}),An&&(Object.setPrototypeOf?Object.setPrototypeOf(Tn,An):Tn.__proto__=An)}var En=[!1,"center","right","justify"],wn=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Sn=[!1,"serif","monospace"],fn=["1","2","3",!1],xn=["small",!1,"large","huge"],an=function(Tn){un(An,Tn);function An(Pn,Mn){dn(this,An);var Rn=hn(this,(An.__proto__||Object.getPrototypeOf(An)).call(this,Pn,Mn)),Cn=function On(In){if(!document.body.contains(Pn.root))return document.body.removeEventListener("click",On);Rn.tooltip!=null&&!Rn.tooltip.root.contains(In.target)&&document.activeElement!==Rn.tooltip.textbox&&!Rn.quill.hasFocus()&&Rn.tooltip.hide(),Rn.pickers!=null&&Rn.pickers.forEach(function(Dn){Dn.container.contains(In.target)||Dn.close()})};return Pn.emitter.listenDOM("click",document.body,Cn),Rn}return ut(An,[{key:"addModule",value:function(Mn){var Rn=dt(An.prototype.__proto__||Object.getPrototypeOf(An.prototype),"addModule",this).call(this,Mn);return Mn==="toolbar"&&this.extendToolbar(Rn),Rn}},{key:"buildButtons",value:function(Mn,Rn){Mn.forEach(function(Cn){var On=Cn.getAttribute("class")||"";On.split(/\s+/).forEach(function(In){if(In.startsWith("ql-")&&(In=In.slice(3),Rn[In]!=null))if(In==="direction")Cn.innerHTML=Rn[In][""]+Rn[In].rtl;else if(typeof Rn[In]=="string")Cn.innerHTML=Rn[In];else{var Dn=Cn.value||"";Dn!=null&&Rn[In][Dn]&&(Cn.innerHTML=Rn[In][Dn])}})})}},{key:"buildPickers",value:function(Mn,Rn){var Cn=this;this.pickers=Mn.map(function(In){if(In.classList.contains("ql-align"))return In.querySelector("option")==null&&mn(In,En),new Zt.default(In,Rn.align);if(In.classList.contains("ql-background")||In.classList.contains("ql-color")){var Dn=In.classList.contains("ql-background")?"background":"color";return In.querySelector("option")==null&&mn(In,wn,Dn==="background"?"#ffffff":"#000000"),new Ht.default(In,Rn[Dn])}else return In.querySelector("option")==null&&(In.classList.contains("ql-font")?mn(In,Sn):In.classList.contains("ql-header")?mn(In,fn):In.classList.contains("ql-size")&&mn(In,xn)),new nn.default(In)});var On=function(){Cn.pickers.forEach(function(Dn){Dn.update()})};this.quill.on(jt.default.events.EDITOR_CHANGE,On)}}]),An}(Ut.default);an.DEFAULTS=(0,St.default)(!0,{},Ut.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var An=this,Pn=this.container.querySelector("input.ql-image[type=file]");Pn==null&&(Pn=document.createElement("input"),Pn.setAttribute("type","file"),Pn.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Pn.classList.add("ql-image"),Pn.addEventListener("change",function(){if(Pn.files!=null&&Pn.files[0]!=null){var Mn=new FileReader;Mn.onload=function(Rn){var Cn=An.quill.getSelection(!0);An.quill.updateContents(new Tt.default().retain(Cn.index).delete(Cn.length).insert({image:Rn.target.result}),jt.default.sources.USER),An.quill.setSelection(Cn.index+1,jt.default.sources.SILENT),Pn.value=""},Mn.readAsDataURL(Pn.files[0])}}),this.container.appendChild(Pn)),Pn.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var cn=function(Tn){un(An,Tn);function An(Pn,Mn){dn(this,An);var Rn=hn(this,(An.__proto__||Object.getPrototypeOf(An)).call(this,Pn,Mn));return Rn.textbox=Rn.root.querySelector('input[type="text"]'),Rn.listen(),Rn}return ut(An,[{key:"listen",value:function(){var Mn=this;this.textbox.addEventListener("keydown",function(Rn){$t.default.match(Rn,"enter")?(Mn.save(),Rn.preventDefault()):$t.default.match(Rn,"escape")&&(Mn.cancel(),Rn.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Rn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Rn!=null?this.textbox.value=Rn:Mn!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Mn)||""),this.root.setAttribute("data-mode",Mn)}},{key:"restoreFocus",value:function(){var Mn=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Mn}},{key:"save",value:function(){var Mn=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Rn=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Mn,jt.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Mn,jt.default.sources.USER)),this.quill.root.scrollTop=Rn;break}case"video":Mn=bn(Mn);case"formula":{if(!Mn)break;var Cn=this.quill.getSelection(!0);if(Cn!=null){var On=Cn.index+Cn.length;this.quill.insertEmbed(On,this.root.getAttribute("data-mode"),Mn,jt.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(On+1," ",jt.default.sources.USER),this.quill.setSelection(On+2,jt.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),An}(on.default);function bn(Tn){var An=Tn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||Tn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return An?(An[1]||"https")+"://www.youtube.com/embed/"+An[2]+"?showinfo=0":(An=Tn.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(An[1]||"https")+"://player.vimeo.com/video/"+An[2]+"/":Tn}function mn(Tn,An){var Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;An.forEach(function(Mn){var Rn=document.createElement("option");Mn===Pn?Rn.setAttribute("selected","selected"):Rn.setAttribute("value",Mn),Tn.appendChild(Rn)})}ot.BaseTooltip=cn,ot.default=an},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function dt(){this.head=this.tail=null,this.length=0}return dt.prototype.append=function(){for(var ft=[],St=0;St<arguments.length;St++)ft[St]=arguments[St];this.insertBefore(ft[0],null),ft.length>1&&this.append.apply(this,ft.slice(1))},dt.prototype.contains=function(ft){for(var St,kt=this.iterator();St=kt();)if(St===ft)return!0;return!1},dt.prototype.insertBefore=function(ft,St){ft&&(ft.next=St,St!=null?(ft.prev=St.prev,St.prev!=null&&(St.prev.next=ft),St.prev=ft,St===this.head&&(this.head=ft)):this.tail!=null?(this.tail.next=ft,ft.prev=this.tail,this.tail=ft):(ft.prev=null,this.head=this.tail=ft),this.length+=1)},dt.prototype.offset=function(ft){for(var St=0,kt=this.head;kt!=null;){if(kt===ft)return St;St+=kt.length(),kt=kt.next}return-1},dt.prototype.remove=function(ft){this.contains(ft)&&(ft.prev!=null&&(ft.prev.next=ft.next),ft.next!=null&&(ft.next.prev=ft.prev),ft===this.head&&(this.head=ft.next),ft===this.tail&&(this.tail=ft.prev),this.length-=1)},dt.prototype.iterator=function(ft){return ft===void 0&&(ft=this.head),function(){var St=ft;return ft!=null&&(ft=ft.next),St}},dt.prototype.find=function(ft,St){St===void 0&&(St=!1);for(var kt,Tt=this.iterator();kt=Tt();){var Rt=kt.length();if(ft<Rt||St&&ft===Rt&&(kt.next==null||kt.next.length()!==0))return[kt,ft];ft-=Rt}return[null,0]},dt.prototype.forEach=function(ft){for(var St,kt=this.iterator();St=kt();)ft(St)},dt.prototype.forEachAt=function(ft,St,kt){if(!(St<=0))for(var Tt=this.find(ft),Rt=Tt[0],jt=Tt[1],Ft,$t=ft-jt,zt=this.iterator(Rt);(Ft=zt())&&$t<ft+St;){var Ut=Ft.length();ft>$t?kt(Ft,ft-$t,Math.min(St,$t+Ut-ft)):kt(Ft,0,Math.min(Ut,ft+St-$t)),$t+=Ut}},dt.prototype.map=function(ft){return this.reduce(function(St,kt){return St.push(ft(kt)),St},[])},dt.prototype.reduce=function(ft,St){for(var kt,Tt=this.iterator();kt=Tt();)St=ft(St,kt);return St},dt}();ot.default=ut},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ft){jt.__proto__=Ft}||function(jt,Ft){for(var $t in Ft)Ft.hasOwnProperty($t)&&(jt[$t]=Ft[$t])};return function(jt,Ft){Rt(jt,Ft);function $t(){this.constructor=jt}jt.prototype=Ft===null?Object.create(Ft):($t.prototype=Ft.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(17),ft=ct(1),St={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},kt=100,Tt=function(Rt){ut(jt,Rt);function jt(Ft){var $t=Rt.call(this,Ft)||this;return $t.scroll=$t,$t.observer=new MutationObserver(function(zt){$t.update(zt)}),$t.observer.observe($t.domNode,St),$t.attach(),$t}return jt.prototype.detach=function(){Rt.prototype.detach.call(this),this.observer.disconnect()},jt.prototype.deleteAt=function(Ft,$t){this.update(),Ft===0&&$t===this.length()?this.children.forEach(function(zt){zt.remove()}):Rt.prototype.deleteAt.call(this,Ft,$t)},jt.prototype.formatAt=function(Ft,$t,zt,Ut){this.update(),Rt.prototype.formatAt.call(this,Ft,$t,zt,Ut)},jt.prototype.insertAt=function(Ft,$t,zt){this.update(),Rt.prototype.insertAt.call(this,Ft,$t,zt)},jt.prototype.optimize=function(Ft,$t){var zt=this;Ft===void 0&&(Ft=[]),$t===void 0&&($t={}),Rt.prototype.optimize.call(this,$t);for(var Ut=[].slice.call(this.observer.takeRecords());Ut.length>0;)Ft.push(Ut.pop());for(var Bt=function(tn,nn){nn===void 0&&(nn=!0),!(tn==null||tn===zt)&&tn.domNode.parentNode!=null&&(tn.domNode[ft.DATA_KEY].mutations==null&&(tn.domNode[ft.DATA_KEY].mutations=[]),nn&&Bt(tn.parent))},Ht=function(tn){tn.domNode[ft.DATA_KEY]==null||tn.domNode[ft.DATA_KEY].mutations==null||(tn instanceof dt.default&&tn.children.forEach(Ht),tn.optimize($t))},Jt=Ft,Zt=0;Jt.length>0;Zt+=1){if(Zt>=kt)throw new Error("[Parchment] Maximum optimize iterations reached");for(Jt.forEach(function(tn){var nn=ft.find(tn.target,!0);nn!=null&&(nn.domNode===tn.target&&(tn.type==="childList"?(Bt(ft.find(tn.previousSibling,!1)),[].forEach.call(tn.addedNodes,function(rn){var on=ft.find(rn,!1);Bt(on,!1),on instanceof dt.default&&on.children.forEach(function(pn){Bt(pn,!1)})})):tn.type==="attributes"&&Bt(nn.prev)),Bt(nn))}),this.children.forEach(Ht),Jt=[].slice.call(this.observer.takeRecords()),Ut=Jt.slice();Ut.length>0;)Ft.push(Ut.pop())}},jt.prototype.update=function(Ft,$t){var zt=this;$t===void 0&&($t={}),Ft=Ft||this.observer.takeRecords(),Ft.map(function(Ut){var Bt=ft.find(Ut.target,!0);return Bt==null?null:Bt.domNode[ft.DATA_KEY].mutations==null?(Bt.domNode[ft.DATA_KEY].mutations=[Ut],Bt):(Bt.domNode[ft.DATA_KEY].mutations.push(Ut),null)}).forEach(function(Ut){Ut==null||Ut===zt||Ut.domNode[ft.DATA_KEY]==null||Ut.update(Ut.domNode[ft.DATA_KEY].mutations||[],$t)}),this.domNode[ft.DATA_KEY].mutations!=null&&Rt.prototype.update.call(this,this.domNode[ft.DATA_KEY].mutations,$t),this.optimize(Ft,$t)},jt.blotName="scroll",jt.defaultChild="block",jt.scope=ft.Scope.BLOCK_BLOT,jt.tagName="DIV",jt}(dt.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,jt){Rt.__proto__=jt}||function(Rt,jt){for(var Ft in jt)jt.hasOwnProperty(Ft)&&(Rt[Ft]=jt[Ft])};return function(Rt,jt){Tt(Rt,jt);function Ft(){this.constructor=Rt}Rt.prototype=jt===null?Object.create(jt):(Ft.prototype=jt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1);function St(Tt,Rt){if(Object.keys(Tt).length!==Object.keys(Rt).length)return!1;for(var jt in Tt)if(Tt[jt]!==Rt[jt])return!1;return!0}var kt=function(Tt){ut(Rt,Tt);function Rt(){return Tt!==null&&Tt.apply(this,arguments)||this}return Rt.formats=function(jt){if(jt.tagName!==Rt.tagName)return Tt.formats.call(this,jt)},Rt.prototype.format=function(jt,Ft){var $t=this;jt===this.statics.blotName&&!Ft?(this.children.forEach(function(zt){zt instanceof dt.default||(zt=zt.wrap(Rt.blotName,!0)),$t.attributes.copy(zt)}),this.unwrap()):Tt.prototype.format.call(this,jt,Ft)},Rt.prototype.formatAt=function(jt,Ft,$t,zt){if(this.formats()[$t]!=null||ft.query($t,ft.Scope.ATTRIBUTE)){var Ut=this.isolate(jt,Ft);Ut.format($t,zt)}else Tt.prototype.formatAt.call(this,jt,Ft,$t,zt)},Rt.prototype.optimize=function(jt){Tt.prototype.optimize.call(this,jt);var Ft=this.formats();if(Object.keys(Ft).length===0)return this.unwrap();var $t=this.next;$t instanceof Rt&&$t.prev===this&&St(Ft,$t.formats())&&($t.moveChildren(this),$t.remove())},Rt.blotName="inline",Rt.scope=ft.Scope.INLINE_BLOT,Rt.tagName="SPAN",Rt}(dt.default);ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.formats=function(Rt){var jt=ft.query(Tt.blotName).tagName;if(Rt.tagName!==jt)return kt.formats.call(this,Rt)},Tt.prototype.format=function(Rt,jt){ft.query(Rt,ft.Scope.BLOCK)!=null&&(Rt===this.statics.blotName&&!jt?this.replaceWith(Tt.blotName):kt.prototype.format.call(this,Rt,jt))},Tt.prototype.formatAt=function(Rt,jt,Ft,$t){ft.query(Ft,ft.Scope.BLOCK)!=null?this.format(Ft,$t):kt.prototype.formatAt.call(this,Rt,jt,Ft,$t)},Tt.prototype.insertAt=function(Rt,jt,Ft){if(Ft==null||ft.query(jt,ft.Scope.INLINE)!=null)kt.prototype.insertAt.call(this,Rt,jt,Ft);else{var $t=this.split(Rt),zt=ft.create(jt,Ft);$t.parent.insertBefore(zt,$t)}},Tt.prototype.update=function(Rt,jt){navigator.userAgent.match(/Trident/)?this.build():kt.prototype.update.call(this,Rt,jt)},Tt.blotName="block",Tt.scope=ft.Scope.BLOCK_BLOT,Tt.tagName="P",Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,Tt){kt.__proto__=Tt}||function(kt,Tt){for(var Rt in Tt)Tt.hasOwnProperty(Rt)&&(kt[Rt]=Tt[Rt])};return function(kt,Tt){St(kt,Tt);function Rt(){this.constructor=kt}kt.prototype=Tt===null?Object.create(Tt):(Rt.prototype=Tt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=function(St){ut(kt,St);function kt(){return St!==null&&St.apply(this,arguments)||this}return kt.formats=function(Tt){},kt.prototype.format=function(Tt,Rt){St.prototype.formatAt.call(this,0,this.length(),Tt,Rt)},kt.prototype.formatAt=function(Tt,Rt,jt,Ft){Tt===0&&Rt===this.length()?this.format(jt,Ft):St.prototype.formatAt.call(this,Tt,Rt,jt,Ft)},kt.prototype.formats=function(){return this.statics.formats(this.domNode)},kt}(dt.default);ot.default=ft},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(Rt){var jt=kt.call(this,Rt)||this;return jt.text=jt.statics.value(jt.domNode),jt}return Tt.create=function(Rt){return document.createTextNode(Rt)},Tt.value=function(Rt){var jt=Rt.data;return jt.normalize&&(jt=jt.normalize()),jt},Tt.prototype.deleteAt=function(Rt,jt){this.domNode.data=this.text=this.text.slice(0,Rt)+this.text.slice(Rt+jt)},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt?jt:-1},Tt.prototype.insertAt=function(Rt,jt,Ft){Ft==null?(this.text=this.text.slice(0,Rt)+jt+this.text.slice(Rt),this.domNode.data=this.text):kt.prototype.insertAt.call(this,Rt,jt,Ft)},Tt.prototype.length=function(){return this.text.length},Tt.prototype.optimize=function(Rt){kt.prototype.optimize.call(this,Rt),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Tt&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},Tt.prototype.position=function(Rt,jt){return[this.domNode,Rt]},Tt.prototype.split=function(Rt,jt){if(jt===void 0&&(jt=!1),!jt){if(Rt===0)return this;if(Rt===this.length())return this.next}var Ft=ft.create(this.domNode.splitText(Rt));return this.parent.insertBefore(Ft,this.next),this.text=this.statics.value(this.domNode),Ft},Tt.prototype.update=function(Rt,jt){var Ft=this;Rt.some(function($t){return $t.type==="characterData"&&$t.target===Ft.domNode})&&(this.text=this.statics.value(this.domNode))},Tt.prototype.value=function(){return this.text},Tt.blotName="text",Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=document.createElement("div");if(ut.classList.toggle("test-class",!1),ut.classList.contains("test-class")){var dt=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ft,St){return arguments.length>1&&!this.contains(ft)==!St?St:dt.call(this,ft)}}String.prototype.startsWith||(String.prototype.startsWith=function(ft,St){return St=St||0,this.substr(St,ft.length)===ft}),String.prototype.endsWith||(String.prototype.endsWith=function(ft,St){var kt=this.toString();(typeof St!="number"||!isFinite(St)||Math.floor(St)!==St||St>kt.length)&&(St=kt.length),St-=ft.length;var Tt=kt.indexOf(ft,St);return Tt!==-1&&Tt===St}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(St){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof St!="function")throw new TypeError("predicate must be a function");for(var kt=Object(this),Tt=kt.length>>>0,Rt=arguments[1],jt,Ft=0;Ft<Tt;Ft++)if(jt=kt[Ft],St.call(Rt,jt,Ft,kt))return jt}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(et,ot){var ct=-1,ut=1,dt=0;function ft(Zt,tn,nn){if(Zt==tn)return Zt?[[dt,Zt]]:[];(nn<0||Zt.length<nn)&&(nn=null);var rn=Rt(Zt,tn),on=Zt.substring(0,rn);Zt=Zt.substring(rn),tn=tn.substring(rn),rn=jt(Zt,tn);var pn=Zt.substring(Zt.length-rn);Zt=Zt.substring(0,Zt.length-rn),tn=tn.substring(0,tn.length-rn);var dn=St(Zt,tn);return on&&dn.unshift([dt,on]),pn&&dn.push([dt,pn]),$t(dn),nn!=null&&(dn=Bt(dn,nn)),dn=Ht(dn),dn}function St(Zt,tn){var nn;if(!Zt)return[[ut,tn]];if(!tn)return[[ct,Zt]];var rn=Zt.length>tn.length?Zt:tn,on=Zt.length>tn.length?tn:Zt,pn=rn.indexOf(on);if(pn!=-1)return nn=[[ut,rn.substring(0,pn)],[dt,on],[ut,rn.substring(pn+on.length)]],Zt.length>tn.length&&(nn[0][0]=nn[2][0]=ct),nn;if(on.length==1)return[[ct,Zt],[ut,tn]];var dn=Ft(Zt,tn);if(dn){var hn=dn[0],un=dn[1],En=dn[2],wn=dn[3],Sn=dn[4],fn=ft(hn,En),xn=ft(un,wn);return fn.concat([[dt,Sn]],xn)}return kt(Zt,tn)}function kt(Zt,tn){for(var nn=Zt.length,rn=tn.length,on=Math.ceil((nn+rn)/2),pn=on,dn=2*on,hn=new Array(dn),un=new Array(dn),En=0;En<dn;En++)hn[En]=-1,un[En]=-1;hn[pn+1]=0,un[pn+1]=0;for(var wn=nn-rn,Sn=wn%2!=0,fn=0,xn=0,an=0,cn=0,bn=0;bn<on;bn++){for(var mn=-bn+fn;mn<=bn-xn;mn+=2){var Tn=pn+mn,An;mn==-bn||mn!=bn&&hn[Tn-1]<hn[Tn+1]?An=hn[Tn+1]:An=hn[Tn-1]+1;for(var Pn=An-mn;An<nn&&Pn<rn&&Zt.charAt(An)==tn.charAt(Pn);)An++,Pn++;if(hn[Tn]=An,An>nn)xn+=2;else if(Pn>rn)fn+=2;else if(Sn){var Mn=pn+wn-mn;if(Mn>=0&&Mn<dn&&un[Mn]!=-1){var Rn=nn-un[Mn];if(An>=Rn)return Tt(Zt,tn,An,Pn)}}}for(var Cn=-bn+an;Cn<=bn-cn;Cn+=2){var Mn=pn+Cn,Rn;Cn==-bn||Cn!=bn&&un[Mn-1]<un[Mn+1]?Rn=un[Mn+1]:Rn=un[Mn-1]+1;for(var On=Rn-Cn;Rn<nn&&On<rn&&Zt.charAt(nn-Rn-1)==tn.charAt(rn-On-1);)Rn++,On++;if(un[Mn]=Rn,Rn>nn)cn+=2;else if(On>rn)an+=2;else if(!Sn){var Tn=pn+wn-Cn;if(Tn>=0&&Tn<dn&&hn[Tn]!=-1){var An=hn[Tn],Pn=pn+An-Tn;if(Rn=nn-Rn,An>=Rn)return Tt(Zt,tn,An,Pn)}}}}return[[ct,Zt],[ut,tn]]}function Tt(Zt,tn,nn,rn){var on=Zt.substring(0,nn),pn=tn.substring(0,rn),dn=Zt.substring(nn),hn=tn.substring(rn),un=ft(on,pn),En=ft(dn,hn);return un.concat(En)}function Rt(Zt,tn){if(!Zt||!tn||Zt.charAt(0)!=tn.charAt(0))return 0;for(var nn=0,rn=Math.min(Zt.length,tn.length),on=rn,pn=0;nn<on;)Zt.substring(pn,on)==tn.substring(pn,on)?(nn=on,pn=nn):rn=on,on=Math.floor((rn-nn)/2+nn);return on}function jt(Zt,tn){if(!Zt||!tn||Zt.charAt(Zt.length-1)!=tn.charAt(tn.length-1))return 0;for(var nn=0,rn=Math.min(Zt.length,tn.length),on=rn,pn=0;nn<on;)Zt.substring(Zt.length-on,Zt.length-pn)==tn.substring(tn.length-on,tn.length-pn)?(nn=on,pn=nn):rn=on,on=Math.floor((rn-nn)/2+nn);return on}function Ft(Zt,tn){var nn=Zt.length>tn.length?Zt:tn,rn=Zt.length>tn.length?tn:Zt;if(nn.length<4||rn.length*2<nn.length)return null;function on(xn,an,cn){for(var bn=xn.substring(cn,cn+Math.floor(xn.length/4)),mn=-1,Tn="",An,Pn,Mn,Rn;(mn=an.indexOf(bn,mn+1))!=-1;){var Cn=Rt(xn.substring(cn),an.substring(mn)),On=jt(xn.substring(0,cn),an.substring(0,mn));Tn.length<On+Cn&&(Tn=an.substring(mn-On,mn)+an.substring(mn,mn+Cn),An=xn.substring(0,cn-On),Pn=xn.substring(cn+Cn),Mn=an.substring(0,mn-On),Rn=an.substring(mn+Cn))}return Tn.length*2>=xn.length?[An,Pn,Mn,Rn,Tn]:null}var pn=on(nn,rn,Math.ceil(nn.length/4)),dn=on(nn,rn,Math.ceil(nn.length/2)),hn;if(!pn&&!dn)return null;dn?pn?hn=pn[4].length>dn[4].length?pn:dn:hn=dn:hn=pn;var un,En,wn,Sn;Zt.length>tn.length?(un=hn[0],En=hn[1],wn=hn[2],Sn=hn[3]):(wn=hn[0],Sn=hn[1],un=hn[2],En=hn[3]);var fn=hn[4];return[un,En,wn,Sn,fn]}function $t(Zt){Zt.push([dt,""]);for(var tn=0,nn=0,rn=0,on="",pn="",dn;tn<Zt.length;)switch(Zt[tn][0]){case ut:rn++,pn+=Zt[tn][1],tn++;break;case ct:nn++,on+=Zt[tn][1],tn++;break;case dt:nn+rn>1?(nn!==0&&rn!==0&&(dn=Rt(pn,on),dn!==0&&(tn-nn-rn>0&&Zt[tn-nn-rn-1][0]==dt?Zt[tn-nn-rn-1][1]+=pn.substring(0,dn):(Zt.splice(0,0,[dt,pn.substring(0,dn)]),tn++),pn=pn.substring(dn),on=on.substring(dn)),dn=jt(pn,on),dn!==0&&(Zt[tn][1]=pn.substring(pn.length-dn)+Zt[tn][1],pn=pn.substring(0,pn.length-dn),on=on.substring(0,on.length-dn))),nn===0?Zt.splice(tn-rn,nn+rn,[ut,pn]):rn===0?Zt.splice(tn-nn,nn+rn,[ct,on]):Zt.splice(tn-nn-rn,nn+rn,[ct,on],[ut,pn]),tn=tn-nn-rn+(nn?1:0)+(rn?1:0)+1):tn!==0&&Zt[tn-1][0]==dt?(Zt[tn-1][1]+=Zt[tn][1],Zt.splice(tn,1)):tn++,rn=0,nn=0,on="",pn="";break}Zt[Zt.length-1][1]===""&&Zt.pop();var hn=!1;for(tn=1;tn<Zt.length-1;)Zt[tn-1][0]==dt&&Zt[tn+1][0]==dt&&(Zt[tn][1].substring(Zt[tn][1].length-Zt[tn-1][1].length)==Zt[tn-1][1]?(Zt[tn][1]=Zt[tn-1][1]+Zt[tn][1].substring(0,Zt[tn][1].length-Zt[tn-1][1].length),Zt[tn+1][1]=Zt[tn-1][1]+Zt[tn+1][1],Zt.splice(tn-1,1),hn=!0):Zt[tn][1].substring(0,Zt[tn+1][1].length)==Zt[tn+1][1]&&(Zt[tn-1][1]+=Zt[tn+1][1],Zt[tn][1]=Zt[tn][1].substring(Zt[tn+1][1].length)+Zt[tn+1][1],Zt.splice(tn+1,1),hn=!0)),tn++;hn&&$t(Zt)}var zt=ft;zt.INSERT=ut,zt.DELETE=ct,zt.EQUAL=dt,et.exports=zt;function Ut(Zt,tn){if(tn===0)return[dt,Zt];for(var nn=0,rn=0;rn<Zt.length;rn++){var on=Zt[rn];if(on[0]===ct||on[0]===dt){var pn=nn+on[1].length;if(tn===pn)return[rn+1,Zt];if(tn<pn){Zt=Zt.slice();var dn=tn-nn,hn=[on[0],on[1].slice(0,dn)],un=[on[0],on[1].slice(dn)];return Zt.splice(rn,1,hn,un),[rn+1,Zt]}else nn=pn}}throw new Error("cursor_pos is out of bounds!")}function Bt(Zt,tn){var nn=Ut(Zt,tn),rn=nn[1],on=nn[0],pn=rn[on],dn=rn[on+1];if(pn==null)return Zt;if(pn[0]!==dt)return Zt;if(dn!=null&&pn[1]+dn[1]===dn[1]+pn[1])return rn.splice(on,2,dn,pn),Jt(rn,on,2);if(dn!=null&&dn[1].indexOf(pn[1])===0){rn.splice(on,2,[dn[0],pn[1]],[0,pn[1]]);var hn=dn[1].slice(pn[1].length);return hn.length>0&&rn.splice(on+2,0,[dn[0],hn]),Jt(rn,on,3)}else return Zt}function Ht(Zt){for(var tn=!1,nn=function(dn){return dn.charCodeAt(0)>=56320&&dn.charCodeAt(0)<=57343},rn=function(dn){return dn.charCodeAt(dn.length-1)>=55296&&dn.charCodeAt(dn.length-1)<=56319},on=2;on<Zt.length;on+=1)Zt[on-2][0]===dt&&rn(Zt[on-2][1])&&Zt[on-1][0]===ct&&nn(Zt[on-1][1])&&Zt[on][0]===ut&&nn(Zt[on][1])&&(tn=!0,Zt[on-1][1]=Zt[on-2][1].slice(-1)+Zt[on-1][1],Zt[on][1]=Zt[on-2][1].slice(-1)+Zt[on][1],Zt[on-2][1]=Zt[on-2][1].slice(0,-1));if(!tn)return Zt;for(var pn=[],on=0;on<Zt.length;on+=1)Zt[on][1].length>0&&pn.push(Zt[on]);return pn}function Jt(Zt,tn,nn){for(var rn=tn+nn-1;rn>=0&&rn>=tn-1;rn--)if(rn+1<Zt.length){var on=Zt[rn],pn=Zt[rn+1];on[0]===pn[1]&&Zt.splice(rn,2,[on[0],on[1]+pn[1]])}return Zt}},function(et,ot){ot=et.exports=typeof Object.keys=="function"?Object.keys:ct,ot.shim=ct;function ct(ut){var dt=[];for(var ft in ut)dt.push(ft);return dt}},function(et,ot){var ct=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";ot=et.exports=ct?ut:dt,ot.supported=ut;function ut(ft){return Object.prototype.toString.call(ft)=="[object Arguments]"}ot.unsupported=dt;function dt(ft){return ft&&typeof ft=="object"&&typeof ft.length=="number"&&Object.prototype.hasOwnProperty.call(ft,"callee")&&!Object.prototype.propertyIsEnumerable.call(ft,"callee")||!1}},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut="~";function dt(){}Object.create&&(dt.prototype=Object.create(null),new dt().__proto__||(ut=!1));function ft(kt,Tt,Rt){this.fn=kt,this.context=Tt,this.once=Rt||!1}function St(){this._events=new dt,this._eventsCount=0}St.prototype.eventNames=function(){var Tt=[],Rt,jt;if(this._eventsCount===0)return Tt;for(jt in Rt=this._events)ct.call(Rt,jt)&&Tt.push(ut?jt.slice(1):jt);return Object.getOwnPropertySymbols?Tt.concat(Object.getOwnPropertySymbols(Rt)):Tt},St.prototype.listeners=function(Tt,Rt){var jt=ut?ut+Tt:Tt,Ft=this._events[jt];if(Rt)return!!Ft;if(!Ft)return[];if(Ft.fn)return[Ft.fn];for(var $t=0,zt=Ft.length,Ut=new Array(zt);$t<zt;$t++)Ut[$t]=Ft[$t].fn;return Ut},St.prototype.emit=function(Tt,Rt,jt,Ft,$t,zt){var Ut=ut?ut+Tt:Tt;if(!this._events[Ut])return!1;var Bt=this._events[Ut],Ht=arguments.length,Jt,Zt;if(Bt.fn){switch(Bt.once&&this.removeListener(Tt,Bt.fn,void 0,!0),Ht){case 1:return Bt.fn.call(Bt.context),!0;case 2:return Bt.fn.call(Bt.context,Rt),!0;case 3:return Bt.fn.call(Bt.context,Rt,jt),!0;case 4:return Bt.fn.call(Bt.context,Rt,jt,Ft),!0;case 5:return Bt.fn.call(Bt.context,Rt,jt,Ft,$t),!0;case 6:return Bt.fn.call(Bt.context,Rt,jt,Ft,$t,zt),!0}for(Zt=1,Jt=new Array(Ht-1);Zt<Ht;Zt++)Jt[Zt-1]=arguments[Zt];Bt.fn.apply(Bt.context,Jt)}else{var tn=Bt.length,nn;for(Zt=0;Zt<tn;Zt++)switch(Bt[Zt].once&&this.removeListener(Tt,Bt[Zt].fn,void 0,!0),Ht){case 1:Bt[Zt].fn.call(Bt[Zt].context);break;case 2:Bt[Zt].fn.call(Bt[Zt].context,Rt);break;case 3:Bt[Zt].fn.call(Bt[Zt].context,Rt,jt);break;case 4:Bt[Zt].fn.call(Bt[Zt].context,Rt,jt,Ft);break;default:if(!Jt)for(nn=1,Jt=new Array(Ht-1);nn<Ht;nn++)Jt[nn-1]=arguments[nn];Bt[Zt].fn.apply(Bt[Zt].context,Jt)}}return!0},St.prototype.on=function(Tt,Rt,jt){var Ft=new ft(Rt,jt||this),$t=ut?ut+Tt:Tt;return this._events[$t]?this._events[$t].fn?this._events[$t]=[this._events[$t],Ft]:this._events[$t].push(Ft):(this._events[$t]=Ft,this._eventsCount++),this},St.prototype.once=function(Tt,Rt,jt){var Ft=new ft(Rt,jt||this,!0),$t=ut?ut+Tt:Tt;return this._events[$t]?this._events[$t].fn?this._events[$t]=[this._events[$t],Ft]:this._events[$t].push(Ft):(this._events[$t]=Ft,this._eventsCount++),this},St.prototype.removeListener=function(Tt,Rt,jt,Ft){var $t=ut?ut+Tt:Tt;if(!this._events[$t])return this;if(!Rt)return--this._eventsCount===0?this._events=new dt:delete this._events[$t],this;var zt=this._events[$t];if(zt.fn)zt.fn===Rt&&(!Ft||zt.once)&&(!jt||zt.context===jt)&&(--this._eventsCount===0?this._events=new dt:delete this._events[$t]);else{for(var Ut=0,Bt=[],Ht=zt.length;Ut<Ht;Ut++)(zt[Ut].fn!==Rt||Ft&&!zt[Ut].once||jt&&zt[Ut].context!==jt)&&Bt.push(zt[Ut]);Bt.length?this._events[$t]=Bt.length===1?Bt[0]:Bt:--this._eventsCount===0?this._events=new dt:delete this._events[$t]}return this},St.prototype.removeAllListeners=function(Tt){var Rt;return Tt?(Rt=ut?ut+Tt:Tt,this._events[Rt]&&(--this._eventsCount===0?this._events=new dt:delete this._events[Rt])):(this._events=new dt,this._eventsCount=0),this},St.prototype.off=St.prototype.removeListener,St.prototype.addListener=St.prototype.on,St.prototype.setMaxListeners=function(){return this},St.prefixed=ut,St.EventEmitter=St,typeof et<"u"&&(et.exports=St)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchText=ot.matchSpacing=ot.matchNewline=ot.matchBlot=ot.matchAttributor=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($n){return typeof $n}:function($n){return $n&&typeof Symbol=="function"&&$n.constructor===Symbol&&$n!==Symbol.prototype?"symbol":typeof $n},dt=function(){function $n(Un,Kn){var Yn=[],Wn=!0,cr=!1,or=void 0;try{for(var ur=Un[Symbol.iterator](),Cr;!(Wn=(Cr=ur.next()).done)&&(Yn.push(Cr.value),!(Kn&&Yn.length===Kn));Wn=!0);}catch(Rr){cr=!0,or=Rr}finally{try{!Wn&&ur.return&&ur.return()}finally{if(cr)throw or}}return Yn}return function(Un,Kn){if(Array.isArray(Un))return Un;if(Symbol.iterator in Object(Un))return $n(Un,Kn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function $n(Un,Kn){for(var Yn=0;Yn<Kn.length;Yn++){var Wn=Kn[Yn];Wn.enumerable=Wn.enumerable||!1,Wn.configurable=!0,"value"in Wn&&(Wn.writable=!0),Object.defineProperty(Un,Wn.key,Wn)}}return function(Un,Kn,Yn){return Kn&&$n(Un.prototype,Kn),Yn&&$n(Un,Yn),Un}}(),St=ct(3),kt=un(St),Tt=ct(2),Rt=un(Tt),jt=ct(0),Ft=un(jt),$t=ct(5),zt=un($t),Ut=ct(10),Bt=un(Ut),Ht=ct(9),Jt=un(Ht),Zt=ct(36),tn=ct(37),nn=ct(13),rn=un(nn),on=ct(26),pn=ct(38),dn=ct(39),hn=ct(40);function un($n){return $n&&$n.__esModule?$n:{default:$n}}function En($n,Un,Kn){return Un in $n?Object.defineProperty($n,Un,{value:Kn,enumerable:!0,configurable:!0,writable:!0}):$n[Un]=Kn,$n}function wn($n,Un){if(!($n instanceof Un))throw new TypeError("Cannot call a class as a function")}function Sn($n,Un){if(!$n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Un&&(typeof Un=="object"||typeof Un=="function")?Un:$n}function fn($n,Un){if(typeof Un!="function"&&Un!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Un);$n.prototype=Object.create(Un&&Un.prototype,{constructor:{value:$n,enumerable:!1,writable:!0,configurable:!0}}),Un&&(Object.setPrototypeOf?Object.setPrototypeOf($n,Un):$n.__proto__=Un)}var xn=(0,Bt.default)("quill:clipboard"),an="__ql-matcher",cn=[[Node.TEXT_NODE,hr],[Node.TEXT_NODE,zn],["br",Fn],[Node.ELEMENT_NODE,zn],[Node.ELEMENT_NODE,Dn],[Node.ELEMENT_NODE,Zn],[Node.ELEMENT_NODE,In],[Node.ELEMENT_NODE,lr],["li",Vn],["b",On.bind(On,"bold")],["i",On.bind(On,"italic")],["style",Xn]],bn=[Zt.AlignAttribute,pn.DirectionAttribute].reduce(function($n,Un){return $n[Un.keyName]=Un,$n},{}),mn=[Zt.AlignStyle,tn.BackgroundStyle,on.ColorStyle,pn.DirectionStyle,dn.FontStyle,hn.SizeStyle].reduce(function($n,Un){return $n[Un.keyName]=Un,$n},{}),Tn=function($n){fn(Un,$n);function Un(Kn,Yn){wn(this,Un);var Wn=Sn(this,(Un.__proto__||Object.getPrototypeOf(Un)).call(this,Kn,Yn));return Wn.quill.root.addEventListener("paste",Wn.onPaste.bind(Wn)),Wn.container=Wn.quill.addContainer("ql-clipboard"),Wn.container.setAttribute("contenteditable",!0),Wn.container.setAttribute("tabindex",-1),Wn.matchers=[],cn.concat(Wn.options.matchers).forEach(function(cr){var or=dt(cr,2),ur=or[0],Cr=or[1];!Yn.matchVisual&&Cr===Zn||Wn.addMatcher(ur,Cr)}),Wn}return ft(Un,[{key:"addMatcher",value:function(Yn,Wn){this.matchers.push([Yn,Wn])}},{key:"convert",value:function(Yn){if(typeof Yn=="string")return this.container.innerHTML=Yn.replace(/\>\r?\n +\</g,"><"),this.convert();var Wn=this.quill.getFormat(this.quill.selection.savedRange.index);if(Wn[rn.default.blotName]){var cr=this.container.innerText;return this.container.innerHTML="",new Rt.default().insert(cr,En({},rn.default.blotName,Wn[rn.default.blotName]))}var or=this.prepareMatching(),ur=dt(or,2),Cr=ur[0],Rr=ur[1],br=Cn(this.container,Cr,Rr);return Mn(br,`
`)&&br.ops[br.ops.length-1].attributes==null&&(br=br.compose(new Rt.default().retain(br.length()-1).delete(1))),xn.log("convert",this.container.innerHTML,br),this.container.innerHTML="",br}},{key:"dangerouslyPasteHTML",value:function(Yn,Wn){var cr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt.default.sources.API;if(typeof Yn=="string")this.quill.setContents(this.convert(Yn),Wn),this.quill.setSelection(0,zt.default.sources.SILENT);else{var or=this.convert(Wn);this.quill.updateContents(new Rt.default().retain(Yn).concat(or),cr),this.quill.setSelection(Yn+or.length(),zt.default.sources.SILENT)}}},{key:"onPaste",value:function(Yn){var Wn=this;if(!(Yn.defaultPrevented||!this.quill.isEnabled())){var cr=this.quill.getSelection(),or=new Rt.default().retain(cr.index),ur=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(zt.default.sources.SILENT),setTimeout(function(){or=or.concat(Wn.convert()).delete(cr.length),Wn.quill.updateContents(or,zt.default.sources.USER),Wn.quill.setSelection(or.length()-cr.length,zt.default.sources.SILENT),Wn.quill.scrollingContainer.scrollTop=ur,Wn.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Yn=this,Wn=[],cr=[];return this.matchers.forEach(function(or){var ur=dt(or,2),Cr=ur[0],Rr=ur[1];switch(Cr){case Node.TEXT_NODE:cr.push(Rr);break;case Node.ELEMENT_NODE:Wn.push(Rr);break;default:[].forEach.call(Yn.container.querySelectorAll(Cr),function(br){br[an]=br[an]||[],br[an].push(Rr)});break}}),[Wn,cr]}}]),Un}(Jt.default);Tn.DEFAULTS={matchers:[],matchVisual:!0};function An($n,Un,Kn){return(typeof Un>"u"?"undefined":ut(Un))==="object"?Object.keys(Un).reduce(function(Yn,Wn){return An(Yn,Wn,Un[Wn])},$n):$n.reduce(function(Yn,Wn){return Wn.attributes&&Wn.attributes[Un]?Yn.push(Wn):Yn.insert(Wn.insert,(0,kt.default)({},En({},Un,Kn),Wn.attributes))},new Rt.default)}function Pn($n){if($n.nodeType!==Node.ELEMENT_NODE)return{};var Un="__ql-computed-style";return $n[Un]||($n[Un]=window.getComputedStyle($n))}function Mn($n,Un){for(var Kn="",Yn=$n.ops.length-1;Yn>=0&&Kn.length<Un.length;--Yn){var Wn=$n.ops[Yn];if(typeof Wn.insert!="string")break;Kn=Wn.insert+Kn}return Kn.slice(-1*Un.length)===Un}function Rn($n){if($n.childNodes.length===0)return!1;var Un=Pn($n);return["block","list-item"].indexOf(Un.display)>-1}function Cn($n,Un,Kn){return $n.nodeType===$n.TEXT_NODE?Kn.reduce(function(Yn,Wn){return Wn($n,Yn)},new Rt.default):$n.nodeType===$n.ELEMENT_NODE?[].reduce.call($n.childNodes||[],function(Yn,Wn){var cr=Cn(Wn,Un,Kn);return Wn.nodeType===$n.ELEMENT_NODE&&(cr=Un.reduce(function(or,ur){return ur(Wn,or)},cr),cr=(Wn[an]||[]).reduce(function(or,ur){return ur(Wn,or)},cr)),Yn.concat(cr)},new Rt.default):new Rt.default}function On($n,Un,Kn){return An(Kn,$n,!0)}function In($n,Un){var Kn=Ft.default.Attributor.Attribute.keys($n),Yn=Ft.default.Attributor.Class.keys($n),Wn=Ft.default.Attributor.Style.keys($n),cr={};return Kn.concat(Yn).concat(Wn).forEach(function(or){var ur=Ft.default.query(or,Ft.default.Scope.ATTRIBUTE);ur!=null&&(cr[ur.attrName]=ur.value($n),cr[ur.attrName])||(ur=bn[or],ur!=null&&(ur.attrName===or||ur.keyName===or)&&(cr[ur.attrName]=ur.value($n)||void 0),ur=mn[or],ur!=null&&(ur.attrName===or||ur.keyName===or)&&(ur=mn[or],cr[ur.attrName]=ur.value($n)||void 0))}),Object.keys(cr).length>0&&(Un=An(Un,cr)),Un}function Dn($n,Un){var Kn=Ft.default.query($n);if(Kn==null)return Un;if(Kn.prototype instanceof Ft.default.Embed){var Yn={},Wn=Kn.value($n);Wn!=null&&(Yn[Kn.blotName]=Wn,Un=new Rt.default().insert(Yn,Kn.formats($n)))}else typeof Kn.formats=="function"&&(Un=An(Un,Kn.blotName,Kn.formats($n)));return Un}function Fn($n,Un){return Mn(Un,`
`)||Un.insert(`
`),Un}function Xn(){return new Rt.default}function Vn($n,Un){var Kn=Ft.default.query($n);if(Kn==null||Kn.blotName!=="list-item"||!Mn(Un,`
`))return Un;for(var Yn=-1,Wn=$n.parentNode;!Wn.classList.contains("ql-clipboard");)(Ft.default.query(Wn)||{}).blotName==="list"&&(Yn+=1),Wn=Wn.parentNode;return Yn<=0?Un:Un.compose(new Rt.default().retain(Un.length()-1).retain(1,{indent:Yn}))}function zn($n,Un){return Mn(Un,`
`)||(Rn($n)||Un.length()>0&&$n.nextSibling&&Rn($n.nextSibling))&&Un.insert(`
`),Un}function Zn($n,Un){if(Rn($n)&&$n.nextElementSibling!=null&&!Mn(Un,`

`)){var Kn=$n.offsetHeight+parseFloat(Pn($n).marginTop)+parseFloat(Pn($n).marginBottom);$n.nextElementSibling.offsetTop>$n.offsetTop+Kn*1.5&&Un.insert(`
`)}return Un}function lr($n,Un){var Kn={},Yn=$n.style||{};return Yn.fontStyle&&Pn($n).fontStyle==="italic"&&(Kn.italic=!0),Yn.fontWeight&&(Pn($n).fontWeight.startsWith("bold")||parseInt(Pn($n).fontWeight)>=700)&&(Kn.bold=!0),Object.keys(Kn).length>0&&(Un=An(Un,Kn)),parseFloat(Yn.textIndent||0)>0&&(Un=new Rt.default().insert("	").concat(Un)),Un}function hr($n,Un){var Kn=$n.data;if($n.parentNode.tagName==="O:P")return Un.insert(Kn.trim());if(Kn.trim().length===0&&$n.parentNode.classList.contains("ql-clipboard"))return Un;if(!Pn($n.parentNode).whiteSpace.startsWith("pre")){var Yn=function(cr,or){return or=or.replace(/[^\u00a0]/g,""),or.length<1&&cr?" ":or};Kn=Kn.replace(/\r\n/g," ").replace(/\n/g," "),Kn=Kn.replace(/\s\s+/g,Yn.bind(Yn,!0)),($n.previousSibling==null&&Rn($n.parentNode)||$n.previousSibling!=null&&Rn($n.previousSibling))&&(Kn=Kn.replace(/^\s+/,Yn.bind(Yn,!1))),($n.nextSibling==null&&Rn($n.parentNode)||$n.nextSibling!=null&&Rn($n.nextSibling))&&(Kn=Kn.replace(/\s+$/,Yn.bind(Yn,!1)))}return Un.insert(Kn)}ot.default=Tn,ot.matchAttributor=In,ot.matchBlot=Dn,ot.matchNewline=zn,ot.matchSpacing=Zn,ot.matchText=hr},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Ut){for(var Bt=0;Bt<Ut.length;Bt++){var Ht=Ut[Bt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(zt,Ht.key,Ht)}}return function(zt,Ut,Bt){return Ut&&$t(zt.prototype,Ut),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Ut,Bt){zt===null&&(zt=Function.prototype);var Ht=Object.getOwnPropertyDescriptor(zt,Ut);if(Ht===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Ut,Bt)}else{if("value"in Ht)return Ht.value;var Zt=Ht.get;return Zt===void 0?void 0:Zt.call(Bt)}},ft=ct(6),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,[{key:"optimize",value:function(Bt){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"optimize",this).call(this,Bt),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),zt}(St.default);Ft.blotName="bold",Ft.tagName=["STRONG","B"],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.addControls=ot.default=void 0;var ut=function(){function hn(un,En){var wn=[],Sn=!0,fn=!1,xn=void 0;try{for(var an=un[Symbol.iterator](),cn;!(Sn=(cn=an.next()).done)&&(wn.push(cn.value),!(En&&wn.length===En));Sn=!0);}catch(bn){fn=!0,xn=bn}finally{try{!Sn&&an.return&&an.return()}finally{if(fn)throw xn}}return wn}return function(un,En){if(Array.isArray(un))return un;if(Symbol.iterator in Object(un))return hn(un,En);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function hn(un,En){for(var wn=0;wn<En.length;wn++){var Sn=En[wn];Sn.enumerable=Sn.enumerable||!1,Sn.configurable=!0,"value"in Sn&&(Sn.writable=!0),Object.defineProperty(un,Sn.key,Sn)}}return function(un,En,wn){return En&&hn(un.prototype,En),wn&&hn(un,wn),un}}(),ft=ct(2),St=Bt(ft),kt=ct(0),Tt=Bt(kt),Rt=ct(5),jt=Bt(Rt),Ft=ct(10),$t=Bt(Ft),zt=ct(9),Ut=Bt(zt);function Bt(hn){return hn&&hn.__esModule?hn:{default:hn}}function Ht(hn,un,En){return un in hn?Object.defineProperty(hn,un,{value:En,enumerable:!0,configurable:!0,writable:!0}):hn[un]=En,hn}function Jt(hn,un){if(!(hn instanceof un))throw new TypeError("Cannot call a class as a function")}function Zt(hn,un){if(!hn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&(typeof un=="object"||typeof un=="function")?un:hn}function tn(hn,un){if(typeof un!="function"&&un!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof un);hn.prototype=Object.create(un&&un.prototype,{constructor:{value:hn,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(hn,un):hn.__proto__=un)}var nn=(0,$t.default)("quill:toolbar"),rn=function(hn){tn(un,hn);function un(En,wn){Jt(this,un);var Sn=Zt(this,(un.__proto__||Object.getPrototypeOf(un)).call(this,En,wn));if(Array.isArray(Sn.options.container)){var fn=document.createElement("div");pn(fn,Sn.options.container),En.container.parentNode.insertBefore(fn,En.container),Sn.container=fn}else typeof Sn.options.container=="string"?Sn.container=document.querySelector(Sn.options.container):Sn.container=Sn.options.container;if(!(Sn.container instanceof HTMLElement)){var xn;return xn=nn.error("Container required for toolbar",Sn.options),Zt(Sn,xn)}return Sn.container.classList.add("ql-toolbar"),Sn.controls=[],Sn.handlers={},Object.keys(Sn.options.handlers).forEach(function(an){Sn.addHandler(an,Sn.options.handlers[an])}),[].forEach.call(Sn.container.querySelectorAll("button, select"),function(an){Sn.attach(an)}),Sn.quill.on(jt.default.events.EDITOR_CHANGE,function(an,cn){an===jt.default.events.SELECTION_CHANGE&&Sn.update(cn)}),Sn.quill.on(jt.default.events.SCROLL_OPTIMIZE,function(){var an=Sn.quill.selection.getRange(),cn=ut(an,1),bn=cn[0];Sn.update(bn)}),Sn}return dt(un,[{key:"addHandler",value:function(wn,Sn){this.handlers[wn]=Sn}},{key:"attach",value:function(wn){var Sn=this,fn=[].find.call(wn.classList,function(an){return an.indexOf("ql-")===0});if(fn){if(fn=fn.slice(3),wn.tagName==="BUTTON"&&wn.setAttribute("type","button"),this.handlers[fn]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[fn]==null){nn.warn("ignoring attaching to disabled format",fn,wn);return}if(Tt.default.query(fn)==null){nn.warn("ignoring attaching to nonexistent format",fn,wn);return}}var xn=wn.tagName==="SELECT"?"change":"click";wn.addEventListener(xn,function(an){var cn=void 0;if(wn.tagName==="SELECT"){if(wn.selectedIndex<0)return;var bn=wn.options[wn.selectedIndex];bn.hasAttribute("selected")?cn=!1:cn=bn.value||!1}else wn.classList.contains("ql-active")?cn=!1:cn=wn.value||!wn.hasAttribute("value"),an.preventDefault();Sn.quill.focus();var mn=Sn.quill.selection.getRange(),Tn=ut(mn,1),An=Tn[0];if(Sn.handlers[fn]!=null)Sn.handlers[fn].call(Sn,cn);else if(Tt.default.query(fn).prototype instanceof Tt.default.Embed){if(cn=prompt("Enter "+fn),!cn)return;Sn.quill.updateContents(new St.default().retain(An.index).delete(An.length).insert(Ht({},fn,cn)),jt.default.sources.USER)}else Sn.quill.format(fn,cn,jt.default.sources.USER);Sn.update(An)}),this.controls.push([fn,wn])}}},{key:"update",value:function(wn){var Sn=wn==null?{}:this.quill.getFormat(wn);this.controls.forEach(function(fn){var xn=ut(fn,2),an=xn[0],cn=xn[1];if(cn.tagName==="SELECT"){var bn=void 0;if(wn==null)bn=null;else if(Sn[an]==null)bn=cn.querySelector("option[selected]");else if(!Array.isArray(Sn[an])){var mn=Sn[an];typeof mn=="string"&&(mn=mn.replace(/\"/g,'\\"')),bn=cn.querySelector('option[value="'+mn+'"]')}bn==null?(cn.value="",cn.selectedIndex=-1):bn.selected=!0}else if(wn==null)cn.classList.remove("ql-active");else if(cn.hasAttribute("value")){var Tn=Sn[an]===cn.getAttribute("value")||Sn[an]!=null&&Sn[an].toString()===cn.getAttribute("value")||Sn[an]==null&&!cn.getAttribute("value");cn.classList.toggle("ql-active",Tn)}else cn.classList.toggle("ql-active",Sn[an]!=null)})}}]),un}(Ut.default);rn.DEFAULTS={};function on(hn,un,En){var wn=document.createElement("button");wn.setAttribute("type","button"),wn.classList.add("ql-"+un),En!=null&&(wn.value=En),hn.appendChild(wn)}function pn(hn,un){Array.isArray(un[0])||(un=[un]),un.forEach(function(En){var wn=document.createElement("span");wn.classList.add("ql-formats"),En.forEach(function(Sn){if(typeof Sn=="string")on(wn,Sn);else{var fn=Object.keys(Sn)[0],xn=Sn[fn];Array.isArray(xn)?dn(wn,fn,xn):on(wn,fn,xn)}}),hn.appendChild(wn)})}function dn(hn,un,En){var wn=document.createElement("select");wn.classList.add("ql-"+un),En.forEach(function(Sn){var fn=document.createElement("option");Sn!==!1?fn.setAttribute("value",Sn):fn.setAttribute("selected","selected"),wn.appendChild(fn)}),hn.appendChild(wn)}rn.DEFAULTS={container:null,handlers:{clean:function(){var un=this,En=this.quill.getSelection();if(En!=null)if(En.length==0){var wn=this.quill.getFormat();Object.keys(wn).forEach(function(Sn){Tt.default.query(Sn,Tt.default.Scope.INLINE)!=null&&un.quill.format(Sn,!1)})}else this.quill.removeFormat(En,jt.default.sources.USER)},direction:function(un){var En=this.quill.getFormat().align;un==="rtl"&&En==null?this.quill.format("align","right",jt.default.sources.USER):!un&&En==="right"&&this.quill.format("align",!1,jt.default.sources.USER),this.quill.format("direction",un,jt.default.sources.USER)},indent:function(un){var En=this.quill.getSelection(),wn=this.quill.getFormat(En),Sn=parseInt(wn.indent||0);if(un==="+1"||un==="-1"){var fn=un==="+1"?1:-1;wn.direction==="rtl"&&(fn*=-1),this.quill.format("indent",Sn+fn,jt.default.sources.USER)}},link:function(un){un===!0&&(un=prompt("Enter link URL:")),this.quill.format("link",un,jt.default.sources.USER)},list:function(un){var En=this.quill.getSelection(),wn=this.quill.getFormat(En);un==="check"?wn.list==="checked"||wn.list==="unchecked"?this.quill.format("list",!1,jt.default.sources.USER):this.quill.format("list","unchecked",jt.default.sources.USER):this.quill.format("list",un,jt.default.sources.USER)}}},ot.default=rn,ot.addControls=pn},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Ut){for(var Bt=0;Bt<Ut.length;Bt++){var Ht=Ut[Bt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(zt,Ht.key,Ht)}}return function(zt,Ut,Bt){return Ut&&$t(zt.prototype,Ut),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Ut,Bt){zt===null&&(zt=Function.prototype);var Ht=Object.getOwnPropertyDescriptor(zt,Ut);if(Ht===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Ut,Bt)}else{if("value"in Ht)return Ht.value;var Zt=Ht.get;return Zt===void 0?void 0:Zt.call(Bt)}},ft=ct(28),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(Ut,Bt){Tt(this,zt);var Ht=Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Ut));return Ht.label.innerHTML=Bt,Ht.container.classList.add("ql-color-picker"),[].slice.call(Ht.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Jt){Jt.classList.add("ql-primary")}),Ht}return ut(zt,[{key:"buildItem",value:function(Bt){var Ht=dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"buildItem",this).call(this,Bt);return Ht.style.backgroundColor=Bt.getAttribute("value")||"",Ht}},{key:"selectItem",value:function(Bt,Ht){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Bt,Ht);var Jt=this.label.querySelector(".ql-color-label"),Zt=Bt&&Bt.getAttribute("data-value")||"";Jt&&(Jt.tagName==="line"?Jt.style.stroke=Zt:Jt.style.fill=Zt)}}]),zt}(St.default);ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Ut){for(var Bt=0;Bt<Ut.length;Bt++){var Ht=Ut[Bt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(zt,Ht.key,Ht)}}return function(zt,Ut,Bt){return Ut&&$t(zt.prototype,Ut),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Ut,Bt){zt===null&&(zt=Function.prototype);var Ht=Object.getOwnPropertyDescriptor(zt,Ut);if(Ht===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Ut,Bt)}else{if("value"in Ht)return Ht.value;var Zt=Ht.get;return Zt===void 0?void 0:Zt.call(Bt)}},ft=ct(28),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(Ut,Bt){Tt(this,zt);var Ht=Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Ut));return Ht.container.classList.add("ql-icon-picker"),[].forEach.call(Ht.container.querySelectorAll(".ql-picker-item"),function(Jt){Jt.innerHTML=Bt[Jt.getAttribute("data-value")||""]}),Ht.defaultItem=Ht.container.querySelector(".ql-selected"),Ht.selectItem(Ht.defaultItem),Ht}return ut(zt,[{key:"selectItem",value:function(Bt,Ht){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Bt,Ht),Bt=Bt||this.defaultItem,this.label.innerHTML=Bt.innerHTML}}]),zt}(St.default);ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){var Rt=this;dt(this,St),this.quill=kt,this.boundsContainer=Tt||document.body,this.root=kt.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){Rt.root.style.marginTop=-1*Rt.quill.root.scrollTop+"px"}),this.hide()}return ut(St,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(Tt){var Rt=Tt.left+Tt.width/2-this.root.offsetWidth/2,jt=Tt.bottom+this.quill.root.scrollTop;this.root.style.left=Rt+"px",this.root.style.top=jt+"px",this.root.classList.remove("ql-flip");var Ft=this.boundsContainer.getBoundingClientRect(),$t=this.root.getBoundingClientRect(),zt=0;if($t.right>Ft.right&&(zt=Ft.right-$t.right,this.root.style.left=Rt+zt+"px"),$t.left<Ft.left&&(zt=Ft.left-$t.left,this.root.style.left=Rt+zt+"px"),$t.bottom>Ft.bottom){var Ut=$t.bottom-$t.top,Bt=Tt.bottom-Tt.top+Ut;this.root.style.top=jt-Bt+"px",this.root.classList.add("ql-flip")}return zt}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),St}();ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function dn(hn,un){var En=[],wn=!0,Sn=!1,fn=void 0;try{for(var xn=hn[Symbol.iterator](),an;!(wn=(an=xn.next()).done)&&(En.push(an.value),!(un&&En.length===un));wn=!0);}catch(cn){Sn=!0,fn=cn}finally{try{!wn&&xn.return&&xn.return()}finally{if(Sn)throw fn}}return En}return function(hn,un){if(Array.isArray(hn))return hn;if(Symbol.iterator in Object(hn))return dn(hn,un);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function dn(hn,un,En){hn===null&&(hn=Function.prototype);var wn=Object.getOwnPropertyDescriptor(hn,un);if(wn===void 0){var Sn=Object.getPrototypeOf(hn);return Sn===null?void 0:dn(Sn,un,En)}else{if("value"in wn)return wn.value;var fn=wn.get;return fn===void 0?void 0:fn.call(En)}},ft=function(){function dn(hn,un){for(var En=0;En<un.length;En++){var wn=un[En];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(hn,wn.key,wn)}}return function(hn,un,En){return un&&dn(hn.prototype,un),En&&dn(hn,En),hn}}(),St=ct(3),kt=Jt(St),Tt=ct(8),Rt=Jt(Tt),jt=ct(43),Ft=Jt(jt),$t=ct(27),zt=Jt($t),Ut=ct(15),Bt=ct(41),Ht=Jt(Bt);function Jt(dn){return dn&&dn.__esModule?dn:{default:dn}}function Zt(dn,hn){if(!(dn instanceof hn))throw new TypeError("Cannot call a class as a function")}function tn(dn,hn){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return hn&&(typeof hn=="object"||typeof hn=="function")?hn:dn}function nn(dn,hn){if(typeof hn!="function"&&hn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof hn);dn.prototype=Object.create(hn&&hn.prototype,{constructor:{value:dn,enumerable:!1,writable:!0,configurable:!0}}),hn&&(Object.setPrototypeOf?Object.setPrototypeOf(dn,hn):dn.__proto__=hn)}var rn=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],on=function(dn){nn(hn,dn);function hn(un,En){Zt(this,hn),En.modules.toolbar!=null&&En.modules.toolbar.container==null&&(En.modules.toolbar.container=rn);var wn=tn(this,(hn.__proto__||Object.getPrototypeOf(hn)).call(this,un,En));return wn.quill.container.classList.add("ql-snow"),wn}return ft(hn,[{key:"extendToolbar",value:function(En){En.container.classList.add("ql-snow"),this.buildButtons([].slice.call(En.container.querySelectorAll("button")),Ht.default),this.buildPickers([].slice.call(En.container.querySelectorAll("select")),Ht.default),this.tooltip=new pn(this.quill,this.options.bounds),En.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(wn,Sn){En.handlers.link.call(En,!Sn.format.link)})}}]),hn}(Ft.default);on.DEFAULTS=(0,kt.default)(!0,{},Ft.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(hn){if(hn){var un=this.quill.getSelection();if(un==null||un.length==0)return;var En=this.quill.getText(un);/^\S+@\S+\.\S+$/.test(En)&&En.indexOf("mailto:")!==0&&(En="mailto:"+En);var wn=this.quill.theme.tooltip;wn.edit("link",En)}else this.quill.format("link",!1)}}}}});var pn=function(dn){nn(hn,dn);function hn(un,En){Zt(this,hn);var wn=tn(this,(hn.__proto__||Object.getPrototypeOf(hn)).call(this,un,En));return wn.preview=wn.root.querySelector("a.ql-preview"),wn}return ft(hn,[{key:"listen",value:function(){var En=this;dt(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(wn){En.root.classList.contains("ql-editing")?En.save():En.edit("link",En.preview.textContent),wn.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(wn){if(En.linkRange!=null){var Sn=En.linkRange;En.restoreFocus(),En.quill.formatText(Sn,"link",!1,Rt.default.sources.USER),delete En.linkRange}wn.preventDefault(),En.hide()}),this.quill.on(Rt.default.events.SELECTION_CHANGE,function(wn,Sn,fn){if(wn!=null){if(wn.length===0&&fn===Rt.default.sources.USER){var xn=En.quill.scroll.descendant(zt.default,wn.index),an=ut(xn,2),cn=an[0],bn=an[1];if(cn!=null){En.linkRange=new Ut.Range(wn.index-bn,cn.length());var mn=zt.default.formats(cn.domNode);En.preview.textContent=mn,En.preview.setAttribute("href",mn),En.show(),En.position(En.quill.getBounds(En.linkRange));return}}else delete En.linkRange;En.hide()}})}},{key:"show",value:function(){dt(hn.prototype.__proto__||Object.getPrototypeOf(hn.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),hn}(jt.BaseTooltip);pn.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),ot.default=on},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(29),dt=Wn(ut),ft=ct(36),St=ct(38),kt=ct(64),Tt=ct(65),Rt=Wn(Tt),jt=ct(66),Ft=Wn(jt),$t=ct(67),zt=Wn($t),Ut=ct(37),Bt=ct(26),Ht=ct(39),Jt=ct(40),Zt=ct(56),tn=Wn(Zt),nn=ct(68),rn=Wn(nn),on=ct(27),pn=Wn(on),dn=ct(69),hn=Wn(dn),un=ct(70),En=Wn(un),wn=ct(71),Sn=Wn(wn),fn=ct(72),xn=Wn(fn),an=ct(73),cn=Wn(an),bn=ct(13),mn=Wn(bn),Tn=ct(74),An=Wn(Tn),Pn=ct(75),Mn=Wn(Pn),Rn=ct(57),Cn=Wn(Rn),On=ct(41),In=Wn(On),Dn=ct(28),Fn=Wn(Dn),Xn=ct(59),Vn=Wn(Xn),zn=ct(60),Zn=Wn(zn),lr=ct(61),hr=Wn(lr),$n=ct(108),Un=Wn($n),Kn=ct(62),Yn=Wn(Kn);function Wn(cr){return cr&&cr.__esModule?cr:{default:cr}}dt.default.register({"attributors/attribute/direction":St.DirectionAttribute,"attributors/class/align":ft.AlignClass,"attributors/class/background":Ut.BackgroundClass,"attributors/class/color":Bt.ColorClass,"attributors/class/direction":St.DirectionClass,"attributors/class/font":Ht.FontClass,"attributors/class/size":Jt.SizeClass,"attributors/style/align":ft.AlignStyle,"attributors/style/background":Ut.BackgroundStyle,"attributors/style/color":Bt.ColorStyle,"attributors/style/direction":St.DirectionStyle,"attributors/style/font":Ht.FontStyle,"attributors/style/size":Jt.SizeStyle},!0),dt.default.register({"formats/align":ft.AlignClass,"formats/direction":St.DirectionClass,"formats/indent":kt.IndentClass,"formats/background":Ut.BackgroundStyle,"formats/color":Bt.ColorStyle,"formats/font":Ht.FontClass,"formats/size":Jt.SizeClass,"formats/blockquote":Rt.default,"formats/code-block":mn.default,"formats/header":Ft.default,"formats/list":zt.default,"formats/bold":tn.default,"formats/code":bn.Code,"formats/italic":rn.default,"formats/link":pn.default,"formats/script":hn.default,"formats/strike":En.default,"formats/underline":Sn.default,"formats/image":xn.default,"formats/video":cn.default,"formats/list/item":$t.ListItem,"modules/formula":An.default,"modules/syntax":Mn.default,"modules/toolbar":Cn.default,"themes/bubble":Un.default,"themes/snow":Yn.default,"ui/icons":In.default,"ui/picker":Fn.default,"ui/icon-picker":Zn.default,"ui/color-picker":Vn.default,"ui/tooltip":hr.default},!0),ot.default=dt.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.IndentClass=void 0;var ut=function(){function zt(Ut,Bt){for(var Ht=0;Ht<Bt.length;Ht++){var Jt=Bt[Ht];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Ut,Jt.key,Jt)}}return function(Ut,Bt,Ht){return Bt&&zt(Ut.prototype,Bt),Ht&&zt(Ut,Ht),Ut}}(),dt=function zt(Ut,Bt,Ht){Ut===null&&(Ut=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Ut,Bt);if(Jt===void 0){var Zt=Object.getPrototypeOf(Ut);return Zt===null?void 0:zt(Zt,Bt,Ht)}else{if("value"in Jt)return Jt.value;var tn=Jt.get;return tn===void 0?void 0:tn.call(Ht)}},ft=ct(0),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Ut){if(!(zt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Rt(zt,Ut){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:zt}function jt(zt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);zt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Ut):zt.__proto__=Ut)}var Ft=function(zt){jt(Ut,zt);function Ut(){return Tt(this,Ut),Rt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ut(Ut,[{key:"add",value:function(Ht,Jt){if(Jt==="+1"||Jt==="-1"){var Zt=this.value(Ht)||0;Jt=Jt==="+1"?Zt+1:Zt-1}return Jt===0?(this.remove(Ht),!0):dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"add",this).call(this,Ht,Jt)}},{key:"canAdd",value:function(Ht,Jt){return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"canAdd",this).call(this,Ht,Jt)||dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"canAdd",this).call(this,Ht,parseInt(Jt))}},{key:"value",value:function(Ht){return parseInt(dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"value",this).call(this,Ht))||void 0}}]),Ut}(St.default.Attributor.Class),$t=new Ft("indent","ql-indent",{scope:St.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});ot.IndentClass=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(4),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="blockquote",Rt.tagName="blockquote",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft($t,zt){for(var Ut=0;Ut<zt.length;Ut++){var Bt=zt[Ut];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty($t,Bt.key,Bt)}}return function($t,zt,Ut){return zt&&Ft($t.prototype,zt),Ut&&Ft($t,Ut),$t}}(),dt=ct(4),ft=St(dt);function St(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function kt(Ft,$t){if(!(Ft instanceof $t))throw new TypeError("Cannot call a class as a function")}function Tt(Ft,$t){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:Ft}function Rt(Ft,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);Ft.prototype=Object.create($t&&$t.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,$t):Ft.__proto__=$t)}var jt=function(Ft){Rt($t,Ft);function $t(){return kt(this,$t),Tt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return ut($t,null,[{key:"formats",value:function(Ut){return this.tagName.indexOf(Ut.tagName)+1}}]),$t}(ft.default);jt.blotName="header",jt.tagName=["H1","H2","H3","H4","H5","H6"],ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.ListItem=void 0;var ut=function(){function Zt(tn,nn){for(var rn=0;rn<nn.length;rn++){var on=nn[rn];on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(tn,on.key,on)}}return function(tn,nn,rn){return nn&&Zt(tn.prototype,nn),rn&&Zt(tn,rn),tn}}(),dt=function Zt(tn,nn,rn){tn===null&&(tn=Function.prototype);var on=Object.getOwnPropertyDescriptor(tn,nn);if(on===void 0){var pn=Object.getPrototypeOf(tn);return pn===null?void 0:Zt(pn,nn,rn)}else{if("value"in on)return on.value;var dn=on.get;return dn===void 0?void 0:dn.call(rn)}},ft=ct(0),St=Ft(ft),kt=ct(4),Tt=Ft(kt),Rt=ct(25),jt=Ft(Rt);function Ft(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}function $t(Zt,tn,nn){return tn in Zt?Object.defineProperty(Zt,tn,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Zt[tn]=nn,Zt}function zt(Zt,tn){if(!(Zt instanceof tn))throw new TypeError("Cannot call a class as a function")}function Ut(Zt,tn){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&(typeof tn=="object"||typeof tn=="function")?tn:Zt}function Bt(Zt,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);Zt.prototype=Object.create(tn&&tn.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,tn):Zt.__proto__=tn)}var Ht=function(Zt){Bt(tn,Zt);function tn(){return zt(this,tn),Ut(this,(tn.__proto__||Object.getPrototypeOf(tn)).apply(this,arguments))}return ut(tn,[{key:"format",value:function(rn,on){rn===Jt.blotName&&!on?this.replaceWith(St.default.create(this.statics.scope)):dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"format",this).call(this,rn,on)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(rn,on){return this.parent.isolate(this.offset(this.parent),this.length()),rn===this.parent.statics.blotName?(this.parent.replaceWith(rn,on),this):(this.parent.unwrap(),dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"replaceWith",this).call(this,rn,on))}}],[{key:"formats",value:function(rn){return rn.tagName===this.tagName?void 0:dt(tn.__proto__||Object.getPrototypeOf(tn),"formats",this).call(this,rn)}}]),tn}(Tt.default);Ht.blotName="list-item",Ht.tagName="LI";var Jt=function(Zt){Bt(tn,Zt),ut(tn,null,[{key:"create",value:function(rn){var on=rn==="ordered"?"OL":"UL",pn=dt(tn.__proto__||Object.getPrototypeOf(tn),"create",this).call(this,on);return(rn==="checked"||rn==="unchecked")&&pn.setAttribute("data-checked",rn==="checked"),pn}},{key:"formats",value:function(rn){if(rn.tagName==="OL")return"ordered";if(rn.tagName==="UL")return rn.hasAttribute("data-checked")?rn.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function tn(nn){zt(this,tn);var rn=Ut(this,(tn.__proto__||Object.getPrototypeOf(tn)).call(this,nn)),on=function(dn){if(dn.target.parentNode===nn){var hn=rn.statics.formats(nn),un=St.default.find(dn.target);hn==="checked"?un.format("list","unchecked"):hn==="unchecked"&&un.format("list","checked")}};return nn.addEventListener("touchstart",on),nn.addEventListener("mousedown",on),rn}return ut(tn,[{key:"format",value:function(rn,on){this.children.length>0&&this.children.tail.format(rn,on)}},{key:"formats",value:function(){return $t({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(rn,on){if(rn instanceof Ht)dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"insertBefore",this).call(this,rn,on);else{var pn=on==null?this.length():on.offset(this),dn=this.split(pn);dn.parent.insertBefore(rn,dn)}}},{key:"optimize",value:function(rn){dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"optimize",this).call(this,rn);var on=this.next;on!=null&&on.prev===this&&on.statics.blotName===this.statics.blotName&&on.domNode.tagName===this.domNode.tagName&&on.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(on.moveChildren(this),on.remove())}},{key:"replace",value:function(rn){if(rn.statics.blotName!==this.statics.blotName){var on=St.default.create(this.statics.defaultChild);rn.moveChildren(on),this.appendChild(on)}dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"replace",this).call(this,rn)}}]),tn}(jt.default);Jt.blotName="list",Jt.scope=St.default.Scope.BLOCK_BLOT,Jt.tagName=["OL","UL"],Jt.defaultChild="list-item",Jt.allowedChildren=[Ht],ot.ListItem=Ht,ot.default=Jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(56),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="italic",Rt.tagName=["EM","I"],ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(zt,Ut){for(var Bt=0;Bt<Ut.length;Bt++){var Ht=Ut[Bt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(zt,Ht.key,Ht)}}return function(zt,Ut,Bt){return Ut&&$t(zt.prototype,Ut),Bt&&$t(zt,Bt),zt}}(),dt=function $t(zt,Ut,Bt){zt===null&&(zt=Function.prototype);var Ht=Object.getOwnPropertyDescriptor(zt,Ut);if(Ht===void 0){var Jt=Object.getPrototypeOf(zt);return Jt===null?void 0:$t(Jt,Ut,Bt)}else{if("value"in Ht)return Ht.value;var Zt=Ht.get;return Zt===void 0?void 0:Zt.call(Bt)}},ft=ct(6),St=kt(ft);function kt($t){return $t&&$t.__esModule?$t:{default:$t}}function Tt($t,zt){if(!($t instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt($t,zt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:$t}function jt($t,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);$t.prototype=Object.create(zt&&zt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,zt):$t.__proto__=zt)}var Ft=function($t){jt(zt,$t);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ut(zt,null,[{key:"create",value:function(Bt){return Bt==="super"?document.createElement("sup"):Bt==="sub"?document.createElement("sub"):dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this,Bt)}},{key:"formats",value:function(Bt){if(Bt.tagName==="SUB")return"sub";if(Bt.tagName==="SUP")return"super"}}]),zt}(St.default);Ft.blotName="script",Ft.tagName=["SUB","SUP"],ot.default=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="strike",Rt.tagName="S",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,Ft){if(!(jt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function kt(jt,Ft){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:jt}function Tt(jt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);jt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Ft):jt.__proto__=Ft)}var Rt=function(jt){Tt(Ft,jt);function Ft(){return St(this,Ft),kt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return Ft}(dt.default);Rt.blotName="underline",Rt.tagName="U",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ut(Bt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var Zt=Ht[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Bt,Zt.key,Zt)}}return function(Bt,Ht,Jt){return Ht&&Ut(Bt.prototype,Ht),Jt&&Ut(Bt,Jt),Bt}}(),dt=function Ut(Bt,Ht,Jt){Bt===null&&(Bt=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Bt,Ht);if(Zt===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Ut(tn,Ht,Jt)}else{if("value"in Zt)return Zt.value;var nn=Zt.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(0),St=Tt(ft),kt=ct(27);function Tt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Rt(Ut,Bt){if(!(Ut instanceof Bt))throw new TypeError("Cannot call a class as a function")}function jt(Ut,Bt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Ut}function Ft(Ut,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Ut.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Bt):Ut.__proto__=Bt)}var $t=["alt","height","width"],zt=function(Ut){Ft(Bt,Ut);function Bt(){return Rt(this,Bt),jt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Jt,Zt){$t.indexOf(Jt)>-1?Zt?this.domNode.setAttribute(Jt,Zt):this.domNode.removeAttribute(Jt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Jt,Zt)}}],[{key:"create",value:function(Jt){var Zt=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Jt);return typeof Jt=="string"&&Zt.setAttribute("src",this.sanitize(Jt)),Zt}},{key:"formats",value:function(Jt){return $t.reduce(function(Zt,tn){return Jt.hasAttribute(tn)&&(Zt[tn]=Jt.getAttribute(tn)),Zt},{})}},{key:"match",value:function(Jt){return/\.(jpe?g|gif|png)$/.test(Jt)||/^data:image\/.+;base64/.test(Jt)}},{key:"sanitize",value:function(Jt){return(0,kt.sanitize)(Jt,["http","https","data"])?Jt:"//:0"}},{key:"value",value:function(Jt){return Jt.getAttribute("src")}}]),Bt}(St.default.Embed);zt.blotName="image",zt.tagName="IMG",ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ut(Bt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var Zt=Ht[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Bt,Zt.key,Zt)}}return function(Bt,Ht,Jt){return Ht&&Ut(Bt.prototype,Ht),Jt&&Ut(Bt,Jt),Bt}}(),dt=function Ut(Bt,Ht,Jt){Bt===null&&(Bt=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Bt,Ht);if(Zt===void 0){var tn=Object.getPrototypeOf(Bt);return tn===null?void 0:Ut(tn,Ht,Jt)}else{if("value"in Zt)return Zt.value;var nn=Zt.get;return nn===void 0?void 0:nn.call(Jt)}},ft=ct(4),St=ct(27),kt=Tt(St);function Tt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Rt(Ut,Bt){if(!(Ut instanceof Bt))throw new TypeError("Cannot call a class as a function")}function jt(Ut,Bt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Ut}function Ft(Ut,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Ut.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Bt):Ut.__proto__=Bt)}var $t=["height","width"],zt=function(Ut){Ft(Bt,Ut);function Bt(){return Rt(this,Bt),jt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Jt,Zt){$t.indexOf(Jt)>-1?Zt?this.domNode.setAttribute(Jt,Zt):this.domNode.removeAttribute(Jt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Jt,Zt)}}],[{key:"create",value:function(Jt){var Zt=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Jt);return Zt.setAttribute("frameborder","0"),Zt.setAttribute("allowfullscreen",!0),Zt.setAttribute("src",this.sanitize(Jt)),Zt}},{key:"formats",value:function(Jt){return $t.reduce(function(Zt,tn){return Jt.hasAttribute(tn)&&(Zt[tn]=Jt.getAttribute(tn)),Zt},{})}},{key:"sanitize",value:function(Jt){return kt.default.sanitize(Jt)}},{key:"value",value:function(Jt){return Jt.getAttribute("src")}}]),Bt}(ft.BlockEmbed);zt.blotName="video",zt.className="ql-video",zt.tagName="IFRAME",ot.default=zt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.FormulaBlot=void 0;var ut=function(){function Jt(Zt,tn){for(var nn=0;nn<tn.length;nn++){var rn=tn[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Zt,rn.key,rn)}}return function(Zt,tn,nn){return tn&&Jt(Zt.prototype,tn),nn&&Jt(Zt,nn),Zt}}(),dt=function Jt(Zt,tn,nn){Zt===null&&(Zt=Function.prototype);var rn=Object.getOwnPropertyDescriptor(Zt,tn);if(rn===void 0){var on=Object.getPrototypeOf(Zt);return on===null?void 0:Jt(on,tn,nn)}else{if("value"in rn)return rn.value;var pn=rn.get;return pn===void 0?void 0:pn.call(nn)}},ft=ct(35),St=Ft(ft),kt=ct(5),Tt=Ft(kt),Rt=ct(9),jt=Ft(Rt);function Ft(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function $t(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}function zt(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&(typeof Zt=="object"||typeof Zt=="function")?Zt:Jt}function Ut(Jt,Zt){if(typeof Zt!="function"&&Zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}var Bt=function(Jt){Ut(Zt,Jt);function Zt(){return $t(this,Zt),zt(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).apply(this,arguments))}return ut(Zt,null,[{key:"create",value:function(nn){var rn=dt(Zt.__proto__||Object.getPrototypeOf(Zt),"create",this).call(this,nn);return typeof nn=="string"&&(window.katex.render(nn,rn,{throwOnError:!1,errorColor:"#f00"}),rn.setAttribute("data-value",nn)),rn}},{key:"value",value:function(nn){return nn.getAttribute("data-value")}}]),Zt}(St.default);Bt.blotName="formula",Bt.className="ql-formula",Bt.tagName="SPAN";var Ht=function(Jt){Ut(Zt,Jt),ut(Zt,null,[{key:"register",value:function(){Tt.default.register(Bt,!0)}}]);function Zt(){$t(this,Zt);var tn=zt(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return tn}return Zt}(jt.default);ot.FormulaBlot=Bt,ot.default=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.CodeToken=ot.CodeBlock=void 0;var ut=function(){function nn(rn,on){for(var pn=0;pn<on.length;pn++){var dn=on[pn];dn.enumerable=dn.enumerable||!1,dn.configurable=!0,"value"in dn&&(dn.writable=!0),Object.defineProperty(rn,dn.key,dn)}}return function(rn,on,pn){return on&&nn(rn.prototype,on),pn&&nn(rn,pn),rn}}(),dt=function nn(rn,on,pn){rn===null&&(rn=Function.prototype);var dn=Object.getOwnPropertyDescriptor(rn,on);if(dn===void 0){var hn=Object.getPrototypeOf(rn);return hn===null?void 0:nn(hn,on,pn)}else{if("value"in dn)return dn.value;var un=dn.get;return un===void 0?void 0:un.call(pn)}},ft=ct(0),St=zt(ft),kt=ct(5),Tt=zt(kt),Rt=ct(9),jt=zt(Rt),Ft=ct(13),$t=zt(Ft);function zt(nn){return nn&&nn.__esModule?nn:{default:nn}}function Ut(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}function Bt(nn,rn){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&(typeof rn=="object"||typeof rn=="function")?rn:nn}function Ht(nn,rn){if(typeof rn!="function"&&rn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof rn);nn.prototype=Object.create(rn&&rn.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),rn&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,rn):nn.__proto__=rn)}var Jt=function(nn){Ht(rn,nn);function rn(){return Ut(this,rn),Bt(this,(rn.__proto__||Object.getPrototypeOf(rn)).apply(this,arguments))}return ut(rn,[{key:"replaceWith",value:function(pn){this.domNode.textContent=this.domNode.textContent,this.attach(),dt(rn.prototype.__proto__||Object.getPrototypeOf(rn.prototype),"replaceWith",this).call(this,pn)}},{key:"highlight",value:function(pn){var dn=this.domNode.textContent;this.cachedText!==dn&&((dn.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=pn(dn),this.domNode.normalize(),this.attach()),this.cachedText=dn)}}]),rn}($t.default);Jt.className="ql-syntax";var Zt=new St.default.Attributor.Class("token","hljs",{scope:St.default.Scope.INLINE}),tn=function(nn){Ht(rn,nn),ut(rn,null,[{key:"register",value:function(){Tt.default.register(Zt,!0),Tt.default.register(Jt,!0)}}]);function rn(on,pn){Ut(this,rn);var dn=Bt(this,(rn.__proto__||Object.getPrototypeOf(rn)).call(this,on,pn));if(typeof dn.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var hn=null;return dn.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(hn),hn=setTimeout(function(){dn.highlight(),hn=null},dn.options.interval)}),dn.highlight(),dn}return ut(rn,[{key:"highlight",value:function(){var pn=this;if(!this.quill.selection.composing){this.quill.update(Tt.default.sources.USER);var dn=this.quill.getSelection();this.quill.scroll.descendants(Jt).forEach(function(hn){hn.highlight(pn.options.highlight)}),this.quill.update(Tt.default.sources.SILENT),dn!=null&&this.quill.setSelection(dn,Tt.default.sources.SILENT)}}}]),rn}(jt.default);tn.DEFAULTS={highlight:function(){return window.hljs==null?null:function(nn){var rn=window.hljs.highlightAuto(nn);return rn.value}}(),interval:1e3},ot.CodeBlock=Jt,ot.CodeToken=Zt,ot.default=tn},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BubbleTooltip=void 0;var ut=function rn(on,pn,dn){on===null&&(on=Function.prototype);var hn=Object.getOwnPropertyDescriptor(on,pn);if(hn===void 0){var un=Object.getPrototypeOf(on);return un===null?void 0:rn(un,pn,dn)}else{if("value"in hn)return hn.value;var En=hn.get;return En===void 0?void 0:En.call(dn)}},dt=function(){function rn(on,pn){for(var dn=0;dn<pn.length;dn++){var hn=pn[dn];hn.enumerable=hn.enumerable||!1,hn.configurable=!0,"value"in hn&&(hn.writable=!0),Object.defineProperty(on,hn.key,hn)}}return function(on,pn,dn){return pn&&rn(on.prototype,pn),dn&&rn(on,dn),on}}(),ft=ct(3),St=Ut(ft),kt=ct(8),Tt=Ut(kt),Rt=ct(43),jt=Ut(Rt),Ft=ct(15),$t=ct(41),zt=Ut($t);function Ut(rn){return rn&&rn.__esModule?rn:{default:rn}}function Bt(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}function Ht(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&(typeof on=="object"||typeof on=="function")?on:rn}function Jt(rn,on){if(typeof on!="function"&&on!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof on);rn.prototype=Object.create(on&&on.prototype,{constructor:{value:rn,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(rn,on):rn.__proto__=on)}var Zt=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],tn=function(rn){Jt(on,rn);function on(pn,dn){Bt(this,on),dn.modules.toolbar!=null&&dn.modules.toolbar.container==null&&(dn.modules.toolbar.container=Zt);var hn=Ht(this,(on.__proto__||Object.getPrototypeOf(on)).call(this,pn,dn));return hn.quill.container.classList.add("ql-bubble"),hn}return dt(on,[{key:"extendToolbar",value:function(dn){this.tooltip=new nn(this.quill,this.options.bounds),this.tooltip.root.appendChild(dn.container),this.buildButtons([].slice.call(dn.container.querySelectorAll("button")),zt.default),this.buildPickers([].slice.call(dn.container.querySelectorAll("select")),zt.default)}}]),on}(jt.default);tn.DEFAULTS=(0,St.default)(!0,{},jt.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(on){on?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var nn=function(rn){Jt(on,rn);function on(pn,dn){Bt(this,on);var hn=Ht(this,(on.__proto__||Object.getPrototypeOf(on)).call(this,pn,dn));return hn.quill.on(Tt.default.events.EDITOR_CHANGE,function(un,En,wn,Sn){if(un===Tt.default.events.SELECTION_CHANGE)if(En!=null&&En.length>0&&Sn===Tt.default.sources.USER){hn.show(),hn.root.style.left="0px",hn.root.style.width="",hn.root.style.width=hn.root.offsetWidth+"px";var fn=hn.quill.getLines(En.index,En.length);if(fn.length===1)hn.position(hn.quill.getBounds(En));else{var xn=fn[fn.length-1],an=hn.quill.getIndex(xn),cn=Math.min(xn.length()-1,En.index+En.length-an),bn=hn.quill.getBounds(new Ft.Range(an,cn));hn.position(bn)}}else document.activeElement!==hn.textbox&&hn.quill.hasFocus()&&hn.hide()}),hn}return dt(on,[{key:"listen",value:function(){var dn=this;ut(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){dn.root.classList.remove("ql-editing")}),this.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!dn.root.classList.contains("ql-hidden")){var hn=dn.quill.getSelection();hn!=null&&dn.position(dn.quill.getBounds(hn))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(dn){var hn=ut(on.prototype.__proto__||Object.getPrototypeOf(on.prototype),"position",this).call(this,dn),un=this.root.querySelector(".ql-tooltip-arrow");if(un.style.marginLeft="",hn===0)return hn;un.style.marginLeft=-1*hn-un.offsetWidth/2+"px"}}]),on}(Rt.BaseTooltip);nn.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),ot.BubbleTooltip=nn,ot.default=tn},function(et,ot,ct){et.exports=ct(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var it=function(g,et){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ct){ot.__proto__=ct}||function(ot,ct){for(var ut in ct)ct.hasOwnProperty(ut)&&(ot[ut]=ct[ut])},it(g,et)};return function(g,et){it(g,et);function ot(){this.constructor=g}g.prototype=et===null?Object.create(et):(ot.prototype=et.prototype,new ot)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(it){for(var g,et=1,ot=arguments.length;et<ot;et++){g=arguments[et];for(var ct in g)Object.prototype.hasOwnProperty.call(g,ct)&&(it[ct]=g[ct])}return it},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ct=0,g=0;g<et;g++)for(var ut=arguments[g],dt=0,ft=ut.length;dt<ft;dt++,ct++)ot[ct]=ut[dt];return ot},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(it){__extends(g,it);function g(et){var ot=it.call(this,et)||this;ot.dirtyProps=["modules","formats","bounds","theme","children"],ot.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],ot.state={generation:0},ot.selection=null,ot.onEditorChange=function(ut,dt,ft,St){var kt,Tt,Rt,jt;ut==="text-change"?(Tt=(kt=ot).onEditorChangeText)===null||Tt===void 0||Tt.call(kt,ot.editor.root.innerHTML,dt,St,ot.unprivilegedEditor):ut==="selection-change"&&((jt=(Rt=ot).onEditorChangeSelection)===null||jt===void 0||jt.call(Rt,dt,St,ot.unprivilegedEditor))};var ct=ot.isControlled()?et.value:et.defaultValue;return ot.value=ct??"",ot}return g.prototype.validateProps=function(et){var ot;if(react_1.default.Children.count(et.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(et.children)){var ct=react_1.default.Children.only(et.children);if(((ot=ct)===null||ot===void 0?void 0:ot.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&et.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(et,ot){var ct=this,ut;if(this.validateProps(et),!this.editor||this.state.generation!==ot.generation)return!0;if("value"in et){var dt=this.getEditorContents(),ft=(ut=et.value,ut??"");this.isEqualValue(ft,dt)||this.setEditorContents(this.editor,ft)}return et.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,et.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(St){return!isEqual_1.default(et[St],ct.props[St])})},g.prototype.shouldComponentRegenerate=function(et){var ot=this;return this.dirtyProps.some(function(ct){return!isEqual_1.default(et[ct],ot.props[ct])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(et,ot){var ct=this;if(this.editor&&this.shouldComponentRegenerate(et)){var ut=this.editor.getContents(),dt=this.editor.getSelection();this.regenerationSnapshot={delta:ut,selection:dt},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==ot.generation){var ft=this.regenerationSnapshot,ut=ft.delta,St=ft.selection;delete this.regenerationSnapshot,this.instantiateEditor();var kt=this.editor;kt.setContents(ut),postpone(function(){return ct.setEditorSelection(kt,St)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(et,ot){var ct=new quill_1.default(et,ot);return ot.tabIndex!=null&&this.setEditorTabIndex(ct,ot.tabIndex),this.hookEditor(ct),ct},g.prototype.hookEditor=function(et){this.unprivilegedEditor=this.makeUnprivilegedEditor(et),et.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(et){et.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(et){return et&&et.ops},g.prototype.isEqualValue=function(et,ot){return this.isDelta(et)&&this.isDelta(ot)?isEqual_1.default(et.ops,ot.ops):isEqual_1.default(et,ot)},g.prototype.setEditorContents=function(et,ot){var ct=this;this.value=ot;var ut=this.getEditorSelection();typeof ot=="string"?et.setContents(et.clipboard.convert(ot)):et.setContents(ot),postpone(function(){return ct.setEditorSelection(et,ut)})},g.prototype.setEditorSelection=function(et,ot){if(this.selection=ot,ot){var ct=et.getLength();ot.index=Math.max(0,Math.min(ot.index,ct-1)),ot.length=Math.max(0,Math.min(ot.length,ct-1-ot.index)),et.setSelection(ot)}},g.prototype.setEditorTabIndex=function(et,ot){var ct,ut;!((ut=(ct=et)===null||ct===void 0?void 0:ct.scroll)===null||ut===void 0)&&ut.domNode&&(et.scroll.domNode.tabIndex=ot)},g.prototype.setEditorReadOnly=function(et,ot){ot?et.disable():et.enable()},g.prototype.makeUnprivilegedEditor=function(et){var ot=et;return{getHTML:function(){return ot.root.innerHTML},getLength:ot.getLength.bind(ot),getText:ot.getText.bind(ot),getContents:ot.getContents.bind(ot),getSelection:ot.getSelection.bind(ot),getBounds:ot.getBounds.bind(ot)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var et=react_dom_1.default.findDOMNode(this.editingArea);if(!et)throw new Error("Cannot find element for editing area");if(et.nodeType===3)throw new Error("Editing area cannot be a text node");return et},g.prototype.renderEditingArea=function(){var et=this,ot=this.props,ct=ot.children,ut=ot.preserveWhitespace,dt=this.state.generation,ft={key:dt,ref:function(St){et.editingArea=St}};return react_1.default.Children.count(ct)?react_1.default.cloneElement(react_1.default.Children.only(ct),ft):ut?react_1.default.createElement("pre",__assign({},ft)):react_1.default.createElement("div",__assign({},ft))},g.prototype.render=function(){var et;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(et=this.props.className,et??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(et,ot,ct,ut){var dt,ft;if(this.editor){var St=this.isDelta(this.value)?ut.getContents():ut.getHTML();St!==this.getEditorContents()&&(this.lastDeltaChangeSet=ot,this.value=St,(ft=(dt=this.props).onChange)===null||ft===void 0||ft.call(dt,et,ot,ct,ut))}},g.prototype.onEditorChangeSelection=function(et,ot,ct){var ut,dt,ft,St,kt,Tt;if(this.editor){var Rt=this.getEditorSelection(),jt=!Rt&&et,Ft=Rt&&!et;isEqual_1.default(et,Rt)||(this.selection=et,(dt=(ut=this.props).onChangeSelection)===null||dt===void 0||dt.call(ut,et,ot,ct),jt?(St=(ft=this.props).onFocus)===null||St===void 0||St.call(ft,et,ot,ct):Ft&&((Tt=(kt=this.props).onBlur)===null||Tt===void 0||Tt.call(kt,Rt,ot,ct)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=quill_1.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(react_1.default.Component);function postpone(it){Promise.resolve().then(it)}var lib=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib),quill_snow="";function LogoUploader({logoPreview:it,setLogo:g,setLogoPreview:et}){const ot=reactExports.useRef(null),ct=dt=>{const ft=dt.target.files[0];if(!ft)return;if(ft.size>2*1024*1024){y$4.error("File must be less than 2MB"),dt.target.value="";return}const St=new Image;St.onload=()=>{if(St.width>512||St.height>512){y$4.warning("Logo too large! Please use up to 512512 px."),dt.target.value="";return}const kt=new FileReader;kt.onloadend=()=>{g(kt.result),et(kt.result)},kt.readAsDataURL(ft)},St.src=URL.createObjectURL(ft)},ut=()=>{g(null),et(null),ot.current&&(ot.current.value=""),y$4.info("Logo removed")};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Brand Logo (Max 512512  2 MB)"}),jsxRuntimeExports.jsx("input",{ref:ot,type:"file",accept:"image/png, image/jpeg, image/webp",onChange:ct,className:`block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0 file:font-semibold
                   file:bg-royalPurple file:text-white hover:file:opacity-80`}),it&&jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-col items-center space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:it,alt:"Logo preview",className:"w-20 h-20 object-contain border border-gray-700 rounded-md"}),jsxRuntimeExports.jsx("button",{onClick:ut,type:"button",className:"absolute -top-2 -right-2 bg-gray-900 rounded-full p-1 hover:bg-gray-800",title:"Remove",children:jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400 hover:text-red-300"})})]})})]})}function UnsplashImagePicker({onSelect:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(1),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),Rt=reactExports.useRef(null);async function jt($t=1,zt=!1){if(g.trim()){St(!0);try{const Ut=await axiosInstance.get(`https://cre8tlystudio.com/api/unsplash/search?query=${encodeURIComponent(g)}&per_page=30&page=${$t}`),Bt=Ut.data.results||Ut.data;(!Bt||Bt.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),ct(Ht=>zt?[...Ht,...Bt]:Bt),Tt(Bt.length>0),dt($t)}catch(Ut){console.error("Unsplash fetch failed:",Ut),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{St(!1)}}}const Ft=()=>{ct([]),dt(1),jt(1,!1)};return reactExports.useEffect(()=>{if(!Rt.current)return;const $t=new IntersectionObserver(zt=>{zt[0].isIntersecting&&kt&&!ft&&jt(ut+1,!0)});return $t.observe(Rt.current),()=>$t.disconnect()},[kt,ft,ut,g]),jsxRuntimeExports.jsxs("div",{className:"space-y-4 bg-[#111] p-4 rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{value:g,onChange:$t=>et($t.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:"flex-1 bg-gray-900 text-white p-2 rounded-lg border border-gray-700"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ft,disabled:ft,className:"bg-green text-black font-bold px-4 py-2 rounded-lg transition hover:bg-green-400",children:ft?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto relative",style:{maxHeight:"400px"},children:[ot.map($t=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>it($t.urls.full,$t),children:[jsxRuntimeExports.jsx("img",{src:$t.urls.small,alt:$t.alt_description,className:"rounded-lg w-full h-40 object-cover group-hover:opacity-75 transition"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/60 px-1 rounded text-white",children:$t.user.name})]},$t.id)),kt&&!ft&&jsxRuntimeExports.jsx("div",{ref:Rt,className:"col-span-full h-8"}),ft&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-green rounded-full animate-spin"})})]})]})}function CoverUpload({setCover:it}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(null),{user:ut}=useAuth(),dt=reactExports.useRef(null),ft=useNavigate(),St=!(ut!=null&&ut.pro_covers),kt=jt=>{const Ft=jt.target.files[0];if(!Ft)return;if(Ft.size>1e3*1024*1024){y$4.error("File too large. Maximum 1GB allowed.");return}const $t=new FileReader;$t.onloadend=()=>{it($t.result),et($t.result),ct(null)},$t.readAsDataURL(Ft)},Tt=()=>ft("/plans"),Rt=(jt,Ft)=>{it(jt),et(Ft.urls.small),ct({name:Ft.user.name,profile:Ft.user.links.html}),y$4.success("Cover image selected!")};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6 border border-gray-700 rounded-xl p-4 bg-gray-900/60 overflow-hidden",children:[St&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Tt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Unlock Pro Covers"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-300 font-semibold text-lg tracking-wide",children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                     text-black font-semibold text-xs px-3 py-1 rounded-full
                     shadow-[0_0_10px_rgba(168,130,255,0.6)]
                     border border-[#d2b6ff]/60 uppercase tracking-wider
                     ${St?"opacity-60":""}`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:dt,type:"file",accept:"image/*",onChange:kt,className:"hidden",disabled:St}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!St&&dt.current.click(),disabled:St,className:`px-5 py-2 rounded-md font-semibold text-sm shadow-md transition cursor-pointer flex items-center gap-2 
          ${St?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-green"}`,children:[jsxRuntimeExports.jsx(Image$3,{size:16})," Choose File"]}),!St&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Rt})}),g&&!St&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cover will appear before your first page."}),ot&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:ot.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:ot.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:"Unsplash"})]})]})]})}function PromptSelect({setText:it}){const[g,et]=reactExports.useState(!1),ot=(ct,ut)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-widest text-gray-300 bg-[#0a0a0a] sticky top-0 z-10 border-b border-gray-800",children:ct}),ut.map((dt,ft)=>jsxRuntimeExports.jsx("li",{onClick:()=>{it(dt.text),et(!1)},className:"px-4 py-2 text-gray-200 bg-[#0a0a0a] hover:bg-gradient-to-r from-[#00e07a] to-[#670fe7] hover:text-white cursor-pointer transition",children:dt.label},ft))]});return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Choose a Pre-Made Prompt"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>et(!g),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 text-left flex justify-between items-center hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx("span",{children:"Select a pre-made prompt..."}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),g&&jsxRuntimeExports.jsxs("ul",{className:`absolute z-50 mt-1 w-full max-h-60 overflow-y-auto 
                     rounded-lg border border-gray-700 shadow-lg
                     scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900`,style:{backgroundColor:"#0a0a0a",boxShadow:"0 0 25px rgba(0,0,0,0.7)"},children:[ot("Beginner",cannedPrompts.beginner),ot("Professional",cannedPrompts.professional),ot("Advanced",cannedPrompts.expert)]})]})}function ColorThemeChooser({bgTheme:it,setBgTheme:g}){const et=colorThemes.find(ot=>ot.name===it)||colorThemes[0];return jsxRuntimeExports.jsxs("div",{className:"mt-6 w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3 font-medium",children:"Theme Color"}),jsxRuntimeExports.jsx("div",{className:"h-14 w-full rounded-lg border border-gray-700 mb-4 shadow-inner transition-all duration-300",style:{backgroundColor:et.preview}}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 overflow-y-auto rounded-lg border border-gray-800 p-2",style:{maxHeight:"300px"},children:colorThemes.map(ot=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(ot.name),className:`relative w-full h-12 rounded-lg transition-all duration-200 focus:outline-none border shadow-[inset_0_1px_3px_rgba(255,255,255,0.2)] 
              ${it===ot.name?"border-green-400 ring-2 ring-green-500/60 scale-[1.05]":"border-gray-700 hover:border-green-300 hover:scale-[1.02]"}`,style:{background:ot.preview},children:[jsxRuntimeExports.jsx("div",{className:"glossy-overlay"}),jsxRuntimeExports.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide ${ot.name==="dark"||ot.name==="graphite"||ot.name==="royal"?"text-white":"text-black"}`,children:ot.label})]},ot.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Click a color to set your PDF background theme."})]})}function ThemeSelector({theme:it,setTheme:g}){return jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Font Style"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:themes.map(et=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(et.value),className:`p-4 rounded-xl border font-semibold shadow-md transition-transform duration-200 ease-out ${it===et.value?"border-green ring-2 ring-green/60 scale-[1.01]":"border-gray-700 hover:ring-1 hover:ring-green/40 hover:scale-[1.01]"}`,style:{background:"#111",color:et.textColor,fontFamily:et.value==="modern"?"Montserrat":et.value==="classic"?"AdobeArabic":"Bebas Neue"},children:jsxRuntimeExports.jsx("p",{className:"text-base",children:et.label})},et.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Each style uses a unique font in your final PDF."})]})}function PromptForm({text:it,setText:g,title:et,setTitle:ot,theme:ct,setTheme:ut,bgTheme:dt,setBgTheme:ft,pages:St,setPages:kt,setLogo:Tt,logoPreview:Rt,setLogoPreview:jt,link:Ft,setLink:$t,cover:zt,setCover:Ut,cta:Bt,setCta:Ht,onSubmit:Jt,loading:Zt,contentType:tn}){const{user:nn}=useAuth(),[rn,on]=reactExports.useState(""),[pn,dn]=reactExports.useState(0),[hn,un]=reactExports.useState(!1),[En,wn]=reactExports.useState("");reactExports.useEffect(()=>{nn!=null&&nn.cta&&(!Bt||Bt.trim()==="")&&Ht(nn.cta)},[nn,nn==null?void 0:nn.cta]),reactExports.useEffect(()=>{const xn=((it==null?void 0:it.replace(/<[^>]+>/g,"").trim())||"").length,an=1e5,cn=an*.9;dn(xn),xn>an?(hn||y$4.error(`Your prompt is too long (${xn.toLocaleString()} / ${an.toLocaleString()} characters). Please shorten it before submitting.`,{autoClose:6e3}),un(!0),on(" Your prompt exceeds the limit. Please shorten it.")):xn>cn?(un(!1),on(`Approaching limit  ${xn.toLocaleString()} / ${an.toLocaleString()} characters.`)):(un(!1),on(""))},[it]);const Sn=fn=>{if(fn.preventDefault(),!it.replace(/<[^>]+>/g,"").trim()){wn("Prompt is required before submission."),y$4.error("Please enter a prompt before submitting.");return}wn(""),Jt(fn,tn)};return jsxRuntimeExports.jsxs("form",{onSubmit:Sn,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages (25 max)"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"25",value:St??"",onChange:fn=>{const xn=fn.target.value;kt(xn===""?"":Math.min(25,Math.max(1,Number(xn))))},className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg appearance-none"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-y-0 right-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(fn=>Math.max(1,Number(fn||1)-1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(fn=>Math.min(25,Number(fn||1)+1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""})]})]})]}),jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 mt-4 font-medium",children:"Document Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter a title for your project or document...",value:et,onChange:fn=>ot(fn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This title will appear at the top of your generated document."})]}),jsxRuntimeExports.jsx(PromptSelect,{setText:g}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-[250px] overflow-hidden rounded-lg border border-gray-600 bg-white",style:{color:"#111"},children:jsxRuntimeExports.jsx(ReactQuill$1,{theme:"snow",value:it,onChange:fn=>{g(fn),En&&wn("")},modules:{toolbar:!1},placeholder:"Write your prompt...",className:"h-[250px]"})}),En&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium",children:En}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-2",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium ${rn.includes("")?"text-red-500":rn?"text-yellow-500":"text-gray-400"}`,children:rn||" "}),jsxRuntimeExports.jsxs("p",{className:`text-xs ${hn?"text-red-500":"text-gray-400"}`,children:[pn.toLocaleString()," / 100,000"]})]})]}),jsxRuntimeExports.jsx(CoverUpload,{cover:zt,setCover:Ut}),jsxRuntimeExports.jsx(LogoUploader,{logoPreview:Rt,setLogo:Tt,setLogoPreview:jt}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:dt,setBgTheme:ft}),jsxRuntimeExports.jsx(ThemeSelector,{theme:ct,setTheme:ut}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Add a Closing Message or Call-to-Action"}),(nn==null?void 0:nn.cta)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("select",{onChange:fn=>{const xn=fn.target.value;xn==="saved"?Ht(nn.cta):xn==="custom"&&Ht("")},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Choose CTA"}),jsxRuntimeExports.jsx("option",{value:"saved",children:"Use My Saved CTA"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Write New CTA"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic ml-2",children:Bt===nn.cta?"Using saved CTA":""})]}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter...`,value:Bt,onChange:fn=>Ht(fn.target.value),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This message will appear at the end of your lead magnet."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Link or Call-to-Action"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:Ft,onChange:fn=>$t(fn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This link will appear at the bottom of your PDF as a button."})]}),!Zt&&jsxRuntimeExports.jsx("button",{disabled:!it.trim()||it==="<p><br></p>"||hn,type:"submit",className:`w-full px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${!it.trim()||it==="<p><br></p>"||hn?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-green font-semibold text-black hover:opacity-90"}`,children:" Submit Prompt"})]})}function SmartPromptBuilder({onPromptReady:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),{user:Rt,accessToken:jt}=useAuth(),Ft=async()=>{if(!g||!ot||!ut){y$4.error("Please fill out all required fields.");return}if(!(Rt!=null&&Rt.id)){y$4.error("You must be logged in to generate prompts.");return}Tt(!0);try{const $t=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt-builder",{userId:Rt.id,audience:g,pain:ot,promise:ut,offer:ft},{headers:{Authorization:`Bearer ${jt}`}});it($t.data.prompt)}catch($t){console.error($t),y$4.error("Failed to generate prompt. Try again.")}finally{Tt(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-xl border border-gray-700 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Smart Prompt Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Answer a few quick questions so we can craft a personalized lead magnet prompt for you."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Who is this for?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: entrepreneurs, creators, small business owners",value:g,onChange:$t=>et($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What problem are they facing?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: struggling to grow an email list or convert leads",value:ot,onChange:$t=>ct($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What transformation or result do they want?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: consistently attract qualified leads every week",value:ut,onChange:$t=>dt($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Whats your offer or next step? (optional)"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: join my course, book a free strategy call",value:ft,onChange:$t=>St($t.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6 space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:kt,className:"flex-1 px-6 py-2 bg-green text-black font-semibold rounded hover:bg-green-500 transition",children:kt?"Generating...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(""),disabled:kt,className:"flex-1 px-6 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition",children:"Skip"})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(it,g){var et=g(),ot=useState({inst:{value:et,getSnapshot:g}}),ct=ot[0].inst,ut=ot[1];return useLayoutEffect(function(){ct.value=et,ct.getSnapshot=g,checkIfSnapshotChanged(ct)&&ut({inst:ct})},[it,et,g]),useEffect$1(function(){return checkIfSnapshotChanged(ct)&&ut({inst:ct}),it(function(){checkIfSnapshotChanged(ct)&&ut({inst:ct})})},[it]),useDebugValue$1(et),et}function checkIfSnapshotChanged(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!objectIs$1(it,et)}catch{return!0}}function useSyncExternalStore$1(it,g){return g()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(it){this.content=it}OrderedMap.prototype={constructor:OrderedMap,find:function(it){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===it)return g;return-1},get:function(it){var g=this.find(it);return g==-1?void 0:this.content[g+1]},update:function(it,g,et){var ot=et&&et!=it?this.remove(et):this,ct=ot.find(it),ut=ot.content.slice();return ct==-1?ut.push(et||it,g):(ut[ct+1]=g,et&&(ut[ct]=et)),new OrderedMap(ut)},remove:function(it){var g=this.find(it);if(g==-1)return this;var et=this.content.slice();return et.splice(g,2),new OrderedMap(et)},addToStart:function(it,g){return new OrderedMap([it,g].concat(this.remove(it).content))},addToEnd:function(it,g){var et=this.remove(it).content.slice();return et.push(it,g),new OrderedMap(et)},addBefore:function(it,g,et){var ot=this.remove(g),ct=ot.content.slice(),ut=ot.find(it);return ct.splice(ut==-1?ct.length:ut,0,g,et),new OrderedMap(ct)},forEach:function(it){for(var g=0;g<this.content.length;g+=2)it(this.content[g],this.content[g+1])},prepend:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(it.content.concat(this.subtract(it).content)):this},append:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(this.subtract(it).content.concat(it.content)):this},subtract:function(it){var g=this;it=OrderedMap.from(it);for(var et=0;et<it.content.length;et+=2)g=g.remove(it.content[et]);return g},toObject:function(){var it={};return this.forEach(function(g,et){it[g]=et}),it},get size(){return this.content.length>>1}};OrderedMap.from=function(it){if(it instanceof OrderedMap)return it;var g=[];if(it)for(var et in it)g.push(et,it[et]);return new OrderedMap(g)};function findDiffStart(it,g,et){for(let ot=0;;ot++){if(ot==it.childCount||ot==g.childCount)return it.childCount==g.childCount?null:et;let ct=it.child(ot),ut=g.child(ot);if(ct==ut){et+=ct.nodeSize;continue}if(!ct.sameMarkup(ut))return et;if(ct.isText&&ct.text!=ut.text){for(let dt=0;ct.text[dt]==ut.text[dt];dt++)et++;return et}if(ct.content.size||ut.content.size){let dt=findDiffStart(ct.content,ut.content,et+1);if(dt!=null)return dt}et+=ct.nodeSize}}function findDiffEnd(it,g,et,ot){for(let ct=it.childCount,ut=g.childCount;;){if(ct==0||ut==0)return ct==ut?null:{a:et,b:ot};let dt=it.child(--ct),ft=g.child(--ut),St=dt.nodeSize;if(dt==ft){et-=St,ot-=St;continue}if(!dt.sameMarkup(ft))return{a:et,b:ot};if(dt.isText&&dt.text!=ft.text){let kt=0,Tt=Math.min(dt.text.length,ft.text.length);for(;kt<Tt&&dt.text[dt.text.length-kt-1]==ft.text[ft.text.length-kt-1];)kt++,et--,ot--;return{a:et,b:ot}}if(dt.content.size||ft.content.size){let kt=findDiffEnd(dt.content,ft.content,et-1,ot-1);if(kt)return kt}et-=St,ot-=St}}class Fragment{constructor(g,et){if(this.content=g,this.size=et||0,et==null)for(let ot=0;ot<g.length;ot++)this.size+=g[ot].nodeSize}nodesBetween(g,et,ot,ct=0,ut){for(let dt=0,ft=0;ft<et;dt++){let St=this.content[dt],kt=ft+St.nodeSize;if(kt>g&&ot(St,ct+ft,ut||null,dt)!==!1&&St.content.size){let Tt=ft+1;St.nodesBetween(Math.max(0,g-Tt),Math.min(St.content.size,et-Tt),ot,ct+Tt)}ft=kt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,et,ot,ct){let ut="",dt=!0;return this.nodesBetween(g,et,(ft,St)=>{let kt=ft.isText?ft.text.slice(Math.max(g,St)-St,et-St):ft.isLeaf?ct?typeof ct=="function"?ct(ft):ct:ft.type.spec.leafText?ft.type.spec.leafText(ft):"":"";ft.isBlock&&(ft.isLeaf&&kt||ft.isTextblock)&&ot&&(dt?dt=!1:ut+=ot),ut+=kt},0),ut}append(g){if(!g.size)return this;if(!this.size)return g;let et=this.lastChild,ot=g.firstChild,ct=this.content.slice(),ut=0;for(et.isText&&et.sameMarkup(ot)&&(ct[ct.length-1]=et.withText(et.text+ot.text),ut=1);ut<g.content.length;ut++)ct.push(g.content[ut]);return new Fragment(ct,this.size+g.size)}cut(g,et=this.size){if(g==0&&et==this.size)return this;let ot=[],ct=0;if(et>g)for(let ut=0,dt=0;dt<et;ut++){let ft=this.content[ut],St=dt+ft.nodeSize;St>g&&((dt<g||St>et)&&(ft.isText?ft=ft.cut(Math.max(0,g-dt),Math.min(ft.text.length,et-dt)):ft=ft.cut(Math.max(0,g-dt-1),Math.min(ft.content.size,et-dt-1))),ot.push(ft),ct+=ft.nodeSize),dt=St}return new Fragment(ot,ct)}cutByIndex(g,et){return g==et?Fragment.empty:g==0&&et==this.content.length?this:new Fragment(this.content.slice(g,et))}replaceChild(g,et){let ot=this.content[g];if(ot==et)return this;let ct=this.content.slice(),ut=this.size+et.nodeSize-ot.nodeSize;return ct[g]=et,new Fragment(ct,ut)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let et=0;et<this.content.length;et++)if(!this.content[et].eq(g.content[et]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let et=this.content[g];if(!et)throw new RangeError("Index "+g+" out of range for "+this);return et}maybeChild(g){return this.content[g]||null}forEach(g){for(let et=0,ot=0;et<this.content.length;et++){let ct=this.content[et];g(ct,ot,et),ot+=ct.nodeSize}}findDiffStart(g,et=0){return findDiffStart(this,g,et)}findDiffEnd(g,et=this.size,ot=g.size){return findDiffEnd(this,g,et,ot)}findIndex(g){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let et=0,ot=0;;et++){let ct=this.child(et),ut=ot+ct.nodeSize;if(ut>=g)return ut==g?retIndex(et+1,ut):retIndex(et,ot);ot=ut}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,et){if(!et)return Fragment.empty;if(!Array.isArray(et))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(et.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let et,ot=0;for(let ct=0;ct<g.length;ct++){let ut=g[ct];ot+=ut.nodeSize,ct&&ut.isText&&g[ct-1].sameMarkup(ut)?(et||(et=g.slice(0,ct)),et[et.length-1]=ut.withText(et[et.length-1].text+ut.text)):et&&et.push(ut)}return new Fragment(et||g,ot)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(it,g){return found.index=it,found.offset=g,found}function compareDeep(it,g){if(it===g)return!0;if(!(it&&typeof it=="object")||!(g&&typeof g=="object"))return!1;let et=Array.isArray(it);if(Array.isArray(g)!=et)return!1;if(et){if(it.length!=g.length)return!1;for(let ot=0;ot<it.length;ot++)if(!compareDeep(it[ot],g[ot]))return!1}else{for(let ot in it)if(!(ot in g)||!compareDeep(it[ot],g[ot]))return!1;for(let ot in g)if(!(ot in it))return!1}return!0}let Mark$1=class jA{constructor(g,et){this.type=g,this.attrs=et}addToSet(g){let et,ot=!1;for(let ct=0;ct<g.length;ct++){let ut=g[ct];if(this.eq(ut))return g;if(this.type.excludes(ut.type))et||(et=g.slice(0,ct));else{if(ut.type.excludes(this.type))return g;!ot&&ut.type.rank>this.type.rank&&(et||(et=g.slice(0,ct)),et.push(this),ot=!0),et&&et.push(ut)}}return et||(et=g.slice()),ot||et.push(this),et}removeFromSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return g.slice(0,et).concat(g.slice(et+1));return g}isInSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Mark.fromJSON");let ot=g.marks[et.type];if(!ot)throw new RangeError(`There is no mark type ${et.type} in this schema`);let ct=ot.create(et.attrs);return ot.checkAttrs(ct.attrs),ct}static sameSet(g,et){if(g==et)return!0;if(g.length!=et.length)return!1;for(let ot=0;ot<g.length;ot++)if(!g[ot].eq(et[ot]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return jA.none;if(g instanceof jA)return[g];let et=g.slice();return et.sort((ot,ct)=>ot.type.rank-ct.type.rank),et}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,et,ot){this.content=g,this.openStart=et,this.openEnd=ot}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,et){let ot=insertInto(this.content,g+this.openStart,et);return ot&&new Slice(ot,this.openStart,this.openEnd)}removeBetween(g,et){return new Slice(removeRange(this.content,g+this.openStart,et+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,et){if(!et)return Slice.empty;let ot=et.openStart||0,ct=et.openEnd||0;if(typeof ot!="number"||typeof ct!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,et.content),ot,ct)}static maxOpen(g,et=!0){let ot=0,ct=0;for(let ut=g.firstChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.firstChild)ot++;for(let ut=g.lastChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.lastChild)ct++;return new Slice(g,ot,ct)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(it,g,et){let{index:ot,offset:ct}=it.findIndex(g),ut=it.maybeChild(ot),{index:dt,offset:ft}=it.findIndex(et);if(ct==g||ut.isText){if(ft!=et&&!it.child(dt).isText)throw new RangeError("Removing non-flat range");return it.cut(0,g).append(it.cut(et))}if(ot!=dt)throw new RangeError("Removing non-flat range");return it.replaceChild(ot,ut.copy(removeRange(ut.content,g-ct-1,et-ct-1)))}function insertInto(it,g,et,ot){let{index:ct,offset:ut}=it.findIndex(g),dt=it.maybeChild(ct);if(ut==g||dt.isText)return ot&&!ot.canReplace(ct,ct,et)?null:it.cut(0,g).append(et).append(it.cut(g));let ft=insertInto(dt.content,g-ut-1,et,dt);return ft&&it.replaceChild(ct,dt.copy(ft))}function replace(it,g,et){if(et.openStart>it.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(it.depth-et.openStart!=g.depth-et.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(it,g,et,0)}function replaceOuter(it,g,et,ot){let ct=it.index(ot),ut=it.node(ot);if(ct==g.index(ot)&&ot<it.depth-et.openStart){let dt=replaceOuter(it,g,et,ot+1);return ut.copy(ut.content.replaceChild(ct,dt))}else if(et.content.size)if(!et.openStart&&!et.openEnd&&it.depth==ot&&g.depth==ot){let dt=it.parent,ft=dt.content;return close(dt,ft.cut(0,it.parentOffset).append(et.content).append(ft.cut(g.parentOffset)))}else{let{start:dt,end:ft}=prepareSliceForReplace(et,it);return close(ut,replaceThreeWay(it,dt,ft,g,ot))}else return close(ut,replaceTwoWay(it,g,ot))}function checkJoin(it,g){if(!g.type.compatibleContent(it.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+it.type.name)}function joinable$1(it,g,et){let ot=it.node(et);return checkJoin(ot,g.node(et)),ot}function addNode(it,g){let et=g.length-1;et>=0&&it.isText&&it.sameMarkup(g[et])?g[et]=it.withText(g[et].text+it.text):g.push(it)}function addRange(it,g,et,ot){let ct=(g||it).node(et),ut=0,dt=g?g.index(et):ct.childCount;it&&(ut=it.index(et),it.depth>et?ut++:it.textOffset&&(addNode(it.nodeAfter,ot),ut++));for(let ft=ut;ft<dt;ft++)addNode(ct.child(ft),ot);g&&g.depth==et&&g.textOffset&&addNode(g.nodeBefore,ot)}function close(it,g){return it.type.checkContent(g),it.copy(g)}function replaceThreeWay(it,g,et,ot,ct){let ut=it.depth>ct&&joinable$1(it,g,ct+1),dt=ot.depth>ct&&joinable$1(et,ot,ct+1),ft=[];return addRange(null,it,ct,ft),ut&&dt&&g.index(ct)==et.index(ct)?(checkJoin(ut,dt),addNode(close(ut,replaceThreeWay(it,g,et,ot,ct+1)),ft)):(ut&&addNode(close(ut,replaceTwoWay(it,g,ct+1)),ft),addRange(g,et,ct,ft),dt&&addNode(close(dt,replaceTwoWay(et,ot,ct+1)),ft)),addRange(ot,null,ct,ft),new Fragment(ft)}function replaceTwoWay(it,g,et){let ot=[];if(addRange(null,it,et,ot),it.depth>et){let ct=joinable$1(it,g,et+1);addNode(close(ct,replaceTwoWay(it,g,et+1)),ot)}return addRange(g,null,et,ot),new Fragment(ot)}function prepareSliceForReplace(it,g){let et=g.depth-it.openStart,ct=g.node(et).copy(it.content);for(let ut=et-1;ut>=0;ut--)ct=g.node(ut).copy(Fragment.from(ct));return{start:ct.resolveNoCache(it.openStart+et),end:ct.resolveNoCache(ct.content.size-it.openEnd-et)}}class ResolvedPos{constructor(g,et,ot){this.pos=g,this.path=et,this.parentOffset=ot,this.depth=et.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,et=this.index(this.depth);if(et==g.childCount)return null;let ot=this.pos-this.path[this.path.length-1],ct=g.child(et);return ot?g.child(et).cut(ot):ct}get nodeBefore(){let g=this.index(this.depth),et=this.pos-this.path[this.path.length-1];return et?this.parent.child(g).cut(0,et):g==0?null:this.parent.child(g-1)}posAtIndex(g,et){et=this.resolveDepth(et);let ot=this.path[et*3],ct=et==0?0:this.path[et*3-1]+1;for(let ut=0;ut<g;ut++)ct+=ot.child(ut).nodeSize;return ct}marks(){let g=this.parent,et=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(et).marks;let ot=g.maybeChild(et-1),ct=g.maybeChild(et);if(!ot){let ft=ot;ot=ct,ct=ft}let ut=ot.marks;for(var dt=0;dt<ut.length;dt++)ut[dt].type.spec.inclusive===!1&&(!ct||!ut[dt].isInSet(ct.marks))&&(ut=ut[dt--].removeFromSet(ut));return ut}marksAcross(g){let et=this.parent.maybeChild(this.index());if(!et||!et.isInline)return null;let ot=et.marks,ct=g.parent.maybeChild(g.index());for(var ut=0;ut<ot.length;ut++)ot[ut].type.spec.inclusive===!1&&(!ct||!ot[ut].isInSet(ct.marks))&&(ot=ot[ut--].removeFromSet(ot));return ot}sharedDepth(g){for(let et=this.depth;et>0;et--)if(this.start(et)<=g&&this.end(et)>=g)return et;return 0}blockRange(g=this,et){if(g.pos<this.pos)return g.blockRange(this);for(let ot=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);ot>=0;ot--)if(g.pos<=this.end(ot)&&(!et||et(this.node(ot))))return new NodeRange(this,g,ot);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let et=1;et<=this.depth;et++)g+=(g?"/":"")+this.node(et).type.name+"_"+this.index(et-1);return g+":"+this.parentOffset}static resolve(g,et){if(!(et>=0&&et<=g.content.size))throw new RangeError("Position "+et+" out of range");let ot=[],ct=0,ut=et;for(let dt=g;;){let{index:ft,offset:St}=dt.content.findIndex(ut),kt=ut-St;if(ot.push(dt,ft,ct+St),!kt||(dt=dt.child(ft),dt.isText))break;ut=kt-1,ct+=St+1}return new ResolvedPos(et,ot,ut)}static resolveCached(g,et){let ot=resolveCache.get(g);if(ot)for(let ut=0;ut<ot.elts.length;ut++){let dt=ot.elts[ut];if(dt.pos==et)return dt}else resolveCache.set(g,ot=new ResolveCache);let ct=ot.elts[ot.i]=ResolvedPos.resolve(g,et);return ot.i=(ot.i+1)%resolveCacheSize,ct}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,et,ot){this.$from=g,this.$to=et,this.depth=ot}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class FA{constructor(g,et,ot,ct=Mark$1.none){this.type=g,this.attrs=et,this.marks=ct,this.content=ot||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,et,ot,ct=0){this.content.nodesBetween(g,et,ot,ct,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,et,ot,ct){return this.content.textBetween(g,et,ot,ct)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,et,ot){return this.type==g&&compareDeep(this.attrs,et||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,ot||Mark$1.none)}copy(g=null){return g==this.content?this:new FA(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new FA(this.type,this.attrs,this.content,g)}cut(g,et=this.content.size){return g==0&&et==this.content.size?this:this.copy(this.content.cut(g,et))}slice(g,et=this.content.size,ot=!1){if(g==et)return Slice.empty;let ct=this.resolve(g),ut=this.resolve(et),dt=ot?0:ct.sharedDepth(et),ft=ct.start(dt),kt=ct.node(dt).content.cut(ct.pos-ft,ut.pos-ft);return new Slice(kt,ct.depth-dt,ut.depth-dt)}replace(g,et,ot){return replace(this.resolve(g),this.resolve(et),ot)}nodeAt(g){for(let et=this;;){let{index:ot,offset:ct}=et.content.findIndex(g);if(et=et.maybeChild(ot),!et)return null;if(ct==g||et.isText)return et;g-=ct+1}}childAfter(g){let{index:et,offset:ot}=this.content.findIndex(g);return{node:this.content.maybeChild(et),index:et,offset:ot}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:et,offset:ot}=this.content.findIndex(g);if(ot<g)return{node:this.content.child(et),index:et,offset:ot};let ct=this.content.child(et-1);return{node:ct,index:et-1,offset:ot-ct.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,et,ot){let ct=!1;return et>g&&this.nodesBetween(g,et,ut=>(ot.isInSet(ut.marks)&&(ct=!0),!ct)),ct}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let et=this.type.contentMatch.matchFragment(this.content,0,g);if(!et)throw new Error("Called contentMatchAt on a node with invalid content");return et}canReplace(g,et,ot=Fragment.empty,ct=0,ut=ot.childCount){let dt=this.contentMatchAt(g).matchFragment(ot,ct,ut),ft=dt&&dt.matchFragment(this.content,et);if(!ft||!ft.validEnd)return!1;for(let St=ct;St<ut;St++)if(!this.type.allowsMarks(ot.child(St).marks))return!1;return!0}canReplaceWith(g,et,ot,ct){if(ct&&!this.type.allowsMarks(ct))return!1;let ut=this.contentMatchAt(g).matchType(ot),dt=ut&&ut.matchFragment(this.content,et);return dt?dt.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let et=0;et<this.marks.length;et++){let ot=this.marks[et];ot.type.checkAttrs(ot.attrs),g=ot.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(et=>et.type.name)}`);this.content.forEach(et=>et.check())}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(et=>et.toJSON())),g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Node.fromJSON");let ot;if(et.marks){if(!Array.isArray(et.marks))throw new RangeError("Invalid mark data for Node.fromJSON");ot=et.marks.map(g.markFromJSON)}if(et.type=="text"){if(typeof et.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(et.text,ot)}let ct=Fragment.fromJSON(g,et.content),ut=g.nodeType(et.type).create(et.attrs,ct,ot);return ut.type.checkAttrs(ut.attrs),ut}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(g,et,ot,ct){if(super(g,et,null,ct),!ot)throw new RangeError("Empty text nodes are not allowed");this.text=ot}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,et){return this.text.slice(g,et)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,et=this.text.length){return g==0&&et==this.text.length?this:this.withText(this.text.slice(g,et))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(it,g){for(let et=it.length-1;et>=0;et--)g=it[et].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,et){let ot=new TokenStream(g,et);if(ot.next==null)return ContentMatch.empty;let ct=parseExpr(ot);ot.next&&ot.err("Unexpected trailing text");let ut=dfa(nfa(ct));return checkForDeadEnds(ut,ot),ut}matchType(g){for(let et=0;et<this.next.length;et++)if(this.next[et].type==g)return this.next[et].next;return null}matchFragment(g,et=0,ot=g.childCount){let ct=this;for(let ut=et;ct&&ut<ot;ut++)ct=ct.matchType(g.child(ut).type);return ct}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:et}=this.next[g];if(!(et.isText||et.hasRequiredAttrs()))return et}return null}compatible(g){for(let et=0;et<this.next.length;et++)for(let ot=0;ot<g.next.length;ot++)if(this.next[et].type==g.next[ot].type)return!0;return!1}fillBefore(g,et=!1,ot=0){let ct=[this];function ut(dt,ft){let St=dt.matchFragment(g,ot);if(St&&(!et||St.validEnd))return Fragment.from(ft.map(kt=>kt.createAndFill()));for(let kt=0;kt<dt.next.length;kt++){let{type:Tt,next:Rt}=dt.next[kt];if(!(Tt.isText||Tt.hasRequiredAttrs())&&ct.indexOf(Rt)==-1){ct.push(Rt);let jt=ut(Rt,ft.concat(Tt));if(jt)return jt}}return null}return ut(this,[])}findWrapping(g){for(let ot=0;ot<this.wrapCache.length;ot+=2)if(this.wrapCache[ot]==g)return this.wrapCache[ot+1];let et=this.computeWrapping(g);return this.wrapCache.push(g,et),et}computeWrapping(g){let et=Object.create(null),ot=[{match:this,type:null,via:null}];for(;ot.length;){let ct=ot.shift(),ut=ct.match;if(ut.matchType(g)){let dt=[];for(let ft=ct;ft.type;ft=ft.via)dt.push(ft.type);return dt.reverse()}for(let dt=0;dt<ut.next.length;dt++){let{type:ft,next:St}=ut.next[dt];!ft.isLeaf&&!ft.hasRequiredAttrs()&&!(ft.name in et)&&(!ct.type||St.validEnd)&&(ot.push({match:ft.contentMatch,type:ft,via:ct}),et[ft.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function et(ot){g.push(ot);for(let ct=0;ct<ot.next.length;ct++)g.indexOf(ot.next[ct].next)==-1&&et(ot.next[ct].next)}return et(this),g.map((ot,ct)=>{let ut=ct+(ot.validEnd?"*":" ")+" ";for(let dt=0;dt<ot.next.length;dt++)ut+=(dt?", ":"")+ot.next[dt].type.name+"->"+g.indexOf(ot.next[dt].next);return ut}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,et){this.string=g,this.nodeTypes=et,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(it){let g=[];do g.push(parseExprSeq(it));while(it.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(it){let g=[];do g.push(parseExprSubscript(it));while(it.next&&it.next!=")"&&it.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(it){let g=parseExprAtom(it);for(;;)if(it.eat("+"))g={type:"plus",expr:g};else if(it.eat("*"))g={type:"star",expr:g};else if(it.eat("?"))g={type:"opt",expr:g};else if(it.eat("{"))g=parseExprRange(it,g);else break;return g}function parseNum(it){/\D/.test(it.next)&&it.err("Expected number, got '"+it.next+"'");let g=Number(it.next);return it.pos++,g}function parseExprRange(it,g){let et=parseNum(it),ot=et;return it.eat(",")&&(it.next!="}"?ot=parseNum(it):ot=-1),it.eat("}")||it.err("Unclosed braced range"),{type:"range",min:et,max:ot,expr:g}}function resolveName(it,g){let et=it.nodeTypes,ot=et[g];if(ot)return[ot];let ct=[];for(let ut in et){let dt=et[ut];dt.isInGroup(g)&&ct.push(dt)}return ct.length==0&&it.err("No node type or group '"+g+"' found"),ct}function parseExprAtom(it){if(it.eat("(")){let g=parseExpr(it);return it.eat(")")||it.err("Missing closing paren"),g}else if(/\W/.test(it.next))it.err("Unexpected token '"+it.next+"'");else{let g=resolveName(it,it.next).map(et=>(it.inline==null?it.inline=et.isInline:it.inline!=et.isInline&&it.err("Mixing inline and block content"),{type:"name",value:et}));return it.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(it){let g=[[]];return ct(ut(it,0),et()),g;function et(){return g.push([])-1}function ot(dt,ft,St){let kt={term:St,to:ft};return g[dt].push(kt),kt}function ct(dt,ft){dt.forEach(St=>St.to=ft)}function ut(dt,ft){if(dt.type=="choice")return dt.exprs.reduce((St,kt)=>St.concat(ut(kt,ft)),[]);if(dt.type=="seq")for(let St=0;;St++){let kt=ut(dt.exprs[St],ft);if(St==dt.exprs.length-1)return kt;ct(kt,ft=et())}else if(dt.type=="star"){let St=et();return ot(ft,St),ct(ut(dt.expr,St),St),[ot(St)]}else if(dt.type=="plus"){let St=et();return ct(ut(dt.expr,ft),St),ct(ut(dt.expr,St),St),[ot(St)]}else{if(dt.type=="opt")return[ot(ft)].concat(ut(dt.expr,ft));if(dt.type=="range"){let St=ft;for(let kt=0;kt<dt.min;kt++){let Tt=et();ct(ut(dt.expr,St),Tt),St=Tt}if(dt.max==-1)ct(ut(dt.expr,St),St);else for(let kt=dt.min;kt<dt.max;kt++){let Tt=et();ot(St,Tt),ct(ut(dt.expr,St),Tt),St=Tt}return[ot(St)]}else{if(dt.type=="name")return[ot(ft,void 0,dt.value)];throw new Error("Unknown expr type")}}}}function cmp(it,g){return g-it}function nullFrom(it,g){let et=[];return ot(g),et.sort(cmp);function ot(ct){let ut=it[ct];if(ut.length==1&&!ut[0].term)return ot(ut[0].to);et.push(ct);for(let dt=0;dt<ut.length;dt++){let{term:ft,to:St}=ut[dt];!ft&&et.indexOf(St)==-1&&ot(St)}}}function dfa(it){let g=Object.create(null);return et(nullFrom(it,0));function et(ot){let ct=[];ot.forEach(dt=>{it[dt].forEach(({term:ft,to:St})=>{if(!ft)return;let kt;for(let Tt=0;Tt<ct.length;Tt++)ct[Tt][0]==ft&&(kt=ct[Tt][1]);nullFrom(it,St).forEach(Tt=>{kt||ct.push([ft,kt=[]]),kt.indexOf(Tt)==-1&&kt.push(Tt)})})});let ut=g[ot.join(",")]=new ContentMatch(ot.indexOf(it.length-1)>-1);for(let dt=0;dt<ct.length;dt++){let ft=ct[dt][1].sort(cmp);ut.next.push({type:ct[dt][0],next:g[ft.join(",")]||et(ft)})}return ut}}function checkForDeadEnds(it,g){for(let et=0,ot=[it];et<ot.length;et++){let ct=ot[et],ut=!ct.validEnd,dt=[];for(let ft=0;ft<ct.next.length;ft++){let{type:St,next:kt}=ct.next[ft];dt.push(St.name),ut&&!(St.isText||St.hasRequiredAttrs())&&(ut=!1),ot.indexOf(kt)==-1&&ot.push(kt)}ut&&g.err("Only non-generatable nodes ("+dt.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(it){let g=Object.create(null);for(let et in it){let ot=it[et];if(!ot.hasDefault)return null;g[et]=ot.default}return g}function computeAttrs(it,g){let et=Object.create(null);for(let ot in it){let ct=g&&g[ot];if(ct===void 0){let ut=it[ot];if(ut.hasDefault)ct=ut.default;else throw new RangeError("No value supplied for attribute "+ot)}et[ot]=ct}return et}function checkAttrs(it,g,et,ot){for(let ct in g)if(!(ct in it))throw new RangeError(`Unsupported attribute ${ct} for ${et} of type ${ct}`);for(let ct in it){let ut=it[ct];ut.validate&&ut.validate(g[ct])}}function initAttrs(it,g){let et=Object.create(null);if(g)for(let ot in g)et[ot]=new Attribute(it,ot,g[ot]);return et}let NodeType$1=class FP{constructor(g,et,ot){this.name=g,this.schema=et,this.spec=ot,this.markSet=null,this.groups=ot.group?ot.group.split(" "):[],this.attrs=initAttrs(g,ot.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(ot.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,et,ot){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(g),Fragment.from(et),Mark$1.setFrom(ot))}createChecked(g=null,et,ot){return et=Fragment.from(et),this.checkContent(et),new Node$2(this,this.computeAttrs(g),et,Mark$1.setFrom(ot))}createAndFill(g=null,et,ot){if(g=this.computeAttrs(g),et=Fragment.from(et),et.size){let dt=this.contentMatch.fillBefore(et);if(!dt)return null;et=dt.append(et)}let ct=this.contentMatch.matchFragment(et),ut=ct&&ct.fillBefore(Fragment.empty,!0);return ut?new Node$2(this,g,et.append(ut),Mark$1.setFrom(ot)):null}validContent(g){let et=this.contentMatch.matchFragment(g);if(!et||!et.validEnd)return!1;for(let ot=0;ot<g.childCount;ot++)if(!this.allowsMarks(g.child(ot).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let et=0;et<g.length;et++)if(!this.allowsMarkType(g[et].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let et;for(let ot=0;ot<g.length;ot++)this.allowsMarkType(g[ot].type)?et&&et.push(g[ot]):et||(et=g.slice(0,ot));return et?et.length?et:Mark$1.none:g}static compile(g,et){let ot=Object.create(null);g.forEach((ut,dt)=>ot[ut]=new FP(ut,et,dt));let ct=et.spec.topNode||"doc";if(!ot[ct])throw new RangeError("Schema is missing its top node type ('"+ct+"')");if(!ot.text)throw new RangeError("Every schema needs a 'text' type");for(let ut in ot.text.attrs)throw new RangeError("The text node type should not have attributes");return ot}};function validateType(it,g,et){let ot=et.split("|");return ct=>{let ut=ct===null?"null":typeof ct;if(ot.indexOf(ut)<0)throw new RangeError(`Expected value of type ${ot} for attribute ${g} on type ${it}, got ${ut}`)}}class Attribute{constructor(g,et,ot){this.hasDefault=Object.prototype.hasOwnProperty.call(ot,"default"),this.default=ot.default,this.validate=typeof ot.validate=="string"?validateType(g,et,ot.validate):ot.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,et,ot,ct){this.name=g,this.rank=et,this.schema=ot,this.spec=ct,this.attrs=initAttrs(g,ct.attrs),this.excluded=null;let ut=defaultAttrs(this.attrs);this.instance=ut?new Mark$1(this,ut):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,et){let ot=Object.create(null),ct=0;return g.forEach((ut,dt)=>ot[ut]=new MarkType(ut,ct++,et,dt)),ot}removeFromSet(g){for(var et=0;et<g.length;et++)g[et].type==this&&(g=g.slice(0,et).concat(g.slice(et+1)),et--);return g}isInSet(g){for(let et=0;et<g.length;et++)if(g[et].type==this)return g[et]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let et=this.spec={};for(let ct in g)et[ct]=g[ct];et.nodes=OrderedMap.from(g.nodes),et.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let ot=Object.create(null);for(let ct in this.nodes){if(ct in this.marks)throw new RangeError(ct+" can not be both a node and a mark");let ut=this.nodes[ct],dt=ut.spec.content||"",ft=ut.spec.marks;if(ut.contentMatch=ot[dt]||(ot[dt]=ContentMatch.parse(dt,this.nodes)),ut.inlineContent=ut.contentMatch.inlineContent,ut.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!ut.isInline||!ut.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=ut}ut.markSet=ft=="_"?null:ft?gatherMarks(this,ft.split(" ")):ft==""||!ut.inlineContent?[]:null}for(let ct in this.marks){let ut=this.marks[ct],dt=ut.spec.excludes;ut.excluded=dt==null?[ut]:dt==""?[]:gatherMarks(this,dt.split(" "))}this.nodeFromJSON=ct=>Node$2.fromJSON(this,ct),this.markFromJSON=ct=>Mark$1.fromJSON(this,ct),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,et=null,ot,ct){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(et,ot,ct)}text(g,et){let ot=this.nodes.text;return new TextNode(ot,ot.defaultAttrs,g,Mark$1.setFrom(et))}mark(g,et){return typeof g=="string"&&(g=this.marks[g]),g.create(et)}nodeType(g){let et=this.nodes[g];if(!et)throw new RangeError("Unknown node type: "+g);return et}}function gatherMarks(it,g){let et=[];for(let ot=0;ot<g.length;ot++){let ct=g[ot],ut=it.marks[ct],dt=ut;if(ut)et.push(ut);else for(let ft in it.marks){let St=it.marks[ft];(ct=="_"||St.spec.group&&St.spec.group.split(" ").indexOf(ct)>-1)&&et.push(dt=St)}if(!dt)throw new SyntaxError("Unknown mark type: '"+g[ot]+"'")}return et}function isTagRule(it){return it.tag!=null}function isStyleRule(it){return it.style!=null}class DOMParser{constructor(g,et){this.schema=g,this.rules=et,this.tags=[],this.styles=[];let ot=this.matchedStyles=[];et.forEach(ct=>{if(isTagRule(ct))this.tags.push(ct);else if(isStyleRule(ct)){let ut=/[^=]*/.exec(ct.style)[0];ot.indexOf(ut)<0&&ot.push(ut),this.styles.push(ct)}}),this.normalizeLists=!this.tags.some(ct=>{if(!/^(ul|ol)\b/.test(ct.tag)||!ct.node)return!1;let ut=g.nodes[ct.node];return ut.contentMatch.matchType(ut)})}parse(g,et={}){let ot=new ParseContext(this,et,!1);return ot.addAll(g,Mark$1.none,et.from,et.to),ot.finish()}parseSlice(g,et={}){let ot=new ParseContext(this,et,!0);return ot.addAll(g,Mark$1.none,et.from,et.to),Slice.maxOpen(ot.finish())}matchTag(g,et,ot){for(let ct=ot?this.tags.indexOf(ot)+1:0;ct<this.tags.length;ct++){let ut=this.tags[ct];if(matches(g,ut.tag)&&(ut.namespace===void 0||g.namespaceURI==ut.namespace)&&(!ut.context||et.matchesContext(ut.context))){if(ut.getAttrs){let dt=ut.getAttrs(g);if(dt===!1)continue;ut.attrs=dt||void 0}return ut}}}matchStyle(g,et,ot,ct){for(let ut=ct?this.styles.indexOf(ct)+1:0;ut<this.styles.length;ut++){let dt=this.styles[ut],ft=dt.style;if(!(ft.indexOf(g)!=0||dt.context&&!ot.matchesContext(dt.context)||ft.length>g.length&&(ft.charCodeAt(g.length)!=61||ft.slice(g.length+1)!=et))){if(dt.getAttrs){let St=dt.getAttrs(et);if(St===!1)continue;dt.attrs=St||void 0}return dt}}}static schemaRules(g){let et=[];function ot(ct){let ut=ct.priority==null?50:ct.priority,dt=0;for(;dt<et.length;dt++){let ft=et[dt];if((ft.priority==null?50:ft.priority)<ut)break}et.splice(dt,0,ct)}for(let ct in g.marks){let ut=g.marks[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.mark||dt.ignore||dt.clearMark||(dt.mark=ct)})}for(let ct in g.nodes){let ut=g.nodes[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.node||dt.ignore||dt.mark||(dt.node=ct)})}return et}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(it,g,et){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):it&&it.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:et&~OPT_OPEN_LEFT}class NodeContext{constructor(g,et,ot,ct,ut,dt){this.type=g,this.attrs=et,this.marks=ot,this.solid=ct,this.options=dt,this.content=[],this.activeMarks=Mark$1.none,this.match=ut||(dt&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let et=this.type.contentMatch.fillBefore(Fragment.from(g));if(et)this.match=this.type.contentMatch.matchFragment(et);else{let ot=this.type.contentMatch,ct;return(ct=ot.findWrapping(g.type))?(this.match=ot,ct):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let ot=this.content[this.content.length-1],ct;if(ot&&ot.isText&&(ct=/[ \t\r\n\u000c]+$/.exec(ot.text))){let ut=ot;ot.text.length==ct[0].length?this.content.pop():this.content[this.content.length-1]=ut.withText(ut.text.slice(0,ut.text.length-ct[0].length))}}let et=Fragment.from(this.content);return!g&&this.match&&(et=et.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,et,this.marks):et}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,et,ot){this.parser=g,this.options=et,this.isOpen=ot,this.open=0,this.localPreserveWS=!1;let ct=et.topNode,ut,dt=wsOptionsFor(null,et.preserveWhitespace,0)|(ot?OPT_OPEN_LEFT:0);ct?ut=new NodeContext(ct.type,ct.attrs,Mark$1.none,!0,et.topMatch||ct.type.contentMatch,dt):ot?ut=new NodeContext(null,null,Mark$1.none,!0,null,dt):ut=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,dt),this.nodes=[ut],this.find=et.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,et){g.nodeType==3?this.addTextNode(g,et):g.nodeType==1&&this.addElement(g,et)}addTextNode(g,et){let ot=g.nodeValue,ct=this.top,ut=ct.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ct.options&OPT_PRESERVE_WS)>0;if(ut==="full"||ct.inlineContext(g)||/[^ \t\r\n\u000c]/.test(ot)){if(ut)ut!=="full"?ot=ot.replace(/\r?\n|\r/g," "):ot=ot.replace(/\r\n?/g,`
`);else if(ot=ot.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(ot)&&this.open==this.nodes.length-1){let dt=ct.content[ct.content.length-1],ft=g.previousSibling;(!dt||ft&&ft.nodeName=="BR"||dt.isText&&/[ \t\r\n\u000c]$/.test(dt.text))&&(ot=ot.slice(1))}ot&&this.insertNode(this.parser.schema.text(ot),et,!/\S/.test(ot)),this.findInText(g)}else this.findInside(g)}addElement(g,et,ot){let ct=this.localPreserveWS,ut=this.top;(g.tagName=="PRE"||/pre/.test(g.style&&g.style.whiteSpace))&&(this.localPreserveWS=!0);let dt=g.nodeName.toLowerCase(),ft;listTags.hasOwnProperty(dt)&&this.parser.normalizeLists&&normalizeList(g);let St=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(ft=this.parser.matchTag(g,this,ot));e:if(St?St.ignore:ignoreTags.hasOwnProperty(dt))this.findInside(g),this.ignoreFallback(g,et);else if(!St||St.skip||St.closeParent){St&&St.closeParent?this.open=Math.max(0,this.open-1):St&&St.skip.nodeType&&(g=St.skip);let kt,Tt=this.needsBlock;if(blockTags.hasOwnProperty(dt))ut.content.length&&ut.content[0].isInline&&this.open&&(this.open--,ut=this.top),kt=!0,ut.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,et);break e}let Rt=St&&St.skip?et:this.readStyles(g,et);Rt&&this.addAll(g,Rt),kt&&this.sync(ut),this.needsBlock=Tt}else{let kt=this.readStyles(g,et);kt&&this.addElementByRule(g,St,kt,St.consuming===!1?ft:void 0)}this.localPreserveWS=ct}leafFallback(g,et){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),et)}ignoreFallback(g,et){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),et,!0)}readStyles(g,et){let ot=g.style;if(ot&&ot.length)for(let ct=0;ct<this.parser.matchedStyles.length;ct++){let ut=this.parser.matchedStyles[ct],dt=ot.getPropertyValue(ut);if(dt)for(let ft=void 0;;){let St=this.parser.matchStyle(ut,dt,this,ft);if(!St)break;if(St.ignore)return null;if(St.clearMark?et=et.filter(kt=>!St.clearMark(kt)):et=et.concat(this.parser.schema.marks[St.mark].create(St.attrs)),St.consuming===!1)ft=St;else break}}return et}addElementByRule(g,et,ot,ct){let ut,dt;if(et.node)if(dt=this.parser.schema.nodes[et.node],dt.isLeaf)this.insertNode(dt.create(et.attrs),ot,g.nodeName=="BR")||this.leafFallback(g,ot);else{let St=this.enter(dt,et.attrs||null,ot,et.preserveWhitespace);St&&(ut=!0,ot=St)}else{let St=this.parser.schema.marks[et.mark];ot=ot.concat(St.create(et.attrs))}let ft=this.top;if(dt&&dt.isLeaf)this.findInside(g);else if(ct)this.addElement(g,ot,ct);else if(et.getContent)this.findInside(g),et.getContent(g,this.parser.schema).forEach(St=>this.insertNode(St,ot,!1));else{let St=g;typeof et.contentElement=="string"?St=g.querySelector(et.contentElement):typeof et.contentElement=="function"?St=et.contentElement(g):et.contentElement&&(St=et.contentElement),this.findAround(g,St,!0),this.addAll(St,ot),this.findAround(g,St,!1)}ut&&this.sync(ft)&&this.open--}addAll(g,et,ot,ct){let ut=ot||0;for(let dt=ot?g.childNodes[ot]:g.firstChild,ft=ct==null?null:g.childNodes[ct];dt!=ft;dt=dt.nextSibling,++ut)this.findAtPoint(g,ut),this.addDOM(dt,et);this.findAtPoint(g,ut)}findPlace(g,et,ot){let ct,ut;for(let dt=this.open,ft=0;dt>=0;dt--){let St=this.nodes[dt],kt=St.findWrapping(g);if(kt&&(!ct||ct.length>kt.length+ft)&&(ct=kt,ut=St,!kt.length))break;if(St.solid){if(ot)break;ft+=2}}if(!ct)return null;this.sync(ut);for(let dt=0;dt<ct.length;dt++)et=this.enterInner(ct[dt],null,et,!1);return et}insertNode(g,et,ot){if(g.isInline&&this.needsBlock&&!this.top.type){let ut=this.textblockFromContext();ut&&(et=this.enterInner(ut,null,et))}let ct=this.findPlace(g,et,ot);if(ct){this.closeExtra();let ut=this.top;ut.match&&(ut.match=ut.match.matchType(g.type));let dt=Mark$1.none;for(let ft of ct.concat(g.marks))(ut.type?ut.type.allowsMarkType(ft.type):markMayApply(ft.type,g.type))&&(dt=ft.addToSet(dt));return ut.content.push(g.mark(dt)),!0}return!1}enter(g,et,ot,ct){let ut=this.findPlace(g.create(et),ot,!1);return ut&&(ut=this.enterInner(g,et,ot,!0,ct)),ut}enterInner(g,et,ot,ct=!1,ut){this.closeExtra();let dt=this.top;dt.match=dt.match&&dt.match.matchType(g);let ft=wsOptionsFor(g,ut,dt.options);dt.options&OPT_OPEN_LEFT&&dt.content.length==0&&(ft|=OPT_OPEN_LEFT);let St=Mark$1.none;return ot=ot.filter(kt=>(dt.type?dt.type.allowsMarkType(kt.type):markMayApply(kt.type,g))?(St=kt.addToSet(St),!1):!0),this.nodes.push(new NodeContext(g,et,St,ct,null,ft)),this.open++,ot}closeExtra(g=!1){let et=this.nodes.length-1;if(et>this.open){for(;et>this.open;et--)this.nodes[et-1].content.push(this.nodes[et].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(g){for(let et=this.open;et>=0;et--){if(this.nodes[et]==g)return this.open=et,!0;this.localPreserveWS&&(this.nodes[et].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let g=0;for(let et=this.open;et>=0;et--){let ot=this.nodes[et].content;for(let ct=ot.length-1;ct>=0;ct--)g+=ot[ct].nodeSize;et&&g++}return g}findAtPoint(g,et){if(this.find)for(let ot=0;ot<this.find.length;ot++)this.find[ot].node==g&&this.find[ot].offset==et&&(this.find[ot].pos=this.currentPos)}findInside(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].pos==null&&g.nodeType==1&&g.contains(this.find[et].node)&&(this.find[et].pos=this.currentPos)}findAround(g,et,ot){if(g!=et&&this.find)for(let ct=0;ct<this.find.length;ct++)this.find[ct].pos==null&&g.nodeType==1&&g.contains(this.find[ct].node)&&et.compareDocumentPosition(this.find[ct].node)&(ot?2:4)&&(this.find[ct].pos=this.currentPos)}findInText(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].node==g&&(this.find[et].pos=this.currentPos-(g.nodeValue.length-this.find[et].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let et=g.split("/"),ot=this.options.context,ct=!this.isOpen&&(!ot||ot.parent.type==this.nodes[0].type),ut=-(ot?ot.depth+1:0)+(ct?0:1),dt=(ft,St)=>{for(;ft>=0;ft--){let kt=et[ft];if(kt==""){if(ft==et.length-1||ft==0)continue;for(;St>=ut;St--)if(dt(ft-1,St))return!0;return!1}else{let Tt=St>0||St==0&&ct?this.nodes[St].type:ot&&St>=ut?ot.node(St-ut).type:null;if(!Tt||Tt.name!=kt&&!Tt.isInGroup(kt))return!1;St--}}return!0};return dt(et.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let et=g.depth;et>=0;et--){let ot=g.node(et).contentMatchAt(g.indexAfter(et)).defaultType;if(ot&&ot.isTextblock&&ot.defaultAttrs)return ot}for(let et in this.parser.schema.nodes){let ot=this.parser.schema.nodes[et];if(ot.isTextblock&&ot.defaultAttrs)return ot}}}function normalizeList(it){for(let g=it.firstChild,et=null;g;g=g.nextSibling){let ot=g.nodeType==1?g.nodeName.toLowerCase():null;ot&&listTags.hasOwnProperty(ot)&&et?(et.appendChild(g),g=et):ot=="li"?et=g:ot&&(et=null)}}function matches(it,g){return(it.matches||it.msMatchesSelector||it.webkitMatchesSelector||it.mozMatchesSelector).call(it,g)}function copy(it){let g={};for(let et in it)g[et]=it[et];return g}function markMayApply(it,g){let et=g.schema.nodes;for(let ot in et){let ct=et[ot];if(!ct.allowsMarkType(it))continue;let ut=[],dt=ft=>{ut.push(ft);for(let St=0;St<ft.edgeCount;St++){let{type:kt,next:Tt}=ft.edge(St);if(kt==g||ut.indexOf(Tt)<0&&dt(Tt))return!0}};if(dt(ct.contentMatch))return!0}}class DOMSerializer{constructor(g,et){this.nodes=g,this.marks=et}serializeFragment(g,et={},ot){ot||(ot=doc$1(et).createDocumentFragment());let ct=ot,ut=[];return g.forEach(dt=>{if(ut.length||dt.marks.length){let ft=0,St=0;for(;ft<ut.length&&St<dt.marks.length;){let kt=dt.marks[St];if(!this.marks[kt.type.name]){St++;continue}if(!kt.eq(ut[ft][0])||kt.type.spec.spanning===!1)break;ft++,St++}for(;ft<ut.length;)ct=ut.pop()[1];for(;St<dt.marks.length;){let kt=dt.marks[St++],Tt=this.serializeMark(kt,dt.isInline,et);Tt&&(ut.push([kt,ct]),ct.appendChild(Tt.dom),ct=Tt.contentDOM||Tt.dom)}}ct.appendChild(this.serializeNodeInner(dt,et))}),ot}serializeNodeInner(g,et){let{dom:ot,contentDOM:ct}=renderSpec(doc$1(et),this.nodes[g.type.name](g),null,g.attrs);if(ct){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,et,ct)}return ot}serializeNode(g,et={}){let ot=this.serializeNodeInner(g,et);for(let ct=g.marks.length-1;ct>=0;ct--){let ut=this.serializeMark(g.marks[ct],g.isInline,et);ut&&((ut.contentDOM||ut.dom).appendChild(ot),ot=ut.dom)}return ot}serializeMark(g,et,ot={}){let ct=this.marks[g.type.name];return ct&&renderSpec(doc$1(ot),ct(g,et),null,g.attrs)}static renderSpec(g,et,ot=null,ct){return renderSpec(g,et,ot,ct)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let et=gatherToDOM(g.nodes);return et.text||(et.text=ot=>ot.text),et}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(it){let g={};for(let et in it){let ot=it[et].spec.toDOM;ot&&(g[et]=ot)}return g}function doc$1(it){return it.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(it){let g=suspiciousAttributeCache.get(it);return g===void 0&&suspiciousAttributeCache.set(it,g=suspiciousAttributesInner(it)),g}function suspiciousAttributesInner(it){let g=null;function et(ot){if(ot&&typeof ot=="object")if(Array.isArray(ot))if(typeof ot[0]=="string")g||(g=[]),g.push(ot);else for(let ct=0;ct<ot.length;ct++)et(ot[ct]);else for(let ct in ot)et(ot[ct])}return et(it),g}function renderSpec(it,g,et,ot){if(typeof g=="string")return{dom:it.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let ct=g[0],ut;if(typeof ct!="string")throw new RangeError("Invalid array passed to renderSpec");if(ot&&(ut=suspiciousAttributes(ot))&&ut.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let dt=ct.indexOf(" ");dt>0&&(et=ct.slice(0,dt),ct=ct.slice(dt+1));let ft,St=et?it.createElementNS(et,ct):it.createElement(ct),kt=g[1],Tt=1;if(kt&&typeof kt=="object"&&kt.nodeType==null&&!Array.isArray(kt)){Tt=2;for(let Rt in kt)if(kt[Rt]!=null){let jt=Rt.indexOf(" ");jt>0?St.setAttributeNS(Rt.slice(0,jt),Rt.slice(jt+1),kt[Rt]):Rt=="style"&&St.style?St.style.cssText=kt[Rt]:St.setAttribute(Rt,kt[Rt])}}for(let Rt=Tt;Rt<g.length;Rt++){let jt=g[Rt];if(jt===0){if(Rt<g.length-1||Rt>Tt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:St,contentDOM:St}}else{let{dom:Ft,contentDOM:$t}=renderSpec(it,jt,et,ot);if(St.appendChild(Ft),$t){if(ft)throw new RangeError("Multiple content holes");ft=$t}}}return{dom:St,contentDOM:ft}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(it,g){return it+g*factor16}function recoverIndex(it){return it&lower16}function recoverOffset(it){return(it-(it&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,et,ot){this.pos=g,this.delInfo=et,this.recover=ot}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,et=!1){if(this.ranges=g,this.inverted=et,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let et=0,ot=recoverIndex(g);if(!this.inverted)for(let ct=0;ct<ot;ct++)et+=this.ranges[ct*3+2]-this.ranges[ct*3+1];return this.ranges[ot*3]+et+recoverOffset(g)}mapResult(g,et=1){return this._map(g,et,!1)}map(g,et=1){return this._map(g,et,!0)}_map(g,et,ot){let ct=0,ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ct:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=this.ranges[ft+dt],Rt=St+kt;if(g<=Rt){let jt=kt?g==St?-1:g==Rt?1:et:et,Ft=St+ct+(jt<0?0:Tt);if(ot)return Ft;let $t=g==(et<0?St:Rt)?null:makeRecover(ft/3,g-St),zt=g==St?DEL_AFTER:g==Rt?DEL_BEFORE:DEL_ACROSS;return(et<0?g!=St:g!=Rt)&&(zt|=DEL_SIDE),new MapResult(Ft,zt,$t)}ct+=Tt-kt}return ot?g+ct:new MapResult(g+ct,0,null)}touches(g,et){let ot=0,ct=recoverIndex(et),ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ot:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=St+kt;if(g<=Tt&&ft==ct*3)return!0;ot+=this.ranges[ft+dt]-kt}return!1}forEach(g){let et=this.inverted?2:1,ot=this.inverted?1:2;for(let ct=0,ut=0;ct<this.ranges.length;ct+=3){let dt=this.ranges[ct],ft=dt-(this.inverted?ut:0),St=dt+(this.inverted?0:ut),kt=this.ranges[ct+et],Tt=this.ranges[ct+ot];g(ft,ft+kt,St,St+Tt),ut+=Tt-kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g,et,ot=0,ct=g?g.length:0){this.mirror=et,this.from=ot,this.to=ct,this._maps=g||[],this.ownData=!(g||et)}get maps(){return this._maps}slice(g=0,et=this.maps.length){return new Mapping(this._maps,this.mirror,g,et)}appendMap(g,et){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),et!=null&&this.setMirror(this._maps.length-1,et)}appendMapping(g){for(let et=0,ot=this._maps.length;et<g._maps.length;et++){let ct=g.getMirror(et);this.appendMap(g._maps[et],ct!=null&&ct<et?ot+ct:void 0)}}getMirror(g){if(this.mirror){for(let et=0;et<this.mirror.length;et++)if(this.mirror[et]==g)return this.mirror[et+(et%2?-1:1)]}}setMirror(g,et){this.mirror||(this.mirror=[]),this.mirror.push(g,et)}appendMappingInverted(g){for(let et=g.maps.length-1,ot=this._maps.length+g._maps.length;et>=0;et--){let ct=g.getMirror(et);this.appendMap(g._maps[et].invert(),ct!=null&&ct>et?ot-ct-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,et=1){if(this.mirror)return this._map(g,et,!0);for(let ot=this.from;ot<this.to;ot++)g=this._maps[ot].map(g,et);return g}mapResult(g,et=1){return this._map(g,et,!1)}_map(g,et,ot){let ct=0;for(let ut=this.from;ut<this.to;ut++){let dt=this._maps[ut],ft=dt.mapResult(g,et);if(ft.recover!=null){let St=this.getMirror(ut);if(St!=null&&St>ut&&St<this.to){ut=St,g=this._maps[St].recover(ft.recover);continue}}ct|=ft.delInfo,g=ft.pos}return ot?g:new MapResult(g,ct,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,et){if(!et||!et.stepType)throw new RangeError("Invalid input for Step.fromJSON");let ot=stepsByID[et.stepType];if(!ot)throw new RangeError(`No step type ${et.stepType} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=et,et.prototype.jsonID=g,et}}class StepResult{constructor(g,et){this.doc=g,this.failed=et}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,et,ot,ct){try{return StepResult.ok(g.replace(et,ot,ct))}catch(ut){if(ut instanceof ReplaceError)return StepResult.fail(ut.message);throw ut}}}function mapFragment(it,g,et){let ot=[];for(let ct=0;ct<it.childCount;ct++){let ut=it.child(ct);ut.content.size&&(ut=ut.copy(mapFragment(ut.content,g,ut))),ut.isInline&&(ut=g(ut,et,ct)),ot.push(ut)}return Fragment.fromArray(ot)}class AddMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=g.resolve(this.from),ct=ot.node(ot.sharedDepth(this.to)),ut=new Slice(mapFragment(et.content,(dt,ft)=>!dt.isAtom||!ft.type.allowsMarkType(this.mark.type)?dt:dt.mark(this.mark.addToSet(dt.marks)),ct),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ut)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new AddMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=new Slice(mapFragment(et.content,ct=>ct.mark(this.mark.removeFromSet(ct.marks)),g),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ot)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new RemoveMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.addToSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);if(et){let ot=this.mark.addToSet(et.marks);if(ot.length==et.marks.length){for(let ct=0;ct<et.marks.length;ct++)if(!et.marks[ct].isInSet(ot))return new AddNodeMarkStep(this.pos,et.marks[ct]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AddNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.removeFromSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);return!et||!this.mark.isInSet(et.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new RemoveNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,et,ot,ct=!1){super(),this.from=g,this.to=et,this.slice=ot,this.structure=ct}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deletedAcross&&ot.deletedAcross?null:new ReplaceStep(et.pos,Math.max(et.pos,ot.pos),this.slice,this.structure)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),et,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,et,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(et.from,et.to,Slice.fromJSON(g,et.slice),!!et.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,et,ot,ct,ut,dt,ft=!1){super(),this.from=g,this.to=et,this.gapFrom=ot,this.gapTo=ct,this.slice=ut,this.insert=dt,this.structure=ft}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let et=g.slice(this.gapFrom,this.gapTo);if(et.openStart||et.openEnd)return StepResult.fail("Gap is not a flat range");let ot=this.slice.insertAt(this.insert,et.content);return ot?StepResult.fromReplace(g,this.from,this.to,ot):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let et=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+et,this.from+this.insert,this.from+this.insert+et,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1),ct=this.from==this.gapFrom?et.pos:g.map(this.gapFrom,-1),ut=this.to==this.gapTo?ot.pos:g.map(this.gapTo,1);return et.deletedAcross&&ot.deletedAcross||ct<et.pos||ut>ot.pos?null:new ReplaceAroundStep(et.pos,ot.pos,ct,ut,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number"||typeof et.gapFrom!="number"||typeof et.gapTo!="number"||typeof et.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(et.from,et.to,et.gapFrom,et.gapTo,Slice.fromJSON(g,et.slice),et.insert,!!et.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(it,g,et){let ot=it.resolve(g),ct=et-g,ut=ot.depth;for(;ct>0&&ut>0&&ot.indexAfter(ut)==ot.node(ut).childCount;)ut--,ct--;if(ct>0){let dt=ot.node(ut).maybeChild(ot.indexAfter(ut));for(;ct>0;){if(!dt||dt.isLeaf)return!0;dt=dt.firstChild,ct--}}return!1}function addMark(it,g,et,ot){let ct=[],ut=[],dt,ft;it.doc.nodesBetween(g,et,(St,kt,Tt)=>{if(!St.isInline)return;let Rt=St.marks;if(!ot.isInSet(Rt)&&Tt.type.allowsMarkType(ot.type)){let jt=Math.max(kt,g),Ft=Math.min(kt+St.nodeSize,et),$t=ot.addToSet(Rt);for(let zt=0;zt<Rt.length;zt++)Rt[zt].isInSet($t)||(dt&&dt.to==jt&&dt.mark.eq(Rt[zt])?dt.to=Ft:ct.push(dt=new RemoveMarkStep(jt,Ft,Rt[zt])));ft&&ft.to==jt?ft.to=Ft:ut.push(ft=new AddMarkStep(jt,Ft,ot))}}),ct.forEach(St=>it.step(St)),ut.forEach(St=>it.step(St))}function removeMark(it,g,et,ot){let ct=[],ut=0;it.doc.nodesBetween(g,et,(dt,ft)=>{if(!dt.isInline)return;ut++;let St=null;if(ot instanceof MarkType){let kt=dt.marks,Tt;for(;Tt=ot.isInSet(kt);)(St||(St=[])).push(Tt),kt=Tt.removeFromSet(kt)}else ot?ot.isInSet(dt.marks)&&(St=[ot]):St=dt.marks;if(St&&St.length){let kt=Math.min(ft+dt.nodeSize,et);for(let Tt=0;Tt<St.length;Tt++){let Rt=St[Tt],jt;for(let Ft=0;Ft<ct.length;Ft++){let $t=ct[Ft];$t.step==ut-1&&Rt.eq(ct[Ft].style)&&(jt=$t)}jt?(jt.to=kt,jt.step=ut):ct.push({style:Rt,from:Math.max(ft,g),to:kt,step:ut})}}}),ct.forEach(dt=>it.step(new RemoveMarkStep(dt.from,dt.to,dt.style)))}function clearIncompatible(it,g,et,ot=et.contentMatch,ct=!0){let ut=it.doc.nodeAt(g),dt=[],ft=g+1;for(let St=0;St<ut.childCount;St++){let kt=ut.child(St),Tt=ft+kt.nodeSize,Rt=ot.matchType(kt.type);if(!Rt)dt.push(new ReplaceStep(ft,Tt,Slice.empty));else{ot=Rt;for(let jt=0;jt<kt.marks.length;jt++)et.allowsMarkType(kt.marks[jt].type)||it.step(new RemoveMarkStep(ft,Tt,kt.marks[jt]));if(ct&&kt.isText&&et.whitespace!="pre"){let jt,Ft=/\r?\n|\r/g,$t;for(;jt=Ft.exec(kt.text);)$t||($t=new Slice(Fragment.from(et.schema.text(" ",et.allowedMarks(kt.marks))),0,0)),dt.push(new ReplaceStep(ft+jt.index,ft+jt.index+jt[0].length,$t))}}ft=Tt}if(!ot.validEnd){let St=ot.fillBefore(Fragment.empty,!0);it.replace(ft,ft,new Slice(St,0,0))}for(let St=dt.length-1;St>=0;St--)it.step(dt[St])}function canCut(it,g,et){return(g==0||it.canReplace(g,it.childCount))&&(et==it.childCount||it.canReplace(0,et))}function liftTarget(it){let et=it.parent.content.cutByIndex(it.startIndex,it.endIndex);for(let ot=it.depth;;--ot){let ct=it.$from.node(ot),ut=it.$from.index(ot),dt=it.$to.indexAfter(ot);if(ot<it.depth&&ct.canReplace(ut,dt,et))return ot;if(ot==0||ct.type.spec.isolating||!canCut(ct,ut,dt))break}return null}function lift$2(it,g,et){let{$from:ot,$to:ct,depth:ut}=g,dt=ot.before(ut+1),ft=ct.after(ut+1),St=dt,kt=ft,Tt=Fragment.empty,Rt=0;for(let $t=ut,zt=!1;$t>et;$t--)zt||ot.index($t)>0?(zt=!0,Tt=Fragment.from(ot.node($t).copy(Tt)),Rt++):St--;let jt=Fragment.empty,Ft=0;for(let $t=ut,zt=!1;$t>et;$t--)zt||ct.after($t+1)<ct.end($t)?(zt=!0,jt=Fragment.from(ct.node($t).copy(jt)),Ft++):kt++;it.step(new ReplaceAroundStep(St,kt,dt,ft,new Slice(Tt.append(jt),Rt,Ft),Tt.size-Rt,!0))}function findWrapping(it,g,et=null,ot=it){let ct=findWrappingOutside(it,g),ut=ct&&findWrappingInside(ot,g);return ut?ct.map(withAttrs).concat({type:g,attrs:et}).concat(ut.map(withAttrs)):null}function withAttrs(it){return{type:it,attrs:null}}function findWrappingOutside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.contentMatchAt(ot).findWrapping(g);if(!ut)return null;let dt=ut.length?ut[0]:g;return et.canReplaceWith(ot,ct,dt)?ut:null}function findWrappingInside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.child(ot),dt=g.contentMatch.findWrapping(ut.type);if(!dt)return null;let St=(dt.length?dt[dt.length-1]:g).contentMatch;for(let kt=ot;St&&kt<ct;kt++)St=St.matchType(et.child(kt).type);return!St||!St.validEnd?null:dt}function wrap(it,g,et){let ot=Fragment.empty;for(let dt=et.length-1;dt>=0;dt--){if(ot.size){let ft=et[dt].type.contentMatch.matchFragment(ot);if(!ft||!ft.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}ot=Fragment.from(et[dt].type.create(et[dt].attrs,ot))}let ct=g.start,ut=g.end;it.step(new ReplaceAroundStep(ct,ut,ct,ut,new Slice(ot,0,0),et.length,!0))}function setBlockType$1(it,g,et,ot,ct){if(!ot.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let ut=it.steps.length;it.doc.nodesBetween(g,et,(dt,ft)=>{let St=typeof ct=="function"?ct(dt):ct;if(dt.isTextblock&&!dt.hasMarkup(ot,St)&&canChangeType(it.doc,it.mapping.slice(ut).map(ft),ot)){let kt=null;if(ot.schema.linebreakReplacement){let Ft=ot.whitespace=="pre",$t=!!ot.contentMatch.matchType(ot.schema.linebreakReplacement);Ft&&!$t?kt=!1:!Ft&&$t&&(kt=!0)}kt===!1&&replaceLinebreaks(it,dt,ft,ut),clearIncompatible(it,it.mapping.slice(ut).map(ft,1),ot,void 0,kt===null);let Tt=it.mapping.slice(ut),Rt=Tt.map(ft,1),jt=Tt.map(ft+dt.nodeSize,1);return it.step(new ReplaceAroundStep(Rt,jt,Rt+1,jt-1,new Slice(Fragment.from(ot.create(St,null,dt.marks)),0,0),1,!0)),kt===!0&&replaceNewlines(it,dt,ft,ut),!1}})}function replaceNewlines(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.isText){let dt,ft=/\r?\n|\r/g;for(;dt=ft.exec(ct.text);){let St=it.mapping.slice(ot).map(et+1+ut+dt.index);it.replaceWith(St,St+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.type==ct.type.schema.linebreakReplacement){let dt=it.mapping.slice(ot).map(et+1+ut);it.replaceWith(dt,dt+1,g.type.schema.text(`
`))}})}function canChangeType(it,g,et){let ot=it.resolve(g),ct=ot.index();return ot.parent.canReplaceWith(ct,ct+1,et)}function setNodeMarkup(it,g,et,ot,ct){let ut=it.doc.nodeAt(g);if(!ut)throw new RangeError("No node at given position");et||(et=ut.type);let dt=et.create(ot,null,ct||ut.marks);if(ut.isLeaf)return it.replaceWith(g,g+ut.nodeSize,dt);if(!et.validContent(ut.content))throw new RangeError("Invalid content for node type "+et.name);it.step(new ReplaceAroundStep(g,g+ut.nodeSize,g+1,g+ut.nodeSize-1,new Slice(Fragment.from(dt),0,0),1,!0))}function canSplit(it,g,et=1,ot){let ct=it.resolve(g),ut=ct.depth-et,dt=ot&&ot[ot.length-1]||ct.parent;if(ut<0||ct.parent.type.spec.isolating||!ct.parent.canReplace(ct.index(),ct.parent.childCount)||!dt.type.validContent(ct.parent.content.cutByIndex(ct.index(),ct.parent.childCount)))return!1;for(let kt=ct.depth-1,Tt=et-2;kt>ut;kt--,Tt--){let Rt=ct.node(kt),jt=ct.index(kt);if(Rt.type.spec.isolating)return!1;let Ft=Rt.content.cutByIndex(jt,Rt.childCount),$t=ot&&ot[Tt+1];$t&&(Ft=Ft.replaceChild(0,$t.type.create($t.attrs)));let zt=ot&&ot[Tt]||Rt;if(!Rt.canReplace(jt+1,Rt.childCount)||!zt.type.validContent(Ft))return!1}let ft=ct.indexAfter(ut),St=ot&&ot[0];return ct.node(ut).canReplaceWith(ft,ft,St?St.type:ct.node(ut+1).type)}function split(it,g,et=1,ot){let ct=it.doc.resolve(g),ut=Fragment.empty,dt=Fragment.empty;for(let ft=ct.depth,St=ct.depth-et,kt=et-1;ft>St;ft--,kt--){ut=Fragment.from(ct.node(ft).copy(ut));let Tt=ot&&ot[kt];dt=Fragment.from(Tt?Tt.type.create(Tt.attrs,dt):ct.node(ft).copy(dt))}it.step(new ReplaceStep(g,g,new Slice(ut.append(dt),et,et),!0))}function canJoin(it,g){let et=it.resolve(g),ot=et.index();return joinable(et.nodeBefore,et.nodeAfter)&&et.parent.canReplace(ot,ot+1)}function canAppendWithSubstitutedLinebreaks(it,g){g.content.size||it.type.compatibleContent(g.type);let et=it.contentMatchAt(it.childCount),{linebreakReplacement:ot}=it.type.schema;for(let ct=0;ct<g.childCount;ct++){let ut=g.child(ct),dt=ut.type==ot?it.type.schema.nodes.text:ut.type;if(et=et.matchType(dt),!et||!it.type.allowsMarks(ut.marks))return!1}return et.validEnd}function joinable(it,g){return!!(it&&g&&!it.isLeaf&&canAppendWithSubstitutedLinebreaks(it,g))}function joinPoint(it,g,et=-1){let ot=it.resolve(g);for(let ct=ot.depth;;ct--){let ut,dt,ft=ot.index(ct);if(ct==ot.depth?(ut=ot.nodeBefore,dt=ot.nodeAfter):et>0?(ut=ot.node(ct+1),ft++,dt=ot.node(ct).maybeChild(ft)):(ut=ot.node(ct).maybeChild(ft-1),dt=ot.node(ct+1)),ut&&!ut.isTextblock&&joinable(ut,dt)&&ot.node(ct).canReplace(ft,ft+1))return g;if(ct==0)break;g=et<0?ot.before(ct):ot.after(ct)}}function join(it,g,et){let ot=null,{linebreakReplacement:ct}=it.doc.type.schema,ut=it.doc.resolve(g-et),dt=ut.node().type;if(ct&&dt.inlineContent){let Tt=dt.whitespace=="pre",Rt=!!dt.contentMatch.matchType(ct);Tt&&!Rt?ot=!1:!Tt&&Rt&&(ot=!0)}let ft=it.steps.length;if(ot===!1){let Tt=it.doc.resolve(g+et);replaceLinebreaks(it,Tt.node(),Tt.before(),ft)}dt.inlineContent&&clearIncompatible(it,g+et-1,dt,ut.node().contentMatchAt(ut.index()),ot==null);let St=it.mapping.slice(ft),kt=St.map(g-et);if(it.step(new ReplaceStep(kt,St.map(g+et,-1),Slice.empty,!0)),ot===!0){let Tt=it.doc.resolve(kt);replaceNewlines(it,Tt.node(),Tt.before(),it.steps.length)}return it}function insertPoint(it,g,et){let ot=it.resolve(g);if(ot.parent.canReplaceWith(ot.index(),ot.index(),et))return g;if(ot.parentOffset==0)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.index(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.before(ct+1);if(ut>0)return null}if(ot.parentOffset==ot.parent.content.size)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.indexAfter(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.after(ct+1);if(ut<ot.node(ct).childCount)return null}return null}function dropPoint(it,g,et){let ot=it.resolve(g);if(!et.content.size)return g;let ct=et.content;for(let ut=0;ut<et.openStart;ut++)ct=ct.firstChild.content;for(let ut=1;ut<=(et.openStart==0&&et.size?2:1);ut++)for(let dt=ot.depth;dt>=0;dt--){let ft=dt==ot.depth?0:ot.pos<=(ot.start(dt+1)+ot.end(dt+1))/2?-1:1,St=ot.index(dt)+(ft>0?1:0),kt=ot.node(dt),Tt=!1;if(ut==1)Tt=kt.canReplace(St,St,ct);else{let Rt=kt.contentMatchAt(St).findWrapping(ct.firstChild.type);Tt=Rt&&kt.canReplaceWith(St,St,Rt[0])}if(Tt)return ft==0?ot.pos:ft<0?ot.before(dt+1):ot.after(dt+1)}return null}function replaceStep(it,g,et=g,ot=Slice.empty){if(g==et&&!ot.size)return null;let ct=it.resolve(g),ut=it.resolve(et);return fitsTrivially(ct,ut,ot)?new ReplaceStep(g,et,ot):new Fitter(ct,ut,ot).fit()}function fitsTrivially(it,g,et){return!et.openStart&&!et.openEnd&&it.start()==g.start()&&it.parent.canReplace(it.index(),g.index(),et.content)}class Fitter{constructor(g,et,ot){this.$from=g,this.$to=et,this.unplaced=ot,this.frontier=[],this.placed=Fragment.empty;for(let ct=0;ct<=g.depth;ct++){let ut=g.node(ct);this.frontier.push({type:ut.type,match:ut.contentMatchAt(g.indexAfter(ct))})}for(let ct=g.depth;ct>0;ct--)this.placed=Fragment.from(g.node(ct).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let kt=this.findFittable();kt?this.placeNodes(kt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),et=this.placed.size-this.depth-this.$from.depth,ot=this.$from,ct=this.close(g<0?this.$to:ot.doc.resolve(g));if(!ct)return null;let ut=this.placed,dt=ot.depth,ft=ct.depth;for(;dt&&ft&&ut.childCount==1;)ut=ut.firstChild.content,dt--,ft--;let St=new Slice(ut,dt,ft);return g>-1?new ReplaceAroundStep(ot.pos,g,this.$to.pos,this.$to.end(),St,et):St.size||ot.pos!=this.$to.pos?new ReplaceStep(ot.pos,ct.pos,St):null}findFittable(){let g=this.unplaced.openStart;for(let et=this.unplaced.content,ot=0,ct=this.unplaced.openEnd;ot<g;ot++){let ut=et.firstChild;if(et.childCount>1&&(ct=0),ut.type.spec.isolating&&ct<=ot){g=ot;break}et=ut.content}for(let et=1;et<=2;et++)for(let ot=et==1?g:this.unplaced.openStart;ot>=0;ot--){let ct,ut=null;ot?(ut=contentAt(this.unplaced.content,ot-1).firstChild,ct=ut.content):ct=this.unplaced.content;let dt=ct.firstChild;for(let ft=this.depth;ft>=0;ft--){let{type:St,match:kt}=this.frontier[ft],Tt,Rt=null;if(et==1&&(dt?kt.matchType(dt.type)||(Rt=kt.fillBefore(Fragment.from(dt),!1)):ut&&St.compatibleContent(ut.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,inject:Rt};if(et==2&&dt&&(Tt=kt.findWrapping(dt.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,wrap:Tt};if(ut&&kt.matchType(ut.type))break}}}openMore(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);return!ct.childCount||ct.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,et+1,Math.max(ot,ct.size+et>=g.size-ot?et+1:0)),!0)}dropNode(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);if(ct.childCount<=1&&et>0){let ut=g.size-et<=et+ct.size;this.unplaced=new Slice(dropFromFragment(g,et-1,1),et-1,ut?et-1:ot)}else this.unplaced=new Slice(dropFromFragment(g,et,1),et,ot)}placeNodes({sliceDepth:g,frontierDepth:et,parent:ot,inject:ct,wrap:ut}){for(;this.depth>et;)this.closeFrontierNode();if(ut)for(let zt=0;zt<ut.length;zt++)this.openFrontierNode(ut[zt]);let dt=this.unplaced,ft=ot?ot.content:dt.content,St=dt.openStart-g,kt=0,Tt=[],{match:Rt,type:jt}=this.frontier[et];if(ct){for(let zt=0;zt<ct.childCount;zt++)Tt.push(ct.child(zt));Rt=Rt.matchFragment(ct)}let Ft=ft.size+g-(dt.content.size-dt.openEnd);for(;kt<ft.childCount;){let zt=ft.child(kt),Ut=Rt.matchType(zt.type);if(!Ut)break;kt++,(kt>1||St==0||zt.content.size)&&(Rt=Ut,Tt.push(closeNodeStart(zt.mark(jt.allowedMarks(zt.marks)),kt==1?St:0,kt==ft.childCount?Ft:-1)))}let $t=kt==ft.childCount;$t||(Ft=-1),this.placed=addToFragment(this.placed,et,Fragment.from(Tt)),this.frontier[et].match=Rt,$t&&Ft<0&&ot&&ot.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let zt=0,Ut=ft;zt<Ft;zt++){let Bt=Ut.lastChild;this.frontier.push({type:Bt.type,match:Bt.contentMatchAt(Bt.childCount)}),Ut=Bt.content}this.unplaced=$t?g==0?Slice.empty:new Slice(dropFromFragment(dt.content,g-1,1),g-1,Ft<0?dt.openEnd:g-1):new Slice(dropFromFragment(dt.content,g,kt),dt.openStart,dt.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],et;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(et=this.findCloseLevel(this.$to))&&et.depth==this.depth)return-1;let{depth:ot}=this.$to,ct=this.$to.after(ot);for(;ot>1&&ct==this.$to.end(--ot);)++ct;return ct}findCloseLevel(g){e:for(let et=Math.min(this.depth,g.depth);et>=0;et--){let{match:ot,type:ct}=this.frontier[et],ut=et<g.depth&&g.end(et+1)==g.pos+(g.depth-(et+1)),dt=contentAfterFits(g,et,ct,ot,ut);if(dt){for(let ft=et-1;ft>=0;ft--){let{match:St,type:kt}=this.frontier[ft],Tt=contentAfterFits(g,ft,kt,St,!0);if(!Tt||Tt.childCount)continue e}return{depth:et,fit:dt,move:ut?g.doc.resolve(g.after(et+1)):g}}}}close(g){let et=this.findCloseLevel(g);if(!et)return null;for(;this.depth>et.depth;)this.closeFrontierNode();et.fit.childCount&&(this.placed=addToFragment(this.placed,et.depth,et.fit)),g=et.move;for(let ot=et.depth+1;ot<=g.depth;ot++){let ct=g.node(ot),ut=ct.type.contentMatch.fillBefore(ct.content,!0,g.index(ot));this.openFrontierNode(ct.type,ct.attrs,ut)}return g}openFrontierNode(g,et=null,ot){let ct=this.frontier[this.depth];ct.match=ct.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(et,ot))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let et=this.frontier.pop().match.fillBefore(Fragment.empty,!0);et.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,et))}}function dropFromFragment(it,g,et){return g==0?it.cutByIndex(et,it.childCount):it.replaceChild(0,it.firstChild.copy(dropFromFragment(it.firstChild.content,g-1,et)))}function addToFragment(it,g,et){return g==0?it.append(et):it.replaceChild(it.childCount-1,it.lastChild.copy(addToFragment(it.lastChild.content,g-1,et)))}function contentAt(it,g){for(let et=0;et<g;et++)it=it.firstChild.content;return it}function closeNodeStart(it,g,et){if(g<=0)return it;let ot=it.content;return g>1&&(ot=ot.replaceChild(0,closeNodeStart(ot.firstChild,g-1,ot.childCount==1?et-1:0))),g>0&&(ot=it.type.contentMatch.fillBefore(ot).append(ot),et<=0&&(ot=ot.append(it.type.contentMatch.matchFragment(ot).fillBefore(Fragment.empty,!0)))),it.copy(ot)}function contentAfterFits(it,g,et,ot,ct){let ut=it.node(g),dt=ct?it.indexAfter(g):it.index(g);if(dt==ut.childCount&&!et.compatibleContent(ut.type))return null;let ft=ot.fillBefore(ut.content,!0,dt);return ft&&!invalidMarks(et,ut.content,dt)?ft:null}function invalidMarks(it,g,et){for(let ot=et;ot<g.childCount;ot++)if(!it.allowsMarks(g.child(ot).marks))return!0;return!1}function definesContent(it){return it.spec.defining||it.spec.definingForContent}function replaceRange(it,g,et,ot){if(!ot.size)return it.deleteRange(g,et);let ct=it.doc.resolve(g),ut=it.doc.resolve(et);if(fitsTrivially(ct,ut,ot))return it.step(new ReplaceStep(g,et,ot));let dt=coveredDepths(ct,it.doc.resolve(et));dt[dt.length-1]==0&&dt.pop();let ft=-(ct.depth+1);dt.unshift(ft);for(let jt=ct.depth,Ft=ct.pos-1;jt>0;jt--,Ft--){let $t=ct.node(jt).type.spec;if($t.defining||$t.definingAsContext||$t.isolating)break;dt.indexOf(jt)>-1?ft=jt:ct.before(jt)==Ft&&dt.splice(1,0,-jt)}let St=dt.indexOf(ft),kt=[],Tt=ot.openStart;for(let jt=ot.content,Ft=0;;Ft++){let $t=jt.firstChild;if(kt.push($t),Ft==ot.openStart)break;jt=$t.content}for(let jt=Tt-1;jt>=0;jt--){let Ft=kt[jt],$t=definesContent(Ft.type);if($t&&!Ft.sameMarkup(ct.node(Math.abs(ft)-1)))Tt=jt;else if($t||!Ft.type.isTextblock)break}for(let jt=ot.openStart;jt>=0;jt--){let Ft=(jt+Tt+1)%(ot.openStart+1),$t=kt[Ft];if($t)for(let zt=0;zt<dt.length;zt++){let Ut=dt[(zt+St)%dt.length],Bt=!0;Ut<0&&(Bt=!1,Ut=-Ut);let Ht=ct.node(Ut-1),Jt=ct.index(Ut-1);if(Ht.canReplaceWith(Jt,Jt,$t.type,$t.marks))return it.replace(ct.before(Ut),Bt?ut.after(Ut):et,new Slice(closeFragment(ot.content,0,ot.openStart,Ft),Ft,ot.openEnd))}}let Rt=it.steps.length;for(let jt=dt.length-1;jt>=0&&(it.replace(g,et,ot),!(it.steps.length>Rt));jt--){let Ft=dt[jt];Ft<0||(g=ct.before(Ft),et=ut.after(Ft))}}function closeFragment(it,g,et,ot,ct){if(g<et){let ut=it.firstChild;it=it.replaceChild(0,ut.copy(closeFragment(ut.content,g+1,et,ot,ut)))}if(g>ot){let ut=ct.contentMatchAt(0),dt=ut.fillBefore(it).append(it);it=dt.append(ut.matchFragment(dt).fillBefore(Fragment.empty,!0))}return it}function replaceRangeWith(it,g,et,ot){if(!ot.isInline&&g==et&&it.doc.resolve(g).parent.content.size){let ct=insertPoint(it.doc,g,ot.type);ct!=null&&(g=et=ct)}it.replaceRange(g,et,new Slice(Fragment.from(ot),0,0))}function deleteRange$1(it,g,et){let ot=it.doc.resolve(g),ct=it.doc.resolve(et),ut=coveredDepths(ot,ct);for(let dt=0;dt<ut.length;dt++){let ft=ut[dt],St=dt==ut.length-1;if(St&&ft==0||ot.node(ft).type.contentMatch.validEnd)return it.delete(ot.start(ft),ct.end(ft));if(ft>0&&(St||ot.node(ft-1).canReplace(ot.index(ft-1),ct.indexAfter(ft-1))))return it.delete(ot.before(ft),ct.after(ft))}for(let dt=1;dt<=ot.depth&&dt<=ct.depth;dt++)if(g-ot.start(dt)==ot.depth-dt&&et>ot.end(dt)&&ct.end(dt)-et!=ct.depth-dt&&ot.start(dt-1)==ct.start(dt-1)&&ot.node(dt-1).canReplace(ot.index(dt-1),ct.index(dt-1)))return it.delete(ot.before(dt),et);it.delete(g,et)}function coveredDepths(it,g){let et=[],ot=Math.min(it.depth,g.depth);for(let ct=ot;ct>=0;ct--){let ut=it.start(ct);if(ut<it.pos-(it.depth-ct)||g.end(ct)>g.pos+(g.depth-ct)||it.node(ct).type.spec.isolating||g.node(ct).type.spec.isolating)break;(ut==g.start(ct)||ct==it.depth&&ct==g.depth&&it.parent.inlineContent&&g.parent.inlineContent&&ct&&g.start(ct-1)==ut-1)&&et.push(ct)}return et}class AttrStep extends Step{constructor(g,et,ot){super(),this.pos=g,this.attr=et,this.value=ot}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at attribute step's position");let ot=Object.create(null);for(let ut in et.attrs)ot[ut]=et.attrs[ut];ot[this.attr]=this.value;let ct=et.type.create(ot,null,et.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ct),0,et.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AttrStep(et.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.pos!="number"||typeof et.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(et.pos,et.attr,et.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,et){super(),this.attr=g,this.value=et}apply(g){let et=Object.create(null);for(let ct in g.attrs)et[ct]=g.attrs[ct];et[this.attr]=this.value;let ot=g.type.create(et,g.content,g.marks);return StepResult.ok(ot)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(et.attr,et.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function it(g){let et=Error.call(this,g);return et.__proto__=it.prototype,et};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let et=this.maybeStep(g);if(et.failed)throw new TransformError(et.failed);return this}maybeStep(g){let et=g.apply(this.doc);return et.failed||this.addStep(g,et.doc),et}get docChanged(){return this.steps.length>0}addStep(g,et){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=et}replace(g,et=g,ot=Slice.empty){let ct=replaceStep(this.doc,g,et,ot);return ct&&this.step(ct),this}replaceWith(g,et,ot){return this.replace(g,et,new Slice(Fragment.from(ot),0,0))}delete(g,et){return this.replace(g,et,Slice.empty)}insert(g,et){return this.replaceWith(g,g,et)}replaceRange(g,et,ot){return replaceRange(this,g,et,ot),this}replaceRangeWith(g,et,ot){return replaceRangeWith(this,g,et,ot),this}deleteRange(g,et){return deleteRange$1(this,g,et),this}lift(g,et){return lift$2(this,g,et),this}join(g,et=1){return join(this,g,et),this}wrap(g,et){return wrap(this,g,et),this}setBlockType(g,et=g,ot,ct=null){return setBlockType$1(this,g,et,ot,ct),this}setNodeMarkup(g,et,ot=null,ct){return setNodeMarkup(this,g,et,ot,ct),this}setNodeAttribute(g,et,ot){return this.step(new AttrStep(g,et,ot)),this}setDocAttribute(g,et){return this.step(new DocAttrStep(g,et)),this}addNodeMark(g,et){return this.step(new AddNodeMarkStep(g,et)),this}removeNodeMark(g,et){let ot=this.doc.nodeAt(g);if(!ot)throw new RangeError("No node at position "+g);if(et instanceof Mark$1)et.isInSet(ot.marks)&&this.step(new RemoveNodeMarkStep(g,et));else{let ct=ot.marks,ut,dt=[];for(;ut=et.isInSet(ct);)dt.push(new RemoveNodeMarkStep(g,ut)),ct=ut.removeFromSet(ct);for(let ft=dt.length-1;ft>=0;ft--)this.step(dt[ft])}return this}split(g,et=1,ot){return split(this,g,et,ot),this}addMark(g,et,ot){return addMark(this,g,et,ot),this}removeMark(g,et,ot){return removeMark(this,g,et,ot),this}clearIncompatible(g,et,ot){return clearIncompatible(this,g,et,ot),this}};const classesById=Object.create(null);class Selection{constructor(g,et,ot){this.$anchor=g,this.$head=et,this.ranges=ot||[new SelectionRange(g.min(et),g.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let et=0;et<g.length;et++)if(g[et].$from.pos!=g[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,et=Slice.empty){let ot=et.content.lastChild,ct=null;for(let ft=0;ft<et.openEnd;ft++)ct=ot,ot=ot.lastChild;let ut=g.steps.length,dt=this.ranges;for(let ft=0;ft<dt.length;ft++){let{$from:St,$to:kt}=dt[ft],Tt=g.mapping.slice(ut);g.replaceRange(Tt.map(St.pos),Tt.map(kt.pos),ft?Slice.empty:et),ft==0&&selectionToInsertionEnd$1(g,ut,(ot?ot.isInline:ct&&ct.isTextblock)?-1:1)}}replaceWith(g,et){let ot=g.steps.length,ct=this.ranges;for(let ut=0;ut<ct.length;ut++){let{$from:dt,$to:ft}=ct[ut],St=g.mapping.slice(ot),kt=St.map(dt.pos),Tt=St.map(ft.pos);ut?g.deleteRange(kt,Tt):(g.replaceRangeWith(kt,Tt,et),selectionToInsertionEnd$1(g,ot,et.isInline?-1:1))}}static findFrom(g,et,ot=!1){let ct=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),et,ot);if(ct)return ct;for(let ut=g.depth-1;ut>=0;ut--){let dt=et<0?findSelectionIn(g.node(0),g.node(ut),g.before(ut+1),g.index(ut),et,ot):findSelectionIn(g.node(0),g.node(ut),g.after(ut+1),g.index(ut)+1,et,ot);if(dt)return dt}return null}static near(g,et=1){return this.findFrom(g,et)||this.findFrom(g,-et)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=classesById[et.type];if(!ot)throw new RangeError(`No selection type ${et.type} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=et,et.prototype.jsonID=g,et}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,et){this.$from=g,this.$to=et}}let warnedAboutTextSelection=!1;function checkTextSelection(it){!warnedAboutTextSelection&&!it.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+it.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,et=g){checkTextSelection(g),checkTextSelection(et),super(g,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,et){let ot=g.resolve(et.map(this.head));if(!ot.parent.inlineContent)return Selection.near(ot);let ct=g.resolve(et.map(this.anchor));return new TextSelection(ct.parent.inlineContent?ct:ot,ot)}replace(g,et=Slice.empty){if(super.replace(g,et),et==Slice.empty){let ot=this.$from.marksAcross(this.$to);ot&&g.ensureMarks(ot)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,et){if(typeof et.anchor!="number"||typeof et.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(et.anchor),g.resolve(et.head))}static create(g,et,ot=et){let ct=g.resolve(et);return new this(ct,ot==et?ct:g.resolve(ot))}static between(g,et,ot){let ct=g.pos-et.pos;if((!ot||ct)&&(ot=ct>=0?1:-1),!et.parent.inlineContent){let ut=Selection.findFrom(et,ot,!0)||Selection.findFrom(et,-ot,!0);if(ut)et=ut.$head;else return Selection.near(et,ot)}return g.parent.inlineContent||(ct==0?g=et:(g=(Selection.findFrom(g,-ot,!0)||Selection.findFrom(g,ot,!0)).$anchor,g.pos<et.pos!=ct<0&&(g=et))),new TextSelection(g,et)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,et){this.anchor=g,this.head=et}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let et=g.nodeAfter,ot=g.node(0).resolve(g.pos+et.nodeSize);super(g,ot),this.node=et}map(g,et){let{deleted:ot,pos:ct}=et.mapResult(this.anchor),ut=g.resolve(ct);return ot?Selection.near(ut):new NodeSelection(ut)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,et){if(typeof et.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(et.anchor))}static create(g,et){return new NodeSelection(g.resolve(et))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:et,pos:ot}=g.mapResult(this.anchor);return et?new TextBookmark(ot,ot):new NodeBookmark(ot)}resolve(g){let et=g.resolve(this.anchor),ot=et.nodeAfter;return ot&&NodeSelection.isSelectable(ot)?new NodeSelection(et):Selection.near(et)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,et=Slice.empty){if(et==Slice.empty){g.delete(0,g.doc.content.size);let ot=Selection.atStart(g.doc);ot.eq(g.selection)||g.setSelection(ot)}else super.replace(g,et)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(it){return new AllSelection(it)}};function findSelectionIn(it,g,et,ot,ct,ut=!1){if(g.inlineContent)return TextSelection.create(it,et);for(let dt=ot-(ct>0?0:1);ct>0?dt<g.childCount:dt>=0;dt+=ct){let ft=g.child(dt);if(ft.isAtom){if(!ut&&NodeSelection.isSelectable(ft))return NodeSelection.create(it,et-(ct<0?ft.nodeSize:0))}else{let St=findSelectionIn(it,ft,et+ct,ct<0?ft.childCount:0,ct,ut);if(St)return St}et+=ft.nodeSize*ct}return null}function selectionToInsertionEnd$1(it,g,et){let ot=it.steps.length-1;if(ot<g)return;let ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;let ut=it.mapping.maps[ot],dt;ut.forEach((ft,St,kt,Tt)=>{dt==null&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,et){super.addStep(g,et),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,et=!0){let ot=this.selection;return et&&(g=g.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||Mark$1.none))),ot.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,et,ot){let ct=this.doc.type.schema;if(et==null)return g?this.replaceSelectionWith(ct.text(g),!0):this.deleteSelection();{if(ot==null&&(ot=et),ot=ot??et,!g)return this.deleteRange(et,ot);let ut=this.storedMarks;if(!ut){let dt=this.doc.resolve(et);ut=ot==et?dt.marks():dt.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(et,ot,ct.text(g,ut)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,et){return this.meta[typeof g=="string"?g:g.key]=et,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(it,g){return!g||!it?it:it.bind(g)}class FieldDesc{constructor(g,et,ot){this.name=g,this.init=bind(et.init,ot),this.apply=bind(et.apply,ot)}}const baseFields=[new FieldDesc("doc",{init(it){return it.doc||it.schema.topNodeType.createAndFill()},apply(it){return it.doc}}),new FieldDesc("selection",{init(it,g){return it.selection||Selection.atStart(g.doc)},apply(it){return it.selection}}),new FieldDesc("storedMarks",{init(it){return it.storedMarks||null},apply(it,g,et,ot){return ot.selection.$cursor?it.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(it,g){return it.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,et){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),et&&et.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new FieldDesc(ot.key,ot.spec.state,ot))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,et=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=et){let ct=this.config.plugins[ot];if(ct.spec.filterTransaction&&!ct.spec.filterTransaction.call(ct,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let et=[g],ot=this.applyInner(g),ct=null;for(;;){let ut=!1;for(let dt=0;dt<this.config.plugins.length;dt++){let ft=this.config.plugins[dt];if(ft.spec.appendTransaction){let St=ct?ct[dt].n:0,kt=ct?ct[dt].state:this,Tt=St<et.length&&ft.spec.appendTransaction.call(ft,St?et.slice(St):et,kt,ot);if(Tt&&ot.filterTransaction(Tt,dt)){if(Tt.setMeta("appendedTransaction",g),!ct){ct=[];for(let Rt=0;Rt<this.config.plugins.length;Rt++)ct.push(Rt<dt?{state:ot,n:et.length}:{state:this,n:0})}et.push(Tt),ot=ot.applyInner(Tt),ut=!0}ct&&(ct[dt]={state:ot,n:et.length})}}if(!ut)return{state:ot,transactions:et}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new EditorState(this.config),ot=this.config.fields;for(let ct=0;ct<ot.length;ct++){let ut=ot[ct];et[ut.name]=ut.apply(g,this[ut.name],this,et)}return et}get tr(){return new Transaction(this)}static create(g){let et=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),ot=new EditorState(et);for(let ct=0;ct<et.fields.length;ct++)ot[et.fields[ct].name]=et.fields[ct].init(g,ot);return ot}reconfigure(g){let et=new Configuration(this.schema,g.plugins),ot=et.fields,ct=new EditorState(et);for(let ut=0;ut<ot.length;ut++){let dt=ot[ut].name;ct[dt]=this.hasOwnProperty(dt)?this[dt]:ot[ut].init(g,ct)}return ct}toJSON(g){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),g&&typeof g=="object")for(let ot in g){if(ot=="doc"||ot=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ct=g[ot],ut=ct.spec.state;ut&&ut.toJSON&&(et[ot]=ut.toJSON.call(ct,this[ct.key]))}return et}static fromJSON(g,et,ot){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let ct=new Configuration(g.schema,g.plugins),ut=new EditorState(ct);return ct.fields.forEach(dt=>{if(dt.name=="doc")ut.doc=Node$2.fromJSON(g.schema,et.doc);else if(dt.name=="selection")ut.selection=Selection.fromJSON(ut.doc,et.selection);else if(dt.name=="storedMarks")et.storedMarks&&(ut.storedMarks=et.storedMarks.map(g.schema.markFromJSON));else{if(ot)for(let ft in ot){let St=ot[ft],kt=St.spec.state;if(St.key==dt.name&&kt&&kt.fromJSON&&Object.prototype.hasOwnProperty.call(et,ft)){ut[dt.name]=kt.fromJSON.call(St,g,et[ft],ut);return}}ut[dt.name]=dt.init(g,ut)}}),ut}}function bindProps(it,g,et){for(let ot in it){let ct=it[ot];ct instanceof Function?ct=ct.bind(g):ot=="handleDOMEvents"&&(ct=bindProps(ct,g,{})),et[ot]=ct}return et}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(it){return it in keys?it+"$"+ ++keys[it]:(keys[it]=0,it+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const deleteSelection$1=(it,g)=>it.selection.empty?!1:(g&&g(it.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("backward",it):et.parentOffset>0)?null:et}const joinBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);if(!ct){let dt=ot.blockRange(),ft=dt&&liftTarget(dt);return ft==null?!1:(g&&g(it.tr.lift(dt,ft).scrollIntoView()),!0)}let ut=ct.nodeBefore;if(deleteBarrier(it,ct,g,-1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"end")||NodeSelection.isSelectable(ut)))for(let dt=ot.depth;;dt--){let ft=replaceStep(it.doc,ot.before(dt),ot.after(dt),Slice.empty);if(ft&&ft.slice.size<ft.to-ft.from){if(g){let St=it.tr.step(ft);St.setSelection(textblockAt(ut,"end")?Selection.findFrom(St.doc.resolve(St.mapping.map(ct.pos,-1)),-1):NodeSelection.create(St.doc,ct.pos-ut.nodeSize)),g(St.scrollIntoView())}return!0}if(dt==1||ot.node(dt-1).childCount>1)break}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos-ut.nodeSize,ct.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);return ct?joinTextblocksAround(it,ct,g):!1},joinTextblockForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);return ct?joinTextblocksAround(it,ct,g):!1};function joinTextblocksAround(it,g,et){let ot=g.nodeBefore,ct=ot,ut=g.pos-1;for(;!ct.isTextblock;ut--){if(ct.type.spec.isolating)return!1;let Tt=ct.lastChild;if(!Tt)return!1;ct=Tt}let dt=g.nodeAfter,ft=dt,St=g.pos+1;for(;!ft.isTextblock;St++){if(ft.type.spec.isolating)return!1;let Tt=ft.firstChild;if(!Tt)return!1;ft=Tt}let kt=replaceStep(it.doc,ut,St,Slice.empty);if(!kt||kt.from!=ut||kt instanceof ReplaceStep&&kt.slice.size>=St-ut)return!1;if(et){let Tt=it.tr.step(kt);Tt.setSelection(TextSelection.create(Tt.doc,ut)),et(Tt.scrollIntoView())}return!0}function textblockAt(it,g,et=!1){for(let ot=it;ot;ot=g=="start"?ot.firstChild:ot.lastChild){if(ot.isTextblock)return!0;if(et&&ot.childCount!=1)return!1}return!1}const selectNodeBackward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("backward",it):ot.parentOffset>0)return!1;ut=findCutBefore(ot)}let dt=ut&&ut.nodeBefore;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos-dt.nodeSize)).scrollIntoView()),!0)};function findCutBefore(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){if(it.index(g)>0)return it.doc.resolve(it.before(g+1));if(it.node(g).type.spec.isolating)break}return null}function atBlockEnd(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("forward",it):et.parentOffset<et.parent.content.size)?null:et}const joinForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);if(!ct)return!1;let ut=ct.nodeAfter;if(deleteBarrier(it,ct,g,1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"start")||NodeSelection.isSelectable(ut))){let dt=replaceStep(it.doc,ot.before(),ot.after(),Slice.empty);if(dt&&dt.slice.size<dt.to-dt.from){if(g){let ft=it.tr.step(dt);ft.setSelection(textblockAt(ut,"start")?Selection.findFrom(ft.doc.resolve(ft.mapping.map(ct.pos)),1):NodeSelection.create(ft.doc,ft.mapping.map(ct.pos))),g(ft.scrollIntoView())}return!0}}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos,ct.pos+ut.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("forward",it):ot.parentOffset<ot.parent.content.size)return!1;ut=findCutAfter(ot)}let dt=ut&&ut.nodeAfter;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos)).scrollIntoView()),!0)};function findCutAfter(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){let et=it.node(g);if(it.index(g)+1<et.childCount)return it.doc.resolve(it.after(g+1));if(et.type.spec.isolating)break}return null}const joinUp$1=(it,g)=>{let et=it.selection,ot=et instanceof NodeSelection,ct;if(ot){if(et.node.isTextblock||!canJoin(it.doc,et.from))return!1;ct=et.from}else if(ct=joinPoint(it.doc,et.from,-1),ct==null)return!1;if(g){let ut=it.tr.join(ct);ot&&ut.setSelection(NodeSelection.create(ut.doc,ct-it.doc.resolve(ct).nodeBefore.nodeSize)),g(ut.scrollIntoView())}return!0},joinDown$1=(it,g)=>{let et=it.selection,ot;if(et instanceof NodeSelection){if(et.node.isTextblock||!canJoin(it.doc,et.to))return!1;ot=et.to}else if(ot=joinPoint(it.doc,et.to,1),ot==null)return!1;return g&&g(it.tr.join(ot).scrollIntoView()),!0},lift$1=(it,g)=>{let{$from:et,$to:ot}=it.selection,ct=et.blockRange(ot),ut=ct&&liftTarget(ct);return ut==null?!1:(g&&g(it.tr.lift(ct,ut).scrollIntoView()),!0)},newlineInCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;return!et.parent.type.spec.code||!et.sameParent(ot)?!1:(g&&g(it.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(it){for(let g=0;g<it.edgeCount;g++){let{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}const exitCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;if(!et.parent.type.spec.code||!et.sameParent(ot))return!1;let ct=et.node(-1),ut=et.indexAfter(-1),dt=defaultBlockAt$1(ct.contentMatchAt(ut));if(!dt||!ct.canReplaceWith(ut,ut,dt))return!1;if(g){let ft=et.after(),St=it.tr.replaceWith(ft,ft,dt.createAndFill());St.setSelection(Selection.near(St.doc.resolve(ft),1)),g(St.scrollIntoView())}return!0},createParagraphNear$1=(it,g)=>{let et=it.selection,{$from:ot,$to:ct}=et;if(et instanceof AllSelection||ot.parent.inlineContent||ct.parent.inlineContent)return!1;let ut=defaultBlockAt$1(ct.parent.contentMatchAt(ct.indexAfter()));if(!ut||!ut.isTextblock)return!1;if(g){let dt=(!ot.parentOffset&&ct.index()<ct.parent.childCount?ot:ct).pos,ft=it.tr.insert(dt,ut.createAndFill());ft.setSelection(TextSelection.create(ft.doc,dt+1)),g(ft.scrollIntoView())}return!0},liftEmptyBlock$1=(it,g)=>{let{$cursor:et}=it.selection;if(!et||et.parent.content.size)return!1;if(et.depth>1&&et.after()!=et.end(-1)){let ut=et.before();if(canSplit(it.doc,ut))return g&&g(it.tr.split(ut).scrollIntoView()),!0}let ot=et.blockRange(),ct=ot&&liftTarget(ot);return ct==null?!1:(g&&g(it.tr.lift(ot,ct).scrollIntoView()),!0)},selectParentNode$1=(it,g)=>{let{$from:et,to:ot}=it.selection,ct,ut=et.sharedDepth(ot);return ut==0?!1:(ct=et.before(ut),g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct))),!0)};function joinMaybeClear(it,g,et){let ot=g.nodeBefore,ct=g.nodeAfter,ut=g.index();return!ot||!ct||!ot.type.compatibleContent(ct.type)?!1:!ot.content.size&&g.parent.canReplace(ut-1,ut)?(et&&et(it.tr.delete(g.pos-ot.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(ut,ut+1)||!(ct.isTextblock||canJoin(it.doc,g.pos))?!1:(et&&et(it.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(it,g,et,ot){let ct=g.nodeBefore,ut=g.nodeAfter,dt,ft,St=ct.type.spec.isolating||ut.type.spec.isolating;if(!St&&joinMaybeClear(it,g,et))return!0;let kt=!St&&g.parent.canReplace(g.index(),g.index()+1);if(kt&&(dt=(ft=ct.contentMatchAt(ct.childCount)).findWrapping(ut.type))&&ft.matchType(dt[0]||ut.type).validEnd){if(et){let Ft=g.pos+ut.nodeSize,$t=Fragment.empty;for(let Bt=dt.length-1;Bt>=0;Bt--)$t=Fragment.from(dt[Bt].create(null,$t));$t=Fragment.from(ct.copy($t));let zt=it.tr.step(new ReplaceAroundStep(g.pos-1,Ft,g.pos,Ft,new Slice($t,1,0),dt.length,!0)),Ut=zt.doc.resolve(Ft+2*dt.length);Ut.nodeAfter&&Ut.nodeAfter.type==ct.type&&canJoin(zt.doc,Ut.pos)&&zt.join(Ut.pos),et(zt.scrollIntoView())}return!0}let Tt=ut.type.spec.isolating||ot>0&&St?null:Selection.findFrom(g,1),Rt=Tt&&Tt.$from.blockRange(Tt.$to),jt=Rt&&liftTarget(Rt);if(jt!=null&&jt>=g.depth)return et&&et(it.tr.lift(Rt,jt).scrollIntoView()),!0;if(kt&&textblockAt(ut,"start",!0)&&textblockAt(ct,"end")){let Ft=ct,$t=[];for(;$t.push(Ft),!Ft.isTextblock;)Ft=Ft.lastChild;let zt=ut,Ut=1;for(;!zt.isTextblock;zt=zt.firstChild)Ut++;if(Ft.canReplace(Ft.childCount,Ft.childCount,zt.content)){if(et){let Bt=Fragment.empty;for(let Jt=$t.length-1;Jt>=0;Jt--)Bt=Fragment.from($t[Jt].copy(Bt));let Ht=it.tr.step(new ReplaceAroundStep(g.pos-$t.length,g.pos+ut.nodeSize,g.pos+Ut,g.pos+ut.nodeSize-Ut,new Slice(Bt,$t.length,0),0,!0));et(Ht.scrollIntoView())}return!0}}return!1}function selectTextblockSide(it){return function(g,et){let ot=g.selection,ct=it<0?ot.$from:ot.$to,ut=ct.depth;for(;ct.node(ut).isInline;){if(!ut)return!1;ut--}return ct.node(ut).isTextblock?(et&&et(g.tr.setSelection(TextSelection.create(g.doc,it<0?ct.start(ut):ct.end(ut)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut),ft=dt&&findWrapping(dt,it,g);return ft?(ot&&ot(et.tr.wrap(dt,ft).scrollIntoView()),!0):!1}}function setBlockType(it,g=null){return function(et,ot){let ct=!1;for(let ut=0;ut<et.selection.ranges.length&&!ct;ut++){let{$from:{pos:dt},$to:{pos:ft}}=et.selection.ranges[ut];et.doc.nodesBetween(dt,ft,(St,kt)=>{if(ct)return!1;if(!(!St.isTextblock||St.hasMarkup(it,g)))if(St.type==it)ct=!0;else{let Tt=et.doc.resolve(kt),Rt=Tt.index();ct=Tt.parent.canReplaceWith(Rt,Rt+1,it)}})}if(!ct)return!1;if(ot){let ut=et.tr;for(let dt=0;dt<et.selection.ranges.length;dt++){let{$from:{pos:ft},$to:{pos:St}}=et.selection.ranges[dt];ut.setBlockType(ft,St,it,g)}ot(ut.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut);if(!dt)return!1;let ft=ot?et.tr:null;return wrapRangeInList(ft,dt,it,g)?(ot&&ot(ft.scrollIntoView()),!0):!1}}function wrapRangeInList(it,g,et,ot=null){let ct=!1,ut=g,dt=g.$from.doc;if(g.depth>=2&&g.$from.node(g.depth-1).type.compatibleContent(et)&&g.startIndex==0){if(g.$from.index(g.depth-1)==0)return!1;let St=dt.resolve(g.start-2);ut=new NodeRange(St,St,g.depth),g.endIndex<g.parent.childCount&&(g=new NodeRange(g.$from,dt.resolve(g.$to.end(g.depth)),g.depth)),ct=!0}let ft=findWrapping(ut,et,ot,g);return ft?(it&&doWrapInList(it,g,ft,ct,et),!0):!1}function doWrapInList(it,g,et,ot,ct){let ut=Fragment.empty;for(let Tt=et.length-1;Tt>=0;Tt--)ut=Fragment.from(et[Tt].type.create(et[Tt].attrs,ut));it.step(new ReplaceAroundStep(g.start-(ot?2:0),g.end,g.start,g.end,new Slice(ut,0,0),et.length,!0));let dt=0;for(let Tt=0;Tt<et.length;Tt++)et[Tt].type==ct&&(dt=Tt+1);let ft=et.length-dt,St=g.start+et.length-(ot?2:0),kt=g.parent;for(let Tt=g.startIndex,Rt=g.endIndex,jt=!0;Tt<Rt;Tt++,jt=!1)!jt&&canSplit(it.doc,St,ft)&&(it.split(St,ft),St+=2*ft),St+=kt.child(Tt).nodeSize;return it}function liftListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,dt=>dt.childCount>0&&dt.firstChild.type==it);return ut?et?ot.node(ut.depth-1).type==it?liftToOuterList(g,et,it,ut):liftOutOfList(g,et,ut):!0:!1}}function liftToOuterList(it,g,et,ot){let ct=it.tr,ut=ot.end,dt=ot.$to.end(ot.depth);ut<dt&&(ct.step(new ReplaceAroundStep(ut-1,dt,ut,dt,new Slice(Fragment.from(et.create(null,ot.parent.copy())),1,0),1,!0)),ot=new NodeRange(ct.doc.resolve(ot.$from.pos),ct.doc.resolve(dt),ot.depth));const ft=liftTarget(ot);if(ft==null)return!1;ct.lift(ot,ft);let St=ct.doc.resolve(ct.mapping.map(ut,-1)-1);return canJoin(ct.doc,St.pos)&&St.nodeBefore.type==St.nodeAfter.type&&ct.join(St.pos),g(ct.scrollIntoView()),!0}function liftOutOfList(it,g,et){let ot=it.tr,ct=et.parent;for(let Ft=et.end,$t=et.endIndex-1,zt=et.startIndex;$t>zt;$t--)Ft-=ct.child($t).nodeSize,ot.delete(Ft-1,Ft+1);let ut=ot.doc.resolve(et.start),dt=ut.nodeAfter;if(ot.mapping.map(et.end)!=et.start+ut.nodeAfter.nodeSize)return!1;let ft=et.startIndex==0,St=et.endIndex==ct.childCount,kt=ut.node(-1),Tt=ut.index(-1);if(!kt.canReplace(Tt+(ft?0:1),Tt+1,dt.content.append(St?Fragment.empty:Fragment.from(ct))))return!1;let Rt=ut.pos,jt=Rt+dt.nodeSize;return ot.step(new ReplaceAroundStep(Rt-(ft?1:0),jt+(St?1:0),Rt+1,jt-1,new Slice((ft?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))).append(St?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))),ft?0:1,St?0:1),ft?0:1)),g(ot.scrollIntoView()),!0}function sinkListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,kt=>kt.childCount>0&&kt.firstChild.type==it);if(!ut)return!1;let dt=ut.startIndex;if(dt==0)return!1;let ft=ut.parent,St=ft.child(dt-1);if(St.type!=it)return!1;if(et){let kt=St.lastChild&&St.lastChild.type==ft.type,Tt=Fragment.from(kt?it.create():null),Rt=new Slice(Fragment.from(it.create(null,Fragment.from(ft.type.create(null,Tt)))),kt?3:1,0),jt=ut.start,Ft=ut.end;et(g.tr.step(new ReplaceAroundStep(jt-(kt?3:1),Ft,jt,Ft,Rt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(it){for(var g=0;;g++)if(it=it.previousSibling,!it)return g},parentNode=function(it){let g=it.assignedSlot||it.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(it,g,et){let ot=reusedRange||(reusedRange=document.createRange());return ot.setEnd(it,et??it.nodeValue.length),ot.setStart(it,g||0),ot},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(it,g,et,ot){return et&&(scanFor(it,g,et,ot,-1)||scanFor(it,g,et,ot,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(it,g,et,ot,ct){for(var ut;;){if(it==et&&g==ot)return!0;if(g==(ct<0?0:nodeSize(it))){let dt=it.parentNode;if(!dt||dt.nodeType!=1||hasBlockDesc(it)||atomElements.test(it.nodeName)||it.contentEditable=="false")return!1;g=domIndex(it)+(ct<0?0:1),it=dt}else if(it.nodeType==1){let dt=it.childNodes[g+(ct<0?-1:0)];if(dt.nodeType==1&&dt.contentEditable=="false")if(!((ut=dt.pmViewDesc)===null||ut===void 0)&&ut.ignoreForSelection)g+=ct;else return!1;else it=dt,g=ct<0?nodeSize(it):0}else return!1}}function nodeSize(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function textNodeBefore$1(it,g){for(;;){if(it.nodeType==3&&g)return it;if(it.nodeType==1&&g>0){if(it.contentEditable=="false")return null;it=it.childNodes[g-1],g=nodeSize(it)}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it),it=it.parentNode;else return null}}function textNodeAfter$1(it,g){for(;;){if(it.nodeType==3&&g<it.nodeValue.length)return it;if(it.nodeType==1&&g<it.childNodes.length){if(it.contentEditable=="false")return null;it=it.childNodes[g],g=0}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it)+1,it=it.parentNode;else return null}}function isOnEdge(it,g,et){for(let ot=g==0,ct=g==nodeSize(it);ot||ct;){if(it==et)return!0;let ut=domIndex(it);if(it=it.parentNode,!it)return!1;ot=ot&&ut==0,ct=ct&&ut==nodeSize(it)}}function hasBlockDesc(it){let g;for(let et=it;et&&!(g=et.pmViewDesc);et=et.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==it||g.contentDOM==it)}const selectionCollapsed=function(it){return it.focusNode&&isEquivalentPosition(it.focusNode,it.focusOffset,it.anchorNode,it.anchorOffset)};function keyEvent(it,g){let et=document.createEvent("Event");return et.initEvent("keydown",!0,!0),et.keyCode=it,et.key=et.code=g,et}function deepActiveElement(it){let g=it.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(it,g,et){if(it.caretPositionFromPoint)try{let ot=it.caretPositionFromPoint(g,et);if(ot)return{node:ot.offsetNode,offset:Math.min(nodeSize(ot.offsetNode),ot.offset)}}catch{}if(it.caretRangeFromPoint){let ot=it.caretRangeFromPoint(g,et);if(ot)return{node:ot.startContainer,offset:Math.min(nodeSize(ot.startContainer),ot.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(it){let g=it.defaultView&&it.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:it.documentElement.clientWidth,top:0,bottom:it.documentElement.clientHeight}}function getSide(it,g){return typeof it=="number"?it:it[g]}function clientRect(it){let g=it.getBoundingClientRect(),et=g.width/it.offsetWidth||1,ot=g.height/it.offsetHeight||1;return{left:g.left,right:g.left+it.clientWidth*et,top:g.top,bottom:g.top+it.clientHeight*ot}}function scrollRectIntoView(it,g,et){let ot=it.someProp("scrollThreshold")||0,ct=it.someProp("scrollMargin")||5,ut=it.dom.ownerDocument;for(let dt=et||it.dom;dt;){if(dt.nodeType!=1){dt=parentNode(dt);continue}let ft=dt,St=ft==ut.body,kt=St?windowRect(ut):clientRect(ft),Tt=0,Rt=0;if(g.top<kt.top+getSide(ot,"top")?Rt=-(kt.top-g.top+getSide(ct,"top")):g.bottom>kt.bottom-getSide(ot,"bottom")&&(Rt=g.bottom-g.top>kt.bottom-kt.top?g.top+getSide(ct,"top")-kt.top:g.bottom-kt.bottom+getSide(ct,"bottom")),g.left<kt.left+getSide(ot,"left")?Tt=-(kt.left-g.left+getSide(ct,"left")):g.right>kt.right-getSide(ot,"right")&&(Tt=g.right-kt.right+getSide(ct,"right")),Tt||Rt)if(St)ut.defaultView.scrollBy(Tt,Rt);else{let Ft=ft.scrollLeft,$t=ft.scrollTop;Rt&&(ft.scrollTop+=Rt),Tt&&(ft.scrollLeft+=Tt);let zt=ft.scrollLeft-Ft,Ut=ft.scrollTop-$t;g={left:g.left-zt,top:g.top-Ut,right:g.right-zt,bottom:g.bottom-Ut}}let jt=St?"fixed":getComputedStyle(dt).position;if(/^(fixed|sticky)$/.test(jt))break;dt=jt=="absolute"?dt.offsetParent:parentNode(dt)}}function storeScrollPos(it){let g=it.dom.getBoundingClientRect(),et=Math.max(0,g.top),ot,ct;for(let ut=(g.left+g.right)/2,dt=et+1;dt<Math.min(innerHeight,g.bottom);dt+=5){let ft=it.root.elementFromPoint(ut,dt);if(!ft||ft==it.dom||!it.dom.contains(ft))continue;let St=ft.getBoundingClientRect();if(St.top>=et-20){ot=ft,ct=St.top;break}}return{refDOM:ot,refTop:ct,stack:scrollStack(it.dom)}}function scrollStack(it){let g=[],et=it.ownerDocument;for(let ot=it;ot&&(g.push({dom:ot,top:ot.scrollTop,left:ot.scrollLeft}),it!=et);ot=parentNode(ot));return g}function resetScrollPos({refDOM:it,refTop:g,stack:et}){let ot=it?it.getBoundingClientRect().top:0;restoreScrollStack(et,ot==0?0:ot-g)}function restoreScrollStack(it,g){for(let et=0;et<it.length;et++){let{dom:ot,top:ct,left:ut}=it[et];ot.scrollTop!=ct+g&&(ot.scrollTop=ct+g),ot.scrollLeft!=ut&&(ot.scrollLeft=ut)}}let preventScrollSupported=null;function focusPreventScroll(it){if(it.setActive)return it.setActive();if(preventScrollSupported)return it.focus(preventScrollSupported);let g=scrollStack(it);it.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(it,g){let et,ot=2e8,ct,ut=0,dt=g.top,ft=g.top,St,kt;for(let Tt=it.firstChild,Rt=0;Tt;Tt=Tt.nextSibling,Rt++){let jt;if(Tt.nodeType==1)jt=Tt.getClientRects();else if(Tt.nodeType==3)jt=textRange(Tt).getClientRects();else continue;for(let Ft=0;Ft<jt.length;Ft++){let $t=jt[Ft];if($t.top<=dt&&$t.bottom>=ft){dt=Math.max($t.bottom,dt),ft=Math.min($t.top,ft);let zt=$t.left>g.left?$t.left-g.left:$t.right<g.left?g.left-$t.right:0;if(zt<ot){et=Tt,ot=zt,ct=zt&&et.nodeType==3?{left:$t.right<g.left?$t.right:$t.left,top:g.top}:g,Tt.nodeType==1&&zt&&(ut=Rt+(g.left>=($t.left+$t.right)/2?1:0));continue}}else $t.top>g.top&&!St&&$t.left<=g.left&&$t.right>=g.left&&(St=Tt,kt={left:Math.max($t.left,Math.min($t.right,g.left)),top:$t.top});!et&&(g.left>=$t.right&&g.top>=$t.top||g.left>=$t.left&&g.top>=$t.bottom)&&(ut=Rt+1)}}return!et&&St&&(et=St,ct=kt,ot=0),et&&et.nodeType==3?findOffsetInText(et,ct):!et||ot&&et.nodeType==1?{node:it,offset:ut}:findOffsetInNode(et,ct)}function findOffsetInText(it,g){let et=it.nodeValue.length,ot=document.createRange();for(let ct=0;ct<et;ct++){ot.setEnd(it,ct+1),ot.setStart(it,ct);let ut=singleRect(ot,1);if(ut.top!=ut.bottom&&inRect(g,ut))return{node:it,offset:ct+(g.left>=(ut.left+ut.right)/2?1:0)}}return{node:it,offset:0}}function inRect(it,g){return it.left>=g.left-1&&it.left<=g.right+1&&it.top>=g.top-1&&it.top<=g.bottom+1}function targetKludge(it,g){let et=it.parentNode;return et&&/^li$/i.test(et.nodeName)&&g.left<it.getBoundingClientRect().left?et:it}function posFromElement(it,g,et){let{node:ot,offset:ct}=findOffsetInNode(g,et),ut=-1;if(ot.nodeType==1&&!ot.firstChild){let dt=ot.getBoundingClientRect();ut=dt.left!=dt.right&&et.left>(dt.left+dt.right)/2?1:-1}return it.docView.posFromDOM(ot,ct,ut)}function posFromCaret(it,g,et,ot){let ct=-1;for(let ut=g,dt=!1;ut!=it.dom;){let ft=it.docView.nearestDesc(ut,!0),St;if(!ft)return null;if(ft.dom.nodeType==1&&(ft.node.isBlock&&ft.parent||!ft.contentDOM)&&((St=ft.dom.getBoundingClientRect()).width||St.height)&&(ft.node.isBlock&&ft.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(ft.dom.nodeName)&&(!dt&&St.left>ot.left||St.top>ot.top?ct=ft.posBefore:(!dt&&St.right<ot.left||St.bottom<ot.top)&&(ct=ft.posAfter),dt=!0),!ft.contentDOM&&ct<0&&!ft.node.isText))return(ft.node.isBlock?ot.top<(St.top+St.bottom)/2:ot.left<(St.left+St.right)/2)?ft.posBefore:ft.posAfter;ut=ft.dom.parentNode}return ct>-1?ct:it.docView.posFromDOM(g,et,-1)}function elementFromPoint(it,g,et){let ot=it.childNodes.length;if(ot&&et.top<et.bottom)for(let ct=Math.max(0,Math.min(ot-1,Math.floor(ot*(g.top-et.top)/(et.bottom-et.top))-2)),ut=ct;;){let dt=it.childNodes[ut];if(dt.nodeType==1){let ft=dt.getClientRects();for(let St=0;St<ft.length;St++){let kt=ft[St];if(inRect(g,kt))return elementFromPoint(dt,g,kt)}}if((ut=(ut+1)%ot)==ct)break}return it}function posAtCoords(it,g){let et=it.dom.ownerDocument,ot,ct=0,ut=caretFromPoint(et,g.left,g.top);ut&&({node:ot,offset:ct}=ut);let dt=(it.root.elementFromPoint?it.root:et).elementFromPoint(g.left,g.top),ft;if(!dt||!it.dom.contains(dt.nodeType!=1?dt.parentNode:dt)){let kt=it.dom.getBoundingClientRect();if(!inRect(g,kt)||(dt=elementFromPoint(it.dom,g,kt),!dt))return null}if(safari)for(let kt=dt;ot&&kt;kt=parentNode(kt))kt.draggable&&(ot=void 0);if(dt=targetKludge(dt,g),ot){if(gecko&&ot.nodeType==1&&(ct=Math.min(ct,ot.childNodes.length),ct<ot.childNodes.length)){let Tt=ot.childNodes[ct],Rt;Tt.nodeName=="IMG"&&(Rt=Tt.getBoundingClientRect()).right<=g.left&&Rt.bottom>g.top&&ct++}let kt;webkit&&ct&&ot.nodeType==1&&(kt=ot.childNodes[ct-1]).nodeType==1&&kt.contentEditable=="false"&&kt.getBoundingClientRect().top>=g.top&&ct--,ot==it.dom&&ct==ot.childNodes.length-1&&ot.lastChild.nodeType==1&&g.top>ot.lastChild.getBoundingClientRect().bottom?ft=it.state.doc.content.size:(ct==0||ot.nodeType!=1||ot.childNodes[ct-1].nodeName!="BR")&&(ft=posFromCaret(it,ot,ct,g))}ft==null&&(ft=posFromElement(it,dt,g));let St=it.docView.nearestDesc(dt,!0);return{pos:ft,inside:St?St.posAtStart-St.border:-1}}function nonZero(it){return it.top<it.bottom||it.left<it.right}function singleRect(it,g){let et=it.getClientRects();if(et.length){let ot=et[g<0?0:et.length-1];if(nonZero(ot))return ot}return Array.prototype.find.call(et,nonZero)||it.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(it,g,et){let{node:ot,offset:ct,atom:ut}=it.docView.domFromPos(g,et<0?-1:1),dt=webkit||gecko;if(ot.nodeType==3)if(dt&&(BIDI.test(ot.nodeValue)||(et<0?!ct:ct==ot.nodeValue.length))){let St=singleRect(textRange(ot,ct,ct),et);if(gecko&&ct&&/\s/.test(ot.nodeValue[ct-1])&&ct<ot.nodeValue.length){let kt=singleRect(textRange(ot,ct-1,ct-1),-1);if(kt.top==St.top){let Tt=singleRect(textRange(ot,ct,ct+1),-1);if(Tt.top!=St.top)return flattenV(Tt,Tt.left<kt.left)}}return St}else{let St=ct,kt=ct,Tt=et<0?1:-1;return et<0&&!ct?(kt++,Tt=-1):et>=0&&ct==ot.nodeValue.length?(St--,Tt=1):et<0?St--:kt++,flattenV(singleRect(textRange(ot,St,kt),Tt),Tt<0)}if(!it.state.doc.resolve(g-(ut||0)).parent.inlineContent){if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!0)}return flattenH(ot.getBoundingClientRect(),et>=0)}if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1],kt=St.nodeType==3?textRange(St,nodeSize(St)-(dt?0:1)):St.nodeType==1&&(St.nodeName!="BR"||!St.nextSibling)?St:null;if(kt)return flattenV(singleRect(kt,1),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];for(;St.pmViewDesc&&St.pmViewDesc.ignoreForCoords;)St=St.nextSibling;let kt=St?St.nodeType==3?textRange(St,0,dt?0:1):St.nodeType==1?St:null:null;if(kt)return flattenV(singleRect(kt,-1),!0)}return flattenV(singleRect(ot.nodeType==3?textRange(ot):ot,-et),et>=0)}function flattenV(it,g){if(it.width==0)return it;let et=g?it.left:it.right;return{top:it.top,bottom:it.bottom,left:et,right:et}}function flattenH(it,g){if(it.height==0)return it;let et=g?it.top:it.bottom;return{top:et,bottom:et,left:it.left,right:it.right}}function withFlushedState(it,g,et){let ot=it.state,ct=it.root.activeElement;ot!=g&&it.updateState(g),ct!=it.dom&&it.focus();try{return et()}finally{ot!=g&&it.updateState(ot),ct!=it.dom&&ct&&ct.focus()}}function endOfTextblockVertical(it,g,et){let ot=g.selection,ct=et=="up"?ot.$from:ot.$to;return withFlushedState(it,g,()=>{let{node:ut}=it.docView.domFromPos(ct.pos,et=="up"?-1:1);for(;;){let ft=it.docView.nearestDesc(ut,!0);if(!ft)break;if(ft.node.isBlock){ut=ft.contentDOM||ft.dom;break}ut=ft.dom.parentNode}let dt=coordsAtPos(it,ct.pos,1);for(let ft=ut.firstChild;ft;ft=ft.nextSibling){let St;if(ft.nodeType==1)St=ft.getClientRects();else if(ft.nodeType==3)St=textRange(ft,0,ft.nodeValue.length).getClientRects();else continue;for(let kt=0;kt<St.length;kt++){let Tt=St[kt];if(Tt.bottom>Tt.top+1&&(et=="up"?dt.top-Tt.top>(Tt.bottom-dt.top)*2:Tt.bottom-dt.bottom>(dt.bottom-Tt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(it,g,et){let{$head:ot}=g.selection;if(!ot.parent.isTextblock)return!1;let ct=ot.parentOffset,ut=!ct,dt=ct==ot.parent.content.size,ft=it.domSelection();return ft?!maybeRTL.test(ot.parent.textContent)||!ft.modify?et=="left"||et=="backward"?ut:dt:withFlushedState(it,g,()=>{let{focusNode:St,focusOffset:kt,anchorNode:Tt,anchorOffset:Rt}=it.domSelectionRange(),jt=ft.caretBidiLevel;ft.modify("move",et,"character");let Ft=ot.depth?it.docView.domAfterPos(ot.before()):it.dom,{focusNode:$t,focusOffset:zt}=it.domSelectionRange(),Ut=$t&&!Ft.contains($t.nodeType==1?$t:$t.parentNode)||St==$t&&kt==zt;try{ft.collapse(Tt,Rt),St&&(St!=Tt||kt!=Rt)&&ft.extend&&ft.extend(St,kt)}catch{}return jt!=null&&(ft.caretBidiLevel=jt),Ut}):ot.pos==ot.start()||ot.pos==ot.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(it,g,et){return cachedState==g&&cachedDir==et?cachedResult:(cachedState=g,cachedDir=et,cachedResult=et=="up"||et=="down"?endOfTextblockVertical(it,g,et):endOfTextblockHorizontal(it,g,et))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,et,ot,ct){this.parent=g,this.children=et,this.dom=ot,this.contentDOM=ct,this.dirty=NOT_DIRTY,ot.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,et,ot){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let et=0;et<this.children.length;et++)g+=this.children[et].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let et=0,ot=this.posAtStart;;et++){let ct=this.children[et];if(ct==g)return ot;ot+=ct.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,et,ot){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(ot<0){let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.previousSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.previousSibling;return ut?this.posBeforeChild(dt)+dt.size:this.posAtStart}else{let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.nextSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.nextSibling;return ut?this.posBeforeChild(dt):this.posAtEnd}let ct;if(g==this.dom&&this.contentDOM)ct=et>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ct=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(et==0)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!1;break}if(ut.previousSibling)break}if(ct==null&&et==g.childNodes.length)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!0;break}if(ut.nextSibling)break}}return ct??ot>0?this.posAtEnd:this.posAtStart}nearestDesc(g,et=!1){for(let ot=!0,ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct),dt;if(ut&&(!et||ut.node))if(ot&&(dt=ut.nodeDOM)&&!(dt.nodeType==1?dt.contains(g.nodeType==1?g:g.parentNode):dt==g))ot=!1;else return ut}}getDesc(g){let et=g.pmViewDesc;for(let ot=et;ot;ot=ot.parent)if(ot==this)return et}posFromDOM(g,et,ot){for(let ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct);if(ut)return ut.localPosFromDOM(g,et,ot)}return-1}descAt(g){for(let et=0,ot=0;et<this.children.length;et++){let ct=this.children[et],ut=ot+ct.size;if(ot==g&&ut!=ot){for(;!ct.border&&ct.children.length;)for(let dt=0;dt<ct.children.length;dt++){let ft=ct.children[dt];if(ft.size){ct=ft;break}}return ct}if(g<ut)return ct.descAt(g-ot-ct.border);ot=ut}}domFromPos(g,et){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let ot=0,ct=0;for(let ut=0;ot<this.children.length;ot++){let dt=this.children[ot],ft=ut+dt.size;if(ft>g||dt instanceof TrailingHackViewDesc){ct=g-ut;break}ut=ft}if(ct)return this.children[ot].domFromPos(ct-this.children[ot].border,et);for(let ut;ot&&!(ut=this.children[ot-1]).size&&ut instanceof WidgetViewDesc&&ut.side>=0;ot--);if(et<=0){let ut,dt=!0;for(;ut=ot?this.children[ot-1]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot--,dt=!1);return ut&&et&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(ut.size,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom)+1:0}}else{let ut,dt=!0;for(;ut=ot<this.children.length?this.children[ot]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot++,dt=!1);return ut&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(0,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom):this.contentDOM.childNodes.length}}}parseRange(g,et,ot=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:et,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ct=-1,ut=-1;for(let dt=ot,ft=0;;ft++){let St=this.children[ft],kt=dt+St.size;if(ct==-1&&g<=kt){let Tt=dt+St.border;if(g>=Tt&&et<=kt-St.border&&St.node&&St.contentDOM&&this.contentDOM.contains(St.contentDOM))return St.parseRange(g,et,Tt);g=dt;for(let Rt=ft;Rt>0;Rt--){let jt=this.children[Rt-1];if(jt.size&&jt.dom.parentNode==this.contentDOM&&!jt.emptyChildAt(1)){ct=domIndex(jt.dom)+1;break}g-=jt.size}ct==-1&&(ct=0)}if(ct>-1&&(kt>et||ft==this.children.length-1)){et=kt;for(let Tt=ft+1;Tt<this.children.length;Tt++){let Rt=this.children[Tt];if(Rt.size&&Rt.dom.parentNode==this.contentDOM&&!Rt.emptyChildAt(-1)){ut=domIndex(Rt.dom);break}et+=Rt.size}ut==-1&&(ut=this.contentDOM.childNodes.length);break}dt=kt}return{node:this.contentDOM,from:g,to:et,fromOffset:ct,toOffset:ut}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let et=this.children[g<0?0:this.children.length-1];return et.size==0||et.emptyChildAt(g)}domAfterPos(g){let{node:et,offset:ot}=this.domFromPos(g,0);if(et.nodeType!=1||ot==et.childNodes.length)throw new RangeError("No node after pos "+g);return et.childNodes[ot]}setSelection(g,et,ot,ct=!1){let ut=Math.min(g,et),dt=Math.max(g,et);for(let Ft=0,$t=0;Ft<this.children.length;Ft++){let zt=this.children[Ft],Ut=$t+zt.size;if(ut>$t&&dt<Ut)return zt.setSelection(g-$t-zt.border,et-$t-zt.border,ot,ct);$t=Ut}let ft=this.domFromPos(g,g?-1:1),St=et==g?ft:this.domFromPos(et,et?-1:1),kt=ot.root.getSelection(),Tt=ot.domSelectionRange(),Rt=!1;if((gecko||safari)&&g==et){let{node:Ft,offset:$t}=ft;if(Ft.nodeType==3){if(Rt=!!($t&&Ft.nodeValue[$t-1]==`
`),Rt&&$t==Ft.nodeValue.length)for(let zt=Ft,Ut;zt;zt=zt.parentNode){if(Ut=zt.nextSibling){Ut.nodeName=="BR"&&(ft=St={node:Ut.parentNode,offset:domIndex(Ut)+1});break}let Bt=zt.pmViewDesc;if(Bt&&Bt.node&&Bt.node.isBlock)break}}else{let zt=Ft.childNodes[$t-1];Rt=zt&&(zt.nodeName=="BR"||zt.contentEditable=="false")}}if(gecko&&Tt.focusNode&&Tt.focusNode!=St.node&&Tt.focusNode.nodeType==1){let Ft=Tt.focusNode.childNodes[Tt.focusOffset];Ft&&Ft.contentEditable=="false"&&(ct=!0)}if(!(ct||Rt&&safari)&&isEquivalentPosition(ft.node,ft.offset,Tt.anchorNode,Tt.anchorOffset)&&isEquivalentPosition(St.node,St.offset,Tt.focusNode,Tt.focusOffset))return;let jt=!1;if((kt.extend||g==et)&&!(Rt&&gecko)){kt.collapse(ft.node,ft.offset);try{g!=et&&kt.extend(St.node,St.offset),jt=!0}catch{}}if(!jt){if(g>et){let $t=ft;ft=St,St=$t}let Ft=document.createRange();Ft.setEnd(St.node,St.offset),Ft.setStart(ft.node,ft.offset),kt.removeAllRanges(),kt.addRange(Ft)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,et){for(let ot=0,ct=0;ct<this.children.length;ct++){let ut=this.children[ct],dt=ot+ut.size;if(ot==dt?g<=dt&&et>=ot:g<dt&&et>ot){let ft=ot+ut.border,St=dt-ut.border;if(g>=ft&&et<=St){this.dirty=g==ot||et==dt?CONTENT_DIRTY:CHILD_DIRTY,g==ft&&et==St&&(ut.contentLost||ut.dom.parentNode!=this.contentDOM)?ut.dirty=NODE_DIRTY:ut.markDirty(g-ft,et-ft);return}else ut.dirty=ut.dom==ut.contentDOM&&ut.dom.parentNode==this.contentDOM&&!ut.children.length?CONTENT_DIRTY:NODE_DIRTY}ot=dt}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let et=this.parent;et;et=et.parent,g++){let ot=g==1?CONTENT_DIRTY:CHILD_DIRTY;et.dirty<ot&&(et.dirty=ot)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,et,ot,ct){let ut,dt=et.type.toDOM;if(typeof dt=="function"&&(dt=dt(ot,()=>{if(!ut)return ct;if(ut.parent)return ut.parent.posBeforeChild(ut)})),!et.type.spec.raw){if(dt.nodeType!=1){let ft=document.createElement("span");ft.appendChild(dt),dt=ft}dt.contentEditable="false",dt.classList.add("ProseMirror-widget")}super(g,[],dt,null),this.widget=et,this.widget=et,ut=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let et=this.widget.spec.stopEvent;return et?et(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,et,ot,ct){super(g,[],et,null),this.textDOM=ot,this.text=ct}get size(){return this.text.length}localPosFromDOM(g,et){return g!=this.textDOM?this.posAtStart+(et?this.size:0):this.posAtStart+et}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut){super(g,[],ot,ct),this.mark=et,this.spec=ut}static create(g,et,ot,ct){let ut=ct.nodeViews[et.type.name],dt=ut&&ut(et,ct,ot);return(!dt||!dt.dom)&&(dt=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et,ot),null,et.attrs)),new MarkViewDesc(g,et,dt.dom,dt.contentDOM||dt.dom,dt)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,et){if(super.markDirty(g,et),this.dirty!=NOT_DIRTY){let ot=this.parent;for(;!ot.node;)ot=ot.parent;ot.dirty<this.dirty&&(ot.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,et,ot){let ct=MarkViewDesc.create(this.parent,this.mark,!0,ot),ut=this.children,dt=this.size;et<dt&&(ut=replaceNodes(ut,et,dt,ot)),g>0&&(ut=replaceNodes(ut,0,g,ot));for(let ft=0;ft<ut.length;ft++)ut[ft].parent=ct;return ct.children=ut,ct}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt){super(g,[],ut,dt),this.node=et,this.outerDeco=ot,this.innerDeco=ct,this.nodeDOM=ft}static create(g,et,ot,ct,ut,dt){let ft=ut.nodeViews[et.type.name],St,kt=ft&&ft(et,ut,()=>{if(!St)return dt;if(St.parent)return St.parent.posBeforeChild(St)},ot,ct),Tt=kt&&kt.dom,Rt=kt&&kt.contentDOM;if(et.isText){if(!Tt)Tt=document.createTextNode(et.text);else if(Tt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Tt||({dom:Tt,contentDOM:Rt}=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et),null,et.attrs));!Rt&&!et.isText&&Tt.nodeName!="BR"&&(Tt.hasAttribute("contenteditable")||(Tt.contentEditable="false"),et.type.spec.draggable&&(Tt.draggable=!0));let jt=Tt;return Tt=applyOuterDeco(Tt,ot,et),kt?St=new CustomNodeViewDesc(g,et,ot,ct,Tt,Rt||null,jt,kt,ut,dt+1):et.isText?new TextViewDesc(g,et,ot,ct,Tt,jt,ut):new NodeViewDesc(g,et,ot,ct,Tt,Rt||null,jt,ut,dt+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let et=this.children.length-1;et>=0;et--){let ot=this.children[et];if(this.dom.contains(ot.dom.parentNode)){g.contentElement=ot.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,et,ot){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(et,this.outerDeco)&&ot.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,et){let ot=this.node.inlineContent,ct=et,ut=g.composing?this.localCompositionInfo(g,et):null,dt=ut&&ut.pos>-1?ut:null,ft=ut&&ut.pos<0,St=new ViewTreeUpdater(this,dt&&dt.node,g);iterDeco(this.node,this.innerDeco,(kt,Tt,Rt)=>{kt.spec.marks?St.syncToMarks(kt.spec.marks,ot,g):kt.type.side>=0&&!Rt&&St.syncToMarks(Tt==this.node.childCount?Mark$1.none:this.node.child(Tt).marks,ot,g),St.placeWidget(kt,g,ct)},(kt,Tt,Rt,jt)=>{St.syncToMarks(kt.marks,ot,g);let Ft;St.findNodeMatch(kt,Tt,Rt,jt)||ft&&g.state.selection.from>ct&&g.state.selection.to<ct+kt.nodeSize&&(Ft=St.findIndexWithChild(ut.node))>-1&&St.updateNodeAt(kt,Tt,Rt,Ft,g)||St.updateNextNode(kt,Tt,Rt,g,jt,ct)||St.addNode(kt,Tt,Rt,g,ct),ct+=kt.nodeSize}),St.syncToMarks([],ot,g),this.node.isTextblock&&St.addTextblockHacks(),St.destroyRest(),(St.changed||this.dirty==CONTENT_DIRTY)&&(dt&&this.protectLocalComposition(g,dt),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,et){let{from:ot,to:ct}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||ot<et||ct>et+this.node.content.size)return null;let ut=g.input.compositionNode;if(!ut||!this.dom.contains(ut.parentNode))return null;if(this.node.inlineContent){let dt=ut.nodeValue,ft=findTextInFragment(this.node.content,dt,ot-et,ct-et);return ft<0?null:{node:ut,pos:ft,text:dt}}else return{node:ut,pos:-1,text:""}}protectLocalComposition(g,{node:et,pos:ot,text:ct}){if(this.getDesc(et))return;let ut=et;for(;ut.parentNode!=this.contentDOM;ut=ut.parentNode){for(;ut.previousSibling;)ut.parentNode.removeChild(ut.previousSibling);for(;ut.nextSibling;)ut.parentNode.removeChild(ut.nextSibling);ut.pmViewDesc&&(ut.pmViewDesc=void 0)}let dt=new CompositionViewDesc(this,ut,et,ct);g.input.compositionNodes.push(dt),this.children=replaceNodes(this.children,ot,ot+ct.length,g,dt)}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,et,ot,ct),!0)}updateInner(g,et,ot,ct){this.updateOuterDeco(et),this.node=g,this.innerDeco=ot,this.contentDOM&&this.updateChildren(ct,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let et=this.nodeDOM.nodeType!=1,ot=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,et),computeOuterDeco(g,this.node,et)),this.dom!=ot&&(ot.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(it,g,et,ot,ct){applyOuterDeco(ot,g,it);let ut=new NodeViewDesc(void 0,it,g,et,ot,ot,ot,ct,0);return ut.contentDOM&&ut.updateChildren(ct,0),ut}class TextViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft){super(g,et,ot,ct,ut,null,dt,ft,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(et),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,ct.trackWrites==this.nodeDOM&&(ct.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let et=this.nodeDOM;et;et=et.parentNode)if(et==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,et,ot){return g==this.nodeDOM?this.posAtStart+Math.min(et,this.node.text.length):super.localPosFromDOM(g,et,ot)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,et,ot){let ct=this.node.cut(g,et),ut=document.createTextNode(ct.text);return new TextViewDesc(this.parent,ct,this.outerDeco,this.innerDeco,ut,ut,ot)}markDirty(g,et){super.markDirty(g,et),this.dom!=this.nodeDOM&&(g==0||et==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt){super(g,et,ot,ct,ut,dt,ft,kt,Tt),this.spec=St}update(g,et,ot,ct){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==g.type||this.spec.multiType)){let ut=this.spec.update(g,et,ot);return ut&&this.updateInner(g,et,ot,ct),ut}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,et,ot,ct)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,et,ot,ct){this.spec.setSelection?this.spec.setSelection(g,et,ot.root):super.setSelection(g,et,ot,ct)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(it,g,et){let ot=it.firstChild,ct=!1;for(let ut=0;ut<g.length;ut++){let dt=g[ut],ft=dt.dom;if(ft.parentNode==it){for(;ft!=ot;)ot=rm(ot),ct=!0;ot=ot.nextSibling}else ct=!0,it.insertBefore(ft,ot);if(dt instanceof MarkViewDesc){let St=ot?ot.previousSibling:it.lastChild;renderDescs(dt.contentDOM,dt.children,et),ot=St?St.nextSibling:it.firstChild}}for(;ot;)ot=rm(ot),ct=!0;ct&&et.trackWrites==it&&(et.trackWrites=null)}const OuterDecoLevel=function(it){it&&(this.nodeName=it)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(it,g,et){if(it.length==0)return noDeco;let ot=et?noDeco[0]:new OuterDecoLevel,ct=[ot];for(let ut=0;ut<it.length;ut++){let dt=it[ut].type.attrs;if(dt){dt.nodeName&&ct.push(ot=new OuterDecoLevel(dt.nodeName));for(let ft in dt){let St=dt[ft];St!=null&&(et&&ct.length==1&&ct.push(ot=new OuterDecoLevel(g.isInline?"span":"div")),ft=="class"?ot.class=(ot.class?ot.class+" ":"")+St:ft=="style"?ot.style=(ot.style?ot.style+";":"")+St:ft!="nodeName"&&(ot[ft]=St))}}}return ct}function patchOuterDeco(it,g,et,ot){if(et==noDeco&&ot==noDeco)return g;let ct=g;for(let ut=0;ut<ot.length;ut++){let dt=ot[ut],ft=et[ut];if(ut){let St;ft&&ft.nodeName==dt.nodeName&&ct!=it&&(St=ct.parentNode)&&St.nodeName.toLowerCase()==dt.nodeName||(St=document.createElement(dt.nodeName),St.pmIsDeco=!0,St.appendChild(ct),ft=noDeco[0]),ct=St}patchAttributes(ct,ft||noDeco[0],dt)}return ct}function patchAttributes(it,g,et){for(let ot in g)ot!="class"&&ot!="style"&&ot!="nodeName"&&!(ot in et)&&it.removeAttribute(ot);for(let ot in et)ot!="class"&&ot!="style"&&ot!="nodeName"&&et[ot]!=g[ot]&&it.setAttribute(ot,et[ot]);if(g.class!=et.class){let ot=g.class?g.class.split(" ").filter(Boolean):[],ct=et.class?et.class.split(" ").filter(Boolean):[];for(let ut=0;ut<ot.length;ut++)ct.indexOf(ot[ut])==-1&&it.classList.remove(ot[ut]);for(let ut=0;ut<ct.length;ut++)ot.indexOf(ct[ut])==-1&&it.classList.add(ct[ut]);it.classList.length==0&&it.removeAttribute("class")}if(g.style!=et.style){if(g.style){let ot=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ct;for(;ct=ot.exec(g.style);)it.style.removeProperty(ct[1])}et.style&&(it.style.cssText+=et.style)}}function applyOuterDeco(it,g,et){return patchOuterDeco(it,it,noDeco,computeOuterDeco(g,et,it.nodeType!=1))}function sameOuterDeco(it,g){if(it.length!=g.length)return!1;for(let et=0;et<it.length;et++)if(!it[et].type.eq(g[et].type))return!1;return!0}function rm(it){let g=it.nextSibling;return it.parentNode.removeChild(it),g}class ViewTreeUpdater{constructor(g,et,ot){this.lock=et,this.view=ot,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,et){if(g!=et){for(let ot=g;ot<et;ot++)this.top.children[ot].destroy();this.top.children.splice(g,et-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,et,ot){let ct=0,ut=this.stack.length>>1,dt=Math.min(ut,g.length);for(;ct<dt&&(ct==ut-1?this.top:this.stack[ct+1<<1]).matchesMark(g[ct])&&g[ct].type.spec.spanning!==!1;)ct++;for(;ct<ut;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),ut--;for(;ut<g.length;){this.stack.push(this.top,this.index+1);let ft=-1;for(let St=this.index;St<Math.min(this.index+3,this.top.children.length);St++){let kt=this.top.children[St];if(kt.matchesMark(g[ut])&&!this.isLocked(kt.dom)){ft=St;break}}if(ft>-1)ft>this.index&&(this.changed=!0,this.destroyBetween(this.index,ft)),this.top=this.top.children[this.index];else{let St=MarkViewDesc.create(this.top,g[ut],et,ot);this.top.children.splice(this.index,0,St),this.top=St,this.changed=!0}this.index=0,ut++}}findNodeMatch(g,et,ot,ct){let ut=-1,dt;if(ct>=this.preMatch.index&&(dt=this.preMatch.matches[ct-this.preMatch.index]).parent==this.top&&dt.matchesNode(g,et,ot))ut=this.top.children.indexOf(dt,this.index);else for(let ft=this.index,St=Math.min(this.top.children.length,ft+5);ft<St;ft++){let kt=this.top.children[ft];if(kt.matchesNode(g,et,ot)&&!this.preMatch.matched.has(kt)){ut=ft;break}}return ut<0?!1:(this.destroyBetween(this.index,ut),this.index++,!0)}updateNodeAt(g,et,ot,ct,ut){let dt=this.top.children[ct];return dt.dirty==NODE_DIRTY&&dt.dom==dt.contentDOM&&(dt.dirty=CONTENT_DIRTY),dt.update(g,et,ot,ut)?(this.destroyBetween(this.index,ct),this.index++,!0):!1}findIndexWithChild(g){for(;;){let et=g.parentNode;if(!et)return-1;if(et==this.top.contentDOM){let ot=g.pmViewDesc;if(ot){for(let ct=this.index;ct<this.top.children.length;ct++)if(this.top.children[ct]==ot)return ct}return-1}g=et}}updateNextNode(g,et,ot,ct,ut,dt){for(let ft=this.index;ft<this.top.children.length;ft++){let St=this.top.children[ft];if(St instanceof NodeViewDesc){let kt=this.preMatch.matched.get(St);if(kt!=null&&kt!=ut)return!1;let Tt=St.dom,Rt,jt=this.isLocked(Tt)&&!(g.isText&&St.node&&St.node.isText&&St.nodeDOM.nodeValue==g.text&&St.dirty!=NODE_DIRTY&&sameOuterDeco(et,St.outerDeco));if(!jt&&St.update(g,et,ot,ct))return this.destroyBetween(this.index,ft),St.dom!=Tt&&(this.changed=!0),this.index++,!0;if(!jt&&(Rt=this.recreateWrapper(St,g,et,ot,ct,dt)))return this.destroyBetween(this.index,ft),this.top.children[this.index]=Rt,Rt.contentDOM&&(Rt.dirty=CONTENT_DIRTY,Rt.updateChildren(ct,dt+1),Rt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,et,ot,ct,ut,dt){if(g.dirty||et.isAtom||!g.children.length||!g.node.content.eq(et.content)||!sameOuterDeco(ot,g.outerDeco)||!ct.eq(g.innerDeco))return null;let ft=NodeViewDesc.create(this.top,et,ot,ct,ut,dt);if(ft.contentDOM){ft.children=g.children,g.children=[];for(let St of ft.children)St.parent=ft}return g.destroy(),ft}addNode(g,et,ot,ct,ut){let dt=NodeViewDesc.create(this.top,g,et,ot,ct,ut);dt.contentDOM&&dt.updateChildren(ct,ut+1),this.top.children.splice(this.index++,0,dt),this.changed=!0}placeWidget(g,et,ot){let ct=this.index<this.top.children.length?this.top.children[this.index]:null;if(ct&&ct.matchesWidget(g)&&(g==ct.widget||!ct.widget.type.toDOM.parentNode))this.index++;else{let ut=new WidgetViewDesc(this.top,g,et,ot);this.top.children.splice(this.index++,0,ut),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],et=this.top;for(;g instanceof MarkViewDesc;)et=g,g=et.children[et.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",et),this.addHackNode("BR",this.top))}addHackNode(g,et){if(et==this.top&&this.index<et.children.length&&et.children[this.index].matchesHack(g))this.index++;else{let ot=document.createElement(g);g=="IMG"&&(ot.className="ProseMirror-separator",ot.alt=""),g=="BR"&&(ot.className="ProseMirror-trailingBreak");let ct=new TrailingHackViewDesc(this.top,[],ot,null);et!=this.top?et.children.push(ct):et.children.splice(this.index++,0,ct),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(it,g){let et=g,ot=et.children.length,ct=it.childCount,ut=new Map,dt=[];e:for(;ct>0;){let ft;for(;;)if(ot){let kt=et.children[ot-1];if(kt instanceof MarkViewDesc)et=kt,ot=kt.children.length;else{ft=kt,ot--;break}}else{if(et==g)break e;ot=et.parent.children.indexOf(et),et=et.parent}let St=ft.node;if(St){if(St!=it.child(ct-1))break;--ct,ut.set(ft,ct),dt.push(ft)}}return{index:ct,matched:ut,matches:dt.reverse()}}function compareSide(it,g){return it.type.side-g.type.side}function iterDeco(it,g,et,ot){let ct=g.locals(it),ut=0;if(ct.length==0){for(let kt=0;kt<it.childCount;kt++){let Tt=it.child(kt);ot(Tt,ct,g.forChild(ut,Tt),kt),ut+=Tt.nodeSize}return}let dt=0,ft=[],St=null;for(let kt=0;;){let Tt,Rt;for(;dt<ct.length&&ct[dt].to==ut;){let Ut=ct[dt++];Ut.widget&&(Tt?(Rt||(Rt=[Tt])).push(Ut):Tt=Ut)}if(Tt)if(Rt){Rt.sort(compareSide);for(let Ut=0;Ut<Rt.length;Ut++)et(Rt[Ut],kt,!!St)}else et(Tt,kt,!!St);let jt,Ft;if(St)Ft=-1,jt=St,St=null;else if(kt<it.childCount)Ft=kt,jt=it.child(kt++);else break;for(let Ut=0;Ut<ft.length;Ut++)ft[Ut].to<=ut&&ft.splice(Ut--,1);for(;dt<ct.length&&ct[dt].from<=ut&&ct[dt].to>ut;)ft.push(ct[dt++]);let $t=ut+jt.nodeSize;if(jt.isText){let Ut=$t;dt<ct.length&&ct[dt].from<Ut&&(Ut=ct[dt].from);for(let Bt=0;Bt<ft.length;Bt++)ft[Bt].to<Ut&&(Ut=ft[Bt].to);Ut<$t&&(St=jt.cut(Ut-ut),jt=jt.cut(0,Ut-ut),$t=Ut,Ft=-1)}else for(;dt<ct.length&&ct[dt].to<$t;)dt++;let zt=jt.isInline&&!jt.isLeaf?ft.filter(Ut=>!Ut.inline):ft.slice();ot(jt,zt,g.forChild(ut,jt),Ft),ut=$t}}function iosHacks(it){if(it.nodeName=="UL"||it.nodeName=="OL"){let g=it.style.cssText;it.style.cssText=g+"; list-style: square !important",window.getComputedStyle(it).listStyle,it.style.cssText=g}}function findTextInFragment(it,g,et,ot){for(let ct=0,ut=0;ct<it.childCount&&ut<=ot;){let dt=it.child(ct++),ft=ut;if(ut+=dt.nodeSize,!dt.isText)continue;let St=dt.text;for(;ct<it.childCount;){let kt=it.child(ct++);if(ut+=kt.nodeSize,!kt.isText)break;St+=kt.text}if(ut>=et){if(ut>=ot&&St.slice(ot-g.length-ft,ot-ft)==g)return ot-g.length;let kt=ft<ot?St.lastIndexOf(g,ot-ft-1):-1;if(kt>=0&&kt+g.length+ft>=et)return ft+kt;if(et==ot&&St.length>=ot+g.length-ft&&St.slice(ot-ft,ot-ft+g.length)==g)return ot}}return-1}function replaceNodes(it,g,et,ot,ct){let ut=[];for(let dt=0,ft=0;dt<it.length;dt++){let St=it[dt],kt=ft,Tt=ft+=St.size;kt>=et||Tt<=g?ut.push(St):(kt<g&&ut.push(St.slice(0,g-kt,ot)),ct&&(ut.push(ct),ct=void 0),Tt>et&&ut.push(St.slice(et-kt,St.size,ot)))}return ut}function selectionFromDOM(it,g=null){let et=it.domSelectionRange(),ot=it.state.doc;if(!et.focusNode)return null;let ct=it.docView.nearestDesc(et.focusNode),ut=ct&&ct.size==0,dt=it.docView.posFromDOM(et.focusNode,et.focusOffset,1);if(dt<0)return null;let ft=ot.resolve(dt),St,kt;if(selectionCollapsed(et)){for(St=dt;ct&&!ct.node;)ct=ct.parent;let Rt=ct.node;if(ct&&Rt.isAtom&&NodeSelection.isSelectable(Rt)&&ct.parent&&!(Rt.isInline&&isOnEdge(et.focusNode,et.focusOffset,ct.dom))){let jt=ct.posBefore;kt=new NodeSelection(dt==jt?ft:ot.resolve(jt))}}else{if(et instanceof it.dom.ownerDocument.defaultView.Selection&&et.rangeCount>1){let Rt=dt,jt=dt;for(let Ft=0;Ft<et.rangeCount;Ft++){let $t=et.getRangeAt(Ft);Rt=Math.min(Rt,it.docView.posFromDOM($t.startContainer,$t.startOffset,1)),jt=Math.max(jt,it.docView.posFromDOM($t.endContainer,$t.endOffset,-1))}if(Rt<0)return null;[St,dt]=jt==it.state.selection.anchor?[jt,Rt]:[Rt,jt],ft=ot.resolve(dt)}else St=it.docView.posFromDOM(et.anchorNode,et.anchorOffset,1);if(St<0)return null}let Tt=ot.resolve(St);if(!kt){let Rt=g=="pointer"||it.state.selection.head<ft.pos&&!ut?1:-1;kt=selectionBetween(it,Tt,ft,Rt)}return kt}function editorOwnsSelection(it){return it.editable?it.hasFocus():hasSelection(it)&&document.activeElement&&document.activeElement.contains(it.dom)}function selectionToDOM(it,g=!1){let et=it.state.selection;if(syncNodeSelection(it,et),!!editorOwnsSelection(it)){if(!g&&it.input.mouseDown&&it.input.mouseDown.allowDefault&&chrome){let ot=it.domSelectionRange(),ct=it.domObserver.currentSelection;if(ot.anchorNode&&ct.anchorNode&&isEquivalentPosition(ot.anchorNode,ot.anchorOffset,ct.anchorNode,ct.anchorOffset)){it.input.mouseDown.delayedSelectionSync=!0,it.domObserver.setCurSelection();return}}if(it.domObserver.disconnectSelection(),it.cursorWrapper)selectCursorWrapper(it);else{let{anchor:ot,head:ct}=et,ut,dt;brokenSelectBetweenUneditable&&!(et instanceof TextSelection)&&(et.$from.parent.inlineContent||(ut=temporarilyEditableNear(it,et.from)),!et.empty&&!et.$from.parent.inlineContent&&(dt=temporarilyEditableNear(it,et.to))),it.docView.setSelection(ot,ct,it,g),brokenSelectBetweenUneditable&&(ut&&resetEditable(ut),dt&&resetEditable(dt)),et.visible?it.dom.classList.remove("ProseMirror-hideselection"):(it.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(it))}it.domObserver.setCurSelection(),it.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(it,g){let{node:et,offset:ot}=it.docView.domFromPos(g,0),ct=ot<et.childNodes.length?et.childNodes[ot]:null,ut=ot?et.childNodes[ot-1]:null;if(safari&&ct&&ct.contentEditable=="false")return setEditable(ct);if((!ct||ct.contentEditable=="false")&&(!ut||ut.contentEditable=="false")){if(ct)return setEditable(ct);if(ut)return setEditable(ut)}}function setEditable(it){return it.contentEditable="true",safari&&it.draggable&&(it.draggable=!1,it.wasDraggable=!0),it}function resetEditable(it){it.contentEditable="false",it.wasDraggable&&(it.draggable=!0,it.wasDraggable=null)}function removeClassOnSelectionChange(it){let g=it.dom.ownerDocument;g.removeEventListener("selectionchange",it.input.hideSelectionGuard);let et=it.domSelectionRange(),ot=et.anchorNode,ct=et.anchorOffset;g.addEventListener("selectionchange",it.input.hideSelectionGuard=()=>{(et.anchorNode!=ot||et.anchorOffset!=ct)&&(g.removeEventListener("selectionchange",it.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(it)||it.state.selection.visible)&&it.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(it){let g=it.domSelection();if(!g)return;let et=it.cursorWrapper.dom,ot=et.nodeName=="IMG";ot?g.collapse(et.parentNode,domIndex(et)+1):g.collapse(et,0),!ot&&!it.state.selection.visible&&ie$1&&ie_version<=11&&(et.disabled=!0,et.disabled=!1)}function syncNodeSelection(it,g){if(g instanceof NodeSelection){let et=it.docView.descAt(g.from);et!=it.lastSelectedViewDesc&&(clearNodeSelection(it),et&&et.selectNode(),it.lastSelectedViewDesc=et)}else clearNodeSelection(it)}function clearNodeSelection(it){it.lastSelectedViewDesc&&(it.lastSelectedViewDesc.parent&&it.lastSelectedViewDesc.deselectNode(),it.lastSelectedViewDesc=void 0)}function selectionBetween(it,g,et,ot){return it.someProp("createSelectionBetween",ct=>ct(it,g,et))||TextSelection.between(g,et,ot)}function hasFocusAndSelection(it){return it.editable&&!it.hasFocus()?!1:hasSelection(it)}function hasSelection(it){let g=it.domSelectionRange();if(!g.anchorNode)return!1;try{return it.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(it.editable||it.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(it){let g=it.docView.domFromPos(it.state.selection.anchor,0),et=it.domSelectionRange();return isEquivalentPosition(g.node,g.offset,et.anchorNode,et.anchorOffset)}function moveSelectionBlock(it,g){let{$anchor:et,$head:ot}=it.selection,ct=g>0?et.max(ot):et.min(ot),ut=ct.parent.inlineContent?ct.depth?it.doc.resolve(g>0?ct.after():ct.before()):null:ct;return ut&&Selection.findFrom(ut,g)}function apply(it,g){return it.dispatch(it.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection)if(et.indexOf("s")>-1){let{$head:ct}=ot,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter;if(!ut||ut.isText||!ut.isLeaf)return!1;let dt=it.state.doc.resolve(ct.pos+ut.nodeSize*(g<0?-1:1));return apply(it,new TextSelection(ot.$anchor,dt))}else if(ot.empty){if(it.endOfTextblock(g>0?"forward":"backward")){let ct=moveSelectionBlock(it.state,g);return ct&&ct instanceof NodeSelection?apply(it,ct):!1}else if(!(mac$2&&et.indexOf("m")>-1)){let ct=ot.$head,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter,dt;if(!ut||ut.isText)return!1;let ft=g<0?ct.pos-ut.nodeSize:ct.pos;return ut.isAtom||(dt=it.docView.descAt(ft))&&!dt.contentDOM?NodeSelection.isSelectable(ut)?apply(it,new NodeSelection(g<0?it.state.doc.resolve(ct.pos-ut.nodeSize):ct)):webkit?apply(it,new TextSelection(it.state.doc.resolve(g<0?ft:ft+ut.nodeSize))):!1:!1}}else return!1;else{if(ot instanceof NodeSelection&&ot.node.isInline)return apply(it,new TextSelection(g>0?ot.$to:ot.$from));{let ct=moveSelectionBlock(it.state,g);return ct?apply(it,ct):!1}}}function nodeLen(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function isIgnorable(it,g){let et=it.pmViewDesc;return et&&et.size==0&&(g<0||it.nextSibling||it.nodeName!="BR")}function skipIgnoredNodes(it,g){return g<0?skipIgnoredNodesBefore(it):skipIgnoredNodesAfter(it)}function skipIgnoredNodesBefore(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct,ut,dt=!1;for(gecko&&et.nodeType==1&&ot<nodeLen(et)&&isIgnorable(et.childNodes[ot],-1)&&(dt=!0);;)if(ot>0){if(et.nodeType!=1)break;{let ft=et.childNodes[ot-1];if(isIgnorable(ft,-1))ct=et,ut=--ot;else if(ft.nodeType==3)et=ft,ot=et.nodeValue.length;else break}}else{if(isBlockNode(et))break;{let ft=et.previousSibling;for(;ft&&isIgnorable(ft,-1);)ct=et.parentNode,ut=domIndex(ft),ft=ft.previousSibling;if(ft)et=ft,ot=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=0}}}dt?setSelFocus(it,et,ot):ct&&setSelFocus(it,ct,ut)}function skipIgnoredNodesAfter(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct=nodeLen(et),ut,dt;for(;;)if(ot<ct){if(et.nodeType!=1)break;let ft=et.childNodes[ot];if(isIgnorable(ft,1))ut=et,dt=++ot;else break}else{if(isBlockNode(et))break;{let ft=et.nextSibling;for(;ft&&isIgnorable(ft,1);)ut=ft.parentNode,dt=domIndex(ft)+1,ft=ft.nextSibling;if(ft)et=ft,ot=0,ct=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=ct=0}}}ut&&setSelFocus(it,ut,dt)}function isBlockNode(it){let g=it.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(it,g){for(;it&&g==it.childNodes.length&&!hasBlockDesc(it);)g=domIndex(it)+1,it=it.parentNode;for(;it&&g<it.childNodes.length;){let et=it.childNodes[g];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=0}}function textNodeBefore(it,g){for(;it&&!g&&!hasBlockDesc(it);)g=domIndex(it),it=it.parentNode;for(;it&&g;){let et=it.childNodes[g-1];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=it.childNodes.length}}function setSelFocus(it,g,et){if(g.nodeType!=3){let ut,dt;(dt=textNodeAfter(g,et))?(g=dt,et=0):(ut=textNodeBefore(g,et))&&(g=ut,et=ut.nodeValue.length)}let ot=it.domSelection();if(!ot)return;if(selectionCollapsed(ot)){let ut=document.createRange();ut.setEnd(g,et),ut.setStart(g,et),ot.removeAllRanges(),ot.addRange(ut)}else ot.extend&&ot.extend(g,et);it.domObserver.setCurSelection();let{state:ct}=it;setTimeout(()=>{it.state==ct&&selectionToDOM(it)},50)}function findDirection(it,g){let et=it.state.doc.resolve(g);if(!(chrome||windows$1)&&et.parent.inlineContent){let ct=it.coordsAtPos(g);if(g>et.start()){let ut=it.coordsAtPos(g-1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left<ct.left?"ltr":"rtl"}if(g<et.end()){let ut=it.coordsAtPos(g+1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left>ct.left?"ltr":"rtl"}}return getComputedStyle(it.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection&&!ot.empty||et.indexOf("s")>-1||mac$2&&et.indexOf("m")>-1)return!1;let{$from:ct,$to:ut}=ot;if(!ct.parent.inlineContent||it.endOfTextblock(g<0?"up":"down")){let dt=moveSelectionBlock(it.state,g);if(dt&&dt instanceof NodeSelection)return apply(it,dt)}if(!ct.parent.inlineContent){let dt=g<0?ct:ut,ft=ot instanceof AllSelection?Selection.near(dt,g):Selection.findFrom(dt,g);return ft?apply(it,ft):!1}return!1}function stopNativeHorizontalDelete(it,g){if(!(it.state.selection instanceof TextSelection))return!0;let{$head:et,$anchor:ot,empty:ct}=it.state.selection;if(!et.sameParent(ot))return!0;if(!ct)return!1;if(it.endOfTextblock(g>0?"forward":"backward"))return!0;let ut=!et.textOffset&&(g<0?et.nodeBefore:et.nodeAfter);if(ut&&!ut.isText){let dt=it.state.tr;return g<0?dt.delete(et.pos-ut.nodeSize,et.pos):dt.delete(et.pos,et.pos+ut.nodeSize),it.dispatch(dt),!0}return!1}function switchEditable(it,g,et){it.domObserver.stop(),g.contentEditable=et,it.domObserver.start()}function safariDownArrowBug(it){if(!safari||it.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:et}=it.domSelectionRange();if(g&&g.nodeType==1&&et==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let ot=g.firstChild;switchEditable(it,ot,"true"),setTimeout(()=>switchEditable(it,ot,"false"),20)}return!1}function getMods(it){let g="";return it.ctrlKey&&(g+="c"),it.metaKey&&(g+="m"),it.altKey&&(g+="a"),it.shiftKey&&(g+="s"),g}function captureKeyDown(it,g){let et=g.keyCode,ot=getMods(g);if(et==8||mac$2&&et==72&&ot=="c")return stopNativeHorizontalDelete(it,-1)||skipIgnoredNodes(it,-1);if(et==46&&!g.shiftKey||mac$2&&et==68&&ot=="c")return stopNativeHorizontalDelete(it,1)||skipIgnoredNodes(it,1);if(et==13||et==27)return!0;if(et==37||mac$2&&et==66&&ot=="c"){let ct=et==37?findDirection(it,it.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else if(et==39||mac$2&&et==70&&ot=="c"){let ct=et==39?findDirection(it,it.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else{if(et==38||mac$2&&et==80&&ot=="c")return selectVertically(it,-1,ot)||skipIgnoredNodes(it,-1);if(et==40||mac$2&&et==78&&ot=="c")return safariDownArrowBug(it)||selectVertically(it,1,ot)||skipIgnoredNodes(it,1);if(ot==(mac$2?"m":"c")&&(et==66||et==73||et==89||et==90))return!0}return!1}function serializeForClipboard(it,g){it.someProp("transformCopied",Ft=>{g=Ft(g,it)});let et=[],{content:ot,openStart:ct,openEnd:ut}=g;for(;ct>1&&ut>1&&ot.childCount==1&&ot.firstChild.childCount==1;){ct--,ut--;let Ft=ot.firstChild;et.push(Ft.type.name,Ft.attrs!=Ft.type.defaultAttrs?Ft.attrs:null),ot=Ft.content}let dt=it.someProp("clipboardSerializer")||DOMSerializer.fromSchema(it.state.schema),ft=detachedDoc(),St=ft.createElement("div");St.appendChild(dt.serializeFragment(ot,{document:ft}));let kt=St.firstChild,Tt,Rt=0;for(;kt&&kt.nodeType==1&&(Tt=wrapMap[kt.nodeName.toLowerCase()]);){for(let Ft=Tt.length-1;Ft>=0;Ft--){let $t=ft.createElement(Tt[Ft]);for(;St.firstChild;)$t.appendChild(St.firstChild);St.appendChild($t),Rt++}kt=St.firstChild}kt&&kt.nodeType==1&&kt.setAttribute("data-pm-slice",`${ct} ${ut}${Rt?` -${Rt}`:""} ${JSON.stringify(et)}`);let jt=it.someProp("clipboardTextSerializer",Ft=>Ft(g,it))||g.content.textBetween(0,g.content.size,`

`);return{dom:St,text:jt,slice:g}}function parseFromClipboard(it,g,et,ot,ct){let ut=ct.parent.type.spec.code,dt,ft;if(!et&&!g)return null;let St=!!g&&(ot||ut||!et);if(St){if(it.someProp("transformPastedText",jt=>{g=jt(g,ut||ot,it)}),ut)return ft=new Slice(Fragment.from(it.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0),it.someProp("transformPasted",jt=>{ft=jt(ft,it,!0)}),ft;let Rt=it.someProp("clipboardTextParser",jt=>jt(g,ct,ot,it));if(Rt)ft=Rt;else{let jt=ct.marks(),{schema:Ft}=it.state,$t=DOMSerializer.fromSchema(Ft);dt=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(zt=>{let Ut=dt.appendChild(document.createElement("p"));zt&&Ut.appendChild($t.serializeNode(Ft.text(zt,jt)))})}}else it.someProp("transformPastedHTML",Rt=>{et=Rt(et,it)}),dt=readHTML(et),webkit&&restoreReplacedSpaces(dt);let kt=dt&&dt.querySelector("[data-pm-slice]"),Tt=kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(kt.getAttribute("data-pm-slice")||"");if(Tt&&Tt[3])for(let Rt=+Tt[3];Rt>0;Rt--){let jt=dt.firstChild;for(;jt&&jt.nodeType!=1;)jt=jt.nextSibling;if(!jt)break;dt=jt}if(ft||(ft=(it.someProp("clipboardParser")||it.someProp("domParser")||DOMParser.fromSchema(it.state.schema)).parseSlice(dt,{preserveWhitespace:!!(St||Tt),context:ct,ruleFromNode(jt){return jt.nodeName=="BR"&&!jt.nextSibling&&jt.parentNode&&!inlineParents.test(jt.parentNode.nodeName)?{ignore:!0}:null}})),Tt)ft=addContext(closeSlice(ft,+Tt[1],+Tt[2]),Tt[4]);else if(ft=Slice.maxOpen(normalizeSiblings(ft.content,ct),!0),ft.openStart||ft.openEnd){let Rt=0,jt=0;for(let Ft=ft.content.firstChild;Rt<ft.openStart&&!Ft.type.spec.isolating;Rt++,Ft=Ft.firstChild);for(let Ft=ft.content.lastChild;jt<ft.openEnd&&!Ft.type.spec.isolating;jt++,Ft=Ft.lastChild);ft=closeSlice(ft,Rt,jt)}return it.someProp("transformPasted",Rt=>{ft=Rt(ft,it,St)}),ft}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(it,g){if(it.childCount<2)return it;for(let et=g.depth;et>=0;et--){let ct=g.node(et).contentMatchAt(g.index(et)),ut,dt=[];if(it.forEach(ft=>{if(!dt)return;let St=ct.findWrapping(ft.type),kt;if(!St)return dt=null;if(kt=dt.length&&ut.length&&addToSibling(St,ut,ft,dt[dt.length-1],0))dt[dt.length-1]=kt;else{dt.length&&(dt[dt.length-1]=closeRight(dt[dt.length-1],ut.length));let Tt=withWrappers(ft,St);dt.push(Tt),ct=ct.matchType(Tt.type),ut=St}}),dt)return Fragment.from(dt)}return it}function withWrappers(it,g,et=0){for(let ot=g.length-1;ot>=et;ot--)it=g[ot].create(null,Fragment.from(it));return it}function addToSibling(it,g,et,ot,ct){if(ct<it.length&&ct<g.length&&it[ct]==g[ct]){let ut=addToSibling(it,g,et,ot.lastChild,ct+1);if(ut)return ot.copy(ot.content.replaceChild(ot.childCount-1,ut));if(ot.contentMatchAt(ot.childCount).matchType(ct==it.length-1?et.type:it[ct+1]))return ot.copy(ot.content.append(Fragment.from(withWrappers(et,it,ct+1))))}}function closeRight(it,g){if(g==0)return it;let et=it.content.replaceChild(it.childCount-1,closeRight(it.lastChild,g-1)),ot=it.contentMatchAt(it.childCount).fillBefore(Fragment.empty,!0);return it.copy(et.append(ot))}function closeRange(it,g,et,ot,ct,ut){let dt=g<0?it.firstChild:it.lastChild,ft=dt.content;return it.childCount>1&&(ut=0),ct<ot-1&&(ft=closeRange(ft,g,et,ot,ct+1,ut)),ct>=et&&(ft=g<0?dt.contentMatchAt(0).fillBefore(ft,ut<=ct).append(ft):ft.append(dt.contentMatchAt(dt.childCount).fillBefore(Fragment.empty,!0))),it.replaceChild(g<0?0:it.childCount-1,dt.copy(ft))}function closeSlice(it,g,et){return g<it.openStart&&(it=new Slice(closeRange(it.content,-1,g,it.openStart,0,it.openEnd),g,it.openEnd)),et<it.openEnd&&(it=new Slice(closeRange(it.content,1,et,it.openEnd,0,0),it.openStart,et)),it}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(it){let g=window.trustedTypes;return g?(_policy||(_policy=g.defaultPolicy||g.createPolicy("ProseMirrorClipboard",{createHTML:et=>et})),_policy.createHTML(it)):it}function readHTML(it){let g=/^(\s*<meta [^>]*>)*/.exec(it);g&&(it=it.slice(g[0].length));let et=detachedDoc().createElement("div"),ot=/<([a-z][^>\s]+)/i.exec(it),ct;if((ct=ot&&wrapMap[ot[1].toLowerCase()])&&(it=ct.map(ut=>"<"+ut+">").join("")+it+ct.map(ut=>"</"+ut+">").reverse().join("")),et.innerHTML=maybeWrapTrusted(it),ct)for(let ut=0;ut<ct.length;ut++)et=et.querySelector(ct[ut])||et;return et}function restoreReplacedSpaces(it){let g=it.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let et=0;et<g.length;et++){let ot=g[et];ot.childNodes.length==1&&ot.textContent==""&&ot.parentNode&&ot.parentNode.replaceChild(it.ownerDocument.createTextNode(" "),ot)}}function addContext(it,g){if(!it.size)return it;let et=it.content.firstChild.type.schema,ot;try{ot=JSON.parse(g)}catch{return it}let{content:ct,openStart:ut,openEnd:dt}=it;for(let ft=ot.length-2;ft>=0;ft-=2){let St=et.nodes[ot[ft]];if(!St||St.hasRequiredAttrs())break;ct=Fragment.from(St.create(ot[ft+1],ct)),ut++,dt++}return new Slice(ct,ut,dt)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(it){for(let g in handlers){let et=handlers[g];it.dom.addEventListener(g,it.input.eventHandlers[g]=ot=>{eventBelongsToView(it,ot)&&!runCustomHandler(it,ot)&&(it.editable||!(ot.type in editHandlers))&&et(it,ot)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&it.dom.addEventListener("input",()=>null),ensureListeners(it)}function setSelectionOrigin(it,g){it.input.lastSelectionOrigin=g,it.input.lastSelectionTime=Date.now()}function destroyInput(it){it.domObserver.stop();for(let g in it.input.eventHandlers)it.dom.removeEventListener(g,it.input.eventHandlers[g]);clearTimeout(it.input.composingTimeout),clearTimeout(it.input.lastIOSEnterFallbackTimeout)}function ensureListeners(it){it.someProp("handleDOMEvents",g=>{for(let et in g)it.input.eventHandlers[et]||it.dom.addEventListener(et,it.input.eventHandlers[et]=ot=>runCustomHandler(it,ot))})}function runCustomHandler(it,g){return it.someProp("handleDOMEvents",et=>{let ot=et[g.type];return ot?ot(it,g)||g.defaultPrevented:!1})}function eventBelongsToView(it,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let et=g.target;et!=it.dom;et=et.parentNode)if(!et||et.nodeType==11||et.pmViewDesc&&et.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(it,g){!runCustomHandler(it,g)&&handlers[g.type]&&(it.editable||!(g.type in editHandlers))&&handlers[g.type](it,g)}editHandlers.keydown=(it,g)=>{let et=g;if(it.input.shiftKey=et.keyCode==16||et.shiftKey,!inOrNearComposition(it,et)&&(it.input.lastKeyCode=et.keyCode,it.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&et.keyCode==13)))if(et.keyCode!=229&&it.domObserver.forceFlush(),ios&&et.keyCode==13&&!et.ctrlKey&&!et.altKey&&!et.metaKey){let ot=Date.now();it.input.lastIOSEnter=ot,it.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{it.input.lastIOSEnter==ot&&(it.someProp("handleKeyDown",ct=>ct(it,keyEvent(13,"Enter"))),it.input.lastIOSEnter=0)},200)}else it.someProp("handleKeyDown",ot=>ot(it,et))||captureKeyDown(it,et)?et.preventDefault():setSelectionOrigin(it,"key")};editHandlers.keyup=(it,g)=>{g.keyCode==16&&(it.input.shiftKey=!1)};editHandlers.keypress=(it,g)=>{let et=g;if(inOrNearComposition(it,et)||!et.charCode||et.ctrlKey&&!et.altKey||mac$2&&et.metaKey)return;if(it.someProp("handleKeyPress",ct=>ct(it,et))){et.preventDefault();return}let ot=it.state.selection;if(!(ot instanceof TextSelection)||!ot.$from.sameParent(ot.$to)){let ct=String.fromCharCode(et.charCode),ut=()=>it.state.tr.insertText(ct).scrollIntoView();!/[\r\n]/.test(ct)&&!it.someProp("handleTextInput",dt=>dt(it,ot.$from.pos,ot.$to.pos,ct,ut))&&it.dispatch(ut()),et.preventDefault()}};function eventCoords(it){return{left:it.clientX,top:it.clientY}}function isNear(it,g){let et=g.x-it.clientX,ot=g.y-it.clientY;return et*et+ot*ot<100}function runHandlerOnContext(it,g,et,ot,ct){if(ot==-1)return!1;let ut=it.state.doc.resolve(ot);for(let dt=ut.depth+1;dt>0;dt--)if(it.someProp(g,ft=>dt>ut.depth?ft(it,et,ut.nodeAfter,ut.before(dt),ct,!0):ft(it,et,ut.node(dt),ut.before(dt),ct,!1)))return!0;return!1}function updateSelection(it,g,et){if(it.focused||it.focus(),it.state.selection.eq(g))return;let ot=it.state.tr.setSelection(g);et=="pointer"&&ot.setMeta("pointer",!0),it.dispatch(ot)}function selectClickedLeaf(it,g){if(g==-1)return!1;let et=it.state.doc.resolve(g),ot=et.nodeAfter;return ot&&ot.isAtom&&NodeSelection.isSelectable(ot)?(updateSelection(it,new NodeSelection(et),"pointer"),!0):!1}function selectClickedNode(it,g){if(g==-1)return!1;let et=it.state.selection,ot,ct;et instanceof NodeSelection&&(ot=et.node);let ut=it.state.doc.resolve(g);for(let dt=ut.depth+1;dt>0;dt--){let ft=dt>ut.depth?ut.nodeAfter:ut.node(dt);if(NodeSelection.isSelectable(ft)){ot&&et.$from.depth>0&&dt>=et.$from.depth&&ut.before(et.$from.depth+1)==et.$from.pos?ct=ut.before(et.$from.depth):ct=ut.before(dt);break}}return ct!=null?(updateSelection(it,NodeSelection.create(it.state.doc,ct),"pointer"),!0):!1}function handleSingleClick(it,g,et,ot,ct){return runHandlerOnContext(it,"handleClickOn",g,et,ot)||it.someProp("handleClick",ut=>ut(it,g,ot))||(ct?selectClickedNode(it,et):selectClickedLeaf(it,et))}function handleDoubleClick(it,g,et,ot){return runHandlerOnContext(it,"handleDoubleClickOn",g,et,ot)||it.someProp("handleDoubleClick",ct=>ct(it,g,ot))}function handleTripleClick(it,g,et,ot){return runHandlerOnContext(it,"handleTripleClickOn",g,et,ot)||it.someProp("handleTripleClick",ct=>ct(it,g,ot))||defaultTripleClick(it,et,ot)}function defaultTripleClick(it,g,et){if(et.button!=0)return!1;let ot=it.state.doc;if(g==-1)return ot.inlineContent?(updateSelection(it,TextSelection.create(ot,0,ot.content.size),"pointer"),!0):!1;let ct=ot.resolve(g);for(let ut=ct.depth+1;ut>0;ut--){let dt=ut>ct.depth?ct.nodeAfter:ct.node(ut),ft=ct.before(ut);if(dt.inlineContent)updateSelection(it,TextSelection.create(ot,ft+1,ft+1+dt.content.size),"pointer");else if(NodeSelection.isSelectable(dt))updateSelection(it,NodeSelection.create(ot,ft),"pointer");else continue;return!0}}function forceDOMFlush(it){return endComposition(it)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(it,g)=>{let et=g;it.input.shiftKey=et.shiftKey;let ot=forceDOMFlush(it),ct=Date.now(),ut="singleClick";ct-it.input.lastClick.time<500&&isNear(et,it.input.lastClick)&&!et[selectNodeModifier]&&it.input.lastClick.button==et.button&&(it.input.lastClick.type=="singleClick"?ut="doubleClick":it.input.lastClick.type=="doubleClick"&&(ut="tripleClick")),it.input.lastClick={time:ct,x:et.clientX,y:et.clientY,type:ut,button:et.button};let dt=it.posAtCoords(eventCoords(et));dt&&(ut=="singleClick"?(it.input.mouseDown&&it.input.mouseDown.done(),it.input.mouseDown=new MouseDown(it,dt,et,!!ot)):(ut=="doubleClick"?handleDoubleClick:handleTripleClick)(it,dt.pos,dt.inside,et)?et.preventDefault():setSelectionOrigin(it,"pointer"))};class MouseDown{constructor(g,et,ot,ct){this.view=g,this.pos=et,this.event=ot,this.flushed=ct,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!ot[selectNodeModifier],this.allowDefault=ot.shiftKey;let ut,dt;if(et.inside>-1)ut=g.state.doc.nodeAt(et.inside),dt=et.inside;else{let Tt=g.state.doc.resolve(et.pos);ut=Tt.parent,dt=Tt.depth?Tt.before():0}const ft=ct?null:ot.target,St=ft?g.docView.nearestDesc(ft,!0):null;this.target=St&&St.nodeDOM.nodeType==1?St.nodeDOM:null;let{selection:kt}=g.state;(ot.button==0&&ut.type.spec.draggable&&ut.type.spec.selectable!==!1||kt instanceof NodeSelection&&kt.from<=dt&&kt.to>dt)&&(this.mightDrag={node:ut,pos:dt,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let et=this.pos;this.view.state.doc!=this.startDoc&&(et=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!et?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,et.pos,et.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(et.pos-this.view.state.selection.from),Math.abs(et.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(et.pos)),"pointer"),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=it=>{it.input.lastTouch=Date.now(),forceDOMFlush(it),setSelectionOrigin(it,"pointer")};handlers.touchmove=it=>{it.input.lastTouch=Date.now(),setSelectionOrigin(it,"pointer")};handlers.contextmenu=it=>forceDOMFlush(it);function inOrNearComposition(it,g){return it.composing?!0:safari&&Math.abs(g.timeStamp-it.input.compositionEndedAt)<500?(it.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=it=>{if(!it.composing){it.domObserver.flush();let{state:g}=it,et=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!et.textOffset&&et.parentOffset&&et.nodeBefore.marks.some(ot=>ot.type.spec.inclusive===!1)))it.markCursor=it.state.storedMarks||et.marks(),endComposition(it,!0),it.markCursor=null;else if(endComposition(it,!g.selection.empty),gecko&&g.selection.empty&&et.parentOffset&&!et.textOffset&&et.nodeBefore.marks.length){let ot=it.domSelectionRange();for(let ct=ot.focusNode,ut=ot.focusOffset;ct&&ct.nodeType==1&&ut!=0;){let dt=ut<0?ct.lastChild:ct.childNodes[ut-1];if(!dt)break;if(dt.nodeType==3){let ft=it.domSelection();ft&&ft.collapse(dt,dt.nodeValue.length);break}else ct=dt,ut=-1}}it.input.composing=!0}scheduleComposeEnd(it,timeoutComposition)};editHandlers.compositionend=(it,g)=>{it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=g.timeStamp,it.input.compositionPendingChanges=it.domObserver.pendingRecords().length?it.input.compositionID:0,it.input.compositionNode=null,it.input.compositionPendingChanges&&Promise.resolve().then(()=>it.domObserver.flush()),it.input.compositionID++,scheduleComposeEnd(it,20))};function scheduleComposeEnd(it,g){clearTimeout(it.input.composingTimeout),g>-1&&(it.input.composingTimeout=setTimeout(()=>endComposition(it),g))}function clearComposition(it){for(it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=timestampFromCustomEvent());it.input.compositionNodes.length>0;)it.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(it){let g=it.domSelectionRange();if(!g.focusNode)return null;let et=textNodeBefore$1(g.focusNode,g.focusOffset),ot=textNodeAfter$1(g.focusNode,g.focusOffset);if(et&&ot&&et!=ot){let ct=ot.pmViewDesc,ut=it.domObserver.lastChangedTextNode;if(et==ut||ot==ut)return ut;if(!ct||!ct.isText(ot.nodeValue))return ot;if(it.input.compositionNode==ot){let dt=et.pmViewDesc;if(!(!dt||!dt.isText(et.nodeValue)))return ot}}return et||ot}function timestampFromCustomEvent(){let it=document.createEvent("Event");return it.initEvent("event",!0,!0),it.timeStamp}function endComposition(it,g=!1){if(!(android&&it.domObserver.flushingSoon>=0)){if(it.domObserver.forceFlush(),clearComposition(it),g||it.docView&&it.docView.dirty){let et=selectionFromDOM(it),ot=it.state.selection;return et&&!et.eq(ot)?it.dispatch(it.state.tr.setSelection(et)):(it.markCursor||g)&&!ot.$from.node(ot.$from.sharedDepth(ot.to)).inlineContent?it.dispatch(it.state.tr.deleteSelection()):it.updateState(it.state),!0}return!1}}function captureCopy(it,g){if(!it.dom.parentNode)return;let et=it.dom.parentNode.appendChild(document.createElement("div"));et.appendChild(g),et.style.cssText="position: fixed; left: -10000px; top: 10px";let ot=getSelection(),ct=document.createRange();ct.selectNodeContents(g),it.dom.blur(),ot.removeAllRanges(),ot.addRange(ct),setTimeout(()=>{et.parentNode&&et.parentNode.removeChild(et),it.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(it,g)=>{let et=g,ot=it.state.selection,ct=et.type=="cut";if(ot.empty)return;let ut=brokenClipboardAPI?null:et.clipboardData,dt=ot.content(),{dom:ft,text:St}=serializeForClipboard(it,dt);ut?(et.preventDefault(),ut.clearData(),ut.setData("text/html",ft.innerHTML),ut.setData("text/plain",St)):captureCopy(it,ft),ct&&it.dispatch(it.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(it){return it.openStart==0&&it.openEnd==0&&it.content.childCount==1?it.content.firstChild:null}function capturePaste(it,g){if(!it.dom.parentNode)return;let et=it.input.shiftKey||it.state.selection.$from.parent.type.spec.code,ot=it.dom.parentNode.appendChild(document.createElement(et?"textarea":"div"));et||(ot.contentEditable="true"),ot.style.cssText="position: fixed; left: -10000px; top: 10px",ot.focus();let ct=it.input.shiftKey&&it.input.lastKeyCode!=45;setTimeout(()=>{it.focus(),ot.parentNode&&ot.parentNode.removeChild(ot),et?doPaste(it,ot.value,null,ct,g):doPaste(it,ot.textContent,ot.innerHTML,ct,g)},50)}function doPaste(it,g,et,ot,ct){let ut=parseFromClipboard(it,g,et,ot,it.state.selection.$from);if(it.someProp("handlePaste",St=>St(it,ct,ut||Slice.empty)))return!0;if(!ut)return!1;let dt=sliceSingleNode(ut),ft=dt?it.state.tr.replaceSelectionWith(dt,ot):it.state.tr.replaceSelection(ut);return it.dispatch(ft.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(it){let g=it.getData("text/plain")||it.getData("Text");if(g)return g;let et=it.getData("text/uri-list");return et?et.replace(/\r?\n/g," "):""}editHandlers.paste=(it,g)=>{let et=g;if(it.composing&&!android)return;let ot=brokenClipboardAPI?null:et.clipboardData,ct=it.input.shiftKey&&it.input.lastKeyCode!=45;ot&&doPaste(it,getText$1(ot),ot.getData("text/html"),ct,et)?et.preventDefault():capturePaste(it,et)};class Dragging{constructor(g,et,ot){this.slice=g,this.move=et,this.node=ot}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(it,g){let et=it.someProp("dragCopies",ot=>!ot(g));return et??!g[dragCopyModifier]}handlers.dragstart=(it,g)=>{let et=g,ot=it.input.mouseDown;if(ot&&ot.done(),!et.dataTransfer)return;let ct=it.state.selection,ut=ct.empty?null:it.posAtCoords(eventCoords(et)),dt;if(!(ut&&ut.pos>=ct.from&&ut.pos<=(ct instanceof NodeSelection?ct.to-1:ct.to))){if(ot&&ot.mightDrag)dt=NodeSelection.create(it.state.doc,ot.mightDrag.pos);else if(et.target&&et.target.nodeType==1){let Rt=it.docView.nearestDesc(et.target,!0);Rt&&Rt.node.type.spec.draggable&&Rt!=it.docView&&(dt=NodeSelection.create(it.state.doc,Rt.posBefore))}}let ft=(dt||it.state.selection).content(),{dom:St,text:kt,slice:Tt}=serializeForClipboard(it,ft);(!et.dataTransfer.files.length||!chrome||chrome_version>120)&&et.dataTransfer.clearData(),et.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",St.innerHTML),et.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||et.dataTransfer.setData("text/plain",kt),it.dragging=new Dragging(Tt,dragMoves(it,et),dt)};handlers.dragend=it=>{let g=it.dragging;window.setTimeout(()=>{it.dragging==g&&(it.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(it,g)=>g.preventDefault();editHandlers.drop=(it,g)=>{let et=g,ot=it.dragging;if(it.dragging=null,!et.dataTransfer)return;let ct=it.posAtCoords(eventCoords(et));if(!ct)return;let ut=it.state.doc.resolve(ct.pos),dt=ot&&ot.slice;dt?it.someProp("transformPasted",$t=>{dt=$t(dt,it,!1)}):dt=parseFromClipboard(it,getText$1(et.dataTransfer),brokenClipboardAPI?null:et.dataTransfer.getData("text/html"),!1,ut);let ft=!!(ot&&dragMoves(it,et));if(it.someProp("handleDrop",$t=>$t(it,et,dt||Slice.empty,ft))){et.preventDefault();return}if(!dt)return;et.preventDefault();let St=dt?dropPoint(it.state.doc,ut.pos,dt):ut.pos;St==null&&(St=ut.pos);let kt=it.state.tr;if(ft){let{node:$t}=ot;$t?$t.replace(kt):kt.deleteSelection()}let Tt=kt.mapping.map(St),Rt=dt.openStart==0&&dt.openEnd==0&&dt.content.childCount==1,jt=kt.doc;if(Rt?kt.replaceRangeWith(Tt,Tt,dt.content.firstChild):kt.replaceRange(Tt,Tt,dt),kt.doc.eq(jt))return;let Ft=kt.doc.resolve(Tt);if(Rt&&NodeSelection.isSelectable(dt.content.firstChild)&&Ft.nodeAfter&&Ft.nodeAfter.sameMarkup(dt.content.firstChild))kt.setSelection(new NodeSelection(Ft));else{let $t=kt.mapping.map(St);kt.mapping.maps[kt.mapping.maps.length-1].forEach((zt,Ut,Bt,Ht)=>$t=Ht),kt.setSelection(selectionBetween(it,Ft,kt.doc.resolve($t)))}it.focus(),it.dispatch(kt.setMeta("uiEvent","drop"))};handlers.focus=it=>{it.input.lastFocus=Date.now(),it.focused||(it.domObserver.stop(),it.dom.classList.add("ProseMirror-focused"),it.domObserver.start(),it.focused=!0,setTimeout(()=>{it.docView&&it.hasFocus()&&!it.domObserver.currentSelection.eq(it.domSelectionRange())&&selectionToDOM(it)},20))};handlers.blur=(it,g)=>{let et=g;it.focused&&(it.domObserver.stop(),it.dom.classList.remove("ProseMirror-focused"),it.domObserver.start(),et.relatedTarget&&it.dom.contains(et.relatedTarget)&&it.domObserver.currentSelection.clear(),it.focused=!1)};handlers.beforeinput=(it,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){it.domObserver.flushSoon();let{domChangeCount:ot}=it.input;setTimeout(()=>{if(it.input.domChangeCount!=ot||(it.dom.blur(),it.focus(),it.someProp("handleKeyDown",ut=>ut(it,keyEvent(8,"Backspace")))))return;let{$cursor:ct}=it.state.selection;ct&&ct.pos>0&&it.dispatch(it.state.tr.delete(ct.pos-1,ct.pos).scrollIntoView())},50)}};for(let it in editHandlers)handlers[it]=editHandlers[it];function compareObjs(it,g){if(it==g)return!0;for(let et in it)if(it[et]!==g[et])return!1;for(let et in g)if(!(et in it))return!1;return!0}class WidgetType{constructor(g,et){this.toDOM=g,this.spec=et||noSpec,this.side=this.spec.side||0}map(g,et,ot,ct){let{pos:ut,deleted:dt}=g.mapResult(et.from+ct,this.side<0?-1:1);return dt?null:new Decoration(ut-ot,ut-ot,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.map(et.from+ct,this.spec.inclusiveStart?-1:1)-ot,dt=g.map(et.to+ct,this.spec.inclusiveEnd?1:-1)-ot;return ut>=dt?null:new Decoration(ut,dt,this)}valid(g,et){return et.from<et.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.mapResult(et.from+ct,1);if(ut.deleted)return null;let dt=g.mapResult(et.to+ct,-1);return dt.deleted||dt.pos<=ut.pos?null:new Decoration(ut.pos-ot,dt.pos-ot,this)}valid(g,et){let{index:ot,offset:ct}=g.content.findIndex(et.from),ut;return ct==et.from&&!(ut=g.child(ot)).isText&&ct+ut.nodeSize==et.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,et,ot){this.from=g,this.to=et,this.type=ot}copy(g,et){return new Decoration(g,et,this.type)}eq(g,et=0){return this.type.eq(g.type)&&this.from+et==g.from&&this.to+et==g.to}map(g,et,ot){return this.type.map(g,this,et,ot)}static widget(g,et,ot){return new Decoration(g,g,new WidgetType(et,ot))}static inline(g,et,ot,ct){return new Decoration(g,et,new InlineType(ot,ct))}static node(g,et,ot,ct){return new Decoration(g,et,new NodeType(ot,ct))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,et){this.local=g.length?g:none,this.children=et.length?et:none}static create(g,et){return et.length?buildTree(et,g,0,noSpec):empty}find(g,et,ot){let ct=[];return this.findInner(g??0,et??1e9,ct,0,ot),ct}findInner(g,et,ot,ct,ut){for(let dt=0;dt<this.local.length;dt++){let ft=this.local[dt];ft.from<=et&&ft.to>=g&&(!ut||ut(ft.spec))&&ot.push(ft.copy(ft.from+ct,ft.to+ct))}for(let dt=0;dt<this.children.length;dt+=3)if(this.children[dt]<et&&this.children[dt+1]>g){let ft=this.children[dt]+1;this.children[dt+2].findInner(g-ft,et-ft,ot,ct+ft,ut)}}map(g,et,ot){return this==empty||g.maps.length==0?this:this.mapInner(g,et,0,0,ot||noSpec)}mapInner(g,et,ot,ct,ut){let dt;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft].map(g,ot,ct);St&&St.type.valid(et,St)?(dt||(dt=[])).push(St):ut.onRemove&&ut.onRemove(this.local[ft].spec)}return this.children.length?mapChildren(this.children,dt||[],g,et,ot,ct,ut):dt?new DecorationSet(dt.sort(byPos),none):empty}add(g,et){return et.length?this==empty?DecorationSet.create(g,et):this.addInner(g,et,0):this}addInner(g,et,ot){let ct,ut=0;g.forEach((ft,St)=>{let kt=St+ot,Tt;if(Tt=takeSpansForNode(et,ft,kt)){for(ct||(ct=this.children.slice());ut<ct.length&&ct[ut]<St;)ut+=3;ct[ut]==St?ct[ut+2]=ct[ut+2].addInner(ft,Tt,kt+1):ct.splice(ut,0,St,St+ft.nodeSize,buildTree(Tt,ft,kt+1,noSpec)),ut+=3}});let dt=moveSpans(ut?withoutNulls(et):et,-ot);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||dt.splice(ft--,1);return new DecorationSet(dt.length?this.local.concat(dt).sort(byPos):this.local,ct||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,et){let ot=this.children,ct=this.local;for(let ut=0;ut<ot.length;ut+=3){let dt,ft=ot[ut]+et,St=ot[ut+1]+et;for(let Tt=0,Rt;Tt<g.length;Tt++)(Rt=g[Tt])&&Rt.from>ft&&Rt.to<St&&(g[Tt]=null,(dt||(dt=[])).push(Rt));if(!dt)continue;ot==this.children&&(ot=this.children.slice());let kt=ot[ut+2].removeInner(dt,ft+1);kt!=empty?ot[ut+2]=kt:(ot.splice(ut,3),ut-=3)}if(ct.length){for(let ut=0,dt;ut<g.length;ut++)if(dt=g[ut])for(let ft=0;ft<ct.length;ft++)ct[ft].eq(dt,et)&&(ct==this.local&&(ct=this.local.slice()),ct.splice(ft--,1))}return ot==this.children&&ct==this.local?this:ct.length||ot.length?new DecorationSet(ct,ot):empty}forChild(g,et){if(this==empty)return this;if(et.isLeaf)return DecorationSet.empty;let ot,ct;for(let ft=0;ft<this.children.length;ft+=3)if(this.children[ft]>=g){this.children[ft]==g&&(ot=this.children[ft+2]);break}let ut=g+1,dt=ut+et.content.size;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft];if(St.from<dt&&St.to>ut&&St.type instanceof InlineType){let kt=Math.max(ut,St.from)-ut,Tt=Math.min(dt,St.to)-ut;kt<Tt&&(ct||(ct=[])).push(St.copy(kt,Tt))}}if(ct){let ft=new DecorationSet(ct.sort(byPos),none);return ot?new DecorationGroup([ft,ot]):ft}return ot||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let et=0;et<this.local.length;et++)if(!this.local[et].eq(g.local[et]))return!1;for(let et=0;et<this.children.length;et+=3)if(this.children[et]!=g.children[et]||this.children[et+1]!=g.children[et+1]||!this.children[et+2].eq(g.children[et+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let et=[];for(let ot=0;ot<this.local.length;ot++)this.local[ot].type instanceof InlineType||et.push(this.local[ot]);return et}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,et){const ot=this.members.map(ct=>ct.map(g,et,noSpec));return DecorationGroup.from(ot)}forChild(g,et){if(et.isLeaf)return DecorationSet.empty;let ot=[];for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].forChild(g,et);ut!=empty&&(ut instanceof DecorationGroup?ot=ot.concat(ut.members):ot.push(ut))}return DecorationGroup.from(ot)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let et=0;et<this.members.length;et++)if(!this.members[et].eq(g.members[et]))return!1;return!0}locals(g){let et,ot=!0;for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].localsInner(g);if(ut.length)if(!et)et=ut;else{ot&&(et=et.slice(),ot=!1);for(let dt=0;dt<ut.length;dt++)et.push(ut[dt])}}return et?removeOverlap(ot?et:et.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(et=>et instanceof DecorationSet)?g:g.reduce((et,ot)=>et.concat(ot instanceof DecorationSet?ot:ot.members),[]))}}forEachSet(g){for(let et=0;et<this.members.length;et++)this.members[et].forEachSet(g)}}function mapChildren(it,g,et,ot,ct,ut,dt){let ft=it.slice();for(let kt=0,Tt=ut;kt<et.maps.length;kt++){let Rt=0;et.maps[kt].forEach((jt,Ft,$t,zt)=>{let Ut=zt-$t-(Ft-jt);for(let Bt=0;Bt<ft.length;Bt+=3){let Ht=ft[Bt+1];if(Ht<0||jt>Ht+Tt-Rt)continue;let Jt=ft[Bt]+Tt-Rt;Ft>=Jt?ft[Bt+1]=jt<=Jt?-2:-1:jt>=Tt&&Ut&&(ft[Bt]+=Ut,ft[Bt+1]+=Ut)}Rt+=Ut}),Tt=et.maps[kt].map(Tt,-1)}let St=!1;for(let kt=0;kt<ft.length;kt+=3)if(ft[kt+1]<0){if(ft[kt+1]==-2){St=!0,ft[kt+1]=-1;continue}let Tt=et.map(it[kt]+ut),Rt=Tt-ct;if(Rt<0||Rt>=ot.content.size){St=!0;continue}let jt=et.map(it[kt+1]+ut,-1),Ft=jt-ct,{index:$t,offset:zt}=ot.content.findIndex(Rt),Ut=ot.maybeChild($t);if(Ut&&zt==Rt&&zt+Ut.nodeSize==Ft){let Bt=ft[kt+2].mapInner(et,Ut,Tt+1,it[kt]+ut+1,dt);Bt!=empty?(ft[kt]=Rt,ft[kt+1]=Ft,ft[kt+2]=Bt):(ft[kt+1]=-2,St=!0)}else St=!0}if(St){let kt=mapAndGatherRemainingDecorations(ft,it,g,et,ct,ut,dt),Tt=buildTree(kt,ot,0,dt);g=Tt.local;for(let Rt=0;Rt<ft.length;Rt+=3)ft[Rt+1]<0&&(ft.splice(Rt,3),Rt-=3);for(let Rt=0,jt=0;Rt<Tt.children.length;Rt+=3){let Ft=Tt.children[Rt];for(;jt<ft.length&&ft[jt]<Ft;)jt+=3;ft.splice(jt,0,Tt.children[Rt],Tt.children[Rt+1],Tt.children[Rt+2])}}return new DecorationSet(g.sort(byPos),ft)}function moveSpans(it,g){if(!g||!it.length)return it;let et=[];for(let ot=0;ot<it.length;ot++){let ct=it[ot];et.push(new Decoration(ct.from+g,ct.to+g,ct.type))}return et}function mapAndGatherRemainingDecorations(it,g,et,ot,ct,ut,dt){function ft(St,kt){for(let Tt=0;Tt<St.local.length;Tt++){let Rt=St.local[Tt].map(ot,ct,kt);Rt?et.push(Rt):dt.onRemove&&dt.onRemove(St.local[Tt].spec)}for(let Tt=0;Tt<St.children.length;Tt+=3)ft(St.children[Tt+2],St.children[Tt]+kt+1)}for(let St=0;St<it.length;St+=3)it[St+1]==-1&&ft(it[St+2],g[St]+ut+1);return et}function takeSpansForNode(it,g,et){if(g.isLeaf)return null;let ot=et+g.nodeSize,ct=null;for(let ut=0,dt;ut<it.length;ut++)(dt=it[ut])&&dt.from>et&&dt.to<ot&&((ct||(ct=[])).push(dt),it[ut]=null);return ct}function withoutNulls(it){let g=[];for(let et=0;et<it.length;et++)it[et]!=null&&g.push(it[et]);return g}function buildTree(it,g,et,ot){let ct=[],ut=!1;g.forEach((ft,St)=>{let kt=takeSpansForNode(it,ft,St+et);if(kt){ut=!0;let Tt=buildTree(kt,ft,et+St+1,ot);Tt!=empty&&ct.push(St,St+ft.nodeSize,Tt)}});let dt=moveSpans(ut?withoutNulls(it):it,-et).sort(byPos);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||(ot.onRemove&&ot.onRemove(dt[ft].spec),dt.splice(ft--,1));return dt.length||ct.length?new DecorationSet(dt,ct):empty}function byPos(it,g){return it.from-g.from||it.to-g.to}function removeOverlap(it){let g=it;for(let et=0;et<g.length-1;et++){let ot=g[et];if(ot.from!=ot.to)for(let ct=et+1;ct<g.length;ct++){let ut=g[ct];if(ut.from==ot.from){ut.to!=ot.to&&(g==it&&(g=it.slice()),g[ct]=ut.copy(ut.from,ot.to),insertAhead(g,ct+1,ut.copy(ot.to,ut.to)));continue}else{ut.from<ot.to&&(g==it&&(g=it.slice()),g[et]=ot.copy(ot.from,ut.from),insertAhead(g,ct,ot.copy(ut.from,ot.to)));break}}}return g}function insertAhead(it,g,et){for(;g<it.length&&byPos(et,it[g])>0;)g++;it.splice(g,0,et)}function viewDecorations(it){let g=[];return it.someProp("decorations",et=>{let ot=et(it.state);ot&&ot!=empty&&g.push(ot)}),it.cursorWrapper&&g.push(DecorationSet.create(it.state.doc,[it.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,et){this.view=g,this.handleDOMChange=et,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(ot=>{for(let ct=0;ct<ot.length;ct++)this.queue.push(ot[ct]);ie$1&&ie_version<=11&&ot.some(ct=>ct.type=="childList"&&ct.removedNodes.length||ct.type=="characterData"&&ct.oldValue.length>ct.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=ot=>{this.queue.push({target:ot.target,type:"characterData",oldValue:ot.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let et=0;et<g.length;et++)this.queue.push(g[et]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let et=new Set,ot;for(let ut=g.focusNode;ut;ut=parentNode(ut))et.add(ut);for(let ut=g.anchorNode;ut;ut=parentNode(ut))if(et.has(ut)){ot=ut;break}let ct=ot&&this.view.docView.nearestDesc(ot);if(ct&&ct.ignoreMutation({type:"selection",target:ot.nodeType==3?ot.parentNode:ot}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let et=this.pendingRecords();et.length&&(this.queue=[]);let ot=g.domSelectionRange(),ct=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(ot)&&hasFocusAndSelection(g)&&!this.ignoreSelectionChange(ot),ut=-1,dt=-1,ft=!1,St=[];if(g.editable)for(let Tt=0;Tt<et.length;Tt++){let Rt=this.registerMutation(et[Tt],St);Rt&&(ut=ut<0?Rt.from:Math.min(Rt.from,ut),dt=dt<0?Rt.to:Math.max(Rt.to,dt),Rt.typeOver&&(ft=!0))}if(gecko&&St.length){let Tt=St.filter(Rt=>Rt.nodeName=="BR");if(Tt.length==2){let[Rt,jt]=Tt;Rt.parentNode&&Rt.parentNode.parentNode==jt.parentNode?jt.remove():Rt.remove()}else{let{focusNode:Rt}=this.currentSelection;for(let jt of Tt){let Ft=jt.parentNode;Ft&&Ft.nodeName=="LI"&&(!Rt||blockParent(g,Rt)!=Ft)&&jt.remove()}}}let kt=null;ut<0&&ct&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(ot)&&(kt=selectionFromDOM(g))&&kt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(ot),g.scrollToSelection()):(ut>-1||ct)&&(ut>-1&&(g.docView.markDirty(ut,dt),checkCSS(g)),this.handleDOMChange(ut,dt,ft,St),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(ot)||selectionToDOM(g),this.currentSelection.set(ot))}registerMutation(g,et){if(et.indexOf(g.target)>-1)return null;let ot=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(ot==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!ot||ot.ignoreMutation(g))return null;if(g.type=="childList"){for(let Tt=0;Tt<g.addedNodes.length;Tt++){let Rt=g.addedNodes[Tt];et.push(Rt),Rt.nodeType==3&&(this.lastChangedTextNode=Rt)}if(ot.contentDOM&&ot.contentDOM!=ot.dom&&!ot.contentDOM.contains(g.target))return{from:ot.posBefore,to:ot.posAfter};let ct=g.previousSibling,ut=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let Tt=0;Tt<g.addedNodes.length;Tt++){let{previousSibling:Rt,nextSibling:jt}=g.addedNodes[Tt];(!Rt||Array.prototype.indexOf.call(g.addedNodes,Rt)<0)&&(ct=Rt),(!jt||Array.prototype.indexOf.call(g.addedNodes,jt)<0)&&(ut=jt)}let dt=ct&&ct.parentNode==g.target?domIndex(ct)+1:0,ft=ot.localPosFromDOM(g.target,dt,-1),St=ut&&ut.parentNode==g.target?domIndex(ut):g.target.childNodes.length,kt=ot.localPosFromDOM(g.target,St,1);return{from:ft,to:kt}}else return g.type=="attributes"?{from:ot.posAtStart-ot.border,to:ot.posAtEnd+ot.border}:(this.lastChangedTextNode=g.target,{from:ot.posAtStart,to:ot.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(it){if(!cssChecked.has(it)&&(cssChecked.set(it,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(it.dom).whiteSpace)!==-1)){if(it.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(it,g){let et=g.startContainer,ot=g.startOffset,ct=g.endContainer,ut=g.endOffset,dt=it.domAtPos(it.state.selection.anchor);return isEquivalentPosition(dt.node,dt.offset,ct,ut)&&([et,ot,ct,ut]=[ct,ut,et,ot]),{anchorNode:et,anchorOffset:ot,focusNode:ct,focusOffset:ut}}function safariShadowSelectionRange(it,g){if(g.getComposedRanges){let ct=g.getComposedRanges(it.root)[0];if(ct)return rangeToSelectionRange(it,ct)}let et;function ot(ct){ct.preventDefault(),ct.stopImmediatePropagation(),et=ct.getTargetRanges()[0]}return it.dom.addEventListener("beforeinput",ot,!0),document.execCommand("indent"),it.dom.removeEventListener("beforeinput",ot,!0),et?rangeToSelectionRange(it,et):null}function blockParent(it,g){for(let et=g.parentNode;et&&et!=it.dom;et=et.parentNode){let ot=it.docView.nearestDesc(et,!0);if(ot&&ot.node.isBlock)return et}return null}function parseBetween(it,g,et){let{node:ot,fromOffset:ct,toOffset:ut,from:dt,to:ft}=it.docView.parseRange(g,et),St=it.domSelectionRange(),kt,Tt=St.anchorNode;if(Tt&&it.dom.contains(Tt.nodeType==1?Tt:Tt.parentNode)&&(kt=[{node:Tt,offset:St.anchorOffset}],selectionCollapsed(St)||kt.push({node:St.focusNode,offset:St.focusOffset})),chrome&&it.input.lastKeyCode===8)for(let Ut=ut;Ut>ct;Ut--){let Bt=ot.childNodes[Ut-1],Ht=Bt.pmViewDesc;if(Bt.nodeName=="BR"&&!Ht){ut=Ut;break}if(!Ht||Ht.size)break}let Rt=it.state.doc,jt=it.someProp("domParser")||DOMParser.fromSchema(it.state.schema),Ft=Rt.resolve(dt),$t=null,zt=jt.parse(ot,{topNode:Ft.parent,topMatch:Ft.parent.contentMatchAt(Ft.index()),topOpen:!0,from:ct,to:ut,preserveWhitespace:Ft.parent.type.whitespace=="pre"?"full":!0,findPositions:kt,ruleFromNode,context:Ft});if(kt&&kt[0].pos!=null){let Ut=kt[0].pos,Bt=kt[1]&&kt[1].pos;Bt==null&&(Bt=Ut),$t={anchor:Ut+dt,head:Bt+dt}}return{doc:zt,sel:$t,from:dt,to:ft}}function ruleFromNode(it){let g=it.pmViewDesc;if(g)return g.parseRule();if(it.nodeName=="BR"&&it.parentNode){if(safari&&/^(ul|ol)$/i.test(it.parentNode.nodeName)){let et=document.createElement("div");return et.appendChild(document.createElement("li")),{skip:et}}else if(it.parentNode.lastChild==it||safari&&/^(tr|table)$/i.test(it.parentNode.nodeName))return{ignore:!0}}else if(it.nodeName=="IMG"&&it.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(it,g,et,ot,ct){let ut=it.input.compositionPendingChanges||(it.composing?it.input.compositionID:0);if(it.input.compositionPendingChanges=0,g<0){let rn=it.input.lastSelectionTime>Date.now()-50?it.input.lastSelectionOrigin:null,on=selectionFromDOM(it,rn);if(on&&!it.state.selection.eq(on)){if(chrome&&android&&it.input.lastKeyCode===13&&Date.now()-100<it.input.lastKeyCodeTime&&it.someProp("handleKeyDown",dn=>dn(it,keyEvent(13,"Enter"))))return;let pn=it.state.tr.setSelection(on);rn=="pointer"?pn.setMeta("pointer",!0):rn=="key"&&pn.scrollIntoView(),ut&&pn.setMeta("composition",ut),it.dispatch(pn)}return}let dt=it.state.doc.resolve(g),ft=dt.sharedDepth(et);g=dt.before(ft+1),et=it.state.doc.resolve(et).after(ft+1);let St=it.state.selection,kt=parseBetween(it,g,et),Tt=it.state.doc,Rt=Tt.slice(kt.from,kt.to),jt,Ft;it.input.lastKeyCode===8&&Date.now()-100<it.input.lastKeyCodeTime?(jt=it.state.selection.to,Ft="end"):(jt=it.state.selection.from,Ft="start"),it.input.lastKeyCode=null;let $t=findDiff(Rt.content,kt.doc.content,kt.from,jt,Ft);if($t&&it.input.domChangeCount++,(ios&&it.input.lastIOSEnter>Date.now()-225||android)&&ct.some(rn=>rn.nodeType==1&&!isInline.test(rn.nodeName))&&(!$t||$t.endA>=$t.endB)&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(!$t)if(ot&&St instanceof TextSelection&&!St.empty&&St.$head.sameParent(St.$anchor)&&!it.composing&&!(kt.sel&&kt.sel.anchor!=kt.sel.head))$t={start:St.from,endA:St.to,endB:St.to};else{if(kt.sel){let rn=resolveSelection(it,it.state.doc,kt.sel);if(rn&&!rn.eq(it.state.selection)){let on=it.state.tr.setSelection(rn);ut&&on.setMeta("composition",ut),it.dispatch(on)}}return}it.state.selection.from<it.state.selection.to&&$t.start==$t.endB&&it.state.selection instanceof TextSelection&&($t.start>it.state.selection.from&&$t.start<=it.state.selection.from+2&&it.state.selection.from>=kt.from?$t.start=it.state.selection.from:$t.endA<it.state.selection.to&&$t.endA>=it.state.selection.to-2&&it.state.selection.to<=kt.to&&($t.endB+=it.state.selection.to-$t.endA,$t.endA=it.state.selection.to)),ie$1&&ie_version<=11&&$t.endB==$t.start+1&&$t.endA==$t.start&&$t.start>kt.from&&kt.doc.textBetween($t.start-kt.from-1,$t.start-kt.from+1)==" "&&($t.start--,$t.endA--,$t.endB--);let zt=kt.doc.resolveNoCache($t.start-kt.from),Ut=kt.doc.resolveNoCache($t.endB-kt.from),Bt=Tt.resolve($t.start),Ht=zt.sameParent(Ut)&&zt.parent.inlineContent&&Bt.end()>=$t.endA;if((ios&&it.input.lastIOSEnter>Date.now()-225&&(!Ht||ct.some(rn=>rn.nodeName=="DIV"||rn.nodeName=="P"))||!Ht&&zt.pos<kt.doc.content.size&&(!zt.sameParent(Ut)||!zt.parent.inlineContent)&&zt.pos<Ut.pos&&!/\S/.test(kt.doc.textBetween(zt.pos,Ut.pos,"","")))&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(it.state.selection.anchor>$t.start&&looksLikeBackspace(Tt,$t.start,$t.endA,zt,Ut)&&it.someProp("handleKeyDown",rn=>rn(it,keyEvent(8,"Backspace")))){android&&chrome&&it.domObserver.suppressSelectionUpdates();return}chrome&&$t.endB==$t.start&&(it.input.lastChromeDelete=Date.now()),android&&!Ht&&zt.start()!=Ut.start()&&Ut.parentOffset==0&&zt.depth==Ut.depth&&kt.sel&&kt.sel.anchor==kt.sel.head&&kt.sel.head==$t.endA&&($t.endB-=2,Ut=kt.doc.resolveNoCache($t.endB-kt.from),setTimeout(()=>{it.someProp("handleKeyDown",function(rn){return rn(it,keyEvent(13,"Enter"))})},20));let Jt=$t.start,Zt=$t.endA,tn=rn=>{let on=rn||it.state.tr.replace(Jt,Zt,kt.doc.slice($t.start-kt.from,$t.endB-kt.from));if(kt.sel){let pn=resolveSelection(it,on.doc,kt.sel);pn&&!(chrome&&it.composing&&pn.empty&&($t.start!=$t.endB||it.input.lastChromeDelete<Date.now()-100)&&(pn.head==Jt||pn.head==on.mapping.map(Zt)-1)||ie$1&&pn.empty&&pn.head==Jt)&&on.setSelection(pn)}return ut&&on.setMeta("composition",ut),on.scrollIntoView()},nn;if(Ht)if(zt.pos==Ut.pos){ie$1&&ie_version<=11&&zt.parentOffset==0&&(it.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(it),20));let rn=tn(it.state.tr.delete(Jt,Zt)),on=Tt.resolve($t.start).marksAcross(Tt.resolve($t.endA));on&&rn.ensureMarks(on),it.dispatch(rn)}else if($t.endA==$t.endB&&(nn=isMarkChange(zt.parent.content.cut(zt.parentOffset,Ut.parentOffset),Bt.parent.content.cut(Bt.parentOffset,$t.endA-Bt.start())))){let rn=tn(it.state.tr);nn.type=="add"?rn.addMark(Jt,Zt,nn.mark):rn.removeMark(Jt,Zt,nn.mark),it.dispatch(rn)}else if(zt.parent.child(zt.index()).isText&&zt.index()==Ut.index()-(Ut.textOffset?0:1)){let rn=zt.parent.textBetween(zt.parentOffset,Ut.parentOffset),on=()=>tn(it.state.tr.insertText(rn,Jt,Zt));it.someProp("handleTextInput",pn=>pn(it,Jt,Zt,rn,on))||it.dispatch(on())}else it.dispatch(tn());else it.dispatch(tn())}function resolveSelection(it,g,et){return Math.max(et.anchor,et.head)>g.content.size?null:selectionBetween(it,g.resolve(et.anchor),g.resolve(et.head))}function isMarkChange(it,g){let et=it.firstChild.marks,ot=g.firstChild.marks,ct=et,ut=ot,dt,ft,St;for(let Tt=0;Tt<ot.length;Tt++)ct=ot[Tt].removeFromSet(ct);for(let Tt=0;Tt<et.length;Tt++)ut=et[Tt].removeFromSet(ut);if(ct.length==1&&ut.length==0)ft=ct[0],dt="add",St=Tt=>Tt.mark(ft.addToSet(Tt.marks));else if(ct.length==0&&ut.length==1)ft=ut[0],dt="remove",St=Tt=>Tt.mark(ft.removeFromSet(Tt.marks));else return null;let kt=[];for(let Tt=0;Tt<g.childCount;Tt++)kt.push(St(g.child(Tt)));if(Fragment.from(kt).eq(it))return{mark:ft,type:dt}}function looksLikeBackspace(it,g,et,ot,ct){if(et-g<=ct.pos-ot.pos||skipClosingAndOpening(ot,!0,!1)<ct.pos)return!1;let ut=it.resolve(g);if(!ot.parent.isTextblock){let ft=ut.nodeAfter;return ft!=null&&et==g+ft.nodeSize}if(ut.parentOffset<ut.parent.content.size||!ut.parent.isTextblock)return!1;let dt=it.resolve(skipClosingAndOpening(ut,!0,!0));return!dt.parent.isTextblock||dt.pos>et||skipClosingAndOpening(dt,!0,!1)<et?!1:ot.parent.content.cut(ot.parentOffset).eq(dt.parent.content)}function skipClosingAndOpening(it,g,et){let ot=it.depth,ct=g?it.end():it.pos;for(;ot>0&&(g||it.indexAfter(ot)==it.node(ot).childCount);)ot--,ct++,g=!1;if(et){let ut=it.node(ot).maybeChild(it.indexAfter(ot));for(;ut&&!ut.isLeaf;)ut=ut.firstChild,ct++}return ct}function findDiff(it,g,et,ot,ct){let ut=it.findDiffStart(g,et);if(ut==null)return null;let{a:dt,b:ft}=it.findDiffEnd(g,et+it.size,et+g.size);if(ct=="end"){let St=Math.max(0,ut-Math.min(dt,ft));ot-=dt+St-ut}if(dt<ut&&it.size<g.size){let St=ot<=ut&&ot>=dt?ut-ot:0;ut-=St,ut&&ut<g.size&&isSurrogatePair(g.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),ft=ut+(ft-dt),dt=ut}else if(ft<ut){let St=ot<=ut&&ot>=ft?ut-ot:0;ut-=St,ut&&ut<it.size&&isSurrogatePair(it.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),dt=ut+(dt-ft),ft=ut}return{start:ut,endA:dt,endB:ft}}function isSurrogatePair(it){if(it.length!=2)return!1;let g=it.charCodeAt(0),et=it.charCodeAt(1);return g>=56320&&g<=57343&&et>=55296&&et<=56319}class EditorView{constructor(g,et){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=et,this.state=et.state,this.directPlugins=et.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(ot,ct,ut,dt)=>readDOMChange(this,ot,ct,ut,dt)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let et in g)this._props[et]=g[et];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let et=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,et)}setProps(g){let et={};for(let ot in this._props)et[ot]=this._props[ot];et.state=this.state;for(let ot in g)et[ot]=g[ot];this.update(et)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,et){var ot;let ct=this.state,ut=!1,dt=!1;g.storedMarks&&this.composing&&(clearComposition(this),dt=!0),this.state=g;let ft=ct.plugins!=g.plugins||this._props.plugins!=et.plugins;if(ft||this._props.plugins!=et.plugins||this._props.nodeViews!=et.nodeViews){let Ft=buildNodeViews(this);changedNodeViews(Ft,this.nodeViews)&&(this.nodeViews=Ft,ut=!0)}(ft||et.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let St=viewDecorations(this),kt=computeDocDeco(this),Tt=ct.plugins!=g.plugins&&!ct.doc.eq(g.doc)?"reset":g.scrollToSelection>ct.scrollToSelection?"to selection":"preserve",Rt=ut||!this.docView.matchesNode(g.doc,kt,St);(Rt||!g.selection.eq(ct.selection))&&(dt=!0);let jt=Tt=="preserve"&&dt&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(dt){this.domObserver.stop();let Ft=Rt&&(ie$1||chrome)&&!this.composing&&!ct.selection.empty&&!g.selection.empty&&selectionContextChanged(ct.selection,g.selection);if(Rt){let $t=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(ut||!this.docView.update(g.doc,kt,St,this))&&(this.docView.updateOuterDeco(kt),this.docView.destroy(),this.docView=docViewDesc(g.doc,kt,St,this.dom,this)),$t&&!this.trackWrites&&(Ft=!0)}Ft||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,Ft):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ct),!((ot=this.dragging)===null||ot===void 0)&&ot.node&&!ct.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,ct),Tt=="reset"?this.dom.scrollTop=0:Tt=="to selection"?this.scrollToSelection():jt&&resetScrollPos(jt)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!(!g||!this.dom.contains(g.nodeType==1?g:g.parentNode))){if(!this.someProp("handleScrollToSelection",et=>et(this)))if(this.state.selection instanceof NodeSelection){let et=this.docView.domAfterPos(this.state.selection.from);et.nodeType==1&&scrollRectIntoView(this,et.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let et=0;et<this.directPlugins.length;et++){let ot=this.directPlugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}for(let et=0;et<this.state.plugins.length;et++){let ot=this.state.plugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}}else for(let et=0;et<this.pluginViews.length;et++){let ot=this.pluginViews[et];ot.update&&ot.update(this,g)}}updateDraggedNode(g,et){let ot=g.node,ct=-1;if(this.state.doc.nodeAt(ot.from)==ot.node)ct=ot.from;else{let ut=ot.from+(this.state.doc.content.size-et.doc.content.size);(ut>0&&this.state.doc.nodeAt(ut))==ot.node&&(ct=ut)}this.dragging=new Dragging(g.slice,g.move,ct<0?void 0:NodeSelection.create(this.state.doc,ct))}someProp(g,et){let ot=this._props&&this._props[g],ct;if(ot!=null&&(ct=et?et(ot):ot))return ct;for(let dt=0;dt<this.directPlugins.length;dt++){let ft=this.directPlugins[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}let ut=this.state.plugins;if(ut)for(let dt=0;dt<ut.length;dt++){let ft=ut[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let et=this.dom.parentNode;et;et=et.parentNode)if(et.nodeType==9||et.nodeType==11&&et.host)return et.getSelection||(Object.getPrototypeOf(et).getSelection=()=>et.ownerDocument.getSelection()),this._root=et}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,et=1){return coordsAtPos(this,g,et)}domAtPos(g,et=0){return this.docView.domFromPos(g,et)}nodeDOM(g){let et=this.docView.descAt(g);return et?et.nodeDOM:null}posAtDOM(g,et,ot=-1){let ct=this.docView.posFromDOM(g,et,ot);if(ct==null)throw new RangeError("DOM position not inside the editor");return ct}endOfTextblock(g,et){return endOfTextblock(this,et||this.state,g)}pasteHTML(g,et){return doPaste(this,"",g,!1,et||new ClipboardEvent("paste"))}pasteText(g,et){return doPaste(this,g,null,!0,et||new ClipboardEvent("paste"))}serializeForClipboard(g){return serializeForClipboard(this,g)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(it){let g=this._props.dispatchTransaction;g?g.call(this,it):this.updateState(this.state.apply(it))};function computeDocDeco(it){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(it.editable),it.someProp("attributes",et=>{if(typeof et=="function"&&(et=et(it.state)),et)for(let ot in et)ot=="class"?g.class+=" "+et[ot]:ot=="style"?g.style=(g.style?g.style+";":"")+et[ot]:!g[ot]&&ot!="contenteditable"&&ot!="nodeName"&&(g[ot]=String(et[ot]))}),g.translate||(g.translate="no"),[Decoration.node(0,it.state.doc.content.size,g)]}function updateCursorWrapper(it){if(it.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),it.cursorWrapper={dom:g,deco:Decoration.widget(it.state.selection.from,g,{raw:!0,marks:it.markCursor})}}else it.cursorWrapper=null}function getEditable(it){return!it.someProp("editable",g=>g(it.state)===!1)}function selectionContextChanged(it,g){let et=Math.min(it.$anchor.sharedDepth(it.head),g.$anchor.sharedDepth(g.head));return it.$anchor.start(et)!=g.$anchor.start(et)}function buildNodeViews(it){let g=Object.create(null);function et(ot){for(let ct in ot)Object.prototype.hasOwnProperty.call(g,ct)||(g[ct]=ot[ct])}return it.someProp("nodeViews",et),it.someProp("markViews",et),g}function changedNodeViews(it,g){let et=0,ot=0;for(let ct in it){if(it[ct]!=g[ct])return!0;et++}for(let ct in g)ot++;return et!=ot}function checkStateComponent(it){if(it.spec.state||it.spec.filterTransaction||it.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(it){var g=mac$1&&it.metaKey&&it.shiftKey&&!it.ctrlKey&&!it.altKey||ie&&it.shiftKey&&it.key&&it.key.length==1||it.key=="Unidentified",et=!g&&it.key||(it.shiftKey?shift:base)[it.keyCode]||it.key||"Unidentified";return et=="Esc"&&(et="Escape"),et=="Del"&&(et="Delete"),et=="Left"&&(et="ArrowLeft"),et=="Up"&&(et="ArrowUp"),et=="Right"&&(et="ArrowRight"),et=="Down"&&(et="ArrowDown"),et}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(it){let g=it.split(/-(?!$)/),et=g[g.length-1];et=="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft++){let St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))mac?dt=!0:ct=!0;else throw new Error("Unrecognized modifier name: "+St)}return ot&&(et="Alt-"+et),ct&&(et="Ctrl-"+et),dt&&(et="Meta-"+et),ut&&(et="Shift-"+et),et}function normalize(it){let g=Object.create(null);for(let et in it)g[normalizeKeyName$1(et)]=it[et];return g}function modifiers(it,g,et=!0){return g.altKey&&(it="Alt-"+it),g.ctrlKey&&(it="Ctrl-"+it),g.metaKey&&(it="Meta-"+it),et&&g.shiftKey&&(it="Shift-"+it),it}function keymap(it){return new Plugin({props:{handleKeyDown:keydownHandler(it)}})}function keydownHandler(it){let g=normalize(it);return function(et,ot){let ct=keyName(ot),ut,dt=g[modifiers(ct,ot)];if(dt&&dt(et.state,et.dispatch,et))return!0;if(ct.length==1&&ct!=" "){if(ot.shiftKey){let ft=g[modifiers(ct,ot,!1)];if(ft&&ft(et.state,et.dispatch,et))return!0}if((ot.altKey||ot.metaKey||ot.ctrlKey)&&!(windows&&ot.ctrlKey&&ot.altKey)&&(ut=base[ot.keyCode])&&ut!=ct){let ft=g[modifiers(ut,ot)];if(ft&&ft(et.state,et.dispatch,et))return!0}}return!1}}var __defProp$2=Object.defineProperty,__export$1=(it,g)=>{for(var et in g)__defProp$2(it,et,{get:g[et],enumerable:!0})};function createChainableState(it){const{state:g,transaction:et}=it;let{selection:ot}=et,{doc:ct}=et,{storedMarks:ut}=et;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return ut},get selection(){return ot},get doc(){return ct},get tr(){return ot=et.selection,ct=et.doc,ut=et.storedMarks,et}}}var CommandManager$1=class{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:et,state:ot}=this,{view:ct}=et,{tr:ut}=ot,dt=this.buildProps(ut);return Object.fromEntries(Object.entries(g).map(([ft,St])=>[ft,(...Tt)=>{const Rt=St(...Tt)(dt);return!ut.getMeta("preventDispatch")&&!this.hasCustomState&&ct.dispatch(ut),Rt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft=[],St=!!g,kt=g||ut.tr,Tt=()=>(!St&&et&&!kt.getMeta("preventDispatch")&&!this.hasCustomState&&dt.dispatch(kt),ft.every(jt=>jt===!0)),Rt={...Object.fromEntries(Object.entries(ot).map(([jt,Ft])=>[jt,(...zt)=>{const Ut=this.buildProps(kt,et),Bt=Ft(...zt)(Ut);return ft.push(Bt),Rt}])),run:Tt};return Rt}createCan(g){const{rawCommands:et,state:ot}=this,ct=!1,ut=g||ot.tr,dt=this.buildProps(ut,ct);return{...Object.fromEntries(Object.entries(et).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)({...dt,dispatch:void 0})])),chain:()=>this.createChain(ut,ct)}}buildProps(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft={tr:g,editor:ct,view:dt,state:createChainableState({state:ut,transaction:g}),dispatch:et?()=>{}:void 0,chain:()=>this.createChain(g,et),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(ot).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)(ft)]))}};return ft}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:it,view:g})=>(requestAnimationFrame(()=>{var et;it.isDestroyed||(g.dom.blur(),(et=window==null?void 0:window.getSelection())==null||et.removeAllRanges())}),!0),clearContent=(it=!0)=>({commands:g})=>g.setContent("",{emitUpdate:it}),clearNodes=()=>({state:it,tr:g,dispatch:et})=>{const{selection:ot}=g,{ranges:ct}=ot;return et&&ct.forEach(({$from:ut,$to:dt})=>{it.doc.nodesBetween(ut.pos,dt.pos,(ft,St)=>{if(ft.type.isText)return;const{doc:kt,mapping:Tt}=g,Rt=kt.resolve(Tt.map(St)),jt=kt.resolve(Tt.map(St+ft.nodeSize)),Ft=Rt.blockRange(jt);if(!Ft)return;const $t=liftTarget(Ft);if(ft.type.isTextblock){const{defaultType:zt}=Rt.parent.contentMatchAt(Rt.index());g.setNodeMarkup(Ft.start,zt)}($t||$t===0)&&g.lift(Ft,$t)})}),!0},command=it=>g=>it(g),createParagraphNear=()=>({state:it,dispatch:g})=>createParagraphNear$1(it,g),cut=(it,g)=>({editor:et,tr:ot})=>{const{state:ct}=et,ut=ct.doc.slice(it.from,it.to);ot.deleteRange(it.from,it.to);const dt=ot.mapping.map(g);return ot.insert(dt,ut.content),ot.setSelection(new TextSelection(ot.doc.resolve(Math.max(dt-1,0)))),!0},deleteCurrentNode=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,ot=et.$anchor.node();if(ot.content.size>0)return!1;const ct=it.selection.$anchor;for(let ut=ct.depth;ut>0;ut-=1)if(ct.node(ut).type===ot.type){if(g){const ft=ct.before(ut),St=ct.after(ut);it.delete(ft,St).scrollIntoView()}return!0}return!1};function getNodeType(it,g){if(typeof it=="string"){if(!g.nodes[it])throw Error(`There is no node type named '${it}'. Maybe you forgot to add the extension?`);return g.nodes[it]}return it}var deleteNode=it=>({tr:g,state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema),ut=g.selection.$anchor;for(let dt=ut.depth;dt>0;dt-=1)if(ut.node(dt).type===ct){if(ot){const St=ut.before(dt),kt=ut.after(dt);g.delete(St,kt).scrollIntoView()}return!0}return!1},deleteRange=it=>({tr:g,dispatch:et})=>{const{from:ot,to:ct}=it;return et&&g.delete(ot,ct),!0},deleteSelection=()=>({state:it,dispatch:g})=>deleteSelection$1(it,g),enter=()=>({commands:it})=>it.keyboardShortcut("Enter"),exitCode=()=>({state:it,dispatch:g})=>exitCode$1(it,g);function isRegExp(it){return Object.prototype.toString.call(it)==="[object RegExp]"}function objectIncludes(it,g,et={strict:!0}){const ot=Object.keys(g);return ot.length?ot.every(ct=>et.strict?g[ct]===it[ct]:isRegExp(g[ct])?g[ct].test(it[ct]):g[ct]===it[ct]):!0}function findMarkInSet(it,g,et={}){return it.find(ot=>ot.type===g&&objectIncludes(Object.fromEntries(Object.keys(et).map(ct=>[ct,ot.attrs[ct]])),et))}function isMarkInSet(it,g,et={}){return!!findMarkInSet(it,g,et)}function getMarkRange(it,g,et){var ot;if(!it||!g)return;let ct=it.parent.childAfter(it.parentOffset);if((!ct.node||!ct.node.marks.some(Tt=>Tt.type===g))&&(ct=it.parent.childBefore(it.parentOffset)),!ct.node||!ct.node.marks.some(Tt=>Tt.type===g)||(et=et||((ot=ct.node.marks[0])==null?void 0:ot.attrs),!findMarkInSet([...ct.node.marks],g,et)))return;let dt=ct.index,ft=it.start()+ct.offset,St=dt+1,kt=ft+ct.node.nodeSize;for(;dt>0&&isMarkInSet([...it.parent.child(dt-1).marks],g,et);)dt-=1,ft-=it.parent.child(dt).nodeSize;for(;St<it.parent.childCount&&isMarkInSet([...it.parent.child(St).marks],g,et);)kt+=it.parent.child(St).nodeSize,St+=1;return{from:ft,to:kt}}function getMarkType(it,g){if(typeof it=="string"){if(!g.marks[it])throw Error(`There is no mark type named '${it}'. Maybe you forgot to add the extension?`);return g.marks[it]}return it}var extendMarkRange=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const ut=getMarkType(it,ot.schema),{doc:dt,selection:ft}=et,{$from:St,from:kt,to:Tt}=ft;if(ct){const Rt=getMarkRange(St,ut,g);if(Rt&&Rt.from<=kt&&Rt.to>=Tt){const jt=TextSelection.create(dt,Rt.from,Rt.to);et.setSelection(jt)}}return!0},first=it=>g=>{const et=typeof it=="function"?it(g):it;for(let ot=0;ot<et.length;ot+=1)if(et[ot](g))return!0;return!1};function isTextSelection(it){return it instanceof TextSelection}function minMax(it=0,g=0,et=0){return Math.min(Math.max(it,g),et)}function resolveFocusPosition(it,g=null){if(!g)return null;const et=Selection.atStart(it),ot=Selection.atEnd(it);if(g==="start"||g===!0)return et;if(g==="end")return ot;const ct=et.from,ut=ot.to;return g==="all"?TextSelection.create(it,minMax(0,ct,ut),minMax(it.content.size,ct,ut)):TextSelection.create(it,minMax(g,ct,ut),minMax(g,ct,ut))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(it=null,g={})=>({editor:et,view:ot,tr:ct,dispatch:ut})=>{g={scrollIntoView:!0,...g};const dt=()=>{(isiOS()||isAndroid())&&ot.dom.focus(),requestAnimationFrame(()=>{et.isDestroyed||(ot.focus(),g!=null&&g.scrollIntoView&&et.commands.scrollIntoView())})};if(ot.hasFocus()&&it===null||it===!1)return!0;if(ut&&it===null&&!isTextSelection(et.state.selection))return dt(),!0;const ft=resolveFocusPosition(ct.doc,it)||et.state.selection,St=et.state.selection.eq(ft);return ut&&(St||ct.setSelection(ft),St&&ct.storedMarks&&ct.setStoredMarks(ct.storedMarks),dt()),!0},forEach=(it,g)=>et=>it.every((ot,ct)=>g(ot,{...et,index:ct})),insertContent=(it,g)=>({tr:et,commands:ot})=>ot.insertContentAt({from:et.selection.from,to:et.selection.to},it,g),removeWhitespaces=it=>{const g=it.childNodes;for(let et=g.length-1;et>=0;et-=1){const ot=g[et];ot.nodeType===3&&ot.nodeValue&&/^(\n\s\s|\n)$/.test(ot.nodeValue)?it.removeChild(ot):ot.nodeType===1&&removeWhitespaces(ot)}return it};function elementFromString(it){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const g=`<body>${it}</body>`,et=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(et)}function createNodeFromContent(it,g,et){if(it instanceof Node$2||it instanceof Fragment)return it;et={slice:!0,parseOptions:{},...et};const ot=typeof it=="object"&&it!==null,ct=typeof it=="string";if(ot)try{if(Array.isArray(it)&&it.length>0)return Fragment.fromArray(it.map(ft=>g.nodeFromJSON(ft)));const dt=g.nodeFromJSON(it);return et.errorOnInvalidContent&&dt.check(),dt}catch(ut){if(et.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:ut});return console.warn("[tiptap warn]: Invalid content.","Passed value:",it,"Error:",ut),createNodeFromContent("",g,et)}if(ct){if(et.errorOnInvalidContent){let dt=!1,ft="";const St=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:kt=>(dt=!0,ft=typeof kt=="string"?kt:kt.outerHTML,null)}]}})});if(et.slice?DOMParser.fromSchema(St).parseSlice(elementFromString(it),et.parseOptions):DOMParser.fromSchema(St).parse(elementFromString(it),et.parseOptions),et.errorOnInvalidContent&&dt)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ft}`)})}const ut=DOMParser.fromSchema(g);return et.slice?ut.parseSlice(elementFromString(it),et.parseOptions).content:ut.parse(elementFromString(it),et.parseOptions)}return createNodeFromContent("",g,et)}function selectionToInsertionEnd(it,g,et){const ot=it.steps.length-1;if(ot<g)return;const ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;const ut=it.mapping.maps[ot];let dt=0;ut.forEach((ft,St,kt,Tt)=>{dt===0&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}var isFragment=it=>!("type"in it),insertContentAt=(it,g,et)=>({tr:ot,dispatch:ct,editor:ut})=>{var dt;if(ct){et={parseOptions:ut.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...et};let ft;const St=Ut=>{ut.emit("contentError",{editor:ut,error:Ut,disableCollaboration:()=>{"collaboration"in ut.storage&&typeof ut.storage.collaboration=="object"&&ut.storage.collaboration&&(ut.storage.collaboration.isDisabled=!0)}})},kt={preserveWhitespace:"full",...et.parseOptions};if(!et.errorOnInvalidContent&&!ut.options.enableContentCheck&&ut.options.emitContentError)try{createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:!0})}catch(Ut){St(Ut)}try{ft=createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:(dt=et.errorOnInvalidContent)!=null?dt:ut.options.enableContentCheck})}catch(Ut){return St(Ut),!1}let{from:Tt,to:Rt}=typeof it=="number"?{from:it,to:it}:{from:it.from,to:it.to},jt=!0,Ft=!0;if((isFragment(ft)?ft:[ft]).forEach(Ut=>{Ut.check(),jt=jt?Ut.isText&&Ut.marks.length===0:!1,Ft=Ft?Ut.isBlock:!1}),Tt===Rt&&Ft){const{parent:Ut}=ot.doc.resolve(Tt);Ut.isTextblock&&!Ut.type.spec.code&&!Ut.childCount&&(Tt-=1,Rt+=1)}let zt;if(jt){if(Array.isArray(g))zt=g.map(Ut=>Ut.text||"").join("");else if(g instanceof Fragment){let Ut="";g.forEach(Bt=>{Bt.text&&(Ut+=Bt.text)}),zt=Ut}else typeof g=="object"&&g&&g.text?zt=g.text:zt=g;ot.insertText(zt,Tt,Rt)}else{zt=ft;const Ut=ot.doc.resolve(Tt),Bt=Ut.node(),Ht=Ut.parentOffset===0,Jt=Bt.isText||Bt.isTextblock,Zt=Bt.content.size>0;Ht&&Jt&&Zt&&(Tt=Math.max(0,Tt-1)),ot.replaceWith(Tt,Rt,zt)}et.updateSelection&&selectionToInsertionEnd(ot,ot.steps.length-1,-1),et.applyInputRules&&ot.setMeta("applyInputRules",{from:Tt,text:zt}),et.applyPasteRules&&ot.setMeta("applyPasteRules",{from:Tt,text:zt})}return!0},joinUp=()=>({state:it,dispatch:g})=>joinUp$1(it,g),joinDown=()=>({state:it,dispatch:g})=>joinDown$1(it,g),joinBackward=()=>({state:it,dispatch:g})=>joinBackward$1(it,g),joinForward=()=>({state:it,dispatch:g})=>joinForward$1(it,g),joinItemBackward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,-1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinItemForward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinTextblockBackward=()=>({state:it,dispatch:g})=>joinTextblockBackward$1(it,g),joinTextblockForward=()=>({state:it,dispatch:g})=>joinTextblockForward$1(it,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(it){const g=it.split(/-(?!$)/);let et=g[g.length-1];et==="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft+=1){const St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))isiOS()||isMacOS()?dt=!0:ct=!0;else throw new Error(`Unrecognized modifier name: ${St}`)}return ot&&(et=`Alt-${et}`),ct&&(et=`Ctrl-${et}`),dt&&(et=`Meta-${et}`),ut&&(et=`Shift-${et}`),et}var keyboardShortcut=it=>({editor:g,view:et,tr:ot,dispatch:ct})=>{const ut=normalizeKeyName(it).split(/-(?!$)/),dt=ut.find(kt=>!["Alt","Ctrl","Meta","Shift"].includes(kt)),ft=new KeyboardEvent("keydown",{key:dt==="Space"?" ":dt,altKey:ut.includes("Alt"),ctrlKey:ut.includes("Ctrl"),metaKey:ut.includes("Meta"),shiftKey:ut.includes("Shift"),bubbles:!0,cancelable:!0}),St=g.captureTransaction(()=>{et.someProp("handleKeyDown",kt=>kt(et,ft))});return St==null||St.steps.forEach(kt=>{const Tt=kt.map(ot.mapping);Tt&&ct&&ot.maybeStep(Tt)}),!0};function isNodeActive(it,g,et={}){const{from:ot,to:ct,empty:ut}=it.selection,dt=g?getNodeType(g,it.schema):null,ft=[];it.doc.nodesBetween(ot,ct,(Rt,jt)=>{if(Rt.isText)return;const Ft=Math.max(ot,jt),$t=Math.min(ct,jt+Rt.nodeSize);ft.push({node:Rt,from:Ft,to:$t})});const St=ct-ot,kt=ft.filter(Rt=>dt?dt.name===Rt.node.type.name:!0).filter(Rt=>objectIncludes(Rt.node.attrs,et,{strict:!1}));return ut?!!kt.length:kt.reduce((Rt,jt)=>Rt+jt.to-jt.from,0)>=St}var lift=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?lift$1(et,ot):!1},liftEmptyBlock=()=>({state:it,dispatch:g})=>liftEmptyBlock$1(it,g),liftListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return liftListItem$1(ot)(g,et)},newlineInCode=()=>({state:it,dispatch:g})=>newlineInCode$1(it,g);function getSchemaTypeNameByName(it,g){return g.nodes[it]?"node":g.marks[it]?"mark":null}function deleteProps(it,g){const et=typeof g=="string"?[g]:g;return Object.keys(it).reduce((ot,ct)=>(et.includes(ct)||(ot[ct]=it[ct]),ot),{})}var resetAttributes=(it,g)=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{ot.doc.nodesBetween(St.$from.pos,St.$to.pos,(kt,Tt)=>{ut&&ut===kt.type&&et.setNodeMarkup(Tt,void 0,deleteProps(kt.attrs,g)),dt&&kt.marks.length&&kt.marks.forEach(Rt=>{dt===Rt.type&&et.addMark(Tt,Tt+kt.nodeSize,dt.create(deleteProps(Rt.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:it,dispatch:g})=>(g&&it.scrollIntoView(),!0),selectAll=()=>({tr:it,dispatch:g})=>{if(g){const et=new AllSelection(it.doc);it.setSelection(et)}return!0},selectNodeBackward=()=>({state:it,dispatch:g})=>selectNodeBackward$1(it,g),selectNodeForward=()=>({state:it,dispatch:g})=>selectNodeForward$1(it,g),selectParentNode=()=>({state:it,dispatch:g})=>selectParentNode$1(it,g),selectTextblockEnd=()=>({state:it,dispatch:g})=>selectTextblockEnd$1(it,g),selectTextblockStart=()=>({state:it,dispatch:g})=>selectTextblockStart$1(it,g);function createDocument(it,g,et={},ot={}){return createNodeFromContent(it,g,{slice:!1,parseOptions:et,errorOnInvalidContent:ot.errorOnInvalidContent})}var setContent=(it,{errorOnInvalidContent:g,emitUpdate:et=!0,parseOptions:ot={}}={})=>({editor:ct,tr:ut,dispatch:dt,commands:ft})=>{const{doc:St}=ut;if(ot.preserveWhitespace!=="full"){const kt=createDocument(it,ct.schema,ot,{errorOnInvalidContent:g??ct.options.enableContentCheck});return dt&&ut.replaceWith(0,St.content.size,kt).setMeta("preventUpdate",!et),!0}return dt&&ut.setMeta("preventUpdate",!et),ft.insertContentAt({from:0,to:St.content.size},it,{parseOptions:ot,errorOnInvalidContent:g??ct.options.enableContentCheck})};function getMarkAttributes(it,g){const et=getMarkType(g,it.schema),{from:ot,to:ct,empty:ut}=it.selection,dt=[];ut?(it.storedMarks&&dt.push(...it.storedMarks),dt.push(...it.selection.$head.marks())):it.doc.nodesBetween(ot,ct,St=>{dt.push(...St.marks)});const ft=dt.find(St=>St.type.name===et.name);return ft?{...ft.attrs}:{}}function combineTransactionSteps(it,g){const et=new Transform$1(it);return g.forEach(ot=>{ot.steps.forEach(ct=>{et.step(ct)})}),et}function defaultBlockAt(it){for(let g=0;g<it.edgeCount;g+=1){const{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}function findChildrenInRange(it,g,et){const ot=[];return it.nodesBetween(g.from,g.to,(ct,ut)=>{et(ct)&&ot.push({node:ct,pos:ut})}),ot}function findParentNodeClosestToPos(it,g){for(let et=it.depth;et>0;et-=1){const ot=it.node(et);if(g(ot))return{pos:et>0?it.before(et):0,start:it.start(et),depth:et,node:ot}}}function findParentNode(it){return g=>findParentNodeClosestToPos(g.$from,it)}function getExtensionField(it,g,et){return it.config[g]===void 0&&it.parent?getExtensionField(it.parent,g,et):typeof it.config[g]=="function"?it.config[g].bind({...et,parent:it.parent?getExtensionField(it.parent,g,et):null}):it.config[g]}function flattenExtensions(it){return it.map(g=>{const et={name:g.name,options:g.options,storage:g.storage},ot=getExtensionField(g,"addExtensions",et);return ot?[g,...flattenExtensions(ot())]:g}).flat(10)}function getHTMLFromFragment(it,g){const et=DOMSerializer.fromSchema(g).serializeFragment(it),ct=document.implementation.createHTMLDocument().createElement("div");return ct.appendChild(et),ct.innerHTML}function isFunction(it){return typeof it=="function"}function callOrReturn(it,g=void 0,...et){return isFunction(it)?g?it.bind(g)(...et):it(...et):it}function isEmptyObject(it={}){return Object.keys(it).length===0&&it.constructor===Object}function splitExtensions(it){const g=it.filter(ct=>ct.type==="extension"),et=it.filter(ct=>ct.type==="node"),ot=it.filter(ct=>ct.type==="mark");return{baseExtensions:g,nodeExtensions:et,markExtensions:ot}}function getAttributesFromExtensions(it){const g=[],{nodeExtensions:et,markExtensions:ot}=splitExtensions(it),ct=[...et,...ot],ut={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return it.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage,extensions:ct},St=getExtensionField(dt,"addGlobalAttributes",ft);if(!St)return;St().forEach(Tt=>{Tt.types.forEach(Rt=>{Object.entries(Tt.attributes).forEach(([jt,Ft])=>{g.push({type:Rt,name:jt,attribute:{...ut,...Ft}})})})})}),ct.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage},St=getExtensionField(dt,"addAttributes",ft);if(!St)return;const kt=St();Object.entries(kt).forEach(([Tt,Rt])=>{const jt={...ut,...Rt};typeof(jt==null?void 0:jt.default)=="function"&&(jt.default=jt.default()),jt!=null&&jt.isRequired&&(jt==null?void 0:jt.default)===void 0&&delete jt.default,g.push({type:dt.name,name:Tt,attribute:jt})})}),g}function mergeAttributes(...it){return it.filter(g=>!!g).reduce((g,et)=>{const ot={...g};return Object.entries(et).forEach(([ct,ut])=>{if(!ot[ct]){ot[ct]=ut;return}if(ct==="class"){const ft=ut?String(ut).split(" "):[],St=ot[ct]?ot[ct].split(" "):[],kt=ft.filter(Tt=>!St.includes(Tt));ot[ct]=[...St,...kt].join(" ")}else if(ct==="style"){const ft=ut?ut.split(";").map(Tt=>Tt.trim()).filter(Boolean):[],St=ot[ct]?ot[ct].split(";").map(Tt=>Tt.trim()).filter(Boolean):[],kt=new Map;St.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(Rt,jt)}),ft.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map(Ft=>Ft.trim());kt.set(Rt,jt)}),ot[ct]=Array.from(kt.entries()).map(([Tt,Rt])=>`${Tt}: ${Rt}`).join("; ")}else ot[ct]=ut}),ot},{})}function getRenderedAttributes(it,g){return g.filter(et=>et.type===it.type.name).filter(et=>et.attribute.rendered).map(et=>et.attribute.renderHTML?et.attribute.renderHTML(it.attrs)||{}:{[et.name]:it.attrs[et.name]}).reduce((et,ot)=>mergeAttributes(et,ot),{})}function fromString(it){return typeof it!="string"?it:it.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(it):it==="true"?!0:it==="false"?!1:it}function injectExtensionAttributesToParseRule(it,g){return"style"in it?it:{...it,getAttrs:et=>{const ot=it.getAttrs?it.getAttrs(et):it.attrs;if(ot===!1)return!1;const ct=g.reduce((ut,dt)=>{const ft=dt.attribute.parseHTML?dt.attribute.parseHTML(et):fromString(et.getAttribute(dt.name));return ft==null?ut:{...ut,[dt.name]:ft}},{});return{...ot,...ct}}}}function cleanUpSchemaItem(it){return Object.fromEntries(Object.entries(it).filter(([g,et])=>g==="attrs"&&isEmptyObject(et)?!1:et!=null))}function getSchemaByResolvedExtensions(it,g){var et;const ot=getAttributesFromExtensions(it),{nodeExtensions:ct,markExtensions:ut}=splitExtensions(it),dt=(et=ct.find(kt=>getExtensionField(kt,"topNode")))==null?void 0:et.name,ft=Object.fromEntries(ct.map(kt=>{const Tt=ot.filter(Bt=>Bt.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((Bt,Ht)=>{const Jt=getExtensionField(Ht,"extendNodeSchema",Rt);return{...Bt,...Jt?Jt(kt):{}}},{}),Ft=cleanUpSchemaItem({...jt,content:callOrReturn(getExtensionField(kt,"content",Rt)),marks:callOrReturn(getExtensionField(kt,"marks",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),inline:callOrReturn(getExtensionField(kt,"inline",Rt)),atom:callOrReturn(getExtensionField(kt,"atom",Rt)),selectable:callOrReturn(getExtensionField(kt,"selectable",Rt)),draggable:callOrReturn(getExtensionField(kt,"draggable",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),whitespace:callOrReturn(getExtensionField(kt,"whitespace",Rt)),linebreakReplacement:callOrReturn(getExtensionField(kt,"linebreakReplacement",Rt)),defining:callOrReturn(getExtensionField(kt,"defining",Rt)),isolating:callOrReturn(getExtensionField(kt,"isolating",Rt)),attrs:Object.fromEntries(Tt.map(Bt=>{var Ht,Jt;return[Bt.name,{default:(Ht=Bt==null?void 0:Bt.attribute)==null?void 0:Ht.default,validate:(Jt=Bt==null?void 0:Bt.attribute)==null?void 0:Jt.validate}]}))}),$t=callOrReturn(getExtensionField(kt,"parseHTML",Rt));$t&&(Ft.parseDOM=$t.map(Bt=>injectExtensionAttributesToParseRule(Bt,Tt)));const zt=getExtensionField(kt,"renderHTML",Rt);zt&&(Ft.toDOM=Bt=>zt({node:Bt,HTMLAttributes:getRenderedAttributes(Bt,Tt)}));const Ut=getExtensionField(kt,"renderText",Rt);return Ut&&(Ft.toText=Ut),[kt.name,Ft]})),St=Object.fromEntries(ut.map(kt=>{const Tt=ot.filter(Ut=>Ut.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((Ut,Bt)=>{const Ht=getExtensionField(Bt,"extendMarkSchema",Rt);return{...Ut,...Ht?Ht(kt):{}}},{}),Ft=cleanUpSchemaItem({...jt,inclusive:callOrReturn(getExtensionField(kt,"inclusive",Rt)),excludes:callOrReturn(getExtensionField(kt,"excludes",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),spanning:callOrReturn(getExtensionField(kt,"spanning",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),attrs:Object.fromEntries(Tt.map(Ut=>{var Bt,Ht;return[Ut.name,{default:(Bt=Ut==null?void 0:Ut.attribute)==null?void 0:Bt.default,validate:(Ht=Ut==null?void 0:Ut.attribute)==null?void 0:Ht.validate}]}))}),$t=callOrReturn(getExtensionField(kt,"parseHTML",Rt));$t&&(Ft.parseDOM=$t.map(Ut=>injectExtensionAttributesToParseRule(Ut,Tt)));const zt=getExtensionField(kt,"renderHTML",Rt);return zt&&(Ft.toDOM=Ut=>zt({mark:Ut,HTMLAttributes:getRenderedAttributes(Ut,Tt)})),[kt.name,Ft]}));return new Schema({topNode:dt,nodes:ft,marks:St})}function findDuplicates(it){const g=it.filter((et,ot)=>it.indexOf(et)!==ot);return Array.from(new Set(g))}function sortExtensions(it){return it.sort((et,ot)=>{const ct=getExtensionField(et,"priority")||100,ut=getExtensionField(ot,"priority")||100;return ct>ut?-1:ct<ut?1:0})}function resolveExtensions(it){const g=sortExtensions(flattenExtensions(it)),et=findDuplicates(g.map(ot=>ot.name));return et.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${et.map(ot=>`'${ot}'`).join(", ")}]. This can lead to issues.`),g}function getTextBetween(it,g,et){const{from:ot,to:ct}=g,{blockSeparator:ut=`

`,textSerializers:dt={}}=et||{};let ft="";return it.nodesBetween(ot,ct,(St,kt,Tt,Rt)=>{var jt;St.isBlock&&kt>ot&&(ft+=ut);const Ft=dt==null?void 0:dt[St.type.name];if(Ft)return Tt&&(ft+=Ft({node:St,pos:kt,parent:Tt,index:Rt,range:g})),!1;St.isText&&(ft+=(jt=St==null?void 0:St.text)==null?void 0:jt.slice(Math.max(ot,kt)-kt,ct-kt))}),ft}function getText(it,g){const et={from:0,to:it.content.size};return getTextBetween(it,et,g)}function getTextSerializersFromSchema(it){return Object.fromEntries(Object.entries(it.nodes).filter(([,g])=>g.spec.toText).map(([g,et])=>[g,et.spec.toText]))}function getNodeAttributes(it,g){const et=getNodeType(g,it.schema),{from:ot,to:ct}=it.selection,ut=[];it.doc.nodesBetween(ot,ct,ft=>{ut.push(ft)});const dt=ut.reverse().find(ft=>ft.type.name===et.name);return dt?{...dt.attrs}:{}}function getAttributes$1(it,g){const et=getSchemaTypeNameByName(typeof g=="string"?g:g.name,it.schema);return et==="node"?getNodeAttributes(it,g):et==="mark"?getMarkAttributes(it,g):{}}function removeDuplicates(it,g=JSON.stringify){const et={};return it.filter(ot=>{const ct=g(ot);return Object.prototype.hasOwnProperty.call(et,ct)?!1:et[ct]=!0})}function simplifyChangedRanges(it){const g=removeDuplicates(it);return g.length===1?g:g.filter((et,ot)=>!g.filter((ut,dt)=>dt!==ot).some(ut=>et.oldRange.from>=ut.oldRange.from&&et.oldRange.to<=ut.oldRange.to&&et.newRange.from>=ut.newRange.from&&et.newRange.to<=ut.newRange.to))}function getChangedRanges(it){const{mapping:g,steps:et}=it,ot=[];return g.maps.forEach((ct,ut)=>{const dt=[];if(ct.ranges.length)ct.forEach((ft,St)=>{dt.push({from:ft,to:St})});else{const{from:ft,to:St}=et[ut];if(ft===void 0||St===void 0)return;dt.push({from:ft,to:St})}dt.forEach(({from:ft,to:St})=>{const kt=g.slice(ut).map(ft,-1),Tt=g.slice(ut).map(St),Rt=g.invert().map(kt,-1),jt=g.invert().map(Tt);ot.push({oldRange:{from:Rt,to:jt},newRange:{from:kt,to:Tt}})})}),simplifyChangedRanges(ot)}function getMarksBetween(it,g,et){const ot=[];return it===g?et.resolve(it).marks().forEach(ct=>{const ut=et.resolve(it),dt=getMarkRange(ut,ct.type);dt&&ot.push({mark:ct,...dt})}):et.nodesBetween(it,g,(ct,ut)=>{!ct||(ct==null?void 0:ct.nodeSize)===void 0||ot.push(...ct.marks.map(dt=>({from:ut,to:ut+ct.nodeSize,mark:dt})))}),ot}var getNodeAtPosition=(it,g,et,ot=20)=>{const ct=it.doc.resolve(et);let ut=ot,dt=null;for(;ut>0&&dt===null;){const ft=ct.node(ut);(ft==null?void 0:ft.type.name)===g?dt=ft:ut-=1}return[dt,ut]};function getSchemaTypeByName(it,g){return g.nodes[it]||g.marks[it]||null}function getSplittedAttributes(it,g,et){return Object.fromEntries(Object.entries(et).filter(([ot])=>{const ct=it.find(ut=>ut.type===g&&ut.name===ot);return ct?ct.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(it,g=500)=>{let et="";const ot=it.parentOffset;return it.parent.nodesBetween(Math.max(0,ot-g),ot,(ct,ut,dt,ft)=>{var St,kt;const Tt=((kt=(St=ct.type.spec).toText)==null?void 0:kt.call(St,{node:ct,pos:ut,parent:dt,index:ft}))||ct.textContent||"%leaf%";et+=ct.isAtom&&!ct.isText?Tt:Tt.slice(0,Math.max(0,ot-ut))}),et};function isMarkActive(it,g,et={}){const{empty:ot,ranges:ct}=it.selection,ut=g?getMarkType(g,it.schema):null;if(ot)return!!(it.storedMarks||it.selection.$from.marks()).filter(Rt=>ut?ut.name===Rt.type.name:!0).find(Rt=>objectIncludes(Rt.attrs,et,{strict:!1}));let dt=0;const ft=[];if(ct.forEach(({$from:Rt,$to:jt})=>{const Ft=Rt.pos,$t=jt.pos;it.doc.nodesBetween(Ft,$t,(zt,Ut)=>{if(!zt.isText&&!zt.marks.length)return;const Bt=Math.max(Ft,Ut),Ht=Math.min($t,Ut+zt.nodeSize),Jt=Ht-Bt;dt+=Jt,ft.push(...zt.marks.map(Zt=>({mark:Zt,from:Bt,to:Ht})))})}),dt===0)return!1;const St=ft.filter(Rt=>ut?ut.name===Rt.mark.type.name:!0).filter(Rt=>objectIncludes(Rt.mark.attrs,et,{strict:!1})).reduce((Rt,jt)=>Rt+jt.to-jt.from,0),kt=ft.filter(Rt=>ut?Rt.mark.type!==ut&&Rt.mark.type.excludes(ut):!0).reduce((Rt,jt)=>Rt+jt.to-jt.from,0);return(St>0?St+kt:St)>=dt}function isActive(it,g,et={}){if(!g)return isNodeActive(it,null,et)||isMarkActive(it,null,et);const ot=getSchemaTypeNameByName(g,it.schema);return ot==="node"?isNodeActive(it,g,et):ot==="mark"?isMarkActive(it,g,et):!1}var isAtEndOfNode=(it,g)=>{const{$from:et,$to:ot,$anchor:ct}=it.selection;if(g){const ut=findParentNode(ft=>ft.type.name===g)(it.selection);if(!ut)return!1;const dt=it.doc.resolve(ut.pos+1);return ct.pos+1===dt.end()}return!(ot.parentOffset<ot.parent.nodeSize-2||et.pos!==ot.pos)},isAtStartOfNode=it=>{const{$from:g,$to:et}=it.selection;return!(g.parentOffset>0||g.pos!==et.pos)};function isExtensionRulesEnabled(it,g){return Array.isArray(g)?g.some(et=>(typeof et=="string"?et:et.name)===it.name):g}function isList(it,g){const{nodeExtensions:et}=splitExtensions(g),ot=et.find(dt=>dt.name===it);if(!ot)return!1;const ct={name:ot.name,options:ot.options,storage:ot.storage},ut=callOrReturn(getExtensionField(ot,"group",ct));return typeof ut!="string"?!1:ut.split(" ").includes("list")}function isNodeEmpty(it,{checkChildren:g=!0,ignoreWhitespace:et=!1}={}){var ot;if(et){if(it.type.name==="hardBreak")return!0;if(it.isText)return/^\s*$/m.test((ot=it.text)!=null?ot:"")}if(it.isText)return!it.text;if(it.isAtom||it.isLeaf)return!1;if(it.content.childCount===0)return!0;if(g){let ct=!0;return it.content.forEach(ut=>{ct!==!1&&(isNodeEmpty(ut,{ignoreWhitespace:et,checkChildren:g})||(ct=!1))}),ct}return!1}function isNodeSelection(it){return it instanceof NodeSelection}function canSetMark(it,g,et){var ot;const{selection:ct}=g;let ut=null;if(isTextSelection(ct)&&(ut=ct.$cursor),ut){const ft=(ot=it.storedMarks)!=null?ot:ut.marks();return ut.parent.type.allowsMarkType(et)&&(!!et.isInSet(ft)||!ft.some(kt=>kt.type.excludes(et)))}const{ranges:dt}=ct;return dt.some(({$from:ft,$to:St})=>{let kt=ft.depth===0?it.doc.inlineContent&&it.doc.type.allowsMarkType(et):!1;return it.doc.nodesBetween(ft.pos,St.pos,(Tt,Rt,jt)=>{if(kt)return!1;if(Tt.isInline){const Ft=!jt||jt.type.allowsMarkType(et),$t=!!et.isInSet(Tt.marks)||!Tt.marks.some(zt=>zt.type.excludes(et));kt=Ft&&$t}return!kt}),kt})}var setMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const{selection:ut}=et,{empty:dt,ranges:ft}=ut,St=getMarkType(it,ot.schema);if(ct)if(dt){const kt=getMarkAttributes(ot,St);et.addStoredMark(St.create({...kt,...g}))}else ft.forEach(kt=>{const Tt=kt.$from.pos,Rt=kt.$to.pos;ot.doc.nodesBetween(Tt,Rt,(jt,Ft)=>{const $t=Math.max(Ft,Tt),zt=Math.min(Ft+jt.nodeSize,Rt);jt.marks.find(Bt=>Bt.type===St)?jt.marks.forEach(Bt=>{St===Bt.type&&et.addMark($t,zt,St.create({...Bt.attrs,...g}))}):et.addMark($t,zt,St.create(g))})});return canSetMark(ot,et,St)},setMeta=(it,g)=>({tr:et})=>(et.setMeta(it,g),!0),setNode=(it,g={})=>({state:et,dispatch:ot,chain:ct})=>{const ut=getNodeType(it,et.schema);let dt;return et.selection.$anchor.sameParent(et.selection.$head)&&(dt=et.selection.$anchor.parent.attrs),ut.isTextblock?ct().command(({commands:ft})=>setBlockType(ut,{...dt,...g})(et)?!0:ft.clearNodes()).command(({state:ft})=>setBlockType(ut,{...dt,...g})(ft,ot)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,ct=minMax(it,0,ot.content.size),ut=NodeSelection.create(ot,ct);g.setSelection(ut)}return!0},setTextSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,{from:ct,to:ut}=typeof it=="number"?{from:it,to:it}:it,dt=TextSelection.atStart(ot).from,ft=TextSelection.atEnd(ot).to,St=minMax(ct,dt,ft),kt=minMax(ut,dt,ft),Tt=TextSelection.create(ot,St,kt);g.setSelection(Tt)}return!0},sinkListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return sinkListItem$1(ot)(g,et)};function ensureMarks(it,g){const et=it.storedMarks||it.selection.$to.parentOffset&&it.selection.$from.marks();if(et){const ot=et.filter(ct=>g==null?void 0:g.includes(ct.type.name));it.tr.ensureMarks(ot)}}var splitBlock=({keepMarks:it=!0}={})=>({tr:g,state:et,dispatch:ot,editor:ct})=>{const{selection:ut,doc:dt}=g,{$from:ft,$to:St}=ut,kt=ct.extensionManager.attributes,Tt=getSplittedAttributes(kt,ft.node().type.name,ft.node().attrs);if(ut instanceof NodeSelection&&ut.node.isBlock)return!ft.parentOffset||!canSplit(dt,ft.pos)?!1:(ot&&(it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.split(ft.pos).scrollIntoView()),!0);if(!ft.parent.isBlock)return!1;const Rt=St.parentOffset===St.parent.content.size,jt=ft.depth===0?void 0:defaultBlockAt(ft.node(-1).contentMatchAt(ft.indexAfter(-1)));let Ft=Rt&&jt?[{type:jt,attrs:Tt}]:void 0,$t=canSplit(g.doc,g.mapping.map(ft.pos),1,Ft);if(!Ft&&!$t&&canSplit(g.doc,g.mapping.map(ft.pos),1,jt?[{type:jt}]:void 0)&&($t=!0,Ft=jt?[{type:jt,attrs:Tt}]:void 0),ot){if($t&&(ut instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(ft.pos),1,Ft),jt&&!Rt&&!ft.parentOffset&&ft.parent.type!==jt)){const zt=g.mapping.map(ft.before()),Ut=g.doc.resolve(zt);ft.node(-1).canReplaceWith(Ut.index(),Ut.index()+1,jt)&&g.setNodeMarkup(g.mapping.map(ft.before()),jt)}it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.scrollIntoView()}return $t},splitListItem=(it,g={})=>({tr:et,state:ot,dispatch:ct,editor:ut})=>{var dt;const ft=getNodeType(it,ot.schema),{$from:St,$to:kt}=ot.selection,Tt=ot.selection.node;if(Tt&&Tt.isBlock||St.depth<2||!St.sameParent(kt))return!1;const Rt=St.node(-1);if(Rt.type!==ft)return!1;const jt=ut.extensionManager.attributes;if(St.parent.content.size===0&&St.node(-1).childCount===St.indexAfter(-1)){if(St.depth===2||St.node(-3).type!==ft||St.index(-2)!==St.node(-2).childCount-1)return!1;if(ct){let Bt=Fragment.empty;const Ht=St.index(-1)?1:St.index(-2)?2:3;for(let on=St.depth-Ht;on>=St.depth-3;on-=1)Bt=Fragment.from(St.node(on).copy(Bt));const Jt=St.indexAfter(-1)<St.node(-2).childCount?1:St.indexAfter(-2)<St.node(-3).childCount?2:3,Zt={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g},tn=((dt=ft.contentMatch.defaultType)==null?void 0:dt.createAndFill(Zt))||void 0;Bt=Bt.append(Fragment.from(ft.createAndFill(null,tn)||void 0));const nn=St.before(St.depth-(Ht-1));et.replace(nn,St.after(-Jt),new Slice(Bt,4-Ht,0));let rn=-1;et.doc.nodesBetween(nn,et.doc.content.size,(on,pn)=>{if(rn>-1)return!1;on.isTextblock&&on.content.size===0&&(rn=pn+1)}),rn>-1&&et.setSelection(TextSelection.near(et.doc.resolve(rn))),et.scrollIntoView()}return!0}const Ft=kt.pos===St.end()?Rt.contentMatchAt(0).defaultType:null,$t={...getSplittedAttributes(jt,Rt.type.name,Rt.attrs),...g},zt={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g};et.delete(St.pos,kt.pos);const Ut=Ft?[{type:ft,attrs:$t},{type:Ft,attrs:zt}]:[{type:ft,attrs:$t}];if(!canSplit(et.doc,St.pos,2))return!1;if(ct){const{selection:Bt,storedMarks:Ht}=ot,{splittableMarks:Jt}=ut.extensionManager,Zt=Ht||Bt.$to.parentOffset&&Bt.$from.marks();if(et.split(St.pos,2,Ut).scrollIntoView(),!Zt||!ct)return!0;const tn=Zt.filter(nn=>Jt.includes(nn.type.name));et.ensureMarks(tn)}return!0},joinListBackwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(Math.max(0,et.pos-1)).before(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,et.pos)&&it.join(et.pos),!0},joinListForwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(et.start).after(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,ot)&&it.join(ot),!0},toggleList=(it,g,et,ot={})=>({editor:ct,tr:ut,state:dt,dispatch:ft,chain:St,commands:kt,can:Tt})=>{const{extensions:Rt,splittableMarks:jt}=ct.extensionManager,Ft=getNodeType(it,dt.schema),$t=getNodeType(g,dt.schema),{selection:zt,storedMarks:Ut}=dt,{$from:Bt,$to:Ht}=zt,Jt=Bt.blockRange(Ht),Zt=Ut||zt.$to.parentOffset&&zt.$from.marks();if(!Jt)return!1;const tn=findParentNode(nn=>isList(nn.type.name,Rt))(zt);if(Jt.depth>=1&&tn&&Jt.depth-tn.depth<=1){if(tn.node.type===Ft)return kt.liftListItem($t);if(isList(tn.node.type.name,Rt)&&Ft.validContent(tn.node.content)&&ft)return St().command(()=>(ut.setNodeMarkup(tn.pos,Ft),!0)).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run()}return!et||!Zt||!ft?St().command(()=>Tt().wrapInList(Ft,ot)?!0:kt.clearNodes()).wrapInList(Ft,ot).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run():St().command(()=>{const nn=Tt().wrapInList(Ft,ot),rn=Zt.filter(on=>jt.includes(on.type.name));return ut.ensureMarks(rn),nn?!0:kt.clearNodes()}).wrapInList(Ft,ot).command(()=>joinListBackwards(ut,Ft)).command(()=>joinListForwards(ut,Ft)).run()},toggleMark=(it,g={},et={})=>({state:ot,commands:ct})=>{const{extendEmptyMarkRange:ut=!1}=et,dt=getMarkType(it,ot.schema);return isMarkActive(ot,dt,g)?ct.unsetMark(dt,{extendEmptyMarkRange:ut}):ct.setMark(dt,g)},toggleNode=(it,g,et={})=>({state:ot,commands:ct})=>{const ut=getNodeType(it,ot.schema),dt=getNodeType(g,ot.schema),ft=isNodeActive(ot,ut,et);let St;return ot.selection.$anchor.sameParent(ot.selection.$head)&&(St=ot.selection.$anchor.parent.attrs),ft?ct.setNode(dt,St):ct.setNode(ut,{...St,...et})},toggleWrap=(it,g={})=>({state:et,commands:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?ot.lift(ct):ot.wrapIn(ct,g)},undoInputRule=()=>({state:it,dispatch:g})=>{const et=it.plugins;for(let ot=0;ot<et.length;ot+=1){const ct=et[ot];let ut;if(ct.spec.isInputRules&&(ut=ct.getState(it))){if(g){const dt=it.tr,ft=ut.transform;for(let St=ft.steps.length-1;St>=0;St-=1)dt.step(ft.steps[St].invert(ft.docs[St]));if(ut.text){const St=dt.doc.resolve(ut.from).marks();dt.replaceWith(ut.from,ut.to,it.schema.text(ut.text,St))}else dt.delete(ut.from,ut.to)}return!0}}return!1},unsetAllMarks=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,{empty:ot,ranges:ct}=et;return ot||g&&ct.forEach(ut=>{it.removeMark(ut.$from.pos,ut.$to.pos)}),!0},unsetMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{var ut;const{extendEmptyMarkRange:dt=!1}=g,{selection:ft}=et,St=getMarkType(it,ot.schema),{$from:kt,empty:Tt,ranges:Rt}=ft;if(!ct)return!0;if(Tt&&dt){let{from:jt,to:Ft}=ft;const $t=(ut=kt.marks().find(Ut=>Ut.type===St))==null?void 0:ut.attrs,zt=getMarkRange(kt,St,$t);zt&&(jt=zt.from,Ft=zt.to),et.removeMark(jt,Ft,St)}else Rt.forEach(jt=>{et.removeMark(jt.$from.pos,jt.$to.pos,St)});return et.removeStoredMark(St),!0},updateAttributes=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{const kt=St.$from.pos,Tt=St.$to.pos;let Rt,jt,Ft,$t;et.selection.empty?ot.doc.nodesBetween(kt,Tt,(zt,Ut)=>{ut&&ut===zt.type&&(Ft=Math.max(Ut,kt),$t=Math.min(Ut+zt.nodeSize,Tt),Rt=Ut,jt=zt)}):ot.doc.nodesBetween(kt,Tt,(zt,Ut)=>{Ut<kt&&ut&&ut===zt.type&&(Ft=Math.max(Ut,kt),$t=Math.min(Ut+zt.nodeSize,Tt),Rt=Ut,jt=zt),Ut>=kt&&Ut<=Tt&&(ut&&ut===zt.type&&et.setNodeMarkup(Ut,void 0,{...zt.attrs,...g}),dt&&zt.marks.length&&zt.marks.forEach(Bt=>{if(dt===Bt.type){const Ht=Math.max(Ut,kt),Jt=Math.min(Ut+zt.nodeSize,Tt);et.addMark(Ht,Jt,dt.create({...Bt.attrs,...g}))}}))}),jt&&(Rt!==void 0&&et.setNodeMarkup(Rt,void 0,{...jt.attrs,...g}),dt&&jt.marks.length&&jt.marks.forEach(zt=>{dt===zt.type&&et.addMark(Ft,$t,dt.create({...zt.attrs,...g}))}))}),!0):!1},wrapIn=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapIn$1(ct,g)(et,ot)},wrapInList=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapInList$1(ct,g)(et,ot)},EventEmitter=class{constructor(){this.callbacks={}}on(it,g){return this.callbacks[it]||(this.callbacks[it]=[]),this.callbacks[it].push(g),this}emit(it,...g){const et=this.callbacks[it];return et&&et.forEach(ot=>ot.apply(this,g)),this}off(it,g){const et=this.callbacks[it];return et&&(g?this.callbacks[it]=et.filter(ot=>ot!==g):delete this.callbacks[it]),this}once(it,g){const et=(...ot)=>{this.off(it,et),g.apply(this,ot)};return this.on(it,et)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(it){var g;this.find=it.find,this.handler=it.handler,this.undoable=(g=it.undoable)!=null?g:!0}},inputRuleMatcherHandler=(it,g)=>{if(isRegExp(g))return g.exec(it);const et=g(it);if(!et)return null;const ot=[et.text];return ot.index=et.index,ot.input=it,ot.data=et.data,et.replaceWith&&(et.text.includes(et.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),ot.push(et.replaceWith)),ot};function run$2(it){var g;const{editor:et,from:ot,to:ct,text:ut,rules:dt,plugin:ft}=it,{view:St}=et;if(St.composing)return!1;const kt=St.state.doc.resolve(ot);if(kt.parent.type.spec.code||(g=kt.nodeBefore||kt.nodeAfter)!=null&&g.marks.find(jt=>jt.type.spec.code))return!1;let Tt=!1;const Rt=getTextContentFromNodes(kt)+ut;return dt.forEach(jt=>{if(Tt)return;const Ft=inputRuleMatcherHandler(Rt,jt.find);if(!Ft)return;const $t=St.state.tr,zt=createChainableState({state:St.state,transaction:$t}),Ut={from:ot-(Ft[0].length-ut.length),to:ct},{commands:Bt,chain:Ht,can:Jt}=new CommandManager$1({editor:et,state:zt});jt.handler({state:zt,range:Ut,match:Ft,commands:Bt,chain:Ht,can:Jt})===null||!$t.steps.length||(jt.undoable&&$t.setMeta(ft,{transform:$t,from:ot,to:ct,text:ut}),St.dispatch($t),Tt=!0)}),Tt}function inputRulesPlugin(it){const{editor:g,rules:et}=it,ot=new Plugin({state:{init(){return null},apply(ct,ut,dt){const ft=ct.getMeta(ot);if(ft)return ft;const St=ct.getMeta("applyInputRules");return!!St&&setTimeout(()=>{let{text:Tt}=St;typeof Tt=="string"?Tt=Tt:Tt=getHTMLFromFragment(Fragment.from(Tt),dt.schema);const{from:Rt}=St,jt=Rt+Tt.length;run$2({editor:g,from:Rt,to:jt,text:Tt,rules:et,plugin:ot})}),ct.selectionSet||ct.docChanged?null:ut}},props:{handleTextInput(ct,ut,dt,ft){return run$2({editor:g,from:ut,to:dt,text:ft,rules:et,plugin:ot})},handleDOMEvents:{compositionend:ct=>(setTimeout(()=>{const{$cursor:ut}=ct.state.selection;ut&&run$2({editor:g,from:ut.pos,to:ut.pos,text:"",rules:et,plugin:ot})}),!1)},handleKeyDown(ct,ut){if(ut.key!=="Enter")return!1;const{$cursor:dt}=ct.state.selection;return dt?run$2({editor:g,from:dt.pos,to:dt.pos,text:`
`,rules:et,plugin:ot}):!1}},isInputRules:!0});return ot}function getType(it){return Object.prototype.toString.call(it).slice(8,-1)}function isPlainObject(it){return getType(it)!=="Object"?!1:it.constructor===Object&&Object.getPrototypeOf(it)===Object.prototype}function mergeDeep(it,g){const et={...it};return isPlainObject(it)&&isPlainObject(g)&&Object.keys(g).forEach(ot=>{isPlainObject(g[ot])&&isPlainObject(it[ot])?et[ot]=mergeDeep(it[ot],g[ot]):et[ot]=g[ot]}),et}var Extendable=class{constructor(it={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...it},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(it={}){const g=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,it)});return g.name=this.name,g.parent=this.parent,g}extend(it={}){const g=new this.constructor({...this.config,...it});return g.parent=this,this.child=g,g.name="name"in it?it.name:g.parent.name,g}},Mark=class $P extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(g={}){const et=typeof g=="function"?g():g;return new $P(et)}static handleExit({editor:g,mark:et}){const{tr:ot}=g.state,ct=g.state.selection.$from;if(ct.pos===ct.end()){const dt=ct.marks();if(!!!dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name))return!1;const St=dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name);return St&&ot.removeStoredMark(St),ot.insertText(" ",ct.pos),g.view.dispatch(ot),!0}return!1}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function isNumber(it){return typeof it=="number"}var PasteRule=class{constructor(it){this.find=it.find,this.handler=it.handler}},pasteRuleMatcherHandler=(it,g,et)=>{if(isRegExp(g))return[...it.matchAll(g)];const ot=g(it,et);return ot?ot.map(ct=>{const ut=[ct.text];return ut.index=ct.index,ut.input=it,ut.data=ct.data,ct.replaceWith&&(ct.text.includes(ct.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),ut.push(ct.replaceWith)),ut}):[]};function run2(it){const{editor:g,state:et,from:ot,to:ct,rule:ut,pasteEvent:dt,dropEvent:ft}=it,{commands:St,chain:kt,can:Tt}=new CommandManager$1({editor:g,state:et}),Rt=[];return et.doc.nodesBetween(ot,ct,(Ft,$t)=>{var zt,Ut,Bt,Ht,Jt;if((Ut=(zt=Ft.type)==null?void 0:zt.spec)!=null&&Ut.code||!(Ft.isText||Ft.isTextblock||Ft.isInline))return;const Zt=(Jt=(Ht=(Bt=Ft.content)==null?void 0:Bt.size)!=null?Ht:Ft.nodeSize)!=null?Jt:0,tn=Math.max(ot,$t),nn=Math.min(ct,$t+Zt);if(tn>=nn)return;const rn=Ft.isText?Ft.text||"":Ft.textBetween(tn-$t,nn-$t,void 0,"");pasteRuleMatcherHandler(rn,ut.find,dt).forEach(pn=>{if(pn.index===void 0)return;const dn=tn+pn.index+1,hn=dn+pn[0].length,un={from:et.tr.mapping.map(dn),to:et.tr.mapping.map(hn)},En=ut.handler({state:et,range:un,match:pn,commands:St,chain:kt,can:Tt,pasteEvent:dt,dropEvent:ft});Rt.push(En)})}),Rt.every(Ft=>Ft!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=it=>{var g;const et=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=et.clipboardData)==null||g.setData("text/html",it),et};function pasteRulesPlugin(it){const{editor:g,rules:et}=it;let ot=null,ct=!1,ut=!1,dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ft;try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}const St=({state:Tt,from:Rt,to:jt,rule:Ft,pasteEvt:$t})=>{const zt=Tt.tr,Ut=createChainableState({state:Tt,transaction:zt});if(!(!run2({editor:g,state:Ut,from:Math.max(Rt-1,0),to:jt.b-1,rule:Ft,pasteEvent:$t,dropEvent:ft})||!zt.steps.length)){try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}return dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,zt}};return et.map(Tt=>new Plugin({view(Rt){const jt=$t=>{var zt;ot=(zt=Rt.dom.parentElement)!=null&&zt.contains($t.target)?Rt.dom.parentElement:null,ot&&(tiptapDragFromOtherEditor=g)},Ft=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",jt),window.addEventListener("dragend",Ft),{destroy(){window.removeEventListener("dragstart",jt),window.removeEventListener("dragend",Ft)}}},props:{handleDOMEvents:{drop:(Rt,jt)=>{if(ut=ot===Rt.dom.parentElement,ft=jt,!ut){const Ft=tiptapDragFromOtherEditor;Ft!=null&&Ft.isEditable&&setTimeout(()=>{const $t=Ft.state.selection;$t&&Ft.commands.deleteRange({from:$t.from,to:$t.to})},10)}return!1},paste:(Rt,jt)=>{var Ft;const $t=(Ft=jt.clipboardData)==null?void 0:Ft.getData("text/html");return dt=jt,ct=!!($t!=null&&$t.includes("data-pm-slice")),!1}}},appendTransaction:(Rt,jt,Ft)=>{const $t=Rt[0],zt=$t.getMeta("uiEvent")==="paste"&&!ct,Ut=$t.getMeta("uiEvent")==="drop"&&!ut,Bt=$t.getMeta("applyPasteRules"),Ht=!!Bt;if(!zt&&!Ut&&!Ht)return;if(Ht){let{text:tn}=Bt;typeof tn=="string"?tn=tn:tn=getHTMLFromFragment(Fragment.from(tn),Ft.schema);const{from:nn}=Bt,rn=nn+tn.length,on=createClipboardPasteEvent(tn);return St({rule:Tt,state:Ft,from:nn,to:{b:rn},pasteEvt:on})}const Jt=jt.doc.content.findDiffStart(Ft.doc.content),Zt=jt.doc.content.findDiffEnd(Ft.doc.content);if(!(!isNumber(Jt)||!Zt||Jt===Zt.b))return St({rule:Tt,state:Ft,from:Jt,to:Zt,pasteEvt:dt})}}))}var ExtensionManager=class{constructor(it,g){this.splittableMarks=[],this.editor=g,this.baseExtensions=it,this.extensions=resolveExtensions(it),this.schema=getSchemaByResolvedExtensions(this.extensions,g),this.setupExtensions()}get commands(){return this.extensions.reduce((it,g)=>{const et={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)},ot=getExtensionField(g,"addCommands",et);return ot?{...it,...ot()}:it},{})}get plugins(){const{editor:it}=this;return sortExtensions([...this.extensions].reverse()).flatMap(ot=>{const ct={name:ot.name,options:ot.options,storage:this.editor.extensionStorage[ot.name],editor:it,type:getSchemaTypeByName(ot.name,this.schema)},ut=[],dt=getExtensionField(ot,"addKeyboardShortcuts",ct);let ft={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ct)&&(ft.ArrowRight=()=>Mark.handleExit({editor:it,mark:ot})),dt){const jt=Object.fromEntries(Object.entries(dt()).map(([Ft,$t])=>[Ft,()=>$t({editor:it})]));ft={...ft,...jt}}const St=keymap(ft);ut.push(St);const kt=getExtensionField(ot,"addInputRules",ct);if(isExtensionRulesEnabled(ot,it.options.enableInputRules)&&kt){const jt=kt();if(jt&&jt.length){const Ft=inputRulesPlugin({editor:it,rules:jt}),$t=Array.isArray(Ft)?Ft:[Ft];ut.push(...$t)}}const Tt=getExtensionField(ot,"addPasteRules",ct);if(isExtensionRulesEnabled(ot,it.options.enablePasteRules)&&Tt){const jt=Tt();if(jt&&jt.length){const Ft=pasteRulesPlugin({editor:it,rules:jt});ut.push(...Ft)}}const Rt=getExtensionField(ot,"addProseMirrorPlugins",ct);if(Rt){const jt=Rt();ut.push(...jt)}return ut})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:it}=this,{nodeExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addNodeView")).map(et=>{const ot=this.attributes.filter(St=>St.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getNodeType(et.name,this.schema)},ut=getExtensionField(et,"addNodeView",ct);if(!ut)return[];const dt=ut();if(!dt)return[];const ft=(St,kt,Tt,Rt,jt)=>{const Ft=getRenderedAttributes(St,ot);return dt({node:St,view:kt,getPos:Tt,decorations:Rt,innerDecorations:jt,editor:it,extension:et,HTMLAttributes:Ft})};return[et.name,ft]}))}get markViews(){const{editor:it}=this,{markExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addMarkView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getMarkType(et.name,this.schema)},ut=getExtensionField(et,"addMarkView",ct);if(!ut)return[];const dt=(ft,St,kt)=>{const Tt=getRenderedAttributes(ft,ot);return ut()({mark:ft,view:St,inline:kt,editor:it,extension:et,HTMLAttributes:Tt,updateAttributes:Rt=>{updateMarkViewAttributes(ft,it,Rt)}})};return[et.name,dt]}))}setupExtensions(){const it=this.extensions;this.editor.extensionStorage=Object.fromEntries(it.map(g=>[g.name,g.storage])),it.forEach(g=>{var et;const ot={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&((et=callOrReturn(getExtensionField(g,"keepOnSplit",ot)))==null||et)&&this.splittableMarks.push(g.name);const ct=getExtensionField(g,"onBeforeCreate",ot),ut=getExtensionField(g,"onCreate",ot),dt=getExtensionField(g,"onUpdate",ot),ft=getExtensionField(g,"onSelectionUpdate",ot),St=getExtensionField(g,"onTransaction",ot),kt=getExtensionField(g,"onFocus",ot),Tt=getExtensionField(g,"onBlur",ot),Rt=getExtensionField(g,"onDestroy",ot);ct&&this.editor.on("beforeCreate",ct),ut&&this.editor.on("create",ut),dt&&this.editor.on("update",dt),ft&&this.editor.on("selectionUpdate",ft),St&&this.editor.on("transaction",St),kt&&this.editor.on("focus",kt),Tt&&this.editor.on("blur",Tt),Rt&&this.editor.on("destroy",Rt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class BP extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(g={}){const et=typeof g=="function"?g():g;return new BP(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:it}=this,{state:g,schema:et}=it,{doc:ot,selection:ct}=g,{ranges:ut}=ct,dt=Math.min(...ut.map(Tt=>Tt.$from.pos)),ft=Math.max(...ut.map(Tt=>Tt.$to.pos)),St=getTextSerializersFromSchema(et);return getTextBetween(ot,{from:dt,to:ft},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:St})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:it,appendedTransactions:g}){var et,ot,ct;const ut=()=>{var dt,ft,St,kt;if((kt=(St=(ft=(dt=this.editor.options.coreExtensionOptions)==null?void 0:dt.delete)==null?void 0:ft.filterTransaction)==null?void 0:St.call(ft,it))!=null?kt:it.getMeta("y-sync$"))return;const Tt=combineTransactionSteps(it.before,[it,...g]);getChangedRanges(Tt).forEach(Ft=>{Tt.mapping.mapResult(Ft.oldRange.from).deletedAfter&&Tt.mapping.mapResult(Ft.oldRange.to).deletedBefore&&Tt.before.nodesBetween(Ft.oldRange.from,Ft.oldRange.to,($t,zt)=>{const Ut=zt+$t.nodeSize-2,Bt=Ft.oldRange.from<=zt&&Ut<=Ft.oldRange.to;this.editor.emit("delete",{type:"node",node:$t,from:zt,to:Ut,newFrom:Tt.mapping.map(zt),newTo:Tt.mapping.map(Ut),deletedRange:Ft.oldRange,newRange:Ft.newRange,partial:!Bt,editor:this.editor,transaction:it,combinedTransform:Tt})})});const jt=Tt.mapping;Tt.steps.forEach((Ft,$t)=>{var zt,Ut;if(Ft instanceof RemoveMarkStep){const Bt=jt.slice($t).map(Ft.from,-1),Ht=jt.slice($t).map(Ft.to),Jt=jt.invert().map(Bt,-1),Zt=jt.invert().map(Ht),tn=(zt=Tt.doc.nodeAt(Bt-1))==null?void 0:zt.marks.some(rn=>rn.eq(Ft.mark)),nn=(Ut=Tt.doc.nodeAt(Ht))==null?void 0:Ut.marks.some(rn=>rn.eq(Ft.mark));this.editor.emit("delete",{type:"mark",mark:Ft.mark,from:Ft.from,to:Ft.to,deletedRange:{from:Jt,to:Zt},newRange:{from:Bt,to:Ht},partial:!!(nn||tn),editor:this.editor,transaction:it,combinedTransform:Tt})}})};(ct=(ot=(et=this.editor.options.coreExtensionOptions)==null?void 0:et.delete)==null?void 0:ot.async)==null||ct?setTimeout(ut,0):ut()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(it,g,et,ot)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:et,moved:ot})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:it}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(g,et)=>{it.isFocused=!0;const ot=it.state.tr.setMeta("focus",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1},blur:(g,et)=>{it.isFocused=!1;const ot=it.state.tr.setMeta("blur",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const it=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.undoInputRule(),()=>dt.command(({tr:ft})=>{const{selection:St,doc:kt}=ft,{empty:Tt,$anchor:Rt}=St,{pos:jt,parent:Ft}=Rt,$t=Rt.parent.isTextblock&&jt>0?ft.doc.resolve(jt-1):Rt,zt=$t.parent.type.spec.isolating,Ut=Rt.pos-Rt.parentOffset,Bt=zt&&$t.parent.childCount===1?Ut===Rt.pos:Selection.atStart(kt).from===jt;return!Tt||!Ft.type.isTextblock||Ft.textContent.length||!Bt||Bt&&Rt.parent.type.name==="paragraph"?!1:dt.clearNodes()}),()=>dt.deleteSelection(),()=>dt.joinBackward(),()=>dt.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.deleteSelection(),()=>dt.deleteCurrentNode(),()=>dt.joinForward(),()=>dt.selectNodeForward()]),ot={Enter:()=>this.editor.commands.first(({commands:dt})=>[()=>dt.newlineInCode(),()=>dt.createParagraphNear(),()=>dt.liftEmptyBlock(),()=>dt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:it,"Mod-Backspace":it,"Shift-Backspace":it,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},ct={...ot},ut={...ot,"Ctrl-h":it,"Alt-Backspace":it,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?ut:ct},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(it,g,et)=>{if(it.some(zt=>zt.getMeta("composition")))return;const ot=it.some(zt=>zt.docChanged)&&!g.doc.eq(et.doc),ct=it.some(zt=>zt.getMeta("preventClearDocument"));if(!ot||ct)return;const{empty:ut,from:dt,to:ft}=g.selection,St=Selection.atStart(g.doc).from,kt=Selection.atEnd(g.doc).to;if(ut||!(dt===St&&ft===kt)||!isNodeEmpty(et.doc))return;const jt=et.tr,Ft=createChainableState({state:et,transaction:jt}),{commands:$t}=new CommandManager$1({editor:this.editor,state:Ft});if($t.clearNodes(),!!jt.steps.length)return jt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(it,g,et)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:et})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),NodePos=class Dy{constructor(g,et,ot=!1,ct=null){this.currentNode=null,this.actualDepth=null,this.isBlock=ot,this.resolvedPos=g,this.editor=et,this.currentNode=ct}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!=null?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let et=this.from,ot=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}et=this.from+1,ot=this.to-1}this.editor.commands.insertContentAt({from:et,to:ot},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),et=this.resolvedPos.doc.resolve(g);return new Dy(et,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new Dy(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new Dy(g,this.editor)}get children(){const g=[];return this.node.content.forEach((et,ot)=>{const ct=et.isBlock&&!et.isTextblock,ut=et.isAtom&&!et.isText,dt=this.pos+ot+(ut?0:1);if(dt<0||dt>this.resolvedPos.doc.nodeSize-2)return;const ft=this.resolvedPos.doc.resolve(dt);if(!ct&&ft.depth<=this.depth)return;const St=new Dy(ft,this.editor,ct,ct?et:null);ct&&(St.actualDepth=this.depth+1),g.push(new Dy(ft,this.editor,ct,ct?et:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,et={}){let ot=null,ct=this.parent;for(;ct&&!ot;){if(ct.node.type.name===g)if(Object.keys(et).length>0){const ut=ct.node.attrs,dt=Object.keys(et);for(let ft=0;ft<dt.length;ft+=1){const St=dt[ft];if(ut[St]!==et[St])break}}else ot=ct;ct=ct.parent}return ot}querySelector(g,et={}){return this.querySelectorAll(g,et,!0)[0]||null}querySelectorAll(g,et={},ot=!1){let ct=[];if(!this.children||this.children.length===0)return ct;const ut=Object.keys(et);return this.children.forEach(dt=>{ot&&ct.length>0||(dt.node.type.name===g&&ut.every(St=>et[St]===dt.node.attrs[St])&&ct.push(dt),!(ot&&ct.length>0)&&(ct=ct.concat(dt.querySelectorAll(g,et,ot))))}),ct}setAttribute(g){const{tr:et}=this.editor.state;et.setNodeMarkup(this.from,void 0,{...this.node.attrs,...g}),this.editor.view.dispatch(et)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(it,g,et){const ot=document.querySelector(`style[data-tiptap-style${et?`-${et}`:""}]`);if(ot!==null)return ot;const ct=document.createElement("style");return g&&ct.setAttribute("nonce",g),ct.setAttribute(`data-tiptap-style${et?`-${et}`:""}`,""),ct.innerHTML=it,document.getElementsByTagName("head")[0].appendChild(ct),ct}var Editor=class extends EventEmitter{constructor(it={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:ot})=>{throw ot},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(it),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:ot,slice:ct,moved:ut})=>this.options.onDrop(ot,ct,ut)),this.on("paste",({event:ot,slice:ct})=>this.options.onPaste(ot,ct)),this.on("delete",this.options.onDelete);const g=this.createDoc(),et=resolveFocusPosition(g,this.options.autofocus);this.editorState=EditorState.create({doc:g,schema:this.schema,selection:et||void 0}),this.options.element&&this.mount(this.options.element)}mount(it){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(it),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const it=this.editorView.dom;it!=null&&it.editor&&delete it.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(it){console.warn("Failed to remove CSS element:",it)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(it={}){this.options={...this.options,...it},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(it,g=!0){this.setOptions({editable:it}),g&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:it=>{this.editorState=it},dispatch:it=>{this.dispatchTransaction(it)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(it,g)=>{if(this.editorView)return this.editorView[g];if(g==="state")return this.editorState;if(g in it)return Reflect.get(it,g);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${g}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(it,g){const et=isFunction(g)?g(it,[...this.state.plugins]):[...this.state.plugins,it],ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}unregisterPlugin(it){if(this.isDestroyed)return;const g=this.state.plugins;let et=g;if([].concat(it).forEach(ct=>{const ut=typeof ct=="string"?`${ct}$`:ct.key;et=et.filter(dt=>!dt.key.startsWith(ut))}),g.length===et.length)return;const ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}createExtensionManager(){var it,g;const ot=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(g=(it=this.options.coreExtensionOptions)==null?void 0:it.clipboardTextSerializer)==null?void 0:g.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete].filter(ct=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[ct.name]!==!1:!0):[],...this.options.extensions].filter(ct=>["extension","node","mark"].includes(ct==null?void 0:ct.type));this.extensionManager=new ExtensionManager(ot,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let it;try{it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return it}createView(it){var g;this.editorView=new EditorView(it,{...this.options.editorProps,attributes:{role:"textbox",...(g=this.options.editorProps)==null?void 0:g.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const et=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(et),this.prependClass(),this.injectCSS();const ot=this.view.dom;ot.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(it){this.isCapturingTransaction=!0,it(),this.isCapturingTransaction=!1;const g=this.capturedTransaction;return this.capturedTransaction=null,g}dispatchTransaction(it){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=it;return}it.steps.forEach(kt=>{var Tt;return(Tt=this.capturedTransaction)==null?void 0:Tt.step(kt)});return}const{state:g,transactions:et}=this.state.applyTransaction(it),ot=!this.state.selection.eq(g.selection),ct=et.includes(it),ut=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:it,nextState:g}),!ct)return;this.view.updateState(g),this.emit("transaction",{editor:this,transaction:it,appendedTransactions:et.slice(1)}),ot&&this.emit("selectionUpdate",{editor:this,transaction:it});const dt=et.findLast(kt=>kt.getMeta("focus")||kt.getMeta("blur")),ft=dt==null?void 0:dt.getMeta("focus"),St=dt==null?void 0:dt.getMeta("blur");ft&&this.emit("focus",{editor:this,event:ft.event,transaction:dt}),St&&this.emit("blur",{editor:this,event:St.event,transaction:dt}),!(it.getMeta("preventUpdate")||!et.some(kt=>kt.docChanged)||ut.doc.eq(g.doc))&&this.emit("update",{editor:this,transaction:it,appendedTransactions:et.slice(1)})}getAttributes(it){return getAttributes$1(this.state,it)}isActive(it,g){const et=typeof it=="string"?it:null,ot=typeof it=="string"?g:it;return isActive(this.state,et,ot)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(it){const{blockSeparator:g=`

`,textSerializers:et={}}=it||{};return getText(this.state.doc,{blockSeparator:g,textSerializers:{...getTextSerializersFromSchema(this.schema),...et}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var it,g;return(g=(it=this.editorView)==null?void 0:it.isDestroyed)!=null?g:!0}$node(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelector(it,g))||null}$nodes(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelectorAll(it,g))||null}$pos(it){const g=this.state.doc.resolve(it);return new NodePos(g,this)}get $doc(){return this.$pos(0)}};function markInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot);if(ct===!1||ct===null)return null;const{tr:ut}=g,dt=ot[ot.length-1],ft=ot[0];if(dt){const St=ft.search(/\S/),kt=et.from+ft.indexOf(dt),Tt=kt+dt.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Ft=>Ft.mark.type.excluded.find(zt=>zt===it.type&&zt!==Ft.mark.type)).filter(Ft=>Ft.to>kt).length)return null;Tt<et.to&&ut.delete(Tt,et.to),kt>et.from&&ut.delete(et.from+St,kt);const jt=et.from+St+dt.length;ut.addMark(et.from+St,jt,it.type.create(ct||{})),ut.removeStoredMark(it.type)}},undoable:it.undoable})}function nodeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot)||{},{tr:ut}=g,dt=et.from;let ft=et.to;const St=it.type.create(ct);if(ot[1]){const kt=ot[0].lastIndexOf(ot[1]);let Tt=dt+kt;Tt>ft?Tt=ft:ft=Tt+ot[1].length;const Rt=ot[0][ot[0].length-1];ut.insertText(Rt,dt+ot[0].length-1),ut.replaceWith(Tt,ft,St)}else if(ot[0]){const kt=it.type.isInline?dt:dt-1;ut.insert(kt,it.type.create(ct)).delete(ut.mapping.map(dt),ut.mapping.map(ft))}ut.scrollIntoView()},undoable:it.undoable})}function textblockTypeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=g.doc.resolve(et.from),ut=callOrReturn(it.getAttributes,void 0,ot)||{};if(!ct.node(-1).canReplaceWith(ct.index(-1),ct.indexAfter(-1),it.type))return null;g.tr.delete(et.from,et.to).setBlockType(et.from,et.from,it.type,ut)},undoable:it.undoable})}function wrappingInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot,chain:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot)||{},dt=g.tr.delete(et.from,et.to),St=dt.doc.resolve(et.from).blockRange(),kt=St&&findWrapping(St,it.type,ut);if(!kt)return null;if(dt.wrap(St,kt),it.keepMarks&&it.editor){const{selection:Rt,storedMarks:jt}=g,{splittableMarks:Ft}=it.editor.extensionManager,$t=jt||Rt.$to.parentOffset&&Rt.$from.marks();if($t){const zt=$t.filter(Ut=>Ft.includes(Ut.type.name));dt.ensureMarks(zt)}}if(it.keepAttributes){const Rt=it.type.name==="bulletList"||it.type.name==="orderedList"?"listItem":"taskList";ct().updateAttributes(Rt,ut).run()}const Tt=dt.doc.resolve(et.from-1).nodeBefore;Tt&&Tt.type===it.type&&canJoin(dt.doc,et.from-1)&&(!it.joinPredicate||it.joinPredicate(ot,Tt))&&dt.join(et.from-1)},undoable:it.undoable})}function canInsertNode(it,g){const{selection:et}=it,{$from:ot}=et;if(et instanceof NodeSelection){const ut=ot.index();return ot.parent.canReplaceWith(ut,ut+1,g)}let ct=ot.depth;for(;ct>=0;){const ut=ot.index(ct);if(ot.node(ct).contentMatchAt(ut).matchType(g))return!0;ct-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(it){if(!(it!=null&&it.trim()))return{};const g={},et=[],ot=it.replace(/["']([^"']*)["']/g,kt=>(et.push(kt),`__QUOTED_${et.length-1}__`)),ct=ot.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(ct){const kt=ct.map(Tt=>Tt.trim().slice(1));g.class=kt.join(" ")}const ut=ot.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);ut&&(g.id=ut[1]);const dt=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(ot.matchAll(dt)).forEach(([,kt,Tt])=>{var Rt;const jt=parseInt(((Rt=Tt.match(/__QUOTED_(\d+)__/))==null?void 0:Rt[1])||"0",10),Ft=et[jt];Ft&&(g[kt]=Ft.slice(1,-1))});const St=ot.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return St&&St.split(/\s+/).filter(Boolean).forEach(Tt=>{Tt.match(/^[a-zA-Z][\w-]*$/)&&(g[Tt]=!0)}),g}function serializeAttributes(it){if(!it||Object.keys(it).length===0)return"";const g=[];return it.class&&String(it.class).split(/\s+/).filter(Boolean).forEach(ot=>g.push(`.${ot}`)),it.id&&g.push(`#${it.id}`),Object.entries(it).forEach(([et,ot])=>{et==="class"||et==="id"||(ot===!0?g.push(et):ot!==!1&&ot!=null&&g.push(`${et}="${String(ot)}"`))}),g.join(" ")}function createAtomBlockMarkdownSpec(it){const{nodeName:g,name:et,parseAttributes:ot=parseAttributes,serializeAttributes:ct=serializeAttributes,defaultAttributes:ut={},requiredAttributes:dt=[],allowedAttributes:ft}=it,St=et||g,kt=Tt=>{if(!ft)return Tt;const Rt={};return ft.forEach(jt=>{jt in Tt&&(Rt[jt]=Tt[jt])}),Rt};return{parseMarkdown:(Tt,Rt)=>{const jt={...ut,...Tt.attributes};return Rt.createNode(g,jt,[])},markdownTokenizer:{name:g,level:"block",start(Tt){var Rt;const jt=new RegExp(`^:::${St}(?:\\s|$)`,"m"),Ft=(Rt=Tt.match(jt))==null?void 0:Rt.index;return Ft!==void 0?Ft:-1},tokenize(Tt,Rt,jt){const Ft=new RegExp(`^:::${St}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),$t=Tt.match(Ft);if(!$t)return;const zt=$t[1]||"",Ut=ot(zt);if(!dt.find(Ht=>!(Ht in Ut)))return{type:g,raw:$t[0],attributes:Ut}}},renderMarkdown:Tt=>{const Rt=kt(Tt.attrs||{}),jt=ct(Rt),Ft=jt?` {${jt}}`:"";return`:::${St}${Ft} :::`}}}function createBlockMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseAttributes,serializeAttributes:ut=serializeAttributes,defaultAttributes:dt={},content:ft="block",allowedAttributes:St}=it,kt=et||g,Tt=Rt=>{if(!St)return Rt;const jt={};return St.forEach(Ft=>{Ft in Rt&&(jt[Ft]=Rt[Ft])}),jt};return{parseMarkdown:(Rt,jt)=>{let Ft;if(ot){const zt=ot(Rt);Ft=typeof zt=="string"?[{type:"text",text:zt}]:zt}else ft==="block"?Ft=jt.parseChildren(Rt.tokens||[]):Ft=jt.parseInline(Rt.tokens||[]);const $t={...dt,...Rt.attributes};return jt.createNode(g,$t,Ft)},markdownTokenizer:{name:g,level:"block",start(Rt){var jt;const Ft=new RegExp(`^:::${kt}`,"m"),$t=(jt=Rt.match(Ft))==null?void 0:jt.index;return $t!==void 0?$t:-1},tokenize(Rt,jt,Ft){var $t;const zt=new RegExp(`^:::${kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),Ut=Rt.match(zt);if(!Ut)return;const[Bt,Ht=""]=Ut,Jt=ct(Ht);let Zt=1;const tn=Bt.length;let nn="";const rn=/^:::([\w-]*)(\s.*)?/gm,on=Rt.slice(tn);for(rn.lastIndex=0;;){const pn=rn.exec(on);if(pn===null)break;const dn=pn.index,hn=pn[1];if(!(($t=pn[2])!=null&&$t.endsWith(":::"))){if(hn)Zt+=1;else if(Zt-=1,Zt===0){const un=on.slice(0,dn);nn=un.trim();const En=Rt.slice(0,tn+dn+pn[0].length);let wn=[];if(nn)if(ft==="block")for(wn=Ft.blockTokens(un),wn.forEach(Sn=>{Sn.text&&(!Sn.tokens||Sn.tokens.length===0)&&(Sn.tokens=Ft.inlineTokens(Sn.text))});wn.length>0;){const Sn=wn[wn.length-1];if(Sn.type==="paragraph"&&(!Sn.text||Sn.text.trim()===""))wn.pop();else break}else wn=Ft.inlineTokens(nn);return{type:g,raw:En,attributes:Jt,content:nn,tokens:wn}}}}}},renderMarkdown:(Rt,jt)=>{const Ft=Tt(Rt.attrs||{}),$t=ut(Ft),zt=$t?` {${$t}}`:"",Ut=jt.renderChildren(Rt.content||[],`

`);return`:::${kt}${zt}

${Ut}

:::`}}}function parseShortcodeAttributes(it){if(!it.trim())return{};const g={},et=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let ot=et.exec(it);for(;ot!==null;){const[,ct,ut,dt]=ot;g[ct]=ut||dt,ot=et.exec(it)}return g}function serializeShortcodeAttributes(it){return Object.entries(it).filter(([,g])=>g!=null).map(([g,et])=>`${g}="${et}"`).join(" ")}function createInlineMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseShortcodeAttributes,serializeAttributes:ut=serializeShortcodeAttributes,defaultAttributes:dt={},selfClosing:ft=!1,allowedAttributes:St}=it,kt=et||g,Tt=jt=>{if(!St)return jt;const Ft={};return St.forEach($t=>{$t in jt&&(Ft[$t]=jt[$t])}),Ft},Rt=kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(jt,Ft)=>{const $t={...dt,...jt.attributes};if(ft)return Ft.createNode(g,$t);const zt=ot?ot(jt):jt.content||"";return zt?Ft.createNode(g,$t,[Ft.createTextNode(zt)]):Ft.createNode(g,$t,[])},markdownTokenizer:{name:g,level:"inline",start(jt){const Ft=ft?new RegExp(`\\[${Rt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Rt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Rt}\\]`),$t=jt.match(Ft),zt=$t==null?void 0:$t.index;return zt!==void 0?zt:-1},tokenize(jt,Ft,$t){const zt=ft?new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Rt}\\]`),Ut=jt.match(zt);if(!Ut)return;let Bt="",Ht="";if(ft){const[,Zt]=Ut;Ht=Zt}else{const[,Zt,tn]=Ut;Ht=Zt,Bt=tn||""}const Jt=ct(Ht.trim());return{type:g,raw:Ut[0],content:Bt.trim(),attributes:Jt}}},renderMarkdown:jt=>{let Ft="";ot?Ft=ot(jt):jt.content&&jt.content.length>0&&(Ft=jt.content.filter(Bt=>Bt.type==="text").map(Bt=>Bt.text).join(""));const $t=Tt(jt.attrs||{}),zt=ut($t),Ut=zt?` ${zt}`:"";return ft?`[${kt}${Ut}]`:`[${kt}${Ut}]${Ft}[/${kt}]`}}}function parseIndentedBlocks(it,g,et){var ot,ct,ut,dt;const ft=it.split(`
`),St=[];let kt="",Tt=0;const Rt=g.baseIndentSize||2;for(;Tt<ft.length;){const jt=ft[Tt],Ft=jt.match(g.itemPattern);if(!Ft){if(St.length>0)break;if(jt.trim()===""){Tt+=1;continue}else return}const $t=g.extractItemData(Ft),{indentLevel:zt,mainContent:Ut}=$t;kt=`${kt}${jt}
`;const Bt=[Ut];for(Tt+=1;Tt<ft.length;){const tn=ft[Tt];if(tn.trim()===""){const rn=ft.slice(Tt+1).findIndex(dn=>dn.trim()!=="");if(rn===-1)break;if((((ct=(ot=ft[Tt+1+rn].match(/^(\s*)/))==null?void 0:ot[1])==null?void 0:ct.length)||0)>zt){Bt.push(tn),kt=`${kt}${tn}
`,Tt+=1;continue}else break}if((((dt=(ut=tn.match(/^(\s*)/))==null?void 0:ut[1])==null?void 0:dt.length)||0)>zt)Bt.push(tn),kt=`${kt}${tn}
`,Tt+=1;else break}let Ht;const Jt=Bt.slice(1);if(Jt.length>0){const tn=Jt.map(nn=>nn.slice(zt+Rt)).join(`
`);tn.trim()&&(g.customNestedParser?Ht=g.customNestedParser(tn):Ht=et.blockTokens(tn))}const Zt=g.createToken($t,Ht);St.push(Zt)}if(St.length!==0)return{items:St,raw:kt.trim()}}function renderNestedMarkdownContent(it,g,et,ot){if(!it||!Array.isArray(it.content))return"";const ct=typeof et=="function"?et(ot):et,[ut,...dt]=it.content,ft=g.renderChildren([ut]),St=[`${ct}${ft}`];return dt&&dt.length>0&&dt.forEach(kt=>{const Tt=g.renderChildren([kt]);if(Tt){const Rt=Tt.split(`
`).map(jt=>jt?g.indent(jt):"").join(`
`);St.push(Rt)}}),St.join(`
`)}function updateMarkViewAttributes(it,g,et={}){const{state:ot}=g,{doc:ct,tr:ut}=ot,dt=it;ct.descendants((ft,St)=>{const kt=ut.mapping.map(St),Tt=ut.mapping.map(St)+ft.nodeSize;let Rt=null;if(ft.marks.forEach(Ft=>{if(Ft!==dt)return!1;Rt=Ft}),!Rt)return;let jt=!1;if(Object.keys(et).forEach(Ft=>{et[Ft]!==Rt.attrs[Ft]&&(jt=!0)}),jt){const Ft=it.type.create({...it.attrs,...et});ut.removeMark(kt,Tt,it.type),ut.addMark(kt,Tt,Ft)}}),ut.docChanged&&g.view.dispatch(ut)}var Node3=class VP extends Extendable{constructor(){super(...arguments),this.type="node"}static create(g={}){const et=typeof g=="function"?g():g;return new VP(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function markPasteRule(it){return new PasteRule({find:it.find,handler:({state:g,range:et,match:ot,pasteEvent:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot,ct);if(ut===!1||ut===null)return null;const{tr:dt}=g,ft=ot[ot.length-1],St=ot[0];let kt=et.to;if(ft){const Tt=St.search(/\S/),Rt=et.from+St.indexOf(ft),jt=Rt+ft.length;if(getMarksBetween(et.from,et.to,g.doc).filter($t=>$t.mark.type.excluded.find(Ut=>Ut===it.type&&Ut!==$t.mark.type)).filter($t=>$t.to>Rt).length)return null;jt<et.to&&dt.delete(jt,et.to),Rt>et.from&&dt.delete(et.from+Tt,Rt),kt=et.from+Tt+ft.length,dt.addMark(et.from+Tt,kt,it.type.create(ut||{})),dt.removeStoredMark(it.type)}}})}var react=function it(g,et){if(g===et)return!0;if(g&&et&&typeof g=="object"&&typeof et=="object"){if(g.constructor!==et.constructor)return!1;var ot,ct,ut;if(Array.isArray(g)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(!it(g[ct],et[ct]))return!1;return!0}if(g instanceof Map&&et instanceof Map){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;for(ct of g.entries())if(!it(ct[1],et.get(ct[0])))return!1;return!0}if(g instanceof Set&&et instanceof Set){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(et)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(g[ct]!==et[ct])return!1;return!0}if(g.constructor===RegExp)return g.source===et.source&&g.flags===et.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===et.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===et.toString();if(ut=Object.keys(g),ot=ut.length,ot!==Object.keys(et).length)return!1;for(ct=ot;ct--!==0;)if(!Object.prototype.hasOwnProperty.call(et,ut[ct]))return!1;for(ct=ot;ct--!==0;){var dt=ut[ct];if(!(dt==="_owner"&&g.$$typeof)&&!it(g[dt],et[dt]))return!1}return!0}return g!==g&&et!==et};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(it,g,et,ot,ct){var ut=useRef(null);if(ut.current===null){var dt={hasValue:!1,value:null};ut.current=dt}else dt=ut.current;ut=useMemo(function(){function St(Ft){if(!kt){if(kt=!0,Tt=Ft,Ft=ot(Ft),ct!==void 0&&dt.hasValue){var $t=dt.value;if(ct($t,Ft))return Rt=$t}return Rt=Ft}if($t=Rt,objectIs(Tt,Ft))return $t;var zt=ot(Ft);return ct!==void 0&&ct($t,zt)?(Tt=Ft,$t):(Tt=Ft,Rt=zt)}var kt=!1,Tt,Rt,jt=et===void 0?null:et;return[function(){return St(g())},jt===null?void 0:function(){return St(jt())}]},[g,et,ot,ct]);var ft=useSyncExternalStore(it,ut[0],ut[1]);return useEffect(function(){dt.hasValue=!0,dt.value=ft},[ft]),useDebugValue(ft),ft};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...it)=>g=>{it.forEach(et=>{typeof et=="function"?et(g):et&&(et.current=g)})},Portals=({contentComponent:it})=>{const g=shimExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(g)})};function getInstance(){const it=new Set;let g={};return{subscribe(et){return it.add(et),()=>{it.delete(et)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(et,ot){g={...g,[et]:ReactDOM.createPortal(ot.reactElement,ot.element,et)},it.forEach(ct=>ct())},removeRenderer(et){const ot={...g};delete ot[et],g=ot,it.forEach(ct=>ct())}}}var PureEditorContent=class extends React$2.Component{constructor(it){var g;super(it),this.editorContentRef=React$2.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((g=it.editor)!=null&&g.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const it=this.props.editor;if(it&&!it.isDestroyed&&it.options.element){if(it.contentComponent)return;const g=this.editorContentRef.current;g.append(it.view.dom),it.setOptions({element:g}),it.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=it.contentComponent.subscribe(()=>{this.setState(et=>et.hasContentComponentInitialized?et:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),it.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var it;const g=this.props.editor;if(g){this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null;try{if(!((it=g.view.dom)!=null&&it.firstChild))return;const et=document.createElement("div");et.append(g.view.dom),g.setOptions({element:et})}catch{}}}render(){const{editor:it,innerRef:g,...et}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(g,this.editorContentRef),...et}),(it==null?void 0:it.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:it.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((it,g)=>{const et=React$2.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[it.editor]);return React$2.createElement(PureEditorContent,{key:et,innerRef:g,...it})}),EditorContent=React$2.memo(EditorContentWithKey),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(it){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=it,this.lastSnapshot={editor:it,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(it){return this.subscribers.add(it),()=>{this.subscribers.delete(it)}}watch(it){if(this.editor=it,this.editor){const g=()=>{this.transactionNumber+=1,this.subscribers.forEach(ot=>ot())},et=this.editor;return et.on("transaction",g),()=>{et.off("transaction",g)}}}};function useEditorState(it){var g;const[et]=reactExports.useState(()=>new EditorStateManager(it.editor)),ot=withSelectorExports.useSyncExternalStoreWithSelector(et.subscribe,et.getSnapshot,et.getServerSnapshot,it.selector,(g=it.equalityFn)!=null?g:deepEqual);return useIsomorphicLayoutEffect(()=>et.watch(it.editor),[it.editor,et]),reactExports.useDebugValue(ot),ot}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class zP{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(et=>et())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBeforeCreate)==null?void 0:ut.call(ct,...ot)},onBlur:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBlur)==null?void 0:ut.call(ct,...ot)},onCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onCreate)==null?void 0:ut.call(ct,...ot)},onDestroy:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDestroy)==null?void 0:ut.call(ct,...ot)},onFocus:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onFocus)==null?void 0:ut.call(ct,...ot)},onSelectionUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onSelectionUpdate)==null?void 0:ut.call(ct,...ot)},onTransaction:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onTransaction)==null?void 0:ut.call(ct,...ot)},onUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onUpdate)==null?void 0:ut.call(ct,...ot)},onContentError:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onContentError)==null?void 0:ut.call(ct,...ot)},onDrop:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDrop)==null?void 0:ut.call(ct,...ot)},onPaste:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onPaste)==null?void 0:ut.call(ct,...ot)},onDelete:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDelete)==null?void 0:ut.call(ct,...ot)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}static compareOptions(g,et){return Object.keys(g).every(ot=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(ot)?!0:ot==="extensions"&&g.extensions&&et.extensions?g.extensions.length!==et.extensions.length?!1:g.extensions.every((ct,ut)=>{var dt;return ct===((dt=et.extensions)==null?void 0:dt[ut])}):g[ot]===et[ot])}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?zP.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((ot,ct)=>ot===g[ct]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,et=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){et&&et.setOptions(this.options.current);return}et&&!et.isDestroyed&&(et.destroy(),this.instanceId===g&&this.setEditor(null))},1)}};function useEditor(it={},g=[]){const et=reactExports.useRef(it);et.current=it;const[ot]=reactExports.useState(()=>new EditorInstanceManager(et)),ct=shimExports.useSyncExternalStore(ot.subscribe,ot.getEditor,ot.getServerSnapshot);return reactExports.useDebugValue(ct),reactExports.useEffect(ot.onRender(g)),useEditorState({editor:ct,selector:({transactionNumber:ut})=>it.shouldRerenderOnTransaction===!1||it.shouldRerenderOnTransaction===void 0?null:it.immediatelyRender&&ut===0?0:ut+1}),ct}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$2.forwardRef((it,g)=>{const{onDragStart:et}=useReactNodeView(),ot=it.as||"div";return jsxRuntimeExports.jsx(ot,{...it,ref:g,"data-node-view-wrapper":"",onDragStart:et,style:{whiteSpace:"normal",...it.style}})});React$2.createContext({markViewContentRef:()=>{}});var h=(it,g)=>{if(it==="slot")return 0;if(it instanceof Function)return it(g);const{children:et,...ot}=g??{};if(it==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[it,ot,et]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:it}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:it})=>it.wrapIn(this.name),toggleBlockquote:()=>({commands:it})=>it.toggleWrap(this.name),unsetBlockquote:()=>({commands:it})=>it.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$a=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:it=>it.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:it=>it.type.name===this.name},{style:"font-weight",getAttrs:it=>/^(bold(er)?|[5-9]\d{2,})$/.test(it)&&null}]},renderHTML({HTMLAttributes:it}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:it})=>it.setMark(this.name),toggleBold:()=>({commands:it})=>it.toggleMark(this.name),unsetBold:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:it}){return["code",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setCode:()=>({commands:it})=>it.setMark(this.name),toggleCode:()=>({commands:it})=>it.toggleMark(this.name),unsetCode:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:it=>{var g;const{languageClassPrefix:et}=this.options;if(!et)return null;const ut=[...((g=it.firstElementChild)==null?void 0:g.classList)||[]].filter(dt=>dt.startsWith(et)).map(dt=>dt.replace(et,""))[0];return ut||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:it,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:it.attrs.language?this.options.languageClassPrefix+it.attrs.language:null},0]]},addCommands(){return{setCodeBlock:it=>({commands:g})=>g.setNode(this.name,it),toggleCodeBlock:it=>({commands:g})=>g.toggleNode(this.name,"paragraph",it)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:it,$anchor:g}=this.editor.state.selection,et=g.pos===1;return!it||g.parent.type.name!==this.name?!1:et||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;if(ut.parent.type!==this.type)return!1;const ft=" ".repeat(et);return dt?it.commands.insertContent(ft):it.commands.command(({tr:St})=>{const{from:kt,to:Tt}=ct,Ft=ot.doc.textBetween(kt,Tt,`
`,`
`).split(`
`).map($t=>ft+$t).join(`
`);return St.replaceWith(kt,Tt,ot.schema.text(Ft)),!0})},"Shift-Tab":({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;return ut.parent.type!==this.type?!1:dt?it.commands.command(({tr:ft})=>{var St;const{pos:kt}=ut,Tt=ut.start(),Rt=ut.end(),Ft=ot.doc.textBetween(Tt,Rt,`
`,`
`).split(`
`);let $t=0,zt=0;const Ut=kt-Tt;for(let nn=0;nn<Ft.length;nn+=1){if(zt+Ft[nn].length>=Ut){$t=nn;break}zt+=Ft[nn].length+1}const Ht=((St=Ft[$t].match(/^ */))==null?void 0:St[0])||"",Jt=Math.min(Ht.length,et);if(Jt===0)return!0;let Zt=Tt;for(let nn=0;nn<$t;nn+=1)Zt+=Ft[nn].length+1;return ft.delete(Zt,Zt+Jt),kt-Zt<=Jt&&ft.setSelection(TextSelection.create(ft.doc,Zt)),!0}):it.commands.command(({tr:ft})=>{const{from:St,to:kt}=ct,jt=ot.doc.textBetween(St,kt,`
`,`
`).split(`
`).map(Ft=>{var $t;const zt=(($t=Ft.match(/^ */))==null?void 0:$t[0])||"",Ut=Math.min(zt.length,et);return Ft.slice(Ut)}).join(`
`);return ft.replaceWith(St,kt,ot.schema.text(jt)),!0})},Enter:({editor:it})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=it,{selection:et}=g,{$from:ot,empty:ct}=et;if(!ct||ot.parent.type!==this.type)return!1;const ut=ot.parentOffset===ot.parent.nodeSize-2,dt=ot.parent.textContent.endsWith(`

`);return!ut||!dt?!1:it.chain().command(({tr:ft})=>(ft.delete(ot.pos-2,ot.pos),!0)).exitCode().run()},ArrowDown:({editor:it})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=it,{selection:et,doc:ot}=g,{$from:ct,empty:ut}=et;if(!ut||ct.parent.type!==this.type||!(ct.parentOffset===ct.parent.nodeSize-2))return!1;const ft=ct.after();return ft===void 0?!1:ot.nodeAt(ft)?it.commands.command(({tr:kt})=>(kt.setSelection(Selection.near(ot.resolve(ft))),!0)):it.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:it=>({language:it[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:it=>({language:it[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(it,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const et=g.clipboardData.getData("text/plain"),ot=g.clipboardData.getData("vscode-editor-data"),ct=ot?JSON.parse(ot):void 0,ut=ct==null?void 0:ct.mode;if(!et||!ut)return!1;const{tr:dt,schema:ft}=it.state,St=ft.text(et.replace(/\r\n?/g,`
`));return dt.replaceSelectionWith(this.type.create({language:ut},St)),dt.selection.$from.parent.type!==this.type&&dt.setSelection(TextSelection.near(dt.doc.resolve(Math.max(0,dt.selection.from-2)))),dt.setMeta("paste",!0),it.dispatch(dt),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:it}){return["br",mergeAttributes(this.options.HTMLAttributes,it)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:it,chain:g,state:et,editor:ot})=>it.first([()=>it.exitCode(),()=>it.command(()=>{const{selection:ct,storedMarks:ut}=et;if(ct.$from.parent.type.spec.isolating)return!1;const{keepMarks:dt}=this.options,{splittableMarks:ft}=ot.extensionManager,St=ut||ct.$to.parentOffset&&ct.$from.marks();return g().insertContent({type:this.name}).command(({tr:kt,dispatch:Tt})=>{if(Tt&&St&&dt){const Rt=St.filter(jt=>ft.includes(jt.type.name));kt.ensureMarks(Rt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(it=>({tag:`h${it}`,attrs:{level:it}}))},renderHTML({node:it,HTMLAttributes:g}){return[`h${this.options.levels.includes(it.attrs.level)?it.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.setNode(this.name,it):!1,toggleHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.toggleNode(this.name,"paragraph",it):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((it,g)=>({...it,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(it=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${it}})\\s$`),type:this.type,getAttributes:{level:it}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:it}){return["hr",mergeAttributes(this.options.HTMLAttributes,it)]},addCommands(){return{setHorizontalRule:()=>({chain:it,state:g})=>{if(!canInsertNode(g,g.schema.nodes[this.name]))return!1;const{selection:et}=g,{$to:ot}=et,ct=it();return isNodeSelection(et)?ct.insertContentAt(ot.pos,{type:this.name}):ct.insertContent({type:this.name}),ct.command(({state:ut,tr:dt,dispatch:ft})=>{if(ft){const{$to:St}=dt.selection,kt=St.end();if(St.nodeAfter)St.nodeAfter.isTextblock?dt.setSelection(TextSelection.create(dt.doc,St.pos+1)):St.nodeAfter.isBlock?dt.setSelection(NodeSelection.create(dt.doc,St.pos)):dt.setSelection(TextSelection.create(dt.doc,St.pos));else{const Tt=ut.schema.nodes[this.options.nextNodeType]||St.parent.type.contentMatch.defaultType,Rt=Tt==null?void 0:Tt.create();Rt&&(dt.insert(kt,Rt),dt.setSelection(TextSelection.create(dt.doc,kt+1)))}dt.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:it=>it.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:it=>it.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:it}){return["em",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setItalic:()=>({commands:it})=>it.setMark(this.name),toggleItalic:()=>({commands:it})=>it.toggleMark(this.name),unsetItalic:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(it,g){return it in g||(g[it]=[]),g[it]}function addToGroups(it,g,et){g[numeric]&&(g[asciinumeric]=!0,g[alphanumeric]=!0),g[ascii]&&(g[asciinumeric]=!0,g[alpha]=!0),g[asciinumeric]&&(g[alphanumeric]=!0),g[alpha]&&(g[alphanumeric]=!0),g[alphanumeric]&&(g[domain]=!0),g[emoji]&&(g[domain]=!0);for(const ot in g){const ct=registerGroup(ot,et);ct.indexOf(it)<0&&ct.push(it)}}function flagsForToken(it,g){const et={};for(const ot in g)g[ot].indexOf(it)>=0&&(et[ot]=!0);return et}function State(it=null){this.j={},this.jr=[],this.jd=null,this.t=it}State.groups={};State.prototype={accepts(){return!!this.t},go(it){const g=this,et=g.j[it];if(et)return et;for(let ot=0;ot<g.jr.length;ot++){const ct=g.jr[ot][0],ut=g.jr[ot][1];if(ut&&ct.test(it))return ut}return g.jd},has(it,g=!1){return g?it in this.j:!!this.go(it)},ta(it,g,et,ot){for(let ct=0;ct<it.length;ct++)this.tt(it[ct],g,et,ot)},tr(it,g,et,ot){ot=ot||State.groups;let ct;return g&&g.j?ct=g:(ct=new State(g),et&&ot&&addToGroups(g,et,ot)),this.jr.push([it,ct]),ct},ts(it,g,et,ot){let ct=this;const ut=it.length;if(!ut)return ct;for(let dt=0;dt<ut-1;dt++)ct=ct.tt(it[dt]);return ct.tt(it[ut-1],g,et,ot)},tt(it,g,et,ot){ot=ot||State.groups;const ct=this;if(g&&g.j)return ct.j[it]=g,g;const ut=g;let dt,ft=ct.go(it);if(ft?(dt=new State,Object.assign(dt.j,ft.j),dt.jr.push.apply(dt.jr,ft.jr),dt.jd=ft.jd,dt.t=ft.t):dt=new State,ut){if(ot)if(dt.t&&typeof dt.t=="string"){const St=Object.assign(flagsForToken(dt.t,ot),et);addToGroups(ut,St,ot)}else et&&addToGroups(ut,et,ot);dt.t=ut}return ct.j[it]=dt,dt}};const ta=(it,g,et,ot,ct)=>it.ta(g,et,ot,ct),tr=(it,g,et,ot,ct)=>it.tr(g,et,ot,ct),ts=(it,g,et,ot,ct)=>it.ts(g,et,ot,ct),tt=(it,g,et,ot,ct)=>it.tt(g,et,ot,ct),WORD$1="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA$1="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS$1="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA:COMMA$1,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS:EQUALS$1,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD:WORD$1,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE$2=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(it=[]){const g={};State.groups=g;const et=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(et,"'",APOSTROPHE),tt(et,"{",OPENBRACE),tt(et,"}",CLOSEBRACE),tt(et,"[",OPENBRACKET),tt(et,"]",CLOSEBRACKET),tt(et,"(",OPENPAREN),tt(et,")",CLOSEPAREN),tt(et,"<",OPENANGLEBRACKET),tt(et,">",CLOSEANGLEBRACKET),tt(et,"",FULLWIDTHLEFTPAREN),tt(et,"",FULLWIDTHRIGHTPAREN),tt(et,"",LEFTCORNERBRACKET),tt(et,"",RIGHTCORNERBRACKET),tt(et,"",LEFTWHITECORNERBRACKET),tt(et,"",RIGHTWHITECORNERBRACKET),tt(et,"",FULLWIDTHLESSTHAN),tt(et,"",FULLWIDTHGREATERTHAN),tt(et,"&",AMPERSAND),tt(et,"*",ASTERISK),tt(et,"@",AT),tt(et,"`",BACKTICK),tt(et,"^",CARET),tt(et,":",COLON),tt(et,",",COMMA$1),tt(et,"$",DOLLAR),tt(et,".",DOT),tt(et,"=",EQUALS$1),tt(et,"!",EXCLAMATION),tt(et,"-",HYPHEN),tt(et,"%",PERCENT),tt(et,"|",PIPE),tt(et,"+",PLUS),tt(et,"#",POUND),tt(et,"?",QUERY),tt(et,'"',QUOTE),tt(et,"/",SLASH),tt(et,";",SEMI),tt(et,"~",TILDE),tt(et,"_",UNDERSCORE),tt(et,"\\",BACKSLASH),tt(et,"",FULLWIDTHMIDDLEDOT);const ot=tr(et,DIGIT,NUM,{[numeric]:!0});tr(ot,DIGIT,ot);const ct=tr(ot,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),ut=tr(ot,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),dt=tr(et,ASCII_LETTER,WORD$1,{[ascii]:!0});tr(dt,DIGIT,ct),tr(dt,ASCII_LETTER,dt),tr(ct,DIGIT,ct),tr(ct,ASCII_LETTER,ct);const ft=tr(et,LETTER,UWORD,{[alpha]:!0});tr(ft,ASCII_LETTER),tr(ft,DIGIT,ut),tr(ft,LETTER,ft),tr(ut,DIGIT,ut),tr(ut,ASCII_LETTER),tr(ut,LETTER,ut);const St=tt(et,LF,NL,{[whitespace]:!0}),kt=tt(et,CR,WS,{[whitespace]:!0}),Tt=tr(et,SPACE$2,WS,{[whitespace]:!0});tt(et,OBJECT_REPLACEMENT,Tt),tt(kt,LF,St),tt(kt,OBJECT_REPLACEMENT,Tt),tr(kt,SPACE$2,Tt),tt(Tt,CR),tt(Tt,LF),tr(Tt,SPACE$2,Tt),tt(Tt,OBJECT_REPLACEMENT,Tt);const Rt=tr(et,EMOJI,EMOJI$1,{[emoji]:!0});tt(Rt,"#"),tr(Rt,EMOJI,Rt),tt(Rt,EMOJI_VARIATION,Rt);const jt=tt(Rt,EMOJI_JOINER);tt(jt,"#"),tr(jt,EMOJI,Rt);const Ft=[[ASCII_LETTER,dt],[DIGIT,ct]],$t=[[ASCII_LETTER,null],[LETTER,ft],[DIGIT,ut]];for(let zt=0;zt<tlds.length;zt++)fastts(et,tlds[zt],TLD,WORD$1,Ft);for(let zt=0;zt<utlds.length;zt++)fastts(et,utlds[zt],UTLD,UWORD,$t);addToGroups(TLD,{tld:!0,ascii:!0},g),addToGroups(UTLD,{utld:!0,alpha:!0},g),fastts(et,"file",SCHEME,WORD$1,Ft),fastts(et,"mailto",SCHEME,WORD$1,Ft),fastts(et,"http",SLASH_SCHEME,WORD$1,Ft),fastts(et,"https",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftp",SLASH_SCHEME,WORD$1,Ft),fastts(et,"ftps",SLASH_SCHEME,WORD$1,Ft),addToGroups(SCHEME,{scheme:!0,ascii:!0},g),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},g),it=it.sort((zt,Ut)=>zt[0]>Ut[0]?1:-1);for(let zt=0;zt<it.length;zt++){const Ut=it[zt][0],Ht=it[zt][1]?{[scheme]:!0}:{[slashscheme]:!0};Ut.indexOf("-")>=0?Ht[domain]=!0:ASCII_LETTER.test(Ut)?DIGIT.test(Ut)?Ht[asciinumeric]=!0:Ht[ascii]=!0:Ht[numeric]=!0,ts(et,Ut,Ut,Ht)}return ts(et,"localhost",LOCALHOST,{ascii:!0}),et.jd=new State(SYM),{start:et,tokens:Object.assign({groups:g},tk)}}function run$1(it,g){const et=stringToArray$1(g.replace(/[A-Z]/g,ft=>ft.toLowerCase())),ot=et.length,ct=[];let ut=0,dt=0;for(;dt<ot;){let ft=it,St=null,kt=0,Tt=null,Rt=-1,jt=-1;for(;dt<ot&&(St=ft.go(et[dt]));)ft=St,ft.accepts()?(Rt=0,jt=0,Tt=ft):Rt>=0&&(Rt+=et[dt].length,jt++),kt+=et[dt].length,ut+=et[dt].length,dt++;ut-=Rt,dt-=jt,kt-=Rt,ct.push({t:Tt.t,v:g.slice(ut-kt,ut),s:ut-kt,e:ut})}return ct}function stringToArray$1(it){const g=[],et=it.length;let ot=0;for(;ot<et;){let ct=it.charCodeAt(ot),ut,dt=ct<55296||ct>56319||ot+1===et||(ut=it.charCodeAt(ot+1))<56320||ut>57343?it[ot]:it.slice(ot,ot+2);g.push(dt),ot+=dt.length}return g}function fastts(it,g,et,ot,ct){let ut;const dt=g.length;for(let ft=0;ft<dt-1;ft++){const St=g[ft];it.j[St]?ut=it.j[St]:(ut=new State(ot),ut.jr=ct.slice(),it.j[St]=ut),it=ut}return ut=new State(et),ut.jr=ct.slice(),it.j[g[dt-1]]=ut,ut}function decodeTlds(it){const g=[],et=[];let ot=0,ct="0123456789";for(;ot<it.length;){let ut=0;for(;ct.indexOf(it[ot+ut])>=0;)ut++;if(ut>0){g.push(et.join(""));for(let dt=parseInt(it.substring(ot,ot+ut),10);dt>0;dt--)et.pop();ot+=ut}else et.push(it[ot]),ot++}return g}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(it,g=null){let et=Object.assign({},defaults);it&&(et=Object.assign(et,it instanceof Options?it.o:it));const ot=et.ignoreTags,ct=[];for(let ut=0;ut<ot.length;ut++)ct.push(ot[ut].toUpperCase());this.o=et,g&&(this.defaultRender=g),this.ignoreTags=ct}Options.prototype={o:defaults,ignoreTags:[],defaultRender(it){return it},check(it){return this.get("validate",it.toString(),it)},get(it,g,et){const ot=g!=null;let ct=this.o[it];return ct&&(typeof ct=="object"?(ct=et.t in ct?ct[et.t]:defaults[it],typeof ct=="function"&&ot&&(ct=ct(g,et))):typeof ct=="function"&&ot&&(ct=ct(g,et.t,et)),ct)},getObj(it,g,et){let ot=this.o[it];return typeof ot=="function"&&g!=null&&(ot=ot(g,et.t,et)),ot},render(it){const g=it.render(this);return(this.get("render",null,it)||this.defaultRender)(g,it.t,it)}};function noop(it){return it}function MultiToken(it,g){this.t="token",this.v=it,this.tk=g}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(it){return this.toString()},toFormattedString(it){const g=this.toString(),et=it.get("truncate",g,this),ot=it.get("format",g,this);return et&&ot.length>et?ot.substring(0,et)+"":ot},toFormattedHref(it){return it.get("formatHref",this.toHref(it.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(it=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(it),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(it){return{type:this.t,value:this.toFormattedString(it),isLink:this.isLink,href:this.toFormattedHref(it),start:this.startIndex(),end:this.endIndex()}},validate(it){return it.get("validate",this.toString(),this)},render(it){const g=this,et=this.toHref(it.get("defaultProtocol")),ot=it.get("formatHref",et,this),ct=it.get("tagName",et,g),ut=this.toFormattedString(it),dt={},ft=it.get("className",et,g),St=it.get("target",et,g),kt=it.get("rel",et,g),Tt=it.getObj("attributes",et,g),Rt=it.getObj("events",et,g);return dt.href=ot,ft&&(dt.class=ft),St&&(dt.target=St),kt&&(dt.rel=kt),Tt&&Object.assign(dt,Tt),{tagName:ct,attributes:dt,content:ut,eventListeners:Rt}}};function createTokenClass(it,g){class et extends MultiToken{constructor(ct,ut){super(ct,ut),this.t=it}}for(const ot in g)et.prototype[ot]=g[ot];return et.t=it,et}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$4=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(it=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${it}://${this.v}`},hasProtocol(){const it=this.tk;return it.length>=2&&it[0].t!==LOCALHOST&&it[1].t===COLON}}),makeState=it=>new State(it);function init$1({groups:it}){const g=it.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),et=[APOSTROPHE,COLON,COMMA$1,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],ot=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ct=makeState(),ut=tt(ct,TILDE);ta(ut,ot,ut),ta(ut,it.domain,ut);const dt=makeState(),ft=makeState(),St=makeState();ta(ct,it.domain,dt),ta(ct,it.scheme,ft),ta(ct,it.slashscheme,St),ta(dt,ot,ut),ta(dt,it.domain,dt);const kt=tt(dt,AT);tt(ut,AT,kt),tt(ft,AT,kt),tt(St,AT,kt);const Tt=tt(ut,DOT);ta(Tt,ot,ut),ta(Tt,it.domain,ut);const Rt=makeState();ta(kt,it.domain,Rt),ta(Rt,it.domain,Rt);const jt=tt(Rt,DOT);ta(jt,it.domain,Rt);const Ft=makeState(Email);ta(jt,it.tld,Ft),ta(jt,it.utld,Ft),tt(kt,LOCALHOST,Ft);const $t=tt(Rt,HYPHEN);tt($t,HYPHEN,$t),ta($t,it.domain,Rt),ta(Ft,it.domain,Rt),tt(Ft,DOT,jt),tt(Ft,HYPHEN,$t);const zt=tt(Ft,COLON);ta(zt,it.numeric,Email);const Ut=tt(dt,HYPHEN),Bt=tt(dt,DOT);tt(Ut,HYPHEN,Ut),ta(Ut,it.domain,dt),ta(Bt,ot,ut),ta(Bt,it.domain,dt);const Ht=makeState(Url);ta(Bt,it.tld,Ht),ta(Bt,it.utld,Ht),ta(Ht,it.domain,dt),ta(Ht,ot,ut),tt(Ht,DOT,Bt),tt(Ht,HYPHEN,Ut),tt(Ht,AT,kt);const Jt=tt(Ht,COLON),Zt=makeState(Url);ta(Jt,it.numeric,Zt);const tn=makeState(Url),nn=makeState();ta(tn,g,tn),ta(tn,et,nn),ta(nn,g,tn),ta(nn,et,nn),tt(Ht,SLASH,tn),tt(Zt,SLASH,tn);const rn=tt(ft,COLON),on=tt(St,COLON),pn=tt(on,SLASH),dn=tt(pn,SLASH);ta(ft,it.domain,dt),tt(ft,DOT,Bt),tt(ft,HYPHEN,Ut),ta(St,it.domain,dt),tt(St,DOT,Bt),tt(St,HYPHEN,Ut),ta(rn,it.domain,tn),tt(rn,SLASH,tn),tt(rn,QUERY,tn),ta(dn,it.domain,tn),ta(dn,g,tn),tt(dn,SLASH,tn);const hn=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let un=0;un<hn.length;un++){const[En,wn]=hn[un],Sn=tt(tn,En);tt(nn,En,Sn),tt(Sn,wn,tn);const fn=makeState(Url);ta(Sn,g,fn);const xn=makeState();ta(Sn,et),ta(fn,g,fn),ta(fn,et,xn),ta(xn,g,fn),ta(xn,et,xn),tt(fn,wn,tn),tt(xn,wn,tn)}return tt(ct,LOCALHOST,Ht),tt(ct,NL,Nl),{start:ct,tokens:tk}}function run(it,g,et){let ot=et.length,ct=0,ut=[],dt=[];for(;ct<ot;){let ft=it,St=null,kt=null,Tt=0,Rt=null,jt=-1;for(;ct<ot&&!(St=ft.go(et[ct].t));)dt.push(et[ct++]);for(;ct<ot&&(kt=St||ft.go(et[ct].t));)St=null,ft=kt,ft.accepts()?(jt=0,Rt=ft):jt>=0&&jt++,ct++,Tt++;if(jt<0)ct-=Tt,ct<ot&&(dt.push(et[ct]),ct++);else{dt.length>0&&(ut.push(initMultiToken(Text$4,g,dt)),dt=[]),ct-=jt,Tt-=jt;const Ft=Rt.t,$t=et.slice(ct-Tt,ct);ut.push(initMultiToken(Ft,g,$t))}}return dt.length>0&&ut.push(initMultiToken(Text$4,g,dt)),ut}function initMultiToken(it,g,et){const ot=et[0].s,ct=et[et.length-1].e,ut=g.slice(ot,ct);return new it(ut,et)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(it,g=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${it}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(it))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([it,g])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let it=0;it<INIT.tokenQueue.length;it++)INIT.tokenQueue[it][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let it=0;it<INIT.pluginQueue.length;it++)INIT.pluginQueue[it][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(it){return INIT.initialized||init(),run(INIT.parser.start,it,run$1(INIT.scanner.start,it))}tokenize.scan=run$1;function find$1(it,g=null,et=null){if(g&&typeof g=="object"){if(et)throw Error(`linkifyjs: Invalid link type ${g}; must be a string`);et=g,g=null}const ot=new Options(et),ct=tokenize(it),ut=[];for(let dt=0;dt<ct.length;dt++){const ft=ct[dt];ft.isLink&&(!g||ft.t===g)&&ot.check(ft)&&ut.push(ft.toFormattedObject(ot))}return ut}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(it){return it.length===1?it[0].isLink:it.length===3&&it[1].isLink?["()","[]"].includes(it[0].value+it[2].value):!1}function autolink(it){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(g,et,ot)=>{const ct=g.some(kt=>kt.docChanged)&&!et.doc.eq(ot.doc),ut=g.some(kt=>kt.getMeta("preventAutolink"));if(!ct||ut)return;const{tr:dt}=ot,ft=combineTransactionSteps(et.doc,[...g]);if(getChangedRanges(ft).forEach(({newRange:kt})=>{const Tt=findChildrenInRange(ot.doc,kt,Ft=>Ft.isTextblock);let Rt,jt;if(Tt.length>1)Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,Rt.pos+Rt.node.nodeSize,void 0," ");else if(Tt.length){const Ft=ot.doc.textBetween(kt.from,kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(Ft))return;Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,kt.to,void 0," ")}if(Rt&&jt){const Ft=jt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(Ft.length<=0)return!1;const $t=Ft[Ft.length-1],zt=Rt.pos+jt.lastIndexOf($t);if(!$t)return!1;const Ut=tokenize($t).map(Bt=>Bt.toObject(it.defaultProtocol));if(!isValidLinkStructure(Ut))return!1;Ut.filter(Bt=>Bt.isLink).map(Bt=>({...Bt,from:zt+Bt.start+1,to:zt+Bt.end+1})).filter(Bt=>ot.schema.marks.code?!ot.doc.rangeHasMark(Bt.from,Bt.to,ot.schema.marks.code):!0).filter(Bt=>it.validate(Bt.value)).filter(Bt=>it.shouldAutoLink(Bt.value)).forEach(Bt=>{getMarksBetween(Bt.from,Bt.to,ot.doc).some(Ht=>Ht.mark.type===it.type)||dt.addMark(Bt.from,Bt.to,it.type.create({href:Bt.href}))})}}),!!dt.steps.length)return dt}})}function clickHandler(it){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(g,et,ot)=>{var ct,ut;if(ot.button!==0||!g.editable)return!1;let dt=null;if(ot.target instanceof HTMLAnchorElement)dt=ot.target;else{let Tt=ot.target;const Rt=[];for(;Tt.nodeName!=="DIV";)Rt.push(Tt),Tt=Tt.parentNode;dt=Rt.find(jt=>jt.nodeName==="A")}if(!dt)return!1;const ft=getAttributes$1(g.state,it.type.name),St=(ct=dt==null?void 0:dt.href)!=null?ct:ft.href,kt=(ut=dt==null?void 0:dt.target)!=null?ut:ft.target;return it.enableClickSelection&&it.editor.commands.extendMarkRange(it.type.name),dt&&St?(window.open(St,kt),!0):!1}}})}function pasteHandler(it){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(g,et,ot)=>{const{state:ct}=g,{selection:ut}=ct,{empty:dt}=ut;if(dt)return!1;let ft="";ot.content.forEach(kt=>{ft+=kt.textContent});const St=find$1(ft,{defaultProtocol:it.defaultProtocol}).find(kt=>kt.isLink&&kt.value===ft);return!ft||!St?!1:it.editor.commands.setMark(it.type,{href:St.href})}}})}function isAllowedUri(it,g){const et=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return g&&g.forEach(ot=>{const ct=typeof ot=="string"?ot:ot.scheme;ct&&et.push(ct)}),!it||it.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${et.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(it=>{if(typeof it=="string"){registerCustomProtocol(it);return}registerCustomProtocol(it.scheme,it.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(it,g)=>!!isAllowedUri(it,g.protocols),validate:it=>!!it,shouldAutoLink:it=>!!it}},addAttributes(){return{href:{default:null,parseHTML(it){return it.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:it=>{const g=it.getAttribute("href");return!g||!this.options.isAllowedUri(g,{defaultValidate:et=>!!isAllowedUri(et,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:it}){return this.options.isAllowedUri(it.href,{defaultValidate:g=>!!isAllowedUri(g,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,it),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...it,href:""}),0]},addCommands(){return{setLink:it=>({chain:g})=>{const{href:et}=it;return this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?g().setMark(this.name,it).setMeta("preventAutolink",!0).run():!1},toggleLink:it=>({chain:g})=>{const{href:et}=it||{};return et&&!this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:g().toggleMark(this.name,it,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:it})=>it().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:it=>{const g=[];if(it){const{protocols:et,defaultProtocol:ot}=this.options,ct=find$1(it).filter(ut=>ut.isLink&&this.options.isAllowedUri(ut.value,{defaultValidate:dt=>!!isAllowedUri(dt,et),protocols:et,defaultProtocol:ot}));ct.length&&ct.forEach(ut=>g.push({text:ut.value,data:{href:ut.href},index:ut.start}))}return g},type:this.type,getAttributes:it=>{var g;return{href:(g=it.data)==null?void 0:g.href}}})]},addProseMirrorPlugins(){const it=[],{protocols:g,defaultProtocol:et}=this.options;return this.options.autolink&&it.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:ot=>this.options.isAllowedUri(ot,{defaultValidate:ct=>!!isAllowedUri(ct,g),protocols:g,defaultProtocol:et}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&it.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&it.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),it}}),index_default$9=Link,__defProp$1=Object.defineProperty,__export=(it,g)=>{for(var et in g)__defProp$1(it,et,{get:g[et],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleBulletList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let it=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[it]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:it}){return["li",mergeAttributes(this.options.HTMLAttributes,it),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(it,g)=>{const{$from:et}=g.selection,ot=getNodeType(it,g.schema);let ct=null,ut=et.depth,dt=et.pos,ft=null;for(;ut>0&&ft===null;)ct=et.node(ut),ct.type===ot?ft=ut:(ut-=1,dt-=1);return ft===null?null:{$pos:g.doc.resolve(dt),depth:ft}},getNextListDepth=(it,g)=>{const et=findListItemPos(it,g);if(!et)return!1;const[,ot]=getNodeAtPosition(g,it,et.$pos.pos+4);return ot},hasListBefore=(it,g,et)=>{const{$anchor:ot}=it.selection,ct=Math.max(0,ot.pos-2),ut=it.doc.resolve(ct).node();return!(!ut||!et.includes(ut.type.name))},hasListItemBefore=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-2);return!(ct.index()===0||((et=ct.nodeBefore)==null?void 0:et.type.name)!==it)},listItemHasSubList=(it,g,et)=>{if(!et)return!1;const ot=getNodeType(it,g.schema);let ct=!1;return et.descendants(ut=>{ut.type===ot&&(ct=!0)}),ct},handleBackspace=(it,g,et)=>{if(it.commands.undoInputRule())return!0;if(it.state.selection.from!==it.state.selection.to)return!1;if(!isNodeActive(it.state,g)&&hasListBefore(it.state,g,et)){const{$anchor:ft}=it.state.selection,St=it.state.doc.resolve(ft.before()-1),kt=[];St.node().descendants((jt,Ft)=>{jt.type.name===g&&kt.push({node:jt,pos:Ft})});const Tt=kt.at(-1);if(!Tt)return!1;const Rt=it.state.doc.resolve(St.start()+Tt.pos+1);return it.chain().cut({from:ft.start()-1,to:ft.end()+1},Rt.end()).joinForward().run()}if(!isNodeActive(it.state,g)||!isAtStartOfNode(it.state))return!1;const ot=findListItemPos(g,it.state);if(!ot)return!1;const ut=it.state.doc.resolve(ot.$pos.pos-2).node(ot.depth),dt=listItemHasSubList(g,it.state,ut);return hasListItemBefore(g,it.state)&&!dt?it.commands.joinItemBackward():it.chain().liftListItem(g).run()},nextListIsDeeper=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et>ot.depth},nextListIsHigher=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et<ot.depth},handleDelete=(it,g)=>{if(!isNodeActive(it.state,g)||!isAtEndOfNode(it.state,g))return!1;const{selection:et}=it.state,{$from:ot,$to:ct}=et;return!et.empty&&ot.sameParent(ct)?!1:nextListIsDeeper(g,it.state)?it.chain().focus(it.state.selection.from+4).lift(g).joinBackward().run():nextListIsHigher(g,it.state)?it.chain().joinForward().joinBackward().run():it.commands.joinItemForward()},hasListItemAfter=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-ot.parentOffset-2);return!(ct.index()===ct.parent.childCount-1||((et=ct.nodeAfter)==null?void 0:et.type.name)!==it)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},"Mod-Delete":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},Backspace:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g},"Mod-Backspace":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:it=>it.hasAttribute("start")?parseInt(it.getAttribute("start")||"",10):1},type:{default:null,parseHTML:it=>it.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:it}){const{start:g,...et}=it;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,et),0]:["ol",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleOrderedList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let it=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1],editor:this.editor})),[it]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:it=>{const g=it.getAttribute("data-checked");return g===""||g==="true"},renderHTML:it=>({"data-checked":it.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:it,HTMLAttributes:g}){return["li",mergeAttributes(this.options.HTMLAttributes,g,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:it.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const it={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...it,Tab:()=>this.editor.commands.sinkListItem(this.name)}:it},addNodeView(){return({node:it,HTMLAttributes:g,getPos:et,editor:ot})=>{const ct=document.createElement("li"),ut=document.createElement("label"),dt=document.createElement("span"),ft=document.createElement("input"),St=document.createElement("div"),kt=Tt=>{var Rt,jt;ft.ariaLabel=((jt=(Rt=this.options.a11y)==null?void 0:Rt.checkboxLabel)==null?void 0:jt.call(Rt,Tt,ft.checked))||`Task item checkbox for ${Tt.textContent||"empty task item"}`};return kt(it),ut.contentEditable="false",ft.type="checkbox",ft.addEventListener("mousedown",Tt=>Tt.preventDefault()),ft.addEventListener("change",Tt=>{if(!ot.isEditable&&!this.options.onReadOnlyChecked){ft.checked=!ft.checked;return}const{checked:Rt}=Tt.target;ot.isEditable&&typeof et=="function"&&ot.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:jt})=>{const Ft=et();if(typeof Ft!="number")return!1;const $t=jt.doc.nodeAt(Ft);return jt.setNodeMarkup(Ft,void 0,{...$t==null?void 0:$t.attrs,checked:Rt}),!0}).run(),!ot.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(it,Rt)||(ft.checked=!ft.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Tt,Rt])=>{ct.setAttribute(Tt,Rt)}),ct.dataset.checked=it.attrs.checked,ft.checked=it.attrs.checked,ut.append(ft,dt),ct.append(ut,St),Object.entries(g).forEach(([Tt,Rt])=>{ct.setAttribute(Tt,Rt)}),{dom:ct,contentDOM:St,update:Tt=>Tt.type!==this.type?!1:(ct.dataset.checked=Tt.attrs.checked,ft.checked=Tt.attrs.checked,kt(Tt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:it=>({checked:it[it.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:it})=>it.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const it=[];return this.options.bulletList!==!1&&it.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&it.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&it.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&it.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&it.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&it.push(TaskList.configure(this.options.taskList)),it}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:it}){return["p",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setParagraph:()=>({commands:it})=>it.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["s",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setStrike:()=>({commands:it})=>it.setMark(this.name),toggleStrike:()=>({commands:it})=>it.toggleMark(this.name),unsetStrike:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$3=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["u",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setUnderline:()=>({commands:it})=>it.setMark(this.name),toggleUnderline:()=>({commands:it})=>it.toggleMark(this.name),unsetUnderline:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$8=Underline;function dropCursor(it={}){return new Plugin({view(g){return new DropCursorView(g,it)}})}class DropCursorView{constructor(g,et){var ot;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(ot=et.width)!==null&&ot!==void 0?ot:1,this.color=et.color===!1?void 0:et.color||"black",this.class=et.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ct=>{let ut=dt=>{this[ct](dt)};return g.dom.addEventListener(ct,ut),{name:ct,handler:ut}})}destroy(){this.handlers.forEach(({name:g,handler:et})=>this.editorView.dom.removeEventListener(g,et))}update(g,et){this.cursorPos!=null&&et.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),et=!g.parent.inlineContent,ot,ct=this.editorView.dom,ut=ct.getBoundingClientRect(),dt=ut.width/ct.offsetWidth,ft=ut.height/ct.offsetHeight;if(et){let Rt=g.nodeBefore,jt=g.nodeAfter;if(Rt||jt){let Ft=this.editorView.nodeDOM(this.cursorPos-(Rt?Rt.nodeSize:0));if(Ft){let $t=Ft.getBoundingClientRect(),zt=Rt?$t.bottom:$t.top;Rt&&jt&&(zt=(zt+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Ut=this.width/2*ft;ot={left:$t.left,right:$t.right,top:zt-Ut,bottom:zt+Ut}}}}if(!ot){let Rt=this.editorView.coordsAtPos(this.cursorPos),jt=this.width/2*dt;ot={left:Rt.left-jt,right:Rt.left+jt,top:Rt.top,bottom:Rt.bottom}}let St=this.editorView.dom.offsetParent;this.element||(this.element=St.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",et),this.element.classList.toggle("prosemirror-dropcursor-inline",!et);let kt,Tt;if(!St||St==document.body&&getComputedStyle(St).position=="static")kt=-pageXOffset,Tt=-pageYOffset;else{let Rt=St.getBoundingClientRect(),jt=Rt.width/St.offsetWidth,Ft=Rt.height/St.offsetHeight;kt=Rt.left-St.scrollLeft*jt,Tt=Rt.top-St.scrollTop*Ft}this.element.style.left=(ot.left-kt)/dt+"px",this.element.style.top=(ot.top-Tt)/ft+"px",this.element.style.width=(ot.right-ot.left)/dt+"px",this.element.style.height=(ot.bottom-ot.top)/ft+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let et=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),ot=et&&et.inside>=0&&this.editorView.state.doc.nodeAt(et.inside),ct=ot&&ot.type.spec.disableDropCursor,ut=typeof ct=="function"?ct(this.editorView,et,g):ct;if(et&&!ut){let dt=et.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ft=dropPoint(this.editorView.state.doc,dt,this.editorView.dragging.slice);ft!=null&&(dt=ft)}this.setCursor(dt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){this.editorView.dom.contains(g.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(g){super(g,g)}map(g,et){let ot=g.resolve(et.map(this.head));return GapCursor.valid(ot)?new GapCursor(ot):Selection.near(ot)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(et.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let et=g.parent;if(et.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let ot=et.type.spec.allowGapCursor;if(ot!=null)return ot;let ct=et.contentMatchAt(g.index()).defaultType;return ct&&ct.isTextblock}static findGapCursorFrom(g,et,ot=!1){e:for(;;){if(!ot&&GapCursor.valid(g))return g;let ct=g.pos,ut=null;for(let dt=g.depth;;dt--){let ft=g.node(dt);if(et>0?g.indexAfter(dt)<ft.childCount:g.index(dt)>0){ut=ft.child(et>0?g.indexAfter(dt):g.index(dt)-1);break}else if(dt==0)return null;ct+=et;let St=g.doc.resolve(ct);if(GapCursor.valid(St))return St}for(;;){let dt=et>0?ut.firstChild:ut.lastChild;if(!dt){if(ut.isAtom&&!ut.isText&&!NodeSelection.isSelectable(ut)){g=g.doc.resolve(ct+ut.nodeSize*et),ot=!1;continue e}break}ut=dt,ct+=et;let ft=g.doc.resolve(ct);if(GapCursor.valid(ft))return ft}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let et=g.resolve(this.pos);return GapCursor.valid(et)?new GapCursor(et):Selection.near(et)}}function closedBefore(it){for(let g=it.depth;g>=0;g--){let et=it.index(g),ot=it.node(g);if(et==0){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et-1);;ct=ct.lastChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function closedAfter(it){for(let g=it.depth;g>=0;g--){let et=it.indexAfter(g),ot=it.node(g);if(et==ot.childCount){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et);;ct=ct.firstChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(it,g,et){return g.pos==et.pos&&GapCursor.valid(et)?new GapCursor(et):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(it,g){const et=it=="vert"?g>0?"down":"up":g>0?"right":"left";return function(ot,ct,ut){let dt=ot.selection,ft=g>0?dt.$to:dt.$from,St=dt.empty;if(dt instanceof TextSelection){if(!ut.endOfTextblock(et)||ft.depth==0)return!1;St=!1,ft=ot.doc.resolve(g>0?ft.after():ft.before())}let kt=GapCursor.findGapCursorFrom(ft,g,St);return kt?(ct&&ct(ot.tr.setSelection(new GapCursor(kt))),!0):!1}}function handleClick(it,g,et){if(!it||!it.editable)return!1;let ot=it.state.doc.resolve(g);if(!GapCursor.valid(ot))return!1;let ct=it.posAtCoords({left:et.clientX,top:et.clientY});return ct&&ct.inside>-1&&NodeSelection.isSelectable(it.state.doc.nodeAt(ct.inside))?!1:(it.dispatch(it.state.tr.setSelection(new GapCursor(ot))),!0)}function beforeinput(it,g){if(g.inputType!="insertCompositionText"||!(it.state.selection instanceof GapCursor))return!1;let{$from:et}=it.state.selection,ot=et.parent.contentMatchAt(et.index()).findWrapping(it.state.schema.nodes.text);if(!ot)return!1;let ct=Fragment.empty;for(let dt=ot.length-1;dt>=0;dt--)ct=Fragment.from(ot[dt].createAndFill(null,ct));let ut=it.state.tr.replace(et.pos,et.pos,new Slice(ct,0,0));return ut.setSelection(TextSelection.near(ut.doc.resolve(et.pos+1))),it.dispatch(ut),!1}function drawGapCursor(it){if(!(it.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(it.doc,[Decoration.widget(it.selection.head,g,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function it(){};RopeSequence.prototype.append=function it(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function it(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function it(g){return new Append(this,g)};RopeSequence.prototype.slice=function it(g,et){return g===void 0&&(g=0),et===void 0&&(et=this.length),g>=et?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,et))};RopeSequence.prototype.get=function it(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length),et<=ot?this.forEachInner(g,et,ot,0):this.forEachInvertedInner(g,et,ot,0)};RopeSequence.prototype.map=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length);var ct=[];return this.forEach(function(ut,dt){return ct.push(g(ut,dt))},et,ot),ct};RopeSequence.from=function it(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(it){function g(ot){it.call(this),this.values=ot}it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g;var et={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function(ct,ut){return ct==0&&ut==this.length?this:new g(this.values.slice(ct,ut))},g.prototype.getInner=function(ct){return this.values[ct]},g.prototype.forEachInner=function(ct,ut,dt,ft){for(var St=ut;St<dt;St++)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.forEachInvertedInner=function(ct,ut,dt,ft){for(var St=ut-1;St>=dt;St--)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.leafAppend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(this.values.concat(ct.flatten()))},g.prototype.leafPrepend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(ct.flatten().concat(this.values))},et.length.get=function(){return this.values.length},et.depth.get=function(){return 0},Object.defineProperties(g.prototype,et),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(it){function g(et,ot){it.call(this),this.left=et,this.right=ot,this.length=et.length+ot.length,this.depth=Math.max(et.depth,ot.depth)+1}return it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(ot){return ot<this.left.length?this.left.get(ot):this.right.get(ot-this.left.length)},g.prototype.forEachInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct<ft&&this.left.forEachInner(ot,ct,Math.min(ut,ft),dt)===!1||ut>ft&&this.right.forEachInner(ot,Math.max(ct-ft,0),Math.min(this.length,ut)-ft,dt+ft)===!1)return!1},g.prototype.forEachInvertedInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct>ft&&this.right.forEachInvertedInner(ot,ct-ft,Math.max(ut,ft)-ft,dt+ft)===!1||ut<ft&&this.left.forEachInvertedInner(ot,Math.min(ct,ft),ut,dt)===!1)return!1},g.prototype.sliceInner=function(ot,ct){if(ot==0&&ct==this.length)return this;var ut=this.left.length;return ct<=ut?this.left.slice(ot,ct):ot>=ut?this.right.slice(ot-ut,ct-ut):this.left.slice(ot,ut).append(this.right.slice(0,ct-ut))},g.prototype.leafAppend=function(ot){var ct=this.right.leafAppend(ot);if(ct)return new g(this.left,ct)},g.prototype.leafPrepend=function(ot){var ct=this.left.leafPrepend(ot);if(ct)return new g(ct,this.right)},g.prototype.appendInner=function(ot){return this.left.depth>=Math.max(this.right.depth,ot.depth)+1?new g(this.left,new g(this.right,ot)):new g(this,ot)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,et){this.items=g,this.eventCount=et}popEvent(g,et){if(this.eventCount==0)return null;let ot=this.items.length;for(;;ot--)if(this.items.get(ot-1).selection){--ot;break}let ct,ut;et&&(ct=this.remapping(ot,this.items.length),ut=ct.maps.length);let dt=g.tr,ft,St,kt=[],Tt=[];return this.items.forEach((Rt,jt)=>{if(!Rt.step){ct||(ct=this.remapping(ot,jt+1),ut=ct.maps.length),ut--,Tt.push(Rt);return}if(ct){Tt.push(new Item(Rt.map));let Ft=Rt.step.map(ct.slice(ut)),$t;Ft&&dt.maybeStep(Ft).doc&&($t=dt.mapping.maps[dt.mapping.maps.length-1],kt.push(new Item($t,void 0,void 0,kt.length+Tt.length))),ut--,$t&&ct.appendMap($t,ut)}else dt.maybeStep(Rt.step);if(Rt.selection)return ft=ct?Rt.selection.map(ct.slice(ut)):Rt.selection,St=new Branch(this.items.slice(0,ot).append(Tt.reverse().concat(kt)),this.eventCount-1),!1},this.items.length,0),{remaining:St,transform:dt,selection:ft}}addTransform(g,et,ot,ct){let ut=[],dt=this.eventCount,ft=this.items,St=!ct&&ft.length?ft.get(ft.length-1):null;for(let Tt=0;Tt<g.steps.length;Tt++){let Rt=g.steps[Tt].invert(g.docs[Tt]),jt=new Item(g.mapping.maps[Tt],Rt,et),Ft;(Ft=St&&St.merge(jt))&&(jt=Ft,Tt?ut.pop():ft=ft.slice(0,ft.length-1)),ut.push(jt),et&&(dt++,et=void 0),ct||(St=jt)}let kt=dt-ot.depth;return kt>DEPTH_OVERFLOW&&(ft=cutOffEvents(ft,kt),dt-=kt),new Branch(ft.append(ut),dt)}remapping(g,et){let ot=new Mapping;return this.items.forEach((ct,ut)=>{let dt=ct.mirrorOffset!=null&&ut-ct.mirrorOffset>=g?ot.maps.length-ct.mirrorOffset:void 0;ot.appendMap(ct.map,dt)},g,et),ot}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(et=>new Item(et))),this.eventCount)}rebased(g,et){if(!this.eventCount)return this;let ot=[],ct=Math.max(0,this.items.length-et),ut=g.mapping,dt=g.steps.length,ft=this.eventCount;this.items.forEach(jt=>{jt.selection&&ft--},ct);let St=et;this.items.forEach(jt=>{let Ft=ut.getMirror(--St);if(Ft==null)return;dt=Math.min(dt,Ft);let $t=ut.maps[Ft];if(jt.step){let zt=g.steps[Ft].invert(g.docs[Ft]),Ut=jt.selection&&jt.selection.map(ut.slice(St+1,Ft));Ut&&ft++,ot.push(new Item($t,zt,Ut))}else ot.push(new Item($t))},ct);let kt=[];for(let jt=et;jt<dt;jt++)kt.push(new Item(ut.maps[jt]));let Tt=this.items.slice(0,ct).append(kt).append(ot),Rt=new Branch(Tt,ft);return Rt.emptyItemCount()>max_empty_items&&(Rt=Rt.compress(this.items.length-ot.length)),Rt}emptyItemCount(){let g=0;return this.items.forEach(et=>{et.step||g++}),g}compress(g=this.items.length){let et=this.remapping(0,g),ot=et.maps.length,ct=[],ut=0;return this.items.forEach((dt,ft)=>{if(ft>=g)ct.push(dt),dt.selection&&ut++;else if(dt.step){let St=dt.step.map(et.slice(ot)),kt=St&&St.getMap();if(ot--,kt&&et.appendMap(kt,ot),St){let Tt=dt.selection&&dt.selection.map(et.slice(ot));Tt&&ut++;let Rt=new Item(kt.invert(),St,Tt),jt,Ft=ct.length-1;(jt=ct.length&&ct[Ft].merge(Rt))?ct[Ft]=jt:ct.push(Rt)}}else dt.map&&ot--},this.items.length,0),new Branch(RopeSequence.from(ct.reverse()),ut)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(it,g){let et;return it.forEach((ot,ct)=>{if(ot.selection&&g--==0)return et=ct,!1}),it.slice(et)}class Item{constructor(g,et,ot,ct){this.map=g,this.step=et,this.selection=ot,this.mirrorOffset=ct}merge(g){if(this.step&&g.step&&!g.selection){let et=g.step.merge(this.step);if(et)return new Item(et.getMap().invert(),et,this.selection)}}}class HistoryState{constructor(g,et,ot,ct,ut){this.done=g,this.undone=et,this.prevRanges=ot,this.prevTime=ct,this.prevComposition=ut}}const DEPTH_OVERFLOW=20;function applyTransaction(it,g,et,ot){let ct=et.getMeta(historyKey),ut;if(ct)return ct.historyState;et.getMeta(closeHistoryKey)&&(it=new HistoryState(it.done,it.undone,null,0,-1));let dt=et.getMeta("appendedTransaction");if(et.steps.length==0)return it;if(dt&&dt.getMeta(historyKey))return dt.getMeta(historyKey).redo?new HistoryState(it.done.addTransform(et,void 0,ot,mustPreserveItems(g)),it.undone,rangesFor(et.mapping.maps),it.prevTime,it.prevComposition):new HistoryState(it.done,it.undone.addTransform(et,void 0,ot,mustPreserveItems(g)),null,it.prevTime,it.prevComposition);if(et.getMeta("addToHistory")!==!1&&!(dt&&dt.getMeta("addToHistory")===!1)){let ft=et.getMeta("composition"),St=it.prevTime==0||!dt&&it.prevComposition!=ft&&(it.prevTime<(et.time||0)-ot.newGroupDelay||!isAdjacentTo(et,it.prevRanges)),kt=dt?mapRanges(it.prevRanges,et.mapping):rangesFor(et.mapping.maps);return new HistoryState(it.done.addTransform(et,St?g.selection.getBookmark():void 0,ot,mustPreserveItems(g)),Branch.empty,kt,et.time,ft??it.prevComposition)}else return(ut=et.getMeta("rebased"))?new HistoryState(it.done.rebased(et,ut),it.undone.rebased(et,ut),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition):new HistoryState(it.done.addMaps(et.mapping.maps),it.undone.addMaps(et.mapping.maps),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition)}function isAdjacentTo(it,g){if(!g)return!1;if(!it.docChanged)return!0;let et=!1;return it.mapping.maps[0].forEach((ot,ct)=>{for(let ut=0;ut<g.length;ut+=2)ot<=g[ut+1]&&ct>=g[ut]&&(et=!0)}),et}function rangesFor(it){let g=[];for(let et=it.length-1;et>=0&&g.length==0;et--)it[et].forEach((ot,ct,ut,dt)=>g.push(ut,dt));return g}function mapRanges(it,g){if(!it)return null;let et=[];for(let ot=0;ot<it.length;ot+=2){let ct=g.map(it[ot],1),ut=g.map(it[ot+1],-1);ct<=ut&&et.push(ct,ut)}return et}function histTransaction(it,g,et){let ot=mustPreserveItems(g),ct=historyKey.get(g).spec.config,ut=(et?it.undone:it.done).popEvent(g,ot);if(!ut)return null;let dt=ut.selection.resolve(ut.transform.doc),ft=(et?it.done:it.undone).addTransform(ut.transform,g.selection.getBookmark(),ct,ot),St=new HistoryState(et?ft:ut.remaining,et?ut.remaining:ft,null,0,-1);return ut.transform.setSelection(dt).setMeta(historyKey,{redo:et,historyState:St})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(it){let g=it.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let et=0;et<g.length;et++)if(g[et].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(it={}){return it={depth:it.depth||100,newGroupDelay:it.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,et,ot){return applyTransaction(et,ot,g,it)}},config:it,props:{handleDOMEvents:{beforeinput(g,et){let ot=et.inputType,ct=ot=="historyUndo"?undo:ot=="historyRedo"?redo:null;return ct?(et.preventDefault(),ct(g.state,g.dispatch)):!1}}}})}function buildCommand(it,g){return(et,ot)=>{let ct=historyKey.getState(et);if(!ct||(it?ct.undone:ct.done).eventCount==0)return!1;if(ot){let ut=histTransaction(ct,et,it);ut&&ot(g?ut.scrollIntoView():ut)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:it=>it.length,wordCounter:it=>it.split(" ").filter(g=>g!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc;if(((it==null?void 0:it.mode)||this.options.mode)==="textSize"){const ot=g.textBetween(0,g.content.size,void 0," ");return this.options.textCounter(ot)}return g.nodeSize},this.storage.words=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc,et=g.textBetween(0,g.content.size," "," ");return this.options.wordCounter(et)}},addProseMirrorPlugins(){let it=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(g,et,ot)=>{if(it)return;const ct=this.options.limit;if(ct==null||ct===0){it=!0;return}const ut=this.storage.characters({node:ot.doc});if(ut>ct){const dt=ut-ct,ft=0,St=dt;console.warn(`[CharacterCount] Initial content exceeded limit of ${ct} characters. Content was automatically trimmed.`);const kt=ot.tr.deleteRange(ft,St);return it=!0,kt}it=!0},filterTransaction:(g,et)=>{const ot=this.options.limit;if(!g.docChanged||ot===0||ot===null||ot===void 0)return!0;const ct=this.storage.characters({node:et.doc}),ut=this.storage.characters({node:g.doc});if(ut<=ot||ct>ot&&ut>ot&&ut<=ct)return!0;if(ct>ot&&ut>ot&&ut>ct||!g.getMeta("paste"))return!1;const ft=g.selection.$head.pos,St=ut-ot,kt=ft-St,Tt=ft;return g.deleteRange(kt,Tt),!(this.storage.characters({node:g.doc})>ot)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:it,selection:g})=>{const{isEditable:et,isFocused:ot}=this.editor,{anchor:ct}=g,ut=[];if(!et||!ot)return DecorationSet.create(it,[]);let dt=0;this.options.mode==="deepest"&&it.descendants((St,kt)=>{if(St.isText)return;if(!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;dt+=1});let ft=0;return it.descendants((St,kt)=>{if(St.isText||!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;if(ft+=1,this.options.mode==="deepest"&&dt-ft>0||this.options.mode==="shallowest"&&ft>1)return this.options.mode==="deepest";ut.push(Decoration.node(kt,kt+St.nodeSize,{class:this.options.className}))}),DecorationSet.create(it,ut)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(it){var g;const et={name:it.name,options:it.options,storage:it.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(it,"allowGapCursor",et)))!=null?g:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:it,selection:g})=>{const et=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:ot}=g,ct=[];if(!et)return null;const ut=this.editor.isEmpty;return it.descendants((dt,ft)=>{const St=ot>=ft&&ot<=ft+dt.nodeSize,kt=!dt.isLeaf&&isNodeEmpty(dt);if((St||!this.options.showOnlyCurrent)&&kt){const Tt=[this.options.emptyNodeClass];ut&&Tt.push(this.options.emptyEditorClass);const Rt=Decoration.node(ft,ft+dt.nodeSize,{class:Tt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:dt,pos:ft,hasAnchor:St}):this.options.placeholder});ct.push(Rt)}return this.options.includeChildren}),DecorationSet.create(it,ct)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:it,options:g}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(et){return et.selection.empty||it.isFocused||!it.isEditable||isNodeSelection(et.selection)||it.view.dragging?null:DecorationSet.create(et.doc,[Decoration.inline(et.selection.from,et.selection.to,{class:g.className})])}}})]}});function nodeEqualsType({types:it,node:g}){return g&&Array.isArray(it)&&it.includes(g.type)||(g==null?void 0:g.type)===it}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const it=new PluginKey(this.name),g=Object.entries(this.editor.schema.nodes).map(([,et])=>et).filter(et=>(this.options.notAfter||[]).concat(this.options.node).includes(et.name));return[new Plugin({key:it,appendTransaction:(et,ot,ct)=>{const{doc:ut,tr:dt,schema:ft}=ct,St=it.getState(ct),kt=ut.content.size,Tt=ft.nodes[this.options.node];if(St)return dt.insert(kt,Tt.create())},state:{init:(et,ot)=>{const ct=ot.tr.doc.lastChild;return!nodeEqualsType({node:ct,types:g})},apply:(et,ot)=>{if(!et.docChanged)return ot;const ct=et.doc.lastChild;return!nodeEqualsType({node:ct,types:g})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:it,dispatch:g})=>undo(it,g),redo:()=>({state:it,dispatch:g})=>redo(it,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var it,g,et,ot;const ct=[];return this.options.bold!==!1&&ct.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ct.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ct.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ct.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ct.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ct.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&ct.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ct.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ct.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ct.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&ct.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&ct.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ct.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ct.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&ct.push(ListKeymap.configure((it=this.options)==null?void 0:it.listKeymap)),this.options.link!==!1&&ct.push(Link.configure((g=this.options)==null?void 0:g.link)),this.options.orderedList!==!1&&ct.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ct.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ct.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ct.push(Text$3.configure(this.options.text)),this.options.underline!==!1&&ct.push(Underline.configure((et=this.options)==null?void 0:et.underline)),this.options.trailingNode!==!1&&ct.push(TrailingNode.configure((ot=this.options)==null?void 0:ot.trailingNode)),ct}}),index_default$7=StarterKit,index_default$6=ListItem,index_default$5=BulletList,index_default$4=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:it=>it.getAttribute("data-color")||it.style.backgroundColor,renderHTML:it=>it.color?{"data-color":it.color,style:`background-color: ${it.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:it}){return["mark",mergeAttributes(this.options.HTMLAttributes,it),0]},renderMarkdown:(it,g)=>`==${g.renderChildren(it)}==`,parseMarkdown:(it,g)=>g.applyMark("highlight",g.parseInline(it.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:it=>it.indexOf("=="),tokenize(it,g,et){const ct=/^(==)([^=]+)(==)/.exec(it);if(ct){const ut=ct[2].trim(),dt=et.inlineTokens(ut);return{type:"highlight",raw:ct[0],text:ut,tokens:dt}}}},addCommands(){return{setHighlight:it=>({commands:g})=>g.setMark(this.name,it),toggleHighlight:it=>({commands:g})=>g.toggleMark(this.name,it),unsetHighlight:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$3=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:it=>{const g=it.style.textAlign;return this.options.alignments.includes(g)?g:this.options.defaultAlignment},renderHTML:it=>it.textAlign?{style:`text-align: ${it.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:it=>({commands:g})=>this.options.alignments.includes(it)?this.options.types.map(et=>g.updateAttributes(et,{textAlign:it})).every(et=>et):!1,unsetTextAlign:()=>({commands:it})=>this.options.types.map(g=>it.resetAttributes(g,"textAlign")).every(g=>g),toggleTextAlign:it=>({editor:g,commands:et})=>this.options.alignments.includes(it)?g.isActive({textAlign:it})?et.unsetTextAlign():et.setTextAlign(it):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$2=TextAlign,index_default$1=Placeholder;const githubDark="";function BookEditor({content:it,setContent:g}){const et=reactExports.useRef(null),ot=useEditor({extensions:[index_default$6,index_default$5.configure({keepMarks:!0,keepAttributes:!0}),index_default$4.configure({keepMarks:!0,keepAttributes:!0}),index_default$a,index_default$7.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$8,index_default$3,index_default$9.configure({openOnClick:!1}),index_default$2.configure({types:["heading","paragraph","listItem","blockquote"]}),index_default$1.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{class:"focus:outline-none prose prose-invert prose-lg max-w-none text-white leading-relaxed"}},content:it,onUpdate:({editor:ct})=>g(ct.getHTML())});return reactExports.useEffect(()=>{ot&&it!==ot.getHTML()&&ot.commands.setContent(it||"",!1)},[it,ot]),ot&&(window.__EDITOR=ot),reactExports.useEffect(()=>{et.current=ot},[ot]),ot?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 bg-[#111] px-6 py-3 flex flex-wrap items-center gap-6 border-b border-gray-800 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBold().run(),className:`font-semibold text-lg ${ot.isActive("bold")?"text-green-400":"text-gray-300"} hover:text-white`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleItalic().run(),className:`italic text-lg ${ot.isActive("italic")?"text-green-400":"text-gray-300"} hover:text-white`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleUnderline().run(),className:`underline text-lg ${ot.isActive("underline")?"text-green-400":"text-gray-300"} hover:text-white`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded text-sm ${ot.isActive("highlight")?"bg-yellow-400 text-black":"text-gray-300"} hover:text-white`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${ot.isActive("bulletList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${ot.isActive("orderedList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBlockquote().run(),className:`${ot.isActive("blockquote")?"text-green-400":"text-gray-300"} hover:text-white`,children:" Quote"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 ml-auto border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().undo().run(),className:"text-gray-300 hover:text-white",children:" Undo"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().redo().run(),className:"text-gray-300 hover:text-white",children:" Redo"})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:ot,className:`prose prose-invert max-w-none 
             bg-[#0f0f0f] text-white type-text 
             min-h-[70vh] max-h-[90vh]
             resize-y overflow-auto
             border border-gray-700 rounded-lg 
             p-8 focus:outline-none focus:ring-2 focus:ring-green-500/50`})]}):null}function BookPromptForm({text:it,setText:g,pages:et,setPages:ot,link:ct,setLink:ut,cover:dt,setCover:ft,title:St,setTitle:kt,authorName:Tt,bookName:Rt,setBookName:jt,bookType:Ft,setBookType:$t,loading:zt,bookId:Ut,setBookId:Bt,partLocked:Ht,partNumber:Jt,onClose:Zt,setShowGenerating:tn,setProgress:nn}){const[rn,on]=reactExports.useState(!1),[pn,dn]=reactExports.useState(!1),[hn,un]=reactExports.useState(null),{accessToken:En}=useAuth(),[wn,Sn]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[fn,xn]=reactExports.useState(Tt||"");reactExports.useEffect(()=>{async function mn(){var Tn,An;if(Ut)try{const Pn=Jt>1?`https://cre8tlystudio.com/api/books/${Ut}/part/${Jt}/draft`:`https://cre8tlystudio.com/api/books/draft/${Ut}`,Mn=await axiosInstance.get(Pn,{headers:{Authorization:`Bearer ${En}`}});(Tn=Mn.data)!=null&&Tn.draft_text?(g(Mn.data.draft_text),Mn.data.title&&jt(Mn.data.title),Mn.data.link&&ut(Mn.data.link),Mn.data.last_saved_at&&un(Mn.data.last_saved_at),Mn.data.author_name&&xn(Mn.data.author_name),Mn.data.book_type&&$t(Mn.data.book_type),wn||(dn(!0),y$4.info("Loaded saved draft "),setTimeout(()=>dn(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),Sn(!0))):console.log("No saved draft found for this book or part.")}catch(Pn){((An=Pn.response)==null?void 0:An.status)!==404&&console.error("Failed to load draft:",Pn)}}mn()},[Ut,Jt]);async function an(){if(!(it!=null&&it.trim())){y$4.warn("Write something before saving!");return}on(!0);try{const mn=Jt>1?`https://cre8tlystudio.com/api/books/${Ut}/part/${Jt}/draft`:"https://cre8tlystudio.com/api/books/draft",Tn=await axiosInstance.post(mn,{bookId:Ut,draftText:it,book_name:Rt,link:ct,author_name:fn||Tt,book_type:Ft},{headers:{Authorization:`Bearer ${En}`}});Tn.data.id&&typeof Bt=="function"&&Bt(Tn.data.id),y$4.success("Draft saved successfully ")}catch(mn){console.error("Save draft failed:",mn),y$4.error("Failed to save draft")}finally{on(!1)}}async function cn(mn){mn.preventDefault();try{tn(!0),nn(0),Zt();let Tn=0;const An=setInterval(()=>{Tn+=Tn<60?Math.random()*4.5:Tn<85?Math.random()*2.5:Math.random()*1.2,Tn>=96&&(Tn=96),nn(Tn)},200),Pn={bookId:Ut,book_name:Rt,prompt:it,pages:et,link:ct,cover:dt,bookName:Rt,authorName:Tt,bookType:Ft,title:St},Mn=await axiosInstance.post("https://cre8tlystudio.com/api/books/prompt",Pn);clearInterval(An),nn(100),y$4.success("Chapter generation successful! "),setTimeout(()=>tn(!1),1500),localStorage.removeItem("bookDraftLocal"),console.log("Book generated:",Mn.data)}catch(Tn){console.error("Book generation failed:",Tn),y$4.error("Failed to generate book"),tn(!1)}}function bn(mn){if(!mn)return null;const Tn=new Date(mn),An=Date.now()-Tn.getTime(),Pn=Math.floor(An/6e4);if(Pn<1)return"just now";if(Pn<60)return`${Pn} minute${Pn!==1?"s":""} ago`;const Mn=Math.floor(Pn/60);if(Mn<24)return`${Mn} hour${Mn!==1?"s":""} ago`;const Rn=Math.floor(Mn/24);return`${Rn} day${Rn!==1?"s":""} ago`}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[pn&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",hn&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",bn(hn),")"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:cn,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Clockmakers Secret",value:Rt,readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is your books main title."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:fn||Tt||"",readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:Ft,readOnly:!0,className:"w-full px-4 py-3 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Chapter Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Midnight Promise",value:St,onChange:mn=>kt(mn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:ring-2 focus:ring-green focus:outline-none"})]}),jsxRuntimeExports.jsx("div",{className:"border border-gray-700 rounded-xl",children:jsxRuntimeExports.jsx(BookEditor,{content:it,setContent:g})}),jsxRuntimeExports.jsx(CoverUpload,{cover:dt,setCover:ft}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:et??"",onChange:mn=>ot(Number(mn.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Website or Author Link"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:ct,onChange:mn=>ut(mn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!Ht&&jsxRuntimeExports.jsx("button",{type:"button",onClick:an,disabled:rn,className:`flex-1 px-6 py-3 rounded-xl bg-green text-black font-semibold text-lg shadow-lg transition ${rn?"opacity-70 cursor-not-allowed":"hover:bg-green hover:text-black"}`,children:rn?"Saving...":"Save Draft"}),!zt&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-royalPurple text-white font-semibold text-lg shadow-lg hover:opacity-90 transition",children:" Generate Book PDF"})]})]})]})}function PromptModal({isOpen:it,onClose:g,magnetId:et,accessToken:ot,contentType:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft}){const[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(""),[jt,Ft]=reactExports.useState("modern"),[$t,zt]=reactExports.useState(5),[Ut,Bt]=reactExports.useState(null),[Ht,Jt]=reactExports.useState(null),[Zt,tn]=reactExports.useState(""),[nn,rn]=reactExports.useState(!1),[on,pn]=reactExports.useState(!1),[dn,hn]=reactExports.useState(null),[un,En]=reactExports.useState(""),[wn,Sn]=reactExports.useState("questions"),[fn,xn]=reactExports.useState("#ffffff");reactExports.useEffect(()=>{it||(kt(""),Rt(""),Ft("modern"),zt(5),Bt(null),Jt(null),tn(""),hn(null),ft(0),rn(!1)),Sn("questions")},[it]);const an=()=>g();async function cn(mn,Tn){var Pn,Mn,Rn;mn.preventDefault(),pn(!0),ft(0),dt(!0),g();let An;try{let Cn=0;An=setInterval(()=>{Cn+=Cn<60?Math.random()*4.5:Cn<85?Math.random()*2.5:Math.random()*1.2,Cn>=96&&(Cn=96),ft(Cn)},200);const On=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{magnetId:et,prompt:St,title:Tt,theme:jt,bgTheme:fn,pages:$t,logo:Ut,link:Zt,coverImage:dn,cta:un,contentType:Tn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(An),ft(100),y$4.success(" Your digital asset has been generated successfully!"),dt(!1),g(),await new Promise(In=>setTimeout(In,1e3)),setTimeout(()=>{typeof ut=="function"&&ut(et,St,jt)},2e3)}catch(Cn){if(clearInterval(An),ft(0),pn(!1),dt(!1),console.error(" Prompt submission error:",Cn),Cn.code==="ECONNABORTED"||(Pn=Cn.message)!=null&&Pn.includes("timeout"))y$4.info(" Please wait  your document is still being created. It will appear shortly.");else if(Cn.response){const{status:On,data:In}=Cn.response;On===413?y$4.error(In.message||"Your input is too long. Please shorten it."):On===400?y$4.error(In.message||"Missing required fields."):On===429?y$4.error("Rate limit reached. Please wait a moment and try again."):(Mn=In.message)!=null&&Mn.includes("context_length_exceeded")||(Rn=In.message)!=null&&Rn.includes("too large")?y$4.error(" This document is too large. Try fewer pages or smaller content."):y$4.info(" Your document is still generating  it will appear soon.")}else y$4.info(" Document generation still in progress. Please refresh your dashboard shortly.");g(),typeof ut=="function"&&setTimeout(()=>ut(et,St,jt),5e3)}finally{pn(!1)}}async function bn(mn){mn.preventDefault(),pn(!0),ft(0),dt(!0),g();let Tn;try{let An=0;Tn=setInterval(()=>{An+=An<60?Math.random()*4.5:An<85?Math.random()*2.5:Math.random()*1.2,An>=96&&(An=96),ft(An)},200);const Pn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{prompt:St,theme:jt,pages:$t,logo:Ut,link:Zt,coverImage:dn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(Tn),ft(100),y$4.success(" Your book was generated successfully!"),await new Promise(Mn=>setTimeout(Mn,800)),dt(!1),g()}catch(An){console.error(" Book generation error:",An),clearInterval(Tn),ft(0),pn(!1),dt(!1),y$4.error("Something went wrong while generating your book.")}finally{pn(!1)}}return jsxRuntimeExports.jsx(ze,{show:it,appear:!0,children:jsxRuntimeExports.jsxs(yt,{className:"relative z-50",onClose:()=>{nn||g()},children:[jsxRuntimeExports.jsx(Dt,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(je,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-gray-900 p-8 shadow-2xl border border-gray-700",children:[jsxRuntimeExports.jsx(Ye,{className:"text-2xl font-bold text-white mb-6 text-center",children:" Create Your Lead Magnet"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[wn==="questions"&&jsxRuntimeExports.jsx(SmartPromptBuilder,{onPromptReady:mn=>{kt(mn),Sn("generator")}}),wn==="generator"&&jsxRuntimeExports.jsx("div",{className:`transition-all duration-300 ${on?"pointer-events-none blur-sm opacity-50":""}`,children:jsxRuntimeExports.jsx(PromptForm,{text:St,setText:kt,title:Tt,setTitle:Rt,theme:jt,setTheme:Ft,bgTheme:fn,setBgTheme:xn,pages:$t,setPages:zt,logo:Ut,setLogo:Bt,logoPreview:Ht,setLogoPreview:Jt,link:Zt,setLink:tn,cover:dn,setCover:hn,cta:un,setCta:En,showPreview:nn,setShowPreview:rn,onSubmit:cn,loading:on,contentType:ct})}),wn==="bookBuilder"&&jsxRuntimeExports.jsxs("div",{className:`transition-all duration-300 ${on?"pointer-events-none blur-sm opacity-50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Sn("selection"),className:"text-sm text-gray-400 underline hover:text-gray-200 transition",children:" Back to Selection"})}),jsxRuntimeExports.jsx(BookPromptForm,{text:St,setText:kt,theme:jt,setTheme:Ft,pages:$t,setPages:zt,logo:Ut,setLogo:Bt,logoPreview:Ht,setLogoPreview:Jt,link:Zt,setLink:tn,cover:dn,setCover:hn,cta:un,setCta:En,showPreview:nn,setShowPreview:rn,onSubmit:bn,loading:on})]})]}),wn!=="questions"&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Sn("questions"),className:"absolute top-4 left-4 flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-green text-black rounded-lg shadow-md transition-all hover:bg-green/90 hover:text-white active:scale-95 z-20",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx("button",{onClick:on?void 0:an,className:`absolute top-4 right-4 text-white text-xl transition ${on?"opacity-30 cursor-not-allowed":"hover:text-red-400"}`,disabled:on,children:""})]})})]})})}function DashboardHeader({items:it=[],onCheckout:g,type:et="magnet"}){var Tt;const{user:ot}=useAuth(),ct=Array.isArray(it.magnets)?it.magnets:it,ut=it.summary||{},dt=et==="book"?(ot==null?void 0:ot.book_slots)??0:ut.total_slots??(ot==null?void 0:ot.magnet_slots)??0,ft=et==="book"?ct.filter(Rt=>Rt.pages>=750).length:ut.used_slots??ct.filter(Rt=>Rt.status==="completed").length,St=ut.available_slots??Math.max(dt-ft,0),kt=et==="book"?"My Books":"My Digital Products";return jsxRuntimeExports.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:kt}),ot&&jsxRuntimeExports.jsxs("div",{className:"text-[14px] text-gray-400 mt-1 mb-2",children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold tracking-wide",children:((Tt=ot==null?void 0:ot.name)==null?void 0:Tt.split(" ")[0])||"User"})]}),jsxRuntimeExports.jsxs("p",{className:"text-silver mt-1",children:["You currently have ",St," of ",dt," slots remaining."]}),St===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]})})}function LoadingState(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:"Loading your lead magnets..."})]})}function EmptyState({onCheckout:it,type:g="magnet"}){const et=g==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver mb-6",children:et?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("button",{onClick:it,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:et?"Write My First Book":"Generate My First Lead Magnet"})]})}const scriptRel="modulepreload",assetsURL=function(it){return"/"+it},seen={},__vitePreload=function it(g,et,ot){if(!et||et.length===0)return g();const ct=document.getElementsByTagName("link");return Promise.all(et.map(ut=>{if(ut=assetsURL(ut),ut in seen)return;seen[ut]=!0;const dt=ut.endsWith(".css"),ft=dt?'[rel="stylesheet"]':"";if(!!ot)for(let Tt=ct.length-1;Tt>=0;Tt--){const Rt=ct[Tt];if(Rt.href===ut&&(!dt||Rt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ut}"]${ft}`))return;const kt=document.createElement("link");if(kt.rel=dt?"stylesheet":scriptRel,dt||(kt.as="script",kt.crossOrigin=""),kt.href=ut,document.head.appendChild(kt),dt)return new Promise((Tt,Rt)=>{kt.addEventListener("load",Tt),kt.addEventListener("error",()=>Rt(new Error(`Unable to preload CSS for ${ut}`)))})})).then(()=>g()).catch(ut=>{const dt=new Event("vite:preloadError",{cancelable:!0});if(dt.payload=ut,window.dispatchEvent(dt),!dt.defaultPrevented)throw ut})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(it){Number.isInteger(it)&&(verbosity=it)}function getVerbosityLevel(){return verbosity}function info(it){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${it}`)}function warn(it){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${it}`)}function unreachable(it){throw new Error(it)}function assert(it,g){it||unreachable(g)}function _isValidProtocol(it){switch(it==null?void 0:it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(it,g=null,et=null){if(!it)return null;if(et&&typeof it=="string"){if(et.addDefaultProtocol&&it.startsWith("www.")){const ct=it.match(/\./g);(ct==null?void 0:ct.length)>=2&&(it=`http://${it}`)}if(et.tryConvertEncoding)try{it=stringToUTF8String(it)}catch{}}const ot=g?URL.parse(it,g):URL.parse(it);return _isValidProtocol(ot)?ot:null}function updateUrlHash(it,g,et=!1){const ot=URL.parse(it);return ot?(ot.hash=g,ot.href):et&&createValidAbsoluteUrl(it,"http://example.com")?it.split("#",1)[0]+`${g?`#${g}`:""}`:""}function shadow(it,g,et,ot=!1){return Object.defineProperty(it,g,{value:et,enumerable:!ot,configurable:!0,writable:!1}),et}const BaseException=function it(){function g(et,ot){this.message=et,this.name=ot}return g.prototype=new Error,g.constructor=g,g}();class PasswordException extends BaseException{constructor(g,et){super(g,"PasswordException"),this.code=et}}class UnknownErrorException extends BaseException{constructor(g,et){super(g,"UnknownErrorException"),this.details=et}}class InvalidPDFException extends BaseException{constructor(g){super(g,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(g,et,ot){super(g,"ResponseException"),this.status=et,this.missing=ot}}class FormatError extends BaseException{constructor(g){super(g,"FormatError")}}class AbortException extends BaseException{constructor(g){super(g,"AbortException")}}function bytesToString(it){(typeof it!="object"||(it==null?void 0:it.length)===void 0)&&unreachable("Invalid argument for bytesToString");const g=it.length,et=8192;if(g<et)return String.fromCharCode.apply(null,it);const ot=[];for(let ct=0;ct<g;ct+=et){const ut=Math.min(ct+et,g),dt=it.subarray(ct,ut);ot.push(String.fromCharCode.apply(null,dt))}return ot.join("")}function stringToBytes(it){typeof it!="string"&&unreachable("Invalid argument for stringToBytes");const g=it.length,et=new Uint8Array(g);for(let ot=0;ot<g;++ot)et[ot]=it.charCodeAt(ot)&255;return et}function string32(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function isLittleEndian(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:g,userAgent:et}=navigator;return shadow(this,"platform",{isAndroid:et.includes("Android"),isLinux:g.includes("Linux"),isMac:g.includes("Mac"),isWindows:g.includes("Win"),isFirefox:et.includes("Firefox")})}static get isCSSRoundSupported(){var g,et;return shadow(this,"isCSSRoundSupported",(et=(g=globalThis.CSS)==null?void 0:g.supports)==null?void 0:et.call(g,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),it=>it.toString(16).padStart(2,"0"));var Wy,Q2,Z2,Px,$A;let Util$1=(Q2=class{static makeHexColor(g,et,ot){return`#${hexNumbers[g]}${hexNumbers[et]}${hexNumbers[ot]}`}static domMatrixToTransform(g){return[g.a,g.b,g.c,g.d,g.e,g.f]}static scaleMinMax(g,et){let ot;g[0]?(g[0]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[0],et[2]*=g[0],g[3]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[3],et[3]*=g[3]):(ot=et[0],et[0]=et[1],et[1]=ot,ot=et[2],et[2]=et[3],et[3]=ot,g[1]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[1],et[3]*=g[1],g[2]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[2],et[2]*=g[2]),et[0]+=g[4],et[1]+=g[5],et[2]+=g[4],et[3]+=g[5]}static transform(g,et){return[g[0]*et[0]+g[2]*et[1],g[1]*et[0]+g[3]*et[1],g[0]*et[2]+g[2]*et[3],g[1]*et[2]+g[3]*et[3],g[0]*et[4]+g[2]*et[5]+g[4],g[1]*et[4]+g[3]*et[5]+g[5]]}static multiplyByDOMMatrix(g,et){return[g[0]*et.a+g[2]*et.b,g[1]*et.a+g[3]*et.b,g[0]*et.c+g[2]*et.d,g[1]*et.c+g[3]*et.d,g[0]*et.e+g[2]*et.f+g[4],g[1]*et.e+g[3]*et.f+g[5]]}static applyTransform(g,et,ot=0){const ct=g[ot],ut=g[ot+1];g[ot]=ct*et[0]+ut*et[2]+et[4],g[ot+1]=ct*et[1]+ut*et[3]+et[5]}static applyTransformToBezier(g,et,ot=0){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5];for(let Tt=0;Tt<6;Tt+=2){const Rt=g[ot+Tt],jt=g[ot+Tt+1];g[ot+Tt]=Rt*ct+jt*dt+St,g[ot+Tt+1]=Rt*ut+jt*ft+kt}}static applyInverseTransform(g,et){const ot=g[0],ct=g[1],ut=et[0]*et[3]-et[1]*et[2];g[0]=(ot*et[3]-ct*et[2]+et[2]*et[5]-et[4]*et[3])/ut,g[1]=(-ot*et[1]+ct*et[0]+et[4]*et[1]-et[5]*et[0])/ut}static axialAlignedBoundingBox(g,et,ot){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5],Tt=g[0],Rt=g[1],jt=g[2],Ft=g[3];let $t=ct*Tt+St,zt=$t,Ut=ct*jt+St,Bt=Ut,Ht=ft*Rt+kt,Jt=Ht,Zt=ft*Ft+kt,tn=Zt;if(ut!==0||dt!==0){const nn=ut*Tt,rn=ut*jt,on=dt*Rt,pn=dt*Ft;$t+=on,Bt+=on,Ut+=pn,zt+=pn,Ht+=nn,tn+=nn,Zt+=rn,Jt+=rn}ot[0]=Math.min(ot[0],$t,Ut,zt,Bt),ot[1]=Math.min(ot[1],Ht,Zt,Jt,tn),ot[2]=Math.max(ot[2],$t,Ut,zt,Bt),ot[3]=Math.max(ot[3],Ht,Zt,Jt,tn)}static inverseTransform(g){const et=g[0]*g[3]-g[1]*g[2];return[g[3]/et,-g[1]/et,-g[2]/et,g[0]/et,(g[2]*g[5]-g[4]*g[3])/et,(g[4]*g[1]-g[5]*g[0])/et]}static singularValueDecompose2dScale(g,et){const ot=g[0],ct=g[1],ut=g[2],dt=g[3],ft=ot**2+ct**2,St=ot*ut+ct*dt,kt=ut**2+dt**2,Tt=(ft+kt)/2,Rt=Math.sqrt(Tt**2-(ft*kt-St**2));et[0]=Math.sqrt(Tt+Rt||1),et[1]=Math.sqrt(Tt-Rt||1)}static normalizeRect(g){const et=g.slice(0);return g[0]>g[2]&&(et[0]=g[2],et[2]=g[0]),g[1]>g[3]&&(et[1]=g[3],et[3]=g[1]),et}static intersect(g,et){const ot=Math.max(Math.min(g[0],g[2]),Math.min(et[0],et[2])),ct=Math.min(Math.max(g[0],g[2]),Math.max(et[0],et[2]));if(ot>ct)return null;const ut=Math.max(Math.min(g[1],g[3]),Math.min(et[1],et[3])),dt=Math.min(Math.max(g[1],g[3]),Math.max(et[1],et[3]));return ut>dt?null:[ot,ut,ct,dt]}static pointBoundingBox(g,et,ot){ot[0]=Math.min(ot[0],g),ot[1]=Math.min(ot[1],et),ot[2]=Math.max(ot[2],g),ot[3]=Math.max(ot[3],et)}static rectBoundingBox(g,et,ot,ct,ut){ut[0]=Math.min(ut[0],g,ot),ut[1]=Math.min(ut[1],et,ct),ut[2]=Math.max(ut[2],g,ot),ut[3]=Math.max(ut[3],et,ct)}static bezierBoundingBox(g,et,ot,ct,ut,dt,ft,St,kt){kt[0]=Math.min(kt[0],g,ft),kt[1]=Math.min(kt[1],et,St),kt[2]=Math.max(kt[2],g,ft),kt[3]=Math.max(kt[3],et,St),_n(this,Px,$A).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-g+3*(ot-ut)+ft),6*(g-2*ot+ut),3*(ot-g),kt),_n(this,Px,$A).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-et+3*(ct-dt)+St),6*(et-2*ct+dt),3*(ct-et),kt)}},Wy=new WeakSet,Z2=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt){if(kt<=0||kt>=1)return;const Rt=1-kt,jt=kt*kt,Ft=jt*kt,$t=Rt*(Rt*(Rt*g+3*kt*et)+3*jt*ot)+Ft*ct,zt=Rt*(Rt*(Rt*ut+3*kt*dt)+3*jt*ft)+Ft*St;Tt[0]=Math.min(Tt[0],$t),Tt[1]=Math.min(Tt[1],zt),Tt[2]=Math.max(Tt[2],$t),Tt[3]=Math.max(Tt[3],zt)},Px=new WeakSet,$A=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt){if(Math.abs(kt)<1e-12){Math.abs(Tt)>=1e-12&&_n(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,-Rt/Tt,jt);return}const Ft=Tt**2-4*Rt*kt;if(Ft<0)return;const $t=Math.sqrt(Ft),zt=2*kt;_n(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt+$t)/zt,jt),_n(this,Wy,Z2).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt-$t)/zt,jt)},yn(Q2,Wy),yn(Q2,Px),Q2);function stringToUTF8String(it){return decodeURIComponent(escape(it))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(it){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),it.replaceAll(NormalizeRegex,(g,et,ot)=>et?et.normalize("NFKC"):NormalizationMap.get(ot))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);return crypto.getRandomValues(it),bytesToString(it)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(it,g,et){if(!Array.isArray(et)||et.length<2)return!1;const[ot,ct,...ut]=et;if(!it(ot)&&!Number.isInteger(ot)||!g(ct))return!1;const dt=ut.length;let ft=!0;switch(ct.name){case"XYZ":if(dt<2||dt>3)return!1;break;case"Fit":case"FitB":return dt===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(dt>1)return!1;break;case"FitR":if(dt!==4)return!1;ft=!1;break;default:return!1}for(const St of ut)if(!(typeof St=="number"||ft&&St===null))return!1;return!0}function MathClamp(it,g,et){return Math.min(Math.max(it,g),et)}function toBase64Util(it){return Uint8Array.prototype.toBase64?it.toBase64():btoa(bytesToString(it))}function fromBase64Util(it){return Uint8Array.fromBase64?Uint8Array.fromBase64(it):stringToBytes(atob(it))}typeof Promise.try!="function"&&(Promise.try=function(it,...g){return new Promise(et=>{et(it(...g))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(it){return it.reduce((g,et)=>g+et,0)});class XfaText{static textContent(g){const et=[],ot={items:et,styles:Object.create(null)};function ct(ut){var St;if(!ut)return;let dt=null;const ft=ut.name;if(ft==="#text")dt=ut.value;else if(XfaText.shouldBuildText(ft))(St=ut==null?void 0:ut.attributes)!=null&&St.textContent?dt=ut.attributes.textContent:ut.value&&(dt=ut.value);else return;if(dt!==null&&et.push({str:dt}),!!ut.children)for(const kt of ut.children)ct(kt)}return ct(g),ot}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}class XfaLayer{static setupStorage(g,et,ot,ct,ut){const dt=ct.getValue(et,{value:null});switch(ot.name){case"textarea":if(dt.value!==null&&(g.textContent=dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})});break;case"input":if(ot.attributes.type==="radio"||ot.attributes.type==="checkbox"){if(dt.value===ot.attributes.xfaOn?g.setAttribute("checked",!0):dt.value===ot.attributes.xfaOff&&g.removeAttribute("checked"),ut==="print")break;g.addEventListener("change",ft=>{ct.setValue(et,{value:ft.target.checked?ft.target.getAttribute("xfaOn"):ft.target.getAttribute("xfaOff")})})}else{if(dt.value!==null&&g.setAttribute("value",dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})})}break;case"select":if(dt.value!==null){g.setAttribute("value",dt.value);for(const ft of ot.children)ft.attributes.value===dt.value?ft.attributes.selected=!0:ft.attributes.hasOwnProperty("selected")&&delete ft.attributes.selected}g.addEventListener("input",ft=>{const St=ft.target.options,kt=St.selectedIndex===-1?"":St[St.selectedIndex].value;ct.setValue(et,{value:kt})});break}}static setAttributes({html:g,element:et,storage:ot=null,intent:ct,linkService:ut}){const{attributes:dt}=et,ft=g instanceof HTMLAnchorElement;dt.type==="radio"&&(dt.name=`${dt.name}-${ct}`);for(const[St,kt]of Object.entries(dt))if(kt!=null)switch(St){case"class":kt.length&&g.setAttribute(St,kt.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",kt);break;case"style":Object.assign(g.style,kt);break;case"textContent":g.textContent=kt;break;default:(!ft||St!=="href"&&St!=="newWindow")&&g.setAttribute(St,kt)}ft&&ut.addLinkAttributes(g,dt.href,dt.newWindow),ot&&dt.dataId&&this.setupStorage(g,dt.dataId,et,ot)}static render(g){var Rt,jt;const et=g.annotationStorage,ot=g.linkService,ct=g.xfaHtml,ut=g.intent||"display",dt=document.createElement(ct.name);ct.attributes&&this.setAttributes({html:dt,element:ct,intent:ut,linkService:ot});const ft=ut!=="richText",St=g.div;if(St.append(dt),g.viewport){const Ft=`matrix(${g.viewport.transform.join(",")})`;St.style.transform=Ft}ft&&St.setAttribute("class","xfaLayer xfaFont");const kt=[];if(ct.children.length===0){if(ct.value){const Ft=document.createTextNode(ct.value);dt.append(Ft),ft&&XfaText.shouldBuildText(ct.name)&&kt.push(Ft)}return{textDivs:kt}}const Tt=[[ct,-1,dt]];for(;Tt.length>0;){const[Ft,$t,zt]=Tt.at(-1);if($t+1===Ft.children.length){Tt.pop();continue}const Ut=Ft.children[++Tt.at(-1)[1]];if(Ut===null)continue;const{name:Bt}=Ut;if(Bt==="#text"){const Jt=document.createTextNode(Ut.value);kt.push(Jt),zt.append(Jt);continue}const Ht=(Rt=Ut==null?void 0:Ut.attributes)!=null&&Rt.xmlns?document.createElementNS(Ut.attributes.xmlns,Bt):document.createElement(Bt);if(zt.append(Ht),Ut.attributes&&this.setAttributes({html:Ht,element:Ut,storage:et,intent:ut,linkService:ot}),((jt=Ut.children)==null?void 0:jt.length)>0)Tt.push([Ut,-1,Ht]);else if(Ut.value){const Jt=document.createTextNode(Ut.value);ft&&XfaText.shouldBuildText(Bt)&&kt.push(Jt),Ht.append(Jt)}}for(const Ft of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ft.setAttribute("readOnly",!0);return{textDivs:kt}}static update(g){const et=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=et,g.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Gm=class Gm{};qn(Gm,"CSS",96),qn(Gm,"PDF",72),qn(Gm,"PDF_TO_CSS_UNITS",Gm.CSS/Gm.PDF);let PixelsPerInch=Gm;async function fetchData(it,g="text"){if(isValidFetchUrl(it,document.baseURI)){const et=await fetch(it);if(!et.ok)throw new Error(et.statusText);switch(g){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"json":return et.json()}return et.text()}return new Promise((et,ot)=>{const ct=new XMLHttpRequest;ct.open("GET",it,!0),ct.responseType=g,ct.onreadystatechange=()=>{if(ct.readyState===XMLHttpRequest.DONE){if(ct.status===200||ct.status===0){switch(g){case"arraybuffer":case"blob":case"json":et(ct.response);return}et(ct.responseText);return}ot(new Error(ct.statusText))}},ct.send(null)})}class PageViewport{constructor({viewBox:g,userUnit:et,scale:ot,rotation:ct,offsetX:ut=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=g,this.userUnit=et,this.scale=ot,this.rotation=ct,this.offsetX=ut,this.offsetY=dt,ot*=et;const St=(g[2]+g[0])/2,kt=(g[3]+g[1])/2;let Tt,Rt,jt,Ft;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:Tt=-1,Rt=0,jt=0,Ft=1;break;case 90:Tt=0,Rt=1,jt=1,Ft=0;break;case 270:Tt=0,Rt=-1,jt=-1,Ft=0;break;case 0:Tt=1,Rt=0,jt=0,Ft=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(jt=-jt,Ft=-Ft);let $t,zt,Ut,Bt;Tt===0?($t=Math.abs(kt-g[1])*ot+ut,zt=Math.abs(St-g[0])*ot+dt,Ut=(g[3]-g[1])*ot,Bt=(g[2]-g[0])*ot):($t=Math.abs(St-g[0])*ot+ut,zt=Math.abs(kt-g[1])*ot+dt,Ut=(g[2]-g[0])*ot,Bt=(g[3]-g[1])*ot),this.transform=[Tt*ot,Rt*ot,jt*ot,Ft*ot,$t-Tt*ot*St-jt*ot*kt,zt-Rt*ot*St-Ft*ot*kt],this.width=Ut,this.height=Bt}get rawDims(){const g=this.viewBox;return shadow(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:et=this.rotation,offsetX:ot=this.offsetX,offsetY:ct=this.offsetY,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}convertToViewportPoint(g,et){const ot=[g,et];return Util$1.applyTransform(ot,this.transform),ot}convertToViewportRectangle(g){const et=[g[0],g[1]];Util$1.applyTransform(et,this.transform);const ot=[g[2],g[3]];return Util$1.applyTransform(ot,this.transform),[et[0],et[1],ot[0],ot[1]]}convertToPdfPoint(g,et){const ot=[g,et];return Util$1.applyInverseTransform(ot,this.transform),ot}}class RenderingCancelledException extends BaseException{constructor(g,et=0){super(g,"RenderingCancelledException"),this.extraDelay=et}}function isDataScheme(it){const g=it.length;let et=0;for(;et<g&&it[et].trim()==="";)et++;return it.substring(et,et+5).toLowerCase()==="data:"}function isPdfFile(it){return typeof it=="string"&&/\.pdf$/i.test(it)}function getFilenameFromUrl(it){return[it]=it.split(/[#?]/,1),it.substring(it.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(it,g="document.pdf"){if(typeof it!="string")return g;if(isDataScheme(it))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const ot=(ft=>{try{return new URL(ft)}catch{try{return new URL(decodeURIComponent(ft))}catch{try{return new URL(ft,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(ft),"https://foo.bar")}catch{return null}}}}})(it);if(!ot)return g;const ct=ft=>{try{let St=decodeURIComponent(ft);return St.includes("/")?(St=St.split("/").at(-1),St.test(/^\.pdf$/i)?St:ft):St}catch{return ft}},ut=/\.pdf$/i,dt=ot.pathname.split("/").at(-1);if(ut.test(dt))return ct(dt);if(ot.searchParams.size>0){const ft=Array.from(ot.searchParams.values()).reverse();for(const kt of ft)if(ut.test(kt))return ct(kt);const St=Array.from(ot.searchParams.keys()).reverse();for(const kt of St)if(ut.test(kt))return ct(kt)}if(ot.hash){const St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(ot.hash);if(St)return ct(St[0])}return g}class StatTimer{constructor(){qn(this,"started",Object.create(null));qn(this,"times",[])}time(g){g in this.started&&warn(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||warn(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let et=0;for(const{name:ot}of this.times)et=Math.max(ot.length,et);for(const{name:ot,start:ct,end:ut}of this.times)g.push(`${ot.padEnd(et)} ${ut-ct}ms
`);return g.join("")}}function isValidFetchUrl(it,g){const et=g?URL.parse(it,g):URL.parse(it);return(et==null?void 0:et.protocol)==="http:"||(et==null?void 0:et.protocol)==="https:"}function noContextMenu(it){it.preventDefault()}function stopEvent(it){it.preventDefault(),it.stopPropagation()}function deprecated(it){console.log("Deprecated API usage: "+it)}var Nx;class PDFDateString{static toDateObject(g){if(g instanceof Date)return g;if(!g||typeof g!="string")return null;Kt(this,Nx)||vn(this,Nx,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=Kt(this,Nx).exec(g);if(!et)return null;const ot=parseInt(et[1],10);let ct=parseInt(et[2],10);ct=ct>=1&&ct<=12?ct-1:0;let ut=parseInt(et[3],10);ut=ut>=1&&ut<=31?ut:1;let dt=parseInt(et[4],10);dt=dt>=0&&dt<=23?dt:0;let ft=parseInt(et[5],10);ft=ft>=0&&ft<=59?ft:0;let St=parseInt(et[6],10);St=St>=0&&St<=59?St:0;const kt=et[7]||"Z";let Tt=parseInt(et[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Rt=parseInt(et[9],10)||0;return Rt=Rt>=0&&Rt<=59?Rt:0,kt==="-"?(dt+=Tt,ft+=Rt):kt==="+"&&(dt-=Tt,ft-=Rt),new Date(Date.UTC(ot,ct,ut,dt,ft,St))}}Nx=new WeakMap,yn(PDFDateString,Nx,void 0);function getXfaPageViewport(it,{scale:g=1,rotation:et=0}){const{width:ot,height:ct}=it.attributes.style,ut=[0,0,parseInt(ot),parseInt(ct)];return new PageViewport({viewBox:ut,userUnit:1,scale:g,rotation:et})}function getRGB(it){if(it.startsWith("#")){const g=parseInt(it.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return it.startsWith("rgb(")?it.slice(4,-1).split(",").map(g=>parseInt(g)):it.startsWith("rgba(")?it.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):(warn(`Not a valid color format: "${it}"`),[0,0,0])}function getColorValues(it){const g=document.createElement("span");g.style.visibility="hidden",g.style.colorScheme="only light",document.body.append(g);for(const et of it.keys()){g.style.color=et;const ot=window.getComputedStyle(g).color;it.set(et,getRGB(ot))}g.remove()}function getCurrentTransform(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform();return[g,et,ot,ct,ut,dt]}function getCurrentTransformInverse(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform().invertSelf();return[g,et,ot,ct,ut,dt]}function setLayerDimensions(it,g,et=!1,ot=!0){if(g instanceof PageViewport){const{pageWidth:ct,pageHeight:ut}=g.rawDims,{style:dt}=it,ft=util_FeatureTest.isCSSRoundSupported,St=`var(--total-scale-factor) * ${ct}px`,kt=`var(--total-scale-factor) * ${ut}px`,Tt=ft?`round(down, ${St}, var(--scale-round-x))`:`calc(${St})`,Rt=ft?`round(down, ${kt}, var(--scale-round-y))`:`calc(${kt})`;!et||g.rotation%180===0?(dt.width=Tt,dt.height=Rt):(dt.width=Rt,dt.height=Tt)}ot&&it.setAttribute("data-main-rotation",g.rotation)}class OutputScale{constructor(){const{pixelRatio:g}=OutputScale;this.sx=g,this.sy=g}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(g,et,ot,ct,ut=-1){let dt=1/0,ft=1/0,St=1/0;ot=OutputScale.capPixels(ot,ut),ot>0&&(dt=Math.sqrt(ot/(g*et))),ct!==-1&&(ft=ct/g,St=ct/et);const kt=Math.min(dt,ft,St);return this.sx>kt||this.sy>kt?(this.sx=kt,this.sy=kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(g,et){if(et>=0){const ot=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+et/100));return g>0?Math.min(g,ot):ot}return g}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var g;return shadow(this,"isDarkMode",!!((g=window==null?void 0:window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const g=document.createElement("span");g.classList.add("comment","sidebar");const{style:et}=g;et.width=et.height="0",et.display="none",et.color="var(--comment-fg-color)",document.body.append(g);const{color:ot}=window.getComputedStyle(g);return g.remove(),shadow(this,"commentForegroundColor",getRGB(ot))}}function applyOpacity(it,g,et,ot){ot=Math.min(Math.max(ot??1,0),1);const ct=255*(1-ot);return it=Math.round(it*ot+ct),g=Math.round(g*ot+ct),et=Math.round(et*ot+ct),[it,g,et]}function RGBToHSL(it,g){const et=it[0]/255,ot=it[1]/255,ct=it[2]/255,ut=Math.max(et,ot,ct),dt=Math.min(et,ot,ct),ft=(ut+dt)/2;if(ut===dt)g[0]=g[1]=0;else{const St=ut-dt;switch(g[1]=ft<.5?St/(ut+dt):St/(2-ut-dt),ut){case et:g[0]=((ot-ct)/St+(ot<ct?6:0))*60;break;case ot:g[0]=((ct-et)/St+2)*60;break;case ct:g[0]=((et-ot)/St+4)*60;break}}g[2]=ft}function HSLToRGB(it,g){const et=it[0],ot=it[1],ct=it[2],ut=(1-Math.abs(2*ct-1))*ot,dt=ut*(1-Math.abs(et/60%2-1)),ft=ct-ut/2;switch(Math.floor(et/60)){case 0:g[0]=ut+ft,g[1]=dt+ft,g[2]=ft;break;case 1:g[0]=dt+ft,g[1]=ut+ft,g[2]=ft;break;case 2:g[0]=ft,g[1]=ut+ft,g[2]=dt+ft;break;case 3:g[0]=ft,g[1]=dt+ft,g[2]=ut+ft;break;case 4:g[0]=dt+ft,g[1]=ft,g[2]=ut+ft;break;case 5:case 6:g[0]=ut+ft,g[1]=ft,g[2]=dt+ft;break}}function computeLuminance(it){return it<=.03928?it/12.92:((it+.055)/1.055)**2.4}function contrastRatio(it,g,et){HSLToRGB(it,et),et.map(computeLuminance);const ot=.2126*et[0]+.7152*et[1]+.0722*et[2];HSLToRGB(g,et),et.map(computeLuminance);const ct=.2126*et[0]+.7152*et[1]+.0722*et[2];return ot>ct?(ot+.05)/(ct+.05):(ct+.05)/(ot+.05)}const contrastCache=new Map;function findContrastColor(it,g){const et=it[0]+it[1]*256+it[2]*65536+g[0]*16777216+g[1]*4294967296+g[2]*1099511627776;let ot=contrastCache.get(et);if(ot)return ot;const ct=new Float32Array(9),ut=ct.subarray(0,3),dt=ct.subarray(3,6);RGBToHSL(it,dt);const ft=ct.subarray(6,9);RGBToHSL(g,ft);const St=ft[2]<.5,kt=St?12:4.5;if(dt[2]=St?Math.sqrt(dt[2]):1-Math.sqrt(1-dt[2]),contrastRatio(dt,ft,ut)<kt){let Tt,Rt;St?(Tt=dt[2],Rt=1):(Tt=0,Rt=dt[2]);const jt=.005;for(;Rt-Tt>jt;){const Ft=dt[2]=(Tt+Rt)/2;St===contrastRatio(dt,ft,ut)<kt?Tt=Ft:Rt=Ft}dt[2]=St?Rt:Tt}return HSLToRGB(dt,ut),ot=Util$1.makeHexColor(Math.round(ut[0]*255),Math.round(ut[1]*255),Math.round(ut[2]*255)),contrastCache.set(et,ot),ot}function renderRichText({html:it,dir:g,className:et},ot){const ct=document.createDocumentFragment();if(typeof it=="string"){const ut=document.createElement("p");ut.dir=g||"auto";const dt=it.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const kt=dt[ft];ut.append(document.createTextNode(kt)),ft<St-1&&ut.append(document.createElement("br"))}ct.append(ut)}else XfaLayer.render({xfaHtml:it,div:ct,intent:"richText"});ct.firstChild.classList.add("richText",et),ot.append(ct)}var Pp,Np,Yo,Xo,Mx,Mp,qy,Ky,Ox,Mw,HP,Ow,GP,Iw,WP,Op,Ly,Km,ux;const Du=class Du{constructor(g){yn(this,Ow);yn(this,Iw);yn(this,Op);yn(this,Km);yn(this,Pp,null);yn(this,Np,null);yn(this,Yo,void 0);yn(this,Xo,null);yn(this,Mx,null);yn(this,Mp,null);yn(this,qy,null);yn(this,Ky,null);vn(this,Yo,g),Kt(Du,Ox)||vn(Du,Ox,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const g=vn(this,Pp,document.createElement("div"));g.classList.add("editToolbar","hidden"),g.setAttribute("role","toolbar");const et=Kt(this,Yo)._uiManager._signal;et instanceof AbortSignal&&!et.aborted&&(g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.addEventListener("pointerdown",_n(Du,Mw,HP),{signal:et}));const ot=vn(this,Xo,document.createElement("div"));ot.className="buttons",g.append(ot);const ct=Kt(this,Yo).toolbarPosition;if(ct){const{style:ut}=g,dt=Kt(this,Yo)._uiManager.direction==="ltr"?1-ct[0]:ct[0];ut.insetInlineEnd=`${100*dt}%`,ut.top=`calc(${100*ct[1]}% + var(--editor-toolbar-vert-offset))`}return g}get div(){return Kt(this,Pp)}hide(){var g;Kt(this,Pp).classList.add("hidden"),(g=Kt(this,Np))==null||g.hideDropdown()}show(){var g,et;Kt(this,Pp).classList.remove("hidden"),(g=Kt(this,Mx))==null||g.shown(),(et=Kt(this,Mp))==null||et.shown()}addDeleteButton(){const{editorType:g,_uiManager:et}=Kt(this,Yo),ot=document.createElement("button");ot.classList.add("basic","deleteButton"),ot.tabIndex=0,ot.setAttribute("data-l10n-id",Kt(Du,Ox)[g]),_n(this,Op,Ly).call(this,ot)&&ot.addEventListener("click",ct=>{et.delete()},{signal:et._signal}),Kt(this,Xo).append(ot)}async addAltText(g){const et=await g.render();_n(this,Op,Ly).call(this,et),Kt(this,Xo).append(et,Kt(this,Km,ux)),vn(this,Mx,g)}addComment(g,et=null){if(Kt(this,Mp))return;const ot=g.renderForToolbar();if(!ot)return;_n(this,Op,Ly).call(this,ot);const ct=vn(this,qy,Kt(this,Km,ux));et?(Kt(this,Xo).insertBefore(ot,et),Kt(this,Xo).insertBefore(ct,et)):Kt(this,Xo).append(ot,ct),vn(this,Mp,g),g.toolbar=this}addColorPicker(g){if(Kt(this,Np))return;vn(this,Np,g);const et=g.renderButton();_n(this,Op,Ly).call(this,et),Kt(this,Xo).append(et,Kt(this,Km,ux))}async addEditSignatureButton(g){const et=vn(this,Ky,await g.renderEditButton(Kt(this,Yo)));_n(this,Op,Ly).call(this,et),Kt(this,Xo).append(et,Kt(this,Km,ux))}removeButton(g){var et,ot;switch(g){case"comment":(et=Kt(this,Mp))==null||et.removeToolbarCommentButton(),vn(this,Mp,null),(ot=Kt(this,qy))==null||ot.remove(),vn(this,qy,null);break}}async addButton(g,et){switch(g){case"colorPicker":this.addColorPicker(et);break;case"altText":await this.addAltText(et);break;case"editSignature":await this.addEditSignatureButton(et);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(et);break}}async addButtonBefore(g,et,ot){const ct=Kt(this,Xo).querySelector(ot);ct&&g==="comment"&&this.addComment(et,ct)}updateEditSignatureButton(g){Kt(this,Ky)&&(Kt(this,Ky).title=g)}remove(){var g;Kt(this,Pp).remove(),(g=Kt(this,Np))==null||g.destroy(),vn(this,Np,null)}};Pp=new WeakMap,Np=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Mx=new WeakMap,Mp=new WeakMap,qy=new WeakMap,Ky=new WeakMap,Ox=new WeakMap,Mw=new WeakSet,HP=function(g){g.stopPropagation()},Ow=new WeakSet,GP=function(g){Kt(this,Yo)._focusEventsAllowed=!1,stopEvent(g)},Iw=new WeakSet,WP=function(g){Kt(this,Yo)._focusEventsAllowed=!0,stopEvent(g)},Op=new WeakSet,Ly=function(g){const et=Kt(this,Yo)._uiManager._signal;return!(et instanceof AbortSignal)||et.aborted?!1:(g.addEventListener("focusin",_n(this,Ow,GP).bind(this),{capture:!0,signal:et}),g.addEventListener("focusout",_n(this,Iw,WP).bind(this),{capture:!0,signal:et}),g.addEventListener("contextmenu",noContextMenu,{signal:et}),!0)},Km=new WeakSet,ux=function(){const g=document.createElement("div");return g.className="divider",g},yn(Du,Mw),yn(Du,Ox,null);let EditorToolbar=Du;var Ix,Ym,ju,Dw,qP,Lw,KP,Dx,BA;class FloatingToolbar{constructor(g){yn(this,Dw);yn(this,Lw);yn(this,Dx);yn(this,Ix,null);yn(this,Ym,null);yn(this,ju,void 0);vn(this,ju,g)}show(g,et,ot){const[ct,ut]=_n(this,Lw,KP).call(this,et,ot),{style:dt}=Kt(this,Ym)||vn(this,Ym,_n(this,Dw,qP).call(this));g.append(Kt(this,Ym)),dt.insetInlineEnd=`${100*ct}%`,dt.top=`calc(${100*ut}% + var(--editor-toolbar-vert-offset))`}hide(){Kt(this,Ym).remove()}}Ix=new WeakMap,Ym=new WeakMap,ju=new WeakMap,Dw=new WeakSet,qP=function(){const g=vn(this,Ym,document.createElement("div"));g.className="editToolbar",g.setAttribute("role","toolbar");const et=Kt(this,ju)._signal;et instanceof AbortSignal&&!et.aborted&&g.addEventListener("contextmenu",noContextMenu,{signal:et});const ot=vn(this,Ix,document.createElement("div"));return ot.className="buttons",g.append(ot),Kt(this,ju).hasCommentManager()&&_n(this,Dx,BA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Kt(this,ju).commentSelection("floating_button")}),_n(this,Dx,BA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Kt(this,ju).highlightSelection("floating_button")}),g},Lw=new WeakSet,KP=function(g,et){let ot=0,ct=0;for(const ut of g){const dt=ut.y+ut.height;if(dt<ot)continue;const ft=ut.x+(et?ut.width:0);if(dt>ot){ct=ft,ot=dt;continue}et?ft>ct&&(ct=ft):ft<ct&&(ct=ft)}return[et?1-ct:ct,ot]},Dx=new WeakSet,BA=function(g,et,ot,ct){const ut=document.createElement("button");ut.classList.add("basic",g),ut.tabIndex=0,ut.setAttribute("data-l10n-id",et);const dt=document.createElement("span");ut.append(dt),dt.className="visuallyHidden",dt.setAttribute("data-l10n-id",ot);const ft=Kt(this,ju)._signal;ft instanceof AbortSignal&&!ft.aborted&&(ut.addEventListener("contextmenu",noContextMenu,{signal:ft}),ut.addEventListener("click",ct,{signal:ft})),Kt(this,Ix).append(ut)};function bindEvents(it,g,et){for(const ot of et)g.addEventListener(ot,it[ot].bind(it))}var jw;class IdManager{constructor(){yn(this,jw,0)}get id(){return`${AnnotationEditorPrefix}${cs(this,jw)._++}`}}jw=new WeakMap;var Yy,Lx,Bs,Xy,ew;const HC=class HC{constructor(){yn(this,Xy);yn(this,Yy,getUuid());yn(this,Lx,0);yn(this,Bs,null)}static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ot=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ct=new Image;ct.src=g;const ut=ct.decode().then(()=>(ot.drawImage(ct,0,0,1,1,0,0,1,3),new Uint32Array(ot.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ut)}async getFromFile(g){const{lastModified:et,name:ot,size:ct,type:ut}=g;return _n(this,Xy,ew).call(this,`${et}_${ot}_${ct}_${ut}`,g)}async getFromUrl(g){return _n(this,Xy,ew).call(this,g,g)}async getFromBlob(g,et){const ot=await et;return _n(this,Xy,ew).call(this,g,ot)}async getFromId(g){Kt(this,Bs)||vn(this,Bs,new Map);const et=Kt(this,Bs).get(g);if(!et)return null;if(et.bitmap)return et.refCounter+=1,et;if(et.file)return this.getFromFile(et.file);if(et.blobPromise){const{blobPromise:ot}=et;return delete et.blobPromise,this.getFromBlob(et.id,ot)}return this.getFromUrl(et.url)}getFromCanvas(g,et){Kt(this,Bs)||vn(this,Bs,new Map);let ot=Kt(this,Bs).get(g);if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;const ct=new OffscreenCanvas(et.width,et.height);return ct.getContext("2d").drawImage(et,0,0),ot={bitmap:ct.transferToImageBitmap(),id:`image_${Kt(this,Yy)}_${cs(this,Lx)._++}`,refCounter:1,isSvg:!1},Kt(this,Bs).set(g,ot),Kt(this,Bs).set(ot.id,ot),ot}getSvgUrl(g){const et=Kt(this,Bs).get(g);return et!=null&&et.isSvg?et.svgUrl:null}deleteId(g){var ct;Kt(this,Bs)||vn(this,Bs,new Map);const et=Kt(this,Bs).get(g);if(!et||(et.refCounter-=1,et.refCounter!==0))return;const{bitmap:ot}=et;if(!et.url&&!et.file){const ut=new OffscreenCanvas(ot.width,ot.height);ut.getContext("bitmaprenderer").transferFromImageBitmap(ot),et.blobPromise=ut.convertToBlob()}(ct=ot.close)==null||ct.call(ot),et.bitmap=null}isValidId(g){return g.startsWith(`image_${Kt(this,Yy)}_`)}};Yy=new WeakMap,Lx=new WeakMap,Bs=new WeakMap,Xy=new WeakSet,ew=async function(g,et){Kt(this,Bs)||vn(this,Bs,new Map);let ot=Kt(this,Bs).get(g);if(ot===null)return null;if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;try{ot||(ot={bitmap:null,id:`image_${Kt(this,Yy)}_${cs(this,Lx)._++}`,refCounter:0,isSvg:!1});let ct;if(typeof et=="string"?(ot.url=et,ct=await fetchData(et,"blob")):et instanceof File?ct=ot.file=et:et instanceof Blob&&(ct=et),ct.type==="image/svg+xml"){const ut=HC._isSVGFittingCanvas,dt=new FileReader,ft=new Image,St=new Promise((kt,Tt)=>{ft.onload=()=>{ot.bitmap=ft,ot.isSvg=!0,kt()},dt.onload=async()=>{const Rt=ot.svgUrl=dt.result;ft.src=await ut?`${Rt}#svgView(preserveAspectRatio(none))`:Rt},ft.onerror=dt.onerror=Tt});dt.readAsDataURL(ct),await St}else ot.bitmap=await createImageBitmap(ct);ot.refCounter=1}catch(ct){warn(ct),ot=null}return Kt(this,Bs).set(g,ot),ot&&Kt(this,Bs).set(ot.id,ot),ot};let ImageManager=HC;var es,Ip,jx,Xr;class CommandManager{constructor(g=128){yn(this,es,[]);yn(this,Ip,!1);yn(this,jx,void 0);yn(this,Xr,-1);vn(this,jx,g)}add({cmd:g,undo:et,post:ot,mustExec:ct,type:ut=NaN,overwriteIfSameType:dt=!1,keepUndo:ft=!1}){if(ct&&g(),Kt(this,Ip))return;const St={cmd:g,undo:et,post:ot,type:ut};if(Kt(this,Xr)===-1){Kt(this,es).length>0&&(Kt(this,es).length=0),vn(this,Xr,0),Kt(this,es).push(St);return}if(dt&&Kt(this,es)[Kt(this,Xr)].type===ut){ft&&(St.undo=Kt(this,es)[Kt(this,Xr)].undo),Kt(this,es)[Kt(this,Xr)]=St;return}const kt=Kt(this,Xr)+1;kt===Kt(this,jx)?Kt(this,es).splice(0,1):(vn(this,Xr,kt),kt<Kt(this,es).length&&Kt(this,es).splice(kt)),Kt(this,es).push(St)}undo(){if(Kt(this,Xr)===-1)return;vn(this,Ip,!0);const{undo:g,post:et}=Kt(this,es)[Kt(this,Xr)];g(),et==null||et(),vn(this,Ip,!1),vn(this,Xr,Kt(this,Xr)-1)}redo(){if(Kt(this,Xr)<Kt(this,es).length-1){vn(this,Xr,Kt(this,Xr)+1),vn(this,Ip,!0);const{cmd:g,post:et}=Kt(this,es)[Kt(this,Xr)];g(),et==null||et(),vn(this,Ip,!1)}}hasSomethingToUndo(){return Kt(this,Xr)!==-1}hasSomethingToRedo(){return Kt(this,Xr)<Kt(this,es).length-1}cleanType(g){if(Kt(this,Xr)!==-1){for(let et=Kt(this,Xr);et>=0;et--)if(Kt(this,es)[et].type!==g){Kt(this,es).splice(et+1,Kt(this,Xr)-et),vn(this,Xr,et);return}Kt(this,es).length=0,vn(this,Xr,-1)}}destroy(){vn(this,es,null)}}es=new WeakMap,Ip=new WeakMap,jx=new WeakMap,Xr=new WeakMap;var Fw,YP;class KeyboardManager{constructor(g){yn(this,Fw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:et}=util_FeatureTest.platform;for(const[ot,ct,ut={}]of g)for(const dt of ot){const ft=dt.startsWith("mac+");et&&ft?(this.callbacks.set(dt.slice(4),{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1))):!et&&!ft&&(this.callbacks.set(dt,{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1)))}}exec(g,et){if(!this.allKeys.has(et.key))return;const ot=this.callbacks.get(_n(this,Fw,YP).call(this,et));if(!ot)return;const{callback:ct,options:{bubbles:ut=!1,args:dt=[],checker:ft=null}}=ot;ft&&!ft(g,et)||(ct.bind(g,...dt,et)(),ut||stopEvent(et))}}Fw=new WeakSet,YP=function(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const et=this.buffer.join("+");return this.buffer.length=0,et};const $w=class $w{get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(g),shadow(this,"_colors",g)}convert(g){const et=getRGB(g);if(!window.matchMedia("(forced-colors: active)").matches)return et;for(const[ot,ct]of this._colors)if(ct.every((ut,dt)=>ut===et[dt]))return $w._colorsMapping.get(ot);return et}getHexCode(g){const et=this._colors.get(g);return et?Util$1.makeHexColor(...et):g}};qn($w,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=$w;var Jy,So,Qy,Jr,hs,Zy,Jo,e1,Qo,Vs,Dp,Lp,t1,jp,nu,Zo,Xm,Fx,$x,n1,Bx,ru,Fp,r1,$p,iu,Bw,Bp,i1,Vx,Vp,Jm,s1,zp,zx,ss,_r,Fu,Hp,Up,Hx,o1,Ux,Gp,su,$u,Gx,Wx,na,a1,tw,qx,VA,Vw,XP,zw,JP,Qm,hx,Hw,QP,Uw,ZP,Gw,e3,Kx,zA,Ww,t3,Yx,HA,Xx,UA,qw,n3,Cs,qs,Pl,Ou,Kw,r3,Yw,i3,Jx,GA,Xw,s3,Zm,dx,Qx,WA;const zy=class zy{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt,Ft,$t,zt,Ut){yn(this,a1);yn(this,qx);yn(this,Vw);yn(this,zw);yn(this,Qm);yn(this,Hw);yn(this,Uw);yn(this,Gw);yn(this,Kx);yn(this,Ww);yn(this,Yx);yn(this,Xx);yn(this,qw);yn(this,Cs);yn(this,Pl);yn(this,Kw);yn(this,Yw);yn(this,Jx);yn(this,Xw);yn(this,Zm);yn(this,Qx);yn(this,Jy,new AbortController);yn(this,So,null);yn(this,Qy,null);yn(this,Jr,new Map);yn(this,hs,new Map);yn(this,Zy,null);yn(this,Jo,null);yn(this,e1,null);yn(this,Qo,new CommandManager);yn(this,Vs,null);yn(this,Dp,null);yn(this,Lp,null);yn(this,t1,0);yn(this,jp,new Set);yn(this,nu,null);yn(this,Zo,null);yn(this,Xm,new Set);qn(this,"_editorUndoBar",null);yn(this,Fx,!1);yn(this,$x,!1);yn(this,n1,!1);yn(this,Bx,null);yn(this,ru,null);yn(this,Fp,null);yn(this,r1,null);yn(this,$p,!1);yn(this,iu,null);yn(this,Bw,new IdManager);yn(this,Bp,!1);yn(this,i1,!1);yn(this,Vx,!1);yn(this,Vp,null);yn(this,Jm,null);yn(this,s1,null);yn(this,zp,null);yn(this,zx,null);yn(this,ss,AnnotationEditorType.NONE);yn(this,_r,new Set);yn(this,Fu,null);yn(this,Hp,null);yn(this,Up,null);yn(this,Hx,null);yn(this,o1,null);yn(this,Ux,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});yn(this,Gp,[0,0]);yn(this,su,null);yn(this,$u,null);yn(this,Gx,null);yn(this,Wx,null);yn(this,na,null);const Bt=this._signal=Kt(this,Jy).signal;vn(this,$u,g),vn(this,Gx,et),vn(this,Wx,ot),vn(this,Zy,ct),vn(this,Vs,ut),vn(this,Hp,dt),vn(this,o1,St),this._eventBus=ft,ft._on("editingaction",this.onEditingAction.bind(this),{signal:Bt}),ft._on("pagechanging",this.onPageChanging.bind(this),{signal:Bt}),ft._on("scalechanging",this.onScaleChanging.bind(this),{signal:Bt}),ft._on("rotationchanging",this.onRotationChanging.bind(this),{signal:Bt}),ft._on("setpreference",this.onSetPreference.bind(this),{signal:Bt}),ft._on("switchannotationeditorparams",Ht=>this.updateParams(Ht.type,Ht.value),{signal:Bt}),window.addEventListener("pointerdown",()=>{vn(this,i1,!0)},{capture:!0,signal:Bt}),window.addEventListener("pointerup",()=>{vn(this,i1,!1)},{capture:!0,signal:Bt}),_n(this,Hw,QP).call(this),_n(this,qw,n3).call(this),_n(this,Kx,zA).call(this),vn(this,Jo,St.annotationStorage),vn(this,Bx,St.filterFactory),vn(this,Up,kt),vn(this,r1,Tt||null),vn(this,Fx,Rt),vn(this,$x,jt),vn(this,n1,Ft),vn(this,zx,$t||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=zt||null,this._supportsPinchToZoom=Ut!==!1,ut==null||ut.setSidebarUiManager(this)}static get _keyboardManager(){const g=zy.prototype,et=dt=>Kt(dt,$u).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&dt.hasSomethingToControl(),ot=(dt,{target:ft})=>{if(ft instanceof HTMLInputElement){const{type:St}=ft;return St!=="text"&&St!=="number"}return!0},ct=this.TRANSLATE_SMALL,ut=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],g.selectAll,{checker:ot}],[["ctrl+z","mac+meta+z"],g.undo,{checker:ot}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo,{checker:ot}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete,{checker:ot}],[["Enter","mac+Enter"],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Kt(dt,$u).contains(ft)&&!dt.isEnterHandled}],[[" ","mac+ "],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Kt(dt,$u).contains(document.activeElement)}],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-ct,0],checker:et}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-ut,0],checker:et}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[ct,0],checker:et}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[ut,0],checker:et}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-ct],checker:et}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-ut],checker:et}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,ct],checker:et}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,ut],checker:et}]]))}destroy(){var g,et,ot,ct,ut,dt,ft,St,kt;(g=Kt(this,na))==null||g.resolve(),vn(this,na,null),(et=Kt(this,Jy))==null||et.abort(),vn(this,Jy,null),this._signal=null;for(const Tt of Kt(this,hs).values())Tt.destroy();Kt(this,hs).clear(),Kt(this,Jr).clear(),Kt(this,Xm).clear(),(ot=Kt(this,zp))==null||ot.clear(),vn(this,So,null),Kt(this,_r).clear(),Kt(this,Qo).destroy(),(ct=Kt(this,Zy))==null||ct.destroy(),(ut=Kt(this,Vs))==null||ut.destroy(),(dt=Kt(this,Hp))==null||dt.destroy(),(ft=Kt(this,iu))==null||ft.hide(),vn(this,iu,null),(St=Kt(this,s1))==null||St.destroy(),vn(this,s1,null),vn(this,Qy,null),Kt(this,ru)&&(clearTimeout(Kt(this,ru)),vn(this,ru,null)),Kt(this,su)&&(clearTimeout(Kt(this,su)),vn(this,su,null)),(kt=this._editorUndoBar)==null||kt.destroy(),vn(this,o1,null)}combinedSignal(g){return AbortSignal.any([this._signal,g.signal])}get mlManager(){return Kt(this,zx)}get useNewAltTextFlow(){return Kt(this,$x)}get useNewAltTextWhenAddingImage(){return Kt(this,n1)}get hcmFilter(){return shadow(this,"hcmFilter",Kt(this,Up)?Kt(this,Bx).addHCMFilter(Kt(this,Up).foreground,Kt(this,Up).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(Kt(this,$u)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",Kt(this,r1)?new Map(Kt(this,r1).split(",").map(g=>(g=g.split("=").map(et=>et.trim()),g[1]=g[1].toUpperCase(),g))):null)}get highlightColors(){const{_highlightColors:g}=this;if(!g)return shadow(this,"highlightColors",null);const et=new Map,ot=!!Kt(this,Up);for(const[ct,ut]of g){const dt=ct.endsWith("_HCM");if(ot&&dt){et.set(ct.replace("_HCM",""),ut);continue}!ot&&!dt&&et.set(ct,ut)}return shadow(this,"highlightColors",et)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,g=>g.reverse())):null)}getNonHCMColor(g){if(!this._highlightColors)return g;const et=this.highlightColorNames.get(g);return this._highlightColors.get(et)||g}getNonHCMColorName(g){return this.highlightColorNames.get(g)||g}setCurrentDrawingSession(g){g?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),vn(this,Lp,g)}setMainHighlightColorPicker(g){vn(this,s1,g)}editAltText(g,et=!1){var ot;(ot=Kt(this,Zy))==null||ot.editAltText(this,g,et)}hasCommentManager(){return!!Kt(this,Vs)}editComment(g,et,ot,ct){var ut;(ut=Kt(this,Vs))==null||ut.showDialog(this,g,et,ot,ct)}selectComment(g,et){const ot=Kt(this,hs).get(g),ct=ot==null?void 0:ot.getEditorByUID(et);ct==null||ct.toggleComment(!0,!0)}updateComment(g){var et;(et=Kt(this,Vs))==null||et.updateComment(g.getData())}updatePopupColor(g){var et;(et=Kt(this,Vs))==null||et.updatePopupColor(g)}removeComment(g){var et;(et=Kt(this,Vs))==null||et.removeComments([g.uid])}toggleComment(g,et,ot=void 0){var ct;(ct=Kt(this,Vs))==null||ct.toggleCommentPopup(g,et,ot)}makeCommentColor(g,et){var ot;return g&&((ot=Kt(this,Vs))==null?void 0:ot.makeCommentColor(g,et))||null}getCommentDialogElement(){var g;return((g=Kt(this,Vs))==null?void 0:g.dialogElement)||null}async waitForEditorsRendered(g){if(Kt(this,hs).has(g-1))return;const{resolve:et,promise:ot}=Promise.withResolvers(),ct=ut=>{ut.pageNumber===g&&(this._eventBus._off("editorsrendered",ct),et())};this._eventBus.on("editorsrendered",ct),await ot}getSignature(g){var et;(et=Kt(this,Hp))==null||et.getSignature({uiManager:this,editor:g})}get signatureManager(){return Kt(this,Hp)}switchToMode(g,et){this._eventBus.on("annotationeditormodechanged",et,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:g})}setPreference(g,et){this._eventBus.dispatch("setpreference",{source:this,name:g,value:et})}onSetPreference({name:g,value:et}){switch(g){case"enableNewAltTextWhenAddingImage":vn(this,n1,et);break}}onPageChanging({pageNumber:g}){vn(this,t1,g-1)}focusMainContainer(){Kt(this,$u).focus()}findParent(g,et){for(const ot of Kt(this,hs).values()){const{x:ct,y:ut,width:dt,height:ft}=ot.div.getBoundingClientRect();if(g>=ct&&g<=ct+dt&&et>=ut&&et<=ut+ft)return ot}return null}disableUserSelect(g=!1){Kt(this,Gx).classList.toggle("noUserSelect",g)}addShouldRescale(g){Kt(this,Xm).add(g)}removeShouldRescale(g){Kt(this,Xm).delete(g)}onScaleChanging({scale:g}){var et;this.commitOrRemove(),this.viewParameters.realScale=g*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ot of Kt(this,Xm))ot.onScaleChanging();(et=Kt(this,Lp))==null||et.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}highlightSelection(g="",et=!1){const ot=document.getSelection();if(!ot||ot.isCollapsed)return;const{anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft}=ot,St=ot.toString(),Tt=_n(this,a1,tw).call(this,ot).closest(".textLayer"),Rt=this.getSelectionBoxes(Tt);if(!Rt)return;ot.empty();const jt=_n(this,qx,VA).call(this,Tt),Ft=Kt(this,ss)===AnnotationEditorType.NONE,$t=()=>{const zt=jt==null?void 0:jt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:g,boxes:Rt,anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft,text:St});Ft&&this.showAllEditors("highlight",!0,!0),et&&(zt==null||zt.editComment())};if(Ft){this.switchToMode(AnnotationEditorType.HIGHLIGHT,$t);return}$t()}commentSelection(g=""){this.highlightSelection(g,!0)}getAndRemoveDataFromAnnotationStorage(g){if(!Kt(this,Jo))return null;const et=`${AnnotationEditorPrefix}${g}`,ot=Kt(this,Jo).getRawValue(et);return ot&&Kt(this,Jo).remove(et),ot}addToAnnotationStorage(g){!g.isEmpty()&&Kt(this,Jo)&&!Kt(this,Jo).has(g.id)&&Kt(this,Jo).setValue(g.id,g)}a11yAlert(g,et=null){const ot=Kt(this,Wx);ot&&(ot.setAttribute("data-l10n-id",g),et?ot.setAttribute("data-l10n-args",JSON.stringify(et)):ot.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Kt(this,$p)&&(vn(this,$p,!1),_n(this,Qm,hx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:g}=document;for(const et of Kt(this,_r))if(et.div.contains(g)){vn(this,Jm,[et,g]),et._focusEventsAllowed=!1;break}}focus(){if(!Kt(this,Jm))return;const[g,et]=Kt(this,Jm);vn(this,Jm,null),et.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:this._signal}),et.focus()}addEditListeners(){_n(this,Kx,zA).call(this),_n(this,Yx,HA).call(this)}removeEditListeners(){_n(this,Ww,t3).call(this),_n(this,Xx,UA).call(this)}dragOver(g){for(const{type:et}of g.dataTransfer.items)for(const ot of Kt(this,Zo))if(ot.isHandlingMimeForPasting(et)){g.dataTransfer.dropEffect="copy",g.preventDefault();return}}drop(g){for(const et of g.dataTransfer.items)for(const ot of Kt(this,Zo))if(ot.isHandlingMimeForPasting(et.type)){ot.paste(et,this.currentLayer),g.preventDefault();return}}copy(g){var ot;if(g.preventDefault(),(ot=Kt(this,So))==null||ot.commitOrRemove(),!this.hasSelection)return;const et=[];for(const ct of Kt(this,_r)){const ut=ct.serialize(!0);ut&&et.push(ut)}et.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(et))}cut(g){this.copy(g),this.delete()}async paste(g){g.preventDefault();const{clipboardData:et}=g;for(const ut of et.items)for(const dt of Kt(this,Zo))if(dt.isHandlingMimeForPasting(ut.type)){dt.paste(ut,this.currentLayer);return}let ot=et.getData("application/pdfjs");if(!ot)return;try{ot=JSON.parse(ot)}catch(ut){warn(`paste: "${ut.message}".`);return}if(!Array.isArray(ot))return;this.unselectAll();const ct=this.currentLayer;try{const ut=[];for(const St of ot){const kt=await ct.deserialize(St);if(!kt)return;ut.push(kt)}const dt=()=>{for(const St of ut)_n(this,Jx,GA).call(this,St);_n(this,Qx,WA).call(this,ut)},ft=()=>{for(const St of ut)St.remove()};this.addCommands({cmd:dt,undo:ft,mustExec:!0})}catch(ut){warn(`paste: "${ut.message}".`)}}keydown(g){!this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!0),Kt(this,ss)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&zy._keyboardManager.exec(this,g)}keyup(g){this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!1,Kt(this,$p)&&(vn(this,$p,!1),_n(this,Qm,hx).call(this,"main_toolbar")))}onEditingAction({name:g}){switch(g){case"undo":case"redo":case"delete":case"selectAll":this[g]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(g){g?(_n(this,Uw,ZP).call(this),_n(this,Yx,HA).call(this),_n(this,Cs,qs).call(this,{isEditing:Kt(this,ss)!==AnnotationEditorType.NONE,isEmpty:_n(this,Zm,dx).call(this),hasSomethingToUndo:Kt(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:Kt(this,Qo).hasSomethingToRedo(),hasSelectedEditor:!1})):(_n(this,Gw,e3).call(this),_n(this,Xx,UA).call(this),_n(this,Cs,qs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!Kt(this,Zo)){vn(this,Zo,g);for(const et of Kt(this,Zo))_n(this,Pl,Ou).call(this,et.defaultPropertiesToUpdate)}}getId(){return Kt(this,Bw).id}get currentLayer(){return Kt(this,hs).get(Kt(this,t1))}getLayer(g){return Kt(this,hs).get(g)}get currentPageIndex(){return Kt(this,t1)}addLayer(g){Kt(this,hs).set(g.pageIndex,g),Kt(this,Bp)?g.enable():g.disable()}removeLayer(g){Kt(this,hs).delete(g.pageIndex)}async updateMode(g,et=null,ot=!1,ct=!1,ut=!1){var dt,ft,St,kt,Tt,Rt;if(Kt(this,ss)!==g&&!(Kt(this,na)&&(await Kt(this,na).promise,!Kt(this,na)))){if(vn(this,na,Promise.withResolvers()),(dt=Kt(this,Lp))==null||dt.commitOrRemove(),Kt(this,ss)===AnnotationEditorType.POPUP&&((ft=Kt(this,Vs))==null||ft.hideSidebar()),(St=Kt(this,Vs))==null||St.destroyPopup(),vn(this,ss,g),g===AnnotationEditorType.NONE){this.setEditingState(!1),_n(this,Yw,i3).call(this);for(const jt of Kt(this,Jr).values())jt.hideStandaloneCommentButton();(kt=this._editorUndoBar)==null||kt.hide(),this.toggleComment(null),Kt(this,na).resolve();return}for(const jt of Kt(this,Jr).values())jt.addStandaloneCommentButton();g===AnnotationEditorType.SIGNATURE&&await((Tt=Kt(this,Hp))==null?void 0:Tt.loadSignatures()),this.setEditingState(!0),await _n(this,Kw,r3).call(this),this.unselectAll();for(const jt of Kt(this,hs).values())jt.updateMode(g);if(g===AnnotationEditorType.POPUP){Kt(this,Qy)||vn(this,Qy,await Kt(this,o1).getAnnotationsByType(new Set(Kt(this,Zo).map($t=>$t._editorType))));const jt=new Set,Ft=[];for(const $t of Kt(this,Jr).values()){const{annotationElementId:zt,hasComment:Ut,deleted:Bt}=$t;zt&&jt.add(zt),Ut&&!Bt&&Ft.push($t.getData())}for(const $t of Kt(this,Qy)){const{id:zt,popupRef:Ut,contentsObj:Bt}=$t;Ut&&(Bt!=null&&Bt.str)&&!jt.has(zt)&&!Kt(this,jp).has(zt)&&Ft.push($t)}(Rt=Kt(this,Vs))==null||Rt.showSidebar(Ft)}if(!et){ot&&this.addNewEditorFromKeyboard(),Kt(this,na).resolve();return}for(const jt of Kt(this,Jr).values())jt.uid===et?(this.setSelected(jt),ut?jt.editComment():ct?jt.enterInEditMode():jt.focus()):jt.unselect();Kt(this,na).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(g){g.mode!==Kt(this,ss)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...g})}updateParams(g,et){if(Kt(this,Zo)){switch(g){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(et);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Kt(this,Hx)||vn(this,Hx,new Map)).set(g,et),this.showAllEditors("highlight",et);break}if(this.hasSelection)for(const ot of Kt(this,_r))ot.updateParams(g,et);else for(const ot of Kt(this,Zo))ot.updateDefaultParams(g,et)}}showAllEditors(g,et,ot=!1){var ut;for(const dt of Kt(this,Jr).values())dt.editorType===g&&dt.show(et);(((ut=Kt(this,Hx))==null?void 0:ut.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==et&&_n(this,Pl,Ou).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,et]])}enableWaiting(g=!1){if(Kt(this,Vx)!==g){vn(this,Vx,g);for(const et of Kt(this,hs).values())g?et.disableClick():et.enableClick(),et.div.classList.toggle("waiting",g)}}*getEditors(g){for(const et of Kt(this,Jr).values())et.pageIndex===g&&(yield et)}getEditor(g){return Kt(this,Jr).get(g)}addEditor(g){Kt(this,Jr).set(g.id,g)}removeEditor(g){var et,ot;g.div.contains(document.activeElement)&&(Kt(this,ru)&&clearTimeout(Kt(this,ru)),vn(this,ru,setTimeout(()=>{this.focusMainContainer(),vn(this,ru,null)},0))),Kt(this,Jr).delete(g.id),g.annotationElementId&&((et=Kt(this,zp))==null||et.delete(g.annotationElementId)),this.unselect(g),(!g.annotationElementId||!Kt(this,jp).has(g.annotationElementId))&&((ot=Kt(this,Jo))==null||ot.remove(g.id))}addDeletedAnnotationElement(g){Kt(this,jp).add(g.annotationElementId),this.addChangedExistingAnnotation(g),g.deleted=!0}isDeletedAnnotationElement(g){return Kt(this,jp).has(g)}removeDeletedAnnotationElement(g){Kt(this,jp).delete(g.annotationElementId),this.removeChangedExistingAnnotation(g),g.deleted=!1}setActiveEditor(g){Kt(this,So)!==g&&(vn(this,So,g),g&&_n(this,Pl,Ou).call(this,g.propertiesToUpdate))}updateUI(g){Kt(this,Xw,s3)===g&&_n(this,Pl,Ou).call(this,g.propertiesToUpdate)}updateUIForDefaultProperties(g){_n(this,Pl,Ou).call(this,g.defaultPropertiesToUpdate)}toggleSelected(g){if(Kt(this,_r).has(g)){Kt(this,_r).delete(g),g.unselect(),_n(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection});return}Kt(this,_r).add(g),g.select(),_n(this,Pl,Ou).call(this,g.propertiesToUpdate),_n(this,Cs,qs).call(this,{hasSelectedEditor:!0})}setSelected(g){var et;this.updateToolbar({mode:g.mode,editId:g.id}),(et=Kt(this,Lp))==null||et.commitOrRemove();for(const ot of Kt(this,_r))ot!==g&&ot.unselect();Kt(this,_r).clear(),Kt(this,_r).add(g),g.select(),_n(this,Pl,Ou).call(this,g.propertiesToUpdate),_n(this,Cs,qs).call(this,{hasSelectedEditor:!0})}isSelected(g){return Kt(this,_r).has(g)}get firstSelectedEditor(){return Kt(this,_r).values().next().value}unselect(g){g.unselect(),Kt(this,_r).delete(g),_n(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Kt(this,_r).size!==0}get isEnterHandled(){return Kt(this,_r).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var g;Kt(this,Qo).undo(),_n(this,Cs,qs).call(this,{hasSomethingToUndo:Kt(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_n(this,Zm,dx).call(this)}),(g=this._editorUndoBar)==null||g.hide()}redo(){Kt(this,Qo).redo(),_n(this,Cs,qs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Kt(this,Qo).hasSomethingToRedo(),isEmpty:_n(this,Zm,dx).call(this)})}addCommands(g){Kt(this,Qo).add(g),_n(this,Cs,qs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_n(this,Zm,dx).call(this)})}cleanUndoStack(g){Kt(this,Qo).cleanType(g)}delete(){var ut;this.commitOrRemove();const g=(ut=this.currentLayer)==null?void 0:ut.endDrawingSession(!0);if(!this.hasSelection&&!g)return;const et=g?[g]:[...Kt(this,_r)],ot=()=>{var dt;(dt=this._editorUndoBar)==null||dt.show(ct,et.length===1?et[0].editorType:et.length);for(const ft of et)ft.remove()},ct=()=>{for(const dt of et)_n(this,Jx,GA).call(this,dt)};this.addCommands({cmd:ot,undo:ct,mustExec:!0})}commitOrRemove(){var g;(g=Kt(this,So))==null||g.commitOrRemove()}hasSomethingToControl(){return Kt(this,So)||this.hasSelection}selectAll(){for(const g of Kt(this,_r))g.commit();_n(this,Qx,WA).call(this,Kt(this,Jr).values())}unselectAll(){var g;if(!(Kt(this,So)&&(Kt(this,So).commitOrRemove(),Kt(this,ss)!==AnnotationEditorType.NONE))&&!((g=Kt(this,Lp))!=null&&g.commitOrRemove())&&this.hasSelection){for(const et of Kt(this,_r))et.unselect();Kt(this,_r).clear(),_n(this,Cs,qs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(g,et,ot=!1){if(ot||this.commitOrRemove(),!this.hasSelection)return;Kt(this,Gp)[0]+=g,Kt(this,Gp)[1]+=et;const[ct,ut]=Kt(this,Gp),dt=[...Kt(this,_r)],ft=1e3;Kt(this,su)&&clearTimeout(Kt(this,su)),vn(this,su,setTimeout(()=>{vn(this,su,null),Kt(this,Gp)[0]=Kt(this,Gp)[1]=0,this.addCommands({cmd:()=>{for(const St of dt)Kt(this,Jr).has(St.id)&&(St.translateInPage(ct,ut),St.translationDone())},undo:()=>{for(const St of dt)Kt(this,Jr).has(St.id)&&(St.translateInPage(-ct,-ut),St.translationDone())},mustExec:!1})},ft));for(const St of dt)St.translateInPage(g,et),St.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),vn(this,nu,new Map);for(const g of Kt(this,_r))Kt(this,nu).set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Kt(this,nu))return!1;this.disableUserSelect(!1);const g=Kt(this,nu);vn(this,nu,null);let et=!1;for(const[{x:ct,y:ut,pageIndex:dt},ft]of g)ft.newX=ct,ft.newY=ut,ft.newPageIndex=dt,et||(et=ct!==ft.savedX||ut!==ft.savedY||dt!==ft.savedPageIndex);if(!et)return!1;const ot=(ct,ut,dt,ft)=>{if(Kt(this,Jr).has(ct.id)){const St=Kt(this,hs).get(ft);St?ct._setParentAndPosition(St,ut,dt):(ct.pageIndex=ft,ct.x=ut,ct.y=dt)}};return this.addCommands({cmd:()=>{for(const[ct,{newX:ut,newY:dt,newPageIndex:ft}]of g)ot(ct,ut,dt,ft)},undo:()=>{for(const[ct,{savedX:ut,savedY:dt,savedPageIndex:ft}]of g)ot(ct,ut,dt,ft)},mustExec:!0}),!0}dragSelectedEditors(g,et){if(Kt(this,nu))for(const ot of Kt(this,nu).keys())ot.drag(g,et)}rebuild(g){if(g.parent===null){const et=this.getLayer(g.pageIndex);et?(et.changeParent(g),et.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}get isEditorHandlingKeyboard(){var g;return((g=this.getActive())==null?void 0:g.shouldGetKeyboardEvents())||Kt(this,_r).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(g){return Kt(this,So)===g}getActive(){return Kt(this,So)}getMode(){return Kt(this,ss)}isEditingMode(){return Kt(this,ss)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(g){if(!g)return null;const et=document.getSelection();for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++)if(!g.contains(et.getRangeAt(kt).commonAncestorContainer))return null;const{x:ot,y:ct,width:ut,height:dt}=g.getBoundingClientRect();let ft;switch(g.getAttribute("data-main-rotation")){case"90":ft=(kt,Tt,Rt,jt)=>({x:(Tt-ct)/dt,y:1-(kt+Rt-ot)/ut,width:jt/dt,height:Rt/ut});break;case"180":ft=(kt,Tt,Rt,jt)=>({x:1-(kt+Rt-ot)/ut,y:1-(Tt+jt-ct)/dt,width:Rt/ut,height:jt/dt});break;case"270":ft=(kt,Tt,Rt,jt)=>({x:1-(Tt+jt-ct)/dt,y:(kt-ot)/ut,width:jt/dt,height:Rt/ut});break;default:ft=(kt,Tt,Rt,jt)=>({x:(kt-ot)/ut,y:(Tt-ct)/dt,width:Rt/ut,height:jt/dt});break}const St=[];for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++){const Rt=et.getRangeAt(kt);if(!Rt.collapsed)for(const{x:jt,y:Ft,width:$t,height:zt}of Rt.getClientRects())$t===0||zt===0||St.push(ft(jt,Ft,$t,zt))}return St.length===0?null:St}addChangedExistingAnnotation({annotationElementId:g,id:et}){(Kt(this,e1)||vn(this,e1,new Map)).set(g,et)}removeChangedExistingAnnotation({annotationElementId:g}){var et;(et=Kt(this,e1))==null||et.delete(g)}renderAnnotationElement(g){var ct;const et=(ct=Kt(this,e1))==null?void 0:ct.get(g.data.id);if(!et)return;const ot=Kt(this,Jo).getRawValue(et);ot&&(Kt(this,ss)===AnnotationEditorType.NONE&&!ot.hasBeenModified||ot.renderAnnotationElement(g))}setMissingCanvas(g,et,ot){var ut;const ct=(ut=Kt(this,zp))==null?void 0:ut.get(g);ct&&(ct.setCanvas(et,ot),Kt(this,zp).delete(g))}addMissingCanvas(g,et){(Kt(this,zp)||vn(this,zp,new Map)).set(g,et)}};Jy=new WeakMap,So=new WeakMap,Qy=new WeakMap,Jr=new WeakMap,hs=new WeakMap,Zy=new WeakMap,Jo=new WeakMap,e1=new WeakMap,Qo=new WeakMap,Vs=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,t1=new WeakMap,jp=new WeakMap,nu=new WeakMap,Zo=new WeakMap,Xm=new WeakMap,Fx=new WeakMap,$x=new WeakMap,n1=new WeakMap,Bx=new WeakMap,ru=new WeakMap,Fp=new WeakMap,r1=new WeakMap,$p=new WeakMap,iu=new WeakMap,Bw=new WeakMap,Bp=new WeakMap,i1=new WeakMap,Vx=new WeakMap,Vp=new WeakMap,Jm=new WeakMap,s1=new WeakMap,zp=new WeakMap,zx=new WeakMap,ss=new WeakMap,_r=new WeakMap,Fu=new WeakMap,Hp=new WeakMap,Up=new WeakMap,Hx=new WeakMap,o1=new WeakMap,Ux=new WeakMap,Gp=new WeakMap,su=new WeakMap,$u=new WeakMap,Gx=new WeakMap,Wx=new WeakMap,na=new WeakMap,a1=new WeakSet,tw=function({anchorNode:g}){return g.nodeType===Node.TEXT_NODE?g.parentElement:g},qx=new WeakSet,VA=function(g){const{currentLayer:et}=this;if(et.hasTextLayer(g))return et;for(const ot of Kt(this,hs).values())if(ot.hasTextLayer(g))return ot;return null},Vw=new WeakSet,XP=function(){const g=document.getSelection();if(!g||g.isCollapsed)return;const ot=_n(this,a1,tw).call(this,g).closest(".textLayer"),ct=this.getSelectionBoxes(ot);ct&&(Kt(this,iu)||vn(this,iu,new FloatingToolbar(this)),Kt(this,iu).show(ot,ct,this.direction==="ltr"))},zw=new WeakSet,JP=function(){var ut,dt,ft;const g=document.getSelection();if(!g||g.isCollapsed){Kt(this,Fu)&&((ut=Kt(this,iu))==null||ut.hide(),vn(this,Fu,null),_n(this,Cs,qs).call(this,{hasSelectedText:!1}));return}const{anchorNode:et}=g;if(et===Kt(this,Fu))return;const ct=_n(this,a1,tw).call(this,g).closest(".textLayer");if(!ct){Kt(this,Fu)&&((dt=Kt(this,iu))==null||dt.hide(),vn(this,Fu,null),_n(this,Cs,qs).call(this,{hasSelectedText:!1}));return}if((ft=Kt(this,iu))==null||ft.hide(),vn(this,Fu,et),_n(this,Cs,qs).call(this,{hasSelectedText:!0}),!(Kt(this,ss)!==AnnotationEditorType.HIGHLIGHT&&Kt(this,ss)!==AnnotationEditorType.NONE)&&(Kt(this,ss)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),vn(this,$p,this.isShiftKeyDown),!this.isShiftKeyDown)){const St=Kt(this,ss)===AnnotationEditorType.HIGHLIGHT?_n(this,qx,VA).call(this,ct):null;if(St==null||St.toggleDrawing(),Kt(this,i1)){const kt=new AbortController,Tt=this.combinedSignal(kt),Rt=jt=>{jt.type==="pointerup"&&jt.button!==0||(kt.abort(),St==null||St.toggleDrawing(!0),jt.type==="pointerup"&&_n(this,Qm,hx).call(this,"main_toolbar"))};window.addEventListener("pointerup",Rt,{signal:Tt}),window.addEventListener("blur",Rt,{signal:Tt})}else St==null||St.toggleDrawing(!0),_n(this,Qm,hx).call(this,"main_toolbar")}},Qm=new WeakSet,hx=function(g=""){Kt(this,ss)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(g):Kt(this,Fx)&&_n(this,Vw,XP).call(this)},Hw=new WeakSet,QP=function(){document.addEventListener("selectionchange",_n(this,zw,JP).bind(this),{signal:this._signal})},Uw=new WeakSet,ZP=function(){if(Kt(this,Fp))return;vn(this,Fp,new AbortController);const g=this.combinedSignal(Kt(this,Fp));window.addEventListener("focus",this.focus.bind(this),{signal:g}),window.addEventListener("blur",this.blur.bind(this),{signal:g})},Gw=new WeakSet,e3=function(){var g;(g=Kt(this,Fp))==null||g.abort(),vn(this,Fp,null)},Kx=new WeakSet,zA=function(){if(Kt(this,Vp))return;vn(this,Vp,new AbortController);const g=this.combinedSignal(Kt(this,Vp));window.addEventListener("keydown",this.keydown.bind(this),{signal:g}),window.addEventListener("keyup",this.keyup.bind(this),{signal:g})},Ww=new WeakSet,t3=function(){var g;(g=Kt(this,Vp))==null||g.abort(),vn(this,Vp,null)},Yx=new WeakSet,HA=function(){if(Kt(this,Dp))return;vn(this,Dp,new AbortController);const g=this.combinedSignal(Kt(this,Dp));document.addEventListener("copy",this.copy.bind(this),{signal:g}),document.addEventListener("cut",this.cut.bind(this),{signal:g}),document.addEventListener("paste",this.paste.bind(this),{signal:g})},Xx=new WeakSet,UA=function(){var g;(g=Kt(this,Dp))==null||g.abort(),vn(this,Dp,null)},qw=new WeakSet,n3=function(){const g=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:g}),document.addEventListener("drop",this.drop.bind(this),{signal:g})},Cs=new WeakSet,qs=function(g){Object.entries(g).some(([ot,ct])=>Kt(this,Ux)[ot]!==ct)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Kt(this,Ux),g)}),Kt(this,ss)===AnnotationEditorType.HIGHLIGHT&&g.hasSelectedEditor===!1&&_n(this,Pl,Ou).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Pl=new WeakSet,Ou=function(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})},Kw=new WeakSet,r3=async function(){if(!Kt(this,Bp)){vn(this,Bp,!0);const g=[];for(const et of Kt(this,hs).values())g.push(et.enable());await Promise.all(g);for(const et of Kt(this,Jr).values())et.enable()}},Yw=new WeakSet,i3=function(){if(this.unselectAll(),Kt(this,Bp)){vn(this,Bp,!1);for(const g of Kt(this,hs).values())g.disable();for(const g of Kt(this,Jr).values())g.disable()}},Jx=new WeakSet,GA=function(g){const et=Kt(this,hs).get(g.pageIndex);et?et.addOrRebuild(g):(this.addEditor(g),this.addToAnnotationStorage(g))},Xw=new WeakSet,s3=function(){let g=null;for(g of Kt(this,_r));return g},Zm=new WeakSet,dx=function(){if(Kt(this,Jr).size===0)return!0;if(Kt(this,Jr).size===1)for(const g of Kt(this,Jr).values())return g.isEmpty();return!1},Qx=new WeakSet,WA=function(g){for(const et of Kt(this,_r))et.unselect();Kt(this,_r).clear();for(const et of g)et.isEmpty()||(Kt(this,_r).add(et),et.select());_n(this,Cs,qs).call(this,{hasSelectedEditor:this.hasSelection})},qn(zy,"TRANSLATE_SMALL",1),qn(zy,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=zy;var ys,ou,Ml,l1,au,wo,c1,lu,ho,Bu,_g,cu,Wp,e0,fx,u1,nw;const Ks=class Ks{constructor(g){yn(this,e0);yn(this,u1);yn(this,ys,null);yn(this,ou,!1);yn(this,Ml,null);yn(this,l1,null);yn(this,au,null);yn(this,wo,null);yn(this,c1,!1);yn(this,lu,null);yn(this,ho,null);yn(this,Bu,null);yn(this,_g,null);yn(this,cu,!1);vn(this,ho,g),vn(this,cu,g._uiManager.useNewAltTextFlow),Kt(Ks,Wp)||vn(Ks,Wp,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(g){Ks._l10n??(Ks._l10n=g)}async render(){const g=vn(this,Ml,document.createElement("button"));g.className="altText",g.tabIndex="0";const et=vn(this,l1,document.createElement("span"));g.append(et),Kt(this,cu)?(g.classList.add("new"),g.setAttribute("data-l10n-id",Kt(Ks,Wp).missing),et.setAttribute("data-l10n-id",Kt(Ks,Wp)["missing-label"])):(g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const ot=Kt(this,ho)._uiManager._signal;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),Kt(this,ho)._uiManager.editAltText(Kt(this,ho)),Kt(this,cu)&&Kt(this,ho)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Kt(this,e0,fx)}})};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(vn(this,c1,!0),ct(ut))},{signal:ot}),await _n(this,u1,nw).call(this),g}finish(){Kt(this,Ml)&&(Kt(this,Ml).focus({focusVisible:Kt(this,c1)}),vn(this,c1,!1))}isEmpty(){return Kt(this,cu)?Kt(this,ys)===null:!Kt(this,ys)&&!Kt(this,ou)}hasData(){return Kt(this,cu)?Kt(this,ys)!==null||!!Kt(this,Bu):this.isEmpty()}get guessedText(){return Kt(this,Bu)}async setGuessedText(g){Kt(this,ys)===null&&(vn(this,Bu,g),vn(this,_g,await Ks._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:g})),_n(this,u1,nw).call(this))}toggleAltTextBadge(g=!1){var et;if(!Kt(this,cu)||Kt(this,ys)){(et=Kt(this,lu))==null||et.remove(),vn(this,lu,null);return}if(!Kt(this,lu)){const ot=vn(this,lu,document.createElement("div"));ot.className="noAltTextBadge",Kt(this,ho).div.append(ot)}Kt(this,lu).classList.toggle("hidden",!g)}serialize(g){let et=Kt(this,ys);return!g&&Kt(this,Bu)===et&&(et=Kt(this,_g)),{altText:et,decorative:Kt(this,ou),guessedText:Kt(this,Bu),textWithDisclaimer:Kt(this,_g)}}get data(){return{altText:Kt(this,ys),decorative:Kt(this,ou)}}set data({altText:g,decorative:et,guessedText:ot,textWithDisclaimer:ct,cancel:ut=!1}){ot&&(vn(this,Bu,ot),vn(this,_g,ct)),!(Kt(this,ys)===g&&Kt(this,ou)===et)&&(ut||(vn(this,ys,g),vn(this,ou,et)),_n(this,u1,nw).call(this))}toggle(g=!1){Kt(this,Ml)&&(!g&&Kt(this,wo)&&(clearTimeout(Kt(this,wo)),vn(this,wo,null)),Kt(this,Ml).disabled=!g)}shown(){Kt(this,ho)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Kt(this,e0,fx)}})}destroy(){var g,et;(g=Kt(this,Ml))==null||g.remove(),vn(this,Ml,null),vn(this,l1,null),vn(this,au,null),(et=Kt(this,lu))==null||et.remove(),vn(this,lu,null)}};ys=new WeakMap,ou=new WeakMap,Ml=new WeakMap,l1=new WeakMap,au=new WeakMap,wo=new WeakMap,c1=new WeakMap,lu=new WeakMap,ho=new WeakMap,Bu=new WeakMap,_g=new WeakMap,cu=new WeakMap,Wp=new WeakMap,e0=new WeakSet,fx=function(){return Kt(this,ys)&&"added"||Kt(this,ys)===null&&this.guessedText&&"review"||"missing"},u1=new WeakSet,nw=async function(){var ct,ut,dt;const g=Kt(this,Ml);if(!g)return;if(Kt(this,cu)){if(g.classList.toggle("done",!!Kt(this,ys)),g.setAttribute("data-l10n-id",Kt(Ks,Wp)[Kt(this,e0,fx)]),(ct=Kt(this,l1))==null||ct.setAttribute("data-l10n-id",Kt(Ks,Wp)[`${Kt(this,e0,fx)}-label`]),!Kt(this,ys)){(ut=Kt(this,au))==null||ut.remove();return}}else{if(!Kt(this,ys)&&!Kt(this,ou)){g.classList.remove("done"),(dt=Kt(this,au))==null||dt.remove();return}g.classList.add("done"),g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let et=Kt(this,au);if(!et){vn(this,au,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip"),et.id=`alt-text-tooltip-${Kt(this,ho).id}`;const ft=100,St=Kt(this,ho)._uiManager._signal;St.addEventListener("abort",()=>{clearTimeout(Kt(this,wo)),vn(this,wo,null)},{once:!0}),g.addEventListener("mouseenter",()=>{vn(this,wo,setTimeout(()=>{vn(this,wo,null),Kt(this,au).classList.add("show"),Kt(this,ho)._reportTelemetry({action:"alt_text_tooltip"})},ft))},{signal:St}),g.addEventListener("mouseleave",()=>{var kt;Kt(this,wo)&&(clearTimeout(Kt(this,wo)),vn(this,wo,null)),(kt=Kt(this,au))==null||kt.classList.remove("show")},{signal:St})}Kt(this,ou)?et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(et.removeAttribute("data-l10n-id"),et.textContent=Kt(this,ys)),et.parentNode||g.append(et);const ot=Kt(this,ho).getElementForAltText();ot==null||ot.setAttribute("aria-describedby",et.id)},yn(Ks,Wp,null),qn(Ks,"_l10n",null);let AltText=Ks;var Rs,ga,t0,$r,Zx,n0,Ol,r0,i0,s0,eE,qA;class Comment{constructor(g){yn(this,eE);yn(this,Rs,null);yn(this,ga,null);yn(this,t0,!1);yn(this,$r,null);yn(this,Zx,null);yn(this,n0,null);yn(this,Ol,null);yn(this,r0,null);yn(this,i0,!1);yn(this,s0,null);vn(this,$r,g)}renderForToolbar(){const g=vn(this,ga,document.createElement("button"));return g.className="comment",_n(this,eE,qA).call(this,g,!1)}renderForStandalone(){const g=vn(this,Rs,document.createElement("button"));g.className="annotationCommentButton";const et=Kt(this,$r).commentButtonPosition;if(et){const{style:ot}=g;ot.insetInlineEnd=`calc(${100*(Kt(this,$r)._uiManager.direction==="ltr"?1-et[0]:et[0])}% - var(--comment-button-dim))`,ot.top=`calc(${100*et[1]}% - var(--comment-button-dim))`;const ct=Kt(this,$r).commentButtonColor;ct&&(ot.backgroundColor=ct)}return _n(this,eE,qA).call(this,g,!0)}focusButton(){setTimeout(()=>{var g;(g=Kt(this,Rs)??Kt(this,ga))==null||g.focus()},0)}onUpdatedColor(){if(!Kt(this,Rs))return;const g=Kt(this,$r).commentButtonColor;g&&(Kt(this,Rs).style.backgroundColor=g),Kt(this,$r)._uiManager.updatePopupColor(Kt(this,$r))}get commentButtonWidth(){var g;return(((g=Kt(this,Rs))==null?void 0:g.getBoundingClientRect().width)??0)/Kt(this,$r).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Kt(this,s0))return Kt(this,s0);if(!Kt(this,Rs))return null;const{x:g,y:et,height:ot}=Kt(this,Rs).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=Kt(this,$r).parent.boundingClientRect;return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPositionInLayer(g){vn(this,s0,g)}hasDefaultPopupPosition(){return Kt(this,s0)===null}removeStandaloneCommentButton(){var g;(g=Kt(this,Rs))==null||g.remove(),vn(this,Rs,null)}removeToolbarCommentButton(){var g;(g=Kt(this,ga))==null||g.remove(),vn(this,ga,null)}setCommentButtonStates({selected:g,hasPopup:et}){Kt(this,Rs)&&(Kt(this,Rs).classList.toggle("selected",g),Kt(this,Rs).ariaExpanded=et)}edit(g){const et=this.commentPopupPositionInLayer;let ot,ct;if(et)[ot,ct]=et;else{[ot,ct]=Kt(this,$r).commentButtonPosition;const{width:Tt,height:Rt,x:jt,y:Ft}=Kt(this,$r);ot=jt+ot*Tt,ct=Ft+ct*Rt}const ut=Kt(this,$r).parent.boundingClientRect,{x:dt,y:ft,width:St,height:kt}=ut;Kt(this,$r)._uiManager.editComment(Kt(this,$r),dt+ot*St,ft+ct*kt,{...g,parentDimensions:ut})}finish(){Kt(this,ga)&&(Kt(this,ga).focus({focusVisible:Kt(this,t0)}),vn(this,t0,!1))}isDeleted(){return Kt(this,i0)||Kt(this,Ol)===""}isEmpty(){return Kt(this,Ol)===null}hasBeenEdited(){return this.isDeleted()||Kt(this,Ol)!==Kt(this,Zx)}serialize(){return this.data}get data(){return{text:Kt(this,Ol),richText:Kt(this,n0),date:Kt(this,r0),deleted:this.isDeleted()}}set data(g){if(g!==Kt(this,Ol)&&vn(this,n0,null),g===null){vn(this,Ol,""),vn(this,i0,!0);return}vn(this,Ol,g),vn(this,r0,new Date),vn(this,i0,!1)}setInitialText(g,et=null){vn(this,Zx,g),this.data=g,vn(this,r0,null),vn(this,n0,et)}shown(){}destroy(){var g,et;(g=Kt(this,ga))==null||g.remove(),vn(this,ga,null),(et=Kt(this,Rs))==null||et.remove(),vn(this,Rs,null),vn(this,Ol,""),vn(this,n0,null),vn(this,r0,null),vn(this,$r,null),vn(this,t0,!1),vn(this,i0,!1)}}Rs=new WeakMap,ga=new WeakMap,t0=new WeakMap,$r=new WeakMap,Zx=new WeakMap,n0=new WeakMap,Ol=new WeakMap,r0=new WeakMap,i0=new WeakMap,s0=new WeakMap,eE=new WeakSet,qA=function(g,et){if(!Kt(this,$r)._uiManager.hasCommentManager())return null;g.tabIndex="0",g.ariaHasPopup="dialog",et?(g.ariaControls="commentPopup",g.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(g.ariaControlsElements=[Kt(this,$r)._uiManager.getCommentDialogElement()],g.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const ot=Kt(this,$r)._uiManager._signal;if(!(ot instanceof AbortSignal)||ot.aborted)return g;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),et&&(g.addEventListener("focusin",ut=>{Kt(this,$r)._focusEventsAllowed=!1,stopEvent(ut)},{capture:!0,signal:ot}),g.addEventListener("focusout",ut=>{Kt(this,$r)._focusEventsAllowed=!0,stopEvent(ut)},{capture:!0,signal:ot})),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),g===Kt(this,ga)?this.edit():Kt(this,$r).toggleComment(!0)};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(vn(this,t0,!0),ct(ut))},{signal:ot}),g.addEventListener("pointerenter",()=>{Kt(this,$r).toggleComment(!1,!0)},{signal:ot}),g.addEventListener("pointerleave",()=>{Kt(this,$r).toggleComment(!1,!1)},{signal:ot}),g};var h1,o0,tE,nE,rE,iE,sE,Vu,a0,zu,l0,Hu,Jw,o3,Qw,a3,Zw,l3;const UC=class UC{constructor({container:g,isPinchingDisabled:et=null,isPinchingStopped:ot=null,onPinchStart:ct=null,onPinching:ut=null,onPinchEnd:dt=null,signal:ft}){yn(this,Jw);yn(this,Qw);yn(this,Zw);yn(this,h1,void 0);yn(this,o0,!1);yn(this,tE,null);yn(this,nE,void 0);yn(this,rE,void 0);yn(this,iE,void 0);yn(this,sE,void 0);yn(this,Vu,null);yn(this,a0,void 0);yn(this,zu,null);yn(this,l0,void 0);yn(this,Hu,null);vn(this,h1,g),vn(this,tE,ot),vn(this,nE,et),vn(this,rE,ct),vn(this,iE,ut),vn(this,sE,dt),vn(this,l0,new AbortController),vn(this,a0,AbortSignal.any([ft,Kt(this,l0).signal])),g.addEventListener("touchstart",_n(this,Jw,o3).bind(this),{passive:!1,signal:Kt(this,a0)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var g,et;(g=Kt(this,l0))==null||g.abort(),vn(this,l0,null),(et=Kt(this,Vu))==null||et.abort(),vn(this,Vu,null)}};h1=new WeakMap,o0=new WeakMap,tE=new WeakMap,nE=new WeakMap,rE=new WeakMap,iE=new WeakMap,sE=new WeakMap,Vu=new WeakMap,a0=new WeakMap,zu=new WeakMap,l0=new WeakMap,Hu=new WeakMap,Jw=new WeakSet,o3=function(g){var ct,ut,dt;if((ct=Kt(this,nE))!=null&&ct.call(this))return;if(g.touches.length===1){if(Kt(this,Vu))return;const ft=vn(this,Vu,new AbortController),St=AbortSignal.any([Kt(this,a0),ft.signal]),kt=Kt(this,h1),Tt={capture:!0,signal:St,passive:!1},Rt=jt=>{var Ft;jt.pointerType==="touch"&&((Ft=Kt(this,Vu))==null||Ft.abort(),vn(this,Vu,null))};kt.addEventListener("pointerdown",jt=>{jt.pointerType==="touch"&&(stopEvent(jt),Rt(jt))},Tt),kt.addEventListener("pointerup",Rt,Tt),kt.addEventListener("pointercancel",Rt,Tt);return}if(!Kt(this,Hu)){vn(this,Hu,new AbortController);const ft=AbortSignal.any([Kt(this,a0),Kt(this,Hu).signal]),St=Kt(this,h1),kt={signal:ft,capture:!1,passive:!1};St.addEventListener("touchmove",_n(this,Qw,a3).bind(this),kt);const Tt=_n(this,Zw,l3).bind(this);St.addEventListener("touchend",Tt,kt),St.addEventListener("touchcancel",Tt,kt),kt.capture=!0,St.addEventListener("pointerdown",stopEvent,kt),St.addEventListener("pointermove",stopEvent,kt),St.addEventListener("pointercancel",stopEvent,kt),St.addEventListener("pointerup",stopEvent,kt),(ut=Kt(this,rE))==null||ut.call(this)}if(stopEvent(g),g.touches.length!==2||(dt=Kt(this,tE))!=null&&dt.call(this)){vn(this,zu,null);return}let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]),vn(this,zu,{touch0X:et.screenX,touch0Y:et.screenY,touch1X:ot.screenX,touch1Y:ot.screenY})},Qw=new WeakSet,a3=function(g){var Zt;if(!Kt(this,zu)||g.touches.length!==2)return;stopEvent(g);let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]);const{screenX:ct,screenY:ut}=et,{screenX:dt,screenY:ft}=ot,St=Kt(this,zu),{touch0X:kt,touch0Y:Tt,touch1X:Rt,touch1Y:jt}=St,Ft=Rt-kt,$t=jt-Tt,zt=dt-ct,Ut=ft-ut,Bt=Math.hypot(zt,Ut)||1,Ht=Math.hypot(Ft,$t)||1;if(!Kt(this,o0)&&Math.abs(Ht-Bt)<=UC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(St.touch0X=ct,St.touch0Y=ut,St.touch1X=dt,St.touch1Y=ft,!Kt(this,o0)){vn(this,o0,!0);return}const Jt=[(ct+dt)/2,(ut+ft)/2];(Zt=Kt(this,iE))==null||Zt.call(this,Jt,Ht,Bt)},Zw=new WeakSet,l3=function(g){var et;g.touches.length>=2||(Kt(this,Hu)&&(Kt(this,Hu).abort(),vn(this,Hu,null),(et=Kt(this,sE))==null||et.call(this)),Kt(this,zu)&&(stopEvent(g),vn(this,zu,null),vn(this,o0,!1)))};let TouchManager=UC;var c0,Il,Gr,Dr,Uu,d1,qp,oE,Ps,u0,Gu,uu,Kp,aE,h0,ko,lE,d0,Wu,hu,f1,p1,xa,f0,cE,_k,uE,KA,hE,YA,m1,rw,eT,c3,tT,u3,dE,XA,g1,iw,fE,JA,nT,h3,rT,d3,iT,f3,pE,QA,sT,p3,mE,ZA,oT,m3,aT,g3,lT,y3,gE,eC,p0,mx;const mr=class mr{constructor(g){yn(this,uE);yn(this,m1);yn(this,eT);yn(this,tT);yn(this,dE);yn(this,g1);yn(this,fE);yn(this,nT);yn(this,rT);yn(this,iT);yn(this,pE);yn(this,sT);yn(this,mE);yn(this,oT);yn(this,aT);yn(this,lT);yn(this,gE);yn(this,p0);yn(this,c0,null);yn(this,Il,null);yn(this,Gr,null);yn(this,Dr,null);yn(this,Uu,null);yn(this,d1,!1);yn(this,qp,null);yn(this,oE,"");yn(this,Ps,null);yn(this,u0,null);yn(this,Gu,null);yn(this,uu,null);yn(this,Kp,null);yn(this,aE,"");yn(this,h0,!1);yn(this,ko,null);yn(this,lE,!1);yn(this,d0,!1);yn(this,Wu,!1);yn(this,hu,null);yn(this,f1,0);yn(this,p1,0);yn(this,xa,null);yn(this,f0,null);qn(this,"isSelected",!1);qn(this,"_isCopy",!1);qn(this,"_editToolbar",null);qn(this,"_initialOptions",Object.create(null));qn(this,"_initialData",null);qn(this,"_isVisible",!0);qn(this,"_uiManager",null);qn(this,"_focusEventsAllowed",!0);yn(this,cE,!1);yn(this,_k,mr._zIndex++);this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null,this.annotationElementId=g.annotationElementId||null,this.creationDate=g.creationDate||new Date,this.modificationDate=g.modificationDate||null;const{rotation:et,rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,ct],this.pageTranslation=[ut,dt];const[ft,St]=this.parentDimensions;this.x=g.x/ft,this.y=g.y/St,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=mr.prototype._resizeWithKeyboard,et=AnnotationEditorUIManager.TRANSLATE_SMALL,ot=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-ot,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[ot,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-ot]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,ot]}],[["Escape","mac+Escape"],mr.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const et=new FakeEditor({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});et.annotationElementId=g.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(g,et){if(mr._l10n??(mr._l10n=g),mr._l10nResizer||(mr._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),mr._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);mr._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,et){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Kt(this,cE)}set _isDraggable(g){var et;vn(this,cE,g),(et=this.div)==null||et.classList.toggle("draggable",g)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[g,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(g*2),this.y+=this.width*g/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(g*2),this.y-=this.width*g/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Kt(this,_k)}setParent(g){var et;g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):(_n(this,p0,mx).call(this),(et=Kt(this,uu))==null||et.remove(),vn(this,uu,null)),this.parent=g}focusin(g){this._focusEventsAllowed&&(Kt(this,h0)?vn(this,h0,!1):this.parent.setSelected(this))}focusout(g){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const et=g.relatedTarget;et!=null&&et.closest(`#${this.id}`)||(g.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,et,ot,ct){const[ut,dt]=this.parentDimensions;[ot,ct]=this.screenToPageTranslation(ot,ct),this.x=(g+ot)/ut,this.y=(et+ct)/dt,this.fixAndSetPosition()}_moveAfterPaste(g,et){const[ot,ct]=this.parentDimensions;this.setAt(g*ot,et*ct,this.width*ot,this.height*ct),this._onTranslated()}translate(g,et){_n(this,uE,KA).call(this,this.parentDimensions,g,et)}translateInPage(g,et){Kt(this,ko)||vn(this,ko,[this.x,this.y,this.width,this.height]),_n(this,uE,KA).call(this,this.pageDimensions,g,et),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(g,et){Kt(this,ko)||vn(this,ko,[this.x,this.y,this.width,this.height]);const{div:ot,parentDimensions:[ct,ut]}=this;if(this.x+=g/ct,this.y+=et/ut,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Rt,y:jt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Rt,jt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:dt,y:ft}=this;const[St,kt]=this.getBaseTranslation();dt+=St,ft+=kt;const{style:Tt}=ot;Tt.left=`${(100*dt).toFixed(2)}%`,Tt.top=`${(100*ft).toFixed(2)}%`,this._onTranslating(dt,ft),ot.scrollIntoView({block:"nearest"})}_onTranslating(g,et){}_onTranslated(g,et){}get _hasBeenMoved(){return!!Kt(this,ko)&&(Kt(this,ko)[0]!==this.x||Kt(this,ko)[1]!==this.y)}get _hasBeenResized(){return!!Kt(this,ko)&&(Kt(this,ko)[2]!==this.width||Kt(this,ko)[3]!==this.height)}getBaseTranslation(){const[g,et]=this.parentDimensions,{_borderLineWidth:ot}=mr,ct=ot/g,ut=ot/et;switch(this.rotation){case 90:return[-ct,ut];case 180:return[ct,ut];case 270:return[ct,-ut];default:return[-ct,-ut]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const{div:{style:et},pageDimensions:[ot,ct]}=this;let{x:ut,y:dt,width:ft,height:St}=this;if(ft*=ot,St*=ct,ut*=ot,dt*=ct,this._mustFixPosition)switch(g){case 0:ut=MathClamp(ut,0,ot-ft),dt=MathClamp(dt,0,ct-St);break;case 90:ut=MathClamp(ut,0,ot-St),dt=MathClamp(dt,ft,ct);break;case 180:ut=MathClamp(ut,ft,ot),dt=MathClamp(dt,St,ct);break;case 270:ut=MathClamp(ut,St,ot),dt=MathClamp(dt,0,ct-ft);break}this.x=ut/=ot,this.y=dt/=ct;const[kt,Tt]=this.getBaseTranslation();ut+=kt,dt+=Tt,et.left=`${(100*ut).toFixed(2)}%`,et.top=`${(100*dt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,et){var ot;return _n(ot=mr,hE,YA).call(ot,g,et,this.parentRotation)}pageTranslationToScreen(g,et){var ot;return _n(ot=mr,hE,YA).call(ot,g,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[et,ot]}=this;return[et*g,ot*g]}setDims(){const{div:{style:g},width:et,height:ot}=this;g.width=`${(100*et).toFixed(2)}%`,g.height=`${(100*ot).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(g){return Math.round(g*1e4)/1e4}_onResizing(){}altTextFinish(){var g;(g=Kt(this,Gr))==null||g.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Kt(this,d0))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:g}=this;if(g)for(const[et,ot]of g)await this._editToolbar.addButton(et,ot);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var g;(g=this._editToolbar)==null||g.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var g;(g=this._editToolbar)==null||g.removeButton("comment")}removeEditToolbar(){var g,et;(g=this._editToolbar)==null||g.remove(),this._editToolbar=null,(et=Kt(this,Gr))==null||et.destroy()}addContainer(g){var ot;const et=(ot=this._editToolbar)==null?void 0:ot.div;et?et.before(g):this.div.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Kt(this,Gr)||(AltText.initialize(mr._l10n),vn(this,Gr,new AltText(this)),Kt(this,c0)&&(Kt(this,Gr).data=Kt(this,c0),vn(this,c0,null))),Kt(this,Gr)}get altTextData(){var g;return(g=Kt(this,Gr))==null?void 0:g.data}set altTextData(g){Kt(this,Gr)&&(Kt(this,Gr).data=g)}get guessedAltText(){var g;return(g=Kt(this,Gr))==null?void 0:g.guessedText}async setGuessedAltText(g){var et;await((et=Kt(this,Gr))==null?void 0:et.setGuessedText(g))}serializeAltText(g){var et;return(et=Kt(this,Gr))==null?void 0:et.serialize(g)}hasAltText(){return!!Kt(this,Gr)&&!Kt(this,Gr).isEmpty()}hasAltTextData(){var g;return((g=Kt(this,Gr))==null?void 0:g.hasData())??!1}focusCommentButton(){var g;(g=Kt(this,Dr))==null||g.focusButton()}addCommentButton(){return Kt(this,Dr)||vn(this,Dr,new Comment(this))}addStandaloneCommentButton(){if(Kt(this,Uu)){this._uiManager.isEditingMode()&&Kt(this,Uu).classList.remove("hidden");return}this.hasComment&&(vn(this,Uu,Kt(this,Dr).renderForStandalone()),this.div.append(Kt(this,Uu)))}removeStandaloneCommentButton(){Kt(this,Dr).removeStandaloneCommentButton(),vn(this,Uu,null)}hideStandaloneCommentButton(){var g;(g=Kt(this,Uu))==null||g.classList.add("hidden")}get comment(){const{data:{richText:g,text:et,date:ot,deleted:ct}}=Kt(this,Dr);return{text:et,richText:g,date:ot,deleted:ct,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(g){Kt(this,Dr)||vn(this,Dr,new Comment(this)),Kt(this,Dr).data=g,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:g,popupRef:et,richText:ot}){if(!et||(Kt(this,Dr)||vn(this,Dr,new Comment(this)),Kt(this,Dr).setInitialText(g,ot),!this.annotationElementId))return;const ct=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ct&&this.updateFromAnnotationLayer(ct)}get hasEditedComment(){var g;return(g=Kt(this,Dr))==null?void 0:g.hasBeenEdited()}get hasDeletedComment(){var g;return(g=Kt(this,Dr))==null?void 0:g.isDeleted()}get hasComment(){return!!Kt(this,Dr)&&!Kt(this,Dr).isEmpty()&&!Kt(this,Dr).isDeleted()}async editComment(g){Kt(this,Dr)||vn(this,Dr,new Comment(this)),Kt(this,Dr).edit(g)}toggleComment(g,et=void 0){this.hasComment&&this._uiManager.toggleComment(this,g,et)}setSelectedCommentButton(g){Kt(this,Dr).setSelectedButton(g)}addComment(g){if(this.hasEditedComment){const[,,,ct]=g.rect,[ut]=this.pageDimensions,[dt]=this.pageTranslation,ft=dt+ut+1,St=ct-100,kt=ft+180;g.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[ft,St,kt,ct]}}}updateFromAnnotationLayer({popup:{contents:g,deleted:et}}){Kt(this,Dr).data=et?null:g}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var dt;const g=this.div=document.createElement("div");g.setAttribute("data-editor-rotation",(360-this.rotation)%360),g.className=this.name,g.setAttribute("id",this.id),g.tabIndex=Kt(this,d1)?-1:0,g.setAttribute("role","application"),this.defaultL10nId&&g.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||g.classList.add("hidden"),this.setInForeground(),_n(this,mE,ZA).call(this);const[et,ot]=this.parentDimensions;this.parentRotation%180!==0&&(g.style.maxWidth=`${(100*ot/et).toFixed(2)}%`,g.style.maxHeight=`${(100*et/ot).toFixed(2)}%`);const[ct,ut]=this.getInitialTranslation();return this.translate(ct,ut),bindEvents(this,g,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Kt(this,f0)||vn(this,f0,new TouchManager({container:g,isPinchingDisabled:()=>!this.isSelected,onPinchStart:_n(this,nT,h3).bind(this),onPinching:_n(this,rT,d3).bind(this),onPinchEnd:_n(this,iT,f3).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(dt=this._uiManager._editorUndoBar)==null||dt.hide(),g}pointerdown(g){const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et){g.preventDefault();return}if(vn(this,h0,!0),this._isDraggable){_n(this,sT,p3).call(this,g);return}_n(this,pE,QA).call(this,g)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Kt(this,hu)&&clearTimeout(Kt(this,hu)),vn(this,hu,setTimeout(()=>{var g;vn(this,hu,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,et,ot){g.changeParent(this),this.x=et,this.y=ot,this.fixAndSetPosition(),this._onTranslated()}getRect(g,et,ot=this.rotation){const ct=this.parentScale,[ut,dt]=this.pageDimensions,[ft,St]=this.pageTranslation,kt=g/ct,Tt=et/ct,Rt=this.x*ut,jt=this.y*dt,Ft=this.width*ut,$t=this.height*dt;switch(ot){case 0:return[Rt+kt+ft,dt-jt-Tt-$t+St,Rt+kt+Ft+ft,dt-jt-Tt+St];case 90:return[Rt+Tt+ft,dt-jt+kt+St,Rt+Tt+$t+ft,dt-jt+kt+Ft+St];case 180:return[Rt-kt-Ft+ft,dt-jt+Tt+St,Rt-kt+ft,dt-jt+Tt+$t+St];case 270:return[Rt-Tt-$t+ft,dt-jt-kt-Ft+St,Rt-Tt+ft,dt-jt-kt+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,et){const[ot,ct,ut,dt]=g,ft=ut-ot,St=dt-ct;switch(this.rotation){case 0:return[ot,et-dt,ft,St];case 90:return[ot,et-ct,St,ft];case 180:return[ut,et-ct,ft,St];case 270:return[ut,et-dt,St,ft];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&mr._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var g;(g=Kt(this,Dr))==null||g.onUpdatedColor()}getData(){const{comment:{text:g,color:et,date:ot,opacity:ct,deleted:ut,richText:dt},uid:ft,pageIndex:St,creationDate:kt,modificationDate:Tt}=this;return{id:ft,pageIndex:St,rect:this.getPDFRect(),richText:dt,contentsObj:{str:g},creationDate:kt,modificationDate:ot||Tt,popupRef:!ut,color:et,opacity:ct}}onceAdded(g){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),vn(this,d0,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),vn(this,d0,!1),!0):!1}isInEditMode(){return Kt(this,d0)}shouldGetKeyboardEvents(){return Kt(this,Wu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:g,left:et,bottom:ot,right:ct}=this.getClientDimensions(),{innerHeight:ut,innerWidth:dt}=window;return et<dt&&ct>0&&g<ut&&ot>0}rebuild(){_n(this,mE,ZA).call(this)}rotate(g){}resize(){}serializeDeleted(){var g;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((g=this._initialData)==null?void 0:g.popupRef)||""}}serialize(g=!1,et=null){var ot;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((ot=this._initialData)==null?void 0:ot.popupRef)||""}}static async deserialize(g,et,ot){const ct=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ot,annotationElementId:g.annotationElementId,creationDate:g.creationDate,modificationDate:g.modificationDate});ct.rotation=g.rotation,vn(ct,c0,g.accessibilityData),ct._isCopy=g.isCopy||!1;const[ut,dt]=ct.pageDimensions,[ft,St,kt,Tt]=ct.getRectInCurrentCoords(g.rect,dt);return ct.x=ft/ut,ct.y=St/dt,ct.width=kt/ut,ct.height=Tt/dt,ct}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var g,et;if((g=Kt(this,Kp))==null||g.abort(),vn(this,Kp,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Kt(this,hu)&&(clearTimeout(Kt(this,hu)),vn(this,hu,null)),_n(this,p0,mx).call(this),this.removeEditToolbar(),Kt(this,xa)){for(const ot of Kt(this,xa).values())clearTimeout(ot);vn(this,xa,null)}this.parent=null,(et=Kt(this,f0))==null||et.destroy(),vn(this,f0,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_n(this,eT,c3).call(this),Kt(this,Ps).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[g,et]}=this,[ot,ct,ut,dt]=this.getPDFRect();return[mr._round(ot+(ut-ot)*g),mr._round(ct+(dt-ct)*(1-et))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Kt(this,Dr).commentPopupPositionInLayer}set commentPopupPosition(g){Kt(this,Dr).commentPopupPositionInLayer=g}hasDefaultPopupPosition(){return Kt(this,Dr).hasDefaultPopupPosition()}get commentButtonWidth(){return Kt(this,Dr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(g){Kt(this,Dr).setCommentButtonStates(g)}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),vn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=Kt(this,Ps).children;if(!Kt(this,Il)){vn(this,Il,Array.from(et));const dt=_n(this,oT,m3).bind(this),ft=_n(this,aT,g3).bind(this),St=this._uiManager._signal;for(const kt of Kt(this,Il)){const Tt=kt.getAttribute("data-resizer-name");kt.setAttribute("role","spinbutton"),kt.addEventListener("keydown",dt,{signal:St}),kt.addEventListener("blur",ft,{signal:St}),kt.addEventListener("focus",_n(this,lT,y3).bind(this,Tt),{signal:St}),kt.setAttribute("data-l10n-id",mr._l10nResizer[Tt])}}const ot=Kt(this,Il)[0];let ct=0;for(const dt of et){if(dt===ot)break;ct++}const ut=(360-this.rotation+this.parentRotation)%360/90*(Kt(this,Il).length/4);if(ut!==ct){if(ut<ct)for(let ft=0;ft<ct-ut;ft++)Kt(this,Ps).append(Kt(this,Ps).firstChild);else if(ut>ct)for(let ft=0;ft<ut-ct;ft++)Kt(this,Ps).firstChild.before(Kt(this,Ps).lastChild);let dt=0;for(const ft of et){const kt=Kt(this,Il)[dt++].getAttribute("data-resizer-name");ft.setAttribute("data-l10n-id",mr._l10nResizer[kt])}}_n(this,gE,eC).call(this,0),vn(this,Wu,!0),Kt(this,Ps).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,et){Kt(this,Wu)&&_n(this,fE,JA).call(this,Kt(this,aE),{deltaX:g,deltaY:et,fromKeyboard:!0})}_stopResizingWithKeyboard(){_n(this,p0,mx).call(this),this.div.focus()}select(){var g,et,ot;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ct,ut;(ct=this.div)!=null&&ct.classList.contains("selectedEditor")&&((ut=this._editToolbar)==null||ut.show())});return}(et=this._editToolbar)==null||et.show(),(ot=Kt(this,Gr))==null||ot.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var g;return(g=this.div)==null?void 0:g.focus({preventScroll:!0})},0)}unselect(){var g,et,ot,ct,ut;this.isSelected&&(this.isSelected=!1,(g=Kt(this,Ps))==null||g.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ct=this._editToolbar)==null||ct.hide(),(ut=Kt(this,Gr))==null||ut.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(g,et){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(g){g.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Kt(this,lE)}set isEditing(g){vn(this,lE,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,et=!1){if(et){Kt(this,xa)||vn(this,xa,new Map);const{action:ot}=g;let ct=Kt(this,xa).get(ot);ct&&clearTimeout(ct),ct=setTimeout(()=>{this._reportTelemetry(g),Kt(this,xa).delete(ot),Kt(this,xa).size===0&&vn(this,xa,null)},mr._telemetryTimeout),Kt(this,xa).set(ot,ct);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),vn(this,d1,!1)}disable(){this.div&&(this.div.tabIndex=-1),vn(this,d1,!0)}updateFakeAnnotationElement(g){if(!Kt(this,uu)&&!this.deleted){vn(this,uu,g.addFakeAnnotation(this));return}if(this.deleted){Kt(this,uu).remove(),vn(this,uu,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Kt(this,uu).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(g){if(this.deleted)return g.hide(),null;let et=g.container.querySelector(".annotationContent");if(!et)et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),g.container.prepend(et);else if(et.nodeName==="CANVAS"){const ot=et;et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),ot.before(et)}return et}resetAnnotationElement(g){const{firstChild:et}=g.container;(et==null?void 0:et.nodeName)==="DIV"&&et.classList.contains("annotationContent")&&et.remove()}};c0=new WeakMap,Il=new WeakMap,Gr=new WeakMap,Dr=new WeakMap,Uu=new WeakMap,d1=new WeakMap,qp=new WeakMap,oE=new WeakMap,Ps=new WeakMap,u0=new WeakMap,Gu=new WeakMap,uu=new WeakMap,Kp=new WeakMap,aE=new WeakMap,h0=new WeakMap,ko=new WeakMap,lE=new WeakMap,d0=new WeakMap,Wu=new WeakMap,hu=new WeakMap,f1=new WeakMap,p1=new WeakMap,xa=new WeakMap,f0=new WeakMap,cE=new WeakMap,_k=new WeakMap,uE=new WeakSet,KA=function([g,et],ot,ct){[ot,ct]=this.screenToPageTranslation(ot,ct),this.x+=ot/g,this.y+=ct/et,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},hE=new WeakSet,YA=function(g,et,ot){switch(ot){case 90:return[et,-g];case 180:return[-g,-et];case 270:return[-et,g];default:return[g,et]}},m1=new WeakSet,rw=function(g){switch(g){case 90:{const[et,ot]=this.pageDimensions;return[0,-et/ot,ot/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ot]=this.pageDimensions;return[0,et/ot,-ot/et,0]}default:return[1,0,0,1]}},eT=new WeakSet,c3=function(){if(Kt(this,Ps))return;vn(this,Ps,document.createElement("div")),Kt(this,Ps).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],et=this._uiManager._signal;for(const ot of g){const ct=document.createElement("div");Kt(this,Ps).append(ct),ct.classList.add("resizer",ot),ct.setAttribute("data-resizer-name",ot),ct.addEventListener("pointerdown",_n(this,tT,u3).bind(this,ot),{signal:et}),ct.addEventListener("contextmenu",noContextMenu,{signal:et}),ct.tabIndex=-1}this.div.prepend(Kt(this,Ps))},tT=new WeakSet,u3=function(g,et){var Tt;et.preventDefault();const{isMac:ot}=util_FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ot)return;(Tt=Kt(this,Gr))==null||Tt.toggle(!1);const ct=this._isDraggable;this._isDraggable=!1,vn(this,u0,[et.screenX,et.screenY]);const ut=new AbortController,dt=this._uiManager.combinedSignal(ut);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_n(this,fE,JA).bind(this,g),{passive:!0,capture:!0,signal:dt}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:dt}),window.addEventListener("contextmenu",noContextMenu,{signal:dt}),vn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ft=this.parent.div.style.cursor,St=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const kt=()=>{var Rt;ut.abort(),this.parent.togglePointerEvents(!0),(Rt=Kt(this,Gr))==null||Rt.toggle(!0),this._isDraggable=ct,this.parent.div.style.cursor=ft,this.div.style.cursor=St,_n(this,g1,iw).call(this)};window.addEventListener("pointerup",kt,{signal:dt}),window.addEventListener("blur",kt,{signal:dt})},dE=new WeakSet,XA=function(g,et,ot,ct){this.width=ot,this.height=ct,this.x=g,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResized()},g1=new WeakSet,iw=function(){if(!Kt(this,Gu))return;const{savedX:g,savedY:et,savedWidth:ot,savedHeight:ct}=Kt(this,Gu);vn(this,Gu,null);const ut=this.x,dt=this.y,ft=this.width,St=this.height;ut===g&&dt===et&&ft===ot&&St===ct||this.addCommands({cmd:_n(this,dE,XA).bind(this,ut,dt,ft,St),undo:_n(this,dE,XA).bind(this,g,et,ot,ct),mustExec:!0})},fE=new WeakSet,JA=function(g,et){const[ot,ct]=this.parentDimensions,ut=this.x,dt=this.y,ft=this.width,St=this.height,kt=mr.MIN_SIZE/ot,Tt=mr.MIN_SIZE/ct,Rt=_n(this,m1,rw).call(this,this.rotation),jt=(fn,xn)=>[Rt[0]*fn+Rt[2]*xn,Rt[1]*fn+Rt[3]*xn],Ft=_n(this,m1,rw).call(this,360-this.rotation),$t=(fn,xn)=>[Ft[0]*fn+Ft[2]*xn,Ft[1]*fn+Ft[3]*xn];let zt,Ut,Bt=!1,Ht=!1;switch(g){case"topLeft":Bt=!0,zt=(fn,xn)=>[0,0],Ut=(fn,xn)=>[fn,xn];break;case"topMiddle":zt=(fn,xn)=>[fn/2,0],Ut=(fn,xn)=>[fn/2,xn];break;case"topRight":Bt=!0,zt=(fn,xn)=>[fn,0],Ut=(fn,xn)=>[0,xn];break;case"middleRight":Ht=!0,zt=(fn,xn)=>[fn,xn/2],Ut=(fn,xn)=>[0,xn/2];break;case"bottomRight":Bt=!0,zt=(fn,xn)=>[fn,xn],Ut=(fn,xn)=>[0,0];break;case"bottomMiddle":zt=(fn,xn)=>[fn/2,xn],Ut=(fn,xn)=>[fn/2,0];break;case"bottomLeft":Bt=!0,zt=(fn,xn)=>[0,xn],Ut=(fn,xn)=>[fn,0];break;case"middleLeft":Ht=!0,zt=(fn,xn)=>[0,xn/2],Ut=(fn,xn)=>[fn,xn/2];break}const Jt=zt(ft,St),Zt=Ut(ft,St);let tn=jt(...Zt);const nn=mr._round(ut+tn[0]),rn=mr._round(dt+tn[1]);let on=1,pn=1,dn,hn;if(et.fromKeyboard)({deltaX:dn,deltaY:hn}=et);else{const{screenX:fn,screenY:xn}=et,[an,cn]=Kt(this,u0);[dn,hn]=this.screenToPageTranslation(fn-an,xn-cn),Kt(this,u0)[0]=fn,Kt(this,u0)[1]=xn}if([dn,hn]=$t(dn/ot,hn/ct),Bt){const fn=Math.hypot(ft,St);on=pn=Math.max(Math.min(Math.hypot(Zt[0]-Jt[0]-dn,Zt[1]-Jt[1]-hn)/fn,1/ft,1/St),kt/ft,Tt/St)}else Ht?on=MathClamp(Math.abs(Zt[0]-Jt[0]-dn),kt,1)/ft:pn=MathClamp(Math.abs(Zt[1]-Jt[1]-hn),Tt,1)/St;const un=mr._round(ft*on),En=mr._round(St*pn);tn=jt(...Ut(un,En));const wn=nn-tn[0],Sn=rn-tn[1];Kt(this,ko)||vn(this,ko,[this.x,this.y,this.width,this.height]),this.width=un,this.height=En,this.x=wn,this.y=Sn,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nT=new WeakSet,h3=function(){var g;vn(this,Gu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(g=Kt(this,Gr))==null||g.toggle(!1),this.parent.togglePointerEvents(!1)},rT=new WeakSet,d3=function(g,et,ot){let ut=.7*(ot/et)+1-.7;if(ut===1)return;const dt=_n(this,m1,rw).call(this,this.rotation),ft=(nn,rn)=>[dt[0]*nn+dt[2]*rn,dt[1]*nn+dt[3]*rn],[St,kt]=this.parentDimensions,Tt=this.x,Rt=this.y,jt=this.width,Ft=this.height,$t=mr.MIN_SIZE/St,zt=mr.MIN_SIZE/kt;ut=Math.max(Math.min(ut,1/jt,1/Ft),$t/jt,zt/Ft);const Ut=mr._round(jt*ut),Bt=mr._round(Ft*ut);if(Ut===jt&&Bt===Ft)return;Kt(this,ko)||vn(this,ko,[Tt,Rt,jt,Ft]);const Ht=ft(jt/2,Ft/2),Jt=mr._round(Tt+Ht[0]),Zt=mr._round(Rt+Ht[1]),tn=ft(Ut/2,Bt/2);this.x=Jt-tn[0],this.y=Zt-tn[1],this.width=Ut,this.height=Bt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iT=new WeakSet,f3=function(){var g;(g=Kt(this,Gr))==null||g.toggle(!0),this.parent.togglePointerEvents(!0),_n(this,g1,iw).call(this)},pE=new WeakSet,QA=function(g){const{isMac:et}=util_FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},sT=new WeakSet,p3=function(g){const{isSelected:et}=this;this._uiManager.setUpDragSession();let ot=!1;const ct=new AbortController,ut=this._uiManager.combinedSignal(ct),dt={capture:!0,passive:!1,signal:ut},ft=kt=>{ct.abort(),vn(this,qp,null),vn(this,h0,!1),this._uiManager.endDragSession()||_n(this,pE,QA).call(this,kt),ot&&this._onStopDragging()};et&&(vn(this,f1,g.clientX),vn(this,p1,g.clientY),vn(this,qp,g.pointerId),vn(this,oE,g.pointerType),window.addEventListener("pointermove",kt=>{ot||(ot=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Tt,clientY:Rt,pointerId:jt}=kt;if(jt!==Kt(this,qp)){stopEvent(kt);return}const[Ft,$t]=this.screenToPageTranslation(Tt-Kt(this,f1),Rt-Kt(this,p1));vn(this,f1,Tt),vn(this,p1,Rt),this._uiManager.dragSelectedEditors(Ft,$t)},dt),window.addEventListener("touchmove",stopEvent,dt),window.addEventListener("pointerdown",kt=>{kt.pointerType===Kt(this,oE)&&(Kt(this,f0)||kt.isPrimary)&&ft(kt),stopEvent(kt)},dt));const St=kt=>{if(!Kt(this,qp)||Kt(this,qp)===kt.pointerId){ft(kt);return}stopEvent(kt)};window.addEventListener("pointerup",St,{signal:ut}),window.addEventListener("blur",St,{signal:ut})},mE=new WeakSet,ZA=function(){if(Kt(this,Kp)||!this.div)return;vn(this,Kp,new AbortController);const g=this._uiManager.combinedSignal(Kt(this,Kp));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:g}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:g})},oT=new WeakSet,m3=function(g){mr._resizerKeyboardManager.exec(this,g)},aT=new WeakSet,g3=function(g){var et;Kt(this,Wu)&&((et=g.relatedTarget)==null?void 0:et.parentNode)!==Kt(this,Ps)&&_n(this,p0,mx).call(this)},lT=new WeakSet,y3=function(g){vn(this,aE,Kt(this,Wu)?g:"")},gE=new WeakSet,eC=function(g){if(Kt(this,Il))for(const et of Kt(this,Il))et.tabIndex=g},p0=new WeakSet,mx=function(){vn(this,Wu,!1),_n(this,gE,eC).call(this,-1),_n(this,g1,iw).call(this)},yn(mr,hE),qn(mr,"_l10n",null),qn(mr,"_l10nResizer",null),qn(mr,"_borderLineWidth",-1),qn(mr,"_colorManager",new ColorManager),qn(mr,"_zIndex",1),qn(mr,"_telemetryTimeout",1e3);let AnnotationEditor=mr;class FakeEditor extends AnnotationEditor{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(g){this.h1=g?g&4294967295:SEED,this.h2=g?g&4294967295:SEED}update(g){let et,ot;if(typeof g=="string"){et=new Uint8Array(g.length*2),ot=0;for(let zt=0,Ut=g.length;zt<Ut;zt++){const Bt=g.charCodeAt(zt);Bt<=255?et[ot++]=Bt:(et[ot++]=Bt>>>8,et[ot++]=Bt&255)}}else if(ArrayBuffer.isView(g))et=g.slice(),ot=et.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ct=ot>>2,ut=ot-ct*4,dt=new Uint32Array(et.buffer,0,ct);let ft=0,St=0,kt=this.h1,Tt=this.h2;const Rt=3432918353,jt=461845907,Ft=Rt&MASK_LOW,$t=jt&MASK_LOW;for(let zt=0;zt<ct;zt++)zt&1?(ft=dt[zt],ft=ft*Rt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*$t&MASK_LOW,kt^=ft,kt=kt<<13|kt>>>19,kt=kt*5+3864292196):(St=dt[zt],St=St*Rt&MASK_HIGH|St*Ft&MASK_LOW,St=St<<15|St>>>17,St=St*jt&MASK_HIGH|St*$t&MASK_LOW,Tt^=St,Tt=Tt<<13|Tt>>>19,Tt=Tt*5+3864292196);switch(ft=0,ut){case 3:ft^=et[ct*4+2]<<16;case 2:ft^=et[ct*4+1]<<8;case 1:ft^=et[ct*4],ft=ft*Rt&MASK_HIGH|ft*Ft&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*$t&MASK_LOW,ct&1?kt^=ft:Tt^=ft}this.h1=kt,this.h2=Tt}hexdigest(){let g=this.h1,et=this.h2;return g^=et>>>1,g=g*3981806797&MASK_HIGH|g*36045&MASK_LOW,et=et*4283543511&MASK_HIGH|((et<<16|g>>>16)*2950163797&MASK_HIGH)>>>16,g^=et>>>1,g=g*444984403&MASK_HIGH|g*60499&MASK_LOW,et=et*3301882366&MASK_HIGH|((et<<16|g>>>16)*3120437893&MASK_HIGH)>>>16,g^=et>>>1,(g>>>0).toString(16).padStart(8,"0")+(et>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var m0,g0,qu,Ns,cT,v3;class AnnotationStorage{constructor(){yn(this,cT);yn(this,m0,!1);yn(this,g0,null);yn(this,qu,null);yn(this,Ns,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,et){const ot=Kt(this,Ns).get(g);return ot===void 0?et:Object.assign(et,ot)}getRawValue(g){return Kt(this,Ns).get(g)}remove(g){const et=Kt(this,Ns).get(g);if(et!==void 0&&(et instanceof AnnotationEditor&&Kt(this,qu).delete(et.annotationElementId),Kt(this,Ns).delete(g),Kt(this,Ns).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const ot of Kt(this,Ns).values())if(ot instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,et){const ot=Kt(this,Ns).get(g);let ct=!1;if(ot!==void 0)for(const[ut,dt]of Object.entries(et))ot[ut]!==dt&&(ct=!0,ot[ut]=dt);else ct=!0,Kt(this,Ns).set(g,et);ct&&_n(this,cT,v3).call(this),et instanceof AnnotationEditor&&((Kt(this,qu)||vn(this,qu,new Map)).set(et.annotationElementId,et),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type))}has(g){return Kt(this,Ns).has(g)}get size(){return Kt(this,Ns).size}resetModified(){Kt(this,m0)&&(vn(this,m0,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(Kt(this,Ns).size===0)return SerializableEmpty;const g=new Map,et=new MurmurHash3_64,ot=[],ct=Object.create(null);let ut=!1;for(const[dt,ft]of Kt(this,Ns)){const St=ft instanceof AnnotationEditor?ft.serialize(!1,ct):ft;St&&(g.set(dt,St),et.update(`${dt}:${JSON.stringify(St)}`),ut||(ut=!!St.bitmap))}if(ut)for(const dt of g.values())dt.bitmap&&ot.push(dt.bitmap);return g.size>0?{map:g,hash:et.hexdigest(),transfer:ot}:SerializableEmpty}get editorStats(){let g=null;const et=new Map;let ot=0,ct=0;for(const ut of Kt(this,Ns).values()){if(!(ut instanceof AnnotationEditor)){ut.popup&&(ut.popup.deleted?ct+=1:ot+=1);continue}ut.isCommentDeleted?ct+=1:ut.hasEditedComment&&(ot+=1);const dt=ut.telemetryFinalData;if(!dt)continue;const{type:ft}=dt;et.has(ft)||et.set(ft,Object.getPrototypeOf(ut).constructor),g||(g=Object.create(null));const St=g[ft]||(g[ft]=new Map);for(const[kt,Tt]of Object.entries(dt)){if(kt==="type")continue;let Rt=St.get(kt);Rt||(Rt=new Map,St.set(kt,Rt));const jt=Rt.get(Tt)??0;Rt.set(Tt,jt+1)}}if((ct>0||ot>0)&&(g||(g=Object.create(null)),g.comments={deleted:ct,edited:ot}),!g)return null;for(const[ut,dt]of et)g[ut]=dt.computeTelemetryFinalData(g[ut]);return g}resetModifiedIds(){vn(this,g0,null)}updateEditor(g,et){var ct;const ot=(ct=Kt(this,qu))==null?void 0:ct.get(g);return ot?(ot.updateFromAnnotationLayer(et),!0):!1}getEditor(g){var et;return((et=Kt(this,qu))==null?void 0:et.get(g))||null}get modifiedIds(){if(Kt(this,g0))return Kt(this,g0);const g=[];if(Kt(this,qu))for(const et of Kt(this,qu).values())et.serialize()&&g.push(et.annotationElementId);return vn(this,g0,{ids:new Set(g),hash:g.join(",")})}[Symbol.iterator](){return Kt(this,Ns).entries()}}m0=new WeakMap,g0=new WeakMap,qu=new WeakMap,Ns=new WeakMap,cT=new WeakSet,v3=function(){Kt(this,m0)||(vn(this,m0,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yE;class PrintAnnotationStorage extends AnnotationStorage{constructor(et){super();yn(this,yE,void 0);const{map:ot,hash:ct,transfer:ut}=et.serializable,dt=structuredClone(ot,ut?{transfer:ut}:null);vn(this,yE,{map:dt,hash:ct,transfer:ut})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return Kt(this,yE)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}yE=new WeakMap;var y1;class FontLoader{constructor({ownerDocument:g=globalThis.document,styleElement:et=null}){yn(this,y1,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const et=this.styleElement.sheet;et.insertRule(g,et.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),Kt(this,y1).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:g,disableFontFace:et,_inspectFont:ot}){if(!(!g||Kt(this,y1).has(g.loadedName))){if(assert(!et,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ct,src:ut,style:dt}=g,ft=new FontFace(ct,ut,dt);this.addNativeFontFace(ft);try{await ft.load(),Kt(this,y1).add(ct),ot==null||ot(g)}catch{warn(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ft)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g);return}if(this.isFontLoadingAPISupported){const ot=g.createNativeFontFace();if(ot){this.addNativeFontFace(ot);try{await ot.loaded}catch(ct){throw warn(`Failed to load font '${ot.family}': '${ct}'.`),g.disableFontFace=!0,ct}}return}const et=g.createFontFaceRule();if(et){if(this.insertRule(et),this.isSyncFontLoadingSupported)return;await new Promise(ot=>{const ct=this._queueLoadingCallback(ot);this._prepareFontLoadEvent(g,ct)})}}get isFontLoadingAPISupported(){var et;const g=!!((et=this._document)!=null&&et.fonts);return shadow(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(g){function et(){for(assert(!ct.done,"completeRequest() cannot be called twice."),ct.done=!0;ot.length>0&&ot[0].done;){const ut=ot.shift();setTimeout(ut.callback,0)}}const{loadingRequests:ot}=this,ct={done:!1,complete:et,callback:g};return ot.push(ct),ct}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,et){function ot(Zt,tn){return Zt.charCodeAt(tn)<<24|Zt.charCodeAt(tn+1)<<16|Zt.charCodeAt(tn+2)<<8|Zt.charCodeAt(tn+3)&255}function ct(Zt,tn,nn,rn){const on=Zt.substring(0,tn),pn=Zt.substring(tn+nn);return on+rn+pn}let ut,dt;const ft=this._document.createElement("canvas");ft.width=1,ft.height=1;const St=ft.getContext("2d");let kt=0;function Tt(Zt,tn){if(++kt>30){warn("Load test font never loaded."),tn();return}if(St.font="30px "+Zt,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){tn();return}setTimeout(Tt.bind(null,Zt,tn))}const Rt=`lt${Date.now()}${this.loadTestFontId++}`;let jt=this._loadTestFont;jt=ct(jt,976,Rt.length,Rt);const $t=16,zt=1482184792;let Ut=ot(jt,$t);for(ut=0,dt=Rt.length-3;ut<dt;ut+=4)Ut=Ut-zt+ot(Rt,ut)|0;ut<Rt.length&&(Ut=Ut-zt+ot(Rt+"XXX",ut)|0),jt=ct(jt,$t,4,string32(Ut));const Bt=`url(data:font/opentype;base64,${btoa(jt)});`,Ht=`@font-face {font-family:"${Rt}";src:${Bt}}`;this.insertRule(Ht);const Jt=this._document.createElement("div");Jt.style.visibility="hidden",Jt.style.width=Jt.style.height="10px",Jt.style.position="absolute",Jt.style.top=Jt.style.left="0px";for(const Zt of[g.loadedName,Rt]){const tn=this._document.createElement("span");tn.textContent="Hi",tn.style.fontFamily=Zt,Jt.append(tn)}this._document.body.append(Jt),Tt(Rt,()=>{Jt.remove(),et.complete()})}}y1=new WeakMap;var Pr;class FontFaceObject{constructor(g,et=null,ot,ct){yn(this,Pr,void 0);this.compiledGlyphs=Object.create(null),vn(this,Pr,g),this._inspectFont=et,ot&&Object.assign(this,ot),ct&&(this.charProcOperatorList=ct)}createNativeFontFace(){var et;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const ot={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ot.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,ot)}return(et=this._inspectFont)==null||et.call(this,this),g}createFontFaceRule(){var ot;if(!this.data||this.disableFontFace)return null;const g=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let et;if(!this.cssFontInfo)et=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),et=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ct}src:${g}}`}return(ot=this._inspectFont)==null||ot.call(this,this,g),et}getPathGenerator(g,et){if(this.compiledGlyphs[et]!==void 0)return this.compiledGlyphs[et];const ot=this.loadedName+"_path_"+et;let ct;try{ct=g.get(ot)}catch(dt){warn(`getPathGenerator - ignoring character: "${dt}".`)}const ut=new Path2D(ct||"");return this.fontExtraProperties||g.delete(ot),this.compiledGlyphs[et]=ut}get black(){return Kt(this,Pr).black}get bold(){return Kt(this,Pr).bold}get disableFontFace(){return Kt(this,Pr).disableFontFace??!1}get fontExtraProperties(){return Kt(this,Pr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Kt(this,Pr).isInvalidPDFjsFont}get isType3Font(){return Kt(this,Pr).isType3Font}get italic(){return Kt(this,Pr).italic}get missingFile(){return Kt(this,Pr).missingFile}get remeasure(){return Kt(this,Pr).remeasure}get vertical(){return Kt(this,Pr).vertical}get ascent(){return Kt(this,Pr).ascent}get defaultWidth(){return Kt(this,Pr).defaultWidth}get descent(){return Kt(this,Pr).descent}get bbox(){return Kt(this,Pr).bbox}get fontMatrix(){return Kt(this,Pr).fontMatrix}get fallbackName(){return Kt(this,Pr).fallbackName}get loadedName(){return Kt(this,Pr).loadedName}get mimetype(){return Kt(this,Pr).mimetype}get name(){return Kt(this,Pr).name}get data(){return Kt(this,Pr).data}clearData(){Kt(this,Pr).clearData()}get cssFontInfo(){return Kt(this,Pr).cssFontInfo}get systemFontInfo(){return Kt(this,Pr).systemFontInfo}get defaultVMetrics(){return Kt(this,Pr).defaultVMetrics}}Pr=new WeakMap;function getUrlProp(it){if(it instanceof URL)return it.href;if(typeof it=="string"){if(isNodeJS)return it;const g=URL.parse(it,window.location);if(g)return g.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return stringToBytes(it);if(it instanceof ArrayBuffer||ArrayBuffer.isView(it)||typeof it=="object"&&!isNaN(it==null?void 0:it.length))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(it){if(typeof it!="string")return null;if(it.endsWith("/"))return it;throw new Error(`Invalid factory url: "${it}" must include trailing slash.`)}const isRefProxy=it=>typeof it=="object"&&Number.isInteger(it==null?void 0:it.num)&&it.num>=0&&Number.isInteger(it==null?void 0:it.gen)&&it.gen>=0,isNameProxy=it=>typeof it=="object"&&typeof(it==null?void 0:it.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Ku,uT;class LoopbackPort{constructor(){yn(this,Ku,new Map);yn(this,uT,Promise.resolve())}postMessage(g,et){const ot={data:structuredClone(g,et?{transfer:et}:null)};Kt(this,uT).then(()=>{for(const[ct]of Kt(this,Ku))ct.call(this,ot)})}addEventListener(g,et,ot=null){let ct=null;if((ot==null?void 0:ot.signal)instanceof AbortSignal){const{signal:ut}=ot;if(ut.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const dt=()=>this.removeEventListener(g,et);ct=()=>ut.removeEventListener("abort",dt),ut.addEventListener("abort",dt)}Kt(this,Ku).set(et,ct)}removeEventListener(g,et){const ot=Kt(this,Ku).get(et);ot==null||ot(),Kt(this,Ku).delete(et)}terminate(){for(const[,g]of Kt(this,Ku))g==null||g();Kt(this,Ku).clear()}}Ku=new WeakMap,uT=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(it){if(it instanceof AbortException||it instanceof InvalidPDFException||it instanceof PasswordException||it instanceof ResponseException||it instanceof UnknownErrorException)return it;switch(it instanceof Error||typeof it=="object"&&it!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new AbortException(it.message);case"InvalidPDFException":return new InvalidPDFException(it.message);case"PasswordException":return new PasswordException(it.message,it.code);case"ResponseException":return new ResponseException(it.message,it.status,it.missing);case"UnknownErrorException":return new UnknownErrorException(it.message,it.details)}return new UnknownErrorException(it.message,it.toString())}var v1,hT,x3,dT,b3,fT,E3,x1,sw;class MessageHandler{constructor(g,et,ot){yn(this,hT);yn(this,dT);yn(this,fT);yn(this,x1);yn(this,v1,new AbortController);this.sourceName=g,this.targetName=et,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),ot.addEventListener("message",_n(this,hT,x3).bind(this),{signal:Kt(this,v1).signal})}on(g,et){const ot=this.actionHandler;if(ot[g])throw new Error(`There is already an actionName called "${g}"`);ot[g]=et}send(g,et,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:et},ot)}sendWithPromise(g,et,ot){const ct=this.callbackId++,ut=Promise.withResolvers();this.callbackCapabilities[ct]=ut;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:ct,data:et},ot)}catch(dt){ut.reject(dt)}return ut.promise}sendWithStream(g,et,ot,ct){const ut=this.streamId++,dt=this.sourceName,ft=this.targetName,St=this.comObj;return new ReadableStream({start:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut]={controller:kt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:dt,targetName:ft,action:g,streamId:ut,data:et,desiredSize:kt.desiredSize},ct),Tt.promise},pull:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut].pullCall=Tt,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.PULL,streamId:ut,desiredSize:kt.desiredSize}),Tt.promise},cancel:kt=>{assert(kt instanceof Error,"cancel must have a valid reason");const Tt=Promise.withResolvers();return this.streamControllers[ut].cancelCall=Tt,this.streamControllers[ut].isClosed=!0,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.CANCEL,streamId:ut,reason:wrapReason(kt)}),Tt.promise}},ot)}destroy(){var g;(g=Kt(this,v1))==null||g.abort(),vn(this,v1,null)}}v1=new WeakMap,hT=new WeakSet,x3=function({data:g}){if(g.targetName!==this.sourceName)return;if(g.stream){_n(this,fT,E3).call(this,g);return}if(g.callback){const ot=g.callbackId,ct=this.callbackCapabilities[ot];if(!ct)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],g.callback===CallbackKind.DATA)ct.resolve(g.data);else if(g.callback===CallbackKind.ERROR)ct.reject(wrapReason(g.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[g.action];if(!et)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const ot=this.sourceName,ct=g.sourceName,ut=this.comObj;Promise.try(et,g.data).then(function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.DATA,callbackId:g.callbackId,data:dt})},function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.ERROR,callbackId:g.callbackId,reason:wrapReason(dt)})});return}if(g.streamId){_n(this,dT,b3).call(this,g);return}et(g.data)},dT=new WeakSet,b3=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this,ft=this.actionHandler[g.action],St={enqueue(kt,Tt=1,Rt){if(this.isCancelled)return;const jt=this.desiredSize;this.desiredSize-=Tt,jt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ENQUEUE,streamId:et,chunk:kt},Rt)},close(){this.isCancelled||(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CLOSE,streamId:et}),delete dt.streamSinks[et])},error(kt){assert(kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ERROR,streamId:et,reason:wrapReason(kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[et]=St,Promise.try(ft,g.data,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,reason:wrapReason(kt)})})},fT=new WeakSet,E3=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this.streamControllers[et],ft=this.streamSinks[et];switch(g.stream){case StreamKind.START_COMPLETE:g.success?dt.startCall.resolve():dt.startCall.reject(wrapReason(g.reason));break;case StreamKind.PULL_COMPLETE:g.success?dt.pullCall.resolve():dt.pullCall.reject(wrapReason(g.reason));break;case StreamKind.PULL:if(!ft){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0});break}ft.desiredSize<=0&&g.desiredSize>0&&ft.sinkCapability.resolve(),ft.desiredSize=g.desiredSize,Promise.try(ft.onPull||onFn).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,reason:wrapReason(kt)})});break;case StreamKind.ENQUEUE:if(assert(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(g.chunk);break;case StreamKind.CLOSE:if(assert(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),_n(this,x1,sw).call(this,dt,et);break;case StreamKind.ERROR:assert(dt,"error should have stream controller"),dt.controller.error(wrapReason(g.reason)),_n(this,x1,sw).call(this,dt,et);break;case StreamKind.CANCEL_COMPLETE:g.success?dt.cancelCall.resolve():dt.cancelCall.reject(wrapReason(g.reason)),_n(this,x1,sw).call(this,dt,et);break;case StreamKind.CANCEL:if(!ft)break;const St=wrapReason(g.reason);Promise.try(ft.onCancel||onFn,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,reason:wrapReason(kt)})}),ft.sinkCapability.reject(St),ft.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},x1=new WeakSet,sw=async function(g,et){var ot,ct,ut;await Promise.allSettled([(ot=g.startCall)==null?void 0:ot.promise,(ct=g.pullCall)==null?void 0:ct.promise,(ut=g.cancelCall)==null?void 0:ut.promise]),delete this.streamControllers[et]};var vE;class BaseCanvasFactory{constructor({enableHWA:g=!1}){yn(this,vE,!1);vn(this,vE,g)}create(g,et){if(g<=0||et<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(g,et);return{canvas:ot,context:ot.getContext("2d",{willReadFrequently:!Kt(this,vE)})}}reset(g,et,ot){if(!g.canvas)throw new Error("Canvas is not specified");if(et<=0||ot<=0)throw new Error("Invalid canvas size");g.canvas.width=et,g.canvas.height=ot}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,et){unreachable("Abstract method `_createCanvas` called.")}}vE=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document,enableHWA:et=!1}){super({enableHWA:et}),this._document=g}_createCanvas(g,et){const ot=this._document.createElement("canvas");return ot.width=g,ot.height=et,ot}}class BaseCMapReaderFactory{constructor({baseUrl:g=null,isCompressed:et=!0}){this.baseUrl=g,this.isCompressed=et}async fetch({name:g}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!g)throw new Error("CMap name must be specified.");const et=this.baseUrl+g+(this.isCompressed?".bcmap":"");return this._fetch(et).then(ot=>({cMapData:ot,isCompressed:this.isCompressed})).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){const et=await fetchData(g,this.isCompressed?"arraybuffer":"text");return et instanceof ArrayBuffer?new Uint8Array(et):stringToBytes(et)}}class BaseFilterFactory{addFilter(g){return"none"}addHCMFilter(g,et){return"none"}addAlphaFilter(g){return"none"}addLuminosityFilter(g){return"none"}addHighlightHCMFilter(g,et,ot,ct,ut){return"none"}destroy(g=!1){}}var y0,b1,Yu,Xu,zs,v0,x0,vs,$s,b0,gx,Yp,jy,E1,ow,Xp,Fy,pT,S3,xE,tC,Jp,$y,E0,yx,S0,vx,bE,nC,w0,xx;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:et,ownerDocument:ot=globalThis.document}){super();yn(this,vs);yn(this,b0);yn(this,Yp);yn(this,E1);yn(this,Xp);yn(this,pT);yn(this,xE);yn(this,Jp);yn(this,E0);yn(this,S0);yn(this,bE);yn(this,w0);yn(this,y0,void 0);yn(this,b1,void 0);yn(this,Yu,void 0);yn(this,Xu,void 0);yn(this,zs,void 0);yn(this,v0,void 0);yn(this,x0,0);vn(this,Xu,et),vn(this,zs,ot)}addFilter(et){if(!et)return"none";let ot=Kt(this,vs,$s).get(et);if(ot)return ot;const[ct,ut,dt]=_n(this,E1,ow).call(this,et),ft=et.length===1?ct:`${ct}${ut}${dt}`;if(ot=Kt(this,vs,$s).get(ft),ot)return Kt(this,vs,$s).set(et,ot),ot;const St=`g_${Kt(this,Xu)}_transfer_map_${cs(this,x0)._++}`,kt=_n(this,Xp,Fy).call(this,St);Kt(this,vs,$s).set(et,kt),Kt(this,vs,$s).set(ft,kt);const Tt=_n(this,Jp,$y).call(this,St);return _n(this,S0,vx).call(this,ct,ut,dt,Tt),kt}addHCMFilter(et,ot){var $t;const ct=`${et}-${ot}`,ut="base";let dt=Kt(this,b0,gx).get(ut);if((dt==null?void 0:dt.key)===ct||(dt?(($t=dt.filter)==null||$t.remove(),dt.key=ct,dt.url="none",dt.filter=null):(dt={key:ct,url:"none",filter:null},Kt(this,b0,gx).set(ut,dt)),!et||!ot))return dt.url;const ft=_n(this,w0,xx).call(this,et);et=Util$1.makeHexColor(...ft);const St=_n(this,w0,xx).call(this,ot);if(ot=Util$1.makeHexColor(...St),Kt(this,Yp,jy).style.color="",et==="#000000"&&ot==="#ffffff"||et===ot)return dt.url;const kt=new Array(256);for(let zt=0;zt<=255;zt++){const Ut=zt/255;kt[zt]=Ut<=.03928?Ut/12.92:((Ut+.055)/1.055)**2.4}const Tt=kt.join(","),Rt=`g_${Kt(this,Xu)}_hcm_filter`,jt=dt.filter=_n(this,Jp,$y).call(this,Rt);_n(this,S0,vx).call(this,Tt,Tt,Tt,jt),_n(this,xE,tC).call(this,jt);const Ft=(zt,Ut)=>{const Bt=ft[zt]/255,Ht=St[zt]/255,Jt=new Array(Ut+1);for(let Zt=0;Zt<=Ut;Zt++)Jt[Zt]=Bt+Zt/Ut*(Ht-Bt);return Jt.join(",")};return _n(this,S0,vx).call(this,Ft(0,5),Ft(1,5),Ft(2,5),jt),dt.url=_n(this,Xp,Fy).call(this,Rt),dt.url}addAlphaFilter(et){let ot=Kt(this,vs,$s).get(et);if(ot)return ot;const[ct]=_n(this,E1,ow).call(this,[et]),ut=`alpha_${ct}`;if(ot=Kt(this,vs,$s).get(ut),ot)return Kt(this,vs,$s).set(et,ot),ot;const dt=`g_${Kt(this,Xu)}_alpha_map_${cs(this,x0)._++}`,ft=_n(this,Xp,Fy).call(this,dt);Kt(this,vs,$s).set(et,ft),Kt(this,vs,$s).set(ut,ft);const St=_n(this,Jp,$y).call(this,dt);return _n(this,bE,nC).call(this,ct,St),ft}addLuminosityFilter(et){let ot=Kt(this,vs,$s).get(et||"luminosity");if(ot)return ot;let ct,ut;if(et?([ct]=_n(this,E1,ow).call(this,[et]),ut=`luminosity_${ct}`):ut="luminosity",ot=Kt(this,vs,$s).get(ut),ot)return Kt(this,vs,$s).set(et,ot),ot;const dt=`g_${Kt(this,Xu)}_luminosity_map_${cs(this,x0)._++}`,ft=_n(this,Xp,Fy).call(this,dt);Kt(this,vs,$s).set(et,ft),Kt(this,vs,$s).set(ut,ft);const St=_n(this,Jp,$y).call(this,dt);return _n(this,pT,S3).call(this,St),et&&_n(this,bE,nC).call(this,ct,St),ft}addHighlightHCMFilter(et,ot,ct,ut,dt){var Ht;const ft=`${ot}-${ct}-${ut}-${dt}`;let St=Kt(this,b0,gx).get(et);if((St==null?void 0:St.key)===ft||(St?((Ht=St.filter)==null||Ht.remove(),St.key=ft,St.url="none",St.filter=null):(St={key:ft,url:"none",filter:null},Kt(this,b0,gx).set(et,St)),!ot||!ct))return St.url;const[kt,Tt]=[ot,ct].map(_n(this,w0,xx).bind(this));let Rt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),jt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[Ft,$t]=[ut,dt].map(_n(this,w0,xx).bind(this));jt<Rt&&([Rt,jt,Ft,$t]=[jt,Rt,$t,Ft]),Kt(this,Yp,jy).style.color="";const zt=(Jt,Zt,tn)=>{const nn=new Array(256),rn=(jt-Rt)/tn,on=Jt/255,pn=(Zt-Jt)/(255*tn);let dn=0;for(let hn=0;hn<=tn;hn++){const un=Math.round(Rt+hn*rn),En=on+hn*pn;for(let wn=dn;wn<=un;wn++)nn[wn]=En;dn=un+1}for(let hn=dn;hn<256;hn++)nn[hn]=nn[dn-1];return nn.join(",")},Ut=`g_${Kt(this,Xu)}_hcm_${et}_filter`,Bt=St.filter=_n(this,Jp,$y).call(this,Ut);return _n(this,xE,tC).call(this,Bt),_n(this,S0,vx).call(this,zt(Ft[0],$t[0],5),zt(Ft[1],$t[1],5),zt(Ft[2],$t[2],5),Bt),St.url=_n(this,Xp,Fy).call(this,Ut),St.url}destroy(et=!1){var ot,ct,ut,dt;et&&((ot=Kt(this,v0))!=null&&ot.size)||((ct=Kt(this,Yu))==null||ct.parentNode.parentNode.remove(),vn(this,Yu,null),(ut=Kt(this,b1))==null||ut.clear(),vn(this,b1,null),(dt=Kt(this,v0))==null||dt.clear(),vn(this,v0,null),vn(this,x0,0))}}y0=new WeakMap,b1=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,zs=new WeakMap,v0=new WeakMap,x0=new WeakMap,vs=new WeakSet,$s=function(){return Kt(this,b1)||vn(this,b1,new Map)},b0=new WeakSet,gx=function(){return Kt(this,v0)||vn(this,v0,new Map)},Yp=new WeakSet,jy=function(){if(!Kt(this,Yu)){const et=Kt(this,zs).createElement("div"),{style:ot}=et;ot.visibility="hidden",ot.contain="strict",ot.width=ot.height=0,ot.position="absolute",ot.top=ot.left=0,ot.zIndex=-1;const ct=Kt(this,zs).createElementNS(SVG_NS,"svg");ct.setAttribute("width",0),ct.setAttribute("height",0),vn(this,Yu,Kt(this,zs).createElementNS(SVG_NS,"defs")),et.append(ct),ct.append(Kt(this,Yu)),Kt(this,zs).body.append(et)}return Kt(this,Yu)},E1=new WeakSet,ow=function(et){if(et.length===1){const kt=et[0],Tt=new Array(256);for(let jt=0;jt<256;jt++)Tt[jt]=kt[jt]/255;const Rt=Tt.join(",");return[Rt,Rt,Rt]}const[ot,ct,ut]=et,dt=new Array(256),ft=new Array(256),St=new Array(256);for(let kt=0;kt<256;kt++)dt[kt]=ot[kt]/255,ft[kt]=ct[kt]/255,St[kt]=ut[kt]/255;return[dt.join(","),ft.join(","),St.join(",")]},Xp=new WeakSet,Fy=function(et){if(Kt(this,y0)===void 0){vn(this,y0,"");const ot=Kt(this,zs).URL;ot!==Kt(this,zs).baseURI&&(isDataScheme(ot)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):vn(this,y0,updateUrlHash(ot,"")))}return`url(${Kt(this,y0)}#${et})`},pT=new WeakSet,S3=function(et){const ot=Kt(this,zs).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),et.append(ot)},xE=new WeakSet,tC=function(et){const ot=Kt(this,zs).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot)},Jp=new WeakSet,$y=function(et){const ot=Kt(this,zs).createElementNS(SVG_NS,"filter");return ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("id",et),Kt(this,Yp,jy).append(ot),ot},E0=new WeakSet,yx=function(et,ot,ct){const ut=Kt(this,zs).createElementNS(SVG_NS,ot);ut.setAttribute("type","discrete"),ut.setAttribute("tableValues",ct),et.append(ut)},S0=new WeakSet,vx=function(et,ot,ct,ut){const dt=Kt(this,zs).createElementNS(SVG_NS,"feComponentTransfer");ut.append(dt),_n(this,E0,yx).call(this,dt,"feFuncR",et),_n(this,E0,yx).call(this,dt,"feFuncG",ot),_n(this,E0,yx).call(this,dt,"feFuncB",ct)},bE=new WeakSet,nC=function(et,ot){const ct=Kt(this,zs).createElementNS(SVG_NS,"feComponentTransfer");ot.append(ct),_n(this,E0,yx).call(this,ct,"feFuncA",et)},w0=new WeakSet,xx=function(et){return Kt(this,Yp,jy).style.color=et,getRGB(getComputedStyle(Kt(this,Yp,jy)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!g)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load font data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}class BaseWasmFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!g)throw new Error("Wasm filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load wasm data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(it){const et=await process.getBuiltinModule("fs").promises.readFile(it);return new Uint8Array(et)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(g,et){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(g,et)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(g){return node_utils_fetchData(g)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(it,g,et,ot,ct,ut){it[g*4+0]=Math.min(it[g*4+0],et),it[g*4+1]=Math.min(it[g*4+1],ot),it[g*4+2]=Math.max(it[g*4+2],ct),it[g*4+3]=Math.max(it[g*4+3],ut)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var S1,Qp;class BBoxReader{constructor(g,et){yn(this,S1,void 0);yn(this,Qp,void 0);vn(this,S1,g),vn(this,Qp,et)}get length(){return Kt(this,S1).length}isEmpty(g){return Kt(this,S1)[g]===EMPTY_BBOX}minX(g){return Kt(this,Qp)[g*4+0]/256}minY(g){return Kt(this,Qp)[g*4+1]/256}maxX(g){return(Kt(this,Qp)[g*4+2]+1)/256}maxY(g){return(Kt(this,Qp)[g*4+3]+1)/256}}S1=new WeakMap,Qp=new WeakMap;const ensureDebugMetadata=(it,g)=>{if(!it)return;let et=it.get(g);return et||(et={dependencies:new Set,isRenderingOperation:!1},it.set(g,et)),et};var fo,po,k0,Dl,T0,Ju,Ar,Nr,Qu,mo,EE,w1,_0,A0,Zu,Hs,du,SE,rC;class CanvasDependencyTracker{constructor(g,et,ot=!1){yn(this,SE);yn(this,fo,{__proto__:null});yn(this,po,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});yn(this,k0,new Map);yn(this,Dl,[]);yn(this,T0,[]);yn(this,Ju,[[1,0,0,1,0,0]]);yn(this,Ar,[-1/0,-1/0,1/0,1/0]);yn(this,Nr,new Float64Array([1/0,1/0,-1/0,-1/0]));yn(this,Qu,-1);yn(this,mo,new Set);yn(this,EE,new Map);yn(this,w1,new Map);yn(this,_0,void 0);yn(this,A0,void 0);yn(this,Zu,void 0);yn(this,Hs,void 0);yn(this,du,void 0);vn(this,_0,g.width),vn(this,A0,g.height),_n(this,SE,rC).call(this,et),ot&&vn(this,du,new Map)}growOperationsCount(g){g>=Kt(this,Hs).length&&_n(this,SE,rC).call(this,g,Kt(this,Hs))}save(g){return vn(this,fo,{__proto__:Kt(this,fo)}),vn(this,po,{__proto__:Kt(this,po),transform:{__proto__:Kt(this,po).transform},moveText:{__proto__:Kt(this,po).moveText},sameLineText:{__proto__:Kt(this,po).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:Kt(this,po)[FORCED_DEPENDENCY_LABEL]}}),vn(this,Ar,{__proto__:Kt(this,Ar)}),Kt(this,Dl).push(g),this}restore(g){var ct;const et=Object.getPrototypeOf(Kt(this,fo));if(et===null)return this;vn(this,fo,et),vn(this,po,Object.getPrototypeOf(Kt(this,po))),vn(this,Ar,Object.getPrototypeOf(Kt(this,Ar)));const ot=Kt(this,Dl).pop();return ot!==void 0&&((ct=ensureDebugMetadata(Kt(this,du),g))==null||ct.dependencies.add(ot),Kt(this,Hs)[g]=Kt(this,Hs)[ot]),this}recordOpenMarker(g){return Kt(this,Dl).push(g),this}getOpenMarker(){return Kt(this,Dl).length===0?null:Kt(this,Dl).at(-1)}recordCloseMarker(g){var ot;const et=Kt(this,Dl).pop();return et!==void 0&&((ot=ensureDebugMetadata(Kt(this,du),g))==null||ot.dependencies.add(et),Kt(this,Hs)[g]=Kt(this,Hs)[et]),this}beginMarkedContent(g){return Kt(this,T0).push(g),this}endMarkedContent(g){var ot;const et=Kt(this,T0).pop();return et!==void 0&&((ot=ensureDebugMetadata(Kt(this,du),g))==null||ot.dependencies.add(et),Kt(this,Hs)[g]=Kt(this,Hs)[et]),this}pushBaseTransform(g){return Kt(this,Ju).push(Util$1.multiplyByDOMMatrix(Kt(this,Ju).at(-1),g.getTransform())),this}popBaseTransform(){return Kt(this,Ju).length>1&&Kt(this,Ju).pop(),this}recordSimpleData(g,et){return Kt(this,fo)[g]=et,this}recordIncrementalData(g,et){return Kt(this,po)[g].push(et),this}resetIncrementalData(g,et){return Kt(this,po)[g].length=0,this}recordNamedData(g,et){return Kt(this,k0).set(g,et),this}recordSimpleDataFromNamed(g,et,ot){Kt(this,fo)[g]=Kt(this,k0).get(et)??ot}recordFutureForcedDependency(g,et){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,et),this}inheritSimpleDataAsFutureForcedDependencies(g){for(const et of g)et in Kt(this,fo)&&this.recordFutureForcedDependency(et,Kt(this,fo)[et]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const g of Kt(this,mo))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,g);return this}resetBBox(g){return Kt(this,Qu)!==g&&(vn(this,Qu,g),Kt(this,Nr)[0]=1/0,Kt(this,Nr)[1]=1/0,Kt(this,Nr)[2]=-1/0,Kt(this,Nr)[3]=-1/0),this}recordClipBox(g,et,ot,ct,ut,dt){const ft=Util$1.multiplyByDOMMatrix(Kt(this,Ju).at(-1),et.getTransform()),St=[1/0,1/0,-1/0,-1/0];Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],ft,St);const kt=Util$1.intersect(Kt(this,Ar),St);return kt?(Kt(this,Ar)[0]=kt[0],Kt(this,Ar)[1]=kt[1],Kt(this,Ar)[2]=kt[2],Kt(this,Ar)[3]=kt[3]):(Kt(this,Ar)[0]=Kt(this,Ar)[1]=1/0,Kt(this,Ar)[2]=Kt(this,Ar)[3]=-1/0),this}recordBBox(g,et,ot,ct,ut,dt){const ft=Kt(this,Ar);if(ft[0]===1/0)return this;const St=Util$1.multiplyByDOMMatrix(Kt(this,Ju).at(-1),et.getTransform());if(ft[0]===-1/0)return Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],St,Kt(this,Nr)),this;const kt=[1/0,1/0,-1/0,-1/0];return Util$1.axialAlignedBoundingBox([ot,ut,ct,dt],St,kt),Kt(this,Nr)[0]=Math.min(Kt(this,Nr)[0],Math.max(kt[0],ft[0])),Kt(this,Nr)[1]=Math.min(Kt(this,Nr)[1],Math.max(kt[1],ft[1])),Kt(this,Nr)[2]=Math.max(Kt(this,Nr)[2],Math.min(kt[2],ft[2])),Kt(this,Nr)[3]=Math.max(Kt(this,Nr)[3],Math.min(kt[3],ft[3])),this}recordCharacterBBox(g,et,ot,ct=1,ut=0,dt=0,ft){const St=ot.bbox;let kt,Tt;if(St&&(kt=St[2]!==St[0]&&St[3]!==St[1]&&Kt(this,w1).get(ot),kt!==!1&&(Tt=[0,0,0,0],Util$1.axialAlignedBoundingBox(St,ot.fontMatrix,Tt),(ct!==1||ut!==0||dt!==0)&&Util$1.scaleMinMax([ct,0,0,-ct,ut,dt],Tt),kt)))return this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]);if(!ft)return this.recordFullPageBBox(g);const Rt=ft();return St&&Tt&&kt===void 0&&(kt=Tt[0]<=ut-Rt.actualBoundingBoxLeft&&Tt[2]>=ut+Rt.actualBoundingBoxRight&&Tt[1]<=dt-Rt.actualBoundingBoxAscent&&Tt[3]>=dt+Rt.actualBoundingBoxDescent,Kt(this,w1).set(ot,kt),kt)?this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]):this.recordBBox(g,et,ut-Rt.actualBoundingBoxLeft,ut+Rt.actualBoundingBoxRight,dt-Rt.actualBoundingBoxAscent,dt+Rt.actualBoundingBoxDescent)}recordFullPageBBox(g){return Kt(this,Nr)[0]=Math.max(0,Kt(this,Ar)[0]),Kt(this,Nr)[1]=Math.max(0,Kt(this,Ar)[1]),Kt(this,Nr)[2]=Math.min(Kt(this,_0),Kt(this,Ar)[2]),Kt(this,Nr)[3]=Math.min(Kt(this,A0),Kt(this,Ar)[3]),this}getSimpleIndex(g){return Kt(this,fo)[g]}recordDependencies(g,et){const ot=Kt(this,mo),ct=Kt(this,fo),ut=Kt(this,po);for(const dt of et)dt in Kt(this,fo)?ot.add(ct[dt]):dt in ut&&ut[dt].forEach(ot.add,ot);return this}recordNamedDependency(g,et){return Kt(this,k0).has(et)&&Kt(this,mo).add(Kt(this,k0).get(et)),this}recordOperation(g,et=!1){if(this.recordDependencies(g,[FORCED_DEPENDENCY_LABEL]),Kt(this,du)){const ot=ensureDebugMetadata(Kt(this,du),g),{dependencies:ct}=ot;Kt(this,mo).forEach(ct.add,ct),Kt(this,Dl).forEach(ct.add,ct),Kt(this,T0).forEach(ct.add,ct),ct.delete(g),ot.isRenderingOperation=!0}if(Kt(this,Qu)===g){const ot=floor(Kt(this,Nr)[0]*256/Kt(this,_0)),ct=floor(Kt(this,Nr)[1]*256/Kt(this,A0)),ut=ceil(Kt(this,Nr)[2]*256/Kt(this,_0)),dt=ceil(Kt(this,Nr)[3]*256/Kt(this,A0));expandBBox(Kt(this,Zu),g,ot,ct,ut,dt);for(const ft of Kt(this,mo))ft!==g&&expandBBox(Kt(this,Zu),ft,ot,ct,ut,dt);for(const ft of Kt(this,Dl))ft!==g&&expandBBox(Kt(this,Zu),ft,ot,ct,ut,dt);for(const ft of Kt(this,T0))ft!==g&&expandBBox(Kt(this,Zu),ft,ot,ct,ut,dt);et||(Kt(this,mo).clear(),vn(this,Qu,-1))}return this}recordShowTextOperation(g,et=!1){const ot=Array.from(Kt(this,mo));this.recordOperation(g,et),this.recordIncrementalData("sameLineText",g);for(const ct of ot)this.recordIncrementalData("sameLineText",ct);return this}bboxToClipBoxDropOperation(g,et=!1){return Kt(this,Qu)===g&&(vn(this,Qu,-1),Kt(this,Ar)[0]=Math.max(Kt(this,Ar)[0],Kt(this,Nr)[0]),Kt(this,Ar)[1]=Math.max(Kt(this,Ar)[1],Kt(this,Nr)[1]),Kt(this,Ar)[2]=Math.min(Kt(this,Ar)[2],Kt(this,Nr)[2]),Kt(this,Ar)[3]=Math.min(Kt(this,Ar)[3],Kt(this,Nr)[3]),et||Kt(this,mo).clear()),this}_takePendingDependencies(){const g=Kt(this,mo);return vn(this,mo,new Set),g}_extractOperation(g){const et=Kt(this,EE).get(g);return Kt(this,EE).delete(g),et}_pushPendingDependencies(g){for(const et of g)Kt(this,mo).add(et)}take(){return Kt(this,w1).clear(),new BBoxReader(Kt(this,Hs),Kt(this,Zu))}takeDebugMetadata(){return Kt(this,du)}}fo=new WeakMap,po=new WeakMap,k0=new WeakMap,Dl=new WeakMap,T0=new WeakMap,Ju=new WeakMap,Ar=new WeakMap,Nr=new WeakMap,Qu=new WeakMap,mo=new WeakMap,EE=new WeakMap,w1=new WeakMap,_0=new WeakMap,A0=new WeakMap,Zu=new WeakMap,Hs=new WeakMap,du=new WeakMap,SE=new WeakSet,rC=function(g,et){const ot=new ArrayBuffer(g*4);vn(this,Zu,new Uint8ClampedArray(ot)),vn(this,Hs,new Uint32Array(ot)),et&&et.length>0?(Kt(this,Hs).set(et),Kt(this,Hs).fill(EMPTY_BBOX,et.length)):Kt(this,Hs).fill(EMPTY_BBOX)};var Lr,Qr,Ll,k1,T1;const GC=class GC{constructor(g,et,ot){yn(this,Lr,void 0);yn(this,Qr,void 0);yn(this,Ll,void 0);yn(this,k1,0);yn(this,T1,0);if(g instanceof GC&&Kt(g,Ll)===!!ot)return g;vn(this,Lr,g),vn(this,Qr,et),vn(this,Ll,!!ot)}growOperationsCount(){throw new Error("Unreachable")}save(g){return cs(this,T1)._++,Kt(this,Lr).save(Kt(this,Qr)),this}restore(g){return Kt(this,T1)>0&&(Kt(this,Lr).restore(Kt(this,Qr)),cs(this,T1)._--),this}recordOpenMarker(g){return cs(this,k1)._++,this}getOpenMarker(){return Kt(this,k1)>0?Kt(this,Qr):Kt(this,Lr).getOpenMarker()}recordCloseMarker(g){return cs(this,k1)._--,this}beginMarkedContent(g){return this}endMarkedContent(g){return this}pushBaseTransform(g){return Kt(this,Lr).pushBaseTransform(g),this}popBaseTransform(){return Kt(this,Lr).popBaseTransform(),this}recordSimpleData(g,et){return Kt(this,Lr).recordSimpleData(g,Kt(this,Qr)),this}recordIncrementalData(g,et){return Kt(this,Lr).recordIncrementalData(g,Kt(this,Qr)),this}resetIncrementalData(g,et){return Kt(this,Lr).resetIncrementalData(g,Kt(this,Qr)),this}recordNamedData(g,et){return this}recordSimpleDataFromNamed(g,et,ot){return Kt(this,Lr).recordSimpleDataFromNamed(g,et,Kt(this,Qr)),this}recordFutureForcedDependency(g,et){return Kt(this,Lr).recordFutureForcedDependency(g,Kt(this,Qr)),this}inheritSimpleDataAsFutureForcedDependencies(g){return Kt(this,Lr).inheritSimpleDataAsFutureForcedDependencies(g),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Kt(this,Lr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(g){return Kt(this,Ll)||Kt(this,Lr).resetBBox(Kt(this,Qr)),this}recordClipBox(g,et,ot,ct,ut,dt){return Kt(this,Ll)||Kt(this,Lr).recordClipBox(Kt(this,Qr),et,ot,ct,ut,dt),this}recordBBox(g,et,ot,ct,ut,dt){return Kt(this,Ll)||Kt(this,Lr).recordBBox(Kt(this,Qr),et,ot,ct,ut,dt),this}recordCharacterBBox(g,et,ot,ct,ut,dt,ft){return Kt(this,Ll)||Kt(this,Lr).recordCharacterBBox(Kt(this,Qr),et,ot,ct,ut,dt,ft),this}recordFullPageBBox(g){return Kt(this,Ll)||Kt(this,Lr).recordFullPageBBox(Kt(this,Qr)),this}getSimpleIndex(g){return Kt(this,Lr).getSimpleIndex(g)}recordDependencies(g,et){return Kt(this,Lr).recordDependencies(Kt(this,Qr),et),this}recordNamedDependency(g,et){return Kt(this,Lr).recordNamedDependency(Kt(this,Qr),et),this}recordOperation(g){return Kt(this,Lr).recordOperation(Kt(this,Qr),!0),this}recordShowTextOperation(g){return Kt(this,Lr).recordShowTextOperation(Kt(this,Qr),!0),this}bboxToClipBoxDropOperation(g){return Kt(this,Ll)||Kt(this,Lr).bboxToClipBoxDropOperation(Kt(this,Qr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Lr=new WeakMap,Qr=new WeakMap,Ll=new WeakMap,k1=new WeakMap,T1=new WeakMap;let CanvasNestedDependencyTracker=GC;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(it,g){if(!g)return;const et=g[2]-g[0],ot=g[3]-g[1],ct=new Path2D;ct.rect(g[0],g[1],et,ot),it.clip(ct)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let et;this._type==="axial"?et=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ot of this._colorStops)et.addColorStop(ot[0],ot[1]);return et}getPattern(g,et,ot,ct){let ut;if(ct===PathType.STROKE||ct===PathType.FILL){const dt=et.current.getClippedPathBoundingBox(ct,getCurrentTransform(g))||[0,0,0,0],ft=Math.ceil(dt[2]-dt[0])||1,St=Math.ceil(dt[3]-dt[1])||1,kt=et.cachedCanvases.getCanvas("pattern",ft,St),Tt=kt.context;Tt.clearRect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.beginPath(),Tt.rect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.translate(-dt[0],-dt[1]),ot=Util$1.transform(ot,[1,0,0,1,dt[0],dt[1]]),Tt.transform(...et.baseTransform),this.matrix&&Tt.transform(...this.matrix),applyBoundingBox(Tt,this._bbox),Tt.fillStyle=this._createGradient(Tt),Tt.fill(),ut=g.createPattern(kt.canvas,"no-repeat");const Rt=new DOMMatrix(ot);ut.setTransform(Rt)}else applyBoundingBox(g,this._bbox),ut=this._createGradient(g);return ut}}function drawTriangle(it,g,et,ot,ct,ut,dt,ft){const St=g.coords,kt=g.colors,Tt=it.data,Rt=it.width*4;let jt;St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ut,ut=dt,dt=jt),St[ot+1]>St[ct+1]&&(jt=ot,ot=ct,ct=jt,jt=dt,dt=ft,ft=jt),St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ut,ut=dt,dt=jt);const Ft=(St[et]+g.offsetX)*g.scaleX,$t=(St[et+1]+g.offsetY)*g.scaleY,zt=(St[ot]+g.offsetX)*g.scaleX,Ut=(St[ot+1]+g.offsetY)*g.scaleY,Bt=(St[ct]+g.offsetX)*g.scaleX,Ht=(St[ct+1]+g.offsetY)*g.scaleY;if($t>=Ht)return;const Jt=kt[ut],Zt=kt[ut+1],tn=kt[ut+2],nn=kt[dt],rn=kt[dt+1],on=kt[dt+2],pn=kt[ft],dn=kt[ft+1],hn=kt[ft+2],un=Math.round($t),En=Math.round(Ht);let wn,Sn,fn,xn,an,cn,bn,mn;for(let Tn=un;Tn<=En;Tn++){if(Tn<Ut){const Cn=Tn<$t?0:($t-Tn)/($t-Ut);wn=Ft-(Ft-zt)*Cn,Sn=Jt-(Jt-nn)*Cn,fn=Zt-(Zt-rn)*Cn,xn=tn-(tn-on)*Cn}else{let Cn;Tn>Ht?Cn=1:Ut===Ht?Cn=0:Cn=(Ut-Tn)/(Ut-Ht),wn=zt-(zt-Bt)*Cn,Sn=nn-(nn-pn)*Cn,fn=rn-(rn-dn)*Cn,xn=on-(on-hn)*Cn}let An;Tn<$t?An=0:Tn>Ht?An=1:An=($t-Tn)/($t-Ht),an=Ft-(Ft-Bt)*An,cn=Jt-(Jt-pn)*An,bn=Zt-(Zt-dn)*An,mn=tn-(tn-hn)*An;const Pn=Math.round(Math.min(wn,an)),Mn=Math.round(Math.max(wn,an));let Rn=Rt*Tn+Pn*4;for(let Cn=Pn;Cn<=Mn;Cn++)An=(wn-Cn)/(wn-an),An<0?An=0:An>1&&(An=1),Tt[Rn++]=Sn-(Sn-cn)*An|0,Tt[Rn++]=fn-(fn-bn)*An|0,Tt[Rn++]=xn-(xn-mn)*An|0,Tt[Rn++]=255}}function drawFigure(it,g,et){const ot=g.coords,ct=g.colors;let ut,dt;switch(g.type){case"lattice":const ft=g.verticesPerRow,St=Math.floor(ot.length/ft)-1,kt=ft-1;for(ut=0;ut<St;ut++){let Tt=ut*ft;for(let Rt=0;Rt<kt;Rt++,Tt++)drawTriangle(it,et,ot[Tt],ot[Tt+1],ot[Tt+ft],ct[Tt],ct[Tt+1],ct[Tt+ft]),drawTriangle(it,et,ot[Tt+ft+1],ot[Tt+1],ot[Tt+ft],ct[Tt+ft+1],ct[Tt+1],ct[Tt+ft])}break;case"triangles":for(ut=0,dt=ot.length;ut<dt;ut+=3)drawTriangle(it,et,ot[ut],ot[ut+1],ot[ut+2],ct[ut],ct[ut+1],ct[ut+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[6],this._background=g[7],this.matrix=null}_createMeshCanvas(g,et,ot){const ft=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),kt=Math.ceil(this._bounds[2])-ft,Tt=Math.ceil(this._bounds[3])-St,Rt=Math.min(Math.ceil(Math.abs(kt*g[0]*1.1)),3e3),jt=Math.min(Math.ceil(Math.abs(Tt*g[1]*1.1)),3e3),Ft=kt/Rt,$t=Tt/jt,zt={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-St,scaleX:1/Ft,scaleY:1/$t},Ut=Rt+2*2,Bt=jt+2*2,Ht=ot.getCanvas("mesh",Ut,Bt),Jt=Ht.context,Zt=Jt.createImageData(Rt,jt);if(et){const nn=Zt.data;for(let rn=0,on=nn.length;rn<on;rn+=4)nn[rn]=et[0],nn[rn+1]=et[1],nn[rn+2]=et[2],nn[rn+3]=255}for(const nn of this._figures)drawFigure(Zt,nn,zt);return Jt.putImageData(Zt,2,2),{canvas:Ht.canvas,offsetX:ft-2*Ft,offsetY:St-2*$t,scaleX:Ft,scaleY:$t}}isModifyingCurrentTransform(){return!0}getPattern(g,et,ot,ct){applyBoundingBox(g,this._bbox);const ut=new Float32Array(2);if(ct===PathType.SHADING)Util$1.singularValueDecompose2dScale(getCurrentTransform(g),ut);else if(this.matrix){Util$1.singularValueDecompose2dScale(this.matrix,ut);const[ft,St]=ut;Util$1.singularValueDecompose2dScale(et.baseTransform,ut),ut[0]*=ft,ut[1]*=St}else Util$1.singularValueDecompose2dScale(et.baseTransform,ut);const dt=this._createMeshCanvas(ut,ct===PathType.SHADING?null:this._background,et.cachedCanvases);return ct!==PathType.SHADING&&(g.setTransform(...et.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(dt.offsetX,dt.offsetY),g.scale(dt.scaleX,dt.scaleY),g.createPattern(dt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(it){switch(it[0]){case"RadialAxial":return new RadialAxialShadingPattern(it);case"Mesh":return new MeshShadingPattern(it);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${it[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},mT=class mT{constructor(g,et,ot,ct){this.color=g[1],this.operatorList=g[2],this.matrix=g[3],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.ctx=et,this.canvasGraphicsFactory=ot,this.baseTransform=ct}createPatternCanvas(g,et){var cn,bn;const{bbox:ot,operatorList:ct,paintType:ut,tilingType:dt,color:ft,canvasGraphicsFactory:St}=this;let{xstep:kt,ystep:Tt}=this;kt=Math.abs(kt),Tt=Math.abs(Tt),info("TilingType: "+dt);const Rt=ot[0],jt=ot[1],Ft=ot[2],$t=ot[3],zt=Ft-Rt,Ut=$t-jt,Bt=new Float32Array(2);Util$1.singularValueDecompose2dScale(this.matrix,Bt);const[Ht,Jt]=Bt;Util$1.singularValueDecompose2dScale(this.baseTransform,Bt);const Zt=Ht*Bt[0],tn=Jt*Bt[1];let nn=zt,rn=Ut,on=!1,pn=!1;const dn=Math.ceil(kt*Zt),hn=Math.ceil(Tt*tn),un=Math.ceil(zt*Zt),En=Math.ceil(Ut*tn);dn>=un?nn=kt:on=!0,hn>=En?rn=Tt:pn=!0;const wn=this.getSizeAndScale(nn,this.ctx.canvas.width,Zt),Sn=this.getSizeAndScale(rn,this.ctx.canvas.height,tn),fn=g.cachedCanvases.getCanvas("pattern",wn.size,Sn.size),xn=fn.context,an=St.createCanvasGraphics(xn,et);if(an.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(an,ut,ft),xn.translate(-wn.scale*Rt,-Sn.scale*jt),an.transform(0,wn.scale,0,0,Sn.scale,0,0),xn.save(),(cn=an.dependencyTracker)==null||cn.save(),this.clipBbox(an,Rt,jt,Ft,$t),an.baseTransform=getCurrentTransform(an.ctx),an.executeOperatorList(ct),an.endDrawing(),(bn=an.dependencyTracker)==null||bn.restore(),xn.restore(),on||pn){const mn=fn.canvas;on&&(nn=kt),pn&&(rn=Tt);const Tn=this.getSizeAndScale(nn,this.ctx.canvas.width,Zt),An=this.getSizeAndScale(rn,this.ctx.canvas.height,tn),Pn=Tn.size,Mn=An.size,Rn=g.cachedCanvases.getCanvas("pattern-workaround",Pn,Mn),Cn=Rn.context,On=on?Math.floor(zt/kt):0,In=pn?Math.floor(Ut/Tt):0;for(let Dn=0;Dn<=On;Dn++)for(let Fn=0;Fn<=In;Fn++)Cn.drawImage(mn,Pn*Dn,Mn*Fn,Pn,Mn,0,0,Pn,Mn);return{canvas:Rn.canvas,scaleX:Tn.scale,scaleY:An.scale,offsetX:Rt,offsetY:jt}}return{canvas:fn.canvas,scaleX:wn.scale,scaleY:Sn.scale,offsetX:Rt,offsetY:jt}}getSizeAndScale(g,et,ot){const ct=Math.max(mT.MAX_PATTERN_SIZE,et);let ut=Math.ceil(g*ot);return ut>=ct?ut=ct:ot=ut/g,{scale:ot,size:ut}}clipBbox(g,et,ot,ct,ut){const dt=ct-et,ft=ut-ot;g.ctx.rect(et,ot,dt,ft),Util$1.axialAlignedBoundingBox([et,ot,ct,ut],getCurrentTransform(g.ctx),g.current.minMax),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,et,ot){const ct=g.ctx,ut=g.current;switch(et){case PaintType.COLORED:const{fillStyle:dt,strokeStyle:ft}=this.ctx;ct.fillStyle=ut.fillColor=dt,ct.strokeStyle=ut.strokeColor=ft;break;case PaintType.UNCOLORED:ct.fillStyle=ct.strokeStyle=ot,ut.fillColor=ut.strokeColor=ot;break;default:throw new FormatError(`Unsupported paint type: ${et}`)}}isModifyingCurrentTransform(){return!1}getPattern(g,et,ot,ct,ut){let dt=ot;ct!==PathType.SHADING&&(dt=Util$1.transform(dt,et.baseTransform),this.matrix&&(dt=Util$1.transform(dt,this.matrix)));const ft=this.createPatternCanvas(et,ut);let St=new DOMMatrix(dt);St=St.translate(ft.offsetX,ft.offsetY),St=St.scale(1/ft.scaleX,1/ft.scaleY);const kt=g.createPattern(ft.canvas,"repeat");return kt.setTransform(St),kt}};qn(mT,"MAX_PATTERN_SIZE",3e3);let TilingPattern=mT;function convertBlackAndWhiteToRGBA({src:it,srcPos:g=0,dest:et,width:ot,height:ct,nonBlackColor:ut=4294967295,inverseDecode:dt=!1}){const ft=util_FeatureTest.isLittleEndian?4278190080:255,[St,kt]=dt?[ut,ft]:[ft,ut],Tt=ot>>3,Rt=ot&7,jt=it.length;et=new Uint32Array(et.buffer);let Ft=0;for(let $t=0;$t<ct;$t++){for(const Ut=g+Tt;g<Ut;g++){const Bt=g<jt?it[g]:255;et[Ft++]=Bt&128?kt:St,et[Ft++]=Bt&64?kt:St,et[Ft++]=Bt&32?kt:St,et[Ft++]=Bt&16?kt:St,et[Ft++]=Bt&8?kt:St,et[Ft++]=Bt&4?kt:St,et[Ft++]=Bt&2?kt:St,et[Ft++]=Bt&1?kt:St}if(Rt===0)continue;const zt=g<jt?it[g++]:255;for(let Ut=0;Ut<Rt;Ut++)et[Ft++]=zt&1<<7-Ut?kt:St}return{srcPos:g,destPos:Ft}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(it,g){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){g.save(),this.__originalSave()},it.restore=function(){g.restore(),this.__originalRestore()},it.translate=function(et,ot){g.translate(et,ot),this.__originalTranslate(et,ot)},it.scale=function(et,ot){g.scale(et,ot),this.__originalScale(et,ot)},it.transform=function(et,ot,ct,ut,dt,ft){g.transform(et,ot,ct,ut,dt,ft),this.__originalTransform(et,ot,ct,ut,dt,ft)},it.setTransform=function(et,ot,ct,ut,dt,ft){g.setTransform(et,ot,ct,ut,dt,ft),this.__originalSetTransform(et,ot,ct,ut,dt,ft)},it.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},it.rotate=function(et){g.rotate(et),this.__originalRotate(et)},it.clip=function(et){g.clip(et),this.__originalClip(et)},it.moveTo=function(et,ot){g.moveTo(et,ot),this.__originalMoveTo(et,ot)},it.lineTo=function(et,ot){g.lineTo(et,ot),this.__originalLineTo(et,ot)},it.bezierCurveTo=function(et,ot,ct,ut,dt,ft){g.bezierCurveTo(et,ot,ct,ut,dt,ft),this.__originalBezierCurveTo(et,ot,ct,ut,dt,ft)},it.rect=function(et,ot,ct,ut){g.rect(et,ot,ct,ut),this.__originalRect(et,ot,ct,ut)},it.closePath=function(){g.closePath(),this.__originalClosePath()},it.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,et,ot){let ct;return this.cache[g]!==void 0?(ct=this.cache[g],this.canvasFactory.reset(ct,et,ot)):(ct=this.canvasFactory.create(et,ot),this.cache[g]=ct),ct}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const et=this.cache[g];this.canvasFactory.destroy(et),delete this.cache[g]}}}function drawImageAtIntegerCoords(it,g,et,ot,ct,ut,dt,ft,St,kt){const[Tt,Rt,jt,Ft,$t,zt]=getCurrentTransform(it);if(Rt===0&&jt===0){const Ht=dt*Tt+$t,Jt=Math.round(Ht),Zt=ft*Ft+zt,tn=Math.round(Zt),nn=(dt+St)*Tt+$t,rn=Math.abs(Math.round(nn)-Jt)||1,on=(ft+kt)*Ft+zt,pn=Math.abs(Math.round(on)-tn)||1;return it.setTransform(Math.sign(Tt),0,0,Math.sign(Ft),Jt,tn),it.drawImage(g,et,ot,ct,ut,0,0,rn,pn),it.setTransform(Tt,Rt,jt,Ft,$t,zt),[rn,pn]}if(Tt===0&&Ft===0){const Ht=ft*jt+$t,Jt=Math.round(Ht),Zt=dt*Rt+zt,tn=Math.round(Zt),nn=(ft+kt)*jt+$t,rn=Math.abs(Math.round(nn)-Jt)||1,on=(dt+St)*Rt+zt,pn=Math.abs(Math.round(on)-tn)||1;return it.setTransform(0,Math.sign(Rt),Math.sign(jt),0,Jt,tn),it.drawImage(g,et,ot,ct,ut,0,0,pn,rn),it.setTransform(Tt,Rt,jt,Ft,$t,zt),[pn,rn]}it.drawImage(g,et,ot,ct,ut,dt,ft,St,kt);const Ut=Math.hypot(Tt,Rt),Bt=Math.hypot(jt,Ft);return[Ut*St,Bt*kt]}class CanvasExtraState{constructor(g,et,ot){qn(this,"alphaIsShape",!1);qn(this,"fontSize",0);qn(this,"fontSizeScale",1);qn(this,"textMatrix",null);qn(this,"textMatrixScale",1);qn(this,"fontMatrix",FONT_IDENTITY_MATRIX);qn(this,"leading",0);qn(this,"x",0);qn(this,"y",0);qn(this,"lineX",0);qn(this,"lineY",0);qn(this,"charSpacing",0);qn(this,"wordSpacing",0);qn(this,"textHScale",1);qn(this,"textRenderingMode",TextRenderingMode.FILL);qn(this,"textRise",0);qn(this,"fillColor","#000000");qn(this,"strokeColor","#000000");qn(this,"patternFill",!1);qn(this,"patternStroke",!1);qn(this,"fillAlpha",1);qn(this,"strokeAlpha",1);qn(this,"lineWidth",1);qn(this,"activeSMask",null);qn(this,"transferMaps","none");ot==null||ot(this),this.clipBox=new Float32Array([0,0,g,et]),this.minMax=MIN_MAX_INIT.slice()}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g.minMax=this.minMax.slice(),g}getPathBoundingBox(g=PathType.FILL,et=null){const ot=this.minMax.slice();if(g===PathType.STROKE){et||unreachable("Stroke bounding box must include transform."),Util$1.singularValueDecompose2dScale(et,XY);const ct=XY[0]*this.lineWidth/2,ut=XY[1]*this.lineWidth/2;ot[0]-=ct,ot[1]-=ut,ot[2]+=ct,ot[3]+=ut}return ot}updateClipFromPath(){const g=Util$1.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(g){this.clipBox.set(g,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(g=PathType.FILL,et=null){return Util$1.intersect(this.clipBox,this.getPathBoundingBox(g,et))}}function putBinaryImageData(it,g){if(g instanceof ImageData){it.putImageData(g,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0,kt;const Tt=g.data,Rt=ft.data;let jt,Ft,$t,zt;if(g.kind===util_ImageKind.GRAYSCALE_1BPP){const Ut=Tt.byteLength,Bt=new Uint32Array(Rt.buffer,0,Rt.byteLength>>2),Ht=Bt.length,Jt=ot+7>>3,Zt=4294967295,tn=util_FeatureTest.isLittleEndian?4278190080:255;for(jt=0;jt<dt;jt++){for($t=jt<ut?FULL_CHUNK_HEIGHT:ct,kt=0,Ft=0;Ft<$t;Ft++){const nn=Ut-St;let rn=0;const on=nn>Jt?ot:nn*8-7,pn=on&-8;let dn=0,hn=0;for(;rn<pn;rn+=8)hn=Tt[St++],Bt[kt++]=hn&128?Zt:tn,Bt[kt++]=hn&64?Zt:tn,Bt[kt++]=hn&32?Zt:tn,Bt[kt++]=hn&16?Zt:tn,Bt[kt++]=hn&8?Zt:tn,Bt[kt++]=hn&4?Zt:tn,Bt[kt++]=hn&2?Zt:tn,Bt[kt++]=hn&1?Zt:tn;for(;rn<on;rn++)dn===0&&(hn=Tt[St++],dn=128),Bt[kt++]=hn&dn?Zt:tn,dn>>=1}for(;kt<Ht;)Bt[kt++]=0;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}}else if(g.kind===util_ImageKind.RGBA_32BPP){for(Ft=0,zt=ot*FULL_CHUNK_HEIGHT*4,jt=0;jt<ut;jt++)Rt.set(Tt.subarray(St,St+zt)),St+=zt,it.putImageData(ft,0,Ft),Ft+=FULL_CHUNK_HEIGHT;jt<dt&&(zt=ot*ct*4,Rt.set(Tt.subarray(St,St+zt)),it.putImageData(ft,0,Ft))}else if(g.kind===util_ImageKind.RGB_24BPP)for($t=FULL_CHUNK_HEIGHT,zt=ot*$t,jt=0;jt<dt;jt++){for(jt>=ut&&($t=ct,zt=ot*$t),kt=0,Ft=zt;Ft--;)Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=255;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${g.kind}`)}function putBinaryImageMask(it,g){if(g.bitmap){it.drawImage(g.bitmap,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0;const kt=g.data,Tt=ft.data;for(let Rt=0;Rt<dt;Rt++){const jt=Rt<ut?FULL_CHUNK_HEIGHT:ct;({srcPos:St}=convertBlackAndWhiteToRGBA({src:kt,srcPos:St,dest:Tt,width:ot,height:jt,nonBlackColor:0})),it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}}function copyCtxState(it,g){const et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ot of et)it[ot]!==void 0&&(g[ot]=it[ot]);it.setLineDash!==void 0&&(g.setLineDash(it.getLineDash()),g.lineDashOffset=it.lineDashOffset)}function resetCtxToDefault(it){it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0);const{filter:g}=it;g!=="none"&&g!==""&&(it.filter="none")}function getImageSmoothingEnabled(it,g){if(g)return!0;Util$1.singularValueDecompose2dScale(it,XY);const et=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=et&&XY[1]<=et}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var wE,iC,kE,sC,TE,oC;const WC=class WC{constructor(g,et,ot,ct,ut,{optionalContentConfig:dt,markedContentStack:ft=null},St,kt,Tt){yn(this,wE);yn(this,kE);yn(this,TE);this.ctx=g,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=et,this.objs=ot,this.canvasFactory=ct,this.filterFactory=ut,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ft||[],this.optionalContentConfig=dt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=St,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Tt??null}getObject(g,et,ot=null){var ct;return typeof et=="string"?((ct=this.dependencyTracker)==null||ct.recordNamedDependency(g,et),et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et)):ot}beginDrawing({transform:g,viewport:et,transparency:ot=!1,background:ct=null}){const ut=this.ctx.canvas.width,dt=this.ctx.canvas.height,ft=this.ctx.fillStyle;if(this.ctx.fillStyle=ct||"#ffffff",this.ctx.fillRect(0,0,ut,dt),this.ctx.fillStyle=ft,ot){const St=this.cachedCanvases.getCanvas("transparent",ut,dt);this.compositeCtx=this.ctx,this.transparentCanvas=St.canvas,this.ctx=St.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...et.transform),this.viewportScale=et.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(g,et,ot,ct,ut){var Bt;const dt=g.argsArray,ft=g.fnArray;let St=et||0;const kt=dt.length;if(kt===St)return St;const Tt=kt-St>EXECUTION_STEPS&&typeof ot=="function",Rt=Tt?Date.now()+EXECUTION_TIME:0;let jt=0;const Ft=this.commonObjs,$t=this.objs;let zt,Ut;for(;;){if(ct!==void 0&&St===ct.nextBreakPoint)return ct.breakIt(St,ot),St;if(!ut||ut(St))if(zt=ft[St],Ut=dt[St]??null,zt!==OPS.dependency)Ut===null?this[zt](St):this[zt](St,...Ut);else for(const Ht of Ut){(Bt=this.dependencyTracker)==null||Bt.recordNamedData(Ht,St);const Jt=Ht.startsWith("g_")?Ft:$t;if(!Jt.has(Ht))return Jt.get(Ht,ot),St}if(St++,St===kt)return St;if(Tt&&++jt>EXECUTION_STEPS){if(Date.now()>Rt)return ot(),St;jt=0}}}endDrawing(){_n(this,wE,iC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const et of g.values())typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&(et.width=et.height=0);g.clear()}this._cachedBitmapsMap.clear(),_n(this,kE,sC).call(this)}_scaleImage(g,et){const ot=g.width??g.displayWidth,ct=g.height??g.displayHeight;let ut=Math.max(Math.hypot(et[0],et[1]),1),dt=Math.max(Math.hypot(et[2],et[3]),1),ft=ot,St=ct,kt="prescale1",Tt,Rt;for(;ut>2&&ft>1||dt>2&&St>1;){let jt=ft,Ft=St;ut>2&&ft>1&&(jt=ft>=16384?Math.floor(ft/2)-1||1:Math.ceil(ft/2),ut/=ft/jt),dt>2&&St>1&&(Ft=St>=16384?Math.floor(St/2)-1||1:Math.ceil(St)/2,dt/=St/Ft),Tt=this.cachedCanvases.getCanvas(kt,jt,Ft),Rt=Tt.context,Rt.clearRect(0,0,jt,Ft),Rt.drawImage(g,0,0,ft,St,0,0,jt,Ft),g=Tt.canvas,ft=jt,St=Ft,kt=kt==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ft,paintHeight:St}}_createMaskCanvas(g,et){var dn,hn;const ot=this.ctx,{width:ct,height:ut}=et,dt=this.current.fillColor,ft=this.current.patternFill,St=getCurrentTransform(ot);let kt,Tt,Rt,jt;if((et.bitmap||et.data)&&et.count>1){const un=et.bitmap||et.data.buffer;Tt=JSON.stringify(ft?St:[St.slice(0,4),dt]),kt=this._cachedBitmapsMap.get(un),kt||(kt=new Map,this._cachedBitmapsMap.set(un,kt));const En=kt.get(Tt);if(En&&!ft){const wn=Math.round(Math.min(St[0],St[2])+St[4]),Sn=Math.round(Math.min(St[1],St[3])+St[5]);return(dn=this.dependencyTracker)==null||dn.recordDependencies(g,Dependencies.transformAndFill),{canvas:En,offsetX:wn,offsetY:Sn}}Rt=En}Rt||(jt=this.cachedCanvases.getCanvas("maskCanvas",ct,ut),putBinaryImageMask(jt.context,et));let Ft=Util$1.transform(St,[1/ct,0,0,-1/ut,0,0]);Ft=Util$1.transform(Ft,[1,0,0,1,0,-ut]);const $t=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ct,ut],Ft,$t);const[zt,Ut,Bt,Ht]=$t,Jt=Math.round(Bt-zt)||1,Zt=Math.round(Ht-Ut)||1,tn=this.cachedCanvases.getCanvas("fillCanvas",Jt,Zt),nn=tn.context,rn=zt,on=Ut;nn.translate(-rn,-on),nn.transform(...Ft),Rt||(Rt=this._scaleImage(jt.canvas,getCurrentTransformInverse(nn)),Rt=Rt.img,kt&&ft&&kt.set(Tt,Rt)),nn.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(nn),et.interpolate),drawImageAtIntegerCoords(nn,Rt,0,0,Rt.width,Rt.height,0,0,ct,ut),nn.globalCompositeOperation="source-in";const pn=Util$1.transform(getCurrentTransformInverse(nn),[1,0,0,1,-rn,-on]);return nn.fillStyle=ft?dt.getPattern(ot,this,pn,PathType.FILL,g):dt,nn.fillRect(0,0,ct,ut),kt&&!ft&&(this.cachedCanvases.delete("fillCanvas"),kt.set(Tt,tn.canvas)),(hn=this.dependencyTracker)==null||hn.recordDependencies(g,Dependencies.transformAndFill),{canvas:tn.canvas,offsetX:Math.round(rn),offsetY:Math.round(on)}}setLineWidth(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineWidth",g),et!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=et,this.ctx.lineWidth=et}setLineCap(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineCap",g),this.ctx.lineCap=LINE_CAP_STYLES[et]}setLineJoin(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineJoin",g),this.ctx.lineJoin=LINE_JOIN_STYLES[et]}setMiterLimit(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("miterLimit",g),this.ctx.miterLimit=et}setDash(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.recordSimpleData("dash",g);const ct=this.ctx;ct.setLineDash!==void 0&&(ct.setLineDash(et),ct.lineDashOffset=ot)}setRenderingIntent(g,et){}setFlatness(g,et){}setGState(g,et){var ot,ct,ut,dt,ft;for(const[St,kt]of et)switch(St){case"LW":this.setLineWidth(g,kt);break;case"LC":this.setLineCap(g,kt);break;case"LJ":this.setLineJoin(g,kt);break;case"ML":this.setMiterLimit(g,kt);break;case"D":this.setDash(g,kt[0],kt[1]);break;case"RI":this.setRenderingIntent(g,kt);break;case"FL":this.setFlatness(g,kt);break;case"Font":this.setFont(g,kt[0],kt[1]);break;case"CA":(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeAlpha",g),this.current.strokeAlpha=kt;break;case"ca":(ct=this.dependencyTracker)==null||ct.recordSimpleData("fillAlpha",g),this.ctx.globalAlpha=this.current.fillAlpha=kt;break;case"BM":(ut=this.dependencyTracker)==null||ut.recordSimpleData("globalCompositeOperation",g),this.ctx.globalCompositeOperation=kt;break;case"SMask":(dt=this.dependencyTracker)==null||dt.recordSimpleData("SMask",g),this.current.activeSMask=kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(ft=this.dependencyTracker)==null||ft.recordSimpleData("filter",g),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(g){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const et=this.ctx.canvas.width,ot=this.ctx.canvas.height,ct="smaskGroupAt"+this.groupLevel,ut=this.cachedCanvases.getCanvas(ct,et,ot);this.suspendedCtx=this.ctx;const dt=this.ctx=ut.context;dt.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,dt),mirrorContextOperations(dt,this.suspendedCtx),this.setGState(g,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const et=this.current.activeSMask,ot=this.suspendedCtx;this.composeSMask(ot,et,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(g,et,ot,ct){const ut=ct[0],dt=ct[1],ft=ct[2]-ut,St=ct[3]-dt;ft===0||St===0||(this.genericComposeSMask(et.context,ot,ft,St,et.subtype,et.backdrop,et.transferMap,ut,dt,et.offsetX,et.offsetY),g.save(),g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),g.drawImage(ot.canvas,0,0),g.restore())}genericComposeSMask(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt){let jt=g.canvas,Ft=St-Tt,$t=kt-Rt;if(dt)if(Ft<0||$t<0||Ft+ot>jt.width||$t+ct>jt.height){const Ut=this.cachedCanvases.getCanvas("maskExtension",ot,ct),Bt=Ut.context;Bt.drawImage(jt,-Ft,-$t),Bt.globalCompositeOperation="destination-atop",Bt.fillStyle=dt,Bt.fillRect(0,0,ot,ct),Bt.globalCompositeOperation="source-over",jt=Ut.canvas,Ft=$t=0}else{g.save(),g.globalAlpha=1,g.setTransform(1,0,0,1,0,0);const Ut=new Path2D;Ut.rect(Ft,$t,ot,ct),g.clip(Ut),g.globalCompositeOperation="destination-atop",g.fillStyle=dt,g.fillRect(Ft,$t,ot,ct),g.restore()}et.save(),et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),ut==="Alpha"&&ft?et.filter=this.filterFactory.addAlphaFilter(ft):ut==="Luminosity"&&(et.filter=this.filterFactory.addLuminosityFilter(ft));const zt=new Path2D;zt.rect(St,kt,ot,ct),et.clip(zt),et.globalCompositeOperation="destination-in",et.drawImage(jt,Ft,$t,ot,ct,St,kt,ot,ct),et.restore()}save(g){var ot;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const et=this.current;this.stateStack.push(et),this.current=et.clone(),(ot=this.dependencyTracker)==null||ot.save(g)}restore(g){var et;if((et=this.dependencyTracker)==null||et.restore(g),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(g,et,ot,ct,ut,dt,ft){var St;(St=this.dependencyTracker)==null||St.recordIncrementalData("transform",g),this.ctx.transform(et,ot,ct,ut,dt,ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,et,ot,ct){let[ut]=ot;if(!ct){ut||(ut=ot[0]=new Path2D),this[et](g,ut);return}if(this.dependencyTracker!==null){const dt=et===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(g).recordBBox(g,this.ctx,ct[0]-dt,ct[2]+dt,ct[1]-dt,ct[3]+dt).recordDependencies(g,["transform"])}if(!(ut instanceof Path2D)){const dt=ot[0]=new Path2D;for(let ft=0,St=ut.length;ft<St;)switch(ut[ft++]){case DrawOPS.moveTo:dt.moveTo(ut[ft++],ut[ft++]);break;case DrawOPS.lineTo:dt.lineTo(ut[ft++],ut[ft++]);break;case DrawOPS.curveTo:dt.bezierCurveTo(ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++]);break;case DrawOPS.closePath:dt.closePath();break;default:warn(`Unrecognized drawing path operator: ${ut[ft-1]}`);break}ut=dt}Util$1.axialAlignedBoundingBox(ct,getCurrentTransform(this.ctx),this.current.minMax),this[et](g,ut),this._pathStartIdx=g}closePath(g){this.ctx.closePath()}stroke(g,et,ot=!0){var dt;const ct=this.ctx,ut=this.current.strokeColor;if(ct.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ut=="object"&&(ut!=null&&ut.getPattern)){const ft=ut.isModifyingCurrentTransform()?ct.getTransform():null;if(ct.save(),ct.strokeStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.STROKE,g),ft){const St=new Path2D;St.addPath(et,ct.getTransform().invertSelf().multiplySelf(ft)),et=St}this.rescaleAndStroke(et,!1),ct.restore()}else this.rescaleAndStroke(et,!0);(dt=this.dependencyTracker)==null||dt.recordDependencies(g,Dependencies.stroke),ot&&this.consumePath(g,et,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ct.globalAlpha=this.current.fillAlpha}closeStroke(g,et){this.stroke(g,et)}fill(g,et,ot=!0){var kt,Tt,Rt;const ct=this.ctx,ut=this.current.fillColor,dt=this.current.patternFill;let ft=!1;if(dt){const jt=ut.isModifyingCurrentTransform()?ct.getTransform():null;if((kt=this.dependencyTracker)==null||kt.save(g),ct.save(),ct.fillStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.FILL,g),jt){const Ft=new Path2D;Ft.addPath(et,ct.getTransform().invertSelf().multiplySelf(jt)),et=Ft}ft=!0}const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ct.fill(et,"evenodd"),this.pendingEOFill=!1):ct.fill(et)),(Tt=this.dependencyTracker)==null||Tt.recordDependencies(g,Dependencies.fill),ft&&(ct.restore(),(Rt=this.dependencyTracker)==null||Rt.restore(g)),ot&&this.consumePath(g,et,St)}eoFill(g,et){this.pendingEOFill=!0,this.fill(g,et)}fillStroke(g,et){this.fill(g,et,!1),this.stroke(g,et,!1),this.consumePath(g,et)}eoFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}closeFillStroke(g,et){this.fillStroke(g,et)}closeEOFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}endPath(g,et){this.consumePath(g,et)}rawFillPath(g,et){var ot;this.ctx.fill(et),(ot=this.dependencyTracker)==null||ot.recordDependencies(g,Dependencies.rawFillPath).recordOperation(g)}clip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=NORMAL_CLIP}eoClip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=EO_CLIP}beginText(g){var et;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(et=this.dependencyTracker)==null||et.recordOpenMarker(g).resetIncrementalData("sameLineText").resetIncrementalData("moveText",g)}endText(g){const et=this.pendingTextPaths,ot=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ct}=this;et!==void 0&&ct.recordFutureForcedDependency("textClip",ct.getOpenMarker()).recordFutureForcedDependency("textClip",g),ct.recordCloseMarker(g)}if(et!==void 0){const ct=new Path2D,ut=ot.getTransform().invertSelf();for(const{transform:dt,x:ft,y:St,fontSize:kt,path:Tt}of et)Tt&&ct.addPath(Tt,new DOMMatrix(dt).preMultiplySelf(ut).translate(ft,St).scale(kt,-kt));ot.clip(ct)}delete this.pendingTextPaths}setCharSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("charSpacing",g),this.current.charSpacing=et}setWordSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("wordSpacing",g),this.current.wordSpacing=et}setHScale(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("hScale",g),this.current.textHScale=et/100}setLeading(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("leading",g),this.current.leading=-et}setFont(g,et,ot){var Rt,jt;(Rt=this.dependencyTracker)==null||Rt.recordSimpleData("font",g).recordSimpleDataFromNamed("fontObj",et,g);const ct=this.commonObjs.get(et),ut=this.current;if(!ct)throw new Error(`Can't find font for ${et}`);if(ut.fontMatrix=ct.fontMatrix||FONT_IDENTITY_MATRIX,(ut.fontMatrix[0]===0||ut.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+et),ot<0?(ot=-ot,ut.fontDirection=-1):ut.fontDirection=1,this.current.font=ct,this.current.fontSize=ot,ct.isType3Font)return;const dt=ct.loadedName||"sans-serif",ft=((jt=ct.systemFontInfo)==null?void 0:jt.css)||`"${dt}", ${ct.fallbackName}`;let St="normal";ct.black?St="900":ct.bold&&(St="bold");const kt=ct.italic?"italic":"normal";let Tt=ot;ot<MIN_FONT_SIZE?Tt=MIN_FONT_SIZE:ot>MAX_FONT_SIZE&&(Tt=MAX_FONT_SIZE),this.current.fontSizeScale=ot/Tt,this.ctx.font=`${kt} ${St} ${Tt}px ${ft}`}setTextRenderingMode(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRenderingMode",g),this.current.textRenderingMode=et}setTextRise(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRise",g),this.current.textRise=et}moveText(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.resetIncrementalData("sameLineText").recordIncrementalData("moveText",g),this.current.x=this.current.lineX+=et,this.current.y=this.current.lineY+=ot}setLeadingMoveText(g,et,ot){this.setLeading(g,-ot),this.moveText(g,et,ot)}setTextMatrix(g,et){var ct;(ct=this.dependencyTracker)==null||ct.recordSimpleData("textMatrix",g);const{current:ot}=this;ot.textMatrix=et,ot.textMatrixScale=Math.hypot(et[0],et[1]),ot.x=ot.lineX=0,ot.y=ot.lineY=0}nextLine(g){var et;this.moveText(g,0,this.current.leading),(et=this.dependencyTracker)==null||et.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??g)}paintChar(g,et,ot,ct,ut,dt){var Bt,Ht,Jt,Zt;const ft=this.ctx,St=this.current,kt=St.font,Tt=St.textRenderingMode,Rt=St.fontSize/St.fontSizeScale,jt=Tt&TextRenderingMode.FILL_STROKE_MASK,Ft=!!(Tt&TextRenderingMode.ADD_TO_PATH_FLAG),$t=St.patternFill&&!kt.missingFile,zt=St.patternStroke&&!kt.missingFile;let Ut;if((kt.disableFontFace||Ft||$t||zt)&&!kt.missingFile&&(Ut=kt.getPathGenerator(this.commonObjs,et)),Ut&&(kt.disableFontFace||$t||zt)){ft.save(),ft.translate(ot,ct),ft.scale(Rt,-Rt),(Bt=this.dependencyTracker)==null||Bt.recordCharacterBBox(g,ft,kt);let tn;if(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)if(ut){tn=ft.getTransform(),ft.setTransform(...ut);const nn=_n(this,TE,oC).call(this,Ut,tn,ut);ft.fill(nn)}else ft.fill(Ut);if(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)if(dt){tn||(tn=ft.getTransform()),ft.setTransform(...dt);const{a:nn,b:rn,c:on,d:pn}=tn,dn=Util$1.inverseTransform(dt),hn=Util$1.transform([nn,rn,on,pn,0,0],dn);Util$1.singularValueDecompose2dScale(hn,XY),ft.lineWidth*=Math.max(XY[0],XY[1])/Rt,ft.stroke(_n(this,TE,oC).call(this,Ut,tn,dt))}else ft.lineWidth/=Rt,ft.stroke(Ut);ft.restore()}else(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)&&(ft.fillText(et,ot,ct),(Ht=this.dependencyTracker)==null||Ht.recordCharacterBBox(g,ft,kt,Rt,ot,ct,()=>ft.measureText(et))),(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((Jt=this.dependencyTracker)==null||Jt.recordCharacterBBox(g,ft,kt,Rt,ot,ct,()=>ft.measureText(et)).recordDependencies(g,Dependencies.stroke)),ft.strokeText(et,ot,ct));Ft&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ft),x:ot,y:ct,fontSize:Rt,path:Ut}),(Zt=this.dependencyTracker)==null||Zt.recordCharacterBBox(g,ft,kt,Rt,ot,ct))}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const et=g.getImageData(0,0,10,10).data;let ot=!1;for(let ct=3;ct<et.length;ct+=4)if(et[ct]>0&&et[ct]<255){ot=!0;break}return shadow(this,"isFontSubpixelAAEnabled",ot)}showText(g,et){var on,pn,dn,hn;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(g,Dependencies.showText).resetBBox(g),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",g).inheritPendingDependenciesAsFutureForcedDependencies());const ot=this.current,ct=ot.font;if(ct.isType3Font){this.showType3Text(g,et),(on=this.dependencyTracker)==null||on.recordShowTextOperation(g);return}const ut=ot.fontSize;if(ut===0){(pn=this.dependencyTracker)==null||pn.recordOperation(g);return}const dt=this.ctx,ft=ot.fontSizeScale,St=ot.charSpacing,kt=ot.wordSpacing,Tt=ot.fontDirection,Rt=ot.textHScale*Tt,jt=et.length,Ft=ct.vertical,$t=Ft?1:-1,zt=ct.defaultVMetrics,Ut=ut*ot.fontMatrix[0],Bt=ot.textRenderingMode===TextRenderingMode.FILL&&!ct.disableFontFace&&!ot.patternFill;dt.save(),ot.textMatrix&&dt.transform(...ot.textMatrix),dt.translate(ot.x,ot.y+ot.textRise),Tt>0?dt.scale(Rt,-1):dt.scale(Rt,1);let Ht,Jt;if(ot.patternFill){dt.save();const un=ot.fillColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.FILL,g);Ht=getCurrentTransform(dt),dt.restore(),dt.fillStyle=un}if(ot.patternStroke){dt.save();const un=ot.strokeColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.STROKE,g);Jt=getCurrentTransform(dt),dt.restore(),dt.strokeStyle=un}let Zt=ot.lineWidth;const tn=ot.textMatrixScale;if(tn===0||Zt===0){const un=ot.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(un===TextRenderingMode.STROKE||un===TextRenderingMode.FILL_STROKE)&&(Zt=this.getSinglePixelWidth())}else Zt/=tn;if(ft!==1&&(dt.scale(ft,ft),Zt/=ft),dt.lineWidth=Zt,ct.isInvalidPDFjsFont){const un=[];let En=0;for(const Sn of et)un.push(Sn.unicode),En+=Sn.width;const wn=un.join("");if(dt.fillText(wn,0,0),this.dependencyTracker!==null){const Sn=dt.measureText(wn);this.dependencyTracker.recordBBox(g,this.ctx,-Sn.actualBoundingBoxLeft,Sn.actualBoundingBoxRight,-Sn.actualBoundingBoxAscent,Sn.actualBoundingBoxDescent).recordShowTextOperation(g)}ot.x+=En*Ut*Rt,dt.restore(),this.compose();return}let nn=0,rn;for(rn=0;rn<jt;++rn){const un=et[rn];if(typeof un=="number"){nn+=$t*un*ut/1e3;continue}let En=!1;const wn=(un.isSpace?kt:0)+St,Sn=un.fontChar,fn=un.accent;let xn,an,cn=un.width;if(Ft){const Tn=un.vmetric||zt,An=-(un.vmetric?Tn[1]:cn*.5)*Ut,Pn=Tn[2]*Ut;cn=Tn?-Tn[0]:cn,xn=An/ft,an=(nn+Pn)/ft}else xn=nn/ft,an=0;let bn;if(ct.remeasure&&cn>0){bn=dt.measureText(Sn);const Tn=bn.width*1e3/ut*ft;if(cn<Tn&&this.isFontSubpixelAAEnabled){const An=cn/Tn;En=!0,dt.save(),dt.scale(An,1),xn/=An}else cn!==Tn&&(xn+=(cn-Tn)/2e3*ut/ft)}if(this.contentVisible&&(un.isInFont||ct.missingFile)){if(Bt&&!fn)dt.fillText(Sn,xn,an),(dn=this.dependencyTracker)==null||dn.recordCharacterBBox(g,dt,bn?{bbox:null}:ct,ut/ft,xn,an,()=>bn??dt.measureText(Sn));else if(this.paintChar(g,Sn,xn,an,Ht,Jt),fn){const Tn=xn+ut*fn.offset.x/ft,An=an-ut*fn.offset.y/ft;this.paintChar(g,fn.fontChar,Tn,An,Ht,Jt)}}const mn=Ft?cn*Ut-wn*Tt:cn*Ut+wn*Tt;nn+=mn,En&&dt.restore()}Ft?ot.y-=nn:ot.x+=nn*Rt,dt.restore(),this.compose(),(hn=this.dependencyTracker)==null||hn.recordShowTextOperation(g)}showType3Text(g,et){const ot=this.ctx,ct=this.current,ut=ct.font,dt=ct.fontSize,ft=ct.fontDirection,St=ut.vertical?1:-1,kt=ct.charSpacing,Tt=ct.wordSpacing,Rt=ct.textHScale*ft,jt=ct.fontMatrix||FONT_IDENTITY_MATRIX,Ft=et.length,$t=ct.textRenderingMode===TextRenderingMode.INVISIBLE;let zt,Ut,Bt,Ht;if($t||dt===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ot.save(),ct.textMatrix&&ot.transform(...ct.textMatrix),ot.translate(ct.x,ct.y+ct.textRise),ot.scale(Rt,ft);const Jt=this.dependencyTracker;for(this.dependencyTracker=Jt?new CanvasNestedDependencyTracker(Jt,g):null,zt=0;zt<Ft;++zt){if(Ut=et[zt],typeof Ut=="number"){Ht=St*Ut*dt/1e3,this.ctx.translate(Ht,0),ct.x+=Ht*Rt;continue}const Zt=(Ut.isSpace?Tt:0)+kt,tn=ut.charProcOperatorList[Ut.operatorListId];tn?this.contentVisible&&(this.save(),ot.scale(dt,dt),ot.transform(...jt),this.executeOperatorList(tn),this.restore()):warn(`Type3 character "${Ut.operatorListId}" is not available.`);const nn=[Ut.width,0];Util$1.applyTransform(nn,jt),Bt=nn[0]*dt+Zt,ot.translate(Bt,0),ct.x+=Bt*Rt}ot.restore(),Jt&&(this.dependencyTracker=Jt)}setCharWidth(g,et,ot){}setCharWidthAndBounds(g,et,ot,ct,ut,dt,ft){var kt;const St=new Path2D;St.rect(ct,ut,dt-ct,ft-ut),this.ctx.clip(St),(kt=this.dependencyTracker)==null||kt.recordBBox(g,this.ctx,ct,dt,ut,ft).recordClipBox(g,this.ctx,ct,dt,ut,ft),this.endPath(g)}getColorN_Pattern(g,et){let ot;if(et[0]==="TilingPattern"){const ct=this.baseTransform||getCurrentTransform(this.ctx),ut={createCanvasGraphics:(dt,ft)=>new WC(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,ft,!0):null)};ot=new TilingPattern(et,this.ctx,ut,ct)}else ot=this._getPattern(g,et[1],et[2]);return ot}setStrokeColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.current.strokeColor=this.getColorN_Pattern(g,et),this.current.patternStroke=!0}setFillColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.current.fillColor=this.getColorN_Pattern(g,et),this.current.patternFill=!0}setStrokeRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor=et,this.current.patternStroke=!1}setStrokeTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor=et,this.current.patternFill=!1}setFillTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(g,et,ot=null){let ct;return this.cachedPatterns.has(et)?ct=this.cachedPatterns.get(et):(ct=getShadingPattern(this.getObject(g,et)),this.cachedPatterns.set(et,ct)),ot&&(ct.matrix=ot),ct}shadingFill(g,et){var dt;if(!this.contentVisible)return;const ot=this.ctx;this.save(g);const ct=this._getPattern(g,et);ot.fillStyle=ct.getPattern(ot,this,getCurrentTransformInverse(ot),PathType.SHADING,g);const ut=getCurrentTransformInverse(ot);if(ut){const{width:ft,height:St}=ot.canvas,kt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ft,St],ut,kt);const[Tt,Rt,jt,Ft]=kt;this.ctx.fillRect(Tt,Rt,jt-Tt,Ft-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordFullPageBBox(g).recordDependencies(g,Dependencies.transform).recordDependencies(g,Dependencies.fill).recordOperation(g),this.compose(this.current.getClippedPathBoundingBox()),this.restore(g)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(g,et,ot){var ct;if(this.contentVisible&&(this.save(g),this.baseTransformStack.push(this.baseTransform),et&&this.transform(g,...et),this.baseTransform=getCurrentTransform(this.ctx),ot)){Util$1.axialAlignedBoundingBox(ot,this.baseTransform,this.current.minMax);const[ut,dt,ft,St]=ot,kt=new Path2D;kt.rect(ut,dt,ft-ut,St-dt),this.ctx.clip(kt),(ct=this.dependencyTracker)==null||ct.recordClipBox(g,this.ctx,ut,ft,dt,St),this.endPath(g)}}paintFormXObjectEnd(g){this.contentVisible&&(this.restore(g),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g,et){var Jt;if(!this.contentVisible)return;this.save(g),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ot=this.ctx;et.isolated||info("TODO: Support non-isolated groups."),et.knockout&&warn("Knockout groups not supported.");const ct=getCurrentTransform(ot);if(et.matrix&&ot.transform(...et.matrix),!et.bbox)throw new Error("Bounding box is required.");let ut=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox(et.bbox,getCurrentTransform(ot),ut);const dt=[0,0,ot.canvas.width,ot.canvas.height];ut=Util$1.intersect(ut,dt)||[0,0,0,0];const ft=Math.floor(ut[0]),St=Math.floor(ut[1]),kt=Math.max(Math.ceil(ut[2])-ft,1),Tt=Math.max(Math.ceil(ut[3])-St,1);this.current.startNewPathAndClipBox([0,0,kt,Tt]);let Rt="groupAt"+this.groupLevel;et.smask&&(Rt+="_smask_"+this.smaskCounter++%2);const jt=this.cachedCanvases.getCanvas(Rt,kt,Tt),Ft=jt.context;Ft.translate(-ft,-St),Ft.transform(...ct);let $t=new Path2D;const[zt,Ut,Bt,Ht]=et.bbox;if($t.rect(zt,Ut,Bt-zt,Ht-Ut),et.matrix){const Zt=new Path2D;Zt.addPath($t,new DOMMatrix(et.matrix)),$t=Zt}Ft.clip($t),et.smask&&this.smaskStack.push({canvas:jt.canvas,context:Ft,offsetX:ft,offsetY:St,subtype:et.smask.subtype,backdrop:et.smask.backdrop,transferMap:et.smask.transferMap||null,startTransformInverse:null}),(!et.smask||this.dependencyTracker)&&(ot.setTransform(1,0,0,1,0,0),ot.translate(ft,St),ot.save()),copyCtxState(ot,Ft),this.ctx=Ft,(Jt=this.dependencyTracker)==null||Jt.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(ot),this.setGState(g,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ot),this.groupLevel++}endGroup(g,et){var ut;if(!this.contentVisible)return;this.groupLevel--;const ot=this.ctx,ct=this.groupStack.pop();if(this.ctx=ct,this.ctx.imageSmoothingEnabled=!1,(ut=this.dependencyTracker)==null||ut.popBaseTransform(),et.smask)this.tempSMask=this.smaskStack.pop(),this.restore(g),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const dt=getCurrentTransform(this.ctx);this.restore(g),this.ctx.save(),this.ctx.setTransform(...dt);const ft=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ot.canvas.width,ot.canvas.height],dt,ft),this.ctx.drawImage(ot.canvas,0,0),this.ctx.restore(),this.compose(ft)}}beginAnnotation(g,et,ot,ct,ut,dt){if(_n(this,wE,iC).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(g),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ot){const ft=ot[2]-ot[0],St=ot[3]-ot[1];if(dt&&this.annotationCanvasMap){ct=ct.slice(),ct[4]-=ot[0],ct[5]-=ot[1],ot=ot.slice(),ot[0]=ot[1]=0,ot[2]=ft,ot[3]=St,Util$1.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:kt}=this,Tt=Math.ceil(ft*this.outputScaleX*kt),Rt=Math.ceil(St*this.outputScaleY*kt);this.annotationCanvas=this.canvasFactory.create(Tt,Rt);const{canvas:jt,context:Ft}=this.annotationCanvas;this.annotationCanvasMap.set(et,jt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ft,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,St*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(g);const kt=new Path2D;kt.rect(ot[0],ot[1],ft,St),this.ctx.clip(kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(g,...ct),this.transform(g,...ut)}endAnnotation(g){this.annotationCanvas&&(this.ctx.restore(),_n(this,kE,sC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g,et){var ft;if(!this.contentVisible)return;const ot=et.count;et=this.getObject(g,et.data,et),et.count=ot;const ct=this.ctx,ut=this._createMaskCanvas(g,et),dt=ut.canvas;ct.save(),ct.setTransform(1,0,0,1,0,0),ct.drawImage(dt,ut.offsetX,ut.offsetY),(ft=this.dependencyTracker)==null||ft.resetBBox(g).recordBBox(g,this.ctx,ut.offsetX,ut.offsetX+dt.width,ut.offsetY,ut.offsetY+dt.height).recordOperation(g),ct.restore(),this.compose()}paintImageMaskXObjectRepeat(g,et,ot,ct=0,ut=0,dt,ft){var Rt,jt,Ft;if(!this.contentVisible)return;et=this.getObject(g,et.data,et);const St=this.ctx;St.save();const kt=getCurrentTransform(St);St.transform(ot,ct,ut,dt,0,0);const Tt=this._createMaskCanvas(g,et);St.setTransform(1,0,0,1,Tt.offsetX-kt[4],Tt.offsetY-kt[5]),(Rt=this.dependencyTracker)==null||Rt.resetBBox(g);for(let $t=0,zt=ft.length;$t<zt;$t+=2){const Ut=Util$1.transform(kt,[ot,ct,ut,dt,ft[$t],ft[$t+1]]);St.drawImage(Tt.canvas,Ut[4],Ut[5]),(jt=this.dependencyTracker)==null||jt.recordBBox(g,this.ctx,Ut[4],Ut[4]+Tt.canvas.width,Ut[5],Ut[5]+Tt.canvas.height)}St.restore(),this.compose(),(Ft=this.dependencyTracker)==null||Ft.recordOperation(g)}paintImageMaskXObjectGroup(g,et){var dt,ft,St;if(!this.contentVisible)return;const ot=this.ctx,ct=this.current.fillColor,ut=this.current.patternFill;(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordDependencies(g,Dependencies.transformAndFill);for(const kt of et){const{data:Tt,width:Rt,height:jt,transform:Ft}=kt,$t=this.cachedCanvases.getCanvas("maskCanvas",Rt,jt),zt=$t.context;zt.save();const Ut=this.getObject(g,Tt,kt);putBinaryImageMask(zt,Ut),zt.globalCompositeOperation="source-in",zt.fillStyle=ut?ct.getPattern(zt,this,getCurrentTransformInverse(ot),PathType.FILL,g):ct,zt.fillRect(0,0,Rt,jt),zt.restore(),ot.save(),ot.transform(...Ft),ot.scale(1,-1),drawImageAtIntegerCoords(ot,$t.canvas,0,0,Rt,jt,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ot,0,Rt,0,jt),ot.restore()}this.compose(),(St=this.dependencyTracker)==null||St.recordOperation(g)}paintImageXObject(g,et){if(!this.contentVisible)return;const ot=this.getObject(g,et);if(!ot){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g,ot)}paintImageXObjectRepeat(g,et,ot,ct,ut){if(!this.contentVisible)return;const dt=this.getObject(g,et);if(!dt){warn("Dependent image isn't ready yet");return}const ft=dt.width,St=dt.height,kt=[];for(let Tt=0,Rt=ut.length;Tt<Rt;Tt+=2)kt.push({transform:[ot,0,0,ct,ut[Tt],ut[Tt+1]],x:0,y:0,w:ft,h:St});this.paintInlineImageXObjectGroup(g,dt,kt)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:et,width:ot,height:ct}=g,ut=this.cachedCanvases.getCanvas("inlineImage",ot,ct),dt=ut.context;return dt.filter=this.current.transferMaps,dt.drawImage(et,0,0),dt.filter="none",ut.canvas}paintInlineImageXObject(g,et){var kt;if(!this.contentVisible)return;const ot=et.width,ct=et.height,ut=this.ctx;this.save(g);const{filter:dt}=ut;dt!=="none"&&dt!==""&&(ut.filter="none"),ut.scale(1/ot,-1/ct);let ft;if(et.bitmap)ft=this.applyTransferMapsToBitmap(et);else if(typeof HTMLElement=="function"&&et instanceof HTMLElement||!et.data)ft=et;else{const Rt=this.cachedCanvases.getCanvas("inlineImage",ot,ct).context;putBinaryImageData(Rt,et),ft=this.applyTransferMapsToCanvas(Rt)}const St=this._scaleImage(ft,getCurrentTransformInverse(ut));ut.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ut),et.interpolate),(kt=this.dependencyTracker)==null||kt.resetBBox(g).recordBBox(g,ut,0,ot,-ct,0).recordDependencies(g,Dependencies.imageXObject).recordOperation(g),drawImageAtIntegerCoords(ut,St.img,0,0,St.paintWidth,St.paintHeight,0,-ct,ot,ct),this.compose(),this.restore(g)}paintInlineImageXObjectGroup(g,et,ot){var dt,ft,St;if(!this.contentVisible)return;const ct=this.ctx;let ut;if(et.bitmap)ut=et.bitmap;else{const kt=et.width,Tt=et.height,jt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(jt,et),ut=this.applyTransferMapsToCanvas(jt)}(dt=this.dependencyTracker)==null||dt.resetBBox(g);for(const kt of ot)ct.save(),ct.transform(...kt.transform),ct.scale(1,-1),drawImageAtIntegerCoords(ct,ut,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ct,0,1,-1,0),ct.restore();(St=this.dependencyTracker)==null||St.recordOperation(g),this.compose()}paintSolidColorImageMask(g){var et;this.contentVisible&&((et=this.dependencyTracker)==null||et.resetBBox(g).recordBBox(g,this.ctx,0,1,0,1).recordDependencies(g,Dependencies.fill).recordOperation(g),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g,et){}markPointProps(g,et,ot){}beginMarkedContent(g,et){var ot;(ot=this.dependencyTracker)==null||ot.beginMarkedContent(g),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.beginMarkedContent(g),et==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ot)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(g){var et;(et=this.dependencyTracker)==null||et.endMarkedContent(g),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(g){}endCompat(g){}consumePath(g,et,ot){var dt,ft;const ct=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ot);const ut=this.ctx;this.pendingClip?(ct||(this.pendingClip===EO_CLIP?ut.clip(et,"evenodd"):ut.clip(et)),this.pendingClip=null,(dt=this.dependencyTracker)==null||dt.bboxToClipBoxDropOperation(g).recordFutureForcedDependency("clipPath",g)):(ft=this.dependencyTracker)==null||ft.recordOperation(g),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=getCurrentTransform(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const et=Math.abs(g[0]*g[3]-g[2]*g[1]),ot=Math.hypot(g[0],g[2]),ct=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(ot,ct)/et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:et,b:ot,c:ct,d:ut}=this.ctx.getTransform();let dt,ft;if(ot===0&&ct===0){const St=Math.abs(et),kt=Math.abs(ut);if(St===kt)if(g===0)dt=ft=1/St;else{const Tt=St*g;dt=ft=Tt<1?1/Tt:1}else if(g===0)dt=1/St,ft=1/kt;else{const Tt=St*g,Rt=kt*g;dt=Tt<1?1/Tt:1,ft=Rt<1?1/Rt:1}}else{const St=Math.abs(et*ut-ot*ct),kt=Math.hypot(et,ot),Tt=Math.hypot(ct,ut);if(g===0)dt=Tt/St,ft=kt/St;else{const Rt=g*St;dt=Tt>Rt?Tt/Rt:1,ft=kt>Rt?kt/Rt:1}}this._cachedScaleForStroking[0]=dt,this._cachedScaleForStroking[1]=ft}return this._cachedScaleForStroking}rescaleAndStroke(g,et){const{ctx:ot,current:{lineWidth:ct}}=this,[ut,dt]=this.getScaleForStroking();if(ut===dt){ot.lineWidth=(ct||1)*ut,ot.stroke(g);return}const ft=ot.getLineDash();et&&ot.save(),ot.scale(ut,dt),SCALE_MATRIX.a=1/ut,SCALE_MATRIX.d=1/dt;const St=new Path2D;if(St.addPath(g,SCALE_MATRIX),ft.length>0){const kt=Math.max(ut,dt);ot.setLineDash(ft.map(Tt=>Tt/kt)),ot.lineDashOffset/=kt}ot.lineWidth=ct||1,ot.stroke(St),et&&ot.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};wE=new WeakSet,iC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},kE=new WeakSet,sC=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const et=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=et}}},TE=new WeakSet,oC=function(g,et,ot){const ct=new Path2D;return ct.addPath(g,new DOMMatrix(ot).invertSelf().multiplySelf(et)),ct};let CanvasGraphics=WC;for(const it in OPS)CanvasGraphics.prototype[it]!==void 0&&(CanvasGraphics.prototype[OPS[it]]=CanvasGraphics.prototype[it]);var _1,A1,_E,C1,aw;const Hy=class Hy{constructor(g){yn(this,C1);yn(this,_1,void 0);yn(this,A1,void 0);yn(this,_E,void 0);vn(this,_1,g),vn(this,A1,new DataView(Kt(this,_1))),vn(this,_E,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const kt of Hy.strings){const Tt=et.encode(g[kt]);ot[kt]=Tt,ct+=4+Tt.length}const ut=new ArrayBuffer(ct),dt=new Uint8Array(ut),ft=new DataView(ut);let St=0;for(const kt of Hy.strings){const Tt=ot[kt],Rt=Tt.length;ft.setUint32(St,Rt),dt.set(Tt,St+4),St+=4+Rt}return assert(St===ut.byteLength,"CssFontInfo.write: Buffer overflow"),ut}get fontFamily(){return _n(this,C1,aw).call(this,0)}get fontWeight(){return _n(this,C1,aw).call(this,1)}get italicAngle(){return _n(this,C1,aw).call(this,2)}};_1=new WeakMap,A1=new WeakMap,_E=new WeakMap,C1=new WeakSet,aw=function(g){assert(g<Hy.strings.length,"Invalid string index");let et=0;for(let ct=0;ct<g;ct++)et+=Kt(this,A1).getUint32(et)+4;const ot=Kt(this,A1).getUint32(et);return Kt(this,_E).decode(new Uint8Array(Kt(this,_1),et+4,ot))},qn(Hy,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=Hy;var Zp,fu,C0,R0,bx;const Uy=class Uy{constructor(g){yn(this,R0);yn(this,Zp,void 0);yn(this,fu,void 0);yn(this,C0,void 0);vn(this,Zp,g),vn(this,fu,new DataView(Kt(this,Zp))),vn(this,C0,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const jt of Uy.strings){const Ft=et.encode(g[jt]);ot[jt]=Ft,ct+=4+Ft.length}ct+=4;let ut,dt,ft=1+ct;g.style&&(ut=et.encode(g.style.style),dt=et.encode(g.style.weight),ft+=4+ut.length+4+dt.length);const St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;Tt.setUint8(Rt++,g.guessFallback?1:0),Tt.setUint32(Rt,0),Rt+=4,ct=0;for(const jt of Uy.strings){const Ft=ot[jt],$t=Ft.length;ct+=4+$t,Tt.setUint32(Rt,$t),kt.set(Ft,Rt+4),Rt+=4+$t}return Tt.setUint32(Rt-ct-4,ct),g.style&&(Tt.setUint32(Rt,ut.length),kt.set(ut,Rt+4),Rt+=4+ut.length,Tt.setUint32(Rt,dt.length),kt.set(dt,Rt+4),Rt+=4+dt.length),assert(Rt<=St.byteLength,"SubstitionInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}get guessFallback(){return Kt(this,fu).getUint8(0)!==0}get css(){return _n(this,R0,bx).call(this,0)}get loadedName(){return _n(this,R0,bx).call(this,1)}get baseFontName(){return _n(this,R0,bx).call(this,2)}get src(){return _n(this,R0,bx).call(this,3)}get style(){let g=1;g+=4+Kt(this,fu).getUint32(g);const et=Kt(this,fu).getUint32(g),ot=Kt(this,C0).decode(new Uint8Array(Kt(this,Zp),g+4,et));g+=4+et;const ct=Kt(this,fu).getUint32(g),ut=Kt(this,C0).decode(new Uint8Array(Kt(this,Zp),g+4,ct));return{style:ot,weight:ut}}};Zp=new WeakMap,fu=new WeakMap,C0=new WeakMap,R0=new WeakSet,bx=function(g){assert(g<Uy.strings.length,"Invalid string index");let et=5;for(let ct=0;ct<g;ct++)et+=Kt(this,fu).getUint32(et)+4;const ot=Kt(this,fu).getUint32(et);return Kt(this,C0).decode(new Uint8Array(Kt(this,Zp),et+4,ot))},qn(Uy,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=Uy;var R1,P1,N1,M1,To,pu,AE,Mr,Ao,Cl,O1,lw,P0,Ex;const gr=class gr{constructor({data:g,extra:et}){yn(this,Ao);yn(this,O1);yn(this,P0);yn(this,pu,void 0);yn(this,AE,void 0);yn(this,Mr,void 0);vn(this,pu,g),vn(this,AE,new TextDecoder),vn(this,Mr,new DataView(Kt(this,pu))),et&&Object.assign(this,et)}get black(){return _n(this,Ao,Cl).call(this,0)}get bold(){return _n(this,Ao,Cl).call(this,1)}get disableFontFace(){return _n(this,Ao,Cl).call(this,2)}get fontExtraProperties(){return _n(this,Ao,Cl).call(this,3)}get isInvalidPDFjsFont(){return _n(this,Ao,Cl).call(this,4)}get isType3Font(){return _n(this,Ao,Cl).call(this,5)}get italic(){return _n(this,Ao,Cl).call(this,6)}get missingFile(){return _n(this,Ao,Cl).call(this,7)}get remeasure(){return _n(this,Ao,Cl).call(this,8)}get vertical(){return _n(this,Ao,Cl).call(this,9)}get ascent(){return _n(this,O1,lw).call(this,0)}get defaultWidth(){return _n(this,O1,lw).call(this,1)}get descent(){return _n(this,O1,lw).call(this,2)}get bbox(){let g=Kt(gr,P1);if(Kt(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<4;ct++)ot.push(Kt(this,Mr).getInt16(g,!0)),g+=2;return ot}get fontMatrix(){let g=Kt(gr,N1);if(Kt(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<6;ct++)ot.push(Kt(this,Mr).getFloat64(g,!0)),g+=8;return ot}get defaultVMetrics(){let g=Kt(gr,M1);if(Kt(this,Mr).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<3;ct++)ot.push(Kt(this,Mr).getInt16(g,!0)),g+=2;return ot}get fallbackName(){return _n(this,P0,Ex).call(this,0)}get loadedName(){return _n(this,P0,Ex).call(this,1)}get mimetype(){return _n(this,P0,Ex).call(this,2)}get name(){return _n(this,P0,Ex).call(this,3)}get data(){let g=Kt(gr,To);const et=Kt(this,Mr).getUint32(g);g+=4+et;const ot=Kt(this,Mr).getUint32(g);g+=4+ot;const ct=Kt(this,Mr).getUint32(g);g+=4+ct;const ut=Kt(this,Mr).getUint32(g);if(ut!==0)return new Uint8Array(Kt(this,pu),g+4,ut)}clearData(){let g=Kt(gr,To);const et=Kt(this,Mr).getUint32(g);g+=4+et;const ot=Kt(this,Mr).getUint32(g);g+=4+ot;const ct=Kt(this,Mr).getUint32(g);g+=4+ct;const ut=Kt(this,Mr).getUint32(g);new Uint8Array(Kt(this,pu),g+4,ut).fill(0),Kt(this,Mr).setUint32(g,0)}get cssFontInfo(){let g=Kt(gr,To);const et=Kt(this,Mr).getUint32(g);g+=4+et;const ot=Kt(this,Mr).getUint32(g);g+=4+ot;const ct=Kt(this,Mr).getUint32(g);if(ct===0)return null;const ut=new Uint8Array(ct);return ut.set(new Uint8Array(Kt(this,pu),g+4,ct)),new CssFontInfo(ut.buffer)}get systemFontInfo(){let g=Kt(gr,To);const et=Kt(this,Mr).getUint32(g);g+=4+et;const ot=Kt(this,Mr).getUint32(g);if(ot===0)return null;const ct=new Uint8Array(ot);return ct.set(new Uint8Array(Kt(this,pu),g+4,ot)),new SystemFontInfo(ct.buffer)}static write(g){const et=g.systemFontInfo?SystemFontInfo.write(g.systemFontInfo):null,ot=g.cssFontInfo?CssFontInfo.write(g.cssFontInfo):null,ct=new TextEncoder,ut={};let dt=0;for(const zt of gr.strings)ut[zt]=ct.encode(g[zt]),dt+=4+ut[zt].length;const ft=Kt(gr,To)+4+dt+4+(et?et.byteLength:0)+4+(ot?ot.byteLength:0)+4+(g.data?g.data.length:0),St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;const jt=gr.bools.length;let Ft=0,$t=0;for(let zt=0;zt<jt;zt++){const Ut=g[gr.bools[zt]];Ft|=(Ut===void 0?0:Ut?2:1)<<$t,$t+=2,($t===8||zt===jt-1)&&(Tt.setUint8(Rt++,Ft),Ft=0,$t=0)}assert(Rt===Kt(gr,R1),"FontInfo.write: Boolean properties offset mismatch");for(const zt of gr.numbers)Tt.setFloat64(Rt,g[zt]),Rt+=8;if(assert(Rt===Kt(gr,P1),"FontInfo.write: Number properties offset mismatch"),g.bbox){Tt.setUint8(Rt++,4);for(const zt of g.bbox)Tt.setInt16(Rt,zt,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=2*4;if(assert(Rt===Kt(gr,N1),"FontInfo.write: BBox properties offset mismatch"),g.fontMatrix){Tt.setUint8(Rt++,6);for(const zt of g.fontMatrix)Tt.setFloat64(Rt,zt,!0),Rt+=8}else Tt.setUint8(Rt++,0),Rt+=8*6;if(assert(Rt===Kt(gr,M1),"FontInfo.write: FontMatrix properties offset mismatch"),g.defaultVMetrics){Tt.setUint8(Rt++,1);for(const zt of g.defaultVMetrics)Tt.setInt16(Rt,zt,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=3*2;assert(Rt===Kt(gr,To),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Tt.setUint32(Kt(gr,To),0),Rt+=4;for(const zt of gr.strings){const Ut=ut[zt],Bt=Ut.length;Tt.setUint32(Rt,Bt),kt.set(Ut,Rt+4),Rt+=4+Bt}if(Tt.setUint32(Kt(gr,To),Rt-Kt(gr,To)-4),!et)Tt.setUint32(Rt,0),Rt+=4;else{const zt=et.byteLength;Tt.setUint32(Rt,zt),assert(Rt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),kt.set(new Uint8Array(et),Rt+4),Rt+=4+zt}if(!ot)Tt.setUint32(Rt,0),Rt+=4;else{const zt=ot.byteLength;Tt.setUint32(Rt,zt),assert(Rt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),kt.set(new Uint8Array(ot),Rt+4),Rt+=4+zt}return g.data===void 0?(Tt.setUint32(Rt,0),Rt+=4):(Tt.setUint32(Rt,g.data.length),kt.set(g.data,Rt+4),Rt+=4+g.data.length),assert(Rt<=St.byteLength,"FontInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}};R1=new WeakMap,P1=new WeakMap,N1=new WeakMap,M1=new WeakMap,To=new WeakMap,pu=new WeakMap,AE=new WeakMap,Mr=new WeakMap,Ao=new WeakSet,Cl=function(g){assert(g<gr.bools.length,"Invalid boolean index");const et=Math.floor(g/4),ot=g*2%8,ct=Kt(this,Mr).getUint8(et)>>ot&3;return ct===0?void 0:ct===2},O1=new WeakSet,lw=function(g){return assert(g<gr.numbers.length,"Invalid number index"),Kt(this,Mr).getFloat64(Kt(gr,R1)+g*8)},P0=new WeakSet,Ex=function(g){assert(g<gr.strings.length,"Invalid string index");let et=Kt(gr,To)+4;for(let ut=0;ut<g;ut++)et+=Kt(this,Mr).getUint32(et)+4;const ot=Kt(this,Mr).getUint32(et),ct=new Uint8Array(ot);return ct.set(new Uint8Array(Kt(this,pu),et+4,ot)),Kt(this,AE).decode(ct)},qn(gr,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),qn(gr,"numbers",["ascent","defaultWidth","descent"]),qn(gr,"strings",["fallbackName","loadedName","mimetype","name"]),yn(gr,R1,Math.ceil(gr.bools.length*2/8)),yn(gr,P1,Kt(gr,R1)+gr.numbers.length*8),yn(gr,N1,Kt(gr,P1)+1+2*4),yn(gr,M1,Kt(gr,N1)+1+8*6),yn(gr,To,Kt(gr,M1)+1+2*3);let FontInfo=gr;var CE,RE;class GlobalWorkerOptions{static get workerPort(){return Kt(this,CE)}static set workerPort(g){if(!(typeof Worker<"u"&&g instanceof Worker)&&g!==null)throw new Error("Invalid `workerPort` type.");vn(this,CE,g)}static get workerSrc(){return Kt(this,RE)}static set workerSrc(g){if(typeof g!="string")throw new Error("Invalid `workerSrc` type.");vn(this,RE,g)}}CE=new WeakMap,RE=new WeakMap,yn(GlobalWorkerOptions,CE,null),yn(GlobalWorkerOptions,RE,"");var I1,PE;class Metadata{constructor({parsedData:g,rawData:et}){yn(this,I1,void 0);yn(this,PE,void 0);vn(this,I1,g),vn(this,PE,et)}getRaw(){return Kt(this,PE)}get(g){return Kt(this,I1).get(g)??null}[Symbol.iterator](){return Kt(this,I1).entries()}}I1=new WeakMap,PE=new WeakMap;const INTERNAL=Symbol("INTERNAL");var NE,ME,OE,D1;class OptionalContentGroup{constructor(g,{name:et,intent:ot,usage:ct,rbGroups:ut}){yn(this,NE,!1);yn(this,ME,!1);yn(this,OE,!1);yn(this,D1,!0);vn(this,NE,!!(g&RenderingIntentFlag.DISPLAY)),vn(this,ME,!!(g&RenderingIntentFlag.PRINT)),this.name=et,this.intent=ot,this.usage=ct,this.rbGroups=ut}get visible(){if(Kt(this,OE))return Kt(this,D1);if(!Kt(this,D1))return!1;const{print:g,view:et}=this.usage;return Kt(this,NE)?(et==null?void 0:et.viewState)!=="OFF":Kt(this,ME)?(g==null?void 0:g.printState)!=="OFF":!0}_setVisible(g,et,ot=!1){g!==INTERNAL&&unreachable("Internal method `_setVisible` called."),vn(this,OE,ot),vn(this,D1,et)}}NE=new WeakMap,ME=new WeakMap,OE=new WeakMap,D1=new WeakMap;var em,Or,L1,j1,IE,aC;class OptionalContentConfig{constructor(g,et=RenderingIntentFlag.DISPLAY){yn(this,IE);yn(this,em,null);yn(this,Or,new Map);yn(this,L1,null);yn(this,j1,null);if(this.renderingIntent=et,this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,vn(this,j1,g.order);for(const ot of g.groups)Kt(this,Or).set(ot.id,new OptionalContentGroup(et,ot));if(g.baseState==="OFF")for(const ot of Kt(this,Or).values())ot._setVisible(INTERNAL,!1);for(const ot of g.on)Kt(this,Or).get(ot)._setVisible(INTERNAL,!0);for(const ot of g.off)Kt(this,Or).get(ot)._setVisible(INTERNAL,!1);vn(this,L1,this.getHash())}}isVisible(g){if(Kt(this,Or).size===0)return!0;if(!g)return info("Optional content group not defined."),!0;if(g.type==="OCG")return Kt(this,Or).has(g.id)?Kt(this,Or).get(g.id).visible:(warn(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return _n(this,IE,aC).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const et of g.ids){if(!Kt(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Kt(this,Or).get(et).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const et of g.ids){if(!Kt(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Kt(this,Or).get(et).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const et of g.ids){if(!Kt(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Kt(this,Or).get(et).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const et of g.ids){if(!Kt(this,Or).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Kt(this,Or).get(et).visible)return!1}return!0}return warn(`Unknown optional content policy ${g.policy}.`),!0}return warn(`Unknown group type ${g.type}.`),!0}setVisibility(g,et=!0,ot=!0){var ut;const ct=Kt(this,Or).get(g);if(!ct){warn(`Optional content group not found: ${g}`);return}if(ot&&et&&ct.rbGroups.length)for(const dt of ct.rbGroups)for(const ft of dt)ft!==g&&((ut=Kt(this,Or).get(ft))==null||ut._setVisible(INTERNAL,!1,!0));ct._setVisible(INTERNAL,!!et,!0),vn(this,em,null)}setOCGState({state:g,preserveRB:et}){let ot;for(const ct of g){switch(ct){case"ON":case"OFF":case"Toggle":ot=ct;continue}const ut=Kt(this,Or).get(ct);if(ut)switch(ot){case"ON":this.setVisibility(ct,!0,et);break;case"OFF":this.setVisibility(ct,!1,et);break;case"Toggle":this.setVisibility(ct,!ut.visible,et);break}}vn(this,em,null)}get hasInitialVisibility(){return Kt(this,L1)===null||this.getHash()===Kt(this,L1)}getOrder(){return Kt(this,Or).size?Kt(this,j1)?Kt(this,j1).slice():[...Kt(this,Or).keys()]:null}getGroup(g){return Kt(this,Or).get(g)||null}getHash(){if(Kt(this,em)!==null)return Kt(this,em);const g=new MurmurHash3_64;for(const[et,ot]of Kt(this,Or))g.update(`${et}:${ot.visible}`);return vn(this,em,g.hexdigest())}[Symbol.iterator](){return Kt(this,Or).entries()}}em=new WeakMap,Or=new WeakMap,L1=new WeakMap,j1=new WeakMap,IE=new WeakSet,aC=function(g){const et=g.length;if(et<2)return!0;const ot=g[0];for(let ct=1;ct<et;ct++){const ut=g[ct];let dt;if(Array.isArray(ut))dt=_n(this,IE,aC).call(this,ut);else if(Kt(this,Or).has(ut))dt=Kt(this,Or).get(ut).visible;else return warn(`Optional content group not found: ${ut}`),!0;switch(ot){case"And":if(!dt)return!1;break;case"Or":if(dt)return!0;break;case"Not":return!dt;default:return!0}}return ot==="And"};class PDFDataTransportStream{constructor(g,{disableRange:et=!1,disableStream:ot=!1}){assert(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ct,initialData:ut,progressiveDone:dt,contentDispositionFilename:ft}=g;if(this._queuedChunks=[],this._progressiveDone=dt,this._contentDispositionFilename=ft,(ut==null?void 0:ut.length)>0){const St=ut instanceof Uint8Array&&ut.byteLength===ut.buffer.byteLength?ut.buffer:new Uint8Array(ut).buffer;this._queuedChunks.push(St)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!ot,this._isRangeSupported=!et,this._contentLength=ct,this._fullRequestReader=null,this._rangeReaders=[],g.addRangeListener((St,kt)=>{this._onReceiveData({begin:St,chunk:kt})}),g.addProgressListener((St,kt)=>{this._onProgress({loaded:St,total:kt})}),g.addProgressiveReadListener(St=>{this._onReceiveData({chunk:St})}),g.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),g.transportReady()}_onReceiveData({begin:g,chunk:et}){const ot=et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength?et.buffer:new Uint8Array(et).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ot):this._queuedChunks.push(ot);else{const ct=this._rangeReaders.some(function(ut){return ut._begin!==g?!1:(ut._enqueue(ot),!0)});assert(ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var et,ot,ct,ut;g.total===void 0?(ot=(et=this._rangeReaders[0])==null?void 0:et.onProgress)==null||ot.call(et,{loaded:g.loaded}):(ut=(ct=this._fullRequestReader)==null?void 0:ct.onProgress)==null||ut.call(ct,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const et=this._rangeReaders.indexOf(g);et>=0&&this._rangeReaders.splice(et,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFDataTransportStreamRangeReader(this,g,et);return this._pdfDataRangeTransport.requestDataRange(g,et),this._rangeReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeReaders.slice(0))ot.cancel(g);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(g,et,ot=!1,ct=null){this._stream=g,this._done=ot||!1,this._filename=isPdfFile(ct)?ct:null,this._queuedChunks=et||[],this._loaded=0;for(const ut of this._queuedChunks)this._loaded+=ut.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(g,et,ot){this._stream=g,this._begin=et,this._end=ot,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(it){let g=!0,et=ot("filename\\*","i").exec(it);if(et){et=et[1];let Tt=ft(et);return Tt=unescape(Tt),Tt=St(Tt),Tt=kt(Tt),ut(Tt)}if(et=dt(it),et){const Tt=kt(et);return ut(Tt)}if(et=ot("filename","i").exec(it),et){et=et[1];let Tt=ft(et);return Tt=kt(Tt),ut(Tt)}function ot(Tt,Rt){return new RegExp("(?:^|;)\\s*"+Tt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Rt)}function ct(Tt,Rt){if(Tt){if(!/^[\x00-\xFF]+$/.test(Rt))return Rt;try{const jt=new TextDecoder(Tt,{fatal:!0}),Ft=stringToBytes(Rt);Rt=jt.decode(Ft),g=!1}catch{}}return Rt}function ut(Tt){return g&&/[\x80-\xff]/.test(Tt)&&(Tt=ct("utf-8",Tt),g&&(Tt=ct("iso-8859-1",Tt))),Tt}function dt(Tt){const Rt=[];let jt;const Ft=ot("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(jt=Ft.exec(Tt))!==null;){let[,zt,Ut,Bt]=jt;if(zt=parseInt(zt,10),zt in Rt){if(zt===0)break;continue}Rt[zt]=[Ut,Bt]}const $t=[];for(let zt=0;zt<Rt.length&&zt in Rt;++zt){let[Ut,Bt]=Rt[zt];Bt=ft(Bt),Ut&&(Bt=unescape(Bt),zt===0&&(Bt=St(Bt))),$t.push(Bt)}return $t.join("")}function ft(Tt){if(Tt.startsWith('"')){const Rt=Tt.slice(1).split('\\"');for(let jt=0;jt<Rt.length;++jt){const Ft=Rt[jt].indexOf('"');Ft!==-1&&(Rt[jt]=Rt[jt].slice(0,Ft),Rt.length=jt+1),Rt[jt]=Rt[jt].replaceAll(/\\(.)/g,"$1")}Tt=Rt.join('"')}return Tt}function St(Tt){const Rt=Tt.indexOf("'");if(Rt===-1)return Tt;const jt=Tt.slice(0,Rt),$t=Tt.slice(Rt+1).replace(/^[^']*'/,"");return ct(jt,$t)}function kt(Tt){return!Tt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tt)?Tt:Tt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Rt,jt,Ft,$t){if(Ft==="q"||Ft==="Q")return $t=$t.replaceAll("_"," "),$t=$t.replaceAll(/=([0-9a-fA-F]{2})/g,function(zt,Ut){return String.fromCharCode(parseInt(Ut,16))}),ct(jt,$t);try{$t=atob($t)}catch{}return ct(jt,$t)})}return""}function createHeaders(it,g){const et=new Headers;if(!it||!g||typeof g!="object")return et;for(const ot in g){const ct=g[ot];ct!==void 0&&et.append(ot,ct)}return et}function getResponseOrigin(it){var g;return((g=URL.parse(it))==null?void 0:g.origin)??null}function validateRangeRequestCapabilities({responseHeaders:it,isHttp:g,rangeChunkSize:et,disableRange:ot}){const ct={allowRangeRequests:!1,suggestedLength:void 0},ut=parseInt(it.get("Content-Length"),10);return!Number.isInteger(ut)||(ct.suggestedLength=ut,ut<=2*et)||ot||!g||it.get("Accept-Ranges")!=="bytes"||(it.get("Content-Encoding")||"identity")!=="identity"||(ct.allowRangeRequests=!0),ct}function extractFilenameFromHeader(it){const g=it.get("Content-Disposition");if(g){let et=getFilenameFromContentDispositionHeader(g);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if(isPdfFile(et))return et}return null}function createResponseError(it,g){return new ResponseException(`Unexpected server response (${it}) while retrieving PDF "${g}".`,it,it===404||it===0&&g.startsWith("file:"))}function validateResponseStatus(it){return it===200||it===206}function createFetchOptions(it,g,et){return{method:"GET",headers:it,signal:et.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(it){return it instanceof Uint8Array?it.buffer:it instanceof ArrayBuffer?it:(warn(`getArrayBuffer - unexpected data format: ${it}`),new Uint8Array(it).buffer)}class PDFFetchStream{constructor(g){qn(this,"_responseOrigin",null);this.source=g,this.isHttp=/^https?:/i.test(g.url),this.headers=createHeaders(this.isHttp,g.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFFetchStreamRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFFetchStreamReader{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const et=g.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange;const ot=new Headers(g.headers),ct=et.url;fetch(ct,createFetchOptions(ot,this._withCredentials,this._abortController)).then(ut=>{if(g._responseOrigin=getResponseOrigin(ut.url),!validateResponseStatus(ut.status))throw createResponseError(ut.status,ct);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=ut.headers,{allowRangeRequests:ft,suggestedLength:St}=validateRangeRequestCapabilities({responseHeaders:dt,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=St||this._contentLength,this._filename=extractFilenameFromHeader(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(g,et,ot){this._stream=g,this._reader=null,this._loaded=0;const ct=g.source;this._withCredentials=ct.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ct.disableStream,this._abortController=new AbortController;const ut=new Headers(g.headers);ut.append("Range",`bytes=${et}-${ot-1}`);const dt=ct.url;fetch(dt,createFetchOptions(ut,this._withCredentials,this._abortController)).then(ft=>{const St=getResponseOrigin(ft.url);if(St!==g._responseOrigin)throw new Error(`Expected range response-origin "${St}" to match "${g._responseOrigin}".`);if(!validateResponseStatus(ft.status))throw createResponseError(ft.status,dt);this._readCapability.resolve(),this._reader=ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(it){const g=it.response;return typeof g!="string"?g:stringToBytes(g).buffer}class NetworkManager{constructor({url:g,httpHeaders:et,withCredentials:ot}){qn(this,"_responseOrigin",null);this.url=g,this.isHttp=/^https?:/i.test(g),this.headers=createHeaders(this.isHttp,et),this.withCredentials=ot||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(g){const et=new XMLHttpRequest,ot=this.currXhrId++,ct=this.pendingRequests[ot]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const[ut,dt]of this.headers)et.setRequestHeader(ut,dt);return this.isHttp&&"begin"in g&&"end"in g?(et.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),ct.expectedStatus=PARTIAL_CONTENT_RESPONSE):ct.expectedStatus=OK_RESPONSE,et.responseType="arraybuffer",assert(g.onError,"Expected `onError` callback to be provided."),et.onerror=()=>{g.onError(et.status)},et.onreadystatechange=this.onStateChange.bind(this,ot),et.onprogress=this.onProgress.bind(this,ot),ct.onHeadersReceived=g.onHeadersReceived,ct.onDone=g.onDone,ct.onError=g.onError,ct.onProgress=g.onProgress,et.send(null),ot}onProgress(g,et){var ct;const ot=this.pendingRequests[g];ot&&((ct=ot.onProgress)==null||ct.call(ot,et))}onStateChange(g,et){const ot=this.pendingRequests[g];if(!ot)return;const ct=ot.xhr;if(ct.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),ct.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],ct.status===0&&this.isHttp){ot.onError(ct.status);return}const ut=ct.status||OK_RESPONSE;if(!(ut===OK_RESPONSE&&ot.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ut!==ot.expectedStatus){ot.onError(ct.status);return}const ft=network_getArrayBuffer(ct);if(ut===PARTIAL_CONTENT_RESPONSE){const St=ct.getResponseHeader("Content-Range"),kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(St);kt?ot.onDone({begin:parseInt(kt[1],10),chunk:ft}):(warn('Missing or invalid "Content-Range" header.'),ot.onError(0))}else ft?ot.onDone({begin:0,chunk:ft}):ot.onError(ct.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const et=this.pendingRequests[g].xhr;delete this.pendingRequests[g],et.abort()}}class PDFNetworkStream{constructor(g){this._source=g,this._manager=new NetworkManager(g),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const et=this._rangeRequestReaders.indexOf(g);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(g,et){const ot=new PDFNetworkStreamRangeRequestReader(this._manager,g,et);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNetworkStreamFullRequestReader{constructor(g,et){this._manager=g,this._url=et.url,this._fullRequestId=g.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,et=this._manager.getRequestXhr(g);this._manager._responseOrigin=getResponseOrigin(et.responseURL);const ot=et.getAllResponseHeaders(),ct=new Headers(ot?ot.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(ft=>{const[St,...kt]=ft.split(": ");return[St,kt.join(": ")]}):[]),{allowRangeRequests:ut,suggestedLength:dt}=validateRangeRequestCapabilities({responseHeaders:ct,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ut&&(this._isRangeSupported=!0),this._contentLength=dt||this._contentLength,this._filename=extractFilenameFromHeader(ct),this._isRangeSupported&&this._manager.abortRequest(g),this._headersCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=createResponseError(g,this._url),this._headersCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var et;(et=this.onProgress)==null||et.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersCapability.reject(g);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(g,et,ot){this._manager=g,this._url=g.url,this._requestId=g.request({begin:et,end:ot,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var et;const g=getResponseOrigin((et=this._manager.getRequestXhr(this._requestId))==null?void 0:et.responseURL);g!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${g}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const et=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError??(this._storedError=createResponseError(g,this._url));for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(it){if(urlRegex.test(it))return new URL(it);const g=process.getBuiltinModule("url");return new URL(g.pathToFileURL(it))}class PDFNodeStream{constructor(g){this.source=g,this.url=parseUrlOrPath(g.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFNodeStreamFsRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNodeStreamFsFullReader{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=g.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const ot=process.getBuiltinModule("fs");ot.promises.lstat(this._url).then(ct=>{this._contentLength=ct.size,this._setReadableStream(ot.createReadStream(this._url)),this._headersCapability.resolve()},ct=>{ct.code==="ENOENT"&&(ct=createResponseError(0,this._url.href)),this._storedError=ct,this._headersCapability.reject(ct)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(g,et,ot){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ct=g.source;this._isStreamingSupported=!ct.disableStream;const ut=process.getBuiltinModule("fs");this._setReadableStream(ut.createReadStream(this._url,{start:et,end:ot-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var Co,DE,lC;class PDFObjects{constructor(){yn(this,DE);yn(this,Co,Object.create(null))}get(g,et=null){if(et){const ct=_n(this,DE,lC).call(this,g);return ct.promise.then(()=>et(ct.data)),null}const ot=Kt(this,Co)[g];if(!ot||ot.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${g}.`);return ot.data}has(g){const et=Kt(this,Co)[g];return!!et&&et.data!==INITIAL_DATA}delete(g){const et=Kt(this,Co)[g];return!et||et.data===INITIAL_DATA?!1:(delete Kt(this,Co)[g],!0)}resolve(g,et=null){const ot=_n(this,DE,lC).call(this,g);ot.data=et,ot.resolve()}clear(){var g;for(const et in Kt(this,Co)){const{data:ot}=Kt(this,Co)[et];(g=ot==null?void 0:ot.bitmap)==null||g.close()}vn(this,Co,Object.create(null))}*[Symbol.iterator](){for(const g in Kt(this,Co)){const{data:et}=Kt(this,Co)[g];et!==INITIAL_DATA&&(yield[g,et])}}}Co=new WeakMap,DE=new WeakSet,lC=function(g){var et;return(et=Kt(this,Co))[g]||(et[g]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var LP,tm,go,LE,jE,N0,_h,FE,$E,M0,F1,$1,im,B1,BE,V1,O0,VE,zE,qr,z1,I0,HE,sm,H1,gT,w3,yT,k3,UE,cC,U1,cw,GE,uC,vT,T3,xT,_3;let TextLayer$1=(qr=class{constructor({textContentSource:g,container:et,viewport:ot}){yn(this,gT);yn(this,yT);yn(this,UE);yn(this,tm,Promise.withResolvers());yn(this,go,null);yn(this,LE,!1);yn(this,jE,!!((LP=globalThis.FontInspector)!=null&&LP.enabled));yn(this,N0,null);yn(this,_h,null);yn(this,FE,0);yn(this,$E,0);yn(this,M0,null);yn(this,F1,null);yn(this,$1,0);yn(this,im,0);yn(this,B1,Object.create(null));yn(this,BE,[]);yn(this,V1,null);yn(this,O0,[]);yn(this,VE,new WeakMap);yn(this,zE,null);var St;if(g instanceof ReadableStream)vn(this,V1,g);else if(typeof g=="object")vn(this,V1,new ReadableStream({start(kt){kt.enqueue(g),kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');vn(this,go,vn(this,F1,et)),vn(this,im,ot.scale*OutputScale.pixelRatio),vn(this,$1,ot.rotation),vn(this,_h,{div:null,properties:null,ctx:null});const{pageWidth:ct,pageHeight:ut,pageX:dt,pageY:ft}=ot.rawDims;vn(this,zE,[1,0,0,-1,-dt,ft+ut]),vn(this,$E,ct),vn(this,FE,ut),_n(St=qr,vT,T3).call(St),setLayerDimensions(et,ot),Kt(this,tm).promise.finally(()=>{Kt(qr,H1).delete(this),vn(this,_h,null),vn(this,B1,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:g,isFirefox:et}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${g&&et?"Calibri, ":""}sans-serif`],["monospace",`${g&&et?"Lucida Console, ":""}monospace`]]))}render(){const g=()=>{Kt(this,M0).read().then(({value:et,done:ot})=>{if(ot){Kt(this,tm).resolve();return}Kt(this,N0)??vn(this,N0,et.lang),Object.assign(Kt(this,B1),et.styles),_n(this,gT,w3).call(this,et.items),g()},Kt(this,tm).reject)};return vn(this,M0,Kt(this,V1).getReader()),Kt(qr,H1).add(this),g(),Kt(this,tm).promise}update({viewport:g,onBefore:et=null}){var ut;const ot=g.scale*OutputScale.pixelRatio,ct=g.rotation;if(ct!==Kt(this,$1)&&(et==null||et(),vn(this,$1,ct),setLayerDimensions(Kt(this,F1),{rotation:ct})),ot!==Kt(this,im)){et==null||et(),vn(this,im,ot);const dt={div:null,properties:null,ctx:_n(ut=qr,U1,cw).call(ut,Kt(this,N0))};for(const ft of Kt(this,O0))dt.properties=Kt(this,VE).get(ft),dt.div=ft,_n(this,UE,cC).call(this,dt)}}cancel(){var et;const g=new AbortException("TextLayer task cancelled.");(et=Kt(this,M0))==null||et.cancel(g).catch(()=>{}),vn(this,M0,null),Kt(this,tm).reject(g)}get textDivs(){return Kt(this,O0)}get textContentItemsStr(){return Kt(this,BE)}static cleanup(){if(!(Kt(this,H1).size>0)){Kt(this,z1).clear();for(const{canvas:g}of Kt(this,I0).values())g.remove();Kt(this,I0).clear()}}},tm=new WeakMap,go=new WeakMap,LE=new WeakMap,jE=new WeakMap,N0=new WeakMap,_h=new WeakMap,FE=new WeakMap,$E=new WeakMap,M0=new WeakMap,F1=new WeakMap,$1=new WeakMap,im=new WeakMap,B1=new WeakMap,BE=new WeakMap,V1=new WeakMap,O0=new WeakMap,VE=new WeakMap,zE=new WeakMap,z1=new WeakMap,I0=new WeakMap,HE=new WeakMap,sm=new WeakMap,H1=new WeakMap,gT=new WeakSet,w3=function(g){var ct,ut;if(Kt(this,LE))return;(ut=Kt(this,_h)).ctx??(ut.ctx=_n(ct=qr,U1,cw).call(ct,Kt(this,N0)));const et=Kt(this,O0),ot=Kt(this,BE);for(const dt of g){if(et.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),vn(this,LE,!0);return}if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ft=Kt(this,go);vn(this,go,document.createElement("span")),Kt(this,go).classList.add("markedContent"),dt.id&&Kt(this,go).setAttribute("id",`${dt.id}`),ft.append(Kt(this,go))}else dt.type==="endMarkedContent"&&vn(this,go,Kt(this,go).parentNode);continue}ot.push(dt.str),_n(this,yT,k3).call(this,dt)}},yT=new WeakSet,k3=function(g){var zt;const et=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};Kt(this,O0).push(et);const ct=Util$1.transform(Kt(this,zE),g.transform);let ut=Math.atan2(ct[1],ct[0]);const dt=Kt(this,B1)[g.fontName];dt.vertical&&(ut+=Math.PI/2);let ft=Kt(this,jE)&&dt.fontSubstitution||dt.fontFamily;ft=qr.fontFamilyMap.get(ft)||ft;const St=Math.hypot(ct[2],ct[3]),kt=St*_n(zt=qr,xT,_3).call(zt,ft,dt,Kt(this,N0));let Tt,Rt;ut===0?(Tt=ct[4],Rt=ct[5]-kt):(Tt=ct[4]+kt*Math.sin(ut),Rt=ct[5]-kt*Math.cos(ut));const jt="calc(var(--total-scale-factor) *",Ft=et.style;Kt(this,go)===Kt(this,F1)?(Ft.left=`${(100*Tt/Kt(this,$E)).toFixed(2)}%`,Ft.top=`${(100*Rt/Kt(this,FE)).toFixed(2)}%`):(Ft.left=`${jt}${Tt.toFixed(2)}px)`,Ft.top=`${jt}${Rt.toFixed(2)}px)`),Ft.fontSize=`${jt}${(Kt(qr,sm)*St).toFixed(2)}px)`,Ft.fontFamily=ft,ot.fontSize=St,et.setAttribute("role","presentation"),et.textContent=g.str,et.dir=g.dir,Kt(this,jE)&&(et.dataset.fontName=dt.fontSubstitutionLoadedName||g.fontName),ut!==0&&(ot.angle=ut*(180/Math.PI));let $t=!1;if(g.str.length>1)$t=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const Ut=Math.abs(g.transform[0]),Bt=Math.abs(g.transform[3]);Ut!==Bt&&Math.max(Ut,Bt)/Math.min(Ut,Bt)>1.5&&($t=!0)}if($t&&(ot.canvasWidth=dt.vertical?g.height:g.width),Kt(this,VE).set(et,ot),Kt(this,_h).div=et,Kt(this,_h).properties=ot,_n(this,UE,cC).call(this,Kt(this,_h)),ot.hasText&&Kt(this,go).append(et),ot.hasEOL){const Ut=document.createElement("br");Ut.setAttribute("role","presentation"),Kt(this,go).append(Ut)}},UE=new WeakSet,cC=function(g){var ft;const{div:et,properties:ot,ctx:ct}=g,{style:ut}=et;let dt="";if(Kt(qr,sm)>1&&(dt=`scale(${1/Kt(qr,sm)})`),ot.canvasWidth!==0&&ot.hasText){const{fontFamily:St}=ut,{canvasWidth:kt,fontSize:Tt}=ot;_n(ft=qr,GE,uC).call(ft,ct,Tt*Kt(this,im),St);const{width:Rt}=ct.measureText(et.textContent);Rt>0&&(dt=`scaleX(${kt*Kt(this,im)/Rt}) ${dt}`)}ot.angle!==0&&(dt=`rotate(${ot.angle}deg) ${dt}`),dt.length>0&&(ut.transform=dt)},U1=new WeakSet,cw=function(g=null){let et=Kt(this,I0).get(g||(g=""));if(!et){const ot=document.createElement("canvas");ot.className="hiddenCanvasElement",ot.lang=g,document.body.append(ot),et=ot.getContext("2d",{alpha:!1,willReadFrequently:!0}),Kt(this,I0).set(g,et),Kt(this,HE).set(et,{size:0,family:""})}return et},GE=new WeakSet,uC=function(g,et,ot){const ct=Kt(this,HE).get(g);et===ct.size&&ot===ct.family||(g.font=`${et}px ${ot}`,ct.size=et,ct.family=ot)},vT=new WeakSet,T3=function(){if(Kt(this,sm)!==null)return;const g=document.createElement("div");g.style.opacity=0,g.style.lineHeight=1,g.style.fontSize="1px",g.style.position="absolute",g.textContent="X",document.body.append(g),vn(this,sm,g.getBoundingClientRect().height),g.remove()},xT=new WeakSet,_3=function(g,et,ot){const ct=Kt(this,z1).get(g);if(ct)return ct;const ut=_n(this,U1,cw).call(this,ot);ut.canvas.width=ut.canvas.height=DEFAULT_FONT_SIZE,_n(this,GE,uC).call(this,ut,DEFAULT_FONT_SIZE,g);const dt=ut.measureText(""),ft=dt.fontBoundingBoxAscent,St=Math.abs(dt.fontBoundingBoxDescent);ut.canvas.width=ut.canvas.height=0;let kt=.8;return ft?kt=ft/(ft+St):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),et.ascent?kt=et.ascent:et.descent&&(kt=1+et.descent)),Kt(this,z1).set(g,kt),kt},yn(qr,U1),yn(qr,GE),yn(qr,vT),yn(qr,xT),yn(qr,z1,new Map),yn(qr,I0,new Map),yn(qr,HE,new WeakMap),yn(qr,sm,null),yn(qr,H1,new Set),qr);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(it={}){typeof it=="string"||it instanceof URL?it={url:it}:(it instanceof ArrayBuffer||ArrayBuffer.isView(it))&&(it={data:it});const g=new PDFDocumentLoadingTask,{docId:et}=g,ot=it.url?getUrlProp(it.url):null,ct=it.data?getDataProp(it.data):null,ut=it.httpHeaders||null,dt=it.withCredentials===!0,ft=it.password??null,St=it.range instanceof PDFDataRangeTransport$1?it.range:null,kt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:2**16;let Tt=it.worker instanceof PDFWorker?it.worker:null;const Rt=it.verbosity,jt=typeof it.docBaseUrl=="string"&&!isDataScheme(it.docBaseUrl)?it.docBaseUrl:null,Ft=getFactoryUrlProp(it.cMapUrl),$t=it.cMapPacked!==!1,zt=it.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Ut=getFactoryUrlProp(it.iccUrl),Bt=getFactoryUrlProp(it.standardFontDataUrl),Ht=it.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),Jt=getFactoryUrlProp(it.wasmUrl),Zt=it.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),tn=it.stopAtErrors!==!0,nn=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,rn=it.isEvalSupported!==!1,on=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!isNodeJS,pn=typeof it.isImageDecoderSupported=="boolean"?it.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),dn=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,hn=typeof it.disableFontFace=="boolean"?it.disableFontFace:isNodeJS,un=it.fontExtraProperties===!0,En=it.enableXfa===!0,wn=it.ownerDocument||globalThis.document,Sn=it.disableRange===!0,fn=it.disableStream===!0,xn=it.disableAutoFetch===!0,an=it.pdfBug===!0,cn=it.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),bn=it.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),mn=it.enableHWA===!0,Tn=it.useWasm!==!1,An=St?St.length:it.length??NaN,Pn=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!isNodeJS&&!hn,Mn=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:!!(zt===DOMCMapReaderFactory&&Ht===DOMStandardFontDataFactory&&Zt===DOMWasmFactory&&Ft&&Bt&&Jt&&isValidFetchUrl(Ft,document.baseURI)&&isValidFetchUrl(Bt,document.baseURI)&&isValidFetchUrl(Jt,document.baseURI)),Rn=null;setVerbosityLevel(Rt);const Cn={canvasFactory:new cn({ownerDocument:wn,enableHWA:mn}),filterFactory:new bn({docId:et,ownerDocument:wn}),cMapReaderFactory:Mn?null:new zt({baseUrl:Ft,isCompressed:$t}),standardFontDataFactory:Mn?null:new Ht({baseUrl:Bt}),wasmFactory:Mn?null:new Zt({baseUrl:Jt})};Tt||(Tt=PDFWorker.create({verbosity:Rt,port:GlobalWorkerOptions.workerPort}),g._worker=Tt);const On={docId:et,apiVersion:"5.4.296",data:ct,password:ft,disableAutoFetch:xn,rangeChunkSize:kt,length:An,docBaseUrl:jt,enableXfa:En,evaluatorOptions:{maxImageSize:nn,disableFontFace:hn,ignoreErrors:tn,isEvalSupported:rn,isOffscreenCanvasSupported:on,isImageDecoderSupported:pn,canvasMaxAreaInBytes:dn,fontExtraProperties:un,useSystemFonts:Pn,useWasm:Tn,useWorkerFetch:Mn,cMapUrl:Ft,iccUrl:Ut,standardFontDataUrl:Bt,wasmUrl:Jt}},In={ownerDocument:wn,pdfBug:an,styleElement:Rn,loadingParams:{disableAutoFetch:xn,enableXfa:En}};return Tt.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const Dn=Tt.messageHandler.sendWithPromise("GetDocRequest",On,ct?[ct.buffer]:null);let Fn;if(St)Fn=new PDFDataTransportStream(St,{disableRange:Sn,disableStream:fn});else if(!ct){if(!ot)throw new Error("getDocument - no `url` parameter provided.");const Xn=isValidFetchUrl(ot)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;Fn=new Xn({url:ot,length:An,httpHeaders:ut,withCredentials:dt,rangeChunkSize:kt,disableRange:Sn,disableStream:fn})}return Dn.then(Xn=>{if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const Vn=new MessageHandler(et,Xn,Tt.port),zn=new WorkerTransport(Vn,g,Fn,In,Cn,mn);g._transport=zn,Vn.send("Ready",null)})}).catch(g._capability.reject),g}var bT;const ET=class ET{constructor(){qn(this,"_capability",Promise.withResolvers());qn(this,"_transport",null);qn(this,"_worker",null);qn(this,"docId",`d${cs(ET,bT)._++}`);qn(this,"destroyed",!1);qn(this,"onPassword",null);qn(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var g,et,ot,ct;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((et=this._transport)==null?void 0:et.destroy())}catch(ut){throw(ot=this._worker)!=null&&ot.port&&delete this._worker._pendingDestroy,ut}this._transport=null,(ct=this._worker)==null||ct.destroy(),this._worker=null}async getData(){return this._transport.getData()}};bT=new WeakMap,yn(ET,bT,0);let PDFDocumentLoadingTask=ET;var D0,WE,qE,KE,YE,jP;let PDFDataRangeTransport$1=(jP=class{constructor(g,et,ot=!1,ct=null){yn(this,D0,Promise.withResolvers());yn(this,WE,[]);yn(this,qE,[]);yn(this,KE,[]);yn(this,YE,[]);this.length=g,this.initialData=et,this.progressiveDone=ot,this.contentDispositionFilename=ct}addRangeListener(g){Kt(this,YE).push(g)}addProgressListener(g){Kt(this,KE).push(g)}addProgressiveReadListener(g){Kt(this,qE).push(g)}addProgressiveDoneListener(g){Kt(this,WE).push(g)}onDataRange(g,et){for(const ot of Kt(this,YE))ot(g,et)}onDataProgress(g,et){Kt(this,D0).promise.then(()=>{for(const ot of Kt(this,KE))ot(g,et)})}onDataProgressiveRead(g){Kt(this,D0).promise.then(()=>{for(const et of Kt(this,qE))et(g)})}onDataProgressiveDone(){Kt(this,D0).promise.then(()=>{for(const g of Kt(this,WE))g()})}transportReady(){Kt(this,D0).resolve()}requestDataRange(g,et){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},D0=new WeakMap,WE=new WeakMap,qE=new WeakMap,KE=new WeakMap,YE=new WeakMap,jP);class PDFDocumentProxy{constructor(g,et){this._pdfInfo=g,this._transport=et}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(g,et){return this._transport.getAnnotationsByType(g,et)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getOptionalContentConfig(et)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(g){return this._transport.cachedPageNumber(g)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _d,L0,Sx;class PDFPageProxy{constructor(g,et,ot,ct=!1){yn(this,L0);yn(this,_d,!1);this._pageIndex=g,this._pageInfo=et,this._transport=ot,this._stats=ct?new StatTimer:null,this._pdfBug=ct,this.commonObjs=ot.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:et=this.rotate,offsetX:ot=0,offsetY:ct=0,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}getAnnotations({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,et)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,canvas:et=g.canvas,viewport:ot,intent:ct="display",annotationMode:ut=AnnotationMode.ENABLE,transform:dt=null,background:ft=null,optionalContentConfigPromise:St=null,annotationCanvasMap:kt=null,pageColors:Tt=null,printAnnotationStorage:Rt=null,isEditing:jt=!1,recordOperations:Ft=!1,operationsFilter:$t=null}){var pn,dn,hn;(pn=this._stats)==null||pn.time("Overall");const zt=this._transport.getRenderingIntent(ct,ut,Rt,jt),{renderingIntent:Ut,cacheKey:Bt}=zt;vn(this,_d,!1),St||(St=this._transport.getOptionalContentConfig(Ut));let Ht=this._intentStates.get(Bt);Ht||(Ht=Object.create(null),this._intentStates.set(Bt,Ht)),Ht.streamReaderCancelTimeout&&(clearTimeout(Ht.streamReaderCancelTimeout),Ht.streamReaderCancelTimeout=null);const Jt=!!(Ut&RenderingIntentFlag.PRINT);Ht.displayReadyCapability||(Ht.displayReadyCapability=Promise.withResolvers(),Ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(dn=this._stats)==null||dn.time("Page Request"),this._pumpOperatorList(zt));const Zt=!!(this._pdfBug&&((hn=globalThis.StepperManager)!=null&&hn.enabled)),tn=!this.recordedBBoxes&&(Ft||Zt),nn=un=>{var En,wn;if(Ht.renderTasks.delete(rn),tn){const Sn=(En=rn.gfx)==null?void 0:En.dependencyTracker.take();Sn&&(rn.stepper&&rn.stepper.setOperatorBBoxes(Sn,rn.gfx.dependencyTracker.takeDebugMetadata()),Ft&&(this.recordedBBoxes=Sn))}Jt&&vn(this,_d,!0),_n(this,L0,Sx).call(this),un?(rn.capability.reject(un),this._abortOperatorList({intentState:Ht,reason:un instanceof Error?un:new Error(un)})):rn.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(wn=globalThis.Stats)!=null&&wn.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},rn=new InternalRenderTask({callback:nn,params:{canvas:et,canvasContext:g,dependencyTracker:tn?new CanvasDependencyTracker(et,Ht.operatorList.length,Zt):null,viewport:ot,transform:dt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:Ht.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Jt,pdfBug:this._pdfBug,pageColors:Tt,enableHWA:this._transport.enableHWA,operationsFilter:$t});(Ht.renderTasks||(Ht.renderTasks=new Set)).add(rn);const on=rn.task;return Promise.all([Ht.displayReadyCapability.promise,St]).then(([un,En])=>{var wn;if(this.destroyed){nn();return}if((wn=this._stats)==null||wn.time("Rendering"),!(En.renderingIntent&Ut))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");rn.initializeGraphics({transparency:un,optionalContentConfig:En}),rn.operatorListChanged()}).catch(nn),on}getOperatorList({intent:g="display",annotationMode:et=AnnotationMode.ENABLE,printAnnotationStorage:ot=null,isEditing:ct=!1}={}){var kt;function ut(){ft.operatorList.lastChunk&&(ft.opListReadCapability.resolve(ft.operatorList),ft.renderTasks.delete(St))}const dt=this._transport.getRenderingIntent(g,et,ot,ct,!0);let ft=this._intentStates.get(dt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(dt.cacheKey,ft));let St;return ft.opListReadCapability||(St=Object.create(null),St.operatorListChanged=ut,ft.opListReadCapability=Promise.withResolvers(),(ft.renderTasks||(ft.renderTasks=new Set)).add(St),ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(kt=this._stats)==null||kt.time("Page Request"),this._pumpOperatorList(dt)),ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:et===!0},{highWaterMark:100,size(ct){return ct.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(ot=>XfaText.textContent(ot));const et=this.streamTextContent(g);return new Promise(function(ot,ct){function ut(){dt.read().then(function({value:St,done:kt}){if(kt){ot(ft);return}ft.lang??(ft.lang=St.lang),Object.assign(ft.styles,St.styles),ft.items.push(...St.items),ut()},ct)}const dt=et.getReader(),ft={items:[],styles:Object.create(null),lang:null};ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const et of this._intentStates.values())if(this._abortOperatorList({intentState:et,reason:new Error("Page was destroyed."),force:!0}),!et.opListReadCapability)for(const ot of et.renderTasks)g.push(ot.completed),ot.cancel();return this.objs.clear(),vn(this,_d,!1),Promise.all(g)}cleanup(g=!1){vn(this,_d,!0);const et=_n(this,L0,Sx).call(this);return g&&et&&this._stats&&(this._stats=new StatTimer),et}_startRenderPage(g,et){var ct,ut;const ot=this._intentStates.get(et);ot&&((ct=this._stats)==null||ct.timeEnd("Page Request"),(ut=ot.displayReadyCapability)==null||ut.resolve(g))}_renderPageChunk(g,et){for(let ot=0,ct=g.length;ot<ct;ot++)et.operatorList.fnArray.push(g.fnArray[ot]),et.operatorList.argsArray.push(g.argsArray[ot]);et.operatorList.lastChunk=g.lastChunk,et.operatorList.separateAnnots=g.separateAnnots;for(const ot of et.renderTasks)ot.operatorListChanged();g.lastChunk&&_n(this,L0,Sx).call(this)}_pumpOperatorList({renderingIntent:g,cacheKey:et,annotationStorageSerializable:ot,modifiedIds:ct}){const{map:ut,transfer:dt}=ot,St=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:et,annotationStorage:ut,modifiedIds:ct},dt).getReader(),kt=this._intentStates.get(et);kt.streamReader=St;const Tt=()=>{St.read().then(({value:Rt,done:jt})=>{if(jt){kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Rt,kt),Tt())},Rt=>{if(kt.streamReader=null,!this._transport.destroyed){if(kt.operatorList){kt.operatorList.lastChunk=!0;for(const jt of kt.renderTasks)jt.operatorListChanged();_n(this,L0,Sx).call(this)}if(kt.displayReadyCapability)kt.displayReadyCapability.reject(Rt);else if(kt.opListReadCapability)kt.opListReadCapability.reject(Rt);else throw Rt}})};Tt()}_abortOperatorList({intentState:g,reason:et,force:ot=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!ot){if(g.renderTasks.size>0)return;if(et instanceof RenderingCancelledException){let ct=RENDERING_CANCELLED_TIMEOUT;et.extraDelay>0&&et.extraDelay<1e3&&(ct+=et.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:et,force:!0})},ct);return}}if(g.streamReader.cancel(new AbortException(et.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ct,ut]of this._intentStates)if(ut===g){this._intentStates.delete(ct);break}this.cleanup()}}}get stats(){return this._stats}}_d=new WeakMap,L0=new WeakSet,Sx=function(){if(!Kt(this,_d)||this.destroyed)return!1;for(const{renderTasks:g,operatorList:et}of this._intentStates.values())if(g.size>0||!et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),vn(this,_d,!1),!0};var om,Fl,_f,j0,ST,F0,$0,G1,uw,wT,A3,kT,C3,B0,wx,W1,hw;const Ur=class Ur{constructor({name:g=null,port:et=null,verbosity:ot=getVerbosityLevel()}={}){yn(this,G1);yn(this,wT);yn(this,kT);yn(this,B0);yn(this,om,Promise.withResolvers());yn(this,Fl,null);yn(this,_f,null);yn(this,j0,null);if(this.name=g,this.destroyed=!1,this.verbosity=ot,et){if(Kt(Ur,$0).has(et))throw new Error("Cannot use more than one PDFWorker per port.");Kt(Ur,$0).set(et,this),_n(this,wT,A3).call(this,et)}else _n(this,kT,C3).call(this)}get promise(){return Kt(this,om).promise}get port(){return Kt(this,_f)}get messageHandler(){return Kt(this,Fl)}destroy(){var g,et;this.destroyed=!0,(g=Kt(this,j0))==null||g.terminate(),vn(this,j0,null),Kt(Ur,$0).delete(Kt(this,_f)),vn(this,_f,null),(et=Kt(this,Fl))==null||et.destroy(),vn(this,Fl,null)}static create(g){const et=Kt(this,$0).get(g==null?void 0:g.port);if(et){if(et._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return et}return new Ur(g)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Kt(this,W1,hw)?Kt(this,W1,hw):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};om=new WeakMap,Fl=new WeakMap,_f=new WeakMap,j0=new WeakMap,ST=new WeakMap,F0=new WeakMap,$0=new WeakMap,G1=new WeakSet,uw=function(){Kt(this,om).resolve(),Kt(this,Fl).send("configure",{verbosity:this.verbosity})},wT=new WeakSet,A3=function(g){vn(this,_f,g),vn(this,Fl,new MessageHandler("main","worker",g)),Kt(this,Fl).on("ready",()=>{}),_n(this,G1,uw).call(this)},kT=new WeakSet,C3=function(){if(Kt(Ur,F0)||Kt(Ur,W1,hw)){_n(this,B0,wx).call(this);return}let{workerSrc:g}=Ur;try{Ur._isSameOrigin(window.location,g)||(g=Ur._createCDNWrapper(new URL(g,window.location).href));const et=new Worker(g,{type:"module"}),ot=new MessageHandler("main","worker",et),ct=()=>{ut.abort(),ot.destroy(),et.terminate(),this.destroyed?Kt(this,om).reject(new Error("Worker was destroyed")):_n(this,B0,wx).call(this)},ut=new AbortController;et.addEventListener("error",()=>{Kt(this,j0)||ct()},{signal:ut.signal}),ot.on("test",ft=>{if(ut.abort(),this.destroyed||!ft){ct();return}vn(this,Fl,ot),vn(this,_f,et),vn(this,j0,et),_n(this,G1,uw).call(this)}),ot.on("ready",ft=>{if(ut.abort(),this.destroyed){ct();return}try{dt()}catch{_n(this,B0,wx).call(this)}});const dt=()=>{const ft=new Uint8Array;ot.send("test",ft,[ft.buffer])};dt();return}catch{info("The worker has been disabled.")}_n(this,B0,wx).call(this)},B0=new WeakSet,wx=function(){Kt(Ur,F0)||(warn("Setting up fake worker."),vn(Ur,F0,!0)),Ur._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){Kt(this,om).reject(new Error("Worker was destroyed"));return}const et=new LoopbackPort;vn(this,_f,et);const ot=`fake${cs(Ur,ST)._++}`,ct=new MessageHandler(ot+"_worker",ot,et);g.setup(ct,et),vn(this,Fl,new MessageHandler(ot,ot+"_worker",et)),_n(this,G1,uw).call(this)}).catch(g=>{Kt(this,om).reject(new Error(`Setting up fake worker failed: "${g.message}".`))})},W1=new WeakSet,hw=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},yn(Ur,W1),yn(Ur,ST,0),yn(Ur,F0,!1),yn(Ur,$0,new WeakMap),isNodeJS&&(vn(Ur,F0,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Ur._isSameOrigin=(g,et)=>{const ot=URL.parse(g);if(!(ot!=null&&ot.origin)||ot.origin==="null")return!1;const ct=new URL(et,ot);return ot.origin===ct.origin},Ur._createCDNWrapper=g=>{const et=`await import("${g}");`;return URL.createObjectURL(new Blob([et],{type:"text/javascript"}))},Ur.fromPort=g=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ur.create(g)};let PDFWorker=Ur;var ep,mu,q1,K1,tp,V0,kx;class WorkerTransport{constructor(g,et,ot,ct,ut,dt){yn(this,V0);yn(this,ep,new Map);yn(this,mu,new Map);yn(this,q1,new Map);yn(this,K1,new Map);yn(this,tp,null);this.messageHandler=g,this.loadingTask=et,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ct.ownerDocument,styleElement:ct.styleElement}),this.loadingParams=ct.loadingParams,this._params=ct,this.canvasFactory=ut.canvasFactory,this.filterFactory=ut.filterFactory,this.cMapReaderFactory=ut.cMapReaderFactory,this.standardFontDataFactory=ut.standardFontDataFactory,this.wasmFactory=ut.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ot,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=dt,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(g,et=AnnotationMode.ENABLE,ot=null,ct=!1,ut=!1){let dt=RenderingIntentFlag.DISPLAY,ft=SerializableEmpty;switch(g){case"any":dt=RenderingIntentFlag.ANY;break;case"display":break;case"print":dt=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${g}`)}const St=dt&RenderingIntentFlag.PRINT&&ot instanceof PrintAnnotationStorage?ot:this.annotationStorage;switch(et){case AnnotationMode.DISABLE:dt+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:dt+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:dt+=RenderingIntentFlag.ANNOTATIONS_STORAGE,ft=St.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${et}`)}ct&&(dt+=RenderingIntentFlag.IS_EDITING),ut&&(dt+=RenderingIntentFlag.OPLIST);const{ids:kt,hash:Tt}=St.modifiedIds,Rt=[dt,ft.hash,Tt];return{renderingIntent:dt,cacheKey:Rt.join("_"),annotationStorageSerializable:ft,modifiedIds:kt}}destroy(){var ot;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(ot=Kt(this,tp))==null||ot.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ct of Kt(this,mu).values())g.push(ct._destroy());Kt(this,mu).clear(),Kt(this,q1).clear(),Kt(this,K1).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const et=this.messageHandler.sendWithPromise("Terminate",null);return g.push(et),Promise.all(g).then(()=>{var ct,ut;this.commonObjs.clear(),this.fontLoader.clear(),Kt(this,ep).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ct=this._networkStream)==null||ct.cancelAllRequests(new AbortException("Worker was terminated.")),(ut=this.messageHandler)==null||ut.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:et}=this;g.on("GetReader",(ot,ct)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ut=>{this._lastProgress={loaded:ut.loaded,total:ut.total}},ct.onPull=()=>{this._fullReader.read().then(function({value:ut,done:dt}){if(dt){ct.close();return}assert(ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(ut),1,[ut])}).catch(ut=>{ct.error(ut)})},ct.onCancel=ut=>{this._fullReader.cancel(ut),ct.ready.catch(dt=>{if(!this.destroyed)throw dt})}}),g.on("ReaderHeadersReady",async ot=>{var ft;await this._fullReader.headersReady;const{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}=this._fullReader;return(!ct||!ut)&&(this._lastProgress&&((ft=et.onProgress)==null||ft.call(et,this._lastProgress)),this._fullReader.onProgress=St=>{var kt;(kt=et.onProgress)==null||kt.call(et,{loaded:St.loaded,total:St.total})}),{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}}),g.on("GetRangeReader",(ot,ct)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ut=this._networkStream.getRangeReader(ot.begin,ot.end);if(!ut){ct.close();return}ct.onPull=()=>{ut.read().then(function({value:dt,done:ft}){if(ft){ct.close();return}assert(dt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(dt),1,[dt])}).catch(dt=>{ct.error(dt)})},ct.onCancel=dt=>{ut.cancel(dt),ct.ready.catch(ft=>{if(!this.destroyed)throw ft})}}),g.on("GetDoc",({pdfInfo:ot})=>{this._numPages=ot.numPages,this._htmlForXfa=ot.htmlForXfa,delete ot.htmlForXfa,et._capability.resolve(new PDFDocumentProxy(ot,this))}),g.on("DocException",ot=>{et._capability.reject(wrapReason(ot))}),g.on("PasswordRequest",ot=>{vn(this,tp,Promise.withResolvers());try{if(!et.onPassword)throw wrapReason(ot);const ct=ut=>{ut instanceof Error?Kt(this,tp).reject(ut):Kt(this,tp).resolve({password:ut})};et.onPassword(ct,ot.code)}catch(ct){Kt(this,tp).reject(ct)}return Kt(this,tp).promise}),g.on("DataLoaded",ot=>{var ct;(ct=et.onProgress)==null||ct.call(et,{loaded:ot.length,total:ot.length}),this.downloadInfoCapability.resolve(ot)}),g.on("StartRenderPage",ot=>{if(this.destroyed)return;Kt(this,mu).get(ot.pageIndex)._startRenderPage(ot.transparency,ot.cacheKey)}),g.on("commonobj",([ot,ct,ut])=>{var dt;if(this.destroyed||this.commonObjs.has(ot))return null;switch(ct){case"Font":if("error"in ut){const Rt=ut.error;warn(`Error during font loading: ${Rt}`),this.commonObjs.resolve(ot,Rt);break}const ft=new FontInfo(ut),St=this._params.pdfBug&&((dt=globalThis.FontInspector)!=null&&dt.enabled)?(Rt,jt)=>globalThis.FontInspector.fontAdded(Rt,jt):null,kt=new FontFaceObject(ft,St,ut.extra,ut.charProcOperatorList);this.fontLoader.bind(kt).catch(()=>g.sendWithPromise("FontFallback",{id:ot})).finally(()=>{!kt.fontExtraProperties&&kt.data&&kt.clearData(),this.commonObjs.resolve(ot,kt)});break;case"CopyLocalImage":const{imageRef:Tt}=ut;assert(Tt,"The imageRef must be defined.");for(const Rt of Kt(this,mu).values())for(const[,jt]of Rt.objs)if((jt==null?void 0:jt.ref)===Tt)return jt.dataLen?(this.commonObjs.resolve(ot,structuredClone(jt)),jt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ot,ut);break;default:throw new Error(`Got unknown common object type ${ct}`)}return null}),g.on("obj",([ot,ct,ut,dt])=>{var St;if(this.destroyed)return;const ft=Kt(this,mu).get(ct);if(!ft.objs.has(ot)){if(ft._intentStates.size===0){(St=dt==null?void 0:dt.bitmap)==null||St.close();return}switch(ut){case"Image":case"Pattern":ft.objs.resolve(ot,dt);break;default:throw new Error(`Got unknown object type ${ut}`)}}}),g.on("DocProgress",ot=>{var ct;this.destroyed||(ct=et.onProgress)==null||ct.call(et,{loaded:ot.loaded,total:ot.total})}),g.on("FetchBinaryData",async ot=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ct=this[ot.type];if(!ct)throw new Error(`${ot.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ct.fetch(ot)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ot;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((ot=this._fullReader)==null?void 0:ot.filename)??null},et).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const et=g-1,ot=Kt(this,q1).get(et);if(ot)return ot;const ct=this.messageHandler.sendWithPromise("GetPage",{pageIndex:et}).then(ut=>{if(this.destroyed)throw new Error("Transport destroyed");ut.refStr&&Kt(this,K1).set(ut.refStr,g);const dt=new PDFPageProxy(et,ut,this,this._params.pdfBug);return Kt(this,mu).set(et,dt),dt});return Kt(this,q1).set(et,ct),ct}getPageIndex(g){return isRefProxy(g)?this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(g,et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:et})}getFieldObjects(){return _n(this,V0,kx).call(this,"GetFieldObjects")}hasJSActions(){return _n(this,V0,kx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(g,et){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:g,pageIndexesToSkip:et})}getDocJSActions(){return _n(this,V0,kx).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(g){return _n(this,V0,kx).call(this,"GetOptionalContentConfig").then(et=>new OptionalContentConfig(et,g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",et=Kt(this,ep).get(g);if(et)return et;const ot=this.messageHandler.sendWithPromise(g,null).then(ct=>{var ut,dt;return{info:ct[0],metadata:ct[1]?new Metadata(ct[1]):null,contentDispositionFilename:((ut=this._fullReader)==null?void 0:ut.filename)??null,contentLength:((dt=this._fullReader)==null?void 0:dt.contentLength)??null}});return Kt(this,ep).set(g,ot),ot}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const et of Kt(this,mu).values())if(!et.cleanup())throw new Error(`startCleanup: Page ${et.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),Kt(this,ep).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(g){if(!isRefProxy(g))return null;const et=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return Kt(this,K1).get(et)??null}}ep=new WeakMap,mu=new WeakMap,q1=new WeakMap,K1=new WeakMap,tp=new WeakMap,V0=new WeakSet,kx=function(g,et=null){const ot=Kt(this,ep).get(g);if(ot)return ot;const ct=this.messageHandler.sendWithPromise(g,et);return Kt(this,ep).set(g,ct),ct};var am;class RenderTask{constructor(g){yn(this,am,null);qn(this,"onContinue",null);qn(this,"onError",null);vn(this,am,g)}get promise(){return Kt(this,am).capability.promise}cancel(g=0){Kt(this,am).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=Kt(this,am).operatorList;if(!g)return!1;const{annotationCanvasMap:et}=Kt(this,am);return g.form||g.canvas&&(et==null?void 0:et.size)>0}}am=new WeakMap;var lm,z0;const Wm=class Wm{constructor({callback:g,params:et,objs:ot,commonObjs:ct,annotationCanvasMap:ut,operatorList:dt,pageIndex:ft,canvasFactory:St,filterFactory:kt,useRequestAnimationFrame:Tt=!1,pdfBug:Rt=!1,pageColors:jt=null,enableHWA:Ft=!1,operationsFilter:$t=null}){yn(this,lm,null);this.callback=g,this.params=et,this.objs=ot,this.commonObjs=ct,this.annotationCanvasMap=ut,this.operatorListIdx=null,this.operatorList=dt,this._pageIndex=ft,this.canvasFactory=St,this.filterFactory=kt,this._pdfBug=Rt,this.pageColors=jt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=et.canvas,this._canvasContext=et.canvas?null:et.canvasContext,this._enableHWA=Ft,this._dependencyTracker=et.dependencyTracker,this._operationsFilter=$t}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:et}){var St,kt;if(this.cancelled)return;if(this._canvas){if(Kt(Wm,z0).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Kt(Wm,z0).add(this._canvas)}this._pdfBug&&((St=globalThis.StepperManager)!=null&&St.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:ot,transform:ct,background:ut,dependencyTracker:dt}=this.params,ft=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:et},this.annotationCanvasMap,this.pageColors,dt),this.gfx.beginDrawing({transform:ct,viewport:ot,transparency:g,background:ut}),this.operatorListIdx=0,this.graphicsReady=!0,(kt=this.graphicsReadyCallback)==null||kt.call(this)}cancel(g=null,et=0){var ot,ct,ut;this.running=!1,this.cancelled=!0,(ot=this.gfx)==null||ot.endDrawing(),Kt(this,lm)&&(window.cancelAnimationFrame(Kt(this,lm)),vn(this,lm,null)),Kt(Wm,z0).delete(this._canvas),g||(g=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,et)),this.callback(g),(ut=(ct=this.task).onError)==null||ut.call(ct,g)}operatorListChanged(){var g,et;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.gfx.dependencyTracker)==null||g.growOperationsCount(this.operatorList.fnArray.length),(et=this.stepper)==null||et.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?vn(this,lm,window.requestAnimationFrame(()=>{vn(this,lm,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Kt(Wm,z0).delete(this._canvas),this.callback())))}};lm=new WeakMap,z0=new WeakMap,yn(Wm,z0,new WeakSet);let InternalRenderTask=Wm;const version="5.4.296",build="f56dc8601";var Ro,H0,Y1,ds,XE,X1,np,JE,cm,$l,QE,ZE,hC,eS,dC,tS,fC,rp,zm,TT,R3,gu,Rp;const uo=class uo{constructor({editor:g=null,uiManager:et=null}){yn(this,ZE);yn(this,eS);yn(this,tS);yn(this,rp);yn(this,TT);yn(this,gu);yn(this,Ro,null);yn(this,H0,null);yn(this,Y1,void 0);yn(this,ds,null);yn(this,XE,!1);yn(this,X1,!1);yn(this,np,null);yn(this,JE,void 0);yn(this,cm,null);yn(this,$l,null);var ot,ct;g?(vn(this,X1,!1),vn(this,np,g)):vn(this,X1,!0),vn(this,$l,(g==null?void 0:g._uiManager)||et),vn(this,JE,Kt(this,$l)._eventBus),vn(this,Y1,((ot=g==null?void 0:g.color)==null?void 0:ot.toUpperCase())||((ct=Kt(this,$l))==null?void 0:ct.highlightColors.values().next().value)||"#FFFF98"),Kt(uo,QE)||vn(uo,QE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],uo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],uo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],uo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],uo.prototype._moveToPrevious],[["Home","mac+Home"],uo.prototype._moveToBeginning],[["End","mac+End"],uo.prototype._moveToEnd]]))}renderButton(){const g=vn(this,Ro,document.createElement("button"));g.className="colorPicker",g.tabIndex="0",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),g.ariaHasPopup="true",Kt(this,np)&&(g.ariaControls=`${Kt(this,np).id}_colorpicker_dropdown`);const et=Kt(this,$l)._signal;g.addEventListener("click",_n(this,rp,zm).bind(this),{signal:et}),g.addEventListener("keydown",_n(this,tS,fC).bind(this),{signal:et});const ot=vn(this,H0,document.createElement("span"));return ot.className="swatch",ot.ariaHidden="true",ot.style.backgroundColor=Kt(this,Y1),g.append(ot),g}renderMainDropdown(){const g=vn(this,ds,_n(this,ZE,hC).call(this));return g.ariaOrientation="horizontal",g.ariaLabelledBy="highlightColorPickerLabel",g}_colorSelectFromKeyboard(g){if(g.target===Kt(this,Ro)){_n(this,rp,zm).call(this,g);return}const et=g.target.getAttribute("data-color");et&&_n(this,eS,dC).call(this,et,g)}_moveToNext(g){var et,ot;if(!Kt(this,gu,Rp)){_n(this,rp,zm).call(this,g);return}if(g.target===Kt(this,Ro)){(et=Kt(this,ds).firstChild)==null||et.focus();return}(ot=g.target.nextSibling)==null||ot.focus()}_moveToPrevious(g){var et,ot;if(g.target===((et=Kt(this,ds))==null?void 0:et.firstChild)||g.target===Kt(this,Ro)){Kt(this,gu,Rp)&&this._hideDropdownFromKeyboard();return}Kt(this,gu,Rp)||_n(this,rp,zm).call(this,g),(ot=g.target.previousSibling)==null||ot.focus()}_moveToBeginning(g){var et;if(!Kt(this,gu,Rp)){_n(this,rp,zm).call(this,g);return}(et=Kt(this,ds).firstChild)==null||et.focus()}_moveToEnd(g){var et;if(!Kt(this,gu,Rp)){_n(this,rp,zm).call(this,g);return}(et=Kt(this,ds).lastChild)==null||et.focus()}hideDropdown(){var g,et;(g=Kt(this,ds))==null||g.classList.add("hidden"),Kt(this,Ro).ariaExpanded="false",(et=Kt(this,cm))==null||et.abort(),vn(this,cm,null)}_hideDropdownFromKeyboard(){var g;if(!Kt(this,X1)){if(!Kt(this,gu,Rp)){(g=Kt(this,np))==null||g.unselect();return}this.hideDropdown(),Kt(this,Ro).focus({preventScroll:!0,focusVisible:Kt(this,XE)})}}updateColor(g){if(Kt(this,H0)&&(Kt(this,H0).style.backgroundColor=g),!Kt(this,ds))return;const et=Kt(this,$l).highlightColors.values();for(const ot of Kt(this,ds).children)ot.ariaSelected=et.next().value===g.toUpperCase()}destroy(){var g,et;(g=Kt(this,Ro))==null||g.remove(),vn(this,Ro,null),vn(this,H0,null),(et=Kt(this,ds))==null||et.remove(),vn(this,ds,null)}};Ro=new WeakMap,H0=new WeakMap,Y1=new WeakMap,ds=new WeakMap,XE=new WeakMap,X1=new WeakMap,np=new WeakMap,JE=new WeakMap,cm=new WeakMap,$l=new WeakMap,QE=new WeakMap,ZE=new WeakSet,hC=function(){const g=document.createElement("div"),et=Kt(this,$l)._signal;g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.className="dropdown",g.role="listbox",g.ariaMultiSelectable="false",g.ariaOrientation="vertical",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Kt(this,np)&&(g.id=`${Kt(this,np).id}_colorpicker_dropdown`);for(const[ot,ct]of Kt(this,$l).highlightColors){const ut=document.createElement("button");ut.tabIndex="0",ut.role="option",ut.setAttribute("data-color",ct),ut.title=ot,ut.setAttribute("data-l10n-id",Kt(uo,QE)[ot]);const dt=document.createElement("span");ut.append(dt),dt.className="swatch",dt.style.backgroundColor=ct,ut.ariaSelected=ct===Kt(this,Y1),ut.addEventListener("click",_n(this,eS,dC).bind(this,ct),{signal:et}),g.append(ut)}return g.addEventListener("keydown",_n(this,tS,fC).bind(this),{signal:et}),g},eS=new WeakSet,dC=function(g,et){et.stopPropagation(),Kt(this,JE).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:g}),this.updateColor(g)},tS=new WeakSet,fC=function(g){uo._keyboardManager.exec(this,g)},rp=new WeakSet,zm=function(g){if(Kt(this,gu,Rp)){this.hideDropdown();return}if(vn(this,XE,g.detail===0),Kt(this,cm)||(vn(this,cm,new AbortController),window.addEventListener("pointerdown",_n(this,TT,R3).bind(this),{signal:Kt(this,$l).combinedSignal(Kt(this,cm))})),Kt(this,Ro).ariaExpanded="true",Kt(this,ds)){Kt(this,ds).classList.remove("hidden");return}const et=vn(this,ds,_n(this,ZE,hC).call(this));Kt(this,Ro).append(et)},TT=new WeakSet,R3=function(g){var et;(et=Kt(this,ds))!=null&&et.contains(g.target)||this.hideDropdown()},gu=new WeakSet,Rp=function(){return Kt(this,ds)&&!Kt(this,ds).classList.contains("hidden")},yn(uo,QE,null);let ColorPicker=uo;var yu,nS,J1,rS;const qm=class qm{constructor(g){yn(this,yu,null);yn(this,nS,null);yn(this,J1,null);vn(this,nS,g),vn(this,J1,g._uiManager),Kt(qm,rS)||vn(qm,rS,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Kt(this,yu))return Kt(this,yu);const{editorType:g,colorType:et,colorValue:ot}=Kt(this,nS),ct=vn(this,yu,document.createElement("input"));return ct.type="color",ct.value=ot||"#000000",ct.className="basicColorPicker",ct.tabIndex=0,ct.setAttribute("data-l10n-id",Kt(qm,rS)[g]),ct.addEventListener("input",()=>{Kt(this,J1).updateParams(et,ct.value)},{signal:Kt(this,J1)._signal}),ct}update(g){Kt(this,yu)&&(Kt(this,yu).value=g)}destroy(){var g;(g=Kt(this,yu))==null||g.remove(),vn(this,yu,null)}hideDropdown(){}};yu=new WeakMap,nS=new WeakMap,J1=new WeakMap,rS=new WeakMap,yn(qm,rS,null);let BasicColorPicker=qm;function makeColorComp(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function scaleAndClamp(it){return Math.max(0,Math.min(255,255*it))}class ColorConverters{static CMYK_G([g,et,ot,ct]){return["G",1-Math.min(1,.3*g+.59*ot+.11*et+ct)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=scaleAndClamp(g),[g,g,g]}static G_HTML([g]){const et=makeColorComp(g);return`#${et}${et}${et}`}static RGB_G([g,et,ot]){return["G",.3*g+.59*et+.11*ot]}static RGB_rgb(g){return g.map(scaleAndClamp)}static RGB_HTML(g){return`#${g.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,et,ot,ct]){return["RGB",1-Math.min(1,g+ct),1-Math.min(1,ot+ct),1-Math.min(1,et+ct)]}static CMYK_rgb([g,et,ot,ct]){return[scaleAndClamp(1-Math.min(1,g+ct)),scaleAndClamp(1-Math.min(1,ot+ct)),scaleAndClamp(1-Math.min(1,et+ct))]}static CMYK_HTML(g){const et=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(et)}static RGB_CMYK([g,et,ot]){const ct=1-g,ut=1-et,dt=1-ot,ft=Math.min(ct,ut,dt);return["CMYK",ct,ut,dt,ft]}}class BaseSVGFactory{create(g,et,ot=!1){if(g<=0||et<=0)throw new Error("Invalid SVG dimensions");const ct=this._createSVG("svg:svg");return ct.setAttribute("version","1.1"),ot||(ct.setAttribute("width",`${g}px`),ct.setAttribute("height",`${et}px`)),ct.setAttribute("preserveAspectRatio","none"),ct.setAttribute("viewBox",`0 0 ${g} ${et}`),ct}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(g){return document.createElementNS(SVG_NS,g)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(g){switch(g.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(g);case AnnotationType.TEXT:return new TextAnnotationElement(g);case AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(g);case"Btn":return g.data.radioButton?new RadioButtonWidgetAnnotationElement(g):g.data.checkBox?new CheckboxWidgetAnnotationElement(g):new PushButtonWidgetAnnotationElement(g);case"Ch":return new ChoiceWidgetAnnotationElement(g);case"Sig":return new SignatureWidgetAnnotationElement(g)}return new WidgetAnnotationElement(g);case AnnotationType.POPUP:return new PopupAnnotationElement(g);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(g);case AnnotationType.LINE:return new LineAnnotationElement(g);case AnnotationType.SQUARE:return new SquareAnnotationElement(g);case AnnotationType.CIRCLE:return new CircleAnnotationElement(g);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(g);case AnnotationType.CARET:return new CaretAnnotationElement(g);case AnnotationType.INK:return new InkAnnotationElement(g);case AnnotationType.POLYGON:return new PolygonAnnotationElement(g);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(g);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(g);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(g);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(g);case AnnotationType.STAMP:return new StampAnnotationElement(g);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(g);default:return new AnnotationElement(g)}}}var U0,Q1,ba,iS,pC;const qC=class qC{constructor(g,{isRenderable:et=!1,ignoreBorder:ot=!1,createQuadrilaterals:ct=!1}={}){yn(this,iS);yn(this,U0,null);yn(this,Q1,!1);yn(this,ba,null);this.isRenderable=et,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableComment=g.enableComment,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,et&&(this.container=this._createContainer(ot)),ct&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:g,richText:et}){return!!(g!=null&&g.str||et!=null&&et.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qC._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var ot;const{data:g}=this,et=(ot=this.annotationStorage)==null?void 0:ot.getEditor(g.id);return et?et.getData():g}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var ft;const g=(ft=this.annotationStorage)==null?void 0:ft.getEditor(this.data.id);if(g)return g.commentButtonPositionInPage;const{quadPoints:et,inkLists:ot,rect:ct}=this.data;let ut=-1/0,dt=-1/0;if((et==null?void 0:et.length)>=8){for(let St=0;St<et.length;St+=8)et[St+1]>dt?(dt=et[St+1],ut=et[St+2]):et[St+1]===dt&&(ut=Math.max(ut,et[St+2]));return[ut,dt]}if((ot==null?void 0:ot.length)>=1){for(const St of ot)for(let kt=0,Tt=St.length;kt<Tt;kt+=2)St[kt+1]>dt?(dt=St[kt+1],ut=St[kt]):St[kt+1]===dt&&(ut=Math.max(ut,St[kt]));if(ut!==1/0)return[ut,dt]}return ct?[ct[2],ct[3]]:null}_normalizePoint(g){const{page:{view:et},viewport:{rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}}=this.parent;return g[1]=et[3]-g[1]+et[1],g[0]=100*(g[0]-ut)/ot,g[1]=100*(g[1]-dt)/ct,g}get commentText(){var et,ot,ct;const{data:g}=this;return((ot=(et=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${g.id}`))==null?void 0:et.popup)==null?void 0:ot.contents)||((ct=g.contentsObj)==null?void 0:ct.str)||""}set commentText(g){const{data:et}=this,ot={deleted:!g,contents:g||""};this.annotationStorage.updateEditor(et.id,{popup:ot})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${et.id}`,{id:et.id,annotationType:et.annotationType,pageIndex:this.parent.page._pageIndex,popup:ot,popupRef:et.popupRef,modificationDate:new Date}),g||this.removePopup()}removePopup(){var g,et;(et=((g=Kt(this,ba))==null?void 0:g.popup)||this.popup)==null||et.remove(),vn(this,ba,this.popup=null)}updateEdited(g){var ut;if(!this.container)return;g.rect&&(Kt(this,U0)||vn(this,U0,{rect:this.data.rect.slice(0)}));const{rect:et,popup:ot}=g;et&&_n(this,iS,pC).call(this,et);let ct=((ut=Kt(this,ba))==null?void 0:ut.popup)||this.popup;!ct&&(ot!=null&&ot.text)&&(this._createPopup(ot),ct=Kt(this,ba).popup),ct&&(ct.updateEdited(g),ot!=null&&ot.deleted&&(ct.remove(),vn(this,ba,null),this.popup=null))}resetEdited(){var g;Kt(this,U0)&&(_n(this,iS,pC).call(this,Kt(this,U0).rect),(g=Kt(this,ba))==null||g.popup.resetEdited(),vn(this,U0,null))}_createContainer(g){const{data:et,parent:{page:ot,viewport:ct}}=this,ut=document.createElement("section");ut.setAttribute("data-annotation-id",et.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ut.tabIndex=0);const{style:dt}=ut;if(dt.zIndex=this.parent.zIndex,this.parent.zIndex+=2,et.alternativeText&&(ut.title=et.alternativeText),et.noRotate&&ut.classList.add("norotate"),!et.rect||this instanceof PopupAnnotationElement){const{rotation:zt}=et;return!et.hasOwnCanvas&&zt!==0&&this.setRotation(zt,ut),ut}const{width:ft,height:St}=this;if(!g&&et.borderStyle.width>0){dt.borderWidth=`${et.borderStyle.width}px`;const zt=et.borderStyle.horizontalCornerRadius,Ut=et.borderStyle.verticalCornerRadius;if(zt>0||Ut>0){const Ht=`calc(${zt}px * var(--total-scale-factor)) / calc(${Ut}px * var(--total-scale-factor))`;dt.borderRadius=Ht}else if(this instanceof RadioButtonWidgetAnnotationElement){const Ht=`calc(${ft}px * var(--total-scale-factor)) / calc(${St}px * var(--total-scale-factor))`;dt.borderRadius=Ht}switch(et.borderStyle.style){case AnnotationBorderStyleType.SOLID:dt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:dt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:dt.borderBottomStyle="solid";break}const Bt=et.borderColor||null;Bt?(vn(this,Q1,!0),dt.borderColor=Util$1.makeHexColor(Bt[0]|0,Bt[1]|0,Bt[2]|0)):dt.borderWidth=0}const kt=Util$1.normalizeRect([et.rect[0],ot.view[3]-et.rect[1]+ot.view[1],et.rect[2],ot.view[3]-et.rect[3]+ot.view[1]]),{pageWidth:Tt,pageHeight:Rt,pageX:jt,pageY:Ft}=ct.rawDims;dt.left=`${100*(kt[0]-jt)/Tt}%`,dt.top=`${100*(kt[1]-Ft)/Rt}%`;const{rotation:$t}=et;return et.hasOwnCanvas||$t===0?(dt.width=`${100*ft/Tt}%`,dt.height=`${100*St/Rt}%`):this.setRotation($t,ut),ut}setRotation(g,et=this.container){if(!this.data.rect)return;const{pageWidth:ot,pageHeight:ct}=this.parent.viewport.rawDims;let{width:ut,height:dt}=this;g%180!==0&&([ut,dt]=[dt,ut]),et.style.width=`${100*ut/ot}%`,et.style.height=`${100*dt/ct}%`,et.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(et,ot,ct)=>{const ut=ct.detail[et],dt=ut[0],ft=ut.slice(1);ct.target.style[ot]=ColorConverters[`${dt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[ot]:ColorConverters[`${dt}_rgb`](ft)})};return shadow(this,"_commonActions",{display:et=>{const{display:ot}=et.detail,ct=ot%2===1;this.container.style.visibility=ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ct,noPrint:ot===1||ot===2})},print:et=>{this.annotationStorage.setValue(this.data.id,{noPrint:!et.detail.print})},hidden:et=>{const{hidden:ot}=et.detail;this.container.style.visibility=ot?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ot,noView:ot})},focus:et=>{setTimeout(()=>et.target.focus({preventScroll:!1}),0)},userName:et=>{et.target.title=et.detail.userName},readonly:et=>{et.target.disabled=et.detail.readonly},required:et=>{this._setRequired(et.target,et.detail.required)},bgColor:et=>{g("bgColor","backgroundColor",et)},fillColor:et=>{g("fillColor","backgroundColor",et)},fgColor:et=>{g("fgColor","color",et)},textColor:et=>{g("textColor","color",et)},borderColor:et=>{g("borderColor","borderColor",et)},strokeColor:et=>{g("strokeColor","borderColor",et)},rotation:et=>{const ot=et.detail.rotation;this.setRotation(ot),this.annotationStorage.setValue(this.data.id,{rotation:ot})}})}_dispatchEventFromSandbox(g,et){const ot=this._commonActions;for(const ct of Object.keys(et.detail)){const ut=g[ct]||ot[ct];ut==null||ut(et)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const et=this.annotationStorage.getRawValue(this.data.id);if(!et)return;const ot=this._commonActions;for(const[ct,ut]of Object.entries(et)){const dt=ot[ct];if(dt){const ft={detail:{[ct]:ut},target:g};dt(ft),delete et[ct]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[et,ot,ct,ut]=this.data.rect.map(zt=>Math.fround(zt));if(g.length===8){const[zt,Ut,Bt,Ht]=g.subarray(2,6);if(ct===zt&&ut===Ut&&et===Bt&&ot===Ht)return}const{style:dt}=this.container;let ft;if(Kt(this,Q1)){const{borderColor:zt,borderWidth:Ut}=dt;dt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${zt}" stroke-width="${Ut}">`],this.container.classList.add("hasBorder")}const St=ct-et,kt=ut-ot,{svgFactory:Tt}=this,Rt=Tt.createElement("svg");Rt.classList.add("quadrilateralsContainer"),Rt.setAttribute("width",0),Rt.setAttribute("height",0),Rt.role="none";const jt=Tt.createElement("defs");Rt.append(jt);const Ft=Tt.createElement("clipPath"),$t=`clippath_${this.data.id}`;Ft.setAttribute("id",$t),Ft.setAttribute("clipPathUnits","objectBoundingBox"),jt.append(Ft);for(let zt=2,Ut=g.length;zt<Ut;zt+=8){const Bt=g[zt],Ht=g[zt+1],Jt=g[zt+2],Zt=g[zt+3],tn=Tt.createElement("rect"),nn=(Jt-et)/St,rn=(ut-Ht)/kt,on=(Bt-Jt)/St,pn=(Ht-Zt)/kt;tn.setAttribute("x",nn),tn.setAttribute("y",rn),tn.setAttribute("width",on),tn.setAttribute("height",pn),Ft.append(tn),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${nn}" y="${rn}" width="${on}" height="${pn}"/>`)}Kt(this,Q1)&&(ft.push("</g></svg>')"),dt.backgroundImage=ft.join("")),this.container.append(Rt),this.container.style.clipPath=`url(#${$t})`}_createPopup(g=null){const{data:et}=this;let ot,ct;g?(ot={str:g.text},ct=g.date):(ot=et.contentsObj,ct=et.modificationDate);const ut=vn(this,ba,new PopupAnnotationElement({data:{color:et.color,titleObj:et.titleObj,modificationDate:ct,contentsObj:ot,richText:et.richText,parentRect:et.rect,borderStyle:0,id:`popup_${et.id}`,rotation:et.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ut.render())}get hasPopupElement(){return!!(Kt(this,ba)||this.popup||this.data.popupRef)}get extraPopupElement(){return Kt(this,ba)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,et=null){const ot=[];if(this._fieldObjects){const ct=this._fieldObjects[g];if(ct)for(const{page:ut,id:dt,exportValues:ft}of ct){if(ut===-1||dt===et)continue;const St=typeof ft=="string"?ft:null,kt=document.querySelector(`[data-element-id="${dt}"]`);if(kt&&!GetElementsByNameSet.has(kt)){warn(`_getElementsByName - element not allowed: ${dt}`);continue}ot.push({id:dt,exportValue:St,domElement:kt})}return ot}for(const ct of document.getElementsByName(g)){const{exportValue:ut}=ct,dt=ct.getAttribute("data-element-id");dt!==et&&GetElementsByNameSet.has(ct)&&ot.push({id:dt,exportValue:ut,domElement:ct})}return ot}show(){var g;this.container&&(this.container.hidden=!1),(g=this.popup)==null||g.maybeShow()}hide(){var g;this.container&&(this.container.hidden=!0),(g=this.popup)==null||g.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const et of g)et.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:g,data:{id:et}}=this;this.container.addEventListener("dblclick",()=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("switchannotationeditormode",{source:this,mode:g,editId:et,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};U0=new WeakMap,Q1=new WeakMap,ba=new WeakMap,iS=new WeakSet,pC=function(g){const{container:{style:et},data:{rect:ot,rotation:ct},parent:{viewport:{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}}}=this;ot==null||ot.splice(0,4,...g),et.left=`${100*(g[0]-ft)/ut}%`,et.top=`${100*(dt-g[3]+St)/dt}%`,ct===0?(et.width=`${100*(g[2]-g[0])/ut}%`,et.height=`${100*(g[3]-g[1])/dt}%`):this.setRotation(ct)};let AnnotationElement=qC;class EditorAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.editor=g.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:g}=this;g.hasComment&&(this._createPopup(g.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(g){this.editor.comment=g,g||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var sp,Hm,_T,P3,CT,N3;class LinkAnnotationElement extends AnnotationElement{constructor(et,ot=null){super(et,{isRenderable:!0,ignoreBorder:!!(ot!=null&&ot.ignoreBorder),createQuadrilaterals:!0});yn(this,sp);yn(this,_T);yn(this,CT);this.isTooltipOnly=et.data.isTooltipOnly}render(){const{data:et,linkService:ot}=this,ct=document.createElement("a");ct.setAttribute("data-element-id",et.id);let ut=!1;return et.url?(ot.addLinkAttributes(ct,et.url,et.newWindow),ut=!0):et.action?(this._bindNamedAction(ct,et.action,et.overlaidText),ut=!0):et.attachment?(_n(this,_T,P3).call(this,ct,et.attachment,et.overlaidText,et.attachmentDest),ut=!0):et.setOCGState?(_n(this,CT,N3).call(this,ct,et.setOCGState,et.overlaidText),ut=!0):et.dest?(this._bindLink(ct,et.dest,et.overlaidText),ut=!0):(et.actions&&(et.actions.Action||et.actions["Mouse Up"]||et.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ct,et),ut=!0),et.resetForm?(this._bindResetFormAction(ct,et.resetForm),ut=!0):this.isTooltipOnly&&!ut&&(this._bindLink(ct,""),ut=!0)),this.container.classList.add("linkAnnotation"),ut&&this.container.append(ct),this.container}_bindLink(et,ot,ct=""){et.href=this.linkService.getDestinationHash(ot),et.onclick=()=>(ot&&this.linkService.goToDestination(ot),!1),(ot||ot==="")&&_n(this,sp,Hm).call(this),ct&&(et.title=ct)}_bindNamedAction(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeNamedAction(ot),!1),ct&&(et.title=ct),_n(this,sp,Hm).call(this)}_bindJSAction(et,ot){et.href=this.linkService.getAnchorUrl("");const ct=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ut of Object.keys(ot.actions)){const dt=ct.get(ut);dt&&(et[dt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ot.id,name:ut}}),!1})}ot.overlaidText&&(et.title=ot.overlaidText),et.onclick||(et.onclick=()=>!1),_n(this,sp,Hm).call(this)}_bindResetFormAction(et,ot){const ct=et.onclick;if(ct||(et.href=this.linkService.getAnchorUrl("")),_n(this,sp,Hm).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ct||(et.onclick=()=>!1);return}et.onclick=()=>{var Rt;ct==null||ct();const{fields:ut,refs:dt,include:ft}=ot,St=[];if(ut.length!==0||dt.length!==0){const jt=new Set(dt);for(const Ft of ut){const $t=this._fieldObjects[Ft]||[];for(const{id:zt}of $t)jt.add(zt)}for(const Ft of Object.values(this._fieldObjects))for(const $t of Ft)jt.has($t.id)===ft&&St.push($t)}else for(const jt of Object.values(this._fieldObjects))St.push(...jt);const kt=this.annotationStorage,Tt=[];for(const jt of St){const{id:Ft}=jt;switch(Tt.push(Ft),jt.type){case"text":{const zt=jt.defaultValue||"";kt.setValue(Ft,{value:zt});break}case"checkbox":case"radiobutton":{const zt=jt.defaultValue===jt.exportValues;kt.setValue(Ft,{value:zt});break}case"combobox":case"listbox":{const zt=jt.defaultValue||"";kt.setValue(Ft,{value:zt});break}default:continue}const $t=document.querySelector(`[data-element-id="${Ft}"]`);if($t){if(!GetElementsByNameSet.has($t)){warn(`_bindResetFormAction - element not allowed: ${Ft}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}sp=new WeakSet,Hm=function(){this.container.setAttribute("data-internal-link","")},_T=new WeakSet,P3=function(et,ot,ct="",ut=null){et.href=this.linkService.getAnchorUrl(""),ot.description?et.title=ot.description:ct&&(et.title=ct),et.onclick=()=>{var dt;return(dt=this.downloadManager)==null||dt.openOrDownloadData(ot.content,ot.filename,ut),!1},_n(this,sp,Hm).call(this)},CT=new WeakSet,N3=function(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeSetOCGState(ot),!1),ct&&(et.title=ct),_n(this,sp,Hm).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),g.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(g){var et;this.data.hasOwnCanvas&&(((et=g.previousSibling)==null?void 0:et.nodeName)==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){return util_FeatureTest.platform.isMac?g.metaKey:g.ctrlKey}_setEventListener(g,et,ot,ct,ut){ot.includes("mouse")?g.addEventListener(ot,dt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt),shift:dt.shiftKey,modifier:this._getKeyModifier(dt)}})}):g.addEventListener(ot,dt=>{var ft;if(ot==="blur"){if(!et.focused||!dt.relatedTarget)return;et.focused=!1}else if(ot==="focus"){if(et.focused)return;et.focused=!0}ut&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt)}}))})}_setEventListeners(g,et,ot,ct){var ut,dt,ft;for(const[St,kt]of ot)(kt==="Action"||(ut=this.data.actions)!=null&&ut[kt])&&((kt==="Focus"||kt==="Blur")&&(et||(et={focused:!1})),this._setEventListener(g,et,St,kt,ct),kt==="Focus"&&!((dt=this.data.actions)!=null&&dt.Blur)?this._setEventListener(g,et,"blur","Blur",null):kt==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(g,et,"focus","Focus",null))}_setBackgroundColor(g){const et=this.data.backgroundColor||null;g.style.backgroundColor=et===null?"transparent":Util$1.makeHexColor(et[0],et[1],et[2])}_setTextStyle(g){const et=["left","center","right"],{fontColor:ot}=this.data.defaultAppearanceData,ct=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ut=g.style;let dt;const ft=2,St=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Tt=Math.round(kt/(LINE_FACTOR*ct))||1,Rt=kt/Tt;dt=Math.min(ct,St(Rt/LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);dt=Math.min(ct,St(kt/LINE_FACTOR))}ut.fontSize=`calc(${dt}px * var(--total-scale-factor))`,ut.color=Util$1.makeHexColor(ot[0],ot[1],ot[2]),this.data.textAlignment!==null&&(ut.textAlign=et[this.data.textAlignment])}_setRequired(g,et){et?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",et)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){const et=g.renderForms||g.data.hasOwnCanvas||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:et})}setPropertyOnSiblings(g,et,ot,ct){const ut=this.annotationStorage;for(const dt of this._getElementsByName(g.name,g.id))dt.domElement&&(dt.domElement[et]=ot),ut.setValue(dt.id,{[ct]:ot})}render(){var ct,ut;const g=this.annotationStorage,et=this.data.id;this.container.classList.add("textWidgetAnnotation");let ot=null;if(this.renderForms){const dt=g.getValue(et,{value:this.data.fieldValue});let ft=dt.value||"";const St=g.getValue(et,{charLimit:this.data.maxLen}).charLimit;St&&ft.length>St&&(ft=ft.slice(0,St));let kt=dt.formattedValue||((ct=this.data.textContent)==null?void 0:ct.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:ft,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ot=document.createElement("textarea"),ot.textContent=kt??ft,this.data.doNotScroll&&(ot.style.overflowY="hidden")):(ot=document.createElement("input"),ot.type=this.data.password?"password":"text",ot.setAttribute("value",kt??ft),this.data.doNotScroll&&(ot.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ot.hidden=!0),GetElementsByNameSet.add(ot),ot.setAttribute("data-element-id",et),ot.disabled=this.data.readOnly,ot.name=this.data.fieldName,ot.tabIndex=0;const{datetimeFormat:Rt,datetimeType:jt,timeStep:Ft}=this.data,$t=!!jt&&this.enableScripting;Rt&&(ot.title=Rt),this._setRequired(ot,this.data.required),St&&(ot.maxLength=St),ot.addEventListener("input",Ut=>{g.setValue(et,{value:Ut.target.value}),this.setPropertyOnSiblings(ot,"value",Ut.target.value,"value"),Tt.formattedValue=null}),ot.addEventListener("resetform",Ut=>{const Bt=this.data.defaultFieldValue??"";ot.value=Tt.userValue=Bt,Tt.formattedValue=null});let zt=Ut=>{const{formattedValue:Bt}=Tt;Bt!=null&&(Ut.target.value=Bt),Ut.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ot.addEventListener("focus",Bt=>{var Jt;if(Tt.focused)return;const{target:Ht}=Bt;if($t&&(Ht.type=jt,Ft&&(Ht.step=Ft)),Tt.userValue){const Zt=Tt.userValue;if($t)if(jt==="time"){const tn=new Date(Zt),nn=[tn.getHours(),tn.getMinutes(),tn.getSeconds()];Ht.value=nn.map(rn=>rn.toString().padStart(2,"0")).join(":")}else Ht.value=new Date(Zt-TIMEZONE_OFFSET).toISOString().split(jt==="date"?"T":".",1)[0];else Ht.value=Zt}Tt.lastCommittedValue=Ht.value,Tt.commitKey=1,(Jt=this.data.actions)!=null&&Jt.Focus||(Tt.focused=!0)}),ot.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const Ht={value(Jt){Tt.userValue=Jt.detail.value??"",$t||g.setValue(et,{value:Tt.userValue.toString()}),Jt.target.value=Tt.userValue},formattedValue(Jt){const{formattedValue:Zt}=Jt.detail;Tt.formattedValue=Zt,Zt!=null&&Jt.target!==document.activeElement&&(Jt.target.value=Zt);const tn={formattedValue:Zt};$t&&(tn.value=Zt),g.setValue(et,tn)},selRange(Jt){Jt.target.setSelectionRange(...Jt.detail.selRange)},charLimit:Jt=>{var rn;const{charLimit:Zt}=Jt.detail,{target:tn}=Jt;if(Zt===0){tn.removeAttribute("maxLength");return}tn.setAttribute("maxLength",Zt);let nn=Tt.userValue;!nn||nn.length<=Zt||(nn=nn.slice(0,Zt),tn.value=Tt.userValue=nn,g.setValue(et,{value:nn}),(rn=this.linkService.eventBus)==null||rn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:nn,willCommit:!0,commitKey:1,selStart:tn.selectionStart,selEnd:tn.selectionEnd}}))}};this._dispatchEventFromSandbox(Ht,Bt)}),ot.addEventListener("keydown",Bt=>{var Zt;Tt.commitKey=1;let Ht=-1;if(Bt.key==="Escape"?Ht=0:Bt.key==="Enter"&&!this.data.multiLine?Ht=2:Bt.key==="Tab"&&(Tt.commitKey=3),Ht===-1)return;const{value:Jt}=Bt.target;Tt.lastCommittedValue!==Jt&&(Tt.lastCommittedValue=Jt,Tt.userValue=Jt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Jt,willCommit:!0,commitKey:Ht,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Ut=zt;zt=null,ot.addEventListener("blur",Bt=>{var Zt,tn;if(!Tt.focused||!Bt.relatedTarget)return;(Zt=this.data.actions)!=null&&Zt.Blur||(Tt.focused=!1);const{target:Ht}=Bt;let{value:Jt}=Ht;if($t){if(Jt&&jt==="time"){const nn=Jt.split(":").map(rn=>parseInt(rn,10));Jt=new Date(2e3,0,1,nn[0],nn[1],nn[2]||0).valueOf(),Ht.step=""}else Jt.includes("T")||(Jt=`${Jt}T00:00`),Jt=new Date(Jt).valueOf();Ht.type="text"}Tt.userValue=Jt,Tt.lastCommittedValue!==Jt&&((tn=this.linkService.eventBus)==null||tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Jt,willCommit:!0,commitKey:Tt.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Ut(Bt)}),(ut=this.data.actions)!=null&&ut.Keystroke&&ot.addEventListener("beforeinput",Bt=>{var pn;Tt.lastCommittedValue=null;const{data:Ht,target:Jt}=Bt,{value:Zt,selectionStart:tn,selectionEnd:nn}=Jt;let rn=tn,on=nn;switch(Bt.inputType){case"deleteWordBackward":{const dn=Zt.substring(0,tn).match(/\w*[^\w]*$/);dn&&(rn-=dn[0].length);break}case"deleteWordForward":{const dn=Zt.substring(tn).match(/^[^\w]*\w*/);dn&&(on+=dn[0].length);break}case"deleteContentBackward":tn===nn&&(rn-=1);break;case"deleteContentForward":tn===nn&&(on+=1);break}Bt.preventDefault(),(pn=this.linkService.eventBus)==null||pn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Zt,change:Ht||"",willCommit:!1,selStart:rn,selEnd:on}})}),this._setEventListeners(ot,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(zt&&ot.addEventListener("blur",zt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/St;ot.classList.add("comb"),ot.style.letterSpacing=`calc(${Bt}px * var(--total-scale-factor) - 1ch)`}}else ot=document.createElement("div"),ot.textContent=this.data.fieldValue,ot.style.verticalAlign="middle",ot.style.display="table-cell",this.data.hasOwnCanvas&&(ot.hidden=!0);return this._setTextStyle(ot),this._setBackgroundColor(ot),this._setDefaultPropertiesFromJS(ot),this.container.append(ot),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.exportValue===et.fieldValue}).value;typeof ct=="string"&&(ct=ct!=="Off",g.setValue(ot,{value:ct})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ut=document.createElement("input");return GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="checkbox",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.setAttribute("exportValue",et.exportValue),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot)){const Tt=St&&kt.exportValue===et.exportValue;kt.domElement&&(kt.domElement.checked=Tt),g.setValue(kt.id,{value:Tt})}g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue||"Off";dt.target.checked=ft===et.exportValue}),this.enableScripting&&this.hasJSActions&&(ut.addEventListener("updatefromsandbox",dt=>{const ft={value(St){St.target.checked=St.detail.value!=="Off",g.setValue(ot,{value:St.target.checked})}};this._dispatchEventFromSandbox(ft,dt)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.fieldValue===et.buttonValue}).value;if(typeof ct=="string"&&(ct=ct!==et.buttonValue,g.setValue(ot,{value:ct})),ct)for(const dt of this._getElementsByName(et.fieldName,ot))g.setValue(dt.id,{value:!1});const ut=document.createElement("input");if(GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="radio",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot))g.setValue(kt.id,{value:!1});g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue;dt.target.checked=ft!=null&&ft===et.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=et.buttonValue;ut.addEventListener("updatefromsandbox",ft=>{const St={value:kt=>{const Tt=dt===kt.detail.value;for(const Rt of this._getElementsByName(kt.target.name)){const jt=Tt&&Rt.id===ot;Rt.domElement&&(Rt.domElement.checked=jt),g.setValue(Rt.id,{value:jt})}}};this._dispatchEventFromSandbox(St,ft)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton");const et=g.lastChild;return this.enableScripting&&this.hasJSActions&&et&&(this._setDefaultPropertiesFromJS(et),et.addEventListener("updatefromsandbox",ot=>{this._dispatchEventFromSandbox({},ot)})),g}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,et=this.data.id,ot=g.getValue(et,{value:this.data.fieldValue}),ct=document.createElement("select");GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",et),ct.disabled=this.data.readOnly,this._setRequired(ct,this.data.required),ct.name=this.data.fieldName,ct.tabIndex=0;let ut=this.data.combo&&this.data.options.length>0;this.data.combo||(ct.size=this.data.options.length,this.data.multiSelect&&(ct.multiple=!0)),ct.addEventListener("resetform",Tt=>{const Rt=this.data.defaultFieldValue;for(const jt of ct.options)jt.selected=jt.value===Rt});for(const Tt of this.data.options){const Rt=document.createElement("option");Rt.textContent=Tt.displayValue,Rt.value=Tt.exportValue,ot.value.includes(Tt.exportValue)&&(Rt.setAttribute("selected",!0),ut=!1),ct.append(Rt)}let dt=null;if(ut){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ct.prepend(Tt),dt=()=>{Tt.remove(),ct.removeEventListener("input",dt),dt=null},ct.addEventListener("input",dt)}const ft=Tt=>{const Rt=Tt?"value":"textContent",{options:jt,multiple:Ft}=ct;return Ft?Array.prototype.filter.call(jt,$t=>$t.selected).map($t=>$t[Rt]):jt.selectedIndex===-1?null:jt[jt.selectedIndex][Rt]};let St=ft(!1);const kt=Tt=>{const Rt=Tt.target.options;return Array.prototype.map.call(Rt,jt=>({displayValue:jt.textContent,exportValue:jt.value}))};return this.enableScripting&&this.hasJSActions?(ct.addEventListener("updatefromsandbox",Tt=>{const Rt={value(jt){dt==null||dt();const Ft=jt.detail.value,$t=new Set(Array.isArray(Ft)?Ft:[Ft]);for(const zt of ct.options)zt.selected=$t.has(zt.value);g.setValue(et,{value:ft(!0)}),St=ft(!1)},multipleSelection(jt){ct.multiple=!0},remove(jt){const Ft=ct.options,$t=jt.detail.remove;Ft[$t].selected=!1,ct.remove($t),Ft.length>0&&Array.prototype.findIndex.call(Ft,Ut=>Ut.selected)===-1&&(Ft[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},clear(jt){for(;ct.length!==0;)ct.remove(0);g.setValue(et,{value:null,items:[]}),St=ft(!1)},insert(jt){const{index:Ft,displayValue:$t,exportValue:zt}=jt.detail.insert,Ut=ct.children[Ft],Bt=document.createElement("option");Bt.textContent=$t,Bt.value=zt,Ut?Ut.before(Bt):ct.append(Bt),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},items(jt){const{items:Ft}=jt.detail;for(;ct.length!==0;)ct.remove(0);for(const $t of Ft){const{displayValue:zt,exportValue:Ut}=$t,Bt=document.createElement("option");Bt.textContent=zt,Bt.value=Ut,ct.append(Bt)}ct.options.length>0&&(ct.options[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},indices(jt){const Ft=new Set(jt.detail.indices);for(const $t of jt.target.options)$t.selected=Ft.has($t.index);g.setValue(et,{value:ft(!0)}),St=ft(!1)},editable(jt){jt.target.disabled=!jt.detail.editable}};this._dispatchEventFromSandbox(Rt,Tt)}),ct.addEventListener("input",Tt=>{var Ft;const Rt=ft(!0),jt=ft(!1);g.setValue(et,{value:Rt}),Tt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:St,change:jt,changeEx:Rt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ct,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ct.addEventListener("input",function(Tt){g.setValue(et,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(ct),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}var sS,mC;class PopupAnnotationElement extends AnnotationElement{constructor(et){const{data:ot,elements:ct,parent:ut}=et,dt=!!ut._commentManager;super(et,{isRenderable:!dt&&AnnotationElement._hasPopupData(ot)});yn(this,sS);if(this.elements=ct,dt&&AnnotationElement._hasPopupData(ot)){const ft=this.popup=_n(this,sS,mC).call(this);for(const St of ct)St.popup=ft}else this.popup=null}render(){const{container:et}=this;et.classList.add("popupAnnotation"),et.role="comment";const ot=this.popup=_n(this,sS,mC).call(this),ct=[];for(const ut of this.elements)ut.popup=ot,ut.container.ariaHasPopup="dialog",ct.push(ut.data.id),ut.addHighlightArea();return this.container.setAttribute("aria-controls",ct.map(ut=>`${AnnotationPrefix}${ut}`).join(",")),this.container}}sS=new WeakSet,mC=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Po,um,RT,PT,Z1,ev,Zr,vu,hm,G0,tv,nv,xu,No,ap,lp,xs,cp,dm,oS,up,rv,W0,fm,Us,pm,iv,dw,aS,gC,lS,yC,cS,vC,sv,fw,uS,xC,NT,M3,MT,O3,OT,I3,IT,D3,ov,pw,av,mw,hS,bC;class PopupElement{constructor({container:g,color:et,elements:ot,titleObj:ct,modificationDate:ut,contentsObj:dt,richText:ft,parent:St,rect:kt,parentRect:Tt,open:Rt,commentManager:jt=null}){yn(this,iv);yn(this,aS);yn(this,lS);yn(this,cS);yn(this,sv);yn(this,uS);yn(this,NT);yn(this,MT);yn(this,OT);yn(this,IT);yn(this,ov);yn(this,av);yn(this,hS);yn(this,Po,null);yn(this,um,_n(this,OT,I3).bind(this));yn(this,RT,_n(this,hS,bC).bind(this));yn(this,PT,_n(this,av,mw).bind(this));yn(this,Z1,_n(this,ov,pw).bind(this));yn(this,ev,null);yn(this,Zr,null);yn(this,vu,null);yn(this,hm,null);yn(this,G0,null);yn(this,tv,null);yn(this,nv,null);yn(this,xu,!1);yn(this,No,null);yn(this,ap,null);yn(this,lp,null);yn(this,xs,null);yn(this,cp,null);yn(this,dm,null);yn(this,oS,null);yn(this,up,null);yn(this,rv,null);yn(this,W0,null);yn(this,fm,!1);yn(this,Us,null);yn(this,pm,null);vn(this,Zr,g),vn(this,rv,ct),vn(this,vu,dt),vn(this,up,ft),vn(this,tv,St),vn(this,ev,et),vn(this,oS,kt),vn(this,nv,Tt),vn(this,G0,ot),vn(this,Po,jt),vn(this,Us,ot[0]),vn(this,hm,PDFDateString.toDateObject(ut)),this.trigger=ot.flatMap(Ft=>Ft.getElementsToTriggerPopup()),jt?this.renderCommentButton():(_n(this,iv,dw).call(this),Kt(this,Zr).hidden=!0,Rt&&_n(this,ov,pw).call(this))}renderCommentButton(){if(Kt(this,xs)||(Kt(this,cp)||_n(this,aS,gC).call(this),!Kt(this,cp)))return;const{signal:g}=vn(this,ap,new AbortController),et=!!Kt(this,Us).extraPopupElement,ot=()=>{Kt(this,Po).toggleCommentPopup(this,!0,void 0,!et)},ct=()=>{Kt(this,Po).toggleCommentPopup(this,!1,!0,!et)},ut=()=>{Kt(this,Po).toggleCommentPopup(this,!1,!1)};if(et){vn(this,xs,Kt(this,Us).container);for(const dt of this.trigger)dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.addEventListener("keydown",Kt(this,um),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),dt.classList.add("popupTriggerArea")}else{const dt=vn(this,xs,document.createElement("button"));dt.className="annotationCommentButton";const ft=Kt(this,Us).container;dt.style.zIndex=ft.style.zIndex+1,dt.tabIndex=0,dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button"),_n(this,cS,vC).call(this),_n(this,lS,yC).call(this),dt.addEventListener("keydown",Kt(this,um),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),ft.after(dt)}}get commentButtonColor(){const{color:g,opacity:et}=Kt(this,Us).commentData;return g?Kt(this,tv)._commentManager.makeCommentColor(g,et):null}focusCommentButton(){setTimeout(()=>{var g;(g=Kt(this,xs))==null||g.focus()},0)}getData(){const{richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}=Kt(this,Us).commentData;return{contentsObj:{str:this.comment},richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}}get elementBeforePopup(){return Kt(this,xs)}get comment(){return Kt(this,pm)||vn(this,pm,Kt(this,Us).commentText),Kt(this,pm)}set comment(g){g!==this.comment&&(Kt(this,Us).commentText=vn(this,pm,g))}get parentBoundingClientRect(){return Kt(this,Us).layer.getBoundingClientRect()}setCommentButtonStates({selected:g,hasPopup:et}){Kt(this,xs)&&(Kt(this,xs).classList.toggle("selected",g),Kt(this,xs).ariaExpanded=et)}setSelectedCommentButton(g){Kt(this,xs).classList.toggle("selected",g)}get commentPopupPosition(){if(Kt(this,dm))return Kt(this,dm);const{x:g,y:et,height:ot}=Kt(this,xs).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=Kt(this,Us).layer.getBoundingClientRect();return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPosition(g){vn(this,dm,g)}hasDefaultPopupPosition(){return Kt(this,dm)===null}get commentButtonPosition(){return Kt(this,cp)}get commentButtonWidth(){return Kt(this,xs).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(g){const[et,ot]=Kt(this,dm)||this.commentButtonPosition.map(kt=>kt/100),ct=this.parentBoundingClientRect,{x:ut,y:dt,width:ft,height:St}=ct;Kt(this,Po).showDialog(null,this,ut+et*ft,dt+ot*St,{...g,parentDimensions:ct})}render(){var ot,ct;if(Kt(this,No))return;const g=vn(this,No,document.createElement("div"));if(g.className="popup",Kt(this,ev)){const ut=g.style.outlineColor=Util$1.makeHexColor(...Kt(this,ev));g.style.backgroundColor=`color-mix(in srgb, ${ut} 30%, white)`}const et=document.createElement("span");if(et.className="header",(ot=Kt(this,rv))!=null&&ot.str){const ut=document.createElement("span");ut.className="title",et.append(ut),{dir:ut.dir,str:ut.textContent}=Kt(this,rv)}if(g.append(et),Kt(this,hm)){const ut=document.createElement("time");ut.className="popupDate",ut.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ut.setAttribute("data-l10n-args",JSON.stringify({dateObj:Kt(this,hm).valueOf()})),ut.dateTime=Kt(this,hm).toISOString(),et.append(ut)}renderRichText({html:Kt(this,sv,fw)||Kt(this,vu).str,dir:(ct=Kt(this,vu))==null?void 0:ct.dir,className:"popupContent"},g),Kt(this,Zr).append(g)}updateEdited({rect:g,popup:et,deleted:ot}){var ct;if(Kt(this,Po)){ot?(this.remove(),vn(this,pm,null)):et&&(et.deleted?this.remove():(_n(this,cS,vC).call(this),vn(this,pm,et.text))),g&&(vn(this,cp,null),_n(this,aS,gC).call(this),_n(this,lS,yC).call(this));return}if(ot||et!=null&&et.deleted){this.remove();return}_n(this,iv,dw).call(this),Kt(this,W0)||vn(this,W0,{contentsObj:Kt(this,vu),richText:Kt(this,up)}),g&&vn(this,lp,null),et&&et.text&&(vn(this,up,_n(this,MT,O3).call(this,et.text)),vn(this,hm,PDFDateString.toDateObject(et.date)),vn(this,vu,null)),(ct=Kt(this,No))==null||ct.remove(),vn(this,No,null)}resetEdited(){var g;Kt(this,W0)&&({contentsObj:cs(this,vu)._,richText:cs(this,up)._}=Kt(this,W0),vn(this,W0,null),(g=Kt(this,No))==null||g.remove(),vn(this,No,null),vn(this,lp,null))}remove(){var g,et,ot;if((g=Kt(this,ap))==null||g.abort(),vn(this,ap,null),(et=Kt(this,No))==null||et.remove(),vn(this,No,null),vn(this,fm,!1),vn(this,xu,!1),(ot=Kt(this,xs))==null||ot.remove(),vn(this,xs,null),this.trigger)for(const ct of this.trigger)ct.classList.remove("popupTriggerArea")}forceHide(){vn(this,fm,this.isVisible),Kt(this,fm)&&(Kt(this,Zr).hidden=!0)}maybeShow(){Kt(this,Po)||(_n(this,iv,dw).call(this),Kt(this,fm)&&(Kt(this,No)||_n(this,av,mw).call(this),vn(this,fm,!1),Kt(this,Zr).hidden=!1))}get isVisible(){return Kt(this,Po)?!1:Kt(this,Zr).hidden===!1}}Po=new WeakMap,um=new WeakMap,RT=new WeakMap,PT=new WeakMap,Z1=new WeakMap,ev=new WeakMap,Zr=new WeakMap,vu=new WeakMap,hm=new WeakMap,G0=new WeakMap,tv=new WeakMap,nv=new WeakMap,xu=new WeakMap,No=new WeakMap,ap=new WeakMap,lp=new WeakMap,xs=new WeakMap,cp=new WeakMap,dm=new WeakMap,oS=new WeakMap,up=new WeakMap,rv=new WeakMap,W0=new WeakMap,fm=new WeakMap,Us=new WeakMap,pm=new WeakMap,iv=new WeakSet,dw=function(){var et;if(Kt(this,ap))return;vn(this,ap,new AbortController);const{signal:g}=Kt(this,ap);for(const ot of this.trigger)ot.addEventListener("click",Kt(this,Z1),{signal:g}),ot.addEventListener("pointerenter",Kt(this,PT),{signal:g}),ot.addEventListener("pointerleave",Kt(this,RT),{signal:g}),ot.classList.add("popupTriggerArea");for(const ot of Kt(this,G0))(et=ot.container)==null||et.addEventListener("keydown",Kt(this,um),{signal:g})},aS=new WeakSet,gC=function(){const g=Kt(this,G0).find(et=>et.hasCommentButton);g&&vn(this,cp,g._normalizePoint(g.commentButtonPosition))},lS=new WeakSet,yC=function(){if(Kt(this,Us).extraPopupElement&&!Kt(this,Us).editor)return;this.renderCommentButton();const[g,et]=Kt(this,cp),{style:ot}=Kt(this,xs);ot.left=`calc(${g}%)`,ot.top=`calc(${et}% - var(--comment-button-dim))`},cS=new WeakSet,vC=function(){Kt(this,Us).extraPopupElement||(this.renderCommentButton(),Kt(this,xs).style.backgroundColor=this.commentButtonColor||"")},sv=new WeakSet,fw=function(){const g=Kt(this,up),et=Kt(this,vu);return g!=null&&g.str&&(!(et!=null&&et.str)||et.str===g.str)&&Kt(this,up).html||null},uS=new WeakSet,xC=function(){var g,et,ot;return((ot=(et=(g=Kt(this,sv,fw))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.fontSize)||0},NT=new WeakSet,M3=function(){var g,et,ot;return((ot=(et=(g=Kt(this,sv,fw))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.color)||null},MT=new WeakSet,O3=function(g){const et=[],ot={str:g,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:et}]}},ct={style:{color:Kt(this,NT,M3),fontSize:Kt(this,uS,xC)?`calc(${Kt(this,uS,xC)}px * var(--total-scale-factor))`:""}};for(const ut of g.split(`
`))et.push({name:"span",value:ut,attributes:ct});return ot},OT=new WeakSet,I3=function(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&Kt(this,xu))&&_n(this,ov,pw).call(this)},IT=new WeakSet,D3=function(){if(Kt(this,lp)!==null)return;const{page:{view:g},viewport:{rawDims:{pageWidth:et,pageHeight:ot,pageX:ct,pageY:ut}}}=Kt(this,tv);let dt=!!Kt(this,nv),ft=dt?Kt(this,nv):Kt(this,oS);for(const $t of Kt(this,G0))if(!ft||Util$1.intersect($t.data.rect,ft)!==null){ft=$t.data.rect,dt=!0;break}const St=Util$1.normalizeRect([ft[0],g[3]-ft[1]+g[1],ft[2],g[3]-ft[3]+g[1]]),kt=5,Tt=dt?ft[2]-ft[0]+kt:0,Rt=St[0]+Tt,jt=St[1];vn(this,lp,[100*(Rt-ct)/et,100*(jt-ut)/ot]);const{style:Ft}=Kt(this,Zr);Ft.left=`${Kt(this,lp)[0]}%`,Ft.top=`${Kt(this,lp)[1]}%`},ov=new WeakSet,pw=function(){if(Kt(this,Po)){Kt(this,Po).toggleCommentPopup(this,!1);return}vn(this,xu,!Kt(this,xu)),Kt(this,xu)?(_n(this,av,mw).call(this),Kt(this,Zr).addEventListener("click",Kt(this,Z1)),Kt(this,Zr).addEventListener("keydown",Kt(this,um))):(_n(this,hS,bC).call(this),Kt(this,Zr).removeEventListener("click",Kt(this,Z1)),Kt(this,Zr).removeEventListener("keydown",Kt(this,um)))},av=new WeakSet,mw=function(){Kt(this,No)||this.render(),this.isVisible?Kt(this,xu)&&Kt(this,Zr).classList.add("focused"):(_n(this,IT,D3).call(this),Kt(this,Zr).hidden=!1,Kt(this,Zr).style.zIndex=parseInt(Kt(this,Zr).style.zIndex)+1e3)},hS=new WeakSet,bC=function(){Kt(this,Zr).classList.remove("focused"),!(Kt(this,xu)||!this.isVisible)&&(Kt(this,Zr).hidden=!0,Kt(this,Zr).style.zIndex=parseInt(Kt(this,Zr).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const et of this.textContent){const ot=document.createElement("span");ot.textContent=et,g.append(ot)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dS;class LineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});yn(this,dS,null)}render(){this.container.classList.add("lineAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=vn(this,dS,this.svgFactory.createElement("svg:line"));return dt.setAttribute("x1",et.rect[2]-et.lineCoordinates[0]),dt.setAttribute("y1",et.rect[3]-et.lineCoordinates[1]),dt.setAttribute("x2",et.rect[2]-et.lineCoordinates[2]),dt.setAttribute("y2",et.rect[3]-et.lineCoordinates[3]),dt.setAttribute("stroke-width",et.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),ut.append(dt),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Kt(this,dS)}addHighlightArea(){this.container.classList.add("highlightArea")}}dS=new WeakMap;var fS;class SquareAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});yn(this,fS,null)}render(){this.container.classList.add("squareAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=vn(this,fS,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",dt/2),ft.setAttribute("y",dt/2),ft.setAttribute("width",ot-dt),ft.setAttribute("height",ct-dt),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Kt(this,fS)}addHighlightArea(){this.container.classList.add("highlightArea")}}fS=new WeakMap;var pS;class CircleAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});yn(this,pS,null)}render(){this.container.classList.add("circleAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=vn(this,pS,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",ot/2),ft.setAttribute("cy",ct/2),ft.setAttribute("rx",ot/2-dt/2),ft.setAttribute("ry",ct/2-dt/2),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Kt(this,pS)}addHighlightArea(){this.container.classList.add("highlightArea")}}pS=new WeakMap;var mS;class PolylineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});yn(this,mS,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,vertices:ot,borderStyle:ct,popupRef:ut},width:dt,height:ft}=this;if(!ot)return this.container;const St=this.svgFactory.create(dt,ft,!0);let kt=[];for(let Rt=0,jt=ot.length;Rt<jt;Rt+=2){const Ft=ot[Rt]-et[0],$t=et[3]-ot[Rt+1];kt.push(`${Ft},${$t}`)}kt=kt.join(" ");const Tt=vn(this,mS,this.svgFactory.createElement(this.svgElementName));return Tt.setAttribute("points",kt),Tt.setAttribute("stroke-width",ct.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),St.append(Tt),this.container.append(St),!ut&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Kt(this,mS)}addHighlightArea(){this.container.classList.add("highlightArea")}}mS=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gS,q0,yS,EC;class InkAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});yn(this,yS);yn(this,gS,null);yn(this,q0,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,rotation:ot,inkLists:ct,borderStyle:ut,popupRef:dt}}=this,{transform:ft,width:St,height:kt}=_n(this,yS,EC).call(this,ot,et),Tt=this.svgFactory.create(St,kt,!0),Rt=vn(this,gS,this.svgFactory.createElement("svg:g"));Tt.append(Rt),Rt.setAttribute("stroke-width",ut.width||1),Rt.setAttribute("stroke-linecap","round"),Rt.setAttribute("stroke-linejoin","round"),Rt.setAttribute("stroke-miterlimit",10),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),Rt.setAttribute("transform",ft);for(let jt=0,Ft=ct.length;jt<Ft;jt++){const $t=this.svgFactory.createElement(this.svgElementName);Kt(this,q0).push($t),$t.setAttribute("points",ct[jt].join(",")),Rt.append($t)}return!dt&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this._editOnDoubleClick(),this.container}updateEdited(et){super.updateEdited(et);const{thickness:ot,points:ct,rect:ut}=et,dt=Kt(this,gS);if(ot>=0&&dt.setAttribute("stroke-width",ot||1),ct)for(let ft=0,St=Kt(this,q0).length;ft<St;ft++)Kt(this,q0)[ft].setAttribute("points",ct[ft].join(","));if(ut){const{transform:ft,width:St,height:kt}=_n(this,yS,EC).call(this,this.data.rotation,ut);dt.parentElement.setAttribute("viewBox",`0 0 ${St} ${kt}`),dt.setAttribute("transform",ft)}}getElementsToTriggerPopup(){return Kt(this,q0)}addHighlightArea(){this.container.classList.add("highlightArea")}}gS=new WeakMap,q0=new WeakMap,yS=new WeakSet,EC=function(et,ot){switch(et){case 90:return{transform:`rotate(90) translate(${-ot[0]},${ot[1]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};case 180:return{transform:`rotate(180) translate(${-ot[2]},${ot[1]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]};case 270:return{transform:`rotate(270) translate(${-ot[2]},${ot[3]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};default:return{transform:`translate(${-ot[0]},${ot[3]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),g){const ot=document.createElement("mark");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),g){const ot=document.createElement("s");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vS,xS,SC;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(et){var ct;super(et,{isRenderable:!0});yn(this,xS);yn(this,vS,null);const{file:ot}=this.data;this.filename=ot.filename,this.content=ot.content,(ct=this.linkService.eventBus)==null||ct.dispatch("fileattachmentannotation",{source:this,...ot})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:et,data:ot}=this;let ct;ot.hasAppearance||ot.fillAlpha===0?ct=document.createElement("div"):(ct=document.createElement("img"),ct.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ot.name)?"paperclip":"pushpin"}.svg`,ot.fillAlpha&&ot.fillAlpha<1&&(ct.style=`filter: opacity(${Math.round(ot.fillAlpha*100)}%);`)),ct.addEventListener("dblclick",_n(this,xS,SC).bind(this)),vn(this,vS,ct);const{isMac:ut}=util_FeatureTest.platform;return et.addEventListener("keydown",dt=>{dt.key==="Enter"&&(ut?dt.metaKey:dt.ctrlKey)&&_n(this,xS,SC).call(this)}),!ot.popupRef&&this.hasPopupData?this._createPopup():ct.classList.add("popupTriggerArea"),et.append(ct),et}getElementsToTriggerPopup(){return Kt(this,vS)}addHighlightArea(){this.container.classList.add("highlightArea")}}vS=new WeakMap,xS=new WeakSet,SC=function(){var et;(et=this.downloadManager)==null||et.openOrDownloadData(this.content,this.filename)};var lv,K0,cv,mm,bS,Y0,ES,wC,SS,kC,wS;let AnnotationLayer$1=(wS=class{constructor({div:g,accessibilityManager:et,annotationCanvasMap:ot,annotationEditorUIManager:ct,page:ut,viewport:dt,structTreeLayer:ft,commentManager:St,linkService:kt,annotationStorage:Tt}){yn(this,ES);yn(this,SS);yn(this,lv,null);yn(this,K0,null);yn(this,cv,null);yn(this,mm,new Map);yn(this,bS,null);yn(this,Y0,null);this.div=g,vn(this,lv,et),vn(this,K0,ot),vn(this,bS,ft||null),vn(this,Y0,kt||null),vn(this,cv,Tt||new AnnotationStorage),this.page=ut,this.viewport=dt,this.zIndex=0,this._annotationEditorUIManager=ct,this._commentManager=St||null}hasEditableAnnotations(){return Kt(this,mm).size>0}async render(g){var dt,ft,St;const{annotations:et}=g,ot=this.div;setLayerDimensions(ot,this.viewport);const ct=new Map,ut={data:null,layer:ot,linkService:Kt(this,Y0),downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:Kt(this,cv),enableComment:g.enableComment===!0,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const kt of et){if(kt.noHTML)continue;const Tt=kt.annotationType===AnnotationType.POPUP;if(Tt){const Ft=ct.get(kt.id);if(!Ft)continue;ut.elements=Ft}else if(kt.rect[2]===kt.rect[0]||kt.rect[3]===kt.rect[1])continue;ut.data=kt;const Rt=AnnotationElementFactory.create(ut);if(!Rt.isRenderable)continue;if(!Tt&&kt.popupRef){const Ft=ct.get(kt.popupRef);Ft?Ft.push(Rt):ct.set(kt.popupRef,[Rt])}const jt=Rt.render();kt.hidden&&(jt.style.visibility="hidden"),await _n(this,ES,wC).call(this,jt,kt.id,ut.elements),(ft=(dt=Rt.extraPopupElement)==null?void 0:dt.popup)==null||ft.renderCommentButton(),Rt._isEditable&&(Kt(this,mm).set(Rt.data.id,Rt),(St=this._annotationEditorUIManager)==null||St.renderAnnotationElement(Rt))}_n(this,SS,kC).call(this)}async addLinkAnnotations(g){const et={data:null,layer:this.div,linkService:Kt(this,Y0),svgFactory:new DOMSVGFactory,parent:this};for(const ot of g){ot.borderStyle||(ot.borderStyle=wS._defaultBorderStyle),et.data=ot;const ct=AnnotationElementFactory.create(et);if(!ct.isRenderable)continue;const ut=ct.render();await _n(this,ES,wC).call(this,ut,ot.id,null)}}update({viewport:g}){const et=this.div;this.viewport=g,setLayerDimensions(et,{rotation:g.rotation}),_n(this,SS,kC).call(this),et.hidden=!1}getEditableAnnotations(){return Array.from(Kt(this,mm).values())}getEditableAnnotation(g){return Kt(this,mm).get(g)}addFakeAnnotation(g){var ft;const{div:et}=this,{id:ot,rotation:ct}=g,ut=new EditorAnnotationElement({data:{id:ot,rect:g.getPDFRect(),rotation:ct},editor:g,layer:et,parent:this,enableComment:!!this._commentManager,linkService:Kt(this,Y0),annotationStorage:Kt(this,cv)}),dt=ut.render();return et.append(dt),(ft=Kt(this,lv))==null||ft.moveElementInDOM(et,dt,dt,!1),ut.createOrUpdatePopup(),ut}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},lv=new WeakMap,K0=new WeakMap,cv=new WeakMap,mm=new WeakMap,bS=new WeakMap,Y0=new WeakMap,ES=new WeakSet,wC=async function(g,et,ot){var ft,St;const ct=g.firstChild||g,ut=ct.id=`${AnnotationPrefix}${et}`,dt=await((ft=Kt(this,bS))==null?void 0:ft.getAriaAttributes(ut));if(dt)for(const[kt,Tt]of dt)ct.setAttribute(kt,Tt);ot?ot.at(-1).container.after(g):(this.div.append(g),(St=Kt(this,lv))==null||St.moveElementInDOM(this.div,g,ct,!1))},SS=new WeakSet,kC=function(){var et;if(!Kt(this,K0))return;const g=this.div;for(const[ot,ct]of Kt(this,K0)){const ut=g.querySelector(`[data-annotation-id="${ot}"]`);if(!ut)continue;ct.className="annotationContent";const{firstChild:dt}=ut;dt?dt.nodeName==="CANVAS"?dt.replaceWith(ct):dt.classList.contains("annotationContent")?dt.after(ct):dt.before(ct):ut.append(ct);const ft=Kt(this,mm).get(ot);ft&&(ft._hasNoCanvas?((et=this._annotationEditorUIManager)==null||et.setMissingCanvas(ot,ut.id,ct),ft._hasNoCanvas=!1):ft.canvas=ct)}Kt(this,K0).clear()},wS);const EOL_PATTERN=/\r\n?|\n/g;var Mo,kS,X0,Oo,DT,L3,LT,j3,jT,F3,uv,gw,hv,yw,dv,xw,FT,$3,TS,TC,$T,B3;const Fr=class Fr extends AnnotationEditor{constructor(et){super({...et,name:"freeTextEditor"});yn(this,DT);yn(this,LT);yn(this,jT);yn(this,uv);yn(this,dv);yn(this,FT);yn(this,$T);yn(this,Mo,"");yn(this,kS,`${this.id}-editor`);yn(this,X0,null);yn(this,Oo,void 0);qn(this,"_colorPicker",null);this.color=et.color||Fr._defaultColor||AnnotationEditor._defaultLineColor,vn(this,Oo,et.fontSize||Fr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const et=Fr.prototype,ot=dt=>dt.isEmpty(),ct=AnnotationEditorUIManager.TRANSLATE_SMALL,ut=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],et._translateEmpty,{args:[-ct,0],checker:ot}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et._translateEmpty,{args:[-ut,0],checker:ot}],[["ArrowRight","mac+ArrowRight"],et._translateEmpty,{args:[ct,0],checker:ot}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et._translateEmpty,{args:[ut,0],checker:ot}],[["ArrowUp","mac+ArrowUp"],et._translateEmpty,{args:[0,-ct],checker:ot}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et._translateEmpty,{args:[0,-ut],checker:ot}],[["ArrowDown","mac+ArrowDown"],et._translateEmpty,{args:[0,ct],checker:ot}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et._translateEmpty,{args:[0,ut],checker:ot}]]))}static initialize(et,ot){AnnotationEditor.initialize(et,ot);const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:Fr._defaultFontSize=ot;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Fr._defaultColor=ot;break}}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:_n(this,DT,L3).call(this,ot);break;case AnnotationEditorParamsType.FREETEXT_COLOR:_n(this,LT,j3).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Fr._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Fr._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Kt(this,Oo)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var et;this.editorDiv.style.color=this.color,(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_translateEmpty(et,ot){this._uiManager.translateSelectedEditors(et,ot,!0)}getInitialTranslation(){const et=this.parentScale;return[-Fr._internalPadding*et,-(Fr._internalPadding+Kt(this,Oo))*et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),vn(this,X0,new AbortController);const et=this._uiManager.combinedSignal(Kt(this,X0));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:et}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:et}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:et}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:et}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:et}),!0}disableEditMode(){var et;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Kt(this,kS)),this._isDraggable=!0,(et=Kt(this,X0))==null||et.abort(),vn(this,X0,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(et){this._focusEventsAllowed&&(super.focusin(et),et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(et){var ot;this.width||(this.enableEditMode(),et&&this.editorDiv.focus(),(ot=this._initialOptions)!=null&&ot.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const et=Kt(this,Mo),ot=vn(this,Mo,_n(this,jT,F3).call(this).trimEnd());if(et===ot)return;const ct=ut=>{if(vn(this,Mo,ut),!ut){this.remove();return}_n(this,dv,xw).call(this),this._uiManager.rebuild(this),_n(this,uv,gw).call(this)};this.addCommands({cmd:()=>{ct(ot)},undo:()=>{ct(et)},mustExec:!1}),_n(this,uv,gw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(et){et.target===this.div&&et.key==="Enter"&&(this.enterInEditMode(),et.preventDefault())}editorDivKeydown(et){Fr._keyboardManager.exec(this,et)}editorDivFocus(et){this.isEditing=!0}editorDivBlur(et){this.isEditing=!1}editorDivInput(et){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let et,ot;(this._isCopy||this.annotationElementId)&&(et=this.x,ot=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Kt(this,kS)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${Kt(this,Oo)}px * var(--total-scale-factor))`,ct.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ut,dt]=this.parentDimensions;if(this.annotationElementId){const{position:ft}=this._initialData;let[St,kt]=this.getInitialTranslation();[St,kt]=this.pageTranslationToScreen(St,kt);const[Tt,Rt]=this.pageDimensions,[jt,Ft]=this.pageTranslation;let $t,zt;switch(this.rotation){case 0:$t=et+(ft[0]-jt)/Tt,zt=ot+this.height-(ft[1]-Ft)/Rt;break;case 90:$t=et+(ft[0]-jt)/Tt,zt=ot-(ft[1]-Ft)/Rt,[St,kt]=[kt,-St];break;case 180:$t=et-this.width+(ft[0]-jt)/Tt,zt=ot-(ft[1]-Ft)/Rt,[St,kt]=[-St,-kt];break;case 270:$t=et+(ft[0]-jt-this.height*Rt)/Tt,zt=ot+(ft[1]-Ft-this.width*Tt)/Rt,[St,kt]=[-kt,St];break}this.setAt($t*ut,zt*dt,St,kt)}else this._moveAfterPaste(et,ot);_n(this,dv,xw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(et){var $t,zt,Ut;const ot=et.clipboardData||window.clipboardData,{types:ct}=ot;if(ct.length===1&&ct[0]==="text/plain")return;et.preventDefault();const ut=_n($t=Fr,TS,TC).call($t,ot.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ut)return;const dt=window.getSelection();if(!dt.rangeCount)return;this.editorDiv.normalize(),dt.deleteFromDocument();const ft=dt.getRangeAt(0);if(!ut.includes(`
`)){ft.insertNode(document.createTextNode(ut)),this.editorDiv.normalize(),dt.collapseToStart();return}const{startContainer:St,startOffset:kt}=ft,Tt=[],Rt=[];if(St.nodeType===Node.TEXT_NODE){const Bt=St.parentElement;if(Rt.push(St.nodeValue.slice(kt).replaceAll(EOL_PATTERN,"")),Bt!==this.editorDiv){let Ht=Tt;for(const Jt of this.editorDiv.childNodes){if(Jt===Bt){Ht=Rt;continue}Ht.push(_n(zt=Fr,hv,yw).call(zt,Jt))}}Tt.push(St.nodeValue.slice(0,kt).replaceAll(EOL_PATTERN,""))}else if(St===this.editorDiv){let Bt=Tt,Ht=0;for(const Jt of this.editorDiv.childNodes)Ht++===kt&&(Bt=Rt),Bt.push(_n(Ut=Fr,hv,yw).call(Ut,Jt))}vn(this,Mo,`${Tt.join(`
`)}${ut}${Rt.join(`
`)}`),_n(this,dv,xw).call(this);const jt=new Range;let Ft=Math.sumPrecise(Tt.map(Bt=>Bt.length));for(const{firstChild:Bt}of this.editorDiv.childNodes)if(Bt.nodeType===Node.TEXT_NODE){const Ht=Bt.nodeValue.length;if(Ft<=Ht){jt.setStart(Bt,Ft),jt.setEnd(Bt,Ft);break}Ft-=Ht}dt.removeAllRanges(),dt.addRange(jt)}get contentDiv(){return this.editorDiv}getPDFRect(){const et=Fr._internalPadding*this.parentScale;return this.getRect(et,et)}static async deserialize(et,ot,ct){var ft;let ut=null;if(et instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:St,fontColor:kt},rect:Tt,rotation:Rt,id:jt,popupRef:Ft,richText:$t,contentsObj:zt,creationDate:Ut,modificationDate:Bt},textContent:Ht,textPosition:Jt,parent:{page:{pageNumber:Zt}}}=et;if(!Ht||Ht.length===0)return null;ut=et={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:St,value:Ht.join(`
`),position:Jt,pageIndex:Zt-1,rect:Tt.slice(0),rotation:Rt,annotationElementId:jt,id:jt,deleted:!1,popupRef:Ft,comment:(zt==null?void 0:zt.str)||null,richText:$t,creationDate:Ut,modificationDate:Bt}}const dt=await super.deserialize(et,ot,ct);return vn(dt,Oo,et.fontSize),dt.color=Util$1.makeHexColor(...et.color),vn(dt,Mo,_n(ft=Fr,TS,TC).call(ft,et.value)),dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ct=Object.assign(super.serialize(et),{color:ot,fontSize:Kt(this,Oo),value:_n(this,FT,$3).call(this)});return this.addComment(ct),et?(ct.isCopy=!0,ct):this.annotationElementId&&!_n(this,$T,B3).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){const ot=super.renderAnnotationElement(et);if(!ot)return null;const{style:ct}=ot;ct.fontSize=`calc(${Kt(this,Oo)}px * var(--total-scale-factor))`,ct.color=this.color,ot.replaceChildren();for(const ut of Kt(this,Mo).split(`
`)){const dt=document.createElement("div");dt.append(ut?document.createTextNode(ut):document.createElement("br")),ot.append(dt)}return et.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Kt(this,Mo)}}),ot}resetAnnotationElement(et){super.resetAnnotationElement(et),et.resetEdited()}};Mo=new WeakMap,kS=new WeakMap,X0=new WeakMap,Oo=new WeakMap,DT=new WeakSet,L3=function(et){const ot=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--total-scale-factor))`,this.translate(0,-(ut-Kt(this,Oo))*this.parentScale),vn(this,Oo,ut),_n(this,uv,gw).call(this)},ct=Kt(this,Oo);this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},LT=new WeakSet,j3=function(et){const ot=ut=>{this.color=ut,this.onUpdatedColor()},ct=this.color;this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jT=new WeakSet,F3=function(){var ct;const et=[];this.editorDiv.normalize();let ot=null;for(const ut of this.editorDiv.childNodes)(ot==null?void 0:ot.nodeType)===Node.TEXT_NODE&&ut.nodeName==="BR"||(et.push(_n(ct=Fr,hv,yw).call(ct,ut)),ot=ut);return et.join(`
`)},uv=new WeakSet,gw=function(){const[et,ot]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:dt}=this,ft=dt.style.display,St=dt.classList.contains("hidden");dt.classList.remove("hidden"),dt.style.display="hidden",ut.div.append(this.div),ct=dt.getBoundingClientRect(),dt.remove(),dt.style.display=ft,dt.classList.toggle("hidden",St)}this.rotation%180===this.parentRotation%180?(this.width=ct.width/et,this.height=ct.height/ot):(this.width=ct.height/et,this.height=ct.width/ot),this.fixAndSetPosition()},hv=new WeakSet,yw=function(et){return(et.nodeType===Node.TEXT_NODE?et.nodeValue:et.innerText).replaceAll(EOL_PATTERN,"")},dv=new WeakSet,xw=function(){if(this.editorDiv.replaceChildren(),!!Kt(this,Mo))for(const et of Kt(this,Mo).split(`
`)){const ot=document.createElement("div");ot.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ot)}},FT=new WeakSet,$3=function(){return Kt(this,Mo).replaceAll(""," ")},TS=new WeakSet,TC=function(et){return et.replaceAll(" ","")},$T=new WeakSet,B3=function(et){const{value:ot,fontSize:ct,color:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||et.value!==ot||et.fontSize!==ct||et.color.some((ft,St)=>ft!==ut[St])||et.pageIndex!==dt},yn(Fr,hv),yn(Fr,TS),qn(Fr,"_freeTextDefaultContent",""),qn(Fr,"_internalPadding",0),qn(Fr,"_defaultColor",null),qn(Fr,"_defaultFontSize",10),qn(Fr,"_type","freetext"),qn(Fr,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Fr;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(g,et){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft]*ct,dt[ft+1]=ot+g[ft+1]*ut;return dt}static _rescaleAndSwap(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft+1]*ct,dt[ft+1]=ot+g[ft]*ut;return dt}static _translate(g,et,ot,ct){ct||(ct=new Float32Array(g.length));for(let ut=0,dt=g.length;ut<dt;ut+=2)ct[ut]=et+g[ut],ct[ut+1]=ot+g[ut+1];return ct}static svgRound(g){return Math.round(g*1e4)}static _normalizePoint(g,et,ot,ct,ut){switch(ut){case 90:return[1-et/ot,g/ct];case 180:return[1-g/ot,1-et/ct];case 270:return[et/ot,1-g/ct];default:return[g/ot,et/ct]}}static _normalizePagePoint(g,et,ot){switch(ot){case 90:return[1-et,g];case 180:return[1-g,1-et];case 270:return[et,1-g];default:return[g,et]}}static createBezierPoints(g,et,ot,ct,ut,dt){return[(g+5*ot)/6,(et+5*ct)/6,(5*ot+ut)/6,(5*ct+dt)/6,(ot+ut)/2,(ct+dt)/2]}}qn(Outline,"PRECISION",1e-4);var Io,Bl,fv,pv,bu,xr,J0,Q0,_S,AS,mv,gv,gm,CS,BT,VT,Z0,Tx,zT,V3,HT,z3,UT,H3,GT,U3,WT,G3,qT,W3;const Lu=class Lu{constructor({x:g,y:et},ot,ct,ut,dt,ft=0){yn(this,Z0);yn(this,zT);yn(this,HT);yn(this,UT);yn(this,GT);yn(this,WT);yn(this,qT);yn(this,Io,void 0);yn(this,Bl,[]);yn(this,fv,void 0);yn(this,pv,void 0);yn(this,bu,[]);yn(this,xr,new Float32Array(18));yn(this,J0,void 0);yn(this,Q0,void 0);yn(this,_S,void 0);yn(this,AS,void 0);yn(this,mv,void 0);yn(this,gv,void 0);yn(this,gm,[]);vn(this,Io,ot),vn(this,gv,ut*ct),vn(this,pv,dt),Kt(this,xr).set([NaN,NaN,NaN,NaN,g,et],6),vn(this,fv,ft),vn(this,AS,Kt(Lu,CS)*ct),vn(this,_S,Kt(Lu,VT)*ct),vn(this,mv,ct),Kt(this,gm).push(g,et)}isEmpty(){return isNaN(Kt(this,xr)[8])}add({x:g,y:et}){var pn;vn(this,J0,g),vn(this,Q0,et);const[ot,ct,ut,dt]=Kt(this,Io);let[ft,St,kt,Tt]=Kt(this,xr).subarray(8,12);const Rt=g-kt,jt=et-Tt,Ft=Math.hypot(Rt,jt);if(Ft<Kt(this,_S))return!1;const $t=Ft-Kt(this,AS),zt=$t/Ft,Ut=zt*Rt,Bt=zt*jt;let Ht=ft,Jt=St;ft=kt,St=Tt,kt+=Ut,Tt+=Bt,(pn=Kt(this,gm))==null||pn.push(g,et);const Zt=-Bt/$t,tn=Ut/$t,nn=Zt*Kt(this,gv),rn=tn*Kt(this,gv);return Kt(this,xr).set(Kt(this,xr).subarray(2,8),0),Kt(this,xr).set([kt+nn,Tt+rn],4),Kt(this,xr).set(Kt(this,xr).subarray(14,18),12),Kt(this,xr).set([kt-nn,Tt-rn],16),isNaN(Kt(this,xr)[6])?(Kt(this,bu).length===0&&(Kt(this,xr).set([ft+nn,St+rn],2),Kt(this,bu).push(NaN,NaN,NaN,NaN,(ft+nn-ot)/ut,(St+rn-ct)/dt),Kt(this,xr).set([ft-nn,St-rn],14),Kt(this,Bl).push(NaN,NaN,NaN,NaN,(ft-nn-ot)/ut,(St-rn-ct)/dt)),Kt(this,xr).set([Ht,Jt,ft,St,kt,Tt],6),!this.isEmpty()):(Kt(this,xr).set([Ht,Jt,ft,St,kt,Tt],6),Math.abs(Math.atan2(Jt-St,Ht-ft)-Math.atan2(Bt,Ut))<Math.PI/2?([ft,St,kt,Tt]=Kt(this,xr).subarray(2,6),Kt(this,bu).push(NaN,NaN,NaN,NaN,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[ft,St,Ht,Jt]=Kt(this,xr).subarray(14,18),Kt(this,Bl).push(NaN,NaN,NaN,NaN,((Ht+ft)/2-ot)/ut,((Jt+St)/2-ct)/dt),!0):([Ht,Jt,ft,St,kt,Tt]=Kt(this,xr).subarray(0,6),Kt(this,bu).push(((Ht+5*ft)/6-ot)/ut,((Jt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[kt,Tt,ft,St,Ht,Jt]=Kt(this,xr).subarray(12,18),Kt(this,Bl).push(((Ht+5*ft)/6-ot)/ut,((Jt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),!0))}toSVGPath(){if(this.isEmpty())return"";const g=Kt(this,bu),et=Kt(this,Bl);if(isNaN(Kt(this,xr)[6])&&!this.isEmpty())return _n(this,zT,V3).call(this);const ot=[];ot.push(`M${g[4]} ${g[5]}`);for(let ct=6;ct<g.length;ct+=6)isNaN(g[ct])?ot.push(`L${g[ct+4]} ${g[ct+5]}`):ot.push(`C${g[ct]} ${g[ct+1]} ${g[ct+2]} ${g[ct+3]} ${g[ct+4]} ${g[ct+5]}`);_n(this,UT,H3).call(this,ot);for(let ct=et.length-6;ct>=6;ct-=6)isNaN(et[ct])?ot.push(`L${et[ct+4]} ${et[ct+5]}`):ot.push(`C${et[ct]} ${et[ct+1]} ${et[ct+2]} ${et[ct+3]} ${et[ct+4]} ${et[ct+5]}`);return _n(this,HT,z3).call(this,ot),ot.join(" ")}newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeDrawOutline(g,et,ot,ct,ut,dt)}getOutlines(){var Rt;const g=Kt(this,bu),et=Kt(this,Bl),ot=Kt(this,xr),[ct,ut,dt,ft]=Kt(this,Io),St=new Float32Array((((Rt=Kt(this,gm))==null?void 0:Rt.length)??0)+2);for(let jt=0,Ft=St.length-2;jt<Ft;jt+=2)St[jt]=(Kt(this,gm)[jt]-ct)/dt,St[jt+1]=(Kt(this,gm)[jt+1]-ut)/ft;if(St[St.length-2]=(Kt(this,J0)-ct)/dt,St[St.length-1]=(Kt(this,Q0)-ut)/ft,isNaN(ot[6])&&!this.isEmpty())return _n(this,GT,U3).call(this,St);const kt=new Float32Array(Kt(this,bu).length+24+Kt(this,Bl).length);let Tt=g.length;for(let jt=0;jt<Tt;jt+=2){if(isNaN(g[jt])){kt[jt]=kt[jt+1]=NaN;continue}kt[jt]=g[jt],kt[jt+1]=g[jt+1]}Tt=_n(this,qT,W3).call(this,kt,Tt);for(let jt=et.length-6;jt>=6;jt-=6)for(let Ft=0;Ft<6;Ft+=2){if(isNaN(et[jt+Ft])){kt[Tt]=kt[Tt+1]=NaN,Tt+=2;continue}kt[Tt]=et[jt+Ft],kt[Tt+1]=et[jt+Ft+1],Tt+=2}return _n(this,WT,G3).call(this,kt,Tt),this.newFreeDrawOutline(kt,St,Kt(this,Io),Kt(this,mv),Kt(this,fv),Kt(this,pv))}};Io=new WeakMap,Bl=new WeakMap,fv=new WeakMap,pv=new WeakMap,bu=new WeakMap,xr=new WeakMap,J0=new WeakMap,Q0=new WeakMap,_S=new WeakMap,AS=new WeakMap,mv=new WeakMap,gv=new WeakMap,gm=new WeakMap,CS=new WeakMap,BT=new WeakMap,VT=new WeakMap,Z0=new WeakSet,Tx=function(){const g=Kt(this,xr).subarray(4,6),et=Kt(this,xr).subarray(16,18),[ot,ct,ut,dt]=Kt(this,Io);return[(Kt(this,J0)+(g[0]-et[0])/2-ot)/ut,(Kt(this,Q0)+(g[1]-et[1])/2-ct)/dt,(Kt(this,J0)+(et[0]-g[0])/2-ot)/ut,(Kt(this,Q0)+(et[1]-g[1])/2-ct)/dt]},zT=new WeakSet,V3=function(){const[g,et,ot,ct]=Kt(this,Io),[ut,dt,ft,St]=_n(this,Z0,Tx).call(this);return`M${(Kt(this,xr)[2]-g)/ot} ${(Kt(this,xr)[3]-et)/ct} L${(Kt(this,xr)[4]-g)/ot} ${(Kt(this,xr)[5]-et)/ct} L${ut} ${dt} L${ft} ${St} L${(Kt(this,xr)[16]-g)/ot} ${(Kt(this,xr)[17]-et)/ct} L${(Kt(this,xr)[14]-g)/ot} ${(Kt(this,xr)[15]-et)/ct} Z`},HT=new WeakSet,z3=function(g){const et=Kt(this,Bl);g.push(`L${et[4]} ${et[5]} Z`)},UT=new WeakSet,H3=function(g){const[et,ot,ct,ut]=Kt(this,Io),dt=Kt(this,xr).subarray(4,6),ft=Kt(this,xr).subarray(16,18),[St,kt,Tt,Rt]=_n(this,Z0,Tx).call(this);g.push(`L${(dt[0]-et)/ct} ${(dt[1]-ot)/ut} L${St} ${kt} L${Tt} ${Rt} L${(ft[0]-et)/ct} ${(ft[1]-ot)/ut}`)},GT=new WeakSet,U3=function(g){const et=Kt(this,xr),[ot,ct,ut,dt]=Kt(this,Io),[ft,St,kt,Tt]=_n(this,Z0,Tx).call(this),Rt=new Float32Array(36);return Rt.set([NaN,NaN,NaN,NaN,(et[2]-ot)/ut,(et[3]-ct)/dt,NaN,NaN,NaN,NaN,(et[4]-ot)/ut,(et[5]-ct)/dt,NaN,NaN,NaN,NaN,ft,St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,(et[16]-ot)/ut,(et[17]-ct)/dt,NaN,NaN,NaN,NaN,(et[14]-ot)/ut,(et[15]-ct)/dt],0),this.newFreeDrawOutline(Rt,g,Kt(this,Io),Kt(this,mv),Kt(this,fv),Kt(this,pv))},WT=new WeakSet,G3=function(g,et){const ot=Kt(this,Bl);return g.set([NaN,NaN,NaN,NaN,ot[4],ot[5]],et),et+=6},qT=new WeakSet,W3=function(g,et){const ot=Kt(this,xr).subarray(4,6),ct=Kt(this,xr).subarray(16,18),[ut,dt,ft,St]=Kt(this,Io),[kt,Tt,Rt,jt]=_n(this,Z0,Tx).call(this);return g.set([NaN,NaN,NaN,NaN,(ot[0]-ut)/ft,(ot[1]-dt)/St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,Rt,jt,NaN,NaN,NaN,NaN,(ct[0]-ut)/ft,(ct[1]-dt)/St],et),et+=24},yn(Lu,CS,8),yn(Lu,BT,2),yn(Lu,VT,Kt(Lu,CS)+Kt(Lu,BT));let FreeDrawOutliner=Lu;var yv,ey,hp,RS,Do,PS,ns,KT,q3;class FreeDrawOutline extends Outline{constructor(et,ot,ct,ut,dt,ft){super();yn(this,KT);yn(this,yv,void 0);yn(this,ey,new Float32Array(4));yn(this,hp,void 0);yn(this,RS,void 0);yn(this,Do,void 0);yn(this,PS,void 0);yn(this,ns,void 0);vn(this,ns,et),vn(this,Do,ot),vn(this,yv,ct),vn(this,PS,ut),vn(this,hp,dt),vn(this,RS,ft),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],_n(this,KT,q3).call(this,ft);const[St,kt,Tt,Rt]=Kt(this,ey);for(let jt=0,Ft=et.length;jt<Ft;jt+=2)et[jt]=(et[jt]-St)/Tt,et[jt+1]=(et[jt+1]-kt)/Rt;for(let jt=0,Ft=ot.length;jt<Ft;jt+=2)ot[jt]=(ot[jt]-St)/Tt,ot[jt+1]=(ot[jt+1]-kt)/Rt}toSVGPath(){const et=[`M${Kt(this,ns)[4]} ${Kt(this,ns)[5]}`];for(let ot=6,ct=Kt(this,ns).length;ot<ct;ot+=6){if(isNaN(Kt(this,ns)[ot])){et.push(`L${Kt(this,ns)[ot+4]} ${Kt(this,ns)[ot+5]}`);continue}et.push(`C${Kt(this,ns)[ot]} ${Kt(this,ns)[ot+1]} ${Kt(this,ns)[ot+2]} ${Kt(this,ns)[ot+3]} ${Kt(this,ns)[ot+4]} ${Kt(this,ns)[ot+5]}`)}return et.push("Z"),et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=ct-et,St=ut-ot;let kt,Tt;switch(dt){case 0:kt=Outline._rescale(Kt(this,ns),et,ut,ft,-St),Tt=Outline._rescale(Kt(this,Do),et,ut,ft,-St);break;case 90:kt=Outline._rescaleAndSwap(Kt(this,ns),et,ot,ft,St),Tt=Outline._rescaleAndSwap(Kt(this,Do),et,ot,ft,St);break;case 180:kt=Outline._rescale(Kt(this,ns),ct,ot,-ft,St),Tt=Outline._rescale(Kt(this,Do),ct,ot,-ft,St);break;case 270:kt=Outline._rescaleAndSwap(Kt(this,ns),ct,ut,-ft,-St),Tt=Outline._rescaleAndSwap(Kt(this,Do),ct,ut,-ft,-St);break}return{outline:Array.from(kt),points:[Array.from(Tt)]}}get box(){return Kt(this,ey)}newOutliner(et,ot,ct,ut,dt,ft=0){return new FreeDrawOutliner(et,ot,ct,ut,dt,ft)}getNewOutline(et,ot){const[ct,ut,dt,ft]=Kt(this,ey),[St,kt,Tt,Rt]=Kt(this,yv),jt=dt*Tt,Ft=ft*Rt,$t=ct*Tt+St,zt=ut*Rt+kt,Ut=this.newOutliner({x:Kt(this,Do)[0]*jt+$t,y:Kt(this,Do)[1]*Ft+zt},Kt(this,yv),Kt(this,PS),et,Kt(this,RS),ot??Kt(this,hp));for(let Bt=2;Bt<Kt(this,Do).length;Bt+=2)Ut.add({x:Kt(this,Do)[Bt]*jt+$t,y:Kt(this,Do)[Bt+1]*Ft+zt});return Ut.getOutlines()}}yv=new WeakMap,ey=new WeakMap,hp=new WeakMap,RS=new WeakMap,Do=new WeakMap,PS=new WeakMap,ns=new WeakMap,KT=new WeakSet,q3=function(et){const ot=Kt(this,ns);let ct=ot[4],ut=ot[5];const dt=[ct,ut,ct,ut];let ft=ct,St=ut,kt=ct,Tt=ut;const Rt=et?Math.max:Math.min,jt=new Float32Array(4);for(let $t=6,zt=ot.length;$t<zt;$t+=6){const Ut=ot[$t+4],Bt=ot[$t+5];isNaN(ot[$t])?(Util$1.pointBoundingBox(Ut,Bt,dt),St>Bt?(ft=Ut,St=Bt):St===Bt&&(ft=Rt(ft,Ut)),Tt<Bt?(kt=Ut,Tt=Bt):Tt===Bt&&(kt=Rt(kt,Ut))):(jt[0]=jt[1]=1/0,jt[2]=jt[3]=-1/0,Util$1.bezierBoundingBox(ct,ut,...ot.slice($t,$t+6),jt),Util$1.rectBoundingBox(jt[0],jt[1],jt[2],jt[3],dt),St>jt[1]?(ft=jt[0],St=jt[1]):St===jt[1]&&(ft=Rt(ft,jt[0])),Tt<jt[3]?(kt=jt[2],Tt=jt[3]):Tt===jt[3]&&(kt=Rt(kt,jt[2]))),ct=Ut,ut=Bt}const Ft=Kt(this,ey);Ft[0]=dt[0]-Kt(this,hp),Ft[1]=dt[1]-Kt(this,hp),Ft[2]=dt[2]-dt[0]+2*Kt(this,hp),Ft[3]=dt[3]-dt[1]+2*Kt(this,hp),this.firstPoint=[ft,St],this.lastPoint=[kt,Tt]};var NS,MS,OS,ym,Vl,YT,K3,vv,bw,XT,Y3,JT,X3,IS,_C;class HighlightOutliner{constructor(g,et=0,ot=0,ct=!0){yn(this,YT);yn(this,vv);yn(this,XT);yn(this,JT);yn(this,IS);yn(this,NS,void 0);yn(this,MS,void 0);yn(this,OS,void 0);yn(this,ym,[]);yn(this,Vl,[]);const ut=[1/0,1/0,-1/0,-1/0],ft=10**-4;for(const{x:Ut,y:Bt,width:Ht,height:Jt}of g){const Zt=Math.floor((Ut-et)/ft)*ft,tn=Math.ceil((Ut+Ht+et)/ft)*ft,nn=Math.floor((Bt-et)/ft)*ft,rn=Math.ceil((Bt+Jt+et)/ft)*ft,on=[Zt,nn,rn,!0],pn=[tn,nn,rn,!1];Kt(this,ym).push(on,pn),Util$1.rectBoundingBox(Zt,nn,tn,rn,ut)}const St=ut[2]-ut[0]+2*ot,kt=ut[3]-ut[1]+2*ot,Tt=ut[0]-ot,Rt=ut[1]-ot;let jt=ct?-1/0:1/0,Ft=1/0;const $t=Kt(this,ym).at(ct?-1:-2),zt=[$t[0],$t[2]];for(const Ut of Kt(this,ym)){const[Bt,Ht,Jt,Zt]=Ut;!Zt&&ct?Ht<Ft?(Ft=Ht,jt=Bt):Ht===Ft&&(jt=Math.max(jt,Bt)):Zt&&!ct&&(Ht<Ft?(Ft=Ht,jt=Bt):Ht===Ft&&(jt=Math.min(jt,Bt))),Ut[0]=(Bt-Tt)/St,Ut[1]=(Ht-Rt)/kt,Ut[2]=(Jt-Rt)/kt}vn(this,NS,new Float32Array([Tt,Rt,St,kt])),vn(this,MS,[jt,Ft]),vn(this,OS,zt)}getOutlines(){Kt(this,ym).sort((et,ot)=>et[0]-ot[0]||et[1]-ot[1]||et[2]-ot[2]);const g=[];for(const et of Kt(this,ym))et[3]?(g.push(..._n(this,IS,_C).call(this,et)),_n(this,XT,Y3).call(this,et)):(_n(this,JT,X3).call(this,et),g.push(..._n(this,IS,_C).call(this,et)));return _n(this,YT,K3).call(this,g)}}NS=new WeakMap,MS=new WeakMap,OS=new WeakMap,ym=new WeakMap,Vl=new WeakMap,YT=new WeakSet,K3=function(g){const et=[],ot=new Set;for(const dt of g){const[ft,St,kt]=dt;et.push([ft,St,dt],[ft,kt,dt])}et.sort((dt,ft)=>dt[1]-ft[1]||dt[0]-ft[0]);for(let dt=0,ft=et.length;dt<ft;dt+=2){const St=et[dt][2],kt=et[dt+1][2];St.push(kt),kt.push(St),ot.add(St),ot.add(kt)}const ct=[];let ut;for(;ot.size>0;){const dt=ot.values().next().value;let[ft,St,kt,Tt,Rt]=dt;ot.delete(dt);let jt=ft,Ft=St;for(ut=[ft,kt],ct.push(ut);;){let $t;if(ot.has(Tt))$t=Tt;else if(ot.has(Rt))$t=Rt;else break;ot.delete($t),[ft,St,kt,Tt,Rt]=$t,jt!==ft&&(ut.push(jt,Ft,ft,Ft===St?St:kt),jt=ft),Ft=Ft===St?kt:St}ut.push(jt,Ft)}return new HighlightOutline(ct,Kt(this,NS),Kt(this,MS),Kt(this,OS))},vv=new WeakSet,bw=function(g){const et=Kt(this,Vl);let ot=0,ct=et.length-1;for(;ot<=ct;){const ut=ot+ct>>1,dt=et[ut][0];if(dt===g)return ut;dt<g?ot=ut+1:ct=ut-1}return ct+1},XT=new WeakSet,Y3=function([,g,et]){const ot=_n(this,vv,bw).call(this,g);Kt(this,Vl).splice(ot,0,[g,et])},JT=new WeakSet,X3=function([,g,et]){const ot=_n(this,vv,bw).call(this,g);for(let ct=ot;ct<Kt(this,Vl).length;ct++){const[ut,dt]=Kt(this,Vl)[ct];if(ut!==g)break;if(ut===g&&dt===et){Kt(this,Vl).splice(ct,1);return}}for(let ct=ot-1;ct>=0;ct--){const[ut,dt]=Kt(this,Vl)[ct];if(ut!==g)break;if(ut===g&&dt===et){Kt(this,Vl).splice(ct,1);return}}},IS=new WeakSet,_C=function(g){const[et,ot,ct]=g,ut=[[et,ot,ct]],dt=_n(this,vv,bw).call(this,ct);for(let ft=0;ft<dt;ft++){const[St,kt]=Kt(this,Vl)[ft];for(let Tt=0,Rt=ut.length;Tt<Rt;Tt++){const[,jt,Ft]=ut[Tt];if(!(kt<=jt||Ft<=St)){if(jt>=St){if(Ft>kt)ut[Tt][1]=kt;else{if(Rt===1)return[];ut.splice(Tt,1),Tt--,Rt--}continue}ut[Tt][2]=St,Ft>kt&&ut.push([et,kt,Ft])}}}return ut};var DS,xv;class HighlightOutline extends Outline{constructor(et,ot,ct,ut){super();yn(this,DS,void 0);yn(this,xv,void 0);vn(this,xv,et),vn(this,DS,ot),this.firstPoint=ct,this.lastPoint=ut}toSVGPath(){const et=[];for(const ot of Kt(this,xv)){let[ct,ut]=ot;et.push(`M${ct} ${ut}`);for(let dt=2;dt<ot.length;dt+=2){const ft=ot[dt],St=ot[dt+1];ft===ct?(et.push(`V${St}`),ut=St):St===ut&&(et.push(`H${ft}`),ct=ft)}et.push("Z")}return et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=[],St=ct-et,kt=ut-ot;for(const Tt of Kt(this,xv)){const Rt=new Array(Tt.length);for(let jt=0;jt<Tt.length;jt+=2)Rt[jt]=et+Tt[jt]*St,Rt[jt+1]=ut-Tt[jt+1]*kt;ft.push(Rt)}return ft}get box(){return Kt(this,DS)}get classNamesForOutlining(){return["highlightOutline"]}}DS=new WeakMap,xv=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeHighlightOutline(g,et,ot,ct,ut,dt)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(g,et,ot,ct,ut,dt=0){return new FreeHighlightOutliner(g,et,ot,ct,ut,dt)}}var bv,LS,dp,ty,jS,yo,FS,$S,ny,Lo,jo,Ms,Ev,Sv,Gs,wv,$a,BS,VS,AC,kv,Ew,QT,J3,ZT,Q3,e_,Z3,zS,CC,fp,Um,vm,By,t_,e4,Tv,Sw,_v,ww,n_,t4,r_,n4,i_,r4,s_,i4,o_,s4;const Er=class Er extends AnnotationEditor{constructor(et){super({...et,name:"highlightEditor"});yn(this,VS);yn(this,kv);yn(this,QT);yn(this,ZT);yn(this,e_);yn(this,zS);yn(this,fp);yn(this,t_);yn(this,Tv);yn(this,_v);yn(this,n_);yn(this,r_);yn(this,o_);yn(this,bv,null);yn(this,LS,0);yn(this,dp,void 0);yn(this,ty,null);yn(this,jS,null);yn(this,yo,null);yn(this,FS,null);yn(this,$S,0);yn(this,ny,null);yn(this,Lo,null);yn(this,jo,null);yn(this,Ms,!1);yn(this,Ev,null);yn(this,Sv,null);yn(this,Gs,null);yn(this,wv,"");yn(this,$a,void 0);yn(this,BS,"");this.color=et.color||Er._defaultColor,vn(this,$a,et.thickness||Er._defaultThickness),this.opacity=et.opacity||Er._defaultOpacity,vn(this,dp,et.boxes||null),vn(this,BS,et.methodOfCreation||""),vn(this,wv,et.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",et.highlightId>-1?(vn(this,Ms,!0),_n(this,kv,Ew).call(this,et),_n(this,fp,Um).call(this)):Kt(this,dp)&&(vn(this,bv,et.anchorNode),vn(this,LS,et.anchorOffset),vn(this,FS,et.focusNode),vn(this,$S,et.focusOffset),_n(this,VS,AC).call(this),_n(this,fp,Um).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const et=Er.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],et._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],et._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],et._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],et._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Kt(this,Ms)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Kt(this,$a),methodOfCreation:Kt(this,BS)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(et){return{numberOfColors:et.get("color").size}}static initialize(et,ot){var ct;AnnotationEditor.initialize(et,ot),Er._defaultColor||(Er._defaultColor=((ct=ot.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Er._defaultColor=ot;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Er._defaultThickness=ot;break}}translateInPage(et,ot){}get toolbarPosition(){return Kt(this,Sv)}get commentButtonPosition(){return Kt(this,Ev)}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:_n(this,QT,J3).call(this,ot);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:_n(this,ZT,Q3).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Er._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Er._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Er._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Kt(this,$a)||Er._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,Kt(this,Ms)]]}onUpdatedColor(){var et,ot;(et=this.parent)==null||et.drawLayer.updateProperties(Kt(this,jo),{root:{fill:this.color,"fill-opacity":this.opacity}}),(ot=Kt(this,jS))==null||ot.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",vn(this,jS,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_n(this,_v,ww).call(this))}getBaseTranslation(){return[0,0]}getRect(et,ot){return super.getRect(et,ot,_n(this,_v,ww).call(this))}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),et&&this.div.focus()}remove(){_n(this,zS,CC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_n(this,fp,Um).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?_n(this,zS,CC).call(this):et&&(_n(this,fp,Um).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),this.show(this._isVisible),ot&&this.select()}rotate(et){var ut,dt,ft;const{drawLayer:ot}=this.parent;let ct;Kt(this,Ms)?(et=(et-this.rotation+360)%360,ct=_n(ut=Er,vm,By).call(ut,Kt(this,Lo).box,et)):ct=_n(dt=Er,vm,By).call(dt,[this.x,this.y,this.width,this.height],et),ot.updateProperties(Kt(this,jo),{bbox:ct,root:{"data-main-rotation":et}}),ot.updateProperties(Kt(this,Gs),{bbox:_n(ft=Er,vm,By).call(ft,Kt(this,yo).box,et),root:{"data-main-rotation":et}})}render(){if(this.div)return this.div;const et=super.render();Kt(this,wv)&&(et.setAttribute("aria-label",Kt(this,wv)),et.setAttribute("role","mark")),Kt(this,Ms)?et.classList.add("free"):this.div.addEventListener("keydown",_n(this,t_,e4).bind(this),{signal:this._uiManager._signal});const ot=vn(this,ny,document.createElement("div"));return et.append(ot),ot.setAttribute("aria-hidden","true"),ot.className="internal",ot.style.clipPath=Kt(this,ty),this.setDims(this.width,this.height),bindEvents(this,Kt(this,ny),["pointerover","pointerleave"]),this.enableEditing(),et}pointerover(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Kt(this,Gs),{rootClass:{hovered:!0}})}pointerleave(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Kt(this,Gs),{rootClass:{hovered:!1}})}_moveCaret(et){switch(this.parent.unselect(this),et){case 0:case 2:_n(this,Tv,Sw).call(this,!0);break;case 1:case 3:_n(this,Tv,Sw).call(this,!1);break}}select(){var et;super.select(),Kt(this,Gs)&&((et=this.parent)==null||et.drawLayer.updateProperties(Kt(this,Gs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var et;super.unselect(),Kt(this,Gs)&&((et=this.parent)==null||et.drawLayer.updateProperties(Kt(this,Gs),{rootClass:{selected:!1}}),Kt(this,Ms)||_n(this,Tv,Sw).call(this,!1))}get _mustFixPosition(){return!Kt(this,Ms)}show(et=this._isVisible){super.show(et),this.parent&&(this.parent.drawLayer.updateProperties(Kt(this,jo),{rootClass:{hidden:!et}}),this.parent.drawLayer.updateProperties(Kt(this,Gs),{rootClass:{hidden:!et}}))}static startHighlighting(et,ot,{target:ct,x:ut,y:dt}){const{x:ft,y:St,width:kt,height:Tt}=ct.getBoundingClientRect(),Rt=new AbortController,jt=et.combinedSignal(Rt),Ft=$t=>{Rt.abort(),_n(this,s_,i4).call(this,et,$t)};window.addEventListener("blur",Ft,{signal:jt}),window.addEventListener("pointerup",Ft,{signal:jt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:jt}),window.addEventListener("contextmenu",noContextMenu,{signal:jt}),ct.addEventListener("pointermove",_n(this,i_,r4).bind(this,et),{signal:jt}),this._freeHighlight=new FreeHighlightOutliner({x:ut,y:dt},[ft,St,kt,Tt],et.scale,this._defaultThickness/2,ot,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=et.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(et,ot,ct){var zt,Ut,Bt,Ht;let ut=null;if(et instanceof HighlightAnnotationElement){const{data:{quadPoints:Jt,rect:Zt,rotation:tn,id:nn,color:rn,opacity:on,popupRef:pn,richText:dn,contentsObj:hn,creationDate:un,modificationDate:En},parent:{page:{pageNumber:wn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(rn),opacity:on,quadPoints:Jt,boxes:null,pageIndex:wn-1,rect:Zt.slice(0),rotation:tn,annotationElementId:nn,id:nn,deleted:!1,popupRef:pn,richText:dn,comment:(hn==null?void 0:hn.str)||null,creationDate:un,modificationDate:En}}else if(et instanceof InkAnnotationElement){const{data:{inkLists:Jt,rect:Zt,rotation:tn,id:nn,color:rn,borderStyle:{rawWidth:on},popupRef:pn,richText:dn,contentsObj:hn,creationDate:un,modificationDate:En},parent:{page:{pageNumber:wn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(rn),thickness:on,inkLists:Jt,boxes:null,pageIndex:wn-1,rect:Zt.slice(0),rotation:tn,annotationElementId:nn,id:nn,deleted:!1,popupRef:pn,richText:dn,comment:(hn==null?void 0:hn.str)||null,creationDate:un,modificationDate:En}}const{color:dt,quadPoints:ft,inkLists:St,opacity:kt}=et,Tt=await super.deserialize(et,ot,ct);Tt.color=Util$1.makeHexColor(...dt),Tt.opacity=kt||1,St&&vn(Tt,$a,et.thickness),Tt._initialData=ut,et.comment&&Tt.setCommentData(et);const[Rt,jt]=Tt.pageDimensions,[Ft,$t]=Tt.pageTranslation;if(ft){const Jt=vn(Tt,dp,[]);for(let Zt=0;Zt<ft.length;Zt+=8)Jt.push({x:(ft[Zt]-Ft)/Rt,y:1-(ft[Zt+1]-$t)/jt,width:(ft[Zt+2]-ft[Zt])/Rt,height:(ft[Zt+1]-ft[Zt+5])/jt});_n(zt=Tt,VS,AC).call(zt),_n(Ut=Tt,fp,Um).call(Ut),Tt.rotate(Tt.rotation)}else if(St){vn(Tt,Ms,!0);const Jt=St[0],Zt={x:Jt[0]-Ft,y:jt-(Jt[1]-$t)},tn=new FreeHighlightOutliner(Zt,[0,0,Rt,jt],1,Kt(Tt,$a)/2,!0,.001);for(let on=0,pn=Jt.length;on<pn;on+=2)Zt.x=Jt[on]-Ft,Zt.y=jt-(Jt[on+1]-$t),tn.add(Zt);const{id:nn,clipPathId:rn}=ot.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Tt.color,"fill-opacity":Tt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:tn.toSVGPath()}},!0,!0);_n(Bt=Tt,kv,Ew).call(Bt,{highlightOutlines:tn.getOutlines(),highlightId:nn,clipPathId:rn}),_n(Ht=Tt,fp,Um).call(Ht),Tt.rotate(Tt.parentRotation)}return Tt}serialize(et=!1){if(this.isEmpty()||et)return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ct=super.serialize(et);return Object.assign(ct,{color:ot,opacity:this.opacity,thickness:Kt(this,$a),quadPoints:_n(this,n_,t4).call(this),outlines:_n(this,r_,n4).call(this,ct.rect)}),this.addComment(ct),this.annotationElementId&&!_n(this,o_,s4).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};bv=new WeakMap,LS=new WeakMap,dp=new WeakMap,ty=new WeakMap,jS=new WeakMap,yo=new WeakMap,FS=new WeakMap,$S=new WeakMap,ny=new WeakMap,Lo=new WeakMap,jo=new WeakMap,Ms=new WeakMap,Ev=new WeakMap,Sv=new WeakMap,Gs=new WeakMap,wv=new WeakMap,$a=new WeakMap,BS=new WeakMap,VS=new WeakSet,AC=function(){const et=new HighlightOutliner(Kt(this,dp),.001);vn(this,Lo,et.getOutlines()),[this.x,this.y,this.width,this.height]=Kt(this,Lo).box;const ot=new HighlightOutliner(Kt(this,dp),.0025,.001,this._uiManager.direction==="ltr");vn(this,yo,ot.getOutlines());const{firstPoint:ct}=Kt(this,Lo);vn(this,Ev,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height]);const{lastPoint:ut}=Kt(this,yo);vn(this,Sv,[(ut[0]-this.x)/this.width,(ut[1]-this.y)/this.height])},kv=new WeakSet,Ew=function({highlightOutlines:et,highlightId:ot,clipPathId:ct}){var jt,Ft;vn(this,Lo,et);const ut=1.5;if(vn(this,yo,et.getNewOutline(Kt(this,$a)/2+ut,.0025)),ot>=0)vn(this,jo,ot),vn(this,ty,ct),this.parent.drawLayer.finalizeDraw(ot,{bbox:et.box,path:{d:et.toSVGPath()}}),vn(this,Gs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Kt(this,yo).box,path:{d:Kt(this,yo).toSVGPath()}},!0));else if(this.parent){const $t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Kt(this,jo),{bbox:_n(jt=Er,vm,By).call(jt,Kt(this,Lo).box,($t-this.rotation+360)%360),path:{d:et.toSVGPath()}}),this.parent.drawLayer.updateProperties(Kt(this,Gs),{bbox:_n(Ft=Er,vm,By).call(Ft,Kt(this,yo).box,$t),path:{d:Kt(this,yo).toSVGPath()}})}const[dt,ft,St,kt]=et.box;switch(this.rotation){case 0:this.x=dt,this.y=ft,this.width=St,this.height=kt;break;case 90:{const[$t,zt]=this.parentDimensions;this.x=ft,this.y=1-dt,this.width=St*zt/$t,this.height=kt*$t/zt;break}case 180:this.x=1-dt,this.y=1-ft,this.width=St,this.height=kt;break;case 270:{const[$t,zt]=this.parentDimensions;this.x=1-ft,this.y=dt,this.width=St*zt/$t,this.height=kt*$t/zt;break}}const{firstPoint:Tt}=et;vn(this,Ev,[(Tt[0]-dt)/St,(Tt[1]-ft)/kt]);const{lastPoint:Rt}=Kt(this,yo);vn(this,Sv,[(Rt[0]-dt)/St,(Rt[1]-ft)/kt])},QT=new WeakSet,J3=function(et){const ot=(dt,ft)=>{this.color=dt,this.opacity=ft,this.onUpdatedColor()},ct=this.color,ut=this.opacity;this.addCommands({cmd:ot.bind(this,et,Er._defaultOpacity),undo:ot.bind(this,ct,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(et)},!0)},ZT=new WeakSet,Q3=function(et){const ot=Kt(this,$a),ct=ut=>{vn(this,$a,ut),_n(this,e_,Z3).call(this,ut)};this.addCommands({cmd:ct.bind(this,et),undo:ct.bind(this,ot),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:et},!0)},e_=new WeakSet,Z3=function(et){Kt(this,Ms)&&(_n(this,kv,Ew).call(this,{highlightOutlines:Kt(this,Lo).getNewOutline(et/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},zS=new WeakSet,CC=function(){Kt(this,jo)===null||!this.parent||(this.parent.drawLayer.remove(Kt(this,jo)),vn(this,jo,null),this.parent.drawLayer.remove(Kt(this,Gs)),vn(this,Gs,null))},fp=new WeakSet,Um=function(et=this.parent){Kt(this,jo)===null&&({id:cs(this,jo)._,clipPathId:cs(this,ty)._}=et.drawLayer.draw({bbox:Kt(this,Lo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Kt(this,Ms)},path:{d:Kt(this,Lo).toSVGPath()}},!1,!0),vn(this,Gs,et.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Kt(this,Ms)},bbox:Kt(this,yo).box,path:{d:Kt(this,yo).toSVGPath()}},Kt(this,Ms))),Kt(this,ny)&&(Kt(this,ny).style.clipPath=Kt(this,ty)))},vm=new WeakSet,By=function([et,ot,ct,ut],dt){switch(dt){case 90:return[1-ot-ut,et,ut,ct];case 180:return[1-et-ct,1-ot-ut,ct,ut];case 270:return[ot,1-et-ct,ut,ct]}return[et,ot,ct,ut]},t_=new WeakSet,e4=function(et){Er._keyboardManager.exec(this,et)},Tv=new WeakSet,Sw=function(et){if(!Kt(this,bv))return;const ot=window.getSelection();et?ot.setPosition(Kt(this,bv),Kt(this,LS)):ot.setPosition(Kt(this,FS),Kt(this,$S))},_v=new WeakSet,ww=function(){return Kt(this,Ms)?this.rotation:0},n_=new WeakSet,t4=function(){if(Kt(this,Ms))return null;const[et,ot]=this.pageDimensions,[ct,ut]=this.pageTranslation,dt=Kt(this,dp),ft=new Float32Array(dt.length*8);let St=0;for(const{x:kt,y:Tt,width:Rt,height:jt}of dt){const Ft=kt*et+ct,$t=(1-Tt)*ot+ut;ft[St]=ft[St+4]=Ft,ft[St+1]=ft[St+3]=$t,ft[St+2]=ft[St+6]=Ft+Rt*et,ft[St+5]=ft[St+7]=$t-jt*ot,St+=8}return ft},r_=new WeakSet,n4=function(et){return Kt(this,Lo).serialize(et,_n(this,_v,ww).call(this))},i_=new WeakSet,r4=function(et,ot){this._freeHighlight.add(ot)&&et.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},s_=new WeakSet,i4=function(et,ot){this._freeHighlight.isEmpty()?et.drawLayer.remove(this._freeHighlightId):et.createAndAddNewEditor(ot,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},o_=new WeakSet,s4=function(et){const{color:ot}=this._initialData;return this.hasEditedComment||et.color.some((ct,ut)=>ct!==ot[ut])},yn(Er,vm),yn(Er,i_),yn(Er,s_),qn(Er,"_defaultColor",null),qn(Er,"_defaultOpacity",1),qn(Er,"_defaultThickness",12),qn(Er,"_type","highlight"),qn(Er,"_editorType",AnnotationEditorType.HIGHLIGHT),qn(Er,"_freeHighlightId",-1),qn(Er,"_freeHighlight",null),qn(Er,"_freeHighlightClipId","");let HighlightEditor=Er;var ry;class DrawingOptions{constructor(){yn(this,ry,Object.create(null))}updateProperty(g,et){this[g]=et,this.updateSVGProperty(g,et)}updateProperties(g){if(g)for(const[et,ot]of Object.entries(g))et.startsWith("_")||this.updateProperty(et,ot)}updateSVGProperty(g,et){Kt(this,ry)[g]=et}toSVGProperties(){const g=Kt(this,ry);return vn(this,ry,Object.create(null)),{root:g}}reset(){vn(this,ry,Object.create(null))}updateAll(g=this){this.updateProperties(g)}clone(){unreachable("Not implemented")}}ry=new WeakMap;var Fo,Av,bs,iy,sy,xm,bm,Em,oy,HS,RC,US,PC,GS,NC,ay,_x,a_,o4,Cv,kw,ly,Ax,Sm,Vy;const rr=class rr extends AnnotationEditor{constructor(et){super(et);yn(this,HS);yn(this,US);yn(this,GS);yn(this,ay);yn(this,a_);yn(this,Cv);yn(this,ly);yn(this,Sm);yn(this,Fo,null);yn(this,Av,void 0);qn(this,"_colorPicker",null);qn(this,"_drawId",null);vn(this,Av,et.mustBeCommitted||!1),this._addOutlines(et)}onUpdatedColor(){var et;(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_addOutlines(et){et.drawOutlines&&(_n(this,HS,RC).call(this,et),_n(this,ay,_x).call(this))}static _mergeSVGProperties(et,ot){const ct=new Set(Object.keys(et));for(const[ut,dt]of Object.entries(ot))ct.has(ut)?Object.assign(et[ut],dt):et[ut]=dt;return et}static getDefaultDrawingOptions(et){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(et,ot){const ct=this.typesMap.get(et);ct&&this._defaultDrawingOptions.updateProperty(ct,ot),this._currentParent&&(Kt(rr,bs).updateProperty(ct,ot),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(et,ot){const ct=this.constructor.typesMap.get(et);ct&&this._updateProperty(et,ct,ot)}static get defaultPropertiesToUpdate(){const et=[],ot=this._defaultDrawingOptions;for(const[ct,ut]of this.typesMap)et.push([ct,ot[ut]]);return et}get propertiesToUpdate(){const et=[],{_drawingOptions:ot}=this;for(const[ct,ut]of this.constructor.typesMap)et.push([ct,ot[ut]]);return et}_updateProperty(et,ot,ct){const ut=this._drawingOptions,dt=ut[ot],ft=St=>{var Tt;ut.updateProperty(ot,St);const kt=Kt(this,Fo).updateProperty(ot,St);kt&&_n(this,ly,Ax).call(this,kt),(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,ut.toSVGProperties()),et===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:ft.bind(this,ct),undo:ft.bind(this,dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:et,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(Kt(this,Fo).getPathResizingSVGProperties(_n(this,Cv,kw).call(this)),{bbox:_n(this,Sm,Vy).call(this)}))}_onResized(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(Kt(this,Fo).getPathResizedSVGProperties(_n(this,Cv,kw).call(this)),{bbox:_n(this,Sm,Vy).call(this)}))}_onTranslating(et,ot){var ct;(ct=this.parent)==null||ct.drawLayer.updateProperties(this._drawId,{bbox:_n(this,Sm,Vy).call(this)})}_onTranslated(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(Kt(this,Fo).getPathTranslatedSVGProperties(_n(this,Cv,kw).call(this),this.parentDimensions),{bbox:_n(this,Sm,Vy).call(this)}))}_onStartDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Kt(this,Av)&&(vn(this,Av,!1),this.commit(),this.parent.setSelected(this),et&&this.isOnScreen&&this.div.focus())}remove(){_n(this,GS,NC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_n(this,ay,_x).call(this),_n(this,ly,Ax).call(this,Kt(this,Fo).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?(this._uiManager.removeShouldRescale(this),_n(this,GS,NC).call(this)):et&&(this._uiManager.addShouldRescale(this),_n(this,ay,_x).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),ot&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties({bbox:_n(this,Sm,Vy).call(this)},Kt(this,Fo).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&_n(this,ly,Ax).call(this,Kt(this,Fo).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let et,ot;this._isCopy&&(et=this.x,ot=this.y);const ct=super.render();ct.classList.add("draw");const ut=document.createElement("div");return ct.append(ut),ut.setAttribute("aria-hidden","true"),ut.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(et,ot),ct}static createDrawerInstance(et,ot,ct,ut,dt){unreachable("Not implemented")}static startDrawing(et,ot,ct,ut){var Ut;const{target:dt,offsetX:ft,offsetY:St,pointerId:kt,pointerType:Tt}=ut;if(Kt(rr,bm)&&Kt(rr,bm)!==Tt)return;const{viewport:{rotation:Rt}}=et,{width:jt,height:Ft}=dt.getBoundingClientRect(),$t=vn(rr,iy,new AbortController),zt=et.combinedSignal($t);if(Kt(rr,xm)||vn(rr,xm,kt),Kt(rr,bm)??vn(rr,bm,Tt),window.addEventListener("pointerup",Bt=>{var Ht;Kt(rr,xm)===Bt.pointerId?this._endDraw(Bt):(Ht=Kt(rr,Em))==null||Ht.delete(Bt.pointerId)},{signal:zt}),window.addEventListener("pointercancel",Bt=>{var Ht;Kt(rr,xm)===Bt.pointerId?this._currentParent.endDrawingSession():(Ht=Kt(rr,Em))==null||Ht.delete(Bt.pointerId)},{signal:zt}),window.addEventListener("pointerdown",Bt=>{Kt(rr,bm)===Bt.pointerType&&((Kt(rr,Em)||vn(rr,Em,new Set)).add(Bt.pointerId),Kt(rr,bs).isCancellable()&&(Kt(rr,bs).removeLastElement(),Kt(rr,bs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:zt}),window.addEventListener("contextmenu",noContextMenu,{signal:zt}),dt.addEventListener("pointermove",this._drawMove.bind(this),{signal:zt}),dt.addEventListener("touchmove",Bt=>{Bt.timeStamp===Kt(rr,oy)&&stopEvent(Bt)},{signal:zt}),et.toggleDrawing(),(Ut=ot._editorUndoBar)==null||Ut.hide(),Kt(rr,bs)){et.drawLayer.updateProperties(this._currentDrawId,Kt(rr,bs).startNew(ft,St,jt,Ft,Rt));return}ot.updateUIForDefaultProperties(this),vn(rr,bs,this.createDrawerInstance(ft,St,jt,Ft,Rt)),vn(rr,sy,this.getDefaultDrawingOptions()),this._currentParent=et,{id:this._currentDrawId}=et.drawLayer.draw(this._mergeSVGProperties(Kt(rr,sy).toSVGProperties(),Kt(rr,bs).defaultSVGProperties),!0,!1)}static _drawMove(et){var dt;if(vn(rr,oy,-1),!Kt(rr,bs))return;const{offsetX:ot,offsetY:ct,pointerId:ut}=et;if(Kt(rr,xm)===ut){if(((dt=Kt(rr,Em))==null?void 0:dt.size)>=1){this._endDraw(et);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Kt(rr,bs).add(ot,ct)),vn(rr,oy,et.timeStamp),stopEvent(et)}}static _cleanup(et){et&&(this._currentDrawId=-1,this._currentParent=null,vn(rr,bs,null),vn(rr,sy,null),vn(rr,bm,null),vn(rr,oy,NaN)),Kt(rr,iy)&&(Kt(rr,iy).abort(),vn(rr,iy,null),vn(rr,xm,NaN),vn(rr,Em,null))}static _endDraw(et){const ot=this._currentParent;if(ot){if(ot.toggleDrawing(!0),this._cleanup(!1),(et==null?void 0:et.target)===ot.div&&ot.drawLayer.updateProperties(this._currentDrawId,Kt(rr,bs).end(et.offsetX,et.offsetY)),this.supportMultipleDrawings){const ct=Kt(rr,bs),ut=this._currentDrawId,dt=ct.getLastElement();ot.addCommands({cmd:()=>{ot.drawLayer.updateProperties(ut,ct.setLastElement(dt))},undo:()=>{ot.drawLayer.updateProperties(ut,ct.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(et){const ot=this._currentParent;if(!ot)return null;if(ot.toggleDrawing(!0),ot.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!Kt(rr,bs).isEmpty()){const{pageDimensions:[ct,ut],scale:dt}=ot,ft=ot.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Kt(rr,bs).getOutlines(ct*dt,ut*dt,dt,this._INNER_MARGIN),drawingOptions:Kt(rr,sy),mustBeCommitted:!et});return this._cleanup(!0),ft}return ot.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(et){}static deserializeDraw(et,ot,ct,ut,dt,ft){unreachable("Not implemented")}static async deserialize(et,ot,ct){var Rt,jt;const{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}=ot.viewport,kt=this.deserializeDraw(ft,St,ut,dt,this._INNER_MARGIN,et),Tt=await super.deserialize(et,ot,ct);return Tt.createDrawingOptions(et),_n(Rt=Tt,HS,RC).call(Rt,{drawOutlines:kt}),_n(jt=Tt,ay,_x).call(jt),Tt.onScaleChanging(),Tt.rotate(),Tt}serializeDraw(et){const[ot,ct]=this.pageTranslation,[ut,dt]=this.pageDimensions;return Kt(this,Fo).serialize([ot,ct,ut,dt],et)}renderAnnotationElement(et){return et.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Fo=new WeakMap,Av=new WeakMap,bs=new WeakMap,iy=new WeakMap,sy=new WeakMap,xm=new WeakMap,bm=new WeakMap,Em=new WeakMap,oy=new WeakMap,HS=new WeakSet,RC=function({drawOutlines:et,drawId:ot,drawingOptions:ct}){vn(this,Fo,et),this._drawingOptions||(this._drawingOptions=ct),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),ot>=0?(this._drawId=ot,this.parent.drawLayer.finalizeDraw(ot,et.defaultProperties)):this._drawId=_n(this,US,PC).call(this,et,this.parent),_n(this,ly,Ax).call(this,et.box)},US=new WeakSet,PC=function(et,ot){const{id:ct}=ot.drawLayer.draw(rr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),et.defaultSVGProperties),!1,!1);return ct},GS=new WeakSet,NC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ay=new WeakSet,_x=function(et=this.parent){if(!(this._drawId!==null&&this.parent===et)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,et.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=_n(this,US,PC).call(this,Kt(this,Fo),et)}},a_=new WeakSet,o4=function([et,ot,ct,ut]){const{parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[ot,1-et,ct*(ft/dt),ut*(dt/ft)];case 180:return[1-et,1-ot,ct,ut];case 270:return[1-ot,et,ct*(ft/dt),ut*(dt/ft)];default:return[et,ot,ct,ut]}},Cv=new WeakSet,kw=function(){const{x:et,y:ot,width:ct,height:ut,parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[1-ot,et,ct*(dt/ft),ut*(ft/dt)];case 180:return[1-et,1-ot,ct,ut];case 270:return[ot,1-et,ct*(dt/ft),ut*(ft/dt)];default:return[et,ot,ct,ut]}},ly=new WeakSet,Ax=function(et){[this.x,this.y,this.width,this.height]=_n(this,a_,o4).call(this,et),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Sm=new WeakSet,Vy=function(){const{x:et,y:ot,width:ct,height:ut,rotation:dt,parentRotation:ft,parentDimensions:[St,kt]}=this;switch((dt*4+ft)/90){case 1:return[1-ot-ut,et,ut,ct];case 2:return[1-et-ct,1-ot-ut,ct,ut];case 3:return[ot,1-et-ct,ut,ct];case 4:return[et,ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 5:return[1-ot,et,ct*(St/kt),ut*(kt/St)];case 6:return[1-et-ut*(kt/St),1-ot,ut*(kt/St),ct*(St/kt)];case 7:return[ot-ct*(St/kt),1-et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 8:return[et-ct,ot-ut,ct,ut];case 9:return[1-ot,et-ct,ut,ct];case 10:return[1-et,1-ot,ct,ut];case 11:return[ot-ut,1-et,ut,ct];case 12:return[et-ut*(kt/St),ot,ut*(kt/St),ct*(St/kt)];case 13:return[1-ot-ct*(St/kt),et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 14:return[1-et,1-ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 15:return[ot,1-et,ct*(St/kt),ut*(kt/St)];default:return[et,ot,ct,ut]}},qn(rr,"_currentDrawId",-1),qn(rr,"_currentParent",null),yn(rr,bs,null),yn(rr,iy,null),yn(rr,sy,null),yn(rr,xm,NaN),yn(rr,bm,null),yn(rr,Em,null),yn(rr,oy,NaN),qn(rr,"_INNER_MARGIN",3);let DrawingEditor=rr;var Eu,Es,Ss,cy,Rv,Ys,Os,yl,uy,hy,dy,Pv,Tw;class InkDrawOutliner{constructor(g,et,ot,ct,ut,dt){yn(this,Pv);yn(this,Eu,new Float64Array(6));yn(this,Es,void 0);yn(this,Ss,void 0);yn(this,cy,void 0);yn(this,Rv,void 0);yn(this,Ys,void 0);yn(this,Os,"");yn(this,yl,0);yn(this,uy,new InkDrawOutline);yn(this,hy,void 0);yn(this,dy,void 0);vn(this,hy,ot),vn(this,dy,ct),vn(this,cy,ut),vn(this,Rv,dt),[g,et]=_n(this,Pv,Tw).call(this,g,et);const ft=vn(this,Es,[NaN,NaN,NaN,NaN,g,et]);vn(this,Ys,[g,et]),vn(this,Ss,[{line:ft,points:Kt(this,Ys)}]),Kt(this,Eu).set(ft,0)}updateProperty(g,et){g==="stroke-width"&&vn(this,Rv,et)}isEmpty(){return!Kt(this,Ss)||Kt(this,Ss).length===0}isCancellable(){return Kt(this,Ys).length<=10}add(g,et){[g,et]=_n(this,Pv,Tw).call(this,g,et);const[ot,ct,ut,dt]=Kt(this,Eu).subarray(2,6),ft=g-ut,St=et-dt;return Math.hypot(Kt(this,hy)*ft,Kt(this,dy)*St)<=2?null:(Kt(this,Ys).push(g,et),isNaN(ot)?(Kt(this,Eu).set([ut,dt,g,et],2),Kt(this,Es).push(NaN,NaN,NaN,NaN,g,et),{path:{d:this.toSVGPath()}}):(isNaN(Kt(this,Eu)[0])&&Kt(this,Es).splice(6,6),Kt(this,Eu).set([ot,ct,ut,dt,g,et],0),Kt(this,Es).push(...Outline.createBezierPoints(ot,ct,ut,dt,g,et)),{path:{d:this.toSVGPath()}}))}end(g,et){const ot=this.add(g,et);return ot||(Kt(this,Ys).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(g,et,ot,ct,ut){vn(this,hy,ot),vn(this,dy,ct),vn(this,cy,ut),[g,et]=_n(this,Pv,Tw).call(this,g,et);const dt=vn(this,Es,[NaN,NaN,NaN,NaN,g,et]);vn(this,Ys,[g,et]);const ft=Kt(this,Ss).at(-1);return ft&&(ft.line=new Float32Array(ft.line),ft.points=new Float32Array(ft.points)),Kt(this,Ss).push({line:dt,points:Kt(this,Ys)}),Kt(this,Eu).set(dt,0),vn(this,yl,0),this.toSVGPath(),null}getLastElement(){return Kt(this,Ss).at(-1)}setLastElement(g){return Kt(this,Ss)?(Kt(this,Ss).push(g),vn(this,Es,g.line),vn(this,Ys,g.points),vn(this,yl,0),{path:{d:this.toSVGPath()}}):Kt(this,uy).setLastElement(g)}removeLastElement(){if(!Kt(this,Ss))return Kt(this,uy).removeLastElement();Kt(this,Ss).pop(),vn(this,Os,"");for(let g=0,et=Kt(this,Ss).length;g<et;g++){const{line:ot,points:ct}=Kt(this,Ss)[g];vn(this,Es,ot),vn(this,Ys,ct),vn(this,yl,0),this.toSVGPath()}return{path:{d:Kt(this,Os)}}}toSVGPath(){const g=Outline.svgRound(Kt(this,Es)[4]),et=Outline.svgRound(Kt(this,Es)[5]);if(Kt(this,Ys).length===2)return vn(this,Os,`${Kt(this,Os)} M ${g} ${et} Z`),Kt(this,Os);if(Kt(this,Ys).length<=6){const ct=Kt(this,Os).lastIndexOf("M");vn(this,Os,`${Kt(this,Os).slice(0,ct)} M ${g} ${et}`),vn(this,yl,6)}if(Kt(this,Ys).length===4){const ct=Outline.svgRound(Kt(this,Es)[10]),ut=Outline.svgRound(Kt(this,Es)[11]);return vn(this,Os,`${Kt(this,Os)} L ${ct} ${ut}`),vn(this,yl,12),Kt(this,Os)}const ot=[];Kt(this,yl)===0&&(ot.push(`M ${g} ${et}`),vn(this,yl,6));for(let ct=Kt(this,yl),ut=Kt(this,Es).length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,Rt]=Kt(this,Es).slice(ct,ct+6).map(Outline.svgRound);ot.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}return vn(this,Os,Kt(this,Os)+ot.join(" ")),vn(this,yl,Kt(this,Es).length),Kt(this,Os)}getOutlines(g,et,ot,ct){const ut=Kt(this,Ss).at(-1);return ut.line=new Float32Array(ut.line),ut.points=new Float32Array(ut.points),Kt(this,uy).build(Kt(this,Ss),g,et,ot,Kt(this,cy),Kt(this,Rv),ct),vn(this,Eu,null),vn(this,Es,null),vn(this,Ss,null),vn(this,Os,null),Kt(this,uy)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Eu=new WeakMap,Es=new WeakMap,Ss=new WeakMap,cy=new WeakMap,Rv=new WeakMap,Ys=new WeakMap,Os=new WeakMap,yl=new WeakMap,uy=new WeakMap,hy=new WeakMap,dy=new WeakMap,Pv=new WeakSet,Tw=function(g,et){return Outline._normalizePoint(g,et,Kt(this,hy),Kt(this,dy),Kt(this,cy))};var Xs,qS,KS,$o,Su,wu,Nv,Mv,fy,zl,Iu,l_,a4,c_,l4,u_,c4;class InkDrawOutline extends Outline{constructor(){super(...arguments);yn(this,zl);yn(this,l_);yn(this,c_);yn(this,u_);yn(this,Xs,void 0);yn(this,qS,0);yn(this,KS,void 0);yn(this,$o,void 0);yn(this,Su,void 0);yn(this,wu,void 0);yn(this,Nv,void 0);yn(this,Mv,void 0);yn(this,fy,void 0)}build(et,ot,ct,ut,dt,ft,St){vn(this,Su,ot),vn(this,wu,ct),vn(this,Nv,ut),vn(this,Mv,dt),vn(this,fy,ft),vn(this,KS,St??0),vn(this,$o,et),_n(this,c_,l4).call(this)}get thickness(){return Kt(this,fy)}setLastElement(et){return Kt(this,$o).push(et),{path:{d:this.toSVGPath()}}}removeLastElement(){return Kt(this,$o).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const et=[];for(const{line:ot}of Kt(this,$o)){if(et.push(`M${Outline.svgRound(ot[4])} ${Outline.svgRound(ot[5])}`),ot.length===6){et.push("Z");continue}if(ot.length===12&&isNaN(ot[6])){et.push(`L${Outline.svgRound(ot[10])} ${Outline.svgRound(ot[11])}`);continue}for(let ct=6,ut=ot.length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,Rt]=ot.subarray(ct,ct+6).map(Outline.svgRound);et.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}}return et.join("")}serialize([et,ot,ct,ut],dt){const ft=[],St=[],[kt,Tt,Rt,jt]=_n(this,l_,a4).call(this);let Ft,$t,zt,Ut,Bt,Ht,Jt,Zt,tn;switch(Kt(this,Mv)){case 0:tn=Outline._rescale,Ft=et,$t=ot+ut,zt=ct,Ut=-ut,Bt=et+kt*ct,Ht=ot+(1-Tt-jt)*ut,Jt=et+(kt+Rt)*ct,Zt=ot+(1-Tt)*ut;break;case 90:tn=Outline._rescaleAndSwap,Ft=et,$t=ot,zt=ct,Ut=ut,Bt=et+Tt*ct,Ht=ot+kt*ut,Jt=et+(Tt+jt)*ct,Zt=ot+(kt+Rt)*ut;break;case 180:tn=Outline._rescale,Ft=et+ct,$t=ot,zt=-ct,Ut=ut,Bt=et+(1-kt-Rt)*ct,Ht=ot+Tt*ut,Jt=et+(1-kt)*ct,Zt=ot+(Tt+jt)*ut;break;case 270:tn=Outline._rescaleAndSwap,Ft=et+ct,$t=ot+ut,zt=-ct,Ut=-ut,Bt=et+(1-Tt-jt)*ct,Ht=ot+(1-kt-Rt)*ut,Jt=et+(1-Tt)*ct,Zt=ot+(1-kt)*ut;break}for(const{line:nn,points:rn}of Kt(this,$o))ft.push(tn(nn,Ft,$t,zt,Ut,dt?new Array(nn.length):null)),St.push(tn(rn,Ft,$t,zt,Ut,dt?new Array(rn.length):null));return{lines:ft,points:St,rect:[Bt,Ht,Jt,Zt]}}static deserialize(et,ot,ct,ut,dt,{paths:{lines:ft,points:St},rotation:kt,thickness:Tt}){const Rt=[];let jt,Ft,$t,zt,Ut;switch(kt){case 0:Ut=Outline._rescale,jt=-et/ct,Ft=ot/ut+1,$t=1/ct,zt=-1/ut;break;case 90:Ut=Outline._rescaleAndSwap,jt=-ot/ut,Ft=-et/ct,$t=1/ut,zt=1/ct;break;case 180:Ut=Outline._rescale,jt=et/ct+1,Ft=-ot/ut,$t=-1/ct,zt=1/ut;break;case 270:Ut=Outline._rescaleAndSwap,jt=ot/ut+1,Ft=et/ct+1,$t=-1/ut,zt=-1/ct;break}if(!ft){ft=[];for(const Ht of St){const Jt=Ht.length;if(Jt===2){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ht[0],Ht[1]]));continue}if(Jt===4){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ht[0],Ht[1],NaN,NaN,NaN,NaN,Ht[2],Ht[3]]));continue}const Zt=new Float32Array(3*(Jt-2));ft.push(Zt);let[tn,nn,rn,on]=Ht.subarray(0,4);Zt.set([NaN,NaN,NaN,NaN,tn,nn],0);for(let pn=4;pn<Jt;pn+=2){const dn=Ht[pn],hn=Ht[pn+1];Zt.set(Outline.createBezierPoints(tn,nn,rn,on,dn,hn),(pn-2)*3),[tn,nn,rn,on]=[rn,on,dn,hn]}}}for(let Ht=0,Jt=ft.length;Ht<Jt;Ht++)Rt.push({line:Ut(ft[Ht].map(Zt=>Zt??NaN),jt,Ft,$t,zt),points:Ut(St[Ht].map(Zt=>Zt??NaN),jt,Ft,$t,zt)});const Bt=new this.prototype.constructor;return Bt.build(Rt,ct,ut,1,kt,Tt,dt),Bt}get box(){return Kt(this,Xs)}updateProperty(et,ot){return et==="stroke-width"?_n(this,u_,c4).call(this,ot):null}updateParentDimensions([et,ot],ct){const[ut,dt]=_n(this,zl,Iu).call(this);vn(this,Su,et),vn(this,wu,ot),vn(this,Nv,ct);const[ft,St]=_n(this,zl,Iu).call(this),kt=ft-ut,Tt=St-dt,Rt=Kt(this,Xs);return Rt[0]-=kt,Rt[1]-=Tt,Rt[2]+=2*kt,Rt[3]+=2*Tt,Rt}updateRotation(et){return vn(this,qS,et),{path:{transform:this.rotationTransform}}}get viewBox(){return Kt(this,Xs).map(Outline.svgRound).join(" ")}get defaultProperties(){const[et,ot]=Kt(this,Xs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get rotationTransform(){const[,,et,ot]=Kt(this,Xs);let ct=0,ut=0,dt=0,ft=0,St=0,kt=0;switch(Kt(this,qS)){case 90:ut=ot/et,dt=-et/ot,St=et;break;case 180:ct=-1,ft=-1,St=et,kt=ot;break;case 270:ut=-ot/et,dt=et/ot,kt=ot;break;default:return""}return`matrix(${ct} ${ut} ${dt} ${ft} ${Outline.svgRound(St)} ${Outline.svgRound(kt)})`}getPathResizingSVGProperties([et,ot,ct,ut]){const[dt,ft]=_n(this,zl,Iu).call(this),[St,kt,Tt,Rt]=Kt(this,Xs);if(Math.abs(Tt-dt)<=Outline.PRECISION||Math.abs(Rt-ft)<=Outline.PRECISION){const Ut=et+ct/2-(St+Tt/2),Bt=ot+ut/2-(kt+Rt/2);return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:`${this.rotationTransform} translate(${Ut} ${Bt})`}}}const jt=(ct-2*dt)/(Tt-2*dt),Ft=(ut-2*ft)/(Rt-2*ft),$t=Tt/ct,zt=Rt/ut;return{path:{"transform-origin":`${Outline.svgRound(St)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} scale(${$t} ${zt}) translate(${Outline.svgRound(dt)} ${Outline.svgRound(ft)}) scale(${jt} ${Ft}) translate(${Outline.svgRound(-dt)} ${Outline.svgRound(-ft)})`}}}getPathResizedSVGProperties([et,ot,ct,ut]){const[dt,ft]=_n(this,zl,Iu).call(this),St=Kt(this,Xs),[kt,Tt,Rt,jt]=St;if(St[0]=et,St[1]=ot,St[2]=ct,St[3]=ut,Math.abs(Rt-dt)<=Outline.PRECISION||Math.abs(jt-ft)<=Outline.PRECISION){const Bt=et+ct/2-(kt+Rt/2),Ht=ot+ut/2-(Tt+jt/2);for(const{line:Jt,points:Zt}of Kt(this,$o))Outline._translate(Jt,Bt,Ht,Jt),Outline._translate(Zt,Bt,Ht,Zt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const Ft=(ct-2*dt)/(Rt-2*dt),$t=(ut-2*ft)/(jt-2*ft),zt=-Ft*(kt+dt)+et+dt,Ut=-$t*(Tt+ft)+ot+ft;if(Ft!==1||$t!==1||zt!==0||Ut!==0)for(const{line:Bt,points:Ht}of Kt(this,$o))Outline._rescale(Bt,zt,Ut,Ft,$t,Bt),Outline._rescale(Ht,zt,Ut,Ft,$t,Ht);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([et,ot],ct){const[ut,dt]=ct,ft=Kt(this,Xs),St=et-ft[0],kt=ot-ft[1];if(Kt(this,Su)===ut&&Kt(this,wu)===dt)for(const{line:Tt,points:Rt}of Kt(this,$o))Outline._translate(Tt,St,kt,Tt),Outline._translate(Rt,St,kt,Rt);else{const Tt=Kt(this,Su)/ut,Rt=Kt(this,wu)/dt;vn(this,Su,ut),vn(this,wu,dt);for(const{line:jt,points:Ft}of Kt(this,$o))Outline._rescale(jt,St,kt,Tt,Rt,jt),Outline._rescale(Ft,St,kt,Tt,Rt,Ft);ft[2]*=Tt,ft[3]*=Rt}return ft[0]=et,ft[1]=ot,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get defaultSVGProperties(){const et=Kt(this,Xs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et[0])} ${Outline.svgRound(et[1])}`,transform:this.rotationTransform||null},bbox:et}}}Xs=new WeakMap,qS=new WeakMap,KS=new WeakMap,$o=new WeakMap,Su=new WeakMap,wu=new WeakMap,Nv=new WeakMap,Mv=new WeakMap,fy=new WeakMap,zl=new WeakSet,Iu=function(et=Kt(this,fy)){const ot=Kt(this,KS)+et/2*Kt(this,Nv);return Kt(this,Mv)%180===0?[ot/Kt(this,Su),ot/Kt(this,wu)]:[ot/Kt(this,wu),ot/Kt(this,Su)]},l_=new WeakSet,a4=function(){const[et,ot,ct,ut]=Kt(this,Xs),[dt,ft]=_n(this,zl,Iu).call(this,0);return[et+dt,ot+ft,ct-2*dt,ut-2*ft]},c_=new WeakSet,l4=function(){const et=vn(this,Xs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ut}of Kt(this,$o)){if(ut.length<=12){for(let St=4,kt=ut.length;St<kt;St+=6)Util$1.pointBoundingBox(ut[St],ut[St+1],et);continue}let dt=ut[4],ft=ut[5];for(let St=6,kt=ut.length;St<kt;St+=6){const[Tt,Rt,jt,Ft,$t,zt]=ut.subarray(St,St+6);Util$1.bezierBoundingBox(dt,ft,Tt,Rt,jt,Ft,$t,zt,et),dt=$t,ft=zt}}const[ot,ct]=_n(this,zl,Iu).call(this);et[0]=MathClamp(et[0]-ot,0,1),et[1]=MathClamp(et[1]-ct,0,1),et[2]=MathClamp(et[2]+ot,0,1),et[3]=MathClamp(et[3]+ct,0,1),et[2]-=et[0],et[3]-=et[1]},u_=new WeakSet,c4=function(et){const[ot,ct]=_n(this,zl,Iu).call(this);vn(this,fy,et);const[ut,dt]=_n(this,zl,Iu).call(this),[ft,St]=[ut-ot,dt-ct],kt=Kt(this,Xs);return kt[0]-=ft,kt[1]-=St,kt[2]+=2*ft,kt[3]+=2*St,kt};class InkDrawingOptions extends DrawingOptions{constructor(g){super(),this._viewParameters=g,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(g,et){g==="stroke-width"&&(et??(et=this["stroke-width"]),et*=this._viewParameters.realScale),super.updateSVGProperty(g,et)}clone(){const g=new InkDrawingOptions(this._viewParameters);return g.updateAll(this),g}}var h_,u4;const Gy=class Gy extends DrawingEditor{constructor(et){super({...et,name:"inkEditor"});yn(this,h_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new InkDrawingOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(et,ot,ct,ut,dt){return new InkDrawOutliner(et,ot,ct,ut,dt,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(et,ot,ct,ut,dt,ft){return InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){let ut=null;if(et instanceof InkAnnotationElement){const{data:{inkLists:ft,rect:St,rotation:kt,id:Tt,color:Rt,opacity:jt,borderStyle:{rawWidth:Ft},popupRef:$t,richText:zt,contentsObj:Ut,creationDate:Bt,modificationDate:Ht},parent:{page:{pageNumber:Jt}}}=et;ut=et={annotationType:AnnotationEditorType.INK,color:Array.from(Rt),thickness:Ft,opacity:jt,paths:{points:ft},boxes:null,pageIndex:Jt-1,rect:St.slice(0),rotation:kt,annotationElementId:Tt,id:Tt,deleted:!1,popupRef:$t,richText:zt,comment:(Ut==null?void 0:Ut.str)||null,creationDate:Bt,modificationDate:Ht}}const dt=await super.deserialize(et,ot,ct);return dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:et,_drawingOptions:ot,parent:ct}=this;ot.updateSVGProperty("stroke-width"),ct.drawLayer.updateProperties(et,ot.toSVGProperties())}static onScaleChangingWhenDrawing(){const et=this._currentParent;et&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),et.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:et,thickness:ot,opacity:ct}){this._drawingOptions=Gy.getDefaultDrawingOptions({stroke:Util$1.makeHexColor(...et),"stroke-width":ot,"stroke-opacity":ct})}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{stroke:ut,"stroke-opacity":dt,"stroke-width":ft}}=this,St=Object.assign(super.serialize(et),{color:AnnotationEditor._colorManager.convert(ut),opacity:dt,thickness:ft,paths:{lines:ot,points:ct}});return this.addComment(St),et?(St.isCopy=!0,St):this.annotationElementId&&!_n(this,h_,u4).call(this,St)?null:(St.id=this.annotationElementId,St)}renderAnnotationElement(et){if(this.deleted)return et.hide(),null;const{points:ot,rect:ct}=this.serializeDraw(!1);return et.updateEdited({rect:ct,thickness:this._drawingOptions["stroke-width"],points:ot,popup:this.comment}),null}};h_=new WeakSet,u4=function(et){const{color:ot,thickness:ct,opacity:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||et.color.some((ft,St)=>ft!==ot[St])||et.thickness!==ct||et.opacity!==ut||et.pageIndex!==dt},qn(Gy,"_type","ink"),qn(Gy,"_editorType",AnnotationEditorType.INK),qn(Gy,"_defaultDrawingOptions",null);let InkEditor=Gy;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let g=super.toSVGPath();return g.endsWith("Z")||(g+="Z"),g}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var py,YS,MC,Hl,d_,h4,f_,d4,XS,OC,Ov,_w,p_,f4,m_,p4,g_,m4,JS,IC,QS,DC,y_,g4;class SignatureExtractor{static extractContoursFromText(g,{fontFamily:et,fontStyle:ot,fontWeight:ct},ut,dt,ft,St){let kt=new OffscreenCanvas(1,1),Tt=kt.getContext("2d",{alpha:!1});const Rt=200,jt=Tt.font=`${ot} ${ct} ${Rt}px ${et}`,{actualBoundingBoxLeft:Ft,actualBoundingBoxRight:$t,actualBoundingBoxAscent:zt,actualBoundingBoxDescent:Ut,fontBoundingBoxAscent:Bt,fontBoundingBoxDescent:Ht,width:Jt}=Tt.measureText(g),Zt=1.5,tn=Math.ceil(Math.max(Math.abs(Ft)+Math.abs($t)||0,Jt)*Zt),nn=Math.ceil(Math.max(Math.abs(zt)+Math.abs(Ut)||Rt,Math.abs(Bt)+Math.abs(Ht)||Rt)*Zt);kt=new OffscreenCanvas(tn,nn),Tt=kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Tt.font=jt,Tt.filter="grayscale(1)",Tt.fillStyle="white",Tt.fillRect(0,0,tn,nn),Tt.fillStyle="black",Tt.fillText(g,tn*(Zt-1)/2,nn*(3-Zt)/2);const rn=_n(this,JS,IC).call(this,Tt.getImageData(0,0,tn,nn).data),on=_n(this,g_,m4).call(this,rn),pn=_n(this,QS,DC).call(this,on),dn=_n(this,XS,OC).call(this,rn,tn,nn,pn);return this.processDrawnLines({lines:{curves:dn,width:tn,height:nn},pageWidth:ut,pageHeight:dt,rotation:ft,innerMargin:St,mustSmooth:!0,areContours:!0})}static process(g,et,ot,ct,ut){const[dt,ft,St]=_n(this,y_,g4).call(this,g),[kt,Tt]=_n(this,m_,p4).call(this,dt,ft,St,Math.hypot(ft,St)*Kt(this,py).sigmaSFactor,Kt(this,py).sigmaR,Kt(this,py).kernelSize),Rt=_n(this,QS,DC).call(this,Tt),jt=_n(this,XS,OC).call(this,kt,ft,St,Rt);return this.processDrawnLines({lines:{curves:jt,width:ft,height:St},pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:g,pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:dt,areContours:ft}){ct%180!==0&&([et,ot]=[ot,et]);const{curves:St,width:kt,height:Tt}=g,Rt=g.thickness??0,jt=[],Ft=Math.min(et/kt,ot/Tt),$t=Ft/et,zt=Ft/ot,Ut=[];for(const{points:Ht}of St){const Jt=dt?_n(this,p_,f4).call(this,Ht):Ht;if(!Jt)continue;Ut.push(Jt);const Zt=Jt.length,tn=new Float32Array(Zt),nn=new Float32Array(3*(Zt===2?2:Zt-2));if(jt.push({line:nn,points:tn}),Zt===2){tn[0]=Jt[0]*$t,tn[1]=Jt[1]*zt,nn.set([NaN,NaN,NaN,NaN,tn[0],tn[1]],0);continue}let[rn,on,pn,dn]=Jt;rn*=$t,on*=zt,pn*=$t,dn*=zt,tn.set([rn,on,pn,dn],0),nn.set([NaN,NaN,NaN,NaN,rn,on],0);for(let hn=4;hn<Zt;hn+=2){const un=tn[hn]=Jt[hn]*$t,En=tn[hn+1]=Jt[hn+1]*zt;nn.set(Outline.createBezierPoints(rn,on,pn,dn,un,En),(hn-2)*3),[rn,on,pn,dn]=[pn,dn,un,En]}}if(jt.length===0)return null;const Bt=ft?new ContourDrawOutline:new InkDrawOutline;return Bt.build(jt,et,ot,1,ct,ft?0:Rt,ut),{outline:Bt,newCurves:Ut,areContours:ft,thickness:Rt,width:kt,height:Tt}}static async compressSignature({outlines:g,areContours:et,thickness:ot,width:ct,height:ut}){let dt=1/0,ft=-1/0,St=0;for(const Jt of g){St+=Jt.length;for(let Zt=2,tn=Jt.length;Zt<tn;Zt++){const nn=Jt[Zt]-Jt[Zt-2];dt=Math.min(dt,nn),ft=Math.max(ft,nn)}}let kt;dt>=-128&&ft<=127?kt=Int8Array:dt>=-32768&&ft<=32767?kt=Int16Array:kt=Int32Array;const Tt=g.length,Rt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Tt,jt=new Uint32Array(Rt);let Ft=0;jt[Ft++]=Rt*Uint32Array.BYTES_PER_ELEMENT+(St-2*Tt)*kt.BYTES_PER_ELEMENT,jt[Ft++]=0,jt[Ft++]=ct,jt[Ft++]=ut,jt[Ft++]=et?0:1,jt[Ft++]=Math.max(0,Math.floor(ot??0)),jt[Ft++]=Tt,jt[Ft++]=kt.BYTES_PER_ELEMENT;for(const Jt of g)jt[Ft++]=Jt.length-2,jt[Ft++]=Jt[0],jt[Ft++]=Jt[1];const $t=new CompressionStream("deflate-raw"),zt=$t.writable.getWriter();await zt.ready,zt.write(jt);const Ut=kt.prototype.constructor;for(const Jt of g){const Zt=new Ut(Jt.length-2);for(let tn=2,nn=Jt.length;tn<nn;tn++)Zt[tn-2]=Jt[tn]-Jt[tn-2];zt.write(Zt)}zt.close();const Bt=await new Response($t.readable).arrayBuffer(),Ht=new Uint8Array(Bt);return toBase64Util(Ht)}static async decompressSignature(g){try{const et=fromBase64Util(g),{readable:ot,writable:ct}=new DecompressionStream("deflate-raw"),ut=ct.getWriter();await ut.ready,ut.write(et).then(async()=>{await ut.ready,await ut.close()}).catch(()=>{});let dt=null,ft=0;for await(const Jt of ot)dt||(dt=new Uint8Array(new Uint32Array(Jt.buffer,0,4)[0])),dt.set(Jt,ft),ft+=Jt.length;const St=new Uint32Array(dt.buffer,0,dt.length>>2),kt=St[1];if(kt!==0)throw new Error(`Invalid version: ${kt}`);const Tt=St[2],Rt=St[3],jt=St[4]===0,Ft=St[5],$t=St[6],zt=St[7],Ut=[],Bt=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*$t)*Uint32Array.BYTES_PER_ELEMENT;let Ht;switch(zt){case Int8Array.BYTES_PER_ELEMENT:Ht=new Int8Array(dt.buffer,Bt);break;case Int16Array.BYTES_PER_ELEMENT:Ht=new Int16Array(dt.buffer,Bt);break;case Int32Array.BYTES_PER_ELEMENT:Ht=new Int32Array(dt.buffer,Bt);break}ft=0;for(let Jt=0;Jt<$t;Jt++){const Zt=St[POINTS_PROPERTIES_NUMBER*Jt+BASE_HEADER_LENGTH],tn=new Float32Array(Zt+2);Ut.push(tn);for(let nn=0;nn<POINTS_PROPERTIES_NUMBER-1;nn++)tn[nn]=St[POINTS_PROPERTIES_NUMBER*Jt+BASE_HEADER_LENGTH+nn+1];for(let nn=0;nn<Zt;nn++)tn[nn+2]=tn[nn]+Ht[ft++]}return{areContours:jt,thickness:Ft,outlines:Ut,width:Tt,height:Rt}}catch(et){return warn(`decompressSignature: ${et}`),null}}}py=new WeakMap,YS=new WeakSet,MC=function(g,et,ot,ct){return ot-=g,ct-=et,ot===0?ct>0?0:4:ot===1?ct+6:2-ct},Hl=new WeakMap,d_=new WeakSet,h4=function(g,et,ot,ct,ut,dt,ft){const St=_n(this,YS,MC).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(-kt+St-ft+16)%8,Rt=Kt(this,Hl)[2*Tt],jt=Kt(this,Hl)[2*Tt+1];if(g[(ot+Rt)*et+(ct+jt)]!==0)return Tt}return-1},f_=new WeakSet,d4=function(g,et,ot,ct,ut,dt,ft){const St=_n(this,YS,MC).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(kt+St+ft+16)%8,Rt=Kt(this,Hl)[2*Tt],jt=Kt(this,Hl)[2*Tt+1];if(g[(ot+Rt)*et+(ct+jt)]!==0)return Tt}return-1},XS=new WeakSet,OC=function(g,et,ot,ct){const ut=g.length,dt=new Int32Array(ut);for(let Tt=0;Tt<ut;Tt++)dt[Tt]=g[Tt]<=ct?1:0;for(let Tt=1;Tt<ot-1;Tt++)dt[Tt*et]=dt[Tt*et+et-1]=0;for(let Tt=0;Tt<et;Tt++)dt[Tt]=dt[et*ot-1-Tt]=0;let ft=1,St;const kt=[];for(let Tt=1;Tt<ot-1;Tt++){St=1;for(let Rt=1;Rt<et-1;Rt++){const jt=Tt*et+Rt,Ft=dt[jt];if(Ft===0)continue;let $t=Tt,zt=Rt;if(Ft===1&&dt[jt-1]===0)ft+=1,zt-=1;else if(Ft>=1&&dt[jt+1]===0)ft+=1,zt+=1,Ft>1&&(St=Ft);else{Ft!==1&&(St=Math.abs(Ft));continue}const Ut=[Rt,Tt],Bt=zt===Rt+1,Ht={isHole:Bt,points:Ut,id:ft,parent:0};kt.push(Ht);let Jt;for(const hn of kt)if(hn.id===St){Jt=hn;break}Jt?Jt.isHole?Ht.parent=Bt?Jt.parent:St:Ht.parent=Bt?St:Jt.parent:Ht.parent=Bt?St:0;const Zt=_n(this,d_,h4).call(this,dt,et,Tt,Rt,$t,zt,0);if(Zt===-1){dt[jt]=-ft,dt[jt]!==1&&(St=Math.abs(dt[jt]));continue}let tn=Kt(this,Hl)[2*Zt],nn=Kt(this,Hl)[2*Zt+1];const rn=Tt+tn,on=Rt+nn;$t=rn,zt=on;let pn=Tt,dn=Rt;for(;;){const hn=_n(this,f_,d4).call(this,dt,et,pn,dn,$t,zt,1);tn=Kt(this,Hl)[2*hn],nn=Kt(this,Hl)[2*hn+1];const un=pn+tn,En=dn+nn;Ut.push(En,un);const wn=pn*et+dn;if(dt[wn+1]===0?dt[wn]=-ft:dt[wn]===1&&(dt[wn]=ft),un===Tt&&En===Rt&&pn===rn&&dn===on){dt[jt]!==1&&(St=Math.abs(dt[jt]));break}else $t=pn,zt=dn,pn=un,dn=En}}}return kt},Ov=new WeakSet,_w=function(g,et,ot,ct){if(ot-et<=4){for(let rn=et;rn<ot-2;rn+=2)ct.push(g[rn],g[rn+1]);return}const ut=g[et],dt=g[et+1],ft=g[ot-4]-ut,St=g[ot-3]-dt,kt=Math.hypot(ft,St),Tt=ft/kt,Rt=St/kt,jt=Tt*dt-Rt*ut,Ft=St/ft,$t=1/kt,zt=Math.atan(Ft),Ut=Math.cos(zt),Bt=Math.sin(zt),Ht=$t*(Math.abs(Ut)+Math.abs(Bt)),Jt=$t*(1-Ht+Ht**2),Zt=Math.max(Math.atan(Math.abs(Bt+Ut)*Jt),Math.atan(Math.abs(Bt-Ut)*Jt));let tn=0,nn=et;for(let rn=et+2;rn<ot-2;rn+=2){const on=Math.abs(jt-Tt*g[rn+1]+Rt*g[rn]);on>tn&&(nn=rn,tn=on)}tn>(kt*Zt)**2?(_n(this,Ov,_w).call(this,g,et,nn+2,ct),_n(this,Ov,_w).call(this,g,nn,ot,ct)):ct.push(ut,dt)},p_=new WeakSet,f4=function(g){const et=[],ot=g.length;return _n(this,Ov,_w).call(this,g,0,ot,et),et.push(g[ot-2],g[ot-1]),et.length<=4?null:et},m_=new WeakSet,p4=function(g,et,ot,ct,ut,dt){const ft=new Float32Array(dt**2),St=-2*ct**2,kt=dt>>1;for(let zt=0;zt<dt;zt++){const Ut=(zt-kt)**2;for(let Bt=0;Bt<dt;Bt++)ft[zt*dt+Bt]=Math.exp((Ut+(Bt-kt)**2)/St)}const Tt=new Float32Array(256),Rt=-2*ut**2;for(let zt=0;zt<256;zt++)Tt[zt]=Math.exp(zt**2/Rt);const jt=g.length,Ft=new Uint8Array(jt),$t=new Uint32Array(256);for(let zt=0;zt<ot;zt++)for(let Ut=0;Ut<et;Ut++){const Bt=zt*et+Ut,Ht=g[Bt];let Jt=0,Zt=0;for(let nn=0;nn<dt;nn++){const rn=zt+nn-kt;if(!(rn<0||rn>=ot))for(let on=0;on<dt;on++){const pn=Ut+on-kt;if(pn<0||pn>=et)continue;const dn=g[rn*et+pn],hn=ft[nn*dt+on]*Tt[Math.abs(dn-Ht)];Jt+=dn*hn,Zt+=hn}}const tn=Ft[Bt]=Math.round(Jt/Zt);$t[tn]++}return[Ft,$t]},g_=new WeakSet,m4=function(g){const et=new Uint32Array(256);for(const ot of g)et[ot]++;return et},JS=new WeakSet,IC=function(g){const et=g.length,ot=new Uint8ClampedArray(et>>2);let ct=-1/0,ut=1/0;for(let ft=0,St=ot.length;ft<St;ft++){const kt=ot[ft]=g[ft<<2];ct=Math.max(ct,kt),ut=Math.min(ut,kt)}const dt=255/(ct-ut);for(let ft=0,St=ot.length;ft<St;ft++)ot[ft]=(ot[ft]-ut)*dt;return ot},QS=new WeakSet,DC=function(g){let et,ot=-1/0,ct=-1/0;const ut=g.findIndex(St=>St!==0);let dt=ut,ft=ut;for(et=ut;et<256;et++){const St=g[et];St>ot&&(et-dt>ct&&(ct=et-dt,ft=et-1),ot=St,dt=et)}for(et=ft-1;et>=0&&!(g[et]>g[et+1]);et--);return et},y_=new WeakSet,g4=function(g){const et=g,{width:ot,height:ct}=g,{maxDim:ut}=Kt(this,py);let dt=ot,ft=ct;if(ot>ut||ct>ut){let jt=ot,Ft=ct,$t=Math.log2(Math.max(ot,ct)/ut);const zt=Math.floor($t);$t=$t===zt?zt-1:zt;for(let Bt=0;Bt<$t;Bt++){dt=Math.ceil(jt/2),ft=Math.ceil(Ft/2);const Ht=new OffscreenCanvas(dt,ft);Ht.getContext("2d").drawImage(g,0,0,jt,Ft,0,0,dt,ft),jt=dt,Ft=ft,g!==et&&g.close(),g=Ht.transferToImageBitmap()}const Ut=Math.min(ut/dt,ut/ft);dt=Math.round(dt*Ut),ft=Math.round(ft*Ut)}const kt=new OffscreenCanvas(dt,ft).getContext("2d",{willReadFrequently:!0});kt.fillStyle="white",kt.fillRect(0,0,dt,ft),kt.filter="grayscale(1)",kt.drawImage(g,0,0,g.width,g.height,0,0,dt,ft);const Tt=kt.getImageData(0,0,dt,ft).data;return[_n(this,JS,IC).call(this,Tt),dt,ft]},yn(SignatureExtractor,YS),yn(SignatureExtractor,d_),yn(SignatureExtractor,f_),yn(SignatureExtractor,XS),yn(SignatureExtractor,Ov),yn(SignatureExtractor,p_),yn(SignatureExtractor,m_),yn(SignatureExtractor,g_),yn(SignatureExtractor,JS),yn(SignatureExtractor,QS),yn(SignatureExtractor,y_),yn(SignatureExtractor,py,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),yn(SignatureExtractor,Hl,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const g=new SignatureOptions;return g.updateAll(this),g}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(g){super(g),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const g=new DrawnSignatureOptions(this._viewParameters);return g.updateAll(this),g}}var wm,ku,km,my;const Eo=class Eo extends DrawingEditor{constructor(et){super({...et,mustBeCommitted:!0,name:"signatureEditor"});yn(this,wm,!1);yn(this,ku,null);yn(this,km,null);yn(this,my,null);this._willKeepAspectRatio=!0,vn(this,km,et.signatureData||null),vn(this,ku,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Kt(this,ku)}}static computeTelemetryFinalData(et){const ot=et.get("hasDescription");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let et,ot;const{_isCopy:ct}=this;if(ct&&(this._isCopy=!1,et=this.x,ot=this.y),super.render(),this._drawId===null)if(Kt(this,km)){const{lines:ut,mustSmooth:dt,areContours:ft,description:St,uuid:kt,heightInPage:Tt}=Kt(this,km),{rawDims:{pageWidth:Rt,pageHeight:jt},rotation:Ft}=this.parent.viewport,$t=SignatureExtractor.processDrawnLines({lines:ut,pageWidth:Rt,pageHeight:jt,rotation:Ft,innerMargin:Eo._INNER_MARGIN,mustSmooth:dt,areContours:ft});this.addSignature($t,Tt,St,kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Kt(this,ku)||""}));return ct&&(this._isCopy=!0,this._moveAfterPaste(et,ot)),this.div}setUuid(et){vn(this,my,et),this.addEditToolbar()}getUuid(){return Kt(this,my)}get description(){return Kt(this,ku)}set description(et){vn(this,ku,et),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:et})),super.addEditToolbar().then(ot=>{ot==null||ot.updateEditSignatureButton(et)}))}getSignaturePreview(){const{newCurves:et,areContours:ot,thickness:ct,width:ut,height:dt}=Kt(this,km),ft=Math.max(ut,dt),St=SignatureExtractor.processDrawnLines({lines:{curves:et.map(kt=>({points:kt})),thickness:ct,width:ut,height:dt},pageWidth:ft,pageHeight:ft,rotation:0,innerMargin:0,mustSmooth:!1,areContours:ot});return{areContours:ot,outline:St.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(et,ot,ct,ut){const{x:dt,y:ft}=this,{outline:St}=vn(this,km,et);vn(this,wm,St instanceof ContourDrawOutline),this.description=ct;let kt;Kt(this,wm)?kt=Eo.getDefaultDrawingOptions():(kt=Eo._defaultDrawnSignatureOptions.clone(),kt.updateProperties({"stroke-width":St.thickness})),this._addOutlines({drawOutlines:St,drawingOptions:kt});const[,Tt]=this.pageDimensions;let Rt=ot/Tt;Rt=Rt>=1?.5:Rt,this.width*=Rt/this.height,this.width>=1&&(Rt*=.9/this.width,this.width=.9),this.height=Rt,this.setDims(),this.x=dt,this.y=ft,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ut),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ut,hasDescription:!!ct}}),this.div.hidden=!1}getFromImage(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.process(et,ot,ct,ut,Eo._INNER_MARGIN)}getFromText(et,ot){const{rawDims:{pageWidth:ct,pageHeight:ut},rotation:dt}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(et,ot,ct,ut,dt,Eo._INNER_MARGIN)}getDrawnSignature(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:et,pageWidth:ot,pageHeight:ct,rotation:ut,innerMargin:Eo._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:et,thickness:ot}){et?this._drawingOptions=Eo.getDefaultDrawingOptions():(this._drawingOptions=Eo._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":ot}))}serialize(et=!1){if(this.isEmpty())return null;const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{"stroke-width":ut}}=this,dt=Object.assign(super.serialize(et),{isSignature:!0,areContours:Kt(this,wm),color:[0,0,0],thickness:Kt(this,wm)?0:ut});return this.addComment(dt),et?(dt.paths={lines:ot,points:ct},dt.uuid=Kt(this,my),dt.isCopy=!0):dt.lines=ot,Kt(this,ku)&&(dt.accessibilityData={type:"Figure",alt:Kt(this,ku)}),dt}static deserializeDraw(et,ot,ct,ut,dt,ft){return ft.areContours?ContourDrawOutline.deserialize(et,ot,ct,ut,dt,ft):InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){var dt;const ut=await super.deserialize(et,ot,ct);return vn(ut,wm,et.areContours),ut.description=((dt=et.accessibilityData)==null?void 0:dt.alt)||"",vn(ut,my,et.uuid),ut}};wm=new WeakMap,ku=new WeakMap,km=new WeakMap,my=new WeakMap,qn(Eo,"_type","signature"),qn(Eo,"_editorType",AnnotationEditorType.SIGNATURE),qn(Eo,"_defaultDrawingOptions",null);let SignatureEditor=Eo;var Wr,ws,Tm,pp,_m,Iv,mp,gy,Tu,Bo,Dv,yy,Cx,vy,Rx,Lv,Aw,jv,Cw,Fv,Rw,ZS,LC,$v,Pw,v_,y4;class StampEditor extends AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});yn(this,yy);yn(this,vy);yn(this,Lv);yn(this,jv);yn(this,Fv);yn(this,ZS);yn(this,$v);yn(this,v_);yn(this,Wr,null);yn(this,ws,null);yn(this,Tm,null);yn(this,pp,null);yn(this,_m,null);yn(this,Iv,"");yn(this,mp,null);yn(this,gy,!1);yn(this,Tu,null);yn(this,Bo,!1);yn(this,Dv,!1);vn(this,pp,et.bitmapUrl),vn(this,_m,et.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot)}static isHandlingMimeForPasting(et){return SupportedImageMimeTypes.includes(et)}static paste(et,ot){ot.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:et.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var et;return{type:"stamp",hasAltText:!!((et=this.altTextData)!=null&&et.altText)}}static computeTelemetryFinalData(et){const ot=et.get("hasAltText");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}async mlGuessAltText(et=null,ot=!0){if(this.hasAltTextData())return null;const{mlManager:ct}=this._uiManager;if(!ct)throw new Error("No ML.");if(!await ct.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ut,width:dt,height:ft}=et||this.copyCanvas(null,null,!0).imageData,St=await ct.guess({name:"altText",request:{data:ut,width:dt,height:ft,channels:ut.length/(dt*ft)}});if(!St)throw new Error("No response from the AI service.");if(St.error)throw new Error("Error from the AI service.");if(St.cancel)return null;if(!St.output)throw new Error("No valid response from the AI service.");const kt=St.output;return await this.setGuessedAltText(kt),ot&&!this.hasAltTextData()&&(this.altTextData={alt:kt,decorative:!1}),kt}remove(){var et;Kt(this,ws)&&(vn(this,Wr,null),this._uiManager.imageManager.deleteId(Kt(this,ws)),(et=Kt(this,mp))==null||et.remove(),vn(this,mp,null),Kt(this,Tu)&&(clearTimeout(Kt(this,Tu)),vn(this,Tu,null))),super.remove()}rebuild(){if(!this.parent){Kt(this,ws)&&_n(this,Lv,Aw).call(this);return}super.rebuild(),this.div!==null&&(Kt(this,ws)&&Kt(this,mp)===null&&_n(this,Lv,Aw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(et){this._isDraggable=!0,et&&this.div.focus()}isEmpty(){return!(Kt(this,Tm)||Kt(this,Wr)||Kt(this,pp)||Kt(this,_m)||Kt(this,ws)||Kt(this,gy))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let et,ot;return this._isCopy&&(et=this.x,ot=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Kt(this,gy)||(Kt(this,Wr)?_n(this,jv,Cw).call(this):_n(this,Lv,Aw).call(this)),this._isCopy&&this._moveAfterPaste(et,ot),this._uiManager.addShouldRescale(this),this.div}setCanvas(et,ot){const{id:ct,bitmap:ut}=this._uiManager.imageManager.getFromCanvas(et,ot);ot.remove(),ct&&this._uiManager.imageManager.isValidId(ct)&&(vn(this,ws,ct),ut&&vn(this,Wr,ut),vn(this,gy,!1),_n(this,jv,Cw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;Kt(this,Tu)!==null&&clearTimeout(Kt(this,Tu)),vn(this,Tu,setTimeout(()=>{vn(this,Tu,null),_n(this,ZS,LC).call(this)},200))}copyCanvas(et,ot,ct=!1){et||(et=224);const{width:ut,height:dt}=Kt(this,Wr),ft=new OutputScale;let St=Kt(this,Wr),kt=ut,Tt=dt,Rt=null;if(ot){if(ut>ot||dt>ot){const rn=Math.min(ot/ut,ot/dt);kt=Math.floor(ut*rn),Tt=Math.floor(dt*rn)}Rt=document.createElement("canvas");const Ft=Rt.width=Math.ceil(kt*ft.sx),$t=Rt.height=Math.ceil(Tt*ft.sy);Kt(this,Bo)||(St=_n(this,Fv,Rw).call(this,Ft,$t));const zt=Rt.getContext("2d");zt.filter=this._uiManager.hcmFilter;let Ut="white",Bt="#cfcfd8";this._uiManager.hcmFilter!=="none"?Bt="black":ColorScheme.isDarkMode&&(Ut="#8f8f9d",Bt="#42414d");const Ht=15,Jt=Ht*ft.sx,Zt=Ht*ft.sy,tn=new OffscreenCanvas(Jt*2,Zt*2),nn=tn.getContext("2d");nn.fillStyle=Ut,nn.fillRect(0,0,Jt*2,Zt*2),nn.fillStyle=Bt,nn.fillRect(0,0,Jt,Zt),nn.fillRect(Jt,Zt,Jt,Zt),zt.fillStyle=zt.createPattern(tn,"repeat"),zt.fillRect(0,0,Ft,$t),zt.drawImage(St,0,0,St.width,St.height,0,0,Ft,$t)}let jt=null;if(ct){let Ft,$t;if(ft.symmetric&&St.width<et&&St.height<et)Ft=St.width,$t=St.height;else if(St=Kt(this,Wr),ut>et||dt>et){const Bt=Math.min(et/ut,et/dt);Ft=Math.floor(ut*Bt),$t=Math.floor(dt*Bt),Kt(this,Bo)||(St=_n(this,Fv,Rw).call(this,Ft,$t))}const Ut=new OffscreenCanvas(Ft,$t).getContext("2d",{willReadFrequently:!0});Ut.drawImage(St,0,0,St.width,St.height,0,0,Ft,$t),jt={width:Ft,height:$t,data:Ut.getImageData(0,0,Ft,$t).data}}return{canvas:Rt,width:kt,height:Tt,imageData:jt}}static async deserialize(et,ot,ct){var Ut;let ut=null,dt=!1;if(et instanceof StampAnnotationElement){const{data:{rect:Bt,rotation:Ht,id:Jt,structParent:Zt,popupRef:tn,richText:nn,contentsObj:rn,creationDate:on,modificationDate:pn},container:dn,parent:{page:{pageNumber:hn}},canvas:un}=et;let En,wn;un?(delete et.canvas,{id:En,bitmap:wn}=ct.imageManager.getFromCanvas(dn.id,un),un.remove()):(dt=!0,et._hasNoCanvas=!0);const Sn=((Ut=await ot._structTree.getAriaAttributes(`${AnnotationPrefix}${Jt}`))==null?void 0:Ut.get("aria-label"))||"";ut=et={annotationType:AnnotationEditorType.STAMP,bitmapId:En,bitmap:wn,pageIndex:hn-1,rect:Bt.slice(0),rotation:Ht,annotationElementId:Jt,id:Jt,deleted:!1,accessibilityData:{decorative:!1,altText:Sn},isSvg:!1,structParent:Zt,popupRef:tn,richText:nn,comment:(rn==null?void 0:rn.str)||null,creationDate:on,modificationDate:pn}}const ft=await super.deserialize(et,ot,ct),{rect:St,bitmap:kt,bitmapUrl:Tt,bitmapId:Rt,isSvg:jt,accessibilityData:Ft}=et;dt?(ct.addMissingCanvas(et.id,ft),vn(ft,gy,!0)):Rt&&ct.imageManager.isValidId(Rt)?(vn(ft,ws,Rt),kt&&vn(ft,Wr,kt)):vn(ft,pp,Tt),vn(ft,Bo,jt);const[$t,zt]=ft.pageDimensions;return ft.width=(St[2]-St[0])/$t,ft.height=(St[3]-St[1])/zt,Ft&&(ft.altTextData=Ft),ft._initialData=ut,et.comment&&ft.setCommentData(et),vn(ft,Dv,!!ut),ft}serialize(et=!1,ot=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ct=Object.assign(super.serialize(et),{bitmapId:Kt(this,ws),isSvg:Kt(this,Bo)});if(this.addComment(ct),et)return ct.bitmapUrl=_n(this,$v,Pw).call(this,!0),ct.accessibilityData=this.serializeAltText(!0),ct.isCopy=!0,ct;const{decorative:ut,altText:dt}=this.serializeAltText(!1);if(!ut&&dt&&(ct.accessibilityData={type:"Figure",alt:dt}),this.annotationElementId){const St=_n(this,v_,y4).call(this,ct);return St.isSame?null:(St.isSameAltText?delete ct.accessibilityData:ct.accessibilityData.structParent=this._initialData.structParent??-1,ct.id=this.annotationElementId,delete ct.bitmapId,ct)}if(ot===null)return ct;ot.stamps||(ot.stamps=new Map);const ft=Kt(this,Bo)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!ot.stamps.has(Kt(this,ws)))ot.stamps.set(Kt(this,ws),{area:ft,serialized:ct}),ct.bitmap=_n(this,$v,Pw).call(this,!1);else if(Kt(this,Bo)){const St=ot.stamps.get(Kt(this,ws));ft>St.area&&(St.area=ft,St.serialized.bitmap.close(),St.serialized.bitmap=_n(this,$v,Pw).call(this,!1))}return ct}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Wr=new WeakMap,ws=new WeakMap,Tm=new WeakMap,pp=new WeakMap,_m=new WeakMap,Iv=new WeakMap,mp=new WeakMap,gy=new WeakMap,Tu=new WeakMap,Bo=new WeakMap,Dv=new WeakMap,yy=new WeakSet,Cx=function(et,ot=!1){if(!et){this.remove();return}vn(this,Wr,et.bitmap),ot||(vn(this,ws,et.id),vn(this,Bo,et.isSvg)),et.file&&vn(this,Iv,et.file.name),_n(this,jv,Cw).call(this)},vy=new WeakSet,Rx=function(){if(vn(this,Tm,null),this._uiManager.enableWaiting(!1),!!Kt(this,mp)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Kt(this,Wr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Kt(this,Wr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Lv=new WeakSet,Aw=function(){if(Kt(this,ws)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Kt(this,ws)).then(ct=>_n(this,yy,Cx).call(this,ct,!0)).finally(()=>_n(this,vy,Rx).call(this));return}if(Kt(this,pp)){const ct=Kt(this,pp);vn(this,pp,null),this._uiManager.enableWaiting(!0),vn(this,Tm,this._uiManager.imageManager.getFromUrl(ct).then(ut=>_n(this,yy,Cx).call(this,ut)).finally(()=>_n(this,vy,Rx).call(this)));return}if(Kt(this,_m)){const ct=Kt(this,_m);vn(this,_m,null),this._uiManager.enableWaiting(!0),vn(this,Tm,this._uiManager.imageManager.getFromFile(ct).then(ut=>_n(this,yy,Cx).call(this,ut)).finally(()=>_n(this,vy,Rx).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=SupportedImageMimeTypes.join(",");const ot=this._uiManager._signal;vn(this,Tm,new Promise(ct=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ut=await this._uiManager.imageManager.getFromFile(et.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_n(this,yy,Cx).call(this,ut)}ct()},{signal:ot}),et.addEventListener("cancel",()=>{this.remove(),ct()},{signal:ot})}).finally(()=>_n(this,vy,Rx).call(this))),et.click()},jv=new WeakSet,Cw=function(){var kt;const{div:et}=this;let{width:ot,height:ct}=Kt(this,Wr);const[ut,dt]=this.pageDimensions,ft=.75;if(this.width)ot=this.width*ut,ct=this.height*dt;else if(ot>ft*ut||ct>ft*dt){const Tt=Math.min(ft*ut/ot,ft*dt/ct);ot*=Tt,ct*=Tt}this._uiManager.enableWaiting(!1);const St=vn(this,mp,document.createElement("canvas"));St.setAttribute("role","img"),this.addContainer(St),this.width=ot/ut,this.height=ct/dt,this.setDims(),(kt=this._initialOptions)!=null&&kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(et.hidden=!1),_n(this,ZS,LC).call(this),Kt(this,Dv)||(this.parent.addUndoableEditor(this),vn(this,Dv,!0)),this._reportTelemetry({action:"inserted_image"}),Kt(this,Iv)&&this.div.setAttribute("aria-description",Kt(this,Iv)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Fv=new WeakSet,Rw=function(et,ot){const{width:ct,height:ut}=Kt(this,Wr);let dt=ct,ft=ut,St=Kt(this,Wr);for(;dt>2*et||ft>2*ot;){const kt=dt,Tt=ft;dt>2*et&&(dt=dt>=16384?Math.floor(dt/2)-1:Math.ceil(dt/2)),ft>2*ot&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const Rt=new OffscreenCanvas(dt,ft);Rt.getContext("2d").drawImage(St,0,0,kt,Tt,0,0,dt,ft),St=Rt.transferToImageBitmap()}return St},ZS=new WeakSet,LC=function(){const[et,ot]=this.parentDimensions,{width:ct,height:ut}=this,dt=new OutputScale,ft=Math.ceil(ct*et*dt.sx),St=Math.ceil(ut*ot*dt.sy),kt=Kt(this,mp);if(!kt||kt.width===ft&&kt.height===St)return;kt.width=ft,kt.height=St;const Tt=Kt(this,Bo)?Kt(this,Wr):_n(this,Fv,Rw).call(this,ft,St),Rt=kt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Tt,0,0,Tt.width,Tt.height,0,0,ft,St)},$v=new WeakSet,Pw=function(et){if(et){if(Kt(this,Bo)){const ut=this._uiManager.imageManager.getSvgUrl(Kt(this,ws));if(ut)return ut}const ot=document.createElement("canvas");return{width:ot.width,height:ot.height}=Kt(this,Wr),ot.getContext("2d").drawImage(Kt(this,Wr),0,0),ot.toDataURL()}if(Kt(this,Bo)){const[ot,ct]=this.pageDimensions,ut=Math.round(this.width*ot*PixelsPerInch.PDF_TO_CSS_UNITS),dt=Math.round(this.height*ct*PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(ut,dt);return ft.getContext("2d").drawImage(Kt(this,Wr),0,0,Kt(this,Wr).width,Kt(this,Wr).height,0,0,ut,dt),ft.transferToImageBitmap()}return structuredClone(Kt(this,Wr))},v_=new WeakSet,y4=function(et){var ft;const{pageIndex:ot,accessibilityData:{altText:ct}}=this._initialData,ut=et.pageIndex===ot,dt=(((ft=et.accessibilityData)==null?void 0:ft.alt)||"")===ct;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ut&&dt,isSameAltText:dt}},qn(StampEditor,"_type","stamp"),qn(StampEditor,"_editorType",AnnotationEditorType.STAMP);var xy,Bv,Am,Cm,gp,vo,Rm,Vv,zv,Ul,yp,ks,vp,Pm,Hv,sr,Nm,e2,jC,x_,v4,xl,tu,t2,FC,n2,$C,Uv,Nw;const Rl=class Rl{constructor({uiManager:g,pageIndex:et,div:ot,structTreeLayer:ct,accessibilityManager:ut,annotationLayer:dt,drawLayer:ft,textLayer:St,viewport:kt,l10n:Tt}){yn(this,e2);yn(this,x_);yn(this,xl);yn(this,t2);yn(this,n2);yn(this,Uv);yn(this,xy,void 0);yn(this,Bv,!1);yn(this,Am,null);yn(this,Cm,null);yn(this,gp,null);yn(this,vo,new Map);yn(this,Rm,!1);yn(this,Vv,!1);yn(this,zv,!1);yn(this,Ul,null);yn(this,yp,null);yn(this,ks,null);yn(this,vp,null);yn(this,Pm,null);yn(this,Hv,-1);yn(this,sr,void 0);const Rt=[...Kt(Rl,Nm).values()];if(!Rl._initialized){Rl._initialized=!0;for(const jt of Rt)jt.initialize(Tt,g)}g.registerEditorTypes(Rt),vn(this,sr,g),this.pageIndex=et,this.div=ot,vn(this,xy,ut),vn(this,Am,dt),this.viewport=kt,vn(this,ks,St),this.drawLayer=ft,this._structTree=ct,Kt(this,sr).addLayer(this)}get isEmpty(){return Kt(this,vo).size===0}get isInvisible(){return this.isEmpty&&Kt(this,sr).getMode()===AnnotationEditorType.NONE}updateToolbar(g){Kt(this,sr).updateToolbar(g)}updateMode(g=Kt(this,sr).getMode()){switch(_n(this,Uv,Nw).call(this),g){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:et}=this.div;if(et.toggle("nonEditing",!1),g===AnnotationEditorType.POPUP)et.toggle("commentEditing",!0);else{et.toggle("commentEditing",!1);for(const ot of Kt(Rl,Nm).values())et.toggle(`${ot._type}Editing`,g===ot._editorType)}this.div.hidden=!1}hasTextLayer(g){var et;return g===((et=Kt(this,ks))==null?void 0:et.div)}setEditingState(g){Kt(this,sr).setEditingState(g)}addCommands(g){Kt(this,sr).addCommands(g)}cleanUndoStack(g){Kt(this,sr).cleanUndoStack(g)}toggleDrawing(g=!1){this.div.classList.toggle("drawing",!g)}togglePointerEvents(g=!1){this.div.classList.toggle("disabled",!g)}toggleAnnotationLayerPointerEvents(g=!1){var et;(et=Kt(this,Am))==null||et.div.classList.toggle("disabled",!g)}async enable(){var ot;vn(this,zv,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(ot=Kt(this,Pm))==null||ot.abort(),vn(this,Pm,null);const g=new Set;for(const ct of Kt(this,e2,jC))ct.enableEditing(),ct.show(!0),ct.annotationElementId&&(Kt(this,sr).removeChangedExistingAnnotation(ct),g.add(ct.annotationElementId));const et=Kt(this,Am);if(et)for(const ct of et.getEditableAnnotations()){if(ct.hide(),Kt(this,sr).isDeletedAnnotationElement(ct.data.id)||g.has(ct.data.id))continue;const ut=await this.deserialize(ct);ut&&(this.addOrRebuild(ut),ut.enableEditing())}vn(this,zv,!1),Kt(this,sr)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var ot;if(vn(this,Vv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Kt(this,ks)&&!Kt(this,Pm)){vn(this,Pm,new AbortController);const ct=Kt(this,sr).combinedSignal(Kt(this,Pm));Kt(this,ks).div.addEventListener("pointerdown",ut=>{const{clientX:ft,clientY:St,timeStamp:kt}=ut,Tt=Kt(this,Hv);if(kt-Tt>500){vn(this,Hv,kt);return}vn(this,Hv,-1);const{classList:Rt}=this.div;Rt.toggle("getElements",!0);const jt=document.elementsFromPoint(ft,St);if(Rt.toggle("getElements",!1),!this.div.contains(jt[0]))return;let Ft;const $t=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Ut of jt)if($t.test(Ut.id)){Ft=Ut.id;break}if(!Ft)return;const zt=Kt(this,vo).get(Ft);(zt==null?void 0:zt.annotationElementId)===null&&(ut.stopPropagation(),ut.preventDefault(),zt.dblclick(ut))},{signal:ct,capture:!0})}const g=Kt(this,Am);if(g){const ct=new Map,ut=new Map;for(const ft of Kt(this,e2,jC)){if(ft.disableEditing(),!ft.annotationElementId){ft.updateFakeAnnotationElement(g);continue}if(ft.serialize()!==null){ct.set(ft.annotationElementId,ft);continue}else ut.set(ft.annotationElementId,ft);(ot=this.getEditableAnnotation(ft.annotationElementId))==null||ot.show(),ft.remove()}const dt=g.getEditableAnnotations();for(const ft of dt){const{id:St}=ft.data;if(Kt(this,sr).isDeletedAnnotationElement(St)){ft.updateEdited({deleted:!0});continue}let kt=ut.get(St);if(kt){kt.resetAnnotationElement(ft),kt.show(!1),ft.show();continue}kt=ct.get(St),kt&&(Kt(this,sr).addChangedExistingAnnotation(kt),kt.renderAnnotationElement(ft)&&kt.show(!1)),ft.show()}}_n(this,Uv,Nw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:et}=this.div;for(const ct of Kt(Rl,Nm).values())et.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),vn(this,Vv,!1)}getEditableAnnotation(g){var et;return((et=Kt(this,Am))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){Kt(this,sr).getActive()!==g&&Kt(this,sr).setActiveEditor(g)}enableTextSelection(){var g;if(this.div.tabIndex=-1,(g=Kt(this,ks))!=null&&g.div&&!Kt(this,vp)){vn(this,vp,new AbortController);const et=Kt(this,sr).combinedSignal(Kt(this,vp));Kt(this,ks).div.addEventListener("pointerdown",_n(this,x_,v4).bind(this),{signal:et}),Kt(this,ks).div.classList.add("highlighting")}}disableTextSelection(){var g;this.div.tabIndex=0,(g=Kt(this,ks))!=null&&g.div&&Kt(this,vp)&&(Kt(this,vp).abort(),vn(this,vp,null),Kt(this,ks).div.classList.remove("highlighting"))}enableClick(){if(Kt(this,Cm))return;vn(this,Cm,new AbortController);const g=Kt(this,sr).combinedSignal(Kt(this,Cm));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:g});const et=this.pointerup.bind(this);this.div.addEventListener("pointerup",et,{signal:g}),this.div.addEventListener("pointercancel",et,{signal:g})}disableClick(){var g;(g=Kt(this,Cm))==null||g.abort(),vn(this,Cm,null)}attach(g){Kt(this,vo).set(g.id,g);const{annotationElementId:et}=g;et&&Kt(this,sr).isDeletedAnnotationElement(et)&&Kt(this,sr).removeDeletedAnnotationElement(g)}detach(g){var et;Kt(this,vo).delete(g.id),(et=Kt(this,xy))==null||et.removePointerInTextLayer(g.contentDiv),!Kt(this,Vv)&&g.annotationElementId&&Kt(this,sr).addDeletedAnnotationElement(g)}remove(g){this.detach(g),Kt(this,sr).removeEditor(g),g.div.remove(),g.isAttachedToDOM=!1}changeParent(g){var et;g.parent!==this&&(g.parent&&g.annotationElementId&&(Kt(this,sr).addDeletedAnnotationElement(g.annotationElementId),AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(!(g.parent===this&&g.isAttachedToDOM)){if(this.changeParent(g),Kt(this,sr).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(!Kt(this,zv)),Kt(this,sr).addToAnnotationStorage(g),g._reportTelemetry(g.telemetryInitialData)}}moveEditorInDOM(g){var ot;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&!Kt(this,gp)&&(g._focusEventsAllowed=!1,vn(this,gp,setTimeout(()=>{vn(this,gp,null),g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:Kt(this,sr)._signal}),et.focus())},0))),g._structTreeParentId=(ot=Kt(this,xy))==null?void 0:ot.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?(g.parent||(g.parent=this),g.rebuild(),g.show()):this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ot=()=>{g.remove()};this.addCommands({cmd:et,undo:ot,mustExec:!1})}getEditorByUID(g){for(const et of Kt(this,vo).values())if(et.uid===g)return et;return null}getNextId(){return Kt(this,sr).getId()}combinedSignal(g){return Kt(this,sr).combinedSignal(g)}canCreateNewEmptyEditor(){var g;return(g=Kt(this,xl,tu))==null?void 0:g.canCreateNewEmptyEditor()}async pasteEditor(g,et){this.updateToolbar(g),await Kt(this,sr).updateMode(g.mode);const{offsetX:ot,offsetY:ct}=_n(this,n2,$C).call(this),ut=this.getNextId(),dt=_n(this,t2,FC).call(this,{parent:this,id:ut,x:ot,y:ct,uiManager:Kt(this,sr),isCentered:!0,...et});dt&&this.add(dt)}async deserialize(g){var et;return await((et=Kt(Rl,Nm).get(g.annotationType??g.annotationEditorType))==null?void 0:et.deserialize(g,this,Kt(this,sr)))||null}createAndAddNewEditor(g,et,ot={}){const ct=this.getNextId(),ut=_n(this,t2,FC).call(this,{parent:this,id:ct,x:g.offsetX,y:g.offsetY,uiManager:Kt(this,sr),isCentered:et,...ot});return ut&&this.add(ut),ut}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(g={}){this.createAndAddNewEditor(_n(this,n2,$C).call(this),!0,g)}setSelected(g){Kt(this,sr).setSelected(g)}toggleSelected(g){Kt(this,sr).toggleSelected(g)}unselect(g){Kt(this,sr).unselect(g)}pointerup(g){var ct;const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div||!Kt(this,Rm)||(vn(this,Rm,!1),(ct=Kt(this,xl,tu))!=null&&ct.isDrawer&&Kt(this,xl,tu).supportMultipleDrawings))return;if(!Kt(this,Bv)){vn(this,Bv,!0);return}const ot=Kt(this,sr).getMode();if(ot===AnnotationEditorType.STAMP||ot===AnnotationEditorType.SIGNATURE){Kt(this,sr).unselectAll();return}this.createAndAddNewEditor(g,!1)}pointerdown(g){var ct;if(Kt(this,sr).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),Kt(this,Rm)){vn(this,Rm,!1);return}const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;if(vn(this,Rm,!0),(ct=Kt(this,xl,tu))!=null&&ct.isDrawer){this.startDrawingSession(g);return}const ot=Kt(this,sr).getActive();vn(this,Bv,!ot||ot.isEmpty())}startDrawingSession(g){if(this.div.focus({preventScroll:!0}),Kt(this,Ul)){Kt(this,xl,tu).startDrawing(this,Kt(this,sr),!1,g);return}Kt(this,sr).setCurrentDrawingSession(this),vn(this,Ul,new AbortController);const et=Kt(this,sr).combinedSignal(Kt(this,Ul));this.div.addEventListener("blur",({relatedTarget:ot})=>{ot&&!this.div.contains(ot)&&(vn(this,yp,null),this.commitOrRemove())},{signal:et}),Kt(this,xl,tu).startDrawing(this,Kt(this,sr),!1,g)}pause(g){if(g){const{activeElement:et}=document;this.div.contains(et)&&vn(this,yp,et);return}Kt(this,yp)&&setTimeout(()=>{var et;(et=Kt(this,yp))==null||et.focus(),vn(this,yp,null)},0)}endDrawingSession(g=!1){return Kt(this,Ul)?(Kt(this,sr).setCurrentDrawingSession(null),Kt(this,Ul).abort(),vn(this,Ul,null),vn(this,yp,null),Kt(this,xl,tu).endDrawing(g)):null}findNewParent(g,et,ot){const ct=Kt(this,sr).findParent(et,ot);return ct===null||ct===this?!1:(ct.changeParent(g),!0)}commitOrRemove(){return Kt(this,Ul)?(this.endDrawingSession(),!0):!1}onScaleChanging(){Kt(this,Ul)&&Kt(this,xl,tu).onScaleChangingWhenDrawing(this)}destroy(){var g,et;this.commitOrRemove(),((g=Kt(this,sr).getActive())==null?void 0:g.parent)===this&&(Kt(this,sr).commitOrRemove(),Kt(this,sr).setActiveEditor(null)),Kt(this,gp)&&(clearTimeout(Kt(this,gp)),vn(this,gp,null));for(const ot of Kt(this,vo).values())(et=Kt(this,xy))==null||et.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,Kt(this,vo).clear(),Kt(this,sr).removeLayer(this)}render({viewport:g}){this.viewport=g,setLayerDimensions(this.div,g);for(const et of Kt(this,sr).getEditors(this.pageIndex))this.add(et),et.rebuild();this.updateMode()}update({viewport:g}){Kt(this,sr).commitOrRemove(),_n(this,Uv,Nw).call(this);const et=this.viewport.rotation,ot=g.rotation;if(this.viewport=g,setLayerDimensions(this.div,{rotation:ot}),et!==ot)for(const ct of Kt(this,vo).values())ct.rotate(ot)}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}get scale(){return Kt(this,sr).viewParameters.realScale}};xy=new WeakMap,Bv=new WeakMap,Am=new WeakMap,Cm=new WeakMap,gp=new WeakMap,vo=new WeakMap,Rm=new WeakMap,Vv=new WeakMap,zv=new WeakMap,Ul=new WeakMap,yp=new WeakMap,ks=new WeakMap,vp=new WeakMap,Pm=new WeakMap,Hv=new WeakMap,sr=new WeakMap,Nm=new WeakMap,e2=new WeakSet,jC=function(){return Kt(this,vo).size!==0?Kt(this,vo).values():Kt(this,sr).getEditors(this.pageIndex)},x_=new WeakSet,v4=function(g){Kt(this,sr).unselectAll();const{target:et}=g;if(et===Kt(this,ks).div||(et.getAttribute("role")==="img"||et.classList.contains("endOfContent"))&&Kt(this,ks).div.contains(et)){const{isMac:ot}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&ot)return;Kt(this,sr).showAllEditors("highlight",!0,!0),Kt(this,ks).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,Kt(this,sr).direction==="ltr",{target:Kt(this,ks).div,x:g.x,y:g.y}),Kt(this,ks).div.addEventListener("pointerup",()=>{Kt(this,ks).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Kt(this,sr)._signal}),g.preventDefault()}},xl=new WeakSet,tu=function(){return Kt(Rl,Nm).get(Kt(this,sr).getMode())},t2=new WeakSet,FC=function(g){const et=Kt(this,xl,tu);return et?new et.prototype.constructor(g):null},n2=new WeakSet,$C=function(){const{x:g,y:et,width:ot,height:ct}=this.boundingClientRect,ut=Math.max(0,g),dt=Math.max(0,et),ft=Math.min(window.innerWidth,g+ot),St=Math.min(window.innerHeight,et+ct),kt=(ut+ft)/2-g,Tt=(dt+St)/2-et,[Rt,jt]=this.viewport.rotation%180===0?[kt,Tt]:[Tt,kt];return{offsetX:Rt,offsetY:jt}},Uv=new WeakSet,Nw=function(){for(const g of Kt(this,vo).values())g.isEmpty()&&g.remove()},qn(Rl,"_initialized",!1),yn(Rl,Nm,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(g=>[g._editorType,g])));let AnnotationEditorLayer=Rl;var Gl,Js,by,r2,b_,x4,i2,BC,E_,b4,s2,VC;const us=class us{constructor({pageIndex:g}){yn(this,i2);yn(this,E_);yn(this,s2);yn(this,Gl,null);yn(this,Js,new Map);yn(this,by,new Map);this.pageIndex=g}setParent(g){if(!Kt(this,Gl)){vn(this,Gl,g);return}if(Kt(this,Gl)!==g){if(Kt(this,Js).size>0)for(const et of Kt(this,Js).values())et.remove(),g.append(et);vn(this,Gl,g)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(g,et=!1,ot=!1){const ct=cs(us,r2)._++,ut=_n(this,i2,BC).call(this),dt=us._svgFactory.createElement("defs");ut.append(dt);const ft=us._svgFactory.createElement("path");dt.append(ft);const St=`path_p${this.pageIndex}_${ct}`;ft.setAttribute("id",St),ft.setAttribute("vector-effect","non-scaling-stroke"),et&&Kt(this,by).set(ct,ft);const kt=ot?_n(this,E_,b4).call(this,dt,St):null,Tt=us._svgFactory.createElement("use");return ut.append(Tt),Tt.setAttribute("href",`#${St}`),this.updateProperties(ut,g),Kt(this,Js).set(ct,ut),{id:ct,clipPathId:`url(#${kt})`}}drawOutline(g,et){const ot=cs(us,r2)._++,ct=_n(this,i2,BC).call(this),ut=us._svgFactory.createElement("defs");ct.append(ut);const dt=us._svgFactory.createElement("path");ut.append(dt);const ft=`path_p${this.pageIndex}_${ot}`;dt.setAttribute("id",ft),dt.setAttribute("vector-effect","non-scaling-stroke");let St;if(et){const Rt=us._svgFactory.createElement("mask");ut.append(Rt),St=`mask_p${this.pageIndex}_${ot}`,Rt.setAttribute("id",St),Rt.setAttribute("maskUnits","objectBoundingBox");const jt=us._svgFactory.createElement("rect");Rt.append(jt),jt.setAttribute("width","1"),jt.setAttribute("height","1"),jt.setAttribute("fill","white");const Ft=us._svgFactory.createElement("use");Rt.append(Ft),Ft.setAttribute("href",`#${ft}`),Ft.setAttribute("stroke","none"),Ft.setAttribute("fill","black"),Ft.setAttribute("fill-rule","nonzero"),Ft.classList.add("mask")}const kt=us._svgFactory.createElement("use");ct.append(kt),kt.setAttribute("href",`#${ft}`),St&&kt.setAttribute("mask",`url(#${St})`);const Tt=kt.cloneNode();return ct.append(Tt),kt.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),this.updateProperties(ct,g),Kt(this,Js).set(ot,ct),ot}finalizeDraw(g,et){Kt(this,by).delete(g),this.updateProperties(g,et)}updateProperties(g,et){var St;if(!et)return;const{root:ot,bbox:ct,rootClass:ut,path:dt}=et,ft=typeof g=="number"?Kt(this,Js).get(g):g;if(ft){if(ot&&_n(this,s2,VC).call(this,ft,ot),ct&&_n(St=us,b_,x4).call(St,ft,ct),ut){const{classList:kt}=ft;for(const[Tt,Rt]of Object.entries(ut))kt.toggle(Tt,Rt)}if(dt){const Tt=ft.firstChild.firstChild;_n(this,s2,VC).call(this,Tt,dt)}}}updateParent(g,et){if(et===this)return;const ot=Kt(this,Js).get(g);ot&&(Kt(et,Gl).append(ot),Kt(this,Js).delete(g),Kt(et,Js).set(g,ot))}remove(g){Kt(this,by).delete(g),Kt(this,Gl)!==null&&(Kt(this,Js).get(g).remove(),Kt(this,Js).delete(g))}destroy(){vn(this,Gl,null);for(const g of Kt(this,Js).values())g.remove();Kt(this,Js).clear(),Kt(this,by).clear()}};Gl=new WeakMap,Js=new WeakMap,by=new WeakMap,r2=new WeakMap,b_=new WeakSet,x4=function(g,[et,ot,ct,ut]){const{style:dt}=g;dt.top=`${100*ot}%`,dt.left=`${100*et}%`,dt.width=`${100*ct}%`,dt.height=`${100*ut}%`},i2=new WeakSet,BC=function(){const g=us._svgFactory.create(1,1,!0);return Kt(this,Gl).append(g),g.setAttribute("aria-hidden",!0),g},E_=new WeakSet,b4=function(g,et){const ot=us._svgFactory.createElement("clipPath");g.append(ot);const ct=`clip_${et}`;ot.setAttribute("id",ct),ot.setAttribute("clipPathUnits","objectBoundingBox");const ut=us._svgFactory.createElement("use");return ot.append(ut),ut.setAttribute("href",`#${et}`),ut.classList.add("clip"),ct},s2=new WeakSet,VC=function(g,et){for(const[ot,ct]of Object.entries(et))ct===null?g.removeAttribute(ot):g.setAttribute(ot,ct)},yn(us,b_),yn(us,r2,0);let DrawLayer=us;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util:Util$1,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util:Util$1,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(it,g,et){for(et of it.keys())if(dequal(et,g))return et}function dequal(it,g){var et,ot,ct;if(it===g)return!0;if(it&&g&&(et=it.constructor)===g.constructor){if(et===Date)return it.getTime()===g.getTime();if(et===RegExp)return it.toString()===g.toString();if(et===Array){if((ot=it.length)===g.length)for(;ot--&&dequal(it[ot],g[ot]););return ot===-1}if(et===Set){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot,ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!g.has(ct))return!1;return!0}if(et===Map){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot[0],ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!dequal(ot[1],g.get(ct)))return!1;return!0}if(et===ArrayBuffer)it=new Uint8Array(it),g=new Uint8Array(g);else if(et===DataView){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it.getInt8(ot)===g.getInt8(ot););return ot===-1}if(ArrayBuffer.isView(it)){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it[ot]===g[ot];);return ot===-1}if(!et||typeof it=="object"){ot=0;for(et in it)if(has.call(it,et)&&++ot&&!has.call(g,et)||!(et in g)||!dequal(it[et],g[et]))return!1;return Object.keys(g).length===ot}}return it!==it&&g!==g}function makeCancellablePromise(it){let g=!1;return{promise:new Promise((ot,ct)=>{it.then(ut=>!g&&ot(ut)).catch(ut=>!g&&ct(ut))}),cancel(){g=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(it,g){const et={};for(const ot of allEvents){const ct=it[ot];ct&&(g?et[ot]=ut=>ct(ut,g(ot)):et[ot]=ct)}return et}var isProduction=!0,prefix="Invariant failed";function invariant(it,g){if(!it){if(isProduction)throw new Error(prefix);var et=typeof g=="function"?g():g,ot=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(ot)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(g){this.pdfDocument=g}setViewer(g){this.pdfViewer=g}setExternalLinkRel(g){this.externalLinkRel=g}setExternalLinkTarget(g){this.externalLinkTarget=g}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(g){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=g}get rotation(){return 0}set rotation(g){}addLinkAttributes(g,et,ot){g.href=et,g.rel=this.externalLinkRel||DEFAULT_LINK_REL,g.target=ot?"_blank":this.externalLinkTarget||""}goToDestination(g){return new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(g,"Destination is not specified."),typeof g=="string"?this.pdfDocument.getDestination(g).then(et):Array.isArray(g)?et(g):g.then(et)}).then(et=>{invariant(Array.isArray(et),`"${et}" is not a valid destination array.`);const ot=et[0];new Promise(ct=>{invariant(this.pdfDocument,"PDF document not loaded."),ot instanceof Object?this.pdfDocument.getPageIndex(ot).then(ut=>{ct(ut)}).catch(()=>{invariant(!1,`"${ot}" is not a valid page reference.`)}):typeof ot=="number"?ct(ot):invariant(!1,`"${ot}" is not a valid destination reference.`)}).then(ct=>{const ut=ct+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(ut>=1&&ut<=this.pagesCount,`"${ut}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:et,pageIndex:ct,pageNumber:ut})})})}goToPage(g){const et=g-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:et,pageNumber:g})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(g){this.goToDestination(g)}}function Message({children:it,type:g}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${g}`,children:it})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer(it,g){switch(g.type){case"RESOLVE":return{value:g.value,error:void 0};case"REJECT":return{value:!1,error:g.error};case"RESET":return{value:void 0,error:void 0};default:return it}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(it){return typeof it<"u"}function isProvided(it){return isDefined(it)&&it!==null}function isString(it){return typeof it=="string"}function isArrayBuffer(it){return it instanceof ArrayBuffer}function isBlob(it){return invariant(isBrowser,"isBlob can only be used in a browser environment"),it instanceof Blob}function isDataURI(it){return isString(it)&&/^data:/.test(it)}function dataURItoByteString(it){invariant(isDataURI(it),"Invalid data URI.");const[g="",et=""]=it.split(",");return g.split(";").indexOf("base64")!==-1?atob(et):unescape(et)}function getDevicePixelRatio$1(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(it){it!=null&&it.cancel&&it.cancel()}function makePageCallback(it,g){return Object.defineProperty(it,"width",{get(){return this.view[2]*g},configurable:!0}),Object.defineProperty(it,"height",{get(){return this.view[3]*g},configurable:!0}),Object.defineProperty(it,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(it,"originalHeight",{get(){return this.view[3]},configurable:!0}),it}function isCancelException(it){return it.name==="RenderingCancelledException"}function loadFromFile(it){return new Promise((g,et)=>{const ot=new FileReader;ot.onload=()=>{if(!ot.result)return et(new Error("Error while reading a file."));g(ot.result)},ot.onerror=ct=>{if(!ct.target)return et(new Error("Error while reading a file."));const{error:ut}=ct.target;if(!ut)return et(new Error("Error while reading a file."));switch(ut.code){case ut.NOT_FOUND_ERR:return et(new Error("Error while reading a file: File not found."));case ut.SECURITY_ERR:return et(new Error("Error while reading a file: Security error."));case ut.ABORT_ERR:return et(new Error("Error while reading a file: Aborted."));default:return et(new Error("Error while reading a file."))}},ot.readAsArrayBuffer(it)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(it,g)=>{switch(g){case PasswordResponses$1.NEED_PASSWORD:{const et=prompt("Enter the password to open this PDF file.");it(et);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const et=prompt("Invalid password. Please try again.");it(et);break}}};function isParameterObject(it){return typeof it=="object"&&it!==null&&("data"in it||"range"in it||"url"in it)}const Document=reactExports.forwardRef(function it({children:g,className:et,error:ot="Failed to load PDF file.",externalLinkRel:ct,externalLinkTarget:ut,file:dt,inputRef:ft,imageResourcesPath:St,loading:kt="Loading PDF",noData:Tt="No PDF file specified.",onItemClick:Rt,onLoadError:jt,onLoadProgress:Ft,onLoadSuccess:$t,onPassword:zt=defaultOnPassword,onSourceError:Ut,onSourceSuccess:Bt,options:Ht,renderMode:Jt,rotate:Zt,scale:tn,...nn},rn){const[on,pn]=useResolver(),{value:dn,error:hn}=on,[un,En]=useResolver(),{value:wn,error:Sn}=un,fn=reactExports.useRef(new LinkService),xn=reactExports.useRef([]),an=reactExports.useRef(void 0),cn=reactExports.useRef(void 0);dt&&dt!==an.current&&isParameterObject(dt)&&(warning$1(!dequal(dt,an.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),an.current=dt),Ht&&Ht!==cn.current&&(warning$1(!dequal(Ht,cn.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),cn.current=Ht);const bn=reactExports.useRef({scrollPageIntoView:Vn=>{const{dest:zn,pageNumber:Zn,pageIndex:lr=Zn-1}=Vn;if(Rt){Rt({dest:zn,pageIndex:lr,pageNumber:Zn});return}const hr=xn.current[lr];if(hr){hr.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Zn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(rn,()=>({linkService:fn,pages:xn,viewer:bn}),[]);function mn(){Bt&&Bt()}function Tn(){hn&&(warning$1(!1,hn.toString()),Ut&&Ut(hn))}function An(){pn({type:"RESET"})}reactExports.useEffect(An,[dt,pn]);const Pn=reactExports.useCallback(async()=>{if(!dt)return null;if(typeof dt=="string")return isDataURI(dt)?{data:dataURItoByteString(dt)}:(displayCORSWarning(),{url:dt});if(dt instanceof PDFDataRangeTransport)return{range:dt};if(isArrayBuffer(dt))return{data:dt};if(isBrowser&&isBlob(dt))return{data:await loadFromFile(dt)};if(invariant(typeof dt=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(dt),"Invalid parameter object: need either .data, .range or .url"),"url"in dt&&typeof dt.url=="string"){if(isDataURI(dt.url)){const{url:Vn,...zn}=dt;return{data:dataURItoByteString(Vn),...zn}}displayCORSWarning()}return dt},[dt]);reactExports.useEffect(()=>{const Vn=makeCancellablePromise(Pn());return Vn.promise.then(zn=>{pn({type:"RESOLVE",value:zn})}).catch(zn=>{pn({type:"REJECT",error:zn})}),()=>{cancelRunningTask(Vn)}},[Pn,pn]),reactExports.useEffect(()=>{if(!(typeof dn>"u")){if(dn===!1){Tn();return}mn()}},[dn]);function Mn(){wn&&($t&&$t(wn),xn.current=new Array(wn.numPages),fn.current.setDocument(wn))}function Rn(){Sn&&(warning$1(!1,Sn.toString()),jt&&jt(Sn))}reactExports.useEffect(function(){En({type:"RESET"})},[En,dn]),reactExports.useEffect(function(){if(!dn)return;const zn=Ht?{...dn,...Ht}:dn,Zn=getDocument(zn);Ft&&(Zn.onProgress=Ft),zt&&(Zn.onPassword=zt);const lr=Zn,hr=lr.promise.then($n=>{En({type:"RESOLVE",value:$n})}).catch($n=>{lr.destroyed||En({type:"REJECT",error:$n})});return()=>{hr.finally(()=>lr.destroy())}},[Ht,En,dn]),reactExports.useEffect(()=>{if(!(typeof wn>"u")){if(wn===!1){Rn();return}Mn()}},[wn]),reactExports.useEffect(function(){fn.current.setViewer(bn.current),fn.current.setExternalLinkRel(ct),fn.current.setExternalLinkTarget(ut)},[ct,ut]);const Cn=reactExports.useCallback((Vn,zn)=>{xn.current[Vn]=zn},[]),On=reactExports.useCallback(Vn=>{delete xn.current[Vn]},[]),In=reactExports.useMemo(()=>({imageResourcesPath:St,linkService:fn.current,onItemClick:Rt,pdf:wn,registerPage:Cn,renderMode:Jt,rotate:Zt,scale:tn,unregisterPage:On}),[St,Rt,wn,Cn,Jt,Zt,tn,On]),Dn=reactExports.useMemo(()=>makeEventProps(nn,()=>wn),[nn,wn]);function Fn(){function Vn(Zn){return!!(Zn!=null&&Zn.pdf)}if(!Vn(In))throw new Error("pdf is undefined");const zn=typeof g=="function"?g(In):g;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:In,children:zn})}function Xn(){return dt?wn==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof kt=="function"?kt():kt}):wn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof ot=="function"?ot():ot}):Fn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Tt=="function"?Tt():Tt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",et),ref:ft,...Dn,children:Xn()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];var et=it.filter(Boolean);if(et.length<=1){var ot=et[0];return ot||null}return function(ut){for(var dt=0,ft=et;dt<ft.length;dt++){var St=ft[dt];typeof St=="function"?St(ut):St&&(St.current=ut)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const it=useDocumentContext(),g=usePageContext();invariant(g,"Unable to find Page context.");const et={...it,...g},{imageResourcesPath:ot,linkService:ct,onGetAnnotationsError:ut,onGetAnnotationsSuccess:dt,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:St,page:kt,pdf:Tt,renderForms:Rt,rotate:jt,scale:Ft=1}=et;invariant(Tt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(kt,"Attempted to load page annotations, but no page was specified."),invariant(ct,"Attempted to load page annotations, but no linkService was specified.");const[$t,zt]=useResolver(),{value:Ut,error:Bt}=$t,Ht=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function Jt(){Ut&&dt&&dt(Ut)}function Zt(){Bt&&(warning$1(!1,Bt.toString()),ut&&ut(Bt))}reactExports.useEffect(function(){zt({type:"RESET"})},[zt,kt]),reactExports.useEffect(function(){if(!kt)return;const pn=makeCancellablePromise(kt.getAnnotations()),dn=pn;return pn.promise.then(hn=>{zt({type:"RESOLVE",value:hn})}).catch(hn=>{zt({type:"REJECT",error:hn})}),()=>{cancelRunningTask(dn)}},[zt,kt]),reactExports.useEffect(()=>{if(Ut!==void 0){if(Ut===!1){Zt();return}Jt()}},[Ut]);function tn(){St&&St()}function nn(on){warning$1(!1,`${on}`),ft&&ft(on)}const rn=reactExports.useMemo(()=>kt.getViewport({scale:Ft,rotation:jt}),[kt,jt,Ft]);return reactExports.useEffect(function(){if(!Tt||!kt||!ct||!Ut)return;const{current:pn}=Ht;if(!pn)return;const dn=rn.clone({dontFlip:!0}),hn={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Tt.annotationStorage,commentManager:null,div:pn,l10n:null,linkService:ct,page:kt,structTreeLayer:null,viewport:dn},un={annotations:Ut,annotationStorage:Tt.annotationStorage,div:pn,imageResourcesPath:ot,linkService:ct,page:kt,renderForms:Rt,viewport:dn};pn.innerHTML="";try{new AnnotationLayer$1(hn).render(un),tn()}catch(En){nn(En)}return()=>{}},[Ut,ot,ct,kt,Tt,Rt,rn]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Ht})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(it){return it in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(it){return"children"in it}function isStructTreeNodeWithOnlyContentChild(it){return isStructTreeNode(it)?it.children.length===1&&0 in it.children&&"id"in it.children[0]:!1}function getRoleAttributes(it){const g={};if(isStructTreeNode(it)){const{role:et}=it,ot=et.match(HEADING_PATTERN);if(ot)g.role="heading",g["aria-level"]=Number(ot[1]);else if(isPdfRole(et)){const ct=PDF_ROLE_TO_HTML_ROLE[et];ct&&(g.role=ct)}}return g}function getBaseAttributes(it){const g={};if(isStructTreeNode(it)){if(it.alt!==void 0&&(g["aria-label"]=it.alt),it.lang!==void 0&&(g.lang=it.lang),isStructTreeNodeWithOnlyContentChild(it)){const[et]=it.children;if(et){const ot=getBaseAttributes(et);return{...g,...ot}}}}else"id"in it&&(g["aria-owns"]=it.id);return g}function getAttributes(it){return it?{...getRoleAttributes(it),...getBaseAttributes(it)}:null}function StructTreeItem({className:it,node:g}){const et=reactExports.useMemo(()=>getAttributes(g),[g]),ot=reactExports.useMemo(()=>!isStructTreeNode(g)||isStructTreeNodeWithOnlyContentChild(g)?null:g.children.map((ct,ut)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ct},ut)),[g]);return jsxRuntimeExports.jsx("span",{className:it,...et,children:ot})}function StructTree(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{onGetStructTreeError:g,onGetStructTreeSuccess:et}=it,[ot,ct]=useResolver(),{value:ut,error:dt}=ot,{customTextRenderer:ft,page:St}=it;function kt(){ut&&et&&et(ut)}function Tt(){dt&&(warning$1(!1,dt.toString()),g&&g(dt))}return reactExports.useEffect(function(){ct({type:"RESET"})},[ct,St]),reactExports.useEffect(function(){if(ft||!St)return;const jt=makeCancellablePromise(St.getStructTree()),Ft=jt;return jt.promise.then($t=>{ct({type:"RESOLVE",value:$t})}).catch($t=>{ct({type:"REJECT",error:$t})}),()=>cancelRunningTask(Ft)},[ft,St,ct]),reactExports.useEffect(()=>{if(ut!==void 0){if(ut===!1){Tt();return}kt()}},[ut]),ut?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ut}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas$1(it){const g=usePageContext();invariant(g,"Unable to find Page context.");const et={...g,...it},{_className:ot,canvasBackground:ct,devicePixelRatio:ut=getDevicePixelRatio$1(),onRenderError:dt,onRenderSuccess:ft,page:St,renderForms:kt,renderTextLayer:Tt,rotate:Rt,scale:jt}=et,{canvasRef:Ft}=it;invariant(St,"Attempted to render page canvas, but no page was specified.");const $t=reactExports.useRef(null);function zt(){St&&ft&&ft(makePageCallback(St,jt))}function Ut(Zt){isCancelException(Zt)||(warning$1(!1,Zt.toString()),dt&&dt(Zt))}const Bt=reactExports.useMemo(()=>St.getViewport({scale:jt*ut,rotation:Rt}),[ut,St,Rt,jt]),Ht=reactExports.useMemo(()=>St.getViewport({scale:jt,rotation:Rt}),[St,Rt,jt]);reactExports.useEffect(function(){if(!St)return;St.cleanup();const{current:tn}=$t;if(!tn)return;tn.width=Bt.width,tn.height=Bt.height,tn.style.width=`${Math.floor(Ht.width)}px`,tn.style.height=`${Math.floor(Ht.height)}px`,tn.style.visibility="hidden";const nn={annotationMode:kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:tn,canvasContext:tn.getContext("2d",{alpha:!1}),viewport:Bt};ct&&(nn.background=ct);const rn=St.render(nn),on=rn;return rn.promise.then(()=>{tn.style.visibility="",zt()}).catch(Ut),()=>cancelRunningTask(on)},[ct,St,kt,Bt,Ht]);const Jt=reactExports.useCallback(()=>{const{current:Zt}=$t;Zt&&(Zt.width=0,Zt.height=0)},[]);return reactExports.useEffect(()=>Jt,[Jt]),jsxRuntimeExports.jsx("canvas",{className:`${ot}__canvas`,dir:"ltr",ref:mergeRefs(Ft,$t),style:{display:"block",userSelect:"none"},children:Tt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(it){return"str"in it}function TextLayer(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{customTextRenderer:g,onGetTextError:et,onGetTextSuccess:ot,onRenderTextLayerError:ct,onRenderTextLayerSuccess:ut,page:dt,pageIndex:ft,pageNumber:St,rotate:kt,scale:Tt}=it;invariant(dt,"Attempted to load page text content, but no page was specified.");const[Rt,jt]=useResolver(),{value:Ft,error:$t}=Rt,zt=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Ut(){Ft&&ot&&ot(Ft)}function Bt(){$t&&(warning$1(!1,$t.toString()),et&&et($t))}reactExports.useEffect(function(){jt({type:"RESET"})},[dt,jt]),reactExports.useEffect(function(){if(!dt)return;const on=makeCancellablePromise(dt.getTextContent()),pn=on;return on.promise.then(dn=>{jt({type:"RESOLVE",value:dn})}).catch(dn=>{jt({type:"REJECT",error:dn})}),()=>cancelRunningTask(pn)},[dt,jt]),reactExports.useEffect(()=>{if(Ft!==void 0){if(Ft===!1){Bt();return}Ut()}},[Ft]);const Ht=reactExports.useCallback(()=>{ut&&ut()},[ut]),Jt=reactExports.useCallback(rn=>{warning$1(!1,rn.toString()),ct&&ct(rn)},[ct]);function Zt(){const rn=zt.current;rn&&rn.classList.add("selecting")}function tn(){const rn=zt.current;rn&&rn.classList.remove("selecting")}const nn=reactExports.useMemo(()=>dt.getViewport({scale:Tt,rotation:kt}),[dt,kt,Tt]);return reactExports.useLayoutEffect(function(){if(!dt||!Ft)return;const{current:on}=zt;if(!on)return;on.innerHTML="";const pn=dt.streamTextContent({includeMarkedContent:!0}),dn={container:on,textContentSource:pn,viewport:nn},hn=new TextLayer$1(dn),un=hn;return hn.render().then(()=>{const En=document.createElement("div");En.className="endOfContent",on.append(En);const wn=on.querySelectorAll('[role="presentation"]');if(g){let Sn=0;Ft.items.forEach((fn,xn)=>{if(!isTextItem(fn))return;const an=wn[Sn];if(!an)return;const cn=g({pageIndex:ft,pageNumber:St,itemIndex:xn,...fn});an.innerHTML=cn,Sn+=fn.str&&fn.hasEOL?2:1})}Ht()}).catch(Jt),()=>cancelRunningTask(un)},[g,Jt,Ht,dt,ft,St,Ft,nn]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:tn,onMouseDown:Zt,ref:zt})}const defaultScale=1;function Page(it){const et={...useDocumentContext(),...it},{_className:ot="react-pdf__Page",_enableRegisterUnregisterPage:ct=!0,canvasBackground:ut,canvasRef:dt,children:ft,className:St,customRenderer:kt,customTextRenderer:Tt,devicePixelRatio:Rt,error:jt="Failed to load the page.",height:Ft,inputRef:$t,loading:zt="Loading page",noData:Ut="No page specified.",onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ht,onGetStructTreeError:Jt,onGetStructTreeSuccess:Zt,onGetTextError:tn,onGetTextSuccess:nn,onLoadError:rn,onLoadSuccess:on,onRenderAnnotationLayerError:pn,onRenderAnnotationLayerSuccess:dn,onRenderError:hn,onRenderSuccess:un,onRenderTextLayerError:En,onRenderTextLayerSuccess:wn,pageIndex:Sn,pageNumber:fn,pdf:xn,registerPage:an,renderAnnotationLayer:cn=!0,renderForms:bn=!1,renderMode:mn="canvas",renderTextLayer:Tn=!0,rotate:An,scale:Pn=defaultScale,unregisterPage:Mn,width:Rn,...Cn}=et,[On,In]=useResolver(),{value:Dn,error:Fn}=On,Xn=reactExports.useRef(null);invariant(xn,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Vn=isProvided(fn)?fn-1:Sn??null,zn=fn??(isProvided(Sn)?Sn+1:null),Zn=An??(Dn?Dn.rotate:null),lr=reactExports.useMemo(()=>{if(!Dn)return null;let Rr=1;const br=Pn??defaultScale;if(Rn||Ft){const Ts=Dn.getViewport({scale:1,rotation:Zn});Rn?Rr=Rn/Ts.width:Ft&&(Rr=Ft/Ts.height)}return br*Rr},[Ft,Dn,Zn,Pn,Rn]);reactExports.useEffect(function(){return()=>{isProvided(Vn)&&ct&&Mn&&Mn(Vn)}},[ct,xn,Vn,Mn]);function hr(){if(on){if(!Dn||!lr)return;on(makePageCallback(Dn,lr))}if(ct&&an){if(!isProvided(Vn)||!Xn.current)return;an(Vn,Xn.current)}}function $n(){Fn&&(warning$1(!1,Fn.toString()),rn&&rn(Fn))}reactExports.useEffect(function(){In({type:"RESET"})},[In,xn,Vn]),reactExports.useEffect(function(){if(!xn||!zn)return;const br=makeCancellablePromise(xn.getPage(zn)),Ts=br;return br.promise.then(Tr=>{In({type:"RESOLVE",value:Tr})}).catch(Tr=>{In({type:"REJECT",error:Tr})}),()=>cancelRunningTask(Ts)},[In,xn,zn]),reactExports.useEffect(()=>{if(Dn!==void 0){if(Dn===!1){$n();return}hr()}},[Dn,lr]);const Un=reactExports.useMemo(()=>isProvided(Vn)&&zn&&isProvided(Zn)&&isProvided(lr)?{_className:ot,canvasBackground:ut,customTextRenderer:Tt,devicePixelRatio:Rt,onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ht,onGetStructTreeError:Jt,onGetStructTreeSuccess:Zt,onGetTextError:tn,onGetTextSuccess:nn,onRenderAnnotationLayerError:pn,onRenderAnnotationLayerSuccess:dn,onRenderError:hn,onRenderSuccess:un,onRenderTextLayerError:En,onRenderTextLayerSuccess:wn,page:Dn,pageIndex:Vn,pageNumber:zn,renderForms:bn,renderTextLayer:Tn,rotate:Zn,scale:lr}:null,[ot,ut,Tt,Rt,Bt,Ht,Jt,Zt,tn,nn,pn,dn,hn,un,En,wn,Dn,Vn,zn,bn,Tn,Zn,lr]),Kn=reactExports.useMemo(()=>makeEventProps(Cn,()=>Dn&&(lr?makePageCallback(Dn,lr):void 0)),[Cn,Dn,lr]),Yn=`${Vn}@${lr}/${Zn}`;function Wn(){switch(mn){case"custom":return invariant(kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(kt,{},`${Yn}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas$1,{canvasRef:dt},`${Yn}_canvas`)}}function cr(){return Tn?jsxRuntimeExports.jsx(TextLayer,{},`${Yn}_text`):null}function or(){return cn?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Yn}_annotations`):null}function ur(){function Rr(Ts){return!!(Ts!=null&&Ts.page)}if(!Rr(Un))throw new Error("page is undefined");const br=typeof ft=="function"?ft(Un):ft;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:Un,children:[Wn(),cr(),or(),br]})}function Cr(){return zn?xn===null||Dn===void 0||Dn===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof zt=="function"?zt():zt}):xn===!1||Dn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof jt=="function"?jt():jt}):ur():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Ut=="function"?Ut():Ut})}return jsxRuntimeExports.jsx("div",{className:clsx(ot,St),"data-page-number":zn,ref:mergeRefs($t,Xn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${lr}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ut||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Kn,children:Cr()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:it,fileTitle:g,partNumber:et,sourceType:ot="magnet",onClose:ct}){const[ut,dt]=reactExports.useState(null),[ft,St]=reactExports.useState(1.2),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[Ft,$t]=reactExports.useState(null),zt=reactExports.useMemo(()=>it?{url:`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(it)}`}:null,[it]);if(!it)return null;reactExports.useEffect(()=>{if(!it)return;let Bt,Ht=0;const Jt=async()=>{try{const Zt=await fetch(zt.url,{method:"HEAD"}),tn=Zt.headers.get("content-type");Zt.ok&&(tn!=null&&tn.includes("pdf"))?Tt(!0):Ht<10?(Ht++,Bt=setTimeout(Jt,1500)):$t("PDF is still being finalized. Try again in a few seconds.")}catch{Ht<10?(Ht++,Bt=setTimeout(Jt,1500)):$t("PDF is still being finalized. Try again shortly.")}};return Jt(),()=>clearTimeout(Bt)},[it]);const Ut=async()=>{try{jt(!0);const Bt=await fetch(zt.url);if(!Bt.ok)throw new Error(`Failed: ${Bt.status} ${Bt.statusText}`);const Ht=await Bt.blob(),Jt=URL.createObjectURL(Ht),Zt=document.createElement("a");if(Zt.href=Jt,ot==="book"){const tn=(g||"Book").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),nn=et?`_Part_${et}`:"";Zt.download=`${tn}${nn}.pdf`}else if(ot==="magnet"){const tn=(g||"Lead_Magnet").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_");Zt.download=`${tn}.pdf`}else Zt.download="document.pdf";document.body.appendChild(Zt),Zt.click(),document.body.removeChild(Zt),URL.revokeObjectURL(Jt),await new Promise(tn=>setTimeout(tn,2e3))}catch(Bt){console.error("Download error:",Bt),alert(" Download failed. Please try again.")}finally{jt(!1)}};return reactExports.useEffect(()=>{if(!it){Tt(!1),$t(null),jt(!1),dt(null),St(1.2);return}Tt(!1),$t(null),jt(!1),dt(null),St(1.2)},[it,ct]),reactExports.useEffect(()=>{const Bt=()=>St(window.innerWidth<640?.8:1.2);return window.addEventListener("resize",Bt),Bt(),()=>window.removeEventListener("resize",Bt)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(ft+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>St(Math.max(ft-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Ut,disabled:Rt,className:`p-2 rounded-lg transition text-white ${Rt?"bg-green-800 cursor-wait":"bg-green-600 hover:bg-green-600/90"}`,title:"Download",children:Rt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$2,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!kt&&!Ft&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),Ft&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:Ft})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${kt?"opacity-100":"opacity-0"}`,children:kt&&!Ft&&jsxRuntimeExports.jsx(Document$1,{file:zt,onLoadSuccess:({numPages:Bt})=>dt(Bt),onLoadError:Bt=>{console.error("PDF load error:",Bt),$t("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(ut||0),(Bt,Ht)=>jsxRuntimeExports.jsx(Page,{pageNumber:Ht+1,scale:ft,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:Math.min(window.innerWidth-40,900)},`page_${Ht+1}`))})})})]})]})}function NewContentModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1);async function dt(){if(!et){y$4.error("Please select a document type.",{position:"top-right",autoClose:2500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"});return}ut(!0),it({contentType:et})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Select Document Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:[{label:"Lead Magnet",value:"lead_magnet",description:"Generate a persuasive, marketing-focused guide designed to attract and convert readers."},{label:"Learning Document",value:"learning_doc",description:"Create a detailed, step-by-step educational document that teaches practical real-world skills."}].map(ft=>jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg border p-3 transition ${et===ft.value?"border-green bg-green/10":"border-gray-700 hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"contentType",value:ft.value,checked:et===ft.value,onChange:St=>ot(St.target.value),className:"accent-green mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-base",children:ft.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ft.description})]})]},ft.value))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:ct,className:"bg-muteGrey px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:ct?"Loading...":"Continue"})]})]})})}function MagnetCardList({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!kt.length)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[kt.map(jt=>{var Ft,$t;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"aspect-[4/3] rounded-lg overflow-hidden border border-gray-700 mb-3",children:jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Cover",className:"object-cover w-full h-full"}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-500 italic",children:"No Preview"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate max-w-[70%]",children:jt.title||"Digital Asset"}),jt.theme?jsxRuntimeExports.jsx("span",{className:"px-2 py-[2px] rounded-full text-[10px]",style:{background:((Ft=themeStyles[jt.theme])==null?void 0:Ft.background)||"#333",color:(($t=themeStyles[jt.theme])==null?void 0:$t.color)||"#fff"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-[10px]",children:"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:jt.status==="completed"?"Completed":jt.status==="pending"?"Building...":jt.status==="failed"?"Failed":"Idle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function PaginationControls({currentPage:it,totalPages:g,onPageChange:et}){return g<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:it===1,onClick:()=>et(it-1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:["Page ",it," of ",g]}),jsxRuntimeExports.jsx("button",{disabled:it===g,onClick:()=>et(it+1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Next"})]})}function SupportTab(){const[it,g]=reactExports.useState(!1),et=[{q:"How do I generate a lead magnet?",a:"Fill out your prompt, upload a logo, add your link, select a theme, and click Generate. Your PDF will be automatically created and ready to download."},{q:"How long does it take?",a:"Most PDFs take between 515 seconds to generate, depending on the number of pages and theme you select."},{q:"Where can I find my generated PDFs?",a:"All completed lead magnets are available in your dashboard under My Lead Magnets. You can view, download, or regenerate them anytime."},{q:"Can I generate more than one lead magnet?",a:"Yes! You can create as many as you want. Simply open the Lead Magnet Creator and repeat the process with a new prompt or design."},{q:"Can I use my own branding?",a:"Absolutely. You can upload your own logo and link to your website or product page. Themes adjust automatically to fit your brand look."},{q:"What are Pro Covers?",a:"Pro Covers is an exclusive upgrade that lets you upload custom cover images for your lead magnets. Your uploaded cover appears as the first page of your PDF, giving your content a professional, branded presentation. In addition to uploading your own designs, Pro Covers also includes access to thousands of royalty-free Unsplash images you can instantly use as backgrounds or full covers. This gives you unlimited creative flexibility without any licensing worriesavailable only with the Pro Covers plan."},{q:"Can I edit or regenerate an existing PDF?",a:"No. Each slot is designed for a single finalized PDF to ensure fair usage and prevent system abuse. Allowing unlimited regenerations could cause performance issues and disrupt other users workflows. If youd like to create a new version, please start a new lead magnet using a fresh slot."},{q:"Do you offer refunds?",a:"Since Cre8tly Studio is a digital service that instantly generates custom content, we do not offer refunds after delivery. However, if you experience a technical issue or duplicate charge, please reach out, well make it right."},{q:"Can I upgrade my plan or buy more credits?",a:"Yes. Additional credits and premium plans are available directly from your account dashboard."},{q:"What if I reach my limit?",a:"If youve hit your plan limit, youll see a message prompting you to upgrade or purchase more credits. Youll never lose access to past PDFs."},{q:"How do I contact support?",a:"You can reach out anytime on our Contact Us page Our team typically responds within 24-48 hours, MondayFriday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),it&&jsxRuntimeExports.jsx("div",{onClick:()=>g(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:ot=>ot.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:et.map((ot,ct)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ot.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:ot.a})]},ct))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/contact",className:"text-green font-medium hover:underline",children:"Need more help? Contact Support "})})]})})]})}function GenerationOverlay({visible:it,progress:g,type:et="lead"}){return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm z-[9999] text-center p-6",children:[jsxRuntimeExports.jsx(motion.h2,{animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white text-xl sm:text-2xl font-semibold mb-4",children:et==="book"?" Generating your book...":" Creating your digital asset..."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-3/4 max-w-md mt-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full h-[3px] bg-gray-800/60 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full 
                bg-gradient-to-r from-white to-[#00E07A]
                transition-all duration-200 ease-linear animate-progressGlowGreen`,style:{width:`${g}%`,boxShadow:`
                    0 0 8px rgba(0,224,122,0.8),
                    0 0 16px rgba(0,224,122,0.7),
                    0 0 28px rgba(0,224,122,0.6),
                    0 0 45px rgba(0,224,122,0.5)
                  `}})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g>=100&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,.9,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute inset-0 bg-white/30"},"complete-flash")}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.4,duration:.6}},className:"text-gray-400 text-sm mt-4 italic",children:et==="book"?"This may take a few minutes  crafting a great story takes time ":"This might take a moment  crafting something powerful "})]},"overlay")})}function DashboardLayout({children:it}){const g=useNavigate(),et=useLocation(),{user:ot,logout:ct}=useAuth(),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(0);reactExports.useEffect(()=>{const Tt=()=>{dt(window.innerWidth>=1024)};return Tt(),window.addEventListener("resize",Tt),()=>window.removeEventListener("resize",Tt)},[]),reactExports.useEffect(()=>{if(!(ot!=null&&ot.id))return;const Tt=async()=>{try{const jt=await axiosInstance.get("/admin/messages/count");St(jt.data.count||0)}catch(jt){console.error("Failed to fetch unread count:",jt)}};Tt();const Rt=setInterval(Tt,3e4);return()=>clearInterval(Rt)},[ot==null?void 0:ot.id]);const kt=[{label:"Digital Products",path:"/dashboard",icon:jsxRuntimeExports.jsx(Package,{size:22})},{label:"Assistant",path:"/books",icon:jsxRuntimeExports.jsx(BookOpen,{size:22})},{label:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings,{size:22})},{label:"Prompt Memory",path:"/prompts",icon:jsxRuntimeExports.jsx(SquareTerminal,{size:22})},{label:"Inbox",path:"/notifications",icon:jsxRuntimeExports.jsx(Inbox$1,{size:22})},{label:"Plans",path:"/plans",icon:jsxRuntimeExports.jsx(DollarSign,{size:22})}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-[#030712] text-white relative",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("aside",{className:`fixed top-0 left-0 w-[120px] h-full bg-gray-900/95 border-r border-gray-800 
       flex flex-col justify-between transform transition-transform duration-300 z-[60]
       ${ut?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between h-full p-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 mb-4",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly",className:"w-16 h-16 mb-2"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-white text-center tracking-wide",children:"Cre8tly Studio"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"lg:hidden text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})})]}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col items-center gap-5 mt-8",children:kt.map(Tt=>{const Rt=et.pathname===Tt.path,jt=(ot==null?void 0:ot.brand_identity_file)&&Tt.path==="/settings";return jsxRuntimeExports.jsx("button",{onClick:()=>{g(Tt.path),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
            ${Rt?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[Tt.icon,Tt.path==="/notifications"&&ft>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-[18px] h-[18px] text-[10px] bg-red-600 text-white font-bold rounded-full shadow-md",children:ft>9?"9+":ft}),jt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full opacity-75 animate-ping"}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full shadow-[0_0_6px_2px_rgba(34,197,94,0.8)]"})]})]})},Tt.path)})})]}),jsxRuntimeExports.jsx("button",{onClick:ct,className:`relative flex items-center justify-center w-12 h-12 mx-auto mb-6 rounded-xl 
             bg-red-600/20 border border-red-600/40 text-red-500 hover:text-white hover:bg-red-600/40 
             hover:shadow-[0_0_12px_rgba(239,68,68,0.4)] transition-all`,title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{size:20})})]})}),ut&&window.innerWidth<1024&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 lg:hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!ut),className:"lg:hidden fixed top-4 right-4 bg-gray-800/80 p-2 rounded-lg text-gray-200 hover:text-white z-50 transition",children:jsxRuntimeExports.jsx(Menu,{size:22})}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-screen overflow-y-auto transition-all duration-300 lg:ml-[120px]",children:it})]})}async function startLeadMagnetEdit(it){var g,et,ot;try{return(await axiosInstance.post(`/edit/${it}/editor/start`)).data}catch(ct){throw console.error(" Error starting lead magnet edit:",((g=ct.response)==null?void 0:g.data)||ct.message),new Error(((ot=(et=ct.response)==null?void 0:et.data)==null?void 0:ot.error)||"Failed to start editor session.")}}async function commitLeadMagnetEdit(it,g,et){var ot,ct,ut;try{return(await axiosInstance.put(`/edit/${it}/editor/commit`,{token:g,updatedHtml:et})).data}catch(dt){throw console.error(" Error committing lead magnet edit:",((ot=dt.response)==null?void 0:ot.data)||dt.message),new Error(((ut=(ct=dt.response)==null?void 0:ct.data)==null?void 0:ut.error)||"Failed to save edited PDF.")}}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$2=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:it}){return["img",mergeAttributes(this.options.HTMLAttributes,it)]},parseMarkdown:(it,g)=>g.createNode("image",{src:it.href,title:it.title,alt:it.text}),renderMarkdown:it=>{var g,et,ot,ct,ut,dt;const ft=(et=(g=it.attrs)==null?void 0:g.src)!=null?et:"",St=(ct=(ot=it.attrs)==null?void 0:ot.alt)!=null?ct:"",kt=(dt=(ut=it.attrs)==null?void 0:ut.title)!=null?dt:"";return kt?`![${St}](${ft} "${kt}")`:`![${St}](${ft})`},addCommands(){return{setImage:it=>({commands:g})=>g.insertContent({type:this.name,attrs:it})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:it=>{const[,,g,et,ot]=it;return{src:et,alt:g,title:ot}}})]}}),index_default=Image$2;const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$1={_global:glob,version:"10.0.8",isBrowser:detectBrowser(),isUnminified:/param/.test((function(it){}).toString()),dblClickWindow:400,getAngle(it){return Konva$1.angleDeg?it*PI_OVER_180:it},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$1.DD.isDragging},isTransforming(){var it,g;return(g=(it=Konva$1.Transformer)===null||it===void 0?void 0:it.isTransforming())!==null&&g!==void 0?g:!1},isDragReady(){return!!Konva$1.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(it){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=it}},_registerNode=it=>{Konva$1[it.prototype.getClassName()]=it};Konva$1._injectGlobal(Konva$1);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const et=this.m;return{x:et[0]*g.x+et[2]*g.y+et[4],y:et[1]*g.x+et[3]*g.y+et[5]}}translate(g,et){return this.m[4]+=this.m[0]*g+this.m[2]*et,this.m[5]+=this.m[1]*g+this.m[3]*et,this}scale(g,et){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=et,this.m[3]*=et,this}rotate(g){const et=Math.cos(g),ot=Math.sin(g),ct=this.m[0]*et+this.m[2]*ot,ut=this.m[1]*et+this.m[3]*ot,dt=this.m[0]*-ot+this.m[2]*et,ft=this.m[1]*-ot+this.m[3]*et;return this.m[0]=ct,this.m[1]=ut,this.m[2]=dt,this.m[3]=ft,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,et){const ot=this.m[0]+this.m[2]*et,ct=this.m[1]+this.m[3]*et,ut=this.m[2]+this.m[0]*g,dt=this.m[3]+this.m[1]*g;return this.m[0]=ot,this.m[1]=ct,this.m[2]=ut,this.m[3]=dt,this}multiply(g){const et=this.m[0]*g.m[0]+this.m[2]*g.m[1],ot=this.m[1]*g.m[0]+this.m[3]*g.m[1],ct=this.m[0]*g.m[2]+this.m[2]*g.m[3],ut=this.m[1]*g.m[2]+this.m[3]*g.m[3],dt=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],ft=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=et,this.m[1]=ot,this.m[2]=ct,this.m[3]=ut,this.m[4]=dt,this.m[5]=ft,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),et=this.m[3]*g,ot=-this.m[1]*g,ct=-this.m[2]*g,ut=this.m[0]*g,dt=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),ft=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=et,this.m[1]=ot,this.m[2]=ct,this.m[3]=ut,this.m[4]=dt,this.m[5]=ft,this}getMatrix(){return this.m}decompose(){const g=this.m[0],et=this.m[1],ot=this.m[2],ct=this.m[3],ut=this.m[4],dt=this.m[5],ft=g*ct-et*ot,St={x:ut,y:dt,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||et!=0){const kt=Math.sqrt(g*g+et*et);St.rotation=et>0?Math.acos(g/kt):-Math.acos(g/kt),St.scaleX=kt,St.scaleY=ft/kt,St.skewX=(g*ot+et*ct)/ft,St.skewY=0}else if(ot!=0||ct!=0){const kt=Math.sqrt(ot*ot+ct*ct);St.rotation=Math.PI/2-(ct>0?Math.acos(-ot/kt):-Math.acos(ot/kt)),St.scaleX=ft/kt,St.scaleY=kt,St.skewX=0,St.skewY=(g*ot+et*ct)/ft}return St.rotation=Util._getRotation(St.rotation),St}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH$1="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[];const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(it){setTimeout(it,60)},Util={_isElement(it){return!!(it&&it.nodeType==1)},_isFunction(it){return!!(it&&it.constructor&&it.call&&it.apply)},_isPlainObject(it){return!!it&&it.constructor===Object},_isArray(it){return Object.prototype.toString.call(it)===OBJECT_ARRAY},_isNumber(it){return Object.prototype.toString.call(it)===OBJECT_NUMBER&&!isNaN(it)&&isFinite(it)},_isString(it){return Object.prototype.toString.call(it)===OBJECT_STRING},_isBoolean(it){return Object.prototype.toString.call(it)===OBJECT_BOOLEAN},isObject(it){return it instanceof Object},isValidSelector(it){if(typeof it!="string")return!1;const g=it[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(it){return it===0||it>0?1:-1},requestAnimFrame(it){animQueue.push(it),animQueue.length===1&&req(function(){const g=animQueue;animQueue=[],g.forEach(function(et){et()})})},createCanvasElement(){ensureBrowser();const it=document.createElement("canvas");try{it.style=it.style||{}}catch{}return it},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(it){for(;it=it.parentNode;)if(it==document)return!0;return!1},_urlToImage(it,g){const et=Util.createImageElement();et.onload=function(){g(et)},et.src=it},_rgbToHex(it,g,et){return((1<<24)+(it<<16)+(g<<8)+et).toString(16).slice(1)},_hexToRgb(it){it=it.replace(HASH$1,EMPTY_STRING$1);const g=parseInt(it,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let it=(Math.random()*16777215<<0).toString(16);for(;it.length<6;)it=ZERO+it;return HASH$1+it},getRGB(it){let g;return it in COLORS?(g=COLORS[it],{r:g[0],g:g[1],b:g[2]}):it[0]===HASH$1?this._hexToRgb(it.substring(1)):it.substr(0,4)===RGB_PAREN?(g=RGB_REGEX.exec(it.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(it){return it=it||"black",Util._namedColorToRBA(it)||Util._hex3ColorToRGBA(it)||Util._hex4ColorToRGBA(it)||Util._hex6ColorToRGBA(it)||Util._hex8ColorToRGBA(it)||Util._rgbColorToRGBA(it)||Util._rgbaColorToRGBA(it)||Util._hslColorToRGBA(it)},_namedColorToRBA(it){const g=COLORS[it.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(it){if(it.indexOf("rgb(")===0){it=it.match(/rgb\(([^)]+)\)/)[1];const g=it.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(it){if(it.indexOf("rgba(")===0){it=it.match(/rgba\(([^)]+)\)/)[1];const g=it.split(/ *, */).map((et,ot)=>et.slice(-1)==="%"?ot===3?parseInt(et)/100:parseInt(et)/100*255:Number(et));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(it){if(it[0]==="#"&&it.length===9)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:parseInt(it.slice(7,9),16)/255}},_hex6ColorToRGBA(it){if(it[0]==="#"&&it.length===7)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:1}},_hex4ColorToRGBA(it){if(it[0]==="#"&&it.length===5)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:parseInt(it[4]+it[4],16)/255}},_hex3ColorToRGBA(it){if(it[0]==="#"&&it.length===4)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:1}},_hslColorToRGBA(it){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(it)){const[g,...et]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(it),ot=Number(et[0])/360,ct=Number(et[1])/100,ut=Number(et[2])/100;let dt,ft,St;if(ct===0)return St=ut*255,{r:Math.round(St),g:Math.round(St),b:Math.round(St),a:1};ut<.5?dt=ut*(1+ct):dt=ut+ct-ut*ct;const kt=2*ut-dt,Tt=[0,0,0];for(let Rt=0;Rt<3;Rt++)ft=ot+1/3*-(Rt-1),ft<0&&ft++,ft>1&&ft--,6*ft<1?St=kt+(dt-kt)*6*ft:2*ft<1?St=dt:3*ft<2?St=kt+(dt-kt)*(2/3-ft)*6:St=kt,Tt[Rt]=St*255;return{r:Math.round(Tt[0]),g:Math.round(Tt[1]),b:Math.round(Tt[2]),a:1}}},haveIntersection(it,g){return!(g.x>it.x+it.width||g.x+g.width<it.x||g.y>it.y+it.height||g.y+g.height<it.y)},cloneObject(it){const g={};for(const et in it)this._isPlainObject(it[et])?g[et]=this.cloneObject(it[et]):this._isArray(it[et])?g[et]=this.cloneArray(it[et]):g[et]=it[et];return g},cloneArray(it){return it.slice(0)},degToRad(it){return it*PI_OVER_DEG180},radToDeg(it){return it*DEG180_OVER_PI},_degToRad(it){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(it)},_radToDeg(it){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(it)},_getRotation(it){return Konva$1.angleDeg?Util.radToDeg(it):it},_capitalize(it){return it.charAt(0).toUpperCase()+it.slice(1)},throw(it){throw new Error(KONVA_ERROR+it)},error(it){console.error(KONVA_ERROR+it)},warn(it){Konva$1.showWarnings&&console.warn(KONVA_WARNING+it)},each(it,g){for(const et in it)g(et,it[et])},_inRange(it,g,et){return g<=it&&it<et},_getProjectionToSegment(it,g,et,ot,ct,ut){let dt,ft,St;const kt=(it-et)*(it-et)+(g-ot)*(g-ot);if(kt==0)dt=it,ft=g,St=(ct-et)*(ct-et)+(ut-ot)*(ut-ot);else{const Tt=((ct-it)*(et-it)+(ut-g)*(ot-g))/kt;Tt<0?(dt=it,ft=g,St=(it-ct)*(it-ct)+(g-ut)*(g-ut)):Tt>1?(dt=et,ft=ot,St=(et-ct)*(et-ct)+(ot-ut)*(ot-ut)):(dt=it+Tt*(et-it),ft=g+Tt*(ot-g),St=(dt-ct)*(dt-ct)+(ft-ut)*(ft-ut))}return[dt,ft,St]},_getProjectionToLine(it,g,et){const ot=Util.cloneObject(it);let ct=Number.MAX_VALUE;return g.forEach(function(ut,dt){if(!et&&dt===g.length-1)return;const ft=g[(dt+1)%g.length],St=Util._getProjectionToSegment(ut.x,ut.y,ft.x,ft.y,it.x,it.y),kt=St[0],Tt=St[1],Rt=St[2];Rt<ct&&(ot.x=kt,ot.y=Tt,ct=Rt)}),ot},_prepareArrayForTween(it,g,et){const ot=[],ct=[];if(it.length>g.length){const dt=g;g=it,it=dt}for(let dt=0;dt<it.length;dt+=2)ot.push({x:it[dt],y:it[dt+1]});for(let dt=0;dt<g.length;dt+=2)ct.push({x:g[dt],y:g[dt+1]});const ut=[];return ct.forEach(function(dt){const ft=Util._getProjectionToLine(dt,ot,et);ut.push(ft.x),ut.push(ft.y)}),ut},_prepareToStringify(it){let g;it.visitedByCircularReferenceRemoval=!0;for(const et in it)if(it.hasOwnProperty(et)&&it[et]&&typeof it[et]=="object"){if(g=Object.getOwnPropertyDescriptor(it,et),it[et].visitedByCircularReferenceRemoval||Util._isElement(it[et]))if(g.configurable)delete it[et];else return null;else if(Util._prepareToStringify(it[et])===null)if(g.configurable)delete it[et];else return null}return delete it.visitedByCircularReferenceRemoval,it},_assign(it,g){for(const et in g)it[et]=g[et];return it},_getFirstPointerId(it){return it.touches?it.changedTouches[0].identifier:it.pointerId||999},releaseCanvas(...it){Konva$1.releaseCanvasOnDestroy&&it.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(it,g,et,ot){let ct=g<0?g:0,ut=et<0?et:0;g=Math.abs(g),et=Math.abs(et);let dt=0,ft=0,St=0,kt=0;typeof ot=="number"?dt=ft=St=kt=Math.min(ot,g/2,et/2):(dt=Math.min(ot[0]||0,g/2,et/2),ft=Math.min(ot[1]||0,g/2,et/2),kt=Math.min(ot[2]||0,g/2,et/2),St=Math.min(ot[3]||0,g/2,et/2)),it.moveTo(ct+dt,ut),it.lineTo(ct+g-ft,ut),it.arc(ct+g-ft,ut+ft,ft,Math.PI*3/2,0,!1),it.lineTo(ct+g,ut+et-kt),it.arc(ct+g-kt,ut+et-kt,kt,0,Math.PI/2,!1),it.lineTo(ct+St,ut+et),it.arc(ct+St,ut+et-St,St,Math.PI/2,Math.PI,!1),it.lineTo(ct,ut+dt),it.arc(ct+dt,ut+dt,dt,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(it,g,et,ot,ct){ot=Math.abs(ot);for(let ut=0;ut<et;ut++){const dt=g[(ut-1+et)%et],ft=g[ut],St=g[(ut+1)%et],kt={x:ft.x-dt.x,y:ft.y-dt.y},Tt={x:St.x-ft.x,y:St.y-ft.y},Rt=Math.hypot(kt.x,kt.y),jt=Math.hypot(Tt.x,Tt.y);let Ft;typeof ct=="number"?Ft=ct:Ft=ut<ct.length?ct[ut]:0,Ft=ot*Math.cos(Math.PI/et)*Math.min(1,Ft/ot*2);const zt={x:kt.x/Rt,y:kt.y/Rt},Ut={x:Tt.x/jt,y:Tt.y/jt},Bt={x:ft.x-zt.x*Ft,y:ft.y-zt.y*Ft},Ht={x:ft.x+Ut.x*Ft,y:ft.y+Ut.y*Ft};ut===0?it.moveTo(Bt.x,Bt.y):it.lineTo(Bt.x,Bt.y),it.arcTo(ft.x,ft.y,Ht.x,Ht.y,Ft)}}};function simplifyArray(it){const g=[],et=it.length,ot=Util;for(let ct=0;ct<et;ct++){let ut=it[ct];ot._isNumber(ut)?ut=Math.round(ut*1e3)/1e3:ot._isString(ut)||(ut=ut+""),g.push(ut)}return g}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const g=Util.createCanvasElement().getContext("2d");return g?!!g&&"filter"in g:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}class Context{constructor(g){this.canvas=g,Konva$1.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,et){let ot=this.traceArr,ct=ot.length,ut="",dt,ft,St,kt;for(dt=0;dt<ct;dt++)ft=ot[dt],St=ft.method,St?(kt=ft.args,ut+=St,g?ut+=DOUBLE_PAREN:Util._isArray(kt[0])?ut+=OPEN_PAREN_BRACKET+kt.join(COMMA)+CLOSE_BRACKET_PAREN:(et&&(kt=kt.map(Tt=>typeof Tt=="number"?Math.floor(Tt):Tt)),ut+=OPEN_PAREN+kt.join(COMMA)+CLOSE_PAREN)):(ut+=ft.property,g||(ut+=EQUALS+ft.val)),ut+=SEMICOLON;return ut}clearTrace(){this.traceArr=[]}_trace(g){let et=this.traceArr,ot;et.push(g),ot=et.length,ot>=traceArrMax&&et.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const et=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,et.getWidth()/et.pixelRatio,et.getHeight()/et.pixelRatio)}_applyLineCap(g){const et=g.attrs.lineCap;et&&this.setAttr("lineCap",et)}_applyOpacity(g){const et=g.getAbsoluteOpacity();et!==1&&this.setAttr("globalAlpha",et)}_applyLineJoin(g){const et=g.attrs.lineJoin;et&&this.setAttr("lineJoin",et)}_applyMiterLimit(g){const et=g.attrs.miterLimit;et!=null&&this.setAttr("miterLimit",et)}setAttr(g,et){this._context[g]=et}arc(g,et,ot,ct,ut,dt){this._context.arc(g,et,ot,ct,ut,dt)}arcTo(g,et,ot,ct,ut){this._context.arcTo(g,et,ot,ct,ut)}beginPath(){this._context.beginPath()}bezierCurveTo(g,et,ot,ct,ut,dt){this._context.bezierCurveTo(g,et,ot,ct,ut,dt)}clearRect(g,et,ot,ct){this._context.clearRect(g,et,ot,ct)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,et){const ot=arguments;if(ot.length===2)return this._context.createImageData(g,et);if(ot.length===1)return this._context.createImageData(g)}createLinearGradient(g,et,ot,ct){return this._context.createLinearGradient(g,et,ot,ct)}createPattern(g,et){return this._context.createPattern(g,et)}createRadialGradient(g,et,ot,ct,ut,dt){return this._context.createRadialGradient(g,et,ot,ct,ut,dt)}drawImage(g,et,ot,ct,ut,dt,ft,St,kt){const Tt=arguments,Rt=this._context;Tt.length===3?Rt.drawImage(g,et,ot):Tt.length===5?Rt.drawImage(g,et,ot,ct,ut):Tt.length===9&&Rt.drawImage(g,et,ot,ct,ut,dt,ft,St,kt)}ellipse(g,et,ot,ct,ut,dt,ft,St){this._context.ellipse(g,et,ot,ct,ut,dt,ft,St)}isPointInPath(g,et,ot,ct){return ot?this._context.isPointInPath(ot,g,et,ct):this._context.isPointInPath(g,et,ct)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,et,ot,ct){this._context.fillRect(g,et,ot,ct)}strokeRect(g,et,ot,ct){this._context.strokeRect(g,et,ot,ct)}fillText(g,et,ot,ct){ct?this._context.fillText(g,et,ot,ct):this._context.fillText(g,et,ot)}measureText(g){return this._context.measureText(g)}getImageData(g,et,ot,ct){return this._context.getImageData(g,et,ot,ct)}lineTo(g,et){this._context.lineTo(g,et)}moveTo(g,et){this._context.moveTo(g,et)}rect(g,et,ot,ct){this._context.rect(g,et,ot,ct)}roundRect(g,et,ot,ct,ut){this._context.roundRect(g,et,ot,ct,ut)}putImageData(g,et,ot){this._context.putImageData(g,et,ot)}quadraticCurveTo(g,et,ot,ct){this._context.quadraticCurveTo(g,et,ot,ct)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,et){this._context.scale(g,et)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,et,ot,ct,ut,dt){this._context.setTransform(g,et,ot,ct,ut,dt)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,et,ot,ct){this._context.strokeText(g,et,ot,ct)}transform(g,et,ot,ct,ut,dt){this._context.transform(g,et,ot,ct,ut,dt)}translate(g,et){this._context.translate(g,et)}_enableTrace(){let g=this,et=CONTEXT_METHODS.length,ot=this.setAttr,ct,ut;const dt=function(ft){let St=g[ft],kt;g[ft]=function(){return ut=simplifyArray(Array.prototype.slice.call(arguments,0)),kt=St.apply(g,arguments),g._trace({method:ft,args:ut}),kt}};for(ct=0;ct<et;ct++)dt(CONTEXT_METHODS[ct]);g.setAttr=function(){ot.apply(g,arguments);const ft=arguments[0];let St=arguments[1];(ft==="shadowOffsetX"||ft==="shadowOffsetY"||ft==="shadowBlur")&&(St=St/this.canvas.getPixelRatio()),g._trace({property:ft,val:St})}}_applyGlobalCompositeOperation(g){const et=g.attrs.globalCompositeOperation;!et||et==="source-over"||this.setAttr("globalCompositeOperation",et)}}CONTEXT_PROPERTIES.forEach(function(it){Object.defineProperty(Context.prototype,it,{get(){return this._context[it]},set(g){this._context[it]=g}})});class SceneContext extends Context{constructor(g,{willReadFrequently:et=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:et})}_fillColor(g){const et=g.fill();this.setAttr("fillStyle",et),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const et=g._getLinearGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fillRadialGradient(g){const et=g._getRadialGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fill(g){const et=g.fill(),ot=g.getFillPriority();if(et&&ot==="color"){this._fillColor(g);return}const ct=g.getFillPatternImage();if(ct&&ot==="pattern"){this._fillPattern(g);return}const ut=g.getFillLinearGradientColorStops();if(ut&&ot==="linear-gradient"){this._fillLinearGradient(g);return}const dt=g.getFillRadialGradientColorStops();if(dt&&ot==="radial-gradient"){this._fillRadialGradient(g);return}et?this._fillColor(g):ct?this._fillPattern(g):ut?this._fillLinearGradient(g):dt&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const et=g.getStrokeLinearGradientStartPoint(),ot=g.getStrokeLinearGradientEndPoint(),ct=g.getStrokeLinearGradientColorStops(),ut=this.createLinearGradient(et.x,et.y,ot.x,ot.y);if(ct){for(let dt=0;dt<ct.length;dt+=2)ut.addColorStop(ct[dt],ct[dt+1]);this.setAttr("strokeStyle",ut)}}_stroke(g){const et=g.dash(),ot=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!ot){this.save();const ut=this.getCanvas().getPixelRatio();this.setTransform(ut,0,0,ut,0,0)}this._applyLineCap(g),et&&g.dashEnabled()&&(this.setLineDash(et),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),ot||this.restore()}}_applyShadow(g){var et,ot,ct;const ut=(et=g.getShadowRGBA())!==null&&et!==void 0?et:"black",dt=(ot=g.getShadowBlur())!==null&&ot!==void 0?ot:5,ft=(ct=g.getShadowOffset())!==null&&ct!==void 0?ct:{x:0,y:0},St=g.getAbsoluteScale(),kt=this.canvas.getPixelRatio(),Tt=St.x*kt,Rt=St.y*kt;this.setAttr("shadowColor",ut),this.setAttr("shadowBlur",dt*Math.min(Math.abs(Tt),Math.abs(Rt))),this.setAttr("shadowOffsetX",ft.x*Tt),this.setAttr("shadowOffsetY",ft.y*Rt)}}class HitContext extends Context{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const et=g.getStrokeScaleEnabled();if(!et){this.save();const ut=this.getCanvas().getPixelRatio();this.setTransform(ut,0,0,ut,0,0)}this._applyLineCap(g);const ot=g.hitStrokeWidth(),ct=ot==="auto"?g.strokeWidth():ot;this.setAttr("lineWidth",ct),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),et||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const it=Util.createCanvasElement(),g=it.getContext("2d");return _pixelRatio=function(){const et=Konva$1._global.devicePixelRatio||1,ot=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return et/ot}(),Util.releaseCanvas(it),_pixelRatio}class Canvas{constructor(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const ot=(g||{}).pixelRatio||Konva$1.pixelRatio||getDevicePixelRatio();this.pixelRatio=ot,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(g){const et=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/et,this.getHeight()/et)}setWidth(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}setHeight(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}getWidth(){return this.width}getHeight(){return this.height}setSize(g,et){this.setWidth(g||0),this.setHeight(et||0)}toDataURL(g,et){try{return this._canvas.toDataURL(g,et)}catch{try{return this._canvas.toDataURL()}catch(ct){return Util.error("Unable to get data URL. "+ct.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(g={width:0,height:0,willReadFrequently:!1}){super(g),this.context=new SceneContext(this,{willReadFrequently:g.willReadFrequently}),this.setSize(g.width,g.height)}}function isCanvasFarblingActive(){const it=Util.createCanvasElement();it.width=1,it.height=1;const g=it.getContext("2d",{willReadFrequently:!0});g.clearRect(0,0,1,1),g.fillStyle="rgba(255,0,255,1)",g.fillRect(0,0,1,1);const et=g.getImageData(0,0,1,1).data;return!(et[0]===255&&et[1]===0&&et[2]===255&&et[3]===255)}function isBraveBrowser(){var it,g;return typeof navigator>"u"?!1:(g=(it=navigator.brave)===null||it===void 0?void 0:it.isBrave())!==null&&g!==void 0?g:!1}let warned=!1;function checkHitCanvasSupport(){return isBraveBrowser()&&isCanvasFarblingActive()&&!warned&&(warned=!0,Util.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),isBraveBrowser()&&isCanvasFarblingActive()}class HitCanvas extends Canvas{constructor(g={width:0,height:0}){super(g),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(g.width,g.height),checkHitCanvasSupport()}}const DD={get isDragging(){let it=!1;return DD._dragElements.forEach(g=>{g.dragStatus==="dragging"&&(it=!0)}),it},justDragged:!1,get node(){let it;return DD._dragElements.forEach(g=>{it=g.node}),it},_dragElements:new Map,_drag(it){const g=[];DD._dragElements.forEach((et,ot)=>{const{node:ct}=et,ut=ct.getStage();ut.setPointersPositions(it),et.pointerId===void 0&&(et.pointerId=Util._getFirstPointerId(it));const dt=ut._changedPointerPositions.find(ft=>ft.id===et.pointerId);if(dt){if(et.dragStatus!=="dragging"){const ft=ct.dragDistance();if(Math.max(Math.abs(dt.x-et.startPointerPos.x),Math.abs(dt.y-et.startPointerPos.y))<ft||(ct.startDrag({evt:it}),!ct.isDragging()))return}ct._setDragPosition(it,et),g.push(ct)}}),g.forEach(et=>{et.fire("dragmove",{type:"dragmove",target:et,evt:it},!0)})},_endDragBefore(it){const g=[];DD._dragElements.forEach(et=>{const{node:ot}=et,ct=ot.getStage();if(it&&ct.setPointersPositions(it),!ct._changedPointerPositions.find(ft=>ft.id===et.pointerId))return;(et.dragStatus==="dragging"||et.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$1._mouseListenClick=!1,Konva$1._touchListenClick=!1,Konva$1._pointerListenClick=!1,et.dragStatus="stopped");const dt=et.node.getLayer()||et.node instanceof Konva$1.Stage&&et.node;dt&&g.indexOf(dt)===-1&&g.push(dt)}),g.forEach(et=>{et.draw()})},_endDragAfter(it){DD._dragElements.forEach((g,et)=>{g.dragStatus==="stopped"&&g.node.fire("dragend",{type:"dragend",target:g.node,evt:it},!0),g.dragStatus!=="dragging"&&DD._dragElements.delete(et)})}};Konva$1.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(it){return Util._isString(it)?'"'+it+'"':Object.prototype.toString.call(it)==="[object Number]"||Util._isBoolean(it)?it:Object.prototype.toString.call(it)}function RGBComponent(it){return it>255?255:it<0?0:Math.round(it)}function getNumberValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number.'),it}}function getNumberOrArrayOfNumbersValidator(it){if(Konva$1.isUnminified)return function(g,et){let ot=Util._isNumber(g),ct=Util._isArray(g)&&g.length==it;return!ot&&!ct&&Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be a number or Array<number>('+it+")"),g}}function getNumberOrAutoValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isNumber(it)||it==="auto"||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number or "auto".'),it}}function getStringValidator(){if(Konva$1.isUnminified)return function(it,g){return Util._isString(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string.'),it}}function getStringOrGradientValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Util._isString(it),ot=Object.prototype.toString.call(it)==="[object CanvasGradient]"||it&&it.addColorStop;return et||ot||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string or a native gradient.'),it}}function getNumberArrayValidator(){if(Konva$1.isUnminified)return function(it,g){const et=Int8Array?Object.getPrototypeOf(Int8Array):null;return et&&it instanceof et||(Util._isArray(it)?it.forEach(function(ot){Util._isNumber(ot)||Util.warn('"'+g+'" attribute has non numeric element '+ot+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a array of numbers.')),it}}function getBooleanValidator(){if(Konva$1.isUnminified)return function(it,g){return it===!0||it===!1||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a boolean.'),it}}function getComponentValidator(it){if(Konva$1.isUnminified)return function(g,et){return g==null||Util.isObject(g)||Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be an object with properties '+it),g}}const GET="get",SET$1="set",Factory={addGetterSetter(it,g,et,ot,ct){Factory.addGetter(it,g,et),Factory.addSetter(it,g,ot,ct),Factory.addOverloadedGetterSetter(it,g)},addGetter(it,g,et){const ot=GET+Util._capitalize(g);it.prototype[ot]=it.prototype[ot]||function(){const ct=this.attrs[g];return ct===void 0?et:ct}},addSetter(it,g,et,ot){const ct=SET$1+Util._capitalize(g);it.prototype[ct]||Factory.overWriteSetter(it,g,et,ot)},overWriteSetter(it,g,et,ot){const ct=SET$1+Util._capitalize(g);it.prototype[ct]=function(ut){return et&&ut!==void 0&&ut!==null&&(ut=et.call(this,ut,g)),this._setAttr(g,ut),ot&&ot.call(this),this}},addComponentsGetterSetter(it,g,et,ot,ct){const ut=et.length,dt=Util._capitalize,ft=GET+dt(g),St=SET$1+dt(g);it.prototype[ft]=function(){const Tt={};for(let Rt=0;Rt<ut;Rt++){const jt=et[Rt];Tt[jt]=this.getAttr(g+dt(jt))}return Tt};const kt=getComponentValidator(et);it.prototype[St]=function(Tt){const Rt=this.attrs[g];ot&&(Tt=ot.call(this,Tt,g)),kt&&kt.call(this,Tt,g);for(const jt in Tt)Tt.hasOwnProperty(jt)&&this._setAttr(g+dt(jt),Tt[jt]);return Tt||et.forEach(jt=>{this._setAttr(g+dt(jt),void 0)}),this._fireChangeEvent(g,Rt,Tt),ct&&ct.call(this),this},Factory.addOverloadedGetterSetter(it,g)},addOverloadedGetterSetter(it,g){const et=Util._capitalize(g),ot=SET$1+et,ct=GET+et;it.prototype[g]=function(){return arguments.length?(this[ot](arguments[0]),this):this[ct]()}},addDeprecatedGetterSetter(it,g,et,ot){Util.error("Adding deprecated "+g);const ct=GET+Util._capitalize(g),ut=g+" property is deprecated and will be removed soon. Look at Konva change log for more information.";it.prototype[ct]=function(){Util.error(ut);const dt=this.attrs[g];return dt===void 0?et:dt},Factory.addSetter(it,g,ot,function(){Util.error(ut)}),Factory.addOverloadedGetterSetter(it,g)},backCompat(it,g){Util.each(g,function(et,ot){const ct=it.prototype[ot],ut=GET+Util._capitalize(et),dt=SET$1+Util._capitalize(et);function ft(){ct.apply(this,arguments),Util.error('"'+et+'" method is deprecated and will be removed soon. Use ""'+ot+'" instead.')}it.prototype[et]=ft,it.prototype[ut]=ft,it.prototype[dt]=ft})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(it){const g=/(\w+)\(([^)]+)\)/g;let et;for(;(et=g.exec(it))!==null;){const[,ot,ct]=et;switch(ot){case"blur":{const ut=parseFloat(ct.replace("px",""));return function(dt){this.blurRadius(ut*.5);const ft=Konva$1.Filters;ft&&ft.Blur&&ft.Blur.call(this,dt)}}case"brightness":{const ut=ct.includes("%")?parseFloat(ct)/100:parseFloat(ct);return function(dt){this.brightness(ut);const ft=Konva$1.Filters;ft&&ft.Brightness&&ft.Brightness.call(this,dt)}}case"contrast":{const ut=parseFloat(ct);return function(dt){const ft=100*(Math.sqrt(ut)-1);this.contrast(ft);const St=Konva$1.Filters;St&&St.Contrast&&St.Contrast.call(this,dt)}}case"grayscale":return function(ut){const dt=Konva$1.Filters;dt&&dt.Grayscale&&dt.Grayscale.call(this,ut)};case"sepia":return function(ut){const dt=Konva$1.Filters;dt&&dt.Sepia&&dt.Sepia.call(this,ut)};case"invert":return function(ut){const dt=Konva$1.Filters;dt&&dt.Invert&&dt.Invert.call(this,ut)};default:Util.warn(`CSS filter "${ot}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class zC{constructor(g){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(g),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(g){(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&this._cache.get(g)?this._cache.get(g).dirty=!0:g?this._cache.delete(g):this._cache.clear()}_getCache(g,et){let ot=this._cache.get(g);return(ot===void 0||(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&ot.dirty===!0)&&(ot=et.call(this),this._cache.set(g,ot)),ot}_calculate(g,et,ot){if(!this._attachedDepsListeners.get(g)){const ct=et.map(ut=>ut+"Change.konva").join(SPACE$1);this.on(ct,()=>{this._clearCache(g)}),this._attachedDepsListeners.set(g,!0)}return this._getCache(g,ot)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(g){this._clearCache(g),g===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:g,filter:et,hit:ot,buffer:ct}=this._cache.get(CANVAS);Util.releaseCanvas(g,et,ot,ct),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(g){const et=g||{};let ot={};(et.x===void 0||et.y===void 0||et.width===void 0||et.height===void 0)&&(ot=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let ct=Math.ceil(et.width||ot.width),ut=Math.ceil(et.height||ot.height),dt=et.pixelRatio,ft=et.x===void 0?Math.floor(ot.x):et.x,St=et.y===void 0?Math.floor(ot.y):et.y,kt=et.offset||0,Tt=et.drawBorder||!1,Rt=et.hitCanvasPixelRatio||1;if(!ct||!ut){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const jt=Math.abs(Math.round(ot.x)-ft)>.5?1:0,Ft=Math.abs(Math.round(ot.y)-St)>.5?1:0;ct+=kt*2+jt,ut+=kt*2+Ft,ft-=kt,St-=kt;const $t=new SceneCanvas({pixelRatio:dt,width:ct,height:ut}),zt=new SceneCanvas({pixelRatio:dt,width:0,height:0,willReadFrequently:!0}),Ut=new HitCanvas({pixelRatio:Rt,width:ct,height:ut}),Bt=$t.getContext(),Ht=Ut.getContext(),Jt=new SceneCanvas({width:$t.width/$t.pixelRatio+Math.abs(ft),height:$t.height/$t.pixelRatio+Math.abs(St),pixelRatio:$t.pixelRatio}),Zt=Jt.getContext();return Ut.isCache=!0,$t.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,et.imageSmoothingEnabled===!1&&($t.getContext()._context.imageSmoothingEnabled=!1,zt.getContext()._context.imageSmoothingEnabled=!1),Bt.save(),Ht.save(),Zt.save(),Bt.translate(-ft,-St),Ht.translate(-ft,-St),Zt.translate(-ft,-St),Jt.x=ft,Jt.y=St,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene($t,this,Jt),this.drawHit(Ut,this),this._isUnderCache=!1,Bt.restore(),Ht.restore(),Tt&&(Bt.save(),Bt.beginPath(),Bt.rect(0,0,ct,ut),Bt.closePath(),Bt.setAttr("strokeStyle","red"),Bt.setAttr("lineWidth",5),Bt.stroke(),Bt.restore()),this._cache.set(CANVAS,{scene:$t,filter:zt,hit:Ut,buffer:Jt,x:ft,y:St}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(g){throw new Error('abstract "getClientRect" method call')}_transformedRect(g,et){const ot=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}];let ct=1/0,ut=1/0,dt=-1/0,ft=-1/0;const St=this.getAbsoluteTransform(et);return ot.forEach(function(kt){const Tt=St.point(kt);ct===void 0&&(ct=dt=Tt.x,ut=ft=Tt.y),ct=Math.min(ct,Tt.x),ut=Math.min(ut,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),{x:ct,y:ut,width:dt-ct,height:ft-ut}}_drawCachedSceneCanvas(g){g.save(),g._applyOpacity(this),g._applyGlobalCompositeOperation(this);const et=this._getCanvasCache();g.translate(et.x,et.y);const ot=this._getCachedSceneCanvas(),ct=ot.pixelRatio;g.drawImage(ot._canvas,0,0,ot.width/ct,ot.height/ct),g.restore()}_drawCachedHitCanvas(g){const et=this._getCanvasCache(),ot=et.hit;g.save(),g.translate(et.x,et.y),g.drawImage(ot._canvas,0,0,ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),g.restore()}_getCachedSceneCanvas(){let g=this.filters(),et=this._getCanvasCache(),ot=et.scene,ct=et.filter,ut=ct.getContext(),dt,ft,St,kt;if(!g||g.length===0)return ot;if(this._filterUpToDate)return ct;let Tt=!0;for(let jt=0;jt<g.length;jt++)if(typeof g[jt]=="string"&&isCSSFiltersSupported(),typeof g[jt]!="string"||!isCSSFiltersSupported()){Tt=!1;break}const Rt=ot.pixelRatio;if(ct.setSize(ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),Tt){const jt=g.join(" ");return ut.save(),ut.setAttr("filter",jt),ut.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ut.restore(),this._filterUpToDate=!0,ct}try{for(dt=g.length,ut.clear(),ut.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ft=ut.getImageData(0,0,ct.getWidth(),ct.getHeight()),St=0;St<dt;St++)kt=g[St],typeof kt=="string"&&(kt=parseCSSFilters(kt)),kt.call(this,ft),ut.putImageData(ft,0,0)}catch(jt){Util.error("Unable to apply filter. "+jt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,ct}on(g,et){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const ot=g.split(SPACE$1);for(let ct=0;ct<ot.length;ct++){const dt=ot[ct].split("."),ft=dt[0],St=dt[1]||"";this.eventListeners[ft]||(this.eventListeners[ft]=[]),this.eventListeners[ft].push({name:St,handler:et})}return this}off(g,et){let ot=(g||"").split(SPACE$1),ct=ot.length,ut,dt,ft,St,kt,Tt;if(this._cache&&this._cache.delete(ALL_LISTENERS),!g)for(dt in this.eventListeners)this._off(dt);for(ut=0;ut<ct;ut++)if(ft=ot[ut],St=ft.split("."),kt=St[0],Tt=St[1],kt)this.eventListeners[kt]&&this._off(kt,Tt,et);else for(dt in this.eventListeners)this._off(dt,Tt,et);return this}dispatchEvent(g){const et={target:this,type:g.type,evt:g};return this.fire(g.type,et),this}addEventListener(g,et){return this.on(g,function(ot){et.call(this,ot.evt)}),this}removeEventListener(g){return this.off(g),this}_delegate(g,et,ot){const ct=this;this.on(g,function(ut){const dt=ut.target.findAncestors(et,!0,ct);for(let ft=0;ft<dt.length;ft++)ut=Util.cloneObject(ut),ut.currentTarget=dt[ft],ot.call(dt[ft],ut)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const g=this.getParent();g&&g.children&&(g.children.splice(this.index,1),g._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(g){const et="get"+Util._capitalize(g);return Util._isFunction(this[et])?this[et]():this.attrs[g]}getAncestors(){let g=this.getParent(),et=[];for(;g;)et.push(g),g=g.getParent();return et}getAttrs(){return this.attrs||{}}setAttrs(g){return this._batchTransformChanges(()=>{let et,ot;if(!g)return this;for(et in g)et!==CHILDREN&&(ot=SET+Util._capitalize(et),Util._isFunction(this[ot])?this[ot](g[et]):this._setAttr(et,g[et]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(g){if(!this.listening())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isListening(g):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(g){if(!this.visible())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isVisible(g):!0}shouldDrawHit(g,et=!1){if(g)return this._isVisible(g)&&this._isListening(g);const ot=this.getLayer();let ct=!1;DD._dragElements.forEach(dt=>{dt.dragStatus==="dragging"&&(dt.node.nodeType==="Stage"||dt.node.getLayer()===ot)&&(ct=!0)});const ut=!et&&!Konva$1.hitOnDragEnabled&&(ct||Konva$1.isTransforming());return this.isListening()&&this.isVisible()&&!ut}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let g=this.getDepth(),et=this,ot=0,ct,ut,dt,ft;function St(Tt){for(ct=[],ut=Tt.length,dt=0;dt<ut;dt++)ft=Tt[dt],ot++,ft.nodeType!==SHAPE&&(ct=ct.concat(ft.getChildren().slice())),ft._id===et._id&&(dt=ut);ct.length>0&&ct[0].getDepth()<=g&&St(ct)}const kt=this.getStage();return et.nodeType!==UPPER_STAGE&&kt&&St(kt.getChildren()),ot}getDepth(){let g=0,et=this.parent;for(;et;)g++,et=et.parent;return g}_batchTransformChanges(g){this._batchingTransformChange=!0,g(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(g){return this._batchTransformChanges(()=>{this.x(g.x),this.y(g.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const g=this.getStage();if(!g)return null;const et=g.getPointerPosition();if(!et)return null;const ot=this.getAbsoluteTransform().copy();return ot.invert(),ot.point(et)}getAbsolutePosition(g){let et=!1,ot=this.parent;for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.parent}et&&!g&&(g=!0);const ct=this.getAbsoluteTransform(g).getMatrix(),ut=new Transform,dt=this.offset();return ut.m=ct.slice(),ut.translate(dt.x,dt.y),ut.getTranslation()}setAbsolutePosition(g){const{x:et,y:ot,...ct}=this._clearTransform();this.attrs.x=et,this.attrs.y=ot,this._clearCache(TRANSFORM);const ut=this._getAbsoluteTransform().copy();return ut.invert(),ut.translate(g.x,g.y),g={x:this.attrs.x+ut.getTranslation().x,y:this.attrs.y+ut.getTranslation().y},this._setTransform(ct),this.setPosition({x:g.x,y:g.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(g){let et;for(et in g)this.attrs[et]=g[et]}_clearTransform(){const g={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,g}move(g){let et=g.x,ot=g.y,ct=this.x(),ut=this.y();return et!==void 0&&(ct+=et),ot!==void 0&&(ut+=ot),this.setPosition({x:ct,y:ut}),this}_eachAncestorReverse(g,et){let ot=[],ct=this.getParent(),ut,dt;if(!(et&&et._id===this._id)){for(ot.unshift(this);ct&&(!et||ct._id!==et._id);)ot.unshift(ct),ct=ct.parent;for(ut=ot.length,dt=0;dt<ut;dt++)g(ot[dt])}}rotate(g){return this.rotation(this.rotation()+g),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.splice(g+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.splice(g-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(g){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(g<0||g>=this.parent.children.length)&&Util.warn("Unexpected value "+g+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const et=this.index;return this.parent.children.splice(et,1),this.parent.children.splice(g,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let g=this.opacity();const et=this.getParent();return et&&!et._isUnderCache&&(g*=et.getAbsoluteOpacity()),g}moveTo(g){return this.getParent()!==g&&(this._remove(),g.add(this)),this}toObject(){let g=this.getAttrs(),et,ot,ct,ut,dt;const ft={attrs:{},className:this.getClassName()};for(et in g)ot=g[et],dt=Util.isObject(ot)&&!Util._isPlainObject(ot)&&!Util._isArray(ot),!dt&&(ct=typeof this[et]=="function"&&this[et],delete g[et],ut=ct?ct.call(this):null,g[et]=ot,ut!==ot&&(ft.attrs[et]=ot));return Util._prepareToStringify(ft)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(g,et,ot){const ct=[];et&&this._isMatch(g)&&ct.push(this);let ut=this.parent;for(;ut;){if(ut===ot)return ct;ut._isMatch(g)&&ct.push(ut),ut=ut.parent}return ct}isAncestorOf(g){return!1}findAncestor(g,et,ot){return this.findAncestors(g,et,ot)[0]}_isMatch(g){if(!g)return!1;if(typeof g=="function")return g(this);let et=g.replace(/ /g,"").split(","),ot=et.length,ct,ut;for(ct=0;ct<ot;ct++)if(ut=et[ct],Util.isValidSelector(ut)||(Util.warn('Selector "'+ut+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),ut.charAt(0)==="#"){if(this.id()===ut.slice(1))return!0}else if(ut.charAt(0)==="."){if(this.hasName(ut.slice(1)))return!0}else if(this.className===ut||this.nodeType===ut)return!0;return!1}getLayer(){const g=this.getParent();return g?g.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const g=this.getParent();return g?g.getStage():null}fire(g,et={},ot){return et.target=et.target||this,ot?this._fireAndBubble(g,et):this._fire(g,et),this}getAbsoluteTransform(g){return g?this._getAbsoluteTransform(g):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(g){let et;if(g)return et=new Transform,this._eachAncestorReverse(function(ot){const ct=ot.transformsEnabled();ct==="all"?et.multiply(ot.getTransform()):ct==="position"&&et.translate(ot.x()-ot.offsetX(),ot.y()-ot.offsetY())},g),et;{et=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(et):et.reset();const ot=this.transformsEnabled();if(ot==="all")et.multiply(this.getTransform());else if(ot==="position"){const ct=this.attrs.x||0,ut=this.attrs.y||0,dt=this.attrs.offsetX||0,ft=this.attrs.offsetY||0;et.translate(ct-dt,ut-ft)}return et.dirty=!1,et}}getAbsoluteScale(g){let et=this;for(;et;)et._isUnderCache&&(g=et),et=et.getParent();const ct=this.getAbsoluteTransform(g).decompose();return{x:ct.scaleX,y:ct.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var g,et;const ot=this._cache.get(TRANSFORM)||new Transform;ot.reset();const ct=this.x(),ut=this.y(),dt=Konva$1.getAngle(this.rotation()),ft=(g=this.attrs.scaleX)!==null&&g!==void 0?g:1,St=(et=this.attrs.scaleY)!==null&&et!==void 0?et:1,kt=this.attrs.skewX||0,Tt=this.attrs.skewY||0,Rt=this.attrs.offsetX||0,jt=this.attrs.offsetY||0;return(ct!==0||ut!==0)&&ot.translate(ct,ut),dt!==0&&ot.rotate(dt),(kt!==0||Tt!==0)&&ot.skew(kt,Tt),(ft!==1||St!==1)&&ot.scale(ft,St),(Rt!==0||jt!==0)&&ot.translate(-1*Rt,-1*jt),ot.dirty=!1,ot}clone(g){let et=Util.cloneObject(this.attrs),ot,ct,ut,dt,ft;for(ot in g)et[ot]=g[ot];const St=new this.constructor(et);for(ot in this.eventListeners)for(ct=this.eventListeners[ot],ut=ct.length,dt=0;dt<ut;dt++)ft=ct[dt],ft.name.indexOf(KONVA)<0&&(St.eventListeners[ot]||(St.eventListeners[ot]=[]),St.eventListeners[ot].push(ft));return St}_toKonvaCanvas(g){g=g||{};const et=this.getClientRect(),ot=this.getStage(),ct=g.x!==void 0?g.x:Math.floor(et.x),ut=g.y!==void 0?g.y:Math.floor(et.y),dt=g.pixelRatio||1,ft=new SceneCanvas({width:g.width||Math.ceil(et.width)||(ot?ot.width():0),height:g.height||Math.ceil(et.height)||(ot?ot.height():0),pixelRatio:dt}),St=ft.getContext(),kt=new SceneCanvas({width:ft.width/ft.pixelRatio+Math.abs(ct),height:ft.height/ft.pixelRatio+Math.abs(ut),pixelRatio:ft.pixelRatio});return g.imageSmoothingEnabled===!1&&(St._context.imageSmoothingEnabled=!1),St.save(),(ct||ut)&&St.translate(-1*ct,-1*ut),this.drawScene(ft,void 0,kt),St.restore(),ft}toCanvas(g){return this._toKonvaCanvas(g)._canvas}toDataURL(g){g=g||{};const et=g.mimeType||null,ot=g.quality||null,ct=this._toKonvaCanvas(g).toDataURL(et,ot);return g.callback&&g.callback(ct),ct}toImage(g){return new Promise((et,ot)=>{try{const ct=g==null?void 0:g.callback;ct&&delete g.callback,Util._urlToImage(this.toDataURL(g),function(ut){et(ut),ct==null||ct(ut)})}catch(ct){ot(ct)}})}toBlob(g){return new Promise((et,ot)=>{try{const ct=g==null?void 0:g.callback;ct&&delete g.callback,this.toCanvas(g).toBlob(ut=>{et(ut),ct==null||ct(ut)},g==null?void 0:g.mimeType,g==null?void 0:g.quality)}catch(ct){ot(ct)}})}setSize(g){return this.width(g.width),this.height(g.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$1.dragDistance}_off(g,et,ot){let ct=this.eventListeners[g],ut,dt,ft;for(ut=0;ut<ct.length;ut++)if(dt=ct[ut].name,ft=ct[ut].handler,(dt!=="konva"||et==="konva")&&(!et||dt===et)&&(!ot||ot===ft)){if(ct.splice(ut,1),ct.length===0){delete this.eventListeners[g];break}ut--}}_fireChangeEvent(g,et,ot){this._fire(g+CHANGE,{oldVal:et,newVal:ot})}addName(g){if(!this.hasName(g)){const et=this.name(),ot=et?et+" "+g:g;this.name(ot)}return this}hasName(g){if(!g)return!1;const et=this.name();return et?(et||"").split(/\s/g).indexOf(g)!==-1:!1}removeName(g){const et=(this.name()||"").split(/\s/g),ot=et.indexOf(g);return ot!==-1&&(et.splice(ot,1),this.name(et.join(" "))),this}setAttr(g,et){const ot=this[SET+Util._capitalize(g)];return Util._isFunction(ot)?ot.call(this,et):this._setAttr(g,et),this}_requestDraw(){if(Konva$1.autoDrawEnabled){const g=this.getLayer()||this.getStage();g==null||g.batchDraw()}}_setAttr(g,et){const ot=this.attrs[g];ot===et&&!Util.isObject(et)||(et==null?delete this.attrs[g]:this.attrs[g]=et,this._shouldFireChangeEvents&&this._fireChangeEvent(g,ot,et),this._requestDraw())}_setComponentAttr(g,et,ot){let ct;ot!==void 0&&(ct=this.attrs[g],ct||(this.attrs[g]=this.getAttr(g)),this.attrs[g][et]=ot,this._fireChangeEvent(g,ct,ot))}_fireAndBubble(g,et,ot){et&&this.nodeType===SHAPE&&(et.target=this);const ct=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(ct.indexOf(g)!==-1&&(ot&&(this===ot||this.isAncestorOf&&this.isAncestorOf(ot))||this.nodeType==="Stage"&&!ot))){this._fire(g,et);const dt=ct.indexOf(g)!==-1&&ot&&ot.isAncestorOf&&ot.isAncestorOf(this)&&!ot.isAncestorOf(this.parent);(et&&!et.cancelBubble||!et)&&this.parent&&this.parent.isListening()&&!dt&&(ot&&ot.parent?this._fireAndBubble.call(this.parent,g,et,ot):this._fireAndBubble.call(this.parent,g,et))}}_getProtoListeners(g){var et,ot,ct;const ut=(et=this._cache.get(ALL_LISTENERS))!==null&&et!==void 0?et:{};let dt=ut==null?void 0:ut[g];if(dt===void 0){dt=[];let ft=Object.getPrototypeOf(this);for(;ft;){const St=(ct=(ot=ft.eventListeners)===null||ot===void 0?void 0:ot[g])!==null&&ct!==void 0?ct:[];dt.push(...St),ft=Object.getPrototypeOf(ft)}ut[g]=dt,this._cache.set(ALL_LISTENERS,ut)}return dt}_fire(g,et){et=et||{},et.currentTarget=this,et.type=g;const ot=this._getProtoListeners(g);if(ot)for(let ut=0;ut<ot.length;ut++)ot[ut].handler.call(this,et);const ct=this.eventListeners[g];if(ct)for(let ut=0;ut<ct.length;ut++)ct[ut].handler.call(this,et)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(g){const et=g?g.pointerId:void 0,ot=this.getStage(),ct=this.getAbsolutePosition();if(!ot)return;const ut=ot._getPointerById(et)||ot._changedPointerPositions[0]||ct;DD._dragElements.set(this._id,{node:this,startPointerPos:ut,offset:{x:ut.x-ct.x,y:ut.y-ct.y},dragStatus:"ready",pointerId:et})}startDrag(g,et=!0){DD._dragElements.has(this._id)||this._createDragElement(g);const ot=DD._dragElements.get(this._id);ot.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:g&&g.evt},et)}_setDragPosition(g,et){const ot=this.getStage()._getPointerById(et.pointerId);if(!ot)return;let ct={x:ot.x-et.offset.x,y:ot.y-et.offset.y};const ut=this.dragBoundFunc();if(ut!==void 0){const dt=ut.call(this,ct,g);dt?ct=dt:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==ct.x||this._lastPos.y!==ct.y)&&(this.setAbsolutePosition(ct),this._requestDraw()),this._lastPos=ct}stopDrag(g){const et=DD._dragElements.get(this._id);et&&(et.dragStatus="stopped"),DD._endDragBefore(g),DD._endDragAfter(g)}setDraggable(g){this._setAttr("draggable",g),this._dragChange()}isDragging(){const g=DD._dragElements.get(this._id);return g?g.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(g){if(!(!(g.evt.button!==void 0)||Konva$1.dragButtons.indexOf(g.evt.button)>=0)||this.isDragging())return;let ct=!1;DD._dragElements.forEach(ut=>{this.isAncestorOf(ut.node)&&(ct=!0)}),ct||this._createDragElement(g)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const et=DD._dragElements.get(this._id),ot=et&&et.dragStatus==="dragging",ct=et&&et.dragStatus==="ready";ot?this.stopDrag():ct&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(g={x:0,y:0}){const et=this.getStage();if(!et)return!1;const ot={x:-g.x,y:-g.y,width:et.width()+2*g.x,height:et.height()+2*g.y};return Util.haveIntersection(ot,this.getClientRect())}static create(g,et){return Util._isString(g)&&(g=JSON.parse(g)),this._createNode(g,et)}static _createNode(g,et){let ot=zC.prototype.getClassName.call(g),ct=g.children,ut,dt,ft;et&&(g.attrs.container=et),Konva$1[ot]||(Util.warn('Can not find a node with class name "'+ot+'". Fallback to "Shape".'),ot="Shape");const St=Konva$1[ot];if(ut=new St(g.attrs),ct)for(dt=ct.length,ft=0;ft<dt;ft++)ut.add(zC._createNode(ct[ft]));return ut}};Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(it){return this._filterUpToDate=!1,it});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(g){const et=this.children||[];return g?et.filter(g):et}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.destroy()}),this.children=[],this._requestDraw(),this}add(...g){if(g.length===0)return this;if(g.length>1){for(let ot=0;ot<g.length;ot++)this.add(g[ot]);return this}const et=g[0];return et.getParent()?(et.moveTo(this),this):(this._validateAdd(et),et.index=this.getChildren().length,et.parent=this,et._clearCaches(),this.getChildren().push(et),this._fire("add",{child:et}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(g){return this._generalFind(g,!1)}findOne(g){const et=this._generalFind(g,!0);return et.length>0?et[0]:void 0}_generalFind(g,et){const ot=[];return this._descendants(ct=>{const ut=ct._isMatch(g);return ut&&ot.push(ct),!!(ut&&et)}),ot}_descendants(g){let et=!1;const ot=this.getChildren();for(const ct of ot){if(et=g(ct),et)return!0;if(ct.hasChildren()&&(et=ct._descendants(g),et))return!0}return!1}toObject(){const g=Node$1.prototype.toObject.call(this);return g.children=[],this.getChildren().forEach(et=>{g.children.push(et.toObject())}),g}isAncestorOf(g){let et=g.getParent();for(;et;){if(et._id===this._id)return!0;et=et.getParent()}return!1}clone(g){const et=Node$1.prototype.clone.call(this,g);return this.getChildren().forEach(function(ot){et.add(ot.clone())}),et}getAllIntersections(g){const et=[];return this.find("Shape").forEach(ot=>{ot.isVisible()&&ot.intersects(g)&&et.push(ot)}),et}_clearSelfAndDescendantCache(g){var et;super._clearSelfAndDescendantCache(g),!this.isCached()&&((et=this.children)===null||et===void 0||et.forEach(function(ot){ot._clearSelfAndDescendantCache(g)}))}_setChildrenIndices(){var g;(g=this.children)===null||g===void 0||g.forEach(function(et,ot){et.index=ot}),this._requestDraw()}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct&&ct.getCanvas(),dt=ut&&ut.getContext(),ft=this._getCanvasCache(),St=ft&&ft.scene,kt=ut&&ut.isCache;if(!this.isVisible()&&!kt)return this;if(St){dt.save();const Tt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5]),this._drawCachedSceneCanvas(dt),dt.restore()}else this._drawChildren("drawScene",ut,et,ot);return this}drawHit(g,et){if(!this.shouldDrawHit(et))return this;const ot=this.getLayer(),ct=g||ot&&ot.hitCanvas,ut=ct&&ct.getContext(),dt=this._getCanvasCache();if(dt&&dt.hit){ut.save();const St=this.getAbsoluteTransform(et).getMatrix();ut.transform(St[0],St[1],St[2],St[3],St[4],St[5]),this._drawCachedHitCanvas(ut),ut.restore()}else this._drawChildren("drawHit",ct,et);return this}_drawChildren(g,et,ot,ct){var ut;const dt=et&&et.getContext(),ft=this.clipWidth(),St=this.clipHeight(),kt=this.clipFunc(),Tt=typeof ft=="number"&&typeof St=="number"||kt,Rt=ot===this;if(Tt){dt.save();const Ft=this.getAbsoluteTransform(ot);let $t=Ft.getMatrix();dt.transform($t[0],$t[1],$t[2],$t[3],$t[4],$t[5]),dt.beginPath();let zt;if(kt)zt=kt.call(this,dt,this);else{const Ut=this.clipX(),Bt=this.clipY();dt.rect(Ut||0,Bt||0,ft,St)}dt.clip.apply(dt,zt),$t=Ft.copy().invert().getMatrix(),dt.transform($t[0],$t[1],$t[2],$t[3],$t[4],$t[5])}const jt=!Rt&&this.globalCompositeOperation()!=="source-over"&&g==="drawScene";jt&&(dt.save(),dt._applyGlobalCompositeOperation(this)),(ut=this.children)===null||ut===void 0||ut.forEach(function(Ft){Ft[g](et,ot,ct)}),jt&&dt.restore(),Tt&&dt.restore()}getClientRect(g={}){var et;const ot=g.skipTransform,ct=g.relativeTo;let ut,dt,ft,St,kt={x:1/0,y:1/0,width:0,height:0};const Tt=this;(et=this.children)===null||et===void 0||et.forEach(function(Ft){if(!Ft.visible())return;const $t=Ft.getClientRect({relativeTo:Tt,skipShadow:g.skipShadow,skipStroke:g.skipStroke});$t.width===0&&$t.height===0||(ut===void 0?(ut=$t.x,dt=$t.y,ft=$t.x+$t.width,St=$t.y+$t.height):(ut=Math.min(ut,$t.x),dt=Math.min(dt,$t.y),ft=Math.max(ft,$t.x+$t.width),St=Math.max(St,$t.y+$t.height)))});const Rt=this.find("Shape");let jt=!1;for(let Ft=0;Ft<Rt.length;Ft++)if(Rt[Ft]._isVisible(this)){jt=!0;break}return jt&&ut!==void 0?kt={x:ut,y:dt,width:ft-ut,height:St-dt}:kt={x:0,y:0,width:0,height:0},ot?kt:this._transformedRect(kt,ct)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$1._global.PointerEvent!==void 0;function getCapturedShape(it){return Captures.get(it)}function createEvent(it){return{evt:it,pointerId:it.pointerId}}function hasPointerCapture(it,g){return Captures.get(it)===g}function setPointerCapture(it,g){releaseCapture(it),g.getStage()&&(Captures.set(it,g),SUPPORT_POINTER_EVENTS&&g._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(it,g){const et=Captures.get(it);if(!et)return;const ot=et.getStage();ot&&ot.content,Captures.delete(it),SUPPORT_POINTER_EVENTS&&et._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=it=>it.indexOf("pointer")>=0?"pointer":it.indexOf("touch")>=0?"touch":"mouse",getEventsMap=it=>{const g=getEventType(it);if(g==="pointer")return Konva$1.pointerEventsEnabled&&EVENTS_MAP.pointer;if(g==="touch")return EVENTS_MAP.touch;if(g==="mouse")return EVENTS_MAP.mouse};function checkNoClip(it={}){return(it.clipFunc||it.clipWidth||it.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),it}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(g){super(checkNoClip(g)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(g){const et=g.getType()==="Layer",ot=g.getType()==="FastLayer";et||ot||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const g=this.visible()?"":"none";this.content.style.display=g}setContainer(g){if(typeof g===STRING){let et;if(g.charAt(0)==="."){const ot=g.slice(1);g=document.getElementsByClassName(ot)[0]}else g.charAt(0)!=="#"?et=g:et=g.slice(1),g=document.getElementById(et);if(!g)throw"Can not find container in document with id "+et}return this._setAttr("container",g),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),g.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const g=this.children,et=g.length;for(let ot=0;ot<et;ot++)g[ot].clear();return this}clone(g){return g||(g={}),g.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,g)}destroy(){super.destroy();const g=this.content;g&&Util._isInDocument(g)&&this.container().removeChild(g);const et=stages.indexOf(this);return et>-1&&stages.splice(et,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const g=this._pointerPositions[0]||this._changedPointerPositions[0];return g?{x:g.x,y:g.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(g){return this._pointerPositions.find(et=>et.id===g)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(g){g={...g},g.x=g.x||0,g.y=g.y||0,g.width=g.width||this.width(),g.height=g.height||this.height();const et=new SceneCanvas({width:g.width,height:g.height,pixelRatio:g.pixelRatio||1}),ot=et.getContext()._context,ct=this.children;return(g.x||g.y)&&ot.translate(-1*g.x,-1*g.y),ct.forEach(function(ut){if(!ut.isVisible())return;const dt=ut._toKonvaCanvas(g);ot.drawImage(dt._canvas,g.x,g.y,dt.getWidth()/dt.getPixelRatio(),dt.getHeight()/dt.getPixelRatio())}),et}getIntersection(g){if(!g)return null;const et=this.children,ot=et.length,ct=ot-1;for(let ut=ct;ut>=0;ut--){const dt=et[ut].getIntersection(g);if(dt)return dt}return null}_resizeDOM(){const g=this.width(),et=this.height();this.content&&(this.content.style.width=g+PX,this.content.style.height=et+PX),this.bufferCanvas.setSize(g,et),this.bufferHitCanvas.setSize(g,et),this.children.forEach(ot=>{ot.setSize({width:g,height:et}),ot.draw()})}add(g,...et){if(arguments.length>1){for(let ct=0;ct<arguments.length;ct++)this.add(arguments[ct]);return this}super.add(g);const ot=this.children.length;return ot>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+ot+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),g.setSize({width:this.width(),height:this.height()}),g.draw(),Konva$1.isBrowser&&this.content.appendChild(g.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}getLayers(){return this.children}_bindContentEvents(){Konva$1.isBrowser&&EVENTS.forEach(([g,et])=>{this.content.addEventListener(g,ot=>{this[et](ot)},{passive:!1})})}_pointerenter(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerenter,{evt:g,target:this,currentTarget:this})}_pointerover(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerover,{evt:g,target:this,currentTarget:this})}_getTargetShape(g){let et=this[g+"targetShape"];return et&&!et.getStage()&&(et=null),et}_pointerleave(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ct=this._getTargetShape(ot),ut=!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled;ct&&ut?(ct._fireAndBubble(et.pointerout,{evt:g}),ct._fireAndBubble(et.pointerleave,{evt:g}),this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this[ot+"targetShape"]=null):ut&&(this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this._fire(et.pointerout,{evt:g,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);let ct=!1;this._changedPointerPositions.forEach(ut=>{const dt=this.getIntersection(ut);if(DD.justDragged=!1,Konva$1["_"+ot+"ListenClick"]=!0,!dt||!dt.isListening()){this[ot+"ClickStartShape"]=void 0;return}Konva$1.capturePointerEventsEnabled&&dt.setPointerCapture(ut.id),this[ot+"ClickStartShape"]=dt,dt._fireAndBubble(et.pointerdown,{evt:g,pointerId:ut.id}),ct=!0;const ft=g.type.indexOf("touch")>=0;dt.preventDefault()&&g.cancelable&&ft&&g.preventDefault()}),ct||this._fire(et.pointerdown,{evt:g,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;const ct=g.type.indexOf("touch")>=0||g.pointerType==="touch";if(Konva$1.isDragging()&&DD.node.preventDefault()&&g.cancelable&&ct&&g.preventDefault(),this.setPointersPositions(g),!(!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled))return;const dt={};let ft=!1;const St=this._getTargetShape(ot);this._changedPointerPositions.forEach(kt=>{const Tt=getCapturedShape(kt.id)||this.getIntersection(kt),Rt=kt.id,jt={evt:g,pointerId:Rt},Ft=St!==Tt;if(Ft&&St&&(St._fireAndBubble(et.pointerout,{...jt},Tt),St._fireAndBubble(et.pointerleave,{...jt},Tt)),Tt){if(dt[Tt._id])return;dt[Tt._id]=!0}Tt&&Tt.isListening()?(ft=!0,Ft&&(Tt._fireAndBubble(et.pointerover,{...jt},St),Tt._fireAndBubble(et.pointerenter,{...jt},St),this[ot+"targetShape"]=Tt),Tt._fireAndBubble(et.pointermove,{...jt})):St&&(this._fire(et.pointerover,{evt:g,target:this,currentTarget:this,pointerId:Rt}),this[ot+"targetShape"]=null)}),ft||this._fire(et.pointermove,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ct=this[ot+"ClickStartShape"],ut=this[ot+"ClickEndShape"],dt={};let ft=!1;this._changedPointerPositions.forEach(St=>{const kt=getCapturedShape(St.id)||this.getIntersection(St);if(kt){if(kt.releaseCapture(St.id),dt[kt._id])return;dt[kt._id]=!0}const Tt=St.id,Rt={evt:g,pointerId:Tt};let jt=!1;Konva$1["_"+ot+"InDblClickWindow"]?(jt=!0,clearTimeout(this[ot+"DblTimeout"])):DD.justDragged||(Konva$1["_"+ot+"InDblClickWindow"]=!0,clearTimeout(this[ot+"DblTimeout"])),this[ot+"DblTimeout"]=setTimeout(function(){Konva$1["_"+ot+"InDblClickWindow"]=!1},Konva$1.dblClickWindow),kt&&kt.isListening()?(ft=!0,this[ot+"ClickEndShape"]=kt,kt._fireAndBubble(et.pointerup,{...Rt}),Konva$1["_"+ot+"ListenClick"]&&ct&&ct===kt&&(kt._fireAndBubble(et.pointerclick,{...Rt}),jt&&ut&&ut===kt&&kt._fireAndBubble(et.pointerdblclick,{...Rt}))):(this[ot+"ClickEndShape"]=null,ft||(this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ft=!0),Konva$1["_"+ot+"ListenClick"]&&this._fire(et.pointerclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}),jt&&this._fire(et.pointerdblclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}))}),ft||this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$1["_"+ot+"ListenClick"]=!1,g.cancelable&&ot!=="touch"&&ot!=="pointer"&&g.preventDefault()}_contextmenu(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(CONTEXTMENU,{evt:g}):this._fire(CONTEXTMENU,{evt:g,target:this,currentTarget:this})}_wheel(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(WHEEL,{evt:g}):this._fire(WHEEL,{evt:g,target:this,currentTarget:this})}_pointercancel(g){this.setPointersPositions(g);const et=getCapturedShape(g.pointerId)||this.getIntersection(this.getPointerPosition());et&&et._fireAndBubble(POINTERUP,createEvent(g)),releaseCapture(g.pointerId)}_lostpointercapture(g){releaseCapture(g.pointerId)}setPointersPositions(g){const et=this._getContentPosition();let ot=null,ct=null;g=g||window.event,g.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(g.touches,ut=>{this._pointerPositions.push({id:ut.identifier,x:(ut.clientX-et.left)/et.scaleX,y:(ut.clientY-et.top)/et.scaleY})}),Array.prototype.forEach.call(g.changedTouches||g.touches,ut=>{this._changedPointerPositions.push({id:ut.identifier,x:(ut.clientX-et.left)/et.scaleX,y:(ut.clientY-et.top)/et.scaleY})})):(ot=(g.clientX-et.left)/et.scaleX,ct=(g.clientY-et.top)/et.scaleY,this.pointerPos={x:ot,y:ct},this._pointerPositions=[{x:ot,y:ct,id:Util._getFirstPointerId(g)}],this._changedPointerPositions=[{x:ot,y:ct,id:Util._getFirstPointerId(g)}])}_setPointerPosition(g){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(g)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const g=this.content.getBoundingClientRect();return{top:g.top,left:g.left,scaleX:g.width/this.content.clientWidth||1,scaleY:g.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$1.isBrowser)return;const g=this.container();if(!g)throw"Stage has no container. A container is required.";g.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),g.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(g){g.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$1.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(it=>{it.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFunc$2(it){it.stroke()}function _fillFuncHit(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFuncHit(it){it.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(g){super(g);let et;for(;et=Util.getRandomColor(),!(et&&!(et in shapes)););this.colorKey=et,shapes[et]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const et=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(et&&et.setTransform){const ot=new Transform;ot.translate(this.fillPatternX(),this.fillPatternY()),ot.rotate(Konva$1.getAngle(this.fillPatternRotation())),ot.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),ot.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ct=ot.getMatrix(),ut=typeof DOMMatrix>"u"?{a:ct[0],b:ct[1],c:ct[2],d:ct[3],e:ct[4],f:ct[5]}:new DOMMatrix(ct);et.setTransform(ut)}return et}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const g=this.fillLinearGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillLinearGradientStartPoint(),ct=this.fillLinearGradientEndPoint(),ut=et.createLinearGradient(ot.x,ot.y,ct.x,ct.y);for(let dt=0;dt<g.length;dt+=2)ut.addColorStop(g[dt],g[dt+1]);return ut}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const g=this.fillRadialGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillRadialGradientStartPoint(),ct=this.fillRadialGradientEndPoint(),ut=et.createRadialGradient(ot.x,ot.y,this.fillRadialGradientStartRadius(),ct.x,ct.y,this.fillRadialGradientEndRadius());for(let dt=0;dt<g.length;dt+=2)ut.addColorStop(g[dt],g[dt+1]);return ut}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const g=Util.colorToRGBA(this.shadowColor());if(g)return"rgba("+g.r+","+g.g+","+g.b+","+g.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const g=this.hitStrokeWidth();return g==="auto"?this.hasStroke():this.strokeEnabled()&&!!g}intersects(g){const et=this.getStage();if(!et)return!1;const ot=et.bufferHitCanvas;return ot.getContext().clear(),this.drawHit(ot,void 0,!0),ot.context.getImageData(Math.round(g.x),Math.round(g.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(g){var et;if(!((et=this.attrs.perfectDrawEnabled)!==null&&et!==void 0?et:!0))return!1;const ct=g||this.hasFill(),ut=this.hasStroke(),dt=this.getAbsoluteOpacity()!==1;if(ct&&ut&&dt)return!0;const ft=this.hasShadow(),St=this.shadowForStrokeEnabled();return!!(ct&&ut&&ft&&St)}setStrokeHitEnabled(g){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),g?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const g=this.size();return{x:this._centroid?-g.width/2:0,y:this._centroid?-g.height/2:0,width:g.width,height:g.height}}getClientRect(g={}){let et=!1,ot=this.getParent();for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.getParent()}const ct=g.skipTransform,ut=g.relativeTo||et&&this.getStage()||void 0,dt=this.getSelfRect(),St=!g.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,kt=dt.width+St,Tt=dt.height+St,Rt=!g.skipShadow&&this.hasShadow(),jt=Rt?this.shadowOffsetX():0,Ft=Rt?this.shadowOffsetY():0,$t=kt+Math.abs(jt),zt=Tt+Math.abs(Ft),Ut=Rt&&this.shadowBlur()||0,Bt=$t+Ut*2,Ht=zt+Ut*2,Jt={width:Bt,height:Ht,x:-(St/2+Ut)+Math.min(jt,0)+dt.x,y:-(St/2+Ut)+Math.min(Ft,0)+dt.y};return ct?Jt:this._transformedRect(Jt,ut)}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct.getCanvas(),dt=ut.getContext(),ft=this._getCanvasCache(),St=this.getSceneFunc(),kt=this.hasShadow();let Tt;const Rt=!1,jt=et===this;if(!this.isVisible()&&!jt)return this;if(ft){dt.save();const Ft=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),this._drawCachedSceneCanvas(dt),dt.restore(),this}if(!St)return this;if(dt.save(),this._useBufferCanvas()&&!Rt){Tt=this.getStage();const Ft=ot||Tt.bufferCanvas,$t=Ft.getContext();$t.clear(),$t.save(),$t._applyLineJoin(this),$t._applyMiterLimit(this);const zt=this.getAbsoluteTransform(et).getMatrix();$t.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5]),St.call(this,$t,this),$t.restore();const Ut=Ft.pixelRatio;kt&&dt._applyShadow(this),jt||(dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)),dt.drawImage(Ft._canvas,Ft.x||0,Ft.y||0,Ft.width/Ut,Ft.height/Ut)}else{if(dt._applyLineJoin(this),dt._applyMiterLimit(this),!jt){const Ft=this.getAbsoluteTransform(et).getMatrix();dt.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]),dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)}kt&&dt._applyShadow(this),St.call(this,dt,this)}return dt.restore(),this}drawHit(g,et,ot=!1){if(!this.shouldDrawHit(et,ot))return this;const ct=this.getLayer(),ut=g||ct.hitCanvas,dt=ut&&ut.getContext(),ft=this.hitFunc()||this.sceneFunc(),St=this._getCanvasCache(),kt=St&&St.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),kt){dt.save();const Rt=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]),this._drawCachedHitCanvas(dt),dt.restore(),this}if(!ft)return this;if(dt.save(),dt._applyLineJoin(this),dt._applyMiterLimit(this),!(this===et)){const Rt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5])}return ft.call(this,dt,this),dt.restore(),this}drawHitFromCache(g=0){const et=this._getCanvasCache(),ot=this._getCachedSceneCanvas(),ct=et.hit,ut=ct.getContext(),dt=ct.getWidth(),ft=ct.getHeight();ut.clear(),ut.drawImage(ot._canvas,0,0,dt,ft);try{const St=ut.getImageData(0,0,dt,ft),kt=St.data,Tt=kt.length,Rt=Util._hexToRgb(this.colorKey);for(let jt=0;jt<Tt;jt+=4)kt[jt+3]>g?(kt[jt]=Rt.r,kt[jt+1]=Rt.g,kt[jt+2]=Rt.b,kt[jt+3]=255):kt[jt+3]=0;ut.putImageData(St,0,0)}catch(St){Util.error("Unable to draw hit graph from cached scene canvas. "+St.message)}return this}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(g){super(g),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(g){return this.getContext().clear(g),this.getHitCanvas().getContext().clear(g),this}setZIndex(g){super.setZIndex(g);const et=this.getStage();return et&&et.content&&(et.content.removeChild(this.getNativeCanvasElement()),g<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[g+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const et=this.getStage();return!et||!et.content?!1:(et.content.removeChild(this.getNativeCanvasElement()),this.index<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[this.index+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const g=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),g&&g.parentNode&&Util._isInDocument(g)&&g.parentNode.removeChild(g),this}getStage(){return this.parent}setSize({width:g,height:et}){return this.canvas.setSize(g,et),this.hitCanvas.setSize(g,et),this._setSmoothEnabled(),this}_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(g){return g={...g},g.width=g.width||this.getWidth(),g.height=g.height||this.getHeight(),g.x=g.x!==void 0?g.x:this.x(),g.y=g.y!==void 0?g.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,g)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(g){if(!this.isListening()||!this.isVisible())return null;let et=1,ot=!1;for(;;){for(let ct=0;ct<INTERSECTION_OFFSETS_LEN;ct++){const ut=INTERSECTION_OFFSETS[ct],dt=this._getIntersection({x:g.x+ut.x*et,y:g.y+ut.y*et}),ft=dt.shape;if(ft)return ft;if(ot=!!dt.antialiased,!dt.antialiased)break}if(ot)et+=1;else return null}}_getIntersection(g){const et=this.hitCanvas.pixelRatio,ot=this.hitCanvas.context.getImageData(Math.round(g.x*et),Math.round(g.y*et),1,1).data,ct=ot[3];if(ct===255){const ut=Util._rgbToHex(ot[0],ot[1],ot[2]),dt=shapes[HASH+ut];return dt?{shape:dt}:{antialiased:!0}}else if(ct>0)return{antialiased:!0};return{}}drawScene(g,et,ot){const ct=this.getLayer(),ut=g||ct&&ct.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&ut.getContext().clear(),Container.prototype.drawScene.call(this,ut,et,ot),this._fire(DRAW,{node:this}),this}drawHit(g,et){const ot=this.getLayer(),ct=g||ot&&ot.hitCanvas;return ot&&ot.clearBeforeDraw()&&ot.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,ct,et),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(g){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(g)}getHitGraphEnabled(g){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const g=this.parent;!!this.hitCanvas._canvas.parentNode?g.content.removeChild(this.hitCanvas._canvas):g.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(g){super(g),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);class Group extends Container{_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}}Group.prototype.nodeType="Group";_registerNode(Group);const now=function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}}();class Animation{constructor(g,et){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=g,this.setLayers(et)}setLayers(g){let et=[];return g&&(et=Array.isArray(g)?g:[g]),this.layers=et,this}getLayers(){return this.layers}addLayer(g){const et=this.layers,ot=et.length;for(let ct=0;ct<ot;ct++)if(et[ct]._id===g._id)return!1;return this.layers.push(g),!0}isRunning(){const et=Animation.animations,ot=et.length;for(let ct=0;ct<ot;ct++)if(et[ct].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(g){this.frame.timeDiff=g-this.frame.lastTime,this.frame.lastTime=g,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(g){this.animations.push(g),this._handleAnimation()}static _removeAnimation(g){const et=g.id,ot=this.animations,ct=ot.length;for(let ut=0;ut<ct;ut++)if(ot[ut].id===et){this.animations.splice(ut,1);break}}static _runFrames(){const g={},et=this.animations;for(let ot=0;ot<et.length;ot++){const ct=et[ot],ut=ct.layers,dt=ct.func;ct._updateFrameObject(now());const ft=ut.length;let St;if(dt?St=dt.call(ct,ct.frame)!==!1:St=!0,!!St)for(let kt=0;kt<ft;kt++){const Tt=ut[kt];Tt._id!==void 0&&(g[Tt._id]=Tt)}}for(const ot in g)g.hasOwnProperty(ot)&&g[ot].batchDraw()}static _animationLoop(){const g=Animation;g.animations.length?(g._runFrames(),Util.requestAnimFrame(g._animationLoop)):g.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(g,et,ot,ct,ut,dt,ft){this.prop=g,this.propFunc=et,this.begin=ct,this._pos=ct,this.duration=dt,this._change=0,this.prevPos=0,this.yoyo=ft,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=ot,this._change=ut-this.begin,this.pause()}fire(g){const et=this[g];et&&et()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(g):this.state===REVERSING&&this.setTime(this.duration-g)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(g){const et=this,ot=g.node,ct=ot._id,ut=g.easing||Easings.Linear,dt=!!g.yoyo;let ft,St;typeof g.duration>"u"?ft=.3:g.duration===0?ft=.001:ft=g.duration,this.node=ot,this._id=idCounter++;const kt=ot.getLayer()||(ot instanceof Konva$1.Stage?ot.getLayers():null);kt||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){et.tween.onEnterFrame()},kt),this.tween=new TweenEngine(St,function(Tt){et._tweenFunc(Tt)},ut,0,1,ft*1e3,dt),this._addListeners(),Tween.attrs[ct]||(Tween.attrs[ct]={}),Tween.attrs[ct][this._id]||(Tween.attrs[ct][this._id]={}),Tween.tweens[ct]||(Tween.tweens[ct]={});for(St in g)blacklist[St]===void 0&&this._addAttr(St,g[St]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,et){const ot=this.node,ct=ot._id;let ut,dt,ft,St,kt;const Tt=Tween.tweens[ct][g];Tt&&delete Tween.attrs[ct][Tt][g];let Rt=ot.getAttr(g);if(Util._isArray(et))if(ut=[],dt=Math.max(et.length,Rt.length),g==="points"&&et.length!==Rt.length&&(et.length>Rt.length?(St=Rt,Rt=Util._prepareArrayForTween(Rt,et,ot.closed())):(ft=et,et=Util._prepareArrayForTween(et,Rt,ot.closed()))),g.indexOf("fill")===0)for(let jt=0;jt<dt;jt++)if(jt%2===0)ut.push(et[jt]-Rt[jt]);else{const Ft=Util.colorToRGBA(Rt[jt]);kt=Util.colorToRGBA(et[jt]),Rt[jt]=Ft,ut.push({r:kt.r-Ft.r,g:kt.g-Ft.g,b:kt.b-Ft.b,a:kt.a-Ft.a})}else for(let jt=0;jt<dt;jt++)ut.push(et[jt]-Rt[jt]);else colorAttrs.indexOf(g)!==-1?(Rt=Util.colorToRGBA(Rt),kt=Util.colorToRGBA(et),ut={r:kt.r-Rt.r,g:kt.g-Rt.g,b:kt.b-Rt.b,a:kt.a-Rt.a}):ut=et-Rt;Tween.attrs[ct][this._id][g]={start:Rt,diff:ut,end:et,trueEnd:ft,trueStart:St},Tween.tweens[ct][g]=this._id}_tweenFunc(g){const et=this.node,ot=Tween.attrs[et._id][this._id];let ct,ut,dt,ft,St,kt,Tt,Rt;for(ct in ot){if(ut=ot[ct],dt=ut.start,ft=ut.diff,Rt=ut.end,Util._isArray(dt))if(St=[],Tt=Math.max(dt.length,Rt.length),ct.indexOf("fill")===0)for(kt=0;kt<Tt;kt++)kt%2===0?St.push((dt[kt]||0)+ft[kt]*g):St.push("rgba("+Math.round(dt[kt].r+ft[kt].r*g)+","+Math.round(dt[kt].g+ft[kt].g*g)+","+Math.round(dt[kt].b+ft[kt].b*g)+","+(dt[kt].a+ft[kt].a*g)+")");else for(kt=0;kt<Tt;kt++)St.push((dt[kt]||0)+ft[kt]*g);else colorAttrs.indexOf(ct)!==-1?St="rgba("+Math.round(dt.r+ft.r*g)+","+Math.round(dt.g+ft.g*g)+","+Math.round(dt.b+ft.b*g)+","+(dt.a+ft.a*g)+")":St=dt+ft*g;et.setAttr(ct,St)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueEnd&&g.setAttr("points",et.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueStart&&g.points(et.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,et=this._id,ot=Tween.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const ct in ot)delete Tween.tweens[g][ct];delete Tween.attrs[g][et],Tween.tweens[g]&&(Object.keys(Tween.tweens[g]).length===0&&delete Tween.tweens[g],Object.keys(Tween.attrs[g]).length===0&&delete Tween.attrs[g])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(it){const g=it.onFinish;it.node=this,it.onFinish=function(){this.destroy(),g&&g()},new Tween(it).play()};const Easings={BackEaseIn(it,g,et,ot){return et*(it/=ot)*it*((1.70158+1)*it-1.70158)+g},BackEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*((1.70158+1)*it+1.70158)+1)+g},BackEaseInOut(it,g,et,ot){let ct=1.70158;return(it/=ot/2)<1?et/2*(it*it*(((ct*=1.525)+1)*it-ct))+g:et/2*((it-=2)*it*(((ct*=1.525)+1)*it+ct)+2)+g},ElasticEaseIn(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ut||(ut=ot*.3),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),-(ct*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut))+g)},ElasticEaseOut(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ut||(ut=ot*.3),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),ct*Math.pow(2,-10*it)*Math.sin((it*ot-dt)*(2*Math.PI)/ut)+et+g)},ElasticEaseInOut(it,g,et,ot,ct,ut){let dt=0;return it===0?g:(it/=ot/2)===2?g+et:(ut||(ut=ot*(.3*1.5)),!ct||ct<Math.abs(et)?(ct=et,dt=ut/4):dt=ut/(2*Math.PI)*Math.asin(et/ct),it<1?-.5*(ct*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut))+g:ct*Math.pow(2,-10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ut)*.5+et+g)},BounceEaseOut(it,g,et,ot){return(it/=ot)<1/2.75?et*(7.5625*it*it)+g:it<2/2.75?et*(7.5625*(it-=1.5/2.75)*it+.75)+g:it<2.5/2.75?et*(7.5625*(it-=2.25/2.75)*it+.9375)+g:et*(7.5625*(it-=2.625/2.75)*it+.984375)+g},BounceEaseIn(it,g,et,ot){return et-Easings.BounceEaseOut(ot-it,0,et,ot)+g},BounceEaseInOut(it,g,et,ot){return it<ot/2?Easings.BounceEaseIn(it*2,0,et,ot)*.5+g:Easings.BounceEaseOut(it*2-ot,0,et,ot)*.5+et*.5+g},EaseIn(it,g,et,ot){return et*(it/=ot)*it+g},EaseOut(it,g,et,ot){return-et*(it/=ot)*(it-2)+g},EaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it+g:-et/2*(--it*(it-2)-1)+g},StrongEaseIn(it,g,et,ot){return et*(it/=ot)*it*it*it*it+g},StrongEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*it*it*it+1)+g},StrongEaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it*it*it*it+g:et/2*((it-=2)*it*it*it*it+2)+g},Linear(it,g,et,ot){return et*it/ot+g}},Konva=Util._assign(Konva$1,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group,DD,Shape,shapes,Animation,Tween,Easings,Context,Canvas});class Arc extends Shape{_sceneFunc(g){const et=Konva$1.getAngle(this.angle()),ot=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,et,ot),g.arc(0,0,this.innerRadius(),et,0,!ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),et=this.outerRadius(),ot=this.clockwise(),ct=Konva$1.getAngle(ot?360-this.angle():this.angle()),ut=Math.cos(Math.min(ct,Math.PI)),dt=1,ft=Math.sin(Math.min(Math.max(Math.PI,ct),3*Math.PI/2)),St=Math.sin(Math.min(ct,Math.PI/2)),kt=ut*(ut>0?g:et),Tt=dt*et,Rt=ft*(ft>0?g:et),jt=St*(St>0?et:g);return{x:kt,y:ot?-1*jt:Rt,width:Tt-kt,height:jt-Rt}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(it,g,et,ot,ct,ut,dt){const ft=Math.sqrt(Math.pow(et-it,2)+Math.pow(ot-g,2)),St=Math.sqrt(Math.pow(ct-et,2)+Math.pow(ut-ot,2)),kt=dt*ft/(ft+St),Tt=dt*St/(ft+St),Rt=et-kt*(ct-it),jt=ot-kt*(ut-g),Ft=et+Tt*(ct-it),$t=ot+Tt*(ut-g);return[Rt,jt,Ft,$t]}function expandPoints(it,g){const et=it.length,ot=[];for(let ct=2;ct<et-2;ct+=2){const ut=getControlPoints(it[ct-2],it[ct-1],it[ct],it[ct+1],it[ct+2],it[ct+3],g);isNaN(ut[0])||(ot.push(ut[0]),ot.push(ut[1]),ot.push(it[ct]),ot.push(it[ct+1]),ot.push(ut[2]),ot.push(ut[3]))}return ot}class Line extends Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const et=this.points(),ot=et.length,ct=this.tension(),ut=this.closed(),dt=this.bezier();if(!ot)return;let ft=0;if(g.beginPath(),g.moveTo(et[0],et[1]),ct!==0&&ot>4){const St=this.getTensionPoints(),kt=St.length;for(ft=ut?0:4,ut||g.quadraticCurveTo(St[0],St[1],St[2],St[3]);ft<kt-2;)g.bezierCurveTo(St[ft++],St[ft++],St[ft++],St[ft++],St[ft++],St[ft++]);ut||g.quadraticCurveTo(St[kt-2],St[kt-1],et[ot-2],et[ot-1])}else if(dt)for(ft=2;ft<ot;)g.bezierCurveTo(et[ft++],et[ft++],et[ft++],et[ft++],et[ft++],et[ft++]);else for(ft=2;ft<ot;ft+=2)g.lineTo(et[ft],et[ft+1]);ut?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),et=g.length,ot=this.tension(),ct=getControlPoints(g[et-2],g[et-1],g[0],g[1],g[2],g[3],ot),ut=getControlPoints(g[et-4],g[et-3],g[et-2],g[et-1],g[0],g[1],ot),dt=expandPoints(g,ot);return[ct[2],ct[3]].concat(dt).concat([ut[0],ut[1],g[et-2],g[et-1],ut[2],ut[3],ct[0],ct[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let et=g[0],ot=g[0],ct=g[1],ut=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ct=Math.min(ct,ft),ut=Math.max(ut,ft);return{x:et,y:ct,width:ot-et,height:ut-ct}}}Line.prototype.className="Line";Line.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line);Factory.addGetterSetter(Line,"closed",!1);Factory.addGetterSetter(Line,"bezier",!1);Factory.addGetterSetter(Line,"tension",0,getNumberValidator());Factory.addGetterSetter(Line,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(it,g,et)=>{let ot,ct;const dt=et/2;ot=0;for(let ft=0;ft<20;ft++)ct=dt*tValues[20][ft]+dt,ot+=cValues[20][ft]*BFunc(it,g,ct);return dt*ot},getQuadraticArcLength=(it,g,et)=>{et===void 0&&(et=1);const ot=it[0]-2*it[1]+it[2],ct=g[0]-2*g[1]+g[2],ut=2*it[1]-2*it[0],dt=2*g[1]-2*g[0],ft=4*(ot*ot+ct*ct),St=4*(ot*ut+ct*dt),kt=ut*ut+dt*dt;if(ft===0)return et*Math.sqrt(Math.pow(it[2]-it[0],2)+Math.pow(g[2]-g[0],2));const Tt=St/(2*ft),Rt=kt/ft,jt=et+Tt,Ft=Rt-Tt*Tt,$t=jt*jt+Ft>0?Math.sqrt(jt*jt+Ft):0,zt=Tt*Tt+Ft>0?Math.sqrt(Tt*Tt+Ft):0,Ut=Tt+Math.sqrt(Tt*Tt+Ft)!==0?Ft*Math.log(Math.abs((jt+$t)/(Tt+zt))):0;return Math.sqrt(ft)/2*(jt*$t-Tt*zt+Ut)};function BFunc(it,g,et){const ot=getDerivative(1,et,it),ct=getDerivative(1,et,g),ut=ot*ot+ct*ct;return Math.sqrt(ut)}const getDerivative=(it,g,et)=>{const ot=et.length-1;let ct,ut;if(ot===0)return 0;if(it===0){ut=0;for(let dt=0;dt<=ot;dt++)ut+=binomialCoefficients[ot][dt]*Math.pow(1-g,ot-dt)*Math.pow(g,dt)*et[dt];return ut}else{ct=new Array(ot);for(let dt=0;dt<ot;dt++)ct[dt]=ot*(et[dt+1]-et[dt]);return getDerivative(it-1,g,ct)}},t2length=(it,g,et)=>{let ot=1,ct=it/g,ut=(it-et(ct))/g,dt=0;for(;ot>.001;){const ft=et(ct+ut),St=Math.abs(it-ft)/g;if(St<ot)ot=St,ct+=ut;else{const kt=et(ct-ut),Tt=Math.abs(it-kt)/g;Tt<ot?(ot=Tt,ct-=ut):ut/=2}if(dt++,dt>500)break}return ct};class Path extends Shape{constructor(g){super(g),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(g){const et=this.dataArray;g.beginPath();let ot=!1;for(let ct=0;ct<et.length;ct++){const ut=et[ct].command,dt=et[ct].points;switch(ut){case"L":g.lineTo(dt[0],dt[1]);break;case"M":g.moveTo(dt[0],dt[1]);break;case"C":g.bezierCurveTo(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]);break;case"Q":g.quadraticCurveTo(dt[0],dt[1],dt[2],dt[3]);break;case"A":const ft=dt[0],St=dt[1],kt=dt[2],Tt=dt[3],Rt=dt[4],jt=dt[5],Ft=dt[6],$t=dt[7],zt=kt>Tt?kt:Tt,Ut=kt>Tt?1:kt/Tt,Bt=kt>Tt?Tt/kt:1;g.translate(ft,St),g.rotate(Ft),g.scale(Ut,Bt),g.arc(0,0,zt,Rt,Rt+jt,1-$t),g.scale(1/Ut,1/Bt),g.rotate(-Ft),g.translate(-ft,-St);break;case"z":ot=!0,g.closePath();break}}!ot&&!this.hasFill()?g.strokeShape(this):g.fillStrokeShape(this)}getSelfRect(){let g=[];this.dataArray.forEach(function(St){if(St.command==="A"){const kt=St.points[4],Tt=St.points[5],Rt=St.points[4]+Tt;let jt=Math.PI/180;if(Math.abs(kt-Rt)<jt&&(jt=Math.abs(kt-Rt)),Tt<0)for(let Ft=kt-jt;Ft>Rt;Ft-=jt){const $t=Path.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push($t.x,$t.y)}else for(let Ft=kt+jt;Ft<Rt;Ft+=jt){const $t=Path.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],Ft,0);g.push($t.x,$t.y)}}else if(St.command==="C")for(let kt=0;kt<=1;kt+=.01){const Tt=Path.getPointOnCubicBezier(kt,St.start.x,St.start.y,St.points[0],St.points[1],St.points[2],St.points[3],St.points[4],St.points[5]);g.push(Tt.x,Tt.y)}else g=g.concat(St.points)});let et=g[0],ot=g[0],ct=g[1],ut=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],isNaN(dt)||(et=Math.min(et,dt),ot=Math.max(ot,dt)),isNaN(ft)||(ct=Math.min(ct,ft),ut=Math.max(ut,ft));return{x:et,y:ct,width:ot-et,height:ut-ct}}getLength(){return this.pathLength}getPointAtLength(g){return Path.getPointAtLengthOfDataArray(g,this.dataArray)}static getLineLength(g,et,ot,ct){return Math.sqrt((ot-g)*(ot-g)+(ct-et)*(ct-et))}static getPathLength(g){let et=0;for(let ot=0;ot<g.length;++ot)et+=g[ot].pathLength;return et}static getPointAtLengthOfDataArray(g,et){let ot,ct=0,ut=et.length;if(!ut)return null;for(;ct<ut&&g>et[ct].pathLength;)g-=et[ct].pathLength,++ct;if(ct===ut)return ot=et[ct-1].points.slice(-2),{x:ot[0],y:ot[1]};if(g<.01)return et[ct].command==="M"?(ot=et[ct].points.slice(0,2),{x:ot[0],y:ot[1]}):{x:et[ct].start.x,y:et[ct].start.y};const dt=et[ct],ft=dt.points;switch(dt.command){case"L":return Path.getPointOnLine(g,dt.start.x,dt.start.y,ft[0],ft[1]);case"C":return Path.getPointOnCubicBezier(t2length(g,Path.getPathLength(et),zt=>getCubicArcLength([dt.start.x,ft[0],ft[2],ft[4]],[dt.start.y,ft[1],ft[3],ft[5]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);case"Q":return Path.getPointOnQuadraticBezier(t2length(g,Path.getPathLength(et),zt=>getQuadraticArcLength([dt.start.x,ft[0],ft[2]],[dt.start.y,ft[1],ft[3]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3]);case"A":const St=ft[0],kt=ft[1],Tt=ft[2],Rt=ft[3],jt=ft[5],Ft=ft[6];let $t=ft[4];return $t+=jt*g/dt.pathLength,Path.getPointOnEllipticalArc(St,kt,Tt,Rt,$t,Ft)}return null}static getPointOnLine(g,et,ot,ct,ut,dt,ft){dt=dt??et,ft=ft??ot;const St=this.getLineLength(et,ot,ct,ut);if(St<1e-10)return{x:et,y:ot};if(ct===et)return{x:dt,y:ft+(ut>ot?g:-g)};const kt=(ut-ot)/(ct-et),Tt=Math.sqrt(g*g/(1+kt*kt))*(ct<et?-1:1),Rt=kt*Tt;if(Math.abs(ft-ot-kt*(dt-et))<1e-10)return{x:dt+Tt,y:ft+Rt};const jt=((dt-et)*(ct-et)+(ft-ot)*(ut-ot))/(St*St),Ft=et+jt*(ct-et),$t=ot+jt*(ut-ot),zt=this.getLineLength(dt,ft,Ft,$t),Ut=Math.sqrt(g*g-zt*zt),Bt=Math.sqrt(Ut*Ut/(1+kt*kt))*(ct<et?-1:1),Ht=kt*Bt;return{x:Ft+Bt,y:$t+Ht}}static getPointOnCubicBezier(g,et,ot,ct,ut,dt,ft,St,kt){function Tt(Ut){return Ut*Ut*Ut}function Rt(Ut){return 3*Ut*Ut*(1-Ut)}function jt(Ut){return 3*Ut*(1-Ut)*(1-Ut)}function Ft(Ut){return(1-Ut)*(1-Ut)*(1-Ut)}const $t=St*Tt(g)+dt*Rt(g)+ct*jt(g)+et*Ft(g),zt=kt*Tt(g)+ft*Rt(g)+ut*jt(g)+ot*Ft(g);return{x:$t,y:zt}}static getPointOnQuadraticBezier(g,et,ot,ct,ut,dt,ft){function St(Ft){return Ft*Ft}function kt(Ft){return 2*Ft*(1-Ft)}function Tt(Ft){return(1-Ft)*(1-Ft)}const Rt=dt*St(g)+ct*kt(g)+et*Tt(g),jt=ft*St(g)+ut*kt(g)+ot*Tt(g);return{x:Rt,y:jt}}static getPointOnEllipticalArc(g,et,ot,ct,ut,dt){const ft=Math.cos(dt),St=Math.sin(dt),kt={x:ot*Math.cos(ut),y:ct*Math.sin(ut)};return{x:g+(kt.x*ft-kt.y*St),y:et+(kt.x*St+kt.y*ft)}}static parsePathData(g){if(!g)return[];let et=g;const ot=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];et=et.replace(new RegExp(" ","g"),",");for(let Rt=0;Rt<ot.length;Rt++)et=et.replace(new RegExp(ot[Rt],"g"),"|"+ot[Rt]);const ct=et.split("|"),ut=[],dt=[];let ft=0,St=0;const kt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let Tt;for(let Rt=1;Rt<ct.length;Rt++){let jt=ct[Rt],Ft=jt.charAt(0);for(jt=jt.slice(1),dt.length=0;Tt=kt.exec(jt);)dt.push(Tt[0]);let $t=[],zt=Ft==="A"||Ft==="a"?0:-1;for(let Ut=0,Bt=dt.length;Ut<Bt;Ut++){const Ht=dt[Ut];if(Ht==="00"){$t.push(0,0),zt>=0&&(zt+=2,zt>=7&&(zt-=7));continue}if(zt>=0){if(zt===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(Ht)){$t.push(parseInt(Ht[0],10)),$t.push(parseInt(Ht[1],10)),$t.push(parseFloat(Ht.slice(2))),zt+=3,zt>=7&&(zt-=7);continue}if(Ht==="11"||Ht==="10"||Ht==="01"){$t.push(parseInt(Ht[0],10)),$t.push(parseInt(Ht[1],10)),zt+=2,zt>=7&&(zt-=7);continue}if(Ht==="0"||Ht==="1"){$t.push(parseInt(Ht,10)),zt+=1,zt>=7&&(zt-=7);continue}}else if(zt===4){if(/^[01]\d+(?:\.\d+)?$/.test(Ht)){$t.push(parseInt(Ht[0],10)),$t.push(parseFloat(Ht.slice(1))),zt+=2,zt>=7&&(zt-=7);continue}if(Ht==="0"||Ht==="1"){$t.push(parseInt(Ht,10)),zt+=1,zt>=7&&(zt-=7);continue}}const Jt=parseFloat(Ht);isNaN(Jt)?$t.push(0):$t.push(Jt),zt+=1,zt>=7&&(zt-=7)}else{const Jt=parseFloat(Ht);isNaN(Jt)?$t.push(0):$t.push(Jt)}}for(;$t.length>0&&!isNaN($t[0]);){let Ut="",Bt=[];const Ht=ft,Jt=St;let Zt,tn,nn,rn,on,pn,dn,hn,un,En;switch(Ft){case"l":ft+=$t.shift(),St+=$t.shift(),Ut="L",Bt.push(ft,St);break;case"L":ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"m":const wn=$t.shift(),Sn=$t.shift();if(ft+=wn,St+=Sn,Ut="M",ut.length>2&&ut[ut.length-1].command==="z"){for(let fn=ut.length-2;fn>=0;fn--)if(ut[fn].command==="M"){ft=ut[fn].points[0]+wn,St=ut[fn].points[1]+Sn;break}}Bt.push(ft,St),Ft="l";break;case"M":ft=$t.shift(),St=$t.shift(),Ut="M",Bt.push(ft,St),Ft="L";break;case"h":ft+=$t.shift(),Ut="L",Bt.push(ft,St);break;case"H":ft=$t.shift(),Ut="L",Bt.push(ft,St);break;case"v":St+=$t.shift(),Ut="L",Bt.push(ft,St);break;case"V":St=$t.shift(),Ut="L",Bt.push(ft,St);break;case"C":Bt.push($t.shift(),$t.shift(),$t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"c":Bt.push(ft+$t.shift(),St+$t.shift(),ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Ut="C",Bt.push(ft,St);break;case"S":tn=ft,nn=St,Zt=ut[ut.length-1],Zt.command==="C"&&(tn=ft+(ft-Zt.points[2]),nn=St+(St-Zt.points[3])),Bt.push(tn,nn,$t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Ut="C",Bt.push(ft,St);break;case"s":tn=ft,nn=St,Zt=ut[ut.length-1],Zt.command==="C"&&(tn=ft+(ft-Zt.points[2]),nn=St+(St-Zt.points[3])),Bt.push(tn,nn,ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Ut="C",Bt.push(ft,St);break;case"Q":Bt.push($t.shift(),$t.shift()),ft=$t.shift(),St=$t.shift(),Bt.push(ft,St);break;case"q":Bt.push(ft+$t.shift(),St+$t.shift()),ft+=$t.shift(),St+=$t.shift(),Ut="Q",Bt.push(ft,St);break;case"T":tn=ft,nn=St,Zt=ut[ut.length-1],Zt.command==="Q"&&(tn=ft+(ft-Zt.points[0]),nn=St+(St-Zt.points[1])),ft=$t.shift(),St=$t.shift(),Ut="Q",Bt.push(tn,nn,ft,St);break;case"t":tn=ft,nn=St,Zt=ut[ut.length-1],Zt.command==="Q"&&(tn=ft+(ft-Zt.points[0]),nn=St+(St-Zt.points[1])),ft+=$t.shift(),St+=$t.shift(),Ut="Q",Bt.push(tn,nn,ft,St);break;case"A":rn=$t.shift(),on=$t.shift(),pn=$t.shift(),dn=$t.shift(),hn=$t.shift(),un=ft,En=St,ft=$t.shift(),St=$t.shift(),Ut="A",Bt=this.convertEndpointToCenterParameterization(un,En,ft,St,dn,hn,rn,on,pn);break;case"a":rn=$t.shift(),on=$t.shift(),pn=$t.shift(),dn=$t.shift(),hn=$t.shift(),un=ft,En=St,ft+=$t.shift(),St+=$t.shift(),Ut="A",Bt=this.convertEndpointToCenterParameterization(un,En,ft,St,dn,hn,rn,on,pn);break}ut.push({command:Ut||Ft,points:Bt,start:{x:Ht,y:Jt},pathLength:this.calcLength(Ht,Jt,Ut||Ft,Bt)})}(Ft==="z"||Ft==="Z")&&ut.push({command:"z",points:[],start:void 0,pathLength:0})}return ut}static calcLength(g,et,ot,ct){let ut,dt,ft,St;const kt=Path;switch(ot){case"L":return kt.getLineLength(g,et,ct[0],ct[1]);case"C":return getCubicArcLength([g,ct[0],ct[2],ct[4]],[et,ct[1],ct[3],ct[5]],1);case"Q":return getQuadraticArcLength([g,ct[0],ct[2]],[et,ct[1],ct[3]],1);case"A":ut=0;const Tt=ct[4],Rt=ct[5],jt=ct[4]+Rt;let Ft=Math.PI/180;if(Math.abs(Tt-jt)<Ft&&(Ft=Math.abs(Tt-jt)),dt=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],Tt,0),Rt<0)for(St=Tt-Ft;St>jt;St-=Ft)ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],St,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;else for(St=Tt+Ft;St<jt;St+=Ft)ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],St,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;return ft=kt.getPointOnEllipticalArc(ct[0],ct[1],ct[2],ct[3],jt,0),ut+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),ut}return 0}static convertEndpointToCenterParameterization(g,et,ot,ct,ut,dt,ft,St,kt){const Tt=kt*(Math.PI/180),Rt=Math.cos(Tt)*(g-ot)/2+Math.sin(Tt)*(et-ct)/2,jt=-1*Math.sin(Tt)*(g-ot)/2+Math.cos(Tt)*(et-ct)/2,Ft=Rt*Rt/(ft*ft)+jt*jt/(St*St);Ft>1&&(ft*=Math.sqrt(Ft),St*=Math.sqrt(Ft));let $t=Math.sqrt((ft*ft*(St*St)-ft*ft*(jt*jt)-St*St*(Rt*Rt))/(ft*ft*(jt*jt)+St*St*(Rt*Rt)));ut===dt&&($t*=-1),isNaN($t)&&($t=0);const zt=$t*ft*jt/St,Ut=$t*-St*Rt/ft,Bt=(g+ot)/2+Math.cos(Tt)*zt-Math.sin(Tt)*Ut,Ht=(et+ct)/2+Math.sin(Tt)*zt+Math.cos(Tt)*Ut,Jt=function(dn){return Math.sqrt(dn[0]*dn[0]+dn[1]*dn[1])},Zt=function(dn,hn){return(dn[0]*hn[0]+dn[1]*hn[1])/(Jt(dn)*Jt(hn))},tn=function(dn,hn){return(dn[0]*hn[1]<dn[1]*hn[0]?-1:1)*Math.acos(Zt(dn,hn))},nn=tn([1,0],[(Rt-zt)/ft,(jt-Ut)/St]),rn=[(Rt-zt)/ft,(jt-Ut)/St],on=[(-1*Rt-zt)/ft,(-1*jt-Ut)/St];let pn=tn(rn,on);return Zt(rn,on)<=-1&&(pn=Math.PI),Zt(rn,on)>=1&&(pn=0),dt===0&&pn>0&&(pn=pn-2*Math.PI),dt===1&&pn<0&&(pn=pn+2*Math.PI),[Bt,Ht,ft,St,nn,pn,Tt,dt]}}Path.prototype.className="Path";Path.prototype._attrsAffectingSize=["data"];_registerNode(Path);Factory.addGetterSetter(Path,"data");let Arrow$1=class extends Line{_sceneFunc(g){super._sceneFunc(g);const et=Math.PI*2,ot=this.points();let ct=ot;const ut=this.tension()!==0&&ot.length>4;ut&&(ct=this.getTensionPoints());const dt=this.pointerLength(),ft=ot.length;let St,kt;if(ut){const jt=[ct[ct.length-4],ct[ct.length-3],ct[ct.length-2],ct[ct.length-1],ot[ft-2],ot[ft-1]],Ft=Path.calcLength(ct[ct.length-4],ct[ct.length-3],"C",jt),$t=Path.getPointOnQuadraticBezier(Math.min(1,1-dt/Ft),jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]);St=ot[ft-2]-$t.x,kt=ot[ft-1]-$t.y}else St=ot[ft-2]-ot[ft-4],kt=ot[ft-1]-ot[ft-3];const Tt=(Math.atan2(kt,St)+et)%et,Rt=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(ot[ft-2],ot[ft-1]),g.rotate(Tt),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(ot[0],ot[1]),ut?(St=(ct[0]+ct[2])/2-ot[0],kt=(ct[1]+ct[3])/2-ot[1]):(St=ot[2]-ot[0],kt=ot[3]-ot[1]),g.rotate((Math.atan2(-kt,-St)+et)%et),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const et=this.dashEnabled();et&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),et&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),et=this.pointerWidth()/2;return{x:g.x,y:g.y-et,width:g.width,height:g.height+et*2}}};Arrow$1.prototype.className="Arrow";_registerNode(Arrow$1);Factory.addGetterSetter(Arrow$1,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow$1,"pointerAtEnding",!0);class Circle extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius()!==g/2&&this.radius(g/2)}setHeight(g){this.radius()!==g/2&&this.radius(g/2)}}Circle.prototype._centroid=!0;Circle.prototype.className="Circle";Circle.prototype._attrsAffectingSize=["radius"];_registerNode(Circle);Factory.addGetterSetter(Circle,"radius",0,getNumberValidator());let Ellipse$1=class extends Shape{_sceneFunc(g){const et=this.radiusX(),ot=this.radiusY();g.beginPath(),g.save(),et!==ot&&g.scale(1,ot/et),g.arc(0,0,et,0,Math.PI*2,!1),g.restore(),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(g){this.radiusX(g/2)}setHeight(g){this.radiusY(g/2)}};Ellipse$1.prototype.className="Ellipse";Ellipse$1.prototype._centroid=!0;Ellipse$1.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse$1);Factory.addComponentsGetterSetter(Ellipse$1,"radius",["x","y"]);Factory.addGetterSetter(Ellipse$1,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse$1,"radiusY",0,getNumberValidator());let Image$1=class E4 extends Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",et=>{this._removeImageLoad(et.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),et=this.hasShadow();return g&&et?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const et=this.getWidth(),ot=this.getHeight(),ct=this.cornerRadius(),ut=this.attrs.image;let dt;if(ut){const ft=this.attrs.cropWidth,St=this.attrs.cropHeight;ft&&St?dt=[ut,this.cropX(),this.cropY(),ft,St,0,0,et,ot]:dt=[ut,0,0,et,ot]}(this.hasFill()||this.hasStroke()||ct)&&(g.beginPath(),ct?Util.drawRoundedRectPath(g,et,ot,ct):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)),ut&&(ct&&g.clip(),g.drawImage.apply(g,dt))}_hitFunc(g){const et=this.width(),ot=this.height(),ct=this.cornerRadius();g.beginPath(),ct?Util.drawRoundedRectPath(g,et,ot,ct):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,et,ot;return(ot=(g=this.attrs.width)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.width)!==null&&ot!==void 0?ot:0}getHeight(){var g,et,ot;return(ot=(g=this.attrs.height)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.height)!==null&&ot!==void 0?ot:0}static fromURL(g,et,ot=null){const ct=Util.createImageElement();ct.onload=function(){const ut=new E4({image:ct});et(ut)},ct.onerror=ot,ct.crossOrigin="Anonymous",ct.src=g}};Image$1.prototype.className="Image";Image$1.prototype._attrsAffectingSize=["image"];_registerNode(Image$1);Factory.addGetterSetter(Image$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$1,"image");Factory.addComponentsGetterSetter(Image$1,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$1,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$1,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group{constructor(g){super(g),this.on("add.konva",function(et){this._addListeners(et.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let et=this,ot;const ct=function(){et._sync()};for(ot=0;ot<attrChangeListLen$1;ot++)g.on(ATTR_CHANGE_LIST$2[ot]+CHANGE_KONVA$1,ct)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),et=this.getTag(),ot,ct,ut,dt,ft,St,kt;if(g&&et){switch(ot=g.width(),ct=g.height(),ut=et.pointerDirection(),dt=et.pointerWidth(),kt=et.pointerHeight(),ft=0,St=0,ut){case UP:ft=ot/2,St=-1*kt;break;case RIGHT$1:ft=ot+dt,St=ct/2;break;case DOWN:ft=ot/2,St=ct+kt;break;case LEFT$1:ft=-1*dt,St=ct/2;break}et.setAttrs({x:-1*ft,y:-1*St,width:ot,height:ct}),g.setAttrs({x:-1*ft,y:-1*St})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(g){const et=this.width(),ot=this.height(),ct=this.pointerDirection(),ut=this.pointerWidth(),dt=this.pointerHeight(),ft=this.cornerRadius();let St=0,kt=0,Tt=0,Rt=0;typeof ft=="number"?St=kt=Tt=Rt=Math.min(ft,et/2,ot/2):(St=Math.min(ft[0]||0,et/2,ot/2),kt=Math.min(ft[1]||0,et/2,ot/2),Rt=Math.min(ft[2]||0,et/2,ot/2),Tt=Math.min(ft[3]||0,et/2,ot/2)),g.beginPath(),g.moveTo(St,0),ct===UP&&(g.lineTo((et-ut)/2,0),g.lineTo(et/2,-1*dt),g.lineTo((et+ut)/2,0)),g.lineTo(et-kt,0),g.arc(et-kt,kt,kt,Math.PI*3/2,0,!1),ct===RIGHT$1&&(g.lineTo(et,(ot-dt)/2),g.lineTo(et+ut,ot/2),g.lineTo(et,(ot+dt)/2)),g.lineTo(et,ot-Rt),g.arc(et-Rt,ot-Rt,Rt,0,Math.PI/2,!1),ct===DOWN&&(g.lineTo((et+ut)/2,ot),g.lineTo(et/2,ot+dt),g.lineTo((et-ut)/2,ot)),g.lineTo(Tt,ot),g.arc(Tt,ot-Tt,Tt,Math.PI/2,Math.PI,!1),ct===LEFT$1&&(g.lineTo(0,(ot+dt)/2),g.lineTo(-1*ut,ot/2),g.lineTo(0,(ot-dt)/2)),g.lineTo(0,St),g.arc(St,St,St,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,et=0,ot=this.pointerWidth(),ct=this.pointerHeight(),ut=this.pointerDirection(),dt=this.width(),ft=this.height();return ut===UP?(et-=ct,ft+=ct):ut===DOWN?ft+=ct:ut===LEFT$1?(g-=ot*1.5,dt+=ot):ut===RIGHT$1&&(dt+=ot*1.5),{x:g,y:et,width:dt,height:ft}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$1=class extends Shape{_sceneFunc(g){const et=this.cornerRadius(),ot=this.width(),ct=this.height();g.beginPath(),et?Util.drawRoundedRectPath(g,ot,ct,et):g.rect(0,0,ot,ct),g.closePath(),g.fillStrokeShape(this)}};Rect$1.prototype.className="Rect";_registerNode(Rect$1);Factory.addGetterSetter(Rect$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(g){const et=this._getPoints(),ot=this.radius(),ct=this.sides(),ut=this.cornerRadius();if(g.beginPath(),ut)Util.drawRoundedPolygonPath(g,et,ct,ot,ut);else{g.moveTo(et[0].x,et[0].y);for(let dt=1;dt<et.length;dt++)g.lineTo(et[dt].x,et[dt].y)}g.closePath(),g.fillStrokeShape(this)}_getPoints(){const g=this.attrs.sides,et=this.attrs.radius||0,ot=[];for(let ct=0;ct<g;ct++)ot.push({x:et*Math.sin(ct*2*Math.PI/g),y:-1*et*Math.cos(ct*2*Math.PI/g)});return ot}getSelfRect(){const g=this._getPoints();let et=g[0].x,ot=g[0].y,ct=g[0].x,ut=g[0].y;return g.forEach(dt=>{et=Math.min(et,dt.x),ot=Math.max(ot,dt.x),ct=Math.min(ct,dt.y),ut=Math.max(ut,dt.y)}),{x:et,y:ct,width:ot-et,height:ut-ct}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,PIx2,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),PIx2,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(g){super(g),this._updated=!0,this.anim=new Animation(()=>{const et=this._updated;return this._updated=!1,et}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const et=this.animation(),ot=this.frameIndex(),ct=ot*4,ut=this.animations()[et],dt=this.frameOffsets(),ft=ut[ct+0],St=ut[ct+1],kt=ut[ct+2],Tt=ut[ct+3],Rt=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,kt,Tt),g.closePath(),g.fillStrokeShape(this)),Rt)if(dt){const jt=dt[et],Ft=ot*2;g.drawImage(Rt,ft,St,kt,Tt,jt[Ft+0],jt[Ft+1],kt,Tt)}else g.drawImage(Rt,ft,St,kt,Tt,0,0,kt,Tt)}_hitFunc(g){const et=this.animation(),ot=this.frameIndex(),ct=ot*4,ut=this.animations()[et],dt=this.frameOffsets(),ft=ut[ct+2],St=ut[ct+3];if(g.beginPath(),dt){const kt=dt[et],Tt=ot*2;g.rect(kt[Tt+0],kt[Tt+1],ft,St)}else g.rect(0,0,ft,St);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),et=this.animation(),ot=this.animations(),ct=ot[et],ut=ct.length/4;g<ut-1?this.frameIndex(g+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(g){const et=this.innerRadius(),ot=this.outerRadius(),ct=this.numPoints();g.beginPath(),g.moveTo(0,0-ot);for(let ut=1;ut<ct*2;ut++){const dt=ut%2===0?ot:et,ft=dt*Math.sin(ut*Math.PI/ct),St=-1*dt*Math.cos(ut*Math.PI/ct);g.lineTo(ft,St)}g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(it){return[...it].reduce((g,et,ot,ct)=>{if(/\p{Emoji}/u.test(et)){const ut=ct[ot+1];ut&&/\p{Emoji_Modifier}|\u200D/u.test(ut)?(g.push(et+ut),ct[ot+1]=""):g.push(et)}else/\p{Regional_Indicator}{2}/u.test(et+(ct[ot+1]||""))?g.push(et+ct[ot+1]):ot>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(et)?g[g.length-1]+=et:et&&g.push(et);return g},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(it){return it.split(",").map(g=>{g=g.trim();const et=g.indexOf(" ")>=0,ot=g.indexOf('"')>=0||g.indexOf("'")>=0;return et&&!ot&&(g=`"${g}"`),g}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(it){it.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(it){it.setAttr("miterLimit",2),it.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(it){return it=it||{},!it.fillLinearGradientColorStops&&!it.fillRadialGradientColorStops&&!it.fillPatternImage&&(it.fill=it.fill||"black"),it}let Text$2=class extends Shape{constructor(g){super(checkDefaultFill(g)),this._partialTextX=0,this._partialTextY=0;for(let et=0;et<attrChangeListLen;et++)this.on(ATTR_CHANGE_LIST$1[et]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(g){var et,ot;const ct=this.textArr,ut=ct.length;if(!this.text())return;let dt=this.padding(),ft=this.fontSize(),St=this.lineHeight()*ft,kt=this.verticalAlign(),Tt=this.direction(),Rt=0,jt=this.align(),Ft=this.getWidth(),$t=this.letterSpacing(),zt=this.charRenderFunc(),Ut=this.fill(),Bt=this.textDecoration(),Ht=Bt.indexOf("underline")!==-1,Jt=Bt.indexOf("line-through")!==-1,Zt;Tt=Tt===INHERIT?g.direction:Tt;let tn=St/2,nn=MIDDLE;if(!Konva$1.legacyTextRendering){const rn=this.measureSize("M");nn="alphabetic";const on=(et=rn.fontBoundingBoxAscent)!==null&&et!==void 0?et:rn.actualBoundingBoxAscent,pn=(ot=rn.fontBoundingBoxDescent)!==null&&ot!==void 0?ot:rn.actualBoundingBoxDescent;tn=(on-pn)/2+St/2}for(Tt===RTL&&g.setAttr("direction",Tt),g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",nn),g.setAttr("textAlign",LEFT),kt===MIDDLE?Rt=(this.getHeight()-ut*St-dt*2)/2:kt===BOTTOM&&(Rt=this.getHeight()-ut*St-dt*2),g.translate(dt,Rt+dt),Zt=0;Zt<ut;Zt++){let rn=0,on=0;const pn=ct[Zt],dn=pn.text,hn=pn.width,un=pn.lastInParagraph;if(g.save(),jt===RIGHT?rn+=Ft-hn-dt*2:jt===CENTER&&(rn+=(Ft-hn-dt*2)/2),Ht){g.save(),g.beginPath();const En=Konva$1.legacyTextRendering?Math.round(ft/2):Math.round(ft/4),wn=rn,Sn=tn+on+En;g.moveTo(wn,Sn);const fn=jt===JUSTIFY&&!un?Ft-dt*2:hn;g.lineTo(wn+Math.round(fn),Sn),g.lineWidth=ft/15;const xn=this._getLinearGradient();g.strokeStyle=xn||Ut,g.stroke(),g.restore()}if(Tt!==RTL&&($t!==0||jt===JUSTIFY||zt)){const En=dn.split(" ").length-1,wn=stringToArray(dn);for(let Sn=0;Sn<wn.length;Sn++){const fn=wn[Sn];if(fn===" "&&!un&&jt===JUSTIFY&&(rn+=(Ft-dt*2-hn)/En),this._partialTextX=rn,this._partialTextY=tn+on,this._partialText=fn,zt){g.save();const an=ct.slice(0,Zt).reduce((bn,mn)=>bn+stringToArray(mn.text).length,0),cn=Sn+an;zt({char:fn,index:cn,x:rn,y:tn+on,lineIndex:Zt,column:Sn,isLastInLine:un,width:this.measureSize(fn).width,context:g})}g.fillStrokeShape(this),zt&&g.restore(),rn+=this.measureSize(fn).width+$t}}else $t!==0&&g.setAttr("letterSpacing",`${$t}px`),this._partialTextX=rn,this._partialTextY=tn+on,this._partialText=dn,g.fillStrokeShape(this);if(Jt){g.save(),g.beginPath();const En=Konva$1.legacyTextRendering?0:-Math.round(ft/4),wn=jt===JUSTIFY?0:rn;g.moveTo(wn,tn+on+En);const Sn=jt===JUSTIFY&&!un?Ft-dt*2:hn;g.lineTo(wn+Math.round(Sn),tn+on+En),g.lineWidth=ft/15;const fn=this._getLinearGradient();g.strokeStyle=fn||Ut,g.stroke(),g.restore()}g.restore(),ut>1&&(tn+=St)}}_hitFunc(g){const et=this.getWidth(),ot=this.getHeight();g.beginPath(),g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}setText(g){const et=Util._isString(g)?g:g==null?"":g+"";return this._setAttr(TEXT,et),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(g){var et,ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt;let Ft=getDummyContext(),$t=this.fontSize(),zt;Ft.save(),Ft.font=this._getContextFont(),zt=Ft.measureText(g),Ft.restore();const Ut=$t/100;return{actualBoundingBoxAscent:(et=zt.actualBoundingBoxAscent)!==null&&et!==void 0?et:71.58203125*Ut,actualBoundingBoxDescent:(ot=zt.actualBoundingBoxDescent)!==null&&ot!==void 0?ot:0,actualBoundingBoxLeft:(ct=zt.actualBoundingBoxLeft)!==null&&ct!==void 0?ct:-7.421875*Ut,actualBoundingBoxRight:(ut=zt.actualBoundingBoxRight)!==null&&ut!==void 0?ut:75.732421875*Ut,alphabeticBaseline:(dt=zt.alphabeticBaseline)!==null&&dt!==void 0?dt:0,emHeightAscent:(ft=zt.emHeightAscent)!==null&&ft!==void 0?ft:100*Ut,emHeightDescent:(St=zt.emHeightDescent)!==null&&St!==void 0?St:-20*Ut,fontBoundingBoxAscent:(kt=zt.fontBoundingBoxAscent)!==null&&kt!==void 0?kt:91*Ut,fontBoundingBoxDescent:(Tt=zt.fontBoundingBoxDescent)!==null&&Tt!==void 0?Tt:21*Ut,hangingBaseline:(Rt=zt.hangingBaseline)!==null&&Rt!==void 0?Rt:72.80000305175781*Ut,ideographicBaseline:(jt=zt.ideographicBaseline)!==null&&jt!==void 0?jt:-21*Ut,width:zt.width,height:$t}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(g){this.align()===JUSTIFY&&(g=g.trim());const ot=this._getTextWidth(g);return this.textArr.push({text:g,width:ot,lastInParagraph:!1})}_getTextWidth(g){const et=this.letterSpacing(),ot=g.length;return getDummyContext().measureText(g).width+et*ot}_setTextData(){let g=this.text().split(`
`),et=+this.fontSize(),ot=0,ct=this.lineHeight()*et,ut=this.attrs.width,dt=this.attrs.height,ft=ut!==AUTO&&ut!==void 0,St=dt!==AUTO&&dt!==void 0,kt=this.padding(),Tt=ut-kt*2,Rt=dt-kt*2,jt=0,Ft=this.wrap(),$t=Ft!==NONE,zt=Ft!==CHAR&&$t,Ut=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const Bt=Ut?this._getTextWidth(ELLIPSIS):0;for(let Ht=0,Jt=g.length;Ht<Jt;++Ht){let Zt=g[Ht],tn=this._getTextWidth(Zt);if(ft&&tn>Tt)for(;Zt.length>0;){let nn=0,rn=stringToArray(Zt).length,on="",pn=0;for(;nn<rn;){const dn=nn+rn>>>1,hn=stringToArray(Zt),un=hn.slice(0,dn+1).join(""),En=this._getTextWidth(un);(Ut&&St&&jt+ct>Rt?En+Bt:En)<=Tt?(nn=dn+1,on=un,pn=En):rn=dn}if(on){if(zt){const un=stringToArray(Zt),En=stringToArray(on),wn=un[En.length],Sn=wn===SPACE||wn===DASH;let fn;if(Sn&&pn<=Tt)fn=En.length;else{const xn=En.lastIndexOf(SPACE),an=En.lastIndexOf(DASH);fn=Math.max(xn,an)+1}fn>0&&(nn=fn,on=un.slice(0,nn).join(""),pn=this._getTextWidth(on))}if(on=on.trimRight(),this._addTextLine(on),ot=Math.max(ot,pn),jt+=ct,this._shouldHandleEllipsis(jt)){this._tryToAddEllipsisToLastLine();break}if(Zt=stringToArray(Zt).slice(nn).join("").trimLeft(),Zt.length>0&&(tn=this._getTextWidth(Zt),tn<=Tt)){this._addTextLine(Zt),jt+=ct,ot=Math.max(ot,tn);break}}else break}else this._addTextLine(Zt),jt+=ct,ot=Math.max(ot,tn),this._shouldHandleEllipsis(jt)&&Ht<Jt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),St&&jt+ct>Rt)break}this.textHeight=et,this.textWidth=ot}_shouldHandleEllipsis(g){const et=+this.fontSize(),ot=this.lineHeight()*et,ct=this.attrs.height,ut=ct!==AUTO&&ct!==void 0,dt=this.padding(),ft=ct-dt*2;return!(this.wrap()!==NONE)||ut&&g+ot>ft}_tryToAddEllipsisToLastLine(){const g=this.attrs.width,et=g!==AUTO&&g!==void 0,ot=this.padding(),ct=g-ot*2,ut=this.ellipsis(),dt=this.textArr[this.textArr.length-1];!dt||!ut||(et&&(this._getTextWidth(dt.text+ELLIPSIS)<ct||(dt.text=dt.text.slice(0,dt.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(dt.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const g=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,et=this.hasShadow();return g&&et?!0:super._useBufferCanvas()}};Text$2.prototype._fillFunc=_fillFunc$1;Text$2.prototype._strokeFunc=_strokeFunc$1;Text$2.prototype.className=TEXT_UPPER;Text$2.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$2);Factory.overWriteSetter(Text$2,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$2,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$2,"direction",INHERIT);Factory.addGetterSetter(Text$2,"fontFamily","Arial");Factory.addGetterSetter(Text$2,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$2,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$2,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$2,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$2,"align",LEFT);Factory.addGetterSetter(Text$2,"verticalAlign",TOP);Factory.addGetterSetter(Text$2,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$2,"wrap",WORD);Factory.addGetterSetter(Text$2,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$2,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$2,"text","",getStringValidator());Factory.addGetterSetter(Text$2,"textDecoration","");Factory.addGetterSetter(Text$2,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(it){it.fillText(this.partialText,0,0)}function _strokeFunc(it){it.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(g){super(g),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const et=this.pathLength;return g>et?null:Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const et=this.textDecoration(),ot=this.fill(),ct=this.fontSize(),ut=this.glyphInfo,dt=et.indexOf("underline")!==-1,ft=et.indexOf("line-through")!==-1;dt&&g.beginPath();for(let St=0;St<ut.length;St++){g.save();const kt=ut[St].p0;g.translate(kt.x,kt.y),g.rotate(ut[St].rotation),this.partialText=ut[St].text,g.fillStrokeShape(this),dt&&(St===0&&g.moveTo(0,ct/2+1),g.lineTo(ut[St].width,ct/2+1)),g.restore()}if(dt&&(g.strokeStyle=ot,g.lineWidth=ct/20,g.stroke()),ft){g.beginPath();for(let St=0;St<ut.length;St++){g.save();const kt=ut[St].p0;g.translate(kt.x,kt.y),g.rotate(ut[St].rotation),St===0&&g.moveTo(0,0),g.lineTo(ut[St].width,0),g.restore()}g.strokeStyle=ot,g.lineWidth=ct/20,g.stroke()}g.restore()}_hitFunc(g){g.beginPath();const et=this.glyphInfo;if(et.length>=1){const ot=et[0].p0;g.moveTo(ot.x,ot.y)}for(let ot=0;ot<et.length;ot++){const ct=et[ot].p1;g.lineTo(ct.x,ct.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return Text$2.prototype.setText.call(this,g)}_getContextFont(){return Text$2.prototype._getContextFont.call(this)}_getTextSize(g){const ot=this.dummyCanvas.getContext("2d");ot.save(),ot.font=this._getContextFont();const ct=ot.measureText(g);return ot.restore(),{width:ct.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const g=stringToArray(this.text()),et=[];let ot=0;for(let Rt=0;Rt<g.length;Rt++)et.push({char:g[Rt],width:this._getTextSize(g[Rt]).width}),ot+=et[Rt].width;const{height:ct}=this._getTextSize(this.attrs.text);if(this.textWidth=ot,this.textHeight=ct,this.glyphInfo=[],!this.attrs.data)return null;const ut=this.letterSpacing(),dt=this.align(),ft=this.kerningFunc(),St=Math.max(this.textWidth+((this.attrs.text||"").length-1)*ut,0);let kt=0;dt==="center"&&(kt=Math.max(0,this.pathLength/2-St/2)),dt==="right"&&(kt=Math.max(0,this.pathLength-St));let Tt=kt;for(let Rt=0;Rt<et.length;Rt++){const jt=this._getPointAtLength(Tt);if(!jt)return;const Ft=et[Rt].char;let $t=et[Rt].width+ut;if(Ft===" "&&dt==="justify"){const Zt=this.text().split(" ").length-1;$t+=(this.pathLength-St)/Zt}const zt=this._getPointAtLength(Tt+$t);if(!zt)return;const Ut=Path.getLineLength(jt.x,jt.y,zt.x,zt.y);let Bt=0;if(ft)try{Bt=ft(et[Rt-1].char,Ft)*this.fontSize()}catch{Bt=0}jt.x+=Bt,zt.x+=Bt,this.textWidth+=Bt;const Ht=Path.getPointOnLine(Bt+Ut/2,jt.x,jt.y,zt.x,zt.y),Jt=Math.atan2(zt.y-jt.y,zt.x-jt.x);this.glyphInfo.push({transposeX:Ht.x,transposeY:Ht.y,text:g[Rt],rotation:Jt,p0:jt,p1:zt,width:Ut}),Tt+=$t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(kt){g.push(kt.p0.x),g.push(kt.p0.y),g.push(kt.p1.x),g.push(kt.p1.y)});let et=g[0]||0,ot=g[0]||0,ct=g[1]||0,ut=g[1]||0,dt,ft;for(let kt=0;kt<g.length/2;kt++)dt=g[kt*2],ft=g[kt*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ct=Math.min(ct,ft),ut=Math.max(ut,ft);const St=this.fontSize();return{x:et-St/2,y:ct-St/2,width:ot-et+St,height:ut-ct+St}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(it=>it+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$1._global;function getCursor(it,g,et){if(it==="rotater")return et;g+=Util.degToRad(ANGLES[it]||0);const ot=(Util.radToDeg(g)%360+360)%360;return Util._inRange(ot,315+22.5,360)||Util._inRange(ot,0,22.5)?"ns-resize":Util._inRange(ot,45-22.5,45+22.5)?"nesw-resize":Util._inRange(ot,90-22.5,90+22.5)?"ew-resize":Util._inRange(ot,135-22.5,135+22.5)?"nwse-resize":Util._inRange(ot,180-22.5,180+22.5)?"ns-resize":Util._inRange(ot,225-22.5,225+22.5)?"nesw-resize":Util._inRange(ot,270-22.5,270+22.5)?"ew-resize":Util._inRange(ot,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+ot),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],MAX_SAFE_INTEGER=1e8;function getCenter(it){return{x:it.x+it.width/2*Math.cos(it.rotation)+it.height/2*Math.sin(-it.rotation),y:it.y+it.height/2*Math.cos(it.rotation)+it.width/2*Math.sin(it.rotation)}}function rotateAroundPoint(it,g,et){const ot=et.x+(it.x-et.x)*Math.cos(g)-(it.y-et.y)*Math.sin(g),ct=et.y+(it.x-et.x)*Math.sin(g)+(it.y-et.y)*Math.cos(g);return{...it,rotation:it.rotation+g,x:ot,y:ct}}function rotateAroundCenter(it,g){const et=getCenter(it);return rotateAroundPoint(it,g,et)}function getSnap(it,g,et){let ot=g;for(let ct=0;ct<it.length;ct++){const ut=Konva$1.getAngle(it[ct]),dt=Math.abs(ut-g)%(Math.PI*2);Math.min(dt,Math.PI*2-dt)<et&&(ot=ut)}return ot}let activeTransformersCount=0,Transformer$1=class extends Group{constructor(g){super(g),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(g){return this.setNode(g),this}setNode(g){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([g])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(g=[]){this._nodes&&this._nodes.length&&this.detach();const et=g.filter(ct=>ct.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=g=et,g.length===1&&this.useSingleNodeRotation()?this.rotation(g[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(ct=>{const ut=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(ct._attrsAffectingSize.length){const dt=ct._attrsAffectingSize.map(ft=>ft+"Change."+this._getEventNamespace()).join(" ");ct.on(dt,ut)}ct.on(TRANSFORM_CHANGE_STR.map(dt=>dt+`.${this._getEventNamespace()}`).join(" "),ut),ct.on(`absoluteTransformChange.${this._getEventNamespace()}`,ut),this._proxyDrag(ct)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(g){let et;g.on(`dragstart.${this._getEventNamespace()}`,ot=>{et=g.getAbsolutePosition(),!this.isDragging()&&g!==this.findOne(".back")&&this.startDrag(ot,!1)}),g.on(`dragmove.${this._getEventNamespace()}`,ot=>{if(!et)return;const ct=g.getAbsolutePosition(),ut=ct.x-et.x,dt=ct.y-et.y;this.nodes().forEach(ft=>{if(ft===g||ft.isDragging())return;const St=ft.getAbsolutePosition();ft.setAbsolutePosition({x:St.x+ut,y:St.y+dt}),ft.startDrag(ot)}),et=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(g=>{g.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(g,et=this.rotation(),ot){const ct=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ut=g.getAbsoluteScale(ot),dt=g.getAbsolutePosition(ot),ft=ct.x*ut.x-g.offsetX()*ut.x,St=ct.y*ut.y-g.offsetY()*ut.y,kt=(Konva$1.getAngle(g.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Tt={x:dt.x+ft*Math.cos(kt)+St*Math.sin(-kt),y:dt.y+St*Math.cos(kt)+ft*Math.sin(kt),width:ct.width*ut.x,height:ct.height*ut.y,rotation:kt};return rotateAroundPoint(Tt,-Konva$1.getAngle(et),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-MAX_SAFE_INTEGER,y:-MAX_SAFE_INTEGER,width:0,height:0,rotation:0};const et=[];this.nodes().map(kt=>{const Tt=kt.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Rt=[{x:Tt.x,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y+Tt.height},{x:Tt.x,y:Tt.y+Tt.height}],jt=kt.getAbsoluteTransform();Rt.forEach(function(Ft){const $t=jt.point(Ft);et.push($t)})});const ot=new Transform;ot.rotate(-Konva$1.getAngle(this.rotation()));let ct=1/0,ut=1/0,dt=-1/0,ft=-1/0;et.forEach(function(kt){const Tt=ot.point(kt);ct===void 0&&(ct=dt=Tt.x,ut=ft=Tt.y),ct=Math.min(ct,Tt.x),ut=Math.min(ut,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),ot.invert();const St=ot.point({x:ct,y:ut});return{x:St.x,y:St.y,width:dt-ct,height:ft-ut,rotation:Konva$1.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(g=>{this._createAnchor(g)}),this._createAnchor("rotater")}_createAnchor(g){const et=new Rect$1({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:g+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),ot=this;et.on("mousedown touchstart",function(ct){ot._handleMouseDown(ct)}),et.on("dragstart",ct=>{et.stopDrag(),ct.cancelBubble=!0}),et.on("dragend",ct=>{ct.cancelBubble=!0}),et.on("mouseenter",()=>{const ct=Konva$1.getAngle(this.rotation()),ut=this.rotateAnchorCursor(),dt=getCursor(g,ct,ut);et.getStage().content&&(et.getStage().content.style.cursor=dt),this._cursorChange=!0}),et.on("mouseout",()=>{et.getStage().content&&(et.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(et)}_createBack(){const g=new Shape({name:"back",width:0,height:0,sceneFunc(et,ot){const ct=ot.getParent(),ut=ct.padding();et.beginPath(),et.rect(-ut,-ut,ot.width()+ut*2,ot.height()+ut*2),et.moveTo(ot.width()/2,-ut),ct.rotateEnabled()&&ct.rotateLineVisible()&&et.lineTo(ot.width()/2,-ct.rotateAnchorOffset()*Util._sign(ot.height())-ut),et.fillStrokeShape(ot)},hitFunc:(et,ot)=>{if(!this.shouldOverdrawWholeArea())return;const ct=this.padding();et.beginPath(),et.rect(-ct,-ct,ot.width()+ct*2,ot.height()+ct*2),et.fillStrokeShape(ot)}});this.add(g),this._proxyDrag(g),g.on("dragstart",et=>{et.cancelBubble=!0}),g.on("dragmove",et=>{et.cancelBubble=!0}),g.on("dragend",et=>{et.cancelBubble=!0}),this.on("dragmove",et=>{this.update()})}_handleMouseDown(g){if(this._transforming)return;this._movingAnchorName=g.target.name().split(" ")[0];const et=this._getNodeRect(),ot=et.width,ct=et.height,ut=Math.sqrt(Math.pow(ot,2)+Math.pow(ct,2));this.sin=Math.abs(ct/ut),this.cos=Math.abs(ot/ut),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const dt=g.target.getAbsolutePosition(),ft=g.target.getStage().getPointerPosition();this._anchorDragOffset={x:ft.x-dt.x,y:ft.y-dt.y},activeTransformersCount++,this._fire("transformstart",{evt:g.evt,target:this.getNode()}),this._nodes.forEach(St=>{St._fire("transformstart",{evt:g.evt,target:St})})}_handleMouseMove(g){let et,ot,ct;const ut=this.findOne("."+this._movingAnchorName),dt=ut.getStage();dt.setPointersPositions(g);const ft=dt.getPointerPosition();let St={x:ft.x-this._anchorDragOffset.x,y:ft.y-this._anchorDragOffset.y};const kt=ut.getAbsolutePosition();this.anchorDragBoundFunc()&&(St=this.anchorDragBoundFunc()(kt,St,g)),ut.setAbsolutePosition(St);const Tt=ut.getAbsolutePosition();if(kt.x===Tt.x&&kt.y===Tt.y)return;if(this._movingAnchorName==="rotater"){const Ht=this._getNodeRect();et=ut.x()-Ht.width/2,ot=-ut.y()+Ht.height/2;let Jt=Math.atan2(-ot,et)+Math.PI/2;Ht.height<0&&(Jt-=Math.PI);const tn=Konva$1.getAngle(this.rotation())+Jt,nn=Konva$1.getAngle(this.rotationSnapTolerance()),on=getSnap(this.rotationSnaps(),tn,nn)-Ht.rotation,pn=rotateAroundCenter(Ht,on);this._fitNodesInto(pn,g);return}const Rt=this.shiftBehavior();let jt;Rt==="inverted"?jt=this.keepRatio()&&!g.shiftKey:Rt==="none"?jt=this.keepRatio():jt=this.keepRatio()||g.shiftKey;let Ft=this.centeredScaling()||g.altKey;if(this._movingAnchorName==="top-left"){if(jt){const Ht=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};ct=Math.sqrt(Math.pow(Ht.x-ut.x(),2)+Math.pow(Ht.y-ut.y(),2));const Jt=this.findOne(".top-left").x()>Ht.x?-1:1,Zt=this.findOne(".top-left").y()>Ht.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*Zt,this.findOne(".top-left").x(Ht.x-et),this.findOne(".top-left").y(Ht.y-ot)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ut.y());else if(this._movingAnchorName==="top-right"){if(jt){const Ht=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};ct=Math.sqrt(Math.pow(ut.x()-Ht.x,2)+Math.pow(Ht.y-ut.y(),2));const Jt=this.findOne(".top-right").x()<Ht.x?-1:1,Zt=this.findOne(".top-right").y()>Ht.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*Zt,this.findOne(".top-right").x(Ht.x+et),this.findOne(".top-right").y(Ht.y-ot)}var $t=ut.position();this.findOne(".top-left").y($t.y),this.findOne(".bottom-right").x($t.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ut.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ut.x());else if(this._movingAnchorName==="bottom-left"){if(jt){const Ht=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};ct=Math.sqrt(Math.pow(Ht.x-ut.x(),2)+Math.pow(ut.y()-Ht.y,2));const Jt=Ht.x<ut.x()?-1:1,Zt=ut.y()<Ht.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*Zt,ut.x(Ht.x-et),ut.y(Ht.y+ot)}$t=ut.position(),this.findOne(".top-left").x($t.x),this.findOne(".bottom-right").y($t.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ut.y());else if(this._movingAnchorName==="bottom-right"){if(jt){const Ht=Ft?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};ct=Math.sqrt(Math.pow(ut.x()-Ht.x,2)+Math.pow(ut.y()-Ht.y,2));const Jt=this.findOne(".bottom-right").x()<Ht.x?-1:1,Zt=this.findOne(".bottom-right").y()<Ht.y?-1:1;et=ct*this.cos*Jt,ot=ct*this.sin*Zt,this.findOne(".bottom-right").x(Ht.x+et),this.findOne(".bottom-right").y(Ht.y+ot)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(Ft=this.centeredScaling()||g.altKey,Ft){const Ht=this.findOne(".top-left"),Jt=this.findOne(".bottom-right"),Zt=Ht.x(),tn=Ht.y(),nn=this.getWidth()-Jt.x(),rn=this.getHeight()-Jt.y();Jt.move({x:-Zt,y:-tn}),Ht.move({x:nn,y:rn})}const zt=this.findOne(".top-left").getAbsolutePosition();et=zt.x,ot=zt.y;const Ut=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Bt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:et,y:ot,width:Ut,height:Bt,rotation:Konva$1.getAngle(this.rotation())},g)}_handleMouseUp(g){this._removeEvents(g)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(g){var et;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const ot=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:g,target:ot}),(et=this.getLayer())===null||et===void 0||et.batchDraw(),ot&&this._nodes.forEach(ct=>{var ut;ct._fire("transformend",{evt:g,target:ct}),(ut=ct.getLayer())===null||ut===void 0||ut.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(g,et){const ot=this._getNodeRect(),ct=1;if(Util._inRange(g.width,-this.padding()*2-ct,ct)){this.update();return}if(Util._inRange(g.height,-this.padding()*2-ct,ct)){this.update();return}const ut=new Transform;if(ut.rotate(Konva$1.getAngle(this.rotation())),this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("left")>=0){const jt=ut.point({x:-this.padding()*2,y:0});g.x+=jt.x,g.y+=jt.y,g.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y}else if(this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("right")>=0){const jt=ut.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.width+=this.padding()*2}if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("top")>=0){const jt=ut.point({x:0,y:-this.padding()*2});g.x+=jt.x,g.y+=jt.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.height+=this.padding()*2}else if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const jt=ut.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=jt.x,this._anchorDragOffset.y-=jt.y,g.height+=this.padding()*2}if(this.boundBoxFunc()){const jt=this.boundBoxFunc()(ot,g);jt?g=jt:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const dt=1e7,ft=new Transform;ft.translate(ot.x,ot.y),ft.rotate(ot.rotation),ft.scale(ot.width/dt,ot.height/dt);const St=new Transform,kt=g.width/dt,Tt=g.height/dt;this.flipEnabled()===!1?(St.translate(g.x,g.y),St.rotate(g.rotation),St.translate(g.width<0?g.width:0,g.height<0?g.height:0),St.scale(Math.abs(kt),Math.abs(Tt))):(St.translate(g.x,g.y),St.rotate(g.rotation),St.scale(kt,Tt));const Rt=St.multiply(ft.invert());this._nodes.forEach(jt=>{var Ft;if(!jt.getStage())return;const $t=jt.getParent().getAbsoluteTransform(),zt=jt.getTransform().copy();zt.translate(jt.offsetX(),jt.offsetY());const Ut=new Transform;Ut.multiply($t.copy().invert()).multiply(Rt).multiply($t).multiply(zt);const Bt=Ut.decompose();jt.setAttrs(Bt),(Ft=jt.getLayer())===null||Ft===void 0||Ft.batchDraw()}),this.rotation(Util._getRotation(g.rotation)),this._nodes.forEach(jt=>{this._fire("transform",{evt:et,target:jt}),jt._fire("transform",{evt:et,target:jt})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(g,et){this.findOne(g).setAttrs(et)}update(){var g;const et=this._getNodeRect();this.rotation(Util._getRotation(et.rotation));const ot=et.width,ct=et.height,ut=this.enabledAnchors(),dt=this.resizeEnabled(),ft=this.padding(),St=this.anchorSize(),kt=this.find("._anchor");kt.forEach(Rt=>{Rt.setAttrs({width:St,height:St,offsetX:St/2,offsetY:St/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:St/2+ft,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:ot/2,y:0,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:ot,y:0,offsetX:St/2-ft,offsetY:St/2+ft,visible:dt&&ut.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:ct/2,offsetX:St/2+ft,visible:dt&&ut.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:ot,y:ct/2,offsetX:St/2-ft,visible:dt&&ut.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:ct,offsetX:St/2+ft,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:ot/2,y:ct,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:ot,y:ct,offsetX:St/2-ft,offsetY:St/2-ft,visible:dt&&ut.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:ot/2,y:-this.rotateAnchorOffset()*Util._sign(ct)-ft,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:ot,height:ct,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(Rt=>Rt.draggable()),x:0,y:0});const Tt=this.anchorStyleFunc();Tt&&kt.forEach(Rt=>{Tt(Rt)}),(g=this.getLayer())===null||g===void 0||g.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const g=this.findOne("."+this._movingAnchorName);g&&g.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(g){return Node$1.prototype.clone.call(this,g)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Transformer$1.isTransforming=()=>activeTransformersCount>0;function validateAnchors(it){return it instanceof Array||Util.warn("enabledAnchors value should be an array"),it instanceof Array&&it.forEach(function(g){ANCHORS_NAMES.indexOf(g)===-1&&Util.warn("Unknown anchor name: "+g+". Available names are: "+ANCHORS_NAMES.join(", "))}),it||[]}Transformer$1.prototype.className="Transformer";_registerNode(Transformer$1);Factory.addGetterSetter(Transformer$1,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer$1,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer$1,"resizeEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateEnabled",!0);Factory.addGetterSetter(Transformer$1,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer$1,"rotationSnaps",[]);Factory.addGetterSetter(Transformer$1,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer$1,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"anchorFill","white");Factory.addGetterSetter(Transformer$1,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderDash");Factory.addGetterSetter(Transformer$1,"keepRatio",!0);Factory.addGetterSetter(Transformer$1,"shiftBehavior","default");Factory.addGetterSetter(Transformer$1,"centeredScaling",!1);Factory.addGetterSetter(Transformer$1,"ignoreStroke",!1);Factory.addGetterSetter(Transformer$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"nodes");Factory.addGetterSetter(Transformer$1,"node");Factory.addGetterSetter(Transformer$1,"boundBoxFunc");Factory.addGetterSetter(Transformer$1,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer$1,"anchorStyleFunc");Factory.addGetterSetter(Transformer$1,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer$1,"useSingleNodeRotation",!0);Factory.backCompat(Transformer$1,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,Konva$1.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(it,g){const et=it.data,ot=it.width,ct=it.height;let ut,dt,ft,St,kt,Tt,Rt,jt,Ft,$t,zt,Ut,Bt,Ht,Jt,Zt,tn,nn,rn,on;const pn=g+g+1,dn=ot-1,hn=ct-1,un=g+1,En=un*(un+1)/2,wn=new BlurStack,Sn=mul_table[g],fn=shg_table[g];let xn=null,an=wn,cn=null,bn=null;for(let mn=1;mn<pn;mn++)an=an.next=new BlurStack,mn===un&&(xn=an);an.next=wn,ft=dt=0;for(let mn=0;mn<ct;mn++){Ut=Bt=Ht=Jt=St=kt=Tt=Rt=0,jt=un*(Zt=et[dt]),Ft=un*(tn=et[dt+1]),$t=un*(nn=et[dt+2]),zt=un*(rn=et[dt+3]),St+=En*Zt,kt+=En*tn,Tt+=En*nn,Rt+=En*rn,an=wn;for(let Tn=0;Tn<un;Tn++)an.r=Zt,an.g=tn,an.b=nn,an.a=rn,an=an.next;for(let Tn=1;Tn<un;Tn++)ut=dt+((dn<Tn?dn:Tn)<<2),St+=(an.r=Zt=et[ut])*(on=un-Tn),kt+=(an.g=tn=et[ut+1])*on,Tt+=(an.b=nn=et[ut+2])*on,Rt+=(an.a=rn=et[ut+3])*on,Ut+=Zt,Bt+=tn,Ht+=nn,Jt+=rn,an=an.next;cn=wn,bn=xn;for(let Tn=0;Tn<ot;Tn++)et[dt+3]=rn=Rt*Sn>>fn,rn!==0?(rn=255/rn,et[dt]=(St*Sn>>fn)*rn,et[dt+1]=(kt*Sn>>fn)*rn,et[dt+2]=(Tt*Sn>>fn)*rn):et[dt]=et[dt+1]=et[dt+2]=0,St-=jt,kt-=Ft,Tt-=$t,Rt-=zt,jt-=cn.r,Ft-=cn.g,$t-=cn.b,zt-=cn.a,ut=ft+((ut=Tn+g+1)<dn?ut:dn)<<2,Ut+=cn.r=et[ut],Bt+=cn.g=et[ut+1],Ht+=cn.b=et[ut+2],Jt+=cn.a=et[ut+3],St+=Ut,kt+=Bt,Tt+=Ht,Rt+=Jt,cn=cn.next,jt+=Zt=bn.r,Ft+=tn=bn.g,$t+=nn=bn.b,zt+=rn=bn.a,Ut-=Zt,Bt-=tn,Ht-=nn,Jt-=rn,bn=bn.next,dt+=4;ft+=ot}for(let mn=0;mn<ot;mn++){Bt=Ht=Jt=Ut=kt=Tt=Rt=St=0,dt=mn<<2,jt=un*(Zt=et[dt]),Ft=un*(tn=et[dt+1]),$t=un*(nn=et[dt+2]),zt=un*(rn=et[dt+3]),St+=En*Zt,kt+=En*tn,Tt+=En*nn,Rt+=En*rn,an=wn;for(let An=0;An<un;An++)an.r=Zt,an.g=tn,an.b=nn,an.a=rn,an=an.next;let Tn=ot;for(let An=1;An<=g;An++)dt=Tn+mn<<2,St+=(an.r=Zt=et[dt])*(on=un-An),kt+=(an.g=tn=et[dt+1])*on,Tt+=(an.b=nn=et[dt+2])*on,Rt+=(an.a=rn=et[dt+3])*on,Ut+=Zt,Bt+=tn,Ht+=nn,Jt+=rn,an=an.next,An<hn&&(Tn+=ot);dt=mn,cn=wn,bn=xn;for(let An=0;An<ct;An++)ut=dt<<2,et[ut+3]=rn=Rt*Sn>>fn,rn>0?(rn=255/rn,et[ut]=(St*Sn>>fn)*rn,et[ut+1]=(kt*Sn>>fn)*rn,et[ut+2]=(Tt*Sn>>fn)*rn):et[ut]=et[ut+1]=et[ut+2]=0,St-=jt,kt-=Ft,Tt-=$t,Rt-=zt,jt-=cn.r,Ft-=cn.g,$t-=cn.b,zt-=cn.a,ut=mn+((ut=An+un)<hn?ut:hn)*ot<<2,St+=Ut+=cn.r=et[ut],kt+=Bt+=cn.g=et[ut+1],Tt+=Ht+=cn.b=et[ut+2],Rt+=Jt+=cn.a=et[ut+3],cn=cn.next,jt+=Zt=bn.r,Ft+=tn=bn.g,$t+=nn=bn.b,zt+=rn=bn.a,Ut-=Zt,Bt-=tn,Ht-=nn,Jt-=rn,bn=bn.next,dt+=ot}}const Blur=function it(g){const et=Math.round(this.blurRadius());et>0&&filterGaussBlurRGBA(g,et)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(it){const g=this.brightness()*255,et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=4)et[ct]+=g,et[ct+1]+=g,et[ct+2]+=g};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(it){const g=this.brightness(),et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=4)et[ct]=Math.min(255,et[ct]*g),et[ct+1]=Math.min(255,et[ct+1]*g),et[ct+2]=Math.min(255,et[ct+2]*g)},Contrast=function(it){const g=Math.pow((this.contrast()+100)/100,2),et=it.data,ot=et.length;let ct=150,ut=150,dt=150;for(let ft=0;ft<ot;ft+=4)ct=et[ft],ut=et[ft+1],dt=et[ft+2],ct/=255,ct-=.5,ct*=g,ct+=.5,ct*=255,ut/=255,ut-=.5,ut*=g,ut+=.5,ut*=255,dt/=255,dt-=.5,dt*=g,dt+=.5,dt*=255,ct=ct<0?0:ct>255?255:ct,ut=ut<0?0:ut>255?255:ut,dt=dt<0?0:dt>255?255:dt,et[ft]=ct,et[ft+1]=ut,et[ft+2]=dt};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(it){var g,et,ot,ct,ut,dt,ft,St,kt;const Tt=it.data,Rt=it.width,jt=it.height,Ft=Math.min(1,Math.max(0,(et=(g=this.embossStrength)===null||g===void 0?void 0:g.call(this))!==null&&et!==void 0?et:.5)),$t=Math.min(1,Math.max(0,(ct=(ot=this.embossWhiteLevel)===null||ot===void 0?void 0:ot.call(this))!==null&&ct!==void 0?ct:.5)),Ut=(ft={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(dt=(ut=this.embossDirection)===null||ut===void 0?void 0:ut.call(this))!==null&&dt!==void 0?dt:"top-left"])!==null&&ft!==void 0?ft:315,Bt=!!((kt=(St=this.embossBlend)===null||St===void 0?void 0:St.call(this))!==null&&kt!==void 0&&kt),Ht=Ft*10,Jt=$t*255,Zt=Ut*Math.PI/180,tn=Math.cos(Zt),nn=Math.sin(Zt),rn=128/1020*Ht,on=new Uint8ClampedArray(Tt),pn=new Float32Array(Rt*jt);for(let wn=0,Sn=0;Sn<Tt.length;Sn+=4,wn++)pn[wn]=.2126*on[Sn]+.7152*on[Sn+1]+.0722*on[Sn+2];const dn=[-1,0,1,-2,0,2,-1,0,1],hn=[-1,-2,-1,0,0,0,1,2,1],un=[-Rt-1,-Rt,-Rt+1,-1,0,1,Rt-1,Rt,Rt+1],En=wn=>wn<0?0:wn>255?255:wn;for(let wn=1;wn<jt-1;wn++)for(let Sn=1;Sn<Rt-1;Sn++){const fn=wn*Rt+Sn;let xn=0,an=0;xn+=pn[fn+un[0]]*dn[0],an+=pn[fn+un[0]]*hn[0],xn+=pn[fn+un[1]]*dn[1],an+=pn[fn+un[1]]*hn[1],xn+=pn[fn+un[2]]*dn[2],an+=pn[fn+un[2]]*hn[2],xn+=pn[fn+un[3]]*dn[3],an+=pn[fn+un[3]]*hn[3],xn+=pn[fn+un[5]]*dn[5],an+=pn[fn+un[5]]*hn[5],xn+=pn[fn+un[6]]*dn[6],an+=pn[fn+un[6]]*hn[6],xn+=pn[fn+un[7]]*dn[7],an+=pn[fn+un[7]]*hn[7],xn+=pn[fn+un[8]]*dn[8],an+=pn[fn+un[8]]*hn[8];const cn=tn*xn+nn*an,bn=En(Jt+cn*rn),mn=fn*4;if(Bt){const Tn=bn-Jt;Tt[mn]=En(on[mn]+Tn),Tt[mn+1]=En(on[mn+1]+Tn),Tt[mn+2]=En(on[mn+2]+Tn),Tt[mn+3]=on[mn+3]}else Tt[mn]=Tt[mn+1]=Tt[mn+2]=bn,Tt[mn+3]=on[mn+3]}for(let wn=0;wn<Rt;wn++){let Sn=wn*4,fn=((jt-1)*Rt+wn)*4;Tt[Sn]=on[Sn],Tt[Sn+1]=on[Sn+1],Tt[Sn+2]=on[Sn+2],Tt[Sn+3]=on[Sn+3],Tt[fn]=on[fn],Tt[fn+1]=on[fn+1],Tt[fn+2]=on[fn+2],Tt[fn+3]=on[fn+3]}for(let wn=1;wn<jt-1;wn++){let Sn=wn*Rt*4,fn=(wn*Rt+(Rt-1))*4;Tt[Sn]=on[Sn],Tt[Sn+1]=on[Sn+1],Tt[Sn+2]=on[Sn+2],Tt[Sn+3]=on[Sn+3],Tt[fn]=on[fn],Tt[fn+1]=on[fn+1],Tt[fn+2]=on[fn+2],Tt[fn+3]=on[fn+3]}return it};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(it,g,et,ot,ct){const ut=et-g,dt=ct-ot;if(ut===0)return ot+dt/2;if(dt===0)return ot;let ft=(it-g)/ut;return ft=dt*ft+ot,ft}const Enhance=function(it){const g=it.data,et=g.length;let ot=g[0],ct=ot,ut,dt=g[1],ft=dt,St,kt=g[2],Tt=kt,Rt;const jt=this.enhance();if(jt===0)return;for(let Jt=0;Jt<et;Jt+=4)ut=g[Jt+0],ut<ot?ot=ut:ut>ct&&(ct=ut),St=g[Jt+1],St<dt?dt=St:St>ft&&(ft=St),Rt=g[Jt+2],Rt<kt?kt=Rt:Rt>Tt&&(Tt=Rt);ct===ot&&(ct=255,ot=0),ft===dt&&(ft=255,dt=0),Tt===kt&&(Tt=255,kt=0);let Ft,$t,zt,Ut,Bt,Ht;if(jt>0)Ft=ct+jt*(255-ct),$t=ot-jt*(ot-0),zt=ft+jt*(255-ft),Ut=dt-jt*(dt-0),Bt=Tt+jt*(255-Tt),Ht=kt-jt*(kt-0);else{const Jt=(ct+ot)*.5;Ft=ct+jt*(ct-Jt),$t=ot+jt*(ot-Jt);const Zt=(ft+dt)*.5;zt=ft+jt*(ft-Zt),Ut=dt+jt*(dt-Zt);const tn=(Tt+kt)*.5;Bt=Tt+jt*(Tt-tn),Ht=kt+jt*(kt-tn)}for(let Jt=0;Jt<et;Jt+=4)g[Jt+0]=remap(g[Jt+0],ot,ct,$t,Ft),g[Jt+1]=remap(g[Jt+1],dt,ft,Ut,zt),g[Jt+2]=remap(g[Jt+2],kt,Tt,Ht,Bt)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ct=.34*g[ot]+.5*g[ot+1]+.16*g[ot+2];g[ot]=ct,g[ot+1]=ct,g[ot+2]=ct}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(it){const g=it.data,et=g.length,ot=1,ct=Math.pow(2,this.saturation()),ut=Math.abs(this.hue()+360)%360,dt=this.luminance()*127,ft=ot*ct*Math.cos(ut*Math.PI/180),St=ot*ct*Math.sin(ut*Math.PI/180),kt=.299*ot+.701*ft+.167*St,Tt=.587*ot-.587*ft+.33*St,Rt=.114*ot-.114*ft-.497*St,jt=.299*ot-.299*ft-.328*St,Ft=.587*ot+.413*ft+.035*St,$t=.114*ot-.114*ft+.293*St,zt=.299*ot-.3*ft+1.25*St,Ut=.587*ot-.586*ft-1.05*St,Bt=.114*ot+.886*ft-.2*St;let Ht,Jt,Zt,tn;for(let nn=0;nn<et;nn+=4)Ht=g[nn+0],Jt=g[nn+1],Zt=g[nn+2],tn=g[nn+3],g[nn+0]=kt*Ht+Tt*Jt+Rt*Zt+dt,g[nn+1]=jt*Ht+Ft*Jt+$t*Zt+dt,g[nn+2]=zt*Ht+Ut*Jt+Bt*Zt+dt,g[nn+3]=tn},HSV=function(it){const g=it.data,et=g.length,ot=Math.pow(2,this.value()),ct=Math.pow(2,this.saturation()),ut=Math.abs(this.hue()+360)%360,dt=ot*ct*Math.cos(ut*Math.PI/180),ft=ot*ct*Math.sin(ut*Math.PI/180),St=.299*ot+.701*dt+.167*ft,kt=.587*ot-.587*dt+.33*ft,Tt=.114*ot-.114*dt-.497*ft,Rt=.299*ot-.299*dt-.328*ft,jt=.587*ot+.413*dt+.035*ft,Ft=.114*ot-.114*dt+.293*ft,$t=.299*ot-.3*dt+1.25*ft,zt=.587*ot-.586*dt-1.05*ft,Ut=.114*ot+.886*dt-.2*ft;for(let Bt=0;Bt<et;Bt+=4){const Ht=g[Bt+0],Jt=g[Bt+1],Zt=g[Bt+2],tn=g[Bt+3];g[Bt+0]=St*Ht+kt*Jt+Tt*Zt,g[Bt+1]=Rt*Ht+jt*Jt+Ft*Zt,g[Bt+2]=$t*Ht+zt*Jt+Ut*Zt,g[Bt+3]=tn}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4)g[ot]=255-g[ot],g[ot+1]=255-g[ot+1],g[ot+2]=255-g[ot+2]},ToPolar=function(it,g,et){const ot=it.data,ct=g.data,ut=it.width,dt=it.height,ft=et.polarCenterX||ut/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ut-ft,Rt=dt-St;const jt=Math.sqrt(Tt*Tt+Rt*Rt);kt=jt>kt?jt:kt;const Ft=dt,$t=ut,zt=360/$t*Math.PI/180;for(let Ut=0;Ut<$t;Ut+=1){const Bt=Math.sin(Ut*zt),Ht=Math.cos(Ut*zt);for(let Jt=0;Jt<Ft;Jt+=1){Tt=Math.floor(ft+kt*Jt/Ft*Ht),Rt=Math.floor(St+kt*Jt/Ft*Bt);let Zt=(Rt*ut+Tt)*4;const tn=ot[Zt+0],nn=ot[Zt+1],rn=ot[Zt+2],on=ot[Zt+3];Zt=(Ut+Jt*ut)*4,ct[Zt+0]=tn,ct[Zt+1]=nn,ct[Zt+2]=rn,ct[Zt+3]=on}}},FromPolar=function(it,g,et){const ot=it.data,ct=g.data,ut=it.width,dt=it.height,ft=et.polarCenterX||ut/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ut-ft,Rt=dt-St;const jt=Math.sqrt(Tt*Tt+Rt*Rt);kt=jt>kt?jt:kt;const Ft=dt,$t=ut,zt=et.polarRotation||0;let Ut,Bt;for(Tt=0;Tt<ut;Tt+=1)for(Rt=0;Rt<dt;Rt+=1){const Ht=Tt-ft,Jt=Rt-St,Zt=Math.sqrt(Ht*Ht+Jt*Jt)*Ft/kt;let tn=(Math.atan2(Jt,Ht)*180/Math.PI+360+zt)%360;tn=tn*$t/360,Ut=Math.floor(tn),Bt=Math.floor(Zt);let nn=(Bt*ut+Ut)*4;const rn=ot[nn+0],on=ot[nn+1],pn=ot[nn+2],dn=ot[nn+3];nn=(Rt*ut+Tt)*4,ct[nn+0]=rn,ct[nn+1]=on,ct[nn+2]=pn,ct[nn+3]=dn}},Kaleidoscope=function(it){const g=it.width,et=it.height;let ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt,Ft=Math.round(this.kaleidoscopePower());const $t=Math.round(this.kaleidoscopeAngle()),zt=Math.floor(g*($t%360)/360);if(Ft<1)return;const Ut=Util.createCanvasElement();Ut.width=g,Ut.height=et;const Bt=Ut.getContext("2d").getImageData(0,0,g,et);Util.releaseCanvas(Ut),ToPolar(it,Bt,{polarCenterX:g/2,polarCenterY:et/2});let Ht=g/Math.pow(2,Ft);for(;Ht<=8;)Ht=Ht*2,Ft-=1;Ht=Math.ceil(Ht);let Jt=Ht,Zt=0,tn=Jt,nn=1;for(zt+Ht>g&&(Zt=Jt,tn=0,nn=-1),ct=0;ct<et;ct+=1)for(ot=Zt;ot!==tn;ot+=nn)ut=Math.round(ot+zt)%g,Rt=(g*ct+ut)*4,ft=Bt.data[Rt+0],St=Bt.data[Rt+1],kt=Bt.data[Rt+2],Tt=Bt.data[Rt+3],jt=(g*ct+ot)*4,Bt.data[jt+0]=ft,Bt.data[jt+1]=St,Bt.data[jt+2]=kt,Bt.data[jt+3]=Tt;for(ct=0;ct<et;ct+=1)for(Jt=Math.floor(Ht),dt=0;dt<Ft;dt+=1){for(ot=0;ot<Jt+1;ot+=1)Rt=(g*ct+ot)*4,ft=Bt.data[Rt+0],St=Bt.data[Rt+1],kt=Bt.data[Rt+2],Tt=Bt.data[Rt+3],jt=(g*ct+Jt*2-ot-1)*4,Bt.data[jt+0]=ft,Bt.data[jt+1]=St,Bt.data[jt+2]=kt,Bt.data[jt+3]=Tt;Jt*=2}FromPolar(Bt,it,{polarRotation:0})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(it,g,et){let ot=(et*it.width+g)*4;const ct=[];return ct.push(it.data[ot++],it.data[ot++],it.data[ot++],it.data[ot++]),ct}function rgbDistance(it,g){return Math.sqrt(Math.pow(it[0]-g[0],2)+Math.pow(it[1]-g[1],2)+Math.pow(it[2]-g[2],2))}function rgbMean(it){const g=[0,0,0];for(let et=0;et<it.length;et++)g[0]+=it[et][0],g[1]+=it[et][1],g[2]+=it[et][2];return g[0]/=it.length,g[1]/=it.length,g[2]/=it.length,g}function backgroundMask(it,g){const et=pixelAt(it,0,0),ot=pixelAt(it,it.width-1,0),ct=pixelAt(it,0,it.height-1),ut=pixelAt(it,it.width-1,it.height-1),dt=g||10;if(rgbDistance(et,ot)<dt&&rgbDistance(ot,ut)<dt&&rgbDistance(ut,ct)<dt&&rgbDistance(ct,et)<dt){const ft=rgbMean([ot,et,ut,ct]),St=[];for(let kt=0;kt<it.width*it.height;kt++){const Tt=rgbDistance(ft,[it.data[kt*4],it.data[kt*4+1],it.data[kt*4+2]]);St[kt]=Tt<dt?0:255}return St}}function applyMask(it,g){for(let et=0;et<it.width*it.height;et++)it.data[4*et+3]=g[et]}function erodeMask(it,g,et){const ot=[1,1,1,1,0,1,1,1,1],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ct;Rt++)for(let jt=0;jt<ct;jt++){const Ft=ft+Rt-ut,$t=St+jt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Ut=ot[Rt*ct+jt];Tt+=it[zt]*Ut}}dt[kt]=Tt===255*8?255:0}return dt}function dilateMask(it,g,et){const ot=[1,1,1,1,1,1,1,1,1],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ct;Rt++)for(let jt=0;jt<ct;jt++){const Ft=ft+Rt-ut,$t=St+jt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Ut=ot[Rt*ct+jt];Tt+=it[zt]*Ut}}dt[kt]=Tt>=255*4?255:0}return dt}function smoothEdgeMask(it,g,et){const ot=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],ct=Math.round(Math.sqrt(ot.length)),ut=Math.floor(ct/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ct;Rt++)for(let jt=0;jt<ct;jt++){const Ft=ft+Rt-ut,$t=St+jt-ut;if(Ft>=0&&Ft<et&&$t>=0&&$t<g){const zt=Ft*g+$t,Ut=ot[Rt*ct+jt];Tt+=it[zt]*Ut}}dt[kt]=Tt}return dt}const Mask=function(it){const g=this.threshold();let et=backgroundMask(it,g);return et&&(et=erodeMask(et,it.width,it.height),et=dilateMask(et,it.width,it.height),et=smoothEdgeMask(et,it.width,it.height),applyMask(it,et)),it};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(it){const g=this.noise()*255,et=it.data,ot=et.length,ct=g/2;for(let ut=0;ut<ot;ut+=4)et[ut+0]+=ct-2*ct*Math.random(),et[ut+1]+=ct-2*ct*Math.random(),et[ut+2]+=ct-2*ct*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(it){let g=Math.ceil(this.pixelSize()),et=it.width,ot=it.height,ct=Math.ceil(et/g),ut=Math.ceil(ot/g),dt=it.data;if(g<=0){Util.error("pixelSize value can not be <= 0");return}for(let ft=0;ft<ct;ft+=1)for(let St=0;St<ut;St+=1){let kt=0,Tt=0,Rt=0,jt=0;const Ft=ft*g,$t=Ft+g,zt=St*g,Ut=zt+g;let Bt=0;for(let Ht=Ft;Ht<$t;Ht+=1)if(!(Ht>=et))for(let Jt=zt;Jt<Ut;Jt+=1){if(Jt>=ot)continue;const Zt=(et*Jt+Ht)*4;kt+=dt[Zt+0],Tt+=dt[Zt+1],Rt+=dt[Zt+2],jt+=dt[Zt+3],Bt+=1}kt=kt/Bt,Tt=Tt/Bt,Rt=Rt/Bt,jt=jt/Bt;for(let Ht=Ft;Ht<$t;Ht+=1)if(!(Ht>=et))for(let Jt=zt;Jt<Ut;Jt+=1){if(Jt>=ot)continue;const Zt=(et*Jt+Ht)*4;dt[Zt+0]=kt,dt[Zt+1]=Tt,dt[Zt+2]=Rt,dt[Zt+3]=jt}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(it){const g=Math.round(this.levels()*254)+1,et=it.data,ot=et.length,ct=255/g;for(let ut=0;ut<ot;ut+=1)et[ut]=Math.floor(et[ut]/ct)*ct};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB=function(it){const g=it.data,et=g.length,ot=this.red(),ct=this.green(),ut=this.blue();for(let dt=0;dt<et;dt+=4){const ft=(.34*g[dt]+.5*g[dt+1]+.16*g[dt+2])/255;g[dt]=ft*ot,g[dt+1]=ft*ct,g[dt+2]=ft*ut,g[dt+3]=g[dt+3]}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(it){const g=it.data,et=g.length,ot=this.red(),ct=this.green(),ut=this.blue(),dt=this.alpha();for(let ft=0;ft<et;ft+=4){const St=1-dt;g[ft]=ot*dt+g[ft]*St,g[ft+1]=ct*dt+g[ft+1]*St,g[ft+2]=ut*dt+g[ft+2]*St}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(it){return this._filterUpToDate=!1,it>1?1:it<0?0:it});const Sepia=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ct=g[ot+0],ut=g[ot+1],dt=g[ot+2];g[ot+0]=Math.min(255,ct*.393+ut*.769+dt*.189),g[ot+1]=Math.min(255,ct*.349+ut*.686+dt*.168),g[ot+2]=Math.min(255,ct*.272+ut*.534+dt*.131)}},Solarize=function(it){const et=it.data;for(let ot=0;ot<et.length;ot+=4){const ct=et[ot],ut=et[ot+1],dt=et[ot+2];.2126*ct+.7152*ut+.0722*dt>=128&&(et[ot]=255-ct,et[ot+1]=255-ut,et[ot+2]=255-dt)}return it},Threshold=function(it){const g=this.threshold()*255,et=it.data,ot=et.length;for(let ct=0;ct<ot;ct+=1)et[ct]=et[ct]<g?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva.Util._assign(Konva,{Arc,Arrow:Arrow$1,Circle,Ellipse:Ellipse$1,Image:Image$1,Label,Tag,Line,Path,Rect:Rect$1,RegularPolygon,Ring,Sprite,Star,Text:Text$2,TextPath,Transformer:Transformer$1,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(it){function g(an,cn){var bn=an.length;an.push(cn);e:for(;0<bn;){var mn=bn-1>>>1,Tn=an[mn];if(0<ct(Tn,cn))an[mn]=cn,an[bn]=Tn,bn=mn;else break e}}function et(an){return an.length===0?null:an[0]}function ot(an){if(an.length===0)return null;var cn=an[0],bn=an.pop();if(bn!==cn){an[0]=bn;e:for(var mn=0,Tn=an.length,An=Tn>>>1;mn<An;){var Pn=2*(mn+1)-1,Mn=an[Pn],Rn=Pn+1,Cn=an[Rn];if(0>ct(Mn,bn))Rn<Tn&&0>ct(Cn,Mn)?(an[mn]=Cn,an[Rn]=bn,mn=Rn):(an[mn]=Mn,an[Pn]=bn,mn=Pn);else if(Rn<Tn&&0>ct(Cn,bn))an[mn]=Cn,an[Rn]=bn,mn=Rn;else break e}}return cn}function ct(an,cn){var bn=an.sortIndex-cn.sortIndex;return bn!==0?bn:an.id-cn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ut=performance;it.unstable_now=function(){return ut.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,jt=3,Ft=!1,$t=!1,zt=!1,Ut=typeof setTimeout=="function"?setTimeout:null,Bt=typeof clearTimeout=="function"?clearTimeout:null,Ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Jt(an){for(var cn=et(kt);cn!==null;){if(cn.callback===null)ot(kt);else if(cn.startTime<=an)ot(kt),cn.sortIndex=cn.expirationTime,g(St,cn);else break;cn=et(kt)}}function Zt(an){if(zt=!1,Jt(an),!$t)if(et(St)!==null)$t=!0,fn(tn);else{var cn=et(kt);cn!==null&&xn(Zt,cn.startTime-an)}}function tn(an,cn){$t=!1,zt&&(zt=!1,Bt(on),on=-1),Ft=!0;var bn=jt;try{for(Jt(cn),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>cn)||an&&!hn());){var mn=Rt.callback;if(typeof mn=="function"){Rt.callback=null,jt=Rt.priorityLevel;var Tn=mn(Rt.expirationTime<=cn);cn=it.unstable_now(),typeof Tn=="function"?Rt.callback=Tn:Rt===et(St)&&ot(St),Jt(cn)}else ot(St);Rt=et(St)}if(Rt!==null)var An=!0;else{var Pn=et(kt);Pn!==null&&xn(Zt,Pn.startTime-cn),An=!1}return An}finally{Rt=null,jt=bn,Ft=!1}}var nn=!1,rn=null,on=-1,pn=5,dn=-1;function hn(){return!(it.unstable_now()-dn<pn)}function un(){if(rn!==null){var an=it.unstable_now();dn=an;var cn=!0;try{cn=rn(!0,an)}finally{cn?En():(nn=!1,rn=null)}}else nn=!1}var En;if(typeof Ht=="function")En=function(){Ht(un)};else if(typeof MessageChannel<"u"){var wn=new MessageChannel,Sn=wn.port2;wn.port1.onmessage=un,En=function(){Sn.postMessage(null)}}else En=function(){Ut(un,0)};function fn(an){rn=an,nn||(nn=!0,En())}function xn(an,cn){on=Ut(function(){an(it.unstable_now())},cn)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(an){an.callback=null},it.unstable_continueExecution=function(){$t||Ft||($t=!0,fn(tn))},it.unstable_forceFrameRate=function(an){0>an||125<an?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pn=0<an?Math.floor(1e3/an):5},it.unstable_getCurrentPriorityLevel=function(){return jt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(an){switch(jt){case 1:case 2:case 3:var cn=3;break;default:cn=jt}var bn=jt;jt=cn;try{return an()}finally{jt=bn}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(an,cn){switch(an){case 1:case 2:case 3:case 4:case 5:break;default:an=3}var bn=jt;jt=an;try{return cn()}finally{jt=bn}},it.unstable_scheduleCallback=function(an,cn,bn){var mn=it.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?mn+bn:mn):bn=mn,an){case 1:var Tn=-1;break;case 2:Tn=250;break;case 5:Tn=1073741823;break;case 4:Tn=1e4;break;default:Tn=5e3}return Tn=bn+Tn,an={id:Tt++,callback:cn,priorityLevel:an,startTime:bn,expirationTime:Tn,sortIndex:-1},bn>mn?(an.sortIndex=bn,g(kt,an),et(St)===null&&an===et(kt)&&(zt?(Bt(on),on=-1):zt=!0,xn(Zt,bn-mn))):(an.sortIndex=Tn,g(St,an),$t||Ft||($t=!0,fn(tn))),an},it.unstable_shouldYield=hn,it.unstable_wrapCallback=function(an){var cn=jt;return function(){var bn=jt;jt=cn;try{return an.apply(this,arguments)}finally{jt=bn}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function it(g){var et={},ot=reactExports,ct=requireScheduler(),ut=Object.assign;function dt(Yt){for(var en="https://reactjs.org/docs/error-decoder.html?invariant="+Yt,sn=1;sn<arguments.length;sn++)en+="&args[]="+encodeURIComponent(arguments[sn]);return"Minified React error #"+Yt+"; visit "+en+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ft=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,St=Symbol.for("react.element"),kt=Symbol.for("react.portal"),Tt=Symbol.for("react.fragment"),Rt=Symbol.for("react.strict_mode"),jt=Symbol.for("react.profiler"),Ft=Symbol.for("react.provider"),$t=Symbol.for("react.context"),zt=Symbol.for("react.forward_ref"),Ut=Symbol.for("react.suspense"),Bt=Symbol.for("react.suspense_list"),Ht=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),Zt=Symbol.for("react.offscreen"),tn=Symbol.iterator;function nn(Yt){return Yt===null||typeof Yt!="object"?null:(Yt=tn&&Yt[tn]||Yt["@@iterator"],typeof Yt=="function"?Yt:null)}function rn(Yt){if(Yt==null)return null;if(typeof Yt=="function")return Yt.displayName||Yt.name||null;if(typeof Yt=="string")return Yt;switch(Yt){case Tt:return"Fragment";case kt:return"Portal";case jt:return"Profiler";case Rt:return"StrictMode";case Ut:return"Suspense";case Bt:return"SuspenseList"}if(typeof Yt=="object")switch(Yt.$$typeof){case $t:return(Yt.displayName||"Context")+".Consumer";case Ft:return(Yt._context.displayName||"Context")+".Provider";case zt:var en=Yt.render;return Yt=Yt.displayName,Yt||(Yt=en.displayName||en.name||"",Yt=Yt!==""?"ForwardRef("+Yt+")":"ForwardRef"),Yt;case Ht:return en=Yt.displayName||null,en!==null?en:rn(Yt.type)||"Memo";case Jt:en=Yt._payload,Yt=Yt._init;try{return rn(Yt(en))}catch{}}return null}function on(Yt){var en=Yt.type;switch(Yt.tag){case 24:return"Cache";case 9:return(en.displayName||"Context")+".Consumer";case 10:return(en._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Yt=en.render,Yt=Yt.displayName||Yt.name||"",en.displayName||(Yt!==""?"ForwardRef("+Yt+")":"ForwardRef");case 7:return"Fragment";case 5:return en;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rn(en);case 8:return en===Rt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof en=="function")return en.displayName||en.name||null;if(typeof en=="string")return en}return null}function pn(Yt){var en=Yt,sn=Yt;if(Yt.alternate)for(;en.return;)en=en.return;else{Yt=en;do en=Yt,en.flags&4098&&(sn=en.return),Yt=en.return;while(Yt)}return en.tag===3?sn:null}function dn(Yt){if(pn(Yt)!==Yt)throw Error(dt(188))}function hn(Yt){var en=Yt.alternate;if(!en){if(en=pn(Yt),en===null)throw Error(dt(188));return en!==Yt?null:Yt}for(var sn=Yt,ln=en;;){var gn=sn.return;if(gn===null)break;var kn=gn.alternate;if(kn===null){if(ln=gn.return,ln!==null){sn=ln;continue}break}if(gn.child===kn.child){for(kn=gn.child;kn;){if(kn===sn)return dn(gn),Yt;if(kn===ln)return dn(gn),en;kn=kn.sibling}throw Error(dt(188))}if(sn.return!==ln.return)sn=gn,ln=kn;else{for(var Nn=!1,Ln=gn.child;Ln;){if(Ln===sn){Nn=!0,sn=gn,ln=kn;break}if(Ln===ln){Nn=!0,ln=gn,sn=kn;break}Ln=Ln.sibling}if(!Nn){for(Ln=kn.child;Ln;){if(Ln===sn){Nn=!0,sn=kn,ln=gn;break}if(Ln===ln){Nn=!0,ln=kn,sn=gn;break}Ln=Ln.sibling}if(!Nn)throw Error(dt(189))}}if(sn.alternate!==ln)throw Error(dt(190))}if(sn.tag!==3)throw Error(dt(188));return sn.stateNode.current===sn?Yt:en}function un(Yt){return Yt=hn(Yt),Yt!==null?En(Yt):null}function En(Yt){if(Yt.tag===5||Yt.tag===6)return Yt;for(Yt=Yt.child;Yt!==null;){var en=En(Yt);if(en!==null)return en;Yt=Yt.sibling}return null}function wn(Yt){if(Yt.tag===5||Yt.tag===6)return Yt;for(Yt=Yt.child;Yt!==null;){if(Yt.tag!==4){var en=wn(Yt);if(en!==null)return en}Yt=Yt.sibling}return null}var Sn=Array.isArray,fn=g.getPublicInstance,xn=g.getRootHostContext,an=g.getChildHostContext,cn=g.prepareForCommit,bn=g.resetAfterCommit,mn=g.createInstance,Tn=g.appendInitialChild,An=g.finalizeInitialChildren,Pn=g.prepareUpdate,Mn=g.shouldSetTextContent,Rn=g.createTextInstance,Cn=g.scheduleTimeout,On=g.cancelTimeout,In=g.noTimeout,Dn=g.isPrimaryRenderer,Fn=g.supportsMutation,Xn=g.supportsPersistence,Vn=g.supportsHydration,zn=g.getInstanceFromNode,Zn=g.preparePortalMount,lr=g.getCurrentEventPriority,hr=g.detachDeletedInstance,$n=g.supportsMicrotasks,Un=g.scheduleMicrotask,Kn=g.supportsTestSelectors,Yn=g.findFiberRoot,Wn=g.getBoundingRect,cr=g.getTextContent,or=g.isHiddenSubtree,ur=g.matchAccessibilityRole,Cr=g.setFocusIfFocusable,Rr=g.setupIntersectionObserver,br=g.appendChild,Ts=g.appendChildToContainer,Tr=g.commitTextUpdate,Wl=g.commitMount,S4=g.commitUpdate,w4=g.insertBefore,k4=g.insertInContainerBefore,T4=g.removeChild,_4=g.removeChildFromContainer,KC=g.resetTextContent,A4=g.hideInstance,C4=g.hideTextInstance,R4=g.unhideInstance,P4=g.unhideTextInstance,N4=g.clearContainer,M4=g.cloneInstance,YC=g.createContainerChildSet,XC=g.appendChildToContainerChildSet,O4=g.finalizeContainerChildren,S_=g.replaceContainerChildren,JC=g.cloneHiddenInstance,QC=g.cloneHiddenTextInstance,I4=g.canHydrateInstance,D4=g.canHydrateTextInstance,L4=g.canHydrateSuspenseInstance,ZC=g.isSuspenseInstancePending,w_=g.isSuspenseInstanceFallback,j4=g.getSuspenseInstanceFallbackErrorDetails,F4=g.registerSuspenseInstanceRetry,o2=g.getNextHydratableSibling,$4=g.getFirstHydratableChild,B4=g.getFirstHydratableChildWithinContainer,V4=g.getFirstHydratableChildWithinSuspenseInstance,z4=g.hydrateInstance,H4=g.hydrateTextInstance,U4=g.hydrateSuspenseInstance,G4=g.getNextHydratableInstanceAfterSuspenseInstance,W4=g.commitHydratedContainer,q4=g.commitHydratedSuspenseInstance,K4=g.clearSuspenseBoundary,Y4=g.clearSuspenseBoundaryFromContainer,X4=g.shouldDeleteUnhydratedTailInstances,J4=g.didNotMatchHydratedContainerTextInstance,Q4=g.didNotMatchHydratedTextInstance,k_;function Gv(Yt){if(k_===void 0)try{throw Error()}catch(sn){var en=sn.stack.trim().match(/\n( *(at )?)/);k_=en&&en[1]||""}return`
`+k_+Yt}var T_=!1;function __(Yt,en){if(!Yt||T_)return"";T_=!0;var sn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(en)if(en=function(){throw Error()},Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(Jn){var ln=Jn}Reflect.construct(Yt,[],en)}else{try{en.call()}catch(Jn){ln=Jn}Yt.call(en.prototype)}else{try{throw Error()}catch(Jn){ln=Jn}Yt()}}catch(Jn){if(Jn&&ln&&typeof Jn.stack=="string"){for(var gn=Jn.stack.split(`
`),kn=ln.stack.split(`
`),Nn=gn.length-1,Ln=kn.length-1;1<=Nn&&0<=Ln&&gn[Nn]!==kn[Ln];)Ln--;for(;1<=Nn&&0<=Ln;Nn--,Ln--)if(gn[Nn]!==kn[Ln]){if(Nn!==1||Ln!==1)do if(Nn--,Ln--,0>Ln||gn[Nn]!==kn[Ln]){var Hn=`
`+gn[Nn].replace(" at new "," at ");return Yt.displayName&&Hn.includes("<anonymous>")&&(Hn=Hn.replace("<anonymous>",Yt.displayName)),Hn}while(1<=Nn&&0<=Ln);break}}}finally{T_=!1,Error.prepareStackTrace=sn}return(Yt=Yt?Yt.displayName||Yt.name:"")?Gv(Yt):""}var Z4=Object.prototype.hasOwnProperty,A_=[],Ey=-1;function xp(Yt){return{current:Yt}}function Br(Yt){0>Ey||(Yt.current=A_[Ey],A_[Ey]=null,Ey--)}function jr(Yt,en){Ey++,A_[Ey]=Yt.current,Yt.current=en}var bp={},Is=xp(bp),Qs=xp(!1),Mm=bp;function Sy(Yt,en){var sn=Yt.type.contextTypes;if(!sn)return bp;var ln=Yt.stateNode;if(ln&&ln.__reactInternalMemoizedUnmaskedChildContext===en)return ln.__reactInternalMemoizedMaskedChildContext;var gn={},kn;for(kn in sn)gn[kn]=en[kn];return ln&&(Yt=Yt.stateNode,Yt.__reactInternalMemoizedUnmaskedChildContext=en,Yt.__reactInternalMemoizedMaskedChildContext=gn),gn}function Zs(Yt){return Yt=Yt.childContextTypes,Yt!=null}function a2(){Br(Qs),Br(Is)}function eR(Yt,en,sn){if(Is.current!==bp)throw Error(dt(168));jr(Is,en),jr(Qs,sn)}function tR(Yt,en,sn){var ln=Yt.stateNode;if(en=en.childContextTypes,typeof ln.getChildContext!="function")return sn;ln=ln.getChildContext();for(var gn in ln)if(!(gn in en))throw Error(dt(108,on(Yt)||"Unknown",gn));return ut({},sn,ln)}function l2(Yt){return Yt=(Yt=Yt.stateNode)&&Yt.__reactInternalMemoizedMergedChildContext||bp,Mm=Is.current,jr(Is,Yt),jr(Qs,Qs.current),!0}function nR(Yt,en,sn){var ln=Yt.stateNode;if(!ln)throw Error(dt(169));sn?(Yt=tR(Yt,en,Mm),ln.__reactInternalMemoizedMergedChildContext=Yt,Br(Qs),Br(Is),jr(Is,Yt)):Br(Qs),jr(Qs,sn)}var El=Math.clz32?Math.clz32:nN,eN=Math.log,tN=Math.LN2;function nN(Yt){return Yt>>>=0,Yt===0?32:31-(eN(Yt)/tN|0)|0}var c2=64,u2=4194304;function Wv(Yt){switch(Yt&-Yt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Yt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Yt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Yt}}function h2(Yt,en){var sn=Yt.pendingLanes;if(sn===0)return 0;var ln=0,gn=Yt.suspendedLanes,kn=Yt.pingedLanes,Nn=sn&268435455;if(Nn!==0){var Ln=Nn&~gn;Ln!==0?ln=Wv(Ln):(kn&=Nn,kn!==0&&(ln=Wv(kn)))}else Nn=sn&~gn,Nn!==0?ln=Wv(Nn):kn!==0&&(ln=Wv(kn));if(ln===0)return 0;if(en!==0&&en!==ln&&!(en&gn)&&(gn=ln&-ln,kn=en&-en,gn>=kn||gn===16&&(kn&4194240)!==0))return en;if(ln&4&&(ln|=sn&16),en=Yt.entangledLanes,en!==0)for(Yt=Yt.entanglements,en&=ln;0<en;)sn=31-El(en),gn=1<<sn,ln|=Yt[sn],en&=~gn;return ln}function rN(Yt,en){switch(Yt){case 1:case 2:case 4:return en+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return en+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iN(Yt,en){for(var sn=Yt.suspendedLanes,ln=Yt.pingedLanes,gn=Yt.expirationTimes,kn=Yt.pendingLanes;0<kn;){var Nn=31-El(kn),Ln=1<<Nn,Hn=gn[Nn];Hn===-1?(!(Ln&sn)||Ln&ln)&&(gn[Nn]=rN(Ln,en)):Hn<=en&&(Yt.expiredLanes|=Ln),kn&=~Ln}}function C_(Yt){return Yt=Yt.pendingLanes&-1073741825,Yt!==0?Yt:Yt&1073741824?1073741824:0}function rR(){var Yt=c2;return c2<<=1,!(c2&4194240)&&(c2=64),Yt}function R_(Yt){for(var en=[],sn=0;31>sn;sn++)en.push(Yt);return en}function qv(Yt,en,sn){Yt.pendingLanes|=en,en!==536870912&&(Yt.suspendedLanes=0,Yt.pingedLanes=0),Yt=Yt.eventTimes,en=31-El(en),Yt[en]=sn}function sN(Yt,en){var sn=Yt.pendingLanes&~en;Yt.pendingLanes=en,Yt.suspendedLanes=0,Yt.pingedLanes=0,Yt.expiredLanes&=en,Yt.mutableReadLanes&=en,Yt.entangledLanes&=en,en=Yt.entanglements;var ln=Yt.eventTimes;for(Yt=Yt.expirationTimes;0<sn;){var gn=31-El(sn),kn=1<<gn;en[gn]=0,ln[gn]=-1,Yt[gn]=-1,sn&=~kn}}function P_(Yt,en){var sn=Yt.entangledLanes|=en;for(Yt=Yt.entanglements;sn;){var ln=31-El(sn),gn=1<<ln;gn&en|Yt[ln]&en&&(Yt[ln]|=en),sn&=~gn}}var Sr=0;function iR(Yt){return Yt&=-Yt,1<Yt?4<Yt?Yt&268435455?16:536870912:4:1}var N_=ct.unstable_scheduleCallback,sR=ct.unstable_cancelCallback,oN=ct.unstable_shouldYield,aN=ct.unstable_requestPaint,fs=ct.unstable_now,M_=ct.unstable_ImmediatePriority,lN=ct.unstable_UserBlockingPriority,O_=ct.unstable_NormalPriority,cN=ct.unstable_IdlePriority,d2=null,Kl=null;function uN(Yt){if(Kl&&typeof Kl.onCommitFiberRoot=="function")try{Kl.onCommitFiberRoot(d2,Yt,void 0,(Yt.current.flags&128)===128)}catch{}}function hN(Yt,en){return Yt===en&&(Yt!==0||1/Yt===1/en)||Yt!==Yt&&en!==en}var Sl=typeof Object.is=="function"?Object.is:hN,_u=null,f2=!1,I_=!1;function oR(Yt){_u===null?_u=[Yt]:_u.push(Yt)}function dN(Yt){f2=!0,oR(Yt)}function Yl(){if(!I_&&_u!==null){I_=!0;var Yt=0,en=Sr;try{var sn=_u;for(Sr=1;Yt<sn.length;Yt++){var ln=sn[Yt];do ln=ln(!0);while(ln!==null)}_u=null,f2=!1}catch(gn){throw _u!==null&&(_u=_u.slice(Yt+1)),N_(M_,Yl),gn}finally{Sr=en,I_=!1}}return null}var wy=[],ky=0,p2=null,m2=0,Vo=[],zo=0,Om=null,Au=1,Cu="";function Im(Yt,en){wy[ky++]=m2,wy[ky++]=p2,p2=Yt,m2=en}function aR(Yt,en,sn){Vo[zo++]=Au,Vo[zo++]=Cu,Vo[zo++]=Om,Om=Yt;var ln=Au;Yt=Cu;var gn=32-El(ln)-1;ln&=~(1<<gn),sn+=1;var kn=32-El(en)+gn;if(30<kn){var Nn=gn-gn%5;kn=(ln&(1<<Nn)-1).toString(32),ln>>=Nn,gn-=Nn,Au=1<<32-El(en)+gn|sn<<gn|ln,Cu=kn+Yt}else Au=1<<kn|sn<<gn|ln,Cu=Yt}function D_(Yt){Yt.return!==null&&(Im(Yt,1),aR(Yt,1,0))}function L_(Yt){for(;Yt===p2;)p2=wy[--ky],wy[ky]=null,m2=wy[--ky],wy[ky]=null;for(;Yt===Om;)Om=Vo[--zo],Vo[zo]=null,Cu=Vo[--zo],Vo[zo]=null,Au=Vo[--zo],Vo[zo]=null}var xo=null,Ho=null,zr=!1,Kv=!1,wl=null;function lR(Yt,en){var sn=Ko(5,null,null,0);sn.elementType="DELETED",sn.stateNode=en,sn.return=Yt,en=Yt.deletions,en===null?(Yt.deletions=[sn],Yt.flags|=16):en.push(sn)}function cR(Yt,en){switch(Yt.tag){case 5:return en=I4(en,Yt.type,Yt.pendingProps),en!==null?(Yt.stateNode=en,xo=Yt,Ho=$4(en),!0):!1;case 6:return en=D4(en,Yt.pendingProps),en!==null?(Yt.stateNode=en,xo=Yt,Ho=null,!0):!1;case 13:if(en=L4(en),en!==null){var sn=Om!==null?{id:Au,overflow:Cu}:null;return Yt.memoizedState={dehydrated:en,treeContext:sn,retryLane:1073741824},sn=Ko(18,null,null,0),sn.stateNode=en,sn.return=Yt,Yt.child=sn,xo=Yt,Ho=null,!0}return!1;default:return!1}}function j_(Yt){return(Yt.mode&1)!==0&&(Yt.flags&128)===0}function F_(Yt){if(zr){var en=Ho;if(en){var sn=en;if(!cR(Yt,en)){if(j_(Yt))throw Error(dt(418));en=o2(sn);var ln=xo;en&&cR(Yt,en)?lR(ln,sn):(Yt.flags=Yt.flags&-4097|2,zr=!1,xo=Yt)}}else{if(j_(Yt))throw Error(dt(418));Yt.flags=Yt.flags&-4097|2,zr=!1,xo=Yt}}}function uR(Yt){for(Yt=Yt.return;Yt!==null&&Yt.tag!==5&&Yt.tag!==3&&Yt.tag!==13;)Yt=Yt.return;xo=Yt}function g2(Yt){if(!Vn||Yt!==xo)return!1;if(!zr)return uR(Yt),zr=!0,!1;if(Yt.tag!==3&&(Yt.tag!==5||X4(Yt.type)&&!Mn(Yt.type,Yt.memoizedProps))){var en=Ho;if(en){if(j_(Yt))throw hR(),Error(dt(418));for(;en;)lR(Yt,en),en=o2(en)}}if(uR(Yt),Yt.tag===13){if(!Vn)throw Error(dt(316));if(Yt=Yt.memoizedState,Yt=Yt!==null?Yt.dehydrated:null,!Yt)throw Error(dt(317));Ho=G4(Yt)}else Ho=xo?o2(Yt.stateNode):null;return!0}function hR(){for(var Yt=Ho;Yt;)Yt=o2(Yt)}function Ty(){Vn&&(Ho=xo=null,Kv=zr=!1)}function $_(Yt){wl===null?wl=[Yt]:wl.push(Yt)}var fN=ft.ReactCurrentBatchConfig;function y2(Yt,en){if(Sl(Yt,en))return!0;if(typeof Yt!="object"||Yt===null||typeof en!="object"||en===null)return!1;var sn=Object.keys(Yt),ln=Object.keys(en);if(sn.length!==ln.length)return!1;for(ln=0;ln<sn.length;ln++){var gn=sn[ln];if(!Z4.call(en,gn)||!Sl(Yt[gn],en[gn]))return!1}return!0}function pN(Yt){switch(Yt.tag){case 5:return Gv(Yt.type);case 16:return Gv("Lazy");case 13:return Gv("Suspense");case 19:return Gv("SuspenseList");case 0:case 2:case 15:return Yt=__(Yt.type,!1),Yt;case 11:return Yt=__(Yt.type.render,!1),Yt;case 1:return Yt=__(Yt.type,!0),Yt;default:return""}}function Yv(Yt,en,sn){if(Yt=sn.ref,Yt!==null&&typeof Yt!="function"&&typeof Yt!="object"){if(sn._owner){if(sn=sn._owner,sn){if(sn.tag!==1)throw Error(dt(309));var ln=sn.stateNode}if(!ln)throw Error(dt(147,Yt));var gn=ln,kn=""+Yt;return en!==null&&en.ref!==null&&typeof en.ref=="function"&&en.ref._stringRef===kn?en.ref:(en=function(Nn){var Ln=gn.refs;Nn===null?delete Ln[kn]:Ln[kn]=Nn},en._stringRef=kn,en)}if(typeof Yt!="string")throw Error(dt(284));if(!sn._owner)throw Error(dt(290,Yt))}return Yt}function v2(Yt,en){throw Yt=Object.prototype.toString.call(en),Error(dt(31,Yt==="[object Object]"?"object with keys {"+Object.keys(en).join(", ")+"}":Yt))}function dR(Yt){var en=Yt._init;return en(Yt._payload)}function fR(Yt){function en(Bn,jn){if(Yt){var Gn=Bn.deletions;Gn===null?(Bn.deletions=[jn],Bn.flags|=16):Gn.push(jn)}}function sn(Bn,jn){if(!Yt)return null;for(;jn!==null;)en(Bn,jn),jn=jn.sibling;return null}function ln(Bn,jn){for(Bn=new Map;jn!==null;)jn.key!==null?Bn.set(jn.key,jn):Bn.set(jn.index,jn),jn=jn.sibling;return Bn}function gn(Bn,jn){return Bn=Ap(Bn,jn),Bn.index=0,Bn.sibling=null,Bn}function kn(Bn,jn,Gn){return Bn.index=Gn,Yt?(Gn=Bn.alternate,Gn!==null?(Gn=Gn.index,Gn<jn?(Bn.flags|=2,jn):Gn):(Bn.flags|=2,jn)):(Bn.flags|=1048576,jn)}function Nn(Bn){return Yt&&Bn.alternate===null&&(Bn.flags|=2),Bn}function Ln(Bn,jn,Gn,er){return jn===null||jn.tag!==6?(jn=IA(Gn,Bn.mode,er),jn.return=Bn,jn):(jn=gn(jn,Gn),jn.return=Bn,jn)}function Hn(Bn,jn,Gn,er){var ar=Gn.type;return ar===Tt?ir(Bn,jn,Gn.props.children,er,Gn.key):jn!==null&&(jn.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Jt&&dR(ar)===jn.type)?(er=gn(jn,Gn.props),er.ref=Yv(Bn,jn,Gn),er.return=Bn,er):(er=Y2(Gn.type,Gn.key,Gn.props,null,Bn.mode,er),er.ref=Yv(Bn,jn,Gn),er.return=Bn,er)}function Jn(Bn,jn,Gn,er){return jn===null||jn.tag!==4||jn.stateNode.containerInfo!==Gn.containerInfo||jn.stateNode.implementation!==Gn.implementation?(jn=DA(Gn,Bn.mode,er),jn.return=Bn,jn):(jn=gn(jn,Gn.children||[]),jn.return=Bn,jn)}function ir(Bn,jn,Gn,er,ar){return jn===null||jn.tag!==7?(jn=Vm(Gn,Bn.mode,er,ar),jn.return=Bn,jn):(jn=gn(jn,Gn),jn.return=Bn,jn)}function dr(Bn,jn,Gn){if(typeof jn=="string"&&jn!==""||typeof jn=="number")return jn=IA(""+jn,Bn.mode,Gn),jn.return=Bn,jn;if(typeof jn=="object"&&jn!==null){switch(jn.$$typeof){case St:return Gn=Y2(jn.type,jn.key,jn.props,null,Bn.mode,Gn),Gn.ref=Yv(Bn,null,jn),Gn.return=Bn,Gn;case kt:return jn=DA(jn,Bn.mode,Gn),jn.return=Bn,jn;case Jt:var er=jn._init;return dr(Bn,er(jn._payload),Gn)}if(Sn(jn)||nn(jn))return jn=Vm(jn,Bn.mode,Gn,null),jn.return=Bn,jn;v2(Bn,jn)}return null}function Qn(Bn,jn,Gn,er){var ar=jn!==null?jn.key:null;if(typeof Gn=="string"&&Gn!==""||typeof Gn=="number")return ar!==null?null:Ln(Bn,jn,""+Gn,er);if(typeof Gn=="object"&&Gn!==null){switch(Gn.$$typeof){case St:return Gn.key===ar?Hn(Bn,jn,Gn,er):null;case kt:return Gn.key===ar?Jn(Bn,jn,Gn,er):null;case Jt:return ar=Gn._init,Qn(Bn,jn,ar(Gn._payload),er)}if(Sn(Gn)||nn(Gn))return ar!==null?null:ir(Bn,jn,Gn,er,null);v2(Bn,Gn)}return null}function Vr(Bn,jn,Gn,er,ar){if(typeof er=="string"&&er!==""||typeof er=="number")return Bn=Bn.get(Gn)||null,Ln(jn,Bn,""+er,ar);if(typeof er=="object"&&er!==null){switch(er.$$typeof){case St:return Bn=Bn.get(er.key===null?Gn:er.key)||null,Hn(jn,Bn,er,ar);case kt:return Bn=Bn.get(er.key===null?Gn:er.key)||null,Jn(jn,Bn,er,ar);case Jt:var yr=er._init;return Vr(Bn,jn,Gn,yr(er._payload),ar)}if(Sn(er)||nn(er))return Bn=Bn.get(Gn)||null,ir(jn,Bn,er,ar,null);v2(jn,er)}return null}function Ir(Bn,jn,Gn,er){for(var ar=null,yr=null,pr=jn,wr=jn=0,gs=null;pr!==null&&wr<Gn.length;wr++){pr.index>wr?(gs=pr,pr=null):gs=pr.sibling;var kr=Qn(Bn,pr,Gn[wr],er);if(kr===null){pr===null&&(pr=gs);break}Yt&&pr&&kr.alternate===null&&en(Bn,pr),jn=kn(kr,jn,wr),yr===null?ar=kr:yr.sibling=kr,yr=kr,pr=gs}if(wr===Gn.length)return sn(Bn,pr),zr&&Im(Bn,wr),ar;if(pr===null){for(;wr<Gn.length;wr++)pr=dr(Bn,Gn[wr],er),pr!==null&&(jn=kn(pr,jn,wr),yr===null?ar=pr:yr.sibling=pr,yr=pr);return zr&&Im(Bn,wr),ar}for(pr=ln(Bn,pr);wr<Gn.length;wr++)gs=Vr(pr,Bn,wr,Gn[wr],er),gs!==null&&(Yt&&gs.alternate!==null&&pr.delete(gs.key===null?wr:gs.key),jn=kn(gs,jn,wr),yr===null?ar=gs:yr.sibling=gs,yr=gs);return Yt&&pr.forEach(function(Cp){return en(Bn,Cp)}),zr&&Im(Bn,wr),ar}function co(Bn,jn,Gn,er){var ar=nn(Gn);if(typeof ar!="function")throw Error(dt(150));if(Gn=ar.call(Gn),Gn==null)throw Error(dt(151));for(var yr=ar=null,pr=jn,wr=jn=0,gs=null,kr=Gn.next();pr!==null&&!kr.done;wr++,kr=Gn.next()){pr.index>wr?(gs=pr,pr=null):gs=pr.sibling;var Cp=Qn(Bn,pr,kr.value,er);if(Cp===null){pr===null&&(pr=gs);break}Yt&&pr&&Cp.alternate===null&&en(Bn,pr),jn=kn(Cp,jn,wr),yr===null?ar=Cp:yr.sibling=Cp,yr=Cp,pr=gs}if(kr.done)return sn(Bn,pr),zr&&Im(Bn,wr),ar;if(pr===null){for(;!kr.done;wr++,kr=Gn.next())kr=dr(Bn,kr.value,er),kr!==null&&(jn=kn(kr,jn,wr),yr===null?ar=kr:yr.sibling=kr,yr=kr);return zr&&Im(Bn,wr),ar}for(pr=ln(Bn,pr);!kr.done;wr++,kr=Gn.next())kr=Vr(pr,Bn,wr,kr.value,er),kr!==null&&(Yt&&kr.alternate!==null&&pr.delete(kr.key===null?wr:kr.key),jn=kn(kr,jn,wr),yr===null?ar=kr:yr.sibling=kr,yr=kr);return Yt&&pr.forEach(function(UN){return en(Bn,UN)}),zr&&Im(Bn,wr),ar}function Mu(Bn,jn,Gn,er){if(typeof Gn=="object"&&Gn!==null&&Gn.type===Tt&&Gn.key===null&&(Gn=Gn.props.children),typeof Gn=="object"&&Gn!==null){switch(Gn.$$typeof){case St:e:{for(var ar=Gn.key,yr=jn;yr!==null;){if(yr.key===ar){if(ar=Gn.type,ar===Tt){if(yr.tag===7){sn(Bn,yr.sibling),jn=gn(yr,Gn.props.children),jn.return=Bn,Bn=jn;break e}}else if(yr.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Jt&&dR(ar)===yr.type){sn(Bn,yr.sibling),jn=gn(yr,Gn.props),jn.ref=Yv(Bn,yr,Gn),jn.return=Bn,Bn=jn;break e}sn(Bn,yr);break}else en(Bn,yr);yr=yr.sibling}Gn.type===Tt?(jn=Vm(Gn.props.children,Bn.mode,er,Gn.key),jn.return=Bn,Bn=jn):(er=Y2(Gn.type,Gn.key,Gn.props,null,Bn.mode,er),er.ref=Yv(Bn,jn,Gn),er.return=Bn,Bn=er)}return Nn(Bn);case kt:e:{for(yr=Gn.key;jn!==null;){if(jn.key===yr)if(jn.tag===4&&jn.stateNode.containerInfo===Gn.containerInfo&&jn.stateNode.implementation===Gn.implementation){sn(Bn,jn.sibling),jn=gn(jn,Gn.children||[]),jn.return=Bn,Bn=jn;break e}else{sn(Bn,jn);break}else en(Bn,jn);jn=jn.sibling}jn=DA(Gn,Bn.mode,er),jn.return=Bn,Bn=jn}return Nn(Bn);case Jt:return yr=Gn._init,Mu(Bn,jn,yr(Gn._payload),er)}if(Sn(Gn))return Ir(Bn,jn,Gn,er);if(nn(Gn))return co(Bn,jn,Gn,er);v2(Bn,Gn)}return typeof Gn=="string"&&Gn!==""||typeof Gn=="number"?(Gn=""+Gn,jn!==null&&jn.tag===6?(sn(Bn,jn.sibling),jn=gn(jn,Gn),jn.return=Bn,Bn=jn):(sn(Bn,jn),jn=IA(Gn,Bn.mode,er),jn.return=Bn,Bn=jn),Nn(Bn)):sn(Bn,jn)}return Mu}var _y=fR(!0),pR=fR(!1),x2=xp(null),b2=null,Ay=null,B_=null;function V_(){B_=Ay=b2=null}function mR(Yt,en,sn){Dn?(jr(x2,en._currentValue),en._currentValue=sn):(jr(x2,en._currentValue2),en._currentValue2=sn)}function z_(Yt){var en=x2.current;Br(x2),Dn?Yt._currentValue=en:Yt._currentValue2=en}function H_(Yt,en,sn){for(;Yt!==null;){var ln=Yt.alternate;if((Yt.childLanes&en)!==en?(Yt.childLanes|=en,ln!==null&&(ln.childLanes|=en)):ln!==null&&(ln.childLanes&en)!==en&&(ln.childLanes|=en),Yt===sn)break;Yt=Yt.return}}function Cy(Yt,en){b2=Yt,B_=Ay=null,Yt=Yt.dependencies,Yt!==null&&Yt.firstContext!==null&&(Yt.lanes&en&&(eo=!0),Yt.firstContext=null)}function Uo(Yt){var en=Dn?Yt._currentValue:Yt._currentValue2;if(B_!==Yt)if(Yt={context:Yt,memoizedValue:en,next:null},Ay===null){if(b2===null)throw Error(dt(308));Ay=Yt,b2.dependencies={lanes:0,firstContext:Yt}}else Ay=Ay.next=Yt;return en}var Dm=null;function U_(Yt){Dm===null?Dm=[Yt]:Dm.push(Yt)}function gR(Yt,en,sn,ln){var gn=en.interleaved;return gn===null?(sn.next=sn,U_(en)):(sn.next=gn.next,gn.next=sn),en.interleaved=sn,Xl(Yt,ln)}function Xl(Yt,en){Yt.lanes|=en;var sn=Yt.alternate;for(sn!==null&&(sn.lanes|=en),sn=Yt,Yt=Yt.return;Yt!==null;)Yt.childLanes|=en,sn=Yt.alternate,sn!==null&&(sn.childLanes|=en),sn=Yt,Yt=Yt.return;return sn.tag===3?sn.stateNode:null}var Ep=!1;function G_(Yt){Yt.updateQueue={baseState:Yt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yR(Yt,en){Yt=Yt.updateQueue,en.updateQueue===Yt&&(en.updateQueue={baseState:Yt.baseState,firstBaseUpdate:Yt.firstBaseUpdate,lastBaseUpdate:Yt.lastBaseUpdate,shared:Yt.shared,effects:Yt.effects})}function Ru(Yt,en){return{eventTime:Yt,lane:en,tag:0,payload:null,callback:null,next:null}}function Sp(Yt,en,sn){var ln=Yt.updateQueue;if(ln===null)return null;if(ln=ln.shared,vr&2){var gn=ln.pending;return gn===null?en.next=en:(en.next=gn.next,gn.next=en),ln.pending=en,Xl(Yt,sn)}return gn=ln.interleaved,gn===null?(en.next=en,U_(ln)):(en.next=gn.next,gn.next=en),ln.interleaved=en,Xl(Yt,sn)}function E2(Yt,en,sn){if(en=en.updateQueue,en!==null&&(en=en.shared,(sn&4194240)!==0)){var ln=en.lanes;ln&=Yt.pendingLanes,sn|=ln,en.lanes=sn,P_(Yt,sn)}}function vR(Yt,en){var sn=Yt.updateQueue,ln=Yt.alternate;if(ln!==null&&(ln=ln.updateQueue,sn===ln)){var gn=null,kn=null;if(sn=sn.firstBaseUpdate,sn!==null){do{var Nn={eventTime:sn.eventTime,lane:sn.lane,tag:sn.tag,payload:sn.payload,callback:sn.callback,next:null};kn===null?gn=kn=Nn:kn=kn.next=Nn,sn=sn.next}while(sn!==null);kn===null?gn=kn=en:kn=kn.next=en}else gn=kn=en;sn={baseState:ln.baseState,firstBaseUpdate:gn,lastBaseUpdate:kn,shared:ln.shared,effects:ln.effects},Yt.updateQueue=sn;return}Yt=sn.lastBaseUpdate,Yt===null?sn.firstBaseUpdate=en:Yt.next=en,sn.lastBaseUpdate=en}function S2(Yt,en,sn,ln){var gn=Yt.updateQueue;Ep=!1;var kn=gn.firstBaseUpdate,Nn=gn.lastBaseUpdate,Ln=gn.shared.pending;if(Ln!==null){gn.shared.pending=null;var Hn=Ln,Jn=Hn.next;Hn.next=null,Nn===null?kn=Jn:Nn.next=Jn,Nn=Hn;var ir=Yt.alternate;ir!==null&&(ir=ir.updateQueue,Ln=ir.lastBaseUpdate,Ln!==Nn&&(Ln===null?ir.firstBaseUpdate=Jn:Ln.next=Jn,ir.lastBaseUpdate=Hn))}if(kn!==null){var dr=gn.baseState;Nn=0,ir=Jn=Hn=null,Ln=kn;do{var Qn=Ln.lane,Vr=Ln.eventTime;if((ln&Qn)===Qn){ir!==null&&(ir=ir.next={eventTime:Vr,lane:0,tag:Ln.tag,payload:Ln.payload,callback:Ln.callback,next:null});e:{var Ir=Yt,co=Ln;switch(Qn=en,Vr=sn,co.tag){case 1:if(Ir=co.payload,typeof Ir=="function"){dr=Ir.call(Vr,dr,Qn);break e}dr=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=co.payload,Qn=typeof Ir=="function"?Ir.call(Vr,dr,Qn):Ir,Qn==null)break e;dr=ut({},dr,Qn);break e;case 2:Ep=!0}}Ln.callback!==null&&Ln.lane!==0&&(Yt.flags|=64,Qn=gn.effects,Qn===null?gn.effects=[Ln]:Qn.push(Ln))}else Vr={eventTime:Vr,lane:Qn,tag:Ln.tag,payload:Ln.payload,callback:Ln.callback,next:null},ir===null?(Jn=ir=Vr,Hn=dr):ir=ir.next=Vr,Nn|=Qn;if(Ln=Ln.next,Ln===null){if(Ln=gn.shared.pending,Ln===null)break;Qn=Ln,Ln=Qn.next,Qn.next=null,gn.lastBaseUpdate=Qn,gn.shared.pending=null}}while(1);if(ir===null&&(Hn=dr),gn.baseState=Hn,gn.firstBaseUpdate=Jn,gn.lastBaseUpdate=ir,en=gn.shared.interleaved,en!==null){gn=en;do Nn|=gn.lane,gn=gn.next;while(gn!==en)}else kn===null&&(gn.shared.lanes=0);jm|=Nn,Yt.lanes=Nn,Yt.memoizedState=dr}}function xR(Yt,en,sn){if(Yt=en.effects,en.effects=null,Yt!==null)for(en=0;en<Yt.length;en++){var ln=Yt[en],gn=ln.callback;if(gn!==null){if(ln.callback=null,ln=sn,typeof gn!="function")throw Error(dt(191,gn));gn.call(ln)}}}var Xv={},Go=xp(Xv),Jv=xp(Xv),Ry=xp(Xv);function Jl(Yt){if(Yt===Xv)throw Error(dt(174));return Yt}function W_(Yt,en){jr(Ry,en),jr(Jv,Yt),jr(Go,Xv),Yt=xn(en),Br(Go),jr(Go,Yt)}function Py(){Br(Go),Br(Jv),Br(Ry)}function bR(Yt){var en=Jl(Ry.current),sn=Jl(Go.current);en=an(sn,Yt.type,en),sn!==en&&(jr(Jv,Yt),jr(Go,en))}function q_(Yt){Jv.current===Yt&&(Br(Go),Br(Jv))}var Kr=xp(0);function w2(Yt){for(var en=Yt;en!==null;){if(en.tag===13){var sn=en.memoizedState;if(sn!==null&&(sn=sn.dehydrated,sn===null||ZC(sn)||w_(sn)))return en}else if(en.tag===19&&en.memoizedProps.revealOrder!==void 0){if(en.flags&128)return en}else if(en.child!==null){en.child.return=en,en=en.child;continue}if(en===Yt)break;for(;en.sibling===null;){if(en.return===null||en.return===Yt)return null;en=en.return}en.sibling.return=en.return,en=en.sibling}return null}var K_=[];function Y_(){for(var Yt=0;Yt<K_.length;Yt++){var en=K_[Yt];Dn?en._workInProgressVersionPrimary=null:en._workInProgressVersionSecondary=null}K_.length=0}var k2=ft.ReactCurrentDispatcher,X_=ft.ReactCurrentBatchConfig,Lm=0,Yr=null,as=null,ps=null,T2=!1,Qv=!1,Zv=0,mN=0;function Ds(){throw Error(dt(321))}function J_(Yt,en){if(en===null)return!1;for(var sn=0;sn<en.length&&sn<Yt.length;sn++)if(!Sl(Yt[sn],en[sn]))return!1;return!0}function Q_(Yt,en,sn,ln,gn,kn){if(Lm=kn,Yr=en,en.memoizedState=null,en.updateQueue=null,en.lanes=0,k2.current=Yt===null||Yt.memoizedState===null?xN:bN,Yt=sn(ln,gn),Qv){kn=0;do{if(Qv=!1,Zv=0,25<=kn)throw Error(dt(301));kn+=1,ps=as=null,en.updateQueue=null,k2.current=EN,Yt=sn(ln,gn)}while(Qv)}if(k2.current=C2,en=as!==null&&as.next!==null,Lm=0,ps=as=Yr=null,T2=!1,en)throw Error(dt(300));return Yt}function Z_(){var Yt=Zv!==0;return Zv=0,Yt}function Ql(){var Yt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?Yr.memoizedState=ps=Yt:ps=ps.next=Yt,ps}function Wo(){if(as===null){var Yt=Yr.alternate;Yt=Yt!==null?Yt.memoizedState:null}else Yt=as.next;var en=ps===null?Yr.memoizedState:ps.next;if(en!==null)ps=en,as=Yt;else{if(Yt===null)throw Error(dt(310));as=Yt,Yt={memoizedState:as.memoizedState,baseState:as.baseState,baseQueue:as.baseQueue,queue:as.queue,next:null},ps===null?Yr.memoizedState=ps=Yt:ps=ps.next=Yt}return ps}function ex(Yt,en){return typeof en=="function"?en(Yt):en}function eA(Yt){var en=Wo(),sn=en.queue;if(sn===null)throw Error(dt(311));sn.lastRenderedReducer=Yt;var ln=as,gn=ln.baseQueue,kn=sn.pending;if(kn!==null){if(gn!==null){var Nn=gn.next;gn.next=kn.next,kn.next=Nn}ln.baseQueue=gn=kn,sn.pending=null}if(gn!==null){kn=gn.next,ln=ln.baseState;var Ln=Nn=null,Hn=null,Jn=kn;do{var ir=Jn.lane;if((Lm&ir)===ir)Hn!==null&&(Hn=Hn.next={lane:0,action:Jn.action,hasEagerState:Jn.hasEagerState,eagerState:Jn.eagerState,next:null}),ln=Jn.hasEagerState?Jn.eagerState:Yt(ln,Jn.action);else{var dr={lane:ir,action:Jn.action,hasEagerState:Jn.hasEagerState,eagerState:Jn.eagerState,next:null};Hn===null?(Ln=Hn=dr,Nn=ln):Hn=Hn.next=dr,Yr.lanes|=ir,jm|=ir}Jn=Jn.next}while(Jn!==null&&Jn!==kn);Hn===null?Nn=ln:Hn.next=Ln,Sl(ln,en.memoizedState)||(eo=!0),en.memoizedState=ln,en.baseState=Nn,en.baseQueue=Hn,sn.lastRenderedState=ln}if(Yt=sn.interleaved,Yt!==null){gn=Yt;do kn=gn.lane,Yr.lanes|=kn,jm|=kn,gn=gn.next;while(gn!==Yt)}else gn===null&&(sn.lanes=0);return[en.memoizedState,sn.dispatch]}function tA(Yt){var en=Wo(),sn=en.queue;if(sn===null)throw Error(dt(311));sn.lastRenderedReducer=Yt;var ln=sn.dispatch,gn=sn.pending,kn=en.memoizedState;if(gn!==null){sn.pending=null;var Nn=gn=gn.next;do kn=Yt(kn,Nn.action),Nn=Nn.next;while(Nn!==gn);Sl(kn,en.memoizedState)||(eo=!0),en.memoizedState=kn,en.baseQueue===null&&(en.baseState=kn),sn.lastRenderedState=kn}return[kn,ln]}function ER(){}function SR(Yt,en){var sn=Yr,ln=Wo(),gn=en(),kn=!Sl(ln.memoizedState,gn);if(kn&&(ln.memoizedState=gn,eo=!0),ln=ln.queue,nA(TR.bind(null,sn,ln,Yt),[Yt]),ln.getSnapshot!==en||kn||ps!==null&&ps.memoizedState.tag&1){if(sn.flags|=2048,tx(9,kR.bind(null,sn,ln,gn,en),void 0,null),ms===null)throw Error(dt(349));Lm&30||wR(sn,en,gn)}return gn}function wR(Yt,en,sn){Yt.flags|=16384,Yt={getSnapshot:en,value:sn},en=Yr.updateQueue,en===null?(en={lastEffect:null,stores:null},Yr.updateQueue=en,en.stores=[Yt]):(sn=en.stores,sn===null?en.stores=[Yt]:sn.push(Yt))}function kR(Yt,en,sn,ln){en.value=sn,en.getSnapshot=ln,_R(en)&&AR(Yt)}function TR(Yt,en,sn){return sn(function(){_R(en)&&AR(Yt)})}function _R(Yt){var en=Yt.getSnapshot;Yt=Yt.value;try{var sn=en();return!Sl(Yt,sn)}catch{return!0}}function AR(Yt){var en=Xl(Yt,1);en!==null&&qo(en,Yt,1,-1)}function RR(Yt){var en=Ql();return typeof Yt=="function"&&(Yt=Yt()),en.memoizedState=en.baseState=Yt,Yt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ex,lastRenderedState:Yt},en.queue=Yt,Yt=Yt.dispatch=vN.bind(null,Yr,Yt),[en.memoizedState,Yt]}function tx(Yt,en,sn,ln){return Yt={tag:Yt,create:en,destroy:sn,deps:ln,next:null},en=Yr.updateQueue,en===null?(en={lastEffect:null,stores:null},Yr.updateQueue=en,en.lastEffect=Yt.next=Yt):(sn=en.lastEffect,sn===null?en.lastEffect=Yt.next=Yt:(ln=sn.next,sn.next=Yt,Yt.next=ln,en.lastEffect=Yt)),Yt}function PR(){return Wo().memoizedState}function _2(Yt,en,sn,ln){var gn=Ql();Yr.flags|=Yt,gn.memoizedState=tx(1|en,sn,void 0,ln===void 0?null:ln)}function A2(Yt,en,sn,ln){var gn=Wo();ln=ln===void 0?null:ln;var kn=void 0;if(as!==null){var Nn=as.memoizedState;if(kn=Nn.destroy,ln!==null&&J_(ln,Nn.deps)){gn.memoizedState=tx(en,sn,kn,ln);return}}Yr.flags|=Yt,gn.memoizedState=tx(1|en,sn,kn,ln)}function NR(Yt,en){return _2(8390656,8,Yt,en)}function nA(Yt,en){return A2(2048,8,Yt,en)}function MR(Yt,en){return A2(4,2,Yt,en)}function OR(Yt,en){return A2(4,4,Yt,en)}function IR(Yt,en){if(typeof en=="function")return Yt=Yt(),en(Yt),function(){en(null)};if(en!=null)return Yt=Yt(),en.current=Yt,function(){en.current=null}}function DR(Yt,en,sn){return sn=sn!=null?sn.concat([Yt]):null,A2(4,4,IR.bind(null,en,Yt),sn)}function rA(){}function LR(Yt,en){var sn=Wo();en=en===void 0?null:en;var ln=sn.memoizedState;return ln!==null&&en!==null&&J_(en,ln[1])?ln[0]:(sn.memoizedState=[Yt,en],Yt)}function jR(Yt,en){var sn=Wo();en=en===void 0?null:en;var ln=sn.memoizedState;return ln!==null&&en!==null&&J_(en,ln[1])?ln[0]:(Yt=Yt(),sn.memoizedState=[Yt,en],Yt)}function FR(Yt,en,sn){return Lm&21?(Sl(sn,en)||(sn=rR(),Yr.lanes|=sn,jm|=sn,Yt.baseState=!0),en):(Yt.baseState&&(Yt.baseState=!1,eo=!0),Yt.memoizedState=sn)}function gN(Yt,en){var sn=Sr;Sr=sn!==0&&4>sn?sn:4,Yt(!0);var ln=X_.transition;X_.transition={};try{Yt(!1),en()}finally{Sr=sn,X_.transition=ln}}function $R(){return Wo().memoizedState}function yN(Yt,en,sn){var ln=Tp(Yt);if(sn={lane:ln,action:sn,hasEagerState:!1,eagerState:null,next:null},BR(Yt))VR(en,sn);else if(sn=gR(Yt,en,sn,ln),sn!==null){var gn=Fs();qo(sn,Yt,ln,gn),zR(sn,en,ln)}}function vN(Yt,en,sn){var ln=Tp(Yt),gn={lane:ln,action:sn,hasEagerState:!1,eagerState:null,next:null};if(BR(Yt))VR(en,gn);else{var kn=Yt.alternate;if(Yt.lanes===0&&(kn===null||kn.lanes===0)&&(kn=en.lastRenderedReducer,kn!==null))try{var Nn=en.lastRenderedState,Ln=kn(Nn,sn);if(gn.hasEagerState=!0,gn.eagerState=Ln,Sl(Ln,Nn)){var Hn=en.interleaved;Hn===null?(gn.next=gn,U_(en)):(gn.next=Hn.next,Hn.next=gn),en.interleaved=gn;return}}catch{}finally{}sn=gR(Yt,en,gn,ln),sn!==null&&(gn=Fs(),qo(sn,Yt,ln,gn),zR(sn,en,ln))}}function BR(Yt){var en=Yt.alternate;return Yt===Yr||en!==null&&en===Yr}function VR(Yt,en){Qv=T2=!0;var sn=Yt.pending;sn===null?en.next=en:(en.next=sn.next,sn.next=en),Yt.pending=en}function zR(Yt,en,sn){if(sn&4194240){var ln=en.lanes;ln&=Yt.pendingLanes,sn|=ln,en.lanes=sn,P_(Yt,sn)}}var C2={readContext:Uo,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useInsertionEffect:Ds,useLayoutEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useMutableSource:Ds,useSyncExternalStore:Ds,useId:Ds,unstable_isNewReconciler:!1},xN={readContext:Uo,useCallback:function(Yt,en){return Ql().memoizedState=[Yt,en===void 0?null:en],Yt},useContext:Uo,useEffect:NR,useImperativeHandle:function(Yt,en,sn){return sn=sn!=null?sn.concat([Yt]):null,_2(4194308,4,IR.bind(null,en,Yt),sn)},useLayoutEffect:function(Yt,en){return _2(4194308,4,Yt,en)},useInsertionEffect:function(Yt,en){return _2(4,2,Yt,en)},useMemo:function(Yt,en){var sn=Ql();return en=en===void 0?null:en,Yt=Yt(),sn.memoizedState=[Yt,en],Yt},useReducer:function(Yt,en,sn){var ln=Ql();return en=sn!==void 0?sn(en):en,ln.memoizedState=ln.baseState=en,Yt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:en},ln.queue=Yt,Yt=Yt.dispatch=yN.bind(null,Yr,Yt),[ln.memoizedState,Yt]},useRef:function(Yt){var en=Ql();return Yt={current:Yt},en.memoizedState=Yt},useState:RR,useDebugValue:rA,useDeferredValue:function(Yt){return Ql().memoizedState=Yt},useTransition:function(){var Yt=RR(!1),en=Yt[0];return Yt=gN.bind(null,Yt[1]),Ql().memoizedState=Yt,[en,Yt]},useMutableSource:function(){},useSyncExternalStore:function(Yt,en,sn){var ln=Yr,gn=Ql();if(zr){if(sn===void 0)throw Error(dt(407));sn=sn()}else{if(sn=en(),ms===null)throw Error(dt(349));Lm&30||wR(ln,en,sn)}gn.memoizedState=sn;var kn={value:sn,getSnapshot:en};return gn.queue=kn,NR(TR.bind(null,ln,kn,Yt),[Yt]),ln.flags|=2048,tx(9,kR.bind(null,ln,kn,sn,en),void 0,null),sn},useId:function(){var Yt=Ql(),en=ms.identifierPrefix;if(zr){var sn=Cu,ln=Au;sn=(ln&~(1<<32-El(ln)-1)).toString(32)+sn,en=":"+en+"R"+sn,sn=Zv++,0<sn&&(en+="H"+sn.toString(32)),en+=":"}else sn=mN++,en=":"+en+"r"+sn.toString(32)+":";return Yt.memoizedState=en},unstable_isNewReconciler:!1},bN={readContext:Uo,useCallback:LR,useContext:Uo,useEffect:nA,useImperativeHandle:DR,useInsertionEffect:MR,useLayoutEffect:OR,useMemo:jR,useReducer:eA,useRef:PR,useState:function(){return eA(ex)},useDebugValue:rA,useDeferredValue:function(Yt){var en=Wo();return FR(en,as.memoizedState,Yt)},useTransition:function(){var Yt=eA(ex)[0],en=Wo().memoizedState;return[Yt,en]},useMutableSource:ER,useSyncExternalStore:SR,useId:$R,unstable_isNewReconciler:!1},EN={readContext:Uo,useCallback:LR,useContext:Uo,useEffect:nA,useImperativeHandle:DR,useInsertionEffect:MR,useLayoutEffect:OR,useMemo:jR,useReducer:tA,useRef:PR,useState:function(){return tA(ex)},useDebugValue:rA,useDeferredValue:function(Yt){var en=Wo();return as===null?en.memoizedState=Yt:FR(en,as.memoizedState,Yt)},useTransition:function(){var Yt=tA(ex)[0],en=Wo().memoizedState;return[Yt,en]},useMutableSource:ER,useSyncExternalStore:SR,useId:$R,unstable_isNewReconciler:!1};function Tl(Yt,en){if(Yt&&Yt.defaultProps){en=ut({},en),Yt=Yt.defaultProps;for(var sn in Yt)en[sn]===void 0&&(en[sn]=Yt[sn]);return en}return en}function iA(Yt,en,sn,ln){en=Yt.memoizedState,sn=sn(ln,en),sn=sn==null?en:ut({},en,sn),Yt.memoizedState=sn,Yt.lanes===0&&(Yt.updateQueue.baseState=sn)}var R2={isMounted:function(Yt){return(Yt=Yt._reactInternals)?pn(Yt)===Yt:!1},enqueueSetState:function(Yt,en,sn){Yt=Yt._reactInternals;var ln=Fs(),gn=Tp(Yt),kn=Ru(ln,gn);kn.payload=en,sn!=null&&(kn.callback=sn),en=Sp(Yt,kn,gn),en!==null&&(qo(en,Yt,gn,ln),E2(en,Yt,gn))},enqueueReplaceState:function(Yt,en,sn){Yt=Yt._reactInternals;var ln=Fs(),gn=Tp(Yt),kn=Ru(ln,gn);kn.tag=1,kn.payload=en,sn!=null&&(kn.callback=sn),en=Sp(Yt,kn,gn),en!==null&&(qo(en,Yt,gn,ln),E2(en,Yt,gn))},enqueueForceUpdate:function(Yt,en){Yt=Yt._reactInternals;var sn=Fs(),ln=Tp(Yt),gn=Ru(sn,ln);gn.tag=2,en!=null&&(gn.callback=en),en=Sp(Yt,gn,ln),en!==null&&(qo(en,Yt,ln,sn),E2(en,Yt,ln))}};function HR(Yt,en,sn,ln,gn,kn,Nn){return Yt=Yt.stateNode,typeof Yt.shouldComponentUpdate=="function"?Yt.shouldComponentUpdate(ln,kn,Nn):en.prototype&&en.prototype.isPureReactComponent?!y2(sn,ln)||!y2(gn,kn):!0}function UR(Yt,en,sn){var ln=!1,gn=bp,kn=en.contextType;return typeof kn=="object"&&kn!==null?kn=Uo(kn):(gn=Zs(en)?Mm:Is.current,ln=en.contextTypes,kn=(ln=ln!=null)?Sy(Yt,gn):bp),en=new en(sn,kn),Yt.memoizedState=en.state!==null&&en.state!==void 0?en.state:null,en.updater=R2,Yt.stateNode=en,en._reactInternals=Yt,ln&&(Yt=Yt.stateNode,Yt.__reactInternalMemoizedUnmaskedChildContext=gn,Yt.__reactInternalMemoizedMaskedChildContext=kn),en}function GR(Yt,en,sn,ln){Yt=en.state,typeof en.componentWillReceiveProps=="function"&&en.componentWillReceiveProps(sn,ln),typeof en.UNSAFE_componentWillReceiveProps=="function"&&en.UNSAFE_componentWillReceiveProps(sn,ln),en.state!==Yt&&R2.enqueueReplaceState(en,en.state,null)}function sA(Yt,en,sn,ln){var gn=Yt.stateNode;gn.props=sn,gn.state=Yt.memoizedState,gn.refs={},G_(Yt);var kn=en.contextType;typeof kn=="object"&&kn!==null?gn.context=Uo(kn):(kn=Zs(en)?Mm:Is.current,gn.context=Sy(Yt,kn)),gn.state=Yt.memoizedState,kn=en.getDerivedStateFromProps,typeof kn=="function"&&(iA(Yt,en,kn,sn),gn.state=Yt.memoizedState),typeof en.getDerivedStateFromProps=="function"||typeof gn.getSnapshotBeforeUpdate=="function"||typeof gn.UNSAFE_componentWillMount!="function"&&typeof gn.componentWillMount!="function"||(en=gn.state,typeof gn.componentWillMount=="function"&&gn.componentWillMount(),typeof gn.UNSAFE_componentWillMount=="function"&&gn.UNSAFE_componentWillMount(),en!==gn.state&&R2.enqueueReplaceState(gn,gn.state,null),S2(Yt,sn,gn,ln),gn.state=Yt.memoizedState),typeof gn.componentDidMount=="function"&&(Yt.flags|=4194308)}function Ny(Yt,en){try{var sn="",ln=en;do sn+=pN(ln),ln=ln.return;while(ln);var gn=sn}catch(kn){gn=`
Error generating stack: `+kn.message+`
`+kn.stack}return{value:Yt,source:en,stack:gn,digest:null}}function oA(Yt,en,sn){return{value:Yt,source:null,stack:sn??null,digest:en??null}}function aA(Yt,en){try{console.error(en.value)}catch(sn){setTimeout(function(){throw sn})}}var SN=typeof WeakMap=="function"?WeakMap:Map;function WR(Yt,en,sn){sn=Ru(-1,sn),sn.tag=3,sn.payload={element:null};var ln=en.value;return sn.callback=function(){H2||(H2=!0,AA=ln),aA(Yt,en)},sn}function qR(Yt,en,sn){sn=Ru(-1,sn),sn.tag=3;var ln=Yt.type.getDerivedStateFromError;if(typeof ln=="function"){var gn=en.value;sn.payload=function(){return ln(gn)},sn.callback=function(){aA(Yt,en)}}var kn=Yt.stateNode;return kn!==null&&typeof kn.componentDidCatch=="function"&&(sn.callback=function(){aA(Yt,en),typeof ln!="function"&&(wp===null?wp=new Set([this]):wp.add(this));var Nn=en.stack;this.componentDidCatch(en.value,{componentStack:Nn!==null?Nn:""})}),sn}function KR(Yt,en,sn){var ln=Yt.pingCache;if(ln===null){ln=Yt.pingCache=new SN;var gn=new Set;ln.set(en,gn)}else gn=ln.get(en),gn===void 0&&(gn=new Set,ln.set(en,gn));gn.has(sn)||(gn.add(sn),Yt=LN.bind(null,Yt,en,sn),en.then(Yt,Yt))}function YR(Yt){do{var en;if((en=Yt.tag===13)&&(en=Yt.memoizedState,en=en!==null?en.dehydrated!==null:!0),en)return Yt;Yt=Yt.return}while(Yt!==null);return null}function XR(Yt,en,sn,ln,gn){return Yt.mode&1?(Yt.flags|=65536,Yt.lanes=gn,Yt):(Yt===en?Yt.flags|=65536:(Yt.flags|=128,sn.flags|=131072,sn.flags&=-52805,sn.tag===1&&(sn.alternate===null?sn.tag=17:(en=Ru(-1,1),en.tag=2,Sp(sn,en,1))),sn.lanes|=1),Yt)}var wN=ft.ReactCurrentOwner,eo=!1;function Ws(Yt,en,sn,ln){en.child=Yt===null?pR(en,null,sn,ln):_y(en,Yt.child,sn,ln)}function JR(Yt,en,sn,ln,gn){sn=sn.render;var kn=en.ref;return Cy(en,gn),ln=Q_(Yt,en,sn,ln,kn,gn),sn=Z_(),Yt!==null&&!eo?(en.updateQueue=Yt.updateQueue,en.flags&=-2053,Yt.lanes&=~gn,Pu(Yt,en,gn)):(zr&&sn&&D_(en),en.flags|=1,Ws(Yt,en,ln,gn),en.child)}function QR(Yt,en,sn,ln,gn){if(Yt===null){var kn=sn.type;return typeof kn=="function"&&!OA(kn)&&kn.defaultProps===void 0&&sn.compare===null&&sn.defaultProps===void 0?(en.tag=15,en.type=kn,ZR(Yt,en,kn,ln,gn)):(Yt=Y2(sn.type,null,ln,en,en.mode,gn),Yt.ref=en.ref,Yt.return=en,en.child=Yt)}if(kn=Yt.child,!(Yt.lanes&gn)){var Nn=kn.memoizedProps;if(sn=sn.compare,sn=sn!==null?sn:y2,sn(Nn,ln)&&Yt.ref===en.ref)return Pu(Yt,en,gn)}return en.flags|=1,Yt=Ap(kn,ln),Yt.ref=en.ref,Yt.return=en,en.child=Yt}function ZR(Yt,en,sn,ln,gn){if(Yt!==null){var kn=Yt.memoizedProps;if(y2(kn,ln)&&Yt.ref===en.ref)if(eo=!1,en.pendingProps=ln=kn,(Yt.lanes&gn)!==0)Yt.flags&131072&&(eo=!0);else return en.lanes=Yt.lanes,Pu(Yt,en,gn)}return lA(Yt,en,sn,ln,gn)}function eP(Yt,en,sn){var ln=en.pendingProps,gn=ln.children,kn=Yt!==null?Yt.memoizedState:null;if(ln.mode==="hidden")if(!(en.mode&1))en.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Oy,bo),bo|=sn;else{if(!(sn&1073741824))return Yt=kn!==null?kn.baseLanes|sn:sn,en.lanes=en.childLanes=1073741824,en.memoizedState={baseLanes:Yt,cachePool:null,transitions:null},en.updateQueue=null,jr(Oy,bo),bo|=Yt,null;en.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln=kn!==null?kn.baseLanes:sn,jr(Oy,bo),bo|=ln}else kn!==null?(ln=kn.baseLanes|sn,en.memoizedState=null):ln=sn,jr(Oy,bo),bo|=ln;return Ws(Yt,en,gn,sn),en.child}function tP(Yt,en){var sn=en.ref;(Yt===null&&sn!==null||Yt!==null&&Yt.ref!==sn)&&(en.flags|=512,en.flags|=2097152)}function lA(Yt,en,sn,ln,gn){var kn=Zs(sn)?Mm:Is.current;return kn=Sy(en,kn),Cy(en,gn),sn=Q_(Yt,en,sn,ln,kn,gn),ln=Z_(),Yt!==null&&!eo?(en.updateQueue=Yt.updateQueue,en.flags&=-2053,Yt.lanes&=~gn,Pu(Yt,en,gn)):(zr&&ln&&D_(en),en.flags|=1,Ws(Yt,en,sn,gn),en.child)}function nP(Yt,en,sn,ln,gn){if(Zs(sn)){var kn=!0;l2(en)}else kn=!1;if(Cy(en,gn),en.stateNode===null)N2(Yt,en),UR(en,sn,ln),sA(en,sn,ln,gn),ln=!0;else if(Yt===null){var Nn=en.stateNode,Ln=en.memoizedProps;Nn.props=Ln;var Hn=Nn.context,Jn=sn.contextType;typeof Jn=="object"&&Jn!==null?Jn=Uo(Jn):(Jn=Zs(sn)?Mm:Is.current,Jn=Sy(en,Jn));var ir=sn.getDerivedStateFromProps,dr=typeof ir=="function"||typeof Nn.getSnapshotBeforeUpdate=="function";dr||typeof Nn.UNSAFE_componentWillReceiveProps!="function"&&typeof Nn.componentWillReceiveProps!="function"||(Ln!==ln||Hn!==Jn)&&GR(en,Nn,ln,Jn),Ep=!1;var Qn=en.memoizedState;Nn.state=Qn,S2(en,ln,Nn,gn),Hn=en.memoizedState,Ln!==ln||Qn!==Hn||Qs.current||Ep?(typeof ir=="function"&&(iA(en,sn,ir,ln),Hn=en.memoizedState),(Ln=Ep||HR(en,sn,Ln,ln,Qn,Hn,Jn))?(dr||typeof Nn.UNSAFE_componentWillMount!="function"&&typeof Nn.componentWillMount!="function"||(typeof Nn.componentWillMount=="function"&&Nn.componentWillMount(),typeof Nn.UNSAFE_componentWillMount=="function"&&Nn.UNSAFE_componentWillMount()),typeof Nn.componentDidMount=="function"&&(en.flags|=4194308)):(typeof Nn.componentDidMount=="function"&&(en.flags|=4194308),en.memoizedProps=ln,en.memoizedState=Hn),Nn.props=ln,Nn.state=Hn,Nn.context=Jn,ln=Ln):(typeof Nn.componentDidMount=="function"&&(en.flags|=4194308),ln=!1)}else{Nn=en.stateNode,yR(Yt,en),Ln=en.memoizedProps,Jn=en.type===en.elementType?Ln:Tl(en.type,Ln),Nn.props=Jn,dr=en.pendingProps,Qn=Nn.context,Hn=sn.contextType,typeof Hn=="object"&&Hn!==null?Hn=Uo(Hn):(Hn=Zs(sn)?Mm:Is.current,Hn=Sy(en,Hn));var Vr=sn.getDerivedStateFromProps;(ir=typeof Vr=="function"||typeof Nn.getSnapshotBeforeUpdate=="function")||typeof Nn.UNSAFE_componentWillReceiveProps!="function"&&typeof Nn.componentWillReceiveProps!="function"||(Ln!==dr||Qn!==Hn)&&GR(en,Nn,ln,Hn),Ep=!1,Qn=en.memoizedState,Nn.state=Qn,S2(en,ln,Nn,gn);var Ir=en.memoizedState;Ln!==dr||Qn!==Ir||Qs.current||Ep?(typeof Vr=="function"&&(iA(en,sn,Vr,ln),Ir=en.memoizedState),(Jn=Ep||HR(en,sn,Jn,ln,Qn,Ir,Hn)||!1)?(ir||typeof Nn.UNSAFE_componentWillUpdate!="function"&&typeof Nn.componentWillUpdate!="function"||(typeof Nn.componentWillUpdate=="function"&&Nn.componentWillUpdate(ln,Ir,Hn),typeof Nn.UNSAFE_componentWillUpdate=="function"&&Nn.UNSAFE_componentWillUpdate(ln,Ir,Hn)),typeof Nn.componentDidUpdate=="function"&&(en.flags|=4),typeof Nn.getSnapshotBeforeUpdate=="function"&&(en.flags|=1024)):(typeof Nn.componentDidUpdate!="function"||Ln===Yt.memoizedProps&&Qn===Yt.memoizedState||(en.flags|=4),typeof Nn.getSnapshotBeforeUpdate!="function"||Ln===Yt.memoizedProps&&Qn===Yt.memoizedState||(en.flags|=1024),en.memoizedProps=ln,en.memoizedState=Ir),Nn.props=ln,Nn.state=Ir,Nn.context=Hn,ln=Jn):(typeof Nn.componentDidUpdate!="function"||Ln===Yt.memoizedProps&&Qn===Yt.memoizedState||(en.flags|=4),typeof Nn.getSnapshotBeforeUpdate!="function"||Ln===Yt.memoizedProps&&Qn===Yt.memoizedState||(en.flags|=1024),ln=!1)}return cA(Yt,en,sn,ln,kn,gn)}function cA(Yt,en,sn,ln,gn,kn){tP(Yt,en);var Nn=(en.flags&128)!==0;if(!ln&&!Nn)return gn&&nR(en,sn,!1),Pu(Yt,en,kn);ln=en.stateNode,wN.current=en;var Ln=Nn&&typeof sn.getDerivedStateFromError!="function"?null:ln.render();return en.flags|=1,Yt!==null&&Nn?(en.child=_y(en,Yt.child,null,kn),en.child=_y(en,null,Ln,kn)):Ws(Yt,en,Ln,kn),en.memoizedState=ln.state,gn&&nR(en,sn,!0),en.child}function rP(Yt){var en=Yt.stateNode;en.pendingContext?eR(Yt,en.pendingContext,en.pendingContext!==en.context):en.context&&eR(Yt,en.context,!1),W_(Yt,en.containerInfo)}function iP(Yt,en,sn,ln,gn){return Ty(),$_(gn),en.flags|=256,Ws(Yt,en,sn,ln),en.child}var uA={dehydrated:null,treeContext:null,retryLane:0};function hA(Yt){return{baseLanes:Yt,cachePool:null,transitions:null}}function sP(Yt,en,sn){var ln=en.pendingProps,gn=Kr.current,kn=!1,Nn=(en.flags&128)!==0,Ln;if((Ln=Nn)||(Ln=Yt!==null&&Yt.memoizedState===null?!1:(gn&2)!==0),Ln?(kn=!0,en.flags&=-129):(Yt===null||Yt.memoizedState!==null)&&(gn|=1),jr(Kr,gn&1),Yt===null)return F_(en),Yt=en.memoizedState,Yt!==null&&(Yt=Yt.dehydrated,Yt!==null)?(en.mode&1?w_(Yt)?en.lanes=8:en.lanes=1073741824:en.lanes=1,null):(Nn=ln.children,Yt=ln.fallback,kn?(ln=en.mode,kn=en.child,Nn={mode:"hidden",children:Nn},!(ln&1)&&kn!==null?(kn.childLanes=0,kn.pendingProps=Nn):kn=X2(Nn,ln,0,null),Yt=Vm(Yt,ln,sn,null),kn.return=en,Yt.return=en,kn.sibling=Yt,en.child=kn,en.child.memoizedState=hA(sn),en.memoizedState=uA,Yt):dA(en,Nn));if(gn=Yt.memoizedState,gn!==null&&(Ln=gn.dehydrated,Ln!==null))return kN(Yt,en,Nn,ln,Ln,gn,sn);if(kn){kn=ln.fallback,Nn=en.mode,gn=Yt.child,Ln=gn.sibling;var Hn={mode:"hidden",children:ln.children};return!(Nn&1)&&en.child!==gn?(ln=en.child,ln.childLanes=0,ln.pendingProps=Hn,en.deletions=null):(ln=Ap(gn,Hn),ln.subtreeFlags=gn.subtreeFlags&14680064),Ln!==null?kn=Ap(Ln,kn):(kn=Vm(kn,Nn,sn,null),kn.flags|=2),kn.return=en,ln.return=en,ln.sibling=kn,en.child=ln,ln=kn,kn=en.child,Nn=Yt.child.memoizedState,Nn=Nn===null?hA(sn):{baseLanes:Nn.baseLanes|sn,cachePool:null,transitions:Nn.transitions},kn.memoizedState=Nn,kn.childLanes=Yt.childLanes&~sn,en.memoizedState=uA,ln}return kn=Yt.child,Yt=kn.sibling,ln=Ap(kn,{mode:"visible",children:ln.children}),!(en.mode&1)&&(ln.lanes=sn),ln.return=en,ln.sibling=null,Yt!==null&&(sn=en.deletions,sn===null?(en.deletions=[Yt],en.flags|=16):sn.push(Yt)),en.child=ln,en.memoizedState=null,ln}function dA(Yt,en){return en=X2({mode:"visible",children:en},Yt.mode,0,null),en.return=Yt,Yt.child=en}function P2(Yt,en,sn,ln){return ln!==null&&$_(ln),_y(en,Yt.child,null,sn),Yt=dA(en,en.pendingProps.children),Yt.flags|=2,en.memoizedState=null,Yt}function kN(Yt,en,sn,ln,gn,kn,Nn){if(sn)return en.flags&256?(en.flags&=-257,ln=oA(Error(dt(422))),P2(Yt,en,Nn,ln)):en.memoizedState!==null?(en.child=Yt.child,en.flags|=128,null):(kn=ln.fallback,gn=en.mode,ln=X2({mode:"visible",children:ln.children},gn,0,null),kn=Vm(kn,gn,Nn,null),kn.flags|=2,ln.return=en,kn.return=en,ln.sibling=kn,en.child=ln,en.mode&1&&_y(en,Yt.child,null,Nn),en.child.memoizedState=hA(Nn),en.memoizedState=uA,kn);if(!(en.mode&1))return P2(Yt,en,Nn,null);if(w_(gn))return ln=j4(gn).digest,kn=Error(dt(419)),ln=oA(kn,ln,void 0),P2(Yt,en,Nn,ln);if(sn=(Nn&Yt.childLanes)!==0,eo||sn){if(ln=ms,ln!==null){switch(Nn&-Nn){case 4:gn=2;break;case 16:gn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:gn=32;break;case 536870912:gn=268435456;break;default:gn=0}gn=gn&(ln.suspendedLanes|Nn)?0:gn,gn!==0&&gn!==kn.retryLane&&(kn.retryLane=gn,Xl(Yt,gn),qo(ln,Yt,gn,-1))}return MA(),ln=oA(Error(dt(421))),P2(Yt,en,Nn,ln)}return ZC(gn)?(en.flags|=128,en.child=Yt.child,en=jN.bind(null,Yt),F4(gn,en),null):(Yt=kn.treeContext,Vn&&(Ho=V4(gn),xo=en,zr=!0,wl=null,Kv=!1,Yt!==null&&(Vo[zo++]=Au,Vo[zo++]=Cu,Vo[zo++]=Om,Au=Yt.id,Cu=Yt.overflow,Om=en)),en=dA(en,ln.children),en.flags|=4096,en)}function oP(Yt,en,sn){Yt.lanes|=en;var ln=Yt.alternate;ln!==null&&(ln.lanes|=en),H_(Yt.return,en,sn)}function fA(Yt,en,sn,ln,gn){var kn=Yt.memoizedState;kn===null?Yt.memoizedState={isBackwards:en,rendering:null,renderingStartTime:0,last:ln,tail:sn,tailMode:gn}:(kn.isBackwards=en,kn.rendering=null,kn.renderingStartTime=0,kn.last=ln,kn.tail=sn,kn.tailMode=gn)}function aP(Yt,en,sn){var ln=en.pendingProps,gn=ln.revealOrder,kn=ln.tail;if(Ws(Yt,en,ln.children,sn),ln=Kr.current,ln&2)ln=ln&1|2,en.flags|=128;else{if(Yt!==null&&Yt.flags&128)e:for(Yt=en.child;Yt!==null;){if(Yt.tag===13)Yt.memoizedState!==null&&oP(Yt,sn,en);else if(Yt.tag===19)oP(Yt,sn,en);else if(Yt.child!==null){Yt.child.return=Yt,Yt=Yt.child;continue}if(Yt===en)break e;for(;Yt.sibling===null;){if(Yt.return===null||Yt.return===en)break e;Yt=Yt.return}Yt.sibling.return=Yt.return,Yt=Yt.sibling}ln&=1}if(jr(Kr,ln),!(en.mode&1))en.memoizedState=null;else switch(gn){case"forwards":for(sn=en.child,gn=null;sn!==null;)Yt=sn.alternate,Yt!==null&&w2(Yt)===null&&(gn=sn),sn=sn.sibling;sn=gn,sn===null?(gn=en.child,en.child=null):(gn=sn.sibling,sn.sibling=null),fA(en,!1,gn,sn,kn);break;case"backwards":for(sn=null,gn=en.child,en.child=null;gn!==null;){if(Yt=gn.alternate,Yt!==null&&w2(Yt)===null){en.child=gn;break}Yt=gn.sibling,gn.sibling=sn,sn=gn,gn=Yt}fA(en,!0,sn,null,kn);break;case"together":fA(en,!1,null,null,void 0);break;default:en.memoizedState=null}return en.child}function N2(Yt,en){!(en.mode&1)&&Yt!==null&&(Yt.alternate=null,en.alternate=null,en.flags|=2)}function Pu(Yt,en,sn){if(Yt!==null&&(en.dependencies=Yt.dependencies),jm|=en.lanes,!(sn&en.childLanes))return null;if(Yt!==null&&en.child!==Yt.child)throw Error(dt(153));if(en.child!==null){for(Yt=en.child,sn=Ap(Yt,Yt.pendingProps),en.child=sn,sn.return=en;Yt.sibling!==null;)Yt=Yt.sibling,sn=sn.sibling=Ap(Yt,Yt.pendingProps),sn.return=en;sn.sibling=null}return en.child}function TN(Yt,en,sn){switch(en.tag){case 3:rP(en),Ty();break;case 5:bR(en);break;case 1:Zs(en.type)&&l2(en);break;case 4:W_(en,en.stateNode.containerInfo);break;case 10:mR(en,en.type._context,en.memoizedProps.value);break;case 13:var ln=en.memoizedState;if(ln!==null)return ln.dehydrated!==null?(jr(Kr,Kr.current&1),en.flags|=128,null):sn&en.child.childLanes?sP(Yt,en,sn):(jr(Kr,Kr.current&1),Yt=Pu(Yt,en,sn),Yt!==null?Yt.sibling:null);jr(Kr,Kr.current&1);break;case 19:if(ln=(sn&en.childLanes)!==0,Yt.flags&128){if(ln)return aP(Yt,en,sn);en.flags|=128}var gn=en.memoizedState;if(gn!==null&&(gn.rendering=null,gn.tail=null,gn.lastEffect=null),jr(Kr,Kr.current),ln)break;return null;case 22:case 23:return en.lanes=0,eP(Yt,en,sn)}return Pu(Yt,en,sn)}function Zl(Yt){Yt.flags|=4}function lP(Yt,en){if(Yt!==null&&Yt.child===en.child)return!0;if(en.flags&16)return!1;for(Yt=en.child;Yt!==null;){if(Yt.flags&12854||Yt.subtreeFlags&12854)return!1;Yt=Yt.sibling}return!0}var nx,rx,M2,O2;if(Fn)nx=function(Yt,en){for(var sn=en.child;sn!==null;){if(sn.tag===5||sn.tag===6)Tn(Yt,sn.stateNode);else if(sn.tag!==4&&sn.child!==null){sn.child.return=sn,sn=sn.child;continue}if(sn===en)break;for(;sn.sibling===null;){if(sn.return===null||sn.return===en)return;sn=sn.return}sn.sibling.return=sn.return,sn=sn.sibling}},rx=function(){},M2=function(Yt,en,sn,ln,gn){if(Yt=Yt.memoizedProps,Yt!==ln){var kn=en.stateNode,Nn=Jl(Go.current);sn=Pn(kn,sn,Yt,ln,gn,Nn),(en.updateQueue=sn)&&Zl(en)}},O2=function(Yt,en,sn,ln){sn!==ln&&Zl(en)};else if(Xn){nx=function(Yt,en,sn,ln){for(var gn=en.child;gn!==null;){if(gn.tag===5){var kn=gn.stateNode;sn&&ln&&(kn=JC(kn,gn.type,gn.memoizedProps,gn)),Tn(Yt,kn)}else if(gn.tag===6)kn=gn.stateNode,sn&&ln&&(kn=QC(kn,gn.memoizedProps,gn)),Tn(Yt,kn);else if(gn.tag!==4){if(gn.tag===22&&gn.memoizedState!==null)kn=gn.child,kn!==null&&(kn.return=gn),nx(Yt,gn,!0,!0);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}}if(gn===en)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===en)return;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}};var cP=function(Yt,en,sn,ln){for(var gn=en.child;gn!==null;){if(gn.tag===5){var kn=gn.stateNode;sn&&ln&&(kn=JC(kn,gn.type,gn.memoizedProps,gn)),XC(Yt,kn)}else if(gn.tag===6)kn=gn.stateNode,sn&&ln&&(kn=QC(kn,gn.memoizedProps,gn)),XC(Yt,kn);else if(gn.tag!==4){if(gn.tag===22&&gn.memoizedState!==null)kn=gn.child,kn!==null&&(kn.return=gn),cP(Yt,gn,!0,!0);else if(gn.child!==null){gn.child.return=gn,gn=gn.child;continue}}if(gn===en)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===en)return;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}};rx=function(Yt,en){var sn=en.stateNode;if(!lP(Yt,en)){Yt=sn.containerInfo;var ln=YC(Yt);cP(ln,en,!1,!1),sn.pendingChildren=ln,Zl(en),O4(Yt,ln)}},M2=function(Yt,en,sn,ln,gn){var kn=Yt.stateNode,Nn=Yt.memoizedProps;if((Yt=lP(Yt,en))&&Nn===ln)en.stateNode=kn;else{var Ln=en.stateNode,Hn=Jl(Go.current),Jn=null;Nn!==ln&&(Jn=Pn(Ln,sn,Nn,ln,gn,Hn)),Yt&&Jn===null?en.stateNode=kn:(kn=M4(kn,Jn,sn,Nn,ln,en,Yt,Ln),An(kn,sn,ln,gn,Hn)&&Zl(en),en.stateNode=kn,Yt?Zl(en):nx(kn,en,!1,!1))}},O2=function(Yt,en,sn,ln){sn!==ln?(Yt=Jl(Ry.current),sn=Jl(Go.current),en.stateNode=Rn(ln,Yt,sn,en),Zl(en)):en.stateNode=Yt.stateNode}}else rx=function(){},M2=function(){},O2=function(){};function ix(Yt,en){if(!zr)switch(Yt.tailMode){case"hidden":en=Yt.tail;for(var sn=null;en!==null;)en.alternate!==null&&(sn=en),en=en.sibling;sn===null?Yt.tail=null:sn.sibling=null;break;case"collapsed":sn=Yt.tail;for(var ln=null;sn!==null;)sn.alternate!==null&&(ln=sn),sn=sn.sibling;ln===null?en||Yt.tail===null?Yt.tail=null:Yt.tail.sibling=null:ln.sibling=null}}function Ls(Yt){var en=Yt.alternate!==null&&Yt.alternate.child===Yt.child,sn=0,ln=0;if(en)for(var gn=Yt.child;gn!==null;)sn|=gn.lanes|gn.childLanes,ln|=gn.subtreeFlags&14680064,ln|=gn.flags&14680064,gn.return=Yt,gn=gn.sibling;else for(gn=Yt.child;gn!==null;)sn|=gn.lanes|gn.childLanes,ln|=gn.subtreeFlags,ln|=gn.flags,gn.return=Yt,gn=gn.sibling;return Yt.subtreeFlags|=ln,Yt.childLanes=sn,en}function _N(Yt,en,sn){var ln=en.pendingProps;switch(L_(en),en.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(en),null;case 1:return Zs(en.type)&&a2(),Ls(en),null;case 3:return sn=en.stateNode,Py(),Br(Qs),Br(Is),Y_(),sn.pendingContext&&(sn.context=sn.pendingContext,sn.pendingContext=null),(Yt===null||Yt.child===null)&&(g2(en)?Zl(en):Yt===null||Yt.memoizedState.isDehydrated&&!(en.flags&256)||(en.flags|=1024,wl!==null&&(PA(wl),wl=null))),rx(Yt,en),Ls(en),null;case 5:q_(en),sn=Jl(Ry.current);var gn=en.type;if(Yt!==null&&en.stateNode!=null)M2(Yt,en,gn,ln,sn),Yt.ref!==en.ref&&(en.flags|=512,en.flags|=2097152);else{if(!ln){if(en.stateNode===null)throw Error(dt(166));return Ls(en),null}if(Yt=Jl(Go.current),g2(en)){if(!Vn)throw Error(dt(175));Yt=z4(en.stateNode,en.type,en.memoizedProps,sn,Yt,en,!Kv),en.updateQueue=Yt,Yt!==null&&Zl(en)}else{var kn=mn(gn,ln,sn,Yt,en);nx(kn,en,!1,!1),en.stateNode=kn,An(kn,gn,ln,sn,Yt)&&Zl(en)}en.ref!==null&&(en.flags|=512,en.flags|=2097152)}return Ls(en),null;case 6:if(Yt&&en.stateNode!=null)O2(Yt,en,Yt.memoizedProps,ln);else{if(typeof ln!="string"&&en.stateNode===null)throw Error(dt(166));if(Yt=Jl(Ry.current),sn=Jl(Go.current),g2(en)){if(!Vn)throw Error(dt(176));if(Yt=en.stateNode,sn=en.memoizedProps,(ln=H4(Yt,sn,en,!Kv))&&(gn=xo,gn!==null))switch(gn.tag){case 3:J4(gn.stateNode.containerInfo,Yt,sn,(gn.mode&1)!==0);break;case 5:Q4(gn.type,gn.memoizedProps,gn.stateNode,Yt,sn,(gn.mode&1)!==0)}ln&&Zl(en)}else en.stateNode=Rn(ln,Yt,sn,en)}return Ls(en),null;case 13:if(Br(Kr),ln=en.memoizedState,Yt===null||Yt.memoizedState!==null&&Yt.memoizedState.dehydrated!==null){if(zr&&Ho!==null&&en.mode&1&&!(en.flags&128))hR(),Ty(),en.flags|=98560,gn=!1;else if(gn=g2(en),ln!==null&&ln.dehydrated!==null){if(Yt===null){if(!gn)throw Error(dt(318));if(!Vn)throw Error(dt(344));if(gn=en.memoizedState,gn=gn!==null?gn.dehydrated:null,!gn)throw Error(dt(317));U4(gn,en)}else Ty(),!(en.flags&128)&&(en.memoizedState=null),en.flags|=4;Ls(en),gn=!1}else wl!==null&&(PA(wl),wl=null),gn=!0;if(!gn)return en.flags&65536?en:null}return en.flags&128?(en.lanes=sn,en):(sn=ln!==null,sn!==(Yt!==null&&Yt.memoizedState!==null)&&sn&&(en.child.flags|=8192,en.mode&1&&(Yt===null||Kr.current&1?ls===0&&(ls=3):MA())),en.updateQueue!==null&&(en.flags|=4),Ls(en),null);case 4:return Py(),rx(Yt,en),Yt===null&&Zn(en.stateNode.containerInfo),Ls(en),null;case 10:return z_(en.type._context),Ls(en),null;case 17:return Zs(en.type)&&a2(),Ls(en),null;case 19:if(Br(Kr),gn=en.memoizedState,gn===null)return Ls(en),null;if(ln=(en.flags&128)!==0,kn=gn.rendering,kn===null)if(ln)ix(gn,!1);else{if(ls!==0||Yt!==null&&Yt.flags&128)for(Yt=en.child;Yt!==null;){if(kn=w2(Yt),kn!==null){for(en.flags|=128,ix(gn,!1),Yt=kn.updateQueue,Yt!==null&&(en.updateQueue=Yt,en.flags|=4),en.subtreeFlags=0,Yt=sn,sn=en.child;sn!==null;)ln=sn,gn=Yt,ln.flags&=14680066,kn=ln.alternate,kn===null?(ln.childLanes=0,ln.lanes=gn,ln.child=null,ln.subtreeFlags=0,ln.memoizedProps=null,ln.memoizedState=null,ln.updateQueue=null,ln.dependencies=null,ln.stateNode=null):(ln.childLanes=kn.childLanes,ln.lanes=kn.lanes,ln.child=kn.child,ln.subtreeFlags=0,ln.deletions=null,ln.memoizedProps=kn.memoizedProps,ln.memoizedState=kn.memoizedState,ln.updateQueue=kn.updateQueue,ln.type=kn.type,gn=kn.dependencies,ln.dependencies=gn===null?null:{lanes:gn.lanes,firstContext:gn.firstContext}),sn=sn.sibling;return jr(Kr,Kr.current&1|2),en.child}Yt=Yt.sibling}gn.tail!==null&&fs()>_A&&(en.flags|=128,ln=!0,ix(gn,!1),en.lanes=4194304)}else{if(!ln)if(Yt=w2(kn),Yt!==null){if(en.flags|=128,ln=!0,Yt=Yt.updateQueue,Yt!==null&&(en.updateQueue=Yt,en.flags|=4),ix(gn,!0),gn.tail===null&&gn.tailMode==="hidden"&&!kn.alternate&&!zr)return Ls(en),null}else 2*fs()-gn.renderingStartTime>_A&&sn!==1073741824&&(en.flags|=128,ln=!0,ix(gn,!1),en.lanes=4194304);gn.isBackwards?(kn.sibling=en.child,en.child=kn):(Yt=gn.last,Yt!==null?Yt.sibling=kn:en.child=kn,gn.last=kn)}return gn.tail!==null?(en=gn.tail,gn.rendering=en,gn.tail=en.sibling,gn.renderingStartTime=fs(),en.sibling=null,Yt=Kr.current,jr(Kr,ln?Yt&1|2:Yt&1),en):(Ls(en),null);case 22:case 23:return NA(),sn=en.memoizedState!==null,Yt!==null&&Yt.memoizedState!==null!==sn&&(en.flags|=8192),sn&&en.mode&1?bo&1073741824&&(Ls(en),Fn&&en.subtreeFlags&6&&(en.flags|=8192)):Ls(en),null;case 24:return null;case 25:return null}throw Error(dt(156,en.tag))}function AN(Yt,en){switch(L_(en),en.tag){case 1:return Zs(en.type)&&a2(),Yt=en.flags,Yt&65536?(en.flags=Yt&-65537|128,en):null;case 3:return Py(),Br(Qs),Br(Is),Y_(),Yt=en.flags,Yt&65536&&!(Yt&128)?(en.flags=Yt&-65537|128,en):null;case 5:return q_(en),null;case 13:if(Br(Kr),Yt=en.memoizedState,Yt!==null&&Yt.dehydrated!==null){if(en.alternate===null)throw Error(dt(340));Ty()}return Yt=en.flags,Yt&65536?(en.flags=Yt&-65537|128,en):null;case 19:return Br(Kr),null;case 4:return Py(),null;case 10:return z_(en.type._context),null;case 22:case 23:return NA(),null;case 24:return null;default:return null}}var I2=!1,js=!1,CN=typeof WeakSet=="function"?WeakSet:Set,nr=null;function My(Yt,en){var sn=Yt.ref;if(sn!==null)if(typeof sn=="function")try{sn(null)}catch(ln){Hr(Yt,en,ln)}else sn.current=null}function pA(Yt,en,sn){try{sn()}catch(ln){Hr(Yt,en,ln)}}var uP=!1;function RN(Yt,en){for(cn(Yt.containerInfo),nr=en;nr!==null;)if(Yt=nr,en=Yt.child,(Yt.subtreeFlags&1028)!==0&&en!==null)en.return=Yt,nr=en;else for(;nr!==null;){Yt=nr;try{var sn=Yt.alternate;if(Yt.flags&1024)switch(Yt.tag){case 0:case 11:case 15:break;case 1:if(sn!==null){var ln=sn.memoizedProps,gn=sn.memoizedState,kn=Yt.stateNode,Nn=kn.getSnapshotBeforeUpdate(Yt.elementType===Yt.type?ln:Tl(Yt.type,ln),gn);kn.__reactInternalSnapshotBeforeUpdate=Nn}break;case 3:Fn&&N4(Yt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(Ln){Hr(Yt,Yt.return,Ln)}if(en=Yt.sibling,en!==null){en.return=Yt.return,nr=en;break}nr=Yt.return}return sn=uP,uP=!1,sn}function sx(Yt,en,sn){var ln=en.updateQueue;if(ln=ln!==null?ln.lastEffect:null,ln!==null){var gn=ln=ln.next;do{if((gn.tag&Yt)===Yt){var kn=gn.destroy;gn.destroy=void 0,kn!==void 0&&pA(en,sn,kn)}gn=gn.next}while(gn!==ln)}}function D2(Yt,en){if(en=en.updateQueue,en=en!==null?en.lastEffect:null,en!==null){var sn=en=en.next;do{if((sn.tag&Yt)===Yt){var ln=sn.create;sn.destroy=ln()}sn=sn.next}while(sn!==en)}}function mA(Yt){var en=Yt.ref;if(en!==null){var sn=Yt.stateNode;switch(Yt.tag){case 5:Yt=fn(sn);break;default:Yt=sn}typeof en=="function"?en(Yt):en.current=Yt}}function hP(Yt){var en=Yt.alternate;en!==null&&(Yt.alternate=null,hP(en)),Yt.child=null,Yt.deletions=null,Yt.sibling=null,Yt.tag===5&&(en=Yt.stateNode,en!==null&&hr(en)),Yt.stateNode=null,Yt.return=null,Yt.dependencies=null,Yt.memoizedProps=null,Yt.memoizedState=null,Yt.pendingProps=null,Yt.stateNode=null,Yt.updateQueue=null}function dP(Yt){return Yt.tag===5||Yt.tag===3||Yt.tag===4}function fP(Yt){e:for(;;){for(;Yt.sibling===null;){if(Yt.return===null||dP(Yt.return))return null;Yt=Yt.return}for(Yt.sibling.return=Yt.return,Yt=Yt.sibling;Yt.tag!==5&&Yt.tag!==6&&Yt.tag!==18;){if(Yt.flags&2||Yt.child===null||Yt.tag===4)continue e;Yt.child.return=Yt,Yt=Yt.child}if(!(Yt.flags&2))return Yt.stateNode}}function gA(Yt,en,sn){var ln=Yt.tag;if(ln===5||ln===6)Yt=Yt.stateNode,en?k4(sn,Yt,en):Ts(sn,Yt);else if(ln!==4&&(Yt=Yt.child,Yt!==null))for(gA(Yt,en,sn),Yt=Yt.sibling;Yt!==null;)gA(Yt,en,sn),Yt=Yt.sibling}function yA(Yt,en,sn){var ln=Yt.tag;if(ln===5||ln===6)Yt=Yt.stateNode,en?w4(sn,Yt,en):br(sn,Yt);else if(ln!==4&&(Yt=Yt.child,Yt!==null))for(yA(Yt,en,sn),Yt=Yt.sibling;Yt!==null;)yA(Yt,en,sn),Yt=Yt.sibling}var _s=null,_l=!1;function _c(Yt,en,sn){for(sn=sn.child;sn!==null;)vA(Yt,en,sn),sn=sn.sibling}function vA(Yt,en,sn){if(Kl&&typeof Kl.onCommitFiberUnmount=="function")try{Kl.onCommitFiberUnmount(d2,sn)}catch{}switch(sn.tag){case 5:js||My(sn,en);case 6:if(Fn){var ln=_s,gn=_l;_s=null,_c(Yt,en,sn),_s=ln,_l=gn,_s!==null&&(_l?_4(_s,sn.stateNode):T4(_s,sn.stateNode))}else _c(Yt,en,sn);break;case 18:Fn&&_s!==null&&(_l?Y4(_s,sn.stateNode):K4(_s,sn.stateNode));break;case 4:Fn?(ln=_s,gn=_l,_s=sn.stateNode.containerInfo,_l=!0,_c(Yt,en,sn),_s=ln,_l=gn):(Xn&&(ln=sn.stateNode.containerInfo,gn=YC(ln),S_(ln,gn)),_c(Yt,en,sn));break;case 0:case 11:case 14:case 15:if(!js&&(ln=sn.updateQueue,ln!==null&&(ln=ln.lastEffect,ln!==null))){gn=ln=ln.next;do{var kn=gn,Nn=kn.destroy;kn=kn.tag,Nn!==void 0&&(kn&2||kn&4)&&pA(sn,en,Nn),gn=gn.next}while(gn!==ln)}_c(Yt,en,sn);break;case 1:if(!js&&(My(sn,en),ln=sn.stateNode,typeof ln.componentWillUnmount=="function"))try{ln.props=sn.memoizedProps,ln.state=sn.memoizedState,ln.componentWillUnmount()}catch(Ln){Hr(sn,en,Ln)}_c(Yt,en,sn);break;case 21:_c(Yt,en,sn);break;case 22:sn.mode&1?(js=(ln=js)||sn.memoizedState!==null,_c(Yt,en,sn),js=ln):_c(Yt,en,sn);break;default:_c(Yt,en,sn)}}function pP(Yt){var en=Yt.updateQueue;if(en!==null){Yt.updateQueue=null;var sn=Yt.stateNode;sn===null&&(sn=Yt.stateNode=new CN),en.forEach(function(ln){var gn=FN.bind(null,Yt,ln);sn.has(ln)||(sn.add(ln),ln.then(gn,gn))})}}function Al(Yt,en){var sn=en.deletions;if(sn!==null)for(var ln=0;ln<sn.length;ln++){var gn=sn[ln];try{var kn=Yt,Nn=en;if(Fn){var Ln=Nn;e:for(;Ln!==null;){switch(Ln.tag){case 5:_s=Ln.stateNode,_l=!1;break e;case 3:_s=Ln.stateNode.containerInfo,_l=!0;break e;case 4:_s=Ln.stateNode.containerInfo,_l=!0;break e}Ln=Ln.return}if(_s===null)throw Error(dt(160));vA(kn,Nn,gn),_s=null,_l=!1}else vA(kn,Nn,gn);var Hn=gn.alternate;Hn!==null&&(Hn.return=null),gn.return=null}catch(Jn){Hr(gn,en,Jn)}}if(en.subtreeFlags&12854)for(en=en.child;en!==null;)mP(en,Yt),en=en.sibling}function mP(Yt,en){var sn=Yt.alternate,ln=Yt.flags;switch(Yt.tag){case 0:case 11:case 14:case 15:if(Al(en,Yt),eu(Yt),ln&4){try{sx(3,Yt,Yt.return),D2(3,Yt)}catch(Qn){Hr(Yt,Yt.return,Qn)}try{sx(5,Yt,Yt.return)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 1:Al(en,Yt),eu(Yt),ln&512&&sn!==null&&My(sn,sn.return);break;case 5:if(Al(en,Yt),eu(Yt),ln&512&&sn!==null&&My(sn,sn.return),Fn){if(Yt.flags&32){var gn=Yt.stateNode;try{KC(gn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}if(ln&4&&(gn=Yt.stateNode,gn!=null)){var kn=Yt.memoizedProps;if(sn=sn!==null?sn.memoizedProps:kn,ln=Yt.type,en=Yt.updateQueue,Yt.updateQueue=null,en!==null)try{S4(gn,en,ln,sn,kn,Yt)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}break;case 6:if(Al(en,Yt),eu(Yt),ln&4&&Fn){if(Yt.stateNode===null)throw Error(dt(162));gn=Yt.stateNode,kn=Yt.memoizedProps,sn=sn!==null?sn.memoizedProps:kn;try{Tr(gn,sn,kn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 3:if(Al(en,Yt),eu(Yt),ln&4){if(Fn&&Vn&&sn!==null&&sn.memoizedState.isDehydrated)try{W4(en.containerInfo)}catch(Qn){Hr(Yt,Yt.return,Qn)}if(Xn){gn=en.containerInfo,kn=en.pendingChildren;try{S_(gn,kn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}break;case 4:if(Al(en,Yt),eu(Yt),ln&4&&Xn){kn=Yt.stateNode,gn=kn.containerInfo,kn=kn.pendingChildren;try{S_(gn,kn)}catch(Qn){Hr(Yt,Yt.return,Qn)}}break;case 13:Al(en,Yt),eu(Yt),gn=Yt.child,gn.flags&8192&&(kn=gn.memoizedState!==null,gn.stateNode.isHidden=kn,!kn||gn.alternate!==null&&gn.alternate.memoizedState!==null||(TA=fs())),ln&4&&pP(Yt);break;case 22:var Nn=sn!==null&&sn.memoizedState!==null;if(Yt.mode&1?(js=(sn=js)||Nn,Al(en,Yt),js=sn):Al(en,Yt),eu(Yt),ln&8192){if(sn=Yt.memoizedState!==null,(Yt.stateNode.isHidden=sn)&&!Nn&&Yt.mode&1)for(nr=Yt,ln=Yt.child;ln!==null;){for(en=nr=ln;nr!==null;){Nn=nr;var Ln=Nn.child;switch(Nn.tag){case 0:case 11:case 14:case 15:sx(4,Nn,Nn.return);break;case 1:My(Nn,Nn.return);var Hn=Nn.stateNode;if(typeof Hn.componentWillUnmount=="function"){var Jn=Nn,ir=Nn.return;try{var dr=Jn;Hn.props=dr.memoizedProps,Hn.state=dr.memoizedState,Hn.componentWillUnmount()}catch(Qn){Hr(Jn,ir,Qn)}}break;case 5:My(Nn,Nn.return);break;case 22:if(Nn.memoizedState!==null){vP(en);continue}}Ln!==null?(Ln.return=Nn,nr=Ln):vP(en)}ln=ln.sibling}if(Fn){e:if(ln=null,Fn)for(en=Yt;;){if(en.tag===5){if(ln===null){ln=en;try{gn=en.stateNode,sn?A4(gn):R4(en.stateNode,en.memoizedProps)}catch(Qn){Hr(Yt,Yt.return,Qn)}}}else if(en.tag===6){if(ln===null)try{kn=en.stateNode,sn?C4(kn):P4(kn,en.memoizedProps)}catch(Qn){Hr(Yt,Yt.return,Qn)}}else if((en.tag!==22&&en.tag!==23||en.memoizedState===null||en===Yt)&&en.child!==null){en.child.return=en,en=en.child;continue}if(en===Yt)break e;for(;en.sibling===null;){if(en.return===null||en.return===Yt)break e;ln===en&&(ln=null),en=en.return}ln===en&&(ln=null),en.sibling.return=en.return,en=en.sibling}}}break;case 19:Al(en,Yt),eu(Yt),ln&4&&pP(Yt);break;case 21:break;default:Al(en,Yt),eu(Yt)}}function eu(Yt){var en=Yt.flags;if(en&2){try{if(Fn){e:{for(var sn=Yt.return;sn!==null;){if(dP(sn)){var ln=sn;break e}sn=sn.return}throw Error(dt(160))}switch(ln.tag){case 5:var gn=ln.stateNode;ln.flags&32&&(KC(gn),ln.flags&=-33);var kn=fP(Yt);yA(Yt,kn,gn);break;case 3:case 4:var Nn=ln.stateNode.containerInfo,Ln=fP(Yt);gA(Yt,Ln,Nn);break;default:throw Error(dt(161))}}}catch(Hn){Hr(Yt,Yt.return,Hn)}Yt.flags&=-3}en&4096&&(Yt.flags&=-4097)}function PN(Yt,en,sn){nr=Yt,gP(Yt)}function gP(Yt,en,sn){for(var ln=(Yt.mode&1)!==0;nr!==null;){var gn=nr,kn=gn.child;if(gn.tag===22&&ln){var Nn=gn.memoizedState!==null||I2;if(!Nn){var Ln=gn.alternate,Hn=Ln!==null&&Ln.memoizedState!==null||js;Ln=I2;var Jn=js;if(I2=Nn,(js=Hn)&&!Jn)for(nr=gn;nr!==null;)Nn=nr,Hn=Nn.child,Nn.tag===22&&Nn.memoizedState!==null?xP(gn):Hn!==null?(Hn.return=Nn,nr=Hn):xP(gn);for(;kn!==null;)nr=kn,gP(kn),kn=kn.sibling;nr=gn,I2=Ln,js=Jn}yP(Yt)}else gn.subtreeFlags&8772&&kn!==null?(kn.return=gn,nr=kn):yP(Yt)}}function yP(Yt){for(;nr!==null;){var en=nr;if(en.flags&8772){var sn=en.alternate;try{if(en.flags&8772)switch(en.tag){case 0:case 11:case 15:js||D2(5,en);break;case 1:var ln=en.stateNode;if(en.flags&4&&!js)if(sn===null)ln.componentDidMount();else{var gn=en.elementType===en.type?sn.memoizedProps:Tl(en.type,sn.memoizedProps);ln.componentDidUpdate(gn,sn.memoizedState,ln.__reactInternalSnapshotBeforeUpdate)}var kn=en.updateQueue;kn!==null&&xR(en,kn,ln);break;case 3:var Nn=en.updateQueue;if(Nn!==null){if(sn=null,en.child!==null)switch(en.child.tag){case 5:sn=fn(en.child.stateNode);break;case 1:sn=en.child.stateNode}xR(en,Nn,sn)}break;case 5:var Ln=en.stateNode;sn===null&&en.flags&4&&Wl(Ln,en.type,en.memoizedProps,en);break;case 6:break;case 4:break;case 12:break;case 13:if(Vn&&en.memoizedState===null){var Hn=en.alternate;if(Hn!==null){var Jn=Hn.memoizedState;if(Jn!==null){var ir=Jn.dehydrated;ir!==null&&q4(ir)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}js||en.flags&512&&mA(en)}catch(dr){Hr(en,en.return,dr)}}if(en===Yt){nr=null;break}if(sn=en.sibling,sn!==null){sn.return=en.return,nr=sn;break}nr=en.return}}function vP(Yt){for(;nr!==null;){var en=nr;if(en===Yt){nr=null;break}var sn=en.sibling;if(sn!==null){sn.return=en.return,nr=sn;break}nr=en.return}}function xP(Yt){for(;nr!==null;){var en=nr;try{switch(en.tag){case 0:case 11:case 15:var sn=en.return;try{D2(4,en)}catch(Hn){Hr(en,sn,Hn)}break;case 1:var ln=en.stateNode;if(typeof ln.componentDidMount=="function"){var gn=en.return;try{ln.componentDidMount()}catch(Hn){Hr(en,gn,Hn)}}var kn=en.return;try{mA(en)}catch(Hn){Hr(en,kn,Hn)}break;case 5:var Nn=en.return;try{mA(en)}catch(Hn){Hr(en,Nn,Hn)}}}catch(Hn){Hr(en,en.return,Hn)}if(en===Yt){nr=null;break}var Ln=en.sibling;if(Ln!==null){Ln.return=en.return,nr=Ln;break}nr=en.return}}var L2=0,j2=1,F2=2,$2=3,B2=4;if(typeof Symbol=="function"&&Symbol.for){var ox=Symbol.for;L2=ox("selector.component"),j2=ox("selector.has_pseudo_class"),F2=ox("selector.role"),$2=ox("selector.test_id"),B2=ox("selector.text")}function xA(Yt){var en=zn(Yt);if(en!=null){if(typeof en.memoizedProps["data-testname"]!="string")throw Error(dt(364));return en}if(Yt=Yn(Yt),Yt===null)throw Error(dt(362));return Yt.stateNode.current}function bA(Yt,en){switch(en.$$typeof){case L2:if(Yt.type===en.value)return!0;break;case j2:e:{en=en.value,Yt=[Yt,0];for(var sn=0;sn<Yt.length;){var ln=Yt[sn++],gn=Yt[sn++],kn=en[gn];if(ln.tag!==5||!or(ln)){for(;kn!=null&&bA(ln,kn);)gn++,kn=en[gn];if(gn===en.length){en=!0;break e}else for(ln=ln.child;ln!==null;)Yt.push(ln,gn),ln=ln.sibling}}en=!1}return en;case F2:if(Yt.tag===5&&ur(Yt.stateNode,en.value))return!0;break;case B2:if((Yt.tag===5||Yt.tag===6)&&(Yt=cr(Yt),Yt!==null&&0<=Yt.indexOf(en.value)))return!0;break;case $2:if(Yt.tag===5&&(Yt=Yt.memoizedProps["data-testname"],typeof Yt=="string"&&Yt.toLowerCase()===en.value.toLowerCase()))return!0;break;default:throw Error(dt(365))}return!1}function EA(Yt){switch(Yt.$$typeof){case L2:return"<"+(rn(Yt.value)||"Unknown")+">";case j2:return":has("+(EA(Yt)||"")+")";case F2:return'[role="'+Yt.value+'"]';case B2:return'"'+Yt.value+'"';case $2:return'[data-testname="'+Yt.value+'"]';default:throw Error(dt(365))}}function bP(Yt,en){var sn=[];Yt=[Yt,0];for(var ln=0;ln<Yt.length;){var gn=Yt[ln++],kn=Yt[ln++],Nn=en[kn];if(gn.tag!==5||!or(gn)){for(;Nn!=null&&bA(gn,Nn);)kn++,Nn=en[kn];if(kn===en.length)sn.push(gn);else for(gn=gn.child;gn!==null;)Yt.push(gn,kn),gn=gn.sibling}}return sn}function SA(Yt,en){if(!Kn)throw Error(dt(363));Yt=xA(Yt),Yt=bP(Yt,en),en=[],Yt=Array.from(Yt);for(var sn=0;sn<Yt.length;){var ln=Yt[sn++];if(ln.tag===5)or(ln)||en.push(ln.stateNode);else for(ln=ln.child;ln!==null;)Yt.push(ln),ln=ln.sibling}return en}var NN=Math.ceil,V2=ft.ReactCurrentDispatcher,wA=ft.ReactCurrentOwner,_i=ft.ReactCurrentBatchConfig,vr=0,ms=null,rs=null,As=0,bo=0,Oy=xp(0),ls=0,ax=null,jm=0,z2=0,kA=0,lx=null,to=null,TA=0,_A=1/0,Nu=null;function Iy(){_A=fs()+500}var H2=!1,AA=null,wp=null,U2=!1,kp=null,G2=0,cx=0,CA=null,W2=-1,q2=0;function Fs(){return vr&6?fs():W2!==-1?W2:W2=fs()}function Tp(Yt){return Yt.mode&1?vr&2&&As!==0?As&-As:fN.transition!==null?(q2===0&&(q2=rR()),q2):(Yt=Sr,Yt!==0?Yt:lr()):1}function qo(Yt,en,sn,ln){if(50<cx)throw cx=0,CA=null,Error(dt(185));qv(Yt,sn,ln),(!(vr&2)||Yt!==ms)&&(Yt===ms&&(!(vr&2)&&(z2|=sn),ls===4&&_p(Yt,As)),oo(Yt,ln),sn===1&&vr===0&&!(en.mode&1)&&(Iy(),f2&&Yl()))}function oo(Yt,en){var sn=Yt.callbackNode;iN(Yt,en);var ln=h2(Yt,Yt===ms?As:0);if(ln===0)sn!==null&&sR(sn),Yt.callbackNode=null,Yt.callbackPriority=0;else if(en=ln&-ln,Yt.callbackPriority!==en){if(sn!=null&&sR(sn),en===1)Yt.tag===0?dN(SP.bind(null,Yt)):oR(SP.bind(null,Yt)),$n?Un(function(){!(vr&6)&&Yl()}):N_(M_,Yl),sn=null;else{switch(iR(ln)){case 1:sn=M_;break;case 4:sn=lN;break;case 16:sn=O_;break;case 536870912:sn=cN;break;default:sn=O_}sn=NP(sn,EP.bind(null,Yt))}Yt.callbackPriority=en,Yt.callbackNode=sn}}function EP(Yt,en){if(W2=-1,q2=0,vr&6)throw Error(dt(327));var sn=Yt.callbackNode;if(Bm()&&Yt.callbackNode!==sn)return null;var ln=h2(Yt,Yt===ms?As:0);if(ln===0)return null;if(ln&30||ln&Yt.expiredLanes||en)en=K2(Yt,ln);else{en=ln;var gn=vr;vr|=2;var kn=TP();(ms!==Yt||As!==en)&&(Nu=null,Iy(),Fm(Yt,en));do try{IN();break}catch(Ln){kP(Yt,Ln)}while(1);V_(),V2.current=kn,vr=gn,rs!==null?en=0:(ms=null,As=0,en=ls)}if(en!==0){if(en===2&&(gn=C_(Yt),gn!==0&&(ln=gn,en=RA(Yt,gn))),en===1)throw sn=ax,Fm(Yt,0),_p(Yt,ln),oo(Yt,fs()),sn;if(en===6)_p(Yt,ln);else{if(gn=Yt.current.alternate,!(ln&30)&&!MN(gn)&&(en=K2(Yt,ln),en===2&&(kn=C_(Yt),kn!==0&&(ln=kn,en=RA(Yt,kn))),en===1))throw sn=ax,Fm(Yt,0),_p(Yt,ln),oo(Yt,fs()),sn;switch(Yt.finishedWork=gn,Yt.finishedLanes=ln,en){case 0:case 1:throw Error(dt(345));case 2:$m(Yt,to,Nu);break;case 3:if(_p(Yt,ln),(ln&130023424)===ln&&(en=TA+500-fs(),10<en)){if(h2(Yt,0)!==0)break;if(gn=Yt.suspendedLanes,(gn&ln)!==ln){Fs(),Yt.pingedLanes|=Yt.suspendedLanes&gn;break}Yt.timeoutHandle=Cn($m.bind(null,Yt,to,Nu),en);break}$m(Yt,to,Nu);break;case 4:if(_p(Yt,ln),(ln&4194240)===ln)break;for(en=Yt.eventTimes,gn=-1;0<ln;){var Nn=31-El(ln);kn=1<<Nn,Nn=en[Nn],Nn>gn&&(gn=Nn),ln&=~kn}if(ln=gn,ln=fs()-ln,ln=(120>ln?120:480>ln?480:1080>ln?1080:1920>ln?1920:3e3>ln?3e3:4320>ln?4320:1960*NN(ln/1960))-ln,10<ln){Yt.timeoutHandle=Cn($m.bind(null,Yt,to,Nu),ln);break}$m(Yt,to,Nu);break;case 5:$m(Yt,to,Nu);break;default:throw Error(dt(329))}}}return oo(Yt,fs()),Yt.callbackNode===sn?EP.bind(null,Yt):null}function RA(Yt,en){var sn=lx;return Yt.current.memoizedState.isDehydrated&&(Fm(Yt,en).flags|=256),Yt=K2(Yt,en),Yt!==2&&(en=to,to=sn,en!==null&&PA(en)),Yt}function PA(Yt){to===null?to=Yt:to.push.apply(to,Yt)}function MN(Yt){for(var en=Yt;;){if(en.flags&16384){var sn=en.updateQueue;if(sn!==null&&(sn=sn.stores,sn!==null))for(var ln=0;ln<sn.length;ln++){var gn=sn[ln],kn=gn.getSnapshot;gn=gn.value;try{if(!Sl(kn(),gn))return!1}catch{return!1}}}if(sn=en.child,en.subtreeFlags&16384&&sn!==null)sn.return=en,en=sn;else{if(en===Yt)break;for(;en.sibling===null;){if(en.return===null||en.return===Yt)return!0;en=en.return}en.sibling.return=en.return,en=en.sibling}}return!0}function _p(Yt,en){for(en&=~kA,en&=~z2,Yt.suspendedLanes|=en,Yt.pingedLanes&=~en,Yt=Yt.expirationTimes;0<en;){var sn=31-El(en),ln=1<<sn;Yt[sn]=-1,en&=~ln}}function SP(Yt){if(vr&6)throw Error(dt(327));Bm();var en=h2(Yt,0);if(!(en&1))return oo(Yt,fs()),null;var sn=K2(Yt,en);if(Yt.tag!==0&&sn===2){var ln=C_(Yt);ln!==0&&(en=ln,sn=RA(Yt,ln))}if(sn===1)throw sn=ax,Fm(Yt,0),_p(Yt,en),oo(Yt,fs()),sn;if(sn===6)throw Error(dt(345));return Yt.finishedWork=Yt.current.alternate,Yt.finishedLanes=en,$m(Yt,to,Nu),oo(Yt,fs()),null}function wP(Yt){kp!==null&&kp.tag===0&&!(vr&6)&&Bm();var en=vr;vr|=1;var sn=_i.transition,ln=Sr;try{if(_i.transition=null,Sr=1,Yt)return Yt()}finally{Sr=ln,_i.transition=sn,vr=en,!(vr&6)&&Yl()}}function NA(){bo=Oy.current,Br(Oy)}function Fm(Yt,en){Yt.finishedWork=null,Yt.finishedLanes=0;var sn=Yt.timeoutHandle;if(sn!==In&&(Yt.timeoutHandle=In,On(sn)),rs!==null)for(sn=rs.return;sn!==null;){var ln=sn;switch(L_(ln),ln.tag){case 1:ln=ln.type.childContextTypes,ln!=null&&a2();break;case 3:Py(),Br(Qs),Br(Is),Y_();break;case 5:q_(ln);break;case 4:Py();break;case 13:Br(Kr);break;case 19:Br(Kr);break;case 10:z_(ln.type._context);break;case 22:case 23:NA()}sn=sn.return}if(ms=Yt,rs=Yt=Ap(Yt.current,null),As=bo=en,ls=0,ax=null,kA=z2=jm=0,to=lx=null,Dm!==null){for(en=0;en<Dm.length;en++)if(sn=Dm[en],ln=sn.interleaved,ln!==null){sn.interleaved=null;var gn=ln.next,kn=sn.pending;if(kn!==null){var Nn=kn.next;kn.next=gn,ln.next=Nn}sn.pending=ln}Dm=null}return Yt}function kP(Yt,en){do{var sn=rs;try{if(V_(),k2.current=C2,T2){for(var ln=Yr.memoizedState;ln!==null;){var gn=ln.queue;gn!==null&&(gn.pending=null),ln=ln.next}T2=!1}if(Lm=0,ps=as=Yr=null,Qv=!1,Zv=0,wA.current=null,sn===null||sn.return===null){ls=1,ax=en,rs=null;break}e:{var kn=Yt,Nn=sn.return,Ln=sn,Hn=en;if(en=As,Ln.flags|=32768,Hn!==null&&typeof Hn=="object"&&typeof Hn.then=="function"){var Jn=Hn,ir=Ln,dr=ir.tag;if(!(ir.mode&1)&&(dr===0||dr===11||dr===15)){var Qn=ir.alternate;Qn?(ir.updateQueue=Qn.updateQueue,ir.memoizedState=Qn.memoizedState,ir.lanes=Qn.lanes):(ir.updateQueue=null,ir.memoizedState=null)}var Vr=YR(Nn);if(Vr!==null){Vr.flags&=-257,XR(Vr,Nn,Ln,kn,en),Vr.mode&1&&KR(kn,Jn,en),en=Vr,Hn=Jn;var Ir=en.updateQueue;if(Ir===null){var co=new Set;co.add(Hn),en.updateQueue=co}else Ir.add(Hn);break e}else{if(!(en&1)){KR(kn,Jn,en),MA();break e}Hn=Error(dt(426))}}else if(zr&&Ln.mode&1){var Mu=YR(Nn);if(Mu!==null){!(Mu.flags&65536)&&(Mu.flags|=256),XR(Mu,Nn,Ln,kn,en),$_(Ny(Hn,Ln));break e}}kn=Hn=Ny(Hn,Ln),ls!==4&&(ls=2),lx===null?lx=[kn]:lx.push(kn),kn=Nn;do{switch(kn.tag){case 3:kn.flags|=65536,en&=-en,kn.lanes|=en;var Bn=WR(kn,Hn,en);vR(kn,Bn);break e;case 1:Ln=Hn;var jn=kn.type,Gn=kn.stateNode;if(!(kn.flags&128)&&(typeof jn.getDerivedStateFromError=="function"||Gn!==null&&typeof Gn.componentDidCatch=="function"&&(wp===null||!wp.has(Gn)))){kn.flags|=65536,en&=-en,kn.lanes|=en;var er=qR(kn,Ln,en);vR(kn,er);break e}}kn=kn.return}while(kn!==null)}AP(sn)}catch(ar){en=ar,rs===sn&&sn!==null&&(rs=sn=sn.return);continue}break}while(1)}function TP(){var Yt=V2.current;return V2.current=C2,Yt===null?C2:Yt}function MA(){(ls===0||ls===3||ls===2)&&(ls=4),ms===null||!(jm&268435455)&&!(z2&268435455)||_p(ms,As)}function K2(Yt,en){var sn=vr;vr|=2;var ln=TP();(ms!==Yt||As!==en)&&(Nu=null,Fm(Yt,en));do try{ON();break}catch(gn){kP(Yt,gn)}while(1);if(V_(),vr=sn,V2.current=ln,rs!==null)throw Error(dt(261));return ms=null,As=0,ls}function ON(){for(;rs!==null;)_P(rs)}function IN(){for(;rs!==null&&!oN();)_P(rs)}function _P(Yt){var en=PP(Yt.alternate,Yt,bo);Yt.memoizedProps=Yt.pendingProps,en===null?AP(Yt):rs=en,wA.current=null}function AP(Yt){var en=Yt;do{var sn=en.alternate;if(Yt=en.return,en.flags&32768){if(sn=AN(sn,en),sn!==null){sn.flags&=32767,rs=sn;return}if(Yt!==null)Yt.flags|=32768,Yt.subtreeFlags=0,Yt.deletions=null;else{ls=6,rs=null;return}}else if(sn=_N(sn,en,bo),sn!==null){rs=sn;return}if(en=en.sibling,en!==null){rs=en;return}rs=en=Yt}while(en!==null);ls===0&&(ls=5)}function $m(Yt,en,sn){var ln=Sr,gn=_i.transition;try{_i.transition=null,Sr=1,DN(Yt,en,sn,ln)}finally{_i.transition=gn,Sr=ln}return null}function DN(Yt,en,sn,ln){do Bm();while(kp!==null);if(vr&6)throw Error(dt(327));sn=Yt.finishedWork;var gn=Yt.finishedLanes;if(sn===null)return null;if(Yt.finishedWork=null,Yt.finishedLanes=0,sn===Yt.current)throw Error(dt(177));Yt.callbackNode=null,Yt.callbackPriority=0;var kn=sn.lanes|sn.childLanes;if(sN(Yt,kn),Yt===ms&&(rs=ms=null,As=0),!(sn.subtreeFlags&2064)&&!(sn.flags&2064)||U2||(U2=!0,NP(O_,function(){return Bm(),null})),kn=(sn.flags&15990)!==0,sn.subtreeFlags&15990||kn){kn=_i.transition,_i.transition=null;var Nn=Sr;Sr=1;var Ln=vr;vr|=4,wA.current=null,RN(Yt,sn),mP(sn,Yt),bn(Yt.containerInfo),Yt.current=sn,PN(sn),aN(),vr=Ln,Sr=Nn,_i.transition=kn}else Yt.current=sn;if(U2&&(U2=!1,kp=Yt,G2=gn),kn=Yt.pendingLanes,kn===0&&(wp=null),uN(sn.stateNode),oo(Yt,fs()),en!==null)for(ln=Yt.onRecoverableError,sn=0;sn<en.length;sn++)gn=en[sn],ln(gn.value,{componentStack:gn.stack,digest:gn.digest});if(H2)throw H2=!1,Yt=AA,AA=null,Yt;return G2&1&&Yt.tag!==0&&Bm(),kn=Yt.pendingLanes,kn&1?Yt===CA?cx++:(cx=0,CA=Yt):cx=0,Yl(),null}function Bm(){if(kp!==null){var Yt=iR(G2),en=_i.transition,sn=Sr;try{if(_i.transition=null,Sr=16>Yt?16:Yt,kp===null)var ln=!1;else{if(Yt=kp,kp=null,G2=0,vr&6)throw Error(dt(331));var gn=vr;for(vr|=4,nr=Yt.current;nr!==null;){var kn=nr,Nn=kn.child;if(nr.flags&16){var Ln=kn.deletions;if(Ln!==null){for(var Hn=0;Hn<Ln.length;Hn++){var Jn=Ln[Hn];for(nr=Jn;nr!==null;){var ir=nr;switch(ir.tag){case 0:case 11:case 15:sx(8,ir,kn)}var dr=ir.child;if(dr!==null)dr.return=ir,nr=dr;else for(;nr!==null;){ir=nr;var Qn=ir.sibling,Vr=ir.return;if(hP(ir),ir===Jn){nr=null;break}if(Qn!==null){Qn.return=Vr,nr=Qn;break}nr=Vr}}}var Ir=kn.alternate;if(Ir!==null){var co=Ir.child;if(co!==null){Ir.child=null;do{var Mu=co.sibling;co.sibling=null,co=Mu}while(co!==null)}}nr=kn}}if(kn.subtreeFlags&2064&&Nn!==null)Nn.return=kn,nr=Nn;else e:for(;nr!==null;){if(kn=nr,kn.flags&2048)switch(kn.tag){case 0:case 11:case 15:sx(9,kn,kn.return)}var Bn=kn.sibling;if(Bn!==null){Bn.return=kn.return,nr=Bn;break e}nr=kn.return}}var jn=Yt.current;for(nr=jn;nr!==null;){Nn=nr;var Gn=Nn.child;if(Nn.subtreeFlags&2064&&Gn!==null)Gn.return=Nn,nr=Gn;else e:for(Nn=jn;nr!==null;){if(Ln=nr,Ln.flags&2048)try{switch(Ln.tag){case 0:case 11:case 15:D2(9,Ln)}}catch(ar){Hr(Ln,Ln.return,ar)}if(Ln===Nn){nr=null;break e}var er=Ln.sibling;if(er!==null){er.return=Ln.return,nr=er;break e}nr=Ln.return}}if(vr=gn,Yl(),Kl&&typeof Kl.onPostCommitFiberRoot=="function")try{Kl.onPostCommitFiberRoot(d2,Yt)}catch{}ln=!0}return ln}finally{Sr=sn,_i.transition=en}}return!1}function CP(Yt,en,sn){en=Ny(sn,en),en=WR(Yt,en,1),Yt=Sp(Yt,en,1),en=Fs(),Yt!==null&&(qv(Yt,1,en),oo(Yt,en))}function Hr(Yt,en,sn){if(Yt.tag===3)CP(Yt,Yt,sn);else for(;en!==null;){if(en.tag===3){CP(en,Yt,sn);break}else if(en.tag===1){var ln=en.stateNode;if(typeof en.type.getDerivedStateFromError=="function"||typeof ln.componentDidCatch=="function"&&(wp===null||!wp.has(ln))){Yt=Ny(sn,Yt),Yt=qR(en,Yt,1),en=Sp(en,Yt,1),Yt=Fs(),en!==null&&(qv(en,1,Yt),oo(en,Yt));break}}en=en.return}}function LN(Yt,en,sn){var ln=Yt.pingCache;ln!==null&&ln.delete(en),en=Fs(),Yt.pingedLanes|=Yt.suspendedLanes&sn,ms===Yt&&(As&sn)===sn&&(ls===4||ls===3&&(As&130023424)===As&&500>fs()-TA?Fm(Yt,0):kA|=sn),oo(Yt,en)}function RP(Yt,en){en===0&&(Yt.mode&1?(en=u2,u2<<=1,!(u2&130023424)&&(u2=4194304)):en=1);var sn=Fs();Yt=Xl(Yt,en),Yt!==null&&(qv(Yt,en,sn),oo(Yt,sn))}function jN(Yt){var en=Yt.memoizedState,sn=0;en!==null&&(sn=en.retryLane),RP(Yt,sn)}function FN(Yt,en){var sn=0;switch(Yt.tag){case 13:var ln=Yt.stateNode,gn=Yt.memoizedState;gn!==null&&(sn=gn.retryLane);break;case 19:ln=Yt.stateNode;break;default:throw Error(dt(314))}ln!==null&&ln.delete(en),RP(Yt,sn)}var PP;PP=function(Yt,en,sn){if(Yt!==null)if(Yt.memoizedProps!==en.pendingProps||Qs.current)eo=!0;else{if(!(Yt.lanes&sn)&&!(en.flags&128))return eo=!1,TN(Yt,en,sn);eo=!!(Yt.flags&131072)}else eo=!1,zr&&en.flags&1048576&&aR(en,m2,en.index);switch(en.lanes=0,en.tag){case 2:var ln=en.type;N2(Yt,en),Yt=en.pendingProps;var gn=Sy(en,Is.current);Cy(en,sn),gn=Q_(null,en,ln,Yt,gn,sn);var kn=Z_();return en.flags|=1,typeof gn=="object"&&gn!==null&&typeof gn.render=="function"&&gn.$$typeof===void 0?(en.tag=1,en.memoizedState=null,en.updateQueue=null,Zs(ln)?(kn=!0,l2(en)):kn=!1,en.memoizedState=gn.state!==null&&gn.state!==void 0?gn.state:null,G_(en),gn.updater=R2,en.stateNode=gn,gn._reactInternals=en,sA(en,ln,Yt,sn),en=cA(null,en,ln,!0,kn,sn)):(en.tag=0,zr&&kn&&D_(en),Ws(null,en,gn,sn),en=en.child),en;case 16:ln=en.elementType;e:{switch(N2(Yt,en),Yt=en.pendingProps,gn=ln._init,ln=gn(ln._payload),en.type=ln,gn=en.tag=BN(ln),Yt=Tl(ln,Yt),gn){case 0:en=lA(null,en,ln,Yt,sn);break e;case 1:en=nP(null,en,ln,Yt,sn);break e;case 11:en=JR(null,en,ln,Yt,sn);break e;case 14:en=QR(null,en,ln,Tl(ln.type,Yt),sn);break e}throw Error(dt(306,ln,""))}return en;case 0:return ln=en.type,gn=en.pendingProps,gn=en.elementType===ln?gn:Tl(ln,gn),lA(Yt,en,ln,gn,sn);case 1:return ln=en.type,gn=en.pendingProps,gn=en.elementType===ln?gn:Tl(ln,gn),nP(Yt,en,ln,gn,sn);case 3:e:{if(rP(en),Yt===null)throw Error(dt(387));ln=en.pendingProps,kn=en.memoizedState,gn=kn.element,yR(Yt,en),S2(en,ln,null,sn);var Nn=en.memoizedState;if(ln=Nn.element,Vn&&kn.isDehydrated)if(kn={element:ln,isDehydrated:!1,cache:Nn.cache,pendingSuspenseBoundaries:Nn.pendingSuspenseBoundaries,transitions:Nn.transitions},en.updateQueue.baseState=kn,en.memoizedState=kn,en.flags&256){gn=Ny(Error(dt(423)),en),en=iP(Yt,en,ln,sn,gn);break e}else if(ln!==gn){gn=Ny(Error(dt(424)),en),en=iP(Yt,en,ln,sn,gn);break e}else for(Vn&&(Ho=B4(en.stateNode.containerInfo),xo=en,zr=!0,wl=null,Kv=!1),sn=pR(en,null,ln,sn),en.child=sn;sn;)sn.flags=sn.flags&-3|4096,sn=sn.sibling;else{if(Ty(),ln===gn){en=Pu(Yt,en,sn);break e}Ws(Yt,en,ln,sn)}en=en.child}return en;case 5:return bR(en),Yt===null&&F_(en),ln=en.type,gn=en.pendingProps,kn=Yt!==null?Yt.memoizedProps:null,Nn=gn.children,Mn(ln,gn)?Nn=null:kn!==null&&Mn(ln,kn)&&(en.flags|=32),tP(Yt,en),Ws(Yt,en,Nn,sn),en.child;case 6:return Yt===null&&F_(en),null;case 13:return sP(Yt,en,sn);case 4:return W_(en,en.stateNode.containerInfo),ln=en.pendingProps,Yt===null?en.child=_y(en,null,ln,sn):Ws(Yt,en,ln,sn),en.child;case 11:return ln=en.type,gn=en.pendingProps,gn=en.elementType===ln?gn:Tl(ln,gn),JR(Yt,en,ln,gn,sn);case 7:return Ws(Yt,en,en.pendingProps,sn),en.child;case 8:return Ws(Yt,en,en.pendingProps.children,sn),en.child;case 12:return Ws(Yt,en,en.pendingProps.children,sn),en.child;case 10:e:{if(ln=en.type._context,gn=en.pendingProps,kn=en.memoizedProps,Nn=gn.value,mR(en,ln,Nn),kn!==null)if(Sl(kn.value,Nn)){if(kn.children===gn.children&&!Qs.current){en=Pu(Yt,en,sn);break e}}else for(kn=en.child,kn!==null&&(kn.return=en);kn!==null;){var Ln=kn.dependencies;if(Ln!==null){Nn=kn.child;for(var Hn=Ln.firstContext;Hn!==null;){if(Hn.context===ln){if(kn.tag===1){Hn=Ru(-1,sn&-sn),Hn.tag=2;var Jn=kn.updateQueue;if(Jn!==null){Jn=Jn.shared;var ir=Jn.pending;ir===null?Hn.next=Hn:(Hn.next=ir.next,ir.next=Hn),Jn.pending=Hn}}kn.lanes|=sn,Hn=kn.alternate,Hn!==null&&(Hn.lanes|=sn),H_(kn.return,sn,en),Ln.lanes|=sn;break}Hn=Hn.next}}else if(kn.tag===10)Nn=kn.type===en.type?null:kn.child;else if(kn.tag===18){if(Nn=kn.return,Nn===null)throw Error(dt(341));Nn.lanes|=sn,Ln=Nn.alternate,Ln!==null&&(Ln.lanes|=sn),H_(Nn,sn,en),Nn=kn.sibling}else Nn=kn.child;if(Nn!==null)Nn.return=kn;else for(Nn=kn;Nn!==null;){if(Nn===en){Nn=null;break}if(kn=Nn.sibling,kn!==null){kn.return=Nn.return,Nn=kn;break}Nn=Nn.return}kn=Nn}Ws(Yt,en,gn.children,sn),en=en.child}return en;case 9:return gn=en.type,ln=en.pendingProps.children,Cy(en,sn),gn=Uo(gn),ln=ln(gn),en.flags|=1,Ws(Yt,en,ln,sn),en.child;case 14:return ln=en.type,gn=Tl(ln,en.pendingProps),gn=Tl(ln.type,gn),QR(Yt,en,ln,gn,sn);case 15:return ZR(Yt,en,en.type,en.pendingProps,sn);case 17:return ln=en.type,gn=en.pendingProps,gn=en.elementType===ln?gn:Tl(ln,gn),N2(Yt,en),en.tag=1,Zs(ln)?(Yt=!0,l2(en)):Yt=!1,Cy(en,sn),UR(en,ln,gn),sA(en,ln,gn,sn),cA(null,en,ln,!0,Yt,sn);case 19:return aP(Yt,en,sn);case 22:return eP(Yt,en,sn)}throw Error(dt(156,en.tag))};function NP(Yt,en){return N_(Yt,en)}function $N(Yt,en,sn,ln){this.tag=Yt,this.key=sn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=en,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ln,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(Yt,en,sn,ln){return new $N(Yt,en,sn,ln)}function OA(Yt){return Yt=Yt.prototype,!(!Yt||!Yt.isReactComponent)}function BN(Yt){if(typeof Yt=="function")return OA(Yt)?1:0;if(Yt!=null){if(Yt=Yt.$$typeof,Yt===zt)return 11;if(Yt===Ht)return 14}return 2}function Ap(Yt,en){var sn=Yt.alternate;return sn===null?(sn=Ko(Yt.tag,en,Yt.key,Yt.mode),sn.elementType=Yt.elementType,sn.type=Yt.type,sn.stateNode=Yt.stateNode,sn.alternate=Yt,Yt.alternate=sn):(sn.pendingProps=en,sn.type=Yt.type,sn.flags=0,sn.subtreeFlags=0,sn.deletions=null),sn.flags=Yt.flags&14680064,sn.childLanes=Yt.childLanes,sn.lanes=Yt.lanes,sn.child=Yt.child,sn.memoizedProps=Yt.memoizedProps,sn.memoizedState=Yt.memoizedState,sn.updateQueue=Yt.updateQueue,en=Yt.dependencies,sn.dependencies=en===null?null:{lanes:en.lanes,firstContext:en.firstContext},sn.sibling=Yt.sibling,sn.index=Yt.index,sn.ref=Yt.ref,sn}function Y2(Yt,en,sn,ln,gn,kn){var Nn=2;if(ln=Yt,typeof Yt=="function")OA(Yt)&&(Nn=1);else if(typeof Yt=="string")Nn=5;else e:switch(Yt){case Tt:return Vm(sn.children,gn,kn,en);case Rt:Nn=8,gn|=8;break;case jt:return Yt=Ko(12,sn,en,gn|2),Yt.elementType=jt,Yt.lanes=kn,Yt;case Ut:return Yt=Ko(13,sn,en,gn),Yt.elementType=Ut,Yt.lanes=kn,Yt;case Bt:return Yt=Ko(19,sn,en,gn),Yt.elementType=Bt,Yt.lanes=kn,Yt;case Zt:return X2(sn,gn,kn,en);default:if(typeof Yt=="object"&&Yt!==null)switch(Yt.$$typeof){case Ft:Nn=10;break e;case $t:Nn=9;break e;case zt:Nn=11;break e;case Ht:Nn=14;break e;case Jt:Nn=16,ln=null;break e}throw Error(dt(130,Yt==null?Yt:typeof Yt,""))}return en=Ko(Nn,sn,en,gn),en.elementType=Yt,en.type=ln,en.lanes=kn,en}function Vm(Yt,en,sn,ln){return Yt=Ko(7,Yt,ln,en),Yt.lanes=sn,Yt}function X2(Yt,en,sn,ln){return Yt=Ko(22,Yt,ln,en),Yt.elementType=Zt,Yt.lanes=sn,Yt.stateNode={isHidden:!1},Yt}function IA(Yt,en,sn){return Yt=Ko(6,Yt,null,en),Yt.lanes=sn,Yt}function DA(Yt,en,sn){return en=Ko(4,Yt.children!==null?Yt.children:[],Yt.key,en),en.lanes=sn,en.stateNode={containerInfo:Yt.containerInfo,pendingChildren:null,implementation:Yt.implementation},en}function VN(Yt,en,sn,ln,gn){this.tag=en,this.containerInfo=Yt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=In,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R_(0),this.expirationTimes=R_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R_(0),this.identifierPrefix=ln,this.onRecoverableError=gn,Vn&&(this.mutableSourceEagerHydrationData=null)}function MP(Yt,en,sn,ln,gn,kn,Nn,Ln,Hn){return Yt=new VN(Yt,en,sn,Ln,Hn),en===1?(en=1,kn===!0&&(en|=8)):en=0,kn=Ko(3,null,null,en),Yt.current=kn,kn.stateNode=Yt,kn.memoizedState={element:ln,isDehydrated:sn,cache:null,transitions:null,pendingSuspenseBoundaries:null},G_(kn),Yt}function OP(Yt){if(!Yt)return bp;Yt=Yt._reactInternals;e:{if(pn(Yt)!==Yt||Yt.tag!==1)throw Error(dt(170));var en=Yt;do{switch(en.tag){case 3:en=en.stateNode.context;break e;case 1:if(Zs(en.type)){en=en.stateNode.__reactInternalMemoizedMergedChildContext;break e}}en=en.return}while(en!==null);throw Error(dt(171))}if(Yt.tag===1){var sn=Yt.type;if(Zs(sn))return tR(Yt,sn,en)}return en}function IP(Yt){var en=Yt._reactInternals;if(en===void 0)throw typeof Yt.render=="function"?Error(dt(188)):(Yt=Object.keys(Yt).join(","),Error(dt(268,Yt)));return Yt=un(en),Yt===null?null:Yt.stateNode}function DP(Yt,en){if(Yt=Yt.memoizedState,Yt!==null&&Yt.dehydrated!==null){var sn=Yt.retryLane;Yt.retryLane=sn!==0&&sn<en?sn:en}}function J2(Yt,en){DP(Yt,en),(Yt=Yt.alternate)&&DP(Yt,en)}function zN(Yt){return Yt=un(Yt),Yt===null?null:Yt.stateNode}function HN(){return null}return et.attemptContinuousHydration=function(Yt){if(Yt.tag===13){var en=Xl(Yt,134217728);if(en!==null){var sn=Fs();qo(en,Yt,134217728,sn)}J2(Yt,134217728)}},et.attemptDiscreteHydration=function(Yt){if(Yt.tag===13){var en=Xl(Yt,1);if(en!==null){var sn=Fs();qo(en,Yt,1,sn)}J2(Yt,1)}},et.attemptHydrationAtCurrentPriority=function(Yt){if(Yt.tag===13){var en=Tp(Yt),sn=Xl(Yt,en);if(sn!==null){var ln=Fs();qo(sn,Yt,en,ln)}J2(Yt,en)}},et.attemptSynchronousHydration=function(Yt){switch(Yt.tag){case 3:var en=Yt.stateNode;if(en.current.memoizedState.isDehydrated){var sn=Wv(en.pendingLanes);sn!==0&&(P_(en,sn|1),oo(en,fs()),!(vr&6)&&(Iy(),Yl()))}break;case 13:wP(function(){var ln=Xl(Yt,1);if(ln!==null){var gn=Fs();qo(ln,Yt,1,gn)}}),J2(Yt,1)}},et.batchedUpdates=function(Yt,en){var sn=vr;vr|=1;try{return Yt(en)}finally{vr=sn,vr===0&&(Iy(),f2&&Yl())}},et.createComponentSelector=function(Yt){return{$$typeof:L2,value:Yt}},et.createContainer=function(Yt,en,sn,ln,gn,kn,Nn){return MP(Yt,en,!1,null,sn,ln,gn,kn,Nn)},et.createHasPseudoClassSelector=function(Yt){return{$$typeof:j2,value:Yt}},et.createHydrationContainer=function(Yt,en,sn,ln,gn,kn,Nn,Ln,Hn){return Yt=MP(sn,ln,!0,Yt,gn,kn,Nn,Ln,Hn),Yt.context=OP(null),sn=Yt.current,ln=Fs(),gn=Tp(sn),kn=Ru(ln,gn),kn.callback=en??null,Sp(sn,kn,gn),Yt.current.lanes=gn,qv(Yt,gn,ln),oo(Yt,ln),Yt},et.createPortal=function(Yt,en,sn){var ln=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kt,key:ln==null?null:""+ln,children:Yt,containerInfo:en,implementation:sn}},et.createRoleSelector=function(Yt){return{$$typeof:F2,value:Yt}},et.createTestNameSelector=function(Yt){return{$$typeof:$2,value:Yt}},et.createTextSelector=function(Yt){return{$$typeof:B2,value:Yt}},et.deferredUpdates=function(Yt){var en=Sr,sn=_i.transition;try{return _i.transition=null,Sr=16,Yt()}finally{Sr=en,_i.transition=sn}},et.discreteUpdates=function(Yt,en,sn,ln,gn){var kn=Sr,Nn=_i.transition;try{return _i.transition=null,Sr=1,Yt(en,sn,ln,gn)}finally{Sr=kn,_i.transition=Nn,vr===0&&Iy()}},et.findAllNodes=SA,et.findBoundingRects=function(Yt,en){if(!Kn)throw Error(dt(363));en=SA(Yt,en),Yt=[];for(var sn=0;sn<en.length;sn++)Yt.push(Wn(en[sn]));for(en=Yt.length-1;0<en;en--){sn=Yt[en];for(var ln=sn.x,gn=ln+sn.width,kn=sn.y,Nn=kn+sn.height,Ln=en-1;0<=Ln;Ln--)if(en!==Ln){var Hn=Yt[Ln],Jn=Hn.x,ir=Jn+Hn.width,dr=Hn.y,Qn=dr+Hn.height;if(ln>=Jn&&kn>=dr&&gn<=ir&&Nn<=Qn){Yt.splice(en,1);break}else if(ln!==Jn||sn.width!==Hn.width||Qn<kn||dr>Nn){if(!(kn!==dr||sn.height!==Hn.height||ir<ln||Jn>gn)){Jn>ln&&(Hn.width+=Jn-ln,Hn.x=ln),ir<gn&&(Hn.width=gn-Jn),Yt.splice(en,1);break}}else{dr>kn&&(Hn.height+=dr-kn,Hn.y=kn),Qn<Nn&&(Hn.height=Nn-dr),Yt.splice(en,1);break}}}return Yt},et.findHostInstance=IP,et.findHostInstanceWithNoPortals=function(Yt){return Yt=hn(Yt),Yt=Yt!==null?wn(Yt):null,Yt===null?null:Yt.stateNode},et.findHostInstanceWithWarning=function(Yt){return IP(Yt)},et.flushControlled=function(Yt){var en=vr;vr|=1;var sn=_i.transition,ln=Sr;try{_i.transition=null,Sr=1,Yt()}finally{Sr=ln,_i.transition=sn,vr=en,vr===0&&(Iy(),Yl())}},et.flushPassiveEffects=Bm,et.flushSync=wP,et.focusWithin=function(Yt,en){if(!Kn)throw Error(dt(363));for(Yt=xA(Yt),en=bP(Yt,en),en=Array.from(en),Yt=0;Yt<en.length;){var sn=en[Yt++];if(!or(sn)){if(sn.tag===5&&Cr(sn.stateNode))return!0;for(sn=sn.child;sn!==null;)en.push(sn),sn=sn.sibling}}return!1},et.getCurrentUpdatePriority=function(){return Sr},et.getFindAllNodesFailureDescription=function(Yt,en){if(!Kn)throw Error(dt(363));var sn=0,ln=[];Yt=[xA(Yt),0];for(var gn=0;gn<Yt.length;){var kn=Yt[gn++],Nn=Yt[gn++],Ln=en[Nn];if((kn.tag!==5||!or(kn))&&(bA(kn,Ln)&&(ln.push(EA(Ln)),Nn++,Nn>sn&&(sn=Nn)),Nn<en.length))for(kn=kn.child;kn!==null;)Yt.push(kn,Nn),kn=kn.sibling}if(sn<en.length){for(Yt=[];sn<en.length;sn++)Yt.push(EA(en[sn]));return`findAllNodes was able to match part of the selector:
  `+(ln.join(" > ")+`

No matching component was found for:
  `)+Yt.join(" > ")}return null},et.getPublicRootInstance=function(Yt){if(Yt=Yt.current,!Yt.child)return null;switch(Yt.child.tag){case 5:return fn(Yt.child.stateNode);default:return Yt.child.stateNode}},et.injectIntoDevTools=function(Yt){if(Yt={bundleType:Yt.bundleType,version:Yt.version,rendererPackageName:Yt.rendererPackageName,rendererConfig:Yt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:zN,findFiberByHostInstance:Yt.findFiberByHostInstance||HN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Yt=!1;else{var en=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(en.isDisabled||!en.supportsFiber)Yt=!0;else{try{d2=en.inject(Yt),Kl=en}catch{}Yt=!!en.checkDCE}}return Yt},et.isAlreadyRendering=function(){return!1},et.observeVisibleRects=function(Yt,en,sn,ln){if(!Kn)throw Error(dt(363));Yt=SA(Yt,en);var gn=Rr(Yt,sn,ln).disconnect;return{disconnect:function(){gn()}}},et.registerMutableSourceForHydration=function(Yt,en){var sn=en._getVersion;sn=sn(en._source),Yt.mutableSourceEagerHydrationData==null?Yt.mutableSourceEagerHydrationData=[en,sn]:Yt.mutableSourceEagerHydrationData.push(en,sn)},et.runWithPriority=function(Yt,en){var sn=Sr;try{return Sr=Yt,en()}finally{Sr=sn}},et.shouldError=function(){return null},et.shouldSuspend=function(){return!1},et.updateContainer=function(Yt,en,sn,ln){var gn=en.current,kn=Fs(),Nn=Tp(gn);return sn=OP(sn),en.context===null?en.context=sn:en.pendingContext=sn,en=Ru(kn,Nn),en.payload={element:Yt},ln=ln===void 0?null:ln,ln!==null&&(en.callback=ln),Yt=Sp(gn,en,Nn),Yt!==null&&(qo(Yt,gn,Nn,kn),E2(Yt,gn,Nn)),Nn},et};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(it,g,et=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in g&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&g.draggable){var ot=g.x!==void 0||g.y!==void 0,ct=g.onDragEnd||g.onDragMove;ot&&!ct&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var ut in et)if(!propsToSkip[ut]){var dt=ut.slice(0,2)==="on",ft=et[ut]!==g[ut];if(dt&&ft){var St=ut.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),it.off(St,et[ut])}var kt=!g.hasOwnProperty(ut);kt&&it.setAttr(ut,void 0)}var Tt=g._useStrictMode,Rt={},jt=!1;const Ft={};for(var ut in g)if(!propsToSkip[ut]){var dt=ut.slice(0,2)==="on",$t=et[ut]!==g[ut];if(dt&&$t){var St=ut.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),g[ut]&&(Ft[St]=g[ut])}!dt&&(g[ut]!==et[ut]||Tt&&g[ut]!==it.getAttr(ut))&&(jt=!0,Rt[ut]=g[ut])}jt&&(it.setAttrs(Rt),updatePicture(it));for(var St in Ft)it.on(St+EVENTS_NAMESPACE,Ft[St])}function updatePicture(it){if(!Konva$1.autoDrawEnabled){var g=it.getLayer()||it.getStage();g&&g.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;function appendInitialChild(it,g){if(typeof g=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${g}`);return}it.add(g),updatePicture(it)}function createInstance(it,g,et){let ot=Konva[it];ot||(console.error(`Konva has no node with the type ${it}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${it}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),ot=Konva.Group);const ct={},ut={};for(var dt in g){var ft=dt.slice(0,2)==="on";ft?ut[dt]=g[dt]:ct[dt]=g[dt]}const St=new ot(ct);return applyNodeProps(St,ut),St}function createTextInstance(it,g,et){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${it}"`)}function finalizeInitialChildren(it,g,et){return!1}function getPublicInstance(it){return it}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(it,g,et,ot){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(it){}function shouldDeprioritizeSubtree(it,g){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,noTimeout=-1;function shouldSetTextContent(it,g){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!0,supportsMutation=!0;function appendChild(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function appendChildToContainer(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function insertBefore(it,g,et){g._remove(),it.add(g),g.setZIndex(et.getZIndex()),updatePicture(it)}function insertInContainerBefore(it,g,et){insertBefore(it,g,et)}function removeChild(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function removeChildFromContainer(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function commitTextUpdate(it,g,et){console.error(`Text components are not yet supported in ReactKonva. You text is: "${et}"`)}function commitMount(it,g,et){}function commitUpdate(it,g,et,ot,ct){applyNodeProps(it,ct,ot)}function hideInstance(it){it.hide(),updatePicture(it)}function hideTextInstance(it){}function unhideInstance(it,g){(g.visible==null||g.visible)&&it.show()}function unhideTextInstance(it,g){}function clearContainer(it){}function detachDeletedInstance(){}const getCurrentEventPriority=()=>constantsExports.DefaultEventPriority,HostConfig=Object.freeze(Object.defineProperty({__proto__:null,appendChild,appendChildToContainer,appendInitialChild,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,noTimeout,now:schedulerExports.unstable_now,prepareForCommit,preparePortalMount,prepareUpdate,removeChild,removeChildFromContainer,resetAfterCommit,resetTextContent,run:schedulerExports.unstable_runWithPriority,scheduleTimeout,shouldDeprioritizeSubtree,shouldSetTextContent,supportsMutation,unhideInstance,unhideTextInstance,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(it,g,et)=>g in it?__defProp(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,__spreadValues=(it,g)=>{for(var et in g||(g={}))__hasOwnProp.call(g,et)&&__defNormalProp(it,et,g[et]);if(__getOwnPropSymbols)for(var et of __getOwnPropSymbols(g))__propIsEnum.call(g,et)&&__defNormalProp(it,et,g[et]);return it},__spreadProps=(it,g)=>__defProps(it,__getOwnPropDescs(g)),_a,_b;typeof window<"u"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(it,g,et){if(!it)return;if(et(it)===!0)return it;let ot=g?it.return:it.child;for(;ot;){const ct=traverseFiber(ot,g,et);if(ct)return ct;ot=g?null:ot.sibling}}function wrapContext(it){try{return Object.defineProperties(it,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return it}}const error=console.error;console.error=function(){const it=[...arguments].join("");if(it!=null&&it.startsWith("Warning:")&&it.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const it=reactExports.useContext(FiberContext);if(it===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const g=reactExports.useId();return reactExports.useMemo(()=>{for(const ot of[it,it==null?void 0:it.alternate]){if(!ot)continue;const ct=traverseFiber(ot,!1,ut=>{let dt=ut.memoizedState;for(;dt;){if(dt.memoizedState===g)return!0;dt=dt.next}});if(ct)return ct}},[it,g])}function useContextMap(){const it=useFiber(),[g]=reactExports.useState(()=>new Map);g.clear();let et=it;for(;et;){if(et.type&&typeof et.type=="object"){const ct=et.type._context===void 0&&et.type.Provider===et.type?et.type:et.type._context;ct&&ct!==FiberContext&&!g.has(ct)&&g.set(ct,reactExports.useContext(wrapContext(ct)))}et=et.return}return g}function useContextBridge(){const it=useContextMap();return reactExports.useMemo(()=>Array.from(it.keys()).reduce((g,et)=>ot=>reactExports.createElement(g,null,reactExports.createElement(et.Provider,__spreadProps(__spreadValues({},ot),{value:it.get(et)}))),g=>reactExports.createElement(FiberProvider,__spreadValues({},g))),[it])}function usePrevious(it){const g=React$2.useRef({});return React$2.useLayoutEffect(()=>{g.current=it}),React$2.useLayoutEffect(()=>()=>{g.current={}},[]),g.current}const StageWrap=it=>{const g=React$2.useRef(null),et=React$2.useRef(null),ot=React$2.useRef(null),ct=usePrevious(it),ut=useContextBridge(),dt=ft=>{const{forwardedRef:St}=it;St&&(typeof St=="function"?St(ft):St.current=ft)};return React$2.useLayoutEffect(()=>(et.current=new Konva.Stage({width:it.width,height:it.height,container:g.current}),dt(et.current),ot.current=KonvaRenderer.createContainer(et.current,constantsExports.LegacyRoot,!1,null),KonvaRenderer.updateContainer(React$2.createElement(ut,{},it.children),ot.current),()=>{Konva.isBrowser&&(dt(null),KonvaRenderer.updateContainer(null,ot.current,null),et.current.destroy())}),[]),React$2.useLayoutEffect(()=>{dt(et.current),applyNodeProps(et.current,it,ct),KonvaRenderer.updateContainer(React$2.createElement(ut,{},it.children),ot.current,null)}),React$2.createElement("div",{ref:g,id:it.id,accessKey:it.accessKey,className:it.className,role:it.role,style:it.style,tabIndex:it.tabIndex,title:it.title})},Layer="Layer",Rect="Rect",Ellipse="Ellipse",Text$1="Text",Arrow="Arrow",Transformer="Transformer",KonvaRenderer=ReactFiberReconciler(HostConfig);KonvaRenderer.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:React$2.version,rendererPackageName:"react-konva"});const Stage=React$2.forwardRef((it,g)=>React$2.createElement(FiberProvider,{},React$2.createElement(StageWrap,{...it,forwardedRef:g})));function PDFOverlayCanvas({shapes:it,setShapes:g,editable:et,iframeWindow:ot,iframeDocument:ct,onSelectShape:ut}){const dt=reactExports.useRef(null),ft=reactExports.useRef(null),[St,kt]=reactExports.useState({width:0,height:0}),[Tt,Rt]=reactExports.useState(null),[jt,Ft]=reactExports.useState(!1);reactExports.useEffect(()=>{const Ut=()=>{g([])};return window.addEventListener("clearCanvasShapes",Ut),()=>window.removeEventListener("clearCanvasShapes",Ut)},[g]),reactExports.useEffect(()=>{function Ut(){const Ht=ct,Jt=(Ht==null?void 0:Ht.scrollingElement)||(Ht==null?void 0:Ht.documentElement)||(Ht==null?void 0:Ht.body)||null,Zt=Jt?Jt.scrollHeight:window.innerHeight,tn=document.getElementById("cre8tly-parent-overlay"),nn=tn?tn.getBoundingClientRect().width:window.innerWidth;kt({width:nn,height:Zt})}Ut(),window.addEventListener("resize",Ut);let Bt;return ct!=null&&ct.body&&(Bt=new MutationObserver(Ut),Bt.observe(ct.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0})),()=>{window.removeEventListener("resize",Ut),Bt==null||Bt.disconnect()}},[ct]),reactExports.useEffect(()=>{const Ut=ot||window,Bt=Ht=>{console.log(" Received addShape event inside overlay:",Ht.detail),$t(Ht.detail)};return Ut.addEventListener("addShape",Bt),()=>Ut.removeEventListener("addShape",Bt)},[ot,it]),reactExports.useEffect(()=>{const Ut=Bt=>{var nn;const{id:Ht}=Bt.detail,Jt=(nn=ft.current)==null?void 0:nn.getStage();if(!Jt)return;const Zt=Jt.findOne(`#${Ht}`);if(!Zt)return;const tn={target:Zt};Zt.fire("dblclick",tn)};return window.addEventListener("autoEditText",Ut),()=>window.removeEventListener("autoEditText",Ut)},[]),reactExports.useEffect(()=>{const Ut=localStorage.getItem("cre8tly_canvas_shapes");if(Ut)try{const Bt=JSON.parse(Ut);console.log(" Restored saved shapes from localStorage:",Bt.length),Bt.length>0&&g(Bt)}catch(Bt){console.error(" Failed to parse saved shapes:",Bt)}},[g]),reactExports.useEffect(()=>{it.length>0?localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it)):localStorage.removeItem("cre8tly_canvas_shapes")},[it]);const $t=Ut=>{const Bt={id:`shape-${Date.now()}`,x:100+it.length*30,y:100+it.length*30,draggable:!0,fill:"#66b5ff",stroke:"transparent",strokeWidth:0,opacity:.8,type:Ut};let Ht;switch(Ut){case"circle":Ht={...Bt,radius:50};break;case"arrow":Ht={...Bt,points:[0,0,150,0],pointerLength:15,pointerWidth:15,strokeWidth:3,stroke:"#00b4ff",fill:"#00b4ff",hitStrokeWidth:20};break;case"text":Ht={...Bt,text:"Click to edit",fontSize:18,isEditing:!0};break;default:Ht={...Bt,width:160,height:100,cornerRadius:0}}g(Jt=>{const Zt=[...Jt,Ht];return console.log(" Shapes after add:",Zt),Zt}),Rt(Ht.id),Ft(!0),Ut==="text"&&setTimeout(()=>{const Jt=new CustomEvent("autoEditText",{detail:{id:Ht.id}});window.dispatchEvent(Jt)},100)},zt=Ut=>{g(Bt=>{const Ht=Bt.map(Jt=>Jt.id===Tt?{...Jt,...Ut}:Jt);return localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(Ht)),Ht})};return reactExports.useEffect(()=>{var Jt,Zt;const Ut=ft.current;if(!Ut)return;const Bt=Ut.getStage(),Ht=Tt?Bt.findOne(`#${Tt}`):null;Ht?(Ut.nodes([Ht]),(Jt=Ut.getLayer())==null||Jt.batchDraw()):(Ut.nodes([]),(Zt=Ut.getLayer())==null||Zt.batchDraw())},[Tt,it]),reactExports.useEffect(()=>{localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it))},[it]),reactExports.useEffect(()=>{var Ht,Jt;const Ut=(Jt=(Ht=ft.current)==null?void 0:Ht.getLayer)==null?void 0:Jt.call(Ht);if(!Ut)return;const Bt=()=>{try{Ut.batchDraw()}catch{}requestAnimationFrame(Bt)};return requestAnimationFrame(Bt),()=>cancelAnimationFrame(Bt)},[]),reactExports.useEffect(()=>{const Ut=()=>{if(!ct)return;const Ht=ct.querySelector("canvas.konvajs-content");Ht?(Ht.style.pointerEvents="auto",Ht.style.userSelect="none",Ht.style.touchAction="none",Ht.style.position="absolute",Ht.style.top="0",Ht.style.left="0",Ht.style.zIndex="2147483647",console.log(" Konva pointer events fixed")):console.warn(" No Konva canvas found yet")};Ut();const Bt=setInterval(Ut,500);return setTimeout(()=>clearInterval(Bt),5e3),()=>clearInterval(Bt)},[ct]),reactExports.useEffect(()=>{console.group(" Konva Diagnostics"),console.log("iframeWindow:",!!ot),console.log("iframeDocument:",!!ct),console.log("ContainerRef:",dt.current),console.log("Stage size:",St),console.log("Shapes:",it.length);const Ut=ct==null?void 0:ct.querySelector("canvas.konvajs-content");console.log("Konva canvas found:",!!Ut),Ut&&(console.log("pointer-events:",Ut.style.pointerEvents),console.log("zIndex:",Ut.style.zIndex),console.log("Bounding rect:",Ut.getBoundingClientRect())),console.groupEnd()},[ct,it]),jsxRuntimeExports.jsx("div",{ref:dt,className:"absolute",style:{left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",transform:"none",background:"transparent",zIndex:2147483647,userSelect:"none"},children:St.width>0&&jsxRuntimeExports.jsx(Stage,{width:St.width,height:St.height,className:"absolute",style:{left:0,top:0,background:"transparent",pointerEvents:"auto",touchAction:"none",cursor:et?"grab":"default",transform:"none"},onMouseDown:et?Ut=>{Ut.target===Ut.target.getStage()?(Rt(null),Ft(!1)):Rt(Ut.target.id())}:void 0,onDragStart:()=>{et&&(document.body.style.cursor="grabbing")},onDragEnd:()=>{et&&(document.body.style.cursor="grab")},children:jsxRuntimeExports.jsxs(Layer,{listening:!0,children:[it.map(Ut=>{const Bt=Tt===Ut.id,Ht=Ut.stroke||"#000000";switch(Ut.type){case"circle":return jsxRuntimeExports.jsx(Ellipse,{id:Ut.id.toString(),...Ut,radiusX:Ut.radiusX??Ut.radius,radiusY:Ut.radiusY??Ut.radius,stroke:Ht,shadowEnabled:Bt,shadowColor:"#00b4ff",shadowBlur:Bt?10:0,shadowOpacity:Bt?.8:0,dragDistance:0,draggable:et&&!Ut.isEditing,onClick:et?()=>{Rt(Ut.id),ut&&ut(Ut)}:void 0,onDragEnd:Jt=>{const{x:Zt,y:tn}=Jt.target.position();zt({x:Zt,y:tn})},onTransformEnd:Jt=>{const Zt=Jt.target,tn=Zt.scaleX(),nn=Zt.scaleY();zt({x:Zt.x(),y:Zt.y(),radiusX:(Ut.radiusX??Ut.radius)*tn,radiusY:(Ut.radiusY??Ut.radius)*nn,rotation:Zt.rotation()}),Zt.scaleX(1),Zt.scaleY(1)}},Ut.id);case"arrow":return jsxRuntimeExports.jsx(Arrow,{id:Ut.id.toString(),...Ut,stroke:Ht,fill:Ht,shadowEnabled:Bt,shadowColor:"#00b4ff",shadowBlur:Bt?10:0,shadowOpacity:Bt?.8:0,dragDistance:0,draggable:et&&!Ut.isEditing,onClick:et?()=>{Rt(Ut.id),ut&&ut(Ut)}:void 0,onDragEnd:Jt=>{const{x:Zt,y:tn}=Jt.target.position();zt({x:Zt,y:tn})},onTransformEnd:Jt=>{const Zt=Jt.target;zt({x:Zt.x(),y:Zt.y(),scaleX:Zt.scaleX(),scaleY:Zt.scaleY()}),Zt.scaleX(1),Zt.scaleY(1)}},Ut.id);case"text":return jsxRuntimeExports.jsx(Text$1,{id:Ut.id.toString(),...Ut,stroke:Ht,fill:Ut.fill,shadowEnabled:Bt,shadowColor:"#00b4ff",shadowBlur:Bt?10:0,shadowOpacity:Bt?.8:0,listening:!0,dragDistance:0,draggable:et&&!Ut.isEditing,onClick:et?()=>{Rt(Ut.id),ut&&ut(Ut)}:void 0,onDblClick:Jt=>{const Zt=Jt.target,tn=Zt.getStage(),nn=Zt.getLayer(),rn=tn.container().getBoundingClientRect(),on=Zt.absolutePosition(),pn=Zt.getAbsoluteScale().x,dn=Zt.getAbsoluteScale().y;Zt.visible(!1),nn.batchDraw();const hn=ct||document,un=hn.createElement("textarea");hn.body.appendChild(un),un.value=Zt.text(),un.value.trim()==="Click to edit"&&(un.value=""),un.style.position="absolute",un.style.top=`${rn.top+on.y}px`,un.style.left=`${rn.left+on.x}px`,un.style.width=`${Zt.width()*pn}px`,un.style.height=`${Zt.height()*dn}px`,un.style.fontSize=`${Zt.fontSize()*dn}px`,un.style.lineHeight=Zt.lineHeight(),un.style.fontFamily=Zt.fontFamily(),un.style.fontStyle=Zt.fontStyle(),un.style.fontWeight=Zt.fontStyle().includes("bold")?"bold":"normal",un.style.textAlign=Zt.align(),un.style.color=Zt.fill(),un.style.border="none",un.style.margin="0",un.style.padding="0",un.style.background="transparent",un.style.outline="none",un.style.overflow="hidden",un.style.resize="none",un.style.whiteSpace="pre-wrap",un.style.transformOrigin="left top",un.style.zIndex=9999,un.style.caretColor=Zt.fill();const En=Zt.rotation();un.style.transform=`rotate(${En}deg)`,un.focus();const wn=()=>{un.style.height="auto",un.style.height=`${un.scrollHeight}px`};wn(),un.addEventListener("input",wn),un.addEventListener("input",()=>{const fn=un.value;g(xn=>{const an=xn.findIndex(bn=>bn.id===Zt.id());if(+requestAnimationFrame(()=>{var bn,mn;try{(mn=(bn=ft.current)==null?void 0:bn.getLayer())==null||mn.batchDraw()}catch{}}),an===-1)return xn;const cn=[...xn];return cn[an]={...cn[an],text:fn},localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(cn)),cn})});const Sn=()=>{const fn=un.value.trim()||"Click to edit";g(xn=>{const an=xn.map(cn=>cn.id===Zt.id()?{...cn,text:fn}:cn);return localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(an)),an}),hn.body.removeChild(un),Zt.visible(!0),nn.batchDraw()};un.addEventListener("blur",Sn),un.addEventListener("keydown",fn=>{fn.key==="Enter"&&!fn.shiftKey?(fn.preventDefault(),Sn()):fn.key==="Escape"&&(hn.body.removeChild(un),Zt.visible(!0),nn.batchDraw())})},onTransformEnd:Jt=>{const Zt=Jt.target;zt({x:Zt.x(),y:Zt.y(),rotation:Zt.rotation(),scaleX:Zt.scaleX(),scaleY:Zt.scaleY()}),Zt.scaleX(1),Zt.scaleY(1)}},Ut.id);default:return jsxRuntimeExports.jsx(Rect,{id:Ut.id.toString(),...Ut,cornerRadius:Ut.cornerRadius||0,stroke:Ht,shadowEnabled:Bt,shadowColor:"#00b4ff",shadowBlur:Bt?10:0,shadowOpacity:Bt?.8:0,dragDistance:0,draggable:et&&!Ut.isEditing,onClick:et?()=>{Rt(Ut.id),ut&&ut(Ut)}:void 0,onDragStart:()=>console.log(" Drag start"),onDragMove:()=>console.log(" Drag move"),onDragEnd:Jt=>{const{x:Zt,y:tn}=Jt.target.position();zt({x:Zt,y:tn})},onTransformEnd:Jt=>{const Zt=Jt.target,tn=Zt.scaleX(),nn=Zt.scaleY(),rn=Math.max(20,Zt.width()*tn),on=Math.max(20,Zt.height()*nn);zt({x:Zt.x(),y:Zt.y(),width:rn,height:on,rotation:Zt.rotation(),cornerRadius:Ut.cornerRadius?Math.min(rn,on)*.1:0}),Zt.scaleX(1),Zt.scaleY(1)}},Ut.id)}}),jsxRuntimeExports.jsx(Transformer,{ref:ft,rotateEnabled:!0,resizeEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],anchorCornerRadius:50,anchorSize:5,anchorStroke:"#00b4ff",anchorStrokeWidth:.5,anchorFill:"#ffffff",anchorStrokeEnabled:!0,anchorFillEnabled:!0,borderStroke:"#00b4ff",borderStrokeWidth:1.5,borderDash:[3,3],ignoreStroke:!1,boundBoxFunc:(Ut,Bt)=>Bt.width<20||Bt.height<20?Ut:Bt})]})})})}function ShapePropertiesPanel({open:it,selectedShape:g,onUpdate:et,onDelete:ot,style:ct={}}){return g?jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{drag:!0,dragMomentum:!1,dragElastic:.1,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:ct,className:`fixed bottom-6 right-6 z-[9999999] 
                     bg-[#111]/90 backdrop-blur-md border border-gray-700/60 
                     rounded-xl p-4 flex flex-col gap-3 shadow-xl w-64`,children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-sm",children:"Shape Properties"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:g.fill||"#000000",onChange:ut=>et({fill:ut.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer",title:"Fill Color"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:g.fill||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Stroke"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:g.stroke||"#000000",onChange:ut=>et({stroke:ut.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer",title:"Stroke Color"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:g.stroke||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/50 my-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.01",value:g.strokeWidth||2,onChange:ut=>et({strokeWidth:parseFloat(ut.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(g.strokeWidth||0).toFixed(1)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:g.opacity??1,onChange:ut=>et({opacity:parseFloat(ut.target.value)}),className:"cre8tly-slider w-24"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(g.opacity??1).toFixed(2)})]})]}),"cornerRadius"in g&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Rounded Corners"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!g.cornerRadius,onChange:ut=>et({cornerRadius:ut.target.checked?Math.min(g.width||0,g.height||0)*.1:0}),className:"accent-blue w-4 h-4 cursor-pointer"})]}),jsxRuntimeExports.jsx("button",{onClick:ot,className:"self-end mt-2 p-1 bg-transparent text-white rounded-md flex items-center justify-center transition-all duration-150 hover:opacity-80",title:"Delete shape",children:jsxRuntimeExports.jsx(Trash2,{className:"text-red-600",size:16})})]})}):null}function isDarkColor(it){if(!it)return!1;const g=it.replace("#",""),et=parseInt(g.length===3?g[0]+g[0]:g.substring(0,2),16),ot=parseInt(g.length===3?g[1]+g[1]:g.substring(2,4),16),ct=parseInt(g.length===3?g[2]+g[2]:g.substring(4,6),16);return(.299*et+.587*ot+.114*ct)/255<.5}function embedShapesIntoHTML(it,g){if(!g||!g.length)return it;const ot=`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;"
  id="cre8tly-overlay-svg">
  <defs>
    <marker id="cre8tly-arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="currentColor" />
    </marker>
  </defs>
  ${g.map(ct=>{var ut;switch(ct.type){case"rect":const dt=ct.cornerRadius?`rx="${ct.cornerRadius}" ry="${ct.cornerRadius}"`:"";return`<rect x="${ct.x}" y="${ct.y}" width="${ct.width}" height="${ct.height}" 
          fill="${ct.fill||"transparent"}" stroke="${ct.stroke||"transparent"}"
          stroke-width="${ct.strokeWidth||1}" opacity="${ct.opacity||1}" ${dt} />`;case"circle":return`<ellipse cx="${ct.x}" cy="${ct.y}" rx="${ct.radiusX||ct.radius}" ry="${ct.radiusY||ct.radius}"
          fill="${ct.fill||"transparent"}" stroke="${ct.stroke||"transparent"}"
          stroke-width="${ct.strokeWidth||1}" opacity="${ct.opacity||1}" />`;case"arrow":const[ft,St]=((ut=ct.points)==null?void 0:ut.slice(-2))||[100,0];return`<line x1="${ct.x}" y1="${ct.y}" x2="${ct.x+ft}" y2="${ct.y+St}"
          stroke="${ct.stroke||"#000"}" stroke-width="${ct.strokeWidth||2}"
          marker-end="url(#cre8tly-arrowhead)" opacity="${ct.opacity||1}" />`;case"text":return`<text x="${ct.x}" y="${ct.y}" font-size="${ct.fontSize||18}"
          font-family="${ct.fontFamily||"Arial"}" fill="${ct.fill||"#000"}"
          opacity="${ct.opacity||1}">${ct.text||""}</text>`;default:return""}}).join(`
`)}
</svg>`;return it.includes("</body>")?it.replace("</body>",`${ot}</body>`):it+ot}function EditorModal({leadMagnetId:it,open:g,onClose:et,onCommitted:ot}){var An,Pn,Mn,Rn;const[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(null),[Tt,Rt]=reactExports.useState(""),[jt,Ft]=reactExports.useState(""),[$t,zt]=reactExports.useState("#fff330"),[Ut,Bt]=reactExports.useState(!1),[Ht,Jt]=reactExports.useState([]),Zt="text-white",tn=16,nn=reactExports.useRef(null),rn=reactExports.useRef(null),[on,pn]=reactExports.useState(null),[dn,hn]=reactExports.useState(!1),un=()=>{var Fn;const Cn=rn.current,On=(Cn==null?void 0:Cn.contentDocument)||((Fn=Cn==null?void 0:Cn.contentWindow)==null?void 0:Fn.document);if(!Cn||!On)return;const In=On.getElementById("cre8tly-overlay-container"),Dn=On.getElementById("cre8tly-overlay-stage");!In||!Dn||__vitePreload(()=>Promise.resolve().then(()=>client),void 0).then(({createRoot:Xn})=>{nn.current||(nn.current=Xn(Dn)),nn.current.render(jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:Ht,setShapes:Jt,editable:Ut,iframeWindow:Cn.contentWindow,iframeDocument:On,onSelectShape:zn=>{Ut&&(pn(zn),hn(!0))}}));const Vn=On.querySelector("canvas.konvajs-content");Vn&&(Vn.style.pointerEvents="auto",Vn.style.userSelect="none",Vn.style.touchAction="none",Vn.style.position="absolute",Vn.style.top="0",Vn.style.left="0",Vn.style.zIndex="2147483647")})};reactExports.useEffect(()=>{var Dn;const Cn=rn.current,On=(Cn==null?void 0:Cn.contentDocument)||((Dn=Cn==null?void 0:Cn.contentWindow)==null?void 0:Dn.document);if(!On)return;On.querySelectorAll(".page, .page-inner, .cover-page, .footer-link").forEach(Fn=>Fn.style.pointerEvents=Ut?"none":"auto")},[Ut,jt]);const En=(An=rn.current)==null?void 0:An.contentDocument;if(En){const Cn=En.getElementById("cre8tly-overlay-container"),On=En.getElementById("cre8tly-overlay-stage");Cn&&(Cn.style.position="absolute",Cn.style.top="0",Cn.style.left="0",Cn.style.width="100%",Cn.style.height="100%",Cn.style.zIndex="2147483647",Cn.style.pointerEvents="auto",Cn.style.background="transparent"),On&&(On.style.pointerEvents="auto")}const wn=Cn=>{const On=Cn.target.value;if(zt(On),!Sn)return;Sn.chain().focus().updateAttributes("highlight",{color:On}).run(),Sn.chain().focus().setHighlight({color:On}).run()},Sn=useEditor({extensions:[index_default$7,index_default,index_default$3.configure({multicolor:!0})],content:"",editable:!0});reactExports.useEffect(()=>{!g||!it||(async()=>{const Cn=await startLeadMagnetEdit(it);ut(Cn.token),kt(Cn.meta),Rt(Cn.editableHtml||""),Sn==null||Sn.commands.setContent(Cn.editableHtml||"")})().catch(et)},[g,it,Sn]);async function fn(){var Cn,On,In;ft(!0);try{const Dn=((Cn=rn.current)==null?void 0:Cn.contentDocument)||((In=(On=rn.current)==null?void 0:On.contentWindow)==null?void 0:In.document);if(!Dn)throw new Error("Iframe not ready");const Fn=Dn.querySelector(".page-inner")||Dn.querySelector(".page")||Dn.body;Fn.style.marginTop="0",Fn.style.marginBottom="0",Fn.style.paddingTop="0",Fn.style.paddingBottom="0";let Vn=`
      <html>
        <head>
          <meta charset="UTF-8" />
          ${Array.from(Dn.querySelectorAll("style, link[rel='stylesheet']")).map(lr=>lr.outerHTML).join(`
`)}
        </head>
        <body style="margin:0;padding:0;">
          ${Fn.outerHTML}
        </body>
      </html>
    `;const zn=JSON.parse(localStorage.getItem("cre8tly_canvas_shapes")||"[]");Vn=embedShapesIntoHTML(Vn,zn);const Zn=await commitLeadMagnetEdit(it,ct,Vn);localStorage.removeItem("cre8tly_canvas_shapes"),ot(Zn.pdf_url),et()}catch(Dn){console.error("Commit failed:",Dn)}finally{ft(!1)}}reactExports.useEffect(()=>{if(Tt){const Cn=new Blob([Tt],{type:"text/html"}),On=URL.createObjectURL(Cn);return Ft(On),()=>URL.revokeObjectURL(On)}},[Tt]),reactExports.useEffect(()=>{var On,In,Dn;const Cn=((On=rn.current)==null?void 0:On.contentDocument)||((Dn=(In=rn.current)==null?void 0:In.contentWindow)==null?void 0:Dn.document);Cn&&Cn.documentElement.style.setProperty("--hl",$t||"#fff330")},[$t,jt]),reactExports.useEffect(()=>{var Zn,lr,hr,$n,Un;const Cn=((Zn=rn.current)==null?void 0:Zn.contentDocument)||((hr=(lr=rn.current)==null?void 0:lr.contentWindow)==null?void 0:hr.document);if(!Cn)return;const On=(($n=St==null?void 0:St.bgTheme)==null?void 0:$n.toLowerCase())||"",In=(((Un=colorThemes[On])==null?void 0:Un.background)||"#ffffff").trim(),Xn=["dark","royal","navy","graphite","purple","lavender"].includes(On)||isDarkColor(In)?"#ffffff":"#000000";Cn.documentElement.style.setProperty("--text-color",Xn),Cn.documentElement.style.setProperty("--hl",$t||"#fff330"),Cn.documentElement.style.setProperty("--hl-text","#000000");const Vn=Cn.getElementById("color-fix");Vn&&Vn.remove();const zn=Cn.createElement("style");zn.id="color-fix",zn.innerHTML=`
    body, .page-inner, .page, .cover-page,
    h1, h2, h3, h4, h5, h6,
    p, div, span, strong, b, em, li {
      color: var(--text-color, ${Xn}) !important;
      -webkit-text-fill-color: var(--text-color, ${Xn}) !important;
    }
  `,Cn.head.appendChild(zn),Cn.defaultView.getComputedStyle(Cn.body).color},[St==null?void 0:St.bgTheme,$t,jt]),reactExports.useEffect(()=>{var Dn;const Cn=rn.current;if(!Cn||!(St!=null&&St.theme))return;const On=fontThemes[(Dn=St.theme)==null?void 0:Dn.toLowerCase()];if(!On)return;const In=async()=>{var Xn;const Fn=Cn.contentDocument;if(!(!Fn||!Fn.body))try{const Vn=(((Xn=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:Xn.background)||"#ffffff").trim(),zn=isDarkColor(Vn);Fn.documentElement.style.setProperty("--text-color",zn?"#ffffff":"#000000"),Fn.documentElement.style.setProperty("--hl",$t||"#fff330"),Fn.documentElement.style.setProperty("--hl-text","#000000");const lr=await(await fetch(`https://cre8tlystudio.com${On.file}`)).arrayBuffer(),hr=btoa(new Uint8Array(lr).reduce((Yn,Wn)=>Yn+String.fromCharCode(Wn),"")),$n=Fn.createElement("style");$n.id="custom-font-style",$n.innerHTML=`
        @font-face {
          font-family: '${On.name}';
          src: url(data:font/ttf;base64,${hr}) format('truetype');
        }
        html, body, .page, .page-inner, .formatted-content,
        p, h1, h2, h3, h4, h5, h6, div, span, li {
          font-family: '${On.name}', sans-serif !important;
        }
      `,Fn.head.appendChild($n);const Un=Fn.createElement("style");Un.id="responsive-width-fix",Un.innerHTML=`
  html, body {
    width: 100% !important;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Let the main page adapt naturally */
  .page, .page-inner {
    width: 100% !important;
    max-width: 667px !important; /* keep backend alignment on desktop */
    margin: 0 auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  .cover-page {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  width: 100% !important;
  background: transparent !important;
}

.cover-page .cover-img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  float: none !important;
}

.footer-link {
  margin-top: 60px !important;
  margin-bottom: 40px !important;
  text-align: center !important;
  padding-bottom: 40px !important;
}

.footer-link p {
  margin-bottom: 20px !important;
  font-size: 1.1rem !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

.footer-link .link-button {
  display: inline-block !important;
  padding: 12px 28px !important;
  border-radius: 30px !important;
  color: white !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  border: 2px solid white !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.25) !important;
}

.footer-link .link-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  /* Typography adjusts only if viewport is small */
  @media (max-width: 768px) {
    body {
      font-size: 90% !important; /* small font scaling only */
      line-height: 1.6 !important;
    }
    h1, h2, h3 {
      line-height: 1.3 !important;
      word-break: break-word !important;
    }
    img {
    display: block !important;
    margin: 0 auto !important;      /*  centers images horizontally */
    max-width: 100% !important;
    height: auto !important;
    float: none !important;         /*  removes any old float rules */
  }

  .cover-page {
    padding: 0 !important;
    margin-bottom: 1rem !important;
  }
  .cover-page .cover-img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
  }
      .footer-link {
    margin-top: 40px !important;
    margin-bottom: 30px !important;
    padding-bottom: 2rem !important;
  }
  .footer-link .link-button {
    font-size: 1rem !important;
  }
    pre {
  background-color: #0f0f0f;
  color: #f5f5f5;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  overflow-x: auto;
  margin: 0 0 1.5rem 0; /* remove top margin, only keep bottom spacing */
  white-space: pre-wrap;
  page-break-inside: avoid; /* keeps the block from splitting across PDF pages */
  box-decoration-break: clone;
}

pre + pre {
  margin-top: -0.25rem; /* closes any hairline gap between stacked blocks */
}

code {
  background-color: #1a1a1a;
  color: #00ff80;
  padding: 0.2rem 0.4rem;
  border-radius: 5px;
  font-family: "Courier New", monospace;
  font-size: 0.85rem;
}

/* Optional  better color contrast for multi-line snippets */
pre code {
  background: transparent; /* removes duplicate block background */
  color: #f5f5f5;
}
  }
`,Fn.head.appendChild(Un);const Kn=Fn.createElement("style");Kn.id="dark-preview-text",Kn.innerHTML=`
  /*  Only affect text, not the background */
  body, .page-inner, p, span, div, li, strong, b, h1, h2, h3, h4, h5, h6 {
  color: var(--text-color) !important;
  -webkit-text-fill-color: var(--text-color) !important;
}

  /* Keep background untouched (retain the original white page color) */
  .page, .cover-page {
    background-color: inherit !important;
  }

  /* Highlight and links remain readable */
  a {
    color: #4FC3F7 !important;
  }
  mark {
  background-color: var(--hl, #fff330) !important;
  color: var(--hl-text, #000000) !important;
  -webkit-text-fill-color: var(--hl-text, #000000) !important;
  border-radius: 2px;
  padding: 0 2px;
}
`,Fn.head.appendChild(Kn),Fn.documentElement.style.setProperty("--hl",typeof $t=="string"&&$t?$t:"#fff330");try{un()}catch{}}catch(Vn){console.error(" Font apply failed:",Vn)}};return Cn.addEventListener("load",In),()=>Cn.removeEventListener("load",In)},[St==null?void 0:St.theme,jt]),reactExports.useEffect(()=>{var Dn;const Cn=rn.current,On=(Cn==null?void 0:Cn.contentDocument)||((Dn=Cn==null?void 0:Cn.contentWindow)==null?void 0:Dn.document),In=On==null?void 0:On.getElementById("cre8tly-overlay-container");In&&(In.style.pointerEvents=Ut?"auto":"none")},[Ut]),reactExports.useEffect(()=>{if(!Sn||!rn.current)return;const Cn=rn.current,On=()=>{var Fn;if(!(Cn.contentDocument||((Fn=Cn.contentWindow)==null?void 0:Fn.document)))return;const Dn=()=>{var Xn;try{const Vn=Cn.contentDocument||((Xn=Cn.contentWindow)==null?void 0:Xn.document);if(!Vn)return;let zn=Sn.getHTML();zn=zn.replace(/<img[^>]+unsplash[^>]+>/gi,""),zn=zn.replace(/<img[^>]+base64[^>]+>/gi,"");const Zn=Vn.querySelector(".page-inner");Zn?(Zn.innerHTML=zn,console.log(" Updated .page-inner content live (cleaned images)")):console.warn(" .page-inner not found in iframe")}catch(Vn){console.error(" Failed to update iframe:",Vn)}};return Sn.on("update",Dn),console.log(" Live preview handler attached after iframe load"),()=>Sn.off("update",Dn)};return Cn.addEventListener("load",On),()=>{Cn.removeEventListener("load",On)}},[Sn,jt]);const[xn,an]=reactExports.useState(""),[cn,bn]=reactExports.useState("");function mn(){if(!Sn||!xn)return;const Cn=Sn.getHTML(),On=xn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),In=new RegExp(On,"gi"),Dn=Cn.replace(In,cn);Sn.commands.setContent(Dn),y$4.success(`Replaced all "${xn}" with "${cn}"`)}reactExports.useEffect(()=>{var In;const Cn=rn.current;if(!Cn)return;const On=()=>un();return Cn.addEventListener("load",On),((In=Cn.contentDocument)==null?void 0:In.readyState)==="complete"&&un(),()=>{var Xn,Vn,zn;Cn.removeEventListener("load",On);const Dn=Cn.contentDocument||((Xn=Cn.contentWindow)==null?void 0:Xn.document),Fn=(Vn=Dn==null?void 0:Dn.getElementById)==null?void 0:Vn.call(Dn,"cre8tly-overlay-container");Fn!=null&&Fn._cre8tly_mo&&Fn._cre8tly_mo.disconnect(),g||((zn=nn.current)==null||zn.unmount(),nn.current=null)}},[jt,g]),reactExports.useEffect(()=>{var Dn;const Cn=rn.current;if(!Cn)return;const On=Cn.contentDocument||((Dn=Cn.contentWindow)==null?void 0:Dn.document);if(!On||!On.body)return;if(!nn.current){console.warn("Overlay root not ready yet, mounting now..."),un();return}nn.current.render(jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:Ht,setShapes:Jt,editable:Ut,iframeWindow:Cn.contentWindow,iframeDocument:On,onSelectShape:Fn=>{Ut&&(pn(Fn),hn(!0))}}));const In=On.getElementById("cre8tly-overlay-container");In&&(In.style.pointerEvents=Ut?"auto":"none")},[Ht,Ut,jt]);const Tn=Cn=>{var In;const On=(In=rn.current)==null?void 0:In.contentWindow;On&&(On.dispatchEvent(new CustomEvent("addShape",{detail:Cn})),console.log(" Dispatched shape event to iframe:",Cn))};return reactExports.useEffect(()=>{var Fn;const Cn=rn.current,On=(Cn==null?void 0:Cn.contentDocument)||((Fn=Cn==null?void 0:Cn.contentWindow)==null?void 0:Fn.document);if(!On)return;const In=On.getElementById("cre8tly-overlay-container"),Dn=On.getElementById("cre8tly-overlay-stage");In&&(In.style.pointerEvents=Ut?"auto":"none"),Dn&&(Dn.style.pointerEvents=Ut?"auto":"none"),nn.current&&On&&nn.current.render(jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:Ht,setShapes:Jt,editable:Ut,iframeWindow:Cn.contentWindow,iframeDocument:On}))},[Ut]),jsxRuntimeExports.jsxs(yt,{open:g,onClose:et,className:"fixed inset-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:jsxRuntimeExports.jsxs(je,{className:"w-full max-w-[1650px] bg-[#0f0f10] rounded-2xl p-4 sm:p-6 shadow-2xl flex flex-col gap-4 sm:gap-6 overflow-y-auto max-h-[95vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center mb-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 bg-[#2a2a2a]/90 backdrop-blur-md border border-gray-700/60 rounded-xl px-2 py-1 shadow-lg
      transition-all duration-200 ease-in-out
      ${Ut?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>Tn("rect"),className:"w-7 h-7 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Rectangle",children:jsxRuntimeExports.jsx(Square,{size:tn,className:Zt})}),jsxRuntimeExports.jsx("button",{onClick:()=>Tn("circle"),className:"w-7 h-7 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Circle",children:jsxRuntimeExports.jsx(Circle$1,{size:tn,className:Zt})}),jsxRuntimeExports.jsx("button",{onClick:()=>Tn("arrow"),className:"w-7 h-7 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Arrow",children:jsxRuntimeExports.jsx(ArrowRight,{size:tn,className:Zt})}),jsxRuntimeExports.jsx("button",{onClick:()=>Tn("text"),className:"w-7 h-7 flex items-center justify-center bg-black rounded-md shadow-sm",title:"Add Text",children:jsxRuntimeExports.jsx(Type,{size:tn,className:Zt})})]}),Ut&&jsxRuntimeExports.jsx("button",{onClick:()=>{localStorage.removeItem("cre8tly_canvas_shapes"),Jt([]),window.dispatchEvent(new CustomEvent("clearCanvasShapes")),console.log(" Cleared all overlay shapes")},title:"Clear Design",className:"w-9 h-9 flex items-center justify-center rounded-md bg-gray-600 text-red hover:bg-red-700 hover:scale-105 transition-all shadow-sm",children:jsxRuntimeExports.jsx(Eraser,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex-1 bg-white text-black rounded-xl overflow-y-auto min-h-[50vh] lg:h-[70vh]",children:jsxRuntimeExports.jsx(EditorContent,{editor:Sn})}),jsxRuntimeExports.jsx("div",{className:"w-full flex-1 relative min-h-[50vh] lg:h-[70vh] rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{ref:rn,title:"preview",src:jt,allowTransparency:!0,className:"w-full flex-1 border border-gray-800 rounded-xl overflow-hidden min-h-[50vh] lg:h-[70vh]",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-pointer-lock allow-popups-to-escape-sandbox allow-modals",style:{position:"relative",zIndex:0,width:"100%",borderRadius:"0.75rem",background:((Pn=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:Pn.background)||"#fff",color:["dark","royal","navy","graphite","purple","lavender"].includes(((Rn=(Mn=St==null?void 0:St.bgTheme)==null?void 0:Mn.toLowerCase)==null?void 0:Rn.call(Mn))||"")?"#ffffff":"#000000"}})}),jsxRuntimeExports.jsx(ShapePropertiesPanel,{open:dn,selectedShape:on,onUpdate:Cn=>{Jt(On=>On.map(In=>In.id===on.id?{...In,...Cn}:In))},onDelete:()=>{Jt(Cn=>Cn.filter(On=>On.id!==on.id)),hn(!1)},style:{position:"fixed",bottom:"1rem",right:"1rem",zIndex:9999999}})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between border border-gray-800 rounded-lg p-3 bg-[#1b1b1b]",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Find...",value:xn,onChange:Cn=>an(Cn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Replace with...",value:cn,onChange:Cn=>bn(Cn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("button",{onClick:mn,disabled:!xn,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:"Replace All"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Highlight color:"}),jsxRuntimeExports.jsx("input",{type:"color",value:$t,onInput:wn,className:"w-9 h-9 rounded-lg cursor-pointer  shadow-inner shadow-black/40 bg-[#1a1a1a] hover:scale-105 transition-transform duration-150"}),jsxRuntimeExports.jsx("button",{onClick:()=>Sn.chain().focus().toggleHighlight({color:$t}).run(),className:"px-5 py-2.5 rounded-lg bg-[#1e1e1e] text-white font-medium border border-gray-700 hover:border-emerald-400 hover:text-emerald-300 transition-all duration-200 shadow-sm",children:"Highlight"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2 w-full",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-gray-700 rounded-lg w-full sm:w-auto",onClick:et,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-green rounded-lg disabled:opacity-50 text-black w-full sm:w-auto",disabled:dt,onClick:fn,children:dt?"Reprinting...":"Commit Edit"})]})]})})]})}function MagnetGrid({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!Array.isArray(kt)||kt.length===0)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:[kt.map(jt=>{var Ft,$t,zt;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl -z-10 transition-all",animate:{opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl flex items-center justify-center overflow-hidden border border-gray-700 relative",children:[jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Lead Magnet Cover",className:"object-cover w-full h-full rounded-xl transition-transform duration-300 group-hover:scale-105"}):jt.pdf_url?jsxRuntimeExports.jsx("img",{src:`https://cre8tlystudio.com/api/preview/${jt.id}`,alt:jt.title,className:"object-cover w-full h-full rounded-xl opacity-80"}):jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs italic",children:"No Preview"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold mt-2 truncate",children:jt.title||"Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jt.theme?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-[10px] font-semibold capitalize",style:{background:((Ft=themeStyles[jt.theme])==null?void 0:Ft.background)||"#333",color:(($t=themeStyles[jt.theme])==null?void 0:$t.color)||"#fff",border:((zt=themeStyles[jt.theme])==null?void 0:zt.border)||"none"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"N/A"}),jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs font-semibold text-center",children:jt.status==="completed"?jsxRuntimeExports.jsx("span",{className:"bg-black text-green border border-green px-3 py-[3px] rounded-full",children:"Completed"}):jt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):jt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"building..."]}):jsxRuntimeExports.jsx("span",{className:"bg-black text-purple border border-white px-4 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-[11px] text-gray-400 text-center",children:jt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(jt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(jt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function CustomerDashboard(){const{user:it,accessToken:g,refreshUser:et}=useAuth(),{magnets:ot,setMagnets:ct,fetchMagnets:ut,loading:dt}=useMagnets(),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(null),[Ft,$t]=reactExports.useState(1),[zt,Ut]=reactExports.useState(!1),[Bt,Ht]=reactExports.useState(0),[Jt,Zt]=reactExports.useState("lead_magnet"),[tn,nn]=reactExports.useState(0);function rn(){pn(null),setTimeout(()=>nn(Pn=>Pn+1),100)}const[on,pn]=reactExports.useState(null);function dn(Pn){pn(Pn)}const hn=(ot.magnets||[]).find(Pn=>Pn.id===on),un=useLocation(),En=useNavigate(),wn=10;if(typeof window<"u"){const Pn=new URLSearchParams(un.search);Pn.get("session_id")&&(console.log(" Stripe checkout success:",Pn.get("session_id")),ut(),window.history.replaceState({},document.title,"/dashboard"))}function Sn(Pn,Mn,Rn){ct(Cn=>{const On=(Cn.magnets||[]).map(In=>In.id===Pn?{...In,prompt:Mn,status:"pending",theme:Rn}:In);return{...Cn,magnets:On}}),setTimeout(ut,3e3)}function fn(){En("/plans")}const an=[...(ot==null?void 0:ot.magnets)||[]].sort((Pn,Mn)=>(Pn.slot_number||0)-(Mn.slot_number||0)),cn=Math.ceil(an.length/wn),bn=(Ft-1)*wn,mn=an.slice(bn,bn+wn);function Tn(Pn,Mn="lead_magnet"){jt(Pn),Zt(Mn),Tt(!0)}async function An(){try{await et(),await ut()}catch(Pn){console.error("Failed to refresh user slots:",Pn)}}return reactExports.useEffect(()=>{it!=null&&it.has_book&&!(it!=null&&it.has_magnet)&&En("/books")},[it]),jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"magnet",items:ot.magnets||[],summary:ot.summary||{},onCheckout:fn}),dt?jsxRuntimeExports.jsx(LoadingState,{}):ot.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:fn,type:"magnet"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MagnetGrid,{magnets:mn,onAddPrompt:Tn,onOpenEditor:dn}),jsxRuntimeExports.jsx(MagnetCardList,{magnets:mn,onAddPrompt:Tn,onOpenEditor:dn}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:Ft,totalPages:cn,onPageChange:$t}),jsxRuntimeExports.jsx(SupportTab,{})]}),Rt&&jsxRuntimeExports.jsx(PromptModal,{isOpen:kt,onClose:()=>Tt(!1),magnetId:Rt,accessToken:g,contentType:Jt,setShowGenerating:Ut,setProgress:Ht,onSubmitted:Sn}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:ft,onClose:()=>St(!1),onRefresh:An,isFirstTime:ot.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:zt,progress:Bt,type:"lead"}),jsxRuntimeExports.jsx(EditorModal,{leadMagnetId:on,open:!!on,onClose:rn,onCommitted:Pn=>ut(),bgTheme:(hn==null?void 0:hn.bg_theme)||"modern"},tn)]})})}function AdminDashboard(){const{accessToken:it}=useAuth(),[g,et]=reactExports.useState([]);return reactExports.useEffect(()=>{async function ot(){try{const ct=await axios$1.get("https://cre8tlystudio.com/api/lead-magnets/all",{headers:{Authorization:`Bearer ${it}`}});et(ct.data)}catch(ct){console.error("Error fetching all lead magnets:",ct)}}ot()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"All Lead Magnets"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.map(ot=>jsxRuntimeExports.jsxs("li",{className:"bg-charcoal p-4 rounded-lg text-white",children:[jsxRuntimeExports.jsxs("p",{children:["User: ",ot.user_id]}),jsxRuntimeExports.jsxs("p",{children:["Prompt: ",ot.prompt]}),jsxRuntimeExports.jsxs("p",{children:["Status: ",jsxRuntimeExports.jsx("span",{className:"text-green",children:ot.status})]})]},ot.id))})]})}function Contact(){const[it,g]=reactExports.useState({name:"",email:"",subject:"",message:""}),[et,ot]=reactExports.useState(!1),ct=dt=>{g({...it,[dt.target.name]:dt.target.value})},ut=async dt=>{dt.preventDefault(),ot(!0);try{await axios$1.post("https://cre8tlystudio.com/api/support/contact",it),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),g({name:"",email:"",subject:"",message:""})}catch(ft){console.error(ft),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{ot(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"min-h-screen text-white flex items-center justify-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full bg-metalBlack p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx(AnimatedLogo,{})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Have questions or need help? Fill out the form below and our support team will respond within 2448 hours."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:it.name,onChange:ct,placeholder:"Your Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:it.email,onChange:ct,placeholder:"Email associated with your account",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:it.subject,onChange:ct,placeholder:"Subject (optional)",className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("textarea",{name:"message",value:it.message,onChange:ct,placeholder:"Write your message...",rows:6,required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white resize-none"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Message"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function PlanDetailsModal({plan:it,onClose:g}){if(!it)return null;const et={basic:{title:"Basic Creator",content:`
The Basic Creator Plan gives you 5 Lead Magnet Slots to design professional, conversion-ready lead magnets using Cre8tlys AI tools. Access standard templates, custom branding, and editable layouts so you can attract new subscribers and showcase your expertise with ease.`},pro:{title:"Pro Covers",content:`
The Pro Covers Plan includes everything in Basic, plus unlimited custom cover uploads for both books and lead magnets. Personalize your visuals with full creative controlupload, test, and update covers that match your unique style and brand. Youll also gain access to thousands of royalty-free Unsplash images, making it easy to design stunning, professional-quality covers in seconds without worrying about licensing or costs.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
The Authors Assistant is your creative co-writer, an AI partner that helps you plan your story structure, build rich scenes, and craft powerful chapters without losing your authentic voice. Generate up to 750 pages with built-in editing tools that perfect your tone, pacing, and style. Plus, enjoy unlimited custom cover uploads to bring your book to life with a professional finish.`},bundle:{title:"All-In-One Bundle",content:`
The All-In-One Bundle gives you everything in a single discounted package:  
 5 Lead Magnet Slots to grow your audience  
 Pro Covers for both books and lead magnets  
 1 Authors Assistant Book Slot (750 pages + editor)  
A full creative suite that lets you write, design, and publish with complete control from start to finish.`},prompt_memory:{title:"Prompt Memory Subscription",content:`
The Prompt Memory Plan gives you a persistent AI memory across your entire Cre8tly Studio experience.
It learns your tone, writing style, and preferences, letting you generate faster, more accurate, and
on-brand results every time. Cancel anytime, no contracts.`}},{title:ot,content:ct}=et[it]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-lg w-full text-white relative shadow-xl",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ot}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:ct}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[it,g]=reactExports.useState(null),[et,ot]=reactExports.useState(null),{user:ct}=useAuth(),ut=async dt=>{if(!ct||!ct.id){y$4.error("Please sign in before selecting a plan");return}try{g(dt);const ft=localStorage.getItem("accessToken"),St=await axiosInstance.post("/checkout",{userId:ct.id,productType:dt},{headers:{Authorization:`Bearer ${ft}`}});window.location.href=St.data.url}catch(ft){console.error("Checkout error:",ft),y$4.error("Failed to start checkout session"),g(null)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center justify-center px-6 py-16",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-12 tracking-tight text-center design-text",children:"Choose Your Plan"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl",children:[jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-purple-600 via-blue-500 to-purple-600 shadow-[0_0_25px_rgba(147,51,234,0.4)] hover:shadow-[0_0_45px_rgba(147,51,234,0.7)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-white design-text",children:"Basic Creator"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"5 digital asset slots"})," and access to all standard templates. Turn ideas into irresistible lead magnets fast."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("basic"),className:"text-blue-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-white design-text",children:"$47"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("basic"),disabled:it==="basic",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="basic"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-royalPurple hover:bg-purple-800 hover:shadow-[0_0_25px_rgba(147,51,234,0.6)] text-white design-text"}`,children:it==="basic"?"Redirecting...":"Select Basic Plan"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-400 design-text",children:"Pro Covers"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Everything in Basic plus ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"unlimited custom and unsplash cover uploads"}),". Single purchase unlocks pro covers for lifetime."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("pro"),className:"text-green-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-green-400 design-text",children:"$150"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("pro"),disabled:it==="pro",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="pro"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black design-text"}`,children:it==="pro"?"Redirecting...":"Pro Covers"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-pink-500 via-rose-400 to-pink-500 shadow-[0_0_25px_rgba(255,105,180,0.3)] hover:shadow-[0_0_45px_rgba(255,105,180,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:"AI-powered co-writer that helps you structure, write, and edit up to 750 pages while keeping your unique voice."}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("author"),className:"text-pink-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-pink-400 design-text",children:"$850 "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("author"),disabled:it==="author",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-pink-600 hover:bg-pink-700 hover:shadow-[0_0_25px_rgba(255,105,180,0.6)] text-white design-text"}`,children:it==="author"?"Redirecting...":"Authors Assistant"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 shadow-[0_0_25px_rgba(255,215,0,0.3)] hover:shadow-[0_0_45px_rgba(255,215,0,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-yellow-300 design-text",children:"All-In-One Bundle"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Basic, Pro Covers, and Authors Assistant"})," in one discounted package."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("bundle"),className:"text-yellow-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-yellow-300 design-text",children:"$999"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("bundle"),disabled:it==="bundle",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="bundle"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-yellow hover:bg-yellow hover:shadow-[0_0_25px_rgba(255,215,0,0.6)] text-black font-bold design-text"}`,children:it==="bundle"?"Redirecting...":"Get the Bundle"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-300 design-text",children:"Prompt Memory"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Unlock ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"AI Prompt Memory"})," your personalized creative memory that remembers your tone, style, and preferences across every generation. Stay consistent, save time, and build smarter prompts automatically."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("prompt_memory"),className:"text-green-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold mb-6 text-green-300 design-text",children:["$14.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-gray-400",children:" / month"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("prompt_memory"),disabled:it==="prompt_memory",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="prompt_memory"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black font-bold design-text"}`,children:it==="prompt_memory"?"Redirecting...":"Subscribe"})]})})]}),et&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:et,onClose:()=>ot(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-10 text-center",children:" Secure Checkout"})]})}function t(it,g,et){return Math.max(it,Math.min(g,et))}class Animate{advance(g){var ft;if(!this.isRunning)return;let et=!1;if(this.lerp)this.value=(ot=this.value,ct=this.to,ut=60*this.lerp,dt=g,function(St,kt,Tt){return(1-Tt)*St+Tt*kt}(ot,ct,1-Math.exp(-ut*dt))),Math.round(this.value)===this.to&&(this.value=this.to,et=!0);else{this.currentTime+=g;const St=t(0,this.currentTime/this.duration,1);et=St>=1;const kt=et?1:this.easing(St);this.value=this.from+(this.to-this.from)*kt}var ot,ct,ut,dt;(ft=this.onUpdate)==null||ft.call(this,this.value,et),et&&this.stop()}stop(){this.isRunning=!1}fromTo(g,et,{lerp:ot=.1,duration:ct=1,easing:ut=St=>St,onStart:dt,onUpdate:ft}){this.from=this.value=g,this.to=et,this.lerp=ot,this.duration=ct,this.easing=ut,this.currentTime=0,this.isRunning=!0,dt==null||dt(),this.onUpdate=ft}}class Dimensions{constructor({wrapper:g,content:et,autoResize:ot=!0,debounce:ct=250}={}){qn(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});qn(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});qn(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=g,this.content=et,ot&&(this.debouncedResize=function(ut,dt){let ft;return function(){let St=arguments,kt=this;clearTimeout(ft),ft=setTimeout(function(){ut.apply(kt,St)},dt)}}(this.resize,ct),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var g,et;(g=this.wrapperResizeObserver)==null||g.disconnect(),(et=this.contentResizeObserver)==null||et.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(g,...et){let ot=this.events[g]||[];for(let ct=0,ut=ot.length;ct<ut;ct++)ot[ct](...et)}on(g,et){var ot;return(ot=this.events[g])!=null&&ot.push(et)||(this.events[g]=[et]),()=>{var ct;this.events[g]=(ct=this.events[g])==null?void 0:ct.filter(ut=>et!==ut)}}off(g,et){var ot;this.events[g]=(ot=this.events[g])==null?void 0:ot.filter(ct=>et!==ct)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(g,{wheelMultiplier:et=1,touchMultiplier:ot=1}){qn(this,"onTouchStart",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:g})});qn(this,"onTouchMove",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g,ct=-(et-this.touchStart.x)*this.touchMultiplier,ut=-(ot-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:ct,y:ut},this.emitter.emit("scroll",{deltaX:ct,deltaY:ut,event:g})});qn(this,"onTouchEnd",g=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:g})});qn(this,"onWheel",g=>{let{deltaX:et,deltaY:ot,deltaMode:ct}=g;et*=ct===1?e:ct===2?this.windowWidth:1,ot*=ct===1?e:ct===2?this.windowHeight:1,et*=this.wheelMultiplier,ot*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:et,deltaY:ot,event:g})});qn(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=g,this.wheelMultiplier=et,this.touchMultiplier=ot,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(g,et){return this.emitter.on(g,et)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:g=window,content:et=document.documentElement,wheelEventsTarget:ot=g,eventsTarget:ct=ot,smoothWheel:ut=!0,syncTouch:dt=!1,syncTouchLerp:ft=.075,touchInertiaMultiplier:St=35,duration:kt,easing:Tt=Jt=>Math.min(1,1.001-Math.pow(2,-10*Jt)),lerp:Rt=!kt&&.1,infinite:jt=!1,orientation:Ft="vertical",gestureOrientation:$t="vertical",touchMultiplier:zt=1,wheelMultiplier:Ut=1,autoResize:Bt=!0,__experimental__naiveDimensions:Ht=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:Jt,deltaY:Zt,event:tn})=>{if(tn.ctrlKey)return;const nn=tn.type.includes("touch"),rn=tn.type.includes("wheel");if(this.options.syncTouch&&nn&&tn.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const on=Jt===0&&Zt===0,pn=this.options.gestureOrientation==="vertical"&&Zt===0||this.options.gestureOrientation==="horizontal"&&Jt===0;if(on||pn)return;let dn=tn.composedPath();if(dn=dn.slice(0,dn.indexOf(this.rootElement)),dn.find(wn=>{var Sn,fn,xn,an,cn;return((Sn=wn.hasAttribute)===null||Sn===void 0?void 0:Sn.call(wn,"data-lenis-prevent"))||nn&&((fn=wn.hasAttribute)===null||fn===void 0?void 0:fn.call(wn,"data-lenis-prevent-touch"))||rn&&((xn=wn.hasAttribute)===null||xn===void 0?void 0:xn.call(wn,"data-lenis-prevent-wheel"))||((an=wn.classList)===null||an===void 0?void 0:an.contains("lenis"))&&!(!((cn=wn.classList)===null||cn===void 0)&&cn.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void tn.preventDefault();if(this.isSmooth=this.options.syncTouch&&nn||this.options.smoothWheel&&rn,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();tn.preventDefault();let hn=Zt;this.options.gestureOrientation==="both"?hn=Math.abs(Zt)>Math.abs(Jt)?Zt:Jt:this.options.gestureOrientation==="horizontal"&&(hn=Jt);const un=nn&&this.options.syncTouch,En=nn&&tn.type==="touchend"&&Math.abs(hn)>5;En&&(hn=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+hn,Object.assign({programmatic:!1},un?{lerp:En?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const Jt=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-Jt),this.emit()}},window.lenisVersion="1.0.42",g!==document.documentElement&&g!==document.body||(g=window),this.options={wrapper:g,content:et,wheelEventsTarget:ot,eventsTarget:ct,smoothWheel:ut,syncTouch:dt,syncTouchLerp:ft,touchInertiaMultiplier:St,duration:kt,easing:Tt,lerp:Rt,infinite:jt,gestureOrientation:$t,orientation:Ft,touchMultiplier:zt,wheelMultiplier:Ut,autoResize:Bt,__experimental__naiveDimensions:Ht},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:g,content:et,autoResize:Bt}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=dt||ut,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ct,{touchMultiplier:zt,wheelMultiplier:Ut}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(g,et){return this.emitter.on(g,et)}off(g,et){return this.emitter.off(g,et)}setScroll(g){this.isHorizontal?this.rootElement.scrollLeft=g:this.rootElement.scrollTop=g}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(g){const et=g-(this.time||g);this.time=g,this.animate.advance(.001*et)}scrollTo(g,{offset:et=0,immediate:ot=!1,lock:ct=!1,duration:ut=this.options.duration,easing:dt=this.options.easing,lerp:ft=!ut&&this.options.lerp,onComplete:St,force:kt=!1,programmatic:Tt=!0}={}){if(!this.isStopped&&!this.isLocked||kt){if(["top","left","start"].includes(g))g=0;else if(["bottom","right","end"].includes(g))g=this.limit;else{let Rt;if(typeof g=="string"?Rt=document.querySelector(g):g!=null&&g.nodeType&&(Rt=g),Rt){if(this.options.wrapper!==window){const Ft=this.options.wrapper.getBoundingClientRect();et-=this.isHorizontal?Ft.left:Ft.top}const jt=Rt.getBoundingClientRect();g=(this.isHorizontal?jt.left:jt.top)+this.animatedScroll}}if(typeof g=="number"){if(g+=et,g=Math.round(g),this.options.infinite?Tt&&(this.targetScroll=this.animatedScroll=this.scroll):g=t(0,g,this.limit),ot)return this.animatedScroll=this.targetScroll=g,this.setScroll(this.scroll),this.reset(),void(St==null||St(this));if(!Tt){if(g===this.targetScroll)return;this.targetScroll=g}this.animate.fromTo(this.animatedScroll,g,{duration:ut,easing:dt,lerp:ft,onStart:()=>{ct&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(Rt,jt)=>{this.isScrolling=!0,this.velocity=Rt-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=Rt,this.setScroll(this.scroll),Tt&&(this.targetScroll=Rt),jt||this.emit(),jt&&(this.reset(),this.emit(),St==null||St(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(g=this.animatedScroll,et=this.limit,(g%et+et)%et):this.animatedScroll;var g,et}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(g){this.__isSmooth!==g&&(this.__isSmooth=g,this.toggleClassName("lenis-smooth",g))}get isScrolling(){return this.__isScrolling}set isScrolling(g){this.__isScrolling!==g&&(this.__isScrolling=g,this.toggleClassName("lenis-scrolling",g))}get isStopped(){return this.__isStopped}set isStopped(g){this.__isStopped!==g&&(this.__isStopped=g,this.toggleClassName("lenis-stopped",g))}get isLocked(){return this.__isLocked}set isLocked(g){this.__isLocked!==g&&(this.__isLocked=g,this.toggleClassName("lenis-locked",g))}get className(){let g="lenis";return this.isStopped&&(g+=" lenis-stopped"),this.isLocked&&(g+=" lenis-locked"),this.isScrolling&&(g+=" lenis-scrolling"),this.isSmooth&&(g+=" lenis-smooth"),g}toggleClassName(g,et){this.rootElement.classList.toggle(g,et),this.emitter.emit("className change",this)}}const App=()=>{const it=useLocation();return reactExports.useEffect(()=>{const g=new Lenis({duration:1.4,easing:ot=>1-Math.pow(1-ot,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function et(ot){g.raf(ot),requestAnimationFrame(et)}return requestAnimationFrame(et),g.on("scroll",({scroll:ot,limit:ct,velocity:ut,direction:dt,progress:ft})=>{}),()=>g.destroy()},[]),reactExports.useEffect(()=>{if(it.hash){const g=document.querySelector(it.hash);g&&setTimeout(()=>{g.scrollIntoView({behavior:"smooth",block:"start"})},200)}},[it]),jsxRuntimeExports.jsxs("main",{className:"relative min-h-screen bg-transparent",children:[jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("section",{id:"landing",className:"padding",children:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Footer,{})]})},ReactToastify="",index="";function ForgotPassword(){const[it,g]=reactExports.useState(""),[et,ot]=reactExports.useState(!1),ct=useNavigate(),ut=async dt=>{var ft,St;if(dt.preventDefault(),!it)return y$4.error("Please enter your email address.");ot(!0);try{console.log("sending email:",it);const kt=await axiosInstance.post("/auth/forgot-password",{email:it});y$4.success(kt.data.message),g(""),setTimeout(()=>ct("/login"),2500)}catch(kt){console.error("Forgot password error:",kt),y$4.error(((St=(ft=kt.response)==null?void 0:ft.data)==null?void 0:St.message)||"Error sending reset email.")}finally{ot(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Forgot Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your email below and well send you a link to reset your password."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"email",value:it,onChange:dt=>g(dt.target.value),placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Reset Link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function ResetPassword(){const[it]=useSearchParams(),[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(!1),kt=useNavigate(),Tt=it.get("token");reactExports.useEffect(()=>{Tt||(y$4.error("Invalid or missing reset token."),kt("/login"))},[Tt,kt]);const Rt=async jt=>{var Ft,$t;if(jt.preventDefault(),!g||!ot)return y$4.error("Please enter and confirm your new password.");if(g!==ot)return y$4.error("Passwords do not match.");dt(!0);try{const zt=await axiosInstance.post("/auth/reset-password",{token:Tt,newPassword:g});y$4.success(zt.data.message||"Password reset successful!"),St(!0),setTimeout(()=>kt("/login"),3500)}catch(zt){console.error("Reset password error:",zt),y$4.error((($t=(Ft=zt.response)==null?void 0:Ft.data)==null?void 0:$t.message)||"Error resetting password.")}finally{dt(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:ft?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green mb-6",children:"Password Reset Successful"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated successfully. You can now log in with your new password."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"bg-green text-black font-semibold px-6 py-3 rounded-lg hover:opacity-90 transition-all",children:"Go to Login"})})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your new password below to reset your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"password",value:g,onChange:jt=>et(jt.target.value),placeholder:"New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"password",value:ot,onChange:jt=>ct(jt.target.value),placeholder:"Confirm New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ut,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ut?"Resetting...":"Reset Password"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-6",children:jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})})]},"form")})}),jsxRuntimeExports.jsx(Footer,{})]})}function EbookModal({ebook:it,onClose:g,onBuy:et,loadingBook:ot}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl max-w-2xl w-full shadow-xl p-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-xl",children:""}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:it.image_url,alt:it.title,className:"w-56 h-auto object-contain rounded-lg border border-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-left",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:[it.title," (guide)"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm leading-relaxed space-y-3 overflow-y-auto max-h-[300px] pr-2 mb-5 py-4",dangerouslySetInnerHTML:{__html:it.description}}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-white mb-5",children:["$",it.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>et(it),disabled:ot===it.product_type,className:`py-3 px-8 rounded-xl text-lg font-semibold shadow-lg ${ot===it.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen text-black hover:bg-green-400 transition"}`,children:ot===it.product_type?"Redirecting...":"Buy Now"})]})]})})}function EbooksStore(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0),{user:St}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const Rt=await axiosInstance.get("/ebooks");g(Rt.data)}catch(Rt){console.error("Failed to fetch ebooks:",Rt),y$4.error("Failed to load ebooks")}finally{ft(!1)}})()},[]),reactExports.useEffect(()=>{const Tt=new Lenis({duration:1.4,easing:jt=>1-Math.pow(1-jt,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function Rt(jt){Tt.raf(jt),requestAnimationFrame(Rt)}return requestAnimationFrame(Rt),Tt.on("scroll",({scroll:jt,limit:Ft,velocity:$t,direction:zt,progress:Ut})=>{}),()=>Tt.destroy()},[]);const kt=async Tt=>{var Rt;try{ot(Tt.product_type);const jt=localStorage.getItem("accessToken"),Ft=await axiosInstance.post("/ebooks/checkout",{userId:(St==null?void 0:St.id)||null,title:Tt.title,description:Tt.description,price:Tt.price,productType:Tt.product_type},jt?{headers:{Authorization:`Bearer ${jt}`}}:{});window.location.href=Ft.data.url}catch(jt){console.error("Checkout error:",((Rt=jt.response)==null?void 0:Rt.data)||jt.message),y$4.error("Failed to start checkout session"),ot(null)}};return dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Loading ebooks..."}):it.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"No ebooks available yet."}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-12 tracking-tight text-center lead-text",children:["Shop Our ",jsxRuntimeExports.jsx("span",{className:"text-green design-text",children:"Premium Guides"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center max-w-2xl mb-16 leading-relaxed",children:"Professionally written, conversion-focused guides generated by our software Cre8tly Studio. Instantly downloadable after purchase, no subscriptions, just pure value."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-7xl",children:it.map(Tt=>jsxRuntimeExports.jsx("div",{className:`relative rounded-3xl p-[2px] bg-gradient-to-r from-[#9ca3af] via-[#f3f4f6] to-[#9ca3af]
        shadow-[0_0_25px_rgba(255,255,255,0.15)] hover:shadow-[0_0_45px_rgba(255,255,255,0.35)]
        transition-all duration-300`,children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-[#1a1a1a] via-[#111111] to-[#0b0b0b] p-8 flex flex-col text-center shadow-[inset_0_0_20px_rgba(255,255,255,0.05)] min-h-[550px] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0.15)_40%,rgba(255,255,255,0)_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 relative",children:jsxRuntimeExports.jsx("img",{src:Tt.image_url,alt:Tt.title,className:"rounded-lg w-48 h-auto object-contain border border-gray-700 shadow-[0_4px_20px_rgba(0,0,0,0.4)]"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-3 text-white min-h-[64px] flex items-center justify-center",children:Tt.title}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 mb-5 text-sm leading-relaxed line-clamp-3 text-left",dangerouslySetInnerHTML:{__html:Tt.description}}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(Tt),className:"text-gray-400 text-sm hover:text-white hover:underline mb-4 transition-colors",children:"Read More"}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-extrabold mb-5 text-white tracking-wide drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]",children:["$",Tt.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(Tt),disabled:et===Tt.product_type,className:`w-full py-3 px-6 text-lg font-semibold rounded-xl transition-all duration-300 
                ${et===Tt.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-[#d1d5db] to-[#9ca3af] text-black hover:from-white hover:to-gray-300 hover:shadow-[0_0_35px_rgba(255,255,255,0.5)]"}`,children:et===Tt.product_type?"Redirecting...":"Purchase Guide"})]})]})},Tt.id))}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-12 text-center",children:" Secure Checkout"}),ct&&jsxRuntimeExports.jsx(EbookModal,{ebook:ct,onClose:()=>ut(null),onBuy:kt,loadingBook:et})]})}const BookContext=reactExports.createContext();function BookProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState([]),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const kt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(kt.data)}catch(kt){console.error("Error fetching books:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Tt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(Rt=>JSON.stringify(Rt)===JSON.stringify(Tt.data)?Rt:Tt.data)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:et,setBooks:ot,fetchBooks:St,loading:ct,error:dt},children:it})}function useBooks(){return reactExports.useContext(BookContext)}function BookPromptModal({isOpen:it,onClose:g,bookId:et,partNumber:ot=1,accessToken:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft,initialBookData:St}){const[kt,Tt]=reactExports.useState(""),[Rt,jt]=reactExports.useState(10),[Ft,$t]=reactExports.useState(""),[zt,Ut]=reactExports.useState(null),[Bt,Ht]=reactExports.useState(""),[Jt,Zt]=reactExports.useState(!1),[tn,nn]=reactExports.useState(!1),[rn,on]=reactExports.useState(!1),[pn,dn]=reactExports.useState((St==null?void 0:St.title)||""),[hn,un]=reactExports.useState((St==null?void 0:St.authorName)||""),[En,wn]=reactExports.useState((St==null?void 0:St.bookType)||"fiction");reactExports.useEffect(()=>{St&&(console.log(" Syncing initialBookData to state:",St),dn(St.title||""),un(St.authorName||""),wn(St.bookType||"fiction"))},[St]),reactExports.useEffect(()=>{it||(Tt(""),jt(10),$t(""),Ut(null),Ht(""),un(""),ft(0))},[it]),reactExports.useEffect(()=>{async function fn(){var xn;if(et)try{const cn=(await axios$1.get(`https://cre8tlystudio.com/books/draft/${et}`)).data;cn!=null&&cn.draft_text?(Tt(cn.draft_text),cn.title&&dn(cn.title),cn.link&&$t(cn.link),cn.author_name&&un(cn.author_name),cn.book_type&&wn(cn.book_type),y$4.info(`Loaded last draft from ${new Date(cn.last_saved_at).toLocaleString()}`)):console.log("No draft found for this book.")}catch(an){((xn=an.response)==null?void 0:xn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",an),y$4.error("Failed to fetch saved draft."))}}fn()},[et]),reactExports.useEffect(()=>{async function fn(){var xn;if(et)try{const an=ot>1?`https://cre8tlystudio.com/api/books/${et}/part/${ot}/draft`:`https://cre8tlystudio.com/api/books/draft/${et}`,bn=(await axios$1.get(an,{headers:{Authorization:`Bearer ${ct}`}})).data;bn!=null&&bn.draft_text?(Tt(bn.draft_text),bn.title&&Ht(bn.title),bn.link&&$t(bn.link),bn.author_name&&un(bn.author_name),bn.book_type&&wn(bn.book_type),y$4.info(`Loaded last draft from ${new Date(bn.last_saved_at||bn.updated_at||Date.now()).toLocaleString()}`)):console.log("No draft found for this book or part.")}catch(an){((xn=an.response)==null?void 0:xn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",an),y$4.error("Failed to fetch saved draft."))}}fn()},[et,ot]);async function Sn(fn){var an,cn;if(fn.preventDefault(),!kt.trim()){y$4.error("Please enter your book idea or prompt first.");return}g(),Zt(!0),ft(0),dt(!0);let xn;try{xn=setInterval(()=>{ft(mn=>mn<90?mn+Math.random()*4:mn)},400);const bn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{bookId:et,prompt:kt,pages:Rt,link:Ft,coverImage:zt,title:Bt,authorName:hn,bookName:pn,partNumber:ot,bookType:En},{headers:{Authorization:`Bearer ${ct}`},maxBodyLength:1/0,maxContentLength:1/0});clearInterval(xn),ft(100),y$4.success(" Book section generated successfully!"),dt(!1),await new Promise(mn=>setTimeout(mn,1e3)),window.dispatchEvent(new Event("refreshBooks")),typeof ut=="function"&&setTimeout(()=>ut(et,kt),1e3)}catch(bn){clearInterval(xn),ft(0),dt(!1),y$4.error(((cn=(an=bn.response)==null?void 0:an.data)==null?void 0:cn.message)||"Book generation failed. Try again."),console.error(" Book generation error:",bn)}finally{Zt(!1)}}return it?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#0b0b0b] text-white flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center px-6 py-5 border-b border-gray-700 bg-[#111]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-white text-center",children:[" Build Your Novel  Part ",ot]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute left-6 md:left-36 text-silver hover:text-white transition text-lg",children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:jsxRuntimeExports.jsx(BookPromptForm,{text:kt,setText:Tt,pages:Rt,setPages:jt,link:Ft,setLink:$t,cover:zt,setCover:Ut,title:Bt,setTitle:Ht,authorName:hn,setAuthorName:un,bookName:pn,setBookName:dn,bookType:En,setBookType:wn,onSubmit:Sn,loading:Jt,showPreview:tn,setShowPreview:nn,setShowGenerating:dt,bookId:et,setBookId:()=>{},partLocked:rn,partNumber:ot,onClose:g,setProgress:ft})})]}):null}function BookPartsModal({bookId:it,accessToken:g,onClose:et}){const[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(null);return reactExports.useEffect(()=>{async function kt(){try{const Rt=await(await fetch(`https://cre8tlystudio.com/api/books/${it}/parts`,{headers:{Authorization:`Bearer ${g}`}})).json();ct(Rt)}catch(Tt){console.error(" Failed to load book parts:",Tt)}finally{dt(!1)}}kt()},[it,g]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),ut?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:ot.map(kt=>jsxRuntimeExports.jsxs("li",{className:"flex justify-between items-center border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Part ",kt.part_number,": ",kt.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",kt.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(kt.created_at).toLocaleString()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St({url:kt.file_url,title:kt.title,partNumber:kt.part_number}),className:"px-3 py-1 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"})]},kt.id))}),jsxRuntimeExports.jsx("button",{onClick:et,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ft&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ft.url,fileTitle:ft.title,partNumber:ft.partNumber,sourceType:"book",onClose:()=>St(null)})]})}function BookCardList({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),{accessToken:kt}=useAuth();function Tt(Rt){St(Rt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[it.map(Rt=>jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:Rt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Rt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Rt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Rt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Rt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Rt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Rt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Rt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Rt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Rt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Rt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Rt.id,Rt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:Rt.pdf_url,title:Rt.book_name||"Untitled",partNumber:Rt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=750?"Download Book":"Preview"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(Rt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Rt.prompt&&Rt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Rt.id,(Rt.part_number||1)+1),className:"w-full bg-gradient-to-r from-green to-royalPurple text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=740?"Finish Book":`Continue (Part ${(Rt.part_number||1)+1})`})]})]})]},Rt.id)),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:kt,onClose:()=>dt(!1)})]})}function NewBookModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[St,kt]=reactExports.useState(!1);async function Tt(){if(!et||!ct||!dt){alert("Please fill in all fields, including book type.");return}it({title:et,authorName:ct,bookType:dt})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Book Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:et,onChange:Rt=>ot(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:ct,onChange:Rt=>ut(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2",children:"Select Book Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:["Fiction","Non-Fiction","Educational"].map(Rt=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:Rt.toLowerCase(),checked:dt===Rt.toLowerCase(),onChange:jt=>ft(jt.target.value),className:"accent-royalPurple"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:Rt})]},Rt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:St,className:"bg-gradient-to-r from-green to-royalPurple px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:St?"Saving...":"Continue"})]})]})})}function OnboardingGuide({steps:it=[],onFinish:g}){const[et,ot]=reactExports.useState(0),[ct,ut]=reactExports.useState(null);reactExports.useEffect(()=>{if(it.length>0&&it[et]){const kt=document.querySelector(it[et].target);if(kt){const Tt=kt.getBoundingClientRect();ut(Tt)}}},[et,it]);function dt(){et<it.length-1?ot(et+1):g==null||g()}function ft(){et>0&&ot(et-1)}if(!it.length||!ct)return null;const St=it[et];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:ct.top-8,left:ct.left-8,width:ct.width+16,height:ct.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:ct.bottom+12,left:ct.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:St.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:ft,disabled:et===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${et===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:et===it.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),{accessToken:Rt,user:jt,refreshUser:Ft}=useAuth(),$t=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(it.length>0&&jt&&!jt.has_completed_book_onboarding){const Ut=setTimeout(()=>Tt(!0),800);return()=>clearTimeout(Ut)}},[it,jt]);function zt(Ut){St(Ut),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:it.map(Ut=>jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:"book-title text-white text-sm font-semibold truncate mb-2",children:Ut.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Ut.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Ut.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Ut.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Ut.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Ut.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Ut.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Ut.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Ut.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Ut.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Ut.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Ut.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Ut.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Ut.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Ut.id,Ut.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create Chapter",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Ut.has_part_1===0&&(Ut.is_draft===1||Ut.draft_text)&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(Ut.id,Ut.part_number||1),className:"w-full bg-blue hover:bg-blue text-white rounded-lg py-2 text-sm font-semibold flex items-center justify-center gap-2 transition-all",title:"Continue Draft",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),Ut.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:Ut.pdf_url,title:Ut.book_name||"Untitled",partNumber:Ut.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview Book",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Ut.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Ut.pages>=750?"Download Book":"Preview"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>zt(Ut.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})]}),Ut.prompt&&Ut.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Ut.id,(Ut.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Ut.pages>=740?"Finish Book":`Continue Story (Part ${(Ut.part_number||1)+1})`})]})]})]},Ut.id))}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:Rt,onClose:()=>dt(!1)}),kt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:$t,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Tt(!1),await axiosInstance.post("https://cre8tlystudio.com/api/books/book-complete",{userId:jt==null?void 0:jt.id},{headers:{Authorization:`Bearer ${Rt}`}}),await Ft()}catch(Ut){console.error(" Failed to save onboarding status:",Ut)}}})]})}function BooksDashboard(){const{accessToken:it}=useAuth(),{books:g,setBooks:et,fetchBooks:ot,loading:ct}=useBooks(),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(0),[Ft,$t]=reactExports.useState(!1),[zt,Ut]=reactExports.useState(1),[Bt,Ht]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(null),tn=useNavigate(),nn=10,rn=[...g].sort((Sn,fn)=>new Date(fn.created_at)-new Date(Sn.created_at)),on=Math.ceil(rn.length/nn),pn=(zt-1)*nn,dn=rn.slice(pn,pn+nn);async function hn(Sn,fn=1){let xn=g.find(bn=>bn.id===Sn);try{const bn=await axios$1.get(`https://cre8tlystudio.com/api/books/${Sn}`,{headers:{Authorization:`Bearer ${it}`},withCredentials:!0});bn.data&&(console.log(" Fresh data from backend:",bn.data),xn={...xn,...bn.data})}catch(bn){console.error(" Failed to fetch book by ID:",bn),toast.error("Could not refresh book info  using cached version")}if(!xn)return;const an=!xn.author_name||xn.author_name.trim()==="",cn=!xn.title||xn.title.trim()===""||xn.title==="Untitled"||xn.title==="Untitled Book";if(an||cn){St({id:Sn,part_number:fn}),Ht(!0);return}St({id:xn.id,part_number:fn,title:xn.title||xn.book_name||"",author_name:xn.author_name||"",book_type:xn.bookType||xn.book_type||"fiction"}),dt(!0)}function un(Sn,fn){et(xn=>xn.map(an=>an.id===Sn?{...an,prompt:fn,status:"pending"}:an)),setTimeout(ot,3e3)}function En({title:Sn,authorName:fn,bookType:xn}){Zt({title:Sn,authorName:fn,bookType:xn}),Ht(!1),dt(!0)}async function wn(){try{await(await fetch("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${it}`},credentials:"include"})).json()&&ot()}catch(Sn){console.error("Failed to refresh slots:",Sn)}}return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"book",items:g,onCheckout:()=>tn("/plans")}),ct?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>tn("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:dn,onAddPrompt:(Sn,fn)=>hn(Sn,fn),onGenerateNext:(Sn,fn)=>hn(Sn,fn)}),jsxRuntimeExports.jsx(BookCardList,{books:dn,onAddPrompt:(Sn,fn)=>hn(Sn,fn),onGenerateNext:(Sn,fn)=>hn(Sn,fn)}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:zt,totalPages:on,onPageChange:Ut}),jsxRuntimeExports.jsx(SupportTab,{})]}),Bt&&ft&&jsxRuntimeExports.jsx(NewBookModal,{bookId:ft.id,accessToken:it,onCreate:En,onClose:()=>Ht(!1)}),ft&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:ut,onClose:()=>dt(!1),bookId:ft.id,partNumber:ft.part_number,accessToken:it,setShowGenerating:Tt,setProgress:jt,onSubmitted:un,initialBookData:{title:(Jt==null?void 0:Jt.title)||ft.title||"",authorName:(Jt==null?void 0:Jt.authorName)||ft.author_name||"",bookType:(Jt==null?void 0:Jt.bookType)||ft.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:Ft,onClose:()=>$t(!1),onRefresh:wn,isFirstTime:g.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:kt,progress:Rt,type:"book"})]})})}function DashboardSettings(){const{user:it,setUser:g}=useAuth(),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;(async()=>{try{const Bt=await axiosInstance.get(`upload-data/user/settings/${it.id}`);ot(Bt.data.settings)}catch(Bt){console.error("Failed to load settings:",Bt),y$4.error("Failed to load brand settings.")}})()},[it==null?void 0:it.id]);const Rt=async()=>{if(!ct){y$4.warning("Please select a file first.");return}const Ut=new FileReader;Ut.onloadend=async()=>{const Bt=Ut.result.split(",")[1];ft(!0);try{const Ht=await axiosInstance.post("upload-data/user/settings/upload",{user_id:it.id,file_name:ct.name,file_data:Bt});ot(Jt=>({...Jt,brand_identity_file:Ht.data.fileUrl})),g(Jt=>({...Jt,brand_identity_file:Ht.data.fileUrl})),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:Ht.data.fileUrl})),y$4.success("Brand file uploaded successfully!"),ut(null),Tt.current&&(Tt.current.value="")}catch(Ht){console.error(Ht),y$4.error("Upload failed. Please try again.")}finally{ft(!1)}},Ut.readAsDataURL(ct)},jt=async()=>{try{(await axiosInstance.delete(`upload-data/user/settings/remove/${it.id}`)).data.success?(ot(Bt=>({...Bt,brand_identity_file:null})),g(Bt=>({...Bt,brand_identity_file:null})),ut(null),Tt.current&&(Tt.current.value=""),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:null})),y$4.info("Brand identity file removed. Defaults restored.")):y$4.warning("Failed to remove brand file. Try again.")}catch(Ut){console.error("Error removing brand file:",Ut),y$4.error("Error removing file.")}},Ft=async()=>{try{await axiosInstance.put("upload-data/user/settings/update-cta",{userId:it.id,cta:(et==null?void 0:et.cta)||""}),g(Ut=>({...Ut,cta:et==null?void 0:et.cta})),localStorage.setItem("user",JSON.stringify({...it,cta:et==null?void 0:et.cta})),kt(!0),y$4.success("CTA saved successfully!"),setTimeout(()=>kt(!1),3e3)}catch(Ut){console.error("Failed to update CTA:",Ut),y$4.error("Failed to update CTA. Please try again.")}},zt=(()=>{if(!it)return[];const Ut=[];return it.has_book&&Ut.push("Assistant"),it.has_magnet&&Ut.push("Magnets"),it.pro_covers&&Ut.push("Pro Covers"),Ut})();return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10 border-b border-gray-800 pb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-2xl p-8 mb-10 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),zt.length>0?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:zt.map(Ut=>{let Bt="active",Ht=null;return Ut.includes("Assistant")?(Ht=(it==null?void 0:it.book_slots)??0,Ht<=0&&(Bt="expired")):Ut.includes("Magnets")?(Ht=(it==null?void 0:it.magnet_slots)??0,Ht<=0&&(Bt="expired")):Ut.includes("Pro")&&(Bt=it!=null&&it.pro_covers?"lifetime":"expired"),jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col justify-between transition-all rounded-xl p-5 border shadow-inner
              ${Bt==="expired"?"bg-[#0c0f18]/80 border-gray-800 opacity-70":"bg-[#111827]/80 hover:bg-[#1f2937]/80 border-gray-700 hover:border-gray-600 hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${Bt==="expired"?"text-red-400 bg-red-400/10":"text-green bg-green-400/10"}`,children:Ut.includes("Pro")||Bt==="active"?"Active":"Expired"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ut.includes("Assistant")&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Ut.includes("Magnets")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Ut.includes("Pro")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-royalPurple",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:Ut})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:Ut.includes("Assistant")?"Access advanced book creation and AI writing tools.":Ut.includes("Magnets")?"Generate digital products and marketing assets.":"Unlock pro cover uploads and customization tools."}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:Bt==="lifetime"?jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-gray-500 tracking-wide",children:"Lifetime"}):jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Slots remaining:"," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Ht>0?"text-gray-300":"text-red-400"}`,children:Ht})]})})]},Ut)})}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-3 shadow-lg mb-8",children:et!=null&&et.brand_identity_file?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Active Brand File"})}),jsxRuntimeExports.jsx("button",{onClick:jt,className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-md font-semibold shadow-sm transition",children:"Remove"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic",children:["Uploaded on: ",new Date().toLocaleDateString()]})]}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center",children:"No brand identity uploaded yet."})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Upload New Brand File"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted formats:"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:".pdf, .docx, .doc, .txt"})," (max 5 MB)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 w-full",children:[jsxRuntimeExports.jsx("input",{ref:Tt,type:"file",accept:".pdf,.docx,.doc,.txt",onChange:Ut=>ut(Ut.target.files[0]),className:"w-full text-sm text-gray-300 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-purple-600 hover:file:opacity-90"}),ct&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic mt-1",children:["Selected: ",jsxRuntimeExports.jsx("span",{className:"text-gray-200",children:ct.name})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Rt,disabled:dt,className:`relative w-full sm:w-auto px-6 py-2.5 rounded-lg font-semibold transition-all duration-300
    ${dt?"opacity-60 cursor-not-allowed bg-gradient-to-r from-green-700 to-green-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-400 hover:to-emerald-500 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]"}
    text-white shadow-[inset_0_0_6px_rgba(255,255,255,0.15)]`,children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:dt?"Uploading...":"Save Brand"}),!dt&&jsxRuntimeExports.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear at the end of your lead magnets or books. You can change it anytime."}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter at https://yourwebsite.com.

Lets keep this journey going together  no tech overwhelm, no burnout, just steady growth.`,value:(et==null?void 0:et.cta)||"",onChange:Ut=>ot(Bt=>({...Bt,cta:Ut.target.value})),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:Ft,className:"mt-3 px-6 py-2 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Save CTA"})}),it!=null&&it.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("https://cre8tlystudio.com/api/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${it==null?void 0:it.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(Ut){console.error(" Failed to reset onboarding:",Ut),y$4.error("Could not reset tour. Please try again.")}},className:"px-5 py-2.5 rounded-lg bg-[#6a5acd] text-black font-semibold hover:opacity-90 transition",children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Need an ISBN for your book? Cre8tly Studio can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-black font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside Cre8tly Studio!"),className:"flex-1 bg-gray-800 text-gray-300 font-semibold py-2.5 rounded-lg border border-gray-700 hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic mt-3",children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null]})]})})}function PromptMemoryTable({prompts:it=[]}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(!1),{user:ut,accessToken:dt}=useAuth(),ft=useNavigate();reactExports.useEffect(()=>{async function kt(){try{if(!(ut!=null&&ut.id))return;const Tt=await axiosInstance.get("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${dt}`}});ct(!!Tt.data.has_memory)}catch(Tt){console.error(" Failed to check memory access:",Tt)}}kt()},[ut,dt]);const St=async(kt,Tt)=>{try{const Rt=kt.replace(/<[^>]*>/g,"");await navigator.clipboard.writeText(Rt),et(Tt),y$4.success("Prompt copied to clipboard"),setTimeout(()=>et(null),2e3)}catch{y$4.error("Failed to copy prompt")}};return!Array.isArray(it)||it.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-gray-400 px-4",children:jsxRuntimeExports.jsx("p",{children:"No prompts found yet."})}):ot?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-2 sm:px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] w-full max-w-6xl rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-white",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-800/90",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Prompt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Copy"})]})}),jsxRuntimeExports.jsx("tbody",{children:it.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-900/60 transition",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-lg",children:jsxRuntimeExports.jsx("p",{className:"truncate text-white/90",children:kt.prompt.replace(/<[^>]*>/g,"")})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm whitespace-nowrap",children:kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(Copy,{size:18})})})]},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex flex-col divide-y divide-gray-800",children:it.map(kt=>jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm mb-2",children:kt.prompt.replace(/<[^>]*>/g,"")}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:kt.created_at_prompt?new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"N/A"}),jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:16}):jsxRuntimeExports.jsx(Copy,{size:16})})]})]},kt.id))})]})}):jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-[#111] w-full max-w-6xl overflow-hidden rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"opacity-40 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold text-lg",children:["Prompt Memory"," ",jsxRuntimeExports.jsx("span",{className:"text-[#d2b6ff] text-sm ml-2",children:"PRO Feature"})]})}),jsxRuntimeExports.jsx("div",{className:"min-h-[400px] flex items-center justify-center text-gray-500 text-sm",children:jsxRuntimeExports.jsx("p",{children:"Prompt data will appear here once unlocked."})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center backdrop-blur-md bg-black/40 rounded-xl text-center px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{size:20,className:"text-gray-300"}),jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Unlock this feature to access and reuse your previously generated prompts."}),jsxRuntimeExports.jsx("button",{onClick:()=>ft("/plans"),className:`border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                         text-black font-semibold px-5 py-2 rounded-lg hover:opacity-90 transition`,children:"Unlock Feature"})]})]})})}function PromptMemoryDashboard(){const{user:it}=useAuth(),[g,et]=reactExports.useState([]),[ot,ct]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;async function ut(){try{const dt=await axiosInstance.get(`/lead-magnets/prompt-memory/${it.id}`);et(dt.data)}catch(dt){console.error("Failed to load prompts:",dt)}finally{ct(!1)}}ut()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-8 mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2 design-text",children:"My Prompt Memory"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"View all prompts youve generated with Cre8tly Studio."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3 mb-8"}),ot?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 border border-gray-700 rounded-xl bg-gray-900/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Prompts Yet"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 max-w-md mx-auto",children:["You dont have any saved prompts yet. Create your first ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Digital Product"})," to start building your prompt memory."]})]}):jsxRuntimeExports.jsx(PromptMemoryTable,{prompts:g})]})}function Inbox(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Tt()},[]);async function Tt(){try{const $t=await axiosInstance.get("/admin/messages");g($t.data||[])}catch($t){console.error("Failed to load messages:",$t),y$4.error("Failed to load inbox.")}finally{ut(!1)}}async function Rt($t){if(ot($t),!$t.read_status)try{ft(!0),await axiosInstance.post(`/admin/messages/${$t.id}/read`),g(zt=>zt.map(Ut=>Ut.id===$t.id?{...Ut,read_status:1}:Ut))}catch(zt){console.error("Failed to mark message as read:",zt)}finally{ft(!1)}}async function jt($t){y$4.dismiss(),y$4(({closeToast:zt})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{kt(!0),await axiosInstance.delete(`/admin/messages/user/${$t}`),g(Ut=>Ut.filter(Bt=>Bt.id!==$t)),ot(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Ut){console.error("Failed to delete message:",Ut),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{kt(!1),zt()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:zt,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function Ft(){ot(null)}return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen bg-[#030712] text-white flex flex-col lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 lg:max-w-[380px] border-r border-gray-800 h-screen overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-800 pb-4 mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:"text-green"})]}),ct?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Loading messages..."}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:it.map($t=>jsxRuntimeExports.jsxs("li",{onClick:()=>Rt($t),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${$t.id===(et==null?void 0:et.id)?"bg-[#111827]/80 border-green":$t.read_status?"bg-[#0c0f18]/70 border-gray-800 hover:border-gray-700":"bg-[#111827]/80 border-green/40 hover:border-green"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${$t.read_status?"text-gray-300":"text-white"}`,children:$t.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date($t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${$t.read_status?"text-gray-500":"text-gray-300"}`,children:$t.message}),!$t.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},$t.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto h-screen bg-[#0B0F19]",children:et?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:Ft,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:"bg-[#111827]/60 border border-gray-800 rounded-2xl p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-800 pb-4 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2 sm:mt-0",children:[jsxRuntimeExports.jsx(Calendar,{size:12}),new Date(et.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line text-sm",children:et.message}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-4 flex items-center justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>jt(et.id),disabled:St,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${St?"bg-red-900 text-gray-400 opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),St?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[jsxRuntimeExports.jsx(Mail,{size:40,className:"mb-4 text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function ct(){try{const{data:ut}=await axiosInstance.get("https://cre8tlystudio.com/api/settings/maintenance");g(ut.maintenance)}catch{g(!1)}finally{ot(!1)}}ct()},[]),{maintenance:it,loading:et}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:" Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["Cre8tly Studio is ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"Well be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital"]})})]})}const AnimatedRoutes=()=>{const it=useLocation();return jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:it,children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(App,{})})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/prompts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(PromptMemoryDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/shop",element:jsxRuntimeExports.jsx(EbooksStore,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"/cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"/prompt",element:jsxRuntimeExports.jsx(PromptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/plans",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(PlansPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(CustomerDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(PrivateRoute,{role:"admin",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(AdminDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/debug",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},style:{backgroundColor:"#030712",color:"#fff",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Debug Test Page"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},it.pathname)})},RootApp=()=>{const{maintenance:it,loading:g}=useMaintenance();return g?null:it?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsx(BookProvider,{children:jsxRuntimeExports.jsxs(MagnetProvider,{children:[jsxRuntimeExports.jsx(Lt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));
